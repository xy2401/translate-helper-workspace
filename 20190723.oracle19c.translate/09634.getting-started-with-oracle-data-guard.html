<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The information in this section describes how to get started using Oracle Data Guard."></meta>
      <meta name="description" content="The information in this section describes how to get started using Oracle Data Guard."></meta>
      <title>Oracle Data Guard入门</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Concepts and Administration "></meta>
      <meta property="og:description" content="The information in this section describes how to get started using Oracle Data Guard."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Concepts and Administration"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-guard-concepts-and-administration.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:50:21-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96244-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="introduction-to-oracle-data-guard-concepts.html" title="Previous" type="text/html"></link>
      <link rel="next" href="creating-oracle-data-guard-physical-standby.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Concepts and Administration"></meta>
    <meta name="dcterms.isVersionOf" content="SBYDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-to-oracle-data-guard-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="creating-oracle-data-guard-physical-standby.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-guard-concepts.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Data Guard入门</li>
            </ol>
            <a id="GUID-31EBC212-59E1-4536-A884-EFA9FE3DFD84" name="GUID-31EBC212-59E1-4536-A884-EFA9FE3DFD84"></a><a id="SBYDB00100"></a>
            
            <h2 id="SBYDB-GUID-31EBC212-59E1-4536-A884-EFA9FE3DFD84" class="sect2"><span class="enumeration_chapter">2</span> Oracle Data Guard入门</h2>
         </header>
         <div class="ind">
            <div>
               <p>本节中的信息介绍了如何开始使用Oracle Data Guard。</p>
               <p>请参阅以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="getting-started-with-oracle-data-guard.html#GUID-4CAD29A7-28FD-40B4-A223-F69A302B1E00" title="备用数据库是Oracle生产数据库的事务一致性副本，最初是从主数据库的备份副本创建的。">备用数据库类型</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-data-guard.html#GUID-AC2A6894-9805-4969-9746-0D43EE7F8767" title="Oracle Data Guard提供了几个可用于配置，实施和管理Oracle Data Guard配置的接口。">用于管理Oracle Data Guard配置的用户界面</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-data-guard.html#GUID-62F35117-0A9C-47E9-82B6-7E3B214B28B7" title="使用Oracle Data Guard需要某些硬件和软件先决条件。">Oracle Data Guard操作先决条件</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-data-guard.html#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699" title="各种备用数据库的目录结构很重要，因为它确定备用数据文件，归档重做日志文件和备用重做日志文件的路径名。">备用数据库目录结构注意事项</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-data-guard.html#GUID-8DA7295A-53C7-4B52-9E0A-8A513640D265" title="在数据库主动访问文件时，您可以将在线数据文件的位置从一个物理文件移动到另一个物理文件。">移动在线数据文件的位置</a></p>
                  </li>
               </ul>
            </div><a id="SBYDB00110"></a><div class="props_rev_3"><a id="GUID-4CAD29A7-28FD-40B4-A223-F69A302B1E00" name="GUID-4CAD29A7-28FD-40B4-A223-F69A302B1E00"></a><h3 id="SBYDB-GUID-4CAD29A7-28FD-40B4-A223-F69A302B1E00" class="sect3"><span class="enumeration_section">2.1</span>备用数据库类型</h3>
               <div>
                  <p><span class="bold">备用数据库</span>是Oracle生产数据库的事务一致性副本，最初是从主数据库的备份副本创建的。
                  </p>
                  <p>创建并配置备用数据库后，Oracle Data Guard会通过将主数据库重做数据传输到备用系统来自动维护备用数据库，备用系统将重做数据应用于备用数据库。</p>
                  <p>备用数据库可以是以下类型之一：物理备用数据库，逻辑备用数据库或快照备用数据库。如果需要，物理或逻辑备用数据库可以承担主数据库的角色并接管生产处理。Oracle Data Guard配置可以包括这些类型的备用数据库的任意组合。</p>
               </div><a id="SBYDB5010"></a><a id="SBYDB00101"></a><div class="props_rev_3"><a id="GUID-88BBC338-BC93-454C-B5C6-23CA8F0C329E" name="GUID-88BBC338-BC93-454C-B5C6-23CA8F0C329E"></a><h4 id="SBYDB-GUID-88BBC338-BC93-454C-B5C6-23CA8F0C329E" class="sect4"><span class="enumeration_section">2.1.1</span>物理备用数据库</h4>
                  <div>
                     <p>物理备用数据库是主数据库的精确的块到块副本。</p>
                     <p>通过名为Redo Apply的进程将物理备用数据库维护为精确副本，其中使用数据库恢复机制将从主数据库接收的重做数据连续应用于物理备用数据库。</p>
                     <p>可以打开物理备用数据库以进行只读访问，并用于从主数据库卸载查询。 <a id="d5764e300" class="indexterm-anchor"></a><a id="d5764e304" class="indexterm-anchor"></a> 如果已购买Oracle Active Data Guard选项的许可证，则在物理备用数据库打开时，Redo Apply可以处于活动状态，从而允许查询返回与从主数据库返回的结果相同的结果。此功能称为实时查询功能。
                     </p>
                     <div class="infoboxnotealso" id="GUID-88BBC338-BC93-454C-B5C6-23CA8F0C329E__GUID-F8AFEB70-E11F-4136-A65D-B527B9034E87">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4" title="可以打开物理备用数据库以进行只读访问，并用于从主数据库卸载查询。">打开物理备用数据库</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关Oracle Active Data Guard的更多信息，请参见<a href="../dblic/Licensing-Information.html#DBLIC-GUID-AB56CEE3-955E-4E56-8B44-6075E889C283" target="_blank"><span class="italic">Oracle数据库许可信息</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-88BBC338-BC93-454C-B5C6-23CA8F0C329E__GUID-90F6868D-BC71-481F-B261-E6F527AC3E4B">物理备用数据库的好处</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>物理备用数据库具有以下优点：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>灾难恢复和高可用性</p>
                              <p>物理备用数据库是一种强大而高效的灾难恢复和高可用性解决方案。易于管理的切换和故障切换功能可以轻松地在主数据库和物理备用数据库之间进行角色转换，从而最大限度地减少主数据库因计划内和计划外中断而停机的时间。</p>
                           </li>
                           <li>
                              <p>数据保护</p>
                              <p>即使面对无法预料的灾难，物理备用数据库也可以防止数据丢失。物理备用数据库支持所有数据类型，以及主数据库可以支持的所有DDL和DML操作。它还提供了防止数据损坏和用户错误的安全措施。主数据库上的存储级别物理损坏不会传播到备用数据库。同样，可以轻松解决原本会导致数据丢失的逻辑损坏或用户错误。</p>
                           </li>
                           <li>
                              <p>减少主数据库工作量</p>
                              <p>Oracle Recovery Manager（RMAN）可以使用物理备用数据库从主数据库卸载备份，从而节省宝贵的CPU和I / O周期。</p>
                              <p>在Redo Apply处于活动状态时，也可以查询物理备用数据库，从而允许将查询从主服务器卸载到物理备用数据库，从而进一步减少主要工作负载。</p>
                           </li>
                           <li>
                              <p>性能</p>
                              <p>物理备用数据库使用的重做应用技术是通过在主数据库上进行更改来保持备用数据库更新的最有效机制，因为它使用绕过所有SQL级代码层的低级恢复机制来应用更改。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB5011"></a><a id="SBYDB00102"></a><div class="props_rev_3"><a id="GUID-D6AB6955-C1E1-4FE9-A9D9-6F6275B8748A" name="GUID-D6AB6955-C1E1-4FE9-A9D9-6F6275B8748A"></a><h4 id="SBYDB-GUID-D6AB6955-C1E1-4FE9-A9D9-6F6275B8748A" class="sect4"><span class="enumeration_section">2.1.2</span>逻辑备用数据库</h4>
                  <div>
                     <p>逻辑备用数据库最初创建为主数据库的相同副本，但稍后可以更改为具有不同的结构。</p>
                     <p>通过执行SQL语句来更新逻辑备用数据库。逻辑备用数据库的灵活性使您可以升级Oracle数据库软件（补丁集和新的Oracle数据库版本）并以滚动方式执行其他数据库维护，几乎不会出现停机。从Oracle Database <span class="italic">11g</span>开始，瞬态逻辑数据库滚动升级过程也可以与现有物理备用数据库一起使用。
                     </p>
                     <p>Oracle Data Guard通过将日志文件中的数据转换为SQL语句，然后在逻辑备用数据库上执行SQL语句，自动将归档重做日志文件或备用重做日志文件中的信息应用于逻辑备用数据库。由于逻辑备用数据库使用SQL语句更新，因此必须保持打开状态。尽管逻辑备用数据库以读/写模式打开，但其重新生成的SQL的目标表仅适用于只读操作。在更新这些表时，它们可以同时用于其他任务，例如报告，汇总和查询。</p>
                     <p>逻辑备用数据库对数据类型，表类型以及DDL和DML操作类型有一些限制。有关<a href="data-type-ddl-support-on-logical-standby-databases.html#GUID-340BA6D6-74D5-4684-AF39-08890D5CD9D4" title="When setting up a logical standby database, you must ensure the logical standby database can maintain the datatypes and tables in your primary database.">逻辑备用数据库</a>上的数据类型和DDL支持的信息，请参阅<a href="data-type-ddl-support-on-logical-standby-databases.html#GUID-340BA6D6-74D5-4684-AF39-08890D5CD9D4" title="设置逻辑备用数据库时，必须确保逻辑备用数据库可以维护主数据库中的数据类型和表。">逻辑备用数据库</a>上的数据类型和DDL支持。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D6AB6955-C1E1-4FE9-A9D9-6F6275B8748A__GUID-572902B4-B91C-4C4F-84A4-F8FF93AA4B51">逻辑备用数据库的好处</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>逻辑备用数据库是高可用性（HA）的理想选择，同时仍提供数据恢复（DR）优势。与物理备用数据库相比，逻辑备用数据库提供了显着的额外HA优势：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>最大限度地减少软件升级的停机时间</p>
                              <p>逻辑备用数据库非常适合以滚动方式升级Oracle Data Guard配置。逻辑备用可用于大大减少与应用补丁集和新软件版本相关的停机时间。逻辑备用数据库可以升级到新版本，然后切换为活动主数据库。这样可以在将旧主数据库转换为逻辑备用数据库并应用补丁集时实现完全可用性。逻辑备用数据库为<code class="codeph">DBMS_ROLLING</code> PL / SQL程序包提供了底层平台，该程序包提供的功能允许您在滚动升级和其他存储重组的上下文中使Oracle Data Guard配置高度可用。
                              </p>
                           </li>
                           <li>
                              <p>支持报告和决策支持要求</p>
                              <p>逻辑备用的一个主要好处是可以创建重要的辅助结构来优化报告工作量;可能对主要交易响应时间产生过大影响的结构。逻辑备用数据库可以将其数据物理重组为具有不同分区的不同存储类型，具有许多不同的索引，具有创建和维护的按需刷新物化视图，并且可用于驱动数据立方体和其他OLAP数据视图的创建。但是，逻辑备用数据库不允许对数据进行任何转换（例如仅复制列的子集或允许在用户表上添加其他列）。对于这些类型的报告活动，Oracle GoldenGate是Oracle的首选解决方案。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB5012"></a><a id="SBYDB00103"></a><div class="props_rev_3"><a id="GUID-140A83DB-6189-489C-ADF3-F84FA801B9E1" name="GUID-140A83DB-6189-489C-ADF3-F84FA801B9E1"></a><h4 id="SBYDB-GUID-140A83DB-6189-489C-ADF3-F84FA801B9E1" class="sect4"><span class="enumeration_section">2.1.3</span>快照备用数据库</h4>
                  <div>
                     <p>快照备用数据库是一种可更新的备用数据库，可为主数据库提供完全数据保护。</p>
                     <p>快照备用数据库从其主数据库接收并归档（但不应用）重做数据。在丢弃对快照备用数据库的所有本地更新之后，将快照备用数据库转换回物理备用数据库时，将应用从主数据库接收的重做数据。</p>
                     <p>快照备用数据库随着时间的推移而与主数据库不同，因为主数据库中的重做数据在接收时未应用。快照备用数据库的本地更新会导致其他分歧。但是，主数据库中的数据受到完全保护，因为可以随时将快照备用数据库转换回物理备用数据库，然后应用从主数据库接收的重做数据。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-140A83DB-6189-489C-ADF3-F84FA801B9E1__GUID-D2503180-6156-40CF-8A60-710B1794E626">快照备用数据库的好处</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>快照备用数据库是完全可更新的备用数据库，可提供与物理备用数据库类似的灾难恢复和数据保护优势。快照备用数据库最适用于具有主数据库的临时可更新快照的好处证明从主数据库故障中恢复的时间增加的情况。</p>
                        <p>使用快照备用数据库的好处包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>它提供了生产数据库的精确副本，用于开发和测试目的，同时始终保持数据保护。您可以使用Oracle Real Application Testing选项捕获主数据库工作负载，然后在快照备用数据库上重放它以进行测试。</p>
                           </li>
                           <li>
                              <p>通过转换为物理备用数据库并重新同步，可以轻松刷新它以包含当前生产数据。</p>
                           </li>
                        </ul>
                        <p>能够创建快照备用，测试，与生产重新同步，然后再次创建快照备用和测试，是一个可以根据需要重复的循环。可以使用相同的过程轻松创建和定期更新快照备用数据库，以用于需要对数据进行读/写访问的报告目的。</p>
                        <div class="infoboxnotealso" id="GUID-140A83DB-6189-489C-ADF3-F84FA801B9E1__GUID-B90689C1-C6F0-4D63-871C-594F43D524A3">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../ratug/introduction-to-oracle-database-testing.html#RATUG101" target="_blank"><span class="italic">Oracle数据库测试指南</span></a> ，了解有关Oracle Real Application Testing的更多信息以及使用它所需的许可证</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB00065"></a><div class="props_rev_3"><a id="GUID-AC2A6894-9805-4969-9746-0D43EE7F8767" name="GUID-AC2A6894-9805-4969-9746-0D43EE7F8767"></a><h3 id="SBYDB-GUID-AC2A6894-9805-4969-9746-0D43EE7F8767" class="sect3"><span class="enumeration_section">2.2</span>管理Oracle Data Guard配置的用户界面</h3>
               <div>
                  <p>Oracle Data Guard提供了几个可用于配置，实施和管理Oracle Data Guard配置的接口。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Oracle企业管理器云控制</p>
                        <p>Oracle Enterprise Manager Cloud Control为Oracle Data Guard代理提供GUI界面，可自动执行创建，配置和监视Oracle Data Guard环境所涉及的许多任务。有关GUI及其向导的信息，请参阅Oracle Enterprise Manager Cloud Control联机帮助。</p>
                     </li>
                     <li>
                        <p>SQL * Plus命令行界面</p>
                        <p>一些SQL * Plus语句使用<code class="codeph">STANDBY</code>关键字指定备用数据库上的操作。其他SQL语句不包含特定于备用数据库的语法，但它们对于在备用数据库上执行操作很有用。有关相关语句的列表，请参阅<a href="sql-statements-used-by-oracle-data-guard.html#GUID-A3B54628-8FDB-4E99-A933-9EDD59AAC2DF" title="有许多SQL和SQL * Plus语句可用于在Oracle Data Guard环境中对备用数据库执行操作。">与Oracle Data Guard相关的SQL</a>语句。
                        </p>
                     </li>
                     <li>
                        <p>初始化参数</p>
                        <p>几个初始化参数用于定义Oracle Data Guard环境。请参阅<a href="oracle-initialization-parameters-used-by-oracle-data-guard.html#GUID-A1CF9B00-F0F5-4F3B-A0E0-9D6ABF775EC9" title="这是您为Data Guard环境设置的初始化参数的字母顺序列表。它指示参数是为主角色还是备用角色设置的，还提供了设置每个参数的提示。">初始化参数</a>以获取相关初始化参数的列表。
                        </p>
                     </li>
                  </ul>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Oracle Data Guard代理命令行界面（DGMGRL）</p>
                        <p>DGMGRL命令行界面是使用Oracle Enterprise Manager云控制的替代方法。如果要使用代理从批处理程序或脚本管理Oracle Data Guard配置，则DGMGRL命令行界面非常有用。有关完整信息，请参阅<a href="../dgbkr/oracle-data-guard-broker-commands.html#DGBKR585" target="_blank"><span class="italic">Oracle Data Guard Broker</span></a> 。
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="SBYDB00067"></a><div class="props_rev_3"><a id="GUID-62F35117-0A9C-47E9-82B6-7E3B214B28B7" name="GUID-62F35117-0A9C-47E9-82B6-7E3B214B28B7"></a><h3 id="SBYDB-GUID-62F35117-0A9C-47E9-82B6-7E3B214B28B7" class="sect3"><span class="enumeration_section">2.3</span> Oracle Data Guard操作先决条件</h3>
               <div>
                  <p>使用Oracle Data Guard需要某些硬件和软件先决条件。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-with-oracle-data-guard.html#GUID-31B64063-7051-48E4-9BE9-E73266317C9F" title="必须在主数据库和所有备用数据库上安装相同版本的Oracle数据库企业版，除非在使用逻辑或临时逻辑备用数据库进行滚动数据库升级期间。">硬件和操作系统要求</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-oracle-data-guard.html#GUID-A9F7D87E-49EB-4CE9-A076-1F35F35C0EAB" title="要使用Oracle Data Guard，您必须满足某些Oracle软件要求。">Oracle软件要求</a></p>
                     </li>
                  </ul>
               </div><a id="SBYDB4715"></a><div class="props_rev_3"><a id="GUID-31B64063-7051-48E4-9BE9-E73266317C9F" name="GUID-31B64063-7051-48E4-9BE9-E73266317C9F"></a><h4 id="SBYDB-GUID-31B64063-7051-48E4-9BE9-E73266317C9F" class="sect4"><span class="enumeration_section">2.3.1</span>硬件和操作系统要求</h4>
                  <div>
                     <p>必须在主数据库和所有备用数据库上安装相同版本的Oracle数据库企业版，除非在使用逻辑或临时逻辑备用数据库进行滚动数据库升级期间。</p>
                     <p>从Oracle Database <span class="italic">11g开始</span> ，Oracle Data Guard为Oracle Data Guard配置提供了更高的灵活性，其中主系统和备用系统可能具有不同的CPU架构，操作系统（例如，Windows和Linux），操作系统二进制文件（32位/ 64位），或Oracle数据库二进制文件（32位/ 64位）。
                     </p>
                     <p>这种增加的混合平台灵活性受到MySupport支持说明413484.1和1085687.1（ <a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a>记录的当前限制的约束。</p>
                     <p>注释413484.1讨论了对物理备用数据库的混合平台支持和限制。</p>
                     <p>注释1085687.1讨论了逻辑备用数据库的混合平台支持和限制。</p>
                     <div class="infoboxnotealso" id="GUID-31B64063-7051-48E4-9BE9-E73266317C9F__GUID-9C0F678D-703D-4ADA-9FCB-5BAD2487BA58">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="using-sql-apply-to-perform-rolling-upgrade.html#GUID-290F632F-5295-47F3-AEF1-2D37C69C00D7" title="您可以使用逻辑备用数据库执行Oracle数据库软件的滚动升级。">使用SQL Apply升级Oracle数据库</a>以获取有关滚动数据库升级的信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="SBYDB4716"></a><div class="props_rev_3"><a id="GUID-A9F7D87E-49EB-4CE9-A076-1F35F35C0EAB" name="GUID-A9F7D87E-49EB-4CE9-A076-1F35F35C0EAB"></a><h4 id="SBYDB-GUID-A9F7D87E-49EB-4CE9-A076-1F35F35C0EAB" class="sect4"><span class="enumeration_section">2.3.2</span> Oracle软件要求</h4>
                  <div>
                     <p>要使用Oracle Data Guard，您必须满足某些Oracle软件要求。</p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Oracle Data Guard仅作为Oracle数据库企业版的一项功能提供。它不适用于Oracle数据库标准版。</p>
                              <div class="infoboxnote" id="GUID-A9F7D87E-49EB-4CE9-A076-1F35F35C0EAB__GUID-97254E1A-9428-4D7B-8EB6-C9E36F4CA421">
                                 <p class="notep1">注意：</p>
                                 <p>可以使用运行Oracle Database S标准版的数据库来构建备用数据库环境。您可以通过使用操作系统复制实用程序手动传输归档重做日志文件，或使用自定义脚本定期将归档重做日志文件从一个数据库发送到另一个数据库，注册它们，并使用介质恢复来前滚数据库副本来执行此操作在灾难恢复站点。此类配置不提供Oracle Data Guard提供的易用性，可管理性，性能和灾难恢复功能。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>通常，物理备用数据库必须与主数据库具有相同的数据库主目录版本，包括修补程序集异常（PSE），重要补丁更新（CPU）和修补程序集更新（PSU），除非Oracle Data Guard备用优先补丁正在进行申请流程（如<a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> My Oracle Support说明1265700.1中所述。</p>
                              <p>此外，从Oracle Database <span class="italic">11g</span>第2版（11.2.0.1）开始，可以使用物理备用数据库以滚动方式安装符合条件的一次性修补程序，修补程序集更新（PSU）和关键修补程序更新（CPU）。有关此功能的更多信息，请参阅<a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a>的My Oracle Support说明1265700.1。</p>
                           </li>
                           <li>
                              <p>使用Oracle Data Guard SQL Apply，您可以执行<a id="d5764e1032" class="indexterm-anchor"></a><a id="d5764e1036" class="indexterm-anchor"></a>滚动升级Oracle数据库软件<a id="d5764e1041" class="indexterm-anchor"></a><a id="d5764e1045" class="indexterm-anchor"></a><a id="d5764e1049" class="indexterm-anchor"></a><a id="d5764e1053" class="indexterm-anchor"></a>补丁集发行版<span class="italic">n</span> （最低限度，必须是版本10.1.0.3）到任何更高版本的补丁集或主要版本发行版。在滚动升级期间，您可以在升级它们的同时在主数据库和逻辑备用数据库上运行不同版本的Oracle数据库，一次一个。有关完整信息，请参阅<a href="using-sql-apply-to-perform-rolling-upgrade.html#GUID-290F632F-5295-47F3-AEF1-2D37C69C00D7" title="You can use a logical standby database to perform a rolling upgrade of Oracle Database software.">使用SQL Apply升级</a>适用的Oracle Database <span class="italic">10g</span>修补程序集版本<a href="using-sql-apply-to-perform-rolling-upgrade.html#GUID-290F632F-5295-47F3-AEF1-2D37C69C00D7" title="您可以使用逻辑备用数据库执行Oracle数据库软件的滚动升级。">的Oracle数据库</a>和自述文件。
                              </p>
                           </li>
                           <li>
                              <p>必须在Oracle Data Guard配置中的所有数据库上将<code class="codeph">COMPATIBLE</code>数据库初始化参数设置为相同的值，除非使用逻辑备用数据库，该数据库可以具有比主数据库更高的<code class="codeph">COMPATIBLE</code>设置。
                              </p>
                           </li>
                        </ul>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>主数据库必须运行<a id="d5764e1103" class="indexterm-anchor"></a><a id="d5764e1107" class="indexterm-anchor"></a> <code class="codeph">ARCHIVELOG</code>模式。有关更多信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN008" target="_blank"><span class="italic">Oracle数据库管理员指南”</span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>主数据库可以是单实例数据库或Oracle Real Application Clusters（Oracle RAC）数据库。备用数据库可以是单实例数据库或Oracle RAC数据库，这些备用数据库可以是物理，逻辑和快照类型的混合。</p>
                           </li>
                           <li>
                              <p>每个主数据库和备用数据库都必须有自己的控制文件。</p>
                           </li>
                           <li>
                              <p>如果备用数据库与主数据库位于同一系统上，则备用数据库的归档目录<span class="italic">必须</span>使用与主数据库不同的目录结构。否则，备用数据库可能会覆盖主数据库文件。
                              </p>
                           </li>
                           <li>
                              <p>要防止无法传播到备用数据库的主数据库中未记录的直接写入，请在执行备份创建的数据文件备份之前在主数据库上启用<code class="codeph">FORCE LOGGING</code> 。只要需要备用数据库，就要将数据库保持在<code class="codeph">FORCE LOGGING</code>模式。
                              </p>
                           </li>
                           <li>
                              <p>用于管理主数据库实例和备用数据库实例的用户帐户必须具有<code class="codeph">SYSDG</code>或<code class="codeph">SYSDBA</code>管理权限。
                              </p>
                           </li>
                           <li>
                              <p>为简化操作，Oracle建议您在Oracle Data Guard配置中设置Oracle自动存储管理（Oracle ASM）和Oracle管理文件（OMF），并在主数据库和备用数据库上对称地进行设置。如果Oracle Data Guard配置中的任何数据库使用Oracle ASM，OMF或两者，则配置中的每个数据库应分别使用Oracle ASM，OMF或两者，除非您有意为迁移或维护目的实施混合配置。有关更多信息，请参阅<a href="examples-of-using-oracle-data-guard.html#GUID-6FB574E5-2F3A-4C9E-A3F0-7C9154B0F540" title="创建备用数据库时，如果主数据库使用Oracle托管文件（OMF）或Oracle自动存储管理（Oracle ASM），则必须执行其他步骤。">创建使用OMF或Oracle ASM的备用数据库中</a>的方案。
                              </p>
                              <div class="infoboxnote" id="GUID-A9F7D87E-49EB-4CE9-A076-1F35F35C0EAB__GUID-385E2A95-EFB8-4195-AA2E-F43A6B7A808F">
                                 <p class="notep1">注意：</p>
                                 <p>由于某些执行涉及基于时间的数据的更新的应用程序无法处理从多个时区输入的数据，因此请考虑将主要和远程备用系统的时区设置为相同，以确保在角色转换后保持记录的时间顺序。</p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB5013"></a><a id="SBYDB5014"></a><a id="SBYDB4717"></a><div class="props_rev_3"><a id="GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699" name="GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699"></a><h3 id="SBYDB-GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699" class="sect3"><span class="enumeration_section">2.4</span>备用数据库目录结构注意事项</h3>
               <div>
                  <p>各种备用数据库的目录结构很重要，因为它确定备用数据文件，归档重做日志文件和备用重做日志文件的路径名。</p>
                  <p>如果可能，主系统和备用系统上的数据文件，日志文件和控制文件应具有相同的名称和路径名称并使用<a id="d5764e1256" class="indexterm-anchor"></a><a id="d5764e1260" class="indexterm-anchor"></a>最佳灵活体系结构（OFA）命名约定。备用数据库上的归档目录在站点之间也应该相同，包括大小和结构。此策略允许其他操作（如备份，切换和故障转移）执行同一组步骤，从而降低维护复杂性。
                  </p>
                  <div class="infoboxnotealso" id="GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__GUID-13DD87AC-95AA-480E-B217-F94F75A16764">
                     <p class="notep1">也可以看看：</p>
                     <p>有关最佳灵活体系结构（OFA）的更多信息，请参见特定于操作系统的Oracle文档</p>
                  </div>
                  <p>否则，必须设置文件名转换参数（如<a href="getting-started-with-oracle-data-guard.html#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__G74804" title="这3个列表描述了设置Data Guard配置的后果，其中主数据库和备用数据库位于不同的系统上，或者位于同一系统上的主数据库和备用数据库。第1列是备用系统。第2列是目录结构。第3列列出了后果。">表2-1</a>所示）或重命名数据文件。但是，如果您需要使用具有不同目录结构的系统或将备用数据库和主数据库放在同一系统上，则可以通过最少的额外管理来实现。
                  </p>
                  <p>三个基本<a id="d5764e1277" class="indexterm-anchor"></a><a id="d5764e1283" class="indexterm-anchor"></a><a id="d5764e1287" class="indexterm-anchor"></a>配置选项<a href="getting-started-with-oracle-data-guard.html#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__I57647">如图2-1所示</a> 。这些包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>与主数据库位于同一系统上的备用数据库，它使用与主系统不同的目录结构。这在<a href="getting-started-with-oracle-data-guard.html#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__I57647">图2-1中显示</a>为<code class="codeph">Standby1</code> 。
                        </p>
                        <p>如果在与主数据库相同的系统上具有备用数据库，则<span class="italic">必须</span>使用其他目录结构。否则，备用数据库会尝试覆盖主数据库文件。
                        </p>
                     </li>
                     <li>
                        <p>单独系统上的备用数据库，它使用与主系统相同的目录结构。这在<a href="getting-started-with-oracle-data-guard.html#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__I57647">图2-1中显示</a>为<code class="codeph">Standby2</code> 。这是推荐的方法。
                        </p>
                     </li>
                     <li>
                        <p>单独系统上的备用数据库，它使用与主系统不同的目录结构。这在<a href="getting-started-with-oracle-data-guard.html#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__I57647">图2-1中显示</a>为<code class="codeph">Standby3</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__GUID-E5463DF3-F1DE-4BC0-A737-762733184EA7">
                           <p class="notep1">注意：</p>
                           <p>为简化操作，Oracle建议您在Oracle Data Guard配置中设置Oracle自动存储管理（Oracle ASM）和Oracle管理文件（OMF），并在主数据库和备用数据库上对称地进行设置。如果Oracle Data Guard配置中的任何数据库使用Oracle ASM，OMF或两者，则配置中的每个数据库应分别使用Oracle ASM，OMF或两者，除非您有意为迁移或维护目的实施混合配置。有关更多信息，请参阅<a href="examples-of-using-oracle-data-guard.html#GUID-6FB574E5-2F3A-4C9E-A3F0-7C9154B0F540" title="创建备用数据库时，如果主数据库使用Oracle托管文件（OMF）或Oracle自动存储管理（Oracle ASM），则必须执行其他步骤。">创建使用OMF或Oracle ASM的备用数据库中</a>的方案。
                           </p>
                        </div>
                     </li>
                  </ul>
                  <div class="figure" id="GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__I57647">
                     <p class="titleinfigure">图2-1可能的待机配置</p><img src="img/sbydb058.gif" alt="下面描述图2-1" title="下面描述图2-1" longdesc="img_text/sbydb058.html"><br><a href="img_text/sbydb058.html">“图2-1可能的待机配置”的描述</a></div>
                  <!-- class="figure" -->
                  <p><a href="getting-started-with-oracle-data-guard.html#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__G74804" title="这3个列表描述了设置Data Guard配置的后果，其中主数据库和备用数据库位于不同的系统上，或者位于同一系统上的主数据库和备用数据库。第1列是备用系统。第2列是目录结构。第3列列出了后果。">表2-1</a>描述了主数据库和备用数据库的可能配置以及每种数据库的后果。
                  </p>
                  <div class="tblformal" id="GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__G74804">
                     <p class="titleintable">表2-1备用数据库位置和目录选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="备用数据库位置和目录选项" width="100%" border="1" summary="This 3 column tables describes the consequences of setting up a Data Guard configuration with the primary and standby databases located on separate systems, or with the primary and standby databases located on the same system. Column 1 is the standby system. Column 2 is the directory structure. Column 3 lists the consequences. " frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="12%" id="d5764e1356">待机系统</th>
                              <th align="left" valign="bottom" width="15%" id="d5764e1359">目录结构</th>
                              <th align="left" valign="bottom" width="73%" id="d5764e1362">后果</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="12%" id="d5764e1367" headers="d5764e1356 ">
                                 <p>与主系统相同</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d5764e1367 d5764e1359 ">
                                 <p>与主系统不同（必填）</p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d5764e1367 d5764e1362 ">
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>您可以手动重命名文件或进行设置<a id="d5764e1378" class="indexterm-anchor"></a><a id="d5764e1382" class="indexterm-anchor"></a>备用数据库上的<code class="codeph">DB_FILE_NAME_CONVERT</code>和<code class="codeph">LOG_FILE_NAME_CONVERT</code>初始化参数可自动更新备用数据库控制文件中主数据库数据文件和归档重做日志文件以及备用重做日志文件的路径名。（请参阅<a href="creating-oracle-data-guard-physical-standby.html#GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84" title="在主数据库上，您可以定义在数据库处于主要角色时控制重做传输服务的初始化参数。">设置主数据库初始化参数</a> 。）
                                       </p>
                                    </li>
                                    <li>
                                       <p>备用数据库不能防止破坏主数据库和备用数据库所在系统的灾难，但它确实为计划维护提供了切换功能。</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="12%" id="d5764e1404" headers="d5764e1356 ">
                                 <p>独立的系统</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d5764e1404 d5764e1359 ">
                                 <p>与主系统相同</p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d5764e1404 d5764e1362 ">
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>您不需要在备用数据库控制文件中重命名主数据库文件，归档重做日志文件和备用重做日志文件，但如果您需要新的命名方案（例如，在不同的文件之间传播文件），您仍然可以这样做磁盘）。</p>
                                    </li>
                                    <li>
                                       <p>通过将备用数据库定位在单独的物理介质上，可以保护主数据库上的数据免受破坏主系统的灾难的影响。</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="12%" id="d5764e1419" headers="d5764e1356 ">
                                 <p>独立的系统</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d5764e1419 d5764e1359 ">
                                 <p>与主要系统不同</p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d5764e1419 d5764e1362 ">
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>您可以手动重命名文件，也可以在备用数据库上设置<code class="codeph">DB_FILE_NAME_CONVERT</code>和<code class="codeph">LOG_FILE_NAME_CONVERT</code>初始化参数，以自动重命名数据文件（请参阅<a href="creating-oracle-data-guard-physical-standby.html#GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84" title="在主数据库上，您可以定义在数据库处于主要角色时控制重做传输服务的初始化参数。">设置主数据库初始化参数</a> ）。
                                       </p>
                                    </li>
                                    <li>
                                       <p>通过将备用数据库定位在单独的物理介质上，可以保护主数据库上的数据免受破坏主系统的灾难的影响。</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="SBYDB5158"></a><div class="props_rev_3"><a id="GUID-8DA7295A-53C7-4B52-9E0A-8A513640D265" name="GUID-8DA7295A-53C7-4B52-9E0A-8A513640D265"></a><h3 id="SBYDB-GUID-8DA7295A-53C7-4B52-9E0A-8A513640D265" class="sect3"><span class="enumeration_section">2.5</span>移动在线数据文件的位置</h3>
               <div>
                  <p>在数据库主动访问文件时，您可以将在线数据文件的位置从一个物理文件移动到另一个物理文件。</p>
                  <p>要移动文件的位置，请使用SQL语句<code class="codeph">ALTER DATABASE MOVE DATAFILE</code> 。</p>
                  <p>使用<code class="codeph">ALTER DATABASE MOVE DATAFILE</code>语句执行的操作会增加数据库的可用性，因为它不需要关闭数据库来移动在线数据文件的位置。
                  </p>
                  <p>您可以在主服务器和备用服务器上独立执行联机移动数据文件操作（物理或逻辑）。在主数据库上移动数据文件时，备用数据库不受影响，反之亦然。</p>
                  <p>在物理备用数据库上，如果打开数据库的实例处于只读模式，则可以在备用恢复运行时执行联机移动数据文件操作。此功能需要Oracle Active Data Guard许可证。</p>
               </div><a id="SBYDB5159"></a><div class="props_rev_3"><a id="GUID-312871DC-0881-444A-8DAB-0BC484638C76" name="GUID-312871DC-0881-444A-8DAB-0BC484638C76"></a><h4 id="SBYDB-GUID-312871DC-0881-444A-8DAB-0BC484638C76" class="sect4"><span class="enumeration_section">2.5.1</span>移动在线数据文件的位置时的限制</h4>
                  <div>
                     <p>移动在线数据文件的位置时存在限制。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果备用数据库已挂载但未打开，则无法使用SQL <code class="codeph">ALTER DATABASE MOVE DATAFILE</code>命令重命名或重定位物理备用数据库上的联机数据文件，该物理备用数据库是快速启动故障转移目标。
                           </p>
                        </li>
                        <li>
                           <p>在挂起恢复在已挂载但未打开的实例中运行时，无法在物理备用上执行联机移动数据文件操作。</p>
                        </li>
                        <li>
                           <p>如果备用恢复过程使数据文件脱机，缩小文件或删除表空间，则联机移动数据文件操作可能会中止。</p>
                        </li>
                        <li>
                           <p>在主数据库上，无法在属于在主数据库的所有实例上已关闭的可插拔数据库（PDB）的文件上执行联机移动数据文件操作。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-312871DC-0881-444A-8DAB-0BC484638C76__GUID-CBCEC1FD-C3E4-4037-A94A-8F26B02468AB">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关重命名和重定位在线数据文件的详细信息，请参见<a href="../admin/managing-data-files-and-temp-files.html#ADMIN13837" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">ALTER DATABASE MOVE DATAFILE</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=SQLRF55823" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
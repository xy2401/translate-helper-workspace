<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="After you complete your upgrade, you must perform the tasks described here if you upgrade your database manually instead of using DBUA."></meta>
      <meta name="description" content="After you complete your upgrade, you must perform the tasks described here if you upgrade your database manually instead of using DBUA."></meta>
      <title>手动升级Oracle数据库后才能完成的任务</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Upgrade Guide"></meta>
      <meta property="og:description" content="After you complete your upgrade, you must perform the tasks described here if you upgrade your database manually instead of using DBUA."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Upgrade Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00"></meta>
      <meta name="dcterms.title" content="Database Upgrade Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96252-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="recommended-tasks-upgrading-oracle-database-express-edition.html" title="Previous" type="text/html"></link>
      <link rel="next" href="upgrading-apps-after-oracle-db-upgrade.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="recommended-tasks-upgrading-oracle-database-express-edition.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="upgrading-apps-after-oracle-db-upgrade.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库升级指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="post-upgrade-tasks-oracle-database.html" property="item" typeof="WebPage"><span property="name">Oracle数据库的升级后任务</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">手动升级Oracle数据库后才能完成的任务</li>
            </ol>
            <a id="GUID-7611721E-D87B-41FF-9595-F9B311ABA0EC" name="GUID-7611721E-D87B-41FF-9595-F9B311ABA0EC"></a><a id="UPGRD12446"></a>
            
            <h2 id="UPGRD-GUID-7611721E-D87B-41FF-9595-F9B311ABA0EC" class="sect2">手动升级Oracle数据库后才能完成的任务</h2>
         </header>
         <div class="ind">
            <div>
               <p>完成升级后，如果手动升级数据库而不是使用DBUA，则必须执行此处描述的任务。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-AFE1C616-E075-4C3A-AE21-18EA39A7E37C">更改Oracle提供的帐户的密码</a><br>Oracle建议您执行这些任务以保护新的Oracle用户帐户。
                  </li>
                  <li class="ulchildlink"><a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-A11AEB63-82A5-468A-885D-892FD8EA4D10">使用ORAPWD创建或迁移您的密码文件</a><br>检查是否设置了<span class="parmname" translate="no">REMOTE_LOGIN_PASSWORDFILE</span> 。
                  </li>
                  <li class="ulchildlink"><a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-E7DD2B21-0C4E-49D7-949C-CA6A969C5CF6">将初始化参数文件迁移到服务器参数文件</a><br>如果您当前正在使用传统的初始化参数文件，请使用此过程迁移到服务器参数文件。
                  </li>
                  <li class="ulchildlink"><a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-AB687163-AD3B-4AED-B1F3-342E1C980CC8">识别Oracle文件并将其复制到新的Oracle Home</a><br>要升级Oracle Text，请使用此过程来识别现有Oracle主目录所需的文件并将其复制到新版本的Oracle主目录。升级Oracle数据库后完成此任务。
                  </li>
                  <li class="ulchildlink"><a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-EB10A7EC-A574-4CC5-BBAA-FD886778B084">升级Oracle Clusterware配置</a><br>如果您使用的是Oracle Clusterware，则必须升级数据库的Oracle Clusterware密钥。
                  </li>
                  <li class="ulchildlink"><a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-CB01FDA7-56CC-4EF5-930E-90E344B47C12">调整新版本的初始化参数文件</a><br>查看这些主题可帮助您在升级后检查初始化参数。
                  </li>
                  <li class="ulchildlink"><a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-05B9278E-A05C-4F0E-AC56-19A4DD076FFA">升级后为Oracle RAC设置CLUSTER_DATABASE初始化参数</a><br>对于Oracle RAC数据库实例的手动升级，必须更改CLUSTER_DATABASE初始化参数以将节点重新加入新版本集群。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="post-upgrade-tasks-oracle-database.html#GUID-637ADBD0-866B-4B64-9513-4C7CDE84895C" title="升级Oracle数据库后，完成所需的升级后任务，并考虑新版本的建议。">Oracle数据库的升级后任务</a></p>
                  </div>
               </div>
            </div>
            <a id="UPGRD12447"></a><div class="props_rev_3"><a id="GUID-AFE1C616-E075-4C3A-AE21-18EA39A7E37C" name="GUID-AFE1C616-E075-4C3A-AE21-18EA39A7E37C"></a><h3 id="UPGRD-GUID-AFE1C616-E075-4C3A-AE21-18EA39A7E37C" class="sect3">更改Oracle提供的帐户的密码</h3>
               <div>
                  <p>Oracle建议您执行这些任务以保护新的Oracle用户帐户。</p>
                  <div class="section">
                     <p>根据您升级的版本，您的数据库上可能有新的Oracle用户帐户。Oracle建议您锁定除<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>之外的所有Oracle提供的帐户，并使其密码到期，以便在解锁帐户时需要新密码。
                     </p>
                     <div class="infoboxnote" id="GUID-AFE1C616-E075-4C3A-AE21-18EA39A7E37C__GUID-F154716A-08C9-44D9-BB0D-1B026DE0A79E">
                        <p class="notep1">注意：</p>
                        <p>如果默认的Oracle Database 12 <span class="italic">c</span>安全设置已就绪，则密码必须至少为八个字符，并且不允许使用<code class="codeph">welcome</code>和<code class="codeph">oracle</code>等密码。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-AFE1C616-E075-4C3A-AE21-18EA39A7E37C__GUID-E25DE7ED-ADA6-4FCA-B18F-61CBA00CC2BB">
                        <p class="notep1">也可以看看：</p>
                        <p>有关密码要求的<a href="../dbseg/keeping-your-oracle-database-secure.html#DBSEG10005" target="_blank"><span class="italic">Oracle数据库安全指南</span></a></p>
                     </div>
                     <p>您可以通过发出以下SQL语句来查看所有帐户的状态：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT username，account_status FROM dba_users ORDER BY username;</pre><p>要锁定和过期密码，请发出以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER USER用户<span class="italic">名</span> PASSWORD EXPIRE帐户锁;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-7611721E-D87B-41FF-9595-F9B311ABA0EC" title="完成升级后，如果手动升级数据库而不是使用DBUA，则必须执行此处描述的任务。">仅在手动升级Oracle数据库后才能完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD52690"></a><div class="props_rev_3"><a id="GUID-A11AEB63-82A5-468A-885D-892FD8EA4D10" name="GUID-A11AEB63-82A5-468A-885D-892FD8EA4D10"></a><h3 id="UPGRD-GUID-A11AEB63-82A5-468A-885D-892FD8EA4D10" class="sect3">使用ORAPWD创建或迁移您的密码文件</h3>
               <div>
                  <p>检查是否设置了<span class="parmname" translate="no">REMOTE_LOGIN_PASSWORDFILE</span> 。
                  </p>
                  <p>如果<span class="parmname" translate="no">REMOTE_LOGIN_PASSWORDFILE</span>初始化参数设置为<code class="codeph">EXCLUSIVE</code> ，则使用<code>ORAPWD</code>创建或迁移密码文件。 Oracle数据库<span class="italic">12c</span>与更高版本提供了新的选择，以<code>ORAPWD</code>从现有的数据库迁移密码文件。
                  </p>
                  <p>对于Oracle Database 12 <span class="italic">c第</span> 2版（12.2）及更高版本，如果<span class="parmname" translate="no">REMOTE_LOGIN_PASSWORDFILE</span>设置为<code class="codeph">SHARED</code> ，则会收到升级前检查验证警告。您可以选择以下选项之一来解决此问题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>通过设置<code class="codeph">REMOTE_LOGIN_PASSWORDFILE = NONE</code>完全禁用基于密码文件的身份验证</p>
                     </li>
                     <li>
                        <p>通过设置<code class="codeph">REMOTE_LOGIN_PASSWORD = EXCLUSIVE</code>限制基于密码文件的身份验证</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-A11AEB63-82A5-468A-885D-892FD8EA4D10__GUID-2F09B543-998D-45CA-A3AC-7A97466D1BF3">
                     <p class="notep1">也可以看看：</p>
                     <p>有关创建或迁移密码文件的详细信息，请参见<a href="../admin/getting-started-with-database-administration.html#ADMIN11059" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-7611721E-D87B-41FF-9595-F9B311ABA0EC" title="完成升级后，如果手动升级数据库而不是使用DBUA，则必须执行此处描述的任务。">仅在手动升级Oracle数据库后才能完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12448"></a><div class="props_rev_3"><a id="GUID-E7DD2B21-0C4E-49D7-949C-CA6A969C5CF6" name="GUID-E7DD2B21-0C4E-49D7-949C-CA6A969C5CF6"></a><h3 id="UPGRD-GUID-E7DD2B21-0C4E-49D7-949C-CA6A969C5CF6" class="sect3">将初始化参数文件迁移到服务器参数文件</h3>
               <div>
                  <p>如果您当前正在使用传统的初始化参数文件，请使用此过程迁移到服务器参数文件。</p>
                  <ol>
                     <li>
                        <p>如果初始化参数文件位于客户端计算机上，则将文件从客户端计算机传输到服务器计算机。</p>
                     </li>
                     <li>
                        <p>使用<code>CREATE SPFILE</code>语句创建服务器参数文件。此语句读取初始化参数文件以创建服务器参数文件。您无需启动数据库即可发出<code>CREATE SPFILE</code>语句。
                        </p>
                     </li>
                     <li>
                        <p>使用新创建的服务器参数文件启动实例。</p>
                     </li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-E7DD2B21-0C4E-49D7-949C-CA6A969C5CF6__GUID-9193DDE1-8530-465C-89B4-CDB1F561DDFC">
                        <p class="notep1">注意：</p>
                        <p>如果您使用的是Oracle RAC，则必须将所有特定于实例的初始化参数文件合并到一个初始化参数文件中。完成将服务器参数文件与群集数据库一起使用所需的过程。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-E7DD2B21-0C4E-49D7-949C-CA6A969C5CF6__GUID-7AE11375-9B8D-415D-8AB1-3231EF83910F">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../racad/administering-database-instances-and-cluster-databases.html#RACAD020" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../install-and-upgrade.html" target="_blank"><span><cite>适用</cite></span></a>于您的操作系统的<a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Real Application Clusters安装指南</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关创建服务器参数文件的详细信息，请参见<a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN00202" target="_blank"><span><cite>“Oracle数据库管理员指南</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关<code>CREATE SPFILE</code>语句的信息，请<a href="../sqlrf/CREATE-SPFILE.html#SQLRF01315" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-7611721E-D87B-41FF-9595-F9B311ABA0EC" title="完成升级后，如果手动升级数据库而不是使用DBUA，则必须执行此处描述的任务。">仅在手动升级Oracle数据库后才能完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-AB687163-AD3B-4AED-B1F3-342E1C980CC8" name="GUID-AB687163-AD3B-4AED-B1F3-342E1C980CC8"></a><h3 id="UPGRD-GUID-AB687163-AD3B-4AED-B1F3-342E1C980CC8" class="sect3">识别Oracle文件并将其复制到新的Oracle Home</h3>
               <div>
                  <p>要升级Oracle Text，请使用此过程来识别现有Oracle主目录所需的文件并将其复制到新版本的Oracle主目录。升级Oracle数据库后完成此任务。</p>
                  <div class="section">
                     <p>某些Oracle Text功能依赖于已配置的Oracle主目录下的文件。手动升级到新的Oracle数据库发行版之后，或者在更改Oracle主目录的任何进程之后，您必须手动识别并移动这些文件。这些文件包括用户筛选器，邮件筛选器配置文件和所有知识库扩展文件。识别文件后，将文件从现有Oracle主目录复制到新的Oracle主目录。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="p">要从现有Oracle主目录中识别所需文件并将其复制到新版Oracle主目录：</div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>使用早期版本数据库的<code class="codeph">SYS,</code> <code class="codeph">SYSTEM,</code>或<code class="codeph">CTXSYS</code>系统特权登录。</span></li>
                     <li class="stepexpand"><span>在早期版本数据库的Oracle主目录下，运行<code>$ORACLE_HOME/ctx/admin/ctx_oh.sql</code> SQL脚本。</span><div>
                           <p>例如：</p><pre class="pre codeblock"><code>sqlplus / as sysdba连接SQL&gt; @？/ CTX /管理/ ctx_oh_files</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>查看<code>ctx_oh_files.sql</code>命令的输出，并将文件复制到新的Oracle主目录。</span></li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../ccapp/migrating-oracle-text-applications.html#CCAPP2001" target="_blank"><span><cite>Oracle Text Application Developer's Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-7611721E-D87B-41FF-9595-F9B311ABA0EC" title="完成升级后，如果手动升级数据库而不是使用DBUA，则必须执行此处描述的任务。">仅在手动升级Oracle数据库后才能完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12450"></a><div class="props_rev_3"><a id="GUID-EB10A7EC-A574-4CC5-BBAA-FD886778B084" name="GUID-EB10A7EC-A574-4CC5-BBAA-FD886778B084"></a><h3 id="UPGRD-GUID-EB10A7EC-A574-4CC5-BBAA-FD886778B084" class="sect3">升级Oracle Clusterware配置</h3>
               <div>
                  <p>如果您使用的是Oracle Clusterware，则必须升级数据库的Oracle Clusterware密钥。</p>
                  <div class="section">
                     <p>运行<code>srvctl</code> for Oracle Database 12 <span class="italic">c</span>以升级数据库。例如：</p><pre class="pre codeblock"><code><span class="variable" translate="no">ORACLE_HOME</span> / bin / srvctl升级数据库-db <span class="variable" translate="no">name</span> -o <span class="variable" translate="no">ORACLE_HOME</span></code></pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../racad/index.html" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-7611721E-D87B-41FF-9595-F9B311ABA0EC" title="完成升级后，如果手动升级数据库而不是使用DBUA，则必须执行此处描述的任务。">仅在手动升级Oracle数据库后才能完成的任务</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD12451"></a><div class="props_rev_3"><a id="GUID-CB01FDA7-56CC-4EF5-930E-90E344B47C12" name="GUID-CB01FDA7-56CC-4EF5-930E-90E344B47C12"></a><h3 id="UPGRD-GUID-CB01FDA7-56CC-4EF5-930E-90E344B47C12" class="sect3">调整新版本的初始化参数文件</h3>
               <div>
                  <p>查看这些主题可帮助您在升级后检查初始化参数。</p>
                  <p>每个版本的Oracle数据库都引入了新的初始化参数，弃用了一些初始化参数，并取消了一些初始化参数。您必须调整参数文件以考虑这些更改，并利用可能对您的系统有益的新初始化参数。此外，在不使用DBUA的情况下执行手动升级时， <code class="codeph">tnsnames.ora</code>文件不会自动填充新的配置信息和设置。因此，必须手动更新<code class="codeph">tnsnames.ora</code>并调整<code class="codeph">local_listener</code>和<code class="codeph">remote_listener</code>参数引用（如果必须解析这些引用）。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-C2DE66A9-61F0-41AE-A028-FEAC57ECC0BC">升级后设置COMPATIBLE初始化参数</a><br>测试后，您可以将<span class="parmname" translate="no">COMPATIBLE</span>初始化参数设置为新数据库所需的兼容级别。
                     </li>
                     <li class="ulchildlink"><a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-345F0189-8718-4336-9807-4C98BAD58AC3">升级后调整TNSNAMES.ORA和LISTENER参数</a><br>执行手动升级后，如果必须解析<code class="codeph">tnsnames.ora</code> <code class="codeph">local_listener</code>和<code class="codeph">remote_listener</code> ，则必须手动调整这些参数。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-CB01FDA7-56CC-4EF5-930E-90E344B47C12__GUID-76E1C184-0FC6-43E5-894C-82EFA7EE2F7C">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../refrn/index.html" target="_blank"><span><cite>Oracle数据库参考</cite></span></a> “此版本中的更改”部分，其中列出了新的初始化参数以及有关每个参数的信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-7611721E-D87B-41FF-9595-F9B311ABA0EC" title="完成升级后，如果手动升级数据库而不是使用DBUA，则必须执行此处描述的任务。">仅在手动升级Oracle数据库后才能完成的任务</a></p>
                     </div>
                  </div>
               </div>
               <a id="UPGRD12479"></a><div class="props_rev_3"><a id="GUID-C2DE66A9-61F0-41AE-A028-FEAC57ECC0BC" name="GUID-C2DE66A9-61F0-41AE-A028-FEAC57ECC0BC"></a><h4 id="UPGRD-GUID-C2DE66A9-61F0-41AE-A028-FEAC57ECC0BC" class="sect4">升级后设置COMPATIBLE初始化参数</h4>
                  <div>
                     <p>测试后，您可以将<span class="parmname" translate="no">COMPATIBLE</span>初始化参数设置为新数据库所需的兼容级别。
                     </p>
                     <p><span class="parmname" translate="no">COMPATIBLE</span>初始化参数控制数据库的兼容级别。仅当您确定不再需要降级数据库的能力时，才将<span class="parmname" translate="no">COMPATIBLE</span>初始化参数设置为更高的值。
                     </p>
                     <ol>
                        <li>
                           <p>在引发<span class="parmname" translate="no">COMPATIBLE</span>初始化参数（可选）之前执行数据库备份。
                           </p>
                           <p>提高<span class="parmname" translate="no">COMPATIBLE</span>初始化参数可能导致数据库与早期版本的Oracle数据库不兼容。备份可确保您可以在必要时返回到早期版本。
                           </p>
                        </li>
                        <li>
                           <p>如果您使用的是服务器参数文件，请完成以下步骤：</p>
                           <ol type="a">
                              <li>
                                 <p>要设置或更改<span class="parmname" translate="no">COMPATIBLE</span>初始化参数的值，请更新服务器参数文件。
                                 </p>
                                 <p>例如，要将<span class="parmname" translate="no">COMPATIBLE</span>初始化参数设置为<code class="codeph">12.2.0</code> ，请输入以下语句：</p><pre class="pre codeblock"><code>SQL&gt; ALTER SYSTEM SET COMPATIBLE = '12 .2.0'SCOOPE = SPFILE;</code></pre></li>
                              <li>
                                 <p>关闭并重新启动实例。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>如果您使用的是初始化参数文件，请完成以下步骤：</p>
                           <ol type="a">
                              <li>
                                 <p>如果实例正在运行，则将其关闭。</p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SHUTDOWN IMMEDIATE</pre></li>
                              <li>
                                 <p>要设置或更改<span class="parmname" translate="no">COMPATIBLE</span>初始化参数的值，请编辑初始化参数文件。
                                 </p>
                                 <p>例如，要将<span class="parmname" translate="no">COMPATIBLE</span>初始化参数设置<code class="codeph">for Oracle Database release 12.2</code> ，请在初始化参数文件中输入以下内容：</p><pre class="oac_no_warn" dir="ltr">兼容性= 12.2.0</pre></li>
                              <li>
                                 <p>使用<code>STARTUP</code>启动实例。</p>
                              </li>
                           </ol>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-C2DE66A9-61F0-41AE-A028-FEAC57ECC0BC__GUID-5C3EB196-B24A-4D48-88BF-C46196346B6B">
                        <p class="notep1">注意：</p>
                        <p>如果您使用的是ASM磁盘组，则磁盘组兼容性属性必须等于或小于<code class="codeph">init.ora</code>数据库兼容性参数的值。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C2DE66A9-61F0-41AE-A028-FEAC57ECC0BC__GUID-5946F478-E837-4E67-8A45-1ABEA196E52D">
                        <p class="notep1">也可以看看：</p>
                        <p>有关执行备份的详细信息<a href="../bradv/backing-up-database.html#BRADV8003" target="_blank"><span class="italic">，请参见“Oracle数据库备份和恢复用户指南”</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-CB01FDA7-56CC-4EF5-930E-90E344B47C12" title="查看这些主题可帮助您在升级后检查初始化参数。">调整新版本的初始化参数文件</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD52745"></a><div class="props_rev_3"><a id="GUID-345F0189-8718-4336-9807-4C98BAD58AC3" name="GUID-345F0189-8718-4336-9807-4C98BAD58AC3"></a><h4 id="UPGRD-GUID-345F0189-8718-4336-9807-4C98BAD58AC3" class="sect4">升级后调整TNSNAMES.ORA和LISTENER参数</h4>
                  <div>
                     <p>执行手动升级后，如果必须解析<code class="codeph">tnsnames.ora</code> <code class="codeph">local_listener</code>和<code class="codeph">remote_listener</code> ，则必须手动调整这些参数。
                     </p>
                     <p></p>
                     <p>DBUA在自动升级期间处理对网络命名和侦听器的更改。但是，在手动升级期间， <code class="codeph">tnsnames.ora</code>和侦听器都不会更改。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../netag/configuring-naming-methods.html#NETAG259" target="_blank"><span><cite>Oracle数据库网络服务管理员指南</cite></span></a></li>
                           <li><a href="../netrf/index.html" target="_blank"><span><cite>Oracle数据库网络服务参考</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-CB01FDA7-56CC-4EF5-930E-90E344B47C12" title="查看这些主题可帮助您在升级后检查初始化参数。">调整新版本的初始化参数文件</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD12453"></a><div class="props_rev_3"><a id="GUID-05B9278E-A05C-4F0E-AC56-19A4DD076FFA" name="GUID-05B9278E-A05C-4F0E-AC56-19A4DD076FFA"></a><h3 id="UPGRD-GUID-05B9278E-A05C-4F0E-AC56-19A4DD076FFA" class="sect3">升级后为Oracle RAC设置CLUSTER_DATABASE初始化参数</h3>
               <div>
                  <p>对于Oracle RAC数据库实例的手动升级，必须更改CLUSTER_DATABASE初始化参数以将节点重新加入新版本集群。</p>
                  <p>在升级集群成员节点时，请在升级集群数据库之前将<code class="codeph">CLUSTER_DATABASE</code>初始化参数设置为<code class="codeph">false</code> 。
                  </p>
                  <p>完成升级后，必须将此参数设置为<code class="codeph">true</code> ，以便可以将节点重新加入新版本集群。
                  </p>
                  <div class="infoboxnote" id="GUID-05B9278E-A05C-4F0E-AC56-19A4DD076FFA__GUID-461E7364-326E-4CB2-B2F2-C98172FA3BE8">
                     <p class="notep1">注意：</p>
                     <p>如果使用数据库升级助手（DBUA）执行升级，则DBUA会为您执行此任务。</p>
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="tasks-complete-only-manually-upgrading-oracle-database.html#GUID-7611721E-D87B-41FF-9595-F9B311ABA0EC" title="完成升级后，如果手动升级数据库而不是使用DBUA，则必须执行此处描述的任务。">仅在手动升级Oracle数据库后才能完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
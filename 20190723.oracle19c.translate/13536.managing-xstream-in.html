<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can manage an XStream In configuration."></meta>
      <meta name="description" content="You can manage an XStream In configuration."></meta>
      <title>管理XStream</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="XStream Guide "></meta>
      <meta property="og:description" content="You can manage an XStream In configuration."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="XStream Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xstream-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:45:15-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2009, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96280-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="configuring-xstream-in.html" title="Previous" type="text/html"></link>
      <link rel="next" href="monitoring-xstream-in.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XStream Guide"></meta>
    <meta name="dcterms.isVersionOf" content="XSTRM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-xstream-in.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="monitoring-xstream-in.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">XStream指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="xstream-in.html" property="item" typeof="WebPage"><span property="name">XStream In</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理XStream</li>
            </ol>
            <a id="GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" name="GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD"></a><a id="XSTRM72715"></a>
            
            <h2 id="XSTRM-GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" class="sect2"><span class="enumeration_chapter">10</span>管理XStream</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以管理XStream In配置。</p>
               <p>本章不涉及对入站服务器使用规则，规则集或基于规则的转换。默认情况下，入站服务器不使用规则或规则集。因此，入站服务器应用XStream客户端应用程序发送给它的所有逻辑更改记录（LCR）。但是，要过滤发送到入站服务器的LCR，可以使用<code class="codeph">DBMS_XSTREAM_ADM</code>和<code class="codeph">DBMS_RULE_ADM</code>程序包将规则和规则集添加到入站服务器。您还可以使用<code class="codeph">DBMS_XSTREAM_ADM</code>包指定基于规则的转换。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A">关于管理XStream</a><br>您可以修改属于XStream In配置的数据库组件，例如入站服务器。
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE">启动入站服务器</a><br>必须启用入站服务器才能从XStream客户端应用程序接收逻辑更改记录（LCR）并应用LCR。您在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">START_APPLY</code>过程以启动现有入站服务器。
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B">停止入站服务器</a><br>您在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">STOP_APPLY</code>过程以停止现有的入站服务器。在对XStream配置中的问题进行故障排除时，可能会停止入站服务器。
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5">为入站服务器设置应用参数</a><br>应用参数控制入站服务器的运行方式。您可以设置使用入站服务器的应用参数<code class="codeph">SET_PARAMETER</code>在程序<code class="codeph">DBMS_XSTREAM_ADM</code>包。
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4">更改入站服务器的“应用用户”</a><br>入站服务器在其应用用户的安全域中应用LCR，并且客户端应用程序必须作为应用用户附加到入站服务器。您可以更改与入站服务器的应用用户<code class="codeph">ALTER_INBOUND</code>在程序<code class="codeph">DBMS_XSTREAM_ADM</code>包。
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43">在冲突检测和解决方案中管理XStream</a><br>当多个客户端几乎同时修改同一个表行时，可能会发生冲突。XStream In检测冲突并提供解决冲突的方法。
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-52AE0882-647F-4C68-89DD-E1D658569BA7">管理应用错误</a><br>当入站服务器尝试应用LCR时，应用错误结果，并引发错误。
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-1D97E873-3C82-4E2C-BBB0-C1049D7E5600">冲突和错误处理优先级</a><br>要解决冲突或错误，入站服务器会尝试查找冲突处理程序和错误处理程序。
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4">在配置中删除XStream中的组件</a><br>你可以用降入站服务器<code class="codeph">DROP_INBOUND</code>在程序<code class="codeph">DBMS_XSTREAM_ADM</code>包。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="xstream-in.html#GUID-D7F5E262-D5D6-4286-95CD-E69FFB8DAAAE" title="您可以配置和管理XStream In环境。">XStream In</a></p>
                  </div>
               </div>
            </div>
            <a id="XSTRM72882"></a><div class="props_rev_3"><a id="GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A" name="GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A"></a><h3 id="XSTRM-GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A" class="sect3"><span class="enumeration_section">10.1</span>关于管理XStream</h3>
               <div>
                  <p>您可以修改属于XStream In配置的数据库组件，例如入站服务器。</p>
                  <p>管理XStream的主界面在数据库组件中是PL / SQL。具体来说，使用以下Oracle提供的PL / SQL包来管理XStream In：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">DBMS_XSTREAM_ADM</code></p>
                        <p><code class="codeph">DBMS_XSTREAM_ADM</code>包是用于管理XStream In的主包。此程序包包含可用于配置，修改或删除入站服务器的子程序。此程序包还允许您修改入站服务器使用的规则，规则集和基于规则的转换。
                        </p>
                        <div class="infoboxnotealso" id="GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A__GUID-6B76FA67-D195-42DB-BC76-3F4B73C571C0">
                           <p class="notep1">也可以看看：</p>
                           <p>有关此程序包的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS73643" target="_blank"><span><cite>Oracle Database PL / SQL程序包和类型参考</cite></span></a></p>
                        </div>
                     </li>
                     <li>
                        <p><code class="codeph">DBMS_XSTREAM_AUTH</code></p>
                        <p><code class="codeph">DBMS_XSTREAM_AUTH</code>包使您可以配置和修改XStream管理员。
                        </p>
                        <div class="infoboxnotealso" id="GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A__GUID-0E09063C-8BA9-4B84-82ED-3EB39F7A8A56">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="configuring-xstream-in.html#GUID-445DEEE0-6449-490B-8264-87CDB0183E1F" title="XStream管理员在XStream In环境中配置和管理XStream组件。">配置XStream管理员</a> ”</span>以获取有关使用此程序包创建XStream管理员的信息</p>
                              </li>
                              <li>
                                 <p>有关此程序包的详细信息，请参阅<a href="../arpls/DBMS_XSTREAM_AUTH.html#ARPLS73647" target="_blank"><span><cite>Oracle Database PL / SQL程序包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p><code class="codeph">DBMS_APPLY_ADM</code></p>
                        <p><code class="codeph">DBMS_APPLY_ADM</code>程序包允许您修改入站服务器。
                        </p>
                        <div class="infoboxnotealso" id="GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A__GUID-82032E86-D265-499F-8F8A-9AD0D33C3F16">
                           <p class="notep1">也可以看看：</p>
                           <p>有关此程序包的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS300" target="_blank"><span><cite>Oracle Database PL / SQL程序包和类型参考</cite></span></a></p>
                        </div>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="您可以管理XStream In配置。">管理XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM72884"></a><a id="XSTRM72883"></a><div class="props_rev_3"><a id="GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE" name="GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE"></a><h3 id="XSTRM-GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE" class="sect3"><span class="enumeration_section">10.2</span>启动入站服务器</h3>
               <div>
                  <p>必须启用入站服务器才能从XStream客户端应用程序接收逻辑更改记录（LCR）并应用LCR。您在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">START_APPLY</code>过程以启动现有入站服务器。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE__GUID-07DC2A8F-D9C6-4F20-988D-6D40AE578CD1">要启动入站服务器：</p>
                     <ol>
                        <li>
                           <p>以XStream管理员身份连接到入站服务器数据库。</p>
                           <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>运行<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">START_APPLY</code>过程，并为<code class="codeph">apply_name</code>参数指定入站服务器。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例启动名为<code class="codeph">xin</code>的入站服务器。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE__GUID-13ECC923-4A79-4B03-81CC-6BC832BD0EDE">
                     <p class="titleinexample">示例10-1启动名为xout的出站服务器</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_APPLY_ADM.START_APPLY（apply_name =&gt;'xin'）;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE__GUID-2F225028-543A-4999-968C-8C75A65AE0B9">
                     <p class="notep1">也可以看看：</p>
                     <p>Oracle企业管理器云控制联机帮助，提供有关使用Oracle Enterprise Manager云控制启动应用过程或入站服务器的说明</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="您可以管理XStream In配置。">管理XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM72886"></a><a id="XSTRM72885"></a><div class="props_rev_3"><a id="GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B" name="GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B"></a><h3 id="XSTRM-GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B" class="sect3"><span class="enumeration_section">10.3</span>停止入站服务器</h3>
               <div>
                  <p>您在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">STOP_APPLY</code>过程以停止现有的入站服务器。在对XStream配置中的问题进行故障排除时，可能会停止入站服务器。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B__GUID-B2341C1F-A16E-4520-AF0D-6EF70FBE62FB">要停止入站服务器：</p>
                     <ol>
                        <li>
                           <p>以XStream管理员身份连接到入站服务器数据库。</p>
                           <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">STOP_APPLY</code>过程，并为<code class="codeph">apply_name</code>参数指定入站服务器。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例停止名为<code class="codeph">xin</code>的入站服务器。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B__GUID-E4817B7B-8096-407E-BFE0-9F2042FA0A1A">
                     <p class="titleinexample">示例10-2停止入站服务器命名的xout</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_APPLY_ADM.STOP_APPLY（apply_name =&gt;'xin'）;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B__GUID-92BB6399-D0EB-4C09-A190-230E79782679">
                     <p class="notep1">也可以看看：</p>
                     <p>Oracle Enterprise Manager Cloud Control联机帮助，提供有关使用Oracle Enterprise Manager Cloud Control停止应用进程或入站服务器的说明</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="您可以管理XStream In配置。">管理XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM72888"></a><a id="XSTRM72887"></a><div class="props_rev_3"><a id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5" name="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5"></a><h3 id="XSTRM-GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5" class="sect3"><span class="enumeration_section">10.4</span>为入站服务器设置应用参数</h3>
               <div>
                  <p>应用参数控制入站服务器的运行方式。您可以设置使用入站服务器的应用参数<code class="codeph">SET_PARAMETER</code>在程序<code class="codeph">DBMS_XSTREAM_ADM</code>包。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5__GUID-EA972B33-638A-4571-8F20-A4DA2EF53E6A">设置入站服务器应用参数：</p>
                     <ol>
                        <li>
                           <p>以XStream管理员身份连接到出站服务器数据库。</p>
                           <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>在<code class="codeph">DBMS_XSTREAM_ADM</code>包中运行<code class="codeph">SET_PARAMETER</code>过程，并指定以下参数：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">streams_name</code> - 指定入站服务器的名称。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">streams_type</code> - 指定<code class="codeph">apply</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">parameter</code> - 指定apply参数的名称。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">value</code> - 指定apply参数的值。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例将名为<code class="codeph">xin</code>的入站服务器的<code class="codeph">parallelism</code>参数设置为<code class="codeph">4</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5__GUID-5EAA9BA2-148C-4125-B212-B5176885B28A">
                     <p class="titleinexample">示例10-3设置出站服务器参数</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XSTREAM_ADM.SET_PARAMETER（streams_name =&gt;'xin'，streams_type =&gt;'apply'，parameter =&gt;'parallelism'，value =&gt;'4'）;结束; /</pre><div class="infoboxnote" id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5__GUID-0503D6FB-42FD-4EFB-B351-807DF018EC49">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>即使参数值是数字， <code class="codeph">value</code>参数也始终作为<code class="codeph">VARCHAR2</code>值输入。
                              </p>
                           </li>
                           <li>
                              <p>如果<code class="codeph">value</code>参数设置为<code class="codeph">NULL</code>或未指定，则将参数设置为其默认值。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5__GUID-6454E987-A745-4789-B494-0DF73B2D7CBA">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关使用Oracle Enterprise Manager云控制设置应用参数的说明，请参阅Oracle Enterprise Manager Cloud Control联机帮助</p>
                        </li>
                        <li>
                           <p>有关应用参数的信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS314" target="_blank"><span><cite>，请参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="您可以管理XStream In配置。">管理XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM72605"></a><a id="XSTRM1591"></a><div class="props_rev_3"><a id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4" name="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4"></a><h3 id="XSTRM-GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4" class="sect3"><span class="enumeration_section">10.5</span>更改入站服务器的应用用户</h3>
               <div>
                  <p>入站服务器在其应用用户的安全域中应用LCR，并且客户端应用程序必须作为应用用户附加到入站服务器。您可以更改与入站服务器的应用用户<code class="codeph">ALTER_INBOUND</code>在程序<code class="codeph">DBMS_XSTREAM_ADM</code>包。
                  </p>
                  <div class="section">
                     <p>当客户端应用程序必须以其他用户身份连接到入站服务器或要使用与其他用户关联的权限应用更改时，可以更改应用用户。确保为apply用户授予了所需的权限。</p>
                     <div class="infoboxnotealso" id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4__GUID-9A524E14-A8C5-4F7C-9AC7-E3C45AB789D7">
                        <p class="notep1">也可以看看：</p>
                        <p>有关应用用户所需特权的信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS70196" target="_blank"><span><cite>，请参见“Oracle数据库PL / SQL包和类型参考</cite></span></a> ”。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4__GUID-53E3B2FF-5B52-4B96-B013-9F15F450DFB3">要更改入站服务器的应用用户：</p>
                     <ol>
                        <li>
                           <p>以XStream管理员身份连接到入站服务器数据库。</p>
                           <p>必须为XStream管理员授予<code class="codeph">DBA</code>角色才能更改入站服务器的应用用户。
                           </p>
                           <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>在<code class="codeph">DBMS_XSTREAM_ADM</code>包中运行<code class="codeph">ALTER_INBOUND</code>过程，并指定以下参数：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">server_name</code> - 指定入站服务器的名称。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">apply_user</code> - 指定新的应用用户。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4__GUID-12385B3F-A3DE-4C25-8004-B9F1EFA269EB">
                     <p class="titleinexample">示例10-4更改入站服务器的应用用户</p>
                     <p>要将名为<code class="codeph">xin</code>的入站服务器的apply用户更改为<code class="codeph">hr</code> ，请运行以下过程：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XSTREAM_ADM.ALTER_INBOUND（server_name =&gt;'xin'，apply_user =&gt;'hr'）;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4__GUID-E0E7C1A6-3A5E-4E9B-A74F-0C2FC09F9DD7">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="xstream-in-concepts.html#GUID-7020188C-8108-44E6-B6EF-9AFA035786C7" title="了解与客户端应用程序和XStream组件相关的安全性，以及应用用户对入站服务器所需的权限。">XStream In and Security</a> ”</span></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS70192" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="您可以管理XStream In配置。">管理XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" name="GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43"></a><h3 id="XSTRM-GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" class="sect3"><span class="enumeration_section">10.6</span>在冲突检测和解决方案中管理XStream</h3>
               <p>当多个客户端几乎同时修改同一个表行时，可能会发生冲突。XStream In检测冲突并提供解决冲突的方法。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-C3D6B8E2-22BC-4B31-B870-40DCEB4F0D26">关于XStream环境中的DML冲突</a><br><span class="bold">冲突</span>是LCR中的旧值与表中的数据不匹配。
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023">XStream环境中的冲突类型</a><br>在多个数据库共享数据时，您可能会遇到几种不同类型的冲突。
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-9CE3D53B-0D1B-44DB-B5E3-B4CE52350464">XStream环境中的冲突和事务排序</a><br>当三个或更多数据库共享数据并且在两个或更多这些数据库中更新数据时，在XStream环境中可能发生排序冲突。
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59">XStream环境中的冲突检测</a><br>入站服务器自动检测冲突。
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-F0382D83-5BBD-4C45-B5E5-137E5A69EDB3">XStream环境中的冲突避免</a><br>有几种方法可以避免数据冲突。
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901">XStream环境中的冲突解决方案</a><br>检测到更新冲突后，冲突处理程序可以尝试解决它。
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-069469B9-80D3-4872-894F-E08085D20443">管理DML冲突处理程序</a><br>您可以设置和删除DML冲突处理程序。要修改现有的DML冲突处理程序，必须将其删除并重置它。
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B">停止非键列的冲突检测</a><br>您可以使用<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">COMPARE_OLD_VALUES</code>过程停止对非键列的冲突检测。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="您可以管理XStream In配置。">管理XStream In</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-C3D6B8E2-22BC-4B31-B870-40DCEB4F0D26" name="GUID-C3D6B8E2-22BC-4B31-B870-40DCEB4F0D26"></a><h4 id="XSTRM-GUID-C3D6B8E2-22BC-4B31-B870-40DCEB4F0D26" class="sect4"><span class="enumeration_section">10.6.1</span>关于XStream环境中的DML冲突</h4>
                  <div>
                     <p><span class="bold">冲突</span>是LCR中的旧值与表中的数据不匹配。
                     </p>
                     <p>XStream环境中可能发生冲突，该环境允许对多个数据库中的相同数据执行并发数据操作语言（DML）操作。在XStream环境中，仅当入站服务器应用包含由DML操作产生的行更改的行LCR时，才会发生DML冲突。入站服务器自动检测行LCR引起的冲突。</p>
                     <p>例如，当源自不同数据库的两个事务几乎同时更新同一行时，可能发生冲突。配置XStream环境时，必须考虑是否可能发生冲突。如果系统设计允许冲突，则可以配置冲突解决方案以自动解决冲突。</p>
                     <p>通常，最佳做法是设计一个避免冲突可能性的XStream环境。使用本章后面讨论的冲突避免技术，大多数系统设计可以避免所有或大部分共享数据中的冲突。但是，许多应用程序要求在任何时候可以在多个数据库中更新某些百分比的共享数据。如果是这种情况，那么您必须解决冲突的可能性。</p>
                     <div class="infoboxnote" id="GUID-C3D6B8E2-22BC-4B31-B870-40DCEB4F0D26__GUID-7231796A-5C16-400A-A9C4-5421669D2F65">
                        <p class="notep1">注意：</p>
                        <p>入站服务器不检测DDL冲突。确保您的环境避免了这些类型的冲突。</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="general-xstream-concepts.html#GUID-38751D5D-FFB4-4108-B675-2DA6F7FB9330" title="行LCR描述了对单行中数据的更改或对行中单个LOB列，LONG列，LONG RAW列或XMLType列的更改。">行LCR</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="当多个客户端几乎同时修改同一个表行时，可能会发生冲突。XStream In检测冲突并提供解决冲突的方法。">在冲突检测和解决方案中管理XStream</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023" name="GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023"></a><h4 id="XSTRM-GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023" class="sect4"><span class="enumeration_section">10.6.2</span> XStream环境中的冲突类型</h4>
                  <div>
                     <p>在多个数据库共享数据时，您可能会遇到几种不同类型的冲突。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-AC5E3B0E-B9E0-46AF-A60E-FA21BDB4DAD3">更新XStream环境中的冲突</a><br>当入站服务器应用包含的更新与另一个更新到同一行相冲突的一行行LCR出现<strong class="term">更新冲突</strong> 。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-C187F7F9-9BF0-464A-9E5A-E5DDF8C7D01B">XStream环境中的唯一性冲突</a><br>当入站服务器将包含更改的行LCR应用于违反唯一完整性约束的行（例如<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>或<code class="codeph">UNIQUE</code>约束）时，会发生<strong class="term">唯一性冲突</strong> 。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-CECE5DD0-6292-42C9-A6B6-BCDF55B96D51">删除XStream环境中的冲突</a><br>当两个事务源自不同的数据库时，会发生<strong class="term">删除冲突</strong> ，其中一个事务删除一行而另一个事务更新或删除同一行。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-47F723EA-1A62-407B-805F-A931D2E9C4F8">XStream环境中的外键冲突</a><br>当入站服务器将包含更改的行LCR应用于违反外键约束的行时，会发生<strong class="term">外键冲突</strong> 。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="当多个客户端几乎同时修改同一个表行时，可能会发生冲突。XStream In检测冲突并提供解决冲突的方法。">在冲突检测和解决方案中管理XStream</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-AC5E3B0E-B9E0-46AF-A60E-FA21BDB4DAD3" name="GUID-AC5E3B0E-B9E0-46AF-A60E-FA21BDB4DAD3"></a><h5 id="XSTRM-GUID-AC5E3B0E-B9E0-46AF-A60E-FA21BDB4DAD3" class="sect5"><span class="enumeration_section">10.6.2.1</span>更新XStream环境中的冲突</h5>
                     <div>
                        <p>当入站服务器应用包含的更新与另一个更新到同一行相冲突的一行行LCR出现<strong class="term">更新冲突</strong> 。
                        </p>
                        <p>当来自不同数据库的两个事务几乎同时更新同一行时，可能会发生更新冲突。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023" title="在多个数据库共享数据时，您可能会遇到几种不同类型的冲突。">XStream环境中的冲突类型</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-C187F7F9-9BF0-464A-9E5A-E5DDF8C7D01B" name="GUID-C187F7F9-9BF0-464A-9E5A-E5DDF8C7D01B"></a><h5 id="XSTRM-GUID-C187F7F9-9BF0-464A-9E5A-E5DDF8C7D01B" class="sect5"><span class="enumeration_section">10.6.2.2</span> XStream环境中的唯一性冲突</h5>
                     <div>
                        <p>当入站服务器将包含更改的行LCR应用于违反唯一完整性约束的行（例如<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>或<code class="codeph">UNIQUE</code>约束）时，会发生<strong class="term">唯一性冲突</strong> 。
                        </p>
                        <p>例如，考虑当两个事务源自两个不同的数据库时会发生什么，每个数据库都将一行插入具有相同主键值的表中。在这种情况下，事务会导致唯一性冲突。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023" title="在多个数据库共享数据时，您可能会遇到几种不同类型的冲突。">XStream环境中的冲突类型</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-CECE5DD0-6292-42C9-A6B6-BCDF55B96D51" name="GUID-CECE5DD0-6292-42C9-A6B6-BCDF55B96D51"></a><h5 id="XSTRM-GUID-CECE5DD0-6292-42C9-A6B6-BCDF55B96D51" class="sect5"><span class="enumeration_section">10.6.2.3</span>删除XStream环境中的冲突</h5>
                     <div>
                        <p>当两个事务源自不同的数据库时，会发生<strong class="term">删除冲突</strong> ，其中一个事务删除一行而另一个事务更新或删除同一行。
                        </p>
                        <p>在这种情况下，行LCR中引用的行不存在，因此无法更新或删除。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023" title="在多个数据库共享数据时，您可能会遇到几种不同类型的冲突。">XStream环境中的冲突类型</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-47F723EA-1A62-407B-805F-A931D2E9C4F8" name="GUID-47F723EA-1A62-407B-805F-A931D2E9C4F8"></a><h5 id="XSTRM-GUID-47F723EA-1A62-407B-805F-A931D2E9C4F8" class="sect5"><span class="enumeration_section">10.6.2.4</span> XStream环境中的外键冲突</h5>
                     <div>
                        <p>当入站服务器将包含更改的行LCR应用于违反外键约束的行时，会发生<strong class="term">外键冲突</strong> 。
                        </p>
                        <p>例如，在<code class="codeph">hr</code>模式中， <code class="codeph">department_id</code>列<code class="codeph">employees</code>表是一个外键<code class="codeph">department_id</code>列<code class="codeph">departments</code>表。考虑当以下更改源自两个不同的数据库（ <code class="codeph">A</code>和<code class="codeph">B</code> ）并传播到第三个数据库（ <code class="codeph">C</code> ）时会发生什么：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在数据库<code class="codeph">A</code> ，将一行插入<code class="codeph">departments</code>表中， <code class="codeph">department_id</code>为<code class="codeph">271</code> 。此更改将传播到数据库<code class="codeph">B</code>并在那里应用。
                              </p>
                           </li>
                           <li>
                              <p>在数据库<code class="codeph">B</code> ，将一行插入<code class="codeph">employees</code>表中， <code class="codeph">employee_id</code>为<code class="codeph">206</code> ， <code class="codeph">department_id</code>为<code class="codeph">271</code> 。
                              </p>
                           </li>
                        </ul>
                        <p>如果源自数据库<code class="codeph">B</code>的更改在源自数据库<code class="codeph">A</code>的更改之前应用于数据库<code class="codeph">C</code> ，则会导致外键冲突，因为在数据库<code class="codeph">C</code>的<code class="codeph">departments</code>表中尚未存在<code class="codeph">department_id</code>为<code class="codeph">271</code>的部门的行。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023" title="在多个数据库共享数据时，您可能会遇到几种不同类型的冲突。">XStream环境中的冲突类型</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-9CE3D53B-0D1B-44DB-B5E3-B4CE52350464" name="GUID-9CE3D53B-0D1B-44DB-B5E3-B4CE52350464"></a><h4 id="XSTRM-GUID-9CE3D53B-0D1B-44DB-B5E3-B4CE52350464" class="sect4"><span class="enumeration_section">10.6.3</span> XStream环境中的冲突和事务排序</h4>
                  <div>
                     <p>当三个或更多数据库共享数据并且在两个或更多这些数据库中更新数据时，在XStream环境中可能发生排序冲突。</p>
                     <p>例如，考虑一个场景，其中三个数据库共享<code class="codeph">hr.departments</code>表中的信息。数据库名称为<code class="codeph">mult1.example.com</code> ， <code class="codeph">mult2.example.com</code>和<code class="codeph">mult3.example.com</code> 。假设一个变化是在一排由<code class="codeph">hr.departments</code>在表<code class="codeph">mult1.example.com</code>将传播到两个<code class="codeph">mult2.example.com</code>和<code class="codeph">mult3.example.com</code> 。可能会发生以下一系列操作：</p>
                     <ol>
                        <li>
                           <p>更改将传播到<code class="codeph">mult2.example.com</code> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">mult2.example.com</code>的入站服务器应用来自<code class="codeph">mult1.example.com</code>的更改。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">mult2.example.com</code>对同一行进行了不同的更改。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">mult2.example.com</code>上的更改将传播到<code class="codeph">mult3.example.com</code> 。
                           </p>
                        </li>
                        <li>
                           <p>在入站服务器<code class="codeph">mult3.example.com</code>尝试应用从变化<code class="codeph">mult2.example.com</code>之前在另一入境服务器<code class="codeph">mult3.example.com</code>应用从变化<code class="codeph">mult1.example.com</code> 。
                           </p>
                        </li>
                     </ol>
                     <p>在这种情况下，发生冲突是因为<code class="codeph">mult3.example.com</code>上的行的列值与从<code class="codeph">mult2.example.com</code>传播的行LCR中的相应旧值不匹配。
                     </p>
                     <p>除了导致数据冲突之外，如果支持数据尚未成功传播到该数据库，则无序应用的事务可能会在远程数据库中遇到参照完整性问题。考虑新客户呼叫订单部门的情况。创建客户记录并下订单。如果订单数据在客户数据之前应用于远程数据库，则会引发参照完整性错误，因为订单引用的客户在远程数据库中不存在。</p>
                     <p>如果遇到排序冲突，则可以在将所需数据传播到远程数据库并应用之后，通过在错误队列中重新执行事务来解决冲突。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="当多个客户端几乎同时修改同一个表行时，可能会发生冲突。XStream In检测冲突并提供解决冲突的方法。">在冲突检测和解决方案中管理XStream</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59" name="GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59"></a><h4 id="XSTRM-GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59" class="sect4"><span class="enumeration_section">10.6.4</span> XStream环境中的冲突检测</h4>
                  <div>
                     <p>入站服务器自动检测冲突。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-9542B3EE-72C0-4FBA-8E4B-9C29E4353C40">关于XStream环境中的冲突检测</a><br>入站服务器检测更新，唯一性，删除和外键冲突。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-669590DE-BE6A-4CEC-8B62-F022B26F6635">控制非键列的冲突检测</a><br>默认情况下，入站服务器会在冲突检测期间比较所有列的旧值，但您可以使用<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">COMPARE_OLD_VALUES</code>过程停止对非键列的冲突检测。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-2D5EBAED-F674-4ED6-BF45-BC192D3CFBF5">XStream环境中冲突检测期间的行标识</a><br>为了准确地检测冲突，Oracle数据库必须能够唯一地识别和匹配不同数据库中的相应行。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="当多个客户端几乎同时修改同一个表行时，可能会发生冲突。XStream In检测冲突并提供解决冲突的方法。">在冲突检测和解决方案中管理XStream</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-9542B3EE-72C0-4FBA-8E4B-9C29E4353C40" name="GUID-9542B3EE-72C0-4FBA-8E4B-9C29E4353C40"></a><h5 id="XSTRM-GUID-9542B3EE-72C0-4FBA-8E4B-9C29E4353C40" class="sect5"><span class="enumeration_section">10.6.4.1</span>关于XStream环境中的冲突检测</h5>
                     <div>
                        <p>入站服务器检测更新，唯一性，删除和外键冲突。</p>
                        <p>入站服务器检测到这些冲突，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果行LCR中的行的旧值与目标数据库中同一行的当前值之间存在任何差异，则入站服务器会检测到更新冲突。</p>
                           </li>
                           <li>
                              <p>如果在应用包含插入或更新操作的LCR时发生唯一性约束冲突，则入站服务器会检测唯一性冲突。</p>
                           </li>
                           <li>
                              <p>如果在应用包含更新或删除操作的LCR时找不到行，则入站服务器会检测到删除冲突，因为该行的主键不存在。</p>
                           </li>
                           <li>
                              <p>如果在应用LCR时发生外键约束冲突，则入站服务器会检测到外键冲突。</p>
                           </li>
                        </ul>
                        <p>当入站服务器尝试直接应用LCR或入站服务器处理程序（如DML冲突处理程序）运行LCR的<code class="codeph">EXECUTE</code>成员过程时，可以检测到冲突。当运行<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">EXECUTE_ERROR</code>或<code class="codeph">EXECUTE_ALL_ERRORS</code>过程时，也可以检测到冲突。
                        </p>
                        <div class="infoboxnote" id="GUID-9542B3EE-72C0-4FBA-8E4B-9C29E4353C40__GUID-FE7E2D42-0808-4410-8273-00BD51A4AB04">
                           <p class="notep1">注意：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果更新列并且列的旧值等于其新值，则Oracle数据库永远不会检测到此列更新的冲突。</p>
                              </li>
                              <li>
                                 <p>更新LCR中的任何旧LOB值，删除LCR以及处理LOB列的分段更新的LCR都不会被冲突检测使用。</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59" title="入站服务器自动检测冲突。">XStream环境中的冲突检测</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-669590DE-BE6A-4CEC-8B62-F022B26F6635" name="GUID-669590DE-BE6A-4CEC-8B62-F022B26F6635"></a><h5 id="XSTRM-GUID-669590DE-BE6A-4CEC-8B62-F022B26F6635" class="sect5"><span class="enumeration_section">10.6.4.2</span>非键列的冲突检测控制</h5>
                     <div>
                        <p>默认情况下，入站服务器会在冲突检测期间比较所有列的旧值，但您可以使用<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">COMPARE_OLD_VALUES</code>过程停止对非键列的冲突检测。
                        </p>
                        <p>某些非键列可能不需要进行冲突检测。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-669590DE-BE6A-4CEC-8B62-F022B26F6635__GUID-46285D77-E496-4237-86CD-E04B330B2545">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="managing-xstream-in.html#GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B" title="您可以使用DBMS_APPLY_ADM程序包中的COMPARE_OLD_VALUES过程停止对非键列的冲突检测。">停止非键列的冲突检测</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59" title="入站服务器自动检测冲突。">XStream环境中的冲突检测</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-2D5EBAED-F674-4ED6-BF45-BC192D3CFBF5" name="GUID-2D5EBAED-F674-4ED6-BF45-BC192D3CFBF5"></a><h5 id="XSTRM-GUID-2D5EBAED-F674-4ED6-BF45-BC192D3CFBF5" class="sect5"><span class="enumeration_section">10.6.4.3</span> XStream环境中冲突检测期间的行标识</h5>
                     <div>
                        <p>为了准确地检测冲突，Oracle数据库必须能够唯一地识别和匹配不同数据库中的相应行。</p>
                        <p>默认情况下，Oracle数据库使用表的主键来唯一标识表中的行。当表没有主键时，最佳做法是指定替换键。替代键是Oracle数据库可用于标识表中唯一行的列或列集。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59" title="入站服务器自动检测冲突。">XStream环境中的冲突检测</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-F0382D83-5BBD-4C45-B5E5-137E5A69EDB3" name="GUID-F0382D83-5BBD-4C45-B5E5-137E5A69EDB3"></a><h4 id="XSTRM-GUID-F0382D83-5BBD-4C45-B5E5-137E5A69EDB3" class="sect4"><span class="enumeration_section">10.6.5</span> XStream环境中的冲突避免</h4>
                  <p>有几种方法可以避免数据冲突。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-989DABC4-0569-4D29-9CC3-EF34CF1D361F">使用主数据库所有权模型</a><br>通过限制对包含共享数据的表具有同时更新访问权限的数据库数量，可以避免冲突的可能性。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333">避免特定类型的冲突</a><br>如果主数据库所有权模型对应用程序要求的限制过于严格，则可以使用共享所有权数据模型，这意味着可能存在冲突。即便如此，通常您可以使用一些简单的策略来避免特定类型的冲突。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="当多个客户端几乎同时修改同一个表行时，可能会发生冲突。XStream In检测冲突并提供解决冲突的方法。">在冲突检测和解决方案中管理XStream</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-989DABC4-0569-4D29-9CC3-EF34CF1D361F" name="GUID-989DABC4-0569-4D29-9CC3-EF34CF1D361F"></a><h5 id="XSTRM-GUID-989DABC4-0569-4D29-9CC3-EF34CF1D361F" class="sect5"><span class="enumeration_section">10.6.5.1</span>使用主数据库所有权模型</h5>
                     <div>
                        <p>通过限制对包含共享数据的表具有同时更新访问权限的数据库数量，可以避免冲突的可能性。</p>
                        <p>主要所有权可防止所有冲突，因为只有一个数据库允许更新一组共享数据。应用程序甚至可以使用行和列子集来建立比表级别更细粒度的数据所有权。例如，应用程序可能在逐个数据库的基础上对共享表中的特定列或行具有更新访问权限。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-F0382D83-5BBD-4C45-B5E5-137E5A69EDB3" title="有几种方法可以避免数据冲突。">XStream环境中的冲突避免</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333" name="GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333"></a><h5 id="XSTRM-GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333" class="sect5"><span class="enumeration_section">10.6.5.2</span>避免特定类型的冲突</h5>
                     <div>
                        <p>如果主数据库所有权模型对应用程序要求的限制过于严格，则可以使用共享所有权数据模型，这意味着可能存在冲突。即便如此，通常您可以使用一些简单的策略来避免特定类型的冲突。</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-7EC78318-C4DD-497C-8CF0-D08B2E341889">避免XStream环境中的唯一性冲突</a><br>通过确保每个数据库对共享数据使用唯一标识符，可以避免唯一性冲突。
                           </li>
                           <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-76FB3F8A-9056-4C89-B52A-43EAAA24F452">避免在Oracle复制环境中删除冲突</a><br>始终避免在共享数据环境中删除冲突。
                           </li>
                           <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-99F764BC-0524-495D-8F8E-1579307C9E6A">避免在XStream环境中更新冲突</a><br>在尝试消除唯一性和删除冲突的可能性之后，您还应该尝试限制可能的更新冲突的数量。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-F0382D83-5BBD-4C45-B5E5-137E5A69EDB3" title="有几种方法可以避免数据冲突。">XStream环境中的冲突避免</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="props_rev_3"><a id="GUID-7EC78318-C4DD-497C-8CF0-D08B2E341889" name="GUID-7EC78318-C4DD-497C-8CF0-D08B2E341889"></a><h6 id="XSTRM-GUID-7EC78318-C4DD-497C-8CF0-D08B2E341889" class="sect6"><span class="enumeration_section">10.6.5.2.1</span>避免XStream环境中的唯一性冲突</h6>
                        <div>
                           <p>通过确保每个数据库对共享数据使用唯一标识符，可以避免唯一性冲突。</p>
                           <p>有三种方法可以确保XStream环境中所有数据库的唯一标识符。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>一种方法是通过执行以下select语句来构造唯一标识符：</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_GUID（）OID FROM DUAL;</pre><p>此SQL运算符返回一个16字节的全局唯一标识符。全局唯一标识符的格式类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">A741C791252B3EA0E034080020AE3E0A</pre></li>
                              <li>
                                 <p></p>
                                 <p>避免唯一性冲突的另一种方法是在每个共享数据的数据库上创建一个序列，并将数据库名称（或其他全局唯一值）与本地序列连接起来。此方法有助于避免任何重复的序列值，并有助于防止唯一性冲突。</p>
                              </li>
                              <li>
                                 <p></p>
                                 <p>最后，您可以在共享数据的每个数据库上创建自定义序列，这样任何两个数据库都不能生成相同的值。您可以通过在<code class="codeph">CREATE</code> <code class="codeph">SEQUENCE</code>语句中结合使用起始值，递增值和最大值来实现此目的。例如，您可以配置以下序列：</p>
                                 <div class="tblformal" id="GUID-7EC78318-C4DD-497C-8CF0-D08B2E341889__GUID-0356771A-73A1-41A9-BA10-EC7B8FBCE32E">
                                    <p class="titleintable">表10-1自定义序列</p>
                                    <table cellpadding="4" cellspacing="0" class="Formal" title="自定义序列" width="90%" border="1" summary="This table lists values to use for the STARTS WITH, INCREMENT BY, and range parameters in the CREATE SEQUENCE statement to generate unique sequences at different master sites." frame="hsides" rules="rows">
                                       <thead>
                                          <tr align="left" valign="top">
                                             <th align="left" valign="bottom" width="21%" id="d49348e3408">参数</th>
                                             <th align="left" valign="bottom" width="26%" id="d49348e3411">数据库A.</th>
                                             <th align="left" valign="bottom" width="26%" id="d49348e3414">数据库B.</th>
                                             <th align="left" valign="bottom" width="26%" id="d49348e3417">数据库C.</th>
                                          </tr>
                                       </thead>
                                       <tbody>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="21%" id="d49348e3422" headers="d49348e3408 ">
                                                <p><code class="codeph">START</code> <code class="codeph">WITH</code></p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3422 d49348e3411 ">
                                                <p>1</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3422 d49348e3414 ">
                                                <p>3</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3422 d49348e3417 ">
                                                <p>五</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="21%" id="d49348e3439" headers="d49348e3408 ">
                                                <p><code class="codeph">INCREMENT</code> <code class="codeph">BY</code></p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3439 d49348e3411 ">
                                                <p>10</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3439 d49348e3414 ">
                                                <p>10</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3439 d49348e3417 ">
                                                <p>10</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="21%" id="d49348e3456" headers="d49348e3408 ">
                                                <p>范围示例</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3456 d49348e3411 ">
                                                <p>1,11,21,31,41，......</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3456 d49348e3414 ">
                                                <p>3,13,23,33,43，......</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3456 d49348e3417 ">
                                                <p>5,15,25,35,45，......</p>
                                             </td>
                                          </tr>
                                       </tbody>
                                    </table>
                                 </div>
                                 <!-- class="inftblhruleinformal" -->
                                 <p>使用类似的方法，您可以通过指定<code class="codeph">START</code> <code class="codeph">WITH</code>和<code class="codeph">MAXVALUE</code>为每个数据库定义不同的范围，这将为每个数据库生成唯一的范围。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333" title="如果主数据库所有权模型对应用程序要求的限制过于严格，则可以使用共享所有权数据模型，这意味着可能存在冲突。即便如此，通常您可以使用一些简单的策略来避免特定类型的冲突。">避免特定类型的冲突</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-76FB3F8A-9056-4C89-B52A-43EAAA24F452" name="GUID-76FB3F8A-9056-4C89-B52A-43EAAA24F452"></a><h6 id="XSTRM-GUID-76FB3F8A-9056-4C89-B52A-43EAAA24F452" class="sect6"><span class="enumeration_section">10.6.5.2.2</span>避免在Oracle复制环境中删除冲突</h6>
                        <div>
                           <p>始终避免在共享数据环境中删除冲突。</p>
                           <p>通常，对于在共享所有权数据模型中运行的应用程序，最好使用<code class="codeph">DELETE</code>语句来删除行。相反，应用程序可以标记要删除的行，然后将系统配置为定期清除逻辑删除的行。
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333" title="如果主数据库所有权模型对应用程序要求的限制过于严格，则可以使用共享所有权数据模型，这意味着可能存在冲突。即便如此，通常您可以使用一些简单的策略来避免特定类型的冲突。">避免特定类型的冲突</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-99F764BC-0524-495D-8F8E-1579307C9E6A" name="GUID-99F764BC-0524-495D-8F8E-1579307C9E6A"></a><h6 id="XSTRM-GUID-99F764BC-0524-495D-8F8E-1579307C9E6A" class="sect6"><span class="enumeration_section">10.6.5.2.3</span>避免XStream环境中的更新冲突</h6>
                        <div>
                           <p>在尝试消除唯一性和删除冲突的可能性之后，您还应该尝试限制可能的更新冲突的数量。</p>
                           <p>但是，在共享所有权数据模型中，无法在所有情况下都避免更新冲突。如果无法避免所有更新冲突，则必须了解可能的冲突类型，并配置系统以在发生冲突时解决它们。</p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333" title="如果主数据库所有权模型对应用程序要求的限制过于严格，则可以使用共享所有权数据模型，这意味着可能存在冲突。即便如此，通常您可以使用一些简单的策略来避免特定类型的冲突。">避免特定类型的冲突</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" name="GUID-AFE186CC-05B8-4301-B0ED-D272822B4901"></a><h4 id="XSTRM-GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" class="sect4"><span class="enumeration_section">10.6.6</span> XStream环境中的冲突解决方案</h4>
                  <div>
                     <p>检测到更新冲突后，冲突处理程序可以尝试解决它。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-69CA60F5-EC6D-4A49-A175-E358CA604B1E">关于XStream环境中的冲突解决方案</a><br>XStream提供预构建的冲突处理程序来解决插入和更新冲突。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-4459D0AD-8C58-4247-882D-95CC78B75EED">预构建的DML冲突处理程序</a><br>有几种类型的预构建DML冲突处理程序可用。列预览和分辨率列用于预构建的DML冲突处理程序。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB">预构建DML冲突处理程序的类型</a><br>Oracle为Oracle Replication环境提供以下类型的预构建DML冲突处理程序： <code class="codeph">RECORD</code> ， <code class="codeph">IGNORE</code> ， <code class="codeph">OVERWRITE</code> ， <code class="codeph">MAXIMUM</code> ， <code class="codeph">MINIMUM</code>和<code class="codeph">DELTA</code> 。</li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2">列列表</a><br>每次为表指定预构建的DML冲突处理程序时，都必须指定列列表。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-1E464FF1-FFCB-42A7-B2F8-F65DEEE0F5B1">分辨率列</a><br><span class="bold">resolution列</span>是用于标识预构建的DML冲突处理程序的列。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-4D5FF192-C6AE-4C80-8C12-C1C6FE9C8439">数据融合</a><br>当您在多个数据库之间共享数据，并且希望所有这些数据库中的数据相同时，请确保使用冲突解决处理程序使数据汇聚到所有数据库。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-6DAF8231-7B39-4519-ABA6-9E70751D7EBD">没有DML冲突处理程序的碰撞处理</a><br>如果没有表的DML冲突处理程序，则可以使用<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">HANDLE_COLLISIONS</code>过程启用基本冲突处理。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-083B4578-DFB0-4F3D-B4DD-CF1FF98A9F5B">自定义冲突处理程序</a><br>您可以创建PL / SQL过程以用作自定义冲突处理程序。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="当多个客户端几乎同时修改同一个表行时，可能会发生冲突。XStream In检测冲突并提供解决冲突的方法。">在冲突检测和解决方案中管理XStream</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-69CA60F5-EC6D-4A49-A175-E358CA604B1E" name="GUID-69CA60F5-EC6D-4A49-A175-E358CA604B1E"></a><h5 id="XSTRM-GUID-69CA60F5-EC6D-4A49-A175-E358CA604B1E" class="sect5"><span class="enumeration_section">10.6.6.1</span>关于XStream环境中的冲突解决方案</h5>
                     <div>
                        <p>XStream提供预构建的冲突处理程序来解决插入和更新冲突。</p>
                        <p>删除，外键或排序冲突没有预构建的冲突处理程序。但是，您可以构建自己的自定义冲突处理程序，以解决特定于业务规则的数据冲突。这样的冲突处理程序可以是过程DML处理程序或错误处理程序的一部分。</p>
                        <p>无论您使用预构建冲突处理程序还是自定义冲突处理程序，一旦检测到冲突，就会应用冲突处理程序。如果指定的冲突处理程序和相关的应用程序处理程序都无法解决冲突，则会在错误队列中记录冲突。您可能希望使用相关的应用程序处理程序在发生冲突时通知数据库管理员。</p>
                        <p>当冲突导致事务被移动到错误队列时，有时可以纠正导致冲突的条件。在这些情况下，您可以使用<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">EXECUTE_ERROR</code>过程重新执行事务。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-69CA60F5-EC6D-4A49-A175-E358CA604B1E__GUID-43D0E383-3155-4D4E-A1B7-F5938407FC0D">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">DBMS_APPLY_ADM</code>包中的<code class="codeph">EXECUTE_ERROR</code>过程的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS326" target="_blank"><span><cite>参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="检测到更新冲突后，冲突处理程序可以尝试解决它。">XStream环境中的冲突解决方案</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-4459D0AD-8C58-4247-882D-95CC78B75EED" name="GUID-4459D0AD-8C58-4247-882D-95CC78B75EED"></a><h5 id="XSTRM-GUID-4459D0AD-8C58-4247-882D-95CC78B75EED" class="sect5"><span class="enumeration_section">10.6.6.2</span>预构建的DML冲突处理程序</h5>
                     <div>
                        <p>有几种类型的预构建DML冲突处理程序可用。列预览和分辨率列用于预构建的DML冲突处理程序。</p>
                        <p>列列表是在存在插入或更新冲突时为其调用DML冲突处理程序的列的列表。分辨率列标识DML冲突处理程序。如果使用<code class="codeph">MAXIMUM</code>或<code class="codeph">MINIMUM</code>预构建的DML冲突处理程序，则解析列也是用于解决冲突的列。resolution列必须是处理程序列列表中的列之一。
                        </p>
                        <p>使用<code class="codeph">DBMS_APPLY_ADM</code>包中的<code class="codeph">SET_DML_CONFLICT_HANDLER</code>过程为特定表指定一个或多个DML冲突处理程序。没有用于删除或外键冲突的预构建DML冲突处理程序。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-4459D0AD-8C58-4247-882D-95CC78B75EED__GUID-B1168CF8-0160-48E5-968B-72052FC1F11F">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="managing-xstream-in.html#GUID-069469B9-80D3-4872-894F-E08085D20443" title="您可以设置和删除DML冲突处理程序。要修改现有的DML冲突处理程序，必须将其删除并重置它。">管理DML冲突处理程序</a> ”</span>以获取有关设置和删除DML冲突处理程序的说明</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">SET_DML_CONFLICT_HANDLER</code>过程的更多信息，请<code class="codeph">SET_DML_CONFLICT_HANDLER</code> <a href="../arpls/DBMS_APPLY_ADM.html#ARPLS527" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="managing-xstream-in.html#GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2" title="每次为表指定预构建的DML冲突处理程序时，都必须指定列列表。">列列表</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="managing-xstream-in.html#GUID-1E464FF1-FFCB-42A7-B2F8-F65DEEE0F5B1" title="resolution列是用于标识预构建的DML冲突处理程序的列。">分辨率列</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="检测到更新冲突后，冲突处理程序可以尝试解决它。">XStream环境中的冲突解决方案</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB" name="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB"></a><h5 id="XSTRM-GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB" class="sect5"><span class="enumeration_section">10.6.6.3</span>预构建DML冲突处理程序的类型</h5>
                     <div>
                        <p>Oracle为Oracle Replication环境提供以下类型的预构建DML冲突处理程序： <code class="codeph">RECORD</code> ， <code class="codeph">IGNORE</code> ， <code class="codeph">OVERWRITE</code> ， <code class="codeph">MAXIMUM</code> ， <code class="codeph">MINIMUM</code>和<code class="codeph">DELTA</code> 。</p>
                        <p>本主题后面的每种处理程序的描述都涉及以下冲突场景：</p>
                        <ol>
                           <li>
                              <p>以下更新在<code class="codeph">dbs1.example.com</code>源数据库中进行：</p><pre class="oac_no_warn" dir="ltr">UPDATE hr.employees SET salary = 4900 WHERE employee_id = 200;承诺;</pre><p>此更新将员工<code class="codeph">200</code>的薪水从<code class="codeph">4400</code>更改为<code class="codeph">4900</code> 。
                              </p>
                           </li>
                           <li>
                              <p>几乎在同一时间，在<code class="codeph">dbs2.example.com</code>目标数据库中进行以下更新：</p><pre class="oac_no_warn" dir="ltr">UPDATE hr.employees SET salary = 5000 WHERE employee_id = 200;承诺;</pre></li>
                           <li>
                              <p>捕获过程捕获<code class="codeph">dbs1.example.com</code>源数据库中的更新，并将生成的行LCR放入队列中。
                              </p>
                           </li>
                           <li>
                              <p>中的传播传播从队列处的行LCR <code class="codeph">dbs1.example.com</code>到队列在<code class="codeph">dbs2.example.com</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">dbs2.example.com</code>的申请流程尝试将行LCR应用于<code class="codeph">hr.employees</code>表但遇到冲突，因为<code class="codeph">dbs2.example.com</code>的工资值为<code class="codeph">5000</code> ，这与该工资的旧值不匹配。行LCR（ <code class="codeph">4400</code> ）。
                              </p>
                           </li>
                        </ol>
                        <p>以下部分描述了每个预构建的冲突处理程序，并解释了处理程序如何解决此冲突。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-3A0BACC3-6FA8-4239-91AE-C1B8219004F1">记录</p>
                           <p>发生冲突时， <code class="codeph">RECORD</code>处理程序将LCR置于错误队列中。<code class="codeph">RECORD</code>处理程序可用于所有冲突类型，但只能为包含表中所有列的列组指定。
                           </p>
                           <p>如果<code class="codeph">RECORD</code>处理程序用于<code class="codeph">hr.employees</code>在表<code class="codeph">dbs2.example.com</code>冲突示例目标数据库，然后从行LCR <code class="codeph">dbs1.example.com</code>被放置在错误队列在<code class="codeph">dbs1.example.com</code> ，和它的更改不适用。因此，在冲突解决后，员工<code class="codeph">200</code>的工资在<code class="codeph">dbs2.example.com</code>为<code class="codeph">5000</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-6E58B675-AE82-4676-93EC-6E9BD31E1516">忽视</p>
                           <p>发生冲突时， <code class="codeph">IGNORE</code>处理程序将忽略源数据库中LCR中的值，并将值保留在目标数据库中。
                           </p>
                           <p>如果在冲突示例中将<code class="codeph">IGNORE</code>处理程序用于<code class="codeph">dbs2.example.com</code>目标数据库中的<code class="codeph">hr.employees</code>表，则将丢弃行LCR中的新值。因此，在冲突解决后，员工<code class="codeph">200</code>的工资在<code class="codeph">dbs2.example.com</code>为<code class="codeph">5000</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-A375F091-04F9-44D3-8989-4740067C7AFC">OVERWRITE</p>
                           <p>发生冲突时， <code class="codeph">OVERWRITE</code>处理程序使用源数据库中LCR中的新值替换目标数据库中的当前值。
                           </p>
                           <p>如果<code class="codeph">OVERWRITE</code>处理程序用于冲突示例中<code class="codeph">dbs2.example.com</code>目标数据库的<code class="codeph">hr.employees</code>表，则行LCR中的新值将覆盖<code class="codeph">dbs2.example.com</code>的值。因此，在冲突解决后，员工<code class="codeph">200</code>的薪水为<code class="codeph">4900</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-8C873186-954B-4737-B7C5-1EC73E95E989">最大值</p>
                           <p>发生冲突时， <code class="codeph">MAXIMUM</code>冲突处理程序将源数据库中LCR中的新值与目标数据库中指定分辨率列的当前值进行比较。如果LCR中的分辨率列的新值大于目标数据库中列的当前值，则应用过程将解决冲突，以支持LCR。如果LCR中分辨率列的新值小于目标数据库中列的当前值，则应用进程将解决冲突，从而有利于目标数据库。
                           </p>
                           <p>如果<code class="codeph">MAXIMUM</code>处理程序用于冲突示例中<code class="codeph">dbs2.example.com</code>目标数据库的<code class="codeph">hr.employees</code>表中的<code class="codeph">salary</code>列，则apply进程不应用行LCR，因为行LCR中的工资较少比表中的当前薪水。因此，在冲突解决后，员工<code class="codeph">200</code>的工资在<code class="codeph">dbs2.example.com</code>为<code class="codeph">5000</code> 。
                           </p>
                           <p>如果要根据所涉及的事务时间来解决冲突，那么执行此操作的一种方法是将列添加到共享表，该表通过触发器自动记录事务时间。您可以将此列指定为<code class="codeph">MAXIMUM</code>冲突处理程序的解析列，并自动使用具有最新（或更长）时间的事务。
                           </p>
                           <p>以下是记录<code class="codeph">hr.employees</code>表的事务时间的触发器示例。假设<code class="codeph">job_id</code> ， <code class="codeph">salary</code>和<code class="codeph">commission_pct</code>列是冲突解决处理程序的列列表的一部分。只有在列列表中的列上执行<code class="codeph">UPDATE</code>或执行<code class="codeph">INSERT</code>时，才会触发触发器。
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.employees ADD（TIME TIMESTAMP WITH TIME ZONE）;在插入或更新job_id，salary，commission_pct ON hr.employees FOR EACH ROW BEGIN之前创建或替换TRIGGER hr.insert_time_employees  - 考虑时间同步问题。之前对此行的更新可能源自时钟时间超前于本地时钟时间的站点。IF：OLD.TIME是NULL或：OLD.TIME &lt;SYSTIMESTAMP那么：NEW.TIME：= SYSTIMESTAMP; ELSE：NEW.TIME：=：OLD.TIME + 1/86400;万一;结束; /</pre><p>如果您使用此类触发器进行冲突解决，请确保触发器的触发属性为“fire once”，这是默认值。否则，当应用程序应用事务时，可能会标记新时间，从而导致事务的实际时间丢失。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-B8190E89-2C84-4FAC-92D1-B68C4E219FF5">最低</p>
                           <p>发生冲突时， <code class="codeph">MINIMUM</code>冲突处理程序将源数据库中LCR中的新值与目标数据库中指定分辨率列的当前值进行比较。如果LCR中的分辨率列的新值小于目标数据库中列的当前值，则应用过程将解决冲突，从而有利于LCR。如果LCR中分辨率列的新值大于目标数据库中列的当前值，则应用进程将解决冲突，从而有利于目标数据库。
                           </p>
                           <p>如果<code class="codeph">MINIMUM</code>处理程序用于冲突示例中<code class="codeph">dbs2.example.com</code>目标数据库的<code class="codeph">hr.employees</code>表中的<code class="codeph">salary</code>列，则apply进程会解决冲突，而不是行LCR，因为行中的工资LCR低于表中的当前薪水。因此，在冲突解决后，员工<code class="codeph">200</code>的薪水为<code class="codeph">4900</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-D7365C3E-080B-4772-BC6A-1D5344411049">三角洲</p>
                           <p>发生冲突时， <code class="codeph">DELTA</code>冲突处理程序计算列的旧值与列的新值之间的差异，并将差值添加到列的当前值。只有在<code class="codeph">conflict_type</code>设置为<code class="codeph">ROW_EXISTS</code>并且列组中的所有列都是数字时，才能使用<code class="codeph">DELTA</code>冲突处理程序。
                           </p>
                           <p>如果<code class="codeph">DELTA</code>处理程序用于冲突示例中<code class="codeph">dbs2.example.com</code>目标数据库的<code class="codeph">hr.employees</code>表中的<code class="codeph">salary</code>列，则apply进程通过计算列的旧值与列的旧值之间的差异来解决冲突。列的新值（4900  -  4400 = 500）并将其添加到列的当前值（5000 + 500 = 5500）。因此，在冲突解决后，员工<code class="codeph">200</code>的薪水为<code class="codeph">5500</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-2CC48ADA-8D99-4AFF-AB76-38D4644A1D31">MAX_AND_EQUALS</p>
                           <p>发生冲突时，如果resolution列的值大于或等于数据库中列的值，则应用LCR中的列列表。否则，丢弃LCR。</p>
                           <p>如果<code class="codeph">MAX_AND_EQUALS</code>处理程序用于冲突示例中<code class="codeph">dbs2.example.com</code>目标数据库的<code class="codeph">hr.employees</code>表中的<code class="codeph">salary</code>列，则apply进程通过丢弃LCR来解决冲突。因此，在冲突解决后，员工<code class="codeph">200</code>的薪水为<code class="codeph">5000</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-7EB7ABD7-1DE7-42D2-A919-5EB16F074B79">MIN_AND_EQUALS</p>
                           <p>发生冲突时，如果resolution列的值小于或等于数据库中列的值，则应用LCR中的列列表。否则，丢弃LCR。</p>
                           <p>如果<code class="codeph">MIN_AND_EQUALS</code>处理程序用于冲突示例中<code class="codeph">dbs2.example.com</code>目标数据库的<code class="codeph">hr.employees</code>表中的<code class="codeph">salary</code>列，则apply进程通过应用LCR解决冲突。因此，在冲突解决后，员工<code class="codeph">200</code>的薪水为<code class="codeph">4900</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="检测到更新冲突后，冲突处理程序可以尝试解决它。">XStream环境中的冲突解决方案</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2" name="GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2"></a><h5 id="XSTRM-GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2" class="sect5"><span class="enumeration_section">10.6.6.4</span>列列表</h5>
                     <div>
                        <p>每次为表指定预构建的DML冲突处理程序时，都必须指定列列表。</p>
                        <p>列列表是为其调用DML冲突处理程序的列的列表。如果入站服务器尝试应用行LCR时列表中的一个或多个列发生更新冲突，则调用DML冲突处理程序以解决冲突。如果仅在列表中不存在的列中发生冲突，则不会调用DML冲突处理程序。冲突解决的范围是单行LCR上的单列列表。</p>
                        <p>您可以为特定表指定多个DML冲突处理程序，但同一列不能在多个列列表中。例如，假设您在<code class="codeph">hr.employees</code>表上指定了两个预构建的DML冲突处理程序：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>第一个DML冲突处理程序在其列列表中包含以下列： <code class="codeph">salary</code>和<code class="codeph">commission_pct</code> 。
                              </p>
                           </li>
                           <li>
                              <p>第二个DML冲突处理程序在其列列表中包含以下列： <code class="codeph">job_id</code>和<code class="codeph">department_id</code> 。
                              </p>
                           </li>
                        </ul>
                        <p>此外，假设此表不存在其他冲突处理程序。在这种情况下，以下示例说明了不同方案的结果：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果入站服务器尝试应用行LCR时<code class="codeph">salary</code>列发生冲突，则调用第一个DML冲突处理程序来解决冲突。
                              </p>
                           </li>
                           <li>
                              <p>如果<code class="codeph">department_id</code>列发生冲突，则调用第二个DML冲突处理程序以解决冲突。
                              </p>
                           </li>
                           <li>
                              <p>如果对于任何冲突处理程序不在列列表中的列发生冲突，则不会调用冲突处理程序，并且会产生错误。例如，如果<code class="codeph">hr.employees</code>表中的<code class="codeph">manager_id</code>列发生冲突，则会产生错误。
                              </p>
                           </li>
                           <li>
                              <p>如果在应用行LCR时在多个列列表中发生冲突，并且在列列表中没有的任何列中没有冲突，则会为具有冲突的每个列列表调用相应的DML冲突处理程序。</p>
                           </li>
                        </ul>
                        <p>列列表使您可以使用不同的处理程序来解决不同类型数据的冲突。例如，数字数据通常适用于最大或最小冲突处理程序，而覆盖或丢弃冲突处理程序可能是字符数据的首选。</p>
                        <p>如果列不在列列表中发生冲突，则表上特定操作的错误处理程序将尝试解决冲突。如果错误处理程序无法解决冲突，或者如果没有此类错误处理程序，则导致冲突的事务将移至错误队列。</p>
                        <p>此外，如果列列表中使用<code class="codeph">OVERWRITE</code> ， <code class="codeph">MAXIMUM</code>或<code class="codeph">MINIMUM</code>预构建处理程序的列发生冲突，并且行LCR不包含此列列表中的所有列，则无法解决冲突，因为所有值都不可用。在这种情况下，导致冲突的事务将移至错误队列。如果列列表使用<code class="codeph">DISCARD</code>预构建方法，则行LCR将被丢弃并且不会产生错误，即使行LCR不包含此列列表中的所有列也是如此。
                        </p>
                        <p>如果源数据库中的多个列影响目标数据库中的列列表，则必须为列列表中指定的列指定条件补充日志组。补充日志记录在源数据库中指定，并向LCR添加其他信息，这是正确解决冲突所必需的。通常，如果列列表中有多列，则必须为列列表中的列指定条件补充日志组，但如果列列表中只有一列，则不能。</p>
                        <p>但是，在某些情况下，即使列列表中只有一列，也需要条件补充日志组。也就是说，应用处理程序或基于自定义规则的转换可以将源数据库中的多个列组合到目标数据库的列列表中的单个列中。例如，基于规则的自定义转换可以使用三列来存储来自源数据库的街道，州和邮政编码数据，并将数据组合到目标数据库的单个地址列中。</p>
                        <p>此外，在某些情况下，即使列列表中有多个列，也不需要条件补充日志组。例如，应用处理程序或基于自定义规则的转换可以将一个地址列与源数据库分隔为目标数据库的列列表中的多个列。基于规则的自定义转换可以将包含街道，州和邮政编码数据的地址放在源数据库的一个地址列中，并将数据分成目标数据库中的三列。</p>
                        <div class="infoboxnote" id="GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2__GUID-53735B94-A119-4B1E-BB41-0919BFC7D785">
                           <p class="notep1">注意：</p>
                           <p>预构建的DML冲突处理程序不支持LOB， <code class="codeph">LONG</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code> ，用户定义类型和Oracle提供的类型列。因此，在运行<code class="codeph">SET_DML_CONFLICT_HANDLER</code>过程时，不应在<code class="codeph">column_list</code>参数中包含这些类型的列。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2__GUID-25E5CF5B-26D5-481E-8803-0748DE49D5B9">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="configuring-xstream-in.html#GUID-E1D311AD-9B1C-49B5-B6AE-59A49C15B996" title="在XStream配置中，入站服务器在XStream Out配置中应用捕获进程捕获的更改，源数据库可能需要在入站服务器应用更改的表中的列上进行补充日志记录。">如果需要，请在源数据库中指定补充日志记录</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关数据类型的信息，请<a href="../sqlrf/Data-Types.html#SQLRF0021" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="检测到更新冲突后，冲突处理程序可以尝试解决它。">XStream环境中的冲突解决方案</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-1E464FF1-FFCB-42A7-B2F8-F65DEEE0F5B1" name="GUID-1E464FF1-FFCB-42A7-B2F8-F65DEEE0F5B1"></a><h5 id="XSTRM-GUID-1E464FF1-FFCB-42A7-B2F8-F65DEEE0F5B1" class="sect5"><span class="enumeration_section">10.6.6.5</span>分辨率列</h5>
                     <div>
                        <p><span class="bold">resolution列</span>是用于标识预构建的DML冲突处理程序的列。
                        </p>
                        <p>如果使用<code class="codeph">MAXIMUM</code>或<code class="codeph">MINIMUM</code>预构建的DML冲突处理程序，则解析列也是用于解决冲突的列。resolution列必须是处理程序列列表中的列之一。
                        </p>
                        <p>例如，如果<code class="codeph">hr.employees</code>表中的<code class="codeph">salary</code>列被指定为最大或最小冲突处理程序的解析列，则计算<code class="codeph">salary</code>列以确定是应用行LCR中的列列表值还是目标数据库值保留列列表。
                        </p>
                        <p>在涉及冲突的解决方案列的以下任一情况中，如果错误处理程序无法解决问题，则应用进程将包含导致冲突的行LCR的事务移动到错误队列。在这些情况下，无法解决冲突，并且目标数据库中列的值保持不变：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>分辨率列的新LCR值和目标行值相同（例如，如果分辨率列不是导致冲突的列）。</p>
                           </li>
                           <li>
                              <p>分辨率列的新LCR值或目标数据库的分辨率列的当前值为<code class="codeph">NULL</code> 。</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-1E464FF1-FFCB-42A7-B2F8-F65DEEE0F5B1__GUID-C79A34CE-284A-4F9A-8DA8-C9BB394444B4">
                           <p class="notep1">注意：</p>
                           <p>尽管分辨率列不用于<code class="codeph">OVERWRITE</code>和<code class="codeph">DISCARD</code>冲突处理程序，但您必须为这些冲突处理程序指定分辨率列。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="检测到更新冲突后，冲突处理程序可以尝试解决它。">XStream环境中的冲突解决方案</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-4D5FF192-C6AE-4C80-8C12-C1C6FE9C8439" name="GUID-4D5FF192-C6AE-4C80-8C12-C1C6FE9C8439"></a><h5 id="XSTRM-GUID-4D5FF192-C6AE-4C80-8C12-C1C6FE9C8439" class="sect5"><span class="enumeration_section">10.6.6.6</span>数据收敛</h5>
                     <div>
                        <p>当您在多个数据库之间共享数据，并且希望所有这些数据库中的数据相同时，请确保使用冲突解决处理程序使数据汇聚到所有数据库。</p>
                        <p>如果允许更改所有数据库中的共享数据，则只有当共享数据的所有数据库都捕获对共享数据的更改并将这些更改传播到共享数据的所有其他数据库时，才可能实现表的数据收敛。 。</p>
                        <p>在这样的环境中，只有当分辨率列中的值始终增加时， <code class="codeph">MAXIMUM</code>冲突解决方法才能保证收敛。如果行上的连续时间戳不同，则基于时间的分辨率列满足此要求。只有当分辨率列中的值始终减小时， <code class="codeph">MINIMUM</code>冲突解决方法才能保证在这样的环境中收敛。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="检测到更新冲突后，冲突处理程序可以尝试解决它。">XStream环境中的冲突解决方案</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-6DAF8231-7B39-4519-ABA6-9E70751D7EBD" name="GUID-6DAF8231-7B39-4519-ABA6-9E70751D7EBD"></a><h5 id="XSTRM-GUID-6DAF8231-7B39-4519-ABA6-9E70751D7EBD" class="sect5"><span class="enumeration_section">10.6.6.7</span>没有DML冲突处理程序的冲突处理</h5>
                     <div>
                        <p>如果没有表的DML冲突处理程序，则可以使用<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">HANDLE_COLLISIONS</code>过程启用基本冲突处理。
                        </p>
                        <p>为入站服务器和表启用基本冲突处理时，将通过以下方式解决冲突：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>当检测到表中存在的行发生冲突时，行LCR中的数据将覆盖表中的数据。</p>
                              <p>例如，如果行LCR包含插入，但该行已存在于表中。行LCR中的数据将覆盖表中的现有数据。如果行LCR包含更新，并且行中的旧值与行LCR中的旧值不匹配，则行LCR中的数据将覆盖表中的数据。</p>
                           </li>
                           <li>
                              <p>当检测到表中不存在的行的冲突时，将忽略行LCR中的数据。</p>
                              <p>例如，如果行LCR包含对行的更新，但该行中不存在该行，则忽略行LCR。</p>
                           </li>
                        </ul>
                        <div class="example" id="GUID-6DAF8231-7B39-4519-ABA6-9E70751D7EBD__GUID-8B30799E-FCF4-4956-940B-43B0F3CD1E9A">
                           <p class="titleinexample">示例10-5启用表的基本冲突处理</p>此示例为<code class="codeph">app_emp</code>入站服务器和<code class="codeph">hr.employees</code>表启用基本冲突处理。<pre class="pre codeblock"><code>BEGIN DBMS_APPLY_ADM.HANDLE_COLLISIONS（apply_name =&gt;'app_emp'，enable =&gt; TRUE，object =&gt;'hr.employees'）;结束; /</code></pre><p>要禁用此表的基本冲突处理，请运行相同的过程，但将<code class="codeph">enable</code>参数设置为<code class="codeph">FALSE</code> 。</p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="检测到更新冲突后，冲突处理程序可以尝试解决它。">XStream环境中的冲突解决方案</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-083B4578-DFB0-4F3D-B4DD-CF1FF98A9F5B" name="GUID-083B4578-DFB0-4F3D-B4DD-CF1FF98A9F5B"></a><h5 id="XSTRM-GUID-083B4578-DFB0-4F3D-B4DD-CF1FF98A9F5B" class="sect5"><span class="enumeration_section">10.6.6.8</span>自定义冲突处理程序</h5>
                     <div>
                        <p>您可以创建PL / SQL过程以用作自定义冲突处理程序。</p>
                        <p>您可以使用<code class="codeph">DBMS_APPLY_ADM</code>包中的<code class="codeph">SET_DML_HANDLER</code>过程为特定表指定一个或多个自定义冲突处理程序。具体来说，在运行此过程以指定自定义冲突处理程序时，请设置以下参数：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>将<code class="codeph">object_name</code>参数设置为要为其执行冲突解决的表的完全限定名称。
                              </p>
                           </li>
                           <li>
                              <p>将<code class="codeph">object_type</code>参数设置为<code class="codeph">TABLE</code> 。</p>
                           </li>
                           <li>
                              <p>将<code class="codeph">operation_name</code>参数设置为调用自定义冲突处理程序的操作类型。可能的操作如下： <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">LOB_UPDATE</code> 。您还可以将<code class="codeph">operation_name</code>参数设置为<code class="codeph">DEFAULT</code>以便处理程序是所有操作的默认处理程序。
                              </p>
                           </li>
                           <li>
                              <p>如果希望错误处理程序在引发错误时执行冲突解决，则将<code class="codeph">error_handler</code>参数设置为<code class="codeph">TRUE</code> 。或者，如果要在过程DML处理程序中包含冲突解决方案，请将<code class="codeph">error_handler</code>参数设置为<code class="codeph">FALSE</code> 。</p>
                              <p>如果为此参数指定<code class="codeph">FALSE</code> ，则在使用LCR的<code class="codeph">EXECUTE</code>成员过程执行行LCR时，将对指定的对象和操作执行过程DML处理程序内的冲突解决。
                              </p>
                           </li>
                           <li>
                              <p>通过设置<code class="codeph">user_procedure</code>参数指定解决冲突的过程。调用此用户过程以解决由指定操作类型导致的指定表上的任何冲突。
                              </p>
                           </li>
                        </ul>
                        <p>如果自定义冲突处理程序无法解决冲突，则入站服务器会将包含冲突的事务移动到错误队列，并且不会应用该事务。</p>
                        <p>如果特定对象都存在预构建的DML冲突处理程序和自定义冲突处理程序，则仅当满足以下两个条件时才会调用预构建的DML冲突处理程序：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>自定义冲突处理程序使用LCR的<code class="codeph">EXECUTE</code>成员过程执行行LCR。</p>
                           </li>
                           <li>
                              <p>行LCR的<code class="codeph">EXECUTE</code>成员过程中的<code class="codeph">conflict_resolution</code>参数设置为<code class="codeph">TRUE</code> 。</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-083B4578-DFB0-4F3D-B4DD-CF1FF98A9F5B__GUID-A8A5F48F-B19A-4B17-8544-683F6C4E6AA4">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">SET_DML_HANDLER</code>过程的详细信息，请<code class="codeph">SET_DML_HANDLER</code> <a href="../arpls/DBMS_APPLY_ADM.html#ARPLS324" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="检测到更新冲突后，冲突处理程序可以尝试解决它。">XStream环境中的冲突解决方案</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-069469B9-80D3-4872-894F-E08085D20443" name="GUID-069469B9-80D3-4872-894F-E08085D20443"></a><h4 id="XSTRM-GUID-069469B9-80D3-4872-894F-E08085D20443" class="sect4"><span class="enumeration_section">10.6.7</span>管理DML冲突处理程序</h4>
                  <div>
                     <p>您可以设置和删除DML冲突处理程序。要修改现有的DML冲突处理程序，必须将其删除并重置它。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F">设置DML冲突处理程序</a><br>使用<code class="codeph">DBMS_APPLY_ADM</code>包中的<code class="codeph">SET_DML_CONFLICT_HANDLER</code>过程设置DML冲突处理程序。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-296630CB-CE27-4160-91BC-27351200FFB6">删除DML冲突处理程序</a><br>您可以通过在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">SET_DML_CONFLICT_HANDLER</code>过程来删除现有的DML冲突处理程序。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="当多个客户端几乎同时修改同一个表行时，可能会发生冲突。XStream In检测冲突并提供解决冲突的方法。">在冲突检测和解决方案中管理XStream</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F" name="GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F"></a><h5 id="XSTRM-GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F" class="sect5"><span class="enumeration_section">10.6.7.1</span>设置DML冲突处理程序</h5>
                     <div>
                        <p>使用<code class="codeph">DBMS_APPLY_ADM</code>包中的<code class="codeph">SET_DML_CONFLICT_HANDLER</code>过程设置DML冲突处理程序。
                        </p>
                        <div class="section">创建DML冲突解决处理程序时，可以使用以下预构建方法之一：<ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">记录</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">忽视</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OVERWRITE</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">最大值</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">最低</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">三角洲</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">MAX_AND_EQUALS</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">MIN_AND_EQUALS</code></p>
                              </li>
                           </ul>
                           <p>设置DML冲突处理程序：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>以XStream管理员身份连接到入站服务器数据库。</span></li>
                           <li><span>在<code class="codeph">DBMS_APPLY_ADM</code>包中运行<code class="codeph">SET_DML_CONFLICT_HANDLER</code>过程。</span></li>
                        </ol>
                        <div class="example" id="GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F__GUID-167B4521-72D4-4873-AAC8-E3870DDBC043">
                           <p class="titleinexample">示例10-6设置DML冲突处理程序</p>
                           <p>假设客户端中的XStream接收要应用于<code class="codeph">hr.jobs</code>上的<code class="codeph">hr.jobs</code>表的<code class="codeph">dbs1.example.com</code> 。在此环境中，可能会发生冲突，因为客户端收到的外部数据库的更改可能与目标数据库<code class="codeph">dbs1.example.com</code>的更改无法协调。如果特定DML插入或更新存在冲突，则从外部数据库进行的更改必须始终覆盖目标数据库的更改。在此环境中，您可以通过在<code class="codeph">dbs1.example.com</code>数据库中指定<code class="codeph">OVERWRITE</code>处理程序来实现此目标。如果由于DML删除行不存在而发生冲突，则忽略行LCR。
                           </p>
                           <p>此示例为<code class="codeph">dbs1.example.com</code>数据库中的<code class="codeph">hr.jobs</code>表指定DML冲突处理程序。
                           </p><pre class="pre codeblock"><code>DECLARE cols DBMS_UTILITY.LNAME_ARRAY; BEGIN cols（1）：='job_title'; cols（2）：='min_salary'; cols（3）：='max_salary'; DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER（apply_name =&gt;'app_jobs'，conflict_handler_name =&gt;'jobs_handler_insert'，object =&gt;'hr.jobs'，operation_name =&gt;'INSERT'，conflict_type =&gt;'ROW_EXISTS'，method_name =&gt;'OVERWRITE'，column_table = &gt; cols）; DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER（apply_name =&gt;'app_jobs'，conflict_handler_name =&gt;'jobs_handler_update'，object =&gt;'hr.jobs'，operation_name =&gt;'UPDATE'，conflict_type =&gt;'ROW_EXISTS'，method_name =&gt;'OVERWRITE'，column_table = &gt; cols）; DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER（apply_name =&gt;'app_jobs'，conflict_handler_name =&gt;'jobs_handler_delete'，object =&gt;'hr.jobs'，operation_name =&gt;'DELETE'，conflict_type =&gt;'ROW_MISSING'，method_name =&gt;'IGNORE'，column_list = &gt;'*'）;结束; /</code></pre><p>应用程序<code class="codeph">app_jobs</code>使用指定的DML冲突处理程序。
                           </p>
                           <div class="infoboxnote" id="GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F__GUID-7602B33C-B67F-4AD2-971A-6602C48C110A">
                              <p class="notep1">注意：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>对于<code class="codeph">jobs_handler_delete</code> DML冲突处理程序， <code class="codeph">column_list</code>参数设置为<code class="codeph">'*'</code>因为当<code class="codeph">operation_name</code>设置为<code class="codeph">DELETE</code>时，必须指定所有列。</p>
                                 </li>
                                 <li>
                                    <p>如果客户端使用XStream Out从Oracle数据库获取数据，则必须在源数据库中为目标数据库的<code class="codeph">column_list</code>中的所有列指定条件补充日志组。在此示例中，您将指定条件补充日志组，包括外部数据库的<code class="codeph">hr.jobs</code>表中的<code class="codeph">job_title</code> ， <code class="codeph">min_salary</code>和<code class="codeph">max_salary</code>列。
                                    </p>
                                 </li>
                                 <li>
                                    <p>预构建的DML冲突处理程序不支持LOB， <code class="codeph">LONG</code> ， <code class="codeph">LONG RAW</code> ，用户定义类型和Oracle提供的类型列。因此，在运行过程<code class="codeph">SET_DML_CONFLICT_HANDLER</code>时，请勿在<code class="codeph">column_list</code>参数中包含这些类型的列。</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F__GUID-EC5AB1C6-09EE-47DA-BE90-24CA36D5AAD9">
                           <p class="notep1">也可以看看：</p>有关数据类型的信息，请<a href="../sqlrf/Data-Types.html#SQLRF0021" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-069469B9-80D3-4872-894F-E08085D20443" title="您可以设置和删除DML冲突处理程序。要修改现有的DML冲突处理程序，必须将其删除并重置它。">管理DML冲突处理程序</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-296630CB-CE27-4160-91BC-27351200FFB6" name="GUID-296630CB-CE27-4160-91BC-27351200FFB6"></a><h5 id="XSTRM-GUID-296630CB-CE27-4160-91BC-27351200FFB6" class="sect5"><span class="enumeration_section">10.6.7.2</span>删除DML冲突处理程序</h5>
                     <div>
                        <p>您可以通过在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">SET_DML_CONFLICT_HANDLER</code>过程来删除现有的DML冲突处理程序。
                        </p>
                        <div class="section">
                           <p>要删除现有的DML冲突处理程序，请为该方法指定<code class="codeph">NULL</code> ，并指定与现有DML冲突处理程序相同的apply name和DML冲突处理程序名称。
                           </p>
                           <p>要删除DML冲突处理程序：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>以XStream管理员身份连接到入站服务器数据库。</span></li>
                           <li><span>在<code class="codeph">DBMS_APPLY_ADM</code>包中运行<code class="codeph">SET_DML_CONFLICT_HANDLER</code>过程，并为方法指定<code class="codeph">NULL</code> ，并将相同的应用名称，DML冲突处理程序名称，对象名称，冲突类型和解析列指定为现有DML冲突处理程序。</span></li>
                        </ol>
                        <div class="example" id="GUID-296630CB-CE27-4160-91BC-27351200FFB6__GUID-167B4521-72D4-4873-AAC8-E3870DDBC043">
                           <p class="titleinexample">示例10-7删除DML冲突处理程序</p>
                           <p>要删除在<span class="q">“ <a href="managing-xstream-in.html#GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F" title="Set a DML conflict handler using the SET_DML_CONFLICT_HANDLER procedure in the DBMS_APPLY_ADM package.">设置</a></span> DML冲突处理程序”中创建<span class="q"><a href="managing-xstream-in.html#GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F" title="使用DBMS_APPLY_ADM包中的SET_DML_CONFLICT_HANDLER过程设置DML冲突处理程序。">的DML冲突处理</a></span>程序，请运行以下过程：</p><pre class="pre codeblock"><code>BEGIN DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER（apply_name =&gt;'app_jobs'，conflict_handler_name =&gt;'jobs_handler_insert'，method_name =&gt; NULL）; DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER（apply_name =&gt;'app_jobs'，conflict_handler_name =&gt;'jobs_handler_update'，method_name =&gt; NULL）; DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER（apply_name =&gt;'app_jobs'，conflict_handler_name =&gt;'jobs_handler_delete'，method_name =&gt; NULL）;结束; /</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-069469B9-80D3-4872-894F-E08085D20443" title="您可以设置和删除DML冲突处理程序。要修改现有的DML冲突处理程序，必须将其删除并重置它。">管理DML冲突处理程序</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B" name="GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B"></a><h4 id="XSTRM-GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B" class="sect4"><span class="enumeration_section">10.6.8</span>停止非键列的冲突检测</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">COMPARE_OLD_VALUES</code>过程停止对非键列的冲突检测。
                     </p>
                     <div class="section"> 
                        <p>要停止非键列的冲突检测：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>以XStream管理员身份连接到入站服务器数据库。</span></li>
                        <li><span>在<code class="codeph">DBMS_APPLY_ADM</code>包中运行<code class="codeph">COMPARE_OLD_VALUES</code>过程，并为<code class="codeph">compare</code>参数指定非键列和<code class="codeph">FALSE</code> 。</span></li>
                     </ol>
                     <div class="example" id="GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B__GUID-167B4521-72D4-4873-AAC8-E3870DDBC043">
                        <p class="titleinexample">示例10-8停止非键列的冲突检测</p>
                        <p>假设您为<code class="codeph">hr.employees</code>表配置冲突解决的<code class="codeph">time</code>列。对于表的每次更改，触发器都会记录此列中的当前时间。在这种情况下，您可以决定停止对表中其他非键列的冲突检测。将<code class="codeph">hr.employees</code>表中的列添加到列列表中以获取更新冲突处理程序：</p><pre class="pre codeblock"><code>DECLARE cols DBMS_UTILITY.NAME_ARRAY; BEGIN cols（1）：='first_name'; cols（2）：='last_name'; cols（3）：='email'; cols（4）：='phone_number'; cols（5）：='hire_date'; cols（6）：='job_id'; cols（7）：='salary'; cols（8）：='commission_pct'; cols（9）：='manager_id'; cols（10）：='department_id'; cols（11）：='time'; DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER（apply_name =&gt;'app_employees'，conflict_handler_name =&gt;'emp_handler'，object =&gt;'hr.employees'，operation_name =&gt;'UPDATE'，conflict_type =&gt;'ROW_EXISTS'，method_name =&gt;'MAXIMUM'，column_list = &gt; cols，resolution_column =&gt;'time'）;结束; /</code></pre><p>此示例不包括列列表中表的主键，因为它假定主键永远不会更新。但是，列列表中包含其他键列。</p>
                        <p>要停止对表中所有非键列的冲突检测以进行<code class="codeph">UPDATE</code>操作，请输入以下内容：</p><pre class="pre codeblock"><code>DECLARE cols DBMS_UTILITY.LNAME_ARRAY; BEGIN cols（1）：='first_name'; cols（2）：='last_name'; cols（3）：='email'; cols（4）：='phone_number'; cols（5）：='hire_date'; cols（6）：='job_id'; cols（7）：='salary'; cols（8）：='commission_pct'; DBMS_APPLY_ADM.COMPARE_OLD_VALUES（object_name =&gt;'hr.employees'，column_table =&gt; cols，operation =&gt;'*'，compare =&gt; FALSE）;结束; /</code></pre><p>为操作参数指定的星号（*）表示对<code class="codeph">UPDATE</code>操作停止冲突检测。运行此过程后，在数据库上运行的所有应用进程在本地应用对指定表的更改都不会检测指定列上的冲突。因此，在此示例中， <code class="codeph">time</code>列是用于冲突检测的唯一列。
                        </p>
                        <div class="infoboxnote" id="GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B__GUID-2266150D-505C-4980-AB7C-9EDE465F338D">
                           <p class="notep1">注意：</p>本节中的示例在停止非键列的冲突检测之前设置DML冲突处理程序。但是，在停止非键列的冲突检测之前，不需要DML冲突处理程序。
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B__GUID-EC5AB1C6-09EE-47DA-BE90-24CA36D5AAD9">
                        <p class="notep1">也可以看看：</p>有关<code class="codeph">COMPARE_OLD_VALUES</code>过程的详细信息，请<code class="codeph">COMPARE_OLD_VALUES</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS526" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="当多个客户端几乎同时修改同一个表行时，可能会发生冲突。XStream In检测冲突并提供解决冲突的方法。">在冲突检测和解决方案中管理XStream</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="XSTRM72889"></a><div class="props_rev_3"><a id="GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" name="GUID-52AE0882-647F-4C68-89DD-E1D658569BA7"></a><h3 id="XSTRM-GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" class="sect3"><span class="enumeration_section">10.7</span>管理应用错误</h3>
               <div>
                  <p>当入站服务器尝试应用LCR时，应用错误结果，并引发错误。</p>
                  <p>发生应用错误时，导致错误的LCR和同一事务中的所有其他LCR将移至错误队列。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-1FA5CFA4-57C3-47C6-8F99-4AF3203F65BD">入站服务器错误处理</a><br>您可以配置错误处理程序以处理特定类型的错误。
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-FCD1CE21-0A24-4A32-B22A-784605237D86">重试应用错误事务</a><br>您可以重试特定的错误事务，也可以重试入站服务器的所有错误事务。
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8">删除应用错误事务</a><br>您可以删除特定的错误事务，也可以删除入站服务器的所有错误事务。
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024">管理入站服务器遇到的Eager错误</a><br>作为性能优化，入站服务器可以使用eager apply在接收提交LCR之前开始应用大型事务。</li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-52AE0882-647F-4C68-89DD-E1D658569BA7__GUID-6C973AE8-454B-4BFB-99CB-4467D83E8218">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="xstream-in-concepts.html#GUID-5602248A-8DE3-495B-B1E9-F1F61CC798C3" title="错误队列包含数据库的所有当前应用错误。如果数据库中有多个入站服务器，则错误队列包含每个入站服务器的应用错误。">入站服务器的错误队列</a> ”</span></p>
                        </li>
                        <li>
                           <p>Oracle Enterprise Manager Cloud Control联机帮助，提供有关在Oracle Enterprise Manager云控制中管理应用错误的说明</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="您可以管理XStream In配置。">管理XStream In</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-1FA5CFA4-57C3-47C6-8F99-4AF3203F65BD" name="GUID-1FA5CFA4-57C3-47C6-8F99-4AF3203F65BD"></a><h4 id="XSTRM-GUID-1FA5CFA4-57C3-47C6-8F99-4AF3203F65BD" class="sect4"><span class="enumeration_section">10.7.1</span>入站服务器错误处理</h4>
                  <p>您可以配置错误处理程序以处理特定类型的错误。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-B674A39F-31D3-43BF-9B01-303013EB7DB5">关于错误处理程序</a><br>错误处理程序指定在应用期间处理特定错误的方法。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-170B7510-A772-4900-9267-B1C7A799CD6F">设置和取消设置错误处理程序</a><br>使用<code class="codeph">DBMS_APPLY</code>包中的<code class="codeph">SET_REPERROR_HANDLER</code>过程设置错误处理程序。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" title="当入站服务器尝试应用LCR时，应用错误结果，并引发错误。">管理应用错误</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-B674A39F-31D3-43BF-9B01-303013EB7DB5" name="GUID-B674A39F-31D3-43BF-9B01-303013EB7DB5"></a><h5 id="XSTRM-GUID-B674A39F-31D3-43BF-9B01-303013EB7DB5" class="sect5"><span class="enumeration_section">10.7.1.1</span>关于错误处理程序</h5>
                     <div>
                        <p>错误处理程序指定在应用期间处理特定错误的方法。</p>
                        <p>当入站服务器应用行LCR时，它可能会遇到错误。您可以使用<code class="codeph">DBMS_APPLY</code>包中的<code class="codeph">SET_REPERROR_HANDLER</code>过程使用指定方法配置错误处理程序以处理特定错误。例如，您可以设置一个错误处理程序来处理行LCR尝试更新或删除表中不存在的行时发生的ORA-26787错误。此外，您可以配置默认错误处理方法，而无需指定特定错误。
                        </p>
                        <p>您为特定的应用过程设置了错误处理程序。您可以为特定表或所有表设置错误处理程序。</p>
                        <p>下表描述了每种错误处理程序方法。</p>
                        <div class="tblformal" id="GUID-B674A39F-31D3-43BF-9B01-303013EB7DB5__GUID-EDA844A4-C2AC-48B6-BB1F-54F987232483">
                           <p class="titleintable">表10-2错误处理程序方法</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="错误处理程序方法" border="1" summary="This table describes each error handler method." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d49348e6716">方法</th>
                                    <th align="left" valign="bottom" id="d49348e6718">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d49348e6722" headers="d49348e6716 "><code class="codeph">ABEND</code></td>
                                    <td align="left" valign="top" headers="d49348e6722 d49348e6718 ">
                                       <p>遇到错误时停止入站服务器。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d49348e6729" headers="d49348e6716 "><code class="codeph">记录</code></td>
                                    <td align="left" valign="top" headers="d49348e6729 d49348e6718 ">
                                       <p>遇到错误时，将导致错误的行LCR移动到错误队列。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d49348e6736" headers="d49348e6716 "><code class="codeph">忽视</code></td>
                                    <td align="left" valign="top" headers="d49348e6736 d49348e6718 ">
                                       <p>当遇到错误时，默认忽略错误，并且不应用行LCR。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d49348e6743" headers="d49348e6716 "><code class="codeph">重试</code></td>
                                    <td align="left" valign="top" headers="d49348e6743 d49348e6718 ">
                                       <p>遇到错误时，重试行LCR达指定的次数。</p>
                                       <p>如果重试失败，则整个事务将移至错误队列。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d49348e6752" headers="d49348e6716 "><code class="codeph">RETRY_TRANSACTION</code></td>
                                    <td align="left" valign="top" headers="d49348e6752 d49348e6718 ">
                                       <p>在遇到错误时，在重试之前使用指定的延迟重试事务指定的次数。</p>
                                       <p>如果重试失败，则整个事务将移至错误队列。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d49348e6761" headers="d49348e6716 "><code class="codeph">RECORD_TRANSACTION</code></td>
                                    <td align="left" valign="top" headers="d49348e6761 d49348e6718 ">
                                       <p>遇到错误时将整个事务移动到错误队列。<code class="codeph">RECORD_TRANSACTION</code>是默认值。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-1FA5CFA4-57C3-47C6-8F99-4AF3203F65BD" title="您可以配置错误处理程序以处理特定类型的错误。">入站服务器错误处理</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-170B7510-A772-4900-9267-B1C7A799CD6F" name="GUID-170B7510-A772-4900-9267-B1C7A799CD6F"></a><h5 id="XSTRM-GUID-170B7510-A772-4900-9267-B1C7A799CD6F" class="sect5"><span class="enumeration_section">10.7.1.2</span>设置和<span class="enumeration_section">取消</span>设置错误处理程序</h5>
                     <div>
                        <p>使用<code class="codeph">DBMS_APPLY</code>包中的<code class="codeph">SET_REPERROR_HANDLER</code>过程设置错误处理程序。
                        </p>
                        <div class="section">设置错误处理程序时，可以使用以下方法之一：<ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">ABEND</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">记录</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">忽视</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">重试</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">RETRY_TRANSACTION</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">RECORD_TRANSACTION</code></p>
                              </li>
                           </ul>
                           <p>要取消设置错误处理程序，请将<code class="codeph">SET_REPERROR_HANDLER</code>过程中的<code class="codeph">method</code>参数设置为<code class="codeph">NULL</code> 。</p>
                           <p>要设置或取消设置错误处理程序：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>以XStream管理员身份连接到入站服务器数据库。</span></li>
                           <li><span>运行<code class="codeph">DBMS_APPLY_ADM</code>包中的<code class="codeph">SET_REPERROR_HANDLER</code>过程。</span></li>
                        </ol>
                        <div class="example" id="GUID-170B7510-A772-4900-9267-B1C7A799CD6F__GUID-A588A6F0-30C8-4849-955F-6228640A0B11">
                           <p class="titleinexample">示例10-9设置阻止特定表上所有错误的入站服务器的错误处理程序</p>
                           <p>此示例设置一个错误处理程序，用于停止<code class="codeph">app_oe</code>入站服务器以<code class="codeph">oe.orders</code>表上的任何错误。<code class="codeph">error_number</code>参数的<code class="codeph">0</code>设置指定所有错误。<code class="codeph">method</code>参数的<code class="codeph">ABEND</code>设置指定在遇到错误时停止入站服务器。
                           </p><pre class="pre codeblock"><code>BEGIN DBMS_APPLY_ADM.SET_REPERROR_HANDLER（apply_name =&gt;'app_oe'，object =&gt;'oe.orders'，error_number =&gt; 0，method =&gt;'ABEND'）;结束; /</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-170B7510-A772-4900-9267-B1C7A799CD6F__GUID-AE96B517-3B0A-42FE-8C89-2159A1CE8859">
                           <p class="titleinexample">示例10-10设置忽略特定表的行LCR和特定错误的错误处理程序</p>
                           <p>此示例设置一个错误处理程序，该处理程序忽略引发<code class="codeph">app_oe</code>入站服务器的ORA-1403错误的行LCR。错误处理程序适用于<code class="codeph">oe.orders</code>表。
                           </p><pre class="pre codeblock"><code>BEGIN DBMS_APPLY_ADM.SET_REPERROR_HANDLER（apply_name =&gt;'app_oe'，object =&gt;'oe.orders'，error_number =&gt; 1403，method =&gt;'IGNORE'）;结束; /</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-170B7510-A772-4900-9267-B1C7A799CD6F__GUID-53C22E78-57A3-4CE6-BE38-FA88FEB58CB8">
                           <p class="titleinexample">示例10-11取消设置错误处理程序</p>
                           <p>此示例取消设置一个错误处理程序，该错误处理程序忽略引发<code class="codeph">app_oe</code>入站服务器的ORA-1403错误的行LCR。为<code class="codeph">oe.orders</code>表设置了错误处理程序。
                           </p><pre class="pre codeblock"><code>BEGIN DBMS_APPLY_ADM.SET_REPERROR_HANDLER（apply_name =&gt;'app_oe'，object =&gt;'oe.orders'，error_number =&gt; 1403，method =&gt; NULL）;结束; /</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-1FA5CFA4-57C3-47C6-8F99-4AF3203F65BD" title="您可以配置错误处理程序以处理特定类型的错误。">入站服务器错误处理</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="XSTRM72890"></a><div class="props_rev_3"><a id="GUID-FCD1CE21-0A24-4A32-B22A-784605237D86" name="GUID-FCD1CE21-0A24-4A32-B22A-784605237D86"></a><h4 id="XSTRM-GUID-FCD1CE21-0A24-4A32-B22A-784605237D86" class="sect4"><span class="enumeration_section">10.7.2</span>重试应用错误事务</h4>
                  <div>
                     <p>您可以重试特定的错误事务，也可以重试入站服务器的所有错误事务。</p>
                     <p>在重试错误事务之前，可能需要对数据库对象进行DML或DDL更改，以更正导致一个或多个应用错误的条件。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-046F8CA3-28DD-4C32-B156-0381B436D214">重试特定的应用错误事务</a><br>当您重试错误事务时，可以立即执行它，或者在执行错误事务之前将错误事务发送到用户过程以进行修改。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4">重试入站服务器的所有错误事务</a><br>更正导致入站服务器的所有应用错误的条件后，可以通过在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">EXECUTE_ALL_ERRORS</code>过程来重试所有错误事务。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" title="当入站服务器尝试应用LCR时，应用错误结果，并引发错误。">管理应用错误</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72891"></a><div class="props_rev_3"><a id="GUID-046F8CA3-28DD-4C32-B156-0381B436D214" name="GUID-046F8CA3-28DD-4C32-B156-0381B436D214"></a><h5 id="XSTRM-GUID-046F8CA3-28DD-4C32-B156-0381B436D214" class="sect5"><span class="enumeration_section">10.7.2.1</span>重试特定的应用错误事务</h5>
                     <div>
                        <p>当您重试错误事务时，可以立即执行它，或者在执行错误事务之前将错误事务发送到用户过程以进行修改。</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-20F05939-9C6A-46C1-8011-08AB8F30E025">在没有用户过程的情况下重试特定的应用错误事务</a><br>更正导致应用错误的条件后，可以通过在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">EXECUTE_ERROR</code>过程来重试事务，而无需指定用户过程。在这种情况下，事务执行时不需要任何自定义处理。
                           </li>
                           <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9">使用用户过程重试特定的应用错误事务</a><br>您可以通过在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">EXECUTE_ERROR</code>过程来重试错误事务，并指定用户过程以在执行事务之前修改事务中的一个或多个LCR。
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-046F8CA3-28DD-4C32-B156-0381B436D214__GUID-E4622AF3-8A6A-4D94-A51F-DA509616D40F">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">EXECUTE_ERROR</code>过程的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS326" target="_blank"><span><cite>参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-FCD1CE21-0A24-4A32-B22A-784605237D86" title="您可以重试特定的错误事务，也可以重试入站服务器的所有错误事务。">重试应用错误事务</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="XSTRM72892"></a><div class="props_rev_3"><a id="GUID-20F05939-9C6A-46C1-8011-08AB8F30E025" name="GUID-20F05939-9C6A-46C1-8011-08AB8F30E025"></a><h6 id="XSTRM-GUID-20F05939-9C6A-46C1-8011-08AB8F30E025" class="sect6"><span class="enumeration_section">10.7.2.1.1</span>在没有用户过程的情况下重试特定的应用错误事务</h6>
                        <div>
                           <p>更正导致应用错误的条件后，可以通过在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">EXECUTE_ERROR</code>过程来重试事务，而无需指定用户过程。在这种情况下，事务执行时不需要任何自定义处理。
                           </p>
                           <div class="section">
                              <p>当存在多个错误事务时，执行它们时，事务排序可能很重要。通常，最佳做法是先执行最早的事务，然后按顺序执行每个事务，直到达到最新的事务。<code class="codeph">DBA_APPLY_ERROR</code>视图中的<code class="codeph">SOURCE_COMMIT_POSITION</code>列显示事务时间。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-20F05939-9C6A-46C1-8011-08AB8F30E025__GUID-EFB30C1A-6C5F-483C-989E-ED83FA957AB5">在没有用户过程的情况下重试特定的应用错误事务：</p>
                              <ol>
                                 <li>
                                    <p>在SQL * Plus中，以XStream管理员身份连接到数据库。</p>
                                    <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在<code class="codeph">DBMS_APPLY_ADM</code>包中运行<code class="codeph">EXECUTE_ERROR</code>过程，并指定事务标识符。
                                    </p>
                                    <p>要使用事务标识符<code class="codeph">5.4.312</code>重试事务，请运行以下过程：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_APPLY_ADM.EXECUTE_ERROR（local_transaction_id =&gt;'5.4.312'，execute_as_user =&gt; FALSE，user_procedure =&gt; NULL）;结束; /</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p>如果<code class="codeph">execute_as_user</code>为<code class="codeph">TRUE</code> ，则入站服务器在当前用户的安全上下文中执行事务。如果<code class="codeph">execute_as_user</code>为<code class="codeph">FALSE</code> ，则入站服务器在事务的原始接收者的安全上下文中执行事务。原始接收者是在引发错误时正在处理事务的用户。
                              </p>
                              <p>在任何一种情况下，执行事务的用户必须具有对apply对象执行DML和DDL更改以及运行任何apply处理程序的权限。</p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-046F8CA3-28DD-4C32-B156-0381B436D214" title="当您重试错误事务时，可以立即执行它，或者在执行错误事务之前将错误事务发送到用户过程以进行修改。">重试特定的应用错误事务</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM72893"></a><div class="props_rev_3"><a id="GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9" name="GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9"></a><h6 id="XSTRM-GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9" class="sect6"><span class="enumeration_section">10.7.2.1.2</span>使用用户过程重试特定的应用错误事务</h6>
                        <div>
                           <p>您可以通过在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">EXECUTE_ERROR</code>过程来重试错误事务，并指定用户过程以在执行事务之前修改事务中的一个或多个LCR。
                           </p>
                           <div class="section">
                              <p>修改应该能够成功执行事务。</p>
                              <p>例如，考虑一个冲突导致应用错误的情况。检查错误事务会发现行LCR中的<code class="codeph">salary</code>列的旧值包含错误的值。具体而言， <code class="codeph">hr.employees</code>表中<code class="codeph">employee_id</code>为<code class="codeph">197</code>的员工的当前工资值与行LCR中该员工的工资的旧值不匹配。假设<code class="codeph">hr.employees</code>表中该员工的当前值为<code class="codeph">3250</code> 。本节中的示例创建了一个解决错误的过程。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9__GUID-CC710F7E-0260-4E77-AD21-4C745CC6ABD3">使用用户过程重试特定的应用错误事务：</p>
                              <ol>
                                 <li>
                                    <p>在SQL * Plus中，以XStream管理员身份连接到数据库。</p>
                                    <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>鉴于前面描述的这种情况，创建以下用户过程以修改导致错误的行LCR中的工资：</p><pre class="oac_no_warn" dir="ltr">创建或替换过程xstrmadmin.modify_emp_salary（in_any IN ANYDATA，error_record IN ALL_APPLY_ERROR％ROWTYPE，error_message_number IN NUMBER，messaging_default_processing IN OUT BOOLEAN，out_any OUT ANYDATA）AS row_lcr SYS.LCR $ _ROW_RECORD; row_lcr_changed BOOLEAN：= FALSE; res NUMBER; ob_owner VARCHAR2（32）; ob_name VARCHAR2（32）; cmd_type VARCHAR2（30）; employee_id NUMBER; BEGIN IF in_any.getTypeName（）='SYS.LCR $ _ROW_RECORD'那么 - 访问LCR res：= in_any。GETOBJECT（row_lcr）; - 确定LCR ob_owner：= row_lcr的数据库对象的所有者。GET_OBJECT_OWNER; - 确定LCR ob_name：= row_lcr的数据库对象的名称。GET_OBJECT_NAME; - 确定DML更改的类型cmd_type：= row_lcr。GET_COMMAND_TYPE; IF（ob_owner ='HR'和ob_name ='EMPLOYEES'和cmd_type ='UPDATE'）然后 - 确定行更改IF row_lcr的employee_id。GET_VALUE（'old'，'employee_id'）因为employee_id：= row_lcr而不是NULL。GET_VALUE（'old'，'employee_id'）。ACCESSNUMBER（）; IF（employee_id = 197）那么 -  error_record.message_number应该等于error_message_number row_lcr。SET_VALUE（value_type =&gt;'OLD'，column_name =&gt;'salary'，column_value =&gt; ANYDATA.ConvertNumber（3250））; row_lcr_changed：= TRUE;万一;万一;万一;万一; - 指定入站服务器继续处理当前消息messaging_default_processing：= TRUE; - 适当地分配out_any IF row_lcr_changed THEN out_any：= ANYDATA.ConvertObject（row_lcr）; ELSE out_any：= in_any;万一;结束; /</pre></li>
                                 <li>
                                    <p>在<code class="codeph">DBMS_APPLY_ADM</code>包中运行<code class="codeph">EXECUTE_ERROR</code>过程，并指定事务标识符和用户过程。
                                    </p>
                                    <p>要使用事务标识符<code class="codeph">5.6.924</code>重试事务并在执行前使用<code class="codeph">xstrmadmin</code>模式中的<code class="codeph">modify_emp_salary</code>过程处理事务，请运行以下过程：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_APPLY_ADM.EXECUTE_ERROR（local_transaction_id =&gt;'5.6.924'，execute_as_user =&gt; FALSE，user_procedure =&gt;'xstrmadmin.modify_emp_salary'）;结束; /</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <div class="infoboxnote" id="GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9__GUID-796F94FC-15FF-4F5F-98B4-BE9AF86535D1">
                                 <p class="notep1">注意：</p>
                                 <p>运行该过程的用户必须对<code class="codeph">ALL_APPLY_ERROR</code>数据字典视图具有<code class="codeph">SELECT</code>权限。
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-046F8CA3-28DD-4C32-B156-0381B436D214" title="当您重试错误事务时，可以立即执行它，或者在执行错误事务之前将错误事务发送到用户过程以进行修改。">重试特定的应用错误事务</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="XSTRM72894"></a><div class="props_rev_3"><a id="GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4" name="GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4"></a><h5 id="XSTRM-GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4" class="sect5"><span class="enumeration_section">10.7.2.2</span>重试入站服务器的所有错误事务</h5>
                     <div>
                        <p>更正导致入站服务器的所有应用错误的条件后，可以通过在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">EXECUTE_ALL_ERRORS</code>过程来重试所有错误事务。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4__GUID-51CA4817-0302-42E6-86CD-D52DB41A6C15">要重试入站服务器的所有错误事务：</p>
                           <p>当存在多个错误事务时， <code class="codeph">EXECUTE_ALL_ERRORS</code>过程首先执行最早的事务，然后执行每个后续事务，直到最新的事务。
                           </p>
                           <ol>
                              <li>
                                 <p>在SQL * Plus中，以XStream管理员身份连接到数据库。</p>
                                 <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">EXECUTE_ALL_ERRORS</code>过程，并指定入站服务器的名称。
                                 </p>
                                 <p>要重命名名为<code class="codeph">xin</code>的入站服务器的所有错误事务，请运行以下过程：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_APPLY_ADM.EXECUTE_ALL_ERRORS（apply_name =&gt;'xin'，execute_as_user =&gt; FALSE）;结束; /</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnote" id="GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4__GUID-3E18443F-0F5E-45C1-90BC-0B955677F0AD">
                              <p class="notep1">注意：</p>
                              <p>如果为<code class="codeph">apply_name</code>参数指定<code class="codeph">NULL</code> ，并且您有多个入站服务器，则会为所有入站服务器重试所有应用错误。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-FCD1CE21-0A24-4A32-B22A-784605237D86" title="您可以重试特定的错误事务，也可以重试入站服务器的所有错误事务。">重试应用错误事务</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="XSTRM72895"></a><div class="props_rev_3"><a id="GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" name="GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8"></a><h4 id="XSTRM-GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" class="sect4"><span class="enumeration_section">10.7.3</span>删除应用错误事务</h4>
                  <p>您可以删除特定的错误事务，也可以删除入站服务器的所有错误事务。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-3174E901-8DE8-4965-85FA-D3FA83B0012D">删除特定的应用错误事务</a><br>如果不应用错误事务，则可以使用<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">DELETE_ERROR</code>过程从错误队列中删除事务。
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030">删除入站服务器的所有错误事务</a><br>如果不应用任何错误事务，则可以通过在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">DELETE_ALL_ERRORS</code>过程来删除所有错误事务。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" title="当入站服务器尝试应用LCR时，应用错误结果，并引发错误。">管理应用错误</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72896"></a><div class="props_rev_3"><a id="GUID-3174E901-8DE8-4965-85FA-D3FA83B0012D" name="GUID-3174E901-8DE8-4965-85FA-D3FA83B0012D"></a><h5 id="XSTRM-GUID-3174E901-8DE8-4965-85FA-D3FA83B0012D" class="sect5"><span class="enumeration_section">10.7.3.1</span>删除特定的应用错误事务</h5>
                     <div>
                        <p>如果不应用错误事务，则可以使用<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">DELETE_ERROR</code>过程从错误队列中删除事务。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-3174E901-8DE8-4965-85FA-D3FA83B0012D__GUID-CE0FCED3-0683-488C-9587-0F0E473FADAA">要删除特定的应用错误事务：</p>
                           <ol>
                              <li>
                                 <p>在SQL * Plus中，以XStream管理员身份连接到数据库。</p>
                                 <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>标识要删除的错误事务的事务ID。</p>
                                 <p>例如，运行以下查询以列出本地应用错误事务：</p><pre class="pre codeblock"><code>COLUMN APPLY_NAME FORMAT A11 COLURN SOURCE_DATABASE'FORMAT A10 COLUMN LOCAL_TRANSACTION_ID FORMAT A11 COLUMN ERROR_NUMBER FORMAT 99999999 COLUMN ERROR_MESSAGE FORMAT A20 COLUEN MESSAGE_COUNT FORMAT 99999999 SELECT APPLY_NAME，SOURCE_DATABASE，LOCAL_TRANSACTION_ID，ERROR_NUMBER，ERROR_MESSAGE，MESSAGE_COUNT FROM DBA_APPLY_ERROR;</code></pre></li>
                              <li>
                                 <p>在<code class="codeph">DBMS_APPLY_ADM</code>包中运行<code class="codeph">DELETE_ERROR</code>过程，并指定事务标识符。
                                 </p>
                                 <p>要删除事务标识符为<code class="codeph">5.4.312</code>的事务，请运行以下过程：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_APPLY_ADM.DELETE_ERROR（local_transaction_id =&gt;'5.4.312'）;</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" title="您可以删除特定的错误事务，也可以删除入站服务器的所有错误事务。">删除应用错误事务</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72897"></a><div class="props_rev_3"><a id="GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030" name="GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030"></a><h5 id="XSTRM-GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030" class="sect5"><span class="enumeration_section">10.7.3.2</span>删除入站服务器的所有错误事务</h5>
                     <div>
                        <p>如果不应用任何错误事务，则可以通过在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">DELETE_ALL_ERRORS</code>过程来删除所有错误事务。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030__GUID-B58ABD2C-25D6-48A1-9600-3275AB0A68B4">要删除入站服务器的所有错误事务：</p>
                           <ol>
                              <li>
                                 <p>在SQL * Plus中，以XStream管理员身份连接到数据库。</p>
                                 <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在<code class="codeph">DBMS_APPLY_ADM</code>程序包中运行<code class="codeph">DELETE_ALL_ERRORS</code>过程，并指定入站服务器的名称。
                                 </p>
                                 <p>要删除名为<code class="codeph">xin</code>的入站服务器的所有错误事务，请运行以下过程：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_APPLY_ADM.DELETE_ALL_ERRORS（apply_name =&gt;'xin'）;</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnote" id="GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030__GUID-1583AEAC-1808-4706-BC97-E57063AFFFA9">
                              <p class="notep1">注意：</p>
                              <p>如果为<code class="codeph">apply_name</code>参数指定<code class="codeph">NULL</code> ，并且您有多个入站服务器，则会删除所有入站服务器的所有应用错误。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" title="您可以删除特定的错误事务，也可以删除入站服务器的所有错误事务。">删除应用错误事务</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="XSTRM72578"></a><a id="XSTRM72579"></a><a id="XSTRM72565"></a><div class="props_rev_3"><a id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024" name="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024"></a><h4 id="XSTRM-GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024" class="sect4"><span class="enumeration_section">10.7.4</span>管理入站服务器遇到的急切错误</h4>
                  <div>
                     <p>作为性能优化，入站服务器可以使用eager apply在接收提交LCR之前开始应用大型事务。</p>
                     <div class="section">
                        <p>有关急切申请的信息，请参阅<span class="q">“ <a href="xstream-in-concepts.html#GUID-F4C53B30-8D18-4E52-BC9A-91F5A4A422A8" title="对于小事务，XStream In不会开始应用逻辑更改记录（LCR），直到入站服务器从源接收事务的提交LCR。作为性能优化，入站服务器可以使用eager apply在接收提交LCR之前开始应用大型事务。">为大型事务优化性能中的XStream</a> ”</span> 。
                        </p>
                        <p>急切地应用事务时，入站服务器可能会遇到错误。由于所有LCR都不可用于此事务，因此会记录此失败事务的<code class="codeph">EAGER</code> <code class="codeph">ERROR</code> 。在这种情况下， <code class="codeph">ALL_APPLY_ERROR</code>视图中的条目显示事务的急切错误，但LCR未记录在错误队列中。如果错误事务不是急切的错误事务，那么它被称为正常错误事务。
                        </p>
                        <p>必须以不同方式管理正常错误事务和急切错误事务。入站服务器将正常错误事务（包括其所有LCR）移动到错误队列，但入站服务器不会将急切错误事务移动到错误队列。</p>
                        <p>急切的错误会导致入站服务器停止。重新启动时，如果错误队列具有重新启动事务的<code class="codeph">EAGER</code> <code class="codeph">ERROR</code> ，则事务将作为正常事务启动。也就是说，大事务中的LCR溢出到磁盘，并且入站服务器仅在收到提交LCR后才开始应用它们。
                        </p>
                        <p>以下语句适用于正常错误事务和急切错误事务：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ALL_APPLY_ERROR</code>和<code class="codeph">ALL_APPLY_ERROR_MESSAGES</code>视图包含有关错误事务的信息（元数据）。
                              </p>
                           </li>
                           <li>
                              <p>入站服务器不应用错误事务。</p>
                           </li>
                        </ul>
                        <p><a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJHFIBE" title="此表描述了正常错误事务的可用操作，执行操作的机制以及每个操作的说明。">表10-3</a>说明了管理正常错误事务的选项。
                        </p>
                        <div class="tblformal" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJHFIBE">
                           <p class="titleintable">表10-3可用于管理正常错误事务的选项</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="可用于管理正常错误事务的选项" width="100%" border="1" summary="This table describes the available actions for a normal error transaction, the mechanisms for performing the actions, and a description of each action." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d49348e8368">行动</th>
                                    <th align="left" valign="bottom" width="40%" id="d49348e8371">机制</th>
                                    <th align="left" valign="bottom" width="35%" id="d49348e8374">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d49348e8379" headers="d49348e8368 ">
                                       <p>删除错误事务</p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d49348e8379 d49348e8371 ">
                                       <p><code class="codeph">DBMS_APPLY_ADM.DELETE_ERROR</code></p>
                                       <p><code class="codeph">DBMS_APPLY_ADM.DELETE_ALL_ERRORS</code></p>
                                       <p>Oracle企业管理器云控制</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d49348e8379 d49348e8374 ">
                                       <p>将从错误队列中删除错误事务，并删除有关错误事务的元数据。重新启动入站服务器时，入站服务器不会尝试重新执行该事务。交易未适用。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d49348e8395" headers="d49348e8368 ">
                                       <p>执行错误事务</p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d49348e8395 d49348e8371 ">
                                       <p><code class="codeph">DBMS_APPLY_ADM.EXECUTE_ERROR</code></p>
                                       <p><code class="codeph">DBMS_APPLY_ADM.EXECUTE_ALL_ERRORS</code></p>
                                       <p>Oracle企业管理器云控制</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d49348e8395 d49348e8374 ">
                                       <p>执行错误队列中的错误事务。如果执行期间没有错误，则应用事务。如果LCR在执行期间引发错误，则将正常错误事务移回错误队列。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d49348e8411" headers="d49348e8368 ">
                                       <p>保留错误事务</p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d49348e8411 d49348e8371 ">
                                       <p>没有。（错误事务会自动保留。）</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d49348e8411 d49348e8374 ">
                                       <p>即使重新启动入站服务器，错误事务仍保留在错误队列中。还保留有关错误事务的元数据。交易未适用。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJIGGEC" title="此表描述了急切错误事务的可用操作，执行操作的机制以及每个操作的说明。">表10-4</a>说明了管理急切错误事务的选项。
                        </p>
                        <div class="tblformal" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJIGGEC">
                           <p class="titleintable">表10-4可用于管理Eager错误事务的选项</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="可用于管理Eager错误事务的选项" width="100%" border="1" summary="This table describes the available actions for an eager error transaction, the mechanisms for performing the actions, and a description of each action." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d49348e8437">行动</th>
                                    <th align="left" valign="bottom" width="39%" id="d49348e8440">机制</th>
                                    <th align="left" valign="bottom" width="36%" id="d49348e8443">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d49348e8448" headers="d49348e8437 ">
                                       <p>删除错误事务</p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d49348e8448 d49348e8440 ">
                                       <p><code class="codeph">DBMS_APPLY_ADM.DELETE_ERROR</code></p>
                                       <p><code class="codeph">DBMS_APPLY_ADM.DELETE_ALL_ERRORS</code></p>
                                       <p>Oracle企业管理器云控制</p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d49348e8448 d49348e8443 ">
                                       <p>关于急切错误事务的元数据将被删除。重新启动入站服务器时，它会尝试将事务作为急切事务执行。如果入站服务器在执行期间未遇到错误，则成功应用事务。如果入站服务器在执行期间遇到错误，则会记录急切错误事务。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d49348e8464" headers="d49348e8437 ">
                                       <p>保留错误交易</p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d49348e8464 d49348e8440 ">
                                       <p>没有。（自动保留有关错误事务的元数据。）</p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d49348e8464 d49348e8443 ">
                                       <p>保留有关急切错误事务的元数据。重新启动入站服务器时，它会尝试将该事务作为普通事务执行。</p>
                                       <p>具体来说，入站服务器将事务溢出到磁盘并尝试执行事务。如果入站服务器在执行期间未遇到错误，则成功应用事务。如果入站服务器在执行期间遇到错误，则事务将成为正常的错误事务。在这种情况下，引发错误的LCR和事务中的所有其他LCR都将移至错误队列。将正常错误事务移动到错误队列后，您必须将错误事务管理为正常错误事务（而不是急切错误事务）。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-4C447526-C60F-4DAC-A782-B212E68FC698">
                           <p class="notep1">注意：</p>
                           <p>如果尝试使用<code class="codeph">DBMS_APPLY_ADM</code>程序包或Oracle Enterprise Manager Cloud Control手动执行急切错误事务，则会引发以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-26909：无法重新执行急切错误</pre><p>无法手动执行急切错误事务。相反，它在启用入站服务器时自动执行。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-7FCB7186-1ED8-4F6D-A129-8E74F23AC444">要管理入站服务器遇到的急切错误事务，请执行以下操作：</p>
                        <ol>
                           <li>
                              <p>以XStream管理员身份连接到入站服务器数据库。</p>
                              <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>查询<code class="codeph">ALL_APPLY_ERROR</code>数据字典视图中的<code class="codeph">ERROR_TYPE</code>列：</p><pre class="oac_no_warn" dir="ltr">SELECT APPLY_NAME，ERROR_TYPE FROM ALL_APPLY_ERROR;</pre><p>根据错误类型遵循相应的说明：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果<code class="codeph">ERROR_TYPE</code>列显示<code class="codeph">EAGER</code> <code class="codeph">ERROR</code> ，则继续执行步骤<a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJJFFBG">3</a> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果<code class="codeph">ERROR_TYPE</code>列显示<code class="codeph">NULL</code> ，则应用错误不是急切错误，您无法使用本节中的说明进行管理。而是使用<span class="q">“ <a href="managing-xstream-in.html#GUID-FCD1CE21-0A24-4A32-B22A-784605237D86" title="您可以重试特定的错误事务，也可以重试入站服务器的所有错误事务。">重试应用错误事务</a> ”</span>和<span class="q">“ <a href="managing-xstream-in.html#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" title="您可以删除特定的错误事务，也可以删除入站服务器的所有错误事务。">删除应用错误事务</a> ”中的说明</span> 。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJJFFBG">
                              <p>检查LCR引发的错误消息，并确定错误原因。</p>
                              <div class="infoboxnotealso" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-E2F9FFB0-A074-4E5B-9301-819DAAA8D7BE">
                                 <p class="notep1">也可以看看：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="q">“ <a href="monitoring-xstream-in.html#GUID-43A987B4-7F6C-4BC3-A813-F6E062175207" title="示例说明了检查应用错误。">检查应用错误</a> ”</span>和<span class="q">“ <a href="monitoring-xstream-in.html#GUID-505C729C-5893-4B22-A981-33BF3084C67B" title="SQL scripts display detailed information about the error transactions in the error queue in a database.">显示有关应用错误的详细信息</a> ”，</span>以获取有关使用数据字典视图检查<span class="q"><a href="monitoring-xstream-in.html#GUID-505C729C-5893-4B22-A981-33BF3084C67B" title="SQL脚本显示有关数据库中错误队列中的错误事务的详细信息。">应用错误</a></span>的信息</p>
                                    </li>
                                    <li>
                                       <p>Oracle Enterprise Manager Cloud Control联机帮助，提供有关使用Oracle Enterprise Manager Cloud Control检查应用错误的信息</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <p>如果可能，请确定如何避免错误，并进行必要的更改以避免错误。</p>
                              <div class="infoboxnotealso" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-20B1B858-7D10-46F4-9610-4111D337DA03">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="troubleshooting-xstream-in.html#GUID-5A6A993B-2196-4D5A-BB8A-9E5A8E2B641D" title="您可以使用XStream In配置诊断和更正问题。">XStream In故障排除</a> ”</span> ，了解有关常见应用错误及其解决方案的信息</p>
                              </div>
                           </li>
                           <li id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJECFGC">
                              <p>保留错误事务或删除错误事务：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>仅在纠正问题后才删除错误事务。入站服务器在启用时会重新执行该事务。</p>
                                    <p>例如，要删除事务标识符为<code class="codeph">5.4.312</code>的事务，请运行以下过程：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_APPLY_ADM.DELETE_ERROR（local_transaction_id =&gt;'5.4.312'）;</pre></li>
                                 <li>
                                    <p>如果您现在无法解决问题或计划将来重新执行此问题，请保留错误事务。无需任何操作来保留错误事务。在重新执行或删除之前，它将保留在错误队列中。</p>
                                 </li>
                              </ul>
                              <p>有关这些选择的更多信息，请<a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJIGGEC" title="此表描述了急切错误事务的可用操作，执行操作的机制以及每个操作的说明。">参见表10-4</a> 。
                              </p>
                              <div class="infoboxnote" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-BA4360FA-8DBD-4826-B054-67F8F1A80311">
                                 <p class="notep1">注意：</p>
                                 <p>可能无法恢复已删除的正常错误事务。在删除错误事务之前，请确保错误类型为<code class="codeph">EAGER</code> <code class="codeph">ERROR</code> 。</p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-111B538F-4C39-4478-B64C-37EF20AD3B72">
                                 <p class="notep1">也可以看看：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>有关使用<code class="codeph">DBMS_APPLY_ADM</code>程序包<span class="q"><a href="managing-xstream-in.html#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" title="You can delete a specific error transaction, or you can delete all error transactions for an inbound server.">删除错误事务</a></span>的详细信息，请<span class="q">“ <a href="managing-xstream-in.html#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" title="您可以删除特定的错误事务，也可以删除入站服务器的所有错误事务。">删除应用错误事务</a> ”</span></p>
                                    </li>
                                    <li>
                                       <p>有关使用Oracle Enterprise Manager Cloud Control删除错误事务的信息，请参阅Oracle Enterprise Manager Cloud Control联机帮助。</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <p>如果禁用入站服务器，则启动入站服务器。</p>
                              <p>查询<code class="codeph">ALL_APPLY_ERROR</code>视图中的<code class="codeph">STATUS</code>列以确定是启用还是禁用入站服务器。
                              </p>
                              <p>如果入站服务器的<code class="codeph">disable_on_error</code> apply参数设置为<code class="codeph">Y</code> ，则入站服务器在遇到错误时将被禁用并保持禁用状态。
                              </p>
                              <p>如果入站服务器的<code class="codeph">disable_on_error</code> apply参数设置为<code class="codeph">N</code> ，则入站服务器会在遇到错误时自动停止并重新启动。
                              </p>
                              <p>有关入站服务器如何根据您在步骤<a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJECFGC">5中</a>的选择处理错误事务的信息，请参阅<a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJIGGEC" title="此表描述了急切错误事务的可用操作，执行操作的机制以及每个操作的说明。">表10-4</a> 。
                              </p>
                              <div class="infoboxnotealso" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-624F121B-0F15-4536-92B5-68A5ED151CB7">
                                 <p class="notep1">也可以看看：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="q">“ <a href="managing-xstream-in.html#GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE" title="必须启用入站服务器才能从XStream客户端应用程序接收逻辑更改记录（LCR）并应用LCR。您在DBMS_APPLY_ADM程序包中运行START_APPLY过程以启动现有入站服务器。">启动入站服务器</a> ”</span>以获取有关启动入站服务器或使用<code class="codeph">DBMS_APPLY_ADM</code>程序包应用进程的信息</p>
                                    </li>
                                    <li>
                                       <p>Oracle Enterprise Manager Cloud Control联机帮助，提供有关使用Oracle Enterprise Manager Cloud Control启动入站服务器或应用进程的信息</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-FE92B8FF-5E3A-48C2-90CB-80AA0D734415">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=REFRN20008" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS73644" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" title="当入站服务器尝试应用LCR时，应用错误结果，并引发错误。">管理应用错误</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-1D97E873-3C82-4E2C-BBB0-C1049D7E5600" name="GUID-1D97E873-3C82-4E2C-BBB0-C1049D7E5600"></a><h3 id="XSTRM-GUID-1D97E873-3C82-4E2C-BBB0-C1049D7E5600" class="sect3"><span class="enumeration_section">10.8</span>冲突和错误处理优先顺序</h3>
               <div>
                  <p>要解决冲突或错误，入站服务器会尝试查找冲突处理程序和错误处理程序。</p>
                  <p>当入站服务器遇到冲突或错误时，它会尝试通过检查以指定顺序应用于错误的以下类型的处理程序来解决问题：</p>
                  <ol>
                     <li>
                        <p>使用<code class="codeph">SET_UPDATE_CONFLICT_HANDLER</code>过程设置的更新冲突处理程序</p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">SET_DML_CONFLICT_HANDLER</code>过程设置的自定义冲突处理程序</p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">HANDLE_COLLISIONS</code>过程设置的冲突处理程序</p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">SET_REPERROR_HANDLER</code>过程设置的错误处理程序</p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">SET_DML_HANDLER</code>过程设置的自定义冲突处理程序</p>
                     </li>
                  </ol>
                  <p>所有过程都在<code class="codeph">DBMS_APPLY_ADM</code>包中。
                  </p>
                  <p>如果没有处理程序应用于冲突或错误，则导致错误的事务将移至错误队列。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="您可以管理XStream In配置。">管理XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM72606"></a><a id="XSTRM72984"></a><a id="XSTRM1592"></a><div class="props_rev_3"><a id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4" name="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4"></a><h3 id="XSTRM-GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4" class="sect3"><span class="enumeration_section">10.9</span>在配置中删除XStream中的组件</h3>
               <div>
                  <p>你可以用降入站服务器<code class="codeph">DROP_INBOUND</code>在程序<code class="codeph">DBMS_XSTREAM_ADM</code>包。
                  </p>
                  <div class="section">
                     <p>此过程始终删除指定的入站服务器。如果满足以下两个条件，此过程也会丢弃入站服务器的队列：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对<code class="codeph">CREATE_INBOUND</code>过程的一次调用创建了入站服务器和队列。
                           </p>
                        </li>
                        <li>
                           <p>入站服务器是队列的唯一订户。</p>
                        </li>
                     </ul>
                     <p>如果不满足上述任一条件，则<code class="codeph">DROP_INBOUND</code>过程仅删除入站服务器。它不会丢弃队列。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4__GUID-E81E422B-E7B1-4D0A-AFC1-26DE11ED3D03">要删除入站服务器：</p>
                     <ol>
                        <li>
                           <p>以XStream管理员身份连接到入站服务器数据库。</p>
                           <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>运行<code class="codeph">DROP_INBOUND</code>过程。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>如果未自动删除入站服务器的队列，则运行<code class="codeph">REMOVE_QUEUE</code>过程以删除它。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4__GUID-2B58322E-2FE7-4D6C-BFF7-20F127B317A3">
                     <p class="titleinexample">示例10-12删除入站服务器</p>
                     <p>要删除名为<code class="codeph">xin</code>的入站服务器，请运行以下过程：</p><pre class="oac_no_warn" dir="ltr">exec DBMS_XSTREAM_ADM.DROP_INBOUND（'xin'）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4__GUID-DA403B94-5198-43A3-BB45-A1303E87559C">
                     <p class="titleinexample">示例10-13删除入站服务器的队列</p>
                     <p>要删除名为<code class="codeph">xin_queue</code>的队列，请运行以下过程：</p><pre class="oac_no_warn" dir="ltr">exec DBMS_XSTREAM_ADM.REMOVE_QUEUE（'xin_queue'）;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4__GUID-451C1154-5961-4C84-9EE2-15745DB53691">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS70200" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="您可以管理XStream In配置。">管理XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
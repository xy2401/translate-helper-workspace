<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_LIBCACHE package consists of one subprogram that prepares the library cache on an Oracle instance by extracting SQL and PL/SQL from a remote instance and compiling this SQL locally without execution. The value of compiling the cache of an instance is to prepare the information the application requires to execute in advance of failover or switchover."></meta>
      <meta name="description" content="The DBMS_LIBCACHE package consists of one subprogram that prepares the library cache on an Oracle instance by extracting SQL and PL/SQL from a remote instance and compiling this SQL locally without execution. The value of compiling the cache of an instance is to prepare the information the application requires to execute in advance of failover or switchover."></meta>
      <title>DBMS_LIBCACHE</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_LIBCACHE package consists of one subprogram that prepares the library cache on an Oracle instance by extracting SQL and PL/SQL from a remote instance and compiling this SQL locally without execution. The value of compiling the cache of an instance is to prepare the information the application requires to execute in advance of failover or switchover."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_LDAP_UTL.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_LOB.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_LDAP_UTL.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_LOB.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_LIBCACHE</li>
            </ol>
            <a id="GUID-607703D6-DC5C-4C81-A19D-37F6192A30C9" name="GUID-607703D6-DC5C-4C81-A19D-37F6192A30C9"></a><a id="ARPLS361"></a><a id="ARPLS361"></a>
            
            <h2 id="ARPLS-GUID-607703D6-DC5C-4C81-A19D-37F6192A30C9" class="sect2"><span class="enumeration_chapter">93</span> DBMS_LIBCACHE</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">The DBMS_LIBCACHE</code>包由一个子程序组成，该子程序通过从远程实例中提取SQL和PL / SQL并在本地编译此SQL而不执行来为Oracle实例上的库高速缓存做准备。编译实例的缓存的价值在于准备应用程序在故障转移或切换之前执行所需的信息。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_LIBCACHE.html#GUID-41874F35-C981-4796-B960-568D8B3740F5" title="编译共享游标包括打开，解析和绑定操作，以及在第一次执行时执行的类型检查和执行计划功能。所有这些步骤都由SELECT语句包DBMS_LIBCACHE预先执行。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LIBCACHE.html#GUID-3D6E608C-6A7C-4ABC-8F8B-170C3C836EE9" title="要执行DBMS_LIBCACHE，必须直接访问与SQL语句相同的对象。您可以通过使用与远程系统上的原始系统相同的用户ID来最好地完成此操作。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LIBCACHE.html#GUID-E9564359-D7F8-42B8-9690-19DB785ADC51" title="DBMS_LIBCACHE包中包含COMPILE_FROM_REMOTE过程子程序。">DBMS_LIBCACHE子程序的摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS66592"></a><a id="ARPLS66592"></a><div class="props_rev_3"><a id="GUID-41874F35-C981-4796-B960-568D8B3740F5" name="GUID-41874F35-C981-4796-B960-568D8B3740F5"></a><h3 id="ARPLS-GUID-41874F35-C981-4796-B960-568D8B3740F5" class="sect3"><span class="enumeration_section">93.1</span> DBMS_LIBCACHE概述</h3>
               <div>
                  <p>编译共享游标包括打开，解析和绑定操作，以及在第一次执行时执行的类型检查和执行计划功能。所有这些步骤都由<code class="codeph">SELECT</code>语句包<code class="codeph">DBMS_LIBCACHE</code>预先执行。
                  </p>
                  <div class="section">
                     <p>对PL / SQL和DML预先执行open和parse函数。对于PL / SQL，执行解析阶段具有加载除<code class="codeph">MCODE</code>之外的所有库高速缓存堆的<code class="codeph">MCODE</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS66593"></a><a id="ARPLS66593"></a><div class="props_rev_3"><a id="GUID-3D6E608C-6A7C-4ABC-8F8B-170C3C836EE9" name="GUID-3D6E608C-6A7C-4ABC-8F8B-170C3C836EE9"></a><h3 id="ARPLS-GUID-3D6E608C-6A7C-4ABC-8F8B-170C3C836EE9" class="sect3"><span class="enumeration_section">93.2</span> DBMS_LIBCACHE安全模型</h3>
               <div>
                  <p>要执行<code class="codeph">DBMS_LIBCACHE</code> ，必须直接访问与SQL语句相同的对象。您可以通过使用与远程系统上的原始系统相同的用户ID来最好地完成此操作。
                  </p>
                  <div class="section">
                     <p>当有多个架构用户时，应为每个用户调用<code class="codeph">DBMS_LIBCACHE</code> 。
                     </p>
                     <p>或者，可以使用通用用户<code class="codeph">PARSER</code>调用<code class="codeph">DBMS_LIBCACHE</code> 。但是，此用户无法解析使用具有角色授予的访问权限的对象的SQL。这是标准的PL / SQL安全限制。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS66594"></a><a id="ARPLS66595"></a><a id="ARPLS66595"></a><a id="ARPLS66594"></a><div class="props_rev_3"><a id="GUID-E9564359-D7F8-42B8-9690-19DB785ADC51" name="GUID-E9564359-D7F8-42B8-9690-19DB785ADC51"></a><h3 id="ARPLS-GUID-E9564359-D7F8-42B8-9690-19DB785ADC51" class="sect3"><span class="enumeration_section">93.3</span> DBMS_LIBCACHE子程序摘要</h3>
               <div>
                  <p><code class="codeph">DBMS_LIBCACHE</code>包中包含<code class="codeph">COMPILE_FROM_REMOTE</code>过程子程序。
                  </p>
                  <div class="tblformal" id="GUID-E9564359-D7F8-42B8-9690-19DB785ADC51__GUID-DF105020-81CC-45A9-B6BA-80EC74623364">
                     <p class="titleintable">表93-1 <span class="italic"><span class="bold">DBMS_LIBCACHE包子程序</span></span></p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_LIBCACHE包子程序" width="100%" border="1" summary="This table lists the DBMS_LIBCACHE subprogram and briefly describes it." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="40%" id="d488706e436">子程序</th>
                              <th align="left" valign="bottom" width="60%" id="d488706e439">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="40%" id="d488706e444" headers="d488706e436 ">
                                 <p><a href="DBMS_LIBCACHE.html#GUID-CC095332-7762-45FD-8236-FEE68E7301FB" title="此过程从源实例批量提取SQL，并在目标实例上编译SQL。">COMPILE_FROM_REMOTE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="60%" headers="d488706e444 d488706e439 ">
                                 <p>从源实例批量提取SQL并在目标实例上编译SQL</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS66596"></a><a id="ARPLS66597"></a><a id="ARPLS66597"></a><a id="ARPLS66596"></a><div class="props_rev_3"><a id="GUID-CC095332-7762-45FD-8236-FEE68E7301FB" name="GUID-CC095332-7762-45FD-8236-FEE68E7301FB"></a><h4 id="ARPLS-GUID-CC095332-7762-45FD-8236-FEE68E7301FB" class="sect4"><span class="enumeration_section">93.3.1</span> COMPILE_FROM_REMOTE过程</h4>
                  <div>
                     <p>此过程从源实例批量提取SQL，并在目标实例上编译SQL。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-CC095332-7762-45FD-8236-FEE68E7301FB__GUID-6A2F1E32-0A17-4BC2-9852-507656108951">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LIBCACHE.COMPILE_FROM_REMOTE（p_db_link IN dbms_libcache $ def.db_link％type，p_username IN VARCHAR2 default null，p_threshold_executions IN NATURAL default 3，p_threshold_sharable_mem IN NATURAL default 1000，p_parallel_degree IN NATURAL default 1）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CC095332-7762-45FD-8236-FEE68E7301FB__GUID-99F13609-1995-4907-B38E-72EB4585860C">参数</p>
                        <div class="tblformal" id="GUID-CC095332-7762-45FD-8236-FEE68E7301FB__GUID-2BD1FCC1-8C40-4CFE-908C-2481D187EF6F">
                           <p class="titleintable">表93-2 COMPILE_FROM_REMOTE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="COMPILE_FROM_REMOTE过程参数" width="100%" border="1" summary="This table describes the parameters of DBMS_LIBCACHE.COMPILE_FROM_REMOTE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="40%" id="d488706e565">参数</th>
                                    <th align="left" valign="bottom" width="60%" id="d488706e568">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d488706e573" headers="d488706e565 ">
                                       <p><code class="codeph">p_db_link</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d488706e573 d488706e568 ">
                                       <p>数据库链接到源名称（必填）。指向将用于提取SQL语句的实例的数据库链接。用户必须在源实例上具有<code class="codeph">SELECT_ON_CATALOG</code>角色。为了提高安全性，连接可以使用密码文件或LDAP身份验证。数据库链接仅对具有<code class="codeph">dbms_libcache$def.版本是必需的<code class="codeph">dbms_libcache$def.ACCESS_METHOD = DB_LINK_METHOD</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d488706e586" headers="d488706e565 ">
                                       <p><code class="codeph">p_instance_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d488706e586 d488706e568 ">
                                       <p>（保留供将来使用）。将用于提取SQL语句的实例的名称。对于除本地实例之外的所有实例，实例名称必须是唯一的。该名称不区分大小写。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d488706e594" headers="d488706e565 ">
                                       <p><code class="codeph">p_username</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d488706e594 d488706e568 ">
                                       <p>源用户名（默认为所有用户）。将用于提取SQL语句的用户名。username是一个可选参数，用于确保解析用户标识与源实例上的相同。对于用户作为单个<code class="codeph">user_id</code>连接的应用程序，例如<code class="codeph">APPS</code> ， <code class="codeph">APPS</code>是记录在共享池中的解析<code class="codeph">user_id</code> 。要仅选择由<code class="codeph">APPS</code>解析的SQL语句，请在此字段中输入字符串“APPS”。要同时选择批处理执行的语句，请使用架构所有者（例如GL）重复执行该过程。如果提供了用户名，则必须有效。该名称不区分大小写。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d488706e617" headers="d488706e565 ">
                                       <p><code class="codeph">p_threshold_executions</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d488706e617 d488706e568 ">
                                       <p>执行次数的下限，低于该值时，不会选择SQL语句进行解析。此参数是可选的。它允许应用程序使用执行来提取和编译语句，例如，大于3。默认值为1。这意味着将不会提取从未执行过的SQL语句，包括无效的SQL语句。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d488706e625" headers="d488706e565 ">
                                       <p><code class="codeph">p_threshold_sharable_mem</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d488706e625 d488706e568 ">
                                       <p>源实例上游标消耗的共享内存大小的下限。低于此值，将不会选择SQL语句进行解析。此参数是可选的。它允许应用程序使用共享内存提取和编译语句，例如，大于10000字节。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d488706e633" headers="d488706e565 ">
                                       <p><code class="codeph">p_parallel_degree</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d488706e633 d488706e568 ">
                                       <p>执行以完成解析操作的并行作业数。这些任务是针对选择用于解析的SQL语句的子范围生成的并行作业。此参数保留用于当前未实现的并行编译作业。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>PL / SQL源文本环绕</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database PL/SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database PL/SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-13T20:26:20-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96448-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DROP-TYPE-BODY-statement.html" title="Previous" type="text/html"></link>
      <link rel="next" href="plsql-name-resolution.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="LNPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DROP-TYPE-BODY-statement.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="plsql-name-resolution.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库PL / SQL语言参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">PL / SQL源文本环绕</li>
            </ol>
            <a id="GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2" name="GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2"></a><a id="LNPLS2148"></a><a id="LNPLS016"></a>
            
            <h2 id="LNPLS-GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2" class="sect2"><span class="enumeration_chapter">PL</span> / SQL源文字环绕</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以为任何这些存储的PL / SQL单元包装PL / SQL源文本，从而防止任何人使用静态数据字典视图<code class="codeph">*_SOURCE</code>显示该文本：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>包装规格</p>
                  </li>
                  <li>
                     <p>包体</p>
                  </li>
                  <li>
                     <p>型号规格</p>
                  </li>
                  <li>
                     <p>输入正文</p>
                  </li>
                  <li>
                     <p>功能</p>
                  </li>
                  <li>
                     <p>程序</p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2__GUID-5CEE4A3A-3009-460C-9E0E-70D88AD779DD">
                  <p class="notep1">注意：</p>
                  <p>包装文本是低保证安全性。要获得高可靠性安全性，请使用<a href="../dvadm/introduction-to-oracle-database-vault.html#DVADM-GUID-0C8AF1B2-6CE9-4408-BFB3-7B2C7F9E7284" target="_blank"><span class="italic">Oracle Database Vault管理员指南中</span></a>所述的<a href="../dvadm/introduction-to-oracle-database-vault.html#DVADM-GUID-0C8AF1B2-6CE9-4408-BFB3-7B2C7F9E7284" target="_blank"><span class="italic">Oracle Database Vault</span></a> 。
                  </p>
               </div>
               <p>包含包装的PL / SQL源文本的<span class="bold">文件</span>称为<span class="bold">包装文件</span> 。可以通过SQL * Plus或导入和导出实用程序移动，备份或处理包装文件。
               </p>
               <p>要生成包装文件，请使用PL / SQL Wrapper实用程序或<code class="codeph">DBMS_DDL</code>子程序。PL / SQL Wrapper实用程序包装由指定SQL文件创建的每个可包装PL / SQL单元的源文本。<code class="codeph">DBMS_DDL</code>子程序包装单个动态生成的可包装PL / SQL单元的源文本。
               </p>
               <p>PL / SQL Wrapper实用程序和<code class="codeph">DBMS_DDL</code>子程序都检测标记化错误（例如，失控字符串），但不检测语法或语义错误（例如，不存在的表或视图）。
               </p>
               <p>默认情况下，12.2 PL / SQL编译器可以使用使用9.2 PL / SQL编译器编译的包装包。要防止12.2 PL / SQL编译器使用使用9.2 PL / SQL编译器编译的包装包，请将PL / SQL编译参数<code class="codeph">PERMIT_92_WRAP_FORMAT</code>为<code class="codeph">FALSE</code> 。有关<code class="codeph">PERMIT_92_WRAP_FORMAT</code>更多信息，请参阅<a href="../refrn/PERMIT_92_WRAP_FORMAT.html#REFRN10317" target="_blank"><span class="italic">Oracle数据库参考</span></a> 。有关PL / SQL编译参数的详细信息，请参阅<span class="q">“ <a href="overview.html#GUID-DF63BC59-22C2-4BA8-9240-F74D505D5102" title="PL / SQL单元受PL / SQL编译参数（一类数据库初始化参数）的影响。不同的PL / SQL单元（例如，包规范及其主体）可以具有不同的编译参数设置。">PL / SQL单元和编译参数</a> ”</span> 。
               </p>
               <div class="section">
                  <p class="subhead1" id="GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2__GUID-23F328FA-AA60-41E1-B532-4D57731CCF3C">话题</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="plsql-source-text-wrapping.html#GUID-C37788E2-0F5D-430B-8D9C-6CD708223C93">PL / SQL源文本环绕限制</a></p>
                     </li>
                     <li>
                        <p><a href="plsql-source-text-wrapping.html#GUID-95FE6D1A-8D8E-4F26-949C-D5583F8D4E2A">PL / SQL源文本环绕指南</a></p>
                     </li>
                     <li>
                        <p><a href="plsql-source-text-wrapping.html#GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2" title="PL / SQL Wrapper实用程序获取单个SQL文件（例如SQL * Plus脚本）并生成一个等效的文本文件，其中包含每个可包装的PL / SQL单元的PL / SQL源文本。">使用PL / SQL包装器实用程序包装PL / SQL源文本</a></p>
                     </li>
                     <li>
                        <p><a href="plsql-source-text-wrapping.html#GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE">使用DBMS_DDL子程序包装PL / SQL源文本</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div><a id="LNPLS1744"></a><div class="props_rev_3"><a id="GUID-C37788E2-0F5D-430B-8D9C-6CD708223C93" name="GUID-C37788E2-0F5D-430B-8D9C-6CD708223C93"></a><h3 id="LNPLS-GUID-C37788E2-0F5D-430B-8D9C-6CD708223C93" class="sect3"><span class="enumeration_section">A.1</span> PL / SQL源文本环绕限制</h3>
               <div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Oracle数据库版本之间的包装文件不向下兼容。</p>
                        <p>例如，您无法将版本<span class="italic">为</span> .1 PL / SQL Wrapper实用程序生成的文件加载到版本（ <span class="italic">n</span> -1）.2 Oracle数据库中。您也可以加载版本<span class="italic">N</span> 0.2 PL / SQL包装实用为版本<span class="italic">n</span> 0.1 Oracle数据库生成的文件。包装文件在补丁集中向上和向下兼容。
                        </p>
                     </li>
                     <li>
                        <p>包装PL / SQL源文本不是隐藏密码或表名的安全方法。</p>
                        <p>要获得高可靠性安全性，请使用<a href="../dvadm/introduction-to-oracle-database-vault.html#DVADM-GUID-0C8AF1B2-6CE9-4408-BFB3-7B2C7F9E7284" target="_blank"><span class="italic">Oracle Database Vault管理员指南中</span></a>所述的<a href="../dvadm/introduction-to-oracle-database-vault.html#DVADM-GUID-0C8AF1B2-6CE9-4408-BFB3-7B2C7F9E7284" target="_blank"><span class="italic">Oracle Database Vault</span></a> 。
                        </p>
                     </li>
                     <li>
                        <p>您无法包装触发器的PL / SQL源文本。</p>
                        <p>要隐藏触发器的实现细节，请将它们放在存储的子程序中，包装子程序，并写入调用子程序的单行触发器。</p>
                     </li>
                  </ul>
               </div>
            </div><a id="LNPLS1743"></a><div class="props_rev_3"><a id="GUID-95FE6D1A-8D8E-4F26-949C-D5583F8D4E2A" name="GUID-95FE6D1A-8D8E-4F26-949C-D5583F8D4E2A"></a><h3 id="LNPLS-GUID-95FE6D1A-8D8E-4F26-949C-D5583F8D4E2A" class="sect3"><span class="enumeration_section">A.2</span> PL / SQL源文本环绕指南</h3>
               <div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>仅包装包装或类型的主体，而不是规格。</p>
                        <p>将规范解包后，其他开发人员可以查看使用该包或类型所需的信息（参见<a href="plsql-source-text-wrapping.html#GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__CEGICAJG">示例A-5</a> ）。包裹身体可以防止他们看到包或类型实现。
                        </p>
                     </li>
                     <li>
                        <p>仅在完成编辑后包装文件。</p>
                        <p>您无法编辑包装文件。如果包装文件需要更改，则必须编辑原始的未包装文件，然后将其包装。</p>
                     </li>
                     <li>
                        <p>在分发包装文件之前，请在文本编辑器中查看它，并确保包装所有重要部分。</p>
                     </li>
                  </ul>
               </div>
            </div><a id="LNPLS2149"></a><a id="LNPLS2150"></a><a id="LNPLS2151"></a><a id="LNPLS01602"></a><div class="props_rev_3"><a id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2" name="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2"></a><h3 id="LNPLS-GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2" class="sect3"><span class="enumeration_section">A.3</span>使用PL / SQL包装器实用程序包装PL / SQL源文本</h3>
               <div>
                  <p>PL / SQL Wrapper实用程序获取单个SQL文件（例如SQL * Plus脚本）并生成一个等效的文本文件，其中包含每个可包装的PL / SQL单元的PL / SQL源文本。</p>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2__GUID-BBBE49D6-CDFC-4075-AB97-EDDD17F42832">
                        <p class="notep1">注意：</p>
                        <p>Oracle建议使用PL / SQL Wrapper Utility版本10或更高版本。</p>
                     </div>
                     <p>有关可换行PL / SQL单元的列表，请参阅<span class="q">“ <a href="plsql-source-text-wrapping.html#GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2" title="PL / SQL Wrapper实用程序获取单个SQL文件（例如SQL * Plus脚本）并生成一个等效的文本文件，其中包含每个可包装的PL / SQL单元的PL / SQL源文本。">PL / SQL源文本换行</a> ”简介</span> 。
                     </p>
                     <p>PL / SQL Wrapper实用程序无法连接到Oracle数据库。要运行PL / SQL Wrapper实用程序，请在操作系统提示符下输入此命令（等号周围没有空格）：</p><pre class="oac_no_warn" dir="ltr">wrap iname = <span class="italic">input_file</span> [oname = <span class="italic">output_file</span> ] [keep_comments = yes]</pre><p><span class="italic"><code class="codeph">input_file</code></span>是包含任何SQL语句组合的现有文件的名称。 <span class="italic"><code class="codeph">output_file</code></span>是PL / SQL Wrapper实用程序创建的文件的名称 - 包装文件。
                     </p>
                     <div class="infoboxnote" id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2__GUID-88AA92F0-FB95-41E5-9210-0A3EC2655E46">
                        <p class="notep1">注意：</p>
                        <p><span class="italic"><code class="codeph">input_file</code></span>不能包含使用SQL * Plus <code class="codeph">DEFINE</code>表示法指定的替换变量，因为<span class="italic"><code class="codeph">output_file</code></span>由PL / SQL编译器解析，而不是由SQL * Plus解析。
                        </p>
                     </div>
                     <p>除非指定了<code class="codeph">keep_comments=yes</code>否则PL / SQL Wrapper实用程序将删除包装文件中的所有注释。当指定<code class="codeph">keep_comments=yes</code> ，仅保留源外的注释。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2__GUID-6D155B76-8039-49A3-9ECC-E946F02D2063">
                        <p class="notep1">注意：</p>
                        <p>如果<span class="italic"><code class="codeph">input_file</code></span>是包装文件，则<span class="italic"><code class="codeph">input_file</code></span>和<span class="italic"><code class="codeph">output_file</code></span>具有相同的内容。
                        </p>
                     </div>
                     <p><span class="italic"><code class="codeph">input_file</code></span>的默认文件扩展名是<code class="codeph">sql</code> 。<span class="italic"><code class="codeph">output_file</code></span>的默认名称是<span class="italic"><code class="codeph">input_file</code></span> <code class="codeph">.plb</code> 。因此，这些命令是等效的：</p><pre class="oac_no_warn" dir="ltr">wrap iname = / mydir / myfile wrap iname = / mydir / myfile.sql oname = / mydir / myfile.plb</pre><p>此示例为<span class="italic"><code class="codeph">input_file</code></span>指定了不同的文件扩展名，并为<span class="italic"><code class="codeph">output_file</code></span>指定了不同的名称：</p><pre class="oac_no_warn" dir="ltr">wrap iname = / mydir / myfile <span class="bold">.src</span> oname = <span class="bold">/yourdir/yourfile.out</span> keep_comments = yes</pre><p>您可以在SQL * Plus中将<span class="italic"><code class="codeph">output_file</code></span>作为脚本运行。例如：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ myfile.plb;</pre></div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2__CEGCHAJJ">
                     <p class="titleinexample">示例A-1具有两个可换行PL / SQL单元的SQL文件</p>
                     <p>此示例显示了一个SQL文件<code class="codeph">wraptest2.sql</code>的文本，其中包含两个可装入的PL / SQL单元 - 过程<code class="codeph">wraptest</code>和函数<code class="codeph">fibonacci</code> 。该文件还包含注释和SQL <code class="codeph">SELECT</code>语句。
                     </p><pre class="oac_no_warn" dir="ltr"><span class="bold">- 以下声明不会改变。</span>SELECT COUNT（*）FROM EMPLOYEES // <span class="bold">*将包装以下两个CREATE语句的PL / SQL源文本。* /</span> CREATE PROCEDURE wraptest AUTHID CURRENT_USER / *程序声明中的C样式注释* / IS TYPE emp_tab IS员工表％ROWTYPE INDEX BY PLS_INTEGER; all_emps emp_tab; BEGIN SELECT * BULK收集来自员工的all_emps; FOR i IN 1..10 pl / sql源中的LOOP / * C样式* / DBMS_OUTPUT.PUT_LINE（'Emp Id：'|| all_emps（i）.employee_id）;结束循环;结束; /创建或替换函数fibonacci（n PLS_INTEGER）RETURN PLS_INTEGER AUTHID CURRENT_USER  - 在fibonacci函数规范中的PL / SQL样式注释IS fib_1 PLS_INTEGER：= 0; fib_2 PLS_INTEGER：= 1; BEGIN IF n = 1 THEN  - 终止条件RETURN fib_1; ELSIF n = 2然后返回fib_2; - 终止条件ELSE RETURN斐波那契（n-2）+斐波那契（n-1）; - 递归调用END IF;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2__CEGGEEFH">
                     <p class="titleinexample">示例A-2使用PL / SQL包装器实用程序包装文件</p>
                     <p>此示例使用PL / SQL Wrapper实用程序来包装<code class="codeph">wraptest2.sql</code>并显示包装文件<code class="codeph">wraptest2.plb</code> 。被包裹的文件显示，该实用程序删除的代码内的评论和包裹（由不可读）该过程的PL / SQL源文本<code class="codeph">wraptest</code>和功能<code class="codeph">fibonacci</code> ，但保留了包裹源以外的评论。
                     </p>
                     <p>假设操作系统提示符是<code class="codeph">&gt;</code> 。包装文件<code class="codeph">wraptest.sql</code> ：</p><pre class="oac_no_warn" dir="ltr">&gt; wrap keep_comments = yes iname = wraptest2.sql</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">将wraptest2.sql处理为wraptest2.plb</pre><p><code class="codeph">wraptest.plb</code>内容：</p><pre class="oac_no_warn" dir="ltr">- 以下声明不会改变。SELECT COUNT（*）FROM EMPLOYEES // *将包装以下两个CREATE语句的PL / SQL源文本。* / CREATE OR REPLACE PROCEDURE wraptest包裹a000000 1 ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD 7 129 138 qf4HggDBeNMPlWAsPn6pGf + 2LGwwg + nwJK5qZ3SVWE4 + GayDZaL1bF7RwYm2 / zr1qjZY3FrN 48M1bKc / MG5aY9YB + DrtT4SJN370Rpq7ck5D0sc1D5sKAwTyX13HYvRmjwkdXa0vEZ4q / MCU EQusX23UZbZjxha7CtlCDCx8guGw / M / oHZXc8wDHXL8V8OsqQMv / Hj7z68gINl7OstalRScr USZ /升/ W1YaaA9Lj8Fbx5 / nJw96ZNy1SCY8VsB / G6O5f / 65 + EDxdThpnfU4e1vrrE9iB3 / IPI + 7fE1Tv29fwc + aZq3S7O / CREATE OR REPLACE FUNCTION斐波纳契包裹a000000 1 ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD 8 150 FF BFDvTL9OR04SJbx + qOy5H / h8IcwwgxDcAJnWZ3TNz51mjAmegdQcpNJfq8hUuQtv1Y5xg7Wd KqMH / HBANhnZ + E1mBWekavYjPxlqV9zIFqZAgB4SBqkqe42sai9Vb0cLEU02 / ZCEyxDSfWf3 H1Lp6U9ztRXNy + oDZSNykWCUVLaZro0UmeFrNUBqzE6j9mI3AyRhPw1QbZX5oRMLgLOG3OtS SGJsz7M + bnhnp + xP4ww + SIlxx5LhDtnyPw == /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2__CEGGHABG">
                     <p class="titleinexample">示例A-3运行包装文件并查看包装的PL / SQL单元</p>
                     <p>在SQL * Plus中，此示例运行包装文件<code class="codeph">wraptest.plb</code> ，创建过程<code class="codeph">wraptest</code>和函数<code class="codeph">fibonacci</code> ;选择子程序的文本（包装，因此不可读），然后调用子程序。
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; <span class="bold">- 运行包装文件：</span> SQL&gt; SQL&gt; <span class="bold">@ wraptest2.plb</span> SQL&gt;  - 以下语句不会更改。SQL&gt; SQL&gt; SELECT COUNT（*）FROM EMPLOYEES 2 / COUNT（*）---------- 107选择1行。SQL&gt; / *将包装以下两个CREATE语句的PL / SQL源文本。* / SQL&gt; CREATE PROCEDURE wraptest wrapped 2 a000000 3 1 4 abcd 5 abcd 6 abcd 7 abcd 8 abcd 9 abcd 10 abcd 11 abcd 12 abcd 13 abcd 14 abcd 15 abcd 16 abcd 17 abcd 18 abcd 19 7 20 129 138 21 qf4HggDBeNMPlWAsPn6pGf + 2LGwwg + nwJK5qZ3SVWE4 + GayDZaL1bF7RwYm2 / zr1qjZY3FrN 22 48M1bKc / MG5aY9YB + DrtT4SJN370Rpq7ck5D0sc1D5sKAwTyX13HYvRmjwkdXa0vEZ4q / MCU 23 EQusX23UZbZjxha7CtlCDCx8guGw / M / oHZXc8wDHXL8V8OsqQMv / Hj7z68gINl7OstalRScr 24 USZ /升/ W1YaaA9Lj8Fbx5 / nJw96ZNy1SCY8VsB / G6O5f / 65 + EDxdThpnfU4e1vrrE9iB3 / IPI 25 + 7fE1Tv29fwc + aZq3S7O 26 27 / <span class="bold">过程创建。</span>SQL&gt;创建或替换函数fibonacci包裹2 a000000 3 1 4 abcd 5 abcd 6 abcd 7 abcd 8 abcd 9 abcd 10 abcd 11 abcd 12 abcd 13 abcd 14 abcd 15 abcd 16 abcd 17 abcd 18 abcd 19 8 20 150 ff 21 BFDvTL9OR04SJbx + qOy5H / h8IcwwgxDcAJnWZ3TNz51mjAmegdQcpNJfq8hUuQtv1Y5xg7Wd 22 KqMH / HBANhnZ + E1mBWekavYjPxlqV9zIFqZAgB4SBqkqe42sai9Vb0cLEU02 / ZCEyxDSfWf3 23 H1Lp6U9ztRXNy + oDZSNykWCUVLaZro0UmeFrNUBqzE6j9mI3AyRhPw1QbZX5oRMLgLOG3OtS 24 SGJsz7M + bnhnp + xP4ww + SIlxx5LhDtnyPw == 25 26 / <span class="bold">功能创建的。</span>SQL&gt; SQL&gt; <span class="bold">- 尝试显示过程源文本：</span> SQL&gt; SQL&gt; <span class="bold">SELECT text FROM USER_SOURCE WHERE name ='WRAPTEST';</span> TEXT ------------------------------------------------- ------------------------------- PROCEDURE wraptest <span class="bold">包裹</span> a000000 1 ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD 7 129 138 qf4HggDBeNMPlWAsPn6pGf + 2LGwwg + nwJK5qZ3SVWE4 + GayDZaL1bF7RwYm2 / zr1qjZY3FrN 48M1bKc / MG5aY9YB + DrtT4SJN370Rpq7ck5D0sc1D5sKAwTyX13HYvRmjwkdXa0vEZ4q / MCU EQusX23UZbZjxha7CtlCDCx8guGw / M / oHZXc8wDHXL8V8OsqQMv / Hj7z68gINl7OstalRScr USZ /升/ W1YaaA9Lj8Fbx5 / nJw96ZNy1SCY8VsB / G6O5f / 65 + EDxdThpnfU4e1vrrE9iB3 / IPI + 7fE1Tv29fwc + aZq3S7O 1行选择。SQL&gt; SQL&gt; <span class="bold">- 尝试显示函数源文本：</span> SQL&gt; SQL&gt; <span class="bold">SELECT text FROM USER_SOURCE WHERE name ='FIBONACCI';</span> TEXT ------------------------------------------------- ------------------------------- FUNCTION斐波那契<span class="bold">包裹</span> a000000 1 abcd abcd abcd abcd abcd abcd abcd abcd abcd abcd abcd abcd abcd abcd abcd ABCD 8个150 FF BFDvTL9OR04SJbx + qOy5H / h8IcwwgxDcAJnWZ3TNz51mjAmegdQcpNJfq8hUuQtv1Y5xg7Wd KqMH / HBANhnZ + E1mBWekavYjPxlqV9zIFqZAgB4SBqkqe42sai9Vb0cLEU02 / ZCEyxDSfWf3 H1Lp6U9ztRXNy + oDZSNykWCUVLaZro0UmeFrNUBqzE6j9mI3AyRhPw1QbZX5oRMLgLOG3OtS SGJsz7M + bnhnp + xP4ww + SIlxx5LhDtnyPw == 1选择的行。SQL&gt; SQL&gt; BEGIN 2 <span class="bold">wraptest; - 调用过程</span> 3 <span class="bold">DBMS_OUTPUT.PUT_LINE（'fibonacci（5）='|| fibonacci（5））;</span> 4结束; 5 / Emp Id：100 Emp Id：101 Emp Id：102 Emp Id：103 Emp Id：104 Emp Id：105 Emp Id：106 Emp Id：107 Emp Id：108 Emp Id：109 fibonacci（5）= 3 PL / SQL过程成功完成。SQL&gt;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="LNPLS1748"></a><a id="LNPLS2152"></a><a id="LNPLS01603"></a><div class="props_rev_3"><a id="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE" name="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE"></a><h3 id="LNPLS-GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE" class="sect3"><span class="enumeration_section">A.4</span>使用DBMS_DDL子程序包装PL / SQL源文本</h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">DBMS_DDL</code>包提供<code class="codeph">WRAP</code>函数和<code class="codeph">CREATE_WRAPPED</code>过程，每个过程包装单个动态生成的可装入PL / SQL单元的PL / SQL源文本。<code class="codeph">DBMS_DDL</code>包还提供异常<code class="codeph">MALFORMED_WRAP_INPUT</code> （ORA-24230），如果<code class="codeph">WRAP</code>或<code class="codeph">CREATE_WRAPPED</code>的输入不是有效的可装入PL / SQL单元，则会引发该异常。（有关可换行PL / SQL单元的列表，请参阅<span class="q">“ <a href="plsql-source-text-wrapping.html#GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2" title="PL / SQL Wrapper实用程序获取单个SQL文件（例如SQL * Plus脚本）并生成一个等效的文本文件，其中包含每个可包装的PL / SQL单元的PL / SQL源文本。">PL / SQL源文本换行</a> ”简介</span> 。）
                     </p>
                     <p>每个<code class="codeph">WRAP</code>函数都将一个<code class="codeph">CREATE</code>语句作为输入，该语句创建一个可装入的PL / SQL单元并返回一个等效的<code class="codeph">CREATE</code>语句，其中包含PL / SQL源文本。有关<code class="codeph">WRAP</code>函数的更多信息，请参见<a href="../arpls/DBMS_DDL.html#ARPLS66090" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                     </p>
                     <div class="infoboxnote" id="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__GUID-2903C4F7-7665-405B-8915-9F4D5816A3D0">
                        <p class="notep1">警告：</p>
                        <p>如果传递<code class="codeph">DBMS_DDL</code>语句。 <code class="codeph">WRAP</code>返回<code class="codeph">DBMS_SQL</code> 。 <code class="codeph">PARSE</code>过程的形式参数<code class="codeph">statement</code>数据类型为<code class="codeph">VARCHAR2A</code> ，那么必须设置<code class="codeph">DBMS_SQL</code>的<code class="codeph">lfflg</code>参数。 <code class="codeph">PARSE</code>到<code class="codeph">FALSE</code> 。否则， <code class="codeph">DBMS_SQL</code> 。 <code class="codeph">PARSE</code>将行添加到包装的PL / SQL单元中，从而破坏它。（有关语法<code class="codeph">DBMS_SQL</code> 。 <code class="codeph">PARSE</code> ，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnpls&amp;id=ARPLS68277" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。）
                        </p>
                     </div>
                     <p>每个<code class="codeph">CREATE_WRAPPED</code>过程执行其相应的<code class="codeph">WRAP</code>函数所执行的操作，然后运行返回的<code class="codeph">CREATE</code>语句，从而创建指定的PL / SQL单元。有关<code class="codeph">CREATE_WRAPPED</code>过程的详细信息，请参阅<a href="../arpls/DBMS_DDL.html#ARPLS66086" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                     </p>
                     <div class="infobox-tip" id="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__GUID-C62A8BC6-3B44-44FE-A0AA-4DDBCFC1A098">
                        <p class="notep1">小费：</p>
                        <p>当调用一个<code class="codeph">DBMS_DDL</code>子程序，使用完全合格的包名， <code class="codeph">SYS.DBMS_DDL</code> ，以避免名称冲突，如果有人创建了一个名为本地包<code class="codeph">DBMS_DDL</code>或定义了公共同义词<code class="codeph">DBMS_DDL</code> 。</p>
                     </div>
                     <div class="infoboxnote" id="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__GUID-22E126E5-1C5C-4F5E-A6E5-CE886F6F3A34">
                        <p class="notep1">注意：</p>
                        <p>输入到<code class="codeph">WRAP</code>函数或<code class="codeph">CREATE_WRAPPED</code>过程的<code class="codeph">CREATE</code>语句以调用子程序的用户的权限运行。
                        </p>
                     </div>
                     <p><a href="plsql-source-text-wrapping.html#GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__CEGJGBGE">示例A-4</a>使用<code class="codeph">CREATE_WRAPPED</code>过程动态创建包规范（使用<code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code>语句）和包装的包体。
                     </p>
                     <p><a href="plsql-source-text-wrapping.html#GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__CEGICAJG">示例A-5</a>选择<a href="plsql-source-text-wrapping.html#GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__CEGJGBGE">示例A-4</a>创建的包的文本<code class="codeph">emp_actions</code> ，然后调用过程<code class="codeph">emp_actions.raise_salary</code> 。如果包规范被包装，那么调用该过程所需的信息将是不可读的，如包体的PL / SQL源文本。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__CEGJGBGE">
                     <p class="titleinexample">示例A-4使用CREATE_WRAPPED过程创建包装的包体</p><pre class="oac_no_warn" dir="ltr">DECLARE package_text VARCHAR2（32767）; - 用于创建包规范和正文的文本FUNCTION generate_spec（pkgname VARCHAR2）RETURN VARCHAR2 AS BEGIN RETURN'CREATE PACKAGE'|| pkgname || 'AUTHID CURRENT_USER AS PROCEDURE raise_salary（emp_id NUMBER，NUMBER）;程序fire_employee（emp_id NUMBER）;结束'|| pkgname || ';'; END generate_spec; FUNCTION generate_body（pkgname VARCHAR2）RETURN VARCHAR2 AS BEGIN RETURN'CREATE PACKAGE BODY'|| pkgname || 'AS PROCEDURE raise_salary（emp_id NUMBER，NUMBER）是BEGIN UPDATE员工SET薪水=工资+金额WHERE employee_id = emp_id; END raise_salary;程序fire_employee（emp_id NUMBER）从员工开始删除WHERE employee_id = emp_id;结束fire_employee;结束'|| pkgname || ';'; END generate_body; BEGIN package_text：= generate_spec（'emp_actions'）; - 生成包规范EXECUTE IMMEDIATE package_text; - 创建包规范package_text：= generate_body（'emp_actions'）; - 生成包体<span class="bold">SYS.DBMS_DDL.CREATE_WRAPPED（package_text）; - 创建包裹体</span> END; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__CEGICAJG">
                     <p class="titleinexample">示例A-5使用包装正文查看包并调用包过程</p>
                     <p>选择包的文字：</p><pre class="oac_no_warn" dir="ltr">SELECT text FROM USER_SOURCE WHERE name ='EMP_ACTIONS';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">TEXT ------------------------------------------------- ----------------------- PACKAGE emp_actions AUTHID CURRENT_USER AS PROCEDURE raise_salary（emp_id NUMBER，amount NUMBER）;程序fire_employee（emp_id NUMBER）; END emp_actions; PACKAGE BODY emp_actions包裹a000000 1F ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD ABCD b 180 113 1fOVodewm7j9dBOmBsiEQz0BKCgwg / BKoZ4VZy / pTBIYo8Uj1sjpbEz08Ck3HMjYq / Mf0XZn u9D0Kd + i89g9ZO61I6vZYjw2AuBidnLESyR63LHZpFD / 7lyDTfF1eDY5vmNwLTXrFaxGy243 0lHKAzmOlwwfBWylkZZNi2UnpmSIe6z / BU2nhbwfpqd224p69FwYVXmFX2H5IMsdZ2 / vWsK9 cDMCD1KEqOnPpbU2yXdpW3GIbGD8JFIbKAfpJLkoLfVxoRPXQfj0h1k =</pre><p>调用<code class="codeph">raised_salary</code>并显示其效果：</p><pre class="oac_no_warn" dir="ltr">DECLARE s employees.salary％TYPE; BEGIN SELECT salary INTO s FROM FROM员工WHERE employee_id = 130; DBMS_OUTPUT.PUT_LINE（'旧工资：'|| s）; <span class="bold">emp_actions.raise_salary（130,100）;</span> SELECT salary INTO s FROM employees WHERE employee_id = 130; DBMS_OUTPUT.PUT_LINE（'新工资：'|| s）;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">旧工资：3557.4新工资：3657.4 PL / SQL程序顺利完成。</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
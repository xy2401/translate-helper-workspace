<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can configure the Oracle Database components that are used by XStream Out.">
      <meta name="description" content="You can configure the Oracle Database components that are used by XStream Out.">
      <title>Configuring XStream Out</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="XStream Guide ">
      <meta property="og:description" content="You can configure the Oracle Database components that are used by XStream Out.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="XStream Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xstream-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:45:15-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2009, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96280-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="xstream-out-concepts.html" title="Previous" type="text/html">
      <link rel="next" href="managing-xstream-out.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XStream Guide">
    <meta name="dcterms.isVersionOf" content="XSTRM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="xstream-out-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="managing-xstream-out.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">XStream Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="xstream-out.html" property="item" typeof="WebPage"><span property="name">XStream Out </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Configuring XStream Out</li>
            </ol>
            <a id="GUID-1338E648-E214-4666-98A1-8B8D0085EB23" name="GUID-1338E648-E214-4666-98A1-8B8D0085EB23"></a><a id="XSTRM1496"></a>
            
            <h2 id="XSTRM-GUID-1338E648-E214-4666-98A1-8B8D0085EB23" class="sect2"><span class="enumeration_chapter">4 </span>Configuring XStream Out
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can configure the Oracle Database components that are used by XStream Out.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-2E0A2D4F-9199-4E45-8EA5-EEF21074FF5D">Preparing for XStream Out</a><br>There are decisions to make and tasks to complete to prepare for an XStream Out configuration.
                  </li>
                  <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB">Configuring XStream Out</a><br>An outbound server in an XStream Out configuration streams Oracle database changes to a client application.
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-1338E648-E214-4666-98A1-8B8D0085EB23__GUID-D8162E35-F0DB-45EC-9579-5B0DAEBD7248">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="q">"<a href="xstream-out-concepts.html#GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" title="Become familiar with concepts related to XStream Out.">XStream Out Concepts</a>"</span></p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="introduction-to-xstream.html#GUID-21FC23DF-2881-4CFD-AF74-9A1173D768FF" title="There are several common XStream use cases.">XStream Use Cases</a>"</span></p>
                     </li>
                     <li>
                        <p><a href="../lnoci/intro-to-oci-interface-for-XStream.html#LNOCI72903" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a></p>
                     </li>
                     <li>
                        <p><a href="../stxjv/index.html" target="_blank"><span><cite>Oracle Database XStream Java API Reference</cite></span></a></p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="xstream-out.html#GUID-40B2996E-433C-4240-8022-8505273F99EF" title="You can configure and manage an XStream Out environment.">XStream Out</a></p>
                  </div>
               </div>
            </div>
            <a id="XSTRM1554"></a><div class="props_rev_3"><a id="GUID-2E0A2D4F-9199-4E45-8EA5-EEF21074FF5D" name="GUID-2E0A2D4F-9199-4E45-8EA5-EEF21074FF5D"></a><h3 id="XSTRM-GUID-2E0A2D4F-9199-4E45-8EA5-EEF21074FF5D" class="sect3"><span class="enumeration_section">4.1 </span>Preparing for XStream Out
               </h3>
               <p>There are decisions to make and tasks to complete to prepare for an XStream Out configuration.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2">Decide How to Configure XStream Out</a><br>When you configure XStream Out, you must configure XStream components to capture database changes and send these changes to the outbound server in the form of logical change records (LCRs).
                     </li>
                     <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E">Prerequisites for Configuring XStream Out</a><br>Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-1338E648-E214-4666-98A1-8B8D0085EB23" title="You can configure the Oracle Database components that are used by XStream Out.">Configuring XStream Out</a></p>
                     </div>
                  </div>
               </div>
               <a id="XSTRM72688"></a><a id="XSTRM72689"></a><a id="XSTRM72690"></a><a id="XSTRM72691"></a><a id="XSTRM1555"></a><div class="props_rev_3"><a id="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" name="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2"></a><h4 id="XSTRM-GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" class="sect4"><span class="enumeration_section">4.1.1 </span>Decide How to Configure XStream Out
                  </h4>
                  <div>
                     <p>When you configure XStream Out, you must configure XStream components to capture database changes and send these changes to the outbound server in the form of logical change records (LCRs).</p>
                     <p>These components include a capture process and at least one queue. The capture process can be a local capture process or a downstream capture process. For some configurations, you must also configure a propagation.</p>
                     <p>Local capture means that a capture process runs on the source database. The source database is the database where the changes were generated. Downstream capture means that a capture process runs on a database other than the source database. The primary reason to use downstream capture is to reduce the load on the source database, thereby improving its performance. The primary reason to use a local capture is because it is easier to configure and maintain.</p>
                     <p>The database that captures changes made to the source database is called the <span class="bold">capture database</span>. One of the following databases can be the capture database:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Source database (local capture)</p>
                        </li>
                        <li>
                           <p>Destination database (downstream capture)</p>
                        </li>
                        <li>
                           <p>A third database (downstream capture)</p>
                        </li>
                     </ul>
                     <p>If the database running the outbound server is not the capture database, then a propagation sends changes from the capture database to the database running the outbound server. If the database running the outbound server is the capture database, then this propagation between databases is not needed because the capture process and outbound server use the same queue.</p>
                     <p>You can configure the components in the following ways:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Local capture and outbound server in the same database:</span> The database objects, capture process, and outbound server are all in the same database. This configuration is the easiest to configure and maintain because all of the components are contained in one database. See <a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGEIJEJ">Figure 4-1</a> for an overview of this configuration.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Local capture and outbound server in different databases:</span> The database objects and capture process are in one database, and the outbound server is in another database. A propagation sends LCRs from the source database to the outbound server database. This configuration is best when you want easy configuration and maintenance and when you want to optimize the performance of the outbound server database. See <a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGCDFID">Figure 4-2</a> for an overview of this configuration.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Downstream capture and outbound server in the same database:</span> The database objects are in one database, and the capture process and outbound server are in another database. This configuration is best when you want to optimize the performance of the database with the database objects and want to offload change capture to another database. With this configuration, most of the components run on the database with the outbound server. See <a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGGGFCG">Figure 4-3</a> for an overview of this configuration.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Downstream capture and outbound server in different databases:</span> The database objects are in one database, the outbound server is in another database, and the capture process is in a third database. This configuration is best when you want to optimize the performance of both the database with the database objects and the database with the outbound server. With this configuration, the capture process runs on a third database, and a propagation sends LCRs from the capture database to the outbound server database. See <a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGDBHAH">Figure 4-4</a> for an overview of this configuration.
                           </p>
                        </li>
                     </ul>
                     <p>The following figures illustrate these different configurations.</p>
                     <div class="figure" id="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGEIJEJ">
                        <p class="titleinfigure">Figure 4-1 Local Capture and Outbound Server in the Same Database</p><img src="img/xstrm075.png" width="565" alt="Description of Figure 4-1 follows" title="Description of Figure 4-1 follows" longdesc="img_text/xstrm075.html"><br><a href="img_text/xstrm075.html">Description of "Figure 4-1 Local Capture and Outbound Server in the Same Database"</a></div>
                     <!-- class="figure" -->
                     <div class="figure" id="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGCDFID">
                        <p class="titleinfigure">Figure 4-2 Local Capture and Outbound Server in Different Databases</p><img src="img/xstrm076.png" width="565" alt="Description of Figure 4-2 follows" title="Description of Figure 4-2 follows" longdesc="img_text/xstrm076.html"><br><a href="img_text/xstrm076.html">Description of "Figure 4-2 Local Capture and Outbound Server in Different Databases"</a></div>
                     <!-- class="figure" -->
                     <div class="figure" id="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGGGFCG">
                        <p class="titleinfigure">Figure 4-3 Downstream Capture and Outbound Server in the Same Database</p><img src="img/xstrm077.png" width="408" alt="Description of Figure 4-3 follows" title="Description of Figure 4-3 follows" longdesc="img_text/xstrm077.html"><br><a href="img_text/xstrm077.html">Description of "Figure 4-3 Downstream Capture and Outbound Server in the Same Database"</a></div>
                     <!-- class="figure" -->
                     <div class="figure" id="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGDBHAH">
                        <p class="titleinfigure">Figure 4-4 Downstream Capture and Outbound Server in Different Databases</p><img src="img/xstrm078.png" width="509" alt="Description of Figure 4-4 follows" title="Description of Figure 4-4 follows" longdesc="img_text/xstrm078.html"><br><a href="img_text/xstrm078.html">Description of "Figure 4-4 Downstream Capture and Outbound Server in Different Databases"</a></div>
                     <!-- class="figure" -->
                     <p>If you decide to configure a downstream capture process, then you must decide which type of downstream capture process you want to configure. The following types are available:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A <span class="bold">real-time downstream capture process</span> configuration means that redo transport services at the source database sends redo data to the downstream database, and a remote file server process (RFS) at the downstream database receives the redo data over the network and stores the redo data in the standby redo log, where the capture process captures changes in real-time.
                           </p>
                        </li>
                        <li>
                           <p>An <span class="bold">archived-log downstream capture process</span> configuration means that archived redo log files from the source database are copied to the downstream database, and the capture process captures changes in these archived redo log files. These log files can be transferred automatically using redo transport services, or they can be transferred manually using a method such as FTP.
                           </p>
                        </li>
                     </ul>
                     <p>The advantage of real-time downstream capture over archived-log downstream capture is that real-time downstream capture reduces the amount of time required to capture changes made to the source database. The time is reduced because the real-time downstream capture process does not need to wait for the redo log file to be archived before it can capture changes from it. You can configure multiple real-time downstream capture processes that capture changes from the same source database, but you cannot configure real-time downstream capture for multiple source databases at one downstream database.</p>
                     <p>The advantage of archived-log downstream capture over real-time downstream capture is that archived-log downstream capture allows downstream capture processes for multiple source databases at a downstream database. You can copy redo log files from multiple source databases to a single downstream database and configure multiple archived-log downstream capture processes to capture changes in these redo log files.</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__GUID-65A8F20A-56AD-40DB-B823-AFCE78393334">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="xstream-out-concepts.html#GUID-CC32AED8-6587-4CA7-8786-CDF2C4968DB1" title="You can configure a capture process to run locally on a source database or remotely on a downstream database.">Local Capture and Downstream Capture</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-2E0A2D4F-9199-4E45-8EA5-EEF21074FF5D" title="There are decisions to make and tasks to complete to prepare for an XStream Out configuration.">Preparing for XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM1498"></a><div class="props_rev_3"><a id="GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" name="GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E"></a><h4 id="XSTRM-GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" class="sect4"><span class="enumeration_section">4.1.2 </span>Prerequisites for Configuring XStream Out
                  </h4>
                  <div>
                     <p>Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.</p>
                     <p>The components used in an Oracle Replication environment to capture changes and send them to an apply process are the same components used to capture changes and send them to an outbound server. These components include a capture process and one or more queues. If the capture process runs on a different database than the outbound server, then a propagation is also required.</p>
                     <p>This section provides an overview of each task and specific information about completing the task for an XStream Out configuration.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128">Configure an XStream Administrator on All Databases</a><br>An XStream administrator configures and manages XStream components in an XStream Out environment.
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-01D8476F-38D3-44EA-9BB1-DC10C2E67567">Granting Additional Privileges to the XStream Administrator</a><br>Additional privileges might be required for the XStream administrator.
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-5698C419-C872-4214-933E-B87E7A99FF2C">If Required, Configure Network Connectivity and Database Links</a><br>Network connectivity and database links are required when an XStream Out configuration includes multiple databases.
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-2E7BDD0D-82CE-47EE-9FCF-825FCE960771">Ensure That Each Source Database Is in ARCHIVELOG Mode</a><br>Each source database that generates changes that will be captured by a capture process must be in <code class="codeph">ARCHIVELOG</code> mode.
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-E24B40DF-D1C4-4FCC-8C62-28AAEC2AE972">Set the Relevant Initialization Parameters</a><br>Some initialization parameters are important for the configuration, operation, reliability, and performance of the components in an XStream configuration. Set these parameters appropriately.
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-41E37368-E434-4AD7-A5E8-4786E41C8C94">Configure the Streams pool</a><br>The Streams pool is a portion of memory in the System Global Area (SGA) that is used by both Oracle Replication and XStream components.
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B">If Required, Configure Supplemental Logging</a><br>When you use a capture process to capture changes, supplemental logging must be specified for certain columns at a source database for changes to the columns to be applied successfully at a destination database.
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6">If Required, Configure Log File Transfer to a Downstream Database</a><br>If you decided to use a local capture process, then log file transfer is not required. However, if you decided to use downstream capture that uses redo transport services to transfer archived redo log files to the downstream database automatically, then configure log file transfer from the source database to the capture database.
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66">If Required, Add Standby Redo Logs for Real-Time Downstream Capture</a><br>If you decided to configure real-time downstream capture, then add standby redo logs to the capture database.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-2E0A2D4F-9199-4E45-8EA5-EEF21074FF5D" title="There are decisions to make and tasks to complete to prepare for an XStream Out configuration.">Preparing for XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72816"></a><a id="XSTRM72817"></a><a id="XSTRM72993"></a><a id="XSTRM72994"></a><a id="XSTRM72995"></a><a id="XSTRM72996"></a><a id="XSTRM72997"></a><a id="XSTRM1556"></a><div class="props_rev_3"><a id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128" name="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128"></a><h5 id="XSTRM-GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128" class="sect5"><span class="enumeration_section">4.1.2.1 </span>Configure an XStream Administrator on All Databases
                     </h5>
                     <div>
                        <p>An XStream administrator configures and manages XStream components in an XStream Out environment.</p>
                        <div class="section">
                           <p>You can configure an XStream administrator by granting a user the appropriate privileges. You must configure an XStream administrator in each Oracle database included in the XStream configuration.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-EBD59488-0D8A-481B-971F-DA97CA6C13C3">Prerequisites</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>Before configuring an XStream administrator, ensure that the following prerequisites are met:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Ensure that you can log in to each database in the XStream configuration as an administrative user who can create users, grant privileges, and create tablespaces.</p>
                              </li>
                              <li>
                                 <p>Decide between the trusted user model and untrusted user model for security. See <span class="q">"<a href="introduction-to-xstream.html#GUID-E7C2EC43-186F-4163-AAEB-1D119C9D1DF1" title="With XStream, you can implement the security model that best fits with your organization's requirements.">XStream Security Models</a>"</span> for more information.
                                 </p>
                              </li>
                              <li>
                                 <p>Identify a user who will be the XStream administrator. Either create a new user with the appropriate privileges or grant these privileges to an existing user.</p>
                                 <p>Do not use the <code class="codeph">SYS</code> or <code class="codeph">SYSTEM</code> user as an XStream administrator, and ensure that the XStream administrator does not use the <code class="codeph">SYSTEM</code> tablespace as its default tablespace.
                                 </p>
                              </li>
                              <li>
                                 <p>If a new tablespace is required for the XStream administrator, then ensure that there is enough disk space on each computer system in the XStream configuration for the tablespace. The recommended size of the tablespace is 25 MB.</p>
                              </li>
                              <li>
                                 <p>The user executing the subprograms in the <code class="codeph">DBMS_XSTREAM_AUTH</code> package must have <code class="codeph">SYSDBA</code> administrative privilege, and the user must exercise the privilege using <code class="codeph">AS SYSDBA</code> at connect time.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-BACAD004-BCBB-4EE3-828E-0D8681B700ED">Assumptions</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>This section makes the following assumptions:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The user name of the XStream administrator is <code class="codeph">xstrmadmin</code> for a non-CDB. The user name of the XStream administrator is <code class="codeph">c##xstrmadmin</code> for a multitenant container database (CDB).
                                 </p>
                              </li>
                              <li>
                                 <p>The tablespace used by the XStream administrator is <code class="codeph">xstream_tbs</code>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-842F8502-BCF1-431B-A724-7AAA0B0D9634">To configure an XStream administrator:</p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, connect as an administrative user who can create users, grant privileges, and create tablespaces. Remain connected as this administrative user for all subsequent steps.</p>
                                 <p>If you are configuring an XStream administrator for XStream Out in a CDB, then connect to the root and configure the XStream administrator in the CDB root.</p>
                                 <div class="infoboxnotealso" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-BE4DCA01-B65A-4151-A855-11FED21E8B14">
                                    <p class="notep1">See Also:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><a href="../admin/index.html" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a> for information about connecting to a database in SQL*Plus
                                          </p>
                                       </li>
                                       <li>
                                          <p> <span class="q">"<a href="xstream-out-concepts.html#GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579" title="A multitenant environment enables a database to contain a portable set of schemas, objects, and related structures that appears logically to an application as a separate database.">XStream Out and a Multitenant Environment</a>"</span> for more information about XStream Out and CDBs
                                          </p>
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                              <li>
                                 <p>Either create a tablespace for the XStream administrator or use an existing tablespace.</p>
                                 <p>This tablespace stores any objects created in the XStream administrator's schema.</p>
                                 <p>For example, the following statement creates a new tablespace for the XStream administrator:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLESPACE xstream_tbs DATAFILE '/usr/oracle/dbs/xstream_tbs.dbf' 
  SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;
</pre><p>If you are creating an XStream administrator in a CDB, then you must create the tablespace in all of the containers in the CDB, including the CDB root, all pluggable databases (PDBs), all application roots, and all application containers. The tablespace is required in all containers because the XStream administrator must be a common user and so must have access to the tablespace in any container.</p>
                              </li>
                              <li>
                                 <p>Create a new user to act as the XStream administrator or identify an existing user.</p>
                                 <p>For example, to create a user named <code class="codeph">xstrmadmin</code> and specify that this user uses the <code class="codeph">xstream_tbs</code> tablespace, run the following statement:
                                 </p><pre class="oac_no_warn" dir="ltr">CREATE USER xstrmadmin IDENTIFIED BY <span class="italic">password</span> 
  DEFAULT TABLESPACE xstream_tbs
  QUOTA UNLIMITED ON xstream_tbs;
</pre><p>If you are creating an XStream administrator in a CDB, then the XStream administrator must be a common user. Therefore, include the <code class="codeph">CONTAINER=ALL</code> clause in the <code class="codeph">CREATE</code> <code class="codeph">USER</code> statement:
                                 </p><pre class="oac_no_warn" dir="ltr">CREATE USER c##xstrmadmin IDENTIFIED BY <span class="italic">password</span> 
  DEFAULT TABLESPACE xstream_tbs
  QUOTA UNLIMITED ON xstream_tbs
  CONTAINER=ALL;
</pre><div class="infoboxnote" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-5E9311BE-32CE-4C14-9917-FE3EC08B1817">
                                    <p class="notep1">Note:</p>
                                    <p>Enter an appropriate password for the administrative user.</p>
                                 </div>
                                 <div class="infoboxnotealso" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-9A5B0268-BB6B-4F12-B9F5-2E761CC5BFEC">
                                    <p class="notep1">See Also:</p>
                                    <p><a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> for guidelines about choosing passwords
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p>Grant <code class="codeph">CREATE</code> <code class="codeph">SESSION</code> privilege to the XStream administrator.
                                 </p>
                                 <p>If you created a new user to act as the XStream administrator, then grant this user <code class="codeph">CREATE</code> <code class="codeph">SESSION</code> privilege.
                                 </p>
                                 <p>For example, to grant <code class="codeph">CREATE</code> <code class="codeph">SESSION</code> privilege to user <code class="codeph">xstrmadmin</code>, run the following statement:
                                 </p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION TO xstrmadmin;
</pre><p>If you are creating an XStream administrator in a CDB, then grant <code class="codeph">CREATE</code> <code class="codeph">SESSION</code> privilege and <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> privilege to the XStream administrator, and include the <code class="codeph">CONTAINER=ALL</code> clause in the statement.
                                 </p>
                                 <p>For example, to grant these privileges to user <code class="codeph">c##xstrmadmin</code> in a CDB, run the following statement:
                                 </p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION, SET CONTAINER TO c##xstrmadmin CONTAINER=ALL;
</pre></li>
                              <li>
                                 <p>Run the <code class="codeph">GRANT_ADMIN_PRIVILEGE</code> procedure in the <code class="codeph">DBMS_XSTREAM_AUTH</code> package.
                                 </p>
                                 <p>A user must have been explicitly granted <code class="codeph">EXECUTE</code> privilege on a package to execute a subprogram in the package inside of a user-created subprogram, and a user must have explicit <code class="codeph">READ</code> or <code class="codeph">SELECT</code> privilege on a data dictionary view to query the view inside of a user-created subprogram. These privileges cannot be granted through a role. You can run the <code class="codeph">GRANT_ADMIN_PRIVILEGE</code> procedure to grant such privileges to the XStream administrator, or you can grant them directly.
                                 </p>
                                 <p>Depending on the parameter settings for the <code class="codeph">GRANT_ADMIN_PRIVILEGE</code> procedure, it can grant the appropriate privileges for a trusted or untrusted XStream administrator, and it can grant privileges in a non-CDB or a CDB. <a href="configuring-xstream-out.html#GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__BHCEEEIG" title="This table shows the required setting for each parameter based on the type XStream administrator being configured.">Table 4-1</a> describes key parameter settings for each case.
                                 </p>
                                 <div class="tblformal" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__BHCEEEIG">
                                    <p class="titleintable">Table 4-1 Key Parameter Settings for GRANT_ADMIN_PRIVILEGE</p>
                                    <table cellpadding="4" cellspacing="0" class="Formal" title="Key Parameter Settings for GRANT_ADMIN_PRIVILEGE" summary="This table shows the required setting for each parameter based on the type XStream administrator being configured." width="90%" frame="hsides" border="1" rules="rows">
                                       <thead>
                                          <tr align="left" valign="top">
                                             <th align="left" valign="bottom" width="31%" id="d24247e1041">Type of XStream Administrator</th>
                                             <th align="left" valign="bottom" width="34%" id="d24247e1044">grant_select_privileges Parameter Setting</th>
                                             <th align="left" valign="bottom" width="34%" id="d24247e1047">container Parameter Setting</th>
                                          </tr>
                                       </thead>
                                       <tbody>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="31%" id="d24247e1052" headers="d24247e1041 ">
                                                <p>Trusted in a non-CDB</p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1052 d24247e1044 ">
                                                <p><code class="codeph">TRUE</code></p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1052 d24247e1047 ">
                                                <p><code class="codeph">CURRENT</code> (default)
                                                </p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="31%" id="d24247e1065" headers="d24247e1041 ">
                                                <p>Untrusted in a non-CDB</p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1065 d24247e1044 ">
                                                <p><code class="codeph">FALSE</code> (default)
                                                </p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1065 d24247e1047 ">
                                                <p><code class="codeph">CURRENT</code> (default)
                                                </p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="31%" id="d24247e1079" headers="d24247e1041 ">
                                                <p>Trusted in a CDB</p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1079 d24247e1044 ">
                                                <p><code class="codeph">TRUE</code></p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1079 d24247e1047 ">
                                                <p><code class="codeph">ALL</code></p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="31%" id="d24247e1091" headers="d24247e1041 ">
                                                <p>Untrusted in a CDB</p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1091 d24247e1044 ">
                                                <p><code class="codeph">FALSE</code> (default)
                                                </p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1091 d24247e1047 ">
                                                <p><code class="codeph">ALL</code></p>
                                             </td>
                                          </tr>
                                       </tbody>
                                    </table>
                                 </div>
                                 <!-- class="inftblhruleinformal" -->
                                 <div class="infoboxnote" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-49D60E97-F0C6-4332-A1AB-FEF6620FD867">
                                    <p class="notep1">Note:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>For any scenario, when the XStream administrator must manage both an XStream Out and an XStream In configuration on the database, specify <code class="codeph">*</code> for the <code class="codeph">privilege_type</code> parameter.
                                          </p>
                                       </li>
                                       <li>
                                          <p>In a CDB, when <code class="codeph">ALL</code> is specified for the <code class="codeph">container</code> parameter, the current container must be the CDB root (<code class="codeph">CDB$ROOT</code>).
                                          </p>
                                       </li>
                                    </ul>
                                 </div>
                                 <div class="infoboxnotealso" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-EC726A19-EA02-4DD7-96A2-B10A20E5F337">
                                    <p class="notep1">See Also:</p>
                                    <p><a href="../arpls/DBMS_XSTREAM_AUTH.html#ARPLS73653" target="_blank"> <span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
                                 </div>
                              </li>
                              <li>
                                 <p>If necessary, grant additional privileges to the XStream administrator.</p>
                                 <p>See <span class="q">"<a href="configuring-xstream-out.html#GUID-01D8476F-38D3-44EA-9BB1-DC10C2E67567" title="Additional privileges might be required for the XStream administrator.">Granting Additional Privileges to the XStream Administrator</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Repeat all of the previous steps at each Oracle database in the environment that will use XStream.</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-EC7B3287-012B-41C5-A05A-C56B7E820CDA">
                           <p class="titleinexample">Example 4-1 Granting Privileges to a Trusted XStream Administrator in a Non-CDB Without Generating a Script</p><pre class="oac_no_warn" dir="ltr">BEGIN
   DBMS_XSTREAM_AUTH.GRANT_ADMIN_PRIVILEGE(
      grantee                 =&gt; 'xstrmadmin',
      privilege_type          =&gt; 'CAPTURE',
      grant_select_privileges =&gt; TRUE);
END;
/</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-54EAD91A-554C-4F82-8173-88D970564C1C">
                           <p class="titleinexample">Example 4-2 Granting Privileges to a Trusted XStream Administrator in a Non-CDB and Generating a Script</p>
                           <p>The directory specified in the <code class="codeph">directory_name</code> parameter must exist and must be accessible to the current user.
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
   DBMS_XSTREAM_AUTH.GRANT_ADMIN_PRIVILEGE(
      grantee                 =&gt; 'xstrmadmin',
      privilege_type          =&gt; 'CAPTURE',
      grant_select_privileges =&gt; TRUE,
      do_grants               =&gt; TRUE,
      file_name               =&gt; 'grant_xstrm_privs.sql',
      directory_name          =&gt; 'xstrm_dir');
END;
/</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-B3355FC1-C45D-4301-8D09-2FCAB1116069">
                           <p class="titleinexample">Example 4-3 Granting Privileges to an Untrusted XStream Administrator in a Non-CDB Without Generating a Script</p><pre class="oac_no_warn" dir="ltr">BEGIN
   DBMS_XSTREAM_AUTH.GRANT_ADMIN_PRIVILEGE(
      grantee                 =&gt; 'xstrmadmin',
      privilege_type          =&gt; 'CAPTURE',
      grant_select_privileges =&gt; FALSE);
END;
/</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-6FF4A68E-4D34-42FA-B064-8B96F83AEEE0">
                           <p class="titleinexample">Example 4-4 Granting Privileges to a Trusted XStream Administrator in a CDB Without Generating a Script</p><pre class="oac_no_warn" dir="ltr">BEGIN
   DBMS_XSTREAM_AUTH.GRANT_ADMIN_PRIVILEGE(
      grantee                 =&gt; 'c##xstrmadmin',
      privilege_type          =&gt; 'CAPTURE',
      grant_select_privileges =&gt; TRUE,
      container               =&gt; 'ALL');
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.">Prerequisites for Configuring XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72979"></a><div class="props_rev_3"><a id="GUID-01D8476F-38D3-44EA-9BB1-DC10C2E67567" name="GUID-01D8476F-38D3-44EA-9BB1-DC10C2E67567"></a><h5 id="XSTRM-GUID-01D8476F-38D3-44EA-9BB1-DC10C2E67567" class="sect5"><span class="enumeration_section">4.1.2.2 </span>Granting Additional Privileges to the XStream Administrator
                     </h5>
                     <div>
                        <p>Additional privileges might be required for the XStream administrator.</p>
                        <div class="section">
                           <p>Grant any of the following additional privileges to the XStream administrator if necessary:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If you plan to use Oracle Enterprise Manager Cloud Control to manage databases with XStream components, then the XStream administrator must be a trusted user and must be granted <code class="codeph">DBA</code> role. You must also configure the XStream administrator to be an Oracle Enterprise Manager administrative user. Doing so grants additional privileges required by Oracle Enterprise Manager Cloud Control, such as the privileges required to run Oracle Enterprise Manager Cloud Control jobs. See the Oracle Enterprise Manager Cloud Control online help for information about creating Oracle Enterprise Manager administrative users.
                                 </p>
                              </li>
                              <li>
                                 <p>Grant the privileges for a remote XStream administrator to perform actions in the local database. Grant these privileges using the <code class="codeph">GRANT_REMOTE_ADMIN_ACCESS</code> procedure in the <code class="codeph">DBMS_XSTREAM_AUTH</code> package. Grant this privilege if a remote XStream administrator will use a database link that connects to the local XStream administrator to perform administrative actions. Specifically, grant these privileges if either of the following conditions is true:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>You plan to configure a downstream capture process at a remote downstream database that captures changes originating at the local source database, and the downstream capture process will use a database link to perform administrative actions at the source database.</p>
                                    </li>
                                    <li>
                                       <p>You plan to use a remote XStream administrator to set the instantiation system change number (SCN) values for replicated database objects at the local database.</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>Grant the XStream administrator <code class="codeph">EXECUTE</code> privilege on any PL/SQL function owned by another user that is specified in a custom rule-based transformation for a rule used by a capture process, propagation, or outbound server. For a capture process, if a capture user is specified, then the capture user must have these privileges. These privileges must be granted directly. They cannot be granted through a role.
                                 </p>
                              </li>
                              <li>
                                 <p>Grant the XStream administrator privileges to alter database objects where appropriate. For example, if the XStream administrator must create a supplemental log group for a table in another schema, then the XStream administrator must have the necessary privileges to alter the table. These privileges can be granted directly or through a role.</p>
                              </li>
                              <li>
                                 <p>If the XStream administrator does not own the queue used by a capture process, propagation, or outbound server, and is not specified as the queue user for the queue when the queue is created, then the XStream administrator must be configured as a secure queue user of the queue if you want the XStream administrator to be able to enqueue LCRs into or dequeue LCRs from the queue. The XStream administrator might also need <code class="codeph">ENQUEUE</code> or <code class="codeph">DEQUEUE</code> privileges on the queue, or both.
                                 </p>
                              </li>
                              <li>
                                 <p>Grant the XStream administrator <code class="codeph">EXECUTE</code> privilege on any object types that the XStream administrator might need to access. These privileges can be granted directly or through a role.
                                 </p>
                              </li>
                              <li>
                                 <p>If you are using Oracle Database Vault, then the XStream administrator must be granted the <code class="codeph">DV_XSTREAM_ADMIN</code> role to perform the following tasks: create a capture process, create an outbound server, and modify the capture user for a capture process. When the XStream administrator is not performing these tasks, you can revoke <code class="codeph">DV_XSTREAM_ADMIN</code> role from the XStream administrator.
                                 </p>
                                 <p>In addition, the user who performs the following actions must be granted the <code class="codeph">BECOME</code> <code class="codeph">USER</code> system privilege:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Creates or alters a capture process</p>
                                    </li>
                                    <li>
                                       <p>Creates or alters an outbound server</p>
                                    </li>
                                 </ul>
                                 <p>Granting the <code class="codeph">BECOME</code> <code class="codeph">USER</code> system privilege to the user who performs these actions is not required if Oracle Database Vault is not installed. You can revoke the <code class="codeph">BECOME</code> <code class="codeph">USER</code> system privilege from the user after the completing one of these actions, if necessary.
                                 </p>
                                 <p>See <a href="../dvadm/index.html" target="_blank"><span><cite>Oracle Database Vault Administratorâ€™s Guide</cite></span></a>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.">Prerequisites for Configuring XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM1557"></a><div class="props_rev_3"><a id="GUID-5698C419-C872-4214-933E-B87E7A99FF2C" name="GUID-5698C419-C872-4214-933E-B87E7A99FF2C"></a><h5 id="XSTRM-GUID-5698C419-C872-4214-933E-B87E7A99FF2C" class="sect5"><span class="enumeration_section">4.1.2.3 </span>If Required, Configure Network Connectivity and Database Links
                     </h5>
                     <div>
                        <p>Network connectivity and database links are required when an XStream Out configuration includes multiple databases.</p>
                        <div class="section">
                           <p>Network connectivity and database links are not required when all of the components run on the same database. These components include the capture process, queue, and outbound server.</p>
                           <p>You must configure network connectivity and database links if you decided to configure XStream in either of the following ways:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The capture process and the outbound server will run on different databases.</p>
                              </li>
                              <li>
                                 <p>Downstream capture will be used.</p>
                              </li>
                           </ul>
                           <p>See <span class="q">"<a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" title="When you configure XStream Out, you must configure XStream components to capture database changes and send these changes to the outbound server in the form of logical change records (LCRs).">Decide How to Configure XStream Out</a>"</span> for more information about these decisions.
                           </p>
                           <p>If network connectivity is required, then configure your network and Oracle Net so that the databases can communicate with each other.</p>
                           <p>The following database links are required:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>When the capture process runs on a different database from the outbound server, create a database link from the capture database to the outbound server database. A propagation uses this database link to send changes from the capture database to the outbound server database.</p>
                              </li>
                              <li>
                                 <p>When you use downstream capture, create a database link from the capture database to the source database. The source database is the database that generates the redo data that the capture process uses to capture changes. The capture process uses this database link to perform administrative tasks at the source database.</p>
                              </li>
                           </ul>
                           <p>The name of each database link must match the global name of the destination database, and each database link should be created in the XStream administrator's schema.</p>
                           <p>For example, assume that you want to create a database link in a configuration with the following characteristics:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The global name of the source database is <code class="codeph">dbs1.example.com</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The global name of the destination database is <code class="codeph">dbs2.example.com</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The XStream administrator is <code class="codeph">xstrmadmin</code> at each database.
                                 </p>
                              </li>
                           </ul>
                           <p>Given these assumptions, the following statement creates a database link from <code class="codeph">dbs1.example.com</code> to <code class="codeph">dbs2.example.com</code>:
                           </p><pre class="oac_no_warn" dir="ltr">CONNECT xstrmadmin@dbs1.example.com
Enter password: <span class="italic">password</span>

CREATE DATABASE LINK dbs2.example.com CONNECT TO xstrmadmin 
   IDENTIFIED BY <span class="italic">password</span> USING 'dbs2.example.com';
</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-5698C419-C872-4214-933E-B87E7A99FF2C__GUID-76DF6A08-5BA4-47A3-92F6-8570234B7C75">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../admqs/configuring-the-network-environment.html#ADMQS004" target="_blank"><span><cite>Oracle Database 2 Day DBA</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="../admin/managing-a-distributed-database.html#ADMIN029" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a> for more information about database links
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.">Prerequisites for Configuring XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM1558"></a><div class="props_rev_3"><a id="GUID-2E7BDD0D-82CE-47EE-9FCF-825FCE960771" name="GUID-2E7BDD0D-82CE-47EE-9FCF-825FCE960771"></a><h5 id="XSTRM-GUID-2E7BDD0D-82CE-47EE-9FCF-825FCE960771" class="sect5"><span class="enumeration_section">4.1.2.4 </span>Ensure That Each Source Database Is in ARCHIVELOG Mode
                     </h5>
                     <div>
                        <p>Each source database that generates changes that will be captured by a capture process must be in <code class="codeph">ARCHIVELOG</code> mode.
                        </p>
                        <div class="section">
                           <p>For downstream capture processes, the downstream database also must be in <code class="codeph">ARCHIVELOG</code> mode if you plan to configure a real-time downstream capture process. The downstream database does not need to be in <code class="codeph">ARCHIVELOG</code> mode if you plan to run only archived-log downstream capture processes on it.
                           </p>
                           <p>If you are configuring XStream in an Oracle Real Application Clusters (Oracle RAC) environment, then the archived redo log files of all threads from all instances must be available to any instance running a capture process. This requirement pertains to both local and downstream capture processes.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-2E7BDD0D-82CE-47EE-9FCF-825FCE960771__GUID-10F12E20-1EB6-4608-B051-FC02A5728F4E">
                           <p class="notep1">See Also:</p>
                           <p><a href="../admin/managing-archived-redo-log-files.html#ADMIN008" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a>for instructions about running a database in <code class="codeph">ARCHIVELOG</code> mode
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.">Prerequisites for Configuring XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM1559"></a><div class="props_rev_3"><a id="GUID-E24B40DF-D1C4-4FCC-8C62-28AAEC2AE972" name="GUID-E24B40DF-D1C4-4FCC-8C62-28AAEC2AE972"></a><h5 id="XSTRM-GUID-E24B40DF-D1C4-4FCC-8C62-28AAEC2AE972" class="sect5"><span class="enumeration_section">4.1.2.5 </span>Set the Relevant Initialization Parameters
                     </h5>
                     <div>
                        <p>Some initialization parameters are important for the configuration, operation, reliability, and performance of the components in an XStream configuration. Set these parameters appropriately.</p>
                        <div class="section">
                           <p>The following requirements apply to XStream outbound servers:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Ensure that the <code class="codeph">PROCESSES</code> initialization parameter is set to a value large enough to accommodate the outbound server background processes and all of the other Oracle Database background processes.
                                 </p>
                              </li>
                              <li>
                                 <p>Ensure that the <code class="codeph">SESSIONS</code> initialization parameter is set to a value large enough to accommodate the sessions used by the outbound server background processes and all of the other Oracle Database sessions.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.">Prerequisites for Configuring XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM1560"></a><div class="props_rev_3"><a id="GUID-41E37368-E434-4AD7-A5E8-4786E41C8C94" name="GUID-41E37368-E434-4AD7-A5E8-4786E41C8C94"></a><h5 id="XSTRM-GUID-41E37368-E434-4AD7-A5E8-4786E41C8C94" class="sect5"><span class="enumeration_section">4.1.2.6 </span>Configure the Streams pool
                     </h5>
                     <div>
                        <p>The Streams pool is a portion of memory in the System Global Area (SGA) that is used by both Oracle Replication and XStream components.</p>
                        <div class="section">
                           <p>The Streams pool stores buffered queue LCRs in memory, and it provides memory for capture processes and outbound servers.</p>
                           <p>The following are considerations for configuring the Streams pool:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>At least 300 MB of memory is required for the Streams pool.</p>
                              </li>
                              <li>
                                 <p>After XStream Out is configured, you can use the <code class="codeph">max_sga_size</code> capture process parameter to control the amount of system global area (SGA) memory allocated specifically to a capture process.
                                 </p>
                                 <p>The sum of system global area (SGA) memory allocated for all components on a database must be less than the value set for the <code class="codeph">STREAMS_POOL_SIZE</code> initialization parameter.
                                 </p>
                              </li>
                              <li>
                                 <p>After XStream Out is configured, you can use the <code class="codeph">max_sga_size</code> apply parameter to control the amount of SGA memory allocated specifically to an outbound server.
                                 </p>
                              </li>
                              <li>
                                 <p>Ensure that there is enough space in the Streams pool at each database to run XStream components and to store LCRs and run the components properly.</p>
                              </li>
                              <li>
                                 <p>The Streams pool is initialized the first time an outbound server is started.</p>
                              </li>
                              <li>
                                 <p>The best practice is to set the <code class="codeph">STREAMS_POOL_SIZE</code> initialization parameter explicitly to the desired Streams pool size.
                                 </p>
                              </li>
                           </ul>
                           <p>The Automatic Shared Memory Management feature automatically manages the size of the Streams pool when the following conditions are met:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">MEMORY_TARGET</code> and <code class="codeph">MEMORY_MAX_TARGET</code> initialization parameters are both set to <code class="codeph">0</code> (zero).
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">SGA_TARGET</code> initialization parameter is set to a nonzero value.
                                 </p>
                              </li>
                           </ul>
                           <p>The Streams pool size is the value specified by the <code class="codeph">STREAMS_POOL_SIZE</code> parameter, in bytes, if the following conditions are met:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">MEMORY_TARGET</code>, <code class="codeph">MEMORY_MAX_TARGET</code>, and <code class="codeph">SGA_TARGET</code> initialization parameters are all set to <code class="codeph">0</code> (zero).
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">STREAMS_POOL_SIZE</code> initialization parameter is set to a nonzero value.
                                 </p>
                              </li>
                           </ul>
                           <p>If you are using Automatic Shared Memory Management, and if the <code class="codeph">STREAMS_POOL_SIZE</code> initialization parameter also is set to a nonzero value, then Automatic Shared Memory Management uses this value as a minimum for the Oracle Replication pool. If your environment needs a minimum amount of memory in the Oracle Replication pool to function properly, then  you can set a minimum size. To view the current memory allocated to Oracle Replication pool by Automatic Shared Memory Management, query the <code class="codeph">V$SGA_DYNAMIC_COMPONENTS</code> view. In addition, you can query the <code class="codeph">V$STREAMS_POOL_STATISTICS</code> view to view the current usage of the Oracle Replication pool.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-41E37368-E434-4AD7-A5E8-4786E41C8C94__GUID-F364027B-0C88-4C66-95DE-95D43D6F5D56">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS306" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about the <code class="codeph">max_sga_size</code> capture process parameter
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00207" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=REFRN10256" target="_blank"><span><cite>Oracle Database Reference</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.">Prerequisites for Configuring XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM73020"></a><div class="props_rev_3"><a id="GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" name="GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B"></a><h5 id="XSTRM-GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" class="sect5"><span class="enumeration_section">4.1.2.7 </span>If Required, Configure Supplemental Logging
                     </h5>
                     <div>
                        <p>When you use a capture process to capture changes, supplemental logging must be specified for certain columns at a source database for changes to the columns to be applied successfully at a destination database.</p>
                        <p>Supplemental logging places additional information in the redo log for these columns. A capture process captures this additional information and places it in logical change records (LCRs), and an XStream inbound server or client application might need this additional information to process changes properly.</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-055A8FCB-2257-4C4B-9B01-CA558B7A6B31">Required Supplemental Logging in an XStream Environment</a><br>There are two types of supplemental logging: database supplemental logging and table supplemental logging.
                           </li>
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-9671FF03-F1BA-482B-A60A-07C9D2DB417D">Specifying Table Supplemental Logging Using Unconditional Log Groups</a><br>You can specify supplemental logging using unconditional log groups.
                           </li>
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-75CEB682-A05B-4386-936F-8755C5927BE2">Specifying Table Supplemental Logging Using Conditional Log Groups</a><br>You can specify table supplemental logging using conditional log groups.
                           </li>
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-C3421B2F-2147-4AE1-9F81-3EAA544B87A1">Dropping a Supplemental Log Group</a><br>To drop a conditional or unconditional supplemental log group, use the <code class="codeph">DROP</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">GROUP</code> clause in the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement.
                           </li>
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-8091A656-E200-452E-AA3E-1795931AC7B2">Specifying Database Supplemental Logging of Key Columns</a><br>You have the option of specifying supplemental logging for all primary key, unique key, bitmap index, and foreign key columns in a source database.
                           </li>
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-3C7AEBBB-B764-432F-82F0-52736381DBFF">Dropping Database Supplemental Logging of Key Columns</a><br>To drop supplemental logging for all primary key, unique key, bitmap index, and foreign key columns in a source database, issue the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">DROP</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code> statement.
                           </li>
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-30D6D936-8841-486A-8A12-60AC3F62E62F">Procedures That Automatically Specify Supplemental Logging</a><br>Some procedures in the <code class="codeph">DBMS_CAPTURE_ADM</code> package automatically specify supplemental logging.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.">Prerequisites for Configuring XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="XSTRM73021"></a><div class="props_rev_3"><a id="GUID-055A8FCB-2257-4C4B-9B01-CA558B7A6B31" name="GUID-055A8FCB-2257-4C4B-9B01-CA558B7A6B31"></a><h6 id="XSTRM-GUID-055A8FCB-2257-4C4B-9B01-CA558B7A6B31" class="sect6"><span class="enumeration_section">4.1.2.7.1 </span>Required Supplemental Logging in an XStream Environment
                        </h6>
                        <div>
                           <p>There are two types of supplemental logging: database supplemental logging and table supplemental logging.</p>
                           <p>Database supplemental logging specifies supplemental logging for an entire database, while table supplemental logging enables you to specify log groups for supplemental logging of a particular table. If you use table supplemental logging, then you can choose between two types of log groups: unconditional log groups and conditional log groups.</p>
                           <p>Unconditional log groups log the before images of specified columns when the table is changed, regardless of whether the change affected any of the specified columns. Unconditional log groups are sometimes referred to as "always log groups." Conditional log groups log the before images of all specified columns only if at least one of the columns in the log group is changed.</p>
                           <p>Supplementing logging at the database level, unconditional log groups at the table level, and conditional log groups at the table level determine which old values are logged for a change.</p>
                           <p>If you plan to use one or more XStream inbound servers to apply LCRs captured by a capture process, then you must enable supplemental logging <span class="italic">at the source database</span> for the following types of columns in tables <span class="italic">at the destination database</span>:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Any columns at the source database that are used in a primary key in tables for which changes are applied at a destination database must be unconditionally logged in a log group or by database supplemental logging of primary key columns.</p>
                              </li>
                              <li>
                                 <p>If the parallelism of any inbound server that will apply the changes is greater than&nbsp;1, then any unique constraint column at a destination database that comes from multiple columns at the source database must be conditionally logged. Supplemental logging does not need to be specified if a unique constraint column comes from a single column at the source database.</p>
                              </li>
                              <li>
                                 <p>If the parallelism of any inbound server that will apply the changes is greater than&nbsp;1, then any foreign key column at a destination database that comes from multiple columns at the source database must be conditionally logged. Supplemental logging does not need to be specified if the foreign key column comes from a single column at the source database.</p>
                              </li>
                              <li>
                                 <p>If the parallelism of any inbound server that will apply the changes is greater than&nbsp;1, then any bitmap index column at a destination database that comes from multiple columns at the source database must be conditionally logged. Supplemental logging does not need to be specified if the bitmap index column comes from a single column at the source database.</p>
                              </li>
                              <li>
                                 <p>Any columns at the source database that are used as substitute key columns for an inbound server at a destination database must be unconditionally logged. You specify substitute key columns for a table using the <code class="codeph">SET_KEY_COLUMNS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                                 </p>
                              </li>
                              <li>
                                 <p>The columns specified in a column list for conflict resolution during apply must be conditionally logged if multiple columns at the source database are used in the column list at the destination database.</p>
                              </li>
                              <li>
                                 <p>Any columns at the source database that are used by a statement DML handler, change handler, procedure DML handler, or error handler at a destination database must be unconditionally logged.</p>
                              </li>
                              <li>
                                 <p>Any columns at the source database that are used by a rule or a rule-based transformation must be unconditionally logged.</p>
                              </li>
                              <li>
                                 <p>Any columns at the source database that are specified in a value dependency virtual dependency definition at a destination database must be unconditionally logged.</p>
                              </li>
                              <li>
                                 <p>If you specify row subsetting for a table at a destination database, then any columns at the source database that are in the destination table or columns at the source database that are in the subset condition must be unconditionally logged. You specify a row subsetting condition for an inbound server using the <code class="codeph">dml_condition</code> parameter in the <code class="codeph">ADD_SUBSET_RULES</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.
                                 </p>
                              </li>
                           </ul>
                           <p>If you do not use supplemental logging for these types of columns at a source database, then changes involving these columns might not apply properly at a destination database.</p>
                           <div class="infoboxnote" id="GUID-055A8FCB-2257-4C4B-9B01-CA558B7A6B31__GUID-0C4A5C3C-2A65-4E68-A73C-66E5972D242C">
                              <p class="notep1">Note:</p>
                              <p>Columns of the following data types cannot be part of a supplemental log group: LOB, <code class="codeph">LONG</code>, <code class="codeph">LONG</code> <code class="codeph">RAW</code>, user-defined types (including object types, <code class="codeph">REF</code>s, varrays, nested tables), and Oracle-supplied types (including <code class="codeph">Any</code> types, XML types, spatial types, and media types).
                              </p>
                           </div>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="When you use a capture process to capture changes, supplemental logging must be specified for certain columns at a source database for changes to the columns to be applied successfully at a destination database.">If Required, Configure Supplemental Logging</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM73022"></a><div class="props_rev_3"><a id="GUID-9671FF03-F1BA-482B-A60A-07C9D2DB417D" name="GUID-9671FF03-F1BA-482B-A60A-07C9D2DB417D"></a><h6 id="XSTRM-GUID-9671FF03-F1BA-482B-A60A-07C9D2DB417D" class="sect6"><span class="enumeration_section">4.1.2.7.2 </span>Specifying Table Supplemental Logging Using Unconditional Log Groups
                        </h6>
                        <div>
                           <p>You can specify supplemental logging using unconditional log groups.</p>
                           <div class="section">
                              <p>To specify an unconditional supplemental log group that only includes the primary key column(s) for a table, use an <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement with the <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> option in the <code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code> clause. For example, the following statement adds the primary key column of the <code class="codeph">hr.regions</code> table to an unconditional log group with a system-generated name:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.regions ADD SUPPLEMENTAL LOG DATA (PRIMARY KEY) COLUMNS;
</pre><p>To specify an unconditional supplemental log group that includes all of the columns in a table, use an <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement with the <code class="codeph">ALL</code> option in the <code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code> clause. For example, the following statement adds all of the columns in the <code class="codeph">hr.regions</code> table to an unconditional log group with a system-generated name:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.regions ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;
</pre><p>To specify an unconditional supplemental log group that contains columns that you select, use an <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement with the <code class="codeph">ALWAYS</code> specification for the <code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">GROUP</code> clause. These log groups can include key columns, if&nbsp;necessary.
                              </p>
                              <p>For example, the following statement adds the <code class="codeph">department_id</code> column and the <code class="codeph">manager_id</code> column of the <code class="codeph">hr.departments</code> table to an unconditional log group named <code class="codeph">log_group_dep_pk</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.departments ADD SUPPLEMENTAL LOG GROUP log_group_dep_pk
  (department_id, manager_id) ALWAYS;
</pre><p>The <code class="codeph">ALWAYS</code> specification makes this log group an unconditional log group.
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="When you use a capture process to capture changes, supplemental logging must be specified for certain columns at a source database for changes to the columns to be applied successfully at a destination database.">If Required, Configure Supplemental Logging</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM73023"></a><div class="props_rev_3"><a id="GUID-75CEB682-A05B-4386-936F-8755C5927BE2" name="GUID-75CEB682-A05B-4386-936F-8755C5927BE2"></a><h6 id="XSTRM-GUID-75CEB682-A05B-4386-936F-8755C5927BE2" class="sect6"><span class="enumeration_section">4.1.2.7.3 </span>Specifying Table Supplemental Logging Using Conditional Log Groups
                        </h6>
                        <div>
                           <p>You can specify table supplemental logging using conditional log groups.</p>
                           <div class="section">
                              <p>You can use the following options in the <code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code> clause of an <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement:
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> option creates a conditional log group that includes the foreign key column(s) in the table.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">UNIQUE</code> option creates a conditional log group that includes the unique key column(s) and bitmap index column(s) in the table.
                                    </p>
                                 </li>
                              </ul>
                              <p>If you specify multiple options in a single <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement, then a separate conditional log group is created for each option.
                              </p>
                              <p>For example, the following statement creates two conditional log groups:</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.employees ADD SUPPLEMENTAL LOG DATA 
  (UNIQUE, FOREIGN KEY) COLUMNS;
</pre><p>One conditional log group includes the unique key columns and bitmap index columns for the table, and the other conditional log group includes the foreign key columns for the table. Both log groups have a system-generated name.</p>
                              <div class="infoboxnote" id="GUID-75CEB682-A05B-4386-936F-8755C5927BE2__GUID-DE51A67A-D9C1-4685-A604-A73BFD25647A">
                                 <p class="notep1">Note:</p>
                                 <p>Specifying the <code class="codeph">UNIQUE</code> option does not enable supplemental logging of bitmap join index columns.
                                 </p>
                              </div>
                              <p>To specify a conditional supplemental log group that includes any columns you choose to add, you can use the <code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">GROUP</code> clause in the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement. To make the log group conditional, do not include the <code class="codeph">ALWAYS</code> specification.
                              </p>
                              <p>For example, suppose the <code class="codeph">min_salary</code> and <code class="codeph">max_salary</code> columns in the <code class="codeph">hr.jobs</code> table are included in a column list for conflict resolution at a destination database. The following statement adds the <code class="codeph">min_salary</code> and <code class="codeph">max_salary</code> columns to a conditional log group named <code class="codeph">log_group_jobs_cr</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.jobs ADD SUPPLEMENTAL LOG GROUP log_group_jobs_cr 
  (min_salary, max_salary);</pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="When you use a capture process to capture changes, supplemental logging must be specified for certain columns at a source database for changes to the columns to be applied successfully at a destination database.">If Required, Configure Supplemental Logging</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM73024"></a><div class="props_rev_3"><a id="GUID-C3421B2F-2147-4AE1-9F81-3EAA544B87A1" name="GUID-C3421B2F-2147-4AE1-9F81-3EAA544B87A1"></a><h6 id="XSTRM-GUID-C3421B2F-2147-4AE1-9F81-3EAA544B87A1" class="sect6"><span class="enumeration_section">4.1.2.7.4 </span>Dropping a Supplemental Log Group
                        </h6>
                        <div>
                           <p>To drop a conditional or unconditional supplemental log group, use the <code class="codeph">DROP</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">GROUP</code> clause in the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement.
                           </p>
                           <div class="section">
                              <p>For example, to drop a supplemental log group named <code class="codeph">log_group_jobs_cr</code>, run the following statement:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.jobs DROP SUPPLEMENTAL LOG GROUP log_group_jobs_cr;</pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="When you use a capture process to capture changes, supplemental logging must be specified for certain columns at a source database for changes to the columns to be applied successfully at a destination database.">If Required, Configure Supplemental Logging</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM73025"></a><div class="props_rev_3"><a id="GUID-8091A656-E200-452E-AA3E-1795931AC7B2" name="GUID-8091A656-E200-452E-AA3E-1795931AC7B2"></a><h6 id="XSTRM-GUID-8091A656-E200-452E-AA3E-1795931AC7B2" class="sect6"><span class="enumeration_section">4.1.2.7.5 </span>Specifying Database Supplemental Logging of Key Columns
                        </h6>
                        <div>
                           <p>You have the option of specifying supplemental logging for all primary key, unique key, bitmap index, and foreign key columns in a source database.</p>
                           <div class="section">
                              <p>You might choose this option if you configure a capture process to capture changes to an entire database. To specify supplemental logging for all primary key, unique key, bitmap index, and foreign key columns in a source database, issue the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ADD SUPPLEMENTAL LOG DATA 
   (PRIMARY KEY, UNIQUE, FOREIGN KEY) COLUMNS;
</pre><p>If your primary key, unique key, bitmap index, and foreign key columns are the same at all source and destination databases, then running this command at the source database provides the supplemental logging needed for primary key, unique key, bitmap index, and foreign key columns at all destination databases. When you specify the <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> option, all columns of a row's primary key are placed in the redo log file any time the table is modified (unconditional logging). When you specify the <code class="codeph">UNIQUE</code> option, any columns in a row's unique key and bitmap index are placed in the redo log file if any column belonging to the unique key or bitmap index is modified (conditional logging). When you specify the <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> option, all columns of a row's foreign key are placed in the redo log file if any column belonging to the foreign key is modified (conditional logging).
                              </p>
                              <p>You can omit one or more of these options. For example, if you do not want to supplementally log all of the foreign key columns in the database, then you can omit the <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> option, as in the following example:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ADD SUPPLEMENTAL LOG DATA 
   (PRIMARY KEY, UNIQUE) COLUMNS;
</pre><p>In addition to <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>, <code class="codeph">UNIQUE</code>, and <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>, you can also use the <code class="codeph">ALL</code> option. The <code class="codeph">ALL</code> option specifies that, when a row is changed, all the columns of that row (except for LOB, <code class="codeph">LONG</code>, <code class="codeph">LONG</code> <code class="codeph">RAW</code>, user-defined type, and Oracle-supplied type columns) are placed in the redo log file (unconditional logging).
                              </p>
                              <p>Supplemental logging statements are cumulative. If you issue two consecutive <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code> statements, each with a different identification key, then both keys are supplementally logged.
                              </p>
                              <div class="infoboxnote" id="GUID-8091A656-E200-452E-AA3E-1795931AC7B2__GUID-3EF6D4AF-3B73-4649-9836-42229B2722A9">
                                 <p class="notep1">Note:</p>
                                 <p>Specifying the <code class="codeph">UNIQUE</code> option does not enable supplemental logging of bitmap join index columns.
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-8091A656-E200-452E-AA3E-1795931AC7B2__GUID-C853E67B-14EA-46B1-B388-3A3FBF3E2575">
                              <p class="notep1">See Also:</p>
                              <p><a href="../sqlrf/Data-Types.html#SQLRF0021" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about data types
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="When you use a capture process to capture changes, supplemental logging must be specified for certain columns at a source database for changes to the columns to be applied successfully at a destination database.">If Required, Configure Supplemental Logging</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM73026"></a><div class="props_rev_3"><a id="GUID-3C7AEBBB-B764-432F-82F0-52736381DBFF" name="GUID-3C7AEBBB-B764-432F-82F0-52736381DBFF"></a><h6 id="XSTRM-GUID-3C7AEBBB-B764-432F-82F0-52736381DBFF" class="sect6"><span class="enumeration_section">4.1.2.7.6 </span>Dropping Database Supplemental Logging of Key Columns
                        </h6>
                        <div>
                           <p>To drop supplemental logging for all primary key, unique key, bitmap index, and foreign key columns in a source database, issue the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">DROP</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code> statement.
                           </p>
                           <div class="section">
                              <p>For example, to drop database supplemental logging for all primary key, unique key, bitmap index, and foreign key columns, issue the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE DROP SUPPLEMENTAL LOG DATA 
  (PRIMARY KEY, UNIQUE, FOREIGN KEY) COLUMNS;
</pre><div class="infoboxnote" id="GUID-3C7AEBBB-B764-432F-82F0-52736381DBFF__GUID-4A7112C7-0F7A-4FDA-9AA8-217D5FD5A17E">
                                 <p class="notep1">Note:</p>
                                 <p>Dropping database supplemental logging of key columns does not affect any existing table-level supplemental log groups.</p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="When you use a capture process to capture changes, supplemental logging must be specified for certain columns at a source database for changes to the columns to be applied successfully at a destination database.">If Required, Configure Supplemental Logging</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM73027"></a><div class="props_rev_3"><a id="GUID-30D6D936-8841-486A-8A12-60AC3F62E62F" name="GUID-30D6D936-8841-486A-8A12-60AC3F62E62F"></a><h6 id="XSTRM-GUID-30D6D936-8841-486A-8A12-60AC3F62E62F" class="sect6"><span class="enumeration_section">4.1.2.7.7 </span>Procedures That Automatically Specify Supplemental Logging
                        </h6>
                        <div>
                           <p>Some procedures in the <code class="codeph">DBMS_CAPTURE_ADM</code> package automatically specify supplemental logging.
                           </p>
                           <p>The following procedures in the <code class="codeph">DBMS_CAPTURE_ADM</code> package automatically specify supplemental logging:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS590" target="_blank"><code class="codeph">BUILD</code></a></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS544" target="_blank"><code class="codeph">PREPARE_GLOBAL_INSTANTIATION</code></a></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS545" target="_blank"><code class="codeph">PREPARE_SCHEMA_INSTANTIATION</code></a></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS546" target="_blank"><code class="codeph">PREPARE_TABLE_INSTANTIATION</code></a></p>
                              </li>
                           </ul>
                           <p>The <a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS590" target="_blank"><code class="codeph">BUILD</code></a> procedure automatically specifies database supplemental logging by running the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code> statement. In most cases, the <a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS590" target="_blank"><code class="codeph">BUILD</code></a> procedure is run automatically when a capture process is created.
                           </p>
                           <p>The <a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS544" target="_blank"><code class="codeph">PREPARE_GLOBAL_INSTANTIATION</code></a>, <a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS545" target="_blank"><code class="codeph">PREPARE_SCHEMA_INSTANTIATION</code></a>, and <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS546" target="_blank"><code class="codeph">PREPARE_TABLE_INSTANTIATION</code></a> procedures automatically specify supplemental logging of the primary key, unique key, bitmap index, and foreign key columns in the tables prepared for instantiation.
                           </p>
                           <p>Certain procedures in the <code class="codeph">DBMS_XSTREAM_ADM</code> package automatically run a procedure listed previously, including the <code class="codeph">ADD_SUBSET_RULES</code>, <code class="codeph">ADD_TABLE_RULES</code>, <code class="codeph">ADD_SCHEMA_RULES</code>, and <code class="codeph">ADD_GLOBAL_RULES</code> procedures.
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-30D6D936-8841-486A-8A12-60AC3F62E62F__GUID-16BF4193-E8A6-41D4-B8F8-237DABF8699E">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS302" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about these procedures
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="When you use a capture process to capture changes, supplemental logging must be specified for certain columns at a source database for changes to the columns to be applied successfully at a destination database.">If Required, Configure Supplemental Logging</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="XSTRM1561"></a><div class="props_rev_3"><a id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6" name="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6"></a><h5 id="XSTRM-GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6" class="sect5"><span class="enumeration_section">4.1.2.8 </span>If Required, Configure Log File Transfer to a Downstream Database
                     </h5>
                     <div>
                        <p>If you decided to use a local capture process, then log file transfer is not required. However, if you decided to use downstream capture that uses redo transport services to transfer archived redo log files to the downstream database automatically, then configure log file transfer from the source database to the capture database.</p>
                        <div class="section">
                           <p>See <span class="q">"<a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" title="When you configure XStream Out, you must configure XStream components to capture database changes and send these changes to the outbound server in the form of logical change records (LCRs).">Decide How to Configure XStream Out</a>"</span> for information about this decision.
                           </p>
                           <div class="infobox-tip" id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__GUID-593ADC62-C26B-4575-A7E3-74420B39AA4C">
                              <p class="notep1">Tip:</p>
                              <p>You can use Oracle Enterprise Manager Cloud Control to configure log file transfer and a downstream capture process. See the Oracle Enterprise Manager Cloud Control online help for instructions.</p>
                           </div>
                           <p>The steps in this section configure the source database to transfer its redo log files to the capture database and configure the capture database to accept these redo log files.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__GUID-346296C8-D7B1-4ECD-A3DB-8F65EBB323F2">To configure log file transfer to a downstream database:</p>
                           <ol>
                              <li>
                                 <p>Configure Oracle Net so that the source database can communicate with the downstream database.</p>
                                 <div class="infoboxnotealso" id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__GUID-F2EDC9BD-F1DF-49D2-8A7A-3E455659F6B4">
                                    <p class="notep1">See Also:</p>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=NETAG" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a></p>
                                 </div>
                              </li>
                              <li>
                                 <p>Configure authentication at both databases to support the transfer of redo data.</p>
                                 <p>Redo transport sessions are authenticated using either the Secure Sockets Layer (SSL) protocol or a remote login password file. If the source database has a remote login password file, then copy it to the appropriate directory on the downstream capture database system. The password file must be the same at the source database and the downstream capture database.</p>
                                 <div class="infoboxnotealso" id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__GUID-8F0DFBCE-839C-4975-914A-5CBB0505AB13">
                                    <p class="notep1">See Also:</p>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=SBYDB00424" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> for detailed information about authentication requirements for redo transport
                                    </p>
                                 </div>
                              </li>
                              <li id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__BHCGEEBG">
                                 <p>At the source database, set the following initialization parameters to configure redo transport services to transmit redo data from the source database to the downstream database:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> - Configure at least one <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> initialization parameter to transmit redo data to the downstream database. Set the following attributes of this parameter in the following way:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">SERVICE</code> - Specify the network service name of the downstream database.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ASYNC</code> or <code class="codeph">SYNC</code> - Specify a redo transport mode.
                                             </p>
                                             <p>The advantage of specifying <code class="codeph">ASYNC</code> is that it results in little or no effect on the performance of the source database. <code class="codeph">ASYNC</code> is recommended to avoid affecting source database performance if the downstream database or network is performing poorly.
                                             </p>
                                             <p>The advantage of specifying <code class="codeph">SYNC</code> is that redo data is sent to the downstream database faster than when <code class="codeph">ASYNC</code> is specified. Also, specifying <code class="codeph">SYNC</code> <code class="codeph">AFFIRM</code> results in behavior that is similar to <code class="codeph">MAXIMUM</code> <code class="codeph">AVAILABILITY</code> standby protection mode. Note that specifying an <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">STANDBY</code> <code class="codeph">DATABASE</code> <code class="codeph">TO</code> <code class="codeph">MAXIMIZE</code> <code class="codeph">AVAILABILITY</code> SQL statement has no effect on an XStream capture process.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOREGISTER</code> - Specify this attribute so that the location of the archived redo log files is not recorded in the downstream database control file.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">VALID_FOR</code> - Specify either <code class="codeph">(ONLINE_LOGFILE,PRIMARY_ROLE)</code> or <code class="codeph">(ONLINE_LOGFILE,ALL_ROLES)</code>.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TEMPLATE</code> - If you are configuring an archived-log downstream capture process, then specify a directory and format template for archived redo logs at the downstream database. The <code class="codeph">TEMPLATE</code> attribute overrides the <code class="codeph">LOG_ARCHIVE_FORMAT</code> initialization parameter settings at the downstream database. The <code class="codeph">TEMPLATE</code> attribute is valid only with remote destinations. Ensure that the format uses all of the following variables at each source database: <code class="codeph">%t</code>, <code class="codeph">%s</code>, and <code class="codeph">%r</code>.
                                             </p>
                                             <p>Do not specify the <code class="codeph">TEMPLATE</code> attribute if you are configuring a real-time downstream capture process.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DB_UNIQUE_NAME</code> - The unique name of the downstream database. Use the name specified for the <code class="codeph">DB_UNIQUE_NAME</code> initialization parameter at the downstream database.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>The following example is a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> setting that specifies the downstream database <code class="codeph">dbs2</code> for a real-time downstream capture process:
                                       </p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_2='SERVICE=DBS2.EXAMPLE.COM ASYNC NOREGISTER
   VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE)
   DB_UNIQUE_NAME=dbs2'
</pre><p>The following example is a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> setting that specifies the downstream database <code class="codeph">dbs2</code> for an archived-log downstream capture process:
                                       </p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_2='SERVICE=DBS2.EXAMPLE.COM ASYNC NOREGISTER
   VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE)
   TEMPLATE=/usr/oracle/log_for_dbs1/dbs1_arch_%t_%s_%r.log
   DB_UNIQUE_NAME=dbs2'
</pre><p>See <span class="q">"<a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" title="When you configure XStream Out, you must configure XStream components to capture database changes and send these changes to the outbound server in the form of logical change records (LCRs).">Decide How to Configure XStream Out</a>"</span> for information about the differences between real-time and archived-log downstream capture.
                                       </p>
                                       <div class="infobox-tip" id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__GUID-9CEE2AC3-34D7-4A9A-BCDA-850693AED876">
                                          <p class="notep1">Tip:</p>
                                          <p>If you are configuring an archived-log downstream capture process, then specify a value for the <code class="codeph">TEMPLATE</code> attribute that keeps log files from a remote source database separate from local database log files. In addition, if the downstream database contains log files from multiple source databases, then the log files from each source database should be kept separate from each other.
                                          </p>
                                       </div>
                                    </li>
                                    <li>
                                       <p><code class="codeph">LOG_ARCHIVE_DEST_STATE_</code><span class="italic"><code class="codeph">n</code></span> - Set this initialization parameter that corresponds with the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter for the downstream database to <code class="codeph">ENABLE</code>.
                                       </p>
                                       <p>For example, if the <code class="codeph">LOG_ARCHIVE_DEST_2</code> initialization parameter is set for the downstream database, then set the <code class="codeph">LOG_ARCHIVE_DEST_STATE_2</code> parameter in the following way:
                                       </p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_STATE_2=ENABLE 
</pre></li>
                                    <li>
                                       <p><code class="codeph">LOG_ARCHIVE_CONFIG</code> - Set the <code class="codeph">DB_CONFIG</code> attribute in this initialization parameter to include the <code class="codeph">DB_UNIQUE_NAME</code> of the source database and the downstream database.
                                       </p>
                                       <p>For example, if the <code class="codeph">DB_UNIQUE_NAME</code> of the source database is <code class="codeph">dbs1</code>, and the <code class="codeph">DB_UNIQUE_NAME</code> of the downstream database is <code class="codeph">dbs2</code>, then specify the following parameter:
                                       </p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_CONFIG='DG_CONFIG=(dbs1,dbs2)'
</pre><p>By default, the <code class="codeph">LOG_ARCHIVE_CONFIG</code> parameter enables a database to both send and receive redo.
                                       </p>
                                    </li>
                                 </ul>
                                 <div class="infoboxnotealso" id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__GUID-BBF417E9-9066-4F19-AEB1-E178DD1B1234">
                                    <p class="notep1">See Also:</p>
                                    <p><a href="../refrn/index.html" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> and <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=SBYDB01100" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> for more information about these initialization parameters
                                    </p>
                                 </div>
                              </li>
                              <li id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__BHCBBADI">
                                 <p>At the downstream database, set the <code class="codeph">DB_CONFIG</code> attribute in the <code class="codeph">LOG_ARCHIVE_CONFIG</code> initialization parameter to include the <code class="codeph">DB_UNIQUE_NAME</code> of the source database and the downstream database.
                                 </p>
                                 <p>For example, if the <code class="codeph">DB_UNIQUE_NAME</code> of the source database is <code class="codeph">dbs1</code>, and the <code class="codeph">DB_UNIQUE_NAME</code> of the downstream database is <code class="codeph">dbs2</code>, then specify the following parameter:
                                 </p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_CONFIG='DG_CONFIG=(dbs1,dbs2)'
</pre><p>By default, the <code class="codeph">LOG_ARCHIVE_CONFIG</code> parameter enables a database to both send and receive redo.
                                 </p>
                              </li>
                              <li>
                                 <p>If you reset any initialization parameters while the instance was running at a database in Step <a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__BHCGEEBG">3</a> or Step <a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__BHCBBADI">4</a>, then you might want to reset them in the initialization parameter file as well, so that the new values are retained when the database is restarted.
                                 </p>
                                 <p>If you did not reset the initialization parameters while the instance was running, but instead reset them in the initialization parameter file in Step <a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__BHCGEEBG">3</a> or Step <a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__BHCBBADI">4</a>, then restart the database. The source database must be open when it sends redo log files to the downstream database, because the global name of the source database is sent to the downstream database only if the source database is open.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>When these steps are complete, you can add standby redo logs files at the downstream database if you want to configure a real-time downstream capture process. In this case, see the instructions in <span class="q">"<a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66" title="If you decided to configure real-time downstream capture, then add standby redo logs to the capture database.">If Required, Add Standby Redo Logs for Real-Time Downstream Capture</a>"</span>.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.">Prerequisites for Configuring XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM1562"></a><div class="props_rev_3"><a id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66" name="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66"></a><h5 id="XSTRM-GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66" class="sect5"><span class="enumeration_section">4.1.2.9 </span>If Required, Add Standby Redo Logs for Real-Time Downstream Capture
                     </h5>
                     <div>
                        <p>If you decided to configure real-time downstream capture, then add standby redo logs to the capture database.</p>
                        <div class="section">
                           <p>See <span class="q">"<a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" title="When you configure XStream Out, you must configure XStream components to capture database changes and send these changes to the outbound server in the form of logical change records (LCRs).">Decide How to Configure XStream Out</a>"</span> for information about this decision.
                           </p>
                           <p>The example in this section adds standby redo logs at a downstream database. Standby redo logs are required to configure a real-time downstream capture process. In the example, the source database is <code class="codeph">dbs1.example.com</code> and the downstream database is <code class="codeph">dbs2.example.com</code></p>
                           <p>The steps in this section are required only if you are configuring real-time downstream capture. If you are configuring archived-log downstream capture, then do not complete the steps in this section.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__GUID-11D55269-357A-4C07-B4BC-10B284B93AA0">To add standby redo logs for real-time downstream capture:</p>
                           <ol>
                              <li>
                                 <p>Complete the steps in <span class="q">"<a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6" title="If you decided to use a local capture process, then log file transfer is not required. However, if you decided to use downstream capture that uses redo transport services to transfer archived redo log files to the downstream database automatically, then configure log file transfer from the source database to the capture database.">If Required, Configure Log File Transfer to a Downstream Database</a>"</span>.
                                 </p>
                              </li>
                              <li id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCIAJIB">
                                 <p>At the downstream database, set the following initialization parameters to configure archiving of the redo data generated locally:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Set at least one archive log destination in the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> initialization parameter either to a directory or to the fast recovery area on the computer system running the downstream database. Set the following attributes of this parameter in the following way:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">LOCATION</code> - Specify either a valid path name for a disk directory or, to use a fast recovery area, specify <code class="codeph">USE_DB_RECOVERY_FILE_DEST</code>. This location is the local destination for archived redo log files written from the standby redo logs. Log files from a remote source database should be kept separate from local database log files. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=BRADV8183" target="_blank"><span><cite>Oracle Database Backup and Recovery Userâ€™s Guide</cite></span></a> for information about configuring a fast recovery area.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">VALID_FOR</code> - Specify either <code class="codeph">(ONLINE_LOGFILE,PRIMARY_ROLE)</code> or <code class="codeph">(ONLINE_LOGFILE,ALL_ROLES)</code>.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>The following example is a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> setting for the locally generated redo data at the real-time downstream capture database:
                                       </p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_1='LOCATION=/home/arc_dest/local_rl_dbs2
   VALID_FOR=(ONLINE_LOGFILE,PRIMARY_ROLE)'
</pre><p>A real-time downstream capture configuration should keep archived standby redo log files separate from archived online redo log files generated by the downstream database. Specify <code class="codeph">ONLINE_LOGFILE</code> instead of <code class="codeph">ALL_LOGFILES</code> for the redo log type in the <code class="codeph">VALID_FOR</code> attribute to accomplish this.
                                       </p>
                                       <p>You can specify other attributes in the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> initialization parameter if necessary.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Set the <code class="codeph">LOG_ARCHIVE_DEST_STATE_</code><span class="italic"><code class="codeph">n</code></span> initialization parameter that corresponds with the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter previously set in this step to <code class="codeph">ENABLE</code>.
                                       </p>
                                       <p>For example, if the <code class="codeph">LOG_ARCHIVE_DEST_1</code> initialization parameter is set, then set the <code class="codeph">LOG_ARCHIVE_DEST_STATE_1</code> parameter in the following way:
                                       </p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_STATE_1=ENABLE 
</pre></li>
                                 </ul>
                              </li>
                              <li id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCEAGDC">
                                 <p>At the downstream database, set the following initialization parameters to configure the downstream database to receive redo data from the source database and write the redo data to the standby redo log at the downstream database:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Set at least one archive log destination in the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> initialization parameter either to a directory or to the fast recovery area on the computer system running the downstream database. Set the following attributes of this parameter in the following way:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">LOCATION</code> - Specify either a valid path name for a disk directory or, to use a fast recovery area, specify <code class="codeph">USE_DB_RECOVERY_FILE_DEST</code>. This location is the local destination for archived redo log files written from the standby redo logs. Log files from a remote source database should be kept separate from local database log files. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=BRADV8183" target="_blank"><span><cite>Oracle Database Backup and Recovery Userâ€™s Guide</cite></span></a> for information about configuring a fast recovery area.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">VALID_FOR</code> - Specify either <code class="codeph">(STANDBY_LOGFILE,PRIMARY_ROLE)</code> or <code class="codeph">(STANDBY_LOGFILE,ALL_ROLES)</code>.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>The following example is a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> setting for the redo data received from the source database at the real-time downstream capture database:
                                       </p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_2='LOCATION=/home/arc_dest/srl_dbs1
   VALID_FOR=(STANDBY_LOGFILE,PRIMARY_ROLE)'
</pre><p>You can specify other attributes in the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> initialization parameter if necessary.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Set the <code class="codeph">LOG_ARCHIVE_DEST_STATE_</code><span class="italic"><code class="codeph">n</code></span> initialization parameter that corresponds with the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter previously set in this step to <code class="codeph">ENABLE</code>.
                                       </p>
                                       <p>For example, if the <code class="codeph">LOG_ARCHIVE_DEST_2</code> initialization parameter is set for the downstream database, then set the <code class="codeph">LOG_ARCHIVE_DEST_STATE_2</code> parameter in the following way:
                                       </p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_STATE_2=ENABLE 
</pre></li>
                                 </ul>
                                 <div class="infoboxnotealso" id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__GUID-D575AF8F-F03C-4B37-975A-39B808D58B36">
                                    <p class="notep1">See Also:</p>
                                    <p><a href="../refrn/LOG_ARCHIVE_DEST_n.html#REFRN10086" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>and<a href="../sbydb/oracle-data-guard-redo-transport-services.html#SBYDB00400" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a>for more information about these initialization parameters
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p>If you reset any initialization parameters while an instance was running at a database in Step <a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCIAJIB">2</a> or Step <a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCEAGDC">3</a>, then you might want to reset them in the relevant initialization parameter file as well, so that the new values are retained when the database is restarted. 
                                 </p>
                                 <p>If you did not reset the initialization parameters while an instance was running, but instead reset them in the initialization parameter file in Step <a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCIAJIB">2</a> or Step <a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCEAGDC">3</a>, then restart the database. The source database must be open when it sends redo data to the downstream database, because the global name of the source database is sent to the downstream database only if the source database is open.
                                 </p>
                              </li>
                              <li>
                                 <p>Create the standby redo log files.</p>
                                 <div class="infoboxnote" id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__GUID-77F3C95D-DC64-4F03-A2C3-74F8F72CB1D7">
                                    <p class="notep1">Note:</p>
                                    <p>The following steps outline the general procedure for adding standby redo log files to the downstream database. The specific steps and SQL statements used to add standby redo log files depend on your environment. For example, in an Oracle Real Application Clusters (Oracle RAC) environment, the steps are different. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=SBYDB00400" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> for detailed instructions about adding standby redo log files to a database.
                                    </p>
                                 </div>
                                 <ol type="a">
                                    <li>
                                       <p>In SQL*Plus, connect to the source database <code class="codeph">dbs1.example.com</code> as an administrative user.
                                       </p>
                                       <p>See <a href="../admin/index.html" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Determine the log file size used on the source database. The standby log file size must exactly match (or be larger than) the source database log file size. For example, if the source database log file size is 500 MB, then the standby log file size must be 500 MB or larger. You can determine the size of the redo log files at the source database (in bytes) by querying the <code class="codeph">V$LOG</code> view at the source database.
                                       </p>
                                       <p>For example, query the <code class="codeph">V$LOG</code> view:
                                       </p><pre class="oac_no_warn" dir="ltr">SELECT BYTES FROM V$LOG;
</pre></li>
                                    <li>
                                       <p>Determine the number of standby log file groups required on the downstream database. </p>
                                       <p>The number of standby log file groups must be at least one more than the number of online log file groups on the source database. For example, if the source database has two online log file groups, then the downstream database must have at least three standby log file groups.</p>
                                       <p>You can determine the number of source database online log file groups by querying the <code class="codeph">V$LOG</code> view of the source database for a single instance database or by querying the <code class="codeph">GV$LOG</code> view for a database cluster.
                                       </p>
                                       <p>For example, query the <code class="codeph">GV$LOG</code> view:
                                       </p><pre class="oac_no_warn" dir="ltr">SELECT COUNT(GROUP#) FROM GV$LOG;
</pre></li>
                                    <li>
                                       <p>In SQL*Plus, connect to the downstream database <code class="codeph">dbs2.example.com</code> as an administrative user.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Use the SQL statement <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">ADD</code> <code class="codeph">STANDBY</code> <code class="codeph">LOGFILE</code> to add the standby log file groups to the downstream database.
                                       </p>
                                       <p>For example, assume that the source database has two online redo log file groups and is using a log file size of 500 MB. In this case, use the following statements to create the appropriate standby log file groups:</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ADD STANDBY LOGFILE GROUP 3
   ('/oracle/dbs/slog3a.rdo', '/oracle/dbs/slog3b.rdo') SIZE 500M;

ALTER DATABASE ADD STANDBY LOGFILE GROUP 4
   ('/oracle/dbs/slog4.rdo', '/oracle/dbs/slog4b.rdo') SIZE 500M;

ALTER DATABASE ADD STANDBY LOGFILE GROUP 5
   ('/oracle/dbs/slog5.rdo', '/oracle/dbs/slog5b.rdo') SIZE 500M;
</pre></li>
                                    <li>
                                       <p>Ensure that the standby log file groups were added successfully by running the following query:</p><pre class="oac_no_warn" dir="ltr">SELECT GROUP#, THREAD#, SEQUENCE#, ARCHIVED, STATUS
   FROM V$STANDBY_LOG;
</pre><p>You output should be similar to the following:</p><pre class="oac_no_warn" dir="ltr">    GROUP#    THREAD#  SEQUENCE# ARC STATUS
---------- ---------- ---------- --- ----------
         3          0          0 YES UNASSIGNED
         4          0          0 YES UNASSIGNED
         5          0          0 YES UNASSIGNED
</pre></li>
                                    <li>
                                       <p>Ensure that log files from the source database are appearing in the location specified in the <code class="codeph">LOCATION</code> attribute in Step <a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCEAGDC">3</a>. You might need to switch the log file at the source database to see files in the directory.
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>When these steps are complete, you are ready to configure a real-time downstream capture process.</p>
                           <div class="infobox-tip" id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__GUID-AF00E7CE-BD5C-44C4-BB11-357C390B17F4">
                              <p class="notep1">Tip:</p>
                              <p>You can use Oracle Enterprise Manager Cloud Control to configure real-time downstream capture. See the Oracle Enterprise Manager Cloud Control online help for instructions.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.">Prerequisites for Configuring XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="XSTRM1497"></a><div class="props_rev_3"><a id="GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB" name="GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB"></a><h3 id="XSTRM-GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB" class="sect3"><span class="enumeration_section">4.2 </span>Configuring XStream Out
               </h3>
               <div>
                  <p>An outbound server in an XStream Out configuration streams Oracle database changes to a client application.</p>
                  <p>The client application attaches to the outbound server using the Oracle Call Interface (OCI) or Java interface to receive these changes.</p>
                  <p>Configuring an outbound server involves creating the components that send captured database changes to the outbound server. It also involves configuring the outbound server itself, which includes specifying the connect user that the client application will use to attach to the outbound server.</p>
                  <p>You can create an outbound server using the following procedures in the <code class="codeph">DBMS_XSTREAM_ADM</code> package:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The <code class="codeph">CREATE_OUTBOUND</code> procedure creates an outbound server, a queue, and a capture process in a single database with one procedure call.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">ADD_OUTBOUND</code> procedure can create an outbound server, or it can add an outbound server to an existing XStream Out configuration. When you use this procedure on a database without an existing XStream Out configuration, it only creates an outbound server. You must create the capture process and queue separately, and they must exist before you run the <code class="codeph">ADD_OUTBOUND</code> procedure. You can configure the capture process on the same database as the outbound server or on a different database.
                        </p>
                     </li>
                  </ul>
                  <p>In both cases, you must create the client application that communicates with the outbound server and receives LCRs from the outbound server.</p>
                  <p>If you require multiple outbound servers, then you can use the <code class="codeph">CREATE_OUTBOUND</code> procedure to create the capture process that captures database changes for the first outbound server. Next, you can run the <code class="codeph">ADD_OUTBOUND</code> procedure to add additional outbound servers that receive the same captured changes. The capture process can reside on the same database as the outbound servers or on a different database.
                  </p>
                  <p>In addition, there are special considerations when you are configuring XStream Out in a CDB. This section provides instructions for creating outbound servers in a CDB.</p>
                  <div class="infobox-tip" id="GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB__GUID-4360361F-EDDD-4601-858A-1744C57C3E28">
                     <p class="notep1">Tip:</p>
                     <p>In an XStream Out configuration with multiple outbound servers, the best practice is to create one capture process that captures changes for all of the outbound servers.</p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-824451F5-B309-47D4-8798-9B9C522A28B6">Configuring an Outbound Server Using CREATE_OUTBOUND</a><br>The <code class="codeph">CREATE_OUTBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package creates a capture process, queue, and outbound server in a single database.
                     </li>
                     <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD">Adding an Additional Outbound Server to a Capture Process Stream</a><br>XStream Out configurations often require multiple outbound servers that process a stream of LCRs from a single capture process. You can add an additional outbound server to a database that already includes at least one outbound server.
                     </li>
                     <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-E11C2367-653F-406A-A9D4-0750DE0BC559">Configuring an Outbound Server Using ADD_OUTBOUND</a><br>The <code class="codeph">ADD_OUTBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package creates an outbound server.
                     </li>
                     <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719">Configuring XStream Out in a CDB</a><br>When you configure XStream Out in a CDB, you must decide which database changes will be captured by XStream Out and sent to the client application. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-1338E648-E214-4666-98A1-8B8D0085EB23" title="You can configure the Oracle Database components that are used by XStream Out.">Configuring XStream Out</a></p>
                     </div>
                  </div>
               </div>
               <a id="XSTRM72587"></a><a id="XSTRM72588"></a><a id="XSTRM72692"></a><a id="XSTRM1499"></a><div class="props_rev_3"><a id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6" name="GUID-824451F5-B309-47D4-8798-9B9C522A28B6"></a><h4 id="XSTRM-GUID-824451F5-B309-47D4-8798-9B9C522A28B6" class="sect4"><span class="enumeration_section">4.2.1 </span>Configuring an Outbound Server Using CREATE_OUTBOUND
                  </h4>
                  <div>
                     <p>The <code class="codeph">CREATE_OUTBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package creates a capture process, queue, and outbound server in a single database.
                     </p>
                     <div class="section">
                        <p>Both the capture process and the outbound server use the queue created by the procedure. When you run the procedure, you provide the name of the new outbound server, while the procedure generates a name for the capture process and queue. If you want all of the components to run on the same database, then the <code class="codeph">CREATE_OUTBOUND</code> procedure is the fastest and easiest way to create an outbound server. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__GUID-12706571-7A0F-42A5-8053-03B12C74CB07">Prerequisites</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Before configuring XStream Out, ensure that the following prerequisites are met:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Complete the tasks described in <span class="q">"<a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.">Prerequisites for Configuring XStream Out</a>"</span>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__GUID-67DD83DF-D6A5-418A-9470-5B4D9B657097">Assumptions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This section makes the following assumptions:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The capture process will be a local capture process, and it will run on the same database as the outbound server.</p>
                              <p>The instructions in this section can only set up the local capture and outbound server on the same database configuration described in <span class="q">"<a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" title="When you configure XStream Out, you must configure XStream components to capture database changes and send these changes to the outbound server in the form of logical change records (LCRs).">Decide How to Configure XStream Out</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>The name of the outbound server is <code class="codeph">xout</code>.
                              </p>
                           </li>
                           <li>
                              <p>Data manipulation language (DML) and data definition language (DDL) changes made to the <code class="codeph">oe.orders</code> and <code class="codeph">oe.order_items</code> tables are sent to the outbound server.
                              </p>
                           </li>
                           <li>
                              <p>DML and DDL changes made to the <code class="codeph">hr</code> schema are sent to the outbound server.
                              </p>
                           </li>
                        </ul>
                        <p><a href="configuring-xstream-out.html#GUID-824451F5-B309-47D4-8798-9B9C522A28B6__CEGIGFEJ">Figure 4-5</a> provides an overview of this XStream Out configuration.
                        </p>
                        <div class="figure" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__CEGIGFEJ">
                           <p class="titleinfigure">Figure 4-5 Sample XStream Out Configuration Created Using CREATE_OUTBOUND</p><img src="img/xstrm074.png" width="456" alt="Description of Figure 4-5 follows" title="Description of Figure 4-5 follows" longdesc="img_text/xstrm074.html"><br><a href="img_text/xstrm074.html">Description of "Figure 4-5 Sample XStream Out Configuration Created Using CREATE_OUTBOUND"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__GUID-4A29EE47-F155-402A-97B9-A292141DA73F">To create an outbound server using the <span class="bold"><code class="codeph">CREATE_OUTBOUND</code></span> procedure:
                        </p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, connect to the database as the XStream administrator.</p>
                              <p>See <a href="../admin/index.html" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </li>
                           <li id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__CBDJFCJH">
                              <p>Run the <code class="codeph">CREATE_OUTBOUND</code> procedure.
                              </p>
                              <p>Given the assumptions for this section, run the following <code class="codeph">CREATE_OUTBOUND</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">DECLARE
  tables  DBMS_UTILITY.UNCL_ARRAY;
  schemas DBMS_UTILITY.UNCL_ARRAY;
BEGIN
    tables(1)  := 'oe.orders';
    tables(2)  := 'oe.order_items';
    schemas(1) := 'hr';
  DBMS_XSTREAM_ADM.CREATE_OUTBOUND(
    server_name     =&gt;  'xout',
    table_names     =&gt;  tables,
    schema_names    =&gt;  schemas);
END;
/
</pre><p>Running this procedure performs the following actions:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Configures supplemental logging for the <code class="codeph">oe.orders</code> and <code class="codeph">oe.order_items</code> tables and for all of the tables in the <code class="codeph">hr</code> schema.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Creates a queue with a system-generated name that is used by the capture process and the outbound server.</p>
                                 </li>
                                 <li>
                                    <p>Creates and starts a capture process with a system-generated name with rule sets that instruct it to capture DML and DDL changes to the <code class="codeph">oe.orders</code> table, the <code class="codeph">oe.order_items</code> table, and the <code class="codeph">hr</code> schema.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Creates and starts an outbound server named <code class="codeph">xout</code> with rule sets that instruct it to send DML and DDL changes to the <code class="codeph">oe.orders</code> table, the <code class="codeph">oe.order_items</code> table, and the <code class="codeph">hr</code> schema to the client application.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Sets the current user as the connect user for the outbound server. In this example, the current user is the XStream administrator. The client application must connect to the database as the connect user to interact with the outbound server.</p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__GUID-A77593FA-2FC9-42CF-9738-377A322B33AB">
                                 <p class="notep1">Note:</p>
                                 <p>The <code class="codeph">server_name</code> value cannot exceed 30 bytes.
                                 </p>
                              </div>
                              <div class="infobox-tip" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__GUID-9101A4FE-39FD-4737-A482-78A2EE374279">
                                 <p class="notep1">Tip:</p>
                                 <p>To capture and send all database changes to the outbound server, specify <code class="codeph">NULL</code> (the default) for the <code class="codeph">table_names</code> and <code class="codeph">schema_names</code> parameters.
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>Create and run the client application that will connect to the outbound server and receive the LCRs. See <a href="sample-xstream-client-application.html#GUID-B914FF75-92AA-4270-BF71-E9A5AA9228F8" title="Examples illustrate how to configure the Oracle Database components that are used by XStream. The examples configure sample client applications that communicate with an XStream outbound server and inbound server.">Sample XStream Client Application</a> for a sample application.
                              </p>
                           </li>
                           <li>
                              <p>To add one or more additional outbound servers that receive LCRs from the capture process created in Step <a href="configuring-xstream-out.html#GUID-824451F5-B309-47D4-8798-9B9C522A28B6__CBDJFCJH">2</a>, follow the instructions in <span class="q">"<a href="configuring-xstream-out.html#GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD" title="XStream Out configurations often require multiple outbound servers that process a stream of LCRs from a single capture process. You can add an additional outbound server to a database that already includes at least one outbound server.">Adding an Additional Outbound Server to a Capture Process Stream</a>"</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>When you run the client application, the outbound server is started automatically.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__GUID-185AB3DF-C993-40EB-9E65-2984AD394584">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS70198" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB" title="An outbound server in an XStream Out configuration streams Oracle database changes to a client application.">Configuring XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72591"></a><a id="XSTRM72592"></a><a id="XSTRM72694"></a><a id="XSTRM1639"></a><div class="props_rev_3"><a id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD" name="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD"></a><h4 id="XSTRM-GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD" class="sect4"><span class="enumeration_section">4.2.2 </span>Adding an Additional Outbound Server to a Capture Process Stream
                  </h4>
                  <div>
                     <p>XStream Out configurations often require multiple outbound servers that process a stream of LCRs from a single capture process. You can add an additional outbound server to a database that already includes at least one outbound server.</p>
                     <div class="section">
                        <p>The additional outbound server uses the same queue as another outbound server to receive the LCRs from the capture process. When an XStream Out environment exists, use the <code class="codeph">ADD_OUTBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package to add another outbound server to a capture process stream.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__GUID-F5A05437-540E-40D0-8FDB-C8A081599E3C">Prerequisites</p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>Before completing the steps in this section, configure an XStream Out environment that includes at least one outbound server. The following sections describe configuring and XStream Out environment:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="configuring-xstream-out.html#GUID-824451F5-B309-47D4-8798-9B9C522A28B6" title="The CREATE_OUTBOUND procedure in the DBMS_XSTREAM_ADM package creates a capture process, queue, and outbound server in a single database.">Configuring an Outbound Server Using CREATE_OUTBOUND</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="configuring-xstream-out.html#GUID-E11C2367-653F-406A-A9D4-0750DE0BC559" title="The ADD_OUTBOUND procedure in the DBMS_XSTREAM_ADM package creates an outbound server.">Configuring an Outbound Server Using ADD_OUTBOUND</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__GUID-67648030-B9DC-45A9-9E35-3C5CD3B8CB13">Assumptions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This section makes the following assumptions:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The name of the outbound server is <code class="codeph">xout2</code>.
                              </p>
                           </li>
                           <li>
                              <p>The queue used by the outbound server is <code class="codeph">xstrmadmin.xstream_queue</code>.
                              </p>
                           </li>
                           <li>
                              <p>DML and DDL changes made to the <code class="codeph">oe.orders</code> and <code class="codeph">oe.order_items</code> tables are sent to the outbound server.
                              </p>
                           </li>
                           <li>
                              <p>DML and DDL changes made to the <code class="codeph">hr</code> schema are sent to the outbound server.
                              </p>
                           </li>
                           <li>
                              <p>The source database for the database changes is <code class="codeph">db1.example.com</code>.
                              </p>
                           </li>
                        </ul>
                        <p><a href="configuring-xstream-out.html#GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__CEGGAIFC">Figure 4-6</a> provides an overview of this XStream Out configuration.
                        </p>
                        <div class="figure" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__CEGGAIFC">
                           <p class="titleinfigure">Figure 4-6 Sample XStream Out Configuration With an Additional Outbound Server</p><img src="img/xstrm073.png" width="587" alt="Description of Figure 4-6 follows" title="Description of Figure 4-6 follows" longdesc="img_text/xstrm073.html"><br><a href="img_text/xstrm073.html">Description of "Figure 4-6 Sample XStream Out Configuration With an Additional Outbound Server"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__GUID-4E0A1692-FEB6-4A70-92EF-9C79D4DE45EC">To add another outbound server to a capture process stream using the <span class="bold"><code class="codeph">ADD_OUTBOUND</code></span> procedure:
                        </p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, connect to the database that will run the additional outbound server as the XStream administrator.</p>
                              <p>See <a href="../admin/index.html" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </li>
                           <li>
                              <p>Determine the name of the queue used by an existing outbound server that receives LCRs from the capture process.</p>
                              <p>Run the query in <span class="q">"<a href="monitoring-xstream-out.html#GUID-C50E0D1A-4DDC-4CF5-A8D1-A92B03AC2E93" title="A sample query illustrates how to display general information about an outbound server.">Displaying General Information About an Outbound Server</a>"</span> to determine the owner and name of the queue. This query also shows the name of the capture process and the source database name.
                              </p>
                           </li>
                           <li>
                              <p>Run the <code class="codeph">ADD_OUTBOUND</code> procedure.
                              </p>
                              <p>Given the assumptions for this section, run the following <code class="codeph">ADD_OUTBOUND</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">DECLARE
  tables  DBMS_UTILITY.UNCL_ARRAY;
  schemas DBMS_UTILITY.UNCL_ARRAY;
BEGIN
    tables(1)  := 'oe.orders';
    tables(2)  := 'oe.order_items';
    schemas(1) := 'hr';
  DBMS_XSTREAM_ADM.ADD_OUTBOUND(
    server_name     =&gt;  'xout2',
    queue_name      =&gt;  'xstrmadmin.xstream_queue',
    source_database =&gt;  'db1.example.com',
    table_names     =&gt;  tables,
    schema_names    =&gt;  schemas);
END;
/
</pre><p>Running this procedure performs the following actions:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Creates an outbound server named <code class="codeph">xout2</code>. The outbound server has rule sets that instruct it to send DML and DDL changes to the <code class="codeph">oe.orders</code> table, the <code class="codeph">oe.order_items</code> table, and the <code class="codeph">hr</code> schema to the client application. The rules specify that these changes must have originated at the <code class="codeph">db1.example.com</code> database. The outbound server dequeues LCRs from the queue <code class="codeph">xstrmadmin.xstream_queue</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Sets the current user as the connect user for the outbound server. In this example, the current user is the XStream administrator. The client application must connect to the database as the connect user to interact with the outbound server.</p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__GUID-5BADA068-64BB-45CB-B81B-66139DF07A72">
                                 <p class="notep1">Note:</p>
                                 <p>The <code class="codeph">server_name</code> value cannot exceed 30 bytes.
                                 </p>
                              </div>
                              <div class="infobox-tip" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__GUID-8A39814D-35B4-4CF7-AAA8-849B21783F9F">
                                 <p class="notep1">Tip:</p>
                                 <p>For the outbound server to receive all of the LCRs sent by the capture process, specify <code class="codeph">NULL</code> (the default) for the <code class="codeph">table_names</code> and <code class="codeph">schema_names</code> parameters.
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>If a client application does not exist, then create and run the client application that will connect to the outbound server and receive the LCRs. See <a href="sample-xstream-client-application.html#GUID-B914FF75-92AA-4270-BF71-E9A5AA9228F8" title="Examples illustrate how to configure the Oracle Database components that are used by XStream. The examples configure sample client applications that communicate with an XStream outbound server and inbound server."> Sample XStream Client Application</a> for a sample application.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>When you run the client application, the outbound server is started automatically.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__GUID-2CBE7B7B-2DAF-4CFD-919F-275A8AD8223B">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/DBMS_XSTREAM_ADM.html#ARPLS70188" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB" title="An outbound server in an XStream Out configuration streams Oracle database changes to a client application.">Configuring XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72589"></a><a id="XSTRM72590"></a><a id="XSTRM72693"></a><a id="XSTRM1500"></a><div class="props_rev_3"><a id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559" name="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559"></a><h4 id="XSTRM-GUID-E11C2367-653F-406A-A9D4-0750DE0BC559" class="sect4"><span class="enumeration_section">4.2.3 </span>Configuring an Outbound Server Using ADD_OUTBOUND
                  </h4>
                  <div>
                     <p>The <code class="codeph">ADD_OUTBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package creates an outbound server.
                     </p>
                     <div class="section">
                        <p>This procedure does not create the capture process or the queue. In a database without an existing XStream Out configuration, you must configure these components manually.</p>
                        <p>You can use the <code class="codeph">ADD_OUTBOUND</code> procedure to set up any of the configurations described in <span class="q">"<a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" title="When you configure XStream Out, you must configure XStream components to capture database changes and send these changes to the outbound server in the form of logical change records (LCRs).">Decide How to Configure XStream Out</a>"</span>. However, if you chose to configure local capture and outbound server on the same database, then it is usually easier to use the <code class="codeph">CREATE_OUTBOUND</code> procedure to configure all of the components simultaneously. See <span class="q">"<a href="configuring-xstream-out.html#GUID-824451F5-B309-47D4-8798-9B9C522A28B6" title="The CREATE_OUTBOUND procedure in the DBMS_XSTREAM_ADM package creates a capture process, queue, and outbound server in a single database.">Configuring an Outbound Server Using CREATE_OUTBOUND</a>"</span>.
                        </p>
                        <p>This section includes an example that configures downstream capture and the outbound server in the same database.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__GUID-A4D68D63-C73D-491C-A4B1-067EAA12F747">Prerequisites</p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>Before configuring XStream Out, ensure that the following prerequisites are met:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Complete the tasks described in <span class="q">"<a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.">Prerequisites for Configuring XStream Out</a>"</span>.
                              </p>
                              <p>If you decide to use downstream capture, then you must configure log file transfer from the source database to a downstream database. See <span class="q">"<a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6" title="If you decided to use a local capture process, then log file transfer is not required. However, if you decided to use downstream capture that uses redo transport services to transfer archived redo log files to the downstream database automatically, then configure log file transfer from the source database to the capture database.">If Required, Configure Log File Transfer to a Downstream Database</a>"</span>.
                              </p>
                              <p>If you want to use real-time downstream capture, then you must also add the required standby redo logs. See <span class="q">"<a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66" title="If you decided to configure real-time downstream capture, then add standby redo logs to the capture database.">If Required, Add Standby Redo Logs for Real-Time Downstream Capture</a>"</span>.
                              </p>
                              <p>The example in this section uses downstream capture. Therefore, log file transfer must be configured to complete the example.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__GUID-7A4A9819-085E-4AEB-AE92-656DA6AD6E46">Assumptions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This section makes the following assumptions:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The name of the outbound server is <code class="codeph">xout</code>.
                              </p>
                           </li>
                           <li>
                              <p>The queue used by the outbound server is <code class="codeph">xstrmadmin.xstream_queue</code>.
                              </p>
                           </li>
                           <li>
                              <p>The source database is <code class="codeph">db1.example.com</code>.
                              </p>
                           </li>
                           <li>
                              <p>The capture process and outbound server run on a different database than the source database. Therefore, downstream capture is configured.</p>
                           </li>
                           <li>
                              <p>DML and DDL changes made to the <code class="codeph">oe.orders</code> and <code class="codeph">oe.order_items</code> tables are sent to the outbound server.
                              </p>
                           </li>
                           <li>
                              <p>DML and DDL changes made to the <code class="codeph">hr</code> schema are sent to the outbound server.
                              </p>
                           </li>
                        </ul>
                        <p><a href="configuring-xstream-out.html#GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__CEGDGBFF">Figure 4-7</a> provides an overview of this XStream Out configuration.
                        </p>
                        <div class="figure" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__CEGDGBFF">
                           <p class="titleinfigure">Figure 4-7 Sample XStream Out Configuration Created Using ADD_OUTBOUND</p><img src="img/xstrm077.png" width="408" alt="Description of Figure 4-7 follows" title="Description of Figure 4-7 follows" longdesc="img_text/xstrm077.html"><br><a href="img_text/xstrm077.html">Description of "Figure 4-7 Sample XStream Out Configuration Created Using ADD_OUTBOUND"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__GUID-E4E80C6F-6573-46BC-B620-6E8B64203FA5">To create an outbound server using the <span class="bold"><code class="codeph">ADD_OUTBOUND</code></span> procedure:
                        </p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, connect to the database that will run the capture process (the capture database) as the XStream administrator.</p>
                              <p>See <a href="../admin/index.html" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </li>
                           <li>
                              <p>Create the queue that will be used by the capture process.</p>
                              <p>For example, run the following procedure:</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_XSTREAM_ADM.SET_UP_QUEUE(
    queue_table =&gt; 'xstrmadmin.xstream_queue_table',
    queue_name  =&gt; 'xstrmadmin.xstream_queue');
END;
/
</pre></li>
                           <li>
                              <p>Create the database link from the downstream capture database to the source database.</p>
                              <p>In this example, create a database link from the downstream capture database to <code class="codeph">db1.example.com</code>. For example, if the user <code class="codeph">xstrmadmin</code> is the XStream administrator on both databases, then create the following database link:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE DATABASE LINK db1.example.com CONNECT TO xstrmadmin 
   IDENTIFIED BY <span class="italic">password</span> USING 'db1.example.com';
</pre><p>See <span class="q">"<a href="configuring-xstream-out.html#GUID-5698C419-C872-4214-933E-B87E7A99FF2C" title="Network connectivity and database links are required when an XStream Out configuration includes multiple databases.">If Required, Configure Network Connectivity and Database Links</a>"</span>.
                              </p>
                              <p>If you do not create the database link, then you must complete the following steps in source database:</p>
                              <ol type="a">
                                 <li>
                                    <p>Connect to the source database as the XStream administrator.</p>
                                 </li>
                                 <li>
                                    <p>Run the <code class="codeph">DBMS_CAPTURE_ADM.BUILD</code> procedure. For example:
                                    </p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
  scn  NUMBER;
BEGIN
  DBMS_CAPTURE_ADM.BUILD(
    first_scn =&gt; scn);
  DBMS_OUTPUT.PUT_LINE('First SCN Value = ' || scn);
END;
/
First SCN Value = 409391
</pre><p>This procedure displays the valid first SCN value for the capture process that will be created in the downstream capture database. Make a note of the SCN value returned because you will use it when you create the capture process in Step&nbsp;<a href="configuring-xstream-out.html#GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__CBDHHGBG">4</a>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Ensure that required supplemental logging is specified for the database objects at the source database.</p>
                                    <p>For this example, ensure that supplemental logging is configured for the <code class="codeph">hr</code> schema, the <code class="codeph">oe.orders</code> table, and the <code class="codeph">oe.order_items</code> table in the <code class="codeph">db1.example.com</code> database.
                                    </p>
                                    <p>See <span class="q">"<a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="When you use a capture process to capture changes, supplemental logging must be specified for certain columns at a source database for changes to the columns to be applied successfully at a destination database.">If Required, Configure Supplemental Logging</a>"</span> for instructions about specifying supplemental logging.
                                    </p>
                                 </li>
                              </ol>
                              <p>These steps are not required if you create the database link.</p>
                           </li>
                           <li id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__CBDHHGBG">
                              <p>While connected to the downstream capture database, create the capture process and add rules to it.</p>
                              <p>For example, run the following procedure to create the capture process:</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_CAPTURE_ADM.CREATE_CAPTURE(
    queue_name         =&gt; 'xstrmadmin.xstream_queue',
    capture_name       =&gt; 'xout_capture',
    capture_class      =&gt; 'xstream');
END;
/
</pre><p>Add rules to the capture process's rule sets to capture changes to the <code class="codeph">hr</code> schema, the <code class="codeph">oe.orders</code> table, and the <code class="codeph">oe.order_items</code> table.
                              </p>
                              <p>For example, run the following procedures to create the rules:</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_XSTREAM_ADM.ADD_SCHEMA_RULES(
    schema_name     =&gt; 'hr',
    streams_type    =&gt; 'capture',
    streams_name    =&gt; 'xout_capture',
    queue_name      =&gt; 'xstrmadmin.xstream_queue',
    include_dml     =&gt; TRUE,
    include_ddl     =&gt; TRUE,
    source_database =&gt; 'db1.example.com');
END;
/

BEGIN 
  DBMS_XSTREAM_ADM.ADD_TABLE_RULES(
    table_name      =&gt;  'oe.orders',
    streams_type    =&gt; 'capture',
    streams_name    =&gt; 'xout_capture',
    queue_name      =&gt; 'xstrmadmin.xstream_queue',
    include_dml     =&gt; TRUE,
    include_ddl     =&gt; TRUE,
    source_database =&gt; 'db1.example.com');
END;
/

BEGIN 
  DBMS_XSTREAM_ADM.ADD_TABLE_RULES(
    table_name      =&gt;  'oe.order_items',
    streams_type    =&gt; 'capture',
    streams_name    =&gt; 'xout_capture',
    queue_name      =&gt; 'xstrmadmin.xstream_queue',
    include_dml     =&gt; TRUE,
    include_ddl     =&gt; TRUE,
    source_database =&gt; 'db1.example.com');
END;
/
</pre><p>Do not start the capture process.</p>
                           </li>
                           <li>
                              <p>Run the <code class="codeph">ADD_OUTBOUND</code> procedure.
                              </p>
                              <p>Given the assumption for this section, run the following <code class="codeph">ADD_OUTBOUND</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">DECLARE
  tables  DBMS_UTILITY.UNCL_ARRAY;
  schemas DBMS_UTILITY.UNCL_ARRAY;
BEGIN
    tables(1)  := 'oe.orders';
    tables(2)  := 'oe.order_items';
    schemas(1) := 'hr';
  DBMS_XSTREAM_ADM.ADD_OUTBOUND(
    server_name     =&gt;  'xout',
    queue_name      =&gt;  'xstrmadmin.xstream_queue',
    source_database =&gt;  'db1.example.com',
    table_names     =&gt;  tables,
    schema_names    =&gt;  schemas);
END;
/
</pre><p>Running this procedure performs the following actions:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Creates an outbound server named <code class="codeph">xout</code>. The outbound server has rule sets that instruct it to send DML and DDL changes to the <code class="codeph">oe.orders</code> table, the <code class="codeph">oe.order_items</code> table, and the <code class="codeph">hr</code> schema to the client application. The rules specify that these changes must have originated at the <code class="codeph">db1.example.com</code> database. The outbound server dequeues LCRs from the queue <code class="codeph">xstrmadmin.xstream_queue</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Sets the current user as the connect user for the outbound server. In this example, the current user is the XStream administrator. The client application must connect to the database as the connect user to interact with the outbound server.</p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__GUID-AC758A03-4712-4C66-8BBA-09F461B8FE14">
                                 <p class="notep1">Note:</p>
                                 <p>The <code class="codeph">server_name</code> value cannot exceed 30 bytes.
                                 </p>
                              </div>
                              <div class="infobox-tip" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__GUID-7DAD7EA6-4110-4C8F-B536-BFB9A9D5409C">
                                 <p class="notep1">Tip:</p>
                                 <p>For the outbound server to receive all of the LCRs sent by the capture process, specify <code class="codeph">NULL</code> (the default) for the <code class="codeph">table_names</code> and <code class="codeph">schema_names</code> parameters.
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>Create and run the client application that will connect to the outbound server and receive the LCRs. See <a href="sample-xstream-client-application.html#GUID-B914FF75-92AA-4270-BF71-E9A5AA9228F8" title="Examples illustrate how to configure the Oracle Database components that are used by XStream. The examples configure sample client applications that communicate with an XStream outbound server and inbound server.">Sample XStream Client Application</a> for a sample application.
                              </p>
                              <p>When you run the client application, the outbound server is started automatically.</p>
                           </li>
                           <li>
                              <p>To add one or more additional outbound servers that receive LCRs from the capture process created in Step <a href="configuring-xstream-out.html#GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__CBDHHGBG">4</a>, follow the instructions in <span class="q">"<a href="configuring-xstream-out.html#GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD" title="XStream Out configurations often require multiple outbound servers that process a stream of LCRs from a single capture process. You can add an additional outbound server to a database that already includes at least one outbound server.">Adding an Additional Outbound Server to a Capture Process Stream</a>"</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__GUID-A62E970E-69E9-433F-B48F-5CD105D9561B">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS70188" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB" title="An outbound server in an XStream Out configuration streams Oracle database changes to a client application.">Configuring XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72998"></a><div class="props_rev_3"><a id="GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" name="GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719"></a><h4 id="XSTRM-GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" class="sect4"><span class="enumeration_section">4.2.4 </span>Configuring XStream Out in a CDB
                  </h4>
                  <div>
                     <p>When you configure XStream Out in a CDB, you must decide which database changes will be captured by XStream Out and sent to the client application. </p>
                     <p>XStream Out can stream all database changes for all containers, including the CDB root and all PDBs, application roots, and application PDBs, or XStream Out can stream the changes from specific containers. In addition, you can configure XStream Out with local capture, or you can configure it with downstream capture to offload the work required to capture changes from the source database.</p>
                     <p>The following restrictions apply when you configure XStream Out in a CDB:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The capture process and outbound server must be in the CDB root.</p>
                        </li>
                        <li>
                           <p>The capture process and outbound server must be in the same CDB.</p>
                        </li>
                        <li>
                           <p>Each container in the CDB must be open during XStream Out configuration.</p>
                        </li>
                        <li>
                           <p>When changes made to an application root are captured, you must ensure that <code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code> statements are replicated only to other application roots.
                           </p>
                        </li>
                     </ul>
                     <p>In addition, ensure that you create the XStream administrator properly for a CDB.</p>
                     <div class="infoboxnote" id="GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719__GUID-1A3069BE-D8C1-4258-BB59-4036CB35DC09">
                        <p class="notep1">Note:</p>
                        <p>When a container is created using a non-CDB, any XStream Out components from the non-CDB cannot be used in the container. You must drop and re-create the XStream Out components, including the capture process and outbound servers, in the CDB root.</p>
                     </div>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669">Configuring XStream Out with Local Capture in a CDB</a><br>An example illustrates configuring XStream Out with local capture in a CDB.
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A">Configuring XStream Out with Downstream Capture in CDBs</a><br>Using downstream capture, the XStream Out components can reside in databases other than the source database.
                        </li>
                     </ul>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="xstream-out-concepts.html#GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579" title="A multitenant environment enables a database to contain a portable set of schemas, objects, and related structures that appears logically to an application as a separate database.">XStream Out and a Multitenant Environment</a></li>
                           <li><a href="general-xstream-concepts.html#GUID-60589C03-2095-42AA-8F2F-AFD83B110F31" title="In a CDB, XStream Out must be configured in the CDB root. Therefore, the PL/SQL procedures in the DBMS_XSTREAM_ADM package that create system-created rules must be run in the CDB root while connected as a common user.">System-Created Rules in a CDB and XStream Out</a></li>
                           <li><a href="configuring-xstream-out.html#GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128" title="An XStream administrator configures and manages XStream components in an XStream Out environment.">Configure an XStream Administrator on All Databases</a></li>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=MULTI-GUID-F68E6FE9-919B-4665-95F7-785E69E07264" target="_blank"><span><cite>Oracle Multitenant Administrator's Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB" title="An outbound server in an XStream Out configuration streams Oracle database changes to a client application.">Configuring XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72922"></a><a id="XSTRM72923"></a><a id="XSTRM72941"></a><a id="XSTRM72921"></a><div class="props_rev_3"><a id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669" name="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669"></a><h5 id="XSTRM-GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669" class="sect5"><span class="enumeration_section">4.2.4.1 </span>Configuring XStream Out with Local Capture in a CDB
                     </h5>
                     <div>
                        <p>An example illustrates configuring XStream Out with local capture in a CDB.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-00AD2429-E547-452E-98A6-CA92348CBA65">Prerequisites</p>
                           <p>Before configuring XStream Out, ensure that all containers in the CDB are in open read/write mode during XStream Out configuration.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-84DC71F1-4410-424A-972F-3060FC80405F">Assumptions</p>
                           <p>This section makes the following assumptions:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The capture process will be a local capture process, and it will run on the same database as the outbound server.</p>
                              </li>
                              <li>
                                 <p>The name of the outbound server is <code class="codeph">xout</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>Data manipulation language (DML) and data definition language (DDL) changes made to the <code class="codeph">oe.orders</code> and <code class="codeph">oe.order_items</code> tables in PDB <code class="codeph">pdb1.example.com</code> are sent to the outbound server.
                                 </p>
                              </li>
                              <li>
                                 <p>DML and DDL changes made to the <code class="codeph">hr</code> schema in the PDB <code class="codeph">pdb1.example.com</code> are sent to the outbound server.
                                 </p>
                              </li>
                           </ul>
                           <p><a href="configuring-xstream-out.html#GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__BHCJJGJI">Figure 4-8</a> provides an overview of this XStream Out configuration.
                           </p>
                           <div class="figure" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__BHCJJGJI">
                              <p class="titleinfigure">Figure 4-8 Sample XStream Out Configuration Created Using CREATE_OUTBOUND for a PDB</p><img src="img/xstrm084.png" width="586" alt="Description of Figure 4-8 follows" title="Description of Figure 4-8 follows" longdesc="img_text/xstrm084.html"><br><a href="img_text/xstrm084.html">Description of "Figure 4-8 Sample XStream Out Configuration Created Using CREATE_OUTBOUND for a PDB"</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-D9311E5F-77CA-4913-BDB2-0B213ABEEFA4">To create an outbound server using the <code class="codeph">CREATE_OUTBOUND</code> procedure:
                           </p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, connect to the root in the CDB (not to the PDB <code class="codeph">pdb1.example.com</code>) as the XStream administrator.
                                 </p>
                              </li>
                              <li>
                                 <p>Create the outbound server and other XStream components.</p>
                                 <ol type="a">
                                    <li>
                                       <p>Ensure that all containers in the source CDB are in open read/write mode.</p>
                                    </li>
                                    <li id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__BHCHIDBF">
                                       <p>Run the <code class="codeph">CREATE_OUTBOUND</code> procedure.
                                       </p>
                                       <p>Given the assumptions for this example, run the following <code class="codeph">CREATE_OUTBOUND</code> procedure:
                                       </p><pre class="pre codeblock"><code>DECLARE
  tables  DBMS_UTILITY.UNCL_ARRAY;
  schemas DBMS_UTILITY.UNCL_ARRAY;
BEGIN
    tables(1)  := 'oe.orders';
    tables(2)  := 'oe.order_items';
    schemas(1) := 'hr';
  DBMS_XSTREAM_ADM.CREATE_OUTBOUND(
    server_name     =&gt;  'xout',
    source_database =&gt;  'pdb1.example.com',
    table_names     =&gt;  tables,
    schema_names    =&gt;  schemas);
END;
/
</code></pre><div class="infoboxnote" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-3F2AE034-37D6-42BA-B960-D4DA290E1B30">
                                          <p class="notep1">Note:</p>
                                          <p>To capture changes in all containers in a CDB, including the CDB root, all PDBs, all application roots, and all application PDBs, and send those changes to the XStream client application, you can omit the <code class="codeph">source_database</code> parameter when you run the <code class="codeph">CREATE_OUTBOUND</code> procedure.
                                          </p>
                                       </div>
                                    </li>
                                    <li>
                                       <p>After the <code class="codeph">CREATE_OUTBOUND</code> procedure completes successfully, optionally change the open mode of one or more containers if necessary.
                                       </p>
                                    </li>
                                 </ol>
                                 <p>Running the procedure in Step <a href="configuring-xstream-out.html#GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__BHCHIDBF">b</a> performs the following actions:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Configures supplemental logging for the <code class="codeph">oe.orders</code> and <code class="codeph">oe.order_items</code> tables and for all tables in the <code class="codeph">hr</code> schema in the <code class="codeph">pdb1.example.com</code> PDB.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Creates a queue with a system-generated name that is used by the capture process and the outbound server.</p>
                                    </li>
                                    <li>
                                       <p>Creates and starts a capture process with a system-generated name with rule sets that instruct it to capture DML and DDL changes to the <code class="codeph">oe.orders</code> table, the <code class="codeph">oe.order_items</code> table, and the <code class="codeph">hr</code> schema from the <code class="codeph">pdb1.example.com</code> PDB.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Creates and starts an outbound server named <code class="codeph">xout</code> with rule sets that instruct it to send DML and DDL changes to the <code class="codeph">oe.orders</code> table, the <code class="codeph">oe.order_items</code> table, and the <code class="codeph">hr</code> schema to the client application.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Sets the current user as the connect user for the outbound server. In this example, the current user is the XStream administrator. The client application must connect to the database as the connect user to interact with the outbound server.</p>
                                    </li>
                                 </ul>
                                 <div class="infoboxnote" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-675A65B7-B11D-41A0-859F-2DC85081FCB2">
                                    <p class="notep1">Note:</p>
                                    <p>The <code class="codeph">server_name</code> value cannot exceed 30 bytes.
                                    </p>
                                 </div>
                                 <div class="infobox-tip" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-28CF918F-2949-43B6-AFD1-2B117B7D40F9">
                                    <p class="notep1">Tip:</p>
                                    <p>To capture and send all database changes from the <code class="codeph">pdb1.example.com</code> database to the outbound server, specify <code class="codeph">NULL</code> (the default) for the <code class="codeph">table_names</code> and <code class="codeph">schema_names</code> parameters.
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p>Create and run the client application that will connect to the outbound server in the root of the CDB and receive the LCRs.</p>
                                 <p>When you run the client application, the outbound server is started automatically.</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.">Prerequisites for Configuring XStream Out</a></li>
                              <li><a href="sample-xstream-client-application.html#GUID-B914FF75-92AA-4270-BF71-E9A5AA9228F8" title="Examples illustrate how to configure the Oracle Database components that are used by XStream. The examples configure sample client applications that communicate with an XStream outbound server and inbound server.">Sample XStream Client Application</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" title="When you configure XStream Out in a CDB, you must decide which database changes will be captured by XStream Out and sent to the client application.">Configuring XStream Out in a CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72926"></a><a id="XSTRM72927"></a><a id="XSTRM72928"></a><a id="XSTRM72925"></a><div class="props_rev_3"><a id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A" name="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A"></a><h5 id="XSTRM-GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A" class="sect5"><span class="enumeration_section">4.2.4.2 </span>Configuring XStream Out with Downstream Capture in CDBs
                     </h5>
                     <div>
                        <p>Using downstream capture, the XStream Out components can reside in databases other than the source database.</p>
                        <div class="section">When you have multiple CDBs, the source database can be in one CDB, and you can use downstream capture to capture the changes in another CDB.</div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__GUID-F64F89D7-DA05-467B-8EC7-E37228C54AA4">Prerequisites</p>
                           <p>Before configuring XStream Out, the following prerequisites must be met:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Ensure that all containers in the CDB are in open read/write mode during XStream Out configuration.</p>
                              </li>
                              <li>
                                 <p>This example uses downstream capture. Therefore, you must configure log file transfer from the source database to a downstream database.</p>
                              </li>
                              <li>
                                 <p>If you want to use real-time downstream capture, then you must also add the required standby redo logs.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__GUID-D96EFF46-F06B-46A0-A290-92D845C7820D">Assumptions</p>
                           <p>This section makes the following assumptions:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The name of the outbound server is <code class="codeph">xout</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The queue used by the outbound server is <code class="codeph">c##xstrmadmin.xstream_queue</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The source database is the PDB <code class="codeph">pdb1.example.com</code> in the CDB <code class="codeph">data.example.com</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The capture process runs in the CDB <code class="codeph">capture.example.com</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The outbound server runs in the CDB <code class="codeph">capture.example.com</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>DML and DDL changes made to the <code class="codeph">oe.orders</code> and <code class="codeph">oe.order_items</code> tables from the PDB <code class="codeph">pdb1.example.com</code> are sent to the outbound server.
                                 </p>
                              </li>
                              <li>
                                 <p>DML and DDL changes made to the <code class="codeph">hr</code> schema from the PDB <code class="codeph">pdb1.example.com</code> are sent to the outbound server.
                                 </p>
                              </li>
                           </ul>
                           <p>The following figure gives an overview of this XStream Out configuration.</p>
                           <div class="figure" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCDEHBB">
                              <p class="titleinfigure">Figure 4-9 Sample XStream Out Configuration Using Multiple CDBs and Downstream Capture </p><img src="img/xstrm085.png" width="594" alt="Description of Figure 4-9 follows" title="Description of Figure 4-9 follows" longdesc="img_text/xstrm085.html"><br><a href="img_text/xstrm085.html">Description of "Figure 4-9 Sample XStream Out Configuration Using Multiple CDBs and Downstream Capture "</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__GUID-4731220D-3633-4364-A189-721FD3517454">To configure XStream Out with downstream capture in CDBs:</p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, connect to the root of the downstream capture CDB as the XStream administrator.</p>
                                 <p>In this example. the downstream capture CDB is <code class="codeph">capture.example.com</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>Create the queue that will be used by the capture process.</p>
                                 <p>For example, run the following procedure:</p><pre class="pre codeblock"><code>BEGIN
  DBMS_XSTREAM_ADM.SET_UP_QUEUE(
    queue_table =&gt; 'c##xstrmadmin.xstream_queue_table',
    queue_name  =&gt; 'c##xstrmadmin.xstream_queue');
END;
/
</code></pre></li>
                              <li id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCCCAIA">
                                 <p>Optionally, create the database link from the root in the downstream capture CDB to the root in the source CDB.</p>
                                 <p>In this example, create a database link from the root in <code class="codeph">capture.example.com</code> to the root in <code class="codeph">data.example.com</code>. For example, if the user <code class="codeph">c##xstrmadmin</code> is the XStream administrator on both databases, then create the following database link:
                                 </p><pre class="pre codeblock"><code>CREATE DATABASE LINK data.example.com CONNECT TO c##xstrmadmin 
   IDENTIFIED BY <span class="italic">password</span> USING 'data.example.com';
</code></pre></li>
                              <li>
                                 <p>Ensure that all containers in the source CDB are in open read/write mode.</p>
                              </li>
                              <li>
                                 <p>If you did not create the database link in Step <a href="configuring-xstream-out.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCCCAIA">3</a>, then you must complete additional steps in the root of the source CDB.
                                 </p>
                                 <p>These steps are not required if you created the database link in Step <a href="configuring-xstream-out.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCCCAIA">3</a>.
                                 </p>
                                 <p>Run the <code class="codeph">BUILD</code> procedure and ensure that required supplemental logging is specified for the database objects in the source CDB:
                                 </p>
                                 <ol type="a">
                                    <li>
                                       <p>Connect to the root in the source CDB as the XStream administrator.</p>
                                    </li>
                                    <li>
                                       <p>Run the <code class="codeph">DBMS_CAPTURE_ADM.BUILD</code> procedure. For example:
                                       </p><pre class="pre codeblock"><code>SET SERVEROUTPUT ON
DECLARE
  scn  NUMBER;
BEGIN
  DBMS_CAPTURE_ADM.BUILD(
    first_scn =&gt; scn);
  DBMS_OUTPUT.PUT_LINE('First SCN Value = ' || scn);
END;
/
First SCN Value = 409391
</code></pre><p>This procedure displays the valid first SCN value for the capture process that will be created in the root in the <code class="codeph">capture.example.com</code> CDB. Make a note of the SCN value returned because you will use it when you create the capture process in Step&nbsp;<a href="configuring-xstream-out.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCHAEJF">6</a>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Ensure that required supplemental logging is specified for the database objects in the source CDB.</p>
                                       <p>For this example, ensure that supplemental logging is configured for the <code class="codeph">hr</code> schema, the <code class="codeph">oe.orders</code> table, and the <code class="codeph">oe.order_items</code> table in the <code class="codeph">pdb1.example.com</code> PDB.
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCHAEJF">
                                 <p>While connected to the root in the downstream capture CDB, create the capture process.</p>
                                 <p>For example, run the following procedure to create the capture process while connected as the XStream administrator to <code class="codeph">capture.example.com</code>:
                                 </p><pre class="pre codeblock"><code>BEGIN
  DBMS_CAPTURE_ADM.CREATE_CAPTURE(
    queue_name         =&gt; 'c##xstrmadmin.xstream_queue',
    capture_name       =&gt; 'real_time_capture',
    rule_set_name      =&gt; NULL,
    start_scn          =&gt; NULL,
    source_database    =&gt; NULL,
    use_database_link  =&gt; TRUE,
    first_scn          =&gt; NULL,
    logfile_assignment =&gt; 'implicit',
    source_root_name   =&gt; 'data.example.com',
    capture_class      =&gt; 'xstream');
END;
/
</code></pre><p>If you did not create a database link in Step <a href="configuring-xstream-out.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCCCAIA">3</a>, then specify the SCN value returned by the <code class="codeph">DBMS_CAPTURE_ADM.BUILD</code> procedure for the <code class="codeph">first_scn</code> parameter.
                                 </p>
                                 <p>Do not start the capture process.</p>
                              </li>
                              <li>
                                 <p>After the capture process is created, optionally change the open mode of one or more PDBs if necessary.</p>
                              </li>
                              <li>
                                 <p>Run the <code class="codeph">ADD_OUTBOUND</code> procedure.
                                 </p>
                                 <p>Given the assumption for this section, run the following <code class="codeph">ADD_OUTBOUND</code> procedure:
                                 </p><pre class="pre codeblock"><code>DECLARE
  tables  DBMS_UTILITY.UNCL_ARRAY;
  schemas DBMS_UTILITY.UNCL_ARRAY;
BEGIN
    tables(1)  := 'oe.orders';
    tables(2)  := 'oe.order_items';
    schemas(1) := 'hr';
  DBMS_XSTREAM_ADM.ADD_OUTBOUND(
    server_name           =&gt;  'xout',
    queue_name            =&gt;  'c##xstrmadmin.xstream_queue',
    source_database       =&gt;  'pdb1.example.com',
    table_names           =&gt;  tables,
    schema_names          =&gt;  schemas,
    source_root_name      =&gt; 'data.example.com',
    source_container_name =&gt; 'pdb1');
END;
/
</code></pre><p>Running this procedure performs the following actions:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Creates an outbound server named <code class="codeph">xout</code>. The outbound server has rule sets that instruct it to send DML and DDL changes to the <code class="codeph">oe.orders</code> table, the <code class="codeph">oe.order_items</code> table, and the <code class="codeph">hr</code> schema to the client application. The rules specify that these changes must have originated at the PDB <code class="codeph">pdb1.example.com</code> in the CDB <code class="codeph">data.example.com</code>. The outbound server dequeues LCRs from the queue <code class="codeph">c##xstrmadmin.xstream_queue</code>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Sets the current user as the <code class="codeph">connect_user</code> for the outbound server. In this example, the <code class="codeph">current_user</code> is the XStream administrator. The client application must connect to the database as the <code class="codeph">connect_user</code> to interact with the outbound server.
                                       </p>
                                    </li>
                                 </ul>
                                 <div class="infoboxnote" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__GUID-692609D0-11F7-4EE7-9F4C-55DB5E31F93D">
                                    <p class="notep1">Note:</p>
                                    <p>The <code class="codeph">server_name</code> value cannot exceed 30 bytes.
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p>Create and run the client application that will connect to the outbound server and receive the LCRs.</p>
                                 <p>When you run the client application, the outbound server is started automatically at the downstream capture CDB.</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="Preparing for an XStream Out outbound server is similar to preparing for an Oracle Replication environment.">Prerequisites for Configuring XStream Out</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-xstream-out.html#GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" title="When you configure XStream Out in a CDB, you must decide which database changes will be captured by XStream Out and sent to the client application.">Configuring XStream Out in a CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
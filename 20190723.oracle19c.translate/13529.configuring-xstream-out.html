<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can configure the Oracle Database components that are used by XStream Out."></meta>
      <meta name="description" content="You can configure the Oracle Database components that are used by XStream Out."></meta>
      <title>配置XStream Out</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="XStream Guide "></meta>
      <meta property="og:description" content="You can configure the Oracle Database components that are used by XStream Out."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="XStream Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xstream-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:45:15-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2009, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96280-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="xstream-out-concepts.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-xstream-out.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XStream Guide"></meta>
    <meta name="dcterms.isVersionOf" content="XSTRM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="xstream-out-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-xstream-out.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">XStream指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="xstream-out.html" property="item" typeof="WebPage"><span property="name">XStream Out</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">配置XStream Out</li>
            </ol>
            <a id="GUID-1338E648-E214-4666-98A1-8B8D0085EB23" name="GUID-1338E648-E214-4666-98A1-8B8D0085EB23"></a><a id="XSTRM1496"></a>
            
            <h2 id="XSTRM-GUID-1338E648-E214-4666-98A1-8B8D0085EB23" class="sect2"><span class="enumeration_chapter">4</span>配置XStream Out</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以配置XStream Out使用的Oracle数据库组件。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-2E0A2D4F-9199-4E45-8EA5-EEF21074FF5D">准备XStream Out</a><br>有决定完成和完成任务以准备XStream Out配置。
                  </li>
                  <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB">配置XStream Out</a><br>XStream Out配置中的出站服务器将Oracle数据库更改流式传输到客户端应用程序。
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-1338E648-E214-4666-98A1-8B8D0085EB23__GUID-D8162E35-F0DB-45EC-9579-5B0DAEBD7248">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" title="熟悉与XStream Out相关的概念。">XStream Out Concepts</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="introduction-to-xstream.html#GUID-21FC23DF-2881-4CFD-AF74-9A1173D768FF" title="有几种常见的XStream用例。">XStream用例</a> ”</span></p>
                     </li>
                     <li>
                        <p><a href="../lnoci/intro-to-oci-interface-for-XStream.html#LNOCI72903" target="_blank"><span><cite>Oracle调用接口程序员指南</cite></span></a></p>
                     </li>
                     <li>
                        <p><a href="../stxjv/index.html" target="_blank"><span><cite>Oracle数据库XStream Java API参考</cite></span></a></p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="xstream-out.html#GUID-40B2996E-433C-4240-8022-8505273F99EF" title="您可以配置和管理XStream Out环境。">XStream Out</a></p>
                  </div>
               </div>
            </div>
            <a id="XSTRM1554"></a><div class="props_rev_3"><a id="GUID-2E0A2D4F-9199-4E45-8EA5-EEF21074FF5D" name="GUID-2E0A2D4F-9199-4E45-8EA5-EEF21074FF5D"></a><h3 id="XSTRM-GUID-2E0A2D4F-9199-4E45-8EA5-EEF21074FF5D" class="sect3"><span class="enumeration_section">4.1</span>准备XStream Out</h3>
               <p>有决定完成和完成任务以准备XStream Out配置。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2">决定如何配置XStream Out</a><br>配置XStream Out时，必须配置XStream组件以捕获数据库更改，并以逻辑更改记录（LCR）的形式将这些更改发送到出站服务器。
                     </li>
                     <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E">配置XStream Out的先决条件</a><br>准备XStream Out出站服务器与准备Oracle Replication环境类似。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-1338E648-E214-4666-98A1-8B8D0085EB23" title="您可以配置XStream Out使用的Oracle数据库组件。">配置XStream Out</a></p>
                     </div>
                  </div>
               </div>
               <a id="XSTRM72688"></a><a id="XSTRM72689"></a><a id="XSTRM72690"></a><a id="XSTRM72691"></a><a id="XSTRM1555"></a><div class="props_rev_3"><a id="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" name="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2"></a><h4 id="XSTRM-GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" class="sect4"><span class="enumeration_section">4.1.1</span>确定如何配置XStream Out</h4>
                  <div>
                     <p>配置XStream Out时，必须配置XStream组件以捕获数据库更改，并以逻辑更改记录（LCR）的形式将这些更改发送到出站服务器。</p>
                     <p>这些组件包括捕获过程和至少一个队列。捕获过程可以是本地捕获过程或下游捕获过程。对于某些配置，您还必须配置传播。</p>
                     <p>本地捕获意味着捕获进程在源数据库上运行。源数据库是生成更改的数据库。下游捕获意味着捕获进程在源数据库以外的数据库上运行。使用下游捕获的主要原因是减少源数据库的负载，从而提高其性能。使用本地捕获的主要原因是它更易于配置和维护。</p>
                     <p>捕获对源数据库所做更改的数据库称为<span class="bold">捕获数据库</span> 。以下数据库之一可以是捕获数据库：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>源数据库（本地捕获）</p>
                        </li>
                        <li>
                           <p>目标数据库（下游捕获）</p>
                        </li>
                        <li>
                           <p>第三个数据库（下游捕获）</p>
                        </li>
                     </ul>
                     <p>如果运行出站服务器的数据库不是捕获数据库，则传播会将更改从捕获数据库发送到运行出站服务器的数据库。如果运行出站服务器的数据库是捕获数据库，则不需要在数据库之间进行此传播，因为捕获进程和出站服务器使用相同的队列。</p>
                     <p>您可以通过以下方式配置组件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">同一数据库中的本地捕获和出站服务器：</span>数据库对象，捕获进程和出站服务器都在同一个数据库中。此配置最容易配置和维护，因为所有组件都包含在一个数据库中。有关此配置的概述，请参<a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGEIJEJ">见图4-1</a> 。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">不同数据库中的本地捕获和出站服务器：</span>数据库对象和捕获进程位于一个数据库中，出站服务器位于另一个数据库中。传播将LCR从源数据库发送到出站服务器数据库。当您希望轻松配置和维护以及希望优化出站服务器数据库的性能时，此配置最佳。有关此配置的概述，请参<a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGCDFID">见图4-2</a> 。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">同一数据库中的下游捕获和出站服务器：</span>数据库对象位于一个数据库中，捕获进程和出站服务器位于另一个数据库中。当您希望使用数据库对象优化数据库的性能并希望将更改捕获卸载到另一个数据库时，此配置最佳。使用此配置，大多数组件使用出站服务器在数据库上运行。有关此配置的概述，请参<a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGGGFCG">见图4-3</a> 。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">不同数据库中的下游捕获和出站服务器：</span>数据库对象位于一个数据库中，出站服务器位于另一个数据库中，捕获进程位于第三个数据库中。当您希望优化数据库与数据库对象和数据库与出站服务器的性能时，此配置最佳。使用此配置，捕获进程在第三个数据库上运行，并且传播将LCR从捕获数据库发送到出站服务器数据库。有关此配置的概述，请参<a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGDBHAH">见图4-4</a> 。
                           </p>
                        </li>
                     </ul>
                     <p>下图说明了这些不同的配置。</p>
                     <div class="figure" id="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGEIJEJ">
                        <p class="titleinfigure">图4-1同一数据库中的本地捕获和出站服务器</p><img src="img/xstrm075.png" width="565" alt="下面是图4-1的描述" title="下面是图4-1的描述" longdesc="img_text/xstrm075.html"><br><a href="img_text/xstrm075.html">“图4-1同一数据库中的本地捕获和出站服务器”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="figure" id="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGCDFID">
                        <p class="titleinfigure">图4-2不同数据库中的本地捕获和出站服务器</p><img src="img/xstrm076.png" width="565" alt="下面是图4-2的描述" title="下面是图4-2的描述" longdesc="img_text/xstrm076.html"><br><a href="img_text/xstrm076.html">“图4-2不同数据库中的本地捕获和出站服务器”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="figure" id="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGGGFCG">
                        <p class="titleinfigure">图4-3同一数据库中的下游捕获和出站服务器</p><img src="img/xstrm077.png" width="408" alt="下面是图4-3的描述" title="下面是图4-3的描述" longdesc="img_text/xstrm077.html"><br><a href="img_text/xstrm077.html">“图4-3同一数据库中的下游捕获和出站服务器”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="figure" id="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__CEGDBHAH">
                        <p class="titleinfigure">图4-4不同数据库中的下游捕获和出站服务器</p><img src="img/xstrm078.png" width="509" alt="下面是图4-4的描述" title="下面是图4-4的描述" longdesc="img_text/xstrm078.html"><br><a href="img_text/xstrm078.html">“图4-4不同数据库中的下游捕获和出站服务器”的描述</a></div>
                     <!-- class="figure" -->
                     <p>如果您决定配置下游捕获过程，则必须确定要配置的下游捕获过程的类型。可以使用以下类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">实时下游捕获进程</span>配置意味着源数据库中的重做传输服务将重做数据发送到下游数据库，下游数据库中的远程文件服务器进程（RFS）通过网络接收重做数据并存储重做数据在备用重做日志中，捕获过程实时捕获更改。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">归档日志下游捕获过程</span>配置意味着源数据库中的归档重做日志文件将复制到下游数据库，捕获过程将捕获这些归档重做日志文件中的更改。这些日志文件可以使用重做传输服务自动传输，也可以使用FTP等方法手动传输。</p>
                        </li>
                     </ul>
                     <p>实时下游捕获优于归档日志下游捕获的优势在于，实时下游捕获减少了捕获对源数据库所做更改所需的时间。时间减少是因为实时下游捕获过程不需要等待重做日志文件存档，然后才能从中捕获更改。您可以配置多个实时下游捕获进程，以捕获来自同一源数据库的更改，但您无法在一个下游数据库中为多个源数据库配置实时下游捕获。</p>
                     <p>归档日志下游捕获优于实时下游捕获的优势在于归档日志下游捕获允许下游数据库中的多个源数据库的下游捕获过程。您可以将重做日志文件从多个源数据库复制到单个下游数据库，并配置多个存档日志下游捕获进程以捕获这些重做日志文件中的更改。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2__GUID-65A8F20A-56AD-40DB-B823-AFCE78393334">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-CC32AED8-6587-4CA7-8786-CDF2C4968DB1" title="您可以将捕获过程配置为在源数据库上本地运行或在下游数据库上远程运行。">本地捕获和下游捕获</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-2E0A2D4F-9199-4E45-8EA5-EEF21074FF5D" title="有决定完成和完成任务以准备XStream Out配置。">准备XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM1498"></a><div class="props_rev_3"><a id="GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" name="GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E"></a><h4 id="XSTRM-GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" class="sect4"><span class="enumeration_section">4.1.2</span>配置XStream Out的先决条件</h4>
                  <div>
                     <p>准备XStream Out出站服务器与准备Oracle Replication环境类似。</p>
                     <p>Oracle Replication环境中用于捕获更改并将其发送到应用进程的组件与用于捕获更改并将其发送到出站服务器的组件相同。这些组件包括捕获过程和一个或多个队列。如果捕获进程在与出站服务器不同的数据库上运行，则还需要传播。</p>
                     <p>本节概述了每个任务以及有关完成XStream Out配置任务的特定信息。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128">在所有数据库上配置XStream管理员</a><br>XStream管理员在XStream Out环境中配置和管理XStream组件。
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-01D8476F-38D3-44EA-9BB1-DC10C2E67567">向XStream管理员授予其他权限</a><br>XStream管理员可能需要其他权限。
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-5698C419-C872-4214-933E-B87E7A99FF2C">如果需要，请配置网络连接和数据库链接</a><br>当XStream Out配置包含多个数据库时，需要网络连接和数据库链接。
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-2E7BDD0D-82CE-47EE-9FCF-825FCE960771">确保每个源数据库都处于ARCHIVELOG模式</a><br>生成将由捕获进程捕获的更改的每个源数据库必须处于<code class="codeph">ARCHIVELOG</code>模式。
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-E24B40DF-D1C4-4FCC-8C62-28AAEC2AE972">设置相关初始化参数</a><br>某些初始化参数对于XStream配置中组件的配置，操作，可靠性和性能很重要。适当地设置这些参数。
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-41E37368-E434-4AD7-A5E8-4786E41C8C94">配置Streams池</a><br>Streams池是系统全局区域（SGA）中的一部分内存，Oracle Replication和XStream组件都使用它。
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B">如果需要，请配置补充日志记录</a><br>使用捕获过程捕获更改时，必须为源数据库中的某些列指定补充日志记录，以更改要在目标数据库中成功应用的列。
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6">如果需要，请将日志文件传输配置到下游数据库</a><br>如果您决定使用本地捕获过程，则不需要日志文件传输。但是，如果您决定使用使用重做传输服务的下游捕获将归档重做日志文件自动传输到下游数据库，则配置从源数据库到捕获数据库的日志文件传输。
                        </li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66">如果需要，请添加备用重做日志以进行实时下游捕获</a><br>如果您决定配置实时下游捕获，则将备用重做日志添加到捕获数据库。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-2E0A2D4F-9199-4E45-8EA5-EEF21074FF5D" title="有决定完成和完成任务以准备XStream Out配置。">准备XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72816"></a><a id="XSTRM72817"></a><a id="XSTRM72993"></a><a id="XSTRM72994"></a><a id="XSTRM72995"></a><a id="XSTRM72996"></a><a id="XSTRM72997"></a><a id="XSTRM1556"></a><div class="props_rev_3"><a id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128" name="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128"></a><h5 id="XSTRM-GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128" class="sect5"><span class="enumeration_section">4.1.2.1</span>在所有数据库上配置XStream管理员</h5>
                     <div>
                        <p>XStream管理员在XStream Out环境中配置和管理XStream组件。</p>
                        <div class="section">
                           <p>您可以通过向用户授予适当的权限来配置XStream管理员。您必须在XStream配置中包含的每个Oracle数据库中配置XStream管理员。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-EBD59488-0D8A-481B-971F-DA97CA6C13C3">先决条件</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>在配置XStream管理员之前，请确保满足以下先决条件：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>确保您可以作为可以创建用户，授予权限和创建表空间的管理用户登录XStream配置中的每个数据库。</p>
                              </li>
                              <li>
                                 <p>确定可信用户模型和不受信任的用户模型之间的安全性。有关更多信息，请参见<span class="q">“ <a href="introduction-to-xstream.html#GUID-E7C2EC43-186F-4163-AAEB-1D119C9D1DF1" title="使用XStream，您可以实施最符合组织要求的安全模型。">XStream安全模型</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>确定将成为XStream管理员的用户。创建具有适当权限的新用户或将这些权限授予现有用户。</p>
                                 <p>不要将<code class="codeph">SYS</code>或<code class="codeph">SYSTEM</code>用户用作XStream管理员，并确保XStream管理员不使用<code class="codeph">SYSTEM</code>表空间作为其默认表空间。
                                 </p>
                              </li>
                              <li>
                                 <p>如果XStream管理员需要新的表空间，请确保表空间的XStream配置中的每个计算机系统上都有足够的磁盘空间。表空间的建议大小为25 MB。</p>
                              </li>
                              <li>
                                 <p>执行<code class="codeph">DBMS_XSTREAM_AUTH</code>包中的子程序的用户必须具有<code class="codeph">SYSDBA</code>管理权限，并且用户必须在连接时使用<code class="codeph">AS SYSDBA</code>行使权限。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-BACAD004-BCBB-4EE3-828E-0D8681B700ED">假设</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>本节做出以下假设：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对于非CDB，XStream管理员的用户名是<code class="codeph">xstrmadmin</code> 。对于多租户容器数据库（CDB），XStream管理员的用户名是<code class="codeph">c##xstrmadmin</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>XStream管理员使用的表空间是<code class="codeph">xstream_tbs</code> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-842F8502-BCF1-431B-A724-7AAA0B0D9634">配置XStream管理员：</p>
                           <ol>
                              <li>
                                 <p>在SQL * Plus中，以管理用户身份进行连接，该用户可以创建用户，授予权限和创建表空间。对于所有后续步骤，作为此管理用户保持连接。</p>
                                 <p>如果要在CDB中为XStream Out配置XStream管理员，请连接到root并在CDB根目录中配置XStream管理员。</p>
                                 <div class="infoboxnotealso" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-BE4DCA01-B65A-4151-A855-11FED21E8B14">
                                    <p class="notep1">也可以看看：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>有关在SQL * Plus中连接数据库的信息，请参见<a href="../admin/index.html" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                                       </li>
                                       <li>
                                          <p> 有关XStream Out和CDB的更多信息，请参阅<span class="q">“ <a href="xstream-out-concepts.html#GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579" title="多租户环境使数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。">XStream Out和多租户环境</a> ”</span></p>
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                              <li>
                                 <p>为XStream管理员创建表空间或使用现有表空间。</p>
                                 <p>此表空间存储在XStream管理员架构中创建的所有对象。</p>
                                 <p>例如，以下语句为XStream管理员创建新的表空间：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLESPACE xstream_tbs DATAFILE'/ usr / oracle / dbs / xstream_tbs.dbf'SIZE 25M REUSE AUTOEXTEND MAXSIZE UNLIMITED;</pre><p>如果要在CDB中创建XStream管理员，则必须在CDB中的所有容器中创建表空间，包括CDB根，所有可插拔数据库（PDB），所有应用程序根和所有应用程序容器。所有容器都需要表空间，因为XStream管理员必须是普通用户，因此必须能够访问任何容器中的表空间。</p>
                              </li>
                              <li>
                                 <p>创建新用户以充当XStream管理员或标识现有用户。</p>
                                 <p>例如，要创建名为<code class="codeph">xstrmadmin</code>的用户并指定此用户使用<code class="codeph">xstream_tbs</code>表空间，请运行以下语句：</p><pre class="oac_no_warn" dir="ltr">CREATE USER xstrmadmin IDENTIFIED BY <span class="italic">password</span> DEFAULT TABLESPACE xstream_tbs QUOTA UNLIMITED on xstream_tbs;</pre><p>如果要在CDB中创建XStream管理员，则XStream管理员必须是普通用户。因此，在<code class="codeph">CREATE</code> <code class="codeph">USER</code>语句中包含<code class="codeph">CONTAINER=ALL</code>子句：</p><pre class="oac_no_warn" dir="ltr">CREATE USER c ## xstrmadmin IDENTIFIED BY <span class="italic">password</span> DEFAULT TABLESPACE xstream_tbs QUOTA UNLIMITED ON xstream_tbs CONTAINER = ALL;</pre><div class="infoboxnote" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-5E9311BE-32CE-4C14-9917-FE3EC08B1817">
                                    <p class="notep1">注意：</p>
                                    <p>为管理用户输入适当的密码。</p>
                                 </div>
                                 <div class="infoboxnotealso" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-9A5B0268-BB6B-4F12-B9F5-2E761CC5BFEC">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关选择密码的<a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>指南</cite></span></a> ，请参阅“ <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle数据库安</cite></span></a></p>
                                 </div>
                              </li>
                              <li>
                                 <p>将<code class="codeph">CREATE</code> <code class="codeph">SESSION</code>权限授予XStream管理员。
                                 </p>
                                 <p>如果您创建了一个新用户以充当XStream管理员，则授予此用户<code class="codeph">CREATE</code> <code class="codeph">SESSION</code>权限。
                                 </p>
                                 <p>例如，要将<code class="codeph">CREATE</code> <code class="codeph">SESSION</code>权限授予用户<code class="codeph">xstrmadmin</code> ，请运行以下语句：</p><pre class="oac_no_warn" dir="ltr">授予xstrmadmin创建会话;</pre><p>如果要在CDB中创建XStream管理员，请向XStream管理员授予<code class="codeph">CREATE</code> <code class="codeph">SESSION</code>权限和<code class="codeph">SET</code> <code class="codeph">CONTAINER</code>权限，并在语句中包含<code class="codeph">CONTAINER=ALL</code>子句。
                                 </p>
                                 <p>例如，要将这些权限授予CDB中的用户<code class="codeph">c##xstrmadmin</code> ，请运行以下语句：</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION，SET CONTAINER to c ## xstrmadmin CONTAINER = ALL;</pre></li>
                              <li>
                                 <p>在<code class="codeph">DBMS_XSTREAM_AUTH</code>包中运行<code class="codeph">GRANT_ADMIN_PRIVILEGE</code>过程。
                                 </p>
                                 <p>用户必须已明确授予程序包的<code class="codeph">EXECUTE</code>特权才能在用户创建的子程序内执行程序包中的子程序，并且用户必须对数据字典视图具有显式的<code class="codeph">READ</code>或<code class="codeph">SELECT</code>权限才能查询用户内部的视图 - 创建的子程序。无法通过角色授予这些权限。您可以运行<code class="codeph">GRANT_ADMIN_PRIVILEGE</code>过程以向XStream管理员授予此类权限，也可以直接授予它们。
                                 </p>
                                 <p>根据<code class="codeph">GRANT_ADMIN_PRIVILEGE</code>过程的参数设置，它可以为受信任或不受信任的XStream管理员授予适当的权限，并且可以在非CDB或CDB中授予权限。 <a href="configuring-xstream-out.html#GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__BHCEEEIG" title="此表根据正在配置的XStream管理员类型显示每个参数所需的设置。">表4-1</a>描述了每种情况的关键参数设置。
                                 </p>
                                 <div class="tblformal" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__BHCEEEIG">
                                    <p class="titleintable">表4-1 GRANT_ADMIN_PRIVILEGE的关键参数设置</p>
                                    <table cellpadding="4" cellspacing="0" class="Formal" title="GRANT_ADMIN_PRIVILEGE的关键参数设置" width="90%" border="1" summary="This table shows the required setting for each parameter based on the type XStream administrator being configured." frame="hsides" rules="rows">
                                       <thead>
                                          <tr align="left" valign="top">
                                             <th align="left" valign="bottom" width="31%" id="d24247e1041">XStream管理员的类型</th>
                                             <th align="left" valign="bottom" width="34%" id="d24247e1044">grant_select_privileges参数设置</th>
                                             <th align="left" valign="bottom" width="34%" id="d24247e1047">容器参数设置</th>
                                          </tr>
                                       </thead>
                                       <tbody>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="31%" id="d24247e1052" headers="d24247e1041 ">
                                                <p>在非CDB中受信任</p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1052 d24247e1044 ">
                                                <p><code class="codeph">真正</code></p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1052 d24247e1047 ">
                                                <p><code class="codeph">CURRENT</code> （默认）</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="31%" id="d24247e1065" headers="d24247e1041 ">
                                                <p>在非CDB中不受信任</p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1065 d24247e1044 ">
                                                <p><code class="codeph">FALSE</code> （默认）</p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1065 d24247e1047 ">
                                                <p><code class="codeph">CURRENT</code> （默认）</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="31%" id="d24247e1079" headers="d24247e1041 ">
                                                <p>在CDB中受信任</p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1079 d24247e1044 ">
                                                <p><code class="codeph">真正</code></p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1079 d24247e1047 ">
                                                <p><code class="codeph">所有</code></p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="31%" id="d24247e1091" headers="d24247e1041 ">
                                                <p>不受信任的CDB</p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1091 d24247e1044 ">
                                                <p><code class="codeph">FALSE</code> （默认）</p>
                                             </td>
                                             <td align="left" valign="top" width="34%" headers="d24247e1091 d24247e1047 ">
                                                <p><code class="codeph">所有</code></p>
                                             </td>
                                          </tr>
                                       </tbody>
                                    </table>
                                 </div>
                                 <!-- class="inftblhruleinformal" -->
                                 <div class="infoboxnote" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-49D60E97-F0C6-4332-A1AB-FEF6620FD867">
                                    <p class="notep1">注意：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>对于任何方案，当XStream管理员必须同时管理数据库上的XStream Out和XStream In配置时，请为<code class="codeph">privilege_type</code>参数指定<code class="codeph">*</code> 。
                                          </p>
                                       </li>
                                       <li>
                                          <p>在CDB中，当为<code class="codeph">container</code>参数指定<code class="codeph">ALL</code>时，当前容器必须是CDB根（ <code class="codeph">CDB$ROOT</code> ）。
                                          </p>
                                       </li>
                                    </ul>
                                 </div>
                                 <div class="infoboxnotealso" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-EC726A19-EA02-4DD7-96A2-B10A20E5F337">
                                    <p class="notep1">也可以看看：</p>
                                    <p><a href="../arpls/DBMS_XSTREAM_AUTH.html#ARPLS73653" target="_blank"> <span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                                 </div>
                              </li>
                              <li>
                                 <p>如有必要，请为XStream管理员授予其他权限。</p>
                                 <p>请参阅<span class="q">“ <a href="configuring-xstream-out.html#GUID-01D8476F-38D3-44EA-9BB1-DC10C2E67567" title="XStream管理员可能需要其他权限。">向XStream管理员授予其他权限</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在将使用XStream的环境中的每个Oracle数据库重复上述所有步骤。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-EC7B3287-012B-41C5-A05A-C56B7E820CDA">
                           <p class="titleinexample">示例4-1在不生成脚本的情况下向非CDB中的受信任XStream管理员授予权限</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XSTREAM_AUTH.GRANT_ADMIN_PRIVILEGE（grantee =&gt;'xstrmadmin'，privilege_type =&gt;'CAPTURE'，grant_select_privileges =&gt; TRUE）;结束; /</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-54EAD91A-554C-4F82-8173-88D970564C1C">
                           <p class="titleinexample">示例4-2向非CDB中的受信任XStream管理员授予权限并生成脚本</p>
                           <p><code class="codeph">directory_name</code>参数中指定的<code class="codeph">directory_name</code>必须存在且必须可供当前用户访问。
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XSTREAM_AUTH.GRANT_ADMIN_PRIVILEGE（grantee =&gt;'xstrmadmin'，privilege_type =&gt;'CAPTURE'，grant_select_privileges =&gt; TRUE，do_grants =&gt; TRUE，file_name =&gt;'grant_xstrm_privs.sql'，directory_name =&gt;'xstrm_dir'）;结束; /</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-B3355FC1-C45D-4301-8D09-2FCAB1116069">
                           <p class="titleinexample">示例4-3在不生成脚本的情况下向非CDB中的不受信任的XStream管理员授予权限</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XSTREAM_AUTH.GRANT_ADMIN_PRIVILEGE（grantee =&gt;'xstrmadmin'，privilege_type =&gt;'CAPTURE'，grant_select_privileges =&gt; FALSE）;结束; /</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128__GUID-6FF4A68E-4D34-42FA-B064-8B96F83AEEE0">
                           <p class="titleinexample">示例4-4在不生成脚本的情况下向CDB中的受信任XStream管理员授予权限</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XSTREAM_AUTH.GRANT_ADMIN_PRIVILEGE（grantee =&gt;'c ## xstrmadmin'，privilege_type =&gt;'CAPTURE'，grant_select_privileges =&gt; TRUE，container =&gt;'ALL'）;结束; /</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="准备XStream Out出站服务器与准备Oracle Replication环境类似。">配置XStream Out的先决条件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72979"></a><div class="props_rev_3"><a id="GUID-01D8476F-38D3-44EA-9BB1-DC10C2E67567" name="GUID-01D8476F-38D3-44EA-9BB1-DC10C2E67567"></a><h5 id="XSTRM-GUID-01D8476F-38D3-44EA-9BB1-DC10C2E67567" class="sect5"><span class="enumeration_section">4.1.2.2</span>向XStream管理员授予其他权限</h5>
                     <div>
                        <p>XStream管理员可能需要其他权限。</p>
                        <div class="section">
                           <p>如有必要，请向XStream管理员授予以下任何其他权限：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果您计划使用Oracle Enterprise Manager Cloud Control来管理具有XStream组件的数据库，则XStream管理员必须是受信任的用户，并且必须被授予<code class="codeph">DBA</code>角色。您还必须将XStream管理员配置为Oracle Enterprise Manager管理用户。这样做可以授予Oracle Enterprise Manager Cloud Control所需的其他权限，例如运行Oracle Enterprise Manager Cloud Control作业所需的权限。有关创建Oracle Enterprise Manager管理用户的信息，请参阅Oracle Enterprise Manager Cloud Control联机帮助。
                                 </p>
                              </li>
                              <li>
                                 <p>授予远程XStream管理员在本地数据库中执行操作的权限。使用<code class="codeph">DBMS_XSTREAM_AUTH</code>包中的<code class="codeph">GRANT_REMOTE_ADMIN_ACCESS</code>过程授予这些权限。如果远程XStream管理员将使用连接到本地XStream管理员的数据库链接来执行管理操作，则授予此权限。具体而言，如果满足以下任一条件，则授予这些权限：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>您计划在远程下游数据库上配置下游捕获进程，该数据库捕获源自本地源数据库的更改，下游捕获进程将使用数据库链接在源数据库上执行管理操作。</p>
                                    </li>
                                    <li>
                                       <p>您计划使用远程XStream管理员为本地数据库中的复制数据库对象设置实例化系统更改编号（SCN）值。</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>为捕获进程，传播或出站服务器使用的规则在基于规则的自定义转换中指定的另一个用户拥有的任何PL / SQL函数授予XStream管理员<code class="codeph">EXECUTE</code>特权。对于捕获过程，如果指定了捕获用户，则捕获用户必须具有这些权限。必须直接授予这些权限。他们不能通过角色授予。
                                 </p>
                              </li>
                              <li>
                                 <p>授予XStream管理员权限以在适当的位置更改数据库对象。例如，如果XStream管理员必须为另一个模式中的表创建补充日志组，则XStream管理员必须具有更改表的必要权限。可以直接或通过角色授予这些权限。</p>
                              </li>
                              <li>
                                 <p>如果XStream管理员不拥有捕获进程，传播或出站服务器使用的队列，并且在创建队列时未指定为队列的队列用户，则必须将XStream管理员配置为安全队列用户如果您希望XStream管理员能够将LCR排队到队列中或从队列中出列LCR，则队列中的队列。XStream管理员可能还需要队列上的<code class="codeph">ENQUEUE</code>或<code class="codeph">DEQUEUE</code>权限，或两者都需要。
                                 </p>
                              </li>
                              <li>
                                 <p>为XStream管理员可能需要访问的任何对象类型授予XStream管理员<code class="codeph">EXECUTE</code>特权。可以直接或通过角色授予这些权限。
                                 </p>
                              </li>
                              <li>
                                 <p>如果您使用的是Oracle Database Vault，则必须授予XStream管理员<code class="codeph">DV_XSTREAM_ADMIN</code>角色以执行以下任务：创建捕获过程，创建出站服务器，以及修改捕获过程的捕获用户。当XStream管理员未执行这些任务时，您可以从XStream管理员撤消<code class="codeph">DV_XSTREAM_ADMIN</code>角色。
                                 </p>
                                 <p>此外，必须为执行以下操作的用户授予<code class="codeph">BECOME</code> <code class="codeph">USER</code>系统特权：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>创建或更改捕获过程</p>
                                    </li>
                                    <li>
                                       <p>创建或更改出站服务器</p>
                                    </li>
                                 </ul>
                                 <p>如果未安装Oracle Database Vault，则不需要向执行这些操作的用户授予<code class="codeph">BECOME</code> <code class="codeph">USER</code>系统特权。如有必要，您可以在完成其中一个操作后撤消<code class="codeph">USER</code>的<code class="codeph">BECOME</code> <code class="codeph">USER</code>系统特权。
                                 </p>
                                 <p>请参见<a href="../dvadm/index.html" target="_blank"><span><cite>Oracle Database Vault管理员指南</cite></span></a> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="准备XStream Out出站服务器与准备Oracle Replication环境类似。">配置XStream Out的先决条件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM1557"></a><div class="props_rev_3"><a id="GUID-5698C419-C872-4214-933E-B87E7A99FF2C" name="GUID-5698C419-C872-4214-933E-B87E7A99FF2C"></a><h5 id="XSTRM-GUID-5698C419-C872-4214-933E-B87E7A99FF2C" class="sect5"><span class="enumeration_section">4.1.2.3</span>如果需要，请配置网络连接和数据库链接</h5>
                     <div>
                        <p>当XStream Out配置包含多个数据库时，需要网络连接和数据库链接。</p>
                        <div class="section">
                           <p>当所有组件在同一数据库上运行时，不需要网络连接和数据库链接。这些组件包括捕获进程，队列和出站服务器。</p>
                           <p>如果您决定使用以下任一方式配置XStream，则必须配置网络连接和数据库链接：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>捕获进程和出站服务器将在不同的数据库上运行。</p>
                              </li>
                              <li>
                                 <p>将使用下游捕获。</p>
                              </li>
                           </ul>
                           <p>有关这些决策的详细信息，请参阅<span class="q">“ <a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" title="配置XStream Out时，必须配置XStream组件以捕获数据库更改，并以逻辑更改记录（LCR）的形式将这些更改发送到出站服务器。">决定如何配置XStream Out</a> ”</span> 。
                           </p>
                           <p>如果需要网络连接，请配置网络和Oracle Net，以便数据库可以相互通信。</p>
                           <p>需要以下数据库链接：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>当捕获进程在与出站服务器不同的数据库上运行时，请创建从捕获数据库到出站服务器数据库的数据库链接。传播使用此数据库链接将更改从捕获数据库发送到出站服务器数据库。</p>
                              </li>
                              <li>
                                 <p>使用下游捕获时，请创建从捕获数据库到源数据库的数据库链接。源数据库是生成捕获进程用于捕获更改的重做数据的数据库。捕获进程使用此数据库链接在源数据库中执行管理任务。</p>
                              </li>
                           </ul>
                           <p>每个数据库链接的名称必须与目标数据库的全局名称匹配，并且应在XStream管理员的模式中创建每个数据库链接。</p>
                           <p>例如，假设您要在具有以下特征的配置中创建数据库链接：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>源数据库的全局名称是<code class="codeph">dbs1.example.com</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>目标数据库的全局名称是<code class="codeph">dbs2.example.com</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>XStream管理员是每个数据库的<code class="codeph">xstrmadmin</code> 。
                                 </p>
                              </li>
                           </ul>
                           <p>鉴于这些假设，以下语句创建从<code class="codeph">dbs1.example.com</code>到<code class="codeph">dbs2.example.com</code>的数据库链接：</p><pre class="oac_no_warn" dir="ltr">CONNECT xstrmadmin@dbs1.example.com输入密码： <span class="italic">password</span> CREATE DATABASE LINK dbs2.example.com CONNECT TO xstrmadmin IDENTIFIED BY <span class="italic">password</span> USING'dsbs2.example.com';</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-5698C419-C872-4214-933E-B87E7A99FF2C__GUID-76DF6A08-5BA4-47A3-92F6-8570234B7C75">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../admqs/configuring-the-network-environment.html#ADMQS004" target="_blank"><span><cite>Oracle数据库2天DBA</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关数据库链接的详细信息，请参见<a href="../admin/managing-a-distributed-database.html#ADMIN029" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="准备XStream Out出站服务器与准备Oracle Replication环境类似。">配置XStream Out的先决条件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM1558"></a><div class="props_rev_3"><a id="GUID-2E7BDD0D-82CE-47EE-9FCF-825FCE960771" name="GUID-2E7BDD0D-82CE-47EE-9FCF-825FCE960771"></a><h5 id="XSTRM-GUID-2E7BDD0D-82CE-47EE-9FCF-825FCE960771" class="sect5"><span class="enumeration_section">4.1.2.4</span>确保每个源数据库都处于ARCHIVELOG模式</h5>
                     <div>
                        <p>生成将由捕获进程捕获的更改的每个源数据库必须处于<code class="codeph">ARCHIVELOG</code>模式。
                        </p>
                        <div class="section">
                           <p>对于下游捕获进程，如果计划配置实时下游捕获进程，则下游数据库也必须处于<code class="codeph">ARCHIVELOG</code>模式。如果您计划仅在其上运行归档日志下游捕获进程，则下游数据库不需要处于<code class="codeph">ARCHIVELOG</code>模式。
                           </p>
                           <p>如果要在Oracle Real Application Clusters（Oracle RAC）环境中配置XStream，则所有实例的所有线程的归档重做日志文件必须可用于运行捕获进程的任何实例。此要求适用于本地和下游捕获过程。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-2E7BDD0D-82CE-47EE-9FCF-825FCE960771__GUID-10F12E20-1EB6-4608-B051-FC02A5728F4E">
                           <p class="notep1">也可以看看：</p>
                           <p>有关在<code class="codeph">ARCHIVELOG</code>模式下运行数据库的说明，请参见<a href="../admin/managing-archived-redo-log-files.html#ADMIN008" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="准备XStream Out出站服务器与准备Oracle Replication环境类似。">配置XStream Out的先决条件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM1559"></a><div class="props_rev_3"><a id="GUID-E24B40DF-D1C4-4FCC-8C62-28AAEC2AE972" name="GUID-E24B40DF-D1C4-4FCC-8C62-28AAEC2AE972"></a><h5 id="XSTRM-GUID-E24B40DF-D1C4-4FCC-8C62-28AAEC2AE972" class="sect5"><span class="enumeration_section">4.1.2.5</span>设置相关的初始化参数</h5>
                     <div>
                        <p>某些初始化参数对于XStream配置中组件的配置，操作，可靠性和性能很重要。适当地设置这些参数。</p>
                        <div class="section">
                           <p>以下要求适用于XStream出站服务器：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>确保将<code class="codeph">PROCESSES</code>初始化参数设置为足以容纳出站服务器后台进程和所有其他Oracle数据库后台进程的值。
                                 </p>
                              </li>
                              <li>
                                 <p>确保将<code class="codeph">SESSIONS</code>初始化参数设置为足够大的值，以容纳出站服务器后台进程和所有其他Oracle数据库会话使用的会话。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="准备XStream Out出站服务器与准备Oracle Replication环境类似。">配置XStream Out的先决条件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM1560"></a><div class="props_rev_3"><a id="GUID-41E37368-E434-4AD7-A5E8-4786E41C8C94" name="GUID-41E37368-E434-4AD7-A5E8-4786E41C8C94"></a><h5 id="XSTRM-GUID-41E37368-E434-4AD7-A5E8-4786E41C8C94" class="sect5"><span class="enumeration_section">4.1.2.6</span>配置Streams池</h5>
                     <div>
                        <p>Streams池是系统全局区域（SGA）中的一部分内存，Oracle Replication和XStream组件都使用它。</p>
                        <div class="section">
                           <p>Streams池将缓冲的队列LCR存储在内存中，它为捕获进程和出站服务器提供内存。</p>
                           <p>以下是配置Streams池的注意事项：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Streams池至少需要300 MB的内存。</p>
                              </li>
                              <li>
                                 <p>配置XStream Out后，您可以使用<code class="codeph">max_sga_size</code> capture process参数来控制专门为捕获进程分配的系统全局区域（SGA）内存量。
                                 </p>
                                 <p>为数据库上的所有组件分配的系统全局区域（SGA）内存的总和必须小于为<code class="codeph">STREAMS_POOL_SIZE</code>初始化参数设置的值。
                                 </p>
                              </li>
                              <li>
                                 <p>配置XStream Out后，您可以使用<code class="codeph">max_sga_size</code> apply参数来控制专门分配给出站服务器的SGA内存量。
                                 </p>
                              </li>
                              <li>
                                 <p>确保每个数据库的Streams池中有足够的空间来运行XStream组件并存储LCR并正确运行组件。</p>
                              </li>
                              <li>
                                 <p>Streams池在第一次启动出站服务器时初始化。</p>
                              </li>
                              <li>
                                 <p>最佳做法是将<code class="codeph">STREAMS_POOL_SIZE</code>初始化参数显式设置为所需的Streams池大小。
                                 </p>
                              </li>
                           </ul>
                           <p>满足以下条件时，自动共享内存管理功能会自动管理Streams池的大小：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>的<code class="codeph">MEMORY_TARGET</code>和<code class="codeph">MEMORY_MAX_TARGET</code>初始化参数都被设置为<code class="codeph">0</code> （零）。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">SGA_TARGET</code>初始化参数设置为非零值。
                                 </p>
                              </li>
                           </ul>
                           <p>如果满足以下条件，则Streams池大小是<code class="codeph">STREAMS_POOL_SIZE</code>参数指定的值（以字节为单位）：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>的<code class="codeph">MEMORY_TARGET</code> ， <code class="codeph">MEMORY_MAX_TARGET</code>和<code class="codeph">SGA_TARGET</code>初始化参数都被设定为<code class="codeph">0</code> （零）。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">STREAMS_POOL_SIZE</code>初始化参数设置为非零值。
                                 </p>
                              </li>
                           </ul>
                           <p>如果使用自动共享内存管理，并且<code class="codeph">STREAMS_POOL_SIZE</code>初始化参数也设置为非零值，则自动共享内存管理将此值用作Oracle Replication池的最小值。如果您的环境需要Oracle Replication池中的最小内存量才能正常运行，则可以设置最小大小。要查看通过自动共享内存管理分配给Oracle Replication池的当前内存，请查询<code class="codeph">V$SGA_DYNAMIC_COMPONENTS</code>视图。此外，您可以查询<code class="codeph">V$STREAMS_POOL_STATISTICS</code>视图以查看Oracle Replication池的当前使用情况。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-41E37368-E434-4AD7-A5E8-4786E41C8C94__GUID-F364027B-0C88-4C66-95DE-95D43D6F5D56">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">max_sga_size</code>捕获进程参数的详细信息，请<code class="codeph">max_sga_size</code> <a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS306" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00207" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=REFRN10256" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="准备XStream Out出站服务器与准备Oracle Replication环境类似。">配置XStream Out的先决条件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM73020"></a><div class="props_rev_3"><a id="GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" name="GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B"></a><h5 id="XSTRM-GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" class="sect5"><span class="enumeration_section">4.1.2.7</span>如果需要，请配置补充日志记录</h5>
                     <div>
                        <p>使用捕获过程捕获更改时，必须为源数据库中的某些列指定补充日志记录，以更改要在目标数据库中成功应用的列。</p>
                        <p>补充日志记录会在这些列的重做日志中添加其他信息。捕获过程捕获此附加信息并将其放入逻辑更改记录（LCR）中，XStream入站服务器或客户端应用程序可能需要此附加信息才能正确处理更改。</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-055A8FCB-2257-4C4B-9B01-CA558B7A6B31">XStream环境中必需的补充日志记录</a><br>补充日志记录有两种类型：数据库补充日志记录和表补充日志记录。
                           </li>
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-9671FF03-F1BA-482B-A60A-07C9D2DB417D">使用无条件日志组指定表补充日志记录</a><br>您可以使用无条件日志组指定补充日志记录。
                           </li>
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-75CEB682-A05B-4386-936F-8755C5927BE2">使用条件日志组指定表补充日志记录</a><br>您可以使用条件日志组指定表补充日志记录。
                           </li>
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-C3421B2F-2147-4AE1-9F81-3EAA544B87A1">删除补充日志组</a><br>要删除条件或无条件补充日志组，请使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句中的<code class="codeph">DROP</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">GROUP</code>子句。
                           </li>
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-8091A656-E200-452E-AA3E-1795931AC7B2">指定密钥列的数据库补充日志记录</a><br>您可以选择为源数据库中的所有主键，唯一键，位图索引和外键列指定补充日志记录。
                           </li>
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-3C7AEBBB-B764-432F-82F0-52736381DBFF">删除关键列的数据库补充日志记录</a><br>要删除源数据库中所有主键，唯一键，位图索引和外键列的<code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> ，请发出<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">DROP</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code>语句。
                           </li>
                           <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-30D6D936-8841-486A-8A12-60AC3F62E62F">自动指定补充日志记录的过程</a><br><code class="codeph">DBMS_CAPTURE_ADM</code>包中的某些过程会自动指定补充日志记录。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="准备XStream Out出站服务器与准备Oracle Replication环境类似。">配置XStream Out的先决条件</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="XSTRM73021"></a><div class="props_rev_3"><a id="GUID-055A8FCB-2257-4C4B-9B01-CA558B7A6B31" name="GUID-055A8FCB-2257-4C4B-9B01-CA558B7A6B31"></a><h6 id="XSTRM-GUID-055A8FCB-2257-4C4B-9B01-CA558B7A6B31" class="sect6"><span class="enumeration_section">4.1.2.7.1</span> XStream环境中必需的补充日志记录</h6>
                        <div>
                           <p>补充日志记录有两种类型：数据库补充日志记录和表补充日志记录。</p>
                           <p>数据库补充日志记录指定整个数据库的补充日志记录，而表补充日志记录使您可以指定日志组以补充特定表的日志记录。如果使用表补充日志记录，则可以在两种类型的日志组之间进行选择：无条件日志组和条件日志组。</p>
                           <p>无条件日志组在更改表时记录指定列的前映像，无论更改是否影响任何指定列。无条件日志组有时称为“始终日志组”。仅当日志组中至少有一个列发生更改时，条件日志组才会记录所有指定列的前映像。</p>
                           <p>补充数据库级别的日志记录，表级别的无条件日志组和表级别的条件日志组确定为更改记录哪些旧值。</p>
                           <p>如果计划使用一个或多个XStream入站服务器来应用捕获过程捕获的LCR，则必须<span class="italic">在源数据库中</span>为<span class="italic">目标数据库</span>中的表<span class="italic">中的</span>以下类型的列启用补充日志记录：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>源数据库中用于表中主键的任何列（在目标数据库中应用更改）必须无条件地记录在日志组中或通过主键列的数据库补充日志记录。</p>
                              </li>
                              <li>
                                 <p>如果将应用更改的任何入站服务器的并行性大于1，则必须有条件地记录源数据库中多个列的目标数据库中的任何唯一约束列。如果唯一约束列来自源数据库中的单个列，则不需要指定补充日志记录。</p>
                              </li>
                              <li>
                                 <p>如果将应用更改的任何入站服务器的并行性大于1，则必须有条件地记录源数据库中多个列的目标数据库中的任何外键列。如果外键列来自源数据库中的单个列，则不需要指定补充日志记录。</p>
                              </li>
                              <li>
                                 <p>如果将应用更改的任何入站服务器的并行性大于1，则必须有条件地记录源数据库中多个列的目标数据库中的任何位图索引列。如果位图索引列来自源数据库中的单个列，则不需要指定补充日志记录。</p>
                              </li>
                              <li>
                                 <p>必须无条件地记录源数据库中用作目标数据库的入站服务器的替换键列的任何列。您可以使用<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">SET_KEY_COLUMNS</code>过程为表指定替换键列。
                                 </p>
                              </li>
                              <li>
                                 <p>如果源数据库中的多个列在目标数据库的列列表中使用，则必须有条件地记录在应用期间用于冲突解决的列列表中指定的列。</p>
                              </li>
                              <li>
                                 <p>必须无条件地记录源数据库中由目标数据库中的语句DML处理程序，更改处理程序，过程DML处理程序或错误处理程序使用的任何列。</p>
                              </li>
                              <li>
                                 <p>必须无条件地记录源数据库中由规则或基于规则的转换使用的任何列。</p>
                              </li>
                              <li>
                                 <p>必须无条件地记录源数据库中在目标数据库的值依赖关系虚拟依赖关系定义中指定的任何列。</p>
                              </li>
                              <li>
                                 <p>如果为目标数据库中的表指定行子集，则必须无条件地记录源数据库中目标表中的任何列或源数据库中属于子集条件的列。您使用入站服务器指定的行子集条件<code class="codeph">dml_condition</code>参数在<code class="codeph">ADD_SUBSET_RULES</code>在程序<code class="codeph">DBMS_XSTREAM_ADM</code>包。
                                 </p>
                              </li>
                           </ul>
                           <p>如果不在源数据库中对这些类型的列使用补充日志记录，则涉及这些列的更改可能无法在目标数据库中正确应用。</p>
                           <div class="infoboxnote" id="GUID-055A8FCB-2257-4C4B-9B01-CA558B7A6B31__GUID-0C4A5C3C-2A65-4E68-A73C-66E5972D242C">
                              <p class="notep1">注意：</p>
                              <p>以下数据类型的列不能是补充日志组的一部分：LOB， <code class="codeph">LONG</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code> ，用户定义类型（包括对象类型， <code class="codeph">REF</code> ，varrays，嵌套表）和Oracle提供的类型（包括<code class="codeph">Any</code>类型， XML类型，空间类型和媒体类型）。
                              </p>
                           </div>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="使用捕获过程捕获更改时，必须为源数据库中的某些列指定补充日志记录，以更改要在目标数据库中成功应用的列。">如果需要，请配置补充日志记录</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM73022"></a><div class="props_rev_3"><a id="GUID-9671FF03-F1BA-482B-A60A-07C9D2DB417D" name="GUID-9671FF03-F1BA-482B-A60A-07C9D2DB417D"></a><h6 id="XSTRM-GUID-9671FF03-F1BA-482B-A60A-07C9D2DB417D" class="sect6"><span class="enumeration_section">4.1.2.7.2</span>使用无条件日志组指定表补充日志记录</h6>
                        <div>
                           <p>您可以使用无条件日志组指定补充日志记录。</p>
                           <div class="section">
                              <p>要指定仅包含表的主键列的无条件补充日志组，请在<code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code>子句中使用带有<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>选项的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句。例如，以下语句将<code class="codeph">hr.regions</code>表的主键列添加到具有系统生成名称的无条件日志组：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.regions添加补充日志数据（主要密钥）列;</pre><p>要指定包含表中所有列的无条件补充日志组，请在<code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code>子句中使用带有<code class="codeph">ALL</code>选项的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句。例如，以下语句将<code class="codeph">hr.regions</code>表中的所有列添加到具有系统生成名称的无条件日志组：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.regions添加补充日志数据（所有）列;</pre><p>要指定包含您选择的列的无条件补充日志组，请使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句以及<code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">GROUP</code>子句的<code class="codeph">ALWAYS</code>规范。如有必要，这些日志组可以包括键列。
                              </p>
                              <p>例如，以下语句将<code class="codeph">hr.departments</code>表的<code class="codeph">department_id</code>列和<code class="codeph">manager_id</code>列<code class="codeph">hr.departments</code>到名为<code class="codeph">log_group_dep_pk</code>的无条件日志组中：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.departments添加SUPPLEMENTAL LOG GROUP log_group_dep_pk（department_id，manager_id）总是;</pre><p><code class="codeph">ALWAYS</code>规范使此日志组成为无条件日志组。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="使用捕获过程捕获更改时，必须为源数据库中的某些列指定补充日志记录，以更改要在目标数据库中成功应用的列。">如果需要，请配置补充日志记录</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM73023"></a><div class="props_rev_3"><a id="GUID-75CEB682-A05B-4386-936F-8755C5927BE2" name="GUID-75CEB682-A05B-4386-936F-8755C5927BE2"></a><h6 id="XSTRM-GUID-75CEB682-A05B-4386-936F-8755C5927BE2" class="sect6"><span class="enumeration_section">4.1.2.7.3</span>使用条件日志组指定表补充日志记录</h6>
                        <div>
                           <p>您可以使用条件日志组指定表补充日志记录。</p>
                           <div class="section">
                              <p>您可以在<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的<code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code>子句中使用以下选项：</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>选项创建一个条件日志组，其中包含表中的外键列。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">UNIQUE</code>选项创建一个条件日志组，其中包含表中的唯一键列和位图索引列。
                                    </p>
                                 </li>
                              </ul>
                              <p>如果在单个<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句中指定多个选项，则会为每个选项创建单独的条件日志组。
                              </p>
                              <p>例如，以下语句创建两个条件日志组：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.employees添加补充日志数据（UNIQUE，FOREIGN KEY）列;</pre><p>一个条件日志组包括表的唯一键列和位图索引列，另一个条件日志组包括表的外键列。两个日志组都具有系统生成的名称。</p>
                              <div class="infoboxnote" id="GUID-75CEB682-A05B-4386-936F-8755C5927BE2__GUID-DE51A67A-D9C1-4685-A604-A73BFD25647A">
                                 <p class="notep1">注意：</p>
                                 <p>指定<code class="codeph">UNIQUE</code>选项不会启用位图连接索引列的补充日志记录。
                                 </p>
                              </div>
                              <p>要指定包含您选择添加的任何列的条件补充日志组，可以使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句中的<code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">GROUP</code>子句。要使日志组成为条件，请不要包含<code class="codeph">ALWAYS</code>规范。
                              </p>
                              <p>例如，假设<code class="codeph">min_salary</code>和<code class="codeph">max_salary</code>在列<code class="codeph">hr.jobs</code>表包含在列的列表解决冲突在目标数据库。以下语句将<code class="codeph">min_salary</code>和<code class="codeph">max_salary</code>列添加到名为<code class="codeph">log_group_jobs_cr</code>的条件日志组中：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.jobs添加SUPPLEMENTAL LOG GROUP log_group_jobs_cr（min_salary，max_salary）;</pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="使用捕获过程捕获更改时，必须为源数据库中的某些列指定补充日志记录，以更改要在目标数据库中成功应用的列。">如果需要，请配置补充日志记录</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM73024"></a><div class="props_rev_3"><a id="GUID-C3421B2F-2147-4AE1-9F81-3EAA544B87A1" name="GUID-C3421B2F-2147-4AE1-9F81-3EAA544B87A1"></a><h6 id="XSTRM-GUID-C3421B2F-2147-4AE1-9F81-3EAA544B87A1" class="sect6"><span class="enumeration_section">4.1.2.7.4</span>删除补充日志组</h6>
                        <div>
                           <p>要删除条件或无条件补充日志组，请使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句中的<code class="codeph">DROP</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">GROUP</code>子句。
                           </p>
                           <div class="section">
                              <p>例如，要删除名为<code class="codeph">log_group_jobs_cr</code>的补充日志组，请运行以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.jobs DROP SUPPLEMENTAL LOG GROUP log_group_jobs_cr;</pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="使用捕获过程捕获更改时，必须为源数据库中的某些列指定补充日志记录，以更改要在目标数据库中成功应用的列。">如果需要，请配置补充日志记录</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM73025"></a><div class="props_rev_3"><a id="GUID-8091A656-E200-452E-AA3E-1795931AC7B2" name="GUID-8091A656-E200-452E-AA3E-1795931AC7B2"></a><h6 id="XSTRM-GUID-8091A656-E200-452E-AA3E-1795931AC7B2" class="sect6"><span class="enumeration_section">4.1.2.7.5</span>指定密钥列的数据库补充日志记录</h6>
                        <div>
                           <p>您可以选择为源数据库中的所有主键，唯一键，位图索引和外键列指定补充日志记录。</p>
                           <div class="section">
                              <p>如果配置捕获进程以捕获对整个数据库的更改，则可以选择此选项。要为源数据库中的所有主键，唯一键，位图索引和外键列指定补充日志记录，请发出以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE添加补充日志数据（PRIMARY KEY，UNIQUE，FOREIGN KEY）列;</pre><p>如果主键，唯一键，位图索引和外键列在所有源和目标数据库中相同，则在源数据库上运行此命令可提供主键，唯一键，位图索引和外部数据所需的补充日志记录所有目标数据库中的键列。指定<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>选项时， <code class="codeph">PRIMARY</code>表时，行的主键的所有列都将放置在重做日志文件中（无条件日志记录）。指定<code class="codeph">UNIQUE</code>选项时，如果修改了属于唯一键或位图索引的任何列（条件日志记录），则行的唯一键和位图索引中的任何列都将放置在重做日志文件中。指定<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>选项时，如果修改了属于外键的任何列（条件日志记录），则行的外键的所有列都将放置在重做日志文件中。
                              </p>
                              <p>您可以省略这些选项中的一个或多个。例如，如果您不想补充记录数据库中的所有外键列，则可以省略<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>选项，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE添加补充日志数据（PRIMARY KEY，UNIQUE）列;</pre><p>除了<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> ， <code class="codeph">UNIQUE</code>和<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> ，您还可以使用<code class="codeph">ALL</code>选项。<code class="codeph">ALL</code>选项指定，当更改行时，该行的所有列（LOB， <code class="codeph">LONG</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code> ，用户定义类型和Oracle提供的类型列除外）都放在重做日志文件中（无条件记录）。
                              </p>
                              <p>补充日志记录语句是累积的。如果您发出两个连续的<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code>语句，每个语句都有不同的标识键，则会对这两个键进行补充记录。
                              </p>
                              <div class="infoboxnote" id="GUID-8091A656-E200-452E-AA3E-1795931AC7B2__GUID-3EF6D4AF-3B73-4649-9836-42229B2722A9">
                                 <p class="notep1">注意：</p>
                                 <p>指定<code class="codeph">UNIQUE</code>选项不会启用位图连接索引列的补充日志记录。
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-8091A656-E200-452E-AA3E-1795931AC7B2__GUID-C853E67B-14EA-46B1-B388-3A3FBF3E2575">
                              <p class="notep1">也可以看看：</p>
                              <p>有关数据类型的信息，请<a href="../sqlrf/Data-Types.html#SQLRF0021" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="使用捕获过程捕获更改时，必须为源数据库中的某些列指定补充日志记录，以更改要在目标数据库中成功应用的列。">如果需要，请配置补充日志记录</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM73026"></a><div class="props_rev_3"><a id="GUID-3C7AEBBB-B764-432F-82F0-52736381DBFF" name="GUID-3C7AEBBB-B764-432F-82F0-52736381DBFF"></a><h6 id="XSTRM-GUID-3C7AEBBB-B764-432F-82F0-52736381DBFF" class="sect6"><span class="enumeration_section">4.1.2.7.6</span>删除关键列的数据库补充日志记录</h6>
                        <div>
                           <p>要删除源数据库中所有主键，唯一键，位图索引和外键列的<code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> ，请发出<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">DROP</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code>语句。
                           </p>
                           <div class="section">
                              <p>例如，要删除所有主键，唯一键，位图索引和外键列的数据库补充日志记录，请发出以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE DROP SUPPLEMENTAL LOG DATA（PRIMARY KEY，UNIQUE，FOREIGN KEY）COLUMNS;</pre><div class="infoboxnote" id="GUID-3C7AEBBB-B764-432F-82F0-52736381DBFF__GUID-4A7112C7-0F7A-4FDA-9AA8-217D5FD5A17E">
                                 <p class="notep1">注意：</p>
                                 <p>删除键列的数据库补充日志记录不会影响任何现有的表级补充日志组。</p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="使用捕获过程捕获更改时，必须为源数据库中的某些列指定补充日志记录，以更改要在目标数据库中成功应用的列。">如果需要，请配置补充日志记录</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM73027"></a><div class="props_rev_3"><a id="GUID-30D6D936-8841-486A-8A12-60AC3F62E62F" name="GUID-30D6D936-8841-486A-8A12-60AC3F62E62F"></a><h6 id="XSTRM-GUID-30D6D936-8841-486A-8A12-60AC3F62E62F" class="sect6"><span class="enumeration_section">4.1.2.7.7</span>自动指定补充日志记录的过程</h6>
                        <div>
                           <p><code class="codeph">DBMS_CAPTURE_ADM</code>包中的某些过程会自动指定补充日志记录。
                           </p>
                           <p><code class="codeph">DBMS_CAPTURE_ADM</code>包中的以下过程自动指定补充日志记录：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS590" target="_blank"><code class="codeph">建立</code></a></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS544" target="_blank"><code class="codeph">PREPARE_GLOBAL_INSTANTIATION</code></a></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS545" target="_blank"><code class="codeph">PREPARE_SCHEMA_INSTANTIATION</code></a></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS546" target="_blank"><code class="codeph">PREPARE_TABLE_INSTANTIATION</code></a></p>
                              </li>
                           </ul>
                           <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS590" target="_blank"><code class="codeph">BUILD</code></a>过程通过运行<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> <code class="codeph">DATA</code>语句自动指定数据库补充日志记录。在大多数情况下，在创建捕获过程时会自动运行<a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS590" target="_blank"><code class="codeph">BUILD</code></a>过程。
                           </p>
                           <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS544" target="_blank"><code class="codeph">PREPARE_GLOBAL_INSTANTIATION</code></a> ， <a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS545" target="_blank"><code class="codeph">PREPARE_SCHEMA_INSTANTIATION</code></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS546" target="_blank"><code class="codeph">PREPARE_TABLE_INSTANTIATION</code></a>过程自动指定为实例化准备的表中的主键，唯一键，位图索引和外键列的补充日志记录。
                           </p>
                           <p><code class="codeph">DBMS_XSTREAM_ADM</code>程序包中的某些过程会自动运行先前列出的过程，包括<code class="codeph">ADD_SUBSET_RULES</code> ， <code class="codeph">ADD_TABLE_RULES</code> ， <code class="codeph">ADD_SCHEMA_RULES</code>和<code class="codeph">ADD_GLOBAL_RULES</code>过程。
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-30D6D936-8841-486A-8A12-60AC3F62E62F__GUID-16BF4193-E8A6-41D4-B8F8-237DABF8699E">
                              <p class="notep1">也可以看看：</p>
                              <p>有关这些过程的详细信息，请<a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS302" target="_blank"><span><cite>参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="使用捕获过程捕获更改时，必须为源数据库中的某些列指定补充日志记录，以更改要在目标数据库中成功应用的列。">如果需要，请配置补充日志记录</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="XSTRM1561"></a><div class="props_rev_3"><a id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6" name="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6"></a><h5 id="XSTRM-GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6" class="sect5"><span class="enumeration_section">4.1.2.8</span>如果需要，将日志文件传输配置到下游数据库</h5>
                     <div>
                        <p>如果您决定使用本地捕获过程，则不需要日志文件传输。但是，如果您决定使用使用重做传输服务的下游捕获将归档重做日志文件自动传输到下游数据库，则配置从源数据库到捕获数据库的日志文件传输。</p>
                        <div class="section">
                           <p>有关此决定的信息，请参阅<span class="q">“ <a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" title="配置XStream Out时，必须配置XStream组件以捕获数据库更改，并以逻辑更改记录（LCR）的形式将这些更改发送到出站服务器。">决定如何配置XStream Out</a> ”</span> 。
                           </p>
                           <div class="infobox-tip" id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__GUID-593ADC62-C26B-4575-A7E3-74420B39AA4C">
                              <p class="notep1">小费：</p>
                              <p>您可以使用Oracle Enterprise Manager Cloud Control配置日志文件传输和下游捕获过程。有关说明，请参阅Oracle Enterprise Manager Cloud Control联机帮助。</p>
                           </div>
                           <p>本节中的步骤将源数据库配置为将其重做日志文件传输到捕获数据库，并将捕获数据库配置为接受这些重做日志文件。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__GUID-346296C8-D7B1-4ECD-A3DB-8F65EBB323F2">要将日志文件传输配置到下游数据库：</p>
                           <ol>
                              <li>
                                 <p>配置Oracle Net，以便源数据库可以与下游数据库通信。</p>
                                 <div class="infoboxnotealso" id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__GUID-F2EDC9BD-F1DF-49D2-8A7A-3E455659F6B4">
                                    <p class="notep1">也可以看看：</p>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=NETAG" target="_blank"><span><cite>Oracle数据库网络服务管理员指南</cite></span></a></p>
                                 </div>
                              </li>
                              <li>
                                 <p>在两个数据库配置身份验证以支持重做数据的传输。</p>
                                 <p>使用安全套接字层（SSL）协议或远程登录密码文件对重做传输会话进行身份验证。如果源数据库具有远程登录密码文件，则将其复制到下游捕获数据库系统上的相应目录中。源数据库和下游捕获数据库的密码文件必须相同。</p>
                                 <div class="infoboxnotealso" id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__GUID-8F0DFBCE-839C-4975-914A-5CBB0505AB13">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关重做传输的身份验证要求的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=SBYDB00424" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a></p>
                                 </div>
                              </li>
                              <li id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__BHCGEEBG">
                                 <p>在源数据库中，设置以下初始化参数以配置重做传输服务，以将重做数据从源数据库传输到下游数据库：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span> - 配置至少一个<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数，以将重做数据传输到下游数据库。按以下方式设置此参数的以下属性：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SERVICE</code> - 指定下游数据库的网络服务名称。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ASYNC</code>或<code class="codeph">SYNC</code> - 指定重做传输模式。
                                             </p>
                                             <p>指定<code class="codeph">ASYNC</code>的优点是它对源数据库的性能几乎没有影响。如果下游数据库或网络性能不佳，建议<code class="codeph">ASYNC</code>避免影响源数据库性能。
                                             </p>
                                             <p>指定<code class="codeph">SYNC</code>的优点是重做数据比指定<code class="codeph">ASYNC</code>时更快地发送到下游数据库。此外，指定<code class="codeph">SYNC</code> <code class="codeph">AFFIRM</code>导致行为类似于<code class="codeph">MAXIMUM</code> <code class="codeph">AVAILABILITY</code>待机保护模式。请注意，指定的<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">STANDBY</code> <code class="codeph">DATABASE</code> <code class="codeph">TO</code> <code class="codeph">MAXIMIZE</code> <code class="codeph">AVAILABILITY</code> SQL语句上的XStream的捕捉过程没有影响。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOREGISTER</code> - 指定此属性，以便存档的重做日志文件的位置不会记录在下游数据库控制文件中。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">VALID_FOR</code> - 指定<code class="codeph">(ONLINE_LOGFILE,PRIMARY_ROLE)</code>或<code class="codeph">(ONLINE_LOGFILE,ALL_ROLES)</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TEMPLATE</code> - 如果要配置归档日志下游捕获过程，请在下游数据库中为归档重做日志指定目录和格式模板。<code class="codeph">TEMPLATE</code>属性会覆盖下游数据库中的<code class="codeph">LOG_ARCHIVE_FORMAT</code>初始化参数设置。<code class="codeph">TEMPLATE</code>属性仅对远程目标有效。确保格式在每个源数据库中使用以下所有变量： <code class="codeph">%t</code> ， <code class="codeph">%s</code>和<code class="codeph">%r</code> 。
                                             </p>
                                             <p>如果要配置实时下游捕获过程，请不要指定<code class="codeph">TEMPLATE</code>属性。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DB_UNIQUE_NAME</code> - 下游数据库的唯一名称。使用为下游数据库中的<code class="codeph">DB_UNIQUE_NAME</code>初始化参数指定的名称。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>以下示例是<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>设置，它指定实时下游捕获过程的下游数据库<code class="codeph">dbs2</code> ：</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_2 ='SERVICE = DBS2。EXAMPLE.COM ASYNC NOREGISTER VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = dbs2'</pre><p>以下示例是<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>设置， <code class="codeph">dbs2</code>为归档日志下游捕获过程指定下游数据库<code class="codeph">dbs2</code> ：</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_2 ='SERVICE = DBS2。EXAMPLE.COM ASYNC NOREGISTER VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）TEMPLATE = / usr / oracle / log_for_dbs1 / dbs1_arch_％t_％s_％r.log DB_UNIQUE_NAME = dbs2'</pre><p>有关实时和归档日志下游捕获之间差异的信息，请参阅<span class="q">“ <a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" title="配置XStream Out时，必须配置XStream组件以捕获数据库更改，并以逻辑更改记录（LCR）的形式将这些更改发送到出站服务器。">决定如何配置XStream Out</a> ”</span> 。
                                       </p>
                                       <div class="infobox-tip" id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__GUID-9CEE2AC3-34D7-4A9A-BCDA-850693AED876">
                                          <p class="notep1">小费：</p>
                                          <p>如果要配置归档日志下游捕获过程，请为<code class="codeph">TEMPLATE</code>属性指定一个值，该值将远程源数据库中的日志文件与本地数据库日志文件分开。此外，如果下游数据库包含来自多个源数据库的日志文件，则每个源数据库中的日志文件应彼此分开。
                                          </p>
                                       </div>
                                    </li>
                                    <li>
                                       <p><code class="codeph">LOG_ARCHIVE_DEST_STATE_</code> <span class="italic"><code class="codeph">n</code></span> - 将与下游数据库的<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>参数对应的初始化参数设置为<code class="codeph">ENABLE</code> 。</p>
                                       <p>例如，如果为下游数据库设置了<code class="codeph">LOG_ARCHIVE_DEST_2</code>初始化参数， <code class="codeph">LOG_ARCHIVE_DEST_STATE_2</code>以下方式设置<code class="codeph">LOG_ARCHIVE_DEST_STATE_2</code>参数：</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_STATE_2 = ENABLE</pre></li>
                                    <li>
                                       <p><code class="codeph">LOG_ARCHIVE_CONFIG</code> - 在此初始化参数中设置<code class="codeph">DB_CONFIG</code>属性，以包括源数据库和下游数据库的<code class="codeph">DB_UNIQUE_NAME</code> 。
                                       </p>
                                       <p>例如，如果源数据库的<code class="codeph">DB_UNIQUE_NAME</code>是<code class="codeph">dbs1</code> ，而下游数据库的<code class="codeph">DB_UNIQUE_NAME</code>是<code class="codeph">dbs2</code> ，则指定以下参数：</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_CONFIG = 'DG_CONFIG =（DBS1，DBS2）'</pre><p>默认情况下， <code class="codeph">LOG_ARCHIVE_CONFIG</code>参数使数据库能够发送和接收重做。
                                       </p>
                                    </li>
                                 </ul>
                                 <div class="infoboxnotealso" id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__GUID-BBF417E9-9066-4F19-AEB1-E178DD1B1234">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关这些初始化参数的详细信息，请<a href="../refrn/index.html" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=SBYDB01100" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a></p>
                                 </div>
                              </li>
                              <li id="GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__BHCBBADI">
                                 <p>在下游数据库中，在<code class="codeph">LOG_ARCHIVE_CONFIG</code>初始化参数中设置<code class="codeph">DB_CONFIG</code>属性以包括源数据库的<code class="codeph">DB_UNIQUE_NAME</code>和下游数据库。
                                 </p>
                                 <p>例如，如果源数据库的<code class="codeph">DB_UNIQUE_NAME</code>是<code class="codeph">dbs1</code> ，而下游数据库的<code class="codeph">DB_UNIQUE_NAME</code>是<code class="codeph">dbs2</code> ，则指定以下参数：</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_CONFIG = 'DG_CONFIG =（DBS1，DBS2）'</pre><p>默认情况下， <code class="codeph">LOG_ARCHIVE_CONFIG</code>参数使数据库能够发送和接收重做。
                                 </p>
                              </li>
                              <li>
                                 <p>如果在实例在步骤<a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__BHCGEEBG">3</a>或步骤<a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__BHCBBADI">4</a>中的数据库上运行时重置任何初始化参数，那么您可能还希望在初始化参数文件中重置它们，以便在重新启动数据库时保留新值。
                                 </p>
                                 <p>如果在实例运行时未重置初始化参数，而是在步骤<a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__BHCGEEBG">3</a>或步骤<a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6__BHCBBADI">4</a>中的初始化参数文件中重置它们，则重新启动数据库。源数据库在将重做日志文件发送到下游数据库时必须处于打开状态，因为仅当源数据库处于打开状态时，才会将源数据库的全局名称发送到下游数据库。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>完成这些步骤后，如果要配置实时下游捕获过程，可以在下游数据库中添加备用重做日志文件。在这种情况下，请参阅<span class="q">“ <a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66" title="如果您决定配置实时下游捕获，则将备用重做日志添加到捕获数据库。">如果需要，为实时下游捕获添加备用重做日志</a> ”中的说明</span> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="准备XStream Out出站服务器与准备Oracle Replication环境类似。">配置XStream Out的先决条件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM1562"></a><div class="props_rev_3"><a id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66" name="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66"></a><h5 id="XSTRM-GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66" class="sect5"><span class="enumeration_section">4.1.2.9</span>如果需要，添加备用重做日志以进行实时下游捕获</h5>
                     <div>
                        <p>如果您决定配置实时下游捕获，则将备用重做日志添加到捕获数据库。</p>
                        <div class="section">
                           <p>有关此决定的信息，请参阅<span class="q">“ <a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" title="配置XStream Out时，必须配置XStream组件以捕获数据库更改，并以逻辑更改记录（LCR）的形式将这些更改发送到出站服务器。">决定如何配置XStream Out</a> ”</span> 。
                           </p>
                           <p>本节中的示例在下游数据库中添加备用重做日志。需要备用重做日志来配置实时下游捕获过程。在该示例中，源数据库是<code class="codeph">dbs1.example.com</code> ，下游数据库是<code class="codeph">dbs2.example.com</code></p>
                           <p>只有在配置实时下游捕获时，才需要执行本节中的步骤。如果要配置存档日志下游捕获，则不要完成本节中的步骤。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__GUID-11D55269-357A-4C07-B4BC-10B284B93AA0">要添加备用重做日志以进行实时下游捕获：</p>
                           <ol>
                              <li>
                                 <p>完成<span class="q">“ <a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6" title="如果您决定使用本地捕获过程，则不需要日志文件传输。但是，如果您决定使用使用重做传输服务的下游捕获将归档重做日志文件自动传输到下游数据库，则配置从源数据库到捕获数据库的日志文件传输。">如果需要，将日志文件传输到下游数据库</a> ”中的步骤</span> 。
                                 </p>
                              </li>
                              <li id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCIAJIB">
                                 <p>在下游数据库中，设置以下初始化参数以配置本地生成的重做数据的归档：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>将<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数中的至少一个归档日志目标设置为目录或运行下游数据库的计算机系统上的快速恢复区域。按以下方式设置此参数的以下属性：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">LOCATION</code> - 指定磁盘目录的有效路径名，或者使用快速恢复区指定<code class="codeph">USE_DB_RECOVERY_FILE_DEST</code> 。此位置是从备用重做日志写入的归档重做日志文件的本地目标。来自远程源数据库的日志文件应与本地数据库日志文件分开。有关配置快速恢复区域的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=BRADV8183" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南”</cite></span></a> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">VALID_FOR</code> - 指定<code class="codeph">(ONLINE_LOGFILE,PRIMARY_ROLE)</code>或<code class="codeph">(ONLINE_LOGFILE,ALL_ROLES)</code> 。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>以下示例是实时下游捕获数据库中本地生成的重做数据的<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>设置：</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_1 ='LOCATION = / home / arc_dest / local_rl_dbs2 VALID_FOR =（ONLINE_LOGFILE，PRIMARY_ROLE）'</pre><p>实时下游捕获配置应将归档备用重做日志文件与下游数据库生成的归档联机重做日志文件分开。为<code class="codeph">VALID_FOR</code>属性中的重做日志类型指定<code class="codeph">ONLINE_LOGFILE</code>而不是<code class="codeph">ALL_LOGFILES</code>来完成此操作。
                                       </p>
                                       <p>如有必要，可以在<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数中指定其他属性。
                                       </p>
                                    </li>
                                    <li>
                                       <p>将与此步骤中先前设置的<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>参数对应的<code class="codeph">LOG_ARCHIVE_DEST_STATE_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数设置为<code class="codeph">ENABLE</code> 。</p>
                                       <p>例如，如果设置了<code class="codeph">LOG_ARCHIVE_DEST_1</code>初始化参数， <code class="codeph">LOG_ARCHIVE_DEST_STATE_1</code>以下方式设置<code class="codeph">LOG_ARCHIVE_DEST_STATE_1</code>参数：</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_STATE_1 = ENABLE</pre></li>
                                 </ul>
                              </li>
                              <li id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCEAGDC">
                                 <p>在下游数据库中，设置以下初始化参数以将下游数据库配置为从源数据库接收重做数据，并将重做数据写入下游数据库的备用重做日志：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>将<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数中的至少一个归档日志目标设置为目录或运行下游数据库的计算机系统上的快速恢复区域。按以下方式设置此参数的以下属性：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">LOCATION</code> - 指定磁盘目录的有效路径名，或者使用快速恢复区指定<code class="codeph">USE_DB_RECOVERY_FILE_DEST</code> 。此位置是从备用重做日志写入的归档重做日志文件的本地目标。来自远程源数据库的日志文件应与本地数据库日志文件分开。有关配置快速恢复区域的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=BRADV8183" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南”</cite></span></a> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">VALID_FOR</code> - 指定<code class="codeph">(STANDBY_LOGFILE,PRIMARY_ROLE)</code>或<code class="codeph">(STANDBY_LOGFILE,ALL_ROLES)</code> 。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>以下示例是在实时下游捕获数据库中从源数据库接收的重做数据的<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>设置：</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_2 ='LOCATION = / home / arc_dest / srl_dbs1 VALID_FOR =（STANDBY_LOGFILE，PRIMARY_ROLE）'</pre><p>如有必要，可以在<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数中指定其他属性。
                                       </p>
                                    </li>
                                    <li>
                                       <p>将与此步骤中先前设置的<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>参数对应的<code class="codeph">LOG_ARCHIVE_DEST_STATE_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数设置为<code class="codeph">ENABLE</code> 。</p>
                                       <p>例如，如果为下游数据库设置了<code class="codeph">LOG_ARCHIVE_DEST_2</code>初始化参数， <code class="codeph">LOG_ARCHIVE_DEST_STATE_2</code>以下方式设置<code class="codeph">LOG_ARCHIVE_DEST_STATE_2</code>参数：</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_STATE_2 = ENABLE</pre></li>
                                 </ul>
                                 <div class="infoboxnotealso" id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__GUID-D575AF8F-F03C-4B37-975A-39B808D58B36">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关这些初始化参数的详细信息，请<a href="../refrn/LOG_ARCHIVE_DEST_n.html#REFRN10086" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a>和<a href="../sbydb/oracle-data-guard-redo-transport-services.html#SBYDB00400" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a></p>
                                 </div>
                              </li>
                              <li>
                                 <p>如果在步骤<a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCIAJIB">2</a>或步骤<a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCEAGDC">3中</a>实例在数据库中运行时重置任何初始化参数，那么您可能还希望在相关的初始化参数文件中重置它们，以便在重新启动数据库时保留新值。
                                 </p>
                                 <p>如果在实例运行时未重置初始化参数，而是在步骤<a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCIAJIB">2</a>或步骤<a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCEAGDC">3</a>中的初始化参数文件中重置它们，则重新启动数据库。源数据库在将重做数据发送到下游数据库时必须打开，因为仅当源数据库打开时，源数据库的全局名称才会发送到下游数据库。
                                 </p>
                              </li>
                              <li>
                                 <p>创建备用重做日志文件。</p>
                                 <div class="infoboxnote" id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__GUID-77F3C95D-DC64-4F03-A2C3-74F8F72CB1D7">
                                    <p class="notep1">注意：</p>
                                    <p>以下步骤概述了将备用重做日志文件添加到下游数据库的一般过程。用于添加备用重做日志文件的特定步骤和SQL语句取决于您的环境。例如，在Oracle Real Application Clusters（Oracle RAC）环境中，步骤是不同的。有关将备用重做日志文件添加到数据库的详细说明，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=SBYDB00400" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a> 。
                                    </p>
                                 </div>
                                 <ol type="a">
                                    <li>
                                       <p>在SQL * Plus中，以管理用户身份连接到源数据库<code class="codeph">dbs1.example.com</code> 。
                                       </p>
                                       <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>确定源数据库上使用的日志文件大小。备用日志文件大小必须与源数据库日志文件大小完全匹配（或大于）。例如，如果源数据库日志文件大小为500 MB，则备用日志文件大小必须为500 MB或更大。您可以通过查询源数据库中的<code class="codeph">V$LOG</code>视图来确定源数据库中重做日志文件的大小（以字节为单位）。
                                       </p>
                                       <p>例如，查询<code class="codeph">V$LOG</code>视图：</p><pre class="oac_no_warn" dir="ltr">从V $ LOG中选择BYTES;</pre></li>
                                    <li>
                                       <p>确定下游数据库上所需的备用日志文件组的数量。</p>
                                       <p>备用日志文件组的数量必须至少比源数据库上的联机日志文件组的数量多一个。例如，如果源数据库有两个联机日志文件组，则下游数据库必须至少有三个备用日志文件组。</p>
                                       <p>您可以通过查询单个实例数据库的源数据库的<code class="codeph">V$LOG</code>视图或查询数据库集群的<code class="codeph">GV$LOG</code>视图来确定源数据库联机日志文件组的数量。
                                       </p>
                                       <p>例如，查询<code class="codeph">GV$LOG</code>视图：</p><pre class="oac_no_warn" dir="ltr">SELECT COUNT（GROUP＃）FROM GV $ LOG;</pre></li>
                                    <li>
                                       <p>在SQL * Plus中，以管理用户身份连接到下游数据库<code class="codeph">dbs2.example.com</code> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>使用SQL语句<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">ADD</code> <code class="codeph">STANDBY</code> <code class="codeph">LOGFILE</code>将备用日志文件组添加到下游数据库。
                                       </p>
                                       <p>例如，假设源数据库具有两个联机重做日志文件组，并且使用的日志文件大小为500 MB。在这种情况下，请使用以下语句创建相应的备用日志文件组：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE添加STANDBY LOGFILE GROUP 3（'/ orcle / dbs / news3a.rdo'，'/ oracle / dbs / news3b.rdo'）SIZE 500M; ALTER DATABASE添加STANDBY LOGFILE GROUP 4（'/ orcle / dbs / slog4.rdo'，'/ oracle / dbs / news4b.rdo'）SIZE 500M; ALTER DATABASE添加STANDBY LOGFILE GROUP 5（'/ orcle / dbs / slog5.rdo'，'/ oracle / dbs / news5b.rdo'）SIZE 500M;</pre></li>
                                    <li>
                                       <p>通过运行以下查询，确保已成功添加备用日志文件组：</p><pre class="oac_no_warn" dir="ltr">SELECT GROUP＃，THREAD＃，SEQUENCE＃，ARCHIVED，STATUS FROM V $ STANDBY_LOG;</pre><p>您的输出应类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">GROUP＃THREAD＃SEQUENCE＃ARC STATUS ---------- ---------- ---------- --- --------- -  3 0 0是未取消4 0 0是未取消5 0 0是未取消</pre></li>
                                    <li>
                                       <p>确保源数据库中的日志文件出现在步骤<a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__BHCEAGDC">3中</a> <code class="codeph">LOCATION</code>属性中指定的<code class="codeph">LOCATION</code> 。您可能需要在源数据库中切换日志文件以查看目录中的文件。
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>完成这些步骤后，您就可以配置实时下游捕获过程。</p>
                           <div class="infobox-tip" id="GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66__GUID-AF00E7CE-BD5C-44C4-BB11-357C390B17F4">
                              <p class="notep1">小费：</p>
                              <p>您可以使用Oracle Enterprise Manager Cloud Control配置实时下游捕获。有关说明，请参阅Oracle Enterprise Manager Cloud Control联机帮助。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="准备XStream Out出站服务器与准备Oracle Replication环境类似。">配置XStream Out的先决条件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="XSTRM1497"></a><div class="props_rev_3"><a id="GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB" name="GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB"></a><h3 id="XSTRM-GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB" class="sect3"><span class="enumeration_section">4.2</span>配置XStream Out</h3>
               <div>
                  <p>XStream Out配置中的出站服务器将Oracle数据库更改流式传输到客户端应用程序。</p>
                  <p>客户端应用程序使用Oracle调用接口（OCI）或Java接口连接到出站服务器以接收这些更改。</p>
                  <p>配置出站服务器涉及创建将捕获的数据库更改发送到出站服务器的组件。它还涉及配置出站服务器本身，其中包括指定客户端应用程序将用于连接到出站服务器的连接用户。</p>
                  <p>您可以使用<code class="codeph">DBMS_XSTREAM_ADM</code>包中的以下过程创建出站服务器：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">CREATE_OUTBOUND</code>过程使用一个过程调用在单个数据库中创建出站服务器，队列和捕获过程。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">ADD_OUTBOUND</code>过程可以创建出站服务器，也可以将出站服务器添加到现有的XStream Out配置中。在没有现有XStream Out配置的数据库上使用此过程时，它仅创建出站服务器。您必须单独创建捕获进程和队列，并且它们必须在运行<code class="codeph">ADD_OUTBOUND</code>过程之前存在。您可以在与出站服务器相同的数据库上或在其他数据库上配置捕获过程。
                        </p>
                     </li>
                  </ul>
                  <p>在这两种情况下，您都必须创建与出站服务器通信的客户端应用程序，并从出站服务器接收LCR。</p>
                  <p>如果需要多个出站服务器，则可以使用<code class="codeph">CREATE_OUTBOUND</code>过程创建捕获进程，以捕获第一个出站服务器的数据库更改。接下来，您可以运行<code class="codeph">ADD_OUTBOUND</code>过程以添加接收相同捕获的更改的其他出站服务器。捕获进程可以驻留在与出站服务器相同的数据库上，也可以驻留在不同的数据库上。
                  </p>
                  <p>此外，在CDB中配置XStream Out时需要特别注意。本节提供有关在CDB中创建出站服务器的说明。</p>
                  <div class="infobox-tip" id="GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB__GUID-4360361F-EDDD-4601-858A-1744C57C3E28">
                     <p class="notep1">小费：</p>
                     <p>在具有多个出站服务器的XStream Out配置中，最佳做法是创建一个捕获进程，以捕获所有出站服务器的更改。</p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-824451F5-B309-47D4-8798-9B9C522A28B6">使用CREATE_OUTBOUND配置出站服务器</a><br>该<code class="codeph">CREATE_OUTBOUND</code>在程序<code class="codeph">DBMS_XSTREAM_ADM</code>包创建一个捕获过程，队列，和出站单个数据库服务器。
                     </li>
                     <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD">将其他出站服务器添加到捕获流程流</a><br>XStream Out配置通常需要多个出站服务器来处理来自单个捕获过程的LCR流。您可以将其他出站服务器添加到已包含至少一个出站服务器的数据库中。
                     </li>
                     <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-E11C2367-653F-406A-A9D4-0750DE0BC559">使用ADD_OUTBOUND配置出站服务器</a><br><code class="codeph">DBMS_XSTREAM_ADM</code>包中的<code class="codeph">ADD_OUTBOUND</code>过程创建出站服务器。
                     </li>
                     <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719">在CDB中配置XStream Out</a><br>在CDB中配置XStream Out时，必须确定XStream Out将捕获哪些数据库更改并将其发送到客户端应用程序。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-1338E648-E214-4666-98A1-8B8D0085EB23" title="您可以配置XStream Out使用的Oracle数据库组件。">配置XStream Out</a></p>
                     </div>
                  </div>
               </div>
               <a id="XSTRM72587"></a><a id="XSTRM72588"></a><a id="XSTRM72692"></a><a id="XSTRM1499"></a><div class="props_rev_3"><a id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6" name="GUID-824451F5-B309-47D4-8798-9B9C522A28B6"></a><h4 id="XSTRM-GUID-824451F5-B309-47D4-8798-9B9C522A28B6" class="sect4"><span class="enumeration_section">4.2.1</span>使用CREATE_OUTBOUND配置出站服务器</h4>
                  <div>
                     <p>该<code class="codeph">CREATE_OUTBOUND</code>在程序<code class="codeph">DBMS_XSTREAM_ADM</code>包创建一个捕获过程，队列，和出站单个数据库服务器。
                     </p>
                     <div class="section">
                        <p>捕获进程和出站服务器都使用该过程创建的队列。运行该过程时，将提供新出站服务器的名称，同时该过程将为捕获进程和队列生成名称。如果希望所有组件都在同一个数据库上运行，那么<code class="codeph">CREATE_OUTBOUND</code>过程是创建出站服务器的最快速，最简单的方法。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__GUID-12706571-7A0F-42A5-8053-03B12C74CB07">先决条件</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在配置XStream Out之前，请确保满足以下先决条件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>完成<span class="q">“ <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="准备XStream Out出站服务器与准备Oracle Replication环境类似。">配置XStream Out的先决条件</a> ”中</span>描述的任务。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__GUID-67DD83DF-D6A5-418A-9470-5B4D9B657097">假设</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>本节做出以下假设：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>捕获过程将是本地捕获过程，它将在与出站服务器相同的数据库上运行。</p>
                              <p>本节中的说明只能在<span class="q">“ <a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" title="配置XStream Out时，必须配置XStream组件以捕获数据库更改，并以逻辑更改记录（LCR）的形式将这些更改发送到出站服务器。">决定如何配置XStream Out</a> ”中</span>描述的相同数据库配置上设置本地捕获和出站服务器。
                              </p>
                           </li>
                           <li>
                              <p>出站服务器的名称是<code class="codeph">xout</code> 。
                              </p>
                           </li>
                           <li>
                              <p>对<code class="codeph">oe.orders</code>和<code class="codeph">oe.order_items</code>表所做的数据操作语言（DML）和数据定义语言（DDL）更改将发送到出站服务器。
                              </p>
                           </li>
                           <li>
                              <p>对<code class="codeph">hr</code>模式进行的DML和DDL更改将发送到出站服务器。
                              </p>
                           </li>
                        </ul>
                        <p><a href="configuring-xstream-out.html#GUID-824451F5-B309-47D4-8798-9B9C522A28B6__CEGIGFEJ">图4-5</a>提供了此XStream Out配置的概述。
                        </p>
                        <div class="figure" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__CEGIGFEJ">
                           <p class="titleinfigure">图4-5使用CREATE_OUTBOUND创建的示例XStream Out配置</p><img src="img/xstrm074.png" width="456" alt="下面是图4-5的描述" title="下面是图4-5的描述" longdesc="img_text/xstrm074.html"><br><a href="img_text/xstrm074.html">“图4-5使用CREATE_OUTBOUND创建的示例XStream Out配置”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__GUID-4A29EE47-F155-402A-97B9-A292141DA73F">使用<span class="bold"><code class="codeph">CREATE_OUTBOUND</code></span>过程创建出站服务器：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，以XStream管理员身份连接到数据库。</p>
                              <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                              </p>
                           </li>
                           <li id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__CBDJFCJH">
                              <p>运行<code class="codeph">CREATE_OUTBOUND</code>过程。
                              </p>
                              <p>鉴于此部分的假设，请运行以下<code class="codeph">CREATE_OUTBOUND</code>过程：</p><pre class="oac_no_warn" dir="ltr">DECLARE表DBMS_UTILITY.UNCL_ARRAY; schemas DBMS_UTILITY.UNCL_ARRAY; BEGIN表（1）：='oe.orders'; tables（2）：='oe.order_items'; schemas（1）：='hr'; DBMS_XSTREAM_ADM.CREATE_OUTBOUND（server_name =&gt;'xout'，table_names =&gt; tables，schema_names =&gt; schemas）;结束; /</pre><p>运行此过程将执行以下操作：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>为<code class="codeph">oe.orders</code>和<code class="codeph">oe.order_items</code>表以及<code class="codeph">hr</code>模式中的所有表配置补充日志记录。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用捕获进程和出站服务器使用的系统生成的名称创建队列。</p>
                                 </li>
                                 <li>
                                    <p>使用系统生成的名称创建并启动捕获过程，该名称带有规则集，指示它捕获对<code class="codeph">oe.orders</code>表， <code class="codeph">oe.order_items</code>表和<code class="codeph">hr</code>模式的DML和DDL更改。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用规则集创建和启动名为<code class="codeph">xout</code>的出站服务器，该规则集指示它将<code class="codeph">oe.orders</code>表， <code class="codeph">oe.order_items</code>表和<code class="codeph">hr</code>模式的DML和DDL更改发送到客户端应用程序。
                                    </p>
                                 </li>
                                 <li>
                                    <p>将当前用户设置为出站服务器的连接用户。在此示例中，当前用户是XStream管理员。客户端应用程序必须以连接用户身份连接到数据库才能与出站服务器进行交互。</p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__GUID-A77593FA-2FC9-42CF-9738-377A322B33AB">
                                 <p class="notep1">注意：</p>
                                 <p><code class="codeph">server_name</code>值不能超过30个字节。
                                 </p>
                              </div>
                              <div class="infobox-tip" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__GUID-9101A4FE-39FD-4737-A482-78A2EE374279">
                                 <p class="notep1">小费：</p>
                                 <p>要捕获所有数据库更改并将其发送到出站服务器，请为<code class="codeph">table_names</code>和<code class="codeph">schema_names</code>参数指定<code class="codeph">NULL</code> （缺省值）。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>创建并运行将连接到出站服务器并接收LCR的客户端应用程序。有关<a href="sample-xstream-client-application.html#GUID-B914FF75-92AA-4270-BF71-E9A5AA9228F8" title="Examples illustrate how to configure the Oracle Database components that are used by XStream. The examples configure sample client applications that communicate with an XStream outbound server and inbound server.">示例应用程序</a> ，请参阅<a href="sample-xstream-client-application.html#GUID-B914FF75-92AA-4270-BF71-E9A5AA9228F8" title="示例说明如何配置XStream使用的Oracle数据库组件。这些示例配置与XStream出站服务器和入站服务器通信的示例客户端应用程序。">示例XStream客户端应用</a>程序
                              </p>
                           </li>
                           <li>
                              <p>要添加一个或多个从步骤<a href="configuring-xstream-out.html#GUID-824451F5-B309-47D4-8798-9B9C522A28B6__CBDJFCJH">2</a>中创建的捕获进程接收LCR的其他出站服务器，请按照<span class="q">“ <a href="configuring-xstream-out.html#GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD" title="XStream Out配置通常需要多个出站服务器来处理来自单个捕获过程的LCR流。您可以将其他出站服务器添加到已包含至少一个出站服务器的数据库中。">将其他出站服务器添加到捕获进程流</a> ”中的说明进行操作</span> 。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>运行客户端应用程序时，将自动启动出站服务器。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-824451F5-B309-47D4-8798-9B9C522A28B6__GUID-185AB3DF-C993-40EB-9E65-2984AD394584">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS70198" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB" title="XStream Out配置中的出站服务器将Oracle数据库更改流式传输到客户端应用程序。">配置XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72591"></a><a id="XSTRM72592"></a><a id="XSTRM72694"></a><a id="XSTRM1639"></a><div class="props_rev_3"><a id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD" name="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD"></a><h4 id="XSTRM-GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD" class="sect4"><span class="enumeration_section">4.2.2</span>将其他出站服务器添加到捕获流程流</h4>
                  <div>
                     <p>XStream Out配置通常需要多个出站服务器来处理来自单个捕获过程的LCR流。您可以将其他出站服务器添加到已包含至少一个出站服务器的数据库中。</p>
                     <div class="section">
                        <p>附加出站服务器使用与另一个出站服务器相同的队列来从捕获过程接收LCR。当XStream的输出环境中存在，则使用<code class="codeph">ADD_OUTBOUND</code>过程中的<code class="codeph">DBMS_XSTREAM_ADM</code>封装到另一出站服务器添加到捕获过程流。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__GUID-F5A05437-540E-40D0-8FDB-C8A081599E3C">先决条件</p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>在完成本节中的步骤之前，请配置包含至少一个出站服务器的XStream Out环境。以下部分描述了配置和XStream Out环境：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="configuring-xstream-out.html#GUID-824451F5-B309-47D4-8798-9B9C522A28B6" title="DBMS_XSTREAM_ADM包中的CREATE_OUTBOUND过程在单个数据库中创建捕获进程，队列和出站服务器。">使用CREATE_OUTBOUND配置出站服务器</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="configuring-xstream-out.html#GUID-E11C2367-653F-406A-A9D4-0750DE0BC559" title="DBMS_XSTREAM_ADM包中的ADD_OUTBOUND过程创建出站服务器。">使用ADD_OUTBOUND配置出站服务器</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__GUID-67648030-B9DC-45A9-9E35-3C5CD3B8CB13">假设</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>本节做出以下假设：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>出站服务器的名称是<code class="codeph">xout2</code> 。
                              </p>
                           </li>
                           <li>
                              <p>出站服务器使用的队列是<code class="codeph">xstrmadmin.xstream_queue</code> 。
                              </p>
                           </li>
                           <li>
                              <p>对<code class="codeph">oe.orders</code>和<code class="codeph">oe.order_items</code>表进行的DML和DDL更改将发送到出站服务器。
                              </p>
                           </li>
                           <li>
                              <p>对<code class="codeph">hr</code>模式进行的DML和DDL更改将发送到出站服务器。
                              </p>
                           </li>
                           <li>
                              <p>数据库更改的源数据库是<code class="codeph">db1.example.com</code> 。
                              </p>
                           </li>
                        </ul>
                        <p><a href="configuring-xstream-out.html#GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__CEGGAIFC">图4-6</a>提供了此XStream Out配置的概述。
                        </p>
                        <div class="figure" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__CEGGAIFC">
                           <p class="titleinfigure">图4-6使用其他出站服务器的示例XStream Out配置</p><img src="img/xstrm073.png" width="587" alt="下面是图4-6的描述" title="下面是图4-6的描述" longdesc="img_text/xstrm073.html"><br><a href="img_text/xstrm073.html">“图4-6带有附加出站服务器的XStream Out配置示例”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__GUID-4E0A1692-FEB6-4A70-92EF-9C79D4DE45EC">使用<span class="bold"><code class="codeph">ADD_OUTBOUND</code></span>过程将另一个出站服务器添加到捕获流程流：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，连接到将以XStream管理员身份运行其他出站服务器的数据库。</p>
                              <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span class="italic">Oracle数据库管理员指南”</span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>确定从捕获进程接收LCR的现有出站服务器使用的队列名称。</p>
                              <p>在<span class="q">“ <a href="monitoring-xstream-out.html#GUID-C50E0D1A-4DDC-4CF5-A8D1-A92B03AC2E93" title="示例查询说明了如何显示有关出站服务器的常规信息。">显示有关出站服务器的常规信息</a> ”中</span>运行查询以确定队列的所有者和名称。此查询还显示捕获进程的名称和源数据库名称。
                              </p>
                           </li>
                           <li>
                              <p>运行<code class="codeph">ADD_OUTBOUND</code>过程。
                              </p>
                              <p>鉴于此部分的假设，请运行以下<code class="codeph">ADD_OUTBOUND</code>过程：</p><pre class="oac_no_warn" dir="ltr">DECLARE表DBMS_UTILITY.UNCL_ARRAY; schemas DBMS_UTILITY.UNCL_ARRAY; BEGIN表（1）：='oe.orders'; tables（2）：='oe.order_items'; schemas（1）：='hr'; DBMS_XSTREAM_ADM.ADD_OUTBOUND（server_name =&gt;'xout2'，queue_name =&gt;'xstrmadmin.xstream_queue'，source_database =&gt;'db1.example.com'，table_names =&gt; tables，schema_names =&gt; schemas）;结束; /</pre><p>运行此过程将执行以下操作：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>创建名为<code class="codeph">xout2</code>的出站服务器。出站服务器具有规则集，指示它将<code class="codeph">oe.orders</code>表， <code class="codeph">oe.order_items</code>表和<code class="codeph">hr</code>模式的DML和DDL更改发送到客户端应用程序。规则指定这些更改必须源自<code class="codeph">db1.example.com</code>数据库。出站服务器将队列<code class="codeph">xstrmadmin.xstream_queue</code> LCR排队。
                                    </p>
                                 </li>
                                 <li>
                                    <p>将当前用户设置为出站服务器的连接用户。在此示例中，当前用户是XStream管理员。客户端应用程序必须以连接用户身份连接到数据库才能与出站服务器进行交互。</p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__GUID-5BADA068-64BB-45CB-B81B-66139DF07A72">
                                 <p class="notep1">注意：</p>
                                 <p><code class="codeph">server_name</code>值不能超过30个字节。
                                 </p>
                              </div>
                              <div class="infobox-tip" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__GUID-8A39814D-35B4-4CF7-AAA8-849B21783F9F">
                                 <p class="notep1">小费：</p>
                                 <p>要使出站服务器接收捕获进程发送的所有LCR，请为<code class="codeph">table_names</code>和<code class="codeph">schema_names</code>参数指定<code class="codeph">NULL</code> （缺省值）。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>如果客户端应用程序不存在，则创建并运行将连接到出站服务器并接收LCR的客户端应用程序。有关<a href="sample-xstream-client-application.html#GUID-B914FF75-92AA-4270-BF71-E9A5AA9228F8" title="Examples illustrate how to configure the Oracle Database components that are used by XStream. The examples configure sample client applications that communicate with an XStream outbound server and inbound server.">示例应用程序</a> ，请参阅<a href="sample-xstream-client-application.html#GUID-B914FF75-92AA-4270-BF71-E9A5AA9228F8" title="示例说明如何配置XStream使用的Oracle数据库组件。这些示例配置与XStream出站服务器和入站服务器通信的示例客户端应用程序。">示例XStream客户端应用</a>程序
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>运行客户端应用程序时，将自动启动出站服务器。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD__GUID-2CBE7B7B-2DAF-4CFD-919F-275A8AD8223B">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_XSTREAM_ADM.html#ARPLS70188" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB" title="XStream Out配置中的出站服务器将Oracle数据库更改流式传输到客户端应用程序。">配置XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72589"></a><a id="XSTRM72590"></a><a id="XSTRM72693"></a><a id="XSTRM1500"></a><div class="props_rev_3"><a id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559" name="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559"></a><h4 id="XSTRM-GUID-E11C2367-653F-406A-A9D4-0750DE0BC559" class="sect4"><span class="enumeration_section">4.2.3</span>使用ADD_OUTBOUND配置出站服务器</h4>
                  <div>
                     <p><code class="codeph">DBMS_XSTREAM_ADM</code>包中的<code class="codeph">ADD_OUTBOUND</code>过程创建出站服务器。
                     </p>
                     <div class="section">
                        <p>此过程不会创建捕获过程或队列。在没有现有XStream Out配置的数据库中，您必须手动配置这些组件。</p>
                        <p>您可以使用<code class="codeph">ADD_OUTBOUND</code>过程设置<span class="q">“ <a href="configuring-xstream-out.html#GUID-89EEFA3B-CED7-4682-97D6-A5BEA8E9C4D2" title="配置XStream Out时，必须配置XStream组件以捕获数据库更改，并以逻辑更改记录（LCR）的形式将这些更改发送到出站服务器。">决定如何配置XStream Out</a> ”中</span>描述的任何配置。但是，如果选择在同一数据库上配置本地捕获和出站服务器，则通常更容易使用<code class="codeph">CREATE_OUTBOUND</code>过程同时配置所有组件。请参阅<span class="q">“ <a href="configuring-xstream-out.html#GUID-824451F5-B309-47D4-8798-9B9C522A28B6" title="DBMS_XSTREAM_ADM包中的CREATE_OUTBOUND过程在单个数据库中创建捕获进程，队列和出站服务器。">使用CREATE_OUTBOUND配置出站服务器</a> ”</span> 。
                        </p>
                        <p>本节包括在同一数据库中配置下游捕获和出站服务器的示例。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__GUID-A4D68D63-C73D-491C-A4B1-067EAA12F747">先决条件</p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>在配置XStream Out之前，请确保满足以下先决条件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>完成<span class="q">“ <a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="准备XStream Out出站服务器与准备Oracle Replication环境类似。">配置XStream Out的先决条件</a> ”中</span>描述的任务。
                              </p>
                              <p>如果决定使用下游捕获，则必须配置从源数据库到下游数据库的日志文件传输。请参阅<span class="q">“ <a href="configuring-xstream-out.html#GUID-805B47D2-CD3B-4596-A682-AF6C6AAFF0F6" title="如果您决定使用本地捕获过程，则不需要日志文件传输。但是，如果您决定使用使用重做传输服务的下游捕获将归档重做日志文件自动传输到下游数据库，则配置从源数据库到捕获数据库的日志文件传输。">如果需要，请将日志文件传输配置到下游数据库</a> ”</span> 。
                              </p>
                              <p>如果要使用实时下游捕获，则还必须添加所需的备用重做日志。请参阅<span class="q">“ <a href="configuring-xstream-out.html#GUID-6914DCCC-DA99-4AD9-AF59-E240BB5BCA66" title="如果您决定配置实时下游捕获，则将备用重做日志添加到捕获数据库。">如果需要，请添加备用重做日志以进行实时下游捕获</a> ”</span> 。
                              </p>
                              <p>本节中的示例使用下游捕获。因此，必须配置日志文件传输以完成该示例。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__GUID-7A4A9819-085E-4AEB-AE92-656DA6AD6E46">假设</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>本节做出以下假设：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>出站服务器的名称是<code class="codeph">xout</code> 。
                              </p>
                           </li>
                           <li>
                              <p>出站服务器使用的队列是<code class="codeph">xstrmadmin.xstream_queue</code> 。
                              </p>
                           </li>
                           <li>
                              <p>源数据库是<code class="codeph">db1.example.com</code> 。
                              </p>
                           </li>
                           <li>
                              <p>捕获进程和出站服务器在与源数据库不同的数据库上运行。因此，配置下游捕获。</p>
                           </li>
                           <li>
                              <p>对<code class="codeph">oe.orders</code>和<code class="codeph">oe.order_items</code>表进行的DML和DDL更改将发送到出站服务器。
                              </p>
                           </li>
                           <li>
                              <p>对<code class="codeph">hr</code>模式进行的DML和DDL更改将发送到出站服务器。
                              </p>
                           </li>
                        </ul>
                        <p><a href="configuring-xstream-out.html#GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__CEGDGBFF">图4-7</a>提供了此XStream Out配置的概述。
                        </p>
                        <div class="figure" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__CEGDGBFF">
                           <p class="titleinfigure">图4-7使用ADD_OUTBOUND创建的示例XStream Out配置</p><img src="img/xstrm077.png" width="408" alt="下面是图4-7的描述" title="下面是图4-7的描述" longdesc="img_text/xstrm077.html"><br><a href="img_text/xstrm077.html">“图4-7使用ADD_OUTBOUND创建的示例XStream Out配置”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__GUID-E4E80C6F-6573-46BC-B620-6E8B64203FA5">使用<span class="bold"><code class="codeph">ADD_OUTBOUND</code></span>过程创建出站服务器：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，连接到将以XStream管理员身份运行捕获进程（捕获数据库）的数据库。</p>
                              <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>创建将由捕获进程使用的队列。</p>
                              <p>例如，运行以下过程：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XSTREAM_ADM.SET_UP_QUEUE（queue_table =&gt;'xstrmadmin.xstream_queue_table'，queue_name =&gt;'xstrmadmin.xstream_queue'）;结束; /</pre></li>
                           <li>
                              <p>创建从下游捕获数据库到源数据库的数据库链接。</p>
                              <p>在此示例中，创建从下游捕获数据库到<code class="codeph">db1.example.com</code>的数据库链接。例如，如果用户<code class="codeph">xstrmadmin</code>是两个数据库上的XStream管理员，则创建以下数据库链接：</p><pre class="oac_no_warn" dir="ltr">CREATE DATABASE LINK db1.example.com通过<span class="italic">密码</span>使用'db1.example.com'连接到xstrmadmin IDENTIFIED BY;</pre><p>请参阅<span class="q">“ <a href="configuring-xstream-out.html#GUID-5698C419-C872-4214-933E-B87E7A99FF2C" title="当XStream Out配置包含多个数据库时，需要网络连接和数据库链接。">如果需要，请配置网络连接和数据库链接</a> ”</span> 。
                              </p>
                              <p>如果不创建数据库链接，则必须在源数据库中完成以下步骤：</p>
                              <ol type="a">
                                 <li>
                                    <p>以XStream管理员身份连接到源数据库。</p>
                                 </li>
                                 <li>
                                    <p>运行<code class="codeph">DBMS_CAPTURE_ADM.BUILD</code>过程。例如：</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON DECLARE scn NUMBER; BEGIN DBMS_CAPTURE_ADM.BUILD（first_scn =&gt; scn）; DBMS_OUTPUT.PUT_LINE（'First SCN Value ='|| scn）;结束; /第一个SCN值= 409391</pre><p>此过程显示将在下游捕获数据库中创建的捕获进程的有效第一个SCN值。记下返回的SCN值，因为在步骤<a href="configuring-xstream-out.html#GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__CBDHHGBG">4中</a>创建捕获过程时将使用它。
                                    </p>
                                 </li>
                                 <li>
                                    <p>确保为源数据库中的数据库对象指定了必需的补充日志记录。</p>
                                    <p>对于此示例，请确保为<code class="codeph">hr</code> schema架构， <code class="codeph">oe.orders</code>表和<code class="codeph">db1.example.com</code>数据库中的<code class="codeph">oe.order_items</code>表配置了补充日志记录。
                                    </p>
                                    <p>有关指定补充日志记录的说明<span class="q"><a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="When you use a capture process to capture changes, supplemental logging must be specified for certain columns at a source database for changes to the columns to be applied successfully at a destination database.">，</a></span>请参阅<span class="q">“ <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="使用捕获过程捕获更改时，必须为源数据库中的某些列指定补充日志记录，以更改要在目标数据库中成功应用的列。">如果需要，请配置补充日志记录</a> ”</span> 。
                                    </p>
                                 </li>
                              </ol>
                              <p>如果创建数据库链接，则不需要这些步骤。</p>
                           </li>
                           <li id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__CBDHHGBG">
                              <p>连接到下游捕获数据库时，创建捕获过程并向其添加规则。</p>
                              <p>例如，运行以下过程以创建捕获过程：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_CAPTURE_ADM.CREATE_CAPTURE（queue_name =&gt;'xstrmadmin.xstream_queue'，capture_name =&gt;'xout_capture'，capture_class =&gt;'xstream'）;结束; /</pre><p>将规则添加到捕获进程的规则集，以捕获对<code class="codeph">hr</code>模式， <code class="codeph">oe.orders</code>表和<code class="codeph">oe.order_items</code>表的<code class="codeph">oe.order_items</code> 。
                              </p>
                              <p>例如，运行以下过程来创建规则：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XSTREAM_ADM.ADD_SCHEMA_RULES（schema_name =&gt;'hr'，streams_type =&gt;'capture'，streams_name =&gt;'xout_capture'，queue_name =&gt;'xstrmadmin.xstream_queue'，include_dml =&gt; TRUE，include_ddl =&gt; TRUE，source_database =&gt;'db1 .example.com的'）;结束; / BEGIN DBMS_XSTREAM_ADM.ADD_TABLE_RULES（table_name =&gt;'oe.orders'，streams_type =&gt;'capture'，streams_name =&gt;'xout_capture'，queue_name =&gt;'xstrmadmin.xstream_queue'，include_dml =&gt; TRUE，include_ddl =&gt; TRUE，source_database = &gt;'db1.example.com'）;结束; / BEGIN DBMS_XSTREAM_ADM.ADD_TABLE_RULES（table_name =&gt;'oe.order_items'，streams_type =&gt;'capture'，streams_name =&gt;'xout_capture'，queue_name =&gt;'xstrmadmin.xstream_queue'，include_dml =&gt; TRUE，include_ddl =&gt; TRUE，source_database = &gt;'db1.example.com'）;结束; /</pre><p>不要开始捕获过程。</p>
                           </li>
                           <li>
                              <p>运行<code class="codeph">ADD_OUTBOUND</code>过程。
                              </p>
                              <p>给定此部分的假设，运行以下<code class="codeph">ADD_OUTBOUND</code>过程：</p><pre class="oac_no_warn" dir="ltr">DECLARE表DBMS_UTILITY.UNCL_ARRAY; schemas DBMS_UTILITY.UNCL_ARRAY; BEGIN表（1）：='oe.orders'; tables（2）：='oe.order_items'; schemas（1）：='hr'; DBMS_XSTREAM_ADM.ADD_OUTBOUND（server_name =&gt;'xout'，queue_name =&gt;'xstrmadmin.xstream_queue'，source_database =&gt;'db1.example.com'，table_names =&gt; tables，schema_names =&gt; schemas）;结束; /</pre><p>运行此过程将执行以下操作：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>创建名为<code class="codeph">xout</code>的出站服务器。出站服务器具有规则集，指示它将<code class="codeph">oe.orders</code>表， <code class="codeph">oe.order_items</code>表和<code class="codeph">hr</code>模式的DML和DDL更改发送到客户端应用程序。规则指定这些更改必须源自<code class="codeph">db1.example.com</code>数据库。出站服务器将队列<code class="codeph">xstrmadmin.xstream_queue</code> LCR排队。
                                    </p>
                                 </li>
                                 <li>
                                    <p>将当前用户设置为出站服务器的连接用户。在此示例中，当前用户是XStream管理员。客户端应用程序必须以连接用户身份连接到数据库才能与出站服务器进行交互。</p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__GUID-AC758A03-4712-4C66-8BBA-09F461B8FE14">
                                 <p class="notep1">注意：</p>
                                 <p><code class="codeph">server_name</code>值不能超过30个字节。
                                 </p>
                              </div>
                              <div class="infobox-tip" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__GUID-7DAD7EA6-4110-4C8F-B536-BFB9A9D5409C">
                                 <p class="notep1">小费：</p>
                                 <p>要使出站服务器接收捕获进程发送的所有LCR，请为<code class="codeph">table_names</code>和<code class="codeph">schema_names</code>参数指定<code class="codeph">NULL</code> （缺省值）。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>创建并运行将连接到出站服务器并接收LCR的客户端应用程序。有关<a href="sample-xstream-client-application.html#GUID-B914FF75-92AA-4270-BF71-E9A5AA9228F8" title="Examples illustrate how to configure the Oracle Database components that are used by XStream. The examples configure sample client applications that communicate with an XStream outbound server and inbound server.">示例应用程序</a> ，请参阅<a href="sample-xstream-client-application.html#GUID-B914FF75-92AA-4270-BF71-E9A5AA9228F8" title="示例说明如何配置XStream使用的Oracle数据库组件。这些示例配置与XStream出站服务器和入站服务器通信的示例客户端应用程序。">示例XStream客户端应用</a>程序
                              </p>
                              <p>运行客户端应用程序时，将自动启动出站服务器。</p>
                           </li>
                           <li>
                              <p>要添加一个或多个从步骤<a href="configuring-xstream-out.html#GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__CBDHHGBG">4</a>中创建的捕获进程接收LCR的其他出站服务器，请按照<span class="q">“ <a href="configuring-xstream-out.html#GUID-2D5F76FB-5D8A-420A-BAF2-2EFA7A5F3EDD" title="XStream Out配置通常需要多个出站服务器来处理来自单个捕获过程的LCR流。您可以将其他出站服务器添加到已包含至少一个出站服务器的数据库中。">将其他出站服务器添加到捕获进程流</a> ”中的说明进行操作</span> 。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E11C2367-653F-406A-A9D4-0750DE0BC559__GUID-A62E970E-69E9-433F-B48F-5CD105D9561B">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS70188" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB" title="XStream Out配置中的出站服务器将Oracle数据库更改流式传输到客户端应用程序。">配置XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72998"></a><div class="props_rev_3"><a id="GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" name="GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719"></a><h4 id="XSTRM-GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" class="sect4"><span class="enumeration_section">4.2.4</span>在CDB中配置XStream Out</h4>
                  <div>
                     <p>在CDB中配置XStream Out时，必须确定XStream Out将捕获哪些数据库更改并将其发送到客户端应用程序。</p>
                     <p>XStream Out可以为所有容器流式传输所有数据库更改，包括CDB根和所有PDB，应用程序根和应用程序PDB，或者XStream Out可以从特定容器流式传输更改。此外，您可以使用本地捕获配置XStream Out，也可以使用下游捕获对其进行配置，以卸载从源数据库捕获更改所需的工作。</p>
                     <p>在CDB中配置XStream Out时，以下限制适用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>捕获进程和出站服务器必须位于CDB根目录中。</p>
                        </li>
                        <li>
                           <p>捕获进程和出站服务器必须位于同一CDB中。</p>
                        </li>
                        <li>
                           <p>在XStream Out配置期间，CDB中的每个容器都必须打开。</p>
                        </li>
                        <li>
                           <p>捕获对应用程序根目录所做的更改时，必须确保<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句仅复制到其他应用程序根目录。
                           </p>
                        </li>
                     </ul>
                     <p>此外，请确保为CDB正确创建XStream管理员。</p>
                     <div class="infoboxnote" id="GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719__GUID-1A3069BE-D8C1-4258-BB59-4036CB35DC09">
                        <p class="notep1">注意：</p>
                        <p>使用非CDB创建容器时，非CDB中的任何XStream Out组件都不能在容器中使用。您必须在CDB根目录中删除并重新创建XStream Out组件，包括捕获进程和出站服务器。</p>
                     </div>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669">在CDB中使用本地捕获配置XStream Out</a><br>一个示例说明了在CDB中使用本地捕获配置XStream Out。</li>
                        <li class="ulchildlink"><a href="configuring-xstream-out.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A">在CDB中使用下游捕获配置XStream Out</a><br>使用下游捕获，XStream Out组件可以驻留在源数据库以外的数据库中。
                        </li>
                     </ul>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="xstream-out-concepts.html#GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579" title="多租户环境使数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。">XStream Out和多租户环境</a></li>
                           <li><a href="general-xstream-concepts.html#GUID-60589C03-2095-42AA-8F2F-AFD83B110F31" title="在CDB中，必须在CDB根目录中配置XStream Out。因此，创建系统创建的规则的DBMS_XSTREAM_ADM包中的PL / SQL过程必须在作为普通用户连接时在CDB根目录中运行。">CDB和XStream Out中的系统创建规则</a></li>
                           <li><a href="configuring-xstream-out.html#GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128" title="XStream管理员在XStream Out环境中配置和管理XStream组件。">在所有数据库上配置XStream管理员</a></li>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=MULTI-GUID-F68E6FE9-919B-4665-95F7-785E69E07264" target="_blank"><span><cite>Oracle多租户管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-A1C8430E-565B-4F66-8E00-495F283AAAFB" title="XStream Out配置中的出站服务器将Oracle数据库更改流式传输到客户端应用程序。">配置XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72922"></a><a id="XSTRM72923"></a><a id="XSTRM72941"></a><a id="XSTRM72921"></a><div class="props_rev_3"><a id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669" name="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669"></a><h5 id="XSTRM-GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669" class="sect5"><span class="enumeration_section">4.2.4.1</span>在CDB中使用本地捕获配置XStream Out</h5>
                     <div>
                        <p>一个示例说明了在CDB中使用本地捕获配置XStream Out。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-00AD2429-E547-452E-98A6-CA92348CBA65">先决条件</p>
                           <p>在配置XStream Out之前，请确保在XStream Out配置期间CDB中的所有容器都处于打开的读/写模式。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-84DC71F1-4410-424A-972F-3060FC80405F">假设</p>
                           <p>本节做出以下假设：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>捕获过程将是本地捕获过程，它将在与出站服务器相同的数据库上运行。</p>
                              </li>
                              <li>
                                 <p>出站服务器的名称是<code class="codeph">xout</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>对PDB <code class="codeph">pdb1.example.com</code>中的<code class="codeph">oe.orders</code>和<code class="codeph">oe.order_items</code>表所做的数据操作语言（DML）和数据定义语言（DDL）更改将发送到出站服务器。
                                 </p>
                              </li>
                              <li>
                                 <p>对PDB <code class="codeph">pdb1.example.com</code>中的<code class="codeph">hr</code>模式所做的DML和DDL更改将发送到出站服务器。
                                 </p>
                              </li>
                           </ul>
                           <p><a href="configuring-xstream-out.html#GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__BHCJJGJI">图4-8</a>提供了此XStream Out配置的概述。
                           </p>
                           <div class="figure" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__BHCJJGJI">
                              <p class="titleinfigure">图4-8使用CREATE_OUTBOUND为PDB创建的示例XStream Out配置</p><img src="img/xstrm084.png" width="586" alt="下面是图4-8的描述" title="下面是图4-8的描述" longdesc="img_text/xstrm084.html"><br><a href="img_text/xstrm084.html">“图4-8使用CREATE_OUTBOUND为PDB创建的示例XStream Out配置”的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-D9311E5F-77CA-4913-BDB2-0B213ABEEFA4">使用<code class="codeph">CREATE_OUTBOUND</code>过程创建出站服务器：</p>
                           <ol>
                              <li>
                                 <p>在SQL * Plus中，以XStream管理员身份连接到CDB中的根（而不是PDB <code class="codeph">pdb1.example.com</code> ）。
                                 </p>
                              </li>
                              <li>
                                 <p>创建出站服务器和其他XStream组件。</p>
                                 <ol type="a">
                                    <li>
                                       <p>确保源CDB中的所有容器都处于打开的读/写模式。</p>
                                    </li>
                                    <li id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__BHCHIDBF">
                                       <p>运行<code class="codeph">CREATE_OUTBOUND</code>过程。
                                       </p>
                                       <p>鉴于此示例的假设，请运行以下<code class="codeph">CREATE_OUTBOUND</code>过程：</p><pre class="pre codeblock"><code>DECLARE表DBMS_UTILITY.UNCL_ARRAY; schemas DBMS_UTILITY.UNCL_ARRAY; BEGIN表（1）：='oe.orders'; tables（2）：='oe.order_items'; schemas（1）：='hr'; DBMS_XSTREAM_ADM.CREATE_OUTBOUND（server_name =&gt;'xout'，source_database =&gt;'pdb1.example.com'，table_names =&gt; tables，schema_names =&gt; schemas）;结束; /</code></pre><div class="infoboxnote" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-3F2AE034-37D6-42BA-B960-D4DA290E1B30">
                                          <p class="notep1">注意：</p>
                                          <p>要捕获CDB中所有容器（包括CDB根，所有PDB，所有应用程序根和所有应用程序PDB）中的更改，并将这些更改发送到XStream客户端应用程序，可以在运行<code class="codeph">CREATE_OUTBOUND</code>过程时省略<code class="codeph">source_database</code>参数。
                                          </p>
                                       </div>
                                    </li>
                                    <li>
                                       <p><code class="codeph">CREATE_OUTBOUND</code>过程成功完成后，如有必要，可以选择更改一个或多个容器的打开模式。
                                       </p>
                                    </li>
                                 </ol>
                                 <p>在步骤<a href="configuring-xstream-out.html#GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__BHCHIDBF">b中</a>运行该过程将执行以下操作：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>为<code class="codeph">oe.orders</code>和<code class="codeph">oe.order_items</code>表以及<code class="codeph">pdb1.example.com</code> PDB中<code class="codeph">hr</code>模式中的所有表配置补充日志记录。</p>
                                    </li>
                                    <li>
                                       <p>使用捕获进程和出站服务器使用的系统生成的名称创建队列。</p>
                                    </li>
                                    <li>
                                       <p>使用系统生成的名称创建并启动捕获过程，该名称带有规则集，指示它从<code class="codeph">pdb1.example.com</code> PDB捕获对<code class="codeph">oe.orders</code>表， <code class="codeph">oe.order_items</code>表和<code class="codeph">hr</code>模式的DML和DDL更改。</p>
                                    </li>
                                    <li>
                                       <p>使用规则集创建和启动名为<code class="codeph">xout</code>的出站服务器，该规则集指示它将<code class="codeph">oe.orders</code>表， <code class="codeph">oe.order_items</code>表和<code class="codeph">hr</code>模式的DML和DDL更改发送到客户端应用程序。
                                       </p>
                                    </li>
                                    <li>
                                       <p>将当前用户设置为出站服务器的连接用户。在此示例中，当前用户是XStream管理员。客户端应用程序必须以连接用户身份连接到数据库才能与出站服务器进行交互。</p>
                                    </li>
                                 </ul>
                                 <div class="infoboxnote" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-675A65B7-B11D-41A0-859F-2DC85081FCB2">
                                    <p class="notep1">注意：</p>
                                    <p><code class="codeph">server_name</code>值不能超过30个字节。
                                    </p>
                                 </div>
                                 <div class="infobox-tip" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-28CF918F-2949-43B6-AFD1-2B117B7D40F9">
                                    <p class="notep1">小费：</p>
                                    <p>要捕获<code class="codeph">pdb1.example.com</code>数据库中的所有数据库更改并将其发送到出站服务器，请为<code class="codeph">table_names</code>和<code class="codeph">schema_names</code>参数指定<code class="codeph">NULL</code> （缺省值）。
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p>创建并运行将连接到CDB根目录中的出站服务器并接收LCR的客户端应用程序。</p>
                                 <p>运行客户端应用程序时，将自动启动出站服务器。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="准备XStream Out出站服务器与准备Oracle Replication环境类似。">配置XStream Out的先决条件</a></li>
                              <li><a href="sample-xstream-client-application.html#GUID-B914FF75-92AA-4270-BF71-E9A5AA9228F8" title="示例说明如何配置XStream使用的Oracle数据库组件。这些示例配置与XStream出站服务器和入站服务器通信的示例客户端应用程序。">示例XStream客户端应用程序</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" title="在CDB中配置XStream Out时，必须确定XStream Out将捕获哪些数据库更改并将其发送到客户端应用程序。">在CDB中配置XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72926"></a><a id="XSTRM72927"></a><a id="XSTRM72928"></a><a id="XSTRM72925"></a><div class="props_rev_3"><a id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A" name="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A"></a><h5 id="XSTRM-GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A" class="sect5"><span class="enumeration_section">4.2.4.2</span>在CDB中使用下游捕获配置XStream输出</h5>
                     <div>
                        <p>使用下游捕获，XStream Out组件可以驻留在源数据库以外的数据库中。</p>
                        <div class="section">当您有多个CDB时，源数据库可以位于一个CDB中，您可以使用下游捕获来捕获另一个CDB中的更改。</div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__GUID-F64F89D7-DA05-467B-8EC7-E37228C54AA4">先决条件</p>
                           <p>在配置XStream Out之前，必须满足以下先决条件：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在XStream Out配置期间，确保CDB中的所有容器都处于打开的读/写模式。</p>
                              </li>
                              <li>
                                 <p>此示例使用下游捕获。因此，您必须配置从源数据库到下游数据库的日志文件传输。</p>
                              </li>
                              <li>
                                 <p>如果要使用实时下游捕获，则还必须添加所需的备用重做日志。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__GUID-D96EFF46-F06B-46A0-A290-92D845C7820D">假设</p>
                           <p>本节做出以下假设：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>出站服务器的名称是<code class="codeph">xout</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>出站服务器使用的队列是<code class="codeph">c##xstrmadmin.xstream_queue</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>源数据库是PDB <code class="codeph">pdb1.example.com</code>在CDB <code class="codeph">data.example.com</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>捕获过程在CDB <code class="codeph">capture.example.com</code>中运行。
                                 </p>
                              </li>
                              <li>
                                 <p>出站服务器在CDB <code class="codeph">capture.example.com</code>运行。
                                 </p>
                              </li>
                              <li>
                                 <p>从PDB <code class="codeph">pdb1.example.com</code>对<code class="codeph">oe.orders</code>和<code class="codeph">oe.order_items</code>表进行的DML和DDL更改将发送到出站服务器。
                                 </p>
                              </li>
                              <li>
                                 <p>从PDB <code class="codeph">pdb1.example.com</code>对<code class="codeph">hr</code>模式进行的DML和DDL更改将发送到出站服务器。
                                 </p>
                              </li>
                           </ul>
                           <p>下图概述了此XStream Out配置。</p>
                           <div class="figure" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCDEHBB">
                              <p class="titleinfigure">图4-9使用多个CDB和下游捕获的示例XStream Out配置</p><img src="img/xstrm085.png" width="594" alt="下面是图4-9的描述" title="下面是图4-9的描述" longdesc="img_text/xstrm085.html"><br><a href="img_text/xstrm085.html">“图4-9使用多个CDB和下游捕获的XStream Out配置示例”的说明</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__GUID-4731220D-3633-4364-A189-721FD3517454">使用CDB中的下游捕获配置XStream Out：</p>
                           <ol>
                              <li>
                                 <p>在SQL * Plus中，以XStream管理员身份连接到下游捕获CDB的根目录。</p>
                                 <p>在这个例子中。下游捕获CDB是<code class="codeph">capture.example.com</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>创建将由捕获进程使用的队列。</p>
                                 <p>例如，运行以下过程：</p><pre class="pre codeblock"><code>BEGIN DBMS_XSTREAM_ADM.SET_UP_QUEUE（queue_table =&gt;'c ## xstrmadmin.xstream_queue_table'，queue_name =&gt;'c ## xstrmadmin.xstream_queue'）;结束; /</code></pre></li>
                              <li id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCCCAIA">
                                 <p>（可选）创建从下游捕获CDB中的根目录到源CDB中的根目录的数据库链接。</p>
                                 <p>在此示例中，创建一个数据库链接，从<code class="codeph">capture.example.com</code>中的根目录到<code class="codeph">data.example.com</code>的根目录。例如，如果用户<code class="codeph">c##xstrmadmin</code>是两个数据库上的XStream管理员，则创建以下数据库链接：</p><pre class="pre codeblock"><code>创建数据库链接data.example.com连接到c ## xstrmadmin通过<span class="italic">密码</span>使用'data.example.com'标识;</code></pre></li>
                              <li>
                                 <p>确保源CDB中的所有容器都处于打开的读/写模式。</p>
                              </li>
                              <li>
                                 <p>如果未在步骤<a href="configuring-xstream-out.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCCCAIA">3中</a>创建数据库链接，则必须在源CDB的根目录中完成其他步骤。</p>
                                 <p>如果在步骤<a href="configuring-xstream-out.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCCCAIA">3中</a>创建了数据库链接，则不需要这些步骤。
                                 </p>
                                 <p>运行<code class="codeph">BUILD</code>过程并确保为源CDB中的数据库对象指定了所需的补充日志记录：</p>
                                 <ol type="a">
                                    <li>
                                       <p>以XStream管理员身份连接到源CDB中的根目录。</p>
                                    </li>
                                    <li>
                                       <p>运行<code class="codeph">DBMS_CAPTURE_ADM.BUILD</code>过程。例如：</p><pre class="pre codeblock"><code>SET SERVEROUTPUT ON DECLARE scn NUMBER; BEGIN DBMS_CAPTURE_ADM.BUILD（first_scn =&gt; scn）; DBMS_OUTPUT.PUT_LINE（'First SCN Value ='|| scn）;结束; /第一个SCN值= 409391</code></pre><p>此过程显示将在<code class="codeph">capture.example.com</code> CDB的根目录中创建的捕获进程的有效第一个SCN值。记下返回的SCN值，因为在步骤<a href="configuring-xstream-out.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCHAEJF">6中</a>创建捕获过程时将使用它。
                                       </p>
                                    </li>
                                    <li>
                                       <p>确保为源CDB中的数据库对象指定了必需的补充日志记录。</p>
                                       <p>对于此示例，请确保为<code class="codeph">hr</code>模式， <code class="codeph">oe.orders</code>表和<code class="codeph">pdb1.example.com</code> PDB中的<code class="codeph">oe.order_items</code>表配置了补充日志记录。</p>
                                    </li>
                                 </ol>
                              </li>
                              <li id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCHAEJF">
                                 <p>连接到下游捕获CDB中的根时，创建捕获过程。</p>
                                 <p>例如，运行以下过程以在作为XStream管理员连接到<code class="codeph">capture.example.com</code>时创建捕获过程：</p><pre class="pre codeblock"><code>BEGIN DBMS_CAPTURE_ADM.CREATE_CAPTURE（queue_name =&gt;'c ## xstrmadmin.xstream_queue'，capture_name =&gt;'real_time_capture'，rule_set_name =&gt; NULL，start_scn =&gt; NULL，source_database =&gt; NULL，use_database_link =&gt; TRUE，first_scn =&gt; NULL，logfile_assignment = &gt;'implicit'，source_root_name =&gt;'data.example.com'，capture_class =&gt;'xstream'）;结束; /</code></pre><p>如果在步骤<a href="configuring-xstream-out.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCCCAIA">3中</a>未创建数据库链接，则指定<code class="codeph">DBMS_CAPTURE_ADM.BUILD</code>过程为<code class="codeph">first_scn</code>参数返回的SCN值。
                                 </p>
                                 <p>不要开始捕获过程。</p>
                              </li>
                              <li>
                                 <p>创建捕获过程后，如有必要，可以选择更改一个或多个PDB的打开模式。</p>
                              </li>
                              <li>
                                 <p>运行<code class="codeph">ADD_OUTBOUND</code>过程。
                                 </p>
                                 <p>给定此部分的假设，运行以下<code class="codeph">ADD_OUTBOUND</code>过程：</p><pre class="pre codeblock"><code>DECLARE表DBMS_UTILITY.UNCL_ARRAY; schemas DBMS_UTILITY.UNCL_ARRAY; BEGIN表（1）：='oe.orders'; tables（2）：='oe.order_items'; schemas（1）：='hr'; DBMS_XSTREAM_ADM.ADD_OUTBOUND（server_name =&gt;'xout'，queue_name =&gt;'c ## xstrmadmin.xstream_queue'，source_database =&gt;'pdb1.example.com'，table_names =&gt; tables，schema_names =&gt; schemas，source_root_name =&gt;'data.example .com'，source_container_name =&gt;'pdb1'）;结束; /</code></pre><p>运行此过程将执行以下操作：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>创建名为<code class="codeph">xout</code>的出站服务器。出站服务器具有规则集，指示它将<code class="codeph">oe.orders</code>表， <code class="codeph">oe.order_items</code>表和<code class="codeph">hr</code>模式的DML和DDL更改发送到客户端应用程序。该规则规定，这些变化必须起源于PDB <code class="codeph">pdb1.example.com</code>在CDB <code class="codeph">data.example.com</code> 。出站服务器将LCR从队列<code class="codeph">c##xstrmadmin.xstream_queue</code> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>将当前用户设置为出站服务器的<code class="codeph">connect_user</code> 。在此示例中， <code class="codeph">current_user</code>是XStream管理员。客户端应用程序必须以<code class="codeph">connect_user</code>身份连接到数据库才能与出站服务器进行交互。
                                       </p>
                                    </li>
                                 </ul>
                                 <div class="infoboxnote" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__GUID-692609D0-11F7-4EE7-9F4C-55DB5E31F93D">
                                    <p class="notep1">注意：</p>
                                    <p><code class="codeph">server_name</code>值不能超过30个字节。
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p>创建并运行将连接到出站服务器并接收LCR的客户端应用程序。</p>
                                 <p>运行客户端应用程序时，将在下游捕获CDB自动启动出站服务器。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-xstream-out.html#GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" title="准备XStream Out出站服务器与准备Oracle Replication环境类似。">配置XStream Out的先决条件</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-xstream-out.html#GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" title="在CDB中配置XStream Out时，必须确定XStream Out将捕获哪些数据库更改并将其发送到客户端应用程序。">在CDB中配置XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
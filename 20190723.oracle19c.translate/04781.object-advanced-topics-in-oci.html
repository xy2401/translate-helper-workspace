<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter introduces the OCI facility for working with objects in an Oracle Database."></meta>
      <meta name="description" content="This chapter introduces the OCI facility for working with objects in an Oracle Database."></meta>
      <title>OCI中的对象高级主题</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="This chapter introduces the OCI facility for working with objects in an Oracle Database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="direct-path-load-interface.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oci-support-for-xml.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="direct-path-load-interface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oci-support-for-xml.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">OCI中的对象高级主题</li>
            </ol>
            <a id="GUID-B2FBDC75-64BD-4E7E-A713-5095A827EA9C" name="GUID-B2FBDC75-64BD-4E7E-A713-5095A827EA9C"></a><a id="LNOCI130"></a>
            
            <h2 id="LNOCI-GUID-B2FBDC75-64BD-4E7E-A713-5095A827EA9C" class="sect2">在OCI中的<span class="enumeration_chapter">22个</span>对象高级主题</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍用于在Oracle数据库中处理对象的OCI工具。</p>
               <p>它还讨论了对象导航函数调用，类型演化以及对OCI生成的XML的支持。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="object-advanced-topics-in-oci.html#GUID-702B4236-3993-46E0-BCB6-1A2FC7E056C1" title="对象缓存是客户端内存缓冲区，为对象提供查找和内存管理支持。">对象缓存和内存管理</a></p>
                  </li>
                  <li>
                     <p><a href="object-advanced-topics-in-oci.html#GUID-4BFF0155-C6FE-4592-89CF-F8FD99E1E2BC" title="本节讨论OCI应用程序如何浏览对象缓存中对象的图形。">对象导航</a></p>
                  </li>
                  <li>
                     <p><a href="object-advanced-topics-in-oci.html#GUID-AC858892-54CA-403F-AB4C-5DD14B2FCAD0" title="本节简要概述了可用的OCI导航功能。">OCI导航功能</a></p>
                  </li>
                  <li>
                     <p><a href="object-advanced-topics-in-oci.html#GUID-35CBBA0E-CAC9-4BA3-99F7-77D613141661" title="当基于类型名称请求类型信息时，OCI返回与该类型的最新版本相对应的类型描述符对象（TDO）。">键入Evolution和对象缓存</a></p>
                  </li>
               </ul>
            </div><a id="LNOCI16984"></a><a id="LNOCI16983"></a><div class="props_rev_3"><a id="GUID-702B4236-3993-46E0-BCB6-1A2FC7E056C1" name="GUID-702B4236-3993-46E0-BCB6-1A2FC7E056C1"></a><h3 id="LNOCI-GUID-702B4236-3993-46E0-BCB6-1A2FC7E056C1" class="sect3"><span class="enumeration_section">22.1</span>对象缓存和内存管理</h3>
               <div>
                  <p>对象缓存是客户端内存缓冲区，为对象提供查找和内存管理支持。</p>
                  <p>它存储和跟踪OCI应用程序提取的对象实例。对象缓存提供内存管理。</p>
                  <p>当应用程序通过SQL <code class="codeph">SELECT</code>语句或通过OCI引脚操作提取对象时，对象的副本将存储在对象缓存中。直接通过<code class="codeph">SELECT</code>语句提取<span class="italic">的</span>对象<span class="italic">由值</span>提取，并且它们是无法固定的不可引用对象。只能固定可引用的对象。
                  </p>
                  <p>如果正在固定对象，并且缓存中存在适当的版本，则不需要从服务器获取该对象。</p>
                  <p>每个使用OCI取消引用<code class="codeph">REF</code>以检索对象的客户端程序都使用对象缓存。为在对象模式下初始化的每个OCI环境句柄分配客户端对象高速缓存。进程的多个线程可以通过共享相同的OCI环境句柄来共享相同的客户端缓存。
                  </p>
                  <p>每个连接的缓存中都存在每个可引用对象的一个副本。对象缓存在逻辑上由连接分区。</p>
                  <p>解引用一个<code class="codeph">REF</code>多次提领或相当于几个<code class="codeph">REF</code>在同一个连接件S返回对象的同一副本。
                  </p>
                  <p>如果在缓存中修改对象的副本，则必须先将更改刷新到服务器，然后才能对其他进程显示。可以取消固定或释放不再需要的对象;然后可以将它们从缓存中换出，释放它们占用的内存空间。</p>
                  <p>将数据库对象加载到缓存中时，它们会透明地映射到C语言结构中。对象缓存维护缓存中的所有对象副本与数据库中对应的对象之间的关联。提交事务时，对缓存中的对象副本所做的更改会自动传播到数据库。</p>
                  <p>缓存不管理对象副本的内容;它不会自动刷新对象副本。应用程序必须确保对象副本内容的正确性和一致性。例如，如果应用程序标记了插入，更新或删除的对象副本，然后终止事务，则缓存只是取消标记对象副本，但不会清除或使副本无效。应用程序必须固定<span class="italic">最近</span>或<span class="italic">最新</span> ，或在下一个事务中刷新对象副本。如果它是<span class="italic">任何</span>引脚，它可能会获得与先前终止的事务的未提交更改相同的对象副本。
                  </p>
                  <p>使用<code class="codeph">mode</code>设置为<code class="codeph">OCI_OBJECT</code> <code class="codeph">OCIEnvCreate()</code>初始化OCI环境时，将创建对象缓存。</p>
                  <p>对象缓存维护一个快速查找表，用于将<code class="codeph">REF</code>映射到对象。当应用程序取消引用<code class="codeph">REF</code>并且相应的对象尚未缓存在对象缓存中时，对象缓存会自动向服务器发送请求以从数据库中获取对象并将其加载到对象缓存中。
                  </p>
                  <p>相同<code class="codeph">REF</code>后续解引用速度更快，因为它们使用本地缓存访问并且不会导致网络往返。要通知对象缓存应用程序正在访问缓存中的对象，应用程序将对象固定;当它完成对象时，它应该取消它。对象缓存维护缓存中每个对象的引脚数;引脚调用时计数递增，unpin调用递减计数。当应用程序不再需要该对象时，引脚数将变为零。
                  </p>
                  <p>对象缓存使用最近最少使用（LRU）算法来管理缓存的大小。当缓存达到最大大小时，LRU算法释放候选对象。候选对象是引脚数为零的对象。</p>
                  <p>针对同一服务器运行的每个应用程序进程都有自己的对象缓存， <a href="object-advanced-topics-in-oci.html#GUID-702B4236-3993-46E0-BCB6-1A2FC7E056C1__I444407">如图22-1</a>所示。
                  </p>
                  <div class="figure" id="GUID-702B4236-3993-46E0-BCB6-1A2FC7E056C1__I444407">
                     <p class="titleinfigure">图22-1对象缓存</p><img src="img/lnoci028.gif" alt="下面是图22-1的描述" title="下面是图22-1的描述" longdesc="img_text/lnoci028.html"><br><a href="img_text/lnoci028.html">“图22-1对象缓存”的描述</a></div>
                  <!-- class="figure" -->
                  <p>对象缓存跟踪当前在内存中的对象，维护对对象的引用，管理自动对象交换以及跟踪对象元属性。</p>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-2B545D37-821F-4410-B087-F00C5A8F35B2" title="对象缓存不会自动维护对象副本与数据库中对应对象之间的值一致性或一致性。">缓存一致性和一致性</a></p>
                        </li>
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-FE7E03F3-EE0D-438C-B92B-BF125DFAB897" title="对象缓存有两个与之关联的重要参数，它们是环境句柄的属性。">对象缓存参数</a></p>
                        </li>
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-ACA41D5E-CA18-4526-8723-66E4B7BAAEA1" title="本节介绍对象缓存为对象副本操作提供的最重要的功能。">对象缓存操作</a></p>
                        </li>
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-C313BAF2-F0C5-4049-B23A-FE680803DB4B" title="本节将讨论引脚，取消固定和自由功能。">关于加载和删除对象副本</a></p>
                        </li>
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-2AFFDE26-7ED6-4A4E-9B81-0CC5A1D5D837" title="本节讨论用于标记和取消标记对象副本的函数。">关于对对象副本进行更改</a></p>
                        </li>
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-55D30393-27ED-430B-BFCC-A25100D109F2" title="本节讨论缓存和服务器同步操作（刷新，刷新）。">关于将对象副本与服务器同步</a></p>
                        </li>
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-EC3D1AE5-4D53-4C43-AA9C-E90F1D1AB33F" title="本节讨论与对象锁定相关的OCI功能。">对象锁定</a></p>
                        </li>
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-B0236408-75F1-47C4-880B-FCA003A1C697" title="提交事务时（OCITransCommit（）），所有标记的对象都会刷新到服务器。">对象应用程序中的提交和回滚</a></p>
                        </li>
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-639E852E-0AA3-414F-A5A3-598C8F2047E1" title="为了保持内存中的可用空间，对象缓存尝试尽可能重用对象的内存。当对象的生命周期（分配持续时间）到期或对象的引脚持续时间到期时，对象缓存会重用对象的内存。">对象持续时间</a></p>
                        </li>
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-C4F12ECA-651F-4620-8761-C8EAA9F09BF5" title="存储器中的实例由实例的顶级存储器块，空指示器结构的顶级存储器以及可选的一些辅助存储器块组成。">实例的内存布局</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-702B4236-3993-46E0-BCB6-1A2FC7E056C1__GUID-82C8CA51-9DEC-4DD4-BE66-731FB247F1D8">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-99819CA5-F2A7-4BFE-A9E4-5BD76C573CB2">关于固定对象副本</a></p>
                        </li>
                        <li>
                           <p><a href="connect-authorize-and-initialize-functions.html#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="创建并初始化OCI函数的环境句柄。">OCIEnvCreate（）</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI16985"></a><div class="props_rev_3"><a id="GUID-2B545D37-821F-4410-B087-F00C5A8F35B2" name="GUID-2B545D37-821F-4410-B087-F00C5A8F35B2"></a><h4 id="LNOCI-GUID-2B545D37-821F-4410-B087-F00C5A8F35B2" class="sect4"><span class="enumeration_section">22.1.1</span>缓存一致性和一致性</h4>
                  <div>
                     <p>对象缓存不会自动维护对象副本与数据库中对应对象之间的值一致性或一致性。</p>
                     <p>换句话说，如果应用程序对对象副本进行了更改，则更改不会自动应用于数据库中的相应对象，反之亦然。缓存提供诸如将修改后的对象副本刷新到数据库并使用数据库中的最新值刷新陈旧对象副本以使程序保持一定的一致性等操作。</p>
                     <div class="infoboxnote" id="GUID-2B545D37-821F-4410-B087-F00C5A8F35B2__GUID-9739AE10-1FF2-455F-8825-2BF9A40D238B">
                        <p class="notep1">注意：</p>
                        <p>Oracle数据库不支持与服务器缓冲区缓存或数据库的自动缓存一致性。自动高速缓存一致性是指在服务器的缓冲区高速缓存中修改相应对象时，对象高速缓存刷新本地对象副本的机制。当对象高速缓存在对服务器中的相应对象进行任何直接访问之前将对本地对象副本所做的更改刷新到缓冲区高速缓存时，会发生此机制。直接访问包括使用SQL，触发器或存储过程来读取或修改服务器中的对象。</p>
                     </div>
                  </div>
               </div><a id="LNOCI16986"></a><div class="props_rev_3"><a id="GUID-FE7E03F3-EE0D-438C-B92B-BF125DFAB897" name="GUID-FE7E03F3-EE0D-438C-B92B-BF125DFAB897"></a><h4 id="LNOCI-GUID-FE7E03F3-EE0D-438C-B92B-BF125DFAB897" class="sect4"><span class="enumeration_section">22.1.2</span>对象缓存参数</h4>
                  <div>
                     <p>对象缓存有两个与之关联的重要参数，它们是环境句柄的属性。</p>
                     <p>他们包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_ATTR_CACHE_MAX_SIZE</code> - 最大缓存大小</p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_ATTR_CACHE_OPT_SIZE</code> - 最佳缓存大小</p>
                        </li>
                     </ul>
                     <p>这些参数指的是高速缓存内存使用的级别，它们有助于确定高速缓存何时自动老化符合条件的对象以释放内存。</p>
                     <p>如果当前在高速缓存中的对象占用的内存达到或超过最大高速缓存大小，则高速缓存自动开始释放（或老化）引脚数为零的未标记对象。缓存继续释放这些对象，直到缓存中的内存使用达到最佳大小，或者直到它用完了可以释放的对象为止。请注意，缓存可能会超出指定的最大缓存大小。</p>
                     <p><code class="codeph">OCI_ATTR_CACHE_MAX_SIZE</code>被指定为<code class="codeph">OCI_ATTR_CACHE_OPT_SIZE</code>的百分比。最大对象缓存大小（以字节为单位）通过递增计算<code class="codeph">OCI_ATTR_CACHE_OPT_SIZE</code>由<code class="codeph">OCI_ATTR_CACHE_MAX_SIZE</code>百分比，使用以下算法：</p><pre class="oac_no_warn" dir="ltr">maximum_cache_size = optimal_size + optimal_size * max_size_percentage / 100</pre><p>接下来，根据环境句柄属性表示算法。</p><pre class="oac_no_warn" dir="ltr">maximum_cache_size = OCI_ATTR_CACHE_OPT_SIZE + OCI_ATTR_CACHE_OPT_SIZE * OCI_ATTR_CACHE_MAX_SIZE / 100</pre><p>您可以设置的值<code class="codeph">OCI_ATTR_CACHE_MAX_SIZE</code>在10％（默认值） <code class="codeph">OCI_ATTR_CACHE_OPT_SIZE</code> 。 <code class="codeph">OCI_ATTR_CACHE_OPT_SIZE</code>的默认值为8 MB。</p>
                     <p>可以使用<code class="codeph">OCIAttrSet()</code>调用设置环境句柄的高速缓存大小属性，并使用<code class="codeph">OCIAttrGet()</code>函数进行检索。
                     </p>
                     <div class="infoboxnotealso" id="GUID-FE7E03F3-EE0D-438C-B92B-BF125DFAB897__GUID-386F1089-E5A8-424C-89D5-8F4CB069B187">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="handle-and-descriptor-attributes.html#GUID-9CA5026C-B6A0-4233-8B22-F1DD94ACE9F8" title="列出并描述环境句柄属性。">环境句柄属性</a>以获取更多信息</p>
                           </li>
                           <li>
                              <p><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></p>
                           </li>
                           <li>
                              <p><a href="handle-and-descriptor-functions.html#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="获取句柄属性的值。">OCIAttrGet（）</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNOCI16987"></a><div class="props_rev_3"><a id="GUID-ACA41D5E-CA18-4526-8723-66E4B7BAAEA1" name="GUID-ACA41D5E-CA18-4526-8723-66E4B7BAAEA1"></a><h4 id="LNOCI-GUID-ACA41D5E-CA18-4526-8723-66E4B7BAAEA1" class="sect4"><span class="enumeration_section">22.1.3</span>对象缓存操作</h4>
                  <div>
                     <p>本节介绍对象缓存为对象副本操作提供的最重要的功能。</p>
                     <p></p>
                     <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-1EDB789E-97FE-42CB-AC08-71C2AB185897" title="固定对象副本使应用程序可以通过取消引用REF来在缓存中访问它。">关于固定和取消固定</a></p>
                           </li>
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-75659086-ECEE-4CD3-A419-E44EF30D09A2" title="如何释放一个物体呢？它有什么作用。">关于自由</a></p>
                           </li>
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-C31A0A90-B272-4751-ADD1-C1125FAFF7B9" title="标记对象会通知缓存已在缓存中更新了对象副本，并且在刷新对象副本时必须在服务器中更新相应的对象。">关于标记和取消标记</a></p>
                           </li>
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-198AE896-EE97-4DCD-AB12-E8B40C4F9E6A" title="刷新对象会将对缓存中标记的对象副本所做的本地更改写入服务器中的相应对象。">关于法拉盛</a></p>
                           </li>
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-3276320C-BBEF-45D0-8608-AB8A744AFDE0" title="刷新缓存中的对象副本会将其替换为服务器中相应对象的最新值。">关于刷新</a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-ACA41D5E-CA18-4526-8723-66E4B7BAAEA1__GUID-7107D3FA-2288-4EA5-8DC8-50C1DE0E1548">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="object-advanced-topics-in-oci.html#GUID-AC858892-54CA-403F-AB4C-5DD14B2FCAD0" title="本节简要概述了可用的OCI导航功能。">OCI导航功能，</a>用于列出所有OCI导航，缓存和对象管理功能</p>
                     </div>
                  </div><a id="LNOCI16988"></a><div class="props_rev_3"><a id="GUID-1EDB789E-97FE-42CB-AC08-71C2AB185897" name="GUID-1EDB789E-97FE-42CB-AC08-71C2AB185897"></a><h5 id="LNOCI-GUID-1EDB789E-97FE-42CB-AC08-71C2AB185897" class="sect5"><span class="enumeration_section">22.1.3.1</span>关于固定和取消固定</h5>
                     <div>
                        <p>固定对象副本使应用程序可以通过取消引用<code class="codeph">REF</code>来在缓存中访问它。
                        </p>
                        <p></p>
                        <p>取消固定对象会向缓存指示当前未使用该对象。当不再需要对象时，应该取消固定对象，使其有资格通过缓存进行隐式释放，从而释放内存。</p>
                     </div>
                  </div><a id="LNOCI16989"></a><div class="props_rev_3"><a id="GUID-75659086-ECEE-4CD3-A419-E44EF30D09A2" name="GUID-75659086-ECEE-4CD3-A419-E44EF30D09A2"></a><h5 id="LNOCI-GUID-75659086-ECEE-4CD3-A419-E44EF30D09A2" class="sect5"><span class="enumeration_section">22.1.3.2</span>关于释放</h5>
                     <div>
                        <p>如何释放一个物体呢？它有什么作用。</p>
                        <p>释放对象副本会将其从缓存中删除并释放其内存。</p>
                     </div>
                  </div><a id="LNOCI16990"></a><div class="props_rev_3"><a id="GUID-C31A0A90-B272-4751-ADD1-C1125FAFF7B9" name="GUID-C31A0A90-B272-4751-ADD1-C1125FAFF7B9"></a><h5 id="LNOCI-GUID-C31A0A90-B272-4751-ADD1-C1125FAFF7B9" class="sect5"><span class="enumeration_section">22.1.3.3</span>关于标记和取消标记</h5>
                     <div>
                        <p>标记对象会通知缓存已在缓存中更新了对象副本，并且在刷新对象副本时必须在服务器中更新相应的对象。</p>
                        <p></p>
                        <p>取消标记对象将删除对象已更新的指示。</p>
                     </div>
                  </div><a id="LNOCI16991"></a><div class="props_rev_3"><a id="GUID-198AE896-EE97-4DCD-AB12-E8B40C4F9E6A" name="GUID-198AE896-EE97-4DCD-AB12-E8B40C4F9E6A"></a><h5 id="LNOCI-GUID-198AE896-EE97-4DCD-AB12-E8B40C4F9E6A" class="sect5"><span class="enumeration_section">22.1.3.4</span>关于冲洗</h5>
                     <div>
                        <p>刷新对象会将对缓存中标记的对象副本所做的本地更改写入服务器中的相应对象。</p>
                        <p>发生这种情况时，对象缓存中的副本未标记。</p>
                     </div>
                  </div><a id="LNOCI16992"></a><div class="props_rev_3"><a id="GUID-3276320C-BBEF-45D0-8608-AB8A744AFDE0" name="GUID-3276320C-BBEF-45D0-8608-AB8A744AFDE0"></a><h5 id="LNOCI-GUID-3276320C-BBEF-45D0-8608-AB8A744AFDE0" class="sect5"><span class="enumeration_section">22.1.3.5</span>关于刷新</h5>
                     <div>
                        <p>刷新缓存中的对象副本会将其替换为服务器中相应对象的最新值。</p>
                        <p>请注意，刷新后指向顶级对象内存的指针有效。但是，刷新后，指向二级存储器的指针（例如，字符串文本指针，集合等）可能会变为无效。</p>
                        <p>例如，如果对象是具有两个属性的<code class="codeph">person</code>类型： <code class="codeph">salary (number)</code>和<code class="codeph">name (varchar2(20)</code> ）。类型是：</p><pre class="oac_no_warn" dir="ltr">struct Person {OCINumber薪水; OCIString *名称; }</pre><p>如果客户端有一个指针<code class="codeph">scott_p</code>到<code class="codeph">Person</code>实例，并在该实例上调用<code class="codeph">OCIObjectRefresh()</code> ，则刷新后指针<code class="codeph">scott_p</code>仍然相同，但指向二级内存的指针（如<code class="codeph">scott_p-&gt;name</code> ）可能不同。
                        </p>
                        <div class="infoboxnotealso" id="GUID-3276320C-BBEF-45D0-8608-AB8A744AFDE0__GUID-29975189-3D2C-4BBB-9E8C-037B7A4891D4">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="oci-flush-or-refresh-functions.html#GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C" title="刷新最新数据库快照中的持久对象。">OCIObjectRefresh（）</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="LNOCI16993"></a><div class="props_rev_3"><a id="GUID-C313BAF2-F0C5-4049-B23A-FE680803DB4B" name="GUID-C313BAF2-F0C5-4049-B23A-FE680803DB4B"></a><h4 id="LNOCI-GUID-C313BAF2-F0C5-4049-B23A-FE680803DB4B" class="sect4"><span class="enumeration_section">22.1.4</span>关于加载和删除对象拷贝</h4>
                  <div>
                     <p>本节将讨论引脚，取消固定和自由功能。</p>
                     <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-99819CA5-F2A7-4BFE-A9E4-5BD76C573CB2">关于固定对象副本</a></p>
                           </li>
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-FFB44FF2-FB28-4473-9DEC-1BCEFA80D60E" title="当程序不再使用对象副本时，可以取消该对象副本。">关于取消固定对象副本</a></p>
                           </li>
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-51E18790-5949-4D5B-9708-7749CA7B8E22" title="释放对象副本会将其从对象缓存中删除并释放其内存。">关于释放对象副本</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNOCI16994"></a><div class="props_rev_3"><a id="GUID-99819CA5-F2A7-4BFE-A9E4-5BD76C573CB2" name="GUID-99819CA5-F2A7-4BFE-A9E4-5BD76C573CB2"></a><h5 id="LNOCI-GUID-99819CA5-F2A7-4BFE-A9E4-5BD76C573CB2" class="sect5"><span class="enumeration_section">22.1.4.1</span>关于固定对象副本</h5>
                     <div>
                        <p></p>
                        <p>当应用程序必须取消引用对象缓存中的<code class="codeph">REF</code>时，它会调用<code class="codeph">OCIObjectPin()</code> 。此调用取消引用<code class="codeph">REF</code>并将对象副本固定在缓存中。只要固定了对象副本，就可以保证应用程序可以访问它。<code class="codeph">OCIObjectPin()</code>接受pin选项， <span class="italic">any</span> ， <span class="italic">recent</span>或<span class="italic">latest</span> 。引脚选项的数据类型是<code class="codeph">OCIPinOpt</code> 。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果指定了<span class="italic">any</span> （ <code class="codeph">OCI_PIN_ANY</code> ）选项，则对象缓存会立即返回缓存中的对象副本（如果存在）。如果缓存中没有副本，则对象缓存将从数据库加载最新的对象副本，然后返回对象副本。<span class="italic">any</span>选项适用于只读，信息，事实或元对象，例如产品，销售代表，供应商，地区，部件或办公室。这些对象通常不会经常更改，即使它们发生更改，更改也不会影响应用程序。
                              </p>
                              <p>请注意，对象缓存仅在指定连接的缓存的逻辑分区内查找对象副本。如果分区中没有副本，则从服务器加载该对象的最新副本。</p>
                           </li>
                           <li>
                              <p>如果指定了<span class="italic">最新</span> （ <code class="codeph">OCI_PIN_LATEST</code> ）选项，则对象缓存会从数据库中将最新的对象副本加载到缓存中。它返回该副本，除非对象副本在高速缓存中被锁定，在这种情况下，立即返回标记的对象副本。如果对象位于缓存中而未锁定，则会加载最新的对象副本并覆盖现有对象副本。<span class="italic">最新</span>选项适用于操作对象，例如采购订单，错误，订单项，银行帐户或股票报价。这些对象通常会经常更改，并且程序在最新可能状态下访问这些对象非常重要。
                              </p>
                           </li>
                           <li>
                              <p>如果指定了<span class="italic">最近的</span> （ <code class="codeph">OCI_PIN_RECENT</code> ）选项，则有两种可能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果在同一事务中，对象副本先前已使用<span class="italic">最新</span>或<span class="italic">最近</span>选项固定，则<span class="italic">最近</span>选项将等同于<span class="italic">任何</span>选项。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果先前条件不适用，则<span class="italic">最近</span>选项将等同于<span class="italic">最新</span>选项。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>当程序引脚对象时，程序还指定引脚持续时间的两个可能值之一： <span class="italic">会话</span>或<span class="italic">事务</span> 。持续时间的数据类型是<code class="codeph">OCIDuration</code> 。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果引脚持续时间是<span class="italic">会话</span> （ <code class="codeph">OCI_DURATION_SESSION</code> ），则对象副本将保持固定直到会话结束（即连接结束）或直到程序显式<code class="codeph">OCIObjectUnpin()</code>固定（通过调用<code class="codeph">OCIObjectUnpin()</code> ）。
                              </p>
                           </li>
                           <li>
                              <p>如果引脚持续时间是<span class="italic">事务</span> （ <code class="codeph">OCI_DURATION_TRANS</code> ），则对象副本将保持固定直到事务结束或显式<code class="codeph">OCI_DURATION_TRANS</code>固定。
                              </p>
                           </li>
                        </ul>
                        <p>将对象副本从数据库加载到缓存中时，缓存有效地执行以下语句：</p><pre class="oac_no_warn" dir="ltr">SELECT VALUE（t）FROM t WHERE REF（t）=：r</pre><p>在此语句中， <code class="codeph">t</code>是存储对象的对象表， <code class="codeph">r</code>是<code class="codeph">REF</code> ，并且获取的值将成为缓存中对象副本的值。
                        </p>
                        <p>由于对象缓存有效地执行单独的<code class="codeph">SELECT</code>语句以将每个对象副本加载到缓存中，因此在读取提交的事务中，不保证对象副本彼此读取一致。
                        </p>
                        <p>在可序列化事务中，固定为<span class="italic">最新</span>或<span class="italic">最新的</span>对象副本彼此读取一致，因为加载这些对象副本的<code class="codeph">SELECT</code>语句是基于相同的数据库快照执行的。
                        </p>
                        <p>读取提交和序列化事务指的是数据库可以支持的不同隔离级别。还有其他隔离级别，例如read-uncommitted，repeatable read等。每个隔离级别允许并发事务之间或多或少的干扰。通常，当隔离级别允许更多干扰时，同时事务具有更高的并发性。在读取提交的事务中，当多次执行查询时，这种类型的事务可能会产生不一致的数据集，因为它允许查看其他已提交事务所做的更改。这在序列化事务中不会发生。</p>
                        <p>对象缓存模型与Oracle数据库事务模型正交或独立。对象缓存的行为不会根据事务模型而改变，即使在不同事务模型下运行相同程序时，通过对象缓存从服务器检索的对象可能不同（例如，read-committed与serializable） ）。</p>
                        <div class="infoboxnote" id="GUID-99819CA5-F2A7-4BFE-A9E4-5BD76C573CB2__GUID-8B93AF7C-2618-4BB2-9C48-90809AE09A93">
                           <p class="notep1">注意：</p>
                           <p>对于<code class="codeph">OCIObjectArrayPin()</code> ，pin选项无效，因为始终从数据库中检索对象。如果<code class="codeph">REF</code>是缓存中的对象，则<code class="codeph">OCIObjectArrayPin()</code>失败：</p><pre class="oac_no_warn" dir="ltr">ORA-22881：悬挂REF</pre></div>
                        <div class="infoboxnotealso" id="GUID-99819CA5-F2A7-4BFE-A9E4-5BD76C573CB2__GUID-D66D6885-7462-4777-A4A6-8A6A51837980">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="oci-pin-unpin-and-free-functions.html#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="引脚可引用对象。">OCIObjectPin（）</a></p>
                              </li>
                              <li>
                                 <p><a href="oci-pin-unpin-and-free-functions.html#GUID-2629C6C3-5299-4E92-BA58-804809CFF8B9" title="引入一系列引用。">OCIObjectArrayPin（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="LNOCI16995"></a><div class="props_rev_3"><a id="GUID-FFB44FF2-FB28-4473-9DEC-1BCEFA80D60E" name="GUID-FFB44FF2-FB28-4473-9DEC-1BCEFA80D60E"></a><h5 id="LNOCI-GUID-FFB44FF2-FB28-4473-9DEC-1BCEFA80D60E" class="sect5"><span class="enumeration_section">22.1.4.2</span>关于取消固定对象副本</h5>
                     <div>
                        <p>当程序不再使用对象副本时，可以取消该对象副本。</p>
                        <p>然后它可以被释放。当缓存开始耗尽内存时，对象副本必须完全取消固定和取消标记才有资格被缓存隐式释放。要完全取消固定，已固定<span class="italic">n</span>次的对象副本必须取消固定<span class="italic">n</span>次。
                        </p>
                        <p>在用户刷新或明确取消标记对象副本之前，未固定但已标记的对象副本不符合隐式释放的条件。但是，对象缓存只有在开始耗尽内存时才会隐式释放对象副本，因此不必释放未固定的对象副本。如果它没有被隐式释放并再次固定（使用任何或最近的选项），程序将获得相同的对象副本。</p>
                        <p>应用程序调用<code class="codeph">OCIObjectUnpin()</code>或<code class="codeph">OCIObjectPinCountReset()</code>来取消固定对象副本。此外，程序可以调用<code class="codeph">OCICacheUnpin()</code>来完全取消<code class="codeph">OCICacheUnpin()</code>特定连接的缓存中的所有对象副本。
                        </p>
                        <div class="infoboxnotealso" id="GUID-FFB44FF2-FB28-4473-9DEC-1BCEFA80D60E__GUID-E50C1863-12D8-481A-B6B3-AE3ECD673366">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="oci-pin-unpin-and-free-functions.html#GUID-109DD260-8094-489C-A85C-AB27277E6D9B" title="取消一个对象。">OCIObjectUnpin（）</a></p>
                              </li>
                              <li>
                                 <p><a href="oci-pin-unpin-and-free-functions.html#GUID-5D8C7FE3-8088-4A1C-8C36-19D0982FCAC3" title="完全取消对象，将其引脚数设置为零。">OCIObjectPinCountReset（）</a></p>
                              </li>
                              <li>
                                 <p><a href="oci-pin-unpin-and-free-functions.html#GUID-B7E9C0B8-7888-456E-A8F1-1151354C37BF" title="取消持久对象。">OCICacheUnpin（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="LNOCI16996"></a><div class="props_rev_3"><a id="GUID-51E18790-5949-4D5B-9708-7749CA7B8E22" name="GUID-51E18790-5949-4D5B-9708-7749CA7B8E22"></a><h5 id="LNOCI-GUID-51E18790-5949-4D5B-9708-7749CA7B8E22" class="sect5"><span class="enumeration_section">22.1.4.3</span>关于释放对象副本</h5>
                     <div>
                        <p>释放对象副本会将其从对象缓存中删除并释放其内存。</p>
                        <p>缓存支持两种释放内存的方法：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>显式释放 - 程序通过调用<code class="codeph">OCIObjectFree()</code>从缓存中显式释放或删除对象副本， <code class="codeph">OCIObjectFree()</code>接受（强制）释放标记或固定对象副本的选项。该程序还可以调用<code class="codeph">OCIObjectFree()</code>来释放缓存中的所有对象副本。
                              </p>
                           </li>
                           <li>
                              <p>隐式释放 - 如果缓存开始耗尽内存，它会隐式释放取消固定和取消标记的对象副本。只有在刷新或取消标记对象副本时，标记的未固定对象才有资格隐式释放。</p>
                           </li>
                        </ul>
                        <p>出于内存管理的原因，应用程序在不再需要对象时取消固定对象非常重要。这使得这些对象可用于从缓存中老化，并使缓存在必要时更容易释放内存。</p>
                        <p>OCI不提供在客户端缓存中释放未引用对象的功能。</p>
                        <div class="infoboxnotealso" id="GUID-51E18790-5949-4D5B-9708-7749CA7B8E22__GUID-CA58646B-FD12-42B5-976F-42615CAA02A3">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="object-advanced-topics-in-oci.html#GUID-FE7E03F3-EE0D-438C-B92B-BF125DFAB897" title="对象缓存有两个与之关联的重要参数，它们是环境句柄的属性。">对象缓存参数</a>以获取更多信息</p>
                              </li>
                              <li>
                                 <p><a href="oci-pin-unpin-and-free-functions.html#GUID-0814B033-C25C-4B4C-8968-4C0B86C2E744" title="释放和取消对象实例。">OCIObjectFree（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="LNOCI16997"></a><div class="props_rev_3"><a id="GUID-2AFFDE26-7ED6-4A4E-9B81-0CC5A1D5D837" name="GUID-2AFFDE26-7ED6-4A4E-9B81-0CC5A1D5D837"></a><h4 id="LNOCI-GUID-2AFFDE26-7ED6-4A4E-9B81-0CC5A1D5D837" class="sect4"><span class="enumeration_section">22.1.5</span>关于对对象副本进行更改</h4>
                  <div>
                     <p>本节讨论用于标记和取消标记对象副本的函数。</p>
                     <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-B946568A-E52D-424C-87EC-BCD7A177EFB0" title="可以在缓存中本地创建，更新和删除对象副本。">关于标记对象副本</a></p>
                           </li>
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-3D034011-F414-4E0F-88E9-8CB457696179" title="标记的对象副本可以在对象缓存中取消标记。">关于取消标记对象副本</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNOCI16998"></a><div class="props_rev_3"><a id="GUID-B946568A-E52D-424C-87EC-BCD7A177EFB0" name="GUID-B946568A-E52D-424C-87EC-BCD7A177EFB0"></a><h5 id="LNOCI-GUID-B946568A-E52D-424C-87EC-BCD7A177EFB0" class="sect5"><span class="enumeration_section">22.1.5.1</span>关于标记对象副本</h5>
                     <div>
                        <p>可以在缓存中本地创建，更新和删除对象副本。</p>
                        <p>如果在缓存中创建了对象副本（通过调用<code class="codeph">OCIObjectNew()</code> ），则对象副本将被标记为由对象高速缓存插入，以便在刷新对象副本时将对象插入到服务器中。
                        </p>
                        <p>如果在缓存中更新了对象副本，则用户必须通过标记对象副本以进行更新来通知对象缓存（通过调用<code class="codeph">OCIObjectMarkUpdate()</code> ）。刷新对象副本时，将使用对象副本中的值更新服务器中的相应对象。
                        </p>
                        <p>如果删除了对象副本，则在对象高速缓存中将对象副本标记为删除（通过调用<code class="codeph">OCIObjectMarkDelete()</code> ）。刷新对象副本时，将删除服务器中的相应对象。在刷新和取消固定之前，不会释放标记的对象副本的内存。固定标记为删除的对象时，程序会收到错误，就好像程序正在取消引用悬空引用一样。
                        </p>
                        <p>当用户对对象副本进行多项更改时，这些更改的最终结果是在刷新副本时应用于服务器中的对象。例如，如果用户更新并删除对象副本，则在刷新对象副本时将删除服务器中的对象。同样，如果对象副本的属性多次更新，则在刷新对象副本时，它是服务器中更新的此属性的最终值。</p>
                        <p>仅当对象副本已加载到对象高速缓存中时，程序才能将对象副本标记为已更新或已删除。</p>
                        <div class="infoboxnotealso" id="GUID-B946568A-E52D-424C-87EC-BCD7A177EFB0__GUID-54F9078F-33A9-4241-A4E8-3592628CF54A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="oci-miscellaneous-object-functions.html#GUID-2EFD6F01-A02F-4C5B-B20F-1EF841249056" title="创建独立实例。">OCIObjectNew（）</a></p>
                              </li>
                              <li>
                                 <p><a href="oci-mark-or-unmark-object-cache-functions.html#GUID-6EEEC8CC-3041-4718-ADE7-20C6D8C661ED" title="将持久对象标记为已更新（脏）。">OCIObjectMarkUpdate（）</a></p>
                              </li>
                              <li>
                                 <p><a href="oci-mark-or-unmark-object-cache-functions.html#GUID-46497858-8E6C-4920-857C-83FFC8B0F7C1" title="在给定指向实例的指针时，将独立实例标记为已删除。">OCIObjectMarkDelete（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="LNOCI16999"></a><div class="props_rev_3"><a id="GUID-3D034011-F414-4E0F-88E9-8CB457696179" name="GUID-3D034011-F414-4E0F-88E9-8CB457696179"></a><h5 id="LNOCI-GUID-3D034011-F414-4E0F-88E9-8CB457696179" class="sect5"><span class="enumeration_section">22.1.5.2</span>关于取消标记对象副本</h5>
                     <div>
                        <p>标记的对象副本可以在对象缓存中取消标记。</p>
                        <p>通过取消标记标记的对象副本，程序可确保对对象副本所做的更改不会刷新到服务器。对象缓存不会撤消对对象副本所做的本地更改。</p>
                        <p>程序调用<code class="codeph">OCIObjectUnmark()</code>来取消标记对象。此外，程序可以调用<code class="codeph">OCICacheUnmark()</code>来取消标记特定连接的缓存中的所有对象副本。
                        </p>
                        <div class="infoboxnotealso" id="GUID-3D034011-F414-4E0F-88E9-8CB457696179__GUID-ABCBCA97-B85E-4C90-96BF-912032841250">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="oci-mark-or-unmark-object-cache-functions.html#GUID-41C686AE-4C80-4539-80AF-4150680A02A5" title="将对象取消标记为脏。">OCIObjectUnmark（）</a></p>
                              </li>
                              <li>
                                 <p><a href="oci-mark-or-unmark-object-cache-functions.html#GUID-BADD75E5-0C72-4364-911D-2DF59BF642C8" title="取消标记对象缓存中的所有脏对象。">OCICacheUnmark（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="LNOCI17000"></a><div class="props_rev_3"><a id="GUID-55D30393-27ED-430B-BFCC-A25100D109F2" name="GUID-55D30393-27ED-430B-BFCC-A25100D109F2"></a><h4 id="LNOCI-GUID-55D30393-27ED-430B-BFCC-A25100D109F2" class="sect4"><span class="enumeration_section">22.1.6</span>关于将对象副本与服务器同步</h4>
                  <div>
                     <p>本节讨论缓存和服务器同步操作（刷新，刷新）。</p>
                     <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-8E4590BA-6338-4FF6-A269-C2E4CF632EE9" title="当程序刷新对象副本时，它会将对高速缓存中标记的对象副本所做的本地更改写入服务器。">关于刷新服务器的更改</a></p>
                           </li>
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-4FC980A1-942B-4CE8-B3B7-BFD72C44FB42" title="刷新时，将使用服务器中相应对象的最新值重新加载对象副本。">关于刷新对象副本</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNOCI17001"></a><div class="props_rev_3"><a id="GUID-8E4590BA-6338-4FF6-A269-C2E4CF632EE9" name="GUID-8E4590BA-6338-4FF6-A269-C2E4CF632EE9"></a><h5 id="LNOCI-GUID-8E4590BA-6338-4FF6-A269-C2E4CF632EE9" class="sect5"><span class="enumeration_section">22.1.6.1</span>关于<span class="enumeration_section">刷新</span>服务器的更改</h5>
                     <div>
                        <p>当程序刷新对象副本时，它会将对高速缓存中标记的对象副本所做的本地更改写入服务器。</p>
                        <p>程序可以调用<code class="codeph">OCIObjectFlush()</code>来刷新单个对象副本。程序可以调用<code class="codeph">OCICacheFlush()</code>来刷新缓存中的所有标记对象副本或所选标记对象副本的列表。<code class="codeph">OCICacheFlush()</code>刷新与特定服务上下文关联的对象。请参阅<code class="codeph">OCICacheFlush()</code> 。
                        </p>
                        <p>刷新对象副本后，它没有标记。（请注意，对象在刷新后会在服务器中锁定;因此对象副本在缓存中标记为已锁定。）</p>
                        <div class="infoboxnote" id="GUID-8E4590BA-6338-4FF6-A269-C2E4CF632EE9__GUID-46737B5D-8E39-409E-AFBD-8D72CA2A7CE6">
                           <p class="notep1">注意：</p>
                           <p>即使正在刷新多个对象， <code class="codeph">OCIObjectFlush()</code>操作也只会导致单个服务器往返。
                           </p>
                        </div>
                        <p>回调函数（ <code class="codeph">OCIObjectFlush()</code>调用的可选参数）使应用程序只能刷新某种类型的脏对象。应用程序可以定义仅返回所需对象的回调。在这种情况下，操作仍然只会导致一次服务器往返冲洗。
                        </p>
                        <p>在<code class="codeph">OCIObjectFlush()</code>期间的默认模式下，对象按照标记为脏的顺序刷新。通过在环境句柄中设置<code class="codeph">OCI_ATTR_CACHE_ARRAYFLUSH</code>属性，可以显着提高此刷新操作的性能。
                        </p>
                        <p>但是，仅当刷新对象的顺序<code class="codeph">OCI_ATTR_CACHE_ARRAYFLUSH</code> ， <code class="codeph">OCI_ATTR_CACHE_ARRAYFLUSH</code>应使用<code class="codeph">OCI_ATTR_CACHE_ARRAYFLUSH</code>属性。当此属性生效时，脏对象被组合在一起并以使服务器能够有效更新其表的方式发送到服务器。启用此属性后，无法保证将对象标记为脏的顺序保留。
                        </p>
                        <div class="infoboxnotealso" id="GUID-8E4590BA-6338-4FF6-A269-C2E4CF632EE9__GUID-D1A9B75A-791C-4059-A0BD-3057F2AE93FE">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="handle-and-descriptor-attributes.html#GUID-9CA5026C-B6A0-4233-8B22-F1DD94ACE9F8" title="列出并描述环境句柄属性。">环境句柄属性</a></p>
                              </li>
                              <li>
                                 <p><a href="oci-flush-or-refresh-functions.html#GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301" title="将修改后的持久对象刷新到服务器。">OCIObjectFlush（）</a></p>
                              </li>
                              <li>
                                 <p><a href="oci-flush-or-refresh-functions.html#GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E" title="将已修改的持久对象刷新到服务器。">OCICacheFlush（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="LNOCI17003"></a><a id="LNOCI17002"></a><div class="props_rev_3"><a id="GUID-4FC980A1-942B-4CE8-B3B7-BFD72C44FB42" name="GUID-4FC980A1-942B-4CE8-B3B7-BFD72C44FB42"></a><h5 id="LNOCI-GUID-4FC980A1-942B-4CE8-B3B7-BFD72C44FB42" class="sect5"><span class="enumeration_section">22.1.6.2</span>关于刷新对象副本</h5>
                     <div>
                        <p>刷新时，将使用服务器中相应对象的最新值重新加载对象副本。</p>
                        <p>最新值可能包含由其他已提交事务所做的更改以及事务在服务器中直接（而不是通过对象缓存）所做的更改。该程序可以使用SQL DML，触发器或存储过程直接在服务器中更改对象。</p>
                        <p>要刷新标记的对象副本，程序必须首先取消标记对象副本。刷新时（即刷新整个缓存时）将释放未固定的对象副本。</p>
                        <p>程序可以调用<code class="codeph">OCIObjectRefresh()</code>来刷新单个对象副本，或者<code class="codeph">OCICacheRefresh()</code>来刷新缓存中的所有对象副本，所有在事务中加载的对象副本（即最近固定或最新固定的对象副本），或所选对象副本的列表。
                        </p>
                        <p>将对象刷新到服务器时，可以触发触发器以修改服务器中的更多对象。对象缓存中的相同对象（由触发器修改）变得过时，必须先刷新才能锁定或刷新它们。</p>
                        <p>刷新后，如<a href="object-advanced-topics-in-oci.html#GUID-4FC980A1-942B-4CE8-B3B7-BFD72C44FB42__BGBEEIIA" title="该表有2列。第1列是对象属性，第2列描述刷新操作后的状态。">表22-1中</a>所述修改对象的各种元属性标志和持续时间。
                        </p>
                        <div class="tblformal" id="GUID-4FC980A1-942B-4CE8-B3B7-BFD72C44FB42__BGBEEIIA">
                           <p class="titleintable">表22-1刷新操作后的对象属性</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="刷新操作后的对象属性" width="100%" border="1" summary="This table has 2 columns. Column 1 is the object attribute and column 2 describes its status after a refresh operation." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="47%" id="d164838e4754">对象属性</th>
                                    <th align="left" valign="bottom" width="53%" id="d164838e4757">刷新后的状态</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="47%" id="d164838e4762" headers="d164838e4754 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="53%" headers="d164838e4762 d164838e4757 ">
                                       <p>设置为适当的值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="47%" id="d164838e4769" headers="d164838e4754 ">
                                       <p>置顶</p>
                                    </td>
                                    <td align="left" valign="top" width="53%" headers="d164838e4769 d164838e4757 ">
                                       <p>不变</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="47%" id="d164838e4776" headers="d164838e4754 ">
                                       <p>酡</p>
                                    </td>
                                    <td align="left" valign="top" width="53%" headers="d164838e4776 d164838e4757 ">
                                       <p>重启</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="47%" id="d164838e4783" headers="d164838e4754 ">
                                       <p>分配期限</p>
                                    </td>
                                    <td align="left" valign="top" width="53%" headers="d164838e4783 d164838e4757 ">
                                       <p>不变</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="47%" id="d164838e4790" headers="d164838e4754 ">
                                       <p>引脚持续时间</p>
                                    </td>
                                    <td align="left" valign="top" width="53%" headers="d164838e4790 d164838e4757 ">
                                       <p>不变</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>在刷新操作期间，对象高速缓存将新数据加载到对象副本的顶级存储器中，从而重用顶级存储器。对象副本的顶级内存包含对象的内联属性。但是，可以释放和重新定位对象副本的外部属性的内存，因为外部属性的大小可能不同。</p>
                        <div class="infoboxnotealso" id="GUID-4FC980A1-942B-4CE8-B3B7-BFD72C44FB42__GUID-FDAED564-8440-42FD-ABD3-A10447251839">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关对象内存的更多信息<a href="object-advanced-topics-in-oci.html#GUID-C4F12ECA-651F-4620-8761-C8EAA9F09BF5" title="存储器中的实例由实例的顶级存储器块，空指示器结构的顶级存储器以及可选的一些辅助存储器块组成。">，请参见实例的内存布局</a></p>
                              </li>
                              <li>
                                 <p><a href="oci-flush-or-refresh-functions.html#GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C" title="刷新最新数据库快照中的持久对象。">OCIObjectRefresh（）</a></p>
                              </li>
                              <li>
                                 <p><a href="oci-flush-or-refresh-functions.html#GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F" title="刷新缓存中的所有固定持久对象。">OCICacheRefresh（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="LNOCI17004"></a><div class="props_rev_3"><a id="GUID-EC3D1AE5-4D53-4C43-AA9C-E90F1D1AB33F" name="GUID-EC3D1AE5-4D53-4C43-AA9C-E90F1D1AB33F"></a><h4 id="LNOCI-GUID-EC3D1AE5-4D53-4C43-AA9C-E90F1D1AB33F" class="sect4"><span class="enumeration_section">22.1.7</span>对象锁定</h4>
                  <div>
                     <p>本节讨论与对象锁定相关的OCI功能。</p>
                     <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-B12EE428-6EB9-4D79-BDC5-C24EE03293DE" title="固定对象时，可以通过锁定选项指定是否应锁定对象。">锁定选项</a></p>
                           </li>
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-16790CA7-71A9-4D8F-86DE-49E122AC156A" title="程序可以选择调用OCIObjectLock（）来锁定对象以进行更新。">关于锁定对象以进行更新</a></p>
                           </li>
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-05B2D3AC-0677-4C38-9350-875820048948" title="有时，应用程序会尝试锁定当前被其他用户锁定的对象。在这种情况下，应用程序被阻止。">关于使用NOWAIT选项锁定</a></p>
                           </li>
                           <li>
                              <p><a href="object-advanced-topics-in-oci.html#GUID-EA3FC04C-FCF6-493F-9605-F532C547AD02" title="有两个选项可用于在OCI应用程序中实现乐观锁定。">关于实现乐观锁定</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNOCI17005"></a><div class="props_rev_3"><a id="GUID-B12EE428-6EB9-4D79-BDC5-C24EE03293DE" name="GUID-B12EE428-6EB9-4D79-BDC5-C24EE03293DE"></a><h5 id="LNOCI-GUID-B12EE428-6EB9-4D79-BDC5-C24EE03293DE" class="sect5"><span class="enumeration_section">22.1.7.1</span>锁定选项</h5>
                     <div>
                        <p>固定对象时，可以通过锁定选项指定是否应锁定对象。</p>
                        <p>锁定对象时，将获取服务器端锁定，这会阻止任何其他用户修改该对象。事务提交或回滚时释放锁定。不同的锁定选项如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>锁定选项<code class="codeph">OCI_LOCK_NONE</code>指示缓存固定对象而不锁定。
                              </p>
                           </li>
                           <li>
                              <p>锁定选项<code class="codeph">OCI_LOCK_X</code>指示缓存仅在获取锁定后固定对象。如果该对象当前被另一个用户锁定，则使用此选项的引脚调用将等待，直到它可以在返回调用方之前获取锁定。这相当于执行<code class="codeph">SELECT</code> <code class="codeph">FOR</code> <code class="codeph">UPDATE</code>语句。
                              </p>
                           </li>
                           <li>
                              <p>锁定选项<code class="codeph">OCI_LOCK_X_NOWAIT</code>指示缓存仅在获取锁定后固定对象。不像<code class="codeph">OCI_LOCK_X</code>选项，用针呼叫<code class="codeph">OCI_LOCK_X_NOWAIT</code>如果对象正在被另一个用户锁定选项不会等待。这相当于执行<code class="codeph">SELECT</code> <code class="codeph">FOR</code> <code class="codeph">UPDATE</code> <code class="codeph">WITH</code> <code class="codeph">NOWAIT</code>语句。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNOCI17006"></a><div class="props_rev_3"><a id="GUID-16790CA7-71A9-4D8F-86DE-49E122AC156A" name="GUID-16790CA7-71A9-4D8F-86DE-49E122AC156A"></a><h5 id="LNOCI-GUID-16790CA7-71A9-4D8F-86DE-49E122AC156A" class="sect5"><span class="enumeration_section">22.1.7.2</span>关于锁定更新对象</h5>
                     <div>
                        <p>程序可以选择调用<code class="codeph">OCIObjectLock()</code>来锁定对象以进行更新。
                        </p>
                        <p>此调用指示对象缓存在数据库中的对象上获取行锁定。这类似于执行以下语句：</p><pre class="oac_no_warn" dir="ltr">SELECT NULL FROM t WHERE REF（t）=：r FOR UPDATE</pre><p>在此语句中， <code class="codeph">t</code>是存储要锁定的对象的对象表， <code class="codeph">r</code>是标识对象的<code class="codeph">REF</code> 。调用<code class="codeph">OCIObjectLock()</code>后，对象副本在对象缓存中标记为已锁定。
                        </p>
                        <p>要锁定一个图形或一组对象，需要几个<code class="codeph">OCIObjectLock()</code>调用（每个对象一个），或者可以使用数组引脚<code class="codeph">OCIObjectArrayPin()</code>调用以获得更好的性能。
                        </p>
                        <p>通过锁定对象，应用程序可以保证缓存中的对象是最新的。当应用程序锁定对象时，没有其他事务可以修改对象。</p>
                        <p>在事务结束时，服务器会自动释放所有锁。重置对象副本中的锁定指示符。</p>
                        <div class="infoboxnotealso" id="GUID-16790CA7-71A9-4D8F-86DE-49E122AC156A__GUID-19B09C55-FD57-4FC2-B29F-71CDD80F7965">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="oci-miscellaneous-object-functions.html#GUID-FF85B1EA-695C-49A6-99AC-6E1A7F616FC0" title="锁定服务器上的持久对象。">OCIObjectLock（）</a></p>
                              </li>
                              <li>
                                 <p><a href="oci-pin-unpin-and-free-functions.html#GUID-2629C6C3-5299-4E92-BA58-804809CFF8B9" title="引入一系列引用。">OCIObjectArrayPin（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="LNOCI17007"></a><div class="props_rev_3"><a id="GUID-05B2D3AC-0677-4C38-9350-875820048948" name="GUID-05B2D3AC-0677-4C38-9350-875820048948"></a><h5 id="LNOCI-GUID-05B2D3AC-0677-4C38-9350-875820048948" class="sect5"><span class="enumeration_section">22.1.7.3</span>关于使用NOWAIT选项进行锁定</h5>
                     <div>
                        <p>有时，应用程序会尝试锁定当前被其他用户锁定的对象。在这种情况下，应用程序被阻止。</p>
                        <p></p>
                        <p>为了避免在尝试锁定对象时出现阻塞，应用程序可以使用<code class="codeph">OCIObjectLockNoWait()</code>调用而不是<code class="codeph">OCIObjectLock()</code> 。如果由于它被另一个用户锁定而无法立即锁定对象，则此函数返回错误。
                        </p>
                        <p><code class="codeph">NOWAIT</code>选项也可用于通过传递<code class="codeph">OCI_LOCK_X_NOWAIT</code>值作为锁定选项参数来固定调用。
                        </p>
                        <div class="infoboxnotealso" id="GUID-05B2D3AC-0677-4C38-9350-875820048948__GUID-3E3910B4-1EFA-451D-815A-769EE283AFDC">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="oci-miscellaneous-object-functions.html#GUID-F8C389C2-A5F0-4603-B260-BD932D4AC9C8" title="锁定服务器上的持久对象但不等待锁定。">OCIObjectLockNoWait（）</a></p>
                              </li>
                              <li>
                                 <p><a href="oci-miscellaneous-object-functions.html#GUID-FF85B1EA-695C-49A6-99AC-6E1A7F616FC0" title="锁定服务器上的持久对象。">OCIObjectLock（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="LNOCI17008"></a><div class="props_rev_3"><a id="GUID-EA3FC04C-FCF6-493F-9605-F532C547AD02" name="GUID-EA3FC04C-FCF6-493F-9605-F532C547AD02"></a><h5 id="LNOCI-GUID-EA3FC04C-FCF6-493F-9605-F532C547AD02" class="sect5"><span class="enumeration_section">22.1.7.4</span>关于实现乐观锁定</h5>
                     <div>
                        <p>有两个选项可用于在OCI应用程序中实现乐观锁定。</p>
                        <p>乐观锁定假设事务将修改缓存中的对象，刷新它们并成功提交更改。</p>
                        <dl>
                           <dt class="dlterm"><a name="GUID-EA3FC04C-FCF6-493F-9605-F532C547AD02__GUID-04BB5474-9E3E-4A61-A763-3D53BA5E3D9C"><!-- --></a>乐观锁定选项1</dt>
                           <dd>
                              <p>第一个乐观锁定选项适用于在可序列化级别运行事务的OCI应用程序。</p>
                              <p>OCI支持允许您在对象缓存中取消引用和固定对象而不锁定它们的调用，在缓存中修改它们（再次不锁定它们），然后将它们（脏的对象）刷新到数据库。</p>
                              <p>在刷新操作期间，如果自事务开始以来另一个已提交事务已修改脏对象，则返回不可序列化的事务错误。如果自事务开始以来没有任何其他事务修改了脏对象，则事务会成功将更改写入数据库。</p>
                              <div class="infoboxnote" id="GUID-EA3FC04C-FCF6-493F-9605-F532C547AD02__GUID-9D54809B-DB76-4489-9554-53210B61E8F8">
                                 <p class="notep1">注意：</p>
                                 <p>在提交事务之前， <code class="codeph">OCITransCommit()</code>将脏对象刷新到数据库中。
                                 </p>
                              </div>
                              <p>前面的机制有效地实现了乐观锁定模型。</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-EA3FC04C-FCF6-493F-9605-F532C547AD02__GUID-6E7F8773-97B7-4879-9845-7320FDFF65A8"><!-- --></a>乐观锁定选项2</dt>
                           <dd>
                              <p>或者，应用程序可以启用对象更改检测模式。要执行此操作，请将环境句柄的<code class="codeph">OCI_ATTR_OBJECT_DETECTCHANGE</code>属性设置为<code class="codeph">TRUE</code>值。</p>
                              <p>激活此模式后，应用程序在尝试通过另一个已提交的事务刷新服务器中已更改的对象时，会收到<code class="codeph">ORA-08179</code>错误（“并发检查失败”）。然后，应用程序可以以适当的方式处理此错误。
                              </p>
                           </dd>
                        </dl>
                        <div class="infoboxnotealso" id="GUID-EA3FC04C-FCF6-493F-9605-F532C547AD02__GUID-929B59DB-A3F1-40F0-9368-30B0EA71CFA5">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="transaction-functions.html#GUID-DDAE3122-8769-4A30-8D78-EB2A3CCF77D4" title="提交与指定服务上下文关联的事务。">OCITransCommit（）</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="LNOCI17009"></a><div class="props_rev_3"><a id="GUID-B0236408-75F1-47C4-880B-FCA003A1C697" name="GUID-B0236408-75F1-47C4-880B-FCA003A1C697"></a><h4 id="LNOCI-GUID-B0236408-75F1-47C4-880B-FCA003A1C697" class="sect4"><span class="enumeration_section">22.1.8</span>对象应用程序中的提交和回滚</h4>
                  <div>
                     <p>提交事务时（ <code class="codeph">OCITransCommit()</code> ），所有标记的对象都会刷新到服务器。
                     </p>
                     <p>如果使用事务持续时间固定对象副本，则取消固定对象副本。</p>
                     <p>回滚事务时，所有标记的对象都未标记。如果使用事务持续时间固定对象副本，则取消固定对象副本。</p>
                     <div class="infoboxnotealso" id="GUID-B0236408-75F1-47C4-880B-FCA003A1C697__GUID-4EA7840B-4BE4-46AE-BAAF-FFB1BC00EB61">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="transaction-functions.html#GUID-DDAE3122-8769-4A30-8D78-EB2A3CCF77D4" title="提交与指定服务上下文关联的事务。">OCITransCommit（）</a></p>
                     </div>
                  </div>
               </div><a id="LNOCI17010"></a><div class="props_rev_3"><a id="GUID-639E852E-0AA3-414F-A5A3-598C8F2047E1" name="GUID-639E852E-0AA3-414F-A5A3-598C8F2047E1"></a><h4 id="LNOCI-GUID-639E852E-0AA3-414F-A5A3-598C8F2047E1" class="sect4"><span class="enumeration_section">22.1.9</span>对象持续时间</h4>
                  <div>
                     <p>为了保持内存中的可用空间，对象缓存尝试尽可能重用对象的内存。当对象的生命周期（ <span class="italic">分配持续时间）</span>到期或对象的<span class="italic">引脚持续时间</span>到期时，对象缓存会重用对象的内存。
                     </p>
                     <p>使用<code class="codeph">OCIObjectNew()</code>创建对象时设置分配持续时间，并在使用<code class="codeph">OCIObjectPin()</code>固定对象时设置引脚持续时间。持续时间值的数据类型是<code class="codeph">OCIDuration</code> 。
                     </p>
                     <div class="infoboxnote" id="GUID-639E852E-0AA3-414F-A5A3-598C8F2047E1__GUID-9BAAA62E-AA03-4CE9-A9BA-08E68359CB83">
                        <p class="notep1">注意：</p>
                        <p>对象的引脚持续时间不能长于对象的分配持续时间。</p>
                     </div>
                     <p>当一个对象到达其分配持续时间的末尾时，它将被自动删除并且可以重用其内存。引脚持续时间表示何时可以重用对象的内存;缓存已满时重用内存。</p>
                     <p>OCI支持两个预定义的持续时间：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>交易（ <code class="codeph">OCI_DURATION_TRANS</code> ）</p>
                        </li>
                        <li>
                           <p>会话（ <code class="codeph">OCI_DURATION_SESSION</code> ）</p>
                        </li>
                     </ul>
                     <p>当包含的事务结束（提交或终止）时， <span class="italic">事务持续时间</span>到期。<span class="italic">会话持续时间</span>在包含会话或连接结束时到期。
                     </p>
                     <p>应用程序可以使用<code class="codeph">OCIObjectUnpin()</code>显式取消固定对象。为了最大限度地减少单个对象的显式取消固定，应用程序可以使用函数<code class="codeph">OCICacheUnpin()</code>取消固定当前固定在对象缓存中的所有对象。默认情况下，在引脚持续时间结束时取消固定所有对象。
                     </p>
                     <p>本节包括以下主题： <a href="object-advanced-topics-in-oci.html#GUID-95AF1F97-1B4A-4A78-A059-2905BB1DD832" title="说明在应用程序中使用不同的持续时间。">持续时间示例</a> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-639E852E-0AA3-414F-A5A3-598C8F2047E1__GUID-F6722628-2CFB-4522-8E8D-8B5E198F463F">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="oci-miscellaneous-object-functions.html#GUID-2EFD6F01-A02F-4C5B-B20F-1EF841249056" title="创建独立实例。">OCIObjectNew（）</a></p>
                           </li>
                           <li>
                              <p><a href="oci-pin-unpin-and-free-functions.html#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="引脚可引用对象。">OCIObjectPin（）</a></p>
                           </li>
                           <li>
                              <p><a href="oci-pin-unpin-and-free-functions.html#GUID-109DD260-8094-489C-A85C-AB27277E6D9B" title="取消一个对象。">OCIObjectUnpin（）</a></p>
                           </li>
                           <li>
                              <p><a href="oci-pin-unpin-and-free-functions.html#GUID-B7E9C0B8-7888-456E-A8F1-1151354C37BF" title="取消持久对象。">OCICacheUnpin（）</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNOCI17012"></a><a id="LNOCI17011"></a><div class="props_rev_3"><a id="GUID-95AF1F97-1B4A-4A78-A059-2905BB1DD832" name="GUID-95AF1F97-1B4A-4A78-A059-2905BB1DD832"></a><h5 id="LNOCI-GUID-95AF1F97-1B4A-4A78-A059-2905BB1DD832" class="sect5"><span class="enumeration_section">22.1.9.1</span>持续时间示例</h5>
                     <div>
                        <p>说明在应用程序中使用不同的持续时间。</p>
                        <p><a href="object-advanced-topics-in-oci.html#GUID-95AF1F97-1B4A-4A78-A059-2905BB1DD832__G453011" title="该表有7列。第1列是时间值T1到T19，第2列是应用程序操作，第3列是OCI函数名，第4列到第7列是名为对象1，对象2，对象3和对象4的列。">表22-2</a>说明了在应用程序中使用不同的持续时间。在一个连接和三个事务的过程中，在此应用程序中创建或固定四个对象。第一列是相对时间指标。第二列表示数据库执行的操作，第三列表示执行操作的功能。其余列指示应用程序中每个点的各种对象的状态。
                        </p>
                        <p>例如，对象1在使用连接持续时间创建时在T2处存在，并且在连接终止时存在直到T19。在T6提取后，对象2在T7处被固定，具有事务持续时间，并且在提交事务时它保持固定直到T9。</p>
                        <div class="tblformalwide" id="GUID-95AF1F97-1B4A-4A78-A059-2905BB1DD832__G453011">
                           <p class="titleintable">表22-2分配和引脚持续时间示例</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="分配和引脚持续时间的示例" width="100%" border="1" summary="This table has 7 columns. Column 1 is the time value T1 to T19, column 2 is the application action, column 3 is the OCI function name, columns 4 through 7 are columns named object 1, object 2, object 3, and object 4." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="8%" id="d164838e6755">时间</th>
                                    <th align="left" valign="bottom" width="28%" id="d164838e6758">申请行动</th>
                                    <th align="left" valign="bottom" width="21%" id="d164838e6761">功能</th>
                                    <th align="left" valign="bottom" width="10%" id="d164838e6764">对象1</th>
                                    <th align="left" valign="bottom" width="11%" id="d164838e6767">对象2</th>
                                    <th align="left" valign="bottom" width="10%" id="d164838e6770">对象3</th>
                                    <th align="left" valign="bottom" width="11%" id="d164838e6773">对象4</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e6778" headers="d164838e6755 ">
                                       <p>T <sub>1</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e6778 d164838e6758 ">
                                       <p>建立联系</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e6778 d164838e6761 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6778 d164838e6764 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6778 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6778 d164838e6770 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6778 d164838e6773 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e6802" headers="d164838e6755 ">
                                       <p>T <sub>2</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e6802 d164838e6758 ">
                                       <p>创建对象1  - 分配持续时间=连接</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e6802 d164838e6761 ">
                                       <p><a href="oci-miscellaneous-object-functions.html#GUID-2EFD6F01-A02F-4C5B-B20F-1EF841249056" title="创建独立实例。">OCIObjectNew（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6802 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6802 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6802 d164838e6770 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6802 d164838e6773 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e6831" headers="d164838e6755 ">
                                       <p>T <sub>5</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e6831 d164838e6758 ">
                                       <p>启动Transaction1</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e6831 d164838e6761 ">
                                       <p><a href="transaction-functions.html#GUID-81E5963B-4DE7-47E1-ABB0-C1490AF3BAA8" title="设置事务的开始。">OCITransStart（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6831 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6831 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6831 d164838e6770 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6831 d164838e6773 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e6860" headers="d164838e6755 ">
                                       <p>T <sub>6</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e6860 d164838e6758 ">
                                       <p>SQL  - 将<code class="codeph">REF</code>提取到对象2</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e6860 d164838e6761 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6860 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6860 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6860 d164838e6770 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6860 d164838e6773 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e6887" headers="d164838e6755 ">
                                       <p>T <sub>7</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e6887 d164838e6758 ">
                                       <p>Pin对象2  - 引脚持续时间=事务</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e6887 d164838e6761 ">
                                       <p><a href="oci-pin-unpin-and-free-functions.html#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="引脚可引用对象。">OCIObjectPin（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6887 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6887 d164838e6767 ">
                                       <p>置顶</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6887 d164838e6770 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6887 d164838e6773 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e6916" headers="d164838e6755 ">
                                       <p>T <sub>8</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e6916 d164838e6758 ">
                                       <p>处理申请数据</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e6916 d164838e6761 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6916 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6916 d164838e6767 ">
                                       <p>置顶</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6916 d164838e6770 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6916 d164838e6773 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e6940" headers="d164838e6755 ">
                                       <p>T <sub>9</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e6940 d164838e6758 ">
                                       <p>提交Transaction1</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e6940 d164838e6761 ">
                                       <p><a href="transaction-functions.html#GUID-DDAE3122-8769-4A30-8D78-EB2A3CCF77D4" title="提交与指定服务上下文关联的事务。">OCITransCommit（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6940 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6940 d164838e6767 ">
                                       <p>取消固定</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6940 d164838e6770 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6940 d164838e6773 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e6969" headers="d164838e6755 ">
                                       <p>T <sub>10</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e6969 d164838e6758 ">
                                       <p>启动Transaction2</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e6969 d164838e6761 ">
                                       <p><a href="transaction-functions.html#GUID-81E5963B-4DE7-47E1-ABB0-C1490AF3BAA8" title="设置事务的开始。">OCITransStart（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6969 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6969 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6969 d164838e6770 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6969 d164838e6773 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e6998" headers="d164838e6755 ">
                                       <p>T <sub>11</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e6998 d164838e6758 ">
                                       <p>创建对象3  - 分配持续时间=事务</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e6998 d164838e6761 ">
                                       <p><a href="oci-miscellaneous-object-functions.html#GUID-2EFD6F01-A02F-4C5B-B20F-1EF841249056" title="创建独立实例。">OCIObjectNew（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6998 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6998 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e6998 d164838e6770 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e6998 d164838e6773 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e7027" headers="d164838e6755 ">
                                       <p>T <sub>12</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e7027 d164838e6758 ">
                                       <p>SQL  - 将<code class="codeph">REF</code>提取到对象4</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e7027 d164838e6761 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7027 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7027 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7027 d164838e6770 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7027 d164838e6773 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e7054" headers="d164838e6755 ">
                                       <p>T <sub>13</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e7054 d164838e6758 ">
                                       <p>引脚对象4  - 引脚持续时间=连接</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e7054 d164838e6761 ">
                                       <p><a href="oci-pin-unpin-and-free-functions.html#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="引脚可引用对象。">OCIObjectPin（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7054 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7054 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7054 d164838e6770 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7054 d164838e6773 ">
                                       <p>置顶</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e7084" headers="d164838e6755 ">
                                       <p>T <sub>14</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e7084 d164838e6758 ">
                                       <p>提交Transaction2</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e7084 d164838e6761 ">
                                       <p><a href="transaction-functions.html#GUID-DDAE3122-8769-4A30-8D78-EB2A3CCF77D4" title="提交与指定服务上下文关联的事务。">OCITransCommit（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7084 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7084 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7084 d164838e6770 ">
                                       <p>删除</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7084 d164838e6773 ">
                                       <p>置顶</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e7113" headers="d164838e6755 ">
                                       <p>T <sub>15</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e7113 d164838e6758 ">
                                       <p>终止session1</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e7113 d164838e6761 ">
                                       <p><a href="lob-functions.html#GUID-AABC3F29-C91B-45A7-AF1E-D486C12E4962" title="终止临时LOB的用户持续时间。">OCIDurationEnd（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7113 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7113 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7113 d164838e6770 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7113 d164838e6773 ">
                                       <p>置顶</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e7142" headers="d164838e6755 ">
                                       <p>T <sub>16</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e7142 d164838e6758 ">
                                       <p>启动Transaction3</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e7142 d164838e6761 ">
                                       <p><a href="transaction-functions.html#GUID-81E5963B-4DE7-47E1-ABB0-C1490AF3BAA8" title="设置事务的开始。">OCITransStart（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7142 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7142 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7142 d164838e6770 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7142 d164838e6773 ">
                                       <p>置顶</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e7171" headers="d164838e6755 ">
                                       <p>T <sub>17</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e7171 d164838e6758 ">
                                       <p>处理申请数据</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e7171 d164838e6761 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7171 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7171 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7171 d164838e6770 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7171 d164838e6773 ">
                                       <p>置顶</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e7195" headers="d164838e6755 ">
                                       <p>T <sub>18</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e7195 d164838e6758 ">
                                       <p>提交Transaction3</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e7195 d164838e6761 ">
                                       <p><a href="transaction-functions.html#GUID-DDAE3122-8769-4A30-8D78-EB2A3CCF77D4" title="提交与指定服务上下文关联的事务。">OCITransCommit（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7195 d164838e6764 ">
                                       <p>存在</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7195 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7195 d164838e6770 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7195 d164838e6773 ">
                                       <p>置顶</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="8%" id="d164838e7224" headers="d164838e6755 ">
                                       <p>T <sub>19</sub></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d164838e7224 d164838e6758 ">
                                       <p>终止连接</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d164838e7224 d164838e6761 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7224 d164838e6764 ">
                                       <p>删除</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7224 d164838e6767 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d164838e7224 d164838e6770 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d164838e7224 d164838e6773 ">
                                       <p>取消固定</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-95AF1F97-1B4A-4A78-A059-2905BB1DD832__GUID-F4EDC1FA-CB8D-4B12-806F-44097071F832">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关可传递给这些函数的参数值的特定信息，可在<a href="oci-navigational-and-type-functions.html#GUID-9F30DB5F-33CB-4CE6-8EFE-732B29E26727" title="本章介绍用于浏览从Oracle数据库检索的对象的OCI导航功能。">OCI导航和类型函数中</a>对<a href="oci-miscellaneous-object-functions.html#GUID-2EFD6F01-A02F-4C5B-B20F-1EF841249056" title="创建独立实例。">OCIObjectNew（）</a>和<a href="oci-pin-unpin-and-free-functions.html#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="引脚可引用对象。">OCIObjectPin（）</a>进行描述</p>
                              </li>
                              <li>
                                 <p><a href="oci-object-relational-programming.html#GUID-86418D8C-FA67-4B14-A5BC-7A075C6B4206" title="OCI应用程序可以使用OCIObjectNew（）创建任何对象。">关于创建对象，</a>以获取有关在分配持续时间到期之前释放对象内存的信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="LNOCI72770"></a><a id="LNOCI72771"></a><a id="LNOCI17013"></a><div class="props_rev_3"><a id="GUID-C4F12ECA-651F-4620-8761-C8EAA9F09BF5" name="GUID-C4F12ECA-651F-4620-8761-C8EAA9F09BF5"></a><h4 id="LNOCI-GUID-C4F12ECA-651F-4620-8761-C8EAA9F09BF5" class="sect4"><span class="enumeration_section">22.1.10</span>实例的内存布局</h4>
                  <div>
                     <p>存储器中的实例由实例的顶级存储器块，空指示器结构的顶级存储器以及可选的一些辅助存储器块组成。</p>
                     <p>考虑<a href="object-advanced-topics-in-oci.html#GUID-C4F12ECA-651F-4620-8761-C8EAA9F09BF5__BGBCACDA">例22-1中</a>定义的<code class="codeph">DEPARTMENT</code>行类型。
                     </p>
                     <p><a href="object-advanced-topics-in-oci.html#GUID-C4F12ECA-651F-4620-8761-C8EAA9F09BF5__BGBEIHFD">例22-2</a>显示了<code class="codeph">DEPARTMENT</code>的C表示。
                     </p>
                     <p><code class="codeph">DEPARTMENT</code>每个实例都有一个顶级内存块，其中包含顶级属性，例如<code class="codeph">dep_name</code> ， <code class="codeph">budget</code> ， <code class="codeph">manager</code>和<code class="codeph">employees</code> 。属性<code class="codeph">dep_name</code>和<code class="codeph">employees</code>是指向附加内存（辅助内存块）的指针。辅助内存用于包含嵌入式实例的数据（例如， <code class="codeph">employees</code> varray和<code class="codeph">dep_name</code>字符串）。
                     </p>
                     <p>空指示符结构的顶级内存包含实例的顶级内存块中的属性的空状态。在<a href="object-advanced-topics-in-oci.html#GUID-C4F12ECA-651F-4620-8761-C8EAA9F09BF5__BGBEIHFD">实施例22-2</a>中，空结构的顶层存储器包含的属性的空状态<code class="codeph">dep_name</code> ， <code class="codeph">budget</code> ，和<code class="codeph">manager</code> ，和的原子无效<code class="codeph">employees</code> 。
                     </p>
                     <div class="example" id="GUID-C4F12ECA-651F-4620-8761-C8EAA9F09BF5__BGBCACDA">
                        <p class="titleinexample">示例22-1部门行的对象类型表示</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE部门AS OBJECT（dep_name varchar2（20），预算编号，经理人，/ *人是对象类型* / employees person_array）; / *人物对象的varray * /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-C4F12ECA-651F-4620-8761-C8EAA9F09BF5__BGBEIHFD">
                        <p class="titleinexample">例22-2部门行的C表示</p><pre class="oac_no_warn" dir="ltr">struct department {OCIString * dep_name; OCINumber预算;结构人经理; OCIArray *员工; ）; typedef struct department department;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="LNOCI17014"></a><div class="props_rev_3"><a id="GUID-4BFF0155-C6FE-4592-89CF-F8FD99E1E2BC" name="GUID-4BFF0155-C6FE-4592-89CF-F8FD99E1E2BC"></a><h3 id="LNOCI-GUID-4BFF0155-C6FE-4592-89CF-F8FD99E1E2BC" class="sect3"><span class="enumeration_section">22.2</span>对象导航</h3>
               <div>
                  <p>本节讨论OCI应用程序如何浏览对象缓存中对象的图形。</p>
                  <p>本节包括以下主题： <a href="object-advanced-topics-in-oci.html#GUID-2BF8105C-419E-4560-B241-BFCC1CCB719D" title="如果应用程序检索具有属于另一个对象的REF属性的对象，则应用程序可以使用OCI调用遍历对象图并访问引用的实例。">简单对象导航</a> 。
                  </p>
               </div><a id="LNOCI17016"></a><a id="LNOCI17015"></a><div class="props_rev_3"><a id="GUID-2BF8105C-419E-4560-B241-BFCC1CCB719D" name="GUID-2BF8105C-419E-4560-B241-BFCC1CCB719D"></a><h4 id="LNOCI-GUID-2BF8105C-419E-4560-B241-BFCC1CCB719D" class="sect4"><span class="enumeration_section">22.2.1</span>简单对象导航</h4>
                  <div>
                     <p>如果应用程序检索具有属于另一个对象的<code class="codeph">REF</code>属性的对象，则应用程序可以使用OCI调用遍历<span class="italic">对象图</span>并访问引用的实例。
                     </p>
                     <p>在<a href="object-advanced-topics-in-oci.html#GUID-C4F12ECA-651F-4620-8761-C8EAA9F09BF5__BGBCACDA">例22-1</a>和<a href="object-advanced-topics-in-oci.html#GUID-C4F12ECA-651F-4620-8761-C8EAA9F09BF5__BGBEIHFD">例22-2中</a> ，应用程序检索的对象是一个简单对象，其属性都是标量值。
                     </p>
                     <p>例如，请考虑数据库中新类型的以下声明：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE person_t AS OBJECT（名称VARCHAR2（30），母亲REF person_t，父亲REF person_t）;</pre><p>使用以下语句创建<code class="codeph">person_t</code>对象的对象表：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE person_table OF person_t;</pre><p><code class="codeph">person_t</code>类型的实例现在可以存储在类型表中。<code class="codeph">person_t</code>每个实例包括对两个其他对象的引用，这两个对象也将存储在表中。<code class="codeph">NULL</code>引用可以表示父项的信息不可用。
                     </p>
                     <p>对象图是对象实例之间的<code class="codeph">REF</code>链接的图形表示。例如， <a href="object-advanced-topics-in-oci.html#GUID-2BF8105C-419E-4560-B241-BFCC1CCB719D__I440204">图22-2</a>描绘了<code class="codeph">person_t</code>实例的对象图，显示了从一个对象到另一个对象的链接。圆圈表示对象，箭头表示对其他对象的引用。与箭头相邻的M和F分别表示母亲和父亲。
                     </p>
                     <div class="figure" id="GUID-2BF8105C-419E-4560-B241-BFCC1CCB719D__I440204">
                        <p class="titleinfigure">图22-2 person_t实例的对象图</p><img src="img/lnoci027.gif" alt="下面是图22-2的描述" title="下面是图22-2的描述" longdesc="img_text/lnoci027.html"><br><a href="img_text/lnoci027.html">“图22-2 person_t实例的对象图”的描述</a></div>
                     <!-- class="figure" -->
                     <p>在这种情况下，每个对象都链接到同一对象的另外两个实例（M和F）。情况并非总是如此。对象可能具有指向其他对象类型的链接。其他类型的图也是可能的。例如，如果将一组对象实现为链接列表，则可以将对象图形视为简单链，其中每个对象引用链接列表中的上一个或下一个对象或两者。</p>
                     <p>您可以使用本章前面介绍的方法检索对<code class="codeph">person_t</code>实例的引用，然后固定该实例。OCI提供的功能使您能够通过跟踪从一个对象到另一个对象的引用来遍历对象图。
                     </p>
                     <p>例如，假设应用程序在前面的图中提取<code class="codeph">person1</code>实例并将其固定为<code class="codeph">pers_1</code> 。完成后，应用程序可以访问<code class="codeph">person1</code>的母实例，并通过第二个引脚操作将其固定到<code class="codeph">pers_2</code> ：</p><pre class="oac_no_warn" dir="ltr">OCIObjectPin（env，err，pers_1-&gt; mother，OCI_PIN_ANY，OCI_DURATION_TRANS，OCI_LOCK_X，（OCIComplexObject *）0，＆pers_2）;</pre><p>在这种情况下，不需要OCI提取操作来检索第二个实例。</p>
                     <p>然后，应用程序可以固定<code class="codeph">person1</code>的父实例，或者它可以在<code class="codeph">person2</code>的引用链接上<code class="codeph">person2</code> 。
                     </p>
                     <div class="infoboxnote" id="GUID-2BF8105C-419E-4560-B241-BFCC1CCB719D__GUID-8251D80D-ACCD-4BF1-AA20-4CF20949FE8D">
                        <p class="notep1">注意：</p>
                        <p>尝试固定<code class="codeph">NULL</code>或悬空<code class="codeph">REF</code>导致<code class="codeph">OCIObjectPin()</code>调用出错。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-2BF8105C-419E-4560-B241-BFCC1CCB719D__GUID-0D96BDC0-431D-44BB-B0F8-91774FE08579">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="oci-pin-unpin-and-free-functions.html#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="引脚可引用对象。">OCIObjectPin（）</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="LNOCI17017"></a><div class="props_rev_3"><a id="GUID-AC858892-54CA-403F-AB4C-5DD14B2FCAD0" name="GUID-AC858892-54CA-403F-AB4C-5DD14B2FCAD0"></a><h3 id="LNOCI-GUID-AC858892-54CA-403F-AB4C-5DD14B2FCAD0" class="sect3"><span class="enumeration_section">22.3</span> OCI导航功能</h3>
               <div>
                  <p>本节简要概述了可用的OCI导航功能。</p>
                  <p>功能根据其一般功能进行分组。</p>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-47D39623-BCE7-4A2F-8E9A-EC946B69B478" title="列出并描述了引脚，取消固定和自由功能。">关于Pin / Unpin / Free功能</a></p>
                        </li>
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-E8065CEE-6586-4991-BB0E-FE21A20A2749" title="列出并描述刷新和刷新功能。">关于刷新和刷新功能</a></p>
                        </li>
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-43512F5B-2C6E-4712-9B6E-170DF1FAA7BE" title="列出并描述标记和取消标记功能。">关于Mark和Unmark功能</a></p>
                        </li>
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-9CC6E7F6-EA63-4A62-876F-89D115DB55D3" title="列出并描述元属性访问器功能。">关于对象元属性访问器函数</a></p>
                        </li>
                        <li>
                           <p><a href="object-advanced-topics-in-oci.html#GUID-D75B1421-C93D-44D5-8192-C23F1B7EB969" title="列出并描述其他功能。">关于其他功能</a></p>
                        </li>
                     </ul>
                  </div>
                  <p>本章的前面部分描述了这些功能的使用。</p>
                  <p>导航功能遵循命名方案，该方案对不同类型的功能使用不同的前缀：</p>
                  <p><code class="codeph">OCICache*()</code> - 这些函数是缓存操作。
                  </p>
                  <p><code class="codeph">OCIObject*()</code> - 这些函数是单独的对象操作。
                  </p>
                  <div class="infoboxnotealso" id="GUID-AC858892-54CA-403F-AB4C-5DD14B2FCAD0__GUID-2D2A688E-234E-475D-9B96-8EDC4F1B1BAD">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="oci-navigational-and-type-functions.html#GUID-9F30DB5F-33CB-4CE6-8EFE-732B29E26727" title="This chapter describes the OCI navigational functions that are used to navigate through objects retrieved from an Oracle database.">OCI导航和类型功能</a>有关每个<a href="oci-navigational-and-type-functions.html#GUID-9F30DB5F-33CB-4CE6-8EFE-732B29E26727" title="本章介绍用于浏览从Oracle数据库检索的对象的OCI导航功能。">功能</a>的更详细说明</p>
                  </div>
               </div><a id="LNOCI17019"></a><a id="LNOCI17018"></a><div class="props_rev_3"><a id="GUID-47D39623-BCE7-4A2F-8E9A-EC946B69B478" name="GUID-47D39623-BCE7-4A2F-8E9A-EC946B69B478"></a><h4 id="LNOCI-GUID-47D39623-BCE7-4A2F-8E9A-EC946B69B478" class="sect4"><span class="enumeration_section">22.3.1</span>关于Pin / Unpin / Free功能</h4>
                  <div>
                     <p>列出并描述了引脚，取消固定和自由功能。</p>
                     <p><a href="object-advanced-topics-in-oci.html#GUID-47D39623-BCE7-4A2F-8E9A-EC946B69B478__BGBDIFGI" title="该表有2列。第1列是函数名称，第2列描述其用途。">表22-3</a>中的功能可用于固定，取消固定或释放对象。
                     </p>
                     <div class="tblformal" id="GUID-47D39623-BCE7-4A2F-8E9A-EC946B69B478__BGBDIFGI">
                        <p class="titleintable">表22-3引脚，自由和取消固定功能</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Pin，Free和Unpin功能" width="100%" border="1" summary="This table has 2 columns. Column 1 is the function name and column 2 describes its purpose." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="42%" id="d164838e8531">功能</th>
                                 <th align="left" valign="bottom" width="58%" id="d164838e8534">目的</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e8539" headers="d164838e8531 ">
                                    <p><a href="oci-pin-unpin-and-free-functions.html#GUID-7CEF4ED9-E920-4F1F-9AFD-51C1EDB07EDB" title="释放指定连接的缓存中的所有对象和值。">OCICacheFree（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e8539 d164838e8534 ">
                                    <p>释放缓存中的所有实例</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e8551" headers="d164838e8531 ">
                                    <p><a href="oci-pin-unpin-and-free-functions.html#GUID-B7E9C0B8-7888-456E-A8F1-1151354C37BF" title="取消持久对象。">OCICacheUnpin（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e8551 d164838e8534 ">
                                    <p>取消固定缓存或连接中的持久对象</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e8563" headers="d164838e8531 ">
                                    <p><a href="oci-pin-unpin-and-free-functions.html#GUID-2629C6C3-5299-4E92-BA58-804809CFF8B9" title="引入一系列引用。">OCIObjectArrayPin（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e8563 d164838e8534 ">
                                    <p>固定一系列参考文献</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e8575" headers="d164838e8531 ">
                                    <p><a href="oci-pin-unpin-and-free-functions.html#GUID-0814B033-C25C-4B4C-8968-4C0B86C2E744" title="释放和取消对象实例。">OCIObjectFree（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e8575 d164838e8534 ">
                                    <p>免费并取消固定独立实例</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e8587" headers="d164838e8531 ">
                                    <p><a href="oci-pin-unpin-and-free-functions.html#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="引脚可引用对象。">OCIObjectPin（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e8587 d164838e8534 ">
                                    <p>固定一个物体</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e8599" headers="d164838e8531 ">
                                    <p><a href="oci-pin-unpin-and-free-functions.html#GUID-5D8C7FE3-8088-4A1C-8C36-19D0982FCAC3" title="完全取消对象，将其引脚数设置为零。">OCIObjectPinCountReset（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e8599 d164838e8534 ">
                                    <p>将对象取消固定为零引脚数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e8611" headers="d164838e8531 ">
                                    <p><a href="oci-pin-unpin-and-free-functions.html#GUID-B08E296D-7D4F-4D8C-A0CF-16786E9993E8" title="将表对象固定指定的持续时间。">OCIObjectPinTable（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e8611 d164838e8534 ">
                                    <p>固定具有给定持续时间的表对象</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e8623" headers="d164838e8531 ">
                                    <p><a href="oci-pin-unpin-and-free-functions.html#GUID-109DD260-8094-489C-A85C-AB27277E6D9B" title="取消一个对象。">OCIObjectUnpin（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e8623 d164838e8534 ">
                                    <p>取消固定对象</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="LNOCI17021"></a><a id="LNOCI17020"></a><div class="props_rev_3"><a id="GUID-E8065CEE-6586-4991-BB0E-FE21A20A2749" name="GUID-E8065CEE-6586-4991-BB0E-FE21A20A2749"></a><h4 id="LNOCI-GUID-E8065CEE-6586-4991-BB0E-FE21A20A2749" class="sect4"><span class="enumeration_section">22.3.2</span>关于刷新和刷新功能</h4>
                  <div>
                     <p>列出并描述刷新和刷新功能。</p>
                     <p><a href="object-advanced-topics-in-oci.html#GUID-E8065CEE-6586-4991-BB0E-FE21A20A2749__BGBDFADA" title="该表有2列。第1列是函数名称，第2列描述其用途。">表22-4</a>中的函数可用于将修改后的对象刷新到服务器。
                     </p>
                     <div class="tblformal" id="GUID-E8065CEE-6586-4991-BB0E-FE21A20A2749__BGBDFADA">
                        <p class="titleintable">表22-4刷新和刷新功能</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="刷新和刷新功能" width="100%" border="1" summary="This table has 2 columns. Column 1 is the function name and column 2 describes its purpose." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="34%" id="d164838e8844">功能</th>
                                 <th align="left" valign="bottom" width="66%" id="d164838e8847">目的</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d164838e8852" headers="d164838e8844 ">
                                    <p><a href="oci-flush-or-refresh-functions.html#GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E" title="将已修改的持久对象刷新到服务器。">OCICacheFlush（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d164838e8852 d164838e8847 ">
                                    <p>将缓存中已修改的持久对象刷新到服务器</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d164838e8864" headers="d164838e8844 ">
                                    <p><a href="oci-flush-or-refresh-functions.html#GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301" title="将修改后的持久对象刷新到服务器。">OCIObjectFlush（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d164838e8864 d164838e8847 ">
                                    <p>将修改后的持久对象刷新到服务器</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d164838e8876" headers="d164838e8844 ">
                                    <p><a href="oci-flush-or-refresh-functions.html#GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F" title="刷新缓存中的所有固定持久对象。">OCICacheRefresh（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d164838e8876 d164838e8847 ">
                                    <p>刷新缓存中的固定持久对象</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d164838e8888" headers="d164838e8844 ">
                                    <p><a href="oci-flush-or-refresh-functions.html#GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C" title="刷新最新数据库快照中的持久对象。">OCIObjectRefresh（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d164838e8888 d164838e8847 ">
                                    <p>刷新单个持久对象</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="LNOCI17023"></a><a id="LNOCI17022"></a><div class="props_rev_3"><a id="GUID-43512F5B-2C6E-4712-9B6E-170DF1FAA7BE" name="GUID-43512F5B-2C6E-4712-9B6E-170DF1FAA7BE"></a><h4 id="LNOCI-GUID-43512F5B-2C6E-4712-9B6E-170DF1FAA7BE" class="sect4"><span class="enumeration_section">22.3.3</span>关于标记和取消标记功能</h4>
                  <div>
                     <p>列出并描述标记和取消标记功能。</p>
                     <p><a href="object-advanced-topics-in-oci.html#GUID-43512F5B-2C6E-4712-9B6E-170DF1FAA7BE__BGBCDJDH" title="该表有2列。第1列是函数名称，第2列描述其用途。">表22-5中</a>的函数允许应用程序通过修改其中一个元属性来标记或取消标记对象。
                     </p>
                     <div class="tblformal" id="GUID-43512F5B-2C6E-4712-9B6E-170DF1FAA7BE__BGBCDJDH">
                        <p class="titleintable">表22-5标记和取消标记功能</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="标记和取消标记功能" width="100%" border="1" summary="This table has 2 columns. Column 1 is the function name and column 2 describes its purpose." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="42%" id="d164838e9108">功能</th>
                                 <th align="left" valign="bottom" width="58%" id="d164838e9111">目的</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e9116" headers="d164838e9108 ">
                                    <p><a href="oci-mark-or-unmark-object-cache-functions.html#GUID-307366DB-B9B1-44E7-A52E-03216F2FF73E" title="在给定对象的引用时，将对象标记为已删除。">OCIObjectMarkDeleteByRef（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e9116 d164838e9111 ">
                                    <p>在给定<code class="codeph">REF</code>时标记删除的对象</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e9130" headers="d164838e9108 ">
                                    <p><a href="oci-mark-or-unmark-object-cache-functions.html#GUID-6EEEC8CC-3041-4718-ADE7-20C6D8C661ED" title="将持久对象标记为已更新（脏）。">OCIObjectMarkUpdate（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e9130 d164838e9111 ">
                                    <p>将对象标记为已更新（脏）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e9142" headers="d164838e9108 ">
                                    <p><a href="oci-mark-or-unmark-object-cache-functions.html#GUID-46497858-8E6C-4920-857C-83FFC8B0F7C1" title="在给定指向实例的指针时，将独立实例标记为已删除。">OCIObjectMarkDelete（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e9142 d164838e9111 ">
                                    <p>标记删除的对象或删除值实例</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e9154" headers="d164838e9108 ">
                                    <p><a href="oci-mark-or-unmark-object-cache-functions.html#GUID-BADD75E5-0C72-4364-911D-2DF59BF642C8" title="取消标记对象缓存中的所有脏对象。">OCICacheUnmark（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e9154 d164838e9111 ">
                                    <p>取消标记缓存中的所有对象</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e9166" headers="d164838e9108 ">
                                    <p><a href="oci-mark-or-unmark-object-cache-functions.html#GUID-41C686AE-4C80-4539-80AF-4150680A02A5" title="将对象取消标记为脏。">OCIObjectUnmark（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e9166 d164838e9111 ">
                                    <p>将给定对象标记为已更新</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="42%" id="d164838e9178" headers="d164838e9108 ">
                                    <p><a href="oci-mark-or-unmark-object-cache-functions.html#GUID-3FA9AEC7-AECE-4FD0-8C97-7C47E14231E8" title="在给对象引用时，将对象取消标记为脏。">OCIObjectUnmarkByRef（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="58%" headers="d164838e9178 d164838e9111 ">
                                    <p>给定<code class="codeph">REF</code>时，将对象标记为已更新</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="LNOCI17025"></a><a id="LNOCI17024"></a><div class="props_rev_3"><a id="GUID-9CC6E7F6-EA63-4A62-876F-89D115DB55D3" name="GUID-9CC6E7F6-EA63-4A62-876F-89D115DB55D3"></a><h4 id="LNOCI-GUID-9CC6E7F6-EA63-4A62-876F-89D115DB55D3" class="sect4"><span class="enumeration_section">22.3.4</span>关于对象元属性访问器函数</h4>
                  <div>
                     <p>列出并描述元属性访问器功能。</p>
                     <p><a href="object-advanced-topics-in-oci.html#GUID-9CC6E7F6-EA63-4A62-876F-89D115DB55D3__BGBDBGJH" title="该表有2列。第1列是函数名称，第2列描述其用途。">表22-6中</a>的函数允许应用程序访问对象的元属性。
                     </p>
                     <div class="tblformal" id="GUID-9CC6E7F6-EA63-4A62-876F-89D115DB55D3__BGBDBGJH">
                        <p class="titleintable">表22-6对象元属性函数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="对象元属性函数" width="100%" border="1" summary="This table has 2 columns. Column 1 is the function name and column 2 describes its purpose." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="39%" id="d164838e9403">功能</th>
                                 <th align="left" valign="bottom" width="61%" id="d164838e9406">目的</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d164838e9411" headers="d164838e9403 ">
                                    <p><a href="oci-get-object-status-functions.html#GUID-AF9CFD0F-14C4-4D24-94BF-5D68E9C41E01" title="返回独立实例的存在元属性。">OCIObjectExists（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d164838e9411 d164838e9406 ">
                                    <p>获取实例的存在状态</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d164838e9423" headers="d164838e9403 ">
                                    <p><a href="oci-miscellaneous-object-functions.html#GUID-22B229C0-369E-453E-A8D6-C7F7DBB1E80C" title="检索独立实例的NULL指示符结构。">OCIObjectGetInd（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d164838e9423 d164838e9406 ">
                                    <p>获取实例的null结构</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d164838e9438" headers="d164838e9403 ">
                                    <p><a href="oci-get-object-status-functions.html#GUID-9B96A7DF-BE19-4131-8B95-11063C060012" title="检查对象是否标记为脏。">OCIObjectIsDirty（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d164838e9438 d164838e9406 ">
                                    <p>对象是否已标记为已更新？</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d164838e9450" headers="d164838e9403 ">
                                    <p><a href="oci-get-object-status-functions.html#GUID-AC738B41-AA00-40D4-9824-F63BADA321FB" title="获取对象的锁定状态。">OCIObjectIsLocked（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d164838e9450 d164838e9406 ">
                                    <p>对象是否已锁定？</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="LNOCI17027"></a><a id="LNOCI17026"></a><div class="props_rev_3"><a id="GUID-D75B1421-C93D-44D5-8192-C23F1B7EB969" name="GUID-D75B1421-C93D-44D5-8192-C23F1B7EB969"></a><h4 id="LNOCI-GUID-D75B1421-C93D-44D5-8192-C23F1B7EB969" class="sect4"><span class="enumeration_section">22.3.5</span>关于其他功能</h4>
                  <div>
                     <p>列出并描述其他功能。</p>
                     <p><a href="object-advanced-topics-in-oci.html#GUID-D75B1421-C93D-44D5-8192-C23F1B7EB969__BGBDHJHB" title="该表有2列。第1列是函数名称，第2列描述其用途。">表22-7中的</a>函数为OCI应用程序提供了其他对象功能。
                     </p>
                     <div class="tblformal" id="GUID-D75B1421-C93D-44D5-8192-C23F1B7EB969__BGBDHJHB">
                        <p class="titleintable">表22-7其他对象函数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="其他对象功能" width="100%" border="1" summary="This table has 2 columns. Column 1 is the function name and column 2 describes its purpose." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="39%" id="d164838e9671">功能</th>
                                 <th align="left" valign="bottom" width="61%" id="d164838e9674">目的</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d164838e9679" headers="d164838e9671 ">
                                    <p><a href="oci-miscellaneous-object-functions.html#GUID-73C98F89-47E5-4B82-B869-731F30F011B0" title="将源实例复制到目标。">OCIObjectCopy（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d164838e9679 d164838e9674 ">
                                    <p>将一个实例复制到另一个</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d164838e9691" headers="d164838e9671 ">
                                    <p><a href="oci-miscellaneous-object-functions.html#GUID-487BE97C-C3CE-49C6-9E8D-62BFCE7980F5" title="返回对给定持久对象的引用。">OCIObjectGetObjectRef（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d164838e9691 d164838e9674 ">
                                    <p>返回对给定对象的引用</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d164838e9703" headers="d164838e9671 ">
                                    <p><a href="oci-miscellaneous-object-functions.html#GUID-9C83F766-C8A3-48A0-A7D5-2BF4037C2B32" title="返回对独立实例的类型描述符对象（TDO）的引用。">OCIObjectGetTypeRef（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d164838e9703 d164838e9674 ">
                                    <p>获取对实例的TDO的引用</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d164838e9715" headers="d164838e9671 ">
                                    <p><a href="oci-miscellaneous-object-functions.html#GUID-FF85B1EA-695C-49A6-99AC-6E1A7F616FC0" title="锁定服务器上的持久对象。">OCIObjectLock（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d164838e9715 d164838e9674 ">
                                    <p>锁定持久对象</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d164838e9727" headers="d164838e9671 ">
                                    <p><a href="oci-miscellaneous-object-functions.html#GUID-F8C389C2-A5F0-4603-B260-BD932D4AC9C8" title="锁定服务器上的持久对象但不等待锁定。">OCIObjectLockNoWait（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d164838e9727 d164838e9674 ">
                                    <p>在NOWAIT模式下锁定对象</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d164838e9739" headers="d164838e9671 ">
                                    <p><a href="oci-miscellaneous-object-functions.html#GUID-2EFD6F01-A02F-4C5B-B20F-1EF841249056" title="创建独立实例。">OCIObjectNew（）</a></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d164838e9739 d164838e9674 ">
                                    <p>创建一个新实例</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div><a id="LNOCI17028"></a><div class="props_rev_3"><a id="GUID-35CBBA0E-CAC9-4BA3-99F7-77D613141661" name="GUID-35CBBA0E-CAC9-4BA3-99F7-77D613141661"></a><h3 id="LNOCI-GUID-35CBBA0E-CAC9-4BA3-99F7-77D613141661" class="sect3"><span class="enumeration_section">22.4</span>类型Evolution和对象缓存</h3>
               <div>
                  <p>当基于类型名称请求类型信息时，OCI返回与该类型的最新版本相对应的类型描述符对象（TDO）。</p>
                  <p>由于服务器和对象缓存之间没有同步，因此对象缓存中的TDO可能不是最新的。</p>
                  <p>在固定对象期间，图像的版本可能与TDO版本不同。然后，发出错误。您可以停止应用程序或刷新TDO并重新打开对象。继续应用程序可能会导致应用程序失败，因为即使映像和TDO版本相同，也无法保证应用程序中定义的对象结构（即C结构）与新类型版本兼容，尤其是当从服务器中的类型中删除属性时。</p>
                  <p>因此，当更改类型的结构时，必须重新生成已更改类型的头文件，修改其应用程序，重新编译和重新链接，然后再次执行该程序。</p>
                  <div class="infoboxnotealso" id="GUID-35CBBA0E-CAC9-4BA3-99F7-77D613141661__GUID-5D0E2426-EC0B-4EEE-8FD2-830D96D0372D">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="oci-object-relational-programming.html#GUID-34071CB4-805F-4DFE-B2F3-2E51A5B312F9" title="支持添加，删除和修改类型属性。这个概念被称为类型演化。">关于Type Evolution</a></p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
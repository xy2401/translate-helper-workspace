<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Partitioning indexes has recommendations and considerations in common with partitioning tables."></meta>
      <meta name="description" content="Partitioning indexes has recommendations and considerations in common with partitioning tables."></meta>
      <title>索引分区</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="VLDB and Partitioning Guide"></meta>
      <meta property="og:description" content="Partitioning indexes has recommendations and considerations in common with partitioning tables."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="VLDB and Partitioning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="vldb-and-partitioning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:05:22-07:00"></meta>
      <meta name="dcterms.title" content="VLDB and Partitioning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2008, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96199-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="partition-wise-joins.html" title="Previous" type="text/html"></link>
      <link rel="next" href="partition-table-compression.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="VLDBG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="partition-wise-joins.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="partition-table-compression.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">VLDB和分区指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="partition-availability.html" property="item" typeof="WebPage"><span property="name">可用性，可管理性和性能的分区</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">索引分区</li>
            </ol>
            <a id="GUID-569F94D0-E6E5-45BB-9626-5506DE18FF00" name="GUID-569F94D0-E6E5-45BB-9626-5506DE18FF00"></a><a id="VLDBG00403"></a>
            
            <h2 id="VLDBG-GUID-569F94D0-E6E5-45BB-9626-5506DE18FF00" class="sect2">索引分区</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='index-partitioning'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>分区索引具有与分区表相同的建议和注意事项。</p>
               <p>分区索引的规则与表的规则类似：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>索引可以分区，除非：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>索引是群集索引。</p>
                        </li>
                        <li>
                           <p>索引在群集表上定义。</p>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <p>您可以将分区和非分区索引与分区和非分区表混合使用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>分区表可以具有分区或非分区索引。</p>
                        </li>
                        <li>
                           <p>非分区表可以具有分区或非分区索引。</p>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <p>无法对非分区表上的位图索引进行分区。</p>
                  </li>
                  <li>
                     <p>分区表上的位图索引必须是本地索引。</p>
                  </li>
               </ul>
               <p>但是，分区索引比分区表更复杂，因为有三种类型的分区索引：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>本地前缀</p>
                  </li>
                  <li>
                     <p>本地非前缀</p>
                  </li>
                  <li>
                     <p>全球前缀</p>
                  </li>
               </ul>
               <p>Oracle数据库支持所有三种类型。但是，有一些限制。例如，在分区表上创建本地唯一索引时，键不能是表达式。</p>
               <p>讨论了以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="index-partitioning.html#GUID-554495C0-6FE9-4F27-96A9-1562727AD401" title="在本地索引中，特定索引分区中的所有键仅指存储在单个基础表分区中的行。">本地分区索引</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-D1E775A0-669B-4E51-8D40-858847B64BEF" title="在全局分区索引中，特定索引分区中的键可以指存储在多个基础表分区或子分区中的行。">全局分区索引</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-19F204BC-202C-4579-85AD-A51FAFC1C746" title="本主题提供了分区索引类型的摘要。">分区索引类型摘要</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-4FB3C818-D107-491C-955D-1772E2F64A00" title="非前缀索引很重要，因为它们在历史数据库中特别有用。">非前缀索引的重要性</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-A43726D5-300D-4F5E-8FF3-85F057BC4CD3" title="前缀和非前缀索引存在性能影响。">前缀和非前缀索引的性能影响</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-48E980C5-AC1D-4140-AE6A-531BE38108E0" title="使用分区索引的高级索引压缩可以降低索引的存储要求。">带分区索引的高级索引压缩</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-359C0752-D50C-4A93-9D6E-C1B67E81625D" title="分区索引有几个准则。">分区索引指南</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-40947B49-166F-4377-938F-FED6ECBA6383" title="本主题描述了索引分区的物理属性。">索引分区的物理属性</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-569F94D0-E6E5-45BB-9626-5506DE18FF00__GUID-DBFC33BD-43D2-415C-9413-14F332797E89">
                  <p class="notep1">也可以看看：</p>
                  <p>有关<code class="codeph">DBA_INDEXES</code> ， <code class="codeph">DBA_IND_PARTITIONS</code> ， <code class="codeph">DBA_IND_SUBPARTITIONS</code>和<code class="codeph">DBA_PART_INDEXES</code>视图的信息，请<code class="codeph">DBA_IND_PARTITIONS</code> <a href="../refrn/about-static-data-dictionary-views.html#REFRN002" target="_blank"><span><cite>Oracle数据库参考</cite></span></a> 。
                  </p>
               </div>
            </div><a id="VLDBG1251"></a><div class="props_rev_3"><a id="GUID-554495C0-6FE9-4F27-96A9-1562727AD401" name="GUID-554495C0-6FE9-4F27-96A9-1562727AD401"></a><h3 id="VLDBG-GUID-554495C0-6FE9-4F27-96A9-1562727AD401" class="sect3">本地分区索引</h3>
               <div>
                  <p>在本地索引中，特定索引分区中的所有键仅指存储在单个基础表分区中的行。</p>
                  <p>通过指定<code class="codeph">LOCAL</code>属性创建本地索引。Oracle构造本地索引，以便它与底层表进行平衡。Oracle在与基础表相同的列上对索引进行分区，创建相同数量的分区或子分区，并为它们提供与基础表的相应分区相同的分区范围。
                  </p>
                  <p>当添加，删除，合并或拆分基础表中的分区时，或者添加或合并散列分区或子分区时，Oracle还会自动维护索引分区。这可确保索引保持与表格相同。</p>
                  <p>如果分区列构成索引列的子集，则可以创建本地索引<code class="codeph">UNIQUE</code> 。此限制可确保具有相同索引键的行始终映射到可以检测到唯一性违规的同一分区。
                  </p>
                  <p>本地索引具有以下优点：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在基础表分区上执行除<code class="codeph">SPLIT</code> <code class="codeph">PARTITION</code>或<code class="codeph">ADD</code> <code class="codeph">PARTITION</code>之外的维护操作时，只能重建一个索引分区。
                        </p>
                     </li>
                     <li>
                        <p>如果分区表仅具有本地索引，则分区维护操作的持续时间将与分区大小成比例。</p>
                     </li>
                     <li>
                        <p>本地索引支持分区独立性。</p>
                     </li>
                     <li>
                        <p>本地索引支持在旧历史表中平滑地推出旧数据和滚入新数据。</p>
                     </li>
                     <li>
                        <p>Oracle可以利用本地索引与底层表进行通信以生成更好的查询访问计划这一事实。</p>
                     </li>
                     <li>
                        <p>本地索引简化了表空间不完全恢复的任务。要将表的分区或子分区恢复到某个时间点，还必须将相应的索引条目恢复到同一时间点。实现此目的的唯一方法是使用本地索引。然后，您可以恢复相应的表和索引分区或子分区。</p>
                     </li>
                  </ul>
                  <p>讨论了以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="index-partitioning.html#GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03" title="如果本地索引在索引列的左前缀上分区并且子分配键包含在索引键中，则为其添加前缀。本地前缀索引可以是唯一的或非唯一的。">本地前缀索引</a></p>
                     </li>
                     <li>
                        <p><a href="index-partitioning.html#GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB" title="如果本地索引未在索引列的左前缀上分区，或者索引键不包含子分区键，则本地索引是非前缀的。">本地非固定索引</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-554495C0-6FE9-4F27-96A9-1562727AD401__GUID-24B77533-2C47-4661-A69C-25F554050295">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../arpls/DBMS_PCLXUTIL.html#ARPLS037" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，以获取<code class="codeph">DBMS_PCLXUTIL</code>包的说明</p>
                  </div>
               </div><a id="VLDBG1253"></a><a id="VLDBG1252"></a><div class="props_rev_3"><a id="GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03" name="GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03"></a><h4 id="VLDBG-GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03" class="sect4">本地前缀索引</h4>
                  <div>
                     <p>如果本地索引在索引列的左前缀上分区并且子分配键包含在索引键中，则为其添加前缀。本地前缀索引可以是唯一的或非唯一的。</p>
                     <p>例如，如果<code class="codeph">sales</code>表和它的本地索引<code class="codeph">sales_ix</code>是对分区<code class="codeph">week_num</code>列，则索引<code class="codeph">sales_ix</code>被本地如果它是在列（定义前缀<code class="codeph">week_num</code> ， <code class="codeph">xaction_num</code> ）。另一方面，如果在<code class="codeph">product_num</code>列上定义了index <code class="codeph">sales_ix</code>那么它不是前缀。
                     </p>
                     <p><a href="index-partitioning.html#GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03__I1008832">图3-4</a>说明了本地前缀索引的另一个示例。
                     </p>
                     <div class="figure" id="GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03__I1008832">
                        <p class="titleinfigure">图3-4本地前缀索引</p><img src="img/vldbg019.gif" width="581" alt="下面是图3-4的描述" title="下面是图3-4的描述" longdesc="img_text/vldbg019.html"><br><a href="img_text/vldbg019.html">“图3-4本地前缀索引”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="VLDBG1255"></a><a id="VLDBG1254"></a><div class="props_rev_3"><a id="GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB" name="GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB"></a><h4 id="VLDBG-GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB" class="sect4">本地非固定索引</h4>
                  <div>
                     <p>如果本地索引未在索引列的左前缀上分区，或者索引键不包含子分区键，则本地索引是非前缀的。</p>
                     <p>除非分区键是索引键的子集，否则不能具有唯一的本地非前缀索引。</p>
                     <p><a href="index-partitioning.html#GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB__I1008834">图3-5</a>说明了本地非前缀索引的示例。
                     </p>
                     <div class="figure" id="GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB__I1008834">
                        <p class="titleinfigure">图3-5本地非前缀索引</p><img src="img/vldbg018.gif" width="579" alt="下面是图3-5的描述" title="下面是图3-5的描述" longdesc="img_text/vldbg018.html"><br><a href="img_text/vldbg018.html">“图3-5本地非前缀索引”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
               </div>
            </div><a id="VLDBG1256"></a><div class="props_rev_3"><a id="GUID-D1E775A0-669B-4E51-8D40-858847B64BEF" name="GUID-D1E775A0-669B-4E51-8D40-858847B64BEF"></a><h3 id="VLDBG-GUID-D1E775A0-669B-4E51-8D40-858847B64BEF" class="sect3">全局分区索引</h3>
               <div>
                  <p>在全局分区索引中，特定索引分区中的键可以指存储在多个基础表分区或子分区中的行。</p>
                  <p>全局索引可以是范围或散列分区，但可以在任何类型的分区表上定义。通过指定<code class="codeph">GLOBAL</code>属性创建全局索引。数据库管理员负责在创建时定义全局索引的初始分区以及随时间维护分区。可以根据需要合并或拆分索引分区。
                  </p>
                  <p>通常，全局索引不与基础表进行均分配置。没有什么可以阻止索引与基础表进行均分配置，但Oracle在生成查询计划或执行分区维护操作时不利用均分。因此，应将基础表均分的索引创建为<code class="codeph">LOCAL</code> 。</p>
                  <p>全局分区索引包含单个B树，其中包含所有分区中所有行的条目。每个索引分区可能包含引用表中许多不同分区或子分区的键。</p>
                  <p>全局索引的最高分区必须具有包含所有<code class="codeph">MAXVALUE</code>值的分区绑定。这可以确保基础表中的所有行都可以在索引中表示。
                  </p>
                  <p>讨论了以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="index-partitioning.html#GUID-0E499C31-D5FE-40C1-8FF4-5E4C7486FC90" title="如果全局分区索引在索引列的左前缀上进行分区，则会为其添加前缀。">带前缀和非前缀的全局分区索引</a></p>
                     </li>
                     <li>
                        <p><a href="index-partitioning.html#GUID-63785C41-80E1-4224-8CA5-D0A815B43FCF" title="全球分区索引的管理带来了一些挑战。">全球分区指数的管理</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1257"></a><div class="props_rev_3"><a id="GUID-0E499C31-D5FE-40C1-8FF4-5E4C7486FC90" name="GUID-0E499C31-D5FE-40C1-8FF4-5E4C7486FC90"></a><h4 id="VLDBG-GUID-0E499C31-D5FE-40C1-8FF4-5E4C7486FC90" class="sect4">带前缀和非前缀的全局分区索引</h4>
                  <div>
                     <p>如果全局分区索引在索引列的左前缀上进行分区，则会为其添加前缀。</p>
                     <p>如果未在索引列的左前缀上分区，则全局分区索引是非前缀的。Oracle不支持全局非前缀分区索引。有关示例，请参<a href="index-partitioning.html#GUID-63785C41-80E1-4224-8CA5-D0A815B43FCF__I1008961">见图3-6</a> 。
                     </p>
                     <p>全局带前缀的分区索引可以是唯一的也可以是非唯一的。非分区索引被视为全局前缀非分区索引。</p>
                  </div>
               </div><a id="VLDBG1259"></a><a id="VLDBG1258"></a><div class="props_rev_3"><a id="GUID-63785C41-80E1-4224-8CA5-D0A815B43FCF" name="GUID-63785C41-80E1-4224-8CA5-D0A815B43FCF"></a><h4 id="VLDBG-GUID-63785C41-80E1-4224-8CA5-D0A815B43FCF" class="sect4">全球分区指数的管理</h4>
                  <div>
                     <p>全球分区索引的管理带来了一些挑战。</p>
                     <p>由于以下原因，全局分区索引比本地索引更难管理：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>移动或删除基础表分区中的数据（ <code class="codeph">SPLIT</code> ， <code class="codeph">MOVE</code> ， <code class="codeph">DROP</code>或<code class="codeph">TRUNCATE</code> ）时，全局索引的所有分区都会受到影响。因此，全局索引不支持分区独立性。
                           </p>
                        </li>
                        <li>
                           <p>当基础表分区或子分区恢复到某个时间点时，必须将全局索引中的所有相应条目恢复到同一时间点。因为这些条目可能分散在索引的所有分区或子分区中，与未恢复的其他分区或子分区的条目混合在一起，除了重新创建整个全局索引之外，无法实现此目的。</p>
                        </li>
                     </ul>
                     <div class="figure" id="GUID-63785C41-80E1-4224-8CA5-D0A815B43FCF__I1008961">
                        <p class="titleinfigure">图3-6全局前缀分区索引</p><img src="img/vldbg020.gif" width="553" alt="下面是图3-6的描述" title="下面是图3-6的描述" longdesc="img_text/vldbg020.html"><br><a href="img_text/vldbg020.html">“图3-6全局前缀分区索引”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
               </div>
            </div><a id="VLDBG1261"></a><a id="VLDBG1260"></a><div class="props_rev_3"><a id="GUID-19F204BC-202C-4579-85AD-A51FAFC1C746" name="GUID-19F204BC-202C-4579-85AD-A51FAFC1C746"></a><h3 id="VLDBG-GUID-19F204BC-202C-4579-85AD-A51FAFC1C746" class="sect3">分区索引类型摘要</h3>
               <div>
                  <p>本主题提供了分区索引类型的摘要。</p>
                  <p><a href="index-partitioning.html#GUID-19F204BC-202C-4579-85AD-A51FAFC1C746__G1010065" title="分区索引的类型">表3-1</a>总结了Oracle支持的分区索引的类型。关键点是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果索引是本地的，那么它将与基础表进行均分配置。否则，它是全球性的。</p>
                     </li>
                     <li>
                        <p>带前缀的索引在索引列的左前缀上分区。否则，它是非前缀的。</p>
                     </li>
                  </ul>
                  <div class="tblformalwide" id="GUID-19F204BC-202C-4579-85AD-A51FAFC1C746__G1010065">
                     <p class="titleintable">表3-1分区索引的类型</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="分区索引的类型" width="100%" border="1" summary="Types of Partitioned Indexes" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d13870e1053">指数类型</th>
                              <th align="left" valign="bottom" width="12%" id="d13870e1056">索引装备表</th>
                              <th align="left" valign="bottom" width="12%" id="d13870e1059">索引在索引列的左前缀上分区</th>
                              <th align="left" valign="bottom" width="12%" id="d13870e1062">允许使用UNIQUE属性</th>
                              <th align="left" valign="bottom" width="12%" id="d13870e1065">示例：表分区键</th>
                              <th align="left" valign="bottom" width="12%" id="d13870e1070">示例：索引列</th>
                              <th align="left" valign="bottom" width="12%" id="d13870e1075">示例：索引分区键</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d13870e1082" headers="d13870e1053 ">
                                 <p>本地前缀（任何分区方法）</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1082 d13870e1056 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1082 d13870e1059 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1082 d13870e1062 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1082 d13870e1065 ">
                                 <p>一个</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1082 d13870e1070 ">
                                 <p>A，B</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1082 d13870e1075 ">
                                 <p>一个</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d13870e1104" headers="d13870e1053 ">
                                 <p>本地非前缀（任何分区方法）</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1104 d13870e1056 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1104 d13870e1059 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1104 d13870e1062 ">
                                 <p>是<a id="fn_1" name="fn_1" href="#fn_1" for="" a="" unique="" local="" nonprefixed="" index,="" the="" partitioning="" key="" must="" be="" subset="" of="" index="" and="" cannot="" partial="" index=")" ="" onclick="footdisplay(1, "><sup>脚1</sup></a></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1104 d13870e1065 ">
                                 <p>一个</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1104 d13870e1070 ">
                                 <p>B，A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1104 d13870e1075 ">
                                 <p>一个</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d13870e1129" headers="d13870e1053 ">
                                 <p>全局前缀（仅限范围分区）</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1129 d13870e1056 ">
                                 <p>没有<a id="fn_2" name="fn_2" href="#fn_2" although="" a="" global="" partitioned="" index="" may="" be="" equipartitioned="" with="" the="" underlying="" table,="" oracle="" does="" not="" take="" advantage="" of="" partitioning="" or="" maintain="" equipartitioning="" after="" partition="" maintenance="" operations="" such="" as="" drop="" split="" partition=")" ="" onclick="footdisplay(2, "><sup>脚2</sup></a></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1129 d13870e1059 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1129 d13870e1062 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1129 d13870e1065 ">
                                 <p>一个</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1129 d13870e1070 ">
                                 <p>乙</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1129 d13870e1075 ">
                                 <p>乙</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p>对于唯一的本地非前缀索引，分区键必须是索引键的子集，并且不能是部分索引。</p>
                  <p></p>
                  <p class="tablefootnote"><sup class="tablefootnote">脚注2</sup></p><p>虽然全局分区索引可以与底层表进行分区，但Oracle在分区维护操作（如DROP或SPLIT PARTITION）之后不会利用分区或维护均分。</p>
                  <p></p>
               </div>
            </div><a id="VLDBG1262"></a><div class="props_rev_3"><a id="GUID-4FB3C818-D107-491C-955D-1772E2F64A00" name="GUID-4FB3C818-D107-491C-955D-1772E2F64A00"></a><h3 id="VLDBG-GUID-4FB3C818-D107-491C-955D-1772E2F64A00" class="sect3">非前缀索引的重要性</h3>
               <div>
                  <p>非前缀索引很重要，因为它们在历史数据库中特别有用。</p>
                  <p>在包含历史数据的表中，通常在一列上定义索引以支持该列快速访问的要求。但是，索引也可以在另一列（与基础表相同的列）上进行分区，以支持推出旧数据和滚动新数据的时间间隔。</p>
                  <p>考虑按周划分的<code class="codeph">sales</code>表。它包含一年的数据，分为13个分区。它是在<code class="codeph">week_no</code>分区的范围，分区为四周。您可以在<code class="codeph">sales</code>上创建一个非前缀的本地索引<code class="codeph">sales_ix</code> 。<code class="codeph">sales_ix</code>索引在<code class="codeph">acct_no</code>上定义，因为有些查询需要按帐号快速访问数据。但是，它在<code class="codeph">week_no</code>进行分区以匹配<code class="codeph">sales</code>表。每隔四周， <code class="codeph">sales</code>和<code class="codeph">sales_ix</code>的最旧分区将被删除，并添加新的分区。
                  </p>
               </div>
            </div><a id="VLDBG1264"></a><a id="VLDBG1263"></a><div class="props_rev_3"><a id="GUID-A43726D5-300D-4F5E-8FF3-85F057BC4CD3" name="GUID-A43726D5-300D-4F5E-8FF3-85F057BC4CD3"></a><h3 id="VLDBG-GUID-A43726D5-300D-4F5E-8FF3-85F057BC4CD3" class="sect3">前缀和非前缀索引的性能影响</h3>
               <div>
                  <p>前缀和非前缀索引存在性能影响。</p>
                  <p>使用带前缀的索引，获得分区修剪的可能性远高于使用非前缀索引。如果列是索引的一部分，那么您可以假设该列用作过滤谓词，当过滤列是带前缀的列时，这自动意味着某种程度的修剪。这个结果表明，探测前缀索引通常比探测非前缀索引更便宜。如果索引带有前缀（本地或全局）并且Oracle带有涉及索引列的谓词，则分区修剪可以将谓词的应用限制为索引分区的子集。</p>
                  <p>例如，在<a href="index-partitioning.html#GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03__I1008832">图3-4中</a> ，如果谓词是<code class="codeph">deptno=15</code> ，则优化器知道仅将谓词应用于索引的第二个分区。（如果谓词涉及绑定变量，则优化器不确切知道哪个分区，但它可能仍然知道只涉及一个分区，在这种情况下，在运行时，只访问一个索引分区。）
                  </p>
                  <p>当索引是非前缀时，Oracle通常必须将涉及索引列的谓词应用于所有<code class="codeph">N</code>索引分区。这是查找单个键或进行索引范围扫描所必需的。对于范围扫描，Oracle还必须组合来自<code class="codeph">N</code>索引分区的信息。例如，在<a href="index-partitioning.html#GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB__I1008834">图3-5</a>中，本地索引在分区<code class="codeph">chkdate</code>与索引关键字<code class="codeph">acctno</code> 。如果谓词是<code class="codeph">acctno=31</code> ，则Oracle会探测所有12个索引分区。
                  </p>
                  <p>当然，如果分区列上也有谓词，则可能不需要多个索引探测器。Oracle利用以下事实：本地索引与底层表一起使用，以根据分区键修剪分区。例如，如果<a href="index-partitioning.html#GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB__I1008834">图3-5中</a>的谓词是<code class="codeph">chkdate&lt;3/97</code> ，则Oracle只需要探测两个分区。
                  </p>
                  <p>因此，对于非前缀索引，如果分区键是<code class="codeph">WHERE</code>子句的一部分而不是索引键的一部分，则优化器根据基础表分区确定要探测的索引分区。
                  </p>
                  <p>当许多使用本地，非前缀索引的键的查询和DML语句必须探测所有索引分区时，这有效地降低了这些索引提供的分区独立性程度。</p>
                  <div class="tblformal" id="GUID-A43726D5-300D-4F5E-8FF3-85F057BC4CD3__GUID-1E91B2E8-7C72-4C74-B29E-527B388DBD66">
                     <p class="titleintable">表3-2比较前缀本地，非前缀本地和全局索引</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="比较前缀本地，非前缀本地和全局索引" width="100%" border="1" summary="Comparing Prefixed Local, Nonprefixed Local, and Global Indexes" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d13870e1427">指数特征</th>
                              <th align="left" valign="bottom" width="20%" id="d13870e1430">带有前缀的本地</th>
                              <th align="left" valign="bottom" width="20%" id="d13870e1433">非前缀本地</th>
                              <th align="left" valign="bottom" width="39%" id="d13870e1436">全球</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d13870e1441" headers="d13870e1427 ">
                                 <p>独一无二？</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1441 d13870e1430 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1441 d13870e1433 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d13870e1441 d13870e1436 ">
                                 <p>是。如果在分区列以外的列上使用索引，则必须是全局的</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d13870e1454" headers="d13870e1427 ">
                                 <p>可管理性</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1454 d13870e1430 ">
                                 <p>易于管理</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1454 d13870e1433 ">
                                 <p>易于管理</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d13870e1454 d13870e1436 ">
                                 <p>更难管理</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d13870e1467" headers="d13870e1427 ">
                                 <p>OLTP</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1467 d13870e1430 ">
                                 <p>好</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1467 d13870e1433 ">
                                 <p>坏</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d13870e1467 d13870e1436 ">
                                 <p>好</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d13870e1480" headers="d13870e1427 ">
                                 <p>长跑（DSS）</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1480 d13870e1430 ">
                                 <p>好</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1480 d13870e1433 ">
                                 <p>好</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d13870e1480 d13870e1436 ">
                                 <p>不好</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="VLDBG14200"></a><div class="props_rev_3"><a id="GUID-48E980C5-AC1D-4140-AE6A-531BE38108E0" name="GUID-48E980C5-AC1D-4140-AE6A-531BE38108E0"></a><h3 id="VLDBG-GUID-48E980C5-AC1D-4140-AE6A-531BE38108E0" class="sect3">带分区索引的高级索引压缩</h3>
               <div>
                  <p>使用分区索引的高级索引压缩可以降低索引的存储要求。</p>
                  <p>使用高级索引压缩创建索引可减少所有受支持的唯一索引和非唯一索引的大小。高级索引压缩可显着提高压缩率，同时仍可提供对索引的有效访问。高级压缩适用于所有受支持的索引，包括那些不适合前缀压缩的索引。</p>
                  <p>对于分区索引，您可以逐个分区地指定压缩类型。您还可以在索引分区上指定高级索引压缩，即使未压缩父索引也是如此。</p>
                  <p>以下示例显示了分区索引上压缩属性的混合。</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX my_test_idx ON测试（a，b）COMPRESS ADVANCED HIGH LOCAL（分区p1压缩高级，分区p2压缩，分区p3，分区p4 NOCOMPRESS）;</pre><p>以下示例显示了未压缩父索引的分区上的高级索引压缩支持。</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX my_test_idx ON test（a，b）NOCOMPRESS LOCAL（分区p1 COMPRESS ADVANCED LOW，PARTITION p2 COMPRESS ADVANCED HIGH，PARTITION p3）;</pre><div class="infoboxnotealso" id="GUID-48E980C5-AC1D-4140-AE6A-531BE38108E0__ORACLEDATABASEADMINISTRATORSGUIDEFO-0127641A">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../admin/managing-tables.html#ADMIN01507" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> ，了解有关高级索引压缩的信息</p>
                  </div>
               </div>
            </div><a id="VLDBG1265"></a><div class="props_rev_3"><a id="GUID-359C0752-D50C-4A93-9D6E-C1B67E81625D" name="GUID-359C0752-D50C-4A93-9D6E-C1B67E81625D"></a><h3 id="VLDBG-GUID-359C0752-D50C-4A93-9D6E-C1B67E81625D" class="sect3">分区索引指南</h3>
               <div>
                  <p>分区索引有几个准则。</p>
                  <p>在决定如何对表上的索引进行分区时，请考虑必须访问该表的应用程序组合。在性能，可用性和可管理性之间进行权衡。以下是您应该考虑的一些指导原则：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于OLTP应用程序：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>全局索引和本地前缀索引提供比本地非前缀索引更好的性能，因为它们最小化索引分区探测器的数量。</p>
                           </li>
                           <li>
                              <p>当表上有分区或子分区维护操作时，本地索引支持更多可用性。本地非前缀索引对历史数据库非常有用。</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>对于DSS应用程序，本地非前缀索引可以提高性能，因为可以通过索引键上的范围查询并行扫描许多索引分区。</p>
                        <p>例如，在<a href="index-partitioning.html#GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB__I1008834">图3-5</a>的表<code class="codeph">checks</code>中使用谓词“ <code class="codeph">acctno</code>在40和45之间”的查询导致对非前缀索引<code class="codeph">ix3</code>的所有分区进行并行扫描。另一方面，使用<a href="index-partitioning.html#GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03__I1008832">图3-4</a>的表<code class="codeph">deptno</code>上的谓词<code class="codeph">deptno BETWEEN 40 AND 45</code>的查询不能并行化，因为它访问前缀索引<code class="codeph">ix1</code>的单个分区。
                        </p>
                     </li>
                     <li>
                        <p>对于历史表，如果可能，索引应该是本地的。这限制了定期调度的分区操作的影响。</p>
                     </li>
                     <li>
                        <p>除分区列之外的列上的唯一索引必须是全局的，因为不支持其键不包含分区键的唯一本地非前缀索引。</p>
                     </li>
                     <li>
                        <p>不可用的索引不占用空间。</p>
                        <div class="infoboxnotealso" id="GUID-359C0752-D50C-4A93-9D6E-C1B67E81625D__GUID-833A32CF-1501-4090-B4D8-BB02342F088F">
                           <p class="notep1">也可以看看：</p>
                           <p>有关管理表的准则的信息，请参见<a href="../admin/managing-tables.html#ADMIN01502" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                        </div>
                     </li>
                  </ul>
               </div>
            </div><a id="VLDBG1266"></a><div class="props_rev_3"><a id="GUID-40947B49-166F-4377-938F-FED6ECBA6383" name="GUID-40947B49-166F-4377-938F-FED6ECBA6383"></a><h3 id="VLDBG-GUID-40947B49-166F-4377-938F-FED6ECBA6383" class="sect3">索引分区的物理属性</h3>
               <div>
                  <p>本主题描述了索引分区的物理属性。</p>
                  <p>当<code class="codeph">CREATE</code> <code class="codeph">INDEX</code>语句创建分区索引时，最初指定默认物理属性。由于没有与分区索引本身对应的段，因此这些属性仅用于派生成员分区的物理属性。稍后可以使用<code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">MODIFY</code> <code class="codeph">DEFAULT</code> <code class="codeph">ATTRIBUTES</code>修改默认物理属性。</p>
                  <p><code class="codeph">CREATE</code> <code class="codeph">INDEX</code>创建的分区的物理属性确定如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>只要未指定相应分区属性的值，就会使用为索引指定（显式或默认）的物理属性值。处理<code class="codeph">LOCAL</code>索引的分区的<code class="codeph">TABLESPACE</code>属性构成了该规则的一个重要例外，因为没有用户指定的<code class="codeph">TABLESPACE</code>值（在分区和索引级别），基础表的相应分区的物理属性的值用来。
                        </p>
                     </li>
                     <li>
                        <p>在处理<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <code class="codeph">ADD</code> <code class="codeph">PARTITION</code>期间创建的本地索引的分区的物理属性（ <code class="codeph">TABLESPACE</code> ，除了<code class="codeph">TABLESPACE</code> ）被设置为每个索引的默认物理属性。
                        </p>
                     </li>
                  </ul>
                  <p>由<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <code class="codeph">SPLIT</code> <code class="codeph">PARTITION</code>创建的索引分区的物理属性（除了<code class="codeph">TABLESPACE</code> ）确定如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用分割的索引分区的物理属性的值。</p>
                     </li>
                  </ul>
                  <p>可以通过<code class="codeph">ALTER</code> <code class="codeph">INDEX MODIFY</code> <code class="codeph">PARTITION</code>和<code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">REBUILD</code> <code class="codeph">PARTITION</code>修改现有索引分区的物理属性。产生的属性确定如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>只要未指定新值，就会使用在发出语句之前分区的物理属性值。<code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">REBUILD PARTITION</code> SQL语句可以更改分区所在的表空间。
                        </p>
                     </li>
                  </ul>
                  <p>由<code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">SPLIT PARTITION</code>创建的全局索引分区的物理属性确定如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>只要未指定新值，就会使用正在拆分的分区的物理属性值。</p>
                     </li>
                     <li>
                        <p>（连同默认值）的索引的所有分区的物理属性可以由被修改<code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ，例如， <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">indexname</code> <code class="codeph">NOLOGGING</code>改变的所有分区的记录模式<code class="codeph">indexname</code>到<code class="codeph">NOLOGGING</code> 。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-40947B49-166F-4377-938F-FED6ECBA6383__GUID-1B32CE15-0A45-4F08-8F19-0D392D472323">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="partition-admin.html#GUID-F2C99CFA-1090-4A62-B452-D4E116A40A34" title="使用分区表和索引时，分区管理是一项重要任务。">分区管理</a>有关添加分区和重建索引示例的更详细示例</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
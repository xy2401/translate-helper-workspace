<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>为DRDA配置Oracle数据库网关</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Installation and Configuration Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Installation and Configuration Guide for IBM AIX on POWER Systems (64-Bit), Linux x86-64, Oracle Solaris on SPARC (64-Bit), Oracle Solaris on x86-64 (64-Bit), and HP-UX Itanium"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-installation-and-configuration-guide-aix-5l-based-systems-64-bit-hp-ux-itanium-solaris-operating-system-sparc-64-bit-linux-x86-and-linux-x86-64.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T19:11:50-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18243-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="config-drda-server.html" title="Previous" type="text/html"></link>
      <link rel="next" href="drda-gateway-security-consideration.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway Installation and Configuration Guide for AIX 5L Based Systems (64-Bit), HP-UX Itanium, Solaris Operating System (SPARC 64-Bit), Linux x86, and Linux x86-64"></meta>
    <meta name="dcterms.isVersionOf" content="OTGIS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="config-drda-server.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="drda-gateway-security-consideration.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安装和配置指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-drda-gateway.html" property="item" typeof="WebPage"><span property="name">为DRDA安装和配置Oracle数据库网关</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">为DRDA配置Oracle数据库网关</li>
            </ol>
            <a id="GUID-ACFC0477-3122-4423-8845-5DC257F7636D" name="GUID-ACFC0477-3122-4423-8845-5DC257F7636D"></a><a id="OTGIS140"></a>
            
            <h2 id="OTGIS-GUID-ACFC0477-3122-4423-8845-5DC257F7636D" class="sect2"><span class="enumeration_chapter">14</span>为DRDA配置Oracle数据库网关</h2>
         </header>
         <div class="ind">
            <div>
               <p>安装网关后，执行以下任务为DRDA配置Oracle数据库网关：</p>
               <ol>
                  <li>
                     <p><a href="config-drda-gateway.html#GUID-71F1CC41-4ED1-4762-AF52-EA31D732D735">配置网关初始化参数文件</a></p>
                  </li>
                  <li>
                     <p><a href="config-drda-gateway.html#GUID-C264695C-3A10-42E6-9295-85AC7AF86803">为网关配置Oracle Net</a></p>
                  </li>
                  <li>
                     <p><a href="config-drda-gateway.html#GUID-68076A11-7808-46B9-B31F-88FBA31D3263">配置两阶段提交</a></p>
                  </li>
                  <li>
                     <p><a href="config-drda-gateway.html#GUID-2E3C6894-FDFC-48D9-B425-C62FBA3510A5">为数据字典支持创建表和视图</a></p>
                  </li>
                  <li>
                     <p><a href="config-drda-gateway.html#GUID-B51F5834-717F-4260-B3DB-9CC9DBA83F4D">配置Oracle数据库以进行网关访问</a></p>
                  </li>
                  <li>
                     <p><a href="config-drda-gateway.html#GUID-28055BC7-5509-4E92-8442-810DA43B4848">创建数据库链接</a></p>
                  </li>
                  <li>
                     <p><a href="config-drda-gateway.html#GUID-30001CB2-F707-475E-97EC-874B8E02061C">配置网关以访问多个DRDA数据库</a></p>
                  </li>
               </ol>
               <p>提供SQL脚本以执行诸如创建<code class="codeph">HS_TRANSACTION_LOG</code>表，删除过时的表和视图以及创建要提供的表和视图等步骤<a id="d37763e73" class="indexterm-anchor"></a>数据字典支持。
               </p>
               <p>必须使用数据库本机工具（例如，）在DRDA服务器平台上运行这些脚本<a id="d37763e80" class="indexterm-anchor"></a> DB2 UDB for z / OS上的SPUFI），因为没有为网关提供执行这些脚本的工具。请注意，运行这些脚本时，必须对使用的用户ID进行适当授权。
               </p>
               <p>SQL脚本位于<code class="codeph">dg4db2/admin</code>目录中。通过在其文件名中具有DB2平台标识符（例如：“zos”，“as400”和“luw”）和版本特定数字（例如：vw7，vw8）来指定适当的平台脚本。
               </p>
            </div><a id="OTGIS1074"></a><div class="props_rev_3"><a id="GUID-71F1CC41-4ED1-4762-AF52-EA31D732D735" name="GUID-71F1CC41-4ED1-4762-AF52-EA31D732D735"></a><h3 id="OTGIS-GUID-71F1CC41-4ED1-4762-AF52-EA31D732D735" class="sect3">配置网关初始化参数文件</h3>
               <div>
                  <div class="section">
                     <p>执行以下任务以配置网关初始化参数文件：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="config-drda-gateway.html#GUID-BE8E3E21-2B82-430A-A796-88CB305A4D59">选择网关的系统标识符</a></span></li>
                     <li><span><a href="config-drda-gateway.html#GUID-9C9C23D7-A1A7-4BB8-8C64-40EAEADC437E">自定义初始化参数文件</a></span></li>
                  </ol>
               </div><a id="OTGIS1075"></a><div class="props_rev_3"><a id="GUID-BE8E3E21-2B82-430A-A796-88CB305A4D59" name="GUID-BE8E3E21-2B82-430A-A796-88CB305A4D59"></a><h4 id="OTGIS-GUID-BE8E3E21-2B82-430A-A796-88CB305A4D59" class="sect4">选择网关的系统标识符</h4>
                  <div>
                     <p>网关系统标识符（SID）是标识网关实例的字母数字字符串。对于要访问的每个DRDA数据库，您需要一个网关实例，因此需要一个网关SID。但是，如果要访问两个DRDA数据库，则需要两个网关SID，一个用于网关的每个实例。如果您有一个DRDA数据库并且希望有时使用一组网关参数设置来访问它，而有时使用不同的网关参数设置来访问它，则可以通过为单个DRDA数据库提供多个网关SID来实现。SID用作初始化参数文件的文件名的一部分。</p>
                  </div>
               </div><a id="OTGIS1076"></a><div class="props_rev_3"><a id="GUID-9C9C23D7-A1A7-4BB8-8C64-40EAEADC437E" name="GUID-9C9C23D7-A1A7-4BB8-8C64-40EAEADC437E"></a><h4 id="OTGIS-GUID-9C9C23D7-A1A7-4BB8-8C64-40EAEADC437E" class="sect4">自定义初始化参数文件</h4>
                  <div>
                     <p><a id="d37763e201" class="indexterm-anchor"></a>根据需要使用其他参数定制参数文件。请参阅<a href="initialization-parameters-for-gateways.html#GUID-82BEBA7B-5B1A-46F6-9ADC-7375C17A9E1F">初始化参数</a>支持的初始化参数列表。有关定制参数文件的安全性方面，请参阅<a href="drda-gateway-security-consideration.html#GUID-19E4856D-3FD0-4C5F-8A21-B81038C87D59">安全注意事项</a> 。
                     </p>
                  </div>
               </div>
            </div><a id="OTGIS1077"></a><div class="props_rev_3"><a id="GUID-C264695C-3A10-42E6-9295-85AC7AF86803" name="GUID-C264695C-3A10-42E6-9295-85AC7AF86803"></a><h3 id="OTGIS-GUID-C264695C-3A10-42E6-9295-85AC7AF86803" class="sect3">为网关配置Oracle Net</h3>
               <div>
                  <div class="section">
                     <p>网关要求Oracle Net与Oracle数据库通信。配置网关后，执行以下任务以配置Oracle Net以使用网关：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="config-drda-gateway.html#GUID-2129F858-357C-4A4D-9801-F5994066CAEC">为网关配置Oracle Net Listener</a></span></li>
                     <li><span><a href="config-drda-gateway.html#GUID-0FEEDD7A-6F73-47BF-8965-B5070D6AC4C1">停止并启动Gateway的Oracle Net Listener</a></span></li>
                  </ol>
               </div><a id="OTGIS1078"></a><div class="props_rev_3"><a id="GUID-2129F858-357C-4A4D-9801-F5994066CAEC" name="GUID-2129F858-357C-4A4D-9801-F5994066CAEC"></a><h4 id="OTGIS-GUID-2129F858-357C-4A4D-9801-F5994066CAEC" class="sect4">为网关配置Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p>Oracle Net Listener侦听来自Oracle数据库的传入请求。要使Oracle Net Listener监听网关，必须将有关网关的信息添加到Oracle Net Listener配置文件<code class="codeph">listener.ora</code> 。默认情况下，此文件位于<code class="codeph">$ORACLE_HOME/network/admin</code> ，其中<code class="codeph">$ORACLE_HOME</code>是安装网关的目录。
                        </p>
                        <p>必须将以下条目添加到<code class="codeph">listener.ora</code>文件中：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Oracle Net Listener侦听的Oracle Net地址列表</p>
                           </li>
                           <li>
                              <p>Oracle Net Listener响应传入连接请求而启动的网关的可执行文件名</p>
                           </li>
                        </ul>
                        <p><code class="codeph">$ORACLE_HOME/dg4db2/admin</code>目录中提供了<code class="codeph">listener.ora</code>条目（ <code class="codeph">listener.ora.sample</code> ）的示例，其中<code class="codeph">$</code> <code class="codeph">ORACLE_HOME</code>是安装网关的目录。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="OTGIS1079"></a><div class="props_rev_3"><a id="GUID-EBD1D2CB-679D-4B15-AC87-D34F5BEF7C7E" name="GUID-EBD1D2CB-679D-4B15-AC87-D34F5BEF7C7E"></a><h5 id="OTGIS-GUID-EBD1D2CB-679D-4B15-AC87-D34F5BEF7C7E" class="sect5">listener.ora文件条目的语法</h5>
                     <div>
                        <p>Oracle数据库使用Oracle Net和任何支持的协议适配器与网关通信。Oracle Net Listener使用TCP / IP协议适配器侦听的地址语法如下：</p><pre class="oac_no_warn" dir="ltr">LISTENER =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name</span> ）（PORT = <span class="italic">port_number</span> ））</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-EBD1D2CB-679D-4B15-AC87-D34F5BEF7C7E__GUID-66C0076A-F49E-442D-A521-8F09BF66E4A9">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d37763e391">变量</th>
                                    <th align="left" valign="bottom" width="75%" id="d37763e394">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d37763e399" headers="d37763e391 ">
                                       <p><span class="italic"><code class="codeph">主机名</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d37763e399 d37763e394 ">
                                       <p>是安装网关的计算机的名称。此版本支持IPv6格式。有关详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=NETRF008" target="_blank"><span class="italic">Oracle Database Net Services Reference</span></a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d37763e413" headers="d37763e391 ">
                                       <p><span class="italic"><code class="codeph">端口号</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d37763e413 d37763e394 ">
                                       <p>指定Oracle Net Listener使用的端口号。如果在同一台机器上运行其他侦听器，则<span class="italic">port_number</span>的值必须与其他侦听器的端口号不同。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>要指示Oracle Net Listener启动网关以响应传入的连接请求，请在<code class="codeph">listener.ora</code>文件中添加一个条目。
                        </p>
                        <div class="infoboxnote" id="GUID-EBD1D2CB-679D-4B15-AC87-D34F5BEF7C7E__GUID-511D388D-8221-453A-BCB3-E63C5D95E941">
                           <p class="notep1">注意：</p>
                           <p>您必须在<code class="codeph">listener.ora</code>文件和将在下一步中配置的<code class="codeph">tnsnames.ora</code>文件中使用相同的SID值。
                           </p>
                        </div><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4db2）））</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-EBD1D2CB-679D-4B15-AC87-D34F5BEF7C7E__GUID-DE84BEF2-A8C0-406A-BD9F-3B1BCCD9E524">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d37763e456">变量</th>
                                    <th align="left" valign="bottom" width="75%" id="d37763e459">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d37763e464" headers="d37763e456 ">
                                       <p><span class="italic"><code class="codeph">gateway_sid</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d37763e464 d37763e459 ">
                                       <p>指定网关的SID，并匹配<code class="codeph">tnsnames.ora</code>文件中连接描述符条目中指定的网关SID。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d37763e476" headers="d37763e456 ">
                                       <p><span class="italic"><code class="codeph">oracle_home_directory</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d37763e476 d37763e459 ">
                                       <p>指定网关所在的Oracle主目录。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d37763e485" headers="d37763e456 ">
                                       <p><code class="codeph">dg4db2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d37763e485 d37763e459 ">
                                       <p>指定DRDA的Oracle数据库网关的可执行文件名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>如果您已在运行侦听多个数据库SID的Oracle Net Listener，请在现有<code class="codeph">listener.ora</code>文件中仅将以下语法添加到<code class="codeph">SID_LIST</code> ：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =。。）（SID_DESC =。。）（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4db2）））</pre><div class="infoboxnotealso" id="GUID-EBD1D2CB-679D-4B15-AC87-D34F5BEF7C7E__GUID-C875D750-616C-41D3-8C21-EC3094D8F0BE">
                           <p class="notep1">也可以看看：</p>
                           <p>有关更改<code class="codeph">listener.ora</code>文件的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=NETAG294" target="_blank"><span class="italic">Oracle数据库网络服务管理员指南”</span></a> 。
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="OTGIS1239"></a><a id="OTGIS1080"></a><div class="props_rev_3"><a id="GUID-0FEEDD7A-6F73-47BF-8965-B5070D6AC4C1" name="GUID-0FEEDD7A-6F73-47BF-8965-B5070D6AC4C1"></a><h4 id="OTGIS-GUID-0FEEDD7A-6F73-47BF-8965-B5070D6AC4C1" class="sect4">停止并启动Gateway的Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p>您必须停止并重新启动Oracle Net Listener才能启动新设置，如下所示：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>将<code class="codeph">PATH</code>环境变量设置为<code class="codeph">$ORACLE_HOME/bin</code> ，其中<code class="codeph">$ORACLE_HOME</code>是安装网关的目录。如果您有Bourne或Korn Shell，请输入以下内容：</span><div><pre class="oac_no_warn" dir="ltr">$ PATH = $ ORACLE_HOME / bin：$ PATH; export PATH $ LD_LIBRARY_PATH = $ ORACLE_HOME / lib：$ LD_LIBRARY_PATH; export LD_LIBRARY_PATH</pre><p>如果您有C Shell，请输入以下内容：</p><pre class="oac_no_warn" dir="ltr">$ setenv PATH $ ORACLE_HOME / bin：$ PATH $ setenv LD_LIBRARY_PATH $ ORACLE_HOME / lib：$ LD_LIBRARY_PATH</pre><p><a href="config-drda-gateway.html#GUID-0FEEDD7A-6F73-47BF-8965-B5070D6AC4C1__BIHEEFHE" title="摘要">表14-1</a>指定了用于不同平台的参数值：</p>
                              <div class="tblformal" id="GUID-0FEEDD7A-6F73-47BF-8965-B5070D6AC4C1__BIHEEFHE">
                                 <p class="titleintable">表14-1基于UNIX的平台的DRDA参数值的Oracle数据库网关</p>
                                 <table cellpadding="4" cellspacing="0" class="Formal" title="适用于基于UNIX的平台的DRDA参数值的Oracle数据库网关" width="90%" border="1" summary="summary" frame="hsides" rules="rows">
                                    <thead>
                                       <tr align="left" valign="top">
                                          <th align="left" valign="bottom" width="39%" id="d37763e591">平台</th>
                                          <th align="left" valign="bottom" width="61%" id="d37763e594">参数值</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="39%" id="d37763e599" headers="d37763e591 ">
                                             <p>Oracle Solaris（SPARC）64位和x86-64（64位）上的Oracle Solaris</p>
                                          </td>
                                          <td align="left" valign="top" width="61%" headers="d37763e599 d37763e594 ">
                                             <p><code class="codeph">LD_LIBRARY_PATH_64 = $ ORACLE_HOME / lib目录</code></p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="39%" id="d37763e607" headers="d37763e591 ">
                                             <p>HP-UX Itanium</p>
                                          </td>
                                          <td align="left" valign="top" width="61%" headers="d37763e607 d37763e594 ">
                                             <p><code class="codeph">LD_LIBRARY_PATH = $ ORACLE_HOME / lib目录</code></p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="39%" id="d37763e615" headers="d37763e591 ">
                                             <p>Linux x86 64位</p>
                                          </td>
                                          <td align="left" valign="top" width="61%" headers="d37763e615 d37763e594 ">
                                             <p><code class="codeph">LD_LIBRARY_PATH = $ ORACLE_HOME / lib目录</code></p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="39%" id="d37763e623" headers="d37763e591 ">
                                             <p>POWER Systems上的IBM AIX（64位）</p>
                                          </td>
                                          <td align="left" valign="top" width="61%" headers="d37763e623 d37763e594 ">
                                             <p><code class="codeph">LIBPATH = $ ORACLE_HOME / lib目录</code></p>
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                              <!-- class="inftblhruleinformal" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果侦听器已在运行，请使用<code class="codeph">lsnrctl</code>命令停止侦听器，然后使用新设置启动它，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">$ lsnrctl停止$ lsnrctl start</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用新设置检查侦听器的状态，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">$ lsnrctl状态</pre><p>以下是<code class="codeph">lsnrctl</code>状态检查的部分输出：</p>
                           </div>
                        </li>
                     </ol>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">。。。听力端点摘要......（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（HOST = 204.179.99.15）（PORT = 1551）））服务摘要......服务“dg4db2”有1个实例。实例“dg4db2”，状态为UNKNOWN，有1个此服务的处理程序...命令成功完成</pre><p>在此示例中，服务名称为<code class="codeph">dg4db2</code> ，这是安装期间分配的默认SID值。
                        </p>
                        <div class="infoboxnote" id="GUID-0FEEDD7A-6F73-47BF-8965-B5070D6AC4C1__GUID-40E2628D-C0DA-45F8-9891-98CC4FC3D552">
                           <p class="notep1">注意：</p>
                           <p>您必须在<code class="codeph">tnsnames.ora</code>文件和<code class="codeph">listener.ora</code>文件中使用相同的SID值。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OTGIS1081"></a><div class="props_rev_3"><a id="GUID-68076A11-7808-46B9-B31F-88FBA31D3263" name="GUID-68076A11-7808-46B9-B31F-88FBA31D3263"></a><h3 id="OTGIS-GUID-68076A11-7808-46B9-B31F-88FBA31D3263" class="sect3">配置两阶段提交</h3>
               <div>
                  <div class="section">
                     <p>支持两阶段提交需要在DB2服务器上运行<code class="codeph">$ORACLE_HOME/dg4db2/admin/dg4db2_tx.sql</code>脚本。此脚本将创建网关用于两阶段提交的对象。编辑脚本并使用为<code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code>初始化参数指定的帐户名替换默认的恢复帐户架构（ <code class="codeph">RECOVER</code> ）。有关更多详细信息，请参阅<a href="initialization-parameters-for-gateways.html#GUID-82BEBA7B-5B1A-46F6-9ADC-7375C17A9E1F">初始化参数</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OTGIS1085"></a><div class="props_rev_3"><a id="GUID-2E3C6894-FDFC-48D9-B425-C62FBA3510A5" name="GUID-2E3C6894-FDFC-48D9-B425-C62FBA3510A5"></a><h3 id="OTGIS-GUID-2E3C6894-FDFC-48D9-B425-C62FBA3510A5" class="sect3">为数据字典支持创建表和视图</h3>
               <div>
                  <div class="section">
                     <p>要启用数据字典转换支持，必须在要通过网关访问的每个非Oracle系统上创建数据字典表和视图。</p>
                     <p>执行以下步骤以使用数据库本机工具创建数据字典表和视图：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>从以前的网关版本升级</span><div>
                           <p>如果要从以前版本的网关升级，请运行相应的脚本以删除旧的数据字典定义。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果连接到DB2 UDB for Linux，Unix和Windows，则运行</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_luw_drop.sql</pre></li>
                              <li>
                                 <p>如果连接到DB2 UDB for z / OS，则运行</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_zos_drop.sql</pre></li>
                              <li>
                                 <p>如果连接到DB2 UDB for iSeries，则运行</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_as400_drop.sql</pre></li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>创建数据字典表</span><div>
                           <p>运行相应的脚本以创建数据字典表。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果连接到DB2 UDB for Linux，Unix和Windows，则运行</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_luw_tab.sql</pre></li>
                              <li>
                                 <p>如果连接到DB2 UDB for z / OS，则运行</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_zos_tab.sql</pre></li>
                              <li>
                                 <p>如果连接到DB2 UDB for iSeries，则运行</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_as400_tab.sql</pre></li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>创建数据字典视图</span><div>
                           <p>运行相应的脚本以创建数据字典视图。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果连接到DB2 UDB for Linux，Unix和Windows，则运行</p>
                                 <p>对于DB2 UDB for Linux，Unix和Windows V7：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_luw_vw7.sql</pre><p>对于DB2 UDB for Linux，Unix和Windows V8和V9：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_luw_vw8.sql</pre></li>
                              <li>
                                 <p>如果连接到DB2 UDB for z / OS，则运行</p>
                                 <p>对于DB2 UDB for z / OS V7（RACF安全性）：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_zos_vw7r.sql</pre><p>对于DB2 UDB for z / OS V7（DB2安全性）：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_zos_vw7s.sql</pre><p>对于DB2 UDB for z / OS V8和V9（RACF安全性）：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_zos_vw8r.sql</pre><p>对于DB2 UDB for z / OS V8和V9（DB2安全性）：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_zos_vw8s.sql</pre></li>
                              <li>
                                 <p>如果连接到DB2 UDB for iSeries，则运行</p>
                                 <p>对于DB2 UDB for iSeries V5.1：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_as400_vw51.sql</pre><p>对于DB2 UDB for iSeries V5.2：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_as400_vw52.sql</pre><p>对于DB2 UDB iSeries V5.3或更高版本：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / dg4db2 /管理/ dg4db2_as400_vw53.sql</pre></li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="OTGIS1087"></a><div class="props_rev_3"><a id="GUID-B51F5834-717F-4260-B3DB-9CC9DBA83F4D" name="GUID-B51F5834-717F-4260-B3DB-9CC9DBA83F4D"></a><h3 id="OTGIS-GUID-B51F5834-717F-4260-B3DB-9CC9DBA83F4D" class="sect3">配置Oracle数据库以进行网关访问</h3>
               <div>
                  <div class="section">
                     <p>在使用网关访问DB2数据之前，必须配置Oracle数据库以启用与Oracle Net上的网关通信。</p>
                     <p>要配置Oracle数据库，必须将连接描述符添加到<code class="codeph">tnsnames.ora</code>文件中。默认情况下，此文件位于<code class="codeph">$ORACLE_HOME/network/admin</code> ，其中<code class="codeph">$ORACLE_HOME</code>是安装Oracle数据库的目录。您无法使用Oracle Net Assistant或Oracle Net Easy Config工具来配置<code class="codeph">tnsnames.ora</code>文件。您必须手动编辑该文件。
                     </p>
                     <p><code class="codeph">$ORACLE_HOME/dg4db2/admin</code>目录中提供了<code class="codeph">tnsnames.ora</code>条目（ <code class="codeph">tnsnames.ora.sample</code> ）的示例，其中<code class="codeph">$</code> <code class="codeph">ORACLE_HOME</code>是安装网关的目录。
                     </p>
                     <div class="infoboxnotealso" id="GUID-B51F5834-717F-4260-B3DB-9CC9DBA83F4D__GUID-C97D66B8-189F-44AB-9DC3-D31298A3EF64">
                        <p class="notep1">也可以看看：</p>
                        <p>有关编辑<code class="codeph">tnsnames.ora</code>文件的信息，请<code class="codeph">tnsnames.ora</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=NETAG256" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="OTGIS1088"></a><div class="props_rev_3"><a id="GUID-0F0E295E-B0ED-4B9C-9746-227D7B1F8C9A" name="GUID-0F0E295E-B0ED-4B9C-9746-227D7B1F8C9A"></a><h4 id="OTGIS-GUID-0F0E295E-B0ED-4B9C-9746-227D7B1F8C9A" class="sect4">配置tnsnames.ora</h4>
                  <div>
                     <div class="section">
                        <p>编辑<code class="codeph">tnsnames.ora</code>文件以添加网关的连接描述符。以下是使用TCP / IP协议的Oracle Net条目的语法：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">connect_descriptor</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name</span> ）（PORT = <span class="italic">port_number</span> ））（CONNECT_DATA =（SID = <span class="italic">gateway_sid</span> ））（HS = OK））</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-0F0E295E-B0ED-4B9C-9746-227D7B1F8C9A__GUID-5A03E32F-8ED6-4882-AD49-3B64C669576D">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d37763e993">变量</th>
                                    <th align="left" valign="bottom" width="75%" id="d37763e996">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d37763e1001" headers="d37763e993 ">
                                       <p><span class="italic"><code class="codeph">connect_descriptor</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d37763e1001 d37763e996 ">
                                       <p>是在创建数据库链接时指定的要连接的对象的描述，例如<code class="codeph">dg4db2</code> 。
                                       </p>
                                       <p>检查sqlnet.ora <span class="bold"> </span>用于以下参数设置的文件：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">names.directory_path =（TNSNAMES）</code></p>
                                          </li>
                                       </ul>
                                       <p><span class="bold">注意</span> ：sqlnet.ora文件通常存储在<code class="codeph">$ORACLE_HOME/network/admin</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d37763e1030" headers="d37763e993 ">
                                       <p><code class="codeph">TCP</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d37763e1030 d37763e996 ">
                                       <p>是用于TCP / IP连接的TCP协议。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d37763e1038" headers="d37763e993 ">
                                       <p><span class="italic"><code class="codeph">主机名</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d37763e1038 d37763e996 ">
                                       <p>指定运行网关的计算机。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d37763e1047" headers="d37763e993 ">
                                       <p><span class="italic"><code class="codeph">端口号</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d37763e1047 d37763e996 ">
                                       <p>匹配正在侦听网关的Oracle Net Listener使用的端口号。Oracle Net Listener的端口号可以在Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到。请参阅<a href="config-drda-gateway.html#GUID-EBD1D2CB-679D-4B15-AC87-D34F5BEF7C7E">listener.ora文件条目的语法</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d37763e1063" headers="d37763e993 ">
                                       <p><span class="italic"><code class="codeph">gateway_sid</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d37763e1063 d37763e996 ">
                                       <p>指定网关的SID，并匹配正在侦听网关的Oracle Net Listener的<code class="codeph">listener.ora</code>文件中指定的SID。有关更多信息，请参阅<a href="config-drda-gateway.html#GUID-2129F858-357C-4A4D-9801-F5994066CAEC">为网关配置Oracle Net Listener</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d37763e1079" headers="d37763e993 ">
                                       <p><code class="codeph">（HS = OK）</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d37763e1079 d37763e996 ">
                                       <p>指定此连接描述符连接到非Oracle系统。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1282"></a><div class="props_rev_3"><a id="GUID-281D0203-DD47-471A-9107-4CD86A4773AA" name="GUID-281D0203-DD47-471A-9107-4CD86A4773AA"></a><h4 id="OTGIS-GUID-281D0203-DD47-471A-9107-4CD86A4773AA" class="sect4">为多个侦听器配置tnsnames.ora</h4>
                  <div>
                     <div class="section">
                        <p>要确保更高的可用性，您可以指定多个<a id="d37763e1133" class="indexterm-anchor"></a> connect de scriptor中的监听器。
                        </p><pre class="oac_no_warn" dir="ltr"> <a id="d37763e1141" class="indexterm-anchor"></a> <span class="italic">connect_descriptor</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name_1</span> ）（PORT = <span class="italic">port_number_1</span> ））（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name_2</span> ）（PORT = <span class="italic">port_number_2</span> ））（CONNECT_DATA =（SID = <span class="italic">gateway_sid</span> ））（HS = OK））</pre><p>这表明，如果<span class="italic"><code class="codeph">host_name_1</code></span>和<span class="italic"><code class="codeph">port_number_1</code></span>的侦听器不可用，则<span class="italic"><code class="codeph">host_name_2</code></span>和<span class="italic"><code class="codeph">port_number_2</code></span>的第二个侦听器将接管。
                        </p>
                        <div class="infoboxnotealso" id="GUID-281D0203-DD47-471A-9107-4CD86A4773AA__GUID-DAF7EA8E-A81D-4150-8FAD-2F81BACDE235">
                           <p class="notep1">也可以看看：</p>
                           <p>有关编辑<code class="codeph">tnsnames.ora</code>文件的信息，请<code class="codeph">tnsnames.ora</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=NETAG256" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OTGIS1089"></a><div class="props_rev_3"><a id="GUID-28055BC7-5509-4E92-8442-810DA43B4848" name="GUID-28055BC7-5509-4E92-8442-810DA43B4848"></a><h3 id="OTGIS-GUID-28055BC7-5509-4E92-8442-810DA43B4848" class="sect3">创建数据库链接</h3>
               <div>
                  <div class="section">
                     <p>连接到Oracle数据库的任何Oracle客户端都可以通过网关访问DB2数据。Oracle客户端和Oracle数据库可以驻留在不同的计算机上。网关仅接受来自Oracle数据库的连接。</p>
                     <p>首次在Oracle会话中使用时，通过数据库链接建立与网关的连接。在此上下文中，连接是指Oracle数据库与网关之间的连接。在Oracle会话结束之前，连接将保持建立状态。另一个会话或用户可以访问相同的数据库链接，并获得与网关和DRDA数据库的不同连接。</p>
                     <p>数据库链接在网关会话期间处于活动状态。如果要在会话期间关闭数据库链接，可以使用<code class="codeph">ALTER SESSION</code>语句执行此操作。
                     </p>
                     <p>要访问DRDA服务器，您必须创建数据库链接。公共数据库链接是最常见的数据库链接。</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK <span class="italic">dblink</span> CONNECT TO 2“ <span class="italic">user”</span> IDENTIFIED BY <span class="italic">“password”</span> <span class="italic">USING'tns_name_entry</span> ';</pre><p>哪里：</p>
                     <div class="tblformal" id="GUID-28055BC7-5509-4E92-8442-810DA43B4848__GUID-BB7467AE-B377-44C0-9502-3AF37BCCE2C2">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d37763e1266">变量</th>
                                 <th align="left" valign="bottom" width="75%" id="d37763e1269">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d37763e1274" headers="d37763e1266 ">
                                    <p><span class="italic"><code class="codeph">DBLINK</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d37763e1274 d37763e1269 ">
                                    <p>是完整的数据库链接名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d37763e1283" headers="d37763e1266 ">
                                    <p><span class="italic"><code class="codeph">tns_name_entry</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d37763e1283 d37763e1269 ">
                                    <p>指定<code class="codeph">tnsnames.ora</code>文件中指定的标识网关的Oracle Net连接描述符</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>创建数据库链接后，您可以验证与DRDA数据库的连接，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM DUAL @dblink;</pre><div class="infoboxnotealso" id="GUID-28055BC7-5509-4E92-8442-810DA43B4848__GUID-62EDDED9-1BF9-41F5-B181-C23769D510B8">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用数据库链接的详细信息，请<a href="../admin/distributed-database-concepts.html#ADMIN12083" target="_blank"><span><cite>参见Oracle数据库管理员指南</cite></span></a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OTGIS1090"></a><div class="props_rev_3"><a id="GUID-30001CB2-F707-475E-97EC-874B8E02061C" name="GUID-30001CB2-F707-475E-97EC-874B8E02061C"></a><h3 id="OTGIS-GUID-30001CB2-F707-475E-97EC-874B8E02061C" class="sect3">配置网关以访问多个DRDA数据库</h3>
               <div>
                  <p>配置网关以访问多个DRDA数据库的任务类似于为单个数据库配置网关的任务。配置示例假定以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用默认SID <code class="codeph">dg4db2</code>安装和配置网关</p>
                     </li>
                     <li>
                        <p><code class="codeph">ORACLE_HOME</code>环境变量设置为安装网关的目录</p>
                     </li>
                     <li>
                        <p>为一个名为<code class="codeph">db1</code> DRDA数据库配置网关</p>
                     </li>
                     <li>
                        <p>正在添加具有IP地址204.179.79.15的主机上名为<code class="codeph">db2</code>和<code class="codeph">db3</code>两个DRDA数据库</p>
                     </li>
                  </ul>
               </div><a id="OTGIS1240"></a><a id="OTGIS1241"></a><a id="OTGIS1091"></a><div class="props_rev_3"><a id="GUID-B9691DE9-84AE-47B8-B744-EF0DC600ECE1" name="GUID-B9691DE9-84AE-47B8-B744-EF0DC600ECE1"></a><h4 id="OTGIS-GUID-B9691DE9-84AE-47B8-B744-EF0DC600ECE1" class="sect4">多个DRDA数据库示例：配置网关</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-B9691DE9-84AE-47B8-B744-EF0DC600ECE1__GUID-906A4C7C-0926-4E7C-B326-DC4DAFC4AE5F">为每个DRDA数据库选择一个系统ID</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>每个DRDA数据库都需要一个单独的网关实例。每个实例都需要自己的网关系统ID（SID）。对于此示例，为访问DRDA数据库的实例选择网关SID：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">dg4db22</code> <span class="bold"> </span>用于访问数据库<code class="codeph">db2</code>的网关</p>
                           </li>
                           <li>
                              <p><code class="codeph">dg4db23</code>用于访问数据库<code class="codeph">db3</code>的网关</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B9691DE9-84AE-47B8-B744-EF0DC600ECE1__GUID-396E70F9-F983-4D1D-8918-88275C7764A7">创建两个初始化参数文件</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>通过复制原始初始化参数文件<code class="codeph">$ORACLE_HOME/dg4db2/admin/initdg4db2.ora</code>两次，为<code class="codeph">db2</code>的网关SID命名一个，为<code class="codeph">db3</code>的网关SID命名另一个，为网关的每个实例创建一个初始化参数文件：</p><pre class="oac_no_warn" dir="ltr">$ cd $ ORACLE_HOME / dg4db2 / admin $ cp initdg4db2.ora initdg4db22.ora $ cp initdg4db2.ora initdg4db23.ora</pre><div class="infoboxnote" id="GUID-B9691DE9-84AE-47B8-B744-EF0DC600ECE1__GUID-9E2D8891-757E-4F99-A833-711C463954FD">
                           <p class="notep1">注意：</p>
                           <p>如果您有相同DRDA数据库的多个网关SID，因为您希望在不同时间使用不同的网关参数设置，请按照相同的步骤进行操作。您可以创建多个初始化参数文件，每个文件具有不同的SID和不同的参数设置。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1242"></a><a id="OTGIS1092"></a><div class="props_rev_3"><a id="GUID-DE098DA2-B1FB-4E7E-B5C8-B6948EBF4BE1" name="GUID-DE098DA2-B1FB-4E7E-B5C8-B6948EBF4BE1"></a><h4 id="OTGIS-GUID-DE098DA2-B1FB-4E7E-B5C8-B6948EBF4BE1" class="sect4">多个DRDA数据库示例：配置Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-DE098DA2-B1FB-4E7E-B5C8-B6948EBF4BE1__GUID-B7A695C3-8ED7-42FC-BF6F-9990EA382C2B">将条目添加到listener.ora</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在Oracle Net Listener配置文件中添加两个新条目， <span class="bold"> </span> <code class="codeph">listener.ora</code> 。即使多个网关实例访问同一数据库，您也必须为每个网关实例提供一个条目。
                        </p>
                        <p>以下示例首先显示原始安装网关的条目，然后显示新条目：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = dg4db2）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4db2））（SID_DESC =（SID_NAME = dg4db22）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4db2））（SID_DESC =（SID_NAME = dg4db23） ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4db2）））</pre><p>其中， <code class="codeph">oracle_home_directory</code>是网关所在的目录。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1093"></a><div class="props_rev_3"><a id="GUID-F7315B3E-4475-4A3F-8443-E0FE275FE6FF" name="GUID-F7315B3E-4475-4A3F-8443-E0FE275FE6FF"></a><h4 id="OTGIS-GUID-F7315B3E-4475-4A3F-8443-E0FE275FE6FF" class="sect4">多个DRDA数据库示例：停止并启动Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p>如果侦听器已在运行，请使用<code class="codeph">lsnrctl</code>命令停止侦听器，然后使用新设置启动它，如下所示：</p><pre class="oac_no_warn" dir="ltr">$ lsnrctl停止$ lsnrctl start</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1094"></a><div class="props_rev_3"><a id="GUID-6429FBB4-D70B-4A9A-9B65-373143379CE7" name="GUID-6429FBB4-D70B-4A9A-9B65-373143379CE7"></a><h4 id="OTGIS-GUID-6429FBB4-D70B-4A9A-9B65-373143379CE7" class="sect4">多个数据库示例：为网关访问配置Oracle数据库</h4>
                  <div>
                     <p>例子：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="config-drda-gateway.html#GUID-EEA380E6-EC6B-4419-AA70-BF9DFC586D39">为多个网关实例配置Oracle Net</a></p>
                        </li>
                     </ul>
                  </div><a id="OTGIS1095"></a><div class="props_rev_3"><a id="GUID-EEA380E6-EC6B-4419-AA70-BF9DFC586D39" name="GUID-EEA380E6-EC6B-4419-AA70-BF9DFC586D39"></a><h5 id="OTGIS-GUID-EEA380E6-EC6B-4419-AA70-BF9DFC586D39" class="sect5">为多个网关实例配置Oracle Net</h5>
                     <div>
                        <div class="section">
                           <p>将两个连接描述符条目添加到<code class="codeph">tnsnames.ora</code>文件中。即使网关实例访问同一数据库，您也必须为每个网关实例创建一个条目。
                           </p>
                           <p>以下DRDA示例首先显示原始安装网关的条目，然后显示新网关实例的两个条目：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">old_db_using</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（PORT = port_number）（HOST = host_name））（CONNECT_DATA =（SID = dg4db2））（HS = OK）） <span class="italic">new_db2_using</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（PORT = port_number）（HOST = host_name））（CONNECT_DATA =（SID = dg4db22））（HS = OK）） <span class="italic">new_db3_using</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（PORT = port_number）（HOST = host_name ））（CONNECT_DATA =（SID = dg4db23））（HS = OK））</pre><p><code class="codeph">PORT</code>的值是正在侦听网关的Oracle Net Listener的TCP / IP端口号。该数字可以在Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到。<code class="codeph">HOST</code>的值是运行网关的计算机的名称。该名称也可以在Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="OTGIS1096"></a><div class="props_rev_3"><a id="GUID-DF94D718-3CE7-4A89-AA8E-4C08CDC590F0" name="GUID-DF94D718-3CE7-4A89-AA8E-4C08CDC590F0"></a><h4 id="OTGIS-GUID-DF94D718-3CE7-4A89-AA8E-4C08CDC590F0" class="sect4">多个DRDA数据库示例：访问DB2数据</h4>
                  <div>
                     <div class="section">
                        <p>输入以下内容<code class="codeph">dg4db22</code>网关创建数据库链接：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK DRDA2 CONNECT TO 2 <span class="italic">“user2”</span> IDENTIFIED BY <span class="italic">“password2”</span> USING'new_db2_using';</pre><p>输入以下内容<code class="codeph">dg4db23</code>网关创建数据库链接：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK DRDA3 CONNECT TO 2 <span class="italic">“user3”</span> IDENTIFIED BY <span class="italic">“password3”</span> USING'new_db3_using';</pre><p>创建数据库链接后，您可以验证与新DRDA数据库的连接，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM ALL_USERS @ DRDA2;</pre><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM ALL_USERS @ DRDA3;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
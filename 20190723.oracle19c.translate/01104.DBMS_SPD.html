<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_SPD package provides subprograms for managing SQL plan directives (SPD)."></meta>
      <meta name="description" content="The DBMS_SPD package provides subprograms for managing SQL plan directives (SPD)."></meta>
      <title>DBMS_SPD</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_SPD package provides subprograms for managing SQL plan directives (SPD)."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_SPACE_ADMIN.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_SPM.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_SPACE_ADMIN.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_SPM.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_SPD</li>
            </ol>
            <a id="GUID-E242EA74-6311-4A25-A92D-D47D374BC156" name="GUID-E242EA74-6311-4A25-A92D-D47D374BC156"></a><a id="ARPLS73856"></a><a id="ARPLS73856"></a>
            
            <h2 id="ARPLS-GUID-E242EA74-6311-4A25-A92D-D47D374BC156" class="sect2"><span class="enumeration_chapter">154</span> DBMS_SPD</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_SPD</code>包提供了用于管理SQL计划指令（SPD）的子程序。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_SPD.html#GUID-530C3266-4293-45BA-8104-E18B0B9F006C" title="该包提供了用于管理SQL计划指令（SPD）的子程序。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SPD.html#GUID-F404296A-B523-43ED-A455-E096D90F9B99" title="DBMS_SPD是一个调用者权限包。调用者需要ADMINISTER SQL MANAGEMENT OBJECT权限才能执行此程序包中的大多数子程序。此外，子程序提交当前事务（如果有），执行操作，然后再次提交。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SPD.html#GUID-1A8933D3-1284-4C8C-80B5-27E8D0DC25A8" title="DBA视图DBA_SQL_PLAN_DIRECTIVES显示在系统中创建的所有指令，并且视图DBA_SQL_PLAN_DIR_OBJECTS显示指令中包含的对象。">查看</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SPD.html#GUID-7B2FFAD2-1983-4829-8673-0B37F98183B0" title="该表列出并简要描述了DBMS_SPD包子程序。">DBMS_SPD子程序摘要</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-E242EA74-6311-4A25-A92D-D47D374BC156__GUID-9A2D3F9B-6342-4E95-8D57-D91EEF6836FC">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="DBMS_STATS.html#GUID-01FAB8ED-E4A3-4C3E-8FE2-88717DCDDA06" title="使用DBMS_STATS包，您可以查看和修改为数据库对象收集的优化程序统计信息。">DBMS_STATS</a></p>
                     </li>
                     <li>
                        <p>有关SQL计划指令的<a href="../tgsql/optimizer-statistics-concepts.html#TGSQL347" target="_blank"><span class="italic">Oracle数据库SQL调整指南</span></a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="ARPLS73858"></a><a id="ARPLS73858"></a><div class="props_rev_3"><a id="GUID-530C3266-4293-45BA-8104-E18B0B9F006C" name="GUID-530C3266-4293-45BA-8104-E18B0B9F006C"></a><h3 id="ARPLS-GUID-530C3266-4293-45BA-8104-E18B0B9F006C" class="sect3"><span class="enumeration_section">154.1</span> DBMS_SPD概述</h3>
               <div>
                  <p>该包提供了用于管理SQL计划指令（SPD）的子程序。</p>
                  <div class="section">
                     <p>SPD是Oracle自动生成的对象。例如，如果Oracle检测到优化程序估计的单表基数与访问表时返回的实际行数不同，则会自动创建指令以对表执行动态统计。当编译引用该表的任何SQL语句时，优化器将对表执行动态统计，以获得更准确的估计。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS73859"></a><a id="ARPLS73859"></a><div class="props_rev_3"><a id="GUID-F404296A-B523-43ED-A455-E096D90F9B99" name="GUID-F404296A-B523-43ED-A455-E096D90F9B99"></a><h3 id="ARPLS-GUID-F404296A-B523-43ED-A455-E096D90F9B99" class="sect3"><span class="enumeration_section">154.2</span> DBMS_SPD安全模型</h3>
               <div>
                  <p><code class="codeph">DBMS_SPD</code>是一个调用者权限包。调用者需要<code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code>权限才能执行此程序包中的大多数子程序。此外，子程序提交当前事务（如果有），执行操作，然后再次提交。
                  </p>
               </div>
            </div><a id="ARPLS73860"></a><a id="ARPLS73860"></a><div class="props_rev_3"><a id="GUID-1A8933D3-1284-4C8C-80B5-27E8D0DC25A8" name="GUID-1A8933D3-1284-4C8C-80B5-27E8D0DC25A8"></a><h3 id="ARPLS-GUID-1A8933D3-1284-4C8C-80B5-27E8D0DC25A8" class="sect3"><span class="enumeration_section">154.3</span> DBMS_SPD视图</h3>
               <div>
                  <p>DBA视图<code class="codeph">DBA_SQL_PLAN_DIRECTIVES</code>显示在系统中创建的所有指令，并且视图<code class="codeph">DBA_SQL_PLAN_DIR_OBJECTS</code>显示指令中包含的对象。
                  </p>
               </div>
            </div><a id="ARPLS73861"></a><a id="ARPLS73862"></a><a id="ARPLS73862"></a><a id="ARPLS73861"></a><div class="props_rev_3"><a id="GUID-7B2FFAD2-1983-4829-8673-0B37F98183B0" name="GUID-7B2FFAD2-1983-4829-8673-0B37F98183B0"></a><h3 id="ARPLS-GUID-7B2FFAD2-1983-4829-8673-0B37F98183B0" class="sect3"><span class="enumeration_section">154.4</span> DBMS_SPD子程序摘要</h3>
               <div>
                  <p>该表列出并简要描述了<code class="codeph">DBMS_SPD</code>程序。
                  </p>
                  <div class="tblformal" id="GUID-7B2FFAD2-1983-4829-8673-0B37F98183B0__GUID-524457DC-AF4B-4126-BDA6-CFAA20102D9A">
                     <p class="titleintable">表154-1 DBMS_SPD包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SPD包子程序" width="100%" border="1" summary="This table lists and briefly describes the DBMS_SPD package subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d856291e530">子程序</th>
                              <th align="left" valign="bottom" width="70%" id="d856291e533">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e538" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-94E0A914-C274-4A4D-95E8-450F653997A7" title="此过程更改SQL计划指令的不同属性。">ALTER_SQL_PLAN_DIRECTIVE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e538 d856291e533 ">
                                 <p>更改SQL计划指令的不同属性</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e550" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7" title="此过程创建一个临时表，用于打包（导出）SQL计划指令。">CREATE_STGTAB_DIRECTIVE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e550 d856291e533 ">
                                 <p>创建一个临时表，用于打包（导出）SQL计划指令。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e562" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-037F484B-3ACA-4B8D-8062-666C56F79501" title="此过程将删除SQL计划指令。">DROP_SQL_PLAN_DIRECTIVE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e562 d856291e533 ">
                                 <p>删除SQL计划指令</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e574" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-7C43374C-698E-4E90-8413-C09DF597102E" title="此过程允许手动刷新在执行SQL语句时自动记录在SGA内存中的SQL计划指令。">FLUSH_SQL_PLAN_DIRECTIVE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e574 d856291e533 ">
                                 <p>允许手动刷新在执行SQL语句时自动记录在SGA内存中的SQL计划指令。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e586" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92" title="此函数返回SQL计划指令的指定首选项的值。">GET_PREFS函数</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e586 d856291e533 ">
                                 <p>获取SQL计划指令的首选项的值</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e598" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC" title="此函数将SQL计划指令打包（导出）到临时表中。">PACK_STGTAB_DIRECTIVE函数</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e598 d856291e533 ">
                                 <p>将SQL计划指令打包（导出）到临时表中。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e610" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-E916B860-4C33-4B0E-814B-594E849631D5" title="此过程允许为SQL计划指令设置不同的首选项。">SET_PREFS过程</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e610 d856291e533 ">
                                 <p>允许为SQL计划指令设置不同的首选项</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e622" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA" title="此过程从临时表中解压缩（导入）SQL计划指令。">UNPACK_STGTAB_DIRECTIVE功能</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e622 d856291e533 ">
                                 <p>从登台表解包（导入）SQL计划指令。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS73863"></a><a id="ARPLS73864"></a><a id="ARPLS73864"></a><a id="ARPLS73863"></a><div class="props_rev_3"><a id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7" name="GUID-94E0A914-C274-4A4D-95E8-450F653997A7"></a><h4 id="ARPLS-GUID-94E0A914-C274-4A4D-95E8-450F653997A7" class="sect4"><span class="enumeration_section">154.4.1</span> ALTER_SQL_PLAN_DIRECTIVE过程</h4>
                  <div>
                     <p>此过程更改SQL计划指令的不同属性。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7__GUID-B1888085-137C-4B5C-91CC-1F5E864AFEC5">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.ALTER_SQL_PLAN_DIRECTIVE（directive_id IN NUMBER，attribute_name IN VARCHAR2，attribute_value IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7__GUID-3E400D1B-4B85-43B0-A2C4-EF1C283B539D">参数</p>
                        <div class="tblformal" id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7__GUID-EBA2AD3D-5C46-4E5A-9DE8-B32BB552C992">
                           <p class="titleintable">表154-2 <span class="italic"><span class="bold">ALTER_SQL_PLAN_DIRECTIVE过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_SQL_PLAN_DIRECTIVE过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_SPD.ALTER_SQL_PLAN_DIRECTIVE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e745">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e748">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e753" headers="d856291e745 ">
                                       <p><code class="codeph">directive_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e753 d856291e748 ">
                                       <p>SQL计划指令ID</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e761" headers="d856291e745 ">
                                       <p><code class="codeph">ATTRIBUTE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e761 d856291e748 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">启用</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_DROP</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e776" headers="d856291e745 ">
                                       <p><code class="codeph">ATTRIBUTE_VALUE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e776 d856291e748 ">
                                       <p>可能的值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">启动：</code></p>
                                             <p>- 如果启用了<code class="codeph">YES</code>指令并且可以使用</p>
                                             <p>- 如果未启用<code class="codeph">NO</code>指令且不会使用</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_DROP</code> ：</p>
                                             <p>- 如果未用于<code class="codeph">SPD_RETENTION_WEEKS</code> ， <code class="codeph">SPD_RETENTION_WEEKS</code>自动删除<code class="codeph">YES</code>指令。这是默认行为。
                                             </p>
                                             <p>- 如果<code class="codeph">NO</code>指令不会自动删除</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7__GUID-E9ACDF44-63C3-452E-A4FC-3BA2E7F3DF41">例外</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code> ：用户没有适当的权限来执行操作。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code> ：输入值无效。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-13158 OBJECT_DOES_NOT_EXIST</code> ：指定的对象不存在。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7__GUID-4B6B23FF-0D58-4D59-8678-D313274A63E2">使用说明</p>
                        <p>执行此过程需要<code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7__GUID-7E5D8961-D39F-4520-AE17-5F10CD1EA641">例子</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SPD.ALTER_SQL_PLAN_DIRECTIVE（12345，'STATE'，'PERMANENT'）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74423"></a><a id="ARPLS74424"></a><a id="ARPLS74424"></a><a id="ARPLS74423"></a><div class="props_rev_3"><a id="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7" name="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7"></a><h4 id="ARPLS-GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7" class="sect4"><span class="enumeration_section">154.4.2</span> CREATE_STGTAB_DIRECTIVE过程</h4>
                  <div>
                     <p>此过程创建一个临时表，用于打包（导出）SQL计划指令。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7__GUID-4927AFD4-C81E-43EA-AF5E-C64B5E7C54EB">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.CREATE_STGTAB_DIRECTIVE（table_name IN VARCHAR2，table_owner IN VARCHAR2：= USER，tablespace_name IN VARCHAR2：= NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7__GUID-156B5876-8B2E-40F4-8804-8365A239AC39">参数</p>
                        <div class="tblformal" id="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7__GUID-421D8763-654D-4E91-BCA4-44BC606AE5C0">
                           <p class="titleintable">表154-3 <span class="italic"><span class="bold">CREATE_STGTAB_DIRECTIVE过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_STGTAB_DIRECTIVE过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_SPD.CREATE_STGTAB_DIRECTIVE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e961">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e964">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e969" headers="d856291e961 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e969 d856291e964 ">
                                       <p>登台表的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e977" headers="d856291e961 ">
                                       <p><code class="codeph">TABLE_OWNER</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e977 d856291e964 ">
                                       <p>登台表的模式所有者的名称。默认为当前架构。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e985" headers="d856291e961 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e985 d856291e964 ">
                                       <p>表空间的名称。默认<code class="codeph">NULL</code>表示在默认表空间中创建临时表：</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7__GUID-8FE5A09B-F8EE-453A-8CB2-9C2CAA6FC352">例外</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code> ：用户没有适当的权限来执行操作。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code> ：输入值无效。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-44001 INVALID_SCHEMA</code> ：输入模式不存在。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-13159 TABLE_ALREADY_EXISTS</code> ：指定的表已存在。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-29304 TABLESPACE_MISSING</code> ：指定的表空间不存在。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7__GUID-F37AE8B4-243B-45B3-B63D-605316691550">使用说明</p>
                        <p>执行此过程需要<code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS73865"></a><a id="ARPLS73866"></a><a id="ARPLS73866"></a><a id="ARPLS73865"></a><div class="props_rev_3"><a id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501" name="GUID-037F484B-3ACA-4B8D-8062-666C56F79501"></a><h4 id="ARPLS-GUID-037F484B-3ACA-4B8D-8062-666C56F79501" class="sect4"><span class="enumeration_section">154.4.3</span> DROP_SQL_PLAN_DIRECTIVE过程</h4>
                  <div>
                     <p>此过程将删除SQL计划指令。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501__GUID-277D9576-2522-4524-81E5-BD2B63AC6990">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.DROP_SQL_PLAN_DIRECTIVE（指令ID为NUMBER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501__GUID-EBA0A102-949D-4257-BDC4-AC170C26D874">参数</p>
                        <div class="tblformal" id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501__GUID-159B9AF3-160B-478A-AB76-514A6B16F2D5">
                           <p class="titleintable">表154-4 <span class="italic"><span class="bold">DROP_SQL_PLAN_DIRECTIVE过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_SQL_PLAN_DIRECTIVE过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_SPD.DROP_SQL_PLAN_DIRECTIVE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e1144">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e1147">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1152" headers="d856291e1144 ">
                                       <p><code class="codeph">directive_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1152 d856291e1147 ">
                                       <p>SQL计划指令ID</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501__GUID-C91B66DC-8EA4-466E-A41A-B4D10504F4A5">例外</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code> ：用户没有适当的权限来执行操作。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code> ：输入值无效。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-13158 OBJECT_DOES_NOT_EXIST</code> ：指定的对象不存在。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501__GUID-B146D7D0-2403-4B5D-8F7A-9A5E76D690C3">使用说明</p>
                        <p>执行此过程需要<code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501__GUID-FB103A2A-4B14-431C-A7C1-A47CEAF455B8">例子</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SPD.DROP_SQL_PLAN_DIRECTIVE（12345）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74425"></a><a id="ARPLS74425"></a><div class="props_rev_3"><a id="GUID-7C43374C-698E-4E90-8413-C09DF597102E" name="GUID-7C43374C-698E-4E90-8413-C09DF597102E"></a><h4 id="ARPLS-GUID-7C43374C-698E-4E90-8413-C09DF597102E" class="sect4"><span class="enumeration_section">154.4.4</span> FLUSH_SQL_PLAN_DIRECTIVE过程</h4>
                  <div>
                     <p>此过程允许手动刷新在执行SQL语句时自动记录在SGA内存中的SQL计划指令。</p>
                     <div class="section">
                        <p>记录在SGA中的信息由Oracle后台进程定期刷新。此过程提供了一种手动刷新信息的方法。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C43374C-698E-4E90-8413-C09DF597102E__GUID-3988239F-9B59-4CB1-AFAE-6FFB3E8274B4">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.FLUSH_SQL_PLAN_DIRECTIVE;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C43374C-698E-4E90-8413-C09DF597102E__GUID-676F91AB-05ED-478B-ABF6-0FC5AB790B03">例外</p>
                        <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code> ：用户没有适当的权限来执行操作。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C43374C-698E-4E90-8413-C09DF597102E__GUID-64AE2383-C9A1-41CA-BE31-9A314611F632">使用说明</p>
                        <p>执行此过程需要<code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C43374C-698E-4E90-8413-C09DF597102E__GUID-DAFCA880-31B3-4699-9127-F9EE8487C5A6">例子</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SPD.FLUSH_SQL_PLAN_DIRECTIVE;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74426"></a><a id="ARPLS74427"></a><a id="ARPLS74427"></a><a id="ARPLS74426"></a><div class="props_rev_3"><a id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92" name="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92"></a><h4 id="ARPLS-GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92" class="sect4"><span class="enumeration_section">154.4.5</span> GET_PREFS函数</h4>
                  <div>
                     <p>此函数返回SQL计划指令的指定首选项的值。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-7E19D736-2254-4284-B360-6AF9BF5E7CB5">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.GET_PREFS（pname IN VARCHAR2）RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-9CE078EA-04B9-4BD5-89C7-D4CC3B9C4E44">参数</p>
                        <div class="tblformal" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-E61B769C-F174-48CF-9B17-390DA6CE20DE">
                           <p class="titleintable">表154-5 <span class="italic"><span class="bold">GET_PREFS函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GET_PREFS函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_SPD.GET_PREFS subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e1422">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e1425">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1430" headers="d856291e1422 ">
                                       <p><code class="codeph">PNAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1430 d856291e1425 ">
                                       <p>偏好名称。该过程支持首选项<code class="codeph">SPD_RETENTION_WEEKS</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-CB5A67F5-E0B3-407E-AAE4-E6AEE5A7EFA3">返回值</p>
                        <p>偏好值</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-0A12B198-EA16-4FA6-A0F8-7D3A5ED76503">例外</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code> ：用户没有适当的权限来执行操作。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code> ：输入值无效。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-0BEE0B6B-11F8-4F22-823A-C79E970A173E">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>执行此过程需要<code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code>权限。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SPD_RETENTION_WEEKS</code> - 如果不使用超过为此首选项设置的值，则清除SQL计划指令。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-7882E18B-7BC1-4BD2-AB37-872ECA08F9D1">例子</p><pre class="oac_no_warn" dir="ltr">SELECT DBMS_SPD.GET_PREFS（'SPD_RETENTION_WEEKS'）FROM DUAL;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74428"></a><a id="ARPLS74429"></a><a id="ARPLS74429"></a><a id="ARPLS74428"></a><div class="props_rev_3"><a id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC" name="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC"></a><h4 id="ARPLS-GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC" class="sect4"><span class="enumeration_section">154.4.6</span> PACK_STGTAB_DIRECTIVE函数</h4>
                  <div>
                     <p>此函数将SQL计划指令打包（导出）到临时表中。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-412C1FE6-829D-43AF-BA9D-4D4942313367">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.PACK_STGTAB_DIRECTIVE（table_name IN VARCHAR2，table_owner IN VARCHAR2：= USER directive_id IN NUMBER：= NULL，obj_list IN OBJECTTAB：= NULL）返回编号</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-EE4C47DA-0ED7-4EC1-81B4-3F1611C909DF">参数</p>
                        <div class="tblformal" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-657D2947-0CB9-4829-B095-A63F2638FB23">
                           <p class="titleintable">表154-6 <span class="italic"><span class="bold">PACK_STGTAB_DIRECTIVE函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PACK_STGTAB_DIRECTIVE函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_SPD.PACK_STGTAB_DIRECTIVE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e1591">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e1594">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1599" headers="d856291e1591 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1599 d856291e1594 ">
                                       <p>登台表的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1607" headers="d856291e1591 ">
                                       <p><code class="codeph">TABLE_OWNER</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1607 d856291e1594 ">
                                       <p>登台表的模式所有者的名称。默认为当前架构。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1615" headers="d856291e1591 ">
                                       <p><code class="codeph">directive_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1615 d856291e1594 ">
                                       <p>SQL计划指令ID。默认值<code class="codeph">NULL</code>表示系统中的所有指令。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1626" headers="d856291e1591 ">
                                       <p><code class="codeph">OBJ_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1626 d856291e1594 ">
                                       <p>用于根据指令中使用的对象过滤要打包的指令。如果<code class="codeph">obj_list</code>不为<code class="codeph">NULL</code> ，则只有当指令中的所有对象都存在于<code class="codeph">obj_list</code>才会打包指令。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-DD7D716C-3746-45D6-8130-D79AE85A0BEE">返回值</p>
                        <p>打包的SQL计划指令数。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-FB1A8AC4-E6EF-4EBE-9A87-AE164657F823">例外</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code> ：用户没有适当的权限来执行操作。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code> ：输入值无效。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-44001 INVALID_SCHEMA</code> ：输入模式不存在。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-29304 INVALID_STGTAB</code> ：指定的临时表无效或不存在。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-13158 OBJECT_DOES_NOT_EXIST</code> ：指定的对象不存在。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-3F0899E4-5E08-400A-96BB-D06D61B52D31">使用说明</p>
                        <p>执行此过程需要<code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-3248CEE0-FEEF-459D-AB7E-1C8353AB810F">例子</p><pre class="oac_no_warn" dir="ltr">- 在系统中包装所有指令SELECT DBMS_SPD.PACK_STGTAB_DIRECTIVE（'mydirtab'）FROM DUAL; SET SERVEROUTPUT ON; - 与SH模式中的对象相关的包指令DECLARE my_list DBMS_SPD.OBJECTTAB：= DBMS_SPD.ObjectTab（）; dir_cnt NUMBER; BEGIN my_list.extend（1）; my_list（1）.owner：='SH'; - 模式名称my_list（1）.object_name：= NULL; -  SH my_list中的所有表（1）.object_type：='TABLE'; - 对象类型dir_cnt：= DBMS_SPD.PACK_STGTAB_DIRECTIVE（'mydirtab'，obj_list =&gt; my_list）; DBMS_OUTPUT.PUT_LINE（'dir_cnt ='|| dir_cnt）;结束; - 与SH模式中的表SALES和CUSTOMERS相关的包指令DECLARE my_list DBMS_SPD.OBJECTTAB：= DBMS_SPD.ObjectTab（）; dir_cnt NUMBER; BEGIN my_list.extend（2）; -  SALES表my_list（1）.owner：='SH'; my_list（1）.object_name：='SALES'; my_list（1）.object_type：='TABLE'; -  CUSTOMERS表my_list（2）.owner：='SH'; my_list（2）.object_name：='CUSTOMERS'; my_list（2）.object_type：='TABLE'; dir_cnt：= DBMS_SPD.PACK_STGTAB_DIRECTIVE（'mydirtab'，obj_list =&gt; my_list）; DBMS_OUTPUT.PUT_LINE（'dir_cnt ='|| dir_cnt）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74430"></a><a id="ARPLS74431"></a><a id="ARPLS74431"></a><a id="ARPLS74430"></a><div class="props_rev_3"><a id="GUID-E916B860-4C33-4B0E-814B-594E849631D5" name="GUID-E916B860-4C33-4B0E-814B-594E849631D5"></a><h4 id="ARPLS-GUID-E916B860-4C33-4B0E-814B-594E849631D5" class="sect4"><span class="enumeration_section">154.4.7</span> SET_PREFS过程</h4>
                  <div>
                     <p>此过程允许为SQL计划指令设置不同的首选项。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E916B860-4C33-4B0E-814B-594E849631D5__GUID-DD1E87FD-D97A-47BE-BC89-B50D7082D698">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.SET_PREFS（pname IN VARCHAR2，pvalue IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E916B860-4C33-4B0E-814B-594E849631D5__GUID-2118E14E-A916-4084-8A5B-025595876D3E">参数</p>
                        <div class="tblformal" id="GUID-E916B860-4C33-4B0E-814B-594E849631D5__GUID-5D6B344A-BCF4-4D37-8724-1D7DB3E6D922">
                           <p class="titleintable">表154-7 <span class="italic"><span class="bold">SET_PREFS过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_PREFS过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_SPD.SET_PREFS subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e1801">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e1804">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1809" headers="d856291e1801 ">
                                       <p><code class="codeph">PNAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1809 d856291e1804 ">
                                       <p>偏好名称。该过程支持首选项<code class="codeph">SPD_RETENTION_WEEKS</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1820" headers="d856291e1801 ">
                                       <p><code class="codeph">P值</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1820 d856291e1804 ">
                                       <p>偏好值。</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>SPD_RETENTION_WEEKS：如果SQL计划指令的使用不超过为此首选项设置的值，则会清除它们。默认值为53（ <code class="codeph">SPD_RETENTION_WEEKS_DEFAULT</code> ）周，这意味着如果指令在一年多的时间内未使用，则清除该指令。它可以设置为大于或等于0的任何值。也可以传递值<code class="codeph">NULL</code>以将首选项设置为默认值。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E916B860-4C33-4B0E-814B-594E849631D5__GUID-2FCD3D2D-E7C6-4C9D-97DA-2C130D496345">例外</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code> ：用户没有适当的权限来执行操作。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code> ：输入值无效。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E916B860-4C33-4B0E-814B-594E849631D5__GUID-B4FC59C6-338F-4082-9F8F-50877510A033">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>执行此过程需要<code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code>权限。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SPD_RETENTION_WEEKS</code> - 如果不使用超过为此首选项设置的值，则清除SQL计划指令。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E916B860-4C33-4B0E-814B-594E849631D5__GUID-BD523917-E831-4D2A-8C36-6514FF43863A">例子</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SPD.SET_PREFS（'SPD_RETENTION_WEEKS'，'4'）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74432"></a><a id="ARPLS74433"></a><a id="ARPLS74433"></a><a id="ARPLS74432"></a><div class="props_rev_3"><a id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA" name="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA"></a><h4 id="ARPLS-GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA" class="sect4"><span class="enumeration_section">154.4.8</span> UNPACK_STGTAB_DIRECTIVE函数</h4>
                  <div>
                     <p>此过程从临时表中解压缩（导入）SQL计划指令。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-9C20EA26-E3D4-4362-9550-9DF5157A4C3E">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.UNPACK_STGTAB_DIRECTIVE（table_name IN VARCHAR2，table_owner IN VARCHAR2：= USER，directive_id IN NUMBER：= NULL，obj_list IN OBJECTTAB：= NULL）返回编号</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-CE4DE0B5-8957-4158-9157-F1CF3B8E57F7">参数</p>
                        <div class="tblformal" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-B9854FA6-0425-436A-A82B-64BC1FAA287B">
                           <p class="titleintable">表154-8 <span class="italic"><span class="bold">UNPACK_STGTAB_DIRECTIVE函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNPACK_STGTAB_DIRECTIVE函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_SPD.UNPACK_STGTAB_DIRECTIVE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e1984">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e1987">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1992" headers="d856291e1984 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1992 d856291e1987 ">
                                       <p>登台表的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e2000" headers="d856291e1984 ">
                                       <p><code class="codeph">TABLE_OWNER</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e2000 d856291e1987 ">
                                       <p>登台表的模式所有者的名称。默认为当前架构。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e2008" headers="d856291e1984 ">
                                       <p><code class="codeph">directive_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e2008 d856291e1987 ">
                                       <p>SQL计划指令ID。默认值<code class="codeph">NULL</code>表示系统中的所有指令。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e2019" headers="d856291e1984 ">
                                       <p><code class="codeph">OBJ_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e2019 d856291e1987 ">
                                       <p>用于根据指令中使用的对象过滤要解压缩的指令。如果<code class="codeph">obj_list</code>不为<code class="codeph">NULL</code> ，则仅当指令中的所有对象都存在于<code class="codeph">obj_list</code>才会解压缩指令。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-8ED76707-9DFB-4C76-8C3C-62DACCD42420">返回值</p>
                        <p>解压缩的SQL计划指令数。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-D70E6B28-938D-435C-A46F-43E195EB8F2F">例外</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code> ：用户没有适当的权限来执行操作。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code> ：输入值无效。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-44001 INVALID_SCHEMA</code> ：输入模式不存在。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-29304 INVALID_STGTAB</code> ：指定的临时表无效或不存在。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-13158 OBJECT_DOES_NOT_EXIST</code> ：指定的对象不存在。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-AEC3CD2B-AFF9-4836-8521-3DECC7CB8331">使用说明</p>
                        <p>执行此过程需要<code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-FC0139B9-D81C-4920-ADD4-05A5084909AF">例子</p><pre class="oac_no_warn" dir="ltr">- 在登台表中取消所有指令SELECT DBMS_SPD.UNPACK_STGTAB_DIRECTIVE（'mydirtab'）FROM DUAL; SET SERVEROUTPUT ON; - 与SH模式中的对象相关的解包指令DECLARE my_list DBMS_SPD.OBJECTTAB：= DBMS_SPD.ObjectTab（）; dir_cnt号码; BEGIN my_list.extend（1）; my_list（1）.owner：='SH'; - 模式名称my_list（1）.object_name：= null; -  SH my_list中的所有表（1）.object_type：='TABLE'; - 对象类型dir_cnt：= DBMS_SPD.UNPACK_STGTAB_DIRECTIVE（'mydirtab'，obj_list =&gt; my_list）; DBMS_OUTPUT.PUT_LINE（'dir_cnt ='|| dir_cnt）;结束; - 与SH模式中的表SALES和CUSTOMERS相关的解包指令DECLARE my_list DBMS_SPD.OBJECTTAB：= DBMS_SPD.ObjectTab（）; dir_cnt NUMBER;开始my_list.extend（2）; -  SALES表my_list（1）.owner：='SH'; my_list（1）.object_name：='SALES'; my_list（1）.object_type：='TABLE'; -  CUSTOMERS表my_list（2）.owner：='SH'; my_list（2）.object_name：='CUSTOMERS'; my_list（2）.object_type：='TABLE'; dir_cnt：= DBMS_SPD.UNPACK_STGTAB_DIRECTIVE（'mydirtab'，obj_list =&gt; my_list）; DBMS_OUTPUT.PUT_LINE（'dir_cnt ='|| dir_cnt）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
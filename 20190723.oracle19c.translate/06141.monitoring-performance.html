<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>监控绩效</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00"></meta>
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95728-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="design-and-deployment-techniques.html" title="Previous" type="text/html"></link>
      <link rel="next" href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="design-and-deployment-techniques.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters管理和部署指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">监控绩效</li>
            </ol>
            <a id="GUID-8AED4793-C285-428D-8978-7B0B0F3586C7" name="GUID-8AED4793-C285-428D-8978-7B0B0F3586C7"></a><a id="RACAD7395"></a>
            
            <h2 id="RACAD-GUID-8AED4793-C285-428D-8978-7B0B0F3586C7" class="sect2"><span class="enumeration_chapter">14</span>监测绩效</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何监视和调整Oracle Real Application Clusters（Oracle RAC）性能。</p>
               <p>本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="monitoring-performance.html#GUID-486D7C06-1ECF-4C25-990E-B7E5DD09C91C" title="“Oracle Enterprise Manager群集数据库性能”页面提供了数据库性能统计信息的快速概览。">监视和调整Oracle RAC数据库概述</a></p>
                  </li>
                  <li>
                     <p><a href="monitoring-performance.html#GUID-5C01B293-1A2B-4E56-9FED-576361E0E655" title="使用SQL语句验证Oracle RAC的互连设置。">验证Oracle RAC的互连设置</a></p>
                  </li>
                  <li>
                     <p><a href="monitoring-performance.html#GUID-84D7CC89-1C25-4999-BBFD-7686B6E4838E" title="互联互通后，您无法显着影响其性能。但是，您可以通过调整进程间通信（IPC）缓冲区大小来影响互连协议的效率。">影响互连处理</a></p>
                  </li>
                  <li>
                     <p><a href="monitoring-performance.html#GUID-04B6632F-EC4E-4317-9BD6-D7991C429DD5" title="每个实例都有一组特定于实例的视图，前缀为V $。">Oracle RAC中的性能视图</a></p>
                  </li>
                  <li>
                     <p><a href="monitoring-performance.html#GUID-A2C906EF-8D6B-4A70-8439-470AC3532ADA">使用CATCLUST.SQL创建Oracle RAC数据字典视图</a></p>
                  </li>
                  <li>
                     <p><a href="monitoring-performance.html#GUID-5C5BE0E4-2E88-40E1-A5C3-F1240DDA6AEC">Oracle RAC性能统计信息</a></p>
                  </li>
                  <li>
                     <p><a href="monitoring-performance.html#GUID-42E1B55A-4685-4CED-98CA-1BB576650D1A" title="您可以使用自动工作负载存储库来监视与Oracle RAC数据库相关的性能统计信息。">Oracle RAC环境中的自动工作负载存储库</a></p>
                  </li>
                  <li>
                     <p><a href="monitoring-performance.html#GUID-4CA5E706-8DB7-4388-812F-51736A659596">Oracle RAC的活动会话历史记录报告</a></p>
                  </li>
                  <li>
                     <p><a href="monitoring-performance.html#GUID-766BE4D4-89C0-42B1-BB9D-B1F4A61D9A6C" title="分析和解释导致会话等待的原因是确定花费时间的重要方法。您可以通过识别所有实例经常使用（热）的数据块和对象来监视GCS性能。描述如何通过识别频繁读取和修改的对象以及远程访问强加的服务时间来监视GCS性能。AWR和Statspack报告或动态性能视图中报告的显示总时间较长的大多数全局缓存等待事件都是正常的，并且可能将自己显示为没有实际指示问题的顶级数据库时间消费者。">监视Oracle RAC统计信息和等待事件</a></p>
                  </li>
               </ul>
            </div><a id="RACAD970"></a><div class="sect2"><a id="GUID-486D7C06-1ECF-4C25-990E-B7E5DD09C91C" name="GUID-486D7C06-1ECF-4C25-990E-B7E5DD09C91C"></a><h3 id="RACAD-GUID-486D7C06-1ECF-4C25-990E-B7E5DD09C91C" class="sect3">监视和调整Oracle RAC数据库概述</h3>
               <div>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="monitoring-performance.html#GUID-CB16404E-DC1C-4EA0-8A2D-7FA0907E63CD" title="“Oracle Enterprise Manager群集数据库性能”页面提供了数据库性能统计信息的快速概览。">监控Oracle RAC和Oracle Clusterware</a></p>
                     </li>
                     <li>
                        <p><a href="monitoring-performance.html#GUID-569AD18F-FAA7-4E0C-B291-3BC1FC634293">调整Oracle RAC数据库</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../admqs/monitoring-and-tuning-the-database.html#ADMQS-GUID-95716F9A-C500-4CCD-AC3F-6541E3191E40" target="_blank"><span><cite>Oracle数据库2天DBA</cite></span></a></li>
                        <li><a href="../tdppt/introduction.html#TDPPT-GUID-4D1462AB-40E1-41CC-AA0A-06AF5E9428F0" target="_blank"><span><cite>Oracle数据库2天+性能调优指南</cite></span></a></li>
                        <li><a href="../cwadd/cluster-verification-utility-reference.html#CWADD-GUID-B445A858-9F00-4423-990E-109545AC11C3" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="RACAD7396"></a><div class="sect3"><a id="GUID-CB16404E-DC1C-4EA0-8A2D-7FA0907E63CD" name="GUID-CB16404E-DC1C-4EA0-8A2D-7FA0907E63CD"></a><h4 id="RACAD-GUID-CB16404E-DC1C-4EA0-8A2D-7FA0907E63CD" class="sect4">监控Oracle RAC和Oracle Clusterware</h4>
                  <div>
                     <p>使用Oracle Enterprise Manager是监视Oracle RAC和Oracle Clusterware的首选方法。Oracle Enterprise Manager是一个基于Oracle Web的集成管理解决方案，用于监视和管理您的计算环境。在您可以访问Web浏览器的任何位置，除了相关的硬件和软件之外，您还可以管理Oracle RAC数据库，应用程序服务器，主机和Web应用程序。例如，如果您可以访问Web浏览器，则可以从办公室，家中或远程站点监视Oracle RAC数据库性能。</p>
                     <p>Oracle Enterprise Manager Cloud Control支持群集，并提供管理群集数据库的中央控制台。在Cluster Database主页中，您可以执行以下所有操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>查看整体系统状态，例如群集中的节点数及其当前状态。此高级视图功能意味着，如果您只想查看包含的聚合信息，则无需访问每个单独的数据库实例以获取详细信息。</p>
                        </li>
                        <li>
                           <p>查看在所有实例中聚合的警报消息，其中包含每个警报消息源的列表。<span class="bold">警报消息</span>是表示已遇到特定度量条件的指示符。<span class="bold">度量</span>是用于报告系统条件的<span class="bold">度量</span>单位。
                           </p>
                        </li>
                        <li>
                           <p>查看影响整个群集的问题以及影响各个实例的问题。</p>
                        </li>
                        <li>
                           <p>监控群集缓存一致性统计信息，以帮助您识别处理趋势并优化Oracle RAC环境的性能。缓存一致性统计信息可以衡量多个实例上缓存中的数据是如何同步的。如果数据高速缓存彼此完全同步，则从任何实例上的高速缓存读取内存位置将从任何实例上的任何高速缓存返回写入该位置的最新数据。</p>
                        </li>
                     </ul>
                     <p>Oracle Enterprise Manager在指定的时间段内累积数据，称为基于集合的数据。Oracle Enterprise Manager还提供当前数据，称为实时数据。</p>
                  </div><a id="RACAD7397"></a><div class="sect4"><a id="GUID-5662C767-6F57-4DB6-930B-51551824A3EF" name="GUID-5662C767-6F57-4DB6-930B-51551824A3EF"></a><h5 id="RACAD-GUID-5662C767-6F57-4DB6-930B-51551824A3EF" class="sect5">群集数据库主页</h5>
                     <div>
                        <p>您可以将Oracle Enterprise Manager与客户端浏览器一起使用，以监控Oracle Clusterware和Oracle RAC环境的状态。监控可包括以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果有任何VIP重新安置通知</p>
                           </li>
                           <li>
                              <p>使用通过Cluster Verification Utility获取的信息（ <code class="codeph">cluvfy</code> ）在集群的每个节点上使用Oracle Clusterware的状态</p>
                           </li>
                           <li>
                              <p>如果节点应用程序（ <code class="codeph">nodeapps</code> ）启动或停止，则通知</p>
                           </li>
                           <li>
                              <p>针对OCR，表决磁盘问题（如果有）和Oracle的Oracle Clusterware警报日志中的问题通知<a id="d43824e737" class="indexterm-anchor"></a>节点驱逐</p>
                           </li>
                        </ul>
                        <p>群集数据库主页类似于非群集数据库主页。但是，在Cluster Database主页上，Oracle Enterprise Manager显示系统状态和可用性。其中包括有关警报消息和作业活动的摘要，以及指向所有数据库和Oracle自动存储管理（Oracle ASM）实例的链接。例如，您可以跟踪群集上的服务问题，包括服务未在所有首选实例上运行或何时未满足服务响应时间阈值。</p>
                     </div>
                  </div><a id="RACAD7398"></a><div class="sect4"><a id="GUID-D54B1B82-3BBD-466A-8190-D819FE698204" name="GUID-D54B1B82-3BBD-466A-8190-D819FE698204"></a><h5 id="RACAD-GUID-D54B1B82-3BBD-466A-8190-D819FE698204" class="sect5">互联页面</h5>
                     <div>
                        <p>你可以使用<a id="d43824e883" class="indexterm-anchor"></a><a id="d43824e887" class="indexterm-anchor"></a> Oracle Enterprise Manager互连页面以监控Oracle Clusterware环境。“互连”页面显示了<a id="d43824e892" class="indexterm-anchor"></a>集群上的公共和专用接口以及互连上的数据库实例提供的负载，包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>专用互连的总吞吐量</p>
                           </li>
                           <li>
                              <p>如果数据库实例由于配置错误而使用公共接口，则通知</p>
                           </li>
                           <li>
                              <p>互连上的吞吐量和错误（如果有）</p>
                           </li>
                           <li>
                              <p>互连上各个实例提供的吞吐量</p>
                           </li>
                        </ul>
                        <p>所有这些信息也可作为具有历史视图的集合提供，这对于有用<a id="d43824e912" class="indexterm-anchor"></a>群集缓存一致性，例如在诊断与群集等待事件相关的问题时。您可以通过单击Cluster Database主页上的Interconnect选项卡或单击Oracle RAC数据库主页上Diagnostic Findings下的Interconnect Alerts链接来访问Interconnects页面。
                        </p>
                     </div>
                  </div><a id="RACAD7399"></a><div class="sect4"><a id="GUID-D0715642-2C97-422A-B630-32FAC077A58E" name="GUID-D0715642-2C97-422A-B630-32FAC077A58E"></a><h5 id="RACAD-GUID-D0715642-2C97-422A-B630-32FAC077A58E" class="sect5">群集数据库性能页面</h5>
                     <div>
                        <p>“Oracle Enterprise Manager群集数据库性能”页面提供了数据库性能统计信息的快速概览。</p>
                        <p>统计信息将在图表中的群集数据库中的所有实例中汇总。使用图表旁边的链接，您可以获得更具体的信息并执行以下任何任务：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>确定性能问题的原因。</p>
                           </li>
                           <li>
                              <p>决定是否需要添加或重新分配资源。</p>
                           </li>
                           <li>
                              <p>调整SQL计划和架构以获得更好的优化。</p>
                           </li>
                           <li>
                              <p>解决性能问题</p>
                           </li>
                        </ul>
                        <p>“群集数据库性能”页面上的图表包括以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">图群集主机负载平均</span> ：群集数据库性能页面群集主机负载平均线图显示，在数据库以外的潜在问题。该图表显示前一小时群集中可用节点的最大，平均和最小负载值。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">全局缓存块访问延迟的图表</span> ：每个群集数据库实例在其系统全局区域（SGA）中都有自己的缓冲区缓存。使用缓存融合，Oracle RAC环境在逻辑上组合每个实例的缓冲区缓存，以使数据库实例能够处理数据，就像数据驻留在逻辑上组合的单个缓存一样。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">图表平均活动会话</span> ：群集数据库性能页面的平均活动会话图表显示了数据库内部潜在的问题。类别（称为等待类）显示数据库使用资源的程度，例如CPU或磁盘I / O.将CPU时间与等待时间进行比较有助于确定有效工作消耗了多少响应时间，而不是等待其他进程可能拥有的资源。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">图表数据库吞吐量</span> ：数据库的吞吐量图表总结出现的平均活动会话图表中的任何资源争用，并且还显示数据库多少工作执行代表用户或应用程序。“每秒”视图显示与登录次数相比的事务数，以及与每秒重做大小相比的物理读取量。“每个事务”视图显示与每个事务的重做大小相比的物理读取量。登录是登录到数据库的用户数。
                              </p>
                           </li>
                        </ul>
                        <p>此外，“群集数据库性能”页面上的“ <span class="bold">顶级活动”</span>向下钻取菜单使您可以通过等待事件，服务和实例查看活动。此外，您可以通过移动图表上的滑块来查看有关SQL /会话的详细信息。
                        </p>
                        <p>“ <span class="bold">Cluster Database Performance</span> ”（ <span class="bold">群集数据库性能）</span>页面可让您快速了解Oracle RAC数据库的性能统计信息。统计信息在群集数据库中的所有实例之间汇总，以便用户可以在不通过所有实例的情况下识别性能问题。为帮助分类与服务相关的性能问题，Oracle Enterprise Manager在以下级别聚合活动数据：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>通过等待聚合</p>
                              <p>所有活动数据分为12类：CPU，调度程序，用户I / O，系统I / O，并发，应用程序，提交，配置，管理，网络，群集和其他。显示的数据将从所有正在运行的实例中汇总。</p>
                           </li>
                           <li>
                              <p>按服务汇总</p>
                              <p>为每个服务汇总所有活动数据。当以这种方式呈现活动数据时，很容易识别哪个服务最活跃，并且需要更多分析。</p>
                           </li>
                           <li>
                              <p>按实例聚合</p>
                              <p>作为类似的工作，如果服务不是感兴趣的，则为每个实例汇总活动数据。</p>
                           </li>
                        </ul>
                        <p>聚合在提供活动数据的页面上提供，包括：数据库性能页面，热门活动页面，等待详细信息页面和服务详细信息页面。</p>
                     </div>
                  </div>
               </div><a id="RACAD7400"></a><div class="sect3"><a id="GUID-569AD18F-FAA7-4E0C-B291-3BC1FC634293" name="GUID-569AD18F-FAA7-4E0C-B291-3BC1FC634293"></a><h4 id="RACAD-GUID-569AD18F-FAA7-4E0C-B291-3BC1FC634293" class="sect4">调整Oracle RAC数据库</h4>
                  <div>
                     <p>Oracle数据库的所有非群集调整实践都适用于Oracle RAC数据库。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../tdppt/part-I-getting-started.html#TDPPT-GUID-8CBE0D05-A500-408E-A506-714BD1637B39" target="_blank"><span><cite>Oracle数据库2天+性能调优指南</cite></span></a></li>
                           <li><a href="../tgdba/part-II-diagnosing-and-tuning-database-performance.html#TGDBA-GUID-E0EEBB00-000C-48EA-9F81-6BD867B78405" target="_blank"><span><cite>Oracle数据库性能调整指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD7713"></a><a id="RACAD7714"></a><a id="RACAD971"></a><div class="sect2"><a id="GUID-5C01B293-1A2B-4E56-9FED-576361E0E655" name="GUID-5C01B293-1A2B-4E56-9FED-576361E0E655"></a><h3 id="RACAD-GUID-5C01B293-1A2B-4E56-9FED-576361E0E655" class="sect3">验证Oracle RAC的互连设置</h3>
               <div>
                  <p>使用SQL语句验证Oracle RAC的互连设置。</p>
                  <p>互连和节点间通信协议可以影响<a href="glossary.html#GUID-178C264E-12FF-468C-89B5-99CD47A4B373"><span class="xrefglossterm">缓存融合</span></a>性能。此外，互连带宽，延迟和IPC协议的效率决定了Cache Fusion处理块传输的速度。
                  </p>
                  <p>要验证所连接的Oracle RAC数据库实例的互连设置，请查询<code class="codeph">V$CLUSTER_INTERCONNECTS</code>和<code class="codeph">V$CONFIGURED_INTERCONNECTS</code>视图。例如：</p>
                  <div class="example" id="GUID-5C01B293-1A2B-4E56-9FED-576361E0E655__GUID-06EEDFFE-8579-40A0-9348-E5F5401C016F">
                     <p class="titleinexample">示例14-1使用V $ CLUSTER_INTERCONNECTS验证互连设置</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM V $ CLUSTER_INTERCONNECTS;名称IP_ADDRESS IS_PUBLIC SOURCE --------------- -------------- --- -------------- ----------------- eth2 10.137.20.181 NO Oracle Cluster Repository</code></pre></div>
                  <!-- class="example" -->
                  <div class="infoboxnote" id="GUID-5C01B293-1A2B-4E56-9FED-576361E0E655__GUID-93E9650C-A943-457A-A129-FAAAF102EB17">
                     <p class="notep1">注意：</p>
                     <p>您可以查询<code class="codeph">GV$CLUSTER_INTERCONNECTS</code>视图以显示集群中所有实例的条目。
                     </p>
                  </div>
                  <div class="example" id="GUID-5C01B293-1A2B-4E56-9FED-576361E0E655__GUID-ED10F809-2EBF-4ACB-9488-957DE519A5E4">
                     <p class="titleinexample">示例14-2使用V $ CONFIGURED_INTERCONNECTS验证互连设置</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM V $ CONFIGURED_INTERCONNECTS;名称IP_ADDRESS IS_PUBLIC SOURCE --------------- --------------- --- ------------- ------------------ eth2 10.137.20.181否Oracle Cluster Repository eth0 10.137.8.225是Oracle Cluster Repository</code></pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="RACAD972"></a><div class="sect2"><a id="GUID-84D7CC89-1C25-4999-BBFD-7686B6E4838E" name="GUID-84D7CC89-1C25-4999-BBFD-7686B6E4838E"></a><h3 id="RACAD-GUID-84D7CC89-1C25-4999-BBFD-7686B6E4838E" class="sect3">影响互连处理</h3>
               <div>
                  <p>互联互通后，您无法显着影响其性能。但是，您可以通过调整进程间通信（IPC）缓冲区大小来影响互连协议的效率。</p>
                  <p>Oracle Cluster Registry（OCR）存储系统的互连信息。使用Oracle接口配置（OIFCFG）命令行实用程序<code class="codeph">oifcfg getif</code>命令或OCRDUMP实用程序来标识您正在使用的互连。然后，您可以通过运行OIFCFG命令来更改正在使用的互连。
                  </p>
                  <p>虽然您<span class="italic">很少</span>需要设置<code class="codeph">CLUSTER_INTERCONNECTS</code>参数，但可以使用它来分配专用网络IP地址或NIC，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">CLUSTER_INTERCONNECTS = 10.0.0.1</pre><p>如果您使用的是特定于操作系统的供应商IPC协议，则跟踪信息可能不会显示IP地址。</p>
                  <div class="infoboxnote" id="GUID-84D7CC89-1C25-4999-BBFD-7686B6E4838E__GUID-D4B0082A-AE06-4DE3-A0C4-5806835012E3">
                     <p class="notep1">笔记：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您还可以使用OIFCFG命令分配专用网络或专用IP地址。</p>
                        </li>
                        <li>
                           <p>如果您的群集安装了Oracle Clusterware 12 <span class="italic">c第</span> 2版（12.2）或更高版本，则可以将IPv4或IPv6地址分配给多个专用网络。您必须选择一个或另一个协议，并将该协议用于群集中的所有专用网络。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../cwadd/oracle-interface-configuration-tool-oifcfg-command-reference.html#CWADD-GUID-518BD051-E9F1-4B62-B86B-02A90C252580" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        <li><a href="../cwadd/oracle-cluster-registry-utility-reference.html#CWADD-GUID-E62EC034-0C70-456D-A974-8694646A23A2" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        <li><a href="../refrn/CLUSTER_INTERCONNECTS.html#REFRN-GUID-6B0B0F1D-3DB0-415B-B914-2649FE02E4DA" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD718"></a><div class="sect2"><a id="GUID-04B6632F-EC4E-4317-9BD6-D7991C429DD5" name="GUID-04B6632F-EC4E-4317-9BD6-D7991C429DD5"></a><h3 id="RACAD-GUID-04B6632F-EC4E-4317-9BD6-D7991C429DD5" class="sect3">Oracle RAC中的性能视图</h3>
               <div>
                  <p>每个实例都有一组特定于实例的视图，前缀为<code class="codeph">V$</code> 。
                  </p>
                  <p>您还可以查询全局动态性能视图，以从所有限定实例中检索性能信息。全局动态性能视图名称以<code class="codeph">GV$</code>为前缀。
                  </p>
                  <p>查询<code class="codeph">GV$</code>视图从所有限定实例中检索<code class="codeph">V$</code>视图信息。除了<code class="codeph">V$</code>信息之外，每个<code class="codeph">GV$</code>视图还包含一个名为<code class="codeph">INST_ID</code>且数据类型为<code class="codeph">NUMBER</code>的额外列。 <code class="codeph">INST_ID</code>列显示从中获取关联的<code class="codeph">V$</code>视图信息的实例编号。
                  </p>
                  <p>您可以使用<code class="codeph">INST_ID</code>列作为过滤器从可用实例的子集中检索<code class="codeph">V$</code>信息。例如，以下查询从实例2和5的<code class="codeph">V$LOCK</code>视图中检索信息：</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM GV $ LOCK WHERE INST_ID = 2 OR INST_ID = 5;</code></pre></div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../refrn/about-dynamic-performance-views.html#REFRN-GUID-884B21B1-7C87-41E1-8F97-C4668704AF30" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD7401"></a><div class="sect2"><a id="GUID-A2C906EF-8D6B-4A70-8439-470AC3532ADA" name="GUID-A2C906EF-8D6B-4A70-8439-470AC3532ADA"></a><h3 id="RACAD-GUID-A2C906EF-8D6B-4A70-8439-470AC3532ADA" class="sect3">使用CATCLUST.SQL创建Oracle RAC数据字典视图</h3>
               <div>
                  <p>如果未使用Database Configuration Assistant（DBCA）创建Oracle RAC数据库，则必须运行<code class="codeph">CATCLUST.SQL</code>脚本以创建与Oracle RAC相关的视图和表。您必须具有<code class="codeph">SYSDBA</code>权限才能运行此脚本。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>“Oracle Real Application Clusters安装指南”</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD719"></a><div class="sect2"><a id="GUID-5C5BE0E4-2E88-40E1-A5C3-F1240DDA6AEC" name="GUID-5C5BE0E4-2E88-40E1-A5C3-F1240DDA6AEC"></a><h3 id="RACAD-GUID-5C5BE0E4-2E88-40E1-A5C3-F1240DDA6AEC" class="sect3">Oracle RAC性能统计信息</h3>
               <div>
                  <p><a id="d43824e2401" class="indexterm-anchor"></a> Oracle RAC统计信息显示为<a id="d43824e2406" class="indexterm-anchor"></a>消息请求计数器或<a id="d43824e2409" class="indexterm-anchor"></a>定时统计。消息请求计数器包括显示特定类型的数量的统计信息<a id="d43824e2412" class="indexterm-anchor"></a><a id="d43824e2416" class="indexterm-anchor"></a><a id="d43824e2418" class="indexterm-anchor"></a>阻止模式转换。定时统计信息显示等待特定类型操作的读写I / O的总时间或平均时间。
                  </p>
               </div>
            </div><a id="RACAD721"></a><div class="sect2"><a id="GUID-42E1B55A-4685-4CED-98CA-1BB576650D1A" name="GUID-42E1B55A-4685-4CED-98CA-1BB576650D1A"></a><h3 id="RACAD-GUID-42E1B55A-4685-4CED-98CA-1BB576650D1A" class="sect3">Oracle RAC环境中的自动工作负载存储库</h3>
               <div>
                  <p>您可以使用自动工作负载存储库来监视与Oracle RAC数据库相关的性能统计信息。</p>
                  <p><a href="glossary.html#GUID-A77E24D9-6B1E-47B1-A5AD-A64E34A6F023"><span class="xrefglossterm">自动工作负载存储库（AWR）</span></a>每小时自动生成一次性能数据快照，并在工作负载存储库中收集统计信息。在Oracle RAC环境中，每个AWR快照都捕获来自群集中所有活动实例的数据。从同一时间点捕获每个快照集的数据。AWR将所有实例的快照数据存储在同一个表中，并且数据由实例限定符标识。例如， <code class="codeph">BUFFER_BUSY_WAIT</code>统计信息显示每个实例上的缓冲区等待数。AWR不存储从整个群集聚合的数据。换句话说，为每个单独的实例存储数据。
                  </p>
                  <p>使用自动数据库诊断监视器（ADDM），您可以分析AWR收集的有关Oracle数据库可能出现的性能问题的信息。ADDM从集群范围的角度提供性能数据，从而使您能够在全球范围内分析性能。在Oracle RAC环境中，ADDM可以使用从所有实例收集的数据分析性能，并以不同的粒度级别呈现它，包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>分析整个集群</p>
                     </li>
                     <li>
                        <p>分析特定的数据库实例</p>
                     </li>
                     <li>
                        <p>分析数据库实例的子集</p>
                     </li>
                  </ul>
                  <p>要执行这些分析，可以在ADDM for Oracle RAC模式下运行ADDM Advisor以执行整个群集的分析;在本地ADDM模式下分析单个实例的性能;或者在部分ADDM模式下分析实例的子集。通过Oracle Enterprise Manager中的Advisor Central或通过<code class="codeph">DBMS_ADVISOR</code>和<code class="codeph">DBMS_ADDM</code> PL / SQL包使用顾问程序框架激活ADDM分析。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../tgdba/automatic-performance-diagnostics.html#TGDBA-GUID-843A596D-2D8B-422D-9C8D-73C0EF52739D" target="_blank"><span><cite>Oracle数据库性能调整指南</cite></span></a></li>
                        <li><a href="../arpls/DBMS_ADVISOR.html#ARPLS-GUID-189444D1-153F-4DBC-8AA2-7FE0327A3460" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD987"></a><div class="sect2"><a id="GUID-4CA5E706-8DB7-4388-812F-51736A659596" name="GUID-4CA5E706-8DB7-4388-812F-51736A659596"></a><h3 id="RACAD-GUID-4CA5E706-8DB7-4388-812F-51736A659596" class="sect3">Oracle RAC的活动会话历史记录报告</h3>
               <div>
                  <p>本节介绍Oracle RAC的活动会话历史记录（ASH）报告，主题如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="monitoring-performance.html#GUID-3F839679-FCF5-4078-9B39-61D737021690">Oracle RAC的ASH报告概述</a></p>
                     </li>
                     <li>
                        <p><a href="monitoring-performance.html#GUID-D61A11E7-CFD4-489A-9967-B79A19E9A044">适用于Oracle RAC的ASH报告：热门群集事件</a></p>
                     </li>
                     <li>
                        <p><a href="monitoring-performance.html#GUID-458BE4B2-665E-427E-8587-C3504B8E839F">适用于Oracle RAC的ASH报告：顶级远程实例</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/racad&amp;id=TGDBA-GUID-D6360982-465F-49B3-8021-8CCD0E3E3D3E" target="_blank"><span><cite>Oracle数据库性能调整指南</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="RACAD7402"></a><div class="sect3"><a id="GUID-3F839679-FCF5-4078-9B39-61D737021690" name="GUID-3F839679-FCF5-4078-9B39-61D737021690"></a><h4 id="RACAD-GUID-3F839679-FCF5-4078-9B39-61D737021690" class="sect4">Oracle RAC的ASH报告概述</h4>
                  <div>
                     <p>灰<a id="d43824e2963" class="indexterm-anchor"></a><a id="d43824e2967" class="indexterm-anchor"></a>是Oracle数据库自我管理框架不可或缺的一部分，非常有用<a id="d43824e2970" class="indexterm-anchor"></a>诊断Oracle RAC环境中的性能问题。ASH报告统计提供了详细信息<a id="d43824e2975" class="indexterm-anchor"></a> Oracle数据库会话活动。Oracle数据库记录有关的信息<a id="d43824e2980" class="indexterm-anchor"></a>所有活动Oracle RAC实例的活动会话，并将此数据存储在<a id="d43824e2983" class="indexterm-anchor"></a>系统全局区域（SGA）。连接到数据库并使用CPU的任何会话都被视为活动会话。例外情况是等待属于该事件的事件的会话<a id="d43824e2987" class="indexterm-anchor"></a>闲暇等课。
                     </p>
                     <p>ASH报告通过仅捕获有关活动会话的信息来呈现可管理的数据集。数据量与正在执行的工作直接相关，而不是与系统上允许的会话数相关。</p>
                     <p>在指定持续时间内收集的ASH统计数据可以放入ASH报告中。每个ASH报告分为多个部分，以帮助您识别ADDM分析中未出现的短期性能问题。特定于Oracle RAC的两个ASH报告部分是Top Cluster Events和Top Remote Instance，如下两节所述。</p>
                  </div>
               </div><a id="RACAD7403"></a><div class="sect3"><a id="GUID-D61A11E7-CFD4-489A-9967-B79A19E9A044" name="GUID-D61A11E7-CFD4-489A-9967-B79A19E9A044"></a><h4 id="RACAD-GUID-D61A11E7-CFD4-489A-9967-B79A19E9A044" class="sect4">适用于Oracle RAC的ASH报告：热门群集事件</h4>
                  <div>
                     <p>ASH报告<a id="d43824e3144" class="indexterm-anchor"></a> Top Cluster Events部分是特定于Oracle RAC的Top Events报告的一部分。 “热门群集事件”报告列出了占群集等待类事件中会话活动百分比最高的事件以及受影响实例的实例号。您可以使用此信息来识别哪些事件和实例导致高比例的群集等待事件。
                     </p>
                  </div>
               </div><a id="RACAD7404"></a><div class="sect3"><a id="GUID-458BE4B2-665E-427E-8587-C3504B8E839F" name="GUID-458BE4B2-665E-427E-8587-C3504B8E839F"></a><h4 id="RACAD-GUID-458BE4B2-665E-427E-8587-C3504B8E839F" class="sect4">适用于Oracle RAC的ASH报告：顶级远程实例</h4>
                  <div>
                     <p><a id="d43824e3287" class="indexterm-anchor"></a><a id="d43824e3291" class="indexterm-anchor"></a> ASH报告<a id="d43824e3294" class="indexterm-anchor"></a> Top Remote Instance部分是特定于Oracle RAC的Top Load Profile报告的一部分。 “顶级远程实例”报告显示群集等待事件以及占会话活动最高百分比的实例的实例编号。您可以使用此信息来标识导致扩展群集等待期的实例。
                     </p>
                  </div>
               </div>
            </div><a id="RACAD975"></a><div class="sect2"><a id="GUID-766BE4D4-89C0-42B1-BB9D-B1F4A61D9A6C" name="GUID-766BE4D4-89C0-42B1-BB9D-B1F4A61D9A6C"></a><h3 id="RACAD-GUID-766BE4D4-89C0-42B1-BB9D-B1F4A61D9A6C" class="sect3">监视Oracle RAC统计信息和等待事件</h3>
               <div>
                  <p>本节介绍Oracle RAC特有的等待事件和统计信息，以及在评估自动工作负载存储库（AWR），Statspack或动态性能视图的即席查询生成的性能数据时如何解释它们。</p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="monitoring-performance.html#GUID-428C0B06-2FC0-46A7-9F20-BE90ABE76C37">AWR和Statspack报告中的Oracle RAC统计信息和事件</a></p>
                     </li>
                     <li>
                        <p><a href="monitoring-performance.html#GUID-991F4A31-E78F-4A27-9849-FC3D9C636586" title="分析和解释导致会话等待的原因是确定花费时间的重要方法。">Oracle RAC等待事件</a></p>
                     </li>
                     <li>
                        <p><a href="monitoring-performance.html#GUID-D4FBE1ED-0FD6-4665-9599-53847F711002" title="您可以通过识别所有实例经常使用（热）的数据块和对象来监视GCS性能。">通过分析GCS和GES统计来监控性能</a></p>
                     </li>
                     <li>
                        <p><a href="monitoring-performance.html#GUID-B20D80DA-F388-4307-8B5A-2259F2CC5FFD" title="描述如何通过识别频繁读取和修改的对象以及远程访问强加的服务时间来监视GCS性能。">使用GCS统计分析缓存融合传输影响</a></p>
                     </li>
                     <li>
                        <p><a href="monitoring-performance.html#GUID-A06093D2-5A34-4D2A-BA11-7E988EB457D2" title="AWR和Statspack报告或动态性能视图中报告的显示总时间较长的大多数全局缓存等待事件都是正常的，并且可能将自己显示为没有实际指示问题的顶级数据库时间消费者。">基于等待事件的响应时间分析</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../tgdba/instance-tuning-using-performance-views.html#TGDBA-GUID-386931AB-A199-41E8-A20C-7317A4FDCACC" target="_blank"><span><cite>Oracle数据库性能调整指南</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="RACAD976"></a><div class="sect3"><a id="GUID-428C0B06-2FC0-46A7-9F20-BE90ABE76C37" name="GUID-428C0B06-2FC0-46A7-9F20-BE90ABE76C37"></a><h4 id="RACAD-GUID-428C0B06-2FC0-46A7-9F20-BE90ABE76C37" class="sect4">AWR和Statspack报告中的Oracle RAC统计信息和事件</h4>
                  <div>
                     <p>AWR和。生成的统计信息快照<a id="d43824e3640" class="indexterm-anchor"></a>可以通过生成基于常规统计信息显示摘要数据（如负载和群集配置文件）的报告来评估Statspack <a id="d43824e3643" class="indexterm-anchor"></a>等待在每个实例上收集的事件。
                     </p>
                     <p>大多数相关数据都汇总在Oracle RAC Statistics页面上。这些信息包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d43824e3651" class="indexterm-anchor"></a>全局缓存负载配置文件</p>
                        </li>
                        <li>
                           <p>全局缓存效率百分比 - 工作负载特征</p>
                        </li>
                        <li>
                           <p><a id="d43824e3659" class="indexterm-anchor"></a><a id="d43824e3661" class="indexterm-anchor"></a>全局缓存和入队服务（GES） - 消息统计</p>
                        </li>
                     </ul>
                     <p>其他Oracle RAC部分将在报告的后面部分显示：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>全球入队统计</p>
                        </li>
                        <li>
                           <p><a id="d43824e3674" class="indexterm-anchor"></a>全球CR统计</p>
                        </li>
                        <li>
                           <p>全球<code class="codeph">CURRENT</code>服务统计</p>
                        </li>
                        <li>
                           <p>全局缓存传输统计信息</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RACAD977"></a><div class="sect3"><a id="GUID-991F4A31-E78F-4A27-9849-FC3D9C636586" name="GUID-991F4A31-E78F-4A27-9849-FC3D9C636586"></a><h4 id="RACAD-GUID-991F4A31-E78F-4A27-9849-FC3D9C636586" class="sect4">Oracle RAC等待事件</h4>
                  <div>
                     <p>分析和解释导致会话等待的原因是确定花费时间的重要方法。</p>
                     <p>在Oracle RAC中，等待时间归因于反映请求的确切结果的事件。例如，当实例上的会话在全局高速缓存中查找块时，它不知道它是否将接收由另一个实例高速缓存的数据，或者它是否将接收从磁盘读取的消息。全局缓存的等待事件传达精确信息并等待全局缓存块或消息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>总结在一个名为Cluster Wait Class的更广泛的类别中</p>
                        </li>
                        <li>
                           <p>暂时由占位符事件表示，该事件在等待块时处于活动状态，例如：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">gc当前阻止请求</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">gc cr阻止请求</code></p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>在知道请求结果时归因于精确事件，例如：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">gc当前块3路</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">gc当前块忙</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">gc cr block grant 2-way</code></p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>总之，Oracle RAC的等待事件传达了对性能分析有价值的信息。它们用于自动数据库诊断监视器（ADDM），以便精确诊断缓存融合的效果。</p>
                  </div>
               </div><a id="RACAD980"></a><div class="sect3"><a id="GUID-D4FBE1ED-0FD6-4665-9599-53847F711002" name="GUID-D4FBE1ED-0FD6-4665-9599-53847F711002"></a><h4 id="RACAD-GUID-D4FBE1ED-0FD6-4665-9599-53847F711002" class="sect4">通过分析GCS和GES统计来监控性能</h4>
                  <div>
                     <p>要确定与实例间消息传递和争用相关的工作量和成本，请检查块传输速率，每个事务所做的远程请求，等待全局缓存事件的数量和时间，如以下标题所述：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="monitoring-performance.html#GUID-C435C307-BFE7-42BB-A086-1D7F2C9A158D">分析Oracle RAC中缓存融合的效果</a></p>
                        </li>
                        <li>
                           <p><a href="monitoring-performance.html#GUID-1D022403-751D-4BCC-9B05-38D1F6948006" title="您可以通过识别所有实例经常使用（热）的数据块和对象来监视GCS性能。">使用GCS和GES统计分析性能</a></p>
                        </li>
                     </ul>
                  </div><a id="RACAD981"></a><div class="sect4"><a id="GUID-C435C307-BFE7-42BB-A086-1D7F2C9A158D" name="GUID-C435C307-BFE7-42BB-A086-1D7F2C9A158D"></a><h5 id="RACAD-GUID-C435C307-BFE7-42BB-A086-1D7F2C9A158D" class="sect5">分析Oracle RAC中缓存融合的效果</h5>
                     <div>
                        <p>访问全局缓存中的块并保持一致性的效果表示为：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>该<a id="d43824e4177" class="indexterm-anchor"></a> <code class="codeph">current</code>和<code class="codeph">cr</code>块的全局高速缓存服务（GCS）统计信息，例如， <code class="codeph">gc current blocks received</code> <code class="codeph">gc cr blocks received</code> ，等等</p>
                           </li>
                           <li>
                              <p>GCS等待事件，对于<code class="codeph">gc current block 3-way</code> ， <code class="codeph">gc cr grant 2-way</code> ，等等</p>
                           </li>
                        </ul>
                        <p>缓存融合传输的响应时间由物理互连组件强加的消息传递和处理时间决定<a id="d43824e4203" class="indexterm-anchor"></a> IPC协议和<a id="d43824e4206" class="indexterm-anchor"></a> GCS协议。除偶尔的日志写入外，它不受磁盘I / O因素的影响。缓存融合协议不需要I / O来保证数据文件<a id="d43824e4209" class="indexterm-anchor"></a> <a href="glossary.html#GUID-75E710B4-A9ED-4C89-85B4-DFA415917AA3"><span class="xrefglossterm">缓存一致性</span></a>和Oracle RAC固有地不会导致比非聚簇实例更多的磁盘I / O.
                        </p>
                     </div>
                  </div><a id="RACAD982"></a><div class="sect4"><a id="GUID-1D022403-751D-4BCC-9B05-38D1F6948006" name="GUID-1D022403-751D-4BCC-9B05-38D1F6948006"></a><h5 id="RACAD-GUID-1D022403-751D-4BCC-9B05-38D1F6948006" class="sect5">使用GCS和GES统计分析性能</h5>
                     <div>
                        <p>您可以通过识别所有实例经常使用（ <span class="italic">热</span> ）的数据块和对象来监视GCS性能。
                        </p>
                        <p>某些块上的高并发性可以通过GCS等待事件和时间来识别。</p>
                        <p><code class="codeph">gc current block busy</code>等待事件表示对高速缓存数据块的访问被延迟，因为它们在远程或本地高速缓存中忙碌。这可能是由以下任何原因引起的：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>这些街区被固定了</p>
                           </li>
                           <li>
                              <p>这些街区被会议所阻止</p>
                           </li>
                           <li>
                              <p>这些块被远程实例上的日志写入延迟</p>
                           </li>
                           <li>
                              <p>同一个实例上的会话已经访问了一个块，该块在实例之间转换，当前会话需要在它后面等待（例如， <code class="codeph">gc current block busy</code> ）</p>
                           </li>
                        </ul>
                        <p>使用<code class="codeph">V$SESSION_WAIT</code>视图标识具有争用的对象和数据块。GCS等待事件分别包含p1和p2中块请求的文件和块号。
                        </p>
                        <p>添加了一个额外的段统计信息<code class="codeph">gc buffer busy</code> ，可以快速确定繁忙的对象，而无需查询前面提到的<code class="codeph">V$SESSION_WAIT</code>视图。
                        </p>
                        <p>AWR基础结构提供活动会话历史记录的视图，该视图还可用于跟踪最近的等待事件及其参数。因此，它适用于热块分析。AWR和Statspack使用的大多数报告工具都包含对象统计信息和群集等待类类别，因此前面提到的视图的采样在很大程度上是不必要的。</p>
                        <div class="infoboxnote" id="GUID-1D022403-751D-4BCC-9B05-38D1F6948006__GUID-900545EB-3AA8-4F2B-BD12-52E99E3CC597">
                           <p class="notep1">注意：</p>
                           <p>Oracle建议使用ADDM和AWR。但是，Statspack可用于向后兼容。Statspack仅提供报告。您必须在级别7运行Statspack以收集与块争用和段块等待相关的统计信息。</p>
                        </div>
                        <p>建议在AWR基础架构收集的快照数据上运行ADDM，以获得对全局缓存影响的总体评估。该通报还将识别繁忙对象和SQL最高群集等待时间。</p>
                     </div>
                  </div>
               </div><a id="RACAD985"></a><div class="sect3"><a id="GUID-B20D80DA-F388-4307-8B5A-2259F2CC5FFD" name="GUID-B20D80DA-F388-4307-8B5A-2259F2CC5FFD"></a><h4 id="RACAD-GUID-B20D80DA-F388-4307-8B5A-2259F2CC5FFD" class="sect4">使用GCS统计分析缓存融合传输影响</h4>
                  <div>
                     <p>描述如何通过识别频繁读取和修改的对象以及远程访问强加的服务时间来监视GCS性能。</p>
                     <p>等待块到达可能构成响应时间的重要部分，就像从磁盘读取可能增加块访问延迟一样，只有缓存融合传输通常比磁盘访问延迟更快。</p>
                     <p>以下等待事件表明远程高速缓存的块已经发送到本地实例，而没有繁忙，固定或需要日志刷新：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">gc当前阻止2路</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">gc当前块3路</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">gc cr阻挡2路</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">gc cr block 3-way</code></p>
                        </li>
                     </ul>
                     <p><code class="codeph">gc current blocks received</code>和<code class="codeph">gc current blocks received</code>到的<code class="codeph">gc cr blocks received</code>的对象统计信息可以快速识别活动实例共享的索引和表。如前所述，创建ADDM分析通常会指向可能受实例间争用影响的SQL语句和数据库对象。
                     </p>
                     <p>前面列表中提到的事件的平均等待时间的任何增加都可能由以下事件引起：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>高负载：CPU短缺，长时间队列，调度延迟</p>
                        </li>
                        <li>
                           <p>配置错误：使用公共而非私有互连来实现消息和阻塞流量</p>
                        </li>
                     </ul>
                     <p>如果平均等待时间是可接受的并且不能诊断互连或负载问题，则等待的累积时间通常可归因于需要调整以最小化所访问的块数的一些SQL语句。</p>
                     <p><code class="codeph">V$SQLAREA</code>的列<code class="codeph">CLUSTER_WAIT_TIME</code>表示单个SQL语句对全局缓存事件的等待时间，并将标识可能需要调整的SQL。
                     </p>
                  </div>
               </div><a id="RACAD986"></a><div class="sect3"><a id="GUID-A06093D2-5A34-4D2A-BA11-7E988EB457D2" name="GUID-A06093D2-5A34-4D2A-BA11-7E988EB457D2"></a><h4 id="RACAD-GUID-A06093D2-5A34-4D2A-BA11-7E988EB457D2" class="sect4">基于等待事件的响应时间分析</h4>
                  <div>
                     <p>AWR和Statspack报告或动态性能视图中报告的显示总时间较长的大多数全局缓存等待事件都是正常的，并且可能将自己显示为没有实际指示问题的顶级数据库时间消费者。</p>
                     <p>本节介绍在解释性能数据时应注意的频繁等待事件。</p>
                     <p>如果用户响应时间增加并且等待的时间比例高于全局缓存，则应确定原因。大多数报告都包括按总时间百分比排序的事件明细。</p>
                     <p>从ADDM报告开始是很有用的，该报告分析了常规收集的性能统计信息，并指出了等待时间最多的对象和SQL，然后转到AWR生成的更详细的报告。 STATSPACK。</p>
                     <p>Oracle RAC的等待事件包括以下类别：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="monitoring-performance.html#GUID-87EF8F96-931D-4967-A356-868D142C6661">与块相关的等待事件</a></p>
                        </li>
                        <li>
                           <p><a href="monitoring-performance.html#GUID-00B64C38-D3B5-48F6-A29A-EB8A17C34671">与消息相关的等待事件</a></p>
                        </li>
                        <li>
                           <p><a href="monitoring-performance.html#GUID-DAC12104-32AE-4D5B-83F9-BA5C1FFDB1FE">与争用相关的等待事件</a></p>
                        </li>
                        <li>
                           <p><a href="monitoring-performance.html#GUID-27A3EBFC-5146-44D4-BCB0-86ED47D8660B">与负载相关的等待事件</a></p>
                        </li>
                     </ul>
                  </div><a id="RACAD8306"></a><div class="sect4"><a id="GUID-87EF8F96-931D-4967-A356-868D142C6661" name="GUID-87EF8F96-931D-4967-A356-868D142C6661"></a><h5 id="RACAD-GUID-87EF8F96-931D-4967-A356-868D142C6661" class="sect5">与块相关的等待事件</h5>
                     <div>
                        <p>主要的等待事件<a id="d43824e4927" class="indexterm-anchor"></a>与块相关的等待是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">gc当前阻止2路</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">gc当前块3路</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">gc cr阻挡2路</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">gc cr block 3-way</code></p>
                           </li>
                        </ul>
                        <p>与块相关的等待事件统计信息表明接收到的块是2路或3路消息的结果，也就是说，块是从需要1条消息和1条传输的资源主机发送的，或者是转发到发送它的第三个节点，需要2个消息和1个块传输。</p>
                     </div>
                  </div><a id="RACAD8307"></a><div class="sect4"><a id="GUID-00B64C38-D3B5-48F6-A29A-EB8A17C34671" name="GUID-00B64C38-D3B5-48F6-A29A-EB8A17C34671"></a><h5 id="RACAD-GUID-00B64C38-D3B5-48F6-A29A-EB8A17C34671" class="sect5">与消息相关的等待事件</h5>
                     <div>
                        <p>主要的等待事件<a id="d43824e5093" class="indexterm-anchor"></a>与消息相关的等待是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">gc当前授予2路</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">gc cr grant 2-way</code></p>
                           </li>
                        </ul>
                        <p>与消息相关的等待事件统计信息表明未收到任何阻止，因为它未在任何实例中缓存。而是给出了全局授权，使请求实例能够从磁盘读取块或修改它。</p>
                        <p>如果这些事件消耗的时间很长，那么可以假设经常使用的SQL会导致大量磁盘I / O（在<code class="codeph">cr grant</code> ）或者工作负载会插入大量数据并需要查找并经常格式化新块（在当前授权的情况下）。
                        </p>
                     </div>
                  </div><a id="RACAD8308"></a><div class="sect4"><a id="GUID-DAC12104-32AE-4D5B-83F9-BA5C1FFDB1FE" name="GUID-DAC12104-32AE-4D5B-83F9-BA5C1FFDB1FE"></a><h5 id="RACAD-GUID-DAC12104-32AE-4D5B-83F9-BA5C1FFDB1FE" class="sect5">与争用相关的等待事件</h5>
                     <div>
                        <p>主要的等待事件<a id="d43824e5255" class="indexterm-anchor"></a>与争用相关的等待是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">gc当前块忙</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">gc cr块忙</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">gc缓冲区繁忙获取/释放</code></p>
                           </li>
                        </ul>
                        <p>与争用相关的等待事件统计信息表明收到了一个由另一个节点上的会话固定的块，由于更改尚未刷新到磁盘或由于高并发性而被延迟，因此无法立即发送。当会话已经启动了缓存融合操作时，缓冲区也可能在本地忙，并且当同一节点上的另一个会话正在尝试读取或修改相同数据时，缓冲区正在等待其完成。在全局高速缓存中交换的块的高服务时间可能会加剧争用，这可能是由对相同数据的频繁并发读写访问引起的。</p>
                        <p><code class="codeph">gc current block busy</code>和<code class="codeph">gc cr block busy</code>等待事件表示发出请求的本地实例未立即接收到当前或一致的读取块。这些事件名称中的<span class="italic">忙碌</span>一词表示在远程实例上发送了块。例如，如果Oracle数据库尚未为块更改日志文件编写重做，则无法立即传送块。
                        </p>
                        <p>与<code class="codeph">block busy</code>等待事件相比， <code class="codeph">gc buffer busy</code>事件表示Oracle数据库无法立即授予对存储在本地缓冲区高速缓存中的数据的访问权限。这是因为缓冲区上的全局操作正在等待，并且操作尚未完成。换句话说，缓冲区正忙，所有其他尝试访问本地缓冲区的进程必须等待才能完成。
                        </p>
                        <p><code class="codeph">gc buffer busy</code>事件的存在也意味着存在块争用，这导致多个访问本地块的请求。Oracle数据库必须排队这些请求。Oracle数据库处理队列所需的时间长度取决于块的剩余服务时间。服务时间受任何网络延迟添加的处理时间，远程和本地实例的处理时间以及等待队列的长度的影响。
                        </p>
                        <p>当提醒这些特定等待具有高影响的性能问题时，应考虑平均等待时间和总等待时间。通常，可以发现互连或加载问题或针对大型共享工作集的SQL执行是根本原因。</p>
                     </div>
                  </div><a id="RACAD8309"></a><div class="sect4"><a id="GUID-27A3EBFC-5146-44D4-BCB0-86ED47D8660B" name="GUID-27A3EBFC-5146-44D4-BCB0-86ED47D8660B"></a><h5 id="RACAD-GUID-27A3EBFC-5146-44D4-BCB0-86ED47D8660B" class="sect5">与负载相关的等待事件</h5>
                     <div>
                        <p>主要的等待事件<a id="d43824e5442" class="indexterm-anchor"></a>与负载相关的等待是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">gc当前区块拥挤</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">gc cr阻塞拥挤</code></p>
                           </li>
                        </ul>
                        <p>与负载相关的等待事件表明GCS中发生了处理延迟，这通常是由高负载，CPU饱和引起的，并且必须通过额外的CPU，负载平衡，卸载处理到不同时间或者新的群集节点。对于所提到的事件，等待时间包括从发起块请求之后会话开始等待直到块到达的整个往返。</p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
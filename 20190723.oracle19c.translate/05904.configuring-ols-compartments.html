<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This tutorial demonstrates how to create Oracle Label Security compartments."></meta>
      <meta name="description" content="This tutorial demonstrates how to create Oracle Label Security compartments."></meta>
      <title>教程：在Oracle Label Security中配置隔离专区</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide"></meta>
      <meta property="og:description" content="This tutorial demonstrates how to create Oracle Label Security compartments."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="label-security-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-11T09:39:52-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96303-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="configuring-ols-levels.html" title="Previous" type="text/html"></link>
      <link rel="next" href="configuring-ols-groups.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Label Security Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OLSAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-ols-levels.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="configuring-ols-groups.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-label-security-tutorials.html" property="item" typeof="WebPage"><span property="name">Oracle Label Security教程</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">教程：在Oracle Label Security中配置隔离专区</li>
            </ol>
            <a id="GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD" name="GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD"></a>
            
            <h2 id="OLSAG-GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD" class="sect2"><span class="enumeration_chapter">9</span>教程：在Oracle Label Security中配置隔离专区</h2>
         </header>
         <div class="ind">
            <div>
               <p>本教程演示了如何创建Oracle Label Security隔离专区。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="configuring-ols-compartments.html#GUID-5A72FF71-0AA5-4FB1-B2DE-E192BC88A6DE">关于本教程</a><br>在本教程中，您将使用<code class="codeph">HR</code>模式来了解如何使用Oracle Label Security隔离专区。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-compartments.html#GUID-D3314573-7F9F-4F9C-910D-4D393285C433">第1步：为Lily Leagull创建一个帐户</a><br>Lily Leagull最初将拥有与Susan Mavris和Ida Neau相同的特权。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-compartments.html#GUID-B8DBFC5E-C6CD-4548-9970-A6EE941B8238">第2步：授权Lily Leagull获得HIGHLY_SENSITIVE级别</a><br>创建<code class="codeph">lleagull</code>帐户后，您可以授权它使用<code class="codeph">HIGHLY_SENSITIVE</code>级别。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-compartments.html#GUID-1A99D62E-AF1B-45D3-8DB5-1DA7B325B7B1">步骤3：为Oracle Label Security Policy创建两个隔离专区</a><br>所有三个用户（Susan Mavris，Ida Neau和Lily Leagull）都将使用隔间访问他们的数据。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-compartments.html#GUID-F2005DF2-E7A5-4F21-A0BA-6B155EAE904C">第4步：为隔离专区创建数据标签</a><br>您将为隔离专区创建三个数据标签。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-compartments.html#GUID-BC5CED85-B35A-492A-BBBE-4D2FCF906CC6">第5步：将标签分配给用户</a><br>将标签分配给用户将指定这些用户可以访问的行。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-compartments.html#GUID-653303D6-8E6D-4039-8E76-1F665C7117FB">步骤6：将策略标签添加到HR.EMPLOYEES表数据</a><br><code class="codeph">HR</code>用户将策略标签添加到<code class="codeph">EMPLOYEE_ID</code>列中的<code class="codeph">HR.EMPLOYEES</code>表数据。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-compartments.html#GUID-C77ABFE3-017C-4F06-BF71-B4702CDAC2C4">步骤7：测试Oracle Label Security Policy</a><br>要测试策略，每个用户都将尝试查询<code class="codeph">HR.EMPLOYEES</code>表。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-compartments.html#GUID-850AAB19-D669-4141-9CDF-44D43B4E9D18">步骤8：（可选）删除Oracle Label Security Policy Components</a><br>您可以删除Oracle Label Security策略， <code class="codeph">HR_ROLE</code>角色以及Ida Neau，Susan Mavris和Lily Leagull用户。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="oracle-label-security-tutorials.html" title="第III部分提供了有关如何创建Oracle Label Security策略的教程。">Oracle Label Security教程</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-5A72FF71-0AA5-4FB1-B2DE-E192BC88A6DE" name="GUID-5A72FF71-0AA5-4FB1-B2DE-E192BC88A6DE"></a><h3 id="OLSAG-GUID-5A72FF71-0AA5-4FB1-B2DE-E192BC88A6DE" class="sect3">关于本教程</h3>
               <div>
                  <p>在本教程中，您将使用<code class="codeph">HR</code>模式来了解如何使用Oracle Label Security隔离专区。
                  </p>
                  <p>本教程以上一个教程为基础，该教程演示了如何创建Oracle Label Security级别来控制两个用户Susan Mavris和Ida Neau对<code class="codeph">HR.EMPLOYEES</code>模式中的记录的访问。在本教程中，第三位用户Lily Leagull是该公司法律部门的律师。两名前雇员起诉公司，她必须能够访问他们的记录。她一定不能访问任何其他记录。对前用户的访问权限由您在上一个教程中创建的<code class="codeph">HIGHLY_SENSITIVE</code>级别设置。通过在<code class="codeph">HIGHLY_SENSITIVE</code>数据集（称为<code class="codeph">LEGAL</code>使用隔离区，可以访问两名起诉前雇员的记录。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="本教程演示了如何创建Oracle Label Security级别。">教程：在Oracle Label Security中配置级别</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-compartments.html#GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD" title="本教程演示了如何创建Oracle Label Security隔离专区。">教程：在Oracle Label Security中配置隔离专区</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-D3314573-7F9F-4F9C-910D-4D393285C433" name="GUID-D3314573-7F9F-4F9C-910D-4D393285C433"></a><h3 id="OLSAG-GUID-D3314573-7F9F-4F9C-910D-4D393285C433" class="sect3">第1步：为Lily Leagull创建一个帐户</h3>
               <div>
                  <p>Lily Leagull最初将拥有与Susan Mavris和Ida Neau相同的特权。</p>
                  <ol>
                     <li class="stepexpand"><span>以具有创建用户帐户权限并授予其角色权限的用户身份登录SQL * Plus。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>为Lily Leagull创建帐户并授予她<code class="codeph">HR_ROLE</code>角色，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">GRANT CONNECT，HR_ROLE到LLEAGULL通过<span class="italic">密码</span>识别;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-compartments.html#GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD" title="本教程演示了如何创建Oracle Label Security隔离专区。">教程：在Oracle Label Security中配置隔离专区</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-B8DBFC5E-C6CD-4548-9970-A6EE941B8238" name="GUID-B8DBFC5E-C6CD-4548-9970-A6EE941B8238"></a><h3 id="OLSAG-GUID-B8DBFC5E-C6CD-4548-9970-A6EE941B8238" class="sect3">第2步：授权Lily Leagull获得HIGHLY_SENSITIVE级别</h3>
               <div>
                  <p>创建<code class="codeph">lleagull</code>帐户后，您可以授权它使用<code class="codeph">HIGHLY_SENSITIVE</code>级别。
                  </p>
                  <ol>
                     <li class="stepexpand"><span>以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>授权<code class="codeph">lleagull</code>使用<code class="codeph">HIGHLY_SENSITIVE</code>级别。</span><div><code class="codeph">HIGHLY_SENSITIVE</code>是<code class="codeph">HS</code> 。</div>
                        <div><pre class="oac_no_warn" dir="ltr">BEGIN SA_USER_ADMIN.SET_LEVELS（policy_name =&gt;'HR_OLS_POL'，user_name =&gt;'LLEAGULL'，max_level =&gt;'HS'，min_level =&gt;'S'）;结束; /</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-compartments.html#GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD" title="本教程演示了如何创建Oracle Label Security隔离专区。">教程：在Oracle Label Security中配置隔离专区</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-1A99D62E-AF1B-45D3-8DB5-1DA7B325B7B1" name="GUID-1A99D62E-AF1B-45D3-8DB5-1DA7B325B7B1"></a><h3 id="OLSAG-GUID-1A99D62E-AF1B-45D3-8DB5-1DA7B325B7B1" class="sect3">步骤3：为Oracle Label Security Policy创建两个隔离专区</h3>
               <div>
                  <p>所有三个用户（Susan Mavris，Ida Neau和Lily Leagull）都将使用隔间访问他们的数据。</p>
                  <div class="section">两名人力资源员工Susan Mavris和Ida Neau将使用<code class="codeph">HR</code> 。法律部门员工Lily Leagull将使用<code class="codeph">LEGAL</code> （ <code class="codeph">LEG</code> ）隔间。
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>如有必要，请以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>按如下方式创建隔离专区：</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_COMPONENTS.CREATE_COMPARTMENT（policy_name =&gt;'HR_OLS_POL'，long_name =&gt;'HR'，short_name =&gt;'HR'，comp_num =&gt; 1000）; SA_COMPONENTS.CREATE_COMPARTMENT（policy_name =&gt;'HR_OLS_POL'，long_name =&gt;'LEGAL'，short_name =&gt;'LEG'，comp_num =&gt; 2000）;结束; /</pre><p>在本规范中， <code class="codeph">comp_num</code>不表示层次结构，因为<code class="codeph">level_num</code>设置具有级别。它仅用于帮助识别隔间。
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-compartments.html#GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD" title="本教程演示了如何创建Oracle Label Security隔离专区。">教程：在Oracle Label Security中配置隔离专区</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-F2005DF2-E7A5-4F21-A0BA-6B155EAE904C" name="GUID-F2005DF2-E7A5-4F21-A0BA-6B155EAE904C"></a><h3 id="OLSAG-GUID-F2005DF2-E7A5-4F21-A0BA-6B155EAE904C" class="sect3">第4步：为隔离专区创建数据标签</h3>
               <div>
                  <p>您将为隔离专区创建三个数据标签。</p>
                  <div class="section">在此过程中，数据标签将指定用户Susan Mavris，Ida Neau和Lily Leagull将在<code class="codeph">HR.EMPLOYEES</code>表中看到的行。
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>如有必要，请以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>创建数据标签，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_LABEL_ADMIN.CREATE_LABEL（policy_name =&gt;'HR_OLS_POL'，label_tag =&gt; 1100，label_value =&gt;'S：HR：'， <span class="italic">-  HR隔间的敏感级别</span> data_label =&gt; TRUE）; SA_LABEL_ADMIN.CREATE_LABEL（policy_name =&gt;'HR_OLS_POL'，label_tag =&gt; 1200，label_value =&gt;'HS：HR：'， <span class="italic">-  HR隔离专区的</span> HIGHLY_SENSITIVE <span class="italic">级别</span> data_label =&gt; TRUE）; SA_LABEL_ADMIN.CREATE_LABEL（policy_name =&gt;'HR_OLS_POL'，label_tag =&gt; 1300，label_value =&gt;'HS：LEG：'， - <span class="italic">LEG区间的</span>高度_ <span class="italic">敏感级别</span> data_label =&gt; TRUE）;结束; /</pre><p>在本规范中：</p>
                           <ul id="GUID-F2005DF2-E7A5-4F21-A0BA-6B155EAE904C__UL_FGF_ZSR_4GB" style="list-style-type:disc">
                              <li><code class="codeph">label_value</code> <code class="codeph">S:HR</code>将分配给所有当前员工的记录。
                              </li>
                              <li><code class="codeph">label_value</code> <code class="codeph">HS:HR</code>将分配给所有当前和前任员工的记录。
                              </li>
                              <li><code class="codeph">label_value</code> <code class="codeph">HS:LEG</code>将被分配给起诉公司的前雇员的记录。
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-compartments.html#GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD" title="本教程演示了如何创建Oracle Label Security隔离专区。">教程：在Oracle Label Security中配置隔离专区</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-BC5CED85-B35A-492A-BBBE-4D2FCF906CC6" name="GUID-BC5CED85-B35A-492A-BBBE-4D2FCF906CC6"></a><h3 id="OLSAG-GUID-BC5CED85-B35A-492A-BBBE-4D2FCF906CC6" class="sect3">第5步：将标签分配给用户</h3>
               <div>
                  <p>将标签分配给用户将指定这些用户可以访问的行。</p>
                  <ol>
                     <li class="stepexpand"><span>如有必要，请以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>将标签分配给用户，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_USER_ADMIN.SET_USER_LABELS（policy_name =&gt;'HR_OLS_POL'，user_name =&gt;'ineau'，max_read_label =&gt;'S：HR：'）; SA_USER_ADMIN.SET_USER_LABELS（policy_name =&gt;'HR_OLS_POL'，user_name =&gt;'smavris'，max_read_label =&gt;'HS：HR，LEG：'）; SA_USER_ADMIN.SET_USER_LABELS（policy_name =&gt;'HR_OLS_POL'，user_name =&gt;'lleagull'，max_read_label =&gt;'HS：LEG：'）;结束; /</pre><p>在本规范中：</p>
                           <ul id="GUID-BC5CED85-B35A-492A-BBBE-4D2FCF906CC6__UL_HJZ_JMJ_SGB" style="list-style-type:disc">
                              <li>获得<code class="codeph">HR</code>授权的用户<code class="codeph">ineau</code> （Ida Neau）将继续接触所有现有员工，但不能访问前任或起诉员工。
                              </li>
                              <li>获得<code class="codeph">HR</code>和<code class="codeph">LEG</code>授权的用户<code class="codeph">smavris</code> （Susan Mavris）将继续接触所有现任和前任员工以及起诉公司的前员工。
                              </li>
                              <li>获得<code class="codeph">LEG</code>隔间授权的用户<code class="codeph">lleagul</code> （Lily Leagul）只能访问起诉该公司的前雇员。
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-compartments.html#GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD" title="本教程演示了如何创建Oracle Label Security隔离专区。">教程：在Oracle Label Security中配置隔离专区</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-653303D6-8E6D-4039-8E76-1F665C7117FB" name="GUID-653303D6-8E6D-4039-8E76-1F665C7117FB"></a><h3 id="OLSAG-GUID-653303D6-8E6D-4039-8E76-1F665C7117FB" class="sect3">步骤6：将策略标签添加到HR.EMPLOYEES表数据</h3>
               <div>
                  <p><code class="codeph">HR</code>用户将策略标签添加到<code class="codeph">EMPLOYEE_ID</code>列中的<code class="codeph">HR.EMPLOYEES</code>表数据。
                  </p>
                  <ol>
                     <li class="stepexpand"><span>以<code class="codeph">HR</code>用户身份连接。</span><div><pre class="oac_no_warn" dir="ltr">connect hr输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>执行以下<code class="codeph">UPDATE</code>语句以将<code class="codeph">SENSITIVE</code>级别和<code class="codeph">HR</code>隔离专区应用于当前仍在公司工作的用户的员工ID。</span><div>此<code class="codeph">UPDATE</code>语句控制Ida Neau对<code class="codeph">HR.EMPLOYEES</code>表的访问权限，因为她已获得<code class="codeph">SENSITIVE</code>级别和<code class="codeph">HR</code>隔离区的授权。
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">UPDATE员工SET ols_col = CHAR_TO_LABEL（'HR_OLS_POL'，'S：HR'）WHERE UPPER（employee_id）NOT IN（200,101,102,176,201,122,114）;</pre></div>
                     </li>
                     <li class="stepexpand"><span>执行以下<code class="codeph">UPDATE</code>语句以将<code class="codeph">HIGHLY_SENSITIVE</code>级别和<code class="codeph">HR</code>隔离专区应用于当前和以前员工的员工ID。</span><div>此<code class="codeph">UPDATE</code>语句控制Susan Mavris对<code class="codeph">HR.EMPLOYEES</code>表的访问权限，因为她被授权用于<code class="codeph">SENSITIVE</code>级别以及<code class="codeph">HR</code>和<code class="codeph">LEG</code>隔离专区。
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">UPDATE员工SET ols_col = CHAR_TO_LABEL（'HR_OLS_POL'，'HS：HR，LEG'）WHERE UPPER（employee_id）IN（200,101,102,176,201,122,114）;</pre></div>
                     </li>
                     <li class="stepexpand"><span>执行以下<code class="codeph">UPDATE</code>语句，将<code class="codeph">HIGHLY_SENSITIVE</code>级别和<code class="codeph">LEG</code>区域应用于起诉公司的前员工的员工ID。</span><div>此<code class="codeph">UPDATE</code>语句控制Lily Leagull对<code class="codeph">HR.EMPLOYEES</code>表的访问权限，因为她已获得<code class="codeph">HIGHLY_SENSITIVE</code>级别和<code class="codeph">LEG</code>区域的授权。
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">UPDATE员工SET ols_col = CHAR_TO_LABEL（'HR_OLS_POL'，'HS：LEG'）WHERE UPPER（employee_id）IN（200,101）;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-compartments.html#GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD" title="本教程演示了如何创建Oracle Label Security隔离专区。">教程：在Oracle Label Security中配置隔离专区</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-C77ABFE3-017C-4F06-BF71-B4702CDAC2C4" name="GUID-C77ABFE3-017C-4F06-BF71-B4702CDAC2C4"></a><h3 id="OLSAG-GUID-C77ABFE3-017C-4F06-BF71-B4702CDAC2C4" class="sect3">步骤7：测试Oracle Label Security Policy</h3>
               <div>
                  <p>要测试策略，每个用户都将尝试查询<code class="codeph">HR.EMPLOYEES</code>表。
                  </p>
                  <ol>
                     <li class="stepexpand"><span>以用户Ida Neau身份连接。</span><div><pre class="oac_no_warn" dir="ltr">connect ineau输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>设置表输出的列宽。</span><div><pre class="oac_no_warn" dir="ltr">列first_name格式a25列last_name格式a25列ols_label格式a10</pre></div>
                     </li>
                     <li class="stepexpand"><span>执行以下查询：</span><div><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME，LAST_NAME，EMPLOYEE_ID，LABEL_TO_CHAR（OLS_COL）OLS_LABEL来自HR.EMPLOYEES ORDER by OLS_COL;</pre><p>输出应类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME LAST_NAME EMPLOYEE_ID OLS_LABEL ------------------------- --------------------- ---- ----------- ---------- Steven King 100 S：HR Alexander Hunold 103 S：HR Bruce Ernst 104 S：HR David Austin 105 S：HR Valli Pataballa 106 S：HR Diana Lorentz 107 S：HR Nancy Greenberg 108 S：HR Daniel Faviet 109 S：HR John Chen 110 S：HR Ismael Sciarra 111 S：HR ...选择了100行</pre><p>因为Ida Neau被分配了<code class="codeph">SENSITIVE</code> （ <code class="codeph">S</code> ）标签和<code class="codeph">HR</code>隔间，所以<code class="codeph">OLS_LABEL</code>列中的输出是<code class="codeph">S:HR</code> 。返回100行。
                           </p>
                           <p>请注意，Oracle Label Security策略限制适用于用户进行的任何<code class="codeph">SELECT</code>查询。例如，如果Ida Neau执行<code class="codeph">SELECT COUNT(*) FROM HR.EMPLOYEES;</code>查询，那么它将返回100行，而不是完整的107行。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>以Susan Mavris用户身份连接。</span><div><pre class="oac_no_warn" dir="ltr">connect smavris输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>执行Ida Neau执行的相同查询。</span><div><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME，LAST_NAME，EMPLOYEE_ID，LABEL_TO_CHAR（OLS_COL）OLS_LABEL来自HR.EMPLOYEES ORDER by OLS_COL;</pre><p>输出应类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME LAST_NAME EMPLOYEE_ID OLS_LABEL ------------------------- --------------------- ---- ----------- ---------- Steven King 100 S：HR Alexander Hunold 103 S：HR Bruce Ernst 104 S：HR David Austin 105 S：HR Valli Pataballa 106 S：HR ......Jennifer Whalen 200 HS：LEG Neena Kochhar 101 HS：LEG Michael Hartstein 201 HS：HR，LEG Jonathon Taylor 176 HS：HR，LEG Den Raphaely 114 HS：HR，LEG Lex De Haan 102 HS：HR，LEG Payam Kaufling 122 HS：选择HR，LEG 107行</pre><p>因为苏珊Mavris被分配了<code class="codeph">HIGHLY_SENSITIVE</code> （ <code class="codeph">HS</code>与）水平<code class="codeph">HR</code>和<code class="codeph">LEG</code>隔室，在该列的输出<code class="codeph">OLS_LABEL</code>如下：</p>
                           <ul id="GUID-C77ABFE3-017C-4F06-BF71-B4702CDAC2C4__UL_SZF_GPJ_SGB" style="list-style-type:disc">
                              <li><code class="codeph">S:HR</code>用于捕获所有现有员工</li>
                              <li><code class="codeph">HS:HR, LEG</code>捕获所有前雇员</li>
                              <li><code class="codeph">HS:LEG</code>捕获正在起诉的前雇员。
                              </li>
                           </ul>
                           <p>返回107行。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>以Lily Leagull用户身份连接。</span><div><pre class="oac_no_warn" dir="ltr">connect lleagull输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>执行Susan Mavris执行的相同查询。</span><div><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME，LAST_NAME，EMPLOYEE_ID，LABEL_TO_CHAR（OLS_COL）OLS_LABEL来自HR.EMPLOYEES ORDER by OLS_COL;</pre><p>输出应类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME LAST_NAME EMPLOYEE_ID OLS_LABEL ------------------------- --------------------- ---- ----------- ---------- Jennifer Whalen 200 HS：LEG Neena Kochhar 101 HS：LEG 107行入选</pre><p>由于Lily Leagull被指定为具有<code class="codeph">LEG</code>区间的<code class="codeph">HS</code>级别，因此只有起诉的前用户才会返回查询。
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-compartments.html#GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD" title="本教程演示了如何创建Oracle Label Security隔离专区。">教程：在Oracle Label Security中配置隔离专区</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-850AAB19-D669-4141-9CDF-44D43B4E9D18" name="GUID-850AAB19-D669-4141-9CDF-44D43B4E9D18"></a><h3 id="OLSAG-GUID-850AAB19-D669-4141-9CDF-44D43B4E9D18" class="sect3">步骤8：（可选）删除Oracle Label Security Policy Components</h3>
               <div>
                  <p>您可以删除Oracle Label Security策略， <code class="codeph">HR_ROLE</code>角色以及Ida Neau，Susan Mavris和Lily Leagull用户。
                  </p>
                  <ol>
                     <li class="stepexpand"><span>以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>删除Oracle Label Security策略。</span><div>此过程还会删除级别，隔离专区以及<code class="codeph">HR.EMPLOYEES</code>表中的<code class="codeph">OLS_COL</code>列。
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">BEGIN SA_SYSDBA.DROP_POLICY（policy_name =&gt;'HR_OLS_POL'，drop_column =&gt; TRUE）;结束; /</pre></div>
                     </li>
                     <li class="stepexpand"><span>以具有删除角色和用户帐户权限的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">connect sec_admin输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>删除<code class="codeph">HR_ROLE</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">DROP ROLE HR_ROLE;</pre></div>
                     </li>
                     <li class="stepexpand"><span>删除<code class="codeph">ineau</code> ， <code class="codeph">smavris</code>和<code class="codeph">lleagull</code>帐户。</span><div><pre class="oac_no_warn" dir="ltr">DROP USER INEAU; DROP USER SMAVRIS; DROP USER LLEAGULL;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-compartments.html#GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD" title="本教程演示了如何创建Oracle Label Security隔离专区。">教程：在Oracle Label Security中配置隔离专区</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
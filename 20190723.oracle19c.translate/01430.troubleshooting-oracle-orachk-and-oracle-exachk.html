<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="To troubleshoot and fix Oracle ORAchk and Oracle EXAchk issues, follow the steps explained in this section."></meta>
      <meta name="description" content="To troubleshoot and fix Oracle ORAchk and Oracle EXAchk issues, follow the steps explained in this section."></meta>
      <title>Oracle ORAchk和Oracle EXAchk故障排除</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User’s Guide"></meta>
      <meta property="og:description" content="To troubleshoot and fix Oracle ORAchk and Oracle EXAchk issues, follow the steps explained in this section."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="autonomous-health-framework-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-21T23:14:30-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96320-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="applying-patch-between-releases.html" title="Previous" type="text/html"></link>
      <link rel="next" href="purpose-cluster-health-advisor.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Autonomous Health Framework User’s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ATNMS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="applying-patch-between-releases.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="purpose-cluster-health-advisor.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="analyzing-risks-and-complying-best-practices.html" property="item" typeof="WebPage"><span property="name">分析群集配置</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="purpose-oracle-orachk-and-oracle-exachk.html" property="item" typeof="WebPage"><span property="name">分析风险并遵守最佳实践</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle ORAchk和Oracle EXAchk故障排除</li>
            </ol>
            <a id="GUID-DCFE045C-5327-4C20-BC8D-AFB22098CB44" name="GUID-DCFE045C-5327-4C20-BC8D-AFB22098CB44"></a>
            
            <h2 id="ATNMS-GUID-DCFE045C-5327-4C20-BC8D-AFB22098CB44" class="sect2"><span class="enumeration_section">2.16</span> Oracle ORAchk和Oracle EXAchk故障排除</h2>
         </header>
         <div class="ind">
            <div>
               <p>要解决和修复Oracle ORAchk和Oracle EXAchk问题，请按照本节中介绍的步骤进行操作。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="troubleshooting-oracle-orachk-and-oracle-exachk.html#GUID-12720E91-F593-4961-8A3F-53C3CC2E438F">如何解决Oracle ORAchk和Oracle EXAchk问题</a><br>要解决Oracle ORAchk和Oracle EXAchk问题，请按照本节中介绍的步骤进行操作。
                  </li>
                  <li class="ulchildlink"><a href="troubleshooting-oracle-orachk-and-oracle-exachk.html#GUID-B4393520-16F9-4F6A-8E79-C1E2C1FA2F3C">如何捕获调试输出</a><br>请按照以下步骤捕获调试信息。
                  </li>
                  <li class="ulchildlink"><a href="troubleshooting-oracle-orachk-and-oracle-exachk.html#GUID-38154E2B-CE3B-4F0E-BF25-5871ED00C5EA">远程登录问题</a><br>如果Oracle ORAChk和Oracle EXAchk工具在查找和运行SSH或SCP时出现问题，则工具无法运行任何远程检查。
                  </li>
                  <li class="ulchildlink"><a href="troubleshooting-oracle-orachk-and-oracle-exachk.html#GUID-7557C49C-305A-46DA-84B3-778EDBC94E16">许可问题</a><br>您必须具有足够的目录权限才能运行Oracle ORAchk和Oracle EXAchk。
                  </li>
                  <li class="ulchildlink"><a href="troubleshooting-oracle-orachk-and-oracle-exachk.html#GUID-91A484EC-B446-4CA2-8FB8-4B575B2D6508">性能低下，跳过检查和超时</a><br>请按照以下步骤修复性能下降和其他问题。
                  </li>
               </ul>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/atnms&amp;id=OEXUG-GUID-42FF19CB-58B3-4BDB-946C-F5147E1F4D2B" target="_blank"><span><cite>Oracle ORAchk和EXAchk用户指南</cite></span></a></li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="purpose-oracle-orachk-and-oracle-exachk.html#GUID-4572F794-E977-4002-8C38-E86B2FDA0D31" title="使用配置审计工具Oracle ORAchk和Oracle EXAchk来评估您的Oracle集成系统和非集成系统，了解已知的配置问题和最佳实践。">分析风险并遵守最佳实践</a></p>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-12720E91-F593-4961-8A3F-53C3CC2E438F" name="GUID-12720E91-F593-4961-8A3F-53C3CC2E438F"></a><h3 id="ATNMS-GUID-12720E91-F593-4961-8A3F-53C3CC2E438F" class="sect3"><span class="enumeration_section">2.16.1</span>如何解决Oracle ORAchk和Oracle EXAchk问题</h3>
               <div>
                  <p>要解决Oracle ORAchk和Oracle EXAchk问题，请按照本节中介绍的步骤进行操作。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-12720E91-F593-4961-8A3F-53C3CC2E438F__GUID-7349560F-BFED-4143-9624-939913C8FF09">要对Oracle ORAchk和Oracle EXAchk进行故障排除：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>确保您使用的是正确的工具。</span><div>
                           <p>除Oracle Database Appliance外，请使用Oracle EXAchk for Oracle集成系统。对于所有其他系统，请使用Oracle ORAchk。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>确保您使用的是最新版本的Oracle ORAchk和Oracle EXAchk。</span><ol type="a">
                           <li class="substepexpand"><span>使用<code class="codeph">–v</code>选项检查版本。</span><div>
                                 <div class="p"><pre class="pre codeblock"><code>$ ./orachk -v</code></pre><pre class="pre codeblock"><code>$ ./exachk -v</code></pre></div>
                              </div>
                           </li>
                           <li class="substepexpand"><span>将您的版本与此处提供的最新版本进行比较：</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>对于Oracle ORAchk，请参阅My Oracle Support说明1268927.2。</p>
                                    </li>
                                    <li>
                                       <p>对于Oracle EXAchk，请参阅My Oracle Support说明1070954.1。</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </li>
                     <li class="stepexpand"><span>在My Oracle Support说明1070954.1中查看<span class="uicontrol bold">常见问题解答</span>中的类似问题。</span></li>
                     <li class="stepexpand"><span>查看<code class="codeph">log</code>目录中的文件。</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>检查适用的<code>error.log</code>文件以查找相关错误。
                                 </p>
                                 <p><code>error.log</code>文件包含运行期间捕获的<code class="codeph">stderr</code>输出。
                                 </p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code><span class="variable" translate="no">output_dir</span> / log / orachk _error.log</code></p>
                                    </li>
                                    <li>
                                       <p><code><span class="variable" translate="no">output_dir</span> / log / exachk _error.log</code></p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>检查适用的日志以获取其他相关信息。</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code><span class="variable" translate="no">output_dir</span> /log/orachk.log</code></p>
                                    </li>
                                    <li>
                                       <p><code><span class="variable" translate="no">output_dir</span> /log/exachk.log</code></p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>查看My Oracle Support Notes以了解类似问题。</span></li>
                     <li class="stepexpand"><span>对于Oracle ORAchk问题，请检查My Oracle Support Community（MOSC）中的ORAchk（MOSC）。</span></li>
                     <li class="stepexpand"><span>如有必要，捕获调试输出，然后记录SR并附加生成的<code>zip</code>文件。</span></li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;id=1268927.2" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=1268927.2</a></li>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;id=1070954.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=1070954.1</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshooting-oracle-orachk-and-oracle-exachk.html#GUID-DCFE045C-5327-4C20-BC8D-AFB22098CB44" title="要解决和修复Oracle ORAchk和Oracle EXAchk问题，请按照本节中介绍的步骤进行操作。">Oracle ORAchk和Oracle EXAchk故障排除</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-B4393520-16F9-4F6A-8E79-C1E2C1FA2F3C" name="GUID-B4393520-16F9-4F6A-8E79-C1E2C1FA2F3C"></a><h3 id="ATNMS-GUID-B4393520-16F9-4F6A-8E79-C1E2C1FA2F3C" class="sect3"><span class="enumeration_section">2.16.2</span>如何捕获调试输出</h3>
               <div>
                  <p>请按照以下步骤捕获调试信息。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B4393520-16F9-4F6A-8E79-C1E2C1FA2F3C__GUID-CE5FE7C0-1D5B-4087-A790-C0B477C9AF3E">捕获调试输出：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>在启用调试之前，使用最少的运行重现问题。</span><div>
                           <p>调试捕获了很多，并且生成的<code>zip</code>文件可能很大，因此请尝试缩小重现问题所需的运行量。
                           </p>
                           <p>使用命令行选项限制检查范围。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>启用调试。</span><div>
                           <div class="p">如果您在按需模式下运行该工具，请使用<code class="codeph">–debug</code>选项：<pre class="pre codeblock"><code>$ ./orachk -debug</code></pre><pre class="pre codeblock"><code>$ ./exachk -debug</code></pre></div>
                           <p>启用调试时，Oracle ORAchk和Oracle EXAchk会在以下位置创建新的调试日志文件：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code><span class="variable" translate="no">output_dir</span> / log / orachk _debug_ <span class="variable" translate="no">date_stamp</span> _ <span class="variable" translate="no">time_stamp</span> .log</code></p>
                              </li>
                              <li>
                                 <p><code><span class="variable" translate="no">output_dir</span> / log / exachk _debug_ <span class="variable" translate="no">date_stamp</span> _ <span class="variable" translate="no">time_stamp</span> .log</code></p>
                              </li>
                           </ul>
                           <p><code><span class="variable" translate="no">output_dir</span></code>目录保留运行状况检查期间使用的各种其他临时文件。
                           </p>
                           <p>如果使用守护程序运行运行状况检查，请使用<code class="codeph">–d start –debug</code>选项重新启动守护程序。
                           </p>
                           <div class="p">运行此命令会为守护程序生成debug并在所有客户端运行中包含debug：<pre class="pre codeblock"><code>$ ./orachk -d start -debug</code></pre><pre class="pre codeblock"><code>$ ./exachk -d start -debug</code></pre></div>
                           <div class="p">使用守护程序运行调试时，Oracle ORAchk和Oracle EXAchk会在启动守护程序的目录中创建守护程序调试日志文件：<pre class="pre codeblock"><code>orachk_daemon_debug.log</code></pre><pre class="pre codeblock"><code>exachk_daemon_debug.log</code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>收集生成的输出<code>zip</code>文件和守护程序调试日志文件（如果适用）。</span></li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshooting-oracle-orachk-and-oracle-exachk.html#GUID-DCFE045C-5327-4C20-BC8D-AFB22098CB44" title="要解决和修复Oracle ORAchk和Oracle EXAchk问题，请按照本节中介绍的步骤进行操作。">Oracle ORAchk和Oracle EXAchk故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-38154E2B-CE3B-4F0E-BF25-5871ED00C5EA" name="GUID-38154E2B-CE3B-4F0E-BF25-5871ED00C5EA"></a><h3 id="ATNMS-GUID-38154E2B-CE3B-4F0E-BF25-5871ED00C5EA" class="sect3"><span class="enumeration_section">2.16.3</span>远程登录问题</h3>
               <div>
                  <p>如果Oracle ORAChk和Oracle EXAchk工具在查找和运行SSH或SCP时出现问题，则工具无法运行任何远程检查。</p>
                  <div class="section">
                     <p>此外，如果符合以下条件，则<code class="codeph">root</code>权限命令不起作用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>通过SSH不允许无密码远程<code class="codeph">root</code>登录</p>
                        </li>
                        <li>
                           <p>Expect实用程序无法传递<code class="codeph">root</code>密码</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>验证是否可以找到SSH和SCP命令。</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>SSH命令返回错误<samp class="msgph">-bash：/ usr / bin / ssh -q：没有这样的文件或目录</samp> ，如果SSH不在预期的位置。
                                 </p>
                                 <p>设置指向SSH位置的<code class="codeph">RAT_SSHELL</code>环境变量：</p><pre class="pre codeblock"><code>$ export RAT_SSHELL = <span class="variable" translate="no">path to ssh</span></code></pre></li>
                              <li>
                                 <p>SCP命令返回错误<samp class="msgph">/ usr / bin / scp -q：没有这样的文件或目录</samp> ，如果SCP没有位于预期的位置。
                                 </p>
                                 <div class="p">设置指向SCP位置的<code class="codeph">RAT_SCOPY</code>环境变量：<pre class="pre codeblock"><code>$ export RAT_SCOPY = <span class="variable" translate="no">path to scp</span></code></pre></div>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>验证您正在运行的用户是否可以从运行Oracle ORAchk和Oracle EXAchk的位置手动运行以下命令到任何远程节点发生故障。</span><div><pre class="pre codeblock"><code>$ ssh root @ remotehostname“id”root @ remotehostname的密码：uid = 0（root）gid = 0（root）groups = 0（root），1（bin），2（守护进程），3（sys），4（adm ），6（磁盘），10（轮）</code></pre><ul style="list-style-type:disc">
                              <li>
                                 <p>如果您在运行该命令时遇到任何问题，请与系统管理员联系以临时更正以运行该工具。</p>
                              </li>
                              <li>
                                 <p>Oracle ORAchk和Oracle EXAchk在远程用户配置文件中搜索提示或陷阱。如果您在远程配置文件中有提示，则至少暂时将其注释掉并再次测试运行。</p>
                              </li>
                              <li>
                                 <div class="p">如果可以配置无密码远程<code class="codeph">root</code>登录，则编辑<code>/etc/ssh/sshd_config</code>文件，如下所示：<pre class="pre codeblock"><code>是的</code></pre></div>
                                 <div class="p">现在，在群集的所有节点上以<code class="codeph">root</code>身份运行以下命令：<pre class="pre codeblock"><code>高清重启</code></pre></div>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>启用Expect调试。</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Oracle ORAchk在可用时使用Expect实用程序来回答密码提示以连接到远程节点以进行密码验证。此外，默认情况下运行<code class="codeph">root</code>集合而不记录实际的连接过程。
                                 </p>
                              </li>
                              <li>
                                 <p>设置环境变量以帮助调试远程目标连接问题。</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="bold"><code class="codeph">RAT_EXPECT_DEBUG</code></span> ：如果此变量设置为<code class="codeph">-d</code> ，则激活Expect命令跟踪。跟踪信息将写入标准输出。
                                       </p>
                                       <div class="p">例如：<pre class="pre codeblock"><code>export RAT_EXPECT_DEBUG = -d</code></pre></div>
                                    </li>
                                    <li>
                                       <p><span class="bold"><code class="codeph">RAT_EXPECT_STRACE_DEBUG</code></span> ：如果此变量设置为<code class="codeph">strace</code> ，则<code class="codeph">strace</code>调用Expect命令。跟踪信息将写入标准输出。
                                       </p>
                                       <div class="p">例如：<pre class="pre codeblock"><code>export RAT_EXPECT_STRACE_DEBUG = strace</code></pre></div>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>通过改变这两个变量的组合，您可以获得三个级别的Expect连接跟踪信息。</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-38154E2B-CE3B-4F0E-BF25-5871ED00C5EA__GUID-5687A4EF-97E3-446B-A120-328D84D43DE9">
                        <p class="notep1">注意：</p>
                        <p>仅在Oracle支持或开发的方向上设置<code class="codeph">RAT_EXPECT_DEBUG</code>和<code class="codeph">RAT_EXPECT_STRACE_DEBUG</code>变量。<code class="codeph">RAT_EXPECT_DEBUG</code>和<code class="codeph">RAT_EXPECT_STRACE_DEBUG</code>变量与其他变量和用户界面选项一起使用，以限制在跟踪期间收集的数据量。<code class="codeph">script</code>命令用于捕获标准输出。
                        </p>
                     </div>
                     <p>作为解决远程问题的临时解决方法，请在每个节点上运行本地报表，然后将它们合并在一起。</p>
                     <div class="p">在每个节点上，运行：<pre class="pre codeblock"><code>./orachk -local</code></pre><pre class="pre codeblock"><code>./exachk -local</code></pre></div>
                     <div class="p">然后合并集合以获取单个报告：<pre class="pre codeblock"><code>./orachk -merge <span class="variable" translate="no">zipfile 1</span> <span class="variable" translate="no">zip file 2</span> &gt; <span class="variable" translate="no">zip file 3</span> &gt; <span class="variable" translate="no">zip file ...</span></code></pre><pre class="pre codeblock"><code>./exachk -merge <span class="variable" translate="no">zipfile 1</span> <span class="variable" translate="no">zip file 2</span> &gt; <span class="variable" translate="no">zip file 3</span> &gt; <span class="variable" translate="no">zip file ...</span></code></pre></div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshooting-oracle-orachk-and-oracle-exachk.html#GUID-DCFE045C-5327-4C20-BC8D-AFB22098CB44" title="要解决和修复Oracle ORAchk和Oracle EXAchk问题，请按照本节中介绍的步骤进行操作。">Oracle ORAchk和Oracle EXAchk故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-7557C49C-305A-46DA-84B3-778EDBC94E16" name="GUID-7557C49C-305A-46DA-84B3-778EDBC94E16"></a><h3 id="ATNMS-GUID-7557C49C-305A-46DA-84B3-778EDBC94E16" class="sect3"><span class="enumeration_section">2.16.4</span>许可问题</h3>
               <div>
                  <p>您必须具有足够的目录权限才能运行Oracle ORAchk和Oracle EXAchk。</p>
                  <div class="section"></div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>验证工具脚本<code class="codeph">orachk</code>和<code class="codeph">exachk</code>上的权限是否设置为<code class="codeph">755 (-rwxr-xr-x)</code> 。</span><div>
                           <div class="p">如果未设置权限，则按以下方式设置权限：<pre class="pre codeblock"><code>$ chmod 755 orachk</code></pre><pre class="pre codeblock"><code>$ chmod 755 exachk</code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>如果以<code class="codeph">root</code>身份安装Oracle ORAchk和Oracle EXAchk并以其他用户身份运行这些工具，则可能没有必要的目录权限。</span><div><pre class="pre codeblock"><code>[root @ randomdb01 exachk] #ls -la total 14072 drwxr-xr-x 3 root root 4096 Jun 7 08:25。drwxrwxrwt 12 root root 4096 Jun 7 09:27 ..drwxrwxr-x 2 root root 4096 5月24日16:50 .cgrep -rw-rw -r-- 1 root root 9099005 5月24日16:50 collections.dat -rwxr-xr-x 1 root root 807865 5月24日16:50 exachk -rw-r  -  r-- 1 root root 1646483 Jun 7 08:24 exachk.zip -rw-r  -  r-- 1 root root 2591 May 24 16:50 readme.txt -rw-rw-r-- 1 root root 2799973 May 24 16:50 rules.dat -rw-r  -  r-- 1 root root 297 May 24 16:50 UserGuide.txt</code></pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>在这种情况下，您必须以<code class="codeph">root</code>身份运行或再次以Oracle软件安装用户解压缩。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshooting-oracle-orachk-and-oracle-exachk.html#GUID-DCFE045C-5327-4C20-BC8D-AFB22098CB44" title="要解决和修复Oracle ORAchk和Oracle EXAchk问题，请按照本节中介绍的步骤进行操作。">Oracle ORAchk和Oracle EXAchk故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-91A484EC-B446-4CA2-8FB8-4B575B2D6508" name="GUID-91A484EC-B446-4CA2-8FB8-4B575B2D6508"></a><h3 id="ATNMS-GUID-91A484EC-B446-4CA2-8FB8-4B575B2D6508" class="sect3"><span class="enumeration_section">2.16.5</span>性能<span class="enumeration_section">下降</span> ，跳过检查和超时</h3>
               <div>
                  <p>请按照以下步骤修复性能下降和其他问题。</p>
                  <div class="section">当Oracle ORAchk和Oracle EXAchk运行命令时，会生成子进程以运行该命令，并且监视守护进程监视子进程。如果子进程缓慢或挂起，则监视程序将终止子进程并将检查注册为已跳过：<div class="p">
                        <div class="figure" id="GUID-91A484EC-B446-4CA2-8FB8-4B575B2D6508__GUID-D661681C-072C-4E19-87BE-97FC240712E6">
                           <p class="titleinfigure">图2-27跳过的检查</p><img src="img/skipped-checks.png" alt="下面是图2-27的描述" title="下面是图2-27的描述" longdesc="img_text/skipped-checks.html"><br><a href="img_text/skipped-checks.html">“图2-27跳过支票”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <p><code>watchdog.log</code>文件还包含类似于<span class="bold">kill stuck命令的</span>条目。
                     </p>
                     <p>根据问题的原因，您可能看不到跳过的检查。</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>确定是否存在导致问题的模式。</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>例如，EBS检查取决于存在的数据量，并且可能需要比默认超时更长的时间。</p>
                              </li>
                              <li>
                                 <p>如果远程配置文件中有提示，远程检查可能会超时并被杀死和跳过。Oracle ORAchk和Oracle EXAchk在远程用户配置文件中搜索提示或陷阱。如果您在远程配置文件中有提示，则至少暂时将其注释掉并再次测试运行。</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>增加默认超时。</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>通过设置环境变量来覆盖默认超时。</p>
                                 <div class="tblformal" id="GUID-91A484EC-B446-4CA2-8FB8-4B575B2D6508__GUID-1E72ECA6-282E-418D-A9B9-C1215426C8DA">
                                    <p class="titleintable">表2-7超时控制</p>
                                    <table cellpadding="4" cellspacing="0" class="Formal" title="超时控制" border="1" summary="This table lists and describes default timeout periods and the environment variables that can be set to override those timeouts." frame="hsides" rules="rows">
                                       <thead>
                                          <tr align="left" valign="top">
                                             <th align="left" valign="bottom" width="20%" id="d20290e663">超时控制</th>
                                             <th align="left" valign="bottom" width="20%" id="d20290e665">默认值（秒）</th>
                                             <th align="left" valign="bottom" width="20%" id="d20290e667">环境变量</th>
                                          </tr>
                                       </thead>
                                       <tbody>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="20%" id="d20290e671" headers="d20290e663 ">
                                                <p>检查不是由root（大多数）运行。</p>
                                             </td>
                                             <td align="left" valign="top" width="20%" headers="d20290e671 d20290e665 ">
                                                <p>90</p>
                                             </td>
                                             <td align="left" valign="top" width="20%" headers="d20290e671 d20290e667 ">
                                                <p><code class="codeph">RAT_TIMEOUT</code></p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="20%" id="d20290e682" headers="d20290e663 ">
                                                <p>收集所有根检查。</p>
                                             </td>
                                             <td align="left" valign="top" width="20%" headers="d20290e682 d20290e665 ">
                                                <p>300</p>
                                             </td>
                                             <td align="left" valign="top" width="20%" headers="d20290e682 d20290e667 ">
                                                <p><code class="codeph">RAT_ROOT_TIMEOUT</code></p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="20%" id="d20290e693" headers="d20290e663 ">
                                                <p>SSH登录DNS握手。</p>
                                             </td>
                                             <td align="left" valign="top" width="20%" headers="d20290e693 d20290e665 ">
                                                <p>1</p>
                                             </td>
                                             <td align="left" valign="top" width="20%" headers="d20290e693 d20290e667 ">
                                                <p><code class="codeph">RAT_PASSWORDCHECK_TIMEOUT</code></p>
                                             </td>
                                          </tr>
                                       </tbody>
                                    </table>
                                 </div>
                                 <!-- class="inftblhruleinformal" -->
                              </li>
                              <li>
                                 <p>对于大多数情况，默认超时设计得足够长。如果超时时间不够长，则可能会遇到系统性能问题。许多超时可能表示环境中存在非Oracle ORAchk和Oracle EXAchk问题。</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>如果将超时增加到没有任何失败的点是不可接受的，那么尝试排除有足够超时的单独运行的问题检查，然后将报告合并在一起。</span></li>
                     <li class="stepexpand"><span>如果问题似乎没有减慢或跳过检查但是您有一个大型集群，那么请尝试增加并行数据库运行的从属进程用户数。</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>数据库集合并行运行。将自动计算用于并行数据库运行的默认从属进程数。使用以下选项更改默认编号： <code class="codeph">-dbparallel <span class="variable" translate="no">slave processes</span></code>或<code class="codeph">–dbparallelmax</code></p>
                              </li>
                           </ul>
                           <div class="p">
                              <div class="infoboxnote" id="GUID-91A484EC-B446-4CA2-8FB8-4B575B2D6508__GUID-CC572088-9EC6-45A1-8026-9AC88704AF84">
                                 <p class="notep1">注意：</p>
                                 <p>并行性越高，消耗的资源越多。但是，经过的时间减少了。</p>
                                 <p>提高或降低并行从站数量超出默认值。</p>
                                 <p>在维护之后启动整个系统之后，但在允许用户使用系统之前，请使用更多数量的并行从站以尽快完成运行。</p>
                                 <p>在繁忙的生产系统上，使用小于默认值的数字，而不是以串行模式运行，以便更快地运行，同时减少对正在运行的系统的影响。</p>
                                 <p>使用<code class="codeph">-dbserial</code>选项关闭并行数据库运行。
                                 </p>
                              </div>
                           </div>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshooting-oracle-orachk-and-oracle-exachk.html#GUID-DCFE045C-5327-4C20-BC8D-AFB22098CB44" title="要解决和修复Oracle ORAchk和Oracle EXAchk问题，请按照本节中介绍的步骤进行操作。">Oracle ORAchk和Oracle EXAchk故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
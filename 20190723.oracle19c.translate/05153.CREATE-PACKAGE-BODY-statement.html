<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The CREATE PACKAGE BODY statement creates or replaces the body of a stored package, which is an encapsulated collection of related procedures, stored functions, and other program objects stored as a unit in the database."></meta>
      <meta name="description" content="The CREATE PACKAGE BODY statement creates or replaces the body of a stored package, which is an encapsulated collection of related procedures, stored functions, and other program objects stored as a unit in the database."></meta>
      <title>CREATE PACKAGE BODY声明</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database PL/SQL Language Reference "></meta>
      <meta property="og:description" content="The CREATE PACKAGE BODY statement creates or replaces the body of a stored package, which is an encapsulated collection of related procedures, stored functions, and other program objects stored as a unit in the database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database PL/SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-13T20:26:20-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96448-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="CREATE-PACKAGE-statement.html" title="Previous" type="text/html"></link>
      <link rel="next" href="CREATE-PROCEDURE-statement.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="LNPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CREATE-PACKAGE-statement.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="CREATE-PROCEDURE-statement.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库PL / SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-statements-for-stored-plsql-units.html" property="item" typeof="WebPage"><span property="name">存储的PL / SQL单元的SQL语句</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">CREATE PACKAGE BODY声明</li>
            </ol>
            <a id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE" name="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE"></a><a id="LNPLS1973"></a><a id="LNPLS1521"></a><a id="LNPLS2181"></a><a id="LNPLS1974"></a><a id="LNPLS1975"></a><a id="LNPLS1976"></a><a id="LNPLS1523"></a><a id="LNPLS1524"></a><a id="LNPLS1525"></a><a id="LNPLS1977"></a><a id="LNPLS1978"></a><a id="LNPLS01381"></a><a id="LNPLS1979"></a><a id="LNPLS1980"></a><a id="LNPLS01372"></a>
            
            <h2 id="LNPLS-GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE" class="sect2"><span class="enumeration_section">14.10</span> CREATE PACKAGE BODY声明</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">CREATE</code> <code class="codeph">PACKAGE</code> <code class="codeph">BODY</code>语句创建或替换存储<span class="bold">包</span>的主体，该<span class="bold">包</span>是相关过程，存储函数和作为单元存储在数据库中的其他程序对象的封装集合。
               </p>
               <div class="section">
                  <p><span class="bold">包体</span>定义了这些对象。在早期的<code class="codeph">CREATE</code> <code class="codeph">PACKAGE</code>语句中定义的<span class="bold">包</span> <span class="bold">规范</span>声明了这些对象。
                  </p>
                  <p>包是作为独立模式对象创建过程和函数的替代方法。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-C4995B68-06A1-411A-90A6-475D8F12A49E">话题</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="CREATE-PACKAGE-BODY-statement.html#GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABFJDGG">先决条件</a></p>
                     </li>
                     <li>
                        <p><a href="CREATE-PACKAGE-BODY-statement.html#GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABFJIFI">句法</a></p>
                     </li>
                     <li>
                        <p><a href="CREATE-PACKAGE-BODY-statement.html#GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABDHHJI">语义</a></p>
                     </li>
                     <li>
                        <p><a href="CREATE-PACKAGE-BODY-statement.html#GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__I2065503">例子</a></p>
                     </li>
                     <li>
                        <p><a href="CREATE-PACKAGE-BODY-statement.html#GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABJCAAC">相关话题</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABFJDGG">
                  <p class="subhead1" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-D28346EA-2568-4BB8-8181-8948A97F2DF0">先决条件</p>
                  <p>要在架构中创建或替换包，您必须具有<code class="codeph">CREATE</code> <code class="codeph">PROCEDURE</code>系统特权。要在另一个用户的模式中创建或替换包，您必须具有<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">PROCEDURE</code>系统特权。在这两种情况下，必须在与包相同的模式中创建包体。
                  </p>
                  <p>要在数据库预编译器程序中嵌入<code class="codeph">CREATE</code> <code class="codeph">PACKAGE</code> <code class="codeph">BODY</code>语句，必须使用关键字<code class="codeph">END-EXEC</code>然后是特定语言的嵌入式SQL语句终止符来终止语句。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABFJIFI">
                  <p class="subhead1" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-7B18D135-E200-40CA-B01A-ACA5B98DAFFE">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-5E71FE7F-219C-4C4A-927D-AAA4D72406C2"><span class="italic">create_package_body</span> :: =</p>
                  <div class="figure" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-26148660-88DE-4B2D-9313-DD67AC1C3C73"><img src="img/create_package_body.gif" alt="下面是create_package_body.eps的描述" title="下面是create_package_body.eps的描述" longdesc="img_text/create_package_body.html"><br><a href="img_text/create_package_body.html">插图描述create_package_body.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__PLSQL_PACKAGE_BODY_SOURCE-4E94E9C9">
                  <p class="subhead1" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-7BCDFB88-7989-4244-B803-7102B38924EA"><span class="italic">plsql_package_body_source</span> :: =</p>
                  <div class="figure" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-6BAEB48E-FCEA-486A-9B95-410CD9C77856"><img src="img/plsql_package_body_source.gif" alt="下面是plsql_package_body_source.eps的说明" title="下面是plsql_package_body_source.eps的说明" longdesc="img_text/plsql_package_body_source.html"><br><a href="img_text/plsql_package_body_source.html">说明plsql_package_body_source.eps的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <a href="block.html#GUID-9ACEB9ED-567E-4E1A-A16A-B8B35214FC9D__CJAIABJJ">declare_section :: =</a> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-A7AE8BC8-0FED-475E-AF78-494313B3B0D1"><span class="italic">initialize_section</span> :: =</p>
                  <div class="figure" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-5ED9967B-5746-4690-B2A2-CF9FCB1F4978"><img src="img/initialize_section.gif" alt="接下来是initialize_section.eps的描述" title="接下来是initialize_section.eps的描述" longdesc="img_text/initialize_section.html"><br><a href="img_text/initialize_section.html">说明initialize_section.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>（ <a href="block.html#GUID-9ACEB9ED-567E-4E1A-A16A-B8B35214FC9D__CJACJBCH">statement :: =</a> ， <a href="exception-handler.html#GUID-3FECF29B-A240-4191-A635-92C612D00C4D__CJAEIGAB">exception_handler :: =</a> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABDHHJI">
                  <p class="subhead1" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-6A8279CC-E9FE-4FAE-B632-3A0A3036F07A">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-CFA6A384-0768-4EAB-BE69-7B0883AAA251"><span class="italic">create_package_body</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold">或替换</span></p>
                  <p>如果包体存在，则重新创建它，然后重新编译它。</p>
                  <p>在重新定义包体之前被授予权限的用户仍然可以访问包而无需重新授予权限。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold">[版权所有|不可挽回的]</span></p>
                  <p>如果未指定此属性，则包体将从包规范继承<code class="codeph">EDITIONABLE</code>或<code class="codeph">NONEDITIONABLE</code> 。如果确实指定了此属性，则它必须与包规范的属性匹配。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-8DEC5543-3825-439F-BADA-C784DE45E8B6"><span class="italic">plsql_package_body_source</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">模式</span></span></p>
                  <p>包含该包的模式的名称。<span class="bold">默认值：</span>您的架构。
                  </p><pre class="pre codeblock"><code></code></pre><p><span class="bold"><span class="italic">包裹名字</span></span></p>
                  <p>要创建的包的名称。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">declare_section</span></span></p>
                  <p>对包规范中的每个游标和子程序声明都有一个定义。相应的子程序声明和定义的标题必须逐字逐句匹配，白色空间除外。</p>
                  <p>还可以声明和定义只能从包内引用的私有项。</p>
                  <p><span class="bold">对<span class="italic">declare_section的</span>限制</span></p>
                  <p><code class="codeph">PRAGMA</code> <code class="codeph">AUTONOMOUS_TRANSACTION</code>不能出现在这里。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-4157C69C-85DD-48C1-A071-EA79206CB268"><span class="italic">initialize_section</span></p>
                  <p>初始化变量并执行任何其他一次性设置步骤。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__I2065503">
                  <p class="subhead1" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-BE276AB5-2B38-40E0-B1DB-C8A4F25661F3">例子</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__CREATINGAPACKAGEBODY-9594A4AD">
                  <p class="titleinexample">示例14-20创建emp_mgmt包体</p>
                  <p>此语句创建在<span class="q">“ <a href="CREATE-PACKAGE-statement.html#GUID-03A70A54-90FF-4293-B6B8-F0B35E184AC5__CREATINGTHESPECIFICATIONFORTHEEMP_M-9594CA35">示例14-19</a> ”中</span>创建的<code class="codeph">emp_mgmt</code>包的主体。
                  </p><pre class="oac_no_warn" dir="ltr">创建或替换包装主体emp_mgmt AS <span class="italic">tot_emps NUMBER;</span> tot_depts NUMBER; FUNCTION hire（last_name VARCHAR2，job_id VARCHAR2，manager_id NUMBER，salary NUMBER，commission_pct NUMBER，department_id NUMBER）返回号码是new_empno NUMBER; BEGIN SELECT employees_seq。NEXTVAL INTO new_empno FROM DUAL; INSERT INTO员工VALUES（new_empno，'First'，'Last'，'first.example@example.com'，'（415）555-0100'，TO_DATE（'18 -JUN-2002'，'DD-MON-YYYY '），'IT_PROG'，90000000,00,100,110）; tot_emps：= tot_emps + 1; RETURN（new_empno）;结束;功能create_dept（department_id NUMBER，location_id NUMBER）返回号码是new_deptno NUMBER; BEGIN SELECT departments_seq。NEXTVAL INTO new_deptno FROM dual; INSERT INTO部门VALUES（new_deptno，'部门名称'，100,1700）; tot_depts：= tot_depts + 1; RETURN（new_deptno）;结束;程序remove_emp（employee_id NUMBER）从员工开始删除WHERE employees.employee_id = remove_emp.employee_id; tot_emps：= tot_emps  -  1;结束;程序remove_dept（department_id NUMBER）从部门开始删除WHERE departments.department_id = remove_dept.department_id; tot_depts：= tot_depts  -  1; SELECT COUNT（*）INTO tot_emps FROM employees;结束;程序increase_sal（employee_id NUMBER，salary_incr NUMBER）是curr_sal NUMBER; BEGIN SELECT salary INTO curr_sal FROM employees WHERE employees.employee_id = increase_sal.employee_id;如果curr_sal IS NULL则升高no_sal; ELSE UPDATE员工SET薪水=薪水+ salary_incr WHERE employee_id = employee_id;万一;结束;程序increase_comm（employee_id NUMBER，comm_incr NUMBER）是curr_comm NUMBER; BEGIN SELECT commission_pct INTO curr_comm FROM employees WHERE employees.employee_id = increase_comm.employee_id;如果curr_comm IS NULL那么升起no_comm; ELSE UPDATE员工SET commission_pct = commission_pct + comm_incr;万一;结束; END emp_mgmt;</pre><p>包体定义了包规范中声明的公共程序对象：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>函数<code class="codeph">hire</code>和<code class="codeph">create_dept</code> 
                        </p>
                     </li>
                     <li>
                        <p>过程<code class="codeph">remove_emp</code> ， <code class="codeph">remove_dept</code> ， <code class="codeph">increase_sal</code>和<code class="codeph">increase_comm</code></p>
                     </li>
                  </ul>
                  <p>这些对象在包规范中声明，因此可以通过包外的应用程序，过程和函数来调用它们。例如，如果您有权访问该包，则可以创建一个与调用<code class="codeph">increase_comm</code>过程的<code class="codeph">emp_mgmt</code>包分开的过程<code class="codeph">increase_all_comms</code> 。
                  </p>
                  <p>这些对象在包体中定义，因此您可以更改其定义，而不会导致数据库使相关的模式对象无效。例如，如果您随后更改了<code class="codeph">hire</code>的定义，那么数据库在运行之前无需重新编译<code class="codeph">increase_all_comms</code> 。
                  </p>
                  <p>此示例中的包体还声明了私有程序对象，即变量<code class="codeph">tot_emps</code>和<code class="codeph">tot_depts</code> 。这些对象在包体中而不是包规范中声明，因此它们可以被包中的其他对象访问，但是它们在包外是不可访问的。例如，您无法开发显式更改变量<code class="codeph">tot_depts</code>值的应用程序。但是，函数<code class="codeph">create_dept</code>是包的一部分，因此<code class="codeph">create_dept</code>可以更改<code class="codeph">tot_depts</code>的值。
                  </p>
               </div>
               <!-- class="example" -->
               <div class="section" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABJCAAC">
                  <p class="subhead1" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-C9284EEB-33BD-4817-9252-CDFEECBADDC9">相关话题</p>
                  <p>在这一章当中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“ <a href="CREATE-PACKAGE-statement.html#GUID-03A70A54-90FF-4293-B6B8-F0B35E184AC5" title="CREATE PACKAGE语句创建或替换存储包的规范，存储包是数据库中作为一个单元存储的相关过程，函数和其他程序对象的封装集合。">CREATE PACKAGE声明</a> ”</span></p>
                     </li>
                  </ul>
                  <p>在其他章节中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“ <a href="plsql-packages.html#GUID-C285EC5A-BE50-4192-A88E-48C0778B34E0" title="本章介绍如何将相关的PL / SQL代码和数据捆绑到一个包中，其内容可供许多应用程序使用。">PL / SQL包</a> ”</span> 
                        </p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="plsql-packages.html#GUID-49A935CE-825D-4FEA-BF2D-89F87EA9C750">包体</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="function-declaration-and-definition.html#GUID-4E19FB09-46B5-4CE5-8A5B-CD815C29DA1C" title="在调用函数之前，必须声明并定义它。您可以先声明它（使用function_declaration），然后在同一个块，子程序或包中（使用function_definition）定义它，或者同时声明和定义它（使用function_definition）。">功能声明和定义</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="procedure-declaration-and-definition.html#GUID-9A48D7CE-3720-46A4-B5CA-C2250CA86AF2" title="在调用过程之前，必须声明并定义它。您可以先声明它（使用procedure_declaration），然后在同一个块，子程序或包中使用procedure_definition定义它，或者同时声明和定义它（使用procedure_definition）。">程序声明和定义</a> ”</span></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
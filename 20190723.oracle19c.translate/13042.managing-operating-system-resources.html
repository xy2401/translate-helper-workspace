<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>管理操作系统资源</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Performance Tuning Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Performance Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-performance-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-12T22:26:14-07:00"></meta>
      <meta name="dcterms.title" content="Database Performance Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96347-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="IO-configuration-and-design.html" title="Previous" type="text/html"></link>
      <link rel="next" href="book-index.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGDBA"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="IO-configuration-and-design.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="book-index.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库性能调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-IV-managing-system-resources.html" property="item" typeof="WebPage"><span property="name">管理系统资源</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理操作系统资源</li>
            </ol>
            <a id="GUID-81614D0C-8C18-4808-8207-1447D511038E" name="GUID-81614D0C-8C18-4808-8207-1447D511038E"></a><a id="TGDBA016"></a>
            
            <h2 id="TGDBA-GUID-81614D0C-8C18-4808-8207-1447D511038E" class="sect2"><span class="enumeration_chapter">18</span>管理操作系统资源</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何调整操作系统以获得Oracle数据库的最佳性能。</p>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="managing-operating-system-resources.html#GUID-88108E49-6093-42BB-A29A-8A5D25CF7E10">了解操作系统性能问题</a></p>
                  </li>
                  <li>
                     <p><a href="managing-operating-system-resources.html#GUID-F3647DCD-D2BF-499D-9F0C-88204E6D34DE">解决操作系统问题</a></p>
                  </li>
                  <li>
                     <p><a href="managing-operating-system-resources.html#GUID-F548D17E-7175-4EEA-BF2E-93F5CB23E375">了解CPU</a></p>
                  </li>
                  <li>
                     <p><a href="managing-operating-system-resources.html#GUID-3FBB00B3-435A-4111-9A00-E41AD78B3873">解决CPU问题</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-81614D0C-8C18-4808-8207-1447D511038E__GUID-CE59F018-C83C-4E33-9238-EE8F38783FAA">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您的操作系统文档</p>
                     </li>
                     <li>
                        <p>您的Oracle数据库平台特定文档，其中包含特定于您的平台的调整信息</p>
                     </li>
                  </ul>
               </div>
            </div><a id="TGDBA94409"></a><div class="props_rev_3"><a id="GUID-88108E49-6093-42BB-A29A-8A5D25CF7E10" name="GUID-88108E49-6093-42BB-A29A-8A5D25CF7E10"></a><h3 id="TGDBA-GUID-88108E49-6093-42BB-A29A-8A5D25CF7E10" class="sect3"><span class="enumeration_section">18.1</span>了解操作系统性能问题</h3>
               <div>
                  <p>操作系统性能问题通常涉及进程管理，内存管理和调度。如果您已调整Oracle数据库实例并仍需要提高性能，请验证您的工作或尝试缩短系统时间。确保有足够的I / O带宽，CPU功率和交换空间。但是，不要指望进一步调整操作系统会对应用程序性能产生重大影响。与简单地调整操作系统相比，Oracle数据库配置或应用程序中的更改可能会导致操作系统效率的显着差异。</p>
                  <p>例如，如果应用程序遇到过多的缓冲区忙等待，则系统调用的数量会增加。如果通过调整应用程序来减少缓冲区忙等待，则系统调用的数量会减少。</p>
                  <p>本节介绍与操作系统性能问题相关的以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="managing-operating-system-resources.html#GUID-69941C5D-A357-4216-AA88-AECE30164078">使用操作系统缓存</a></p>
                     </li>
                     <li>
                        <p><a href="managing-operating-system-resources.html#GUID-1C9C8D2D-AEB3-46C8-94D3-0BF24551870E">内存使用情况</a></p>
                     </li>
                     <li>
                        <p><a href="managing-operating-system-resources.html#GUID-7D091450-954B-4F21-8CFB-B9868899482D">使用操作系统资源管理器</a></p>
                     </li>
                  </ul>
               </div><a id="TGDBA94410"></a><div class="props_rev_3"><a id="GUID-69941C5D-A357-4216-AA88-AECE30164078" name="GUID-69941C5D-A357-4216-AA88-AECE30164078"></a><h4 id="TGDBA-GUID-69941C5D-A357-4216-AA88-AECE30164078" class="sect4"><span class="enumeration_section">18.1.1</span>使用操作系统缓存</h4>
                  <div>
                     <p>操作系统和设备控制器提供<a id="d57722e202" class="indexterm-anchor"></a><a id="d57722e206" class="indexterm-anchor"></a>不与Oracle数据库缓存管理直接冲突的数据缓存。尽管如此，这些结构可以消耗资源，同时提供很少或没有性能优势。当数据库文件存储在Linux或UNIX文件系统中时，这种情况最为明显。默认情况下，所有数据库I / O都通过文件系统缓存。
                     </p>
                     <p>在某些Linux和UNIX系统上，文件存储可以使用直接I / O.这种安排允许在文件系统内访问数据库文件，绕过文件系统缓存。直接I / O可节省CPU资源，并允许文件系统缓存专用于非数据库活动，例如程序文本和假脱机文件。</p>
                     <div class="infoboxnote" id="GUID-69941C5D-A357-4216-AA88-AECE30164078__GUID-7878B4CC-82A7-474D-A25D-B901D7F6F7EC">
                        <p class="notep1">注意：</p>
                        <p>在Windows上不会发生此问题。数据库的所有文件请求都会绕过文件系统中的缓存。</p>
                     </div>
                     <p>虽然操作系统缓存通常是多余的，因为Oracle数据库缓冲区缓存缓冲区块，但在某些情况下，数据库不使用数据库缓冲区缓存。在这些情况下，使用直接I / O或原始设备可能会比使用操作系统缓冲产生更差的性能。例子包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>读取或写入<code class="codeph">TEMP</code>表空间</p>
                        </li>
                        <li>
                           <p>数据存储在<code class="codeph">NOCACHE</code> LOB中</p>
                        </li>
                        <li>
                           <p>并行执行服务器读取数据</p>
                           <div class="infoboxnote" id="GUID-69941C5D-A357-4216-AA88-AECE30164078__GUID-8D3ABF6E-5E6B-4ACC-B169-45253F2E4ECB">
                              <p class="notep1">注意：</p>
                              <p>在某些情况下，数据库可以将并行查询数据缓存在数据库缓冲区缓存中，而不是直接从磁盘读取到PGA中。当数据库服务器具有大量内存时，此配置可能是适当的。请参阅<a href="../vldbg/using-parallel.html#VLDBG010" target="_blank"><span class="italic">Oracle数据库VLDB和分区指南</span></a>以了解有关使用并行执行的更多信息。
                              </p>
                           </div>
                        </li>
                     </ul>
                     <p>您可能希望缓存但不是操作系统级别的所有文件。</p>
                  </div><a id="TGDBA94411"></a><div class="props_rev_3"><a id="GUID-88AEC6A1-C9D9-44C9-AA5D-D526713EE451" name="GUID-88AEC6A1-C9D9-44C9-AA5D-D526713EE451"></a><h5 id="TGDBA-GUID-88AEC6A1-C9D9-44C9-AA5D-D526713EE451" class="sect5"><span class="enumeration_section">18.1.1.1</span>异步I / O.</h5>
                     <div>
                        <p>对于同步I / O，当I / O请求提交给操作系统时，写入过程将一直阻塞，直到写入被确认为完成。然后它可以继续处理。使用异步I / O，在提交和处理I / O请求时继续处理。尽可能使用异步I / O以避免瓶颈。</p>
                        <p>某些平台默认支持异步I / O，其他平台需要特殊配置，有些平台仅支持某些底层文件系统类型的异步I / O.</p>
                     </div>
                  </div><a id="TGDBA94412"></a><div class="props_rev_3"><a id="GUID-5F1FBA6E-2543-491A-BA61-B8CACDE1EFF7" name="GUID-5F1FBA6E-2543-491A-BA61-B8CACDE1EFF7"></a><h5 id="TGDBA-GUID-5F1FBA6E-2543-491A-BA61-B8CACDE1EFF7" class="sect5"><span class="enumeration_section">18.1.1.2</span> FILESYSTEMIO_OPTIONS初始化参数</h5>
                     <div>
                        <div class="section">
                           <p>您可以使用<code class="codeph">FILESYSTEMIO_OPTIONS</code>初始化参数来启用或禁用文件系统文件上的异步I / O或直接I / O.此参数是特定于平台的，并且具有最适合特定平台的默认值。
                           </p>
                           <p><code class="codeph">FILESYSTEMIO_OPTIONS</code>可以设置为以下值之一：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">ASYNCH:</code>在文件系统文件上启用异步I / O，对传输没有时间要求。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DIRECTIO:</code>在文件系统文件上启用直接I / O，绕过缓冲区缓存。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">SETALL:</code>在文件系统文件上启用异步和直接I / O.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">NONE:</code>禁用文件系统文件上的异步和直接I / O.
                                 </p>
                                 <div class="infoboxnotealso" id="GUID-5F1FBA6E-2543-491A-BA61-B8CACDE1EFF7__GUID-54E367DF-8C3C-4313-AC60-AA6B34DAAABE">
                                    <p class="notep1">也可以看看：</p>
                                    <p>特定于平台的文档以获取更多详细信息</p>
                                 </div>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA95342"></a><div class="sect4"><a id="GUID-C439F7EA-E77A-491A-B9D2-E17210FC881B" name="GUID-C439F7EA-E77A-491A-B9D2-E17210FC881B"></a><h5 id="TGDBA-GUID-C439F7EA-E77A-491A-B9D2-E17210FC881B" class="sect5"><span class="enumeration_section">18.1.1.3</span>限制NFS服务器环境中的异步I / O.</h5>
                     <div>
                        <p>在某些网络文件存储（NFS）服务器环境中，如果在短时间内发出大量异步I / O请求，性能可能会受到影响。在这种情况下，通过限制Oracle进程发出的I / O数量，使用<code class="codeph">DNFS_BATCH_SIZE</code>初始化参数来提高系统性能并提高系统稳定性。
                        </p>
                        <p><code class="codeph">DNFS_BATCH_SIZE</code>初始化参数控制启用Direct NFS客户端时Oracle前台进程可排队的异步I / O数。在NFS服务器无法处理大量未完成的异步I / O请求的环境中，Oracle建议将此参数设置为128。然后，您可以根据NFS服务器的性能增加或减少其值。
                        </p>
                        <div class="infoboxnote" id="GUID-C439F7EA-E77A-491A-B9D2-E17210FC881B__GUID-7CA6E845-E668-426B-904C-63AEB72DA8B9">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">DNFS_BATCH_SIZE</code>初始化参数的默认设置为4096。建议值128仅适用于NFS服务器无法处理大量异步I / O请求且检测到严重延迟的系统。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-C439F7EA-E77A-491A-B9D2-E17210FC881B__GUID-A91F5B4D-ACAB-463A-A033-0E479AEEAD59">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">DNFS_BATCH_SIZE</code>初始化参数的信息，请<code class="codeph">DNFS_BATCH_SIZE</code> <a href="../refrn/DNFS_BATCH_SIZE.html#REFRN10334" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-E337EC42-31DF-40BB-BD2B-3DB479A5C34F" name="GUID-E337EC42-31DF-40BB-BD2B-3DB479A5C34F"></a><h5 id="TGDBA-GUID-E337EC42-31DF-40BB-BD2B-3DB479A5C34F" class="sect5"><span class="enumeration_section">18.1.1.4</span>使用Direct NFS Client提高I / O性能</h5>
                     <div>
                        <p>Direct NFS Client直接在Oracle数据库中集成NFS客户端功能。由于Direct NFS Client是Oracle数据库的专用NFS客户端，因此它经过高度优化。与传统的操作系统NFS客户端相比，Direct NFS Client大大提高了NFS上的数据库性能。</p>
                        <p>并行NFS是直接NFS客户端的可选功能，它在NFS版本4.1中引入，并受Oracle Database 12 <span class="italic">c</span>第2版（12.2）及更高版本支持。并行NFS是一种高度可扩展的分布式存储协议，客户端，服务器和存储设备负责管理文件访问。在4.1之前的NFS版本中，只有服务器负责管理文件访问。因此，Parallel NFS支持高度可扩展的分布式NAS存储，以实现更好的I / O性能。
                        </p>
                        <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，您还可以使用Direct NFS Client的Direct NFS调度程序功能。Direct NFS调度程序将从数据库实例创建的TCP连接合并到NFS服务器。在大型数据库部署中，使用Direct NFS调度程序可提高可伸缩性和网络性能。因此，对于大量TCP连接，Oracle建议使用Direct NFS调度程序和Parallel NFS进行直接NFS客户端部署。
                        </p>
                        <div class="infoboxnotealso" id="GUID-E337EC42-31DF-40BB-BD2B-3DB479A5C34F__GUID-DA6FDEC2-BDA7-4AD6-BD8B-CF1A22BD11F3">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><a href="../ladbi/creating-an-oranfstab-file-for-direct-nfs-client.html#LADBI-GUID-C16A1AF8-CCC5-46C2-875E-4276C2CCCF22" target="_blank">“Oracle数据库安装指南”</a></span> ，了解有关通过在Direct NFS配置文件<code class="codeph">oranfstab</code> <code class="codeph">nfs_version</code>参数的值设置为<code class="codeph">pNFS</code>来为Direct NFS Client启用并行NFS功能的信息。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><a href="../refrn/ENABLE_DNFS_DISPATCHER.html#REFRN-GUID-2209E40B-1280-4C38-ADD8-324EAACF3501" target="_blank">Oracle Database Reference</a></span> ，通过将<code class="codeph">ENABLE_DNFS_DISPATCHER</code>初始化参数的值设置为<code class="codeph">true</code>来获取有关为Direct NFS客户端启用Direct NFS调度程序功能的信息。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="TGDBA94413"></a><div class="props_rev_3"><a id="GUID-1C9C8D2D-AEB3-46C8-94D3-0BF24551870E" name="GUID-1C9C8D2D-AEB3-46C8-94D3-0BF24551870E"></a><h4 id="TGDBA-GUID-1C9C8D2D-AEB3-46C8-94D3-0BF24551870E" class="sect4"><span class="enumeration_section">18.1.2</span>内存使用情况</h4>
                  <div>
                     <p>内存使用受缓冲区缓存限制和初始化参数的影响。</p>
                  </div><a id="TGDBA94414"></a><div class="props_rev_3"><a id="GUID-89B9DE86-76F2-4200-A5B3-8E12DB5A81C0" name="GUID-89B9DE86-76F2-4200-A5B3-8E12DB5A81C0"></a><h5 id="TGDBA-GUID-89B9DE86-76F2-4200-A5B3-8E12DB5A81C0" class="sect5"><span class="enumeration_section">18.1.2.1</span>缓冲区高速缓存限制</h5>
                     <div>
                        <p>UNIX缓冲区高速缓存消耗操作系统内存资源。虽然在某些版本的UNIX中，UNIX缓冲区高速缓存可以分配一定量的内存，但是现在通常使用更复杂的内存管理机制。通常，这些将允许使用空闲内存页来缓存I / O.在这样的系统中，操作系统报告工具通常显示没有空闲存储器，这通常不是问题。如果进程需要更多内存，则通常会释放内存缓存I / O数据以允许分配进程内存。</p>
                     </div>
                  </div><a id="TGDBA94415"></a><div class="props_rev_3"><a id="GUID-4F3741AE-5E0E-48EE-AC23-584E01120A80" name="GUID-4F3741AE-5E0E-48EE-AC23-584E01120A80"></a><h5 id="TGDBA-GUID-4F3741AE-5E0E-48EE-AC23-584E01120A80" class="sect5"><span class="enumeration_section">18.1.2.2</span>影响内存使用的参数</h5>
                     <div>
                        <p>任何一个Oracle数据库会话所需的内存取决于许多因素。通常，主要因素是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>打开游标的数量</p>
                           </li>
                           <li>
                              <p>PL / SQL使用的内存，例如PL / SQL表</p>
                           </li>
                           <li>
                              <p><code class="codeph">SORT_AREA_SIZE</code>初始化参数</p>
                           </li>
                        </ul>
                        <p>在Oracle数据库中， <code class="codeph">PGA_AGGREGATE_TARGET</code>初始化参数可以更好地控制会话的内存使用情况。
                        </p>
                     </div>
                  </div>
               </div><a id="TGDBA94416"></a><div class="props_rev_3"><a id="GUID-7D091450-954B-4F21-8CFB-B9868899482D" name="GUID-7D091450-954B-4F21-8CFB-B9868899482D"></a><h4 id="TGDBA-GUID-7D091450-954B-4F21-8CFB-B9868899482D" class="sect4"><span class="enumeration_section">18.1.3</span>使用操作系统资源管理器</h4>
                  <div>
                     <p>某些平台提供操作系统资源管理器。这些旨在通过优先访问系统资源来减少峰值负载使用模式的影响。它们通常实现管理策略，用于管理用户可以访问的资源以及允许每个用户使用的资源量。</p>
                     <p>操作系统资源管理器与域或其他类似设施不同。域在一个系统内提供一个或多个完全分离的环境。磁盘，CPU，内存和所有其他资源专用于每个域，无法从任何其他域访问。其他类似的设施将系统资源的一部分完全分离到不同的区域，通常是单独的CPU或内存区域。与域一样，单独的资源区域仅专用于分配给该区域的处理;流程无法跨越边界迁移。与域不同，系统上的所有分区都可以访问所有其他资源（通常是磁盘）。</p>
                     <p>只要分区内存（RAM）资源的分配是固定的，而不是动态的，Oracle数据库就可以在域内运行，也可以在其他不太完整的分区结构中运行。</p>
                     <p>操作系统资源管理器优先考虑全局资源池（通常是域或整个系统）内的资源分配。将进程分配给组，这些组又在资源池中的任何位置分配资源。</p>
                     <div class="infoboxnote" id="GUID-7D091450-954B-4F21-8CFB-B9868899482D__GUID-79F750E5-DEE5-4232-8A8E-93DD9CE2BF01">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果节点上有多个实例，并且您希望在它们之间分配资源，则应将每个实例分配给专用的操作系统资源管理器组或管理实体。要在管理实体中运行多个实例，请使用实例锁定来管理如何在实例之间分配管理实体中的CPU资源。当Oracle数据库资源管理器管理CPU资源时，它需要为该实例提供固定数量的CPU资源。如果没有实例囚禁，它期望可用的CPU资源等于被管实体中的CPU数量。使用实例caging，它期望可用的CPU资源等于<code class="codeph">CPU_COUNT</code>初始化参数的值。如果CPU资源少于预期，则Oracle数据库资源管理器在执行资源计划中的资源分配方面效果不佳。
                              </p>
                           </li>
                           <li>
                              <p>不支持将Oracle数据库用于任何UNIX操作系统资源管理器的内存管理和分配工具。Oracle数据库资源管理器在Oracle数据库实例中提供资源分配功能，不能与任何操作系统资源管理器一起使用。</p>
                              <p>有关与Oracle数据库和Oracle数据库资源管理器一起使用的操作系统资源管理以及资源分配和释放功能的完整列表，请咨询您的系统供应商和Oracle代表。Oracle不会证明这些系统功能与特定版本级别的兼容性。</p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-7D091450-954B-4F21-8CFB-B9868899482D__GUID-1A699518-A375-431E-8C00-706E7845A1B9">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p> 有关Oracle数据库资源管理器的信息，请参见<a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN027" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a></p>
                           </li>
                           <li>
                              <p>有关实例锁定的信息，请参见<a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN13332" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="TGDBA94417"></a><div class="props_rev_3"><a id="GUID-F3647DCD-D2BF-499D-9F0C-88204E6D34DE" name="GUID-F3647DCD-D2BF-499D-9F0C-88204E6D34DE"></a><h3 id="TGDBA-GUID-F3647DCD-D2BF-499D-9F0C-88204E6D34DE" class="sect3"><span class="enumeration_section">18.2</span>解决操作系统问题</h3>
               <div>
                  <p>本节通过解释以下主题提供有关调整各种系统的提示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="managing-operating-system-resources.html#GUID-1B165BB2-6C4F-4C4A-B3E5-0BDE04469538">基于UNIX的系统的性能提示</a></p>
                     </li>
                     <li>
                        <p><a href="managing-operating-system-resources.html#GUID-449A1A0E-DD0C-4A29-80D7-AA0CB0054250">Windows系统上的性能提示</a></p>
                     </li>
                     <li>
                        <p><a href="managing-operating-system-resources.html#GUID-F21868E0-C3FC-4914-82ED-72DA7915BE9F">HP OpenVMS系统的性能提示</a></p>
                     </li>
                  </ul>
                  <p>熟悉特定于平台的问题，以便了解操作系统提供的性能选项。</p>
                  <div class="infoboxnotealso" id="GUID-F3647DCD-D2BF-499D-9F0C-88204E6D34DE__GUID-D9966618-8110-48C7-B188-DDAA80C133CA">
                     <p class="notep1">也可以看看：</p>
                     <p>您的Oracle平台特定文档和操作系统供应商的文档</p>
                  </div>
               </div><a id="TGDBA94418"></a><div class="props_rev_3"><a id="GUID-1B165BB2-6C4F-4C4A-B3E5-0BDE04469538" name="GUID-1B165BB2-6C4F-4C4A-B3E5-0BDE04469538"></a><h4 id="TGDBA-GUID-1B165BB2-6C4F-4C4A-B3E5-0BDE04469538" class="sect4"><span class="enumeration_section">18.2.1</span>基于UNIX的系统的性能提示</h4>
                  <div>
                     <p>上<a id="d57722e932" class="indexterm-anchor"></a><a id="d57722e934" class="indexterm-anchor"></a> UNIX系统尝试在操作系统完成系统调用和执行进程调度所花费的时间与应用程序运行的时间之间建立良好的比率。目标应该是在应用程序模式（也称为用户模式）而不是系统模式下运行大部分时间。
                     </p>
                     <p>每种模式花费的时间比例只是潜在问题的症状，可能涉及以下方面：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>分页或交换</p>
                        </li>
                        <li>
                           <p>执行太多操作系统调用</p>
                        </li>
                        <li>
                           <p>运行太多进程</p>
                        </li>
                     </ul>
                     <p>如果存在这样的条件，那么应用程序运行的可用时间就会减少。从操作系统端释放的时间越长，应用程序可以执行的事务就越多。</p>
                  </div>
               </div><a id="TGDBA94419"></a><div class="props_rev_3"><a id="GUID-449A1A0E-DD0C-4A29-80D7-AA0CB0054250" name="GUID-449A1A0E-DD0C-4A29-80D7-AA0CB0054250"></a><h4 id="TGDBA-GUID-449A1A0E-DD0C-4A29-80D7-AA0CB0054250" class="sect4"><span class="enumeration_section">18.2.2</span> Windows系统上的性能提示</h4>
                  <div>
                     <p><a id="d57722e1003" class="indexterm-anchor"></a><a id="d57722e1007" class="indexterm-anchor"></a>在Windows系统上，与基于UNIX的系统一样，在应用程序模式下的时间与系统模式下的时间之间建立适当的比率。您可以使用Windows管理性能工具轻松监控许多因素：CPU，网络，I / O和内存都显示在同一图表中，以帮助您避免任何这些区域中的瓶颈。
                     </p>
                  </div>
               </div><a id="TGDBA94420"></a><div class="props_rev_3"><a id="GUID-F21868E0-C3FC-4914-82ED-72DA7915BE9F" name="GUID-F21868E0-C3FC-4914-82ED-72DA7915BE9F"></a><h4 id="TGDBA-GUID-F21868E0-C3FC-4914-82ED-72DA7915BE9F" class="sect4"><span class="enumeration_section">18.2.3</span> HP OpenVMS系统的性能提示</h4>
                  <div>
                     <p><a id="d57722e1061" class="indexterm-anchor"></a>考虑大型机上的分页参数，并记住Oracle数据库可以利用非常大的工作集。
                     </p>
                     <p>HP OpenVMS环境中的可用内存实际上是未映射到任何操作系统进程的内存。在繁忙的系统上，可用内存可能包含属于一个或多个当前活动进程的页面。发生该访问时，会发生<code class="codeph">soft page fault</code> ，并且该页面将包含在该进程的工作集中。如果进程无法扩展其工作集，则必须将进程当前映射的其中一个页面移动到空闲集。
                     </p>
                     <p>任意数量的进程可能在其工作集中具有共享内存页面。因此，工作集的大小总和可以显着超过可用存储器。当Oracle服务器运行时，SGA，Oracle数据库内核代码和Oracle Forms运行时可执行文件通常都是可共享的，占访问页面的80％或90％。</p>
                  </div>
               </div>
            </div><a id="TGDBA94422"></a><a id="TGDBA94421"></a><div class="props_rev_3"><a id="GUID-F548D17E-7175-4EEA-BF2E-93F5CB23E375" name="GUID-F548D17E-7175-4EEA-BF2E-93F5CB23E375"></a><h3 id="TGDBA-GUID-F548D17E-7175-4EEA-BF2E-93F5CB23E375" class="sect3"><span class="enumeration_section">18.3</span>了解CPU</h3>
               <div>
                  <p>要解决CPU问题，请首先针对系统应使用的CPU资源量建立适当的期望。然后，确定是否有足够的CPU资源可用，并识别系统何时消耗过多资源。首先确定Oracle数据库实例在以下三种情况下对系统使用的CPU资源量：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>当存在少量Oracle数据库和非Oracle活动时，系统处于空闲状态</p>
                     </li>
                     <li>
                        <p>系统平均工作负载</p>
                     </li>
                     <li>
                        <p>高峰工作负载下的系统</p>
                     </li>
                  </ul>
                  <p>您可以使用Automatic Workload Repository，Statspack或<code class="codeph">UTLBSTAT</code> / <code class="codeph">UTLESTAT</code>实用程序捕获各种工作负载快照。操作系统实用程序（如UNIX上的<code class="codeph">vmstat</code> ， <code class="codeph">sar</code>和<code class="codeph">iostat</code>以及Windows上的管理性能监视工具）可以与自动工作负载存储库，Statspack或同一时间间隔内的<code class="codeph">V$OSSTAT</code>或<code class="codeph">V$SYSMETRIC_HISTORY</code>视图一起使用。 <code class="codeph">UTLBSTAT</code> / <code class="codeph">UTLESTAT</code>提供整体统计数据的免费视图。
                  </p>
                  <p>在评估系统的CPU利用率时，工作负载是一个重要因素。在高峰工作负载时间内，90％的CPU利用率，10％的空闲和等待时间是可以接受的。在低工作负载时，即使30％的利用率也是可以理解的。但是，如果您的系统在正常工作负载下显示高利用率，则没有高峰工作负载的空间。例如，下图说明了在上午10:00和下午2:00具有高峰期的应用程序随时间的工作负载。</p>
                  <div class="figure" id="GUID-F548D17E-7175-4EEA-BF2E-93F5CB23E375__I4165">
                     <p class="titleinfigure">图18-1平均工作量和峰值工作量</p><img src="img/figure_181_average_workload_and_peak_workload.png" alt="下面是图18-1的描述" title="下面是图18-1的描述" longdesc="img_text/figure_181_average_workload_and_peak_workload.html"><br><a href="img_text/figure_181_average_workload_and_peak_workload.html">“图18-1平均工作量和峰值工作量”的说明</a></div>
                  <!-- class="figure" -->
                  <p>此示例应用程序有100个用户每天工作8小时。每5分钟输入一个事务的每个用户每天转换为9,600个事务。在8小时内，系统必须每小时支持1,200笔交易，平均每分钟交易20笔。如果需求率保持不变，那么您可以构建一个系统来满足此平均工作负载。</p>
                  <p>但是，使用模式不是恒定的，在这种情况下，每分钟20个事务可以理解为仅仅是最低要求。如果您需要达到的峰值速率是每分钟120个事务，那么您必须配置一个可以支持此峰值工作负载的系统。</p>
                  <p>对于此示例，假设在峰值工作负载下，Oracle数据库使用90％的CPU资源。对于平均工作负载时段，Oracle数据库使用的可用CPU资源不超过约15％，如下面的等式所示：</p><pre class="oac_no_warn" dir="ltr">20 tpm / 120 tpm * 90％=可用CPU资源的15％</pre><p>其中<code class="codeph">tpm</code>是一分钟的交易。
                  </p>
                  <p>如果系统需要50％的CPU资源来达到20 tpm，那么就存在一个问题：使用90％的CPU，系统每分钟无法实现120个事务。但是，如果您调整此系统使其仅使用15％的CPU达到20 tpm，那么，假设线性可扩展性，系统可能使用90％的CPU资源每分钟实现120个事务。</p>
                  <p>随着用户被添加到应用程序中，工作负载可能会升至先前的峰值水平。然后，没有更多的CPU容量可用于新的峰值速率，实际上高于之前的峰值速率。</p>
               </div>
            </div><a id="TGDBA95150"></a><div class="props_rev_3"><a id="GUID-3FBB00B3-435A-4111-9A00-E41AD78B3873" name="GUID-3FBB00B3-435A-4111-9A00-E41AD78B3873"></a><h3 id="TGDBA-GUID-3FBB00B3-435A-4111-9A00-E41AD78B3873" class="sect3"><span class="enumeration_section">18.4</span>解决CPU问题</h3>
               <div>
                  <p>您可以通过以下方式解决CPU容量问题</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>检测并解决过度消耗中的CPU问题，如<span class="q">“ <a href="managing-operating-system-resources.html#GUID-054F55C9-0866-4D8D-8DB2-DD8FB88B1B04">查找和调整CPU利用率</a> ”中所述</span> 。
                        </p>
                     </li>
                     <li>
                        <p>通过使用Oracle数据库资源管理器优先化CPU资源分配来减少峰值负载使用模式的影响，如<span class="q">“ <a href="managing-operating-system-resources.html#GUID-7015A597-1671-4CEB-A638-1F54C982882E">使用Oracle数据库资源管理器管理CPU资源</a> ”中所述</span> 。
                        </p>
                     </li>
                     <li>
                        <p>运用<a id="d57722e1262" class="indexterm-anchor"></a>实例caging以限制在多CPU系统上运行多个数据库实例时数据库实例可以同时使用的CPU数量，如<span class="q">“ <a href="managing-operating-system-resources.html#GUID-1E26B939-BA92-4C4E-A50B-209B18C41C9C">使用实例锁定管理CPU资源</a> ”中所述</span> 。
                        </p>
                     </li>
                     <li>
                        <p>增加硬件容量并改进系统架构。</p>
                     </li>
                  </ul>
               </div><a id="TGDBA94423"></a><div class="props_rev_3"><a id="GUID-054F55C9-0866-4D8D-8DB2-DD8FB88B1B04" name="GUID-054F55C9-0866-4D8D-8DB2-DD8FB88B1B04"></a><h4 id="TGDBA-GUID-054F55C9-0866-4D8D-8DB2-DD8FB88B1B04" class="sect4"><span class="enumeration_section">18.4.1</span>查找和调整CPU利用率</h4>
                  <div>
                     <p>系统上运行的每个进程都会影响可用的进程<a id="d57722e1324" class="indexterm-anchor"></a> CPU资源。因此，调整非数据库因素也可以提高数据库性能。
                     </p>
                     <p>使用<code class="codeph">V$OSSTAT</code>或<code class="codeph">V$SYSMETRIC_HISTORY</code>视图监视操作系统的系统利用率统计信息。<code class="codeph">V$OSSTAT</code>和<code class="codeph">V$SYSMETRIC_HISTORY</code>包含的有用统计信息包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>CPU数量</p>
                        </li>
                        <li>
                           <p>CPU利用率</p>
                        </li>
                        <li>
                           <p>加载</p>
                        </li>
                        <li>
                           <p>分页</p>
                        </li>
                        <li>
                           <p>物理内存</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-054F55C9-0866-4D8D-8DB2-DD8FB88B1B04__GUID-33D00472-0698-4A71-BD48-9D261AEDCC5A">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">V$OSSTAT</code>和<code class="codeph">V$SYSMETRIC_HISTORY</code>更多信息，请<a href="../refrn/V-OSSTAT.html#REFRN30321" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                     </div>
                     <p>您可以使用操作系统监视工具来确定整个系统上运行的进程。如果系统负载过重，请检查本节后面介绍的内存，I / O和进程管理区域。</p>
                     <p>您可以使用<code class="codeph">sar</code> <code class="codeph">-u</code>等工具<span class="bold"> </span>在许多基于UNIX的系统上，检查系统上的CPU利用率级别。在UNIX中，统计信息显示用户时间，系统时间，空闲时间和等待I / O的时间。如果在正常或低工作负载下等待I / O的空闲时间和时间都接近于零（小于5％），则存在CPU问题。
                     </p>
                     <p>在Windows上，您可以使用管理性能工具来监视CPU利用率。该实用程序提供有关处理器时间，用户时间，特权时间，中断时间和DPC时间的统计信息。</p>
                     <p>相关话题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="managing-operating-system-resources.html#GUID-A4DB0817-E022-4CD5-92F7-4FA45F7DD306">检查内存管理</a></p>
                        </li>
                        <li>
                           <p><a href="managing-operating-system-resources.html#GUID-DE2C4F83-4DA2-4AF6-A63E-BEAE263AA641">检查I / O管理</a></p>
                        </li>
                        <li>
                           <p><a href="managing-operating-system-resources.html#GUID-11C97AF4-AFEA-46A6-91A3-BC263B0B3DD7">检查网络管理</a></p>
                        </li>
                        <li>
                           <p><a href="managing-operating-system-resources.html#GUID-863002CD-9E38-4C52-8984-AF961976C4F4">检查流程管理</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-054F55C9-0866-4D8D-8DB2-DD8FB88B1B04__GUID-3269F00E-858A-47FA-8E17-93E773242325">
                        <p class="notep1">注意：</p>
                        <p>本文档介绍如何在大多数基于UNIX和Windows的系统上检查系统CPU利用率。对于其他平台，请参阅操作系统文档。</p>
                     </div>
                  </div><a id="TGDBA94424"></a><div class="props_rev_3"><a id="GUID-A4DB0817-E022-4CD5-92F7-4FA45F7DD306" name="GUID-A4DB0817-E022-4CD5-92F7-4FA45F7DD306"></a><h5 id="TGDBA-GUID-A4DB0817-E022-4CD5-92F7-4FA45F7DD306" class="sect5"><span class="enumeration_section">18.4.1.1</span>检查内存管理</h5>
                     <div>
                        <p>检查以下内存管理区域：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="managing-operating-system-resources.html#GUID-0EDA2370-C65F-414E-9DBF-EA8711C7F4BD">分页和交换</a></p>
                           </li>
                           <li>
                              <p><a href="managing-operating-system-resources.html#GUID-58D71159-D10B-4205-8835-04C5BF4E4B95">超大页面表</a></p>
                           </li>
                        </ul>
                     </div><a id="TGDBA94425"></a><div class="props_rev_3"><a id="GUID-0EDA2370-C65F-414E-9DBF-EA8711C7F4BD" name="GUID-0EDA2370-C65F-414E-9DBF-EA8711C7F4BD"></a><h6 id="TGDBA-GUID-0EDA2370-C65F-414E-9DBF-EA8711C7F4BD" class="sect6"><span class="enumeration_section">18.4.1.1.1</span>分页和交换</h6>
                        <div>
                           <p>使用<code class="codeph">V$OSSTAT</code>视图，实用程序，如<code class="codeph">sar</code>或<a id="d57722e1530" class="indexterm-anchor"></a> UNIX上的<code class="codeph">vmstat</code>或管理<a id="d57722e1536" class="indexterm-anchor"></a> Windows上的性能工具，用于调查分页的原因和<a id="d57722e1542" class="indexterm-anchor"></a>交换。
                           </p>
                        </div>
                     </div><a id="TGDBA94426"></a><div class="props_rev_3"><a id="GUID-58D71159-D10B-4205-8835-04C5BF4E4B95" name="GUID-58D71159-D10B-4205-8835-04C5BF4E4B95"></a><h6 id="TGDBA-GUID-58D71159-D10B-4205-8835-04C5BF4E4B95" class="sect6"><span class="enumeration_section">18.4.1.1.2</span>超大页面表</h6>
                        <div>
                           <p>在UNIX上，如果处理空间变得太大，那么它可能会导致<a id="d57722e1596" class="indexterm-anchor"></a>页表变得太大了。这不是Windows系统上的问题。
                           </p>
                        </div>
                     </div>
                  </div><a id="TGDBA94427"></a><div class="props_rev_3"><a id="GUID-DE2C4F83-4DA2-4AF6-A63E-BEAE263AA641" name="GUID-DE2C4F83-4DA2-4AF6-A63E-BEAE263AA641"></a><h5 id="TGDBA-GUID-DE2C4F83-4DA2-4AF6-A63E-BEAE263AA641" class="sect5"><span class="enumeration_section">18.4.1.2</span>检查I / O管理</h5>
                     <div>
                        <p>颠簸是一个I / O管理问题。确保您的工作负载适合内存，因此计算机不适合<a id="d57722e1650" class="indexterm-anchor"></a>捶打（ <a id="d57722e1653" class="indexterm-anchor"></a>交换和<a id="d57722e1656" class="indexterm-anchor"></a><a id="d57722e1658" class="indexterm-anchor"></a>寻呼进出内存的过程）。操作系统分配固定的时间部分，在此期间CPU资源可用于您的进程。如果该过程浪费了每个时间段的大部分时间进行检查以确保它可以运行并确保所有必需的组件都在计算机中，则该过程可能仅使用分配给实际执行工作的50％的时间。
                        </p>
                     </div>
                  </div><a id="TGDBA94428"></a><div class="props_rev_3"><a id="GUID-11C97AF4-AFEA-46A6-91A3-BC263B0B3DD7" name="GUID-11C97AF4-AFEA-46A6-91A3-BC263B0B3DD7"></a><h5 id="TGDBA-GUID-11C97AF4-AFEA-46A6-91A3-BC263B0B3DD7" class="sect5"><span class="enumeration_section">18.4.1.3</span>检查网络管理</h5>
                     <div>
                        <p>检查客户端/服务器往返。处理消息有开销。当应用程序生成许多需要通过网络发送的消息时，发送消息的延迟可能导致CPU过载。要缓解此问题，请捆绑多条消息，而不是执行大量往返。例如，您可以使用数组插入，数组提取等。</p>
                     </div>
                  </div><a id="TGDBA94429"></a><div class="props_rev_3"><a id="GUID-863002CD-9E38-4C52-8984-AF961976C4F4" name="GUID-863002CD-9E38-4C52-8984-AF961976C4F4"></a><h5 id="TGDBA-GUID-863002CD-9E38-4C52-8984-AF961976C4F4" class="sect5"><span class="enumeration_section">18.4.1.4</span>检查流程管理</h5>
                     <div>
                        <p>应检查本节中讨论的几个流程管理问题。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>调度和切换</p>
                           </li>
                           <li>
                              <p>上下文切换</p>
                           </li>
                           <li>
                              <p>启动新的操作系统进程</p>
                           </li>
                        </ul>
                     </div><a id="TGDBA94430"></a><div class="props_rev_3"><a id="GUID-3243F6CD-6618-4225-A197-47085F271657" name="GUID-3243F6CD-6618-4225-A197-47085F271657"></a><h6 id="TGDBA-GUID-3243F6CD-6618-4225-A197-47085F271657" class="sect6"><span class="enumeration_section">18.4.1.4.1</span>调度和切换</h6>
                        <div>
                           <p>操作系统可能会花费过多时间<a id="d57722e1825" class="indexterm-anchor"></a>安排和<a id="d57722e1830" class="indexterm-anchor"></a>转换过程。检查您使用操作系统的方式，因为可能正在使用太多进程。在Windows系统上，请勿使用过多的非数据库进程使服务器过载。
                           </p>
                        </div>
                     </div><a id="TGDBA94431"></a><div class="props_rev_3"><a id="GUID-9E4A7B18-D174-4573-A9A9-6590B54405C1" name="GUID-9E4A7B18-D174-4573-A9A9-6590B54405C1"></a><h6 id="TGDBA-GUID-9E4A7B18-D174-4573-A9A9-6590B54405C1" class="sect6"><span class="enumeration_section">18.4.1.4.2</span>上下文切换</h6>
                        <div>
                           <p>由于操作系统特定的特性，您的系统可能会花费大量时间<a id="d57722e1884" class="indexterm-anchor"></a>上下文切换。上下文切换可能很昂贵，尤其是对于大型SGA。在Windows上，上下文切换不是问题，每个实例只有一个进程。所有线程共享相同的页表。
                           </p>
                           <p>Oracle数据库具有多种上下文切换功能：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>等待后的司机</p>
                                 <p>Oracle进程必须能够发布另一个Oracle进程（给它一条消息），并且还必须能够等待发布。例如，前台进程可能需要发布LGWR以告知它写出到达给定点的所有块，以便它可以确认提交。</p>
                                 <p>这种后等待机制通常是通过UNIX信号量实现的，但这些可能是资源密集型的。因此，某些平台提供后等待驱动程序，通常是内核设备驱动程序，它是实现后等待接口的轻量级方法。</p>
                              </li>
                              <li>
                                 <p>内存映射系统计时器</p>
                                 <p>Oracle数据库通常需要查询系统时间以获取时序信息。这可能涉及操作系统调用，这会引起相对昂贵的上下文切换。某些平台实现了内存映射计时器，该计时器使用进程虚拟地址空间中的地址来包含当前时间信息。从这个内存映射定时器读取时间比系统调用的上下文切换开销要便宜。</p>
                              </li>
                              <li>
                                 <p>列出I / O接口以在One Call中提交多个异步I / O.</p>
                                 <p>List I / O是一个应用程序编程接口，允许在单个系统调用中提交多个异步I / O请求，而不是通过单独的系统调用提交多个I / O请求。此功能的主要好处是减少所需的上下文切换次数。</p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="TGDBA94435"></a><div class="props_rev_3"><a id="GUID-7A539AA9-F773-4B5A-A063-800B00599307" name="GUID-7A539AA9-F773-4B5A-A063-800B00599307"></a><h6 id="TGDBA-GUID-7A539AA9-F773-4B5A-A063-800B00599307" class="sect6"><span class="enumeration_section">18.4.1.4.3</span>启动新的操作系统进程</h6>
                        <div>
                           <p>启动新的操作系统进程的成本很高。开发人员通常会创建一个单一用途的流程，退出流程，然后创建一个新流程。此技术每次都会重新创建和销毁进程，从而消耗过多的CPU，尤其是在具有大型SGA的应用程序中。每次都需要CPU来构建页表。当您锁定或锁定共享内存时，问题会更加严重，因为您必须访问每个页面。</p>
                           <p>例如，如果您有1千兆字节的SGA，那么您可能每4 KB有一个页表条目，而页表条目可能是8个字节。您最终可能会得到（1 GB / 4 KB）* 8字节条目。这变得很昂贵，因为您需要不断确保加载页表。</p>
                        </div>
                     </div>
                  </div>
               </div><a id="TGDBA95151"></a><div class="props_rev_3"><a id="GUID-7015A597-1671-4CEB-A638-1F54C982882E" name="GUID-7015A597-1671-4CEB-A638-1F54C982882E"></a><h4 id="TGDBA-GUID-7015A597-1671-4CEB-A638-1F54C982882E" class="sect4"><span class="enumeration_section">18.4.2</span>使用Oracle数据库资源管理器管理CPU资源</h4>
                  <div>
                     <p>神谕<a id="d57722e2012" class="indexterm-anchor"></a> Database Resource Manager通过以下方式在数据库用户和应用程序之间分配和管理CPU资源：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>防止CPU饱和</p>
                           <p>如果CPU以100％运行，则可以使用Oracle数据库资源管理器为每个使用者组中的会话分配最大量的CPU。此功能可确保高优先级会话可立即运行并降低低优先级会话的CPU消耗。</p>
                        </li>
                        <li>
                           <p>限制使用者组的CPU使用率</p>
                           <p>您可以使用资源管理器指令<code class="codeph">max_utilization_limit</code>对使用者组可以使用的CPU百分比设置硬限制。此功能限制低优先级会话的CPU消耗，并有助于为使用者组中的工作负载提供更一致的性能。
                           </p>
                        </li>
                        <li>
                           <p>限制失控查询造成的损害</p>
                           <p>从Oracle Database <span class="italic">11g</span>第2版（11.2.0.2）开始，Oracle数据库资源管理器可以通过限制呼叫的最长执行时间或将长时间运行的查询移动到较低优先级的使用者组来限制失控查询造成的损害。
                           </p>
                        </li>
                        <li>
                           <p>限制使用者组的并行语句活动</p>
                           <p>从Oracle Database <span class="italic">11g</span>第2版（11.2.0.2）开始，您可以使用资源管理器指令<code class="codeph">parallel_target_percentage</code>来阻止一个使用者组独占所有并行服务器。如果数据库导致超出此限制，则会对并行语句进行排队。
                           </p>
                           <p>例如，假设目标并行服务器数为64，而使用者组<code class="codeph">ETL</code>将此指令设置为50％。如果使用者组<code class="codeph">ETL</code>使用30个并行服务器，并且新并行语句需要4个并行服务器，则数据库将对此语句进行排队。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-7015A597-1671-4CEB-A638-1F54C982882E__GUID-882252DA-5B75-4623-9C33-843EFE282531">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN027" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a> <span class="italic"> </span>了解如何使用Oracle数据库资源管理器</p>
                           </li>
                           <li>
                              <p><a href="../vldbg/using-parallel.html#VLDBG010" target="_blank"><span class="italic">Oracle数据库VLDB和分区指南</span></a> <span class="italic"> </span>学习如何使用并行查询</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TGDBA95152"></a><div class="props_rev_3"><a id="GUID-1E26B939-BA92-4C4E-A50B-209B18C41C9C" name="GUID-1E26B939-BA92-4C4E-A50B-209B18C41C9C"></a><h4 id="TGDBA-GUID-1E26B939-BA92-4C4E-A50B-209B18C41C9C" class="sect4"><span class="enumeration_section">18.4.3</span>使用实例囚笼管理CPU资源</h4>
                  <div>
                     <p>在单个系统上运行多个数据库实例时，实例会争用CPU资源。一个资源密集型数据库实例可能会显着降低其他实例的性能。要避免此问题，可以使用实例锁定来限制每个实例可以使用的CPU数。然后，Oracle数据库资源管理器根据您为实例设置的资源计划在各种数据库会话之间分配CPU，从而最大程度地降低实例受CPU限制的可能性。</p>
                     <div class="infoboxnotealso" id="GUID-1E26B939-BA92-4C4E-A50B-209B18C41C9C__GUID-B1F6A604-0E8F-4D96-907E-F84A3BDFDCA8">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用实例锁定的信息，请参见<a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN13333" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>更改</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96242-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="CATALOG.html" title="Previous" type="text/html"></link>
      <link rel="next" href="CONFIGURE.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference"></meta>
    <meta name="dcterms.isVersionOf" content="RCMRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CATALOG.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="CONFIGURE.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-at-sign-to-quit.html" property="item" typeof="WebPage"><span property="name">RMAN命令：@（at符号）到QUIT</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">更改</li>
            </ol>
            <a id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2" name="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2"></a><a id="RCMRF90056"></a><a id="RCMRF90057"></a><a id="RCMRF90058"></a><a id="RCMRF90059"></a><a id="RCMRF90060"></a><a id="RCMRF90061"></a><a id="RCMRF90062"></a><a id="RCMRF90063"></a><a id="RCMRF90064"></a><a id="RCMRF90065"></a><a id="RCMRF90066"></a><a id="RCMRF90067"></a><a id="RCMRF90068"></a><a id="RCMRF90069"></a><a id="RCMRF90070"></a><a id="RCMRF110"></a>
            
            <h2 id="RCMRF-GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2" class="sect2"><span class="enumeration_section">2.8</span>改变</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-5CB27913-6874-427C-90F7-D023DA8C23BE">目的</p>
                  <p>使用<code class="codeph">CHANGE</code>命令执行以下任务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>更新RMAN存储库中记录的备份和副本的可用性状态</p>
                     </li>
                     <li>
                        <p>更改自动诊断存储库中记录的优先级或关闭故障</p>
                     </li>
                     <li>
                        <p>更新目标数据库的恢复目录中记录的<code class="codeph">DB_UNIQUE_NAME</code></p>
                     </li>
                     <li>
                        <p>将Data Guard环境中的数据库备份与环境中的其他数据库相关联</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="infoboxnotealso" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-7A310409-B6A4-4259-A33B-E4CBBA47CB55">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="../bradv/maintaining-rman-backups.html#BRADV8173" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南，</span></a>用于更改备份或副本的可用性状态</p>
               </div>
               <div class="section">
                  <p class="subhead1" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-F65C7F9E-AECC-4ACD-B948-19F1330ADF98">先决条件</p>
                  <p>RMAN必须作为<code class="codeph">TARGET</code>连接到必须启动的数据库实例。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-01A5B3DF-6CCF-488F-B029-0F2B6B9B0691">使用说明</p>
                  <p><span class="q">“ <a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJIIGD">Data Guard环境中的RMAN备份</a> ”</span>解释了备份的关联和可访问性之间的区别。在Data Guard环境中，创建备份或副本的数据库与该文件相关联。如果可以访问备份，则可以在连接到Data Guard环境中的任何数据库时使用<code class="codeph">CHANGE</code> ， <code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code>和<code class="codeph"><a href="CROSSCHECK.html#GUID-07E07E7E-9A29-4901-9739-FFC472029A7D">CROSSCHECK</a></code>等维护命令进行备份。通常，RMAN将在任何数据库上创建的磁带备份视为环境中所有数据库都可访问，而磁盘备份只能由创建它们的数据库访问。
                  </p>
                  <p>例如，假设您将RMAN作为<code class="codeph">TARGET</code>连接到备用数据库<code class="codeph">standby1</code>并将其备份到磁带和磁盘。如果磁带驱动器不可用，则可以将RMAN作为<code class="codeph">TARGET</code>连接到Data Guard环境中的任何主数据库或备用数据库，以将磁带备份的状态更改为<code class="codeph">UNAVAILABLE</code> 。修复磁带驱动器后，您可以将RMAN作为<code class="codeph">TARGET</code>连接到任何数据库，以将磁带备份的状态更改回<code class="codeph">AVAILABLE</code> 。但是，如果操作系统实用程序意外删除了磁盘备份，则RMAN只能在将<code class="codeph">TARGET</code>连接到<code class="codeph">standby1</code>时更改磁盘备份的状态。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-CE8C6B00-322A-41FF-800B-3E3245956315">句法</p>
                  <p><span class="bold"><span class="italic">change</span> :: =</span></p>
                  <div class="figure" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-2DA8C741-34BB-4D19-91EE-48300CE8E2F4"><img src="img/change.gif" alt="下面是change.eps的描述" title="下面是change.eps的描述" longdesc="img_text/change.html"><br><a href="img_text/change.html">插图说明change.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDEJJII">maintSpec :: =</a></span> ， <span class="italic"><a href="forDbUniqueNameOption.html#GUID-D1D9CFED-9A57-438A-A80C-D8B7B6E131BE__BABBBGBC">forDbUniqueNameOption :: =</a></span> ， <span class="italic"><a href="keepOption.html#GUID-36E9008E-48A5-4AB9-8C9D-2D477342594B__BABGDGCC">keepOption :: =</a></span> ， <span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier :: =</a></span> ）</p>
                  <p id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDEJJII"><a id="d25527e250" class="indexterm-anchor"></a><a id="d25527e254" class="indexterm-anchor"></a> <span class="bold"><span class="italic">maintSpec</span> :: =</span></p>
                  <div class="figure" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-C58C5A51-A340-4709-BBCA-BB6B5D764CC3"><img src="img/maintspec.gif" alt="maintspec.eps的描述如下" title="maintspec.eps的描述如下" longdesc="img_text/maintspec.html"><br><a href="img_text/maintspec.html">说明maintspec.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="listObjList.html#GUID-73596ED4-99FE-45B8-B333-FECC698E1374__BABBEIIJ">listObjList :: =</a></span> ， <span class="italic"><a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__BABJGBFG">archivelogRecordSpecifier :: =</a></span> ， <span class="italic"><a href="maintQualifier.html#GUID-6AF4DA92-BBBD-4931-96D2-766D9D29EA3F__BABEEGAJ">maintQualifier :: =</a></span> ， <span class="italic"><a href="recordSpec.html#GUID-92F09EC0-5E30-47C0-834E-5A24FAE98F14__BABEIAEB">recordSpec :: =</a></span> ， <span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier :: =</a></span> ）</p>
                  <p><a id="d25527e288" class="indexterm-anchor"></a><a id="d25527e292" class="indexterm-anchor"></a> <span class="bold"><span class="italic">forDbUniqueNameOption</span> :: =</span></p>
                  <div class="figure" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-3B9E4370-8966-4E1B-9C7A-35D1B374C97F"><img src="img/fordbuniquenameoption.gif" alt="下面是fordbuniquenameoption.eps的描述" title="下面是fordbuniquenameoption.eps的描述" longdesc="img_text/fordbuniquenameoption.html"><br><a href="img_text/fordbuniquenameoption.html">说明fordbuniquenameoption.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p><a id="d25527e304" class="indexterm-anchor"></a><a id="d25527e308" class="indexterm-anchor"></a> <span class="bold"><span class="italic">resetDbUniqueNameOption</span> :: =</span></p>
                  <div class="figure" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-1E6EEBAA-4994-4C8F-9155-7DD95FA03E2B"><img src="img/resetdbuniquenameoption.gif" alt="下面是resetdbuniquenameoption.eps的描述" title="下面是resetdbuniquenameoption.eps的描述" longdesc="img_text/resetdbuniquenameoption.html"><br><a href="img_text/resetdbuniquenameoption.html">说明resetdbuniquenameoption.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p><a id="d25527e321" class="indexterm-anchor"></a><a id="d25527e325" class="indexterm-anchor"></a> <span class="bold"><span class="italic">changeFailure</span> :: =</span></p>
                  <div class="figure" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-5793F7BA-1593-4A4C-942B-61AFD01781D5"><img src="img/changefailure.gif" alt="下面是changefailure.eps的描述" title="下面是changefailure.eps的描述" longdesc="img_text/changefailure.html"><br><a href="img_text/changefailure.html">插图描述changefailure.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-04891294-707B-4FF9-94AA-FC1BA766046D">语义</p>
                  <p id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDDDBFA"><span class="bold"><span class="italic">更改</span></span></p>
                  <p>此子句使您可以更改RMAN存储库记录的状态。要获取要更改其状态的RMAN存储库记录的主键，请运行<code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code>命令或查询恢复目录视图。
                  </p>
                  <div class="tblformalwide" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-B9B45BD1-C6C5-412D-831E-35CB401D8B61">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes CHANGE command parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d25527e358">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d25527e361">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e366" headers="d25527e358 ">
                                 <p><code class="codeph">PREPLUGIN</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e366 d25527e361 ">
                                 <p></p>
                                 <p>指定要<code class="codeph">CHANGE</code>的预打印文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e378" headers="d25527e358 ">
                                 <p><span class="italic"><code class="codeph"><a href="maintSpec.html#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e378 d25527e361 ">
                                 <p>指定要<code class="codeph">CHANGE</code>文件。</p>
                                 <p></p>
                                 <p><span class="italic"><code class="codeph"><a href="maintQualifier.html#GUID-6AF4DA92-BBBD-4931-96D2-766D9D29EA3F">maintQualifier</a></code></span>子句为必须更改的存储库记录设置规则。要更改与已删除的PDB关联的存储库记录的状态，请使用<code class="codeph">GUID</code>子句指定已删除的PDB的GUID。 <code class="codeph">dba_pdb_history</code>视图包含已删除PDB的GUID。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <span class="italic"><code class="codeph"><a href="maintSpec.html#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span>以获取本节中选项的描述。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e417" headers="d25527e358 ">
                                 <p><span class="italic"><code class="codeph">   <a href="forDbUniqueNameOption.html#GUID-D1D9CFED-9A57-438A-A80C-D8B7B6E131BE">forDbUniqueNameOption</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e417 d25527e361 ">
                                 <p>更改Data Guard环境中与指定<code class="codeph">DB_UNIQUE_NAME</code>唯一关联的对象的元数据。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <span class="italic"><code class="codeph"><a href="forDbUniqueNameOption.html#GUID-D1D9CFED-9A57-438A-A80C-D8B7B6E131BE">forDbUniqueNameOption</a></code></span> ，以获取此子句中选项的说明。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e442" headers="d25527e358 ">
                                 <p><code class="codeph">可用</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e442 d25527e361 ">
                                 <p><a id="d25527e448" class="indexterm-anchor"></a><a id="d25527e450" class="indexterm-anchor"></a><a id="d25527e454" class="indexterm-anchor"></a><a id="d25527e458" class="indexterm-anchor"></a>将备份或副本的状态更改为存储库中的<code class="codeph">AVAILABLE</code> 。RMAN搜索该文件并验证它是否存在。
                                 </p>
                                 <p>当以前不可用的文件再次可用时，此功能非常有用。您还可以使用此选项来更改先前版本的备份和副本的存储库状态。</p>
                                 <p>这是唯一需要手动或自动维护通道的<code class="codeph">CHANGE</code>选项。但是，当<code class="codeph">CHANGE ...时，不需要维护通道<code class="codeph">CHANGE ...AVAILABLE</code>与仅为磁盘的文件（即<code class="codeph">ARCHIVELOG</code> ， <code class="codeph">DATAFILECOPY</code>或<code class="codeph">CONTROLFILECOPY</code> ）一起使用。如果你使用<code class="codeph">CHANGE ...对于非磁盘的文件具有AVAILABLE</code> ，并且在未配置为自动通道的设备类型上创建对象，则在这些通道上发出手动维护命令。例如，如果您在<code class="codeph">sbt</code>通道上创建了备份，但只自动配置了<code class="codeph">DISK</code>通道，那么您必须在<code class="codeph">CHANGE ...之前手动分配<code class="codeph">sbt</code>通道<code class="codeph">CHANGE ...AVAILABLE</code>可以在备份上运行。
                                 </p>
                                 <p>如果你执行<code class="codeph">CHANGE ...对于Data Guard环境中的文件AVAILABLE</code> ，然后RMAN会在将其状态更新为<code class="codeph">AVAILABLE</code>之前尝试交叉检查该文件。如果文件不可访问，则当与<code class="codeph">TARGET</code>连接到与文件关联的数据库时，RMAN会提示您执行相同的操作。如果文件可访问，则RMAN会根据请求更新状态。
                                 </p>
                                 <p><span class="bold">注意：</span>您可以在<code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code>输出或恢复目录视图中查看备份的状态。
                                 </p>
                                 <p><span class="bold">注意：</span> <code class="codeph">CHANGE ...AVAILABLE</code>对于外部归档重做日志文件无效，该文件由逻辑备用数据库接收<a id="d25527e528" class="indexterm-anchor"></a> LogMiner会话。与普通的归档重做日志文件不同，外部归档重做日志文件具有不同的DBID。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e532" headers="d25527e358 ">
                                 <p><span class="italic"><code class="codeph">   <a href="keepOption.html#GUID-36E9008E-48A5-4AB9-8C9D-2D477342594B">keepOption</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e532 d25527e361 ">
                                 <p><a id="d25527e542" class="indexterm-anchor"></a>更改与配置的保留策略相关的备份或副本的免除状态。例如，指定<code class="codeph">CHANGE ...NOKEEP</code>删除备份的<code class="codeph">KEEP</code>属性，使其受备份保留策略的约束。
                                 </p>
                                 <p><code class="codeph">KEEP FOREVER</code>子句需要使用恢复目录（参见<a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDHFHGC">例2-46</a> ）。<code class="codeph">RESTORE POINT</code>选项对<code class="codeph">CHANGE</code>无效。你不能使用<code class="codeph">CHANGE ...存储在快速恢复区域中的文件的UNAVAILABLE</code>或<code class="codeph">KEEP</code>属性。
                                 </p>
                                 <p><span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="keepOption.html#GUID-36E9008E-48A5-4AB9-8C9D-2D477342594B">keepOption</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e583" headers="d25527e358 ">
                                 <p><span class="italic"><code class="codeph"><a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDDEBAI">resetDbUniqueNameOption</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e583 d25527e361 ">
                                 <p>将<span class="italic"><code class="codeph"><a href="maintSpec.html#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span>的文件与Data Guard环境中的其他数据库相关联。
                                 </p>
                                 <p><span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDDEBAI">resetDbUniqueNameOption</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e607" headers="d25527e358 ">
                                 <p><code class="codeph">UNAVAILABLE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e607 d25527e361 ">
                                 <p><a id="d25527e613" class="indexterm-anchor"></a><a id="d25527e615" class="indexterm-anchor"></a><a id="d25527e619" class="indexterm-anchor"></a><a id="d25527e623" class="indexterm-anchor"></a>将备份或副本的状态更改为存储库中的<code class="codeph">UNAVAILABLE</code> （请参见<a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDEBBHI">示例2-44</a> ）。查看<code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code>输出或恢复目录视图中的状态。
                                 </p>
                                 <p><a id="d25527e639" class="indexterm-anchor"></a>当无法找到文件或迁移到异地时，此选项很有用。RMAN不使用<code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code>或<code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code>命令中标记为<code class="codeph">UNAVAILABLE</code>的文件。如果稍后找到该文件或返回主站点，则使用<code class="codeph">AVAILABLE</code>选项更新其状态。如果您不希望特定备份或副本有资格恢复但又不想删除它，或者您希望更改先前版本的备份和副本的存储库状态，则<code class="codeph">UNAVAILABLE</code>选项也很有用。
                                 </p>
                                 <p><code class="codeph">改变......UNAVAILABLE</code>对快速恢复区中的文件无效。此命令对于外部归档重做日志文件也无效，这些文件由LogMiner会话的逻辑备用数据库接收。与普通的归档重做日志文件不同，外部归档重做日志文件具有不同的DBID。</p>
                                 <p><span class="bold">注意：</span>如果执行<code class="codeph">CHANGE ...对于Data Guard环境中的文件是UNAVAILABLE</code> ，然后RMAN在将其状态更新为<code class="codeph">UNAVAILABLE</code>之前不会尝试交叉检查该文件。无论文件是否存在，RMAN都会根据请求更新状态。
                                 </p>
                                 <p><span class="bold">注意：</span> <code class="codeph">CHANGE ...将目标数据库备份到零数据丢失恢复设备（通常称为恢复设备）时，无法使用UNAVAILABLE</code>命令。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e685" headers="d25527e358 ">
                                 <p><code class="codeph">UNCATALOG</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e685 d25527e361 ">
                                 <p></p>
                                 <p><a id="d25527e692" class="indexterm-anchor"></a>从恢复目录中删除对数据文件副本，备份片，备份集或归档重做日志的引用，并将目标控制文件中的记录更新为<code class="codeph">DELETED</code>状态（请参阅<a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDCADAJ">示例2-45</a> ）。使用<code class="codeph">CHANGE BACKUPSET … UNCATALOG</code>取消记录备份集中的所有备份片段。
                                 </p>
                                 <p><code class="codeph">CHANGE ...UNCATALOG</code>命令不接触物理备份和副本。使用此命令通过除<code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code>命令之外的某些方法删除文件时通知RMAN。
                                 </p>
                                 <p>如果你执行<code class="codeph">CHANGE ...UNCATALOG</code>用于Data Guard环境中的文件，然后RMAN在从恢复目录中删除其元数据之前不会尝试交叉检查该文件。无论文件是否物理存在，RMAN都会根据请求删除元数据。
                                 </p>
                                 <p><span class="bold">警告：</span>如果从备份控制文件重新同步或升级恢复目录，则先使用<code class="codeph">CHANGE ...从RMAN存储库中删除的记录<code class="codeph">CHANGE ...UNCATALOG</code>可能会重新出现在恢复目录中。
                                 </p>
                                 <p><span class="bold">注意：</span> <code class="codeph">CHANGE ...将目标数据库备份到零数据丢失恢复设备（通常称为恢复设备）时，无法使用UNCATALOG</code>命令。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e735" headers="d25527e358 ">
                                 <p></p>
                                 <p><code class="codeph">NOPROMPT</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e735 d25527e361 ">
                                 <p>使用恢复目录执行uncatalog操作时不显示提示。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e744" headers="d25527e358 "><code class="codeph">DEVICE TYPE</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></td>
                              <td align="left" valign="top" width="71%" headers="d25527e744 d25527e361 ">
                                 <p>仅对指定的设备类型执行<code class="codeph">CHANGE</code> （请参阅<span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span> ）。仅当您配置了自动通道且未手动分配通道时，此选项才有效。例如，如果您运行<code class="codeph">CHANGE UNCATALOG ...DEVICE TYPE DISK</code> ，然后RMAN仅取消磁盘上的文件目录。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e769" headers="d25527e358 ">
                                 <p><span class="italic"><code class="codeph"><a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDBGFCG">changeFailure</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e769 d25527e361 ">
                                 <p>指定Data Recovery Advisor记录的故障更改。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e780" headers="d25527e358 "><code class="codeph">DB_UNIQUE_NAME</code> <code class="codeph">FROM</code> <span class="italic"><code class="codeph">db_unique_name</code></span> <code class="codeph">TO</code> <span class="italic"><code class="codeph">db_unique_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d25527e780 d25527e361 ">
                                 <p>更新恢复目录中的元数据，以反映Data Guard环境中数据库的新<code class="codeph">DB_UNIQUE_NAME</code> 。第一个值指定当前记录在恢复目录中的数据库的旧<code class="codeph">DB_UNIQUE_NAME</code> ，而第二个值指定新的<code class="codeph">DB_UNIQUE_NAME</code> 。</p>
                                 <p>必须将RMAN连接到恢复目录和已装入的目标数据库。目标数据库不能在<code class="codeph">FROM</code> <span class="italic"><code class="codeph">db_unique_name</code></span>参数中指定<code class="codeph">DB_UNIQUE_NAME</code> ;否则，RMAN发出错误信号。
                                 </p>
                                 <p>通常，在更改数据库的<code class="codeph">DB_UNIQUE_NAME</code>初始化参数后必须使用此命令，并且必须在恢复目录中更新其元数据。通常，在对重命名的数据库执行任何其他RMAN操作之前，请不要运行此命令。建议的做法是，执行<code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">DB_UNIQUE_NAME</code>之前<code class="codeph">CHANGE DB_UNIQUE_NAME</code> 。</p>
                                 <p>假设您已将备用数据库的<code class="codeph">DB_UNIQUE_NAME</code>初始化参数从<code class="codeph">standby_old</code>更改为<code class="codeph">standby_new</code> 。通常，您在以下方案中执行<code class="codeph">CHANGE DB_UNIQUE_NAME</code> ：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>甲<code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">DB_UNIQUE_NAME</code>命令显示旧<code class="codeph">DB_UNIQUE_NAME</code>值，但<span class="italic">不</span>显示新的（参见<a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDCDEAC">实施例2-49</a> ）。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">DB_UNIQUE_NAME</code>命令显示旧的<span class="italic">和</span>新的<code class="codeph">DB_UNIQUE_NAME</code>值。当RMAN作为<code class="codeph">TARGET</code>连接到具有无法识别的<code class="codeph">DB_UNIQUE_NAME</code>的数据库时，RMAN会将该实例隐式注册为新数据库。因此， <code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">DB_UNIQUE_NAME</code>命令可以显示<code class="codeph">DB_UNIQUE_NAME</code>初始化参数已更改的数据库的旧名称和新名称（在此示例中为<code class="codeph">standby_old</code>和<code class="codeph">standby_new</code> ）。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>在其中只有老名称列在的情况下，执行<code class="codeph">CHANGE DB_UNIQUE_NAME FROM standby_old TO standby_new</code>使RMAN改变<code class="codeph">DB_UNIQUE_NAME</code>为<code class="codeph">standby_old</code>到<code class="codeph">standby_new</code>在恢复目录。
                                 </p>
                                 <p>在列出旧名称和新名称的方案中，当您运行<code class="codeph">CHANGE DB_UNIQUE_NAME FROM standby_old TO standby_new</code>时，RMAN会自动执行以下命令：</p>
                                 <ol>
                                    <li>
                                       <p><code class="codeph">更改ARCHIVELOG ALL FOR DB_UNIQUE_NAME standby_old RESET DB_UNIQUE_NAME</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">更改DB_UNIQUE_NAME standby_old的备份RESET DB_UNIQUE_NAME</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph"><a href="UNREGISTER.html#GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB">UNREGISTER</a></code> <code class="codeph">DB_UNIQUE_NAME standby_old</code></p>
                                    </li>
                                 </ol>
                                 <p>因此，RMAN将<code class="codeph">FROM</code>子句中指定的<code class="codeph">DB_UNIQUE_NAME</code>的所有备份的关联更改为<code class="codeph">TO</code>子句中指定的<code class="codeph">DB_UNIQUE_NAME</code> 。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDDEBAI"><span class="bold"><span class="italic">resetDbUniqueNameOption</span></span></p>
                  <p><a id="d25527e966" class="indexterm-anchor"></a>此子句使您可以将Data Guard环境中的一个数据库上的备份与环境中的其他数据库相关联。下表说明了使用<code class="codeph">RESET DB_UNIQUE_NAME</code>指定了不同选项时的RMAN行为。</p>
                  <div class="tblformal" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDJGCDI">
                     <p class="titleintable">表2-2 RESET DB_UNIQUE_NAME选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="重置DB_UNIQUE_NAME选项" width="100%" border="1" summary="Describes the outcome of using different RESET DB_UNIQUE_NAME parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d25527e985">到db_unique_name</th>
                              <th align="left" valign="bottom" width="25%" id="d25527e990">FOR DB_UNIQUE_NAME</th>
                              <th align="left" valign="bottom" width="50%" id="d25527e993">RMAN行为</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d25527e998" headers="d25527e985 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d25527e998 d25527e990 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d25527e998 d25527e993 ">
                                 <p>RMAN将<span class="italic"><code class="codeph"><a href="maintSpec.html#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span>文件与目标数据库相关联。RMAN还会更改与任何数据库无关的所有备份的关联。
                                 </p>
                                 <p>通常，在升级到Oracle Database <span class="italic">11g</span>或更高版本的恢复目录模式后，您将使用这些选项执行<code class="codeph">CHANGE</code> ，以便可以将备份与目标数据库关联。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d25527e1022" headers="d25527e985 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d25527e1022 d25527e990 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d25527e1022 d25527e993 ">
                                 <p>RMAN将<span class="italic"><code class="codeph"><a href="maintSpec.html#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span>文件与<code class="codeph">TO</code> <span class="italic"><code class="codeph">db_unique_name</code></span>指示的数据库相关联。RMAN还会更改与任何数据库无关的所有备份的关联。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d25527e1045" headers="d25527e985 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d25527e1045 d25527e990 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d25527e1045 d25527e993 ">
                                 <p>RMAN将其操作限制为与<code class="codeph">FOR DB_UNIQUE_NAME</code>子句中的数据库关联的<span class="italic"><code class="codeph"><a href="maintSpec.html#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span>文件，然后将这些文件与目标数据库相关联。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d25527e1064" headers="d25527e985 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d25527e1064 d25527e990 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d25527e1064 d25527e993 ">
                                 <p>RMAN将其操作限制为与<code class="codeph">FOR DB_UNIQUE_NAME</code>子句中的数据库关联的<span class="italic"><code class="codeph"><a href="maintSpec.html#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span>文件，然后将这些文件与<code class="codeph">TO</code> <span class="italic"><code class="codeph">db_unique_name</code></span>指定的数据库相关联。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="tblformalwide" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-43D52AE1-3935-4F98-B0E3-A214AD12C42D">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes the CHANGE command resetDbUniqueNameOption parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d25527e1097">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d25527e1100">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e1105" headers="d25527e1097 ">
                                 <p><code class="codeph">重置DB_UNIQUE_NAME</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e1105 d25527e1100 ">
                                 <p>将<span class="italic"><code class="codeph"><a href="maintSpec.html#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span>的文件与目标数据库关联（请参阅<a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDDAFDE">示例2-48</a> ）。<a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDJGCDI" title="描述使用不同RESET DB_UNIQUE_NAME参数的结果">表2-2</a>说明了指定不同选项时的RMAN行为。
                                 </p>
                                 <p>更改文件从一个数据库到另一个数据库的关联时，RMAN会从恢复目录中删除重复的名称。例如，如果更改数据文件copy <code class="codeph">/d1/df1.bak</code>从数据库<code class="codeph">standby1</code>到数据库<code class="codeph">prod</code>的关联，则恢复目录只有一个该文件的记录而不是两个。
                                 </p>
                                 <p>指定<code class="codeph">RESET DB_UNIQUE_NAME</code>选项时要小心，因为无法撤消此命令的效果。例如，在更改了与数据库<code class="codeph">standby1</code>关联的文件与数据库<code class="codeph">prod</code>的关联后，恢复目录不会保留有关这些文件先前与之关联的数据库的历史元数据。但是，您可以取消注册数据库<code class="codeph">standby1</code>并再次将RMAN连接到<code class="codeph">standby1</code> ，但使用<code class="codeph">standby1</code>控制文件中的所有元数据更新恢复目录。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e1158" headers="d25527e1097 ">
                                 <p><code class="codeph">TO</code> <span class="italic"><code class="codeph">db_unique_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e1158 d25527e1100 ">
                                 <p>将<span class="italic"><code class="codeph"><a href="maintSpec.html#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span>的文件与Data Guard环境中的指定数据库相关联。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDBGFCG"><span class="bold"><span class="italic">changeFailure</span></span></p>
                  <p>此子句使您可以更改故障的状态。使用<code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">FAILURE</code>命令显示故障列表。
                  </p>
                  <div class="tblformalwide" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-E03C69D7-0EF4-442D-BD6B-8C52AE740B37">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes the CHANGE  command changeFailure parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d25527e1197">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d25527e1200">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e1205" headers="d25527e1197 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e1205 d25527e1200 ">
                                 <p>使您可以更改自动诊断信息库中记录的优先级或关闭故障。默认情况下，RMAN会在执行请求的更改之前提示进行确认。</p>
                                 <p>RMAN连接的目标数据库必须是单实例数据库，并且不能是物理备用数据库。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e1215" headers="d25527e1197 ">
                                 <p><code class="codeph">所有</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e1215 d25527e1200 ">
                                 <p>更改仅打开故障。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e1223" headers="d25527e1197 ">
                                 <p><code class="codeph">危急</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e1223 d25527e1200 ">
                                 <p>仅更改严重故障。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e1231" headers="d25527e1197 ">
                                 <p><code class="codeph">高</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e1231 d25527e1200 ">
                                 <p>更改只会失败<code class="codeph">HIGH</code>优先级。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e1242" headers="d25527e1197 ">
                                 <p><code class="codeph">低</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e1242 d25527e1200 ">
                                 <p>仅更改<code class="codeph">LOW</code>优先级的故障。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e1253" headers="d25527e1197 ">
                                 <p><code class="codeph">未知</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e1253 d25527e1200 ">
                                 <p>仅更改在装入数据库之前无法确定优先级的故障。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e1261" headers="d25527e1197 ">
                                 <p><code class="codeph">   </code><span class="italic"><code class="codeph">failnum</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e1261 d25527e1200 ">
                                 <p>仅更改指定的故障。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e1272" headers="d25527e1197 "><code class="codeph">EXCLUDE FAILURE</code> <code class="codeph">   </code><span class="italic"><code class="codeph">failnum</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d25527e1272 d25527e1200 ">
                                 <p>从更改中排除指定的失败。使用逗号分隔的列表指定多个故障</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e1285" headers="d25527e1197 ">
                                 <p><code class="codeph">关闭</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e1285 d25527e1200 ">
                                 <p>通过将其状态设置为<code class="codeph">CLOSED</code>来<code class="codeph">CLOSED</code>指定的故障。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e1296" headers="d25527e1197 ">
                                 <p><code class="codeph">优先</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e1296 d25527e1200 ">
                                 <p>将指定故障的优先级更改为<code class="codeph">LOW</code>或<code class="codeph">HIGH</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d25527e1310" headers="d25527e1197 ">
                                 <p><code class="codeph">NOPROMPT</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d25527e1310 d25527e1200 ">
                                 <p>在修改指定的故障之前不会提示确认。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-0376324F-B590-4AFE-8642-4096EB904128">例子</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDEBBHI">
                  <p class="titleinexample">示例2-44将备份更新到状态UNAVAILABLE</p>
                  <p>假设由于磁盘上存在空间问题，您已暂时将备份集4移动到其他位置。具有密钥4的备份仍列为可用：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;列表备份摘要;</pre><pre class="oac_no_warn" dir="ltr">备份列表===============键TY LV S设备类型完成时间#Pieces #Copies压缩标签-------  -   -   -  ------ ----- --------------- ------- ------- ---------- --- 1 BAA DISK 24-FEB-13 1 1 NO TAG20130427T115348 3 BAA DISK 24-MAR-13 1 1 NO TAG20130427T115452 4 BFA DISK 24-APR-13 1 1 NO TAG20130427T115456</pre><p>您不希望取消对备份进行编目，因为您计划在有更多磁盘空间时将其移回原始位置。因此，您使备份不可用如下（包括示例输出）：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CHANGE BACKUPSET 4 UNAVAILABLE;已更改备份片段不可用备份片句= / disk2 / backup / c-3257893776-20130424-00 RECID = 4 STAMP = 588858897已将1个对象更改为UNAVAILABLE状态</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDCADAJ">
                  <p class="titleinexample">示例2-45取消编目和重新编目存档的重做日志文件</p>
                  <p>在此示例中，您将所有归档的重做日志文件移动到新目录，取消编目，然后在新位置重新编目：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; HOST'/ bin / mv $ ORACLE_HOME / dbs / * .arc / disk2 / archlog /'; RMAN&gt; CHANGE ARCHIVELOG ALL UNCATALOG; RMAN&gt; CATALOG START WITH'/ disk2 / archlog'NOPROMPT;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDHFHGC">
                  <p class="titleinexample">示例2-46将数据库备份更改为存档备份</p>
                  <p>假设您的目标是将数据库备份更改为您计划在异地存储的归档备份。由于备份是一致的并且不需要恢复，因此您无需使用备份存储已归档的重做日志文件。该示例使用<code class="codeph">CHANGE ...KEEP FOREVER</code>命令指定备份永远不会过时。
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT TARGET / RMAN&gt; CONNECT CATALOG rco @ catdb恢复目录数据库密码： <span class="italic">密码</span> RMAN&gt; CHANGE BACKUP标签'consistent_db_bkup'KEEP FOREVER;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__GUID-322B1D26-308F-4F8A-9DB9-E0E39035FD9B">
                  <p class="titleinexample">例2-47更改失败状态</p>
                  <p>在以下示例中， <code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">FAILURE</code>命令显示数据文件具有损坏的块。故障编号为5，优先级为<code class="codeph">HIGH</code> 。此数据文件包含非必要数据，因此您决定将此故障的优先级更改为低。
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; LIST FAILURE;数据库故障列表故障ID优先级状态检测时间摘要---------- -------- --------- ------------ -  ------- 5 HIGH OPEN 11-DEC-13数据文件8包含损坏的块RMAN&gt; CHANGE FAILURE 5 PRIORITY LOW;数据库故障列表故障ID优先级状态检测时间摘要---------- -------- --------- ------------ -  ------- 5 HIGH OPEN 11-DEC-13数据文件8包含损坏的块您真的想要更改上述故障（输入YES还是NO）？YES将1个故障更改为LOW优先级</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDDAFDE">
                  <p class="titleinexample">示例2-48在Data Guard环境中将备份与新数据库关联</p>
                  <p>假设<code class="codeph">standby1</code> ， <code class="codeph">standby2</code>和<code class="codeph">standby3</code>是与主数据库关联的备用数据库是<code class="codeph">prod</code> 。此示例假定RMAN已连接到目标数据库<code class="codeph">prod</code>和恢复目录。
                  </p>
                  <p>您计划从环境中删除<code class="codeph">standby1</code> ，因此您希望将<code class="codeph">standby1</code>备份与主数据库关联。您还计划从环境中删除<code class="codeph">standby3</code> ，因此您希望将<code class="codeph">standby3</code>备份与<code class="codeph">standby2</code> 。您执行以下命令：</p><pre class="oac_no_warn" dir="ltr">为DB_UNIQUE_NAME备用1更改备份RESET DB_UNIQUE_NAME;为DB_UNIQUE_NAME备份3更改备份RESET DB_UNIQUE_NAME TO standby2;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2__CHDCDEAC">
                  <p class="titleinexample">示例2-49更新恢复目录中的DB_UNIQUE_NAME</p>
                  <p>假设备用数据库的<code class="codeph">DB_UNIQUE_NAME</code>初始化参数设置为<code class="codeph">dgrdbms4</code> ，您决定将其更改为<code class="codeph">sfrdbms4</code> 。关闭备用实例，将<code class="codeph">DB_UNIQUE_NAME</code>初始化参数更改为<code class="codeph">sfrdbms4</code> ，然后重新启动备用实例。
                  </p>
                  <p>稍后，要更新恢复目录以反映备用数据库的已更改唯一名称，请将RMAN连接到主数据库和恢复目录，然后执行<code class="codeph">CHANGE</code>命令，如下所示：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT TARGET / RMAN&gt; CONNECT CATALOG rco @ catdb恢复目录数据库密码： <span class="italic">密码</span>
</pre><pre class="oac_no_warn" dir="ltr">RMAN&gt; CHANGE DB_UNIQUE_NAME FROM dgrdbms4 to sfrdbms4;</pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
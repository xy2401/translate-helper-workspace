<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="To identify the storage requirements for using Oracle ASM, you must determine the number of devices and the amount of free disk space that you require.">
      <meta name="description" content="To identify the storage requirements for using Oracle ASM, you must determine the number of devices and the amount of free disk space that you require.">
      <title>Identifying Storage Requirements for Oracle Automatic Storage Management</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Grid Infrastructure Installation and Upgrade Guide">
      <meta property="og:description" content="To identify the storage requirements for using Oracle ASM, you must determine the number of devices and the amount of free disk space that you require.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Grid Infrastructure Installation and Upgrade Guide for Oracle Solaris">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="grid-infrastructure-installation-and-upgrade-guide-oracle-solaris.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-24T22:50:24-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2014, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96273-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="configuring-storage-for-oracle-automatic-storage-management.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-clusterware-storage-space-requirements.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Grid Infrastructure Installation and Upgrade Guide for Oracle Solaris">
    <meta name="dcterms.isVersionOf" content="CWSOL">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-storage-for-oracle-automatic-storage-management.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-clusterware-storage-space-requirements.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Grid Infrastructure Installation and Upgrade Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="configuring-storage-for-oracle-grid-infrastructure-for-a-cluster.html" property="item" typeof="WebPage"><span property="name">Configuring Storage for Oracle Grid Infrastructure</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="configuring-storage-for-oracle-automatic-storage-management.html" property="item" typeof="WebPage"><span property="name">Configuring Storage for Oracle Automatic Storage Management</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Identifying Storage Requirements for Oracle Automatic Storage Management</li>
            </ol>
            <a id="GUID-82B9A93B-185F-4DE8-8D90-606192004EAD" name="GUID-82B9A93B-185F-4DE8-8D90-606192004EAD"></a>
            
            <h2 id="CWSOL-GUID-82B9A93B-185F-4DE8-8D90-606192004EAD" class="sect2">Identifying Storage Requirements for Oracle Automatic Storage Management</h2>
         </header>
         <div class="ind">
            <div>
               <p>To identify the storage requirements for using Oracle ASM, you must determine the number of devices and the amount of free disk space that you require. </p>
               <div class="section">To complete this task, follow these steps:</div>
               <!-- class="section" -->
               <ol>
                  <li class="stepexpand"><span>Plan your Oracle ASM disk groups requirement, based on the cluster configuration you want to deploy. Oracle Domain Services Clusters store Oracle Clusterware files and the Grid Infrastructure Management Repository (GIMR) on separate Oracle ASM disk groups and hence require configuration of two separate Oracle ASM disk groups, one for OCR and voting files and the other for the GIMR.</span></li>
                  <li class="stepexpand"><span>Determine whether you want to use Oracle ASM for Oracle Database files, recovery files, and Oracle Database binaries. Oracle Database files include data files, control files, redo log files, the server parameter file, and the password file.</span><div>
                        <div class="infoboxnote" id="GUID-82B9A93B-185F-4DE8-8D90-606192004EAD__GUID-998A9478-6CDD-4CE9-86DC-354636447B64">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You do not have to use the same storage mechanism for Oracle Database files and recovery files. You can use a shared file system for one file type and Oracle ASM for the other.</p>
                              </li>
                              <li>
                                 <p>There are two types of Oracle Clusterware files: OCR files and voting files. You can use either Oracle ASM or a shared file system to store OCR and voting files on Oracle Standalone Cluster deployments, but you must use Oracle ASM to store OCR and voting files on Oracle Domain Services cluster deployments.</p>
                              </li>
                              <li>
                                 <p>If your database files are stored on a shared file system, then you can continue to use the same for database files, instead of moving them to Oracle ASM storage.</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </li>
                  <li class="stepexpand"><span>Choose the Oracle ASM redundancy level to use for the Oracle ASM disk group.</span><div>
                        <p>Except when using external redundancy, Oracle ASM mirrors all Oracle Clusterware files in separate failure groups within a disk group. A quorum failure group, a special type of failure group, contains mirror copies of voting files when voting files are stored in normal or high redundancy disk groups. The disk groups that contain Oracle Clusterware files (OCR and voting files) have a higher minimum number of failure groups than other disk groups because the voting files are stored in quorum failure groups in the Oracle ASM disk group.</p>
                        <p>A quorum failure group is a special type of failure group that is used to store the Oracle Clusterware voting files. The quorum failure group is used to ensure that a quorum of the specified failure groups are available. When Oracle ASM mounts a disk group that contains Oracle Clusterware files, the quorum failure group is used to determine if the disk group can be mounted in the event of the loss of one or more failure groups. Disks in the quorum failure group do not contain user data, therefore a quorum failure group is not considered when determining redundancy requirements in respect to storing user data.</p>
                        <p>The redundancy levels are as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>High redundancy</p>
                              <p>In a high redundancy disk group, Oracle ASM uses three-way mirroring to increase performance and provide the highest level of reliability. A high redundancy disk group requires a minimum of three disk devices (or three failure groups). The effective disk space in a high redundancy disk group is one-third the sum of the disk space in all of its devices.</p>
                              <p>For Oracle Clusterware files, a high redundancy disk group requires a minimum of five disk devices and provides five voting files and one OCR (one primary and two secondary copies). For example, your deployment may consist of three regular failure groups and two quorum failure groups. Note that not all failure groups can be quorum failure groups, even though voting files need all five disks. With high redundancy, the cluster can survive the loss of two failure groups.</p>
                              <p>While high redundancy disk groups do provide a high level of data protection, you should consider the greater cost of additional storage devices before deciding to select high redundancy disk groups.</p>
                           </li>
                           <li>
                              <p>Normal redundancy</p>
                              <p>In a normal redundancy disk group, to increase performance and reliability, Oracle ASM by default uses two-way mirroring. A normal redundancy disk group requires a minimum of two disk devices (or two failure groups). The effective disk space in a normal redundancy disk group is half the sum of the disk space in all of its devices.</p>
                              <p>For Oracle Clusterware files, a normal redundancy disk group requires a minimum of three disk devices and provides three voting files and one OCR (one primary and one secondary copy). For example, your deployment may consist of two regular failure groups and one quorum failure group. With normal redundancy, the cluster can survive the loss of one failure group.</p>
                              <p>If you are not using a storage array providing independent protection against data loss for storage, then Oracle recommends that you select normal redundancy.</p>
                           </li>
                           <li>
                              <p>External redundancy</p>
                              <p>An external redundancy disk group requires a minimum of one disk device. The effective disk space in an external redundancy disk group is the sum of the disk space in all of its devices. </p>
                              <p>Because Oracle ASM does not mirror data in an external redundancy disk group, Oracle recommends that you use external redundancy with storage devices such as RAID, or other similar devices that provide their own data protection mechanisms.</p>
                           </li>
                           <li>
                              <p>Flex redundancy</p>
                              <p>A flex redundancy disk group is a type of redundancy disk group with features such as flexible file redundancy, mirror splitting, and redundancy change. A flex disk group can consolidate files with different redundancy requirements into a single disk group. It also provides the capability for databases to change the redundancy of its files. A disk group is a collection of file groups, each associated with one database. A quota group defines the maximum storage space or quota limit of a group of databases within a disk group.</p>
                              <p>In a flex redundancy disk group, Oracle ASM uses three-way mirroring of Oracle ASM metadata to increase performance and provide reliability. For database data, you can choose no mirroring (unprotected), two-way mirroring (mirrored), or three-way mirroring (high). A flex redundancy disk group requires a minimum of three disk devices (or three failure groups).</p>
                           </li>
                           <li>
                              <p>Extended redundancy</p>
                              <p>Extended redundancy disk group has similar features as the flex redundancy disk group. Extended redundancy is available when you configure an Oracle Extended Cluster. Extended redundancy extends Oracle ASM data protection to cover failure of sites by placing enough copies of data in different failure groups of each site. A site is a collection of failure groups. For extended redundancy with three sites, for example, two data sites, and one quorum failure group, the minimum number of disks is seven (three disks each for two data sites and one quorum failure group outside the two data sites). The maximum number of supported sites for extended redundancy is three. In an extended redundancy disk group, each site maintains the user data redundancy as specified by the file group attribute. Each site can host data failure groups and quorum failure groups for a given disk group. For example, if the file group redundancy is specified as 2 or 3, each site has 2 or 3 mirrors respectively, provided there are enough failure groups to accommodate the mirrors. See <cite>About Oracle Extended Clusters</cite> for more information about selecting redundancy levels for extended clusters.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-82B9A93B-185F-4DE8-8D90-606192004EAD__GUID-6EFDFF93-BECA-41A1-BED6-91689EDBD87F">
                           <p class="notep1">See Also:</p><a href="../ostmg/asm-intro.html#OSTMG94058" target="_blank"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for more information about file groups and quota groups for flex disk groups
                        </div>
                        <div class="infoboxnote" id="GUID-82B9A93B-185F-4DE8-8D90-606192004EAD__GUID-87B2E85E-8D0E-4AE2-852C-7F75A9711AF8">
                           <p class="notep1">Note:</p>
                           <p>You can alter the redundancy level of the disk group after a disk group is created. For example, you can convert a normal or high redundancy disk group to a flex redundancy disk group. Within a flex redundancy disk group, file redundancy can change among three possible values: unprotected, mirrored, or high.</p>
                        </div>
                     </div>
                  </li>
                  <li class="stepexpand"><span>Determine the total amount of disk space that you require for Oracle Clusterware files, and for the database files and recovery files.</span><div>
                        <p>If an Oracle ASM instance is running on the system, then you can use an existing disk group to meet these storage requirements. If necessary, you can add disks to an existing disk group during the database installation.</p>
                        <p>See <cite>Oracle Clusterware Storage Space Requirements</cite> to determine the minimum number of disks and the minimum disk space requirements for installing Oracle Clusterware files, and installing the starter database, where you have voting files in a separate disk group.
                        </p>
                     </div>
                  </li>
                  <li class="stepexpand"><span>Determine an allocation unit size. </span><div>
                        <p>Every Oracle ASM disk is divided into allocation units (AU). An allocation unit is the fundamental unit of allocation within a disk group. You can select the AU Size value from 1, 2, 4, 8, 16, 32, or 64 MB, depending on the specific disk group compatibility level. For flex disk groups, the default value for AU size is set to 4 MB. For external, normal, and high redundancies, the default AU size is 1 MB.</p>
                     </div>
                  </li>
                  <li class="stepexpand"><span>For Oracle Clusterware installations, you must also add additional disk space for the Oracle ASM metadata. You can use the following formula to calculate the disk space requirements (in MB) for OCR and voting files, and the Oracle ASM metadata:</span><div><pre class="pre codeblock"><code>total = [2 * ausize * disks] + [redundancy * (ausize * (all_client_instances + nodes + disks + 32) + (64 * nodes) + clients + 543)]</code></pre><p>redundancy = Number of mirrors: external = 1, normal = 2, high = 3, flex = 3. </p>
                        <p>ausize = Metadata AU size in megabytes</p>
                        <p>all_client_instance = Sum of all database clients and ACFS proxy instances</p>
                        <p>nodes = Number of nodes in cluster. </p>
                        <p>clients - Number of database instances for each node. </p>
                        <p>disks - Number of disks in disk group. </p>
                        <p>For example, for a four-node Oracle RAC installation, using three disks in a normal redundancy disk group, you require an additional 5293 MB of space:<code class="codeph"> [2 * 4 * 3] + [2 * (4 * (4 * (4 + 1)+ 30)+ (64 * 4)+ 533)] = 5293 MB</code></p>
                     </div>
                  </li>
                  <li class="stepexpand"><span>Optionally, identify failure groups for the Oracle ASM disk group devices.</span><div>
                        <p>If you intend to use a normal or high redundancy disk group, then you can further protect the database against hardware failure by associating a set of disk devices in a custom failure group. By default, each device is included in its failure group. However, if two disk devices in a normal redundancy disk group are attached to the same Host Bus Adapter (HBA), then the disk group becomes unavailable if the adapter fails. The HBA in this example is a single point of failure.</p>
                        <p>For instance, to avoid failures of this type, you can use two HBA fabric paths, each with two disks, and define a failure group for the disks attached to each adapter. This configuration would enable the disk group to tolerate the failure of one HBA fabric path. </p>
                        <div class="infoboxnote" id="GUID-82B9A93B-185F-4DE8-8D90-606192004EAD__GUID-05B46A03-4B19-4F0F-80CA-DC0A06042119">
                           <p class="notep1">Note:</p>
                           <p>You can define custom failure groups during installation of Oracle Grid Infrastructure. You can also define failure groups after installation using the GUI tool ASMCA, the command line tool asmcmd, or SQL commands. If you define custom failure groups, then you must specify a minimum of two failure groups for normal redundancy disk groups and three failure groups for high redundancy disk groups.</p>
                        </div>
                     </div>
                  </li>
                  <li class="stepexpand"><span>  If you are sure that a suitable disk group does not exist on the system, then install or identify appropriate disk devices to add to a new disk group. Use the following guidelines when identifying appropriate disk devices:</span><ul>
                        <li>The disk devices must be owned by the user performing Oracle Grid Infrastructure installation.</li>
                        <li>All the devices in an Oracle ASM disk group must be the same size and have the same performance characteristics.</li>
                        <li>Do not specify multiple partitions on a single physical disk as a disk group device. Oracle ASM expects each disk group device to be on a separate physical disk.</li>
                        <li>Although you can specify a logical volume as a device in an Oracle ASM disk group, Oracle does not recommend their use because it adds a layer of complexity that is unnecessary with Oracle ASM. Oracle recommends that if you choose to use a logical volume manager, then use the logical volume manager to represent a single logical unit number (LUN) without striping or mirroring, so that you can minimize the effect on storage performance of the additional storage layer.</li>
                     </ul>
                  </li>
                  <li class="stepexpand"><span>If you use Oracle ASM disk groups created on Network File System (NFS) for storage, then ensure that you follow recommendations described in <cite>Guidelines for Configuring Oracle ASM Disk Groups on NFS</cite>.</span></li>
               </ol>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="storage-checklist-for-oracle-grid-infrastructure.html#GUID-92B4918E-92A1-46CD-AC85-7C25C6E6B8A1" title="Review the checklist for storage hardware and configuration requirements for Oracle Grid Infrastructure installation.">Storage Checklist for Oracle Grid Infrastructure</a></li>
                     <li><a href="oracle-clusterware-storage-space-requirements.html#GUID-97FD5D40-A65B-4575-AD12-06C491AF3F41" title="Use this information to determine the minimum number of disks and the minimum disk space requirements based on the redundancy type, for installing Oracle Clusterware files for various Oracle Cluster deployments.">Oracle Clusterware Storage Space Requirements</a></li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="configuring-storage-for-oracle-automatic-storage-management.html#GUID-CBDF7400-9A35-4548-A3F2-52BA6871F130" title="Identify storage requirements and Oracle ASM disk group options.">Configuring Storage for Oracle Automatic Storage Management</a></p>
                  </div>
               </div>
            </div>
            
         </div>
      </article>
   </body>
</html>
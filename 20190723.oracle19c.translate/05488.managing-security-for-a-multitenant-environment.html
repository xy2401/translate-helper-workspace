<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager."></meta>
      <meta name="description" content="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager."></meta>
      <title>管理多租户环境的安全性</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator’s Guide "></meta>
      <meta property="og:description" content="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96136-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="administering-application-containers-with-sql-plus.html" title="Previous" type="text/html"></link>
      <link rel="next" href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="MULTI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="administering-application-containers-with-sql-plus.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="managing-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">管理多租户环境</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理多租户环境的安全性</li>
            </ol>
            <a id="GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" name="GUID-92E55FB3-F968-473F-927C-A95745CE5EBA"></a>
            
            <h2 id="MULTI-GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" class="sect2"><span class="enumeration_chapter">18</span>管理多租户环境的安全性</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。</p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391">管理通用和本地授予的权限</a><br><span>在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。</span></li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29">管理常见角色和本地角色</a><br>常见角色是在根中创建的角色;在PDB中创建本地角色。</li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275">使用PDB锁定配置文件限制PDB上的操作</a><br>您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459">为PDB配置操作系统用户</a><br><code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code>过程将用户帐户配置为PDB的操作系统用户。</li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE">在多租户环境中使用应用程序上下文</a><br>应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22">在多租户环境中使用Oracle虚拟专用数据库</a><br>Oracle虚拟专用数据库（VPD）使您可以过滤访问数据的用户。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E">在多租户环境中使用传输层安全性</a><br>传输层安全性（TLS）可以在多租户环境中用于应用程序容器。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-52FA95B1-8823-43F9-9D96-8F801BF16178">多租户环境中的Oracle数据编辑</a><br>在多租户环境中，Oracle Data Redaction策略仅适用于当前可插拔数据库（PDB）中的对象。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890">在多租户环境中进行审计</a><br>审计跟踪用户在多租户容器数据库（CDB）中所做的更改。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="managing-a-multitenant-environment.html#GUID-93F1E584-D309-4301-82E0-AD0E60D4977C" title="您可以使用SQL * Plus或企业管理器云控制（云控制）管理多租户环境。">管理多租户环境</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-9BA29009-8148-426C-AD8F-DA2679384391" name="GUID-9BA29009-8148-426C-AD8F-DA2679384391"></a><h3 id="MULTI-GUID-9BA29009-8148-426C-AD8F-DA2679384391" class="sect3"><span class="enumeration_section">18.1</span>管理通用和本地授予的权限</h3>
               <div>
                  <p><span>在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。</span></p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D">Oracle Multitenant选项如何影响权限</a><br>在多租户环境中，所有用户（包括普通用户）只能在当前容器中行使其权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926">关于普遍和本地授予的特权</a><br>在多租户环境中，普通用户和本地用户都可以相互授予权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B">通用授权系统权限的工作原理</a><br>用户只能在授予他们的PDB中行使系统权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-A804A571-D104-451E-83E0-8CEF716DBC68">常见的对象权限如何工作</a><br>公共对象的对象权限适用于该对象以及此公共对象上的所有关联链接。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD">授予或撤销访问PDB的权限</a><br>您可以在多租户环境中授予和撤消PDB访问权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051">示例：在多租户环境中授予权限</a><br>您可以使用<span class="apiname" translate="no">GRANT</span>语句在多租户环境中授予权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3">允许公共用户查看CONTAINER_DATA对象信息</a><br>普通用户可以在根目录中查看有关<code class="codeph">CONTAINER_DATA</code>对象的信息，也可以查看特定PDB中的数据。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D" name="GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D"></a><h4 id="MULTI-GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D" class="sect4"><span class="enumeration_section">18.1.1</span> Oracle Multitenant选项如何影响权限</h4>
                  <div>
                     <p>在多租户环境中，所有用户（包括普通用户）只能在当前容器中行使其权限。</p>
                     <p>但是，连接到根的用户可以执行影响其他可插拔数据库（PDB）的某些操作。这些操作包括<code class="codeph">ALTER PLUGGABLE DATABASE</code> ， <code class="codeph">CREATE USER</code> ， <code class="codeph">CREATE ROLE</code>和<code class="codeph">ALTER USER</code> 。普通用户必须拥有启用这些操作的通常授予的权限。连接到根目录的公共用户可以通过根目录中的容器数据对象（例如，多租户容器数据库（CDB）视图和<code class="codeph">V$</code>视图）查看与PDB相关的元数据，前提是公共用户已被授予所需权限要访问这些视图，他的<code class="codeph">CONTAINER_DATA</code>属性已设置为允许查看有关各种PDB的数据。普通用户无法查询PDB中的表或视图。</p>
                     <p>普通用户无法在其他PDB中行使其权限。他们必须首先切换到他们想要的PDB，然后从那里行使他们的特权。要切换到其他容器，普通用户必须具有<code class="codeph">SET CONTAINER</code>权限。必须通常或在用户尝试切换的容器中授予<code class="codeph">SET CONTAINER</code>权限。或者，普通用户可以启动一个新的数据库会话，其初始当前容器是该用户想要的容器，依赖于该PDB中的<code class="codeph">CREATE SESSION</code>特权。</p>
                     <p>请注意，通常授予的权限可能会干扰为各个PDB配置的安全性。例如，假设应用程序PDB数据库管理员想要阻止PDB中的任何用户修改特定的应用程序公共对象。通常授予<code class="codeph">PUBLIC</code>或公共用户或对象上的公共角色的权限（例如<code class="codeph">UPDATE</code> ）将绕过PDB数据库管理员的意图。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926" name="GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926"></a><h4 id="MULTI-GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926" class="sect4"><span class="enumeration_section">18.1.2</span>关于通用和本地授予的权限</h4>
                  <div>
                     <p>在多租户环境中，普通用户和本地用户都可以相互授予权限。</p>
                     <p></p>
                     <p>特权本身既不普通也不本地。如何应用权限取决于权限是通常授予还是本地授予。</p>
                     <p>对于通常授予的权限：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>通常授予的权限可以在每个现有和未来容器中使用。</p>
                        </li>
                        <li>
                           <p>只有普通用户才能普遍授予权限，并且只有当受让人很常见时才会授予权限。</p>
                        </li>
                        <li>
                           <p>普通用户可以将权限授予其他普通用户或公共角色。</p>
                        </li>
                        <li>
                           <p>授权者必须连接到根，并且必须在<code class="codeph">GRANT</code>语句中指定<code class="codeph">CONTAINER=ALL</code> 。
                           </p>
                        </li>
                        <li>
                           <p>通常可以授予系统和对象权限。（对象权限仅在指定对象方面变为实际。）</p>
                        </li>
                        <li>
                           <p>当普通用户连接或切换到给定容器时，此用户执行各种活动（例如创建表）的能力由通常授予的权限以及在给定容器中本地授予的权限控制。</p>
                        </li>
                        <li>
                           <p>一般不要向<code class="codeph">PUBLIC</code>授予权限。
                           </p>
                        </li>
                     </ul>
                     <p>对于本地授予的权限：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>本地授予的权限只能在授予它的容器中使用。在根中授予权限时，它仅适用于根。</p>
                        </li>
                        <li>
                           <p>普通用户和本地用户都可以在本地授予权限。</p>
                        </li>
                        <li>
                           <p>普通用户和本地用户可以授予其他公共或本地角色的权限。</p>
                        </li>
                        <li>
                           <p>设保人必须连接到容器，并且必须在<code class="codeph">GRANT</code>语句中指定<code class="codeph">CONTAINER=CURRENT</code> 。
                           </p>
                        </li>
                        <li>
                           <p>任何用户都可以在本地向任何其他用户或角色（公共和本地）或<code class="codeph">PUBLIC</code>角色授予权限。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="overview-of-the-multitenant-architecture.html#GUID-16473474-7F47-4E40-A592-01836E7D911C" title="就像在非CDB中一样，CDB中的用户可以授予并被授予角色和权限。但是，CDB中的角色和特权要么是本地的，要么是普遍授予的。">CDB中的权限和角色授予概述</a></li>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" title="Oracle授予PUBLIC角色的所有权限都在本地授予。">PUBLIC角色如何在多租户环境中工作</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B" name="GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B"></a><h4 id="MULTI-GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B" class="sect4"><span class="enumeration_section">18.1.3</span>普遍授予的系统权限的工作原理</h4>
                  <div>
                     <p>用户只能在授予他们的PDB中行使系统权限。</p>
                     <p>例如，如果系统特权在本地授予PDB <code class="codeph">B</code>的公共用户<code class="codeph">A</code> ，则用户<code class="codeph">A</code>仅在连接到PDB <code class="codeph">B</code>时才能行使该特权。</p>
                     <p>如果满足以下要求，系统特权可以应用于根以及所有现有和未来的PDB中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>系统特权授予者是普通用户，并且被授予者是普通用户，共同角色或<code class="codeph">PUBLIC</code>角色。通常不会向<code class="codeph">PUBLIC</code>角色授予系统特权，因为这实际上使所有用户都可以使用系统特权。
                           </p>
                        </li>
                        <li>
                           <p>系统特权授予者拥有通常授予的特权的<code class="codeph">ADMIN OPTION</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">GRANT</code>语句必须包含<code class="codeph">CONTAINER=ALL</code>子句。
                           </p>
                        </li>
                     </ul>
                     <p>以下示例显示如何通常向普通用户<code class="codeph">c##hr_admin</code>授予权限。
                     </p><pre class="pre codeblock"><code>连接系统输入密码： <span class="italic">密码</span>已连接。GRANT创建任何表到c ## hr_admin CONTAINER = ALL;</code></pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-CB7E6FE8-8DFE-445F-A521-6A1D82BBA925" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A804A571-D104-451E-83E0-8CEF716DBC68" name="GUID-A804A571-D104-451E-83E0-8CEF716DBC68"></a><h4 id="MULTI-GUID-A804A571-D104-451E-83E0-8CEF716DBC68" class="sect4"><span class="enumeration_section">18.1.4</span>通常授予的对象权限的工作原理</h4>
                  <div>
                     <p>公共对象的对象权限适用于该对象以及此公共对象上的所有关联链接。</p>
                     <p>这些链接包括所有元数据链接，数据链接（以前称为对象链接），或者如果满足某些要求，则在根目录和属于容器的所有PDB（包括将来的PDB）中与其关联的扩展数据链接。</p>
                     <p>这些要求如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对象权限授予者是普通用户，被授权者是普通用户，共同角色或<code class="codeph">PUBLIC</code>角色。
                           </p>
                        </li>
                        <li>
                           <p>对象特权授予者拥有该特权的通常授予的<code class="codeph">GRANT OPTION</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">GRANT</code>语句包含<code class="codeph">CONTAINER=ALL</code>子句。
                           </p>
                        </li>
                     </ul>
                     <p>以下示例显示如何向公共用户<code class="codeph">c##hr_admin</code>授予对象权限，以便他可以从CDB根目录中的<code class="codeph">DBA_PDBS</code>视图或他可以访问的任何关联PDB中进行选择。
                     </p><pre class="oac_no_warn" dir="ltr">连接系统输入密码： <span class="italic">密码</span>已连接。GRANT SELECT DBA_OBJECTS to c ## hr_admin CONTAINER = ALL;</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-1592480B-9EFC-4C3F-B84F-F518A5B80CF9" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                           <li><a href="overview-of-the-multitenant-architecture.html#GUID-A356382A-413A-4A42-98DC-6C2464808202" title="从用户和应用程序的角度来看，CDB中每个容器中的数据字典是独立的，就像它在非CDB中一样。">CDB中的数据字典体系结构</a></li>
                           <li><a href="overview-of-the-multitenant-architecture.html#GUID-6A7183B5-E0AA-47E1-992C-838FDF21C3D9" title="在CDB中，每个对象的命名空间都限定在其容器中。">CDB中的命名空间</a></li>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" title="Oracle授予PUBLIC角色的所有权限都在本地授予。">PUBLIC角色如何在多租户环境中工作</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD" name="GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD"></a><h4 id="MULTI-GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD" class="sect4"><span class="enumeration_section">18.1.5</span>授予或撤销访问PDB的权限</h4>
                  <div>
                     <p>您可以在多租户环境中授予和撤消PDB访问权限。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD__GUID-C330F2CE-7F39-404D-9086-5D858CB7596B">要在多租户环境中授予权限：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在<code class="codeph">GRANT</code>或<code class="codeph">REVOKE</code>语句中包含<code class="codeph">CONTAINER</code>子句。
                              </p>
                           </li>
                        </ul>
                        <p>将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code>会将权限应用于所有现有和将来的容器;将其设置为<code class="codeph">CURRENT</code>仅将权限应用于本地容器。省略<code class="codeph">CONTAINER</code>子句会将权限应用于本地容器。如果从根发出<code class="codeph">GRANT</code>语句并省略<code class="codeph">CONTAINER</code>子句，则会在本地应用该特权。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../sqlrf/GRANT.html#SQLRF-GUID-20B4E2C0-A7F8-4BC8-A5E8-BE61BDC41AC3" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051" name="GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051"></a><h4 id="MULTI-GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051" class="sect4"><span class="enumeration_section">18.1.6</span>示例：在多租户环境中授予权限</h4>
                  <div>
                     <p>您可以使用<span class="apiname" translate="no">GRANT</span>语句在多租户环境中授予权限。
                     </p>
                     <p><a href="managing-security-for-a-multitenant-environment.html#GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051__CACJGEJA">示例18-1</a>显示了如何通常将<code class="codeph">CREATE TABLE</code>权限授予普通用户<code class="codeph">c##hr_admin</code>以便此用户可以在所有现有和将来的容器中使用此权限。
                     </p>
                     <div class="example" id="GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051__CACJGEJA">
                        <p class="titleinexample">示例18-1在多租户环境中授予权限</p><pre class="pre codeblock"><code>连接系统输入密码： <span class="italic">密码</span>已连接。GRANT CREATE TABLE to c ## hr_admin CONTAINER = ALL;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" name="GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3"></a><h4 id="MULTI-GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" class="sect4"><span class="enumeration_section">18.1.7</span>允许普通用户查看CONTAINER_DATA对象信息</h4>
                  <div>
                     <p>普通用户可以在根目录中查看有关<code class="codeph">CONTAINER_DATA</code>对象的信息，也可以查看特定PDB中的数据。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E">在连接到根时查看有关根，CDB和PDB的数据</a><br>当普通用户执行查询时，您可以限制<code class="codeph">X$</code>表和<code class="codeph">V$</code> ， <code class="codeph">GV$</code>和<code class="codeph">CDB_*</code>视图的视图信息。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C">允许普通用户查询特定PDB中的数据</a><br>您可以通过调整用户的<code class="codeph">CONTAINER_DATA</code>属性，使普通用户能够访问与特定PDB相关的数据。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E" name="GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E"></a><h5 id="MULTI-GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E" class="sect5"><span class="enumeration_section">18.1.7.1</span>连接到根时查看有关根，CDB和PDB的数据</h5>
                     <div>
                        <p>当普通用户执行查询时，您可以限制<code class="codeph">X$</code>表和<code class="codeph">V$</code> ， <code class="codeph">GV$</code>和<code class="codeph">CDB_*</code>视图的视图信息。
                        </p>
                        <div class="section">
                           <p><code class="codeph">X$</code>表和这些视图包含有关应用程序根及其关联的应用程序PDB的信息，或者，如果您连接到CDB根目录，则包含整个CDB。</p>
                           <p>当您不希望公开有关其他PDB的敏感信息时，限制此信息非常有用。为了启用此功能，Oracle数据库将这些表和视图作为容器数据对象提供。您可以通过查询<code class="codeph">USER_</code> |的<code class="codeph">TABLE_NAME</code> ， <code class="codeph">VIEW_NAME</code>和<code class="codeph">CONTAINER_DATA</code>列来查找特定表或视图是否为容器数据对象。 <code class="codeph">DBA_</code> | <code class="codeph">ALL_VIEWS</code> | <code class="codeph">TABLES</code>字典视图。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E__GUID-8877E116-47B2-401F-BB4F-5BEA0B56A8F2">要查找有关默认（用户级别）和特定于对象的<code class="codeph">CONTAINER_DATA</code>属性的信息，请执行以下操作：</p>
                           <ol>
                              <li>
                                 <p>在SQL * Plus或SQL Developer中，登录到root。</p>
                              </li>
                              <li>
                                 <p>查询<code class="codeph">CDB_CONTAINER_DATA</code>数据字典视图。
                                 </p>
                                 <p>例如：</p><pre class="pre codeblock"><code>COLUMN USERNAME FORMAT A15 COLUMN DEFAULT_ATTR FORMAT A7 COLUMN所有者格式A15 COLUMN OBJECT_NAME格式A15列ALL_CONTAINERS格式A3 COLUMN CONTAINER_NAME格式A10列CON_ID格式A6选择USERNAME，DEFAULT_ATTR，所有者，OBJECT_NAME，ALL_CONTAINERS，CONTAINER_NAME，CON_ID来自CDB_CONTAINER_DATA订购OBJECT_NAME; USERNAME DEFAULT OWNER OBJECT_NAME所有收件人CON_ID --------------- ------- --------------- ------ --------- --- ---------- ------ C ## HR_ADMIN N SYS V $ SESSION N CDB $ ROOT 1 C ## HR_ADMIN N SYS V $ SESSION N SALESPDB 1 C ## HR_ADMIN YN HRPDB 1 C ## HR_ADMIN YN CDB $ ROOT 1 DBSNMP YY 1 SYSTEM YY 1</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="overview-of-the-multitenant-architecture.html#GUID-1A22B2C5-B302-450E-BB41-6CB6B1AE75B0" title="容器数据对象是包含与多个容器或整个CDB有关的数据的表或视图。">CDB中的容器数据对象</a></li>
                              <li><a href="../refrn/DBA_CONTAINER_DATA.html#REFRN-GUID-094B1D4B-F6BB-43CE-A1FC-3D6DA51CE1BA" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" title="普通用户可以在根目录中查看有关CONTAINER_DATA对象的信息，也可以查看特定PDB中的数据。">允许公共用户查看CONTAINER_DATA对象信息</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C" name="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C"></a><h5 id="MULTI-GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C" class="sect5"><span class="enumeration_section">18.1.7.2</span>启用普通用户查询特定PDB中的数据</h5>
                     <div>
                        <p>您可以通过调整用户的<code class="codeph">CONTAINER_DATA</code>属性，使普通用户能够访问与特定PDB相关的数据。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C__GUID-12E0B2F6-83BF-46B7-961B-06AFD757E71E">要使普通用户能够访问有关特定PDB的数据：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在根目录中发出<code class="codeph">ALTER USER</code>语句。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C__GUID-62CF107D-0766-4CF3-BABD-0DA884B6BE79">
                           <p class="titleinexample">示例18-2设置CONTAINER_DATA属性</p>
                           <p>此示例显示如何发出<code class="codeph">ALTER USER</code>语句以使公共用户<code class="codeph">c##hr_admin</code>能够在<code class="codeph">V$SESSION</code>视图中查看与<code class="codeph">CDB$ROOT</code> ， <code class="codeph">SALES_PDB</code>和<code class="codeph">HRPDB</code>容器相关的信息（假设此用户可以查询该视图）。
                           </p><pre class="pre codeblock"><code>连接系统输入密码： <span class="italic">密码</span>已连接。ALTER USER c ## hr_admin SET CONTAINER_DATA =（CDB $ ROOT，SALESPDB，HRPDB）FOR V $ SESSION CONTAINER = CURRENT;</code></pre><p>在本规范中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">SET CONTAINER_DATA</code>列出容器，用户可以访问的数据。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">FOR V$SESSION</code>指定<code class="codeph">CONTAINER_DATA</code>动态视图，普通用户<code class="codeph">c##hr_admin</code>将查询该视图。
                                 </p>
                              </li>
                              <li>
                                 <p>必须指定<code class="codeph">CONTAINER = CURRENT</code>因为当您连接到根时， <code class="codeph">CONTAINER=ALL</code>是<code class="codeph">ALTER USER</code>语句的缺省值，但<code class="codeph">CONTAINER_DATA</code>属性的修改必须限制为root。
                                 </p>
                              </li>
                           </ul>
                           <p>如果要启用用户<code class="codeph">c##hr_admin</code>以查看与此用户可以访问的所有<code class="codeph">CONTAINER_DATA</code>对象中的<code class="codeph">CDB$ROOT</code> ， <code class="codeph">SALES_PDB</code> ， <code class="codeph">HRPDB</code>容器相关的信息，则省略<code class="codeph">FOR V$SESSION</code> 。例如：</p><pre class="pre codeblock"><code>ALTER USER c ## hr_admin SET CONTAINER_DATA =（CDB $ ROOT，SALESPDB，HRPDB）CONTAINER = CURRENT;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../sqlrf/ALTER-USER.html#SQLRF-GUID-9FCD038D-8193-4241-85CD-2F4723B27D44" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" title="普通用户可以在根目录中查看有关CONTAINER_DATA对象的信息，也可以查看特定PDB中的数据。">允许公共用户查看CONTAINER_DATA对象信息</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-F87A4196-186D-4D31-83B4-E097325C3A29" name="GUID-F87A4196-186D-4D31-83B4-E097325C3A29"></a><h3 id="MULTI-GUID-F87A4196-186D-4D31-83B4-E097325C3A29" class="sect3"><span class="enumeration_section">18.2</span>管理常见角色和本地角色</h3>
               <div>
                  <p>常见角色是在根中创建的角色;在PDB中创建本地角色。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0">关于常见角色和本地角色</a><br><span>在多租户环境中，数据库角色可以特定于PDB，也可以在整个系统容器或应用程序容器中使用。</span> 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-1557398B-E8F0-4792-A8FA-3F805F198B47">常见角色的工作原理</a><br>公共角色在容器的根和每个PDB中都可见，在多个环境中定义它们。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9">PUBLIC角色如何在多租户环境中工作</a><br>Oracle授予<code class="codeph">PUBLIC</code>角色的所有权限都在本地授予。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-34E18048-D157-415D-AA7F-33C5AC315DC8">创建，修改或删除公共角色所需的权限</a><br><span>只有拥有通常授予的<code class="codeph">CREATE ROLE</code> ， <code class="codeph">ALTER ROLE</code>和<code class="codeph">DROP ROLE</code>权限的普通用户才能创建，更改或删除公共角色。</span> 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62">创建常见角色的规则</a><br>创建公共角色时，必须遵循特殊规则。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D">创建共同角色</a><br>您可以使用<code class="codeph">CREATE ROLE</code>语句创建公共角色。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5">创建本地角色的规则</a><br>要创建本地角色，您必须遵循特殊规则。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F">创建本地角色</a><br>您可以使用<code class="codeph">CREATE ROLE</code>语句来创建角色。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C">普通用户和本地用户的角色授予和撤销</a><br>角色授予和撤销仅适用于普通用户或本地用户的访问范围。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0" name="GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0"></a><h4 id="MULTI-GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0" class="sect4"><span class="enumeration_section">18.2.1</span>关于常见角色和本地角色</h4>
                  <div>
                     <p><span>在多租户环境中，数据库角色可以特定于PDB，也可以在整个系统容器或应用程序容器中使用。</span> 
                     </p>
                     <p>常见角色是一个角色，其身份和（可选）密码在容器的根目录中创建，并且将在根目录以及属于该容器的所有现有和将来的PDB中得知。</p>
                     <p>本地角色仅存在于一个PDB中，并且只能在此PDB中使用。它没有任何通常授予的权限。</p>
                     <p>请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>普通用户可以为其他公共和本地用户创建和授予公共角色。</p>
                        </li>
                        <li>
                           <p>您可以仅在本地向本地用户或角色授予角色（本地或公共）。</p>
                        </li>
                        <li>
                           <p>如果在本地授予公共角色，则该公共角色的权限仅适用于授予角色的容器。</p>
                        </li>
                        <li>
                           <p>本地用户无法创建公共角色，但可以将其授予普通用户和其他本地用户。</p>
                        </li>
                        <li>
                           <p>在CDB根目录或应用程序根目录中创建公共角色时， <code class="codeph">CONTAINER = ALL</code>子句是缺省值。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-A5B26A03-32CF-4F5D-A6BE-F2452AD8CB8A" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-1557398B-E8F0-4792-A8FA-3F805F198B47" name="GUID-1557398B-E8F0-4792-A8FA-3F805F198B47"></a><h4 id="MULTI-GUID-1557398B-E8F0-4792-A8FA-3F805F198B47" class="sect4"><span class="enumeration_section">18.2.2</span>常见角色的工作原理</h4>
                  <div>
                     <p>公共角色在容器的根和每个PDB中都可见，在多个环境中定义它们。</p>
                     <p>如果符合以下条件，则可以共同授予特权：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>设保人是普通用户。</p>
                        </li>
                        <li>
                           <p>设保人拥有通常授予的<code class="codeph">ADMIN OPTION</code>用于授予的权限。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GRANT</code>语句包含<code class="codeph">CONTAINER=ALL</code>子句。
                           </p>
                        </li>
                     </ul>
                     <p>如果公共角色包含本地授予的权限，则这些权限仅适用于授予公共角色的PDB。不能普遍授予本地角色。</p>
                     <p>例如，假设CDB普通用户<code class="codeph">c##hr_mgr</code>通常被授予<code class="codeph">DBA</code>角色。这意味着用户<code class="codeph">c##hr_mgr</code>可以在根目录和多租户环境中的每个PDB中使用与<code class="codeph">DBA</code>角色关联的权限。但是，如果CDB公共用户<code class="codeph">c##hr_mgr</code>仅在本地被授予<code class="codeph">hr_pdb</code> PDB的<code class="codeph">DBA</code>角色，则此用户只能在<code class="codeph">hr_pdb</code> PDB中使用<code class="codeph">DBA</code>角色的权限。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" name="GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9"></a><h4 id="MULTI-GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" class="sect4"><span class="enumeration_section">18.2.3</span> PUBLIC角色如何在多租户环境中工作</h4>
                  <div>
                     <p>Oracle授予<code class="codeph">PUBLIC</code>角色的所有权限都在本地授予。
                     </p>
                     <p>通过此功能，您可以根据需要撤消已在每个PDB中单独授予<code class="codeph">PUBLIC</code>角色的权限或角色。如果必须为<code class="codeph">PUBLIC</code>角色授予任何权限，则在本地授予它们。永远不要向<code class="codeph">PUBLIC</code>授予特权。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926" title="在多租户环境中，普通用户和本地用户都可以相互授予权限。">关于普遍和本地授予的特权</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-34E18048-D157-415D-AA7F-33C5AC315DC8" name="GUID-34E18048-D157-415D-AA7F-33C5AC315DC8"></a><h4 id="MULTI-GUID-34E18048-D157-415D-AA7F-33C5AC315DC8" class="sect4"><span class="enumeration_section">18.2.4</span>创建，修改或删除公共角色所需的权限</h4>
                  <div>
                     <p><span>只有拥有通常授予的<code class="codeph">CREATE ROLE</code> ， <code class="codeph">ALTER ROLE</code>和<code class="codeph">DROP ROLE</code>权限的普通用户才能创建，更改或删除公共角色。</span> 
                     </p>
                     <p>普通用户也可以创建本地角色，但这些角色仅在创建它们的PDB中可用。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62" name="GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62"></a><h4 id="MULTI-GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62" class="sect4"><span class="enumeration_section">18.2.5</span>创建常见角色的规则</h4>
                  <div>
                     <p>创建公共角色时，必须遵循特殊规则。</p>
                     <p>规则如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">确保您使用正确的root。</span> 要创建公共角色，您必须位于正确的根目录中，即CDB根目录或应用程序根目录。您无法从PDB创建公共角色。要检查您是否在正确的根目录中，请运行以下某个选项：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要确认您是否在CDB根目录中，可以发出<code class="codeph">show_con_name</code>命令。输出应为<code class="codeph">CDB$ROOT</code> 。</p>
                              </li>
                              <li>
                                 <p>要确认您是否位于应用程序根目录中，请验证以下查询是否返回<code class="codeph">YES</code> ：</p><pre class="pre codeblock"><code>从V $ PDBS中选择APPLICATION_ROOT WHERE CON_ID = SYS_CONTEXT（'USERENV'，'CON_ID'）;</code></pre></li>
                              <li>
                                 <p><span class="bold">确保您为common角色指定的名称以COMMON_USER_PREFIX参数（默认为C ##）的值开头。</span> 请注意，此要求不适用于现有Oracle提供的角色的名称，例如<code class="codeph">DBA</code>或<code class="codeph">RESOURCE</code> 。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><span class="bold">（可选）将CONTAINER子句设置为ALL。</span>只要您在根目录中，如果省略<code class="codeph">CONTAINER = ALL</code>子句，则默认情况下将角色创建为CDB根目录或应用程序根目录的公共角色。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D" name="GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D"></a><h4 id="MULTI-GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D" class="sect4"><span class="enumeration_section">18.2.6</span>创建共同角色</h4>
                  <div>
                     <p>您可以使用<code class="codeph">CREATE ROLE</code>语句创建公共角色。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>连接到CDB的根目录或要在其中创建公共角色的应用程序容器。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>连接系统输入密码： <span class="italic">密码</span>已连接。
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">CREATE ROLE</code>语句，并将<code class="codeph">CONTAINER</code>子句设置为<code class="codeph">ALL</code> 。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CREATE ROLE c ## sec_admin IDENTIFIED BY <span class="italic">密码</span> CONTAINER = ALL;</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-B8165502-1075-4B7D-9892-2D1EDE2ECB82" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5" name="GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5"></a><h4 id="MULTI-GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5" class="sect4"><span class="enumeration_section">18.2.7</span>创建本地角色的规则</h4>
                  <div>
                     <p>要创建本地角色，您必须遵循特殊规则。</p>
                     <p>这些规则如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您必须连接到要在其中创建角色的PDB，并具有<code class="codeph">CREATE ROLE</code>权限。
                           </p>
                        </li>
                        <li>
                           <p>您为本地角色指定的名称不得以<code class="codeph">COMMON_USER_PREFIX</code>参数（默认为<code class="codeph">C##</code> ）的值<code class="codeph">COMMON_USER_PREFIX</code> 。
                           </p>
                        </li>
                        <li>
                           <p>您可以在<code class="codeph">CREATE ROLE</code>语句中包含<code class="codeph">CONTAINER=CURRENT</code> ，以将角色指定为本地角色。如果您连接到PDB并省略此子句，则隐含<code class="codeph">CONTAINER=CURRENT</code>子句。
                           </p>
                        </li>
                        <li>
                           <p>您不能拥有具有相同名称的公共角色和本地角色。但是，您可以在不同的PDB中为本地角色使用相同的名称。要查找现有角色的名称，请查询<code class="codeph">CDB_ROLES</code>和<code class="codeph">DBA_ROLES</code>数据字典视图。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F" name="GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F"></a><h4 id="MULTI-GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F" class="sect4"><span class="enumeration_section">18.2.8</span>创建本地角色</h4>
                  <div>
                     <p>您可以使用<code class="codeph">CREATE ROLE</code>语句来创建角色。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>连接到要在其中创建本地角色的PDB。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT SYSTEM @ hrpdb输入密码： <span class="italic">密码</span>已连接。
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">CREATE ROLE</code>语句，并将<code class="codeph">CONTAINER</code>子句设置为<code class="codeph">CURRENT</code> 。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>创建角色sec_admin CONTAINER = CURRENT;</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-B8165502-1075-4B7D-9892-2D1EDE2ECB82" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C" name="GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C"></a><h4 id="MULTI-GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C" class="sect4"><span class="enumeration_section">18.2.9</span>普通用户和本地用户的角色授予和撤销</h4>
                  <div>
                     <p>角色授予和撤销仅适用于普通用户或本地用户的访问范围。</p>
                     <p>普通用户可以向其他普通用户授予和撤消常用角色。本地用户可以向PDB中的任何用户授予共同角色，包括普通用户，但此授权仅适用于PDB。</p>
                     <p>以下示例说明如何向公共用户<code class="codeph">c##sec_admin</code>授予<code class="codeph">AUDIT_ADMIN</code>公共角色以供在所有容器中使用。
                     </p><pre class="pre codeblock"><code>连接系统输入密码： <span class="italic">密码</span>已连接。GRANT AUDIT_ADMIN到c ## sec_admin CONTAINER = ALL;</code></pre><p>同样，下一个示例显示了本地用户<code class="codeph">aud_admin</code>如何向公共用户<code class="codeph">c##sec_admin</code>授予在<code class="codeph">hrpdb</code> PDB中使用的<code class="codeph">AUDIT_ADMIN</code>公共角色。</p><pre class="pre codeblock"><code>CONNECT aud_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。GRANT AUDIT_ADMIN到c ## sec_admin CONTAINER = CURRENT;</code></pre><p>此示例显示本地用户<code class="codeph">aud_admin</code>如何从PDB中的其他用户撤消角色。如果省略<code class="codeph">CONTAINER</code>子句，则隐含<code class="codeph">CURRENT</code> 。
                     </p><pre class="pre codeblock"><code>CONNECT aud_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。REVOKE sec_admin FROM psmith CONTAINER = CURRENT;</code></pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" name="GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275"></a><h3 id="MULTI-GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" class="sect3"><span class="enumeration_section">18.3</span>使用PDB锁定配置文件限制PDB上的操作</h3>
               <div>
                  <p>您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1">关于PDB锁定配置文件</a><br>PDB锁定配置文件是一组控制一组操作的命名功能。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D">默认PDB锁定配置文件</a><br>Oracle数据库提供了一组默认的PDB锁定配置文件，您可以根据站点要求进行自定义。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70">创建PDB锁定配置文件</a><br>要创建PDB锁定配置文件，您必须具有<code class="codeph">CREATE LOCKDOWN PROFILE</code>系统特权。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F">启用或禁用PDB锁定配置文件</a><br>要启用或禁用PDB锁定配置文件，请使用<code class="codeph">PDB_LOCKDOWN</code>初始化参数</li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B">删除PDB锁定配置文件</a><br>要删除PDB锁定配置文件，您必须具有<code class="codeph">DROP LOCKDOWN PROFILE</code>系统特权并登录到CDB或应用程序根目录。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1" name="GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1"></a><h4 id="MULTI-GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1" class="sect4"><span class="enumeration_section">18.3.1</span>关于PDB锁定配置文件</h4>
                  <div>
                     <p>PDB锁定配置文件是一组控制一组操作的命名功能。</p>
                     <p>在某些情况下，您可以单独启用或禁用操作。例如，PDB锁定配置文件可以包含禁用<code class="codeph">ALTER SYSTEM</code>语句随附的特定子句的设置。
                     </p>
                     <p>PDB锁定配置文件限制用户访问所提供功能的功能，类似于为用户定义的资源限制。顾名思义，您可以在CDB，应用程序容器或PDB或应用程序PDB中使用PDB锁定配置文件。您可以创建自定义配置文件以满足您网站的要求。PDB配置文件使您可以为应用程序定义自定义安全策略。此外，您还可以创建基于另一个配置文件的锁定配置文件，称为<strong class="term">基本配置文件</strong> 。您可以将此配置文件配置为在修改基本配置文件时动态更新，或者在更新基本配置文件时将其配置为静态（不变）。锁定配置文件专为Oracle云和内部部署环境而设计。
                     </p>
                     <p>在PDB之间共享身份时，可能存在提升的权限。您可以使用锁定配置文件来防止此特权提升。在以下情况下可以共享身份：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在操作系统级别，当数据库与操作系统资源（如文件或进程）交互时</p>
                        </li>
                        <li>
                           <p>在网络级别，当数据库与其他系统通信时，网络身份很重要</p>
                        </li>
                        <li>
                           <p>在数据库内部，PDB访问或创建公共对象，或者使用数据库链接等功能跨容器边界进行通信</p>
                        </li>
                     </ul>
                     <p>使用共享标识并从PDB锁定配置文件中受益的功能分为以下几类：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">网络访问功能。</span> 这些是使用网络在PDB外部进行通信的操作。例如，PL / SQL包<code class="codeph">UTL_TCP</code> ， <code class="codeph">UTL_HTTP</code> ， <code class="codeph">UTL_MAIL</code> ， <code class="codeph">UTL_SNMP</code> ， <code class="codeph">UTL_INADDR</code>和<code class="codeph">DBMS_DEBUG_JDWP</code>执行这些操作。目前，ACL用于控制这种访问以共享网络身份。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">普通用户或对象访问。</span> 这些操作是PDB中的本地用户可以通过公共用户帐户代理或访问公共模式中的对象的操作。这些类型的操作包括在公共模式中添加或替换对象，为公共对象授予权限，访问公共目录对象，向普通用户授予<code class="codeph">INHERIT PRIVILEGES</code>角色，以及操纵用户代理到普通用户。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">操作系统访问。</span> 例如，您可以限制对<code class="codeph">UTL_FILE</code>或<code class="codeph">DBMS_FILE_TRANSFER</code> PL / SQL包的访问。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">连接。</span> 例如，您可以限制普通用户连接到PDB，或者可以限制具有<code class="codeph">SYSOPER</code>管理权限的本地用户连接到以受限模式打开的PDB。
                           </p>
                        </li>
                     </ul>
                     <p>创建PDB锁定配置文件的一般过程是首先使用<code class="codeph">CREATE LOCKDOWN PROFILE</code>语句在CDB根目录或应用程序根目录中创建它，然后使用<code class="codeph">ALTER LOCKDOWN PROFILE</code>语句添加限制。
                     </p>
                     <p>要启用PDB锁定配置文件，可以使用<code class="codeph">ALTER SYSTEM</code>语句设置<code class="codeph">PDB_LOCKDOWN</code>参数。您可以通过连接到CDB或应用程序根目录并查询<code class="codeph">DBA_LOCKDOWN_PROFILES</code>数据字典视图来查找有关现有PDB锁定配置文件的信息。本地用户可以通过查询<code class="codeph">V$LOCKDOWN_RULES</code>动态数据字典视图来查找PDB锁定参数的内容。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。">使用PDB锁定配置文件限制PDB上的操作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D" name="GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D"></a><h4 id="MULTI-GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D" class="sect4"><span class="enumeration_section">18.3.2</span>默认PDB锁定配置文件</h4>
                  <div>
                     <p>Oracle数据库提供了一组默认的PDB锁定配置文件，您可以根据站点要求进行自定义。</p>
                     <p>默认情况下，大多数这些配置文件都是空的。它们旨在作为占位符或模板供您配置，具体取决于您的部署要求。</p>
                     <p>有关这些配置文件的详细信息如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">PRIVATE_DBAAS</code>包含适用于私有云数据库即服务（DBaaS）部署的限制。这些限制是：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>每个PDB必须具有相同的数据库管理员</p>
                              </li>
                              <li>
                                 <p>允许不同的用户连接到数据库</p>
                              </li>
                              <li>
                                 <p>允许不同的应用</p>
                              </li>
                           </ul>
                           <p><code class="codeph">PRIVATE_DBAAS</code>允许用户连接到PDB，但阻止他们使用Oracle数据库管理功能。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SAAS</code>包含适用于软件即服务（SaaS）部署的限制。这些限制是：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>每个PDB必须具有相同的数据库管理员</p>
                              </li>
                              <li>
                                 <p>允许不同的用户连接到数据库</p>
                              </li>
                              <li>
                                 <p>必须使用相同的应用程序</p>
                              </li>
                           </ul>
                           <p><code class="codeph">SAAS</code>锁定配置文件比<code class="codeph">PRIVATE_DBAAS</code>配置文件更具限制性。用户可以不同，但应用程序代码是相同的;用户无法直接连接，只能通过应用程序连接;并且不授予用户执行任何管理功能的权限。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">PUBLIC_DBAAS</code>包含适用于公共云数据库即服务（DBaaS）部署的限制。限制如下：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>每个PDB中有不同的DBA</p>
                              </li>
                              <li>
                                 <p>不同的用户</p>
                              </li>
                              <li>
                                 <p>不同的应用</p>
                              </li>
                           </ul>
                           <p><code class="codeph">PUBLIC_DBAAS</code>锁定配置文件是锁定配置文件中限制最严格的配置文件。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。">使用PDB锁定配置文件限制PDB上的操作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70" name="GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70"></a><h4 id="MULTI-GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70" class="sect4"><span class="enumeration_section">18.3.3</span>创建PDB锁定配置文件</h4>
                  <div>
                     <p>要创建PDB锁定配置文件，您必须具有<code class="codeph">CREATE LOCKDOWN PROFILE</code>系统特权。
                     </p>
                     <div class="section">创建锁定配置文件后，您可以在启用它之前添加限制。</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以具有<code class="codeph">CREATE LOCKDOWN PROFILE</code>系统特权的用户身份连接到CDB根目录或应用程序根目录。</span><div>例如，要连接到CDB根目录：<pre class="pre codeblock"><code>CONNECT c ## sec_admin输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">CREATE LOCKDOWN PROFILE</code>语句以使用以下语法创建概要文件：</span><div><pre class="pre codeblock"><code>CREATE LOCKDOWN PROFILE <span class="italic">profile_name</span> [FROM <span class="italic">static_base_profile</span> |包含<span class="italic">dynamic_base_profile</span> ];</code></pre><p>在本规范中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">profile_name</span></code>是您为锁定配置文件指定的名称。您可以通过查询<code class="codeph">DBA_LOCKDOWN_PROFILES</code>数据字典视图的<code class="codeph">PROFILE_NAMES</code>列来查找现有名称。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">FROM <span class="codeinlineitalic">static_base_profile</span></code>使用现有概要文件中的值创建新的锁定概要文件。对基本配置文件的任何后续更改都不会影响新配置文件。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">INCLUDING <span class="codeinlineitalic">dynamic_base_profile</span></code>还使用现有基本配置文件中的值创建新的锁定配置文件，但新的锁定配置文件将继承构成基本配置文件的<code class="codeph">DISABLE STATEMENT</code>规则，以及对基本配置文件的任何后续更改。如果显式添加到新配置文件的规则与基本配置文件中的规则冲突，则基本配置文件中的规则优先。例如， <code class="codeph">OPTION_VALUE</code>在基本轮廓子句优先于<code class="codeph">OPTION_VALUE</code>在新的配置文件子句。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div>以下两个PDB锁定配置文件语句演示了继承的工作原理：<pre class="pre codeblock"><code>CREATE LOCKDOWN PROFILE hr_prof包括PRIVATE_DBAAS; CREATE LOCKDOWN PROFILE hr_prof2 FROM hr_prof;</code></pre><p>在第一个语句中， <code class="codeph">hr_prof</code>继承对<code class="codeph">PRIVATE_DBAAS</code>基本概要文件所做的任何更改。如果为<code class="codeph">PRIVATE_DBAAS</code>启用了新语句，则会为<code class="codeph">hr_prof</code>启用该<code class="codeph">hr_prof</code> 。在第二份声明中，相反，当<code class="codeph">hr_prof</code>更改，然后<code class="codeph">hr_prof2</code> <span class="italic">不会</span>改变，因为它是独立于基础轮廓。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">ALTER LOCKDOWN PROFILE</code>语句以提供对配置文件的限制。</span><div>例如：<pre class="pre codeblock"><code>ALTER LOCKDOWN PROFILE hr_prof DISABLE STATEMENT =（'ALTER SYSTEM'）; ALTER LOCKDOWN PROFILE hr_prof ENABLE STATEMENT =（'ALTER SYSTEM'）clause =（'flush shared_pool'）; ALTER LOCKDOWN PROFILE hr_prof DISABLE FEATURE =（'XDB_PROTOCOLS'）;</code></pre><p>在前面的示例中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">DISABLE STATEMENT = ('ALTER SYSTEM')</code>禁用PDB的所有<code class="codeph">ALTER SYSTEM</code>语句。</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ENABLE STATEMENT = ('ALTER SYSTEM') clause = ('flush shared_pool')</code>只允许对<code class="codeph">ALTER SYSTEM</code>使用<code class="codeph">FLUSH_SHARED_POOL</code>子句。</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DISABLE FEATURE = ('XDB_PROTOCOLS')</code>禁止此PDB使用XDB协议（FTP，HTTP，HTTPS）</p>
                                 </li>
                              </ul>
                           </div>
                           <div>创建PDB锁定配置文件后，您可以使用<code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code> SQL语句启用它。
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。">使用PDB锁定配置文件限制PDB上的操作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F" name="GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F"></a><h4 id="MULTI-GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F" class="sect4"><span class="enumeration_section">18.3.4</span>启用或禁用PDB锁定配置文件</h4>
                  <div>
                     <p>要启用或禁用PDB锁定配置文件，请使用<code class="codeph">PDB_LOCKDOWN</code>初始化参数</p>
                     <div class="section">
                        <p>您可以使用<code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code>在以下任何上下文中启用锁定配置文件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>CDB（影响所有PDB）</p>
                           </li>
                           <li>
                              <p>应用程序根目录（影响容器中的所有应用程序PDB）</p>
                           </li>
                           <li>
                              <p>应用程序PDB</p>
                           </li>
                           <li>
                              <p>PDB</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F__GUID-483F47A9-11D8-4AA5-9B14-A98F2D379C69">
                           <p class="notep1">注意：</p>
                           <p>无需重新启动实例即可启用配置文件。<code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code>语句完成后，配置文件规则立即生效。
                           </p>
                        </div>
                        <p>在CDB根目录中设置<code class="codeph">PDB_LOCKDOWN</code> ，除非在容器级别设置<code class="codeph">PDB_LOCKDOWN</code>否则每个PDB和应用程序根都会继承此设置。要禁用锁定配置文件，请将<code class="codeph">PDB_LOCKDOWN</code>设置为null。如果在CDB根目录中将此参数设置为null，则除了在PDB中明确设置配置文件的PDB之外，将禁用所有PDB的锁定配置文件。</p>
                        <p>通常被授予<code class="codeph">SYSDBA</code>管理权限或<code class="codeph">ALTER SYSTEM</code>系统特权的CDB普通用户只能将<code class="codeph">PDB_LOCKDOWN</code>设置为在CDB根目录中创建的锁定配置文件。具有应用程序通用<code class="codeph">SYSDBA</code>管理权限或<code class="codeph">ALTER SYSTEM</code>系统权限的应用程序通用用户只能将<code class="codeph">PDB_LOCKDOWN</code>设置为在应用程序根目录中创建的锁定配置文件。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以具有通常授予的<code class="codeph">ALTER SYSTEM</code>或通常授予<code class="codeph">SYSDBA</code>权限的用户身份登录到所需的容器。</span><div>例如，要为所有PDB启用配置文件，请登录CDB根目录：<pre class="pre codeblock"><code>CONNECT c ## sec_admin输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code>语句。</span><div>例如，以下语句为所有PDB启用名为<code class="codeph">hr_prof</code>的锁定配置文件：<pre class="pre codeblock"><code>ALTER SYSTEM SET PDB_LOCKDOWN = hr_prof;</code></pre></div>
                           <div>以下语句重置<code class="codeph">PDB_LOCKDOWN</code>参数：<pre class="pre codeblock"><code>ALTER SYSTEM RESET PDB_LOCKDOWN;</code></pre></div>
                           <div>前面语句的这种变体包括<code class="codeph">SCOPE</code>子句::<pre class="pre codeblock"><code>ALTER SYSTEM RESET PDB_LOCKDOWN SCOPE = BOTH;</code></pre></div>
                           <div>以下语句禁用CDB中的所有锁定配置文件，但在PDB级别显式设置的配置文件除外：<pre class="pre codeblock"><code>ALTER SYSTEM SET PDB_LOCKDOWN =''SCOPE = BOTH;</code></pre></div>
                           <div>要查找PDB锁定配置文件的名称，请查询<code class="codeph">DBA_LOCKDOWN_PROFILES</code>数据字典视图的<code class="codeph">PROFILE_NAME</code>列。
                           </div>
                        </li>
                        <li class="stepexpand"><span>（可选）通过查询<code class="codeph">DBA_LOCKDOWN_PROFILES</code>查看有关配置文件的信息。</span><div>例如，运行以下查询：<pre class="pre codeblock"><code>SET LINESIZE 150 COL PROFILE_NAME FORMAT a20 COL RULE FORMAT a20 COL CLAUSE FORMAT a25 SELECT PROFILE_NAME，RULE，CLAUSE，STATUS from CDB_LOCKDOWN_PROFILES;</code></pre></div>
                           <div>
                              <p>示例输出显示如下：</p><pre class="pre codeblock"><code>PROFILE_NAME RULE CLAUSE STATUS -------------------- -------------------- ------ ------------------- ------- HR_PROF XDB_PROTOCOLS DISABLE HR_PROF ALTER SYSTEM DISABLE HR_PROF ALTER SYSTEM FLUSH SHARED_POOL ENABLE HR_PROF2 EMPTY PRIVATE_DBAAS EMPTY PUBLIC_DBAAS EMPTY SAMP EMPTY</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。">使用PDB锁定配置文件限制PDB上的操作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B" name="GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B"></a><h4 id="MULTI-GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B" class="sect4"><span class="enumeration_section">18.3.5</span>删除PDB锁定配置文件</h4>
                  <div>
                     <p>要删除PDB锁定配置文件，您必须具有<code class="codeph">DROP LOCKDOWN PROFILE</code>系统特权并登录到CDB或应用程序根目录。
                     </p>
                     <div class="section">您可以通过查询<code class="codeph">DBA_LOCKDOWN_PROFILES</code>数据字典视图找到现有PDB锁定配置文件的名称。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以具有<code class="codeph">DROP LOCKDOWN PROFILE</code>系统特权的用户身份连接到CDB根目录或应用程序根目录。</span><div>例如，要连接到CDB根目录：<pre class="pre codeblock"><code>CONNECT c ## sec_admin输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">DROP LOCKDOWN_PROFILE</code>语句。</span><div>例如：<pre class="oac_no_warn" dir="ltr">DROP LOCKDOWN PROFILE hr_prof2;</pre></div>
                        </li>
                        <li class="stepexpand"><span>（可选）通过查询<code class="codeph">DBA_LOCKDOWN_PROFILES</code>查看当前的配置文件列表。</span><div>例如，运行以下查询：<pre class="pre codeblock"><code>SET LINESIZE 150 COL PROFILE_NAME FORMAT a20 COL RULE FORMAT a20 COL CLAUSE FORMAT a25 SELECT PROFILE_NAME，RULE，CLAUSE，STATUS from CDB_LOCKDOWN_PROFILES;</code></pre></div>
                           <div>
                              <p>示例输出显示如下：</p><pre class="pre codeblock"><code>PROFILE_NAME RULE CLAUSE STATUS -------------------- -------------------- ------ ------------------- ------- HR_PROF XDB_PROTOCOLS DISABLE HR_PROF ALTER SYSTEM DISABLE HR_PROF ALTER SYSTEM FLUSH SHARED_POOL启用PRIVATE_DBAAS EMPTY PUBLIC_DBAAS EMPTY SAMP EMPTY</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。">使用PDB锁定配置文件限制PDB上的操作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" name="GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459"></a><h3 id="MULTI-GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" class="sect3"><span class="enumeration_section">18.4</span>为PDB配置操作系统用户</h3>
               <div>
                  <p><code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code>过程将用户帐户配置为PDB的操作系统用户。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-79F8BC77-3B74-4A29-9C97-6337917F1652">关于为PDB配置操作系统用户</a><br>相反， <code class="codeph">oracle</code>操作系统用户可以将特定用户帐户设置为该PDB的操作系统用户。</li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B">为PDB配置操作系统用户</a><br><code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code>过程可以为PDB设置操作系统用户。</li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D">在PDB中设置默认凭据</a><br>您可以为指定的PDB设置数据库属性<code class="codeph">DEFAULT_CREDENTIAL</code> 。</li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-79F8BC77-3B74-4A29-9C97-6337917F1652" name="GUID-79F8BC77-3B74-4A29-9C97-6337917F1652"></a><h4 id="MULTI-GUID-79F8BC77-3B74-4A29-9C97-6337917F1652" class="sect4"><span class="enumeration_section">18.4.1</span>关于为PDB配置操作系统用户</h4>
                  <div>
                     <p>相反， <code class="codeph">oracle</code>操作系统用户可以将特定用户帐户设置为该PDB的操作系统用户。</p>
                     <p>如果未将特定用户设置为PDB的操作系统用户，则默认情况下PDB使用<code class="codeph">oracle</code>操作系统用户。对于root，您必须在必须与操作系统交互时使用<code class="codeph">oracle</code>操作系统用户。
                     </p>
                     <p>为了提高安全性，Oracle建议您在多租户环境中为每个PDB设置唯一的操作系统用户。这样做有助于确保操作系统交互作为功能不如<code class="codeph">oracle</code>操作系统用户的用户执行，并有助于保护属于一个PDB的数据不被连接到其他PDB的用户访问。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" title="DBMS_CREDENTIAL.CREATE_CREDENTIAL过程将用户帐户配置为PDB的操作系统用户。">为PDB配置操作系统用户</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B" name="GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B"></a><h4 id="MULTI-GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B" class="sect4"><span class="enumeration_section">18.4.2</span>配置PDB的操作系统用户</h4>
                  <div>
                     <p><code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code>过程可以为PDB设置操作系统用户。</p>
                     <ol>
                        <li class="stepexpand"><span>以具有<code class="codeph">DBMS_CREDENTIAL</code> PL / SQL程序包的<code class="codeph">EXECUTE</code>特权和<code class="codeph">ALTER SYSTEM</code>系统特权的用户身份登录到数据库实例根目录。</span><div>例如：<pre class="pre codeblock"><code>sqlplus c ## sec_admin输入密码： <span class="italic">密码</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code>过程以为操作系统用户创建Oracle凭据。</span><div>例如，要为名为<code class="codeph">os_admin</code>的用户设置凭据：<pre class="pre codeblock"><code>BEGIN DBMS_CREDENTIAL.CREATE_CREDENTIAL（credential_name =&gt;'PDB1_OS_USER'，username =&gt;'os_admin'，password =&gt;' <span class="italic">password</span> '）;结束; /</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>连接到将使用操作系统用户的PDB。</span><div>例如：<pre class="pre codeblock"><code>CONNECT cc ## sec_admin @hrpdb输入密码： <span class="italic">密码</span>
</code></pre><p>要查找可用的PDB，请运行<code class="codeph">show pdbs</code>命令。要检查当前PDB，请运行show <code class="codeph">con_name</code>命令。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>为在步骤2中设置了凭据的用户设置<code class="codeph">PDB_OS_CREDENTIAL</code>初始化参数。</span><div>例如：<pre class="pre codeblock"><code>ALTER SYSTEM SET PDB_OS_CREDENTIAL = PDB1_OS_USER SCOPE = SPFILE;</code></pre><p><code class="codeph">PDB_OS_CREDENTIAL</code>参数是静态参数，因此必须使用<code class="codeph">SCOPE = SPFILE</code>子句对其进行设置。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>重新启动数据库实例。</span><div><pre class="pre codeblock"><code>关机立即启动</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-authentication.html#DBSEG-GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                           <li><a href="../refrn/PDB_OS_CREDENTIAL.html#REFRN-GUID-E563FDDA-6840-42CC-944D-5B0FD60C9003" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></li>
                           <li><a href="../arpls/DBMS_CREDENTIAL.html#ARPLS-GUID-D5791B72-E0F6-4C41-AD3E-DDEDFFCA7D0C" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></li>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D" title="您可以为指定的PDB设置数据库属性DEFAULT_CREDENTIAL。">在PDB中设置默认凭据</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" title="DBMS_CREDENTIAL.CREATE_CREDENTIAL过程将用户帐户配置为PDB的操作系统用户。">为PDB配置操作系统用户</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D" name="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D"></a><h4 id="MULTI-GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D" class="sect4"><span class="enumeration_section">18.4.3</span>在PDB中设置默认凭据</h4>
                  <div>
                     <p>您可以为指定的PDB设置数据库属性<code class="codeph">DEFAULT_CREDENTIAL</code> 。</p>
                     <div class="section">
                        <p>将文件从对象库导入PDB时，默认凭据非常有用。如果在使用<code class="codeph">impdp</code>时未指定凭据名称，则Oracle Data Pump和对象存储模块可以使用<code class="codeph">DEFAULT_CREDENTIAL</code>对象来检索用户名和密码。在未指定凭证的情况下运行<code class="codeph">impdp</code> ，必须在转储文件名前加<code class="codeph">DEFAULT_CREDENTIAL:</code> .
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D__GUID-C96AC8C8-4190-4540-84CF-5361EE8D35CE">要设置默认凭据：</p>
                        <ol>
                           <li>
                              <p>使用管理员权限登录PDB。</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">ALTER DATABASE</code>语句设置默认凭据。
                              </p>
                              <p>例如，输入以下语句将凭据设置为<code class="codeph">SYSTEM.HR_CRED</code> 。</p><pre class="pre codeblock"><code>ALTER DATABASE PROPERTY SET DEFAULT_CREDENTIAL ='SYSTEM.HR_CRED';</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D__GUID-A5DA945E-7F7D-46C8-BFB4-BA6F5E28C352">
                        <p class="titleinexample">示例18-3使用默认凭据将数据导入PDB</p>
                        <p>此示例假定存在默认凭据。以下命令从对象库中导入数据，并使用字符串<code class="codeph">DEFAULT_CREDENTIAL</code>为URL添加前缀：</p><pre class="pre codeblock"><code>impdp hr @ pdb1 table_exists_action = replace dumpfile = DEFAULT_CREDENTIAL：https：//example.com/ostore/obucket/myt.dmp</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D__GUID-E6FE01B3-80DA-4A0F-9740-A6B1EA71089B">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="using-database-utilities-in-a-cdb.html#GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71" title="创建空PDB后，可以使用Oracle Data Pump全模式导出和导入操作将数据移动到PDB中。">使用数据泵将数据移入CDB</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../sutil/datapump-import-utility.html#GUID-D11E340E-14C6-43B8-AB09-6335F0C1F71B" target="_blank"><span><cite>Oracle数据库实用程序</cite></span></a> ，了解数据泵导入</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" title="DBMS_CREDENTIAL.CREATE_CREDENTIAL过程将用户帐户配置为PDB的操作系统用户。">为PDB配置操作系统用户</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" name="GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE"></a><h3 id="MULTI-GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" class="sect3"><span class="enumeration_section">18.5</span>在多租户环境中使用应用程序上下文</h3>
               <p>应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-5841261E-988F-4A56-A2B4-71114AB3D51D">什么是应用程序上下文？</a><br><strong class="term">应用程序上下文</strong>是Oracle数据库存储在内存中的一组名称 - 值对。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-60DBA142-691E-4710-B8F2-2522E5B37745">多租户环境中的应用程序上下文</a><br>在多租户环境中创建应用程序的位置确定您必须在何处创建应用程序上下文。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-5841261E-988F-4A56-A2B4-71114AB3D51D" name="GUID-5841261E-988F-4A56-A2B4-71114AB3D51D"></a><h4 id="MULTI-GUID-5841261E-988F-4A56-A2B4-71114AB3D51D" class="sect4"><span class="enumeration_section">18.5.1</span>什么是应用程序上下文？
                  </h4>
                  <div>
                     <p><strong class="term">应用程序上下文</strong>是Oracle数据库存储在内存中的一组名称 - 值对。
                     </p>
                     <p>上下文有一个名为<strong class="term">命名空间</strong>的标签（例如， <code class="codeph">empno_ctx</code>用于检索员工ID的应用程序上下文）。此上下文使Oracle数据库能够在身份验证期间查找有关数据库和非数据库用户的信息。
                     </p>
                     <p>在上下文中是名称 - 值对（关联数组）：名称指向内存中保存值的位置。应用程序可以使用应用程序上下文来访问有关用户的会话信息，例如用户ID或其他用户特定信息或客户端ID，然后将此数据安全地传递到数据库。</p>
                     <p>然后，您可以使用此信息来允许或阻止用户通过应用程序访问数据。您可以使用应用程序上下文对数据库和非数据库用户进行身份验证。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/using-application-contexts-to-retrieve-user-information.html#DBSEG-GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" title="应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。">在多租户环境中使用应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-60DBA142-691E-4710-B8F2-2522E5B37745" name="GUID-60DBA142-691E-4710-B8F2-2522E5B37745"></a><h4 id="MULTI-GUID-60DBA142-691E-4710-B8F2-2522E5B37745" class="sect4"><span class="enumeration_section">18.5.2</span>多租户环境中的应用程序上下文</h4>
                  <div>
                     <p>在多租户环境中创建应用程序的位置确定您必须在何处创建应用程序上下文。</p>
                     <p>如果应用程序安装在应用程序根目录或CDB根目录中，则可以跨应用程序容器或系统容器以及关联的应用程序PDB访问该应用程序。您需要在此根目录中创建一个公共应用程序上下文。</p>
                     <p>创建用于应用程序容器的公共应用程序上下文时，请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您可以通过在<code class="codeph">CREATE CONTEXT</code> SQL语句中设置<code class="codeph">CONTAINER</code>子句来在多租户环境中创建应用程序上下文。例如，要在应用程序根目录中创建公共应用程序上下文，必须执行<code class="codeph">CREATE CONTEXT</code>并将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code> 。要在PDB中创建应用程序上下文，请将<code class="codeph">CONTAINER</code>设置为<code class="codeph">CURRENT</code> 。</p>
                        </li>
                        <li>
                           <p>对于公共应用程序上下文，您不能对本地应用程序上下文使用相同的名称。您可以通过运行以下查询来查找现有应用程序上下文的名称：</p><pre class="pre codeblock"><code>SELECT OBJECT_NAME FROM DBA_OBJECTS WHERE OBJECT_TYPE ='CONTEXT';</code></pre></li>
                        <li>
                           <p>您为管理公共应用程序上下文而创建的PL / SQL包必须是常见的PL / SQL包。也就是说，它必须存在于应用程序根目录或CDB根目录中。如果为特定PDB创建应用程序上下文，则必须将关联的PL / SQL程序包存储在该PDB中。</p>
                        </li>
                        <li>
                           <p>当普通用户访问不同的容器时，无法从其他应用程序容器或系统容器访问您在应用程序容器或公共应用程序上下文的系统容器下在公共会话应用程序上下文中设置的名称 - 值对。</p>
                        </li>
                        <li>
                           <p>您在应用程序容器或系统容器的公共全局应用程序上下文中设置的名称 - 值对只能在同一用户会话中的同一容器中访问。</p>
                        </li>
                        <li>
                           <p>应用程序可以检索应用程序上下文的值，无论它是驻留在应用程序根目录，CDB根目录还是PDB中。</p>
                        </li>
                        <li>
                           <p>在PDB到CDB或应用程序容器的插件操作期间，如果公共应用程序上下文的名称与PDB的本地应用程序上下文冲突，则PDB必须以受限模式打开。然后，数据库管理员需要在正常模式下打开PDB之前纠正冲突。</p>
                        </li>
                        <li>
                           <p>在拔出操作期间，公共应用程序上下文保留其通用语义，以便稍后，如果将PDB插入另一个存在具有相同名称的公共应用程序上下文的CDB，则它将继续像公共对象一样运行。如果将PDB插入应用程序容器或系统容器（其中不存在相同的公共应用程序上下文），则其行为类似于本地对象。</p>
                        </li>
                     </ul>
                     <p>要查找应用程序上下文是本地应用程序上下文还是应用程序公共应用程序上下文，请查询<code class="codeph">DBA_CONTEXT</code>或<code class="codeph">ALL_CONTEXT</code>数据字典视图的<code class="codeph">SCOPE</code>列。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/using-application-contexts-to-retrieve-user-information.html#DBSEG-GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" title="应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。">在多租户环境中使用应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" name="GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22"></a><h3 id="MULTI-GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" class="sect3"><span class="enumeration_section">18.6</span>在多租户环境中使用Oracle虚拟专用数据库</h3>
               <div>
                  <p>Oracle虚拟专用数据库（VPD）使您可以过滤访问数据的用户。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE">什么是Oracle虚拟专用数据库？</a><br>Oracle虚拟专用数据库（VPD）创建安全策略以控制行和列级别的数据库访问。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5">多租户环境中的Oracle虚拟专用数据库</a><br> <span>您可以在应用程序根目录中创建虚拟专用数据库策略，以便在任何关联的应用程序PDB中使用。</span></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE" name="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE"></a><h4 id="MULTI-GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE" class="sect4"><span class="enumeration_section">18.6.1</span>什么是Oracle虚拟专用数据库？
                  </h4>
                  <div>
                     <p>Oracle虚拟专用数据库（VPD）创建安全策略以控制行和列级别的数据库访问。</p>
                     <div class="infoboxnote" id="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE__GUID-CC44D99A-1031-411E-B725-04DC6A003550">
                        <p class="notep1">注意：</p>
                        <p>Oracle Database 12c版引入了Real Application Security（RAS）来取代VPD。 Oracle建议您将RAS用于需要对其应用程序执行行级和列级访问控制的新项目。</p>
                     </div>
                     <p>实质上，Oracle虚拟专用数据库将SQL动态<code class="codeph">WHERE</code>子句添加到针对应用了Oracle虚拟专用数据库安全策略的表，视图或同义词发出的SQL语句。
                     </p>
                     <p>Oracle虚拟专用数据库直接在数据库表，视图或同义词上实施精确的粒度级别的安全性。由于您将安全策略直接附加到这些数据库对象，并且每当用户访问数据时都会自动应用策略，因此无法绕过安全性。</p>
                     <p>当用户直接或间接访问受Oracle虚拟专用数据库策略保护的表，视图或同义词时，Oracle数据库会动态修改用户的SQL语句。此修改创建由实现安全策略的函数返回的<code class="codeph">WHERE</code>条件（称为谓词）。Oracle数据库使用可以在函数中表达或返回的任何条件，以动态，透明的方式修改语句。您可以将Oracle虚拟专用数据库策略应用于<code class="codeph">SELECT</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">INDEX</code>和<code class="codeph">DELETE</code>语句。
                     </p>
                     <p>例如，假设用户执行以下查询：</p><pre class="pre codeblock"><code>SELECT * FROM OE.ORDERS;</code></pre><p>Oracle虚拟专用数据库策略使用<code class="codeph">WHERE</code>子句动态附加语句。例如：</p><pre class="pre codeblock"><code>SELECT * FROM OE.ORDERS WHERE SALES_REP_ID = 159;</code></pre><p>在该示例中，用户只能按销售代表159查看订单。</p>
                     <p>如果要根据该用户的会话信息（例如用户的ID）过滤用户，则可以创建<code class="codeph">WHERE</code>子句以使用应用程序上下文。例如：</p><pre class="pre codeblock"><code>SELECT * FROM OE.ORDERS WHERE SALES_REP_ID = SYS_CONTEXT（'USERENV'，'SESSION_USER'）;</code></pre><div class="infoboxnote" id="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE__GUID-6C59F3CD-71C6-4728-AA45-A01CE1527BEE">
                        <p class="notep1">注意：</p>
                        <p>Oracle虚拟专用数据库不支持对DDL进行过滤，例如<code class="codeph">TRUNCATE</code>或<code class="codeph">ALTER TABLE</code>语句。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbfsg/indroducing-oracle-database-real-application-security.html#DBFSG-GUID-4CA063EE-9405-439A-AAA1-5919E3C1470B" target="_blank"><span><cite>Oracle数据库Real Application安全管理员和开发人员指南</cite></span></a></li>
                           <li><a href="../dbseg/using-oracle-vpd-to-control-data-access.html#DBSEG-GUID-06022729-9210-4895-BF04-6177713C65A7" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" title="Oracle虚拟专用数据库（VPD）使您可以过滤访问数据的用户。">在多租户环境中使用Oracle虚拟专用数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5" name="GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5"></a><h4 id="MULTI-GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5" class="sect4"><span class="enumeration_section">18.6.2</span>多租户环境中的Oracle虚拟专用数据库</h4>
                  <div>
                     <p> <span>您可以在应用程序根目录中创建虚拟专用数据库策略，以便在任何关联的应用程序PDB中使用。</span></p>
                     <p>CDB限制也适用于与虚拟专用数据库策略相关的共享上下文敏感策略和视图。您无法为整个多租户环境创建虚拟专用数据库策略。</p>
                     <p>对于应用程序容器，您可以通过将公共策略应用于属于应用程序根目录的所有PDB来创建虚拟专用数据库策略以保护应用程序公共对象。换句话说，在应用程序根目录中安装应用程序时，保护公共对象的所有常见虚拟专用数据库策略都将应用于应用程序容器中的所有PDB并立即强制执行。</p>
                     <p>请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您只能在应用程序根目录中创建公共虚拟专用数据库策略及其关联的PL / SQL功能，并且只能将其附加到应用程序公共对象。如果该函数与策略不在同一位置，则会在运行时引发错误。</p>
                        </li>
                        <li>
                           <p>应用于公共对象的虚拟专用数据库策略被视为一种通用策略，当从应用程序PDB访问应用程序公共对象时，该策略将在属于应用程序容器的PDB中自动实施。</p>
                        </li>
                        <li>
                           <p>应用程序通用虚拟专用数据库策略只能保护应用程序公共对</p>
                        </li>
                        <li>
                           <p>应用于应用程序根目录中的应用程序公共对象并应用于所有应用程序PDB的虚拟专用数据库策略被视为常见的虚拟专用数据库策略。应用于本地数据库表并在一个PDB中强制执行的策略被视为本地虚拟专用数据库策略。</p>
                           <p>例如，如果将策略<code class="codeph">VPD_P1</code>应用于应用程序根目录中的应用程序公用表<code class="codeph">T1</code> ，则将其视为公共策略。它将在每个应用程序PDB中强制执行。如果一个名为政策<code class="codeph">VPD_P1</code>应用于称为本地表<code class="codeph">T1</code>在<code class="codeph">PDB1</code> ，那么它被认为是一个本地策略，这意味着它仅影响<code class="codeph">PDB1</code> 。如果将名为<code class="codeph">VPD_P1</code>的策略应用于应用程序根目录中的本地表<code class="codeph">T1</code> ，则它仍被视为本地策略，因为它仅影响应用程序根目录。此概念适用于其他操作，例如启用，禁用和删除虚拟专用数据库策略。
                           </p>
                        </li>
                        <li>
                           <p>应用程序通用虚拟专用数据库策略仅保护应用程序公共对象，而本地虚拟专用数据库策略仅保护本地对象</p>
                        </li>
                        <li>
                           <p>如果您正在使用应用程序上下文，则确保在公共虚拟专用数据库配置中使用基于公共数据库会话的应用程序上下文和公共全局应用程序上下文对象。</p>
                        </li>
                        <li>
                           <p>应用程序容器Virtual Private Database策略存储在应用程序根目录中。PDB仅存储本地策略。如果将PDB插入应用程序容器，则公共策略不会转换为本地策略。相反，Oracle数据库从应用程序根目录加载它们，并在策略访问本地PDB中的公共对象时在本地PDB中强制执行它们。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/using-oracle-vpd-to-control-data-access.html#DBSEG-GUID-06022729-9210-4895-BF04-6177713C65A7" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" title="Oracle虚拟专用数据库（VPD）使您可以过滤访问数据的用户。">在多租户环境中使用Oracle虚拟专用数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E" name="GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E"></a><h3 id="MULTI-GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E" class="sect3"><span class="enumeration_section">18.7</span>在多租户环境中使用传输层安全性</h3>
               <div>
                  <p>传输层安全性（TLS）可以在多租户环境中用于应用程序容器。</p>
                  <div class="section">如果要在多租户环境中为应用程序容器使用传输层安全性（TLS），则必须确保每个PDB都能够使用自己的钱包和自己的证书进行TLS身份验证。</div>
                  <!-- class="section" -->
                  <ul>
                     <li class="stepexpand"><span>因为每个PDB没有单独的<code class="codeph">sqlnet.ora</code>文件，所以将钱包放在<code class="codeph">wallet</code>目录的子目录中，子目录的名称是使用钱包的PDB的GUID。</span><div>例如，假设<code class="codeph">sqlnet.ora</code>的<code class="codeph">WALLET_LOCATION</code>参数设置如下：<pre class="pre codeblock"><code>（SOURCE =（METHOD = FILE）（METHOD_DATA =（DIRECTORY = / home / oracle / wallet）））</code></pre><p>将每个PDB的钱包放在<code class="codeph">/home/oracle/wallet</code>目录中。您可以通过查询<code class="codeph">DBA_PDBS</code>数据字典视图找到现有的PDB及其GUID。
                           </p>
                           <p>如果未指定<code class="codeph">WALLET_LOCATION</code>参数，则必须将PDB钱包放在默认钱包路径的子目录中，其中子目录的名称是PDB的GUID。例如：</p><pre class="pre codeblock"><code>$ ORACLE_BASE / admin / <span class="italic">db_unique_name</span> / wallet / <span class="italic">PDB_GUID</span></code></pre><p>或者，如果未设置<code class="codeph">ORACLE_BASE</code>环境变量，则可以使用Oracle主目录：</p><pre class="pre codeblock"><code>$ ORACLE_HOME / admin / <span class="italic">db_unique_name</span> / wallet / <span class="italic">PDB_GUID</span></code></pre><p>这些默认位置对应于Oracle Enterprise User Security用于查找用于对LDAP进行身份验证的钱包的默认位置。</p>
                        </div>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../dbseg/configuring-secure-sockets-layer-authentication.html#DBSEG-GUID-6AD89576-526F-4D6B-A539-ADF4B840819F" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-52FA95B1-8823-43F9-9D96-8F801BF16178" name="GUID-52FA95B1-8823-43F9-9D96-8F801BF16178"></a><h3 id="MULTI-GUID-52FA95B1-8823-43F9-9D96-8F801BF16178" class="sect3"><span class="enumeration_section">18.8</span>多租户环境中的Oracle数据编辑</h3>
               <div>
                  <p>在多租户环境中，Oracle Data Redaction策略仅适用于当前可插拔数据库（PDB）中的对象。</p>
                  <p>您无法为多租户容器数据库（CDB）创建数据编辑策略。这是因为您为其创建数据编辑策略的对象通常驻留在PDB中。如果您具有<code class="codeph">SYSDBA</code>权限，则可以通过运行<code class="codeph">SHOW PDBS</code>命令列出CDB中的所有PDB。
                  </p>
                  <p>与CDB根一样，您无法在应用程序根目录中创建数据编辑策略。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-F4AE4724-5E1F-478C-BF40-999E21189890" name="GUID-F4AE4724-5E1F-478C-BF40-999E21189890"></a><h3 id="MULTI-GUID-F4AE4724-5E1F-478C-BF40-999E21189890" class="sect3"><span class="enumeration_section">18.9</span>多租户环境中的审计</h3>
               <div>
                  <p>审计跟踪用户在多租户容器数据库（CDB）中所做的更改。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-562D382F-356F-46FE-B061-CF5E589CCEB8">关于多租户环境中的审计</a><br>您可以在多租户环境中使用统一审核。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-335779FD-3DF8-4CBD-AC29-A02389749F93">示例：在多租户环境中审核DBA角色</a><br><code class="codeph">CREATE AUDIT POLICY</code>语句可以在多租户环境中审核角色。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB">多租户环境中的统一审核策略或审核设置</a><br>在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-6F15B297-08C6-4904-938D-3DAA429E14B0">多租户环境中的细粒度审计</a><br><span>您可以在CDB根，应用程序根，CDB PDB和应用程序PDB中创建细粒度的审核策略。</span></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-562D382F-356F-46FE-B061-CF5E589CCEB8" name="GUID-562D382F-356F-46FE-B061-CF5E589CCEB8"></a><h4 id="MULTI-GUID-562D382F-356F-46FE-B061-CF5E589CCEB8" class="sect4"><span class="enumeration_section">18.9.1</span>关于多租户环境中的审计</h4>
                  <div>
                     <p>您可以在多租户环境中使用统一审核。</p>
                     <p>您可以将审核设置应用于单个PDB或CDB，具体取决于策略的类型。在多租户环境中，每个PDB（包括根）都具有自己的统一审计跟踪。</p>
                     <p>有关更多信息，请参阅以下部分：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">使用CREATE AUDIT POLICY和AUDIT语句创建的统一审计策略：</span>您可以为根PDB和单个PDB创建策略。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">细粒度审计策略：</span>您只能为单个PDB创建策略，而不能为根创建策略。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">清除审计跟踪：</span>您可以对根PDB和单个PDB执行清除操作。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/introduction-to-auditing.html#DBSEG-GUID-94381464-53A3-421B-8F13-BD171C867405" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="审计跟踪用户在多租户容器数据库（CDB）中所做的更改。">在多租户环境中进行审计</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-335779FD-3DF8-4CBD-AC29-A02389749F93" name="GUID-335779FD-3DF8-4CBD-AC29-A02389749F93"></a><h4 id="MULTI-GUID-335779FD-3DF8-4CBD-AC29-A02389749F93" class="sect4"><span class="enumeration_section">18.9.2</span>示例：在多租户环境中审计DBA角色</h4>
                  <div>
                     <p><code class="codeph">CREATE AUDIT POLICY</code>语句可以在多租户环境中审核角色。
                     </p>
                     <p>以下示例说明如何在多租户环境中审核预定义的公共角色<code class="codeph">DBA</code> 。
                     </p>
                     <div class="example" id="GUID-335779FD-3DF8-4CBD-AC29-A02389749F93__CHDFEBFF">
                        <p class="titleinexample">示例18-4在多租户环境中审计DBA角色</p><pre class="pre codeblock"><code>CREATE AUDIT POLICY role_dba_audit_pol ROLES DBA CONTAINER = ALL;审计政策role_dba_audit_pol;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="审计跟踪用户在多租户容器数据库（CDB）中所做的更改。">在多租户环境中进行审计</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" name="GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB"></a><h4 id="MULTI-GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" class="sect4"><span class="enumeration_section">18.9.3</span>多租户环境中的统一审计策略或审计设置</h4>
                  <div>
                     <p>在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF">关于本地，CDB通用和应用程序通用审计策略</a><br><span>审核策略可以是本地审核策略，CDB通用审核策略或应用程序通用审核策略。</span> 
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-BFCF47B5-4A96-4984-A07E-F210DD625590">多租户环境中的传统审计</a><br>在传统的审计（非统一审计）中， <code class="codeph">AUDIT</code>和<code class="codeph">NOAUDIT</code>语句可以审计多租户环境中的语句和权限。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F">配置本地统一审核策略或通用统一审核策略</a><br><code class="codeph">CONTAINER</code>子句特定于<code class="codeph">CREATE AUDIT POLICY</code>语句的多租户环境使用。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-92AAA230-841F-4214-940E-C7C47AB0CA39">示例：本地统一审核策略</a><br><span class="apiname" translate="no">CREATE AUDIT POLICY</span>语句可以在根或PDB中创建本地统一审计策略。</li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0">示例：CDB通用统一审计策略</a><br><span class="apiname" translate="no">CREATE AUDIT POLICY</span>语句可以创建CDB通用统一审计策略。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C">示例：应用程序通用统一审核策略</a><br>对于应用程序容器通用统一审核策略，您可以审核操作选项和系统权限选项，并引用常见对象和角色。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E">如何在审计跟踪中显示本地或通用审计策略或设置</a><br>您可以从发生操作的根或PDB查询统一审核策略视图。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="审计跟踪用户在多租户容器数据库（CDB）中所做的更改。">在多租户环境中进行审计</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF" name="GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF"></a><h5 id="MULTI-GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF" class="sect5"><span class="enumeration_section">18.9.3.1</span> <span>关于本地，CDB通用和应用程序通用审计策略</span></h5>
                     <div>
                        <p><span>审核策略可以是本地审核策略，CDB通用审核策略或应用程序通用审核策略。</span> 
                        </p>
                        <p>这适用于使用<code class="codeph">AUDIT</code> SQL语句创建的统一审核策略和策略。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">地方审计政策。</span> 此类策略可以存在于根（CDB或应用程序）或PDB（CDB或应用程序）中。根目录中存在的本地审计策略可以包含本地和公共对象的对象审计选项。已被授予<code class="codeph">AUDIT_ADMIN</code>角色的本地和普通用户都可以启用本地策略：来自其PDB的本地用户以及来自其拥有权限的根或PDB的普通用户。您可以为本地和普通用户和角色启用本地审核策略。
                              </p>
                              <p>您可以为应用程序本地对象和应用程序本地角色创建本地审核策略，以及系统操作选项和系统特权选项。您不能跨所有容器对公共用户强制执行本地审核策略，也不能为本地用户强制执行通用审核策略。</p>
                           </li>
                           <li>
                              <p><span class="bold">CDB共同审计政策。</span> 多租户环境中的所有PDB均可使用此类策略。只有被授予<code class="codeph">AUDIT_ADMIN</code>角色的普通用户才能创建和维护通用审计策略。您只能为普通用户启用通用审核策略。您必须仅在根目录中创建通用审核策略。此类策略可以包含仅公共对象的对象审核选项，并且仅对普通用户启用。您只能为普通用户和角色启用通用审核策略。
                              </p>
                              <p>您无法跨所有容器为本地用户强制执行通用审核策略。</p>
                           </li>
                           <li>
                              <p><span class="bold">应用通用审计政策。</span> 与CDB通用审核策略类似，此类策略可用于多租户环境中的所有PDB。您可以为应用程序公共对象和应用程序公共角色创建公共审计策略，以及系统操作选项和系统特权选项。您只能在应用程序根容器中创建此类策略，但您可以在应用程序通用用户和CDB普通用户上启用它。如果要审核对象，请确保这些对象是应用程序公共对象。您可以通过查询<code class="codeph">DBA_OBJECTS</code>数据字典视图的<code class="codeph">SHARING</code>列来确定对象是否是应用程序公共对象。
                              </p>
                           </li>
                        </ul>
                        <p>默认情况下，审核策略对于CDB和应用程序方案而言是当前PDB的本地策略。</p>
                        <p>下表说明了审核策略在不同多租户环境中的应用方式。</p>
                        <div class="tblformal" id="GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF__HOWAUDITPOLICIESAPPLYTOTHECDBROOTAP-FE335581">
                           <p class="titleintable">表18-1审核策略如何应用于CDB根，应用程序根和单个PDB</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="审核策略如何应用于CDB根，应用程序根和单个PDB" border="1" summary="This table shows how audit policies apply to the CDB root, application root, and individual PDBs. Columns are from left to right Audit Option Type, CDB Root, Application Root, and Individual PDB." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d87660e6641">审计选项类型</th>
                                    <th align="left" valign="bottom" id="d87660e6643">CDB Root</th>
                                    <th align="left" valign="bottom" id="d87660e6645">应用程序根</th>
                                    <th align="left" valign="bottom" id="d87660e6647">个人PDB</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d87660e6651" headers="d87660e6641 ">
                                       <p>共同审计声明或审计政策</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6651 d87660e6643 ">
                                       <p>适用于CDB普通用户</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6651 d87660e6645 ">
                                       <p>适用于CDB普通用户</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6651 d87660e6647 ">
                                       <p>适用于CDB普通用户</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d87660e6664" headers="d87660e6641 ">
                                       <p>应用程序容器通用审计声明或审计策略</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6664 d87660e6643 ">
                                       <p>不适用</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6664 d87660e6645 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>适用于CDB普通用户，仅对当前应用程序容器有效</p>
                                          </li>
                                          <li>
                                             <p>适用于应用程序容器的普通用户</p>
                                          </li>
                                       </ul>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6664 d87660e6647 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>适用于CDB普通用户，仅对此应用程序容器有效</p>
                                          </li>
                                          <li>
                                             <p>适用于应用程序普通用户</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d87660e6687" headers="d87660e6641 ">
                                       <p>本地审计声明或审计政策</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6687 d87660e6643 ">
                                       <p>不允许本地配置</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6687 d87660e6645 ">
                                       <p>不允许本地配置</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6687 d87660e6647 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>适用于CDB普通用户</p>
                                          </li>
                                          <li>
                                             <p>适用于应用程序普通用户</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-BFCF47B5-4A96-4984-A07E-F210DD625590" name="GUID-BFCF47B5-4A96-4984-A07E-F210DD625590"></a><h5 id="MULTI-GUID-BFCF47B5-4A96-4984-A07E-F210DD625590" class="sect5"><span class="enumeration_section">18.9.3.2</span>多租户环境中的传统审计</h5>
                     <div>
                        <p>在传统的审计（非统一审计）中， <code class="codeph">AUDIT</code>和<code class="codeph">NOAUDIT</code>语句可以审计多租户环境中的语句和权限。
                        </p>
                        <p>要将审核策略配置为本地审核策略或通用审核策略，必须像通常对其他SQL创建或修改语句一样包含<code class="codeph">CONTAINER</code>子句。如果要审核应用程序容器，则可以审核本地和公共用户和角色执行的SQL语句和系统特权。审计记录将在执行操作的容器中创建。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果要将<code class="codeph">AUDIT</code>或<code class="codeph">NOAUDIT</code>语句应用于当前CDB或应用程序PDB，则必须在此PDB中将<code class="codeph">CONTAINER</code>设置为<code class="codeph">CURRENT</code> 。例如：</p><pre class="pre codeblock"><code>通过访问容器的系统审计任何表：=当前;</code></pre></li>
                           <li>
                              <p><span>如果要将<code class="codeph">AUDIT</code>或<code class="codeph">NOAUDIT</code>语句应用于整个多租户环境，则在CDB根目录中，必须将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code> 。对于应用程序容器，您可以在应用程序根目录中进行设置。例如：</span></p><pre class="pre codeblock"><code>按访问容器= ALL的系统审计任何表：</code></pre></li>
                        </ul>
                        <p>要查找传统审计选项是否设计为在应用程序容器中使用，请使用<code class="codeph">DBA_OBJ_AUDIT_OPTS</code>和<code class="codeph">DBA_OBJECTS</code>数据字典视图执行连接查询，方法是使用两个视图中的<code class="codeph">OWNER</code>和<code class="codeph">OBJECT_NAME</code>列以及<code class="codeph">DBA_OBJECTS</code>的<code class="codeph">APPLICATION</code>列。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../sqlrf/AUDIT-Traditional-Auditing.html#SQLRF-GUID-ADF45B07-547A-4096-8144-50241FA2D8DD" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-BFCF47B5-4A96-4984-A07E-F210DD625590__GUID-E65E8AEE-C77D-41EC-A5E0-144B6C44090D">
                           <p class="notep1">也可以看看：</p>
                           <p>有关传统<a href="../sqlrf/AUDIT-Traditional-Auditing.html#SQLRF01107" target="_blank"><code class="codeph">AUDIT</code></a>和<a href="../sqlrf/NOAUDIT-Traditional-Auditing.html#SQLRF01607" target="_blank"><code class="codeph">NOAUDIT</code></a> SQL语句的更多信息，请<span><cite>参见Oracle数据库SQL语言参考</cite></span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F" name="GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F"></a><h5 id="MULTI-GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F" class="sect5"><span class="enumeration_section">18.9.3.3</span>配置本地统一审计策略或通用统一审计策略</h5>
                     <div>
                        <p><code class="codeph">CONTAINER</code>子句特定于<code class="codeph">CREATE AUDIT POLICY</code>语句的多租户环境使用。
                        </p>
                        <div class="section">要在CDB环境或应用程序容器环境中创建本地或公共<span>（CDB或应用程序）</span>统一审计策略，请在<code class="codeph">CREATE AUDIT POLICY</code>语句中包含<code class="codeph">CONTAINER</code>子句。
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>使用以下语法创建本地或通用统一审核策略：</p><pre class="pre codeblock"><code>CREATE AUDIT POLICY policy_name <span class="italic">action1</span> [， <span class="italic">action2</span> ] [CONTAINER = {CURRENT |所有}];</code></pre></li>
                           </ul>
                           <p>在本规范中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">CURRENT</code>将审核策略设置为当前PDB的本地策略。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">ALL</code>使审计策略成为通用审计策略，即整个多租户环境可用。
                                 </p>
                              </li>
                           </ul>
                           <p>例如，对于通用的统一审核策略：</p><pre class="pre codeblock"><code>创建审计策略dict_updates SYS.USER上的操作更新$，删除SYS.USER $，更新SYS.LINK $，删除SYS.LINK $ CONTAINER = ALL;</code></pre><p>请注意以下事项：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您可以为<code class="codeph">CREATE AUDIT POLICY</code>语句设置<code class="codeph">CONTAINER</code>子句，但不能为<code class="codeph">ALTER AUDIT POLICY</code>或<code class="codeph">DROP AUDIT POLICY</code> 。如果要更改现有统一审核策略的范围以使用此设置，则必须删除并重新创建策略。
                                 </p>
                              </li>
                              <li>
                                 <p>对于<code class="codeph">AUDIT</code>语句，仅当您具有尚未迁移到版本12 <span class="italic">x</span>审计功能的Oracle数据库时，才可以为审计设置设置<code class="codeph">CONTAINER</code>子句。您不能在用于启用统一审核策略的<code class="codeph">AUDIT</code>语句中使用<code class="codeph">CONTAINER</code>子句。
                                 </p>
                              </li>
                              <li>
                                 <p>如果您在PDB中，那么您只能将<code class="codeph">CONTAINER</code>子句设置为<code class="codeph">CURRENT</code> ，而不是<code class="codeph">ALL</code> 。如果在PDB中省略设置，则默认值为<code class="codeph">CONTAINER = CURRENT</code> 。</p>
                              </li>
                              <li>
                                 <p>如果您位于根目录中，则可以将<code class="codeph">CONTAINER</code>子句设置为<code class="codeph">CURRENT</code>如果希望策略仅应用于根），或者设置为<code class="codeph">ALL</code>如果希望策略应用于整个CDB）。如果省略<code class="codeph">CONTAINER</code>子句，则默认为<code class="codeph">CONTAINER = CURRENT</code> 。</p>
                              </li>
                              <li>
                                 <p>对象：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>通用审计策略只能有公共对象，本地审计策略可以同时具有本地对象和公共对象。</p>
                                    </li>
                                    <li>
                                       <p>如果涉及的对象是本地的，则无法将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code> 。它们必须是共同的对象。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>对于特权：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果涉及的用户帐户是本地帐户和普通帐户的混合，则可以将<code class="codeph">CONTAINER</code>设置为<code class="codeph">CURRENT</code> （或省略<code class="codeph">CONTAINER</code>子句）。这将创建仅适用于当前PDB的本地审核配置。</p>
                                    </li>
                                    <li>
                                       <p>如果涉及的用户是本地用户，则无法将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code> 。他们必须是普通用户。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code>并且未指定用户列表（使用<code class="codeph">AUDIT</code>语句中的<code class="codeph">BY</code>子句），则配置将应用于每个PDB中的所有公共用户。</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>对于应用程序容器，您可以从用于应用程序安装，升级，修补和卸载操作的应用程序容器脚本运行通用的统一审核策略。为此：</p>
                                 <ol>
                                    <li>
                                       <p>在应用程序容器根目录中创建通用的统一审核策略，并将此策略设置为<code class="codeph">CONTAINER = ALL</code> 。或者，您可以在下一步中描述的脚本中包含此策略。
                                       </p>
                                    </li>
                                    <li>
                                       <p>创建通常用于安装，升级，修补或卸载Oracle数据库的脚本的自定义版本。</p>
                                    </li>
                                    <li>
                                       <p>在此脚本中，包括要在以下行中审核的SQL语句：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION BEGIN INSTALL <span class="italic">列出SQL语句。用分号分隔每个语句。
</span> ALTER PLOGGABLE DATABASE应用程序结束安装</code></pre><p>如果在脚本中包含统一审核策略，请确保包含<code class="codeph">CREATE AUDIT POLICY</code>和<code class="codeph">AUDIT POLICY</code>语句。
                                       </p>
                                    </li>
                                 </ol>
                                 <p>创建并启用审核策略后，无论是在数据库中还是从脚本中定义审核策略，都会审核对应用程序公共对象的所有用户访问权限。</p>
                              </li>
                              <li>
                                 <p>要在应用程序根目录或应用程序PDB中本地审核应用程序安装，升级，修补和卸载操作，请遵循类似于上述常见统一审核策略的过程，但之后同步应用程序PDB。例如：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION <span class="italic">application_name</span> SYNC;</code></pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-92AAA230-841F-4214-940E-C7C47AB0CA39" name="GUID-92AAA230-841F-4214-940E-C7C47AB0CA39"></a><h5 id="MULTI-GUID-92AAA230-841F-4214-940E-C7C47AB0CA39" class="sect5"><span class="enumeration_section">18.9.3.4</span>示例：本地统一审计策略</h5>
                     <div>
                        <p><span class="apiname" translate="no">CREATE AUDIT POLICY</span>语句可以在根或PDB中创建本地统一审计策略。</p>
                        <p>在根中创建本地统一审核策略时，它仅适用于根，而不适用于多租户环境。</p>
                        <p>以下示例显示了由PDB中的公共用户<code class="codeph">c##sec_admin</code>创建并应用于公共用户<code class="codeph">c##hr_admin</code>的本地统一审核策略。
                        </p>
                        <div class="example" id="GUID-92AAA230-841F-4214-940E-C7C47AB0CA39__CHDGAGBG">
                           <p class="titleinexample">示例18-5本地统一审计策略</p><pre class="pre codeblock"><code>CONNECT c ## sec_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。CREATE AUDIT POLICY table_privs PRIVILEGES CREATE ANY TABLE，DROP ANY TABLE CONTAINER = CURRENT;审计政策table_privs BY c ## hr_admin;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0" name="GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0"></a><h5 id="MULTI-GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0" class="sect5"><span class="enumeration_section">18.9.3.5</span>示例：CDB通用统一审计策略</h5>
                     <div>
                        <p><span class="apiname" translate="no">CREATE AUDIT POLICY</span>语句可以创建CDB通用统一审计策略。
                        </p>
                        <p><a href="managing-security-for-a-multitenant-environment.html#GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0__CHDDFHEH">例18-6</a>显示了一个统一的统一审计策略，该策略由公共用户<code class="codeph">c##sec_admin</code>从根创建并应用于普通用户<code class="codeph">c##hr_admin</code> 。
                        </p>
                        <div class="example" id="GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0__CHDDFHEH">
                           <p class="titleinexample">示例18-6通用统一审计策略</p><pre class="pre codeblock"><code>CONNECT c ## sec_admin输入密码： <span class="italic">密码</span>已连接。CREATE AUDIT POLICY admin_pol ACTIONS CREATE TABLE，ALTER TABLE，DROP TABLE ROLES c ## hr_mgr，c ## hr_sup CONTAINER = ALL;审计政策admin_pol BY c ## hr_admin;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C" name="GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C"></a><h5 id="MULTI-GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C" class="sect5"><span class="enumeration_section">18.9.3.6</span>示例：应用程序通用统一审计策略</h5>
                     <div>
                        <p>对于应用程序容器通用统一审核策略，您可以审核操作选项和系统权限选项，并引用常见对象和角色。</p>
                        <p>您只能从应用程序根目录创建应用程序通用审核策略，并为应用程序通用用户和CDB普通用户启用该策略。</p>
                        <p>以下示例说明如何创建审核应用程序容器<code class="codeph">app_pdb</code>的应用程序公共用户<code class="codeph">SYSTEM</code>的<code class="codeph">app_pdb</code> 。审计策略审核<code class="codeph">SYSTEM.utils_tab</code>表上的<code class="codeph">SELECT</code>操作以及容器数据库中任何PDB上的<code class="codeph">DROP TABLE</code>操作，包括CDB根。该策略还审核跨所有容器使用<code class="codeph">SELECT ANY TABLE</code>系统特权。
                        </p>
                        <div class="example" id="GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C__EXAMPLETITLE-FE09F6DA">
                           <p class="titleinexample">示例18-7应用程序通用统一审计策略</p><pre class="pre codeblock"><code>CONNECT c ## sec_admin @ app_pdb输入密码： <span class="italic">密码</span>已连接。创建审计策略app_pdb_admin_pol操作选择在hr_app_cdb.utils_tab上，DROP TABLE PRIVILEGES SELECT ANY TABLE CONTAINER = ALL;审计政策app_pdb_admin_pol由SYSTEM，c ## hr_admin;</code></pre><p>在前面的示例中，将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code>仅将策略应用于应用程序根目录中的所有相关对象访问以及属于应用程序根目录的所有应用程序PDB。它不适用此范围之外的政策。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E" name="GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E"></a><h5 id="MULTI-GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E" class="sect5"><span class="enumeration_section">18.9.3.7</span>如何在审计跟踪中显示本地或通用审计策略或设置</h5>
                     <div>
                        <p>您可以从发生操作的根或PDB查询统一审核策略视图。</p>
                        <p>您可以执行以下类型的查询：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">审核所有PDB的记录。</span> 审计跟踪反映了在PDB中执行的审计操作。例如，如果用户<code class="codeph">lbrown</code>在<code class="codeph">PDB1</code>执行已审核通过一个共用的或本地的审计策略的行为，那么，审计跟踪将捕获这个动作。<code class="codeph">UNIFIED_AUDIT_TRAIL</code>数据字典视图中的<code class="codeph">DBID</code>列指示发生审计操作以及策略适用的PDB。如果要查看来自所有PDB的审核记录，则应从根目录查询<code class="codeph">CDB_UNIFIED_AUDIT_TRAIL</code>数据字典视图。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">审计来自共同审计政策的记录。</span> 此位置是通用审核策略导致审核记录的位置。审计记录可以在多租户环境中的任何位置生成 - 根或PDB，具体取决于操作实际发生的位置。例如，公共审计策略<code class="codeph">fga_pol</code>审核<code class="codeph">DBMS_FGA</code> PL / SQL包的<code class="codeph">EXECUTE</code>特权，如果在<code class="codeph">PDB1</code>发生此操作，则审计记录在<code class="codeph">PDB1</code>生成，而不是在根中生成。因此，审计记录可以在PDB1中看到。
                              </p>
                              <p>如果为策略名称包含<code class="codeph">WHERE</code>子句（例如， <code class="codeph">WHERE UNIFIED_AUDIT_POLICIES = 'FGA_POL'</code> ），则可以从根或PDB查询策略的<code class="codeph">UNIFIED_AUDIT_TRAIL</code>数据字典视图。
                              </p>
                           </li>
                        </ul>
                        <p>以下示例显示如何查找通用统一审核策略的结果：</p><pre class="pre codeblock"><code>CONNECT c ## sec_admin输入密码： <span class="italic">密码</span>已连接。SELECT DBID，ACTION_NAME，OBJECT_SCHEMA，OBJECT_NAME FROM CDB_UNIFIED_AUDIT_TRAIL WHERE DBUSERNAME ='c ## hr_admin'; 46892-1 DBID ACTION_NAME OBJECT_SCHEMA OBJECT_NAME ----------- ----------- ------------- -------- --- 653916017更新人力资源员工653916018更新HR JOB_HISTORY 653916017更新HR工作</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-6F15B297-08C6-4904-938D-3DAA429E14B0" name="GUID-6F15B297-08C6-4904-938D-3DAA429E14B0"></a><h4 id="MULTI-GUID-6F15B297-08C6-4904-938D-3DAA429E14B0" class="sect4"><span class="enumeration_section">18.9.4</span>多租户环境中的<span class="enumeration_section">细粒度</span>审计</h4>
                  <div>
                     <p><span>您可以在CDB根，应用程序根，CDB PDB和应用程序PDB中创建细粒度的审核策略。</span></p>
                     <p>请注意以下有关多租户环境中细粒度审计策略的一般规则：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您无法在<code class="codeph">SYS</code>对象上创建细粒度的审核策略。
                           </p>
                        </li>
                        <li>
                           <p>对于扩展数据链接对象，您无法为本地或应用程序公共创建细粒度审计策略。</p>
                        </li>
                        <li>
                           <p>在CDB根目录中创建细粒度审计策略时，该策略无法应用于所有PDB。它仅适用于CDB根目录中的对象。（换句话说，CDB根目录没有普通的细粒度审计策略。）如果要创建细粒度的审核策略以审核所有PDB中的公共对象的访问权限，则必须在每个PDB中显式创建该策略，然后在PDB中可访问的公共对象上启用该策略。</p>
                        </li>
                        <li>
                           <p>在PDB中创建细粒度审核策略时，它仅适用于PDB中的对象。</p>
                        </li>
                        <li>
                           <p>只有在连接到应用程序根目录且仅在<code class="codeph">BEGIN</code> / <code class="codeph">END</code>块中时，才能创建应用程序通用的细粒度审计策略。如果已连接到应用程序根目录并在<code class="codeph">BEGIN</code> / <code class="codeph">END</code>块之外创建细粒度审计策略，则会在应用程序根目录中创建细粒度审计策略。
                           </p>
                        </li>
                        <li>
                           <p>您无法在本地PDB对象上创建应用程序常见的细粒度审计策略。</p>
                        </li>
                        <li>
                           <p>如果应用程序通用细粒度审计策略具有处理程序，则此处理程序必须由应用程序公共用户或CDB公共用户拥有。</p>
                        </li>
                        <li>
                           <p>您可以在本地（PDB）对象和CDB公共对象上创建应用程序细粒度审计策略。由于策略是其容器的本地策略，因此仅在定义策略的特定容器中审核定义策略的对象。例如，如果在<code class="codeph">hr_pdb</code> PDB中创建细粒度审计策略，则创建此策略的对象必须存在于<code class="codeph">hr_pdb</code> PDB中。</p>
                        </li>
                        <li>
                           <p>您无法在对象链接和扩展数据链接对象上的应用程序PDB中创建本地细粒度审计策略。在细粒度审计策略中允许使用元数据链接的对象。</p>
                        </li>
                        <li>
                           <p>所有应用程序公共对象都允许应用程序根本地策略。</p>
                        </li>
                        <li>
                           <p>在应用程序根目录中创建细粒度审计策略作为通用审计策略时，它将在属于此应用程序根目录的每个PDB中生效。因此，在应用程序PDB中的细粒度审计跟踪中审计对来自应用程序PDB的应用程序公共对象和CDB公共对象（在其上定义应用程序公共细粒度审计策略）的任何访问。</p>
                        </li>
                        <li>
                           <p>为应用程序安装，升级，修补或卸载操作创建脚本时，可以在<code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> BEGIN INSTALL</code>和<code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> END INSTALL</code>块中包含SQL语句以执行各种操作。您只能在这些块中包含细粒度审计策略语句。
                           </p>
                        </li>
                        <li>
                           <p>您只能从应用程序根目录，以及<code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> BEGIN INSTALL</code>中的<code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> BEGIN INSTALL</code>和<code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> END INSTALL</code>块中启用，禁用或删除应用程序常见的细粒度审计策略。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-audit-policies.html#DBSEG-GUID-B706FF6F-13A6-4944-AFCB-29971F5076FD" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="审计跟踪用户在多租户容器数据库（CDB）中所做的更改。">在多租户环境中进行审计</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
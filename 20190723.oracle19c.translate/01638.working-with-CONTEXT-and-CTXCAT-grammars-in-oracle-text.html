<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Become familiar with CONTEXT and CTXCAT grammars."></meta>
      <meta name="description" content="Become familiar with CONTEXT and CTXCAT grammars."></meta>
      <title>使用Oracle Text中的CONTEXT和CTXCAT语法</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Application Developer&#39;s Guide "></meta>
      <meta property="og:description" content="Become familiar with CONTEXT and CTXCAT grammars."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Application Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96275-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="querying-with-oracle-text.html" title="Previous" type="text/html"></link>
      <link rel="next" href="presenting-documents-in-oracle-text.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="CCAPP"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="querying-with-oracle-text.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="presenting-documents-in-oracle-text.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle Text中的CONTEXT和CTXCAT语法</li>
            </ol>
            <a id="GUID-2A6DC2A0-5C9D-4D5C-BC70-29F35855DBCD" name="GUID-2A6DC2A0-5C9D-4D5C-BC70-29F35855DBCD"></a>
            
            <h2 id="CCAPP-GUID-2A6DC2A0-5C9D-4D5C-BC70-29F35855DBCD" class="sect2"><span class="enumeration_chapter">7</span>使用Oracle Text中的CONTEXT和CTXCAT语法</h2>
         </header>
         <div class="ind">
            <div>
               <p>熟悉CONTEXT和CTXCAT语法。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-7070C025-54E1-4FBB-8585-1FCBD525927D">语境语法</a></p>
                  </li>
                  <li>
                     <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016">CTXCAT语法</a></p>
                  </li>
               </ul>
            </div><a id="CCAPP9172"></a><div class="props_rev_3"><a id="GUID-7070C025-54E1-4FBB-8585-1FCBD525927D" name="GUID-7070C025-54E1-4FBB-8585-1FCBD525927D"></a><h3 id="CCAPP-GUID-7070C025-54E1-4FBB-8585-1FCBD525927D" class="sect3"><span class="enumeration_section">7.1</span>语境语法</h3>
               <div>
                  <p><code class="codeph">CONTEXT</code>语法是<code class="codeph">CONTAINS</code>的默认语法。使用此语法，您可以使用运算符增加搜索的复杂性。您在查询表达式中使用查询运算符。例如， <code class="codeph">AND</code>逻辑运算符使您可以搜索包含两个不同单词的所有文档。<code class="codeph">ABOUT</code>运算符使您可以搜索概念。
                  </p>
                  <p>您还可以使用<code class="codeph">WITHIN</code>运算符进行节搜索; <code class="codeph">NEAR</code>运营商进行近距离搜索;以及用于扩展查询表达式的词干，模糊和同义词运算符。
                  </p>
                  <p>使用<code class="codeph">CONTAINS,</code>您还可以将<code class="codeph">CTXCAT</code>语法与查询模板功能一起使用。
                  </p>
                  <p>以下部分描述了一些Oracle Text运算符：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-18C52687-1073-411F-AF1E-64B337A83D07">关于查询</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-1C246D2B-362F-458B-A185-2FD95D1E1526">逻辑运算符</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-D861DECF-0806-455E-86E4-80F47194010B">部分搜索和HTML和XML</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-E2BD5F4A-8B1D-472C-BB8B-C8A18C6E1915">使用NEAR，NEAR_ACCUM和NEAR2运算符的邻近查询</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-205D27ED-D56B-4E91-AD86-7202CE53BCD4">模糊，词干，Soundex，通配符和同义词库扩展运算符</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-9D770A11-6EF1-449B-815B-99D5297BCFB3">使用CTXCAT语法</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-45028739-AA18-4D55-B03A-22644EC2FAC0">存储的查询表达式</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-F32E7A4D-0553-464B-8F53-0929AED185C0">在CONTAINS中调用PL / SQL函数</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-51035E4B-CB25-48CE-8196-3C5E859CEE00">优化响应时间</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-246DE264-3FE9-4FC0-A2DB-C12D410A187B">点击命中</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-2E1DB163-02FE-4B2E-AF28-0C33E09926BE">使用DEFINESCORE和DEFINEMERGE进行用户定义的评分</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-7070C025-54E1-4FBB-8585-1FCBD525927D__GUID-2EC485FC-2700-4248-8394-F9A97868821D">
                     <p class="notep1">也可以看看：</p>
                     <p>有关使用查询运算符的完整信息，请参阅<a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0300" target="_blank"><span class="italic">Oracle Text Reference</span></a></p>
                  </div>
               </div><a id="CCAPP9173"></a><div class="props_rev_3"><a id="GUID-18C52687-1073-411F-AF1E-64B337A83D07" name="GUID-18C52687-1073-411F-AF1E-64B337A83D07"></a><h4 id="CCAPP-GUID-18C52687-1073-411F-AF1E-64B337A83D07" class="sect4"><span class="enumeration_section">7.1.1</span>关于查询</h4>
                  <div>
                     <p>使用英语或法语的<code class="codeph">ABOUT</code>运算符查询概念。查询字符串通常是表示要搜索的想法的概念或主题。Oracle Text返回包含主题的文档。
                     </p>
                     <p>单词信息和主题信息组合成单个索引。要在索引中输入主题查询，必须包含默认情况下以英语和法语创建的主题查询。</p>
                     <p>使用查询表达式中的<code class="codeph">ABOUT</code>运算符输入主题查询。例如，要检索所有与<span class="italic">政治</span>有关的文档，请按如下方式编写查询：</p><pre class="oac_no_warn" dir="ltr">SELECT SCORE（1），title FROM news WHERE CONTAINS（text，'about（politics）'，1）&gt; 0 ORDER BY SCORE（1）DESC;</pre><div class="infoboxnotealso" id="GUID-18C52687-1073-411F-AF1E-64B337A83D07__GUID-D7A960C3-D03A-43E1-9C95-3E37102A0AD4">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用<code class="codeph">ABOUT</code>运算符的更多信息，请参阅<a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0301" target="_blank"><span class="italic">Oracle Text Reference</span></a></p>
                     </div>
                  </div>
               </div><a id="CCAPP9504"></a><a id="CCAPP9174"></a><div class="props_rev_3"><a id="GUID-1C246D2B-362F-458B-A185-2FD95D1E1526" name="GUID-1C246D2B-362F-458B-A185-2FD95D1E1526"></a><h4 id="CCAPP-GUID-1C246D2B-362F-458B-A185-2FD95D1E1526" class="sect4"><span class="enumeration_section">7.1.2</span>逻辑运算符</h4>
                  <div>
                     <p>使用逻辑运算符可以通过多种方式限制搜索条件。<a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-1C246D2B-362F-458B-A185-2FD95D1E1526__BABGJGCB" title="该表描述了逻辑运算符。">表7-1</a>描述了其中一些运算符。
                     </p>
                     <div class="tblformal" id="GUID-1C246D2B-362F-458B-A185-2FD95D1E1526__BABGJGCB">
                        <p class="titleintable">表7-1逻辑运算符</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="逻辑运算符" width="100%" border="1" summary="This table describes logical operators." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d19592e431">操作者</th>
                                 <th align="left" valign="bottom" width="14%" id="d19592e434">符号</th>
                                 <th align="left" valign="bottom" width="29%" id="d19592e437">描述</th>
                                 <th align="left" valign="bottom" width="43%" id="d19592e440">示例表达</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d19592e445" headers="d19592e431 ">
                                    <p><code class="codeph">和</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d19592e445 d19592e434 ">
                                    <p>＆</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d19592e445 d19592e437 ">
                                    <p>用于搜索包含<span class="italic">每个</span>查询字词至少出现一次的文档。
                                    </p>
                                    <p>返回的分数是操作数的最小值。</p>
                                 </td>
                                 <td align="left" valign="top" width="43%" headers="d19592e445 d19592e440 "><pre class="oac_no_warn" dir="ltr">'猫与狗''猫与狗'</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d19592e464" headers="d19592e431 ">
                                    <p><code class="codeph">要么</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d19592e464 d19592e434 ">
                                    <p>|</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d19592e464 d19592e437 ">
                                    <p>用于搜索包含至少一个<span class="italic">任何</span>查询术语的文档。
                                    </p>
                                    <p>返回的分数是操作数的最大值。</p>
                                 </td>
                                 <td align="left" valign="top" width="43%" headers="d19592e464 d19592e440 "><pre class="oac_no_warn" dir="ltr">'猫|狗的'猫或狗'</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d19592e483" headers="d19592e431 ">
                                    <p><code class="codeph">不</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d19592e483 d19592e434 ">
                                    <p>〜</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d19592e483 d19592e437 ">
                                    <p>用于搜索包含一个查询字词而非另一个查询字词的文档。</p>
                                 </td>
                                 <td align="left" valign="top" width="43%" headers="d19592e483 d19592e440 ">
                                    <p>要获取包含<span class="italic">动物</span>但不包含<span class="italic">狗</span>的文档<span class="italic">，请</span>使用以下表达式：</p><pre class="oac_no_warn" dir="ltr">'动物〜狗'</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d19592e505" headers="d19592e431 ">
                                    <p><code class="codeph">ACCUM</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d19592e505 d19592e434 ">
                                    <p>，</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d19592e505 d19592e437 ">
                                    <p>用于搜索包含至少一个任何查询术语的文档。累积运算符根据文档的总项重量对文档进行排名。</p>
                                 </td>
                                 <td align="left" valign="top" width="43%" headers="d19592e505 d19592e440 ">
                                    <p>以下查询返回包含<span class="italic">dog，cats</span>和<span class="italic">puppies</span>术语的所有文档，为包含所有三个术语的文档提供最高分数：</p><pre class="oac_no_warn" dir="ltr">'狗，猫，小狗'</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d19592e527" headers="d19592e431 ">
                                    <p><code class="codeph">EQUIV</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d19592e527 d19592e434 ">
                                    <p>=</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d19592e527 d19592e437 ">
                                    <p>用于指定查询中单词的可接受替换。</p>
                                 </td>
                                 <td align="left" valign="top" width="43%" headers="d19592e527 d19592e440 ">
                                    <p>以下示例返回包含短语<span class="italic">alsatians是大型犬</span>或<span class="italic">德国牧羊犬是大型犬的</span>所有文件<span class="italic">：</span></p><pre class="oac_no_warn" dir="ltr">'德国牧羊犬=阿尔萨斯人是大狗'</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="CCAPP9175"></a><div class="props_rev_3"><a id="GUID-D861DECF-0806-455E-86E4-80F47194010B" name="GUID-D861DECF-0806-455E-86E4-80F47194010B"></a><h4 id="CCAPP-GUID-D861DECF-0806-455E-86E4-80F47194010B" class="sect4"><span class="enumeration_section">7.1.3</span>章节搜索以及HTML和XML</h4>
                  <div>
                     <p><a id="d19592e611" class="indexterm-anchor"></a>当文档集是HTML或XML时，节搜索很有用。对于HTML，您可以使用嵌入式标记定义部分，然后使用<code class="codeph">WITHIN</code>运算符搜索这些部分。
                     </p>
                     <p>对于XML，您可以让系统自动创建节。您可以使用<code class="codeph">WITHIN</code>运算符或使用<code class="codeph">INPATH</code>运算符进行查询以进行路径搜索。
                     </p>
                     <div class="infoboxnotealso" id="GUID-D861DECF-0806-455E-86E4-80F47194010B__GUID-80FD723C-DC7C-4547-B024-209148DEE189">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-9455DBD9-2C23-4CB0-A3C5-FB8B2033516A" title="您可以在文本查询应用程序中使用文档部分。">在Oracle Text中搜索文档部分</a></p>
                     </div>
                  </div>
               </div><a id="CCAPP9550"></a><div class="props_rev_3"><a id="GUID-E2BD5F4A-8B1D-472C-BB8B-C8A18C6E1915" name="GUID-E2BD5F4A-8B1D-472C-BB8B-C8A18C6E1915"></a><h4 id="CCAPP-GUID-E2BD5F4A-8B1D-472C-BB8B-C8A18C6E1915" class="sect4"><span class="enumeration_section">7.1.4</span>使用NEAR，NEAR_ACCUM和NEAR2运算符的邻近查询</h4>
                  <div>
                     <p>使用<code class="codeph">NEAR</code>运算符搜索文档中彼此接近的术语。
                     </p>
                     <p>例如，要查找<span class="italic">dog</span>在<span class="italic">cat的</span> 6个单词内的所有文档<span class="italic">，请</span>输入以下查询：</p><pre class="oac_no_warn" dir="ltr">'附近（（狗，猫），6）'</pre><p>现在修改<code class="codeph">NEAR</code>运算符以改变<code class="codeph">NESTED NEAR.</code>短语之间的距离测量方式<code class="codeph">NESTED NEAR.</code></p>
                     <p><code class="codeph">NEAR_ACCUM</code>运算符将<code class="codeph">NEAR</code>运算符的功能与<code class="codeph">ACCUM</code>运算符的功能相结合。与<code class="codeph">NEAR,</code>一样<code class="codeph">NEAR,</code>它返回彼此相邻的术语;但是，如果找不到一个术语，它会根据找到的术语的出现频率对文档进行排名。
                     </p>
                     <p><code class="codeph">NEAR2</code>运算符结合了<code class="codeph">PHRASE,</code> <code class="codeph">NEAR,</code>和<code class="codeph">AND</code>运算符的功能。此外， <code class="codeph">NEAR2</code>运营商可以使用位置信息来提高其命中分数。也就是说，如果一个短语命中发生在文档的开头而另一个短语命中发生在文档的末尾，则与第二次命中相比，第一次命中的权重更高。
                     </p>
                     <div class="infoboxnotealso" id="GUID-E2BD5F4A-8B1D-472C-BB8B-C8A18C6E1915__GUID-077B84B3-6633-479C-B89B-39C4ED70F7F8">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用<code class="codeph">NEAR</code> ， <code class="codeph">NEAR_ACCUM</code>和<code class="codeph">NEAR2</code>运算符的详细信息，请<code class="codeph">NEAR_ACCUM</code> <a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0313" target="_blank"><span class="italic">Oracle Text Reference</span></a></p>
                     </div>
                  </div>
               </div><a id="CCAPP9177"></a><div class="props_rev_3"><a id="GUID-205D27ED-D56B-4E91-AD86-7202CE53BCD4" name="GUID-205D27ED-D56B-4E91-AD86-7202CE53BCD4"></a><h4 id="CCAPP-GUID-205D27ED-D56B-4E91-AD86-7202CE53BCD4" class="sect4"><span class="enumeration_section">7.1.5</span>模糊，词干，Soundex，通配符和同义词库扩展运算符</h4>
                  <div>
                     <p>使用通配符，模糊，词干，soundex和同义词库等运算符将查询扩展为更长的单词列表。</p>
                     <div class="infoboxnotealso" id="GUID-205D27ED-D56B-4E91-AD86-7202CE53BCD4__GUID-708C6AD2-8316-4168-914D-904AF47128BC">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关使用这些运算符的更多信息，请参阅<a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0300" target="_blank"><span class="italic">Oracle Text Reference</span></a></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="tuning-oracle-text.html#GUID-7E174101-D66D-43E9-9A8B-69EBA73F6502">在查询中进行多次扩展是否可以？</a>“</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CCAPP9178"></a><div class="props_rev_3"><a id="GUID-9D770A11-6EF1-449B-815B-99D5297BCFB3" name="GUID-9D770A11-6EF1-449B-815B-99D5297BCFB3"></a><h4 id="CCAPP-GUID-9D770A11-6EF1-449B-815B-99D5297BCFB3" class="sect4"><span class="enumeration_section">7.1.6</span>使用CTXCAT语法</h4>
                  <div>
                     <p>在<code class="codeph">CONTAINS</code>查询中使用<code class="codeph">CTXCAT</code>语法。为此，请在<code class="codeph">CONTAINS.</code>的<code class="codeph">text_query</code>参数中使用查询模板规范<code class="codeph">CONTAINS.</code></p>
                     <p>当您需要另一种更简单的查询语法时，可以利用<code class="codeph">CTXCAT</code>语法。
                     </p>
                     <div class="infoboxnotealso" id="GUID-9D770A11-6EF1-449B-815B-99D5297BCFB3__GUID-256826D3-2B94-4B09-A189-324516842D50">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用这些运算符的更多信息，请参阅<a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF0104" target="_blank"><span class="italic">Oracle Text Reference</span></a></p>
                     </div>
                  </div>
               </div><a id="CCAPP9179"></a><div class="props_rev_3"><a id="GUID-45028739-AA18-4D55-B03A-22644EC2FAC0" name="GUID-45028739-AA18-4D55-B03A-22644EC2FAC0"></a><h4 id="CCAPP-GUID-45028739-AA18-4D55-B03A-22644EC2FAC0" class="sect4"><span class="enumeration_section">7.1.7</span>定义的存储查询表达式</h4>
                  <div>
                     <p>使用<code class="codeph">CTX_QUERY.STORE_SQE</code>过程存储查询的定义，而不存储任何结果。使用<code class="codeph">CONTAINS</code> SQL运算符引用查询引用查询的定义。通过这种方式，存储的查询表达式可以轻松定义长或经常使用的查询表达式。
                     </p>
                     <p>存储的查询表达式未附加到索引。调用<code class="codeph">CTX_QUERY.STORE_SQE,</code>仅指定存储的查询表达式的名称和查询表达式。
                     </p>
                     <p>查询定义存储在Text数据字典中。任何用户都可以引用存储的查询表达式。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-64145B72-2EED-486C-861F-25FECC27DE75">定义存储的查询表达式</a></p>
                        </li>
                        <li>
                           <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-A5CF4C43-0207-48B1-A24F-DEDB804A6F3F">SQE示例</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-45028739-AA18-4D55-B03A-22644EC2FAC0__GUID-078BEB19-F21D-447C-A2B5-236251678C84">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../ccref/CTX_QUERY-package.html#CCREF0912" target="_blank"><span class="italic">Oracle Text Reference</span></a>了解有关<code class="codeph">CTX_QUERY.STORE_SQE</code>语法的更多信息</p>
                     </div>
                  </div><a id="CCAPP9180"></a><div class="props_rev_3"><a id="GUID-64145B72-2EED-486C-861F-25FECC27DE75" name="GUID-64145B72-2EED-486C-861F-25FECC27DE75"></a><h5 id="CCAPP-GUID-64145B72-2EED-486C-861F-25FECC27DE75" class="sect5"><span class="enumeration_section">7.1.7.1</span>定义存储的查询表达式</h5>
                     <div>
                        <div class="section">
                           <p>定义和使用<a id="d19592e1124" class="indexterm-anchor"></a>存储查询表达式：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>调用<code class="codeph">CTX_QUERY.STORE_SQE</code>以存储文本列的查询。使用<code class="codeph">STORE_SQE,</code>可以为存储的查询表达式和查询表达式指定名称。</span></li>
                           <li class="stepexpand"><span>使用<code class="codeph">SQE</code>运算符在查询表达式中调用存储的查询表达式。Oracle Text以返回常规查询结果的方式返回存储的查询表达式的结果。调用存储的查询表达式时将评估查询。</span><div>
                                 <p>您可以使用<code class="codeph">REMOVE_SQE.</code>删除存储的查询表达式<code class="codeph">REMOVE_SQE.</code></p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="CCAPP9181"></a><div class="props_rev_3"><a id="GUID-A5CF4C43-0207-48B1-A24F-DEDB804A6F3F" name="GUID-A5CF4C43-0207-48B1-A24F-DEDB804A6F3F"></a><h5 id="CCAPP-GUID-A5CF4C43-0207-48B1-A24F-DEDB804A6F3F" class="sect5"><span class="enumeration_section">7.1.7.2</span> SQE示例</h5>
                     <div>
                        <p>以下示例创建一个名为<span class="italic">disaster</span>的存储查询表达式，用于搜索包含<span class="italic">龙卷风，飓风</span>或<span class="italic">地震</span>一词的文档<span class="italic">：</span></p><pre class="oac_no_warn" dir="ltr">开始ctx_query.store_sqe（'灾难'，'龙卷风|飓风|地震'）;结束;</pre><p>要在表达式中执行此查询，请按如下所示编写查询：</p><pre class="oac_no_warn" dir="ltr">SELECT SCORE（1），来自新闻的标题WHERE CONTAINS（文本，'SQE（灾难）'，1）&gt; 0 ORDER BY SCORE（1）;</pre><div class="infoboxnotealso" id="GUID-A5CF4C43-0207-48B1-A24F-DEDB804A6F3F__GUID-C2AD4E10-EF88-43D6-8CCF-CCA3B98F7387">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../ccref/CTX_QUERY-package.html#CCREF0912" target="_blank"><span class="italic">Oracle Text Reference</span></a>了解有关<code class="codeph">CTX_QUERY.STORE_SQE</code>语法的更多信息</p>
                        </div>
                     </div>
                  </div>
               </div><a id="CCAPP9182"></a><div class="props_rev_3"><a id="GUID-F32E7A4D-0553-464B-8F53-0929AED185C0" name="GUID-F32E7A4D-0553-464B-8F53-0929AED185C0"></a><h4 id="CCAPP-GUID-F32E7A4D-0553-464B-8F53-0929AED185C0" class="sect4"><span class="enumeration_section">7.1.8</span>在CONTAINS中调用PL / SQL函数</h4>
                  <div>
                     <p>只要函数满足在SQL语句中命名的要求，就可以直接在<code class="codeph">CONTAINS</code>子句中调用用户定义的函数。调用者还必须具有该函数的<code class="codeph">EXECUTE</code>特权。
                     </p>
                     <p>例如，如果<code class="codeph">french</code>函数返回法语等效的英语单词，则可以通过编写以下内容搜索法语单词for <span class="italic">cat</span> ：</p><pre class="oac_no_warn" dir="ltr">SELECT SCORE（1），新闻标题WHERE CONTAINS（文本，法语（'cat'），1）&gt; 0 ORDER BY SCORE（1）;</pre><div class="infoboxnotealso" id="GUID-F32E7A4D-0553-464B-8F53-0929AED185C0__GUID-CCE0573F-88BD-49E6-83B7-89BE2EDCBA18">
                        <p class="notep1">也可以看看：</p>
                        <p>有关从SQL创建用户函数和调用用户函数的更多信息，请<a href="../sqlrf/About-User-Defined-Functions.html#SQLRF-GUID-4EB3E236-8216-471C-BA44-23D87BDFEA67" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                  </div>
               </div><a id="CCAPP9183"></a><div class="props_rev_3"><a id="GUID-51035E4B-CB25-48CE-8196-3C5E859CEE00" name="GUID-51035E4B-CB25-48CE-8196-3C5E859CEE00"></a><h4 id="CCAPP-GUID-51035E4B-CB25-48CE-8196-3C5E859CEE00" class="sect4"><span class="enumeration_section">7.1.9</span>优化响应时间</h4>
                  <div>
                     <p>当您需要来自命中列表的得分最高的文档时，针对响应时间优化的<code class="codeph">CONTAINS</code>查询提供了快速解决方案。
                     </p>
                     <p>以下示例返回前20个匹配作为输出。此示例使用<code class="codeph">FIRST_ROWS</code> （n）提示和游标。
                     </p><pre class="oac_no_warn" dir="ltr">声明光标c是select / * + FIRST_ROWS（20）* / title，得分（1）得分来自新闻，其中包含（txt_col，'dog'，1）&gt; 0 order by score（1）desc; c循环中的c1开始dbms_output.put_line（c1.score ||'：'|| substr（c1.title，1,50））;当c％rowcount = 21时退出;结束循环;结束; /</pre><p>以下因素也会影响查询响应时间：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>表统计的集合</p>
                        </li>
                        <li>
                           <p>内存分配</p>
                        </li>
                        <li>
                           <p>排序</p>
                        </li>
                        <li>
                           <p>基表中存在大对象列</p>
                        </li>
                        <li>
                           <p>分区</p>
                        </li>
                        <li>
                           <p>排比</p>
                        </li>
                        <li>
                           <p>查询中的术语扩展数</p>
                           <div class="infoboxnotealso" id="GUID-51035E4B-CB25-48CE-8196-3C5E859CEE00__GUID-28B76A9E-A57D-4B91-B1CE-345F90EF9183">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="tuning-oracle-text.html#GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3">关于查询性能的常见问题解答</a> ”</span></p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="CCAPP9185"></a><div class="props_rev_3"><a id="GUID-246DE264-3FE9-4FC0-A2DB-C12D410A187B" name="GUID-246DE264-3FE9-4FC0-A2DB-C12D410A187B"></a><h4 id="CCAPP-GUID-246DE264-3FE9-4FC0-A2DB-C12D410A187B" class="sect4"><span class="enumeration_section">7.1.10</span>计数命中</h4>
                  <div>
                     <p>在PL <code class="codeph">CTX_QUERY.COUNT_HITS</code>中使用<code class="codeph">CTX_QUERY.COUNT_HITS</code>或在SQL <code class="codeph">SELECT</code>语句中使用<code class="codeph">COUNT(*)</code>来计算仅包含<code class="codeph">CONTAINS</code>谓词的查询返回的命中数。
                     </p>
                     <p>如果您想要粗略计数， <code class="codeph">CTX_QUERY.COUNT_HITS</code>在估计模式下使用<code class="codeph">CTX_QUERY.COUNT_HITS</code> （ <code class="codeph">EXACT</code>参数设置为<code class="codeph">FALSE</code> ）。关于响应时间，这是您可以获得的最快计数。
                     </p>
                     <p>在<code class="codeph">SELECT</code>语句中使用<code class="codeph">COUNT(*)</code>函数来计算从包含结构化谓词的查询返回的命中数。
                     </p>
                     <p>要查找包含单词<span class="italic">oracle</span>的文档数，请输入带有<code class="codeph">SQL COUNT</code>函数的查询。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT count（*）FROM news WHERE CONTAINS（text，'oracle'，1）&gt; 0;</pre><p>要查找具有结构化谓词的查询返回的文档数，请使用<code class="codeph">COUNT(*).</code></p><pre class="oac_no_warn" dir="ltr">SELECT COUNT（*）FROM news WHERE CONTAINS（text，'oracle'，1）&gt; 0 and author ='jones';</pre><p>要查找包含单词<span class="italic">oracle</span>的文档数，请使用<code class="codeph">COUNT_HITS.</code></p><pre class="oac_no_warn" dir="ltr">声明计数; begin count：= ctx_query.count_hits（index_name =&gt; my_index，text_query =&gt;'oracle'，exact =&gt; TRUE）; dbms_output.put_line（'带有oracle的文档数：'）; DBMS_OUTPUT.PUT_LINE（计数）;结束;</pre><div class="infoboxnotealso" id="GUID-246DE264-3FE9-4FC0-A2DB-C12D410A187B__GUID-3E1EB8C9-197C-43A4-9968-3F45B5E9E849">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../ccref/CTX_QUERY-package.html#CCREF-GUID-E7FF0A48-E048-4187-A68D-17BD8387F3CF" target="_blank"><span class="italic">Oracle Text Reference</span></a>了解有关<code class="codeph">CTX_QUERY.COUNT_HITS</code>语法的更多信息</p>
                     </div>
                  </div>
               </div><a id="CCAPP9189"></a><div class="props_rev_3"><a id="GUID-2E1DB163-02FE-4B2E-AF28-0C33E09926BE" name="GUID-2E1DB163-02FE-4B2E-AF28-0C33E09926BE"></a><h4 id="CCAPP-GUID-2E1DB163-02FE-4B2E-AF28-0C33E09926BE" class="sect4"><span class="enumeration_section">7.1.11</span>使用DEFINESCORE和DEFINEMERGE进行用户定义的评分</h4>
                  <div>
                     <p>使用<a id="d19592e1648" class="indexterm-anchor"></a> <code class="codeph">DEFINESCORE</code>运算符用于定义如何计算术语或短语的分数。该<a id="d19592e1653" class="indexterm-anchor"></a> <code class="codeph">DEFINEMERGE</code>运算符定义如何合并<code class="codeph">AND</code>和<code class="codeph">OR</code>运算符的子元素的分数。您还可以使用带有<code class="codeph">SDATA</code>的替代评分模板来影响文档的最终评分。
                     </p>
                     <div class="infoboxnotealso" id="GUID-2E1DB163-02FE-4B2E-AF28-0C33E09926BE__GUID-710D3BBF-2DEF-419D-800A-4976F1D3BD35">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="querying-with-oracle-text.html#GUID-89EAF7C5-AFB6-469E-8948-7F7A66DBBBB4">替代和用户定义的评分</a> ”，</span>用于获取有关替代评分模板的信息</p>
                           </li>
                           <li>
                              <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF-GUID-F6773261-6BA0-4F99-A865-E2E3D827D058" target="_blank"><span class="italic">Oracle Text Reference</span></a>了解有关<code class="codeph">DEFINESCORE</code>和<code class="codeph">DEFINEMERGE</code>语法的更多信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CCAPP9505"></a><a id="CCAPP9190"></a><div class="props_rev_3"><a id="GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016" name="GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016"></a><h3 id="CCAPP-GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016" class="sect3"><span class="enumeration_section">7.2</span> CTXCAT语法</h3>
               <div>
                  <p><code class="codeph">CTXCAT</code>语法是<code class="codeph">CTXCAT</code>的默认语法<code class="codeph">CATSEARCH.</code>该语法支持逻辑运算，例如<code class="codeph">AND</code>和<code class="codeph">OR,</code>以及短语查询。
                  </p>
                  <p><code class="codeph">CATSEARCH</code>查询运算符具有以下语法：</p>
                  <div class="tblformal" id="GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016__GUID-ECD647BE-A1A0-4726-B7EC-5929D5BBA649">
                     <p class="titleintable">表7-2 CATSEARCH查询运算符语法</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="CATSEARCH查询运算符语法" width="100%" border="1" summary="This table shows the various CATSEARCH query operators and shows how each works." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d19592e1800">手术</th>
                              <th align="left" valign="bottom" width="19%" id="d19592e1803">句法</th>
                              <th align="left" valign="bottom" width="50%" id="d19592e1806">操作说明</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19592e1811" headers="d19592e1800 ">
                                 <p>逻辑<code class="codeph">AND</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d19592e1811 d19592e1803 ">
                                 <p>ABC</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d19592e1811 d19592e1806 ">
                                 <p>返回包含a，b和c的行。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19592e1823" headers="d19592e1800 ">
                                 <p>逻辑<code class="codeph">OR</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d19592e1823 d19592e1803 ">
                                 <p>a | b | C</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d19592e1823 d19592e1806 ">
                                 <p>返回包含a，b或c的行。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19592e1835" headers="d19592e1800 ">
                                 <p>逻辑<code class="codeph">NOT</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d19592e1835 d19592e1803 ">
                                 <p>a  -  b</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d19592e1835 d19592e1806 ">
                                 <p>返回包含a而不是b的行。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19592e1847" headers="d19592e1800 ">
                                 <p>连字符没有空格</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d19592e1847 d19592e1803 ">
                                 <p>AB</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d19592e1847 d19592e1806 ">
                                 <p>连字符作为常规字符处理。</p>
                                 <p>例如，如果将连字符定义为跳过连接，则将诸如<span class="italic">副总统之</span>类的单词视为单个查询术语<span class="italic">副主席</span> <span class="italic">。</span></p>
                                 <p>同样，如果您将连字符定义为printjoin，那么像<span class="italic">副总统</span>这样的词会被视为<span class="italic">副总统</span> ，并且<code class="codeph">CTXCAT</code>查询语言中有<code class="codeph">CTXCAT</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19592e1875" headers="d19592e1800 ">
                                 <p>“”</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d19592e1875 d19592e1803 ">
                                 <p>“ab c”</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d19592e1875 d19592e1806 ">
                                 <p>返回包含短语“ab c”的行。</p>
                                 <p>例如，输入“Sony CD Player”表示返回包含此单词序列的所有行。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19592e1887" headers="d19592e1800 ">
                                 <p>（）</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d19592e1887 d19592e1803 ">
                                 <p>（AB）| C</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d19592e1887 d19592e1806 ">
                                 <p>括号组操作。此查询等同于<code class="codeph">CONTAINS</code>查询（A和B）| C。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><a id="d19592e1900" class="indexterm-anchor"></a><a id="d19592e1902" class="indexterm-anchor"></a>要在<code class="codeph">CATSEARCH</code>查询中使用<code class="codeph">CONTEXT</code>语法，请使用<code class="codeph">text_query</code>参数中的查询模板规范。
                  </p>
                  <p>当您需要使用<code class="codeph">CTXCAT</code>索引输入邻近，同义词或<code class="codeph">ABOUT</code>查询时，可以使用<code class="codeph">CONTAINS</code>语法。
                  </p>
                  <div class="infoboxnotealso" id="GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016__GUID-B6FFB99A-3512-48E2-8519-AC101F83FB0A">
                     <p class="notep1">也可以看看：</p>
                     <p>有关使用这些运算符的更多信息，请参阅<a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF0103" target="_blank"><span class="italic">Oracle Text Reference</span></a></p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
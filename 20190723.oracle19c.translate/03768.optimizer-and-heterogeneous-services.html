<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle&#39;s optimizer can be used with Heterogeneous Services."></meta>
      <meta name="description" content="Oracle&#39;s optimizer can be used with Heterogeneous Services."></meta>
      <title>Oracle的优化程序和异构服务</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Heterogeneous Connectivity User&#39;s Guide"></meta>
      <meta property="og:description" content="Oracle&#39;s optimizer can be used with Heterogeneous Services."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Heterogeneous Connectivity User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="heterogeneous-connectivity-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T12:43:36-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96192-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="distributed-environment_sql_constraints.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-heterogeneous-services-agents.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Heterogeneous Connectivity User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="HETER"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="distributed-environment_sql_constraints.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-heterogeneous-services-agents.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库异构连接用户指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-database-gateways-features.html" property="item" typeof="WebPage"><span property="name">Oracle数据库网关的功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle的优化程序和异构服务</li>
            </ol>
            <a id="GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D" name="GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D"></a><a id="HETER4084"></a>
            
            <h2 id="HETER-GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D" class="sect2">Oracle的优化程序和异构服务</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle的优化器可以与异构服务一起使用。</p>
               <p>异构服务收集相应非Oracle系统表的某些表和索引统计信息，并将此信息传递回Oracle数据库。基于Oracle成本的优化程序在构建查询计划时使用此信息。</p>
               <p>基于成本的优化器还有其他一些优化措施。最重要的是远程排序消除和远程连接。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="optimizer-and-heterogeneous-services.html#GUID-13DB0D52-07F2-4BEA-8054-A3A75069344D">示例：使用索引和表统计信息</a><br>使用索引和表统计信息的示例。
                  </li>
                  <li class="ulchildlink"><a href="optimizer-and-heterogeneous-services.html#GUID-76F922F2-21A5-4DEC-8EDB-4A8D54D8B94D">示例：远程联接优化</a><br>使用远程联接优化功能的示例。
                  </li>
                  <li class="ulchildlink"><a href="optimizer-and-heterogeneous-services.html#GUID-97865FC3-129C-412B-A6F8-D881A029D37B">非Oracle访问的优化程序限制</a><br>非Oracle访问的优化程序限制示例。
                  </li>
                  <li class="ulchildlink"><a href="optimizer-and-heterogeneous-services.html#GUID-872A8AFA-5FF1-4D4C-8E02-532B117F091C">解释计划考虑</a><br>解释计划操作可以在同构Oracle分布式环境中分发或发送到远程Oracle，而在异构环境中则不可能。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="oracle-database-gateways-features.html#GUID-13FD7B76-9463-4EE3-8DDA-13C1AA7C815C">Oracle数据库网关的功能</a></p>
                  </div>
               </div>
            </div>
            <a id="HETER4085"></a><div class="props_rev_3"><a id="GUID-13DB0D52-07F2-4BEA-8054-A3A75069344D" name="GUID-13DB0D52-07F2-4BEA-8054-A3A75069344D"></a><h3 id="HETER-GUID-13DB0D52-07F2-4BEA-8054-A3A75069344D" class="sect3">示例：使用索引和表统计信息</h3>
               <div>
                  <p>使用索引和表统计信息的示例。</p>
                  <div class="section">
                     <p>请考虑以下语句，其中您在Oracle数据库中创建一个包含10行的表：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE T1（C1编号）;</pre><p>使用<code class="codeph">DBMS_STATS</code>包分析表。例如：</p><pre class="oac_no_warn" dir="ltr">DBMS_STATS.GATHER_TABLE_STATS（'SCOTT'，'T1'）; DBMS_STATS.GENERATE_STATS（'SCOTT'，'T1'）;</pre><p>前面的示例假定模式名称为<code class="codeph">SCOTT</code> ，表名称为<code class="codeph">T1</code> 。
                     </p>
                     <p>在非Oracle系统中创建一个包含1000行的表。</p>
                     <p>发出以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">选择一个。* FROM remote_t1 @ remote_db a，T1 b WHERE a。C1 = b。C1;</pre><p>Oracle优化器向代理发出以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">SELECT C1 FROM remote_t1 @ remote_db;</pre><p>这将从非Oracle系统中获取所有1000行，并在Oracle数据库中执行连接。</p>
                     <p>如果我们在表<code class="codeph">remote_t1</code>的列<code class="codeph">C1</code>上添加唯一索引，并再次发出相同的SQL语句，则代理会在本地<code class="codeph">t1</code>为<code class="codeph">C1</code>每个值接收以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">...SELECT C1 FROM remote_t1 @ remote_db WHERE C1 =？; ...</pre><div class="infoboxnote" id="GUID-13DB0D52-07F2-4BEA-8054-A3A75069344D__GUID-7039EB0A-0C02-4828-ABA6-64FA55971DA3">
                        <p class="notep1">注意：</p>
                        <p><code class="codeph">？</code> 是绑定参数标记。此外，仅为嵌套循环连接方法生成包含Oracle生成的绑定变量的连接谓词。
                        </p>
                     </div>
                     <p>要验证SQL执行计划，请为SQL语句生成解释计划。首先，在<code class="codeph">admin</code>目录中加载<code class="codeph">utlxplan</code> 。
                     </p>
                     <p>输入以下内容：</p><pre class="oac_no_warn" dir="ltr">选择的解释计划a。* FROM remote_t1 @ remote_db a，T1 b WHERE a。C1 = b。C1;</pre><p>输入以下语句执行<code class="codeph">utlxpls</code>实用程序脚本。
                     </p><pre class="oac_no_warn" dir="ltr">@utlxpls</pre><p><code class="codeph">OPERATION REMOTE</code>表示正在引用远程SQL。
                     </p>
                     <p>要找出发送的语句，请输入以下语句：</p><pre class="oac_no_warn" dir="ltr">选择ID，其他来自PLAN_TABLE，其中OPERATION ='REMOTE';</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-13DB0D52-07F2-4BEA-8054-A3A75069344D__SEETHEORACLEDATABASEPLSQLPACKAGESAN-E0BC7781">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">DBMS_STATS</code>包的更多信息，请<a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a> 。
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizer-and-heterogeneous-services.html#GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D" title="Oracle的优化器可以与异构服务一起使用。">Oracle的优化程序和异构服务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="HETER4086"></a><div class="props_rev_3"><a id="GUID-76F922F2-21A5-4DEC-8EDB-4A8D54D8B94D" name="GUID-76F922F2-21A5-4DEC-8EDB-4A8D54D8B94D"></a><h3 id="HETER-GUID-76F922F2-21A5-4DEC-8EDB-4A8D54D8B94D" class="sect3">示例：远程联接优化</h3>
               <div>
                  <p>使用远程联接优化功能的示例。</p>
                  <div class="section">
                     <p>以下是Oracle数据库的远程连接优化功能的示例。</p>
                     <div class="infoboxnote" id="GUID-76F922F2-21A5-4DEC-8EDB-4A8D54D8B94D__GUID-D502C6AE-65DD-47B2-93E4-E19FC25DEF2C">
                        <p class="notep1">注意：</p>
                        <p>使用非Oracle系统中的表的说明计划可能与使用本地或远程Oracle表扫描的类似语句不同。这是因为Oracle对非Oracle表可用的统计信息存在限制。最重要的是，列选择性不适用于非Oracle表的非唯一索引。由于可用统计信息的限制，以下示例不一定是您在进行远程连接时遇到的问题，仅供参考。</p>
                     </div>
                     <p>请考虑以下示例：</p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN FOR SELECT e.ename，d.dname，f.ename，f.deptno FROM dept d，emp @ <span class="italic">remote_db</span> e，emp @ <span class="italic">remote_db</span> f WHERE e.mgr = f.empno AND e.deptno = d.deptno AND e .empno = f.empno; @utlxpls</pre><p>您应该看到类似于以下内容的输出：</p><pre class="oac_no_warn" dir="ltr">PLAN_TABLE_OUTPUT ------------------------------------------------- ------------------------------- ------------------- -------------------------------------------------- ------ | Id |操作|名称|行|字节|成本| Inst | IN-OUT | -------------------------------------------------- ------------------------- | 0 |选择声明| | 2000年| 197K | 205 | | * 1 | HASH JOIN | | 2000年| 197K | 205 | | 2 |表访问完全| DEPT | 21 | 462 | 2 | | * 3 | HASH JOIN | | 2000年| 154K | 201 | | 4 | REMOTE | | 2000年| 66000 | 52 | | 5 | REMOTE | | 2000年| 92000 | 52 | -------------------------------------------------- ------------------------- PLAN_TABLE_OUTPUT ------------------------ -------------------------------------------------- ------查询块名称/提示别名（由操作ID标识）：------------------------------- ---------------------------- 1  -  sel $ 1 / D 2  -  sel $ 1 / D 3  -  sel $ 1 / F 4  -  sel $ 1 / F 5  -  sel $ 1 / E谓词信息（由操作ID标识）：PLAN_TABLE_OUTPUT -------------------------------- ------------------------------------------------  - ------------------------------------------------- 1 - 访问（“E”。“DEPTNO”=“D”。“DEPTNO”）3  - 访问（“E”。“MGR”=“F”。“EMPNO”和“E”。“EMPNO”=“F” “EMPNO”）</pre><p>发出以下声明：</p><pre class="oac_no_warn" dir="ltr">SET long 300 SELECT其他FROM plan_table WHERE operation ='REMOTE';</pre><p>您应该看到类似于以下内容的输出：</p><pre class="oac_no_warn" dir="ltr">OTHER ------------------------------------------------- -------------------------------选择“EMPNO”，“ENAME”，“DEPTNO”来自“EMP”选择“EMPNO “，”ENAME“，”MGR“，”DEPTNO“来自”EMP“选择”EMPNO“，”ENAME“，”DEPTNO“来自”EMP“选择”EMPNO“，”ENAME“，”MGR“，”DEPTNO“FROM “EMP”</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizer-and-heterogeneous-services.html#GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D" title="Oracle的优化器可以与异构服务一起使用。">Oracle的优化程序和异构服务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="HETER4087"></a><div class="props_rev_3"><a id="GUID-97865FC3-129C-412B-A6F8-D881A029D37B" name="GUID-97865FC3-129C-412B-A6F8-D881A029D37B"></a><h3 id="HETER-GUID-97865FC3-129C-412B-A6F8-D881A029D37B" class="sect3">非Oracle访问的优化程序限制</h3>
               <div>
                  <p>非Oracle访问的优化程序限制示例。</p>
                  <p>以下是非Oracle系统访问的优化程序限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>远程对象没有列统计信息。这可能导致执行计划不佳。验证执行计划并使用提示来改进计划。</p>
                     </li>
                     <li>
                        <p>没有优化器提示强制远程连接。但是，有一个远程查询块优化可用于略微重写查询以获得远程连接。</p>
                        <p>上一节中的示例可以重写为以下格式：</p><pre class="oac_no_warn" dir="ltr">SELECT v.ename，d.dname，d.deptno FROM dept d，（SELECT / * + NO_MERGE * / e.deptno deptno，e.ename ename emp @ remote_db e，emp @ remote_db f WHERE e.mgr = f.empno AND e.empno = f.empno;）WHERE v.deptno = d.deptno;</pre></li>
                  </ul>
                  <p>此示例保证远程连接，因为它已使用<code class="codeph">NO_MERGE</code>提示在嵌套查询中隔离。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizer-and-heterogeneous-services.html#GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D" title="Oracle的优化器可以与异构服务一起使用。">Oracle的优化程序和异构服务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="HETER4088"></a><div class="props_rev_3"><a id="GUID-872A8AFA-5FF1-4D4C-8E02-532B117F091C" name="GUID-872A8AFA-5FF1-4D4C-8E02-532B117F091C"></a><h3 id="HETER-GUID-872A8AFA-5FF1-4D4C-8E02-532B117F091C" class="sect3">解释计划考虑</h3>
               <div>
                  <p>解释计划操作可以在同构Oracle分布式环境中分发或发送到远程Oracle，而在异构环境中则不可能。</p>
                  <p>虽然Oracle数据库网关将统计信息返回给本地Oracle数据库优化器以生成解释计划，但与具有类似数据和索引信息的同类Oracle分布式环境相比，它可能无法生成准确的解释计划。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizer-and-heterogeneous-services.html#GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D" title="Oracle的优化器可以与异构服务一起使用。">Oracle的优化程序和异构服务</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
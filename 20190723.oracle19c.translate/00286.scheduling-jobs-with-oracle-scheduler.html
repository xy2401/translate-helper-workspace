<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can create, run, and manage jobs with Oracle Scheduler."></meta>
      <meta name="description" content="You can create, run, and manage jobs with Oracle Scheduler."></meta>
      <title>使用Oracle Scheduler调度作业</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Administrator’s Guide "></meta>
      <meta property="og:description" content="You can create, run, and manage jobs with Oracle Scheduler."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96348-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-scheduler-concepts.html" title="Previous" type="text/html"></link>
      <link rel="next" href="administering-oracle-scheduler.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADMIN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-scheduler-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="administering-oracle-scheduler.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-resource-management-and-task-scheduling.html" property="item" typeof="WebPage"><span property="name">数据库资源管理和任务调度</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle Scheduler调度作业</li>
            </ol>
            <a id="GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" name="GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6"></a><a id="ADMIN034"></a>
            
            <h2 id="ADMIN-GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" class="sect2"><span class="enumeration_chapter">29</span>使用Oracle Scheduler调度作业</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以使用Oracle Scheduler创建，运行和管理作业。</p>
               <div class="infoboxnote" id="GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6__GUID-31FC7070-134E-4BC1-800D-3FED3CE2842E">
                  <p class="notep1">注意：</p>
                  <p>本章介绍如何使用<code class="codeph">DBMS_SCHEDULER</code>包来处理Scheduler对象。您可以使用Oracle Enterprise Manager Cloud Control完成相同的任务，并使用Oracle SQL Developer完成许多这些任务。
                  </p>
                  <p>有关<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72235" target="_blank"><span class="italic">Oracle</span></a> Scheduler页面的信息，请参阅有关<code class="codeph">DBMS_SCHEDULER</code>信息的<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72235" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a>以及Cloud Control联机帮助。
                  </p>
               </div>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-38BE714B-5BF1-477D-98DE-7FF761E62164">关于调度程序对象及其命名</a><br>您可以通过创建和管理一组Scheduler对象来操作Oracle Scheduler。每个Scheduler对象都是<code class="codeph">[schema.]name</code>形式的完整数据库模式对象。Scheduler对象完全遵循数据库对象的命名规则，并与其他数据库对象共享SQL命名空间。
                  </li>
                  <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01">创建，运行和管理作业</a><br>作业是计划和程序的组合，以及程序所需的任何其他参数。
                  </li>
                  <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4ADA6AC6-FEBA-4D06-8B55-672A88481DEE">创建和管理程序以定义作业</a><br>程序是关于特定任务的元数据的集合。您可以选择使用程序来帮助定义作业。
                  </li>
                  <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7F50C410-8818-49C3-B762-82BB24D86719">创建和管理计划以定义作业</a><br>您可以选择使用计划对象（计划）来定义应该运行作业的时间。通过在数据库中创建和保存计划作为对象，可以在用户之间共享计划。
                  </li>
                  <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-31F260EA-48D0-470A-B66D-E906BA50CAD5">使用事件启动作业</a><br>Oracle Scheduler可以在发送事件时启动作业。事件是一个应用程序或系统进程发送给另一个应用程序的消息。
                  </li>
                  <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119">创建和管理作业链</a><br>工作链是一组命名的任务，它们链接在一起以实现组合目标。
                  </li>
                  <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7157CBEA-94FF-45FA-89B8-32FA1D08B6BF">使用不兼容性定义</a><br>不兼容性定义（或不兼容性）指定不兼容的作业或程序，其中一次只能运行一个组。
                  </li>
                  <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7C9BBC40-0DE7-466E-A4EC-AFB1431136B3">管理工作资源</a><br>您可以创建和更改可供作业使用的资源，并控制作业可用的指定资源的数量。
                  </li>
                  <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-15F06ABD-CCC5-453E-AB86-F807A9680163">优先考虑工作</a><br>使用三个Scheduler对象优先处理Oracle Scheduler作业：作业类，窗口和窗口组。这些对象通过将作业与数据库资源管理器使用者组关联来确定作业的优先级。反过来，这又控制了分配给这些作业的资源量。此外，如果组中的所有作业都分配了相同的资源级别，则作业类使您可以在一组作业中设置相对优先级。
                  </li>
                  <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E9B234FF-C7F3-44B0-AEC8-A997353C414F">监控工作</a><br>您可以通过多种不同方式监控作业。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="database-resource-management-and-task-scheduling.html#GUID-50F0AB88-007D-4A11-BCBC-78AE0367F8FD" title="您可以管理自动数据库维护任务，数据库资源和任务计划。">数据库资源管理和任务调度</a></p>
                  </div>
               </div>
            </div>
            <a id="ADMIN12381"></a><div class="props_rev_3"><a id="GUID-38BE714B-5BF1-477D-98DE-7FF761E62164" name="GUID-38BE714B-5BF1-477D-98DE-7FF761E62164"></a><h3 id="ADMIN-GUID-38BE714B-5BF1-477D-98DE-7FF761E62164" class="sect3"><span class="enumeration_section">29.1</span>关于调度程序对象及其命名</h3>
               <div>
                  <p>您可以通过创建和管理一组Scheduler对象来操作Oracle Scheduler。每个Scheduler对象都是<code class="codeph">[schema.]name</code>形式的完整数据库模式对象。Scheduler对象完全遵循数据库对象的命名规则，并与其他数据库对象共享SQL命名空间。
                  </p>
                  <p>遵循SQL命名规则，在<code class="codeph">DBMS_SCHEDULER</code>包中命名Scheduler对象。默认情况下，Scheduler对象名称是大写的，除非它们被双引号括起来。例如，在创建作业时， <code class="codeph">job_name =&gt; 'my_job'</code>与<code class="codeph">job_name =&gt; 'My_Job'</code>和<code class="codeph">job_name =&gt; 'MY_JOB'</code> ，但与<code class="codeph">job_name =&gt; '"my_job"'</code> 。在<code class="codeph">DBMS_SCHEDULER</code>包中使用逗号分隔的Scheduler对象名列表的情况下，也遵循这些命名规则。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-38BE714B-5BF1-477D-98DE-7FF761E62164__GUID-479D4B6D-8538-4569-AC65-4BB61161FA85">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关命名对象的详细信息，请<a href="../sqlrf/Database-Object-Names-and-Qualifiers.html#SQLRF00223" target="_blank"><span class="italic">参见Oracle Database SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-32E9BB6D-C548-4846-80E3-E68BFF82A8FA" title="您可以使用作业和其他调度程序对象进行任务调度。">关于作业和支持调度程序对象</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" title="您可以使用Oracle Scheduler创建，运行和管理作业。">使用Oracle Scheduler调度作业</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN12382"></a><div class="props_rev_3"><a id="GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" name="GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01"></a><h3 id="ADMIN-GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" class="sect3"><span class="enumeration_section">29.2</span>创建，运行和管理作业</h3>
               <div>
                  <p>作业是计划和程序的组合，以及程序所需的任何其他参数。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-8B0A2805-62AD-4587-B7E2-3F52037D97FF">工作任务及其程序</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见作业任务。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9">创造就业机会</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control创建作业。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-FAD9894B-0857-41BD-B9C9-6FAA951E7D40">改变工作</a><br>您可以通过修改其属性来更改作业。您可以使用<code class="codeph">DBMS_SCHEDULER</code>包或Cloud Control中的<code class="codeph">SET_ATTRIBUTE</code> ， <code class="codeph">SET_ATTRIBUTE_NULL</code>或<code class="codeph">SET_JOB_ATTRIBUTES</code>过程执行此操作。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-1D534D91-17B2-4405-8D66-800FE824669A">运行工作</a><br>工作可以通过几种不同的方式运行。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-193EEB8B-CE39-4F84-BD94-483337A7CEA8">停止工作</a><br>使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">STOP_JOB</code>过程停止一个或多个正在运行的作业。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-B67B8C2F-B753-4509-927A-E175B6DA2193">停止外部工作</a><br>调度程序为外部作业的实现者提供了一种机制，可以在<code class="codeph">force</code>设置为<code class="codeph">FALSE</code>时<code class="codeph">STOP_JOB</code>时在外部作业之后正常清理。</li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-F11AFFEF-69B4-4C5D-9B11-52C5EEA42444">停止连锁工作</a><br>如果停止指向正在运行的链的作业，则停止正在运行的链的所有步骤。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-33E699C5-E4CF-4147-B287-F56E5D4A9BA8">放弃工作</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">DROP_JOB</code>过程删除一个或多个作业。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-9B4805C7-E7F0-4EE6-B549-B141281DB805">放弃正在运行的工作</a><br>如果作业在<code class="codeph">DROP_JOB</code>过程调用时运行，则尝试删除作业失败。您可以通过设置<code class="codeph">force</code>或<code class="codeph">defer</code>选项来修改此默认行为。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-13969A6C-B6C8-4A9A-894E-4997F2FBA615">删除多个工作</a><br>指定要删除的多个作业时，如果其中一个作业发生错误，则<code class="codeph">DBMS_SCHEDULER.DROP_JOB</code>过程的<code class="codeph">commit_semantics</code>参数将确定结果。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5BA02BF1-624B-401C-859E-D442E2867425">禁用作业</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">DISABLE</code>过程禁用一个或多个作业。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-88667391-03D3-4245-913D-C1FA760907FD">启用工作</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">ENABLE</code>过程启用一个或多个作业。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-75F146D6-FE93-4423-8051-DE580458A48F">复制工作</a><br>使用<code class="codeph">DBMS_SCHEDULER</code>或Cloud Control中的<code class="codeph">COPY_JOB</code>过程复制作业。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01__GUID-52A020FC-E985-4D20-8BFF-C50C07ACC8DF">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-B1913DD0-9367-4E80-A22B-CA668B0C68AA" title="作业对象（作业）是描述用户定义任务的元数据集合。它定义了必须执行的内容（操作），何时（一次性或定期调度或触发事件），何处（目标）以及凭据。作业具有所有者，该所有者是创建它的模式。">工作</a> ”</span>是对工作的概述。
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" title="您可以使用Oracle Scheduler创建，运行和管理作业。">使用Oracle Scheduler调度作业</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13087"></a><a id="ADMIN12383"></a><div class="props_rev_3"><a id="GUID-8B0A2805-62AD-4587-B7E2-3F52037D97FF" name="GUID-8B0A2805-62AD-4587-B7E2-3F52037D97FF"></a><h4 id="ADMIN-GUID-8B0A2805-62AD-4587-B7E2-3F52037D97FF" class="sect4"><span class="enumeration_section">29.2.1</span>工作任务及其程序</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见作业任务。
                     </p>
                     <div class="section">
                        <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-8B0A2805-62AD-4587-B7E2-3F52037D97FF__g1033963" title="第一列列出了常见的工作任务;第2列显示执行任务的过程：第3列显示任务所需的权限。">表29-1</a>说明了常见的作业任务及其相应的过程和权限：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-8B0A2805-62AD-4587-B7E2-3F52037D97FF__g1033963">
                        <p class="titleintable">表29-1作业任务及其过程</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="工作任务及其程序" width="100%" border="1" summary="Column one lists common job tasks; column 2 displays the procedure that performs the task: column 3 displays the privileges needed for the task." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d268851e483">任务</th>
                                 <th align="left" valign="bottom" width="33%" id="d268851e486">程序</th>
                                 <th align="left" valign="bottom" width="47%" id="d268851e489">需要特权</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d268851e494" headers="d268851e483 ">
                                    <p>创造一份工作</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d268851e494 d268851e486 ">
                                    <p><code class="codeph">CREATE_JOB</code>或<code class="codeph">CREATE_JOBS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d268851e494 d268851e489 ">
                                    <p><code class="codeph">CREATE</code> <code class="codeph">JOB</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d268851e521" headers="d268851e483 ">
                                    <p>改变一份工作</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d268851e521 d268851e486 ">
                                    <p><code class="codeph">SET_ATTRIBUTE</code>或<code class="codeph">SET_JOB_ATTRIBUTES</code></p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d268851e521 d268851e489 ">
                                    <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d268851e546" headers="d268851e483 ">
                                    <p>跑一份工作</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d268851e546 d268851e486 ">
                                    <p><code class="codeph">RUN_JOB</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d268851e546 d268851e489 ">
                                    <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d268851e569" headers="d268851e483 ">
                                    <p>复制一份工作</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d268851e569 d268851e486 ">
                                    <p><code class="codeph">COPY_JOB</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d268851e569 d268851e489 ">
                                    <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d268851e592" headers="d268851e483 ">
                                    <p>放弃一份工作</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d268851e592 d268851e486 ">
                                    <p><code class="codeph">DROP_JOB</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d268851e592 d268851e489 ">
                                    <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d268851e615" headers="d268851e483 ">
                                    <p>停止工作</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d268851e615 d268851e486 ">
                                    <p><code class="codeph">STOP_JOB</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d268851e615 d268851e489 ">
                                    <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d268851e638" headers="d268851e483 ">
                                    <p>禁用工作</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d268851e638 d268851e486 ">
                                    <p><code class="codeph">DISABLE</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d268851e638 d268851e489 ">
                                    <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d268851e661" headers="d268851e483 ">
                                    <p>启用工作</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d268851e661 d268851e486 ">
                                    <p><code class="codeph">ENABLE</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d268851e661 d268851e489 ">
                                    <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>有关<span class="q"><a href="administering-oracle-scheduler.html#GUID-7E0B2F16-EE4F-42F3-BF73-82C147D5E8F1" title="Users can be granted various Scheduler privileges.">权限</a></span>的详细信息，请参阅<span class="q">“ <a href="administering-oracle-scheduler.html#GUID-7E0B2F16-EE4F-42F3-BF73-82C147D5E8F1" title="可以为用户授予各种Scheduler权限。">计划程序权限</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" title="作业是计划和程序的组合，以及程序所需的任何其他参数。">创建，运行和管理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12384"></a><div class="props_rev_3"><a id="GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9" name="GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9"></a><h4 id="ADMIN-GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9" class="sect4"><span class="enumeration_section">29.2.2</span>创建工作</h4>
                  <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control创建作业。
                  </p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-3E2A3BD2-AF92-4C95-9E28-8E57D1B8CD85">创建工作概述</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER.CREATE_JOB</code>或<code class="codeph">DBMS_SCHEDULER.CREATE_JOBS</code>过程或Cloud Control创建一个或多个作业。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0F8A1812-F9C8-4651-82D3-983AE8D1EFD0">指定作业操作，计划，程序和样式</a><br>由于<code class="codeph">CREATE_JOB</code>过程已重载，因此有几种不同的使用方法。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BCB91872-760D-43CA-A5E2-135C6A2DB2F5">指定计划程序作业凭据</a><br>Oracle Scheduler需要作业凭据才能在运行之前通过Oracle数据库或操作系统进行身份验证。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4F93F7AF-8B6E-4765-B260-1702A5D99C2A">指定目的地</a><br>对于远程外部作业和远程数据库作业，可以通过创建目标对象并将其分配给<code class="codeph">destination_name</code>作业属性来指定作业目标。具有<code class="codeph">NULL</code> <code class="codeph">destination_name</code>属性的作业在创建作业的主机上运行。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-480E01D8-F3E9-444F-B768-AB39C4144562">创建多目标作业</a><br>您可以创建在多个目标上运行的作业，但这可以从一个位置进行管理。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-B20C6C61-66B3-4A8D-8AA6-A160291110D6">设置作业参数</a><br>要设置作业参数，请使用<code class="codeph">SET_JOB_ARGUMENT_VALUE</code>或<code class="codeph">SET_JOB_ANYDATA_VALUE</code>过程或Cloud Control。<code class="codeph">SET_JOB_ANYDATA_VALUE</code>用于无法表示为<code class="codeph">VARCHAR2</code>字符串的复杂数据类型。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E4B0C33E-C597-490A-81A3-1006CED71B79">设置其他作业属性</a><br>创建作业后，可以使用<code class="codeph">SET_ATTRIBUTE</code>或<code class="codeph">SET_JOB_ATTRIBUTES</code>过程设置其他作业属性或更改属性值。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-84816118-1206-4386-B944-1E114C3EB714">创建分离的作业</a><br>分离的作业必须指向其<code class="codeph">detached</code>属性设置为<code class="codeph">TRUE</code>的程序对象（程序）。</li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-521EA034-91CD-4D43-AA13-8C8D8D69C7D4">在单个事务中创建多个作业</a><br>如果必须创建许多作业，那么如果使用<code class="codeph">CREATE_JOBS</code>过程，则可以减少事务开销并获得性能<code class="codeph">CREATE_JOBS</code> 。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5E28E1EF-CB55-49AE-B7C0-91CE6167D67C">外部工作技巧</a><br>本节包含以下示例，这些示例演示了外部作业的一些实用技术。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" title="作业是计划和程序的组合，以及程序所需的任何其他参数。">创建，运行和管理作业</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13088"></a><a id="ADMIN12501"></a><div class="props_rev_3"><a id="GUID-3E2A3BD2-AF92-4C95-9E28-8E57D1B8CD85" name="GUID-3E2A3BD2-AF92-4C95-9E28-8E57D1B8CD85"></a><h5 id="ADMIN-GUID-3E2A3BD2-AF92-4C95-9E28-8E57D1B8CD85" class="sect5"><span class="enumeration_section">29.2.2.1</span>创建作业概述</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_SCHEDULER.CREATE_JOB</code>或<code class="codeph">DBMS_SCHEDULER.CREATE_JOBS</code>过程或Cloud Control创建一个或多个作业。
                        </p>
                        <p>您使用<code class="codeph">CREATE_JOB</code>过程来创建单个作业。此过程已重载，使您可以创建基于不同对象的不同类型的作业。您可以使用<code class="codeph">CREATE_JOBS</code>过程在单个事务中创建多个作业。
                        </p>
                        <p>您必须具有<code class="codeph">CREATE</code> <code class="codeph">JOB</code>权限才能在自己的模式中创建作业，并具有<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>权限以在除<code class="codeph">SYS</code>之外的任何模式中创建作业。</p>
                        <p>对于要创建的每个作业，您可以指定作业类型，操作和计划。您还可以选择指定凭据名称，目标或目标组名称，作业类和其他属性。启用作业后，调度程序将在下一个计划的日期和时间自动运行该作业。默认情况下，作业在创建时禁用，必须启用<code class="codeph">DBMS_SCHEDULER.ENABLE</code>才能运行。您还可以将<code class="codeph">CREATE_JOB</code>过程的<code class="codeph">enabled</code>参数设置为<code class="codeph">TRUE</code> ，在这种情况下，只要您创建了作业，就可以根据其计划自动运行该作业。
                        </p>
                        <p>某些作业属性无法使用<code class="codeph">CREATE_JOB</code>设置，而必须使用<code class="codeph">DBMS_SCHEDULER.SET_ATTRIBUTE</code>设置。例如，要为作业设置<code class="codeph">logging_level</code>属性，必须在调用<code class="codeph">SET_ATTRIBUTE</code>后调用<code class="codeph">CREATE_JOB</code> 。</p>
                        <p>您可以通过指定<code class="codeph">schema.job_name</code>在另一个模式中创建作业。因此，工作的创建者不一定是工作所有者。作业所有者是创建作业的模式中的用户。作业的NLS环境在运行时是创建作业时的现有环境。
                        </p>
                        <p>以下示例演示如何创建名为<code class="codeph">update_sales</code>的数据库作业，该作业调用<code class="codeph">OPS</code>架构中的包过程以更新销售摘要表：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'update_sales'，job_type =&gt;'STORED_PROCEDURE'，job_action =&gt;'OPS.SALES_PKG.UPDATE_SALES_SUMMARY'，start_date =&gt; '28-APR-08 07.00.00 PM澳大利亚/悉尼'，repeat_interval = &gt;'FREQ = DAILY; INTERVAL = 2'，/ *隔天* / end_date =&gt; '20 -NOV-08 07.00.00 PM澳大利亚/悉尼'，auto_drop =&gt; FALSE，job_class =&gt;'batch_update_jobs'，评论= &gt;'我的新工作'）;结束; /</pre><p>由于未指定<code class="codeph">destination_name</code>属性，因此作业将在原始（本地）数据库上运行。作业以创建作业的用户身份运行。
                        </p>
                        <p><code class="codeph">repeat_interval</code>参数指定此作业每隔一天运行一次，直到达到结束日期和时间。限制重复作业运行次数的另一种方法是将其<code class="codeph">max_runs</code>属性设置为正数。
                        </p>
                        <p>默认情况下，作业在创建时被禁用。在调度程序自动运行之前，必须使用<code class="codeph">DBMS_SCHEDULER.ENABLE</code>启用它。
                        </p>
                        <p>作业设置为完成后默认自动删除。将<code class="codeph">auto_drop</code>属性设置为<code class="codeph">FALSE</code>会导致作业保持<code class="codeph">auto_drop</code> 。需要注意的是重复工作并不自动地删除，除非作业结束日期的推移，运行（最大数量<code class="codeph">max_runs</code>达到），或达到失效的最大数量（ <code class="codeph">max_failures</code> ）。
                        </p>
                        <p>创建作业后，可以使用<code class="codeph">*_SCHEDULER_JOBS</code>视图查询作业。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-3E2A3BD2-AF92-4C95-9E28-8E57D1B8CD85__GUID-515AC9DD-AA70-4C89-81C6-F72FB3D7D2C1">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BCB91872-760D-43CA-A5E2-135C6A2DB2F5" title="Oracle Scheduler需要作业凭据才能在运行之前通过Oracle数据库或操作系统进行身份验证。">指定调度程序作业凭据</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9" title="您可以使用DBMS_SCHEDULER程序包或Cloud Control创建作业。">创建作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12502"></a><div class="props_rev_3"><a id="GUID-0F8A1812-F9C8-4651-82D3-983AE8D1EFD0" name="GUID-0F8A1812-F9C8-4651-82D3-983AE8D1EFD0"></a><h5 id="ADMIN-GUID-0F8A1812-F9C8-4651-82D3-983AE8D1EFD0" class="sect5"><span class="enumeration_section">29.2.2.2</span>指定作业操作，计划，程序和样式</h5>
                     <div>
                        <p>由于<code class="codeph">CREATE_JOB</code>过程已重载，因此有几种不同的使用方法。
                        </p>
                        <p>除了将作业操作和作业重复间隔指定为作业属性（如<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-3E2A3BD2-AF92-4C95-9E28-8E57D1B8CD85" title="您可以使用DBMS_SCHEDULER.CREATE_JOB或DBMS_SCHEDULER.CREATE_JOBS过程或Cloud Control创建一个或多个作业。">创建作业概述</a> ”</span>中的示例所示）（称为<span class="italic">内联</span>指定作业操作和作业计划）之外，还可以创建指向程序对象的作业（程序）指定作业动作，指定重复间隔的计划对象（计划），或指定程序和计划。您还可以通过指定作业程序和作业样式来创建作业。
                        </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-472E2F01-93BA-4653-88F8-E853698FE299">使用命名程序创建作业</a><br>您可以通过指向命名的程序而不是内联其操作来创建作业。
                           </li>
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-EB91A776-F882-4903-BABB-A0E091091796">使用命名程序和作业样式创建作业</a><br>您可以使用命名程序和作业样式创建作业。以下作业款式可供选择： <code class="codeph">'REGULAR'</code> ，“ <code class="codeph">LIGHTWEIGHT</code> ”， <code class="codeph">'IN_MEMORY_RUNTIME'</code> ，“ <code class="codeph">IN_MEMORY_FULL</code> ”。
                           </li>
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-096BC30E-71B0-4C41-B0F1-586D37D3DA5A">使用命名计划创建作业</a><br>您可以通过指向命名的计划而不是内联其计划来创建作业。
                           </li>
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-DD541BA1-FA8C-421C-B138-C571D4B140C6">使用命名程序和计划创建作业</a><br>可以通过指向命名程序和命名计划来创建作业。
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-0F8A1812-F9C8-4651-82D3-983AE8D1EFD0__GUID-126CA465-37AD-4B25-843E-BA9174FE63A8">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-58254092-5BE5-459F-B99B-F7CE021C6C0D" title="程序对象（程序）描述了调度程序要运行的内容。">节目</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-59B6DF3D-07C5-44D8-B297-1E7CDEC2C95E" title="计划对象（计划）指定作业运行的时间和次数。">时间表</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9" title="您可以使用DBMS_SCHEDULER程序包或Cloud Control创建作业。">创建作业</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN12388"></a><div class="props_rev_3"><a id="GUID-472E2F01-93BA-4653-88F8-E853698FE299" name="GUID-472E2F01-93BA-4653-88F8-E853698FE299"></a><h6 id="ADMIN-GUID-472E2F01-93BA-4653-88F8-E853698FE299" class="sect6"><span class="enumeration_section">29.2.2.2.1</span>使用命名程序创建作业</h6>
                        <div>
                           <p>您可以通过指向命名的程序而不是内联其操作来创建作业。</p>
                           <div class="section">
                              <p>要使用命名程序创建作业，请在创建作业时在<code class="codeph">CREATE_JOB</code>过程中指定<code class="codeph">program_name</code>的值，而不要指定<code class="codeph">job_type</code> ， <code class="codeph">job_action</code>和<code class="codeph">number_of_arguments</code> 。
                              </p>
                              <p>要在创建作业时使用现有程序，作业的所有者必须是程序的所有者或具有<code class="codeph">EXECUTE</code>特权。以下PL / SQL块是<code class="codeph">CREATE_JOB</code>过程的示例，其中包含一个命名程序，该程序创建名为<code class="codeph">my_new_job1</code>的常规作业：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'my_new_job1'，program_name =&gt;'my_saved_program'，repeat_interval =&gt;'FREQ = DAILY; BYHOUR = 12'，comments =&gt;'每日中午'）;结束; /</pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0F8A1812-F9C8-4651-82D3-983AE8D1EFD0" title="由于CREATE_JOB过程已重载，因此有几种不同的使用方法。">指定作业操作，计划，程序和样式</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13918"></a><div class="props_rev_3"><a id="GUID-EB91A776-F882-4903-BABB-A0E091091796" name="GUID-EB91A776-F882-4903-BABB-A0E091091796"></a><h6 id="ADMIN-GUID-EB91A776-F882-4903-BABB-A0E091091796" class="sect6"><span class="enumeration_section">29.2.2.2.2</span>使用命名程序和作业样式创建作业</h6>
                        <div>
                           <p>您可以使用命名程序和作业样式创建作业。以下作业款式可供选择： <code class="codeph">'REGULAR'</code> ，“ <code class="codeph">LIGHTWEIGHT</code> ”， <code class="codeph">'IN_MEMORY_RUNTIME'</code> ，“ <code class="codeph">IN_MEMORY_FULL</code> ”。
                           </p>
                           <div class="section">
                              <p>默认作业样式为<code class="codeph">'REGULAR'</code> ，如果未提供作业样式，则隐含该作业样式。其他工作类型的示例如下。
                              </p>
                              <p><code class="codeph">LIGHTWEIGHT</code>工作</p>
                              <p>以下PL / SQL块创建轻量级作业。轻量级作业必须引用程序，程序类型必须为“ <code class="codeph">PLSQL_BLOCK</code> ”或“ <code class="codeph">STORED_PROCEDURE</code> ”。此外，创建作业时必须已启用该程序。
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'my_lightweight_job1'，program_name =&gt;'polling_prog_n2'，repeat_interval =&gt;'FREQ = SECONDLY; INTERVAL = 10'，end_date =&gt; '30 -APR-09 04.00.00 AM澳大利亚/悉尼'， job_style&gt; <span class="bold">'LIGHTWEIGHT'，</span>注释=&gt; '工作，它轮询装置N2每10秒'）;结束; /</pre><p><code class="codeph">IN_MEMORY_RUNTIME</code>工作</p>
                              <p>以下PL / SQL块创建内存中运行时作业。内存运行时作业与轻量级作业具有相同的要求和限制。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'my_repeat_job'，program_name =&gt;'repeat_prog'，start_date =&gt; systimestamp，repeat_interval =&gt;'freq = secondly; interval = 10'，job_style =&gt;' <span class="bold">IN_MEMORY_RUNTIME</span> '，enabled =&gt; true）;结束; /</pre><p><code class="codeph">IN_MEMORY_FULL</code>职位</p>
                              <p>以下PL / SQL创建内存中的完整作业。内存中的完整作业需要一个程序，并且不能有计划或重复间隔。它们在启用作业时自动运行，运行后将被丢弃。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'my_immediate_job'，program_name =&gt;'fast_op'，job_style =&gt;' <span class="bold">IN_MEMORY_FULL</span> '，enabled =&gt; true）;结束; /</pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-EB91A776-F882-4903-BABB-A0E091091796__GUID-340B246C-78CB-42EB-828B-1BC675367FF9">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-C38D40C9-00C7-487A-83DA-22BDB5F93B03" title="当应在短时间内创建并运行许多作业时，请使用内存中作业。内存中的作业具有稍大的内存占用，但使用内存缓存来减少磁盘访问以及创建和执行作业所需的时间。性能提升可能很大。">记忆中的工作</a> ”</span></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0F8A1812-F9C8-4651-82D3-983AE8D1EFD0" title="由于CREATE_JOB过程已重载，因此有几种不同的使用方法。">指定作业操作，计划，程序和样式</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN12389"></a><div class="props_rev_3"><a id="GUID-096BC30E-71B0-4C41-B0F1-586D37D3DA5A" name="GUID-096BC30E-71B0-4C41-B0F1-586D37D3DA5A"></a><h6 id="ADMIN-GUID-096BC30E-71B0-4C41-B0F1-586D37D3DA5A" class="sect6"><span class="enumeration_section">29.2.2.2.3</span>使用命名计划创建作业</h6>
                        <div>
                           <p>您可以通过指向命名的计划而不是内联其计划来创建作业。</p>
                           <div class="section">
                              <p>要使用一个名为安排一个工作，你指定值<code class="codeph">schedule_name</code>中<code class="codeph">CREATE_JOB</code>程序创建作业时不指定值<code class="codeph">start_date</code> ， <code class="codeph">repeat_interval</code>和<code class="codeph">end_date</code> 。
                              </p>
                              <p>您可以使用任何命名的计划来创建作业，因为所有计划都是通过访问<code class="codeph">PUBLIC</code>创建的。以下<code class="codeph">CREATE_JOB</code>过程具有命名的计划并创建名为<code class="codeph">my_new_job2</code>的常规作业：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'my_new_job2'，job_type =&gt;'PLSQL_BLOCK'，job_action =&gt;'BEGIN SALES_PKG.UPDATE_SALES_SUMMARY; END;'，schedule_name =&gt;'my_saved_schedule'）;结束; /</pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0F8A1812-F9C8-4651-82D3-983AE8D1EFD0" title="由于CREATE_JOB过程已重载，因此有几种不同的使用方法。">指定作业操作，计划，程序和样式</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN12390"></a><div class="props_rev_3"><a id="GUID-DD541BA1-FA8C-421C-B138-C571D4B140C6" name="GUID-DD541BA1-FA8C-421C-B138-C571D4B140C6"></a><h6 id="ADMIN-GUID-DD541BA1-FA8C-421C-B138-C571D4B140C6" class="sect6"><span class="enumeration_section">29.2.2.2.4</span>使用命名程序和计划创建作业</h6>
                        <div>
                           <p>可以通过指向命名程序和命名计划来创建作业。</p>
                           <div class="section">
                              <p>例如，以下<code class="codeph">CREATE_JOB</code>过程基于现有程序<code class="codeph">my_saved_program1</code>和现有计划<code class="codeph">my_saved_schedule1</code>创建名为<code class="codeph">my_new_job3</code>的常规作业：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'my_new_job3'，program_name =&gt;'my_saved_program1'，schedule_name =&gt;'my_saved_schedule1'）;结束; /</pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-DD541BA1-FA8C-421C-B138-C571D4B140C6__GUID-260E67F1-C036-4B89-8A55-2C761F2C19AC">
                              <p class="notep1">也可以看看：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4ADA6AC6-FEBA-4D06-8B55-672A88481DEE" title="程序是关于特定任务的元数据的集合。您可以选择使用程序来帮助定义作业。">创建和管理程序以定义作业</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7F50C410-8818-49C3-B762-82BB24D86719" title="您可以选择使用计划对象（计划）来定义应该运行作业的时间。通过在数据库中创建和保存计划作为对象，可以在用户之间共享计划。">创建和管理计划以定义作业</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-31F260EA-48D0-470A-B66D-E906BA50CAD5" title="Oracle Scheduler可以在发送事件时启动作业。事件是一个应用程序或系统进程发送给另一个应用程序的消息。">使用事件启动工作</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0F8A1812-F9C8-4651-82D3-983AE8D1EFD0" title="由于CREATE_JOB过程已重载，因此有几种不同的使用方法。">指定作业操作，计划，程序和样式</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADMIN13377"></a><a id="ADMIN13373"></a><div class="props_rev_3"><a id="GUID-BCB91872-760D-43CA-A5E2-135C6A2DB2F5" name="GUID-BCB91872-760D-43CA-A5E2-135C6A2DB2F5"></a><h5 id="ADMIN-GUID-BCB91872-760D-43CA-A5E2-135C6A2DB2F5" class="sect5"><span class="enumeration_section">29.2.2.3</span>指定调度程序作业凭据</h5>
                     <div>
                        <p>Oracle Scheduler需要作业凭据才能在运行之前通过Oracle数据库或操作系统进行身份验证。</p>
                        <div class="section">
                           <p>对于本地外部作业，远程外部作业和远程数据库作业，您必须指定作业运行的凭据。您可以通过创建凭证对象并将其分配给<code class="codeph">credential_name</code>作业属性来执行此操作。
                           </p>
                           <div class="infoboxnote" id="GUID-BCB91872-760D-43CA-A5E2-135C6A2DB2F5__GUID-ACB7EEA1-C27D-48AE-B109-258229FA49FA">
                              <p class="notep1">注意：</p>
                              <p>本地数据库作业始终以用户为作业所有者的方式运行，并将忽略任何已命名的凭据。</p>
                           </div>
                           <p>要创建凭据，请调用<code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code>过程。
                           </p>
                           <p>您必须具有<code class="codeph">CREATE</code> <code class="codeph">CREDENTIAL</code>权限才能在自己的模式中创建凭证，并具有<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">CREDENTIAL</code>权限以在除<code class="codeph">SYS</code>之外的任何模式中创建凭证。凭证只能由其所有者对凭证具有<code class="codeph">EXECUTE</code>权限或其所有者也拥有凭证的作业使用。由于凭证属于与任何其他架构对象类似的架构，因此您可以使用<code class="codeph">GRANT</code> SQL语句为凭证授予权限。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-BCB91872-760D-43CA-A5E2-135C6A2DB2F5__CIAJDADA">
                           <p class="titleinexample">示例29-1创建凭据</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_CREDENTIAL.CREATE_CREDENTIAL（'DW_CREDENTIAL'，'dwuser'，'dW001515'）;结束; / GRANT EXECUTE TO DW_CREDENTIAL to salesuser;</pre><p>您可以查询<code class="codeph">*_CREDENTIALS</code>视图以查看数据库中的凭据列表。凭据密码以模糊方式存储，不会显示在这些视图中。
                           </p>
                           <div class="infoboxnote" id="GUID-BCB91872-760D-43CA-A5E2-135C6A2DB2F5__GUID-47B25D83-231B-4EC0-8DE1-12AA466DFF16">
                              <p class="notep1">注意：</p>
                              <p><code class="codeph">*_SCHEDULER_CREDENTIALS</code>在Oracle Database 12 <span class="italic">c中</span>已弃用，但由于向后兼容性原因仍然可用。
                              </p>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-BCB91872-760D-43CA-A5E2-135C6A2DB2F5__GUID-AFE2F73D-4EF4-4ABB-A05F-6B47A96FABAB">
                           <p class="notep1">也可以看看：</p>
                           <p>有关使用<code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code>过程创建凭据的信息，请<code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> <a href="../dbseg/managing-security-for-application-developers.html#DBSEG656" target="_blank"><span class="italic">“Oracle数据库安全指南”</span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9" title="您可以使用DBMS_SCHEDULER程序包或Cloud Control创建作业。">创建作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13378"></a><div class="props_rev_3"><a id="GUID-4F93F7AF-8B6E-4765-B260-1702A5D99C2A" name="GUID-4F93F7AF-8B6E-4765-B260-1702A5D99C2A"></a><h5 id="ADMIN-GUID-4F93F7AF-8B6E-4765-B260-1702A5D99C2A" class="sect5"><span class="enumeration_section">29.2.2.4</span>指定目的地</h5>
                     <p>对于远程外部作业和远程数据库作业，可以通过创建目标对象并将其分配给<code class="codeph">destination_name</code>作业属性来指定作业目标。具有<code class="codeph">NULL</code> <code class="codeph">destination_name</code>属性的作业在创建作业的主机上运行。
                     </p>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-8196847D-2A60-48D3-901C-CC2198AB86BA">目标任务及其程序</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理目标任务。
                           </li>
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-285EF01C-00B5-4974-9CCC-8209D7FA6CB4">创建目的地</a><br><span class="bold">目标</span>是Scheduler对象，用于定义运行作业的位置。
                           </li>
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-22C73FD5-9D1F-4897-B96E-D3E1311C58F5">为多目标作业创建目标组</a><br>要创建在多个目标上运行的作业，必须创建目标组并将该组分配给作业的<code class="codeph">destination_name</code>属性。
                           </li>
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-A5AFD294-7E1B-427F-A74B-0B391BC519D7">示例：创建远程数据库作业</a><br>示例说明了如何创建远程数据库作业。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9" title="您可以使用DBMS_SCHEDULER程序包或Cloud Control创建作业。">创建作业</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN13882"></a><a id="ADMIN13881"></a><div class="props_rev_3"><a id="GUID-8196847D-2A60-48D3-901C-CC2198AB86BA" name="GUID-8196847D-2A60-48D3-901C-CC2198AB86BA"></a><h6 id="ADMIN-GUID-8196847D-2A60-48D3-901C-CC2198AB86BA" class="sect6"><span class="enumeration_section">29.2.2.4.1</span>目的地任务及其程序</h6>
                        <div>
                           <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理目标任务。
                           </p>
                           <div class="section">
                              <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-8196847D-2A60-48D3-901C-CC2198AB86BA__CHDHDBBG" title="第1列：任务，第2列：要调用的过程，第3列：所需的权限。">表29-2</a>说明了目标任务及其过程和权限：</p>
                           </div>
                           <!-- class="section" -->
                           <div class="tblformal" id="GUID-8196847D-2A60-48D3-901C-CC2198AB86BA__CHDHDBBG">
                              <p class="titleintable">表29-2目标任务及其过程</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="目标任务及其程序" width="100%" border="1" summary="Column 1: Task, column 2: procedure to call, column 3: privileges needed." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="26%" id="d268851e1764">任务</th>
                                       <th align="left" valign="bottom" width="33%" id="d268851e1767">程序</th>
                                       <th align="left" valign="bottom" width="41%" id="d268851e1770">需要特权</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d268851e1775" headers="d268851e1764 ">
                                          <p>创建外部目标</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d268851e1775 d268851e1767 ">
                                          <p>（没有）</p>
                                       </td>
                                       <td align="left" valign="top" width="41%" headers="d268851e1775 d268851e1770 ">
                                          <p>请参阅<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-285EF01C-00B5-4974-9CCC-8209D7FA6CB4" title="目标是Scheduler对象，用于定义运行作业的位置。">创建目的地</a> ”</span></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d268851e1795" headers="d268851e1764 ">
                                          <p>删除外部目的地</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d268851e1795 d268851e1767 ">
                                          <p><code class="codeph">DROP_AGENT_DESTINATION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="41%" headers="d268851e1795 d268851e1770 ">
                                          <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d268851e1810" headers="d268851e1764 ">
                                          <p>创建数据库目标</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d268851e1810 d268851e1767 ">
                                          <p><code class="codeph">CREATE_DATABASE_DESTINATION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="41%" headers="d268851e1810 d268851e1770 ">
                                          <p><code class="codeph">CREATE</code> <code class="codeph">JOB</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d268851e1834" headers="d268851e1764 ">
                                          <p>删除数据库目标</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d268851e1834 d268851e1767 ">
                                          <p><code class="codeph">DROP_DATABASE_DESTINATION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="41%" headers="d268851e1834 d268851e1770 ">
                                          <p><code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d268851e1853" headers="d268851e1764 ">
                                          <p>创建目标组</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d268851e1853 d268851e1767 ">
                                          <p><code class="codeph">创建组</code></p>
                                       </td>
                                       <td align="left" valign="top" width="41%" headers="d268851e1853 d268851e1770 ">
                                          <p><code class="codeph">CREATE</code> <code class="codeph">JOB</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d268851e1877" headers="d268851e1764 ">
                                          <p>删除目标组</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d268851e1877 d268851e1767 ">
                                          <p><code class="codeph">DROP_GROUP</code></p>
                                       </td>
                                       <td align="left" valign="top" width="41%" headers="d268851e1877 d268851e1770 ">
                                          <p><code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d268851e1896" headers="d268851e1764 ">
                                          <p>将成员添加到目标组</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d268851e1896 d268851e1767 ">
                                          <p><code class="codeph">ADD_GROUP_MEMBER</code></p>
                                       </td>
                                       <td align="left" valign="top" width="41%" headers="d268851e1896 d268851e1770 ">
                                          <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d268851e1918" headers="d268851e1764 ">
                                          <p>从目标组中删除成员</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d268851e1918 d268851e1767 ">
                                          <p><code class="codeph">REMOVE_GROUP_MEMBER</code></p>
                                       </td>
                                       <td align="left" valign="top" width="41%" headers="d268851e1918 d268851e1770 ">
                                          <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4F93F7AF-8B6E-4765-B260-1702A5D99C2A" title="对于远程外部作业和远程数据库作业，可以通过创建目标对象并将其分配给destination_name作业属性来指定作业目标。具有NULL destination_name属性的作业在创建作业的主机上运行。">指定目标</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13379"></a><a id="ADMIN13883"></a><div class="props_rev_3"><a id="GUID-285EF01C-00B5-4974-9CCC-8209D7FA6CB4" name="GUID-285EF01C-00B5-4974-9CCC-8209D7FA6CB4"></a><h6 id="ADMIN-GUID-285EF01C-00B5-4974-9CCC-8209D7FA6CB4" class="sect6"><span class="enumeration_section">29.2.2.4.2</span>创建目的地</h6>
                        <div>
                           <p><span class="bold">目标</span>是Scheduler对象，用于定义运行作业的位置。
                           </p>
                           <div class="section">
                              <p>通过在作业的<code class="codeph">destination_name</code>属性中指定单个目标或目标组，可以指定作业运行的位置。如果将<code class="codeph">destination_name</code>属性保留为<code class="codeph">NULL</code> ，则作业将在本地主机（创建作业的主机）上运行。
                              </p>
                              <p>使用外部目标指定远程外部作业运行的位置。使用数据库目标指定远程数据库作业运行的位置。</p>
                              <p>您不需要对象权限即可使用其他用户创建的目标。</p>
                              <p>要创建外部目标，请向数据库注册远程Scheduler代理。</p>
                              <p>有关说明，请参阅<span class="q">“ <a href="administering-oracle-scheduler.html#GUID-68793240-9241-42D4-95E7-21C66DD6B305" title="在特定主机上运行远程作业之前，必须安装和配置Scheduler代理。">在远程主机上安装和配置Scheduler Agent</a> ”</span> 。
                              </p>
                              <div class="infoboxnote" id="GUID-285EF01C-00B5-4974-9CCC-8209D7FA6CB4__GUID-14851AE0-525F-41D0-814E-8CE336E7323F">
                                 <p class="notep1">注意：</p>
                                 <p>没有<code class="codeph">DBMS_SCHEDULER</code>程序包过程来创建外部目标。您可以通过注册远程代理隐式创建外部目标。
                                 </p>
                                 <p>如果在同一主机上有远程作业目标的其他数据库实例，也可以注册本地调度程序代理。这将创建一个引用本地主机的外部目标。</p>
                              </div>
                              <p>外部目标名称自动设置为代理名称。要验证是否已创建外部目标，请查询视图<code class="codeph">DBA_SCHEDULER_EXTERNAL_DESTS</code>或<code class="codeph">ALL_SCHEDULER_EXTERNAL_DESTS</code> 。</p>
                              <p>要创建数据库目标，请调用<code class="codeph">DBMS_SCHEDULER.CREATE_DATABASE_DESTINATION</code>过程。
                              </p>
                              <p>您必须将外部目标的名称指定为过程参数。这指定数据库目标指向的远程主机。您还可以指定标识要连接到的数据库实例的网络服务名称或完整连接描述符。如果指定网络服务名称，则必须由本地<code class="codeph">tnsnames.ora</code>文件解析。如果未指定数据库实例，则远程Scheduler代理将连接到其默认数据库，该数据库在代理配置文件中指定。
                              </p>
                              <p>要创建数据库目标，您必须具有<code class="codeph">CREATE JOB</code>系统特权。要在非自己的模式中创建数据库目标，您必须具有<code class="codeph">CREATE ANY JOB</code>权限。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-285EF01C-00B5-4974-9CCC-8209D7FA6CB4__CIAFDEIB">
                              <p class="titleinexample">示例29-2创建数据库目标</p>
                              <p>以下示例创建名为<code class="codeph">DBHOST1_ORCLDW</code>的数据库目标。对于此示例，假设以下内容：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>您在远程主机<code class="codeph">dbhost1.example.com</code>上安装了Scheduler代理，并使用本地数据库注册了代理。
                                    </p>
                                 </li>
                                 <li>
                                    <p>您未修改代理配置文件以设置代理名称。因此，代理名称和外部目标名称默认为<code class="codeph">DBHOST1</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>您使用本地主机上的Net Configuration Assistant在tnsnames.ora中为名为<code class="codeph">orcldw</code>的Oracle数据库实例创建了一个连接描述符，该实例位于远程主机<code class="codeph">dbhost1.example.com</code> 。您为此连接描述符分配了<code class="codeph">ORCLDW</code>的网络服务名称（别名）。
                                    </p>
                                 </li>
                              </ul><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_DATABASE_DESTINATION（destination_name =&gt;'DBHOST1_ORCLDW'，agent =&gt;'DBHOST1'，tns_name =&gt;'ORCLDW'，comments =&gt;'主机dbhost1.example.com上名为orcldw的实例'）;结束; /</pre><p>要验证是否已创建数据库目标，请查询视图<code class="codeph">*_SCHEDULER_DB_DESTS</code> 。</p>
                           </div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-285EF01C-00B5-4974-9CCC-8209D7FA6CB4__GUID-80549403-C9B0-475F-A191-3CA6F8249901">
                              <p class="notep1">也可以看看：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关目的地的更多信息，请参阅<span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-3AC38D5C-D759-41A7-9F11-FEA9FC80B0F4" title="目标对象（目标）定义运行作业的位置。">目的地</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-B1913DD0-9367-4E80-A22B-CA668B0C68AA" title="作业对象（作业）是描述用户定义任务的元数据集合。它定义了必须执行的内容（操作），何时（一次性或定期调度或触发事件），何处（目标）以及凭据。作业具有所有者，该所有者是创建它的模式。">Jobs</a> ”</span>了解远程外部作业和远程数据库作业</p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4F93F7AF-8B6E-4765-B260-1702A5D99C2A" title="对于远程外部作业和远程数据库作业，可以通过创建目标对象并将其分配给destination_name作业属性来指定作业目标。具有NULL destination_name属性的作业在创建作业的主机上运行。">指定目标</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13381"></a><a id="ADMIN13380"></a><div class="props_rev_3"><a id="GUID-22C73FD5-9D1F-4897-B96E-D3E1311C58F5" name="GUID-22C73FD5-9D1F-4897-B96E-D3E1311C58F5"></a><h6 id="ADMIN-GUID-22C73FD5-9D1F-4897-B96E-D3E1311C58F5" class="sect6"><span class="enumeration_section">29.2.2.4.3</span>为多目标作业创建目标组</h6>
                        <div>
                           <p>要创建在多个目标上运行的作业，必须创建目标组并将该组分配给作业的<code class="codeph">destination_name</code>属性。
                           </p>
                           <div class="section">
                              <p>您可以在创建组时指定组成员（目标），也可以在以后添加组成员。</p>
                              <p>要创建目标组，请调用<code class="codeph">DBMS_SCHEDULER.CREATE_GROUP</code>过程。
                              </p>
                              <p>对于远程外部作业，您必须指定一组“ <code class="codeph">EXTERNAL_DEST</code> ”类型，并且所有组成员必须是外部目标。对于远程数据库作业，必须指定“ <code class="codeph">DB_DEST</code> ”类型的组，并且所有成员必须是数据库目标。
                              </p>
                              <p>目标组的成员具有以下格式：</p><pre class="oac_no_warn" dir="ltr">[[ <span class="italic">schema</span> 。] <span class="italic">凭证</span> @] [ <span class="italic">架构</span> 。] <span class="italic">目的地</span>
</pre><p>哪里：</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="italic"><code class="codeph">credential</code></span>是现有凭证的名称。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">destination</code></span>是现有数据库目标或外部目标的名称</p>
                                 </li>
                              </ul>
                              <p>目标成员的凭证部分是可选的。如果省略，则使用此目标成员的作业将使用其默认凭据。</p>
                              <p>您可以包含与目标组成员相同类型的另一个组。创建组后，Scheduler会将包含的组扩展为其成员。</p>
                              <p>如果希望本地主机是作业运行的多个目标之一，则可以将关键字<code class="codeph">LOCAL</code>包含为任一类型的目标组的组成员。<code class="codeph">LOCAL</code>只能在外部目标组中以凭证开头。
                              </p>
                              <p>组由创建它的用户拥有。您必须具有<code class="codeph">CREATE</code> <code class="codeph">JOB</code>系统特权才能在自己的模式中创建组，并具有<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>系统特权以在另一个模式中创建组。您可以通过在组上授予<code class="codeph">SELECT</code> ，将组的对象权限授予其他用户。
                              </p>
                              <div class="infoboxnotealso" id="GUID-22C73FD5-9D1F-4897-B96E-D3E1311C58F5__GUID-66172DEC-8123-4549-B7BF-ACE459FBDAA9">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-25434537-0B95-4104-906D-D85AAF4E4086" title="Instead of passing a list of objects as an argument to a DBMS_SCHEDULER package procedure, you create a group that has those objects as its members, and then pass the group name to the procedure.">组</a> ”</span>用于<span class="q"><a href="oracle-scheduler-concepts.html#GUID-25434537-0B95-4104-906D-D85AAF4E4086" title="您不是将对象列表作为参数传递给DBMS_SCHEDULER包过程，而是创建一个将这些对象作为其成员的组，然后将组名传递给过程。">组</a></span>的概述。
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-22C73FD5-9D1F-4897-B96E-D3E1311C58F5__CIAEDJJI">
                              <p class="titleinexample">示例29-3创建数据库目标组</p>
                              <p>此示例创建数据库目标组。由于某些成员不包含凭据，因此使用此目标组的作业必须具有默认凭据。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_GROUP（GROUP_NAME =&gt;'all_dbs'，GROUP_TYPE =&gt;'DB_DEST'，MEMBER =&gt;'oltp_admin @ orcl，orcldw1，LOCAL'，COMMENTS =&gt;'我管理的所有数据库'）;结束; /</pre><p>以下代码将另一个成员添加到该组。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.ADD_GROUP_MEMBER（GROUP_NAME =&gt;'all_dbs'，MEMBER =&gt;'dw_admin @ orcldw2'）;结束; /</pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4F93F7AF-8B6E-4765-B260-1702A5D99C2A" title="对于远程外部作业和远程数据库作业，可以通过创建目标对象并将其分配给destination_name作业属性来指定作业目标。具有NULL destination_name属性的作业在创建作业的主机上运行。">指定目标</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13382"></a><div class="props_rev_3"><a id="GUID-A5AFD294-7E1B-427F-A74B-0B391BC519D7" name="GUID-A5AFD294-7E1B-427F-A74B-0B391BC519D7"></a><h6 id="ADMIN-GUID-A5AFD294-7E1B-427F-A74B-0B391BC519D7" class="sect6"><span class="enumeration_section">29.2.2.4.4</span>示例：创建远程数据库作业</h6>
                        <div>
                           <p>示例说明了如何创建远程数据库作业。</p>
                           <div class="section">
                              <p>以下示例通过在指定数据库目标对象创建远程数据库作业<code class="codeph">destination_name</code>作业的对象。还必须指定凭据，以便作业可以使用远程数据库进行身份验证。该示例使用<a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BCB91872-760D-43CA-A5E2-135C6A2DB2F5__CIAJDADA">示例29-1中</a>创建的凭据和<a href="scheduling-jobs-with-oracle-scheduler.html#GUID-285EF01C-00B5-4974-9CCC-8209D7FA6CB4__CIAFDEIB">示例29-2中</a>创建的数据库目标。
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'SALES_SUMMARY1'，job_type =&gt;'STORED_PROCEDURE'，job_action =&gt;'SALES.SALES_REPORT1'，start_date =&gt; '15 -JUL-09 11.00.00 PM Europe / Warsaw'，repeat_interval =&gt;' FREQ = DAILY'，credential_name =&gt;'DW_CREDENTIAL'，destination_name =&gt;'DBHOST1_ORCLDW'）;结束; /</pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4F93F7AF-8B6E-4765-B260-1702A5D99C2A" title="对于远程外部作业和远程数据库作业，可以通过创建目标对象并将其分配给destination_name作业属性来指定作业目标。具有NULL destination_name属性的作业在创建作业的主机上运行。">指定目标</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADMIN13383"></a><div class="props_rev_3"><a id="GUID-480E01D8-F3E9-444F-B768-AB39C4144562" name="GUID-480E01D8-F3E9-444F-B768-AB39C4144562"></a><h5 id="ADMIN-GUID-480E01D8-F3E9-444F-B768-AB39C4144562" class="sect5"><span class="enumeration_section">29.2.2.5</span>创建多目标作业</h5>
                     <div>
                        <p>您可以创建在多个目标上运行的作业，但这可以从一个位置进行管理。</p>
                        <div class="section">
                           <p>执行此操作的典型原因是在您管理的所有数据库上运行数据库维护作业。您可以创建一次作业并为作业指定多个目标，而不是在每个数据库上创建作业。从创建作业的<span class="italic">数据库</span> （ <span class="italic">本地数据库</span> ），您可以监视所有位置的作业的所有实例的状态和结果。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-480E01D8-F3E9-444F-B768-AB39C4144562__GUID-3BF7B220-0790-4C2F-A76E-C293F2C7FE0B">要创建多目标作业：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>调用<code class="codeph">DBMS_SCHEDULER.CREATE_JOB</code>过程并将作业的<code class="codeph">destination_name</code>属性设置为数据库目标组或外部目标组的名称。
                                 </p>
                                 <p>如果并非所有目标组成员都包含凭证前缀（架构），请为作业分配默认凭据。</p>
                                 <p>要将本地主机或本地数据库包括为作业运行的目标之一，请确保关键字<code class="codeph">LOCAL</code>是目标组的成员之一。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>要获取目标组列表，请提交以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT owner，group_name，group_type，number_of_members FROM all_scheduler_groups WHERE group_type ='DB_DEST'或group_type ='EXTERNAL_DEST'; OWNER GROUP_NAME GROUP_TYPE NUMBER_OF_MEMBERS --------------- --------------- ------------- --- -------------- DBA1 ALL_DBS DB_DEST 4 DBA1 ALL_HOSTS EXTERNAL_DEST 4</pre><p>以下示例使用在<a href="scheduling-jobs-with-oracle-scheduler.html#GUID-22C73FD5-9D1F-4897-B96E-D3E1311C58F5__CIAEDJJI">示例29-3中</a>创建的数据库目标组创建多目标数据库作业。凭证中指定的用户应具有足够的权限来执行作业操作。
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_CREDENTIAL。 <span class="bold">CREATE_CREDENTIAL</span> （'DBA_CREDENTIAL'，'dba1'，'sYs040533'）; DBMS_SCHEDULER。 <span class="bold">CREATE_JOB</span> （job_name =&gt;'MAINT_SET1'，job_type =&gt;'STORED_PROCEDURE'，job_action =&gt;'MAINT_PROC1'，start_date =&gt; '15 -JUL-09 11.00.00 PM Europe / Warsaw'，repeat_interval =&gt;'FREQ = DAILY'， credential_name =&gt;'DBA_CREDENTIAL'，destination_name =&gt;'ALL_DBS'）;结束; /</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-480E01D8-F3E9-444F-B768-AB39C4144562__GUID-93D811C2-526C-4548-8E16-35A8C1351081">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-6834E451-C8C9-425E-A93D-264733E36A76" title="多目标作业是一个作业，其实例在多个目标数据库或主机上运行，但可以从一个中央数据库进行控制和监视。">多目标工作</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-9B29C60A-DF63-4011-8633-BEBC4FD0FC48" title="对于多目标作业，整体父作业状态取决于子作业的结果。">监控多个目标作业</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-25434537-0B95-4104-906D-D85AAF4E4086" title="您不是将对象列表作为参数传递给DBMS_SCHEDULER包过程，而是创建一个将这些对象作为其成员的组，然后将组名传递给过程。">团体</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9" title="您可以使用DBMS_SCHEDULER程序包或Cloud Control创建作业。">创建作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12386"></a><div class="props_rev_3"><a id="GUID-B20C6C61-66B3-4A8D-8AA6-A160291110D6" name="GUID-B20C6C61-66B3-4A8D-8AA6-A160291110D6"></a><h5 id="ADMIN-GUID-B20C6C61-66B3-4A8D-8AA6-A160291110D6" class="sect5"><span class="enumeration_section">29.2.2.6</span>设置作业参数</h5>
                     <div>
                        <p>要设置作业参数，请使用<code class="codeph">SET_JOB_ARGUMENT_VALUE</code>或<code class="codeph">SET_JOB_ANYDATA_VALUE</code>过程或Cloud Control。<code class="codeph">SET_JOB_ANYDATA_VALUE</code>用于无法表示为<code class="codeph">VARCHAR2</code>字符串的复杂数据类型。
                        </p>
                        <div class="section">
                           <p>创建作业后，您可能需要在以下情况下设置作业参数：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>内联作业操作是存储过程或需要参数的其他可执行文件</p>
                              </li>
                              <li>
                                 <p>作业引用命名的程序对象，并且您希望覆盖一个或多个默认程序参数</p>
                              </li>
                              <li>
                                 <p>作业引用命名的程序对象，并且未为一个或多个程序参数分配默认值</p>
                              </li>
                           </ul>
                           <p>可能需要参数的作业示例是启动需要开始日期和结束日期的报告程序的示例。以下代码示例设置结束日期作业参数，这是报告程序所期望的第二个参数：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER。 <span class="bold">SET_JOB_ARGUMENT_VALUE</span> （job_name =&gt;'ops_reports'，argument_position =&gt; 2，argument_value =&gt; '12 -DEC-03'）;结束; /</pre><p>如果对已设置其值的参数使用此过程，则将覆盖该过程。您可以使用参数名称或参数位置设置参数值。要使用参数名称，作业必须引用命名的程序对象，并且必须在程序对象中为该参数指定名称。如果内联程序，则仅支持按位置设置。“ <code class="codeph">PLSQL_BLOCK</code> ”类型的作业不支持参数。
                           </p>
                           <p>要删除已设置的值，请使用<code class="codeph">RESET_JOB_ARGUMENT</code>过程。此过程可用于常规和<code class="codeph">ANYDATA</code>参数。
                           </p>
                           <p><code class="codeph">SET_JOB_ARGUMENT_VALUE</code>仅支持SQL类型的参数。因此，不支持非SQL类型的参数值（如布尔值）作为程序或作业参数。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-B20C6C61-66B3-4A8D-8AA6-A160291110D6__GUID-AA49B3A7-2946-4C07-9F35-8C38D15CB9F6">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D5F752A0-E00F-4F16-908A-974CE63588F1" title="创建程序后，您可以定义程序参数。">定义程序参数</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9" title="您可以使用DBMS_SCHEDULER程序包或Cloud Control创建作业。">创建作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12385"></a><div class="props_rev_3"><a id="GUID-E4B0C33E-C597-490A-81A3-1006CED71B79" name="GUID-E4B0C33E-C597-490A-81A3-1006CED71B79"></a><h5 id="ADMIN-GUID-E4B0C33E-C597-490A-81A3-1006CED71B79" class="sect5"><span class="enumeration_section">29.2.2.7</span>设置其他作业属性</h5>
                     <div>
                        <p>创建作业后，可以使用<code class="codeph">SET_ATTRIBUTE</code>或<code class="codeph">SET_JOB_ATTRIBUTES</code>过程设置其他作业属性或更改属性值。
                        </p>
                        <div class="section">
                           <p>您还可以使用Cloud Control设置作业属性。虽然可以通过调用<code class="codeph">CREATE_JOB</code>来设置许多作业属性，但是在创建作业后，只能使用<code class="codeph">SET_ATTRIBUTE</code>或<code class="codeph">SET_JOB_ATTRIBUTES</code>设置某些属性，例如<code class="codeph">destination</code>和<code class="codeph">credential_name</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9" title="您可以使用DBMS_SCHEDULER程序包或Cloud Control创建作业。">创建作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13094"></a><a id="ADMIN12515"></a><div class="props_rev_3"><a id="GUID-84816118-1206-4386-B944-1E114C3EB714" name="GUID-84816118-1206-4386-B944-1E114C3EB714"></a><h5 id="ADMIN-GUID-84816118-1206-4386-B944-1E114C3EB714" class="sect5"><span class="enumeration_section">29.2.2.8</span>创建分离的作业</h5>
                     <div>
                        <p>分离的作业必须指向其<code class="codeph">detached</code>属性设置为<code class="codeph">TRUE</code>的程序对象（程序）。</p>
                        <div class="section">
                           <p>以下Linux和UNIX示例创建了一个夜间作业，用于执行数据库的冷备份。它包含三个步骤。</p>
                           <p><span class="bold">第1步 - 创建调用RMAN的脚本</span></p>
                           <p>创建一个调用RMAN脚本的shell脚本来执行冷备份。shell脚本位于<code class="codeph">ORACLE_HOME/scripts/coldbackup.sh</code> 。它必须由安装Oracle数据库的用户（通常是用户<code class="codeph">oracle</code> ）执行。
                           </p><pre class="oac_no_warn" dir="ltr">＃！/ bin / sh export ORACLE_HOME = / u01 / app / oracle / product / <span class="italic">database_release_number</span> / db_1 export ORACLE_SID = orcl export LD_LIBRARY_PATH = $ LD_LIBRARY_PATH：$ ORACLE_HOME / lib $ ORACLE_HOME / bin / rman TARGET / @ $ ORACLE_HOME / scripts / coldbackup.rman跟踪/u01/app/oracle/backup/coldbackup.out并退出0</pre><p><span class="bold">第2步 - 创建RMAN脚本</span></p>
                           <p>创建执行冷备份的RMAN脚本，然后结束作业。该脚本位于<code class="codeph">ORACLE_HOME/scripts/coldbackup.rman</code> 。
                           </p><pre class="oac_no_warn" dir="ltr">运行{＃关闭数据库进行备份并进入MOUNT模式关闭立即启动挂载＃执行完全数据库备份备份完整格式“/ u01 / app / oracle / backup /％d_FULL_％U”（数据库）; ＃备份alter database open后打开数据库; ＃调用通知例程以指示作业已成功完成sql“BEGIN DBMS_SCHEDULER.END_DETACHED_JOB_RUN（''sys.backup_job''，0，null）; END;”; }</pre><p><span class="bold">第3步 - 创建作业并使用分离的程序</span></p>
                           <p>提交以下PL / SQL块：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_PROGRAM（program_name =&gt;'sys.backup_program'，program_type =&gt;'executable'，program_action =&gt;'？/scripts/coldbackup.sh'，enabled =&gt; TRUE）; DBMS_SCHEDULER.SET_ATTRIBUTE（'sys.backup_program'，' <span class="bold">detached</span> '，TRUE）; DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'sys.backup_job'，program_name =&gt;'sys.backup_program'，repeat_interval =&gt;'FREQ = DAILY; BYHOUR = 1; BYMINUTE = 0'）; DBMS_SCHEDULER.ENABLE（ 'sys.backup_job'）;结束; /</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-84816118-1206-4386-B944-1E114C3EB714__GUID-2A61099E-6624-420D-BCF9-0F0FEF8F50AA">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-E4FA9A50-FC8B-4427-8293-A0F457C13161" title="您使用分离的作业来启动在单独的进程中运行的脚本或应用程序，与调度程序独立且异步地运行。">独立工作</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9" title="您可以使用DBMS_SCHEDULER程序包或Cloud Control创建作业。">创建作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13095"></a><a id="ADMIN12516"></a><div class="props_rev_3"><a id="GUID-521EA034-91CD-4D43-AA13-8C8D8D69C7D4" name="GUID-521EA034-91CD-4D43-AA13-8C8D8D69C7D4"></a><h5 id="ADMIN-GUID-521EA034-91CD-4D43-AA13-8C8D8D69C7D4" class="sect5"><span class="enumeration_section">29.2.2.9</span>在单个事务中创建多个作业</h5>
                     <div>
                        <p>如果必须创建许多作业，那么如果使用<code class="codeph">CREATE_JOBS</code>过程，则可以减少事务开销并获得性能<code class="codeph">CREATE_JOBS</code> 。
                        </p>
                        <div class="section">
                           <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-521EA034-91CD-4D43-AA13-8C8D8D69C7D4__BAJICIFE">示例29-4</a>演示了如何使用此过程在单个事务中创建多个作业。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-521EA034-91CD-4D43-AA13-8C8D8D69C7D4__BAJICIFE">
                           <p class="titleinexample">示例29-4在单个事务中创建多个作业</p><pre class="oac_no_warn" dir="ltr">DECLARE newjob sys.job_definition; newjobarr sys.job_definition_array; BEGIN  - 创建一个JOB_DEFINITION对象类型数组newjobarr：= sys.job_definition_array（）; - 在数组newjobarr.extend（5）中分配足够的空间; - 添加5个作业的定义FOR i IN 1..5 LOOP  - 创建JOB_DEFINITION对象类型newjob：= sys.job_definition（job_name =&gt;'TESTJOB'|| to_char（i），job_style =&gt;'REGULAR'，program_name &gt;'PROG1'，repeat_interval =&gt;'FREQ = HOURLY'，start_date =&gt; systimestamp + interval'600'秒，max_runs =&gt; 2，auto_drop =&gt; FALSE，enabled =&gt; TRUE）; - 将它添加到数组newjobarr（i）：= newjob;结束循环; - 调用CREATE_JOBS在一个事务DBMS_SCHEDULER中创建作业。 <span class="bold">CREATE_JOBS</span> （newjobarr，'TRANSACTIONAL'）;结束; / PL / SQL过程成功完成。从USER_SCHEDULER_JOBS中选择JOB_NAME; JOB_NAME ------------------------------ TESTJOB1 TESTJOB2 TESTJOB3 TESTJOB4 TESTJOB5 5行选中。</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-521EA034-91CD-4D43-AA13-8C8D8D69C7D4__GUID-7DC6E418-72C7-4697-9A2A-DC6B3711A42C">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-4529B212-84F4-4C93-9D6C-00B7917D1B42" title="当您有许多经常运行的短期作业时，请使用轻量级作业。在某些情况下，使用轻量级作业可以带来很小的性能提升。">轻量级工作</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9" title="您可以使用DBMS_SCHEDULER程序包或Cloud Control创建作业。">创建作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13090"></a><a id="ADMIN13093"></a><a id="ADMIN13384"></a><div class="props_rev_3"><a id="GUID-5E28E1EF-CB55-49AE-B7C0-91CE6167D67C" name="GUID-5E28E1EF-CB55-49AE-B7C0-91CE6167D67C"></a><h5 id="ADMIN-GUID-5E28E1EF-CB55-49AE-B7C0-91CE6167D67C" class="sect5"><span class="enumeration_section">29.2.2.10</span>外部工作技术</h5>
                     <div>
                        <p>本节包含以下示例，这些示例演示了外部作业的一些实用技术。</p>
                        <div class="example" id="GUID-5E28E1EF-CB55-49AE-B7C0-91CE6167D67C__CHDJHBAH">
                           <p class="titleinexample">示例29-5创建运行命令解释程序的本地外部作业</p>
                           <p>此示例演示如何在Windows上创建运行解释器命令的本地外部作业（在本例中为<code class="codeph">mkdir</code> ）。该作业使用<code class="codeph">/c</code>选项运行<code class="codeph">cmd.exe</code> 。
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'MKDIR_JOB'，job_type =&gt;'EXECUTABLE'，number_of_arguments =&gt; 3，job_action =&gt;'\ windows \ system32 \ cmd.exe'，auto_drop =&gt; FALSE，credential_name =&gt;'TESTCRED'） ; DBMS_SCHEDULER.SET_JOB_ARGUMENT_VALUE（ 'mkdir_job'，1， '/ C'）; DBMS_SCHEDULER.SET_JOB_ARGUMENT_VALUE（ 'mkdir_job'，2 'MKDIR'）; DBMS_SCHEDULER.SET_JOB_ARGUMENT_VALUE（ 'mkdir_job'，3 '\ TEMP \ extjob_test_dir'）; DBMS_SCHEDULER.ENABLE（ 'MKDIR_JOB'）;结束; /</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-5E28E1EF-CB55-49AE-B7C0-91CE6167D67C__CHDIDGAE">
                           <p class="titleinexample">示例29-6创建本地外部作业并查看作业输出</p>
                           <p>此示例适用于Linux和UNIX，演示如何创建和运行本地外部作业，然后查看作业输出。当外部作业运行时，Scheduler会自动从作业中检索输出并将其存储在数据库中。</p>
                           <p>要查看输出，请查询<code class="codeph">*_SCHEDULER_JOB_RUN_DETAILS</code>视图。
                           </p><pre class="oac_no_warn" dir="ltr">- 用户scott必须具有CREATE JOB，CREATE CREDENTIAL和CREATE EXTERNAL JOB  - 权限GRANT CREATE JOB，CREATE EXTERNAL JOB TO scott; CONNECT scott / <span class="italic">password</span> SET SERVEROUTPUT ON  - 为作业创建凭证以使用exec DBMS_CREDENTIAL.CREATE_CREDENTIAL（'my_cred'，' <span class="italic">host_username</span> '，' <span class="italic">host_passwd</span> '） - 创建列出目录的作业。运行后，作业将被删除。
<code class="codeph">BEGIN</code> DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'lsdir'，job_type =&gt;'EXECUTABLE'，job_action =&gt;'/ bin / ls'，number_of_arguments =&gt; 1，enabled =&gt; false，auto_drop =&gt; true，credential_name =&gt;'my_cred' ）; DBMS_SCHEDULER.SET_JOB_ARGUMENT_VALUE（ 'lsdir'，1， '/ TMP'）; DBMS_SCHEDULER.ENABLE（ 'lsdir'）;结束; /  - 等待作业运行，然后检查作业结果。SELECT job_name，status，error＃，actual_start_date，additional_info FROM user_scheduler_job_run_details WHERE job_name ='LSDIR'; - 现在使用additional_info列中的外部日志ID  - 制定日志文件名并检索输出DECLARE my_clob clob; log_id varchar2（50）; BEGIN SELECT regexp_substr（additional_info，'job [_0-9] *'）INTO log_id FROM user_scheduler_job_run_details WHERE job_name ='LSDIR'; DBMS_LOB.CREATETEMPORARY（my_clob，false）; SELECT job_name，status，error＃，errors，output FROM user_scheduler_job_run_details WHERE job_name ='LSDIR';结束; /</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-5E28E1EF-CB55-49AE-B7C0-91CE6167D67C__GUID-1873B264-457A-4648-84F8-6D9792B2074F">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关外部身份验证的详细信息，请参见<a href="../dbseg/configuring-authentication.html#DBSEG30038" target="_blank"><span class="italic">Oracle数据库安</span></a></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-D49E0D7C-3CA6-41B7-9D48-99DBA26D44E8" title="外部作业运行外部可执行文件。外部可执行文件是在数据库外部运行的操作系统可执行文件，即数据库外部。">外部工作</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-B67B8C2F-B753-4509-927A-E175B6DA2193" title="调度程序为外部作业的实现者提供了一种机制，可以在强制设置为FALSE时调用STOP_JOB时在外部作业之后正常清理。">停止外部工作</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="administering-oracle-scheduler.html#GUID-75AA55B1-D135-47FB-ABA7-61510B018C29" title="远程作业必须与远程主机上的Scheduler代理成功通信。如果远程作业未运行，请首先检查DBA_SCHEDULER_JOBS视图和作业日志。">排除远程作业故障</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-DC75AC5D-525E-497D-B72C-DD906A735FD9" title="您可以使用DBMS_SCHEDULER程序包或Cloud Control创建作业。">创建作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN12392"></a><div class="props_rev_3"><a id="GUID-FAD9894B-0857-41BD-B9C9-6FAA951E7D40" name="GUID-FAD9894B-0857-41BD-B9C9-6FAA951E7D40"></a><h4 id="ADMIN-GUID-FAD9894B-0857-41BD-B9C9-6FAA951E7D40" class="sect4"><span class="enumeration_section">29.2.3</span>改变工作</h4>
                  <div>
                     <p>您可以通过修改其属性来更改作业。您可以使用<code class="codeph">DBMS_SCHEDULER</code>包或Cloud Control中的<code class="codeph">SET_ATTRIBUTE</code> ， <code class="codeph">SET_ATTRIBUTE_NULL</code>或<code class="codeph">SET_JOB_ATTRIBUTES</code>过程执行此操作。
                     </p>
                     <div class="section">
                        <p>有关作业属性的详细信息，请参阅“ <a href="../arpls/DBMS_SCHEDULER.html#ARPLS72235" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考”中</span></a>的<code class="codeph">CREATE_JOB</code>过程。
                        </p>
                        <p>可以更改所有作业，并且除作业名称外，可以更改所有作业属性。如果在进行更改时存在正在运行的作业实例，则它不受该调用的影响。这种变化只能在未来的工作中看到。</p>
                        <p>通常，您不应更改数据库自动为您创建的作业。数据库创建的作业在作业视图中将<code class="codeph">SYSTEM</code>列设置为<code class="codeph">TRUE</code> 。<code class="codeph">*_SCHEDULER_JOBS</code>视图中提供了作业的属性。
                        </p>
                        <p>它对于运行作业来改变自己的作业属性是有效的。但是，这些更改在下一次计划的作业运行之前不会生效。</p>
                        <p>有关<code class="codeph">SET_ATTRIBUTE</code> ， <code class="codeph">SET_ATTRIBUTE_NULL</code>和<code class="codeph">SET_JOB_ATTRIBUTES</code>过程的详细信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72399" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                        <p>以下示例将作业<code class="codeph">update_sales</code>的<code class="codeph">repeat_interval</code>更改为星期三每周一次。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.SET_ATTRIBUTE（name =&gt;'update_sales'，attribute =&gt;'repeat_interval'，value =&gt;'freq = weekly; byday = wed'）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" title="作业是计划和程序的组合，以及程序所需的任何其他参数。">创建，运行和管理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12393"></a><div class="props_rev_3"><a id="GUID-1D534D91-17B2-4405-8D66-800FE824669A" name="GUID-1D534D91-17B2-4405-8D66-800FE824669A"></a><h4 id="ADMIN-GUID-1D534D91-17B2-4405-8D66-800FE824669A" class="sect4"><span class="enumeration_section">29.2.4</span>运行作业</h4>
                  <div>
                     <p>工作可以通过几种不同的方式运行。</p>
                     <div class="section">
                        <p>可以通过三种方式运行作业：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>根据作业计划 - 在这种情况下，如果启用了作业，则作业将由计划程序作业协调程序自动选取，并在作业从站的控制下运行。作业以作业所有者的身份运行，如果是具有凭证的本地外部作业，则作为凭证中指定的用户运行。要确定作业是否成功，您必须查询作业视图（ <code class="codeph">*_SCHEDULER_JOBS</code> ）或作业日志（ <code class="codeph">*_SCHEDULER_JOB_LOG</code>和<code class="codeph">*_SCHEDULER_JOB_RUN_DETAILS</code> ）。有关作业从站和调度程序体系结构的更多信息，请参阅<span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-672A3866-B404-47A1-A0A5-22D7C1F850CE" title="作业从属执行您提交的作业。">作业如何执行</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>发生事件时 - 在事件队列上收到指定事件或文件观察程序引发文件到达事件时，启用基于事件的已启用作业。（请参阅<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-31F260EA-48D0-470A-B66D-E906BA50CAD5" title="Oracle Scheduler可以在发送事件时启动作业。事件是一个应用程序或系统进程发送给另一个应用程序的消息。">使用事件启动作业</a> ”</span> 。）基于事件的作业也在作业从属的控制下运行，并作为拥有该作业的用户运行，或者在具有凭证的本地外部作业的情况下运行，作为凭证中指定的用户。要确定作业是否成功，您必须查询作业视图或作业日志。
                              </p>
                           </li>
                           <li>
                              <p>通过调用<code class="codeph">DBMS_SCHEDULER.RUN_JOB</code> - 您可以使用<code class="codeph">RUN_JOB</code>过程来测试作业或在指定的计划之外运行它。您可以异步运行作业（类似于前两种运行作业的方法），也可以同步运行作业，该作业在调用<code class="codeph">RUN_JOB</code>的会话中运行，并以用户身份登录到该会话。该<code class="codeph">use_current_session</code>的参数<code class="codeph">RUN_JOB</code>确定作业是否同步或异步运行。
                              </p>
                              <p><code class="codeph">RUN_JOB</code>接受以逗号分隔的作业名称列表。
                              </p>
                              <p>以下示例异步运行两个作业：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.RUN_JOB（JOB_NAME =&gt;'DSS.ETLJOB1，DSS.ETLJOB2'，USE_CURRENT_SESSION =&gt; FALSE）;结束; /</pre><div class="infoboxnote" id="GUID-1D534D91-17B2-4405-8D66-800FE824669A__GUID-323E5650-2728-45C9-BB3E-A3F9AC307E24">
                                 <p class="notep1">注意：</p>
                                 <p>没有必要根据其计划调用<code class="codeph">RUN_JOB</code>来运行作业。如果启用了作业，则Scheduler会自动运行它。
                                 </p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" title="作业是计划和程序的组合，以及程序所需的任何其他参数。">创建，运行和管理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12399"></a><div class="props_rev_3"><a id="GUID-193EEB8B-CE39-4F84-BD94-483337A7CEA8" name="GUID-193EEB8B-CE39-4F84-BD94-483337A7CEA8"></a><h4 id="ADMIN-GUID-193EEB8B-CE39-4F84-BD94-483337A7CEA8" class="sect4"><span class="enumeration_section">29.2.5</span>停止工作</h4>
                  <div>
                     <p>使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">STOP_JOB</code>过程停止一个或多个正在运行的作业。
                     </p>
                     <div class="section">
                        <p><code class="codeph">STOP_JOB</code>接受以逗号分隔的作业，作业类和作业目标ID列表。<span class="bold">作业目标ID</span>是由计划程序分配的编号，表示作业，凭据和目标的唯一组合。它可以作为识别多目标作业的特定子作业和仅停止该子作业的便捷方法。您可以从<code class="codeph">*_SCHEDULER_JOB_DESTS</code>视图获取子作业的作业目标ID。
                        </p>
                        <p>如果提供了作业类，则会停止作业类中的所有正在运行的作业。例如，以下语句将停止作业<code class="codeph">job1</code> ，作业类<code class="codeph">dw_jobs</code>中的所有作业以及多目标作业的两个子作业：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER。 <span class="bold">STOP_JOB</span> （'job1，sys.dw_jobs，984,1223'）;结束; /</pre><p>指定作业的所有实例都将停止。停止作业后，一次性作业的状态设置为<code class="codeph">STOPPED</code> ，并且重复作业的状态设置为<code class="codeph">SCHEDULED</code> （因为下一次运行作业已安排）。此外，在作业日志中输入<code class="codeph">OPERATION</code> ， <code class="codeph">OPERATION</code>设置为“ <code class="codeph">STOPPED</code> ”， <code class="codeph">ADDITIONAL_INFO</code>设置为“ <code class="codeph">REASON="Stop job called by user:</code> <span class="italic"><code class="codeph">username"</code></span> '。
                        </p>
                        <p>默认情况下，调度程序尝试使用中断机制正常停止作业。此方法将控制权交还给从属进程，从而可以收集作业运行的统计信息。如果<code class="codeph">force</code>选项设置为<code class="codeph">TRUE</code> ，则作业将突然终止，并且某些运行时统计信息可能无法用于作业运行。
                        </p>
                        <p>停止正在运行链的作业会自动停止所有正在运行的步骤（通过在每个步骤中将<code class="codeph">force</code>选项设置为<code class="codeph">TRUE</code>时调用<code class="codeph">STOP_JOB</code> ）。
                        </p>
                        <p>如果指定了多个作业并且在尝试停止一个或多个作业时发生错误，则可以使用<code class="codeph">STOP_JOB</code>的<code class="codeph">commit_semantics</code>参数来控制结果。如果将此参数设置为<code class="codeph">ABSORB_ERRORS</code> ，则该过程可能会在遇到错误后继续并尝试停止其余作业。如果过程指示发生了错误，则可以查询视图<code class="codeph">SCHEDULER_BATCH_ERRORS</code>以确定错误的性质。有关提交语义的更详细讨论，请参阅<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-33E699C5-E4CF-4147-B287-F56E5D4A9BA8" title="您可以使用DBMS_SCHEDULER程序包或Cloud Control中的DROP_JOB过程删除一个或多个作业。">删除作业</a> ”</span> 。
                        </p>
                        <p>有关<code class="codeph">STOP_JOB</code>过程的详细信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72435" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                        <div class="infoboxnote" id="GUID-193EEB8B-CE39-4F84-BD94-483337A7CEA8__GUID-2A3C982C-6E42-469F-8D28-7ED80AAD0C7E">
                           <p class="notep1">注意：</p>
                           <p>作业停止时，仅回滚当前事务。这可能导致数据不一致。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" title="作业是计划和程序的组合，以及程序所需的任何其他参数。">创建，运行和管理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12400"></a><div class="props_rev_3"><a id="GUID-B67B8C2F-B753-4509-927A-E175B6DA2193" name="GUID-B67B8C2F-B753-4509-927A-E175B6DA2193"></a><h4 id="ADMIN-GUID-B67B8C2F-B753-4509-927A-E175B6DA2193" class="sect4"><span class="enumeration_section">29.2.6</span>停止外部作业</h4>
                  <div>
                     <p>调度程序为外部作业的实现者提供了一种机制，可以在<code class="codeph">force</code>设置为<code class="codeph">FALSE</code>时<code class="codeph">STOP_JOB</code>时在外部作业之后正常清理。</p>
                     <div class="section">
                        <p>本节中描述的机制仅适用于UNIX和Linux平台上的远程外部作业。</p>
                        <p>在UNIX和Linux上， <code class="codeph">SIGTERM</code>信号被发送到调度程序启动的进程。期望外部作业的实现者将<code class="codeph">SIGTERM</code>捕获到中断处理程序中，清除作业完成的任何工作，然后退出。
                        </p>
                        <p>在Windows上， <code class="codeph">STOP_JOB</code> <code class="codeph">force</code>设置为<code class="codeph">FALSE</code> <code class="codeph">STOP_JOB</code> 。Scheduler启动的进程是一个控制台进程。要停止它，Scheduler会向进程发送<code class="codeph">CTRL+BREAK</code> 。可以通过使用<code class="codeph">SetConsoleCtrlHandler()</code>例程注册处理程序来处理<code class="codeph">CTRL+BREAK</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" title="作业是计划和程序的组合，以及程序所需的任何其他参数。">创建，运行和管理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12674"></a><div class="props_rev_3"><a id="GUID-F11AFFEF-69B4-4C5D-9B11-52C5EEA42444" name="GUID-F11AFFEF-69B4-4C5D-9B11-52C5EEA42444"></a><h4 id="ADMIN-GUID-F11AFFEF-69B4-4C5D-9B11-52C5EEA42444" class="sect4"><span class="enumeration_section">29.2.7</span>停止连锁工作</h4>
                  <div>
                     <p>如果停止指向正在运行的链的作业，则停止正在运行的链的所有步骤。</p>
                     <p>有关<span class="q"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E0997FFF-B68F-4130-AD6C-E6DC8A09E4A2" title="You can stop individual chain steps by creating a chain rule that stops one or more steps when the rule condition is met or by calling the STOP_JOB procedure.">停止单个链步骤</a></span>的信息，请参阅<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E0997FFF-B68F-4130-AD6C-E6DC8A09E4A2" title="您可以通过创建在满足规则条件时停止一个或多个步骤的链规则或通过调用STOP_JOB过程来停止单个链步骤。">停止单个链步骤</a> ”</span> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" title="作业是计划和程序的组合，以及程序所需的任何其他参数。">创建，运行和管理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12401"></a><div class="props_rev_3"><a id="GUID-33E699C5-E4CF-4147-B287-F56E5D4A9BA8" name="GUID-33E699C5-E4CF-4147-B287-F56E5D4A9BA8"></a><h4 id="ADMIN-GUID-33E699C5-E4CF-4147-B287-F56E5D4A9BA8" class="sect4"><span class="enumeration_section">29.2.8</span>删除职位</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">DROP_JOB</code>过程删除一个或多个作业。
                     </p>
                     <div class="section">
                        <p><code class="codeph">DROP_JOB</code>接受以逗号分隔的作业和作业类列表。如果提供了作业类，则会删除作业类中的所有作业，但不会删除作业类本身。您不能将作业目标ID与<code class="codeph">DROP_JOB</code>一起使用以删除多目标作业的子项。
                        </p>
                        <p>使用<code class="codeph">DROP_JOB_CLASS</code>过程删除作业类，如<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E3062172-A63D-4935-A83A-BFE0475CA786" title="使用DBMS_SCHEDULER程序包或Cloud Control中的DROP_JOB_CLASS过程删除一个或多个作业类。">删除作业类</a> ”中所述</span> 。
                        </p>
                        <p>以下语句删除作业<code class="codeph">job1</code>和<code class="codeph">job3</code> ，以及作业类<code class="codeph">jobclass1</code>和<code class="codeph">jobclass2</code>所有作业：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER。 <span class="bold">DROP_JOB</span> （'job1，job3，sys.jobclass1，sys.jobclass2'）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" title="作业是计划和程序的组合，以及程序所需的任何其他参数。">创建，运行和管理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13929"></a><div class="props_rev_3"><a id="GUID-9B4805C7-E7F0-4EE6-B549-B141281DB805" name="GUID-9B4805C7-E7F0-4EE6-B549-B141281DB805"></a><h4 id="ADMIN-GUID-9B4805C7-E7F0-4EE6-B549-B141281DB805" class="sect4"><span class="enumeration_section">29.2.9</span>删除正在运行的作业</h4>
                  <div>
                     <p>如果作业在<code class="codeph">DROP_JOB</code>过程调用时运行，则尝试删除作业失败。您可以通过设置<code class="codeph">force</code>或<code class="codeph">defer</code>选项来修改此默认行为。
                     </p>
                     <div class="section">
                        <p>将<code class="codeph">force</code>选项设置为<code class="codeph">TRUE</code> ，Scheduler首先尝试使用中断机制停止正在运行的作业，在<code class="codeph">force</code>选项设置为<code class="codeph">FALSE</code>调用<code class="codeph">STOP_JOB</code> 。如果作业成功停止，则会将其删除。或者，您可以先调用<code class="codeph">STOP_JOB</code>来停止作业，然后调用<code class="codeph">DROP_JOB</code> 。如果<code class="codeph">STOP_JOB</code>失败，只要您具有<code class="codeph">MANAGE SCHEDULER</code>权限，就可以使用<code class="codeph">force</code>选项调用<code class="codeph">STOP_JOB</code> 。然后你可以放弃这份工作。默认情况下，对于<code class="codeph">STOP_JOB</code>和<code class="codeph">DROP_JOB</code>过程， <code class="codeph">force</code>设置为<code class="codeph">FALSE</code> 。
                        </p>
                        <p>将<code class="codeph">defer</code>选项设置为<code class="codeph">TRUE</code> ，允许运行的作业完成然后删除。<code class="codeph">force</code>和<code class="codeph">defer</code>选项是相互排斥的;设置两个都会导致错误。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" title="作业是计划和程序的组合，以及程序所需的任何其他参数。">创建，运行和管理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13930"></a><div class="props_rev_3"><a id="GUID-13969A6C-B6C8-4A9A-894E-4997F2FBA615" name="GUID-13969A6C-B6C8-4A9A-894E-4997F2FBA615"></a><h4 id="ADMIN-GUID-13969A6C-B6C8-4A9A-894E-4997F2FBA615" class="sect4"><span class="enumeration_section">29.2.10</span>删除多个作业</h4>
                  <div>
                     <p>指定要删除的多个作业时，如果其中一个作业发生错误，则<code class="codeph">DBMS_SCHEDULER.DROP_JOB</code>过程的<code class="codeph">commit_semantics</code>参数将确定结果。
                     </p>
                     <div class="section">
                        <p>此参数的可能值为：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">STOP_ON_FIRST_ERROR</code> ，默认值 - 该调用在第一个错误时返回，并将先前成功的删除操作提交到磁盘。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">TRANSACTIONAL</code> - 调用在第一个错误时返回，并在错误之前回滚先前的删除操作。 <code class="codeph">force</code>必须是<code class="codeph">FALSE</code> 。</p>
                           </li>
                           <li>
                              <p><code class="codeph">ABSORB_ERRORS</code> - 调用尝试吸收任何错误，尝试删除其余的作业，并提交所有成功的丢弃。
                              </p>
                           </li>
                        </ul>
                        <p>仅当<code class="codeph">job_name</code>列表中不包含任何作业类时，设置<code class="codeph">commit_semantics</code>才有效。包含作业类时，默认提交语义（ <code class="codeph">STOP_ON_FIRST_ERROR</code> ）生效。
                        </p>
                        <p>以下示例使用<code class="codeph">defer</code>选项删除作业<code class="codeph">myjob1</code>和<code class="codeph">myjob2</code> ，并使用事务提交语义：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DROP_JOB（job_name =&gt;'myjob1，myjob2'，defer =&gt; TRUE，commit_semantics =&gt;' <span class="bold">TRANSACTIONAL</span> '）;结束; /</pre><p>下一个示例说明了<code class="codeph">ABSORB_ERRORS</code>提交语义。假设在调用过程时<code class="codeph">myjob1</code>正在运行而<code class="codeph">myjob2</code>不是。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DROP_JOB（job_name =&gt;'myjob1，myjob2'，commit_semantics =&gt;' <span class="bold">ABSORB_ERRORS</span> '）;结束; /错误报告：ORA-27362：批处理API调用已完成但有错误</pre><p>您可以查询视图<code class="codeph">SCHEDULER_BATCH_ERRORS</code>以确定错误的性质。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT object_name，error_code，error_message FROM scheduler_batch_errors; OBJECT_NAME ERROR CODE ERROR_MESSAGE -------------- ---------- ---------------------- ----------------------------- STEVE.MYJOB1 27478“ORA-27478：工作”STEVE.MYJOB1“正在运行</pre><p>检查<code class="codeph">USER_SCHEDULER_JOBS</code> ，您会发现<code class="codeph">myjob2</code>已成功删除，并且<code class="codeph">myjob1</code>仍然存在。
                        </p>
                        <p>有关<code class="codeph">DROP_JOB</code>过程的详细信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72348" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" title="作业是计划和程序的组合，以及程序所需的任何其他参数。">创建，运行和管理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12402"></a><div class="props_rev_3"><a id="GUID-5BA02BF1-624B-401C-859E-D442E2867425" name="GUID-5BA02BF1-624B-401C-859E-D442E2867425"></a><h4 id="ADMIN-GUID-5BA02BF1-624B-401C-859E-D442E2867425" class="sect4"><span class="enumeration_section">29.2.11</span>禁用作业</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">DISABLE</code>过程禁用一个或多个作业。
                     </p>
                     <div class="section">
                        <p>工作也可以通过其他方式成为残疾人。例如，删除作业类会禁用类作业。删除作业指向的程序或计划，禁用作业。但是，禁用作业指向的程序或计划不会禁用作业，因此，当计划程序尝试运行它们时会导致错误。</p>
                        <p>禁用作业意味着，虽然作业的元数据存在，但它不应该运行，并且作业协调器不会拾取这些作业进行处理。禁用作业时，作业表中的<code class="codeph">state</code>将更改为<code class="codeph">disabled</code> 。
                        </p>
                        <p>当<code class="codeph">force</code>选项设置为<code class="codeph">FALSE</code>禁用当前正在运行的作业时，将返回错误。当<code class="codeph">force</code>设置为<code class="codeph">TRUE</code> ，作业被禁用，但允许当前运行的实例完成。
                        </p>
                        <p>如果<code class="codeph">commit_semantics</code>设置为<code class="codeph">STOP_ON_FIRST_ERROR</code> ，则调用将在第一个错误时返回，并且先前成功的禁用操作将提交到磁盘。如果<code class="codeph">commit_semantics</code>设置为<code class="codeph">TRANSACTIONAL</code>并且<code class="codeph">force</code>设置为<code class="codeph">FALSE</code> ，则调用将在第一个错误时返回，并在错误之前回滚先前的禁用操作。如果<code class="codeph">commit_semantics</code>设置为<code class="codeph">ABSORB_ERRORS</code> ，则调用将尝试吸收任何错误并尝试禁用其余作业并提交所有成功的禁用操作。如果过程指示发生了错误，则可以查询视图<code class="codeph">SCHEDULER_BATCH_ERRORS</code>以确定错误的性质。
                        </p>
                        <p>默认情况下， <code class="codeph">commit_semantics</code>设置为<code class="codeph">STOP_ON_FIRST_ERROR</code> 。</p>
                        <p>您还可以通过为<code class="codeph">DISABLE</code>过程调用提供以逗号分隔的作业名称或作业类名称列表，在一次调用中禁用多个作业。例如，以下语句将作业与作业类组合在一起：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DISABLE（'job1，job2，job3，sys.jobclass1，sys.jobclass2'）;结束; /</pre><p>有关<code class="codeph">DISABLE</code>过程的详细信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72330" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" title="作业是计划和程序的组合，以及程序所需的任何其他参数。">创建，运行和管理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12403"></a><div class="props_rev_3"><a id="GUID-88667391-03D3-4245-913D-C1FA760907FD" name="GUID-88667391-03D3-4245-913D-C1FA760907FD"></a><h4 id="ADMIN-GUID-88667391-03D3-4245-913D-C1FA760907FD" class="sect4"><span class="enumeration_section">29.2.12</span>启用作业</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">ENABLE</code>过程启用一个或多个作业。
                     </p>
                     <div class="section">
                        <p>此过程的效果是作业将由作业协调员拾取以进行处理。默认情况下会创建作业，因此必须先启用它们才能运行。启用作业后，将执行有效性检查。如果检查失败，则不会启用该作业。</p>
                        <p>如果启用已禁用的作业，则会根据其计划立即开始运行。启用已禁用的作业还会重置作业<code class="codeph">RUN_COUNT</code> ， <code class="codeph">FAILURE_COUNT</code>和<code class="codeph">RETRY_COUNT</code>属性。
                        </p>
                        <p>如果<code class="codeph">commit_semantics</code>设置为<code class="codeph">STOP_ON_FIRST_ERROR</code> ，则调用将在第一个错误时返回，并且先前成功的启用操作将提交到磁盘。如果<code class="codeph">commit_semantics</code>设置为<code class="codeph">TRANSACTIONAL</code> ，则在回滚错误之前，调用将返回第一个错误和先前的启用操作。如果<code class="codeph">commit_semantics</code>设置为<code class="codeph">ABSORB_ERRORS</code> ，则调用将尝试吸收任何错误并尝试启用其余作业并提交所有成功的启用操作。如果过程指示发生了错误，则可以查询视图<code class="codeph">SCHEDULER_BATCH_ERRORS</code>以确定错误的性质。
                        </p>
                        <p>默认情况下， <code class="codeph">commit_semantics</code>设置为<code class="codeph">STOP_ON_FIRST_ERROR</code> 。</p>
                        <p>您可以通过为<code class="codeph">ENABLE</code>过程调用提供以逗号分隔的作业名称或作业类名称列表，在一次调用中启用多个作业。例如，以下语句将作业与作业类组合在一起：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.ENABLE（'job1，job2，job3，sys.jobclass1，sys.jobclass2，sys.jobclass3'）;结束; /</pre><p>有关<code class="codeph">ENABLE</code>过程的详细信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72362" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" title="作业是计划和程序的组合，以及程序所需的任何其他参数。">创建，运行和管理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12391"></a><div class="props_rev_3"><a id="GUID-75F146D6-FE93-4423-8051-DE580458A48F" name="GUID-75F146D6-FE93-4423-8051-DE580458A48F"></a><h4 id="ADMIN-GUID-75F146D6-FE93-4423-8051-DE580458A48F" class="sect4"><span class="enumeration_section">29.2.13</span>复制作业</h4>
                  <div>
                     <p>使用<code class="codeph">DBMS_SCHEDULER</code>或Cloud Control中的<code class="codeph">COPY_JOB</code>过程复制作业。
                     </p>
                     <div class="section">
                        <p>此调用将旧作业的所有属性复制到新作业（作业名称除外）。新作业已禁用。</p>
                        <p>有关<code class="codeph">COPY_JOB</code>过程的详细信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72288" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-36A19019-DC54-4CCF-8BB4-9DD40DA9FA01" title="作业是计划和程序的组合，以及程序所需的任何其他参数。">创建，运行和管理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN12404"></a><div class="props_rev_3"><a id="GUID-4ADA6AC6-FEBA-4D06-8B55-672A88481DEE" name="GUID-4ADA6AC6-FEBA-4D06-8B55-672A88481DEE"></a><h3 id="ADMIN-GUID-4ADA6AC6-FEBA-4D06-8B55-672A88481DEE" class="sect3"><span class="enumeration_section">29.3</span>创建和管理程序以定义作业</h3>
               <div>
                  <p>程序是关于特定任务的元数据的集合。您可以选择使用程序来帮助定义作业。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-605AD63A-5F7C-4D99-839D-381A058887F9">程序任务及其程序</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见的程序任务。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0E7FDB91-AE4D-42CE-A7E9-2E9DF2BF3FBD">使用计划程序创建程序</a><br>程序描述了调度程序要运行的内容。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-C45794E8-994F-47F8-8580-4086D6CD36F4">改变计划</a><br>您可以通过修改其属性来更改程序。您可以使用Cloud Control或<code class="codeph">DBMS_SCHEDULER.SET_ATTRIBUTE</code>和<code class="codeph">DBMS_SCHEDULER.SET_ATTRIBUTE_NULL</code>包过程来更改程序。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-C74F7662-1B4D-454C-BACD-297111B9F98C">删除程序</a><br>使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">DROP_PROGRAM</code>过程删除一个或多个程序。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-ACD18302-BCF7-4D91-8601-F3751B95E601">禁用程序</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">DISABLE</code>过程禁用一个或多个程序。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7251411F-BFD8-4DBB-ADE4-06BA7CF55AB1">启用程序</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">ENABLE</code>过程启用一个或多个程序。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-4ADA6AC6-FEBA-4D06-8B55-672A88481DEE__GUID-EC3EE680-0176-42CE-A5E5-CBB88D3B82B0">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-58254092-5BE5-459F-B99B-F7CE021C6C0D" title="程序对象（程序）描述了调度程序要运行的内容。">程序</a> ”</span>用于概述程序。
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" title="您可以使用Oracle Scheduler创建，运行和管理作业。">使用Oracle Scheduler调度作业</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13097"></a><a id="ADMIN12405"></a><div class="props_rev_3"><a id="GUID-605AD63A-5F7C-4D99-839D-381A058887F9" name="GUID-605AD63A-5F7C-4D99-839D-381A058887F9"></a><h4 id="ADMIN-GUID-605AD63A-5F7C-4D99-839D-381A058887F9" class="sect4"><span class="enumeration_section">29.3.1</span>程序任务及其程序</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见的程序任务。
                     </p>
                     <div class="section">
                        <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-605AD63A-5F7C-4D99-839D-381A058887F9__g1033899" title="第1列列出了一些常见的程序任务;第2列显示将执行任务的过程;第3列列出了执行任务所需的权限。">表29-3</a>说明了常见的程序任务及其适当的过程和权限：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-605AD63A-5F7C-4D99-839D-381A058887F9__g1033899">
                        <p class="titleintable">表29-3程序任务及其过程</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="程序任务及其程序" width="100%" border="1" summary="Column 1 lists some common program tasks; column 2 displays the procedure that will perform the task; column 3 lists the privileges required to perform the task." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="21%" id="d268851e4244">任务</th>
                                 <th align="left" valign="bottom" width="21%" id="d268851e4247">程序</th>
                                 <th align="left" valign="bottom" width="57%" id="d268851e4250">需要特权</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d268851e4255" headers="d268851e4244 ">
                                    <p>创建一个程序</p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d268851e4255 d268851e4247 ">
                                    <p><code class="codeph">CREATE_PROGRAM</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d268851e4255 d268851e4250 ">
                                    <p><code class="codeph">CREATE</code> <code class="codeph">JOB</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d268851e4280" headers="d268851e4244 ">
                                    <p>改变一个程序</p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d268851e4280 d268851e4247 ">
                                    <p><code class="codeph">SET_ATTRIBUTE</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d268851e4280 d268851e4250 ">
                                    <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d268851e4303" headers="d268851e4244 ">
                                    <p>放弃一个程序</p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d268851e4303 d268851e4247 ">
                                    <p><code class="codeph">DROP_PROGRAM</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d268851e4303 d268851e4250 ">
                                    <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d268851e4326" headers="d268851e4244 ">
                                    <p>禁用程序</p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d268851e4326 d268851e4247 ">
                                    <p><code class="codeph">DISABLE</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d268851e4326 d268851e4250 ">
                                    <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d268851e4349" headers="d268851e4244 ">
                                    <p>启用程序</p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d268851e4349 d268851e4247 ">
                                    <p><code class="codeph">ENABLE</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d268851e4349 d268851e4250 ">
                                    <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>有关<span class="q"><a href="administering-oracle-scheduler.html#GUID-7E0B2F16-EE4F-42F3-BF73-82C147D5E8F1" title="Users can be granted various Scheduler privileges.">权限</a></span>的详细信息，请参阅<span class="q">“ <a href="administering-oracle-scheduler.html#GUID-7E0B2F16-EE4F-42F3-BF73-82C147D5E8F1" title="可以为用户授予各种Scheduler权限。">计划程序权限</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4ADA6AC6-FEBA-4D06-8B55-672A88481DEE" title="程序是关于特定任务的元数据的集合。您可以选择使用程序来帮助定义作业。">创建和管理程序以定义作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-0E7FDB91-AE4D-42CE-A7E9-2E9DF2BF3FBD" name="GUID-0E7FDB91-AE4D-42CE-A7E9-2E9DF2BF3FBD"></a><h4 id="ADMIN-GUID-0E7FDB91-AE4D-42CE-A7E9-2E9DF2BF3FBD" class="sect4"><span class="enumeration_section">29.3.2</span>使用计划程序创建程序</h4>
                  <p>程序描述了调度程序要运行的内容。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-93B19FEB-FC0B-4D08-A26E-255B25BCEDDE">创建程序</a><br>您可以使用<code class="codeph">CREATE_PROGRAM</code>过程或Cloud Control创建程序。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D5F752A0-E00F-4F16-908A-974CE63588F1">定义程序参数</a><br>创建程序后，您可以定义程序参数。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4ADA6AC6-FEBA-4D06-8B55-672A88481DEE" title="程序是关于特定任务的元数据的集合。您可以选择使用程序来帮助定义作业。">创建和管理程序以定义作业</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN12406"></a><div class="props_rev_3"><a id="GUID-93B19FEB-FC0B-4D08-A26E-255B25BCEDDE" name="GUID-93B19FEB-FC0B-4D08-A26E-255B25BCEDDE"></a><h5 id="ADMIN-GUID-93B19FEB-FC0B-4D08-A26E-255B25BCEDDE" class="sect5"><span class="enumeration_section">29.3.2.1</span>创建程序</h5>
                     <div>
                        <p>您可以使用<code class="codeph">CREATE_PROGRAM</code>过程或Cloud Control创建程序。
                        </p>
                        <div class="section">
                           <p>默认情况下，程序是在创建者的架构中创建的。要在另一个用户的模式中创建程序，必须使用模式名称限定程序名称。对于其他用户使用您的程序，他们必须对程序具有<code class="codeph">EXECUTE</code>权限，因此，一旦创建了程序，您必须为其授予<code class="codeph">EXECUTE</code>特权。
                           </p>
                           <p>以下示例创建一个名为<code class="codeph">my_program1</code>的程序：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_PROGRAM（program_name =&gt;'my_program1'，program_action =&gt;'/ usr / local / bin / date'，program_type =&gt;'EXECUTABLE'，comments =&gt;'我的评论在这里'）;结束; /</pre><p>默认情况下，程序以禁用状态创建;必须先启用它们，然后才能启用指向它们的作业。</p>
                           <p>不要试图让需要参数定义所有的程序参数，你必须在做之前，程序<code class="codeph">DEFINE_</code> <span class="italic"><code class="codeph">XXX</code></span> <code class="codeph">_ARGUMENT</code>的方法，由<span class="q">“</span>描述<span class="q"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D5F752A0-E00F-4F16-908A-974CE63588F1" title="创建程序后，您可以定义程序参数。">定义程序参数</a> ”。</span>
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0E7FDB91-AE4D-42CE-A7E9-2E9DF2BF3FBD" title="程序描述了调度程序要运行的内容。">使用计划程序创建程序</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12407"></a><div class="props_rev_3"><a id="GUID-D5F752A0-E00F-4F16-908A-974CE63588F1" name="GUID-D5F752A0-E00F-4F16-908A-974CE63588F1"></a><h5 id="ADMIN-GUID-D5F752A0-E00F-4F16-908A-974CE63588F1" class="sect5"><span class="enumeration_section">29.3.2.2</span>定义程序参数</h5>
                     <div>
                        <p>创建程序后，您可以定义程序参数。</p>
                        <div class="section">
                           <p>您可以按调用序列中的位置定义参数，并带有可选的参数名称和可选的默认值。如果没有为程序参数定义缺省值，则引用该程序的作业必须提供参数值。（作业也可以覆盖默认值。）必须先定义所有参数值，然后才能启用作业。</p>
                           <p>要设置程序参数值，请使用<code class="codeph">DEFINE_PROGRAM_ARGUMENT</code>或<code class="codeph">DEFINE_ANYDATA_ARGUMENT</code>过程。对于必须封装在<code class="codeph">ANYDATA</code>对象中的复杂类型，请使用<code class="codeph">DEFINE_ANYDATA_ARGUMENT</code> 。可能需要参数的程序示例是启动需要开始日期和结束日期的报告程序的示例。以下代码示例设置结束日期参数，该参数是报告程序所期望的第二个参数。该示例还为参数指定了一个名称，以便您可以通过名称（而不是位置）从其他包过程引用参数，包括<code class="codeph">SET_JOB_ANYDATA_VALUE</code>和<code class="codeph">SET_JOB_ARGUMENT_VALUE</code> 。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DEFINE_PROGRAM_ARGUMENT（program_name =&gt;'operations_reporting'，argument_position =&gt; 2，argument_name =&gt;'end_date'，argument_type =&gt;'VARCHAR2'，default_value =&gt; '12 -DEC-03'）;结束; /</pre><p><code class="codeph">argument_type</code>参数的有效值必须是SQL数据类型，因此不支持布尔值。对于外部可执行文件，仅允许使用<code class="codeph">CHAR</code>或<code class="codeph">VARCHAR2</code>等字符串类型。
                           </p>
                           <p>您可以按名称或按位置删除程序参数，如下所示：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DROP_PROGRAM_ARGUMENT（program_name =&gt;'operations_reporting'，argument_position =&gt; 2）; DBMS_SCHEDULER.DROP_PROGRAM_ARGUMENT（program_name =&gt;'operations_reporting'，argument_name =&gt;'end_date'）;结束; /</pre><p>在某些特殊情况下，程序逻辑取决于Scheduler环境。Scheduler有一些预定义的元数据参数，可以作为参数传递给程序用于此目的。例如，对于某些日程安排为窗口名称的作业，了解作业启动时窗口打开的时间会很有用。这可以通过将窗口结束时间定义为程序的元数据参数来实现。</p>
                           <p>如果程序需要访问特定的作业元数据，则可以使用<code class="codeph">DEFINE_METADATA_ARGUMENT</code>过程定义特殊的元数据参数，因此在执行程序时，Scheduler将填充值。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-D5F752A0-E00F-4F16-908A-974CE63588F1__GUID-7815C8C0-BFD2-4155-8572-46E474539113">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-B20C6C61-66B3-4A8D-8AA6-A160291110D6" title="要设置作业参数，请使用SET_JOB_ARGUMENT_VALUE或SET_JOB_ANYDATA_VALUE过程或Cloud Control。SET_JOB_ANYDATA_VALUE用于无法表示为VARCHAR2字符串的复杂数据类型。">设置工作参数</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0E7FDB91-AE4D-42CE-A7E9-2E9DF2BF3FBD" title="程序描述了调度程序要运行的内容。">使用计划程序创建程序</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN12408"></a><div class="props_rev_3"><a id="GUID-C45794E8-994F-47F8-8580-4086D6CD36F4" name="GUID-C45794E8-994F-47F8-8580-4086D6CD36F4"></a><h4 id="ADMIN-GUID-C45794E8-994F-47F8-8580-4086D6CD36F4" class="sect4"><span class="enumeration_section">29.3.3</span>改变程序</h4>
                  <div>
                     <p>您可以通过修改其属性来更改程序。您可以使用Cloud Control或<code class="codeph">DBMS_SCHEDULER.SET_ATTRIBUTE</code>和<code class="codeph">DBMS_SCHEDULER.SET_ATTRIBUTE_NULL</code>包过程来更改程序。
                     </p>
                     <div class="section">
                        <p>有关程序属性的详细信息，请参阅“ <a href="../arpls/DBMS_SCHEDULER.html#ARPLS72306" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考”中</span></a>的<code class="codeph">DBMS_SCHEDULER.CREATE_PROGRAM</code>过程。
                        </p>
                        <p>如果当前正在运行的任何作业使用您更改的程序，它们将继续使用alter操作之前定义的程序运行。</p>
                        <p>以下示例更改程序<code class="codeph">my_program1</code>运行的可执行文件：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.SET_ATTRIBUTE（name =&gt;'my_program1'，attribute =&gt;' <span class="bold">program_action</span> '，value =&gt;'/ usr / local / bin / salesreports1'）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4ADA6AC6-FEBA-4D06-8B55-672A88481DEE" title="程序是关于特定任务的元数据的集合。您可以选择使用程序来帮助定义作业。">创建和管理程序以定义作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12409"></a><div class="props_rev_3"><a id="GUID-C74F7662-1B4D-454C-BACD-297111B9F98C" name="GUID-C74F7662-1B4D-454C-BACD-297111B9F98C"></a><h4 id="ADMIN-GUID-C74F7662-1B4D-454C-BACD-297111B9F98C" class="sect4"><span class="enumeration_section">29.3.4</span>删除程序</h4>
                  <div>
                     <p>使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">DROP_PROGRAM</code>过程删除一个或多个程序。
                     </p>
                     <div class="section">
                        <p>删除程序时，也会删除与其相关的任何参数。您可以通过提供以逗号分隔的程序名列表，在一个调用中删除多个程序。例如，以下语句删除了三个程序：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DROP_PROGRAM（'program1，program2，program3'）;结束; /</pre><p>指向程序的运行作业不受<code class="codeph">DROP_PROGRAM</code>调用的影响，并且允许继续。
                        </p>
                        <p>如果将<code class="codeph">force</code>参数设置为<code class="codeph">TRUE</code> ，则禁用指向此程序的作业，并删除该程序。如果将<code class="codeph">force</code>参数设置为<code class="codeph">FALSE</code> （默认值），则在有任何指向该程序的作业时，调用将失败。
                        </p>
                        <p>有关<code class="codeph">DROP_PROGRAM</code>过程的详细信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72352" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4ADA6AC6-FEBA-4D06-8B55-672A88481DEE" title="程序是关于特定任务的元数据的集合。您可以选择使用程序来帮助定义作业。">创建和管理程序以定义作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12410"></a><div class="props_rev_3"><a id="GUID-ACD18302-BCF7-4D91-8601-F3751B95E601" name="GUID-ACD18302-BCF7-4D91-8601-F3751B95E601"></a><h4 id="ADMIN-GUID-ACD18302-BCF7-4D91-8601-F3751B95E601" class="sect4"><span class="enumeration_section">29.3.5</span>禁用程序</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">DISABLE</code>过程禁用一个或多个程序。
                     </p>
                     <div class="section">
                        <p>禁用程序时，状态将更改为<code class="codeph">disabled</code> 。禁用程序意味着，尽管元数据仍然存在，但指向此程序的作业无法运行。
                        </p>
                        <p><code class="codeph">DISABLE</code>调用不会影响指向程序的正在运行的作业，并且允许它们继续运行。此外，禁用该程序不会影响任何与其相关的参数。
                        </p>
                        <p>还可以通过其他方式禁用程序，例如，如果删除程序参数或更改<code class="codeph">number_of_arguments</code>以便不定义任何参数。
                        </p>
                        <p>有关<code class="codeph">DISABLE</code>过程的详细信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72330" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4ADA6AC6-FEBA-4D06-8B55-672A88481DEE" title="程序是关于特定任务的元数据的集合。您可以选择使用程序来帮助定义作业。">创建和管理程序以定义作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12411"></a><div class="props_rev_3"><a id="GUID-7251411F-BFD8-4DBB-ADE4-06BA7CF55AB1" name="GUID-7251411F-BFD8-4DBB-ADE4-06BA7CF55AB1"></a><h4 id="ADMIN-GUID-7251411F-BFD8-4DBB-ADE4-06BA7CF55AB1" class="sect4"><span class="enumeration_section">29.3.6</span>启用程序</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">ENABLE</code>过程启用一个或多个程序。
                     </p>
                     <div class="section">
                        <p>启用程序时，启用标志设置为<code class="codeph">TRUE</code> 。默认情况下会禁用程序，因此，必须先启用它们，然后才能启用指向它们的作业。在启用程序之前，将执行有效性检查以确保操作有效并且已定义所有参数。
                        </p>
                        <p>您可以通过为<code class="codeph">ENABLE</code>过程调用提供以逗号分隔的程序名列表，在一个调用中启用多个程序。例如，以下语句启用三个程序：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.ENABLE（'program1，program2，program3'）;结束; /</pre><p>有关<code class="codeph">ENABLE</code>过程的详细信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72362" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4ADA6AC6-FEBA-4D06-8B55-672A88481DEE" title="程序是关于特定任务的元数据的集合。您可以选择使用程序来帮助定义作业。">创建和管理程序以定义作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN12412"></a><div class="props_rev_3"><a id="GUID-7F50C410-8818-49C3-B762-82BB24D86719" name="GUID-7F50C410-8818-49C3-B762-82BB24D86719"></a><h3 id="ADMIN-GUID-7F50C410-8818-49C3-B762-82BB24D86719" class="sect3"><span class="enumeration_section">29.4</span>创建和管理计划以定义作业</h3>
               <div>
                  <p>您可以选择使用计划对象（计划）来定义应该运行作业的时间。通过在数据库中创建和保存计划作为对象，可以在用户之间共享计划。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-1569AFAC-37FA-486C-B5E7-1514F9AC5874">安排任务及其程序</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见的计划任务。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-CC108608-5EAB-4A01-A4EF-AC874A82DD7D">创建计划</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包或Cloud Control中的<code class="codeph">CREATE_SCHEDULE</code>过程创建计划。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E22E208A-30A5-478B-AD5D-70798B9E003F">改变时间表</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">SET_ATTRIBUTE</code>和<code class="codeph">SET_ATTRIBUTE_NULL</code>过程来更改计划。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-6C23A724-E97C-43A2-A83C-A9014031DDA6">删除时间表</a><br>您使用<code class="codeph">DBMS_SCHEDULER</code>包或Cloud Control中的<code class="codeph">DROP_SCHEDULE</code>过程删除计划。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-10B1E444-8330-4EC9-85F8-9428D749F7D5">设置重复间隔</a><br>您可以控制作业重复的时间和频率。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-7F50C410-8818-49C3-B762-82BB24D86719__GUID-EE58A70E-B203-4F6C-81FE-B7092BD11A55">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-59B6DF3D-07C5-44D8-B297-1E7CDEC2C95E" title="计划对象（计划）指定作业运行的时间和次数。">时间表</a> ”</span>用于概览时间表。
                           </p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-15FA5A41-C7F0-4DFA-A668-07C0265F9550" title="Windows提供了一种在不同时间自动激活不同资源计划的方法。然后，当资源计划发生更改时，正在运行的作业可以看到分配给它们的资源发生更改。">使用Windows管理作业调度和作业优先级</a> ”</span>和<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-44C97065-09C4-48F5-8388-FB06FA53229F" title="窗口组提供了一种简单的方法来安排必须在一天，一周等多个时间段内运行的作业。如果创建窗口组，向其添加窗口，然后在作业的schedule_name属性中将此窗口组命名，则作业将在窗口组中的所有窗口中运行。窗口组驻留在SYS架构中。">使用窗口组管理作业调度和作业优先级</a> ”</span>以在管理作业资源使用的同时调度作业</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" title="您可以使用Oracle Scheduler创建，运行和管理作业。">使用Oracle Scheduler调度作业</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13098"></a><a id="ADMIN12413"></a><div class="props_rev_3"><a id="GUID-1569AFAC-37FA-486C-B5E7-1514F9AC5874" name="GUID-1569AFAC-37FA-486C-B5E7-1514F9AC5874"></a><h4 id="ADMIN-GUID-1569AFAC-37FA-486C-B5E7-1514F9AC5874" class="sect4"><span class="enumeration_section">29.4.1</span>计划任务及其程序</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见的计划任务。
                     </p>
                     <div class="section">
                        <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-1569AFAC-37FA-486C-B5E7-1514F9AC5874__g1033935" title="第1列liss一些常见的计划任务;第2列显示将执行任务的过程;第3列列出了任务所需的权限。">表29-4</a>说明了常见的计划任务以及用于处理它们的过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-1569AFAC-37FA-486C-B5E7-1514F9AC5874__g1033935">
                        <p class="titleintable">表29-4计划任务及其过程</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="安排任务及其程序" width="100%" border="1" summary="Column 1 liss some common schedule tasks; column 2 displays the procedure that will perform the task; column 3 list the privileges required for the task." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="21%" id="d268851e5118">任务</th>
                                 <th align="left" valign="bottom" width="21%" id="d268851e5121">程序</th>
                                 <th align="left" valign="bottom" width="57%" id="d268851e5124">需要特权</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d268851e5129" headers="d268851e5118 ">
                                    <p>创建计划</p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d268851e5129 d268851e5121 ">
                                    <p><code class="codeph">CREATE_SCHEDULE</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d268851e5129 d268851e5124 ">
                                    <p><code class="codeph">CREATE</code> <code class="codeph">JOB</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d268851e5154" headers="d268851e5118 ">
                                    <p>改变时间表</p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d268851e5154 d268851e5121 ">
                                    <p><code class="codeph">SET_ATTRIBUTE</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d268851e5154 d268851e5124 ">
                                    <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d268851e5177" headers="d268851e5118 ">
                                    <p>放下一个时间表</p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d268851e5177 d268851e5121 ">
                                    <p><code class="codeph">DROP_SCHEDULE</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d268851e5177 d268851e5124 ">
                                    <p><code class="codeph">ALTER</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或成为所有者</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>有关详细信息，请参阅<span class="q">“ <a href="administering-oracle-scheduler.html#GUID-7E0B2F16-EE4F-42F3-BF73-82C147D5E8F1" title="可以为用户授予各种Scheduler权限。">计划程序权限</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7F50C410-8818-49C3-B762-82BB24D86719" title="您可以选择使用计划对象（计划）来定义应该运行作业的时间。通过在数据库中创建和保存计划作为对象，可以在用户之间共享计划。">创建和管理定义作业的计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12414"></a><div class="props_rev_3"><a id="GUID-CC108608-5EAB-4A01-A4EF-AC874A82DD7D" name="GUID-CC108608-5EAB-4A01-A4EF-AC874A82DD7D"></a><h4 id="ADMIN-GUID-CC108608-5EAB-4A01-A4EF-AC874A82DD7D" class="sect4"><span class="enumeration_section">29.4.2</span>创建计划</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包或Cloud Control中的<code class="codeph">CREATE_SCHEDULE</code>过程创建计划。
                     </p>
                     <div class="section">
                        <p>计划在创建计划的用户的模式中创建，并在首次创建时启用。您可以在其他用户的架构中创建计划。创建计划后，其他用户可以使用它。创建计划时可以访问<code class="codeph">PUBLIC</code> 。因此，无需明确授予对计划的访问权限。以下示例创建一个计划：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_SCHEDULE（schedule_name =&gt;'my_stats_schedule'，start_date =&gt; SYSTIMESTAMP，end_date =&gt; SYSTIMESTAMP + INTERVAL'30'日，repeat_interval =&gt;'FREQ = HOURLY; INTERVAL = 4'，评论=&gt;'每4小时'） ;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-CC108608-5EAB-4A01-A4EF-AC874A82DD7D__GUID-A8E552C3-607A-4315-970A-4CD26DB1626B">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">CREATE_SCHEDULE</code>过程的详细信息，请<code class="codeph">CREATE_SCHEDULE</code> <a href="../arpls/DBMS_SCHEDULER.html#ARPLS72308" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                              </p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5ED0E0D8-05B4-4DDA-839E-0AE9142000D4" title="您可以创建基于事件的计划。然后，您可以重复使用多个作业的计划。为此，请使用CREATE_EVENT_SCHEDULE过程，或使用Cloud Control。">创建活动日程表</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7F50C410-8818-49C3-B762-82BB24D86719" title="您可以选择使用计划对象（计划）来定义应该运行作业的时间。通过在数据库中创建和保存计划作为对象，可以在用户之间共享计划。">创建和管理定义作业的计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12415"></a><div class="props_rev_3"><a id="GUID-E22E208A-30A5-478B-AD5D-70798B9E003F" name="GUID-E22E208A-30A5-478B-AD5D-70798B9E003F"></a><h4 id="ADMIN-GUID-E22E208A-30A5-478B-AD5D-70798B9E003F" class="sect4"><span class="enumeration_section">29.4.3修改</span>时间表</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">SET_ATTRIBUTE</code>和<code class="codeph">SET_ATTRIBUTE_NULL</code>过程来更改计划。
                     </p>
                     <div class="section">
                        <p>更改计划会更改计划的定义。除了计划名称，可以更改所有属性。<code class="codeph">*_SCHEDULER_SCHEDULES</code>视图中提供了计划的属性。
                        </p>
                        <p>如果更改了计划，则更改不会影响正在运行的作业并打开使用此计划的窗口。更改将在下次作业运行或窗口打开时生效。</p>
                        <p>有关<code class="codeph">SET_ATTRIBUTE</code>过程的详细信息，请参见<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72399" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7F50C410-8818-49C3-B762-82BB24D86719" title="您可以选择使用计划对象（计划）来定义应该运行作业的时间。通过在数据库中创建和保存计划作为对象，可以在用户之间共享计划。">创建和管理定义作业的计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12416"></a><div class="props_rev_3"><a id="GUID-6C23A724-E97C-43A2-A83C-A9014031DDA6" name="GUID-6C23A724-E97C-43A2-A83C-A9014031DDA6"></a><h4 id="ADMIN-GUID-6C23A724-E97C-43A2-A83C-A9014031DDA6" class="sect4"><span class="enumeration_section">29.4.4</span>删除计划</h4>
                  <div>
                     <p>您使用<code class="codeph">DBMS_SCHEDULER</code>包或Cloud Control中的<code class="codeph">DROP_SCHEDULE</code>过程删除计划。
                     </p>
                     <div class="section">
                        <p>此过程调用将从数据库中删除计划对象。</p>
                        <p>有关<code class="codeph">DROP_SCHEDULE</code>过程的详细信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72356" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7F50C410-8818-49C3-B762-82BB24D86719" title="您可以选择使用计划对象（计划）来定义应该运行作业的时间。通过在数据库中创建和保存计划作为对象，可以在用户之间共享计划。">创建和管理定义作业的计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-10B1E444-8330-4EC9-85F8-9428D749F7D5" name="GUID-10B1E444-8330-4EC9-85F8-9428D749F7D5"></a><h4 id="ADMIN-GUID-10B1E444-8330-4EC9-85F8-9428D749F7D5" class="sect4"><span class="enumeration_section">29.4.5</span>设置重复间隔</h4>
                  <p>您可以控制作业重复的时间和频率。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-CDAC9D52-61F2-484B-BF5E-874EDEAE2CD2">关于设置重复间隔</a><br>您可以通过设置作业本身的<code class="codeph">repeat_interval</code>属性或作业引用的命名计划来控制作业重复的时间和频率。您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包过程或使用Cloud Control设置<code class="codeph">repeat_interval</code> 。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-041A5002-4176-4C93-99C2-09E2E889BB1F">使用Scheduler Calendaring语法</a><br>设置作业重复频率的主要方法是使用Scheduler日历表达式设置<code class="codeph">repeat_interval</code>属性。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-738EAD75-5FD9-4824-A32D-47FFCB502609">使用PL / SQL表达式</a><br>当您需要比日历语法提供的更复杂的功能时，您可以使用PL / SQL表达式。但是，您不能将PL / SQL表达式用于窗口或命名的日程表。PL / SQL表达式必须计算为日期或时间戳。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-10C3D6D7-5F9E-456E-916E-EEEAEBFB4663">PL / SQL表达式与日历语法行为之间的差异</a><br>日历表达式与PL / SQL重复间隔之间的行为存在重要差异。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-A4772D1C-9917-4850-A5AD-D59ADF8577F0">重复间隔和夏令时</a><br>对于重复作业，下次计划运行作业时将存储在带有时区列的时间戳中。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7F50C410-8818-49C3-B762-82BB24D86719" title="您可以选择使用计划对象（计划）来定义应该运行作业的时间。通过在数据库中创建和保存计划作为对象，可以在用户之间共享计划。">创建和管理定义作业的计划</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN10040"></a><div class="props_rev_3"><a id="GUID-CDAC9D52-61F2-484B-BF5E-874EDEAE2CD2" name="GUID-CDAC9D52-61F2-484B-BF5E-874EDEAE2CD2"></a><h5 id="ADMIN-GUID-CDAC9D52-61F2-484B-BF5E-874EDEAE2CD2" class="sect5"><span class="enumeration_section">29.4.5.1</span>关于设置重复间隔</h5>
                     <div>
                        <p>您可以通过设置作业本身的<code class="codeph">repeat_interval</code>属性或作业引用的命名计划来控制作业重复的时间和频率。您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包过程或使用Cloud Control设置<code class="codeph">repeat_interval</code> 。
                        </p>
                        <p>评估<code class="codeph">repeat_interval</code>产生一组时间戳。Scheduler在每个时间戳运行作业。请注意，作业或计划的开始日期也有助于确定生成的时间戳集。如果未指定<code class="codeph">repeat_interval</code>值，则作业仅在指定的开始日期运行一次。
                        </p>
                        <p>作业开始后，立即评估<code class="codeph">repeat_interval</code>以确定作业的下一个计划执行时间。虽然这可能在作业仍在运行时到达，但是在当前作业完成之前，新作业实例才会启动。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-CDAC9D52-61F2-484B-BF5E-874EDEAE2CD2__GUID-FEEC7F65-7631-45B5-BD80-D8B854AE5BBE">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">repeat_interval</code>求值的更多信息，请<code class="codeph">repeat_interval</code> <a href="../arpls/DBMS_SCHEDULER.html#ARPLS72262" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-10B1E444-8330-4EC9-85F8-9428D749F7D5" title="您可以控制作业重复的时间和频率。">设置重复间隔</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12676"></a><a id="ADMIN12677"></a><a id="ADMIN12678"></a><a id="ADMIN12417"></a><div class="props_rev_3"><a id="GUID-041A5002-4176-4C93-99C2-09E2E889BB1F" name="GUID-041A5002-4176-4C93-99C2-09E2E889BB1F"></a><h5 id="ADMIN-GUID-041A5002-4176-4C93-99C2-09E2E889BB1F" class="sect5"><span class="enumeration_section">29.4.5.2</span>使用Scheduler Calendaring语法</h5>
                     <div>
                        <p>设置作业重复频率的主要方法是使用Scheduler日历表达式设置<code class="codeph">repeat_interval</code>属性。
                        </p>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-041A5002-4176-4C93-99C2-09E2E889BB1F__GUID-F28A60C7-5492-4787-8FE3-417E30A6AE90">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../arpls/DBMS_SCHEDULER.html#ARPLS72262" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a>有关<code class="codeph">repeat_interval</code>的日历语法以及<code class="codeph">CREATE_SCHEDULE</code>过程的详细说明</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-041A5002-4176-4C93-99C2-09E2E889BB1F__GUID-6E03805A-65C9-41E7-B53D-CEFA1BD7A5F2">日历表达式的示例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>以下示例说明了简单的重复间隔。为简单起见，假设开始日期对评估结果没有贡献。</p>
                           <p>每周五运行。（这三个例子都是等价的。）</p><pre class="oac_no_warn" dir="ltr">FREQ = DAILY; BYDAY = FRI; FREQ = WEEKLY; BYDAY = FRI; FREQ = YEARLY; BYDAY = FRI;</pre><p>每隔一个星期五跑。</p><pre class="oac_no_warn" dir="ltr">FREQ = WEEKLY; INTERVAL = 2; BYDAY = FRI;</pre><p>在每个月的最后一天运行。</p><pre class="oac_no_warn" dir="ltr">FREQ =月刊; BYMONTHDAY = -1;</pre><p>在每个月的最后一天运行。</p><pre class="oac_no_warn" dir="ltr">FREQ =月刊; BYMONTHDAY = -2;</pre><p>3月10日运行。（两个例子都是等价的）</p><pre class="oac_no_warn" dir="ltr">FREQ = YEARLY; BYMONTH = MAR; BYMONTHDAY = 10; FREQ = YEARLY; BYDATE = 0310;</pre><p>每10天运行一次。</p><pre class="oac_no_warn" dir="ltr">FREQ = DAILY; INTERVAL = 10;</pre><p>每天下午4点，5点和6点运行。</p><pre class="oac_no_warn" dir="ltr">FREQ = DAILY; BYHOUR = 16,17,18;</pre><p>每隔一个月的第15天运行。</p><pre class="oac_no_warn" dir="ltr">FREQ =月刊; INTERVAL = 2; BYMONTHDAY = 15;</pre><p>每个月的第29天运行。</p><pre class="oac_no_warn" dir="ltr">FREQ =月刊; BYMONTHDAY = 29;</pre><p>在每个月的第二个星期三运行。</p><pre class="oac_no_warn" dir="ltr">FREQ =月刊; BYDAY = 2WED;</pre><p>在今年的最后一个星期五运行。</p><pre class="oac_no_warn" dir="ltr">FREQ = YEARLY; BYDAY = -1FRI;</pre><p>每50小时运行一次。</p><pre class="oac_no_warn" dir="ltr">FREQ = HOURLY; INTERVAL = 50;</pre><p>每隔一个月的最后一天运行。</p><pre class="oac_no_warn" dir="ltr">FREQ =月刊; INTERVAL = 2; BYMONTHDAY = -1;</pre><p>每个月的前三天每小时运行一次。</p><pre class="oac_no_warn" dir="ltr">FREQ = HOURLY; BYMONTHDAY = 1,2,3;</pre><p>以下是一些更复杂的重复间隔：</p>
                           <p>在每个月的最后一个工作日运行（假设工作日是星期一到星期五）。</p><pre class="oac_no_warn" dir="ltr">FREQ =月刊; BYDAY =周一，周二，周三，周四，周五; BYSETPOS = -1</pre><p>在每个月的最后一个工作日运行，不包括公司假期。（此示例引用名为<code class="codeph">Company_Holidays</code>的现有命名计划。）
                           </p><pre class="oac_no_warn" dir="ltr">FREQ =月刊; BYDAY =周一，周二，周三，周四，周五; EXCLUDE = Company_Holidays; BYSETPOS = -1</pre><p>每周五中午和公司假期中午运行。</p><pre class="oac_no_warn" dir="ltr">FREQ = YEARLY; BYDAY = FRI; BYHOUR = 12; INCLUDE = Company_Holidays</pre><p>在这三个假期运行：7月4日，阵亡将士纪念日和劳动节。（此示例引用了三个现有的命名调度， <code class="codeph">JUL4</code> ， <code class="codeph">MEM</code>和<code class="codeph">LAB</code> ，其中每个调度都定义了与假日相对应的单个日期。）
                           </p><pre class="oac_no_warn" dir="ltr">JUL4，MEM，LAB</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-041A5002-4176-4C93-99C2-09E2E889BB1F__GUID-5596C64D-806B-4DE3-992E-7B9A474A267E">日历表达评估的示例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>重复间隔“ <code class="codeph">FREQ=MINUTELY;INTERVAL=2;BYHOUR=17; BYMINUTE=2,4,5,50,51,7;</code> ”，开始日期为28-FEB-2004 23:00:00将产生以下时间表：</p><pre class="oac_no_warn" dir="ltr">SUN 29-FEB-2004 17:02:00 SUN 29-FEB-2004 17:04:00 SUN 29-FEB-2004 17:50:00 MON 01-MAR-2004 17:02:00 MON 01-MAR-2004-2004 17:04:00 MON 01-MAR-2004 17:50:00 ...
</pre><p>重复间隔“ <code class="codeph">FREQ=MONTHLY;BYMONTHDAY=15,-1</code> ”，开始日期为29-DEC-2003 9:00:00将生成以下时间表：</p><pre class="oac_no_warn" dir="ltr">WED 31-DEC-2003 09:00:00 THU 15-JAN-2004 09:00:00 SAT 31-JAN-2004 09:00:00 SUN 15-FEB-2004 09:00:00 SUN 29-FEB-2004 09:00:00 MON 15-MAR-2004 09:00:00 WED 31-MAR-2004 09:00:00 ...
</pre><p>“ <code class="codeph">FREQ=MONTHLY;</code> ”的重复间隔，开始日期为29-DEC-2003 9:00:00，将生成以下时间表。（请注意，因为没有<code class="codeph">BYMONTHDAY</code>子句，所以从开始日期检索月中的某一天。）
                           </p><pre class="oac_no_warn" dir="ltr">MON 29-DEC-2003 09:00:00 THU 29-JAN-2004 09:00:00 SUN 29-FEB-2004 09:00:00 MON 29-MAR-2004 09:00:00 ...</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-041A5002-4176-4C93-99C2-09E2E889BB1F__GUID-700375FF-740C-4050-89BF-03411D32E8E3">使用日历表达式的示例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>作为使用日历语法的示例，请考虑以下语句：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'scott.my_job1'，start_date =&gt; '15 -JUL-04 01.00.00 AM Europe / Warsaw'，repeat_interval =&gt;'FREQ = MINUTELY; INTERVAL = 30;'，end_date =&gt;' 15-SEP-04 01.00.00 AM欧洲/华沙'，评论=&gt;'我在这里评论'）;结束; /</pre><p>这会在<code class="codeph">scott</code>创建<code class="codeph">my_job1</code> 。它将于7月15日首次运行，然后运行至9月15日。这项工作每30分钟运行一次。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-10B1E444-8330-4EC9-85F8-9428D749F7D5" title="您可以控制作业重复的时间和频率。">设置重复间隔</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12418"></a><div class="props_rev_3"><a id="GUID-738EAD75-5FD9-4824-A32D-47FFCB502609" name="GUID-738EAD75-5FD9-4824-A32D-47FFCB502609"></a><h5 id="ADMIN-GUID-738EAD75-5FD9-4824-A32D-47FFCB502609" class="sect5"><span class="enumeration_section">29.4.5.3</span>使用PL / SQL表达式</h5>
                     <div>
                        <p>当您需要比日历语法提供的更复杂的功能时，您可以使用PL / SQL表达式。但是，您不能将PL / SQL表达式用于窗口或命名的日程表。PL / SQL表达式必须计算为日期或时间戳。</p>
                        <div class="section">
                           <p>除了这个限制之外，没有任何限制，因此通过充分的编程，您可以创建每个可能的重复间隔。例如，请考虑以下声明：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'scott.my_job2'，start_date =&gt; '15 -JUL-04 01.00.00 AM Europe / Warsaw'，repeat_interval =&gt;'SYSTIMESTAMP + INTERVAL'30'MINUTE'，end_date =&gt; '15 -SEP-04 01.00.00 AM欧洲/华沙'，评论=&gt;'我在这里评论'）;结束; /</pre><p>这会在<code class="codeph">scott</code>创建<code class="codeph">my_job1</code> 。它将在7月15日首次运行，然后每30分钟运行一次，直到9月15日。该作业每30分钟运行一次，因为<code class="codeph">repeat_interval</code>设置为<code class="codeph">SYSTIMESTAMP + INTERVAL '30' MINUTE</code> ，返回将来30分钟的日期。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-10B1E444-8330-4EC9-85F8-9428D749F7D5" title="您可以控制作业重复的时间和频率。">设置重复间隔</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12419"></a><div class="props_rev_3"><a id="GUID-10C3D6D7-5F9E-456E-916E-EEEAEBFB4663" name="GUID-10C3D6D7-5F9E-456E-916E-EEEAEBFB4663"></a><h5 id="ADMIN-GUID-10C3D6D7-5F9E-456E-916E-EEEAEBFB4663" class="sect5"><span class="enumeration_section">29.4.5.4</span> PL / SQL表达式与日历语法行为之间的差异</h5>
                     <div>
                        <p>日历表达式与PL / SQL重复间隔之间的行为存在重要差异。</p>
                        <p>这些差异包括以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>开始日期</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用日历语法，开始日期仅为参考日期。因此，该日程表自此日期起生效。这并不意味着工作将在开始日期开始。</p>
                                 </li>
                                 <li>
                                    <p>使用PL / SQL表达式，开始日期表示作业第一次开始执行的实际时间。</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>下次运行时间</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用日历语法，下次运行作业时是固定的。</p>
                                 </li>
                                 <li>
                                    <p>使用PL / SQL表达式，下次运行作业取决于当前作业运行的实际开始时间。</p>
                                 </li>
                              </ul>
                              <p>作为区别的示例，对于计划在下午2:00开始并且每2小时重复一次但实际上从2:10开始的作业：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果日历语法指定了重复间隔，那么它将在4,6重复，依此类推。</p>
                                 </li>
                                 <li>
                                    <p>如果使用PL / SQL表达式，则作业将在4:10重复，如果下一个作业实际在4:11开始，则后续运行将在6:11。</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>为了说明这两点，请考虑一种情况，即您的开始日期为2003年7月15日1:45:00，并且您希望每两个小时重复一次。日历表达式“ <code class="codeph">FREQ=HOURLY; INTERVAL=2; BYMINUTE=0;</code> ”将生成以下计划：</p><pre class="oac_no_warn" dir="ltr">TUE 15-JUL-2003 03:00:00 TUE 15-JUL-2003 05:00:00 TUE 15-JUL-2003 07:00:00 TUE 15-JUL-2003 09:00:00 TUE 15-JUL-2003 11:00:00 ......
</pre><p>请注意，日历表达式每小时重复一次。</p>
                        <p>但是，PL / SQL表达式“ <code class="codeph">SYSTIMESTAMP + interval '2' hour</code>可能具有以下运行时间：</p><pre class="oac_no_warn" dir="ltr">TUE 15-JUL-2003 01:45:00 TUE 15-JUL-2003 03:45:05 TUE 15-JUL-2003 05:45:09 TUE 15-JUL-2003 07:45:14 TUE 15-JUL-2003 09:45:20 ...</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-10B1E444-8330-4EC9-85F8-9428D749F7D5" title="您可以控制作业重复的时间和频率。">设置重复间隔</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12420"></a><div class="props_rev_3"><a id="GUID-A4772D1C-9917-4850-A5AD-D59ADF8577F0" name="GUID-A4772D1C-9917-4850-A5AD-D59ADF8577F0"></a><h5 id="ADMIN-GUID-A4772D1C-9917-4850-A5AD-D59ADF8577F0" class="sect5"><span class="enumeration_section">29.4.5.5</span>重复间隔和夏令时</h5>
                     <div>
                        <p>对于重复作业，下次计划运行作业时将存储在带有时区列的时间戳中。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用日历语法，从<code class="codeph">start_date</code>检索时区。有关未指定<code class="codeph">start_date</code>时发生的情况的更多信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72266" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>使用PL / SQL重复间隔，时区是PL / SQL表达式返回的时间戳的一部分。</p>
                           </li>
                        </ul>
                        <p>在这两种情况下，使用区域名称很重要。例如，使用<code class="codeph">"Europe/Istanbul"</code> ，而不是绝对时区偏移，例如<code class="codeph">"+2:00"</code> 。仅当将时区指定为区域名称时，计划程序才会遵循适用于该区域的夏令时调整。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-10B1E444-8330-4EC9-85F8-9428D749F7D5" title="您可以控制作业重复的时间和频率。">设置重复间隔</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN10020"></a><div class="props_rev_3"><a id="GUID-31F260EA-48D0-470A-B66D-E906BA50CAD5" name="GUID-31F260EA-48D0-470A-B66D-E906BA50CAD5"></a><h3 id="ADMIN-GUID-31F260EA-48D0-470A-B66D-E906BA50CAD5" class="sect3"><span class="enumeration_section">29.5</span>使用事件启动作业</h3>
               <div>
                  <p>Oracle Scheduler可以在发送事件时启动作业。事件是一个应用程序或系统进程发送给另一个应用程序的消息。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-85ED81B5-6E71-4F2D-B9FB-A1630A2CF721">关于活动</a><br><span class="bold">事件</span>是一个应用程序或系统进程发送给另一个应用程序的消息，表示已检测到某些操作或事件。事件由一个应用程序或进程<span class="bold">引发</span> （发送），并由一个或多个应用程序或进程<span class="bold">使用</span> （接收）。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-88510EE0-0517-4234-A4F4-021A1D4A7A72">通过应用程序引发的事件启动作业</a><br>当您的应用程序引发事件时，Oracle Scheduler可以启动作业。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-281B7FC1-6134-4E1F-83B0-082D588F21B6">当文件到达系统时启动作业</a><br>您可以将计划程序配置为在文件到达本地系统或远程系统时启动作业。作业是基于事件的作业，文件到达事件由文件观察器引发，该文件观察器是Oracle Database <span class="italic">11g</span>第2版（11.2）中引入的Scheduler对象。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-31F260EA-48D0-470A-B66D-E906BA50CAD5__GUID-13522FB1-1BD1-49E4-A548-A42A8B2292DD">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="administering-oracle-scheduler.html#GUID-6637FA7A-A8F7-4EA8-9388-939046C7A229" title="示例说明了创建基于事件的作业和事件计划。">基于事件创建作业和计划的示例</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a> ”</span>以获取有关使用链条事件的信息，以实现对流程流的精确控制</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" title="您可以使用Oracle Scheduler创建，运行和管理作业。">使用Oracle Scheduler调度作业</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN12361"></a><div class="props_rev_3"><a id="GUID-85ED81B5-6E71-4F2D-B9FB-A1630A2CF721" name="GUID-85ED81B5-6E71-4F2D-B9FB-A1630A2CF721"></a><h4 id="ADMIN-GUID-85ED81B5-6E71-4F2D-B9FB-A1630A2CF721" class="sect4"><span class="enumeration_section">29.5.1</span>关于事件</h4>
                  <div>
                     <p><span class="bold">事件</span>是一个应用程序或系统进程发送给另一个应用程序的消息，表示已检测到某些操作或事件。事件由一个应用程序或进程<span class="bold">引发</span> （发送），并由一个或多个应用程序或进程<span class="bold">使用</span> （接收）。
                     </p>
                     <p>调度程序使用两种事件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您的应用程序引发的事件</p>
                           <p>应用程序可以引发调度程序要使用的事件。调度程序通过启动作业来对事件做出反应。例如，当库存跟踪系统发现库存已低于某个阈值时，它可以引发启动库存补货作业的事件。</p>
                           <p>请参阅<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-EDF02141-2BC4-47F0-8142-D3868B6466DF" title="您的应用程序可以引发事件以通知调度程序启动作业。以这种方式启动的作业称为基于事件的作业。">使用应用程序引发的事件启动作业</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>文件观察者引发的文件到达事件</p>
                           <p>您可以创建文件观察程序，Oracle Database <span class="italic">11g</span>第2版（11.2）中引入的Scheduler对象，以监视文件到达系统。然后，您可以配置作业，以便在文件观察程序检测到文件存在时启动。例如，一系列商店的数据仓库从即将从商店上传的日终收入报告中加载数据。每次新的日终报告到达时，数据仓库加载作业都会启动。
                           </p>
                           <p>请参阅<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-281B7FC1-6134-4E1F-83B0-082D588F21B6" title="您可以将计划程序配置为在文件到达本地系统或远程系统时启动作业。作业是基于事件的作业，文件到达事件由文件观察器引发，该文件观察器是Oracle Database 11g第2版（11.2）中引入的Scheduler对象。">文件到达系统时启动作业</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-85ED81B5-6E71-4F2D-B9FB-A1630A2CF721__GUID-E45F1393-E90B-45EB-8DB8-8267BC168838">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-CAC644C1-854D-44FB-8FF6-BE6DDE809B4F" title="Scheduler can raise an event when a job changes state.">使用调度</a></span>程序引发的事件<span class="q"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-CAC644C1-854D-44FB-8FF6-BE6DDE809B4F" title="调度程序可以在作业更改状态时引发事件。">监视作业状态</a> ”，</span>以获取有关应用程序如何使用调度程序引发的作业状态更改事件的信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-31F260EA-48D0-470A-B66D-E906BA50CAD5" title="Oracle Scheduler可以在发送事件时启动作业。事件是一个应用程序或系统进程发送给另一个应用程序的消息。">使用事件启动作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-88510EE0-0517-4234-A4F4-021A1D4A7A72" name="GUID-88510EE0-0517-4234-A4F4-021A1D4A7A72"></a><h4 id="ADMIN-GUID-88510EE0-0517-4234-A4F4-021A1D4A7A72" class="sect4"><span class="enumeration_section">29.5.2</span>使用应用程序<span class="enumeration_section">引发的</span>事件启动作业</h4>
                  <p>当您的应用程序引发事件时，Oracle Scheduler可以启动作业。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-EDF02141-2BC4-47F0-8142-D3868B6466DF">关于您的应用程序引发的事件</a><br>您的应用程序可以引发事件以通知调度程序启动作业。以这种方式启动的作业称为基于事件的作业。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0B2BE088-27DD-46F7-9E07-4529867ECEB4">创建基于事件的作业</a><br>您可以使用<code class="codeph">CREATE_JOB</code>过程或Cloud Control创建基于事件的作业。作业可以包括作为作业属性内联的事件信息，或者可以通过指向事件计划来指定事件信息。与基于时间表的作业一样，除非作业结束日期过去，达到<code class="codeph">max_runs</code>或达到最大失败次数（ <code class="codeph">max_failures</code> ），否则不会自动删除基于事件的作业。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-67C86767-E9F0-4CC6-A435-B01B79E0C64A">改变基于事件的工作</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">SET_ATTRIBUTE</code>过程来更改基于事件的作业。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5ED0E0D8-05B4-4DDA-839E-0AE9142000D4">创建活动安排</a><br>您可以创建基于事件的计划。然后，您可以重复使用多个作业的计划。为此，请使用<code class="codeph">CREATE_EVENT_SCHEDULE</code>过程，或使用Cloud Control。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-30A82798-D82E-4A59-A877-8014AD933026">改变活动时间表</a><br>您可以使用与更改作业中的事件信息相同的方式更改事件计划中的事件信息。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E66A7095-49BE-4A94-BEBE-710AE56CE656">将事件消息传递到基于事件的作业</a><br>通过元数据参数，Scheduler可以将事件的消息内容传递给启动作业的基于事件的作业。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-31F260EA-48D0-470A-B66D-E906BA50CAD5" title="Oracle Scheduler可以在发送事件时启动作业。事件是一个应用程序或系统进程发送给另一个应用程序的消息。">使用事件启动作业</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13105"></a><a id="ADMIN12448"></a><div class="props_rev_3"><a id="GUID-EDF02141-2BC4-47F0-8142-D3868B6466DF" name="GUID-EDF02141-2BC4-47F0-8142-D3868B6466DF"></a><h5 id="ADMIN-GUID-EDF02141-2BC4-47F0-8142-D3868B6466DF" class="sect5"><span class="enumeration_section">29.5.2.1</span>关于应用程序<span class="enumeration_section">引发的</span>事件</h5>
                     <div>
                        <p>您的应用程序可以引发事件以通知调度程序启动作业。以这种方式启动的作业称为基于事件的作业。</p>
                        <p>您可以创建引用事件的命名计划，而不是包含日期，时间和重复周期信息。如果为作业提供了这样的计划（ <span class="bold">事件计划</span> ），则在引发事件时作业将运行。
                        </p>
                        <p>要引发事件以通知Scheduler启动作业，应用程序会将消息排入到设置作业时指定的Oracle Database Advanced Queuing队列中。作业启动时，可以选择检索事件的消息内容。</p>
                        <p>要创建基于事件的作业，您必须设置以下两个附加属性：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">queue_spec</code></p>
                              <p>一个队列规范，包括应用程序将消息排入以引发作业启动事件的队列名称，或者在安全队列的情况下，队列名称后跟逗号和代理名称。</p>
                           </li>
                           <li>
                              <p><code class="codeph">EVENT_CONDITION</code></p>
                              <p>基于消息属性的条件表达式，对于启动作业的消息，必须求值为<code class="codeph">TRUE</code> 。表达式必须具有Oracle数据库高级排队规则的语法。因此，您可以在表达式中包含用户数据属性，前提是消息有效内容是对象类型，并使用<code class="codeph">tab.user_data</code>为表达式中的对象属性添加前缀。
                              </p>
                              <div class="infoboxnotealso" id="GUID-EDF02141-2BC4-47F0-8142-D3868B6466DF__GUID-991D8D56-AAED-4F84-9DB6-C1185D962A3A">
                                 <p class="notep1">也可以看看：</p>
                                 <p></p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">DBMS_AQADM</code> 。有关排队规则的详细信息，请<code class="codeph">ADD_SUBSCRIBER</code> <a href="../arpls/DBMS_AQADM.html#ARPLS005" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考”中的</span></a> <code class="codeph">ADD_SUBSCRIBER</code>过程</p>
                                    </li>
                                    <li>
                                       <p>有关如何创建队列的详细信息，请<a href="../adque/aq-administrative-interface.html#ADQUE0803" target="_blank"><span class="italic">参见“Oracle数据库高级队列用户指南”</span></a></p>
                                    </li>
                                    <li>
                                       <p>有关如何将消息排入<a href="../adque/aq-introduction.html#ADQUE-GUID-83F68756-B358-45ED-8C21-1DE6E87DCF7A" target="_blank"><span class="italic">队列的</span></a>详细信息，请参见<a href="../adque/aq-introduction.html#ADQUE-GUID-83F68756-B358-45ED-8C21-1DE6E87DCF7A" target="_blank"><span class="italic">“Oracle数据库高级队列用户指南”</span></a></p>
                                    </li>
                                 </ul>
                              </div>
                              <p>以下示例将<code class="codeph">event_condition</code>设置为仅选择在午夜之后和上午9:00之前发生的低库存事件。假设消息有效内容是具有两个名为<code class="codeph">event_type</code>和<code class="codeph">event_timestamp</code>属性的对象。
                              </p><pre class="oac_no_warn" dir="ltr">event_condition ='tab.user_data。 <span class="bold">event_type</span> =''LOW_INVENTORY''并从tab.user_data中提取小时。 <span class="bold">event_timestamp</span> &lt;9'</pre></li>
                        </ul>
                        <p>您可以将<code class="codeph">queue_spec</code>和<code class="codeph">event_condition</code>指定为内联作业属性，也可以使用这些属性创建<span class="bold">事件计划</span> ，并从作业指向此计划。
                        </p>
                        <div class="infoboxnote" id="GUID-EDF02141-2BC4-47F0-8142-D3868B6466DF__GUID-86B7EF45-8C98-41B2-A0AE-DAF1C4E49695">
                           <p class="notep1">注意：</p>
                           <p>Scheduler为每次匹配<code class="codeph">event_condition</code>的事件运行基于事件的作业。但是，默认情况下，将忽略作业已在运行时发生的事件;事件被消耗，但不会触发另一次作业。从Oracle Database <span class="italic">11g</span>第1版（11.1）开始，您可以通过将作业属性<code class="codeph">PARALLEL_INSTANCES</code>设置为<code class="codeph">TRUE</code>来更改此默认行为。在这种情况下，为每个事件实例启动作业实例，并且所有作业实例都是轻量级作业。有关详细信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72235" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中</span></a>的<code class="codeph">SET_ATTRIBUTE</code>过程。
                           </p>
                        </div>
                        <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-EDF02141-2BC4-47F0-8142-D3868B6466DF__CHDIEIIG" title="事件任务及其程序">表29-5</a>描述了常见的管理任务，涉及应用程序引发的事件（以及调度程序使用的事件）以及与之关联的过程。
                        </p>
                        <div class="tblformal" id="GUID-EDF02141-2BC4-47F0-8142-D3868B6466DF__CHDIEIIG">
                           <p class="titleintable">表29-5应用程序引发的事件任务及其程序</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="应用程序引发的事件任务及其程序" width="100%" border="1" summary="Event Tasks and Their Procedures" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="36%" id="d268851e6435">任务</th>
                                    <th align="left" valign="bottom" width="27%" id="d268851e6438">程序</th>
                                    <th align="left" valign="bottom" width="37%" id="d268851e6441">需要特权</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d268851e6446" headers="d268851e6435 ">
                                       <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0B2BE088-27DD-46F7-9E07-4529867ECEB4" title="您可以使用CREATE_JOB过程或Cloud Control创建基于事件的作业。作业可以包括作为作业属性内联的事件信息，或者可以通过指向事件计划来指定事件信息。与基于时间表的作业一样，除非作业结束日期过去，达到max_runs或达到最大失败次数（max_failures），否则不会自动删除基于事件的作业。">创建基于事件的作业</a></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d268851e6446 d268851e6438 ">
                                       <p><code class="codeph">CREATE_JOB</code></p>
                                    </td>
                                    <td align="left" valign="top" width="37%" headers="d268851e6446 d268851e6441 ">
                                       <p><code class="codeph">CREATE</code> <code class="codeph">JOB</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d268851e6484" headers="d268851e6435 ">
                                       <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-67C86767-E9F0-4CC6-A435-B01B79E0C64A" title="您可以使用DBMS_SCHEDULER包中的SET_ATTRIBUTE过程来更改基于事件的作业。">改变基于事件的工作</a></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d268851e6484 d268851e6438 ">
                                       <p><code class="codeph">SET_ATTRIBUTE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="37%" headers="d268851e6484 d268851e6441 ">
                                       <p><code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或被更改<code class="codeph">JOB</code>所有权或作业的<code class="codeph">ALTER</code>权限</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d268851e6517" headers="d268851e6435 ">
                                       <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5ED0E0D8-05B4-4DDA-839E-0AE9142000D4" title="您可以创建基于事件的计划。然后，您可以重复使用多个作业的计划。为此，请使用CREATE_EVENT_SCHEDULE过程，或使用Cloud Control。">创建活动安排</a></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d268851e6517 d268851e6438 ">
                                       <p><code class="codeph">CREATE_EVENT_SCHEDULE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="37%" headers="d268851e6517 d268851e6441 ">
                                       <p><code class="codeph">CREATE</code> <code class="codeph">JOB</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d268851e6549" headers="d268851e6435 ">
                                       <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-30A82798-D82E-4A59-A877-8014AD933026" title="您可以使用与更改作业中的事件信息相同的方式更改事件计划中的事件信息。">改变活动时间表</a></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d268851e6549 d268851e6438 ">
                                       <p><code class="codeph">SET_ATTRIBUTE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="37%" headers="d268851e6549 d268851e6441 ">
                                       <p><code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>或更改计划的所有权或计划的<code class="codeph">ALTER</code>权限</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-88510EE0-0517-4234-A4F4-021A1D4A7A72" title="当您的应用程序引发事件时，Oracle Scheduler可以启动作业。">使用应用程序引发的事件启动作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12449"></a><div class="props_rev_3"><a id="GUID-0B2BE088-27DD-46F7-9E07-4529867ECEB4" name="GUID-0B2BE088-27DD-46F7-9E07-4529867ECEB4"></a><h5 id="ADMIN-GUID-0B2BE088-27DD-46F7-9E07-4529867ECEB4" class="sect5"><span class="enumeration_section">29.5.2.2</span>创建基于事件的作业</h5>
                     <p>您可以使用<code class="codeph">CREATE_JOB</code>过程或Cloud Control创建基于事件的作业。作业可以包括作为作业属性内联的事件信息，或者可以通过指向事件计划来指定事件信息。与基于时间表的作业一样，除非作业结束日期过去，达到<code class="codeph">max_runs</code>或达到最大失败次数（ <code class="codeph">max_failures</code> ），否则不会自动删除基于事件的作业。
                     </p>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-33C6B867-2846-44E9-A8A8-02248D1D2478">将事件信息指定为作业属性</a><br>要指定事件信息作为作业属性，您使用的替代语法<code class="codeph">CREATE_JOB</code>包含<code class="codeph">queue_spec</code>和<code class="codeph">event_condition</code>属性。
                           </li>
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-322323CF-A729-4E4A-A6DA-CA02857C4062">在事件计划中指定事件信息</a><br>要使用事件计划指定事件信息，请将作业的<code class="codeph">schedule_name</code>属性设置为事件计划的名称。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-88510EE0-0517-4234-A4F4-021A1D4A7A72" title="当您的应用程序引发事件时，Oracle Scheduler可以启动作业。">使用应用程序引发的事件启动作业</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN12450"></a><div class="props_rev_3"><a id="GUID-33C6B867-2846-44E9-A8A8-02248D1D2478" name="GUID-33C6B867-2846-44E9-A8A8-02248D1D2478"></a><h6 id="ADMIN-GUID-33C6B867-2846-44E9-A8A8-02248D1D2478" class="sect6"><span class="enumeration_section">29.5.2.2.1将</span>事件信息指定为作业属性</h6>
                        <div>
                           <p>要指定事件信息作为作业属性，您使用的替代语法<code class="codeph">CREATE_JOB</code>包含<code class="codeph">queue_spec</code>和<code class="codeph">event_condition</code>属性。
                           </p>
                           <div class="section">
                              <p>以下示例创建一个作业，该作业在应用程序向调度程序发出信号表示项目的库存级别已降至低阈值级别时启动：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'process_lowinv_j1'，program_name =&gt;'process_lowinv_p1'，event_condition =&gt;'tab.user_data.event_type =''LOW_INVENTORY'''，queue_spec =&gt;'inv_events_q，inv_agent1'，enabled =&gt; TRUE， comments =&gt;'开始库存补货工作'）;结束; /</pre><p>有关<code class="codeph">CREATE_JOB</code>过程的更多信息，请参见<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72300" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0B2BE088-27DD-46F7-9E07-4529867ECEB4" title="您可以使用CREATE_JOB过程或Cloud Control创建基于事件的作业。作业可以包括作为作业属性内联的事件信息，或者可以通过指向事件计划来指定事件信息。与基于时间表的作业一样，除非作业结束日期过去，达到max_runs或达到最大失败次数（max_failures），否则不会自动删除基于事件的作业。">创建基于事件的作业</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN12451"></a><div class="props_rev_3"><a id="GUID-322323CF-A729-4E4A-A6DA-CA02857C4062" name="GUID-322323CF-A729-4E4A-A6DA-CA02857C4062"></a><h6 id="ADMIN-GUID-322323CF-A729-4E4A-A6DA-CA02857C4062" class="sect6"><span class="enumeration_section">29.5.2.2.2</span>在事件计划中指定事件信息</h6>
                        <div>
                           <p>要使用事件计划指定事件信息，请将作业的<code class="codeph">schedule_name</code>属性设置为事件计划的名称。
                           </p>
                           <div class="section">
                              <p>以下示例指定事件计划中的事件信息：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'process_lowinv_j1'，program_name =&gt;'process_lowinv_p1'，schedule_name =&gt;'inventory_events_schedule'，enabled =&gt; TRUE，comments =&gt;'启动库存补货作业'）;结束; /</pre><p>有关详细信息，请参阅<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5ED0E0D8-05B4-4DDA-839E-0AE9142000D4" title="您可以创建基于事件的计划。然后，您可以重复使用多个作业的计划。为此，请使用CREATE_EVENT_SCHEDULE过程，或使用Cloud Control。">创建事件计划</a> ”</span> 。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0B2BE088-27DD-46F7-9E07-4529867ECEB4" title="您可以使用CREATE_JOB过程或Cloud Control创建基于事件的作业。作业可以包括作为作业属性内联的事件信息，或者可以通过指向事件计划来指定事件信息。与基于时间表的作业一样，除非作业结束日期过去，达到max_runs或达到最大失败次数（max_failures），否则不会自动删除基于事件的作业。">创建基于事件的作业</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADMIN12452"></a><div class="props_rev_3"><a id="GUID-67C86767-E9F0-4CC6-A435-B01B79E0C64A" name="GUID-67C86767-E9F0-4CC6-A435-B01B79E0C64A"></a><h5 id="ADMIN-GUID-67C86767-E9F0-4CC6-A435-B01B79E0C64A" class="sect5"><span class="enumeration_section">29.5.2.3</span>更改基于事件的作业</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">SET_ATTRIBUTE</code>过程来更改基于事件的作业。
                        </p>
                        <div class="section">
                           <p>对于指定事件内嵌的工作，你不能设置<code class="codeph">queue_spec</code>和<code class="codeph">event_condition</code>有独立属性<code class="codeph">SET_ATTRIBUTE</code> 。相反，您必须设置一个名为<code class="codeph">event_spec</code>的属性，并将事件条件和队列规范分别作为第三个和第四个参数传递给<code class="codeph">SET_ATTRIBUTE</code> 。</p>
                           <p>以下示例使用<code class="codeph">event_spec</code>属性：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.SET_ATTRIBUTE（'my_job'，' <span class="bold">event_spec</span> '，'tab.user_data.event_type =''LOW_INVENTORY'''，'inv_events_q，inv_agent1'）;结束; /</pre><p>有关<code class="codeph">SET_ATTRIBUTE</code>过程的详细信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72399" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-88510EE0-0517-4234-A4F4-021A1D4A7A72" title="当您的应用程序引发事件时，Oracle Scheduler可以启动作业。">使用应用程序引发的事件启动作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12453"></a><div class="props_rev_3"><a id="GUID-5ED0E0D8-05B4-4DDA-839E-0AE9142000D4" name="GUID-5ED0E0D8-05B4-4DDA-839E-0AE9142000D4"></a><h5 id="ADMIN-GUID-5ED0E0D8-05B4-4DDA-839E-0AE9142000D4" class="sect5"><span class="enumeration_section">29.5.2.4</span>创建事件计划表</h5>
                     <div>
                        <p>您可以创建基于事件的计划。然后，您可以重复使用多个作业的计划。为此，请使用<code class="codeph">CREATE_EVENT_SCHEDULE</code>过程，或使用Cloud Control。
                        </p>
                        <div class="section">
                           <p>以下示例创建一个事件计划：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_EVENT_SCHEDULE（schedule_name =&gt;'inventory_events_schedule'，start_date =&gt; SYSTIMESTAMP，event_condition =&gt;'tab.user_data.event_type =''LOW_INVENTORY'''，queue_spec =&gt;'inv_events_q，inv_agent1'）;结束; /</pre><p>您可以使用<code class="codeph">DROP_SCHEDULE</code>过程删除事件计划。有关<code class="codeph">CREATE_EVENT_SCHEDULE</code>更多信息，请参见<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72294" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-88510EE0-0517-4234-A4F4-021A1D4A7A72" title="当您的应用程序引发事件时，Oracle Scheduler可以启动作业。">使用应用程序引发的事件启动作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12454"></a><div class="props_rev_3"><a id="GUID-30A82798-D82E-4A59-A877-8014AD933026" name="GUID-30A82798-D82E-4A59-A877-8014AD933026"></a><h5 id="ADMIN-GUID-30A82798-D82E-4A59-A877-8014AD933026" class="sect5"><span class="enumeration_section">29.5.2.5</span>更改事件计划</h5>
                     <div>
                        <p>您可以使用与更改作业中的事件信息相同的方式更改事件计划中的事件信息。</p>
                        <div class="section">
                           <p>有关更多信息，请参阅<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-67C86767-E9F0-4CC6-A435-B01B79E0C64A" title="您可以使用DBMS_SCHEDULER包中的SET_ATTRIBUTE过程来更改基于事件的作业。">更改基于事件的作业</a> ”</span> 。
                           </p>
                           <p>以下示例演示如何使用<code class="codeph">SET_ATTRIBUTE</code>过程和<code class="codeph">event_spec</code>属性来更改事件计划中的事件信息。
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.SET_ATTRIBUTE（'inventory_events_schedule'，'event_spec'，'tab.user_data.event_type =''LOW_INVENTORY'''，'inv_events_q，inv_agent1'）;结束; /</pre><p>有关<code class="codeph">SET_ATTRIBUTE</code>过程的详细信息，请参阅<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72399" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-88510EE0-0517-4234-A4F4-021A1D4A7A72" title="当您的应用程序引发事件时，Oracle Scheduler可以启动作业。">使用应用程序引发的事件启动作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12455"></a><div class="props_rev_3"><a id="GUID-E66A7095-49BE-4A94-BEBE-710AE56CE656" name="GUID-E66A7095-49BE-4A94-BEBE-710AE56CE656"></a><h5 id="ADMIN-GUID-E66A7095-49BE-4A94-BEBE-710AE56CE656" class="sect5"><span class="enumeration_section">29.5.2.6将</span>事件消息传递到基于事件的作业</h5>
                     <div>
                        <p>通过元数据参数，Scheduler可以将事件的消息内容传递给启动作业的基于事件的作业。</p>
                        <div class="section">
                           <p>以下规则适用：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>作业必须使用<code class="codeph">STORED_PROCEDURE</code>类型的命名程序。</p>
                              </li>
                              <li>
                                 <p>其中一个命名的程序参数必须是元数据参数，并将<code class="codeph">metadata_attribute</code>设置为<code class="codeph">EVENT_MESSAGE</code> 。</p>
                              </li>
                              <li>
                                 <p>实现程序的存储过程必须在与指定程序的元数据参数对应的位置处具有参数。参数类型必须是应用程序对作业启动事件进行排队的队列的数据类型。</p>
                              </li>
                           </ul>
                           <p>如果使用<code class="codeph">RUN_JOB</code>过程手动运行具有<code class="codeph">EVENT_MESSAGE</code>元数据参数的作业，则传递给该参数的值为<code class="codeph">NULL</code> 。</p>
                           <p>以下示例显示如何构造可以接收事件消息内容的基于事件的作业：</p><pre class="oac_no_warn" dir="ltr">创建或替换过程my_stored_proc（event_msg IN event_queue_type）AS BEGIN  - 检索并处理消息体END; / BEGIN DBMS_SCHEDULER.CREATE_PROGRAM（program_name =&gt;'my_prog'，program_action =&gt;'my_stored_proc'，program_type =&gt;'STORED_PROCEDURE'，number_of_arguments =&gt; 1，enabled =&gt; FALSE）; DBMS_SCHEDULER.DEFINE_METADATA_ARGUMENT（program_name =&gt;'my_prog'，argument_position =&gt; 1，metadata_attribute =&gt;'EVENT_MESSAGE'）; DBMS_SCHEDULER.ENABLE（'my_prog'）;其他人提升时的例外情况;结束 ; / BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'my_evt_job'，program_name =&gt;'my_prog'，schedule_name =&gt;'my_evt_sch'，enabled =&gt; true，auto_Drop =&gt; false）;其他人提升时的例外情况;结束 ; /</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-88510EE0-0517-4234-A4F4-021A1D4A7A72" title="当您的应用程序引发事件时，Oracle Scheduler可以启动作业。">使用应用程序引发的事件启动作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN13285"></a><div class="props_rev_3"><a id="GUID-281B7FC1-6134-4E1F-83B0-082D588F21B6" name="GUID-281B7FC1-6134-4E1F-83B0-082D588F21B6"></a><h4 id="ADMIN-GUID-281B7FC1-6134-4E1F-83B0-082D588F21B6" class="sect4"><span class="enumeration_section">29.5.3</span>文件到达系统时启动作业</h4>
                  <p>您可以将计划程序配置为在文件到达本地系统或远程系统时启动作业。作业是基于事件的作业，文件到达事件由文件观察器引发，该文件观察器是Oracle Database <span class="italic">11g</span>第2版（11.2）中引入的Scheduler对象。
                  </p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-B17B0307-45B6-4251-B554-923785745E78">关于文件监视器</a><br><span class="bold">文件观察程序</span>是一个Scheduler对象，它定义文件的位置，名称和其他属性，这些文件到达系统会导致Scheduler启动作业。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5DFE5FEF-B5C9-46D8-93FC-144782B2C008">从远程系统启用文件到达事件</a><br>要从远程系统接收文件到达事件，必须在该系统上安装Scheduler代理，并且必须在数据库中注册代理。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-1D2AA753-AC97-4D4E-B6FA-68B821965CE5">创建文件监视器和文件监视器作业</a><br>您完成了几个步骤来创建文件观察程序和文件监视作业。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7813B078-859A-489E-BBA2-82D791DE8CBF">文件到达示例</a><br>示例说明了文件观察程序作业的文件到达。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-459461D9-B7B3-45BE-BBDA-A03D7C521C04">管理文件监视器</a><br><code class="codeph">DBMS_SCHEDULER</code> PL / SQL包提供了为文件监视器启用，禁用，删除和设置属性的过程。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-FEB6730F-1BA5-4C04-9475-27A9183F4148">查看文件监视器信息</a><br>您可以通过查询视图<code class="codeph">*_SCHEDULER_FILE_WATCHERS</code>来查看有关文件监视器的信息。</li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-31F260EA-48D0-470A-B66D-E906BA50CAD5" title="Oracle Scheduler可以在发送事件时启动作业。事件是一个应用程序或系统进程发送给另一个应用程序的消息。">使用事件启动作业</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13286"></a><div class="props_rev_3"><a id="GUID-B17B0307-45B6-4251-B554-923785745E78" name="GUID-B17B0307-45B6-4251-B554-923785745E78"></a><h5 id="ADMIN-GUID-B17B0307-45B6-4251-B554-923785745E78" class="sect5"><span class="enumeration_section">29.5.3.1</span>关于文件监视器</h5>
                     <div>
                        <p><span class="bold">文件观察程序</span>是一个Scheduler对象，它定义文件的位置，名称和其他属性，这些文件到达系统会导致Scheduler启动作业。
                        </p>
                        <p>您创建文件观察程序，然后创建任意数量的基于事件的作业或引用文件观察程序的事件计划。当文件观察器检测到指定文件的到达时，新到达的文件会引发文件到达事件。</p>
                        <p>新到达的文件是已更改的文件，因此其时间戳晚于最近执行或文件观察程序作业开始监视目标文件目录的时间。</p>
                        <p>文件观察程序确定文件是否是新到文件的方式等同于重复执行Unix命令<code class="codeph">ls -lrt</code>或Windows DOS命令<code class="codeph">dir /od</code>来监视目录中的新文件。这两个命令都确保最近修改的文件列在最后，即最旧的第一个和最新的文件。
                        </p>
                        <div class="infoboxnote" id="GUID-B17B0307-45B6-4251-B554-923785745E78__GUID-E75FB29B-DDAB-48DC-87CD-83A1D33C030F">
                           <p class="notep1">注意：</p>
                           <p>以下行为：</p>
                           <p>UNIX <code class="codeph">mv</code>命令不会更改文件修改时间，而<code class="codeph">cp</code>命令会更改。
                           </p>
                           <p>Windows <code class="codeph">move</code> / <code class="codeph">paste</code>和<code class="codeph">copy</code> / <code class="codeph">paste</code>命令不会更改文件修改时间。为此，请在<code class="codeph">move</code>或<code class="codeph">copy</code>命令后执行以下DOS命令： <code class="codeph">copy /b file_name +,,</code> 
                           </p>
                        </div>
                        <p><a href="../arpls/DBMS_SCHEDULER.html#ARPLS72299" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中</span></a>描述的<code class="codeph">CREATE_FILE_WATCHER</code>过程的<code class="codeph">steady_state_duration</code>参数指示文件观察程序在查找文件之前文件必须保持不变的最小时间间隔。这不能超过一个小时。如果参数为<code class="codeph">NULL</code> ，则使用内部值。
                        </p>
                        <p>由文件到达事件启动的作业可以检索事件消息以了解新到达的文件。该消息包含查找文件，打开文件和处理文件所需的信息。</p>
                        <p>文件观察程序可以在本地系统（运行Oracle数据库的同一主机）或远程系统上查看文件。远程系统必须运行Scheduler代理，并且必须在数据库中注册代理。</p>
                        <p>文件监视器每10分钟检查一次文件是否到达。您可以调整此间隔。有关详细信息，请参阅<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-C8D8FCDE-777E-43DA-838B-4BA0105D0969" title="默认情况下，文件监视器每十分钟检查一次文件是否到达。您可以更改此间隔。">更改文件到达检测间隔</a> ”</span> 。
                        </p>
                        <p>要使用文件监视器，必须安装数据库Java虚拟机（JVM）组件。</p>
                        <p>您必须具有<code class="codeph">CREATE</code> <code class="codeph">JOB</code>系统特权才能在自己的架构中创建文件监视器。您需要<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">JOB</code>系统特权才能在与您自己的架构不同的架构中创建文件监视器（ <code class="codeph">SYS</code>架构除外，这是不允许的）。您可以在文件观察程序上授予<code class="codeph">EXECUTE</code>对象特权，以便不同模式中的作业可以引用它。您还可以在文件观察程序上授予<code class="codeph">ALTER</code>对象权限，以便其他用户可以对其进行修改。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-281B7FC1-6134-4E1F-83B0-082D588F21B6" title="您可以将计划程序配置为在文件到达本地系统或远程系统时启动作业。作业是基于事件的作业，文件到达事件由文件观察器引发，该文件观察器是Oracle Database 11g第2版（11.2）中引入的Scheduler对象。">文件到达系统时启动作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13287"></a><div class="props_rev_3"><a id="GUID-5DFE5FEF-B5C9-46D8-93FC-144782B2C008" name="GUID-5DFE5FEF-B5C9-46D8-93FC-144782B2C008"></a><h5 id="ADMIN-GUID-5DFE5FEF-B5C9-46D8-93FC-144782B2C008" class="sect5"><span class="enumeration_section">29.5.3.2</span>从远程系统启用文件到达事件</h5>
                     <div>
                        <p>要从远程系统接收文件到达事件，必须在该系统上安装Scheduler代理，并且必须在数据库中注册代理。</p>
                        <div class="section">
                           <p>远程系统不需要正在运行的Oracle数据库实例来生成文件到达事件。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>要在远程系统上启用文件到达事件：</p>
                           <ol>
                              <li>
                                 <p>设置本地数据库以运行远程外部作业。</p>
                                 <p>有关说明，请参阅<span class="q">“ <a href="administering-oracle-scheduler.html#GUID-EC2A7EE4-1459-4627-93E7-7EF80F14355B" title="您可以为远程作业设置数据库并禁用远程作业的数据库。">为远程作业启用和禁用数据库</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在第一个远程系统上安装，配置，注册和启动Scheduler代理。</p>
                                 <p>有关说明，请参阅<span class="q">“ <a href="administering-oracle-scheduler.html#GUID-68793240-9241-42D4-95E7-21C66DD6B305" title="在特定主机上运行远程作业之前，必须安装和配置Scheduler代理。">在远程主机上安装和配置Scheduler Agent</a> ”</span> 。
                                 </p>
                                 <p>这会将远程主机添加到本地数据库上维护的外部目标列表中。</p>
                              </li>
                              <li>
                                 <p>对每个其他远程系统重复上一步。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-281B7FC1-6134-4E1F-83B0-082D588F21B6" title="您可以将计划程序配置为在文件到达本地系统或远程系统时启动作业。作业是基于事件的作业，文件到达事件由文件观察器引发，该文件观察器是Oracle Database 11g第2版（11.2）中引入的Scheduler对象。">文件到达系统时启动作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13478"></a><a id="ADMIN13479"></a><a id="ADMIN13480"></a><a id="ADMIN13481"></a><a id="ADMIN13482"></a><a id="ADMIN13288"></a><div class="props_rev_3"><a id="GUID-1D2AA753-AC97-4D4E-B6FA-68B821965CE5" name="GUID-1D2AA753-AC97-4D4E-B6FA-68B821965CE5"></a><h5 id="ADMIN-GUID-1D2AA753-AC97-4D4E-B6FA-68B821965CE5" class="sect5"><span class="enumeration_section">29.5.3.3</span>创建文件监视器和文件监视器作业</h5>
                     <div>
                        <p>您完成了几个步骤来创建文件观察程序和文件监视作业。</p>
                        <div class="section">
                           <p>您执行以下任务以创建文件观察程序并创建在指定文件到达时启动的基于事件的作业。</p>
                           <dl>
                              <dt class="dlterm"><a name="GUID-1D2AA753-AC97-4D4E-B6FA-68B821965CE5__GUID-CEBBF685-D0E2-4E58-AC2C-ABEDA06CC85B"><!-- --></a>任务1  - 创建凭据</dt>
                              <dd>
                                 <p>文件观察程序需要凭证对象（凭证），通过该凭证对象可以与主机操作系统进行身份验证以访问该文件。有关创建凭据所需特权的信息，请参阅<span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-2D70512F-BBAE-4087-B341-D2AF87A3C71C" title="凭据是存储在专用数据库对象中的用户名和密码对。">凭据</a> ”</span> 。
                                 </p>
                                 <p>执行以下步骤：</p>
                                 <ol>
                                    <li>
                                       <p>为必须有权访问监视文件的操作系统用户创建凭据。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_CREDENTIAL.CREATE_CREDENTIAL（'WATCH_CREDENTIAL'，'salesapps'，'sa324w1'）;结束; /</pre></li>
                                    <li>
                                       <p>将凭据的<code class="codeph">EXECUTE</code>对象权限授予拥有文件观察程序将启动的基于事件的作业的模式。
                                       </p><pre class="oac_no_warn" dir="ltr">授权给DSSUSER WATCH_CREDENTIAL;</pre></li>
                                 </ol>
                              </dd>
                              <dt class="dlterm"><a name="GUID-1D2AA753-AC97-4D4E-B6FA-68B821965CE5__GUID-192E4C34-E13C-4499-B089-D3A93BDE48D0"><!-- --></a>任务2  - 创建文件监视器</dt>
                              <dd>
                                 <p>执行以下步骤：</p>
                                 <ol>
                                    <li>
                                       <p>创建文件观察程序，按照<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72298" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a>中的<code class="codeph">DBMS_SCHEDULER.CREATE_FILE_WATCHER</code>过程文档中的描述分配属性。您可以在文件名中指定通配符参数。一个 '？<code class="codeph">DIRECTORY_PATH</code>属性中的前缀表示Oracle主目录的路径。<code class="codeph">NULL</code> <code class="codeph">destination</code>表示本地主机。要在远程主机上查看文件，请提供有效的外部目标名称，您可以从视图<code class="codeph">ALL_SCHEDULER_EXTERNAL_DESTS</code>获取该<code class="codeph">ALL_SCHEDULER_EXTERNAL_DESTS</code> 。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_FILE_WATCHER（file_watcher_name =&gt;'EOD_FILE_WATCHER'，directory_path =&gt;'？/ eod_reports'，file_name =&gt;'eod * .txt'，credential_name =&gt;'watch_credential'，destination =&gt; NULL，enabled =&gt; FALSE）;结束; /</pre></li>
                                    <li>
                                       <p>将文件观察程序上的<code class="codeph">EXECUTE</code>授予任何拥有引用文件观察程序的基于事件的作业的模式。
                                       </p><pre class="oac_no_warn" dir="ltr">在EOD_FILE_WATCHER上执行GRANT EXECUTE到dssuser;</pre></li>
                                 </ol>
                              </dd>
                              <dt class="dlterm"><a name="GUID-1D2AA753-AC97-4D4E-B6FA-68B821965CE5__GUID-DC48E932-503A-44EE-8D80-9782B2E6ECEC"><!-- --></a>任务3  - 使用元数据参数创建程序对象</dt>
                              <dd>
                                 <p>因此，您的应用程序可以检索文件到达事件消息内容（包括文件名，文件大小等），使用引用事件消息的元数据参数创建Scheduler程序对象。</p>
                                 <p>执行以下步骤：</p>
                                 <ol>
                                    <li>
                                       <p>创建程序。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_PROGRAM（program_name =&gt;'dssuser.eod_program'，program_type =&gt;'stored_procedure'，program_action =&gt;'eod_processor'，number_of_arguments =&gt; 1，enabled =&gt; FALSE）;结束; /</pre></li>
                                    <li>
                                       <p>使用<code class="codeph">event_message</code>属性定义元数据参数。
                                       </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DEFINE_METADATA_ARGUMENT（program_name =&gt;'DSSUSER.EOD_PROGRAM'，metadata_attribute =&gt;'event_message'，argument_position =&gt; 1）;结束; /</pre></li>
                                    <li>
                                       <p>创建程序调用的存储过程。</p>
                                       <p>处理文件到达事件的存储过程必须具有<code class="codeph">SYS.SCHEDULER_FILEWATCHER_RESULT</code>类型的参数，该参数是事件消息的数据类型。该参数的位置必须与定义的元数据参数的位置匹配。然后，该过程可以访问此抽象数据类型的属性以了解到达的文件。
                                       </p>
                                    </li>
                                 </ol>
                                 <div class="infoboxnotealso" id="GUID-1D2AA753-AC97-4D4E-B6FA-68B821965CE5__GUID-0341E0F9-3A2C-4A8B-9697-8879249BDA72">
                                    <p class="notep1">也可以看看：</p>
                                    <p></p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><a href="../arpls/DBMS_SCHEDULER.html#ARPLS72325" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> ，以获取<code class="codeph">DEFINE_METADATA_ARGUMENT</code>过程的描述</p>
                                       </li>
                                       <li>
                                          <p>有关<code class="codeph">SYS.SCHEDULER_FILEWATCHER_RESULT</code>类型说明的<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72256" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                                       </li>
                                    </ul>
                                 </div>
                              </dd>
                              <dt class="dlterm"><a name="GUID-1D2AA753-AC97-4D4E-B6FA-68B821965CE5__GUID-0189856B-3158-4D67-A060-CBC837766AC3"><!-- --></a>任务4  - 创建引用文件监视器的基于事件的作业</dt>
                              <dd>
                                 <p>创建基于事件的作业，如<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0B2BE088-27DD-46F7-9E07-4529867ECEB4" title="您可以使用CREATE_JOB过程或Cloud Control创建基于事件的作业。作业可以包括作为作业属性内联的事件信息，或者可以通过指向事件计划来指定事件信息。与基于时间表的作业一样，除非作业结束日期过去，达到max_runs或达到最大失败次数（max_failures），否则不会自动删除基于事件的作业。">创建基于事件的作业</a> ”中所述</span> ，但有以下例外：不提供<code class="codeph">queue_spec</code>属性中的队列规范， <code class="codeph">queue_spec</code>提供文件监视器的名称。您通常会将<code class="codeph">event_condition</code>作业属性保留为null，但如果需要，您可以提供条件。
                                 </p>
                                 <p>作为为作业设置<code class="codeph">queue_spec</code>属性的替代方法，您可以创建事件计划，在事件计划的<code class="codeph">queue_spec</code>属性中引用文件观察程序，并在作业的<code class="codeph">schedule_name</code>属性中引用事件计划。
                                 </p>
                                 <p>执行以下步骤以准备基于事件的作业：</p>
                                 <ol>
                                    <li>
                                       <p>创造工作。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'dssuser.eod_job'，program_name =&gt;'dssuser.eod_program'，event_condition =&gt; NULL，queue_spec =&gt;'eod_file_watcher'，auto_drop =&gt; FALSE，enabled =&gt; FALSE）;结束; /</pre></li>
                                    <li>
                                       <p>如果希望为文件到达事件的每个实例运行作业，即使作业已在处理上一个事件，也请将<code class="codeph">parallel_instances</code>属性设置为<code class="codeph">TRUE</code> 。使用此设置，作业将作为轻量级作业运行，以便可以快速启动作业的多个实例。要丢弃在基于事件的作业已处理另一个作业时发生的文件观察程序事件，请将<code class="codeph">parallel_instances</code>属性保留为<code class="codeph">FALSE</code> （默认值）。
                                       </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.SET_ATTRIBUTE（'dssuser.eod_job'，'parallel_instances'，TRUE）;结束; /</pre><p>有关此属性的更多信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72399" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中</span></a>的<code class="codeph">SET_ATTRIBUTE</code>描述。
                                       </p>
                                    </li>
                                 </ol>
                                 <div class="infoboxnotealso" id="GUID-1D2AA753-AC97-4D4E-B6FA-68B821965CE5__GUID-56C1ED99-E2B3-4806-88D5-10118F7ABD04">
                                    <p class="notep1">也可以看看：</p>
                                    <p></p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5ED0E0D8-05B4-4DDA-839E-0AE9142000D4" title="您可以创建基于事件的计划。然后，您可以重复使用多个作业的计划。为此，请使用CREATE_EVENT_SCHEDULE过程，或使用Cloud Control。">创建活动日程表</a> ”</span></p>
                                       </li>
                                       <li>
                                          <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-DD541BA1-FA8C-421C-B138-C571D4B140C6" title="可以通过指向命名程序和命名计划来创建作业。">使用命名程序和计划创建作业</a> ”</span></p>
                                       </li>
                                    </ul>
                                 </div>
                              </dd>
                              <dt class="dlterm"><a name="GUID-1D2AA753-AC97-4D4E-B6FA-68B821965CE5__CIAGABCA"><!-- --></a>任务5  - 启用所有对象</dt>
                              <dd>
                                 <p>启用文件观察程序，程序和作业。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.ENABLE（'DSSUSER.EOD_PROGRAM，DSSUSER.EOD_JOB，EOD_FILE_WATCHER'）;结束; /</pre></dd>
                           </dl>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-281B7FC1-6134-4E1F-83B0-082D588F21B6" title="您可以将计划程序配置为在文件到达本地系统或远程系统时启动作业。作业是基于事件的作业，文件到达事件由文件观察器引发，该文件观察器是Oracle Database 11g第2版（11.2）中引入的Scheduler对象。">文件到达系统时启动作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13289"></a><div class="props_rev_3"><a id="GUID-7813B078-859A-489E-BBA2-82D791DE8CBF" name="GUID-7813B078-859A-489E-BBA2-82D791DE8CBF"></a><h5 id="ADMIN-GUID-7813B078-859A-489E-BBA2-82D791DE8CBF" class="sect5"><span class="enumeration_section">29.5.3.4</span>文件到达示例</h5>
                     <div>
                        <p>示例说明了文件观察程序作业的文件到达。</p>
                        <div class="section">
                           <p>在此示例中，基于事件的作业会监视来自不同位置的当日销售报告到达本地主机的情况。当每个报告文件到达时，存储过程捕获有关该文件的信息并将该信息存储在名为<code class="codeph">eod_reports</code>的表中。然后，定期计划的报告聚合作业可以查询此表，处理所有未处理的文件，并将任何新处理的文件标记为已处理。
                           </p>
                           <p>假设运行以下代码的数据库用户已在<code class="codeph">SYS.SCHEDULER_FILEWATCHER_RESULT</code>数据类型上被授予<code class="codeph">EXECUTE</code> 。
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_CREDENTIAL.CREATE_CREDENTIAL（credential_name =&gt;'watch_credential'，username =&gt;'pos1'，password =&gt;'jk4545st'）;结束; / CREATE TABLE eod_reports（WHEN timestamp，file_name varchar2（100），file_size number，processed char（1））;创建或替换过程q_eod_report（有效负载在sys.scheduler_filewatcher_result中）AS BEGIN INSERT INTO eod_reports VALUES（payload.file_timestamp，payload.directory_path ||'/'|| payload.actual_file_name，payload.file_size，'N'）;结束; / BEGIN DBMS_SCHEDULER.CREATE_PROGRAM（program_name =&gt;'eod_prog'，program_type =&gt;'stored_procedure'，program_action =&gt;'q_eod_report'，number_of_arguments =&gt; 1，enabled =&gt; FALSE）; DBMS_SCHEDULER.DEFINE_METADATA_ARGUMENT（program_name =&gt;'eod_prog'，metadata_attribute =&gt;'event_message'，argument_position =&gt; 1）; DBMS_SCHEDULER.ENABLE（ 'eod_prog'）;结束; / BEGIN DBMS_SCHEDULER.CREATE_FILE_WATCHER（file_watcher_name =&gt;'eod_reports_watcher'，directory_path =&gt;'？/ eod_reports'，file_name =&gt;'eod * .txt'，credential_name =&gt;'watch_credential'，destination =&gt; NULL，enabled =&gt; FALSE）;结束; / BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'eod_job'，program_name =&gt;'eod_prog'，event_condition =&gt;'tab.user_data.file_size&gt; 10'，queue_spec =&gt;'eod_reports_watcher'，auto_drop =&gt; FALSE，enabled =&gt; FALSE） ; DBMS_SCHEDULER.SET_ATTRIBUTE（ 'EOD_JOB'， 'PARALLEL_INSTANCES'，TRUE）;结束; / EXEC DBMS_SCHEDULER.ENABLE（'eod_reports_watcher，eod_job'）;</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-281B7FC1-6134-4E1F-83B0-082D588F21B6" title="您可以将计划程序配置为在文件到达本地系统或远程系统时启动作业。作业是基于事件的作业，文件到达事件由文件观察器引发，该文件观察器是Oracle Database 11g第2版（11.2）中引入的Scheduler对象。">文件到达系统时启动作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13290"></a><div class="props_rev_3"><a id="GUID-459461D9-B7B3-45BE-BBDA-A03D7C521C04" name="GUID-459461D9-B7B3-45BE-BBDA-A03D7C521C04"></a><h5 id="ADMIN-GUID-459461D9-B7B3-45BE-BBDA-A03D7C521C04" class="sect5"><span class="enumeration_section">29.5.3.5</span>管理文件监视器</h5>
                     <div>
                        <p><code class="codeph">DBMS_SCHEDULER</code> PL / SQL包提供了为文件监视器启用，禁用，删除和设置属性的过程。
                        </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0778C8F6-0A8E-4F0B-9248-CCFA63023293">启用文件监视器</a><br>如果禁用了文件观察程序，则使用<code class="codeph">DBMS_SCHEDULER.ENABLE</code>启用它。
                           </li>
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5D8FF7DC-3E94-410A-B5D0-C5C8F2186F40">改变文件监视器</a><br>使用<code class="codeph">DBMS_SCHEDULER.SET_ATTRIBUTE</code>和<code class="codeph">DBMS_SCHEDULER.SET_ATTRIBUTE_NULL</code>包过程来修改文件观察程序的属性。
                           </li>
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-098CF650-1D21-47EA-BE70-8AF266B95DA5">禁用和删除文件监视器</a><br>使用<code class="codeph">DBMS_SCHEDULER.DISABLE</code>过程禁用文件观察程序和<code class="codeph">DBMS_SCHEDULER.DROP_FILE_WATCHER</code>过程以删除文件观察程序。
                           </li>
                           <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-C8D8FCDE-777E-43DA-838B-4BA0105D0969">更改文件到达检测间隔</a><br>默认情况下，文件监视器每十分钟检查一次文件是否到达。您可以更改此间隔。
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-459461D9-B7B3-45BE-BBDA-A03D7C521C04__GUID-3AE3FF1A-B7EB-4ACF-A1D3-416A2372A4F3">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">DBMS_SCHEDULER</code> PL / SQL包的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72235" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-281B7FC1-6134-4E1F-83B0-082D588F21B6" title="您可以将计划程序配置为在文件到达本地系统或远程系统时启动作业。作业是基于事件的作业，文件到达事件由文件观察器引发，该文件观察器是Oracle Database 11g第2版（11.2）中引入的Scheduler对象。">文件到达系统时启动作业</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN13291"></a><div class="props_rev_3"><a id="GUID-0778C8F6-0A8E-4F0B-9248-CCFA63023293" name="GUID-0778C8F6-0A8E-4F0B-9248-CCFA63023293"></a><h6 id="ADMIN-GUID-0778C8F6-0A8E-4F0B-9248-CCFA63023293" class="sect6"><span class="enumeration_section">29.5.3.5.1</span>启用文件监视器</h6>
                        <div>
                           <p>如果禁用了文件观察程序，则使用<code class="codeph">DBMS_SCHEDULER.ENABLE</code>启用它。
                           </p>
                           <div class="section">
                              <p>这在<a href="scheduling-jobs-with-oracle-scheduler.html#GUID-1D2AA753-AC97-4D4E-B6FA-68B821965CE5__CIAGABCA">任务5“ - 启用所有对象”中显示</a> 。
                              </p>
                              <p>仅当文件监视器的所有属性都设置为合法值且文件观察程序所有者对指定凭据具有<code class="codeph">EXECUTE</code>特权时，才能启用文件监视器。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-459461D9-B7B3-45BE-BBDA-A03D7C521C04" title="DBMS_SCHEDULER PL / SQL包提供了为文件监视器启用，禁用，删除和设置属性的过程。">管理文件监视器</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13292"></a><div class="props_rev_3"><a id="GUID-5D8FF7DC-3E94-410A-B5D0-C5C8F2186F40" name="GUID-5D8FF7DC-3E94-410A-B5D0-C5C8F2186F40"></a><h6 id="ADMIN-GUID-5D8FF7DC-3E94-410A-B5D0-C5C8F2186F40" class="sect6"><span class="enumeration_section">29.5.3.5.2</span>更改文件监视器</h6>
                        <div>
                           <p>使用<code class="codeph">DBMS_SCHEDULER.SET_ATTRIBUTE</code>和<code class="codeph">DBMS_SCHEDULER.SET_ATTRIBUTE_NULL</code>包过程来修改文件观察程序的属性。
                           </p>
                           <div class="section">
                              <p>有关文件观察程序属性的信息，请参阅<code class="codeph">CREATE_FILE_WATCHER</code>过程说明。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-459461D9-B7B3-45BE-BBDA-A03D7C521C04" title="DBMS_SCHEDULER PL / SQL包提供了为文件监视器启用，禁用，删除和设置属性的过程。">管理文件监视器</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13293"></a><div class="props_rev_3"><a id="GUID-098CF650-1D21-47EA-BE70-8AF266B95DA5" name="GUID-098CF650-1D21-47EA-BE70-8AF266B95DA5"></a><h6 id="ADMIN-GUID-098CF650-1D21-47EA-BE70-8AF266B95DA5" class="sect6"><span class="enumeration_section">29.5.3.5.3</span>禁用和删除文件监视器</h6>
                        <div>
                           <p>使用<code class="codeph">DBMS_SCHEDULER.DISABLE</code>过程禁用文件观察程序和<code class="codeph">DBMS_SCHEDULER.DROP_FILE_WATCHER</code>过程以删除文件观察程序。
                           </p>
                           <div class="section">
                              <p>如果存在依赖于它的作业，则无法禁用或删除文件观察程序。要在此情况下强制禁用或删除操作，请将<code class="codeph">FORCE</code>属性设置为<code class="codeph">TRUE</code> 。如果强制禁用或删除文件观察程序，则依赖它的作业将被禁用。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-459461D9-B7B3-45BE-BBDA-A03D7C521C04" title="DBMS_SCHEDULER PL / SQL包提供了为文件监视器启用，禁用，删除和设置属性的过程。">管理文件监视器</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13294"></a><div class="props_rev_3"><a id="GUID-C8D8FCDE-777E-43DA-838B-4BA0105D0969" name="GUID-C8D8FCDE-777E-43DA-838B-4BA0105D0969"></a><h6 id="ADMIN-GUID-C8D8FCDE-777E-43DA-838B-4BA0105D0969" class="sect6"><span class="enumeration_section">29.5.3.5.4</span>更改文件到达检测间隔</h6>
                        <div>
                           <p>默认情况下，文件监视器每十分钟检查一次文件是否到达。您可以更改此间隔。</p>
                           <div class="section">
                              <p class="subhead3" id="GUID-C8D8FCDE-777E-43DA-838B-4BA0105D0969__GUID-06DAC1EF-3633-4943-9BD2-3E8B90D7584C">要更改文件到达检测间隔：</p>
                              <ol>
                                 <li>
                                    <p>以<code class="codeph">SYS</code>用户身份连接到数据库。
                                    </p>
                                 </li>
                                 <li>
                                    <p>更改预定义计划<code class="codeph">SYS.FILE_WATCHER_SCHEDULE</code>的<code class="codeph">REPEAT_INTERVAL</code>属性。使用任何有效的日历语法。
                                    </p>
                                    <p>Oracle建议不要将文件监视器的<code class="codeph">REPEAT_INTERVAL</code>设置为低于任何<code class="codeph">STEADY_STATE_DURATION</code>属性值的值。
                                    </p>
                                    <div class="infoboxnotealso" id="GUID-C8D8FCDE-777E-43DA-838B-4BA0105D0969__GUID-A51B5DCF-E5C3-4912-B4FD-D0D0C764E438">
                                       <p class="notep1">也可以看看：</p>
                                       <p></p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><a href="../arpls/DBMS_SCHEDULER.html#ARPLS72416" target="_blank"><span class="italic">“</span></a>文件观察器”属性值的“ <a href="../arpls/DBMS_SCHEDULER.html#ARPLS72416" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> ”</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">CREATE_FILE_WATCHER</code>参数的<a href="../arpls/DBMS_SCHEDULER.html#ARPLS72299" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                                          </li>
                                       </ul>
                                    </div>
                                    <p>以下示例将文件到达检测频率更改为每两分钟一次。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.SET_ATTRIBUTE（'FILE_WATCHER_SCHEDULE'，'REPEAT_INTERVAL'，'FREQ = MINUTELY; INTERVAL = 2'）;结束; /</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-459461D9-B7B3-45BE-BBDA-A03D7C521C04" title="DBMS_SCHEDULER PL / SQL包提供了为文件监视器启用，禁用，删除和设置属性的过程。">管理文件监视器</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADMIN13295"></a><div class="props_rev_3"><a id="GUID-FEB6730F-1BA5-4C04-9475-27A9183F4148" name="GUID-FEB6730F-1BA5-4C04-9475-27A9183F4148"></a><h5 id="ADMIN-GUID-FEB6730F-1BA5-4C04-9475-27A9183F4148" class="sect5"><span class="enumeration_section">29.5.3.6</span>查看文件监视器信息</h5>
                     <div>
                        <p>您可以通过查询视图<code class="codeph">*_SCHEDULER_FILE_WATCHERS</code>来查看有关文件监视器的信息。</p>
                        <div class="section">
                           <p>例如，运行以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT file_watcher_name，destination，directory_path，file_name，credential_name FROM dba_scheduler_file_watchers; FILE_WATCHER_NAME DESTINATION DIRECTORY_PATH FILE_NAME CREDENTIAL_NAME -------------------- -------------------- ----- --------------- ---------- ---------------- MYFW dsshost.example.com / tmp abc MYFW_CRED EOD_FILE_WATCHER？/ eod_reports eod * .txt WATCH_CREDENTIAL</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-FEB6730F-1BA5-4C04-9475-27A9183F4148__GUID-BFDD6769-96CF-440E-855B-6ED927FB2CB9">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">*_SCHEDULER_FILE_WATCHERS</code>视图的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=REFRN20759" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-281B7FC1-6134-4E1F-83B0-082D588F21B6" title="您可以将计划程序配置为在文件到达本地系统或远程系统时启动作业。作业是基于事件的作业，文件到达事件由文件观察器引发，该文件观察器是Oracle Database 11g第2版（11.2）中引入的Scheduler对象。">文件到达系统时启动作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN10021"></a><div class="props_rev_3"><a id="GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" name="GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119"></a><h3 id="ADMIN-GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" class="sect3"><span class="enumeration_section">29.6</span>创建和管理作业链</h3>
               <div>
                  <p>工作链是一组命名的任务，它们链接在一起以实现组合目标。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-B037CEB6-CD2B-4F19-914D-4E99C2C8BAC7">关于创建和管理作业链</a><br>使用作业链，您可以实现基于依赖关系的计划，其中作业根据一个或多个先前作业的结果开始。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-A9F2DA2A-9C5D-43CD-8536-9B4EDD604986">连锁任务及其程序</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见的链任务。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E1A8C3A2-55E9-4AD0-91F7-33BE1B742D52">创建链</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">CREATE_CHAIN</code>过程创建链。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-95D32A07-B94A-48A9-8E3F-34BCF9C757A5">定义链步骤</a><br>创建链对象后，您可以定义一个或多个链步骤。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE">将规则添加到链中</a><br>使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DEFINE_CHAIN_RULE</code>过程将规则添加到链中。您为要添加到链的每个规则调用此过程一次。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-05A95E35-645E-42D7-A198-9022CE88581D">设置连锁规则的评估区间</a><br>调度程序在链式作业开始时和每个链式步骤结束时评估所有链规则。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-39A461D5-0B5A-4689-B554-610C6C676D24">启用链</a><br>您在<code class="codeph">DBMS_SCHEDULER</code>包中启用了具有<code class="codeph">ENABLE</code>过程的链。必须先启用链，然后才能由作业运行。启用已启用的链不会返回错误。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7BE62C9F-6730-41E4-9008-D71A04E9D6B8">为链创造就业机会</a><br>要运行链，您必须使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">RUN_CHAIN</code>过程，或者创建并安排“ <code class="codeph">CHAIN</code> ”类型的作业（ <span class="bold">链式作业</span> ）。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-3F6342AE-D71D-434E-AAA5-24ACD53C2215">掉链</a><br>使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DROP_CHAIN</code>过程删除链，包括其步骤和规则。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-496B3D54-BFBC-4FB9-B30F-9CBCEFF8C925">运行链</a><br>要立即运行链，请使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">RUN_JOB</code>或<code class="codeph">RUN_CHAIN</code>过程。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-EF63704A-C591-4F81-9638-64183FE683AF">删除链规则</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DROP_CHAIN_RULE</code>过程从链中删除规则。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-A38AC821-BF4C-4BC6-BF56-0D663B345E43">禁用链</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DISABLE</code>过程禁用链。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0E2D504C-00E4-427E-857C-004103D1E14D">掉链阶梯</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DROP_CHAIN_STEP</code>过程从链中删除一个步骤。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-8337ADB6-A82E-49AE-9A27-85F70C14E6CA">停止链条</a><br>要停止正在运行的链，请调用<code class="codeph">DBMS_SCHEDULER.STOP_JOB</code>过程，传递链式作业的名称（启动链的作业）。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E0997FFF-B68F-4130-AD6C-E6DC8A09E4A2">停止个别连锁步骤</a><br>您可以通过创建在满足规则条件时停止一个或多个步骤的链规则或通过调用<code class="codeph">STOP_JOB</code>过程来停止单个链步骤。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-05F33ED5-DF4C-433F-839E-25BBE59E195E">暂停链</a><br>您可以暂停整个链或链的各个分支。您可以通过<code class="codeph">DBMS_SCHEDULER.ALTER_CHAIN</code>或<code class="codeph">ALTER_RUNNING_CHAIN</code>过程将一个或多个步骤的<code class="codeph">PAUSE</code>属性设置为<code class="codeph">TRUE</code> <code class="codeph">ALTER_RUNNING_CHAIN</code>执行此操作。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-FF1D11DD-0629-4B51-A1F6-E67AC11FEF0B">跳过链步骤</a><br>您可以跳过链中的一个或多个步骤。您可以通过使用<code class="codeph">DBMS_SCHEDULER.ALTER_CHAIN</code>或<code class="codeph">ALTER_RUNNING_CHAIN</code>过程将一个或多个步骤的<code class="codeph">SKIP</code>属性设置为<code class="codeph">TRUE</code> <code class="codeph">ALTER_RUNNING_CHAIN</code>执行此操作。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-B003BFFC-64FF-424B-A7F6-335A6EBA4D6A">运行链的一部分</a><br>您只能运行链的一部分。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-FB3935A5-E5B6-4053-B808-8916F131C43C">监控运行链</a><br>您可以使用以下两个视图查看正在运行的链的状态： <code class="codeph">*_SCHEDULER_RUNNING_JOBS</code>和<code class="codeph">*_SCHEDULER_RUNNING_CHAINS</code> 。</li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5FADA829-C7F0-4A2F-BDAB-EF494A5BE014">处理陷入困境的链条</a><br>在步骤完成时，始终评估链规则以确定要运行的后续步骤。如果没有规则导致另一步骤开始，没有导致链条端，并且<code class="codeph">evaluation_interval</code>用于链是<code class="codeph">NULL</code> ，链进入<span class="bold">失速</span>状态。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119__GUID-1C186487-A28E-402C-8CA1-EB84D681060E">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q"><a href="oracle-scheduler-concepts.html#GUID-FE177718-8A7E-4BDD-A8FC-1A41AF8A3517" title="Chains are the means by which you can implement dependency scheduling, in which job starts depend on the outcomes of one or more previous jobs.">链条</a></span>概述的<span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-FE177718-8A7E-4BDD-A8FC-1A41AF8A3517" title="链是实现依赖关系调度的手段，其中作业启动取决于一个或多个先前作业的结果。">链条</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="administering-oracle-scheduler.html#GUID-8DCF609E-6427-443D-87C6-5B163DE5A410" title="示例说明了创建链。">创建链的例子</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" title="您可以使用Oracle Scheduler创建，运行和管理作业。">使用Oracle Scheduler调度作业</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-B037CEB6-CD2B-4F19-914D-4E99C2C8BAC7" name="GUID-B037CEB6-CD2B-4F19-914D-4E99C2C8BAC7"></a><h4 id="ADMIN-GUID-B037CEB6-CD2B-4F19-914D-4E99C2C8BAC7" class="sect4"><span class="enumeration_section">29.6.1</span>关于创建和管理作业链</h4>
                  <div>
                     <p>使用作业链，您可以实现基于依赖关系的计划，其中作业根据一个或多个先前作业的结果开始。</p>
                     <p>要创建和使用链，请按顺序完成以下任务：</p>
                     <div class="tblformal" id="GUID-B037CEB6-CD2B-4F19-914D-4E99C2C8BAC7__GUID-E88224CB-11CF-4CDE-B865-05110DC08584">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table lists in the first column the steps required to create a chain. The second column contains a cross reference to the corresponding " how="" t="=" ="" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="53%" id="d268851e8545">任务</th>
                                 <th align="left" valign="bottom" width="47%" id="d268851e8548">看到...</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="53%" id="d268851e8553" headers="d268851e8545 ">
                                    <p>1。创建一个链对象</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d268851e8553 d268851e8548 ">
                                    <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E1A8C3A2-55E9-4AD0-91F7-33BE1B742D52" title="您可以使用DBMS_SCHEDULER包中的CREATE_CHAIN过程创建链。">创建链</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="53%" id="d268851e8571" headers="d268851e8545 ">
                                    <p>2。定义链中的步骤</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d268851e8571 d268851e8548 ">
                                    <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-95D32A07-B94A-48A9-8E3F-34BCF9C757A5" title="创建链对象后，您可以定义一个或多个链步骤。">定义链步骤</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="53%" id="d268851e8583" headers="d268851e8545 ">
                                    <p>3。添加规则</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d268851e8583 d268851e8548 ">
                                    <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE" title="使用DBMS_SCHEDULER包中的DEFINE_CHAIN_RULE过程将规则添加到链中。您为要添加到链的每个规则调用此过程一次。">将规则添加到链中</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="53%" id="d268851e8601" headers="d268851e8545 ">
                                    <p>4。启用链</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d268851e8601 d268851e8548 ">
                                    <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-39A461D5-0B5A-4689-B554-610C6C676D24" title="您在DBMS_SCHEDULER包中启用了具有ENABLE过程的链。必须先启用链，然后才能由作业运行。启用已启用的链不会返回错误。">启用链</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="53%" id="d268851e8619" headers="d268851e8545 ">
                                    <p>5。创建指向链的作业（“链工作”）</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d268851e8619 d268851e8548 ">
                                    <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7BE62C9F-6730-41E4-9008-D71A04E9D6B8" title="要运行链，您必须使用DBMS_SCHEDULER包中的RUN_CHAIN过程，或者创建并安排“CHAIN”类型的作业（链式作业）。">为链创造就业机会</a></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13106"></a><a id="ADMIN12456"></a><div class="props_rev_3"><a id="GUID-A9F2DA2A-9C5D-43CD-8536-9B4EDD604986" name="GUID-A9F2DA2A-9C5D-43CD-8536-9B4EDD604986"></a><h4 id="ADMIN-GUID-A9F2DA2A-9C5D-43CD-8536-9B4EDD604986" class="sect4"><span class="enumeration_section">29.6.2</span>连锁任务及其程序</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见的链任务。
                     </p>
                     <div class="section">
                        <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-A9F2DA2A-9C5D-43CD-8536-9B4EDD604986__CHDJEJAJ" title="第1列列出了一些常见的窗口组任务，第2列列出了用于执行任务的过程;第3列列出了执行任务所需的权限。">表29-6</a>说明了涉及链的常见任务以及与之相关的过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-A9F2DA2A-9C5D-43CD-8536-9B4EDD604986__CHDJEJAJ">
                        <p class="titleintable">表29-6链任务及其程序</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="连锁任务及其程序" width="100%" border="1" summary="Column 1 lists some common window group tasks, column 2 lists the procedures used to perform the tasks; column 3 lists the privileges required to perform the tasks." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d268851e8698">任务</th>
                                 <th align="left" valign="bottom" width="28%" id="d268851e8701">程序</th>
                                 <th align="left" valign="bottom" width="50%" id="d268851e8704">需要特权</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d268851e8709" headers="d268851e8698 ">
                                    <p>创建一个链</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d268851e8709 d268851e8701 ">
                                    <p><code class="codeph">CREATE_CHAIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e8709 d268851e8704 ">
                                    <p>如果所有者， <code class="codeph">CREATE JOB</code> ， <code class="codeph">CREATE EVALUATION CONTEXT</code> ， <code class="codeph">CREATE</code> <code class="codeph">RULE</code> ，并<code class="codeph">CREATE RULE SET</code> 。<code class="codeph">CREATE ANY JOB</code> ， <code class="codeph">CREATE ANY RULE</code> ， <code class="codeph">CREATE ANY RULE SET</code> ，并<code class="codeph">CREATE ANY EVALUATION CONTEXT</code>否则</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d268851e8747" headers="d268851e8698 ">
                                    <p>放下一条链子</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d268851e8747 d268851e8701 ">
                                    <p><code class="codeph">DROP_CHAIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e8747 d268851e8704 ">
                                    <p>链的所有权或链上的<code class="codeph">ALTER</code>权限或<code class="codeph">CREATE ANY JOB</code>权限。如果不是所有者，还需要<code class="codeph">DROP ANY EVALUATION CONTEXT</code>和<code class="codeph">DROP ANY RULE SET</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d268851e8769" headers="d268851e8698 ">
                                    <p>改变链条</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d268851e8769 d268851e8701 ">
                                    <p><code class="codeph">SET_ATTRIBUTE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e8769 d268851e8704 ">
                                    <p>链的所有权，或链上的<code class="codeph">ALTER</code>权限或<code class="codeph">CREATE ANY JOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d268851e8785" headers="d268851e8698 ">
                                    <p>改变运行链</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d268851e8785 d268851e8701 ">
                                    <p><code class="codeph">ALTER_RUNNING_CHAIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e8785 d268851e8704 ">
                                    <p>工作的所有权，或工作的<code class="codeph">ALTER</code>权限或<code class="codeph">CREATE ANY JOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d268851e8801" headers="d268851e8698 ">
                                    <p>运行一个链</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d268851e8801 d268851e8701 ">
                                    <p><code class="codeph">RUN_CHAIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e8801 d268851e8704 ">
                                    <p><code class="codeph">CREATE JOB</code>或<code class="codeph">CREATE ANY JOB</code> 。此外，新作业的所有者必须具有链上的<code class="codeph">EXECUTE</code>特权或<code class="codeph">EXECUTE ANY PROGRAM</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d268851e8822" headers="d268851e8698 ">
                                    <p>向链中添加规则</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d268851e8822 d268851e8701 ">
                                    <p><code class="codeph">DEFINE_CHAIN_RULE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e8822 d268851e8704 ">
                                    <p>链的所有权，或链上的<code class="codeph">ALTER</code>权限或<code class="codeph">CREATE ANY JOB</code>权限。<code class="codeph">CREATE RULE</code>如果链的所有者， <code class="codeph">CREATE ANY RULE</code> ，否则</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d268851e8845" headers="d268851e8698 ">
                                    <p>改变链条中的规则</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d268851e8845 d268851e8701 ">
                                    <p><code class="codeph">DEFINE_CHAIN_RULE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e8845 d268851e8704 ">
                                    <p>链的所有权，或链上的<code class="codeph">ALTER</code>权限或<code class="codeph">CREATE ANY JOB</code>权限。如果不是链的所有者，则需要对规则具有<code class="codeph">ALTER</code>权限或<code class="codeph">ALTER ANY RULE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d268851e8867" headers="d268851e8698 ">
                                    <p>从链中删除规则</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d268851e8867 d268851e8701 ">
                                    <p><code class="codeph">DROP_CHAIN_RULE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e8867 d268851e8704 ">
                                    <p>链的所有权，或链上的<code class="codeph">ALTER</code>权限或<code class="codeph">CREATE ANY JOB</code>权限。如果不是链的所有者，请<code class="codeph">DROP ANY RULE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d268851e8887" headers="d268851e8698 ">
                                    <p>启用链</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d268851e8887 d268851e8701 ">
                                    <p><code class="codeph">ENABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e8887 d268851e8704 ">
                                    <p>链的所有权，或链上的<code class="codeph">ALTER</code>权限或<code class="codeph">CREATE ANY JOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d268851e8903" headers="d268851e8698 ">
                                    <p>禁用链</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d268851e8903 d268851e8701 ">
                                    <p><code class="codeph">DISABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e8903 d268851e8704 ">
                                    <p>链的所有权，或链上的<code class="codeph">ALTER</code>权限或<code class="codeph">CREATE ANY JOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d268851e8919" headers="d268851e8698 ">
                                    <p>创建步骤</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d268851e8919 d268851e8701 ">
                                    <p><code class="codeph">DEFINE_CHAIN_STEP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e8919 d268851e8704 ">
                                    <p>链的所有权，或链上的<code class="codeph">ALTER</code>权限或<code class="codeph">CREATE ANY JOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d268851e8936" headers="d268851e8698 ">
                                    <p>放下步骤</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d268851e8936 d268851e8701 ">
                                    <p><code class="codeph">DROP_CHAIN_STEP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e8936 d268851e8704 ">
                                    <p>链的所有权，或链上的<code class="codeph">ALTER</code>权限或<code class="codeph">CREATE ANY JOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d268851e8952" headers="d268851e8698 ">
                                    <p>更改步骤（包括为步骤分配其他属性值）</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d268851e8952 d268851e8701 ">
                                    <p><code class="codeph">ALTER_CHAIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e8952 d268851e8704 ">
                                    <p>链的所有权，或链上的<code class="codeph">ALTER</code>权限或<code class="codeph">CREATE ANY JOB</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12457"></a><div class="props_rev_3"><a id="GUID-E1A8C3A2-55E9-4AD0-91F7-33BE1B742D52" name="GUID-E1A8C3A2-55E9-4AD0-91F7-33BE1B742D52"></a><h4 id="ADMIN-GUID-E1A8C3A2-55E9-4AD0-91F7-33BE1B742D52" class="sect4"><span class="enumeration_section">29.6.3</span>创建链</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">CREATE_CHAIN</code>过程创建链。
                     </p>
                     <div class="section">
                        <p>您必须首先确保拥有所需的权限。有关详细信息，请参阅<span class="q">“ <a href="administering-oracle-scheduler.html#GUID-1A717964-7183-4E30-8BB8-661A61557613__BAJBEDFI">设置链权限</a> ”</span> 。
                        </p>
                        <p>使用<code class="codeph">CREATE_CHAIN</code>创建链对象<code class="codeph">CREATE_CHAIN</code> ，可以分别定义链步骤和链规则。
                        </p>
                        <p>以下示例创建一个链：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_CHAIN（chain_name =&gt;'my_chain1'，rule_set_name =&gt; NULL，evaluation_interval =&gt; NULL，comments =&gt;'我的第一个链'）;结束; /</pre><p><code class="codeph">rule_set_name</code>和<code class="codeph">evaluation_interval</code>参数通常保留为<code class="codeph">NULL</code> 。 <code class="codeph">evaluation_interval</code>可以定义<code class="codeph">evaluation_interval</code>链规则的重复间隔。 <code class="codeph">rule_set_name</code>指Oracle Streams中定义的规则集。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E1A8C3A2-55E9-4AD0-91F7-33BE1B742D52__GUID-B223C88F-FB21-42D8-AC81-3B03B92B6D6E">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE" title="使用DBMS_SCHEDULER包中的DEFINE_CHAIN_RULE过程将规则添加到链中。您为要添加到链的每个规则调用此过程一次。">将规则添加到链</a> ”</span>以获取有关<code class="codeph">evaluation_interval</code>属性的更多信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">CREATE_CHAIN</code>更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72235" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12680"></a><a id="ADMIN13385"></a><a id="ADMIN12682"></a><a id="ADMIN12458"></a><div class="props_rev_3"><a id="GUID-95D32A07-B94A-48A9-8E3F-34BCF9C757A5" name="GUID-95D32A07-B94A-48A9-8E3F-34BCF9C757A5"></a><h4 id="ADMIN-GUID-95D32A07-B94A-48A9-8E3F-34BCF9C757A5" class="sect4"><span class="enumeration_section">29.6.4</span>定义链步骤</h4>
                  <div>
                     <p>创建链对象后，您可以定义一个或多个链步骤。</p>
                     <div class="section">
                        <p>每个步骤都可以指向以下之一：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>调度程序对象（程序）</p>
                           </li>
                           <li>
                              <p>另一条链（嵌套链）</p>
                           </li>
                           <li>
                              <p>事件计划，内联事件或文件监视器</p>
                           </li>
                        </ul>
                        <p>您可以使用<code class="codeph">DEFINE_CHAIN_STEP</code>过程定义指向程序或嵌套链的步骤。以下示例向<code class="codeph">my_chain1</code>添加了两个步骤：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DEFINE_CHAIN_STEP（chain_name =&gt;'my_chain1'，step_name =&gt;'my_step1'，program_name =&gt;'my_program1'）; DBMS_SCHEDULER.DEFINE_CHAIN_STEP（chain_name =&gt;'my_chain1'，step_name =&gt;'my_step2'，program_name =&gt;'my_chain2'）;结束; /</pre><p>定义步骤时，不必存在指定的程序或链。但是，它必须存在并在链运行时启用，否则会生成错误。</p>
                        <p>您可以使用<code class="codeph">DEFINE_CHAIN_EVENT_STEP</code>过程定义等待事件发生的步骤。过程参数可以指向事件计划，可以包括内联队列规范和事件条件，也可以包含文件观察程序名称。此示例创建第三个链步骤，等待命名事件计划中指定的事件：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DEFINE_CHAIN_EVENT_STEP（chain_name =&gt;'my_chain1'，step_name =&gt;'my_step3'，event_schedule_name =&gt;'my_event_schedule'）;结束; /</pre><p>在步骤开始之前，事件步骤不会等待其事件。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-95D32A07-B94A-48A9-8E3F-34BCF9C757A5__GUID-BAEFB1D9-6BFA-4D85-962A-999C26C7E417">运行本地外部可执行文件的步骤</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>定义运行本地外部可执行文件的步骤后，必须使用<code class="codeph">ALTER_CHAIN</code>过程为步骤分配凭据，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.ALTER_CHAIN（'chain1'，'step1'，'credential_name'，'MY_CREDENTIAL'）;结束; /</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-95D32A07-B94A-48A9-8E3F-34BCF9C757A5__GUID-3F19EFBC-81DC-485C-A6DD-13C9D603C274">在远程目标上运行的步骤</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在远程主机或远程数据库上的数据库程序单元上定义要运行外部可执行文件的步骤之后，必须使用<code class="codeph">ALTER_CHAIN</code>过程<code class="codeph">ALTER_CHAIN</code>步骤分配凭据和目标，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.ALTER_CHAIN（'chain1'，'step2'，'credential_name'，'DW_CREDENTIAL'）; DBMS_SCHEDULER.ALTER_CHAIN（ '链1'， '步骤2'， 'DESTINATION_NAME'， 'DBHOST1_ORCLDW'）;结束; /</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-95D32A07-B94A-48A9-8E3F-34BCF9C757A5__GUID-31139393-EDFA-4A03-89D0-81F79F7C89B6">使步骤可重新启动</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在数据库恢复之后，默认情况下，正在运行的步骤标记为<code class="codeph">STOPPED</code>并且链继续。您可以指定链步骤，通过使用数据库恢复后自动重新启动<code class="codeph">ALTER_CHAIN</code>设置<code class="codeph">restart_on_recovery</code>属性为<code class="codeph">TRUE</code>为这些步骤。
                        </p>
                        <p>有关<code class="codeph">DEFINE_CHAIN_STEP</code> ， <code class="codeph">DEFINE_CHAIN_EVENT_STEP</code>和<code class="codeph">ALTER_CHAIN</code>过程的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72273" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-95D32A07-B94A-48A9-8E3F-34BCF9C757A5__GUID-54BBB6A2-7791-4F29-AF27-4B823CBC8DAF">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-85ED81B5-6E71-4F2D-B9FB-A1630A2CF721" title="事件是一个应用程序或系统进程发送给另一个应用程序的消息，表示已检测到某些操作或事件。事件由一个应用程序或进程引发（发送），并由一个或多个应用程序或进程使用（接收）。">关于活动</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-B17B0307-45B6-4251-B554-923785745E78" title="文件观察程序是一个Scheduler对象，它定义文件的位置，名称和其他属性，这些文件到达系统会导致Scheduler启动作业。">关于文件监视器</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-2D70512F-BBAE-4087-B341-D2AF87A3C71C" title="凭据是存储在专用数据库对象中的用户名和密码对。">证书</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-3AC38D5C-D759-41A7-9F11-FEA9FC80B0F4" title="目标对象（目标）定义运行作业的位置。">目的地</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12683"></a><a id="ADMIN13107"></a><a id="ADMIN12684"></a><a id="ADMIN13492"></a><a id="ADMIN12685"></a><a id="ADMIN12686"></a><a id="ADMIN12687"></a><a id="ADMIN12459"></a><div class="props_rev_3"><a id="GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE" name="GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE"></a><h4 id="ADMIN-GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE" class="sect4"><span class="enumeration_section">29.6.5</span>向链中添加规则</h4>
                  <div>
                     <p>使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DEFINE_CHAIN_RULE</code>过程将规则添加到链中。您为要添加到链的每个规则调用此过程一次。
                     </p>
                     <div class="section">
                        <p>链规则定义步骤何时运行并定义步骤之间的依赖关系。每条规则都有条件和动作。每当评估规则时，如果规则的条件评估为<code class="codeph">TRUE</code> ，则执行其操作。该条件可以包含调度程序链条件语法或在SQL <code class="codeph">WHERE</code>子句中有效的任何语法。语法可以包括对任何链步骤的属性的引用，包括步骤完成状态。典型的操作是运行指定的步骤或运行步骤列表。
                        </p>
                        <p>所有链规则一起工作以定义链的整体行为。评估所有规则以查看下一步，链式作业何时开始以及每个步骤结束时发生的操作。如果多个规则具有<code class="codeph">TRUE</code>条件，则可能发生多个操作。您还可以通过设置链的<code class="codeph">evaluation_interval</code>属性，定期评估规则。
                        </p>
                        <p>条件通常基于一个或多个先前步骤的结果。例如，如果前两个步骤成功，您可能希望运行一个步骤，如果前两个步骤中的任何一个步骤失败，则可能需要运行另一个步骤。</p>
                        <p>调度程序链条件语法采用以下两种形式之一：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">stepname</span> [NOT] {SUCCEEDED | FAILED | STOPPED | COMPLETED} <span class="italic">stepname</span> ERROR_CODE { <span class="italic">comparision_operator</span> | [NOT] IN} { <span class="italic">integer</span> | <span class="italic">list_of_integers</span> }</pre><p>您可以将条件与布尔运算符<code class="codeph">AND</code> ， <code class="codeph">OR</code>和<code class="codeph">NOT()</code>以创建条件表达式。您可以在表达式中使用括号来确定评估顺序。
                        </p>
                        <p>可以使用分配给该步骤的程序中的<code class="codeph">RAISE_APPLICATION_ERROR</code> PL / SQL语句设置<code class="codeph">ERROR_CODE</code> 。虽然程序以这种方式设置的错误代码是负数，但在链规则中测试<code class="codeph">ERROR_CODE</code>时，您会测试正数。例如，如果您的程序包含以下语句：</p><pre class="oac_no_warn" dir="ltr">RAISE_APPLICATION_ERROR（-20100，errmsg）;</pre><p>您的链规则条件必须如下：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">stepname</span> ERROR_CODE = 20100</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE__GUID-2D8E9CF1-88FD-4F51-83FA-F210D9FE82F0">步骤属性</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下是使用SQL <code class="codeph">WHERE</code>子句语法时可包含在条件中的步骤属性列表：</p>
                        <ul class="simple" style="list-style-type:none;padding-left:0">
                           <li><code class="codeph">完成</code></li>
                           <li><code class="codeph">州</code></li>
                           <li><code class="codeph">开始日期</code></li>
                           <li><code class="codeph">结束日期</code></li>
                           <li><code class="codeph">错误代码</code></li>
                           <li><code class="codeph">持续时间</code></li>
                           <li></li>
                        </ul>
                        <p><code class="codeph">completed</code>属性为boolean，当<code class="codeph">state</code>属性为<code class="codeph">SUCCEEDED</code> ， <code class="codeph">FAILED</code>或<code class="codeph">STOPPED</code>时为<code class="codeph">TRUE</code> 。</p>
                        <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE__CHDIFFFC" title="该表包含两列：值和含义。它对于链步骤的状态属性的每个可能值都有一行。">表29-7</a>显示了<code class="codeph">state</code>属性的可能值。这些值在<code class="codeph">*_SCHEDULER_RUNNING_CHAINS</code>视图的<code class="codeph">STATE</code>列中可见。
                        </p>
                        <div class="tblformal" id="GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE__CHDIFFFC">
                           <p class="titleintable">表29-7链步骤的状态属性值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="链步骤的状态属性的值" width="100%" border="1" summary="This table contains two columns: Value and Meaning. It has one row for every possible value of the state attribute of chain steps." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="35%" id="d268851e9472">状态属性值</th>
                                    <th align="left" valign="bottom" width="65%" id="d268851e9475">含义</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d268851e9480" headers="d268851e9472 ">
                                       <p><code class="codeph">没有开始</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d268851e9480 d268851e9475 ">
                                       <p>步骤链正在运行，但该步骤尚未开始。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d268851e9488" headers="d268851e9472 ">
                                       <p><code class="codeph">排定</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d268851e9488 d268851e9475 ">
                                       <p>规则使用<code class="codeph">AFTER</code>子句启动了该步骤，并且指定的等待时间尚未到期。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d268851e9499" headers="d268851e9472 ">
                                       <p><code class="codeph">RUNNING</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d268851e9499 d268851e9475 ">
                                       <p>该步骤正在运行。对于事件步骤，该步骤已启动并正在等待事件。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d268851e9507" headers="d268851e9472 ">
                                       <p><code class="codeph">PAUSED</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d268851e9507 d268851e9475 ">
                                       <p>步骤的<code class="codeph">PAUSE</code>属性设置为<code class="codeph">TRUE</code>并且暂停该步骤。必须取消暂停才能启动依赖它的步骤。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d268851e9521" headers="d268851e9472 ">
                                       <p><code class="codeph">SUCCEEDED</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d268851e9521 d268851e9475 ">
                                       <p>该步骤成功完成。步骤的<code class="codeph">ERROR_CODE</code>为0。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d268851e9532" headers="d268851e9472 ">
                                       <p><code class="codeph">失败</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d268851e9532 d268851e9475 ">
                                       <p>该步骤失败完成。<code class="codeph">ERROR_CODE</code>非零。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d268851e9543" headers="d268851e9472 ">
                                       <p><code class="codeph">已停止</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d268851e9543 d268851e9475 ">
                                       <p>使用<code class="codeph">STOP_JOB</code>过程停止该步骤。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d268851e9554" headers="d268851e9472 ">
                                       <p><code class="codeph">STALLED</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d268851e9554 d268851e9475 ">
                                       <p>该步骤是一个已经停滞的嵌套链。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>有关SQL <code class="codeph">WHERE</code>子句语法的规则和示例，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72318" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中</span></a>的<code class="codeph">DEFINE_CHAIN_RULE</code>过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE__GUID-249285AA-3634-43FD-AF6B-2602BBB8300C">条件示例使用调度程序链条件语法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>这些示例使用Scheduler链条件语法。</p>
                        <p>当名为<code class="codeph">form_validation_step</code>的步骤完成（ <code class="codeph">SUCCEEDED</code> ， <code class="codeph">FAILED</code>或<code class="codeph">STOPPED</code> ）时，由包含以下条件的规则启动的步骤开始。
                        </p><pre class="oac_no_warn" dir="ltr">form_validation_step已完成</pre><p>以下条件类似，但表示该步骤必须成功才能满足条件。</p><pre class="oac_no_warn" dir="ltr">form_validation_step已成功</pre><p>下一个条件测试错误。如果步骤<code class="codeph">form_validation_step</code>失败并且除了20001之外的任何错误代码，则为<code class="codeph">TRUE</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">form_validation_step FAILED和form_validation_step ERROR_CODE！= 20001</pre><p>有关更多示例，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72318" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中</span></a>的<code class="codeph">DEFINE_CHAIN_RULE</code>过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE__GUID-77D993D5-6015-43A0-959F-F8275BA6D952">条件示例使用SQL WHERE语法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">'：step1.state =' 'SUCCEEDED' ''</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE__GUID-A7D13481-0C35-4338-93B3-5F05E6568BDA">开始连锁</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>至少有一个规则必须具有始终求值为<code class="codeph">TRUE</code>的条件，以便链可以在链式作业启动时启动。完成此操作的最简单方法是，如果使用调度链条件语法，则将条件设置为“ <code class="codeph">TRUE</code> ”;如果使用SQL语法，则将条件设置为“ <code class="codeph">1=1</code> ”。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE__GUID-62ACDDF3-1C02-408A-B256-716E0A312441">结束链</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>至少有一个链规则必须包含一个<code class="codeph">action</code> “的<code class="codeph">END</code> ”。在包含<code class="codeph">END</code>操作的规则之一评估为<code class="codeph">TRUE</code>之前，链式作业不会完成。具有不同<code class="codeph">END</code>动作的几个不同规则是常见的，一些具有错误代码，一些没有。
                        </p>
                        <p>如果链没有更多的运行步骤，并且它没有等待事件发生，并且没有包含<code class="codeph">END</code>操作的规则评估为<code class="codeph">TRUE</code> （或没有带<code class="codeph">END</code>操作的规则），则链作业进入<code class="codeph">CHAIN_STALLED</code>状态。有关详细信息，请参阅<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5FADA829-C7F0-4A2F-BDAB-EF494A5BE014" title="在步骤完成时，始终评估链规则以确定要运行的后续步骤。如果没有规则导致另一个步骤启动，则没有一个导致链结束，并且链的evaluate_interval为NULL，链进入停滞状态。">处理停滞链</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE__GUID-9CDB39D3-A42F-49A5-BDFD-8F957DCBD80F">定义规则的示例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>下面的示例定义开始于链中的一个规则<code class="codeph">step1</code>和启动一个规则<code class="codeph">step2</code>时<code class="codeph">step1</code>完成。 <code class="codeph">rule_name</code>和<code class="codeph">comments</code>是可选的，默认为<code class="codeph">NULL</code> 。如果您确实使用<code class="codeph">rule_name</code> ，则可以稍后通过另一次调用<code class="codeph">DEFINE_CHAIN_RULE</code>重新定义该规则。新定义将覆盖前一个定义。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DEFINE_CHAIN_RULE（chain_name =&gt;'my_chain1'，condition =&gt;'TRUE'，action =&gt;'START step1'，rule_name =&gt;'my_rule1'，comments =&gt;'start the chain'）; DBMS_SCHEDULER.DEFINE_CHAIN_RULE（chain_name =&gt;'my_chain1'，condition =&gt;'step1 completed'，action =&gt;'START step2'，rule_name =&gt;'my_rule2'）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5B924F0A-7E1A-4361-ADB4-F3F07CFC81EE__GUID-1F2F2581-B0C8-4A53-BD28-255A7EBD61F2">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">DEFINE_CHAIN_RULE</code>过程和调度程序链条件语法的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72318" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="administering-oracle-scheduler.html#GUID-8DCF609E-6427-443D-87C6-5B163DE5A410" title="示例说明了创建链。">创建链的例子</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12688"></a><div class="props_rev_3"><a id="GUID-05A95E35-645E-42D7-A198-9022CE88581D" name="GUID-05A95E35-645E-42D7-A198-9022CE88581D"></a><h4 id="ADMIN-GUID-05A95E35-645E-42D7-A198-9022CE88581D" class="sect4"><span class="enumeration_section">29.6.6</span>设置链规则的评估间隔</h4>
                  <div>
                     <p>调度程序在链式作业开始时和每个链式步骤结束时评估所有链规则。</p>
                     <div class="section">
                        <p>您还可以配置链以使Scheduler在重复的时间间隔（例如每小时一次）评估其规则。此功能对于基于一天中的时间或基于链外部的事件启动链式步骤非常有用。这里有些例子：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>连锁步骤是资源密集型的，因此必须在非高峰时段运行。您可以在完成另一个步骤以及一天中的下午6:00之后和午夜之前调整该步骤。然后，调度程序必须经常评估规则以确定此条件何时变为<code class="codeph">TRUE</code> 。</p>
                           </li>
                           <li>
                              <p>步骤必须等待数据从链外部的其他进程到达表中。您可以在完成另一个步骤和包含行的特定表上调整此步骤。然后，调度程序必须经常评估规则以确定此条件何时变为<code class="codeph">TRUE</code> 。该条件将使用SQL <code class="codeph">WHERE</code>子句语法，并且类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">'：step1.state =''SUCCEEDED''并从oe.sync_table&gt; 0中选择count（*）</pre></li>
                        </ul>
                        <p>要设置链的评估间隔，请在创建链时设置<code class="codeph">evaluation_interval</code>属性。此属性的数据类型为<code class="codeph">INTERVAL</code> <code class="codeph">DAY</code> <code class="codeph">TO</code> <code class="codeph">SECOND</code> 。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_CHAIN（chain_name =&gt;'my_chain1'，rule_set_name =&gt; NULL，evaluation_interval =&gt; INTERVAL'30'MINUTE，comments =&gt;'具有30分钟评估间隔的链'）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12460"></a><div class="props_rev_3"><a id="GUID-39A461D5-0B5A-4689-B554-610C6C676D24" name="GUID-39A461D5-0B5A-4689-B554-610C6C676D24"></a><h4 id="ADMIN-GUID-39A461D5-0B5A-4689-B554-610C6C676D24" class="sect4"><span class="enumeration_section">29.6.7</span>启用链</h4>
                  <div>
                     <p>您在<code class="codeph">DBMS_SCHEDULER</code>包中启用了具有<code class="codeph">ENABLE</code>过程的链。必须先启用链，然后才能由作业运行。启用已启用的链不会返回错误。
                     </p>
                     <div class="section">
                        <p>此示例启用链<code class="codeph">my_chain1</code> ：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.ENABLE（'my_chain1'）;结束; /</pre><p>有关<code class="codeph">ENABLE</code>过程的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72362" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                        <div class="infoboxnote" id="GUID-39A461D5-0B5A-4689-B554-610C6C676D24__GUID-371272D7-B126-4DDC-8216-CCB7142E5F0A">
                           <p class="notep1">注意：</p>
                           <p>如果删除以下某个项，则调度程序会自动禁用链：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>其中一个连锁步骤指向的程序</p>
                              </li>
                              <li>
                                 <p>链式步骤之一指向的嵌套链</p>
                              </li>
                              <li>
                                 <p>其中一个连锁事件步骤指向的事件计划</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12461"></a><div class="props_rev_3"><a id="GUID-7BE62C9F-6730-41E4-9008-D71A04E9D6B8" name="GUID-7BE62C9F-6730-41E4-9008-D71A04E9D6B8"></a><h4 id="ADMIN-GUID-7BE62C9F-6730-41E4-9008-D71A04E9D6B8" class="sect4"><span class="enumeration_section">29.6.8</span>为链创建作业</h4>
                  <div>
                     <p>要运行链，您必须使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">RUN_CHAIN</code>过程，或者创建并安排“ <code class="codeph">CHAIN</code> ”类型的作业（ <span class="bold">链式作业</span> ）。
                     </p>
                     <div class="section">
                        <p>作业操作必须引用先前创建的链名称，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB（job_name =&gt;'chain_job_1'，job_type =&gt;'CHAIN'，job_action =&gt;'my_chain1'，repeat_interval =&gt;'freq = daily; byhour = 13; byminute = 0; bysecond = 0'，enabled =&gt;真正）;结束; /</pre><p>对于正在运行的链式作业的每个步骤，Scheduler都会创建一个<span class="bold">步骤作业</span> ，其作业名称和所有者与链接作业相同。每个步骤作业还具有唯一标识它的作业子名称。您可以将作业子名称视为视图<code class="codeph">*_SCHEDULER_RUNNING_JOBS</code> ， <code class="codeph">*_SCHEDULER_JOB_LOG</code>和<code class="codeph">*_SCHEDULER_JOB_RUN_DETAILS</code> 。作业子名称通常与步骤名称相同，但以下情况除外：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于嵌套链，当前步骤名称可能已用作作业子名称。在这种情况下，Scheduler会将“ <span class="italic"><code class="codeph">_N</code></span> ”附加到步骤名称，其中<span class="italic"><code class="codeph">N</code></span>是一个整数，它会产生唯一的作业子名称。
                              </p>
                           </li>
                           <li>
                              <p>如果创建步骤作业时出现故障，则计划程序会在作业日志视图（ <code class="codeph">*_SCHEDULER_JOB_LOG</code>和<code class="codeph">*_SCHEDULER_JOB_RUN_DETAILS</code> ）中记录<code class="codeph">FAILED</code>条目，并将作业子名设置为“ <span class="italic"><code class="codeph">step_name_</code></span> <code class="codeph">0</code> ”。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7BE62C9F-6730-41E4-9008-D71A04E9D6B8__GUID-D4E1D37F-C1CD-4239-B5F9-EF1A70DB69FC">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">CREATE_JOB</code>过程的更多信息，请<code class="codeph">CREATE_JOB</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72304" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-496B3D54-BFBC-4FB9-B30F-9CBCEFF8C925" title="要立即运行链，请使用DBMS_SCHEDULER包中的RUN_JOB或RUN_CHAIN过程。">运行链</a> ”</span>以另一种方式运行链而不创建链式作业</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12462"></a><div class="props_rev_3"><a id="GUID-3F6342AE-D71D-434E-AAA5-24ACD53C2215" name="GUID-3F6342AE-D71D-434E-AAA5-24ACD53C2215"></a><h4 id="ADMIN-GUID-3F6342AE-D71D-434E-AAA5-24ACD53C2215" class="sect4"><span class="enumeration_section">29.6.9掉</span>链</h4>
                  <div>
                     <p>使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DROP_CHAIN</code>过程删除链，包括其步骤和规则。
                     </p>
                     <div class="section">
                        <p>以下示例删除名为<code class="codeph">my_chain1</code>的链：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DROP_CHAIN（chain_name =&gt;'my_chain1'，force =&gt; TRUE）;结束; /</pre><p>有关<code class="codeph">DROP_CHAIN</code>过程的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72338" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12463"></a><div class="props_rev_3"><a id="GUID-496B3D54-BFBC-4FB9-B30F-9CBCEFF8C925" name="GUID-496B3D54-BFBC-4FB9-B30F-9CBCEFF8C925"></a><h4 id="ADMIN-GUID-496B3D54-BFBC-4FB9-B30F-9CBCEFF8C925" class="sect4"><span class="enumeration_section">29.6.10</span>运行链</h4>
                  <div>
                     <p>要立即运行链，请使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">RUN_JOB</code>或<code class="codeph">RUN_CHAIN</code>过程。
                     </p>
                     <div class="section">
                        <p>如果您已经创建了一个链工作的链条，可以使用<code class="codeph">RUN_JOB</code>过程运行的工作（并因此运行链），但你必须设定<code class="codeph">use_current_session</code>的说法<code class="codeph">RUN_JOB</code>到<code class="codeph">FALSE</code> 。</p>
                        <p>您可以使用<code class="codeph">RUN_CHAIN</code>过程来运行链，而无需首先为链创建链作业。您还可以使用<code class="codeph">RUN_CHAIN</code>仅运行链的一部分。
                        </p>
                        <p><code class="codeph">RUN_CHAIN</code>创建一个临时作业来运行指定的链。如果提供作业名称，则使用该名称创建作业，否则将分配默认作业名称。
                        </p>
                        <p>如果提供<span class="italic">启动步骤</span>列表，则仅在链开始运行时启动这些步骤。（如果它们不在列表中，则通常已启动的步骤不会运行。）如果没有给出启动步骤列表，则链正常启动 - 也就是说，进行初始评估以查看开始运行的步骤。以下示例立即运行<code class="codeph">my_chain1</code> ：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.RUN_CHAIN（chain_name =&gt;'my_chain1'，job_name =&gt;'partial_chain_job'， <span class="bold">start_steps</span> =&gt;'my_step2，my_step4'）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-496B3D54-BFBC-4FB9-B30F-9CBCEFF8C925__GUID-74D546CD-35AD-4328-82B6-BBE2A821B615">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-B003BFFC-64FF-424B-A7F6-335A6EBA4D6A" title="您只能运行链的一部分。">跑步的一部分</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">RUN_CHAIN</code>过程的详细信息，请<code class="codeph">RUN_CHAIN</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72393" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12464"></a><div class="props_rev_3"><a id="GUID-EF63704A-C591-4F81-9638-64183FE683AF" name="GUID-EF63704A-C591-4F81-9638-64183FE683AF"></a><h4 id="ADMIN-GUID-EF63704A-C591-4F81-9638-64183FE683AF" class="sect4"><span class="enumeration_section">29.6.11</span>删除链规则</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DROP_CHAIN_RULE</code>过程从链中删除规则。
                     </p>
                     <div class="section">
                        <p>以下示例删除<code class="codeph">my_rule1</code> ：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DROP_CHAIN_RULE（chain_name =&gt;'my_chain1'，rule_name =&gt;'my_rule1'，force =&gt; TRUE）;结束; /</pre><p>有关<code class="codeph">DROP_CHAIN_RULE</code>过程的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72340" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12465"></a><div class="props_rev_3"><a id="GUID-A38AC821-BF4C-4BC6-BF56-0D663B345E43" name="GUID-A38AC821-BF4C-4BC6-BF56-0D663B345E43"></a><h4 id="ADMIN-GUID-A38AC821-BF4C-4BC6-BF56-0D663B345E43" class="sect4"><span class="enumeration_section">29.6.12</span>禁用链</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DISABLE</code>过程禁用链。
                     </p>
                     <div class="section">
                        <p>以下示例禁用<code class="codeph">my_chain1</code> ：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DISABLE（'my_chain1'）;结束; /</pre><p>有关<code class="codeph">DISABLE</code>过程的更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72330" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                        </p>
                        <div class="infoboxnote" id="GUID-A38AC821-BF4C-4BC6-BF56-0D663B345E43__GUID-6FF7ACF9-4192-4457-9E23-D00DE3B9B18D">
                           <p class="notep1">注意：</p>
                           <p>如果删除以下某个项，则调度程序会自动禁用链：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>其中一个连锁步骤指向的程序</p>
                              </li>
                              <li>
                                 <p>链式步骤之一指向的嵌套链</p>
                              </li>
                              <li>
                                 <p>其中一个连锁事件步骤指向的事件计划</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12466"></a><div class="props_rev_3"><a id="GUID-0E2D504C-00E4-427E-857C-004103D1E14D" name="GUID-0E2D504C-00E4-427E-857C-004103D1E14D"></a><h4 id="ADMIN-GUID-0E2D504C-00E4-427E-857C-004103D1E14D" class="sect4"><span class="enumeration_section">29.6.13放下</span>链条步骤</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DROP_CHAIN_STEP</code>过程从链中删除一个步骤。
                     </p>
                     <div class="section">
                        <p>以下示例删除<code class="codeph">my_step2</code>从<code class="codeph">my_chain2</code> ：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DROP_CHAIN_STEP（chain_name =&gt;'my_chain2'，step_name =&gt;'my_step2'，force =&gt; TRUE）;结束; /</pre><p>有关<code class="codeph">DROP_CHAIN_STEP</code>过程的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72342" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12689"></a><div class="props_rev_3"><a id="GUID-8337ADB6-A82E-49AE-9A27-85F70C14E6CA" name="GUID-8337ADB6-A82E-49AE-9A27-85F70C14E6CA"></a><h4 id="ADMIN-GUID-8337ADB6-A82E-49AE-9A27-85F70C14E6CA" class="sect4"><span class="enumeration_section">29.6.14</span>停止链条</h4>
                  <div>
                     <p>要停止正在运行的链，请调用<code class="codeph">DBMS_SCHEDULER.STOP_JOB</code>过程，传递链式作业的名称（启动链的作业）。
                     </p>
                     <div class="section">
                        <p>当您停止链式作业时，正在运行的链的所有步骤都将停止，链将结束。</p>
                        <p>有关<code class="codeph">STOP_JOB</code>过程的更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72435" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12690"></a><div class="props_rev_3"><a id="GUID-E0997FFF-B68F-4130-AD6C-E6DC8A09E4A2" name="GUID-E0997FFF-B68F-4130-AD6C-E6DC8A09E4A2"></a><h4 id="ADMIN-GUID-E0997FFF-B68F-4130-AD6C-E6DC8A09E4A2" class="sect4"><span class="enumeration_section">29.6.15</span>停止个别连锁步骤</h4>
                  <div>
                     <p>您可以通过创建在满足规则条件时停止一个或多个步骤的链规则或通过调用<code class="codeph">STOP_JOB</code>过程来停止单个链步骤。
                     </p>
                     <div class="section">
                        <p>对于要停止的每个步骤，必须指定模式名称，链接作业名称和步骤作业子名称。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.STOP_JOB（'oe.chainrunjob.stepa'）;结束; /</pre><p>在此示例中， <code class="codeph">chainrunjob</code>是链作业名称， <code class="codeph">stepa</code>是步骤作业子名称。步骤作业子名称通常与步骤名称相同，但并非总是如此。您可以从<code class="codeph">*_SCHEDULER_RUNNING_CHAINS</code>视图的<code class="codeph">STEP_JOB_SUBNAME</code>列中获取步骤作业子名称。
                        </p>
                        <p>当您停止链式步骤时，其<code class="codeph">state</code>将设置为<code class="codeph">STOPPED</code> ，并评估链规则以确定下一步运行的步骤。
                        </p>
                        <p>有关<code class="codeph">STOP_JOB</code>过程的更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72435" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13108"></a><a id="ADMIN12691"></a><div class="props_rev_3"><a id="GUID-05F33ED5-DF4C-433F-839E-25BBE59E195E" name="GUID-05F33ED5-DF4C-433F-839E-25BBE59E195E"></a><h4 id="ADMIN-GUID-05F33ED5-DF4C-433F-839E-25BBE59E195E" class="sect4"><span class="enumeration_section">29.6.16</span>暂停链</h4>
                  <div>
                     <p>您可以暂停整个链或链的各个分支。您可以通过<code class="codeph">DBMS_SCHEDULER.ALTER_CHAIN</code>或<code class="codeph">ALTER_RUNNING_CHAIN</code>过程将一个或多个步骤的<code class="codeph">PAUSE</code>属性设置为<code class="codeph">TRUE</code> <code class="codeph">ALTER_RUNNING_CHAIN</code>执行此操作。
                     </p>
                     <div class="section">
                        <p>暂停链步骤使您可以在这些步骤运行后暂停链的运行。</p>
                        <p>暂停步骤后，在步骤运行后，其<code class="codeph">state</code>属性将更改为<code class="codeph">PAUSED</code> ，并且其<code class="codeph">completed</code>属性仍为<code class="codeph">FALSE</code> 。因此，不会运行依赖于暂停步骤完成的步骤。如果在暂停步骤中将<code class="codeph">PAUSE</code>属性重置为<code class="codeph">FALSE</code> ，则其<code class="codeph">state</code>属性将设置为其完成状态（ <code class="codeph">SUCCEEDED</code> ， <code class="codeph">FAILED</code>或<code class="codeph">STOPPED</code> ），然后可以运行等待暂停步骤完成的步骤。
                        </p>
                        <div class="figure" id="GUID-05F33ED5-DF4C-433F-839E-25BBE59E195E__CHDCHJAJ">
                           <p class="titleinfigure">图29-1暂停步骤3的链</p><img src="img/admin081.gif" width="447" alt="下面是图29-1的描述" title="下面是图29-1的描述" longdesc="img_text/admin081.html"><br><a href="img_text/admin081.html">“图29-1暂停步骤3的链”的描述</a></div>
                        <!-- class="figure" -->
                        <p>在<a href="scheduling-jobs-with-oracle-scheduler.html#GUID-05F33ED5-DF4C-433F-839E-25BBE59E195E__CHDCHJAJ">图29-1中</a> ，暂停了步骤3。在步骤3取消暂停之前，步骤5将不会运行。如果您只是暂停步骤2，则步骤4,6和7将不会运行。但是，步骤1,3和5可以运行。在任何一种情况下，您只挂起链的一个分支。
                        </p>
                        <p>要暂停整个链，请暂停链的所有步骤。要取消链接，请取消暂停一个，多个或所有链式步骤。使用<a href="scheduling-jobs-with-oracle-scheduler.html#GUID-05F33ED5-DF4C-433F-839E-25BBE59E195E__CHDCHJAJ">图29-1中</a>的链，暂停步骤1在步骤1运行后暂停整个链。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-05F33ED5-DF4C-433F-839E-25BBE59E195E__GUID-7409541C-5DB8-4354-B6EF-B24507EF71BF">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72282" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中</span></a>的<code class="codeph">DBMS_SCHEDULER.ALTER_CHAIN</code>和<code class="codeph">DBMS_SCHEDULER.ALTER_RUNNING_CHAIN</code>过程 
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12692"></a><div class="props_rev_3"><a id="GUID-FF1D11DD-0629-4B51-A1F6-E67AC11FEF0B" name="GUID-FF1D11DD-0629-4B51-A1F6-E67AC11FEF0B"></a><h4 id="ADMIN-GUID-FF1D11DD-0629-4B51-A1F6-E67AC11FEF0B" class="sect4"><span class="enumeration_section">29.6.17</span>跳过链步骤</h4>
                  <div>
                     <p>您可以跳过链中的一个或多个步骤。您可以通过使用<code class="codeph">DBMS_SCHEDULER.ALTER_CHAIN</code>或<code class="codeph">ALTER_RUNNING_CHAIN</code>过程将一个或多个步骤的<code class="codeph">SKIP</code>属性设置为<code class="codeph">TRUE</code> <code class="codeph">ALTER_RUNNING_CHAIN</code>执行此操作。
                     </p>
                     <div class="section">
                        <p>如果步骤的<code class="codeph">SKIP</code>属性为<code class="codeph">TRUE</code> ，那么当满足运行该步骤的链条件而不是运行时，该步骤将被视为立即成功。将<code class="codeph">SKIP</code>设置为<code class="codeph">TRUE</code>对正在运行，计划在延迟之后运行或已经运行的步骤没有影响。
                        </p>
                        <p>在测试链时，跳过步骤特别有用。例如，在测试<a href="scheduling-jobs-with-oracle-scheduler.html#GUID-05F33ED5-DF4C-433F-839E-25BBE59E195E__CHDCHJAJ">图29-1</a>中<a href="scheduling-jobs-with-oracle-scheduler.html#GUID-05F33ED5-DF4C-433F-839E-25BBE59E195E__CHDCHJAJ">所示</a>的链时，跳过步骤7可能会大大缩短测试时间，因为此步骤是嵌套链。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-FF1D11DD-0629-4B51-A1F6-E67AC11FEF0B__GUID-492069CD-3622-4F49-AC8E-A7E3997D60EE">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-FF1D11DD-0629-4B51-A1F6-E67AC11FEF0B" title="您可以跳过链中的一个或多个步骤。您可以通过使用DBMS_SCHEDULER.ALTER_CHAIN或ALTER_RUNNING_CHAIN过程将一个或多个步骤的SKIP属性设置为TRUE来执行此操作。">跳过连锁步骤</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12693"></a><div class="props_rev_3"><a id="GUID-B003BFFC-64FF-424B-A7F6-335A6EBA4D6A" name="GUID-B003BFFC-64FF-424B-A7F6-335A6EBA4D6A"></a><h4 id="ADMIN-GUID-B003BFFC-64FF-424B-A7F6-335A6EBA4D6A" class="sect4"><span class="enumeration_section">29.6.18</span>运行链的一部分</h4>
                  <div>
                     <p>您只能运行链的一部分。</p>
                     <div class="section">
                        <p>有两种方法只能运行链的一部分：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">ALTER_CHAIN</code>程序来设置<code class="codeph">PAUSE</code>属性为<code class="codeph">TRUE</code>的一个或多个步骤，然后要么开始用链工作<code class="codeph">RUN_JOB</code>或先从链<code class="codeph">RUN_CHAIN</code> 。依赖于暂停步骤的任何步骤都不会运行，但会暂停执行暂停的步骤。
                              </p>
                              <p>此方法的缺点是，对于将来运行链的受影响步骤，必须将<code class="codeph">PAUSE</code>属性设置回<code class="codeph">FALSE</code> 。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">RUN_CHAIN</code>过程仅启动链的某些步骤，跳过您不想运行的步骤。
                              </p>
                              <p>这是一种更直接的方法，它还允许您在启动步骤之前设置步骤的初始状态。</p>
                           </li>
                        </ul>
                        <p>您可能必须使用这两种方法来跳过链的开头和结尾的步骤。</p>
                        <p>有关详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72393" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a>中有关<code class="codeph">RUN_CHAIN</code>过程的讨论。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12694"></a><div class="props_rev_3"><a id="GUID-FB3935A5-E5B6-4053-B808-8916F131C43C" name="GUID-FB3935A5-E5B6-4053-B808-8916F131C43C"></a><h4 id="ADMIN-GUID-FB3935A5-E5B6-4053-B808-8916F131C43C" class="sect4"><span class="enumeration_section">29.6.19</span>监测运行链</h4>
                  <div>
                     <p>您可以使用以下两个视图查看正在运行的链的状态： <code class="codeph">*_SCHEDULER_RUNNING_JOBS</code>和<code class="codeph">*_SCHEDULER_RUNNING_CHAINS</code> 。</p>
                     <div class="section">
                        <p><code class="codeph">*_SCHEDULER_RUNNING_JOBS</code>视图包含链作业的一行和每个运行步骤的一行。<code class="codeph">*_SCHEDULER_RUNNING_CHAINS</code>视图包含每个链步骤的一行，包括任何嵌套链，并包括每个步骤的运行状态，例如<code class="codeph">NOT_STARTED</code> ， <code class="codeph">RUNNING</code> ， <code class="codeph">STOPPED</code> ， <code class="codeph">SUCCEEDED</code>等。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-FB3935A5-E5B6-4053-B808-8916F131C43C__GUID-657858E8-97EE-44EE-B497-E662A56B4CCF">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">*_SCHEDULER_RUNNING_JOBS</code>视图的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=REFRN20387" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">*_SCHEDULER_RUNNING_CHAINS</code>视图的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=REFRN20510" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12468"></a><div class="props_rev_3"><a id="GUID-5FADA829-C7F0-4A2F-BDAB-EF494A5BE014" name="GUID-5FADA829-C7F0-4A2F-BDAB-EF494A5BE014"></a><h4 id="ADMIN-GUID-5FADA829-C7F0-4A2F-BDAB-EF494A5BE014" class="sect4"><span class="enumeration_section">29.6.20</span>处理<span class="enumeration_section">停滞的</span>链条</h4>
                  <div>
                     <p>在步骤完成时，始终评估链规则以确定要运行的后续步骤。如果没有规则导致另一步骤开始，没有导致链条端，并且<code class="codeph">evaluation_interval</code>用于链是<code class="codeph">NULL</code> ，链进入<span class="bold">失速</span>状态。
                     </p>
                     <div class="section">
                        <p>当链断开时，没有步骤正在运行，没有计划运行步骤（在等待指定的时间间隔之后），并且没有事件步骤在等待事件。除非您手动干预，否则链条不会取得进一步进展。在这种情况下，运行链的作业的状态设置为<code class="codeph">CHAIN_STALLED</code> 。但是，作业仍列在<code class="codeph">*_SCHEDULER_RUNNING_JOBS</code>视图中。
                        </p>
                        <p>您可以使用视图<code class="codeph">ALL_SCHEDULER_RUNNING_CHAINS</code> （显示链中所有步骤的状态（包括任何嵌套链））以及包含所有链规则的<code class="codeph">ALL_SCHEDULER_CHAIN_RULES</code>对已停滞的链进行故障排除。
                        </p>
                        <p>您可以通过使用<code class="codeph">ALTER_RUNNING_CHAIN</code>过程更改其中一个步骤的<code class="codeph">state</code>来启用链继续。例如，如果步骤11中等待第9步成功之后，才能开始，而如果它是有道理的话，你可以在设置<code class="codeph">state</code>第9步为“ <code class="codeph">SUCCEEDED</code> ”。
                        </p>
                        <p>或者，如果一个或多个规则不正确，您可以使用<code class="codeph">DEFINE_CHAIN_RULE</code>过程替换它们（使用相同的规则名称），或创建新规则。新的和更新的规则适用于运行链和所有未来的链运行。添加或更新规则后，必须在停滞的链式作业上运行<code class="codeph">EVALUATE_RUNNING_CHAIN</code>以触发任何所需的操作。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF3AB6EB-BC19-4303-9E02-6466804BA119" title="工作链是一组命名的任务，它们链接在一起以实现组合目标。">创建和管理作业链</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-7157CBEA-94FF-45FA-89B8-32FA1D08B6BF" name="GUID-7157CBEA-94FF-45FA-89B8-32FA1D08B6BF"></a><h3 id="ADMIN-GUID-7157CBEA-94FF-45FA-89B8-32FA1D08B6BF" class="sect3"><span class="enumeration_section">29.7</span>使用不兼容定义</h3>
               <div>
                  <p>不兼容性定义（或不兼容性）指定不兼容的作业或程序，其中一次只能运行一个组。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7929FFD2-F406-4B48-9897-99B0A04BC78C">创建作业或程序不兼容</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">CREATE_INCOMPATIBILITY</code>过程指定作业级别或程序级别的不兼容性。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-352B336B-5390-4DDB-9EA4-89870604D161">将作业或程序添加到不兼容性</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">ADD_TO_INCOMPATIBILITY</code>过程将作业或程序添加到现有的不兼容定义中。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-8818D558-32F6-4FB7-A0E8-6E93BD7C33E1">从不兼容性中删除作业或程序</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包中的<code class="codeph">REMOVE_FROM_INCOMPATIBILITY</code>过程从现有的不兼容定义中删除作业或程序。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-64672E89-636D-4B27-BA62-48ABD6436844">降低不兼容性</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DROP_INCOMPATIBILITY</code>过程删除现有的不兼容定义。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-7157CBEA-94FF-45FA-89B8-32FA1D08B6BF__GUID-1C186487-A28E-402C-8CA1-EB84D681060E">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="oracle-scheduler-concepts.html#GUID-F7F2B1E9-6478-4561-918D-3827B2A234A4" title="不兼容性定义（或不兼容性）指定不兼容的作业或程序，其中一次只能运行一个组。">不兼容性</a></p>
                        </li>
                        <li>
                           <p><span><cite>Oracle Database PL / SQL包和类型参考中的</cite></span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS-GUID-A24DEB5D-2EAF-4C0B-8715-30DC947B3F87" target="_blank">DBMS_SCHEDULER</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" title="您可以使用Oracle Scheduler创建，运行和管理作业。">使用Oracle Scheduler调度作业</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-7929FFD2-F406-4B48-9897-99B0A04BC78C" name="GUID-7929FFD2-F406-4B48-9897-99B0A04BC78C"></a><h4 id="ADMIN-GUID-7929FFD2-F406-4B48-9897-99B0A04BC78C" class="sect4"><span class="enumeration_section">29.7.1</span>创建作业或程序不兼容</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">CREATE_INCOMPATIBILITY</code>过程指定作业级别或程序级别的不兼容性。
                     </p>
                     <div class="section">
                        <p>例如，以下语句创建名为<code class="codeph">incompat1</code>指定只有一个名为<code class="codeph">job1</code> ， <code class="codeph">job2</code>或<code class="codeph">job3</code>可以同时运行：</p><pre class="oac_no_warn" dir="ltr">BEGIN dbms_scheduler.create_incompatibility（incompatibility_name =&gt;'icompat1'，object_name =&gt;'job1，job2，job3'，enabled =&gt; true）;结束; /</pre><p><code class="codeph">object_name</code>包含逗号分隔的列表，其中包含所有程序或彼此不兼容的所有作业（即，它们不能同时运行）。如果是作业，则列表必须包含两个或多个作业，而<code class="codeph">constraint_level</code>必须为<code class="codeph">'JOB_LEVEL'</code> （默认值，不包含在示例中）。在程序的情况下， <code class="codeph">constraint_level</code>可以是<code class="codeph">'JOB_LEVEL'</code>或<code class="codeph">'PROGRAM_LEVEL'</code> 。设置为默认值<code class="codeph">'JOB_LEVEL'</code> ，只有基于<code class="codeph">object_name</code>提到的程序（或多个程序）的单个作业可以同时运行。设置为<code class="codeph">'PROGRAM_LEVEL'</code> 。程序不兼容，但基于相同程序的作业不兼容。
                        </p>
                        <p>例如，如果<code class="codeph">object_name</code>值为<code class="codeph">'P1,P2,P3'</code>且<code class="codeph">constraint_level</code>为<code class="codeph">'PROGRAM_LEVEL'</code> ，则基于P1的许多工作可以同时运行，但如果任何基于P1的作业正在运行，则无基于P2或P3可以跑。或者类似地，许多基于P3的作业可以同时运行，但没有基于P1或P2的作业。如果<code class="codeph">constraint_level</code>设置为<code class="codeph">'JOB_LEVEL'</code> ，那么基于程序P1，P2和P3的所有作业中只有一个作业可以在任何给定时间运行。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7929FFD2-F406-4B48-9897-99B0A04BC78C__GUID-E6620241-4ADB-4575-BE2F-6AB6EEE02C64">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS-GUID-FF06ABB1-23A1-4736-8B21-53F0DE610D80" target="_blank">创建</a> <span><cite>Oracle数据库PL / SQL包和类型参考中的</cite></span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS-GUID-FF06ABB1-23A1-4736-8B21-53F0DE610D80" target="_blank">不兼容性过程</a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7157CBEA-94FF-45FA-89B8-32FA1D08B6BF" title="不兼容性定义（或不兼容性）指定不兼容的作业或程序，其中一次只能运行一个组。">使用不兼容定义</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-352B336B-5390-4DDB-9EA4-89870604D161" name="GUID-352B336B-5390-4DDB-9EA4-89870604D161"></a><h4 id="ADMIN-GUID-352B336B-5390-4DDB-9EA4-89870604D161" class="sect4"><span class="enumeration_section">29.7.2</span>将作业或程序添加到不兼容性中</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">ADD_TO_INCOMPATIBILITY</code>过程将作业或程序添加到现有的不兼容定义中。
                     </p>
                     <div class="section">
                        <p>例如，以下语句将作业<code class="codeph">job1</code>添加到名为<code class="codeph">icomp1234</code>的不兼容性中：</p><pre class="oac_no_warn" dir="ltr">BEGIN dbms_scheduler.add_to_incompatibility（incompatibility_name =&gt;'icomp1234'，object_name =&gt;'job1'）;结束; /</pre><p><code class="codeph">incompatibility_name</code>是现有不兼容定义的名称。
                        </p>
                        <p><code class="codeph">object_name</code>包含以逗号分隔的作业或程序列表。
                        </p>
                        <p>如果要添加的指定作业或程序已包含在指定的不兼容定义中，则此过程不会引发错误。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-352B336B-5390-4DDB-9EA4-89870604D161__CREATEINCOMPATIBILITYPROCEDUREINORA-1AD91516">
                        <p class="notep1">也可以看看：</p>
                        <p><span><cite>Oracle数据库PL / SQL包和类型参考中的</cite></span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS-GUID-12020855-80F6-4EE2-B0EC-E23192D98F7F" target="_blank">ADD_TO_INCOMPATIBILITY过程</a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7157CBEA-94FF-45FA-89B8-32FA1D08B6BF" title="不兼容性定义（或不兼容性）指定不兼容的作业或程序，其中一次只能运行一个组。">使用不兼容定义</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-8818D558-32F6-4FB7-A0E8-6E93BD7C33E1" name="GUID-8818D558-32F6-4FB7-A0E8-6E93BD7C33E1"></a><h4 id="ADMIN-GUID-8818D558-32F6-4FB7-A0E8-6E93BD7C33E1" class="sect4"><span class="enumeration_section">29.7.3从不兼容性中</span>删除作业或程序</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包中的<code class="codeph">REMOVE_FROM_INCOMPATIBILITY</code>过程从现有的不兼容定义中删除作业或程序。
                     </p>
                     <div class="section">
                        <p>例如，下面的语句删除作业<code class="codeph">job1</code>从命名的不兼容性<code class="codeph">icomp1234</code> ：</p><pre class="oac_no_warn" dir="ltr">BEGIN dbms_scheduler.remove_from_incompatibility（incompatibility_name =&gt;'icomp1234'，object_name =&gt;'job1'）;结束; /</pre><p><code class="codeph">incompatibility_name</code>是现有不兼容定义的名称。
                        </p>
                        <p><code class="codeph">object_name</code>包含以逗号分隔的作业或程序列表。
                        </p>
                        <p>如果指定的不兼容定义中不存在要删除的指定作业或程序，则此过程不会引发错误。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8818D558-32F6-4FB7-A0E8-6E93BD7C33E1__REMOVE_FROM_INCOMPATIBILITYPROCEDUR-1AD95E25">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS-GUID-5667338C-0767-4793-BCF1-230A7950C01C" target="_blank">REMOVE_FROM_INCOMPATIBILITY</a> <span><cite>Oracle数据库PL / SQL包和类型参考中的过程</cite></span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7157CBEA-94FF-45FA-89B8-32FA1D08B6BF" title="不兼容性定义（或不兼容性）指定不兼容的作业或程序，其中一次只能运行一个组。">使用不兼容定义</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-64672E89-636D-4B27-BA62-48ABD6436844" name="GUID-64672E89-636D-4B27-BA62-48ABD6436844"></a><h4 id="ADMIN-GUID-64672E89-636D-4B27-BA62-48ABD6436844" class="sect4"><span class="enumeration_section">29.7.4</span>删除不兼容性</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DROP_INCOMPATIBILITY</code>过程删除现有的不兼容定义。
                     </p>
                     <div class="section">
                        <p>例如，以下语句删除名为<code class="codeph">icomp1234</code>的不兼容性：</p><pre class="oac_no_warn" dir="ltr">BEGIN dbms_scheduler.drop_incompatibility（incompatibility_name =&gt;'icomp1234'; END; /</pre><p><code class="codeph">incompatibility_name</code>是现有不兼容定义的名称。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-64672E89-636D-4B27-BA62-48ABD6436844__REMOVE_FROM_INCOMPATIBILITYPROCEDUR-1AD98EBE">
                        <p class="notep1">也可以看看：</p>
                        <p><span><cite>Oracle Database PL / SQL包和类型参考中的</cite></span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS-GUID-2F33B401-C5E1-4602-A3FE-94F43398BF2C" target="_blank">DROP_INCOMPATIBILITY过程</a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7157CBEA-94FF-45FA-89B8-32FA1D08B6BF" title="不兼容性定义（或不兼容性）指定不兼容的作业或程序，其中一次只能运行一个组。">使用不兼容定义</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-7C9BBC40-0DE7-466E-A4EC-AFB1431136B3" name="GUID-7C9BBC40-0DE7-466E-A4EC-AFB1431136B3"></a><h3 id="ADMIN-GUID-7C9BBC40-0DE7-466E-A4EC-AFB1431136B3" class="sect3"><span class="enumeration_section">29.8</span>管理工作资源</h3>
               <div>
                  <p>您可以创建和更改可供作业使用的资源，并控制作业可用的指定资源的数量。</p>
                  <p>客户的工作需要访问资源。有限数量的此类资源可用，因此调度系统需要跟踪哪些作业使用哪些资源，而不是在他们需要的资源可用之前调度作业。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-17527F00-41DE-4BE9-8B59-55F27C0E472E">创建或删除资源</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">CREATE_RESOURCE</code>过程创建资源。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-39DC091F-87B0-4167-B8F0-E59F77587446">改变资源</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">SET_ATTRIBUTE</code>和<code class="codeph">SET_ATTRIBUTE_NULL</code>过程来更改资源。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-65A89474-5377-4FB3-8ADF-E7E15E2B3FD4">为作业设置资源约束</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">SET_RESOURCE_CONSTRAINT</code>过程指定作业或程序使用的<code class="codeph">SET_RESOURCE_CONSTRAINT</code> 。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-7C9BBC40-0DE7-466E-A4EC-AFB1431136B3__GUID-1C186487-A28E-402C-8CA1-EB84D681060E">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span><cite>Oracle Database PL / SQL包和类型参考中的</cite></span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS-GUID-A24DEB5D-2EAF-4C0B-8715-30DC947B3F87" target="_blank">DBMS_SCHEDULER</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" title="您可以使用Oracle Scheduler创建，运行和管理作业。">使用Oracle Scheduler调度作业</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-17527F00-41DE-4BE9-8B59-55F27C0E472E" name="GUID-17527F00-41DE-4BE9-8B59-55F27C0E472E"></a><h4 id="ADMIN-GUID-17527F00-41DE-4BE9-8B59-55F27C0E472E" class="sect4"><span class="enumeration_section">29.8.1</span>创建或删除资源</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">CREATE_RESOURCE</code>过程创建资源。
                     </p>
                     <div class="section">
                        <p>在创建资源的用户的模式中创建资源。</p>
                        <p>例如，以下语句创建名为<code class="codeph">my_resource</code>的资源，指定<code class="codeph">my_resource</code>三个资源单元可用，并且Scheduler管理约束，以便作业可以同时使用不超过3个单元。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_RESOURCE（resource_name =&gt;'my_resource'，units =&gt; 3，state =&gt;'ENFORCE_CONSTRAINTS'，comments =&gt;'Resource1'）END; /</pre><p>如果您不再需要资源，可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DROP_RESOURCE</code>过程将其<code class="codeph">DROP_RESOURCE</code> 。例如：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DROP_RESOURCE（resource_name =&gt;'my_resource'，force =&gt; true）END; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-17527F00-41DE-4BE9-8B59-55F27C0E472E__GUID-E6620241-4ADB-4575-BE2F-6AB6EEE02C64">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS-GUID-3CC944B1-A072-4970-8B27-F68AB7E2D6D9" target="_blank">“</a> <span><cite>Oracle数据库PL / SQL包和类型参考”中的</cite></span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS-GUID-3CC944B1-A072-4970-8B27-F68AB7E2D6D9" target="_blank">CREATE_RESOURCE过程</a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7C9BBC40-0DE7-466E-A4EC-AFB1431136B3" title="您可以创建和更改可供作业使用的资源，并控制作业可用的指定资源的数量。">管理作业资源</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-39DC091F-87B0-4167-B8F0-E59F77587446" name="GUID-39DC091F-87B0-4167-B8F0-E59F77587446"></a><h4 id="ADMIN-GUID-39DC091F-87B0-4167-B8F0-E59F77587446" class="sect4"><span class="enumeration_section">29.8.2</span>更改资源</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">SET_ATTRIBUTE</code>和<code class="codeph">SET_ATTRIBUTE_NULL</code>过程来更改资源。
                     </p>
                     <div class="section">
                        <p>如果更改了资源，则更改不会影响当前正在运行的使用此资源的作业。此更改将对使用该资源的后续作业生效。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-39DC091F-87B0-4167-B8F0-E59F77587446__GUID-E6620241-4ADB-4575-BE2F-6AB6EEE02C64">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS-GUID-D7A11F8A-8746-4815-91C4-BC8DDBA4C74A" target="_blank">“</a> <span><cite>Oracle数据库PL / SQL包和类型参考”中的</cite></span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS-GUID-D7A11F8A-8746-4815-91C4-BC8DDBA4C74A" target="_blank">SET_ATTRIBUTE过程</a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS-GUID-04615C69-F801-493A-B394-2C950CB90719" target="_blank">SET_ATTRIBUTE_NULL过程</a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7C9BBC40-0DE7-466E-A4EC-AFB1431136B3" title="您可以创建和更改可供作业使用的资源，并控制作业可用的指定资源的数量。">管理作业资源</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-65A89474-5377-4FB3-8ADF-E7E15E2B3FD4" name="GUID-65A89474-5377-4FB3-8ADF-E7E15E2B3FD4"></a><h4 id="ADMIN-GUID-65A89474-5377-4FB3-8ADF-E7E15E2B3FD4" class="sect4"><span class="enumeration_section">29.8.3</span>设置作业的资源约束</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">SET_RESOURCE_CONSTRAINT</code>过程指定作业或程序使用的<code class="codeph">SET_RESOURCE_CONSTRAINT</code> 。
                     </p>
                     <div class="section">
                        <p>您可以指定指定作业或程序可以使用的资源的单位数。</p>
                        <p>例如，以下语句指定名为<code class="codeph">job1</code>的对象可以使用名为<code class="codeph">resource1</code>的资源的一个单元。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN DBME_SCHEDULER.SET_RESOURCE_CONSTRAINT（OBJECT_NAME =&gt;'job1'，RESOURCE_NAME =&gt;'resource1'，UNITS =&gt; 1）;结束; /</pre><p><code class="codeph">object_name</code>参数可以是程序或作业的名称，也可以是逗号分隔的名称列表。
                        </p>
                        <p><code class="codeph">units</code>参数指定此程序或作业可以使用的资源<code class="codeph">units</code>数。如果<code class="codeph">units</code>设置为0，则表示程序或作业不再使用此资源，并删除约束。如果在没有先前约束的资源上将<code class="codeph">units</code>设置为0，则会生成错误。
                        </p>
                        <p>如果在同一资源上定义了多个约束，则对象类型（作业或程序）必须匹配。例如，如果资源的一个或多个约束基于作业，并且如果为同一资源添加了程序的新约束，则会生成错误。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-65A89474-5377-4FB3-8ADF-E7E15E2B3FD4__GUID-E6620241-4ADB-4575-BE2F-6AB6EEE02C64">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS-GUID-2D8930DD-1042-4FA9-A0C0-2E4C7A7BFE9B" target="_blank">SET_RESOURCE_CONSTRAINT</a> <span><cite>Oracle数据库PL / SQL包和类型参考中的过程</cite></span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7C9BBC40-0DE7-466E-A4EC-AFB1431136B3" title="您可以创建和更改可供作业使用的资源，并控制作业可用的指定资源的数量。">管理作业资源</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN13296"></a><div class="props_rev_3"><a id="GUID-15F06ABD-CCC5-453E-AB86-F807A9680163" name="GUID-15F06ABD-CCC5-453E-AB86-F807A9680163"></a><h3 id="ADMIN-GUID-15F06ABD-CCC5-453E-AB86-F807A9680163" class="sect3"><span class="enumeration_section">29.9</span>优先考虑工作</h3>
               <div>
                  <p>使用三个Scheduler对象优先处理Oracle Scheduler作业：作业类，窗口和窗口组。这些对象通过将作业与数据库资源管理器使用者组关联来确定作业的优先级。反过来，这又控制了分配给这些作业的资源量。此外，如果组中的所有作业都分配了相同的资源级别，则作业类使您可以在一组作业中设置相对优先级。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D0A95548-643D-4422-9411-908EAFF3F78D">使用作业类管理作业优先级</a><br>作业类提供了一种分组作业以确定优先级的方法。它们还提供了一种方法，可以轻松地将一组属性值分配给成员作业。作业类通过与数据库资源管理器相关的作业类属性影响其成员作业的优先级。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D0225ACD-DFC9-455A-82CF-344E7398DA82">在作业类中设置相对作业优先级</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">SET_ATTRIBUTE</code>过程更改同一作业类中作业的相对优先级。作业优先级必须在1-5的范围内，其中1是最高优先级。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-994CFF24-2588-4A09-88C0-F5CBC9CA50F9">使用Windows管理作业调度和作业优先级</a><br>您可以创建窗口以在一天，一周等各个时间段内自动启动作业或更改作业之间的资源分配。窗口由时间间隔表示。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-44C97065-09C4-48F5-8388-FB06FA53229F">使用窗口组管理作业调度和作业优先级</a><br>窗口组提供了一种简单的方法来安排必须在一天，一周等多个时间段内运行的作业。如果创建窗口组，向其添加窗口，然后在作业的<code class="codeph">schedule_name</code>属性中将此窗口组命名，则作业将在窗口组中的所有窗口中运行。窗口组驻留在<code class="codeph">SYS</code>架构中。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-F7EF9F5D-3AFE-4BEC-8D86-378AC06A6338">使用资源管理器在作业中分配资源</a><br>数据库资源管理器（资源管理器）控制如何在数据库会话之间分配资源。它不仅控制调度程序作业等异步会话，还控制用户会话等同步会话。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-B4929C59-30DE-4E89-A319-145B05EAD676">作业资源分配示例</a><br>一个示例说明了如何为作业分配资源。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-15F06ABD-CCC5-453E-AB86-F807A9680163__GUID-AC80B05E-1CC9-4BC2-B394-391FBDD9F2D4">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="managing-resources-with-oracle-database-resource-manager.html#GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" title="Oracle数据库资源管理器（资源管理器）使您可以管理数据库的资源分配。">使用Oracle数据库资源管理器管理资源</a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" title="您可以使用Oracle Scheduler创建，运行和管理作业。">使用Oracle Scheduler调度作业</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN12421"></a><div class="props_rev_3"><a id="GUID-D0A95548-643D-4422-9411-908EAFF3F78D" name="GUID-D0A95548-643D-4422-9411-908EAFF3F78D"></a><h4 id="ADMIN-GUID-D0A95548-643D-4422-9411-908EAFF3F78D" class="sect4"><span class="enumeration_section">29.9.1</span>使用作业类管理作业优先级</h4>
                  <div>
                     <p>作业类提供了一种分组作业以确定优先级的方法。它们还提供了一种方法，可以轻松地将一组属性值分配给成员作业。作业类通过与数据库资源管理器相关的作业类属性影响其成员作业的优先级。</p>
                     <p>使用数据库创建默认作业类。如果在未指定作业类的情况下创建作业，则会将作业分配给此默认作业类（ <code class="codeph">DEFAULT_JOB_CLASS)</code> 。默认作业类具有授予<code class="codeph">PUBLIC</code>的<code class="codeph">EXECUTE</code>特权，因此任何有权创建作业的数据库用户都可以在默认作业类中创建作业。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-2597BEEE-AD48-4466-A326-8FC7E04896E6">工作类任务及其程序</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见的作业类任务。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-8E370FA8-5CEE-4354-9EB0-71224C6E4938">创建工作类</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包或Cloud Control中的<code class="codeph">CREATE_JOB_CLASS</code>过程创建作业类。始终在<code class="codeph">SYS</code>模式中创建作业类。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-59DD953C-FB10-4172-9C0F-E80DDD32527E">改变工作类</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包或Cloud Control中的<code class="codeph">SET_ATTRIBUTE</code>过程来更改作业类。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E3062172-A63D-4935-A83A-BFE0475CA786">删除工作类</a><br>使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">DROP_JOB_CLASS</code>过程删除一个或多个作业类。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-D0A95548-643D-4422-9411-908EAFF3F78D__GUID-1F0BF036-697B-4362-A5C8-C17366359A14">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=REFRN20345" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>查看作业类</p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-F7EF9F5D-3AFE-4BEC-8D86-378AC06A6338" title="数据库资源管理器（资源管理器）控制如何在数据库会话之间分配资源。它不仅控制调度程序作业等异步会话，还控制用户会话等同步会话。">使用资源管理器在作业中分配资源</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-3CE3AF47-1043-4F21-BA0A-3F30AC359A0C" title="通过作业类，您可以为成员作业分配相同的属性，为成员作业设置资源分配，以及为优先级分组作业。">作业类</a> ”，</span>用于概述作业类</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-15F06ABD-CCC5-453E-AB86-F807A9680163" title="使用三个Scheduler对象优先处理Oracle Scheduler作业：作业类，窗口和窗口组。这些对象通过将作业与数据库资源管理器使用者组关联来确定作业的优先级。反过来，这又控制了分配给这些作业的资源量。此外，如果组中的所有作业都分配了相同的资源级别，则作业类使您可以在一组作业中设置相对优先级。">优先处理作业</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13099"></a><a id="ADMIN12422"></a><div class="props_rev_3"><a id="GUID-2597BEEE-AD48-4466-A326-8FC7E04896E6" name="GUID-2597BEEE-AD48-4466-A326-8FC7E04896E6"></a><h5 id="ADMIN-GUID-2597BEEE-AD48-4466-A326-8FC7E04896E6" class="sect5"><span class="enumeration_section">29.9.1.1</span>工作类任务及其程序</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见的作业类任务。
                        </p>
                        <div class="section">
                           <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-2597BEEE-AD48-4466-A326-8FC7E04896E6__g1034003" title="第1列列出了一些常见的工作类任务;第2列列出了用于执行任务的程序;第3列列出了执行任务所需的权限。">表29-8</a>说明了常见的作业类任务及其相应的过程和权限：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-2597BEEE-AD48-4466-A326-8FC7E04896E6__g1034003">
                           <p class="titleintable">表29-8作业类任务及其过程</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="工作类任务及其程序" width="100%" border="1" summary="Column 1 lists some common job class tasks; column 2 lists the procedure used to perform the task; column 3 lists the privileges needed to perform the task." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d268851e12166">任务</th>
                                    <th align="left" valign="bottom" width="34%" id="d268851e12169">程序</th>
                                    <th align="left" valign="bottom" width="43%" id="d268851e12172">需要特权</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d268851e12177" headers="d268851e12166 ">
                                       <p>创建一个工作类</p>
                                    </td>
                                    <td align="left" valign="top" width="34%" headers="d268851e12177 d268851e12169 ">
                                       <p><code class="codeph">CREATE_JOB_CLASS</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d268851e12177 d268851e12172 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d268851e12193" headers="d268851e12166 ">
                                       <p>改变一份工作班</p>
                                    </td>
                                    <td align="left" valign="top" width="34%" headers="d268851e12193 d268851e12169 ">
                                       <p><code class="codeph">SET_ATTRIBUTE</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d268851e12193 d268851e12172 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d268851e12209" headers="d268851e12166 ">
                                       <p>放下一份工作班</p>
                                    </td>
                                    <td align="left" valign="top" width="34%" headers="d268851e12209 d268851e12169 ">
                                       <p><code class="codeph">DROP_JOB_CLASS</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d268851e12209 d268851e12172 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p>有关<span class="q"><a href="administering-oracle-scheduler.html#GUID-7E0B2F16-EE4F-42F3-BF73-82C147D5E8F1" title="Users can be granted various Scheduler privileges.">权限</a></span>的详细信息，请参阅<span class="q">“ <a href="administering-oracle-scheduler.html#GUID-7E0B2F16-EE4F-42F3-BF73-82C147D5E8F1" title="可以为用户授予各种Scheduler权限。">计划程序权限</a> ”</span> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D0A95548-643D-4422-9411-908EAFF3F78D" title="作业类提供了一种分组作业以确定优先级的方法。它们还提供了一种方法，可以轻松地将一组属性值分配给成员作业。作业类通过与数据库资源管理器相关的作业类属性影响其成员作业的优先级。">使用作业类管理作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12423"></a><div class="props_rev_3"><a id="GUID-8E370FA8-5CEE-4354-9EB0-71224C6E4938" name="GUID-8E370FA8-5CEE-4354-9EB0-71224C6E4938"></a><h5 id="ADMIN-GUID-8E370FA8-5CEE-4354-9EB0-71224C6E4938" class="sect5"><span class="enumeration_section">29.9.1.2</span>创建作业类</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包或Cloud Control中的<code class="codeph">CREATE_JOB_CLASS</code>过程创建作业类。始终在<code class="codeph">SYS</code>模式中创建作业类。
                        </p>
                        <div class="section">
                           <p>以下语句为所有财务作业创建一个作业类：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_JOB_CLASS（job_class_name =&gt;'finance_jobs'，resource_consumer_group =&gt;'finance_group'）;结束; /</pre><p>此作业类中的所有作业都将分配给<code class="codeph">finance_group</code>资源使用者组。
                           </p>
                           <p>要查询作业类，请使用<code class="codeph">*_SCHEDULER_JOB_CLASSES</code>视图。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-8E370FA8-5CEE-4354-9EB0-71224C6E4938__GUID-ED63174F-F315-434D-BD42-D05F1B136E5B">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="managing-resources-with-oracle-database-resource-manager.html#GUID-CCAD3AA4-9606-4445-A659-286B04F19993" title="资源使用者组（使用者组）是根据其处理需求组合在一起的用户会话的集合。">关于资源消费者群体</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D0A95548-643D-4422-9411-908EAFF3F78D" title="作业类提供了一种分组作业以确定优先级的方法。它们还提供了一种方法，可以轻松地将一组属性值分配给成员作业。作业类通过与数据库资源管理器相关的作业类属性影响其成员作业的优先级。">使用作业类管理作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12424"></a><div class="props_rev_3"><a id="GUID-59DD953C-FB10-4172-9C0F-E80DDD32527E" name="GUID-59DD953C-FB10-4172-9C0F-E80DDD32527E"></a><h5 id="ADMIN-GUID-59DD953C-FB10-4172-9C0F-E80DDD32527E" class="sect5"><span class="enumeration_section">29.9.1.3</span>更改作业类</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包或Cloud Control中的<code class="codeph">SET_ATTRIBUTE</code>过程来更改作业类。
                        </p>
                        <div class="section">
                           <p>除了作业类名称之外，还可以更改作业类的所有属性。<code class="codeph">*_SCHEDULER_JOB_CLASSES</code>视图中提供了作业类的属性。
                           </p>
                           <p>更改作业类时，运行属于该类的作业不受影响。此更改仅对尚未开始运行的作业生效。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D0A95548-643D-4422-9411-908EAFF3F78D" title="作业类提供了一种分组作业以确定优先级的方法。它们还提供了一种方法，可以轻松地将一组属性值分配给成员作业。作业类通过与数据库资源管理器相关的作业类属性影响其成员作业的优先级。">使用作业类管理作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12425"></a><div class="props_rev_3"><a id="GUID-E3062172-A63D-4935-A83A-BFE0475CA786" name="GUID-E3062172-A63D-4935-A83A-BFE0475CA786"></a><h5 id="ADMIN-GUID-E3062172-A63D-4935-A83A-BFE0475CA786" class="sect5"><span class="enumeration_section">29.9.1.4</span>删除作业类</h5>
                     <div>
                        <p>使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">DROP_JOB_CLASS</code>过程删除一个或多个作业类。
                        </p>
                        <div class="section">
                           <p>删除作业类意味着将从数据库中删除有关作业类的所有元数据。</p>
                           <p>通过在<code class="codeph">DROP_JOB_CLASS</code>过程调用中提供以逗号分隔的作业类名称列表，可以在一次调用中删除多个作业类。例如，以下语句删除了三个作业类：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DROP_JOB_CLASS（'jobclass1，jobclass2，jobclass3'）;结束; /</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D0A95548-643D-4422-9411-908EAFF3F78D" title="作业类提供了一种分组作业以确定优先级的方法。它们还提供了一种方法，可以轻松地将一组属性值分配给成员作业。作业类通过与数据库资源管理器相关的作业类属性影响其成员作业的优先级。">使用作业类管理作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN12045"></a><div class="props_rev_3"><a id="GUID-D0225ACD-DFC9-455A-82CF-344E7398DA82" name="GUID-D0225ACD-DFC9-455A-82CF-344E7398DA82"></a><h4 id="ADMIN-GUID-D0225ACD-DFC9-455A-82CF-344E7398DA82" class="sect4"><span class="enumeration_section">29.9.2</span>在作业类中设置相对作业优先级</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">SET_ATTRIBUTE</code>过程更改同一作业类中作业的相对优先级。作业优先级必须在1-5的范围内，其中1是最高优先级。
                     </p>
                     <div class="section">
                        <p>例如，以下语句将<code class="codeph">my_job1</code>的作业优先级更改为设置<code class="codeph">1</code> ：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.SET_ATTRIBUTE（name =&gt;'my_emp_job1'，attribute =&gt;'job_priority'，value =&gt; 1）;结束; /</pre><p>您可以通过发出以下语句来验证属性是否已更改：</p><pre class="oac_no_warn" dir="ltr">SELECT JOB_NAME，JOB_PRIORITY FROM DBA_SCHEDULER_JOBS; JOB_NAME JOB_PRIORITY ------------------------------ ------------ MY_EMP_JOB 3 MY_EMP_JOB1 1 MY_NEW_JOB1 3 MY_NEW_JOB2 3 MY_NEW_JOB3 3</pre><p>系统内作业的总体优先级首先由作业的作业类分配给的资源使用者组和当前资源计划的组合确定，然后由作业类中的相对优先级确定。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D0225ACD-DFC9-455A-82CF-344E7398DA82__GUID-8878EB84-D130-4C0A-948A-8ED335FDAC0A">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-F7EF9F5D-3AFE-4BEC-8D86-378AC06A6338" title="数据库资源管理器（资源管理器）控制如何在数据库会话之间分配资源。它不仅控制调度程序作业等异步会话，还控制用户会话等同步会话。">使用资源管理器在作业中分配资源</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">SET_ATTRIBUTE</code>过程的详细信息，请<code class="codeph">SET_ATTRIBUTE</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72399" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-15F06ABD-CCC5-453E-AB86-F807A9680163" title="使用三个Scheduler对象优先处理Oracle Scheduler作业：作业类，窗口和窗口组。这些对象通过将作业与数据库资源管理器使用者组关联来确定作业的优先级。反过来，这又控制了分配给这些作业的资源量。此外，如果组中的所有作业都分配了相同的资源级别，则作业类使您可以在一组作业中设置相对优先级。">优先处理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-994CFF24-2588-4A09-88C0-F5CBC9CA50F9" name="GUID-994CFF24-2588-4A09-88C0-F5CBC9CA50F9"></a><h4 id="ADMIN-GUID-994CFF24-2588-4A09-88C0-F5CBC9CA50F9" class="sect4"><span class="enumeration_section">29.9.3</span>使用Windows管理作业调度和作业优先级</h4>
                  <p>您可以创建窗口以在一天，一周等各个时间段内自动启动作业或更改作业之间的资源分配。窗口由时间间隔表示。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-15FA5A41-C7F0-4DFA-A668-07C0265F9550">关于Windows的作业调度和作业优先级</a><br>Windows提供了一种在不同时间自动激活不同资源计划的方法。然后，当资源计划发生更改时，正在运行的作业可以看到分配给它们的资源发生更改。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-A82CCC6F-32D0-4B78-AD3A-7100574C1CBB">窗口任务及其程序</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见的窗口任务。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4F377D3E-55EC-4552-B291-0061709340CA">创建Windows</a><br>您可以使用Cloud Control或<code class="codeph">DBMS_SCHEDULER.CREATE_WINDOW</code>过程来创建窗口。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-7CFA978C-8EC4-4C20-951C-48D3F2B9BF59">改变Windows</a><br>您可以通过修改其属性来更改窗口。您可以使用<code class="codeph">DBMS_SCHEDULER</code>包或Cloud Control中的<code class="codeph">SET_ATTRIBUTE</code>和<code class="codeph">SET_ATTRIBUTE_NULL</code>过程执行此操作。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E81004A4-1A42-450F-8074-FCF37C941409">打开Windows</a><br>当窗口打开时，调度程序将切换到在创建期间与其关联的资源计划。如果窗口打开时正在运行作业，则分配给它们的资源可能会因资源计划中的切换而发生更改。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-9B4C7F80-D81E-402F-AA2C-6D56F20A29AC">关闭Windows</a><br>窗口可以根据计划关闭，也可以手动关闭。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-EEBB9CC1-1E4C-4E3D-9058-9E1EF3745792">删除Windows</a><br>使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">DROP_WINDOW</code>过程删除一个或多个窗口。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-229331D3-021A-4C40-81B3-E5ED07CF10C6">禁用Windows</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DISABLE</code>过程或使用Cloud Control禁用一个或多个窗口。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4B47EDF2-FCAB-49D8-B69D-71963A73E98D">启用Windows</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">ENABLE</code>过程启用一个或多个窗口。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-15F06ABD-CCC5-453E-AB86-F807A9680163" title="使用三个Scheduler对象优先处理Oracle Scheduler作业：作业类，窗口和窗口组。这些对象通过将作业与数据库资源管理器使用者组关联来确定作业的优先级。反过来，这又控制了分配给这些作业的资源量。此外，如果组中的所有作业都分配了相同的资源级别，则作业类使您可以在一组作业中设置相对优先级。">优先处理作业</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN12426"></a><div class="props_rev_3"><a id="GUID-15FA5A41-C7F0-4DFA-A668-07C0265F9550" name="GUID-15FA5A41-C7F0-4DFA-A668-07C0265F9550"></a><h5 id="ADMIN-GUID-15FA5A41-C7F0-4DFA-A668-07C0265F9550" class="sect5"><span class="enumeration_section">29.9.3.1</span>关于Windows的作业调度和作业优先级</h5>
                     <div>
                        <p>Windows提供了一种在不同时间自动激活不同资源计划的方法。然后，当资源计划发生更改时，正在运行的作业可以看到分配给它们的资源发生更改。</p>
                        <p>作业可以在其<code class="codeph">schedule_name</code>属性中命名窗口。然后，调度程序在窗口<span class="italic">打开</span>时启动作业。窗口具有与其关联的计划，因此它可以在您的工作负载周期中的不同时间打开。
                        </p>
                        <p>这些是窗口的关键属性：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>时间表</p>
                              <p>这可以控制窗口何时生效。</p>
                           </li>
                           <li>
                              <p>持续时间</p>
                              <p>这可以控制窗口打开的时间。</p>
                           </li>
                           <li>
                              <p>资源计划</p>
                              <p>这将命名窗口打开时激活的资源计划。</p>
                           </li>
                        </ul>
                        <p>在任何给定时间只能有一个窗口生效。Windows属于<code class="codeph">SYS</code>架构。
                        </p>
                        <p>所有窗口活动都记录在<code class="codeph">*_SCHEDULER_WINDOW_LOG</code>视图中，也称为<span class="bold">窗口日志</span> 。有关<span class="q"><a href="administering-oracle-scheduler.html#GUID-2CAA0211-0F4E-4AE5-96E5-6F259474982B" title="The window log records operations on windows.">窗口日志记录</a></span>的示例，请参阅<span class="q">“ <a href="administering-oracle-scheduler.html#GUID-2CAA0211-0F4E-4AE5-96E5-6F259474982B" title="窗口日志记录窗口上的操作。">窗口日志</a> ”</span> 。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-15FA5A41-C7F0-4DFA-A668-07C0265F9550__GUID-FB488456-93CE-479B-B612-A9C2CB4291EA">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-BBFA4965-B688-45CC-B7B4-E6D4E8060C21" title="您可以创建窗口以在一天，一周等各个时间段内自动启动作业或更改作业之间的资源分配。窗口由具有明确定义的开头和结尾的时间间隔表示，例如" from="" 12am-6a="." ="">Windows</a> ”</span>用于概述Windows。
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-994CFF24-2588-4A09-88C0-F5CBC9CA50F9" title="您可以创建窗口以在一天，一周等各个时间段内自动启动作业或更改作业之间的资源分配。窗口由时间间隔表示。">使用Windows管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13100"></a><a id="ADMIN12427"></a><div class="props_rev_3"><a id="GUID-A82CCC6F-32D0-4B78-AD3A-7100574C1CBB" name="GUID-A82CCC6F-32D0-4B78-AD3A-7100574C1CBB"></a><h5 id="ADMIN-GUID-A82CCC6F-32D0-4B78-AD3A-7100574C1CBB" class="sect5"><span class="enumeration_section">29.9.3.2</span>窗口任务及其程序</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见的窗口任务。
                        </p>
                        <div class="section">
                           <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-A82CCC6F-32D0-4B78-AD3A-7100574C1CBB__g1034023" title="第1列列出了一些常见的窗口任务;第2列列出了执行任务所用的程序;第3列列出了执行任务所需的权限。">表29-9</a>说明了常见的窗口任务以及用于处理它们的过程。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-A82CCC6F-32D0-4B78-AD3A-7100574C1CBB__g1034023">
                           <p class="titleintable">表29-9窗口任务及其过程</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="窗口任务及其程序" width="100%" border="1" summary="Column 1 lists some common window tasks; column 2 lists the procedures used for performing the tasks; column 3 lists the privileges required to perform the task." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d268851e12814">任务</th>
                                    <th align="left" valign="bottom" width="35%" id="d268851e12817">程序</th>
                                    <th align="left" valign="bottom" width="41%" id="d268851e12820">需要特权</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d268851e12825" headers="d268851e12814 ">
                                       <p>创建一个窗口</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d268851e12825 d268851e12817 ">
                                       <p><code class="codeph">CREATE_WINDOW</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d268851e12825 d268851e12820 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d268851e12841" headers="d268851e12814 ">
                                       <p>打开一个窗口</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d268851e12841 d268851e12817 ">
                                       <p><code class="codeph">打开窗户</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d268851e12841 d268851e12820 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d268851e12857" headers="d268851e12814 ">
                                       <p>关闭一个窗口</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d268851e12857 d268851e12817 ">
                                       <p><code class="codeph">关闭窗口</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d268851e12857 d268851e12820 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d268851e12873" headers="d268851e12814 ">
                                       <p>改变一个窗口</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d268851e12873 d268851e12817 ">
                                       <p><code class="codeph">SET_ATTRIBUTE</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d268851e12873 d268851e12820 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d268851e12889" headers="d268851e12814 ">
                                       <p>放下一个窗口</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d268851e12889 d268851e12817 ">
                                       <p><code class="codeph">DROP_WINDOW</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d268851e12889 d268851e12820 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d268851e12905" headers="d268851e12814 ">
                                       <p>禁用窗口</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d268851e12905 d268851e12817 ">
                                       <p><code class="codeph">DISABLE</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d268851e12905 d268851e12820 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d268851e12921" headers="d268851e12814 ">
                                       <p>启用一个窗口</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d268851e12921 d268851e12817 ">
                                       <p><code class="codeph">ENABLE</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d268851e12921 d268851e12820 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p>有关<span class="q"><a href="administering-oracle-scheduler.html#GUID-7E0B2F16-EE4F-42F3-BF73-82C147D5E8F1" title="Users can be granted various Scheduler privileges.">权限</a></span>的详细信息，请参阅<span class="q">“ <a href="administering-oracle-scheduler.html#GUID-7E0B2F16-EE4F-42F3-BF73-82C147D5E8F1" title="可以为用户授予各种Scheduler权限。">计划程序权限</a> ”</span> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-994CFF24-2588-4A09-88C0-F5CBC9CA50F9" title="您可以创建窗口以在一天，一周等各个时间段内自动启动作业或更改作业之间的资源分配。窗口由时间间隔表示。">使用Windows管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12428"></a><div class="props_rev_3"><a id="GUID-4F377D3E-55EC-4552-B291-0061709340CA" name="GUID-4F377D3E-55EC-4552-B291-0061709340CA"></a><h5 id="ADMIN-GUID-4F377D3E-55EC-4552-B291-0061709340CA" class="sect5"><span class="enumeration_section">29.9.3.3</span>创建Windows</h5>
                     <div>
                        <p>您可以使用Cloud Control或<code class="codeph">DBMS_SCHEDULER.CREATE_WINDOW</code>过程来创建窗口。
                        </p>
                        <div class="section">
                           <p>使用该过程，您可以将<code class="codeph">resource_plan</code>参数保留为<code class="codeph">NULL</code> 。在这种情况下，当窗口打开时，当前计划仍然有效。
                           </p>
                           <p>您必须具有<code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code>权限才能创建窗口。
                           </p>
                           <p>为窗口指定计划时，计划程序不会检查是否已为该计划定义了窗口。因此，这可能导致窗口重叠。此外，Windows不支持使用具有PL / SQL表达式作为其重复间隔的命名调度</p>
                           <p>有关窗口属性的详细信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72310" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考”中</span></a>的<code class="codeph">CREATE_WINDOW</code>过程。
                           </p>
                           <p>以下示例创建一个名为<code class="codeph">daytime</code>的窗口，该窗口在办公时间内启用<code class="codeph">mixed_workload_plan</code>资源计划：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_WINDOW（window_name =&gt;'daytime'，resource_plan =&gt;'mixed_workload_plan'，start_date =&gt; '28 -APR-09 08.00.00 AM'，repeat_interval =&gt;'freq = daily; byday = mon，tue，wed，星期四，星期五，持续时间=&gt;间隔'9'小时，window_priority =&gt;'低'，评论=&gt;'OLTP交易有优先权'）;结束; /</pre><p>要验证窗口是否已正确创建，请查询视图<code class="codeph">DBA_SCHEDULER_WINDOWS</code> 。例如，发出以下语句：</p><pre class="oac_no_warn" dir="ltr">从DBA_SCHEDULER_WINDOWS中选择WINDOW_NAME，RESOURCE_PLAN，DURATION，REPEAT_INTERVAL; WINDOW_NAME RESOURCE_PLAN DURATION REPEAT_INTERVAL ----------- ------------------- ------------- --- ------------ DAYTIME MIXED_WORKLOAD_PLAN +000 09:00:00 freq = daily; BYDAY =星期一，星期二，星期三，星期四，星期五</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-994CFF24-2588-4A09-88C0-F5CBC9CA50F9" title="您可以创建窗口以在一天，一周等各个时间段内自动启动作业或更改作业之间的资源分配。窗口由时间间隔表示。">使用Windows管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12429"></a><div class="props_rev_3"><a id="GUID-7CFA978C-8EC4-4C20-951C-48D3F2B9BF59" name="GUID-7CFA978C-8EC4-4C20-951C-48D3F2B9BF59"></a><h5 id="ADMIN-GUID-7CFA978C-8EC4-4C20-951C-48D3F2B9BF59" class="sect5"><span class="enumeration_section">29.9.3.4</span>更改Windows</h5>
                     <div>
                        <p>您可以通过修改其属性来更改窗口。您可以使用<code class="codeph">DBMS_SCHEDULER</code>包或Cloud Control中的<code class="codeph">SET_ATTRIBUTE</code>和<code class="codeph">SET_ATTRIBUTE_NULL</code>过程执行此操作。
                        </p>
                        <div class="section">
                           <p>除<code class="codeph">WINDOW_NAME</code> ，窗口的所有属性在更改时都可以更改。有关窗口属性的详细信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72399" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考”中</span></a>的<code class="codeph">CREATE_WINDOW</code>过程。
                           </p>
                           <p>更改窗口时，它不会影响活动窗口。更改仅在下次打开窗口时生效。</p>
                           <p>所有窗户都可以改变。如果更改已禁用的窗口，则在更改后将保持禁用状态。如果在启用过程中执行的有效性检查成功，则将自动禁用，更改然后重新启用已启用的窗口。</p>
                           <p>有关<code class="codeph">SET_ATTRIBUTE</code>和<code class="codeph">SET_ATTRIBUTE_NULL</code>过程的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72235" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-994CFF24-2588-4A09-88C0-F5CBC9CA50F9" title="您可以创建窗口以在一天，一周等各个时间段内自动启动作业或更改作业之间的资源分配。窗口由时间间隔表示。">使用Windows管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12430"></a><div class="props_rev_3"><a id="GUID-E81004A4-1A42-450F-8074-FCF37C941409" name="GUID-E81004A4-1A42-450F-8074-FCF37C941409"></a><h5 id="ADMIN-GUID-E81004A4-1A42-450F-8074-FCF37C941409" class="sect5"><span class="enumeration_section">29.9.3.5</span>打开Windows</h5>
                     <div>
                        <p>当窗口打开时，调度程序将切换到在创建期间与其关联的资源计划。如果窗口打开时正在运行作业，则分配给它们的资源可能会因资源计划中的切换而发生更改。</p>
                        <div class="section">
                           <p>窗口可以通过两种方式打开：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>根据窗口的时间表</p>
                              </li>
                              <li>
                                 <p>手动，使用<code class="codeph">OPEN_WINDOW</code>过程</p>
                                 <p>此过程打开窗口，与其计划无关。此窗口将打开，与之关联的资源计划将立即生效。只能手动打开已启用的窗口。</p>
                                 <p>在<code class="codeph">OPEN_WINDOW</code>过程中，您可以使用<code class="codeph">duration</code>属性指定窗口应打开的时间间隔。持续时间是间隔天到秒的类型。如果未指定持续时间，则窗口将打开与窗口一起存储的常规持续时间。
                                 </p>
                                 <p>手动打开窗口对窗口的常规计划运行没有影响。</p>
                                 <p>当手动打开的窗口关闭时，应用有关重叠窗口的规则以确定当时应该打开哪个其他窗口（如果有的话）。</p>
                                 <p>通过在<code class="codeph">OPEN_WINDOW</code>调用或Cloud Control中将<code class="codeph">force</code>选项设置为<code class="codeph">TRUE</code> ，即使已经打开一个窗口，也可以强制打开窗口。
                                 </p>
                                 <p>当<code class="codeph">force</code>选项设置为<code class="codeph">TRUE</code> ，Scheduler会自动关闭当时打开的任何窗口，即使它具有更高的优先级。在此手动打开的窗口期间，即使计划程序具有更高的优先级，它也不会打开任何其他计划的窗口。您可以打开已打开的窗口。在这种情况下，从发出<code class="codeph">OPEN_WINDOW</code>命令开始，窗口在调用中指定的持续时间内保持打开状态。
                                 </p>
                                 <p>考虑一个例子来说明这一点。 <code class="codeph">window1</code>创建持续时间为四小时。它有两个小时的开放时间。如果此时您使用<code class="codeph">OPEN_WINDOW</code>调用重新打开<code class="codeph">window1</code>并且未指定持续时间，则<code class="codeph">window1</code>将再打开4个小时，因为它是使用该持续时间创建的。如果您指定的持续时间为30分钟，则窗口将在30分钟后关闭。
                                 </p>
                              </li>
                           </ul>
                           <p>打开窗口时，会在窗口日志中创建一个条目。</p>
                           <p>如果使用带有<code class="codeph">FORCE</code>选项的<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code>语句手动切换当前资源计划，或者使用带有<code class="codeph">allow_scheduler_plan_switches</code>参数设置为<code class="codeph">FALSE</code>的<code class="codeph">DBMS_RESOURCE_MANAGER.SWITCH_PLAN</code>包过程，则窗口可能无法切换资源计划。在这种情况下，切换资源计划的失败将写入窗口日志。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-E81004A4-1A42-450F-8074-FCF37C941409__GUID-E49A7768-2F2A-446B-B5A4-4FCD83B41A4D">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">DBMS_SCHEDULER.OPEN_WINDOW</code>过程的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72379" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_RESOURCE_MANAGER.SWITCH_PLAN</code>过程的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS67632" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-994CFF24-2588-4A09-88C0-F5CBC9CA50F9" title="您可以创建窗口以在一天，一周等各个时间段内自动启动作业或更改作业之间的资源分配。窗口由时间间隔表示。">使用Windows管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12431"></a><div class="props_rev_3"><a id="GUID-9B4C7F80-D81E-402F-AA2C-6D56F20A29AC" name="GUID-9B4C7F80-D81E-402F-AA2C-6D56F20A29AC"></a><h5 id="ADMIN-GUID-9B4C7F80-D81E-402F-AA2C-6D56F20A29AC" class="sect5"><span class="enumeration_section">29.9.3.6</span>关闭Windows</h5>
                     <div>
                        <p>窗口可以根据计划关闭，也可以手动关闭。</p>
                        <div class="section">
                           <p>窗口可以通过两种方式关闭：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>根据时间表</p>
                                 <p>窗口将根据创建时定义的计划关闭。</p>
                              </li>
                              <li>
                                 <p>手动，使用<code class="codeph">CLOSE_WINDOW</code>过程</p>
                                 <p><code class="codeph">CLOSE_WINDOW</code>过程将过早关闭打开的窗口。
                                 </p>
                              </li>
                           </ul>
                           <p>关闭的窗口意味着它不再有效。当窗口关闭时，调度程序会将资源计划切换到窗口外有效的资源计划，或者在窗口重叠到另一个窗口的情况下。如果您尝试关闭不存在或未打开的窗口，则会生成错误。</p>
                           <p>正在运行的作业将在其运行的窗口关闭时停止，除非在创建作业时将属性<code class="codeph">stop_on_window_close</code>设置为<code class="codeph">TRUE</code> 。但是，分配给作业的资源可能会更改，因为资源计划可能会更改。
                           </p>
                           <p>当正在运行的作业具有一个窗口组作为其计划时，如果另一个也是同一窗口组成员的窗口变为活动状态，则当其窗口关闭时，该作业将不会停止。即使作业是使用属性<code class="codeph">stop_on_window_close</code>设置为<code class="codeph">TRUE</code>创建的，也是<code class="codeph">stop_on_window_close</code> 。</p>
                           <p>关闭窗口时，会在窗口日志<code class="codeph">DBA_SCHEDULER_WINDOW_LOG</code>添加一个条目。</p>
                           <p>有关<code class="codeph">CLOSE_WINDOW</code>过程的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72286" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-994CFF24-2588-4A09-88C0-F5CBC9CA50F9" title="您可以创建窗口以在一天，一周等各个时间段内自动启动作业或更改作业之间的资源分配。窗口由时间间隔表示。">使用Windows管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12432"></a><div class="props_rev_3"><a id="GUID-EEBB9CC1-1E4C-4E3D-9058-9E1EF3745792" name="GUID-EEBB9CC1-1E4C-4E3D-9058-9E1EF3745792"></a><h5 id="ADMIN-GUID-EEBB9CC1-1E4C-4E3D-9058-9E1EF3745792" class="sect5"><span class="enumeration_section">29.9.3.7</span>删除Windows</h5>
                     <div>
                        <p>使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">DROP_WINDOW</code>过程删除一个或多个窗口。
                        </p>
                        <div class="section">
                           <p>删除窗口时，将从<code class="codeph">*_SCHEDULER_WINDOWS</code>视图中删除有关该窗口的所有元数据。窗口组中将删除对窗口的所有引用。
                           </p>
                           <p>通过为<code class="codeph">DROP_WINDOW</code>过程提供以逗号分隔的窗口名称或窗口组名称列表，可以在一次调用中删除多个窗口。例如，以下语句同时删除窗口和窗口组：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DROP_WINDOW（'window1，window2，window3，windowgroup1，windowgroup2'）;结束; /</pre><p>请注意，如果提供了窗口组名称，则会删除窗口组中的窗口，但不会删除窗口组。要删除窗口组，必须使用<code class="codeph">DROP_GROUP</code>过程。
                           </p>
                           <p>有关<code class="codeph">DROP_GROUP</code>过程的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72866" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-994CFF24-2588-4A09-88C0-F5CBC9CA50F9" title="您可以创建窗口以在一天，一周等各个时间段内自动启动作业或更改作业之间的资源分配。窗口由时间间隔表示。">使用Windows管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12433"></a><div class="props_rev_3"><a id="GUID-229331D3-021A-4C40-81B3-E5ED07CF10C6" name="GUID-229331D3-021A-4C40-81B3-E5ED07CF10C6"></a><h5 id="ADMIN-GUID-229331D3-021A-4C40-81B3-E5ED07CF10C6" class="sect5"><span class="enumeration_section">29.9.3.8</span>禁用Windows</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DISABLE</code>过程或使用Cloud Control禁用一个或多个窗口。
                        </p>
                        <div class="section">
                           <p>因此，窗口将无法打开。但是，窗口的元数据仍然存在，因此可以重新启用它。由于<code class="codeph">DISABLE</code>过程用于多个Scheduler对象，因此在禁用窗口时，它们必须以<code class="codeph">SYS</code> 。</p>
                           <p>由于其他原因，窗口也可能被禁用。例如，窗口将在其计划结束时被禁用。此外，如果窗口指向不再存在的计划，则会禁用该计划。</p>
                           <p>如果存在将窗口作为其计划的作业，则除非在过程调用中将<code class="codeph">force</code>设置为<code class="codeph">TRUE</code> ，否则将无法禁用该窗口。默认情况下， <code class="codeph">force</code>设置为<code class="codeph">FALSE</code> 。禁用该窗口时，不会禁用那些将窗口作为其计划的作业。
                           </p>
                           <p>您可以通过为<code class="codeph">DISABLE</code>过程调用提供逗号分隔的窗口名称或窗口组名称列表，在一次调用中禁用多个窗口。例如，以下语句禁用窗口和窗口组：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DISABLE（'sys.window1，sys.window2，sys.window3，sys.windowgroup1，sys.windowgroup2'）;结束; /</pre><p>有关<code class="codeph">DISABLE</code>过程的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72330" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-994CFF24-2588-4A09-88C0-F5CBC9CA50F9" title="您可以创建窗口以在一天，一周等各个时间段内自动启动作业或更改作业之间的资源分配。窗口由时间间隔表示。">使用Windows管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12434"></a><div class="props_rev_3"><a id="GUID-4B47EDF2-FCAB-49D8-B69D-71963A73E98D" name="GUID-4B47EDF2-FCAB-49D8-B69D-71963A73E98D"></a><h5 id="ADMIN-GUID-4B47EDF2-FCAB-49D8-B69D-71963A73E98D" class="sect5"><span class="enumeration_section">29.9.3.9</span>启用Windows</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包或Cloud Control中的<code class="codeph">ENABLE</code>过程启用一个或多个窗口。
                        </p>
                        <div class="section">
                           <p>启用的窗口是可以打开的窗口。默认情况下，Windows已<code class="codeph">enabled</code> 。使用<code class="codeph">ENABLE</code>过程启用窗口时，将执行有效性检查，并且仅在此成功时才会启用窗口。启用窗口后，它将记录在窗口日志表中。由于<code class="codeph">ENABLE</code>过程用于多个Scheduler对象，因此在启用Windows时，它们必须以<code class="codeph">SYS</code> 。</p>
                           <p>您可以通过提供以逗号分隔的窗口名称列表在一个调用中启用多个窗口。例如，以下语句启用三个窗口：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.ENABLE（'sys.window1，sys.window2，sys.window3'）;结束; /</pre><p>有关<code class="codeph">ENABLE</code>过程的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72362" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-994CFF24-2588-4A09-88C0-F5CBC9CA50F9" title="您可以创建窗口以在一天，一周等各个时间段内自动启动作业或更改作业之间的资源分配。窗口由时间间隔表示。">使用Windows管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN12437"></a><div class="props_rev_3"><a id="GUID-44C97065-09C4-48F5-8388-FB06FA53229F" name="GUID-44C97065-09C4-48F5-8388-FB06FA53229F"></a><h4 id="ADMIN-GUID-44C97065-09C4-48F5-8388-FB06FA53229F" class="sect4"><span class="enumeration_section">29.9.4</span>使用窗口组管理作业调度和作业优先级</h4>
                  <div>
                     <p>窗口组提供了一种简单的方法来安排必须在一天，一周等多个时间段内运行的作业。如果创建窗口组，向其添加窗口，然后在作业的<code class="codeph">schedule_name</code>属性中将此窗口组命名，则作业将在窗口组中的所有窗口中运行。窗口组驻留在<code class="codeph">SYS</code>架构中。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-C3D123C6-A396-436B-9AC5-D1A3F528866B">窗口组任务及其程序</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见的窗口组任务。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-1E440416-C1E3-47CA-ADB6-3D436E3884B9">创建窗口组</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER.CREATE_GROUP</code>过程创建一个窗口组，指定组类型为“ <code class="codeph">WINDOW</code> ”。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-60791D7E-59D0-44C8-98A8-3E4D08FFCAB5">删除窗口组</a><br>通过使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DROP_GROUP</code>过程删除一个或多个窗口组。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-F6DCA271-1928-4CDE-96BD-3EAFECE78C8E">将成员添加到窗口组</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">ADD_GROUP_MEMBER</code>过程将窗口添加到窗口组。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-8D9C090C-FAC8-48C0-AA75-62D0CFE70324">从窗口组中删除成员</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">REMOVE_GROUP_MEMBER</code>过程从窗口组中删除一个或多个窗口。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-203683D3-71D0-4FC8-BC95-B65C8DE1E92E">启用窗口组</a><br>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包中的<code class="codeph">ENABLE</code>过程启用一个或多个窗口组。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-50D88736-6B95-4F21-8CCF-A83CC23C8DE3">禁用窗口组</a><br>您使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DISABLE</code>过程禁用窗口组。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-44C97065-09C4-48F5-8388-FB06FA53229F__GUID-6EDABF5C-ECAF-4906-ACA4-E2410994AFF4">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-F99C0B9B-301D-445E-BB95-6FD3886DDF9F" title="You can group windows for ease of use in scheduling jobs.">窗口组</a> ”，</span>用于<span class="q"><a href="oracle-scheduler-concepts.html#GUID-F99C0B9B-301D-445E-BB95-6FD3886DDF9F" title="您可以对窗口进行分组，以便在安排作业时使用。">窗口组</a></span>的概述。
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-15F06ABD-CCC5-453E-AB86-F807A9680163" title="使用三个Scheduler对象优先处理Oracle Scheduler作业：作业类，窗口和窗口组。这些对象通过将作业与数据库资源管理器使用者组关联来确定作业的优先级。反过来，这又控制了分配给这些作业的资源量。此外，如果组中的所有作业都分配了相同的资源级别，则作业类使您可以在一组作业中设置相对优先级。">优先处理作业</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13103"></a><a id="ADMIN12438"></a><div class="props_rev_3"><a id="GUID-C3D123C6-A396-436B-9AC5-D1A3F528866B" name="GUID-C3D123C6-A396-436B-9AC5-D1A3F528866B"></a><h5 id="ADMIN-GUID-C3D123C6-A396-436B-9AC5-D1A3F528866B" class="sect5"><span class="enumeration_section">29.9.4.1</span>窗口组任务及其过程</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的过程来管理常见的窗口组任务。
                        </p>
                        <div class="section">
                           <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-C3D123C6-A396-436B-9AC5-D1A3F528866B__g1033851" title="第1列列出了一些常见的窗口组任务，第2列列出了用于执行任务的过程;第3列列出了执行任务所需的权限。">表29-10</a>说明了常见的窗口组任务以及用于处理它们的过程。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-C3D123C6-A396-436B-9AC5-D1A3F528866B__g1033851">
                           <p class="titleintable">表29-10窗口组任务及其过程</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="窗口组任务及其程序" width="100%" border="1" summary="Column 1 lists some common window group tasks, column 2 lists the procedures used to perform the tasks; column 3 lists the privileges required to perform the tasks." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d268851e13821">任务</th>
                                    <th align="left" valign="bottom" width="25%" id="d268851e13824">程序</th>
                                    <th align="left" valign="bottom" width="51%" id="d268851e13827">需要特权</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d268851e13832" headers="d268851e13821 ">
                                       <p>创建一个窗口组</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d268851e13832 d268851e13824 ">
                                       <p><code class="codeph">创建组</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="51%" headers="d268851e13832 d268851e13827 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d268851e13848" headers="d268851e13821 ">
                                       <p>删除一个窗口组</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d268851e13848 d268851e13824 ">
                                       <p><code class="codeph">DROP_GROUP</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="51%" headers="d268851e13848 d268851e13827 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d268851e13864" headers="d268851e13821 ">
                                       <p>将成员添加到窗口组</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d268851e13864 d268851e13824 ">
                                       <p><code class="codeph">ADD_GROUP_MEMBER</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="51%" headers="d268851e13864 d268851e13827 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d268851e13880" headers="d268851e13821 ">
                                       <p>从窗口组中删除成员</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d268851e13880 d268851e13824 ">
                                       <p><code class="codeph">REMOVE_GROUP_MEMBER</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="51%" headers="d268851e13880 d268851e13827 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d268851e13896" headers="d268851e13821 ">
                                       <p>启用窗口组</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d268851e13896 d268851e13824 ">
                                       <p><code class="codeph">ENABLE</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="51%" headers="d268851e13896 d268851e13827 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d268851e13912" headers="d268851e13821 ">
                                       <p>禁用窗口组</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d268851e13912 d268851e13824 ">
                                       <p><code class="codeph">DISABLE</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="51%" headers="d268851e13912 d268851e13827 ">
                                       <p><code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p>有关<span class="q"><a href="administering-oracle-scheduler.html#GUID-7E0B2F16-EE4F-42F3-BF73-82C147D5E8F1" title="Users can be granted various Scheduler privileges.">权限</a></span>的详细信息，请参阅<span class="q">“ <a href="administering-oracle-scheduler.html#GUID-7E0B2F16-EE4F-42F3-BF73-82C147D5E8F1" title="可以为用户授予各种Scheduler权限。">计划程序权限</a> ”</span> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-44C97065-09C4-48F5-8388-FB06FA53229F" title="窗口组提供了一种简单的方法来安排必须在一天，一周等多个时间段内运行的作业。如果创建窗口组，向其添加窗口，然后在作业的schedule_name属性中将此窗口组命名，则作业将在窗口组中的所有窗口中运行。窗口组驻留在SYS架构中。">使用窗口组管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12439"></a><div class="props_rev_3"><a id="GUID-1E440416-C1E3-47CA-ADB6-3D436E3884B9" name="GUID-1E440416-C1E3-47CA-ADB6-3D436E3884B9"></a><h5 id="ADMIN-GUID-1E440416-C1E3-47CA-ADB6-3D436E3884B9" class="sect5"><span class="enumeration_section">29.9.4.2</span>创建窗口组</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_SCHEDULER.CREATE_GROUP</code>过程创建一个窗口组，指定组类型为“ <code class="codeph">WINDOW</code> ”。
                        </p>
                        <div class="section">
                           <p>您可以在创建组时指定组的成员窗口，也可以稍后使用<code class="codeph">ADD_GROUP_MEMBER</code>过程添加它们。窗口组不能是另一个窗口组的成员。但是，您可以创建一个没有成员的窗口组。
                           </p>
                           <p>如果创建窗口组并指定不存在的成员窗口，则会生成错误并且不会创建窗口组。如果窗口已经是窗口组的成员，则不会再次添加该窗口。</p>
                           <p>窗口组在<code class="codeph">SYS</code>架构中创建。窗口组（如窗口）是通过访问<code class="codeph">PUBLIC</code>创建的，因此，访问窗口组不需要任何特权。
                           </p>
                           <p>以下语句创建一个名为<code class="codeph">downtime</code>的窗口组，并向其添加两个窗口（ <code class="codeph">weeknights</code>和<code class="codeph">weekends</code> ）：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.CREATE_GROUP（group_name =&gt;'downtime'，group_type =&gt;'WINDOW'，member =&gt;'weeknights，weekendnds'）;结束; /</pre><p>要验证窗口组内容，请以具有<code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code>权限的用户身份发出以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT group_name，enabled，number_of_members FROM dba_scheduler_groups WHERE group_type ='WINDOW'; GROUP_NAME已启用NUMBER_OF_MEMBERS -------------- -------- ----------------- DOWNTIME TRUE 2 SELECT group_name，member_name FROM dba_scheduler_group_members; GROUP_NAME MEMBER_NAME --------------- -------------------- DOWNTIME“SYS”。“WEEKENDS”DOWNTIME“SYS”。 “周日的夜间”</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-44C97065-09C4-48F5-8388-FB06FA53229F" title="窗口组提供了一种简单的方法来安排必须在一天，一周等多个时间段内运行的作业。如果创建窗口组，向其添加窗口，然后在作业的schedule_name属性中将此窗口组命名，则作业将在窗口组中的所有窗口中运行。窗口组驻留在SYS架构中。">使用窗口组管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12440"></a><div class="props_rev_3"><a id="GUID-60791D7E-59D0-44C8-98A8-3E4D08FFCAB5" name="GUID-60791D7E-59D0-44C8-98A8-3E4D08FFCAB5"></a><h5 id="ADMIN-GUID-60791D7E-59D0-44C8-98A8-3E4D08FFCAB5" class="sect5"><span class="enumeration_section">29.9.4.3</span>删除窗口组</h5>
                     <div>
                        <p>通过使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DROP_GROUP</code>过程删除一个或多个窗口组。
                        </p>
                        <div class="section">
                           <p>此调用将删除窗口组，但不会删除作为此窗口组成员的窗口。要删除作为该组成员但不是窗口组本身的所有窗口，可以使用<code class="codeph">DROP_WINDOW</code>过程并为该调用提供窗口组的名称。
                           </p>
                           <p>通过为<code class="codeph">DROP_GROUP</code>过程调用提供以逗号分隔的窗口组名称列表，可以在一个调用中删除多个窗口组。您必须在每个窗口组名称前面加上<code class="codeph">SYS</code>模式。例如，以下语句删除三个窗口组：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DROP_GROUP（'sys.windowgroup1，sys.windowgroup2，sys.windowgroup3'）;结束; /</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-44C97065-09C4-48F5-8388-FB06FA53229F" title="窗口组提供了一种简单的方法来安排必须在一天，一周等多个时间段内运行的作业。如果创建窗口组，向其添加窗口，然后在作业的schedule_name属性中将此窗口组命名，则作业将在窗口组中的所有窗口中运行。窗口组驻留在SYS架构中。">使用窗口组管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12441"></a><div class="props_rev_3"><a id="GUID-F6DCA271-1928-4CDE-96BD-3EAFECE78C8E" name="GUID-F6DCA271-1928-4CDE-96BD-3EAFECE78C8E"></a><h5 id="ADMIN-GUID-F6DCA271-1928-4CDE-96BD-3EAFECE78C8E" class="sect5"><span class="enumeration_section">29.9.4.4</span>向窗口组添加成员</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">ADD_GROUP_MEMBER</code>过程将窗口添加到窗口组。
                        </p>
                        <div class="section">
                           <p>通过指定以逗号分隔的窗口列表，可以在一次调用中向窗口组添加多个成员。例如，以下语句将两个窗口添加到窗口组<code class="codeph">window_group1</code> ：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.ADD_GROUP_MEMBER（'sys.windowgroup1'，'window2，window3'）;结束; /</pre><p>如果已将打开的窗口添加到窗口组，则在窗口组中的下一个窗口打开之前，计划程序将不会启动指向此窗口组的作业。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-44C97065-09C4-48F5-8388-FB06FA53229F" title="窗口组提供了一种简单的方法来安排必须在一天，一周等多个时间段内运行的作业。如果创建窗口组，向其添加窗口，然后在作业的schedule_name属性中将此窗口组命名，则作业将在窗口组中的所有窗口中运行。窗口组驻留在SYS架构中。">使用窗口组管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12442"></a><div class="props_rev_3"><a id="GUID-8D9C090C-FAC8-48C0-AA75-62D0CFE70324" name="GUID-8D9C090C-FAC8-48C0-AA75-62D0CFE70324"></a><h5 id="ADMIN-GUID-8D9C090C-FAC8-48C0-AA75-62D0CFE70324" class="sect5"><span class="enumeration_section">29.9.4.5</span>从窗口组中删除成员</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">REMOVE_GROUP_MEMBER</code>过程从窗口组中删除一个或多个窗口。
                        </p>
                        <div class="section">
                           <p>设置了<code class="codeph">stop_on_window_close</code>标志的作业仅在窗口关闭时停止。从窗口组中删除打开的窗口对此没有影响。
                           </p>
                           <p>通过指定以逗号分隔的窗口列表，可以在一次调用中从窗口组中删除多个成员。例如，以下语句删除了两个窗口：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.REMOVE_GROUP_MEMBER（'sys.window_group1'，'window2，window3'）;结束; /</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-44C97065-09C4-48F5-8388-FB06FA53229F" title="窗口组提供了一种简单的方法来安排必须在一天，一周等多个时间段内运行的作业。如果创建窗口组，向其添加窗口，然后在作业的schedule_name属性中将此窗口组命名，则作业将在窗口组中的所有窗口中运行。窗口组驻留在SYS架构中。">使用窗口组管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12443"></a><div class="props_rev_3"><a id="GUID-203683D3-71D0-4FC8-BC95-B65C8DE1E92E" name="GUID-203683D3-71D0-4FC8-BC95-B65C8DE1E92E"></a><h5 id="ADMIN-GUID-203683D3-71D0-4FC8-BC95-B65C8DE1E92E" class="sect5"><span class="enumeration_section">29.9.4.6</span>启用窗口组</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包中的<code class="codeph">ENABLE</code>过程启用一个或多个窗口组。
                        </p>
                        <div class="section">
                           <p>默认情况下，窗口组创建为<code class="codeph">ENABLED</code> 。例如：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.ENABLE（'sys.windowgroup1，sys.windowgroup2，sys.windowgroup3'）;结束; /</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-44C97065-09C4-48F5-8388-FB06FA53229F" title="窗口组提供了一种简单的方法来安排必须在一天，一周等多个时间段内运行的作业。如果创建窗口组，向其添加窗口，然后在作业的schedule_name属性中将此窗口组命名，则作业将在窗口组中的所有窗口中运行。窗口组驻留在SYS架构中。">使用窗口组管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12444"></a><div class="props_rev_3"><a id="GUID-50D88736-6B95-4F21-8CCF-A83CC23C8DE3" name="GUID-50D88736-6B95-4F21-8CCF-A83CC23C8DE3"></a><h5 id="ADMIN-GUID-50D88736-6B95-4F21-8CCF-A83CC23C8DE3" class="sect5"><span class="enumeration_section">29.9.4.7</span>禁用窗口组</h5>
                     <div>
                        <p>您使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">DISABLE</code>过程禁用窗口组。
                        </p>
                        <div class="section">
                           <p>当成员窗口打开时，具有禁用窗口组作为其计划的作业不会运行。禁用窗口组不会禁用其成员窗口。</p>
                           <p>您还可以通过提供以逗号分隔的窗口组名称列表来禁用一个调用中的多个窗口组。例如，以下语句禁用三个窗口组：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.DISABLE（'sys.windowgroup1，sys.windowgroup2，sys.windowgroup3'）;结束; /</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-44C97065-09C4-48F5-8388-FB06FA53229F" title="窗口组提供了一种简单的方法来安排必须在一天，一周等多个时间段内运行的作业。如果创建窗口组，向其添加窗口，然后在作业的schedule_name属性中将此窗口组命名，则作业将在窗口组中的所有窗口中运行。窗口组驻留在SYS架构中。">使用窗口组管理作业调度和作业优先级</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN12470"></a><div class="props_rev_3"><a id="GUID-F7EF9F5D-3AFE-4BEC-8D86-378AC06A6338" name="GUID-F7EF9F5D-3AFE-4BEC-8D86-378AC06A6338"></a><h4 id="ADMIN-GUID-F7EF9F5D-3AFE-4BEC-8D86-378AC06A6338" class="sect4"><span class="enumeration_section">29.9.5</span>使用资源管理器在作业中分配资源</h4>
                  <div>
                     <p>数据库资源管理器（资源管理器）控制如何在数据库会话之间分配资源。它不仅控制调度程序作业等异步会话，还控制用户会话等同步会话。</p>
                     <p>它将数据库中的所有“工作单元”分组为资源使用者组，并使用资源计划指定如何在各个使用者组之间分配资源。资源管理器分配的主要系统资源是CPU。</p>
                     <p>对于Scheduler作业，通过首先将每个作业分配给作业类，然后将作业类与使用者组相关联来分配资源。然后，资源在Scheduler作业和使用者组内的其他会话之间分配。您还可以为作业类中的作业分配相对优先级，并相应地将资源分配给这些作业。</p>
                     <p>您可以随时手动更改当前资源计划。更改当前资源计划的另一种方法是创建Scheduler窗口。Windows具有资源计划属性。当窗口打开时，当前计划将切换到窗口的资源计划。</p>
                     <p>调度程序尝试限制同时运行的作业数，以便至少可以完成一些作业，而不是同时运行大量作业，但没有足够的资源来完成任何作业。</p>
                     <p>调度程序和资源管理器紧密集成。作业协调器从资源管理器获取数据库资源可用性。根据该信息，协调员确定要启动的作业数。它只会从那些有足够资源运行的作业类中启动作业。协调器将继续在映射到使用者组的特定作业类中启动作业，直到资源管理器确定已达到为该使用者组分配的最大资源。因此，作业表中可能存在可以运行但作业协调器不会获取的作业，因为没有资源可以运行它们。因此，无法保证作业将在计划的确切时间运行。协调员根据哪些消费者群体仍有可用资源从作业表中获取作业。</p>
                     <p>资源管理器继续根据指定的资源计划管理分配给每个正在运行的作业的资源。请记住，资源管理器只能管理数据库进程。资源的主动管理不适用于外部工作。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F7EF9F5D-3AFE-4BEC-8D86-378AC06A6338__GUID-86923FC1-8FC8-4532-81A1-4B3C1D00DF37">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="managing-resources-with-oracle-database-resource-manager.html#GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" title="Oracle数据库资源管理器（资源管理器）使您可以管理数据库的资源分配。">使用Oracle数据库资源管理器管理资源</a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-15F06ABD-CCC5-453E-AB86-F807A9680163" title="使用三个Scheduler对象优先处理Oracle Scheduler作业：作业类，窗口和窗口组。这些对象通过将作业与数据库资源管理器使用者组关联来确定作业的优先级。反过来，这又控制了分配给这些作业的资源量。此外，如果组中的所有作业都分配了相同的资源级别，则作业类使您可以在一组作业中设置相对优先级。">优先处理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13109"></a><a id="ADMIN12471"></a><div class="props_rev_3"><a id="GUID-B4929C59-30DE-4E89-A319-145B05EAD676" name="GUID-B4929C59-30DE-4E89-A319-145B05EAD676"></a><h4 id="ADMIN-GUID-B4929C59-30DE-4E89-A319-145B05EAD676" class="sect4"><span class="enumeration_section">29.9.6</span>作业资源分配示例</h4>
                  <div>
                     <p>一个示例说明了如何为作业分配资源。</p>
                     <p>假设活动资源计划被称为“夜间计划”，并且有三个作业类： <code class="codeph">JC1</code> ，它映射到消费者组<code class="codeph">DW</code> ; <code class="codeph">JC2</code> ，映射到消费者组<code class="codeph">OLTP</code> ;和<code class="codeph">JC3</code> ，映射到默认的使用者组。<a href="scheduling-jobs-with-oracle-scheduler.html#GUID-B4929C59-30DE-4E89-A319-145B05EAD676__i1022706">图29-2</a>提供了此场景的简单图形说明。
                     </p>
                     <div class="figure" id="GUID-B4929C59-30DE-4E89-A319-145B05EAD676__i1022706">
                        <p class="titleinfigure">图29-2示例资源计划</p><img src="img/admin066.gif" width="276" alt="下面是图29-2的描述" title="下面是图29-2的描述" longdesc="img_text/admin066.html"><br><a href="img_text/admin066.html">“图29-2样本资源计划”的描述</a></div>
                     <!-- class="figure" -->
                     <p>该资源计划明确优先考虑作为工作类<code class="codeph">JC1</code>一部分的工作。消费者组<code class="codeph">DW</code>获得60％的资源，因此属于工作类<code class="codeph">JC1</code>工作将获得60％的资源。消费者群体<code class="codeph">OLTP</code>拥有30％的资源，这意味着工作类<code class="codeph">JC2</code>中的工作将获得30％的资源。消费者组“ <code class="codeph">Other</code>指定所有其他消费者组将获得10％的资源。因此，属于作业类<code class="codeph">JC3</code>所有作业将共享10％的资源，并且最多可以获得10％的资源。
                     </p>
                     <p>请注意，一个使用者组未使用的资源可供其他使用者组使用。因此，如果作业类JC1中的作业未完全使用分配的60％，则未使用的部分可供JC2和JC3类中的作业使用。另请注意，在CPU使用率达到100％之前，资源管理器根本不会开始限制资源使用。有关更多信息，请参阅<a href="managing-resources-with-oracle-database-resource-manager.html#GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" title="Oracle数据库资源管理器（资源管理器）使您可以管理数据库的资源分配。">使用Oracle Database Resource Manager管理资源</a> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-15F06ABD-CCC5-453E-AB86-F807A9680163" title="使用三个Scheduler对象优先处理Oracle Scheduler作业：作业类，窗口和窗口组。这些对象通过将作业与数据库资源管理器使用者组关联来确定作业的优先级。反过来，这又控制了分配给这些作业的资源量。此外，如果组中的所有作业都分配了相同的资源级别，则作业类使您可以在一组作业中设置相对优先级。">优先处理作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-E9B234FF-C7F3-44B0-AEC8-A997353C414F" name="GUID-E9B234FF-C7F3-44B0-AEC8-A997353C414F"></a><h3 id="ADMIN-GUID-E9B234FF-C7F3-44B0-AEC8-A997353C414F" class="sect3"><span class="enumeration_section">29.10</span>监控工作</h3>
               <p>您可以通过多种不同方式监控作业。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-4FA73AB9-08BB-442C-AD2E-C4C4DEE58863">关于监控工作</a><br>有几种方法可以监视Scheduler作业。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5799E3CA-4759-4DCB-9919-AADB461FAFB8">工作日志</a><br>您可以在作业日志中查看本地和远程作业的结果。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-9B29C60A-DF63-4011-8633-BEBC4FD0FC48">监控多个目标作业</a><br>对于多目标作业，整体父作业状态取决于子作业的结果。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-CAC644C1-854D-44FB-8FF6-BE6DDE809B4F">使用计划程序引发的事件监视作业状态</a><br>调度程序可以在作业更改状态时引发事件。
                     </li>
                     <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E55607CC-993A-4380-A76D-8BA398EC4A08">使用电子邮件通知监视作业状态</a><br>调度程序在作业更改状态时发送电子邮件。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" title="您可以使用Oracle Scheduler创建，运行和管理作业。">使用Oracle Scheduler调度作业</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13297"></a><div class="props_rev_3"><a id="GUID-4FA73AB9-08BB-442C-AD2E-C4C4DEE58863" name="GUID-4FA73AB9-08BB-442C-AD2E-C4C4DEE58863"></a><h4 id="ADMIN-GUID-4FA73AB9-08BB-442C-AD2E-C4C4DEE58863" class="sect4"><span class="enumeration_section">29.10.1</span>关于监视作业</h4>
                  <div>
                     <p>有几种方法可以监视Scheduler作业。</p>
                     <p>您可以通过以下方式监视Scheduler作业：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>查看作业日志</p>
                           <p>作业日志包括数据字典视图<code class="codeph">*_SCHEDULER_JOB_LOG</code>和<code class="codeph">*_SCHEDULER_JOB_RUN_DETAILS</code> ，其中：</p>
                           <p>* = { <code class="codeph">DBA</code> | <code class="codeph">ALL</code> | <code class="codeph">USER</code> }</p>
                           <p>请参阅<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-90A26490-435F-42C9-ADCB-D3D81AB2E81C" title="您可以在作业日志中查看有关作业运行，作业状态更改和作业失败的信息。作业日志显示本地和远程作业的结果。">查看作业日志</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>查询其他数据字典视图</p>
                           <p>查询视图（如<code class="codeph">DBA_SCHEDULER_RUNNING_JOBS</code>和<code class="codeph">DBA_SCHEDULER_RUNNING_CHAINS</code>以显示正在运行的作业和链的状态和详细信息。
                           </p>
                        </li>
                        <li>
                           <p>编写从Scheduler接收作业状态事件的应用程序</p>
                           <p>请参阅<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-CAC644C1-854D-44FB-8FF6-BE6DDE809B4F" title="调度程序可以在作业更改状态时引发事件。">使用计划程序引发的事件监视作业状态</a> ”</span></p>
                        </li>
                        <li>
                           <p>配置作业以在状态更改时发送电子邮件通知</p>
                           <p>请参阅<span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E55607CC-993A-4380-A76D-8BA398EC4A08" title="调度程序在作业更改状态时发送电子邮件。">使用电子邮件通知监视作业状态</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E9B234FF-C7F3-44B0-AEC8-A997353C414F" title="您可以通过多种不同方式监控作业。">监视作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-5799E3CA-4759-4DCB-9919-AADB461FAFB8" name="GUID-5799E3CA-4759-4DCB-9919-AADB461FAFB8"></a><h4 id="ADMIN-GUID-5799E3CA-4759-4DCB-9919-AADB461FAFB8" class="sect4"><span class="enumeration_section">29.10.2</span>工作日志</h4>
                  <p>您可以在作业日志中查看本地和远程作业的结果。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-90A26490-435F-42C9-ADCB-D3D81AB2E81C">查看作业日志</a><br>您可以在作业日志中查看有关作业运行，作业状态更改和作业失败的信息。作业日志显示本地和远程作业的结果。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-198FED95-7867-4058-8111-2B825DF0FD00">运行细节</a><br>对于每一行<code class="codeph">*_SCHEDULER_JOB_LOG</code>的量，操作<code class="codeph">RUN</code> ， <code class="codeph">RETRY_RUN</code> ，或<code class="codeph">RECOVERY_RUN</code> ，存在的一个对应行<code class="codeph">*_SCHEDULER_JOB_RUN_DETAILS</code>图。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-45CA70E5-F013-4B0D-AC67-152407FB1727">作业和作业类中日志级别的优先级</a><br>作业和作业类都具有<code class="codeph">logging_level</code>属性。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E9B234FF-C7F3-44B0-AEC8-A997353C414F" title="您可以通过多种不同方式监控作业。">监视作业</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13096"></a><a id="ADMIN12517"></a><div class="props_rev_3"><a id="GUID-90A26490-435F-42C9-ADCB-D3D81AB2E81C" name="GUID-90A26490-435F-42C9-ADCB-D3D81AB2E81C"></a><h5 id="ADMIN-GUID-90A26490-435F-42C9-ADCB-D3D81AB2E81C" class="sect5"><span class="enumeration_section">29.10.2.1</span>查看作业日志</h5>
                     <div>
                        <p>您可以在作业日志中查看有关作业运行，作业状态更改和作业失败的信息。作业日志显示本地和远程作业的结果。</p>
                        <div class="section">
                           <p>作业日志实现为以下两个数据字典视图：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">* _SCHEDULER_JOB_LOG</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">* _SCHEDULER_JOB_RUN_DETAILS</code></p>
                              </li>
                           </ul>
                           <p>根据有效的日志记录级别，Scheduler可以在作业运行时以及创建，删除，启用作业等时创建作业日志条目。对于具有重复计划的作业，计划程序在作业日志中生成多个条目 - 每个作业实例一个条目。每个日志条目都提供有关特定运行的信息，例如作业完成状态。</p>
                           <p>以下示例显示了<code class="codeph">max_runs</code>属性值为4的重复作业的作业日志条目：</p><pre class="oac_no_warn" dir="ltr">SELECT job_name，job_class，operation，status FROM USER_SCHEDULER_JOB_LOG; JOB_NAME JOB_CLASS操作状态---------------- -------------------- ---------- ----- ---------- JOB1 CLASS1 RUN SUCCEEDED JOB1 CLASS1 RUN成功JOB1 CLASS1 RUN成功JOB1 CLASS1 RUN成功完成JOB1 CLASS1已完成</pre><p>您可以通过设置作业或作业类的<code class="codeph">logging_level</code>属性来控制信息写入作业日志的频率。<a href="scheduling-jobs-with-oracle-scheduler.html#GUID-90A26490-435F-42C9-ADCB-D3D81AB2E81C__CHDFDFAB" title="该表有两列名为Logging Level和Description。它描述了作业或作业类的四种可能的日志记录级别。">表29-11</a>显示了<code class="codeph">logging_level</code>的可能值。
                           </p>
                           <div class="tblformal" id="GUID-90A26490-435F-42C9-ADCB-D3D81AB2E81C__CHDFDFAB">
                              <p class="titleintable">表29-11作业记录级别</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="作业记录级别" width="100%" border="1" summary="This table has two columns named Logging Level and Description. It describes the four possible logging levels for a job or job class." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="50%" id="d268851e14847">记录级别</th>
                                       <th align="left" valign="bottom" width="50%" id="d268851e14850">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="50%" id="d268851e14855" headers="d268851e14847 ">
                                          <p><code class="codeph">DBMS_SCHEDULER.LOGGING_OFF</code></p>
                                       </td>
                                       <td align="left" valign="top" width="50%" headers="d268851e14855 d268851e14850 ">
                                          <p>不执行任何日志记录。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="50%" id="d268851e14863" headers="d268851e14847 ">
                                          <p><code class="codeph">DBMS_SCHEDULER.LOGGING_FAILED_RUNS</code></p>
                                       </td>
                                       <td align="left" valign="top" width="50%" headers="d268851e14863 d268851e14850 ">
                                          <p>仅当作业失败时才会生成日志条目。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="50%" id="d268851e14871" headers="d268851e14847 ">
                                          <p><code class="codeph">DBMS_SCHEDULER.LOGGING_RUNS</code></p>
                                       </td>
                                       <td align="left" valign="top" width="50%" headers="d268851e14871 d268851e14850 ">
                                          <p>每次运行作业时都会生成一个日志条目。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="50%" id="d268851e14879" headers="d268851e14847 ">
                                          <p><code class="codeph">DBMS_SCHEDULER.LOGGING_FULL</code></p>
                                       </td>
                                       <td align="left" valign="top" width="50%" headers="d268851e14879 d268851e14850 ">
                                          <p>每次作业运行时以及对作业执行的每个操作都会生成日志条目，包括创建，启用/禁用，更新（使用<code class="codeph">SET_ATTRIBUTE</code> ），停止和删除。
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>作业运行的日志条目在作业运行成功完成，失败或停止之后才会生成。</p>
                           <p>以下示例显示完整作业生命周期的作业日志条目。在这种情况下，作业类的日志记录级别为<code class="codeph">LOGGING_FULL</code> ，作业是非重复作业。第一次成功运行后，作业再次启用，因此再次运行。然后它被停止并掉落。
                           </p><pre class="oac_no_warn" dir="ltr">SELECT to_char（log_date，'DD-MON-YY HH24：MI：SS'）TIMESTAMP，job_name，job_class，operation，status FROM USER_SCHEDULER_JOB_LOG WHERE job_name ='JOB2'ORDER BY log_date; TIMESTAMP JOB_NAME JOB_CLASS操作状态-------------------- --------- ---------- ------ ---- --------- 18-DEC-07 23:10:56 JOB2 CLASS1 CREATE 18-DEC-07 23:12:01 JOB2 CLASS1 UPDATE 18-DEC-07 23:12:31 JOB2 CLASS1 ENABLE 18-DEC-07 23:12:41 JOB2 CLASS1 RUN SUCCEEDED 18-DEC-07 23:13:12 JOB2 CLASS1 ENABLE 18-DEC-07 23:13:18 JOB2 RUN STOPPED 18-DEC-07 23:19 ：36 JOB2 CLASS1 DROP</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5799E3CA-4759-4DCB-9919-AADB461FAFB8" title="您可以在作业日志中查看本地和远程作业的结果。">作业日志</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12518"></a><div class="props_rev_3"><a id="GUID-198FED95-7867-4058-8111-2B825DF0FD00" name="GUID-198FED95-7867-4058-8111-2B825DF0FD00"></a><h5 id="ADMIN-GUID-198FED95-7867-4058-8111-2B825DF0FD00" class="sect5"><span class="enumeration_section">29.10.2.2</span>运行细节</h5>
                     <div>
                        <p>对于每一行<code class="codeph">*_SCHEDULER_JOB_LOG</code>的量，操作<code class="codeph">RUN</code> ， <code class="codeph">RETRY_RUN</code> ，或<code class="codeph">RECOVERY_RUN</code> ，存在的一个对应行<code class="codeph">*_SCHEDULER_JOB_RUN_DETAILS</code>图。
                        </p>
                        <div class="section">
                           <p>来自两个不同视图的行与其<code class="codeph">LOG_ID</code>列相关联。您可以查阅运行详细信息视图以确定作业失败或停止的原因。
                           </p><pre class="oac_no_warn" dir="ltr">SELECT to_char（log_date，'DD-MON-YY HH24：MI：SS'）TIMESTAMP，job_name，status，SUBSTR（additional_info，1,40）ADDITIONAL_INFO FROM user_scheduler_job_run_details ORDER BY log_date; TIMESTAMP JOB_NAME状态ADDITIONAL_INFO -------------------- ---------- --------- ------- --------------------------------- 18-DEC-07 23:12:41 JOB2成功于18-DEC-07 23:12:18 JOB2 STOPPED REASON =“停止用户调用的工作：'SYSTEM'19-DEC-07 14:12:20 REMOTE_16 FAILED ORA-29273：HTTP请求失败ORA-06512</pre><p>运行详细信息视图还包含实际作业开始时间和持续时间。</p>
                           <p>您还可以使用属性<code class="codeph">STORE_OUTPUT</code>来指示<code class="codeph">*_SCHEDULER_JOB_RUN_DETAILS</code>视图以存储发送到<code class="codeph">stdout</code>以用于外部作业的输出或用于数据库作业的<code class="codeph">DBMS_OUTPUT</code> 。当<code class="codeph">STORE_OUTPUT</code>设置为<code class="codeph">TRUE</code>且<code class="codeph">LOGGING_LEVEL</code>指示应记录作业运行时，将收集所有输出并将其放入此视图的<code class="codeph">BINARY_OUTPUT</code>列中。可以从<code class="codeph">OUTPUT</code>列查询<code class="codeph">char</code>表示。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5799E3CA-4759-4DCB-9919-AADB461FAFB8" title="您可以在作业日志中查看本地和远程作业的结果。">作业日志</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12519"></a><div class="props_rev_3"><a id="GUID-45CA70E5-F013-4B0D-AC67-152407FB1727" name="GUID-45CA70E5-F013-4B0D-AC67-152407FB1727"></a><h5 id="ADMIN-GUID-45CA70E5-F013-4B0D-AC67-152407FB1727" class="sect5"><span class="enumeration_section">29.10.2.3</span>作业和作业类中日志级别的优先级</h5>
                     <div>
                        <p>作业和作业类都具有<code class="codeph">logging_level</code>属性。
                        </p>
                        <div class="section">
                           <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-90A26490-435F-42C9-ADCB-D3D81AB2E81C__CHDFDFAB" title="该表有两列名为Logging Level和Description。它描述了作业或作业类的四种可能的日志记录级别。">表29-11</a>中列出了此属性的可能值。作业类的默认日志记录级别为<code class="codeph">LOGGING_RUNS</code> ，各个作业的默认级别为<code class="codeph">LOGGING_OFF</code> 。如果作业类的日志记录级别高于类中作业的日志记录级别，则作业类的日志记录级别优先。因此，默认情况下，所有作业运行都记录在作业日志中。
                           </p>
                           <p>对于具有非常短且高频率的作业的作业类，记录每次运行的开销可能过多，您可能选择关闭日志记录或仅在作业失败时设置日志记录。但是，您可能希望完全记录特定类中作业发生的所有事件，在这种情况下，您将为该类启用完整日志记录。</p>
                           <p>为确保所有作业都有日志记录，单个作业创建者必须无法关闭日志记录。Scheduler通过使类指定级别成为记录作业信息的最低级别来支持此功能。作业创建者只能为单个作业启用更多日志记录，而不是更少。因此，将所有单个作业日志记录级别设置为<code class="codeph">LOGGING_OFF</code>可确保按类中的指定记录类中的所有作业。
                           </p>
                           <p>提供此功能是为了进行调试。例如，如果特定于类的级别设置为记录作业运行并且在作业级别关闭日志记录，则调度程序仍会记录作业运行。但是，如果作业创建者打开完全日志记录并且特定于类的级别设置为仅记录运行，则作业的较高日志记录级别优先，并记录此单个作业上的所有操作。这样，最终用户可以通过打开完整日志来测试他的工作。</p>
                           <p>要设置单个作业的日志记录级别，必须在该作业上使用<code class="codeph">SET_ATTRIBUTE</code>过程。例如，要为名为<code class="codeph">mytestjob</code>的作业打开完整日志记录，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.SET_ATTRIBUTE（'mytestjob'，'logging_level'，DBMS_SCHEDULER.LOGGING_FULL）;结束; /</pre><p>只有具有<code class="codeph">MANAGE</code> <code class="codeph">SCHEDULER</code>权限的用户才能设置作业类的日志记录级别。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-45CA70E5-F013-4B0D-AC67-152407FB1727__GUID-219A0B34-DE8B-4A34-AC2D-06F9F90AEBFB">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="administering-oracle-scheduler.html#GUID-70A0379C-99CE-4508-947F-BE7EA3D45A13" title="Scheduler支持两种日志：作业日志和窗口日志。">监视和管理窗口和作业日志</a> ”</span> ，以获取有关设置作业类日志记录级别的更多信息</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-5799E3CA-4759-4DCB-9919-AADB461FAFB8" title="您可以在作业日志中查看本地和远程作业的结果。">作业日志</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN13387"></a><a id="ADMIN13386"></a><div class="props_rev_3"><a id="GUID-9B29C60A-DF63-4011-8633-BEBC4FD0FC48" name="GUID-9B29C60A-DF63-4011-8633-BEBC4FD0FC48"></a><h4 id="ADMIN-GUID-9B29C60A-DF63-4011-8633-BEBC4FD0FC48" class="sect4"><span class="enumeration_section">29.10.3</span>监视多个目标作业</h4>
                  <div>
                     <p>对于多目标作业，整体父作业状态取决于子作业的结果。</p>
                     <p>例如，如果所有子作业都成功，则父作业状态将设置为<code class="codeph">SUCCEEDED</code> 。如果全部失败，则父作业状态将设置为<code class="codeph">FAILED</code> 。如果某些操作失败并且某些操作成功，则父作业状态将设置为<code class="codeph">SOME</code> <code class="codeph">FAILED</code> 。</p>
                     <p>由于某些目的地可能出现延迟子作业启动的情况，因此在完成父作业状态之前可能会有很长时间的延迟。对于重复多目标作业，甚至可能存在这样的情况：一些子作业在下一次计划的运行中，而其他子作业仍在上一次计划的运行中。在这种情况下，父作业状态设置为<code class="codeph">INCOMPLETE</code> 。然而，最终，滞后的子女工作可能会赶上他们的兄弟姐妹，在这种情况下，可以确定父母工作的最终状态。
                     </p>
                     <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-9B29C60A-DF63-4011-8633-BEBC4FD0FC48__CIAHFIBI" title="此表有2列：第一列命名一个调度程序数据字典视图，第二列解释该视图中多目标作业的内容。">表29-12</a>列出了多目标作业的作业监视视图的内容。
                     </p>
                     <div class="tblformal" id="GUID-9B29C60A-DF63-4011-8633-BEBC4FD0FC48__CIAHFIBI">
                        <p class="titleintable">表29-12多目标作业的计划程序数据字典视图内容</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="调度程序数据字典查看多目标作业的内容" width="100%" border="1" summary="This table has 2 columns: Column one names one of the scheduler data dictionary views, and column 2 explains what’s in that view for multi-dest jobs." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="50%" id="d268851e15146">查看名称</th>
                                 <th align="left" valign="bottom" width="50%" id="d268851e15149">内容</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d268851e15154" headers="d268851e15146 ">
                                    <p><code class="codeph">* _SCHEDULER_JOBS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e15154 d268851e15149 ">
                                    <p>父作业的一个条目</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d268851e15162" headers="d268851e15146 ">
                                    <p><code class="codeph">* _SCHEDULER_RUNNING_JOBS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e15162 d268851e15149 ">
                                    <p>父作业启动时的一个条目和每个正在运行的子作业的条目</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d268851e15170" headers="d268851e15146 ">
                                    <p><code class="codeph">* _SCHEDULER_JOB_LOG</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e15170 d268851e15149 ">
                                    <p>父作业启动时的一个条目（operation =' <code class="codeph">MULTIDEST_START</code> '），子作业完成时每个子作业的一个条目，以及最后一个子作业完成后父作业完成的一个条目（操作= ' <code class="codeph">MULTIDEST_RUN</code> '）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d268851e15184" headers="d268851e15146 ">
                                    <p><code class="codeph">* _SCHEDULER_JOB_RUN_DETAILS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e15184 d268851e15149 ">
                                    <p>子作业完成时每个子作业的一个条目，以及最后一个子作业完成时父作业的一个条目，从而完成父作业</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d268851e15192" headers="d268851e15146 ">
                                    <p><code class="codeph">* _SCHEDULER_JOB_DESTS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d268851e15192 d268851e15149 ">
                                    <p>父作业的每个目标的一个条目</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a id="d268851e15200" class="indexterm-anchor"></a>在<code class="codeph">*_SCHEDULER_JOB_DESTS</code>视图中，您可以确定分配给每个子作业的唯一作业目标ID（ <code class="codeph">job_dest_id</code> ）。此ID表示作业，凭证和目标的唯一组合。您可以将此ID与<code class="codeph">STOP_JOB</code>过程一起使用。您还可以使用<code class="codeph">*_SCHEDULER_JOB_DESTS</code>视图监视每个子作业的作业状态。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-9B29C60A-DF63-4011-8633-BEBC4FD0FC48__GUID-A3182165-03F3-46A5-B60F-996027A02D8A">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="oracle-scheduler-concepts.html#GUID-6834E451-C8C9-425E-A93D-264733E36A76" title="多目标作业是一个作业，其实例在多个目标数据库或主机上运行，但可以从一个中央数据库进行控制和监视。">多目标工作</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-480E01D8-F3E9-444F-B768-AB39C4144562" title="您可以创建在多个目标上运行的作业，但这可以从一个位置进行管理。">创建多目标作业</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="administering-oracle-scheduler.html#GUID-3ADE1320-1D33-4550-9ECA-A7779CAFF93F" title="您可以查询一组视图以获取有关Scheduler的信息。">调度程序数据字典视图</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E9B234FF-C7F3-44B0-AEC8-A997353C414F" title="您可以通过多种不同方式监控作业。">监视作业</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12445"></a><div class="props_rev_3"><a id="GUID-CAC644C1-854D-44FB-8FF6-BE6DDE809B4F" name="GUID-CAC644C1-854D-44FB-8FF6-BE6DDE809B4F"></a><h4 id="ADMIN-GUID-CAC644C1-854D-44FB-8FF6-BE6DDE809B4F" class="sect4"><span class="enumeration_section">29.10.4</span>使用调度程序<span class="enumeration_section">引发的</span>事件监视作业状态</h4>
                  <p>调度程序可以在作业更改状态时引发事件。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-1061A826-AAF0-4D1A-ACFE-B1FFA5B7904B">关于工作状态事件</a><br>您可以配置作业，以便Scheduler在作业更改状态时引发事件。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-F5885C9F-D0A9-4128-B42A-0E694A87A9C6">改变工作以提高工作状态事件</a><br>要为作业启用作业状态事件，可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">SET_ATTRIBUTE</code>过程打开<code class="codeph">raise_events</code>作业属性中的位标志。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-15B6C4DA-8AA4-4CBF-8403-9F720268B92B">使用您的应用程序使用作业状态事件</a><br>要使用作业状态事件，您的应用程序必须订阅Scheduler事件队列<code class="codeph">SYS.SCHEDULER$_EVENT_QUEUE</code> 。此队列是一个安全队列，由<code class="codeph">SYS</code>拥有。</li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E9B234FF-C7F3-44B0-AEC8-A997353C414F" title="您可以通过多种不同方式监控作业。">监视作业</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13299"></a><a id="ADMIN13298"></a><div class="props_rev_3"><a id="GUID-1061A826-AAF0-4D1A-ACFE-B1FFA5B7904B" name="GUID-1061A826-AAF0-4D1A-ACFE-B1FFA5B7904B"></a><h5 id="ADMIN-GUID-1061A826-AAF0-4D1A-ACFE-B1FFA5B7904B" class="sect5"><span class="enumeration_section">29.10.4.1</span>关于作业状态事件</h5>
                     <div>
                        <p>您可以配置作业，以便Scheduler在作业更改状态时引发事件。</p>
                        <p>调度程序可以在作业启动时，作业完成时，作业超过其分配的运行时等时引发事件，等等。事件的使用者是您的应用程序，它会响应事件采取一些操作。例如，如果由于系统负载较高，作业仍未在其计划的启动时间后30分钟启动，则调度程序可以引发一个事件，该事件会导致处理程序应用程序停止较低优先级的作业以释放系统资源。Scheduler可以为本地（常规）作业，远程数据库作业，本地外部作业和远程外部作业引发作业状态事件。</p>
                        <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-1061A826-AAF0-4D1A-ACFE-B1FFA5B7904B__CIAHCEBE" title="此表描述了raise_events属性中位标志的事件类型">表29-13</a>说明了Scheduler引发的作业状态事件类型。
                        </p>
                        <div class="tblformal" id="GUID-1061A826-AAF0-4D1A-ACFE-B1FFA5B7904B__CIAHCEBE">
                           <p class="titleintable">表29-13计划程序引发的作业状态事件类型</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="调度程序引发的作业状态事件类型" width="100%" border="1" summary="This table describes the event types that are bit flags in the raise_events attribute" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="46%" id="d268851e15375">事件类型</th>
                                    <th align="left" valign="bottom" width="54%" id="d268851e15378">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d268851e15383" headers="d268851e15375 ">
                                       <p><code class="codeph">JOB_ALL_EVENTS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d268851e15383 d268851e15378 ">
                                       <p>不是事件，而是一个常量，它为您提供了一个简单的方法来启用所有事件</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d268851e15391" headers="d268851e15375 ">
                                       <p><code class="codeph">job_broken</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d268851e15391 d268851e15378 ">
                                       <p>作业已被禁用并已更改为<code class="codeph">BROKEN</code>状态，因为它超出了<code class="codeph">max_failures</code>作业属性定义的失败次数</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d268851e15405" headers="d268851e15375 ">
                                       <p><code class="codeph">JOB_CHAIN_STALLED</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d268851e15405 d268851e15378 ">
                                       <p>运行链的作业已进入<code class="codeph">CHAIN_STALLED</code>状态。如果没有步骤正在运行或计划运行且链的<code class="codeph">evaluation_interval</code>设置为<code class="codeph">NULL</code>则运行链将停止运行。除非有人工干预，否则链中不会取得任何进展。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d268851e15422" headers="d268851e15375 ">
                                       <p><code class="codeph">JOB_COMPLETED</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d268851e15422 d268851e15378 ">
                                       <p>作业已完成，因为它已达到<code class="codeph">max_runs</code>或<code class="codeph">end_date</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d268851e15435" headers="d268851e15375 ">
                                       <p><code class="codeph">job_disabled</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d268851e15435 d268851e15378 ">
                                       <p>调度程序或通过调用<code class="codeph">SET_ATTRIBUTE</code>禁用作业</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d268851e15445" headers="d268851e15375 ">
                                       <p><code class="codeph">job_failed</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d268851e15445 d268851e15378 ">
                                       <p>作业失败，无论是通过抛出错误还是异常终止</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d268851e15453" headers="d268851e15375 ">
                                       <p><code class="codeph">job_over_max_dur</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d268851e15453 d268851e15378 ">
                                       <p>作业超出了<code class="codeph">max_run_duration</code>属性指定的最大运行持续时间。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d268851e15464" headers="d268851e15375 ">
                                       <p><code class="codeph">JOB_RUN_COMPLETED</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d268851e15464 d268851e15378 ">
                                       <p>作业运行失败，成功或停止</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d268851e15472" headers="d268851e15375 ">
                                       <p><code class="codeph">job_sch_lim_reached</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d268851e15472 d268851e15378 ">
                                       <p>达到了工作的进度限制。作业未启动，因为启动作业的延迟超出了<code class="codeph">schedule_limit</code>作业属性的值。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d268851e15483" headers="d268851e15375 ">
                                       <p><code class="codeph">job_started</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d268851e15483 d268851e15378 ">
                                       <p>工作开始了</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d268851e15491" headers="d268851e15375 ">
                                       <p><code class="codeph">JOB_STOPPED</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d268851e15491 d268851e15378 ">
                                       <p>通过调用<code class="codeph">STOP_JOB</code>来停止作业</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d268851e15502" headers="d268851e15375 ">
                                       <p><code class="codeph">job_succeeded</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d268851e15502 d268851e15378 ">
                                       <p>工作顺利完成</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>您可以通过设置<code class="codeph">raise_events</code>作业属性来启用作业状态事件。默认情况下，作业不会引发任何作业状态事件。
                        </p>
                        <p>Scheduler使用Oracle Database Advanced Queuing来引发事件。在引发作业状态更改事件时，Scheduler会将消息排入默认事件队列。您的应用程序订阅此队列，使事件消息出列，并采取适当的操作。</p>
                        <p>为作业启用作业状态更改事件后，Scheduler会通过将消息<code class="codeph">SYS.SCHEDULER$_EVENT_QUEUE</code> Scheduler事件队列<code class="codeph">SYS.SCHEDULER$_EVENT_QUEUE</code>引发这些事件。此队列是一个安全队列，因此根据您的应用程序，您可能必须配置队列以使某些用户能够对其执行操作。
                        </p>
                        <p>为防止Scheduler事件队列无限增长，Scheduler引发的事件默认在24小时后到期。您可以通过使用<code class="codeph">DBMS_SCHEDULER.SET_SCHEDULER_ATTRIBUTE</code>过程设置<code class="codeph">event_expiry_time</code> Scheduler属性来更改此到期时间。过期事件将从事件队列中删除。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-1061A826-AAF0-4D1A-ACFE-B1FFA5B7904B__GUID-C71A0A8F-45C1-4EE7-A997-BEEBE85B7941">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ADQUE-GUID-5A2D60AC-21B1-4F6E-BA1E-78071CA98FD4" target="_blank"><span class="italic">“Oracle数据库高级队列用户指南”</span></a> ，了解有关使用Oracle数据库高级队列配置安全队列的信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_SCHEDULER.SET_SCHEDULER_ATTRIBUTE</code>过程的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72433" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-CAC644C1-854D-44FB-8FF6-BE6DDE809B4F" title="调度程序可以在作业更改状态时引发事件。">使用计划程序引发的事件监视作业状态</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12446"></a><div class="props_rev_3"><a id="GUID-F5885C9F-D0A9-4128-B42A-0E694A87A9C6" name="GUID-F5885C9F-D0A9-4128-B42A-0E694A87A9C6"></a><h5 id="ADMIN-GUID-F5885C9F-D0A9-4128-B42A-0E694A87A9C6" class="sect5"><span class="enumeration_section">29.10.4.2</span>改变工作以提高工作状态事件</h5>
                     <div>
                        <p>要为作业启用作业状态事件，可以使用<code class="codeph">DBMS_SCHEDULER</code>包中的<code class="codeph">SET_ATTRIBUTE</code>过程打开<code class="codeph">raise_events</code>作业属性中的位标志。
                        </p>
                        <div class="section">
                           <p>每个位标志表示用于引发事件的不同作业状态。例如，打开最低有效位可以<code class="codeph">started</code> <code class="codeph">job</code> <code class="codeph">started</code>事件。要在一次调用中启用多个状态更改事件类型，请将所需的位标志值一起添加，并将结果作为参数提供给<code class="codeph">SET_ATTRIBUTE</code> 。</p>
                           <p>以下示例为作业<code class="codeph">dw_reports</code>启用多个状态更改事件。它启用以下事件类型，这两种类型都表示某种错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">JOB_FAILED</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">JOB_SCH_LIM_REACHED</code></p>
                              </li>
                           </ul><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.SET_ATTRIBUTE（'dw_reports'，'raise_events'，DBMS_SCHEDULER.JOB_FAILED + DBMS_SCHEDULER.JOB_SCH_LIM_REACHED）;结束; /</pre><div class="infoboxnote" id="GUID-F5885C9F-D0A9-4128-B42A-0E694A87A9C6__GUID-F81BC4B1-62E4-4077-93BD-25F5DB9E7F43">
                              <p class="notep1">注意：</p>
                              <p>您不需要使用<code class="codeph">raise_events</code>作业属性启用<code class="codeph">JOB_OVER_MAX_DUR</code>事件;它始终启用。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-F5885C9F-D0A9-4128-B42A-0E694A87A9C6__GUID-13A32717-E15F-4725-AD90-27E6F670F1D8">
                           <p class="notep1">也可以看看：</p>
                           <p><code class="codeph">DBMS_SCHEDULER</code>的讨论。 <a href="../arpls/DBMS_SCHEDULER.html#ARPLS72399" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a>中的<code class="codeph">SET_ATTRIBUTE</code>用于<code class="codeph">SET_ATTRIBUTE</code>作业状态位标志的名称和值</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-CAC644C1-854D-44FB-8FF6-BE6DDE809B4F" title="调度程序可以在作业更改状态时引发事件。">使用计划程序引发的事件监视作业状态</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12679"></a><a id="ADMIN12447"></a><div class="props_rev_3"><a id="GUID-15B6C4DA-8AA4-4CBF-8403-9F720268B92B" name="GUID-15B6C4DA-8AA4-4CBF-8403-9F720268B92B"></a><h5 id="ADMIN-GUID-15B6C4DA-8AA4-4CBF-8403-9F720268B92B" class="sect5"><span class="enumeration_section">29.10.4.3</span>使用您的应用程序使用作业状态事件</h5>
                     <div>
                        <p>要使用作业状态事件，您的应用程序必须订阅Scheduler事件队列<code class="codeph">SYS.SCHEDULER$_EVENT_QUEUE</code> 。此队列是一个安全队列，由<code class="codeph">SYS</code>拥有。</p>
                        <div class="section">
                           <p>要为用户创建此队列的订阅，请执行以下操作：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以<code class="codeph">SYS</code>用户或具有<code class="codeph">MANAGE</code> <code class="codeph">ANY</code> <code class="codeph">QUEUE</code>权限的用户身份登录数据库。</span></li>
                           <li class="stepexpand"><span>使用新代理或现有代理订阅队列。</span></li>
                           <li class="stepexpand"><span>运行包过程<code class="codeph">DBMS_AQADM.ENABLE_DB_ACCESS</code> ，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.ENABLE_DB_ACCESS（ <span class="italic">agent_name</span> ， <span class="italic">db_username</span> ）;</pre><p>其中<span class="italic"><code class="codeph">agent_name</code></span>引用您用于订阅事件队列的代理， <span class="italic"><code class="codeph">db_username</code></span>是您要为其创建订阅的用户。
                                 </p>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>无需向用户授予出列权限。在Scheduler事件队列中将dequeue特权授予<code class="codeph">PUBLIC</code> 。</p>
                           <p>作为替代方案，用户可以使用<code class="codeph">ADD_EVENT_QUEUE_SUBSCRIBER</code>过程订阅Scheduler事件队列，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">DBMS_SCHEDULER.ADD_EVENT_QUEUE_SUBSCRIBER（ <span class="italic">subscriber_name</span> ）;</pre><p>其中<span class="italic"><code class="codeph">subscriber_name</code></span>是用于订阅Scheduler事件队列的Oracle数据库高级队列（AQ）代理的名称。（如果为<code class="codeph">NULL</code> ，则创建一个代理，其名称是主叫用户的用户名。）此调用都会创建对Scheduler事件队列的预订，并授予用户使用指定代理出列的权限。订阅是基于规则的。该规则允许用户仅查看用户拥有的作业引发的事件，并过滤掉所有其他消息。订阅到位后，用户可以定期轮询消息或向AQ注册以进行通知。
                           </p>
                           <p>有关更多信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ADQUE2739" target="_blank"><span class="italic">Oracle数据库高级队列用户指南”</span></a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-CAC644C1-854D-44FB-8FF6-BE6DDE809B4F" title="调度程序可以在作业更改状态时引发事件。">使用计划程序引发的事件监视作业状态</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="sect5"><a id="SCHEDULEREVENTQUEUE-F8F2A52E" name="SCHEDULEREVENTQUEUE-F8F2A52E"></a><h6 id="ADMIN-SCHEDULEREVENTQUEUE-F8F2A52E" class="sect6"><span class="enumeration_section">29.10.4.3.1</span>调度程序事件队列</h6>
                        <div>
                           <div class="section">Scheduler事件队列<code class="codeph">SYS.SCHEDULER$_EVENT_QUEUE</code>的类型为<code class="codeph">scheduler$_event_info</code> 。有关此类型的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72254" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div>
               </div><a id="ADMIN13300"></a><div class="props_rev_3"><a id="GUID-E55607CC-993A-4380-A76D-8BA398EC4A08" name="GUID-E55607CC-993A-4380-A76D-8BA398EC4A08"></a><h4 id="ADMIN-GUID-E55607CC-993A-4380-A76D-8BA398EC4A08" class="sect4"><span class="enumeration_section">29.10.5</span>使用电子邮件通知监视作业状态</h4>
                  <p>调度程序在作业更改状态时发送电子邮件。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-35ED68F5-146A-477F-AB06-EB1FCE5CF08C">关于电子邮件通知</a><br>您可以将作业配置为在更改状态时发送电子邮件通知。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-0B9927D4-7366-4345-8F93-B624F64C9367">为作业添加电子邮件通知</a><br>您使用<code class="codeph">DBMS_SCHEDULER.ADD_JOB_EMAIL_NOTIFICATION</code>包过程为作业添加电子邮件通知。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-BF7F5416-B9A6-44AC-A231-0ABDDF6CD8B7">删除作业的电子邮件通知</a><br>您使用<code class="codeph">DBMS_SCHEDULER.REMOVE_JOB_EMAIL_NOTIFICATION</code>程序包过程删除作业的电子邮件通知。
                        </li>
                        <li class="ulchildlink"><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-49605696-1DB4-4F27-9823-5C12EBE45426">查看有关电子邮件通知的信息</a><br>您可以通过查询视图<code class="codeph">*_SCHEDULER_NOTIFICATIONS</code>来查看有关当前电子邮件通知的<code class="codeph">*_SCHEDULER_NOTIFICATIONS</code> 。</li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E9B234FF-C7F3-44B0-AEC8-A997353C414F" title="您可以通过多种不同方式监控作业。">监视作业</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13301"></a><div class="props_rev_3"><a id="GUID-35ED68F5-146A-477F-AB06-EB1FCE5CF08C" name="GUID-35ED68F5-146A-477F-AB06-EB1FCE5CF08C"></a><h5 id="ADMIN-GUID-35ED68F5-146A-477F-AB06-EB1FCE5CF08C" class="sect5"><span class="enumeration_section">29.10.5.1</span>关于电子邮件通知</h5>
                     <div>
                        <p>您可以将作业配置为在更改状态时发送电子邮件通知。</p>
                        <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-1061A826-AAF0-4D1A-ACFE-B1FFA5B7904B__CIAHCEBE" title="此表描述了raise_events属性中位标志的事件类型">表29-13</a>列出了可以发送电子邮件的作业状态事件。电子邮件通知可以发送给多个收件人，并且可以由您指定的作业状态事件列表中的任何事件触发。您还可以提供过滤条件，并仅生成与过滤条件匹配的通知作业状态事件。您可以在邮件的主题和正文中包含作业所有者，作业名称，事件类型，错误代码和错误消息等变量。在发送电子邮件通知之前，Scheduler会自动为这些变量设置值。
                        </p>
                        <p>您可以为单个作业配置许多作业状态电子邮件通知。通知可能因作业状态事件列表，收件人和筛选条件而异。</p>
                        <p>例如，您可以配置作业，以便在作业失败时向主DBA和其中一个高级DBA发送电子邮件，错误代码为600或700。您还可以配置相同的作业，以便在作业无法在其预定时间启动时仅向主DBA发送通知。</p>
                        <p>在配置作业以发送电子邮件通知之前，必须将Scheduler属性<code class="codeph">email_server</code>设置为用于发送电子邮件的SMTP服务器的地址。您还可以选择将Scheduler属性<code class="codeph">email_sender</code>设置为那些未指定发件人的作业的默认发件人电子邮件地址。
                        </p>
                        <p>调度程序在与SMTP服务器通信时包括对SSL和TLS协议的支持。Scheduler还支持需要身份验证的SMTP服务器。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-35ED68F5-146A-477F-AB06-EB1FCE5CF08C__GUID-37F81445-86C1-41B8-B0B5-904D7E634052">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="administering-oracle-scheduler.html#GUID-76FB80A7-737C-4B0F-BE97-FE9F57B6E88C" title="您可以设置多个系统范围的Scheduler首选项。您可以通过在DBMS_SCHEDULER包中使用SET_SCHEDULER_ATTRIBUTE过程设置Scheduler属性来设置这些首选项。">设置计划程序首选项</a> ”</span>以获取有关设置与电子邮件通知相关的属性的详细信息</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E55607CC-993A-4380-A76D-8BA398EC4A08" title="调度程序在作业更改状态时发送电子邮件。">使用电子邮件通知监视作业状态</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13302"></a><div class="props_rev_3"><a id="GUID-0B9927D4-7366-4345-8F93-B624F64C9367" name="GUID-0B9927D4-7366-4345-8F93-B624F64C9367"></a><h5 id="ADMIN-GUID-0B9927D4-7366-4345-8F93-B624F64C9367" class="sect5"><span class="enumeration_section">29.10.5.2</span>为作业添加电子邮件通知</h5>
                     <div>
                        <p>您使用<code class="codeph">DBMS_SCHEDULER.ADD_JOB_EMAIL_NOTIFICATION</code>包过程为作业添加电子邮件通知。
                        </p>
                        <div class="section">
                           <p>例如，以下过程为<code class="codeph">OED_JOB</code>作业添加电子邮件通知：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.ADD_JOB_EMAIL_NOTIFICATION（job_name =&gt;'EOD_JOB'，recipients =&gt;'jsmith @ example.com，rjones @ example.com'，sender =&gt;'do_not_reply@example.com'，subject =&gt;'Scheduler Job Notification-％job_owner ％。％job_name％ - ％event_type％'，body =&gt;'％event_type％发生在％event_timestamp％。％error_message％'，events =&gt;'JOB_FAILED，JOB_BROKEN，JOB_DISABLED，JOB_SCH_LIM_REACHED'）;结束; /</pre><p>请注意<code class="codeph">subject</code>和<code class="codeph">body</code>参数中使用的'％'字符中包含的变量。指定多个收件人和多个事件时，将在引发任何指定事件时通知每个收件人。您可以通过查询<code class="codeph">USER_SCHEDULER_NOTIFICATIONS</code>视图来验证这<code class="codeph">USER_SCHEDULER_NOTIFICATIONS</code> 。</p><pre class="oac_no_warn" dir="ltr">SELECT JOB_NAME，RECIPIENT，来自USER_SCHEDULER_NOTIFICATIONS的活动; JOB_NAME RECIPIENT EVENT ----------- -------------------- ---------------- --- EOD_JOB jsmith@example.com JOB_FAILED EOD_JOB jsmith@example.com JOB_BROKEN EOD_JOB jsmith@example.com JOB_SCH_LIM_REACHED EOD_JOB jsmith@example.com JOB_DISABLED EOD_JOB rjones@example.com JOB_FAILED EOD_JOB rjones@example.com JOB_BROKEN EOD_JOB rjones @ example。 com JOB_SCH_LIM_REACHED EOD_JOB rjones@example.com JOB_DISABLED</pre><p>您为要为作业配置的每组不同通知调用一次<code class="codeph">ADD_JOB_EMAIL_NOTIFICATION</code> 。您必须指定<code class="codeph">job_name</code>和<code class="codeph">recipients</code> 。所有其他参数都有默认值。默认<code class="codeph">sender</code>由Scheduler属性定义，如上一节中所述。有关<code class="codeph">subject</code> ， <code class="codeph">body</code>和<code class="codeph">events</code>参数的默认值，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72277" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考”中</span></a>的<code class="codeph">ADD_JOB_EMAIL_NOTIFICATION</code>过程。
                           </p>
                           <p>以下示例为不同的事件为同一作业配置其他电子邮件通知。此示例接受<code class="codeph">sender</code> ， <code class="codeph">subject</code>和<code class="codeph">body</code>参数的默认值。
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.ADD_JOB_EMAIL_NOTIFICATION（job_name =&gt;'EOD_JOB'，recipients =&gt;'jsmith@example.com'，events =&gt;'JOB_OVER_MAX_DUR'）;结束; /</pre><p>此示例还可以省略<code class="codeph">events</code>参数以接受事件默认值。
                           </p>
                           <p>下一个示例与第一个示例类似，不同之处在于它使用过滤条件指定仅在导致作业失败的错误号为600或700时才发送电子邮件通知。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.ADD_JOB_EMAIL_NOTIFICATION（job_name =&gt;'EOD_JOB'，recipients =&gt;'jsmith @ example.com，rjones @ example.com'，sender =&gt;'do_not_reply@example.com'，subject =&gt;'工作通知 - ％job_owner％ 。％job_name％ - ％event_type％'，body =&gt;'％event_type％at％event_timestamp％。％error_message％'，events =&gt;'JOB_FAILED'，filter_condition =&gt;'：event.error_code = 600或：event.error_code = 700' ）;结束; /</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-0B9927D4-7366-4345-8F93-B624F64C9367__GUID-C349A6C6-24A8-475E-A5C7-7F5056AB532D">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72277" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考中</span></a>的<code class="codeph">ADD_JOB_EMAIL_NOTIFICATION</code>过程</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E55607CC-993A-4380-A76D-8BA398EC4A08" title="调度程序在作业更改状态时发送电子邮件。">使用电子邮件通知监视作业状态</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13303"></a><div class="props_rev_3"><a id="GUID-BF7F5416-B9A6-44AC-A231-0ABDDF6CD8B7" name="GUID-BF7F5416-B9A6-44AC-A231-0ABDDF6CD8B7"></a><h5 id="ADMIN-GUID-BF7F5416-B9A6-44AC-A231-0ABDDF6CD8B7" class="sect5"><span class="enumeration_section">29.10.5.3</span>删除作业的电子邮件通知</h5>
                     <div>
                        <p>您使用<code class="codeph">DBMS_SCHEDULER.REMOVE_JOB_EMAIL_NOTIFICATION</code>程序包过程删除作业的电子邮件通知。
                        </p>
                        <div class="section">
                           <p>例如，以下过程删除<code class="codeph">OED_JOB</code>作业的电子邮件通知：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SCHEDULER.REMOVE_JOB_EMAIL_NOTIFICATION（job_name =&gt;'EOD_JOB'，recipients =&gt;'jsmith @ example.com，rjones @ example.com'，events =&gt;'JOB_DISABLED，JOB_SCH_LIM_REACHED'）;结束; /</pre><p>指定多个收件人和多个事件时，将为每个收件人删除每个指定事件的通知。运行与上一节相同的查询，结果现在如下：</p><pre class="oac_no_warn" dir="ltr">SELECT JOB_NAME，RECIPIENT，来自USER_SCHEDULER_NOTIFICATIONS的活动; JOB_NAME RECIPIENT EVENT ----------- -------------------- ---------------- --- EOD_JOB jsmith@example.com JOB_FAILED EOD_JOB jsmith@example.com JOB_BROKEN EOD_JOB rjones@example.com JOB_FAILED EOD_JOB rjones@example.com JOB_BROKEN</pre><p>用于指定<code class="codeph">REMOVE_JOB_EMAIL_NOTIFICATION</code>参数的其他规则如下：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果将<code class="codeph">events</code>参数保留为<code class="codeph">NULL</code> ，则会删除指定收件人的所有事件的通知。
                                 </p>
                              </li>
                              <li>
                                 <p>如果将<code class="codeph">recipients</code>保留为<code class="codeph">NULL</code> ，则会删除指定事件的所有收件人的通知。
                                 </p>
                              </li>
                              <li>
                                 <p>如果将<code class="codeph">recipients</code>和<code class="codeph">events</code>都保留为<code class="codeph">NULL</code> ，则会删除该作业的所有通知。
                                 </p>
                              </li>
                              <li>
                                 <p>如果包含先前未创建通知的收件人和事件，则不会生成错误。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-BF7F5416-B9A6-44AC-A231-0ABDDF6CD8B7__GUID-08026CB3-1C7A-48BB-BD50-219502A6D9D0">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=ARPLS72387" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考中</span></a>的<code class="codeph">REMOVE_JOB_EMAIL_NOTIFICATION</code>过程</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E55607CC-993A-4380-A76D-8BA398EC4A08" title="调度程序在作业更改状态时发送电子邮件。">使用电子邮件通知监视作业状态</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13304"></a><div class="props_rev_3"><a id="GUID-49605696-1DB4-4F27-9823-5C12EBE45426" name="GUID-49605696-1DB4-4F27-9823-5C12EBE45426"></a><h5 id="ADMIN-GUID-49605696-1DB4-4F27-9823-5C12EBE45426" class="sect5"><span class="enumeration_section">29.10.5.4</span>查看有关电子邮件通知的信息</h5>
                     <div>
                        <p>您可以通过查询视图<code class="codeph">*_SCHEDULER_NOTIFICATIONS</code>来查看有关当前电子邮件通知的<code class="codeph">*_SCHEDULER_NOTIFICATIONS</code> 。</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-49605696-1DB4-4F27-9823-5C12EBE45426__GUID-6D9F55E7-CA93-49E1-BB06-614E18EDA213">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=REFRN20763" target="_blank"><span class="italic">Oracle Database Reference</span></a>有关这些视图的详细信息</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="scheduling-jobs-with-oracle-scheduler.html#GUID-E55607CC-993A-4380-A76D-8BA398EC4A08" title="调度程序在作业更改状态时发送电子邮件。">使用电子邮件通知监视作业状态</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
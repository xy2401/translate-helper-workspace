<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>安全</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Development Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Development Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00"></meta>
      <meta name="dcterms.title" content="Database Development Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96334-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="rwp.html" title="Previous" type="text/html"></link>
      <link rel="next" href="high-availability.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="rwp.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="high-availability.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库开发指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="fundamentals.html" property="item" typeof="WebPage"><span property="name">数据库开发基础</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">安全</li>
            </ol>
            <a id="GUID-986CF5A7-506D-43F4-B6E2-F90654804417" name="GUID-986CF5A7-506D-43F4-B6E2-F90654804417"></a><a id="ADFNS518"></a><a id="ADFNS230"></a>
            
            <h2 id="ADFNS-GUID-986CF5A7-506D-43F4-B6E2-F90654804417" class="sect2"><span class="enumeration_chapter">5</span>安全</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍了在数据库和数据库应用程序中设计安全性的一些基础知识。</p>
               <div class="section">
                  <p class="subhead1" id="GUID-986CF5A7-506D-43F4-B6E2-F90654804417__GUID-C9E297F5-9813-4856-B1FC-D35A788E7956">话题：</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="security.html#GUID-4CE77161-E920-4B78-ADD5-364AFA8059A7">使用Grants_ Roles_和最小权限启用用户访问</a></p>
                  </li>
                  <li>
                     <p><a href="security.html#GUID-B1B9B149-A7CC-412B-8410-A8A0DD74ADCE">自动化数据库登录</a></p>
                  </li>
                  <li>
                     <p><a href="security.html#GUID-1E187378-E87F-4B69-92E1-2EA67A67C808">使用细粒度访问控制控制用户访问</a></p>
                  </li>
                  <li>
                     <p><a href="security.html#GUID-795BBFD7-FDE5-45A1-AD52-E1E9021318F7">使用Invoker和Definer的程序和函数权限</a></p>
                  </li>
                  <li>
                     <p><a href="security.html#GUID-E421C68E-05DD-4948-9774-95F0F080E3C8">管理应用程序的外部过程</a></p>
                  </li>
                  <li>
                     <p><a href="security.html#GUID-6B88545A-3D20-48E2-9407-7B7C7D8EDA00">审核用户活动</a></p>
                  </li>
               </ul>
            </div><a id="ADFNS520"></a><a id="ADFNS519"></a><div class="props_rev_3"><a id="GUID-4CE77161-E920-4B78-ADD5-364AFA8059A7" name="GUID-4CE77161-E920-4B78-ADD5-364AFA8059A7"></a><h3 id="ADFNS-GUID-4CE77161-E920-4B78-ADD5-364AFA8059A7" class="sect3">使用授权，角色和最小权限启用用户访问</h3>
               <div>
                  <div class="section">
                     <p>本主题说明如何向用户授予权限和角色以限制对数据的访问。它还解释了最小特权概念的重要性，将安全应用程序角色作为一种自动过滤掉尝试登录应用程序的用户的方法。</p>
                     <p>用户<span class="bold">权限</span>是执行操作的<span class="bold">权限</span> ，例如更新或删除数据。您可以授予用户执行这些操作的权限。<span class="bold">角色</span>被命名为组合在一起的权限集合，通常用于使用户能够执行与其作业相关的一组任务。例如，名为<code class="codeph">clerk</code>的角色可以使职员执行创建，更新和删除文件等操作。<code class="codeph">clerk_mgr</code>角色可以包括<code class="codeph">clerk</code>角色，以及一些额外的权限，例如批准职员的费用报告或管理他们的绩效评估。
                     </p>
                     <p>向用户授予权限时，应用最小权限原则： <span class="italic">仅授予用户所需的权限</span> 。如果可能，请勿直接向用户授予权限。而是创建一个角色，定义用户需要的权限集，然后向用户授予此角色。例如，授予用户<code class="codeph">fred</code> <code class="codeph">CREATE SESSION</code>权限，以便他可以登录到数据库会话。但是对于他的工作所需的权限，例如<code class="codeph">UPDATE TABLE</code>权限，授予他一个具有这些权限的角色。
                     </p>
                     <p>您可以将应用程序设计为自动向尝试登录的用户授予角色，前提是用户满足您指定的条件。为此，您需要创建一个<span class="bold">安全的应用程序角色</span> ，该角色与PL / SQL过程（或包含多个过程的PL / SQL包）相关联。该过程验证用户：如果用户验证失败，则用户无法登录。如果用户通过了验证，则该过程授予用户一个角色，以便他或她可以使用该应用程序。用户只有在登录应用程序时才具有此角色。用户注销时，该角色将被撤消。
                     </p>
                     <div class="infoboxnotealso" id="GUID-4CE77161-E920-4B78-ADD5-364AFA8059A7__GUID-5520F9DC-96C0-4F17-80F2-F48BB93FF4DA">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG004" target="_blank"><span class="italic">Oracle数据库安全指南</span></a>有关权限和角色授权的详细信息</p>
                           </li>
                           <li>
                              <p><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG524" target="_blank"><span class="italic">Oracle数据库安全指南</span></a>有关安全应用程序角色的更多信</p>
                           </li>
                        </ul>
                     </div>
                     <p><a href="security.html#GUID-4CE77161-E920-4B78-ADD5-364AFA8059A7__BABCBGJE">示例5-1</a>显示了一个安全的应用程序角色过程，允许用户在工作时间（上午8点到下午5点）从一组特定的工作站登录。如果用户通过了这些检查，则会授予用户<code class="codeph">hr_admin</code>角色，然后可以登录该应用程序。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4CE77161-E920-4B78-ADD5-364AFA8059A7__BABCBGJE">
                     <p class="titleinexample">示例5-1限制访问营业时间的安全应用程序角色过程</p><pre class="oac_no_warn" dir="ltr">创建或替换过程hr_admin_role_check AUTHID CURRENT_USER as BEGIN IF（SYS_CONTEXT（'userenv'，'ip_address'）BETWEEN'192.0.2.10'和'192.0.2.20'AND_CHAR（SYSDATE，'HH24'）在8和17之间）执行即将执行'SET ROLE hr_admin';万一;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADFNS522"></a><a id="ADFNS521"></a><div class="props_rev_3"><a id="GUID-B1B9B149-A7CC-412B-8410-A8A0DD74ADCE" name="GUID-B1B9B149-A7CC-412B-8410-A8A0DD74ADCE"></a><h3 id="ADFNS-GUID-B1B9B149-A7CC-412B-8410-A8A0DD74ADCE" class="sect3">自动化数据库登录</h3>
               <div>
                  <div class="section">
                     <p>要自动执行数据库登录，请创建登录触发器以运行可以验证尝试登录应用程序的用户的PL / SQL过程。当用户登录时，触发器执行。登录触发器可以执行多个操作，例如，如果用户验证失败，则生成警报，显示错误消息等。</p>
                     <p><a href="security.html#GUID-B1B9B149-A7CC-412B-8410-A8A0DD74ADCE__BABHBFAG">例5-2</a>显示了一个执行PL / SQL过程的简单登录触发器。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-B1B9B149-A7CC-412B-8410-A8A0DD74ADCE__BABHBFAG">
                     <p class="titleinexample">示例5-2创建登录触发器</p><pre class="oac_no_warn" dir="ltr">创建或替换TRIGGER run_logon_trig登录后数据库BEGIN sec_mgr.check_user_proc;结束;</pre><div class="infoboxnotealso" id="GUID-B1B9B149-A7CC-412B-8410-A8A0DD74ADCE__GUID-3444C3E7-BC33-4B25-A3A3-6E807116BE13">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">CREATE TRIGGER</code>语句的详细信息，请<a href="../lnpls/CREATE-TRIGGER-statement.html#LNPLS01374" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p>有关如何创建运行数据库会话应用程序上下文包的登录触发器的信息，请<a href="../dbseg/using-application-contexts-to-retrieve-user-information.html#DBSEG60634" target="_blank"><span class="italic">参见“Oracle数据库安全指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADFNS523"></a><div class="props_rev_3"><a id="GUID-1E187378-E87F-4B69-92E1-2EA67A67C808" name="GUID-1E187378-E87F-4B69-92E1-2EA67A67C808"></a><h3 id="ADFNS-GUID-1E187378-E87F-4B69-92E1-2EA67A67C808" class="sect3">使用细粒度访问控制控制用户访问</h3>
               <div>
                  <div class="section">
                     <p>有几种方法可以控制用户对应用程序数据的访问级别。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">Oracle虚拟专用数据库（VPD）：</span> VPD使您可以创建可以限制行和列级别的数据库访问的策略。实质上，VPD将动态<code class="codeph">WHERE</code>子句添加到针对应用了VPD安全策略的表，视图或同义词发出的SQL语句。
                           </p>
                           <p>例如，假设用户输入<code class="codeph">SELECT * FROM OE.ORDERS</code>语句。VPD策略可以将此语句转换为以下语句，以便只有拥有该订单的销售代表才能查看此数据：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM OE.ORDERS WHERE SALES_REP_ID = SYS_CONTEXT（'USERENV'，'SESSION_USER'）;</pre></li>
                        <li>
                           <p><span class="bold">Oracle数据编辑：</span> Oracle Data Redaction在用户尝试访问数据时（即查询执行时）在运行时屏蔽数据。该解决方案在动态生产系统中运行良好，其中数据不断变化。在数据被编辑期间，正常执行所有数据处理，并保留后端参照完整性约束。您通常会编辑敏感数据，例如信用卡或社会保险号。
                           </p>
                           <p>您可以通过以下方式屏蔽数据：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="bold">完全编辑，其中整个数据被屏蔽。</span> 例如，数字37828224可以显示为零。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">部分编辑，其中只有一部分数据被编辑。</span> 使用此类型，数字37828224可以显示为***** 224。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">随机编辑，其中数据显示为随机数据。</span> 数据37828224可以显示为93204857。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">正则表达式，您可以在其中根据搜索模式编辑数据。</span> 您可以在完整和部分编校中使用正则表达式。例如，您可以编辑电子邮件地址的用户名，以便只显示域：电子邮件地址<code class="codeph">jsmith@example.com</code>中的<code class="codeph">jsmith</code>可以替换为<code class="codeph">[redacted]</code>以便电子邮件地址显示为<code class="codeph">[redacted]@example.com</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">无编辑，使您可以测试编校策略的内部操作，而不会影响对其上定义策略的表的查询结果。</span> 您可以使用此选项在将编校策略定义应用于生产环境之前对其进行测试。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><span class="bold">Oracle Label Security：</span> Oracle Label Security在行级别保护数据库表，并根据站点的需要为这些行分配不同级别的安全性。可以为包含高度敏感数据的行分配一个标题为<code class="codeph">HIGHLY SENSITIVE</code>的标签;敏感度较低的行可以标记为<code class="codeph">SENSITIVE</code> ，依此类推。所有用户都可以访问的行可以标记为<code class="codeph">PUBLIC</code> 。您可以根据需要创建任意数量的标签，以满足您网站的安全要求。
                           </p>
                           <p>例如，当用户<code class="codeph">fred</code> （谁是低级员工）登录时，他将只看到<code class="codeph">PUBLIC</code>标签定义的所有用户可用的数据。然而，当他的导演<code class="codeph">hortensia</code>登录时，她可以看到所有被分配了高<code class="codeph">HIGHLY SENSITIVE</code>标签的敏感数据。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Oracle Database Vault：</span> Oracle Database Vault使您可以限制对数据的管理访问。默认情况下，管理员（例如具有<code class="codeph">SYSDBA</code>权限的用户<code class="codeph">SYS</code> ）可以访问数据库中的所有数据。管理员通常必须执行性能调整，备份和恢复等任务。但是，他们不需要访问您的工资记录。通过Database Vault，您可以创建限制管理员操作的策略，但不会阻止他或她执行正常的管理活动。
                           </p>
                           <p>例如，典型的Database Vault策略可能会阻止管理员访问和修改<code class="codeph">HR.EMPLOYEES</code>表。您可以创建经过微调的策略，这些策略会施加限制，例如限制管理员可以登录的小时数，可以使用的计算机，是否可以使用动态工具登录数据库等等。此外，如果管理员尝试违反策略，您可以创建生成警报的策略。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-1E187378-E87F-4B69-92E1-2EA67A67C808__GUID-68021F9F-4A7E-489D-83B7-1A2B8B246981">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关Oracle虚拟专用数据库的详细信息，请参见<a href="../dbseg/using-oracle-vpd-to-control-data-access.html#DBSEG007" target="_blank"><span class="italic">“Oracle数据库安</span></a></p>
                           </li>
                           <li>
                              <p>有关Oracle Data Redaction的详细信息，请参见<a href="../asoag/asopart2.html#ASOAG10135" target="_blank"><span class="italic">“Oracle数据库高级安全指南”</span></a></p>
                           </li>
                           <li>
                              <p><a href="../olsag/introduction-to-oracle-label-security.html#OLSAG-GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA" target="_blank"><span><cite>有关Oracle Label Security的</cite></span></a>详细信息，请参阅<a href="../olsag/introduction-to-oracle-label-security.html#OLSAG-GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA" target="_blank"><span><cite>“Oracle Label Security管理员指南”</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../dvadm/introduction-to-oracle-database-vault.html#DVADM-GUID-0C8AF1B2-6CE9-4408-BFB3-7B2C7F9E7284" target="_blank"><span><cite>有关Oracle Database Vault的</cite></span></a>详细信息，请参见<a href="../dvadm/introduction-to-oracle-database-vault.html#DVADM-GUID-0C8AF1B2-6CE9-4408-BFB3-7B2C7F9E7284" target="_blank"><span><cite>“Oracle Database Vault管理员指南”</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS525"></a><a id="ADFNS524"></a><div class="props_rev_3"><a id="GUID-795BBFD7-FDE5-45A1-AD52-E1E9021318F7" name="GUID-795BBFD7-FDE5-45A1-AD52-E1E9021318F7"></a><h3 id="ADFNS-GUID-795BBFD7-FDE5-45A1-AD52-E1E9021318F7" class="sect3">使用Invoker和Definer的程序和函数权限</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-795BBFD7-FDE5-45A1-AD52-E1E9021318F7__GUID-C7FCCB84-A5F9-4B61-9560-A628396480F7">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="security.html#GUID-64A1D98A-F174-4868-B977-910486231D50">什么是祈求者的权利和定义者的权利？</a></p>
                        </li>
                        <li>
                           <p><a href="security.html#GUID-9B0AF06A-EBF8-411D-B656-88FE9B0CBC8C">保护运行调用者权利程序和功能的用户</a></p>
                        </li>
                        <li>
                           <p><a href="security.html#GUID-5AD2F48C-6314-4287-9031-90D82DDC9100">如何为Java存储过程处理默认权限</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS527"></a><a id="ADFNS526"></a><div class="props_rev_3"><a id="GUID-64A1D98A-F174-4868-B977-910486231D50" name="GUID-64A1D98A-F174-4868-B977-910486231D50"></a><h4 id="ADFNS-GUID-64A1D98A-F174-4868-B977-910486231D50" class="sect4">什么是祈求者的权利和定义者的权利？</h4>
                  <div>
                     <p>创建过程或函数（即程序单元）时，可以对其进行设计，使其以所有者（您）的权限或调用它的人员的权限运行。Definer的权利使用所有者的权限运行程序单元，并且调用者的权利使用运行它的人的权限运行程序单元。例如，假设用户<code class="codeph">harold</code>创建一个更新表<code class="codeph">orders</code> 。用户<code class="codeph">harold</code>然后将此过程的<code class="codeph">EXECUTE</code>特权授予用户<code class="codeph">hazel</code> 。如果<code class="codeph">harold</code>使用definer权限创建了该过程，那么该过程将期望<code class="codeph">orders</code>表位于<code class="codeph">harold</code>的模式中。如果他使用调用者的权限创建它，那么该过程将在<code class="codeph">hazel</code>的模式中查找orders表。
                     </p>
                     <p>要将程序单元指定为定义者权限或调用者权限，请在创建语句中使用<code class="codeph">AUTHID</code>子句。如果省略<code class="codeph">AUTHID</code>子句，则创建具有定义者权限的程序单元。
                     </p>
                     <p><a href="security.html#GUID-64A1D98A-F174-4868-B977-910486231D50__BABDCIIF">示例5-3</a>显示了如何在<code class="codeph">CREATE PROCEDURE</code>语句中使用<code class="codeph">AUTHID</code>子句来指定定义者的权限或调用者的权限。
                     </p>
                     <div class="example" id="GUID-64A1D98A-F174-4868-B977-910486231D50__BABDCIIF">
                        <p class="titleinexample">示例5-3创建具有定义者权限或调用者权限的程序单元</p><pre class="oac_no_warn" dir="ltr">CREATE PROCEDURE my_def_proc AUTHID DEFINER  -  Definer的权利程序AS ...CREATE PROCEDURE my_inv_proc AUTHID CURRENT_USER  -  Invoker的权利程序AS ...</pre><div class="infoboxnotealso" id="GUID-64A1D98A-F174-4868-B977-910486231D50__GUID-E13302A8-9456-42F6-AC9B-89661F850EC6">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关定义者权限和调用者权限过程和函数的详细信息，请参阅<a href="../lnpls/plsql-subprograms.html#LNPLS00809" target="_blank"><span class="italic">Oracle数据库PL / SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">CREATE PROCEDURE</code>语句的详细信息，请<a href="../lnpls/CREATE-PROCEDURE-statement.html#LNPLS01373" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">CREATE FUNCTION</code>语句的详细信息，请<a href="../lnpls/CREATE-FUNCTION-statement.html#LNPLS01370" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS529"></a><a id="ADFNS528"></a><div class="props_rev_3"><a id="GUID-9B0AF06A-EBF8-411D-B656-88FE9B0CBC8C" name="GUID-9B0AF06A-EBF8-411D-B656-88FE9B0CBC8C"></a><h4 id="ADFNS-GUID-9B0AF06A-EBF8-411D-B656-88FE9B0CBC8C" class="sect4">保护运行调用者权利程序和功能的用户</h4>
                  <div>
                     <div class="section">
                        <p>创建调用者权限程序单元时的一个重要考虑因素是调用用户具有的权限级别。假设用户<code class="codeph">harold</code>是一个低级别的员工，他们拥有很少的权限，而且<code class="codeph">hazel</code>是一个拥有许多权限的高管。当<code class="codeph">hazel</code>运行<code class="codeph">harold</code>的调用者权限程序时，该程序暂时继承了<code class="codeph">hazel</code>的权限（所有这些权限）。但是因为<code class="codeph">harold</code>拥有这个程序，所以他可以修改它而不知道它的行为方式可以利用<code class="codeph">hazel</code>的特权，例如给<code class="codeph">harold</code>加注。为了帮助防范这种情况，在确保<code class="codeph">harold</code>值得信赖之后，用户<code class="codeph">hazel</code>可以授予<code class="codeph">harold</code>权限，以便他的调用者权限程序和函数在运行时可以访问<code class="codeph">hazel</code>的权限。为此，她必须授予他<code class="codeph">INHERIT PRIVILEGES</code>特权。
                        </p>
                        <p><a href="security.html#GUID-9B0AF06A-EBF8-411D-B656-88FE9B0CBC8C__BABHFFED">示例5-4</a>显示了调用用户<code class="codeph">hazel</code>如何授予用户<code class="codeph">harold</code> <code class="codeph">INHERIT PRIVILEGES</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9B0AF06A-EBF8-411D-B656-88FE9B0CBC8C__BABHFFED">
                        <p class="titleinexample">示例5-4授予程序单元创建INHERIT PRIVILEGES权限</p><pre class="oac_no_warn" dir="ltr">对榛子的保持特权保持哈罗德;</pre><p>如果<code class="codeph">harold</code>证明不值得信任，那么<code class="codeph">hazel</code>可以撤销他的<code class="codeph">INHERIT PRIVILEGES</code>特权。
                        </p>
                        <p>用户<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>等管理员具有<code class="codeph">INHERIT ANY PRIVILEGES</code>权限，这使得这些用户的调用者权限过程可以访问任何调用用户的权限。与所有<code class="codeph">ANY</code>权限一样，仅将此权限授予受信任的用户。
                        </p>
                        <div class="infoboxnotealso" id="GUID-9B0AF06A-EBF8-411D-B656-88FE9B0CBC8C__GUID-955A570A-D274-425B-A331-A80EFBCC6859">
                           <p class="notep1">也可以看看：</p>
                           <p>有关管理定义者权限和调用者权限过程和函数的安全性的更多信息，请参见<a href="../dbseg/managing-security-for-definers-rights-and-invokers-rights.html#DBSEG658" target="_blank"><span class="italic">“Oracle数据库安全指南”</span></a></p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS531"></a><a id="ADFNS530"></a><div class="props_rev_3"><a id="GUID-5AD2F48C-6314-4287-9031-90D82DDC9100" name="GUID-5AD2F48C-6314-4287-9031-90D82DDC9100"></a><h4 id="ADFNS-GUID-5AD2F48C-6314-4287-9031-90D82DDC9100" class="sect4">如何为Java存储过程处理默认权限</h4>
                  <div>
                     <p>默认情况下，Java类模式对象以其调用者的权限运行，而不是使用定义者的权限。如果希望Java模式对象使用定义者权限运行，那么在使用<code class="codeph">loadjava</code>工具加载它们时，请指定<code class="codeph">-definer</code>选项。
                     </p>
                     <p><a href="security.html#GUID-5AD2F48C-6314-4287-9031-90D82DDC9100__BABJJHFC">示例5-5</a>显示了如何在<code class="codeph">loadjava</code>命令中使用<code class="codeph">-definer</code>选项。
                     </p>
                     <div class="example" id="GUID-5AD2F48C-6314-4287-9031-90D82DDC9100__BABJJHFC">
                        <p class="titleinexample">示例5-5使用定义者权限加载Java类</p><pre class="oac_no_warn" dir="ltr">loadjava -u joe -resolve -schema TEST -definer ServerObjects.jar密码： <span class="italic">password</span>
</pre><p>您可以在各个类上使用<code class="codeph">-definer</code>选项。请注意，不同的定义器可能具有不同的权限。小心应用<code class="codeph">-definer</code>选项，以便获得所需的结果。这样做有助于确保您的类以不超过所需权限的方式运行。
                        </p>
                        <div class="infoboxnotealso" id="GUID-5AD2F48C-6314-4287-9031-90D82DDC9100__GUID-C693CB87-7447-46C9-8837-4E9798021E7C">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">loadjava</code>工具的详细信息，请<code class="codeph">loadjava</code> <a href="../jjdev/loadjava-tool.html#JJDEV10060" target="_blank"><span class="italic">“Oracle数据库Java开发人员指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关在Java应用程序中控制当前用户的更多信息，请参见<a href="../jjdev/preparing-Java-class-methods.html#JJDEV13085" target="_blank"><span class="italic">“Oracle数据库Java开发人员指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADFNS1421"></a><div class="props_rev_3"><a id="GUID-E421C68E-05DD-4948-9774-95F0F080E3C8" name="GUID-E421C68E-05DD-4948-9774-95F0F080E3C8"></a><h3 id="ADFNS-GUID-E421C68E-05DD-4948-9774-95F0F080E3C8" class="sect3">管理应用程序的外部过程</h3>
               <div>
                  <div class="section">
                     <p>出于安全原因，Oracle外部过程在与Oracle数据库物理分离的进程中运行。调用外部过程时，Oracle数据库通过使用启动数据库实例的侦听器的用户的操作系统特权来创建<code class="codeph">extproc</code>操作系统进程（或代理）。
                     </p>
                     <p>您可以将<code class="codeph">extproc</code>代理配置为作为指定的操作系统凭据运行。要使用此功能，您需要定义与<code class="codeph">extproc</code>进程关联的凭据，然后可以在加载用户定义的共享库并执行函数之前对模拟进行身份验证（即，代表提供的用户凭据运行）。要配置<code class="codeph">extproc</code>用户凭据，请使用PL / SQL包<code class="codeph">DBMS_CREDENTIAL</code>和PL / SQL语句<code class="codeph">CREATE LIBRARY</code> 。</p>
                     <div class="infoboxnotealso" id="GUID-E421C68E-05DD-4948-9774-95F0F080E3C8__GUID-75059990-BBB3-4391-A7BE-2224761A6686">
                        <p class="notep1">也可以看看：</p>
                        <p>有关保护外部过程的详细信息，请参见<a href="../dbseg/managing-security-for-application-developers.html#DBSEG656" target="_blank"><span class="italic">“Oracle数据库安</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS532"></a><div class="props_rev_3"><a id="GUID-6B88545A-3D20-48E2-9407-7B7C7D8EDA00" name="GUID-6B88545A-3D20-48E2-9407-7B7C7D8EDA00"></a><h3 id="ADFNS-GUID-6B88545A-3D20-48E2-9407-7B7C7D8EDA00" class="sect3">审核用户活动</h3>
               <div>
                  <div class="section">
                     <p>您可以创建审核策略以审核数据库中的特定操作。然后，Oracle数据库将这些操作记录在审计跟踪中。数据库强制审计某些操作并将这些操作写入审计跟踪。您创建的审核策略可以很简单，例如审核特定用户的所有操作，或者复杂，例如测试特定条件并在违反这些条件时发送电子邮件警报。</p>
                     <p>安装Oracle数据库时，可以选择审核数据库的方式。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">统一审计：</span>在统一审计中，所有审计跟踪都写入单个审计跟踪，可通过<code class="codeph">V$UNIFIED_AUDIT_TRAIL</code>和<code class="codeph">GV$UNIFIED_AUDIT_TRAIL</code>动态视图查看。此审计跟踪不仅包括Oracle数据库特定的操作，还包括在Oracle Real Application Security，Oracle Recovery Manager，Oracle Database Vault和Oracle Label Security环境中执行的操作。来自这些来源的审计记录以统一，统一的格式呈现。您可以创建命名审核策略，并根据需要启用和禁用它们。如果要使用统一审核，则必须将数据库迁移到该审核。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">统一审计和预发布12</span> <span class="italic"><span class="bold">c</span></span> <span class="bold">审计的混合：</span>在大多数情况下，此选项使您可以使用预发布12 <span class="italic">c</span>审计，其中审计记录使用自己的格式写入不同位置。但是，可以使用Release 12 <span class="italic">c</span>功能，例如在多租户环境中使用审计。此类审核是新数据库和升级数据库的默认设置。
                           </p>
                        </li>
                     </ul>
                     <p>在这两种情况下，将数据库升级到Oracle Database 12 <span class="italic">c</span>第1版（12.1.0.1）时，都会保留先前版本的审核记录。如果您决定迁移以完全使用统一审计，则可以归档这些早期记录，然后清除审计跟踪。完成迁移后，新的审核记录将写入统一审核跟踪。
                     </p>
                     <div class="infoboxnotealso" id="GUID-6B88545A-3D20-48E2-9407-7B7C7D8EDA00__GUID-DC6682B7-EA26-418F-8BD4-9AA821F2B6E2">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../dbseg/part_6.html#DBSEG006" target="_blank"><span class="italic">“Oracle数据库安全指南”</span></a> ，了解有关创建和管理统一审核策略的更多信息</p>
                           </li>
                           <li>
                              <p><a href="../dbseg/how-unified-auditing-migration-affects-individual-audit-features.html#DBSEG341" target="_blank"><span class="italic">Oracle数据库安全指南</span></a>查找统一审计和预发布12 <span class="italic">c</span>审计的详细比较</p>
                           </li>
                           <li>
                              <p>有关迁移到统一审核的信息，请参见<a href="../upgrd/recommended-and-best-practices-complete-upgrading-oracle-database.html#UPGRD52810" target="_blank"><span class="italic">“Oracle数据库升级指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
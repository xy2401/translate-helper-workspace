<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_LOGSTDBY package provides subprograms for configuring and managing the logical standby database environment."></meta>
      <meta name="description" content="The DBMS_LOGSTDBY package provides subprograms for configuring and managing the logical standby database environment."></meta>
      <title>DBMS_LOGSTDBY</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_LOGSTDBY package provides subprograms for configuring and managing the logical standby database environment."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_LOGMNR.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_LOGMNR_D.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_LOGMNR.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_LOGMNR_D.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_LOGSTDBY</li>
            </ol>
            <a id="GUID-28B9C792-A952-426A-B37D-8D66BD2CB307" name="GUID-28B9C792-A952-426A-B37D-8D66BD2CB307"></a><a id="ARPLS363"></a><a id="ARPLS363"></a>
            
            <h2 id="ARPLS-GUID-28B9C792-A952-426A-B37D-8D66BD2CB307" class="sect2"><span class="enumeration_chapter">97</span> DBMS_LOGSTDBY</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='DBMS_LOGSTDBY'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p><code class="codeph">DBMS_LOGSTDBY</code>包提供用于配置和管理逻辑备用数据库环境的子程序。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_LOGSTDBY.html#GUID-260F3832-61E7-4A99-92AB-ECCA1B97046C" title="DBMS_LOGSTDBY包可帮助您管理SQL Apply（逻辑备用数据库）环境。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LOGSTDBY.html#GUID-890F7DFB-E856-4DCC-AB84-D03F5729FD68" title="您必须具有DBA角色才能使用DBMS_LOGSTDBY包。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LOGSTDBY.html#GUID-16A8DA80-7699-4517-8EE6-5285C0710E66" title="DBMS_LOGSTDBY包定义了几个用于指定参数值的枚举常量。枚举常量必须以包名称为前缀，例如DBMS_LOGSTDBY.SKIP_ACTION_SKIP。">常量</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LOGSTDBY.html#GUID-C61FDB62-2237-4016-9F18-79CABBEB3597" title="此表描述了DBMS_LOGSTDBY过程的每个子程序，包括对更详细描述每个过程的部分的引用。">DBMS_LOGSTDBY子程序摘要</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-28B9C792-A952-426A-B37D-8D66BD2CB307__GUID-5E74E1B6-2E6F-4486-9F0C-ABF062E57E8D">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="../sbydb/creating-oracle-data-guard-logical-standby.html#SBYDB-GUID-3666CA35-D993-44B6-8D70-A2B8B9EC8B2E" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a></p>
               </div>
            </div><a id="ARPLS66824"></a><a id="ARPLS66824"></a><div class="props_rev_3"><a id="GUID-260F3832-61E7-4A99-92AB-ECCA1B97046C" name="GUID-260F3832-61E7-4A99-92AB-ECCA1B97046C"></a><h3 id="ARPLS-GUID-260F3832-61E7-4A99-92AB-ECCA1B97046C" class="sect3"><span class="enumeration_section">97.1</span> DBMS_LOGSTDBY概述</h3>
               <div>
                  <p><code class="codeph">DBMS_LOGSTDBY</code>包可帮助您管理SQL Apply（逻辑备用数据库）环境。
                  </p>
                  <div class="section">
                     <p><code class="codeph">DBMS_LOGSTDBY</code>包中的子程序可帮助您完成以下主要目标：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>管理SQL Apply使用的配置参数。</p>
                           <p>例如，控制如何在逻辑备用数据库上应用事务，使用多少共享池，以及SQL Apply使用多少进程来挖掘和应用更改。</p>
                        </li>
                        <li>
                           <p>确保启用适当级别的补充日志记录，并为逻辑备用数据库创建正确构建LogMiner字典。</p>
                        </li>
                        <li>
                           <p>提供一种方法来跳过对逻辑备用数据库中所选表或整个模式的更改应用程序，并指定处理SQL Apply遇到的异常的方法。</p>
                        </li>
                        <li>
                           <p>允许对可能需要维护的逻辑备用数据库中的表进行受控访问。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS73152"></a><a id="ARPLS73152"></a><div class="props_rev_3"><a id="GUID-890F7DFB-E856-4DCC-AB84-D03F5729FD68" name="GUID-890F7DFB-E856-4DCC-AB84-D03F5729FD68"></a><h3 id="ARPLS-GUID-890F7DFB-E856-4DCC-AB84-D03F5729FD68" class="sect3"><span class="enumeration_section">97.2</span> DBMS_LOGSTDBY安全模型</h3>
               <div>
                  <p>您必须具有<code class="codeph">DBA</code>角色才能使用<code class="codeph">DBMS_LOGSTDBY</code>包。
                  </p>
                  <div class="section">
                     <p>原型的角色， <code class="codeph">LOGSTDBY_ADMINISTRATOR</code> ，默认情况下，与创建<code class="codeph">RESOURCE</code>和<code class="codeph">EXECUTE</code>特权<code class="codeph">DBMS_LOGSTDBY</code> 。如果您选择使用此角色，请考虑向角色授予<code class="codeph">ALTER DATABASE</code>和<code class="codeph">ALTER SESSION</code>权限，以便被授权者可以启动和停止SQL Apply，并可以启用和禁用数据库防护。
                     </p>
                     <p>与跳过事务相关的过程（ <code class="codeph">SKIP</code>和<code class="codeph">UNSKIP</code> ， <code class="codeph">SKIP_ERROR</code>和<code class="codeph">UNSKIP_ERROR</code>以及<code class="codeph">SKIP_TRANSACTION</code>和<code class="codeph">UNSKIP_TRANSACTION</code> ）都需要<code class="codeph">DBA</code>权限才能执行，因为它们的作用域可能包含通配符模式。Oracle建议在指定<code class="codeph">SKIP</code>过程的地方，这些过程由安全帐户拥有，该帐户对其所使用的模式具有适当的权限（例如， <code class="codeph">SYS</code> ）。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS74900"></a><a id="ARPLS74901"></a><a id="ARPLS74901"></a><a id="ARPLS74900"></a><div class="props_rev_3"><a id="GUID-16A8DA80-7699-4517-8EE6-5285C0710E66" name="GUID-16A8DA80-7699-4517-8EE6-5285C0710E66"></a><h3 id="ARPLS-GUID-16A8DA80-7699-4517-8EE6-5285C0710E66" class="sect3"><span class="enumeration_section">97.3</span> DBMS_LOGSTDBY常量</h3>
               <div>
                  <p><code class="codeph">DBMS_LOGSTDBY</code>包定义了几个用于指定参数值的枚举常量。枚举常量必须以包名称为前缀，例如<code class="codeph">DBMS_LOGSTDBY</code> 。 <code class="codeph">SKIP_ACTION_SKIP</code> 。</p>
                  <div class="section">
                     <p>下表描述了常量<code class="codeph">proc_name</code>的参数<code class="codeph">DBMS_LOGSTDBY</code> 。 <code class="codeph">SKIP</code>程序。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-16A8DA80-7699-4517-8EE6-5285C0710E66__BGBBJGDI">
                     <p class="titleintable">表97-1 SKIP选项标志的常量</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="SKIP选项标志的常量" width="100%" border="1" summary="This table lists and describes DBMS_LOGSTDBY Constants." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d530649e547">不变</th>
                              <th align="left" valign="bottom" width="69%" id="d530649e550">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d530649e555" headers="d530649e547 ">
                                 <p><code class="codeph">MAX_EVENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d530649e555 d530649e550 ">
                                 <p>要在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>视图中登录的最大事件数。见<code class="codeph">DBMS_LOGSTDBY</code> <a href="DBMS_LOGSTDBY.html#GUID-9C1BD8E1-3C21-4F90-96C6-F2A2E30481E7" title="使用此过程设置在逻辑备用数据库环境中配置和管理SQL Apply的参数值。可以更改除PRESERVE_COMMIT_ORDER之外的所有参数，而无需停止SQL Apply。">APPLY_SET程序</a> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d530649e579" headers="d530649e547 ">
                                 <p><code class="codeph">SKIP_ACTION_APPLY</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d530649e579 d530649e550 ">
                                 <p>在<code class="codeph">DBMS_LOGSTDBY.SKIP.</code>注册的用户定义过程中使用<code class="codeph">DBMS_LOGSTDBY.SKIP.</code>设定的值时，使用此常数<code class="codeph">SKIP_ACTION</code>与参数<code class="codeph">DBMS_LOGSTDBY_CONTEXT</code>如果你想SQL应用以应用DDL或PL / SQL语句。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d530649e596" headers="d530649e547 ">
                                 <p><code class="codeph">SKIP_ACTION_ERROR</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d530649e596 d530649e550 ">
                                 <p>在<code class="codeph">DBMS_LOGSTDBY.SKIP</code>注册的用户定义过程中使用。设定的值时，使用此常数<code class="codeph">SKIP_ACTION</code>与参数<code class="codeph">DBMS_LOGSTDBY_CONTEXT</code>如果你想SQL应用错误的。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d530649e613" headers="d530649e547 ">
                                 <p><code class="codeph">SKIP_ACTION_REPLACE</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d530649e613 d530649e550 ">
                                 <p>在<code class="codeph">DBMS_LOGSTDBY.SKIP</code>注册的用户定义过程中使用。设定的值时，使用此常数<code class="codeph">SKIP_ACTION</code>与参数<code class="codeph">DBMS_LOGSTDBY_CONTEXT</code>如果你想SQL应用，应用替代DDL。 （处理Oracle提供的PL / SQL过程调用时，不应使用此常量）。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d530649e630" headers="d530649e547 ">
                                 <p><code class="codeph">SKIP_ACTION_SKIP</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d530649e630 d530649e550 ">
                                 <p>在<code class="codeph">DBMS_LOGSTDBY.SKIP</code>注册的用户定义过程中使用。设定的值时，使用此常数<code class="codeph">SKIP_ACTION</code>与参数<code class="codeph">DBMS_LOGSTDBY_CONTEXT</code>如果你想SQL应用跳过相关DDL或Oracle提供的PL / SQL程序调用。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="ARPLS66827"></a><a id="ARPLS66828"></a><a id="ARPLS66828"></a><a id="ARPLS66827"></a><div class="props_rev_3"><a id="GUID-C61FDB62-2237-4016-9F18-79CABBEB3597" name="GUID-C61FDB62-2237-4016-9F18-79CABBEB3597"></a><h3 id="ARPLS-GUID-C61FDB62-2237-4016-9F18-79CABBEB3597" class="sect3"><span class="enumeration_section">97.4</span> DBMS_LOGSTDBY子程序摘要</h3>
               <div>
                  <p>此表描述了DBMS_LOGSTDBY过程的每个子程序，包括对更详细描述每个过程的部分的引用。</p>
                  <div class="section">
                     <p>在多租户容器数据库（CDB）中，必须从根调用某些子程序。也可能存在其他差异。有关详细信息，请参见各个子程序说明。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-C61FDB62-2237-4016-9F18-79CABBEB3597__GUID-5B063017-A232-4471-BF63-BB4C98A2F3B5">
                     <p class="titleintable">表97-2 DBMS_LOGSTDBY包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_LOGSTDBY包子程序" width="100%" border="1" summary="This table describes each subprogram of the DBMS_LOGSTDBY procedure, including a reference to the section where each procedure is described in more detail." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="43%" id="d530649e747">子程序</th>
                              <th align="left" valign="bottom" width="57%" id="d530649e750">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e755" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-9C1BD8E1-3C21-4F90-96C6-F2A2E30481E7" title="使用此过程设置在逻辑备用数据库环境中配置和管理SQL Apply的参数值。可以更改除PRESERVE_COMMIT_ORDER之外的所有参数，而无需停止SQL Apply。">APPLY_SET程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e755 d530649e750 ">
                                 <p>设置配置和维护SQL Apply的各种参数的值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e770" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-6D46BDFC-51C3-4D16-90FD-1D916FF13043" title="使用APPLY_UNSET过程还原使用APPLY_SET过程更改的参数的默认值。">APPLY_UNSET程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e770 d530649e750 ">
                                 <p>恢复配置和维护SQL Apply的各种参数的默认值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e788" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-5E389D91-8CE7-4262-9530-FBBFD91BD673" title="在主数据库上使用此过程可在重做日志中记录相关元数据（LogMiner字典）信息，随后将由SQL Apply使用。如有必要，此过程将启用数据库范围的主键和唯一键补充日志记录。">构建程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e788 d530649e750 ">
                                 <p>确保正确启用补充日志记录并构建LogMiner字典。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e800" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-803AAE39-AB03-47DA-95E2-FBDFCAA29755" title="此过程从主数据库中的相应表创建并填充备用数据库中的表。">INSTANTIATE_TABLE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e800 d530649e750 ">
                                 <p>从主数据库中的相应表创建并填充备用数据库中的表。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e812" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-991B7EE3-939F-4E26-BB10-D9A465529CFE" title="如果在逻辑备用应用服务器进程的上下文中从PL / SQL执行此函数，则返回TRUE。">IS_APPLY_SERVER函数</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e812 d530649e750 ">
                                 <p>如果在逻辑备用应用服务器进程的上下文中从PL / SQL执行此函数，则返回<code class="codeph">TRUE</code> 。此函数与将<code class="codeph">DBMS_DDL.SET_TRIGGER_FIRING_PROPERTY</code>子程序中的<code class="codeph">fire_once</code>参数设置为<code class="codeph">FALSE</code>触发器一起使用（默认值为<code class="codeph">TRUE</code> ）。当应用过程更新相关目标时，执行此类触发器。此功能可以在触发器的主体内使用，以确保触发器在主服务器或备用服务器上执行不同（或不执行）操作。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e842" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-64D1A18C-FFA6-403B-9A32-11BC30735E8C" title="此函数在备用数据库上返回一个SCN，该SCN早于主数据库提供的SCN至少5分钟。">MAP_PRIMARY_SCN功能</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e842 d530649e750 ">
                                 <p>将与主数据库相关的SCN映射到逻辑备用数据库中的相应SCN。映射的SCN本质上是保守的，因此可用于闪回逻辑备用数据库以补偿在主数据库处执行的闪回数据库操作。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e854" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-B31DAC7B-D4B8-45DF-BAB3-32725605E9AD" title="如果备用数据库不是故障转移操作的目标，则必须在故障转移后在逻辑备用数据库上调用PREPARE_FOR_NEW_PRIMARY过程。">PREPARE_FOR_NEW_PRIMARY过程</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e854 d530649e750 ">
                                 <p>在故障转移后使用此过程可确保未参与故障转移的本地逻辑备用数据库未处理比新主数据库更多的重做，并报告必须替换的存档重做日志文件集以确保一致性</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e869" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-E8D8AB67-2F8C-4D5D-A906-C2678F5896F4" title="PURGE_SESSION标识已应用于逻辑备用数据库且SQL Apply不再需要的所有已归档重做日志文件。">PURGE_SESSION程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e869 d530649e750 ">
                                 <p>标识已应用于逻辑备用数据库且SQL Apply不再需要的已归档重做日志文件</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e883" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-E1D26D56-C383-4253-A606-D73993E9D182" title="如果在故障转移操作之后最近将其角色更改为主数据库的数据库无法在其他逻辑备用数据库所需的重做流中记录相关元数据（包括LogMiner字典），则使用此过程。">REBUILD程序</a> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e883 d530649e750 ">
                                 <p>记录重做流中的相关元数据（包括LogMiner字典），以防在故障转移过程中最近将其角色更改为主数据库的数据库在故障转移过程中执行此操作</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e896" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-B771E6E3-AF11-48AB-9F82-597CBC1FD001" title="此过程将SQL Apply所需的元数据表移动到用户指定的表空间。">SET_TABLESPACE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e896 d530649e750 ">
                                 <p>将SQL Apply所需的元数据表移动到用户指定的表空间。默认情况下，元数据表在<code class="codeph">SYSAUX</code>表空间中创建。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e911" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-0A383476-631A-44CC-AA6D-5C2506D59492" title="SKIP过程可用于定义SQL Apply将使用的规则，以跳过对逻辑备用数据库的某些更改的应用。">跳过程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e911 d530649e750 ">
                                 <p>指定控制不应用于逻辑备用数据库的数据库操作的规则</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e927" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-267A7172-05AD-443A-9AC6-B4D0CF8208A5" title="SKIP_ERROR过程指定逻辑备用数据库检测到错误时要采取的操作。">SKIP_ERROR程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e927 d530649e750 ">
                                 <p>指定有关遇到错误时要采取的操作的规则。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e939" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-D4215C30-F4D1-486A-B83C-978ABC39A037" title="此过程提供了一种跳过（忽略）将事务应用于逻辑备用数据库的方法。您可以通过指定事务标识信息来跳过特定事务。">SKIP_TRANSACTION程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e939 d530649e750 ">
                                 <p>指定不应在逻辑备用数据库上应用的事务。请谨慎使用此过程，因为不应用特定事务可能会导致逻辑备用数据库中的数据损坏。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e951" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-B5B3A174-82B5-437C-80DD-6B389973F8C9" title="使用UNSKIP过程删除先前使用SKIP过程指定的规则。">UNSKIP程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e951 d530649e750 ">
                                 <p>删除<code class="codeph">SKIP</code>过程指定的规则。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e972" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-B1C13C6B-E683-4407-BEC2-00E5EFD5A181" title="使用UNSKIP_ERROR过程删除先前使用SKIP_ERROR过程指定的规则。">UNSKIP_ERROR程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e972 d530649e750 ">
                                 <p>删除<code class="codeph">SKIP_ERROR</code>过程指定的规则。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d530649e993" headers="d530649e747 ">
                                 <p><a href="DBMS_LOGSTDBY.html#GUID-838D761C-8B3D-47AB-A9C6-ECC6835BE00D" title="使用UNSKIP_TRANSACTION过程删除先前使用SKIP_TRANSACTION过程指定的规则。">UNSKIP_TRANSACTION程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d530649e993 d530649e750 ">
                                 <p>删除<code class="codeph">SKIP_TRANSACTION</code>过程指定的规则。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS66829"></a><a id="ARPLS66830"></a><a id="ARPLS66831"></a><a id="ARPLS66830"></a><a id="ARPLS66831"></a><a id="ARPLS66829"></a><div class="props_rev_3"><a id="GUID-9C1BD8E1-3C21-4F90-96C6-F2A2E30481E7" name="GUID-9C1BD8E1-3C21-4F90-96C6-F2A2E30481E7"></a><h4 id="ARPLS-GUID-9C1BD8E1-3C21-4F90-96C6-F2A2E30481E7" class="sect4"><span class="enumeration_section">97.4.1</span> APPLY_SET过程</h4>
                  <div>
                     <p>使用此过程设置在逻辑备用数据库环境中配置和管理SQL Apply的参数值。可以更改除<code class="codeph">PRESERVE_COMMIT_ORDER</code>之外的所有参数，而无需停止SQL Apply。
                     </p>
                     <div class="section">
                        <p>在CDB中，必须从根数据库调用<code class="codeph">APPLY_SET</code>过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C1BD8E1-3C21-4F90-96C6-F2A2E30481E7__GUID-FEF349A2-E0DD-4763-8065-AD3D228FBF75">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.APPLY_SET（inname IN VARCHAR，值IN VARCHAR）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C1BD8E1-3C21-4F90-96C6-F2A2E30481E7__GUID-F3A9DA8F-87FB-41E8-BF61-97EE04C48D74">参数</p>
                        <div class="tblformal" id="GUID-9C1BD8E1-3C21-4F90-96C6-F2A2E30481E7__CHDCJDGA">
                           <p class="titleintable">表97-3 APPLY_SET过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="APPLY_SET过程参数" width="100%" border="1" summary="This table lists and describes the parameters you can set on the DBMS_LOGSTDBY.APPLY_SET subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="35%" id="d530649e1136">参数</th>
                                    <th align="left" valign="bottom" width="65%" id="d530649e1139">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d530649e1144" headers="d530649e1136 ">
                                       <p><code class="codeph">APPLY_SERVERS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d530649e1144 d530649e1139 ">
                                       <p>控制用于应用更改的<code class="codeph">APPLIER</code>进程数。允许的最大数量为1024，前提是<code class="codeph">MAX_SERVERS</code>参数设置为容纳此值。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d530649e1158" headers="d530649e1136 ">
                                       <p><code class="codeph">EVENT_LOG_DEST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d530649e1158 d530649e1139 ">
                                       <p>控制SQL Apply记录有趣事件发生的位置。它采用以下值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">DEST_ALL</code> - 所有事件都将记录在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>视图和警报日志中。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DEST_EVENTS_TABLE</code> - 包含有关用户数据信息的所有事件将仅记录在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>视图中。这是默认值。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>例如，如果SQL Apply收到<code class="codeph">ORA-1403</code>错误，则整个事件将记录在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>视图中。然而，警报日志仅记录由于<code class="codeph">ORA-1403</code>停止的SQL Apply。警报日志中不会记录有关用户表或违规语句的信息。但是，如果停止SQL Apply引擎，它将记录在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>视图和警报日志中。
                                       </p>
                                       <p>请注意，此参数会影响以下参数的行为： <code class="codeph">RECORD_APPLIED_DDL</code> ， <code class="codeph">RECORD_SKIP_DDL</code> ， <code class="codeph">RECORD_SKIP_ERRORS</code>和<code class="codeph">RECORD_UNSUPPORTED_OPERATIONS</code> 。例如，如果<code class="codeph">RECORD_APPLIED_DDL</code>设置为<code class="codeph">TRUE</code> ，但<code class="codeph">EVENT_LOG_DEST</code>设置为<code class="codeph">DEST_EVENTS_TABLE</code> ，则应用的DDL字符串将仅记录在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>视图中。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d530649e1227" headers="d530649e1136 ">
                                       <p><code class="codeph">LOG_AUTO_DEL_RETENTION_TARGET</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d530649e1227 d530649e1139 ">
                                       <p>仅当<code class="codeph">LOG_AUTO_DELETE</code>设置为<code class="codeph">TRUE</code>此参数设置才有意义。为此参数提供的值控制一旦在逻辑备用数据库中应用了日志中包含的所有重做记录，从主数据库接收的远程归档日志将保留在逻辑备用数据库中的时间（以分钟为单位）。默认值为1440分钟。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d530649e1241" headers="d530649e1136 ">
                                       <p><code class="codeph">LOG_AUTO_DELETE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d530649e1241 d530649e1139 ">
                                       <p>在逻辑备用数据库上应用外部归档重做日志文件后，自动删除它们。默认情况下，在逻辑备用数据库应用外部归档重做日志文件24小时（ <code class="codeph">LOG_AUTO_DEL_RETENTION_TARGET</code>参数的默认值）之后，不会删除该归档重做日志文件。设置为<code class="codeph">TRUE</code>以启用自动删除存档的重做日志文件。设置为<code class="codeph">FALSE</code>以禁用自动删除。默认值为<code class="codeph">TRUE</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d530649e1261" headers="d530649e1136 ">
                                       <p><code class="codeph">MAX_EVENTS_RECORDED</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d530649e1261 d530649e1139 ">
                                       <p>通过<code class="codeph">DBA_LOGSTDBY_EVENTS</code>视图可见的最近事件数。要记录SQL Apply遇到的所有事件，请使用<code class="codeph">DBMS_LOGSTDBY.MAX_EVENTS</code>常量作为数字值。默认值为10,000。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d530649e1275" headers="d530649e1136 ">
                                       <p><code class="codeph">MAX_SERVERS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d530649e1275 d530649e1139 ">
                                       <p>SQL Apply用于读取和应用重做的进程数。默认值为9。允许的最大数量是2048。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d530649e1283" headers="d530649e1136 ">
                                       <p><code class="codeph">MAX_SGA</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d530649e1283 d530649e1139 ">
                                       <p>SQL Apply将使用的系统全局区域（SGA）中共享池的兆字节数。默认值为30兆字节或为<code class="codeph">SHARED_POOL_SIZE</code>设置的值的四分之一，以较低者为准。允许的最大大小为4095兆字节。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d530649e1294" headers="d530649e1136 ">
                                       <p><code class="codeph">PREPARE_SERVERS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d530649e1294 d530649e1139 ">
                                       <p>控制用于准备更改的<code class="codeph">PREPARER</code>进程数。允许的最大数量为1024，前提是<code class="codeph">MAX_SERVERS</code>参数设置为容纳此值。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d530649e1308" headers="d530649e1136 ">
                                       <p><code class="codeph">PRESERVE_COMMIT_ORDER</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d530649e1308 d530649e1139 ">
                                       <p><code class="codeph">TRUE</code> ：事务按照在主数据库上提交的确切顺序应用于逻辑备用数据库。这是默认参数设置。
                                       </p>
                                       <p><code class="codeph">FALSE</code> ：包含非重叠行集的事务可能以与在主数据库上提交的顺序不同的顺序提交。
                                       </p>
                                       <p>无论选择何种级别，对同一行执行的修改始终按照与主数据库上相同的顺序应用。有关详细信息和建议，请参阅使用说明。</p>
                                       <p>在SQL Apply运行时，您无法修改此参数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d530649e1326" headers="d530649e1136 ">
                                       <p><code class="codeph">RECORD_APPLIED_DDL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d530649e1326 d530649e1139 ">
                                       <p>控制是否将已应用于逻辑备用数据库的DDL语句记录在<code class="codeph">EVENT_LOG_DEST</code>参数指定的位置。指定以下值之一：</p>
                                       <p><code class="codeph">TRUE</code> ：表示应用于逻辑备用数据库的DDL语句记录在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>表和警报日志中。
                                       </p>
                                       <p><code class="codeph">FALSE</code> ：表示未记录应用的DDL语句。这是默认参数设置。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d530649e1348" headers="d530649e1136 ">
                                       <p><code class="codeph">RECORD_SKIP_DDL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d530649e1348 d530649e1139 ">
                                       <p>控制是否将跳过的DDL语句记录在<code class="codeph">EVENT_LOG_DEST</code>参数指定的位置。指定以下值之一：</p>
                                       <p><code class="codeph">TRUE</code> ：已跳过的DDL语句记录在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>表和警报日志中。这是默认参数设置。
                                       </p>
                                       <p><code class="codeph">FALSE</code> ：跳过的DDL语句未记录在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>表和警报日志中。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d530649e1374" headers="d530649e1136 ">
                                       <p><code class="codeph">RECORD_SKIP_ERRORS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d530649e1374 d530649e1139 ">
                                       <p>控制是否将跳过的错误（如<code class="codeph">SKIP_ERROR</code>过程所述）记录在<code class="codeph">EVENT_LOG_DEST</code>参数指定的位置。指定以下值之一：</p>
                                       <p><code class="codeph">TRUE</code> ：跳过的错误记录在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>表和警报日志中。这是默认参数设置。
                                       </p>
                                       <p><code class="codeph">FALSE</code> ： <code class="codeph">DBA_LOGSTDBY_EVENTS</code>表和警报日志中未记录跳过的错误。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d530649e1402" headers="d530649e1136 ">
                                       <p><code class="codeph">RECORD_UNSUPPORTED_OPERATIONS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d530649e1402 d530649e1139 ">
                                       <p>捕获有关逻辑备用数据库不支持的主数据库上运行的事务的信息。此过程将其信息记录为<code class="codeph">DBA_LOGSTDBY_EVENTS</code>表中的事件。指定以下值之一：</p>
                                       <p><code class="codeph">TRUE</code> ：捕获信息并将其记录为<code class="codeph">DBA_LOGSTDBY_EVENTS</code>表中的事件。
                                       </p>
                                       <p><code class="codeph">FALSE</code> ：未捕获信息。这是默认值。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>如果在SQL Apply运行时更改了参数，则更改将在以后的某个时间点生效。在这种情况下，在参数更改生效时，将在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>视图中插入信息行。
                        </p>
                        <p>此外，如果在Oracle RAC配置上运行SQL Apply时修改参数，则必须连接到运行SQL Apply的同一实例。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C1BD8E1-3C21-4F90-96C6-F2A2E30481E7__GUID-F9350643-BD3F-475A-AA70-E987F9B3B994">例外</p>
                        <div class="tblformal" id="GUID-9C1BD8E1-3C21-4F90-96C6-F2A2E30481E7__GUID-AF7CBF4B-BC5F-4D5C-B31F-B331FB3193A1">
                           <p class="titleintable">表97-4 APPLY_SET过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="APPLY_SET过程异常" width="100%" border="1" summary="This table lists and describes the exceptions you might encounter when you use the APPLY_SET subprogram on the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e1443">例外</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e1446">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e1451" headers="d530649e1443 ">
                                       <p><code class="codeph">ORA-16103</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e1451 d530649e1446 ">
                                       <p>必须停止逻辑备用应用才能执行此操作</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e1459" headers="d530649e1443 ">
                                       <p><code class="codeph">ORA-16104</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e1459 d530649e1446 ">
                                       <p>请求无效的逻辑备用选项</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e1467" headers="d530649e1443 ">
                                       <p><code class="codeph">ORA-16236</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e1467 d530649e1446 ">
                                       <p>正在进行逻辑备用元数据操作</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C1BD8E1-3C21-4F90-96C6-F2A2E30481E7__GUID-8579AC72-5C8A-457F-A90D-37AA9117DB75">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">APPLY_UNSET</code>过程恢复参数的默认设置。
                              </p>
                           </li>
                           <li>
                              <p>有关调整SQL Apply的帮助以及有关为不同参数设置适当值的信息，请参阅<a href="../sbydb/managing-oracle-data-guard-logical-standby-databases.html#SBYDB00800" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C1BD8E1-3C21-4F90-96C6-F2A2E30481E7__GUID-69C874BF-719F-4CF2-96C0-86E1224126D4">例子</p>
                        <p>要在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>视图和警报日志中记录DDL，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.APPLY_SET（'RECORD_APPLIED_DDL'，TRUE）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66832"></a><a id="ARPLS66833"></a><a id="ARPLS66833"></a><a id="ARPLS66832"></a><div class="props_rev_3"><a id="GUID-6D46BDFC-51C3-4D16-90FD-1D916FF13043" name="GUID-6D46BDFC-51C3-4D16-90FD-1D916FF13043"></a><h4 id="ARPLS-GUID-6D46BDFC-51C3-4D16-90FD-1D916FF13043" class="sect4"><span class="enumeration_section">97.4.2</span> APPLY_UNSET程序</h4>
                  <div>
                     <p>使用<code class="codeph">APPLY_UNSET</code>过程来恢复你与更改的参数的默认值<code class="codeph">APPLY_SET</code>程序。
                     </p>
                     <div class="section">
                        <p>在CDB中，必须从根数据库调用<code class="codeph">APPLY_UNSET</code>过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6D46BDFC-51C3-4D16-90FD-1D916FF13043__GUID-8A2A1A48-862C-40DF-B44D-E06F1D189A45">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.APPLY_UNSET（inname IN VARCHAR）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6D46BDFC-51C3-4D16-90FD-1D916FF13043__GUID-23BD325C-55BC-4AC9-A40C-BE9B4310CA56">参数</p>
                        <p>的参数信息用于<code class="codeph">APPLY_UNSET</code>过程是相同的，对于所描述的<code class="codeph">APPLY_SET</code>过程。有关完整的参数信息，请<a href="DBMS_LOGSTDBY.html#GUID-9C1BD8E1-3C21-4F90-96C6-F2A2E30481E7__CHDCJDGA" title="此表列出并描述了可以在DBMS_LOGSTDBY.APPLY_SET子程序中设置的参数。">参见表97-3</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6D46BDFC-51C3-4D16-90FD-1D916FF13043__GUID-C4C88309-97CC-4D56-A5B1-5F306C5B0DA0">例外</p>
                        <div class="tblformal" id="GUID-6D46BDFC-51C3-4D16-90FD-1D916FF13043__GUID-F655C4C4-97D7-4ACF-863F-DDB9ACC425FD">
                           <p class="titleintable">表97-5 APPLY_UNSET过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="APPLY_UNSET过程异常" width="100%" border="1" summary="This table lists and describes the exceptions you might encounter when you use the APPLY_UNSET subprogram on the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e1643">例外</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e1646">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e1651" headers="d530649e1643 ">
                                       <p><code class="codeph">ORA-16103</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e1651 d530649e1646 ">
                                       <p>必须停止逻辑备用应用才能执行此操作</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e1659" headers="d530649e1643 ">
                                       <p><code class="codeph">ORA-16104</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e1659 d530649e1646 ">
                                       <p>请求无效的逻辑备用选项</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e1667" headers="d530649e1643 ">
                                       <p><code class="codeph">ORA-16236</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e1667 d530649e1646 ">
                                       <p>正在进行逻辑备用元数据操作</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6D46BDFC-51C3-4D16-90FD-1D916FF13043__GUID-33BA017F-5640-4DF2-9521-561A434D2368">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">APPLY_SET</code>过程为参数指定非默认值。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6D46BDFC-51C3-4D16-90FD-1D916FF13043__GUID-B4EEF716-84EA-482F-A4B6-05DD9CF096E1">例子</p>
                        <p>如果先前已在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>视图和警报日志中指定应用的DDL，则可以使用以下语句恢复SQL Apply关于应用的DDL语句的默认行为：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.APPLY_UNSET（'RECORD_APPLIED_DDL'）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66834"></a><a id="ARPLS66834"></a><div class="props_rev_3"><a id="GUID-5E389D91-8CE7-4262-9530-FBBFD91BD673" name="GUID-5E389D91-8CE7-4262-9530-FBBFD91BD673"></a><h4 id="ARPLS-GUID-5E389D91-8CE7-4262-9530-FBBFD91BD673" class="sect4"><span class="enumeration_section">97.4.3</span>构建程序</h4>
                  <div>
                     <p>在主数据库上使用此过程可在重做日志中记录相关元数据（LogMiner字典）信息，随后将由SQL Apply使用。如有必要，此过程将启用数据库范围的主键和唯一键补充日志记录。</p>
                     <div class="section">
                        <p>在CDB中，必须从主数据库上的根数据库调用<code class="codeph">BUILD</code>过程。此外，在执行此过程时，您无法从CDB添加或删除PDB。
                        </p>
                        <div class="infoboxnote" id="GUID-5E389D91-8CE7-4262-9530-FBBFD91BD673__GUID-C7BD8579-0D39-42B3-8532-7E4B31403C9A">
                           <p class="notep1">注意：</p>
                           <p>在使用Oracle Database <span class="italic">11g第</span> 2版（11.2）或更高版本创建的数据库中，补充日志记录信息会自动传播到任何现有的物理备用数据库。但是，对于早期版本中的数据库，或者如果数据库是使用早期版本创建的，然后升级到11.2，则必须检查在物理备用数据库中是否启用了补充日志记录（如果它也在主数据库中启用）。如果未在物理备用数据库上启用，则在执行切换或故障转移之前，必须在所有现有物理备用数据库上启用补充日志记录。为此，请在每个物理备用数据库上发出以下SQL命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE添加补充日志数据（PRIMARY KEY，UNIQUE INDEX）列;</pre><p>如果不这样做，那么如果对其中一个物理备用数据库执行切换或故障转移，则同一Data Guard配置中的任何逻辑备用数据库都将不可用。如果已发生切换或故障转移并且未启用补充日志记录，则必须重新创建所有逻辑备用数据库。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5E389D91-8CE7-4262-9530-FBBFD91BD673__GUID-D43EAAEA-3350-410F-9C7A-057EE8E2DAE1">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.BUILD;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5E389D91-8CE7-4262-9530-FBBFD91BD673__GUID-762390AF-2C01-46A3-B958-61B81CB3C4FC">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>补充日志信息包括重做日志中的唯一标识逻辑备用数据库中已修改行的额外信息，还包括有助于有效应用对逻辑备用数据库的更改的信息。</p>
                           </li>
                           <li>
                              <p>LogMiner字典信息允许SQL Apply解释重做日志中的数据。</p>
                           </li>
                           <li>
                              <p>对于要创建的每个逻辑备用数据库， <code class="codeph">DBMS_LOGSTDBY.BUILD</code>应仅运行一次。您不需要为每个Oracle RAC实例使用DBMS_LOGSTDBY.BUILD。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DBMS_LOGSTDBY.BUILD</code>在返回<code class="codeph">DBMS_LOGSTDBY.BUILD</code>等待在过程调用完成时处于活动状态的所有事务（包括分布式事务）。有关如何处理不确定事务的信息，请参见“ <a href="../admin/managing-distributed-transactions.html#ADMIN12252" target="_blank"><span class="italic">Oracle数据库管理员指南”</span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5E389D91-8CE7-4262-9530-FBBFD91BD673__GUID-B193034C-C0E4-428F-AB6F-D7D537ACF062">例子</p>
                        <p>要在主数据库的重做流中构建LogMiner字典并记录其他信息以便可以实例化逻辑备用数据库，请在主数据库中发出以下SQL语句</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.BUILD;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66835"></a><a id="ARPLS66836"></a><a id="ARPLS66837"></a><a id="ARPLS66836"></a><a id="ARPLS66837"></a><a id="ARPLS66835"></a><div class="props_rev_3"><a id="GUID-803AAE39-AB03-47DA-95E2-FBDFCAA29755" name="GUID-803AAE39-AB03-47DA-95E2-FBDFCAA29755"></a><h4 id="ARPLS-GUID-803AAE39-AB03-47DA-95E2-FBDFCAA29755" class="sect4"><span class="enumeration_section">97.4.4</span> INSTANTIATE_TABLE过程</h4>
                  <div>
                     <p>此过程从主数据库中的相应表创建并填充备用数据库中的表。</p>
                     <div class="section">
                        <p>该表需要数据库链接（ <code class="codeph">dblink)</code>的名称作为输入参数。如果该表已存在于逻辑备用数据库中，则将根据主数据库中的表定义删除并重新创建该表。此过程仅引入与表关联的数据，而不是相关的索引和约束。
                        </p>
                        <p>使用<code class="codeph">INSTANTIATE_TABLE</code>过程：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>将表添加到备用数据库。</p>
                           </li>
                           <li>
                              <p>在备用数据库中重新创建表。</p>
                           </li>
                        </ul>
                        <p>在CDB中，必须从要实例化的表所在的容器内调用<code class="codeph">INSTANTIATE_TABLE</code>过程。此外，提供给主数据库的数据库链接必须指向主数据库上的相应容器。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-803AAE39-AB03-47DA-95E2-FBDFCAA29755__GUID-F46EE9BA-7ACC-4A1C-82E0-A9ED7CCDA9DD">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.INSTANTIATE_TABLE（schema_name IN VARCHAR2，table_name IN VARCHAR2，dblink IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-803AAE39-AB03-47DA-95E2-FBDFCAA29755__GUID-1069E5E6-6BDF-4BE1-807A-0AF8555CDDBA">参数</p>
                        <div class="tblformal" id="GUID-803AAE39-AB03-47DA-95E2-FBDFCAA29755__GUID-2B802690-FCBF-437A-80DD-044950739EE7">
                           <p class="titleintable">表97-6 INSTANTIATE_TABLE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="INSTANTIATE_TABLE过程参数" width="100%" border="1" summary="This table lists and describes the parameters you can set on the INSTANTIATE_TABLE subprogram of the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e1976">参数</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e1979">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e1984" headers="d530649e1976 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e1984 d530649e1979 ">
                                       <p>架构的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e1992" headers="d530649e1976 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e1992 d530649e1979 ">
                                       <p>要在备用数据库中创建或重新创建的表的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e2000" headers="d530649e1976 ">
                                       <p><code class="codeph">DBLINK</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e2000 d530649e1979 ">
                                       <p>具有在主数据库中读取和锁定表的权限的数据库链接帐户的名称，以及主数据库上的<code class="codeph">SELECT_CATALOG_ROLE</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-803AAE39-AB03-47DA-95E2-FBDFCAA29755__GUID-DC0C384F-AF48-43D2-8F0A-B63BCFF1B81E">例外</p>
                        <div class="tblformal" id="GUID-803AAE39-AB03-47DA-95E2-FBDFCAA29755__GUID-50FBF7DA-244F-473F-968D-607816896160">
                           <p class="titleintable">表97-7 INSTANTIATE_TABLE过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="INSTANTIATE_TABLE过程异常" width="100%" border="1" summary="This table lists and describes the exceptions you might encounter when you use the INSTANTIATE_TABLE subprogram on the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e2023">例外</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e2026">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e2031" headers="d530649e2023 ">
                                       <p><code class="codeph">ORA-16103</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e2031 d530649e2026 ">
                                       <p>必须停止逻辑备用应用才能执行此操作</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e2039" headers="d530649e2023 ">
                                       <p><code class="codeph">ORA-16236</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e2039 d530649e2026 ">
                                       <p>正在进行逻辑备用元数据操作</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e2047" headers="d530649e2023 ">
                                       <p><code class="codeph">ORA-16276</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e2047 d530649e2026 ">
                                       <p>指定的数据库链接与主数据库不对应</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e2055" headers="d530649e2023 ">
                                       <p><code class="codeph">ORA-16277</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e2055 d530649e2026 ">
                                       <p>逻辑备用数据库不支持指定的表</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e2063" headers="d530649e2023 ">
                                       <p><code class="codeph">ORA-16278</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e2063 d530649e2026 ">
                                       <p>指定的表定义了多对象跳过规则</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-803AAE39-AB03-47DA-95E2-FBDFCAA29755__GUID-AD5DF058-0E54-4D9F-BCD0-277EF30C293C">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用此过程以一种方式创建和填充表，以使备用数据库上的数据与主数据库保持事务一致。</p>
                           </li>
                           <li>
                              <p>此表将不与SQL Apply维护的其余表同步，并且SQL Apply将不会开始维护它，直到SQL Apply遇到从主实例化表中后发生的重做。<code class="codeph">DBA_LOGSTDBY_EVENTS</code>视图中提供了从主数据库实例化表的SCN。
                              </p>
                           </li>
                           <li>
                              <p>指定的表必须是逻辑备用数据库支持的表（即，它不会出现在主数据库的<code class="codeph">DBA_LOGSTDBY_UNSUPPORTED_TABLES</code>视图中）。
                              </p>
                           </li>
                           <li>
                              <p>如果有任何特定于此表的跳过规则（没有任何通配符），那么这些跳过规则将作为<code class="codeph">INSTANTIATE_TABLE</code>一部分被删除，以便将来SQL <code class="codeph">INSTANTIATE_TABLE</code>将正确维护该表。如果存在间接引用此表的跳过规则（在<code class="codeph">schema_name</code>或<code class="codeph">table_name</code>匹配跳过规则与通配符，并且具有TABLE，DML或SCHEMA_DDL语句类型），则<code class="codeph">INSTANTIATE_TABLE</code>将失败并显示ORA-16278错误。在重新尝试<code class="codeph">INSTANTIATE_TABLE</code>调用之前，必须删除或更改与该表有关的任何多对象跳过规则。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-803AAE39-AB03-47DA-95E2-FBDFCAA29755__GUID-30067DFE-CAF4-4490-B30F-1CFB4DF579EB">例子</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.INSTANTIATE_TABLE（ -  SCHEMA_NAME =&gt;'HR'，TABLE_NAME =&gt;'EMPLOYEES'， -  DBLINK =&gt;'INSTANTIATE_TBL_LINK'）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66838"></a><a id="ARPLS66838"></a><div class="props_rev_3"><a id="GUID-991B7EE3-939F-4E26-BB10-D9A465529CFE" name="GUID-991B7EE3-939F-4E26-BB10-D9A465529CFE"></a><h4 id="ARPLS-GUID-991B7EE3-939F-4E26-BB10-D9A465529CFE" class="sect4"><span class="enumeration_section">97.4.5</span> IS_APPLY_SERVER函数</h4>
                  <div>
                     <p>如果在逻辑备用应用服务器进程的上下文中从PL / SQL执行此函数，则返回<code class="codeph">TRUE</code> 。
                     </p>
                     <div class="section">
                        <p>此函数与将<code class="codeph">DBMS_DDL.SET_TRIGGER_FIRING_PROPERTY</code>子程序中的<code class="codeph">fire_once</code>参数设置为<code class="codeph">FALSE</code>触发器一起使用（默认值为<code class="codeph">TRUE</code> ）。当应用过程更新相关目标时，执行此类触发器。此功能可以在触发器的主体内使用，以确保触发器在主服务器或备用服务器上执行不同（或不执行）操作。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-991B7EE3-939F-4E26-BB10-D9A465529CFE__GUID-736533EA-37FB-4F1A-AD07-15D7909D8A52">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.IS_APPLY_SERVER RETURN BOOLEAN;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-991B7EE3-939F-4E26-BB10-D9A465529CFE__GUID-3A0EBC82-DA74-4749-B807-3CCA426C2838">参数</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66839"></a><a id="ARPLS66840"></a><a id="ARPLS66840"></a><a id="ARPLS66839"></a><div class="props_rev_3"><a id="GUID-64D1A18C-FFA6-403B-9A32-11BC30735E8C" name="GUID-64D1A18C-FFA6-403B-9A32-11BC30735E8C"></a><h4 id="ARPLS-GUID-64D1A18C-FFA6-403B-9A32-11BC30735E8C" class="sect4"><span class="enumeration_section">97.4.6</span> MAP_PRIMARY_SCN函数</h4>
                  <div>
                     <p>此函数在备用数据库上返回一个SCN，该SCN早于主数据库提供的SCN至少5分钟。</p>
                     <div class="section">
                        <p>它可用于确定在逻辑备用数据库中的补偿闪回数据库操作中使用的安全SCN，在主数据库上进行闪回数据库操作或时间点恢复操作之后。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-64D1A18C-FFA6-403B-9A32-11BC30735E8C__GUID-B8E16A0F-1EA5-4594-965E-0F87ED1BCF93">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.MAP_PRIMARY_SCN（primary_scn NUMBER）返回号码;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-64D1A18C-FFA6-403B-9A32-11BC30735E8C__GUID-4285BC0D-931A-4BF1-85E0-304E6EB6593D">例外</p>
                        <div class="tblformal" id="GUID-64D1A18C-FFA6-403B-9A32-11BC30735E8C__GUID-6974392B-763B-4FFF-9C13-DE9A6A6CEAB9">
                           <p class="titleintable">表97-8 MAP_PRIMARY_SCN函数异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="MAP_PRIMARY_SCN函数异常" width="100%" border="1" summary="This table lists and describes exceptions for the MAP_PRIMARY_SCN Function" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d530649e2342">例外</th>
                                    <th align="left" valign="bottom" width="69%" id="d530649e2345">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e2350" headers="d530649e2342 ">
                                       <p><code class="codeph">ORA-20001</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e2350 d530649e2345 ">
                                       <p>主SCN在映射范围之前</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e2358" headers="d530649e2342 ">
                                       <p><code class="codeph">ORA-20002</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e2358 d530649e2345 ">
                                       <p>SCN映射要求<code class="codeph">PRESERVE_COMMIT_ORDER</code>为<code class="codeph">TRUE</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-64D1A18C-FFA6-403B-9A32-11BC30735E8C__GUID-DE8B9F9B-2699-434F-93F4-BB5C4242C1B4">使用说明</p>
                        <p>使用此函数在逻辑备用数据库上获取与主数据库中的SCN对应的保守SCN。在闪回数据库之后在逻辑备用数据库上执行补偿闪回数据库操作或在主数据库中完成的时间点恢复操作的情况下，此功能非常有用。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66841"></a><a id="ARPLS66842"></a><a id="ARPLS66843"></a><a id="ARPLS66842"></a><a id="ARPLS66843"></a><a id="ARPLS66841"></a><div class="props_rev_3"><a id="GUID-B31DAC7B-D4B8-45DF-BAB3-32725605E9AD" name="GUID-B31DAC7B-D4B8-45DF-BAB3-32725605E9AD"></a><h4 id="ARPLS-GUID-B31DAC7B-D4B8-45DF-BAB3-32725605E9AD" class="sect4"><span class="enumeration_section">97.4.7</span> PREPARE_FOR_NEW_PRIMARY过程</h4>
                  <div>
                     <p>如果备用数据库不是故障转移操作的目标，则必须在故障转移后在逻辑备用数据库上调用<code class="codeph">PREPARE_FOR_NEW_PRIMARY</code>过程。
                     </p>
                     <div class="section">
                        <p>这样的备用数据库必须处理在新主数据库处理的完全相同的重做日志集。此例程确保本地逻辑备用数据库未处理比新主数据库更多的重做，并报告必须替换的存档日志集以确保一致性。替换日志集将在alert.log中报告。必须将这些日志复制到逻辑备用<code class="codeph">ALTER DATABASE REGISTER LOGICAL LOGFILE</code>并使用<code class="codeph">ALTER DATABASE REGISTER LOGICAL LOGFILE</code>语句进行<code class="codeph">ALTER DATABASE REGISTER LOGICAL LOGFILE</code> 。
                        </p>
                        <p>在CDB中，必须从根数据库调用<code class="codeph">PREPARE_FOR_NEW_PRIMARY</code>过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B31DAC7B-D4B8-45DF-BAB3-32725605E9AD__GUID-8FC35D1B-988A-445B-AFED-C95498825DD4">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.PREPARE_FOR_NEW_PRIMARY（VARCHAR2中的FORMER_STANDBY_TYPE，VARCHAR2中的DBLINK）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B31DAC7B-D4B8-45DF-BAB3-32725605E9AD__GUID-983D651C-85F1-4AF0-BAA9-B326E543928D">参数</p>
                        <div class="tblformal" id="GUID-B31DAC7B-D4B8-45DF-BAB3-32725605E9AD__GUID-C453E48A-4510-4F34-BF90-0814C0D0ED82">
                           <p class="titleintable">表97-9 PREPARE_FOR_NEW_PRIMARY过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PREPARE_FOR_NEW_PRIMARY过程参数" width="100%" border="1" summary="This table lists and describes the possible parameters you can supply on the PREPARE_FOR_NEW_PRIMARY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d530649e2503">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d530649e2506">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e2511" headers="d530649e2503 ">
                                       <p><code class="codeph">FORMER_STANDBY_TYPE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e2511 d530649e2506 ">
                                       <p>备用数据库的类型，它是故障转移操作成为新主数据库的目标。如果新主数据库以前是物理备用数据库，则有效值为“ <code class="codeph">PHYSICAL</code> ”;如果新主数据库以前是逻辑备用数据库，则为“ <code class="codeph">LOGICAL</code> ”。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e2525" headers="d530649e2503 ">
                                       <p><code class="codeph">DBLINK</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e2525 d530649e2506 ">
                                       <p>新数据库的数据库名称链接</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B31DAC7B-D4B8-45DF-BAB3-32725605E9AD__GUID-5D1F6B25-2C5F-44BD-85A9-53E96189A815">例外</p>
                        <div class="tblformal" id="GUID-B31DAC7B-D4B8-45DF-BAB3-32725605E9AD__GUID-BFE1BECB-4A10-489E-9EC1-910B06FF84D9">
                           <p class="titleintable">表97-10 PREPARE_FOR_NEW_PRIMARY过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PREPARE_FOR_NEW_PRIMARY过程异常" width="100%" border="1" summary="This table lists and describes error messages that may be returned on the PREPARE_FOR_NEW_PRIMARY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d530649e2545">例外</th>
                                    <th align="left" valign="bottom" width="69%" id="d530649e2548">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e2553" headers="d530649e2545 ">
                                       <p><code class="codeph">ORA-16104</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e2553 d530649e2548 ">
                                       <p>无效的逻辑备用选项。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e2561" headers="d530649e2545 ">
                                       <p><code class="codeph">ORA-16109</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e2561 d530649e2548 ">
                                       <p>无法应用先前主数据库中的日志数据。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B31DAC7B-D4B8-45DF-BAB3-32725605E9AD__GUID-90AF1A35-8473-47B9-A224-71FB735D9C03">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>此例程仅适用于逻辑备用系统。如果新的主数据库以前是逻辑备用数据库且LogMiner字典构建尚未成功完成，则此例程将失败。警报日志中显示的日志文件将称为<span class="italic">终端日志</span> 。用户应记住，文件路径相对于新的主数据库，可能无法在本地解析。在手动注册终端日志时，如果新的主数据库以前是物理备用数据库，则用户应通过调用<code class="codeph">START LOGICAL STANDBY APPLY</code>来完成该过程;如果新的主数据库以前是逻辑备用数据库，则应通过调用<code class="codeph">START LOGICAL STANDBY APPLY NEW PRIMARY</code>来完成该过程。有关任何异常原因的更多详细信息，请参阅警报日志。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B31DAC7B-D4B8-45DF-BAB3-32725605E9AD__GUID-692017C4-1D39-4FC3-BB52-476F4EAD13AE">例子</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.PREPARE_FOR_NEW_PRIMARY（ -  FORMER_STANDBY_TYPE =&gt;'LOGICAL'， -  DBLINK =&gt;'dblink_to_newprimary'）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66844"></a><a id="ARPLS66845"></a><a id="ARPLS66845"></a><a id="ARPLS66844"></a><div class="props_rev_3"><a id="GUID-E8D8AB67-2F8C-4D5D-A906-C2678F5896F4" name="GUID-E8D8AB67-2F8C-4D5D-A906-C2678F5896F4"></a><h4 id="ARPLS-GUID-E8D8AB67-2F8C-4D5D-A906-C2678F5896F4" class="sect4"><span class="enumeration_section">97.4.8</span> PURGE_SESSION过程</h4>
                  <div>
                     <p><code class="codeph">PURGE_SESSION</code>标识已应用于逻辑备用数据库且SQL Apply不再需要的所有已归档重做日志文件。
                     </p>
                     <div class="section">
                        <p>识别后，您可以发出操作系统命令以删除部分或全部不必要的归档重做日志文件。</p>
                        <p>在CDB中，必须从根数据库调用<code class="codeph">PURGE_SESSION</code>过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E8D8AB67-2F8C-4D5D-A906-C2678F5896F4__GUID-7A74D7EA-F394-4F54-8C40-801098B9F663">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.PURGE_SESSION;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E8D8AB67-2F8C-4D5D-A906-C2678F5896F4__GUID-5FD7B0F4-125B-4D05-BEAE-21DFE6F929A2">例外</p>
                        <div class="tblformal" id="GUID-E8D8AB67-2F8C-4D5D-A906-C2678F5896F4__GUID-AC68A9AB-1051-46E2-812A-4F7F74F483C6">
                           <p class="titleintable">表97-11 PURGE_SESSION过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PURGE_SESSION过程异常" width="100%" border="1" summary="This table lists and describes the exceptions you might encounter when you use the PURGE_SESSION subprogram on the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e2712">例外</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e2715">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e2720" headers="d530649e2712 ">
                                       <p><code class="codeph">ORA-01309</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e2720 d530649e2715 ">
                                       <p>无效会话</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E8D8AB67-2F8C-4D5D-A906-C2678F5896F4__GUID-0765ABF4-B05C-4EB5-9249-6E2B6AE5BE6D">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>此过程不会删除存档的重做日志文件。您必须发出操作系统命令才能删除不需要的文件。</p>
                           </li>
                           <li>
                              <p>此过程将更新<code class="codeph">DBA_LOGMNR_PURGED_LOG</code>视图，该视图显示已应用于逻辑备用数据库的已归档重做日志文件。
                              </p>
                           </li>
                           <li>
                              <p>在Oracle数据库<span class="italic">10g</span>第2版，涉及归档重做日志文件（和实际归档重做日志文件）元数据是基于默认设置自动清除<code class="codeph">LOG_AUTO_DELETE</code>中描述的参数<code class="codeph">DBMS_LOGSTDBY.APPLY_SET</code>描述的过程。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E8D8AB67-2F8C-4D5D-A906-C2678F5896F4__GUID-2A93C17C-54C6-4851-8036-C60D4704E362">例</p>
                        <p>识别和删除不必要的文件：</p>
                        <ol>
                           <li>
                              <p>在逻辑备用数据库上输入以下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.PURGE_SESSION;</pre></li>
                           <li>
                              <p>查询<code class="codeph">DBA_LOGMNR_PURGED_LOG</code>视图以列出可以删除的归档重做日志文件：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM DBA_LOGMNR_PURGED_LOG; FILE_NAME ------------------------------------ /boston/arc_dest/arc_1_40_509538672.log / boston / arc_dest / arc_1_41_509538672.log /boston/arc_dest/arc_1_42_509538672.log /boston/arc_dest/arc_1_43_509538672.log /boston/arc_dest/arc_1_44_509538672.log /boston/arc_dest/arc_1_45_509538672.log /boston/arc_dest/arc_1_46_509538672.log / boston / arc_dest / arc_1_47_509538672。日志</pre></li>
                           <li>
                              <p>使用特定于操作系统的命令从文件系统中删除已归档的重做日志文件。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66846"></a><a id="ARPLS66846"></a><div class="props_rev_3"><a id="GUID-E1D26D56-C383-4253-A606-D73993E9D182" name="GUID-E1D26D56-C383-4253-A606-D73993E9D182"></a><h4 id="ARPLS-GUID-E1D26D56-C383-4253-A606-D73993E9D182" class="sect4"><span class="enumeration_section">97.4.9</span> REBUILD程序</h4>
                  <div>
                     <p>如果在故障转移操作之后最近将其角色更改为主数据库的数据库无法在其他逻辑备用数据库所需的重做流中记录相关元数据（包括LogMiner字典），则使用此过程。</p>
                     <div class="section">
                        <p>在CDB中，必须从根数据库调用<code class="codeph">REBUILD</code>过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E1D26D56-C383-4253-A606-D73993E9D182__GUID-B079D46E-C266-4269-8B34-4A1E30F79E13">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.REBUILD;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E1D26D56-C383-4253-A606-D73993E9D182__GUID-BD6064E6-84F1-493C-B74A-A0035D0C8BC0">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>LogMiner字典信息记录在重做日志文件中。备用重做日志文件（如果存在）已存档。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E1D26D56-C383-4253-A606-D73993E9D182__GUID-89BF3C38-80A1-4CCD-9BD1-69CAFA92A10B">例子</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.REBUILD;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66847"></a><a id="ARPLS66848"></a><a id="ARPLS66849"></a><a id="ARPLS66848"></a><a id="ARPLS66849"></a><a id="ARPLS66847"></a><div class="props_rev_3"><a id="GUID-B771E6E3-AF11-48AB-9F82-597CBC1FD001" name="GUID-B771E6E3-AF11-48AB-9F82-597CBC1FD001"></a><h4 id="ARPLS-GUID-B771E6E3-AF11-48AB-9F82-597CBC1FD001" class="sect4"><span class="enumeration_section">97.4.10</span> SET_TABLESPACE过程</h4>
                  <div>
                     <p>此过程将SQL Apply所需的元数据表移动到用户指定的表空间。</p>
                     <div class="section">
                        <p>默认情况下，元数据表在<code class="codeph">SYSAUX</code>表空间中创建。调用此过程时，无法运行SQL Apply。
                        </p>
                        <p>在CDB中，必须从根数据库调用<code class="codeph">SET_TABLESPACE</code>过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B771E6E3-AF11-48AB-9F82-597CBC1FD001__GUID-9C6D9641-8193-4AF1-B24D-417F42B8885F">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.SET_TABLESPACE（VARCHAR2中的NEW_TABLESPACE）</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B771E6E3-AF11-48AB-9F82-597CBC1FD001__GUID-69A2D3A6-451A-4379-B069-32A2689C7EDE">参数</p>
                        <div class="tblformal" id="GUID-B771E6E3-AF11-48AB-9F82-597CBC1FD001__GUID-E3520504-B448-4C52-84DA-0AF872E35CB4">
                           <p class="titleintable">表97-12 SET_TABLE SPACE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_TABLE SPACE过程参数" width="100%" border="1" summary="This table lists and describes the parameters you can set on the SET_TABLESPACE subprogram of the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e3012">参数</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e3015">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e3020" headers="d530649e3012 ">
                                       <p><code class="codeph">NEW_TABLESPACE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e3020 d530649e3015 ">
                                       <p>元数据表将驻留的新表空间的名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B771E6E3-AF11-48AB-9F82-597CBC1FD001__GUID-BBAA2EAF-61A9-429C-AE7B-EF3639378991">例外</p>
                        <div class="tblformal" id="GUID-B771E6E3-AF11-48AB-9F82-597CBC1FD001__GUID-6686A3C4-BC8A-485E-A466-1E015D88B758">
                           <p class="titleintable">表97-13 SET_TABLESPACE过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_TABLESPACE过程异常" width="100%" border="1" summary="This table lists and describes the exceptions you might encounter when you use the SET_TABLESPACE subprogram on the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e3040">例外</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e3043">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e3048" headers="d530649e3040 ">
                                       <p><code class="codeph">ORA-16103</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e3048 d530649e3043 ">
                                       <p>必须停止逻辑备用应用才能执行此操作</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e3056" headers="d530649e3040 ">
                                       <p><code class="codeph">ORA-16236</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e3056 d530649e3043 ">
                                       <p>正在进行逻辑备用元数据操作</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B771E6E3-AF11-48AB-9F82-597CBC1FD001__GUID-38EC5DB7-732D-4BD8-A000-FA0C55AE7699">例子</p>
                        <p>要将元数据表移动到名为<code class="codeph">LOGSTDBY_TBS</code>的新表空间，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SET_TABLESPACE（new_tablespace =&gt;'LOGSTDBY_TBS'）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66850"></a><a id="ARPLS66851"></a><a id="ARPLS66852"></a><a id="ARPLS66853"></a><a id="ARPLS66854"></a><a id="ARPLS73690"></a><a id="ARPLS73691"></a><a id="ARPLS66851"></a><a id="ARPLS66852"></a><a id="ARPLS66853"></a><a id="ARPLS66854"></a><a id="ARPLS73690"></a><a id="ARPLS73691"></a><a id="ARPLS66850"></a><div class="props_rev_3"><a id="GUID-0A383476-631A-44CC-AA6D-5C2506D59492" name="GUID-0A383476-631A-44CC-AA6D-5C2506D59492"></a><h4 id="ARPLS-GUID-0A383476-631A-44CC-AA6D-5C2506D59492" class="sect4"><span class="enumeration_section">97.4.11</span>跳过程序</h4>
                  <div>
                     <p><code class="codeph">SKIP</code>过程可用于定义SQL Apply将使用的规则，以跳过对逻辑备用数据库的某些更改的应用。
                     </p>
                     <div class="section">
                        <p>例如， <code class="codeph">SKIP</code>过程可用于跳过对逻辑备用数据库中表的子集的更改。它还可用于指定不应在逻辑备用数据库中应用的DDL语句，或者应在逻辑备用数据库中应用它们之前进行修改。可能需要修改DDL语句的一个原因是在逻辑备用数据库上容纳不同的目录结构。
                        </p>
                        <div class="infoboxnote" id="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__GUID-5DEB583B-FDAA-4831-85F8-7300AA709629">
                           <p class="notep1">注意：</p>
                           <p>有关跳过容器的信息，请参阅<span class="q">“ <a href="DBMS_LOGSTDBY.html#GUID-0A383476-631A-44CC-AA6D-5C2506D59492__BGBJGGJA">跳过容器”</a> 。</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__GUID-C2CEFDEF-F396-486F-83F9-28AA60E07DFE">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.SKIP（stmt IN VARCHAR2，schema_name IN VARCHAR2 DEFAULT NULL，object_name IN VARCHAR2 DEFAULT NULL，proc_name IN VARCHAR2 DEFAULT NULL，use_like IN BOOLEAN DEFAULT TRUE，esc IN CHAR1 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__GUID-D0BC9185-3CC2-48F0-910C-5170736E7F16">参数</p>
                        <div class="tblformal" id="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__CHDDEIJI">
                           <p class="titleintable">表97-14 SKIP过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="跳过程序参数" width="100%" border="1" summary="This table lists and describes the parameters you set on the SKIP subprogram of the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="15%" id="d530649e3213">参数</th>
                                    <th align="left" valign="bottom" width="85%" id="d530649e3216">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d530649e3221" headers="d530649e3213 ">
                                       <p><code class="codeph">语句</code></p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d530649e3221 d530649e3216 ">
                                       <p>标识一组SQL语句或特定SQL语句的关键字。关键字的使用简化了配置，因为通常由数据库对象定义的关键字标识了对指定对象进行操作的所有SQL语句。<a href="DBMS_LOGSTDBY.html#GUID-0A383476-631A-44CC-AA6D-5C2506D59492__BABGCFCA" title="此表列出并描述了DBMS_LOGSTDBY.SKIP过程的stmt参数的可选关键字。">表97-15</a>显示了关键字列表和等效的SQL语句，其中任何一个都是此参数的有效值。
                                       </p>
                                       <p>关键字<code class="codeph">PL/SQL</code>用于执行支持复制的Oracle提供的包。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d530649e3239" headers="d530649e3213 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d530649e3239 d530649e3216 ">
                                       <p>与<code class="codeph">stmt</code>参数标识的SQL语句关联的一个或多个模式的名称（允许使用通配符）。如果不适用，则必须将此值设置为<code class="codeph">NULL</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d530649e3253" headers="d530649e3213 ">
                                       <p><code class="codeph">OBJECT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d530649e3253 d530649e3216 ">
                                       <p>允许与<code class="codeph">stmt</code>标识的SQL语句关联的一个或多个对象的名称（允许使用通配符）。如果不适用，则必须将此值设置为<code class="codeph">NULL</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d530649e3267" headers="d530649e3213 ">
                                       <p><code class="codeph">proc_name中</code></p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d530649e3267 d530649e3216 ">
                                       <p>当SQL Apply确定特定语句与<code class="codeph">stmt</code> ， <code class="codeph">schema_name</code>和<code class="codeph">object_name</code>参数定义的过滤器匹配时要调用的存储过程的名称。按以下格式指定过程：</p>
                                       <p><code class="codeph">'schema.package.procedure'</code></p>
                                       <p>此过程返回一个值，该值指示SQL Apply执行以下操作之一：执行语句，跳过语句或执行替换语句。</p>
                                       <p>在DDL或PL / SQL的情况下要调用的过程不带参数。您可以通过访问与命名空间关联的上下文<code class="codeph">LSBY_APPLY_CONTEXT</code>来访问过程中所需的各种信息。</p>
                                       <p>有关可在跳过程序的上下文中访问的完整参数列表，请参阅<code class="codeph">DBMS_LOGSTBDY_CONTEXT</code>程序包。
                                       </p>
                                       <p>在DDL的情况下感兴趣的参数是： <code class="codeph">STATEMENT</code> ， <code class="codeph">STATEMENT_TYPE</code> ， <code class="codeph">SCHEMA</code> ， <code class="codeph">NAME</code> ， <code class="codeph">CURENT_SCHEMA</code> ， <code class="codeph">XIDUSN</code> ， <code class="codeph">XIDSLT</code> ， <code class="codeph">XIDSQN</code>和<code class="codeph">SKIP_ACTION</code> 。</p>
                                       <p>PL / SQL中感兴趣的参数是： <code class="codeph">STATEMENT</code> ， <code class="codeph">PACKAGE_SCHMEMA</code> ， <code class="codeph">PACKAGE_NAME</code> ， <code class="codeph">PROCEDURE_NAME</code> ， <code class="codeph">CURRENT_SCHEMA</code> ， <code class="codeph">XIDUSN</code> ， <code class="codeph">XIDSLT</code> ， <code class="codeph">XIDSQN</code> ， <code class="codeph">EXIT_STATUS</code>和<code class="codeph">SKIP_ACTION</code> ..
                                       </p>
                                       <p><span class="bold">注1</span> ： <code class="codeph">DBMS_LOGSTDBY</code> 。 PL / SQL不支持<code class="codeph">SKIP_ACTION_REPLACE</code>常量。</p>
                                       <p><span class="bold">注意2</span> ：SQLApp在处理过程的退出时调用skip处理程序。
                                       </p>
                                       <p><span class="bold">注3</span> ：PL / SQL必须将<code class="codeph">use_like</code>参数设置为<code class="codeph">FALSE</code> ，因为不支持通配符PL / SQL。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d530649e3386" headers="d530649e3213 ">
                                       <p><code class="codeph">proc_name</code> （续）
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d530649e3386 d530649e3216 ">
                                       <p><code class="codeph">DBMS_RLS.DROP_POLICY is as follows:</code>上的示例条件跳过规则<code class="codeph">DBMS_RLS.DROP_POLICY is as follows:</code></p><pre class="oac_no_warn" dir="ltr">创建或替换过程sec.mgr.skip_drop_policy是l_stmt CLOB; l_pkgown varchar2（30）; l_pkgnam varchar2（30）; l_procnm varchar2（30）; l_cur_schema varchar2（30）; l_xidusn数; l_xidslt数; l_xidsqn数; l_exit_status号码; l_skip_action数;开始 - 读取所有相关信息dbms_logstdby_context.get_context（name =&gt;'STATEMENT'，value =&gt; l_stmt）; dbms_logstdby_context.get_context（name =&gt;'PACKAGE_SCHEMA'，value =&gt; l_pkgown）; dbms_logstdby_context.get_context（name =&gt;'PACKAGE_NAME'，value =&gt; l_pkgnam）; dbms_logstdby_context.get_context（name =&gt;'PROCEDURE_NAME'，value =&gt; l_procnm）; dbms_logstdby_context.get_context（name =&gt;'CURRENT_SCHEMA'，value =&gt; l_cur_schema）; dbms_logstdby_context.get_context（name =&gt;'XIDUSN'，value =&gt; l_xidusn）; dbms_logstdby_context.get_context（name =&gt;'XIDSLT'，value =&gt; l_xidslt）; dbms_logstdby_context.get_context（name =&gt;'XIDSQN'，value =&gt; l_xidsqn）; dbms_logstdby_context.get_context（name =&gt;'EXIT_STATUS'，value =&gt; l_ext_status）;如果0 == l_ext_status，则插入到sec_mgr.logit值（'成功：'|| l_pkgown ||'。'|| l_pkgnm ||'。'|| l_procnm ||'by'|| l_current_user）;如果是l_current_user！='TESTSCHEMA'然后l_skip_action：= DBMS_LOGSTDBY.SKIP_ACTION_APPLY;否则l_skip_action：= DBMS_LOGSTDBY.SKIP_ACTION_SKIP;万一;万一; dbms_logstdby_context.set_context（name =&gt;'SKIP_ACTION'，value =&gt; l_skip_action）;结束skip_drop_policy;</pre><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_LOGSTDBY.SKIP（ -  stmt =&gt;'PL / SQL'， -  schema_name =&gt;'SYS'， -  object_name =&gt;'DBMS_RLS.DROP_POLICY'， -  proc_name =&gt;'SEC_MGR.SKIP_DROP_POLICY' -  use_like =&gt; FALSE）;</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d530649e3401" headers="d530649e3213 ">
                                       <p><code class="codeph">use_like</code></p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d530649e3401 d530649e3216 ">
                                       <p>允许模式匹配以隔离要在逻辑备用数据库上跳过的表。<code class="codeph">use_like</code>参数通过搜索第二个指定的模式的第一个值来匹配一个字符值的一部分，并使用输入字符集定义的字符计算字符串。此参数遵循<a href="../sqlrf/Pattern-matching-Conditions.html#SQLRF-GUID-3FA7F5AB-AC64-4200-8F90-294101428C26" target="_blank"><span><cite>Oracle数据库SQL语言参考中</cite></span></a>描述的模式匹配相同的规则。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d530649e3418" headers="d530649e3213 ">
                                       <p><code class="codeph">退出</code></p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d530649e3418 d530649e3216 ">
                                       <p>标识可用于模式匹配的转义字符（例如字符“/”）。如果转义字符出现在字符“％”或“_”之前的模式中，则Oracle会在模式中按字面解释此字符，而不是作为特殊模式匹配字符。有关模式匹配的更多信息，请参见<a href="../sqlrf/Pattern-matching-Conditions.html#SQLRF-GUID-3FA7F5AB-AC64-4200-8F90-294101428C26" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__GUID-F6A0D990-CA14-40F7-A00A-D307620944EE">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>此过程需要<code class="codeph">DBA</code>权限才能执行。
                              </p>
                           </li>
                           <li>
                              <p>您无法关联要在DML语句的上下文中调用的存储过程。例如，以下语句返回<code class="codeph">ORA-16104: invalid Logical Standby option requested</code>错误：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP（ -  stmt =&gt;'DML'， -  schema_name =&gt;'HR'， -  object_name =&gt;'EMPLOYEES'， -  proc_name =&gt;'DML_HANDLER'）;</pre><p>此外，如果事件与多个规则匹配，或者是因为在指定规则时使用通配符，或者是因为重叠规则的规范。例如，如果你指定的规则<code class="codeph">SCHEMA_DDL</code>事件为<code class="codeph">HR.EMPLOYEES</code>表，并为规则<code class="codeph">ALTER TABLE</code>的事件<code class="codeph">HR.EMPLOYEES</code>表中，仅匹配过程之一将被调用（按字母顺序，按程序）。在以下代码示例中，请考虑以下规则：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP（ -  stmt =&gt;'SCHEMA_DDL'， -  schema_name =&gt;'HR'， -  object_name =&gt;'EMPLOYEES'， -  proc_name =&gt;'SCHEMA_DDL_HANDLER'）; SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP（ -  stmt =&gt;'ALTER TABLE'， -  schema_name =&gt;'HR'， -  object_name =&gt;'EMPLOYEES'， -  proc_name =&gt;'TABLE_ALTER_HANDLER'）;</pre><p>在遇到<code class="codeph">ALTER TABLE</code>语句时，将调用<code class="codeph">schema_ddl_handler</code>过程，因为其名称将位于与该语句相关的按字母顺序排序的过程列表的顶部。由于包含通配符条目的规范而对规则集的冲突以类似的方式解决。例如，以下示例中的规则将导致在遇到<code class="codeph">ALTER TABLE HR.EMPLOYEES ADD COLUMN RATING NUMBER</code>语句时调用<code class="codeph">empddl_handler</code>过程：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP（ -  stmt =&gt;'ALTER TABLE'， -  schema_name =&gt;'HR'， -  object_name =&gt;'EMP％'， -  proc_name =&gt;'EMPDDL_HANDLER'）; SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP（ -  stmt =&gt;'ALTER TABLE'， -  schema_name =&gt;'HR'， -  object_name =&gt;'EMPLOYEES'， -  proc_name =&gt;'EMPLOYEE_DDL_HANDLER'）;</pre></li>
                           <li>
                              <p>请谨慎使用<code class="codeph">SKIP</code>过程，尤其是在跳过DDL语句时。例如，如果跳过<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句，则还必须在<code class="codeph">SKIP</code>过程中指定引用该表的其他DDL语句。否则，语句将失败并导致异常。发生这种情况时，SQL Apply停止运行。
                              </p>
                           </li>
                           <li>
                              <p>在调用<code class="codeph">SKIP</code>过程之前，必须暂停SQL Apply。通过发出<code class="codeph">ALTER DATABASE STOP LOGICAL STANDBY APPLY</code>语句来执行此操作。一旦指定了所有需要的过滤器，发出<code class="codeph">ALTER DATABASE START LOGICAL STANDBY APPLY IMMEDIATE</code>语句以使用新的过滤器设置启动SQL Apply。
                              </p>
                           </li>
                           <li>
                              <p>有关反转（撤消） <code class="codeph">SKIP</code>过程设置的信息，请参阅<code class="codeph">UNSKIP</code>过程。
                              </p>
                           </li>
                           <li>
                              <p>对于<code class="codeph">USER</code>语句， <code class="codeph">SCHEMA_NAME</code>参数将是用户，并为<code class="codeph">OBJECT_NAME</code>参数指定'％'。
                              </p>
                           </li>
                           <li>
                              <p>如果提供了<code class="codeph">PROC_NAME</code>参数，则它必须已存在于<code class="codeph">DBA_PROCEDURES</code> ，并且必须以<code class="codeph">DEFINER</code>权限执行。如果使用<code class="codeph">INVOKER</code>权限声明过程，则将返回<code class="codeph">ORA-1031: insufficient privileges</code>消息。
                              </p>
                           </li>
                           <li>
                              <p>如果过程返回<code class="codeph">REPLACEMENT</code>语句，则将使用过程所有者的<code class="codeph">SYSTEM</code>和<code class="codeph">OBJECT</code>特权执行<code class="codeph">REPLACEMENT</code>语句。
                              </p>
                           </li>
                           <li>
                              <p>除非将块声明为自治事务，否则<code class="codeph">SKIP</code>过程的PL / SQL块不能包含事务控制语句（例如， <code class="codeph">COMMIT</code> ， <code class="codeph">ROLLBACK</code> ， <code class="codeph">SAVEPOINT</code>和<code class="codeph">SET CONSTRAINT</code> ）。
                              </p>
                           </li>
                        </ul>
                        <p>跳过声明选项</p>
                        <p><a href="DBMS_LOGSTDBY.html#GUID-0A383476-631A-44CC-AA6D-5C2506D59492__BABGCFCA" title="此表列出并描述了DBMS_LOGSTDBY.SKIP过程的stmt参数的可选关键字。">表97-15</a>列出了<code class="codeph">SKIP</code>过程的<code class="codeph">stmt</code>参数支持的值。该表的左列列出了可用于标识关键字右侧的SQL语句集的关键字。此外， <code class="codeph">sys.audit_actions</code>表中列出的任何SQL语句（如<a href="DBMS_LOGSTDBY.html#GUID-0A383476-631A-44CC-AA6D-5C2506D59492__BABGCFCA" title="此表列出并描述了DBMS_LOGSTDBY.SKIP过程的stmt参数的可选关键字。">表97-15的右栏所示</a> ）也是有效值。请注意，关键字通常由数据库对象定义。
                        </p>
                        <div class="tblformal" id="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__BABGCFCA">
                           <p class="titleintable">表97-15 <code class="codeph">stmt</code>参数的支持值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="stmt参数支持的值" width="100%" border="1" summary="This table lists and describes optional keywords for the stmt parameter of the DBMS_LOGSTDBY.SKIP procedure." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d530649e3615">关键词</th>
                                    <th align="left" valign="bottom" width="69%" id="d530649e3618">关联的SQL语句</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3623" headers="d530649e3615 ">
                                       <p>这组SQL语句没有关键字。</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3623 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">GRANT</code> <code class="codeph">REVOKE</code> ANALYZE TABLE ANALYZE INDEX ANALYZE CLUSTER</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3635" headers="d530649e3615 ">
                                       <p><code class="codeph">簇</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3635 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">AUDIT CLUSTER</code> <code class="codeph">CREATE CLUSTER</code> <code class="codeph">DROP CLUSTER</code> <code class="codeph">TRUNCATE CLUSTER</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3653" headers="d530649e3615 ">
                                       <p><code class="codeph">容器</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3653 d530649e3618 ">
                                       <p>请参阅<span class="q">“ <a href="DBMS_LOGSTDBY.html#GUID-0A383476-631A-44CC-AA6D-5C2506D59492__BGBJGGJA">跳过容器</a> ”</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3664" headers="d530649e3615 ">
                                       <p><code class="codeph">CONTEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3664 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">CREATE CONTEXT</code> <code class="codeph">DROP CONTEXT</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3676" headers="d530649e3615 ">
                                       <p><code class="codeph">数据库链接</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3676 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">CREATE DATABASE LINK</code> <code class="codeph">CREATE PUBLIC DATABASE LINK</code> <code class="codeph">DROP DATABASE LINK</code> <code class="codeph">DROP PUBLIC DATABASE LINK</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3694" headers="d530649e3615 ">
                                       <p><code class="codeph">尺寸</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3694 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ALTER DIMENSION</code> <code class="codeph">CREATE DIMENSION</code> <code class="codeph">DROP DIMENSION</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3709" headers="d530649e3615 ">
                                       <p><code class="codeph">DIRECTORY</code> <a id="fn_1" name="fn_1" href="#fn_1" all="" directory="" objects="" are="" owned="" by="" sys,="" but="" for="" the="" purpose="" of="" filtering="" them="" with="" a="" skip="" directive="" schema="" should="" be="" specified="" as="" '%'="." ="=" onclick="footdisplay(1, "><sup>脚1</sup></a></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3709 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">CREATE DIRECTORY</code> <code class="codeph">DROP DIRECTORY</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3727" headers="d530649e3615 ">
                                       <p><code class="codeph">DML</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3727 d530649e3618 ">
                                       <p>包括表上的DML语句（例如： <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3744" headers="d530649e3615 ">
                                       <p><code class="codeph">指数</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3744 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ALTER INDEX</code> <code class="codeph">CREATE INDEX</code> <code class="codeph">DROP INDEX</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3759" headers="d530649e3615 ">
                                       <p><code class="codeph">NON_SCHEMA_DDL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3759 d530649e3618 ">
                                       <p><span class="italic">所有与特定架构无关的DDL</span></p>
                                       <p><span class="bold">注意：</span> <code class="codeph">SCHEMA_NAME</code>和<code class="codeph">OBJECT_NAME</code>必须为null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3778" headers="d530649e3615 ">
                                       <p><code class="codeph">PL/SQL</code> <a id="fn_2" name="fn_2" href="#fn_2" data="" see="" oracle="" guard="" concepts="" and="" administration="" for="" information="" about="" supported="" packages=")" ="" onclick="footdisplay(2, "><sup>Foot 2</sup></a></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3778 d530649e3618 ">
                                       <p>执行Oracle提供的包。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3795" headers="d530649e3615 ">
                                       <p><code class="codeph">PROCEDURE</code> <a id="fn_3" name="fn_3" href="#fn_3" java="" schema="" objects="" (sources,="" classes,="" and="" resources)="" are="" considered="" the="" same="" as="" procedure="" for="" purposes="" of="" skipping="" (ignoring)="" sql="" statements=")" ="" onclick="footdisplay(3, "><sup>脚3</sup></a></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3795 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ALTER FUNCTION</code> <code class="codeph">ALTER PACKAGE</code> <code class="codeph">ALTER PACKAGE BODY</code> <code class="codeph">ALTER PROCEDURE</code> <code class="codeph">CREATE FUNCTION</code> <code class="codeph">CREATE LIBRARY</code> <code class="codeph">CREATE PACKAGE</code> <code class="codeph">CREATE PACKAGE BODY</code> <code class="codeph">CREATE PROCEDURE</code> <code class="codeph">DROP FUNCTION</code> <code class="codeph">DROP LIBRARY</code> <code class="codeph">DROP PACKAGE</code> <code class="codeph">DROP PACKAGE BODY</code> <code class="codeph">DROP PROCEDURE</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3848" headers="d530649e3615 ">
                                       <p><code class="codeph">轮廓</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3848 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ALTER PROFILE</code> <code class="codeph">CREATE PROFILE</code> <code class="codeph">DROP PROFILE</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3863" headers="d530649e3615 ">
                                       <p><code class="codeph">角色</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3863 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ALTER ROLE</code> <code class="codeph">CREATE ROLE</code> <code class="codeph">DROP ROLE</code> <code class="codeph">SET ROLE</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3881" headers="d530649e3615 ">
                                       <p><code class="codeph">回复声明</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3881 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ALTER ROLLBACK SEGMENT</code> <code class="codeph">CREATE ROLLBACK SEGMENT</code> <code class="codeph">DROP ROLLBACK SEGMENT</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3896" headers="d530649e3615 ">
                                       <p><code class="codeph">SCHEMA_DDL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3896 d530649e3618 ">
                                       <p><span class="italic">创建，修改或删除架构对象的所有DDL语句（例如：表，索引和列）</span></p>
                                       <p><span class="bold">注意：</span> <code class="codeph">SCHEMA_NAME</code>和<code class="codeph">OBJECT_NAME</code> <span class="italic">不得</span>为空</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3918" headers="d530649e3615 ">
                                       <p><code class="codeph">序列</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3918 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ALTER SEQUENCE</code> <code class="codeph">CREATE SEQUENCE</code> <code class="codeph">DROP SEQUENCE</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3933" headers="d530649e3615 ">
                                       <p><code class="codeph">代名词</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3933 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">CREATE PUBLIC SYNONYM</code> <code class="codeph">CREATE SYNONYM</code> <code class="codeph">DROP PUBLIC SYNONYM</code> <code class="codeph">DROP SYNONYM</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3951" headers="d530649e3615 ">
                                       <p><code class="codeph">系统审核</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3951 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">AUDIT</code> <span class="variable" translate="no">SQL_statements</span> <code class="codeph">NOAUDIT</code> <span class="variable" translate="no">SQL_statements</span></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3969" headers="d530649e3615 ">
                                       <p><code class="codeph">表</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3969 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">CREATE TABLE</code> ALTER TABLE <code class="codeph">DROP TABLE</code> <code class="codeph">TRUNCATE TABLE</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3984" headers="d530649e3615 ">
                                       <p><code class="codeph">TABLESPACE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3984 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">CREATE TABLESPACE</code> <code class="codeph">DROP TABLESPACE</code> <code class="codeph">ALTER TABLESPACE</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e3999" headers="d530649e3615 ">
                                       <p><code class="codeph">触发</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e3999 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ALTER TRIGGER</code> <code class="codeph">CREATE TRIGGER</code> <code class="codeph">DISABLE ALL TRIGGERS</code> <code class="codeph">CREATE TRIGGER</code> <code class="codeph">DISABLE ALL TRIGGERS</code> <code class="codeph">DISABLE TRIGGER</code> <code class="codeph">DROP TRIGGER</code> <code class="codeph">ENABLE ALL TRIGGERS</code> <code class="codeph">ENABLE TRIGGER</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e4028" headers="d530649e3615 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e4028 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ALTER TYPE</code> <code class="codeph">ALTER TYPE BODY</code> <code class="codeph">CREATE TYPE</code> <code class="codeph">CREATE TYPE BODY</code> <code class="codeph">DROP TYPE</code> <code class="codeph">DROP TYPE BODY</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e4052" headers="d530649e3615 ">
                                       <p><code class="codeph">用户</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e4052 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ALTER USER</code> <code class="codeph">CREATE USER</code> <code class="codeph">DROP USER</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e4067" headers="d530649e3615 ">
                                       <p><code class="codeph">视图</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e4067 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">CREATE VIEW</code> <code class="codeph">DROP VIEW</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e4079" headers="d530649e3615 ">
                                       <p><code class="codeph">视图</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e4079 d530649e3618 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">CREATE VIEW</code> <code class="codeph">DROP VIEW</code></pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p>所有目录对象都归<code class="codeph">SYS</code> ，但为了使用skip指令过滤它们，应将模式指定为'％'“。
                           </p>
                        <p></p>
                        <p class="tablefootnote"><sup class="tablefootnote">脚注2</sup></p><p>有关受支持的包的信息，请参阅<a href="../sbydb/data-type-ddl-support-on-logical-standby-databases.html#SBYDB00315" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a> 。
                           </p>
                        <p></p>
                        <p class="tablefootnote"><sup class="tablefootnote">脚注3</sup></p><p>Java模式对象（源，类和资源）被认为与跳过（忽略）SQL语句的过程相同。</p>
                        <p></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__GUID-BE98DA83-F897-4480-9450-3408759990F8">例外</p>
                        <div class="tblformal" id="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__GUID-CECC0493-7C9D-4389-A06B-426AB7BE8866">
                           <p class="titleintable">表97-16 DBMS_LOGSTDBY.SKIP过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_LOGSTDBY.SKIP过程异常" width="100%" border="1" summary="This table lists and describes exceptions returned by the DBMS_LOGSTDBY.SKIP subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d530649e4103">例外</th>
                                    <th align="left" valign="bottom" width="69%" id="d530649e4106">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e4111" headers="d530649e4103 ">
                                       <p><code class="codeph">ORA-01031</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e4111 d530649e4106 ">
                                       <p>权限不足：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>程序使用了<code class="codeph">INVOKER</code>权利</p>
                                          </li>
                                          <li>
                                             <p>过程需要<code class="codeph">DBA</code>权限</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e4132" headers="d530649e4103 ">
                                       <p><code class="codeph">ORA-16103</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e4132 d530649e4106 ">
                                       <p>必须停止逻辑备用应用以允许此操作。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e4140" headers="d530649e4103 ">
                                       <p><code class="codeph">ORA-16104</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e4140 d530649e4106 ">
                                       <p>请求的逻辑备用选项无效。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e4148" headers="d530649e4103 ">
                                       <p><code class="codeph">ORA-16203</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e4148 d530649e4106 ">
                                       <p>“无法解释<code class="codeph">SKIP</code>程序的返回值。”</p>
                                       <p>表示<code class="codeph">SKIP</code>过程已生成异常或返回了不明确的值。您可以通过检查<code class="codeph">DBA_LOGSTDBY_EVENTS</code>视图来识别违规过程。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d530649e4167" headers="d530649e4103 ">
                                       <p><code class="codeph">ORA-16236</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d530649e4167 d530649e4106 ">
                                       <p>正在进行逻辑备用元数据操作。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__GUID-14BECB5F-8269-4982-9147-E948017F44D8">例子</p>
                        <dl>
                           <dt class="dlterm"><a name="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__GUID-70C408CA-C96F-44B4-8F07-D0B91D948386"><!-- --></a>示例1。跳过对架构所做的所有DML和DDL更改</dt>
                           <dd>
                              <p>以下示例显示如何指定规则，以便SQL Apply将跳过对HR模式所做的DDL和DML语句。</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP（STMT =&gt;'SCHEMA_DDL'， -  schema_name =&gt;'HR'， -  object_name =&gt;'％'， -  proc_name =&gt; null）; SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP（STMT =&gt;'DML'， -  schema_name =&gt;'HR'， -  object_name =&gt;'％'， -  proc_name =&gt; null）;</pre></dd>
                           <dt class="dlterm"><a name="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__GUID-218E990C-F90B-4EB9-86D5-33A13CCA24AC"><!-- --></a>示例2。创建处理不同文件系统组织的过程</dt>
                           <dd>
                              <p>例如，如果逻辑备用数据库中的文件系统组织与主数据库中的文件系统组织不同，则可以编写<code class="codeph">SKIP</code>过程以透明地处理具有文件规范的DDL语句。只要遵循文件规范字符串的特定命名约定，以下过程就可以处理DDL语句。
                              </p>
                              <ol>
                                 <li>
                                    <p>创建<code class="codeph">SKIP</code>过程来处理表空间DDL语句：</p><pre class="oac_no_warn" dir="ltr">创建或替换过程sys.handle_tbs_ddl IS l_old_stmt varchar2（4000）; l_stmt_typ varcahr2（40）; l_schema varchar2（30）; l_name varchar2（30）; l_xidusn数; l_xidslt数; l_xidsqn数; l_skip_action数; l_new_stmt varchar2（4000）; - 读取所有信息dbms_logstdby_context.get_context（name =&gt;'STATEMENT'，value =&gt; l_old_stmt）; dbms_logstdby_context.get_context（名称=&gt; 'STATEMENT_TYPE'，值=&gt; l_stmt_type）; dbms_logstdby_context.get_context（名称=&gt; '所有者'，值=&gt; l_schema）; dbms_logstdby_context.get_context（名称=&gt; 'NAME'，值=&gt; l_name）; dbms_logstdby_context.get_context（名称=&gt; 'XIDUSN'，值=&gt; l_xidusn）; dbms_logstdby_context.get_context（名称=&gt; 'XIDSLT'，值=&gt; l_xidslt）; dbms_logstdby_context.get_context（名称=&gt; 'XIDSQN'，值=&gt; l_xidsqn）; dbms_logstdby_context.get_context（名称=&gt; 'CONTAINER_NAME'，值=&gt; l_conname）; -   - 包含目录的所有主文件规范 -  / usr / orcl / primary / dbs  - 应该转到/ usr / orcl / stdby目录规范BEGIN l_new_stmt：= replace（l_old_stmt，'/ usr / orcl / primary） / DBS'， '/ USR / ORCL / STDBY'）; l_skip_action：= DBMS_LOGSTDBY.SKIP_ACTION_REPLACE;除此之外的异常l_skip_action：= DBMS_LOGSTDBY.SKIP_ACTION_ERROR; l_new_stmt：= NULL;结束; dbms_logstdby_context.set_context（name =&gt; new_statement，value =&gt; l_new_stmt）; dbms_logstdby_context.set_context（name =&gt;'SKIP_ACTION'，value =&gt; l_skip_action）; END handle_tbs_ddl;</pre></li>
                                 <li>
                                    <p>使用SQL Apply注册<code class="codeph">SKIP</code>过程：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP（stmt =&gt;'TABLESPACE'， -  proc_name =&gt;'SYS.HANDLE_TBS_DDL'）;</pre></li>
                              </ol>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__BGBJGGJA">
                        <p class="subhead3" id="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__GUID-234AA881-D16A-47B7-A38D-AB584066A114">跳过容器</p>
                        <p>要跳过容器（PDB或根），请使用<code class="codeph">CONTAINER</code>关键字。将跳过在容器上执行的所有SQL语句以及对容器执行的任何其他操作。
                        </p>
                        <p>您可以跳过CDB中的特定PDB。例如，以下命令将跳过名为<code class="codeph">PDB1</code>的PDB。该命令必须在根级别执行：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP（stmt =&gt;'CONTAINER'，object_name =&gt;'PDB1'）;</pre><p>如以下示例所示，您也可以仅跳过CDB的根，但不跳过根目录下存在的任何PDB。该命令必须在根级别执行：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP（stmt =&gt;'CONTAINER'，object_name =&gt;'CDB $ ROOT'）;</pre><div class="infoboxnote" id="GUID-0A383476-631A-44CC-AA6D-5C2506D59492__GUID-48C51EE6-8B69-4E0C-B320-D4A63250BE22">
                           <p class="notep1">注意：</p>
                           <p>要为容器创建其他跳过规则，请从容器中创建规则。规则将应用于的容器将自动从创建规则的容器派生。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66855"></a><a id="ARPLS66856"></a><a id="ARPLS66857"></a><a id="ARPLS66856"></a><a id="ARPLS66857"></a><a id="ARPLS66855"></a><div class="props_rev_3"><a id="GUID-267A7172-05AD-443A-9AC6-B4D0CF8208A5" name="GUID-267A7172-05AD-443A-9AC6-B4D0CF8208A5"></a><h4 id="ARPLS-GUID-267A7172-05AD-443A-9AC6-B4D0CF8208A5" class="sect4"><span class="enumeration_section">97.4.12</span> SKIP_ERROR程序</h4>
                  <div>
                     <p>SKIP_ERROR过程指定逻辑备用数据库检测到错误时要采取的操作。</p>
                     <div class="section">
                        <p>遇到错误时，逻辑备用数据库使用此过程中包含的条件来确定操作过程。找到匹配项时的默认操作是跳过错误并继续应用更改。但是，如果提供了过程，则<code class="codeph">SKIP_ERROR</code>可以根据情况采取其他操作。它什么都不做，导致SQL Apply停止，或者它可以更改错误消息文本并停止SQL Apply，或者它实际上可以跳过错误。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-267A7172-05AD-443A-9AC6-B4D0CF8208A5__GUID-F7EB2EE5-BB61-43C2-8104-5D5169779C54">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.SKIP_ERROR（stmt IN VARCHAR2，schema_name IN VARCHAR2 DEFAULT NULL，object_name IN VARCHAR2 DEFAULT NULL，proc_name IN VARCHAR2 DEFAULT NULL，use_like IN BOOLEAN DEFAULT NULL，esc IN CHAR1 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-267A7172-05AD-443A-9AC6-B4D0CF8208A5__GUID-5AF2CC74-217C-4A5A-97CC-7E19C9B4EF86">参数</p>
                        <div class="tblformal" id="GUID-267A7172-05AD-443A-9AC6-B4D0CF8208A5__BDCBGJDC">
                           <p class="titleintable">表97-17 SKIP_ERROR过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SKIP_ERROR过程参数" width="100%" border="1" summary="This table lists and describes the parameters you can set on the SKIP_ERROR subprogram of the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e4354">参数</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e4357">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4362" headers="d530649e4354 ">
                                       <p><code class="codeph">语句</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4362 d530649e4357 ">
                                       <p>标识一组SQL语句或特定SQL语句的关键字。关键字的使用简化了配置，因为通常由数据库对象定义的关键字标识了对指定对象进行操作的所有SQL语句。<a href="DBMS_LOGSTDBY.html#GUID-0A383476-631A-44CC-AA6D-5C2506D59492__BABGCFCA" title="此表列出并描述了DBMS_LOGSTDBY.SKIP过程的stmt参数的可选关键字。">表97-15</a>显示了关键字列表和等效的SQL语句，其中任何一个都是此参数的有效值。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4375" headers="d530649e4354 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4375 d530649e4357 ">
                                       <p>与<code class="codeph">stmt</code>参数标识的SQL语句关联的一个或多个模式的名称（允许使用通配符）。如果不适用，则必须将此值设置为<code class="codeph">NULL</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4389" headers="d530649e4354 ">
                                       <p><code class="codeph">OBJECT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4389 d530649e4357 ">
                                       <p>允许与<code class="codeph">stmt</code>标识的SQL语句关联的一个或多个对象的名称（允许使用通配符）。如果不适用，则必须将此值设置为<code class="codeph">NULL</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4403" headers="d530649e4354 ">
                                       <p><code class="codeph">proc_name中</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4403 d530649e4357 ">
                                       <p>当SQL Apply遇到错误并确定特定语句与<code class="codeph">stmt</code> ， <code class="codeph">schema_name</code>和<code class="codeph">object_name</code>参数定义的过滤器匹配时要调用的存储过程的名称。按以下格式指定过程：</p>
                                       <p><code class="codeph">“‘模式’，‘包’。‘过程’”</code></p>
                                       <p>此过程返回一条错误消息，指示SQL Apply执行以下操作之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>默认跳过错误并继续SQL Apply</p>
                                          </li>
                                          <li>
                                             <p>替换将使用自定义错误消息创建的错误消息，并停止SQL应用</p>
                                          </li>
                                          <li>
                                             <p>什么都不做，导致SQL Apply停止并记录原始错误消息</p>
                                          </li>
                                       </ul>
                                       <p>使用SQL Apply注册的过程不带任何参数。与<code class="codeph">LSBY_APPLY_CONTEXT</code>关联的上下文可用于检索与错误相关的所有相关信息。见<code class="codeph">DBMS_LOGSTDBY_CONTEXT</code>包与相关联的所有参数的列表<code class="codeph">LSBY_APPLY_CONTEXT</code> 。</p>
                                       <p>使用<code class="codeph">SKIP_ERROR</code>注册的过程感兴趣的参数是<code class="codeph">CONTAINER_NAME</code> ， <code class="codeph">STATEMENT</code> ， <code class="codeph">STATEMENT_TYPE</code> ， <code class="codeph">SCHEMA</code> ， <code class="codeph">NAME</code> ， <code class="codeph">XIDUSN</code> ， <code class="codeph">XIDSLT</code> ， <code class="codeph">XIDSQN</code> ， <code class="codeph">ERROR</code>和<code class="codeph">NEW_ERROR</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4482" headers="d530649e4354 ">
                                       <p><code class="codeph">use_like</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4482 d530649e4357 ">
                                       <p>允许模式匹配以隔离要在逻辑备用数据库上跳过的表。<code class="codeph">use_like</code>参数通过搜索第二个指定的模式的第一个值来匹配一个字符值的一部分，并使用输入字符集定义的字符计算字符串。此参数遵循<a href="../sqlrf/Pattern-matching-Conditions.html#SQLRF-GUID-3FA7F5AB-AC64-4200-8F90-294101428C26" target="_blank"><span><cite>Oracle数据库SQL语言参考中</cite></span></a>描述的模式匹配相同的规则。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4499" headers="d530649e4354 ">
                                       <p><code class="codeph">退出</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4499 d530649e4357 ">
                                       <p>标识可用于模式匹配的转义字符（例如字符“％”或“_”）。如果转义字符出现在字符“％”或“_”之前的模式中，则Oracle会在模式中按字面解释此字符，而不是作为特殊模式匹配字符。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-267A7172-05AD-443A-9AC6-B4D0CF8208A5__GUID-3FEA1F2F-7AA2-4DB9-A8E1-9D66BEC9939B">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>当SQL Apply遇到可能会将重做日志应用程序关闭到备用数据库的错误时，将调用提供给<code class="codeph">SKIP_ERROR</code>过程的存储过程。
                              </p>
                           </li>
                           <li>
                              <p>运行此存储过程会影响正在<code class="codeph">DBA_LOGSTDBY_EVENTS</code>表的<code class="codeph">STATUS</code>列中写入的错误。<code class="codeph">STATUS_CODE</code>列保持不变。如果存储过程无效，即apply将停止，然后将<code class="codeph">NEW_ERROR</code>写入事件表。要真正起作用，请在程序中将<code class="codeph">NEW_ERROR</code>设置为<code class="codeph">ERROR</code> 。
                              </p>
                           </li>
                           <li>
                              <p>如果存储过程要求避免关闭，则必须将<code class="codeph">NEW_ERROR</code>设置为<code class="codeph">NULL</code> 。</p>
                           </li>
                           <li>
                              <p>此过程需要<code class="codeph">DBA</code>权限才能执行。
                              </p>
                           </li>
                           <li>
                              <p>对于<code class="codeph">USER</code>语句， <code class="codeph">SCHEMA_NAME</code>参数将是用户，您应该为<code class="codeph">OBJECT_NAME</code>参数指定'％'。
                              </p>
                           </li>
                           <li>
                              <p>如果指定了<code class="codeph">PROC_NAME</code>参数，则它必须已存在于<code class="codeph">DBA_PROCEDURES</code> ，并且必须以<code class="codeph">DEFINERS</code>权限执行。如果使用<code class="codeph">INVOKERS</code>权限声明过程，则将返回<code class="codeph">ORA-1031: insufficient privileges</code>消息。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SKIP_ERROR</code>过程的PL / SQL块不能包含事务控制语句（例如： <code class="codeph">COMMIT</code> ， <code class="codeph">ROLLBACK</code> ， <code class="codeph">SAVEPOINT</code>和SET <code class="codeph">CONSTRAINT</code> ），除非使用以下语法将块声明为自治事务：</p><pre class="oac_no_warn" dir="ltr">PRAGMA AUTONOMOUS_TRANSACTION</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-267A7172-05AD-443A-9AC6-B4D0CF8208A5__GUID-A8BE3F70-10B2-4FD3-8C8A-5C21635CC0EF">例外</p>
                        <div class="tblformal" id="GUID-267A7172-05AD-443A-9AC6-B4D0CF8208A5__GUID-B8C7FBD7-451B-4843-BE12-DEC48054367F">
                           <p class="titleintable">表97-18 SKIP_ERROR过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SKIP_ERROR过程异常" width="100%" border="1" summary="This table lists and describes the exceptions you might encounter when you use the SKIP_ERROR subprogram on the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e4616">例外</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e4619">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4624" headers="d530649e4616 ">
                                       <p><code class="codeph">ORA-01031</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4624 d530649e4619 ">
                                       <p>权限不足：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>程序使用了<code class="codeph">INVOKER</code>权利</p>
                                          </li>
                                          <li>
                                             <p>过程需要<code class="codeph">DBA</code>权限</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4645" headers="d530649e4616 ">
                                       <p><code class="codeph">ORA-16103</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4645 d530649e4619 ">
                                       <p>必须停止逻辑备用应用才能执行此操作</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4653" headers="d530649e4616 ">
                                       <p><code class="codeph">ORA-16104</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4653 d530649e4619 ">
                                       <p>请求无效的逻辑备用选项</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4661" headers="d530649e4616 ">
                                       <p><code class="codeph">ORA-16236</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4661 d530649e4619 ">
                                       <p>正在进行逻辑备用元数据操作</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-267A7172-05AD-443A-9AC6-B4D0CF8208A5__GUID-5200CABE-F13E-487E-A545-F13E8365593D">例1</p>
                        <p>以下示例说明如何指定规则，以便SQL Apply将跳过从任何<code class="codeph">GRANT DDL</code>命令引发的任何错误。
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP_ERROR（'GRANT'）</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-267A7172-05AD-443A-9AC6-B4D0CF8208A5__GUID-997D1B8B-751F-4944-99E2-A316DC649BC6">例2</p>
                        <p>要跳过<code class="codeph">SYS</code>或<code class="codeph">HR</code>模式上的<code class="codeph">GRANT</code>语句的错误，请定义过程<code class="codeph">handle_error_ddl</code>并注册它。在以下示例中，假设<code class="codeph">handle_error_ddl</code>是<code class="codeph">SYS</code>模式中的独立过程。
                        </p>
                        <ol>
                           <li>
                              <p>创建错误处理程序：</p><pre class="oac_no_warn" dir="ltr">CREATE或REPLACE PROCEDURE sys.handle_error_ddl是l_stmt VARCHAR2（4000）; l_stmt_type VARCHAR2（40）; l_schema VARCHAR2（30）; l_name VARCHAR2（30）; l_xidusn NUMBER; l_xidslt NUMBER; l_xidsqn NUMBER; l_error VARCHAR2（4000）; l_conname VARCHAR2（30）; l_newerr VARCHAR2（4000）; BEGIN dbms_logstdby_context.get_context（name =&gt;'STATEMENT'，value =&gt; l_stmt）; dbms_logstdby_context.get_context（名称=&gt; 'STATEMENT_TYPE'，值=&gt; l_stmt_type）; dbms_logstdby_context.get_context（名称=&gt; 'SCHEMA'，值=&gt; l_schema）; dbms_logstdby_context.get_context（名称=&gt; 'NAME'，值=&gt; l_name）; dbms_logstdby_context.get_context（名称=&gt; 'XIDUSN'，值=&gt; l_xidusn）; dbms_logstdby_context.get_context（名称=&gt; 'XIDSLT'，值=&gt; l_xidslt）; dbms_logstdby_context.get_context（名称=&gt; 'XIDSQN'，值=&gt; l_xidsqn）; dbms_logstdby_context.get_context（名称=&gt; '错误'，值=&gt; l_error）; dbms_logstdby_context.get_context（名称=&gt; 'CONTAINER_NAME'，值=&gt; l_conname）; - 我们已经拥有的默认错误l_new_error：= l_error; - 忽略SYS或HR模式上的任何GRANT错误IF INSTR（UPPER（l_stmt），'GRANT'）&gt; 0那么如果l_schema为NULL或（l_schema为非空且（UPPER（l_schema）='SYS'或UPPER（l_schema） ）='HR'）然后l_new_error：= NULL;  - 记录我们刚刚在'SYS'或'HR'模式上跳过错误的事实 - 此处未显示的代码END IF; END IF; dbms_logstdby_context.set_context（name = &gt;'NEW_ERROR'，value =&gt; l_new_error）; END handle_error_ddl; /</pre></li>
                           <li>
                              <p>使用SQL Apply注册错误处理程序：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP_ERROR（ -  statement =&gt;'NON_SCHEMA_DDL'， -  schema_name =&gt; NULL， -  object_name =&gt; NULL， -  proc_name =&gt;'SYS.HANDLE_ERROR_DDL'）;</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS927"></a><a id="ARPLS66858"></a><a id="ARPLS66859"></a><a id="ARPLS66858"></a><a id="ARPLS66859"></a><a id="ARPLS927"></a><div class="props_rev_3"><a id="GUID-D4215C30-F4D1-486A-B83C-978ABC39A037" name="GUID-D4215C30-F4D1-486A-B83C-978ABC39A037"></a><h4 id="ARPLS-GUID-D4215C30-F4D1-486A-B83C-978ABC39A037" class="sect4"><span class="enumeration_section">97.4.13</span> SKIP_TRANSACTION程序</h4>
                  <div>
                     <p>此过程提供了一种跳过（忽略）将事务应用于逻辑备用数据库的方法。您可以通过指定事务标识信息来跳过特定事务。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D4215C30-F4D1-486A-B83C-978ABC39A037__GUID-7FDA5CD2-1D33-4B0C-9707-59775385D39B">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.SKIP_TRANSACTION（xidusn IN NUMBER，xidslt IN NUMBER，xidsqn IN NUMBER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D4215C30-F4D1-486A-B83C-978ABC39A037__GUID-90E817B9-C7D0-46EE-9BDA-7976CD836EF9">参数</p>
                        <div class="tblformal" id="GUID-D4215C30-F4D1-486A-B83C-978ABC39A037__GUID-EC789F2A-7EC1-4CEE-98F5-97EEBB310BB5">
                           <p class="titleintable">表97-19 SKIP_TRANSACTION过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SKIP_TRANSACTION过程参数" width="100%" border="1" summary="This table lists and describes the parameters you set on the SKIP_TRANSACTION subprogram of the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e4827">参数</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e4830">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4835" headers="d530649e4827 ">
                                       <p><code class="codeph">XIDUSN号码</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4835 d530649e4830 ">
                                       <p>事务ID撤消正在跳过的事务的段号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4843" headers="d530649e4827 ">
                                       <p><code class="codeph">XIDSLT号码</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4843 d530649e4830 ">
                                       <p>正在跳过的事务的事务ID槽号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4851" headers="d530649e4827 ">
                                       <p><code class="codeph">XIDSQN号码</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4851 d530649e4830 ">
                                       <p>正在跳过的事务的事务ID序列号</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D4215C30-F4D1-486A-B83C-978ABC39A037__GUID-880D784D-7919-4491-B759-4ABFA6B2C279">使用说明</p>
                        <p>如果SQL Apply因特定事务（例如，DDL事务）而停止，则可以指定该事务ID，然后继续应用。您可以多次调用此过程以获取您希望SQL Apply忽略的事务数。</p>
                        <div class="infoboxnotewarn" id="GUID-D4215C30-F4D1-486A-B83C-978ABC39A037__GUID-1BB18228-FCFE-48B6-81D8-8256D498DF05">
                           <p class="notep1">警告：</p>
                           <p><span class="bold"><code class="codeph">SKIP_TRANSACTION</code></span>是一种固有的危险操作。除非您已通过<span class="bold"><code class="codeph">V$LOGMNR_CONTENTS</code></span>视图检查了相关事务并已在逻辑备用数据库上执行了补偿操作，否则不要调用此过程。<span class="bold"><code class="codeph">SKIP_TRANSACTION</code></span>不是调用以跳过对表的DML更改的适当过程。
                           </p>
                           <p>要跳过DML失败，请使用<span class="bold"><code class="codeph">SKIP</code></span>过程，例如<span class="bold"><code class="codeph">SKIP('DML','MySchema','MyFailed Table').</code></span> 对DML事务使用<span class="bold"><code class="codeph">SKIP_TRANSACTION</code></span>过程可能会跳过其他表的更改，从而在逻辑上破坏它们。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>此过程需要<code class="codeph">DBA</code>权限才能执行。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">DBA_LOGSTDBY_SKIP_TRANSACTION</code>视图列出SQL Apply将跳过的事务。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D4215C30-F4D1-486A-B83C-978ABC39A037__GUID-BD6F4A1A-3668-4ED6-B0B5-1C1C7D8AFF6D">例外</p>
                        <div class="tblformal" id="GUID-D4215C30-F4D1-486A-B83C-978ABC39A037__GUID-3F3F3396-C647-4C9C-AAD2-BDBF431A0B14">
                           <p class="titleintable">表97-20 SKIP_TRANSACTION过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SKIP_TRANSACTION过程异常" width="100%" border="1" summary="This table lists and describes the exceptions you might encounter when you use the SKIP_TRANSACTION subprogram on the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e4918">例外</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e4921">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4926" headers="d530649e4918 ">
                                       <p><code class="codeph">ORA-01031</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4926 d530649e4921 ">
                                       <p>需要<code class="codeph">DBA</code>权限</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4937" headers="d530649e4918 ">
                                       <p><code class="codeph">ORA-16103</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4937 d530649e4921 ">
                                       <p>必须停止逻辑备用应用才能执行此操作</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e4945" headers="d530649e4918 ">
                                       <p><code class="codeph">ORA-16104</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e4945 d530649e4921 ">
                                       <p>请求无效的逻辑备用选项</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D4215C30-F4D1-486A-B83C-978ABC39A037__GUID-F03DAC54-252D-4722-AAA4-D3394AA90078">例子</p>
                        <p>要使用（ <code class="codeph">XIDUSN</code> ）的（ <code class="codeph">XIDUSN</code> ， <code class="codeph">XIDSLT</code> ， <code class="codeph">XIDSQN</code> ）跳过DDL事务，您可以注册规则，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP_TRANSACTION（ -  XIDUSN =&gt; 1，XIDSLT =&gt; 13，XIDSQN =&gt; 1726）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66860"></a><a id="ARPLS66861"></a><a id="ARPLS66861"></a><a id="ARPLS66860"></a><div class="props_rev_3"><a id="GUID-B5B3A174-82B5-437C-80DD-6B389973F8C9" name="GUID-B5B3A174-82B5-437C-80DD-6B389973F8C9"></a><h4 id="ARPLS-GUID-B5B3A174-82B5-437C-80DD-6B389973F8C9" class="sect4"><span class="enumeration_section">97.4.14</span> UNSKIP程序</h4>
                  <div>
                     <p>使用<code class="codeph">UNSKIP</code>过程删除先前使用<code class="codeph">SKIP</code>过程指定的规则。
                     </p>
                     <div class="section">
                        <p><code class="codeph">UNSKIP</code>过程中指定的参数必须完全匹配才能删除已指定的规则。
                        </p>
                        <p><code class="codeph">container_name</code>参数仅在CDB中有效。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B5B3A174-82B5-437C-80DD-6B389973F8C9__GUID-F2018B10-935D-4638-9E42-6C9821D3F3DA">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.UNSKIP（stmt IN VARCHAR2，schema_name IN VARCHAR2 DEFAULT NULL，object_name IN VARCHAR2 DEFUALT NULL，container_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B5B3A174-82B5-437C-80DD-6B389973F8C9__GUID-8CAC6D39-1A43-4BDF-B72B-AFF864E0EE21">参数</p>
                        <p><code class="codeph">UNSKIP</code>过程的参数信息与<code class="codeph">SKIP</code>过程中描述的参数信息相同。有关完整的参数信息，请<a href="DBMS_LOGSTDBY.html#GUID-0A383476-631A-44CC-AA6D-5C2506D59492__CHDDEIJI" title="此表列出并描述了您在DBMS_LOGSTDBY包的SKIP子程序中设置的参数。">参见表97-14</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B5B3A174-82B5-437C-80DD-6B389973F8C9__GUID-F38F5350-D20E-41B1-B533-D27519A3FBCE">例外</p>
                        <div class="tblformal" id="GUID-B5B3A174-82B5-437C-80DD-6B389973F8C9__GUID-DD88197E-275C-4F7B-A698-516F036D1DCF">
                           <p class="titleintable">表97-21 UNSKIP程序例外</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNSKIP程序例外" width="100%" border="1" summary="This table lists and describes the exceptions you might encounter when you use the UNSKIP subprogram on the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e5114">例外</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e5117">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e5122" headers="d530649e5114 ">
                                       <p><code class="codeph">ORA-01031</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e5122 d530649e5117 ">
                                       <p>需要<code class="codeph">DBA</code>权限才能执行此过程</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e5133" headers="d530649e5114 ">
                                       <p><code class="codeph">ORA-16103</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e5133 d530649e5117 ">
                                       <p>必须停止逻辑备用应用才能执行此操作</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e5141" headers="d530649e5114 ">
                                       <p><code class="codeph">ORA-16104</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e5141 d530649e5117 ">
                                       <p>请求无效的逻辑备用选项</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B5B3A174-82B5-437C-80DD-6B389973F8C9__GUID-25DEE588-38F0-4712-AF18-7FB099AB96C6">使用说明</p>
                        <div class="infoboxnotewarn" id="GUID-B5B3A174-82B5-437C-80DD-6B389973F8C9__GUID-C793CBF1-38BC-4159-8874-593B8FE42FC3">
                           <p class="notep1">警告：</p>
                           <p>如果已跳过并且未对表进行DML更改，则必须通过调用<span class="bold"><code class="codeph">INSTANTIATE_TABLE</code></span>过程来跟随对<span class="bold"><code class="codeph">UNSKIP</code></span>过程的调用，以将此表与SQL Apply维护的表同步。
                           </p>
                        </div>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>此过程需要DBA权限才能执行。</p>
                           </li>
                           <li>
                              <p>未扩展<code class="codeph">schema_name</code>或<code class="codeph">object_name</code>参数中传递的通配符。通配符在字符级别匹配。因此，您可以通过调用<code class="codeph">UNSKIP</code>过程仅删除一个指定的规则，并且您将需要一个不同的<code class="codeph">UNSKIP</code>过程调用来删除先前指定的每个规则。
                              </p>
                              <p>例如，假设您已指定以下两个规则以跳过将DML语句应用于<code class="codeph">HR.EMPLOYEE</code>和<code class="codeph">HR.EMPTEMP</code>表：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP（STMT =&gt;'DML'， -  SCHEMA_NAME =&gt;'HR'， -  OBJECT_NAME =&gt;'EMPLOYEE'， -  PROC_NAME =&gt; null）; SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP（STMT =&gt;'DML'， -  SCHEMA_NAME =&gt;'HR'， -  OBJECT_NAME =&gt;'EMPTEMP'， -  PROC_NAME =&gt; null）;</pre><p>在以下示例中， <code class="codeph">TABLE_NAME</code>参数中的通配符不能用于删除指定的规则：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.UNSKIP（STMT =&gt;'DML'， -  SCHEMA_NAME =&gt;'HR'， -  OBJECT_NAME =&gt;'EMP％'）;</pre><p>实际上，此<code class="codeph">UNSKIP</code>过程不匹配任何规则，因为<code class="codeph">TABLE_NAME</code>参数中的通配符字符未展开。相反，通配符将用于完全匹配以查找相应的<code class="codeph">SKIP</code>规则。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS929"></a><a id="ARPLS66862"></a><a id="ARPLS66862"></a><a id="ARPLS929"></a><div class="props_rev_3"><a id="GUID-B1C13C6B-E683-4407-BEC2-00E5EFD5A181" name="GUID-B1C13C6B-E683-4407-BEC2-00E5EFD5A181"></a><h4 id="ARPLS-GUID-B1C13C6B-E683-4407-BEC2-00E5EFD5A181" class="sect4"><span class="enumeration_section">97.4.15</span> UNSKIP_ERROR程序</h4>
                  <div>
                     <p>使用<code class="codeph">UNSKIP_ERROR</code>过程删除先前使用<code class="codeph">SKIP_ERROR</code>过程指定的规则。
                     </p>
                     <div class="section">
                        <p><code class="codeph">UNSKIP_ERROR</code>过程中指定的参数必须与删除已指定规则的过程完全匹配。
                        </p>
                        <p><code class="codeph">container_name</code>参数仅在CDB中有效。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B1C13C6B-E683-4407-BEC2-00E5EFD5A181__GUID-A4C407C1-97DF-4994-9348-944D76565FD4">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.UNSKIP_ERROR（stmt IN VARCHAR2，schema_name IN VARCHAR2 DEFAULT NULL，object_name IN VARCHAR2 DEFAULT NULL，container_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B1C13C6B-E683-4407-BEC2-00E5EFD5A181__GUID-CE150227-15B2-4C70-9AED-96FF6315782A">参数</p>
                        <p>的参数信息用于<code class="codeph">UNSKIP_ERROR</code>过程是相同的，对于所描述的<code class="codeph">SKIP_ERROR</code>过程。有关完整的参数信息，请<a href="DBMS_LOGSTDBY.html#GUID-267A7172-05AD-443A-9AC6-B4D0CF8208A5__BDCBGJDC" title="此表列出并描述了可以在DBMS_LOGSTDBY包的SKIP_ERROR子程序中设置的参数。">参见表97-17</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B1C13C6B-E683-4407-BEC2-00E5EFD5A181__GUID-DA95A4D6-9AF7-4C1A-954C-56D5C7E494CE">例外</p>
                        <div class="tblformal" id="GUID-B1C13C6B-E683-4407-BEC2-00E5EFD5A181__GUID-E644BCF9-8E4E-421C-8BCB-6A0A166E753B">
                           <p class="titleintable">表97-22 UNSKIP_ERROR过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNSKIP_ERROR程序例外" width="100%" border="1" summary="This table lists and describes the exceptions you might encounter when you use the UNSKIP_ERROR subprogram on the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e5354">例外</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e5357">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e5362" headers="d530649e5354 ">
                                       <p><code class="codeph">ORA-01031</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e5362 d530649e5357 ">
                                       <p>需要<code class="codeph">DBA</code>权限</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e5373" headers="d530649e5354 ">
                                       <p><code class="codeph">ORA-16103</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e5373 d530649e5357 ">
                                       <p>必须停止逻辑备用应用才能执行此操作</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e5381" headers="d530649e5354 ">
                                       <p><code class="codeph">ORA-16104</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e5381 d530649e5357 ">
                                       <p>请求无效的逻辑备用选项</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B1C13C6B-E683-4407-BEC2-00E5EFD5A181__GUID-5633B29D-1AC8-4B3C-AF12-4FC98B1F6896">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>此过程需要<code class="codeph">DBA</code>权限才能执行。
                              </p>
                           </li>
                           <li>
                              <p>传递<code class="codeph">schema_name</code>中的通配符或<code class="codeph">object_name</code>参数不会展开。相反，通配符被视为任何其他字符，并进行完全匹配。因此，您可以通过调用<code class="codeph">UNSKIP_ERROR</code>过程仅删除一个指定的规则，并且需要一个不同的<code class="codeph">UNSKIP_ERROR</code>过程调用来删除先前指定的每个规则。
                              </p>
                              <p>例如，假设您已指定以下两个规则来处理<code class="codeph">HR.EMPLOYEE</code>和<code class="codeph">HR.EMPTEMP</code>表：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP_ERROR（STMT =&gt;'DML'， -  SCHEMA_NAME =&gt;'HR'， -  OBJECT_NAME =&gt;'EMPLOYEE'， -  PROC_NAME =&gt;'hr_employee_handler'）; SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP_ERROR（STMT =&gt;'DML'， -  SCHEMA_NAME =&gt;'HR'， -  OBJECT_NAME =&gt;'EMPTEMP'， -  PROC_NAME =&gt;'hr_tempemp_handler'）;</pre><p>在这种情况下，以下<code class="codeph">UNSKIP</code>过程不能用于删除您指定的规则：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.UNSKIP_ERROR（STMT =&gt;'DML'， -  SCHEMA_NAME =&gt;'HR'， -  OBJECT_NAME =&gt;'EMP％'）;</pre><p>实际上， <code class="codeph">UNSKIP</code>过程将不匹配任何规则，因为<code class="codeph">OBJECT_NAME</code>参数中的通配符不会被扩展。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B1C13C6B-E683-4407-BEC2-00E5EFD5A181__GUID-6D699752-42DC-42C7-A673-99F91249BA30">例</p>
                        <p>要删除先前使用SQL Apply注册的处理程序，以便在遇到错误时调用，可以发出以下语句：</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.UNSKIP_ERROR（ -  statement =&gt;'NON_SCHEMA_DDL'， -  schema_name =&gt; NULL， -  object_name =&gt; NULL）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS930"></a><a id="ARPLS66863"></a><a id="ARPLS66864"></a><a id="ARPLS66863"></a><a id="ARPLS66864"></a><a id="ARPLS930"></a><div class="props_rev_3"><a id="GUID-838D761C-8B3D-47AB-A9C6-ECC6835BE00D" name="GUID-838D761C-8B3D-47AB-A9C6-ECC6835BE00D"></a><h4 id="ARPLS-GUID-838D761C-8B3D-47AB-A9C6-ECC6835BE00D" class="sect4"><span class="enumeration_section">97.4.16</span> UNSKIP_TRANSACTION程序</h4>
                  <div>
                     <p>使用<code class="codeph">UNSKIP_TRANSACTION</code>过程删除先前使用<code class="codeph">SKIP_TRANSACTION</code>过程指定的规则。
                     </p>
                     <div class="section">
                        <p><code class="codeph">UNSKIP_TRANSACTION</code>过程中指定的参数必须与删除已指定规则的过程完全匹配。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-838D761C-8B3D-47AB-A9C6-ECC6835BE00D__GUID-6C83431E-BFE5-47CF-9AD2-13E745B6C635">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGSTDBY.UNSKIP_TRANSACTION（xidusn_p IN NUMBER，xidslt_p IN NUMBER，xidsqn_p IN NUMBER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-838D761C-8B3D-47AB-A9C6-ECC6835BE00D__GUID-B927C03C-A7FF-45A3-A018-AE766E5A16D1">参数</p>
                        <div class="tblformal" id="GUID-838D761C-8B3D-47AB-A9C6-ECC6835BE00D__GUID-592E5E2E-8D27-46D8-8E69-D9C17964A001">
                           <p class="titleintable">表97-23 UNSKIP_TRANSACTION过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNSKIP_TRANSACTION程序参数" width="100%" border="1" summary="This table lists and describes the parameters on the UNSKIP_TRANSACTION procedure on the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="21%" id="d530649e5571">参数</th>
                                    <th align="left" valign="bottom" width="79%" id="d530649e5574">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="21%" id="d530649e5579" headers="d530649e5571 ">
                                       <p><code class="codeph">XIDUSN</code></p>
                                    </td>
                                    <td align="left" valign="top" width="79%" headers="d530649e5579 d530649e5574 ">
                                       <p>事务ID撤消正在跳过的事务的段号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="21%" id="d530649e5587" headers="d530649e5571 ">
                                       <p><code class="codeph">XIDSLT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="79%" headers="d530649e5587 d530649e5574 ">
                                       <p>正在跳过的事务的事务ID槽号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="21%" id="d530649e5595" headers="d530649e5571 ">
                                       <p><code class="codeph">XIDSQN</code></p>
                                    </td>
                                    <td align="left" valign="top" width="79%" headers="d530649e5595 d530649e5574 ">
                                       <p>正在跳过的事务的事务ID序列号</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-838D761C-8B3D-47AB-A9C6-ECC6835BE00D__GUID-A5EBBE13-D4DC-4C88-A131-9FA0A7F21DB7">例外</p>
                        <div class="tblformal" id="GUID-838D761C-8B3D-47AB-A9C6-ECC6835BE00D__GUID-D1C68E98-6C6E-44E1-8B47-BB6308DBCA19">
                           <p class="titleintable">表97-24 UNSKIP_TRANSACTION过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNSKIP_TRANSACTION程序例外" width="100%" border="1" summary="This table lists and describes the exceptions you might encounter when you use the UNSKIP_TRANSACTION subprogram on the DBMS_LOGSTDBY package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d530649e5615">例外</th>
                                    <th align="left" valign="bottom" width="73%" id="d530649e5618">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e5623" headers="d530649e5615 ">
                                       <p><code class="codeph">ORA-01031</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e5623 d530649e5618 ">
                                       <p>需要<code class="codeph">DBA</code>权限才能执行此过程</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e5634" headers="d530649e5615 ">
                                       <p><code class="codeph">ORA-16103</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e5634 d530649e5618 ">
                                       <p>必须停止逻辑备用应用才能执行此操作</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d530649e5642" headers="d530649e5615 ">
                                       <p><code class="codeph">ORA-16104</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d530649e5642 d530649e5618 ">
                                       <p>请求无效的逻辑备用选项</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-838D761C-8B3D-47AB-A9C6-ECC6835BE00D__GUID-E9606543-398D-49DF-BE4F-08AE7BE7E785">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>此过程需要<code class="codeph">DBA</code>权限才能执行。
                              </p>
                           </li>
                           <li>
                              <p>查询<code class="codeph">DBA_LOGSTDBY_SKIP_TRANSACTION</code>视图以列出SQL Apply将跳过的事务。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-838D761C-8B3D-47AB-A9C6-ECC6835BE00D__GUID-F484B67F-D634-4516-9818-ED5F47C25BD3">例子</p>
                        <p>要删除最初指定为跳过（ <code class="codeph">XIDUSN</code> ， <code class="codeph">XIDSLT</code> ， <code class="codeph">XIDSQN</code> ）（1.13.1726）的事务应用程序的<code class="codeph">XIDUSN</code> ， <code class="codeph">XIDSLT</code>发出以下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; DBMS_LOGSTDBY.UNSKIP_TRANSACTION（XIDUSN =&gt; 1，XIDSLT =&gt; 13，XIDSQN =&gt; 1726）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
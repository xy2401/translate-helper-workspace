<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_FREQUENT_ITEMSET package enables frequent itemset counting. The two functions are identical except in the input cursor format difference."></meta>
      <meta name="description" content="The DBMS_FREQUENT_ITEMSET package enables frequent itemset counting. The two functions are identical except in the input cursor format difference."></meta>
      <title>DBMS_FREQUENT_ITEMSET</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_FREQUENT_ITEMSET package enables frequent itemset counting. The two functions are identical except in the input cursor format difference."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_FLASHBACK_ARCHIVE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_FS.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_FLASHBACK_ARCHIVE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_FS.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_FREQUENT_ITEMSET</li>
            </ol>
            <a id="GUID-515F434E-A009-4FBE-8C4B-F9D5ABD5107E" name="GUID-515F434E-A009-4FBE-8C4B-F9D5ABD5107E"></a><a id="ARPLS007"></a><a id="ARPLS007"></a>
            
            <h2 id="ARPLS-GUID-515F434E-A009-4FBE-8C4B-F9D5ABD5107E" class="sect2"><span class="enumeration_chapter">71</span> DBMS_FREQUENT_ITEMSET</h2>
         </header>
         <div class="ind">
            <div>
               <p>DBMS_FREQUENT_ITEMSET包启用频繁项集计数。除输入光标格式差异外，这两个功能相同。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_FREQUENT_ITEMSET.html#GUID-A1EF3FF9-D412-4805-B513-47D971FFA5F1" title="DBMS_FREQUENT_ITEMSET包中包含FI_HORIZONTAL函数和FI_TRANSACTIONAL函数子程序。">DBMS_FREQUENT_ITEMSET子程序的摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS66409"></a><a id="ARPLS66410"></a><a id="ARPLS66410"></a><a id="ARPLS66409"></a><div class="props_rev_3"><a id="GUID-A1EF3FF9-D412-4805-B513-47D971FFA5F1" name="GUID-A1EF3FF9-D412-4805-B513-47D971FFA5F1"></a><h3 id="ARPLS-GUID-A1EF3FF9-D412-4805-B513-47D971FFA5F1" class="sect3"><span class="enumeration_section">71.1</span> DBMS_FREQUENT_ITEMSET子程序摘要</h3>
               <div>
                  <p><code class="codeph">DBMS_FREQUENT_ITEMSET</code>包中包含<code class="codeph">FI_HORIZONTAL</code>函数和<code class="codeph">FI_TRANSACTIONAL</code>函数子程序。
                  </p>
                  <div class="tblformal" id="GUID-A1EF3FF9-D412-4805-B513-47D971FFA5F1__GUID-C12A573B-15DE-4B7B-8327-0390206996E3">
                     <p class="titleintable">表71-1 DBMS_FREQUENT_ITEMSET包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_FREQUENT_ITEMSET包子程序" width="100%" border="1" summary="This table lists the DBMS_FREQUENT_ITEMSET subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="32%" id="d440254e213">子程序</th>
                              <th align="left" valign="bottom" width="68%" id="d440254e216">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="32%" id="d440254e221" headers="d440254e213 ">
                                 <p><a href="DBMS_FREQUENT_ITEMSET.html#GUID-6DF870C2-6E1F-4C13-9E9F-88C2598A0B3D" title="此表函数的目的是计算给定光标的所有频繁项集，其中输入数据为“HORIZONTAL”行格式，支持阈值，最小项集长度，最大项集长度，要包括的项目，要排除的项目。结果将是项目集，支持，长度，计算的总事务形式的行表。">FI_HORIZONTAL功能</a></p>
                              </td>
                              <td align="left" valign="top" width="68%" headers="d440254e221 d440254e216 ">
                                 <p>计算所有频繁项目集，给出输入数据的光标，其格式为“ <code class="codeph">HORIZONTAL</code> ”行格式，支持阈值，最小项目集长度，最大项目集长度，要包括的项目，要排除的项目</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="32%" id="d440254e239" headers="d440254e213 ">
                                 <p><a href="DBMS_FREQUENT_ITEMSET.html#GUID-8414C01F-3123-4032-BCB1-56BCDAEF72EE" title="此过程计算给定输入数据的光标的所有频繁项目集，其为“TRANSACTIONAL”行格式，支持阈值，最小项目集长度，最大项目集长度，要包括的项目，要排除的项目。结果将是项目集，支持，长度，事务总数形式的行表。">FI_TRANSACTIONAL函数</a></p>
                              </td>
                              <td align="left" valign="top" width="68%" headers="d440254e239 d440254e216 ">
                                 <p>计算所有频繁项目集，给出输入数据的游标，其格式为“ <code class="codeph">TRANSACTIONAL</code> ”行格式，支持阈值，最小项目集长度，最大项目集长度，要包括的项目，要排除的项目</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS66411"></a><a id="ARPLS66412"></a><a id="ARPLS66413"></a><a id="ARPLS66412"></a><a id="ARPLS66413"></a><a id="ARPLS66411"></a><div class="props_rev_3"><a id="GUID-6DF870C2-6E1F-4C13-9E9F-88C2598A0B3D" name="GUID-6DF870C2-6E1F-4C13-9E9F-88C2598A0B3D"></a><h4 id="ARPLS-GUID-6DF870C2-6E1F-4C13-9E9F-88C2598A0B3D" class="sect4"><span class="enumeration_section">71.1.1</span> FI_HORIZONTAL功能</h4>
                  <div>
                     <p>此表函数的目的是计算给定光标的所有频繁项集，其中输入数据为“ <code class="codeph">HORIZONTAL</code> ”行格式，支持阈值，最小项目集长度，最大项目集长度，要包括的项目，要排除的项目。结果将是项目集，支持，长度，计算的总事务形式的行表。
                     </p>
                     <div class="section">
                        <p>在“ <code class="codeph">HORIZONTAL</code> ”行格式中，每行包含单个事务的所有项ID。由于所有项目都汇集在一起，因此不需要任何事务ID。
                        </p>
                        <p>此表函数的好处是，如果应用程序已经具有水平格式的数据，则数据库可以跳过将事务格式的行转换为水平格式的步骤。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6DF870C2-6E1F-4C13-9E9F-88C2598A0B3D__GUID-CD30E707-38E7-4F77-A4A8-BF660B517B4E">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FREQUENT_ITEMSET.FI_HORIZONTAL（在SYSREFCURSOR中的tranx_cursor，在NUMBER中为support_threshold，在NUMBER中为itemset_length_min，在NUMBER中为itemset_length_max，包含_items在SYS_REFCURSOR DEFAULT中为NULL，except_items为SYS_REFCURSOR DEFAULT NULL）返回行表（项集[项目类型的嵌套表来自tranx_cursor]，支持NUMBER，长度NUMBER，total_tranx NUMBER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6DF870C2-6E1F-4C13-9E9F-88C2598A0B3D__GUID-644262B1-0068-483C-AB85-CDC14A67CA61">参数</p>
                        <div class="tblformal" id="GUID-6DF870C2-6E1F-4C13-9E9F-88C2598A0B3D__GUID-D76D248A-7594-44AD-BDB4-4F5EFA8473F0">
                           <p class="titleintable">表71-2 FI_HORIZONTAL功能参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="FI_HORIZONTAL函数参数" width="100%" border="1" summary="This table describes the parameters of DBMS_FREQUENT_ITEMSET.FI_HORIZONTAL." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d440254e379">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d440254e382">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e387" headers="d440254e379 ">
                                       <p><code class="codeph">tranx_cursor</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d440254e387 d440254e382 ">
                                       <p>用户在调用函数时将提供的游标参数。返回列的数量没有限制。每列游标代表一个项目。游标的所有列必须具有相同的数据类型。item id必须是数字或字符类型（例如， <code class="codeph">VARCHAR2</code> （n））。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e398" headers="d440254e379 ">
                                       <p><code class="codeph">support_threshold</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d440254e398 d440254e382 ">
                                       <p>总交易次数的一小部分。如果[发生的交易数量]除以[交易总数]超过分数，则项目集被称为“频繁”。参数必须是<code class="codeph">NUMBER</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e409" headers="d440254e379 ">
                                       <p><code class="codeph">itemset_length_min</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d440254e409 d440254e382 ">
                                       <p>感兴趣的频繁项目集的最小长度。参数必须是1到20之间的<code class="codeph">NUMBER</code>包括1和20）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e420" headers="d440254e379 ">
                                       <p><code class="codeph">itemset_length_max</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d440254e420 d440254e382 ">
                                       <p>感兴趣的频繁项集的最大长度。此参数必须是1到20之间的<code class="codeph">NUMBER</code>包括1和20），且不得小于<code class="codeph">itemset_length_min</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e434" headers="d440254e379 ">
                                       <p><code class="codeph">including_items</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d440254e434 d440254e382 ">
                                       <p>可以从中获取项目列表的游标。列表中的至少一个项目必须出现在返回的频繁项目集中。默认值为<code class="codeph">NULL</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e445" headers="d440254e379 ">
                                       <p><code class="codeph">excluding_items</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d440254e445 d440254e382 ">
                                       <p>可以从中获取项目列表的游标。列表中的任何项都不会出现在返回的频繁项集中。默认值为<code class="codeph">NULL</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6DF870C2-6E1F-4C13-9E9F-88C2598A0B3D__GUID-23954B24-D8D5-48EB-8F10-ADCA527AEE9F">返回值</p>
                        <div class="tblformal" id="GUID-6DF870C2-6E1F-4C13-9E9F-88C2598A0B3D__GUID-C48E7786-50CF-4583-8BCE-415D7C4F1DE6">
                           <p class="titleintable">表71-3 FI_HORIZONTAL返回值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="FI_HORIZONTAL返回值" width="100%" border="1" summary="This table describes the Return Values for FI_HORIZONTAL." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d440254e468">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d440254e471">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e476" headers="d440254e468 "><pre class="oac_no_warn" dir="ltr">支持</pre></td>
                                    <td align="left" valign="top" width="69%" headers="d440254e476 d440254e471 ">
                                       <p>频繁项集发生的事务数。这将作为<code class="codeph">NUMBER</code>返回。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e486" headers="d440254e468 "><pre class="oac_no_warn" dir="ltr">项目集</pre></td>
                                    <td align="left" valign="top" width="69%" headers="d440254e486 d440254e471 ">
                                       <p>项目集合，计算为频繁项目集。这将作为项类型的嵌套表返回，该表是输入游标的项列类型。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e493" headers="d440254e468 "><pre class="oac_no_warn" dir="ltr">长度</pre></td>
                                    <td align="left" valign="top" width="69%" headers="d440254e493 d440254e471 ">
                                       <p>频繁项目集中的项目数。这将作为<code class="codeph">NUMBER</code>返回。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e503" headers="d440254e468 "><pre class="oac_no_warn" dir="ltr">total_tranx</pre></td>
                                    <td align="left" valign="top" width="69%" headers="d440254e503 d440254e471 ">
                                       <p>总交易次数。这将作为<code class="codeph">NUMBER</code>返回。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6DF870C2-6E1F-4C13-9E9F-88C2598A0B3D__GUID-EA4756D5-29F3-4E8F-9AEE-4390E5EB7055">例</p>
                        <p>假设你有一个表<code class="codeph">horiz_table_in</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">horiz_table_in（iid1 VARCHAR2（30），iid2 VARCHAR2（30），iid3 VARCHAR2（30），iid4 VARCHAR2（30），iid5 VARCHAR2（30））;</pre><p>并且horiz_table_in中的数据如下所示：</p><pre class="oac_no_warn" dir="ltr">（'apple'，'banana'，NULL，NULL，NULL）（'apple'，'milk'，'banana'，NULL，NULL）（'orange'，NULL，NULL，NULL，NULL）</pre><p>假设您想要找出具有30％的给定支持阈值的项目组合，要求项目集包含至少一个（'apple'，'banana'，'orange'），但不包括任何（'milk'） ）在任何项目集中。您使用以下查询：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE fi_varchar_nt AS VARCHAR2表（30）; SELECT CAST（itemset as FI_VARCHAR_NT）itemset，support，length，total_tranx FROM table（DBMS_FREQUENT_ITEMSET.FI_HORIZONTAL（CURSOR（SELECT iid1，iid2，iid3，iid4，iid5 FROM horiz_table_in），0.3,2,5，CURSOR（SELECT * FROM table（ FI_VARCHAR_NT（'apple'，'banana'，'orange'））），CURSOR（SELECT * FROM table（FI_VARCHAR_NT（'milk'）））））;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66414"></a><a id="ARPLS66415"></a><a id="ARPLS66416"></a><a id="ARPLS66415"></a><a id="ARPLS66416"></a><a id="ARPLS66414"></a><div class="props_rev_3"><a id="GUID-8414C01F-3123-4032-BCB1-56BCDAEF72EE" name="GUID-8414C01F-3123-4032-BCB1-56BCDAEF72EE"></a><h4 id="ARPLS-GUID-8414C01F-3123-4032-BCB1-56BCDAEF72EE" class="sect4"><span class="enumeration_section">71.1.2</span> FI_TRANSACTIONAL函数</h4>
                  <div>
                     <p>此过程计算给定输入数据的光标的所有频繁项目集，其为“ <code class="codeph">TRANSACTIONAL</code> ”行格式，支持阈值，最小项目集长度，最大项目集长度，要包括的项目，要排除的项目。结果将是项目集，支持，长度，事务总数形式的行表。
                     </p>
                     <div class="section">
                        <p>在“ <code class="codeph">TRANSACTIONAL</code> ”行格式中，每个事务分布在多个行中。给定事务的所有行都具有相同的事务ID，并且每行具有不同的项ID。组合共享给定事务ID的所有项ID将导致单个事务。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8414C01F-3123-4032-BCB1-56BCDAEF72EE__GUID-8999DEF1-2F21-49B7-9C1C-1C6772ABB571">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FREQUENT_ITEMSET.FI_TRANSACTIONAL（在SYSREFCURSOR中的tranx_cursor，在NUMBER中为support_threshold，在NUMBER中为itemset_length_min，在NUMBER中为itemset_length_max，包含_items在SYS_REFCURSOR DEFAULT中为NULL，except_items为SYS_REFCURSOR DEFAULT NULL）返回行表（项集[项目类型的嵌套表来自tranx_cursor]，支持NUMBER，长度NUMBER，total_tranx NUMBER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8414C01F-3123-4032-BCB1-56BCDAEF72EE__GUID-6F467BD2-51DD-4503-8C73-05DD535E48F2">参数</p>
                        <div class="tblformal" id="GUID-8414C01F-3123-4032-BCB1-56BCDAEF72EE__GUID-A81D0D4E-ABEC-4A81-AB1A-69694A0B0C92">
                           <p class="titleintable">表71-4 <span class="italic"><span class="bold">FI_TRANSACTIONAL函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="FI_TRANSACTIONAL函数参数" width="100%" border="1" summary="This table describes the parameters of DBMS_FREQUENT_ITEMSET.FI_TRANSACTIONAL." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d440254e654">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d440254e657">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e662" headers="d440254e654 ">
                                       <p><code class="codeph">tranx_cursor</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d440254e662 d440254e657 ">
                                       <p>用户在调用函数时将提供的游标参数。它应该在返回的行中返回两列，第一列是事务id，第二列是item id。item id必须是数字或字符类型（例如， <code class="codeph">VARCHAR2</code> （n））。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e673" headers="d440254e654 ">
                                       <p><code class="codeph">support_threshold</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d440254e673 d440254e657 ">
                                       <p>总交易次数的一小部分。如果[发生的交易数量]除以[交易总数]超过分数，则项目集被称为“频繁”。参数必须是<code class="codeph">NUMBER</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e684" headers="d440254e654 ">
                                       <p><code class="codeph">itemset_length_min</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d440254e684 d440254e657 ">
                                       <p>感兴趣的频繁项目集的最小长度。参数必须是1到20之间的<code class="codeph">NUMBER</code>包括1和20）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e695" headers="d440254e654 ">
                                       <p><code class="codeph">itemset_length_max</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d440254e695 d440254e657 ">
                                       <p>感兴趣的频繁项集的最大长度。此参数必须是1到20之间的<code class="codeph">NUMBER</code>包括1和20），且不得小于<code class="codeph">itemset_length_min</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e709" headers="d440254e654 ">
                                       <p><code class="codeph">including_items</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d440254e709 d440254e657 ">
                                       <p>可以从中获取项目列表的游标。列表中的至少一个项目必须出现在将返回的频繁项目集中。默认值为<code class="codeph">NULL</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e720" headers="d440254e654 ">
                                       <p><code class="codeph">excluding_items</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d440254e720 d440254e657 ">
                                       <p>可以从中获取项目列表的游标。列表中的任何项都不会出现在将返回的频繁项集中。默认值为<code class="codeph">NULL</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8414C01F-3123-4032-BCB1-56BCDAEF72EE__GUID-CCCBCC45-96B4-4E56-839B-40C3D03EA8BA">返回值</p>
                        <div class="tblformal" id="GUID-8414C01F-3123-4032-BCB1-56BCDAEF72EE__GUID-0D3C7873-DDEC-4043-9EF5-7E5FFD9BE6D4">
                           <p class="titleintable">表71-5 FI_TRANSACTIONAL返回值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="FI_TRANSACTIONAL返回值" width="100%" border="1" summary="This table describes the Return Values for FI_TRANSACTIONAL." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d440254e743">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d440254e746">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e751" headers="d440254e743 "><pre class="oac_no_warn" dir="ltr">支持</pre></td>
                                    <td align="left" valign="top" width="69%" headers="d440254e751 d440254e746 ">
                                       <p>频繁项集发生的事务数。这将作为<code class="codeph">NUMBER</code>返回。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e761" headers="d440254e743 "><pre class="oac_no_warn" dir="ltr">项目集</pre></td>
                                    <td align="left" valign="top" width="69%" headers="d440254e761 d440254e746 ">
                                       <p>项目集合，计算为频繁项目集。这将作为项类型的嵌套表返回，该表是输入游标的项列类型。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e768" headers="d440254e743 "><pre class="oac_no_warn" dir="ltr">长度</pre></td>
                                    <td align="left" valign="top" width="69%" headers="d440254e768 d440254e746 ">
                                       <p>频繁项目集中的项目数。这将作为<code class="codeph">NUMBER</code>返回。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d440254e778" headers="d440254e743 "><pre class="oac_no_warn" dir="ltr">total_tranx</pre></td>
                                    <td align="left" valign="top" width="69%" headers="d440254e778 d440254e746 ">
                                       <p>总交易次数。这将作为<code class="codeph">NUMBER</code>返回，并且对于所有返回的行将是相同的，类似于报告聚合。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8414C01F-3123-4032-BCB1-56BCDAEF72EE__GUID-7BD64DE2-4FF5-42E0-96D4-C018ED9E9DA5">使用说明</p>
                        <p>应用程序必须预定义输入项类型的嵌套表类型，并在进一步处理之前将输出项集转换为此预定义的嵌套表类型，例如加载到表中。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8414C01F-3123-4032-BCB1-56BCDAEF72EE__GUID-2719AFB0-C3E6-4B51-9C23-9A0D6DA9681A">例子</p>
                        <p>假设输入表<code class="codeph">tranx_table_in</code>如下所示：</p><pre class="oac_no_warn" dir="ltr">（1，'apple'）（1，'banana'）（2，'apple'）（2，'milk'）（2，'banana'）（3，'orange'）</pre><p>并且用户正在尝试查找满足支持阈值60％并且itemset-length大于1的项集（即（apple，banana））。</p>
                        <p>此函数的输出将包含以下输出行：</p><pre class="oac_no_warn" dir="ltr">itemset =（'apple'，'banana'），support = 2，length = 2，total_tranx = 3</pre><p>在提交查询以执行频繁项集计数之前，需要创建项类型的嵌套表。在此示例中，由于item为<code class="codeph">VARCHAR2(30)</code> ，因此必须创建<code class="codeph">VARCHAR2(30)</code>的嵌套表：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE fi_varchar_nt AS VARCHAR2表（30）; SELECT CAST（itemset as FI_VARCHAR_NT）itemset，support，length，total_tranx FROM table（DBMS_FREQUENT_ITEMSET.FI_TRANSACTIONAL（cursor（SELECT tid，iid FROM tranx_table_in），0.6,2,5，NULL，NULL））;</pre><p>这是另一个示例，说明如何包含某些项目并排除计数中的某些项目。</p><pre class="oac_no_warn" dir="ltr">SELECT CAST（itemset as FI_VARCHAR_NT）itemset，support，length，total_tranx FROM table（DBMS_FREQUENT_ITEMSET.FI_TRANSACTIONAL（CURSOR（SELECT tid，iid FROM tranx_table_in），0.6,2,5，CURSOR（SELECT * FROM table（FI_VARCHAR_NT（'apple'， 'banana'，'orange'））），CURSOR（SELECT * FROM table（FI_VARCHAR_NT（'milk'）））））;</pre><p>使用包含/排除项目参数，您可以通过忽略应用程序不期望的项目集来进一步优化执行。</p>
                        <p>您还可以通过集合取消使用事务输出：</p><pre class="oac_no_warn" dir="ltr">选择bt.setid，nt。* FROM（SELECT cast（Itemset as FI_VARCHAR_NT）itemset，rownum setid FROM table（DBMS_FREQUENT_ITEMSET.FI_TRANSACTIONAL（CURSOR（SELECT tid，iid FROM tranx_table_in），0.6,2,5，NULL，NULL）））bt，table（bt.itemset） ）nt;</pre><p>如果要使用insert语句将频繁项集加载到嵌套表中，最好使用<code class="codeph">NESTED_TABLE_FAST_INSERT</code>提示来提高性能：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE fq_nt（coll FI_VARCHAR_NT）NESTED TABLE coll STORE AS coll_nest; INSERT / * + NESTED_TABLE_FAST_INSERT * / INTO fq_nt SELECT cast（itemset as FI_VARCHAR_NT）FROM table（DBMS_FREQUENT_ITEMSET.FI_TRANSACTIONAL（cursor（SELECT tid，iid FROM tranx_table_in），0.6,2,5，NULL，NULL））;</pre><p>请注意，如果要在PL / SQL游标中使用该包，则必须强制转换表函数的返回类型：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE fi_res AS OBJECT（itemset FI_VARCHAR_NT，支持NUMBER，长度NUMBER，total_tranx NUMBER）; / CREATE TYPE fi_coll作为fi_res表; / DECLARE游标freqC是SELECT Itemset FROM表（CAST（DBMS_FREQUENT_ITEMSET.FI_TRANSACTIONAL（游标（SELECT tid，iid FROM tranx_table_in），0.6,2,5，NULL，NULL）AS fi_coll））; coll_nt FI_VARCHAR_NT; num_rows int; num_itms int; BEGIN num_rows：= 0; num_itms：= 0; OPEN freqC; LOOP FETCH freqC INTO coll_nt;当freqC％NOTFOUND时退出; num_rows：= num_rows + 1; num_itms：= num_itms + coll_nt.count;结束循环;关闭freqC; DBMS_OUTPUT.PUT_LINE（'Totally'|| num_rows ||'rows'|| num_itms ||'项目已生成。“）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can export and import optimizer statistics from the data dictionary to user-defined statistics tables. You can also copy statistics from one database to another database.">
      <meta name="description" content="You can export and import optimizer statistics from the data dictionary to user-defined statistics tables. You can also copy statistics from one database to another database.">
      <title>Importing and Exporting Optimizer Statistics</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Tuning Guide">
      <meta property="og:description" content="You can export and import optimizer statistics from the data dictionary to user-defined statistics tables. You can also copy statistics from one database to another database.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Tuning Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-31T14:57:08-08:00">
      <meta name="dcterms.title" content="SQL Tuning Guide">
      <meta name="dcterms.dateCopyrighted" content="2013, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96095-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-historical-optimizer-statistics.html" title="Previous" type="text/html">
      <link rel="next" href="optimizer-statistics-advisor.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGSQL">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-historical-optimizer-statistics.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="optimizer-statistics-advisor.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Tuning Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="optimizer-statistics.html" property="item" typeof="WebPage"><span property="name">Optimizer Statistics</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Importing and Exporting Optimizer Statistics</li>
            </ol>
            <a id="GUID-7F8EE1CC-A173-4B87-AA2E-CD22198EF4F8" name="GUID-7F8EE1CC-A173-4B87-AA2E-CD22198EF4F8"></a>
            
            <h2 id="TGSQL-GUID-7F8EE1CC-A173-4B87-AA2E-CD22198EF4F8" class="sect2"><span class="enumeration_chapter">17 </span>Importing and Exporting Optimizer Statistics
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can export and import optimizer statistics from the data dictionary to user-defined statistics tables. You can also copy statistics from one database to another database.</p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="transporting-optimizer-statistics.html#GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5">About Transporting Optimizer Statistics</a><br>When you transport optimizer statistics between databases, you must use <code class="codeph">DBMS_STATS</code> to copy the statistics to and from a staging table, and tools to make the table contents accessible to the destination database.
                  </li>
                  <li class="ulchildlink"><a href="transporting-optimizer-statistics.html#GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819">Transporting Optimizer Statistics to a Test Database: Tutorial</a><br>You can transport schema statistics from a production database to a test database using Oracle Data Pump.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="optimizer-statistics.html#GUID-0A2F3D52-A135-43E1-9CAB-55BFE068A297" title="The accuracy of an execution plan depends on the quality of the optimizer statistics.">Optimizer Statistics</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL511"></a><a id="TGSQL510"></a><div class="props_rev_3"><a id="GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5" name="GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5"></a><h3 id="TGSQL-GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5" class="sect3"><span class="enumeration_section">17.1 </span>About Transporting Optimizer Statistics
               </h3>
               <div>
                  <p>When you transport optimizer statistics between databases, you must use <code class="codeph">DBMS_STATS</code> to copy the statistics to and from a staging table, and tools to make the table contents accessible to the destination database.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="transporting-optimizer-statistics.html#GUID-B4932C45-6E32-4DBD-9C20-83CFC68EDEF3">Purpose of Transporting Optimizer Statistics</a><br>Importing and exporting are especially useful for testing an application using production statistics.
                     </li>
                     <li class="ulchildlink"><a href="transporting-optimizer-statistics.html#GUID-82FA5DBE-EB10-4B81-A015-576C4C604DC8">How Transporting Optimizer Statistics Works</a><br>The typical transport operation uses a combination of <code class="codeph">DBMS_STATS</code> and file transfer utilities.
                     </li>
                     <li class="ulchildlink"><a href="transporting-optimizer-statistics.html#GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F">User Interface for Importing and Exporting Optimizer Statistics</a><br><code class="codeph">DBMS_STATS</code> provides the interface for importing and exporting statistics for schemas and tables.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="transporting-optimizer-statistics.html#GUID-7F8EE1CC-A173-4B87-AA2E-CD22198EF4F8" title="You can export and import optimizer statistics from the data dictionary to user-defined statistics tables. You can also copy statistics from one database to another database.">Importing and Exporting Optimizer Statistics</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-B4932C45-6E32-4DBD-9C20-83CFC68EDEF3" name="GUID-B4932C45-6E32-4DBD-9C20-83CFC68EDEF3"></a><h4 id="TGSQL-GUID-B4932C45-6E32-4DBD-9C20-83CFC68EDEF3" class="sect4"><span class="enumeration_section">17.1.1 </span>Purpose of Transporting Optimizer Statistics
                  </h4>
                  <div>
                     <p>Importing and exporting are especially useful for testing an application using production statistics.</p>
                     <p>Developers often want to tune query plans in a realistic environment before deploying applications. A typical scenario would be to use <code class="codeph">DBMS_STATS.EXPORT_SCHEMA_STATS</code> to export schema statistics from a production database to a test database.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="transporting-optimizer-statistics.html#GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5" title="When you transport optimizer statistics between databases, you must use DBMS_STATS to copy the statistics to and from a staging table, and tools to make the table contents accessible to the destination database.">About Transporting Optimizer Statistics</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-82FA5DBE-EB10-4B81-A015-576C4C604DC8" name="GUID-82FA5DBE-EB10-4B81-A015-576C4C604DC8"></a><h4 id="TGSQL-GUID-82FA5DBE-EB10-4B81-A015-576C4C604DC8" class="sect4"><span class="enumeration_section">17.1.2 </span>How Transporting Optimizer Statistics Works
                  </h4>
                  <div>
                     <p>The typical transport operation uses a combination of <code class="codeph">DBMS_STATS</code> and file transfer utilities.
                     </p>
                     <p>The following figure illustrates the process using Oracle Data Pump and <code class="codeph">ftp</code>.
                     </p>
                     <div class="figure" id="GUID-82FA5DBE-EB10-4B81-A015-576C4C604DC8__CHDGDHHC">
                        <p class="titleinfigure">Figure 17-1 Transporting Optimizer Statistics</p><img src="img/tgsql_vm_021.png" alt="Description of Figure 17-1 follows" title="Description of Figure 17-1 follows" longdesc="img_text/tgsql_vm_021.html"><br><a href="img_text/tgsql_vm_021.html">Description of "Figure 17-1 Transporting Optimizer Statistics"</a></div>
                     <!-- class="figure" -->
                     <p>The basic steps are as follows:</p>
                     <ol>
                        <li>
                           <p>In the production database, copy the statistics from the data dictionary to a staging table using <code class="codeph">DBMS_STATS.EXPORT_SCHEMA_STATS</code>.
                           </p>
                        </li>
                        <li>
                           <p>Export the statistics from the staging table to a <code class="codeph">.dmp</code> file using Oracle Data Pump.
                           </p>
                        </li>
                        <li>
                           <p>Transfer the <code class="codeph">.dmp</code> file from the production host to the test host using a transfer tool such as <code class="codeph">ftp</code>.
                           </p>
                        </li>
                        <li>
                           <p>In the test database, import the statistics from the <code class="codeph">.dmp</code> file to a staging table using Oracle Data Pump.
                           </p>
                        </li>
                        <li>
                           <p>Copy the statistics from the staging table to the data dictionary using <code class="codeph">DBMS_STATS.IMPORT_SCHEMA_STATS</code>.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="transporting-optimizer-statistics.html#GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5" title="When you transport optimizer statistics between databases, you must use DBMS_STATS to copy the statistics to and from a staging table, and tools to make the table contents accessible to the destination database.">About Transporting Optimizer Statistics</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F" name="GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F"></a><h4 id="TGSQL-GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F" class="sect4"><span class="enumeration_section">17.1.3 </span>User Interface for Importing and Exporting Optimizer Statistics
                  </h4>
                  <div>
                     <p><code class="codeph">DBMS_STATS</code> provides the interface for importing and exporting statistics for schemas and tables.
                     </p>
                     <div class="section">
                        <p>The following subprograms in <code class="codeph">DBMS_STATS</code> enable you to export schemas and different types of tables.
                        </p>
                        <div class="tblformal" id="GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F__TABLE_B4Q_MDJ_QGB">
                           <p class="titleintable">Table 17-1 Subprograms for Exporting Schema and Table Statistics</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Subprograms for Exporting Schema and Table Statistics" summary="These subprograms enables you to export statistics." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d90245e680">Subprogram</th>
                                    <th align="left" valign="bottom" width="20%" id="d90245e682">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d90245e686" headers="d90245e680 ">
                                       <p><code class="codeph">EXPORT_DATABASE_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d90245e686 d90245e682 ">
                                       <p><span>This procedure exports statistics for all objects in the database and stores them in the user statistics tables identified by <code class="codeph">statown.stattab</code>.</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d90245e698" headers="d90245e680 ">
                                       <p><code class="codeph">EXPORT_DICTIONARY_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d90245e698 d90245e682 ">
                                       <p><span>This procedure exports statistics for all data dictionary schemas (<code class="codeph">SYS</code>, <code class="codeph">SYSTEM</code>, and RDBMS component schemas) and stores them in the user statistics table identified by <code class="codeph">stattab</code>.</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d90245e716" headers="d90245e680 ">
                                       <p><code class="codeph">EXPORT_FIXED_OBJECT_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d90245e716 d90245e682 ">
                                       <p><span>This procedure exports statistics for fixed tables and stores them in the user statistics table identified by <code class="codeph">stattab</code>.</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d90245e728" headers="d90245e680 ">
                                       <p><code class="codeph">EXPORT_SCHEMA_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d90245e728 d90245e682 ">
                                       <p><span>This procedure exports statistics for all objects in the schema identified by <code class="codeph">ownname</code> and stores them in the user statistics tables identified by <code class="codeph">stattab</code>.</span></p>
                                       <p>By default, the <code class="codeph">stat_category</code> parameter includes statistics collected during <span>real-time statistics</span>. The <code class="codeph">REALTIME_STATS</code> value specifies only online statistics.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d90245e754" headers="d90245e680 ">
                                       <p><code class="codeph">EXPORT_TABLE_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d90245e754 d90245e682 ">
                                       <p><span>This procedure exports statistics for a specified table (including associated index statistics) and stores them in the user statistics table identified by <code class="codeph">stattab</code>.</span></p>
                                       <p>By default, the <code class="codeph">stat_category</code> parameter includes statistics collected during <span>real-time statistics</span>. The <code class="codeph">REALTIME_STATS</code> value specifies only online statistics.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>The following subprograms in <code class="codeph">DBMS_STATS</code> enable you to import schemas and different types of tables.
                        </p>
                        <div class="tblformal" id="GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F__TABLE_C4Q_MDJ_QGB">
                           <p class="titleintable">Table 17-2 Subprograms for Importing Optimizer Statistics</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Subprograms for Importing Optimizer Statistics" summary="These subprograms enables you to import statistics." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d90245e791">Subprogram</th>
                                    <th align="left" valign="bottom" id="d90245e793">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d90245e797" headers="d90245e791 ">
                                       <p><code class="codeph">IMPORT_DATABASE_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d90245e797 d90245e793 ">
                                       <p><span>This procedure imports statistics for all objects in the database from the user statistics table and stores them in the data dictionary.</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d90245e806" headers="d90245e791 ">
                                       <p><code class="codeph">IMPORT_DICTIONARY_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d90245e806 d90245e793 ">
                                       <p><span>This procedure imports statistics for all data dictionary schemas (<code class="codeph">SYS</code>, <code class="codeph">SYSTEM</code>, and RDBMS component schemas) from the user statistics table and stores them in the dictionary.</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d90245e821" headers="d90245e791 ">
                                       <p><code class="codeph">IMPORT_FIXED_OBJECT_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d90245e821 d90245e793 "><span>This procedure imports statistics for fixed tables from the user statistics table and stores them in the data dictionary.</span></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d90245e829" headers="d90245e791 ">
                                       <p><code class="codeph">IMPORT_SCHEMA_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d90245e829 d90245e793 ">
                                       <p><span>This procedure imports statistics for all objects in the schema identified by <code class="codeph">ownname</code> from the user statistics table and stores them in the data dictionary.</span></p>
                                       <p>By default, the <code class="codeph">stat_category</code> parameter includes statistics collected during <span>real-time statistics</span>. The <code class="codeph">REALTIME_STATS</code> value specifies only online statistics.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d90245e852" headers="d90245e791 ">
                                       <p><code class="codeph">IMPORT_TABLE_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d90245e852 d90245e793 ">
                                       <p><span>This procedure import statistics for a specified table from the user statistics table identified by <code class="codeph">stattab</code> and stores them in the data dictionary.</span></p>
                                       <p>By default, the <code class="codeph">stat_category</code> parameter includes statistics collected during <span>real-time statistics</span>. The <code class="codeph">REALTIME_STATS</code> value specifies only online statistics.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F__GUID-BB36EFA2-98A6-4AA0-A3B9-1DB4597E1DFF">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/DBMS_STATS.html#GUID-B930CE9B-7461-4691-8AA9-7E424C3C2C8C" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn about <code class="codeph">DBMS_STATS</code></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="transporting-optimizer-statistics.html#GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5" title="When you transport optimizer statistics between databases, you must use DBMS_STATS to copy the statistics to and from a staging table, and tools to make the table contents accessible to the destination database.">About Transporting Optimizer Statistics</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL513"></a><a id="TGSQL514"></a><a id="TGSQL512"></a><div class="props_rev_3"><a id="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819" name="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819"></a><h3 id="TGSQL-GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819" class="sect3"><span class="enumeration_section">17.2 </span>Transporting Optimizer Statistics to a Test Database: Tutorial
               </h3>
               <div>
                  <p>You can transport schema statistics from a production database to a test database using Oracle Data Pump.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819__GUID-5F1BA4CD-CBB9-4EDE-A7D8-70EE0CBE240F">Prerequisites and Restrictions</p>
                     <p>When preparing to export optimizer statistics, note the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Before exporting statistics, you must create a table to hold the statistics. The procedure <code class="codeph">DBMS_STATS.CREATE_STAT_TABLE</code> creates the statistics table.
                           </p>
                        </li>
                        <li>
                           <p>The optimizer does not use statistics stored in a user-owned table. The only statistics used by the optimizer are the statistics stored in the data dictionary. To make the optimizer use statistics in user-defined tables, import these statistics into the data dictionary using the <code class="codeph">DBMS_STATS</code> import procedure.
                           </p>
                        </li>
                        <li>
                           <p>The Data Pump Export and Import utilities export and import optimizer statistics from the database along with the table. When a column has system-generated names, Original Export (<code class="codeph">exp</code>) does not export statistics with the data, but this restriction does not apply to Data Pump Export.
                           </p>
                           <div class="infoboxnote" id="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819__GUID-D12605BA-B39D-452A-B1A6-56416622B71F">
                              <p class="notep1">Note:</p>
                              <p>Exporting and importing statistics using <code class="codeph">DBMS_STATS</code> is a distinct operation from using Data Pump Export and Import.
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819__GUID-31029EEA-F4E0-40B9-96C3-0DF96681BF5C">Assumptions</p>
                     <p>This tutorial assumes the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You want to generate representative <code class="codeph">sh</code> schema statistics on a production database and use <code class="codeph">DBMS_STATS</code> to import them into a test database.
                           </p>
                        </li>
                        <li>
                           <p>Administrative user <code class="codeph">dba1</code> exists on both production and test databases.
                           </p>
                        </li>
                        <li>
                           <p>You intend to create table <code class="codeph">opt_stats</code> to store the schema statistics.
                           </p>
                        </li>
                        <li>
                           <p>You intend to use Oracle Data Pump to export and import table <code class="codeph">opt_stats</code>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819__GUID-221DA4EC-8555-48C1-B433-3F10D03261FB">To generate schema statistics and import them into a separate database:</p>
                     <ol>
                        <li>
                           <p>On the production host, start SQL*Plus and connect to the production database as administrator <code class="codeph">dba1</code>.
                           </p>
                        </li>
                        <li>
                           <p>Create a table to hold the production statistics.</p>
                           <p>For example, execute the following PL/SQL program to create user statistics table <code class="codeph">opt_stats</code>:
                           </p><pre class="pre codeblock"><code>BEGIN
  DBMS_STATS.CREATE_STAT_TABLE ( 
    ownname =&gt; 'dba1'
,   stattab =&gt; 'opt_stats'
);
END;
/
</code></pre></li>
                        <li>
                           <p>Gather schema statistics.</p>
                           <p>For example, manually gather schema statistics as follows:</p><pre class="pre codeblock"><code>-- generate representative workload
EXEC DBMS_STATS.GATHER_SCHEMA_STATS('SH');
</code></pre></li>
                        <li>
                           <p>Use <code class="codeph">DBMS_STATS</code> to export the statistics.
                           </p>
                           <p>For example, retrieve schema statistics and store them in the <code class="codeph">opt_stats</code> table created previously:
                           </p><pre class="pre codeblock"><code>BEGIN
  DBMS_STATS.EXPORT_SCHEMA_STATS (
    ownname =&gt; 'dba1'
,   stattab =&gt; 'opt_stats'
);
END;
/
</code></pre></li>
                        <li>
                           <p>Use Oracle Data Pump to export the contents of the statistics table.</p>
                           <p>For example, run the <code class="codeph">expdp</code> command at the operating schema prompt:
                           </p><pre class="pre codeblock"><code>expdp dba1 DIRECTORY=dpump_dir1 DUMPFILE=stat.dmp TABLES=opt_stats
</code></pre></li>
                        <li>
                           <p>Transfer the dump file to the test database host.</p>
                        </li>
                        <li>
                           <p>Log in to the test host, and then use Oracle Data Pump to import the contents of the statistics table.</p>
                           <p>For example, run the <code class="codeph">impdp</code> command at the operating schema prompt:
                           </p><pre class="pre codeblock"><code>impdp dba1 DIRECTORY=dpump_dir1 DUMPFILE=stat.dmp TABLES=opt_stats 
</code></pre></li>
                        <li>
                           <p>On the test host, start SQL*Plus and connect to the test database as administrator <code class="codeph">dba1</code>.
                           </p>
                        </li>
                        <li>
                           <p>Use <code class="codeph">DBMS_STATS</code> to import statistics from the user statistics table and store them in the data dictionary.
                           </p>
                           <p>The following PL/SQL program imports schema statistics from table <code class="codeph">opt_stats</code> into the data dictionary:
                           </p><pre class="pre codeblock"><code>BEGIN
  DBMS_STATS.IMPORT_SCHEMA_STATS( 
    ownname =&gt; 'dba1'
,   stattab =&gt; 'opt_stats' 
);
END;
/</code></pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819__GUID-9374E18A-E495-4688-90D0-F6681C445C8D">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-A323DD4F-1A05-4247-BEC6-1A7103660DAF" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn about the <code class="codeph">DBMS_STATS.CREATE_STAT_TABLE</code> function
                           </p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_STATS.html#ARPLS68491" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for an overview of the statistics transfer functions
                           </p>
                        </li>
                        <li>
                           <p><a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> to learn about Oracle Data Pump
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="transporting-optimizer-statistics.html#GUID-7F8EE1CC-A173-4B87-AA2E-CD22198EF4F8" title="You can export and import optimizer statistics from the data dictionary to user-defined statistics tables. You can also copy statistics from one database to another database.">Importing and Exporting Optimizer Statistics</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
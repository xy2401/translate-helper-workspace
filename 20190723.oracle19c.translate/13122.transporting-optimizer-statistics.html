<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can export and import optimizer statistics from the data dictionary to user-defined statistics tables. You can also copy statistics from one database to another database."></meta>
      <meta name="description" content="You can export and import optimizer statistics from the data dictionary to user-defined statistics tables. You can also copy statistics from one database to another database."></meta>
      <title>导入和导出优化程序统计信息</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Tuning Guide"></meta>
      <meta property="og:description" content="You can export and import optimizer statistics from the data dictionary to user-defined statistics tables. You can also copy statistics from one database to another database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T14:57:08-08:00"></meta>
      <meta name="dcterms.title" content="SQL Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2013, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96095-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-historical-optimizer-statistics.html" title="Previous" type="text/html"></link>
      <link rel="next" href="optimizer-statistics-advisor.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGSQL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-historical-optimizer-statistics.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="optimizer-statistics-advisor.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="optimizer-statistics.html" property="item" typeof="WebPage"><span property="name">优化器统计</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">导入和导出优化程序统计信息</li>
            </ol>
            <a id="GUID-7F8EE1CC-A173-4B87-AA2E-CD22198EF4F8" name="GUID-7F8EE1CC-A173-4B87-AA2E-CD22198EF4F8"></a>
            
            <h2 id="TGSQL-GUID-7F8EE1CC-A173-4B87-AA2E-CD22198EF4F8" class="sect2"><span class="enumeration_chapter">17</span>导入和导出优化程序统计信息</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以将优化程序统计信息从数据字典导出并导入到用户定义的统计信息表。您还可以将统计信息从一个数据库复制到另一个数</p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="transporting-optimizer-statistics.html#GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5">关于传输优化程序统计信息</a><br>在数据库之间传输优化程序统计信息时，必须使用<code class="codeph">DBMS_STATS</code>将统计信息复制到登台表和从登台表复制统计信息，并使用工具使目标数据库可以访问表内容。
                  </li>
                  <li class="ulchildlink"><a href="transporting-optimizer-statistics.html#GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819">将优化程序统计信息传输到测试数据库：教程</a><br>您可以使用Oracle Data Pump将架构统计信息从生产数据库传输到测试数据库。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="optimizer-statistics.html#GUID-0A2F3D52-A135-43E1-9CAB-55BFE068A297" title="执行计划的准确性取决于优化程序统计信息的质量。">优化程序统计信息</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL511"></a><a id="TGSQL510"></a><div class="props_rev_3"><a id="GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5" name="GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5"></a><h3 id="TGSQL-GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5" class="sect3"><span class="enumeration_section">17.1</span>关于传输优化程序统计信息</h3>
               <div>
                  <p>在数据库之间传输优化程序统计信息时，必须使用<code class="codeph">DBMS_STATS</code>将统计信息复制到登台表和从登台表复制统计信息，并使用工具使目标数据库可以访问表内容。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="transporting-optimizer-statistics.html#GUID-B4932C45-6E32-4DBD-9C20-83CFC68EDEF3">传输优化程序统计信息的目的</a><br>导入和导出对于使用生产统计信息测试应用程序特别有用。
                     </li>
                     <li class="ulchildlink"><a href="transporting-optimizer-statistics.html#GUID-82FA5DBE-EB10-4B81-A015-576C4C604DC8">传输优化程序统计信息的工作原理</a><br>典型的传输操作使用<code class="codeph">DBMS_STATS</code>和文件传输实用程序的组合。
                     </li>
                     <li class="ulchildlink"><a href="transporting-optimizer-statistics.html#GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F">用于导入和导出优化程序统计信息的用户界面</a><br><code class="codeph">DBMS_STATS</code>提供用于导入和导出模式和表的统计信息的接口。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="transporting-optimizer-statistics.html#GUID-7F8EE1CC-A173-4B87-AA2E-CD22198EF4F8" title="您可以将优化程序统计信息从数据字典导出并导入到用户定义的统计信息表。您还可以将统计信息从一个数据库复制到另一个数">导入和导出优化程序统计信息</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-B4932C45-6E32-4DBD-9C20-83CFC68EDEF3" name="GUID-B4932C45-6E32-4DBD-9C20-83CFC68EDEF3"></a><h4 id="TGSQL-GUID-B4932C45-6E32-4DBD-9C20-83CFC68EDEF3" class="sect4"><span class="enumeration_section">17.1.1</span>传输优化器统计信息的目的</h4>
                  <div>
                     <p>导入和导出对于使用生产统计信息测试应用程序特别有用。</p>
                     <p>开发人员通常希望在部署应用程序之前在实际环境中调整查询计划。典型情况是使用<code class="codeph">DBMS_STATS.EXPORT_SCHEMA_STATS</code>将架构统计信息从生产数据库导出到测试数据库。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-optimizer-statistics.html#GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5" title="在数据库之间传输优化程序统计信息时，必须使用DBMS_STATS将统计信息复制到登台表和从登台表复制统计信息，并使用工具使目标数据库可以访问表内容。">关于传输优化程序统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-82FA5DBE-EB10-4B81-A015-576C4C604DC8" name="GUID-82FA5DBE-EB10-4B81-A015-576C4C604DC8"></a><h4 id="TGSQL-GUID-82FA5DBE-EB10-4B81-A015-576C4C604DC8" class="sect4"><span class="enumeration_section">17.1.2</span>传输优化程序统计信息的工作<span class="enumeration_section">原理</span></h4>
                  <div>
                     <p>典型的传输操作使用<code class="codeph">DBMS_STATS</code>和文件传输实用程序的组合。
                     </p>
                     <p>下图说明了使用Oracle Data Pump和<code class="codeph">ftp</code> 。
                     </p>
                     <div class="figure" id="GUID-82FA5DBE-EB10-4B81-A015-576C4C604DC8__CHDGDHHC">
                        <p class="titleinfigure">图17-1传输优化器统计信息</p><img src="img/tgsql_vm_021.png" alt="下面是图17-1的描述" title="下面是图17-1的描述" longdesc="img_text/tgsql_vm_021.html"><br><a href="img_text/tgsql_vm_021.html">“图17-1传输优化器统计信息”的说明</a></div>
                     <!-- class="figure" -->
                     <p>基本步骤如下：</p>
                     <ol>
                        <li>
                           <p>在生产数据库中，使用<code class="codeph">DBMS_STATS.EXPORT_SCHEMA_STATS</code>将统计信息从数据字典复制到临时表。</p>
                        </li>
                        <li>
                           <p>使用Oracle Data Pump将登台表中的统计信息导出到<code class="codeph">.dmp</code>文件。
                           </p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">ftp</code>等传输工具将<code class="codeph">.dmp</code>文件从生产主机传输到测试主机。
                           </p>
                        </li>
                        <li>
                           <p>在测试数据库中，使用Oracle Data Pump将统计信息从<code class="codeph">.dmp</code>文件导入临时表。
                           </p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">DBMS_STATS.IMPORT_SCHEMA_STATS</code>将统计信息从登台表复制到数据字典。</p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-optimizer-statistics.html#GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5" title="在数据库之间传输优化程序统计信息时，必须使用DBMS_STATS将统计信息复制到登台表和从登台表复制统计信息，并使用工具使目标数据库可以访问表内容。">关于传输优化程序统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F" name="GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F"></a><h4 id="TGSQL-GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F" class="sect4"><span class="enumeration_section">17.1.3</span>导入和导出优化器统计信息的用户界面</h4>
                  <div>
                     <p><code class="codeph">DBMS_STATS</code>提供用于导入和导出模式和表的统计信息的接口。
                     </p>
                     <div class="section">
                        <p><code class="codeph">DBMS_STATS</code>的以下子程序使您可以导出模式和不同类型的表。
                        </p>
                        <div class="tblformal" id="GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F__TABLE_B4Q_MDJ_QGB">
                           <p class="titleintable">表17-1导出架构和表统计信息的子程序</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="导出架构和表统计的子程序" border="1" summary="These subprograms enables you to export statistics." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d90245e680">子程序</th>
                                    <th align="left" valign="bottom" width="20%" id="d90245e682">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d90245e686" headers="d90245e680 ">
                                       <p><code class="codeph">EXPORT_DATABASE_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d90245e686 d90245e682 ">
                                       <p><span>此过程导出数据库中所有对象的统计信息，并将它们存储在<code class="codeph">statown.stattab</code>标识的用户统计信息表中。</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d90245e698" headers="d90245e680 ">
                                       <p><code class="codeph">EXPORT_DICTIONARY_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d90245e698 d90245e682 ">
                                       <p><span>此过程导出所有数据字典模式（ <code class="codeph">SYS</code> ， <code class="codeph">SYSTEM</code>和RDBMS组件模式）的统计信息，并将它们存储在<code class="codeph">stattab</code>标识的用户统计信息表中。</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d90245e716" headers="d90245e680 ">
                                       <p><code class="codeph">EXPORT_FIXED_OBJECT_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d90245e716 d90245e682 ">
                                       <p><span>此过程导出固定表的统计信息，并将它们存储在<code class="codeph">stattab</code>标识的用户统计信息表中。</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d90245e728" headers="d90245e680 ">
                                       <p><code class="codeph">EXPORT_SCHEMA_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d90245e728 d90245e682 ">
                                       <p><span>此过程导出由<code class="codeph">ownname</code>标识的模式中的所有对象的统计信息，并将它们存储在<code class="codeph">stattab</code>标识的用户统计信息表中。</span></p>
                                       <p>默认情况下， <code class="codeph">stat_category</code>参数包括在<span>实时</span>统计信息期间收集的<span>统计信息</span> 。<code class="codeph">REALTIME_STATS</code>值仅指定在线统计信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d90245e754" headers="d90245e680 ">
                                       <p><code class="codeph">EXPORT_TABLE_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d90245e754 d90245e682 ">
                                       <p><span>此过程导出指定表的统计信息（包括关联的索引统计信息），并将它们存储在<code class="codeph">stattab</code>标识的用户统计信息表中。</span></p>
                                       <p>默认情况下， <code class="codeph">stat_category</code>参数包括在<span>实时</span>统计信息期间收集的<span>统计信息</span> 。<code class="codeph">REALTIME_STATS</code>值仅指定在线统计信息。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><code class="codeph">DBMS_STATS</code>的以下子程序使您可以导入模式和不同类型的表。
                        </p>
                        <div class="tblformal" id="GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F__TABLE_C4Q_MDJ_QGB">
                           <p class="titleintable">表17-2导入优化程序统计信息的子程序</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="导入优化程序统计信息的子程序" border="1" summary="These subprograms enables you to import statistics." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d90245e791">子程序</th>
                                    <th align="left" valign="bottom" id="d90245e793">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d90245e797" headers="d90245e791 ">
                                       <p><code class="codeph">IMPORT_DATABASE_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d90245e797 d90245e793 ">
                                       <p><span>此过程从用户统计信息表导入数据库中所有对象的统计信息，并将它们存储在数据字典中。</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d90245e806" headers="d90245e791 ">
                                       <p><code class="codeph">IMPORT_DICTIONARY_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d90245e806 d90245e793 ">
                                       <p><span>此过程从用户统计信息表导入所有数据字典模式（ <code class="codeph">SYS</code> ， <code class="codeph">SYSTEM</code>和RDBMS组件模式）的统计信息，并将它们存储在字典中。</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d90245e821" headers="d90245e791 ">
                                       <p><code class="codeph">IMPORT_FIXED_OBJECT_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d90245e821 d90245e793 "><span>此过程从用户统计信息表导入固定表的统计信息，并将它们存储在数据字典中。</span></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d90245e829" headers="d90245e791 ">
                                       <p><code class="codeph">IMPORT_SCHEMA_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d90245e829 d90245e793 ">
                                       <p><span>此过程从用户统计信息表中<code class="codeph">ownname</code>由<code class="codeph">ownname</code>标识的模式中的所有对象的统计信息，并将它们存储在数据字典中。</span></p>
                                       <p>默认情况下， <code class="codeph">stat_category</code>参数包括在<span>实时</span>统计信息期间收集的<span>统计信息</span> 。<code class="codeph">REALTIME_STATS</code>值仅指定在线统计信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d90245e852" headers="d90245e791 ">
                                       <p><code class="codeph">IMPORT_TABLE_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d90245e852 d90245e793 ">
                                       <p><span>此过程从<code class="codeph">stattab</code>标识的用户统计信息表导入指定表的统计信息，并将它们存储在数据字典中。</span></p>
                                       <p>默认情况下， <code class="codeph">stat_category</code>参数包括在<span>实时</span>统计信息期间收集的<span>统计信息</span> 。<code class="codeph">REALTIME_STATS</code>值仅指定在线统计信息。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-852263C1-95D0-49F6-88B0-F81479DC2F6F__GUID-BB36EFA2-98A6-4AA0-A3B9-1DB4597E1DFF">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_STATS.html#GUID-B930CE9B-7461-4691-8AA9-7E424C3C2C8C" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS</code></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-optimizer-statistics.html#GUID-3404FF0F-75A7-4E19-B1BB-8C1527E515A5" title="在数据库之间传输优化程序统计信息时，必须使用DBMS_STATS将统计信息复制到登台表和从登台表复制统计信息，并使用工具使目标数据库可以访问表内容。">关于传输优化程序统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL513"></a><a id="TGSQL514"></a><a id="TGSQL512"></a><div class="props_rev_3"><a id="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819" name="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819"></a><h3 id="TGSQL-GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819" class="sect3"><span class="enumeration_section">17.2将</span>优化程序统计信息传输到测试数据库：教程</h3>
               <div>
                  <p>您可以使用Oracle Data Pump将架构统计信息从生产数据库传输到测试数据库。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819__GUID-5F1BA4CD-CBB9-4EDE-A7D8-70EE0CBE240F">先决条件和限制</p>
                     <p>准备导出优化程序统计信息时，请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在导出统计信息之前，必须创建一个表来保存统计信息。过程<code class="codeph">DBMS_STATS.CREATE_STAT_TABLE</code>创建统计信息表。
                           </p>
                        </li>
                        <li>
                           <p>优化程序不使用存储在用户拥有的表中的统计信息。优化程序使用的唯一统计信息是存储在数据字典中的统计信息。要使优化程序在用户定义的表中使用统计信息，请使用<code class="codeph">DBMS_STATS</code>导入过程将这些统计信息导入数据字典。
                           </p>
                        </li>
                        <li>
                           <p>数据泵导出和导入实用程序从数据库中导出和导入优化程序统计信息以及表。当列具有系统生成的名称时，原始导出（ <code class="codeph">exp</code> ）不会导出带有数据的统计信息，但此限制不适用于数据泵导出。
                           </p>
                           <div class="infoboxnote" id="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819__GUID-D12605BA-B39D-452A-B1A6-56416622B71F">
                              <p class="notep1">注意：</p>
                              <p>使用<code class="codeph">DBMS_STATS</code>导出和导入统计信息是使用数据泵导出和导入的不同操作。
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819__GUID-31029EEA-F4E0-40B9-96C3-0DF96681BF5C">假设</p>
                     <p>本教程假设以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您希望在生产数据库上生成代表性的<code class="codeph">sh</code>架构统计信息，并使用<code class="codeph">DBMS_STATS</code>将它们导入到测试数据库中。
                           </p>
                        </li>
                        <li>
                           <p>管理用户<code class="codeph">dba1</code>存在于生产和测试数据库中。
                           </p>
                        </li>
                        <li>
                           <p>您打算创建表<code class="codeph">opt_stats</code>来存储架构统计信息。
                           </p>
                        </li>
                        <li>
                           <p>您打算使用Oracle Data Pump导出和导入表<code class="codeph">opt_stats</code> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819__GUID-221DA4EC-8555-48C1-B433-3F10D03261FB">要生成模式统计信息并将其导入单独的数据库：</p>
                     <ol>
                        <li>
                           <p>在生产主机上，启动SQL * Plus并以管理员<code class="codeph">dba1</code>身份连接到生产数据库。
                           </p>
                        </li>
                        <li>
                           <p>创建一个表来保存生产统计信息。</p>
                           <p>例如，执行以下PL / SQL程序以创建用户统计信息表<code class="codeph">opt_stats</code> ：</p><pre class="pre codeblock"><code>BEGIN DBMS_STATS.CREATE_STAT_TABLE（ownname =&gt;'dba1'，stattab =&gt;'opt_stats'）;结束; /</code></pre></li>
                        <li>
                           <p>收集模式统计信息。</p>
                           <p>例如，手动收集模式统计信息，如下所示：</p><pre class="pre codeblock"><code>- 生成代表性工作负载EXEC DBMS_STATS.GATHER_SCHEMA_STATS（'SH'）;</code></pre></li>
                        <li>
                           <p>使用<code class="codeph">DBMS_STATS</code>导出统计信息。
                           </p>
                           <p>例如，检索模式统计信息并将其存储在先前创建的<code class="codeph">opt_stats</code>表中：</p><pre class="pre codeblock"><code>BEGIN DBMS_STATS.EXPORT_SCHEMA_STATS（ownname =&gt;'dba1'，stattab =&gt;'opt_stats'）;结束; /</code></pre></li>
                        <li>
                           <p>使用Oracle Data Pump导出统计信息表的内容。</p>
                           <p>例如，在操作架构提示符处运行<code class="codeph">expdp</code>命令：</p><pre class="pre codeblock"><code>expdp dba1 DIRECTORY = dpump_dir1 DUMPFILE = stat.dmp TABLES = opt_stats</code></pre></li>
                        <li>
                           <p>将转储文件传输到测试数据库主机。</p>
                        </li>
                        <li>
                           <p>登录测试主机，然后使用Oracle Data Pump导入统计表的内容。</p>
                           <p>例如，在操作架构提示符处运行<code class="codeph">impdp</code>命令：</p><pre class="pre codeblock"><code>impdp dba1 DIRECTORY = dpump_dir1 DUMPFILE = stat.dmp TABLES = opt_stats</code></pre></li>
                        <li>
                           <p>在测试主机上，启动SQL * Plus并以管理员<code class="codeph">dba1</code>身份连接到测试数据库。
                           </p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">DBMS_STATS</code>从用户统计信息表导入统计信息并将其存储在数据字典中。
                           </p>
                           <p>以下PL / SQL程序将表<code class="codeph">opt_stats</code>模式统计信息导入到数据字典中：</p><pre class="pre codeblock"><code>BEGIN DBMS_STATS.IMPORT_SCHEMA_STATS（ownname =&gt;'dba1'，stattab =&gt;'opt_stats'）;结束; /</code></pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-B24DB1B4-ECA4-4F8B-9948-E1456FAF1819__GUID-9374E18A-E495-4688-90D0-F6681C445C8D">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-A323DD4F-1A05-4247-BEC6-1A7103660DAF" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS.CREATE_STAT_TABLE</code>函数</p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_STATS.html#ARPLS68491" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，以获取统计传输功能的概述</p>
                        </li>
                        <li>
                           <p><a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span><cite>Oracle数据库实用程序，</cite></span></a>以了解Oracle Data Pump</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="transporting-optimizer-statistics.html#GUID-7F8EE1CC-A173-4B87-AA2E-CD22198EF4F8" title="您可以将优化程序统计信息从数据字典导出并导入到用户定义的统计信息表。您还可以将统计信息从一个数据库复制到另一个数">导入和导出优化程序统计信息</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
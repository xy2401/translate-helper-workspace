<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You must perform certain steps before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release."></meta>
      <meta name="description" content="You must perform certain steps before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release."></meta>
      <title>启用，降级或删除RDF语义图支持</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="RDF Knowledge Graph Developer&#39;s Guide "></meta>
      <meta property="og:description" content="You must perform certain steps before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="RDF Knowledge Graph Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-rdf-knowledge-graph-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T10:56:26-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2005, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94798-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="SEM_RDFSA-reference.html" title="Previous" type="text/html"></link>
      <link rel="next" href="SEM_MATCH-spatial.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph RDF Knowledge Graph Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="RDFRM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="SEM_RDFSA-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="SEM_MATCH-spatial.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">RDF知识图开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">启用，降级或删除RDF语义图支持</li>
            </ol>
            <a id="GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E" name="GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E"></a><a id="RDFRM118"></a>
            
            <h2 id="RDFRM-GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E" class="sect2"><span class="enumeration_chapter">一</span>启用，降级，或删除RDF语义图形支持</h2>
         </header>
         <div class="ind">
            <div>
               <p>必须先执行某些步骤，然后才能在当前Oracle数据库版本中使用与RDF语义图支持相关的任何类型，同义词或PL / SQL包。</p>
               <p>您必须运行一个或多个脚本，并且必须确保已安装Spatial and Graph并启用了Partitioning选项。在<a href="enabling-downgrading-removing-rdf.html#GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" title="在当前Oracle数据库发行版中使用与RDF语义图支持相关的任何类型，同义词或PL / SQL包之前，必须在新的Oracle数据库安装中安装这些功能，或者从先前版本升级功能。您还必须确保安装了Spatial和Graph，并启用了Partitioning选项。">启用RDF语义图支持</a>及其相关子主题中解释了这些要求。
               </p>
               <p>本附录还描述了在启用RDF语义图支持后，您需要执行以下任何操作的步骤：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>将RDF语义图支持降级为先前Oracle数据库版本提供的支持，如将<a href="enabling-downgrading-removing-rdf.html#GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280" title="您可以将RDF语义图支持降级，同时将Oracle数据库降级到版本12.1。">RDF语义图支持降级到先前版本中所述</a> 。
                     </p>
                  </li>
                  <li>
                     <p>从数据库中<a href="enabling-downgrading-removing-rdf.html#GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845" title="You can remove the RDF Semantic Graph support from the database.">删除</a>对RDF语义图的所有支持，如<a href="enabling-downgrading-removing-rdf.html#GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845" title="您可以从数据库中删除RDF语义图支持。">删除RDF语义图支持中所述</a> 。
                     </p>
                  </li>
               </ul>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF">启用RDF语义图支持</a><br>在当前Oracle数据库发行版中使用与RDF语义图支持相关的任何类型，同义词或PL / SQL包之前，必须在新的Oracle数据库安装中安装这些功能，或者从先前版本升级功能。您还必须确保安装了Spatial和Graph，并启用了Partitioning选项。
                  </li>
                  <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280">将RDF语义图支持降级到先前版本</a><br>您可以将RDF语义图支持降级，同时将Oracle数据库降级到版本12.1。
                  </li>
                  <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845">删除RDF语义图支持</a><br>您可以从数据库中删除RDF语义图支持。
                  </li>
               </ul>
            </div>
            <a id="RDFRM119"></a><div class="props_rev_3"><a id="GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" name="GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF"></a><h3 id="RDFRM-GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" class="sect3"><span class="enumeration_section">A.1</span>启用RDF语义图支持</h3>
               <div>
                  <p>在当前Oracle数据库发行版中使用与RDF语义图支持相关的任何类型，同义词或PL / SQL包之前，必须在新的Oracle数据库安装中安装这些功能，或者从先前版本升级功能。您还必须确保安装了Spatial和Graph，并启用了Partitioning选项。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-5A3B7879-ADD8-4E4F-8063-BD4BF68F4726">在新数据库安装中启用RDF语义图支持</a><br></li>
                     <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427">从版本11.1,11.2或12.1升级RDF语义图支持</a><br></li>
                     <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-10807836-0C1B-4DF0-9D37-FFAC7D02D3B7">工作区管理器和虚拟专用数据库支持</a><br></li>
                     <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-6CBAD6C8-C041-4C22-8FB7-5E638E56061E">空间和分区要求</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E" title="必须先执行某些步骤，然后才能在当前Oracle数据库版本中使用与RDF语义图支持相关的任何类型，同义词或PL / SQL包。">启用，降级或删除RDF语义图支持</a></p>
                     </div>
                  </div>
               </div>
               <a id="RDFRM120"></a><div class="props_rev_3"><a id="GUID-5A3B7879-ADD8-4E4F-8063-BD4BF68F4726" name="GUID-5A3B7879-ADD8-4E4F-8063-BD4BF68F4726"></a><h4 id="RDFRM-GUID-5A3B7879-ADD8-4E4F-8063-BD4BF68F4726" class="sect4"><span class="enumeration_section">A.1.1</span>在新数据库安装中启用RDF语义图支持</h4>
                  <div>
                     <p>安装Spatial and Graph Release 12.2或更高版本时，将自动启用RDF语义图。</p>
                     <p>如果成功启用了RDF语义图，则MDSYS.RDF_PARAMETER表中将存在具有以下列值的行：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>NAMESPACE： <code class="codeph">MDSYS</code></p>
                        </li>
                        <li>
                           <p>ATTRIBUTE： <code class="codeph">SEM_VERSION</code></p>
                        </li>
                        <li>
                           <p>VALUE :(以<code class="codeph">12.2</code>开头的字符串）</p>
                        </li>
                        <li>
                           <p>描述： <code class="codeph">VALID</code></p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" title="在当前Oracle数据库发行版中使用与RDF语义图支持相关的任何类型，同义词或PL / SQL包之前，必须在新的Oracle数据库安装中安装这些功能，或者从先前版本升级功能。您还必须确保安装了Spatial和Graph，并启用了Partitioning选项。">启用RDF语义图支持</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="RDFRM121"></a><div class="props_rev_3"><a id="GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427" name="GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427"></a><h4 id="RDFRM-GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427" class="sect4"><span class="enumeration_section">A.1.2</span>从版本11.1,11.2或12.1升级RDF语义图支持</h4>
                  <div>
                     <p>如果要从包含语义技术支持的Oracle Database Release 11.1或11.2升级，则在升级数据库时，语义技术支持会自动升级到版本12.1或更高版本。</p>
                     <p>但是，如果现有版本11.1或11.2 RDF网络包含三元组，其中包含类型为xsd的类型文字值：float，xsd：double，xsd：boolean或xsd：time，则可能还需要迁移RDF数据。</p>
                     <p>要检查是否需要迁移RDF数据，请以具有DBA权限的用户身份连接到数据库，并查询MDSYS.RDF_PARAMETER表，如下所示：</p><pre class="oac_no_warn" dir="ltr">SELECT命名空间，属性，值FROM mdsys.rdf_parameter WHERE namespace ='MDSYS'AND属性IN（'FLOAT_DOUBLE_DECIMAL'，'XSD_TIME'，'XSD_BOOLEAN'，'DATA_CONVERSION_CHECK'）;</pre><p>如果FLOAT_DOUBLE_DECIMAL，XSD_TIME或XSD_BOOLEAN属性具有字符串值<code class="codeph">INVALID</code>或者如果DATA_CONVERSION_CHECK属性具有字符串值<code class="codeph">FAILED_UNABLE_TO_LOCK_APPLICATION_TABLES</code> ， <code class="codeph">FAILED_INSUFFICIENT_WORKSPACE_PRIVILEGES</code>或<code class="codeph">FAILED_OLS_POLICIES_ARE_ENABLED</code> ，则需要迁移RDF数据。
                     </p>
                     <p>但是，如果FLOAT_DOUBLE_DECIMAL，XSD_TIME和XSD_BOOLEAN属性不存在或有字符串值<code class="codeph">VALID</code> ，如果DATA_CONVERSION_CHECK属性不存在，你<span class="italic">不需要</span>迁移RDF数据。但是，如果您的语义网络可能有任何空的RDF文字，请参阅<a href="enabling-downgrading-removing-rdf.html#GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7">处理空RDF文字</a> ;如果您选择将现有的空文字迁移到新格式，请按照本节中的步骤操作。
                     </p>
                     <p>要迁移RDF数据，请按照下列步骤操作：</p>
                     <ol>
                        <li>
                           <p>以具有SYSDBA权限的SYS用户身份（SYS AS SYSDBA，并在出现提示时输入SYS帐户密码）连接到数据库，然后输入： <code class="codeph">SET CURRENT_SCHEMA=MDSYS</code></p>
                        </li>
                        <li>
                           <p>确保用户MDSYS具有以下权限：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对语义网络中的所有应用程序表的INSERT特权</p>
                              </li>
                              <li>
                                 <p>ALTER ANY INDEX特权（可选：仅在使用文档的语义索引时才需要）</p>
                              </li>
                              <li>
                                 <p>对已修改已启用版本的应用程序表的任何工作空间的ACCESS权限（可选：仅在将Workspace Manager用于RDF数据时才需要）</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>确保暂时禁用任何针对RDF数据的OLS策略（可选：仅在使用OLS for RDF数据时才需要）。运行convert_old_rdf_data后，可以重新启用OLS策略。</p>
                        </li>
                        <li>
                           <p><a id="d86269e355" class="indexterm-anchor"></a><a id="d86269e357" class="indexterm-anchor"></a>启动SQL * Plus。如果要在不将现有空文本转换为新格式的情况下迁移RDF数据（请参阅<a href="enabling-downgrading-removing-rdf.html#GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7">处理空RDF文字</a> ），请输入以下语句：</p><pre class="oac_no_warn" dir="ltr">执行sdo_rdf_internal.convert_old_rdf_data;</pre><p>如果要迁移RDF数据并将现有的空文本转换为新格式，请调用<code class="codeph">convert_old_rdf_data</code> ，并将<code class="codeph">flags</code>参数设置为<code class="codeph">'CONVERT_ORARDF_NULL'</code> 。此外，您可以使用可选的<code class="codeph">tablespace_name</code>参数来指定在数据迁移期间创建中间表时要使用的表空间。例如，以下语句迁移旧的语义数据，将现有的<code class="codeph">"orardf:null "</code>值转换为“”，并将MY_TBS表空间用于任何中间表：</p><pre class="oac_no_warn" dir="ltr">EXECUTE sdo_rdf_internal.convert_old_rdf_data（flags =&gt;'CONVERT_ORARDF_NULL'，tablespace_name =&gt;'MY_TBS'）;</pre><p>如果语义网络包含许多使用（或受其影响）xsd：float，xsd：double，xsd：time或xsd：boolean typed literals的三元组，则<code class="codeph">sdo_rdf_internal.convert_old_rdf_data</code>过程可能需要很长时间才能运行。
                           </p>
                        </li>
                        <li>
                           <p><a id="d86269e392" class="indexterm-anchor"></a>输入以下语句：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Linux： <code class="codeph">@$ORACLE_HOME/md/admin/semrelod.sql</code> 
                                 </p>
                              </li>
                              <li>
                                 <p>Windows： <code class="codeph">@%ORACLE_HOME%\md\admin\semrelod.sql</code></p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427__GUID-FC089C76-2E00-4817-8D4B-9CC8879983B7">
                        <p class="notep1">注意：</p>
                        <p>如果在升级到版本12.1或更高版本后未运行<code class="codeph">sdo_rdf_internal.convert_old_rdf_data</code>过程和<code class="codeph">semrelod.sql</code>脚本，则在执行SEM_MATCH查询时可能会遇到ORA-00904（无效标识符）错误。
                        </p>
                     </div>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-2662F323-16DF-4996-AD93-0CAB04AD62A1">升级后所需的数据迁移</a><br></li>
                        <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7">处理空RDF文字</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" title="在当前Oracle数据库发行版中使用与RDF语义图支持相关的任何类型，同义词或PL / SQL包之前，必须在新的Oracle数据库安装中安装这些功能，或者从先前版本升级功能。您还必须确保安装了Spatial和Graph，并启用了Partitioning选项。">启用RDF语义图支持</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-2662F323-16DF-4996-AD93-0CAB04AD62A1" name="GUID-2662F323-16DF-4996-AD93-0CAB04AD62A1"></a><h5 id="RDFRM-GUID-2662F323-16DF-4996-AD93-0CAB04AD62A1" class="sect5"><span class="enumeration_section">A.1.2.1</span>升级后所需的数据迁移</h5>
                     <div>
                        <p>数据库升级完成后，如果您具有先前版本中的现有RDF数据，则必须迁移RDF数据。如果不执行数据迁移，则在运行SEM_MATCH查询时将遇到以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-20000：RDF_VALUE $表需要使用SEM_APIS.MIGRATE_DATA_TO_CURRENT进行数据迁移</pre><p>列已添加到版本12.2中的MDSYS.RDF_VALUE $表中（请参阅<a href="rdf-semantic-graph-overview.html#GUID-3406865F-70CF-4D24-8911-F08694697ED6" title="从Oracle Database Release 12.2开始，对使用SPARQL ORDER BY语义的RDF数据的查询比以前的版本更有效。">增强的RDF ORDER BY查询处理</a> 。升级现有RDF网络后，必须填充这些列。将使用MDSYS.RDF_PARAMETER表中的以下行记录对迁移的需求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>NAMESPACE： <code class="codeph">MDSYS</code></p>
                           </li>
                           <li>
                              <p>ATTRIBUTE： <code class="codeph">RDF_VALUE$</code></p>
                           </li>
                           <li>
                              <p>VALUE： <code class="codeph">INVALID_ORDER_COLUMNS</code> 
                              </p>
                           </li>
                           <li>
                              <p>描述： <code class="codeph">RDF_VALUE$ Table needs data migration with SEM_APIS.MIGRATE_DATA_TO_CURRENT</code></p>
                           </li>
                        </ul>
                        <p>如果需要迁移，RDF语义图安装最初将标记为<code class="codeph">INVALD</code> ，在MDSYS.RDF_PARAMETER中使用以下行表示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>NAMESPACE： <code class="codeph">MDSYS</code></p>
                           </li>
                           <li>
                              <p>ATTRIBUTE： <code class="codeph">SEM_VERSION</code></p>
                           </li>
                           <li>
                              <p>VALUE :(以<code class="codeph">12.2</code>开头的字符串）</p>
                           </li>
                           <li>
                              <p>描述： <code class="codeph">INVALID</code></p>
                           </li>
                        </ul>
                        <p>要通过填充新的MDSYS.RDF_VALUE $列来执行数据迁移，请按照下列步骤操作：</p>
                        <ol>
                           <li>
                              <p>以具有SYSDBA权限的SYS用户身份（SYS AS SYSDBA，并在出现提示时输入SYS帐户密码）连接到数据库，</p>
                           </li>
                           <li>
                              <p>运行以下语句：</p><pre class="pre codeblock"><code>执行sem_apis.migrate_data_to_current;</code></pre></li>
                        </ol>
                        <p>如果数据迁移成功，则将从MDSYS.RDF_PARAMETER中删除INVALID_ORDER_COLUMNS行，并且SEM_VERSION行的DESCRIPTION值将为<code class="codeph">VALID</code> 。</p>
                        <p>此外，如果要升级包含三元组的现有版本11.1或11.2 RDF网络，可能还需要进行额外的数据迁移，这些三元组包含类型为xsd的类型文字值：float，xsd：double，xsd：boolean或xsd：time。</p>
                        <p>要检查是否需要执行此额外的RDF数据迁移，请以具有DBA权限的用户身份连接到数据库，并查询MDSYS.RDF_PARAMETER表，如下所示：</p><pre class="oac_no_warn" dir="ltr">SELECT命名空间，属性，值FROM mdsys.rdf_parameter WHERE namespace ='MDSYS'AND属性IN（'FLOAT_DOUBLE_DECIMAL'，'XSD_TIME'，'XSD_BOOLEAN'，'DATA_CONVERSION_CHECK'）;</pre><p>如果FLOAT_DOUBLE_DECIMAL，XSD_TIME或XSD_BOOLEAN属性具有字符串值<code class="codeph">INVALID</code>或者如果DATA_CONVERSION_CHECK属性具有字符串值<code class="codeph">FAILED_UNABLE_TO_LOCK_APPLICATION_TABLES</code> ， <code class="codeph">FAILED_INSUFFICIENT_WORKSPACE_PRIVILEGES</code>或<code class="codeph">FAILED_OLS_POLICIES_ARE_ENABLED</code> ，则需要迁移RDF数据。
                        </p>
                        <p>但是，如果FLOAT_DOUBLE_DECIMAL，XSD_TIME和XSD_BOOLEAN属性不存在或有字符串值<code class="codeph">VALID</code> ，如果DATA_CONVERSION_CHECK属性不存在，你<span class="italic">不需要</span>迁移RDF数据。但是，如果您的语义网络可能有任何空的RDF文字，请参阅<a href="enabling-downgrading-removing-rdf.html#GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7">处理空RDF文字</a> ;如果您选择将现有的空文字迁移到新格式，请按照本节中的步骤操作。
                        </p>
                        <p>要迁移RDF数据，请按照下列步骤操作：</p>
                        <ol>
                           <li>
                              <p>以具有SYSDBA权限的SYS用户身份（SYS AS SYSDBA，并在出现提示时输入SYS帐户密码）连接到数据库，然后输入： <code class="codeph">SET CURRENT_SCHEMA=MDSYS</code></p>
                           </li>
                           <li>
                              <p>确保用户MDSYS具有以下权限：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>对语义网络中的所有应用程序表的INSERT特权</p>
                                 </li>
                                 <li>
                                    <p>ALTER ANY INDEX特权（可选：仅在使用文档的语义索引时才需要）</p>
                                 </li>
                                 <li>
                                    <p>对已修改已启用版本的应用程序表的任何工作空间的ACCESS权限（可选：仅在将Workspace Manager用于RDF数据时才需要）</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>确保暂时禁用任何针对RDF数据的OLS策略（可选：仅在使用OLS for RDF数据时才需要）。运行convert_old_rdf_data后，可以重新启用OLS策略。</p>
                           </li>
                           <li>
                              <p><a id="d86269e619" class="indexterm-anchor"></a><a id="d86269e621" class="indexterm-anchor"></a>启动SQL * Plus。如果要在不将现有空文本转换为新格式的情况下迁移RDF数据（请参阅<a href="enabling-downgrading-removing-rdf.html#GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7">处理空RDF文字</a> ），请输入以下语句：</p><pre class="oac_no_warn" dir="ltr">执行sdo_rdf_internal.convert_old_rdf_data;</pre><p>如果要迁移RDF数据并将现有的空文本转换为新格式，请调用<code class="codeph">convert_old_rdf_data</code> ，并将<code class="codeph">flags</code>参数设置为<code class="codeph">'CONVERT_ORARDF_NULL'</code> 。此外，您可以使用可选的<code class="codeph">tablespace_name</code>参数来指定在数据迁移期间创建中间表时要使用的表空间。例如，以下语句迁移旧的语义数据，将现有的<code class="codeph">"orardf:null "</code>值转换为“”，并将MY_TBS表空间用于任何中间表：</p><pre class="oac_no_warn" dir="ltr">EXECUTE sdo_rdf_internal.convert_old_rdf_data（flags =&gt;'CONVERT_ORARDF_NULL'，tablespace_name =&gt;'MY_TBS'）;</pre><p>如果语义网络包含许多使用（或受其影响）xsd：float，xsd：double，xsd：time或xsd：boolean typed literals的三元组，则<code class="codeph">sdo_rdf_internal.convert_old_rdf_data</code>过程可能需要很长时间才能运行。
                              </p>
                           </li>
                           <li>
                              <p><a id="d86269e656" class="indexterm-anchor"></a>输入以下语句：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>Linux： <code class="codeph">@$ORACLE_HOME/md/admin/semrelod.sql</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p>Windows： <code class="codeph">@%ORACLE_HOME%\md\admin\semrelod.sql</code></p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-2662F323-16DF-4996-AD93-0CAB04AD62A1__GUID-FC089C76-2E00-4817-8D4B-9CC8879983B7">
                           <p class="notep1">注意：</p>
                           <p>如果在升级到版本12.1或更高版本后未运行<code class="codeph">sdo_rdf_internal.convert_old_rdf_data</code>过程和<code class="codeph">semrelod.sql</code>脚本，则在执行SEM_MATCH查询时可能会遇到ORA-00904（无效标识符）错误。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427">从版本11.1,11.2或12.1升级RDF语义图支持</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="RDFRM398"></a><div class="props_rev_3"><a id="GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7" name="GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7"></a><h5 id="RDFRM-GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7" class="sect5"><span class="enumeration_section">A.1.2.2</span>处理空RDF文字</h5>
                     <div>
                        <p>在版本11.2中更改了处理空值RDF文字的方式。在此版本之前，空值文字的值被转换为<code class="codeph">"orardf:null"</code> 。在版本11.2及更高版本中，这些值无需修改即存储（即“”）。但是，是否将现有的<code class="codeph">"orardf:null"</code>值迁移到“”是可选的。
                        </p>
                        <p>要检查语义网络中是否存在<code class="codeph">"orardf:null"</code>值，请以具有DBA权限的用户身份连接到数据库，并查询MDSYS.RDF_PARAMETER表，如下所示：</p><pre class="oac_no_warn" dir="ltr">SELECT名称空间，属性，值FROM mdsys.rdf_parameter WHERE namespace ='MDSYS'AND attribute ='NULL_LITERAL';</pre><p>如果NULL_LITERAL属性的值为<code class="codeph">EXISTS</code> ，则语义网络中将出现<code class="codeph">"orardf:null"</code>值。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427">从版本11.1,11.2或12.1升级RDF语义图支持</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-10807836-0C1B-4DF0-9D37-FFAC7D02D3B7" name="GUID-10807836-0C1B-4DF0-9D37-FFAC7D02D3B7"></a><h4 id="RDFRM-GUID-10807836-0C1B-4DF0-9D37-FFAC7D02D3B7" class="sect4"><span class="enumeration_section">A.1.3</span>工作区管理器和虚拟专用数据库支持</h4>
                  <div>
                     <p>从Oracle Database Release 12.2开始，不再支持以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Workspace Manager支持RDF数据</p>
                        </li>
                        <li>
                           <p>虚拟专用数据库（VPD）支持RDF数据</p>
                        </li>
                     </ul>
                     <p>如果升级包含工作区管理器（WM）或虚拟专用数据库（VPD）数据的现有语义网络，则RDF语义图安装将标记为<code class="codeph">INVALID</code> 。此外，MDSYS.RDF_PARAMETER表将包含一行，其中包含<code class="codeph">Feature not supported in current version' for the unsupported component</code> 。要纠正这种情况，应删除所有现有的WM和VPD数据，并卸载WM和VPD组件。
                     </p>
                     <p>要卸载对RDF数据的Workspace Manager支持：</p>
                     <ol>
                        <li>
                           <p>以具有SYSDBA权限的SYS用户身份（SYS AS SYSDBA）连接到数据库，并在出现提示时输入SYS帐户密码。</p>
                        </li>
                        <li>
                           <p>启动SQL * Plus，并输入以下语句：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Linux： <code class="codeph">@$ORACLE_HOME/md/admin/sdordfwm_rm.sql</code></p>
                              </li>
                              <li>
                                 <p>Windows： <code class="codeph">@%ORACLE_HOME%\md\admin\sdordfwm_rm.sql</code></p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-10807836-0C1B-4DF0-9D37-FFAC7D02D3B7__GUID-96D4133C-80BA-46B6-B5D6-2B2BE4FA11B0">
                              <p class="notep1">注意：</p>
                              <p>如果您处于多租户环境中，请使用<code class="codeph">catcon.pl</code>运行该脚本。请参见“ <a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN14072" target="_blank">Oracle数据库管理员指南</a> ”中的“在CDB中运行Oracle提供的SQL脚本<a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN14072" target="_blank">”</a> 。
                              </p>
                           </div>
                        </li>
                     </ol>
                     <p>卸载对RDF数据的虚拟专用数据库支持：</p>
                     <ol>
                        <li>
                           <p>以具有SYSDBA权限的SYS用户身份（SYS AS SYSDBA）连接到数据库，并在出现提示时输入SYS帐户密码。</p>
                        </li>
                        <li>
                           <p>启动SQL * Plus，并输入以下语句：</p><pre class="pre codeblock"><code>执行mdsys.sem_rdfsa_dr.uninstall_vpd;</code></pre></li>
                     </ol>
                     <p>执行必要的卸载操作后，重置网络有效性，如下所示：</p>
                     <ol>
                        <li>
                           <p>以具有SYSDBA权限的SYS用户身份（SYS AS SYSDBA）连接到数据库，并在出现提示时输入SYS帐户密码。</p>
                        </li>
                        <li>
                           <p>启动SQL * Plus，并输入以下语句：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Linux： <code class="codeph">@$ORACLE_HOME/md/admin/semvalidate.sql</code></p>
                              </li>
                              <li>
                                 <p>Windows： <code class="codeph">@%ORACLE_HOME%\md\admin\semvalidate.sql</code></p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-10807836-0C1B-4DF0-9D37-FFAC7D02D3B7__IFYOUAREINAMULTITENANTENVIRONMENTRU-164ECF0F">
                              <p class="notep1">注意：</p>
                              <p>如果您处于多租户环境中，请使用<code class="codeph">catcon.pl</code>运行该脚本。请参见“ <a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN14072" target="_blank">Oracle数据库管理员指南</a> ”中的“在CDB中运行Oracle提供的SQL脚本<a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN14072" target="_blank">”</a> 。
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" title="在当前Oracle数据库发行版中使用与RDF语义图支持相关的任何类型，同义词或PL / SQL包之前，必须在新的Oracle数据库安装中安装这些功能，或者从先前版本升级功能。您还必须确保安装了Spatial和Graph，并启用了Partitioning选项。">启用RDF语义图支持</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="RDFRM123"></a><div class="props_rev_3"><a id="GUID-6CBAD6C8-C041-4C22-8FB7-5E638E56061E" name="GUID-6CBAD6C8-C041-4C22-8FB7-5E638E56061E"></a><h4 id="RDFRM-GUID-6CBAD6C8-C041-4C22-8FB7-5E638E56061E" class="sect4"><span class="enumeration_section">A.1.4</span>空间和分区要求</h4>
                  <div>
                     <p>神谕<a id="d86269e924" class="indexterm-anchor"></a><a id="d86269e928" class="indexterm-anchor"></a><a id="d86269e932" class="indexterm-anchor"></a>必须先安装Spatial和Graph，然后才能使用任何RDF和OWL功能。Oracle Locator是不够的。有关空间和图形和定位器的信息，包括定位器中包含和未包含的功能。请参阅<a href="../spatl/oracle-locator.html#SPATL340" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a> 。
                     </p>
                     <p>必须先启用“分区”选项，然后才能使用任何RDF和OWL功能。有关“分区”选项的许可信息，请参阅<a href="../dblic/index.html" target="_blank"><span class="italic">Oracle数据库许可信息</span></a> 。有关分区的用法信息，请参阅<a href="../vldbg/index.html" target="_blank"><span class="italic">Oracle Database VLDB和分区指南</span></a> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" title="在当前Oracle数据库发行版中使用与RDF语义图支持相关的任何类型，同义词或PL / SQL包之前，必须在新的Oracle数据库安装中安装这些功能，或者从先前版本升级功能。您还必须确保安装了Spatial和Graph，并启用了Partitioning选项。">启用RDF语义图支持</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="RDFRM124"></a><div class="props_rev_3"><a id="GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280" name="GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280"></a><h3 id="RDFRM-GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280" class="sect3"><span class="enumeration_section">A.2将</span> RDF语义图支持降级到先前版本</h3>
               <div>
                  <p>您可以将RDF语义图支持降级，同时将Oracle数据库降级到版本12.1。</p>
                  <p>但是， <span class="italic"><span class="bold">强烈建议不要</span></span>降级，除非在极少数情况下需要降级。如果您降级到以前的版本，则不会受益于干预版本中的错误修复和增强功能。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF">降级到版本12.1语义图支持</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E" title="必须先执行某些步骤，然后才能在当前Oracle数据库版本中使用与RDF语义图支持相关的任何类型，同义词或PL / SQL包。">启用，降级或删除RDF语义图支持</a></p>
                     </div>
                  </div>
               </div>
               <a id="RDFRM125"></a><div class="props_rev_3"><a id="GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF" name="GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF"></a><h4 id="RDFRM-GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF" class="sect4"><span class="enumeration_section">A.2.1</span>降级到版本12.1语义图支持</h4>
                  <div>
                     <p>如果需要降级到Oracle Database Release 12.1，则在降级数据库时，RDF语义图支持组件将自动降级。但是， <span class="italic">在</span>执行降级<span class="italic">之前，</span>必须删除特定于版本12.2的任何RDF或OWL数据（即，版本12.2或更高版本以前版本中不支持的RDF / OWL持久性结构），以便数据库与版本12.1。
                     </p>
                     <p>要检查是否有任何版本12.2或更高版本的RDF数据与版本12.1不兼容，请执行以下步骤：</p>
                     <ol>
                        <li>
                           <p>以具有SYSDBA权限的SYS用户身份（SYS AS SYSDBA）连接到数据库（版本12.2或更高版本），并在出现提示时输入SYS帐户密码。</p>
                        </li>
                        <li>
                           <p>启动SQL * Plus，并输入以下语句：</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUT ON EXECUTE SDO_SEM_DOWNGRADE.CHECK_121_COMPATIBLE;</pre></li>
                     </ol>
                     <p>如果任何RDF数据与版本12.1不兼容，则该过程会生成错误并显示不兼容数据的列表。在这种情况下，您必须执行以下步骤：</p>
                     <ol>
                        <li>
                           <p>如果您尚未执行此操作，请删除任何版本12.2或更高版本的特定于发行版的RDF或OWL数据，如本节前面所述。</p>
                        </li>
                        <li>
                           <p>执行数据库降级。</p>
                        </li>
                        <li>
                           <p>以具有SYSDBA权限的SYS用户身份（SYS AS SYSDBA）连接到版本12.1数据库，并在出现提示时输入SYS帐户密码。</p>
                        </li>
                        <li>
                           <p>启动SQL * Plus，并输入以下语句：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Linux： <code class="codeph">@$ORACLE_HOME/md/admin/catsem.sql</code> 
                                 </p>
                              </li>
                              <li>
                                 <p id="GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF__WINDOWSORACLE_HOMEMDADMINCATSEM.SQL-1650CF63">Windows： <code class="codeph">@%ORACLE_HOME%\md\admin\catsem.sql</code></p>
                                 <div class="infoboxnote" id="GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF__IFYOUAREINAMULTITENANTENVIRONMENTRU-164ECF0F">
                                    <p class="notep1">注意：</p>
                                    <p>如果您处于多租户环境中，请使用<code class="codeph">catcon.pl</code>运行该脚本。请参见“ <a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN14072" target="_blank">Oracle数据库管理员指南</a> ”中的“在CDB中运行Oracle提供的SQL脚本<a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN14072" target="_blank">”</a> 。
                                    </p>
                                 </div>
                              </li>
                           </ul>
                           <p>如果脚本成功完成，则会在MDSYS.RDF_PARAMETER表中插入具有以下列值的行：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>NAMESPACE： <code class="codeph">MDSYS</code></p>
                              </li>
                              <li>
                                 <p>ATTRIBUTE： <code class="codeph">SEM_VERSION</code></p>
                              </li>
                              <li>
                                 <p>VALUE :(以<code class="codeph">12.1</code>开头的字符串）</p>
                              </li>
                              <li>
                                 <p>描述： <code class="codeph">VALID</code></p>
                              </li>
                           </ul>
                           <p><code class="codeph">catsem.sql</code>脚本成功完成后，将启用并准备使用适用于版本11.2的Oracle语义技术，并保留所有版本12.1兼容的数据。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：将</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280" title="您可以将RDF语义图支持降级，同时将Oracle数据库降级到版本12.1。">RDF语义图支持降级到先前版本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="RDFRM127"></a><div class="props_rev_3"><a id="GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845" name="GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845"></a><h3 id="RDFRM-GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845" class="sect3"><span class="enumeration_section">A.3</span>删除RDF语义图支持</h3>
               <div>
                  <p>您可以从数据库中删除RDF语义图支持。</p>
                  <p>但是， <span class="italic"><span class="bold">强烈建议不要</span></span>删除此支持，除非您有充分的理由这样做。删除此支持后，任何应用程序或数据库用户都无法使用与RDF语义图支持相关的任何类型，同义词或PL / SQL包。
                  </p>
                  <p>要从数据库中删除RDF语义图支持，请执行以下步骤：</p>
                  <ol>
                     <li>
                        <p>以具有SYSDBA权限的SYS用户身份（SYS AS SYSDBA）连接到数据库，并在出现提示时输入SYS帐户密码。</p>
                     </li>
                     <li>
                        <p><a id="d86269e1225" class="indexterm-anchor"></a>启动SQL * Plus，并输入以下语句：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Linux： <code class="codeph">@$ORACLE_HOME/md/admin/semremov.sql</code> 
                              </p>
                           </li>
                           <li>
                              <p>Windows： <code class="codeph">@%ORACLE_HOME%\md\admin\semremov.sql</code></p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845__IFYOUAREINAMULTITENANTENVIRONMENTRU-1650DABC">
                           <p class="notep1">注意：</p>
                           <p>如果您处于多租户环境中，请使用<code class="codeph">catcon.pl</code>运行该脚本。请参见“ <a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN14072" target="_blank">Oracle数据库管理员指南</a> ”中的“在CDB中运行Oracle提供的SQL脚本<a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN14072" target="_blank">”</a> 。
                           </p>
                        </div>
                     </li>
                  </ol>
                  <p><code class="codeph">semremov.sql</code>脚本删除语义网络并删除任何RDF语义图类型，表和PL / SQL包。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E" title="必须先执行某些步骤，然后才能在当前Oracle数据库版本中使用与RDF语义图支持相关的任何类型，同义词或PL / SQL包。">启用，降级或删除RDF语义图支持</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
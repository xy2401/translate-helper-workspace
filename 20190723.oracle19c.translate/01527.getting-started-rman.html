<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>RMAN入门</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery User&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96241-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="introduction-backup-recovery.html" title="Previous" type="text/html"></link>
      <link rel="next" href="part-starting-configuring-rman.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="BRADV"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-backup-recovery.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="part-starting-configuring-rman.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复用户指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-overview-backup-recovery.html" property="item" typeof="WebPage"><span property="name">备份和恢复概述</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">RMAN入门</li>
            </ol>
            <a id="GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B" name="GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B"></a><a id="BRADV89346"></a>
            
            <h2 id="BRADV-GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B" class="sect2"><span class="enumeration_chapter">2</span> RMAN入门</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章适用于想要立即开始使用RMAN的新用户，而无需先阅读本书中更详细的章节。本章提供了最重要的RMAN概念和任务的最简单摘要。它不能替代备份和恢复文档集的其余部分。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="getting-started-rman.html#GUID-8B307A7B-5040-4950-B349-E7DE59413CBE" title="Recovery Manager（RMAN）是一个Oracle数据库客户端，可在您的数据库上执行备份和恢复任务，并自动管理备份策略。它极大地简化了备份，还原和恢复数据库文件的过程。">RMAN环境概述</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E" title="为每个目标数据库预配置了RMAN备份和恢复环境。配置是持久的，并且适用于此目标数据库上的所有后续操作，即使您退出并重新启动RMAN也是如此。">显示默认RMAN配置</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022" title="使用BACKUP命令备份文件。RMAN将数据备份到配置的默认设备以获取所请求的备份类型。">备份数据库</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8" title="RMAN可以使用存储在RMAN存储库中的信息来生成有关备份活动的报告。">报告RMAN操作</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415" title="RMAN存储库元数据始终存储在目标数据库的控制文件中。管理备份时，RMAN维护命令使用此元数据。">维护RMAN备份</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-F24568FC-0546-4CB0-B843-87F0A95D1649" title="Data Recovery Advisor是一个Oracle数据库工具，它提供用于诊断持久性数据故障的基础结构，向用户提供修复选项，并根据用户的请求执行修复。">使用Data Recovery Advisor诊断和修复故障</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1" title="您可以使用Oracle闪回数据库将整个数据库回滚到过去的时间。与介质恢复不同，您无需还原数据文件以将数据库返回到过去状态。">使用闪回数据库重绕数据库</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205" title="使用RESTORE和RECOVER命令进行RMAN还原和恢复物理数据库文件。">还原和恢复数据库文件</a></p>
                  </li>
               </ul>
            </div><a id="BRADV89347"></a><div class="props_rev_3"><a id="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE" name="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE"></a><h3 id="BRADV-GUID-8B307A7B-5040-4950-B349-E7DE59413CBE" class="sect3"><span class="enumeration_section">2.1</span> RMAN环境概述</h3>
               <div>
                  <p>Recovery Manager（RMAN）是一个Oracle数据库客户端，可在您的数据库上执行备份和恢复任务，并自动管理备份策略。它极大地简化了备份，还原和恢复数据库文件的过程。</p>
                  <p>RMAN环境由在备份数据中起作用的实用程序和数据库组成。RMAN的环境至少必须包含以下组件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="glossary.html#GUID-272C4366-303F-4629-9679-1379AAC3FBC1"><span class="xrefglossterm">目标数据库</span></a></p>
                        <p>RMAN与<code class="codeph">TARGET</code>关键字连接的Oracle数据库。目标数据库是RMAN正在其上执行备份和恢复操作的数据库。RMAN始终在数据库的控制文件中维护有关其操作的元数据。RMAN元数据称为<a href="glossary.html#GUID-F5643EDD-CE1B-4A9F-9E6E-ADDFD6452341"><span class="xrefglossterm">RMAN存储库</span></a> 。
                        </p>
                     </li>
                     <li>
                        <p><a href="glossary.html#GUID-BAF6F6F1-D4F1-4F46-B1B6-9F662B7AB35D"><span class="xrefglossterm">RMAN客户端</span></a></p>
                        <p>Oracle Database可执行文件，用于解释命令，指示服务器会话执行这些命令，并将其活动记录在目标数据库控制文件中。RMAN可执行文件随数据库自动安装，通常与其他数据库可执行文件位于同一目录中。例如，Linux上的RMAN客户端位于<code class="codeph">$ORACLE_HOME/bin</code> 。
                        </p>
                     </li>
                  </ul>
                  <p>某些环境使用以下可选组件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">快速恢复区</span></a></p>
                        <p>数据库可以存储和管理与备份和恢复相关的文件的磁盘位置。使用<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10234" target="_blank"><code class="codeph">DB_RECOVERY_FILE_DEST</code></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10235" target="_blank"><code class="codeph">DB_RECOVERY_FILE_DEST_SIZE</code></a>初始化参数设置快速恢复区域的位置和大小。
                        </p>
                     </li>
                     <li>
                        <p><a href="glossary.html#GUID-26FF62D0-5938-481D-B7B9-929BC971813E"><span class="xrefglossterm">媒体管理软件</span></a></p>
                        <p>RMAN与顺序介质设备（如磁带库）交互所需的应用程序。媒体管理器在备份和恢复期间控制这些设备，管理媒体的加载，标记和卸载。媒体管理设备有时称为<a href="glossary.html#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a> （系统备份到磁带）设备。
                        </p>
                     </li>
                     <li>
                        <p><a href="glossary.html#GUID-CBFA8015-2DFF-42B1-A818-D6C5B92C608F"><span class="xrefglossterm">恢复目录</span></a></p>
                        <p>用于记录针对一个或多个目标数据库的RMAN活动的单独数据库模式。如果控制文件丢失，恢复目录将保留RMAN存储库元数据，这使得在丢失控制文件后更容易恢复和恢复。数据库可能会覆盖控制文件中的旧记录，但RMAN会永久保留目录中的记录，除非用户删除了记录。</p>
                     </li>
                  </ul>
                  <p>本章介绍如何在最基本的配置中使用RMAN，该配置<span class="italic">没有</span>恢复目录或介质管理器。
                  </p>
                  <div class="infoboxnotealso" id="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE__GUID-33AC8CAF-28BD-4CC0-B11E-0874228CC4C1">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="rman-architecture.html#GUID-8ECC1FB0-7D25-4883-B9A6-2593FDB35940" title="Recovery Manager环境包含在备份和恢复策略中发挥作用的各种应用程序和数据库。使用RMAN命令行客户端输入可用于管理备份和恢复操作的所有方面的命令。RMAN信道表示到设备的一个数据流，并且对应于一个数据库服务器会话。在备份或恢复操作期间，通道从输入设备读取数据，对其进行处理，并将其写入输出设备。RMAN支持的设备类型是DISK和SBT（系统备份到磁带）。RMAN可以使用自动通道或手动通道进行备份和恢复操作。RMAN存储库是有关RMAN用于备份，恢复和维护的目标数据库的元数据的集合。Oracle媒体管理层（MML）API允许第三方供应商构建与RMAN配合使用的媒体管理软件，以允许备份到磁带驱动器等顺序媒体设备。在执行备份或还原到媒体管理器之前，必须分配一个或多个通道来处理与媒体管理器的通信。您还可以为媒体管理器配置默认通道。默认通道用于使用媒体管理器且尚未明确分配通道的所有备份和恢复任务。Oracle Secure Backup是一种媒体管理器，可通过文件系统备份到磁带提供可靠，安全的数据保护。支持SAN，千兆以太网和SCSI环境中的所有主要磁带驱动器和磁带库。Oracle备份解决方案计划（BSP）是Oracle PartnerNetwork的一部分，是一组媒体管理器供应商，其产品符合Oracle的MML规范。媒体管理供应商可能会为您的平台提供多种产品。快速恢复区域是可选的磁盘位置，可用于存储与恢复相关的文件。Data Guard将备用数据库维护为生产数据库的事务一致性副本。备用数据库可以是物理备用数据库，也可以是逻辑备用数据库。为了简化RMAN的持续使用以进行备份和恢复，您可以在Data Guard环境中为每个主要和物理备用数据库设置一些持久性配置设置。这些设置控制RMAN行为的许多方面。例如，您可以配置备份保留策略，备份到磁带或磁盘的默认目标，或默认备份设备类型。RMAN使用恢复目录来跟踪Data Guard环境中所有数据库文件的文件名。RMAN命令使用恢复目录元数据在Data Guard环境中的不同物理数据库之间透明地运行。例如，您可以备份物理备用数据库上的表空间，并在主数据库上还原和恢复它。同样，您可以备份主数据库上的表空间，并在物理备用数据库上还原和恢复它。恢复目录通过将每个数据库文件或备份文件与DB_UNIQUE_NAME相关联来跟踪Data Guard环境中的文件。创建文件的数据库与该文件相关联。备份的可访问性与其关联不同。在Data Guard环境中，恢复目录将磁盘备份视为只能与它们关联的数据库访问，而在一个数据库上创建的磁带备份可供所有数据库访问。Recovery Appliance提供了一个集中的远程存储库，用于备份企业中的所有目标数据库。所有目标数据库的备份和备份元数据都由恢复设备上的中央恢复目录（恢复设备目录）管理。">Recovery Manager Architecture</a> ，以获取有关RMAN环境的更详细概述</p>
                        </li>
                        <li>
                           <p>用于<code class="codeph">BACKUP</code>命令语法和语义的<a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span class="italic">Oracle数据库备份和恢复参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="BRADV549"></a><a id="BRADV89348"></a><div class="props_rev_3"><a id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" name="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D"></a><h3 id="BRADV-GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" class="sect3"><span class="enumeration_section">2.2</span>启动RMAN并连接到数据库：快速入门</h3>
               <div>
                  <p>在使用RMAN执行任何操作之前，必须连接到目标数据库。</p>
                  <div class="section">
                     <p>通过在操作系统的命令提示符下发出<code class="codeph">rman</code>命令来启动RMAN客户端。RMAN显示命令提示，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">％rman RMAN&gt;</pre><p>指定和验证与数据库的RMAN连接的方式与SQL * Plus与数据库的连接相同。唯一的区别是与目标或辅助数据库的RMAN连接需要<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限。任何用户都可以被授予此权限。
                     </p>
                     <div class="infoboxnote" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-2023C49E-B271-4D88-B962-102239DBA5DC">
                        <p class="notep1">警告：</p>
                        <p>良好的安全性要求您不要在命令行上以纯文本形式输入密码。仅在RMAN提示请求时在RMAN中输入密码。请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=DBSEG0032" target="_blank"><span class="italic">Oracle数据库安全指南</span></a>以了解密码保护。
                        </p>
                     </div>
                     <p>您可以使用命令行选项或使用<a href="../rcmrf/CONNECT.html#RCMRF114" target="_blank"><code class="codeph">CONNECT TARGET</code></a>命令连接到数据库。以下示例启动RMAN，然后通过Oracle Net作为用户<code class="codeph">sbu</code>连接到目标数据库，该用户<code class="codeph">sbu</code>是使用<code class="codeph">SYSBACKUP</code>权限创建的。RMAN提示输入密码。
                     </p><pre class="oac_no_warn" dir="ltr">％rman RMAN&gt; CONNECT TARGET“sbu @ prod AS SYSBACKUP”目标数据库密码：连接到目标数据库的<span class="italic">密码</span> ：PROD（DBID = 39525561）</pre><p>使用<a href="glossary.html#GUID-665B741C-5624-40B5-81FF-93B1EC67FC56"><span class="xrefglossterm">多租户架构时</span></a> ，您可以按照<span class="q">“ <a href="starting-interacting-with-rman-client.html#GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD" title="您可以将RMAN客户端连接到多租户容器数据库（CDB）和可插拔数据库（PDB）。">将RMAN连接到CDB</a> ”中</span>的说明连接到<a href="glossary.html#GUID-EA3DB8F4-F68E-4FC5-A599-32A4886FFF8A"><span class="xrefglossterm">根</span></a>或指定的<a href="glossary.html#GUID-D4239448-A344-41EF-9566-0B7716FEAE72"><span class="xrefglossterm">可插拔数据库（PDB）</span></a> 。
                     </p>
                     <p>要退出RMAN客户端，请在RMAN提示符下输入<code class="codeph">EXIT</code> ：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;退出</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-8B3350B3-06E9-499D-A575-C27B05E248CE">公共RMAN命令行选项的语法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">RMAN [TARGET <span class="italic">connectStringSpec</span> | {CATALOG <span class="italic">connectStringSpec</span> } | LOG ['] <span class="italic">filename</span> ['] [APPEND]。。。] ...connectStringSpec :: = ['] [ <span class="italic">userid</span> ] [/ [ <span class="italic">密码</span> ]] [@ <span class="italic">net_service_name</span> ] [']</pre><p>以下示例将<a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN会话</span></a>的输出附加到<code class="codeph">/tmp/msglog.log</code>的文本文件</p><pre class="oac_no_warn" dir="ltr">％rman TARGET / LOG /tmp/msglog.log APPEND</pre><div class="infoboxnotealso" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-C695D47B-3E10-4D41-8E89-B50F6FD73377">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="starting-interacting-with-rman-client.html#GUID-E4E287F5-5F36-431A-B069-F360A5B4BC7C" title="RMAN可执行文件随数据库自动安装，通常与其他数据库可执行文件位于同一目录中。例如，Linux上的RMAN客户端位于$ ORACLE_HOME / bin中。您可以从RMAN客户端或操作系统命令行创建数据库连接。可以使用密码文件或操作系统身份验证对这些数据库连接进行身份验证。要执行有用的工作，RMAN客户端必须连接到数据库。与RMAN连接到目标或辅助数据库的用户需要SYSDBA或SYSBACKUP系统特权。可以使用操作系统身份验证来建立到目标或辅助数据库的RMAN连接。使用密码文件进行本地或远程访问。如果数据库使用密码文件对管理用户进行身份验证，则RMAN可以使用密码进行连接。如果在操作系统命令行上启动没有连接字符串的RMAN，则必须在RMAN提示符下发出CONNECT TARGET命令以连接到目标数据库。要从操作系统命令行连接到目标数据库，请输入rman命令，然后输入连接信息。您可以在显示RMAN提示后开始执行命令。您可以将RMAN客户端连接到多租户容器数据库（CDB）和可插拔数据库（PDB）。您可以在整个CDB，仅root用户或一个或多个PDB上执行RMAN操作。直接连接到可插拔数据库（PDB）时，某些限制适用：有多种方法可以将目标连接到根目录。您可以从RMAN提示符或操作系统命令行连接到PDB。您可以通过创建包含CONNECT命令的RMAN命令文件来建立数据库连接。要使用DUPLICATE命令，必须连接到辅助实例。执行表空间时间点恢复（TSPITR）可能还需要连接到辅助实例。在诊断RMAN在连接目标，目录和辅助数据库时遇到的错误时，请考虑使用SQL * Plus直接连接到数据库。此操作可以揭示连接信息或数据库的潜在问题。RMAN使用SYSDBA或SYSBACKUP权限连接到目标数据库和辅助数据库。因此，当您使用SQL * Plus诊断目标或辅助数据库的连接问题时，请求SYSDBA或SYSBACKUP连接以重现RMAN行为。使用SQL * Plus诊断恢复目录连接问题。默认情况下，RMAN将命令输出写入标准输出。要将输出重定向到日志文件，请在启动RMAN时在命令行上输入LOG参数。在调用RMAN之前，设置NLS_DATE_FORMAT和NLS_LANG环境变量可能很有用。这些变量确定RMAN命令（例如RESTORE，RECOVER和REPORT）中时间参数的格式。当RMAN客户端为命令做好准备时，它会显示命令提示符对于重复性任务，您可以创建包含RMAN命令的文本文件，然后使用@参数启动RMAN客户端，后跟文件名。RMAN中的注释字符是井号（＃）。从井号到行尾的所有文本都将被忽略。运行命令文件时，可以在USING子句中指定一个或多个值，以便在命令文件中的替换变量中使用。通过这种方式，您可以使命令文件动态化。您可以在不执行它们的情况下测试RMAN命令的语法正确性。使用命令行参数CHECKSYNTAX以一种模式启动RMAN客户端，在该模式下，它仅解析您输入的命令，并为不合法的RMAN语法的命令返回RMAN-00558错误。您可以交互式检查RMAN命令的语法，而无需实际执行命令。要在命令文件中测试命令，请使用CHECKSYNTAX参数启动RMAN，并使用@命令命名要传递的命令文件。RMAN管道接口是向RMAN发出命令并从这些命令接收输出的另一种方法。使用此接口，可以将可移植的编程接口写入RMAN。此示例假定控制RMAN的应用程序想要连续运行多个命令。在每个命令沿管道发送并执行并返回输出后，RMAN暂停并等待下一个命令。此示例假定控制RMAN的应用程序想要将一个或多个命令作为单个作业运行。运行管道上的命令后，RMAN退出。">启动并与RMAN客户端交互</a> ，以了解有关启动和使用RMAN客户端的更多信息</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV550"></a><a id="BRADV89349"></a><div class="props_rev_3"><a id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E" name="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E"></a><h3 id="BRADV-GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E" class="sect3"><span class="enumeration_section">2.3</span>显示默认RMAN配置</h3>
               <div>
                  <p>为每个目标数据库预配置了RMAN备份和恢复环境。配置是持久的，并且适用于此目标数据库上的所有后续操作，即使您退出并重新启动RMAN也是如此。</p>
                  <div class="section">
                     <p>RMAN配置设置可以指定备份设备，设置与这些设备的连接（称为<a href="glossary.html#GUID-D7D8E7D7-3CD3-4FCF-AF75-AF2BE11A366F"><span class="xrefglossterm">通道</span></a> ），设置影响备份策略的策略等。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E__GUID-A990043F-E36F-422E-B5E2-6CD3B08C1368">要显示数据库的当前配置：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                     <li class="stepexpand"><span>运行<code class="codeph">SHOW ALL</code>命令。</span><div>
                           <p>例如，在RMAN提示符下输入命令，如下所示：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;全部显示;</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>输出列出<code class="codeph">CONFIGURE</code>命令以重新创建此配置。
                     </p>
                     <div class="infoboxnotealso" id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E__GUID-0A6ED498-21EB-40CA-9276-40A1786B32C6">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="configuring-rman-client-basic.html#GUID-5155F8E6-6E35-4261-9CC1-F12DAA9FAC5B" title="RMAN为执行基本备份和恢复所需的大多数参数提供合理的默认值。您可以修改默认参数的值或覆盖特定会话的这些值。您可以使用SHOW命令显示目标数据库的RMAN配置设置的当前值。您还可以查看这些命令当前是否设置为其默认值。未指定目标设备类型的备份将定向到已配置的默认设备。RMAN已预先配置为使用磁盘作为默认设备类型。无需其他配置。BACKUP命令可以创建备份集或映像副本。对于磁盘，您可以使用CONFIGURE DEVICE TYPE DISK BACKUP TYPE TO命令将RMAN配置为创建备份集或映像副本作为其默认备份类型。RMAN通道是与数据库服务器会话的连接。RMAN使用通道执行大多数任务。使用CONFIGURE CHANNEL命令配置磁盘或SBT通道的选项。您可以为设备类型配置通用通道设置，即用于根据该设备的已配置设置创建的任何通道的模板。默认情况下，RMAN为所有操作分配一个磁盘通道。您可以为此通道指定不同的选项，例如，备份的新默认位置。运行命令时可用于设备类型的通道数确定RMAN是并行读取还是写入。通常，执行命令时使用的通道数应与访问的设备数相匹配。如果在作业期间手动分配通道，则RMAN将忽略任何已配置的通道设置。您可以配置RMAN以自动备份控制文件和服务器参数文件。每当添加备份记录时都会发生自动备份。默认情况下，所有已配置设备的自动备份文件的格式是FORMAT子句中的替换变量％F。SET CONTROLFILE AUTOBACKUP FORMAT命令可以在RUN命令或RMAN提示符下指定，仅在当前会话中覆盖已配置的自动备份格式。在大多数平台上，要备份到磁带等顺序介质并从中恢复，必须将介质管理软件与Oracle数据库集成。您可以将支持数据库和文件系统备份的Oracle Secure Backup用作磁带，作为媒体管理器。在尝试将RMAN与媒体管理器一起使用之前，请确定媒体管理库的位置。安装介质管理软件后，请执行供应商所需的配置，以便软件可以接受RMAN备份。确认数据库服务器可以加载介质管理库之后，请进行测试以确保RMAN可以备份到介质管理器。ALLOCATE CHANNEL命令用于执行与媒体管理器的RMAN通信的基本测试。在媒体管理器上测试通道分配后，创建并恢复测试备份。配置SBT通道会创建一个持久性设置，该设置是用于使用媒体管理器进行备份和恢复操作的默认设置。备份片名由BACKUP命令，CONFIGURE CHANNEL命令或ALLOCATECHANNEL命令中指定的FORMAT字符串确定。备份到媒体管理器的最简单方法是配置自动SBT通道.RMAN命令可用于将目标数据库备份到零数据丢失恢复设备（恢复设备）。将恢复设备用作目标数据库备份的集中存储库需要某些配置步骤。在使用RMAN将目标数据库备份到零数据丢失恢复设备（恢复设备）之前，必须在目标数据库的Oracle主目录中安装恢复设备备份模块。在将Oracle数据库备份到零数据丢失恢复设备（恢复设备）之前，需要进行RMAN配置。在使用RMAN将目标数据库备份到零数据丢失恢复设备（恢复设备）之前，需要确定目标数据库主机上恢复设备备份模块的位置。在为恢复设备配置或分配RMAN通道时使用此位置。存储在受保护数据库中的客户端配置文件包含零数据丢失恢复设备（恢复设备）备份模块用于与恢复设备通信的配置设置。安装Recovery Appliance备份模块时会自动创建此文件。快速恢复区域功能使您可以设置磁盘区域，数据库可以在该区域中创建和管理与备份和恢复相关的各种文件。强烈建议使用快速恢复区域。考虑将快速恢复区域配置为实施备份策略的第一步。快速恢复区域可以包含控制文件，联机重做日志，归档重做日志，闪回日志和RMAN备份。快速恢复区域可以与Oracle托管文件（OMF）一起使用，快速恢复区域中的自动存储管理（ASM）空间在必须根据保留策略保留的备份和归档日志之间进行平衡，以及可能存在的其他文件可能会被删除。通过设置两个初始化参数来启用快速恢复区域。这些参数启用快速恢复区域，无论是否必须关闭并重新启动数据库实例。快速恢复区域越大，它就越有用。理想情况下，快速恢复区域足够大，可以包含控制文件，联机重做日志，归档重做日志和闪回日志。它应该能够包含数据库中所有数据文件的副本以及所选备份策略使用的增量备份。使用数据库初始化参数来设置快速恢复区域的位置和大小。您可以使用ALTER SYSTEM命令禁用快速恢复区域。使用初始化参数配置控制文件和重做日志的默认位置。初始化参数CONTROL_FILES，DB_CREATE_ONLINE_LOG_DEST_n，DB_RECOVERY_FILE_DEST和DB_CREATE_FILE_DEST都相互作用以确定创建数据库控制文件的位置。Oracle建议您将快速恢复区域用作归档位置，因为归档日志由数据库自动管理。某些RMAN命令或隐式操作（例如控制文件自动备份）可以在快速恢复区域中创建文件。备份保留策略指定必须保留哪些备份以满足您的数据恢复要求。CONFIGURE RETENTION POLICY命令的REDUNDANCY参数指定RMAN保留的每个数据文件和控制文件的完整备份数或0级备份数。默认保留策略为REDUNDANCY 1。CONFIGURE命令的RECOVERY WINDOW参数指定当前时间与最早可恢复点之间的天数。禁用保留策略时，RMAN不会将任何备份视为过时。运行RMAN CONFIGURE命令以启用和禁用备份优化。如果备份了相同的文件或相同版本的文件，则备份优化会在某些情况下跳过文件备份。启用备份优化时，BACKUP命令会在将相同文件备份到指定的设备类型时跳过备份文件。备份到SBT设备时，并不总是应用备份优化。默认情况下，备份优化配置为OFF。您可以使用SHOW BACKUP OPTIMIZATION命令查看备份优化的当前设置。您可以使用RMAN创建一个持久性配置，以管理归档重做日志何时有资格从磁盘中删除。您可以使用CONFIGURE ARCHIVELOG DELETION POLICY命令指定归档重做日志何时符合删除条件。默认情况下，没有归档重做日志删除策略，这就是归档重做日志策略设置为NONE子句的原因。您可以使用CONFIGURE ARCHIVELOG DELETION POLICY BACKED UP整数TIMES TO DEVICE TYPE命令启用存档日志删除策略。此配置指定仅当指定设备类型上存在指定数量的归档日志备份时，归档日志才有资格删除。默认情况下，归档重做日志删除策略设置为NONE。如果在Data Guard环境中使用RMAN，则可以使用CONFIGURE命令在此环境中注册和配置物理数据库的设置。">配置RMAN环境</a>和<a href="configuring-rman-client-advanced.html#GUID-2210B194-FDA8-4BB4-BC1E-DBE7DBEACB4A" title="CONFIGURE CHANNEL命令用于配置RMAN通道选项。无论是手动分配通道还是使用自动通道分配，都可以使用通道命令和选项来控制行为。除了配置适用于特定类型的所有通道的参数外，还可以使用CONFIGURE命令配置适用于特定通道的参数。PARALLELISM设置不受特定配置通道数量的限制。备份选项使您可以控制备份大小，备份压缩和备份加密等方面。CONFIGURE MAXSETSIZE命令限制在通道上创建的备份集的大小。当使用BACKUP命令创建备份集时，此CONFIGURE设置适用于任何通道，无论是手动分配还是已配置。默认值以字节为单位，向下舍入为最低千字节值。当备份片大小超过文件系统或媒体管理软件允许的最大文件大小时，它是一个问题。您可以使用CONFIGURE CHANNEL或ALLOCATE CHANNEL命令的MAXPIECESIZE参数来限制备份片的大小。使用配置...BACKUP COPIES命令指定在指定类型的文件的指定设备类型上创建每个备份片的副本数。此类备份称为双工备份集。有时，您可能希望从常规备份计划的一部分中省略指定的表空间。使用CONFIGURE命令配置表空间排除。RMAN支持预压缩处理和备份集的二进制压缩。CONFIGURE COMPRESSION ALGORITHM命令可以配置压缩选项。通过合并每个数据块中的可用空间并将该空闲空间设置为二进制零来实现更好的备份压缩比。对于已经成为许多删除和插入操作主题的数据块，此预压缩处理阶段具有最大优势。相反，它对仍处于初始加载状态的数据块没有影响。Oracle数据库提供两类压缩算法：默认压缩算法和Oracle Advanced Compression选项提供的一组压缩算法。使用CONFIGURE命令配置默认压缩算法，该算法不需要Oracle Advanced Compression选项。为了提高安全性，您可以为RMAN备份集配置备份加密。如果未经授权的用户获取加密备份，则无法读取这些备份。V $ RMAN_ENCRYPTION_ALGORITHMS视图包含RMAN支持的加密算法列表。如果未指定加密算法，则默认加密算法为128位高级加密标准（AES）。如果所需的Oracle密钥管理基础结构可用，则透明加密可以在没有DBA干预的情况下创建和恢复加密备份。密码加密要求DBA在创建和还原加密备份时提供密码。恢复密码加密的备份需要使用与创建备份相同的密码。可以透明地或通过指定密码来恢复双模式加密备份。您可以使用CONFIGURE命令持久配置备份的透明加密。您可以使用CONFIGURE命令持久配置在编写备份集时用于加密的默认算法。在执行诸如数据文件表空间时间点恢复（TSPITR）或使用RMAN进行数据传输等操作时，您可能希望在辅助实例中设置数据文件的名称。在启动TSPITR或数据库复制之前设置这些名称。当RMAN需要控制文件的读取一致版本时，它会创建临时快照控制文件。在与恢复目录重新同步时或在备份当前控制文件时，RMAN需要快照控制文件。您可以通过运行SHOW命令查看当前快照位置。使用CONFIGURE SNAPSHOT CONTROLFILE NAME命令&#39;filepath&#39;命令更改快照控制文件的名称和路径。RMAN创建的后续快照控制文件使用指定的名称和路径。RMAN无法通过共享服务器调度程序连接到目标数据库。RMAN需要专用的服务器进程。当I / O子系统确认块写入完成时，会发生数据块丢失写入，但写入未在持久存储中发生。在随后的块读取中，I / O子系统返回数据块的陈旧版本，该版本可能用于更新数据库的其他块，从而破坏它。影子丢失写保护提供快速检测和对数据块丢失重写的即时响应，从而最大限度地减少数据丢失和数据库修复时间。使用影子丢失写保护不是必需的备用数据库。">配置RMAN环境：高级主题</a> ，以了解如何配置RMAN环境</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV89350"></a><div class="props_rev_3"><a id="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022" name="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022"></a><h3 id="BRADV-GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022" class="sect3"><span class="enumeration_section">2.4</span>备份数据库：快速入门</h3>
               <div>
                  <p>使用BACKUP命令备份文件。RMAN将数据备份到配置的默认设备以获取所请求的备份类型。</p>
                  <p>默认情况下，RMAN在磁盘上创建备份。如果启用了快速恢复区域，并且未指定<code class="codeph">FORMAT</code>参数（请参阅<a href="getting-started-rman.html#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ" title="常见的BACKUP选项">表2-1</a> ），则RMAN会在恢复区域中创建备份并自动为其指定唯一名称。
                  </p>
                  <p>默认情况下，RMAN会创建备份集而不是映像副本。<a href="glossary.html#GUID-6AA43E7D-9946-4C41-A62F-01E5BACEB8A7"><span class="xrefglossterm">备份集</span></a>由一个或多个备份片组成，这些备份片是以只有RMAN才能访问的格式编写的物理文件。<a href="glossary.html#GUID-EA6CE3E8-6986-4512-AF66-710D80376093"><span class="xrefglossterm">多路复用备份集</span></a>包含来自多个输入文件的块。RMAN可以将备份集写入磁盘或磁带。
                  </p>
                  <p>如果指定<code class="codeph">BACKUP</code> <code class="codeph">AS</code> <code class="codeph">COPY</code> ，则RMAN将每个文件<a href="glossary.html#GUID-397CB99E-3F07-4980-96B3-9D0D0ABBABEA"><span class="xrefglossterm">复制</span></a>为<a href="glossary.html#GUID-397CB99E-3F07-4980-96B3-9D0D0ABBABEA"><span class="xrefglossterm">映像副本</span></a> ，这是在磁盘上创建的数据库文件的逐位副本。映像副本与使用操作系统命令（如Linux上的<code class="codeph">cp</code>或Windows上的<code class="codeph">COPY</code>创建的副本相同，但是会记录在RMAN存储库中，因此可供RMAN使用。在数据库打开时，您可以使用RMAN进行映像复制。
                  </p>
                  <p>以下部分描述了以不同模式备份数据库：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC" title="BACKUP命令包括一系列控制备份输出的选项，参数和子句。">关于典型的RMAN备份选项</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A" title="如果数据库在ARCHIVELOG模式下运行，则可以在数据库打开时备份数据库。">在ARCHIVELOG模式下备份数据库</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255" title="如果数据库在NOARCHIVELOG模式下运行，则唯一有效的数据库备份是一致的备份。">在NOARCHIVELOG模式下备份数据库</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-0B997E06-7881-444D-A910-CFC37C25DF72" title="增量备份捕获在先前增量备份之后对数据库进行的块级更改。">进行增量备份</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB" title="通过逐步更新的备份，您可以实施有效的增量备份永久备份策略。">进行增量更新备份</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-24321560-D43E-4E25-8A32-99E4C5A3F940" title="RMAN支持使用命令文件来管理重复性任务，例如每周备份。">编写RMAN操作脚本</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022__GUID-604D4F5F-5BD6-46E8-9793-355357A945AE">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-B3380142-ABCD-437F-9E06-B219D74E6738" title="使用RMAN BACKUP命令创建一致和不一致的备份。当数据库处于一致状态时，将发生一致的备份。您可以使用BACKUP命令对数据库进行一致的备份。任何不一致的数据库备份都是不一致的备份。数据库打开时进行的备份不一致，实例失败或SHUTDOWN ABORT命令后进行备份也是如此。您可以创建RMAN备份或用户管理的备份。在RMAN中执行BACKUP命令时，您将创建一个或多个备份集或映像副本。默认情况下，无论目标是磁盘还是媒体管理器，RMAN都会创建备份集。RMAN可以将备份数据存储在称为备份集的逻辑结构中，该备份集是RMAN备份的最小单元。创建备份集时，RMAN可以使用块压缩。使用未使用的块压缩时，RMAN会跳过读取和备份当前未分配给某个数据库对象的任何数据库块。这与先前是否已分配这些块无关。当使用空块压缩时，RMAN从其输出中省略任何从未包含数据的块。RMAN支持备份集的二进制压缩。二进制压缩仅在BACKUP命令中指定AS COMPRESSED BACKUPSET时启用，或者一次使用配置设备类型[DISK | SBT] BACKUP TYPE TO COMPRESSED BACKUPSET命令。在备份撤消优化中，RMAN排除了恢复备份时不需要的撤销，即已经提交的事务。RMAN支持备份集的备份加密。您可以使用基于密钥库的透明加密，基于密码的加密或两者。您可以让RMAN确定备份片段的唯一名称，也可以使用FORMAT子句指定名称。默认情况下，备份集包含一个备份片。要限制每个备份片的大小，请指定CONFIGURE CHANNEL或ALLOCATE CHANNEL命令的MAXPIECESIZE选项。您可以使用BACKUP命令的backupSpec子句指定要备份的对象。每个backupSpec子句至少生成一个备份集。创建备份集时，RMAN可以同时从磁盘读取多个文件，然后将其块写入同一备份集。例如，RMAN可以同时读取两个数据文件，然后将这些数据文件中的块组合成一个备份片。来自多个文件的块组合称为备份多路复用。在代理副本期间，RMAN将数据传输的控制权转交给支持此功能的媒体管理器。代理副本只能与支持它的媒体管理器一起使用，不能与DISK类型的通道一起使用。 BACKUP命令的PROXY选项指定备份是代理副本。映像副本是单个数据文件，归档重做日志文件或控制文件的精确副本。要创建映像副本并将其记录在RMAN存储库中，请运行RMAN BACKUP AS COPY命令。RMAN可以使用由RMAN外部的机制创建的映像副本，例如本机操作系统文件复制命令或将文件的映像副本保留在磁盘上的第三方实用程序。此类副本称为用户管理的备份或操作系统备份。您可以使用RMAN BACKUP命令从稀疏数据文件，包含稀疏数据文件的表空间，稀疏可插拔数据库（PDB）和包含稀疏PDB的多租户容器数据库（CDB）备份数据块。预包装备份是在非CDB或PDB插入其他CDB之前创建的非CDB或PDB的RMAN备份.RMAN使您可以创建多个相同的备份副本。RMAN BACKUP BACKUPSET命令备份在磁盘上创建的备份集。该命令是在多个媒体之间传播备份的有用方法。在许多恢复情况下，最近备份控制文件和服务器参数文件非常有用。为确保您备份这些文件，数据库支持控制文件和服务器参数文件自动备份。根据目标数据库的配置，RMAN可以执行控制文件和服务器参数文件的自动备份。在备份作业期间分配的第一个通道创建自动备份并将其放入其自己的备份集中。对于数据库结构更改后的自动备份，与结构更改关联的服务器进程进行备份。增量备份仅复制自上次备份以来已更改的数据块。您可以使用RMAN创建数据文件，表空间或整个数据库的增量备份。RMAN可以创建多级增量备份。每个增量级别由值0或1表示。在差异级别1备份中，RMAN备份自级别1（累积或差异）或级别0的最新增量备份以来已更改的所有块。在累积级别1备份中，RMAN备份自当前或父级化身中最近的0级增量备份以来使用的所有块。增量备份的块更改跟踪功能通过在块更改跟踪文件中记录每个数据文件中的更改块来提高增量备份性能。在介质恢复期间，RMAN会检查还原的文件，以确定是否可以使用增量备份来恢复它们。如果可以选择，则RMAN始终在归档重做日志上选择增量备份，因为在块级别应用更改比应用重做更快。备份永久备份策略消除了在备份到零数据丢失恢复设备（恢复设备）时创建重复完整备份的需要。虽然Recovery Appliance支持其他RMAN备份策略，但是持续备份的推荐方法是永久增量备份策略。您可以使用CONFIGURE RETENTION POLICY命令创建持久性和自动备份保留策略。恢复窗口是一个以当前时间开始并向后延伸到可恢复点的时间段。可恢复性是假设时间点恢复的最早时间，也就是说，在媒体故障后您可以恢复的最早时间点。在某些情况下，使用恢复窗口会使磁盘空间规划复杂化，因为必须保留的备份数量不是恒定的，并且取决于备份计划。相反，基于冗余的保留策略指定必须保留每个数据文件的备份数。您可以运行REPORT OBSOLETE命令，以根据保留策略确定当前哪些备份已过时。如果配置快速恢复区域，则数据库使用内部算法选择快速恢复区域中不再需要的文件以满足配置的保留策略。">RMAN备份概念</a> ，用于学习与RMAN备份相关的概念</p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7" title="使用BACKUP命令创建RMAN备份。RMAN备份的主要目的是保护您的数据。如果发生介质故障或灾难，则可以还原备份并恢复丢失的更改。您可以使用RMAN客户端中的BACKUP命令备份全部或部分数据库。您可以为BACKUP命令提供参数以覆盖默认备份选项。BACKUP命令采用DEVICE TYPE子句，指定是备份到磁盘还是磁带设备。RMAN可以在磁盘上创建备份作为映像副本或备份集。RMAN提供了一系列选项来命名BACKUP命令生成的文件。备份到磁盘时，您可以指定一种格式以将备份分布在多个驱动器上以提高性能。RMAN将一个称为标记的字符串附加到它创建的每个备份上，作为识别备份的一种方式。您可以接受默认标记，也可以使用BACKUP命令的TAG参数指定自己的标记。用户指定的标记是指示不同类别的备份或副本的用途或用法的有用方法。将TAG参数与BACKUP命令一起使用可指定备份集和映像副本的标记。创建备份集时，可以通过在BACKUP命令中包含AS COMPRESSED BACKUPSET选项，使用RMAN支持对备份集进行二进制压缩。通过多节备份，可以将大型数据文件划分为多个部分，这些部分可以跨多个通道并行备份。这提供了更快的备份性能和更好的恢复时间。在创建映像副本时，RMAN使用多个通道写入文件节。但是，此操作的输出是每个数据文件的一个副本。您可以在装入或打开数据库的情况下执行整个数据库备份。您可以使用BACKUP TABLESPACE命令备份一个或多个表空间，或使用BACKUP DATAFILE命令备份一个或多个数据文件。您可以在装入或打开数据库时备份控制文件。RMAN使用快照控制文件来确保读取一致的版本。控制文件的手动备份与控制文件自动备份不同。在备份BACKUP命令中指定的文件后，RMAN会进行控制文件自动备份。要进行手动备份，可以在备份其他文件时指定INCLUDE CURRENT CONTROLFILE或指定BACKUP CURRENT CONTROLFILE。在某些情况下，RMAN会自动备份当前服务器参数文件。BACKUP SPFILE命令显式备份参数文件。备份的服务器参数文件是实例当前使用的文件。只有在数据库关闭且处于一致状态时，才能以NOARCHIVELOG模式备份数据库。预打印备份确保在将非CDB作为PDB插入CDB后可以使用RMAN备份。使用BACKUP命令备份多租户容器数据库（CDB）和可插拔数据库（PDB）。RMAN和Oracle Enterprise Manager Cloud Control为多租户环境中的备份和恢复提供全面支持。备份整个多租户容器数据库（CDB）类似于备份非CDB。备份整个CDB时，RMAN会备份根，所有可插拔数据库（PDB）和归档重做日志。您可以使用RMAN仅备份根。由于根包含整个CDB的关键元数据，因此Oracle建议您定期备份根或备份整个CDB。Oracle Enterprise Manager云控制（云控制）可用于备份根。RMAN允许您使用BACKUP命令备份CDB中的一个或多个PDB。迁移PDB并将其插入到不同的目标CDB后，PDB的预打印备份可用于执行还原和恢复操作.Oracle Enterprise Manager云控制（云控制）可用于执行可插拔数据库（PDB）的备份。由于不同PDB中的表空间可以具有相同的名称，因此为了消除歧义，您必须直接连接到PDB以备份其一个或多个表空间。此示例创建CDB cdb_prod中包含的PDB my_pdb的预包装备份。CDB使用共享撤消，并在读写模式下打开。RMAN使您可以使用BACKUP命令在应用程序根，一个或多个应用程序PDB和应用程序容器上执行备份操作。RMAN可以备份应用程序容器，应用程序PDB和应用程序根目录。使用RMAN BACKUP命令备份应用程序根目录。使用BACKUP命令备份应用程序容器，该容器由应用程序根目录和属于应用程序根目录的所有应用程序PDB组成。BACKUP命令用于备份一个或多个应用程序PDB。使用BACKUP命令备份稀疏数据库。RMAN使您可以使用备份集或映像副本格式中的备份整个数据库的步骤来备份稀疏数据库。您可以使用BACKUP命令备份包含稀疏数据文件或单个稀疏数据文件的一个或多个表空间。RMAN使您可以备份CDB中的一个或多个稀疏PDB。归档重做日志是成功恢复媒体的关键。你应该定期备份它们。RMAN备份的若干功能特定于归档重做日志。例如，您可以使用BACKUP ...删除以将备份到备份集后从磁盘中删除一个或所有归档重做日志副本。即使您的重做日志存档到多个目标并且您使用RMAN备份存档的重做日志，RMAN也只选择一个存档的重做日志文件副本以包含在备份集中。由于具有相同日志序列号的日志相同，因此RMAN不需要包含多个日志副本。自动在线重做日志切换是一项重要的RMAN功能。在CDB中，只有当您以具有SYSDBA或SYSBACKUP权限的普通用户身份连接到根时，才能备份存档的重做日志。要备份存档日志，请使用BACKUP ARCHIVELOG命令。您可以指示RMAN应自动跳过归档重做日志的备份。您可以使用BACKUP ARCHIVELOG命令备份多租户容器数据库（CDB）中的归档重做日志。BACKUP ARCHIVELOG ......DELETE INPUT命令在备份后删除存档的日志文件。此命令消除了手动删除存档重做日志的单独步骤。在CDB中，您可以使用BACKUP ARCHIVELOG备份后删除存档的重做日志...DELETE INPUT命令。增量备份仅复制自指定的先前备份以来已更改的数据文件块。使用BACKUP命令创建增量备份。RMAN增量备份提供多种好处。根据可接受的MTTR（平均恢复时间）选择备份策略。您可以将卷影复制服务（VSS）与Oracle VSS编写器一起使用，以在数据库中制作卷影副本或文件快照。通过逐步更新备份，可以避免对数据文件进行完整映像副本备份的开销，同时还可以最大限度地减少介质恢复数据库所需的时间。例如，如果您运行每日备份脚本，那么您永远不会有超过1天的重做时间来申请媒体恢复。要创建增量备份以用于增量更新的备份策略，请使用BACKUP ...使用TAG形式的BACKUP命令恢复COPY。在实现策略的示例脚本中最好地理解该命令。增量备份的块更改跟踪功能通过记录每个数据文件的更改块来提高备份性能。如果在主数据库或备用数据库上启用了块更改跟踪，则RMAN使用块更改跟踪文件来标识已更改的块以进行增量备份。通过读取这个小位图文件来确定哪些块发生了变化，RMAN避免了必须扫描它备份的数据文件中的每个块。Oracle数据库自动管理更改跟踪文件中的空间，以保留涵盖最近八个备份的块更改数据。达到最多八个位图后，最旧的位图将被跟踪当前更改的位图覆盖。默认情况下，块更改跟踪文件在DB_CREATE_FILE_DEST初始化参数指定的目标中创建为Oracle托管文件。您还可以通过在启用块更改跟踪时指定其名称，将块更改跟踪文件放在您选择的任何位置。块更改跟踪文件的大小与数据库的大小和重做的已启用线程数成比例。您可以在打开或装入数据库时启用块更改跟踪。禁用块更改跟踪时，数据库将从操作系统中删除块更改跟踪文件。您可以查询V $ BLOCK_CHANGE_TRACKING视图以确定是否启用了更改跟踪，如果是，则确定块更改跟踪文件的文件名。要移动更改跟踪文件，请使用ALTER DATABASE RENAME FILE语句。你可以使用BACKUP ......保持创建既包含所有权又不受备份保留策略限制的备份。通过使用带有BACKUP命令的KEEP选项，可以从保留策略中免除备份。通常，您将归档备份到磁带。由于您的数据保护备份最有可能位于一组仍可访问且可回收的磁带上，因此建议为归档备份保留一组磁带。使用带有KEEP选项的BACKUP命令进行归档备份。归档备份的一个目的是创建测试数据库。您可以使用BACKUP BACKUPSET命令备份其他备份作业生成的备份集。您还可以使用BACKUP RECOVERY AREA备份在当前和所有先前快速恢复区域目标中创建的恢复文件。BACKUP BACKUPSET命令在备份集中创建备份片的其他副本，但不创建新的备份集。对于基于冗余的备份保留策略，备份集将计为备份的一个实例。即使存在构成备份集的备份片的多个副本（例如，备份集已从磁盘备份到磁带），此语句也是如此。使用BACKUP BACKUPSET命令将备份集从磁盘复制到磁带。使用BACKUP命令将映像副本备份到磁带。">备份数据库</a> ，了解如何使用RMAN备份数据库文件</p>
                        </li>
                        <li>
                           <p>用于<code class="codeph">BACKUP</code>命令语法和语义的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><span class="italic">Oracle数据库备份和恢复参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV121"></a><a id="BRADV89352"></a><div class="props_rev_3"><a id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC" name="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC"></a><h4 id="BRADV-GUID-DBA25637-179F-4AA5-9658-74EABF458FCC" class="sect4"><span class="enumeration_section">2.4.1</span>关于典型的RMAN备份选项</h4>
                  <div>
                     <p><code class="codeph">BACKUP</code>命令包括一系列控制备份输出的选项，参数和子句。
                     </p>
                     <p><a href="getting-started-rman.html#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ" title="常见的BACKUP选项">表2-1</a>列出了一些典型的备份选项。
                     </p>
                     <div class="tblformal" id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ">
                        <p class="titleintable">表2-1常用备份选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="常用备份选项" width="100%" border="1" summary="Common BACKUP options" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d12434e1624">选项</th>
                                 <th align="left" valign="bottom" width="57%" id="d12434e1627">描述</th>
                                 <th align="left" valign="bottom" width="29%" id="d12434e1630">例</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e1635" headers="d12434e1624 ">
                                    <p><code class="codeph">格式</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e1635 d12434e1627 ">
                                    <p>指定备份片和副本的位置和名称。您必须使用替换变量来生成唯一的文件名。</p>
                                    <p>最常见的替换变量是<code class="codeph">%U</code> ，它生成唯一的名称。其他包括DB_NAME的<code class="codeph">%d</code> ，备份集时间戳的<code class="codeph">%t</code> ，备份集号的<code class="codeph">%s</code>和备份件号的<code class="codeph">%p</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e1635 d12434e1630 "><pre class="oac_no_warn" dir="ltr">备份格式'AL_％d /％t /％s /％p'ARCHIVELOG LIKE'％arc_dest％';</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e1663" headers="d12434e1624 ">
                                    <p><code class="codeph">标签</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e1663 d12434e1627 ">
                                    <p>指定用户定义的字符串作为备份的标签。如果未指定<a href="glossary.html#GUID-7679D8DB-B41A-4DDC-A1DD-20CEDC0BCA8E"><span class="xrefglossterm">标记</span></a> ，则RMAN会为默认标记分配日期和时间。标记始终以大写形式存储在RMAN存储库中。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e1663 d12434e1630 "><pre class="oac_no_warn" dir="ltr">BACKUP TAG'weekly_full_db_bkup'数据库MAXSETSIZE 10M;</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__GUID-B13D0E9D-1874-481D-84A1-D0B14CB46542">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="backing-up-database.html#GUID-FCD2EDB0-817F-4E92-A318-6E4BEC35B467" title="您可以为BACKUP命令提供参数以覆盖默认备份选项。">指定备份输出选项</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关格式选项的信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF195" target="_blank"><span class="italic">，请参见Oracle数据库备份和恢复参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV119"></a><a id="BRADV90058"></a><div class="props_rev_3"><a id="GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A" name="GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A"></a><h4 id="BRADV-GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A" class="sect4"><span class="enumeration_section">2.4.2</span>在ARCHIVELOG模式下备份数据库</h4>
                  <div>
                     <p>如果数据库在<code class="codeph">ARCHIVELOG</code>模式下运行，则可以在数据库打开时备份数据库。
                     </p>
                     <div class="section">
                        <p>如果备份在其检查点之后包含更改，则称为<a href="glossary.html#GUID-BE64D1D8-34E7-4295-BDFC-2E99B1BC454D"><span class="xrefglossterm">不一致备份</span></a> 。如果您具有恢复备份所需的归档重做日志，则打开数据库备份与一致备份一样有效地保护数据。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A__GUID-6967E8CF-5679-42C4-89A5-3CFEEA011E0A">在数据库打开时备份数据库和归档重做日志：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>运行<code class="codeph">BACKUP DATABASE</code>命令。</span><div>
                              <p>例如，在RMAN提示符处输入以下命令，以将数据库和所有归档重做日志文件备份到默认备份设备：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; BACKUP DATABASE PLUS ARCHIVELOG;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV120"></a><a id="BRADV90059"></a><div class="props_rev_3"><a id="GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255" name="GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255"></a><h4 id="BRADV-GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255" class="sect4"><span class="enumeration_section">2.4.3</span>以NOARCHIVELOG模式备份数据库</h4>
                  <div>
                     <p>如果数据库在<code class="codeph">NOARCHIVELOG</code>模式下运行，则唯一有效的数据库备份是一致的备份。
                     </p>
                     <div class="section">
                        <p>要使备份保持一致，必须在一致关闭后装入数据库。恢复备份后不需要特别恢复，但是您将丢失备份后进行的任何事务。您可以使用<a href="glossary.html#GUID-D11D736A-3513-48E5-8738-64DBE60725D1"><span class="xrefglossterm">一致备份中的</span></a>归档日志进行恢复，以最大限度地减少数据丢失
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255__GUID-139EDE8C-B300-417D-9C55-531B6C24F91A">要进行一致的数据库备份：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>一致地关闭数据库然后安装它。</span><div>
                              <p>例如，输入以下命令以<span class="italic">保证</span>数据库处于备份的一致状态：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;立即关闭; RMAN&gt; STARTUP FORCE DBA; RMAN&gt;立即关闭; RMAN&gt; STARTUP MOUNT;</pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">BACKUP DATABASE</code>命令。</span><div>
                              <p>例如，在RMAN提示符处输入以下命令，以将数据库备份到默认备份设备：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;备份数据库;</pre><p>以下命令的变体创建数据库中所有数据文件的映像副本备份：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;备份作为复制数据库;</pre></div>
                        </li>
                        <li class="stepexpand"><span>打开数据库并恢复正常操作。</span><div>
                              <p>以下命令打开数据库：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER DATABASE OPEN;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV122"></a><a id="BRADV89353"></a><div class="props_rev_3"><a id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72" name="GUID-0B997E06-7881-444D-A910-CFC37C25DF72"></a><h4 id="BRADV-GUID-0B997E06-7881-444D-A910-CFC37C25DF72" class="sect4"><span class="enumeration_section">2.4.4进行</span>增量备份：快速入门</h4>
                  <div>
                     <p>增量备份捕获在先前增量备份之后对数据库进行的块级更改。</p>
                     <div class="section">
                        <p>如果指定<code class="codeph">BACKUP</code> <code class="codeph">INCREMENTAL</code> ，则RMAN会创建数据库的<a href="glossary.html#GUID-31E3AC05-E73E-4E44-A9AA-915988B9A6A3"><span class="xrefglossterm">增量备份</span></a> 。与完整数据库备份相比，增量备份通常更小，速度更快。使用增量备份进行恢复比单独使用重做日志更快。
                        </p>
                        <p>增量备份策略的起点是<a href="glossary.html#GUID-DF84C185-E97D-4D3C-BF4E-41A9090C5F4C"><span class="xrefglossterm">0级增量备份</span></a> ，它备份数据库中的所有块。级别0的增量备份在内容上与<a href="glossary.html#GUID-D47BE9B3-BAE1-4415-B4B4-4D577B6CB493"><span class="xrefglossterm">完全备份</span></a>相同，但是，与完全备份不同，0级备份被视为增量备份策略的一部分。
                        </p>
                        <p>1级增量备份仅包含先前增量备份后更改的块。如果在运行1级备份时当前或父数据库<a href="glossary.html#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">化身中</span></a>不存在0级备份，则RMAN会自动进行0级备份。
                        </p>
                        <div class="infoboxnote" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-180C27FC-9FFD-4B96-8BDD-97BF36194F95">
                           <p class="notep1">注意：</p>
                           <p>虽然您可以在一致关闭后装入数据库时进行增量备份，但在<code class="codeph">NOARCHIVELOG</code>数据库打开时无法进行增量备份。
                           </p>
                        </div>
                        <p>1级备份可以是<a href="glossary.html#GUID-8BABFB51-EA47-4204-9A44-E1695A9F9FBF"><span class="xrefglossterm">累积增量备份</span></a> ，包括自最近的0级备份以来更改的所有块，或<a href="glossary.html#GUID-353B6668-6BA5-4815-8F08-1CD5B446FBD6"><span class="xrefglossterm">差异增量备份</span></a> ，其中仅包括自最近的增量备份以来更改的块。默认情况下，增量备份是差异的。
                        </p>
                        <p>在还原操作期间，RMAN将首先还原0级备份，然后根据需要自动应用增量备份和重做日志。这将重新应用自备份开始以来对数据库所做的更改。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-106166A0-CF3E-46DF-BDA1-9C62F63AE1A4">要对数据库进行增量备份：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>运行<code class="codeph">BACKUP INCREMENTAL</code>命令。</span><div>
                              <p>以下示例创建0级增量备份，以作为增量备份策略的基础：</p><pre class="oac_no_warn" dir="ltr">BACKUP INCREMENTAL LEVEL 0 DATABASE;</pre><p>以下示例创建1级累积增量备份：</p><pre class="oac_no_warn" dir="ltr">备份增量级别1累积数据库;</pre><p>以下示例创建1级差异增量备份：</p><pre class="oac_no_warn" dir="ltr">BACKUP INCREMENTAL LEVEL 1 DATABASE;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-61666EC7-63CC-4A22-9D0A-362C8E51E384">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="rman-backup-concepts.html#GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023" title="增量备份仅复制自上次备份以来已更改的数据块。您可以使用RMAN创建数据文件，表空间或整个数据库的增量备份。">关于RMAN增量备份</a> ”</span>有关增量备份和<span class="q">“ <a href="backing-up-database.html#GUID-2AF8EE74-CEB2-468D-A3B2-DD6AD8E41304" title="增量备份仅复制自指定的先前备份以来已更改的数据文件块。使用BACKUP命令创建增量备份。">制作和更新RMAN增量备份</a> ”</span>的更详细概念性概述</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV123"></a><a id="BRADV124"></a><a id="BRADV89354"></a><div class="props_rev_3"><a id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB" name="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB"></a><h4 id="BRADV-GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB" class="sect4"><span class="enumeration_section">2.4.5进行</span>增量更新备份</h4>
                  <div>
                     <p>通过逐步更新的备份，您可以实施有效的增量备份永久备份策略。</p>
                     <p>RMAN <a href="glossary.html#GUID-A641BB91-65FB-4300-8A7A-066F019B8A20"><span class="xrefglossterm">增量更新的备份</span></a>功能具有以下主要功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>该策略需要将0级数据文件副本作为基础。此副本具有系统定义或用户定义的标记。</p>
                        </li>
                        <li>
                           <p>定期创建1级差异备份，其标记与0级数据文件副本相同。<code class="codeph">BACKUP FOR RECOVER OF COPY</code>命令指定增量备份<span class="italic">仅</span>包含自具有相同标记的最新增量备份以来更改的块。
                           </p>
                        </li>
                        <li>
                           <p>增量备份会定期应用于0级数据文件副本。由于数据文件副本已使用更新的更新进行更新，因此现在需要较少的介质恢复。</p>
                        </li>
                     </ul>
                     <p><a href="getting-started-rman.html#GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__CIHDBFFF" title="恢复COPY选项">表2-2</a>说明了与<code class="codeph">FOR RECOVER OF COPY</code>一起使用哪些选项来实现增量更新的备份策略。
                     </p>
                     <div class="tblformalwide" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__CIHDBFFF">
                        <p class="titleintable">表2-2 COPY选项的恢复</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="用于恢复复制选项" width="100%" border="1" summary="FOR RECOVER OF COPY options" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d12434e2298">备份选项</th>
                                 <th align="left" valign="bottom" width="57%" id="d12434e2301">描述</th>
                                 <th align="left" valign="bottom" width="29%" id="d12434e2304">例</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e2309" headers="d12434e2298 ">
                                    <p><code class="codeph">FOR RECOVER OF COPY WITH TAG</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">tag_name</code></span> <code class="codeph">'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e2309 d12434e2301 ">
                                    <p>使用<code class="codeph">TAG</code>标识数据文件副本的标记，作为备份策略的基础。RMAN自动为此副本的每个1级备份分配相同的标记。
                                    </p>
                                    <p>如果当前或父数据库<a href="glossary.html#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">化身</span></a>中不存在具有指定标记的0级数据文件副本，则RMAN将使用指定的标记创建0级数据文件副本。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e2309 d12434e2304 "><pre class="oac_no_warn" dir="ltr">用TAG'incr_update'数据库恢复补充级别1以恢复复制;</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e2336" headers="d12434e2298 ">
                                    <p><code class="codeph">FOR RECOVER OF COPY DATAFILECOPY FORMAT '</code> <span class="italic"><code class="codeph">format</code></span> <code class="codeph">'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e2336 d12434e2301 ">
                                    <p>指定如果副本不存在，RMAN将创建数据文件副本的位置。如果将新数据文件添加到数据库，则无需更改脚本，因为RMAN会自动创建增量备份例程所需的0级副本。</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e2336 d12434e2304 "><pre class="oac_no_warn" dir="ltr">备份增量级别1，用于恢复复制DATAFILECOPY格式'/disk2/df1.cpy'数据库;</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__GUID-18A1CE03-0690-4C77-8268-04882526C332">要实施增量更新的备份策略：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li>
                           <p>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。
                           </p>
                        </li>
                        <li>
                           <p>运行<code class="codeph">RECOVER COPY</code>和<code class="codeph">BACKUP INCREMENTAL</code>命令。
                           </p>
                           <p>以下脚本是定期运行的，它是实现基于增量更新备份的策略所需的全部内容。</p><pre class="oac_no_warn" dir="ltr">使用TAG'incr_update'恢复数据库的复制;用TAG'incr_update'数据库恢复补充级别1以恢复复制;</pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__GUID-A3267B85-CB7B-4C7C-9435-B2DCC05139D4">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="backing-up-database.html#GUID-AF130A6B-06D1-4D52-87AC-BB8F4B30C9F9" title="通过逐步更新备份，可以避免对数据文件进行完整映像副本备份的开销，同时还可以最大限度地减少介质恢复数据库所需的时间。例如，如果您运行每日备份脚本，那么您永远不会有超过1天的重做时间来申请媒体恢复。">逐步更新备份</a> ”</span></p>
                     </div>
                  </div>
               </div><a id="BRADV125"></a><a id="BRADV89355"></a><div class="props_rev_3"><a id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9" name="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9"></a><h4 id="BRADV-GUID-32746671-9162-4FCD-9878-4DC241B6ABF9" class="sect4"><span class="enumeration_section">2.4.6</span>验证数据库文件和备份：快速入门</h4>
                  <div>
                     <p>RMAN验证检查备份以确定是否可以还原。验证还会检查损坏的块和丢失的文件。</p>
                     <div class="section">
                        <p>使用<code class="codeph">VALIDATE</code>命令确认所有数据库文件都存在，位于正确的位置，并且没有物理损坏。<code class="codeph">CHECK LOGICAL</code>选项还检查逻辑块损坏。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9__GUID-BAC9629A-96DB-4FF4-9738-0908BCC3FF85">要验证数据库文件：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>对所需文件运行<code class="codeph">BACKUP VALIDATE ...</code>命令。</span><div>
                              <p>例如，输入以下命令以验证所有数据库文件和归档重做日志文件是否存在物理和逻辑损坏：</p><pre class="oac_no_warn" dir="ltr">BACKUP VALIDATE CHECK LOGICAL DATABASE ARCHIVELOG ALL;</pre><p>您还可以使用<a href="../rcmrf/VALIDATE.html#RCMRF162" target="_blank"><code class="codeph">VALIDATE</code></a>命令检查各个数据块，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">验证数据文件4块10到13;</pre><p>您还可以验证备份集，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">VALIDATE BACKUPSET 3;</pre><p>您可以通过主键指定备份集，该主键显示在<code class="codeph">LIST BACKUP</code>命令的输出中。
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9__GUID-716E8554-ECF2-4945-A55E-0FF92951534A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="validating-database-files-backups.html#GUID-CC967929-9610-410D-B881-66E71353D84C" title="验证使您可以检查备份的完整性。RMAN验证的主要目的是检查损坏的块和丢失的文件。您还可以使用RMAN确定是否可以还原备份。数据库可防止导致无法使用的备份文件或损坏的已还原数据文件的操作。损坏的块是一个已更改的块，因此它与Oracle数据库期望找到的块不同。在物理损坏（也称为媒体损坏）中，数据库根本无法识别块：校验和无效，块包含全零，或块的页眉和页脚不匹配。您可以使用SET MAXCORRUPT命令设置RMAN备份文件中允许的未标记损坏总数。默认值为零，这意味着RMAN不会容忍任何类型的未标记的损坏块。Oracle数据库支持用于检测，修复和监视块损坏的不同技术。您可以使用VALIDATE命令手动检查数据库文件中的物理和逻辑损坏。您还可以使用BACKUP VALIDATE命令执行验证。你可以运行RESTORE ...VALIDATE以测试RMAN是否可以从备份还原特定文件或文件集。RMAN选择要使用的备份。RMAN使您可以使用VALIDATE命令验证多租户容器数据库（CDB）和可插拔数据库（PDB）。验证CDB的步骤与用于验证非CDB的步骤类似。有多种方法可以验证PDB。">验证数据库文件和备份</a></p>
                              </li>
                              <li>
                                 <p><code class="codeph">VALIDATE</code>命令语法和语义的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><span class="italic">Oracle数据库备份和恢复参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV126"></a><a id="BRADV89356"></a><div class="props_rev_3"><a id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940" name="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940"></a><h4 id="BRADV-GUID-24321560-D43E-4E25-8A32-99E4C5A3F940" class="sect4"><span class="enumeration_section">2.4.7</span>编写RMAN操作脚本</h4>
                  <div>
                     <p>RMAN支持使用命令文件来管理重复性任务，例如每周备份。</p>
                     <div class="section">
                        <p><a href="glossary.html#GUID-71012407-A78E-40C4-9B0E-971C6E38EED0"><span class="xrefglossterm">命令文件</span></a>是包含RMAN命令的客户端文本文件，就像您在RMAN提示符下输入它们一样。您可以使用任何文件扩展名。
                        </p>
                        <p>存储的脚本是命令文件的替代方法，允许脚本可供任何可连接到目标数据库及其恢复目录的RMAN客户端使用。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940__GUID-CEB4946C-692C-442E-867D-397C627BBC52">要创建并运行命令文件：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用文本编辑器创建命令文件。</span><div>
                              <p>例如，使用以下内容创建命令文件：</p><pre class="oac_no_warn" dir="ltr">#my_command_file.txt CONNECT TARGET / BACKUP DATABASE PLUS ARCHIVELOG;列表备份;出口;</pre></div>
                        </li>
                        <li class="stepexpand"><span>启动RMAN，然后通过在RMAN提示符下运行<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF100" target="_blank"><code class="codeph">@</code></a>命令来执行命令文件的内容：</span><div><pre class="oac_no_warn" dir="ltr">@ / <span class="italic"><code class="codeph">my_dir</code></span> / <span class="italic"><code class="codeph">my_command_file.txt</code></span> ＃运行指定的命令文件</pre><p>您还可以使用命令文件启动RMAN以运行，如下所示：</p><pre class="oac_no_warn" dir="ltr">％rman @ / <span class="italic"><code class="codeph">my_dir</code></span> / <span class="italic"><code class="codeph">my_command_file.txt</code></span>
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940__GUID-9B3C8D32-AB7F-4BD2-BC26-C5225AAD76B5">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="starting-interacting-with-rman-client.html#GUID-5FF51A4E-BC27-41A9-AA83-FF6E761C2535" title="对于重复性任务，您可以创建包含RMAN命令的文本文件，并使用@参数启动RMAN客户端，然后使用文件名。">将命令文件与RMAN一起使用</a> ”</span>以了解有关命令文件的更多信息</p>
                              </li>
                              <li>
                                 <p> <span class="q">“ <a href="starting-interacting-with-rman-client.html#GUID-A9321B2D-6CFF-4616-B629-67960A8F87DD" title="运行命令文件时，可以在USING子句中指定一个或多个值，以便在命令文件中的替换变量中使用。通过这种方式，您可以使命令文件动态化。">在命令文件中使用替换变量</a> ”</span>来学习如何在命令文件中使用替换变量并在运行时传递参数</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV89357"></a><div class="props_rev_3"><a id="GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8" name="GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8"></a><h3 id="BRADV-GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8" class="sect3"><span class="enumeration_section">2.5</span>报告RMAN操作：快速入门</h3>
               <div>
                  <p>RMAN可以使用存储在RMAN存储库中的信息来生成有关备份活动的报告。</p>
                  <p>使用RMAN <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF132" target="_blank"><code class="codeph">LIST</code></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF147" target="_blank"><code class="codeph">REPORT</code></a>命令报告备份操作。使用<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF154" target="_blank"><code class="codeph">SHOW ALL</code></a>命令显示当前的RMAN配置。此外，RMAN还提供了一组用于生成自定义报告的全面视图。
                  </p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352" title="LIST BACKUP和LIST COPY命令显示有关存储库中列出的备份和数据文件副本的信息。">列出备份</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-2DFA0B10-38BD-435F-981D-A665D81243F3" title="REPORT命令执行比LIST命令更复杂的报告分析。">报告数据库文件和备份</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV127"></a><a id="BRADV130"></a><a id="BRADV131"></a><a id="BRADV89358"></a><div class="props_rev_3"><a id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352" name="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352"></a><h4 id="BRADV-GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352" class="sect4"><span class="enumeration_section">2.5.1</span>列出备份：快速入门</h4>
                  <div>
                     <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code>和<code class="codeph">LIST</code> <code class="codeph">COPY</code>命令显示有关存储库中列出的备份和数据文件副本的信息。
                     </p>
                     <p>对于备份，您可以使用<a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHEECHB" title="描述BY BACKUP，BY FILE和SUMMARY选项">表2-3</a>和<a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI" title="描述EXPIRED和RECOVERABLE选项">表2-4中</a>的选项控制<code class="codeph">LIST</code>输出的格式。
                     </p>
                     <div class="tblformal" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHEECHB">
                        <p class="titleintable">表2-3备份的LIST选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="LIST备份选项" width="100%" border="1" summary="Describes the BY BACKUP, BY FILE, and SUMMARY options" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="12%" id="d12434e2984">选项</th>
                                 <th align="left" valign="bottom" width="38%" id="d12434e2987">例</th>
                                 <th align="left" valign="bottom" width="50%" id="d12434e2990">说明</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="12%" id="d12434e2995" headers="d12434e2984 ">
                                    <p><code class="codeph">BY</code> <code class="codeph">BACKUP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d12434e2995 d12434e2987 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">OF</code> <code class="codeph">DATABASE</code> <code class="codeph">BY</code> <code class="codeph">BACKUP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d12434e2995 d12434e2990 ">
                                    <p>按备份集组织输出。这是默认的演示模式。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="12%" id="d12434e3025" headers="d12434e2984 ">
                                    <p><code class="codeph">BY</code> <code class="codeph">FILE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d12434e3025 d12434e2987 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">BY</code> <code class="codeph">FILE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d12434e3025 d12434e2990 ">
                                    <p>根据备份的文件列出备份。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="12%" id="d12434e3049" headers="d12434e2984 ">
                                    <p><code class="codeph">摘要</code></p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d12434e3049 d12434e2987 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">SUMMARY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d12434e3049 d12434e2990 ">
                                    <p>显示摘要输出。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>对于备份和副本，您可以使用<a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI" title="描述EXPIRED和RECOVERABLE选项">表2-4中</a>显示的其他选项。
                     </p>
                     <div class="tblformal" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI">
                        <p class="titleintable">表2-4其他LIST选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="其他LIST选项" width="100%" border="1" summary="Describes the EXPIRED and RECOVERABLE options" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="13%" id="d12434e3084">选项</th>
                                 <th align="left" valign="bottom" width="27%" id="d12434e3087">例</th>
                                 <th align="left" valign="bottom" width="60%" id="d12434e3090">说明</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d12434e3095" headers="d12434e3084 ">
                                    <p><code class="codeph">过期</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d12434e3095 d12434e3087 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">EXPIRED</code> <code class="codeph">COPY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="60%" headers="d12434e3095 d12434e3090 ">
                                    <p>列出记录在RMAN存储库中但在最后一个<code class="codeph">CROSSCHECK</code>命令期间在磁盘或磁带上的预期位置不存在的备份。操作系统实用程序可能已删除<a href="glossary.html#GUID-A8547B27-5415-4AAA-B2B4-C0998EB62E47"><span class="xrefglossterm">过期的备份</span></a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d12434e3120" headers="d12434e3084 ">
                                    <p><code class="codeph">RECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d12434e3120 d12434e3087 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP RECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="60%" headers="d12434e3120 d12434e3090 ">
                                    <p>列出在RMAN存储库中具有状态<code class="codeph">AVAILABLE</code>且可以还原和恢复的数据文件备份或副本。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__GUID-BAD7903C-4149-45C1-88BA-C8F369406E87">列出备份和副本：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li>
                           <p>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在RMAN提示符下运行<code class="codeph">LIST</code>命令。
                           </p>
                           <p>您可以显示特定对象，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">数据库的列表备份;列表复制数据文件1,2;从序列中列出ARCHIVELOG的备份10; DATAFILE 1的列表备注;</pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__GUID-7F54E77B-161E-4CAF-9841-517B665550BF">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="reporting-rman-operations.html#GUID-1B911001-C106-4267-9265-F649946DBF52" title="LIST命令使用RMAN存储库中的信息来提供备份列表以及与备份和恢复相关的其他对象。">列出备份和恢复相关对象</a> ”</span>以了解有关<code class="codeph">LIST</code>命令的更多信息</p>
                           </li>
                           <li>
                              <p>用于<code class="codeph">LIST</code>命令语法的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF132" target="_blank"><span class="italic">Oracle数据库备份和恢复参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV551"></a><a id="BRADV133"></a><a id="BRADV89359"></a><div class="props_rev_3"><a id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3" name="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3"></a><h4 id="BRADV-GUID-2DFA0B10-38BD-435F-981D-A665D81243F3" class="sect4"><span class="enumeration_section">2.5.2</span>报告数据库文件和备份：快速入门</h4>
                  <div>
                     <p><code class="codeph">REPORT</code>命令执行比<code class="codeph">LIST</code>命令更复杂的报告分析。
                     </p>
                     <p><a href="getting-started-rman.html#GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__CIHBJGBG" title="描述了NEED BACKUP，OBSOLETE，UNRECOVERABLE和SCHEMA选项">表2-5</a>显示了REPORT命令的一些主要选项。
                     </p>
                     <div class="tblformal" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__CIHBJGBG">
                        <p class="titleintable">表2-5报告选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="报告选项" width="100%" border="1" summary="Describes the NEED BACKUP, OBSOLETE, UNRECOVERABLE, and SCHEMA options" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d12434e3296">选项</th>
                                 <th align="left" valign="bottom" width="29%" id="d12434e3299">例</th>
                                 <th align="left" valign="bottom" width="57%" id="d12434e3302">说明</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3307" headers="d12434e3296 ">
                                    <p><code class="codeph">NEED</code> <code class="codeph">BACKUP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3307 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">NEED</code> <code class="codeph">BACKUP DATABASE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3307 d12434e3302 ">
                                    <p>显示哪些文件需要在当前保留策略下备份。使用可选的<code class="codeph">REDUNDANCY</code>和<code class="codeph">RECOVERY</code> <code class="codeph">WINDOW</code>参数指定不同的条件。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3337" headers="d12434e3296 ">
                                    <p><code class="codeph">已过时</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3337 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">OBSOLETE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3337 d12434e3302 ">
                                    <p>列出已配置的<a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">备份保留策略</span></a>下已过时的<a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">备份</span></a> 。使用可选的<code class="codeph">REDUNDANCY</code>和<code class="codeph">RECOVERY</code> <code class="codeph">WINDOW</code>参数覆盖默认值。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3365" headers="d12434e3296 ">
                                    <p><code class="codeph">SCHEMA</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3365 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">SCHEMA</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3365 d12434e3302 ">
                                    <p>在当前时间（默认）或不同时间报告数据库中的表空间和数据文件。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3380" headers="d12434e3296 ">
                                    <p><code class="codeph">UNRECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3380 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">UNRECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3380 d12434e3302 ">
                                    <p>列出自上次备份数据文件以来对数据文件中的对象执行了不可恢复操作的所有数据文件。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__GUID-A1B9E4C0-73C8-4E19-9459-7ECDD9F29DAF">生成数据库文件和备份的报告：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li>
                           <p>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在RMAN提示符下运行<code class="codeph">REPORT</code>命令。
                           </p>
                           <p>以下示例根据当前配置的备份保留策略报告已过时的备份：</p><pre class="oac_no_warn" dir="ltr">报告已废除;</pre><p>以下示例报告数据库中的数据文件和临时文件：</p><pre class="oac_no_warn" dir="ltr">报告计划;</pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__GUID-2E55EC8F-D02B-4269-B417-7EA6ACB79D8D">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="reporting-rman-operations.html#GUID-A1FDD9FE-74B8-4146-AFC4-6BD5402C8B5D" title="RMAN REPORT命令分析可用备份和数据库。">报告备份和数据库架构</a> ”</span>以了解如何使用<code class="codeph">REPORT</code>命令进行RMAN报告</p>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV89360"></a><div class="props_rev_3"><a id="GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415" name="GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415"></a><h3 id="BRADV-GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415" class="sect3"><span class="enumeration_section">2.6</span>维护RMAN备份</h3>
               <div>
                  <p>RMAN存储库元数据始终存储在目标数据库的控制文件中。管理备份时，RMAN维护命令使用此元数据。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-44223141-56C9-4F89-BD6D-474373EC1094" title="使用CROSSCHECK命令将RMAN备份和副本的逻辑记录与存储介质上的文件同步。">交叉检查备份</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10" title="DELETE命令从磁盘和磁带中删除RMAN备份和副本，在控制文件存储库中将文件状态更新为DELETED，并从恢复目录中删除记录（如果使用目录）。">删除过时备份</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV552"></a><a id="BRADV89362"></a><div class="props_rev_3"><a id="GUID-44223141-56C9-4F89-BD6D-474373EC1094" name="GUID-44223141-56C9-4F89-BD6D-474373EC1094"></a><h4 id="BRADV-GUID-44223141-56C9-4F89-BD6D-474373EC1094" class="sect4"><span class="enumeration_section">2.6.1</span>交叉检查备份：快速入门</h4>
                  <div>
                     <p>使用<code class="codeph">CROSSCHECK</code>命令将RMAN备份和副本的逻辑记录与存储介质上的文件同步。
                     </p>
                     <div class="section">
                        <p>如果备份在磁盘上，则<code class="codeph">CROSSCHECK</code>确定文件的标头是否有效。如果备份在磁带上，则RMAN会在RMAN存储库中查询备份片的名称和位置。在删除备份和副本之前，最好交叉检查备份和副本。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-44223141-56C9-4F89-BD6D-474373EC1094__GUID-EA497A12-C9E4-458B-8B7E-350900E2950B">要交叉检查磁盘上的所有备份和副本：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>运行<code class="codeph">CROSSCHECK</code>命令，如以下示例所示：</span><div><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUP; CROSSCHECK COPY;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-44223141-56C9-4F89-BD6D-474373EC1094__GUID-45633A88-BF22-4A6E-9232-F8A1079D6253">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="maintaining-rman-backups.html#GUID-EFF8F8D1-D67C-4202-9C8E-DE74ADFF1FFB" title="要确保恢复目录或控制文件中的备份数据与磁盘上或介质管理目录中的相应数据同步，请执行交叉检查。CROSSCHECK命令仅对当前记录在RMAN存储库中的文件进行操作。">交叉检查RMAN存储库</a> ”</span>以了解如何交叉检查RMAN备份</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV135"></a><a id="BRADV89363"></a><div class="props_rev_3"><a id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10" name="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10"></a><h4 id="BRADV-GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10" class="sect4"><span class="enumeration_section">2.6.2</span>删除过时备份：快速入门</h4>
                  <div>
                     <p>DELETE命令从磁盘和磁带中删除RMAN备份和副本，在控制文件存储库中将文件状态更新为<code class="codeph">DELETED</code> ，并从恢复目录中删除记录（如果使用目录）。
                     </p>
                     <div class="section">
                        <p>如果以交互方式运行RMAN，并且未指定<code class="codeph">NOPROMPT</code>选项，则在删除列表中的任何文件之前， <code class="codeph">DELETE</code>显示文件列表并提示进行确认。<code class="codeph">DELETE OBSOLETE</code>命令特别有用，因为RMAN删除了RMAN存储库中记录的备份和数据文件副本，这些副本已过时，即不再需要。您可以使用<code class="codeph">DELETE</code>命令上的选项指定过时的内容或使用配置的<a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">备份保留策略</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10__GUID-F73F7403-4722-4C7C-A956-6BE8D2FFAC58">要删除过时的备份和副本：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>运行<code class="codeph">DELETE OBSOLETE</code>命令，如以下示例所示：</span><div><pre class="oac_no_warn" dir="ltr">DELETE OBSOLETE;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10__GUID-D3D3BBF9-E840-477D-BA13-615213CAEBB5">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="maintaining-rman-backups.html#GUID-8C4B395D-7C24-485F-BEA0-A355821FB93D" title="您可以使用RMAN DELETE命令删除存档的重做日志和RMAN备份。">删除RMAN备份和归档重做日志</a> ”</span>以了解如何使用<code class="codeph">DELETE</code>命令</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV89364"></a><div class="props_rev_3"><a id="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649" name="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649"></a><h3 id="BRADV-GUID-F24568FC-0546-4CB0-B843-87F0A95D1649" class="sect3"><span class="enumeration_section">2.7</span>使用Data Recovery Advisor诊断和修复故障：快速入门</h3>
               <div>
                  <p>Data Recovery Advisor是一个Oracle数据库工具，它提供用于诊断持久性数据故障的基础结构，向用户提供修复选项，并根据用户的请求执行修复。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752" title="失败是Health Monitor检测到的持久性数据损坏。示例包括物理和逻辑数据块损坏和丢失的数据文件。">列出故障并确定修复选项</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C" title="使用RMAN REPAIR FAILURE命令修复检测到的故障。">修复失败</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649__GUID-8F591ECE-3F72-4F8A-ABCB-6D5DC767F396">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="diagnosing-repairing-failures-dra.html#GUID-636EA9BE-2DFB-4FA0-959E-B1290C774ABD" title="Data Recovery Advisor是一种通过确定数据库故障的最佳自动修复选项来帮助减少数据库恢复时间的工具。">数据恢复顾问概述</a> ”</span></p>
                  </div>
               </div><a id="BRADV136"></a><a id="BRADV89365"></a><div class="props_rev_3"><a id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752" name="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752"></a><h4 id="BRADV-GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752" class="sect4"><span class="enumeration_section">2.7.1</span>列出故障并确定修复选项</h4>
                  <div>
                     <p>失败是Health Monitor检测到的持久性数据损坏。示例包括物理和逻辑数据块损坏和丢失的数据文件。</p>
                     <div class="section">
                        <p>每个故障都有<a href="glossary.html#GUID-AFA532F1-81A1-433F-95BE-730178DD900D"><span class="xrefglossterm">故障优先级</span></a>和<a href="glossary.html#GUID-7881F5D7-5E80-49BF-A369-DC4B670EF8EB"><span class="xrefglossterm">故障状态</span></a> 。优先级可以是<code class="codeph">CRITICAL</code> ， <code class="codeph">HIGH</code>或<code class="codeph">LOW</code> 。状态可以是<code class="codeph">OPEN</code>或<code class="codeph">CLOSED</code> 。</p>
                        <p>您可以运行<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF132" target="_blank"><code class="codeph">LIST</code></a> <code class="codeph">FAILURE</code>命令来显示所有已知故障。如果存在故障，则在同一会话中运行<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF166" target="_blank"><code class="codeph">ADVISE FAILURE</code></a>命令以确定修复选项。<code class="codeph">ADVISE FAILURE</code>输出显示手动和自动修复选项。首先尝试手动修复问题。如果您无法手动解决问题，请查看自动修复部分。
                        </p>
                        <p>自动<a href="glossary.html#GUID-76EA30CA-A51E-44C9-AB25-E1D89AF711B2"><span class="xrefglossterm">修复选项</span></a>描述了针对一个或多个故障的服务器管理修复。尽可能整合修复，以便单次修复可以修复多个故障。修复选项通过执行修复操作指示执行了哪些修复以及数据是否丢失。
                        </p>
                        <div class="infoboxnotealso" id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__GUID-B0297116-EC2B-4D6A-928D-906242300B51">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="diagnosing-repairing-failures-dra.html#GUID-05C2861A-4EC0-4F0C-8860-42AC2BC4CC17" title="如果您怀疑或知道发生了一个或多个数据库故障，请使用LIST FAILURE获取有关它们的信息。">列出失败</a> ”</span>和<span class="q">“ <a href="diagnosing-repairing-failures-dra.html#GUID-13944F9E-545E-480A-A47B-CE0A73FED3C7" title="在RMAN会话中运行LIST FAILURE后，使用ADVISE FAILURE命令显示修复选项。此命令打印故障摘要，并隐式关闭所有已修复的打开故障。">确定修复选项</a> ”</span></p>
                        </div>
                        <p><a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">列出故障和确定修复选项</a>说明了<a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">列出故障和确定修复选项</a>的命令。输出指示包含RMAN命令的修复脚本的文件名。如果您不想使用Data Recovery Advisor自动修复故障，则可以使用该脚本作为您自己的恢复策略的基础。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">
                        <p class="titleinexample">例2-1列表失败和建议失败</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; <span class="bold">LIST FAILURE;</span>数据库角色：主要数据库故障列表=========================故障ID优先级状态检测时间摘要---------- -------- --------- ------------- ------- 142 HIGH OPEN 23-APR-13一个或多个非系统数据文件丢失101 HIGH OPEN 23-APR-13数据文件1：'/ disk1 / oddata / prod / system01.dbf'包含一个或多个损坏的块RMAN&gt; <span class="bold">ADVISE FAILURE;</span>数据库角色：主要数据库故障列表=========================故障ID优先级状态检测时间摘要---------- -------- --------- ------------- ------- 142 HIGH OPEN 23-APR-13一个或多个非系统数据文件丢失101 HIGH OPEN 23-APR-13数据文件1：'/ disk1 / oddata / prod / system01.dbf'包含一个或多个分析自动修复选项的损坏块;这可能需要一些时间使用通道ORA_DISK_1分析自动修复选项完成强制手动操作========================没有可用的手动操作可选手动操作=== ==================== 1。如果无意中重命名或移动了文件/disk1/oradata/prod/users01.dbf，请将其恢复为自动修复选项========================选项修复说明------ ------------------ 1恢复和恢复数据文件28;在文件1中执行块56416的块介质恢复策略：修复包括完整的介质恢复，没有数据丢失修复脚本：/disk1/oracle/log/diag/rdbms/prod/prod/hm/reco_660500184.hm</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="BRADV553"></a><a id="BRADV89366"></a><div class="props_rev_3"><a id="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C" name="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C"></a><h4 id="BRADV-GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C" class="sect4"><span class="enumeration_section">2.7.2</span>修复故障：快速入门</h4>
                  <div>
                     <p>使用RMAN <code class="codeph">REPAIR FAILURE</code>命令修复检测到的故障。
                     </p>
                     <div class="section">
                        <p>在<a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN会话中</span></a>运行<code class="codeph">LIST FAILURE</code>和<code class="codeph">ADVISE FAILURE</code>后，您可以运行<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF199" target="_blank"><code class="codeph">REPAIR FAILURE</code></a>来执行修复选项。如果在没有其他命令选项的情况下执行<code class="codeph">REPAIR FAILURE</code> ，则RMAN将使用当前会话中最新<code class="codeph">ADVISE FAILURE</code>命令的第一个修复选项。或者，指定从最新的<code class="codeph">ADVISE FAILURE</code>命令获得的修复选项编号。以下示例说明了如何修复<a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">示例2-1中</a>确定的故障。
                        </p><pre class="pre codeblock"><code>RMAN&gt;维修失败;</code></pre><p>默认情况下， <code class="codeph">REPAIR FAILURE</code>在开始执行之前会提示确认。执行修复后，Data Recovery Advisor会重新评估所有现有故障，因为它们可能也已修复。Data Recovery Advisor始终验证故障是否仍然相关并自动关闭固定故障。如果由于错误导致修复无法完成，则该错误会触发新的评估并重新评估现有故障和修复。
                        </p>
                        <div class="infoboxnotealso" id="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C__GUID-E43E6851-0927-4D18-ACA8-A63216B3266C">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="diagnosing-repairing-failures-dra.html#GUID-31DF1037-325F-4FED-8A37-23216EFF9526" title="您可以使用Data Recovery Advisor自动修复故障。">修复失败</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV554"></a><a id="BRADV89367"></a><div class="props_rev_3"><a id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1" name="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1"></a><h3 id="BRADV-GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1" class="sect3"><span class="enumeration_section">2.8</span>使用闪回数据库重绕数据库：快速入门</h3>
               <div>
                  <p>您可以使用Oracle闪回数据库将整个数据库回滚到过去的时间。与介质恢复不同，您无需还原数据文件以将数据库返回到过去状态。</p>
                  <div class="section">
                     <p>要使用RMAN <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF194" target="_blank"><code class="codeph">FLASHBACK DATABASE</code></a>命令，必须先将数据库配置为生成<a href="glossary.html#GUID-725ED3D7-5077-4F16-85AA-CDAD5BFCE554"><span class="xrefglossterm">闪回日志</span></a> 。<span class="q">“ <a href="using-flasback-database-restore-points.html#GUID-509FB7A6-4CB2-4730-80CA-7B2D68F50773" title="闪回数据库的效果类似于传统的时间点恢复。它使您能够在最近的某个时间将数据库返回到其状态。闪回数据库比时间点恢复快得多，因为它不需要从备份中恢复数据文件，并且需要从归档重做日志中应用较少的更改。">关于闪回数据库</a> ”中</span>介绍了此配置任务。闪回数据库通过倒回对运行命令时存在的数据文件的更改来工作。您无法使用闪回数据库来修复介质故障或丢失数据文件。
                     </p>
                     <p>发出<code class="codeph">FLASHBACK DATABASE</code>时必须装入<code class="codeph">FLASHBACK DATABASE</code> 。您可以在<a href="glossary.html#GUID-C25BCFCE-4DE2-499A-A5E3-407A774FE9F3"><span class="xrefglossterm">闪回数据库窗口中</span></a>闪回到任何时间。如果您之前已创建了<a href="glossary.html#GUID-A5A5E7B1-72B6-4F50-8E11-04C03EB5FFAE"><span class="xrefglossterm">还原点</span></a> ，那么这是一种方便，但不是必需的。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1__GUID-01867A7A-D160-455E-949A-E3727A88CB4F">使用闪回数据库回滚数据库：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                     <li class="stepexpand"><span>确保数据库处于已装入状态。</span><div>
                           <p>以下命令关闭然后装入数据库：</p><pre class="oac_no_warn" dir="ltr">立即关闭;启动安装;</pre></div>
                     </li>
                     <li class="stepexpand"><span>运行<code class="codeph">FLASHBACK DATABASE</code>命令。</span><div>
                           <p>以下示例说明了该命令的不同形式：</p><pre class="oac_no_warn" dir="ltr">FLASHBACK DATABASE TO SCN 861150; FLASHBACK DATABASE恢复点之前的数据; FLASHBACK DATABASE TO TIMESTAMP TO_DATE（04-DEC-2009 03:30:00'，'DD-MON-YYYY HH24：MI：SS'）;</pre></div>
                     </li>
                     <li class="stepexpand"><span>执行闪回数据库后，在SQL * Plus中以只读方式打开数据库并运行一些查询以验证数据库内容。</span><div>
                           <p>以如下方式打开数据库只读：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN READ ONLY;</pre></div>
                     </li>
                     <li class="stepexpand"><span>如果对结果满意，则发出以下命令序列以关闭然后打开数据库：</span><div><pre class="oac_no_warn" dir="ltr">立即关闭;启动安装; ALTER DATABASE OPEN RESETLOGS;</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1__GUID-EE8D0C47-C8AB-4D21-AED0-B117B8C8CBF1">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="rman-performing-flashback-dbpitr.html#GUID-953FA30D-BED2-4DBA-8361-9DA1B8FF073F" title="闪回数据库通过将数据库返回到先前某个时间点的状态来反转不需要的更改。">使用闪回数据库重绕数据库</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV89368"></a><div class="props_rev_3"><a id="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205" name="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205"></a><h3 id="BRADV-GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205" class="sect3"><span class="enumeration_section">2.9</span>恢复和恢复数据库文件：快速入门</h3>
               <div>
                  <p>使用<code class="codeph">RESTORE</code>和<code class="codeph">RECOVER</code>命令进行RMAN还原和恢复物理数据库文件。
                  </p>
                  <p>恢复数据文件是根据恢复操作的需要从备份中检索它们。介质恢复是将重做日志和增量备份的更改应用到已还原的数据文件，以将数据文件转发到所需的SCN或时间点。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="要恢复数据库，因为介质故障会损坏数据库文件，请首先确保您具有必要的备份。">准备还原和恢复数据库文件</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8" title="使用RESTORE DATABASE和RECOVER DATABASE命令恢复整个数据库。">恢复整个数据库</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8" title="在数据库打开时，在各个表空间上使用RESTORE TABLESPACE和RECOVER TABLESPACE命令。在这种情况下，您必须使需要恢复的表空间脱机，恢复然后恢复表空间，并使恢复的表空间联机。">恢复表空间</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E" title="RMAN可以恢复单个损坏的数据文件块。">恢复单个数据块</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205__GUID-727878EF-123D-4A82-8CDF-6A90790E86F3">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="rman-complete-database-recovery.html#GUID-D908719C-9D46-4084-850C-0F81C25094EB" title="丢失一个或多个数据库文件后，完全恢复会使数据库恢复正常运行。完全恢复正在将数据库恢复到最近的某个时间点，而不会丢失任何已提交的事务。本章中描述的完整恢复操作受特定条件的限制。零数据丢失恢复设备（恢复设备）大大减少了连续归档重做日志备份之间存在的潜在数据丢失窗口。您可以在数据库故障的几个亚之内恢复目标数据库。您必须根据恢复目标以及丢失的数据库文件来规划数据库还原和恢复策略。用于确定哪些文件需要还原或恢复的技术取决于丢失的文件类型。当任何多路复用控制文件变得不可访问时，数据库立即关闭。关于何时以及如何恢复的决定取决于数据库的状态和数据文件的位置。确定缺少哪些数据文件的简单方法是运行VALIDATE DATABASE命令。尽管VALIDATE DATABASE是确定文件是否不可访问的好方法，但您可能希望使用SQL查询来获取更详细的信息。建议您记录数据库的DBID。预览备份可帮助您确保还原和恢复操作所需的所有备份都可用。异地备份存储在远程位置，例如安全存储设施，除非媒体管理器检索媒体，否则无法恢复。验证备份可确定备份是否可用。RMAN会根据需要自动从备份还原存档的重做日志文件以执行恢复。RMAN使您可以覆盖已还原的归档重做日志文件的默认位置。要管理用于包含已还原日志的磁盘空间，可以在一个RUN块中多次指定已归档日志的还原目标，以在多个目标之间分配已还原的日志。对于使用某些技术加密的备份，您必须提供用于解密这些备份的密码。在完全恢复期间，RMAN将还原一个或多个数据文件，然后应用还原备份后生成的所有重做。您使用RESTORE和RECOVER命令来还原和恢复数据库。如果无法将数据文件还原到其默认位置，则必须更新控制文件以反映数据文件的新位置。此方案假定数据库trgt已丢失其大部分或全部数据文件。它还假定数据库使用快速恢复区域。使用带有TABLESPACE选项的RESTORE和RECOVER命令执行表空间的完全恢复您可以通过切换到无法访问的数据文件的映像副本来恢复数据库。这种技术比传统的恢复和恢复花费的时间更少，因为不需要恢复备份。当一个或多个数据文件损坏时，您可以通过切换到损坏的数据文件的现有映像副本来执行恢复。您可以通过切换到损坏的数据文件的映像副本而不是还原这些数据文件来执行完整的数据库恢复。RMAN和Oracle Enterprise Manager云控制（云控制）为多租户环境中的备份和恢复提供全面支持。恢复整个CDB时，可以在单个操作中恢复根和所有PDB。如果发生仅影响根的数据损坏或用户错误，您可以考虑仅恢复根。您可以执行一个或多个PDB的完全恢复，而不会影响其他打开的PDB的操作。企业管理器云控制（云控制）提供了恢复PDB的界面。使用RECOVER命令使用预包装备份执行完全恢复。预打印备份用于在PDB插入当前CDB之前的某个时间将PDB恢复并恢复到其状态。 RMAN使用预包装备份执行PDB的完全恢复。在将PDB迁移到当前目标CDB之前，在源非CDB或源CDB上创建了这些预制备份备份。此示例使用预刷新备份执行目标CDB prod_cdb中PDB my_pdb的完全恢复。由于不同PDB中的表空间可以具有相同的名称，以消除歧义，因此必须直接连接到PDB以恢复其一个或多个表空间。相反，由于数据文件编号和路径在CDB中是唯一的，因此在恢复PDB数据文件时可以连接到根或PDB。Oracle企业管理器云控制（云控制）提供了一个用于恢复PDB中的表空间的界面。通过切换到副本来恢复CDB比传统的恢复和恢复更快。RMAN使您可以使用RESTORE和RECOVER命令执行应用程序容器的完全恢复，而不会影响CDB中的其他容器。使用RESTORE和RECOVER命令执行应用程序根目录的完全恢复。您可以执行应用程序容器的完全恢复，其中包括应用程序根目录及其所有应用程序PDB，而不会影响CDB中的其他PDB。使用RESTORE和RECOVER命令执行一个或多个应用程序PDB的完全恢复。您可以使用RESTORE和RECOVER命令将稀疏数据库恢复到最近的时间点。执行包含稀疏数据文件的数据库的恢复与执行整个数据库的恢复非常相似。执行稀疏CDB的恢复与执行稀疏数据库的完全恢复非常相似。在根级别或CDB级别连接时，可以恢复稀疏PDB。">执行完整的数据库恢复</a></p>
                  </div>
               </div><a id="BRADV555"></a><a id="BRADV99956"></a><div class="props_rev_3"><a id="GUID-F05FE79E-7C36-402B-8785-961F793AA710" name="GUID-F05FE79E-7C36-402B-8785-961F793AA710"></a><h4 id="BRADV-GUID-F05FE79E-7C36-402B-8785-961F793AA710" class="sect4"><span class="enumeration_section">2.9.1</span>准备还原和恢复数据库文件：快速入门</h4>
                  <div>
                     <p>要恢复数据库，因为介质故障会损坏数据库文件，请首先确保您具有必要的备份。</p>
                     <div class="section">
                        <p>你可以使用<code class="codeph">RESTORE ...PREVIEW</code>命令报告但不还原RMAN可用于还原到指定时间的备份。RMAN查询元数据，但实际上并未读取备份文件。运行此命令时，可以打开数据库。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F05FE79E-7C36-402B-8785-961F793AA710__GUID-93F11DE9-D0B7-4005-96FE-C750C831971F">要预览数据库还原和恢复：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>（可选）列出当前表空间和数据文件，如以下命令所示：</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt;报告计划;</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">PREVIEW</code>选项运行<code class="codeph">RESTORE DATABASE</code>命令。</span><div>
                              <p>以下命令指定<code class="codeph">SUMMARY</code>以便备份元数据不以详细模式显示（包括样本输出）：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RESTORE DATABASE PREVIEW SUMMARY;在21-MAY-13分配通道开始恢复：ORA_DISK_1通道ORA_DISK_1：SID = 80设备类型= DISK备份列表===============密钥TY LV S设备类型完成时间#Pieces #Copies Compressed Tag -------  -   -   -  ----------- --------------- -------  - ------ ---------- --- 11 BFA DISK 18-MAY-13 1 2 NO TAG20070518T181114 13 BFA DISK 18-MAY-13 1 2 NO TAG20070518T181114使用频道ORA_DISK_1存档日志列表使用db_unique_name PROD的数据库副本============================================ ========================= Key Thrd Seq S Low Time ------- ---- -------  - --------- 47 1 18 A 18-MAY-13名称：/disk1/oracle/dbs/db1r_60ffa882_1_18_0622902157.arc介质恢复启动SCN为586534必须在SCN 587194之外进行恢复才能清除数据文件模糊验证成功备件在5月21日至13日完成恢复</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV556"></a><a id="BRADV89369"></a><div class="props_rev_3"><a id="GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8" name="GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8"></a><h4 id="BRADV-GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8" class="sect4"><span class="enumeration_section">2.9.2</span>恢复整个数据库：快速入门</h4>
                  <div>
                     <p>使用<code class="codeph">RESTORE</code> <code class="codeph">DATABASE</code>和<code class="codeph">RECOVER</code> <code class="codeph">DATABASE</code>命令恢复整个数据库。
                     </p>
                     <div class="section">
                        <p>您必须先前已备份所有需要的文件。此方案假定您可以将所有数据文件还原到其原始位置。如果原始位置不可访问，请使用<code class="codeph">SET NEWNAME</code>命令，如<span class="q">“ <a href="rman-complete-database-recovery.html#GUID-A3DE37A6-3983-4834-858E-A2BCC3804681" title="如果无法将数据文件还原到其默认位置，则必须更新控制文件以反映数据文件的新位置。">关于将数据文件还原到非默认位置</a> ”中所述</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8__GUID-8F67F2DA-07E8-4FC7-92A5-14A1991BA56B">要恢复整个数据库：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>按照<span class="q">“ <a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="To recover the database because a media failure damages database files, then first ensure that you have the necessary backups.">准备还原和恢复数据库文件</a> ”中的</span>说明<span class="q"><a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="要恢复数据库，因为介质故障会损坏数据库文件，请首先确保您具有必要的备份。">准备恢复</a></span> 。</span></li>
                        <li class="stepexpand"><span>将数据库置于已装入状态。</span><div>
                              <p>以下示例终止数据库实例（如果已启动）并装入数据库：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; STARTUP FORCE MOUNT;</pre></div>
                        </li>
                        <li class="stepexpand"><span>恢复数据库。</span><div>
                              <p>以下示例使用预配置的磁盘通道来还原数据库：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RESTORE DATABASE;</pre></div>
                        </li>
                        <li class="stepexpand"><span>恢复数据库，如以下示例所示：</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; RECOVER DATABASE;</pre></div>
                        </li>
                        <li class="stepexpand"><span>打开数据库，如以下示例所示：</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER DATABASE OPEN;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV557"></a><a id="BRADV89370"></a><div class="props_rev_3"><a id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8" name="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8"></a><h4 id="BRADV-GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8" class="sect4"><span class="enumeration_section">2.9.3</span>恢复表空间：快速入门</h4>
                  <div>
                     <p>在数据库打开时，在各个表空间上使用<code class="codeph">RESTORE</code> <code class="codeph">TABLESPACE</code>和<code class="codeph">RECOVER</code> <code class="codeph">TABLESPACE</code>命令。在这种情况下，您必须使需要恢复的表空间脱机，恢复然后恢复表空间，并使恢复的表空间联机。
                     </p>
                     <div class="section">
                        <p>如果无法将数据文件还原到其原始位置，请使用<code class="codeph">RUN</code>块中的RMAN <code class="codeph">SET NEWNAME</code>命令指定新文件名和位置。然后，使用<code class="codeph">SWITCH DATAFILE ALL</code>命令（相当于使用SQL语句<code class="codeph">ALTER DATABASE RENAME FILE</code> ）更新控制文件，以反映在<code class="codeph">RUN</code>命令中已为其发出<code class="codeph">SET NEWNAME</code>所有数据文件的新名称。
                        </p>
                        <p>与用户管理的介质恢复不同，您<span class="italic">不会</span>将联机表空间置于<a href="glossary.html#GUID-BD2A12D3-A995-49B8-AE99-B8DDDF4FE7E7"><span class="xrefglossterm">备份模式</span></a> 。RMAN不需要额外的日志记录或备份模式，因为它知道数据块的格式。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8__GUID-305AECEF-0FFF-4C42-B0C7-E933795994EB">在数据库打开时恢复单个表空间：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>按照<span class="q">“ <a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="To recover the database because a media failure damages database files, then first ensure that you have the necessary backups.">准备还原和恢复数据库文件</a> ”中的</span>说明<span class="q"><a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="要恢复数据库，因为介质故障会损坏数据库文件，请首先确保您具有必要的备份。">准备恢复</a></span> 。</span></li>
                        <li class="stepexpand"><span>使表空间脱机恢复。</span><div>
                              <p>以下示例使<code class="codeph">USERS</code>表空间脱机：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER TABLESPACE用户脱机;</pre></div>
                        </li>
                        <li class="stepexpand"><span>还原并恢复表空间。</span><div>
                              <p>您在RMAN提示符下执行的以下<code class="codeph">RUN</code>命令在<code class="codeph">USERS</code>表空间中为数据文件设置新名称：</p><pre class="oac_no_warn" dir="ltr">运行{SET NEW DATA FOR DATAFILE'/disk1/oradata/prod/users01.dbf'TO'/disk2/users01.dbf'; RESTORE TABLESPACE用户; SWITCH DATAFILE ALL; ＃更新控制文件，使用新文件名RECOVER TABLESPACE用户; }</pre></div>
                        </li>
                        <li class="stepexpand"><span>使表空间联机，如以下示例所示：</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER TABLESPACE用户在线;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>您还可以使用<code class="codeph">RESTORE DATAFILE</code>和<code class="codeph">RECOVER DATAFILE</code>在数据文件级别进行恢复。
                        </p>
                        <div class="infoboxnotealso" id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8__GUID-0C9261C3-70BF-4D9B-A4E3-6A1053132540">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="rman-complete-database-recovery.html#GUID-4EBD9D56-9700-45A1-B233-1F5506A04532" title="使用带有TABLESPACE选项的RESTORE和RECOVER命令可以执行表空间的完全恢复">执行表空间的完全恢复</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="rman-backup-concepts.html#GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C" title="您可以创建RMAN备份或用户管理的备份。">关于在线备份和备份模式</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV558"></a><a id="BRADV89371"></a><div class="props_rev_3"><a id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E" name="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E"></a><h4 id="BRADV-GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E" class="sect4"><span class="enumeration_section">2.9.4</span>恢复单个数据块：快速入门</h4>
                  <div>
                     <p>RMAN可以恢复单个损坏的数据文件块。</p>
                     <div class="section">
                        <p>当RMAN对文件执行完整的扫描以进行备份时， <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>中列出了任何损坏的块。通常在警报日志，跟踪文件或SQL查询结果中报告损坏。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E__GUID-EED29271-8F04-4A0F-A066-FFF76A152F5B">要恢复数据块：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>如果您没有此信息，请获取损坏块的块编号。</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; SELECT NAME，VALUE FROM V $ DIAG_INFO;</pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">RECOVER</code>命令以修复块。</span><div>
                              <p>以下RMAN命令恢复所有损坏的块：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;恢复腐败清单;</pre><p>您还可以恢复单个块，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;恢复数据文件1块233,235数据文件2块100到200;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E__GUID-641C5748-E11B-4796-9E60-902DCE0C2551">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="rman-block-media-recovery.html#GUID-1E226393-17D0-4AB0-A05D-91210255D8FF" title="阻止介质恢复恢复通过恢复损坏的数据块提供较低的平均恢复时间（MTTR）。使用块介质恢复来恢复数据文件中的一个或多个损坏的数据块。通常，数据库将块标记为介质损坏，然后在首次遇到损坏时将其写入磁盘。在块恢复之前，块的后续读取不会成功。您只能对标记为损坏或未通过损坏检查的块执行块恢复。阻止恢复行为取决于是在主数据库还是物理备用数据库上发现数据块损坏。V $ DATABASE_BLOCK_CORRUPTION视图显示由数据库组件（如RMAN，ANALYZE和SQL查询）标记为已损坏的块。阻止介质恢复仅需要对要恢复的块进行不间断的重做更改。这与数据文件恢复不同，它需要从恢复开始到结束时不间断的一系列重做更改。在使用RECOVER执行块介质恢复之前，必须满足某些先决条件...BLOCK命令。使用RECOVER ......BLOCK命令用于恢复数据文件中的各个损坏块。您确定需要恢复的块，然后使用任何可用的备份来还原和恢复这些块。您可以使用Data Recovery Advisor诊断和修复数据块损坏导致的故障。在此示例中，VALIDATE DATABASE命令时发现了损坏的数据块。RMAN可以自动恢复V $ DATABASE_BLOCK_CORRUPTION视图中列出的所有块。">执行块介质恢复</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
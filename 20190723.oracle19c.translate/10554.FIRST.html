<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>第一</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="FEATURE_VALUE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="FIRST_VALUE.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="FEATURE_VALUE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="FIRST_VALUE.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">第一</li>
            </ol>
            <a id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238" name="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238"></a><a id="SQLRF51409"></a><a id="SQLRF51410"></a><a id="SQLRF51411"></a><a id="SQLRF51412"></a><a id="SQLRF51413"></a><a id="SQLRF00641"></a>
            
            <h2 id="SQLRF-GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238" class="sect2">第一</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-099A0B3E-C784-410E-928C-B0F53220A30D">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-92B30FC2-570B-40A3-9E9D-0FA8B1445347"><span class="italic">first</span> :: =</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-B0D2E944-ACD9-41F6-B14B-9D5FBC6480B1"><img src="img/first.gif" alt="first.eps的描述如下" title="first.eps的描述如下" longdesc="img_text/first.html"><br><a href="img_text/first.html">说明first.eps的说明</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-53809919-2C0A-467C-BF06-B165226E2CE1">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="Analytic-Functions.html#GUID-527832F7-63C0-4445-8C16-307FA5084056">分析函数</a> ”，</span>用于获取有关<code class="codeph">ORDER</code> <code class="codeph">BY</code>子句和<code class="codeph">OVER</code>子句的语法，语义和限制的信息</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-00878B10-B9A1-41B8-8D85-4692D8A60EF6">目的</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><code class="codeph">FIRST</code>和<code class="codeph">LAST</code>是非常相似的功能。两者都是聚合和分析函数，它们对一组行中的一组值进行操作，这些行根据给定的排序规范排名为<code class="codeph">FIRST</code>或<code class="codeph">LAST</code> 。如果只有一行排名为<code class="codeph">FIRST</code>或<code class="codeph">LAST</code> ，则聚合只对一个元素进行操作。
                  </p>
                  <p>如果省略<code class="codeph">OVER</code>子句，则<code class="codeph">FIRST</code>和<code class="codeph">LAST</code>函数将被视为聚合函数。您可以通过指定<code class="codeph">OVER</code>子句将这些函数用作分析函数。<span class="italic"><code class="codeph">query_partition_clause</code></span>是<code class="codeph">OVER</code>子句中唯一对这些函数有效的部分。如果包含<code class="codeph">OVER</code>子句但省略<span class="italic"><code class="codeph">query_partition_clause</code></span> ，则该函数将被视为分析函数，但为分析定义的窗口是整个表。
                  </p>
                  <p>这些函数将任何数值数据类型或任何可以隐式转换为数字数据类型的非数字数据类型作为参数。该函数返回与参数的数值数据类型相同的数据类型。</p>
                  <p>当您需要来自排序组的第一行或最后一行的值，但所需的值不是排序键时， <code class="codeph">FIRST</code>和<code class="codeph">LAST</code>函数消除了对自联接或视图的需要，并实现了更好的性能。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="italic"><code class="codeph">aggregate_function</code></span>参数是<code class="codeph">MIN</code> ， <code class="codeph">MAX</code> ， <code class="codeph">SUM</code> ， <code class="codeph">AVG</code> ， <code class="codeph">COUNT</code> ， <code class="codeph">VARIANCE</code>或<code class="codeph">STDDEV</code>函数中的任何一个。它对来自<code class="codeph">FIRST</code>或<code class="codeph">LAST</code>排名的行的值进行操作。如果只有一行排名为<code class="codeph">FIRST</code>或<code class="codeph">LAST</code> ，则聚合操作单独（非聚合）集。
                        </p>
                     </li>
                     <li>
                        <p><a id="d122081e262" class="indexterm-anchor"></a><a id="d122081e266" class="indexterm-anchor"></a> <code class="codeph">KEEP</code>关键字用于语义清晰度。它限定了<span class="italic"><code class="codeph">aggregate_function</code></span> ，表示只返回<span class="italic"><code class="codeph">aggregate_function</code></span>的<code class="codeph">FIRST</code>或<code class="codeph">LAST</code>值。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DENSE_RANK</code> <code class="codeph">FIRST</code>或<code class="codeph">DENSE_RANK</code> <code class="codeph">LAST</code>表示Oracle数据库将仅聚合具有最小（ <code class="codeph">FIRST</code> ）或最大（ <code class="codeph">LAST</code> ）密集等级（也称为奥林匹克等级）的行。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-0E866C8F-7D7E-4DA7-9C99-33C9A3E36579">
                     <p class="notep1">也可以看看：</p>
                     <p>有关隐式转换和<a href="LAST.html#GUID-4E16BC0E-D3B8-4BA4-8F97-3A08891A85CC">LAST的</a>更多信息，请<a href="Data-Type-Comparison-Rules.html#GUID-98BE3A78-6E33-4181-B5CB-D96FD9DC1694__G195937" title="此矩阵列出了每个后续列的第一列和标题单元格中的数据类型。单元格中的X表示在该列的标题和该行的第1列中指定的数据类型的隐式转换。">参见表2-8</a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-2122F426-1F94-4851-98D1-E1D876C63B6F">聚合示例</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>以下示例在示例表<code class="codeph">hr.employees</code>每个部门中返回佣金最低的员工中的最低工资和最高佣金的员工中的最高工资：</p><pre class="oac_no_warn" dir="ltr">SELECT department_id，MIN（薪水）KEEP（DENSE_RANK FIRST ORDER BY commission_pct）“Worst”，MAX（薪水）KEEP（DENSE_RANK最后订单佣金_pct）“最佳”来自员工GROUP BY department_id ORDER BY department_id; DEPARTMENT_ID最差-------------- ---------- ---------- 10 4400 4400 20 6000 13000 30 2500 11000 40 6500 6500 50 2100 8200 60 4200 9000 70 10000 10000 80 6100 14000 90 17000 24000 100 6900 12008 110 8300 12008 7000 7000</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-454F3649-A5DD-4EBC-9104-D7E65E7FE247">分析实例</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>下一个示例与前一个示例进行相同的计算，但返回部门内每个员工的结果：</p><pre class="oac_no_warn" dir="ltr">SELECT last_name，department_id，salary，MIN（salary）KEEP（DENSE_RANK FIRST ORDER BY commission_pct）OVER（PARTITION BY department_id）“Worst”，MAX（薪水）KEEP（DENSE_RANK最后订单佣金_pct）OVER（PARTITION BY department_id）“Best” FROM employees ORDER BY department_id，salary，last_name; LAST_NAME DEPARTMENT_ID SALARY最差------------------- ------------- ---------- --- ------- ---------- Whalen 10 4400 4400 4400 Fay 20 6000 6000 13000 Hartstein 20 13000 6000 13000。 。 。Gietz 110 8300 8300 12008 Higgins 110 12008 8300 12008 Grant 7000 7000 7000</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
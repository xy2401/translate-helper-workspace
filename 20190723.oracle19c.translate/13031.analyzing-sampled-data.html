<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>分析采样数据</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Performance Tuning Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Performance Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-performance-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-12T22:26:14-07:00"></meta>
      <meta name="dcterms.title" content="Database Performance Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96347-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="comparing-database-performance-over-time.html" title="Previous" type="text/html"></link>
      <link rel="next" href="instance-tuning-using-performance-views.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGDBA"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="comparing-database-performance-over-time.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="instance-tuning-using-performance-views.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库性能调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-II-diagnosing-and-tuning-database-performance.html" property="item" typeof="WebPage"><span property="name">诊断和调整数据库性能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">分析采样数据</li>
            </ol>
            <a id="GUID-E40F4358-E73D-45CB-B271-E7C3C65FA220" name="GUID-E40F4358-E73D-45CB-B271-E7C3C65FA220"></a><a id="TGDBA276"></a>
            
            <h2 id="TGDBA-GUID-E40F4358-E73D-45CB-B271-E7C3C65FA220" class="sect2"><span class="enumeration_chapter">9</span>分析采样数据</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何使用采样数据识别Oracle数据库中的瞬态性能问题，并包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="analyzing-sampled-data.html#GUID-D6360982-465F-49B3-8021-8CCD0E3E3D3E">关于活动会话历史记录</a></p>
                  </li>
                  <li>
                     <p><a href="analyzing-sampled-data.html#GUID-A40B1029-D042-41B6-B596-C77BDCEC722B">生成活动会话历史报告</a></p>
                  </li>
                  <li>
                     <p><a href="analyzing-sampled-data.html#GUID-36ABAF67-227B-4CCA-9B44-F3A87244E7A3">解释活动会话历史报告的结果</a></p>
                  </li>
               </ul>
            </div><a id="TGDBA277"></a><div class="props_rev_3"><a id="GUID-D6360982-465F-49B3-8021-8CCD0E3E3D3E" name="GUID-D6360982-465F-49B3-8021-8CCD0E3E3D3E"></a><h3 id="TGDBA-GUID-D6360982-465F-49B3-8021-8CCD0E3E3D3E" class="sect3"><span class="enumeration_section">9.1</span>关于活动会话历史记录</h3>
               <div>
                  <p>活动会话历史记录（ASH）是一种诊断工具，用于记录有关Oracle数据库中所有活动会话的信息。</p>
                  <p>自动数据库诊断监视器（ADDM）分析可能不会显示瞬态性能问题，因为它们是短暂的。ASH诊断工具通过每秒采样活动会话并将采样数据存储在共享全局区域（SGA）中的循环缓冲区中来捕获瞬态性能问题。连接到数据库并等待不属于Idle等待类的事件的任何会话都被视为活动会话。通过仅捕获活动会话，表示一组可管理的数据，其大小与正在执行的工作直接相关，而不是系统上允许的会话数。</p>
                  <p>通过ASH，您可以使用<code class="codeph">V$ACTIVE_SESSION_HISTORY</code>视图检查并对采样的会话活动执行详细分析。ASH中存在的数据可以在指定的持续时间内捕获的各种维度汇总并收集到ASH报告中。
                  </p>
                  <div class="infoboxnote" id="GUID-D6360982-465F-49B3-8021-8CCD0E3E3D3E__GUID-BE46714C-B9C5-4EEE-9335-BFC959A5FC6F">
                     <p class="notep1">注意：</p>
                     <p>ADDM尝试报告分析期间最重要的性能问题，即它们对数据库时间的影响。ADDM是否捕获性能问题取决于其与AWR快照之间的间隔相比的持续时间。</p>
                     <p>如果性能问题在快照之间持续很长一段时间，则ADDM将捕获该问题。例如，如果将快照间隔设置为一小时，则不应将持续30分钟的性能问题视为瞬态性能问题，因为其持续时间占快照间隔的很大一部分，并且可能会被ADDM捕获。</p>
                     <p>如果特定问题持续的时间非常短，那么其严重性可能会被分析期间的其他性能问题平均或最小化，并且该问题可能不会出现在ADDM结果中。使用快照间隔设置为一小时的相同示例，持续时间仅为2分钟的性能问题可能是暂时性能问题，因为其持续时间仅占快照间隔的一小部分，并且可能不会显示在ADDM结果中。</p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-D6360982-465F-49B3-8021-8CCD0E3E3D3E__GUID-FA0553AF-D680-4456-AB86-20AF0A5F7D48">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关ASH的信息的<span class="q">“ <a href="measuring-database-performance.html#GUID-270E36D0-D7D7-4235-8280-CA3EDD68F8E6">活动会话历史统计</a> ”</span></p>
                        </li>
                        <li>
                           <p>有关可管理性功能（如ASH）如何在多租户容器数据库中工作的信息，请参阅<a href="../multi/administering-a-cdb-with-sql-plus.html#MULTI-GUID-DF42C0D3-8968-4810-9327-9D176337D356" target="_blank"><span class="italic">“Oracle多租户管理员指南”</span></a> 。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="TGDBA278"></a><div class="props_rev_3"><a id="GUID-A40B1029-D042-41B6-B596-C77BDCEC722B" name="GUID-A40B1029-D042-41B6-B596-C77BDCEC722B"></a><h3 id="TGDBA-GUID-A40B1029-D042-41B6-B596-C77BDCEC722B" class="sect3"><span class="enumeration_section">9.2</span>生成活动会话历史报告</h3>
               <div>
                  <p>ASH报道<a id="d23879e207" class="indexterm-anchor"></a>使您能够执行以下分析：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>瞬态性能问题，通常持续几分钟</p>
                     </li>
                     <li>
                        <p>通过各种维度或其组合进行范围或目标性能分析，例如时间，会话，模块，操作或SQL标识符</p>
                     </li>
                  </ul>
                  <p>ASH报告分为多个部分。HTML报告包含可用于在各部分之间快速导航的链接。报告的内容包含用于标识阻止程序和服务器标识的ASH信息，其关联的事务标识符以及指定持续时间的SQL语句。</p>
                  <p>本节介绍如何生成ASH报告，并包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="analyzing-sampled-data.html#GUID-79A4D6D7-2CE3-402B-8167-4FF0B1A0301C">用于生成ASH报告的用户界面</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-sampled-data.html#GUID-04DEE928-D1F7-43E8-A74E-F8C8B9CB046B">使用命令行界面生成ASH报告</a></p>
                     </li>
                  </ul>
               </div><a id="TGDBA279"></a><div class="props_rev_3"><a id="GUID-79A4D6D7-2CE3-402B-8167-4FF0B1A0301C" name="GUID-79A4D6D7-2CE3-402B-8167-4FF0B1A0301C"></a><h4 id="TGDBA-GUID-79A4D6D7-2CE3-402B-8167-4FF0B1A0301C" class="sect4"><span class="enumeration_section">9.2.1</span>生成ASH报告的用户界面</h4>
                  <div>
                     <p>用于生成ASH报告的主要界面是Oracle企业管理器云控制（云控制）。尽可能使用Cloud Control生成ASH报告。</p>
                     <p>如果Cloud Control不可用，则通过运行SQL脚本生成ASH报告。运行这些脚本需要DBA角色。</p>
                     <div class="infoboxnotealso" id="GUID-79A4D6D7-2CE3-402B-8167-4FF0B1A0301C__GUID-DCD2D6A7-B0AE-4887-AD1A-FB6D0E0B53A1">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用Cloud Control生成ASH报告的信息，请参阅<a href="../tdppt/resolving-transient-performance-problems.html#TDPPT066" target="_blank"><span class="italic">“Oracle数据库2天+性能调整指南”</span></a></p>
                     </div>
                  </div>
               </div><a id="TGDBA285"></a><div class="props_rev_3"><a id="GUID-04DEE928-D1F7-43E8-A74E-F8C8B9CB046B" name="GUID-04DEE928-D1F7-43E8-A74E-F8C8B9CB046B"></a><h4 id="TGDBA-GUID-04DEE928-D1F7-43E8-A74E-F8C8B9CB046B" class="sect4"><span class="enumeration_section">9.2.2</span>使用命令行界面生成ASH报告</h4>
                  <div>
                     <p>本节介绍如何通过在命令行界面中运行SQL脚本来生成ASH报告。</p>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-0FE5CD10-A9FE-4685-80DE-1AB73371AFC4">生成本地数据库实例的ASH报告</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-190E5E5C-26EF-4430-9F64-7AA4D9149DAA">生成特定数据库实例的ASH报告</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-1B25EB93-A9FE-4B61-9561-9BD932455D8D">为Oracle RAC生成ASH报告</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA286"></a><div class="props_rev_3"><a id="GUID-0FE5CD10-A9FE-4685-80DE-1AB73371AFC4" name="GUID-0FE5CD10-A9FE-4685-80DE-1AB73371AFC4"></a><h5 id="TGDBA-GUID-0FE5CD10-A9FE-4685-80DE-1AB73371AFC4" class="sect5"><span class="enumeration_section">9.2.2.1</span>在本地数据库实例上生成ASH报告</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">ashrpt.sql</code> SQL脚本生成HTML或文本报告，该报告在本地数据库实例上显示指定持续时间的ASH信息。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-0FE5CD10-A9FE-4685-80DE-1AB73371AFC4__GUID-878019A3-12C5-48C0-A16F-5248E515D2F1">要使用命令行界面在本地数据库实例上生成ASH报告，请执行以下操作：</p>
                           <ol>
                              <li>
                                 <p>在SQL提示符下，输入：</p><pre class="oac_no_warn" dir="ltr">@ $ ORACLE_HOME / RDBMS /管理/ ashrpt.sql</pre></li>
                              <li>
                                 <p>指定您是要HTML还是文本报告：</p><pre class="oac_no_warn" dir="ltr">输入report_type：text的值</pre><p>在此示例中，选择了文本报告。</p>
                              </li>
                              <li>
                                 <p>指定系统日期之前的开始时间（以分钟为单位）：</p><pre class="oac_no_warn" dir="ltr">输入begin_time的值：-10</pre><p>在此示例中，选择当前时间前10分钟。</p>
                              </li>
                              <li>
                                 <p>指定从开始时间开始以分钟为单位捕获ASH信息的持续时间。</p><pre class="oac_no_warn" dir="ltr">输入持续时间的值：</pre><p>在此示例中，接受系统日期减去开始时间的默认持续时间。</p>
                              </li>
                              <li>
                                 <p>输入报告名称，或接受默认报告名称：</p><pre class="oac_no_warn" dir="ltr">输入report_name的值：使用报告名称ashrpt_1_0310_0131.txt</pre><p>在此示例中，接受默认名称，并生成名为<code class="codeph">ashrpt_1_0310_0131</code>的ASH报告。该报告将从当前时间前10分钟开始收集ASH信息，并在当前时间结束。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA287"></a><div class="props_rev_3"><a id="GUID-190E5E5C-26EF-4430-9F64-7AA4D9149DAA" name="GUID-190E5E5C-26EF-4430-9F64-7AA4D9149DAA"></a><h5 id="TGDBA-GUID-190E5E5C-26EF-4430-9F64-7AA4D9149DAA" class="sect5"><span class="enumeration_section">9.2.2.2</span>生成特定数据库实例的ASH报告</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">ashrpti.sql</code> SQL脚本生成HTML或文本报告，该报告在指定的数据库和实例上显示指定持续时间的ASH信息。此脚本使您可以指定将为其生成ASH报告的数据库和实例。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-190E5E5C-26EF-4430-9F64-7AA4D9149DAA__GUID-E49F2657-0992-4E2E-BD07-D769B324AD02">使用命令行界面生成特定数据库实例的ASH报告：</p>
                           <ol>
                              <li>
                                 <p>在SQL提示符下，输入：</p><pre class="oac_no_warn" dir="ltr">@ $ ORACLE_HOME / RDBMS /管理/ ashrpti.sql</pre></li>
                              <li>
                                 <p>指定您是要HTML还是文本报告：</p><pre class="oac_no_warn" dir="ltr">输入report_type的值：html</pre><p>在此示例中，选择了HTML报告。</p>
                                 <p>显示可用数据库ID和实例编号的列表：</p><pre class="oac_no_warn" dir="ltr">这个Workload Repository模式中的实例~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ DB Id Inst Num数据库名称实例主机----------- -------- ------------ ----------- -  ------------ 3309173529 1 MAIN main examp1690 3309173529 1 TINT251 tint251 samp251</pre></li>
                              <li>
                                 <p>输入数据库标识符（ <code class="codeph">dbid)</code>和实例编号（ <code class="codeph">inst_num)</code> ：</p><pre class="oac_no_warn" dir="ltr">输入dbid的值：3309173529使用3309173529获取数据库ID输入inst_num的值：1</pre></li>
                              <li>
                                 <p>要在物理备用实例上生成ASH报告，必须以只读方式打开备用数据库。磁盘上的ASH数据表示主数据库上的活动，内存中的ASH数据表示备用数据库上的活动。</p>
                                 <div class="infoboxnote" id="GUID-190E5E5C-26EF-4430-9F64-7AA4D9149DAA__GUID-7429293C-54BF-4C10-8611-DC6E960732BE">
                                    <p class="notep1">注意：</p>
                                    <p>仅当您在Active Data Guard物理备用实例上生成ASH报告时，此步骤才适用。如果不是这种情况，请跳过此步骤。</p>
                                 </div>
                                 <p>指定是否使用从主数据库或备用数据库中采样的数据生成报告：</p><pre class="oac_no_warn" dir="ltr">您正在备用数据库上运行ASH报告。要通过主数据库上采样的数据生成报告，请输入“P”。默认为“S” - 在备用数据库中采样的数据。输入stdbyflag的值：使用Primary（P）或Standby（S）：S</pre><p>在此示例中，选择了待机（S）的默认值。</p>
                              </li>
                              <li>
                                 <p>指定系统日期之前的开始时间（以分钟为单位）：</p><pre class="oac_no_warn" dir="ltr">输入begin_time的值：-10</pre><p>在此示例中，选择当前时间前10分钟。</p>
                              </li>
                              <li>
                                 <p>指定从开始时间开始以分钟为单位捕获ASH信息的持续时间。</p><pre class="oac_no_warn" dir="ltr">输入持续时间的值：</pre><p>在此示例中，接受系统日期减去开始时间的默认持续时间。</p>
                              </li>
                              <li>
                                 <p>指定将在报告的“随时间变化的活动”部分中使用的插槽宽度（以秒为单位）：</p><pre class="oac_no_warn" dir="ltr">输入slot_width的值：</pre><p>在此示例中，接受默认值。有关“随时间变化的活动”部分以及如何指定插槽宽度的详细信息，请参阅<span class="q">“ <a href="analyzing-sampled-data.html#GUID-20686B81-8E05-4CE6-88D4-C92D18E83B77">随时间变化的活动</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>按照后续提示中的说明操作，并输入以下报告目标的值：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">target_session_id</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_sql_id</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_wait_class</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_service_hash</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_module_name</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_action_name</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_client_id</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_plsql_entry</code></p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>输入报告名称，或接受默认报告名称：</p><pre class="oac_no_warn" dir="ltr">输入report_name的值：使用报告名称ashrpt_1_0310_0131.txt</pre><p>在此示例中，接受默认名称，并生成名为<code class="codeph">ashrpt_1_0310_0131</code>的ASH报告。该报告将收集数据库实例上的ASH信息，数据库ID值为<code class="codeph">3309173529</code>从当前时间之前的10分钟开始到当前时间结束。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA288"></a><div class="props_rev_3"><a id="GUID-1B25EB93-A9FE-4B61-9561-9BD932455D8D" name="GUID-1B25EB93-A9FE-4B61-9561-9BD932455D8D"></a><h5 id="TGDBA-GUID-1B25EB93-A9FE-4B61-9561-9BD932455D8D" class="sect5"><span class="enumeration_section">9.2.2.3</span>为Oracle RAC生成ASH报告</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">ashrpti.sql</code> SQL脚本生成HTML或文本报告，该报告显示Oracle Real Application Clusters（Oracle RAC）环境中指定数据库和实例的指定持续时间的ASH信息。只有写入磁盘的ASH数据才会用于生成报告。此报告仅使用<code class="codeph">DBA_HIST_ACTIVE_SESS_HISTORY</code>表中最近10分钟的ASH样本。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-1B25EB93-A9FE-4B61-9561-9BD932455D8D__GUID-6184F552-6FB3-4623-8AB0-533873D88BB2">要为Oracle RAC生成ASH报告，请执行以下操作：</p>
                           <ol>
                              <li>
                                 <p>在SQL提示符下，输入：</p><pre class="oac_no_warn" dir="ltr">@ $ ORACLE_HOME / RDBMS /管理/ ashrpti.sql</pre></li>
                              <li>
                                 <p>指定您是要HTML还是文本报告：</p><pre class="oac_no_warn" dir="ltr">输入report_type的值：html</pre><p>在此示例中，选择了HTML报告。</p>
                                 <p>显示可用数据库ID和实例编号的列表：</p><pre class="oac_no_warn" dir="ltr">这个Workload Repository模式中的实例~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ DB Id Inst Num数据库名称实例主机----------- -------- ------------ ----------- -  ------------ 3309173529 1 MAIN主要示例1690 3309173529 1 TINT251 tint251 samp251 3309173529 2 TINT251 tint252 samp252 3309173529 3 TINT251 tint253 samp253 3309173529 4 TINT251 tint254 samp254</pre></li>
                              <li>
                                 <p>输入数据库标识符（ <code class="codeph">dbid)</code>和实例编号（ <code class="codeph">inst_num)</code> ：</p><pre class="oac_no_warn" dir="ltr">输入dbid的值：3309173529使用数据库ID：3309173529输入实例编号。为Oracle RAC集群中的所有实例输入“ALL”或显式指定实例列表（例如，1,2,3）。默认为当前实例。输入inst_num的值：ALL使用实例编号：ALL</pre></li>
                              <li>
                                 <p>指定系统日期之前的开始时间（以分钟为单位）：</p><pre class="oac_no_warn" dir="ltr">输入begin_time的值：-1：10</pre><p>在此示例中，选择当前时间之前1小时10分钟。</p>
                              </li>
                              <li>
                                 <p>指定从开始时间开始以分钟为单位捕获ASH信息的持续时间。</p><pre class="oac_no_warn" dir="ltr">输入持续时间的值：10</pre><p>在此示例中，持续时间设置为10分钟。</p>
                              </li>
                              <li>
                                 <p>指定将在报告的“随时间变化的活动”部分中使用的插槽宽度（以秒为单位）：</p><pre class="oac_no_warn" dir="ltr">输入slot_width的值：</pre><p>在此示例中，接受默认值。有关“随时间变化的活动”部分以及如何指定插槽宽度的详细信息，请参阅<span class="q">“ <a href="analyzing-sampled-data.html#GUID-20686B81-8E05-4CE6-88D4-C92D18E83B77">随时间变化的活动</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>按照后续提示中的说明操作，并输入以下报告目标的值：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">target_session_id</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_sql_id</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_wait_class</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_service_hash</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_module_name</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_action_name</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_client_id</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">target_plsql_entry</code></p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>输入报告名称，或接受默认报告名称：</p><pre class="oac_no_warn" dir="ltr">输入report_name的值：使用报告名称ashrpt_rac_0310_0131.txt</pre><p>在此示例中，接受默认名称，并生成名为<code class="codeph">ashrpt_rac_0310_0131</code>的ASH报告。该报告将收集属于数据库的所有实例的ASH信息，数据库ID值为<code class="codeph">3309173529</code>从当前时间前1小时10分钟开始，到当前时间前1小时结束。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="TGDBA289"></a><div class="props_rev_3"><a id="GUID-36ABAF67-227B-4CCA-9B44-F3A87244E7A3" name="GUID-36ABAF67-227B-4CCA-9B44-F3A87244E7A3"></a><h3 id="TGDBA-GUID-36ABAF67-227B-4CCA-9B44-F3A87244E7A3" class="sect3"><span class="enumeration_section">9.3</span>解释活动会话历史报告的结果</h3>
               <div>
                  <p>生成ASH报告后<a id="d23879e848" class="indexterm-anchor"></a> ，检查其内容，以找出瞬态性能问题的可能原因。
                  </p>
                  <p>ASH报告的内容分为以下几个部分：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="analyzing-sampled-data.html#GUID-FC71787F-B822-45CA-8B71-EB4C2A976F07">热门活动</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-sampled-data.html#GUID-64945827-196A-4428-A1FC-060174F6B51B">加载配置文件</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-sampled-data.html#GUID-DA3D283C-BA54-4DFA-B6D4-9B38B8BABEFA">热门SQL</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-sampled-data.html#GUID-021E910A-C44F-4327-AEA2-AE9574E84C5A">顶级PL / SQL</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-sampled-data.html#GUID-55145C76-5D4E-443A-A67E-902766E55D56">热门Java</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-sampled-data.html#GUID-758732B8-737D-4674-BE3B-F76002102A72">热门会议</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-sampled-data.html#GUID-571B9C83-BD68-4174-8029-E98B0A6B9F3F">顶级对象/文件/锁存器</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-sampled-data.html#GUID-20686B81-8E05-4CE6-88D4-C92D18E83B77">随时间变化的活动</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-36ABAF67-227B-4CCA-9B44-F3A87244E7A3__GUID-7BC89253-C7AC-4E71-A6BD-8A2517074529">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../racad/monitoring-performance.html#RACAD987" target="_blank"><span class="italic">“Oracle Real Application Clusters管理和部署指南”，</span></a>以获取有关ASM报告中特定于Oracle Real Application Clusters（Oracle RAC）的部分的信息</p>
                  </div>
               </div><a id="TGDBA95245"></a><div class="props_rev_3"><a id="GUID-FC71787F-B822-45CA-8B71-EB4C2A976F07" name="GUID-FC71787F-B822-45CA-8B71-EB4C2A976F07"></a><h4 id="TGDBA-GUID-FC71787F-B822-45CA-8B71-EB4C2A976F07" class="sect4"><span class="enumeration_section">9.3.1</span>热门事件</h4>
                  <div>
                     <p>热门活动部分<a id="d23879e956" class="indexterm-anchor"></a>描述按用户，背景和优先级分类的采样会话活动的最高等待事件。使用本节中的信息来确定可能导致瞬态性能问题的等待事件。
                     </p>
                     <p>Top Events部分包含以下小节：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-2BB7DD6F-D1FE-48D1-979B-512BC443B5B9">热门用户活动</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-7D6DC8EB-0F9C-442F-B20C-4D95AF9F13B7">热门背景活动</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-C4C8C6FB-CB5E-4AAE-9B5A-5465EC39C55F">顶级赛事P1 / P2 / P3</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA95246"></a><div class="props_rev_3"><a id="GUID-2BB7DD6F-D1FE-48D1-979B-512BC443B5B9" name="GUID-2BB7DD6F-D1FE-48D1-979B-512BC443B5B9"></a><h5 id="TGDBA-GUID-2BB7DD6F-D1FE-48D1-979B-512BC443B5B9" class="sect5"><span class="enumeration_section">9.3.1.1</span>热门用户事件</h5>
                     <div>
                        <p>“最常用户事件”子部分列出了来自用户进程的最高等待事件，这些事件占采样会话活动的最高百分比。</p>
                     </div>
                  </div><a id="TGDBA95247"></a><div class="props_rev_3"><a id="GUID-7D6DC8EB-0F9C-442F-B20C-4D95AF9F13B7" name="GUID-7D6DC8EB-0F9C-442F-B20C-4D95AF9F13B7"></a><h5 id="TGDBA-GUID-7D6DC8EB-0F9C-442F-B20C-4D95AF9F13B7" class="sect5"><span class="enumeration_section">9.3.1.2</span>顶级背景事件</h5>
                     <div>
                        <p>“顶部背景事件”子部分列出了背景中的顶级等待事件，这些事件占采样会话活动的最高百分比。</p>
                     </div>
                  </div><a id="TGDBA95248"></a><div class="props_rev_3"><a id="GUID-C4C8C6FB-CB5E-4AAE-9B5A-5465EC39C55F" name="GUID-C4C8C6FB-CB5E-4AAE-9B5A-5465EC39C55F"></a><h5 id="TGDBA-GUID-C4C8C6FB-CB5E-4AAE-9B5A-5465EC39C55F" class="sect5"><span class="enumeration_section">9.3.1.3</span>顶级赛事P1 / P2 / P3</h5>
                     <div>
                        <p>顶部事件P1 / P2 / P3子部分列出了最高等待事件的等待事件参数值，它们占采样会话活动的最高百分比，按总等待时间的百分比（ <span>％事件</span> ）排序。对于每个等待事件， <span>P1值，P2值，P3值</span>列中的<span>值</span>对应于<span>参数1</span> ， <span>参数2</span>和<span>参数3</span>列中显示的等待事件参数。
                        </p>
                     </div>
                  </div>
               </div><a id="TGDBA95249"></a><div class="props_rev_3"><a id="GUID-64945827-196A-4428-A1FC-060174F6B51B" name="GUID-64945827-196A-4428-A1FC-060174F6B51B"></a><h4 id="TGDBA-GUID-64945827-196A-4428-A1FC-060174F6B51B" class="sect4"><span class="enumeration_section">9.3.2</span>负载配置文件</h4>
                  <div>
                     <p>加载配置文件部分<a id="d23879e1201" class="indexterm-anchor"></a>描述了采样会话活动中分析的负载。使用本节中的信息来标识可能导致瞬态性能问题的服务，客户端或SQL命令类型。
                     </p>
                     <p>“加载配置文件”部分包含以下子部分：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-B8923091-3F16-4E98-8D03-A5B93B32D12D">顶级服务/模块</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-C79DA54C-DC62-4910-8792-5C921A06296E">顶级客户ID</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-6EDB7E11-793D-434C-B32C-1DD206A1C020">热门SQL命令类型</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-B91769DE-FBAF-4F88-9202-F392DB6FC7B5">最高阶段的执行</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA95250"></a><div class="props_rev_3"><a id="GUID-B8923091-3F16-4E98-8D03-A5B93B32D12D" name="GUID-B8923091-3F16-4E98-8D03-A5B93B32D12D"></a><h5 id="TGDBA-GUID-B8923091-3F16-4E98-8D03-A5B93B32D12D" class="sect5"><span class="enumeration_section">9.3.2.1</span>顶级服务/模块</h5>
                     <div>
                        <p>顶级服务/模块子部分列出了占采样会话活动最高百分比的服务和模块。</p>
                     </div>
                  </div><a id="TGDBA95251"></a><div class="props_rev_3"><a id="GUID-C79DA54C-DC62-4910-8792-5C921A06296E" name="GUID-C79DA54C-DC62-4910-8792-5C921A06296E"></a><h5 id="TGDBA-GUID-C79DA54C-DC62-4910-8792-5C921A06296E" class="sect5"><span class="enumeration_section">9.3.2.2</span>顶级客户端ID</h5>
                     <div>
                        <p>“顶级客户端ID”子部分根据客户端ID列出了占据采样会话活动百分比最高的客户端，客户端ID是数据库会话的特定于应用程序的标识符。</p>
                     </div>
                  </div><a id="TGDBA95252"></a><div class="props_rev_3"><a id="GUID-6EDB7E11-793D-434C-B32C-1DD206A1C020" name="GUID-6EDB7E11-793D-434C-B32C-1DD206A1C020"></a><h5 id="TGDBA-GUID-6EDB7E11-793D-434C-B32C-1DD206A1C020" class="sect5"><span class="enumeration_section">9.3.2.3</span>热门SQL命令类型</h5>
                     <div>
                        <p>Top SQL Command Types子节列出了SQL命令类型 - 例如<code class="codeph">SELECT</code>或<code class="codeph">UPDATE</code>命令 - 它们占采样会话活动的最高百分比。
                        </p>
                     </div>
                  </div><a id="TGDBA95253"></a><div class="props_rev_3"><a id="GUID-B91769DE-FBAF-4F88-9202-F392DB6FC7B5" name="GUID-B91769DE-FBAF-4F88-9202-F392DB6FC7B5"></a><h5 id="TGDBA-GUID-B91769DE-FBAF-4F88-9202-F392DB6FC7B5" class="sect5"><span class="enumeration_section">9.3.2.4</span>执行的最佳阶段</h5>
                     <div>
                        <p>“执行的最佳阶段”小节列出了执行阶段 - 例如SQL，PL / SQL以及Java编译和执行 - 这些阶段占采样会话活动的最高百分比。</p>
                     </div>
                  </div>
               </div><a id="TGDBA95254"></a><div class="props_rev_3"><a id="GUID-DA3D283C-BA54-4DFA-B6D4-9B38B8BABEFA" name="GUID-DA3D283C-BA54-4DFA-B6D4-9B38B8BABEFA"></a><h4 id="TGDBA-GUID-DA3D283C-BA54-4DFA-B6D4-9B38B8BABEFA" class="sect4"><span class="enumeration_section">9.3.3</span>热门SQL</h4>
                  <div>
                     <p>Top SQL部分<a id="d23879e1494" class="indexterm-anchor"></a><a id="d23879e1500" class="indexterm-anchor"></a>描述了采样会话活动中的顶级SQL语句。使用此信息可以识别可能导致瞬态性能问题的高负载SQL语句。
                     </p>
                     <p>Top SQL部分包含以下小节：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-2F598BAB-9483-43A1-BD57-09CFA22A8362">顶级SQL与热门事件</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-D49193C4-F03D-4C98-8B60-7560A4FD66F8">具有顶行行源的顶级SQL</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-53FAE3D1-30C4-4A4D-9592-588E166A9B68">使用文字的热门SQL</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-7988D9A8-BDFF-4E39-837D-F4BBED48550D">顶级解析模块/动作</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-53503A69-A06D-420C-AA3A-7DC404E86798">SQL文本的完整列表</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA95255"></a><div class="props_rev_3"><a id="GUID-2F598BAB-9483-43A1-BD57-09CFA22A8362" name="GUID-2F598BAB-9483-43A1-BD57-09CFA22A8362"></a><h5 id="TGDBA-GUID-2F598BAB-9483-43A1-BD57-09CFA22A8362" class="sect5"><span class="enumeration_section">9.3.3.1</span>包含热门事件的热门SQL</h5>
                     <div>
                        <p>Top Top with Top Events子部分列出了占用采样会话活动的最高百分比的SQL语句以及这些SQL语句遇到的最高等待事件。Sampled＃of Executions列显示了对特定SQL语句的不同执行次数进行了采样。</p>
                     </div>
                  </div><a id="TGDBA95256"></a><div class="props_rev_3"><a id="GUID-D49193C4-F03D-4C98-8B60-7560A4FD66F8" name="GUID-D49193C4-F03D-4C98-8B60-7560A4FD66F8"></a><h5 id="TGDBA-GUID-D49193C4-F03D-4C98-8B60-7560A4FD66F8" class="sect5"><span class="enumeration_section">9.3.3.2</span>具有顶行行源的顶级SQL</h5>
                     <div>
                        <p>具有顶行源的Top SQL子节列出了占采样会话活动的最高百分比及其详细执行计划信息的SQL语句。您可以使用此信息来确定SQL执行的哪个部分对SQL耗用时间有显着贡献。</p>
                     </div>
                  </div><a id="TGDBA95257"></a><div class="props_rev_3"><a id="GUID-53FAE3D1-30C4-4A4D-9592-588E166A9B68" name="GUID-53FAE3D1-30C4-4A4D-9592-588E166A9B68"></a><h5 id="TGDBA-GUID-53FAE3D1-30C4-4A4D-9592-588E166A9B68" class="sect5"><span class="enumeration_section">9.3.3.3</span>使用<span class="enumeration_section">文字的</span>顶级SQL</h5>
                     <div>
                        <p>Top SQL Using Literals子节使用文字列出SQL语句，这些文字占采样会话活动的最高百分比。您应该查看此报告中列出的语句，以确定是否可以使用绑定变量替换文字。</p>
                     </div>
                  </div><a id="TGDBA95258"></a><div class="props_rev_3"><a id="GUID-7988D9A8-BDFF-4E39-837D-F4BBED48550D" name="GUID-7988D9A8-BDFF-4E39-837D-F4BBED48550D"></a><h5 id="TGDBA-GUID-7988D9A8-BDFF-4E39-837D-F4BBED48550D" class="sect5"><span class="enumeration_section">9.3.3.4</span>顶部分析模块/动作</h5>
                     <div>
                        <p>Top Parsing Module / Action子部分列出了在解析SQL语句时占计算会话活动百分比最高的模块和操作。</p>
                     </div>
                  </div><a id="TGDBA95259"></a><div class="props_rev_3"><a id="GUID-53503A69-A06D-420C-AA3A-7DC404E86798" name="GUID-53503A69-A06D-420C-AA3A-7DC404E86798"></a><h5 id="TGDBA-GUID-53503A69-A06D-420C-AA3A-7DC404E86798" class="sect5"><span class="enumeration_section">9.3.3.5</span> SQL文本的完整列表</h5>
                     <div>
                        <p>SQL Text子部分的完整列表显示Top SQL部分中显示的SQL语句的完整文本。</p>
                     </div>
                  </div>
               </div><a id="TGDBA95260"></a><div class="props_rev_3"><a id="GUID-021E910A-C44F-4327-AEA2-AE9574E84C5A" name="GUID-021E910A-C44F-4327-AEA2-AE9574E84C5A"></a><h4 id="TGDBA-GUID-021E910A-C44F-4327-AEA2-AE9574E84C5A" class="sect4"><span class="enumeration_section">9.3.4</span> Top PL / SQL</h4>
                  <div>
                     <p>Top PL / SQL <a id="d23879e1840" class="indexterm-anchor"></a><a id="d23879e1846" class="indexterm-anchor"></a> section列出了占采样会话活动百分比最高的PL / SQL过程。
                     </p>
                     <p>PL / SQL Entry子程序列列出了应用程序进入PL / SQL的顶级入口点。 PL / SQL当前子程序列列出了在采样点执行的PL / SQL子程序。如果此列的值为<code class="codeph">SQL</code> ，则％Current列显示为此子程序执行SQL所花费的时间百分比。
                     </p>
                  </div>
               </div><a id="TGDBA95261"></a><div class="props_rev_3"><a id="GUID-55145C76-5D4E-443A-A67E-902766E55D56" name="GUID-55145C76-5D4E-443A-A67E-902766E55D56"></a><h4 id="TGDBA-GUID-55145C76-5D4E-443A-A67E-902766E55D56" class="sect4"><span class="enumeration_section">9.3.5</span>顶级Java</h4>
                  <div>
                     <p>顶级Java <a id="d23879e1907" class="indexterm-anchor"></a><a id="d23879e1913" class="indexterm-anchor"></a> section描述了采样会话活动中的顶级Java程序。
                     </p>
                  </div>
               </div><a id="TGDBA95262"></a><div class="props_rev_3"><a id="GUID-758732B8-737D-4674-BE3B-F76002102A72" name="GUID-758732B8-737D-4674-BE3B-F76002102A72"></a><h4 id="TGDBA-GUID-758732B8-737D-4674-BE3B-F76002102A72" class="sect4"><span class="enumeration_section">9.3.6</span>热门会议</h4>
                  <div>
                     <p>热门会议部分<a id="d23879e1970" class="indexterm-anchor"></a><a id="d23879e1976" class="indexterm-anchor"></a>描述等待特定等待事件的会话。使用此信息可以识别占采样会话活动百分比最高的会话，这可能是导致瞬态性能问题的原因。
                     </p>
                     <p>“热门会话”部分包含以下小节：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-88E5D95C-BED8-4D41-8346-0597BE75A9A1">热门会议</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-11E6A051-DF20-4CDF-AA77-25BE6B9EF2AE">顶级阻止会话</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-BB4043B6-3E6A-488E-9253-CD22A1413F51">运行PQ的热门会话</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA95263"></a><div class="props_rev_3"><a id="GUID-88E5D95C-BED8-4D41-8346-0597BE75A9A1" name="GUID-88E5D95C-BED8-4D41-8346-0597BE75A9A1"></a><h5 id="TGDBA-GUID-88E5D95C-BED8-4D41-8346-0597BE75A9A1" class="sect5"><span class="enumeration_section">9.3.6.1</span>热门会议</h5>
                     <div>
                        <p>“最高会话”子部分列出了等待特定等待事件的会话，这些等待事件占采样会话活动的最高百分比。</p>
                     </div>
                  </div><a id="TGDBA95264"></a><div class="props_rev_3"><a id="GUID-11E6A051-DF20-4CDF-AA77-25BE6B9EF2AE" name="GUID-11E6A051-DF20-4CDF-AA77-25BE6B9EF2AE"></a><h5 id="TGDBA-GUID-11E6A051-DF20-4CDF-AA77-25BE6B9EF2AE" class="sect5"><span class="enumeration_section">9.3.6.2</span>阻止最多的会话</h5>
                     <div>
                        <p>Top Blocking Sessions子节列出了占采样会话活动百分比最高的阻塞会话。</p>
                     </div>
                  </div><a id="TGDBA95265"></a><div class="props_rev_3"><a id="GUID-BB4043B6-3E6A-488E-9253-CD22A1413F51" name="GUID-BB4043B6-3E6A-488E-9253-CD22A1413F51"></a><h5 id="TGDBA-GUID-BB4043B6-3E6A-488E-9253-CD22A1413F51" class="sect5"><span class="enumeration_section">9.3.6.3</span>运行PQ的热门会话</h5>
                     <div>
                        <p>运行PQ的热门会话子部分列出了正在等待特定等待事件的并行查询（PQ）的会话，这些会话事件占采样会话活动的最高百分比。</p>
                     </div>
                  </div>
               </div><a id="TGDBA95266"></a><div class="props_rev_3"><a id="GUID-571B9C83-BD68-4174-8029-E98B0A6B9F3F" name="GUID-571B9C83-BD68-4174-8029-E98B0A6B9F3F"></a><h4 id="TGDBA-GUID-571B9C83-BD68-4174-8029-E98B0A6B9F3F" class="sect4"><span class="enumeration_section">9.3.7</span>顶部对象/文件/锁存器</h4>
                  <div>
                     <p>顶部对象/文件/锁存部分<a id="d23879e2204" class="indexterm-anchor"></a><a id="d23879e2210" class="indexterm-anchor"></a><a id="d23879e2216" class="indexterm-anchor"></a>提供有关最常用数据库资源的其他信息，并包含以下小节：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-3D50759B-221B-4C98-9893-48ACE793414B">顶级数据库对象</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-08B6339C-91C6-4A7A-842B-2BDCC6067B2F">热门数据库文件</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-sampled-data.html#GUID-034C22E0-F554-4517-AE8D-3D1EC876EDFF">顶部锁扣</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA95267"></a><div class="props_rev_3"><a id="GUID-3D50759B-221B-4C98-9893-48ACE793414B" name="GUID-3D50759B-221B-4C98-9893-48ACE793414B"></a><h5 id="TGDBA-GUID-3D50759B-221B-4C98-9893-48ACE793414B" class="sect5"><span class="enumeration_section">9.3.7.1</span>顶级数据库对象</h5>
                     <div>
                        <p>“顶级数据库对象”子部分列出了占采样会话活动百分比最高的数据库对象（如表和索引）。</p>
                     </div>
                  </div><a id="TGDBA95268"></a><div class="props_rev_3"><a id="GUID-08B6339C-91C6-4A7A-842B-2BDCC6067B2F" name="GUID-08B6339C-91C6-4A7A-842B-2BDCC6067B2F"></a><h5 id="TGDBA-GUID-08B6339C-91C6-4A7A-842B-2BDCC6067B2F" class="sect5"><span class="enumeration_section">9.3.7.2</span>顶级数据库文件</h5>
                     <div>
                        <p>“顶级数据库文件”子部分列出了占采样会话活动百分比最高的数据库文件。</p>
                     </div>
                  </div><a id="TGDBA95269"></a><div class="props_rev_3"><a id="GUID-034C22E0-F554-4517-AE8D-3D1EC876EDFF" name="GUID-034C22E0-F554-4517-AE8D-3D1EC876EDFF"></a><h5 id="TGDBA-GUID-034C22E0-F554-4517-AE8D-3D1EC876EDFF" class="sect5"><span class="enumeration_section">9.3.7.3</span>顶部锁存器</h5>
                     <div>
                        <p>Top Latches子部分列出了占采样会话活动百分比最高的锁存器。</p>
                        <p>插销<a id="d23879e2395" class="indexterm-anchor"></a>是用于保护系统全局区域（SGA）中的共享数据结构的简单的低级序列化机制。例如，锁存器保护当前访问数据库的用户列表以及描述缓冲区高速缓存中的块的数据结构。服务器或后台进程在操作或查看这些结构之一的同时获取锁存器非常短的时间。锁存器的实现取决于操作系统，特别是关于进程是否以及等待锁存器的时间和长度。
                        </p>
                     </div>
                  </div>
               </div><a id="TGDBA95271"></a><a id="TGDBA95270"></a><div class="props_rev_3"><a id="GUID-20686B81-8E05-4CE6-88D4-C92D18E83B77" name="GUID-20686B81-8E05-4CE6-88D4-C92D18E83B77"></a><h4 id="TGDBA-GUID-20686B81-8E05-4CE6-88D4-C92D18E83B77" class="sect4"><span class="enumeration_section">9.3.8</span>随时间变化的活动</h4>
                  <div>
                     <p>“随时间变化的活动”部分<a id="d23879e2450" class="indexterm-anchor"></a>是ASH报告中信息最丰富的部分之一。此部分对于分析较长时间段特别有用，因为它在分析期间提供有关活动和工作负载配置文件的深入详细信息。
                     </p>
                     <p>“随时间变化的活动”部分分为10个时间段。每个时隙的大小根据分析周期的持续时间而变化。第一个和最后一个插槽通常是奇数。所有内槽的尺寸相同，可以相互比较。例如，如果分析周期持续10分钟，那么所有时间段将分别为1分钟。但是，如果分析周期持续9分30秒，那么外槽可以各15秒，内槽各1分钟。</p>
                     <p>每个时隙包含有关该特定时隙的信息，如<a href="analyzing-sampled-data.html#GUID-20686B81-8E05-4CE6-88D4-C92D18E83B77__CEGHEIGI" title="描述ASH报告的“随时间变化的活动”部分中的列">表9-1中所述</a> 。
                     </p>
                     <div class="tblformal" id="GUID-20686B81-8E05-4CE6-88D4-C92D18E83B77__CEGHEIGI">
                        <p class="titleintable">表9-1随时间变化的活动</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="随时间变化的活动" width="100%" border="1" summary="Describes the columns in the Activity Over Time section of the ASH report" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d23879e2476">柱</th>
                                 <th align="left" valign="bottom" width="76%" id="d23879e2479">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d23879e2484" headers="d23879e2476 ">
                                    <p>槽位时间（持续时间）</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d23879e2484 d23879e2479 ">
                                    <p>插槽的持续时间</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d23879e2491" headers="d23879e2476 ">
                                    <p>插槽计数</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d23879e2491 d23879e2479 ">
                                    <p>插槽中的采样会话数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d23879e2498" headers="d23879e2476 ">
                                    <p>事件</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d23879e2498 d23879e2479 ">
                                    <p>插槽中的前三个等待事件</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d23879e2505" headers="d23879e2476 ">
                                    <p>活动计数</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d23879e2505 d23879e2479 ">
                                    <p>等待等待事件的ASH样本数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d23879e2512" headers="d23879e2476 ">
                                    <p>％事件</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d23879e2512 d23879e2479 ">
                                    <p>在整个分析期间等待等待事件的ASH样本的百分比</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>比较内部插槽时，通过识别“ <span>事件计数”</span>和“ <span>插槽计数”</span>列中的尖峰来执行偏斜分析。“ <span>事件计数”</span>列中的峰值表示等待特定事件的采样会话数量增加。“ <span>插槽计数”</span>列中的尖峰表示活动会话<span>数</span>增加，因为ASH数据仅从活动会话中采样，并且数据库工作负载相对增加。通常，当活动会话样本的数量和与等待事件相关联的会话数量增加时，该时隙可能是瞬态性能问题的原因。
                     </p>
                     <p>要使用用户定义的插槽大小生成ASH报告，请运行<code class="codeph">ashrpti.sql</code>脚本，如<span class="q">“ <a href="analyzing-sampled-data.html#GUID-190E5E5C-26EF-4430-9F64-7AA4D9149DAA">在特定数据库实例上生成ASH报告</a> ”中所述</span> 。
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
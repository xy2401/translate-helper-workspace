<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris."></meta>
      <meta name="description" content="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris."></meta>
      <title>使用URI进行数据访问</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="how-to-write-XML-DB-applications-in-Java.html" title="Previous" type="text/html"></link>
      <link rel="next" href="native-XML-DB-web-services.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="how-to-write-XML-DB-applications-in-Java.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="native-XML-DB-web-services.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-DB-repository.html" property="item" typeof="WebPage"><span property="name">Oracle XML DB存储库</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用URI进行数据访问</li>
            </ol>
            <a id="GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" name="GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798"></a><a id="ADXDB1900"></a>
            
            <h2 id="ADXDB-GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" class="sect2"><span class="enumeration_chapter">32</span>使用URI进行数据访问</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='data-access-using-URIs'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>您可以在数据库中生成和存储URI，并使用它们来检索它们所针对的数据库数据。您可以使用这种方式使用三种URI：DBUris，XDBUris和HTTPUris。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-B691F5CF-4AB9-48D1-AEB4-5B962A8413E2">Oracle XML DB URI功能概述</a><br>您可以使用URI作为间接机制来访问数据库数据，并且可以使用以数据库数据为目标的URI来生成XML文档。
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-DC41C382-C911-42C1-8430-0612B4633504">URI和URL</a><br>在开发基于Web的XML应用程序时，您经常使用<strong class="term">统一资源标识符</strong>或<strong class="term">URI</strong>来引用位于网络上的数据。 <strong class="term">URL</strong>或<strong class="term">统一资源定位符</strong>是使用Internet协议访问对象的URI。
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02">URIType及其子类型</a><br>您可以将各种路径表示为数据库对象。它们提供对存储在服务器内部和外部的数据的统一访问，它们可用于将XML文档中的URI映射到数据库列，让文档引用存储在关系列中的数据并在外部公开。
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-888C6A6E-9642-4213-88D4-BBEED24458A4">使用URIType实例访问数据</a><br>要将<code class="codeph">URIType</code>子类型的实例用于间接，请将此类实例存储在数据库中，然后使用PL / SQL方法（如<code class="codeph">getCLOB()</code>进行查询以检索目标数据。
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-62CFB196-932C-4193-B4FA-D9762778DEA0">XDBUris：指向资源库的指针</a><br><code class="codeph">XDBURIType</code>是一个亚型<code class="codeph">URIType</code> ，使用的URI资源暴露在Oracle XML DB信息库。对象类型<code class="codeph">XDBURIType</code>实例称为<strong class="term">XDBUris</strong> 。
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B">DBUris：指向数据库数据的指针</a><br>DBUri是一个以<span class="italic">数据库数据为</span>目标的URI。对于<code class="codeph">URIType</code>子类型的所有实例，DBUri提供对数据的间接访问。<code class="codeph">DBURIType</code>还允许您使用XPath处理数据库数据，并构建包含反映数据库结构的DBUri所针对的数据库数据的XML文档。
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6">使用包URIFACTORY创建URIType的新子类型</a><br>您可以定义与特定协议对应的<code class="codeph">URIType</code>子类型。您可以使用PL / SQL包<code class="codeph">URIFACTORY</code>获取<code class="codeph">URIType</code>实例的URI，转义URI字符串中的字符或删除此类转义，并注册或取消注册用于处理给定URL的类型名称。</li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82">SYS_DBURIGEN SQL函数</a><br>您可以通过向构造函数<code class="codeph">DBURIType</code>或适当的<code class="codeph">URIFACTORY</code> PL / SQL方法提供XPath表达式来创建<code class="codeph">DBURIType</code> 。使用Oracle SQL函数<code class="codeph">sys_DburiGen</code> ，您也可以使用<span class="italic">由</span>数据库列及其值<span class="italic">组成</span>的<span class="italic">XPath</span>创建DBUri。
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3">DBUriServlet</a><br>您可以使用Oracle XML DB HTTP服务器检索存储库资源。Oracle数据库还包括一个servlet <strong class="term">DBUriServlet</strong> ，它通过HTTP（S）URL提供任何类型的数据库数据。数据可以以纯文本，HTML或XML格式返回。</li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML DB Repository允许您对数据进行版本控制，实现和管理安全性，并使用API来访问和操作存储库资源。">Oracle XML DB存储库</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5224"></a><div class="props_rev_3"><a id="GUID-B691F5CF-4AB9-48D1-AEB4-5B962A8413E2" name="GUID-B691F5CF-4AB9-48D1-AEB4-5B962A8413E2"></a><h3 id="ADXDB-GUID-B691F5CF-4AB9-48D1-AEB4-5B962A8413E2" class="sect3"><span class="enumeration_section">32.1</span> Oracle XML DB URI功能概述</h3>
               <div>
                  <p>您可以使用URI作为间接机制来访问数据库数据，并且可以使用以数据库数据为目标的URI来生成XML文档。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="italic">使用路径作为间接机制 -</span>您可以在数据库中存储路径，然后通过引用路径<span class="italic">间接</span>访问其目标。所讨论的路径是各种统一资源标识符（URI）。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">使用以数据库数据为目标的路径生成XML文档 -</span>特别是可以用于间接的一种URI（ <span class="italic">DBUri）</span>为寻址<span class="italic">数据库数据</span>提供了方便的XPath表示法。您可以使用DBUri构造包含数据库数据的<span class="italic">XML文档</span> ，其结构反映数据库结构。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="您可以在数据库中生成和存储URI，并使用它们来检索它们所针对的数据库数据。您可以使用这种方式使用三种URI：DBUris，XDBUris和HTTPUris。">使用URI进行数据访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5225"></a><div class="props_rev_3"><a id="GUID-DC41C382-C911-42C1-8430-0612B4633504" name="GUID-DC41C382-C911-42C1-8430-0612B4633504"></a><h3 id="ADXDB-GUID-DC41C382-C911-42C1-8430-0612B4633504" class="sect3"><span class="enumeration_section">32.2</span> URI和URL</h3>
               <div>
                  <p>在开发基于Web的XML应用程序时，您经常使用<strong class="term">统一资源标识符</strong>或<strong class="term">URI</strong>来引用位于网络上的数据。 <strong class="term">URL</strong>或<strong class="term">统一资源定位符</strong>是使用Internet协议访问对象的URI。
                  </p>
                  <p>URI有两部分，用数字符号（ <span class="bold"><code class="codeph">#</code></span> ）分隔：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>URL部件，用于标识文档。</p>
                     </li>
                     <li>
                        <p>片段部分，用于标识文档中的片段。片段的表示法取决于文档类型。对于HTML文档，它是一个锚名称。对于XML文档，它是一个XPath表达式。</p>
                     </li>
                  </ul>
                  <p>这些是典型的URI：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="italic">对于HTML  -</span> <code class="codeph">http://www.example.com/document1#some_anchor</code> ，其中<code class="codeph">some_anchor</code>是HTML文档中的命名锚点。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">对于XML  -</span> <code class="codeph">http://www.example.com/xml_doc#/po/cust/custname</code> ，其中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">http://www.example.com/xml_doc</code>标识XML文档的位置。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">/po/cust/custname</code>标识文档中的片段。此部分由W3C XPointer建议定义。
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-DC41C382-C911-42C1-8430-0612B4633504__GUID-DE9C5981-3847-4D80-9000-33D64672C43D">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_ws_activity" target="_blank">Web服务活动声明，</a>用于解释HTTP（S）URL表示法</p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_xpath" target="_blank">XML路径语言（XPath）</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_xpointer" target="_blank">XML指针语言（XPointer）</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=xml_coverpages_mime_types" target="_blank">XML和MIME媒体类型</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="您可以在数据库中生成和存储URI，并使用它们来检索它们所针对的数据库数据。您可以使用这种方式使用三种URI：DBUris，XDBUris和HTTPUris。">使用URI进行数据访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5226"></a><div class="props_rev_3"><a id="GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02" name="GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02"></a><h3 id="ADXDB-GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02" class="sect3"><span class="enumeration_section">32.3</span> URIType及其子类型</h3>
               <div>
                  <p>您可以将各种路径表示为数据库对象。它们提供对存储在服务器内部和外部的数据的统一访问，它们可用于将XML文档中的URI映射到数据库列，让文档引用存储在关系列中的数据并在外部公开。</p>
                  <p>可用的路径对象类型是<code class="codeph">HTTPURIType</code> ， <code class="codeph">DBURIType</code>和<code class="codeph">XDBURIType</code> ，所有这些都是从抽象对象类型<code class="codeph">URIType</code> 。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold"><code class="codeph">HTTPURIType</code></span> - 此类型的对象称为<strong class="term">HTTPUri</strong> ，表示以<span class="bold"><code class="codeph">http://</code></span>开头的URL。使用<code class="codeph">HTTPURIType</code> ，您可以创建表示远程<span class="italic">Web页面</span> （或文件）链接的对象，并通过调用对象方法来检索这些Web页面。使用<code class="codeph">HTTPUriType</code>应用程序必须具有适当的访问权限。<code class="codeph">HTTPUriType</code>实现用于访问远程Web页面的超文本传输协议（HTTP（S））。<code class="codeph">HTTPURIType</code>使用包<code class="codeph">UTL_HTTP</code>来获取数据，因此此包的会话设置和访问控制也可用于影响HTTP提取。
                        </p>
                        <div class="infoboxnotealso" id="GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02__GUID-3B06F18D-8BC2-456F-8EA8-55F812E3D786">
                           <p class="notep1">也可以看看：</p>
                           <p>有关管理对外部网络服务的细粒度访问的信息，请参见<a href="../dbseg/managing-fine-grained-access-in-pl-sql-packages-and-types.html#DBSEG40012" target="_blank"><span><cite>“Oracle数据库安全指南”</cite></span></a></p>
                        </div>
                     </li>
                     <li>
                        <p><span class="bold"><code class="codeph">DBURIType</code></span> - 此类型的对象称为<strong class="term">DBUri</strong> ，表示以数据库数据为目标的URI  - 表，一个或多个行或单个列。使用<code class="codeph">DBURIType</code> ，您可以创建表示<span class="italic">数据库数据</span>链接的对象，并通过调用对象方法检索<span class="italic">XML</span>等数据。DBUri使用简单形式的XPath表达式作为其URI语法 - 例如，以下XPath表达式是对表<code class="codeph">HR.employees</code>行的DBUri引用，其中列<code class="codeph">first_name</code>具有值<code class="codeph">Jack</code> ：</p><pre class="pre codeblock"><code>/ HR / EMPLOYEES / ROW [FIRST_NAME = “杰克”]</code></pre></li>
                     <li>
                        <p><span class="bold"><code class="codeph">XDBURIType</code></span> - 此类型的对象称为<strong class="term">XDBUri</strong> ，表示以Oracle XML DB Repository中的资源为目标的URI。使用PL / SQL构造函数<code class="codeph">XDBURIType</code>您可以创建表示<span class="italic">存储库资源</span>链接的对象。然后，您可以通过调用这些对象上的方法来检索全部或部分资源。XDBUri的URI语法是存储库资源地址，可选地后跟XPath表达式。例如， <code class="codeph">/public/hr/doc1.xml#/purchaseOrder/lineItem</code>是XDBUri参照<code class="codeph">lineItem</code>根元素的子元素<code class="codeph">purchaseOrder</code>在库文件<code class="codeph">doc1.xml</code>在文件夹<code class="codeph">/public/hr</code> 。
                        </p>
                     </li>
                  </ul>
                  <p>这些对象类型中的每一个都是从<span class="italic">抽象</span>对象类型<span class="bold"><code class="codeph">URIType</code></span> 。作为抽象类型，它<span class="italic">没有</span>实例（对象）。只有它的子类型有实例。
                  </p>
                  <p><code class="codeph">URIType</code>类型提供以下功能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="italic">统一访问存储在服务器内部和外部的数据。</span>因为您可以使用<code class="codeph">URIType</code>值来存储指向HTTP（S）和DBUris的指针，所以您可以创建查询和索引，而无需担心数据所在的位置。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">将XML文档中的URI映射到数据库列。</span>当XML文档被分解并存储在对象关系表和列中时，文档中包含的任何URI都将映射到相应<code class="codeph">URIType</code>子类型的数据库列。
                        </p>
                     </li>
                  </ul>
                  <p>您可以引用存储在关系列中的数据，并使用URI将其公开给外部世界。 Oracle数据库提供了一个标准的servlet DBUriServlet，它解释了DBUris。它还提供PL / SQL包<code class="codeph">UTL_HTTP</code>和Java类<code class="codeph">java.net.URL</code> ，可用于获取URL引用。
                  </p>
                  <p>可以使用Oracle Text在Oracle数据库中本机索引<code class="codeph">URIType</code>列 - 不需要特殊的数据存储。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-E2C058E7-921B-4BC0-9032-8308AC33528D">DBUris和XDBUris概述</a><br>DBUris和XDBUris的重要用途包括从Web页面引用XSLT样式表，在不使用SQL的情况下引用数据库表或存储库文件夹中的数据，以及绕过Web服务器来提高性能。
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-D141D949-19B4-4759-9187-5A0D010A0CA1">URIType PL / SQL方法</a><br>抽象对象类型<code class="codeph">URIType</code>包括可与其每个子类型一起使用的PL / SQL方法。这些方法中的每一种都可以被任何子类型覆盖。
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="data-access-using-URIs.html#GUID-184D639E-8F1A-455D-8709-84123F42C10E" title="HTTPURIType PL / SQL方法getContentType（）返回其目标文档的MIME信息。您可以使用此信息来决定是将文档检索为BLOB实例还是CLOB实例。">HTTPURIType PL / SQL方法GETCONTENTTYPE（）</a></li>
                        <li><a href="data-access-using-URIs.html#GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" title="DBUri是一个以数据库数据为目标的URI。对于URIType子类型的所有实例，DBUri提供对数据的间接访问。DBURIType还允许您使用XPath处理数据库数据，并构建包含反映数据库结构的DBUri所针对的数据库数据的XML文档。">DBUris：指向数据库数据的指针</a></li>
                        <li><a href="data-access-using-URIs.html#GUID-62CFB196-932C-4193-B4FA-D9762778DEA0" title="XDBURIType是URIType的子类型，它使用URI公开Oracle XML DB Repository中的资源。对象类型XDBURIType的实例称为XDBUris。">XDBUris：指向资源库的指针</a></li>
                        <li><a href="indexes-for-XMLType-data.html#GUID-FE16BE28-035C-49EE-9683-6ED37876C3FC" title="您可以在XML数据上创建索引，专注于经常查询的特定部分，从而提高性能。您可以通过多种方式索引XMLType数据，无论是基于XML模式还是非基于模式，无论您使用何种XMLType存储模型。">XMLType数据的索引</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02__GUID-14FFF376-5B1E-471B-B6F9-FF26D43662EC">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="data-access-using-URIs.html#GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6" title="您可以定义与特定协议对应的URIType子类型。您可以使用PL / SQL包URIFACTORY获取URIType实例的URI，转义URI字符串中的字符或删除此类转义，并注册或取消注册用于处理给定URL的类型名称。">使用包URIFACTORY创建新的URIType子类型，</a>以获取有关定义新<code class="codeph">URIType</code>子类型的信息</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="您可以在数据库中生成和存储URI，并使用它们来检索它们所针对的数据库数据。您可以使用这种方式使用三种URI：DBUris，XDBUris和HTTPUris。">使用URI进行数据访问</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5227"></a><div class="props_rev_3"><a id="GUID-E2C058E7-921B-4BC0-9032-8308AC33528D" name="GUID-E2C058E7-921B-4BC0-9032-8308AC33528D"></a><h4 id="ADXDB-GUID-E2C058E7-921B-4BC0-9032-8308AC33528D" class="sect4"><span class="enumeration_section">32.3.1</span> DBUris和XDBUris概述</h4>
                  <div>
                     <p>DBUris和XDBUris的重要用途包括从Web页面引用XSLT样式表，在不使用SQL的情况下引用数据库表或存储库文件夹中的数据，以及绕过Web服务器来提高性能。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您可以从数据库生成的Web页面中引用XSLT样式表。PL / SQL包<code class="codeph">DBMS_METADATA</code>使用DBUris来引用XSLT样式表。XDBUri可用于引用存储在Oracle XML DB Repository中的XSLT样式表。
                           </p>
                        </li>
                        <li>
                           <p>您可以引用存储在数据库中的HTML文本，图像和其他数据。URL可用于指向存储在数据库表或存储库文件夹中的数据。</p>
                        </li>
                        <li>
                           <p>您可以绕过Web服务器来提高性能。使用对数据库的引用替换XML文档中的全局URL，并使用servlet，DBUri或XDBUri检索目标内容。使用DBUri或XDBUri通常提供比使用servlet更好的性能，因为您直接与数据库交互而不是通过Web服务器。</p>
                        </li>
                        <li>
                           <p>使用DBUri，您可以在不使用SQL的情况下访问数据库中的XML文档。</p>
                        </li>
                        <li>
                           <p>只要存储库资源存储在您有权访问的数据库表中，就可以使用XDBUri或DBUri来访问其内容。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E2C058E7-921B-4BC0-9032-8308AC33528D__GUID-739AFF4D-1C94-4424-86EF-0B904761290A">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_METADATA.html#ARPLS026" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，“DBMS_METADATA包”</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02" title="您可以将各种路径表示为数据库对象。它们提供对存储在服务器内部和外部的数据的统一访问，它们可用于将XML文档中的URI映射到数据库列，让文档引用存储在关系列中的数据并在外部公开。">URIType及其子类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5229"></a><a id="ADXDB5228"></a><div class="props_rev_3"><a id="GUID-D141D949-19B4-4759-9187-5A0D010A0CA1" name="GUID-D141D949-19B4-4759-9187-5A0D010A0CA1"></a><h4 id="ADXDB-GUID-D141D949-19B4-4759-9187-5A0D010A0CA1" class="sect4"><span class="enumeration_section">32.3.2</span> URIType PL / SQL方法</h4>
                  <div>
                     <p>抽象对象类型<code class="codeph">URIType</code>包括可与其每个子类型一起使用的PL / SQL方法。这些方法中的每一种都可以被任何子类型覆盖。
                     </p>
                     <p><a href="data-access-using-URIs.html#GUID-D141D949-19B4-4759-9187-5A0D010A0CA1__G1032380" title="该表描述了URIType成员函数。">表32-1</a>列出了<code class="codeph">URIType</code> PL / SQL方法。此外，每个子类型都有一个与子类型同名的构造函数。
                     </p>
                     <div class="tblformal" id="GUID-D141D949-19B4-4759-9187-5A0D010A0CA1__G1032380">
                        <p class="titleintable">表32-1 URIType PL / SQL方法</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="URIType PL / SQL方法" width="100%" border="1" summary="This table describes the URIType member functions." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="21%" id="d157948e771">URIType方法</th>
                                 <th align="left" valign="bottom" width="79%" id="d157948e774">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e779" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">的getURL（）</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e779 d157948e774 ">
                                    <p>返回<code class="codeph">URIType</code>实例的URL。
                                    </p>
                                    <p>使用此方法而不是直接引用URL。<code class="codeph">URIType</code>子类型重写此方法以提供正确的URL。例如， <code class="codeph">HTTPURIType</code>存储不带前缀<code class="codeph">http://</code>的URL。方法<code class="codeph">getURL()</code>然后预先添加前缀并返回整个URL。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e803" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">getExternalURL（）</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e803 d157948e774 ">
                                    <p>与<code class="codeph">getURL()</code>类似，但<code class="codeph">getExternalURL()</code>转义URL中的字符，以符合URL规范。例如，空格将转换为转义值<code class="codeph">%20</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e819" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">的getContentType（）</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e819 d157948e774 ">
                                    <p>返回URI的MIME内容类型。</p>
                                    <p><span class="italic">HTTPUri：</span>要返回内容类型，请遵循URL并检查MIME标头。
                                    </p>
                                    <p><span class="italic">DBUri：</span>返回的内容类型是<code class="codeph">text/plain</code> （对于标量值）或<code class="codeph">text/xml</code> （否则）。
                                    </p>
                                    <p><span class="italic">XDBUri：</span>返回存储库资源的<code class="codeph">ContentType</code>元数据属性的值。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e847" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">getCLOB（）</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e847 d157948e774 ">
                                    <p>返回URI的目标作为<code class="codeph">CLOB</code>实例。数据库字符集用于编码数据。
                                    </p>
                                    <p><span class="italic">DBUri：</span>返回<span class="italic">XML</span>数据（除非使用node-test <code class="codeph">text()</code> ，在这种情况下，目标数据按原样返回）。当目标<code class="codeph">BLOB</code>列时，列中的二进制数据将<span class="italic">转换为十六进制字符数据</span> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e873" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">getBLOB（）</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e873 d157948e774 ">
                                    <p>以<code class="codeph">BLOB</code>值的形式返回URI的目标。不执行字符转换，字符编码是URI目标的编码。此方法也可用于获取二进制数据。
                                    </p>
                                    <p><span class="italic">DBUri：</span>当应用于以<code class="codeph">BLOB</code>列为目标的<code class="codeph">getBLOB()</code> ， <code class="codeph">getBLOB()</code>返回<span class="italic">转换为十六进制字符数据</span>的二进制<span class="italic">数据</span> 。当应用于以<span class="italic">非</span>二进制数据为目标的DBUri时，数据将在数据库字符集中返回。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e899" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">的getXML（）</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e899 d157948e774 ">
                                    <p>以<code class="codeph">XMLType</code>实例的形式返回URI的目标。使用它，执行除<code class="codeph">getCLOB()</code>和<code class="codeph">getBLOB()</code>之外的操作的应用程序可以使用<code class="codeph">XMLType</code>方法来执行这些操作。如果URI不针对格式良好的XML文档，则会引发异常。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e918" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">createURI（）</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e918 d157948e774 ">
                                    <p>构造一个<code class="codeph">URIType</code>子类型的实例。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-184D639E-8F1A-455D-8709-84123F42C10E">HTTPURIType PL / SQL方法GETCONTENTTYPE（）</a><br><code class="codeph">HTTPURIType</code> PL / SQL方法<code class="codeph">getContentType()</code>返回其目标文档的MIME信息。您可以使用此信息来决定是将文档检索为<code class="codeph">BLOB</code>实例还是<code class="codeph">CLOB</code>实例。
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-4BC0E2A9-C10B-4FE1-9E36-53C6DB3B79E4">DBURIType PL / SQL方法GETCONTENTTYPE（）</a><br>PL / SQL方法<code class="codeph">getContentType()</code>返回URL的MIME信息。如果DBUri以标量值为目标，则返回的MIME内容类型为<code class="codeph">text/plain</code> 。否则，返回的类型是<code class="codeph">text/xml</code> 。
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-3CDCAFBB-BEB2-4684-BB2A-8058CB72FECE">DBURIType PL / SQL方法GETCLOB（）</a><br>当PL / SQL方法<code class="codeph">getCLOB()</code>应用于DBUri时，目标数据将作为<span class="italic">XML</span>数据返回，使用目标列或表名作为XML元素名称。如果目标XPath使用node-test <code class="codeph">text()</code>则数据将作为文本返回，而不包含封闭的XML标记。
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-E33B9174-B16A-4D09-A8F9-DD595467E7EF">DBURIType PL / SQL方法GETBLOB（）</a><br>当应用于以<code class="codeph">BLOB</code>列为目标的DBUri时，PL / SQL方法<code class="codeph">getBLOB()</code>返回<span class="italic">转换为十六进制字符数据</span>的二进制<span class="italic">数据</span> 。当应用于以<span class="italic">非</span> <code class="codeph">getBLOB()</code>数据为目标的DBUri时，方法<code class="codeph">getBLOB()</code>返回数据库字符集中的数据（作为<code class="codeph">BLOB</code>值）。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-D141D949-19B4-4759-9187-5A0D010A0CA1__GUID-62F5582C-9626-46F3-977F-E00869844A20">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/Database-URI-TYPEs.html#ARPLS800" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02" title="您可以将各种路径表示为数据库对象。它们提供对存储在服务器内部和外部的数据的统一访问，它们可用于将XML文档中的URI映射到数据库列，让文档引用存储在关系列中的数据并在外部公开。">URIType及其子类型</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5231"></a><a id="ADXDB5230"></a><div class="props_rev_3"><a id="GUID-184D639E-8F1A-455D-8709-84123F42C10E" name="GUID-184D639E-8F1A-455D-8709-84123F42C10E"></a><h5 id="ADXDB-GUID-184D639E-8F1A-455D-8709-84123F42C10E" class="sect5"><span class="enumeration_section">32.3.2.1</span> HTTPURIType PL / SQL方法GETCONTENTTYPE（）</h5>
                     <div>
                        <p><code class="codeph">HTTPURIType</code> PL / SQL方法<code class="codeph">getContentType()</code>返回其目标文档的MIME信息。您可以使用此信息来决定是将文档检索为<code class="codeph">BLOB</code>实例还是<code class="codeph">CLOB</code>实例。
                        </p>
                        <p>例如，您可以将MIME类型为<code class="codeph">x/jpeg</code>网页视为<code class="codeph">BLOB</code>实例，将MIME类型为<code class="codeph">text/plain</code>或<code class="codeph">text/html</code>网页视为<code class="codeph">CLOB</code>实例。
                        </p>
                        <p><a href="data-access-using-URIs.html#GUID-184D639E-8F1A-455D-8709-84123F42C10E__CBAFDAFH">示例32-1</a>测试HTTP内容类型以确定是否将数据检索为<code class="codeph">CLOB</code>或<code class="codeph">BLOB</code>实例。内容类型的数据是HTTP报头，用于<code class="codeph">HTTPURIType</code> ，或数据库列的元数据中，为<code class="codeph">DBURIType</code> 。
                        </p>
                        <div class="example" id="GUID-184D639E-8F1A-455D-8709-84123F42C10E__CBAFDAFH">
                           <p class="titleinexample">示例32-1使用HTTPURIType PL / SQL方法GETCONTENTTYPE（）</p><pre class="pre codeblock"><code>DECLARE httpuri HTTPURIType;是CLOB; x BLOB; BEGIN httpuri：= HTTPURIType（'http://www.oracle.com/index.html'）; DBMS_OUTPUT.PUT_LINE（httpuri <span class="bold">的getContentType（））;</span>如果httpuri.getContentType（）='text / html'那么y：= httpuri.getCLOB（）;万一;如果httpuri.getContentType（）='application-x / bin'那么x：= httpuri.getBLOB（）;万一;结束; / <span class="bold">text / html</span></code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-D141D949-19B4-4759-9187-5A0D010A0CA1" title="抽象对象类型URIType包括可与其每个子类型一起使用的PL / SQL方法。这些方法中的每一种都可以被任何子类型覆盖。">URIType PL / SQL方法</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5232"></a><div class="props_rev_3"><a id="GUID-4BC0E2A9-C10B-4FE1-9E36-53C6DB3B79E4" name="GUID-4BC0E2A9-C10B-4FE1-9E36-53C6DB3B79E4"></a><h5 id="ADXDB-GUID-4BC0E2A9-C10B-4FE1-9E36-53C6DB3B79E4" class="sect5"><span class="enumeration_section">32.3.2.2</span> DBURIType PL / SQL方法GETCONTENTTYPE（）</h5>
                     <div>
                        <p>PL / SQL方法<code class="codeph">getContentType()</code>返回URL的MIME信息。如果DBUri以标量值为目标，则返回的MIME内容类型为<code class="codeph">text/plain</code> 。否则，返回的类型是<code class="codeph">text/xml</code> 。
                        </p><pre class="pre codeblock"><code>CREATE TABLE dbtab（VARCHAR2（20），b BLOB）;</code></pre><p>对应于以下XPath表达式的DBUris具有内容类型<code class="codeph">text/xml</code> ，因为每个目标都是一个完整的XML数据列。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">/ HR / DBTAB / ROW / A</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">/ HR / DBTAB / ROW / B</code></p>
                           </li>
                        </ul>
                        <p>对应于以下XPath表达式的DBUris具有内容类型<code class="codeph">text/plain</code> ，因为每个都以标量值为目标。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">/ HR / DBTAB / ROW / A /文本（）</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">/ HR / DBTAB / ROW / B /文本（）</code></p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-D141D949-19B4-4759-9187-5A0D010A0CA1" title="抽象对象类型URIType包括可与其每个子类型一起使用的PL / SQL方法。这些方法中的每一种都可以被任何子类型覆盖。">URIType PL / SQL方法</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5233"></a><div class="props_rev_3"><a id="GUID-3CDCAFBB-BEB2-4684-BB2A-8058CB72FECE" name="GUID-3CDCAFBB-BEB2-4684-BB2A-8058CB72FECE"></a><h5 id="ADXDB-GUID-3CDCAFBB-BEB2-4684-BB2A-8058CB72FECE" class="sect5"><span class="enumeration_section">32.3.2.3</span> DBURIType PL / SQL方法GETCLOB（）</h5>
                     <div>
                        <p>当PL / SQL方法<code class="codeph">getCLOB()</code>应用于DBUri时，目标数据将作为<span class="italic">XML</span>数据返回，使用目标列或表名作为XML元素名称。如果目标XPath使用node-test <code class="codeph">text()</code>则数据将作为文本返回，而不包含封闭的XML标记。
                        </p>
                        <p>在这两种情况下，返回的数据都在数据库字符集中。</p>
                        <p>例如：如果应用于具有XPath <code class="codeph">/HR/DBTAB/ROW/A/text(),</code>其中<code class="codeph">A</code>是非二进制列，则<code class="codeph">A</code>列中的数据将按原样返回。如果没有XPath node-test <code class="codeph">text()</code> ，结果就是用XML包装的数据：</p><pre class="pre codeblock"><code>&lt;HR&gt; &lt;DBTAB&gt; &lt;ROW&gt; &lt;A&gt; <span class="italic">... data_in_column_A ......</span> &lt;/A&gt; &lt;/ ROW&gt; &lt;/ DBTAB&gt; &lt;/ HR&gt;</code></pre><p>当应用于以<span class="italic">二进制</span> （ <code class="codeph">BLOB</code> ）列为目标的DBUri时，列中的二进制数据将<span class="italic">转换为十六进制字符数据</span> 。
                        </p>
                        <p>例如：如果应用于具有XPath <code class="codeph">/HR/DBTAB/ROW/B/text(),</code>其中<code class="codeph">B</code>是<code class="codeph">BLOB</code>列，则将目标二进制数据转换为十六进制字符数据并返回。如果没有XPath node-test <code class="codeph">text()</code> ，结果是包装在XML中的翻译数据：</p><pre class="pre codeblock"><code>&lt;HR&gt; &lt;DBTAB&gt; &lt;ROW&gt; &lt;B&gt; <span class="italic">... data_translated_to_hex ...</span> &lt;/ B&gt; &lt;/ ROW&gt; &lt;/ DBTAB&gt; &lt;/ HR&gt;</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-D141D949-19B4-4759-9187-5A0D010A0CA1" title="抽象对象类型URIType包括可与其每个子类型一起使用的PL / SQL方法。这些方法中的每一种都可以被任何子类型覆盖。">URIType PL / SQL方法</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5234"></a><div class="props_rev_3"><a id="GUID-E33B9174-B16A-4D09-A8F9-DD595467E7EF" name="GUID-E33B9174-B16A-4D09-A8F9-DD595467E7EF"></a><h5 id="ADXDB-GUID-E33B9174-B16A-4D09-A8F9-DD595467E7EF" class="sect5"><span class="enumeration_section">32.3.2.4</span> DBURIType PL / SQL方法GETBLOB（）</h5>
                     <div>
                        <p>当应用于以<code class="codeph">BLOB</code>列为目标的DBUri时，PL / SQL方法<code class="codeph">getBLOB()</code>返回<span class="italic">转换为十六进制字符数据</span>的二进制<span class="italic">数据</span> 。当应用于以<span class="italic">非</span> <code class="codeph">getBLOB()</code>数据为目标的DBUri时，方法<code class="codeph">getBLOB()</code>返回数据库字符集中的数据（作为<code class="codeph">BLOB</code>值）。
                        </p>
                        <p>例如，考虑表<code class="codeph">dbtab</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE dbtab（VARCHAR2（20），b BLOB）;</pre><p>当<code class="codeph">getBLOB()</code>应用于对应于XPath表达式<code class="codeph">/HR/DBTAB/ROW/B</code> ，它返回一个<code class="codeph">BLOB</code>值，该值包含带有根元素<code class="codeph">B</code>的XML文档，其内容是<code class="codeph">B</code>列二进制数据的十六进制字符转换。</p>
                        <p>当<code class="codeph">getBLOB()</code>应用于对应于XPath表达式<code class="codeph">/HR/DBTAB/ROW/B/text()</code> ，它返回一个<code class="codeph">BLOB</code>值，该值仅包含<code class="codeph">B</code>列二进制数据的十六进制字符转换。</p>
                        <p>当<code class="codeph">getBLOB()</code>应用于对应于<span class="italic">非</span>二进制数据的XPath表达式<code class="codeph">/HR/DBTAB/ROW/</code> <span class="bold"><code class="codeph">A</code></span> <code class="codeph">/text()</code> <code class="codeph">/HR/DBTAB/ROW/</code> ，它返回包含数据库字符集中的列<code class="codeph">A</code>的数据的<code class="codeph">BLOB</code>值。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-D141D949-19B4-4759-9187-5A0D010A0CA1" title="抽象对象类型URIType包括可与其每个子类型一起使用的PL / SQL方法。这些方法中的每一种都可以被任何子类型覆盖。">URIType PL / SQL方法</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB5236"></a><a id="ADXDB5237"></a><a id="ADXDB5235"></a><div class="props_rev_3"><a id="GUID-888C6A6E-9642-4213-88D4-BBEED24458A4" name="GUID-888C6A6E-9642-4213-88D4-BBEED24458A4"></a><h3 id="ADXDB-GUID-888C6A6E-9642-4213-88D4-BBEED24458A4" class="sect3"><span class="enumeration_section">32.4</span>使用URIType实例访问数据</h3>
               <div>
                  <p>要将<code class="codeph">URIType</code>子类型的实例用于间接，请将此类实例存储在数据库中，然后使用PL / SQL方法（如<code class="codeph">getCLOB()</code>进行查询以检索目标数据。
                  </p>
                  <div class="section">
                     <p>您可以使用<code class="codeph">URIType</code>或其任何子类型创建数据库列，也可以只将每个URI的文本存储为字符串，然后在访问URI时根据需要创建所需的<code class="codeph">URIType</code>实例。您可以将不同<code class="codeph">URIType</code>子类型的对象存储在同一<code class="codeph">URIType</code>数据库列中。
                     </p>
                     <p>您还可以定义从<code class="codeph">URIType</code>子类型继承的自己的对象类型。通过派生新类型，您可以使用自定义技术来检索，转换或过滤数据。
                     </p>
                     <p><a href="data-access-using-URIs.html#GUID-888C6A6E-9642-4213-88D4-BBEED24458A4__BABBACBF">例32-2</a>在类型为<code class="codeph">URIType</code>的同一数据库列中存储HTTPUri和DBUri（ <code class="codeph">URIType</code>子类型<code class="codeph">HTTPURIType</code>和<code class="codeph">DBURIType</code>实例）。查询检索每个URI寻址的数据。第一个URI是Web页面URL。第二个URI引用标准数据库模式<code class="codeph">HR</code>表<code class="codeph">employees</code>的数据。 （为简洁起见，仅显示网页的开头。）
                     </p>
                     <p>要使用<code class="codeph">URIType</code> PL / SQL方法<code class="codeph">createURI()</code> ，您必须知道要使用的特定<code class="codeph">URIType</code>子类型。包<code class="codeph">URIFACTORY</code> PL / SQL方法<code class="codeph">getURI()</code>允许您使用后期绑定的灵活性，在运行时确定特定的类型信息。
                     </p>
                     <p>PL / SQL工厂方法<code class="codeph">URIFACTORY.getURI()</code>将URI字符串作为参数。它根据URI字符串的形式返回相应子类型（ <code class="codeph">HTTPURIType, DBURIType,</code>或<code class="codeph">XDBURIType</code> ）的<code class="codeph">URIType</code>实例：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果URI以<code class="codeph">http://</code>开头，则<code class="codeph">getURI()</code>创建并返回HTTPUri。
                           </p>
                        </li>
                        <li>
                           <p>如果URI以<code class="codeph">/oradb/</code>或<code class="codeph">/dburi/</code> ，则<code class="codeph">getURI()</code>创建并返回DBUri。
                           </p>
                        </li>
                        <li>
                           <p>否则， <code class="codeph">getURI()</code>创建并返回一个XDBUri。
                           </p>
                        </li>
                     </ul>
                     <p><a href="data-access-using-URIs.html#GUID-888C6A6E-9642-4213-88D4-BBEED24458A4__CBABEBGC">示例32-3</a>与<a href="data-access-using-URIs.html#GUID-888C6A6E-9642-4213-88D4-BBEED24458A4__BABBACBF">示例32-2</a>类似，但它使用两种不同的方式来获取URI所针对的文档：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>带有<span class="italic">绝对</span> URI的PL / SQL方法<code class="codeph">SYS.URIFACTORY.getURI()</code> ：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>一个针对HTTP地址<code class="codeph">http://www.oracle.com</code>的HTTPUri</p>
                              </li>
                              <li>
                                 <p>DBUri，目标数据库地址<code class="codeph">/oradb/HR/EMPLOYEES/ROW[EMPLOYEE_ID=200]</code></p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>具有<span class="italic">相对</span> URL（无<code class="codeph">http://</code> ）的构造函数<code class="codeph">SYS.HTTPURIType()</code> ）。使用与绝对URI相同的HTTPUri：Oracle主页。
                           </p>
                        </li>
                     </ul>
                     <p>在<a href="data-access-using-URIs.html#GUID-888C6A6E-9642-4213-88D4-BBEED24458A4__CBABEBGC">例32-3中</a> ，传递给<code class="codeph">getURI()</code>的URI字符串是硬编码的，但它们很容易就是应用程序在运行时获得的字符串值。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-888C6A6E-9642-4213-88D4-BBEED24458A4__BABBACBF">
                     <p class="titleinexample">示例32-2创建和查询URI列</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab（url URIType）;表创建。INSERT INTO uri_tab VALUES（ <span class="bold">HTTPURIType.createURI</span> （'http://www.oracle.com'））;已创建1行。INSERT INTO uri_tab VALUES（ <span class="bold">DBURIType.createURI</span> （'/ HR / EMPLOYEES / ROW [FIRST_NAME =“Jack”]'））;已创建1行。SELECT e.url.getCLOB（）FROM uri_tab e; E.URL.GETCLOB（）------------------------------------------- ------------------------ &lt;！DOCTYPE HTML PUBLIC“ -  // W3C // DTD HTML 4.0 Transitional // EN”&gt; &lt;html&gt; &lt;head&gt; <span class="bold">。 。 。</span>&lt;？xml版本=“1.0”？&gt; &lt;ROW&gt; &lt;EMPLOYEE_ID&gt; 177 &lt;/ EMPLOYEE_ID&gt; &lt;FIRST_NAME&gt;杰克&lt;/ FIRST_NAME&gt; &lt;LAST_NAME&gt;利文斯顿&lt;/ LAST_NAME&gt; &lt;EMAIL&gt; JLIVINGS &lt;/ EMAIL&gt; &lt;PHONE_NUMBER&gt; 011.44.1644.429264 &lt;/ PHONE_NUMBER&gt; &lt;HIRE_DATE&gt; 23 -APR-06 &lt;/ HIRE_DATE&gt; &lt;JOB_ID&gt; SA_REP &lt;/ JOB_ID&gt; &lt;SALARY&gt; 8400 &lt;/ SALARY&gt; &lt;COMMISSION_PCT&gt; .2 &lt;/ COMMISSION_PCT&gt; &lt;MANAGER_ID&gt; 149 &lt;/ MANAGER_ID&gt; &lt;DEPARTMENT_ID&gt; 80 &lt;/ DEPARTMENT_ID&gt; &lt; / ROW&gt;选择了2行。
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-888C6A6E-9642-4213-88D4-BBEED24458A4__CBABEBGC">
                     <p class="titleinexample">例32-3使用以不同方式创建的不同种类的URI</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab（docUrl SYS.URIType，docName VARCHAR2（200））;表创建。- 使用URIFACTORY将带有绝对URL的HTTPUri插入SYS.URIType。 - 目标是Oracle主页。INSERT INTO uri_tab VALUES（SYS.URIFACTORY <span class="bold">getURI（</span> 'http://www.oracle.com'）， <span class="bold">'AbsURL'）;</span>已创建1行。- 使用构造函数SYS.HTTPURIType插入具有相对URL的HTTPUri。- 注意缺少前缀http：//。目标是一样的。INSERT INTO uri_tab VALUES（ <span class="bold">SYS.HTTPURIType</span> （''www.oracle.com'），' <span class="bold">RelURL</span> '）;已创建1行。- 插入一个DBUri，该DBUri以表HR.employees中的员工数据为目标。INSERT INTO uri_tab VALUES（。SYS.URIFACTORY <span class="bold">getURI（</span> '/ ORADB / HR / EMPLOYEES / ROW [EMPLOYEE_ID = 200]'）， <span class="bold">'Emp200'）;</span>已创建1行。- 提取所有文件。SELECT e.docUrl.getCLOB（），docName FROM uri_tab e; E.DOCURL.GETCLOB（）----------------- DOCNAME ------------------------- ----------- &lt;！DOCTYPE HTML PUBLIC“ -  // W3C // DTD HTML 4.0 Transitional // EN”&gt; &lt;html&gt; &lt;head&gt; <span class="bold">。 。 。</span>
<span class="bold">绝对</span> &lt;！DOCTYPE HTML PUBLIC“ -  // W3C // DTD HTML 4.01 Transitional // EN”&gt; &lt;html&gt; &lt;head&gt; <span class="bold">。 。 。</span>
<span class="bold">RelURL</span> &lt;？xml版本=“1.0”？&gt; &lt;ROW&gt; &lt;EMPLOYEE_ID&gt; 200 &lt;/ EMPLOYEE_ID&gt; &lt;FIRST_NAME&gt; Jennifer &lt;/ FIRST_NAME&gt; &lt;LAST_NAME&gt; Whalen &lt;/ LAST_NAME&gt; &lt;EMAIL&gt; JWHALEN &lt;/ EMAIL&gt; &lt;PHONE_NUMBER&gt; 515.123.4444 &lt;/ PHONE_NUMBER&gt; &lt;HIRE_DATE&gt; 17 -SEP-03 &lt;/ HIRE_DATE&gt; &lt;JOB_ID&gt; AD_ASST &lt;/ JOB_ID&gt; &lt;SALARY&gt; 4400 &lt;/ SALARY&gt; &lt;MANAGER_ID&gt; 101 &lt;/ MANAGER_ID&gt; &lt;DEPARTMENT_ID&gt; 10 &lt;/ DEPARTMENT_ID&gt; &lt;/ ROW&gt;选择<span class="bold">Emp200</span> 3行。- 在PL / SQL中创建或替换函数returnclob RETURN CLOB是一个SYS.URIType; BEGIN SELECT docUrl INTO FROM uri_Tab WHERE docName <span class="bold">LIKE'Emp200</span> ％'; RETURN a.getCLOB;结束; /功能已创建。SELECT returnclob（）FROM DUAL; RETURNCLOB（）----------------------------------------------- ---------------- &lt;？xml版本=“1.0”？&gt; &lt;ROW&gt; &lt;EMPLOYEE_ID&gt; 200 &lt;/ EMPLOYEE_ID&gt; &lt;FIRST_NAME&gt; Jennifer &lt;/ FIRST_NAME&gt; &lt;LAST_NAME&gt; Whalen &lt;/ LAST_NAME&gt; &lt;EMAIL&gt; JWHALEN &lt;/ EMAIL&gt; &lt;PHONE_NUMBER&gt; 515.123.4444 &lt;/ PHONE_NUMBER&gt; &lt;HIRE_DATE&gt; 17 -SEP-03 &lt;/ HIRE_DATE&gt; &lt;JOB_ID&gt; AD_ASST &lt;/ JOB_ID&gt; &lt;SALARY&gt; 4400 &lt;/ SALARY&gt; &lt;MANAGER_ID&gt; 101 &lt;/ MANAGER_ID&gt; &lt;DEPARTMENT_ID&gt; 10 &lt;/ DEPARTMENT_ID&gt; &lt;/ ROW&gt;选择1行。</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="data-access-using-URIs.html#GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6" title="您可以定义与特定协议对应的URIType子类型。您可以使用PL / SQL包URIFACTORY获取URIType实例的URI，转义URI字符串中的字符或删除此类转义，并注册或取消注册用于处理给定URL的类型名称。">使用包URIFACTORY创建URIType的新子类型</a></li>
                        <li><a href="transformation-and-validation-of-XMLType-data.html#GUID-DBEB8B7E-B335-4D07-8A5D-42083A83155D" title="您可以使用内置的Oracle XML DB XSLT处理器将XSL转换应用于基于XML Schema的文档。数据库内特定于XML的优化可以显着减少所需的内存，消除与解析相关的开销，并减少网络流量。">XSL转换和Oracle XML DB</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="您可以在数据库中生成和存储URI，并使用它们来检索它们所针对的数据库数据。您可以使用这种方式使用三种URI：DBUris，XDBUris和HTTPUris。">使用URI进行数据访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5238"></a><div class="props_rev_3"><a id="GUID-62CFB196-932C-4193-B4FA-D9762778DEA0" name="GUID-62CFB196-932C-4193-B4FA-D9762778DEA0"></a><h3 id="ADXDB-GUID-62CFB196-932C-4193-B4FA-D9762778DEA0" class="sect3"><span class="enumeration_section">32.5</span> XDBUris：指向资源库的指针</h3>
               <div>
                  <p><code class="codeph">XDBURIType</code>是一个亚型<code class="codeph">URIType</code> ，使用的URI资源暴露在Oracle XML DB信息库。对象类型<code class="codeph">XDBURIType</code>实例称为<strong class="term">XDBUris</strong> 。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-37839CCF-A6FA-46C9-B7CD-6C2DDE27269E">XDBUri URI语法</a><br>XDBUri URI的URL部分是目标存储库资源的分层地址 - 它是<span class="italic">存储库</span>路径（ <span class="italic">不是</span> XPath表达式）。在数字符号（ <code class="codeph">#</code> ）之后，URI的可选片段部分使用XPath语法来定位XML文档的各个部分。
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B">使用XDBUri：示例</a><br>这里的XDBUri示例使用表中的URI来访问存储库资源，并与PL / SQL方法<code class="codeph">getXML</code>一起查询和检索XML文档。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="您可以在数据库中生成和存储URI，并使用它们来检索它们所针对的数据库数据。您可以使用这种方式使用三种URI：DBUris，XDBUris和HTTPUris。">使用URI进行数据访问</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5239"></a><div class="props_rev_3"><a id="GUID-37839CCF-A6FA-46C9-B7CD-6C2DDE27269E" name="GUID-37839CCF-A6FA-46C9-B7CD-6C2DDE27269E"></a><h4 id="ADXDB-GUID-37839CCF-A6FA-46C9-B7CD-6C2DDE27269E" class="sect4"><span class="enumeration_section">32.5.1</span> XDBUri URI语法</h4>
                  <div>
                     <p>XDBUri URI的URL部分是目标存储库资源的分层地址 - 它是<span class="italic">存储库</span>路径（ <span class="italic">不是</span> XPath表达式）。在数字符号（ <code class="codeph">#</code> ）之后，URI的可选片段部分使用XPath语法来定位XML文档的各个部分。
                     </p>
                     <div class="section">
                        <p>仅当目标资源是<span class="italic">XML</span>文档时，URI的可选片段部分才是合适的，在这种情况下，片段部分以其一个或多个部分为目标。如果目标资源不是XML文档，则省略片段和数字符号。
                        </p>
                        <p>以下是XDBUri URI的示例：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">/public/hr/image27.jpg</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">/public/hr/doc1.xml#/PurchaseOrder/LineItem</code></p>
                           </li>
                        </ul>
                        <p>基于这些URI的形式：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">/public/hr</code>是Oracle XML DB Repository中的文件夹资源。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">image27.jpg</code>和<code class="codeph">doc1.xml</code>是文件夹<code class="codeph">/public/hr</code>中的资源。
                              </p>
                           </li>
                           <li>
                              <p>资源<code class="codeph">doc1.xml</code>是一个文件资源，它包含一个XML文档。
                              </p>
                           </li>
                           <li>
                              <p>XPath表达式/ <code class="codeph">PurchaseOrder/LineItem</code>引用XML文档<code class="codeph">doc1.xml</code>元素<code class="codeph">PurchaseOrder</code>中的<code class="codeph">LineItem</code>子元素。
                              </p>
                           </li>
                        </ul>
                        <p>您可以使用包<code class="codeph">URIFACTORY</code> PL / SQL方法<code class="codeph">getURI()</code>创建<code class="codeph">URIFACTORY</code> 。</p>
                        <p><code class="codeph">XDBURIType</code>是使用<code class="codeph">URIFACTORY</code> PL / SQL方法<code class="codeph">getURI()</code>生成实例时使用的<span class="italic">默认</span> <code class="codeph">URIType</code> ，除非URI具有一个已识别的前缀<code class="codeph">http://</code> ， <code class="codeph">/dburi</code>或<code class="codeph">/oradb</code> 。
                        </p>
                        <p>例如，如果资源<code class="codeph">doc1.xml</code>存在于存储库文件夹<code class="codeph">/public/hr</code> ，则以下查询将返回以该资源为目标的XDBUri。
                        </p><pre class="pre codeblock"><code>SELECT SYS.URIFACTORY.getURI（'/ public / hr / doc1.xml'）FROM DUAL;</code></pre><p>缺少一个特殊的前缀来确定对象类型是<code class="codeph">XDBURIType</code> ，而不是任何特定的资源文件扩展名或<code class="codeph">#</code>后跟XPath表达式。即使资源名为<code class="codeph">foo.bar</code>而不是<code class="codeph">doc1.xml</code> ，返回的<code class="codeph">URIType</code>实例仍然是XDBUri。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-62CFB196-932C-4193-B4FA-D9762778DEA0" title="XDBURIType是URIType的子类型，它使用URI公开Oracle XML DB Repository中的资源。对象类型XDBURIType的实例称为XDBUris。">XDBUris：指向存储库资源的指针</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5241"></a><a id="ADXDB5242"></a><a id="ADXDB5240"></a><div class="props_rev_3"><a id="GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B" name="GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B"></a><h4 id="ADXDB-GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B" class="sect4"><span class="enumeration_section">32.5.2</span>使用XDBUri：示例</h4>
                  <div>
                     <p>这里的XDBUri示例使用表中的URI来访问存储库资源，并与PL / SQL方法<code class="codeph">getXML</code>一起查询和检索XML文档。
                     </p>
                     <div class="section">
                        <p><a href="data-access-using-URIs.html#GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B__CBAHDCAA">示例</a> 32-4创建XDBUri，将值插入采购订单表，然后选择所有采购订单。因为在传递给<code class="codeph">URIFACTORY.getURI()</code>的URI中没有使用特殊前缀，所以创建的<code class="codeph">URIType</code>实例是XDBUri。
                        </p>
                        <p>因为PL / SQL方法<code class="codeph">getXML()</code>返回<code class="codeph">XMLType</code>实例，所以可以将它与SQL / XML函数（如<code class="codeph">XMLQuery</code> 。<a href="data-access-using-URIs.html#GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B__CBAEABDF">例32-5中</a>的查询说明了这一点。该查询检索编号为999的所有采购订单。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B__CBAHDCAA">
                        <p class="titleinexample">示例32-4使用XDBUri按URI访问存储库资源</p><pre class="pre codeblock"><code>DECLARE res BOOLEAN; postring VARCHAR2（100）：='&lt;？xml版本=“1.0”？&gt; &lt;ROW&gt; &lt;PO&gt; 999 &lt;/ PO&gt; &lt;/ ROW&gt;'; BEGIN res：= DBMS_XDB_REPOS.createFolder（'/ public / orders /'）; res：= DBMS_XDB_REPOS.createResource（'/ public / orders / po1.xml'，postring）;结束; / PL / SQL过程成功完成。CREATE TABLE uri_tab（poUrl SYS.URIType，poName VARCHAR2（1000））;表创建。- 创建抽象类型列，以便可以使用任何类型的URI  - 将绝对URL插入poUrl。- 工厂将创建一个XDBURIType，因为没有前缀。- 这里，po1.xml是一个XML文件，存储在XML存储库的/ public / orders /中。INSERT INTO uri_tab VALUES（URIFACTORY.getURI（'/ public / orders / po1.xml'），'SomePurchaseOrder'）;已创建1行。- 获取所有采购订单SELECT e.poUrl.getCLOB（），poName FROM uri_tab e; E.POURL.GETCLOB（）----------------- PONAME ------ &lt;？xml版本=“1.0”？&gt; &lt;ROW&gt; &lt;PO&gt; 999 &lt;/ PO&gt; &lt;/ ROW&gt;选择了SomePurchaseOrder 1行。- 使用PL / SQL，您可以按如下方式访问表uri_tab：CREATE OR REPLACE FUNCTION returnclob RETURN CLOB是URIType; BEGIN  - 获取名为“Some％”的采购订单的绝对URL。选择POUrl INTO FROM Uri_tab WHERE poName LIKE'Some％'; RETURN a.getCLOB（）;结束; /功能已创建。SELECT returnclob（）FROM DUAL; RETURNCLOB（）--------------------- &lt;？xml版本=“1.0”？&gt; &lt;ROW&gt; &lt;PO&gt; 999 &lt;/ PO&gt; &lt;/ ROW&gt;选择1行。
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B__CBAEABDF">
                        <p class="titleinexample">示例32-5使用PL / SQL方法GETXML与XMLCAST和XMLQUERY</p><pre class="pre codeblock"><code>SELECT e.poUrl.getCLOB（）FROM uri_tab e WHERE XMLCast（XMLQuery（'$ po / ROW / PO'PASSING e.poUrl.getXML（）AS“po”RETURNING CONTENT）AS VARCHAR2（24））='999'; E.POURL.GETCLOB（）--------------------- &lt;？xml版本=“1.0”？&gt; &lt;ROW&gt; &lt;PO&gt; 999 &lt;/ PO&gt; &lt;/ ROW&gt;选择1行。</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-62CFB196-932C-4193-B4FA-D9762778DEA0" title="XDBURIType是URIType的子类型，它使用URI公开Oracle XML DB Repository中的资源。对象类型XDBURIType的实例称为XDBUris。">XDBUris：指向存储库资源的指针</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5243"></a><div class="props_rev_3"><a id="GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" name="GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B"></a><h3 id="ADXDB-GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" class="sect3"><span class="enumeration_section">32.6</span> DBUris：指向数据库数据的指针</h3>
               <div>
                  <p>DBUri是一个以<span class="italic">数据库数据为</span>目标的URI。对于<code class="codeph">URIType</code>子类型的所有实例，DBUri提供对数据的间接访问。<code class="codeph">DBURIType</code>还允许您使用XPath处理数据库数据，并构建包含反映数据库结构的DBUri所针对的数据库数据的XML文档。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用XPath表示法处理数据库数据。实际上，这使您可以将数据库可视化和访问，就像它是XML数据一样。</p>
                        <p>例如，DBUri可以使用诸如<code class="codeph">/HR/EMPLOYEES/ROW[FIRST_NAME="Jack"]</code>类的表达式来定位表<code class="codeph">HR.employees</code>的行，其中列<code class="codeph">first_name</code>具有值<code class="codeph">Jack</code> 。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">构造一个XML文档</span> ，其中包含DBUri所针对的数据库数据，其结构反映了数据库结构。
                        </p>
                        <p>例如：具有XPath <code class="codeph">/HR/DBTAB/ROW/A</code>可用于构造XML文档，该文档将<code class="codeph">A</code>列中的数据包装在反映数据库结构的XML元素中并相应地命名：</p><pre class="oac_no_warn" dir="ltr">&lt;HR&gt; &lt;DBTAB&gt; &lt;ROW&gt; &lt;A&gt; <span class="italic">... data_in_column_A ......</span> &lt;/A&gt; &lt;/ ROW&gt; &lt;/ DBTAB&gt; &lt;/ HR&gt;</pre></li>
                  </ul>
                  <p>DBUri不像HTTPUri那样引用全局位置。但是，您也可以通过将DBUri附加到标识处理DBUris的servlet的HTTPUri来访问DBUri以全局方式访问的对象 - 请参阅<a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="您可以使用Oracle XML DB HTTP服务器检索存储库资源。Oracle数据库还包括一个servlet DBUriServlet，它通过HTTP（S）URL提供任何类型的数据库数据。数据可以以纯文本，HTML或XML格式返回。">DBUriServlet</a> 。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-B091D77A-9774-4BD4-9D83-274377D35B4A">将数据库视为XML数据</a><br>使用<code class="codeph">DBURIType</code> ，您可以获得<span class="italic">以XML数据形式</span>呈现的数据库部分的<span class="italic">XML</span>视图。以这种方式可视化时，数据库数据有效地包装在XML元素中，从而生成一个或多个XML文档。
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-5243076D-6390-4DCE-83D1-852E3E98109E">DBUri URI语法</a><br>XPath表达式是指向一个或多个节点的XML数据路径。DBUri利用数据库的虚拟XML可视化，使用<span class="italic">简单形式</span>的XPath表达式作为URI来处理数据库数据。无论数据是否为XML，都是如此。</li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-44FF7A63-1218-4E15-B35F-FBE85B776B22">DBUris适用于数据库和会话</a><br>DBUri的范围限定为给定的数据库会话，因此相同的DBUri可以在同一查询中提供不同的结果，具体取决于会话上下文（用户已连接以及用户具有哪些权限）。
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0">使用DBUris -Examples</a><br>DBUri可以标识表，行，列中的列或对象列的属性。此处的示例显示如何定位不同的对象类型。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="您可以在数据库中生成和存储URI，并使用它们来检索它们所针对的数据库数据。您可以使用这种方式使用三种URI：DBUris，XDBUris和HTTPUris。">使用URI进行数据访问</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5245"></a><a id="ADXDB5244"></a><div class="props_rev_3"><a id="GUID-B091D77A-9774-4BD4-9D83-274377D35B4A" name="GUID-B091D77A-9774-4BD4-9D83-274377D35B4A"></a><h4 id="ADXDB-GUID-B091D77A-9774-4BD4-9D83-274377D35B4A" class="sect4"><span class="enumeration_section">32.6.1</span>将数据库视为XML数据</h4>
                  <div>
                     <p>使用<code class="codeph">DBURIType</code> ，您可以获得<span class="italic">以XML数据形式</span>呈现的数据库部分的<span class="italic">XML</span>视图。以这种方式可视化时，数据库数据有效地包装在XML元素中，从而生成一个或多个XML文档。
                     </p>
                     <p>您只能访问已被授予访问权限的数据库模式。实际上，数据库的这一部分是您自己的数据库视图。这适用于所有类型的数据库数据，而不仅仅是存储为XML的数据。</p>
                     <p>从技术意义上讲，这种“XML视图”不是数据库视图。这里的“视图”仅表示可用于理解<code class="codeph">DBURIType</code>的抽象透视图。您可以将<code class="codeph">DBURIType</code>视为提供一种可视化和访问数据库的方式<span class="italic">，就像它是</span> XML数据一样。
                     </p>
                     <p>但是， <code class="codeph">DBURIType</code>不仅提供可视化练习，还提供访问数据库数据的其他方法。每个“XML视图”都可以实现为XML文档 - 也就是说，您可以使用<code class="codeph">DBURIType</code>使用数据库数据生成XML文档。
                     </p>
                     <p>所有这些都是另一种说法， <code class="codeph">DBURIType</code>允许您使用XPath表示法来1）寻址和访问您有权访问的任何数据库数据，以及2）构造该数据的XML表示。
                     </p>
                     <p><a href="data-access-using-URIs.html#GUID-B091D77A-9774-4BD4-9D83-274377D35B4A__I1030162">图32-1</a>说明了关系表， <code class="codeph">HR.employees</code> ，该表的一部分的相应XML视图以及相应的DBUri URI（简单的XPath表达式）之间的关系。在这种情况下，作为XML公开的数据部分是<code class="codeph">employee_id</code>为<code class="codeph">200</code>的行。URI可用于访问数据并构造反映“XML视图”的XML文档。
                     </p>
                     <div class="figure" id="GUID-B091D77A-9774-4BD4-9D83-274377D35B4A__I1030162">
                        <p class="titleinfigure">图32-1 DBUri对应于关系数据的XML可视化</p><img src="img/adxdb053.gif" width="567" alt="下面是图32-1的描述" title="下面是图32-1的描述" longdesc="img_text/adxdb053.html"><br><a href="img_text/adxdb053.html">“图32-1 A DBUri对应于关系数据的XML可视化”的描述</a></div>
                     <!-- class="figure" -->
                     <p>“XML视图”中的XML元素和URI XPath表达式中的步骤都反映了数据库表和列名称。注意使用<span class="bold"><code class="codeph">ROW</code></span>来指示数据库表中的一行 - 包括“XML视图”和URI XPath表达式中的行。
                     </p>
                     <p>另请注意，XPath表达式包含根元素步骤<span class="bold"><code class="codeph">oradb</code></span> 。这用于指示URI对应于DBUri，而不是HTTPUri或XDBUri。只要从上下文中理解了这种对应关系，就可以跳过此XPath步骤。例如，如果已知有问题的路径是数据库数据的路径，则以下URI是等效的：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold"><code class="codeph">/oradb</code></span> <code class="codeph">/HR/EMPLOYEES/ROW[EMPLOYEE_ID=200]/LAST_NAME</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">/ HR / EMPLOYEES / ROW [EMPLOYEE_ID = 200] / LAST_NAME</code></p>
                        </li>
                     </ul>
                     <p>但是，每当URI上下文不清楚时，您必须使用前缀<code class="codeph">/oradb</code>来区分对应于DBUri的URI。特别是，您必须为<code class="codeph">URIFACTORY</code> PL / SQL方法和DBUriServlet提供前缀。
                     </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="data-access-using-URIs.html#GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6" title="您可以定义与特定协议对应的URIType子类型。您可以使用PL / SQL包URIFACTORY获取URIType实例的URI，转义URI字符串中的字符或删除此类转义，并注册或取消注册用于处理给定URL的类型名称。">使用包URIFACTORY创建URIType的新子类型</a></li>
                           <li><a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="您可以使用Oracle XML DB HTTP服务器检索存储库资源。Oracle数据库还包括一个servlet DBUriServlet，它通过HTTP（S）URL提供任何类型的数据库数据。数据可以以纯文本，HTML或XML格式返回。">DBUriServlet</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-B091D77A-9774-4BD4-9D83-274377D35B4A__GUID-D55C9620-5591-452B-81F0-6EFAD123DE40">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="generation-of-XML-data-from-relational-data.html#GUID-3BEB9A88-8B44-4AA3-89F4-8CBF6F8FA686" title="Oracle XML DB provides features for generating (constructing) XML data from relational data in the database. There are both SQL/XML standard functions and Oracle-specific functions and packages for generating XML data from relational content.">从关系数据</a>生成XML <a href="generation-of-XML-data-from-relational-data.html#GUID-3BEB9A88-8B44-4AA3-89F4-8CBF6F8FA686" title="Oracle XML DB提供了从数据库中的关系数据生成（构造）XML数据的功能。有SQL / XML标准函数和Oracle特定的函数和包，用于从关系内容生成XML数据。">数据，</a>用于从数据库数据生成XML的其他方法</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" title="DBUri是一个以数据库数据为目标的URI。对于URIType子类型的所有实例，DBUri提供对数据的间接访问。DBURIType还允许您使用XPath处理数据库数据，并构建包含反映数据库结构的DBUri所针对的数据库数据的XML文档。">DBUris：指向数据库数据的指针</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5246"></a><div class="props_rev_3"><a id="GUID-5243076D-6390-4DCE-83D1-852E3E98109E" name="GUID-5243076D-6390-4DCE-83D1-852E3E98109E"></a><h4 id="ADXDB-GUID-5243076D-6390-4DCE-83D1-852E3E98109E" class="sect4"><span class="enumeration_section">32.6.2</span> DBUri URI语法</h4>
                  <div>
                     <p>XPath表达式是指向一个或多个节点的XML数据路径。DBUri利用数据库的虚拟XML可视化，使用<span class="italic">简单形式</span>的XPath表达式作为URI来处理数据库数据。无论数据是否为XML，都是如此。</p>
                     <div class="section">
                        <p>因此，对于<code class="codeph">DBURIType</code> ，Oracle数据库仅支持完整XPath或XPointer语法的子集。<span class="italic"><span class="bold">X</span></span> DBUri XPath表达式没有语法限制。DBUri案例中也有一个例外： <code class="codeph">XMLType</code>表中的数据。对于<code class="codeph">XMLType</code>表，简单的XPath表单用于在数据库中寻址表本身。然后，为了解决表中的特定XML数据，XPath表达式的其余部分可以使用完整的XPath语法。此例外仅适用于<code class="codeph">XMLType</code> <span class="italic">表</span> ，而不适用于<code class="codeph">XMLType</code>列。
                        </p>
                        <p>在任何情况下，与XDBUri不同，DBUri URI不使用数字符号（ <code class="codeph">#</code> ）将URI的URL部分与片段（XPath）部分分开。<code class="codeph">DBURIType</code>不使用URI片段。相反，整个URI被视为（简单）XPath表达式。
                        </p>
                        <p>您可以为您有权访问的任何数据库数据创建DBUris。允许使用以下XPath表达式：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">/</code> <span class="italic"><code class="codeph">database_schema</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">table</code></span></p>
                           </li>
                           <li>
                              <p><code class="codeph">/</code> <span class="italic"><code class="codeph">database_schema</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">table</code></span> <code class="codeph">/ROW[</code> <span class="italic"><code class="codeph">predicate_expression</code></span> <code class="codeph">]/</code> <span class="italic"><code class="codeph">column</code></span></p>
                           </li>
                           <li>
                              <p><code class="codeph">/</code> <span class="italic"><code class="codeph">database_schema</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">table</code></span> <code class="codeph">/ROW[</code> <span class="italic"><code class="codeph">predicate_expression</code></span> <code class="codeph">]/</code> <span class="italic"><code class="codeph">object_column</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">attribute</code></span></p>
                           </li>
                           <li>
                              <p><code class="codeph">/</code> <span class="italic"><code class="codeph">database_schema</code></span> <code class="codeph">/</code> <span class="italic"><span class="bold"><code class="codeph">XMLType_table</code></span></span> <code class="codeph">/ROW/</code> <span class="italic"><code class="codeph">XPath_expression</code></span></p>
                           </li>
                        </ul>
                        <p>在最后一种情况下， <span class="italic"><code class="codeph">XMLType_table</code></span>是<code class="codeph">XMLType</code>表， <span class="italic"><code class="codeph">XPath_expression</code></span>是<span class="italic">任何</span> XPath表达式。对于<span class="italic">非</span> <code class="codeph">XMLType</code>表，DBUri XPath表达式必须以列结尾（它不能处理列中的特定数据）。此限制包括<code class="codeph">XMLType</code>列，LOB列和包含XML数据的<code class="codeph">VARCHAR2</code>列。
                        </p>
                        <p>DBUri XPath表达式可以执行以下任何操作：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>定位整个表格。</p>
                              <p>例如， <code class="codeph">/HR/EMPLOYEES</code>以数据库模式<code class="codeph">HR</code>表<code class="codeph">employees</code>为目标。</p>
                           </li>
                           <li>
                              <p>在路径的任何步骤中包含XPath谓词，但数据库架构和表步骤除外。</p>
                              <p>例如， <code class="codeph">/HR/EMPLOYEES/ROW[EMPLOYEE_ID=200]/EMAIL</code>定位表<code class="codeph">HR.employees</code>列<code class="codeph">email</code> ，其中<code class="codeph">employee_id</code>为<code class="codeph">200</code> 。
                              </p>
                           </li>
                           <li>
                              <p>对带有标量内容的数据使用<code class="codeph">text()</code> XPath节点测试。这是<span class="italic">唯一</span>可以使用的节点测试，它不能与表或行步骤一起使用。
                              </p>
                           </li>
                        </ul>
                        <p>以下内容可用于DBUri（XPath） <span class="italic">谓词</span>表达式：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>布尔运算符<code class="codeph">and</code> ， <code class="codeph">or</code> ，而<code class="codeph">not</code></p>
                           </li>
                           <li>
                              <p>关系运算符<code class="codeph">&lt;</code> ， <code class="codeph">&gt;</code> ， <code class="codeph">&lt;=</code> , <code class="codeph">!=</code> ， <code class="codeph">&gt;=</code> ， <code class="codeph">=</code> ， <code class="codeph">mod</code> ， <code class="codeph">div</code> ， <code class="codeph">*</code> （乘）</p>
                           </li>
                        </ul>
                        <p>DBUri XPath表达式<span class="italic">必须</span>执行以下所有操作：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>仅使用<span class="italic">子</span> XPath轴 - 不允许使用其他轴，例如父轴。
                              </p>
                           </li>
                           <li>
                              <p>指定数据库模式或指定<code class="codeph">PUBLIC</code>以在没有特定模式的情况下解析表名。
                              </p>
                           </li>
                           <li>
                              <p>指定数据库视图或表名称。</p>
                           </li>
                           <li>
                              <p>如果定位数据库列，请包括<code class="codeph">ROW</code>步骤。
                              </p>
                           </li>
                           <li>
                              <p>标识<span class="italic">单个</span>数据值，可以是对象类型实例或集合。
                              </p>
                           </li>
                           <li>
                              <p>当用于使用数据库数据生成XML数据时，生成格式良好的XML。</p>
                              <p><span class="italic">不能</span>生成格式良好的XML的DBUri示例是<code class="codeph">/HR/EMPLOYEES/ROW/LAST_NAME</code> 。它返回多个<code class="codeph">&lt;LAST_NAME&gt;</code>元素片段，没有单个根元素。
                              </p>
                           </li>
                           <li>
                              <p>请勿使用以下<span class="italic">任何</span>一项：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">*</code> （通配符）</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">.</code> （自）</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">..</code> （父母）</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">//</code> （后代或自我）</p>
                                 </li>
                                 <li>
                                    <p>XPath函数，例如<code class="codeph">count</code></p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>DBUri XPath表达式可以选择以<span class="bold"><code class="codeph">/oradb</code></span>或<span class="bold"><code class="codeph">/dburi</code></span>为前缀（两者是等价的）以区分它。此前缀不区分大小写。但是，DBUri XPath表达式的其余部分<span class="italic">区分大小写</span> ，并且通常也是XPath表达式。因此，例如，要将表<code class="codeph">HR.employees</code>指定为DBUri XPath表达式，您必须使用<code class="codeph">HR/EMPLOYEES</code> ，而不是<code class="codeph">hr/employees</code> （或混合大小写组合），因为默认情况下表和列名称是大写的。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5243076D-6390-4DCE-83D1-852E3E98109E__GUID-AD68A903-D3B6-47AA-804F-959FC254D98B">
                        <p class="notep1">也可以看看：</p>
                        <p>XPath表示法上的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_xpath" target="_blank">XML路径语言（XPath）</a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" title="DBUri是一个以数据库数据为目标的URI。对于URIType子类型的所有实例，DBUri提供对数据的间接访问。DBURIType还允许您使用XPath处理数据库数据，并构建包含反映数据库结构的DBUri所针对的数据库数据的XML文档。">DBUris：指向数据库数据的指针</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5247"></a><div class="props_rev_3"><a id="GUID-44FF7A63-1218-4E15-B35F-FBE85B776B22" name="GUID-44FF7A63-1218-4E15-B35F-FBE85B776B22"></a><h4 id="ADXDB-GUID-44FF7A63-1218-4E15-B35F-FBE85B776B22" class="sect4"><span class="enumeration_section">32.6.3</span> DBUris被绑定到数据库和会话</h4>
                  <div>
                     <p>DBUri的范围限定为给定的数据库会话，因此相同的DBUri可以在同一查询中提供不同的结果，具体取决于会话上下文（用户已连接以及用户具有哪些权限）。</p>
                     <p>您拥有数据库的XML“视图”的内容，以及您可以构造的XML文档的内容，反映了您在给定时间访问特定数据库数据的权限。</p>
                     <p>为了使事情复杂化，还有一个XML元素<code class="codeph">PUBLIC</code> ，在该元素下可以访问数据库数据而无需任何数据库模式限定。这是一个方便的功能，但如果您忘记给定用户的数据库XML视图取决于用户在给定时间对数据库的特定访问权限，它也会导致一些混淆。
                     </p>
                     <p>XML元素<code class="codeph">PUBLIC</code>对应于<span class="italic">公共同义词</span>的使用。例如，当用户<code class="codeph">quine</code>查询时，以下查询尝试匹配数据库模式<code class="codeph">quine</code>下的表<code class="codeph">foo</code> ，但如果不存在此类，则它会尝试匹配名为<code class="codeph">foo</code>的公共同义词。
                     </p><pre class="pre codeblock"><code>SELECT * FROM foo;</code></pre><p>同样，XML元素<code class="codeph">PUBLIC</code>包含给定用户可见的所有数据库数据以及该用户通过公共同义词可见的所有数据。因此，当用户<code class="codeph">quine</code>连接时，相同的DBUri URI <code class="codeph">/PUBLIC/FOO</code>可以解析为<code class="codeph">quine.foo</code> ，并在连接用户<code class="codeph">curry</code>时解析为<code class="codeph">curry.foo</code> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" title="DBUri是一个以数据库数据为目标的URI。对于URIType子类型的所有实例，DBUri提供对数据的间接访问。DBURIType还允许您使用XPath处理数据库数据，并构建包含反映数据库结构的DBUri所针对的数据库数据的XML文档。">DBUris：指向数据库数据的指针</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5248"></a><div class="props_rev_3"><a id="GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" name="GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0"></a><h4 id="ADXDB-GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" class="sect4"><span class="enumeration_section">32.6.4</span>使用DBUris -Examples</h4>
                  <div>
                     <p>DBUri可以标识表，行，列中的列或对象列的属性。此处的示例显示如何定位不同的对象类型。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-AD513CF0-BB11-4850-89DF-4B6088803FC1">使用DBUri定位表</a><br>示例使用针对完整表的DBUri。返回与表内容对应的XML文档。顶级XML元素以表的形式命名。每行的值都包含在<code class="codeph">ROW</code>元素中。
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3">使用DBUri在表中定位行</a><br>示例使用针对单个表行的DBUri。XPath谓词表达式标识与员工编号200对应的单个表行。结果是一个XML文档，其中<code class="codeph">ROW</code>作为顶级元素。
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012">使用DBUri定位列</a><br>您可以定位给定列，对象列的给定属性或属性具有给定值的对象列。实例说明了这些可能性
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-4A1589B4-ACC6-4719-A9D5-48FBFB2E6D45">使用DBUri检索列的文本值</a><br>在许多情况下，仅检索列的文本值而不是检索封闭标记会很有用。例如，如果XSLT样式表存储在<code class="codeph">CLOB</code>列中，则可以检索文档文本而不包含任何封闭的列名称标记。一个例子说明了这一点
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-E1CBFB79-5B87-4EAD-A176-5001C2251A90">使用DBUri定位集合</a><br>您可以定位数据库集合，例如有序集合表（OCT）。但是，您必须定位整个集合 - 您无法定位单个成员。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" title="DBUri是一个以数据库数据为目标的URI。对于URIType子类型的所有实例，DBUri提供对数据的间接访问。DBURIType还允许您使用XPath处理数据库数据，并构建包含反映数据库结构的DBUri所针对的数据库数据的XML文档。">DBUris：指向数据库数据的指针</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5250"></a><a id="ADXDB5249"></a><div class="props_rev_3"><a id="GUID-AD513CF0-BB11-4850-89DF-4B6088803FC1" name="GUID-AD513CF0-BB11-4850-89DF-4B6088803FC1"></a><h5 id="ADXDB-GUID-AD513CF0-BB11-4850-89DF-4B6088803FC1" class="sect5"><span class="enumeration_section">32.6.4.1</span>使用<span class="enumeration_section">DBUri</span>定位表</h5>
                     <div>
                        <p>示例使用针对完整表的DBUri。返回与表内容对应的XML文档。顶级XML元素以表的形式命名。每行的值都包含在<code class="codeph">ROW</code>元素中。
                        </p>
                        <div class="section">
                           <p>这在<a href="data-access-using-URIs.html#GUID-AD513CF0-BB11-4850-89DF-4B6088803FC1__BABHFEIC">例32-6中显示</a> 。您使用以下语法定位完整的数据库表：</p><pre class="pre codeblock"><code>/ <span class="italic">database_schema</span> / <span class="italic">table</span>
</code></pre></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-AD513CF0-BB11-4850-89DF-4B6088803FC1__BABHFEIC">
                           <p class="titleinexample">示例32-6使用DBUri定位完整表</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab（url URIType）;表创建。INSERT INTO uri_tab VALUES（DBURIType.createURI（'/ HR / EMPLOYEES'））;已创建1行。SELECT e.url.getCLOB（）FROM uri_tab e; E.URL.GETCLOB（）--------------- &lt;？xml版本=“1.0”？&gt; &lt; <span class="bold">EMPLOYEES</span> &gt; &lt; <span class="bold">ROW</span> &gt; &lt;EMPLOYEE_ID&gt; 100 &lt;/ EMPLOYEE_ID&gt; &lt;FIRST_NAME&gt; Steven &lt;/ FIRST_NAME&gt; &lt;LAST_NAME&gt; King &lt;/ LAST_NAME&gt; &lt;EMAIL&gt; SKING &lt;/ EMAIL&gt; &lt;PHONE_NUMBER&gt; 515.123.4567 &lt;/ PHONE_NUMBER&gt; &lt; HIRE_DATE&gt; 17-JUN-03 &lt;/ HIRE_DATE&gt; &lt;JOB_ID&gt; AD_PRES &lt;/ JOB_ID&gt; &lt;SALARY&gt; 24000 &lt;/ SALARY&gt; &lt;DEPARTMENT_ID&gt; 90 &lt;/ DEPARTMENT_ID&gt; &lt;/ <code class="codeph">ROW</code> &gt; &lt; <code class="codeph">ROW</code> &gt; &lt;EMPLOYEE_ID&gt; 101 &lt;/ EMPLOYEE_ID&gt; &lt;FIRST_NAME&gt; Neena &lt;/ FIRST_NAME&gt; &lt;LAST_NAME&gt; Kochhar &lt;/ LAST_NAME&gt; &lt;EMAIL&gt; NKOCHHAR &lt;/ EMAIL&gt; &lt;PHONE_NUMBER&gt; 515.123.4568 &lt;/ PHONE_NUMBER&gt; &lt;HIRE_DATE&gt; 21-SEP-05 &lt;/ HIRE_DATE&gt; &lt;JOB_ID&gt; AD_VP &lt;/ JOB_ID&gt; &lt;SALARY&gt; 17000 &lt;/ SALARY&gt; &lt;MANAGER_ID&gt; 100 &lt;/ MANAGER_ID&gt; &lt;DEPARTMENT_ID&gt; 90 &lt;/ DEPARTMENT_ID&gt; &lt;/ <code class="codeph">ROW</code> &gt; <span class="bold">。 。 。</span>选择了1行。</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" title="DBUri可以标识表，行，列中的列或对象列的属性。此处的示例显示如何定位不同的对象类型。">使用DBUris -Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5252"></a><a id="ADXDB5251"></a><div class="props_rev_3"><a id="GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3" name="GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3"></a><h5 id="ADXDB-GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3" class="sect5"><span class="enumeration_section">32.6.4.2</span>使用DBUri在表中定位行</h5>
                     <div>
                        <p>示例使用针对单个表行的DBUri。XPath谓词表达式标识与员工编号200对应的单个表行。结果是一个XML文档，其中<code class="codeph">ROW</code>作为顶级元素。
                        </p>
                        <div class="section">
                           <p>这在<a href="data-access-using-URIs.html#GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3__BABIIEEF">例32-7中显示</a> 。您使用以下语法定位表的一个或多个特定行：</p><pre class="pre codeblock"><code>/ <span class="italic">database_schema</span> / <span class="italic">table</span> / ROW [ <span class="italic">predicate_expression</span> ]</code></pre></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3__BABIIEEF">
                           <p class="titleinexample">示例32-7使用DBUri以表格中的特定行为目标</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab（url URIType）;表创建。INSERT INTO uri_tab VALUES（DBURIType.createURI（'/ HR / EMPLOYEES / <span class="bold">ROW [EMPLOYEE_ID = 200]</span> '））;已创建1行。SELECT e.url.getCLOB（）FROM uri_tab e; E.URL.GETCLOB（）------------------------------------------- ------------ &lt;？xml版本=“1.0”？&gt; &lt;ROW&gt; &lt;EMPLOYEE_ID&gt; <span class="bold">200</span> &lt;/ EMPLOYEE_ID&gt; &lt;FIRST_NAME&gt; Jennifer &lt;/ FIRST_NAME&gt; &lt;LAST_NAME&gt; Whalen &lt;/ LAST_NAME&gt; &lt;EMAIL&gt; JWHALEN &lt;/ EMAIL&gt; &lt;PHONE_NUMBER&gt; 515.123.4444 &lt;/ PHONE_NUMBER&gt; &lt;HIRE_DATE&gt; 17 -SEP-03 &lt;/ HIRE_DATE&gt; &lt;JOB_ID&gt; AD_ASST &lt;/ JOB_ID&gt; &lt;SALARY&gt; 4400 &lt;/ SALARY&gt; &lt;MANAGER_ID&gt; 101 &lt;/ MANAGER_ID&gt; &lt;DEPARTMENT_ID&gt; 10 &lt;/ DEPARTMENT_ID&gt; &lt;/ ROW&gt;选择1行。</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" title="DBUri可以标识表，行，列中的列或对象列的属性。此处的示例显示如何定位不同的对象类型。">使用DBUris -Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5254"></a><a id="ADXDB5255"></a><a id="ADXDB5253"></a><div class="props_rev_3"><a id="GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012" name="GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012"></a><h5 id="ADXDB-GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012" class="sect5"><span class="enumeration_section">32.6.4.3</span>使用<span class="enumeration_section">DBUri</span>定位列</h5>
                     <div>
                        <p>您可以定位给定列，对象列的给定属性或属性具有给定值的对象列。实例说明了这些可能性</p>
                        <div class="section">
                           <p>您可以使用以下语法定位特定列：</p><pre class="pre codeblock"><code>/ <span class="italic">database_schema</span> / <span class="italic">table</span> / ROW [ <span class="italic">predicate_expression</span> ] / <span class="italic">column</span>
</code></pre><p>您可以使用以下语法定位对象列的特定属性：</p><pre class="pre codeblock"><code>/ <span class="italic">database_schema</span> / <span class="italic">table</span> / ROW [ <span class="italic">predicate_expression</span> ] / <span class="italic">object_column</span> / <span class="italic">attribute</span>
</code></pre><p>您可以使用以下语法定位属性具有特定值的特定对象列：</p><pre class="pre codeblock"><code>/ <span class="italic">database_schema</span> / <span class="italic">table</span> / ROW [ <span class="italic">predicate_expression_with_attributes</span> ] / <span class="italic">object_column</span>
</code></pre><p><a href="data-access-using-URIs.html#GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012__BABGJBEB">示例32-8</a>使用DBUri，该DBUri以与<a href="data-access-using-URIs.html#GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3__BABIIEEF">示例32-7中</a>相同的员工为目标列<code class="codeph">last_name</code> 。顶级XML元素以目标列命名。
                           </p>
                           <p><a href="data-access-using-URIs.html#GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012__CBAEGIHJ">示例32-9</a>使用DBUri，该DBUri以<code class="codeph">CUST_ADDRESS</code>对象列为目标，该列包含具有特定值的城市和邮政编码属性。顶级XML元素以列命名，它包含每个对象属性的子元素。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012__BABGJBEB">
                           <p class="titleinexample">示例32-8使用DBUri定位特定列</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab（url URIType）;表创建。INSERT INTO uri_tab VALUES（DBURIType.createURI（'/ HR / EMPLOYEES / ROW [EMPLOYEE_ID = 200] / LAST_NAME'））;已创建1行。SELECT e.url.getCLOB（）FROM uri_tab e; E.URL.GETCLOB（）------------------------------ &lt;？xml版本=“1.0”？&gt; &lt;LAST_NAME&gt; Whalen &lt;/ LAST_NAME&gt;选择了1行。
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012__CBAEGIHJ">
                           <p class="titleinexample">示例32-9使用DBUri定位具有特定属性值的对象列</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab（url URIType）;表创建。INSERT INTO uri_tab VALUES（DBURIType.createURI（'/ OE / CUSTOMERS / ROW [CUST_ADDRESS / CITY =“Poughkeepsie”和CUST_ADDRESS / POSTAL_CODE = 12601] / CUST_ADDRESS'））;已创建1行。SELECT e.url.getCLOB（）FROM uri_tab e; E.URL.GETCLOB（）--------------- &lt;？xml版本=“1.0”？&gt; &lt;CUST_ADDRESS&gt; &lt;STREET_ADDRESS&gt; 33 Fulton St &lt;/ STREET_ADDRESS&gt; &lt;POSTAL_CODE&gt; 12601 &lt;/ POSTAL_CODE&gt; &lt;CITY&gt; Poughkeepsie &lt;/ CITY&gt; &lt;STATE_PROVINCE&gt; NY &lt;/ STATE_PROVINCE&gt; &lt;COUNTRY_ID&gt; US &lt;/ COUNTRY_ID&gt; &lt;/ CUST_ADDRESS&gt;选择了1行。
</code></pre><p>DBUri在此处标识具有以<code class="codeph">Poughkeepsie</code>为值的<code class="codeph">CITY</code>属性的对象和以<code class="codeph">12601</code>为值的<code class="codeph">POSTAL_CODE</code>属性。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" title="DBUri可以标识表，行，列中的列或对象列的属性。此处的示例显示如何定位不同的对象类型。">使用DBUris -Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5257"></a><a id="ADXDB5256"></a><div class="props_rev_3"><a id="GUID-4A1589B4-ACC6-4719-A9D5-48FBFB2E6D45" name="GUID-4A1589B4-ACC6-4719-A9D5-48FBFB2E6D45"></a><h5 id="ADXDB-GUID-4A1589B4-ACC6-4719-A9D5-48FBFB2E6D45" class="sect5"><span class="enumeration_section">32.6.4.4使用DBUri</span>检索列的文本值</h5>
                     <div>
                        <p>在许多情况下，仅检索列的文本值而不是检索封闭标记会很有用。例如，如果XSLT样式表存储在<code class="codeph">CLOB</code>列中，则可以检索文档文本而不包含任何封闭的列名称标记。一个例子说明了这一点
                        </p>
                        <div class="section">
                           <p>您可以使用<code class="codeph">text()</code> XPath节点测试。它指定您只需要节点的文本值。使用以下语法：</p><pre class="pre codeblock"><code>/ oradb / <span class="italic">database_schema</span> / <span class="italic">table</span> / ROW [ <span class="italic">predicate_expression</span> ] / <span class="italic">column</span> / <span class="bold">text（）</span>
</code></pre><p><a href="data-access-using-URIs.html#GUID-4A1589B4-ACC6-4719-A9D5-48FBFB2E6D45__CBAGJCHE">示例32-10</a>检索员工编号为200的employee <code class="codeph">last_name</code>列的文本值，不带XML标记。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-4A1589B4-ACC6-4719-A9D5-48FBFB2E6D45__CBAGJCHE">
                           <p class="titleinexample">示例32-10使用DBUri仅检索节点的文本值</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab（url URIType）;表创建。INSERT INTO uri_tab VALUES（DBURIType.createURI（'/ HR / EMPLOYEES / ROW [EMPLOYEE_ID = 200] / LAST_NAME / text（）'））;已创建1行。SELECT e.url.getCLOB（）FROM uri_tab e; E.URL.GETCLOB（）---------------选择了Whalen 1行。</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" title="DBUri可以标识表，行，列中的列或对象列的属性。此处的示例显示如何定位不同的对象类型。">使用DBUris -Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5259"></a><a id="ADXDB5258"></a><div class="props_rev_3"><a id="GUID-E1CBFB79-5B87-4EAD-A176-5001C2251A90" name="GUID-E1CBFB79-5B87-4EAD-A176-5001C2251A90"></a><h5 id="ADXDB-GUID-E1CBFB79-5B87-4EAD-A176-5001C2251A90" class="sect5"><span class="enumeration_section">32.6.4.5</span>使用<span class="enumeration_section">DBUri</span>定位集合</h5>
                     <div>
                        <p>您可以定位数据库集合，例如有序集合表（OCT）。但是，您必须定位整个集合 - 您无法定位单个成员。</p>
                        <div class="section">
                           <p>当目标集合时，DBUri生成的XML文档将每个集合成员包含为XML元素，所有这些元素都包含在以集合<span class="italic">类型</span>命名的元素中。
                           </p>
                           <p><a href="data-access-using-URIs.html#GUID-E1CBFB79-5B87-4EAD-A176-5001C2251A90__CBABCBGH">例32-11</a>使用一个以数字集合为目标的DBUri。顶级XML元素以集合命名，其子元素以集合<span class="italic">类型</span> （ <code class="codeph">NUMBER</code> ）命名。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-E1CBFB79-5B87-4EAD-A176-5001C2251A90__CBABCBGH">
                           <p class="titleinexample">示例32-11使用DBUri定位集合</p><pre class="pre codeblock"><code>CREATE TYPE num_collection AS VARRAY（10）OF NUMBER; /类型已创建。CREATE TABLE命令（项目VARCHAR2（10），数量num_collection）;表创建。INSERT INTO命令VALUES（'boxes'，num_collection（3,7,4,9））;已创建1行。SELECT * FROM orders; ITEM ---- QUANTITIES ----------框NUM_COLLECTION（3,7,4,9）选择1行。SELECT DBURIType（'/ HR / ORDERS / ROW [ITEM =“boxes”] / QUANTITIES'）。getCLOB（）FROM DUAL; DBURITYPE（ '/ HR /命令/ ROW [ITEM = “盒子”] /数量'）。GETCLOB（）----------------------------------------------- --------------- &lt;？xml版本=“1.0”？&gt; &lt;QUANTITIES&gt; &lt;NUMBER&gt; 3 &lt;/ NUMBER&gt; &lt;NUMBER&gt; 7 &lt;/ NUMBER&gt; &lt;NUMBER&gt; 4 &lt;/ NUMBER&gt; &lt;NUMBER&gt; 9 &lt;/ NUMBER&gt; &lt;/ QUANTITIES&gt;选择1行。</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" title="DBUri可以标识表，行，列中的列或对象列的属性。此处的示例显示如何定位不同的对象类型。">使用DBUris -Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB5261"></a><a id="ADXDB5260"></a><div class="props_rev_3"><a id="GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6" name="GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6"></a><h3 id="ADXDB-GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6" class="sect3"><span class="enumeration_section">32.7</span>使用包URIFACTORY创建URIType的新子类型</h3>
               <div>
                  <p>您可以定义与特定协议对应的<code class="codeph">URIType</code>子类型。您可以使用PL / SQL包<code class="codeph">URIFACTORY</code>获取<code class="codeph">URIType</code>实例的URI，转义URI字符串中的字符或删除此类转义，并注册或取消注册用于处理给定URL的类型名称。</p>
                  <p><a href="data-access-using-URIs.html#GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6__G1047970" title="该表描述了UriFactory的功能和过程。">表32-2</a>中列出了其他PL / SQL方法。
                  </p>
                  <div class="tblformalwide" id="GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6__G1047970">
                     <p class="titleintable">表32-2 URIFACTORY PL / SQL方法</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="URIFACTORY PL / SQL方法" width="100%" border="1" summary="This table describes UriFactory functions and procedures." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="27%" id="d157948e3385">PL / SQL方法</th>
                              <th align="left" valign="bottom" width="73%" id="d157948e3388">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d157948e3393" headers="d157948e3385 ">
                                 <p><code class="codeph">getURI（）</code></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d157948e3393 d157948e3388 ">
                                 <p>返回<code class="codeph">URIType</code>实例的URI。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d157948e3404" headers="d157948e3385 ">
                                 <p><code class="codeph">escapeURI（）</code></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d157948e3404 d157948e3388 ">
                                 <p>通过用等效的转义序列替换URI中不允许的字符来转义URI字符串。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d157948e3412" headers="d157948e3385 ">
                                 <p><code class="codeph">unescapeURI（）</code></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d157948e3412 d157948e3388 ">
                                 <p>从给定的URI中删除转义。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d157948e3420" headers="d157948e3385 ">
                                 <p><code class="codeph">registerURLHandler（）</code></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d157948e3420 d157948e3388 ">
                                 <p>注册特定类型名称以处理特定URL。这由<code class="codeph">getURI()</code>调用以生成该类型的实例。
                                 </p>
                                 <p>布尔参数可用于指示在调用适当的类型构造函数之前必须剥离前缀。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d157948e3433" headers="d157948e3385 ">
                                 <p><code class="codeph">unregisterURLHandler（）</code></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d157948e3433 d157948e3388 ">
                                 <p>取消注册URL处理程序。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>特别值得注意的是，你可以用包<code class="codeph">URIFACTORY</code>定义类型的新亚型<code class="codeph">URIType</code> 。然后，您可以使用这些子类型来提供URI的专门处理。特别是，你可以定义<code class="codeph">URIType</code>对应于特定协议亚型- <code class="codeph">URIFACTORY</code>然后识别并相应地处理这些亚型的实例。
                  </p>
                  <p>定义新类型和创建特定于新类型的数据库列具有以下优点：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>它为列提供隐式<span class="italic">约束</span>以仅包含这些类型的实例。这对于在特定协议的列上实现专用索引非常有用。例如，对于DBUri，您可以实现直接从磁盘块获取数据的专用索引，而不是执行SQL查询。
                        </p>
                     </li>
                     <li>
                        <p>根据类型，您可以对不同的列具有不同的约束。例如，对于HTTPUri，您可以在列上定义代理和防火墙约束，以便通过HTTP进行的任何访问都使用代理服务器。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-6CF03290-E943-4BD5-BA0C-BB9A6634FF4A">使用包URIFACTORY注册新的URIType子类型</a><br>要提供URI的专门处理，请定义并注册新的URIType子类型。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="您可以在数据库中生成和存储URI，并使用它们来检索它们所针对的数据库数据。您可以使用这种方式使用三种URI：DBUris，XDBUris和HTTPUris。">使用URI进行数据访问</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5263"></a><a id="ADXDB5262"></a><div class="props_rev_3"><a id="GUID-6CF03290-E943-4BD5-BA0C-BB9A6634FF4A" name="GUID-6CF03290-E943-4BD5-BA0C-BB9A6634FF4A"></a><h4 id="ADXDB-GUID-6CF03290-E943-4BD5-BA0C-BB9A6634FF4A" class="sect4"><span class="enumeration_section">32.7.1</span>使用包URIFACTORY注册新的URIType子类型</h4>
                  <div>
                     <p>要提供URI的专门处理，请定义并注册新的URIType子类型。</p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>使用SQL语句<code class="codeph">CREATE TYPE</code>创建新类型。该类型必须实现PL / SQL方法<code class="codeph">createURI()</code> 。
                              </p>
                           </li>
                           <li>
                              <p>（可选）覆盖默认方法，以在检索数据或在显示XML数据之前转换XML数据时执行专门处理。</p>
                           </li>
                           <li>
                              <p>选择新的URI前缀，以标识使用此专门处理的URI。</p>
                           </li>
                           <li>
                              <p>使用PL / SQL方法<code class="codeph">registerURLHandler()</code>注册新前缀，以便<code class="codeph">URIFACTORY</code>包在接收到以您定义的新前缀开头的URI时可以创建新子类型的实例。
                              </p>
                           </li>
                        </ol>
                        <p>定义新子类型后， <code class="codeph">URIFACTORY</code>方法会识别带有新前缀的URI，您可以创建和使用新类型的实例。
                        </p>
                        <p>例如，假设您定义了一个新的协议前缀<code class="codeph">ecom://</code> ，并定义了一个<code class="codeph">URIType</code>的子类型来处理它。也许新的子类型为PL / SQL方法<code class="codeph">getCLOB()</code>实现了一些特殊的逻辑，或者它可能在方法<code class="codeph">getXML()</code>对XML标签或数据进行了一些更改。在使用<code class="codeph">URIFACTORY</code>注册前缀<code class="codeph">ecom://</code> <code class="codeph">URIFACTORY</code> ，对<code class="codeph">getURI()</code>的调用会为具有该前缀的URI生成新<code class="codeph">URIType</code>子类型的实例。
                        </p>
                        <p><a href="data-access-using-URIs.html#GUID-6CF03290-E943-4BD5-BA0C-BB9A6634FF4A__CBAHBBAG">例32-12</a>创建了一个新类型<code class="codeph">ECOMURIType</code>来处理新协议<code class="codeph">ecom://</code> 。该示例在单个表中存储三种不同类型的URI：HTTPUri，DBUri和新类型的实例<code class="codeph">ECOMURIType</code> 。要运行此示例，您需要定义每个<code class="codeph">ECOMURIType</code>成员函数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6CF03290-E943-4BD5-BA0C-BB9A6634FF4A__CBAHBBAG">
                        <p class="titleinexample">例32-12 URIFACTORY：注册ECOM协议</p><pre class="pre codeblock"><code>CREATE TABLE url_tab（urlcol varchar2（80））;表创建。- 插入HTTP URL引用INSERT INTO url_tab VALUES（'http://www.oracle.com/'）;已创建1行。- 插入DBUri INSERT INTO url_tab VALUES（'/ oradb / HR / EMPLOYEES / ROW [FIRST_NAME =“Jack”]'）;已创建1行。- 创建一个新类型来处理名为ecom的新协议：//这只是一个示例模板。为此，必须指定这些函数的实现。在SYS.URIType下创建或替换类型ECOMURIType（覆盖成员函数getCLOB返回CLOB，覆盖成员函数getBLOB返回BLOB，覆盖成员函数getExternalURL RETURN VARCHAR2，覆盖成员函数getURI RETURN VARCHAR2， - 必须具有这个用于注册URL处理程序STATIC FUNCTION createURI（url IN VARCHAR2）RETURN ECOMURIType）; /  - 为ecom注册一个新的处理程序：//前缀BEGIN  - 处理程序类型名称是ECOMURIType; schema是HR  - 忽略前缀大小写，以便URIFACTORY创建相同的子类型 - 对于以ECOM：//，ecom：//，eCom：//开头的URI，依此类推。- 在调用PL / SQL方法createURI（）之前去除前缀，以便字符串'ecom：//'不存储在 -  ECOMURIType对象中。- 当您调用ECOMURIType.getURI（）时会自动添加它。URIFACTORY.registerURLHandler（prefix =&gt;'ecom：//'，schemaname =&gt;'HR'，typename =&gt;'ECOMURITYPE'，ignoreprefixcase =&gt; TRUE，stripprefix =&gt; TRUE）;结束; / PL / SQL过程成功完成。- 将这种新类型的URI插入表INSERT INTO url_tab VALUES（'ECOM：// company1 / company2 = 22 / comp'）;已创建1行。- 使用工厂为表中的每个URI生成相应的子类型实例。- 您需要定义成员函数才能使其工作：SELECT urifactory.getURI（urlcol）FROM url_tab; - 这将生成：HTTPURIType（'www.oracle.com'）; -  HTTPUri DBURIType（'/ oradb / HR / EMPLOYEES / ROW [FIRST_NAME =“Jack”]'，null）; -  DBUri ECOMURIType（'company1 / company2 = 22 / comp'）; - 一个ECOMURIType实例</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6" title="您可以定义与特定协议对应的URIType子类型。您可以使用PL / SQL包URIFACTORY获取URIType实例的URI，转义URI字符串中的字符或删除此类转义，并注册或取消注册用于处理给定URL的类型名称。">使用包URIFACTORY创建URIType的新子类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5265"></a><a id="ADXDB5266"></a><a id="ADXDB5264"></a><div class="props_rev_3"><a id="GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82" name="GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82"></a><h3 id="ADXDB-GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82" class="sect3"><span class="enumeration_section">32.8</span> SYS_DBURIGEN SQL函数</h3>
               <div>
                  <p>您可以通过向构造函数<code class="codeph">DBURIType</code>或适当的<code class="codeph">URIFACTORY</code> PL / SQL方法提供XPath表达式来创建<code class="codeph">DBURIType</code> 。使用Oracle SQL函数<code class="codeph">sys_DburiGen</code> ，您也可以使用<span class="italic">由</span>数据库列及其值<span class="italic">组成</span>的<span class="italic">XPath</span>创建DBUri。
                  </p>
                  <p>Oracle SQL函数<code class="codeph">sys_DburiGen</code>将一个或多个数据库列或属性以及可选的rowid作为其参数，并生成以特定列或行对象为目标的DBUri。函数<code class="codeph">sys_DburiGen</code>接受一个附加参数，指示是否需要节点的文本值。请参<a href="data-access-using-URIs.html#GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82__I1030921">见图32-2</a> 。
                  </p>
                  <div class="figure" id="GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82__I1030921">
                     <p class="titleinfigure">图32-2 SYS_DBURIGEN语法</p><img src="img/sys_dburigen.gif" width="509" alt="下面是图32-2的描述" title="下面是图32-2的描述" longdesc="img_text/sys_dburigen.html"><br><a href="img_text/sys_dburigen.html">“图32-2 SYS_DBURIGEN语法”的说明</a></div>
                  <!-- class="figure" -->
                  <p>引用的所有列或属性必须位于同一个表中。它们必须各自引用唯一值。如果指定多个列，则初始列标识该行，最后一列标识该行中的列。如果未指定数据库模式，则表名称将被解释为公共同义词。</p>
                  <div class="infoboxnotealso" id="GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82__GUID-8C68C7EC-9122-41D6-AF87-D409F74CC015">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../sqlrf/SYS_DBURIGEN.html#SQLRF06118" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                  </div>
                  <p><a href="data-access-using-URIs.html#GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82__CBAHAHIB">例32-13</a>使用Oracle SQL函数<code class="codeph">sys_DburiGen</code>来产生的DBUri靶向列<code class="codeph">email</code>表<code class="codeph">HR.employees</code>其中<code class="codeph">employee_id</code>为<code class="codeph">206</code> ：</p>
                  <div class="example" id="GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82__CBAHAHIB">
                     <p class="titleinexample">示例32-13 SYS_DBURIGEN：生成以列为目标的DBUri</p><pre class="oac_no_warn" dir="ltr">SELECT sys_DburiGen（employee_id，email）FROM employees WHERE employee_id = 206; SYS_DBURIGEN（EMPLOYEE_ID，EMAIL）（URL，SPARE）--------------------------------------- ---------------------------- DBURITYPE（'/ PUBLIC / EMPLOYEES / ROW [EMPLOYEE_ID =“206”] / EMAIL'，NULL）选择了1行。</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-13C7A746-93C5-47A6-8E7B-43A019E45E37">将列或对象属性传递给SYS_DBURIGEN的规则</a><br>传递给Oracle SQL函数<code class="codeph">sys_DburiGen</code>列或属性必须遵守某些规则。
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB">使用SQL函数SYS_DBURIGEN：示例</a><br>提供的示例使用SQL函数<code class="codeph">sys_DburiGen</code>插入数据库引用，从大列返回部分结果，并将URL返回到插入的对象。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="您可以在数据库中生成和存储URI，并使用它们来检索它们所针对的数据库数据。您可以使用这种方式使用三种URI：DBUris，XDBUris和HTTPUris。">使用URI进行数据访问</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5268"></a><a id="ADXDB5267"></a><div class="props_rev_3"><a id="GUID-13C7A746-93C5-47A6-8E7B-43A019E45E37" name="GUID-13C7A746-93C5-47A6-8E7B-43A019E45E37"></a><h4 id="ADXDB-GUID-13C7A746-93C5-47A6-8E7B-43A019E45E37" class="sect4"><span class="enumeration_section">32.8.1</span>将列或对象属性传递给SYS_DBURIGEN的规则</h4>
                  <div>
                     <p>传递给Oracle SQL函数<code class="codeph">sys_DburiGen</code>列或属性必须遵守某些规则。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic">相同表：</span>函数<code class="codeph">sys_DburiGen</code>引用的所有列必须来自同一个表或视图。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">唯一映射：</span>列或对象属性必须唯一地可映射回其所来自的表或视图。允许的唯一虚拟列是使用<code class="codeph">value</code>或<code class="codeph">ref</code>生成的列。该列可以来自带有SQL <code class="codeph">TABLE</code>集合表达式的子查询，即<code class="codeph">TABLE(...)</code> ，也可以来自内联视图（只要内联视图不重命名列）。
                           </p>
                           <p>有关SQL <code class="codeph">TABLE</code>集合表达式的信息，请参见<a href="../sqlrf/SELECT.html#SQLRF30047" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">键列：</span>必须指定rowid或一组键列。只要列唯一标识结果中的特定行，就不需要将键列列表声明为唯一键或主键。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold"><code class="codeph">PUBLIC</code></span> <span class="italic">元素：</span>如果rowid或键列所针对的表或视图未指定数据库模式，则使用<code class="codeph">PUBLIC</code>关键字。访问DBUri时，表名解析为创建DBUri时该名称可见的同一个表，同义词或数据库视图。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">可选的</span> <span class="bold"><code class="codeph">text()</code></span> <span class="italic">参数：</span>默认情况下， <code class="codeph">DBURIType</code>构造XML文档。使用<code class="codeph">text()</code>作为<code class="codeph">sys_DburiGen</code>的第三个参数来创建一个以文本节点为目标的DBUri（没有XML元素）。例如：</p><pre class="oac_no_warn" dir="ltr">SELECT sys_DburiGen（employee_id，last_name，'text（）'）FROM hr.employees，WHERE employee_id = 200;</pre><p>这将使用以下URI构造DBUri：</p><pre class="oac_no_warn" dir="ltr">/ HR / EMPLOYEES / ROW [EMPLOYEE_ID = 200] / LAST_NAME /文本（）</pre></li>
                        <li>
                           <p><span class="italic">单列参数：</span>如果存在单列参数，则该列将用作标识行和引用列的键列。
                           </p>
                        </li>
                     </ul>
                     <p><a href="data-access-using-URIs.html#GUID-13C7A746-93C5-47A6-8E7B-43A019E45E37__CBAHEEEI">例32-14中</a>的查询使用<code class="codeph">employee_id</code>作为键列和引用列。它生成一个DBUri，以<code class="codeph">employee_id</code> 200为目标。
                     </p>
                     <div class="example" id="GUID-13C7A746-93C5-47A6-8E7B-43A019E45E37__CBAHEEEI">
                        <p class="titleinexample">示例32-14将具有单个参数的列传递给SYS_DBURIGEN</p><pre class="oac_no_warn" dir="ltr">SELECT sys_DburiGen（employee_id）FROM employees WHERE employee_id = 200; SYS_DBURIGEN（EMPLOYEE_ID）（URL，SPARE）------------------------------------- DBURITYPE（'/ PUBLIC / EMPLOYEES / ROW [EMPLOYEE_ID =''200''] / EMPLOYEE_ID'，NULL）选择1行。</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82" title="您可以通过向构造函数DBURIType或适当的URIFACTORY PL / SQL方法提供XPath表达式来创建DBUri。使用Oracle SQL函数sys_DburiGen，您也可以使用由数据库列及其值组成的XPath创建DBUri。">SYS_DBURIGEN SQL函数</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5269"></a><div class="props_rev_3"><a id="GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB" name="GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB"></a><h4 id="ADXDB-GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB" class="sect4"><span class="enumeration_section">32.8.2</span>使用SQL函数SYS_DBURIGEN：示例</h4>
                  <div>
                     <p>提供的示例使用SQL函数<code class="codeph">sys_DburiGen</code>插入数据库引用，从大列返回部分结果，并将URL返回到插入的对象。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-4F147081-D1CB-4BBA-843B-7A14931BD907">使用SYS__DBURIGEN插入数据库引用</a><br>您可以使用SQL函数<code class="codeph">sys_DburiGen</code>插入引用特定数据库数据的DBUris。一个例子说明了这一点
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730">使用SYS__DBURIGEN返回部分结果</a><br>从大列中选择数据时，有时可能只想检索结果的一部分，并创建一个提供对完整列的访问的URL。
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-37E24B75-9E1A-425F-B98A-451A7C713F9B">使用SYS_DBURIGEN将URL返回到插入的对象</a><br>您可以使用Oracle SQL函数<code class="codeph">sys_DburiGen</code>中<code class="codeph">RETURNING</code> DML语句的条款，因为它插入到检索对象的网址。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82" title="您可以通过向构造函数DBURIType或适当的URIFACTORY PL / SQL方法提供XPath表达式来创建DBUri。使用Oracle SQL函数sys_DburiGen，您也可以使用由数据库列及其值组成的XPath创建DBUri。">SYS_DBURIGEN SQL函数</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5270"></a><div class="sect4"><a id="GUID-4F147081-D1CB-4BBA-843B-7A14931BD907" name="GUID-4F147081-D1CB-4BBA-843B-7A14931BD907"></a><h5 id="ADXDB-GUID-4F147081-D1CB-4BBA-843B-7A14931BD907" class="sect5"><span class="enumeration_section">32.8.2.1</span>使用SYS__DBURIGEN插入数据库引用</h5>
                     <div>
                        <p>您可以使用SQL函数<code class="codeph">sys_DburiGen</code>插入引用特定数据库数据的DBUris。一个例子说明了这一点
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-4F147081-D1CB-4BBA-843B-7A14931BD907__GUID-85D75149-429A-4470-8142-708E15E2AB0A">
                           <p class="titleinexample">示例32-15使用SYS_DBURIGEN插入数据库引用</p><pre class="pre codeblock"><code>CREATE TABLE doc_list_tab（docno NUMBER PRIMARY KEY，doc_ref SYS.DBURIType）;表创建。- 使用employee_id = 177插入以该行为目标的DBUri INSERT INTO doc_list_tab VALUES（1001，（SELECT sys_DburiGen（rowid，employee_id）FROM employees WHERE employee_id = 177））;已创建1行。- 插入一个DBUri，其目标是表雇员的last_name列INSERT INTO doc_list_tab VALUES（1002，（SELECT sys_DburiGen（employee_id，last_name）FROM employees WHERE employee_id = 177））;已创建1行。SELECT * FROM doc_list_tab; DOCNO ---------- DOC_REF（URL，SPARE）--------------------------------- -------------------- 1001 DBURITYPE（'/ PUBLIC / EMPLOYEES / ROW [ROWID =''AAAQCcAAFAAAABSABN''] / EMPLOYEE_ID'，NULL）1002 DBURITYPE（'/ PUBLIC / EMPLOYEES / ROW [EMPLOYEE_ID =''177''] / LAST_NAME'，NULL）选择了2行。</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB" title="提供的示例使用SQL函数sys_DburiGen插入数据库引用，从大列返回部分结果，并将URL返回到插入的对象。">使用SQL函数SYS_DBURIGEN：示例</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5272"></a><a id="ADXDB5912"></a><a id="ADXDB5913"></a><a id="ADXDB5911"></a><div class="props_rev_3"><a id="GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730" name="GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730"></a><h5 id="ADXDB-GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730" class="sect5"><span class="enumeration_section">32.8.2.2</span>使用SYS__DBURIGEN返回部分结果</h5>
                     <div>
                        <p>从大列中选择数据时，有时可能只想检索结果的一部分，并创建一个提供对完整列的访问的URL。</p>
                        <div class="section">
                           <p>例如，考虑旅行故事网站的情况。如果旅行故事存储在表格中并且用户搜索一组相关故事，则您不希望在搜索结果页面中列出每个故事。相反，您可能只显示每个故事的前20个字符，以表示要点，然后返回完整故事的URL。这可以按如下方式完成：</p>
                           <p><a href="data-access-using-URIs.html#GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730__CBAFABCA">例32-16</a>创建了旅行故事表。
                           </p>
                           <p><a href="data-access-using-URIs.html#GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730__CBAGCAJC">例32-17</a>创建了一个只返回故事中前20个字符的函数。
                           </p>
                           <p><a href="data-access-using-URIs.html#GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730__CBAGFCHF">示例32-18</a>创建了一个视图，该视图仅选择旅行故事中的前20个字符，并将DBUri返回到故事列。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730__CBAFABCA">
                           <p class="titleinexample">示例32-16创建旅行故事表</p><pre class="pre codeblock"><code>CREATE TABLE travel_story（story_name VARCHAR2（100），故事CLOB）;表创建。INSERT INTO travel_story VALUES（'埃及'，'这是我在埃及时间的故事......“）;已创建1行。
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730__CBAGCAJC">
                           <p class="titleinexample">例32-17返回前20个字符的函数</p><pre class="pre codeblock"><code>CREATE或REPLACE FUNCTION charfunc（clobval IN CLOB）RETURN VARCHAR2 IS res VARCHAR2（20）;金额NUMBER：= 20; BEGIN DBMS_LOB.read（clobval，amount，1，res）;返回资源;结束; /功能已创建。
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730__CBAGFCHF">
                           <p class="titleinexample">示例32-18创建用于SYS_DBURIGEN的旅行视图</p><pre class="pre codeblock"><code>创建或替换视图travel_view AS SELECT story_name，charfunc（story）short_story，sys_DburiGen（story_name，story，'text（）'）story_link FROM travel_story;查看已创建。SELECT * FROM travel_view; STORY_NAME ---------- SHORT_STORY ----------- STORY_LINK（URL，SPARE）--------------------- - 埃及这是DBURITYPE的故事（'/ PUBLIC / TRAVEL_STORY / ROW [STORY_NAME =''Egypt''] / STORY / text（）'，NULL）选择1行。</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB" title="提供的示例使用SQL函数sys_DburiGen插入数据库引用，从大列返回部分结果，并将URL返回到插入的对象。">使用SQL函数SYS_DBURIGEN：示例</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5274"></a><a id="ADXDB5914"></a><div class="props_rev_3"><a id="GUID-37E24B75-9E1A-425F-B98A-451A7C713F9B" name="GUID-37E24B75-9E1A-425F-B98A-451A7C713F9B"></a><h5 id="ADXDB-GUID-37E24B75-9E1A-425F-B98A-451A7C713F9B" class="sect5"><span class="enumeration_section">32.8.2.3</span>使用SYS_DBURIGEN将URL返回到插入的对象</h5>
                     <div>
                        <p>您可以使用Oracle SQL函数<code class="codeph">sys_DburiGen</code>中<code class="codeph">RETURNING</code> DML语句的条款，因为它插入到检索对象的网址。
                        </p>
                        <div class="section">
                           <p>在<a href="data-access-using-URIs.html#GUID-37E24B75-9E1A-425F-B98A-451A7C713F9B__CBAFEDEH">示例32-19中</a> ，只要将文档插入表<code class="codeph">clob_tab</code> ，其URL就会插入到表<code class="codeph">uri_tab</code> 。这是使用Oracle SQL函数完成<code class="codeph">sys_DburiGen</code>中<code class="codeph">RETURNING</code>的条款<code class="codeph">INSERT</code>语句。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-37E24B75-9E1A-425F-B98A-451A7C713F9B__CBAFEDEH">
                           <p class="titleinexample">示例32-19在RETURNING子句中使用SYS_DBURIGEN检索URL</p><pre class="pre codeblock"><code>CREATE TABLE clob_tab（docid NUMBER，doc CLOB）;表创建。CREATE TABLE uri_tab（docs SYS.DBURIType）;表创建。
</code></pre><p>在PL / SQL中，使用<code class="codeph">RETURNING</code>子句和<code class="codeph">EXECUTE IMMEDIATE</code>指定插入文档的URL的存储作为插入操作的一部分：</p><pre class="pre codeblock"><code>DECLARE ret SYS.DBURIType; BEGIN  - 执行插入操作并获取URL EXECUTE IMMEDIATE'INSERT INTO clob_tab VALUES（1，''TEMP CLOB TEST''）返回sys_DburiGen（docid，doc，''text（）''）INTO：1'RETURNING INTO RET; - 将URL插入uri_tab INSERT INTO uri_tab VALUES（ret）;结束; / SELECT e.docs.getURL（）FROM hr.uri_tab e; E.DOCS.GETURL（）------------------------------------------- ----- / ORADB / PUBLIC / CLOB_TAB / ROW [DOCID ='1'] / DOC / text（）选择1行。</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB" title="提供的示例使用SQL函数sys_DburiGen插入数据库引用，从大列返回部分结果，并将URL返回到插入的对象。">使用SQL函数SYS_DBURIGEN：示例</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB5277"></a><a id="ADXDB5275"></a><div class="props_rev_3"><a id="GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" name="GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3"></a><h3 id="ADXDB-GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" class="sect3"><span class="enumeration_section">32.9</span> DBUriServlet</h3>
               <div>
                  <p>您可以使用Oracle XML DB HTTP服务器检索存储库资源。Oracle数据库还包括一个servlet <strong class="term">DBUriServlet</strong> ，它通过HTTP（S）URL提供任何类型的数据库数据。数据可以以纯文本，HTML或XML格式返回。</p>
                  <p>Web客户端或应用程序无需使用SQL或专用数据库API即可访问此类数据。您可以通过在网页上链接数据或通过Java，PL / SQL和Perl的HTTP感知API请求数据来检索数据。您可以使用Web浏览器或支持XML的电子表格等应用程序显示或处理数据。DBUriServlet可以生成或不生成XML数据的内容，并且可以使用XSLT样式表转换结果。</p>
                  <p>通过使用由servlet地址（URL）和DBUri URI组成的URI，可以使Web数据库数据可通过Web访问，该URI指定要检索的数据库数据。这是语法，其中<code class="codeph">http://</code> <span class="italic"><code class="codeph">server:port</code></span>是servlet的URL（服务器和端口）， <code class="codeph">/oradb/</code> <span class="italic"><code class="codeph">database_schema</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">table</code></span>是DBUri URI（可以使用任何DBUri URI）：</p><pre class="oac_no_warn" dir="ltr">http：// <span class="italic">server</span> ： <span class="italic">port</span> / <span class="bold">oradb</span> / <span class="italic">database_schema</span> <span class="italic">/</span> <span class="italic">table</span>
</pre><p>在servlet的URL中使用XPath表示法时，可能需要转义某些字符。您可以使用<code class="codeph">URIType</code> PL / SQL方法<code class="codeph">getExternalURL()</code>来执行此操作。
                  </p>
                  <p>您可以使用<code class="codeph">DBUriServlet</code> （它是作为Oracle XML DB的一部分预先安装），也可以编写自己的servlet引擎上运行的servlet。servlet读取调用URL的URI部分，使用该URI创建DBUri，调用<code class="codeph">URIType</code> PL / SQL方法来检索数据，并以Web页面，XML文档或简单形式返回值。文本文件。
                  </p>
                  <p>要使用的MIME类型通过URI指定给servlet：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>默认情况下，servlet生成MIME类型<code class="codeph">text/xml</code>和<code class="codeph">text/plain</code> 。如果DBUri路径以<code class="codeph">text()</code>结尾，则使用<code class="codeph">text/plain</code> 。否则，将生成MIME类型为<code class="codeph">text/xml</code>的XML文档。
                        </p>
                     </li>
                     <li>
                        <p>您可以使用servlet的<code class="codeph">contenttype</code>参数覆盖默认MIME类型，将其设置为<code class="codeph">binary/x-jpeg</code>或其他值。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3__GUID-68CB0AAD-629F-471F-91B1-36C3DE92A4BC">
                     <p class="notep1">也可以看看：</p>
                     <p>有关Oracle XML DB servlet的信息， <a href="how-to-write-XML-DB-applications-in-Java.html#GUID-C6EABC36-3FA8-4A82-B940-C20A01D8F586" title="提供了使用Java编写Oracle XML DB应用程序的设计指南。这包括为Oracle XML DB编写和配置Java servlet的准则。">请参见Java XML XML DB应用程序指南</a></p>
                  </div>
                  <p><a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3__G1049621" title="此表描述了DBUri Servlet可选参数。">表32-3</a>描述了可以传递给DBUriServlet以自定义其输出的每个可选URL参数。
                  </p>
                  <div class="tblformal" id="GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3__G1049621">
                     <p class="titleintable">表32-3 DBUriServlet：可选参数</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBUriServlet：可选参数" width="100%" border="1" summary="This table describes the DBUri Servlet optional arguments." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="15%" id="d157948e4330">争论</th>
                              <th align="left" valign="bottom" width="85%" id="d157948e4333">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d157948e4338" headers="d157948e4330 "><pre class="oac_no_warn" dir="ltr">rowsettag</pre></td>
                              <td align="left" valign="top" width="85%" headers="d157948e4338 d157948e4333 ">
                                 <p>更改XML文档的默认根标记名称。例如：</p><pre class="oac_no_warn" dir="ltr">http：// <span class="italic">server</span> ：8080 / oradb / HR / EMPLOYEES <span class="bold">？rowsettag = OracleEmployees</span></pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d157948e4352" headers="d157948e4330 "><pre class="oac_no_warn" dir="ltr">内容类型</pre></td>
                              <td align="left" valign="top" width="85%" headers="d157948e4352 d157948e4333 ">
                                 <p>指定生成的文档的MIME类型。例如：</p><pre class="oac_no_warn" dir="ltr">http：// <span class="italic">server</span> ：8080 / oradb / HR / EMPLOYEES <span class="bold">？contenttype = text / plain</span></pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d157948e4366" headers="d157948e4330 "><pre class="oac_no_warn" dir="ltr">转变</pre></td>
                              <td align="left" valign="top" width="85%" headers="d157948e4366 d157948e4333 ">
                                 <p>将URL传递给<code class="codeph">URIFACTORY</code> ，后者检索该位置的XSLT样式表。然后将此样式表应用于servlet返回的XML文档。例如：</p><pre class="oac_no_warn" dir="ltr">http：// <span class="italic">server</span> ：8080 / oradb / HR / EMPLOYEES <span class="bold">？transform =</span> <span class="bold">/ oradb / QUINE / XSLS / DOC / text（）</span> ＆contenttype = text / html <a id="fn_1" name="fn_1" href="#fn_1" this="" url="" is="" split="" across="" two="" lines="" for="" the="" purpose="" of="" documentation=")" ="" onclick="footdisplay(1, "><sup>Foot 1</sup></a></pre></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p>为了文档的目的，此URL分为两行。</p>
                  <p></p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-E0DD3BB9-4CD5-4037-AD0D-90BCF3325076">使用URL覆盖MIME类型</a><br>您可以使用将不同MIME类型传递给servlet的URL作为<code class="codeph">contenttype</code>参数来覆盖MIME内容类型。
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8">自定义DBUriServlet</a><br>要自定义DBUriServlet，请修改Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code> 。
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-A439EB9D-7733-4B73-B323-7D33753755A2">将角色用于DBUriServlet安全性</a><br>Servlet安全性由Oracle数据库使用角色处理。当用户登录到servlet时，他们使用他们的数据库用户名和密码。servlet检查以确保用户日志记录具有使用参数<code class="codeph">security-role-ref</code>在配置文件中指定的角色之一。
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15">配置包URIFACTORY来处理DBUris</a><br>为了提高效率，您可以教<code class="codeph">URIFACTORY</code> ，给定表单的URI表示数据库访问，因此应该实现为DBUri，而不是HTTPUri。您可以通过将URI的处理程序注册为前缀来指定<code class="codeph">DBURIType</code>作为要生成的实例的类型。
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-D5E47EC0-CD19-4485-85A0-3C850FB02F87">使用DBUri Servlet从Web浏览器进行表或视图访问</a><br>Oracle XML DB包含DBUri servlet，它允许您直接从Web浏览器访问任何表或视图的内容。它使用<code class="codeph">DBURIType</code>从表内容生成一个简单的XML文档。servlet是基于C语言的，并安装在Oracle XML DB HTTP服务器中。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="您可以在数据库中生成和存储URI，并使用它们来检索它们所针对的数据库数据。您可以使用这种方式使用三种URI：DBUris，XDBUris和HTTPUris。">使用URI进行数据访问</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5915"></a><div class="props_rev_3"><a id="GUID-E0DD3BB9-4CD5-4037-AD0D-90BCF3325076" name="GUID-E0DD3BB9-4CD5-4037-AD0D-90BCF3325076"></a><h4 id="ADXDB-GUID-E0DD3BB9-4CD5-4037-AD0D-90BCF3325076" class="sect4"><span class="enumeration_section">32.9.1</span>使用URL覆盖MIME类型</h4>
                  <div>
                     <p>您可以使用将不同MIME类型传递给servlet的URL作为<code class="codeph">contenttype</code>参数来覆盖MIME内容类型。
                     </p>
                     <div class="section">
                        <p>要检索表<code class="codeph">employee</code>列<code class="codeph">employee_id</code> ，可以使用以下URL之一，其中计算机<span class="italic"><code class="codeph">server.oracle.com</code></span>运行Oracle数据库，其中Web服务侦听端口8080上的请求。步骤<code class="codeph">oradb</code>是映射到servlet的虚拟路径。
                        </p>
                        <ul style="list-style-type:disc">
                           <li><pre class="pre codeblock"><code>http：// <span class="italic">server.oracle.com:8080</span> / oradb / QUINE / A / ROW [B = 200] / C / text（）</code></pre><p>生成text / plain的内容类型</p>
                           </li>
                           <li><pre class="pre codeblock"><code>http：// <span class="italic">server.oracle.com:8080</span> / oradb / QUINE / A / ROW [B = 200] / C</code></pre><p>生成text / xml的内容类型</p>
                           </li>
                        </ul>
                        <p>要覆盖内容类型，可以使用将<code class="codeph">text/html</code>作为<code class="codeph">contenttype</code>参数传递给servlet的<code class="codeph">contenttype</code> ：</p>
                        <ul style="list-style-type:disc">
                           <li><pre class="pre codeblock"><code>http：// <span class="italic">server.oracle.com:8080</span> / oradb / QUINE / A / ROW [B = 200] / C <span class="bold">？的contentType = text / html的</span></code></pre><p>生成text / html的内容类型</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="您可以使用Oracle XML DB HTTP服务器检索存储库资源。Oracle数据库还包括一个servlet DBUriServlet，它通过HTTP（S）URL提供任何类型的数据库数据。数据可以以纯文本，HTML或XML格式返回。">DBUriServlet</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5279"></a><a id="ADXDB5278"></a><div class="props_rev_3"><a id="GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8" name="GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8"></a><h4 id="ADXDB-GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8" class="sect4"><span class="enumeration_section">32.9.2</span>自定义DBUriServlet</h4>
                  <div>
                     <p>要自定义DBUriServlet，请修改Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code> 。
                     </p>
                     <div class="section">
                        <p>您可以使用带有WebDAV，FTP，Oracle Enterprise Manager或PL / SQL的数据库架构（用户帐户） <code class="codeph">XDB</code>编辑Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code> 。要使用FTP或WebDAV更新文件，请下载文档，编辑文档并将其保存回数据库。PL / SQL包<code class="codeph">DBMS_XDB_CONFIG</code>提供了一种访问文件的特别方便的方法，它提供了执行特定配置修改的子程序。例如，您可以使用<code class="codeph">DBMS_XDB_CONFIG.deleteservletmapping</code>来删除servlet映射。
                        </p>
                        <p>DBUriServlet安装在<code class="codeph">/oradb/*</code> ，它是<code class="codeph">xdbconfig.xml</code>的<code class="codeph">servlet-pattern</code>标记中指定的地址。星号（ <code class="codeph">*</code> ）是表示<code class="codeph">oradb</code>任何路径都要映射到同一个servlet所必需的。 <code class="codeph">oradb</code>作为虚拟路径发布。您可以更改用于访问servlet的路径。
                        </p>
                        <p>在<a href="data-access-using-URIs.html#GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8__CBABGAJC">例32-20中</a> ，修改配置文件以在<code class="codeph">/dburi/*</code>下安装DBUriServlet。（为了记录目的，已将long XPath表达式拆分为此处。它实际上需要在一条线上。）
                        </p>
                        <p>安全参数，servlet显示名称和描述也可以在配置文件<code class="codeph">xdbconfig.xml</code>自定义。可以通过删除servlet模式来删除servlet。这也可以使用XQuery Update将servlet-mapping元素更新为<code class="codeph">NULL</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8__GUID-BFD55169-7D75-4BC9-A37F-616D9BE0877F">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../dbseg/managing-security-for-oracle-database-users.html#DBSEG-GUID-D3770171-8E64-461C-92A4-045248EE42E1" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8__CBABGAJC">
                        <p class="titleinexample">示例32-20更改DBUriServlet的安装位置</p><pre class="oac_no_warn" dir="ltr">DECLARE doc XMLType; doc2 XMLType; BEGIN doc：= DBMS_XDB_CONFIG.cfg_get（）; SELECT XMLQuery（'declare default element namespace“http://xmlns.oracle.com/xdb/xdbconfig.xsd”;在$ i / xdbconfig / sysconfig / protocolconfig / httpconfig / webappconfig中复制$ i：= $ doc修改$ j / servletconfig / servlet-mappings <a id="fn_2" name="fn_2" href="#fn_2" this="" xquery="" expression="" is="" split="" across="" two="" lines="" only="" for="" the="" purpose="" of="" documentation=")" ="" onclick="footdisplay(2, "><sup>脚2</sup></a> / servlet-mapping [servlet-name =“DBUriServlet”] / <span class="bold">servlet-pattern</span>返回节点$ j的值替换为$ i <span class="bold">/ dburi / *</span> return $ i'PASSING DBMS_XDB_CONFIG.cfg_get（）AS “doc”返回内容）来自DUAL的doc2; DBMS_XDB_CONFIG.cfg_update（DOC2）;承诺;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="how-to-write-XML-DB-applications-in-Java.html#GUID-C6EABC36-3FA8-4A82-B940-C20A01D8F586" title="提供了使用Java编写Oracle XML DB应用程序的设计指南。这包括为Oracle XML DB编写和配置Java servlet的准则。">Java中的Oracle XML DB应用程序指南</a></li>
                           <li><a href="administration-of-XML-DB.html#GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D" title="Oracle XML DB的管理包括安装，升级和配置它。">管理Oracle XML DB</a></li>
                           <li><a href="administration-of-XML-DB.html#GUID-BCDB503F-14D1-4538-92B8-BF478B8C872C" title="您可以像访问任何其他基于XML模式的资源一样访问Oracle XML DB配置文件xdbconfig.xml。您可以使用FTP，HTTP（S），WebDAV，Oracle Enterprise Manager或任何用于Java，PL / SQL或C（OCI）的资源和文档对象模型（DOM）API。">Oracle XML DB配置API</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="您可以使用Oracle XML DB HTTP服务器检索存储库资源。Oracle数据库还包括一个servlet DBUriServlet，它通过HTTP（S）URL提供任何类型的数据库数据。数据可以以纯文本，HTML或XML格式返回。">DBUriServlet</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5281"></a><a id="ADXDB5280"></a><div class="props_rev_3"><a id="GUID-A439EB9D-7733-4B73-B323-7D33753755A2" name="GUID-A439EB9D-7733-4B73-B323-7D33753755A2"></a><h4 id="ADXDB-GUID-A439EB9D-7733-4B73-B323-7D33753755A2" class="sect4"><span class="enumeration_section">32.9.3</span>为DBUriServlet安全性使用角色</h4>
                  <div>
                     <p>Servlet安全性由Oracle数据库使用角色处理。当用户登录到servlet时，他们使用他们的数据库用户名和密码。servlet检查以确保用户日志记录具有使用参数<code class="codeph">security-role-ref</code>在配置文件中指定的角色之一。
                     </p>
                     <div class="section">
                        <p>默认情况下，servlet可用于role <code class="codeph">authenticatedUser</code> ，并且使用有效数据库密码登录servlet的任何用户都具有此角色。
                        </p>
                        <p>可以更改role参数以限制对任何特定数据库角色的访问。要从默认的<code class="codeph">authenticatedUser</code>角色更改为您已创建的角色，请修改Oracle XML DB配置文件。
                        </p>
                        <p><a href="data-access-using-URIs.html#GUID-A439EB9D-7733-4B73-B323-7D33753755A2__CBABCHAE">示例32-21</a>将缺省角色<code class="codeph">authenticatedUser</code>更改为角色<code class="codeph">servlet-users</code> （您必须已创建）。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A439EB9D-7733-4B73-B323-7D33753755A2__CBABCHAE">
                        <p class="titleinexample">示例32-21限制Servlet对数据库角色的访问</p><pre class="pre codeblock"><code>DECLARE doc XMLType; doc2 XMLType; doc3 XMLType; BEGIN doc：= DBMS_XDB_CONFIG.cfg_get（）; SELECT XMLQuery（'copy $ i：= $ p1 modify（$ i / xdbconfig / sysconfig / protocolconfig / httpconfig / webappconfig / servletconfig / <a id="fn_3" name="fn_3" href="#fn_3" this="" xquery="" expression="" is="" split="" across="" two="" lines="" only="" for="" the="" purpose="" of="" documentation=")" ="" onclick="footdisplay(3, "><sup>foot 3</sup></a> servlet-list / servlet [servlet-name =“DBUriServlet”] / security） -role-ref / <span class="bold">role-name</span>返回用$ p2替换节点$ j的值）返回$ i'PASSING DOC AS“p1”，' <span class="bold">servlet-</span> users'AS“p2”RETURNING CONTENT）INTO doc from DUAL; SELECT XMLQuery（'copy $ i：= $ p1 modify（for $ i in $ i / xdbconfig / sysconfig / protocolconfig / httpconfig / webappconfig / servletconfig / servlet-list / servlet [servlet-name =“DBUriServlet”] / security-role -ref / <span class="bold">role-link</span>返回节点$ j的值替换为$ p2）返回$ i'PASSING DOC2 AS“p1”，“ <span class="bold">servlet-users</span> ”AS“p2”返回内容）进入doc3 FROM DUAL; DBMS_XDB_CONFIG.cfg_update（doc3的）;承诺;结束; /</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="您可以使用Oracle XML DB HTTP服务器检索存储库资源。Oracle数据库还包括一个servlet DBUriServlet，它通过HTTP（S）URL提供任何类型的数据库数据。数据可以以纯文本，HTML或XML格式返回。">DBUriServlet</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5283"></a><a id="ADXDB5282"></a><div class="props_rev_3"><a id="GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15" name="GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15"></a><h4 id="ADXDB-GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15" class="sect4"><span class="enumeration_section">32.9.4</span>配置包URIFACTORY来处理DBUris</h4>
                  <div>
                     <p>为了提高效率，您可以教<code class="codeph">URIFACTORY</code> ，给定表单的URI表示数据库访问，因此应该实现为DBUri，而不是HTTPUri。您可以通过将URI的处理程序注册为前缀来指定<code class="codeph">DBURIType</code>作为要生成的实例的类型。
                     </p>
                     <div class="section">
                        <p>诸如<code class="codeph">http://</code> <span class="italic"><code class="codeph">server</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">servlets</code></span> <code class="codeph">/</code> <span class="bold"><code class="codeph">oradb</code></span>类的URL由DBUriServlet（或自定义servlet）处理。当诸如此类的URL存储为<code class="codeph">URIType</code>实例时，通常需要使用子类型<code class="codeph">DBURIType</code> ，因为此URI以数据库数据为目标。
                        </p>
                        <p>但是，如果使用PL / SQL包<code class="codeph">URIFACTORY</code>的方法创建<code class="codeph">URIType</code>实例，则默认情况下，使用的子类型是<code class="codeph">HTTPURIType</code> ，而不是<code class="codeph">DBURIType</code> 。这是因为<code class="codeph">URIFACTORY</code>只查看URI前缀，看到<code class="codeph">http://</code> ，并假设URI以网页为目标。这导致不必要的通信层次，也许还有额外的字符转换。
                        </p>
                        <p>要教<code class="codeph">URIFACTORY</code> ，给定表单的URI表示数据库访问，因此应该实现为DBUris而不是HTTPUris，您将URI的处理程序注册为前缀，指定<code class="codeph">DBURIType</code>作为要生成的实例的类型。
                        </p>
                        <p><a href="data-access-using-URIs.html#GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15__CBAHACBC">例32-22</a>有效地告诉<code class="codeph">URIFACTORY</code>任何以<code class="codeph">http://</code> <span class="italic"><code class="codeph">server</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">servlets</code></span> <code class="codeph">/oradb</code>开头的URI字符串对应于数据库访问。
                        </p>
                        <p>执行此代码后，同一会话中的所有<code class="codeph">getURI()</code>调用都会自动为前缀为<code class="codeph">http://</code> <span class="italic"><code class="codeph">server</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">servlets</code></span> <code class="codeph">/oradb</code>任何URI字符串创建DBUris。</p>
                        <div class="infoboxnotealso" id="GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15__GUID-00ECE9CF-8A1C-43A4-82FF-660F45EDE2D4">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">URIFACTORY</code>函数的信息，请<code class="codeph">URIFACTORY</code> <a href="../arpls/Database-URI-TYPEs.html#ARPLS800" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15__CBAHACBC">
                        <p class="titleinexample">示例32-22注册DBUri前缀的处理程序</p><pre class="oac_no_warn" dir="ltr">BEGIN URIFACTORY.registerURLHandler（'http：// <span class="italic">server</span> / <span class="italic">servlets</span> / oradb'，'SYS'，'DBURIType'，true，true）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="您可以使用Oracle XML DB HTTP服务器检索存储库资源。Oracle数据库还包括一个servlet DBUriServlet，它通过HTTP（S）URL提供任何类型的数据库数据。数据可以以纯文本，HTML或XML格式返回。">DBUriServlet</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4225"></a><div class="props_rev_3"><a id="GUID-D5E47EC0-CD19-4485-85A0-3C850FB02F87" name="GUID-D5E47EC0-CD19-4485-85A0-3C850FB02F87"></a><h4 id="ADXDB-GUID-D5E47EC0-CD19-4485-85A0-3C850FB02F87" class="sect4"><span class="enumeration_section">32.9.5</span>使用DBUri Servlet从Web浏览器进行表或视图访问</h4>
                  <div>
                     <p>Oracle XML DB包含DBUri servlet，它允许您直接从Web浏览器访问任何表或视图的内容。它使用<code class="codeph">DBURIType</code>从表内容生成一个简单的XML文档。servlet是基于C语言的，并安装在Oracle XML DB HTTP服务器中。
                     </p>
                     <p>默认情况下，servlet安装在虚拟目录<code class="codeph">/oradb</code> 。
                     </p>
                     <p>传递给<code class="codeph">DBUri</code> Servlet的URL是传递给<code class="codeph">DBURIType</code>的URL的扩展名。URL使用Oracle XML DB HTTP服务器的地址和端口号以及将HTTP（S）请求定向到<code class="codeph">DBUri</code> servlet的虚拟根进行<code class="codeph">DBUri</code> 。这个的默认配置是<code class="codeph">/oradb</code> 。
                     </p>
                     <p>因此，URL <code class="codeph">http://localhost:8080/oradb/HR/DEPARTMENTS</code>将返回一个XML文档，其中包含<code class="codeph">HR</code>数据库模式中<code class="codeph">DEPARTMENTS</code>表的内容。这假设Oracle XML DB HTTP服务器在端口8080上运行，DBUri servlet的虚拟根目录是<code class="codeph">/oradb</code> ，并且发出请求的用户可以访问<code class="codeph">HR</code>数据库模式。
                     </p>
                     <p><code class="codeph">DBUri</code> servlet接受允许您指定<code class="codeph">ROW</code>标记的名称和返回给客户端的文档的MIME类型的参数。
                     </p>
                     <p><code class="codeph">XMLType</code>表或视图中的内容也可以通过DBUri servlet访问。当传递给DBUri servlet的URL引用<code class="codeph">XMLType</code>表或<code class="codeph">XMLType</code>视图时，可以使用XPath表达式扩展URL，该表达式可以确定返回表或行中的哪些文档。附加到URL的XPath表达式可以引用文档中的任何节点。
                     </p>
                     <p>DBUri servlet生成的XML可以使用Oracle XML DB中内置的XSLT处理器进行转换。这使得DBUri servlet生成的XML能够以更清晰的格式呈现，例如HTML。</p>
                     <p>通过将转换参数指定为传递给DBUri servlet的URL的一部分来启动XSLT样式表处理。使用引用数据库中样式表位置的URI指定样式表。URI可以是标识表或视图中的<code class="codeph">XMLType</code>列的<code class="codeph">DBURIType</code>值，也可以是存储在Oracle XML DB Repository中的文档的路径。样式表在返回到客户端之前直接应用于生成的XML。使用DBUri servlet进行XSLT处理时，最好使用<code class="codeph">contenttype</code>参数显式指定生成的输出的MIME类型。
                     </p>
                     <p>如果要转换的XML文档存储为基于XML模式的<code class="codeph">XMLType</code>实例，那么Oracle XML DB可以通过利用延迟加载的虚拟DOM的功能来减少与XSL转换相关的开销。</p>
                     <p>URL的根是<code class="codeph">/oradb</code> ，因此URL被传递到DBUri servlet，该servlet访问<code class="codeph">SCOTT</code>数据库模式中的<code class="codeph">purchaseorder</code>表，而不是Oracle XML DB Repository中的资源。URL包含一个XPath表达式，该表达式将结果集限制为那些node <code class="codeph">/PurchaseOrder/Reference/text()</code>包含谓词中指定的值的文档。<code class="codeph">contenttype</code>参数将生成的文档的MIME类型设置为<code class="codeph">text/xml</code> 。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="您可以使用Oracle XML DB HTTP服务器检索存储库资源。Oracle数据库还包括一个servlet DBUriServlet，它通过HTTP（S）URL提供任何类型的数据库数据。数据可以以纯文本，HTML或XML格式返回。">DBUriServlet</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="您可以使用Oracle XML DB HTTP服务器检索存储库资源。Oracle数据库还包括一个servlet DBUriServlet，它通过HTTP（S）URL提供任何类型的数据库数据。数据可以以纯文本，HTML或XML格式返回。">DBUriServlet</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <hr><br><p style="text-decoration:underline">脚注图例</p>脚注2：<p>为了文档的目的，这个XQuery表达式分为两行。</p><br>脚注3：<p>为了文档的目的，这个XQuery表达式分为两行。</p><br></div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Invoker’s rights and definer’s rights have several security advantages when used to control access to privileges to run user-created procedures."></meta>
      <meta name="description" content="Invoker’s rights and definer’s rights have several security advantages when used to control access to privileges to run user-created procedures."></meta>
      <title>管理Definer权利和祈求者权利的安全性</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Security Guide "></meta>
      <meta property="og:description" content="Invoker’s rights and definer’s rights have several security advantages when used to control access to privileges to run user-created procedures."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Security Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-security-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-28T14:57:12-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96299-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="integrating_mads_with_oracle_database.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-fine-grained-access-in-pl-sql-packages-and-types.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Security Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DBSEG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="integrating_mads_with_oracle_database.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安全指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part_1.html" property="item" typeof="WebPage"><span property="name">管理用户身份验证和授权</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理Definer权利和祈求者权利的安全性</li>
            </ol>
            <a id="GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" name="GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3"></a><a id="DBSEG658"></a>
            
            <h2 id="DBSEG-GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" class="sect2"><span class="enumeration_chapter">7</span>管理定义者权利和祈求者权利的安全性</h2>
         </header>
         <div class="ind">
            <div>
               <p>当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-18B223A9-223B-4625-AADE-4E47A56A5E9D">关于Definer的权利和祈求者的权利</a><br>定义者权限和调用者权限用于控制对运行用户创建的过程或程序单元所必需的权限的访问。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-5ECAD7B4-BF99-4A36-B770-2132A43ED5A5">过程权限如何影响定义者的权利</a><br>过程的所有者（称为<span class="italic">定义者</span> ）必须具有过程引用的对象的必要对象权限。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-74D3BC6B-1371-4AA8-B7E7-ECB84394B9D4">程序权限如何影响祈求者的权利</a><br>调用者的权限过程以所有调用者的特权执行。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-547A6A16-51AA-4FD9-BDB9-0D8A79B8CF24">什么时候应该创建祈求者的权利程序</a><br>Oracle建议您在某些情况下创建调用者权限过程。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F">控制程序调用和查看访问的调用者权限权限</a><br><code class="codeph">INHERIT PRIVILEGES</code>和<code class="codeph">INHERIT ANY PRIVILEGES</code>权限规定了调用者权限程序运行时使用的权限。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-2897C310-D0B5-4AB0-8237-384196C4EC81">定义者的权利和祈求者的权利</a><br><code class="codeph">CREATE VIEW</code> SQL语句中的<code class="codeph">BEQEATH</code>子句可以在用户创建的视图中控制定义者的权限和调用者的权限。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2">使用基于代码的访问控制来定义权利和使者的权利</a><br>基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555">控制数据库链接的定义者权限特权</a><br>如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="part_1.html" title="第一部分介绍了如何管理用户身份验证和授权。">管理用户身份验证和授权</a></p>
                  </div>
               </div>
            </div>
            <a id="DBSEG659"></a><div class="props_rev_3"><a id="GUID-18B223A9-223B-4625-AADE-4E47A56A5E9D" name="GUID-18B223A9-223B-4625-AADE-4E47A56A5E9D"></a><h3 id="DBSEG-GUID-18B223A9-223B-4625-AADE-4E47A56A5E9D" class="sect3">关于Definer的权利和祈求者的权利</h3>
               <div>
                  <p>定义者权限和调用者权限用于控制对运行用户创建的过程或程序单元所必需的权限的访问。</p>
                  <p>在<a href="glossary.html#GUID-87141F4A-F49D-4C0E-8229-B9943FFC7FA4"><span class="xrefglossterm">定义者权限过程中</span></a> ，过程以所有者的权限执行。权限绑定到创建它们的模式。<a href="glossary.html#GUID-68637D3F-FA77-453D-962B-172202ACC23C"><span class="xrefglossterm">调用者权限过程</span></a>使用当前用户的权限执行，即调用该过程的用户。
                  </p>
                  <p>例如，假设用户<code class="codeph">bixby</code>创建了一个旨在修改表<code class="codeph">cust_records</code> ，然后他将此过程的<code class="codeph">EXECUTE</code>特权授予用户<code class="codeph">rlayton</code> 。如果<code class="codeph">bixby</code>的权限创建了该过程，那么该过程将在<code class="codeph">bixby</code>的模式中查找表<code class="codeph">cust_records</code> 。如果使用调用者的权限创建过程，那么当<code class="codeph">rlayton</code>运行它时，该过程将在<code class="codeph">rlayton</code>的模式中查找表<code class="codeph">cust_records</code> 。
                  </p>
                  <p>默认情况下，所有程序都被视为定义者的权利。您可以在创建或修改过程时使用<code class="codeph">AUTHID CURRENT_USER</code>子句将过程指定为调用者权限过程，或者可以使用<code class="codeph">AUTHID DEFINER</code>子句使其成为定义者的权限过程。
                  </p>
                  <p>您可以创建权限分析策略以捕获对定义者权限和调用者权限过程的权限使用。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="performing-privilege-analysis-find-privilege-use.html#GUID-44CB644B-7B59-4B3B-B375-9F9B96F60186" title="权限分析动态分析用户使用和不使用的权限和角色。">执行权限分析以查找权限使用</a></li>
                        <li><a href="../lnpls/plsql-subprograms.html#LNPLS-GUID-41D23DE7-3C07-41CF-962B-F92B696594B5" target="_blank"><span><cite><span><cite>Oracle数据库PL / SQL语言参考</cite></span></cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DBSEG99925"></a><div class="props_rev_3"><a id="GUID-5ECAD7B4-BF99-4A36-B770-2132A43ED5A5" name="GUID-5ECAD7B4-BF99-4A36-B770-2132A43ED5A5"></a><h3 id="DBSEG-GUID-5ECAD7B4-BF99-4A36-B770-2132A43ED5A5" class="sect3">过程权限如何影响定义者的权利</h3>
               <div>
                  <p>过程的所有者（称为<span class="italic">定义者</span> ）必须具有过程引用的对象的必要对象权限。
                  </p>
                  <p>如果过程所有者授予另一个用户使用该过程的权限，则过程所有者的权限（对过程引用的对象）适用于被授权者对过程的执行。必须直接向过程所有者授予过程定义者的权限，而不是通过角色授予。这些被称为定义者的权利。</p>
                  <p>不是其所有者的过程的用户称为<span class="italic">调用者</span> 。<a href="glossary.html#GUID-68637D3F-FA77-453D-962B-172202ACC23C"><span class="xrefglossterm">调用者权限过程</span></a>需要对引用对象的附加权限，但对于<a href="glossary.html#GUID-87141F4A-F49D-4C0E-8229-B9943FFC7FA4"><span class="xrefglossterm">定义者的权限过程</span></a>则不需要。
                  </p>
                  <p>定义者权限过程的用户只需要执行过程的权限，并且不需要过程访问的基础对象的权限。这是因为定义者的权限过程在拥有该过程的用户的安全域下运行，而不管谁在执行它。过程的所有者必须具有引用对象的所有必需对象权限。需要向定义者权利程序的用户授予更少的权限。这样可以更好地控制数据库访问。</p>
                  <p>您可以使用定义者权限过程来控制对私有数据库对象的访问，并添加一定级别的数据库安全性。通过编写定义者的权限过程并仅向用户授予<code class="codeph">EXECUTE</code>特权，可以强制该用户仅通过该过程访问所引用的对象。
                  </p>
                  <p>在运行时，Oracle数据库会检查定义者权限过程的所有者的权限是否允许在执行过程之前访问该过程的引用对象。如果从定义者权限过程的所有者撤消对引用对象的必要特权，则任何用户（包括所有者）都无法运行该过程。</p>
                  <p>您可能希望使用定义者权限过程的示例如下：假设您必须创建一个API，其过程具有对其表的无限制访问权限，但您希望阻止普通用户直接选择表数据，以及更改它使用<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>语句。要在单独的低权限模式中完成此操作，请创建表和组成API的过程。默认情况下，每个过程都是定义者的权限单元，因此您在创建它时不需要指定<code class="codeph">AUTHID DEFINER</code> 。然后将<code class="codeph">EXECUTE</code>特权授予必须使用此API的用户，但不授予任何允许数据访问的权限。此解决方案使您可以完全控制API行为以及用户如何访问其基础对象。
                  </p>
                  <p>Oracle建议您在自己的架构中创建定义者权限过程以及访问这些过程的视图。授予此架构非常低的权限，或根本没有权限。这样，当其他用户运行这些过程或视图时，他们将无法访问此模式中任何不必要的高权限。</p>
                  <div class="infoboxnote" id="GUID-5ECAD7B4-BF99-4A36-B770-2132A43ED5A5__GUID-C29D430B-6314-4ECF-865F-D7B59EFE91F9">
                     <p class="notep1">注意：</p>
                     <p>触发处理遵循与定义者权限过程相同的模式。用户运行SQL语句，该用户有权运行该语句。作为SQL语句的结果，触发了触发器。触发操作中的语句临时在拥有触发器的用户的安全域下执行。有关触发器的概述信息， <a href="../cncpt/server-side-programming.html#CNCPT118" target="_blank"><span><cite>Oracle数据库概念</cite></span></a> 。
                     </p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-privilege-and-role-authorization.html#GUID-5C57B842-AF82-4462-88E9-5E9E8FD59874" title="PL / SQL块中的角色行为取决于块的类型以及定义者的权限或调用者的权限。">角色如何在PL / SQL块中工作</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DBSEG99926"></a><div class="props_rev_3"><a id="GUID-74D3BC6B-1371-4AA8-B7E7-ECB84394B9D4" name="GUID-74D3BC6B-1371-4AA8-B7E7-ECB84394B9D4"></a><h3 id="DBSEG-GUID-74D3BC6B-1371-4AA8-B7E7-ECB84394B9D4" class="sect3">程序权限如何影响祈求者的权利</h3>
               <div>
                  <p>调用者的权限过程以所有调用者的特权执行。</p>
                  <p>除非定义<a href="glossary.html#GUID-68637D3F-FA77-453D-962B-172202ACC23C"><span class="xrefglossterm">者的权限过程</span></a>直接或间接<a href="glossary.html#GUID-68637D3F-FA77-453D-962B-172202ACC23C"><span class="xrefglossterm">调用调用</span></a>者的权限过程，否则Oracle数据库允许通过任何调用者启用的角色授予调用者的权限生效。调用者权限过程的用户必须具有对过程通过在调用者的模式中解析的外部引用访问的对象的权限（直接或通过角色授予用户）。当调用者运行调用者权限过程时，该用户暂时具有调用者的<span class="italic">所有</span>权限。
                  </p>
                  <p>调用者必须在运行时具有访问DML语句或动态SQL语句中嵌入的程序引用的权限，因为它们在运行时被有效地重新编译。</p>
                  <p>对于所有其他外部引用，例如直接PL / SQL函数调用，Oracle数据库在编译时检查所有者的特权，但不执行运行时检查。因此，调用者权限过程的用户不需要DML或动态SQL语句之外的外部引用的特权。或者，调用者权限过程的开发者必须仅授予过程本身的特权，而不是授予调用者权限过程直接引用的所有对象。</p>
                  <p>您可以创建一个由多个程序单元组成的软件包，一些具有定义者权限，另一些具有调用者权限，并限制程序入口点<span class="italic">（受控步入）</span> 。有权运行入口点过程的用户也可以间接执行内部程序单元，但不能直接调用内部程序。为了非常精确地控制查询处理，您可以使用显式游标创建PL / SQL包规范。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制程序调用和查看访问的调用者权限权限</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DBSEG1038"></a><div class="props_rev_3"><a id="GUID-547A6A16-51AA-4FD9-BDB9-0D8A79B8CF24" name="GUID-547A6A16-51AA-4FD9-BDB9-0D8A79B8CF24"></a><h3 id="DBSEG-GUID-547A6A16-51AA-4FD9-BDB9-0D8A79B8CF24" class="sect3">什么时候应该创建祈求者的权利程序</h3>
               <div>
                  <p>Oracle建议您在某些情况下创建调用者权限过程。</p>
                  <p>这些情况如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">在高权限模式中创建PL / SQL过程时。</span> 当较低权限的用户调用该过程时，它只能执行那些允许的用户。换句话说，调用者的权限过程以调用用户的权限运行。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">当PL / SQL过程不包含SQL并且可供其他用户使用时。</span> <code class="codeph">DBMS_OUTPUT</code> PL / SQL包是一个PL / SQL子程序的示例，它不包含任何SQL，并且可供所有用户使用。在这种情况下您应该使用调用者权限过程的原因是因为该单元在运行时不发出SQL语句，因此运行时系统不需要检查其权限。指定<code class="codeph">AUTHID</code> <code class="codeph">CURRENT_USER</code>会使过程的调用更有效，因为当调用者将正确的过程推送到调用堆栈或来自调用堆栈时， <code class="codeph">CURRENT_USER</code>和<code class="codeph">CURRENT_SCHEMA</code>的值以及当前启用的角色不会更改。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-547A6A16-51AA-4FD9-BDB9-0D8A79B8CF24__GUID-8587C1C6-1685-45FD-AFA6-4618863F2126">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-oracle-vpd-to-control-data-access.html#GUID-8F39CFC1-E210-4011-9D49-F84E91AF41CB" title="DBMS_RLS PL / SQL包可以配置Oracle虚拟专用数据库（VPD）策略。">配置Oracle虚拟专用数据库策略</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-privilege-and-role-authorization.html#GUID-32479D5D-74E8-49C0-B11D-D33D3774FC06" title="使用ANY关键字的系统特权使您可以为数据库中的整个对象类别设置特权。">关于任何特权和公共角色</a></p>
                        </li>
                        <li>
                           <p>有关Oracle数据库如何使用调用者和定义者的权限在运行时处理名称解析和权限检查的信息，请参阅<a href="../lnpls/plsql-subprograms.html#LNPLS00809" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关调用者权限与定义者权限单位之间差异的更多信息，请参阅<a href="../lnpls/plsql-subprograms.html#LNPLS00809" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关在<code class="codeph">CREATE PACKAGE</code>语句中定义显式游标的信息<a href="../lnpls/CREATE-PACKAGE-statement.html#LNPLS01371" target="_blank"><span><cite>，请参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DBSEG653"></a><div class="props_rev_3"><a id="GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" name="GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F"></a><h3 id="DBSEG-GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" class="sect3">控制程序调用和查看访问的调用者权限权限</h3>
               <div>
                  <p><code class="codeph">INHERIT PRIVILEGES</code>和<code class="codeph">INHERIT ANY PRIVILEGES</code>权限规定了调用者权限程序运行时使用的权限。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-0B9271DA-4151-4915-AB1A-FB1A262E287E">架构的特权如何影响使用者的权利程序</a><br>在较低特权用户必须执行较高特权用户拥有的过程的情况下，调用者权限过程非常有用。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-174CF65A-209E-4A50-93ED-648C0EB38E90">INHERIT [ANY] PRIVILEGES权限如何控制权限访问权限</a><br>使用<code class="codeph">INHERIT PRIVILEGES</code>和<code class="codeph">INHERIT ANY PRIVILEGES</code>权限来保护调用者的权限程序。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B2D69EFA-7BB0-46A1-8750-7787323B0870">向其他用户授予INHERIT PRIVILEGES权限</a><br>默认情况下，所有用户都被授予<code class="codeph">ON USER</code> <span class="italic"><code class="codeph">newuser</code></span> <code class="codeph">TO PUBLIC</code> <code class="codeph">INHERIT PRIVILEGES</code> 。</li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4F8D794B-E54C-4B68-AF94-770700805EAC">示例：在调用用户上授予INHERIT PRIVILEGES</a><br><code class="codeph">GRANT</code>语句可以将调用用户的<code class="codeph">INHERIT PRIVILEGES</code>权限授予过程所有者。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4773E302-0995-4EDD-9B8A-79629448F662">示例：撤消INHERIT特权</a><br><code class="codeph">REVOKE</code>语句可以撤消用户的<code class="codeph">INHERIT PRIVILEGES</code>权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4950AE44-1C25-4DCA-8F8E-93373081DEFE">向其他用户授予INHERIT ANY PRIVILEGES特权</a><br>默认情况下，用户<code class="codeph">SYS</code>具有<code class="codeph">INHERIT ANY PRIVILEGES</code>系统特权，并且可以将此特权授予其他数据库用户或角色。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-7534ABF6-CA9B-4F91-8EC2-5FFDECC576CE">示例：向受信任的过程所有者授予INHERIT ANY PRIVILEGES</a><br><code class="codeph">GRANT</code>语句可以向受信任的过程所有者授予<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-575EE41D-1F31-412E-9AD1-707DF544B9F1">管理INHERIT特权并保留任何特权</a><br>默认情况下， <code class="codeph">PUBLIC</code>对新用户帐户和升级用户帐户具有<code class="codeph">INHERIT PRIVILEGE</code>权限; <code class="codeph">SYS</code>用户具有<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG660"></a><div class="props_rev_3"><a id="GUID-0B9271DA-4151-4915-AB1A-FB1A262E287E" name="GUID-0B9271DA-4151-4915-AB1A-FB1A262E287E"></a><h4 id="DBSEG-GUID-0B9271DA-4151-4915-AB1A-FB1A262E287E" class="sect4">架构的特权如何影响使用者的权利程序</h4>
                  <div>
                     <p>在较低特权用户必须执行较高特权用户拥有的过程的情况下，调用者权限过程非常有用。</p>
                     <p>当用户运行调用者权限过程（或任何使用<code class="codeph">AUTHID CURRENT_USER</code>子句创建的PL / SQL程序单元）时，该过程会在过程运行时临时继承调用用户的所有权限。
                     </p>
                     <p>在此期间，过程所有者通过该过程访问此调用用户的权限。请考虑以下情形：</p>
                     <ol>
                        <li>
                           <p>用户<code class="codeph">ebrown</code>创建<code class="codeph">check_syntax</code> <a href="glossary.html#GUID-68637D3F-FA77-453D-962B-172202ACC23C"><span class="xrefglossterm">调用者的权限过程</span></a> ，然后授予用户<code class="codeph">jward</code>的<code class="codeph">EXECUTE</code>特权。
                           </p>
                        </li>
                        <li>
                           <p>用户<code class="codeph">ebrown</code> ，他是一名初级程序员，只有他工作所需的最低权限。<code class="codeph">check_syntax</code>过程驻留在<code class="codeph">ebrown</code>的模式中。
                           </p>
                        </li>
                        <li>
                           <p>用户<code class="codeph">jward</code>是一名经理，拥有比用户<code class="codeph">ebrown</code>更强大的权限<code class="codeph">ebrown</code> 。
                           </p>
                        </li>
                        <li>
                           <p>当用户<code class="codeph">jward</code>运行<code class="codeph">check_syntax</code>调用者权限过程时，该过程在运行时继承用户<code class="codeph">jward</code>的更高权限。
                           </p>
                        </li>
                        <li>
                           <p>由于用户<code class="codeph">ebrown</code>拥有<code class="codeph">check_syntax</code>过程中，他已经访问用户<code class="codeph">jward</code>的特权，只要<code class="codeph">jward</code>运行<code class="codeph">check_syntax</code>程序。
                           </p>
                        </li>
                     </ol>
                     <p>在这种情况下的危险 - 在<code class="codeph">jward</code>运行程序时，较低特权的<code class="codeph">ebrown</code>程序可以访问<code class="codeph">jward</code>的更高权限 - 存在程序所有者可能滥用调用用户的更高权限的风险。例如，用户<code class="codeph">ebrown</code>可以通过重写<code class="codeph">check_syntax</code>程序来使用<code class="codeph">jward</code>的更高权限，以给<code class="codeph">ebrown</code>一个提升或删除<code class="codeph">ebrown</code>的糟糕的性能评估记录。或者， <code class="codeph">ebrown</code>最初可以将该过程创建为定义者权限过程，将其<code class="codeph">EXECUTE</code>特权授予<code class="codeph">jward</code> ，然后将其更改为潜在的恶意调用者权限过程，而不让<code class="codeph">jward</code>知道。当随机用户（例如应用程序用户）可以访问使用调用者权限过程的数据库时，这些类型的风险会增加。
                     </p>
                     <p>当用户<code class="codeph">jward</code>运行<code class="codeph">ebrown</code>的调用者权限过程时，涉及到一个信任元素。他必须确保<code class="codeph">ebrown</code>在访问<code class="codeph">jward</code>的权限时不会以恶意方式使用<code class="codeph">check_syntax</code>程序。<code class="codeph">INHERIT PRIVILEGES</code>和<code class="codeph">INHERIT ANY PRIVILEGES</code>权限可以帮助用户<code class="codeph">jward</code>控制用户<code class="codeph">ebrown</code>的程序是否可以访问他（ <code class="codeph">jward</code> 's）的权限。任何用户都可以向他们想要运行其调用者权限过程的用户授予或撤销他们自己的<code class="codeph">INHERIT PRIVILEGES</code>权限。<code class="codeph">SYS</code>用户管理<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG661"></a><div class="props_rev_3"><a id="GUID-174CF65A-209E-4A50-93ED-648C0EB38E90" name="GUID-174CF65A-209E-4A50-93ED-648C0EB38E90"></a><h4 id="DBSEG-GUID-174CF65A-209E-4A50-93ED-648C0EB38E90" class="sect4">INHERIT [ANY] PRIVILEGES权限如何控制权限访问权限</h4>
                  <div>
                     <p>使用<code class="codeph">INHERIT PRIVILEGES</code>和<code class="codeph">INHERIT ANY PRIVILEGES</code>权限来保护调用者的权限程序。
                     </p>
                     <p><code class="codeph">INHERIT PRIVILEGES</code>和<code class="codeph">INHERIT ANY PRIVILEGES</code>权限规定了用户运行调用者权限过程或查询引用调用者权限过程的<code class="codeph">BEQUEATH CURRENT_USER</code>视图时使用的权限。
                     </p>
                     <p>当用户运行调用者权限过程时，Oracle数据库会对其进行检查以确保过程所有者对调用用户具有<code class="codeph">INHERIT PRIVILEGES</code>特权，或者是否已授予所有者<code class="codeph">INHERIT ANY PRIVILEGES</code>特权。如果权限检查失败，则Oracle数据库将返回<code class="codeph">ORA-06598: insufficient INHERIT PRIVILEGES privilege</code>错误。
                     </p>
                     <p>这两个特权的好处是它们可以让调用用户控制谁可以在运行调用者权限过程或查询<code class="codeph">BEQUEATH CURRENT_USER</code>视图时访问其权限。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG662"></a><div class="props_rev_3"><a id="GUID-B2D69EFA-7BB0-46A1-8750-7787323B0870" name="GUID-B2D69EFA-7BB0-46A1-8750-7787323B0870"></a><h4 id="DBSEG-GUID-B2D69EFA-7BB0-46A1-8750-7787323B0870" class="sect4">向其他用户授予INHERIT PRIVILEGES权限</h4>
                  <div>
                     <p>默认情况下，所有用户都被授予<code class="codeph">ON USER</code> <span class="italic"><code class="codeph">newuser</code></span> <code class="codeph">TO PUBLIC</code> <code class="codeph">INHERIT PRIVILEGES</code> 。</p>
                     <p>此授权在创建用户帐户或先前创建的帐户升级到当前版本时发生。</p>
                     <p>调用用户可以从自己的其他用户撤消<code class="codeph">INHERIT PRIVILEGE</code>权限，然后仅将其授予他信任的用户。
                     </p>
                     <p><code class="codeph">INHERIT PRIVILEGES</code>权限授予的语法如下：</p><pre class="oac_no_warn" dir="ltr">GRANT INHERIT特权用户<span class="italic">invoking_user</span> TO <span class="italic">procedure_owner;</span></pre><p>在本规范中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><code class="codeph">invoking_user</code></span>是运行调用者权限过程的用户。该用户必须是数据库用户帐户。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">procedure_owner</code></span>是拥有调用者权限过程的用户。该值必须是数据库用户帐户。作为向过程所有者授予<code class="codeph">INHERIT PRIVILEGES</code>特权的替代方法，您可以将该特权授予依次授予该过程的角色。
                           </p>
                        </li>
                     </ul>
                     <p>以下用户或角色必须具有将运行其调用者权限过程的用户授予他们的<code class="codeph">INHERIT PRIVILEGES</code>权限：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>拥有调用者权限过程的用户或角色</p>
                        </li>
                        <li>
                           <p>拥有<code class="codeph">BEQUEATH CURRENT_USER</code>视图的用户或角色</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG663"></a><div class="props_rev_3"><a id="GUID-4F8D794B-E54C-4B68-AF94-770700805EAC" name="GUID-4F8D794B-E54C-4B68-AF94-770700805EAC"></a><h4 id="DBSEG-GUID-4F8D794B-E54C-4B68-AF94-770700805EAC" class="sect4">示例：在调用用户上授予INHERIT PRIVILEGES</h4>
                  <div>
                     <p><code class="codeph">GRANT</code>语句可以将调用用户的<code class="codeph">INHERIT PRIVILEGES</code>权限授予过程所有者。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4F8D794B-E54C-4B68-AF94-770700805EAC__CACDCCHG">实施例7-1</a>示出了调用用户如何<code class="codeph">jward</code>可以授予用户<code class="codeph">ebrown</code>的<code class="codeph">INHERIT PRIVILEGES</code>的特权。
                     </p>
                     <div class="example" id="GUID-4F8D794B-E54C-4B68-AF94-770700805EAC__CACDCCHG">
                        <p class="titleinexample">示例7-1将调用用户的INHERIT特权授予过程所有者</p><pre class="oac_no_warn" dir="ltr">用户jward授权继承权限ebrown;</pre><p>该语句允许<code class="codeph">ebrown</code>写入或将来写入的任何调用者权限过程在<code class="codeph">jward</code>运行时访问<code class="codeph">jward</code>的权限。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG664"></a><div class="props_rev_3"><a id="GUID-4773E302-0995-4EDD-9B8A-79629448F662" name="GUID-4773E302-0995-4EDD-9B8A-79629448F662"></a><h4 id="DBSEG-GUID-4773E302-0995-4EDD-9B8A-79629448F662" class="sect4">示例：撤消INHERIT特权</h4>
                  <div>
                     <p><code class="codeph">REVOKE</code>语句可以撤消用户的<code class="codeph">INHERIT PRIVILEGES</code>权限。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4773E302-0995-4EDD-9B8A-79629448F662__CACJEACI">例7-2</a>显示了用户如何<code class="codeph">jward</code>可以撤消了他的使用权限<code class="codeph">ebrown</code> 。
                     </p>
                     <div class="example" id="GUID-4773E302-0995-4EDD-9B8A-79629448F662__CACJEACI">
                        <p class="titleinexample">示例7-2撤消INHERIT特权</p><pre class="oac_no_warn" dir="ltr">从ebrown转发用户jward上的INHERIT特权;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG665"></a><div class="props_rev_3"><a id="GUID-4950AE44-1C25-4DCA-8F8E-93373081DEFE" name="GUID-4950AE44-1C25-4DCA-8F8E-93373081DEFE"></a><h4 id="DBSEG-GUID-4950AE44-1C25-4DCA-8F8E-93373081DEFE" class="sect4">向其他用户授予INHERIT ANY PRIVILEGES特权</h4>
                  <div>
                     <p>默认情况下，用户<code class="codeph">SYS</code>具有<code class="codeph">INHERIT ANY PRIVILEGES</code>系统特权，并且可以将此特权授予其他数据库用户或角色。
                     </p>
                     <p>与所有<code class="codeph">ANY</code>权限一样，仅将此权限授予受信任的用户或角色。一旦用户或角色被授予<code class="codeph">INHERIT ANY PRIVILEGES</code>权限，则该用户的调用者权限过程可以访问调用用户的权限。您可以通过查询<code class="codeph">DBA_SYS_PRIVS</code>数据字典视图找到已被授予<code class="codeph">INHERIT ANY PRIVILEGES</code>权限的用户。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG666"></a><div class="props_rev_3"><a id="GUID-7534ABF6-CA9B-4F91-8EC2-5FFDECC576CE" name="GUID-7534ABF6-CA9B-4F91-8EC2-5FFDECC576CE"></a><h4 id="DBSEG-GUID-7534ABF6-CA9B-4F91-8EC2-5FFDECC576CE" class="sect4">示例：向受信任的过程所有者授予INHERIT ANY PRIVILEGES</h4>
                  <div>
                     <p><code class="codeph">GRANT</code>语句可以向受信任的过程所有者授予<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-7534ABF6-CA9B-4F91-8EC2-5FFDECC576CE__CACBBIJC">例7-3</a>显示了如何向用户<code class="codeph">ebrown</code>授予<code class="codeph">INHERIT ANY PRIVILEGES</code>特权。
                     </p>
                     <div class="example" id="GUID-7534ABF6-CA9B-4F91-8EC2-5FFDECC576CE__CACBBIJC">
                        <p class="titleinexample">示例7-3向受信任的过程所有者授予INHERIT ANY PRIVILEGES</p><pre class="oac_no_warn" dir="ltr">授予ebrown的任何特权;</pre><p>请注意从强大的用户撤消<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。例如，假设用户<code class="codeph">SYSTEM</code>已创建一组调用者权限过程。如果撤消<code class="codeph">SYSTEM</code> <code class="codeph">INHERIT ANY PRIVILEGES</code> ，则其他用户无法运行其程序，除非他们特别授予他<code class="codeph">INHERIT PRIVILEGE</code>权限。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG667"></a><div class="props_rev_3"><a id="GUID-575EE41D-1F31-412E-9AD1-707DF544B9F1" name="GUID-575EE41D-1F31-412E-9AD1-707DF544B9F1"></a><h4 id="DBSEG-GUID-575EE41D-1F31-412E-9AD1-707DF544B9F1" class="sect4">管理INHERIT特权并保留任何特权</h4>
                  <div>
                     <p>默认情况下， <code class="codeph">PUBLIC</code>对新用户帐户和升级用户帐户具有<code class="codeph">INHERIT PRIVILEGE</code>权限; <code class="codeph">SYS</code>用户具有<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。
                     </p>
                     <div class="section">
                        <p>Oracle默认配置一组<code class="codeph">INHERIT PRIVILEGES</code>授权，旨在帮助防止滥用各种Oracle定义用户的权限。
                        </p>
                        <p>您可以选择撤消客户定义用户的<code class="codeph">INHERIT PRIVILEGES ON USER</code> <span class="italic"><code class="codeph">user_name</code></span> <code class="codeph">TO PUBLIC</code>的<code class="codeph">INHERIT PRIVILEGES ON USER</code>的默认授权，并根据该特定用户授予更多特定的<code class="codeph">INHERIT PRIVILEGES</code>授权。要查找已被授予<code class="codeph">INHERIT ANY PRIVILEGES</code>权限的用户，请查询<code class="codeph">DBA_SYS_PRIVS</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>撤消<code class="codeph">PUBLIC</code>的<code class="codeph">INHERIT PRIVILEGES</code>权限。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">在<span class="italic">invoking_user</span> FROM PUBLIC上修改INHERIT特权;</pre><p>请注意，这次，由于<code class="codeph">INHERIT PRIVILEGES</code>检查失败导致的运行时错误，任何运行调用者权限过程的用户都无法执行此操作。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>有选择地将<code class="codeph">INHERIT PRIVILEGES</code>权限授予受信任的用户或角色。</span></li>
                        <li class="stepexpand"><span>同样，有选择地仅向受信任的用户或角色授予<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。</span></li>
                     </ol>
                     <div class="section">
                        <p>您可以创建审核策略来审核授予和撤消这两个权限，但是您无法审核因<code class="codeph">INHERIT PRIVILEGES</code>权限检查失败而导致的运行时错误。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-575EE41D-1F31-412E-9AD1-707DF544B9F1__GUID-1C1D5CD9-D7F4-42D0-9F05-F5EEABC78AA5">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关SQL注入攻击的信息，请参阅<a href="../lnpls/dynamic-sql.html#LNPLS01109" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">GRANT</code>语句和默认权限的更多信息，请<a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span><cite>参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG586"></a><div class="props_rev_3"><a id="GUID-2897C310-D0B5-4AB0-8237-384196C4EC81" name="GUID-2897C310-D0B5-4AB0-8237-384196C4EC81"></a><h3 id="DBSEG-GUID-2897C310-D0B5-4AB0-8237-384196C4EC81" class="sect3">定义者的权利和祈求者的权利</h3>
               <div>
                  <p><code class="codeph">CREATE VIEW</code> SQL语句中的<code class="codeph">BEQEATH</code>子句可以在用户创建的视图中控制定义者的权限和调用者的权限。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-0AF4F672-7252-4C90-BC95-AD9337511A09">关于在视图中控制定义者的权利和祈求者的权利</a><br>您可以配置用户定义的视图以适应视图中引用的调用者权限函数。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF5300C7-E153-4316-805E-0A87FF2EA676">在CREATE VIEW语句中使用BEQUEATH子句</a><br><code class="codeph">BEQUEATH</code>控制如何使用调用用户的权限执行调用者的正确功能。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-E8238F8F-046F-411C-A0D4-BA3581A6907A">查找调用用户的用户名或用户ID</a><br>PL / SQL函数可用于根据是否使用调用者权限或定义者权限来查找调用用户。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-6B0BD428-F194-4344-B9EE-02466181EDCB">找到BEQUEATH DEFINER和BEQUEATH_CURRENT_USER视图</a><br>您可以查看视图是<code class="codeph">BEQUEATH DEFINER</code>还是<code class="codeph">BEQUEATH CURRENT_USER</code>视图。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG558"></a><div class="props_rev_3"><a id="GUID-0AF4F672-7252-4C90-BC95-AD9337511A09" name="GUID-0AF4F672-7252-4C90-BC95-AD9337511A09"></a><h4 id="DBSEG-GUID-0AF4F672-7252-4C90-BC95-AD9337511A09" class="sect4">关于在视图中控制定义者的权利和祈求者的权利</h4>
                  <div>
                     <p>您可以配置用户定义的视图以适应视图中引用的调用者权限函数。</p>
                     <p>当用户调用对身份或权限敏感的SQL函数或调用者权限PL / SQL或Java函数时，操作执行中的当前模式，当前用户和当前启用的角色可以从查询用户的环境继承，而不是被设置为视图的所有者。</p>
                     <p>此配置不会将视图本身变为调用者的权限对象。视图中的名称解析仍然使用视图所有者的架构进行处理，并且使用视图所有者的权限完成对视图的权限检查。但是，在运行时，视图引用的函数在调用用户的权限下运行，而不是在视图所有者的权限下运行。</p>
                     <p>此功能的好处是，它允许<code class="codeph">SYS_CONTEXT</code>和<code class="codeph">USERENV</code>等函数在视图中引用这些函数时，它们必须返回对调用用户准确的信息，以返回一致的结果。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-2897C310-D0B5-4AB0-8237-384196C4EC81" title="CREATE VIEW SQL语句中的BEQEATH子句可以在用户创建的视图中控制定义者的权限和调用者的权限。">视图中的定义者权利和祈求者权利</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG668"></a><div class="props_rev_3"><a id="GUID-EF5300C7-E153-4316-805E-0A87FF2EA676" name="GUID-EF5300C7-E153-4316-805E-0A87FF2EA676"></a><h4 id="DBSEG-GUID-EF5300C7-E153-4316-805E-0A87FF2EA676" class="sect4">在CREATE VIEW语句中使用BEQUEATH子句</h4>
                  <div>
                     <p><code class="codeph">BEQUEATH</code>控制如何使用调用用户的权限执行调用者的正确功能。
                     </p>
                     <div class="section">
                        <p>要使用发出引用该视图的SQL的用户的权限来执行调用者权限函数，可以在<code class="codeph">CREATE VIEW</code>语句中将<code class="codeph">BEQUEATH</code>子句设置为<code class="codeph">CURRENT_USER</code> 。</p>
                        <p>如果计划对视图发出SQL查询或DML语句，则必须为视图所有者授予对调用用户的<code class="codeph">INHERIT</code> <code class="codeph">PRIVILEGES</code>特权，否则视图所有者必须具有<code class="codeph">INHERIT ANY PRIVILEGES</code>特权。如果不是，那么当<code class="codeph">SELECT</code>查询或DML语句涉及<code class="codeph">BEQUEATH</code> <code class="codeph">CURRENT_USER</code>视图时，运行时系统将引发错误<code class="codeph">ORA-06598: insufficient INHERIT PRIVILEGES privilege</code> 。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">BEQUEATH CURRENT_USER</code>子句设置要使用调用者权限执行的视图函数。
                              </p>
                           </li>
                        </ul>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">创建视图MY_OBJECTS_VIEW BEQUEATH CURRENT_USER作为选择GET_OBJS_FUNCTION;</pre><p>如果希望使用视图所有者的权限执行视图中的函数，则应省略<code class="codeph">BEQUEATH</code>子句或将其设置为<code class="codeph">DEFINER</code> 。</p>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">从USER_OBJECTS创建视图my_objects_view BEQUEATH DEFINER作为SELECT OBJECT_NAME;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-EF5300C7-E153-4316-805E-0A87FF2EA676__GUID-3458CCE5-41A5-46CF-94FA-410038C5FF6F">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限，</a>以获取有关<code class="codeph">INHERIT PRIVILEGE</code>权限如何工作的更多信息</p>
                           </li>
                           <li>
                              <p>有关授予<code class="codeph">INHERIT</code> <code class="codeph">PRIVILEGES</code>和<code class="codeph">INHERIT</code> <code class="codeph">ANY</code> <code class="codeph">PRIVILEGES</code>权限的其他信息，请参阅<a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../dbfsg/configuring-data-security.html#DBFSG433" target="_blank"><span><cite>Oracle数据库真实应用程序安全管理员和开发人员指南</cite></span></a> ，了解有关如何将<code class="codeph">BEQUEATH CURRENT_USER</code>视图与Oracle Database Real Application Security应用程序一起使用的信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-2897C310-D0B5-4AB0-8237-384196C4EC81" title="CREATE VIEW SQL语句中的BEQEATH子句可以在用户创建的视图中控制定义者的权限和调用者的权限。">视图中的定义者权利和祈求者权利</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG836"></a><div class="props_rev_3"><a id="GUID-E8238F8F-046F-411C-A0D4-BA3581A6907A" name="GUID-E8238F8F-046F-411C-A0D4-BA3581A6907A"></a><h4 id="DBSEG-GUID-E8238F8F-046F-411C-A0D4-BA3581A6907A" class="sect4">查找调用用户的用户名或用户ID</h4>
                  <div>
                     <p>PL / SQL函数可用于根据是否使用调用者权限或定义者权限来查找调用用户。</p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">ORA_INVOKING_USER</code>或<code class="codeph">ORA_INVOKING_USERID</code>函数根据调用者的权限或定义者的权限查找调用用户：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">ORA_INVOKING_USER</code> ：使用此函数返回调用当前语句或视图的用户的名称。此函数处理由<code class="codeph">BEQUEATH</code>子句指定的中间视图。如果调用用户是Oracle Database Real Application Security定义的用户，则此函数返回<code class="codeph">XS$NULL</code> 。</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ORA_INVOKING_USERID</code> ：使用此函数返回调用当前语句或视图的用户的标识符（ID）。此函数处理由<code class="codeph">BEQUEATH</code>子句指定的中间视图。如果调用用户是Oracle Database Real Application Security定义的用户，则此函数返回所有Real Application Security会话通用的ID，但与任何数据库用户的ID不同。
                                    </p>
                                    <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT HR输入密码： <span class="italic">密码</span> SELECT ORA_INVOKING_USER FROM DUAL; ORA_INVOKING_USER -------------------- HR</pre></li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E8238F8F-046F-411C-A0D4-BA3581A6907A__GUID-26B4D7B8-C366-41DB-B9AF-4BB23B283A8D">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../dbfsg/configuring-data-security.html#DBFSG436" target="_blank"><span><cite>“Oracle数据库Real Application安全管理员和开发人员指南”，</cite></span></a>以获取有关用于Oracle Database Real Application Security应用程序的类似功能的信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-2897C310-D0B5-4AB0-8237-384196C4EC81" title="CREATE VIEW SQL语句中的BEQEATH子句可以在用户创建的视图中控制定义者的权限和调用者的权限。">视图中的定义者权利和祈求者权利</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG795"></a><div class="props_rev_3"><a id="GUID-6B0BD428-F194-4344-B9EE-02466181EDCB" name="GUID-6B0BD428-F194-4344-B9EE-02466181EDCB"></a><h4 id="DBSEG-GUID-6B0BD428-F194-4344-B9EE-02466181EDCB" class="sect4">找到BEQUEATH DEFINER和BEQUEATH_CURRENT_USER视图</h4>
                  <div>
                     <p>您可以查看视图是<code class="codeph">BEQUEATH DEFINER</code>还是<code class="codeph">BEQUEATH CURRENT_USER</code>视图。
                     </p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要查找视图是<code class="codeph">BEQUEATH DEFINER</code>还是<code class="codeph">BEQUEATH CURRENT_USER</code>视图，请查询该视图的<code class="codeph">*_VIEWS</code>或<code class="codeph">*_VIEWS_AE</code>静态数据字典视图的<code class="codeph">BEQUEATH</code>列。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-6B0BD428-F194-4344-B9EE-02466181EDCB__GUID-F88AA33D-70EA-47E5-9406-E745C6527A75">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">*_VIEWS</code>静态数据字典视图的更多信息，请<a href="../refrn/ALL_VIEWS.html#REFRN20305" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">*_VIEWS_AE</code>静态数据字典视图的更多信息，请<a href="../refrn/ALL_VIEWS_AE.html#REFRN20696" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                           </li>
                        </ul>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">从USER_VIEWS中选择BEQUE，其中VIEW_NAME ='MY_OBJECTS'; BEQUEATH ------------ CURRENT_USER</pre></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-2897C310-D0B5-4AB0-8237-384196C4EC81" title="CREATE VIEW SQL语句中的BEQEATH子句可以在用户创建的视图中控制定义者的权限和调用者的权限。">视图中的定义者权利和祈求者权利</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG977"></a><div class="props_rev_3"><a id="GUID-45E77E8E-587F-42AF-A163-D814264341E2" name="GUID-45E77E8E-587F-42AF-A163-D814264341E2"></a><h3 id="DBSEG-GUID-45E77E8E-587F-42AF-A163-D814264341E2" class="sect3">使用基于代码的访问控制来定义权利和使者的权利</h3>
               <div>
                  <p>基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-7AA2D9C4-DB10-4BF1-AD4C-F48547F7AA82">关于为应用程序使用基于代码的访问控制</a><br>您可以使用基于代码的访问控制（CBAC）来更好地管理定义者权限程序单元。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D7E76448-152C-4207-9D48-FE562E0D911C">谁可以将基于代码的访问控制角色授予程序单元？</a><br>如果满足一组条件，则可以将基于代码的访问控制角色授予程序单元。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6">基于代码的访问控制如何与Invoker的权限计划单元一起使用</a><br>基于代码的访问控制可以在调用用户的上下文中运行程序单元，并且具有与该上下文相关联的角色。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20">基于代码的访问控制如何与Definer权限计划单元一起使用</a><br>基于代码的访问控制可用于保护定义者的权利。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-CD18ADC1-2068-4250-881A-10836818A390">为用户提供CBAC资助的数据库角色授予</a><br><code class="codeph">GRANT</code>语句中的<code class="codeph">DELEGATE</code>选项可以限制负责CBAC授权的用户对角色的权限授予。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-7C59ADD4-BF48-4A16-A2AD-272F710EE48B">向程序单元授予和撤销数据库角色</a><br><code class="codeph">GRANT</code>和<code class="codeph">REVOKE</code>语句可以从程序单元向数据库角色授予数据库角色或从中撤消数据库角色。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D">教程：使用基于代码的访问控制来控制对敏感数据的访问</a><br>本教程演示了如何使用基于代码的访问控制来控制对<code class="codeph">HR</code>模式中敏感数据的访问。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG978"></a><div class="props_rev_3"><a id="GUID-7AA2D9C4-DB10-4BF1-AD4C-F48547F7AA82" name="GUID-7AA2D9C4-DB10-4BF1-AD4C-F48547F7AA82"></a><h4 id="DBSEG-GUID-7AA2D9C4-DB10-4BF1-AD4C-F48547F7AA82" class="sect4">关于为应用程序使用基于代码的访问控制</h4>
                  <div>
                     <p>您可以使用基于代码的访问控制（CBAC）来更好地管理定义者权限程序单元。</p>
                     <p>应用程序必须经常在调用者的环境中运行程序单元，同时需要提升权限。PL / SQL程序传统上利用定义者的权限来临时提升程序的权限。</p>
                     <p>但是，定义者基于权限的程序单元在定义者或程序单元的所有者的上下文中运行，而不是调用者的上下文。此外，使用基于定义者权限的程序通常会导致程序单元获得比所需更多的权限。</p>
                     <p>基于代码的访问控制（CBAC）通过使您能够将数据库角色附加到PL / SQL函数，过程或包来提供解决方案。这些数据库角色在运行时启用，使程序单元能够在调用用户的环境中以所需的权限执行。</p>
                     <p>您可以创建捕获CBAC角色使用的权限分析策略。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="performing-privilege-analysis-find-privilege-use.html#GUID-44CB644B-7B59-4B3B-B375-9F9B96F60186" title="权限分析动态分析用户使用和不使用的权限和角色。">执行权限分析以查找权限使用</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG1039"></a><div class="props_rev_3"><a id="GUID-D7E76448-152C-4207-9D48-FE562E0D911C" name="GUID-D7E76448-152C-4207-9D48-FE562E0D911C"></a><h4 id="DBSEG-GUID-D7E76448-152C-4207-9D48-FE562E0D911C" class="sect4">谁可以将基于代码的访问控制角色授予程序单元？</h4>
                  <div>
                     <p>如果满足一组条件，则可以将基于代码的访问控制角色授予程序单元。</p>
                     <p>这些条件如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>设保人是用户<code class="codeph">SYS</code>或拥有该计划单位。
                           </p>
                        </li>
                        <li>
                           <p>如果授予者拥有程序单元，则授予者必须具有<code class="codeph">GRANT ANY ROLE</code>系统特权，或者具有<code class="codeph">ADMIN</code>或<code class="codeph">DELEGATE</code>选项，以获得他们要授予程序单元的角色。
                           </p>
                        </li>
                        <li>
                           <p>要授予的角色直接授予所有者角色。</p>
                        </li>
                        <li>
                           <p>要授予的角色是标准数据库角色。</p>
                        </li>
                     </ul>
                     <p>如果不满足这三个条件，则错误<code class="codeph">ORA-28702: Program unit string is not owned by the grantor</code>如果不满足第一个条件，则不<code class="codeph">ORA-28702: Program unit string is not owned by the grantor</code> ，并且错误<code class="codeph">ORA-1924: role 'string' not granted or does not exist</code>错误<code class="codeph">ORA-1924: role 'string' not granted or does not exist</code>如果不满足第二和第三个条件，则提出
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-CD18ADC1-2068-4250-881A-10836818A390" title="GRANT语句中的DELEGATE选项可以限制负责CBAC授权的用户对角色的权限授予。">为用户提供CBAC资助的数据库角色授予</a></li>
                           <li><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-7C59ADD4-BF48-4A16-A2AD-272F710EE48B" title="GRANT和REVOKE语句可以从程序单元向数据库角色授予数据库角色或从中撤消数据库角色。">向程序单元授予和撤销数据库角色</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DBSEG980"></a><a id="DBSEG981"></a><a id="DBSEG979"></a><div class="props_rev_3"><a id="GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6" name="GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6"></a><h4 id="DBSEG-GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6" class="sect4">基于代码的访问控制如何与Invoker的权限计划单元一起使用</h4>
                  <div>
                     <p>基于代码的访问控制可以在调用用户的上下文中运行程序单元，并且具有与该上下文相关联的角色。</p>
                     <p>考虑一个场景，其中有两个应用程序用户， <code class="codeph">1</code>和<code class="codeph">2</code> 。应用程序用户<code class="codeph">2</code>创建调用者的权限程序单元，将数据库角色<code class="codeph">2</code>授予调用者权限单元，然后将调用者权限单元的执行权限授予应用程序用户<code class="codeph">1</code> 。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6__CHDHEHGG">图7-1</a>示出了数据库角色<code class="codeph">1</code>和<code class="codeph">2</code>授予应用程序的用户<code class="codeph">1</code>和<code class="codeph">2</code> ，以及调用者的正确的节目单元。
                     </p>
                     <div class="figure" id="GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6__CHDHEHGG">
                        <p class="titleinfigure">图7-1授予应用程序用户和调用者正确程序单元的角色</p><img src="img/dbseg_vm_005.png" alt="下面是图7-1的描述" title="下面是图7-1的描述" longdesc="img_text/dbseg_vm_005.html"><br><a href="img_text/dbseg_vm_005.html">“图7-1授予应用程序用户和调用者正确程序单元的角色”的描述</a></div>
                     <!-- class="figure" -->
                     <p>补助金如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>应用程序用户<code class="codeph">1</code>直接被授予数据库角色<code class="codeph">1</code>和<code class="codeph">4</code> 。
                           </p>
                        </li>
                        <li>
                           <p>应用程序用户<code class="codeph">2</code>直接被授予数据库角色<code class="codeph">2</code> ，其包括应用程序角色<code class="codeph">3</code>和<code class="codeph">4</code> 。
                           </p>
                        </li>
                        <li>
                           <p>调用者的正确程序单元被授予数据库角色<code class="codeph">2</code> 。
                           </p>
                        </li>
                     </ul>
                     <p>当应用程序用户<code class="codeph">1</code>登录并执行调用者权限程序单元时，调用者权限单元执行用户<code class="codeph">1</code>的组合数据库角色和附加到调用者权限单元的数据库角色。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6__CHDDICAG">图7-2</a>显示了执行调用者权限单元的安全上下文。当应用程序用户<code class="codeph">1</code>首次登录时，应用程序用户<code class="codeph">1</code>具有数据库<code class="codeph">PUBLIC</code>角色（默认情况下），以及已授予它的数据库角色<code class="codeph">1</code>和<code class="codeph">4</code> 。应用程序用户<code class="codeph">1</code>接下来执行由应用程序用户<code class="codeph">2</code>创建的调用者权限程序单元。
                     </p>
                     <p>调用者的权限单元在应用程序用户<code class="codeph">1</code>的上下文中执行，并且附加了附加的数据库角色<code class="codeph">2</code> 。包括数据库角色<code class="codeph">3</code>和<code class="codeph">4</code> ，因为它们是数据库角色<code class="codeph">2</code>的一部分。在调用者权限单元退出之后，应用程序用户<code class="codeph">1</code>仅具有已授予它的应用程序角色， <code class="codeph">PUBLIC</code> ，角色<code class="codeph">1</code>和角色<code class="codeph">4</code> 。
                     </p>
                     <div class="figure" id="GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6__CHDDICAG">
                        <p class="titleinfigure">图7-2执行调用者正确的程序单元IR的安全上下文</p><img src="img/dbseg_vm_007.png" alt="下面是图7-2的描述" title="下面是图7-2的描述" longdesc="img_text/dbseg_vm_007.html"><br><a href="img_text/dbseg_vm_007.html">“图7-2执行调用者正确程序单元IR的安全上下文”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG982"></a><a id="DBSEG983"></a><a id="DBSEG671"></a><div class="props_rev_3"><a id="GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20" name="GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20"></a><h4 id="DBSEG-GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20" class="sect4">基于代码的访问控制如何与Definer权限计划单元一起使用</h4>
                  <div>
                     <p>基于代码的访问控制可用于保护定义者的权利。</p>
                     <p>基于代码的访问控制与定义者权限程序单元一起使用，以使程序单元能够使用定义用户的权限运行，具有与该用户关联的组合数据库角色集的权限。</p>
                     <p>考虑应用程序用户<code class="codeph">2</code>创建定义者权限程序单元，将角色<code class="codeph">2</code>授予定义者权限程序单元，然后将定义者权限程序单元的<code class="codeph">EXECUTE</code>特权授予应用程序用户<code class="codeph">1</code> 。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20__CHDEFJDG">图7-3</a>显示了授予应用程序用户<code class="codeph">1</code>和<code class="codeph">2</code>以及定义者权限程序单元的数据库角色。
                     </p>
                     <div class="figure" id="GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20__CHDEFJDG">
                        <p class="titleinfigure">图7-3授予应用程序用户和定义者权限计划单元的角色</p><img src="img/dbseg_vm_006.png" alt="下面是图7-3的描述" title="下面是图7-3的描述" longdesc="img_text/dbseg_vm_006.html"><br><a href="img_text/dbseg_vm_006.html">“图7-3授予应用程序用户和定义者权限程序单元的角色”的描述</a></div>
                     <!-- class="figure" -->
                     <p>补助金如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>应用程序用户<code class="codeph">1</code>直接被授予数据库角色<code class="codeph">1</code>和<code class="codeph">4</code> 。
                           </p>
                        </li>
                        <li>
                           <p>应用程序用户<code class="codeph">2</code>直接被授予数据库角色<code class="codeph">2</code> ，其包括数据库角色<code class="codeph">3</code>和<code class="codeph">4</code> 。
                           </p>
                        </li>
                        <li>
                           <p>定义者的正确程序单元被授予数据库角色<code class="codeph">2</code> 。
                           </p>
                        </li>
                     </ul>
                     <p>当应用程序用户<code class="codeph">1</code>登录并执行定义者正确的节目单元，则该定义者权限单元与应用程序的用户的组合数据库角色执行<code class="codeph">2</code>和连接到定义者权限单元的数据库角色（角色<code class="codeph">2</code> ， <code class="codeph">3</code> ，和<code class="codeph">4</code> ）。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20__CHDGCDHC">图7-4</a>显示了执行定义者正确的程序单元的安全上下文。当应用程序用户<code class="codeph">1</code>首次登录时，应用程序用户<code class="codeph">1</code>具有数据库<code class="codeph">PUBLIC</code>角色（默认情况下），以及已授予它的数据库角色<code class="codeph">1</code>和<code class="codeph">4</code> 。应用程序用户<code class="codeph">1</code>接下来执行由应用程序用户<code class="codeph">2</code>创建的定义者权限程序单元。
                     </p>
                     <p>定义者权限程序单元在应用程序用户<code class="codeph">2</code>的上下文中执行，并且附加有附加数据库角色<code class="codeph">2</code> 。包括数据库角色<code class="codeph">3</code>和<code class="codeph">4</code> ，因为它们是数据库角色<code class="codeph">2</code>的一部分。在定义者权限单元退出后，应用程序用户<code class="codeph">1</code>仅具有已授予它的数据库角色（ <code class="codeph">PUBLIC</code> ，角色<code class="codeph">1</code>和角色<code class="codeph">4</code> ）。
                     </p>
                     <div class="figure" id="GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20__CHDGCDHC">
                        <p class="titleinfigure">图7-4执行定义者权限程序单元DR的安全上下文</p><img src="img/dbseg_vm_008.png" alt="下面是图7-4的描述" title="下面是图7-4的描述" longdesc="img_text/dbseg_vm_008.html"><br><a href="img_text/dbseg_vm_008.html">“图7-4执行定义者权限程序单元DR的安全上下文”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG676"></a><div class="props_rev_3"><a id="GUID-CD18ADC1-2068-4250-881A-10836818A390" name="GUID-CD18ADC1-2068-4250-881A-10836818A390"></a><h4 id="DBSEG-GUID-CD18ADC1-2068-4250-881A-10836818A390" class="sect4">为用户提供CBAC资助的数据库角色授予</h4>
                  <div>
                     <p><code class="codeph">GRANT</code>语句中的<code class="codeph">DELEGATE</code>选项可以限制负责CBAC授权的用户对角色的权限授予。
                     </p>
                     <p>向负责CBAC授权的用户授予数据库角色时，可以在<code class="codeph">GRANT</code>语句中包含<code class="codeph">DELEGATE</code>选项，以防止授予被授予者对角色的额外权限。
                     </p>
                     <p><code class="codeph">DELEGATE</code>选项允许将角色授予程序单元，但不允许将角色授予其他主体或角色本身的管理。您还可以使用<code class="codeph">ADMIN</code>选项进行授权，这允许将角色授予其他主体。<code class="codeph">ADMIN</code>和<code class="codeph">DELEGATE</code>选项都兼容;也就是说，您可以将两者都授予用户，但必须在每个选项的单独<code class="codeph">GRANT</code>语句中执行此操作。要了解如果用户已被授予这些选项的作用，查询<code class="codeph">DELEGATE_OPTION</code>列或<code class="codeph">ADMIN_OPTION</code>任一列<code class="codeph">USER_ROLE_PRIVS</code>或<code class="codeph">DBA_ROLE_PRIVS</code>用户。
                     </p>
                     <p>使用<code class="codeph">DELEGATE</code>和<code class="codeph">ADMIN</code>选项的语法如下：</p><pre class="oac_no_warn" dir="ltr">GRANT <span class="italic">role_list</span>到<span class="italic">user_list</span> WITH <span class="italic">DELEGATE</span> OPTION; GRANT <span class="italic">role_list</span>到<span class="italic">user_list</span> WITH ADMIN OPTION;</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">GRANT cb_role1到usr1 WITH DELEGATE OPTION;使用ADMIN OPTION将cb_role1授予usr1; GRANT cb_role1，cb_role2到usr1，usr2和DELEGATE OPTION; GRANT cb_role1，cb_role2到usr1，usr2和ADMIN OPTION;</pre><p>在多租户环境中，您可以使用<code class="codeph">DELEGATE</code>选项进行常见授权，例如向普通用户授予公共角色，就像使用<code class="codeph">ADMIN</code>选项一样。
                     </p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">GRANT c ## cb_role1到c ## usr1 WITH DELEGATE OPTION CONTAINER = ALL;</pre><p>请注意，CBAC授予自己只能在PDB本地进行。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-CD18ADC1-2068-4250-881A-10836818A390__GUID-1F8D528E-8C11-4FB8-B17E-D883F047F9E6">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">ADMIN</code>选项的更多信息，请<a href="../sqlrf/GRANT.html#SQLRF55020" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG984"></a><div class="props_rev_3"><a id="GUID-7C59ADD4-BF48-4A16-A2AD-272F710EE48B" name="GUID-7C59ADD4-BF48-4A16-A2AD-272F710EE48B"></a><h4 id="DBSEG-GUID-7C59ADD4-BF48-4A16-A2AD-272F710EE48B" class="sect4">向程序单元授予和撤销数据库角色</h4>
                  <div>
                     <p><code class="codeph">GRANT</code>和<code class="codeph">REVOKE</code>语句可以从程序单元向数据库角色授予数据库角色或从中撤消数据库角色。
                     </p>
                     <p>以下语法用于授予或撤消PL / SQL函数，过程或包的数据库角色：</p><pre class="oac_no_warn" dir="ltr">GRANT <span class="italic">role_list</span> TO <span class="italic">code_list</span> REVOKE { <span class="italic">role_list</span> | ALL} FROM <span class="italic">code_list</span>
 </pre><p>在本规范中：</p><pre class="oac_no_warn" dir="ltr">role_list :: = <span class="italic">code-based_role_name</span> [， <span class="italic">role_list</span> ] code_list :: = {{FUNCTION [ <span class="italic">schema</span> 。] <span class="italic">function_name</span> } | {PROCEDURE [ <span class="italic">schema</span> 。] <span class="italic">procedure_name</span> } | {PACKAGE [ <span class="italic">schema</span> 。] <span class="italic">package_name</span> }} [， <span class="italic">code_list</span> ]</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">GRANT cb_role1 TO FUNCTION func1，PACKAGE pack1; GRANT cb_role2，cb_role3 TO FUNCTION HR.func2，PACKAGE SYS.pack2; REVOKE cb_role1 FROM FUNCTION func1，PACKAGE pack1;从函数中删除所有函数HR.func2，PACKAGE SYS.pack2;</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D7E76448-152C-4207-9D48-FE562E0D911C" title="如果满足一组条件，则可以将基于代码的访问控制角色授予程序单元。">谁可以将基于代码的访问控制角色授予程序单元？</a></li>
                           <li><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-CD18ADC1-2068-4250-881A-10836818A390" title="GRANT语句中的DELEGATE选项可以限制负责CBAC授权的用户对角色的权限授予。">为用户提供CBAC资助的数据库角色授予</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DBSEG678"></a><div class="props_rev_3"><a id="GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" name="GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D"></a><h4 id="DBSEG-GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" class="sect4">教程：使用基于代码的访问控制来控制对敏感数据的访问</h4>
                  <div>
                     <p>本教程演示了如何使用基于代码的访问控制来控制对<code class="codeph">HR</code>模式中敏感数据的访问。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-CCB52926-DA6F-4063-8881-F4F180225837">关于本教程</a><br>在本教程中，您将创建一个必须有权访问其部门的特定员工信息的用户。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-9C8DA467-25DF-4093-A004-E08E704821A1">步骤1：创建用户并授予HR CREATE ROLE权限</a><br>首先，您必须创建<code class="codeph">"Finance"</code>用户帐户，然后为<code class="codeph">HR</code>用户授予<code class="codeph">CREATE ROLE</code>权限。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-214608A1-D504-4E9C-81EF-BDBCB7631CD9">第2步：创建print_employees Invoker的权利程序</a><br><code class="codeph">print_employees</code>调用者权限过程显示当前用户部门中的员工信息。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-5B846F6A-87A3-482F-B3D8-E95D04DCF939">第3步：为其创建hr_clerk角色和授予权限</a><br>接下来，您已准备好创建<code class="codeph">hr_clerk</code>角色，该角色必须具有<code class="codeph">print_employees</code>过程的<code class="codeph">EXECUTE</code>特权。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-7316DA6F-4746-43ED-81A6-DBB176227BD7">步骤4：测试基于代码的访问控制HR.print_employees过程</a><br>在此阶段，您已准备好测试基于代码的访问控制<code class="codeph">HR.print_employees</code>过程。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-770D86DD-5B8C-4A11-B4CB-2488C8F0E64B">步骤5：为其创建view_emp_role角色和授予权限</a><br>接下来，用户<code class="codeph">HR</code>必须创建<code class="codeph">view_emp_role</code>角色，然后<code class="codeph">view_emp_role</code>授予权限。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B124BA6A-E0C2-4C7E-9B0D-8FD7BD4810E2">步骤6：再次测试HR.print_employees过程</a><br>有了适当的权限，用户<code class="codeph">"Finance"</code>可以再次尝试<code class="codeph">HR.print_employees</code>过程。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-AC53C480-FB4E-44D5-A08C-091ECD614417">第7步：删除本教程的组件</a><br>如果您不再需要本教程的组件，则可以删除它们。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG679"></a><div class="props_rev_3"><a id="GUID-CCB52926-DA6F-4063-8881-F4F180225837" name="GUID-CCB52926-DA6F-4063-8881-F4F180225837"></a><h5 id="DBSEG-GUID-CCB52926-DA6F-4063-8881-F4F180225837" class="sect5">关于本教程</h5>
                     <div>
                        <p>在本教程中，您将创建一个必须有权访问其部门的特定员工信息的用户。</p>
                        <p></p>
                        <p>但是，表<code class="codeph">HR.EMPLOYEES</code>包含敏感信息，例如员工工资，用户无法访问。您将使用基于代码的访问控制实现访问控制。员工数据将通过调用者权限程序显示给用户。您不会直接向用户授予<code class="codeph">SELECT</code>权限，而是通过数据库角色向调用者权限过程授予<code class="codeph">SELECT</code>权限。在此过程中，您将隐藏敏感信息，例如工资。因为该过程是调用者的权限过程，所以您知道过程中调用者的上下文。在这种情况下，调用者的上下文是财务部门。用户名为<code class="codeph">"Finance"</code> ，因此用户只能访问在财务部门工作的员工的数据。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG680"></a><div class="props_rev_3"><a id="GUID-9C8DA467-25DF-4093-A004-E08E704821A1" name="GUID-9C8DA467-25DF-4093-A004-E08E704821A1"></a><h5 id="DBSEG-GUID-9C8DA467-25DF-4093-A004-E08E704821A1" class="sect5">步骤1：创建用户并授予HR CREATE ROLE权限</h5>
                     <div>
                        <p>首先，您必须创建<code class="codeph">"Finance"</code>用户帐户，然后为<code class="codeph">HR</code>用户授予<code class="codeph">CREATE ROLE</code>权限。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>以具有创建用户帐户和角色权限的管理员身份登录数据库实例。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建<code class="codeph">"Finance"</code>用户帐户。</span><div><pre class="oac_no_warn" dir="ltr">GRANT连接到“财务”IDENTIFIED BY <span class="italic">密码</span> ;</pre><p>确保在显示的情况下输入<code class="codeph">"Finance"</code> ，并用双引号括起来。请遵循<a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle provides a set of minimum requirements for passwords.">密码最低要求中</a>的准则，使用安全<a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle提供了一组密码的最低要求。">密码</a>替换<span class="italic"><code class="codeph">password</code></span> 。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>将<code class="codeph">CREATE ROLE</code>权限授予用户<code class="codeph">HR</code> 。</span><div><pre class="oac_no_warn" dir="ltr">授予HR人力资源;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG681"></a><div class="props_rev_3"><a id="GUID-214608A1-D504-4E9C-81EF-BDBCB7631CD9" name="GUID-214608A1-D504-4E9C-81EF-BDBCB7631CD9"></a><h5 id="DBSEG-GUID-214608A1-D504-4E9C-81EF-BDBCB7631CD9" class="sect5">第2步：创建print_employees Invoker的权利程序</h5>
                     <div>
                        <p><code class="codeph">print_employees</code>调用者权限过程显示当前用户部门中的员工信息。
                        </p>
                        <div class="section">您必须将此过程创建为调用者权限过程，因为您必须知道调用程序在过程中的位置。</div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以用户<code class="codeph">HR</code>身份连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT HR输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>按如下方式创建<code class="codeph">print_employees</code>过程。</span><div><pre class="pre codeblock"><code>创建或替换过程print_employees authid current_user as begin dbms_output.put_line（rpad（'ID'，10）|| rpad（'First Name'，15）|| rpad（'Last Name'，15）|| rpad（'Email' ，15）|| rpad（'电话号码'，20））; for rec in（select e.employee_id，e.first_name，e.last_name，e.email，e.phone_number from hr.employees e，hr.departments d，其中e.department_id = d.department_id和d.department_name = sys_context（' userenv'，'current_user'））循环dbms_output.put_line（rpad（rec.employee_ID，10）|| rpad（rec.first_name，15）|| rpad（rec.last_name，15）|| rpad（rec.email，15 ）|| rpad（rec.phone_number，20））;结束循环;结束; /</code></pre><p>在这个例子中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">dbms_output.put_line</code>打印表头。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">for rec in (select ...</code>查找呼叫者部门的员工信息，本教程是用户<code class="codeph">"Finance"</code>的财务部门。如果您创建了名为<code class="codeph">"Marketing"</code>的用户（也列在<code class="codeph">HR.EMPLOYEES</code>表的<code class="codeph">DEPARTMENT_NAME</code>列中），则该过程可以捕获Marketing员工的信息。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">loop</code>和<code class="codeph">dbms_output.put_line</code>使用财务部门的员工数据填充输出。
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG682"></a><div class="props_rev_3"><a id="GUID-5B846F6A-87A3-482F-B3D8-E95D04DCF939" name="GUID-5B846F6A-87A3-482F-B3D8-E95D04DCF939"></a><h5 id="DBSEG-GUID-5B846F6A-87A3-482F-B3D8-E95D04DCF939" class="sect5">第3步：为其创建hr_clerk角色和授予权限</h5>
                     <div>
                        <p>接下来，您已准备好创建<code class="codeph">hr_clerk</code>角色，该角色必须具有<code class="codeph">print_employees</code>过程的<code class="codeph">EXECUTE</code>特权。
                        </p>
                        <div class="section">创建此角色后，您必须将其授予<code class="codeph">"Finance"</code> 。
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>创建<code class="codeph">hr_clerk</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">创造角色hr_clerk;</pre></div>
                           </li>
                           <li class="stepexpand"><span>将print_employees过程的<code class="codeph">EXECUTE</code>特权授予<code class="codeph">hr_clerk</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">对print_employees执行GRANT EXECUTE TO hr_clerk;</pre></div>
                           </li>
                           <li class="stepexpand"><span>将<code class="codeph">hr_clerk</code>角色授予<code class="codeph">"Finance"</code> 。</span><div><pre class="oac_no_warn" dir="ltr">GRANT hr_clerk TO“Finance”;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG683"></a><div class="props_rev_3"><a id="GUID-7316DA6F-4746-43ED-81A6-DBB176227BD7" name="GUID-7316DA6F-4746-43ED-81A6-DBB176227BD7"></a><h5 id="DBSEG-GUID-7316DA6F-4746-43ED-81A6-DBB176227BD7" class="sect5">步骤4：测试基于代码的访问控制HR.print_employees过程</h5>
                     <div>
                        <p>在此阶段，您已准备好测试基于代码的访问控制<code class="codeph">HR.print_employees</code>过程。
                        </p>
                        <div class="section">要测试基于代码的访问控制<code class="codeph">HR.print_employees</code>过程，用户<code class="codeph">"Finance"</code>必须查询<code class="codeph">HR.EMPLOYEES</code>表并尝试运行<code class="codeph">HR.print_employees</code>过程。
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以<code class="codeph">"Finance"</code>用户身份连接到数据库实例。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT“财务”输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>尝试直接查询<code class="codeph">HR.EMPLOYEES</code>表。</span><div><pre class="oac_no_warn" dir="ltr">选择EMPLOYEE_ID，FIRST_NAME，LAST_NAME，来自HR.EMPLOYEES的SALARY;</pre><p>查询失败，因为用户<code class="codeph">Finance</code>没有<code class="codeph">HR.EMPLOYEES</code>的<code class="codeph">SELECT</code>权限。</p><pre class="oac_no_warn" dir="ltr">第1行的错误：ORA-00942：表或视图不存在</pre></div>
                           </li>
                           <li class="stepexpand"><span>执行<code class="codeph">HR.print_employees</code>过程。</span><div><pre class="oac_no_warn" dir="ltr">EXEC HR.print_employees;</pre><p>查询失败，因为用户<code class="codeph">"Finance"</code>没有相应的权限。
                                 </p><pre class="oac_no_warn" dir="ltr">第1行的错误：ORA-00942：表或视图不存在ORA-06512：在“HR.PRINT_EMPLOYEES”，第13ORA-06512行：第1行</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG684"></a><div class="props_rev_3"><a id="GUID-770D86DD-5B8C-4A11-B4CB-2488C8F0E64B" name="GUID-770D86DD-5B8C-4A11-B4CB-2488C8F0E64B"></a><h5 id="DBSEG-GUID-770D86DD-5B8C-4A11-B4CB-2488C8F0E64B" class="sect5">步骤5：为其创建view_emp_role角色和授予权限</h5>
                     <div>
                        <p>接下来，用户<code class="codeph">HR</code>必须创建<code class="codeph">view_emp_role</code>角色，然后<code class="codeph">view_emp_role</code>授予权限。
                        </p>
                        <div class="section">用户<code class="codeph">HR</code>将<code class="codeph">SELECT</code>权限<code class="codeph">HR.EMPLOYEES</code>和<code class="codeph">HR.DEPARTMENTS</code>授予<code class="codeph">view_emp_role</code>角色，然后将<code class="codeph">HR.EMPLOYEES</code>和<code class="codeph">HR.DEPARTMENTS</code>上的<code class="codeph">SELECT</code>授予<code class="codeph">view_emp_role</code>角色。
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以用户<code class="codeph">HR</code>身份连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT HR输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建<code class="codeph">view_emp_role</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">CREATE ROLE view_emp_role;</pre></div>
                           </li>
                           <li class="stepexpand"><span>将<code class="codeph">HR.EMPLOYEES</code>和<code class="codeph">HR.DEPARTMENTS</code>的<code class="codeph">SELECT</code>权限授予<code class="codeph">view_emp_role</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">在HR.EMPLOYEES上选择GRANT到view_emp_role;在HR.DEPARTMENTS上选择GRY选择view_emp_role;</pre></div>
                           </li>
                           <li class="stepexpand"><span>将<code class="codeph">view_emp_role</code>角色授予<code class="codeph">HR.print_employees</code>调用者权限过程。</span><div><pre class="oac_no_warn" dir="ltr">GRANT view_emp_role程序HR.print_employees;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG685"></a><div class="props_rev_3"><a id="GUID-B124BA6A-E0C2-4C7E-9B0D-8FD7BD4810E2" name="GUID-B124BA6A-E0C2-4C7E-9B0D-8FD7BD4810E2"></a><h5 id="DBSEG-GUID-B124BA6A-E0C2-4C7E-9B0D-8FD7BD4810E2" class="sect5">步骤6：再次测试HR.print_employees过程</h5>
                     <div>
                        <p>有了适当的权限，用户<code class="codeph">"Finance"</code>可以再次尝试<code class="codeph">HR.print_employees</code>过程。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>以<code class="codeph">"Finance"</code>用户身份连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT“财务”输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>将服务器输出设置为显示。</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON;</pre></div>
                           </li>
                           <li class="stepexpand"><span>尝试直接查询<code class="codeph">HR.EMPLOYEES</code>表。</span><div><pre class="oac_no_warn" dir="ltr">选择EMPLOYEE_ID，FIRST_NAME，LAST_NAME，来自HR.EMPLOYEES的SALARY;</pre><p>查询失败。</p><pre class="oac_no_warn" dir="ltr">第1行的错误：ORA-00942：表或视图不存在</pre></div>
                           </li>
                           <li class="stepexpand"><span>执行<code class="codeph">HR.print_employees</code>过程以显示员工信息。</span><div><pre class="oac_no_warn" dir="ltr">EXEC HR.print_employees;</pre><p>通话成功。</p><pre class="oac_no_warn" dir="ltr">ID名字姓氏电子邮件电话号码108 Nancy Greenberg NGREENBE 515.124.4569 109 Daniel Faviet DFAVIET 515.124.4169 110 John Chen JCHEN 515.124.4269 111 Ismael Sciarra ISCIARRA 515.124.4369 112 Jose Manuel Urman JMURMAN 515.124.4469 113 Luis Popp LPOPP 515.124。 4567 PL / SQL过程成功完成。</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG947"></a><div class="props_rev_3"><a id="GUID-AC53C480-FB4E-44D5-A08C-091ECD614417" name="GUID-AC53C480-FB4E-44D5-A08C-091ECD614417"></a><h5 id="DBSEG-GUID-AC53C480-FB4E-44D5-A08C-091ECD614417" class="sect5">第7步：删除本教程的组件</h5>
                     <div>
                        <p>如果您不再需要本教程的组件，则可以删除它们。</p>
                        <ol>
                           <li class="stepexpand"><span>以具有管理权限的用户身份连接。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT sec_admin输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>删除用户<code class="codeph">"Finance"</code> 。</span><div><pre class="oac_no_warn" dir="ltr">DROP USER“财务”;</pre></div>
                           </li>
                           <li class="stepexpand"><span>删除<code class="codeph">hr_clerk</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">DROP ROLE hr_clerk;</pre></div>
                           </li>
                           <li class="stepexpand"><span>以用户<code class="codeph">HR</code>身份连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT HR输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>删除view_emp_role角色和<code class="codeph">HR.print_employees</code>过程。</span><div><pre class="oac_no_warn" dir="ltr">DROP ROLE view_emp_role; DROP PROCEDURE print_employees;</pre></div>
                           </li>
                           <li class="stepexpand"><span>以管理用户身份进行连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT sec_admin输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>撤消<code class="codeph">HR</code>的<code class="codeph">CREATE ROLE</code>权限。</span><div><pre class="oac_no_warn" dir="ltr">REVOKE从HR创造角色;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-B354724F-BD35-47C7-A699-93C2B6389555" name="GUID-B354724F-BD35-47C7-A699-93C2B6389555"></a><h3 id="DBSEG-GUID-B354724F-BD35-47C7-A699-93C2B6389555" class="sect3">控制数据库链接的定义者权限特权</h3>
               <div>
                  <p>如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-ABDCBD05-6B09-4A4D-8B2D-0DE70A165050">关于控制数据库链接的定义者权限权限</a><br>当定义者的权限过程连接到数据库链接时，数据库链接上的操作应使用过程所有者的凭据。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-F5B2E3CA-0D55-470C-8A08-A1547ADD8B40">向其他用户授予INHERIT REMOTE PRIVILEGES特权</a><br><code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限使当前用户对数据库中的已连接用户具有显式权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-647FDF5D-1037-4182-8B47-5F0EE3544C41">示例：在连接的用户上授予INHERIT REMOTE PRIVILEGES</a><br>您可以将已连接用户的<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限授予当前用户。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-8F17EFE1-6F10-4FB1-BE7D-EF1D4CFE0044">向其他用户授予INHERIT ANY REMOTE PRIVILEGES特权</a><br><code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限允许被授权者用户以任何用户身份打开<code class="codeph"><span class="codeinlineitalic">connected_user</span></code>数据库链接。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-AE54CF0B-B3B3-4067-B0B2-53D2F6FAF4EF">撤销INHERIT [ANY] REMOTE PRIVILEGES权限</a><br>撤销<code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限的方法有所不同。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-9B46EE01-E7D5-41C6-947D-AB090430CFFE">示例：撤消INHERIT REMOTE PRIVILEGES权限</a><br><code class="codeph">REVOKE</code> SQL语句可以撤消<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-77A565F9-65D6-404D-A5CE-CD2D4E5F5FA4">示例：从PUBLIC撤消INHERIT REMOTE PRIVILEGES权限</a><br><code class="codeph">REVOKE</code> SQL语句可以撤消<code class="codeph">PUBLIC</code>以及各个过程所有者的<code class="codeph">INHERIT REMOTE PRIVILEGES</code> 。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23">教程：在定义者权限过程中使用数据库链接</a><br>本教程演示了<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限如何在使用数据库链接的定义者权限过程中工作。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-ABDCBD05-6B09-4A4D-8B2D-0DE70A165050" name="GUID-ABDCBD05-6B09-4A4D-8B2D-0DE70A165050"></a><h4 id="DBSEG-GUID-ABDCBD05-6B09-4A4D-8B2D-0DE70A165050" class="sect4">关于控制数据库链接的定义者权限权限</h4>
                  <div>
                     <p>当定义者的权限过程连接到数据库链接时，数据库链接上的操作应使用过程所有者的凭据。</p>
                     <p>当连接的用户数据库链接与定义者权限过程一起使用时， <code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限适用。这些权限允许使用登录用户的凭据进行连接的用户数据库链接操作和定义权限过程。
                     </p>
                     <p>您可以授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限，以便调用定义者权限过程的用户可以使用定义者权限块中的连接用户数据库链接。定义者权限过程使用过程所有者的特权执行。但是，连接的用户数据库链接操作必须具有登录用户的凭据。因此，需要授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>特权，以便在定义者权限块内启用数据库链接操作。
                     </p>
                     <p>请注意，在升级过程中，默认情况下不会向任何现有用户授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限。
                     </p>
                     <p><code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限仅适用于用户尝试在定义者权限过程中连接到用户数据库链接的情况。此外，这些权限适用于私有创建和公开创建的数据库链接。默认情况下，数据库链接创建为专用链接。此外，默认情况下，不会向<code class="codeph">PUBLIC</code>授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code> 。</p>
                     <p>您可以执行这些权限授予的方式如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">GRANT INHERIT REMOTE PRIVILEGES ON USER <span class="codeinlineitalic">dbuser_1</span> TO <span class="codeinlineitalic">dbuser_2</span></code> ：在这种情况下， <code class="codeph">dbuser_1</code>可以明确授予的<code class="codeph">INHERIT REMOTE PRIVILEGE</code>特权<code class="codeph">dbuser_2</code>和使用用户定义者权限程序<code class="codeph">dbuser_2</code>拥有。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GRANT INHERIT REMOTE PRIVILEGES ON USER <span class="codeinlineitalic">dbuser_1</span> TO PUBLIC</code> 。在这种情况下， <code class="codeph">dbuser_1</code>将<code class="codeph">INHERIT REMOTE PRIVILEGE</code>权限授予public。此授权使<code class="codeph">dbuser_1</code>能够使用任何其他用户拥有的定义者权限过程。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GRANT INHERIT ANY REMOTE PRIVILEGES TO <span class="codeinlineitalic">dbuser_2</span></code> ：在这种情况下，任何用户都可以使用<code class="codeph">dbuser_2</code>拥有的定义者权限过程。
                           </p>
                        </li>
                     </ul>
                     <p>如果用户没有<code class="codeph">INHERIT REMOTE PRIVILEGE</code>权限并尝试执行定义者权限权限，则<code class="codeph">ORA-25433: User does not have INHERIT REMOTE PRIVILEGES</code>错误。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-F5B2E3CA-0D55-470C-8A08-A1547ADD8B40" name="GUID-F5B2E3CA-0D55-470C-8A08-A1547ADD8B40"></a><h4 id="DBSEG-GUID-F5B2E3CA-0D55-470C-8A08-A1547ADD8B40" class="sect4">向其他用户授予INHERIT REMOTE PRIVILEGES特权</h4>
                  <div>
                     <p><code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限使当前用户对数据库中的已连接用户具有显式权限。
                     </p>
                     <p>授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限的语法如下：</p><pre class="oac_no_warn" dir="ltr">GRANT INHERIT REMOTE特权用户<span class="italic">connected_user</span> TO <span class="italic">CURRENT_USER：</span></pre><p>在本规范中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph"><span class="codeinlineitalic">connected_user</span></code>是运行定义者权限过程的用户。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph"><span class="codeinlineitalic">current_user</span></code>是拥有定义者正确程序的用户。该值必须是数据库用户帐户。作为向过程所有者授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>特权的替代方法，您可以将该特权授予另一个授予该过程的角色。
                           </p>
                        </li>
                     </ul>
                     <p>拥有定义者权限过程的用户或角色必须具有将运行其定义者权限过程的用户授予的<code class="codeph">INHERIT REMOTE PRIVILEGES</code>特权。
                     </p>
                     <p>任何用户都可以向他们想要运行其定义者权限过程的用户授予或撤销其自身的<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-647FDF5D-1037-4182-8B47-5F0EE3544C41" name="GUID-647FDF5D-1037-4182-8B47-5F0EE3544C41"></a><h4 id="DBSEG-GUID-647FDF5D-1037-4182-8B47-5F0EE3544C41" class="sect4">示例：在连接的用户上授予INHERIT REMOTE PRIVILEGES</h4>
                  <div>
                     <p>您可以将已连接用户的<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限授予当前用户。
                     </p>
                     <p>在此示例中，连接的用户<code class="codeph">jward</code>必须对当前用户<code class="codeph">ebrown</code>具有远程权限。这使得<code class="codeph">jward</code>能够执行<code class="codeph">ebrown</code>创建的定义者正确的过程。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-647FDF5D-1037-4182-8B47-5F0EE3544C41__GRANTINGINHERITREMOTEPRIVILEGESONAC-FB84E1C6">实施例7-4</a>示出了管理员（或用户如何<code class="codeph">jward</code> ）可以授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>用户<code class="codeph">jward</code>到用户<code class="codeph">ebrown</code> 。此权限授予允许<code class="codeph">ebrown</code>写入或将来写入的任何定义者权限过程在过程运行时访问<code class="codeph">ebrown</code>的权限。
                     </p>
                     <div class="example" id="GUID-647FDF5D-1037-4182-8B47-5F0EE3544C41__GRANTINGINHERITREMOTEPRIVILEGESONAC-FB84E1C6">
                        <p class="titleinexample">示例7-4向当前用户授予已连接用户的INHERIT REMOTE PRIVILEGES</p><pre class="oac_no_warn" dir="ltr">授予用户jward到ebrown的GRANT INEREIT REMOTE PRIVILEGES;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-8F17EFE1-6F10-4FB1-BE7D-EF1D4CFE0044" name="GUID-8F17EFE1-6F10-4FB1-BE7D-EF1D4CFE0044"></a><h4 id="DBSEG-GUID-8F17EFE1-6F10-4FB1-BE7D-EF1D4CFE0044" class="sect4">向其他用户授予INHERIT ANY REMOTE PRIVILEGES特权</h4>
                  <div>
                     <p><code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限允许被授权者用户以任何用户身份打开<code class="codeph"><span class="codeinlineitalic">connected_user</span></code>数据库链接。
                     </p>
                     <p>与所有<code class="codeph">ANY</code>权限一样， <code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>是一项强大的权限，只能授予可信用户。默认情况下，用户<code class="codeph">SYS</code>具有<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>系统特权<code class="codeph">WITH GRANT OPTION</code> 。要查找已被授予<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限的用户，请查询<code class="codeph">DBA_SYS_PRIVS</code>数据字典视图。
                     </p>
                     <p>为了在多租户环境中获得更好的安全性，Oracle建议您使用PDB锁定配置文件保护<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限。PDB锁定配置文件可防止本地可插拔数据库（PDB）用户以普通用户身份打开连接的用户数据库链接，而不管PDB用户具有的<code class="codeph">INHERIT REMOTE PRIVILEGE</code>类型。如果PDB受PDB锁定配置文件保护，则授予诸如<code class="codeph">GRANT INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">GRANT INHERIT ANY REMOTE</code>权限等授权成功，但只要PDB锁定继续，这些授权的影响就不适用。
                     </p>
                     <p>授予<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限的语法如下：</p><pre class="oac_no_warn" dir="ltr">授予<span class="italic">current_user</span>任何远程特权;</pre><p>在本规范中， <code class="codeph"><span class="codeinlineitalic">current_user</span></code>是拥有define的权限过程的用户。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="configuring-privilege-and-role-authorization.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。">使用PDB锁定配置文件限制PDB上的操作</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-AE54CF0B-B3B3-4067-B0B2-53D2F6FAF4EF" name="GUID-AE54CF0B-B3B3-4067-B0B2-53D2F6FAF4EF"></a><h4 id="DBSEG-GUID-AE54CF0B-B3B3-4067-B0B2-53D2F6FAF4EF" class="sect4">撤销INHERIT [ANY] REMOTE PRIVILEGES权限</h4>
                  <div>
                     <p>撤销<code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限的方法有所不同。
                     </p>
                     <p>用户可以从其他用户撤消<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限。必须由具有管理权限的用户撤消<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限。
                     </p>
                     <p>撤销语法如下</p><pre class="oac_no_warn" dir="ltr">REVOKE INHERIT用户<span class="italic">connected_user</span> FROM <span class="italic">CURRENT_USER</span> REMOTE特权;</pre><p>在本规范中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph"><span class="codeinlineitalic">connected_user</span></code>是运行定义者权限过程的用户。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph"><span class="codeinlineitalic">current_user</span></code>是拥有定义者权限过程的用户。
                           </p>
                        </li>
                     </ul>
                     <p>如果要撤消用户的<code class="codeph">INHERIT REMOTE PRIVILEGES</code>或<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限，请使用标准撤销语法，如下所示：</p><pre class="oac_no_warn" dir="ltr">从<span class="italic">connected_user</span>撤消INMEIT REMOTE特权;改进来自<span class="italic">current_user的</span>任何远程特权;</pre></div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-AE54CF0B-B3B3-4067-B0B2-53D2F6FAF4EF__GUID-DE36BA66-012E-44AD-84EB-F22BF589BD52">
                        <p class="notep1">也可以看看：</p>有关<code class="codeph">REVOKE</code> SQL语句的详细信息，请<a href="../sqlrf/REVOKE.html#SQLRF01609" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-9B46EE01-E7D5-41C6-947D-AB090430CFFE" name="GUID-9B46EE01-E7D5-41C6-947D-AB090430CFFE"></a><h4 id="DBSEG-GUID-9B46EE01-E7D5-41C6-947D-AB090430CFFE" class="sect4">示例：撤消INHERIT REMOTE PRIVILEGES权限</h4>
                  <div>
                     <p><code class="codeph">REVOKE</code> SQL语句可以撤消<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限。
                     </p>
                     <p>撤消<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限后，如果用户<code class="codeph">jward</code>执行<code class="codeph">jward</code>拥有的定义者权限过程，则定义者权限过程内连接的用户数据库链接上的任何操作都将失败，因为<code class="codeph">jward</code>明确拒绝了<code class="codeph">ebrown</code>打开连接的用户数据库的权限使用<code class="codeph">jward</code>的凭据链接。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-9B46EE01-E7D5-41C6-947D-AB090430CFFE__EXAMPLETITLE-FB8B3449">例7-5</a>显示了如何从过程所有者<code class="codeph">ebrown</code>撤消连接用户<code class="codeph">jward</code>上的<code class="codeph">INHERIT REMOTE PRIVILEGES</code>过程。
                     </p>
                     <div class="example" id="GUID-9B46EE01-E7D5-41C6-947D-AB090430CFFE__EXAMPLETITLE-FB8B3449">
                        <p class="titleinexample">示例7-5撤消INHERIT REMOTE PRIVILEGES权限</p><pre class="oac_no_warn" dir="ltr">从ebrown转发用户jward上的内容远程特权;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-77A565F9-65D6-404D-A5CE-CD2D4E5F5FA4" name="GUID-77A565F9-65D6-404D-A5CE-CD2D4E5F5FA4"></a><h4 id="DBSEG-GUID-77A565F9-65D6-404D-A5CE-CD2D4E5F5FA4" class="sect4">示例：从PUBLIC撤消INHERIT REMOTE PRIVILEGES权限</h4>
                  <div>
                     <p><code class="codeph">REVOKE</code> SQL语句可以撤消<code class="codeph">PUBLIC</code>以及各个过程所有者的<code class="codeph">INHERIT REMOTE PRIVILEGES</code> 。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-77A565F9-65D6-404D-A5CE-CD2D4E5F5FA4__REVOKINGTHEINHERITREMOTEPRIVILEGESP-FB8C18FC">例7-6</a>显示了如何从<code class="codeph">PUBLIC</code>撤消此权限。</p>
                     <div class="example" id="GUID-77A565F9-65D6-404D-A5CE-CD2D4E5F5FA4__REVOKINGTHEINHERITREMOTEPRIVILEGESP-FB8C18FC">
                        <p class="titleinexample">示例7-6从PUBLIC撤消INHERIT REMOTE PRIVILEGES权限</p><pre class="oac_no_warn" dir="ltr">从公共场所撤回内容远程特权;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" name="GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23"></a><h4 id="DBSEG-GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" class="sect4">教程：在定义者权限过程中使用数据库链接</h4>
                  <div>
                     <p>本教程演示了<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限如何在使用数据库链接的定义者权限过程中工作。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-8E3C97BB-69E5-4845-AEC4-4F5933AD1962">关于本教程</a><br>在本教程中，您将测试权限授予和撤消<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-0760779E-07C5-4800-8364-4A4571E9A87F">第1步：创建用户帐户</a><br>您必须创建一个用户，该用户创建具有数据库链接的定义者权限过程，以及执行此过程的第二个用户。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-986124C5-BCDC-4A27-893A-D443AFC2417A">步骤2：作为用户dbuser2，创建一个表来存储用户ID</a><br>此表中的用户标识是数据库链接使用的标识。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-5C6C0986-4532-4FE7-8AC7-9F47C927DCC3">步骤3：作为用户dbuser1，创建数据库链接和定义者的权限过程</a><br>用户<code class="codeph">dbuser1</code>已准备好创建数据库链接，然后创建引用数据库链接的定义者权限过程。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-9A2A58FB-2BC0-412F-9099-8F0084FABCF1">第4步：测试定义者的权利程序</a><br>用户<code class="codeph">dbuser2</code>必须授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>来<code class="codeph">dbuser1</code>的定义者权限程序，可以测试之前。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-562B2E94-D52A-47B0-9588-4E9E1BEDEA51">第5步：删除本教程的组件</a><br>如果您不再需要本教程的组件，则可以删除它们。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-8E3C97BB-69E5-4845-AEC4-4F5933AD1962" name="GUID-8E3C97BB-69E5-4845-AEC4-4F5933AD1962"></a><h5 id="DBSEG-GUID-8E3C97BB-69E5-4845-AEC4-4F5933AD1962" class="sect5">关于本教程</h5>
                     <div>
                        <p>在本教程中，您将测试权限授予和撤消<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限。
                        </p>
                        <p>要实现此目的，您必须创建两个用户，一个创建引用数据库链接的定义者权限过程，另一个用户执行此定义者权限过程。两个用户在其模式中创建相同的查找表。定义者的权限过程必须使第二个用户能够查询属于定义者权限用户的查找表。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" title="本教程演示了INHERIT REMOTE PRIVILEGES权限如何在使用数据库链接的定义者权限过程中工作。">教程：在定义者权限过程中使用数据库链接</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-0760779E-07C5-4800-8364-4A4571E9A87F" name="GUID-0760779E-07C5-4800-8364-4A4571E9A87F"></a><h5 id="DBSEG-GUID-0760779E-07C5-4800-8364-4A4571E9A87F" class="sect5">第1步：创建用户帐户</h5>
                     <div>
                        <p>您必须创建一个用户，该用户创建具有数据库链接的定义者权限过程，以及执行此过程的第二个用户。</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以具有创建用户权限和执行权限授予的用户身份进行连接。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin输入密码： <span class="italic">密码</span></pre></div>
                           </li>
                           <li class="stepexpand"><span>创建用户帐户，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">GRANT CONNECT，RESOURCE，UNLIMITED TABLESPACE to dbuser1 IDENTIFIED BY <span class="italic">password</span> ; GRANT CONNECT，RESOURCE，UNLIMITED TABLESPACE to dbuser2 IDENTIFIED BY <span class="italic">password</span> ;</pre></div>
                              <div>请遵循<a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle provides a set of minimum requirements for passwords.">密码最低要求中</a>的准则，使用安全<a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle提供了一组密码的最低要求。">密码</a>替换<span class="italic"><code class="codeph">password</code></span> 。
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" title="本教程演示了INHERIT REMOTE PRIVILEGES权限如何在使用数据库链接的定义者权限过程中工作。">教程：在定义者权限过程中使用数据库链接</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-986124C5-BCDC-4A27-893A-D443AFC2417A" name="GUID-986124C5-BCDC-4A27-893A-D443AFC2417A"></a><h5 id="DBSEG-GUID-986124C5-BCDC-4A27-893A-D443AFC2417A" class="sect5">步骤2：作为用户dbuser2，创建一个表来存储用户ID</h5>
                     <div>
                        <p>此表中的用户标识是数据库链接使用的标识。</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以用户<code class="codeph">dbuser2</code>身份连接到实例<code class="codeph">inst1</code> 。</span><div><pre class="oac_no_warn" dir="ltr">connect dbuser2 @ inst1输入密码： <span class="italic">密码</span></pre></div>
                           </li>
                           <li class="stepexpand"><span>创建下表：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE dbusertab（ID NUMBER（2））;</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用ID值<code class="codeph">10</code>填充此表。</span><div><pre class="oac_no_warn" dir="ltr">插入到dbusertab VALUES（10）;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" title="本教程演示了INHERIT REMOTE PRIVILEGES权限如何在使用数据库链接的定义者权限过程中工作。">教程：在定义者权限过程中使用数据库链接</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-5C6C0986-4532-4FE7-8AC7-9F47C927DCC3" name="GUID-5C6C0986-4532-4FE7-8AC7-9F47C927DCC3"></a><h5 id="DBSEG-GUID-5C6C0986-4532-4FE7-8AC7-9F47C927DCC3" class="sect5">步骤3：作为用户dbuser1，创建数据库链接和定义者的权限过程</h5>
                     <div>
                        <p>用户<code class="codeph">dbuser1</code>已准备好创建数据库链接，然后创建引用数据库链接的定义者权限过程。
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以用户<code class="codeph">dbuser1</code>身份连接到实例<code class="codeph">inst1</code> 。</span><div><pre class="oac_no_warn" dir="ltr">connect dbuser1 @ inst1输入密码： <span class="italic">密码</span></pre></div>
                           </li>
                           <li class="stepexpand"><span>创建数据库链接，该链接将在定义者的权限过程中使用。</span><div><pre class="oac_no_warn" dir="ltr">创建数据库链接dblink使用'inst1';</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建一个<code class="codeph">dbusertab</code>表，然后使用ID <code class="codeph">20</code>填充它。</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE DBUSERTAB（ID NUMBER（2））;插入到dbusertab VALUES（20）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建一个定义者权限过程，其中包含对数据库lnk的引用</span><div><pre class="oac_no_warn" dir="ltr">创建或替换过程test_remote_db_link AS v_id varchar（50）; BEGIN SELECT ID INTO v_id FROM dbusertab @ dblink; DBMS_OUTPUT.PUT_LINE（'v_id：'|| v_id）;结束 ; /</pre></div>
                           </li>
                           <li class="stepexpand"><span>测试定义者的权利程序。</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON EXEC test_remote_db_link;</pre></div>
                              <div>
                                 <p>输出应该如下，表明用户<code class="codeph">dbuser1</code>已经在他自己的表<code class="codeph">dbusertab</code>版本上执行了该过程：</p><pre class="oac_no_warn" dir="ltr">v_id：20</pre></div>
                           </li>
                           <li class="stepexpand"><span>授予用户<code class="codeph">dbuser2</code>对<code class="codeph">test_remote_db_link</code>过程的<code class="codeph">EXECUTE</code>特权。</span><div><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON test_remote_db_link TO dbuser2;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" title="本教程演示了INHERIT REMOTE PRIVILEGES权限如何在使用数据库链接的定义者权限过程中工作。">教程：在定义者权限过程中使用数据库链接</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-9A2A58FB-2BC0-412F-9099-8F0084FABCF1" name="GUID-9A2A58FB-2BC0-412F-9099-8F0084FABCF1"></a><h5 id="DBSEG-GUID-9A2A58FB-2BC0-412F-9099-8F0084FABCF1" class="sect5">第4步：测试定义者的权利程序</h5>
                     <div>
                        <p>用户<code class="codeph">dbuser2</code>必须授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>来<code class="codeph">dbuser1</code>的定义者权限程序，可以测试之前。
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以用户<code class="codeph">dbuser2</code>身份连接到实例<code class="codeph">inst1</code> 。</span><div><pre class="oac_no_warn" dir="ltr">connect dbuser2 @ inst1输入密码： <span class="italic">密码</span></pre></div>
                           </li>
                           <li class="stepexpand"><span>将用户<code class="codeph">dbuser2</code>的<code class="codeph">INHERIT REMOTE PRIVILEGE</code>权限<code class="codeph">dbuser2</code> <code class="codeph">dbuser1</code> 。</span><div><pre class="oac_no_warn" dir="ltr">授予用户dbuser2 TO dbuser1的GRANT INHERIT REMOTE PRIVILEGES;</pre></div>
                           </li>
                           <li class="stepexpand"><span>重新登录，因为授权在您开始新会话之前不会生效。</span><div><pre class="oac_no_warn" dir="ltr">connect dbuser2 @ inst1输入密码： <span class="italic">密码</span></pre></div>
                           </li>
                           <li class="stepexpand"><span>执行<code class="codeph">test_remote_db_link</code>定义者的权限过程：</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON EXEC dbuser1.test_remote_db_link;</pre></div>
                              <div>输出显示以下内容，这表明用户<code class="codeph">dbuser1</code>能够使用数据库链接连接到的模式<code class="codeph">dbuser2</code>并访问在值<code class="codeph">dbusertab</code>表中<code class="codeph">dbuser2</code>的架构。<pre class="oac_no_warn" dir="ltr">v_id：10</pre></div>
                           </li>
                           <li class="stepexpand"><span>从<code class="codeph">dbuser1</code>撤消<code class="codeph">dbuser2</code>上的<code class="codeph">INHERIT REMOTE PRIVILEGE</code>权限。</span><div><pre class="oac_no_warn" dir="ltr">在用户dbuser2 FROM dbuser1上修改内容远程特权;</pre></div>
                           </li>
                           <li class="stepexpand"><span>尝试再次执行<code class="codeph">test_remote_db_link</code>定义者权限过程。</span><div><pre class="oac_no_warn" dir="ltr">EXEC dbuser1.test_remote_db_link;</pre></div>
                              <div>
                                 <p><code class="codeph">ORA-25433: User DBUSER1 does not have INHERIT REMOTE PRIVILEGES on connected user DBUSER2</code>错误应该出现。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" title="本教程演示了INHERIT REMOTE PRIVILEGES权限如何在使用数据库链接的定义者权限过程中工作。">教程：在定义者权限过程中使用数据库链接</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-562B2E94-D52A-47B0-9588-4E9E1BEDEA51" name="GUID-562B2E94-D52A-47B0-9588-4E9E1BEDEA51"></a><h5 id="DBSEG-GUID-562B2E94-D52A-47B0-9588-4E9E1BEDEA51" class="sect5">第5步：删除本教程的组件</h5>
                     <div>
                        <p>如果您不再需要本教程的组件，则可以删除它们。</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以具有删除用户帐户和数据库链接权限的用户身份进行连接</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">connect sec_admin输入密码： <span class="italic">密码</span></pre></div>
                           </li>
                           <li class="stepexpand"><span>删除用户帐户。</span><div><pre class="oac_no_warn" dir="ltr">DROP USER dbuser1 CASCADE; DROP USER dbuser2 CASCADE;</pre></div>
                           </li>
                           <li class="stepexpand"><span>删除<code class="codeph">dblink</code>数据库链接。</span><div><pre class="oac_no_warn" dir="ltr">DROP PUBLIC DATABASE LINK dblink;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" title="本教程演示了INHERIT REMOTE PRIVILEGES权限如何在使用数据库链接的定义者权限过程中工作。">教程：在定义者权限过程中使用数据库链接</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
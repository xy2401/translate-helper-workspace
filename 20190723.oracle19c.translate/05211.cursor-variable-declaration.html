<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="A cursor variable is like an explicit cursor that is not limited to one query."></meta>
      <meta name="description" content="A cursor variable is like an explicit cursor that is not limited to one query."></meta>
      <title>游标变量声明</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database PL/SQL Language Reference "></meta>
      <meta property="og:description" content="A cursor variable is like an explicit cursor that is not limited to one query."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database PL/SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-13T20:26:20-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96448-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="cursor-FOR-LOOP-statement.html" title="Previous" type="text/html"></link>
      <link rel="next" href="datatype-attribute.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="LNPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="cursor-FOR-LOOP-statement.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="datatype-attribute.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库PL / SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="plsql-language-elements.html" property="item" typeof="WebPage"><span property="name">PL / SQL语言元素</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">游标变量声明</li>
            </ol>
            <a id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D" name="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D"></a><a id="LNPLS1153"></a><a id="LNPLS1154"></a><a id="LNPLS1046"></a><a id="LNPLS1047"></a><a id="LNPLS1155"></a><a id="LNPLS1156"></a><a id="LNPLS1157"></a><a id="LNPLS1158"></a><a id="LNPLS1159"></a><a id="LNPLS1160"></a><a id="LNPLS1161"></a><a id="LNPLS1162"></a><a id="LNPLS1163"></a><a id="LNPLS1164"></a><a id="LNPLS1165"></a><a id="LNPLS1166"></a><a id="LNPLS1167"></a><a id="LNPLS1168"></a><a id="LNPLS01312"></a>
            
            <h2 id="LNPLS-GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D" class="sect2"><span class="enumeration_section">13.18</span>游标变量声明</h2>
         </header>
         <div class="ind">
            <div>
               <p>游标变量类似于显式游标，不限于一个查询。</p>
               <div class="section">
                  <p>要创建游标变量，请声明预定义类型<code class="codeph">SYS_REFCURSOR</code>的变量或定义<code class="codeph">REF</code> <code class="codeph">CURSOR</code>类型，然后声明该类型的变量。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__CJABEBDA">
                  <p class="subhead1" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__GUID-D013E078-65D0-4090-8055-CB31CE26B42D">游标变量的限制</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您不能在游标<code class="codeph">FOR</code> <code class="codeph">LOOP</code>语句中使用游标变量。
                        </p>
                     </li>
                     <li>
                        <p>您不能在包规范中声明游标变量。</p>
                        <p>也就是说，包不能具有公共游标变量（可以从包外引用的游标变量）。</p>
                     </li>
                     <li>
                        <p>您不能将游标变量的值存储在集合或数据库列中。</p>
                     </li>
                     <li>
                        <p>您不能使用比较运算符来测试游标变量的相等性，不等式或无效性。</p>
                     </li>
                     <li>
                        <p>在服务器到服务器远程过程调用（RPC）中使用游标变量会导致错误。但是，如果远程数据库是通过Procedural Gateway访问的非Oracle数据库，则可以在服务器到服务器RPC中使用游标变量。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__GUID-26C84C0D-2D3E-47B9-BB9E-ABC29E6B29F1">话题</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="cursor-variable-declaration.html#GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__CJAJDAAI">句法</a></p>
                     </li>
                     <li>
                        <p><a href="cursor-variable-declaration.html#GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__CJAJCEGI">语义</a></p>
                     </li>
                     <li>
                        <p><a href="cursor-variable-declaration.html#GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__I36871">例子</a></p>
                     </li>
                     <li>
                        <p><a href="cursor-variable-declaration.html#GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__CJABDCEF">相关话题</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__CJAJDAAI">
                  <p class="subhead1" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__GUID-FF8CF612-9954-4B5D-98EA-94CABF3BC6AB">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__CJAIGBFF">
                  <p class="subhead1" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__GUID-7D7C89F0-CF3F-4360-BD36-86C56E57ABA1"><span class="italic">ref_cursor_type_definition</span> :: =</p>
                  <div class="figure" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__GUID-FCA7A069-22F1-4AD0-B1A2-01B77C2009C2"><img src="img/ref_cursor_type_definition.gif" alt="下面是ref_cursor_type_definition.eps的描述" title="下面是ref_cursor_type_definition.eps的描述" longdesc="img_text/ref_cursor_type_definition.html"><br><a href="img_text/ref_cursor_type_definition.html">说明ref_cursor_type_definition.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__CJAJEFJE">
                  <p class="subhead1" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__GUID-49DEAB8A-EF57-4BC3-9A96-54B4A5726C92"><span class="italic">cursor_variable_declaration</span> :: =</p>
                  <div class="figure" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__GUID-9F31991A-7208-4A52-83BC-E4A4AC46D36E"><img src="img/cursor_variable_declaration.gif" alt="cursor_variable_declaration.eps的描述如下" title="cursor_variable_declaration.eps的描述如下" longdesc="img_text/cursor_variable_declaration.html"><br><a href="img_text/cursor_variable_declaration.html">说明cursor_variable_declaration.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__CJAJCEGI">
                  <p class="subhead1" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__GUID-E8E601BC-1C34-44ED-92A4-8E5B87B0DD9D">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__GUID-5E54AE55-891E-456A-B388-1621F767B064"><span class="italic">ref_cursor_type_definition</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">类型</span></span></p>
                  <p>您要定义的<code class="codeph">REF</code> <code class="codeph">CURSOR</code>类型的名称。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold">返回</span></p>
                  <p>指定游标变量返回的值的数据类型。</p>
                  <p>指定<code class="codeph">RETURN</code>以定义强<code class="codeph">REF</code> <code class="codeph">CURSOR</code>类型。省略<code class="codeph">RETURN</code>以定义弱<code class="codeph">REF</code> <code class="codeph">CURSOR</code>类型。有关强和弱<code class="codeph">REF</code> <code class="codeph">CURSOR</code>类型的信息，请参阅<span class="q">“ <a href="static-sql.html#GUID-470A7A99-888A-46C2-BDAF-D4710E650F27" title="要创建游标变量，请声明预定义类型SYS_REFCURSOR的变量或定义REF CURSOR类型，然后声明该类型的变量。">创建光标变量</a> ”</span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">db_table_or_view</span></span></p>
                  <p>数据库表或视图的名称，在详细说明时必须可访问。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">光标</span></span></p>
                  <p>先前声明的显式游标的名称。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">cursor_variable</span></span></p>
                  <p>先前声明的游标变量的名称。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">记录</span></span></p>
                  <p>用户定义记录的名称。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">RECORD_TYPE</span></span></p>
                  <p>使用数据类型说明符<code class="codeph">RECORD</code>定义的用户定义类型的名称。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">ref_cursor_type</span></span></p>
                  <p>使用数据类型说明符<code class="codeph">REF</code> <code class="codeph">CURSOR</code>定义的用户定义类型的名称。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__GUID-901015EA-406B-4D94-B605-56914942D4D3"><span class="italic">cursor_variable_declaration</span></p>
                  <p><span class="bold"><span class="italic">cursor_variable</span></span></p>
                  <p>要声明的游标变量的名称。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">类型</span></span></p>
                  <p>要声明的游标变量的类型 - <code class="codeph">SYS_REFCURSOR</code>或先前定义的<code class="codeph">REF</code> <code class="codeph">CURSOR</code>类型的名称。
                  </p>
                  <p><code class="codeph">SYS_REFCURSOR</code>是一种弱类型。有关强和弱<code class="codeph">REF</code> <code class="codeph">CURSOR</code>类型的信息，请参阅<span class="q">“ <a href="static-sql.html#GUID-470A7A99-888A-46C2-BDAF-D4710E650F27" title="要创建游标变量，请声明预定义类型SYS_REFCURSOR的变量或定义REF CURSOR类型，然后声明该类型的变量。">创建光标变量</a> ”</span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__I36871">
                  <p class="subhead1" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__GUID-CC504B28-E3D3-42D1-8D10-90BF7ABB799C">例子</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="static-sql.html#GUID-470A7A99-888A-46C2-BDAF-D4710E650F27__BABFHFHH">例6-24</a> ， <span class="q">“游标变量声明”</span></p>
                     </li>
                     <li>
                        <p><a href="static-sql.html#GUID-470A7A99-888A-46C2-BDAF-D4710E650F27__BABHIJGD">例6-25</a> ， <span class="q">“具有用户定义的返回类型的游标变量”</span></p>
                     </li>
                     <li>
                        <p><a href="static-sql.html#GUID-E03A2A12-D298-4D1C-8CCE-3B5D17DDFC7C__BABCHEGG">例6-28</a> ， <span class="q">“游标变量查询中的变量 - 无结果集更改”</span></p>
                     </li>
                     <li>
                        <p><a href="static-sql.html#GUID-E03A2A12-D298-4D1C-8CCE-3B5D17DDFC7C__BABIHIBA">例6-29</a> ， <span class="q">“游标变量查询 - 结果集更改中的变量”</span></p>
                     </li>
                     <li>
                        <p><a href="static-sql.html#GUID-65ADB424-2C2D-49ED-9E98-99A3A68BA248__BABJDADA">例6-30</a> ， <span class="q">“使用静态SQL查询集合”</span></p>
                     </li>
                     <li>
                        <p><a href="static-sql.html#GUID-9713DFC2-3C2E-49B2-922F-02D43F9D0619__BABIIGAG">例6-31</a> ， <span class="q">“为一个查询打开游标变量的过程”</span></p>
                     </li>
                     <li>
                        <p><a href="static-sql.html#GUID-9713DFC2-3C2E-49B2-922F-02D43F9D0619__BABFEJED">例6-32</a> ， <span class="q">“为选择的查询打开游标变量（相同的返回类型）”</span></p>
                     </li>
                     <li>
                        <p><a href="static-sql.html#GUID-9713DFC2-3C2E-49B2-922F-02D43F9D0619__BABEJEII">例6-33</a> ， <span class="q">“为选择的查询打开游标变量（不同的返回类型）”</span></p>
                     </li>
                     <li>
                        <p><a href="static-sql.html#GUID-04CBBBFB-959B-4991-9580-521DC6156489__CHDJEEFC">例6-34</a> ， <span class="q">“游标变量作为Pro * C客户端程序中的主机变量”</span></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__CJABDCEF">
                  <p class="subhead1" id="GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D__GUID-0B943F90-D060-47B7-B899-7894F7687331">相关话题</p>
                  <p>在这一章当中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“ <a href="CLOSE-statement.html#GUID-46E7086C-8C29-4689-A062-0FF059E268FD" title="CLOSE语句关闭一个命名游标，释放其资源以供重用。">关闭声明</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="named-cursor-attribute.html#GUID-CD8D8415-FF19-4D81-99BA-7825FD40CC96" title="每个命名游标（显式游标或游标变量）都有四个属性，每个属性都返回有关DML语句执行的信息。">命名游标属性</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="explicit-cursor-declaration-and-definition.html#GUID-38C5DBA3-9DEC-4AF2-9B5E-7B721D11A77C" title="显式游标是指向私有SQL区域的命名指针，该区域存储用于处理特定查询或DML语句的信息 - 通常是返回或影响多行的语句。">明确的游标声明和定义</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="FETCH-statement.html#GUID-75BC6E63-841A-4103-9B96-8AC97F5C28BB" title="FETCH语句从多行查询的结果集中检索数据行 - 一次一行，一次几行，或一次所有行 - 并将数据存储在变量，记录或集合中。">FETCH声明</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="OPEN-FOR-statement.html#GUID-EB7AF439-FDD3-4461-9E3F-B621E8ABFB96" title="OPEN FOR语句将游标变量与查询相关联，分配数据库资源以处理查询，标识结果集，并将光标定位在结果集的第一行之前。">开放声明</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="ROWTYPE-attribute.html#GUID-4E0B9FE2-909D-444A-9B4A-E0243B7FCB99" title="％ROWTYPE属性允许您声明一条记录，该记录表示数据库表或视图的完整行或部分行。">％ROWTYPE属性</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="TYPE-attribute.html#GUID-EAB44F7E-B2AB-4AC6-B83D-B586193D75FC" title="％TYPE属性允许您将常量，变量，集合元素，记录字段或子程序参数声明为与先前声明的变量或列具有相同的数据类型（不知道该类型是什么）。">％TYPE属性</a> ”</span></p>
                     </li>
                  </ul>
                  <p>在其他章节中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“ <a href="static-sql.html#GUID-4A6E054A-4002-418D-A1CA-DE849CD7E6D5" title="要创建游标变量，请声明预定义类型SYS_REFCURSOR的变量或定义REF CURSOR类型，然后声明该类型的变量。打开游标变量后，可以使用FETCH语句获取查询结果集的行。您可以为PL / SQL游标变量分配另一个PL / SQL游标变量或主机游标变量的值。与游标变量关联的查询可以引用其范围中的任何变量。您可以使用游标变量作为子程序参数，这使得它可以在子程序之间传递查询结果。您可以将游标变量用作主变量，这使得在PL / SQL存储的子程序及其客户端之间传递查询结果非常有用。">光标变量</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“将<a href="plsql-optimization-and-tuning.html#GUID-BC13A2D1-A182-46C7-A3DC-959724DD5BD6">CURSOR表达式传递给流水线表函数</a> ”</span></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
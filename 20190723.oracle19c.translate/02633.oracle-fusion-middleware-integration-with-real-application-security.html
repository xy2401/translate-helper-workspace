<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>Oracle融合中间件与真实应用程序安全性的集成</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-security-administrators-and-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T05:21:48-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2012, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95725-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-real-application-security-in-java-applications.html" title="Previous" type="text/html"></link>
      <link rel="next" href="application-session-service-in-oracle-fusion-middleware.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DBFSG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-real-application-security-in-java-applications.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="application-session-service-in-oracle-fusion-middleware.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Security管理员和开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle融合中间件与真实应用程序安全性的集成</li>
            </ol>
            <a id="GUID-BDA0279D-FB0F-4704-9605-BFC8A24F0056" name="GUID-BDA0279D-FB0F-4704-9605-BFC8A24F0056"></a><a id="DBFSG507"></a>
            
            <h2 id="DBFSG-GUID-BDA0279D-FB0F-4704-9605-BFC8A24F0056" class="sect2"><span class="enumeration_chapter">7</span> Oracle融合中间件与Real Application Security的集成</h2>
         </header>
         <div class="ind">
            <div>
               <p>Real Application Security为应用程序集成添加了外部用户和角色支持，例如，可以与Oracle融合中间件一起使用。对于Oracle融合中间件，用户和角色也通过集中管理和使用授权策略管理器对用户界面进行单一认证，外部化为通用的单一存储库。从Real Application Security的角度来看，集成用户和角色（包括应用程序角色）是外部化主体，因为Oracle融合中间件在外部管理它们。中间层初始化和授权操作与<a href="using-real-application-security-in-java-applications.html#GUID-2FCEEFB5-83DC-4D5A-982A-690C8DCC4181">在Java应用程序</a>中<a href="using-real-application-security-in-java-applications.html#GUID-2FCEEFB5-83DC-4D5A-982A-690C8DCC4181">使用Real Application Security中</a>描述的操作相同。
               </p>
               <div class="p">本章介绍以下主题：<ul style="list-style-type:disc">
                     <li>
                        <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-796C340D-4116-4766-83A9-12F1F728C613">关于外部用户和外部角色</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-50BBC5C8-94D6-48DF-8CB0-62F2DA863A44">外部用户和角色的会话API</a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="DBFSG509"></a><a id="DBFSG508"></a><div class="props_rev_3"><a id="GUID-796C340D-4116-4766-83A9-12F1F728C613" name="GUID-796C340D-4116-4766-83A9-12F1F728C613"></a><h3 id="DBFSG-GUID-796C340D-4116-4766-83A9-12F1F728C613" class="sect3">关于外部用户和外部角色</h3>
               <div>
                  <p>外部用户是访问服务的最终用户。用户信息存储在标识存储中，通常由WebLogic Authenticator实例化。此用户既不是数据库用户，也不是Real Application Security应用程序用户。外部用户在数据库中没有任何占用空间。但是，外部用户需要访问数据库以获取应用程序数据。因此，为这样的用户建立真实应用安全上下文（会话）以控制用户对所需数据的访问。</p>
                  <p>匿名用户是未经身份验证的用户，或其凭据尚未经过验证的用户。允许匿名用户仅访问未受保护的资源，例如来自数据库的公共数据。应用程序可以启用或禁用匿名用户。</p>
                  <p>外部角色或组是用户和其他组的集合，可以是分层的。例如，组可以包括任意嵌套的组。</p>
                  <p>外部应用程序角色是用户，组和应用程序角色的集合，可以是分层的。此角色特定于应用程序，由应用程序策略定义，并且J2EE容器可能不知道。应用程序角色的作用域是因为它们仅在应用程序运行时可见。它们可以映射到在同一应用程序范围中定义的其他应用程序角色，也可以映射到企业用户或组。应用程序角色用于授权决策。</p>
                  <p>与外部用户类似，外部角色和应用程序角色在Real Application Security系统中没有占用空间。它们用于控制Real Application Security ACL授予应用程序数据访问权限的方式。</p>
                  <p>外部角色和应用程序角色还强制执行数据访问的详细信息。外部用户需要一些基本的数据库权限，通常是在应用程序表上运行SELECT的对象权限。可以通过Real Application Security动态应用程序角色授予这些权限，该角色在附加用户会话时启用。例如，要向外部用户或角色授予权限，请在创建ACL时在ACE列表中将主体类型指定为<code class="codeph">XS_ACL.PTYPE_EXTERNAL</code> 。有关更多信息，请参阅<span class="q">“ <a href="XS_ACL-package.html#GUID-9390C2EF-6A28-4BA0-A338-8E9A95A04F21">CREATE_ACL过程</a> ”</span> 。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-796C340D-4116-4766-83A9-12F1F728C613__GUID-A0C52EB3-7FAF-44F5-A5CE-80F7877C22F6">外部用户的会话模式</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Real Application Security支持以下两种会话操作模式：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>安全模式</p>
                           <p>在安全模式下，数据安全性在数据库服务器上实施。默认情况下，会为所有用户以安全模式创建会话。</p>
                        </li>
                        <li>
                           <p>受信任的模式</p>
                           <p>可信模式是一种在中间层而不是在数据库服务器上强制实施数据安全性的模式。在这种模式下，绕过Real Application Security实现的数据安全性。因此，在受信任模式下创建会话是一种特权操作。</p>
                           <p>仅允许外部用户使用受信任模式，并且仅当调度程序具有<code class="codeph">CREATE_TRUSTED_SESSION</code>权限时才允许。可以将此权限授予调度程序用户，如下所示：</p><pre class="oac_no_warn" dir="ltr">XS_ADMIN_UTIL.grant_system_privilege（'CREATE_TRUSTED_SESSION'，'dispatcher'，XS_ADMIN_UTIL.PTYPE_XS）;</pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DBFSG510"></a><div class="props_rev_3"><a id="GUID-50BBC5C8-94D6-48DF-8CB0-62F2DA863A44" name="GUID-50BBC5C8-94D6-48DF-8CB0-62F2DA863A44"></a><h3 id="DBFSG-GUID-50BBC5C8-94D6-48DF-8CB0-62F2DA863A44" class="sect3">外部用户和角色的会话API</h3>
               <div>
                  <div class="p">本节介绍外部用户和角色的以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-6A036ECB-88B3-4E02-A437-D5995855ADC9">外部用户的命名空间</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-76668177-81BF-47DB-A053-3B18DD1676BD">创建会话</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D">附加会话</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76">将用户分配给会话</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857">保存会话和中止会话</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG511"></a><div class="props_rev_3"><a id="GUID-6A036ECB-88B3-4E02-A437-D5995855ADC9" name="GUID-6A036ECB-88B3-4E02-A437-D5995855ADC9"></a><h4 id="DBFSG-GUID-6A036ECB-88B3-4E02-A437-D5995855ADC9" class="sect4">外部用户的命名空间</h4>
                  <div>
                     <p>在创建，附加和分配会话期间，外部用户的名称空间通过属性操作功能得到增强。外部用户可以执行以下活动：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在创建会话时使用属性创建命名空间</p>
                        </li>
                        <li>
                           <p>在附加会话和分配用户时设置命名空间属性</p>
                        </li>
                        <li>
                           <p>保存会话并将其保留为附加</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG513"></a><a id="DBFSG514"></a><a id="DBFSG515"></a><a id="DBFSG516"></a><a id="DBFSG512"></a><div class="props_rev_3"><a id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD" name="GUID-76668177-81BF-47DB-A053-3B18DD1676BD"></a><h4 id="DBFSG-GUID-76668177-81BF-47DB-A053-3B18DD1676BD" class="sect4">创建会话</h4>
                  <div>
                     <div class="section">
                        <p>创建Real Application Security应用程序<a id="d32097e704" class="indexterm-anchor"></a>会话，使用<a id="d32097e709" class="indexterm-anchor"></a> <code class="codeph">XSSessionManager</code>类的<code class="codeph">createSession</code>方法。
                        </p>
                        <p>对于外部用户，此方法在服务器上创建一个Session对象，并在其中创建具有名称空间和属性的相应中间层表示。此方法还创建命名空间并设置Namespace / AttributeValue中给出的相应属性。cookie可用于在将来的调用中标识新创建的Real Application Security应用程序会话，直到cookie值更改或会话被销毁。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD__GUID-988E68D4-604B-4DEF-911C-784219CC0786">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public abstract Session <span class="bold">createSession（</span> java.sql。连接conn，ExternalUser eUser，java.lang。字符串cookie，java.util。Collection &lt;NamespaceValue&gt; nav <span class="bold">）</span>抛出InvalidXSUserException，AccessDeniedException，java.sql。SQLException，XSSessionException，InvalidXSNamespaceException</pre><pre class="oac_no_warn" dir="ltr">public abstract Session <span class="bold">createSessionTrusted（</span> java.sql。连接conn，ExternalUser externalUser，java.lang。字符串cookie，java.util。Collection &lt;NamespaceValue&gt; nameSpaceValues <span class="bold">）</span>抛出InvalidXSUserException，AccessDeniedException，java.sql。SQLException，SQLException，XSException，InvalidXSNamespaceException</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD__GUID-DAD5F2C9-0515-4CE0-A347-60C08FDEC7D1">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD__GUID-B244E1E8-853D-404A-AD01-BB7731ED015F">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Parameter description for createSession method for external users" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d32097e753">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d32097e756">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d32097e761" headers="d32097e753 ">
                                       <p><code class="codeph">康恩</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d32097e761 d32097e756 ">
                                       <p>数据库服务器往返的JDBC连接</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d32097e769" headers="d32097e753 ">
                                       <p><code class="codeph">eUser</code>或<code class="codeph">externalUser</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d32097e769 d32097e756 ">
                                       <p>与会话关联的外部用户</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d32097e780" headers="d32097e753 ">
                                       <p><code class="codeph">曲奇饼</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d32097e780 d32097e756 ">
                                       <p>会话cookie用于标识外部用户</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d32097e788" headers="d32097e753 ">
                                       <p><code class="codeph">nav</code>或<code class="codeph">nameSpaceValues</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d32097e788 d32097e756 ">
                                       <p>具有要为命名空间创建的相应属性的命名空间列表</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD__GUID-70BD69C1-3A9C-4924-AB28-A0CB70B9AF5C">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-76668177-81BF-47DB-A053-3B18DD1676BD__CHDHBCDJ">示例7-1</a>演示了如何为外部用户创建Real Application Security会话。<code class="codeph">createSession</code>方法以粗体字体表示。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD__CHDHBCDJ">
                        <p class="titleinexample">示例7-1为外部用户创建实际应用程序安全性会话</p><pre class="oac_no_warn" dir="ltr">。。。static Connection lws_conn = null; static XSSessionManager sm = null; lws_conn = DriverManager.getConnection（lws_conn_string，username，password）; sm = XSSessionManager.getSessionManager（privConn，20,29999999）; 。。。String trituser =“TUSER01”; String cookie =“some_cookie”; String extuser =“ExtPrincp”; String extuuid =“ExtPrincp”; Session lws = null; List &lt;AttributeValue&gt; nsavList = new ArrayList &lt;AttributeValue&gt;（）; AttributeValue nsav1 = new AttributeValue（“ATTR01”，“value1”）; nsavList.add（nsav1）; AttributeValue nsav2 = new AttributeValue（“ATTR02”，“value2”）; nsavList.add（nsav2）; NamespaceValue nav = new NamespaceValue（“NST01”，nsavList）; List &lt;NamespaceValue&gt; nsList = new ArrayList（）; nsList.add（NAV）; / *使用命名空间attr-vals和cookie * / <span class="bold">lws = sm.createSession（lws_conn，new ExternalUser（extuser，extuuid），cookie，nsList）</span>以安全模式创建具有外部用户名的会话<span class="bold">;</span> sm.destroySession（lws_conn，lws）; / *以安全模式创建外部用户会话* / <span class="bold">lws = sm.createSession（lws_conn，new ExternalUser（extuser，extuuid），null，null）;</span> sm.destroySession（lws_conn，lws）; / *使用命名空间属性值* / <span class="bold">lws = sm.createSession（lws_conn，new ExternalUser（extuser，extuuid），null，nsList）</span>以安全模式创建外部用户会话<span class="bold">;</span> sm.destroySession（lws_conn，lws）; / *使用cookie * / <span class="bold">lws = sm.createSession（lws_conn，new ExternalUser（extuser，extuuid），cookie，null）</span>以安全模式创建具有外部用户名的会话<span class="bold">;</span> sm.destroySession（lws_conn，lws）; / *仅使用外部用户名创建可信会话* / <span class="bold">lws = sm.createSessionTrusted（lws_conn，new ExternalUser（extuser，extuuid），null，null）;</span> sm.destroySession（lws_conn，lws）; / *使用命名空间和cookie * / <span class="bold">lws = sm.createSession（lws_conn，trituser，cookie，nsList）</span>以安全模式创建具有RAS用户名的会话<span class="bold">;</span> sm.destroySession（lws_conn，lws）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG518"></a><a id="DBFSG519"></a><a id="DBFSG520"></a><a id="DBFSG522"></a><a id="DBFSG521"></a><a id="DBFSG517"></a><div class="props_rev_3"><a id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D" name="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D"></a><h4 id="DBFSG-GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D" class="sect4">附加会话</h4>
                  <div>
                     <div class="section">
                        <p>附上一个<a id="d32097e953" class="indexterm-anchor"></a>应用程序会话，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">attachSession</code>方法。
                        </p>
                        <p>对于外部用户，此方法将JDBC连接附加到指定的会话对象。此方法还为会话设置动态应用程序角色，外部角色，身份验证时间和创建命名空间。它还提供了要创建和设置的命名空间及其相应命名空间属性的列表。如果命名空间不存在，则此方法创建命名空间，然后设置相应的属性。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__GUID-305BE919-950E-4C90-BC6A-3DAC42A04949">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public abstract void <span class="bold">attachSession（</span> java.sql。连接conn，会话会话，java.util。收集&lt;java.lang中。String&gt; enabledDynamicRoles，java.util。收集&lt;java.lang中。String&gt; disabledDynamicRoles，java.util。集合&lt;ExternalRole&gt; externalRoles，java.util。Collection &lt;NamespaceValue&gt; nav，java.sql。Timestamp authenticationTime <span class="bold">）</span>抛出java.sql。SQLException，AccessDeniedException，InvalidSessionException，XSSessionException，InvalidXSNamespaceException public abstract Session <span class="bold">attachSessionByCookie（</span> java.sql。连接conn，java.lang。字符串cookie，java.util。收集&lt;java.lang中。String&gt; enabledDynamicRoles，java.util。收集&lt;java.lang中。String&gt; disabledDynamicRoles，java.util。收集&lt;oracle.security.xs。ExternalRole&gt; externalRoles，java.util。收集&lt;oracle.security.xs。NamespaceValue&gt; namespaceValues，java.sql。Timestamp authenticationTime <span class="bold">）</span>抛出java.sql。SQLException，AccessDeniedException，InvalidSessionException，XSException，InvalidXSNamespaceException public abstract Session <span class="bold">attachSessionByID</span> <span class="bold">（</span> java.sql。连接conn，java.lang。字符串id，java.util。收集&lt;java.lang中。String&gt; enabledDynamicRoles，java.util。收集&lt;java.lang中。String&gt; disabledDynamicRoles，java.util。收集&lt;oracle.security.xs。ExternalRole&gt; externalRoles，java.util。收集&lt;oracle.security.xs。NamespaceValue&gt; namespaceValues，java.sql。Timestamp authenticationTime <span class="bold">）</span>抛出java.sql。SQLException，AccessDeniedException，InvalidSessionException，XSException，InvalidXSNamespaceException</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__GUID-98328635-FFF7-4F03-8AED-875C7F70B759">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__GUID-4944A0A1-8FF8-4C21-A312-C469A991D023">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Parameter description for attachSessionByID method for external users" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="32%" id="d32097e1005">参数</th>
                                    <th align="left" valign="bottom" width="68%" id="d32097e1008">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1013" headers="d32097e1005 ">
                                       <p><code class="codeph">康恩</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1013 d32097e1008 ">
                                       <p>要附加到应用程序会话的数据库连接</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1021" headers="d32097e1005 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1021 d32097e1008 ">
                                       <p>要附加的Session对象</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1029" headers="d32097e1005 ">
                                       <p><code class="codeph">曲奇饼</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1029 d32097e1008 ">
                                       <p>会话cookie</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1037" headers="d32097e1005 ">
                                       <p><code class="codeph">ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1037 d32097e1008 ">
                                       <p>会话标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1045" headers="d32097e1005 ">
                                       <p><code class="codeph">enabledDynamicRoles</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1045 d32097e1008 ">
                                       <p>要启用的动态应用程序角色名称的集合</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1053" headers="d32097e1005 ">
                                       <p><code class="codeph">disabledDynamicRoles</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1053 d32097e1008 ">
                                       <p>要禁用的动态应用程序角色名称的集合</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1061" headers="d32097e1005 ">
                                       <p><code class="codeph">externalRoles</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1061 d32097e1008 ">
                                       <p>要启用的外部角色的集合</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1069" headers="d32097e1005 ">
                                       <p><code class="codeph">nav</code>或<code class="codeph">namespaceValues</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1069 d32097e1008 ">
                                       <p>具有要设置的相应属性的名称空间列表</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1080" headers="d32097e1005 ">
                                       <p><code class="codeph">authenticationTime</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1080 d32097e1008 ">
                                       <p>要发送到数据库服务器的身份验证时间</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__GUID-A7FC4167-E8F5-4524-945F-CEBA1B09616B">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__CHDBGHHC">示例7-2</a>演示了如何为外部用户附加Real Application Security会话。<code class="codeph">attachSession</code>方法以粗体字体表示。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__GUID-1A83C279-BE98-4B04-9372-DF256102B033">附加会话时的外部角色行为</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>外部之后<a id="d32097e1105" class="indexterm-anchor"></a>为会话启用角色，它作为ID存储为会话上下文的一部分。在中间层和数据库服务器上调用<code class="codeph">checkAcl</code>方法时，此角色ID用于访问控制。这与常规Real Application Security应用程序角色或动态应用程序角色相同。
                              </p>
                           </li>
                           <li>
                              <p>为附加会话时传递的每个外部角色分配一个Real Application Security ID，无论该角色是否由ACL引用。</p>
                           </li>
                           <li>
                              <p>外部角色的范围在附加或分离会话的范围内。无法为附加多个会话启用外部角色，并且不需要显式禁用它。因此，除非再次分配角色，否则在附加下一个会话时将不会自动启用为附加第一个会话而分配的角色。</p>
                              <p>此行为与常规Real Application Security应用程序角色或动态应用程序角色的行为完全不同，其中为附加第一个会话分配的应用程序角色在附加下一个会话时自动启用。</p>
                           </li>
                           <li>
                              <p>附加会话后，外部角色保持一致，直到分离并重新连接会话。甚至可以为用户撤销该角色。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__CHDBGHHC">
                        <p class="titleinexample">示例7-2为外部用户附加Real Application Security会话</p><pre class="oac_no_warn" dir="ltr">。。。static Connection lws_conn = null; static XSSessionManager sm = null; 。。。lws_conn = DriverManager.getConnection（lws_conn_string，username，password）; sm = XSSessionManager.getSessionManager（privConn，20,29999999）; 。。。String cookie =“some_cookie”; String extuser =“ExtPrincp”; String extuuid =“ExtPrincp”; Session lws = null; Session lws2 = null List &lt;AttributeValue&gt; nsavList = new ArrayList &lt;AttributeValue&gt;（）; AttributeValue nsav1 = new AttributeValue（“ATTR01”，“value1”）; nsavList.add（nsav1）; AttributeValue nsav2 = new AttributeValue（“ATTR02”，“value2”）; nsavList.add（nsav2）; NamespaceValue nav = new NamespaceValue（“NST01”，nsavList）; List &lt;NamespaceValue&gt; nsList = new ArrayList（）; nsList.add（NAV）; List &lt;String&gt; dynamicRoles = new ArrayList &lt;String&gt;（）; dynamicRoles.add（ “DYNROLE001”）; dynamicRoles.add（ “DYNROLE002”）; List &lt;ExternalRole&gt; extRoles = new ArrayList &lt;ExternalRole&gt;（）; extRoles.add（new ExternalRole（“EXTPRIN01”））; extRoles.add（new ExternalRole（“MYEXTPRIN02”））; lws = sm.createSession（lws_conn，new ExternalUser（extuser，extuuid），cookie +“secure”，nsList，false）; <span class="bold">sm.attachSession（lws_conn，lws，enabledDynamicRoles，disabledDynamicRoles，extRoles，null，null）;</span> sm.detachSession（LWS）; <span class="bold">sm.attachSession（lws_conn，lws，enabledDynamicRoles，disabledDynamicRoles，extRoles，null，new Timestamp（System.currentTimeMillis（）））;</span> sm.detachSession（LWS）; <span class="bold">sm.attachSession（lws_conn，lws，enabledDynamicRoles，disabledDynamicRoles，extRoles，nsList，null）;</span> sm.detachSession（LWS）; <span class="bold">sm.attachSession（lws_conn，lws，enabledDynamicRoles，disabledDynamicRoles，extRoles，nsList，new Timestamp（System.currentTimeMillis（）））;</span> sm.detachSession（LWS）; lws2 = sm.createSession（lws_conn，new ExternalUser（extuser，extuuid），cookie +“trusted”，nsList，true）; <span class="bold">lws2 = sm.attachSessionByCookie（lws_conn，lws.getSessionCookie（），null，enabledDynamicRoles，disabledDynamicRoles，extRoles，null，null）;</span> sm.detachSession（LWS2）; <span class="bold">lws2 = sm.attachSessionByCookie（lws_conn，lws.getSessionCookie（），null，enabledDynamicRoles，disabledDynamicRoles，extRoles，nsList，new Timestamp（System.currentTimeMillis（）））;</span> sm.detachSession（LWS2）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG524"></a><a id="DBFSG525"></a><a id="DBFSG526"></a><a id="DBFSG527"></a><a id="DBFSG523"></a><div class="props_rev_3"><a id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76" name="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76"></a><h4 id="DBFSG-GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76" class="sect4">将用户分配给会话</h4>
                  <div>
                     <div class="section">
                        <p>为a分配名称<a id="d32097e1269" class="indexterm-anchor"></a>以前的匿名用户，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">assignUser</code>方法。
                        </p>
                        <p>对于外部用户，此方法将指定用户分配给以前的匿名用户，设置动态应用程序角色，外部角色和身份验证时间。如果给出了命名空间/属性值列表，则此方法将创建不存在的每个命名空间，并设置相应的属性。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__GUID-6EC4E572-33F9-422B-BE28-59779B750B7B">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public abstract void <span class="bold">assignUser（</span> Session session，ExternalUser targetUser，java.util。收集&lt;java.lang中。String&gt; enabledDynamicRoles，java.util。收集&lt;java.lang中。String&gt; disabledDynamicRoles，java.util。集合&lt;ExternalRole&gt; externalRoles，java.util。Collection &lt;NamespaceValue&gt; naValues，java.sql。Timestamp authenticationTime <span class="bold">）</span>抛出java.sql。SQLException，AccessDeniedException，InvalidSessionException，XSSessionException，InvalidXSNamespaceException</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__GUID-17C6101D-BE8E-4FC5-950F-CB34DA3EF50E">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__GUID-1B7CA592-138C-4505-9325-F826B5676E8B">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Parameter description for assignUser method for external users" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d32097e1306">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d32097e1309">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1314" headers="d32097e1306 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1314 d32097e1309 ">
                                       <p>用于分配用户的会话对象</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1322" headers="d32097e1306 ">
                                       <p><code class="codeph">targetUser</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1322 d32097e1309 ">
                                       <p>基于身份验证初始化的<code class="codeph">ExternalUser</code>对象</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1333" headers="d32097e1306 ">
                                       <p><code class="codeph">enabledDynamicRoles</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1333 d32097e1309 ">
                                       <p>要启用的动态应用程序角色名称列表</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1341" headers="d32097e1306 ">
                                       <p><code class="codeph">disabledDynamicRoles</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1341 d32097e1309 ">
                                       <p>要禁用的动态应用程序角色名称列表</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1349" headers="d32097e1306 ">
                                       <p><code class="codeph">externalRoles</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1349 d32097e1309 ">
                                       <p>要启用的外部角色的集合</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1357" headers="d32097e1306 ">
                                       <p><code class="codeph">namespaceValues</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1357 d32097e1309 ">
                                       <p>具有要设置的相应属性的名称空间列表</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1365" headers="d32097e1306 ">
                                       <p><code class="codeph">authenticationTime</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1365 d32097e1309 ">
                                       <p>用户进行身份验证时指示的时间戳</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__GUID-D3AA78CB-3BAD-4DAA-85E0-BEF72ABC63B9">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__CHDBCHAD">例7-3</a>演示了如何为外部用户分配Real Application Security会话。<code class="codeph">assignUser</code>方法以粗体字体表示。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__CHDBCHAD">
                        <p class="titleinexample">示例7-3如何为外部用户分配实际应用程序安全会话</p><pre class="oac_no_warn" dir="ltr">。。。static Connection lws_conn = null; static XSSessionManager sm = null; 。。。lws_conn = DriverManager.getConnection（lws_conn_string，username，password）; sm = XSSessionManager.getSessionManager（privConn，20,29999999）; 。。。String cookie =“some_cookie”; String extuser =“ExtPrincp”; String extuuid =“ExtPrincp”; Session lws = null; List &lt;AttributeValue&gt; nsavList = new ArrayList &lt;AttributeValue&gt;（）; AttributeValue nsav1 = new AttributeValue（“ATTR01”，“value1”）; nsavList.add（nsav1）; AttributeValue nsav2 = new AttributeValue（“ATTR02”，“value2”）; nsavList.add（nsav2）; NamespaceValue nav = new NamespaceValue（“NST01”，nsavList）; List &lt;NamespaceValue&gt; nsList = new ArrayList（）; nsList.add（NAV）; List &lt;String&gt; dynamicRoles = new ArrayList &lt;String&gt;（）; dynamicRoles.add（ “DYNROLE001”）; dynamicRoles.add（ “DYNROLE002”）; List &lt;ExternalRole&gt; extRoles = new ArrayList &lt;ExternalRole&gt;（）; extRoles.add（new ExternalRole（“EXTPRIN01”））; extRoles.add（new ExternalRole（“MYEXTPRIN02”））; lws = sm.createAnonymousSession（lws_conn，cookie +“trusted”，nsList，true）; sm.attachSession（lws_conn，lws，null，null，null，null，null）; <span class="bold">sm.assignUser（lws，euser，dynamicRoles，dynamicRoles，extRoles，null，null）;</span> sm.detachSession（LWS）; lws = sm.createAnonymousSession（lws_conn，cookie +“secure”，nsList，false）; sm.attachSession（lws_conn，lws，null，null，null，null，null）; <span class="bold">sm.assignUser（lws，euser，dynamicRoles，dynamicRoles，extRoles，null，new Timestamp（System.currentTimeMillis（）））;</span> sm.detachSession（LWS）; lws = sm.createAnonymousSession（lws_conn，cookie +“trusted”，nsList，true）; sm.attachSession（lws_conn，lws，null，null，null，null，null）; <span class="bold">sm.assignUser（lws，euser，dynamicRoles，dynamicRoles，null，nsList，null）;</span> sm.detachSession（LWS）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG529"></a><a id="DBFSG530"></a><a id="DBFSG531"></a><a id="DBFSG528"></a><div class="props_rev_3"><a id="GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857" name="GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857"></a><h4 id="DBFSG-GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857" class="sect4">保存会话和中止会话</h4>
                  <div>
                     <div class="section">
                        <p>保存更改<a id="d32097e1514" class="indexterm-anchor"></a>在数据库服务器上的会话并保持会话仍然附加，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">saveSession</code>方法。
                        </p>
                        <p>对于外部用户，此方法保存当前会话。与<code class="codeph">detachSession</code>方法类似，此方法将所有会话更改提交到后端，并且需要数据库往返才能执行此操作。但是，与<code class="codeph">detachSession</code>方法不同，此方法可以保持会话连接。此方法主要用于保存应用程序上下文（命名空间）。
                        </p>
                        <p>中止更改<a id="d32097e1535" class="indexterm-anchor"></a>在数据库服务器上进行会话并从会话中分离，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">abortSession</code>方法。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857__GUID-A6EE8D4A-175E-4E0B-AEB0-6D758A77585D">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public abstract void <span class="bold">saveSession（</span> Session session <span class="bold">）</span>抛出java.sql。SQLException，NotAttachedException，XSSessionException public abstract void <span class="bold">abortSession（</span> Session session <span class="bold">）</span>抛出java.sql。SQLException，NotAttachedException，XSException</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857__GUID-D5C5ADF5-7B15-46F6-9A65-B77D4F68F13C">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857__CHDEGGGJ">例7-4</a>演示了如何保存Real Application Security外部用户会话。<code class="codeph">saveSession</code>方法以粗体字体表示。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857__CHDEGGGJ">
                        <p class="titleinexample">示例7-4如何保存Real Application Security外部用户会话</p><pre class="oac_no_warn" dir="ltr">。。。static Connection lws_conn = null; static XSSessionManager sm = null; 。。。lws_conn = DriverManager.getConnection（lws_conn_string，username，password）; sm = XSSessionManager.getSessionManager（privConn，20,29999999）; 。。。String cookie =“some_cookie”; String extuser =“ExtPrincp”; String extuuid =“ExtPrincp”; Session lws = null; List &lt;AttributeValue&gt; nsavList = new ArrayList &lt;AttributeValue&gt;（）; AttributeValue nsav1 = new AttributeValue（“ATTR01”，“value1”）; nsavList.add（nsav1）; AttributeValue nsav2 = new AttributeValue（“ATTR02”，“value2”）; nsavList.add（nsav2）; NamespaceValue nav = new NamespaceValue（“NST01”，nsavList）; List &lt;NamespaceValue&gt; nsList = new ArrayList（）; nsList.add（NAV）; List &lt;String&gt; dynamicRoles = new ArrayList &lt;String&gt;（）; dynamicRoles.add（ “DYNROLE001”）; dynamicRoles.add（ “DYNROLE002”）; List &lt;ExternalRole&gt; extRoles = new ArrayList &lt;ExternalRole&gt;（）; extRoles.add（new ExternalRole（“EXTPRIN01”））; extRoles.add（new ExternalRole（“MYEXTPRIN02”））; lws = sm.createAnonymousSession（lws_conn，cookie +“trusted”，nsList，true）; sm.attachSession（lws_conn，lws，null，null，null，null，null）; sm.assignUser（lws，euser，dynamicRoles，dynamicRoles，extRoles，null，null）; lws.deleteNamespace（ “NST01”）; <span class="bold">sm.saveSession（LWS）;</span></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
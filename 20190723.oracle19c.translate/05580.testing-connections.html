<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>测试连接</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Net Services Administrator&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Net Services Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="net-services-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T04:25:53-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96313-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="part-III-test-and-troubleshoot-oracle-net-services.html" title="Previous" type="text/html"></link>
      <link rel="next" href="troubleshooting-oracle-net-services.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Net Services Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="NETAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="part-III-test-and-troubleshoot-oracle-net-services.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="troubleshooting-oracle-net-services.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">网络服务管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-III-test-and-troubleshoot-oracle-net-services.html" property="item" typeof="WebPage"><span property="name">Oracle Net Services的测试和故障排除</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">测试连接</li>
            </ol>
            <a id="GUID-63C347F7-D993-4F09-A922-309F4AC6E9D2" name="GUID-63C347F7-D993-4F09-A922-309F4AC6E9D2"></a><a id="NETAG357"></a>
            
            <h2 id="NETAG-GUID-63C347F7-D993-4F09-A922-309F4AC6E9D2" class="sect2"><span class="enumeration_chapter">15</span>测试连接</h2>
         </header>
         <div class="ind">
            <div>
               <p>配置网络后，应连接并测试每个组件以确保网络正常运行。Oracle Net Services提供了一些工具来帮助您测试监听器，数据库和Oracle Connection Manager。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="testing-connections.html#GUID-C2B54722-745F-468C-897C-A464CE5E2F09">测试网络</a><br></li>
                  <li class="ulchildlink"><a href="testing-connections.html#GUID-BE15FEF5-5FCA-4291-90CB-EE75C0A496E0">使用TNSPING实用程序测试客户端的连接</a><br></li>
                  <li class="ulchildlink"><a href="testing-connections.html#GUID-9A550EEC-5736-46B4-B10E-55849B01A4D0">使用TRCROUTE实用程序测试客户端的连接</a><br></li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="part-III-test-and-troubleshoot-oracle-net-services.html#GUID-E8B29E61-3236-486B-AB89-665215E86CFA">Oracle Net Services的测试和故障排除</a></p>
                  </div>
               </div>
            </div>
            <a id="NETAG373"></a><div class="sect2"><a id="GUID-C2B54722-745F-468C-897C-A464CE5E2F09" name="GUID-C2B54722-745F-468C-897C-A464CE5E2F09"></a><h3 id="NETAG-GUID-C2B54722-745F-468C-897C-A464CE5E2F09" class="sect3"><span class="enumeration_section">15.1</span>测试网络</h3>
               <div>
                  <p>以下是测试网络的推荐顺序：</p>
                  <ol>
                     <li>
                        <p>启动并测试每个监听器。要启动侦听器，请使用<span class="q">“ <a href="quick-start-oracle-net-services.html#GUID-CE3F16F8-E4AD-45C2-B439-123DC49AB1D3">启动Oracle Net Listener和Oracle数据库服务器</a> ”中</span>描述的过程。
                        </p>
                        <p>要测试侦听器，请启动从客户端到该侦听器控制的任何活动数据库的连接。</p>
                     </li>
                     <li>
                        <p>启动并测试每个Oracle Connection Manager（如果包含在您的网络中）。要启动Oracle Connection Manager，请使用<span class="q">“ <a href="quick-start-oracle-net-services.html#GUID-7C8C5DD6-7B7A-4E39-8C7D-C1350EB85FB0">启动Oracle Connection Manager</a> ”中</span>描述的过程。
                        </p>
                        <p>要测试Oracle Connection Manager，请启动从客户端到已使用Oracle Connection Manager注册的任何活动数据库的连接。</p>
                     </li>
                     <li>
                        <p>使用环回测试或Oracle Net Manager测试服务器。</p>
                        <p><a href="glossary.html#GUID-DE71B282-D7C2-4C10-94D5-B5FDFEBA4E7E"><span class="xrefglossterm">环回测试</span></a>使用Oracle Net从数据库服务器返回到自身，绕过进程间通信（IPC）。执行成功的环回可验证Oracle Net是否在数据库服务器上运行。以下过程介绍了如何使用Oracle Net Manager执行环回测试：</p>
                        <ol type="a">
                           <li>
                              <p>启动Oracle Net Manager。</p>
                              <div class="infoboxnotealso" id="GUID-C2B54722-745F-468C-897C-A464CE5E2F09__GUID-F36EAED2-8E1D-4113-B765-CB7DCCE7A615">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-2294BF67-B05F-44A2-9584-6CF0855A0F56">使用Oracle Net Manager配置Oracle Net服务</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>在导航器中，展开“ <span class="bold">目录”</span>或“ <span class="bold">本地”</span> ，然后选择“ <span class="bold">服务命名”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>选择网络服务名称或数据库服务。</p>
                           </li>
                           <li>
                              <p>选择“ <span class="bold">命令”</span> ，然后选择“ <span class="bold">测试网络服务”</span> 。
                              </p>
                              <p>测试假定侦听器和数据库正在运行。如果不是，请参阅<span class="q">“ <a href="quick-start-oracle-net-services.html#GUID-CE3F16F8-E4AD-45C2-B439-123DC49AB1D3">启动Oracle Net Listener和Oracle数据库服务器</a> ”</span>以启动组件。
                              </p>
                              <p>在测试期间，将出现“连接测试”对话框，提供状态和测试结果。成功的测试会产生以下消息：</p><pre class="oac_no_warn" dir="ltr">连接测试成功。
</pre><p>如果测试成功，则继续执行步骤<a href="testing-connections.html#GUID-C2B54722-745F-468C-897C-A464CE5E2F09__BABDCIJD">3.e.</a>
                              </p>
                              <p>如果测试不成功，则使用错误消息确定进一步的操作。例如，如果错误消息如下：</p><pre class="oac_no_warn" dir="ltr">尝试使用userid连接：scott测试未成功。ORA-28000：帐户被锁定输入的字段可能有错误，或者服务器可能没有为连接做好准备。
</pre><p>将用户名更改为已知解锁的帐户。要更改用户名，请单击“ <span class="bold">更改登录”</span> 。系统会提示您输入密码。
                              </p>
                           </li>
                           <li id="GUID-C2B54722-745F-468C-897C-A464CE5E2F09__BABDCIJD">
                              <p>单击“ <span class="bold">关闭”</span>以关闭“连接测试”对话框。
                              </p>
                           </li>
                        </ol>
                     </li>
                     <li>
                        <p>测试客户端连接。</p>
                        <p>要测试网络中的多个不同客户端，请使用以下命令从每个客户端启动与数据库服务器的连接：</p><pre class="oac_no_warn" dir="ltr">CONNECT <span class="italic"><code class="codeph">username</code></span> @ <span class="italic"><code class="codeph">connect_identifier</code></span>
</pre></li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="testing-connections.html#GUID-63C347F7-D993-4F09-A922-309F4AC6E9D2">测试连接</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="NETAG380"></a><a id="NETAG381"></a><a id="NETAG382"></a><a id="NETAG378"></a><div class="sect2"><a id="GUID-BE15FEF5-5FCA-4291-90CB-EE75C0A496E0" name="GUID-BE15FEF5-5FCA-4291-90CB-EE75C0A496E0"></a><h3 id="NETAG-GUID-BE15FEF5-5FCA-4291-90CB-EE75C0A496E0" class="sect3"><span class="enumeration_section">15.2</span>使用TNSPING实用程序测试客户端的连接</h3>
               <div>
                  <p>TNSPING实用程序确定是否可以成功访问Oracle Net网络上的服务的侦听器。</p>
                  <p>如果使用TNSPING实用程序可以成功地从客户端连接到服务器（或服务器到另一个服务器），则它会显示建立与Oracle侦听器的SQLNET连接所需的往返时间（以毫秒为单位）的估计值到服务器。</p>
                  <p>如果失败，则会显示描述发生错误的消息。这使您可以在没有数据库连接开销的情况下查看正在发生的网络错误。</p>
                  <p>使用以下命令测试连接：</p><pre class="oac_no_warn" dir="ltr">tnsping <span class="italic"><code class="codeph">net_service_name</code></span>计数</pre><p>在上面的命令中，使用以下参数：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="italic">net_service_name</span>必须存在于<code class="codeph">tnsnames.ora</code>文件或正在使用的名称服务中，例如NIS。</p>
                     </li>
                     <li>
                        <p><span class="italic">count</span>确定程序尝试访问服务器的次数。这个参数是可选的。
                        </p>
                     </li>
                  </ul>
                  <p>如果指定的网络服务名称是数据库名称，则TNSPING会尝试联系相应的侦听器。它实际上并不确定数据库是否正在运行。使用SQL * Plus尝试连接数据库。</p>
                  <p>以下是TNSPING的一些示例。</p>
                  <div class="infoboxnote" id="GUID-BE15FEF5-5FCA-4291-90CB-EE75C0A496E0__GUID-D7F4DBBD-AD4C-4FA8-84AD-AB6416262D9B">
                     <p class="notep1">注意：</p>不同的平台可能有不同的接口，但程序接受相同的参数。调用TNSPING以显示正确的接口要求。
                  </div>
                  <p><a href="testing-connections.html#GUID-BE15FEF5-5FCA-4291-90CB-EE75C0A496E0__BABJAGAG">例15-1</a>是使用<code class="codeph">TNSPING</code>命令使用<code class="codeph">sales</code>的网络服务名检查数据库的监听器的示例。
                  </p>
                  <div class="example" id="GUID-BE15FEF5-5FCA-4291-90CB-EE75C0A496E0__BABJAGAG">
                     <p class="titleinexample">示例15-1使用TNSPING检查监听器</p><pre class="oac_no_warn" dir="ltr">TNSPING销售</pre><p>这会产生以下消息：</p><pre class="oac_no_warn" dir="ltr">适用于Linux的TNS Ping实用程序：版本18.0.0.0.0  - 生产于21-JAN-2018版权所有（c）1997,2016 Oracle Corporation。版权所有。使用的参数文件：使用TNSNAMES适配器解析别名尝试联系（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = TCP）（HOST = sales-server）（PORT = 1521）））（CONNECT_DATA =（SERVICE_NAME = sales。 us.example.com）））好的（10毫秒）</pre><p>要确定<code class="codeph">sales</code>数据库的侦听器是否可用，并指定TNSPING尝试连接八次然后放弃，请使用以下语法：</p><pre class="oac_no_warn" dir="ltr">tnsping销售8</pre><p>此命令将生成以下消息：</p><pre class="oac_no_warn" dir="ltr">适用于Linux的TNS Ping实用程序：版本18.0.0.0.0  - 生产于21-JAN-2018版权所有（c）1997,2016 Oracle Corporation。版权所有。使用的参数文件：使用TNSNAMES适配器解析别名尝试联系（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = TCP）（HOST = sales-server）（PORT = 1521）））（CONNECT_DATA =（SERVICE_NAME = sales。 us.example.com）））OK（10毫秒）OK（0毫秒）OK（10毫秒）OK（0毫秒）OK（10毫秒）OK（10毫秒）OK（10毫秒）OK（0毫秒）</pre></div>
                  <!-- class="example" -->
                  <p><a id="d47172e365" class="indexterm-anchor"></a> <a href="testing-connections.html#GUID-BE15FEF5-5FCA-4291-90CB-EE75C0A496E0__BABHBEAD">例15-2</a>是TNSPING尝试使用无效的网络服务名进行检查的示例。
                  </p>
                  <div class="example" id="GUID-BE15FEF5-5FCA-4291-90CB-EE75C0A496E0__BABHBEAD">
                     <p class="titleinexample">示例15-2使用TNSPING检查无效的网络服务名称</p><pre class="oac_no_warn" dir="ltr">tnsping badname</pre><p>此尝试产生以下消息：</p><pre class="oac_no_warn" dir="ltr">适用于Linux的TNS Ping实用程序：版本18.0.0.0.0  - 生产于2018年5月21日版权所有（c）1997,2018 Oracle Corporation。版权所有。使用的参数文件：TNS-03505：无法解析名称</pre></div>
                  <!-- class="example" -->
                  <p><a id="d47172e381" class="indexterm-anchor"></a> <a href="testing-connections.html#GUID-BE15FEF5-5FCA-4291-90CB-EE75C0A496E0__BABIBDJA">示例15-3</a>是使用TNSPING检查有效名称但是解析为没有侦听器的地址时的输出示例，例如，可能无法启动侦听器。
                  </p>
                  <div class="example" id="GUID-BE15FEF5-5FCA-4291-90CB-EE75C0A496E0__BABIBDJA">
                     <p class="titleinexample">示例15-3使用TNSPING检查有效的网络服务名称但没有监听器</p><pre class="oac_no_warn" dir="ltr">tnsping sales TNS Ping Utility for Linux：版本18.0.0.0.0  - 生产于21-JAN-2018版权所有（c）1997,2016 Oracle Corporation。版权所有。使用的参数文件：使用TNSNAMES适配器解析别名尝试联系（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = TCP）（HOST = sales-server）（PORT = 1521）））（CONNECT_DATA =（SERVICE_NAME = sales。 us.example.com）））TNS-12541：TNS：没有听众</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="testing-connections.html#GUID-63C347F7-D993-4F09-A922-309F4AC6E9D2">测试连接</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="NETAG1484"></a><a id="NETAG1485"></a><a id="NETAG383"></a><div class="sect2"><a id="GUID-9A550EEC-5736-46B4-B10E-55849B01A4D0" name="GUID-9A550EEC-5736-46B4-B10E-55849B01A4D0"></a><h3 id="NETAG-GUID-9A550EEC-5736-46B4-B10E-55849B01A4D0" class="sect3"><span class="enumeration_section">15.3</span>使用TRCROUTE实用程序测试客户端的连接</h3>
               <div>
                  <p>跟踪路线实用程序（ <a id="d47172e450" class="indexterm-anchor"></a>在Linux和UNIX环境中，TRCROUTE使管理员能够发现从客户端到服务器的连接路径或路由。如果TRCROUTE遇到问题，则它会向客户端返回错误堆栈而不是单个错误。这些附加错误消息使故障排除更容易
                  </p>
                  <p><a id="d47172e456" class="indexterm-anchor"></a><a id="d47172e460" class="indexterm-anchor"></a> TRCROUTE与TNSPING的不同之处在于它作为一种特殊类型的连接数据包传输，并且如此路由。当它行进到目的地时，TRCROUTE连接数据包收集它经过的每个节点的TNS地址。如果发生错误，则TRCROUTE会收集显示错误发生位置的错误信息。TRCROUTE显示在客户端屏幕上收集的信息。您可以将TRCROUTE输出重定向到文件，然后打印它。
                  </p>
                  <p>TRCROUTE使用最少的资源。它收集特殊连接数据包的连接数据中的信息。标准连接数据包不受影响。</p>
                  <p>服务器不受TRCROUTE的影响。侦听器接收并处理TRCROUTE连接数据包。它通过将信息放入垃圾包中将信息返回给客户端。服务器不需要启动任何新进程或处理虚拟连接。</p>
                  <p>要使用TRCROUTE实用程序，请输入以下命令：</p><pre class="oac_no_warn" dir="ltr">trcroute <span class="italic"><code class="codeph">net_service_name</code></span>
</pre><p><a href="testing-connections.html#GUID-9A550EEC-5736-46B4-B10E-55849B01A4D0__BABHDFGJ">例15-4</a>显示了从客户端传送到侦听器的成功跟踪路由数据包。
                  </p>
                  <div class="example" id="GUID-9A550EEC-5736-46B4-B10E-55849B01A4D0__BABHDFGJ">
                     <p class="titleinexample">例15-4成功的跟踪路由</p><pre class="oac_no_warn" dir="ltr">trcroute sales适用于Linux的Trace Route Utility：版本18.0.0.0.0  - 生产于21-JAN-2018版权所有（c）1999,2018 Oracle Corporation。版权所有。TrcRoute的路由：------------------节点：客户端进入节点的时间和地址：----------------- -------------------------------------------- 09-NOV-2012 21 ：48：48 ADDRESS = PROTOCOL = TCP HOST = 10.150.21.136 PORT = 14001节点：服务器进入节点的时间和地址：---------------------- --------------------------------------- 09-NOV-2012 21:48:05地址= PROTOCOL = TCP HOST = 10.150.21.136 PORT = 14001</pre></div>
                  <!-- class="example" -->
                  <p><a href="testing-connections.html#GUID-9A550EEC-5736-46B4-B10E-55849B01A4D0__BABIJACA">例15-5</a>显示了由于侦听器未启动而无法访问侦听器的不成功跟踪路由数据包。
                  </p>
                  <div class="example" id="GUID-9A550EEC-5736-46B4-B10E-55849B01A4D0__BABIJACA">
                     <p class="titleinexample">例15-5带错误的跟踪路由</p><pre class="oac_no_warn" dir="ltr">trcroute sales适用于Linux的Trace Route Utility：版本18.0.0.0.0  - 生产于21-JAN-2018版权所有（c）1999,2018 Oracle Corporation。版权所有。TrcRoute的路由：------------------节点：客户端进入节点的时间和地址：----------------- -------------------------------------------- 25-FEB-2012 14 ：43：05 ADDRESS = PROTOCOL = TCP HOST = sales-server PORT = 1521 TNS-12543：TNS：无法连接到目标TNS-12541：TNS：没有侦听器TNS-12560：TNS：协议适配器错误TNS-03601：失败在路线信息收集中</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="testing-connections.html#GUID-63C347F7-D993-4F09-A922-309F4AC6E9D2">测试连接</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
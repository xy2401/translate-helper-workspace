<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning."></meta>
      <meta name="description" content="Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning."></meta>
      <title>管理模式对象的空间</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Administrator’s Guide "></meta>
      <meta property="og:description" content="Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96348-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-schema-objects.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-tables.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADMIN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-schema-objects.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-tables.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="schema-objects.html" property="item" typeof="WebPage"><span property="name">架构对象</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理模式对象的空间</li>
            </ol>
            <a id="GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" name="GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565"></a><a id="ADMIN014"></a>
            
            <h2 id="ADMIN-GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" class="sect2"><span class="enumeration_chapter">19</span>管理模式对象的空间</h2>
         </header>
         <div class="ind">
            <p>管理模式对象的空间涉及诸如管理表空间警报和空间分配，回收未使用的空间，删除未使用的对象存储，监视空间使用和容量规划等任务。</p>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE">管理表空间警报</a><br>Oracle数据库通过在可用空间不足时发出警报来提供管理表空间磁盘空间的主动帮助。
                  </li>
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE">管理可恢复的空间分配</a><br>您可以暂停并稍后恢复执行大型数据库操作。
                  </li>
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-1F297567-4BEC-438E-9E13-683D2BB47F44">回收未使用的空间</a><br>您可以回收未使用的空间。Segment Advisor是一个Oracle数据库组件，用于标识具有可用于回收的空间的段。
                  </li>
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-3B76FB24-BC76-43DD-9305-F11EEA138B09">删除未使用的对象存储</a><br><code class="codeph">DBMS_SPACE_ADMIN</code>程序包包含<code class="codeph">DROP_EMPTY_SEGMENTS</code>过程，该过程使您可以删除已从先前版本迁移的空表和分区的段。这包括表的依赖对象的片段，例如索引片段，如果可能的话。
                  </li>
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-03E8BA75-995F-4584-AE3C-6AB70D9F21A4">了解数据类型的空间使用</a><br>创建表和其他数据结构时，您必须知道它们需要多少空间。每种数据类型都有不同的空间要求。
                  </li>
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-2FB91EF7-B908-410E-B952-AF9A71CC25B1">显示有关模式对象的空间使用情况的信息</a><br>Oracle数据库提供数据字典视图和PL / SQL包，允许您显示有关模式对象的空间使用情况的信息。
                  </li>
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977">数据库对象的容量规划</a><br>Oracle数据库提供了两种计划数据库对象容量的方法：使用Cloud Control或<code class="codeph">DBMS_SPACE</code> PL / SQL包。<code class="codeph">DBMS_SPACE</code>包中的三个过程使您能够预测新对象的大小并监视现有数据库对象的大小。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="schema-objects.html#GUID-2DA8C61C-58B0-4892-8E5D-E7A9120BC120" title="您可以在Oracle数据库中创建和管理架构对象。">模式对象</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE" name="GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE"></a><h3 id="ADMIN-GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE" class="sect3"><span class="enumeration_section">19.1</span>管理表空间警报</h3>
               <p>Oracle数据库通过在可用空间不足时发出警报来提供管理表空间磁盘空间的主动帮助。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070">关于管理表空间警报</a><br>默认情况下定义了两个警报阈值： <span class="bold">警告</span>和<span class="bold">严重</span> 。警告阈值是空间开始低的限制。关键阈值是一个严重的限制，值得您立即关注。数据库在两个阈值处发出警报。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40">设置警报阈值</a><br>对于每个表空间，您可以同时设置百分比满阈值，仅剩余自由空间阈值或两种类型的阈值。将任一类型的阈值设置为零都会禁用它。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-2C3676BA-5B9F-4A99-9530-1D79BA8AF893">查看警报</a><br>您可以通过访问Cloud Control中的数据库主页并查看“突发事件和问题”部分来查看警报。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-DE468FB1-C2F6-449B-AA55-2DCCB94912BE">限制</a><br>基于阈值的警报具有一些限制。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="管理模式对象的空间涉及诸如管理表空间警报和空间分配，回收未使用的空间，删除未使用的对象存储，监视空间使用和容量规划等任务。">管理模式对象的空间</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN10120"></a><div class="props_rev_3"><a id="GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070" name="GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070"></a><h4 id="ADMIN-GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070" class="sect4"><span class="enumeration_section">19.1.1</span>关于管理表空间警报</h4>
                  <div>
                     <p>默认情况下定义了两个警报阈值： <span class="bold">警告</span>和<span class="bold">严重</span> 。警告阈值是空间开始低的限制。关键阈值是一个严重的限制，值得您立即关注。数据库在两个阈值处发出警报。
                     </p>
                     <p>有两种方法可以为本地管理的表空间和字典管理的表空间指定警报阈值：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>满百分比</p>
                           <p>对于警告和临界阈值，当使用的空间大于或等于总空间的百分比时，将发出警报。</p>
                        </li>
                        <li>
                           <p>剩余可用空间（以千字节（KB）为单位）</p>
                           <p>对于警告和严重阈值，当剩余空间低于KB的数量时，将发出警报。自由空间剩余阈值对于非常大的表空间更有用。</p>
                        </li>
                     </ul>
                     <p>本地管理的表空间的警报是由服务器生成的。对于字典管理的表空间，Oracle Enterprise Manager云控制（云控制）提供此功能。有关详细信息，请参阅<span class="q">“ <a href="monitoring-the-database.html#GUID-2A91AF1F-A4FF-4D67-928B-BBCE09342331" title="服务器生成的警报可能包含纠正问题的建议。当问题条件被清除时，也会提供通知。">使用服务器生成的警报监视数据库</a> ”</span> 。
                     </p>
                     <p>为新表空间分配警报阈值，如下所示：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">本地管理的表空间</span> - 在创建新的本地管理的表空间时，会为其分配为数据库定义的默认阈值。新创建的数据库的警告阈值的默认值为85％，关键阈值的默认值为97％。新数据库的可用空间剩余阈值的默认值均为零（禁用）。您可以更改这些数据库默认值，如本节后面所述。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">字典管理的表空间</span> - 当您创建新的字典管理的表空间时，会为其指定云控制在度量标准类别“表空间可用空间（MB）（字典管理）”和“使用的表空间空间”中为“所有其他”列出的阈值（ ％）（字典管理）。“您可以在“度量标准和策略设置”页面上更改这些值。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070__GUID-3F883C25-5BE0-4656-A6D9-A8D69B08110E">
                        <p class="notep1">注意：</p>
                        <p>在从Oracle 9 <span class="italic">i</span>或更早版本升级到Oracle Database <span class="italic">10g</span>或更高版本的数据库中，所有本地管理的表空间警报阈值的数据库默认值都设置为零。此设置有效地禁用警报机制，以避免新迁移的数据库中出现过多警报。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE" title="Oracle数据库通过在可用空间不足时发出警报来提供管理表空间磁盘空间的主动帮助。">管理表空间警报</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13998"></a><a id="ADMIN12621"></a><a id="ADMIN12622"></a><a id="ADMIN12623"></a><a id="ADMIN11567"></a><div class="props_rev_3"><a id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40" name="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40"></a><h4 id="ADMIN-GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40" class="sect4"><span class="enumeration_section">19.1.2</span>设置警报阈值</h4>
                  <div>
                     <p>对于每个表空间，您可以同时设置百分比满阈值，仅剩余自由空间阈值或两种类型的阈值。将任一类型的阈值设置为零都会禁用它。</p>
                     <div class="section">
                        <p>警告阈值的理想设置是尽早发出警报，以便在问题变得严重之前解决问题。关键阈值应该是能够尽早发出警报的阈值，以便您可以立即采取措施以避免服务中断。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-40EB6BD8-100A-43B1-80E6-3453C52BAD17">要为本地管理的表空间设置警报阈值：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>执行以下操作之一：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用Cloud Control的“表空间”页面。</p>
                                    <p>有关更改表空间的空间使用警报阈值的信息，请参阅Cloud Control联机帮助。</p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">DBMS_SERVER_ALERT.SET_THRESHOLD</code>程序包过程。
                                    </p>
                                    <p>有关详细信息，请参见<a href="../arpls/DBMS_SERVER_ALERT.html#ARPLS016" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-0D3F27BD-8C1C-4173-9754-7D3C17C28067">要为字典管理的表空间设置警报阈值：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用Cloud Control的“表空间”页面。</p>
                              <p>有关更改表空间的空间使用警报阈值的信息，请参阅Cloud Control联机帮助。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-2BF8A5B0-2967-47A0-99A9-E1C89070C796">示例 - 使用云控制设置警报阈值</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>当达到表空间的空间使用阈值时，您会在Cloud Control中收到警报。您可以启用两种类型的空间使用警报： <span class="bold">警告</span> ，当表空间空间有些低时，以及<span class="bold">关键</span> ，当表空间几乎完全填满并且必须立即采取措施时。
                        </p>
                        <p>对于警告和严重警报，您可以通过以下方式指定警报阈值：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>按使用的空间（％）</p>
                              <p>当使用的空间大于或等于总空间的百分比时，将发出警报。</p>
                           </li>
                           <li>
                              <p>按自由空间（MB）</p>
                              <p>当剩余空间低于金额（以MB为单位）时，将发出警报。</p>
                              <p>可用空间阈值对大型表空间更有用。例如，对于10 TB表空间，将完全严重警报百分比设置为高达99％意味着数据库将在剩余100 GB可用空间时发出警报。通常，剩余100 GB不会是严重的情况，警报也没有用。对于此表空间，最好使用可用空间阈值，您可以将其设置为在剩余5 GB可用空间时发出严重警报。</p>
                           </li>
                        </ul>
                        <p>对于表空间的警告和严重警报，您可以启用空间使用阈值或可用空间阈值，也可以启用两个阈值。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-ADF7CE56-3AFB-41BE-9A19-2A4C570E10ED">要更改表空间的空间使用警报阈值，请执行以下操作：</p>
                        <ol>
                           <li>
                              <p>转到数据库主页。</p>
                           </li>
                           <li>
                              <p>从“ <span class="bold">管理”</span>菜单中，选择“ <span class="bold">存储”</span> ，然后选择“ <span class="bold">表空间”</span> 。
                              </p>
                              <p>将出现“表空间”页面。</p>
                           </li>
                           <li>
                              <p>选择要更改其阈值的表空间，然后单击“ <span class="bold">编辑”</span> 。
                              </p>
                              <p>将出现“编辑表空间”页面，其中显示“常规”子页面。</p>
                           </li>
                           <li>
                              <p>单击页面顶部的“ <span class="bold">阈值”</span>选项卡以显示“阈值”子页面。
                              </p>
                           </li>
                           <li>
                              <p>在“使用的空间（％）”部分中，执行以下操作之一：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>接受默认阈值。</p>
                                 </li>
                                 <li>
                                    <p>选择“ <span class="bold">指定阈值”</span> ，然后输入<span class="bold">警告（％）</span>阈值和<span class="bold">严重（％）</span>阈值。
                                    </p>
                                 </li>
                                 <li>
                                    <p>选择“ <span class="bold">禁用阈值”</span>以禁用百分比满阈值。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>在“可用空间（MB）”部分中，执行以下操作之一：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>接受默认阈值。</p>
                                 </li>
                                 <li>
                                    <p>选择“ <span class="bold">指定阈值”</span> ，然后输入<span class="bold">警告（MB）</span>阈值和<span class="bold">严重（MB）</span>阈值。
                                    </p>
                                 </li>
                                 <li>
                                    <p>选择“ <span class="bold">禁用阈值”</span>以禁用剩余可用空间的阈值。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">应用”</span>
                              </p>
                              <p>出现确认消息。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-EECEB2B5-39D0-4207-8915-DBB566D79D38">示例 - 使用程序包过程设置警报阈值</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例将<code class="codeph">USERS</code>表空间中的可用空间剩余阈值设置为10 MB（警告）和2 MB（严重），并禁用百分比满阈值。<code class="codeph">USERS</code>表空间是本地管理的表空间。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SERVER_ALERT.SET_THRESHOLD（metrics_id =&gt; DBMS_SERVER_ALERT.TABLESPACE_BYT_FREE，warning_operator =&gt; DBMS_SERVER_ALERT.OPERATOR_LE，warning_value =&gt;'10240'，critical_operator =&gt; DBMS_SERVER_ALERT.OPERATOR_LE，critical_value =&gt;'2048'，observation_period =&gt; 1，consecutive_occurrences =&gt; 1， instance_name =&gt; NULL，object_type =&gt; DBMS_SERVER_ALERT.OBJECT_TYPE_TABLESPACE，object_name =&gt;'USERS'）; DBMS_SERVER_ALERT.SET_THRESHOLD（metrics_id =&gt; DBMS_SERVER_ALERT.TABLESPACE_PCT_FULL，warning_operator =&gt; DBMS_SERVER_ALERT.OPERATOR_GT，warning_value =&gt;'0'，critical_operator =&gt; DBMS_SERVER_ALERT.OPERATOR_GT，critical_value =&gt;'0'，observation_period =&gt; 1，consecutive_occurrences =&gt; 1，instance_name =&gt; NULL，object_type =&gt; DBMS_SERVER_ALERT.OBJECT_TYPE_TABLESPACE，object_name =&gt;'USERS'）;结束; /</pre><div class="infoboxnote" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-5CB2A2C8-56CA-47C9-B34C-5DCCAA00A90B">
                           <p class="notep1">注意：</p>
                           <p>为百分比满阈值设置非零值时，请使用大于或等于运算<code class="codeph">OPERATOR_GE</code> 。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-9E08FB29-B426-4313-ACCF-FDC3774CACB4">将表空间还原为数据库默认阈值</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>显式设置本地管理的表空间警报阈值的值后，可以通过使用<code class="codeph">DBMS_SERVER_ALERT.SET_THRESHOLD</code>将值设置为<code class="codeph">NULL</code>来使值恢复为数据库缺省值。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-136FD5DC-2041-4261-A597-5E507C595F32">修改数据库默认阈值</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>要修改本地管理的表空间的数据库缺省阈值，请调用<code class="codeph">DBMS_SERVER_ALERT.SET_THRESHOLD</code> ，如上例所示，但将<code class="codeph">object_name</code>设置为<code class="codeph">NULL</code> 。然后，使用数据库默认值的所有表空间都将切换为新的默认值。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE" title="Oracle数据库通过在可用空间不足时发出警报来提供管理表空间磁盘空间的主动帮助。">管理表空间警报</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11568"></a><div class="props_rev_3"><a id="GUID-2C3676BA-5B9F-4A99-9530-1D79BA8AF893" name="GUID-2C3676BA-5B9F-4A99-9530-1D79BA8AF893"></a><h4 id="ADMIN-GUID-2C3676BA-5B9F-4A99-9530-1D79BA8AF893" class="sect4"><span class="enumeration_section">19.1.3</span>查看警报</h4>
                  <div>
                     <p>您可以通过访问Cloud Control中的数据库主页并查看“突发事件和问题”部分来查看警报。</p>
                     <div class="section">
                        <div class="figure" id="GUID-2C3676BA-5B9F-4A99-9530-1D79BA8AF893__GUID-1D1733B1-2667-4B64-9DCC-6CBE9632AB0C"><img src="img/alerts_tablespace_full.gif" height="229" width="605" alt="alert_tablespace_full.gif的描述如下" title="alert_tablespace_full.gif的描述如下" longdesc="img_text/alerts_tablespace_full.html"><br><a href="img_text/alerts_tablespace_full.html">警告说明alerts_tablespace_full.gif</a></div>
                        <!-- class="figure" -->
                        <p>您还可以使用<code class="codeph">DBA_OUTSTANDING_ALERTS</code>视图查看本地管理的表空间的警报。有关详细信息，请参阅<span class="q">“ <a href="monitoring-the-database.html#GUID-865789BF-8011-45D6-8866-E9DA154E66B1" title="您可以查询数据字典视图，以获取有关服务器生成的警报的信息">服务器生成的警报数据字典视图</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE" title="Oracle数据库通过在可用空间不足时发出警报来提供管理表空间磁盘空间的主动帮助。">管理表空间警报</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11569"></a><div class="props_rev_3"><a id="GUID-DE468FB1-C2F6-449B-AA55-2DCCB94912BE" name="GUID-DE468FB1-C2F6-449B-AA55-2DCCB94912BE"></a><h4 id="ADMIN-GUID-DE468FB1-C2F6-449B-AA55-2DCCB94912BE" class="sect4"><span class="enumeration_section">19.1.4</span>限制</h4>
                  <div>
                     <p>基于阈值的警报具有一些限制。</p>
                     <p>这些限制包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于脱机或处于只读模式的本地管理表空间，不会发出警报。但是，数据库在读/写或可用后重新激活此类表空间的警报系统。</p>
                        </li>
                        <li>
                           <p>将表空间脱机或将其置于只读模式时，应通过将阈值设置为零来禁用表空间的警报。然后，当表空间再次联机并处于读/写模式时，您可以通过重置阈值来重新启用警报。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-DE468FB1-C2F6-449B-AA55-2DCCB94912BE__GUID-C67B433F-3692-4688-A069-1A06B2D5D6B3">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="monitoring-the-database.html#GUID-2A91AF1F-A4FF-4D67-928B-BBCE09342331" title="服务器生成的警报可能包含纠正问题的建议。当问题条件被清除时，也会提供通知。">使用服务器生成的警报监视数据库</a> ”，</span>以获取有关服务器生成的警报的更多信息</p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SERVER_ALERT.html#ARPLS016" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a>有关<code class="codeph">DBMS_SERVER_ALERT</code>包的过程以及如何使用它们的信息</p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" title="您可以回收未使用的空间。Segment Advisor是一个Oracle数据库组件，用于标识具有可用于回收的空间的段。">回收未使用的空间</a> ”</span>以各种方式回收不再在表空间中使用的空间</p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-tables.html#GUID-82E62BDB-E886-4EF9-943C-C62D632E499B" title="如果您决定永远不会从回收站还原项目，则可以使用PURGE语句从回收站中删除项目及其关联对象并释放其存储空间。您需要与放弃项目时相同的权限。">清除回收站中的对象</a> ”</span>以获取有关回收回收站空间的信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE" title="Oracle数据库通过在可用空间不足时发出警报来提供管理表空间磁盘空间的主动帮助。">管理表空间警报</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11581"></a><div class="props_rev_3"><a id="GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" name="GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE"></a><h3 id="ADMIN-GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" class="sect3"><span class="enumeration_section">19.2</span>管理可恢复的空间分配</h3>
               <p>您可以暂停并稍后恢复执行大型数据库操作。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9">可恢复空间分配概述</a><br>Oracle数据库提供了一种在空间分配失败时暂停和稍后恢复大型数据库操作执行的方法。因此，您可以采取纠正措施，而不是Oracle数据库服务器向用户返回错误。纠正错误条件后，暂停操作将自动恢复。此功能称为<span class="bold">可恢复空间分配</span> 。受影响的语句称为可恢复语句。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-96651685-7270-4165-ADEC-433AC6465AEF">启用和禁用可恢复空间分配</a><br>您可以通过运行SQL语句并设置某些初始化参数来启用和禁用可恢复的空间分配。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-51FC90D4-2AD0-4F4C-8FAC-65DD1A8F7F93">使用LOGON触发器设置默认可恢复模式</a><br>除了设置<code class="codeph">RESUMABLE_TIMEOUT</code>初始化参数之外，设置默认可恢复模式的另一种方法是，您可以注册数据库级别<code class="codeph">LOGON</code>触发器以更改用户的会话以启用可恢复并设置超时间隔。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8">检测暂停的陈述</a><br>当可恢复语句被挂起时，错误不会提交给客户端。为了采取纠正措施，Oracle数据库提供了替代方法，用于通知用户错误并提供有关情况的信息。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-1ED25C9D-4D0D-47DA-AEFE-14D6F8BFD742">操作 - 暂停警报</a><br>当可恢复会话暂停时，将对需要分配资源的对象发出操作暂停警报以完成操作。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-7699310D-784F-4AB7-B3E0-05B2DBF59A60">可恢复空间分配示例：注册AFTER SUSPEND触发器</a><br>示例说明了如何创建系统范围的<code class="codeph">AFTER SUSPEND</code>触发器并在数据库级别将其注册为用户<code class="codeph">SYS</code> 。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="管理模式对象的空间涉及诸如管理表空间警报和空间分配，回收未使用的空间，删除未使用的对象存储，监视空间使用和容量规划等任务。">管理模式对象的空间</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11582"></a><div class="props_rev_3"><a id="GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" name="GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9"></a><h4 id="ADMIN-GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" class="sect4"><span class="enumeration_section">19.2.1</span>可恢复空间分配概述</h4>
                  <p>Oracle数据库提供了一种在空间分配失败时暂停和稍后恢复大型数据库操作执行的方法。因此，您可以采取纠正措施，而不是Oracle数据库服务器向用户返回错误。纠正错误条件后，暂停操作将自动恢复。此功能称为<span class="bold">可恢复空间分配</span> 。受影响的语句称为可恢复语句。
                  </p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-46AE3FD8-95D4-4CFA-9F3C-B80C5AFDE75B">可恢复的空间分配如何工作</a><br>概述显示可恢复空间分配的工作原理。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-BF57AB3A-C6CD-41D1-988B-BB5FC1E986D7">哪些操作可以恢复？</a><br>某些操作可以恢复。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-7CD38BF4-75DD-425C-9DCA-FA6DE20FBFD7">什么错误是可以纠正的？</a><br>有些错误是可以纠正的。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-77F39E22-4329-432C-8F43-D21411454A72">可恢复空间分配和分布式操作</a><br>在分布式环境中，如果用户启用或禁用可恢复空间分配，或者DBA更改<code class="codeph">RESUMABLE_TIMEOUT</code>初始化参数，则本地实例会受到影响。<code class="codeph">RESUMABLE</code>不能远程启动。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-B76A2316-88AC-4740-A552-183CE8F11E75">并行执行和可恢复空间分配</a><br>在并行执行中，如果其中一个并行执行服务器进程遇到可纠正的错误，则该服务器进程暂停其执行。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" title="您可以暂停并稍后恢复执行大型数据库操作。">管理可恢复空间分配</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11583"></a><div class="props_rev_3"><a id="GUID-46AE3FD8-95D4-4CFA-9F3C-B80C5AFDE75B" name="GUID-46AE3FD8-95D4-4CFA-9F3C-B80C5AFDE75B"></a><h5 id="ADMIN-GUID-46AE3FD8-95D4-4CFA-9F3C-B80C5AFDE75B" class="sect5"><span class="enumeration_section">19.2.1.1</span>可恢复空间分配的工作原理</h5>
                     <div>
                        <p>概述显示可恢复空间分配的工作原理。</p>
                        <ol>
                           <li>
                              <p>只有在通过以下操作之一启用了可恢复空间分配的会话时，语句才会以可恢复模式执行：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>当<code class="codeph">RESUMABLE_TIMEOUT</code>初始化参数设置为非零值时，在语句执行之前会话中发出<code class="codeph">ALTER SESSION ENABLE RESUMABLE</code>语句。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ALTER SESSION ENABLE RESUMABLE TIMEOUT</code> <span class="italic"><code class="codeph">timeout_value</code></span>语句在语句执行之前在会话中发出， <span class="italic"><code class="codeph">timeout_value</code></span>是非零值。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>当出现下列情况之一时，可恢复声明将被暂停（这些条件导致相应的错误被发出不可恢复声明的信号）：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>空间条件不佳</p>
                                 </li>
                                 <li>
                                    <p>达到最大范围的条件</p>
                                 </li>
                                 <li>
                                    <p>空间配额超出条件。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>当暂停执行可恢复语句时，存在执行用户提供的操作，记录错误和查询语句执行状态的机制。暂停可恢复声明时，将采取以下措施：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>警报日志中报告错误。</p>
                                 </li>
                                 <li>
                                    <p>系统发出Resumable Session Suspended警报。</p>
                                 </li>
                                 <li>
                                    <p>如果用户在<code class="codeph">AFTER SUSPEND</code>系统事件上注册了触发器，则执行用户触发器。用户提供的PL / SQL过程可以使用<code class="codeph">DBMS_RESUMABLE</code>包和<code class="codeph">DBA_</code>或<code class="codeph">USER_RESUMABLE</code>视图访问错误消息数据。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>挂起语句会自动导致暂停事务。因此，所有事务资源都通过语句暂停和恢复来保存。</p>
                           </li>
                           <li>
                              <p>当错误条件得到解决时（例如，由于用户干预或可能由其他查询释放的排序空间），挂起的语句会自动恢复执行并清除Resumable Session Suspended警报。</p>
                           </li>
                           <li>
                              <p>可以使用<code class="codeph">DBMS_RESUMABLE.ABORT()</code>过程强制挂起的语句抛出异常。此过程可由DBA或发出该语句的用户调用。
                              </p>
                           </li>
                           <li>
                              <p>由<code class="codeph">RESUMABLE_TIMEOUT</code>初始化参数或<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">ENABLE</code> <code class="codeph">RESUMABLE</code> <code class="codeph">TIMEOUT</code>语句中的超时值指定的暂停超时间隔与可恢复语句相关联。如果在超时间隔内未解决错误条件，则在超时间隔暂停的可恢复语句将被唤醒并将异常返回给用户。
                              </p>
                           </li>
                           <li>
                              <p>在执行期间，可以暂停和恢复可恢复语句多次。</p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" title="Oracle数据库提供了一种在空间分配失败时暂停和稍后恢复大型数据库操作执行的方法。因此，您可以采取纠正措施，而不是Oracle数据库服务器向用户返回错误。纠正错误条件后，暂停操作将自动恢复。此功能称为可恢复空间分配。受影响的语句称为可恢复语句。">可恢复空间分配概述</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11584"></a><div class="props_rev_3"><a id="GUID-BF57AB3A-C6CD-41D1-988B-BB5FC1E986D7" name="GUID-BF57AB3A-C6CD-41D1-988B-BB5FC1E986D7"></a><h5 id="ADMIN-GUID-BF57AB3A-C6CD-41D1-988B-BB5FC1E986D7" class="sect5"><span class="enumeration_section">19.2.1.2</span>哪些操作可以<span class="enumeration_section">恢复</span> ？
                     </h5>
                     <div>
                        <p>某些操作可以恢复。</p>
                        <p>以下操作可以恢复：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>查询</p>
                              <p>用于临时空间（对于排序区域）的<code class="codeph">SELECT</code>语句是可恢复执行的候选者。使用OCI时，调用<code class="codeph">OCIStmtExecute()</code>和<code class="codeph">OCIStmtFetch()</code>是候选者。
                              </p>
                           </li>
                           <li>
                              <p>DML</p>
                              <p><code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>语句是候选语句。用于执行它们的接口并不重要;它可以是OCI，PL / SQL或其他接口。另外， <code class="codeph">INSERT INTO...外部表中的SELECT</code>可以恢复。
                              </p>
                           </li>
                           <li>
                              <p>进出口</p>
                              <p>对于SQL * Loader，命令行参数控制语句在可恢复错误后是否可恢复。</p>
                           </li>
                           <li>
                              <p>DDL</p>
                              <p>以下陈述是可恢复执行的候选者：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code> ...<code class="codeph">AS</code> <code class="codeph">SELECT</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CREATE</code> <code class="codeph">INDEX</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ......<code class="codeph">重建</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ...<code class="codeph">MOVE</code> <code class="codeph">PARTITION</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ...<code class="codeph">SPLIT</code> <code class="codeph">PARTITION</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ......<code class="codeph">REBUILD</code> <code class="codeph">PARTITION</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ......<code class="codeph">SPLIT</code> <code class="codeph">PARTITION</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code></p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" title="Oracle数据库提供了一种在空间分配失败时暂停和稍后恢复大型数据库操作执行的方法。因此，您可以采取纠正措施，而不是Oracle数据库服务器向用户返回错误。纠正错误条件后，暂停操作将自动恢复。此功能称为可恢复空间分配。受影响的语句称为可恢复语句。">可恢复空间分配概述</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11585"></a><div class="props_rev_3"><a id="GUID-7CD38BF4-75DD-425C-9DCA-FA6DE20FBFD7" name="GUID-7CD38BF4-75DD-425C-9DCA-FA6DE20FBFD7"></a><h5 id="ADMIN-GUID-7CD38BF4-75DD-425C-9DCA-FA6DE20FBFD7" class="sect5"><span class="enumeration_section">19.2.1.3</span>哪些错误是<span class="enumeration_section">可纠正的</span> ？
                     </h5>
                     <div>
                        <p>有些错误是可以纠正的。</p>
                        <p>有三类可纠正的错误：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>空间条件不佳</p>
                              <p>该操作无法为表空间中的表/索引/临时段/撤消段/集群/ LOB /表分区/索引分区获取任何更多扩展区。例如，以下错误属于此类别：</p><pre class="oac_no_warn" dir="ltr">ORA-01653无法在表空间中扩展表...ORA-01654无法在表空间中扩展索引...
</pre></li>
                           <li>
                              <p>达到最大范围的条件</p>
                              <p>表/索引/临时段/撤消段/集群/ LOB /表分区/索引分区中的扩展区数等于对象上定义的最大扩展区。例如，以下错误属于此类别：</p><pre class="oac_no_warn" dir="ltr">ORA-01631 max＃extents ...在表格中达到...ORA-01632 max＃extents ...在索引中达到...
</pre></li>
                           <li>
                              <p>空间配额超出条件</p>
                              <p>用户已超出表空间中指定的空间配额。具体而言，这由以下错误指出：</p><pre class="oac_no_warn" dir="ltr">表空间<span class="italic">字符串</span>超出ORA-01536空间报价 </pre></li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" title="Oracle数据库提供了一种在空间分配失败时暂停和稍后恢复大型数据库操作执行的方法。因此，您可以采取纠正措施，而不是Oracle数据库服务器向用户返回错误。纠正错误条件后，暂停操作将自动恢复。此功能称为可恢复空间分配。受影响的语句称为可恢复语句。">可恢复空间分配概述</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11586"></a><div class="props_rev_3"><a id="GUID-77F39E22-4329-432C-8F43-D21411454A72" name="GUID-77F39E22-4329-432C-8F43-D21411454A72"></a><h5 id="ADMIN-GUID-77F39E22-4329-432C-8F43-D21411454A72" class="sect5"><span class="enumeration_section">19.2.1.4</span>可恢复空间分配和分布式操作</h5>
                     <div>
                        <p>在分布式环境中，如果用户启用或禁用可恢复空间分配，或者DBA更改<code class="codeph">RESUMABLE_TIMEOUT</code>初始化参数，则本地实例会受到影响。<code class="codeph">RESUMABLE</code>不能远程启动。
                        </p>
                        <p>在分布式事务中，仅当远程实例已在实例或其站点上的会话上启用<code class="codeph">RESUMABLE</code> ，才会挂起远程实例上的会话。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" title="Oracle数据库提供了一种在空间分配失败时暂停和稍后恢复大型数据库操作执行的方法。因此，您可以采取纠正措施，而不是Oracle数据库服务器向用户返回错误。纠正错误条件后，暂停操作将自动恢复。此功能称为可恢复空间分配。受影响的语句称为可恢复语句。">可恢复空间分配概述</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11587"></a><div class="props_rev_3"><a id="GUID-B76A2316-88AC-4740-A552-183CE8F11E75" name="GUID-B76A2316-88AC-4740-A552-183CE8F11E75"></a><h5 id="ADMIN-GUID-B76A2316-88AC-4740-A552-183CE8F11E75" class="sect5"><span class="enumeration_section">19.2.1.5</span>并行执行和可恢复空间分配</h5>
                     <div>
                        <p>在并行执行中，如果其中一个并行执行服务器进程遇到可纠正的错误，则该服务器进程暂停其执行。</p>
                        <p>其他并行执行服务器进程将继续执行其各自的任务，直到它们遇到错误或被挂起的服务器进程（直接或间接）阻止。解决可纠正的错误后，挂起的进程将继续执行，并行操作将继续执行。如果挂起的操作终止，则并行操作中止，将错误抛给用户。</p>
                        <p>不同的并行执行服务器进程可能遇到一个或多个可纠正的错误。这可能导致多次并行触发<code class="codeph">AFTER SUSPEND</code>触发器。此外，如果并行执行服务器进程在挂起另一个并行执行服务器进程时遇到不可纠正的错误，则会立即中止挂起的语句。
                        </p>
                        <p>对于并行执行，每个并行执行协调器和服务器进程在<code class="codeph">DBA</code> _或<code class="codeph">USER_RESUMABLE</code>视图中都有自己的条目。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" title="Oracle数据库提供了一种在空间分配失败时暂停和稍后恢复大型数据库操作执行的方法。因此，您可以采取纠正措施，而不是Oracle数据库服务器向用户返回错误。纠正错误条件后，暂停操作将自动恢复。此功能称为可恢复空间分配。受影响的语句称为可恢复语句。">可恢复空间分配概述</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-96651685-7270-4165-ADEC-433AC6465AEF" name="GUID-96651685-7270-4165-ADEC-433AC6465AEF"></a><h4 id="ADMIN-GUID-96651685-7270-4165-ADEC-433AC6465AEF" class="sect4"><span class="enumeration_section">19.2.2</span>启用和禁用可恢复空间分配</h4>
                  <p>您可以通过运行SQL语句并设置某些初始化参数来启用和禁用可恢复的空间分配。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-28E0D9D2-B5C1-4DDD-8148-5034C66CDCAA">关于启用和禁用可恢复空间分配</a><br>仅当在启用了可恢复模式的会话中执行语句时，才可以使用可恢复空间分配。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-0ED485D5-7F97-4F62-AA3D-B6A0DAF57E05">设置RESUMABLE_TIMEOUT初始化参数</a><br>您可以通过设置<code class="codeph">RESUMABLE_TIMEOUT</code>初始化参数来指定默认的系统范围超时间隔。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE">使用ALTER SESSION启用和禁用可恢复空间分配</a><br>在会话中，用户可以发出<code class="codeph">ALTER SESSION SET</code>语句来设置<code class="codeph">RESUMABLE_TIMEOUT</code>初始化参数并启用可恢复空间分配，更改超时值或禁用可恢复模式。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" title="您可以暂停并稍后恢复执行大型数据库操作。">管理可恢复空间分配</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11588"></a><div class="props_rev_3"><a id="GUID-28E0D9D2-B5C1-4DDD-8148-5034C66CDCAA" name="GUID-28E0D9D2-B5C1-4DDD-8148-5034C66CDCAA"></a><h5 id="ADMIN-GUID-28E0D9D2-B5C1-4DDD-8148-5034C66CDCAA" class="sect5"><span class="enumeration_section">19.2.2.1</span>关于启用和禁用可恢复空间分配</h5>
                     <div>
                        <p>仅当在启用了可恢复模式的会话中执行语句时，才可以使用可恢复空间分配。</p>
                        <p></p>
                        <p>执行<code class="codeph">ALTER SESSION ENABLE RESUMABLE</code>语句时， <code class="codeph">ALTER SESSION ENABLE RESUMABLE</code>可恢复空间分配，并且会话的<code class="codeph">RESUMABLE_TIMEOUT</code>初始化参数设置为非零值。当<code class="codeph">RESUMABLE_TIMEOUT</code>初始化参数在系统级别设置时，它是未指定超时值的<code class="codeph">ALTER SESSION ENABLE RESUMABLE</code>语句的缺省值。当<code class="codeph">ALTER SESSION ENABLE RESUMABLE</code>语句指定超时值时，它将覆盖系统默认值。
                        </p>
                        <p>在执行<code class="codeph">ALTER SESSION ENABLE RESUMABLE</code>语句时，在以下所有情况下，会话都会禁用可恢复空间分配：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>会话不执行<code class="codeph">ALTER SESSION ENABLE RESUMABLE</code>语句。
                              </p>
                           </li>
                           <li>
                              <p>会话执行<code class="codeph">ALTER SESSION DISABLE RESUMABLE</code>语句。
                              </p>
                           </li>
                           <li>
                              <p>会话执行<code class="codeph">ALTER SESSION ENABLE RESUMABLE</code>语句，超时值为零。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-28E0D9D2-B5C1-4DDD-8148-5034C66CDCAA__GUID-64973D30-6C21-407C-A0E0-996F925E2EF3">
                           <p class="notep1">注意：</p>
                           <p>由于挂起的语句可能会占用一些系统资源，因此必须先授予用户<code class="codeph">RESUMABLE</code>系统权限，然后才允许用户启用可恢复的空间分配并执行可恢复的语句。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-96651685-7270-4165-ADEC-433AC6465AEF" title="您可以通过运行SQL语句并设置某些初始化参数来启用和禁用可恢复的空间分配。">启用和禁用可恢复空间分配</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11589"></a><div class="props_rev_3"><a id="GUID-0ED485D5-7F97-4F62-AA3D-B6A0DAF57E05" name="GUID-0ED485D5-7F97-4F62-AA3D-B6A0DAF57E05"></a><h5 id="ADMIN-GUID-0ED485D5-7F97-4F62-AA3D-B6A0DAF57E05" class="sect5"><span class="enumeration_section">19.2.2.2</span>设置<span class="enumeration_section">RESUMABLE_TIMEOUT</span>初始化参数</h5>
                     <div>
                        <p>您可以通过设置<code class="codeph">RESUMABLE_TIMEOUT</code>初始化参数来指定默认的系统范围超时间隔。
                        </p>
                        <div class="section">
                           <p>例如，初始化参数文件中的<code class="codeph">RESUMABLE_TIMEOUT</code>参数的以下设置将超时时间设置为1小时：</p><pre class="oac_no_warn" dir="ltr">RESUMABLE_TIMEOUT = 3600</pre><p>如果此参数设置为0，则即使对于运行<code class="codeph">ALTER SESSION ENABLE RESUMABLE</code>语句而没有超时值的会话，也会禁用可恢复空间分配。
                           </p>
                           <p>您还可以使用<code class="codeph">ALTER SYSTEM SET</code>语句在系统级别更改此参数的值。例如，以下语句禁用运行<code class="codeph">ALTER SESSION ENABLE RESUMABLE</code>语句而没有超时值的所有会话的可恢复空间分配：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET RESUMABLE_TIMEOUT = 0;</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-96651685-7270-4165-ADEC-433AC6465AEF" title="您可以通过运行SQL语句并设置某些初始化参数来启用和禁用可恢复的空间分配。">启用和禁用可恢复空间分配</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11590"></a><div class="props_rev_3"><a id="GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE" name="GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE"></a><h5 id="ADMIN-GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE" class="sect5"><span class="enumeration_section">19.2.2.3</span>使用ALTER SESSION启用和禁用可恢复空间分配</h5>
                     <div>
                        <p>在会话中，用户可以发出<code class="codeph">ALTER SESSION SET</code>语句来设置<code class="codeph">RESUMABLE_TIMEOUT</code>初始化参数并启用可恢复空间分配，更改超时值或禁用可恢复模式。
                        </p>
                        <div class="section">
                           <p>用户可以使用以下SQL语句为具有默认系统<code class="codeph">RESUMABLE_TIMEOUT</code>值的会话启用可恢复模式：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION ENABLE RESUMABLE;</pre><p>要禁用可恢复模式，用户会发出以下声明：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION DISABLE RESUMABLE;</pre><p>新会话的默认设置是禁用可恢复模式。</p>
                           <p>用户还可以指定超时间隔，并且可以提供用于标识可恢复语句的名称。这些将在以下部分中单独讨论。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-1F5A39B2-0DA8-4356-B9F1-9C8B67448624">指定超时间隔</a><br>启用可恢复模式时，可以设置超时时间，如果没有进行干预，则挂起的语句将发生错误。
                           </li>
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-C938CC8D-242E-4E45-B41F-04DF58B989EC">命名可恢复的声明</a><br>可以通过名称识别可恢复的语句。
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE__GUID-8CC17B27-3881-48C5-ACEF-CBDB9ACAC9F9">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-51FC90D4-2AD0-4F4C-8FAC-65DD1A8F7F93" title="除了设置RESUMABLE_TIMEOUT初始化参数之外，设置默认可恢复模式的另一种方法是，您可以注册数据库级别LOGON触发器以更改用户的会话以启用可恢复并设置超时间隔。">使用LOGON触发器设置默认可恢复模式</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-96651685-7270-4165-ADEC-433AC6465AEF" title="您可以通过运行SQL语句并设置某些初始化参数来启用和禁用可恢复的空间分配。">启用和禁用可恢复空间分配</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN11591"></a><div class="props_rev_3"><a id="GUID-1F5A39B2-0DA8-4356-B9F1-9C8B67448624" name="GUID-1F5A39B2-0DA8-4356-B9F1-9C8B67448624"></a><h6 id="ADMIN-GUID-1F5A39B2-0DA8-4356-B9F1-9C8B67448624" class="sect6"><span class="enumeration_section">19.2.2.3.1</span>指定超时间隔</h6>
                        <div>
                           <p>启用可恢复模式时，可以设置超时时间，如果没有进行干预，则挂起的语句将发生错误。</p>
                           <div class="section">
                              <p>以下语句指定可恢复的事务将在3600秒后超时并出错：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION ENABLE RESUMABLE TIMEOUT 3600;</pre><p><code class="codeph">TIMEOUT</code>的值保持有效，直到它被另一个<code class="codeph">ALTER SESSION ENABLE RESUMABLE</code>语句更改，它通过其他方式更改，或者会话结束。如果未设置<code class="codeph">RESUMABLE_TIMEOUT</code>初始化参数，则使用<code class="codeph">ENABLE RESUMABLE TIMEOUT</code>子句启用可恢复模式时的默认超时间隔为7200秒。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-1F5A39B2-0DA8-4356-B9F1-9C8B67448624__GUID-433E572D-E71A-420C-86CF-4D4A102C84E8">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-0ED485D5-7F97-4F62-AA3D-B6A0DAF57E05" title="您可以通过设置RESUMABLE_TIMEOUT初始化参数来指定默认的系统范围超时间隔。">设置RESUMABLE_TIMEOUT初始化参数</a> ”</span>用于更改可恢复空间分配的超时间隔的其他方法</p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE" title="在会话中，用户可以发出ALTER SESSION SET语句来设置RESUMABLE_TIMEOUT初始化参数并启用可恢复空间分配，更改超时值或禁用可恢复模式。">使用ALTER SESSION启用和禁用可恢复空间分配</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN11592"></a><div class="props_rev_3"><a id="GUID-C938CC8D-242E-4E45-B41F-04DF58B989EC" name="GUID-C938CC8D-242E-4E45-B41F-04DF58B989EC"></a><h6 id="ADMIN-GUID-C938CC8D-242E-4E45-B41F-04DF58B989EC" class="sect6"><span class="enumeration_section">19.2.2.3.2</span>命名可恢复语句</h6>
                        <div>
                           <p>可以通过名称识别可恢复的语句。</p>
                           <div class="section">
                              <p>以下语句为可恢复语句指定名称：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION ENABLE RESUMABLE TIMEOUT 3600 NAME'insert into table';</pre><p><code class="codeph">NAME</code>值保持有效，直到它被另一个<code class="codeph">ALTER SESSION ENABLE RESUMABLE</code>语句<code class="codeph">ALTER SESSION ENABLE RESUMABLE</code> ，或者会话结束。<code class="codeph">NAME</code>的默认值为“ <code class="codeph">User</code> <span class="italic"><code class="codeph">username</code></span> （ <span class="italic"><code class="codeph">userid</code></span> ）， <code class="codeph">Session</code> <span class="italic"><code class="codeph">sessionid</code></span> ， <code class="codeph">Instance</code> <span class="italic"><code class="codeph">instanceid</code></span> ”。
                              </p>
                              <p>语句的名称用于标识<code class="codeph">DBA_RESUMABLE</code>和<code class="codeph">USER_RESUMABLE</code>视图中的可恢复语句。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE" title="在会话中，用户可以发出ALTER SESSION SET语句来设置RESUMABLE_TIMEOUT初始化参数并启用可恢复空间分配，更改超时值或禁用可恢复模式。">使用ALTER SESSION启用和禁用可恢复空间分配</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div><a id="ADMIN11593"></a><div class="props_rev_3"><a id="GUID-51FC90D4-2AD0-4F4C-8FAC-65DD1A8F7F93" name="GUID-51FC90D4-2AD0-4F4C-8FAC-65DD1A8F7F93"></a><h4 id="ADMIN-GUID-51FC90D4-2AD0-4F4C-8FAC-65DD1A8F7F93" class="sect4"><span class="enumeration_section">19.2.3</span>使用LOGON触发器设置默认可恢复模式</h4>
                  <div>
                     <p>除了设置<code class="codeph">RESUMABLE_TIMEOUT</code>初始化参数之外，设置默认可恢复模式的另一种方法是，您可以注册数据库级别<code class="codeph">LOGON</code>触发器以更改用户的会话以启用可恢复并设置超时间隔。
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-51FC90D4-2AD0-4F4C-8FAC-65DD1A8F7F93__GUID-5CC52FC2-5E9D-400B-879D-6F2FB108E8D3">
                           <p class="notep1">注意：</p>
                           <p>如果注册了多个更改默认模式和可恢复语句超时的触发器，则结果将不会指定，因为Oracle数据库不保证触发器调用的顺序。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" title="您可以暂停并稍后恢复执行大型数据库操作。">管理可恢复空间分配</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11594"></a><div class="props_rev_3"><a id="GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8" name="GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8"></a><h4 id="ADMIN-GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8" class="sect4"><span class="enumeration_section">19.2.4</span>检测暂停的声明</h4>
                  <p>当可恢复语句被挂起时，错误不会提交给客户端。为了采取纠正措施，Oracle数据库提供了替代方法，用于通知用户错误并提供有关情况的信息。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-7551438C-E1BF-45DF-9693-382B50AE26E1">通知用户：AFTER SUSPEND系统事件和触发器</a><br>当可恢复语句遇到可纠正的错误时，系统会在内部生成<code class="codeph">AFTER SUSPEND</code>系统事件。用户可以在数据库和模式级别为此事件注册触发器。如果用户注册触发器来处理此系统事件，则在暂停SQL语句后执行触发器。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-D22E6BA4-88E2-4DE5-A937-3B0E15CDBBD8">使用视图获取有关暂停语句的信息</a><br>您可以查询一组视图，以获取有关可恢复语句状态的信息。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-E56ACC18-4955-44F8-B63E-72F21DE95EFD">使用DBMS_RESUMABLE包</a><br><code class="codeph">DBMS_RESUMABLE</code>包有助于控制可恢复的空间分配。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" title="您可以暂停并稍后恢复执行大型数据库操作。">管理可恢复空间分配</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11595"></a><div class="props_rev_3"><a id="GUID-7551438C-E1BF-45DF-9693-382B50AE26E1" name="GUID-7551438C-E1BF-45DF-9693-382B50AE26E1"></a><h5 id="ADMIN-GUID-7551438C-E1BF-45DF-9693-382B50AE26E1" class="sect5"><span class="enumeration_section">19.2.4.1</span>通知用户：AFTER SUSPEND系统事件和触发器</h5>
                     <div>
                        <p>当可恢复语句遇到可纠正的错误时，系统会在内部生成<code class="codeph">AFTER SUSPEND</code>系统事件。用户可以在数据库和模式级别为此事件注册触发器。如果用户注册触发器来处理此系统事件，则在暂停SQL语句后执行触发器。
                        </p>
                        <div class="section">
                           <p>在<code class="codeph">AFTER SUSPEND</code>触发器中执行的SQL语句始终是不可恢复的，并且始终是自治的。在触发器内启动的事务使用<code class="codeph">SYSTEM</code>回滚段。强制执行这些条件以克服死锁并降低触发器遇到与语句相同的错误条件的可能性。
                           </p>
                           <p>用户可以在触发器中使用<code class="codeph">USER_RESUMABLE</code>或<code class="codeph">DBA_RESUMABLE</code>视图或<code class="codeph">DBMS_RESUMABLE.SPACE_ERROR_INFO</code>函数来获取有关可恢复语句的信息。
                           </p>
                           <p>触发器还可以调用<code class="codeph">DBMS_RESUMABLE</code>包来终止挂起的语句并修改可恢复的超时值。在以下示例中，通过创建系统范围的<code class="codeph">AFTER SUSPEND</code>触发器来更改默认系统超时，该触发器调用<code class="codeph">DBMS_RESUMABLE</code>将超时设置为3小时：</p><pre class="oac_no_warn" dir="ltr">在DATABASE BEGIN DBMS_RESUMABLE.SET_TIMEOUT（10800）上暂停后创建或替换TRIGGER resumable_default_timeout;结束; /</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-7551438C-E1BF-45DF-9693-382B50AE26E1__GUID-00F8715B-8F7F-48BB-A188-A65D937428C2">
                           <p class="notep1">也可以看看：</p>
                           <p>有关触发器和系统事件的信息，请参阅<a href="../lnpls/plsql-triggers.html#LNPLS020" target="_blank"><span class="italic">Oracle Database PL / SQL语言参考</span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8" title="当可恢复语句被挂起时，错误不会提交给客户端。为了采取纠正措施，Oracle数据库提供了替代方法，用于通知用户错误并提供有关情况的信息。">检测暂停的语句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11596"></a><div class="props_rev_3"><a id="GUID-D22E6BA4-88E2-4DE5-A937-3B0E15CDBBD8" name="GUID-D22E6BA4-88E2-4DE5-A937-3B0E15CDBBD8"></a><h5 id="ADMIN-GUID-D22E6BA4-88E2-4DE5-A937-3B0E15CDBBD8" class="sect5"><span class="enumeration_section">19.2.4.2</span>使用视图获取有关暂停语句的信息</h5>
                     <div>
                        <p>您可以查询一组视图，以获取有关可恢复语句状态的信息。</p>
                        <div class="tblformal" id="GUID-D22E6BA4-88E2-4DE5-A937-3B0E15CDBBD8__GUID-627E4810-E9A7-4C83-9336-D703DCB424DC">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Column 1 contains the names of views that contain information about suspended statements. Column 2 describes each view." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d182472e2114">视图</th>
                                    <th align="left" valign="bottom" width="70%" id="d182472e2117">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d182472e2122" headers="d182472e2114 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_RESUMABLE.html#REFRN23228" target="_blank">DBA_RESUMABLE</a></code> 
                                       </p>
                                       <p><code class="codeph"><a href="../refrn/USER_RESUMABLE.html#REFRN26228" target="_blank">USER_RESUMABLE</a></code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d182472e2122 d182472e2117 ">
                                       <p>这些视图包含所有当前正在执行或暂停的可恢复语句的行。它们可以由DBA， <code class="codeph">AFTER SUSPEND</code>触发器或其他会话使用，以监视可恢复语句的进度或获取有关可恢复语句的特定信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d182472e2142" headers="d182472e2114 ">
                                       <p><code class="codeph"><a href="../refrn/V-SESSION_WAIT.html#REFRN30229" target="_blank">V $ SESSION_WAIT</a></code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d182472e2142 d182472e2117 ">
                                       <p>当语句被挂起时，调用该语句的会话将进入等待状态。对于包含“语句已暂停，等待错误以清除”的<code class="codeph">EVENT</code>列的会话，将在此视图中插入一行。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8" title="当可恢复语句被挂起时，错误不会提交给客户端。为了采取纠正措施，Oracle数据库提供了替代方法，用于通知用户错误并提供有关情况的信息。">检测暂停的语句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11597"></a><div class="props_rev_3"><a id="GUID-E56ACC18-4955-44F8-B63E-72F21DE95EFD" name="GUID-E56ACC18-4955-44F8-B63E-72F21DE95EFD"></a><h5 id="ADMIN-GUID-E56ACC18-4955-44F8-B63E-72F21DE95EFD" class="sect5"><span class="enumeration_section">19.2.4.3</span>使用DBMS_RESUMABLE包</h5>
                     <div>
                        <p><code class="codeph">DBMS_RESUMABLE</code>包有助于控制可恢复的空间分配。
                        </p>
                        <div class="section">
                           <p>您可以调用以下过程：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-E56ACC18-4955-44F8-B63E-72F21DE95EFD__GUID-8A31224F-A682-429C-BF94-067F08050C94">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Column 1 contains the names of procedures in the DBMS_RESUMABLE package. Column 2 describes the procedures." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="42%" id="d182472e2210">程序</th>
                                    <th align="left" valign="bottom" width="58%" id="d182472e2213">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d182472e2218" headers="d182472e2210 ">
                                       <p><code class="codeph">ABORT（会话ID）</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d182472e2218 d182472e2213 ">
                                       <p>此过程中止暂停的可恢复声明。参数<code class="codeph">sessionID</code>是语句正在执行的会话ID。对于并行DML / DDL， <code class="codeph">sessionID</code>是参与并行DML / DDL的任何会话ID。</p>
                                       <p>Oracle数据库保证<code class="codeph">ABORT</code>操作始终成功。它可以在<code class="codeph">AFTER SUSPEND</code>触发器的内部或外部调用。
                                       </p>
                                       <p><code class="codeph">ABORT</code>的调用者必须是具有<code class="codeph">sessionID</code>的会话的所有者，具有<code class="codeph">ALTER SYSTEM</code>权限或具有DBA权限。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d182472e2252" headers="d182472e2210 ">
                                       <p><code class="codeph">GET_SESSION_TIMEOUT（会话ID）</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d182472e2252 d182472e2213 ">
                                       <p>此函数返回具有<code class="codeph">sessionID</code>的会话的可恢复空间分配的当前超时值。返回的超时时间以秒为单位。如果会话不存在，则此函数返回-1。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d182472e2264" headers="d182472e2210 ">
                                       <p><code class="codeph">SET_SESSION_TIMEOUT（sessionID，timeout）</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d182472e2264 d182472e2213 ">
                                       <p>此过程为具有<code class="codeph">sessionID</code>的会话设置可恢复空间分配的超时间隔。参数<code class="codeph">timeout</code>以秒为单位。新的<code class="codeph">timeout</code>设置将立即应用于会话。如果会话不存在，则不执行任何操作。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d182472e2282" headers="d182472e2210 ">
                                       <p><code class="codeph">GET_TIMEOUT（）</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d182472e2282 d182472e2213 ">
                                       <p>此函数返回当前会话的可恢复空间分配的当前<code class="codeph">timeout</code>值。返回值以秒为单位。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d182472e2294" headers="d182472e2210 ">
                                       <p><code class="codeph">SET_TIMEOUT（超时）</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d182472e2294 d182472e2213 ">
                                       <p>此过程为当前会话设置可恢复空间分配的<code class="codeph">timeout</code>值。参数<code class="codeph">timeout</code>以秒为单位。新的超时设置立即应用于会话。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-E56ACC18-4955-44F8-B63E-72F21DE95EFD__GUID-001FD5B8-05E0-46ED-A397-C0A1112A37F2">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">DBMS_RESUMABLE</code>包的详细信息，请<a href="../arpls/DBMS_RESUMABLE.html#ARPLS143" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a> 。
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8" title="当可恢复语句被挂起时，错误不会提交给客户端。为了采取纠正措施，Oracle数据库提供了替代方法，用于通知用户错误并提供有关情况的信息。">检测暂停的语句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN11598"></a><div class="props_rev_3"><a id="GUID-1ED25C9D-4D0D-47DA-AEFE-14D6F8BFD742" name="GUID-1ED25C9D-4D0D-47DA-AEFE-14D6F8BFD742"></a><h4 id="ADMIN-GUID-1ED25C9D-4D0D-47DA-AEFE-14D6F8BFD742" class="sect4"><span class="enumeration_section">19.2.5</span>操作暂停警报</h4>
                  <div>
                     <p>当可恢复会话暂停时，将对需要分配资源的对象发出操作暂停警报以完成操作。</p>
                     <p>分配资源并完成操作后，将清除操作暂停的警报。有关系统生成的警报的详细信息，请参阅<span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070" title="默认情况下定义了两个警报阈值：警告和严重。警告阈值是空间开始低的限制。关键阈值是一个严重的限制，值得您立即关注。数据库在两个阈值处发出警报。">管理表空间警报</a> ”</span> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" title="您可以暂停并稍后恢复执行大型数据库操作。">管理可恢复空间分配</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11599"></a><div class="props_rev_3"><a id="GUID-7699310D-784F-4AB7-B3E0-05B2DBF59A60" name="GUID-7699310D-784F-4AB7-B3E0-05B2DBF59A60"></a><h4 id="ADMIN-GUID-7699310D-784F-4AB7-B3E0-05B2DBF59A60" class="sect4"><span class="enumeration_section">19.2.6</span>可恢复空间分配示例：注册AFTER SUSPEND触发器</h4>
                  <div>
                     <p>示例说明了如何创建系统范围的<code class="codeph">AFTER SUSPEND</code>触发器并在数据库级别将其注册为用户<code class="codeph">SYS</code> 。
                     </p>
                     <div class="section">
                        <p>每当在任何会话中暂停可恢复语句时，此触发器可以具有以下两种效果之一：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果还原段已达到其空间限制，则会向DBA发送一条消息，并中止该语句。</p>
                           </li>
                           <li>
                              <p>如果发生任何其他可恢复错误，则超时间隔将重置为8小时。</p>
                           </li>
                        </ul>
                        <p>以下是此示例的语句：</p><pre class="oac_no_warn" dir="ltr">创建或替换TRIGGER resumable_default在数据库后挂起DECLARE / *声明此触发器中的事务是自治的* / / *这不是必需的，因为触发器内的事务总是自治的* / PRAGMA AUTONOMOUS_TRANSACTION; cur_sid NUMBER; cur_inst NUMBER;错误号码; err_type VARCHAR2; object_owner VARCHAR2; object_type VARCHAR2; table_space_name VARCHAR2; object_name VARCHAR2; sub_object_name VARCHAR2; error_txt VARCHAR2; msg_body VARCHAR2; ret_value BOOLEAN; mail_conn UTL_SMTP.CONNECTION; BEGIN  - 从V $ MYSTAT获取会话ID SELECT DISTINCT（SID）INTO cur_SID; - 获取实例编号cur_inst：= userenv（'instance'）; - 获取空间错误信息ret_value：= DBMS_RESUMABLE.SPACE_ERROR_INFO（err_type，object_type，object_owner，table_space_name，object_name，sub_object_name）; / *  - 如果错误与还原段，日志错误，发送电子邮件 -  DBA相关，并中止该语句。否则，将超时设置为8小时。-   -  sys.rbs_error是一个表 - 由DBA手动创建并定义为 - （sql_text VARCHAR2（1000），error_msg VARCHAR2（4000）， -  suspend_time DATE）* / IF OBJECT_TYPE =' UNDO SEGMENT'THEN / * LOG ERROR * / INSERT INTO sys.rbs_error（SELECT SQL_TEXT，ERROR_MSG，SUSPEND_TIME FROM DBMS_RESUMABLE WHERE SESSION_ID = cur_sid AND INSTANCE_ID = cur_inst）; SELECT ERROR_MSG INTO error_txt FROM DBMS_RESUMABLE WHERE SESSION_ID = cur_sid和INSTANCE_ID = cur_inst; - 通过UTL_SMTP包发送电子邮件给收件人msg_body：='主题：发生空间错误撤消段'||达到空间限制object_name ||在'|| TO_CHAR（SYSDATE，'月dd，YYYY，HH：MIam'）|| ”。错误消息是'|| error_txt的; mail_conn：= UTL_SMTP.OPEN_CONNECTION（'localhost'，25）; UTL_SMTP.HELO（mail_conn，'localhost'）; UTL_SMTP.MAIL（mail_conn，'sender @ localhost'）; UTL_SMTP.RCPT（mail_conn，'recipient @ localhost'）; UTL_SMTP.DATA（mail_conn，msg_body）; UTL_SMTP.QUIT（mail_conn）; - 中止语句DBMS_RESUMABLE.ABORT（cur_sid）; ELSE  - 将超时设置为8小时DBMS_RESUMABLE.SET_TIMEOUT（28800）;万一; / * commit autonomous transaction * / COMMIT;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" title="您可以暂停并稍后恢复执行大型数据库操作。">管理可恢复空间分配</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN01401"></a><div class="props_rev_3"><a id="GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" name="GUID-1F297567-4BEC-438E-9E13-683D2BB47F44"></a><h3 id="ADMIN-GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" class="sect3"><span class="enumeration_section">19.3</span>回收未使用的空间</h3>
               <p>您可以回收未使用的空间。Segment Advisor是一个Oracle数据库组件，用于标识具有可用于回收的空间的段。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-70076484-92BD-49B0-A2C5-4D6564DFFFB6">关于可回收的未使用空间</a><br>随着时间的推移，对表空间中的对象进行更新和删除可能会创建一些空白空间，这些空白空间不足以重新用于新数据。这种类型的空白空间称为碎片自由空间。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4">细分顾问</a><br>Segment Advisor识别具有可用于回收的空间的段。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB">在线缩小数据库段</a><br>您使用在线段缩小来回收Oracle数据库段中高水位线下方的碎片化可用空间。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-7ED839DE-64AA-4F7B-8279-E2A6CA9AE7DA">解除分配未使用的空间</a><br>当您释放未使用的空间时，数据库将释放数据库段未使用（高水位线）末端的未使用空间，并使该空间可用于表空间中的其他段。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="管理模式对象的空间涉及诸如管理表空间警报和空间分配，回收未使用的空间，删除未使用的对象存储，监视空间使用和容量规划等任务。">管理模式对象的空间</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11600"></a><div class="props_rev_3"><a id="GUID-70076484-92BD-49B0-A2C5-4D6564DFFFB6" name="GUID-70076484-92BD-49B0-A2C5-4D6564DFFFB6"></a><h4 id="ADMIN-GUID-70076484-92BD-49B0-A2C5-4D6564DFFFB6" class="sect4"><span class="enumeration_section">19.3.1</span>关于可回收未使用空间</h4>
                  <div>
                     <p>随着时间的推移，对表空间中的对象进行更新和删除可能会创建一些空白空间，这些空白空间不足以重新用于新数据。这种类型的空白空间称为碎片自由空间。</p>
                     <p>具有碎片可用空间的对象可能导致大量浪费的空间，并且可能影响数据库性能。对此空间进行碎片整理和回收的首选方法是执行<span class="bold">在线段缩小</span> 。此过程将碎片化的自由空间整合到高水位线以下并压缩该段。压实后，移动高水位线，在高水位线上方产生新的自由空间。然后取消分配高水位线以上的空间。在大多数操作期间，该段仍可用于查询和DML，并且不需要分配额外的磁盘空间。
                     </p>
                     <p>您可以使用<span class="bold">细分顾问</span>来识别可从在线细分收缩中受益的细分受众群。只有具有自动段空间管理（ASSM）的本地管理表空间中的段才符合条件。存在对段类型的其他限制。有关详细信息，请参阅<span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB" title="您使用在线段缩小来回收Oracle数据库段中高水位线下方的碎片化可用空间。">在线缩小数据库段</a> ”</span> 。
                     </p>
                     <p>如果具有可回收空间的表不符合在线段缩减的条件，或者如果要在回收空间时更改表的逻辑或物理属性，则可以使用<span class="bold">联机表重新定义</span>作为段缩小的替代方法。在线重新定义也称为<span class="bold">重组</span> 。与在线段缩小不同，它需要额外的磁盘空间来分配。有关详细信息，请参阅<span class="q">“ <a href="managing-tables.html#GUID-F95114BC-F512-4A1F-B5BD-07DDDE60D934" title="在任何数据库系统中，有时需要修改表的逻辑或物理结构，以提高查询或DML的性能，适应应用程序更改或管理存储。您可以使用DBMS_REDEFINITION包在线重新定义表。">在线重新定义表</a> ”</span> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" title="您可以回收未使用的空间。Segment Advisor是一个Oracle数据库组件，用于标识具有可用于回收的空间的段。">回收未使用的空间</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" name="GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4"></a><h4 id="ADMIN-GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" class="sect4"><span class="enumeration_section">19.3.2</span>细分顾问</h4>
                  <p>Segment Advisor识别具有可用于回收的空间的段。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-79EF8EB6-AB05-4EB0-9C72-98240BB607A8">关于细分顾问</a><br>Segment Advisor通过检查自动工作负载存储库（AWR）中的使用情况和增长统计信息以及对该段中的数据进行采样来执行其分析。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-E9B57A45-2688-42B6-9782-D49702D51F24">使用Segment Advisor</a><br>要使用Segment Advisor，请检查Automatic Segment Advisor的结果，并可选择手动运行Segment Advisor。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B">自动细分顾问</a><br>Automatic Segment Advisor是一个自动维护任务，配置为在所有维护窗口期间运行。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617">手动运行Segment Advisor</a><br>您可以随时使用Cloud Control或PL / SQL程序包过程调用手动运行Segment Advisor。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB">查看细分顾问结果</a><br>Segment Advisor创建了几种类型的结果：建议，发现，操作和对象。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C">配置自动段顾问</a><br>Automatic Segment Advisor是一项自动维护任务。因此，您可以使用Cloud Control或PL / SQL程序包过程调用来修改此任务何时（以及如果）运行。您还可以通过修改适当的资源计划来控制分配给它的资源。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-04ED091D-495D-4F6F-A77D-F91BE5603581">查看自动段顾问信息</a><br>您可以查询视图以显示特定于Automatic Segment Advisor的信息。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" title="您可以回收未使用的空间。Segment Advisor是一个Oracle数据库组件，用于标识具有可用于回收的空间的段。">回收未使用的空间</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-79EF8EB6-AB05-4EB0-9C72-98240BB607A8" name="GUID-79EF8EB6-AB05-4EB0-9C72-98240BB607A8"></a><h5 id="ADMIN-GUID-79EF8EB6-AB05-4EB0-9C72-98240BB607A8" class="sect5"><span class="enumeration_section">19.3.2.1</span>关于Segment Advisor</h5>
                     <div>
                        <p>Segment Advisor通过检查自动工作负载存储库（AWR）中的使用情况和增长统计信息以及对该段中的数据进行采样来执行其分析。</p>
                        <div class="section">
                           <p>它被配置为在维护窗口期间作为自动维护任务运行，您也可以按需运行（手动）。Segment Advisor自动维护任务称为自动段顾问。您可以使用此信息进行容量规划，并获得有关要缩小哪些段的明智决策。</p>
                           <p>Segment Advisor会生成以下类型的建议：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果Segment Advisor确定对象具有大量可用空间，则建议在线段缩小。如果对象是不适合收缩的表，如没有自动段空间管理的表空间中的表，则Segment Advisor建议在线表重新定义。</p>
                              </li>
                              <li>
                                 <p>如果Segment Advisor确定表可以通过高级行压缩方法受益于压缩，则会建议这样做。（仅限自动细分顾问。请参阅<span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B" title="Automatic Segment Advisor是一个自动维护任务，配置为在所有维护窗口期间运行。">自动细分顾问</a> ”</span> 。）
                                 </p>
                              </li>
                              <li>
                                 <p>如果Segment Advisor遇到行链接超过某个阈值的表，则会记录该表具有多余链接行的事实。</p>
                                 <div class="infoboxnote" id="GUID-79EF8EB6-AB05-4EB0-9C72-98240BB607A8__GUID-1E170BAB-A841-4BB0-8030-178DD88C985F">
                                    <p class="notep1">注意：</p>
                                    <p>Segment Advisor仅标记由增加行长度的更新产生的行链接类型。</p>
                                 </div>
                              </li>
                           </ul>
                           <p>如果您收到空间管理警报，或者您决定要回收空间，则应从Segment Advisor开始。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="Segment Advisor识别具有可用于回收的空间的段。">细分顾问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11601"></a><div class="props_rev_3"><a id="GUID-E9B57A45-2688-42B6-9782-D49702D51F24" name="GUID-E9B57A45-2688-42B6-9782-D49702D51F24"></a><h5 id="ADMIN-GUID-E9B57A45-2688-42B6-9782-D49702D51F24" class="sect5"><span class="enumeration_section">19.3.2.2</span>使用Segment Advisor</h5>
                     <div>
                        <p>要使用Segment Advisor，请检查Automatic Segment Advisor的结果，并可选择手动运行Segment Advisor。</p>
                        <div class="section">
                           <p>要使用细分顾问：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>检查自动分段顾问的结果。</span><div>
                                 <p>要了解自动细分顾问，请参阅本节后面的<span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B" title="Automatic Segment Advisor是一个自动维护任务，配置为在所有维护窗口期间运行。">自动细分顾问</a> ”</span> 。有关如何查看结果的详细信息，请参阅<span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB" title="Segment Advisor创建了几种类型的结果：建议，发现，操作和对象。">查看细分顾问结果</a> ”</span> 。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>（可选）通过手动重新运行Segment Advisor获取各个细分的更新结果。</span><div>
                                 <p>请参阅本节后面的<span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617" title="您可以随时使用Cloud Control或PL / SQL程序包过程调用手动运行Segment Advisor。">手动运行Segment Advisor</a> ”</span> 。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="Segment Advisor识别具有可用于回收的空间的段。">细分顾问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11602"></a><div class="props_rev_3"><a id="GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B" name="GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B"></a><h5 id="ADMIN-GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B" class="sect5"><span class="enumeration_section">19.3.2.3</span>自动段顾问</h5>
                     <div>
                        <p>Automatic Segment Advisor是一个自动维护任务，配置为在所有维护窗口期间运行。</p>
                        <p>Automatic Segment Advisor不会分析每个数据库对象。相反，它检查数据库统计信息，对段数据进行采样，然后选择要分析的以下对象：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>已超过临界或警告空间阈值的表空间</p>
                           </li>
                           <li>
                              <p>活动最多的细分</p>
                           </li>
                           <li>
                              <p>增长率最高的细分市场</p>
                           </li>
                        </ul>
                        <p>此外，自动段Advisor会评估至少10MB且至少有三个索引的表，以确定在使用高级行压缩方法压缩表时节省的空间量。</p>
                        <p>如果选择对象进行分析但维护窗口在Segment Advisor处理对象之前到期，则该对象将包含在下一个Automatic Segment Advisor运行中。</p>
                        <p>您无法更改Automatic Segment Advisor选择用于分析的表空间和段的集合。但是，您可以启用或禁用“自动分段顾问”任务，更改自动分段顾问计划运行的时间，或调整自动维护任务系统资源利用率。有关详细信息，请参阅<span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C" title="Automatic Segment Advisor是一项自动维护任务。因此，您可以使用Cloud Control或PL / SQL程序包过程调用来修改此任务何时（以及如果）运行。您还可以通过修改适当的资源计划来控制分配给它的资源。">配置自动段顾问</a> ”</span> 。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B__GUID-56DE5263-9EA7-4C5F-9151-DDE2E0A9C9CB">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB" title="Segment Advisor创建了几种类型的结果：建议，发现，操作和对象。">查看细分顾问结果</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="managing-automated-database-maintenance-tasks.html#GUID-7F7C805E-BA64-43A5-9A09-FC259FFA9AA8" title="Oracle数据库已自动执行通常由数据库管理员执行的几项常见维护任当预期系统负载较轻时，执行这些自动维护任务。您可以启用和禁用单个维护任务，并可以配置这些任务的运行时间以及分配的资源分配。">管理自动数据库维护任务</a></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="managing-tables.html#GUID-ED833867-4B7F-442E-A70C-9C19DAA8F445" title="压缩可节省磁盘空间，减少数据库缓冲区高速缓存中的内存使用，并可显着提高读取期间的查询执行速度。">考虑使用表压缩</a> ”</span>以获取有关高级行压缩的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="Segment Advisor识别具有可用于回收的空间的段。">细分顾问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11603"></a><div class="props_rev_3"><a id="GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617" name="GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617"></a><h5 id="ADMIN-GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617" class="sect5"><span class="enumeration_section">19.3.2.4</span>手动运行Segment Advisor</h5>
                     <div>
                        <p>您可以随时使用Cloud Control或PL / SQL程序包过程调用手动运行Segment Advisor。</p>
                        <p>手动运行Segment Advisor的原因包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您想要分析自动段顾问未选择的表空间或段。</p>
                           </li>
                           <li>
                              <p>您希望重复分析单个表空间或段以获取更多最新建议。</p>
                           </li>
                        </ul>
                        <p>您可以在以下三个级别向分部顾问索取建议：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">段级别 -</span>为单个段生成建议，例如未分区的表，分区表的分区或子分区，索引或LOB列。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">对象级别 -</span>为整个对象（例如表或索引）生成建议。如果对象已分区，则会在对象的所有分区上生成通知。此外，如果从Cloud Control手动运行Segment Advisor，则可以请求有关对象的依赖对象的建议，例如表的索引和LOB段。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">表空间级别</span> - 为<span class="bold">表空间</span>中的每个段生成建议。
                              </p>
                           </li>
                        </ul>
                        <p><a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABHCCCE" title="第1列包含OBJECT_TYPE参数的值。以下4列列出了相应的ATTR1，ATTR2，ATTR3和ATTR4值。">表19-2</a>中的<code class="codeph">OBJECT_TYPE</code>列显示了可以请求建议的对象类型。
                        </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC">使用Cloud Control手动运行Segment Advisor</a><br>您可以使用Cloud Control手动运行Segment Advisor</li>
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA">使用PL / SQL手动运行Segment Advisor</a><br>您可以使用<code class="codeph">DBMS_ADVISOR</code>包运行Segment Advisor。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="Segment Advisor识别具有可用于回收的空间的段。">细分顾问</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN13049"></a><a id="ADMIN13050"></a><a id="ADMIN11604"></a><div class="props_rev_2"><a id="GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC" name="GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC"></a><h6 id="ADMIN-GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC" class="sect6"><span class="enumeration_section">19.3.2.4.1</span>使用Cloud Control手动运行Segment Advisor</h6>
                        <div>
                           <p>您可以使用Cloud Control手动运行Segment Advisor</p>
                           <div class="section">
                              <p>您必须具有<code class="codeph">OEM_ADVISOR</code>角色才能使用Cloud Control手动运行Segment Advisor。有两种方法可以运行Segment Advisor：</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用细分顾问向导</p>
                                    <p>此方法使您可以在表空间级别或对象级别请求建议。在对象级别，您可以请求有关表，索引，表分区和索引分区的建议。</p>
                                 </li>
                                 <li>
                                    <p>在架构对象页面上使用“运行段Advisor”命令。</p>
                                    <p>例如，如果在“表”页面上显示一个表列表（可从“架构”菜单访问），则可以选择一个表，然后从“操作”菜单中选择<span class="bold">“运行段顾问</span> ”。
                                    </p>
                                    <div class="figure" id="GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC__CBBGDAJJ">
                                       <p class="titleinfigure">图19-1表页面</p><img src="img/run_segment_advisor_command.gif" height="272" width="552" alt="下面是图19-1的描述" title="下面是图19-1的描述" longdesc="img_text/run_segment_advisor_command.html"><br><a href="img_text/run_segment_advisor_command.html">“图19-1表页面”的描述</a></div>
                                    <!-- class="figure" -->
                                    <p>此方法使您可以在Segment Advisor运行中包含架构对象的从属对象。例如，如果选择一个表并选择<span class="bold">“运行段Advisor”</span> ，则Cloud Control将显示表的从属对象，例如分区，索引段，LOB段等。然后，您可以选择要包含在运行中的依赖对象。
                                    </p>
                                 </li>
                              </ul>
                              <p>在这两种情况下，Cloud Control都会将Segment Advisor任务创建为Oracle Database Scheduler作业。您可以安排作业立即运行，也可以利用调度程序提供的高级调度功能。</p>
                              <p><span class="bold">要使用Segment Advisor向导手动运行Segment Advisor：</span></p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ol>
                                 <li>
                                    <p>访问数据库主页。</p>
                                 </li>
                                 <li>
                                    <p>从“性能”菜单中，选择“ <span class="bold">顾问主页”</span> 。
                                    </p>
                                    <p>将显示Advisor Central页面。（ <a href="managing-space-for-schema-objects.html#GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC__CBBEFIGG">见图19-2</a> 。）
                                    </p>
                                 </li>
                                 <li>
                                    <p>在Advisors下，单击<span class="bold">Segment Advisor</span> 。
                                    </p>
                                    <p>将显示“细分顾问”向导的第一页。</p>
                                 </li>
                                 <li>
                                    <p>按照向导步骤安排Segment Advisor作业，然后在最终向导页面上单击“ <span class="bold">提交</span> ”。
                                    </p>
                                    <p>Advisor Central页面重新出现，新的Segment Advisor作业位于Results标题下的列表顶部。作业状态为<code class="codeph">SCHEDULED</code>或<code class="codeph">RUNNING</code> 。 （如果看不到自己的工作，请使用列表上方的搜索字段进行显示。）
                                    </p>
                                 </li>
                                 <li>
                                    <p>检查作业的状态。如果它不是<code class="codeph">COMPLETED</code> ，则使用页面顶部的<span class="bold">Refresh</span>控件刷新页面。（不要使用浏览器的“刷新”图标。）
                                    </p>
                                    <p>当作业状态更改为<code class="codeph">COMPLETED</code> ，通过单击“ <span class="bold">选择”</span>列选择作业，然后单击“ <span class="bold">查看结果”</span> 。
                                    </p>
                                    <div class="figure" id="GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC__CBBEFIGG">
                                       <p class="titleinfigure">图19-2 Advisor Central页面</p><img src="img/advisor_central.gif" width="574" alt="下面是图19-2的描述" title="下面是图19-2的描述" longdesc="img_text/advisor_central.html"><br><a href="img_text/advisor_central.html">“图19-2顾问中心页面”的描述</a></div>
                                    <!-- class="figure" -->
                                 </li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                           <div class="section"></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC__GUID-C44862B6-4616-40DB-9F81-168B15179BEF">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" title="您可以使用Oracle Scheduler创建，运行和管理作业。">使用Oracle Scheduler调度作业，</a>以获取有关调度程序的高级调度功能的更多信息。
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617" title="您可以随时使用Cloud Control或PL / SQL程序包过程调用手动运行Segment Advisor。">手动运行Segment Advisor</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13051"></a><a id="ADMIN13052"></a><a id="ADMIN13053"></a><a id="ADMIN12624"></a><a id="ADMIN11605"></a><div class="props_rev_3"><a id="GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA" name="GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA"></a><h6 id="ADMIN-GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA" class="sect6"><span class="enumeration_section">19.3.2.4.2</span>使用PL / SQL手动运行Segment Advisor</h6>
                        <div>
                           <p>您可以使用<code class="codeph">DBMS_ADVISOR</code>包运行Segment Advisor。
                           </p>
                           <div class="section">
                              <p>您可以使用包过程创建Segment Advisor任务，设置任务参数，然后执行任务。您必须具有<code class="codeph">ADVISOR</code>权限。<a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__CBBBIDCB" title="该表包含四行，一行用于DBMS_ADVISOR包中与Segment Advisor相关的每个过程。每行包含过程名称和描述。">表19-1</a>显示了与Segment Advisor相关的过程。有关这些过程的更多详细信息，请参见<a href="../arpls/DBMS_ADVISOR.html#ARPLS350" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="tblformalwide" id="GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__CBBBIDCB">
                              <p class="titleintable">表19-1与Segment Advisor相关的DBMS_ADVISOR包过程</p>
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="与Segment Advisor相关的DBMS_ADVISOR包程序" width="100%" border="1" summary="This table contains four rows, one for each procedure in the DBMS_ADVISOR package that is relevant for the Segment Advisor. Each row contains the procedure name and description." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="29%" id="d182472e3236">包装程序名称</th>
                                       <th align="left" valign="bottom" width="71%" id="d182472e3239">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d182472e3244" headers="d182472e3236 ">
                                          <p><code class="codeph">CREATE_TASK</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d182472e3244 d182472e3239 ">
                                          <p>使用此过程可创建Segment Advisor任务。指定“细分顾问”作为<code class="codeph">ADVISOR_NAME</code>参数的值。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d182472e3255" headers="d182472e3236 ">
                                          <p><code class="codeph">CREATE_OBJECT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d182472e3255 d182472e3239 ">
                                          <p>使用此过程可识别段空间建议的目标对象。此过程的参数值取决于对象类型。<a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABHCCCE" title="第1列包含OBJECT_TYPE参数的值。以下4列列出了相应的ATTR1，ATTR2，ATTR3和ATTR4值。">表19-2</a>列出了每种对象的参数值。
                                          </p>
                                          <p>注意：要请求有关IOT溢出段的建议，请使用<code class="codeph">TABLE</code> ， <code class="codeph">TABLE</code> <code class="codeph">PARTITION</code>或<code class="codeph">TABLE</code> <code class="codeph">SUBPARTITION</code>的对象类型。使用以下查询查找IOT的溢出段，并确定要与<code class="codeph">CREATE_OBJECT</code>一起使用的溢出段表名：</p><pre class="oac_no_warn" dir="ltr">从dba_tables中选择table_name，iot_name，iot_type;</pre></td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d182472e3291" headers="d182472e3236 ">
                                          <p><code class="codeph">SET_TASK_PARAMETER</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d182472e3291 d182472e3239 ">
                                          <p>使用此过程描述您需要的细分建议。<a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABBHDBI" title="第1列列出了DBMS_ADVISOR.SET_TASK_PARMETER过程的输入参数。第2列描述了te过程，第3列描述了可能的值，第4列列出了默认值。">表19-3</a>显示了此过程的相关输入参数。Segment Advisor不使用此处未列出的参数。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d182472e3304" headers="d182472e3236 ">
                                          <p><code class="codeph">EXECUTE_TASK</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d182472e3304 d182472e3239 ">
                                          <p>使用此过程执行Segment Advisor任务。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="tblformal" id="GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABHCCCE">
                              <p class="titleintable">表19-2 DBMS_ADVISOR.CREATE_OBJECT的输入参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_ADVISOR.CREATE_OBJECT的输入参数" width="100%" border="1" summary="Column 1 contains the values for the OBJECT_TYPE parameter. The following 4 columns list the corresponding  ATTR1, ATTR2, ATTR3, and  ATTR4 values." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d182472e3324">OBJECT_TYPE</th>
                                       <th align="left" valign="bottom" width="20%" id="d182472e3327">ATTR1</th>
                                       <th align="left" valign="bottom" width="20%" id="d182472e3330">ATTR2</th>
                                       <th align="left" valign="bottom" width="20%" id="d182472e3333">ATTR3</th>
                                       <th align="left" valign="bottom" width="20%" id="d182472e3336">ATTR4</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3341" headers="d182472e3324 ">
                                          <p><code class="codeph">TABLESPACE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3341 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">表空间名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3341 d182472e3330 ">
                                          <p><code class="codeph">空值</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3341 d182472e3333 ">
                                          <p><code class="codeph">空值</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3341 d182472e3336 ">
                                          <p>没用过。指定<code class="codeph">NULL</code> 。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3365" headers="d182472e3324 ">
                                          <p><code class="codeph">表</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3365 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">架构名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3365 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">表名</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3365 d182472e3333 ">
                                          <p><code class="codeph">空值</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3365 d182472e3336 ">
                                          <p>没用过。指定<code class="codeph">NULL</code> 。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3390" headers="d182472e3324 ">
                                          <p><code class="codeph">指数</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3390 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">架构名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3390 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">索引名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3390 d182472e3333 ">
                                          <p><code class="codeph">空值</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3390 d182472e3336 ">
                                          <p>没用过。指定<code class="codeph">NULL</code> 。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3415" headers="d182472e3324 ">
                                          <p><code class="codeph">表格分区</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3415 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">架构名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3415 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">表名</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3415 d182472e3333 ">
                                          <p><span class="italic"><code class="codeph">表分区名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3415 d182472e3336 ">
                                          <p>没用过。指定<code class="codeph">NULL</code> 。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3441" headers="d182472e3324 ">
                                          <p><code class="codeph">索引分区</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3441 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">架构名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3441 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">索引名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3441 d182472e3333 ">
                                          <p><span class="italic"><code class="codeph">索引分区名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3441 d182472e3336 ">
                                          <p>没用过。指定<code class="codeph">NULL</code> 。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3467" headers="d182472e3324 ">
                                          <p><code class="codeph">表格下载</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3467 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">架构名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3467 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">表名</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3467 d182472e3333 ">
                                          <p><span class="italic"><code class="codeph">表子分区名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3467 d182472e3336 ">
                                          <p>没用过。指定<code class="codeph">NULL</code> 。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3493" headers="d182472e3324 ">
                                          <p><code class="codeph">INDEX SUBPARTITION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3493 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">架构名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3493 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">索引名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3493 d182472e3333 ">
                                          <p><span class="italic"><code class="codeph">索引子分区名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3493 d182472e3336 ">
                                          <p>没用过。指定<code class="codeph">NULL</code> 。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3519" headers="d182472e3324 ">
                                          <p><code class="codeph">高球</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3519 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">架构名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3519 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">段名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3519 d182472e3333 ">
                                          <p><code class="codeph">空值</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3519 d182472e3336 ">
                                          <p>没用过。指定<code class="codeph">NULL</code> 。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3544" headers="d182472e3324 ">
                                          <p><code class="codeph">LOB PARTITION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3544 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">架构名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3544 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">段名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3544 d182472e3333 ">
                                          <p><span class="italic"><code class="codeph">lob分区名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3544 d182472e3336 ">
                                          <p>没用过。指定<code class="codeph">NULL</code> 。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3570" headers="d182472e3324 ">
                                          <p><code class="codeph">LOB SUBPARTITION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3570 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">架构名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3570 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">段名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3570 d182472e3333 ">
                                          <p><span class="italic"><code class="codeph">lob子分区名称</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3570 d182472e3336 ">
                                          <p>没用过。指定<code class="codeph">NULL</code> 。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="tblformalwide" id="GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABBHDBI">
                              <p class="titleintable">表19-3 DBMS_ADVISOR.SET_TASK_PARAMETER的输入</p>
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="输入DBMS_ADVISOR.SET_TASK_PARAMETER" width="100%" border="1" summary="Column 1 lists the input parameters for the DBMS_ADVISOR.SET_TASK_PARMETER procedure.  Column 2 describes te procedure, column 3 specifies possible values, and column 4 lists the default value." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="25%" id="d182472e3607">输入参数</th>
                                       <th align="left" valign="bottom" width="25%" id="d182472e3610">描述</th>
                                       <th align="left" valign="bottom" width="25%" id="d182472e3613">可能的值</th>
                                       <th align="left" valign="bottom" width="25%" id="d182472e3616">默认值</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="25%" id="d182472e3621" headers="d182472e3607 ">
                                          <p><code class="codeph">时限</code></p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d182472e3621 d182472e3610 ">
                                          <p>Segment Advisor运行的时间限制，以秒为单位指定。</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d182472e3621 d182472e3613 ">
                                          <p>任何秒数</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d182472e3621 d182472e3616 ">
                                          <p><code class="codeph">无限</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="25%" id="d182472e3636" headers="d182472e3607 ">
                                          <p><code class="codeph">recommend_all</code></p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d182472e3636 d182472e3610 ">
                                          <p>Segment Advisor是否应为所有细分生成结果。</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d182472e3636 d182472e3613 ">
                                          <p><code class="codeph">TRUE</code> ：无论是否建议进行空间回收，都会在指定的所有段上生成结果。
                                          </p>
                                          <p><code class="codeph">FALSE</code> ：仅为那些为空间回收生成建议的对象生成结果。
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d182472e3636 d182472e3616 ">
                                          <p><code class="codeph">真正</code></p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__GUID-91941B76-CEF3-4930-884B-10D01558B16C">例</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p>下面的示例显示如何使用<code class="codeph">DBMS_ADVISOR</code>过程为示例表<code class="codeph">hr.employees</code>运行Segment Advisor。执行这些程序包过程的用户必须具有程序包的<code class="codeph">EXECUTE</code>对象权限或<code class="codeph">ADVISOR</code>系统权限。
                              </p>
                              <p>请注意，将<code class="codeph">TABLE</code>的对象类型传递给<code class="codeph">DBMS_ADVISOR.CREATE_OBJECT</code>等于对象级别请求。如果表未分区，则分析表段（没有任何依赖段，如索引或LOB段）。如果表是分区的，则Segment Advisor会分析所有表分区，并为每个分区生成单独的结果和建议。
                              </p><pre class="oac_no_warn" dir="ltr">变量id号; begin declare name varchar2（100）; descr varchar2（500）; obj_id号码;开始名称：='Manual_Employees'; descr：='Segment Advisor Example'; dbms_advisor.create_task（advisor_name =&gt;'Segment Advisor'，task_id =&gt;：id，task_name =&gt; name，task_desc =&gt; descr）; dbms_advisor.create_object（task_name =&gt; name，object_type =&gt;'TABLE'，attr1 =&gt;'HR'，attr2 =&gt;'EMPLOYEES'，attr3 =&gt; NULL，attr4 =&gt; NULL，attr5 =&gt; NULL，object_id =&gt; obj_id） ; dbms_advisor.set_task_parameter（task_name =&gt; name，parameter =&gt;'recommended_all'，value =&gt;'TRUE'）; dbms_advisor.execute_task（名称）;结束;结束; /</pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617" title="您可以随时使用Cloud Control或PL / SQL程序包过程调用手动运行Segment Advisor。">手动运行Segment Advisor</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADMIN13054"></a><a id="ADMIN11606"></a><div class="props_rev_3"><a id="GUID-0381940C-F913-4605-90D7-D04788372DAB" name="GUID-0381940C-F913-4605-90D7-D04788372DAB"></a><h5 id="ADMIN-GUID-0381940C-F913-4605-90D7-D04788372DAB" class="sect5"><span class="enumeration_section">19.3.2.5</span>查看分段顾问结果</h5>
                     <div>
                        <p>Segment Advisor创建了几种类型的结果：建议，发现，操作和对象。</p>
                        <p>您可以通过以下方式查看结果：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>借助云控制</p>
                           </li>
                           <li>
                              <p>通过查询<code class="codeph">DBA_ADVISOR_*</code>视图</p>
                           </li>
                           <li>
                              <p>通过调用<code class="codeph">DBMS_SPACE.ASA_RECOMMENDATIONS</code>函数</p>
                           </li>
                        </ul>
                        <p><a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB__CBBJFCDI" title="此表显示了Segment Advisor结果的类型以及与每个结果相关联的视图。它有四行（四种类型的结果和两列（结果类型和视图）。">表19-4说明</a>了各种结果类型及其关联的<code class="codeph">DBA_ADVISOR_*</code>视图。
                        </p>
                        <div class="tblformalwide" id="GUID-0381940C-F913-4605-90D7-D04788372DAB__CBBJFCDI">
                           <p class="titleintable">表19-4细分顾问结果类型</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="细分顾问结果类型" width="100%" border="1" summary="This table shows the types of Segment Advisor results and the view associated with each. It has four rows (for four types of results, and two columns (Result type and view)." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d182472e3763">结果类型</th>
                                    <th align="left" valign="bottom" width="27%" id="d182472e3766">相关观点</th>
                                    <th align="left" valign="bottom" width="52%" id="d182472e3769">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d182472e3774" headers="d182472e3763 ">
                                       <p>建议</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d182472e3774 d182472e3766 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_ADVISOR_RECOMMENDATIONS.html#REFRN23323" target="_blank">DBA_ADVISOR_RECOMMENDATIONS</a></code></p>
                                    </td>
                                    <td align="left" valign="top" width="52%" headers="d182472e3774 d182472e3769 ">
                                       <p>如果某个细分受众群受益于细分收缩，重组或压缩，则细分顾问会为细分受众群生成推荐。<a href="managing-space-for-schema-objects.html#GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA__BABGGBHI" title="此表总结了细分顾问的可能结果。它显示了某些Segment Advisor视图中列的相关值。">表19-5</a>显示了生成的结果和建议的示例。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d182472e3792" headers="d182472e3763 ">
                                       <p>发现</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d182472e3792 d182472e3766 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_ADVISOR_FINDINGS.html#REFRN23317" target="_blank">DBA_ADVISOR_FINDINGS</a></code></p>
                                    </td>
                                    <td align="left" valign="top" width="52%" headers="d182472e3792 d182472e3769 ">
                                       <p>调查结果是Segment Advisor在分析细分中观察到的内容的报告。调查结果包括每个经过分析的部分使用的空间和可用空间统计数据。并非所有发现都会产生推荐。（可能只有少数建议，但可能有很多发现。）当使用PL / SQL手动运行段指导，如果您指定<code class="codeph">'TRUE'</code>为<code class="codeph">recommend_all</code>中<code class="codeph">SET_TASK_PARAMETER</code>程序，然后段指导生成有资格进行分析，建议是否被该段由每一段的发现。对于行链建议，自动段顾问仅生成结果，而不是建议。如果自动分段顾问没有要进行的空间回收建议，则不会生成结果。但是，Automatic Segment Advisor可以为可以从高级行压缩中受益的表生成结果。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d182472e3814" headers="d182472e3763 ">
                                       <p>操作</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d182472e3814 d182472e3766 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_ADVISOR_ACTIONS.html#REFRN23312" target="_blank">DBA_ADVISOR_ACTIONS</a></code></p>
                                    </td>
                                    <td align="left" valign="top" width="52%" headers="d182472e3814 d182472e3769 ">
                                       <p>每个建议都与要执行的建议操作相关联：段缩小，在线重新定义（重组）或压缩。<code class="codeph">DBA_ADVISOR_ACTIONS</code>视图提供可用于执行段收缩或表压缩的SQL，或提供重组对象的建议。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d182472e3830" headers="d182472e3763 ">
                                       <p>对象</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d182472e3830 d182472e3766 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_ADVISOR_OBJECTS.html#REFRN23320" target="_blank">DBA_ADVISOR_OBJECTS</a></code></p>
                                    </td>
                                    <td align="left" valign="top" width="52%" headers="d182472e3830 d182472e3769 ">
                                       <p>所有发现，建议和操作都与对象相关联。如果Segment Advisor分析多个段（如表空间或分区表），则会在<code class="codeph">DBA_ADVISOR_OBJECTS</code>视图中为每个已分析的段创建一个条目。<a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABHCCCE" title="第1列包含OBJECT_TYPE参数的值。以下4列列出了相应的ATTR1，ATTR2，ATTR3和ATTR4值。">表19-2</a>定义了此视图中的列，以查询有关已分析段的信息。您可以将此视图中的对象与结果，建议和操作视图中的对象相关联。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-C664946C-730E-4389-8C16-418820453872">使用云控制查看细分顾问结果</a><br>使用Cloud Control，您可以查看自动段Advisor运行和手动Segment Advisor运行的Segment Advisor结果。
                           </li>
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA">通过查询DBA_ADVISOR_ *视图查看Segment Advisor结果</a><br>您可以通过查询<code class="codeph">DBA_ADVISOR_*</code>视图来查看Segment Advisor结果。
                           </li>
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-6F87EA4C-A7F7-49E9-9985-806D6514D3DD">使用DBMS_SPACE.ASA_RECOMMENDATIONS查看Segment Advisor结果</a><br><code class="codeph">DBMS_SPACE</code>包中的<code class="codeph">ASA_RECOMMENDATIONS</code>过程返回一个嵌套的表对象，其中包含自动段Advisor运行的结果或建议，以及可选的手动Segment Advisor运行。
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-0381940C-F913-4605-90D7-D04788372DAB__GUID-B7DC7958-EE97-41F9-AB3F-0EF59949267B">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">DBMS_SPACE.ASA_RECOMMENDATIONS</code>函数的详细信息，请<code class="codeph">DBMS_SPACE.ASA_RECOMMENDATIONS</code> <a href="../arpls/DBMS_SPACE.html#ARPLS056" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="Segment Advisor识别具有可用于回收的空间的段。">细分顾问</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN11607"></a><div class="props_rev_3"><a id="GUID-C664946C-730E-4389-8C16-418820453872" name="GUID-C664946C-730E-4389-8C16-418820453872"></a><h6 id="ADMIN-GUID-C664946C-730E-4389-8C16-418820453872" class="sect6"><span class="enumeration_section">19.3.2.5.1</span>使用Cloud Control查看Segment Advisor结果</h6>
                        <div>
                           <p>使用Cloud Control，您可以查看自动段Advisor运行和手动Segment Advisor运行的Segment Advisor结果。</p>
                           <div class="section">
                              <p>您可以查看以下类型的结果：</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>所有建议（多个自动和手动Segment Advisor运行）</p>
                                 </li>
                                 <li>
                                    <p>上一次自动分段顾问的建议运行</p>
                                 </li>
                                 <li>
                                    <p>来自特定运行的建议</p>
                                 </li>
                                 <li>
                                    <p>行链发现</p>
                                 </li>
                              </ul>
                              <p>您还可以查看上次自动细分顾问运行所分析的细分列表。</p>
                              <p><span class="bold">要使用Cloud Control-All运行查看Segment Advisor结果：</span></p>
                              <ol>
                                 <li>
                                    <p>访问数据库主页。</p>
                                 </li>
                                 <li>
                                    <p>从Administration菜单中，选择<span class="bold">Storage</span> ，然后选择<span class="bold">Segment Advisor</span> 。
                                    </p>
                                    <p>此时将显示“细分顾问建议”页面。建议按表空间组织。</p>
                                 </li>
                                 <li>
                                    <p>如果存在任何建议，请选择表空间，然后单击“ <span class="bold">建议详细信息”</span> 。
                                    </p>
                                    <p>出现“建议详细信息”页面您可以从此页面启动建议的活动（缩小或重新组织）。</p>
                                    <div class="infoboxnote" id="GUID-C664946C-730E-4389-8C16-418820453872__GUID-DCC253C9-26B3-40B9-A9B7-254E87C329AA">
                                       <p class="notep1">注意：</p>不要尝试缩小或重新组织LOB，因为这样做会导致错误。
                                    </div>
                                    <div class="infobox-tip" id="GUID-C664946C-730E-4389-8C16-418820453872__GUID-28984C74-68A4-46C6-A535-C3ACE5435683">
                                       <p class="notep1">小费：</p>
                                       <p>列表条目按可回收空间的降序排序。您可以单击列标题以更改排序顺序或从升序更改为降序。</p>
                                    </div>
                                 </li>
                              </ol>
                              <p><span class="bold">要使用Cloud Control-Last Automatic Segment Advisor运行Segment Advisor结果：</span></p>
                              <ol>
                                 <li>
                                    <p>访问数据库主页。</p>
                                 </li>
                                 <li>
                                    <p>从Administration菜单中，选择<span class="bold">Storage</span> ，然后选择<span class="bold">Segment Advisor</span> 。
                                    </p>
                                    <p>此时将显示“细分顾问建议”页面。建议按表空间组织。</p>
                                    <p>此时将显示“细分顾问建议”页面。</p>
                                 </li>
                                 <li>
                                    <p>在“视图”列表中， <span class="bold">从“上次自动运行”中</span>选择“ <span class="bold">建议”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果存在任何建议，请选择表空间并单击“ <span class="bold">建议详细信息”</span> 。
                                    </p>
                                    <p>出现“建议详细信息”页面您可以从此页面启动建议的活动（缩小或重新组织）。</p>
                                 </li>
                              </ol>
                              <div class="infoboxnote" id="GUID-C664946C-730E-4389-8C16-418820453872__GUID-9BD4C98B-7070-4EE5-979B-A749F9A94866">
                                 <p class="notep1">注意：</p>不要尝试缩小或重新组织LOB，因为这样做会导致错误。
                              </div>
                              <p><span class="bold">要使用特定于云控制的运行查看Segment Advisor结果：</span></p>
                              <ol>
                                 <li>
                                    <p>访问数据库主页。</p>
                                 </li>
                                 <li>
                                    <p>从“性能”菜单中，选择“ <span class="bold">顾问主页”</span> 。
                                    </p>
                                    <p>将显示Advisor Central页面。（ <a href="managing-space-for-schema-objects.html#GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC__CBBEFIGG">见图19-2</a> 。）
                                    </p>
                                 </li>
                                 <li>
                                    <p>检查您的任务是否显示在“结果”标题下的列表中。如果没有，请完成以下步骤：</p>
                                    <ol type="a">
                                       <li>
                                          <p>在页面的“搜索”部分的“顾问类型”下，选择“ <span class="bold">细分顾问”</span> 。
                                          </p>
                                       </li>
                                       <li>
                                          <p>在“顾问运行”列表中，选择“ <span class="bold">全部”</span>或所需的时间段。
                                          </p>
                                       </li>
                                       <li>
                                          <p>（可选）输入任务名称。</p>
                                       </li>
                                       <li>
                                          <p>单击<span class="bold">Go</span> 。</p>
                                          <p>您的Segment Advisor任务将显示在“结果”部分中。</p>
                                       </li>
                                    </ol>
                                 </li>
                                 <li>
                                    <p>检查作业的状态。如果它不是<code class="codeph">COMPLETED</code> ，请使用页面顶部的<span class="bold">Refresh</span>控件刷新页面。（不要使用浏览器的“刷新”图标。）
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击任务名称。</p>
                                    <p>此时将显示“细分顾问任务”页面，其中的建议按表空间组织。</p>
                                 </li>
                                 <li>
                                    <p>在列表中选择一个表空间，然后单击“ <span class="bold">建议详细信息”</span> 。
                                    </p>
                                    <p>出现“建议详细信息”页面您可以从此页面启动建议的活动（缩小或重新组织）。</p>
                                 </li>
                              </ol>
                              <p><span class="bold">要查看行链结果：</span></p>
                              <ol>
                                 <li>
                                    <p>访问数据库主页。</p>
                                 </li>
                                 <li>
                                    <p>从Administration菜单中，选择<span class="bold">Storage</span> ，然后选择<span class="bold">Segment Advisor</span> 。
                                    </p>
                                    <p>此时将显示“细分顾问建议”页面。建议按表空间组织。</p>
                                    <p>此时将显示“细分顾问建议”页面。</p>
                                 </li>
                                 <li>
                                    <p>在“相关链接”标题下，单击“ <span class="bold">链接行分析”</span> 。
                                    </p>
                                    <p>将显示“链式行分析”页面，其中显示具有链接行的所有段，每个段具有链式行百分比。</p>
                                 </li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB" title="Segment Advisor创建了几种类型的结果：建议，发现，操作和对象。">查看细分顾问结果</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13057"></a><a id="ADMIN11608"></a><div class="props_rev_3"><a id="GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA" name="GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA"></a><h6 id="ADMIN-GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA" class="sect6"><span class="enumeration_section">19.3.2.5.2</span>通过查询DBA_ADVISOR_ *视图查看Segment Advisor结果</h6>
                        <div>
                           <p>您可以通过查询<code class="codeph">DBA_ADVISOR_*</code>视图来查看Segment Advisor结果。
                           </p>
                           <div class="section">
                              <p></p>
                              <p><a href="managing-space-for-schema-objects.html#GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA__BABGGBHI" title="此表总结了细分顾问的可能结果。它显示了某些Segment Advisor视图中列的相关值。">表19-5</a>的标题显示了<code class="codeph">DBA_ADVISOR_*</code>视图中包含Segment Advisor输出的列。有关这些视图的说明，请参见<a href="../refrn/DBA_ADVISOR_OBJECTS.html#REFRN23320" target="_blank"><span class="italic">Oracle数据库参考</span></a> 。表格内容总结了可能的结果。此外， <a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABHCCCE" title="第1列包含OBJECT_TYPE参数的值。以下4列列出了相应的ATTR1，ATTR2，ATTR3和ATTR4值。">表19-2</a>定义了<code class="codeph">DBA_ADVISOR_OBJECTS</code>视图中包含已分析段的信息的列。
                              </p>
                              <p>在查询<code class="codeph">DBA_ADVISOR_*</code>视图之前，您可以通过查询<code class="codeph">DBA_ADVISOR_TASKS</code>的<code class="codeph">STATUS</code>列来检查Segment Advisor任务是否完成。</p><pre class="oac_no_warn" dir="ltr">选择task_name，来自dba_advisor_tasks的状态，其中owner ='STEVE'和advisor_name ='Segment Advisor'; TASK_NAME状态------------------------------ -----------手册员工已完成</pre><p>以下示例显示如何查询<code class="codeph">DBA_ADVISOR_*</code>视图以从用户<code class="codeph">STEVE</code>提交的所有Segment Advisor运行中检索结果：</p><pre class="oac_no_warn" dir="ltr">从dba_advisor_findings af，dba_advisor_objects ao中选择af.task_name，ao.attr2 segname，ao.attr3分区，ao.type，af.message，其中ao.task_id = af.task_id和ao.object_id = af.object_id和ao.owner ='史蒂夫';</pre><pre class="oac_no_warn" dir="ltr">TASK_NAME SEGNAME PARTITION TYPE MESSAGE ------------------ ------------ --------------- ---------------- -------------------------- Manual_Employees EMPLOYEES TABLE中的空闲空间obje ct小于10MB。 Manual_Salestable4 SALESTABLE4 SALESTABLE4_P1表分区执行收缩，估计节省为74444154字节。Manual_Salestable4 SALESTABLE4 SALESTABLE4_P2表分区对象中的可用空间小于10MB。</pre><div class="tblformalwide" id="GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA__BABGGBHI">
                                 <p class="titleintable">表19-5细分顾问结果：摘要</p>
                                 <table cellpadding="4" cellspacing="0" class="FormalWide" title="细分顾问结果：摘要" width="100%" border="1" summary="This table summarizes possible outcomes of the Segment advisor. It shows the related values of columns in some of the Segment Advisor views." frame="hsides" rules="rows">
                                    <thead>
                                       <tr align="left" valign="top">
                                          <th align="left" valign="bottom" width="24%" id="d182472e4207">DBA_ADVISOR_FINDINGS的MESSAGE列</th>
                                          <th align="left" valign="bottom" width="25%" id="d182472e4210">DBA_ADVISOR_FINDINGS的MORE_INFO列</th>
                                          <th align="left" valign="bottom" width="27%" id="d182472e4213">DBA_ADVISOR_RECOMMENDATIONS的BENEFIT_TYPE列</th>
                                          <th align="left" valign="bottom" width="24%" id="d182472e4216">DBA_ADVISOR_ACTIONS的ATTR1列</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4221" headers="d182472e4207 ">
                                             <p>信息不足以提出建议。</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4221 d182472e4210 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4221 d182472e4213 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4221 d182472e4216 ">
                                             <p>-</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4234" headers="d182472e4207 ">
                                             <p>对象中的可用空间小于10MB。</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4234 d182472e4210 ">
                                             <p>分配的空间： <span class="italic">xxx</span> ：已用空间： <span class="italic">xxx</span> ：可回收空间： <span class="italic">xxx</span></p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4234 d182472e4213 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4234 d182472e4216 ">
                                             <p>-</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4255" headers="d182472e4207 ">
                                             <p>该对象有一些自由空间但不能缩小，因为......</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4255 d182472e4210 ">
                                             <p>分配的空间： <span class="italic">xxx</span> ：已用空间： <span class="italic">xxx</span> ：可回收空间： <span class="italic">xxx</span></p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4255 d182472e4213 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4255 d182472e4216 ">
                                             <p>-</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4276" headers="d182472e4207 ">
                                             <p>对象中的可用空间小于最后一个范围的大小。</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4276 d182472e4210 ">
                                             <p>分配的空间： <span class="italic">xxx</span> ：已用空间： <span class="italic">xxx</span> ：可回收空间： <span class="italic">xxx</span></p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4276 d182472e4213 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4276 d182472e4216 ">
                                             <p>-</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4297" headers="d182472e4207 ">
                                             <p>执行收缩，估计节省的是<span class="italic">xxx</span>字节。
                                             </p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4297 d182472e4210 ">
                                             <p>分配的空间： <span class="italic">xxx</span> ：已用空间： <span class="italic">xxx</span> ：可回收空间： <span class="italic">xxx</span></p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4297 d182472e4213 ">
                                             <p>执行收缩，估计节省的是<span class="italic">xxx</span>字节。
                                             </p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4297 d182472e4216 ">
                                             <p>要执行的命令。例如： <code class="codeph">ALTER</code> <span class="italic"><code class="codeph">object</code></span> <code class="codeph">SHRINK SPACE</code> ;）</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4334" headers="d182472e4207 ">
                                             <p>启用表<span class="italic">模式的</span>行移动。 <span class="italic">表</span>和执行收缩，估计节省是<span class="italic">xxx</span>字节。
                                             </p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4334 d182472e4210 ">
                                             <p>分配的空间： <span class="italic">xxx</span> ：已用空间： <span class="italic">xxx</span> ：可回收空间： <span class="italic">xxx</span></p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4334 d182472e4213 ">
                                             <p>启用表<span class="italic">模式的</span>行移动。 <span class="italic">表</span>和执行收缩，估计节省是<span class="italic">xxx</span>字节</p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4334 d182472e4216 ">
                                             <p>要执行的命令。例如： <code class="codeph">ALTER</code> <span class="italic"><code class="codeph">object</code></span> <code class="codeph">SHRINK SPACE</code> ;）</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4383" headers="d182472e4207 ">
                                             <p>执行对象<span class="italic">物体</span>上重新组织，估计节省是<span class="italic">XXX</span>字节。
                                             </p>
                                             <p>（注意：此发现适用于具有可回收空间且不符合在线段缩小条件的对象。）</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4383 d182472e4210 ">
                                             <p>分配的空间： <span class="italic">xxx</span> ：已用空间： <span class="italic">xxx</span> ：可回收空间： <span class="italic">xxx</span></p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4383 d182472e4213 ">
                                             <p>执行对象<span class="italic">物体</span>上重新组织，估计节省是<span class="italic">XXX</span>字节。
                                             </p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4383 d182472e4216 ">
                                             <p>执行重组</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4418" headers="d182472e4207 ">
                                             <p>该对象具有链接的行，可以通过重新组织删除。</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4418 d182472e4210 ">
                                             <p>可以通过重新组织删除<span class="italic">xx</span> ％链接的行。
                                             </p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4418 d182472e4213 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4418 d182472e4216 ">
                                             <p>-</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4433" headers="d182472e4207 ">
                                             <p>压缩对象<span class="italic">object_name</span> ，估计节省的是<span class="italic">xxx</span>字节。
                                             </p>
                                             <p>（此结果仅由Automatic Segment Advisor生成）</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4433 d182472e4210 ">
                                             <p>压缩对象<span class="italic">object_name</span> ，估计节省的是<span class="italic">xxx</span>字节。
                                             </p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4433 d182472e4213 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4433 d182472e4216 ">
                                             <p>要执行的命令。例如： <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <code class="codeph">T1</code> <code class="codeph">ROW</code> <code class="codeph">STORE</code> <code class="codeph">COMPRESS</code> <code class="codeph">ADVANCED</code></p>
                                             <p>对于这一发现，也看到了<code class="codeph">ATTR2</code>列<code class="codeph">DBA_ADVISOR_ACTIONS</code> 。</p>
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                              <!-- class="inftblhruleinformal" -->
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB" title="Segment Advisor创建了几种类型的结果：建议，发现，操作和对象。">查看细分顾问结果</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN11609"></a><div class="props_rev_3"><a id="GUID-6F87EA4C-A7F7-49E9-9985-806D6514D3DD" name="GUID-6F87EA4C-A7F7-49E9-9985-806D6514D3DD"></a><h6 id="ADMIN-GUID-6F87EA4C-A7F7-49E9-9985-806D6514D3DD" class="sect6"><span class="enumeration_section">19.3.2.5.3使用DBMS_SPACE.ASA_RECOMMENDATIONS</span>查看段Advisor结果</h6>
                        <div>
                           <p><code class="codeph">DBMS_SPACE</code>包中的<code class="codeph">ASA_RECOMMENDATIONS</code>过程返回一个嵌套的表对象，其中包含自动段Advisor运行的结果或建议，以及可选的手动Segment Advisor运行。
                           </p>
                           <div class="section">
                              <p></p>
                              <p>调用此过程可能比使用<code class="codeph">DBA_ADVISOR_*</code>视图更容易，因为该过程会为您执行所有必需的连接并以易于使用的格式返回信息。
                              </p>
                              <p>以下查询返回最近一次运行Auto Segment Advisor的建议，并建议运行命令以遵循建议：</p><pre class="oac_no_warn" dir="ltr">从表中选择tablespace_name，segment_name，segment_type，partition_name，recommendations，c1（dbms_space.asa_recommendations（'FALSE'，'FALSE'，'FALSE'））; TABLESPACE_NAME SEGMENT_NAME SEGMENT_TYPE ------------------------------ ----------------- ------------- -------------- PARTITION_NAME ---------------------- --------建议----------------------------------------- ------------------------------------ C1 ------------- -------------------------------------------------- -------------- TVMDS_ASSM ORDERS1表分区ORDERS1_P2执行收缩，估计节省为57666422字节。alter table“STEVE”。“ORDERS1”修改分区“ORDERS1_P2”缩小空间TVMDS_ASSM ORDERS1 TABLE PARTITION ORDERS1_P1执行收缩，估计节省45083514字节。alter table“STEVE”。“ORDERS1”修改分区“ORDERS1_P1”缩小空间TVMDS_ASSM_NEW ORDERS_NEW TABLE执行收缩，估计节省的是155398992字节。alter table“STEVE”。“ORDERS_NEW”缩小空间TVMDS_ASSM_NEW ORDERS_NEW_INDEX INDEX执行收缩，估计节省的是102759445字节。改变索引“STEVE”。“ORDERS_NEW_INDEX”缩小空间</pre><p>有关<code class="codeph">DBMS_SPACE.ASA_RECOMMENDATIONS</code>详细信息，请参阅<a href="../arpls/DBMS_SPACE.html#ARPLS056" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。</p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB" title="Segment Advisor创建了几种类型的结果：建议，发现，操作和对象。">查看细分顾问结果</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADMIN11610"></a><div class="props_rev_3"><a id="GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C" name="GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C"></a><h5 id="ADMIN-GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C" class="sect5"><span class="enumeration_section">19.3.2.6</span>配置自动段顾问</h5>
                     <div>
                        <p>Automatic Segment Advisor是一项自动维护任务。因此，您可以使用Cloud Control或PL / SQL程序包过程调用来修改此任务何时（以及如果）运行。您还可以通过修改适当的资源计划来控制分配给它的资源。</p>
                        <div class="section">
                           <p>您可以调用PL / SQL包过程来进行这些更改，但更简单的方法是使用Cloud Control。</p>
                           <p>使用Cloud Control配置Automatic Segment Advisor任务：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以<code class="codeph">SYSTEM.</code>用户身份登录Cloud Control <code class="codeph">SYSTEM.</code></span></li>
                           <li class="stepexpand"><span>访问数据库主页。</span></li>
                           <li class="stepexpand"><span>从Administration菜单中，选择<span class="bold">Storage</span> ，然后选择<span class="bold">Segment Advisor</span> 。</span><div>
                                 <p>此时将显示“细分顾问建议”页面。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>在“相关链接”标题下，单击标题为“ <span class="bold">自动维护任务”</span>的链接。</span><div>
                                 <p>将显示“自动维护任务”页面。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>单击<span class="bold">配置</span> 。</span><div>
                                 <p>将显示“自动维护任务配置”页面。</p>
                                 <div class="figure" id="GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C__GUID-A09A026F-778E-4961-8C62-2428364A3CAA"><img src="img/edit_job_seg_advisor.gif" alt="edit_job_seg_advisor.gif的描述如下" title="edit_job_seg_advisor.gif的描述如下" longdesc="img_text/edit_job_seg_advisor.html"><br><a href="img_text/edit_job_seg_advisor.html">插图描述edit_job_seg_advisor.gif</a></div>
                                 <!-- class="figure" -->
                              </div>
                           </li>
                           <li class="stepexpand"><span>要完全禁用“自动段优化”，请在“任务设置”下，选择“段优化”标签旁边的“ <span class="bold">已禁用</span> ”，然后单击“ <span class="bold">应用”</span> 。</span></li>
                           <li class="stepexpand"><span>要为特定维护窗口禁用“自动分段顾问”，请清除“分段顾问”列下的所需复选框，然后单击“ <span class="bold">应用”</span> 。</span></li>
                           <li class="stepexpand"><span>要修改维护时段的开始和结束时间以及持续时间，请单击“ <span class="bold">编辑窗口组”</span> 。</span><div>
                                 <p>将出现“编辑窗口组”页面。单击维护窗口的名称，然后单击“ <span class="bold">编辑”</span>以更改窗口的计划。
                                 </p>
                              </div>
                           </li>
                        </ol>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C__GUID-9FC0E801-7402-4317-8B30-C0F686C721B1">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="managing-automated-database-maintenance-tasks.html#GUID-7F7C805E-BA64-43A5-9A09-FC259FFA9AA8" title="Oracle数据库已自动执行通常由数据库管理员执行的几项常见维护任当预期系统负载较轻时，执行这些自动维护任务。您可以启用和禁用单个维护任务，并可以配置这些任务的运行时间以及分配的资源分配。">管理自动数据库维护任务</a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="Segment Advisor识别具有可用于回收的空间的段。">细分顾问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11611"></a><div class="props_rev_3"><a id="GUID-04ED091D-495D-4F6F-A77D-F91BE5603581" name="GUID-04ED091D-495D-4F6F-A77D-F91BE5603581"></a><h5 id="ADMIN-GUID-04ED091D-495D-4F6F-A77D-F91BE5603581" class="sect5"><span class="enumeration_section">19.3.2.7</span>查看自动段顾问信息</h5>
                     <div>
                        <p>您可以查询视图以显示特定于Automatic Segment Advisor的信息。</p>
                        <div class="tblformal" id="GUID-04ED091D-495D-4F6F-A77D-F91BE5603581__GUID-F6A8794E-A81B-46C8-A0F6-0DC786D75A49">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table contains two rows, describing the views DBA_AUTO_SEGADV_SUMMARY and DBA_AUTO_SEGADV_CTL." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="41%" id="d182472e4720">视图</th>
                                    <th align="left" valign="bottom" width="59%" id="d182472e4723">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="41%" id="d182472e4728" headers="d182472e4720 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_AUTO_SEGADV_SUMMARY.html#REFRN23519" target="_blank">DBA_AUTO_SEGADV_SUMMARY</a></code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d182472e4728 d182472e4723 ">
                                       <p>此视图的每一行总结了一个自动段顾问运行。字段包括已处理的表空间和段数以及建议的数量。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="41%" id="d182472e4738" headers="d182472e4720 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_AUTO_SEGADV_CTL.html#REFRN23518" target="_blank">DBA_AUTO_SEGADV_CTL</a></code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d182472e4738 d182472e4723 ">
                                       <p>包含自动段顾问用于选择和处理段的控制信息。每行包含有关单个对象（表空间或段）的信息，包括对象是否已被处理，如果是，则处理它的任务ID以及选择它的原因。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="Segment Advisor识别具有可用于回收的空间的段。">细分顾问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN12625"></a><a id="ADMIN12626"></a><a id="ADMIN10161"></a><div class="props_rev_3"><a id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB" name="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB"></a><h4 id="ADMIN-GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB" class="sect4"><span class="enumeration_section">19.3.3</span>在线缩小数据库段</h4>
                  <div>
                     <p>您使用在线段缩小来回收Oracle数据库段中高水位线下方的碎片化可用空间。</p>
                     <div class="section">
                        <p>细分缩减的好处是：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>压缩数据可以提高缓存利用率，从而提高在线事务处理（OLTP）性能。</p>
                           </li>
                           <li>
                              <p>压缩数据需要在全表扫描中扫描更少的块，这反过来导致更好的决策支持系统（DSS）性能。</p>
                           </li>
                        </ul>
                        <p>段缩减是一种在线就地操作。可以在段缩小的数据移动阶段期间发出DML操作和查询。当空间被释放时，并发DML操作在收缩操作结束时被短时间阻塞。在收缩操作期间维护索引，并在操作完成后保持可用。段收缩不需要分配额外的磁盘空间。</p>
                        <p>段收缩回收高水位线上方和下方未使用的空间。相比之下，空间释放仅在高水位线上方回收未使用的空间。在收缩操作中，默认情况下，数据库压缩段，调整高水位线，并释放回收空间。</p>
                        <p>段收缩需要将行移动到新位置。因此，必须首先在要缩小的对象中启用行移动，并禁用在对象上定义的任何基于rowid的触发器。使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>在表中启用行移动...<code class="codeph">ENABLE</code> <code class="codeph">ROW</code> <code class="codeph">MOVEMENT</code>命令。
                        </p>
                        <p>收缩操作只能在具有自动段空间管理（ASSM）的本地管理表空间中的段上执行。在ASSM表空间中，除以下情况外，所有段类型都符合在线段缩减的条件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>物联网映射表</p>
                           </li>
                           <li>
                              <p>具有基于rowid的物化视图的表</p>
                           </li>
                           <li>
                              <p>包含基于函数的索引的表</p>
                           </li>
                           <li>
                              <p><code class="codeph">SECUREFILE</code> LOBs</p>
                           </li>
                           <li>
                              <p>使用以下压缩方法压缩的表：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用<code class="codeph">ROW STORE COMPRESS BASIC</code>基本表压缩</p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">COLUMN STORE COMPRESS FOR QUERY</code>仓库压缩</p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">COLUMN STORE COMPRESS FOR ARCHIVE</code>归档压缩</p>
                                 </li>
                              </ul>
                              <p>但是，使用<code class="codeph">ROW STORE COMPRESS ADVANCED</code>进行高级行压缩压缩的表格符合在线段缩减的条件。有关表压缩方法的信息，请参阅<span class="q">“ <a href="managing-tables.html#GUID-ED833867-4B7F-442E-A70C-9C19DAA8F445" title="压缩可节省磁盘空间，减少数据库缓冲区高速缓存中的内存使用，并可显着提高读取期间的查询执行速度。">考虑使用表压缩</a> ”</span> 。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB__GUID-49144676-3041-44FD-BA7A-9D9D11A7804B">
                           <p class="notep1">注意：</p>
                           <p>在线缩小数据库段可能会导致依赖数据库对象失效。请参阅<span class="q">“ <a href="managing-schema-objects.html#GUID-919EF353-E9F4-4767-B6BD-5191BE3E38E5" title="某些类型的架构对象引用其他对象。引用另一个对象的对象称为依赖对象，被引用的对象是引用的对象。这些引用是在编译时建立的，如果编译器无法解析它们，则编译的依赖对象将标记为无效。">关于对象依赖关系和对象失效</a> ”</span> 。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB__GUID-07E73054-3AAF-4C86-BA60-8C0CFCC6D068">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>命令的更多信息，请<a href="../sqlrf/ALTER-TABLE.html#SQLRF01001" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB__GUID-76821E67-F4AD-4C3E-85F8-C8CB2DC8C916">调用在线段收缩</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在调用在线段缩小之前，请查看Segment Advisor的结果和建议。有关更多信息，请参阅<span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-E9B57A45-2688-42B6-9782-D49702D51F24" title="要使用Segment Advisor，请检查Automatic Segment Advisor的结果，并可选择手动运行Segment Advisor。">使用Segment Advisor</a> ”</span> 。
                        </p>
                        <p>您可以使用Cloud Control或SQL * Plus中的SQL命令调用在线段缩减。本节的其余部分讨论命令行方法。</p>
                        <div class="infoboxnote" id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB__GUID-019E41AE-5DA9-4556-B880-4B6CC4F17584">
                           <p class="notep1">注意：</p>
                           <p>您可以直接从Cloud Control中的“建议详细信息”页面调用段收缩。或者，要在Cloud Control中调用单个表的段缩减，请在“表”页面上显示该表，选择该表，然后单击“操作”列表中的“ <span class="bold">缩小段</span> ”。（ <a href="managing-space-for-schema-objects.html#GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC__CBBGDAJJ">见图19-1</a> 。）在Cloud Control中执行类似操作以缩小索引，物化视图等。
                           </p>
                        </div>
                        <p>您可以缩小表，索引组织表，索引，分区，子分区，物化视图或物化视图日志中的空间。可以使用带有<code class="codeph">SHRINK SPACE</code>子句的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ， <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ， <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>或<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code>语句执行此操作。
                        </p>
                        <p>两个可选子句使您可以控制缩小操作的进度：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">COMPACT</code>子句允许您将收缩段操作分为两个阶段。指定<code class="codeph">COMPACT</code> ，Oracle数据库会对段空间进行碎片整理并压缩表行，但会推迟重置高位标记并重新分配空间直到将来的时间。如果您有长时间运行的查询可能跨越操作并尝试从已回收的块中读取，则此选项很有用。碎片整理和压缩结果将保存到磁盘，因此在第二阶段不必重新进行数据移动。您可以在非高峰时段重新发出<code class="codeph">SHRINK SPACE</code>子句而不使用<code class="codeph">COMPACT</code>子句来完成第二阶段。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CASCADE</code>子句将段收缩操作扩展到对象的所有相关段。例如，如果在缩小表段时指定<code class="codeph">CASCADE</code> ，则表的所有索引也将缩小。（您无需指定<code class="codeph">CASCADE</code>来缩小分区表的分区。）要查看给定对象的从属段列表，可以运行<code class="codeph">DBMS_SPACE</code>包的<code class="codeph">OBJECT_DEPENDENT_SEGMENTS</code>过程。
                              </p>
                           </li>
                        </ul>
                        <p>与其他DDL操作一样，除非指定<code class="codeph">COMPACT</code>子句，否则段缩小会导致后续SQL语句因游标失效而被重新解析。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB__GUID-7862624E-7B51-4826-8E38-F041D37DF0BC">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>缩小表及其所有依赖段（包括<code class="codeph">BASICFILE</code> LOB段）：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE员工SHRINK SPACE CASCADE;</pre><p>仅缩小<code class="codeph">BASICFILE</code> LOB段：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE员工MODIFY LOB（perf_review）（SHRINK SPACE）;</pre><p>收缩分区表的单个分区：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE客户MODIFY PARTITION cust_P1 SHRINK SPACE;</pre><p>收缩IOT索引段和溢出段：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE城市SHRINK SPACE CASCADE;</pre><p>仅缩小IOT溢出段：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE城市OVERFLOW SHRINK SPACE;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB__GUID-CF3EA2D6-C8F7-45A6-8475-0329DD3AB8AD">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../sqlrf/index.html" target="_blank"><span class="italic">Oracle数据库SQL语言参考，</span></a>了解带有<code class="codeph">SHRINK SPACE</code>子句的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ， <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ， <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>和<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code>语句的语法和限制</p>
                           </li>
                           <li>
                              <p>有关LOB段的更多信息，请参见<a href="../adlob/index.html" target="_blank"><span class="italic">Oracle Database SecureFiles和Large Objects Developer's Guide</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" title="您可以回收未使用的空间。Segment Advisor是一个Oracle数据库组件，用于标识具有可用于回收的空间的段。">回收未使用的空间</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11612"></a><div class="props_rev_3"><a id="GUID-7ED839DE-64AA-4F7B-8279-E2A6CA9AE7DA" name="GUID-7ED839DE-64AA-4F7B-8279-E2A6CA9AE7DA"></a><h4 id="ADMIN-GUID-7ED839DE-64AA-4F7B-8279-E2A6CA9AE7DA" class="sect4"><span class="enumeration_section">19.3.4</span>解除分配未使用空间</h4>
                  <div>
                     <p>当您释放未使用的空间时，数据库将释放数据库段未使用（高水位线）末端的未使用空间，并使该空间可用于表空间中的其他段。</p>
                     <div class="section">
                        <p></p>
                        <p>在释放之前，您可以运行<code class="codeph">DBMS_SPACE</code>包的<code class="codeph">UNUSED_SPACE</code>过程，该过程返回有关高水位线位置和段中未使用空间量的信息。对于具有自动段空间管理的本地管理表空间中的段，请使用<code class="codeph">SPACE_USAGE</code>过程获取有关未使用空间的更准确信息。
                        </p>
                        <div class="infoboxnotealso" id="GUID-7ED839DE-64AA-4F7B-8279-E2A6CA9AE7DA__GUID-41A7440A-BFE0-4E8B-AC5A-2E54937FD326">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_SPACE.html#ARPLS056" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a>包含<code class="codeph">DBMS_SPACE</code>包的说明</p>
                        </div>
                        <p>以下语句释放段（表，索引或集群）中未使用的空间：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE <span class="italic">表</span> DEALLOCATE UNUSED KEEP <span class="italic">整数</span> ; ALTER INDEX <span class="italic">索引</span> DEALLOCATE UNUSED KEEP <span class="italic">整数</span> ; ALTER CLUSTER <span class="italic">集群</span> DEALLOCATE UNUSED KEEP <span class="italic">整数</span> ;</pre><p><code class="codeph">KEEP</code>子句是可选的，允许您指定段中保留的空间量。您可以通过检查<code class="codeph">DBA_FREE_SPACE</code>视图来验证是否释放了释放的空间。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7ED839DE-64AA-4F7B-8279-E2A6CA9AE7DA__GUID-B95A1509-3F7D-4477-A536-EB2A0EA3E267">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关释放未使用空间的语法和语义的详细信息，请参阅<a href="../sqlrf/index.html" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">DBA_FREE_SPACE</code>视图的更多信息，请<code class="codeph">DBA_FREE_SPACE</code> <a href="../refrn/DBA_FREE_SPACE.html#REFRN23076" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" title="您可以回收未使用的空间。Segment Advisor是一个Oracle数据库组件，用于标识具有可用于回收的空间的段。">回收未使用的空间</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN13457"></a><div class="props_rev_3"><a id="GUID-3B76FB24-BC76-43DD-9305-F11EEA138B09" name="GUID-3B76FB24-BC76-43DD-9305-F11EEA138B09"></a><h3 id="ADMIN-GUID-3B76FB24-BC76-43DD-9305-F11EEA138B09" class="sect3"><span class="enumeration_section">19.4</span>删除未使用的对象存储</h3>
               <div>
                  <p><code class="codeph">DBMS_SPACE_ADMIN</code>程序包包含<code class="codeph">DROP_EMPTY_SEGMENTS</code>过程，该过程使您可以删除已从先前版本迁移的空表和分区的段。这包括表的依赖对象的片段，例如索引片段，如果可能的话。
                  </p>
                  <div class="section">
                     <p></p>
                     <p>以下示例从数据库中的每个表中删除空段。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SPACE_ADMIN.DROP_EMPTY_SEGMENTS（）;结束;</pre><p>以下内容从<code class="codeph">HR.EMPLOYEES</code>表中删除空段，包括依赖对象。
                     </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_SPACE_ADMIN.DROP_EMPTY_SEGMENTS（schema_name =&gt;'HR'，table_name =&gt;'EMPLOYEES'）;结束;</pre><p>此过程需要11.2.0或更高的兼容级别。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-3B76FB24-BC76-43DD-9305-F11EEA138B09__GUID-F948C036-58EE-4D7A-9889-754754DD39E1">
                     <p class="notep1">也可以看看：</p>
                     <p>有关此过程的详细信息，请参阅<a href="../arpls/DBMS_SPACE_ADMIN.html#ARPLS057" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="管理模式对象的空间涉及诸如管理表空间警报和空间分配，回收未使用的空间，删除未使用的对象存储，监视空间使用和容量规划等任务。">管理模式对象的空间</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11613"></a><div class="props_rev_3"><a id="GUID-03E8BA75-995F-4584-AE3C-6AB70D9F21A4" name="GUID-03E8BA75-995F-4584-AE3C-6AB70D9F21A4"></a><h3 id="ADMIN-GUID-03E8BA75-995F-4584-AE3C-6AB70D9F21A4" class="sect3"><span class="enumeration_section">19.5</span>了解数据类型的空间使用</h3>
               <div>
                  <p>创建表和其他数据结构时，您必须知道它们需要多少空间。每种数据类型都有不同的空间要求。</p>
                  <p>“ <a href="../lnpls/plsql-data-types.html#LNPLS003" target="_blank"><span class="italic">Oracle数据库PL / SQL语言参考”</span></a>和“ <a href="../sqlrf/Basic-Elements-of-Oracle-SQL.html#SQLRF002" target="_blank"><span class="italic">Oracle数据库SQL语言参考”</span></a>包含对数据类型及其空间要求的详尽描述。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="管理模式对象的空间涉及诸如管理表空间警报和空间分配，回收未使用的空间，删除未使用的对象存储，监视空间使用和容量规划等任务。">管理模式对象的空间</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11614"></a><div class="props_rev_3"><a id="GUID-2FB91EF7-B908-410E-B952-AF9A71CC25B1" name="GUID-2FB91EF7-B908-410E-B952-AF9A71CC25B1"></a><h3 id="ADMIN-GUID-2FB91EF7-B908-410E-B952-AF9A71CC25B1" class="sect3"><span class="enumeration_section">19.6</span>显示模式对象的空间使用信息</h3>
               <p>Oracle数据库提供数据字典视图和PL / SQL包，允许您显示有关模式对象的空间使用情况的信息。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA">使用PL / SQL包显示有关模式对象空间使用情况的信息</a><br>一组<code class="codeph">DBMS_SPACE</code>子程序提供有关架构对象的信息。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7">模式对象空间使用数据字典视图</a><br>一组数据字典视图显示有关模式对象中空间使用情况的信息。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="管理模式对象的空间涉及诸如管理表空间警报和空间分配，回收未使用的空间，删除未使用的对象存储，监视空间使用和容量规划等任务。">管理模式对象的空间</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN12627"></a><a id="ADMIN11615"></a><div class="props_rev_3"><a id="GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA" name="GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA"></a><h4 id="ADMIN-GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA" class="sect4"><span class="enumeration_section">19.6.1</span>使用PL / SQL包显示有关模式对象空间使用的信息</h4>
                  <div>
                     <p>一组<code class="codeph">DBMS_SPACE</code>子程序提供有关架构对象的信息。
                     </p>
                     <div class="section">
                        <div class="tblformal" id="GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA__GUID-CB8C4C36-E4E2-416B-92C5-7C4DF8E616E6">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Column 1 contains the names of PL/SQL packages that display information about schema object space usage. Column 2 describes each package." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="39%" id="d182472e5491">包装和程序/功能</th>
                                    <th align="left" valign="bottom" width="61%" id="d182472e5494">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d182472e5499" headers="d182472e5491 ">
                                       <p><code class="codeph">DBMS_SPACE.UNUSED_SPACE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d182472e5499 d182472e5494 ">
                                       <p>返回有关对象（表，索引或集群）中未使用空间的信息。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d182472e5507" headers="d182472e5491 ">
                                       <p><code class="codeph">DBMS_SPACE.FREE_BLOCKS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d182472e5507 d182472e5494 ">
                                       <p>返回有关由空闲列表管理段空闲空间的对象（表，索引或集群）中的空闲数据块的信息（段空间管理为<code class="codeph">MANUAL</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d182472e5518" headers="d182472e5491 ">
                                       <p><code class="codeph">DBMS_SPACE.SPACE_USAGE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d182472e5518 d182472e5494 ">
                                       <p>返回有关其段空间管理为<code class="codeph">AUTO</code>的对象（表，索引或集群）中的空闲数据块的信息。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA__GUID-C7CF4332-B1EC-4C01-ABA8-83888903CAFE">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_SPACE.html#ARPLS056" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> ，以获取<code class="codeph">DBMS_SPACE</code>包的说明</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA__GUID-5576FAEA-DAF8-410F-9149-B89FD587C0D8">示例：使用DBMS_SPACE.UNUSED_SPACE</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下SQL * Plus示例使用<code class="codeph">DBMS_SPACE</code>包来获取未使用的空间信息。
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; VARIABLE total_blocks NUMBER SQL&gt; VARIABLE total_bytes NUMBER SQL&gt; VARIABLE unused_blocks NUMBER SQL&gt; VARIABLE unused_bytes NUMBER SQL&gt; VARIABLE lastextf NUMBER SQL&gt; VARIABLE last_extb NUMBER SQL&gt; VARIABLE lastusedblock NUMBER SQL&gt; exec DBMS_SPACE.UNUSED_SPACE（'SCOTT'，'EMP'， 'TABLE',: total_blocks， - &gt;：total_bytes，：unused_blocks，：unused_bytes，：lastextf， - &gt;：last_extb，：lastusedblock）; PL / SQL过程成功完成。SQL&gt; PRINT TOTAL_BLOCKS ------------ 5 TOTAL_BYTES ----------- 10240 ...LASTUSEDBLOCK ------------- 3</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-2FB91EF7-B908-410E-B952-AF9A71CC25B1" title="Oracle数据库提供数据字典视图和PL / SQL包，允许您显示有关模式对象的空间使用情况的信息。">显示有关模式对象的空间使用情况的信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11616"></a><div class="props_rev_3"><a id="GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7" name="GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7"></a><h4 id="ADMIN-GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7" class="sect4"><span class="enumeration_section">19.6.2</span>模式对象空间使用数据字典视图</h4>
                  <div>
                     <p>一组数据字典视图显示有关模式对象中空间使用情况的信息。</p>
                     <div class="section">
                        <p>这些视图显示有关模式对象中空间使用情况的信息</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7__GUID-2D8A7221-8BAF-4C9C-860F-5F86AE02FEC7">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Column 1 contains the names of views, column 2 describes each view." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="32%" id="d182472e5614">视图</th>
                                 <th align="left" valign="bottom" width="68%" id="d182472e5617">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d182472e5622" headers="d182472e5614 ">
                                    <p><code class="codeph"><a href="../refrn/DBA_SEGMENTS.html#REFRN23243" target="_blank">DBA_SEGMENTS</a></code> 
                                    </p>
                                    <p><code class="codeph"><a href="../refrn/USER_SEGMENTS.html#REFRN26243" target="_blank">USER_SEGMENTS</a></code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d182472e5622 d182472e5617 ">
                                    <p><span class="bold"></span> DBA视图描述为所有数据库段分配的存储。用户视图描述为当前用户分配的段的存储。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d182472e5640" headers="d182472e5614 ">
                                    <p><code class="codeph"><a href="../refrn/DBA_EXTENTS.html#REFRN23072" target="_blank">DBA_EXTENTS</a></code> 
                                    </p>
                                    <p><code class="codeph"><a href="../refrn/USER_EXTENTS.html#REFRN26072" target="_blank">USER_EXTENTS</a></code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d182472e5640 d182472e5617 ">
                                    <p><span class="bold"></span> DBA视图描述包含数据库中所有段的扩展区。用户视图描述包含当前用户的段的范围。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d182472e5658" headers="d182472e5614 ">
                                    <p><code class="codeph"><a href="../refrn/DBA_FREE_SPACE.html#REFRN23076" target="_blank">DBA_FREE_SPACE</a></code> 
                                    </p>
                                    <p><code class="codeph"><a href="../refrn/USER_FREE_SPACE.html#REFRN26076" target="_blank">USER_FREE_SPACE</a></code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d182472e5658 d182472e5617 ">
                                    <p>DBA视图列出了所有表空间中的空闲扩展区。用户视图显示用户具有配额的表空间的可用空间信息。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-E205E4B4-6A5B-49B7-973D-74DC05E5E2DA">示例1：显示段信息</a><br>您可以查询<code class="codeph">DBA_SEGMENTS</code>视图以显示段信息。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-64CD62D6-3697-4802-802C-B37381880776">示例2：显示范围信息</a><br>您可以在<code class="codeph">DBA_EXTENTS</code>数据字典视图中查询有关数据库中当前分配的扩展区的信息。
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-5FCF46EA-4CC3-4CF6-9525-23A4C4EE1E3D">示例3：在表空间中显示可用空间（范围）</a><br>您可以在<code class="codeph">DBA_FREE_SPACE</code>数据字典视图中查询有关数据库中的空闲扩展区（未分配给任何段的扩展区）的信息。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-2FB91EF7-B908-410E-B952-AF9A71CC25B1" title="Oracle数据库提供数据字典视图和PL / SQL包，允许您显示有关模式对象的空间使用情况的信息。">显示有关模式对象的空间使用情况的信息</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11617"></a><div class="props_rev_3"><a id="GUID-E205E4B4-6A5B-49B7-973D-74DC05E5E2DA" name="GUID-E205E4B4-6A5B-49B7-973D-74DC05E5E2DA"></a><h5 id="ADMIN-GUID-E205E4B4-6A5B-49B7-973D-74DC05E5E2DA" class="sect5"><span class="enumeration_section">19.6.2.1</span>示例1：显示段信息</h5>
                     <div>
                        <p>您可以查询<code class="codeph">DBA_SEGMENTS</code>视图以显示段信息。
                        </p>
                        <div class="section">
                           <p>以下查询返回架构<code class="codeph">hr</code>中每个索引段的名称和大小：</p><pre class="oac_no_warn" dir="ltr">SELECT SEGMENT_NAME，TABLESPACE_NAME，BYTES，BLOCKS，EXTENTS FROM DBA_SEGMENTS WHERE SEGMENT_TYPE ='INDEX'和OWNER ='HR'ORDER BY SEGMENT_NAME;</pre><p>查询输出是：</p><pre class="oac_no_warn" dir="ltr">SEGMENT_NAME TABLESPACE_NAME BYTES BLOCKS EXTENTS ------------------------- --------------- ----- --- ------ ------- COUNTRY_C_ID_PK示例65536 32 1 DEPT_ID_PK示例65536 32 1 DEPT_LOCATION_IX示例65536 32 1 EMP_DEPARTMENT_IX示例65536 32 1 EMP_EMAIL_UK示例65536 32 1 EMP_EMP_ID_PK示例65536 32 1 EMP_JOB_IX示例65536 32 1 EMP_MANAGER_IX示例65536 32 1 EMP_NAME_IX示例65536 32 1 JHIST_DEPARTMENT_IX示例65536 32 1 JHIST_EMPLOYEE_IX示例65536 32 1 JHIST_EMP_ID_ST_DATE_PK示例65536 32 1 JHIST_JOB_IX示例65536 32 1 JOB_ID_PK示例65536 32 1 LOC_CITY_IX示例65536 32 1 LOC_COUNTRY_IX示例65536 32 1 LOC_ID_PK示例65536 32 1 LOC_STATE_PROVINCE_IX示例65536 32 1 REG_ID_PK示例65536 32 1 19行被选中。</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7" title="一组数据字典视图显示有关模式对象中空间使用情况的信息。">模式对象空间使用数据字典视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11618"></a><div class="props_rev_3"><a id="GUID-64CD62D6-3697-4802-802C-B37381880776" name="GUID-64CD62D6-3697-4802-802C-B37381880776"></a><h5 id="ADMIN-GUID-64CD62D6-3697-4802-802C-B37381880776" class="sect5"><span class="enumeration_section">19.6.2.2</span>示例2：显示范围信息</h5>
                     <div>
                        <p>您可以在<code class="codeph">DBA_EXTENTS</code>数据字典视图中查询有关数据库中当前分配的扩展区的信息。
                        </p>
                        <div class="section">
                           <p>例如，以下查询标识分配给<code class="codeph">hr</code>模式中每个索引段的扩展区以及每个扩展区的大小：</p><pre class="oac_no_warn" dir="ltr">SELECT SEGMENT_NAME，SEGMENT_TYPE，TABLESPACE_NAME，EXTENT_ID，BYTES，BLOCKS FROM DBA_EXTENTS WHERE SEGMENT_TYPE ='INDEX'和OWNER ='HR'ORDER BY SEGMENT_NAME;</pre><p>查询输出是：</p><pre class="oac_no_warn" dir="ltr">SEGMENT_NAME SEGMENT_TYPE TABLESPACE_NAME EXTENT_ID BYTES BLOCKS ------------------------- ------------ ------- -------- --------- -------- ------ COUNTRY_C_ID_PK索引示例0 65536 32 DEPT_ID_PK索引示例0 65536 32 DEPT_LOCATION_IX索引示例0 65536 32 EMP_DEPARTMENT_IX索引示例0 65536 32 EMP_EMAIL_UK索引示例0 65536 32 EMP_EMP_ID_PK索引示例0 65536 32 EMP_MANAGER_IX索引示例0 65536 32 EMP_NAME_IX索引示例0 65536 32 JHIST_DEPARTMENT_IX索引示例0 65536 32 JHIST_EMPLOYEE_IX索引示例0 65536 32 JHIST_EMP_ID_ST_DATE_PK索引示例0 65536 32 JHIST_JOB_IX索引示例0 65536 32 JOB_ID_PK索引示例0 65536 32 LOC_CITY_IX索引示例0 65536 32 LOC_COUNTRY_IX索引示例0 65536 32 LOC_ID_PK索引示例0 65536 32 LOC_STATE_PROVINCE_IX索引示例0 65536 32 REG_ID_PK索引示例0 65536 32选择了19行。
</pre><p>对于<code class="codeph">hr</code>模式，没有任何段具有分配给它的多个扩展区。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7" title="一组数据字典视图显示有关模式对象中空间使用情况的信息。">模式对象空间使用数据字典视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11619"></a><div class="props_rev_3"><a id="GUID-5FCF46EA-4CC3-4CF6-9525-23A4C4EE1E3D" name="GUID-5FCF46EA-4CC3-4CF6-9525-23A4C4EE1E3D"></a><h5 id="ADMIN-GUID-5FCF46EA-4CC3-4CF6-9525-23A4C4EE1E3D" class="sect5"><span class="enumeration_section">19.6.2.3</span>示例3：在表空间中显示<span class="enumeration_section">可用</span>空间（范围）</h5>
                     <div>
                        <p>您可以在<code class="codeph">DBA_FREE_SPACE</code>数据字典视图中查询有关数据库中的空闲扩展区（未分配给任何段的扩展区）的信息。
                        </p>
                        <div class="section">
                           <p>例如，以下查询显示<code class="codeph">SMUNDO</code>表空间中可用作可用扩展区的<code class="codeph">SMUNDO</code>空间量：</p><pre class="oac_no_warn" dir="ltr">SELECT TABLESPACE_NAME，FILE_ID，BYTES，BLOCKS FROM DBA_FREE_SPACE WHERE TABLESPACE_NAME ='SMUNDO';</pre><p>查询输出是：</p><pre class="oac_no_warn" dir="ltr">TABLESPACE_NAME FILE_ID BYTES BLOCKS --------------- -------- -------- ------ SMUNDO 3 65536 32 SMUNDO 3 65536 32 SMUNDO 3 65536 32 SMUNDO 3 65536 32 SMUNDO 3 65536 32 SMUNDO 3 65536 32 SMUNDO 3 131072 64 SMUNDO 3 131072 64 SMUNDO 3 65536 32 SMUNDO 3 3407872 1664选择了10行。</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7" title="一组数据字典视图显示有关模式对象中空间使用情况的信息。">模式对象空间使用数据字典视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN11621"></a><div class="props_rev_3"><a id="GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977" name="GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977"></a><h3 id="ADMIN-GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977" class="sect3"><span class="enumeration_section">19.7</span>数据库对象的容量规划</h3>
               <div>
                  <p>Oracle数据库提供了两种计划数据库对象容量的方法：使用Cloud Control或<code class="codeph">DBMS_SPACE</code> PL / SQL包。<code class="codeph">DBMS_SPACE</code>包中的三个过程使您能够预测新对象的大小并监视现有数据库对象的大小。
                  </p>
                  <p>本文档讨论了PL / SQL方法。有关使用Cloud Control进行容量规划的详细信息，请参阅Cloud Control联机帮助和<span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-E9B57A45-2688-42B6-9782-D49702D51F24" title="要使用Segment Advisor，请检查Automatic Segment Advisor的结果，并可选择手动运行Segment Advisor。">使用Segment Advisor</a> ”</span> 。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-8EDCE354-32FB-438C-AF0F-6834F6E6EFB3">估计表的空间使用</a><br>根据表空间存储属性，表空间块大小和许多其他因素，数据库表的大小可能会有很大差异。<code class="codeph">DBMS_SPACE</code>包的<code class="codeph">CREATE_TABLE_COST</code>过程允许您估计创建表的空间使用成本。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-093AB2A6-F9AE-4145-A507-3FDE64B5BF00">估计指数的空间使用</a><br>该<code class="codeph">CREATE_INDEX_COST</code>的议事<code class="codeph">DBMS_SPACE</code>包可以让你创建估计在现有的表的索引空间使用成本。
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-A9590F06-F8D1-4795-B814-044BE6932A05">获得对象增长趋势</a><br><code class="codeph">DBMS_SPACE</code>包的<code class="codeph">OBJECT_GROWTH_TREND</code>函数生成一个包含一行或多行的表，其中每行描述在特定时间对象的空间使用情况。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="管理模式对象的空间涉及诸如管理表空间警报和空间分配，回收未使用的空间，删除未使用的对象存储，监视空间使用和容量规划等任务。">管理模式对象的空间</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11622"></a><div class="props_rev_3"><a id="GUID-8EDCE354-32FB-438C-AF0F-6834F6E6EFB3" name="GUID-8EDCE354-32FB-438C-AF0F-6834F6E6EFB3"></a><h4 id="ADMIN-GUID-8EDCE354-32FB-438C-AF0F-6834F6E6EFB3" class="sect4"><span class="enumeration_section">19.7.1</span>估算表的空间使用</h4>
                  <div>
                     <p>根据表空间存储属性，表空间块大小和许多其他因素，数据库表的大小可能会有很大差异。<code class="codeph">DBMS_SPACE</code>包的<code class="codeph">CREATE_TABLE_COST</code>过程允许您估计创建表的空间使用成本。
                     </p>
                     <div class="section">
                        <p>有关此过程的参数的详细信息，请参阅<a href="../arpls/DBMS_SPACE.html#ARPLS056" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                        <p>该程序有两种变体。第一个变体使用平均行大小来估计大小。第二个变体使用列信息来估计表大小。两种变体都需要输入以下值：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">TABLESPACE_NAME</code> ：将在其中创建对象的表空间。默认值为<code class="codeph">SYSTEM</code>表空间。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ROW_COUNT</code> ：表中预期的行数。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">PCT_FREE</code> ：您希望在每个块中保留的可用空间百分比，以便将来因更新而扩展现有行。
                              </p>
                           </li>
                        </ul>
                        <p>此外，第一个变体还需要<code class="codeph">AVG_ROW_SIZE</code>的值作为输入，这是预期的平均行大小（以字节为单位）。
                        </p>
                        <p>第二个变量还需要<code class="codeph">COLINFOS</code>每个预期列值， <code class="codeph">COLINFOS</code>是包含属性<code class="codeph">COL_TYPE</code> （列的数据类型）和<code class="codeph">COL_SIZE</code> （列中的字符数或字节数）的对象类型。
                        </p>
                        <p>该过程返回两个值：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">USED_BYTES</code> ：数据使用的实际字节数，包括块元数据的开销， <code class="codeph">PCT_FREE</code>空间等。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ALLOC_BYTES</code> ：考虑到表空间范围特征，预期为对象分配的空间量。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-8EDCE354-32FB-438C-AF0F-6834F6E6EFB3__GUID-C3B1BBD3-B33F-482C-A43C-614AC7025DB1">
                           <p class="notep1">注意：</p>
                           <p>分区表的任何新段的第一个范围的默认大小为8 MB而不是64 KB。这有助于提高分区表上的插入和查询的性能。尽管分区表将以较大的初始大小开始，但一旦插入了足够的数据，空间消耗将与先前版本中的相同。您可以通过在表的storage子句中设置<code class="codeph">INITIAL</code>大小来覆盖此缺省值。此新默认值仅适用于表分区和LOB分区。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977" title="Oracle数据库提供了两种计划数据库对象容量的方法：使用Cloud Control或DBMS_SPACE PL / SQL包。DBMS_SPACE包中的三个过程使您能够预测新对象的大小并监视现有数据库对象的大小。">数据库对象的容量规划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13458"></a><div class="props_rev_3"><a id="GUID-093AB2A6-F9AE-4145-A507-3FDE64B5BF00" name="GUID-093AB2A6-F9AE-4145-A507-3FDE64B5BF00"></a><h4 id="ADMIN-GUID-093AB2A6-F9AE-4145-A507-3FDE64B5BF00" class="sect4"><span class="enumeration_section">19.7.2</span>估计指数的空间使用</h4>
                  <div>
                     <p>该<code class="codeph">CREATE_INDEX_COST</code>的议事<code class="codeph">DBMS_SPACE</code>包可以让你创建估计在现有的表的索引空间使用成本。
                     </p>
                     <div class="section">
                        <p>该过程需要输入以下值：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DDL</code> ：将<code class="codeph">CREATE INDEX</code>的<code class="codeph">CREATE INDEX</code>语句。此DDL语句中指定的表必须是现有表。
                              </p>
                           </li>
                           <li>
                              <p>[可选] <code class="codeph">PLAN_TABLE</code> ：要使用的计划表的名称。默认值为<code class="codeph">NULL</code> 。</p>
                           </li>
                        </ul>
                        <p>此过程返回的结果取决于在段上收集的统计信息。因此，请务必在执行此过程之前不久获取统计信息。在没有最近的统计数据的情况下，该过程不会发出错误，但可能会返回不适当的结果。该过程返回以下值：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">USED_BYTES</code> ：表示实际索引数据的字节数。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ALLOC_BYTES</code> ：为表空间中的索引分配的空间量。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977" title="Oracle数据库提供了两种计划数据库对象容量的方法：使用Cloud Control或DBMS_SPACE PL / SQL包。DBMS_SPACE包中的三个过程使您能够预测新对象的大小并监视现有数据库对象的大小。">数据库对象的容量规划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13459"></a><div class="props_rev_3"><a id="GUID-A9590F06-F8D1-4795-B814-044BE6932A05" name="GUID-A9590F06-F8D1-4795-B814-044BE6932A05"></a><h4 id="ADMIN-GUID-A9590F06-F8D1-4795-B814-044BE6932A05" class="sect4"><span class="enumeration_section">19.7.3</span>获取对象增长趋势</h4>
                  <div>
                     <p><code class="codeph">DBMS_SPACE</code>包的<code class="codeph">OBJECT_GROWTH_TREND</code>函数生成一个包含一行或多行的表，其中每行描述在特定时间对象的空间使用情况。
                     </p>
                     <div class="section">
                        <p>该函数从自动工作负载存储库中检索空间使用总数，或计算当前空间使用情况，并将其与从自动工作负载存储库中检索到的历史空间使用更改相结合。有关此函数的参数的详细信息，请参阅<a href="../arpls/DBMS_SPACE.html#ARPLS68110" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                        </p>
                        <p>该函数需要输入以下值：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">OBJECT_OWNER</code> ：对象的所有者。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OBJECT_NAME</code> ：对象的名称。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">PARTITION_NAME</code> ：表或索引分区的名称是相关的。否则指定<code class="codeph">NULL</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OBJECT_TYPE</code> ：对象的类型。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">START_TIME</code> ： <code class="codeph">TIMESTAMP</code>值，指示增长趋势分析的开始。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">END_TIME</code> ： <code class="codeph">TIMESTAMP</code>值，表示增长趋势分析的结束。默认为“ <code class="codeph">NOW</code> ”。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">INTERVAL</code> ：报告间隔的长度，以分钟为单位，在此期间函数应检索空间使用信息。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SKIP_INTERPOLATED</code> ：确定函数是否应根据<code class="codeph">INTERVAL</code>之前和之后记录的统计信息（“ <code class="codeph">YES</code> ”）或“ <code class="codeph">NO</code> ”（“ <code class="codeph">NO</code> ”）省略值。当结果表将显示为表而不是图表时，此设置很有用，因为您可以更清楚地看到实际记录间隔与请求的报告间隔的关系。
                              </p>
                           </li>
                        </ul>
                        <p>该函数返回一个表，每一行都在一个时间间隔内提供对象的空间使用信息。如果返回表非常大，则结果是流水线的，以便另一个应用程序可以在生成时使用该信息。输出表包含以下列：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">TIMEPOINT</code> ： <code class="codeph">TIMESTAMP</code>值，指示报告间隔的时间。
                              </p>
                              <p>对于对象的最早记录统计信息之前的<code class="codeph">TIME</code>值，不会生成记录。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SPACE_USAGE</code> ：对象数据实际使用的字节数。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SPACE_ALLOC</code> ：此时分配给表空间中对象的字节数。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">QUALITY</code> ：一个值，表示请求的报告间隔与实际统计记录的匹配程度。此信息很有用，因为对象大小使用统计信息没有保证的报告间隔，并且实际报告间隔随时间和对象而变化。
                              </p>
                              <p><code class="codeph">QUALITY</code>列的值为：</p>
                           </li>
                           <li>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">GOOD</code> ： <code class="codeph">TIME</code>的值基于记录的统计数据的值，其中记录的时间戳在输入参数中指定的<code class="codeph">INTERVAL</code> 10％以内。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">INTERPOLATED</code> ：该值不符合<code class="codeph">GOOD</code>的标准，但是基于<code class="codeph">TIME</code>值之前和之后的记录统计数据。可以跨群集中的所有实例收集当前的内存中统计信息，并将其视为当前时间的“已记录”值。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">PROJECTION</code> ： <code class="codeph">TIME</code>的值是表格生成时的未来。在Oracle Real Application Clusters环境中，记录统计信息的规则允许每个实例独立选择要选择的对象。
                                    </p>
                                 </li>
                              </ul>
                              <p>此函数返回的输出是Oracle RAC环境中所有实例上记录的值的聚合。可以从<code class="codeph">GOOD</code>和<code class="codeph">INTERPOLATED</code>值的组合计算每个值。如果该值的至少80％来自<code class="codeph">GOOD</code>实例值，则返回的聚合值标记为<code class="codeph">GOOD</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-space-for-schema-objects.html#GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977" title="Oracle数据库提供了两种计划数据库对象容量的方法：使用Cloud Control或DBMS_SPACE PL / SQL包。DBMS_SPACE包中的三个过程使您能够预测新对象的大小并监视现有数据库对象的大小。">数据库对象的容量规划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
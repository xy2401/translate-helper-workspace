<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning.">
      <meta name="description" content="Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning.">
      <title>Managing Space for Schema Objects</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Administrator’s Guide ">
      <meta property="og:description" content="Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96348-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-schema-objects.html" title="Previous" type="text/html">
      <link rel="next" href="managing-tables.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="ADMIN">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-schema-objects.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="managing-tables.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="schema-objects.html" property="item" typeof="WebPage"><span property="name">Schema Objects</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Managing Space for Schema Objects</li>
            </ol>
            <a id="GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" name="GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565"></a><a id="ADMIN014"></a>
            
            <h2 id="ADMIN-GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" class="sect2"><span class="enumeration_chapter">19 </span> Managing Space for Schema Objects
            </h2>
         </header>
         <div class="ind">
            <p>Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning.</p>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE">Managing Tablespace Alerts</a><br>Oracle Database provides proactive help in managing disk space for tablespaces by alerting you when available space is running low. 
                  </li>
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE">Managing Resumable Space Allocation</a><br>You can suspend, and later resume, the execution of large database operations.
                  </li>
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-1F297567-4BEC-438E-9E13-683D2BB47F44">Reclaiming Unused Space</a><br>You can reclaim unused space. Segment Advisor, is an Oracle Database component that identifies segments that have space available for reclamation.
                  </li>
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-3B76FB24-BC76-43DD-9305-F11EEA138B09">Dropping Unused Object Storage</a><br>The <code class="codeph">DBMS_SPACE_ADMIN</code> package includes the <code class="codeph">DROP_EMPTY_SEGMENTS</code> procedure, which enables you to drop segments for empty tables and partitions that have been migrated from previous releases. This includes segments of dependent objects of the table, such as index segments, where possible. 
                  </li>
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-03E8BA75-995F-4584-AE3C-6AB70D9F21A4">Understanding Space Usage of Data Types</a><br>When creating tables and other data structures, you must know how much space they will require. Each data type has different space requirements.
                  </li>
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-2FB91EF7-B908-410E-B952-AF9A71CC25B1">Displaying Information About Space Usage for Schema Objects</a><br>Oracle Database provides data dictionary views and PL/SQL packages that allow you to display information about the space usage of schema objects.
                  </li>
                  <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977">Capacity Planning for Database Objects</a><br>Oracle Database provides two ways to plan capacity for database objects: with Cloud Control or with the <code class="codeph">DBMS_SPACE</code> PL/SQL package. Three procedures in the <code class="codeph">DBMS_SPACE</code> package enable you to predict the size of new objects and monitor the size of existing database objects.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="schema-objects.html#GUID-2DA8C61C-58B0-4892-8E5D-E7A9120BC120" title="You can create and manage schema objects in Oracle Database.">Schema Objects</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE" name="GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE"></a><h3 id="ADMIN-GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE" class="sect3"><span class="enumeration_section">19.1 </span>Managing Tablespace Alerts
               </h3>
               <p>Oracle Database provides proactive help in managing disk space for tablespaces by alerting you when available space is running low. </p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070">About Managing Tablespace Alerts</a><br>Two alert thresholds are defined by default: <span class="bold">warning</span> and <span class="bold">critical</span>. The warning threshold is the limit at which space is beginning to run low. The critical threshold is a serious limit that warrants your immediate attention. The database issues alerts at both thresholds.
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40">Setting Alert Thresholds</a><br>For each tablespace, you can set just percent-full thresholds, just free-space-remaining thresholds, or both types of thresholds simultaneously. Setting either type of threshold to zero disables it.
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-2C3676BA-5B9F-4A99-9530-1D79BA8AF893">Viewing Alerts</a><br>You view alerts by accessing a Database Home page in Cloud Control and viewing the Incidents and Problems section.
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-DE468FB1-C2F6-449B-AA55-2DCCB94912BE">Limitations</a><br>Threshold-based alerts have the some limitations.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning.">Managing Space for Schema Objects</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN10120"></a><div class="props_rev_3"><a id="GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070" name="GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070"></a><h4 id="ADMIN-GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070" class="sect4"><span class="enumeration_section">19.1.1 </span>About Managing Tablespace Alerts
                  </h4>
                  <div>
                     <p>Two alert thresholds are defined by default: <span class="bold">warning</span> and <span class="bold">critical</span>. The warning threshold is the limit at which space is beginning to run low. The critical threshold is a serious limit that warrants your immediate attention. The database issues alerts at both thresholds.
                     </p>
                     <p>There are two ways to specify alert thresholds for both locally managed and dictionary managed tablespaces:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>By percent full</p>
                           <p>For both warning and critical thresholds, when space used becomes greater than or equal to a percent of total space, an alert is issued.</p>
                        </li>
                        <li>
                           <p>By free space remaining (in kilobytes (KB))</p>
                           <p>For both warning and critical thresholds, when remaining space falls below an amount in KB, an alert is issued. Free-space-remaining thresholds are more useful for very large tablespaces.</p>
                        </li>
                     </ul>
                     <p>Alerts for locally managed tablespaces are server-generated. For dictionary managed tablespaces, Oracle Enterprise Manager Cloud Control (Cloud Control) provides this functionality. See <span class="q">"<a href="monitoring-the-database.html#GUID-2A91AF1F-A4FF-4D67-928B-BBCE09342331" title="A server-generated alert may contain suggestions for correcting the problem. Notifications are also provided when the problem condition has been cleared.">Monitoring a Database with Server-Generated Alerts</a>"</span> for more information.
                     </p>
                     <p>New tablespaces are assigned alert thresholds as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Locally managed tablespace</span>—When you create a new locally managed tablespace, it is assigned the default threshold values defined for the database. A newly created database has a default of 85% full for the warning threshold and 97% full for the critical threshold. Defaults for free space remaining thresholds for a new database are both zero (disabled). You can change these database defaults, as described later in this section.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Dictionary managed tablespace</span>—When you create a new dictionary managed tablespace, it is assigned the threshold values that Cloud Control lists for "All others" in the metrics categories "Tablespace Free Space (MB) (dictionary managed)" and "Tablespace Space Used (%) (dictionary managed)." You change these values on the Metric and Policy Settings page.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070__GUID-3F883C25-5BE0-4656-A6D9-A8D69B08110E">
                        <p class="notep1">Note:</p>
                        <p>In a database that is upgraded from Oracle 9<span class="italic">i</span> or earlier to Oracle Database 10<span class="italic">g</span> or later, database defaults for all locally managed tablespace alert thresholds are set to zero. This setting effectively disables the alert mechanism to avoid excessive alerts in a newly migrated database.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE" title="Oracle Database provides proactive help in managing disk space for tablespaces by alerting you when available space is running low.">Managing Tablespace Alerts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13998"></a><a id="ADMIN12621"></a><a id="ADMIN12622"></a><a id="ADMIN12623"></a><a id="ADMIN11567"></a><div class="props_rev_3"><a id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40" name="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40"></a><h4 id="ADMIN-GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40" class="sect4"><span class="enumeration_section">19.1.2 </span>Setting Alert Thresholds
                  </h4>
                  <div>
                     <p>For each tablespace, you can set just percent-full thresholds, just free-space-remaining thresholds, or both types of thresholds simultaneously. Setting either type of threshold to zero disables it.</p>
                     <div class="section">
                        <p>The ideal setting for the warning threshold is one that issues an alert early enough for you to resolve the problem before it becomes critical. The critical threshold should be one that issues an alert still early enough so that you can take immediate action to avoid loss of service.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-40EB6BD8-100A-43B1-80E6-3453C52BAD17">To set alert threshold values for locally managed tablespaces:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Do one of the following:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Use the Tablespaces page of Cloud Control.</p>
                                    <p>See the Cloud Control online help for information about changing the space usage alert thresholds for a tablespace.</p>
                                 </li>
                                 <li>
                                    <p>Use the <code class="codeph">DBMS_SERVER_ALERT.SET_THRESHOLD</code> package procedure.
                                    </p>
                                    <p>See <a href="../arpls/DBMS_SERVER_ALERT.html#ARPLS016" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for details.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-0D3F27BD-8C1C-4173-9754-7D3C17C28067">To set alert threshold values for dictionary managed tablespaces:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the Tablespaces page of Cloud Control.</p>
                              <p>See the Cloud Control online help for information about changing the space usage alert thresholds for a tablespace.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-2BF8A5B0-2967-47A0-99A9-E1C89070C796">Example - Setting an Alert Threshold with Cloud Control</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>You receive an alert in Cloud Control when a space usage threshold for a tablespace is reached. There are two types of space usage alerts that you can enable: <span class="bold">warning</span>, for when tablespace space is somewhat low, and <span class="bold">critical</span>, for when the tablespace is almost completely full and action must be taken immediately.
                        </p>
                        <p>For both warning and critical alerts, you can specify alert thresholds in the following ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>By space used (%)</p>
                              <p>When space used becomes greater than or equal to a percentage of total space, an alert is issued.</p>
                           </li>
                           <li>
                              <p>By free space (MB)</p>
                              <p>When remaining space falls below an amount (in MB), an alert is issued.</p>
                              <p>Free-space thresholds are more useful for large tablespaces. For example, for a 10 TB tablespace, setting the percentage full critical alert to as high as 99 percent means that the database would issue an alert when there is still 100 GB of free space remaining. Usually, 100 GB remaining would not be a critical situation, and the alert would not be useful. For this tablespace, it might be better to use a free-space threshold, which you could set to issue a critical alert when 5 GB of free space remains.</p>
                           </li>
                        </ul>
                        <p>For both warning and critical alerts for a tablespace, you can enable either the space used threshold or the free-space threshold, or you can enable both thresholds.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-ADF7CE56-3AFB-41BE-9A19-2A4C570E10ED">To change space usage alert thresholds for tablespaces:</p>
                        <ol>
                           <li>
                              <p>Go to the Database Home page.</p>
                           </li>
                           <li>
                              <p>From the <span class="bold">Administration</span> menu, select <span class="bold">Storage</span>, then <span class="bold">Tablespaces</span>.
                              </p>
                              <p>The Tablespaces page appears.</p>
                           </li>
                           <li>
                              <p>Select the tablespace whose threshold you want to change, and then click <span class="bold">Edit</span>. 
                              </p>
                              <p>The Edit Tablespace page appears, showing the General subpage.</p>
                           </li>
                           <li>
                              <p>Click the <span class="bold">Thresholds</span> tab at the top of the page to display the Thresholds subpage.
                              </p>
                           </li>
                           <li>
                              <p>In the Space Used (%) section, do one of the following:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Accept the default thresholds.</p>
                                 </li>
                                 <li>
                                    <p>Select <span class="bold">Specify Thresholds</span>, and then enter a <span class="bold">Warning (%)</span> threshold and a <span class="bold">Critical (%)</span> threshold.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Select <span class="bold">Disable Thresholds</span> to disable the percentage full thresholds.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>In the Free Space (MB) section, do one of the following:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Accept the default thresholds.</p>
                                 </li>
                                 <li>
                                    <p>Select <span class="bold">Specify Thresholds</span>, and then enter a <span class="bold">Warning (MB)</span> threshold and a <span class="bold">Critical (MB)</span> threshold.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Select <span class="bold">Disable Thresholds</span> to disable the threshold for free space remaining.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Click <span class="bold">Apply</span>. 
                              </p>
                              <p>A confirmation message appears.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-EECEB2B5-39D0-4207-8915-DBB566D79D38">Example—Setting an Alert Threshold Value with a Package Procedure</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The following example sets the free-space-remaining thresholds in the <code class="codeph">USERS</code> tablespace to 10 MB (warning) and 2 MB (critical), and disables the percent-full thresholds. The <code class="codeph">USERS</code> tablespace is a locally managed tablespace.
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
DBMS_SERVER_ALERT.SET_THRESHOLD(
   metrics_id              =&gt; DBMS_SERVER_ALERT.TABLESPACE_BYT_FREE,
   warning_operator        =&gt; DBMS_SERVER_ALERT.OPERATOR_LE,
   warning_value           =&gt; '10240',
   critical_operator       =&gt; DBMS_SERVER_ALERT.OPERATOR_LE,
   critical_value          =&gt; '2048',
   observation_period      =&gt; 1,
   consecutive_occurrences =&gt; 1,
   instance_name           =&gt; NULL,
   object_type             =&gt; DBMS_SERVER_ALERT.OBJECT_TYPE_TABLESPACE,
   object_name             =&gt; 'USERS');

DBMS_SERVER_ALERT.SET_THRESHOLD(
   metrics_id              =&gt; DBMS_SERVER_ALERT.TABLESPACE_PCT_FULL,
   warning_operator        =&gt; DBMS_SERVER_ALERT.OPERATOR_GT,
   warning_value           =&gt; '0',
   critical_operator       =&gt; DBMS_SERVER_ALERT.OPERATOR_GT,
   critical_value          =&gt; '0',
   observation_period      =&gt; 1,
   consecutive_occurrences =&gt; 1,
   instance_name           =&gt; NULL,
   object_type             =&gt; DBMS_SERVER_ALERT.OBJECT_TYPE_TABLESPACE,
   object_name             =&gt; 'USERS');
END;
/</pre><div class="infoboxnote" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-5CB2A2C8-56CA-47C9-B34C-5DCCAA00A90B">
                           <p class="notep1">Note:</p>
                           <p>When setting nonzero values for percent-full thresholds, use the greater-than-or-equal-to operator, <code class="codeph">OPERATOR_GE</code>.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-9E08FB29-B426-4313-ACCF-FDC3774CACB4">Restoring a Tablespace to Database Default Thresholds</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>After explicitly setting values for locally managed tablespace alert thresholds, you can cause the values to revert to the database defaults by setting them to <code class="codeph">NULL</code> with <code class="codeph">DBMS_SERVER_ALERT.SET_THRESHOLD</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A2FDF6-937E-4E3A-B9A6-3830FAD32B40__GUID-136FD5DC-2041-4261-A597-5E507C595F32">Modifying Database Default Thresholds</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>To modify database default thresholds for locally managed tablespaces, invoke <code class="codeph">DBMS_SERVER_ALERT.SET_THRESHOLD</code> as shown in the previous example, but set <code class="codeph">object_name</code> to <code class="codeph">NULL</code>. All tablespaces that use the database default are then switched to the new default.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE" title="Oracle Database provides proactive help in managing disk space for tablespaces by alerting you when available space is running low.">Managing Tablespace Alerts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11568"></a><div class="props_rev_3"><a id="GUID-2C3676BA-5B9F-4A99-9530-1D79BA8AF893" name="GUID-2C3676BA-5B9F-4A99-9530-1D79BA8AF893"></a><h4 id="ADMIN-GUID-2C3676BA-5B9F-4A99-9530-1D79BA8AF893" class="sect4"><span class="enumeration_section">19.1.3 </span>Viewing Alerts
                  </h4>
                  <div>
                     <p>You view alerts by accessing a Database Home page in Cloud Control and viewing the Incidents and Problems section.</p>
                     <div class="section">
                        <div class="figure" id="GUID-2C3676BA-5B9F-4A99-9530-1D79BA8AF893__GUID-1D1733B1-2667-4B64-9DCC-6CBE9632AB0C"><img src="img/alerts_tablespace_full.gif" height="229" width="605" alt="Description of alerts_tablespace_full.gif follows" title="Description of alerts_tablespace_full.gif follows" longdesc="img_text/alerts_tablespace_full.html"><br><a href="img_text/alerts_tablespace_full.html">Description of the illustration alerts_tablespace_full.gif</a></div>
                        <!-- class="figure" -->
                        <p>You can also view alerts for locally managed tablespaces with the <code class="codeph">DBA_OUTSTANDING_ALERTS</code> view. See <span class="q">"<a href="monitoring-the-database.html#GUID-865789BF-8011-45D6-8866-E9DA154E66B1" title="You can query data dictionary views for information about server-generated alerts.">Server-Generated Alerts Data Dictionary Views</a>"</span> for more information.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE" title="Oracle Database provides proactive help in managing disk space for tablespaces by alerting you when available space is running low.">Managing Tablespace Alerts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11569"></a><div class="props_rev_3"><a id="GUID-DE468FB1-C2F6-449B-AA55-2DCCB94912BE" name="GUID-DE468FB1-C2F6-449B-AA55-2DCCB94912BE"></a><h4 id="ADMIN-GUID-DE468FB1-C2F6-449B-AA55-2DCCB94912BE" class="sect4"><span class="enumeration_section">19.1.4 </span>Limitations
                  </h4>
                  <div>
                     <p>Threshold-based alerts have the some limitations.</p>
                     <p>These limitations include the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Alerts are not issued for locally managed tablespaces that are offline or in read-only mode. However, the database reactivates the alert system for such tablespaces after they become read/write or available.</p>
                        </li>
                        <li>
                           <p>When you take a tablespace offline or put it in read-only mode, you should disable the alerts for the tablespace by setting the thresholds to zero. You can then reenable the alerts by resetting the thresholds when the tablespace is once again online and in read/write mode.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-DE468FB1-C2F6-449B-AA55-2DCCB94912BE__GUID-C67B433F-3692-4688-A069-1A06B2D5D6B3">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="monitoring-the-database.html#GUID-2A91AF1F-A4FF-4D67-928B-BBCE09342331" title="A server-generated alert may contain suggestions for correcting the problem. Notifications are also provided when the problem condition has been cleared.">Monitoring a Database with Server-Generated Alerts</a>"</span> for additional information on server-generated alerts in general
                              </p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SERVER_ALERT.html#ARPLS016" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information on the procedures of the <code class="codeph">DBMS_SERVER_ALERT</code> package and how to use them
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="managing-space-for-schema-objects.html#GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" title="You can reclaim unused space. Segment Advisor, is an Oracle Database component that identifies segments that have space available for reclamation.">Reclaiming Unused Space</a>"</span> for various ways to reclaim space that is no longer being used in the tablespace
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="managing-tables.html#GUID-82E62BDB-E886-4EF9-943C-C62D632E499B" title="If you decide that you are never going to restore an item from the recycle bin, then you can use the PURGE statement to remove the items and their associated objects from the recycle bin and release their storage space. You need the same privileges as if you were dropping the item.">Purging Objects in the Recycle Bin</a>"</span> for information on reclaiming recycle bin space 
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-FDC89B72-4F57-4E49-B0D3-A7999FD8BBAE" title="Oracle Database provides proactive help in managing disk space for tablespaces by alerting you when available space is running low.">Managing Tablespace Alerts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11581"></a><div class="props_rev_3"><a id="GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" name="GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE"></a><h3 id="ADMIN-GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" class="sect3"><span class="enumeration_section">19.2 </span>Managing Resumable Space Allocation
               </h3>
               <p>You can suspend, and later resume, the execution of large database operations.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9">Resumable Space Allocation Overview</a><br>Oracle Database provides a means for suspending, and later resuming, the execution of large database operations in the event of space allocation failures. Therefore, you can take corrective action instead of the Oracle Database server returning an error to the user. After the error condition is corrected, the suspended operation automatically resumes. This feature is called <span class="bold">resumable space allocation</span>. The statements that are affected are called resumable statements.
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-96651685-7270-4165-ADEC-433AC6465AEF">Enabling and Disabling Resumable Space Allocation</a><br>You enable and disable resumable space allocation by running SQL statements and setting certain initialization parameters.
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-51FC90D4-2AD0-4F4C-8FAC-65DD1A8F7F93">Using a LOGON Trigger to Set Default Resumable Mode</a><br>Another method of setting default resumable mode, other than setting the <code class="codeph">RESUMABLE_TIMEOUT</code> initialization parameter, is that you can register a database level <code class="codeph">LOGON</code> trigger to alter a user's session to enable resumable and set a timeout interval.
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8">Detecting Suspended Statements</a><br>When a resumable statement is suspended, the error is not raised to the client. In order for corrective action to be taken, Oracle Database provides alternative methods for notifying users of the error and for providing information about the circumstances.
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-1ED25C9D-4D0D-47DA-AEFE-14D6F8BFD742">Operation-Suspended Alert</a><br>When a resumable session is suspended, an operation-suspended alert is issued on the object that needs allocation of resource for the operation to complete.
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-7699310D-784F-4AB7-B3E0-05B2DBF59A60">Resumable Space Allocation Example: Registering an AFTER SUSPEND Trigger</a><br>An example illustrates how to create a system wide <code class="codeph">AFTER SUSPEND</code> trigger and register it as user <code class="codeph">SYS</code> at the database level. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning.">Managing Space for Schema Objects</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11582"></a><div class="props_rev_3"><a id="GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" name="GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9"></a><h4 id="ADMIN-GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" class="sect4"><span class="enumeration_section">19.2.1 </span>Resumable Space Allocation Overview
                  </h4>
                  <p>Oracle Database provides a means for suspending, and later resuming, the execution of large database operations in the event of space allocation failures. Therefore, you can take corrective action instead of the Oracle Database server returning an error to the user. After the error condition is corrected, the suspended operation automatically resumes. This feature is called <span class="bold">resumable space allocation</span>. The statements that are affected are called resumable statements.
                  </p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-46AE3FD8-95D4-4CFA-9F3C-B80C5AFDE75B">How Resumable Space Allocation Works</a><br>An overview shows how resumable space allocation works.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-BF57AB3A-C6CD-41D1-988B-BB5FC1E986D7">What Operations are Resumable?</a><br>Some operations are resumable.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-7CD38BF4-75DD-425C-9DCA-FA6DE20FBFD7">What Errors are Correctable?</a><br>Some errors are correctable.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-77F39E22-4329-432C-8F43-D21411454A72">Resumable Space Allocation and Distributed Operations</a><br>In a distributed environment, if a user enables or disables resumable space allocation, or a DBA alters the <code class="codeph">RESUMABLE_TIMEOUT</code> initialization parameter, then the local instance is affected. <code class="codeph">RESUMABLE</code> cannot be enabled remotely.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-B76A2316-88AC-4740-A552-183CE8F11E75">Parallel Execution and Resumable Space Allocation</a><br>In parallel execution, if one of the parallel execution server processes encounters a correctable error, then that server process suspends its execution.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" title="You can suspend, and later resume, the execution of large database operations.">Managing Resumable Space Allocation</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11583"></a><div class="props_rev_3"><a id="GUID-46AE3FD8-95D4-4CFA-9F3C-B80C5AFDE75B" name="GUID-46AE3FD8-95D4-4CFA-9F3C-B80C5AFDE75B"></a><h5 id="ADMIN-GUID-46AE3FD8-95D4-4CFA-9F3C-B80C5AFDE75B" class="sect5"><span class="enumeration_section">19.2.1.1 </span>How Resumable Space Allocation Works
                     </h5>
                     <div>
                        <p>An overview shows how resumable space allocation works.</p>
                        <ol>
                           <li>
                              <p>A statement executes in resumable mode only if its session has been enabled for resumable space allocation by one of the following actions:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">ALTER SESSION ENABLE RESUMABLE</code> statement is issued in the session before the statement executes when the <code class="codeph">RESUMABLE_TIMEOUT</code> initialization parameter is set to a nonzero value.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">ALTER SESSION ENABLE RESUMABLE TIMEOUT</code> <span class="italic"><code class="codeph">timeout_value</code></span> statement is issued in the session before the statement executes, and the <span class="italic"><code class="codeph">timeout_value</code></span> is a nonzero value.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>A resumable statement is suspended when one of the following conditions occur (these conditions result in corresponding errors being signalled for non-resumable statements):</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Out of space condition</p>
                                 </li>
                                 <li>
                                    <p>Maximum extents reached condition</p>
                                 </li>
                                 <li>
                                    <p>Space quota exceeded condition.</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>When the execution of a resumable statement is suspended, there are mechanisms to perform user supplied operations, log errors, and query the status of the statement execution. When a resumable statement is suspended the following actions are taken:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The error is reported in the alert log.</p>
                                 </li>
                                 <li>
                                    <p>The system issues the Resumable Session Suspended alert.</p>
                                 </li>
                                 <li>
                                    <p>If the user registered a trigger on the <code class="codeph">AFTER SUSPEND</code> system event, the user trigger is executed. A user supplied PL/SQL procedure can access the error message data using the <code class="codeph">DBMS_RESUMABLE</code> package and the <code class="codeph">DBA_</code> or <code class="codeph">USER_RESUMABLE</code> view.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Suspending a statement automatically results in suspending the transaction. Thus all transactional resources are held through a statement suspend and resume.</p>
                           </li>
                           <li>
                              <p>When the error condition is resolved (for example, as a result of user intervention or perhaps sort space released by other queries), the suspended statement automatically resumes execution and the Resumable Session Suspended alert is cleared.</p>
                           </li>
                           <li>
                              <p>A suspended statement can be forced to throw the exception using the <code class="codeph">DBMS_RESUMABLE.ABORT()</code> procedure. This procedure can be called by a DBA, or by the user who issued the statement.
                              </p>
                           </li>
                           <li>
                              <p>A suspension time out interval, specified by the <code class="codeph">RESUMABLE_TIMEOUT</code> initialization parameter or by the timeout value in the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">ENABLE</code> <code class="codeph">RESUMABLE</code> <code class="codeph">TIMEOUT</code> statement, is associated with resumable statements. A resumable statement that is suspended for the timeout interval wakes up and returns the exception to the user if the error condition is not resolved within the timeout interval.
                              </p>
                           </li>
                           <li>
                              <p>A resumable statement can be suspended and resumed multiple times during execution.</p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" title="Oracle Database provides a means for suspending, and later resuming, the execution of large database operations in the event of space allocation failures. Therefore, you can take corrective action instead of the Oracle Database server returning an error to the user. After the error condition is corrected, the suspended operation automatically resumes. This feature is called resumable space allocation. The statements that are affected are called resumable statements.">Resumable Space Allocation Overview</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11584"></a><div class="props_rev_3"><a id="GUID-BF57AB3A-C6CD-41D1-988B-BB5FC1E986D7" name="GUID-BF57AB3A-C6CD-41D1-988B-BB5FC1E986D7"></a><h5 id="ADMIN-GUID-BF57AB3A-C6CD-41D1-988B-BB5FC1E986D7" class="sect5"><span class="enumeration_section">19.2.1.2 </span>What Operations are Resumable?
                     </h5>
                     <div>
                        <p>Some operations are resumable.</p>
                        <p>The following operations are resumable:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Queries</p>
                              <p><code class="codeph">SELECT</code> statements that run out of temporary space (for sort areas) are candidates for resumable execution. When using OCI, the calls <code class="codeph">OCIStmtExecute()</code> and <code class="codeph">OCIStmtFetch()</code> are candidates.
                              </p>
                           </li>
                           <li>
                              <p>DML</p>
                              <p><code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, and <code class="codeph">DELETE</code> statements are candidates. The interface used to execute them does not matter; it can be OCI, PL/SQL, or another interface. Also, <code class="codeph">INSERT INTO...SELECT</code> from external tables can be resumable.
                              </p>
                           </li>
                           <li>
                              <p>Import/Export</p>
                              <p>As for SQL*Loader, a command line parameter controls whether statements are resumable after recoverable errors. </p>
                           </li>
                           <li>
                              <p>DDL</p>
                              <p>The following statements are candidates for resumable execution:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code> ... <code class="codeph">AS</code> <code class="codeph">SELECT</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CREATE</code> <code class="codeph">INDEX</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ... <code class="codeph">REBUILD</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ... <code class="codeph">MOVE</code> <code class="codeph">PARTITION</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ... <code class="codeph">SPLIT</code> <code class="codeph">PARTITION</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ... <code class="codeph">REBUILD</code> <code class="codeph">PARTITION</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ... <code class="codeph">SPLIT</code> <code class="codeph">PARTITION</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code></p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" title="Oracle Database provides a means for suspending, and later resuming, the execution of large database operations in the event of space allocation failures. Therefore, you can take corrective action instead of the Oracle Database server returning an error to the user. After the error condition is corrected, the suspended operation automatically resumes. This feature is called resumable space allocation. The statements that are affected are called resumable statements.">Resumable Space Allocation Overview</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11585"></a><div class="props_rev_3"><a id="GUID-7CD38BF4-75DD-425C-9DCA-FA6DE20FBFD7" name="GUID-7CD38BF4-75DD-425C-9DCA-FA6DE20FBFD7"></a><h5 id="ADMIN-GUID-7CD38BF4-75DD-425C-9DCA-FA6DE20FBFD7" class="sect5"><span class="enumeration_section">19.2.1.3 </span>What Errors are Correctable?
                     </h5>
                     <div>
                        <p>Some errors are correctable.</p>
                        <p>There are three classes of correctable errors:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Out of space condition </p>
                              <p>The operation cannot acquire any more extents for a table/index/temporary segment/undo segment/cluster/LOB/table partition/index partition in a tablespace. For example, the following errors fall in this category:</p><pre class="oac_no_warn" dir="ltr">ORA-01653 unable to extend table ... in tablespace ...
ORA-01654 unable to extend index ... in tablespace ...
</pre></li>
                           <li>
                              <p>Maximum extents reached condition</p>
                              <p>The number of extents in a table/index/temporary segment/undo segment/cluster/LOB/table partition/index partition equals the maximum extents defined on the object. For example, the following errors fall in this category:</p><pre class="oac_no_warn" dir="ltr">ORA-01631 max # extents ... reached in table ...
ORA-01632 max # extents ... reached in index ...
</pre></li>
                           <li>
                              <p>Space quota exceeded condition</p>
                              <p>The user has exceeded his assigned space quota in the tablespace. Specifically, this is noted by the following error:</p><pre class="oac_no_warn" dir="ltr">ORA-01536 space quote exceeded for tablespace <span class="italic">string</span> </pre></li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" title="Oracle Database provides a means for suspending, and later resuming, the execution of large database operations in the event of space allocation failures. Therefore, you can take corrective action instead of the Oracle Database server returning an error to the user. After the error condition is corrected, the suspended operation automatically resumes. This feature is called resumable space allocation. The statements that are affected are called resumable statements.">Resumable Space Allocation Overview</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11586"></a><div class="props_rev_3"><a id="GUID-77F39E22-4329-432C-8F43-D21411454A72" name="GUID-77F39E22-4329-432C-8F43-D21411454A72"></a><h5 id="ADMIN-GUID-77F39E22-4329-432C-8F43-D21411454A72" class="sect5"><span class="enumeration_section">19.2.1.4 </span>Resumable Space Allocation and Distributed Operations
                     </h5>
                     <div>
                        <p>In a distributed environment, if a user enables or disables resumable space allocation, or a DBA alters the <code class="codeph">RESUMABLE_TIMEOUT</code> initialization parameter, then the local instance is affected. <code class="codeph">RESUMABLE</code> cannot be enabled remotely.
                        </p>
                        <p>In a distributed transaction, sessions on remote instances are suspended only if the remote instance has already enabled <code class="codeph">RESUMABLE</code> on the instance or sessions at its site.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" title="Oracle Database provides a means for suspending, and later resuming, the execution of large database operations in the event of space allocation failures. Therefore, you can take corrective action instead of the Oracle Database server returning an error to the user. After the error condition is corrected, the suspended operation automatically resumes. This feature is called resumable space allocation. The statements that are affected are called resumable statements.">Resumable Space Allocation Overview</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11587"></a><div class="props_rev_3"><a id="GUID-B76A2316-88AC-4740-A552-183CE8F11E75" name="GUID-B76A2316-88AC-4740-A552-183CE8F11E75"></a><h5 id="ADMIN-GUID-B76A2316-88AC-4740-A552-183CE8F11E75" class="sect5"><span class="enumeration_section">19.2.1.5 </span>Parallel Execution and Resumable Space Allocation 
                     </h5>
                     <div>
                        <p>In parallel execution, if one of the parallel execution server processes encounters a correctable error, then that server process suspends its execution.</p>
                        <p>Other parallel execution server processes will continue executing their respective tasks, until either they encounter an error or are blocked (directly or indirectly) by the suspended server process. When the correctable error is resolved, the suspended process resumes execution and the parallel operation continues execution. If the suspended operation is terminated, then the parallel operation aborts, throwing the error to the user.</p>
                        <p>Different parallel execution server processes may encounter one or more correctable errors. This may result in firing an <code class="codeph">AFTER SUSPEND</code> trigger multiple times, in parallel. Also, if a parallel execution server process encounters a non-correctable error while another parallel execution server process is suspended, the suspended statement is immediately aborted.
                        </p>
                        <p>For parallel execution, every parallel execution coordinator and server process has its own entry in the <code class="codeph">DBA</code>_ or <code class="codeph">USER_RESUMABLE</code> view.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-2FEDD145-E177-4B32-B7CD-8C5DF15155A9" title="Oracle Database provides a means for suspending, and later resuming, the execution of large database operations in the event of space allocation failures. Therefore, you can take corrective action instead of the Oracle Database server returning an error to the user. After the error condition is corrected, the suspended operation automatically resumes. This feature is called resumable space allocation. The statements that are affected are called resumable statements.">Resumable Space Allocation Overview</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-96651685-7270-4165-ADEC-433AC6465AEF" name="GUID-96651685-7270-4165-ADEC-433AC6465AEF"></a><h4 id="ADMIN-GUID-96651685-7270-4165-ADEC-433AC6465AEF" class="sect4"><span class="enumeration_section">19.2.2 </span>Enabling and Disabling Resumable Space Allocation
                  </h4>
                  <p>You enable and disable resumable space allocation by running SQL statements and setting certain initialization parameters.</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-28E0D9D2-B5C1-4DDD-8148-5034C66CDCAA">About Enabling and Disabling Resumable Space Allocation</a><br>Resumable space allocation is only possible when statements are executed within a session that has resumable mode enabled.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-0ED485D5-7F97-4F62-AA3D-B6A0DAF57E05">Setting the RESUMABLE_TIMEOUT Initialization Parameter</a><br>You can specify a default system wide timeout interval by setting the <code class="codeph">RESUMABLE_TIMEOUT</code> initialization parameter.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE">Using ALTER SESSION to Enable and Disable Resumable Space Allocation</a><br>Within a session, a user can issue the <code class="codeph">ALTER SESSION SET</code> statement to set the <code class="codeph">RESUMABLE_TIMEOUT</code> initialization parameter and enable resumable space allocation, change a timeout value, or to disable resumable mode.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" title="You can suspend, and later resume, the execution of large database operations.">Managing Resumable Space Allocation</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11588"></a><div class="props_rev_3"><a id="GUID-28E0D9D2-B5C1-4DDD-8148-5034C66CDCAA" name="GUID-28E0D9D2-B5C1-4DDD-8148-5034C66CDCAA"></a><h5 id="ADMIN-GUID-28E0D9D2-B5C1-4DDD-8148-5034C66CDCAA" class="sect5"><span class="enumeration_section">19.2.2.1 </span>About Enabling and Disabling Resumable Space Allocation
                     </h5>
                     <div>
                        <p>Resumable space allocation is only possible when statements are executed within a session that has resumable mode enabled.</p>
                        <p></p>
                        <p>Resumable space allocation is enabled for a session when the <code class="codeph">ALTER SESSION ENABLE RESUMABLE</code> statement is executed, and the <code class="codeph">RESUMABLE_TIMEOUT</code> initialization parameter is set to a non-zero value for the session. When the <code class="codeph">RESUMABLE_TIMEOUT</code> initialization parameter is set at the system level, it is the default for an <code class="codeph">ALTER SESSION ENABLE RESUMABLE</code> statement that does not specify a timeout value. When an <code class="codeph">ALTER SESSION ENABLE RESUMABLE</code> statement specifies a timeout value, it overrides the system default.
                        </p>
                        <p>Resumable space allocation is disabled for a session in all of the following cases when the <code class="codeph">ALTER SESSION ENABLE RESUMABLE</code> statement is executed:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The session does not execute an <code class="codeph">ALTER SESSION ENABLE RESUMABLE</code> statement.
                              </p>
                           </li>
                           <li>
                              <p>The session executes an <code class="codeph">ALTER SESSION DISABLE RESUMABLE</code> statement.
                              </p>
                           </li>
                           <li>
                              <p>The session executes an <code class="codeph">ALTER SESSION ENABLE RESUMABLE</code> statement, and the timeout value is zero.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-28E0D9D2-B5C1-4DDD-8148-5034C66CDCAA__GUID-64973D30-6C21-407C-A0E0-996F925E2EF3">
                           <p class="notep1">Note:</p>
                           <p>Because suspended statements can hold up some system resources, users must be granted the <code class="codeph">RESUMABLE</code> system privilege before they are allowed to enable resumable space allocation and execute resumable statements.
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-96651685-7270-4165-ADEC-433AC6465AEF" title="You enable and disable resumable space allocation by running SQL statements and setting certain initialization parameters.">Enabling and Disabling Resumable Space Allocation</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11589"></a><div class="props_rev_3"><a id="GUID-0ED485D5-7F97-4F62-AA3D-B6A0DAF57E05" name="GUID-0ED485D5-7F97-4F62-AA3D-B6A0DAF57E05"></a><h5 id="ADMIN-GUID-0ED485D5-7F97-4F62-AA3D-B6A0DAF57E05" class="sect5"><span class="enumeration_section">19.2.2.2 </span>Setting the RESUMABLE_TIMEOUT Initialization Parameter 
                     </h5>
                     <div>
                        <p>You can specify a default system wide timeout interval by setting the <code class="codeph">RESUMABLE_TIMEOUT</code> initialization parameter.
                        </p>
                        <div class="section">
                           <p>For example, the following setting of the <code class="codeph">RESUMABLE_TIMEOUT</code> parameter in the initialization parameter file sets the timeout period to 1 hour:
                           </p><pre class="oac_no_warn" dir="ltr">RESUMABLE_TIMEOUT  = 3600
</pre><p>If this parameter is set to 0, then resumable space allocation is disabled even for sessions that run an <code class="codeph">ALTER SESSION ENABLE RESUMABLE</code> statement without a timeout value.
                           </p>
                           <p>You can also use the <code class="codeph">ALTER SYSTEM SET</code> statement to change the value of this parameter at the system level. For example, the following statement disables resumable space allocation for all sessions that run an <code class="codeph">ALTER SESSION ENABLE RESUMABLE</code> statement without a timeout value:
                           </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET RESUMABLE_TIMEOUT=0;
</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-96651685-7270-4165-ADEC-433AC6465AEF" title="You enable and disable resumable space allocation by running SQL statements and setting certain initialization parameters.">Enabling and Disabling Resumable Space Allocation</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11590"></a><div class="props_rev_3"><a id="GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE" name="GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE"></a><h5 id="ADMIN-GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE" class="sect5"><span class="enumeration_section">19.2.2.3 </span>Using ALTER SESSION to Enable and Disable Resumable Space Allocation
                     </h5>
                     <div>
                        <p>Within a session, a user can issue the <code class="codeph">ALTER SESSION SET</code> statement to set the <code class="codeph">RESUMABLE_TIMEOUT</code> initialization parameter and enable resumable space allocation, change a timeout value, or to disable resumable mode.
                        </p>
                        <div class="section">
                           <p>A user can enable resumable mode for a session with the default system <code class="codeph">RESUMABLE_TIMEOUT</code> value using the following SQL statement:
                           </p><pre class="oac_no_warn" dir="ltr">ALTER SESSION ENABLE RESUMABLE;
</pre><p>To disable resumable mode, a user issues the following statement:</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION DISABLE RESUMABLE;
</pre><p>The default for a new session is resumable mode disabled.</p>
                           <p>The user can also specify a timeout interval, and can provide a name used to identify a resumable statement. These are discussed separately in following sections.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-1F5A39B2-0DA8-4356-B9F1-9C8B67448624">Specifying a Timeout Interval</a><br>When you enable resumable mode, you can set a timeout period, after which a suspended statement will error if no intervention has taken place. 
                           </li>
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-C938CC8D-242E-4E45-B41F-04DF58B989EC">Naming Resumable Statements</a><br>Resumable statements can be identified by name.
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE__GUID-8CC17B27-3881-48C5-ACEF-CBDB9ACAC9F9">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="managing-space-for-schema-objects.html#GUID-51FC90D4-2AD0-4F4C-8FAC-65DD1A8F7F93" title="Another method of setting default resumable mode, other than setting the RESUMABLE_TIMEOUT initialization parameter, is that you can register a database level LOGON trigger to alter a user's session to enable resumable and set a timeout interval.">Using a LOGON Trigger to Set Default Resumable Mode</a>"</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-96651685-7270-4165-ADEC-433AC6465AEF" title="You enable and disable resumable space allocation by running SQL statements and setting certain initialization parameters.">Enabling and Disabling Resumable Space Allocation</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN11591"></a><div class="props_rev_3"><a id="GUID-1F5A39B2-0DA8-4356-B9F1-9C8B67448624" name="GUID-1F5A39B2-0DA8-4356-B9F1-9C8B67448624"></a><h6 id="ADMIN-GUID-1F5A39B2-0DA8-4356-B9F1-9C8B67448624" class="sect6"><span class="enumeration_section">19.2.2.3.1 </span>Specifying a Timeout Interval
                        </h6>
                        <div>
                           <p>When you enable resumable mode, you can set a timeout period, after which a suspended statement will error if no intervention has taken place. </p>
                           <div class="section">
                              <p>The following statement specifies that resumable transactions will time out and error after 3600 seconds:</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION ENABLE RESUMABLE TIMEOUT 3600;
</pre><p>The value of <code class="codeph">TIMEOUT</code> remains in effect until it is changed by another <code class="codeph">ALTER SESSION ENABLE RESUMABLE</code> statement, it is changed by another means, or the session ends. If the <code class="codeph">RESUMABLE_TIMEOUT</code> initialization parameter is not set, then the default timeout interval when using the <code class="codeph">ENABLE RESUMABLE TIMEOUT</code> clause to enable resumable mode is 7200 seconds. 
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-1F5A39B2-0DA8-4356-B9F1-9C8B67448624__GUID-433E572D-E71A-420C-86CF-4D4A102C84E8">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="managing-space-for-schema-objects.html#GUID-0ED485D5-7F97-4F62-AA3D-B6A0DAF57E05" title="You can specify a default system wide timeout interval by setting the RESUMABLE_TIMEOUT initialization parameter.">Setting the RESUMABLE_TIMEOUT Initialization Parameter </a>"</span> for other methods of changing the timeout interval for resumable space allocation
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE" title="Within a session, a user can issue the ALTER SESSION SET statement to set the RESUMABLE_TIMEOUT initialization parameter and enable resumable space allocation, change a timeout value, or to disable resumable mode.">Using ALTER SESSION to Enable and Disable Resumable Space Allocation</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN11592"></a><div class="props_rev_3"><a id="GUID-C938CC8D-242E-4E45-B41F-04DF58B989EC" name="GUID-C938CC8D-242E-4E45-B41F-04DF58B989EC"></a><h6 id="ADMIN-GUID-C938CC8D-242E-4E45-B41F-04DF58B989EC" class="sect6"><span class="enumeration_section">19.2.2.3.2 </span>Naming Resumable Statements
                        </h6>
                        <div>
                           <p>Resumable statements can be identified by name.</p>
                           <div class="section">
                              <p>The following statement assigns a name to resumable statements:</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION ENABLE RESUMABLE TIMEOUT 3600 NAME 'insert into table';
</pre><p>The <code class="codeph">NAME</code> value remains in effect until it is changed by another <code class="codeph">ALTER SESSION ENABLE RESUMABLE</code> statement, or the session ends. The default value for <code class="codeph">NAME</code> is '<code class="codeph">User</code> <span class="italic"><code class="codeph">username</code></span>(<span class="italic"><code class="codeph">userid</code></span>), <code class="codeph">Session</code> <span class="italic"><code class="codeph">sessionid</code></span>, <code class="codeph">Instance</code> <span class="italic"><code class="codeph">instanceid</code></span>'.
                              </p>
                              <p>The name of the statement is used to identify the resumable statement in the <code class="codeph">DBA_RESUMABLE</code> and <code class="codeph">USER_RESUMABLE</code> views. 
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-078333DC-C1A8-40C8-B811-7D0B0103FCCE" title="Within a session, a user can issue the ALTER SESSION SET statement to set the RESUMABLE_TIMEOUT initialization parameter and enable resumable space allocation, change a timeout value, or to disable resumable mode.">Using ALTER SESSION to Enable and Disable Resumable Space Allocation</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div><a id="ADMIN11593"></a><div class="props_rev_3"><a id="GUID-51FC90D4-2AD0-4F4C-8FAC-65DD1A8F7F93" name="GUID-51FC90D4-2AD0-4F4C-8FAC-65DD1A8F7F93"></a><h4 id="ADMIN-GUID-51FC90D4-2AD0-4F4C-8FAC-65DD1A8F7F93" class="sect4"><span class="enumeration_section">19.2.3 </span>Using a LOGON Trigger to Set Default Resumable Mode
                  </h4>
                  <div>
                     <p>Another method of setting default resumable mode, other than setting the <code class="codeph">RESUMABLE_TIMEOUT</code> initialization parameter, is that you can register a database level <code class="codeph">LOGON</code> trigger to alter a user's session to enable resumable and set a timeout interval.
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-51FC90D4-2AD0-4F4C-8FAC-65DD1A8F7F93__GUID-5CC52FC2-5E9D-400B-879D-6F2FB108E8D3">
                           <p class="notep1">Note:</p>
                           <p>If there are multiple triggers registered that change default mode and timeout for resumable statements, the result will be unspecified because Oracle Database does not guarantee the order of trigger invocation.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" title="You can suspend, and later resume, the execution of large database operations.">Managing Resumable Space Allocation</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11594"></a><div class="props_rev_3"><a id="GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8" name="GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8"></a><h4 id="ADMIN-GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8" class="sect4"><span class="enumeration_section">19.2.4 </span>Detecting Suspended Statements
                  </h4>
                  <p>When a resumable statement is suspended, the error is not raised to the client. In order for corrective action to be taken, Oracle Database provides alternative methods for notifying users of the error and for providing information about the circumstances.</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-7551438C-E1BF-45DF-9693-382B50AE26E1">Notifying Users: The AFTER SUSPEND System Event and Trigger</a><br>When a resumable statement encounters a correctable error, the system internally generates the <code class="codeph">AFTER SUSPEND</code> system event. Users can register triggers for this event at both the database and schema level. If a user registers a trigger to handle this system event, the trigger is executed after a SQL statement has been suspended.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-D22E6BA4-88E2-4DE5-A937-3B0E15CDBBD8">Using Views to Obtain Information About Suspended Statements</a><br>You can query a set of views for information about the status of resumable statements.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-E56ACC18-4955-44F8-B63E-72F21DE95EFD">Using the DBMS_RESUMABLE Package</a><br>The <code class="codeph">DBMS_RESUMABLE</code> package helps control resumable space allocation.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" title="You can suspend, and later resume, the execution of large database operations.">Managing Resumable Space Allocation</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11595"></a><div class="props_rev_3"><a id="GUID-7551438C-E1BF-45DF-9693-382B50AE26E1" name="GUID-7551438C-E1BF-45DF-9693-382B50AE26E1"></a><h5 id="ADMIN-GUID-7551438C-E1BF-45DF-9693-382B50AE26E1" class="sect5"><span class="enumeration_section">19.2.4.1 </span>Notifying Users: The AFTER SUSPEND System Event and Trigger
                     </h5>
                     <div>
                        <p>When a resumable statement encounters a correctable error, the system internally generates the <code class="codeph">AFTER SUSPEND</code> system event. Users can register triggers for this event at both the database and schema level. If a user registers a trigger to handle this system event, the trigger is executed after a SQL statement has been suspended.
                        </p>
                        <div class="section">
                           <p>SQL statements executed within a <code class="codeph">AFTER SUSPEND</code> trigger are always non-resumable and are always autonomous. Transactions started within the trigger use the <code class="codeph">SYSTEM</code> rollback segment. These conditions are imposed to overcome deadlocks and reduce the chance of the trigger experiencing the same error condition as the statement. 
                           </p>
                           <p>Users can use the <code class="codeph">USER_RESUMABLE</code> or <code class="codeph">DBA_RESUMABLE</code> views, or the <code class="codeph">DBMS_RESUMABLE.SPACE_ERROR_INFO</code> function, within triggers to get information about the resumable statements. 
                           </p>
                           <p>Triggers can also call the <code class="codeph">DBMS_RESUMABLE</code> package to terminate suspended statements and modify resumable timeout values. In the following example, the default system timeout is changed by creating a system wide <code class="codeph">AFTER SUSPEND</code> trigger that calls <code class="codeph">DBMS_RESUMABLE</code> to set the timeout to 3 hours:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TRIGGER resumable_default_timeout
AFTER SUSPEND
ON DATABASE
BEGIN
   DBMS_RESUMABLE.SET_TIMEOUT(10800);
END;
/</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-7551438C-E1BF-45DF-9693-382B50AE26E1__GUID-00F8715B-8F7F-48BB-A188-A65D937428C2">
                           <p class="notep1">See Also:</p>
                           <p><a href="../lnpls/plsql-triggers.html#LNPLS020" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about triggers and system events
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8" title="When a resumable statement is suspended, the error is not raised to the client. In order for corrective action to be taken, Oracle Database provides alternative methods for notifying users of the error and for providing information about the circumstances.">Detecting Suspended Statements</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11596"></a><div class="props_rev_3"><a id="GUID-D22E6BA4-88E2-4DE5-A937-3B0E15CDBBD8" name="GUID-D22E6BA4-88E2-4DE5-A937-3B0E15CDBBD8"></a><h5 id="ADMIN-GUID-D22E6BA4-88E2-4DE5-A937-3B0E15CDBBD8" class="sect5"><span class="enumeration_section">19.2.4.2 </span>Using Views to Obtain Information About Suspended Statements 
                     </h5>
                     <div>
                        <p>You can query a set of views for information about the status of resumable statements.</p>
                        <div class="tblformal" id="GUID-D22E6BA4-88E2-4DE5-A937-3B0E15CDBBD8__GUID-627E4810-E9A7-4C83-9336-D703DCB424DC">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Column 1 contains the names of views that contain information about suspended statements. Column 2 describes each view." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d182472e2114">View</th>
                                    <th align="left" valign="bottom" width="70%" id="d182472e2117">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d182472e2122" headers="d182472e2114 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_RESUMABLE.html#REFRN23228" target="_blank">DBA_RESUMABLE</a></code> 
                                       </p>
                                       <p><code class="codeph"><a href="../refrn/USER_RESUMABLE.html#REFRN26228" target="_blank">USER_RESUMABLE</a></code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d182472e2122 d182472e2117 ">
                                       <p>These views contain rows for all currently executing or suspended resumable statements. They can be used by a DBA, <code class="codeph">AFTER SUSPEND</code> trigger, or another session to monitor the progress of, or obtain specific information about, resumable statements. 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d182472e2142" headers="d182472e2114 ">
                                       <p><code class="codeph"><a href="../refrn/V-SESSION_WAIT.html#REFRN30229" target="_blank">V$SESSION_WAIT</a></code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d182472e2142 d182472e2117 ">
                                       <p>When a statement is suspended the session invoking the statement is put into a wait state. A row is inserted into this view for the session with the <code class="codeph">EVENT</code> column containing "statement suspended, wait error to be cleared".
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8" title="When a resumable statement is suspended, the error is not raised to the client. In order for corrective action to be taken, Oracle Database provides alternative methods for notifying users of the error and for providing information about the circumstances.">Detecting Suspended Statements</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11597"></a><div class="props_rev_3"><a id="GUID-E56ACC18-4955-44F8-B63E-72F21DE95EFD" name="GUID-E56ACC18-4955-44F8-B63E-72F21DE95EFD"></a><h5 id="ADMIN-GUID-E56ACC18-4955-44F8-B63E-72F21DE95EFD" class="sect5"><span class="enumeration_section">19.2.4.3 </span>Using the DBMS_RESUMABLE Package
                     </h5>
                     <div>
                        <p>The <code class="codeph">DBMS_RESUMABLE</code> package helps control resumable space allocation.
                        </p>
                        <div class="section">
                           <p>You can invoke the following procedures:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-E56ACC18-4955-44F8-B63E-72F21DE95EFD__GUID-8A31224F-A682-429C-BF94-067F08050C94">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Column 1 contains the names of procedures in the DBMS_RESUMABLE package. Column 2 describes the procedures." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="42%" id="d182472e2210">Procedure</th>
                                    <th align="left" valign="bottom" width="58%" id="d182472e2213">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d182472e2218" headers="d182472e2210 ">
                                       <p><code class="codeph">ABORT(sessionID)</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d182472e2218 d182472e2213 ">
                                       <p>This procedure aborts a suspended resumable statement. The parameter <code class="codeph">sessionID</code> is the session ID in which the statement is executing. For parallel DML/DDL,<code class="codeph"> sessionID</code> is any session ID which participates in the parallel DML/DDL. 
                                       </p>
                                       <p>Oracle Database guarantees that the <code class="codeph">ABORT</code> operation always succeeds. It may be called either inside or outside of the <code class="codeph">AFTER SUSPEND</code> trigger.
                                       </p>
                                       <p>The caller of <code class="codeph">ABORT</code> must be the owner of the session with <code class="codeph">sessionID</code>, have <code class="codeph">ALTER SYSTEM</code> privilege, or have DBA privileges.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d182472e2252" headers="d182472e2210 ">
                                       <p><code class="codeph">GET_SESSION_TIMEOUT(sessionID)</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d182472e2252 d182472e2213 ">
                                       <p>This function returns the current timeout value of resumable space allocation for the session with <code class="codeph">sessionID</code>. This returned timeout is in seconds. If the session does not exist, this function returns -1.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d182472e2264" headers="d182472e2210 ">
                                       <p><code class="codeph">SET_SESSION_TIMEOUT(sessionID, timeout)</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d182472e2264 d182472e2213 ">
                                       <p>This procedure sets the timeout interval of resumable space allocation for the session with <code class="codeph">sessionID</code>. The parameter <code class="codeph">timeout</code> is in seconds. The new <code class="codeph">timeout</code> setting will applies to the session immediately. If the session does not exist, no action is taken.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d182472e2282" headers="d182472e2210 ">
                                       <p><code class="codeph">GET_TIMEOUT()</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d182472e2282 d182472e2213 ">
                                       <p>This function returns the current <code class="codeph">timeout</code> value of resumable space allocation for the current session. The returned value is in seconds. 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d182472e2294" headers="d182472e2210 ">
                                       <p><code class="codeph">SET_TIMEOUT(timeout)</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d182472e2294 d182472e2213 ">
                                       <p>This procedure sets a <code class="codeph">timeout</code> value for resumable space allocation for the current session. The parameter <code class="codeph">timeout</code> is in seconds. The new timeout setting applies to the session immediately.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-E56ACC18-4955-44F8-B63E-72F21DE95EFD__GUID-001FD5B8-05E0-46ED-A397-C0A1112A37F2">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_RESUMABLE.html#ARPLS143" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for details about the <code class="codeph">DBMS_RESUMABLE</code> package.
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-59C9CEDB-54AE-4128-BA74-BDFD0E2F25C8" title="When a resumable statement is suspended, the error is not raised to the client. In order for corrective action to be taken, Oracle Database provides alternative methods for notifying users of the error and for providing information about the circumstances.">Detecting Suspended Statements</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN11598"></a><div class="props_rev_3"><a id="GUID-1ED25C9D-4D0D-47DA-AEFE-14D6F8BFD742" name="GUID-1ED25C9D-4D0D-47DA-AEFE-14D6F8BFD742"></a><h4 id="ADMIN-GUID-1ED25C9D-4D0D-47DA-AEFE-14D6F8BFD742" class="sect4"><span class="enumeration_section">19.2.5 </span>Operation-Suspended Alert
                  </h4>
                  <div>
                     <p>When a resumable session is suspended, an operation-suspended alert is issued on the object that needs allocation of resource for the operation to complete.</p>
                     <p>Once the resource is allocated and the operation completes, the operation-suspended alert is cleared. See <span class="q">"<a href="managing-space-for-schema-objects.html#GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070" title="Two alert thresholds are defined by default: warning and critical. The warning threshold is the limit at which space is beginning to run low. The critical threshold is a serious limit that warrants your immediate attention. The database issues alerts at both thresholds.">Managing Tablespace Alerts</a>"</span> for more information on system-generated alerts.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" title="You can suspend, and later resume, the execution of large database operations.">Managing Resumable Space Allocation</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11599"></a><div class="props_rev_3"><a id="GUID-7699310D-784F-4AB7-B3E0-05B2DBF59A60" name="GUID-7699310D-784F-4AB7-B3E0-05B2DBF59A60"></a><h4 id="ADMIN-GUID-7699310D-784F-4AB7-B3E0-05B2DBF59A60" class="sect4"><span class="enumeration_section">19.2.6 </span>Resumable Space Allocation Example: Registering an AFTER SUSPEND Trigger
                  </h4>
                  <div>
                     <p>An example illustrates how to create a system wide <code class="codeph">AFTER SUSPEND</code> trigger and register it as user <code class="codeph">SYS</code> at the database level. 
                     </p>
                     <div class="section">
                        <p>Whenever a resumable statement is suspended in any session, this trigger can have either of two effects:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If an undo segment has reached its space limit, then a message is sent to the DBA and the statement is aborted. </p>
                           </li>
                           <li>
                              <p>If any other recoverable error has occurred, the timeout interval is reset to 8 hours.</p>
                           </li>
                        </ul>
                        <p>Here are the statements for this example:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TRIGGER resumable_default
AFTER SUSPEND
ON DATABASE
DECLARE
   /* declare transaction in this trigger is autonomous */
   /* this is not required because transactions within a trigger
      are always autonomous */
   PRAGMA AUTONOMOUS_TRANSACTION;
   cur_sid           NUMBER;
   cur_inst          NUMBER;
   errno             NUMBER;
   err_type          VARCHAR2;
   object_owner      VARCHAR2;
   object_type       VARCHAR2;
   table_space_name  VARCHAR2;
   object_name       VARCHAR2;
   sub_object_name   VARCHAR2;
   error_txt         VARCHAR2;
   msg_body          VARCHAR2;
   ret_value         BOOLEAN;
   mail_conn         UTL_SMTP.CONNECTION;
BEGIN
   -- Get session ID
   SELECT DISTINCT(SID) INTO cur_SID FROM V$MYSTAT;

   -- Get instance number
   cur_inst := userenv('instance');

   -- Get space error information
   ret_value := 
   DBMS_RESUMABLE.SPACE_ERROR_INFO(err_type,object_type,object_owner,
        table_space_name,object_name, sub_object_name);
   /*
   -- If the error is related to undo segments, log error, send email
   -- to DBA, and abort the statement. Otherwise, set timeout to 8 hours.
   -- 
   -- sys.rbs_error is a table which is to be
   -- created by a DBA manually and defined as
   -- (sql_text VARCHAR2(1000), error_msg VARCHAR2(4000),
   -- suspend_time DATE)
   */

   IF OBJECT_TYPE = 'UNDO SEGMENT' THEN
       /* LOG ERROR */
       INSERT INTO sys.rbs_error (
           SELECT SQL_TEXT, ERROR_MSG, SUSPEND_TIME
           FROM DBMS_RESUMABLE
           WHERE SESSION_ID = cur_sid AND INSTANCE_ID = cur_inst
        );
       SELECT ERROR_MSG INTO error_txt FROM DBMS_RESUMABLE 
           WHERE SESSION_ID = cur_sid and INSTANCE_ID = cur_inst;

        -- Send email to receipient through UTL_SMTP package
        msg_body:='Subject: Space Error Occurred

                   Space limit reached for undo segment ' || object_name || 
                   on ' || TO_CHAR(SYSDATE, 'Month dd, YYYY, HH:MIam') ||
                   '. Error message was ' || error_txt;

        mail_conn := UTL_SMTP.OPEN_CONNECTION('localhost', 25);
        UTL_SMTP.HELO(mail_conn, 'localhost');
        UTL_SMTP.MAIL(mail_conn, 'sender@localhost');
        UTL_SMTP.RCPT(mail_conn, 'recipient@localhost');
        UTL_SMTP.DATA(mail_conn, msg_body);
        UTL_SMTP.QUIT(mail_conn);

        -- Abort the statement
        DBMS_RESUMABLE.ABORT(cur_sid);
    ELSE
        -- Set timeout to 8 hours
        DBMS_RESUMABLE.SET_TIMEOUT(28800);
    END IF;

    /* commit autonomous transaction */
    COMMIT;   
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-E464327C-6434-4CFC-A6F5-BC4424353ACE" title="You can suspend, and later resume, the execution of large database operations.">Managing Resumable Space Allocation</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN01401"></a><div class="props_rev_3"><a id="GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" name="GUID-1F297567-4BEC-438E-9E13-683D2BB47F44"></a><h3 id="ADMIN-GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" class="sect3"><span class="enumeration_section">19.3 </span>Reclaiming Unused Space
               </h3>
               <p>You can reclaim unused space. Segment Advisor, is an Oracle Database component that identifies segments that have space available for reclamation.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-70076484-92BD-49B0-A2C5-4D6564DFFFB6">About Reclaimable Unused Space</a><br>Over time, updates and deletes on objects within a tablespace can create pockets of empty space that individually are not large enough to be reused for new data. This type of empty space is referred to as fragmented free space.
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4">The Segment Advisor</a><br>The Segment Advisor identifies segments that have space available for reclamation. 
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB">Shrinking Database Segments Online</a><br>You use online segment shrink to reclaim fragmented free space below the high water mark in an Oracle Database segment.
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-7ED839DE-64AA-4F7B-8279-E2A6CA9AE7DA">Deallocating Unused Space</a><br>When you deallocate unused space, the database frees the unused space at the unused (high water mark) end of the database segment and makes the space available for other segments in the tablespace.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning.">Managing Space for Schema Objects</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11600"></a><div class="props_rev_3"><a id="GUID-70076484-92BD-49B0-A2C5-4D6564DFFFB6" name="GUID-70076484-92BD-49B0-A2C5-4D6564DFFFB6"></a><h4 id="ADMIN-GUID-70076484-92BD-49B0-A2C5-4D6564DFFFB6" class="sect4"><span class="enumeration_section">19.3.1 </span>About Reclaimable Unused Space
                  </h4>
                  <div>
                     <p>Over time, updates and deletes on objects within a tablespace can create pockets of empty space that individually are not large enough to be reused for new data. This type of empty space is referred to as fragmented free space.</p>
                     <p>Objects with fragmented free space can result in much wasted space, and can impact database performance. The preferred way to defragment and reclaim this space is to perform an <span class="bold">online segment shrink</span>. This process consolidates fragmented free space below the high water mark and compacts the segment. After compaction, the high water mark is moved, resulting in new free space above the high water mark. That space above the high water mark is then deallocated. The segment remains available for queries and DML during most of the operation, and no extra disk space need be allocated.
                     </p>
                     <p>You use the <span class="bold">Segment Advisor</span> to identify segments that would benefit from online segment shrink. Only segments in locally managed tablespaces with automatic segment space management (ASSM) are eligible. Other restrictions on segment type exist. For more information, see <span class="q">"<a href="managing-space-for-schema-objects.html#GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB" title="You use online segment shrink to reclaim fragmented free space below the high water mark in an Oracle Database segment.">Shrinking Database Segments Online</a>"</span>.
                     </p>
                     <p>If a table with reclaimable space is not eligible for online segment shrink, or if you want to make changes to logical or physical attributes of the table while reclaiming space, then you can use <span class="bold">online table redefinition</span> as an alternative to segment shrink. Online redefinition is also referred to as <span class="bold">reorganization</span>. Unlike online segment shrink, it requires extra disk space to be allocated. See <span class="q">"<a href="managing-tables.html#GUID-F95114BC-F512-4A1F-B5BD-07DDDE60D934" title="In any database system, it is occasionally necessary to modify the logical or physical structure of a table to improve the performance of queries or DML, accommodate application changes, or Manage storage. You can redefine tables online with the DBMS_REDEFINITION package.">Redefining Tables Online</a>"</span> for more information.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" title="You can reclaim unused space. Segment Advisor, is an Oracle Database component that identifies segments that have space available for reclamation.">Reclaiming Unused Space</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" name="GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4"></a><h4 id="ADMIN-GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" class="sect4"><span class="enumeration_section">19.3.2 </span>The Segment Advisor
                  </h4>
                  <p>The Segment Advisor identifies segments that have space available for reclamation. </p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-79EF8EB6-AB05-4EB0-9C72-98240BB607A8">About the Segment Advisor</a><br>The Segment Advisor performs its analysis by examining usage and growth statistics in the Automatic Workload Repository (AWR), and by sampling the data in the segment.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-E9B57A45-2688-42B6-9782-D49702D51F24">Using the Segment Advisor</a><br>To use the Segment Advisor, check the results of Automatic Segment Advisor, and, optionally, run the Segment Advisor manually.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B">Automatic Segment Advisor</a><br>The Automatic Segment Advisor is an automated maintenance task that is configured to run during all maintenance windows.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617">Running the Segment Advisor Manually</a><br>You can manually run the Segment Advisor at any time with Cloud Control or with PL/SQL package procedure calls.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB">Viewing Segment Advisor Results</a><br>The Segment Advisor creates several types of results: recommendations, findings, actions, and objects.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C">Configuring the Automatic Segment Advisor</a><br>The Automatic Segment Advisor is an automated maintenance task. As such, you can use Cloud Control or PL/SQL package procedure calls to modify when (and if) this task runs. You can also control the resources allotted to it by modifying the appropriate resource plans.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-04ED091D-495D-4F6F-A77D-F91BE5603581">Viewing Automatic Segment Advisor Information</a><br>You can query views to display information specific to the Automatic Segment Advisor.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" title="You can reclaim unused space. Segment Advisor, is an Oracle Database component that identifies segments that have space available for reclamation.">Reclaiming Unused Space</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-79EF8EB6-AB05-4EB0-9C72-98240BB607A8" name="GUID-79EF8EB6-AB05-4EB0-9C72-98240BB607A8"></a><h5 id="ADMIN-GUID-79EF8EB6-AB05-4EB0-9C72-98240BB607A8" class="sect5"><span class="enumeration_section">19.3.2.1 </span>About the Segment Advisor
                     </h5>
                     <div>
                        <p>The Segment Advisor performs its analysis by examining usage and growth statistics in the Automatic Workload Repository (AWR), and by sampling the data in the segment.</p>
                        <div class="section">
                           <p>It is configured to run during maintenance windows as an automated maintenance task, and you can also run it on demand (manually). The Segment Advisor automated maintenance task is known as the Automatic Segment Advisor. You can use this information for capacity planning and for arriving at an informed decision about which segments to shrink. </p>
                           <p>The Segment Advisor generates the following types of advice:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If the Segment Advisor determines that an object has a significant amount of free space, it recommends online segment shrink. If the object is a table that is not eligible for shrinking, as in the case of a table in a tablespace without automatic segment space management, the Segment Advisor recommends online table redefinition.</p>
                              </li>
                              <li>
                                 <p>If the Segment Advisor determines that a table could benefit from compression with the advanced row compression method, it makes a recommendation to that effect. (Automatic Segment Advisor only. See <span class="q">"<a href="managing-space-for-schema-objects.html#GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B" title="The Automatic Segment Advisor is an automated maintenance task that is configured to run during all maintenance windows.">Automatic Segment Advisor</a>"</span>.)
                                 </p>
                              </li>
                              <li>
                                 <p>If the Segment Advisor encounters a table with row chaining above a certain threshold, it records that fact that the table has an excess of chained rows.</p>
                                 <div class="infoboxnote" id="GUID-79EF8EB6-AB05-4EB0-9C72-98240BB607A8__GUID-1E170BAB-A841-4BB0-8030-178DD88C985F">
                                    <p class="notep1">Note:</p>
                                    <p>The Segment Advisor flags only the type of row chaining that results from updates that increase row length.</p>
                                 </div>
                              </li>
                           </ul>
                           <p>If you receive a space management alert, or if you decide that you want to reclaim space, you should start with the Segment Advisor.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="The Segment Advisor identifies segments that have space available for reclamation.">The Segment Advisor</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11601"></a><div class="props_rev_3"><a id="GUID-E9B57A45-2688-42B6-9782-D49702D51F24" name="GUID-E9B57A45-2688-42B6-9782-D49702D51F24"></a><h5 id="ADMIN-GUID-E9B57A45-2688-42B6-9782-D49702D51F24" class="sect5"><span class="enumeration_section">19.3.2.2 </span>Using the Segment Advisor
                     </h5>
                     <div>
                        <p>To use the Segment Advisor, check the results of Automatic Segment Advisor, and, optionally, run the Segment Advisor manually.</p>
                        <div class="section">
                           <p>To use the Segment Advisor:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Check the results of the Automatic Segment Advisor.</span><div>
                                 <p>To understand the Automatic Segment Advisor, see <span class="q">"<a href="managing-space-for-schema-objects.html#GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B" title="The Automatic Segment Advisor is an automated maintenance task that is configured to run during all maintenance windows.">Automatic Segment Advisor</a>"</span>, later in this section. For details on how to view results, see <span class="q">"<a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB" title="The Segment Advisor creates several types of results: recommendations, findings, actions, and objects.">Viewing Segment Advisor Results</a>"</span>.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>(Optional) Obtain updated results on individual segments by rerunning the Segment Advisor manually.</span><div>
                                 <p>See <span class="q">"<a href="managing-space-for-schema-objects.html#GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617" title="You can manually run the Segment Advisor at any time with Cloud Control or with PL/SQL package procedure calls.">Running the Segment Advisor Manually</a>"</span>, later in this section.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="The Segment Advisor identifies segments that have space available for reclamation.">The Segment Advisor</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11602"></a><div class="props_rev_3"><a id="GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B" name="GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B"></a><h5 id="ADMIN-GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B" class="sect5"><span class="enumeration_section">19.3.2.3 </span>Automatic Segment Advisor
                     </h5>
                     <div>
                        <p>The Automatic Segment Advisor is an automated maintenance task that is configured to run during all maintenance windows.</p>
                        <p>The Automatic Segment Advisor does not analyze every database object. Instead, it examines database statistics, samples segment data, and then selects the following objects to analyze:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Tablespaces that have exceeded a critical or warning space threshold</p>
                           </li>
                           <li>
                              <p>Segments that have the most activity</p>
                           </li>
                           <li>
                              <p>Segments that have the highest growth rate</p>
                           </li>
                        </ul>
                        <p>In addition, the Automatic Segment Advisor evaluates tables that are at least 10MB and that have at least three indexes to determine the amount of space saved if the tables are compressed with the advanced row compression method.</p>
                        <p>If an object is selected for analysis but the maintenance window expires before the Segment Advisor can process the object, the object is included in the next Automatic Segment Advisor run.</p>
                        <p>You cannot change the set of tablespaces and segments that the Automatic Segment Advisor selects for analysis. You can, however, enable or disable the Automatic Segment Advisor task, change the times during which the Automatic Segment Advisor is scheduled to run, or adjust automated maintenance task system resource utilization. See <span class="q">"<a href="managing-space-for-schema-objects.html#GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C" title="The Automatic Segment Advisor is an automated maintenance task. As such, you can use Cloud Control or PL/SQL package procedure calls to modify when (and if) this task runs. You can also control the resources allotted to it by modifying the appropriate resource plans.">Configuring the Automatic Segment Advisor</a>"</span> for more information.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-B2876330-007A-4299-9DBA-C1F3C0DCD13B__GUID-56DE5263-9EA7-4C5F-9151-DDE2E0A9C9CB">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB" title="The Segment Advisor creates several types of results: recommendations, findings, actions, and objects.">Viewing Segment Advisor Results</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="managing-automated-database-maintenance-tasks.html#GUID-7F7C805E-BA64-43A5-9A09-FC259FFA9AA8" title="Oracle Database has automated several common maintenance tasks typically performed by database administrators. These automated maintenance tasks are performed when the system load is expected to be light. You can enable and disable individual maintenance tasks, and can configure when these tasks run and what resource allocations they are allotted."> Managing Automated Database Maintenance Tasks</a></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-tables.html#GUID-ED833867-4B7F-442E-A70C-9C19DAA8F445" title="Compression saves disk space, reduces memory use in the database buffer cache, and can significantly speed query execution during reads.">Consider Using Table Compression</a>"</span> for more information on advanced row compression
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="The Segment Advisor identifies segments that have space available for reclamation.">The Segment Advisor</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11603"></a><div class="props_rev_3"><a id="GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617" name="GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617"></a><h5 id="ADMIN-GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617" class="sect5"><span class="enumeration_section">19.3.2.4 </span>Running the Segment Advisor Manually
                     </h5>
                     <div>
                        <p>You can manually run the Segment Advisor at any time with Cloud Control or with PL/SQL package procedure calls.</p>
                        <p>Reasons to manually run the Segment Advisor include the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You want to analyze a tablespace or segment that was not selected by the Automatic Segment Advisor.</p>
                           </li>
                           <li>
                              <p>You want to repeat the analysis of an individual tablespace or segment to get more up-to-date recommendations.</p>
                           </li>
                        </ul>
                        <p>You can request advice from the Segment Advisor at three levels:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Segment level</span>—Advice is generated for a single segment, such as an unpartitioned table, a partition or subpartition of a partitioned table, an index, or a LOB column.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Object level</span>—Advice is generated for an entire object, such as a table or index. If the object is partitioned, advice is generated on all the partitions of the object. In addition, if you run Segment Advisor manually from Cloud Control, you can request advice on the object's dependent objects, such as indexes and LOB segments for a table.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Tablespace level</span>—Advice is generated for every segment in a tablespace.
                              </p>
                           </li>
                        </ul>
                        <p>The <code class="codeph">OBJECT_TYPE</code> column of <a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABHCCCE" title="Column 1 contains the values for the OBJECT_TYPE parameter. The following 4 columns list the corresponding ATTR1, ATTR2, ATTR3, and ATTR4 values.">Table 19-2</a> shows the types of objects for which you can request advice.
                        </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC">Running the Segment Advisor Manually with Cloud Control</a><br>You can run the Segment Advisor manually with Cloud Control
                           </li>
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA">Running the Segment Advisor Manually with PL/SQL</a><br>You can run the Segment Advisor with the <code class="codeph">DBMS_ADVISOR</code> package.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="The Segment Advisor identifies segments that have space available for reclamation.">The Segment Advisor</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN13049"></a><a id="ADMIN13050"></a><a id="ADMIN11604"></a><div class="props_rev_2"><a id="GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC" name="GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC"></a><h6 id="ADMIN-GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC" class="sect6"><span class="enumeration_section">19.3.2.4.1 </span>Running the Segment Advisor Manually with Cloud Control
                        </h6>
                        <div>
                           <p>You can run the Segment Advisor manually with Cloud Control</p>
                           <div class="section">
                              <p>You must have the <code class="codeph">OEM_ADVISOR</code> role to run the Segment Advisor manually with Cloud Control. There are two ways to run the Segment Advisor:
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Using the Segment Advisor Wizard</p>
                                    <p>This method enables you to request advice at the tablespace level or object level. At the object level, you can request advice on tables, indexes, table partitions, and index partitions.</p>
                                 </li>
                                 <li>
                                    <p>Using the Run Segment Advisor command on a schema object page.</p>
                                    <p>For example, if you display a list of tables on the Tables page (accessible from the Schema menu), you can select a table and then select <span class="bold">Run Segment Advisor</span> from the Actions menu.
                                    </p>
                                    <div class="figure" id="GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC__CBBGDAJJ">
                                       <p class="titleinfigure">Figure 19-1 Tables page</p><img src="img/run_segment_advisor_command.gif" height="272" width="552" alt="Description of Figure 19-1 follows" title="Description of Figure 19-1 follows" longdesc="img_text/run_segment_advisor_command.html"><br><a href="img_text/run_segment_advisor_command.html">Description of "Figure 19-1 Tables page"</a></div>
                                    <!-- class="figure" -->
                                    <p>This method enables you to include the schema object's dependent objects in the Segment Advisor run. For example, if you select a table and select <span class="bold">Run Segment Advisor</span>, Cloud Control displays the table's dependent objects, such as partitions, index segments, LOB segments, and so on. You can then select dependent objects to include in the run.
                                    </p>
                                 </li>
                              </ul>
                              <p>In both cases, Cloud Control creates the Segment Advisor task as an Oracle Database Scheduler job. You can schedule the job to run immediately, or can take advantage of advanced scheduling features offered by the Scheduler.</p>
                              <p><span class="bold">To run the Segment Advisor manually with the Segment Advisor Wizard:</span></p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ol>
                                 <li>
                                    <p>Access the Database Home page.</p>
                                 </li>
                                 <li>
                                    <p>From the Performance menu, select <span class="bold">Advisors Home</span>.
                                    </p>
                                    <p>The Advisor Central page appears. (See <a href="managing-space-for-schema-objects.html#GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC__CBBEFIGG">Figure 19-2</a>.)
                                    </p>
                                 </li>
                                 <li>
                                    <p>Under Advisors, click <span class="bold">Segment Advisor</span>.
                                    </p>
                                    <p>The first page of the Segment Advisor wizard appears.</p>
                                 </li>
                                 <li>
                                    <p>Follow the wizard steps to schedule the Segment Advisor job, and then click <span class="bold">Submit</span> on the final wizard page.
                                    </p>
                                    <p>The Advisor Central page reappears, with the new Segment Advisor job at the top of the list under the Results heading. The job status is <code class="codeph">SCHEDULED</code> or <code class="codeph">RUNNING</code>. (If you do not see your job, then use the search fields above the list to display it.)
                                    </p>
                                 </li>
                                 <li>
                                    <p>Check the status of the job. If it is not <code class="codeph">COMPLETED</code>, then use the <span class="bold">Refresh</span> control at the top of the page to refresh the page. (Do not use your browser's Refresh icon.)
                                    </p>
                                    <p>When the job status changes to <code class="codeph">COMPLETED</code>, select the job by clicking in the <span class="bold">Select</span> column, and then click <span class="bold">View Result</span>.
                                    </p>
                                    <div class="figure" id="GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC__CBBEFIGG">
                                       <p class="titleinfigure">Figure 19-2 Advisor Central page</p><img src="img/advisor_central.gif" width="574" alt="Description of Figure 19-2 follows" title="Description of Figure 19-2 follows" longdesc="img_text/advisor_central.html"><br><a href="img_text/advisor_central.html">Description of "Figure 19-2 Advisor Central page"</a></div>
                                    <!-- class="figure" -->
                                 </li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                           <div class="section"></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC__GUID-C44862B6-4616-40DB-9F81-168B15179BEF">
                              <p class="notep1">See Also:</p>
                              <p><a href="scheduling-jobs-with-oracle-scheduler.html#GUID-D41660D0-D88F-4D9F-8CC8-63D040EDC4E6" title="You can create, run, and manage jobs with Oracle Scheduler."> Scheduling Jobs with Oracle Scheduler</a> for more information about the advanced scheduling features of the Scheduler.
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617" title="You can manually run the Segment Advisor at any time with Cloud Control or with PL/SQL package procedure calls.">Running the Segment Advisor Manually</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13051"></a><a id="ADMIN13052"></a><a id="ADMIN13053"></a><a id="ADMIN12624"></a><a id="ADMIN11605"></a><div class="props_rev_3"><a id="GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA" name="GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA"></a><h6 id="ADMIN-GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA" class="sect6"><span class="enumeration_section">19.3.2.4.2 </span>Running the Segment Advisor Manually with PL/SQL
                        </h6>
                        <div>
                           <p>You can run the Segment Advisor with the <code class="codeph">DBMS_ADVISOR</code> package.
                           </p>
                           <div class="section">
                              <p> You use package procedures to create a Segment Advisor task, set task arguments, and then execute the task. You must have the <code class="codeph">ADVISOR</code> privilege. <a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__CBBBIDCB" title="This table contains four rows, one for each procedure in the DBMS_ADVISOR package that is relevant for the Segment Advisor. Each row contains the procedure name and description.">Table 19-1</a> shows the procedures that are relevant for the Segment Advisor. See <a href="../arpls/DBMS_ADVISOR.html#ARPLS350" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more details on these procedures.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="tblformalwide" id="GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__CBBBIDCB">
                              <p class="titleintable">Table 19-1 DBMS_ADVISOR package procedures relevant to the Segment Advisor</p>
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="DBMS_ADVISOR package procedures relevant to the Segment Advisor" summary="This table contains four rows, one for each procedure in the DBMS_ADVISOR package that is relevant for the Segment Advisor. Each row contains the procedure name and description." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="29%" id="d182472e3236">Package Procedure Name</th>
                                       <th align="left" valign="bottom" width="71%" id="d182472e3239">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d182472e3244" headers="d182472e3236 ">
                                          <p><code class="codeph">CREATE_TASK</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d182472e3244 d182472e3239 ">
                                          <p>Use this procedure to create the Segment Advisor task. Specify 'Segment Advisor' as the value of the <code class="codeph">ADVISOR_NAME</code> parameter.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d182472e3255" headers="d182472e3236 ">
                                          <p><code class="codeph">CREATE_OBJECT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d182472e3255 d182472e3239 ">
                                          <p>Use this procedure to identify the target object for segment space advice. The parameter values of this procedure depend upon the object type. <a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABHCCCE" title="Column 1 contains the values for the OBJECT_TYPE parameter. The following 4 columns list the corresponding ATTR1, ATTR2, ATTR3, and ATTR4 values.">Table 19-2</a> lists the parameter values for each type of object.
                                          </p>
                                          <p>Note: To request advice on an IOT overflow segment, use an object type of <code class="codeph">TABLE</code>, <code class="codeph">TABLE</code> <code class="codeph">PARTITION</code>, or <code class="codeph">TABLE</code> <code class="codeph">SUBPARTITION</code>. Use the following query to find the overflow segment for an IOT and to determine the overflow segment table name to use with <code class="codeph">CREATE_OBJECT</code>:
                                          </p><pre class="oac_no_warn" dir="ltr">select table_name, iot_name, iot_type from dba_tables;</pre></td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d182472e3291" headers="d182472e3236 ">
                                          <p><code class="codeph">SET_TASK_PARAMETER</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d182472e3291 d182472e3239 ">
                                          <p>Use this procedure to describe the segment advice that you need. <a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABBHDBI" title="Column 1 lists the input parameters for the DBMS_ADVISOR.SET_TASK_PARMETER procedure. Column 2 describes te procedure, column 3 specifies possible values, and column 4 lists the default value.">Table 19-3</a> shows the relevant input parameters of this procedure. Parameters not listed here are not used by the Segment Advisor.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d182472e3304" headers="d182472e3236 ">
                                          <p><code class="codeph">EXECUTE_TASK</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d182472e3304 d182472e3239 ">
                                          <p>Use this procedure to execute the Segment Advisor task.</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="tblformal" id="GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABHCCCE">
                              <p class="titleintable">Table 19-2 Input Parameters for DBMS_ADVISOR.CREATE_OBJECT</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="Input Parameters for DBMS_ADVISOR.CREATE_OBJECT" summary="Column 1 contains the values for the OBJECT_TYPE parameter. The following 4 columns list the corresponding  ATTR1, ATTR2, ATTR3, and  ATTR4 values." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d182472e3324">OBJECT_TYPE</th>
                                       <th align="left" valign="bottom" width="20%" id="d182472e3327">ATTR1</th>
                                       <th align="left" valign="bottom" width="20%" id="d182472e3330">ATTR2</th>
                                       <th align="left" valign="bottom" width="20%" id="d182472e3333">ATTR3</th>
                                       <th align="left" valign="bottom" width="20%" id="d182472e3336">ATTR4</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3341" headers="d182472e3324 ">
                                          <p><code class="codeph">TABLESPACE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3341 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">tablespace name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3341 d182472e3330 ">
                                          <p><code class="codeph">NULL</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3341 d182472e3333 ">
                                          <p><code class="codeph">NULL</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3341 d182472e3336 ">
                                          <p>Unused. Specify <code class="codeph">NULL</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3365" headers="d182472e3324 ">
                                          <p><code class="codeph">TABLE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3365 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">schema name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3365 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">table name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3365 d182472e3333 ">
                                          <p><code class="codeph">NULL</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3365 d182472e3336 ">
                                          <p>Unused. Specify <code class="codeph">NULL</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3390" headers="d182472e3324 ">
                                          <p><code class="codeph">INDEX</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3390 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">schema name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3390 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">index name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3390 d182472e3333 ">
                                          <p><code class="codeph">NULL</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3390 d182472e3336 ">
                                          <p>Unused. Specify <code class="codeph">NULL</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3415" headers="d182472e3324 ">
                                          <p><code class="codeph">TABLE PARTITION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3415 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">schema name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3415 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">table name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3415 d182472e3333 ">
                                          <p><span class="italic"><code class="codeph">table partition name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3415 d182472e3336 ">
                                          <p>Unused. Specify <code class="codeph">NULL</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3441" headers="d182472e3324 ">
                                          <p><code class="codeph">INDEX PARTITION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3441 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">schema name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3441 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">index name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3441 d182472e3333 ">
                                          <p><span class="italic"><code class="codeph">index partition name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3441 d182472e3336 ">
                                          <p>Unused. Specify <code class="codeph">NULL</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3467" headers="d182472e3324 ">
                                          <p><code class="codeph">TABLE SUBPARTITION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3467 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">schema name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3467 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">table name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3467 d182472e3333 ">
                                          <p><span class="italic"><code class="codeph">table subpartition name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3467 d182472e3336 ">
                                          <p>Unused. Specify <code class="codeph">NULL</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3493" headers="d182472e3324 ">
                                          <p><code class="codeph">INDEX SUBPARTITION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3493 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">schema name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3493 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">index name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3493 d182472e3333 ">
                                          <p><span class="italic"><code class="codeph">index subpartition name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3493 d182472e3336 ">
                                          <p>Unused. Specify <code class="codeph">NULL</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3519" headers="d182472e3324 ">
                                          <p><code class="codeph">LOB</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3519 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">schema name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3519 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">segment name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3519 d182472e3333 ">
                                          <p><code class="codeph">NULL</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3519 d182472e3336 ">
                                          <p>Unused. Specify <code class="codeph">NULL</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3544" headers="d182472e3324 ">
                                          <p><code class="codeph">LOB PARTITION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3544 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">schema name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3544 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">segment name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3544 d182472e3333 ">
                                          <p><span class="italic"><code class="codeph">lob partition name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3544 d182472e3336 ">
                                          <p>Unused. Specify <code class="codeph">NULL</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d182472e3570" headers="d182472e3324 ">
                                          <p><code class="codeph">LOB SUBPARTITION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3570 d182472e3327 ">
                                          <p><span class="italic"><code class="codeph">schema name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3570 d182472e3330 ">
                                          <p><span class="italic"><code class="codeph">segment name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3570 d182472e3333 ">
                                          <p><span class="italic"><code class="codeph">lob subpartition name</code></span></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d182472e3570 d182472e3336 ">
                                          <p>Unused. Specify <code class="codeph">NULL</code>.
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="tblformalwide" id="GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABBHDBI">
                              <p class="titleintable">Table 19-3 Input for DBMS_ADVISOR.SET_TASK_PARAMETER</p>
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="Input for DBMS_ADVISOR.SET_TASK_PARAMETER" summary="Column 1 lists the input parameters for the DBMS_ADVISOR.SET_TASK_PARMETER procedure.  Column 2 describes te procedure, column 3 specifies possible values, and column 4 lists the default value." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="25%" id="d182472e3607">Input Parameter</th>
                                       <th align="left" valign="bottom" width="25%" id="d182472e3610">Description</th>
                                       <th align="left" valign="bottom" width="25%" id="d182472e3613">Possible Values </th>
                                       <th align="left" valign="bottom" width="25%" id="d182472e3616">Default Value</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="25%" id="d182472e3621" headers="d182472e3607 ">
                                          <p><code class="codeph">time_limit</code></p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d182472e3621 d182472e3610 ">
                                          <p>The time limit for the Segment Advisor run, specified in seconds.</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d182472e3621 d182472e3613 ">
                                          <p>Any number of seconds</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d182472e3621 d182472e3616 ">
                                          <p><code class="codeph">UNLIMITED</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="25%" id="d182472e3636" headers="d182472e3607 ">
                                          <p><code class="codeph">recommend_all</code></p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d182472e3636 d182472e3610 ">
                                          <p>Whether the Segment Advisor should generate findings for all segments.</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d182472e3636 d182472e3613 ">
                                          <p><code class="codeph">TRUE</code>: Findings are generated on all segments specified, whether or not space reclamation is recommended.
                                          </p>
                                          <p><code class="codeph">FALSE</code>: Findings are generated only for those objects that generate recommendations for space reclamation.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d182472e3636 d182472e3616 ">
                                          <p><code class="codeph">TRUE</code></p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__GUID-91941B76-CEF3-4930-884B-10D01558B16C">Example</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p>The example that follows shows how to use the <code class="codeph">DBMS_ADVISOR</code> procedures to run the Segment Advisor for the sample table <code class="codeph">hr.employees</code>. The user executing these package procedures must have the <code class="codeph">EXECUTE</code> object privilege on the package or the <code class="codeph">ADVISOR</code> system privilege.
                              </p>
                              <p>Note that passing an object type of <code class="codeph">TABLE</code> to <code class="codeph">DBMS_ADVISOR.CREATE_OBJECT</code> amounts to an object level request. If the table is not partitioned, the table segment is analyzed (without any dependent segments like index or LOB segments). If the table is partitioned, the Segment Advisor analyzes all table partitions and generates separate findings and recommendations for each.
                              </p><pre class="oac_no_warn" dir="ltr">variable id number;
begin
  declare
  name varchar2(100);
  descr varchar2(500);
  obj_id number;
  begin
  name:='Manual_Employees';
  descr:='Segment Advisor Example';

  dbms_advisor.create_task (
    advisor_name     =&gt; 'Segment Advisor',
    task_id          =&gt; :id,
    task_name        =&gt; name,
    task_desc        =&gt; descr);

  dbms_advisor.create_object (
    task_name        =&gt; name,
    object_type      =&gt; 'TABLE',
    attr1            =&gt; 'HR',
    attr2            =&gt; 'EMPLOYEES',
    attr3            =&gt; NULL,
    attr4            =&gt; NULL,
    attr5            =&gt; NULL,
    object_id        =&gt; obj_id);

  dbms_advisor.set_task_parameter(
    task_name        =&gt; name,
    parameter        =&gt; 'recommend_all',
    value            =&gt; 'TRUE');

  dbms_advisor.execute_task(name);
  end;
end; 
/</pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-298456D1-2A89-47E9-94E2-E9B5DCDF1617" title="You can manually run the Segment Advisor at any time with Cloud Control or with PL/SQL package procedure calls.">Running the Segment Advisor Manually</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADMIN13054"></a><a id="ADMIN11606"></a><div class="props_rev_3"><a id="GUID-0381940C-F913-4605-90D7-D04788372DAB" name="GUID-0381940C-F913-4605-90D7-D04788372DAB"></a><h5 id="ADMIN-GUID-0381940C-F913-4605-90D7-D04788372DAB" class="sect5"><span class="enumeration_section">19.3.2.5 </span>Viewing Segment Advisor Results
                     </h5>
                     <div>
                        <p>The Segment Advisor creates several types of results: recommendations, findings, actions, and objects.</p>
                        <p>You can view results in the following ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>With Cloud Control</p>
                           </li>
                           <li>
                              <p>By querying the <code class="codeph">DBA_ADVISOR_*</code> views
                              </p>
                           </li>
                           <li>
                              <p>By calling the <code class="codeph">DBMS_SPACE.ASA_RECOMMENDATIONS</code> function
                              </p>
                           </li>
                        </ul>
                        <p><a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB__CBBJFCDI" title="This table shows the types of Segment Advisor results and the view associated with each. It has four rows (for four types of results, and two columns (Result type and view).">Table 19-4</a> describes the various result types and their associated <code class="codeph">DBA_ADVISOR_*</code> views.
                        </p>
                        <div class="tblformalwide" id="GUID-0381940C-F913-4605-90D7-D04788372DAB__CBBJFCDI">
                           <p class="titleintable">Table 19-4  Segment Advisor Result Types</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title=" Segment Advisor Result Types" summary="This table shows the types of Segment Advisor results and the view associated with each. It has four rows (for four types of results, and two columns (Result type and view)." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d182472e3763">Result Type</th>
                                    <th align="left" valign="bottom" width="27%" id="d182472e3766">Associated View</th>
                                    <th align="left" valign="bottom" width="52%" id="d182472e3769">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d182472e3774" headers="d182472e3763 ">
                                       <p>Recommendations</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d182472e3774 d182472e3766 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_ADVISOR_RECOMMENDATIONS.html#REFRN23323" target="_blank">DBA_ADVISOR_RECOMMENDATIONS</a></code></p>
                                    </td>
                                    <td align="left" valign="top" width="52%" headers="d182472e3774 d182472e3769 ">
                                       <p>If a segment would benefit from a segment shrink, reorganization, or compression, the Segment Advisor generates a recommendation for the segment. <a href="managing-space-for-schema-objects.html#GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA__BABGGBHI" title="This table summarizes possible outcomes of the Segment advisor. It shows the related values of columns in some of the Segment Advisor views.">Table 19-5</a> shows examples of generated findings and recommendations.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d182472e3792" headers="d182472e3763 ">
                                       <p>Findings</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d182472e3792 d182472e3766 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_ADVISOR_FINDINGS.html#REFRN23317" target="_blank">DBA_ADVISOR_FINDINGS</a></code></p>
                                    </td>
                                    <td align="left" valign="top" width="52%" headers="d182472e3792 d182472e3769 ">
                                       <p>Findings are a report of what the Segment Advisor observed in analyzed segments. Findings include space used and free space statistics for each analyzed segment. Not all findings result in a recommendation. (There may be only a few recommendations, but there could be many findings.) When running the Segment Advisor manually with PL/SQL, if you specify <code class="codeph">'TRUE'</code> for <code class="codeph">recommend_all</code> in the <code class="codeph">SET_TASK_PARAMETER</code> procedure, then the Segment Advisor generates a finding for each segment that qualifies for analysis, whether or not a recommendation is made for that segment. For row chaining advice, the Automatic Segment Advisor generates findings only, and not recommendations. If the Automatic Segment Advisor has no space reclamation recommendations to make, it does not generate findings. However, the Automatic Segment Advisor may generate findings for tables that could benefit from advanced row compression.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d182472e3814" headers="d182472e3763 ">
                                       <p>Actions</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d182472e3814 d182472e3766 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_ADVISOR_ACTIONS.html#REFRN23312" target="_blank">DBA_ADVISOR_ACTIONS</a></code></p>
                                    </td>
                                    <td align="left" valign="top" width="52%" headers="d182472e3814 d182472e3769 ">
                                       <p>Every recommendation is associated with a suggested action to perform: either segment shrink, online redefinition (reorganization), or compression. The <code class="codeph">DBA_ADVISOR_ACTIONS</code> view provides either the SQL that you can use to perform a segment shrink or table compression, or a suggestion to reorganize the object.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d182472e3830" headers="d182472e3763 ">
                                       <p>Objects</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d182472e3830 d182472e3766 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_ADVISOR_OBJECTS.html#REFRN23320" target="_blank">DBA_ADVISOR_OBJECTS</a></code></p>
                                    </td>
                                    <td align="left" valign="top" width="52%" headers="d182472e3830 d182472e3769 ">
                                       <p>All findings, recommendations, and actions are associated with an object. If the Segment Advisor analyzes multiple segments, as with a tablespace or partitioned table, then one entry is created in the <code class="codeph">DBA_ADVISOR_OBJECTS</code> view for each analyzed segment. <a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABHCCCE" title="Column 1 contains the values for the OBJECT_TYPE parameter. The following 4 columns list the corresponding ATTR1, ATTR2, ATTR3, and ATTR4 values.">Table 19-2</a> defines the columns in this view to query for information on the analyzed segments. You can correlate the objects in this view with the objects in the findings, recommendations, and actions views.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-C664946C-730E-4389-8C16-418820453872">Viewing Segment Advisor Results with Cloud Control</a><br>With Cloud Control, you can view Segment Advisor results for both Automatic Segment Advisor runs and manual Segment Advisor runs.
                           </li>
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA">Viewing Segment Advisor Results by Querying the DBA_ADVISOR_* Views</a><br>You can view Segment Advisor results by querying  the <code class="codeph">DBA_ADVISOR_*</code> views.
                           </li>
                           <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-6F87EA4C-A7F7-49E9-9985-806D6514D3DD">Viewing Segment Advisor Results with DBMS_SPACE.ASA_RECOMMENDATIONS</a><br>The <code class="codeph">ASA_RECOMMENDATIONS</code> procedure in the <code class="codeph">DBMS_SPACE</code> package returns a nested table object that contains findings or recommendations for Automatic Segment Advisor runs and, optionally, manual Segment Advisor runs.
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-0381940C-F913-4605-90D7-D04788372DAB__GUID-B7DC7958-EE97-41F9-AB3F-0EF59949267B">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_SPACE.html#ARPLS056" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for details on the <code class="codeph">DBMS_SPACE.ASA_RECOMMENDATIONS</code> function
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="The Segment Advisor identifies segments that have space available for reclamation.">The Segment Advisor</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN11607"></a><div class="props_rev_3"><a id="GUID-C664946C-730E-4389-8C16-418820453872" name="GUID-C664946C-730E-4389-8C16-418820453872"></a><h6 id="ADMIN-GUID-C664946C-730E-4389-8C16-418820453872" class="sect6"><span class="enumeration_section">19.3.2.5.1 </span>Viewing Segment Advisor Results with Cloud Control
                        </h6>
                        <div>
                           <p>With Cloud Control, you can view Segment Advisor results for both Automatic Segment Advisor runs and manual Segment Advisor runs.</p>
                           <div class="section">
                              <p>You can view the following types of results:</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>All recommendations (multiple automatic and manual Segment Advisor runs)</p>
                                 </li>
                                 <li>
                                    <p>Recommendations from the last Automatic Segment Advisor run</p>
                                 </li>
                                 <li>
                                    <p>Recommendations from a specific run</p>
                                 </li>
                                 <li>
                                    <p>Row chaining findings</p>
                                 </li>
                              </ul>
                              <p>You can also view a list of the segments that were analyzed by the last Automatic Segment Advisor run.</p>
                              <p><span class="bold">To view Segment Advisor results with Cloud Control—All runs:</span></p>
                              <ol>
                                 <li>
                                    <p>Access the Database Home page.</p>
                                 </li>
                                 <li>
                                    <p>From the Administration menu, select <span class="bold">Storage</span>, then <span class="bold">Segment Advisor</span>.
                                    </p>
                                    <p>The Segment Advisor Recommendations page appears. Recommendations are organized by tablespace.</p>
                                 </li>
                                 <li>
                                    <p>If any recommendations are present, select a tablespace, and then click <span class="bold">Recommendation Details</span>.
                                    </p>
                                    <p>The Recommendation Details page appears. You can initiate the recommended activity from this page (shrink or reorganize).</p>
                                    <div class="infoboxnote" id="GUID-C664946C-730E-4389-8C16-418820453872__GUID-DCC253C9-26B3-40B9-A9B7-254E87C329AA">
                                       <p class="notep1">Note:</p>Do not attempt to shrink or reorganize LOBs because doing so results in errors.
                                    </div>
                                    <div class="infobox-tip" id="GUID-C664946C-730E-4389-8C16-418820453872__GUID-28984C74-68A4-46C6-A535-C3ACE5435683">
                                       <p class="notep1">Tip:</p>
                                       <p>The list entries are sorted in descending order by reclaimable space. You can click column headings to change the sort order or to change from ascending to descending order.</p>
                                    </div>
                                 </li>
                              </ol>
                              <p><span class="bold">To view Segment Advisor results with Cloud Control—Last Automatic Segment Advisor run:</span></p>
                              <ol>
                                 <li>
                                    <p>Access the Database Home page.</p>
                                 </li>
                                 <li>
                                    <p>From the Administration menu, select <span class="bold">Storage</span>, then <span class="bold">Segment Advisor</span>.
                                    </p>
                                    <p>The Segment Advisor Recommendations page appears. Recommendations are organized by tablespace.</p>
                                    <p>The Segment Advisor Recommendations page appears.</p>
                                 </li>
                                 <li>
                                    <p>In the View list, select <span class="bold">Recommendations from Last Automatic Run</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If any recommendations are present, select a tablespace and click <span class="bold">Recommendation Details</span>.
                                    </p>
                                    <p>The Recommendation Details page appears. You can initiate the recommended activity from this page (shrink or reorganize).</p>
                                 </li>
                              </ol>
                              <div class="infoboxnote" id="GUID-C664946C-730E-4389-8C16-418820453872__GUID-9BD4C98B-7070-4EE5-979B-A749F9A94866">
                                 <p class="notep1">Note:</p>Do not attempt to shrink or reorganize LOBs because doing so results in errors.
                              </div>
                              <p><span class="bold">To view Segment Advisor results with Cloud Control—Specific run:</span></p>
                              <ol>
                                 <li>
                                    <p>Access the Database Home page.</p>
                                 </li>
                                 <li>
                                    <p>From the Performance menu, select <span class="bold">Advisors Home</span>.
                                    </p>
                                    <p>The Advisor Central page appears. (See <a href="managing-space-for-schema-objects.html#GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC__CBBEFIGG">Figure 19-2</a>.)
                                    </p>
                                 </li>
                                 <li>
                                    <p>Check that your task appears in the list under the Results heading. If it does not, complete these steps:</p>
                                    <ol type="a">
                                       <li>
                                          <p>In the Search section of the page, under Advisor Type, select <span class="bold">Segment Advisor</span>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>In the Advisor Runs list, select <span class="bold">All</span> or the desired time period.
                                          </p>
                                       </li>
                                       <li>
                                          <p>(Optional) Enter a task name.</p>
                                       </li>
                                       <li>
                                          <p>Click <span class="bold">Go</span>.
                                          </p>
                                          <p>Your Segment Advisor task appears in the Results section.</p>
                                       </li>
                                    </ol>
                                 </li>
                                 <li>
                                    <p>Check the status of the job. If it is not <code class="codeph">COMPLETED</code>, use the <span class="bold">Refresh</span> control at the top of the page to refresh the page. (Do not use your browser's Refresh icon.)
                                    </p>
                                 </li>
                                 <li>
                                    <p>Click the task name.</p>
                                    <p>The Segment Advisor Task page appears, with recommendations organized by tablespace.</p>
                                 </li>
                                 <li>
                                    <p>Select a tablespace in the list, and then click <span class="bold">Recommendation Details</span>.
                                    </p>
                                    <p>The Recommendation Details page appears. You can initiate the recommended activity from this page (shrink or reorganize).</p>
                                 </li>
                              </ol>
                              <p><span class="bold">To view row chaining findings:</span></p>
                              <ol>
                                 <li>
                                    <p>Access the Database Home page.</p>
                                 </li>
                                 <li>
                                    <p>From the Administration menu, select <span class="bold">Storage</span>, then <span class="bold">Segment Advisor</span>.
                                    </p>
                                    <p>The Segment Advisor Recommendations page appears. Recommendations are organized by tablespace.</p>
                                    <p>The Segment Advisor Recommendations page appears.</p>
                                 </li>
                                 <li>
                                    <p>Under the Related Links heading, click <span class="bold">Chained Row Analysis</span>.
                                    </p>
                                    <p>The Chained Row Analysis page appears, showing all segments that have chained rows, with a chained rows percentage for each.</p>
                                 </li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB" title="The Segment Advisor creates several types of results: recommendations, findings, actions, and objects.">Viewing Segment Advisor Results</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13057"></a><a id="ADMIN11608"></a><div class="props_rev_3"><a id="GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA" name="GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA"></a><h6 id="ADMIN-GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA" class="sect6"><span class="enumeration_section">19.3.2.5.2 </span>Viewing Segment Advisor Results by Querying the DBA_ADVISOR_* Views
                        </h6>
                        <div>
                           <p>You can view Segment Advisor results by querying  the <code class="codeph">DBA_ADVISOR_*</code> views.
                           </p>
                           <div class="section">
                              <p></p>
                              <p>The headings of <a href="managing-space-for-schema-objects.html#GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA__BABGGBHI" title="This table summarizes possible outcomes of the Segment advisor. It shows the related values of columns in some of the Segment Advisor views.">Table 19-5</a> show the columns in the <code class="codeph">DBA_ADVISOR_*</code> views that contain output from the Segment Advisor. See <a href="../refrn/DBA_ADVISOR_OBJECTS.html#REFRN23320" target="_blank"><span class="italic">Oracle Database Reference</span></a> for a description of these views. The table contents summarize the possible outcomes. In addition, <a href="managing-space-for-schema-objects.html#GUID-FF02B2C2-64C2-4C1B-84A4-D24370AE59FA__BABHCCCE" title="Column 1 contains the values for the OBJECT_TYPE parameter. The following 4 columns list the corresponding ATTR1, ATTR2, ATTR3, and ATTR4 values.">Table 19-2</a> defines the columns in the <code class="codeph">DBA_ADVISOR_OBJECTS</code> view that contain information on the analyzed segments.
                              </p>
                              <p>Before querying the <code class="codeph">DBA_ADVISOR_*</code> views, you can check that the Segment Advisor task is complete by querying the <code class="codeph">STATUS</code> column in <code class="codeph">DBA_ADVISOR_TASKS</code>.
                              </p><pre class="oac_no_warn" dir="ltr">select task_name, status from dba_advisor_tasks
   where owner = 'STEVE' and advisor_name = 'Segment Advisor';
 
TASK_NAME                      STATUS
------------------------------ -----------
Manual Employees               COMPLETED
</pre><p>The following example shows how to query the <code class="codeph">DBA_ADVISOR_*</code> views to retrieve findings from all Segment Advisor runs submitted by user <code class="codeph">STEVE</code>:
                              </p><pre class="oac_no_warn" dir="ltr">select af.task_name, ao.attr2 segname, ao.attr3 partition, ao.type, af.message 
  from dba_advisor_findings af, dba_advisor_objects ao
  where ao.task_id = af.task_id
  and ao.object_id = af.object_id
  and ao.owner = 'STEVE';
</pre><pre class="oac_no_warn" dir="ltr">

TASK_NAME          SEGNAME      PARTITION       TYPE             MESSAGE
------------------ ------------ --------------- ---------------- --------------------------
Manual_Employees   EMPLOYEES                    TABLE            The free space in the obje
                                                                 ct is less than 10MB.
 
Manual_Salestable4 SALESTABLE4  SALESTABLE4_P1  TABLE PARTITION  Perform shrink, estimated
                                                                 savings is 74444154 bytes.
 
Manual_Salestable4 SALESTABLE4  SALESTABLE4_P2  TABLE PARTITION  The free space in the obje
                                                                 ct is less than 10MB.
</pre><div class="tblformalwide" id="GUID-047BCDDF-0015-43D6-AF09-294DA42B13CA__BABGGBHI">
                                 <p class="titleintable">Table 19-5 Segment Advisor Outcomes: Summary</p>
                                 <table cellpadding="4" cellspacing="0" class="FormalWide" title="Segment Advisor Outcomes: Summary" summary="This table summarizes possible outcomes of the Segment advisor. It shows the related values of columns in some of the Segment Advisor views." width="100%" frame="hsides" border="1" rules="rows">
                                    <thead>
                                       <tr align="left" valign="top">
                                          <th align="left" valign="bottom" width="24%" id="d182472e4207">MESSAGE column of DBA_ADVISOR_FINDINGS</th>
                                          <th align="left" valign="bottom" width="25%" id="d182472e4210">MORE_INFO column of DBA_ADVISOR_FINDINGS</th>
                                          <th align="left" valign="bottom" width="27%" id="d182472e4213">BENEFIT_TYPE column of DBA_ADVISOR_RECOMMENDATIONS</th>
                                          <th align="left" valign="bottom" width="24%" id="d182472e4216">ATTR1 column of DBA_ADVISOR_ACTIONS</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4221" headers="d182472e4207 ">
                                             <p>Insufficient information to make a recommendation.</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4221 d182472e4210 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4221 d182472e4213 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4221 d182472e4216 ">
                                             <p>-</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4234" headers="d182472e4207 ">
                                             <p>The free space in the object is less than 10MB.</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4234 d182472e4210 ">
                                             <p>Allocated Space:<span class="italic">xxx</span>: Used Space:<span class="italic">xxx</span>: Reclaimable Space :<span class="italic">xxx</span></p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4234 d182472e4213 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4234 d182472e4216 ">
                                             <p>-</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4255" headers="d182472e4207 ">
                                             <p>The object has some free space but cannot be shrunk because...</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4255 d182472e4210 ">
                                             <p>Allocated Space:<span class="italic">xxx</span>: Used Space:<span class="italic">xxx</span>: Reclaimable Space :<span class="italic">xxx</span></p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4255 d182472e4213 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4255 d182472e4216 ">
                                             <p>-</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4276" headers="d182472e4207 ">
                                             <p>The free space in the object is less than the size of the last extent.</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4276 d182472e4210 ">
                                             <p>Allocated Space:<span class="italic">xxx</span>: Used Space:<span class="italic">xxx</span>: Reclaimable Space :<span class="italic">xxx</span></p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4276 d182472e4213 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4276 d182472e4216 ">
                                             <p>-</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4297" headers="d182472e4207 ">
                                             <p>Perform shrink, estimated savings is <span class="italic">xxx</span> bytes.
                                             </p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4297 d182472e4210 ">
                                             <p>Allocated Space:<span class="italic">xxx</span>: Used Space:<span class="italic">xxx</span>: Reclaimable Space :<span class="italic">xxx</span></p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4297 d182472e4213 ">
                                             <p>Perform shrink, estimated savings is <span class="italic">xxx</span> bytes.
                                             </p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4297 d182472e4216 ">
                                             <p>The command to execute. For example: <code class="codeph">ALTER</code> <span class="italic"><code class="codeph">object</code></span> <code class="codeph">SHRINK SPACE</code>;)
                                             </p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4334" headers="d182472e4207 ">
                                             <p>Enable row movement of the table <span class="italic">schema</span>.<span class="italic">table</span> and perform shrink, estimated savings is <span class="italic">xxx</span> bytes.
                                             </p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4334 d182472e4210 ">
                                             <p>Allocated Space:<span class="italic">xxx</span>: Used Space:<span class="italic">xxx</span>: Reclaimable Space :<span class="italic">xxx</span></p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4334 d182472e4213 ">
                                             <p>Enable row movement of the table <span class="italic">schema</span>.<span class="italic">table</span> and perform shrink, estimated savings is <span class="italic">xxx</span> bytes
                                             </p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4334 d182472e4216 ">
                                             <p>The command to execute. For example: <code class="codeph">ALTER</code> <span class="italic"><code class="codeph">object</code></span> <code class="codeph">SHRINK SPACE</code>;)
                                             </p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4383" headers="d182472e4207 ">
                                             <p>Perform re-org on the object <span class="italic">object</span>, estimated savings is <span class="italic">xxx</span> bytes.
                                             </p>
                                             <p>(Note: This finding is for objects with reclaimable space that are not eligible for online segment shrink.)</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4383 d182472e4210 ">
                                             <p>Allocated Space:<span class="italic">xxx</span>: Used Space:<span class="italic">xxx</span>: Reclaimable Space :<span class="italic">xxx</span></p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4383 d182472e4213 ">
                                             <p>Perform re-org on the object <span class="italic">object</span>, estimated savings is <span class="italic">xxx</span> bytes.
                                             </p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4383 d182472e4216 ">
                                             <p>Perform re-org</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4418" headers="d182472e4207 ">
                                             <p>The object has chained rows that can be removed by re-org.</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4418 d182472e4210 ">
                                             <p><span class="italic">xx</span> percent chained rows can be removed by re-org.
                                             </p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4418 d182472e4213 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4418 d182472e4216 ">
                                             <p>-</p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="24%" id="d182472e4433" headers="d182472e4207 ">
                                             <p>Compress object <span class="italic">object_name</span>, estimated savings is <span class="italic">xxx</span> bytes.
                                             </p>
                                             <p>(This outcome is generated by the Automatic Segment Advisor only)</p>
                                          </td>
                                          <td align="left" valign="top" width="25%" headers="d182472e4433 d182472e4210 ">
                                             <p>Compress object <span class="italic">object_name</span>, estimated savings is <span class="italic">xxx</span> bytes.
                                             </p>
                                          </td>
                                          <td align="left" valign="top" width="27%" headers="d182472e4433 d182472e4213 ">
                                             <p>-</p>
                                          </td>
                                          <td align="left" valign="top" width="24%" headers="d182472e4433 d182472e4216 ">
                                             <p>The command to execute. For example: <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <code class="codeph">T1</code> <code class="codeph">ROW</code> <code class="codeph">STORE</code> <code class="codeph">COMPRESS</code> <code class="codeph">ADVANCED</code></p>
                                             <p>For this finding, see also the <code class="codeph">ATTR2</code> column of <code class="codeph">DBA_ADVISOR_ACTIONS</code>.
                                             </p>
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                              <!-- class="inftblhruleinformal" -->
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB" title="The Segment Advisor creates several types of results: recommendations, findings, actions, and objects.">Viewing Segment Advisor Results</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN11609"></a><div class="props_rev_3"><a id="GUID-6F87EA4C-A7F7-49E9-9985-806D6514D3DD" name="GUID-6F87EA4C-A7F7-49E9-9985-806D6514D3DD"></a><h6 id="ADMIN-GUID-6F87EA4C-A7F7-49E9-9985-806D6514D3DD" class="sect6"><span class="enumeration_section">19.3.2.5.3 </span>Viewing Segment Advisor Results with DBMS_SPACE.ASA_RECOMMENDATIONS
                        </h6>
                        <div>
                           <p>The <code class="codeph">ASA_RECOMMENDATIONS</code> procedure in the <code class="codeph">DBMS_SPACE</code> package returns a nested table object that contains findings or recommendations for Automatic Segment Advisor runs and, optionally, manual Segment Advisor runs.
                           </p>
                           <div class="section">
                              <p></p>
                              <p>Calling this procedure may be easier than working with the <code class="codeph">DBA_ADVISOR_*</code> views, because the procedure performs all the required joins for you and returns information in an easily consumable format.
                              </p>
                              <p>The following query returns recommendations by the most recent run of the Auto Segment Advisor, with the suggested command to run to follow the recommendations:</p><pre class="oac_no_warn" dir="ltr">select tablespace_name, segment_name, segment_type, partition_name,
recommendations, c1 from
table(dbms_space.asa_recommendations('FALSE', 'FALSE', 'FALSE'));


TABLESPACE_NAME                SEGMENT_NAME                   SEGMENT_TYPE
------------------------------ ------------------------------ --------------
PARTITION_NAME
------------------------------
RECOMMENDATIONS
-----------------------------------------------------------------------------
C1
-----------------------------------------------------------------------------
TVMDS_ASSM                     ORDERS1                        TABLE PARTITION
ORDERS1_P2
Perform shrink, estimated savings is 57666422 bytes.
alter table "STEVE"."ORDERS1" modify partition "ORDERS1_P2" shrink space
 
TVMDS_ASSM                     ORDERS1                        TABLE PARTITION
ORDERS1_P1
Perform shrink, estimated savings is 45083514 bytes.
alter table "STEVE"."ORDERS1" modify partition "ORDERS1_P1" shrink space
 
TVMDS_ASSM_NEW                 ORDERS_NEW                     TABLE
 
Perform shrink, estimated savings is 155398992 bytes.
alter table "STEVE"."ORDERS_NEW" shrink space
 
TVMDS_ASSM_NEW                 ORDERS_NEW_INDEX               INDEX
 
Perform shrink, estimated savings is 102759445 bytes.
alter index "STEVE"."ORDERS_NEW_INDEX" shrink space
</pre><p>See <a href="../arpls/DBMS_SPACE.html#ARPLS056" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for details on <code class="codeph">DBMS_SPACE.ASA_RECOMMENDATIONS</code>.
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-0381940C-F913-4605-90D7-D04788372DAB" title="The Segment Advisor creates several types of results: recommendations, findings, actions, and objects.">Viewing Segment Advisor Results</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADMIN11610"></a><div class="props_rev_3"><a id="GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C" name="GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C"></a><h5 id="ADMIN-GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C" class="sect5"><span class="enumeration_section">19.3.2.6 </span>Configuring the Automatic Segment Advisor
                     </h5>
                     <div>
                        <p>The Automatic Segment Advisor is an automated maintenance task. As such, you can use Cloud Control or PL/SQL package procedure calls to modify when (and if) this task runs. You can also control the resources allotted to it by modifying the appropriate resource plans.</p>
                        <div class="section">
                           <p>You can call PL/SQL package procedures to make these changes, but the easier way to is to use Cloud Control.</p>
                           <p>To configure the Automatic Segment Advisor task with Cloud Control:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Log in to Cloud Control as user <code class="codeph">SYSTEM.</code></span></li>
                           <li class="stepexpand"><span>Access the Database Home page.</span></li>
                           <li class="stepexpand"><span>From the Administration menu, select <span class="bold">Storage</span>, then <span class="bold">Segment Advisor</span>.</span><div>
                                 <p>The Segment Advisor Recommendations page appears.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Under the Related Links heading, click the link entitled <span class="bold">Automated Maintenance Tasks</span>.</span><div>
                                 <p>The Automated Maintenance Tasks page appears.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Click <span class="bold">Configure</span>.</span><div>
                                 <p>The Automated Maintenance Tasks Configuration page appears.</p>
                                 <div class="figure" id="GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C__GUID-A09A026F-778E-4961-8C62-2428364A3CAA"><img src="img/edit_job_seg_advisor.gif" alt="Description of edit_job_seg_advisor.gif follows" title="Description of edit_job_seg_advisor.gif follows" longdesc="img_text/edit_job_seg_advisor.html"><br><a href="img_text/edit_job_seg_advisor.html">Description of the illustration edit_job_seg_advisor.gif</a></div>
                                 <!-- class="figure" -->
                              </div>
                           </li>
                           <li class="stepexpand"><span>To completely disable the Automatic Segment Advisor, under Task Settings, select <span class="bold">Disabled</span> next to the Segment Advisor label, and then click <span class="bold">Apply</span>.</span></li>
                           <li class="stepexpand"><span>To disable the Automatic Segment Advisor for specific maintenance windows, clear the desired check boxes under the Segment Advisor column, and then click <span class="bold">Apply</span>.</span></li>
                           <li class="stepexpand"><span>To modify the start and end times and durations of maintenance windows, click <span class="bold">Edit Window Group</span>.</span><div>
                                 <p>The Edit Window Group page appears. Click the name of a maintenance window, and then click <span class="bold">Edit</span> to change the window's schedule. 
                                 </p>
                              </div>
                           </li>
                        </ol>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-E5D4CDF1-A5E7-448A-B6B2-43BEACCEDA3C__GUID-9FC0E801-7402-4317-8B30-C0F686C721B1">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="managing-automated-database-maintenance-tasks.html#GUID-7F7C805E-BA64-43A5-9A09-FC259FFA9AA8" title="Oracle Database has automated several common maintenance tasks typically performed by database administrators. These automated maintenance tasks are performed when the system load is expected to be light. You can enable and disable individual maintenance tasks, and can configure when these tasks run and what resource allocations they are allotted."> Managing Automated Database Maintenance Tasks</a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="The Segment Advisor identifies segments that have space available for reclamation.">The Segment Advisor</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11611"></a><div class="props_rev_3"><a id="GUID-04ED091D-495D-4F6F-A77D-F91BE5603581" name="GUID-04ED091D-495D-4F6F-A77D-F91BE5603581"></a><h5 id="ADMIN-GUID-04ED091D-495D-4F6F-A77D-F91BE5603581" class="sect5"><span class="enumeration_section">19.3.2.7 </span>Viewing Automatic Segment Advisor Information
                     </h5>
                     <div>
                        <p>You can query views to display information specific to the Automatic Segment Advisor.</p>
                        <div class="tblformal" id="GUID-04ED091D-495D-4F6F-A77D-F91BE5603581__GUID-F6A8794E-A81B-46C8-A0F6-0DC786D75A49">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table contains two rows, describing the views DBA_AUTO_SEGADV_SUMMARY and DBA_AUTO_SEGADV_CTL." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="41%" id="d182472e4720">View</th>
                                    <th align="left" valign="bottom" width="59%" id="d182472e4723">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="41%" id="d182472e4728" headers="d182472e4720 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_AUTO_SEGADV_SUMMARY.html#REFRN23519" target="_blank">DBA_AUTO_SEGADV_SUMMARY</a></code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d182472e4728 d182472e4723 ">
                                       <p>Each row of this view summarizes one Automatic Segment Advisor run. Fields include number of tablespaces and segments processed, and number of recommendations made.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="41%" id="d182472e4738" headers="d182472e4720 ">
                                       <p><code class="codeph"><a href="../refrn/DBA_AUTO_SEGADV_CTL.html#REFRN23518" target="_blank">DBA_AUTO_SEGADV_CTL</a></code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d182472e4738 d182472e4723 ">
                                       <p>Contains control information that the Automatic Segment Advisor uses to select and process segments. Each row contains information on a single object (tablespace or segment), including whether the object has been processed, and if so, the task ID under which it was processed and the reason for selecting it. </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-918AD789-47B8-4B11-9016-184D1B0D9AD4" title="The Segment Advisor identifies segments that have space available for reclamation.">The Segment Advisor</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN12625"></a><a id="ADMIN12626"></a><a id="ADMIN10161"></a><div class="props_rev_3"><a id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB" name="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB"></a><h4 id="ADMIN-GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB" class="sect4"><span class="enumeration_section">19.3.3 </span>Shrinking Database Segments Online
                  </h4>
                  <div>
                     <p>You use online segment shrink to reclaim fragmented free space below the high water mark in an Oracle Database segment.</p>
                     <div class="section">
                        <p>The benefits of segment shrink are these:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Compaction of data leads to better cache utilization, which in turn leads to better online transaction processing (OLTP) performance.</p>
                           </li>
                           <li>
                              <p>The compacted data requires fewer blocks to be scanned in full table scans, which in turns leads to better decision support system (DSS) performance.</p>
                           </li>
                        </ul>
                        <p>Segment shrink is an online, in-place operation. DML operations and queries can be issued during the data movement phase of segment shrink. Concurrent DML operations are blocked for a short time at the end of the shrink operation, when the space is deallocated. Indexes are maintained during the shrink operation and remain usable after the operation is complete. Segment shrink does not require extra disk space to be allocated. </p>
                        <p>Segment shrink reclaims unused space both above and below the high water mark. In contrast, space deallocation reclaims unused space only above the high water mark. In shrink operations, by default, the database compacts the segment, adjusts the high water mark, and releases the reclaimed space.</p>
                        <p>Segment shrink requires that rows be moved to new locations. Therefore, you must first enable row movement in the object you want to shrink and disable any rowid-based triggers defined on the object. You enable row movement in a table with the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ... <code class="codeph">ENABLE</code> <code class="codeph">ROW</code> <code class="codeph">MOVEMENT</code> command.
                        </p>
                        <p>Shrink operations can be performed only on segments in locally managed tablespaces with automatic segment space management (ASSM). Within an ASSM tablespace, all segment types are eligible for online segment shrink except these:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>IOT mapping tables</p>
                           </li>
                           <li>
                              <p>Tables with rowid based materialized views</p>
                           </li>
                           <li>
                              <p>Tables with function-based indexes</p>
                           </li>
                           <li>
                              <p><code class="codeph">SECUREFILE</code> LOBs
                              </p>
                           </li>
                           <li>
                              <p>Tables compressed with the following compression methods:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Basic table compression	 using <code class="codeph">ROW STORE COMPRESS BASIC</code></p>
                                 </li>
                                 <li>
                                    <p>Warehouse compression using <code class="codeph">COLUMN STORE COMPRESS FOR QUERY</code></p>
                                 </li>
                                 <li>
                                    <p>Archive compression using <code class="codeph">COLUMN STORE COMPRESS FOR ARCHIVE</code></p>
                                 </li>
                              </ul>
                              <p>However, tables compressed with advanced row compression	 using <code class="codeph">ROW STORE COMPRESS ADVANCED</code> are eligible for online segment shrink. See <span class="q">"<a href="managing-tables.html#GUID-ED833867-4B7F-442E-A70C-9C19DAA8F445" title="Compression saves disk space, reduces memory use in the database buffer cache, and can significantly speed query execution during reads.">Consider Using Table Compression</a>"</span> for information about table compression methods.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB__GUID-49144676-3041-44FD-BA7A-9D9D11A7804B">
                           <p class="notep1">Note:</p>
                           <p>Shrinking database segments online might cause dependent database objects to become invalid. See <span class="q">"<a href="managing-schema-objects.html#GUID-919EF353-E9F4-4767-B6BD-5191BE3E38E5" title="Some types of schema objects reference other objects. An object that references another object is called a dependent object, and an object being referenced is a referenced object. These references are established at compile time, and if the compiler cannot resolve them, the dependent object being compiled is marked invalid.">About Object Dependencies and Object Invalidation</a>"</span>.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB__GUID-07E73054-3AAF-4C86-BA60-8C0CFCC6D068">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sqlrf/ALTER-TABLE.html#SQLRF01001" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information on the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> command.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB__GUID-76821E67-F4AD-4C3E-85F8-C8CB2DC8C916">Invoking Online Segment Shrink</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Before invoking online segment shrink, view the findings and recommendations of the Segment Advisor. For more information, see <span class="q">"<a href="managing-space-for-schema-objects.html#GUID-E9B57A45-2688-42B6-9782-D49702D51F24" title="To use the Segment Advisor, check the results of Automatic Segment Advisor, and, optionally, run the Segment Advisor manually.">Using the Segment Advisor</a>"</span>.
                        </p>
                        <p>You invoke online segment shrink with Cloud Control or with SQL commands in SQL*Plus. The remainder of this section discusses the command line method.</p>
                        <div class="infoboxnote" id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB__GUID-019E41AE-5DA9-4556-B880-4B6CC4F17584">
                           <p class="notep1">Note:</p>
                           <p>You can invoke segment shrink directly from the Recommendation Details page in Cloud Control. Or, to invoke segment shrink for an individual table in Cloud Control, display the table on the Tables page, select the table, and then click <span class="bold">Shrink Segment</span> in the Actions list. (See <a href="managing-space-for-schema-objects.html#GUID-13F7613E-DE8A-4788-BDC0-AC233C2083BC__CBBGDAJJ">Figure 19-1</a>.) Perform a similar operation in Cloud Control to shrink indexes, materialized views, and so on.
                           </p>
                        </div>
                        <p>You can shrink space in a table, index-organized table, index, partition, subpartition, materialized view, or materialized view log. You do this using <code class="codeph">ALTER</code> <code class="codeph">TABLE</code>, <code class="codeph">ALTER</code> <code class="codeph">INDEX</code>, <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>, or <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code> statement with the <code class="codeph">SHRINK SPACE</code> clause.
                        </p>
                        <p>Two optional clauses let you control how the shrink operation proceeds:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">COMPACT</code> clause lets you divide the shrink segment operation into two phases. When you specify <code class="codeph">COMPACT</code>, Oracle Database defragments the segment space and compacts the table rows but postpones the resetting of the high water mark and the deallocation of the space until a future time. This option is useful if you have long-running queries that might span the operation and attempt to read from blocks that have been reclaimed. The defragmentation and compaction results are saved to disk, so the data movement does not have to be redone during the second phase. You can reissue the <code class="codeph">SHRINK SPACE</code> clause without the <code class="codeph">COMPACT</code> clause during off-peak hours to complete the second phase.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">CASCADE</code> clause extends the segment shrink operation to all dependent segments of the object. For example, if you specify <code class="codeph">CASCADE</code> when shrinking a table segment, all indexes of the table will also be shrunk. (You need not specify <code class="codeph">CASCADE</code> to shrink the partitions of a partitioned table.) To see a list of dependent segments of a given object, you can run the <code class="codeph">OBJECT_DEPENDENT_SEGMENTS</code> procedure of the <code class="codeph">DBMS_SPACE</code> package.
                              </p>
                           </li>
                        </ul>
                        <p>As with other DDL operations, segment shrink causes subsequent SQL statements to be reparsed because of invalidation of cursors unless you specify the <code class="codeph">COMPACT</code> clause.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB__GUID-7862624E-7B51-4826-8E38-F041D37DF0BC">Examples</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Shrink a table and all of its dependent segments (including <code class="codeph">BASICFILE</code> LOB segments):
                        </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE employees SHRINK SPACE CASCADE;
</pre><p>Shrink a <code class="codeph">BASICFILE</code> LOB segment only:
                        </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE employees MODIFY LOB (perf_review) (SHRINK SPACE);
</pre><p>Shrink a single partition of a partitioned table:</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE customers MODIFY PARTITION cust_P1 SHRINK SPACE;
</pre><p>Shrink an IOT index segment and the overflow segment:</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE cities SHRINK SPACE CASCADE;
</pre><p>Shrink an IOT overflow segment only:</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE cities OVERFLOW SHRINK SPACE;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-37DF35E0-116B-4AAB-BFB3-DDBDBAB29BEB__GUID-CF3EA2D6-C8F7-45A6-8475-0329DD3AB8AD">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../sqlrf/index.html" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for the syntax and restrictions of the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code>, <code class="codeph">ALTER</code> <code class="codeph">INDEX</code>, <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>, and <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code> statements with the <code class="codeph">SHRINK SPACE</code> clause
                              </p>
                           </li>
                           <li>
                              <p><a href="../adlob/index.html" target="_blank"><span class="italic">Oracle Database SecureFiles and Large Objects Developer's Guide</span></a> for more information about LOB segments
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" title="You can reclaim unused space. Segment Advisor, is an Oracle Database component that identifies segments that have space available for reclamation.">Reclaiming Unused Space</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11612"></a><div class="props_rev_3"><a id="GUID-7ED839DE-64AA-4F7B-8279-E2A6CA9AE7DA" name="GUID-7ED839DE-64AA-4F7B-8279-E2A6CA9AE7DA"></a><h4 id="ADMIN-GUID-7ED839DE-64AA-4F7B-8279-E2A6CA9AE7DA" class="sect4"><span class="enumeration_section">19.3.4 </span>Deallocating Unused Space
                  </h4>
                  <div>
                     <p>When you deallocate unused space, the database frees the unused space at the unused (high water mark) end of the database segment and makes the space available for other segments in the tablespace.</p>
                     <div class="section">
                        <p></p>
                        <p>Before deallocation, you can run the <code class="codeph">UNUSED_SPACE</code> procedure of the <code class="codeph">DBMS_SPACE</code> package, which returns information about the position of the high water mark and the amount of unused space in a segment. For segments in locally managed tablespaces with automatic segment space management, use the <code class="codeph">SPACE_USAGE</code> procedure for more accurate information on unused space.
                        </p>
                        <div class="infoboxnotealso" id="GUID-7ED839DE-64AA-4F7B-8279-E2A6CA9AE7DA__GUID-41A7440A-BFE0-4E8B-AC5A-2E54937FD326">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_SPACE.html#ARPLS056" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> contains the description of the <code class="codeph">DBMS_SPACE</code> package
                           </p>
                        </div>
                        <p>The following statements deallocate unused space in a segment (table, index or cluster):</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE <span class="italic">table</span> DEALLOCATE UNUSED KEEP <span class="italic">integer</span>;
ALTER INDEX <span class="italic">index</span> DEALLOCATE UNUSED KEEP <span class="italic">integer</span>;
ALTER CLUSTER <span class="italic">cluster</span> DEALLOCATE UNUSED KEEP <span class="italic">integer</span>;
</pre><p>The <code class="codeph">KEEP</code> clause is optional and lets you specify the amount of space retained in the segment. You can verify that the deallocated space is freed by examining the <code class="codeph">DBA_FREE_SPACE</code> view.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7ED839DE-64AA-4F7B-8279-E2A6CA9AE7DA__GUID-B95A1509-3F7D-4477-A536-EB2A0EA3E267">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../sqlrf/index.html" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for details on the syntax and semantics of deallocating unused space
                              </p>
                           </li>
                           <li>
                              <p><a href="../refrn/DBA_FREE_SPACE.html#REFRN23076" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about the <code class="codeph">DBA_FREE_SPACE</code> view
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" title="You can reclaim unused space. Segment Advisor, is an Oracle Database component that identifies segments that have space available for reclamation.">Reclaiming Unused Space</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN13457"></a><div class="props_rev_3"><a id="GUID-3B76FB24-BC76-43DD-9305-F11EEA138B09" name="GUID-3B76FB24-BC76-43DD-9305-F11EEA138B09"></a><h3 id="ADMIN-GUID-3B76FB24-BC76-43DD-9305-F11EEA138B09" class="sect3"><span class="enumeration_section">19.4 </span>Dropping Unused Object Storage
               </h3>
               <div>
                  <p>The <code class="codeph">DBMS_SPACE_ADMIN</code> package includes the <code class="codeph">DROP_EMPTY_SEGMENTS</code> procedure, which enables you to drop segments for empty tables and partitions that have been migrated from previous releases. This includes segments of dependent objects of the table, such as index segments, where possible. 
                  </p>
                  <div class="section">
                     <p></p>
                     <p>The following example drops empty segments from every table in the database.</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_SPACE_ADMIN.DROP_EMPTY_SEGMENTS();
END;
</pre><p>The following drops empty segments from the <code class="codeph">HR.EMPLOYEES</code> table, including dependent objects.
                     </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_SPACE_ADMIN.DROP_EMPTY_SEGMENTS(
    schema_name  =&gt; 'HR',
    table_name   =&gt; 'EMPLOYEES');
END;
</pre><p>This procedure requires 11.2.0 or higher compatibility level.</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-3B76FB24-BC76-43DD-9305-F11EEA138B09__GUID-F948C036-58EE-4D7A-9889-754754DD39E1">
                     <p class="notep1">See Also:</p>
                     <p>See <a href="../arpls/DBMS_SPACE_ADMIN.html#ARPLS057" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference </span></a>for details about this procedure
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning.">Managing Space for Schema Objects</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11613"></a><div class="props_rev_3"><a id="GUID-03E8BA75-995F-4584-AE3C-6AB70D9F21A4" name="GUID-03E8BA75-995F-4584-AE3C-6AB70D9F21A4"></a><h3 id="ADMIN-GUID-03E8BA75-995F-4584-AE3C-6AB70D9F21A4" class="sect3"><span class="enumeration_section">19.5 </span>Understanding Space Usage of Data Types
               </h3>
               <div>
                  <p>When creating tables and other data structures, you must know how much space they will require. Each data type has different space requirements.</p>
                  <p>The <a href="../lnpls/plsql-data-types.html#LNPLS003" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> and <a href="../sqlrf/Basic-Elements-of-Oracle-SQL.html#SQLRF002" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> contain extensive descriptions of data types and their space requirements.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning.">Managing Space for Schema Objects</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11614"></a><div class="props_rev_3"><a id="GUID-2FB91EF7-B908-410E-B952-AF9A71CC25B1" name="GUID-2FB91EF7-B908-410E-B952-AF9A71CC25B1"></a><h3 id="ADMIN-GUID-2FB91EF7-B908-410E-B952-AF9A71CC25B1" class="sect3"><span class="enumeration_section">19.6 </span>Displaying Information About Space Usage for Schema Objects
               </h3>
               <p>Oracle Database provides data dictionary views and PL/SQL packages that allow you to display information about the space usage of schema objects.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA">Using PL/SQL Packages to Display Information About Schema Object Space Usage</a><br>A set of <code class="codeph">DBMS_SPACE</code> subprograms provide information about schema objects.
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7">Schema Objects Space Usage Data Dictionary Views</a><br>A set of data dictionary views display information about space usage in schema objects.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning.">Managing Space for Schema Objects</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN12627"></a><a id="ADMIN11615"></a><div class="props_rev_3"><a id="GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA" name="GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA"></a><h4 id="ADMIN-GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA" class="sect4"><span class="enumeration_section">19.6.1 </span>Using PL/SQL Packages to Display Information About Schema Object Space Usage
                  </h4>
                  <div>
                     <p>A set of <code class="codeph">DBMS_SPACE</code> subprograms provide information about schema objects.
                     </p>
                     <div class="section">
                        <div class="tblformal" id="GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA__GUID-CB8C4C36-E4E2-416B-92C5-7C4DF8E616E6">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Column 1 contains the names of PL/SQL packages that display information about schema object space usage. Column 2 describes each package." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="39%" id="d182472e5491">Package and Procedure/Function</th>
                                    <th align="left" valign="bottom" width="61%" id="d182472e5494">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d182472e5499" headers="d182472e5491 ">
                                       <p><code class="codeph">DBMS_SPACE.UNUSED_SPACE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d182472e5499 d182472e5494 ">
                                       <p>Returns information about unused space in an object (table, index, or cluster).</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d182472e5507" headers="d182472e5491 ">
                                       <p><code class="codeph">DBMS_SPACE.FREE_BLOCKS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d182472e5507 d182472e5494 ">
                                       <p>Returns information about free data blocks in an object (table, index, or cluster) whose segment free space is managed by free lists (segment space management is <code class="codeph">MANUAL</code>). 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d182472e5518" headers="d182472e5491 ">
                                       <p><code class="codeph">DBMS_SPACE.SPACE_USAGE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d182472e5518 d182472e5494 ">
                                       <p>Returns information about free data blocks in an object (table, index, or cluster) whose segment space management is <code class="codeph">AUTO</code>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA__GUID-C7CF4332-B1EC-4C01-ABA8-83888903CAFE">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_SPACE.html#ARPLS056" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for a description of the <code class="codeph">DBMS_SPACE</code> package
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C70B37A6-1BD8-4019-82AC-34CF15DFE3BA__GUID-5576FAEA-DAF8-410F-9149-B89FD587C0D8">Example: Using DBMS_SPACE.UNUSED_SPACE</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The following SQL*Plus example uses the <code class="codeph">DBMS_SPACE</code> package to obtain unused space information. 
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; VARIABLE total_blocks NUMBER
SQL&gt; VARIABLE total_bytes NUMBER
SQL&gt; VARIABLE unused_blocks NUMBER
SQL&gt; VARIABLE unused_bytes NUMBER
SQL&gt; VARIABLE lastextf NUMBER
SQL&gt; VARIABLE last_extb NUMBER
SQL&gt; VARIABLE lastusedblock NUMBER
SQL&gt; exec DBMS_SPACE.UNUSED_SPACE('SCOTT', 'EMP', 'TABLE', :total_blocks, -
&gt;    :total_bytes,:unused_blocks, :unused_bytes, :lastextf, -
&gt;    :last_extb, :lastusedblock);

PL/SQL procedure successfully completed.

SQL&gt; PRINT

TOTAL_BLOCKS
------------
           5

TOTAL_BYTES
-----------
      10240

...

LASTUSEDBLOCK
-------------
            3</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-2FB91EF7-B908-410E-B952-AF9A71CC25B1" title="Oracle Database provides data dictionary views and PL/SQL packages that allow you to display information about the space usage of schema objects.">Displaying Information About Space Usage for Schema Objects</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11616"></a><div class="props_rev_3"><a id="GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7" name="GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7"></a><h4 id="ADMIN-GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7" class="sect4"><span class="enumeration_section">19.6.2 </span>Schema Objects Space Usage Data Dictionary Views
                  </h4>
                  <div>
                     <p>A set of data dictionary views display information about space usage in schema objects.</p>
                     <div class="section">
                        <p>These views display information about space usage in schema objects:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7__GUID-2D8A7221-8BAF-4C9C-860F-5F86AE02FEC7">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Column 1 contains the names of views, column 2 describes each view." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="32%" id="d182472e5614">View</th>
                                 <th align="left" valign="bottom" width="68%" id="d182472e5617">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d182472e5622" headers="d182472e5614 ">
                                    <p><code class="codeph"><a href="../refrn/DBA_SEGMENTS.html#REFRN23243" target="_blank">DBA_SEGMENTS</a></code> 
                                    </p>
                                    <p><code class="codeph"><a href="../refrn/USER_SEGMENTS.html#REFRN26243" target="_blank">USER_SEGMENTS</a></code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d182472e5622 d182472e5617 ">
                                    <p><span class="bold"></span>DBA view describes storage allocated for all database segments. User view describes storage allocated for segments for the current user.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d182472e5640" headers="d182472e5614 ">
                                    <p><code class="codeph"><a href="../refrn/DBA_EXTENTS.html#REFRN23072" target="_blank">DBA_EXTENTS</a></code> 
                                    </p>
                                    <p><code class="codeph"><a href="../refrn/USER_EXTENTS.html#REFRN26072" target="_blank">USER_EXTENTS</a></code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d182472e5640 d182472e5617 ">
                                    <p><span class="bold"></span>DBA view describes extents comprising all segments in the database. User view describes extents comprising segments for the current user.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d182472e5658" headers="d182472e5614 ">
                                    <p><code class="codeph"><a href="../refrn/DBA_FREE_SPACE.html#REFRN23076" target="_blank">DBA_FREE_SPACE</a></code> 
                                    </p>
                                    <p><code class="codeph"><a href="../refrn/USER_FREE_SPACE.html#REFRN26076" target="_blank">USER_FREE_SPACE</a></code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d182472e5658 d182472e5617 ">
                                    <p>DBA view lists free extents in all tablespaces. User view shows free space information for tablespaces for which the user has quota.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-E205E4B4-6A5B-49B7-973D-74DC05E5E2DA">Example 1: Displaying Segment Information</a><br>You can query the <code class="codeph">DBA_SEGMENTS</code> view to display segment information.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-64CD62D6-3697-4802-802C-B37381880776">Example 2: Displaying Extent Information</a><br>You can query the <code class="codeph">DBA_EXTENTS</code> data dictionary view for information about the currently allocated extents in a database.
                        </li>
                        <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-5FCF46EA-4CC3-4CF6-9525-23A4C4EE1E3D">Example 3: Displaying the Free Space (Extents) in a Tablespace</a><br>You can query the <code class="codeph">DBA_FREE_SPACE</code> data dictionary view for information about the free extents (extents not allocated to any segment) in a database.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-2FB91EF7-B908-410E-B952-AF9A71CC25B1" title="Oracle Database provides data dictionary views and PL/SQL packages that allow you to display information about the space usage of schema objects.">Displaying Information About Space Usage for Schema Objects</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11617"></a><div class="props_rev_3"><a id="GUID-E205E4B4-6A5B-49B7-973D-74DC05E5E2DA" name="GUID-E205E4B4-6A5B-49B7-973D-74DC05E5E2DA"></a><h5 id="ADMIN-GUID-E205E4B4-6A5B-49B7-973D-74DC05E5E2DA" class="sect5"><span class="enumeration_section">19.6.2.1 </span>Example 1: Displaying Segment Information
                     </h5>
                     <div>
                        <p>You can query the <code class="codeph">DBA_SEGMENTS</code> view to display segment information.
                        </p>
                        <div class="section">
                           <p>The following query returns the name and size of each index segment in schema <code class="codeph">hr</code>:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT SEGMENT_NAME, TABLESPACE_NAME, BYTES, BLOCKS, EXTENTS
    FROM DBA_SEGMENTS
    WHERE SEGMENT_TYPE = 'INDEX'
    AND OWNER='HR'
    ORDER BY SEGMENT_NAME;
</pre><p>The query output is:</p><pre class="oac_no_warn" dir="ltr">SEGMENT_NAME              TABLESPACE_NAME    BYTES BLOCKS EXTENTS
------------------------- --------------- -------- ------ -------
COUNTRY_C_ID_PK           EXAMPLE            65536     32       1
DEPT_ID_PK                EXAMPLE            65536     32       1
DEPT_LOCATION_IX          EXAMPLE            65536     32       1
EMP_DEPARTMENT_IX         EXAMPLE            65536     32       1
EMP_EMAIL_UK              EXAMPLE            65536     32       1
EMP_EMP_ID_PK             EXAMPLE            65536     32       1
EMP_JOB_IX                EXAMPLE            65536     32       1
EMP_MANAGER_IX            EXAMPLE            65536     32       1
EMP_NAME_IX               EXAMPLE            65536     32       1
JHIST_DEPARTMENT_IX       EXAMPLE            65536     32       1
JHIST_EMPLOYEE_IX         EXAMPLE            65536     32       1
JHIST_EMP_ID_ST_DATE_PK   EXAMPLE            65536     32       1
JHIST_JOB_IX              EXAMPLE            65536     32       1
JOB_ID_PK                 EXAMPLE            65536     32       1
LOC_CITY_IX               EXAMPLE            65536     32       1
LOC_COUNTRY_IX            EXAMPLE            65536     32       1
LOC_ID_PK                 EXAMPLE            65536     32       1
LOC_STATE_PROVINCE_IX     EXAMPLE            65536     32       1
REG_ID_PK                 EXAMPLE            65536     32       1

19 rows selected.</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7" title="A set of data dictionary views display information about space usage in schema objects.">Schema Objects Space Usage Data Dictionary Views</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11618"></a><div class="props_rev_3"><a id="GUID-64CD62D6-3697-4802-802C-B37381880776" name="GUID-64CD62D6-3697-4802-802C-B37381880776"></a><h5 id="ADMIN-GUID-64CD62D6-3697-4802-802C-B37381880776" class="sect5"><span class="enumeration_section">19.6.2.2 </span>Example 2: Displaying Extent Information
                     </h5>
                     <div>
                        <p>You can query the <code class="codeph">DBA_EXTENTS</code> data dictionary view for information about the currently allocated extents in a database.
                        </p>
                        <div class="section">
                           <p>For example, the following query identifies the extents allocated to each index segment in the <code class="codeph">hr</code> schema and the size of each of those extents:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT SEGMENT_NAME, SEGMENT_TYPE, TABLESPACE_NAME, EXTENT_ID, BYTES, BLOCKS
    FROM DBA_EXTENTS
    WHERE SEGMENT_TYPE = 'INDEX'
    AND OWNER='HR'
    ORDER BY SEGMENT_NAME;
</pre><p>The query output is:</p><pre class="oac_no_warn" dir="ltr">SEGMENT_NAME              SEGMENT_TYPE TABLESPACE_NAME EXTENT_ID    BYTES BLOCKS
------------------------- ------------ --------------- --------- -------- ------
COUNTRY_C_ID_PK           INDEX        EXAMPLE                 0    65536     32
DEPT_ID_PK                INDEX        EXAMPLE                 0    65536     32
DEPT_LOCATION_IX          INDEX        EXAMPLE                 0    65536     32
EMP_DEPARTMENT_IX         INDEX        EXAMPLE                 0    65536     32
EMP_EMAIL_UK              INDEX        EXAMPLE                 0    65536     32
EMP_EMP_ID_PK             INDEX        EXAMPLE                 0    65536     32
EMP_JOB_IX                INDEX        EXAMPLE                 0    65536     32
EMP_MANAGER_IX            INDEX        EXAMPLE                 0    65536     32
EMP_NAME_IX               INDEX        EXAMPLE                 0    65536     32
JHIST_DEPARTMENT_IX       INDEX        EXAMPLE                 0    65536     32
JHIST_EMPLOYEE_IX         INDEX        EXAMPLE                 0    65536     32
JHIST_EMP_ID_ST_DATE_PK   INDEX        EXAMPLE                 0    65536     32
JHIST_JOB_IX              INDEX        EXAMPLE                 0    65536     32
JOB_ID_PK                 INDEX        EXAMPLE                 0    65536     32
LOC_CITY_IX               INDEX        EXAMPLE                 0    65536     32
LOC_COUNTRY_IX            INDEX        EXAMPLE                 0    65536     32
LOC_ID_PK                 INDEX        EXAMPLE                 0    65536     32
LOC_STATE_PROVINCE_IX     INDEX        EXAMPLE                 0    65536     32
REG_ID_PK                 INDEX        EXAMPLE                 0    65536     32

19 rows selected.
</pre><p>For the <code class="codeph">hr</code> schema, no segment has multiple extents allocated to it.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7" title="A set of data dictionary views display information about space usage in schema objects.">Schema Objects Space Usage Data Dictionary Views</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11619"></a><div class="props_rev_3"><a id="GUID-5FCF46EA-4CC3-4CF6-9525-23A4C4EE1E3D" name="GUID-5FCF46EA-4CC3-4CF6-9525-23A4C4EE1E3D"></a><h5 id="ADMIN-GUID-5FCF46EA-4CC3-4CF6-9525-23A4C4EE1E3D" class="sect5"><span class="enumeration_section">19.6.2.3 </span>Example 3: Displaying the Free Space (Extents) in a Tablespace
                     </h5>
                     <div>
                        <p>You can query the <code class="codeph">DBA_FREE_SPACE</code> data dictionary view for information about the free extents (extents not allocated to any segment) in a database.
                        </p>
                        <div class="section">
                           <p>For example, the following query reveals the amount of free space available as free extents in the <code class="codeph">SMUNDO</code> tablespace:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT TABLESPACE_NAME, FILE_ID, BYTES, BLOCKS
    FROM DBA_FREE_SPACE
    WHERE TABLESPACE_NAME='SMUNDO';
</pre><p>The query output is:</p><pre class="oac_no_warn" dir="ltr">TABLESPACE_NAME  FILE_ID    BYTES BLOCKS
--------------- -------- -------- ------
SMUNDO                 3    65536     32
SMUNDO                 3    65536     32
SMUNDO                 3    65536     32
SMUNDO                 3    65536     32
SMUNDO                 3    65536     32
SMUNDO                 3    65536     32
SMUNDO                 3   131072     64
SMUNDO                 3   131072     64
SMUNDO                 3    65536     32
SMUNDO                 3  3407872   1664

10 rows selected.</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-68FBB892-0FEE-4B6A-B7A3-884FD2C488F7" title="A set of data dictionary views display information about space usage in schema objects.">Schema Objects Space Usage Data Dictionary Views</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN11621"></a><div class="props_rev_3"><a id="GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977" name="GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977"></a><h3 id="ADMIN-GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977" class="sect3"><span class="enumeration_section">19.7 </span>Capacity Planning for Database Objects 
               </h3>
               <div>
                  <p>Oracle Database provides two ways to plan capacity for database objects: with Cloud Control or with the <code class="codeph">DBMS_SPACE</code> PL/SQL package. Three procedures in the <code class="codeph">DBMS_SPACE</code> package enable you to predict the size of new objects and monitor the size of existing database objects.
                  </p>
                  <p>This documentation discusses the PL/SQL method. See Cloud Control online help and <span class="q">"<a href="managing-space-for-schema-objects.html#GUID-E9B57A45-2688-42B6-9782-D49702D51F24" title="To use the Segment Advisor, check the results of Automatic Segment Advisor, and, optionally, run the Segment Advisor manually.">Using the Segment Advisor</a>"</span> for details on capacity planning with Cloud Control.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-8EDCE354-32FB-438C-AF0F-6834F6E6EFB3">Estimating the Space Use of a Table</a><br>The size of a database table can vary greatly depending on tablespace storage attributes, tablespace block size, and many other factors. The <code class="codeph">CREATE_TABLE_COST</code> procedure of the <code class="codeph">DBMS_SPACE</code> package lets you estimate the space use cost of creating a table.
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-093AB2A6-F9AE-4145-A507-3FDE64B5BF00">Estimating the Space Use of an Index</a><br>The <code class="codeph">CREATE_INDEX_COST</code> procedure of the <code class="codeph">DBMS_SPACE</code> package lets you estimate the space use cost of creating an index on an existing table.
                     </li>
                     <li class="ulchildlink"><a href="managing-space-for-schema-objects.html#GUID-A9590F06-F8D1-4795-B814-044BE6932A05">Obtaining Object Growth Trends</a><br>The <code class="codeph">OBJECT_GROWTH_TREND</code> function of the <code class="codeph">DBMS_SPACE</code> package produces a table of one or more rows, where each row describes the space use of the object at a specific time.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="Managing space for schema objects involves tasks such as managing tablespace alerts and space allocation, reclaiming unused space, dropping unused object storage, monitoring space usage, and capacity planning.">Managing Space for Schema Objects</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11622"></a><div class="props_rev_3"><a id="GUID-8EDCE354-32FB-438C-AF0F-6834F6E6EFB3" name="GUID-8EDCE354-32FB-438C-AF0F-6834F6E6EFB3"></a><h4 id="ADMIN-GUID-8EDCE354-32FB-438C-AF0F-6834F6E6EFB3" class="sect4"><span class="enumeration_section">19.7.1 </span>Estimating the Space Use of a Table 
                  </h4>
                  <div>
                     <p>The size of a database table can vary greatly depending on tablespace storage attributes, tablespace block size, and many other factors. The <code class="codeph">CREATE_TABLE_COST</code> procedure of the <code class="codeph">DBMS_SPACE</code> package lets you estimate the space use cost of creating a table.
                     </p>
                     <div class="section">
                        <p>See <a href="../arpls/DBMS_SPACE.html#ARPLS056" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for details on the parameters of this procedure.
                        </p>
                        <p>The procedure has two variants. The first variant uses average row size to estimate size. The second variant uses column information to estimate table size. Both variants require as input the following values:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">TABLESPACE_NAME</code>: The tablespace in which the object will be created. The default is the <code class="codeph">SYSTEM</code> tablespace.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ROW_COUNT</code>: The anticipated number of rows in the table.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">PCT_FREE</code>: The percentage of free space you want to reserve in each block for future expansion of existing rows due to updates.
                              </p>
                           </li>
                        </ul>
                        <p>In addition, the first variant also requires as input a value for <code class="codeph">AVG_ROW_SIZE</code>, which is the anticipated average row size in bytes.
                        </p>
                        <p>The second variant also requires for each anticipated column values for <code class="codeph">COLINFOS</code>, which is an object type comprising the attributes <code class="codeph">COL_TYPE</code> (the data type of the column) and <code class="codeph">COL_SIZE</code> (the number of characters or bytes in the column).
                        </p>
                        <p>The procedure returns two values:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">USED_BYTES</code>: The actual bytes used by the data, including overhead for block metadata, <code class="codeph">PCT_FREE</code> space, and so forth.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ALLOC_BYTES</code>: The amount of space anticipated to be allocated for the object taking into account the tablespace extent characteristics.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-8EDCE354-32FB-438C-AF0F-6834F6E6EFB3__GUID-C3B1BBD3-B33F-482C-A43C-614AC7025DB1">
                           <p class="notep1">Note:</p>
                           <p>The default size of the first extent of any new segment for a partitioned table is 8 MB instead of 64 KB. This helps improve performance of inserts and queries on partitioned tables. Although partitioned tables will start with a larger initial size, once sufficient data is inserted, the space consumption will be the same as in previous releases. You can override this default by setting the <code class="codeph">INITIAL</code> size in the storage clause for the table. This new default only applies to table partitions and LOB partitions.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977" title="Oracle Database provides two ways to plan capacity for database objects: with Cloud Control or with the DBMS_SPACE PL/SQL package. Three procedures in the DBMS_SPACE package enable you to predict the size of new objects and monitor the size of existing database objects.">Capacity Planning for Database Objects</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13458"></a><div class="props_rev_3"><a id="GUID-093AB2A6-F9AE-4145-A507-3FDE64B5BF00" name="GUID-093AB2A6-F9AE-4145-A507-3FDE64B5BF00"></a><h4 id="ADMIN-GUID-093AB2A6-F9AE-4145-A507-3FDE64B5BF00" class="sect4"><span class="enumeration_section">19.7.2 </span>Estimating the Space Use of an Index 
                  </h4>
                  <div>
                     <p>The <code class="codeph">CREATE_INDEX_COST</code> procedure of the <code class="codeph">DBMS_SPACE</code> package lets you estimate the space use cost of creating an index on an existing table.
                     </p>
                     <div class="section">
                        <p>The procedure requires as input the following values:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">DDL</code>: The <code class="codeph">CREATE INDEX</code> statement that would create the index. The table specified in this DDL statement must be an existing table.
                              </p>
                           </li>
                           <li>
                              <p>[Optional] <code class="codeph">PLAN_TABLE</code>: The name of the plan table to use. The default is <code class="codeph">NULL</code>.
                              </p>
                           </li>
                        </ul>
                        <p>The results returned by this procedure depend on statistics gathered on the segment. Therefore, be sure to obtain statistics shortly before executing this procedure. In the absence of recent statistics, the procedure does not issue an error, but it may return inappropriate results. The procedure returns the following values:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">USED_BYTES</code>: The number of bytes representing the actual index data.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ALLOC_BYTES</code>: The amount of space allocated for the index in the tablespace.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977" title="Oracle Database provides two ways to plan capacity for database objects: with Cloud Control or with the DBMS_SPACE PL/SQL package. Three procedures in the DBMS_SPACE package enable you to predict the size of new objects and monitor the size of existing database objects.">Capacity Planning for Database Objects</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13459"></a><div class="props_rev_3"><a id="GUID-A9590F06-F8D1-4795-B814-044BE6932A05" name="GUID-A9590F06-F8D1-4795-B814-044BE6932A05"></a><h4 id="ADMIN-GUID-A9590F06-F8D1-4795-B814-044BE6932A05" class="sect4"><span class="enumeration_section">19.7.3 </span>Obtaining Object Growth Trends 
                  </h4>
                  <div>
                     <p>The <code class="codeph">OBJECT_GROWTH_TREND</code> function of the <code class="codeph">DBMS_SPACE</code> package produces a table of one or more rows, where each row describes the space use of the object at a specific time.
                     </p>
                     <div class="section">
                        <p>The function retrieves the space use totals from the Automatic Workload Repository or computes current space use and combines it with historic space use changes retrieved from Automatic Workload Repository. See <a href="../arpls/DBMS_SPACE.html#ARPLS68110" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for detailed information on the parameters of this function.
                        </p>
                        <p>The function requires as input the following values:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">OBJECT_OWNER</code>: The owner of the object.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OBJECT_NAME</code>: The name of the object.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">PARTITION_NAME</code>: The name of the table or index partition, is relevant. Specify <code class="codeph">NULL</code> otherwise.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OBJECT_TYPE</code>: The type of the object.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">START_TIME</code>: A <code class="codeph">TIMESTAMP</code> value indicating the beginning of the growth trend analysis.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">END_TIME</code>: A <code class="codeph">TIMESTAMP</code> value indicating the end of the growth trend analysis. The default is "<code class="codeph">NOW</code>".
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">INTERVAL</code>: The length in minutes of the reporting interval during which the function should retrieve space use information.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SKIP_INTERPOLATED</code>: Determines whether the function should omit values based on recorded statistics before and after the <code class="codeph">INTERVAL</code> ('<code class="codeph">YES</code>') or not ('<code class="codeph">NO</code>'). This setting is useful when the result table will be displayed as a table rather than a chart, because you can see more clearly how the actual recording interval relates to the requested reporting interval.
                              </p>
                           </li>
                        </ul>
                        <p>The function returns a table, each of row of which provides space use information on the object for one interval. If the return table is very large, the results are pipelined so that another application can consume the information as it is being produced. The output table has the following columns:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">TIMEPOINT</code>: A <code class="codeph">TIMESTAMP</code> value indicating the time of the reporting interval.
                              </p>
                              <p>Records are not produced for values of <code class="codeph">TIME</code> that precede the oldest recorded statistics for the object.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SPACE_USAGE</code>: The number of bytes actually being used by the object data.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SPACE_ALLOC</code>: The number of bytes allocated to the object in the tablespace at that time.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">QUALITY</code>: A value indicating how well the requested reporting interval matches the actual recording of statistics. This information is useful because there is no guaranteed reporting interval for object size use statistics, and the actual reporting interval varies over time and from object to object.
                              </p>
                              <p>The values of the <code class="codeph">QUALITY</code> column are:
                              </p>
                           </li>
                           <li>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">GOOD</code>: The value whenever the value of <code class="codeph">TIME</code> is based on recorded statistics with a recorded timestamp within 10% of the <code class="codeph">INTERVAL</code> specified in the input parameters.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">INTERPOLATED</code>: The value did not meet the criteria for <code class="codeph">GOOD</code>, but was based on recorded statistics before and after the value of <code class="codeph">TIME</code>. Current in-memory statistics can be collected across all instances in a cluster and treated as the "recorded" value for the present time.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">PROJECTION</code>: The value of <code class="codeph">TIME</code> is in the future as of the time the table was produced. In an Oracle Real Application Clusters environment, the rules for recording statistics allow each instance to choose independently which objects will be selected.
                                    </p>
                                 </li>
                              </ul>
                              <p>The output returned by this function is an aggregation of values recorded across all instances in an Oracle RAC environment. Each value can be computed from a combination of <code class="codeph">GOOD</code> and <code class="codeph">INTERPOLATED</code> values. The aggregate value returned is marked <code class="codeph">GOOD</code> if at least 80% of that value was derived from <code class="codeph">GOOD</code> instance values.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-space-for-schema-objects.html#GUID-BF0E093F-AE77-4A8E-BC17-68AFE4FE6977" title="Oracle Database provides two ways to plan capacity for database objects: with Cloud Control or with the DBMS_SPACE PL/SQL package. Three procedures in the DBMS_SPACE package enable you to predict the size of new objects and monitor the size of existing database objects.">Capacity Planning for Database Objects</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
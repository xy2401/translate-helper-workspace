<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>untilClause</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery Reference">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96242-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="toDestSpec.html" title="Previous" type="text/html">
      <link rel="next" href="recovery-catalog-views.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference">
    <meta name="dcterms.isVersionOf" content="RCMRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="toDestSpec.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="recovery-catalog-views.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-subclauses.html" property="item" typeof="WebPage"><span property="name">RMAN Subclauses</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">untilClause</li>
            </ol>
            <a id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A" name="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A"></a><a id="RCMRF90482"></a><a id="RCMRF90483"></a><a id="RCMRF90484"></a><a id="RCMRF160"></a>
            
            <h2 id="RCMRF-GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A" class="sect2"><span class="enumeration_section">4.22 </span>untilClause
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__GUID-C3EF1F2E-20C0-4E51-96CF-DE6130BAD228">Purpose</p>
                  <p>Use the <span class="italic"><code class="codeph">untilClause</code></span> subclause to specify an upper limit by time, SCN, or log sequence number for various RMAN operations.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__GUID-8255A4D1-99BE-4DE1-A20F-D9D7264F330F">Usage Notes</p>
                  <p>To specify a restore point, use the <code class="codeph">TO</code> <code class="codeph">RESTORE</code> <code class="codeph">POINT</code> clause. See <span class="q">"<a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a>"</span> for an example.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__GUID-5EECBE31-F78B-4F23-8E4E-786C2669DAB4">Syntax</p>
                  <p id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABEDABD"><span class="bold"><span class="italic">untilClause</span>::=</span></p>
                  <div class="figure" id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__GUID-9586D297-DDC2-4629-BDC0-787BD2533632"><img src="img/untilclause.gif" alt="Description of untilclause.eps follows" title="Description of untilclause.eps follows" longdesc="img_text/untilclause.html"><br><a href="img_text/untilclause.html">Description of the illustration untilclause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__GUID-1EBE9136-A469-4130-88EA-6F6281CB043D">Semantics</p>
                  <div class="tblformalwide" id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__GUID-E6A80DF9-9152-4C4A-A64A-CD08B8DF0763">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title summary="Describes untilClause subclause parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d125032e140">Syntax Element</th>
                              <th align="left" valign="bottom" width="70%" id="d125032e143">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d125032e148" headers="d125032e140 ">
                                 <p><a id="d125032e150" class="indexterm-anchor"></a><code class="codeph">UNTIL SCN</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d125032e148 d125032e143 ">
                                 <p>Specifies an SCN as an upper, noninclusive limit.</p>
                                 <p>RMAN selects only files that it can use to restore or recover up to but not including the specified SCN (see <a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABHACEC">Example 4-41</a>). For example, <code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code> <code class="codeph">DATABASE UNTIL SCN 1000</code> chooses only backups that could be used to recover to SCN 1000.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d125032e176" headers="d125032e140 ">
                                 <p><a id="d125032e178" class="indexterm-anchor"></a><code class="codeph">UNTIL SEQUENCE</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d125032e176 d125032e143 ">
                                 <p>Specifies a redo log sequence number and thread as an upper, noninclusive limit.</p>
                                 <p>RMAN selects only files that it can use to restore or recover up to but not including the specified sequence number. For example, <code class="codeph"><a href="REPORT.html#GUID-8352987F-533A-4146-A157-F091103169B0">REPORT</a></code> <code class="codeph">OBSOLETE UNTIL SEQUENCE 8000</code> reports only backups that could be used to recover through log sequence 7999.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d125032e202" headers="d125032e140 ">
                                 <p><a id="d125032e204" class="indexterm-anchor"></a><code class="codeph">&nbsp;&nbsp;&nbsp;THREAD</code>&nbsp;<span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d125032e202 d125032e143 ">
                                 <p>Specifies the number of the redo thread.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d125032e216" headers="d125032e140 ">
                                 <p><a id="d125032e218" class="indexterm-anchor"></a><code class="codeph">UNTIL&nbsp;TIME</code> <code class="codeph">'</code><span class="italic"><code class="codeph">date_string</code></span><code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d125032e216 d125032e143 ">
                                 <p>Specifies a time as an upper, noninclusive limit (see <a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABBCFAJ">Example 4-42</a>).
                                 </p>
                                 <p>RMAN selects only files that it can use to restore and recover up to but not including the specified time. For example, <code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">BACKUP</code> <code class="codeph">UNTIL</code> <code class="codeph">TIME</code> <code class="codeph">'SYSDATE-7'</code> lists all backups that could be used to recover to a point one week ago.
                                 </p>
                                 <p><a id="d125032e257" class="indexterm-anchor"></a><a id="d125032e259" class="indexterm-anchor"></a>When specifying dates in RMAN commands, the date string must be either:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>A literal string whose format matches the <code class="codeph">NLS_DATE_FORMAT</code> setting.
                                       </p>
                                    </li>
                                    <li>
                                       <p>A SQL expression of type <code class="codeph">DATE</code>, for example, <code class="codeph">'SYSDATE-10'</code> or <code class="codeph">"TO_DATE('01/30/2013',</code> <code class="codeph">'MM/DD/YYYY')"</code>. The second example includes its own date format mask and so is independent of the current <code class="codeph">NLS_DATE_FORMAT</code> setting.
                                       </p>
                                    </li>
                                 </ul>
                                 <p>Following are examples of typical date settings in RMAN commands:</p><pre class="oac_no_warn" dir="ltr">BACKUP ARCHIVELOG FROM TIME 'SYSDATE-31' UNTIL TIME 'SYSDATE-14';
RESTORE DATABASE UNTIL TIME "TO_DATE('09/20/06','MM/DD/YY')";
</pre><p><span class="bold">Note:</span> The granularity of time-based recovery is dependent on time stamps in the redo log. For example, suppose that you specify the following command:
                                 </p><pre class="oac_no_warn" dir="ltr">RECOVER DATABASE UNTIL TIME '2013-07-26 17:45:00';</pre><p>If no redo was written with a time stamp of <code class="codeph">17:45:00</code>, then recovery proceeds until it finds the next redo time stamp that is higher. For example, the next redo time stamp may be <code class="codeph">17:45:04</code>. You can check for the nearest time for a specific SCN by querying the <code class="codeph">FIRST_TIME</code> and <code class="codeph">FIRST_CHANGE#</code> columns in <code class="codeph">V$LOG_HISTORY TABLE</code>.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__GUID-AD452FD4-65CA-4E84-B966-4543237EEA14">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABHACEC">
                  <p class="titleinexample">Example 4-41 Performing Incomplete Recovery to a Specified SCN</p>
                  <p>This example, which assumes a mounted database, recovers the database up to (but not including) the specified SCN:</p><pre class="oac_no_warn" dir="ltr">STARTUP FORCE MOUNT
RUN
{
  SET UNTIL SCN 1418901;  # set to 1418901 to recover database through SCN 1418900
  RESTORE DATABASE;
  RECOVER DATABASE;
}
ALTER DATABASE OPEN RESETLOGS;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABBCFAJ">
                  <p class="titleinexample">Example 4-42 Reporting Obsolete Backups</p>
                  <p>This example assumes that you want to be able to recover to any point within the last week. It considers as obsolete all backups that could be used to recover the database to a point one week ago:</p><pre class="oac_no_warn" dir="ltr">REPORT OBSOLETE UNTIL TIME 'SYSDATE-7';</pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>发现元数据</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Java API Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Java API Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="olap-java-api-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T13:53:39-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2000, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96402-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="understanding-olap-java-api-metadata.html" title="Previous" type="text/html"></link>
      <link rel="next" href="creating-metadata-and-analytic-workspaces.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OLAP Java API Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OLAAP"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="understanding-olap-java-api-metadata.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="creating-metadata-and-analytic-workspaces.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Java API开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">发现元数据</li>
            </ol>
            <a id="GUID-0F34DAE9-AD90-4107-A14D-4DA29A13A369" name="GUID-0F34DAE9-AD90-4107-A14D-4DA29A13A369"></a><a id="OLAAP192"></a>
            
            <h2 id="OLAAP-GUID-0F34DAE9-AD90-4107-A14D-4DA29A13A369" class="sect2"><span class="enumeration_chapter">3</span>发现元数据</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何连接到Oracle数据库实例以及如何发现现有的Oracle OLAP元数据对象。它包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="discovering-metadata.html#GUID-C52FB8BE-E358-476B-B6F4-EFFD63A763C5">连接到Oracle OLAP</a></p>
                  </li>
                  <li>
                     <p><a href="discovering-metadata.html#GUID-7C32D99F-9420-4083-B431-3D481DF6D5A5">发现元数据的过程概述</a></p>
                  </li>
                  <li>
                     <p><a href="discovering-metadata.html#GUID-97258A59-DFD0-4148-910B-F755E1863CEC">创建MdmMetadataProvider</a></p>
                  </li>
                  <li>
                     <p><a href="discovering-metadata.html#GUID-16169952-DB41-4C4B-A865-88A968BF30EE">获取MdmSchema对象</a></p>
                  </li>
                  <li>
                     <p><a href="discovering-metadata.html#GUID-3E74DDA7-CCAB-4675-877C-BD5A3524C099">获取MdmSchema的内容</a></p>
                  </li>
                  <li>
                     <p><a href="discovering-metadata.html#GUID-6EA02C02-26C9-402E-9D1F-F40957D12156">获取MdmPrimaryDimension包含的对象</a></p>
                  </li>
                  <li>
                     <p><a href="discovering-metadata.html#GUID-EB1B2BAF-3378-439E-92A1-D893E3059217">获取元数据对象的源</a></p>
                  </li>
               </ul>
            </div><a id="OLAAP193"></a><div class="props_rev_3"><a id="GUID-C52FB8BE-E358-476B-B6F4-EFFD63A763C5" name="GUID-C52FB8BE-E358-476B-B6F4-EFFD63A763C5"></a><h3 id="OLAAP-GUID-C52FB8BE-E358-476B-B6F4-EFFD63A763C5" class="sect3"><span class="enumeration_section">3.1</span>连接到Oracle OLAP</h3>
               <div>
                  <p>要连接到Oracle数据库实例中的Oracle OLAP服务器，OLAP Java API客户端应用程序使用Java数据库连接（JDBC）API的Oracle实现。用于建立与Oracle OLAP的连接的Oracle JDBC类位于Java归档文件<code class="codeph">ojdbc6.jar</code> 。有关获取该文件的信息，请参阅<a href="setting-up-development-environment.html#GUID-32895224-13F7-444D-A7DB-88DE88577ADC">设置开发环境</a> 。
                  </p>
                  <p>以下主题描述了创建与Oracle OLAP的连接。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="discovering-metadata.html#GUID-201C482C-51FC-414C-AC2D-D8B61F0732AA">连接的先决条件</a></p>
                     </li>
                     <li>
                        <p><a href="discovering-metadata.html#GUID-AC01B619-A83D-4F3D-A10D-C7282DA4EC3D">建立连接</a></p>
                     </li>
                     <li>
                        <p><a href="discovering-metadata.html#GUID-8AC173E6-ADB0-4E58-A64C-7BDAABDB07F3">关闭Connection和DataProvider</a></p>
                     </li>
                  </ul>
               </div><a id="OLAAP194"></a><div class="props_rev_3"><a id="GUID-201C482C-51FC-414C-AC2D-D8B61F0732AA" name="GUID-201C482C-51FC-414C-AC2D-D8B61F0732AA"></a><h4 id="OLAAP-GUID-201C482C-51FC-414C-AC2D-D8B61F0732AA" class="sect4"><span class="enumeration_section">3.1.1</span>连接的先决条件</h4>
                  <div>
                     <p><a id="d10528e166" class="indexterm-anchor"></a>在尝试连接到Oracle OLAP服务器之前，请确保满足以下要求：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle数据库实例正在运行，并随OLAP选项一起安装。</p>
                        </li>
                        <li>
                           <p>您用于连接的Oracle数据库用户标识可以访问包含数据的关系模式。</p>
                        </li>
                        <li>
                           <p>Oracle JDBC和OLAP Java API jar文件位于应用程序开发环境中。有关设置所需jar文件的信息，请参阅<a href="setting-up-development-environment.html#GUID-32895224-13F7-444D-A7DB-88DE88577ADC">设置开发环境</a> 。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="OLAAP195"></a><div class="props_rev_3"><a id="GUID-AC01B619-A83D-4F3D-A10D-C7282DA4EC3D" name="GUID-AC01B619-A83D-4F3D-A10D-C7282DA4EC3D"></a><h4 id="OLAAP-GUID-AC01B619-A83D-4F3D-A10D-C7282DA4EC3D" class="sect4"><span class="enumeration_section">3.1.2</span>建立连接</h4>
                  <div>
                     <div class="section">
                        <p>要连接到OLAP服务器，请执行以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>创建与数据库的JDBC连接。</span></li>
                        <li><span>创建<code class="codeph">DataProvider</code>和<code class="codeph">UserSession</code> 。</span></li>
                     </ol>
                     <div class="section">
                        <p>以下主题描述了这些步骤：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="discovering-metadata.html#GUID-ED721605-0725-4DC1-BB89-92B1300C4A0A">创建JDBC连接</a></p>
                           </li>
                           <li>
                              <p><a href="discovering-metadata.html#GUID-61E30A1A-438C-4527-8E76-BA9664354C62">创建DataProvider和UserSession</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="OLAAP197"></a><a id="OLAAP196"></a><div class="props_rev_3"><a id="GUID-ED721605-0725-4DC1-BB89-92B1300C4A0A" name="GUID-ED721605-0725-4DC1-BB89-92B1300C4A0A"></a><h5 id="OLAAP-GUID-ED721605-0725-4DC1-BB89-92B1300C4A0A" class="sect5"><span class="enumeration_section">3.1.2.1</span>创建JDBC连接</h5>
                     <div>
                        <div class="section">
                           <p><a id="d10528e287" class="indexterm-anchor"></a><a id="d10528e291" class="indexterm-anchor"></a><a id="d10528e295" class="indexterm-anchor"></a><a id="d10528e299" class="indexterm-anchor"></a>创建与Oracle数据库实例的连接的一种方法是使用<code class="codeph">oracle.jdbc.OracleDataSource</code>和<code class="codeph">oracle.jdbc.OracleConnection</code>对象。例如，以下代码创建一个<code class="codeph">oracle.jdbc.OracleDataSource</code>设置对象的属性，然后从<code class="codeph">OracleDataSource</code>获取JDBC <code class="codeph">OracleConnection</code>对象。
                           </p>
                           <p><code class="codeph">OracleDataSource</code>的属性值来自<code class="codeph">java.util.Properties</code>对象。<code class="codeph">url</code>属性的格式为<code class="codeph">jdbc:oracle:thin:@serverName:portNumber:sid</code> <code class="codeph">serverName</code> <code class="codeph">jdbc:oracle:thin:@serverName:portNumber:sid</code> ，其中<code class="codeph">serverName</code>是运行Oracle数据库实例的服务器的主机名， <code class="codeph">portNumber</code>是数据库的TCP / IP侦听器端口号， <code class="codeph">sid</code>是数据库实例的系统标识符（SID）。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-ED721605-0725-4DC1-BB89-92B1300C4A0A__CHDBJICA">
                           <p class="titleinexample">示例3-1获取JDBC OracleConnection</p><pre class="oac_no_warn" dir="ltr">oracle.jdbc。OracleConnection conn = null;尝试{OracleDataSource ods = new OracleDataSource（）; ods.setURL（props.getProperty（ “URL”））; ods.setUser（props.getProperty（ “用户”））; ods.setPassword（props.getProperty（ “密码”））; conn =（oracle.jdbc。OracleConnection）ods.getConnection（）; } catch（SQLException e）{System.out.println（“连接尝试失败。”+ e）; }</pre><p><a id="d10528e350" class="indexterm-anchor"></a>在该示例中，连接使用Oracle JDBC瘦驱动程序。使用<code class="codeph">getConnection</code>方法指定连接特征的方法有很多种。还有其他方法可以连接到Oracle数据库实例。有关Oracle JDBC连接的更多信息，请参见<span><cite>Oracle Database JDBC Developer's Guide</cite></span> 。
                           </p>
                           <p>获得<code class="codeph">OracleConnection</code>对象后，可以创建OLAP Java API <code class="codeph">DataProvider</code>和<code class="codeph">UserSession</code>对象。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="OLAAP199"></a><a id="OLAAP198"></a><div class="props_rev_3"><a id="GUID-61E30A1A-438C-4527-8E76-BA9664354C62" name="GUID-61E30A1A-438C-4527-8E76-BA9664354C62"></a><h5 id="OLAAP-GUID-61E30A1A-438C-4527-8E76-BA9664354C62" class="sect5"><span class="enumeration_section">3.1.2.2</span>创建DataProvider和UserSession</h5>
                     <div>
                        <div class="section">
                           <p><a id="d10528e409" class="indexterm-anchor"></a><a id="d10528e413" class="indexterm-anchor"></a><a id="d10528e417" class="indexterm-anchor"></a>以下代码创建<code class="codeph">DataProvider</code>和<code class="codeph">UserSession</code> 。<code class="codeph">conn</code>对象是<a href="discovering-metadata.html#GUID-ED721605-0725-4DC1-BB89-92B1300C4A0A__CHDBJICA">示例3-1中</a>的<code class="codeph">OracleConnection</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-61E30A1A-438C-4527-8E76-BA9664354C62__GUID-C6BDBBCF-9B4C-4F48-A06E-6D545F7B8554">
                           <p class="titleinexample">示例3-2创建DataProvider</p><pre class="oac_no_warn" dir="ltr">DataProvider dp = new DataProvider（）;尝试{UserSession session = dp.createSession（conn）; } catch（SQLException e）{System.out.println（“无法创建UserSession。”+ e）; }</pre><p>使用<code class="codeph">DataProvider</code> ，您可以获取<code class="codeph">MdmMetadataProvider</code> ， <span class="q">“ <a href="discovering-metadata.html#GUID-97258A59-DFD0-4148-910B-F755E1863CEC">创建MdmMetadataProvider</a> ”中</span>对此进行了描述。您可以使用<code class="codeph">DataProvider</code>获取<code class="codeph">TransactionProvider</code>并创建<code class="codeph">Source</code>和<code class="codeph">CursorManager</code>对象，如<a href="understanding-source-objects.html#GUID-871159BB-8ED1-454B-B9FA-62F36683F4B2">了解源对象</a>和<a href="making-queries-using-source-methods.html#GUID-B5D5AF5D-330E-46D3-8BD7-E84B1373E6A7">使用源方法进行查询中所述</a> 。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="OLAAP201"></a><a id="OLAAP200"></a><div class="props_rev_3"><a id="GUID-8AC173E6-ADB0-4E58-A64C-7BDAABDB07F3" name="GUID-8AC173E6-ADB0-4E58-A64C-7BDAABDB07F3"></a><h4 id="OLAAP-GUID-8AC173E6-ADB0-4E58-A64C-7BDAABDB07F3" class="sect4"><span class="enumeration_section">3.1.3</span>关闭Connection和DataProvider</h4>
                  <div>
                     <div class="section">
                        <p>如果您已完成使用OLAP Java API，但希望继续使用JDBC连接到数据库，则使用<code class="codeph">DataProvider</code>的<code class="codeph">close</code>方法释放OLAP Java API资源。
                        </p><pre class="oac_no_warn" dir="ltr">dp.close（）; // dp是DataProvider</pre><p><a id="d10528e525" class="indexterm-anchor"></a>完成数据库的工作后，请使用<code class="codeph">OracleConnection.close</code>方法。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-8AC173E6-ADB0-4E58-A64C-7BDAABDB07F3__GUID-99D5FEF9-5DD3-4CD5-9992-3E849BDE7939">
                        <p class="titleinexample">示例3-3关闭连接</p><pre class="oac_no_warn" dir="ltr">试试{conn.close（）; // conn是OracleConnection} catch（SQLException e）{System.out.println（“无法关闭连接。”+ e）; }</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="OLAAP202"></a><div class="props_rev_3"><a id="GUID-7C32D99F-9420-4083-B431-3D481DF6D5A5" name="GUID-7C32D99F-9420-4083-B431-3D481DF6D5A5"></a><h3 id="OLAAP-GUID-7C32D99F-9420-4083-B431-3D481DF6D5A5" class="sect3"><span class="enumeration_section">3.2</span>发现元数据的过程概述</h3>
               <div>
                  <p><a id="d10528e573" class="indexterm-anchor"></a><a id="d10528e577" class="indexterm-anchor"></a> OLAP Java API提供对分析工作区数据的访问，或者访问关系结构中的数据。此数据集合是应用程序的数据存储。
                  </p>
                  <p><a id="d10528e583" class="indexterm-anchor"></a>潜在地，数据存储包括MdmRootSchema的所有子<code class="codeph">MdmRootSchema</code> 。但是，在应用程序运行时可见的数据存储的范围取决于应用于通过其进行连接的用户标识的数据库特权。用户可以看到所有的<code class="codeph">MdmDatabaseSchema</code>下存在的对象<code class="codeph">MdmRootSchema</code> ，但用户可以看到由一个拥有的对象<code class="codeph">MdmDatabaseSchema</code>仅当用户有权访问元数据对象，</p>
                  <p>以下主题描述了发现元数据。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="discovering-metadata.html#GUID-34F85F5B-AE52-4849-8888-BDBE9F9B1144">发现元数据的目的</a></p>
                     </li>
                     <li>
                        <p><a href="discovering-metadata.html#GUID-9CC0C3F2-13BD-4AD8-8B22-002F120D4C4A">发现元数据的步骤</a></p>
                     </li>
                  </ul>
               </div><a id="OLAAP203"></a><div class="props_rev_3"><a id="GUID-34F85F5B-AE52-4849-8888-BDBE9F9B1144" name="GUID-34F85F5B-AE52-4849-8888-BDBE9F9B1144"></a><h4 id="OLAAP-GUID-34F85F5B-AE52-4849-8888-BDBE9F9B1144" class="sect4"><span class="enumeration_section">3.2.1</span>发现元数据的目的</h4>
                  <div>
                     <p><a id="d10528e648" class="indexterm-anchor"></a>数据存储中的元数据对象可帮助您的应用程序理解数据。它们为您提供了一种方法，可以找出可用的数据，结构的数据以及数据的特征。
                     </p>
                     <p>因此，连接后，您的第一步是找出可用的元数据。然后，您可以向最终用户提供有关要选择或计算的数据以及如何显示数据的选项。</p>
                     <p>在应用程序发现元数据之后，它通常会继续创建用于选择，计算和以其他方式操纵数据的查询。要以这些方式处理数据，必须从元数据对象中获取<code class="codeph">Source</code>对象。这些<code class="codeph">Source</code>对象指定用于查询的数据。有关<code class="codeph">Source</code>对象的更多信息，请参阅<a href="understanding-source-objects.html#GUID-871159BB-8ED1-454B-B9FA-62F36683F4B2">了解源对象</a> 。
                     </p>
                  </div>
               </div><a id="OLAAP204"></a><div class="props_rev_3"><a id="GUID-9CC0C3F2-13BD-4AD8-8B22-002F120D4C4A" name="GUID-9CC0C3F2-13BD-4AD8-8B22-002F120D4C4A"></a><h4 id="OLAAP-GUID-9CC0C3F2-13BD-4AD8-8B22-002F120D4C4A" class="sect4"><span class="enumeration_section">3.2.2</span>发现元数据的步骤</h4>
                  <div>
                     <div class="section">
                        <p>在调查元数据之前，您的应用程序必须连接到Oracle OLAP。然后，您的应用程序可能会执行以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>创建一个<code class="codeph">DataProvider</code> 。</span></li>
                        <li><span>从<code class="codeph">DataProvider</code>获取<code class="codeph">MdmMetadataProvider</code> 。</span></li>
                        <li><span>获取<code class="codeph">MdmRootSchema</code>从<code class="codeph">MdmMetadataProvider</code> 。</span></li>
                        <li><span>获取所有<code class="codeph">MdmDatabaseSchema</code>对象或获取单个对象。</span></li>
                        <li><span>获取<code class="codeph">MdmOrganizationalSchema</code>对象拥有的<code class="codeph">MdmCube</code> ， <code class="codeph">MdmDimension</code>和<code class="codeph">MdmDatabaseSchema</code>对象。</span></li>
                     </ol>
                     <div class="section">
                        <p>以下主题详细介绍了这些步骤。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="discovering-metadata.html#GUID-97258A59-DFD0-4148-910B-F755E1863CEC">创建MdmMetadataProvider</a></p>
                           </li>
                           <li>
                              <p><a href="discovering-metadata.html#GUID-16169952-DB41-4C4B-A865-88A968BF30EE">获取MdmSchema对象</a></p>
                           </li>
                           <li>
                              <p><a href="discovering-metadata.html#GUID-3E74DDA7-CCAB-4675-877C-BD5A3524C099">获取MdmSchema的内容</a></p>
                           </li>
                           <li>
                              <p><a href="discovering-metadata.html#GUID-6EA02C02-26C9-402E-9D1F-F40957D12156">获取MdmPrimaryDimension包含的对象</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OLAAP206"></a><a id="OLAAP205"></a><div class="props_rev_3"><a id="GUID-97258A59-DFD0-4148-910B-F755E1863CEC" name="GUID-97258A59-DFD0-4148-910B-F755E1863CEC"></a><h3 id="OLAAP-GUID-97258A59-DFD0-4148-910B-F755E1863CEC" class="sect3"><span class="enumeration_section">3.3</span>创建MdmMetadataProvider</h3>
               <div>
                  <div class="section">
                     <p><a id="d10528e816" class="indexterm-anchor"></a><a id="d10528e820" class="indexterm-anchor"></a><a id="d10528e824" class="indexterm-anchor"></a><a id="d10528e828" class="indexterm-anchor"></a><a id="d10528e832" class="indexterm-anchor"></a> <code class="codeph">MdmMetadataProvider</code>通过提供<code class="codeph">MdmRootSchema</code>来访问数据存储中的元数据。在创建<code class="codeph">MdmMetadataProvider</code>之前，必须按照<a href="creating-metadata-and-analytic-workspaces.html#GUID-67674127-304F-4F8A-BCA1-410C8CB4797E">创建元数据和分析工作区中的</a>描述<a href="creating-metadata-and-analytic-workspaces.html#GUID-67674127-304F-4F8A-BCA1-410C8CB4797E">创建</a> <code class="codeph">DataProvider</code> 。<a href="discovering-metadata.html#GUID-97258A59-DFD0-4148-910B-F755E1863CEC__BGBCIBGB">例3-4</a>创建了一个<code class="codeph">MdmMetadataProvider</code> 。在示例中， <code class="codeph">dp</code>是<code class="codeph">DataProvider</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-97258A59-DFD0-4148-910B-F755E1863CEC__BGBCIBGB">
                     <p class="titleinexample">示例3-4创建MdmMetadataProvider</p><pre class="oac_no_warn" dir="ltr">MdmMetadataProvider mp = null; try {mp =（MdmMetadataProvider）dp.getMdmMetadataProvider（）; } catch（例外e）{println（“无法获取MDM元数据提供者。”+ e）; }</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OLAAP208"></a><a id="OLAAP209"></a><a id="OLAAP207"></a><div class="props_rev_3"><a id="GUID-16169952-DB41-4C4B-A865-88A968BF30EE" name="GUID-16169952-DB41-4C4B-A865-88A968BF30EE"></a><h3 id="OLAAP-GUID-16169952-DB41-4C4B-A865-88A968BF30EE" class="sect3"><span class="enumeration_section">3.4</span>获取MdmSchema对象</h3>
               <div>
                  <div class="section">
                     <p>提供对数据存储中数据的访问的Oracle OLAP元数据对象由<code class="codeph">MdmSchema</code>对象组织。顶级<code class="codeph">MdmSchema</code>是<code class="codeph">MdmRootSchema</code> 。获取<code class="codeph">MdmRootSchema</code>是探索数据存储中元数据的第一步。从<code class="codeph">MdmRootSchema</code> ，您可以获取<code class="codeph">MdmDatabaseSchema</code>对象。该<code class="codeph">MdmRootSchema</code>有<code class="codeph">MdmDatabaseSchema</code>为每个数据库用户。<code class="codeph">MdmDatabaseSchema</code>可以具有<code class="codeph">MdmOrganizationalSchema</code>对象， <code class="codeph">MdmOrganizationalSchema</code>对象组织<code class="codeph">MdmDatabaseSchema</code>拥有的元数据对象。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-16169952-DB41-4C4B-A865-88A968BF30EE__CCHBJCGC">
                     <p class="titleinexample">示例3-5获取MdmSchema对象</p>
                     <p>此示例演示如何获取<code class="codeph">MdmRootSchema</code> ，其下的<code class="codeph">MdmDatabaseSchema</code>对象以及它们下的任何<code class="codeph">MdmOrganizationalSchema</code>对象。
                     </p><pre class="oac_no_warn" dir="ltr">private void getSchemas（MdmMetadataProvider mp）{MdmRootSchema mdmRootSchema =（MdmRootSchema）mp.getRootSchema（）; List &lt;MdmDatabaseSchema&gt; dbSchemas = mdmRootSchema.getDatabaseSchemas（）; for（MdmDatabaseSchema mdmDBSchema：dbSchemas）{println（mdmDBSchema.getName（））; getOrgSchemas（mdmDBSchema）; private void getOrgSchemas（MdmSchema mdmSchema）{ArrayList orgSchemaList = new ArrayList（）; if（mdmSchema instanceof MdmDatabaseSchema）{MdmDatabaseSchema mdmDBSchema =（MdmDatabaseSchema）mdmSchema; orgSchemaList =（ArrayList）mdmDBSchema.getOrganizationalSchemas（）; } else if（mdmSchema instanceof MdmOrganizationalSchema）{MdmOrganizationalSchema mdmOrgSchema =（MdmOrganizationalSchema）mdmSchema; orgSchemaList =（ArrayList）mdmOrgSchema.getOrganizationalSchemas（）; } if（orgSchemaList.size（）&gt; 0）{println（“+ mdmSchema.getName（）+”的MdmOrganizationalSchema子模块是：“）; Iterator orgSchemaListItr = orgSchemaList.iterator（）; while（orgSchemaListItr.hasNext（））{MdmOrganizationalSchema mdmOrgSchema =（MdmOrganizationalSchema）orgSchemaListItr.next（）;的println（mdmOrgSchema.getName（））; getOrgSchemas（mdmOrgSchema）; } else {println（mdmSchema.getName（）+“没有任何”+“MdmOrganizationalSchema子模式。”）; }}</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-16169952-DB41-4C4B-A865-88A968BF30EE__CCHDFFAI">
                     <p class="titleinexample">示例3-6获取单个MdmDatabaseSchema</p>
                     <p>而不是让所有的的<code class="codeph">MdmDatabaseSchema</code>对象，你可以使用<code class="codeph">getDatabaseSchema</code>的方法<code class="codeph">MdmRootSchema</code>获取架构为单个用户。此示例演示如何为GLOBAL用户获取<code class="codeph">MdmDatabaseSchema</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">MdmDatabaseSchema mdmGlobalSchema = mdmRootSchema.getDatabaseSchema（“GLOBAL”）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OLAAP211"></a><a id="OLAAP212"></a><a id="OLAAP210"></a><div class="props_rev_3"><a id="GUID-3E74DDA7-CCAB-4675-877C-BD5A3524C099" name="GUID-3E74DDA7-CCAB-4675-877C-BD5A3524C099"></a><h3 id="OLAAP-GUID-3E74DDA7-CCAB-4675-877C-BD5A3524C099" class="sect3"><span class="enumeration_section">3.5</span>获取MdmSchema的内容</h3>
               <div>
                  <div class="section">
                     <p><a id="d10528e1018" class="indexterm-anchor"></a>从<code class="codeph">MdmSchema</code> ，您可以获得它包含的所有子模式， <code class="codeph">MdmCube</code> ， <code class="codeph">MdmPrimaryDimension</code>和<code class="codeph">MdmMeasure</code>对象。此外， <code class="codeph">MdmRootSchema</code>有一个<code class="codeph">MdmMeasureDimension</code> ，它包含所有可用<code class="codeph">MdmMeasure</code>对象的<code class="codeph">List</code> 。
                     </p>
                     <p>如果要显示特定用户拥有的所有维度和方法，则可以从该用户的<code class="codeph">MdmDatabaseSchema</code>获取维度和度量列表。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-3E74DDA7-CCAB-4675-877C-BD5A3524C099__CCHFDFFD">
                     <p class="titleinexample">示例3-7获取MdmDatabaseSchema的维度和度量</p>
                     <p>此示例从<a href="discovering-metadata.html#GUID-16169952-DB41-4C4B-A865-88A968BF30EE__CCHDFFAI">示例3-6中</a>的<code class="codeph">MdmDatabaseSchema</code>获取维度和度量。它显示每个维度和度量的名称。
                     </p><pre class="oac_no_warn" dir="ltr">private void getObjects（MdmDatabaseSchema mdmGlobalSchema）{List dimList = mdmGlobalSchema.getDimensions（）; String objName = mdmGlobalSchema.getName（）+“schema”; getNames（dimList，“dimensions”，objName）;列出measList = mdmGlobalSchema.getMeasures（）; getNames（measList，“measures”，objName）; private void getNames（List objectList，String objTypes，String objName）{println（“+ objName +”的“+ objTypes +”是：“）; Iterator objListItr = objectList.iterator（）; while（objListItr.hasNext（））{MdmObject mdmObj =（MdmObject）objListItr.next（）;的println（mdmObj.getName（））; }}</pre><p>该示例的输出如下。</p><pre class="oac_no_warn" dir="ltr">GLOBAL模式的维度为：CHANNEL_AWJ CUSTOMER_AWJ PRODUCT_AWJ TIME_AWJ GLOBAL模式的度量为：UNIT_COST UNIT_PRICE SALES UNITS COST</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-3E74DDA7-CCAB-4675-877C-BD5A3524C099__CCHBAAEC">
                     <p class="titleinexample">示例3-8获取MdmCube的尺寸和度量</p>
                     <p>只显示与相关的维度和度量<code class="codeph">MdmCube</code> ，您可以使用<code class="codeph">findOrCreateCube</code>的方法<code class="codeph">MdmDatabaseSchema</code>得到立方体，然后获得尺寸和多维数据集的措施。此示例从<a href="discovering-metadata.html#GUID-16169952-DB41-4C4B-A865-88A968BF30EE__CCHDFFAI">示例3-6</a>的<code class="codeph">MdmDatabaseSchema</code>获取<code class="codeph">MdmCube</code> ，并使用<a href="discovering-metadata.html#GUID-3E74DDA7-CCAB-4675-877C-BD5A3524C099__CCHFDFFD">示例3-7</a>的<code class="codeph">getNames</code>方法显示与其关联的维度和度量的名称。
                     </p><pre class="oac_no_warn" dir="ltr">private void getCubeObjects（MdmDatabaseSchema mdmGlobalSchema）{MdmCube mdmUnitsCube =（MdmCube）mdmGlobalSchema.findOrCreateCube（“PRICE_CUBE_AWJ”）; String objName = mdmUnitsCube.getName（）+“cube”;列出dimList = mdmUnitsCube.getDimensions（）; getNames（dimList，“dimensions”，objName）; List &lt;MdmMeasure&gt; measList = mdmUnitsCube.getMeasures（）; getNames（measList，“measures”，objName）; }</pre><p>该示例的输出如下。</p><pre class="oac_no_warn" dir="ltr">PRICE_CUBE_AWJ多维数据集的维度为：TIME_AWJ PRODUCT_AWJ PRICE_CUBE_AWJ多维数据集的度量值为：UNIT_COST UNIT_PRICE</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OLAAP213"></a><div class="props_rev_3"><a id="GUID-6EA02C02-26C9-402E-9D1F-F40957D12156" name="GUID-6EA02C02-26C9-402E-9D1F-F40957D12156"></a><h3 id="OLAAP-GUID-6EA02C02-26C9-402E-9D1F-F40957D12156" class="sect3"><span class="enumeration_section">3.6</span>获取MdmPrimaryDimension包含的对象</h3>
               <div>
                  <p>在发现的元数据对象中创建查询以及显示所述数据为使用，应用程序通常得到<code class="codeph">MdmSubDimension</code>一个的部件<code class="codeph">MdmPrimaryDimension</code>和<code class="codeph">MdmAttribute</code>与该尺寸相关联的对象。以下主题演示了如何获取维度的组件和属性。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="discovering-metadata.html#GUID-653C600F-897B-447B-A3F3-30E2CCD76043">获取MdmPrimaryDimension的层次结构和级别</a></p>
                     </li>
                     <li>
                        <p><a href="discovering-metadata.html#GUID-151B7068-E598-4FB3-BF8C-592B5922E67E">获取MdmPrimaryDimension的属性</a></p>
                     </li>
                  </ul>
               </div><a id="OLAAP215"></a><a id="OLAAP214"></a><div class="props_rev_3"><a id="GUID-653C600F-897B-447B-A3F3-30E2CCD76043" name="GUID-653C600F-897B-447B-A3F3-30E2CCD76043"></a><h4 id="OLAAP-GUID-653C600F-897B-447B-A3F3-30E2CCD76043" class="sect4"><span class="enumeration_section">3.6.1</span>获取MdmPrimaryDimension的层次结构和级别</h4>
                  <div>
                     <div class="section">
                        <p><a id="d10528e1198" class="indexterm-anchor"></a> <code class="codeph">MdmPrimaryDimension</code>具有零个或多个组件<code class="codeph">MdmHierarchy</code>对象，您可以通过调用维度的<code class="codeph">getHierarchies</code>方法来获取这些对象。该方法返回<code class="codeph">MdmHierarchy</code>对象的<code class="codeph">List</code> 。<code class="codeph">MdmPrimaryDimension</code>的级别由<code class="codeph">MdmDimensionLevel</code>对象表示。
                        </p>
                        <p>如果<code class="codeph">MdmHierarchy</code>是<code class="codeph">MdmLevelHierarchy</code> ，则它具有将<code class="codeph">MdmHierarchyLevel</code>对象与其关联的<code class="codeph">MdmDimensionLevel</code>对象。您可以获取<code class="codeph">MdmHierarchyLevel</code>通过调用对象<code class="codeph">getHierarchyLevels</code>的方法<code class="codeph">MdmLevelHierarchy</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-653C600F-897B-447B-A3F3-30E2CCD76043__CHDJAEGF">
                        <p class="titleinexample">示例3-9获取维的层次结构和级别</p>
                        <p>此示例获取的<code class="codeph">MdmPrimaryDimension</code>从<code class="codeph">MdmDatabaseSchema</code>的<a href="discovering-metadata.html#GUID-16169952-DB41-4C4B-A865-88A968BF30EE__CCHDFFAI">实施例3-6</a> ，并显示分层结构的名称和与它们相关联的水平。
                        </p><pre class="oac_no_warn" dir="ltr">private void getHierarchiesAndLevels（MdmDatabaseSchema mdmGlobalSchema）{MdmPrimaryDimension mdmCustDim =（MdmPrimaryDimension）mdmGlobalSchema.findOrCreateStandardDimension（“CUSTOMER_AWJ”）; List &lt;MdmHierarchy&gt; hierList = mdmCustDim.getHierarchies（）; println（“维度的层次结构是：”）; for（MdmHierarchy mdmHier：hierList）{println（mdmHier.getName（））; if（mdmHier instanceof MdmLevelHierarchy）{MdmLevelHierarchy mdmLevelHier =（MdmLevelHierarchy）mdmHier; List &lt;MdmHierarchyLevel&gt; hierLevelList = mdmLevelHier.getHierarchyLevels（）; println（“层次结构的级别为：”）; for（MdmHierarchyLevel mdmHierLevel：hierLevelList）{println（“”+ mdmHierLevel.getName（））; }}}}</pre><p><a href="discovering-metadata.html#GUID-653C600F-897B-447B-A3F3-30E2CCD76043__CHDJAEGF">例3-9</a>的输出如下。
                        </p><pre class="oac_no_warn" dir="ltr">维度的层次结构为：SHIPMENTS层次结构的级别为：TOTAL_CUSTOMER REGION WAREHOUSE SHIP_TO MARKETS层次结构的级别为：TOTAL_MARKET MARKET_SEGMENT帐户SHIP_TO</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLAAP217"></a><a id="OLAAP216"></a><div class="props_rev_3"><a id="GUID-151B7068-E598-4FB3-BF8C-592B5922E67E" name="GUID-151B7068-E598-4FB3-BF8C-592B5922E67E"></a><h4 id="OLAAP-GUID-151B7068-E598-4FB3-BF8C-592B5922E67E" class="sect4"><span class="enumeration_section">3.6.2</span>获取MdmPrimaryDimension的属性</h4>
                  <div>
                     <div class="section">
                        <p><a id="d10528e1308" class="indexterm-anchor"></a> <code class="codeph">MdmPrimaryDimension</code>及其层次结构和级别具有关联的<code class="codeph">MdmAttribute</code>对象。您可以通过调用维，层次结构或级别的<code class="codeph">getAttributes</code>方法来获取许多属性。该方法返回应用程序已明确添加到<code class="codeph">MdmPrimaryDimension</code>或为其指定的<code class="codeph">MdmAttribute</code>对象的<code class="codeph">List</code> 。您可以通过调用<code class="codeph">MdmPrimaryDimension</code>或<code class="codeph">MdmHierarchy</code>的适当方法来获取特定属性，例如短描述属性或长描述属性或父属性。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-151B7068-E598-4FB3-BF8C-592B5922E67E__CHDDCHGA">
                        <p class="titleinexample">示例3-10获取MdmPrimaryDimension的MdmAttribute对象</p>
                        <p>此示例演示获得<code class="codeph">MdmAttribute</code>对象为<code class="codeph">MdmPrimaryDimension</code> 。它还分别获取父属性。该示例显示<code class="codeph">MdmAttribute</code>对象的名称。在<code class="codeph">_LD</code>和<code class="codeph">_SD</code>中结束的属性名称是添加到<code class="codeph">MdmHierarchyLevel</code>对象的属性，如<span class="q">“ <a href="understanding-olap-java-api-metadata.html#GUID-632EF0BB-F472-4743-9D17-D136D69EE811">使用分层属性值</a></span> <code class="codeph">MdmHierarchyLevel</code> <span class="q"><a href="understanding-olap-java-api-metadata.html#GUID-632EF0BB-F472-4743-9D17-D136D69EE811">OLAP视图</a> ”中所述</span> 。
                        </p><pre class="oac_no_warn" dir="ltr">private void getAttributes（MdmDatabaseSchema mdmGlobalSchema）{MdmTimeDimension mdmTimeDim =（MdmTimeDimension）mdmGlobalSchema.findOrCreateTimeDimension（“TIME_AWJ”）; List attrList = mdmTimeDim.getAttributes（）; Iterator attrListItr = attrList.iterator（）; println（“MdmAttribute对象的”+ mdmTimeDim.getName（）+“是：”）; while（attrListItr.hasNext（））{MdmAttribute mdmAttr =（MdmAttribute）attrListItr.next（）; println（“”+ mdmAttr.getName（））; MdmAttribute mdmParentAttr = mdmTimeDim.getParentAttribute（）; println（“父属性为”+ mdmParentAttr.getName（）+“。”）; }</pre><p>该示例的输出如下。</p><pre class="oac_no_warn" dir="ltr">TIME_AWJ的MdmAttribute对象是：LONG_DESCRIPTION SHORT_DESCRIPTION END_DATE TIME_SPAN TOTAL_TIME_LD YEAR_LD QUARTER_LD MONTH_LD TOTAL_TIME_SD YEAR_SD QUARTER_SD MONTH_SD TOTAL_TIME_ED YEAR_ED QUARTER_ED MONTH_ED TOTAL_TIME_TS YEAR_TS QUARTER_TS MONTH_TS父属性为PARENT_ATTRIBUTE。</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="OLAAP219"></a><a id="OLAAP218"></a><div class="props_rev_3"><a id="GUID-EB1B2BAF-3378-439E-92A1-D893E3059217" name="GUID-EB1B2BAF-3378-439E-92A1-D893E3059217"></a><h3 id="OLAAP-GUID-EB1B2BAF-3378-439E-92A1-D893E3059217" class="sect3"><span class="enumeration_section">3.7</span>获取元数据对象的源</h3>
               <div>
                  <div class="section">
                     <p>元数据对象表示一组数据，但它不提供对该数据创建查询的功能。该对象是信息性的。它记录数据的存在，结构和特征。它不提供对数据值的访问。</p>
                     <p>要访问元数据对象的数据值，应用程序将获取该元数据对象的<code class="codeph">Source</code>对象。该<code class="codeph">Source</code>为元数据对象是主<code class="codeph">Source</code> 。
                     </p>
                     <p><a id="d10528e1424" class="indexterm-anchor"></a><a id="d10528e1428" class="indexterm-anchor"></a>要获取元数据对象的主要<code class="codeph">Source</code> ，应用程序将调用该元数据对象的<code class="codeph">getSource</code>方法。例如，如果应用程序需要显示1999年期间销售的产品单元数量，那么它必须使用<code class="codeph">MdmMeasure</code>的<code class="codeph">getSource</code>方法获取该数据，在下面的示例中为<code class="codeph">mdmUnits</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-EB1B2BAF-3378-439E-92A1-D893E3059217__GUID-94853134-A719-4C95-AD11-C5F4AF834702">
                     <p class="titleinexample">示例3-11获取元数据对象的主要源</p><pre class="oac_no_warn" dir="ltr">源单位= mdmUnits.getSource（）;</pre><p>有关获取和使用主<code class="codeph">Source</code>对象的更多信息，请参阅<a href="understanding-source-objects.html#GUID-871159BB-8ED1-454B-B9FA-62F36683F4B2">了解源对象</a> 。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
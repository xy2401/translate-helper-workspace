<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="There are multiple types of parallelism."></meta>
      <meta name="description" content="There are multiple types of parallelism."></meta>
      <title>并行的类型</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="VLDB and Partitioning Guide"></meta>
      <meta property="og:description" content="There are multiple types of parallelism."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="VLDB and Partitioning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="vldb-and-partitioning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:05:22-07:00"></meta>
      <meta name="dcterms.title" content="VLDB and Partitioning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2008, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96199-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="about-parallel-queuing.html" title="Previous" type="text/html"></link>
      <link rel="next" href="parameters-parallel-exec.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="VLDBG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="about-parallel-queuing.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="parameters-parallel-exec.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">VLDB和分区指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-parallel.html" property="item" typeof="WebPage"><span property="name">使用并行执行</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">并行的类型</li>
            </ol>
            <a id="GUID-FCE748F1-0CDB-4D95-9849-6A062E653945" name="GUID-FCE748F1-0CDB-4D95-9849-6A062E653945"></a><a id="VLDBG0107"></a>
            
            <h2 id="VLDBG-GUID-FCE748F1-0CDB-4D95-9849-6A062E653945" class="sect2">并行的类型</h2>
         </header>
         <div class="ind">
            <div>
               <p>有多种类型的并行性。</p>
               <p>本节讨论以下主题中的并行性类型：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="types-parallelism.html#GUID-D48BFF12-4630-444F-B165-1C8E019D2656" title="您可以在SELECT语句中使用并行查询和并行子查询，并且并行执行DDL语句和DML语句（INSERT，UPDATE和DELETE）的查询部分。">关于并行查询</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-41774038-773B-40A5-BDCD-AB16A189C035" title="本主题介绍了DDL语句的并行性。">关于并行DDL语句</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC" title="本主题中介绍了并行DML操作。">关于并行DML操作</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439" title="SQL语句可以包含用PL / SQL，Java编写的用户定义函数，也可以包含C语言中的外部过程，这些函数可以作为SELECT列表，SET子句或WHERE子句的一部分出现。">关于函数的并行执行</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85" title="Oracle数据库可以在多种类型的操作中使用并行性。">关于其他类型的并行性</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。">SQL语句的并行度规则</a></p>
                  </li>
               </ul>
            </div><a id="VLDBG1403"></a><div class="props_rev_3"><a id="GUID-D48BFF12-4630-444F-B165-1C8E019D2656" name="GUID-D48BFF12-4630-444F-B165-1C8E019D2656"></a><h3 id="VLDBG-GUID-D48BFF12-4630-444F-B165-1C8E019D2656" class="sect3">关于并行查询</h3>
               <div>
                  <p>您可以在<code class="codeph">SELECT</code>语句中使用并行查询和并行子查询，并且并行执行DDL语句和DML语句（ <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code> ）的查询部分。
                  </p>
                  <p>您还可以并行查询外部表。</p>
                  <p>SQL查询的并行化决策有两个组成部分：并行化决策和并行度（DOP）。对于查询，DDL操作和DML操作，这些组件的确定方式不同。要确定DOP，Oracle数据库会查看引用对象：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>并行查询查看要并行执行的查询部分中的每个表和索引，以确定哪个是引用表。基本规则是选择具有最大DOP的表或索引。</p>
                     </li>
                     <li>
                        <p>对于并行DML（ <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">MERGE</code>和<code class="codeph">DELETE</code> ），确定DOP的引用对象是由插入，更新或删除操作修改的表。并行DML还为DOP增加了一些限制以防止死锁。如果并行DML语句包含子查询，则子查询的DOP等同于DML操作的DOP。
                        </p>
                     </li>
                     <li>
                        <p>对于并行DDL，确定DOP的引用对象是正在创建，重建，拆分或移动的表，索引或分区。如果并行DDL语句包含子查询，则子查询的DOP等效于DDL操作。</p>
                     </li>
                  </ul>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="types-parallelism.html#GUID-A36C5B68-A4ED-44F4-A6E0-E906E4280AEB" title="索引组织表支持几种并行扫描方法。">索引组织表上的并行查询</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-022729FC-67A8-49F6-8D4A-9144B55A62D0" title="非分区索引组织表上的并行查询使用并行快速全扫描。">非分区索引组织表</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-E7921774-F550-4E85-8349-D85C40EDB6AB" title="索引范围扫描和快速全扫描都可以并行执行。">分区索引组织表</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-80117C32-A2A0-477B-B609-E2EA4D7598AA" title="可以对包含对象类型列的对象类型表和表执行并行查询。">对象类型的并行查询</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="SQL查询只能在某些条件下并行执行。">并行化查询的规则</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-D48BFF12-4630-444F-B165-1C8E019D2656__GUID-EC437C87-72E2-4556-A1C7-0F0657361BE6">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="parallel-exec-intro.html#GUID-1DF2B82C-DD29-4500-B0B4-F296F1AC6240" title="每个SQL语句在解析时都会经历优化和并行化过程。">并行执行SQL语句</a> ，以解释进程如何执行并行查询</p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-09FC59FF-9F63-453C-86D3-6D171022314A" title="本主题将讨论分布式事务限制。">分布式事务限制，</a>用于引用远程对象的查询示例</p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="A SQL query can only be executed in parallel under certain conditions.">并行化查询的规则，</a>以获取有关<a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="SQL查询只能在某些条件下并行执行。">并行</a>执行查询的条件以及确定DOP的因素的信息</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="VLDBG1404"></a><div class="props_rev_3"><a id="GUID-A36C5B68-A4ED-44F4-A6E0-E906E4280AEB" name="GUID-A36C5B68-A4ED-44F4-A6E0-E906E4280AEB"></a><h4 id="VLDBG-GUID-A36C5B68-A4ED-44F4-A6E0-E906E4280AEB" class="sect4">索引组织表上的并行查询</h4>
                  <div>
                     <p>索引组织表支持几种并行扫描方法。</p>
                     <p>这些并行扫描方法包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>并行快速全扫描非分区索引组织表</p>
                        </li>
                        <li>
                           <p>并行快速全扫描分区索引组织表</p>
                        </li>
                        <li>
                           <p>分区索引组织表的并行索引范围扫描</p>
                        </li>
                     </ul>
                     <p>您可以将这些扫描方法用于具有溢出区域的索引组织表以及包含LOB的索引组织表。</p>
                  </div>
               </div><a id="VLDBG1405"></a><div class="props_rev_3"><a id="GUID-022729FC-67A8-49F6-8D4A-9144B55A62D0" name="GUID-022729FC-67A8-49F6-8D4A-9144B55A62D0"></a><h4 id="VLDBG-GUID-022729FC-67A8-49F6-8D4A-9144B55A62D0" class="sect4">非分区索引组织表</h4>
                  <div>
                     <p>非分区索引组织表上的并行查询使用并行快速全扫描。</p>
                     <p>通过将索引段划分为足够大的块范围，然后以需求驱动的方式将块范围分配给并行执行服务器来分配工作。对应于任何行的溢出块仅由具有该行的进程以需求驱动的方式访问。</p>
                  </div>
               </div><a id="VLDBG1406"></a><div class="props_rev_3"><a id="GUID-E7921774-F550-4E85-8349-D85C40EDB6AB" name="GUID-E7921774-F550-4E85-8349-D85C40EDB6AB"></a><h4 id="VLDBG-GUID-E7921774-F550-4E85-8349-D85C40EDB6AB" class="sect4">分区索引组织表</h4>
                  <div>
                     <p>索引范围扫描和快速全扫描都可以并行执行。</p>
                     <p>对于并行快速全扫描，并行化与非分区索引组织表相同。根据DOP，每个并行执行服务器获得一个或多个分区，每个分区包含主键索引段和关联的溢出段（如果有）。</p>
                  </div>
               </div><a id="VLDBG1407"></a><div class="props_rev_3"><a id="GUID-80117C32-A2A0-477B-B609-E2EA4D7598AA" name="GUID-80117C32-A2A0-477B-B609-E2EA4D7598AA"></a><h4 id="VLDBG-GUID-80117C32-A2A0-477B-B609-E2EA4D7598AA" class="sect4">对象类型的并行查询</h4>
                  <div>
                     <p>可以对包含对象类型列的对象类型表和表执行并行查询。</p>
                     <p>对象类型的并行查询支持可用于对象类型的顺序查询的所有功能，包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对象类型的方法</p>
                        </li>
                        <li>
                           <p>对象类型的属性访问</p>
                        </li>
                        <li>
                           <p>用于创建对象类型实例的构造函数</p>
                        </li>
                        <li>
                           <p>对象视图</p>
                        </li>
                        <li>
                           <p>PL / SQL和Oracle调用接口（OCI）查询对象类型</p>
                        </li>
                     </ul>
                     <p>并行查询的对象类型的大小没有限制。</p>
                     <p>以下限制适用于对对象类型使用并行查询：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于涉及连接和排序的查询（通过<code class="codeph">ORDER</code> <code class="codeph">BY</code> ， <code class="codeph">GROUP</code> <code class="codeph">BY</code>或set操作），需要<code class="codeph">MAP</code>函数来并行执行查询。如果没有<code class="codeph">MAP</code>功能，查询将自动连续执行。
                           </p>
                        </li>
                        <li>
                           <p>对象类型不支持并行DML和并行DDL，并且这些语句总是以串行方式执行。</p>
                        </li>
                     </ul>
                     <p>在由于任何这些限制而无法并行执行查询的所有情况下，整个查询将按顺序执行而不会给出错误消息。</p>
                  </div>
               </div><a id="VLDBG1408"></a><div class="props_rev_3"><a id="GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" name="GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C"></a><h4 id="VLDBG-GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" class="sect4">并行化查询的规则</h4>
                  <div>
                     <p>SQL查询只能在某些条件下并行执行。</p>
                     <p>仅当满足下列条件之一时，才能并行执行<code class="codeph">SELECT</code>语句：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>该查询包括语句级别或对象级别并行提示规范（ <code class="codeph">PARALLEL</code>或<code class="codeph">PARALLEL_INDEX</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>查询中引用的模式对象具有与之关联的<code class="codeph">PARALLEL</code>声明。
                           </p>
                        </li>
                        <li>
                           <p>已启用自动并行度（自动DOP）。</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code>语句强制<code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code> 。
                           </p>
                        </li>
                     </ul>
                     <p>此外，执行计划应至少具有以下之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>全表扫描</p>
                        </li>
                        <li>
                           <p>跨越多个分区的索引范围扫描</p>
                        </li>
                        <li>
                           <p>索引快速全扫描</p>
                        </li>
                        <li>
                           <p>并行表函数</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C__ORACLEDATABASESQLLANGUAGEREFERENCEF-F0C96782">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>关于Auto DOP信息的自动<a href="degree-parallel.html#GUID-76AC9190-43AC-4529-89AD-1BDA95C6DFBD" title="自动并行度（Auto DOP）使Oracle数据库能够自动决定语句是否应该并行执行以及它应该使用什么DOP。">并行度</a></p>
                           </li>
                           <li>
                              <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。">SQL语句</a>的并行度规则，用于确定并行度（DOP）的规则的信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL语句的更多信息，请<a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                        <p></p>
                     </div>
                  </div>
               </div>
            </div><a id="VLDBG1411"></a><div class="props_rev_3"><a id="GUID-41774038-773B-40A5-BDCD-AB16A189C035" name="GUID-41774038-773B-40A5-BDCD-AB16A189C035"></a><h3 id="VLDBG-GUID-41774038-773B-40A5-BDCD-AB16A189C035" class="sect3">关于并行DDL语句</h3>
               <div>
                  <p>本主题介绍了DDL语句的并行性。</p>
                  <p>有关DDL语句的并行性的此部分包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="types-parallelism.html#GUID-365F1095-6434-44E2-AE16-F2777EDC82F1" title="您可以并行执行未分区或分区的表和索引的DDL语句。">可并行化的DDL语句</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7" title="并行执行使您可以并行执行查询，并创建从另一个表或一组表创建表作为子查询的操作。">关于并行使用CREATE TABLE AS SELECT</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-6F71DFCF-9449-4910-8ADF-35A2821E42D1" title="并行DDL通常用于创建汇总表或执行作为独立事务的大量数据加载，这些事务并不总是需要可恢复。">可恢复性和并行DDL</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-F002024A-0EA9-4526-900E-02815077E8C9" title="并行创建表或索引会影响空间管理。">并行DDL的空间管理</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-603ABE50-6C5E-4B77-B49F-6846B2351FA4" title="并行创建表或索引时，每个并行执行服务器使用CREATE语句的STORAGE子句中的值来创建临时段来存储行。">使用字典管理表空间时的存储空间</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794" title="并行创建索引和表时，每个并行执行服务器都会分配一个新范围，并使用表或索引数据填充范围。">自由空间和并行DDL</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" title="在某些条件下，DDL操作可以并行执行。">DDL声明规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" title="根据并行化DDL语句的规则，并行化CREATE TABLE AS SELECT语句的CREATE操作。">CREATE TABLE AS SELECT的规则</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1412"></a><div class="props_rev_3"><a id="GUID-365F1095-6434-44E2-AE16-F2777EDC82F1" name="GUID-365F1095-6434-44E2-AE16-F2777EDC82F1"></a><h4 id="VLDBG-GUID-365F1095-6434-44E2-AE16-F2777EDC82F1" class="sect4">可并行化的DDL语句</h4>
                  <div>
                     <p>您可以并行执行未分区或分区的表和索引的DDL语句。</p>
                     <p>非分区表和索引的并行DDL语句是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">INDEX</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <code class="codeph">MOVE</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">REBUILD</code></p>
                        </li>
                     </ul>
                     <p>分区表和索引的并行DDL语句是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">INDEX</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> { <code class="codeph">MOVE|SPLIT|COALESCE}</code> <code class="codeph">PARTITION</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> { <code class="codeph">REBUILD|SPLIT</code> } <code class="codeph">PARTITION</code></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>仅当分割的（全局）索引分区可用时，才能并行执行此语句。</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>所有这些DDL操作都可以在<code class="codeph">NOLOGGING</code>模式下执行，以进行并行或串行执行。
                     </p>
                     <p>索引组织表<code class="codeph">The CREATE</code> <code class="codeph">TABLE</code>语句可以使用或不使用<code class="codeph">AS</code> <code class="codeph">SELECT</code>子句并行执行。
                     </p>
                     <p>在具有对象列的表上不能发生并行DDL。并行DDL不能出现在具有<code class="codeph">LOB</code>列的非分区表上。
                     </p>
                  </div>
               </div><a id="VLDBG1414"></a><a id="VLDBG1413"></a><div class="props_rev_3"><a id="GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7" name="GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7"></a><h4 id="VLDBG-GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7" class="sect4">关于并行使用CREATE TABLE AS SELECT</h4>
                  <div>
                     <p>并行执行使您可以并行执行查询，并创建从另一个表或一组表创建表作为子查询的操作。</p>
                     <p>此并行功能在创建汇总表或汇总表时非常有用。</p>
                     <p>请注意，无法并行创建和填充群集表。</p>
                     <p><a href="types-parallelism.html#GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7__I1006622">图8-4</a>说明了并行创建子查询的汇总表。
                     </p>
                     <div class="figure" id="GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7__I1006622">
                        <p class="titleinfigure">图8-4并行创建汇总表</p><img src="img/vldbg012.gif" width="600" alt="下面是图8-4的描述" title="下面是图8-4的描述" longdesc="img_text/vldbg012.html"><br><a href="img_text/vldbg012.html">“图8-4并行创建汇总表”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="VLDBG1415"></a><div class="props_rev_3"><a id="GUID-6F71DFCF-9449-4910-8ADF-35A2821E42D1" name="GUID-6F71DFCF-9449-4910-8ADF-35A2821E42D1"></a><h4 id="VLDBG-GUID-6F71DFCF-9449-4910-8ADF-35A2821E42D1" class="sect4">可恢复性和并行DDL</h4>
                  <div>
                     <p>并行DDL通常用于创建汇总表或执行作为独立事务的大量数据加载，这些事务并不总是需要可恢复。</p>
                     <p>通过关闭Oracle数据库的日志记录，没有撤销或重做日志生成，所以并行DML操作很可能会表现得更好，而成为<span class="italic">全</span> <span class="italic"><span class="italic">有</span>或</span> <span class="italic">全无</span>操作。换句话说，如果操作失败，无论出于何种原因，您必须重做操作，无法重新启动它。
                     </p>
                     <p>如果在并行表创建（或任何其他并行DDL操作）期间禁用日志记录，则应在创建表后备份包含表的表空间，以避免因介质故障而丢失表。</p>
                     <p>使用<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> ， <code class="codeph">CREATE</code> <code class="codeph">INDEX</code> ， <code class="codeph">ALTER</code> <code class="codeph">TABLE</code>和<code class="codeph">ALTER</code> <code class="codeph">INDEX</code>语句的<code class="codeph">NOLOGGING</code>子句禁用撤消和重做日志生成。
                     </p>
                  </div>
               </div><a id="VLDBG1416"></a><div class="props_rev_3"><a id="GUID-F002024A-0EA9-4526-900E-02815077E8C9" name="GUID-F002024A-0EA9-4526-900E-02815077E8C9"></a><h4 id="VLDBG-GUID-F002024A-0EA9-4526-900E-02815077E8C9" class="sect4">并行DDL的空间管理</h4>
                  <div>
                     <p>并行创建表或索引会影响空间管理。</p>
                     <p>这些空间管理含义会影响并行操作期间所需的存储空间以及创建表或索引后可用的可用空间。</p>
                  </div>
               </div><a id="VLDBG1417"></a><div class="props_rev_3"><a id="GUID-603ABE50-6C5E-4B77-B49F-6846B2351FA4" name="GUID-603ABE50-6C5E-4B77-B49F-6846B2351FA4"></a><h4 id="VLDBG-GUID-603ABE50-6C5E-4B77-B49F-6846B2351FA4" class="sect4">使用字典管理表空间时的存储空间</h4>
                  <div>
                     <p>并行创建表或索引时，每个并行执行服务器使用<code class="codeph">CREATE</code>语句的<code class="codeph">STORAGE</code>子句中的值来创建临时段来存储行。
                     </p>
                     <p>在创建表时，使用<code class="codeph">NEXT</code>设置为4 MB且<code class="codeph">PARALLEL</code> <code class="codeph">DEGREE</code>为16创建的表占用至少64兆字节（MB），因为每个并行服务器进程的启动范围为4 MB。当并行执行协调器组合段时，可以修剪一些段，并且得到的表可能小于请求的64 MB。</p>
                  </div>
               </div><a id="VLDBG1419"></a><a id="VLDBG1418"></a><div class="props_rev_3"><a id="GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794" name="GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794"></a><h4 id="VLDBG-GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794" class="sect4">自由空间和并行DDL</h4>
                  <div>
                     <p>并行创建索引和表时，每个并行执行服务器都会分配一个新范围，并使用表或索引数据填充范围。</p>
                     <p>例如，如果创建DOP为4的索引，则索引最初至少有四个范围。对于并行重建索引以及并行移动，拆分或重建分区，这种扩展区分配是相同的。</p>
                     <p>串行操作要求架构对象至少具有一个扩展区。并行创建要求表或索引至少具有与创建模式对象的并行执行服务器一样多的扩展区。</p>
                     <p>并行创建表或索引时，可以创建可用空间区域。当并行执行服务器使用的临时段大于存储行所需的临时段时，会发生这种情况。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果每个临时段中未使用的空间大于表空间级别设置的<code class="codeph">MINIMUM</code> <code class="codeph">EXTENT</code>参数的值，则Oracle数据库会在将所有临时段中的行合并到表或索引中时修剪未使用的空间。未使用的空间将返回到系统可用空间，并且可以为新扩展区分配，但由于它不是连续的空间（外部碎片），因此无法合并为更大的段。
                           </p>
                        </li>
                        <li>
                           <p>如果每个临时段中未使用的空间小于<code class="codeph">MINIMUM</code> <code class="codeph">EXTENT</code>参数的值，则在合并临时段中的行时，无法修剪未使用的空间。此未使用的空间不会返回到系统可用空间;它成为表或索引的一部分（内部碎片），仅适用于后续插入或需要额外空间的更新。
                           </p>
                        </li>
                     </ul>
                     <p>例如，如果为<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code>语句指定DOP为3，但表空间中只有一个数据文件，则可能发生内部碎片， <a href="types-parallelism.html#GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794__I1006705">如图8-5</a>所示。数据文件的内部表范围内的可用空间区域不能与其他可用空间合并，也不能作为扩展区分配。
                     </p>
                     <div class="figure" id="GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794__I1006705">
                        <p class="titleinfigure">图8-5无法使用的可用空间（内部碎片）</p><img src="img/vldbg014.gif" width="600" alt="下面是图8-5的描述" title="下面是图8-5的描述" longdesc="img_text/vldbg014.html"><br><a href="img_text/vldbg014.html">“图8-5无法使用的可用空间（内部碎片）”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794__GUID-F3C2FE7B-E947-46F3-8589-F9524A562EA3">
                        <p class="notep1">也可以看看：</p>
                        <p>有关并行创建表和索引的详细信息，请参见<a href="../tgsql/introduction-to-sql-tuning.html#TGSQL112" target="_blank"><span><cite>“Oracle数据库SQL调优指南”</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="VLDBG1420"></a><div class="props_rev_3"><a id="GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" name="GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400"></a><h4 id="VLDBG-GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" class="sect4">DDL声明规则</h4>
                  <div>
                     <p>在某些条件下，DDL操作可以并行执行。</p>
                     <p>仅当满足以下条件中的至少一个时，DDL操作才能并行执行：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p></p><code class="codeph">PARALLEL</code>子句（声明）在语法中指定。对于<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> ， <code class="codeph">CREATE</code> <code class="codeph">INDEX</code> ， <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">REBUILD</code>和<code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">REBUILD</code> <code class="codeph">PARTITION</code> ，并行声明存储在数据字典中。
                        </li>
                        <li>
                           <p>已启用自动并行度（自动DOP）。</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DDL</code>语句强制<code class="codeph">PARALLEL</code> <code class="codeph">DDL</code> 。
                           </p>
                        </li>
                     </ul>
                     <p></p>
                     <div class="infoboxnotealso" id="GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400__ORACLEDATABASESQLLANGUAGEREFERENCEF-F0B2B02E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>关于Auto DOP信息的自动<a href="degree-parallel.html#GUID-76AC9190-43AC-4529-89AD-1BDA95C6DFBD" title="自动并行度（Auto DOP）使Oracle数据库能够自动决定语句是否应该并行执行以及它应该使用什么DOP。">并行度</a></p>
                           </li>
                           <li>
                              <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。">SQL语句</a>的并行度规则，用于确定并行度（DOP）的规则的信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL语句的更多信息，请<a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="VLDBG1426"></a><div class="props_rev_3"><a id="GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" name="GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD"></a><h4 id="VLDBG-GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" class="sect4">CREATE TABLE AS SELECT的规则</h4>
                  <div>
                     <p>根据并行化DDL语句的规则，并行化<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code>语句的<code class="codeph">CREATE</code>操作。
                     </p>
                     <p>此外，语句的<code class="codeph">SELECT</code>部分中指定的语句级别<code class="codeph">PARALLEL</code>提示也可以并行化DDL操作。有关并行化DDL语句的规则的信息，请参阅DDL语句<a href="types-parallelism.html#GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" title="在某些条件下，DDL操作可以并行执行。">规则</a> 。
                     </p>
                     <p>当<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code>的<code class="codeph">CREATE</code>操作并行化时，Oracle数据库还会尽可能并行化扫描操作。
                     </p>
                     <p>即使DDL部分未并行化，也可以根据并行化查询的规则来并行化<code class="codeph">SELECT</code>部分。
                     </p>
                     <p>自动并行度（Auto DOP）并行化DDL和语句的查询部分。</p>
                     <p>有关确定并行度（DOP）的规则的信息，请参阅<a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。">SQL语句的并行度规则</a> 。
                     </p>
                  </div>
               </div>
            </div><a id="VLDBG1431"></a><div class="props_rev_3"><a id="GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC" name="GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC"></a><h3 id="VLDBG-GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC" class="sect3">关于并行DML操作</h3>
               <div>
                  <p>本主题中介绍了并行DML操作。</p>
                  <p>并行DML（ <code class="codeph">PARALLEL</code> <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">MERGE</code> ）使用并行执行机制来加速或扩展针对大型数据库表和索引的大型DML操作。
                  </p>
                  <div class="infoboxnote" id="GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC__GUID-788E241A-A3DE-4037-8104-9E870FE72EE7">
                     <p class="notep1">注意：</p>
                     <p>虽然DML通常包含查询，但在本章中，术语DML仅指<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">MERGE</code>和<code class="codeph">DELETE</code>操作。
                     </p>
                  </div>
                  <p>本节讨论以下并行DML主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="types-parallelism.html#GUID-70849484-CCE9-4C2A-A2C8-9729700CAEC5" title="并行DML在决策支持系统（DSS）环境中非常有用，在该环境中，访问大型对象的性能和可伸缩性非常重要。并行DML补充了并行查询，为您提供DSS数据库的查询和更新功能。">何时使用并行DML</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-5EB01FA8-030B-45BB-9B16-2D13881F6010" title="只有在会话或SQL语句中显式启用并行DML时，才能并行化DML语句。">启用并行DML模式</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" title="仅在某些条件下并行化更新，合并或删除操作。">UPDATE，MERGE和DELETE的规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-EB793246-B39F-444B-A2F0-7D101F016557" title="仅在某些条件下并行执行插入操作。">INSERT SELECT的规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-53B78D2C-FA4C-4CA1-AF28-91D5AE142859" title="为了并行执行DML操作，并行执行协调器获取并行执行服务器，并且每个并行执行服务器在其自己的并行处理事务下执行一部分工作。">并行DML的事务限制</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF" title="如果使用回滚段而不是自动撤消管理，则使用并行DML时会有一些限制。">回滚段</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912" title="回滚并行DML操作所需的时间大致等于执行正向操作所需的时间。">恢复并行DML</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B" title="并行UPDATE使用对象中的现有可用空间，而直接路径INSERT获取数据的新扩展区。">并行DML的空间考虑因素</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-6626C70C-876C-47A4-8C01-9B66574062D8" title="有几个限制适用于并行DM。">并行DML的限制</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-CD387175-C782-4FE4-AAC7-D4FF94B30DA3" title="本主题中介绍了完整性约束和并行DML语句的交互。">数据完整性限制</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-DFF6F4B8-D8FB-40C3-A9D5-CBE7AC03B831" title="如果受影响的表包含可能因语句而被调用的已启用触发器，则不会并行执行DML操作。">触发限制</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-09FC59FF-9F63-453C-86D3-6D171022314A" title="本主题将讨论分布式事务限制。">分布式事务限制</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-F3751631-4858-43FF-ACBB-B42307A43F0D" title="本主题中显示了分布式事务处理的几个示例。">分布式事务并行化的示例</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433" title="像UNION或UNION ALL这样的集合运算符由多个查询（分支）组合成一个SQL语句组成。">并行执行Union All</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1432"></a><div class="props_rev_3"><a id="GUID-70849484-CCE9-4C2A-A2C8-9729700CAEC5" name="GUID-70849484-CCE9-4C2A-A2C8-9729700CAEC5"></a><h4 id="VLDBG-GUID-70849484-CCE9-4C2A-A2C8-9729700CAEC5" class="sect4">何时使用并行DML</h4>
                  <div>
                     <p>并行DML在决策支持系统（DSS）环境中非常有用，在该环境中，访问大型对象的性能和可伸缩性非常重要。并行DML补充了并行查询，为您提供DSS数据库的查询和更新功能。</p>
                     <p>设置并行性的开销使得并行DML操作对于短OLTP事务不可行。但是，并行DML操作可以加速OLTP数据库中运行的批处理作业。</p>
                     <p>使用并行DML的几种情况包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="types-parallelism.html#GUID-18B2AF09-C548-48DE-A794-86224111549F" title="在数据仓库系统中，必须使用生产系统中的新数据或修改数据定期刷新（更新）大型表。">刷新数据仓库系统中的表</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-CD8CD670-F73A-4F83-8BB4-FF26866C0E27" title="在DSS环境中，许多应用程序需要复杂的计算，涉及构造和操作许多大型中间摘要表。">创建中间摘要表</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-E9C40F60-C7B5-47B8-8D71-ABA1062B3F34" title="许多DSS应用程序根据一组标准定期对客户进行评分。">使用评分表</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-5196494D-E925-402C-AC78-F2AFE3F6FD58" title="历史表描述了企业在最近的时间间隔内的业务事务。">更新历史表</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-53E3F377-C8E5-434C-9DAB-E19D125F3DE3" title="在非工作时间在OLTP数据库中执行的批处理作业具有固定的时间，在此期间作业必须完成。确保及时完成工作的一个好方法是并行执行其操作。">运行批处理作业</a></p>
                        </li>
                     </ul>
                  </div><a id="VLDBG1433"></a><div class="props_rev_3"><a id="GUID-18B2AF09-C548-48DE-A794-86224111549F" name="GUID-18B2AF09-C548-48DE-A794-86224111549F"></a><h5 id="VLDBG-GUID-18B2AF09-C548-48DE-A794-86224111549F" class="sect5">刷新数据仓库系统中的表</h5>
                     <div>
                        <p>在数据仓库系统中，必须使用生产系统中的新数据或修改数据定期刷新（更新）大型表。</p>
                        <p>您可以使用<code class="codeph">MERGE</code>语句有效地执行此操作。
                        </p>
                     </div>
                  </div><a id="VLDBG1434"></a><div class="props_rev_3"><a id="GUID-CD8CD670-F73A-4F83-8BB4-FF26866C0E27" name="GUID-CD8CD670-F73A-4F83-8BB4-FF26866C0E27"></a><h5 id="VLDBG-GUID-CD8CD670-F73A-4F83-8BB4-FF26866C0E27" class="sect5">创建中间摘要表</h5>
                     <div>
                        <p>在DSS环境中，许多应用程序需要复杂的计算，涉及构造和操作许多大型中间摘要表。</p>
                        <p>这些摘要表通常是临时的，通常不需要记录。并行DML可以加速对这些大型中间表的操作。一个好处是您可以将增量结果放在中间表中并执行并行更新。</p>
                        <p>此外，汇总表可能包含累积或比较信息，这些信息必须在申请会议之后持续存在;因此，临时表是不可行的。并行DML操作可以加快对这些大型汇总表的更改。</p>
                     </div>
                  </div><a id="VLDBG1435"></a><div class="props_rev_3"><a id="GUID-E9C40F60-C7B5-47B8-8D71-ABA1062B3F34" name="GUID-E9C40F60-C7B5-47B8-8D71-ABA1062B3F34"></a><h5 id="VLDBG-GUID-E9C40F60-C7B5-47B8-8D71-ABA1062B3F34" class="sect5">使用评分表</h5>
                     <div>
                        <p>许多DSS应用程序根据一组标准定期对客户进行评分。</p>
                        <p>分数通常存储在大型DSS表中。然后将得分信息用于做出决定，例如，包括在邮件列表中。</p>
                        <p>此评分活动查询并更新表中的大量行。并行DML可以加速对这些大表的操作。</p>
                     </div>
                  </div><a id="VLDBG1436"></a><div class="props_rev_3"><a id="GUID-5196494D-E925-402C-AC78-F2AFE3F6FD58" name="GUID-5196494D-E925-402C-AC78-F2AFE3F6FD58"></a><h5 id="VLDBG-GUID-5196494D-E925-402C-AC78-F2AFE3F6FD58" class="sect5">更新历史表</h5>
                     <div>
                        <p>历史表描述了企业在最近的时间间隔内的业务事务。</p>
                        <p>DBA会定期删除最旧的行集，并在表中插入一组新行。并行<code class="codeph">INSERT</code> <code class="codeph">SELECT</code>和并行<code class="codeph">DELETE</code>操作可以加速此翻转任务。
                        </p>
                        <p>删除分区也可用于删除旧行。但是，该表必须按日期和适当的时间间隔进行分区。</p>
                     </div>
                  </div><a id="VLDBG1437"></a><div class="props_rev_3"><a id="GUID-53E3F377-C8E5-434C-9DAB-E19D125F3DE3" name="GUID-53E3F377-C8E5-434C-9DAB-E19D125F3DE3"></a><h5 id="VLDBG-GUID-53E3F377-C8E5-434C-9DAB-E19D125F3DE3" class="sect5">运行批处理作业</h5>
                     <div>
                        <p>在非工作时间在OLTP数据库中执行的批处理作业具有固定的时间，在此期间作业必须完成。确保及时完成工作的一个好方法是并行执行其操作。</p>
                        <p>随着工作量的增加，可以添加更多的计算机资源;并行操作的scaleup属性确保可以满足时间约束。</p>
                     </div>
                  </div>
               </div><a id="VLDBG1438"></a><div class="props_rev_3"><a id="GUID-5EB01FA8-030B-45BB-9B16-2D13881F6010" name="GUID-5EB01FA8-030B-45BB-9B16-2D13881F6010"></a><h4 id="VLDBG-GUID-5EB01FA8-030B-45BB-9B16-2D13881F6010" class="sect4">启用并行DML模式</h4>
                  <div>
                     <p>只有在会话或SQL语句中显式启用并行DML时，才能并行化DML语句。</p>
                     <p>要在会话中启用此模式，请运行以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION ENABLE PARALLEL DML;</pre><p>要在特定SQL语句中启用并行DML模式，请包括<code class="codeph">ENABLE_PARALLEL_DML</code> SQL提示。例如：</p><pre class="oac_no_warn" dir="ltr">INSERT / * + ENABLE_PARALLEL_DML * / ...</pre><p>此模式是必需的，因为并行DML和串行DML具有不同的锁定，事务和磁盘空间要求，并且默认情况下会为会话禁用并行DML。</p>
                     <p>禁用并行DML时，即使使用<code class="codeph">PARALLEL</code>提示，也不会并行执行DML。
                     </p>
                     <p>在会话中启用并行DML时，此会话中的所有DML语句都被视为并行执行。在具有<code class="codeph">ENABLE_PARALLEL_DML</code>提示的SQL语句中启用并行DML时，仅考虑该特定语句进行并行执行。但是，即使启用了并行DML，如果没有并行提示或没有具有并行属性的表，或者如果违反了对并行操作的限制，则DML操作仍可以串行执行。
                     </p>
                     <p>会话的<code class="codeph">PARALLEL</code> <code class="codeph">DML</code>模式不会影响<code class="codeph">SELECT</code>语句，DDL语句和DML语句的查询部分的并行性。如果未设置此模式，则不会并行化DML操作，但仍可以并行化DML语句中的扫描或连接操作。
                     </p>
                     <p>为会话启用并行DML模式后，可以使用<code class="codeph">DISABLE_PARALLEL_DML</code> SQL提示禁用特定SQL语句的模式。
                     </p>
                     <p>有关更多信息，请参阅<a href="types-parallelism.html#GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B" title="并行UPDATE使用对象中的现有可用空间，而直接路径INSERT获取数据的新扩展区。">并行DML的空间注意事项和并行DML的</a> <a href="types-parallelism.html#GUID-6626C70C-876C-47A4-8C01-9B66574062D8" title="有几个限制适用于并行DM。">限制</a> 。</p>
                  </div>
               </div><a id="VLDBG1439"></a><div class="props_rev_3"><a id="GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" name="GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F"></a><h4 id="VLDBG-GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" class="sect4">UPDATE，MERGE和DELETE的规则</h4>
                  <div>
                     <p>仅在某些条件下并行化更新，合并或删除操作。</p>
                     <p>仅当满足以下条件中的至少一个时，才会并行化<code class="codeph">UPDATE</code> ， <code class="codeph">MERGE</code>和<code class="codeph">DELETE</code>操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>正在更新，合并或删除的表具有由先前的<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句设置的<code class="codeph">PARALLEL</code>声明。
                           </p>
                        </li>
                        <li>
                           <p>在DML语句中指定语句级别或对象级别<code class="codeph">PARALLEL</code>提示。
                           </p>
                        </li>
                        <li>
                           <p>已启用自动并行度（自动DOP）。</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DML</code>语句强制<code class="codeph">PARALLEL</code> <code class="codeph">DML</code> 。
                           </p>
                        </li>
                     </ul>
                     <p>如果语句包含子查询或可更新视图，则它们也可以基于并行化查询的规则并行执行。并行化<code class="codeph">UPDATE</code> ， <code class="codeph">MERGE</code>和<code class="codeph">DELETE</code>部分的决定与查询部分无关，反之亦然。语句级别<code class="codeph">PARALLEL</code>提示或Auto DOP并行化DML和查询部分。
                     </p>
                     <div class="infoboxnotealso" id="GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F__ORACLEDATABASESQLLANGUAGEREFERENCEF-F0B2B02E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>关于Auto DOP信息的自动<a href="degree-parallel.html#GUID-76AC9190-43AC-4529-89AD-1BDA95C6DFBD" title="自动并行度（Auto DOP）使Oracle数据库能够自动决定语句是否应该并行执行以及它应该使用什么DOP。">并行度</a></p>
                           </li>
                           <li>
                              <p>对更新，合并或删除操作可能存在的限制<a href="parallel-exec-tips.html#GUID-FEE610A3-F12C-47F6-9571-ADBB08096B06" title="基于所使用的Oracle数据库的软件级别，并行度有一定的限制。">的并行度的</a>限制</p>
                           </li>
                           <li>
                              <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。">SQL语句</a>的并行度规则，用于确定并行度（DOP）的规则的信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL语句的更多信息，请<a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="VLDBG1444"></a><div class="props_rev_3"><a id="GUID-EB793246-B39F-444B-A2F0-7D101F016557" name="GUID-EB793246-B39F-444B-A2F0-7D101F016557"></a><h4 id="VLDBG-GUID-EB793246-B39F-444B-A2F0-7D101F016557" class="sect4">INSERT SELECT的规则</h4>
                  <div>
                     <p>仅在某些条件下并行执行插入操作。</p>
                     <p>仅当满足以下条件中的至少一个时，才会并行执行<code class="codeph">INSERT</code>操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>插入到（引用对象）中的表具有由先前的<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句设置的<code class="codeph">PARALLEL</code>声明。
                           </p>
                        </li>
                        <li>
                           <p>在DML语句中的<code class="codeph">INSERT</code>之后指定语句级别或对象级别<code class="codeph">PARALLEL</code>提示。
                           </p>
                        </li>
                        <li>
                           <p>已启用自动并行度（自动DOP）。</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DML</code>语句强制<code class="codeph">PARALLEL</code> <code class="codeph">DML</code> 。
                           </p>
                        </li>
                     </ul>
                     <p>并行化<code class="codeph">INSERT</code>操作的决定与<code class="codeph">SELECT</code>操作无关，反之亦然。可以基于并行化查询的规则来并行化<code class="codeph">SELECT</code>操作。语句级别<code class="codeph">PARALLEL</code>提示或Auto DOP并行化<code class="codeph">INSERT</code>和<code class="codeph">SELECT</code>操作。
                     </p>
                     <div class="infoboxnotealso" id="GUID-EB793246-B39F-444B-A2F0-7D101F016557__ORACLEDATABASESQLLANGUAGEREFERENCEF-F22CAB96">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>关于Auto DOP信息的自动<a href="degree-parallel.html#GUID-76AC9190-43AC-4529-89AD-1BDA95C6DFBD" title="自动并行度（Auto DOP）使Oracle数据库能够自动决定语句是否应该并行执行以及它应该使用什么DOP。">并行度</a></p>
                           </li>
                           <li>
                              <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。">SQL语句</a>的并行度规则，用于确定并行度（DOP）的规则的信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL语句的更多信息，请<a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                        <p></p>
                     </div>
                  </div>
               </div><a id="VLDBG1448"></a><div class="props_rev_3"><a id="GUID-53B78D2C-FA4C-4CA1-AF28-91D5AE142859" name="GUID-53B78D2C-FA4C-4CA1-AF28-91D5AE142859"></a><h4 id="VLDBG-GUID-53B78D2C-FA4C-4CA1-AF28-91D5AE142859" class="sect4">并行DML的事务限制</h4>
                  <div>
                     <p>为了并行执行DML操作，并行执行协调器获取并行执行服务器，并且每个并行执行服务器在其自己的并行处理事务下执行一部分工作。</p>
                     <p></p>
                     <p>请注意以下条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>每个并行执行服务器创建不同的并行进程事务。</p>
                        </li>
                        <li>
                           <p>如果使用回滚段而不是自动撤消管理，则可能希望通过限制驻留在同一回滚段中的并行进程事务的数量来减少回滚段上的争用。有关更多信息，请参阅<a href="../sqlrf/ROLLBACK.html#SQLRF01610" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                           </p>
                        </li>
                     </ul>
                     <p>协调器也有自己的协调器事务，它可以有自己的回滚段。为了确保用户级事务原子性，协调器使用两阶段提交协议来提交并行进程事务所执行的更改。</p>
                     <p>为并行DML启用的会话可能会在会话中以特殊模式放置事务：如果事务中的任何DML语句并行修改表，则后续的串行或并行查询或DML语句不能再在该事务中访问同一个表。在交易期间无法看到并行修改的结果。</p>
                     <p>尝试访问在同一事务中并行修改的表的串行或并行语句将被拒绝，并显示错误消息。</p>
                     <p>如果在并行启用DML的会话中执行PL / SQL过程或块，则此规则适用于过程或块中的语句。</p>
                  </div>
               </div><a id="VLDBG1449"></a><div class="props_rev_3"><a id="GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF" name="GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF"></a><h4 id="VLDBG-GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF" class="sect4">回滚段</h4>
                  <div>
                     <p>如果使用回滚段而不是自动撤消管理，则使用并行DML时会有一些限制。</p>
                     <div class="infoboxnotealso" id="GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF__GUID-867C5D01-292C-40EC-A677-B0B1CEF1EE4F">
                        <p class="notep1">也可以看看：</p>
                        <p>有关并行DML和回滚段限制的信息，请<a href="../sqlrf/ROLLBACK.html#SQLRF01610" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="VLDBG1450"></a><div class="props_rev_3"><a id="GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912" name="GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912"></a><h4 id="VLDBG-GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912" class="sect4">恢复并行DML</h4>
                  <div>
                     <p>回滚并行DML操作所需的时间大致等于执行正向操作所需的时间。</p>
                     <p>Oracle数据库支持事务和进程故障后以及实例和系统故障后的并行回滚。Oracle数据库可以并行处理事务恢复的前滚阶段和后滚阶段。</p>
                     <div class="infoboxnotealso" id="GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912__GUID-A3F3F1D0-E67D-47AB-BC43-B379F773B8FE">
                        <p class="notep1">也可以看看：</p>
                        <p>有关并行回滚的详细信息，请参见<a href="../bradv/introduction-backup-recovery.html#BRADV8001" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                     </div>
                  </div><a id="VLDBG1451"></a><div class="props_rev_3"><a id="GUID-C601D304-8F9E-4C8D-A2D9-A2C5EA95CFFA" name="GUID-C601D304-8F9E-4C8D-A2D9-A2C5EA95CFFA"></a><h5 id="VLDBG-GUID-C601D304-8F9E-4C8D-A2D9-A2C5EA95CFFA" class="sect5">用户发布回滚的事务恢复</h5>
                     <div>
                        <p>由于语句错误导致的事务失败中由用户发出的回滚由并行执行协调器和并行执行服务器并行执行。</p>
                        <p>回滚所需的时间与转发事务的时间大致相同。</p>
                     </div>
                  </div><a id="VLDBG1452"></a><div class="props_rev_3"><a id="GUID-29BD5A8B-A041-43F2-B4B9-D678E4AAFB87" name="GUID-29BD5A8B-A041-43F2-B4B9-D678E4AAFB87"></a><h5 id="VLDBG-GUID-29BD5A8B-A041-43F2-B4B9-D678E4AAFB87" class="sect5">流程恢复</h5>
                     <div>
                        <p>PMON进程执行从并行执行协调器或并行执行服务器的故障中恢复。</p>
                        <p>如果并行执行服务器或并行执行协调器失败，则PMON将从该进程回滚工作，并且事务中的所有其他进程将回滚其更改。</p>
                     </div>
                  </div><a id="VLDBG1453"></a><div class="props_rev_3"><a id="GUID-AE2F93BE-FC46-43F7-A29B-173FE219DD24" name="GUID-AE2F93BE-FC46-43F7-A29B-173FE219DD24"></a><h5 id="VLDBG-GUID-AE2F93BE-FC46-43F7-A29B-173FE219DD24" class="sect5">系统恢复</h5>
                     <div>
                        <p>从系统故障中恢复需要新的启动。</p>
                        <p>恢复由SMON进程和SMON生成的任何恢复服务器进程执行。可以使用并行回滚来恢复并行DML语句。如果初始化参数<code class="codeph">COMPATIBLE</code>设置为8.1.3或更高，则快速启动按需回滚可以按需一次一个块地恢复终止的事务。
                        </p>
                     </div>
                  </div>
               </div><a id="VLDBG1454"></a><div class="props_rev_3"><a id="GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B" name="GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B"></a><h4 id="VLDBG-GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B" class="sect4">并行DML的空间考虑因素</h4>
                  <div>
                     <p>并行<code class="codeph">UPDATE</code>使用对象中的现有可用空间，而直接路径<code class="codeph">INSERT</code>获取数据的新扩展区。
                     </p>
                     <p>空间使用特性可能与串行执行并行不同，因为多个并发子事务修改了对象。</p>
                  </div>
               </div><a id="VLDBG1455"></a><div class="props_rev_3"><a id="GUID-6626C70C-876C-47A4-8C01-9B66574062D8" name="GUID-6626C70C-876C-47A4-8C01-9B66574062D8"></a><h4 id="VLDBG-GUID-6626C70C-876C-47A4-8C01-9B66574062D8" class="sect4">并行DML的限制</h4>
                  <div>
                     <p>有几个限制适用于并行DM。</p>
                     <p>以下限制适用于并行DML（包括直接路径<code class="codeph">INSERT</code> ）：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">UPDATE</code> ， <code class="codeph">MERGE</code>和<code class="codeph">DELETE</code>操作的分<code class="codeph">MERGE</code>并行性要求<code class="codeph">COMPATIBLE</code>初始化参数设置为9.2或更高。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">INSERT</code> <code class="codeph">VALUES</code>语句永远不会并行执行。
                           </p>
                        </li>
                        <li>
                           <p>事务可以包含修改不同表的多个并行DML语句，但在并行DML语句修改表之后，后续的串行或并行语句（DML或查询）不能再在该事务中访问同一个表。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在串行直接路径<code class="codeph">INSERT</code>语句之后也存在此限制：在该事务期间，后续SQL语句（DML或查询）不能访问已修改的表。
                                 </p>
                              </li>
                              <li>
                                 <p>在并行DML或直接路径<code class="codeph">INSERT</code>语句之前允许访问同一表的查询，但不允许在之后。
                                 </p>
                              </li>
                              <li>
                                 <p>尝试访问已由并行<code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>或<code class="codeph">MERGE</code>修改的表或在同一事务期间直接路径<code class="codeph">INSERT</code>任何串行或并行语句都将被拒绝，并显示错误消息。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>无法对具有触发器的表执行并行DML操作。</p>
                        </li>
                        <li>
                           <p>并行DML不支持复制功能。</p>
                        </li>
                        <li>
                           <p>并行DML不会出现在某些约束条件下：自引用完整性，删除级联和延迟完整性。此外，对于直接路径<code class="codeph">INSERT</code> ，不支持任何参照完整性。
                           </p>
                        </li>
                        <li>
                           <p>如果不访问对象列，则可以对具有对象列的表执行并行DML。</p>
                        </li>
                        <li>
                           <p>如果表是分区的，则可以在具有<code class="codeph">LOB</code>列的表上完成并行DML。但是，不支持分区内并行性。
                           </p>
                           <p>对于具有LOB列的非分区表，只要将LOB列声明为SecureFiles LOB，就支持并行<code class="codeph">INSERT</code>操作。不支持对此类表进行并行<code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">MERGE</code>操作。
                           </p>
                        </li>
                        <li>
                           <p>如果DML操作位于分布式事务中，或者DML或查询操作位于远程对象上，则不能并行执行。</p>
                        </li>
                        <li>
                           <p>不支持群集表。</p>
                        </li>
                        <li>
                           <p>临时表不支持并行<code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">MERGE</code>操作。
                           </p>
                        </li>
                        <li>
                           <p>如果表未分区，则具有位图索引的表不支持并行DML。</p>
                        </li>
                     </ul>
                     <p>违反这些限制会导致语句在没有警告或错误消息的情况下串行执行（除了对访问事务中的同一个表的语句的限制，这可能导致错误消息）。</p>
                  </div><a id="VLDBG1456"></a><div class="props_rev_3"><a id="GUID-3ADF9B57-757A-47ED-B0DE-401977671C23" name="GUID-3ADF9B57-757A-47ED-B0DE-401977671C23"></a><h5 id="VLDBG-GUID-3ADF9B57-757A-47ED-B0DE-401977671C23" class="sect5">划分密钥限制</h5>
                     <div>
                        <p>如果更新不会导致行移动到新分区，则只能将分区表的分区键更新为新值。</p>
                        <p>如果在启用行移动子句的情况下定义表，则可以进行更新。</p>
                     </div>
                  </div><a id="VLDBG1457"></a><div class="props_rev_3"><a id="GUID-FB7A3DC7-7AE0-445A-9DB7-79FD3E24E53D" name="GUID-FB7A3DC7-7AE0-445A-9DB7-79FD3E24E53D"></a><h5 id="VLDBG-GUID-FB7A3DC7-7AE0-445A-9DB7-79FD3E24E53D" class="sect5">功能限制</h5>
                     <div>
                        <p>并行DML的功能限制与并行DDL和并行查询的功能限制相同。</p>
                        <p>有关更多信息，请参见<a href="types-parallelism.html#GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439" title="SQL语句可以包含用PL / SQL，Java编写的用户定义函数，也可以包含C语言中的外部过程，这些函数可以作为SELECT列表，SET子句或WHERE子句的一部分出现。">关于函数的并行执行</a> 。
                        </p>
                     </div>
                  </div>
               </div><a id="VLDBG1458"></a><div class="props_rev_3"><a id="GUID-CD387175-C782-4FE4-AAC7-D4FF94B30DA3" name="GUID-CD387175-C782-4FE4-AAC7-D4FF94B30DA3"></a><h4 id="VLDBG-GUID-CD387175-C782-4FE4-AAC7-D4FF94B30DA3" class="sect4">数据完整性限制</h4>
                  <div>
                     <p>本主题中介绍了完整性约束和并行DML语句的交互。</p>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="types-parallelism.html#GUID-D4CFC1F2-44D3-4BE3-B5ED-6A309EB8BF06" title="本主题讨论NOT NULL和CHECK的完整性约束。">NOT NULL和CHECK</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-8B778C98-1A66-474C-88BB-778B260FE791" title="本主题讨论了UNIQUE和PRIMARY KEY的完整性约束。">独特和主要的关键</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F" title="只要一个表上的DML操作可能导致另一个表上的递归DML操作，就会发生对引用完整性的限制。">外键（参考完整性）</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-D114D953-ED47-4670-9A66-27A1F0A6A14F" title="本主题将讨论删除级联数据完整性限制。">删除级联</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-6472CF44-EFF1-401F-A3C2-53254C9F3986" title="如果涉及引用的密钥（主键），则不会并行化具有自引用完整性约束的表上的DML。">自我指涉诚信</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-4D8A774E-D27F-43D6-84D2-45C32DB9A9DC" title="本主题讨论了可延迟完整性约束。">可延迟的完整性约束</a></p>
                        </li>
                     </ul>
                  </div><a id="VLDBG1459"></a><div class="props_rev_3"><a id="GUID-D4CFC1F2-44D3-4BE3-B5ED-6A309EB8BF06" name="GUID-D4CFC1F2-44D3-4BE3-B5ED-6A309EB8BF06"></a><h5 id="VLDBG-GUID-D4CFC1F2-44D3-4BE3-B5ED-6A309EB8BF06" class="sect5">NOT NULL和CHECK</h5>
                     <div>
                        <p>本主题讨论<code class="codeph">NOT</code> <code class="codeph">NULL</code>和<code class="codeph">CHECK</code>的完整性约束。
                        </p>
                        <p>允许<code class="codeph">NOT</code> <code class="codeph">NULL</code>和<code class="codeph">CHECK</code>完整性约束。它们不是并行DML的问题，因为它们分别在列和行级别强制执行。
                        </p>
                     </div>
                  </div><a id="VLDBG1460"></a><div class="props_rev_3"><a id="GUID-8B778C98-1A66-474C-88BB-778B260FE791" name="GUID-8B778C98-1A66-474C-88BB-778B260FE791"></a><h5 id="VLDBG-GUID-8B778C98-1A66-474C-88BB-778B260FE791" class="sect5">独特和主要的关键</h5>
                     <div>
                        <p>本主题讨论了<code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>的完整性约束。
                        </p>
                        <p>允许使用<code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>完整性约束。
                        </p>
                     </div>
                  </div><a id="VLDBG1462"></a><a id="VLDBG1461"></a><div class="props_rev_3"><a id="GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F" name="GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F"></a><h5 id="VLDBG-GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F" class="sect5">外键（参考完整性）</h5>
                     <div>
                        <p>只要一个表上的DML操作可能导致另一个表上的递归DML操作，就会发生对引用完整性的限制。</p>
                        <p>当执行完整性检查时，有必要同时查看对正在修改的对象所做的所有更改。</p>
                        <p><a href="types-parallelism.html#GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F__G1016143" title="参照完整性限制">表8-1</a>列出了参照完整性约束中涉及的表可能执行的所有操作。
                        </p>
                        <div class="tblformal" id="GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F__G1016143">
                           <p class="titleintable">表8-1参照完整性限制</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="参照完整性限制" width="100%" border="1" summary="Referential Integrity Restrictions" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d53328e5015">DML声明</th>
                                    <th align="left" valign="bottom" width="25%" id="d53328e5018">在父母身上发布</th>
                                    <th align="left" valign="bottom" width="23%" id="d53328e5021">发给孩子</th>
                                    <th align="left" valign="bottom" width="28%" id="d53328e5024">自我指涉</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5029" headers="d53328e5015 ">
                                       <p><code class="codeph">插入</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5029 d53328e5018 ">
                                       <p>（不适用）</p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5029 d53328e5021 ">
                                       <p>没有并行化</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5029 d53328e5024 ">
                                       <p>没有并行化</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5043" headers="d53328e5015 ">
                                       <p><code class="codeph">合并</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5043 d53328e5018 ">
                                       <p>（不适用）</p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5043 d53328e5021 ">
                                       <p>没有并行化</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5043 d53328e5024 ">
                                       <p>没有并行化</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5057" headers="d53328e5015 ">
                                       <p><code class="codeph">UPDATE</code>无动作</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5057 d53328e5018 ">
                                       <p>支持的</p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5057 d53328e5021 ">
                                       <p>支持的</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5057 d53328e5024 ">
                                       <p>没有并行化</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5072" headers="d53328e5015 ">
                                       <p><code class="codeph">DELETE</code>无动作</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5072 d53328e5018 ">
                                       <p>支持的</p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5072 d53328e5021 ">
                                       <p>支持的</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5072 d53328e5024 ">
                                       <p>没有并行化</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5087" headers="d53328e5015 ">
                                       <p><code class="codeph">DELETE</code> Cascade</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5087 d53328e5018 ">
                                       <p>没有并行化</p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5087 d53328e5021 ">
                                       <p>（不适用）</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5087 d53328e5024 ">
                                       <p>没有并行化</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div><a id="VLDBG1463"></a><div class="props_rev_3"><a id="GUID-D114D953-ED47-4670-9A66-27A1F0A6A14F" name="GUID-D114D953-ED47-4670-9A66-27A1F0A6A14F"></a><h5 id="VLDBG-GUID-D114D953-ED47-4670-9A66-27A1F0A6A14F" class="sect5">删除级联</h5>
                     <div>
                        <p>本主题将讨论删除级联数据完整性限制。</p>
                        <p>删除具有删除级联的外键的表未并行化，因为并行执行服务器尝试从多个分区（父表和子表）中删除行。</p>
                     </div>
                  </div><a id="VLDBG1464"></a><div class="props_rev_3"><a id="GUID-6472CF44-EFF1-401F-A3C2-53254C9F3986" name="GUID-6472CF44-EFF1-401F-A3C2-53254C9F3986"></a><h5 id="VLDBG-GUID-6472CF44-EFF1-401F-A3C2-53254C9F3986" class="sect5">自我指涉诚信</h5>
                     <div>
                        <p>如果涉及引用的密钥（主键），则不会并行化具有自引用完整性约束的表上的DML。</p>
                        <p>对于所有其他列上的DML，可以实现并行性。</p>
                     </div>
                  </div><a id="VLDBG1465"></a><div class="props_rev_3"><a id="GUID-4D8A774E-D27F-43D6-84D2-45C32DB9A9DC" name="GUID-4D8A774E-D27F-43D6-84D2-45C32DB9A9DC"></a><h5 id="VLDBG-GUID-4D8A774E-D27F-43D6-84D2-45C32DB9A9DC" class="sect5">可延迟的完整性约束</h5>
                     <div>
                        <p>本主题讨论了可延迟完整性约束。</p>
                        <p>如果任何可延迟约束适用于正在操作的表，则不会并行执行DML操作。</p>
                     </div>
                  </div>
               </div><a id="VLDBG1466"></a><div class="props_rev_3"><a id="GUID-DFF6F4B8-D8FB-40C3-A9D5-CBE7AC03B831" name="GUID-DFF6F4B8-D8FB-40C3-A9D5-CBE7AC03B831"></a><h4 id="VLDBG-GUID-DFF6F4B8-D8FB-40C3-A9D5-CBE7AC03B831" class="sect4">触发限制</h4>
                  <div>
                     <p>如果受影响的表包含可能因语句而被调用的已启用触发器，则不会并行执行DML操作。</p>
                     <p>这意味着正在复制的表上的DML语句不是并行化的。</p>
                     <p>必须禁用相关触发器才能在表上并行化DML。如果启用或禁用触发器，则相关的共享游标将失效。</p>
                  </div>
               </div><a id="VLDBG1467"></a><div class="props_rev_3"><a id="GUID-09FC59FF-9F63-453C-86D3-6D171022314A" name="GUID-09FC59FF-9F63-453C-86D3-6D171022314A"></a><h4 id="VLDBG-GUID-09FC59FF-9F63-453C-86D3-6D171022314A" class="sect4">分布式事务限制</h4>
                  <div>
                     <p>本主题将讨论分布式事务限制。</p>
                     <p>如果DML操作位于分布式事务中，或者DML或查询操作位于远程对象上，则不能并行执行。</p>
                  </div>
               </div><a id="VLDBG1468"></a><div class="props_rev_3"><a id="GUID-F3751631-4858-43FF-ACBB-B42307A43F0D" name="GUID-F3751631-4858-43FF-ACBB-B42307A43F0D"></a><h4 id="VLDBG-GUID-F3751631-4858-43FF-ACBB-B42307A43F0D" class="sect4">分布式事务并行化的示例</h4>
                  <div>
                     <p>本主题中显示了分布式事务处理的几个示例。</p>
                     <div class="section">
                        <p>在第一个示例中，DML语句查询远程对象。DML操作在没有通知的情况下串行执行，因为它引用了远程对象。</p><pre class="oac_no_warn" dir="ltr">INSERT / * + APPEND PARALLEL（t3,2）* / INTO t3 SELECT * FROM t4 @ dblink;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在下一个示例中，DML操作应用于远程对象。<code class="codeph">DELETE</code>操作未并行化，因为它引用了远程对象。
                        </p><pre class="oac_no_warn" dir="ltr">DELETE / * + PARALLEL（t1,2）* / FROM t1 @dblink;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在最后一个示例中，DML操作位于分布式事务中。<code class="codeph">DELETE</code>操作不是并行执行的，因为它发生在分布式事务中（由<code class="codeph">SELECT</code>语句启动）。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM t1 @ dblink; DELETE / * + PARALLEL（t2,2）* / FROM t2;承诺;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG14182"></a><a id="VLDBG14131"></a><div class="props_rev_3"><a id="GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433" name="GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433"></a><h4 id="VLDBG-GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433" class="sect4">并行执行Union All</h4>
                  <div>
                     <p>像<code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>这样的集合运算符由多个查询（分支）组合成一个SQL语句组成。
                     </p>
                     <p>传统上，集合运算符以顺序方式处理。各个分支可以串行或并行处理，但一次只能处理一个分支，一个接一个分支。虽然这种方法满足许多用例，但在某些情况下， <code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句的多个分支的处理应同时发生。最典型的情况是几个或所有分支都是远程SQL语句。在这种情况下，期望在所有参与的远程系统上进行并发处理以加速整个处理时间而不增加任何参与系统的工作量。
                     </p>
                     <p><code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句的并发执行的默认行为由<code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>初始化参数的设置控制。设置为<code class="codeph">12.1</code> ，默认情况下启用并发执行。任何语句中至少有一个语句是本地的并且被认为是并行处理的语句，整个<code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句也会同时处理。系统为语句的每个本地分支计算DOP，并选择最高DOP来执行整个<code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句。然后，系统在尽可能多的分支上同时工作，使用所选择的DOP并行化并行处理的分支，以及串行和远程语句上的并发工作。
                     </p>
                     <p>当<code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>初始化参数设置为小于<code class="codeph">12.1</code>的值时，必须使用<code class="codeph">PQ_CONCURRENT_UNION</code>提示显式启用<code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句的并发执行。
                     </p>
                     <p>但是，与一个接一个的分支的顺序处理不同，并发处理不保证各个分支的结果的有序返回。如果需要按顺序返回一个分支，则必须使用<code class="codeph">NO_PQ_CONCURRENT_UNION</code>提示禁用并发处理，或者必须扩充SQL语句以唯一标识语句的各个分支并对此指定的标识符进行排序。
                     </p>
                     <p>除非特别使用<code class="codeph">PQ_CONCURRENT_UNION</code>提示，否则不会同时处理仅包含串行或远程分支的<code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句。此SQL语句的DOP最多是串行和远程输入的数量。
                     </p>
                     <p>是否可以使用SQL语句的执行计划来识别是否发生<code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句的并发处理。并行执行时，串行和远程分支的执行使用可识别为<code class="codeph">PX</code> <code class="codeph">SELECTOR</code>的行源进行管理。未同时处理的语句将查询协调器（ <code class="codeph">QC</code> ）显示为串行和远程分支的协调器。
                     </p>
                     <p>在<a href="types-parallelism.html#GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433__BEIEHGJD">例8-4中</a> ，SQL语句由本地和远程分支组成。SQL语句从本地数据库加载有关黄金和白金客户的信息，以及来自远程数据库的三个主要城市的客户信息。由于本地select语句并行发生，因此该处理自动并行执行。每个串行分支仅由一个并行执行服务器进程执行。因为每个并行执行服务器可以执行一个串行分支，所以它们是并发执行的。
                     </p>
                     <div class="example" id="GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433__BEIEHGJD">
                        <p class="titleinexample">示例8-4 UNION ALL的说明计划</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXPLAIN PLAN FOR INSERT INTO all_customer SELECT * FROM GOLD_customer UNION ALL SELECT * FROM PLATINUM_customer UNION ALL SELECT * FROM SF_customer @ san_francisco UNION ALL SELECT * FROM LA_customer @ los_angeles UNION ALL SELECT * FROM LV_customer @ las_vegas; -------------------------------------------------- ----------------------------- | Id |操作|名称| TQ / Ins | IN-OUT | PQ Distrib | -------------------------------------------------- ----------------------------- | 0 |插入声明| | | | | | 1 | LOAD TABLE CONVENTIONAL | ALL_CUSTOMER | | | | | 2 | PX COORDINATOR | | | | | | 3 | PX SEND QC（RANDOM）| ：TQ10003 | | P-&gt; S | QC（兰德）| | 4 | UNION-ALL | | | PCWP | | | 5 | PX BLOCK ITERATOR | | | PCWC | | | 6 |表访问完全| GOLD_CUSTOMER | | PCWP | | | 7 | PX BLOCK ITERATOR | | | PCWC | | | 8 |表访问完全| PLATINUM_CUST | | PCWP | | | 9 | PX SELECTOR | | | PCWP | | | 10 | REMOTE | SF_CUSTOMER | | PCWP | | | 11 | PX SELECTOR | | | PCWP | | | 12 | REMOTE | LA_CUSTOMER | | PCWP | | | 13 | PX SELECTOR | | | PCWP | | | 14 | REMOTE | LV_CUSTOMER | | PCWP | | -------------------------------------------------- -----------------------------</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="VLDBG1472"></a><div class="props_rev_3"><a id="GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439" name="GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439"></a><h3 id="VLDBG-GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439" class="sect3">关于函数的并行执行</h3>
               <div>
                  <p>SQL语句可以包含用PL / SQL，Java编写的用户定义函数，也可以包含C语言中的外部过程，这些函数可以作为<code class="codeph">SELECT</code>列表， <code class="codeph">SET</code>子句或<code class="codeph">WHERE</code>子句的一部分出现。
                  </p>
                  <p>并行化SQL语句时，并行执行服务器进程将按行执行这些函数。函数使用的任何PL / SQL包变量或Java静态属性对于每个单独的并行执行过程都是私有的，并且在处理每一行时新初始化，而不是从原始会话复制。由于此过程，如果并行执行，并非所有函数都会生成正确的结果。</p>
                  <p>用户编写的表函数可以出现在语句的<code class="codeph">FROM</code>列表中。这些函数就像源表一样产生行输出。表函数在每个并行执行过程开始的语句期间初始化一次。所有变量对于并行执行过程都是完全私有的。
                  </p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="types-parallelism.html#GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C" title="用户函数可以在SQL查询语句中并行执行，也可以在DML或DDL语句中的子查询中并行执行。">并行查询中的函数</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-DEF855C0-F7F7-47F9-BC1A-F01FBBF5225D" title="在某些条件下，用户函数可以在并行DML或DDL语句中执行。">并行DML和DDL语句中的函数</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1473"></a><div class="props_rev_3"><a id="GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C" name="GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C"></a><h4 id="VLDBG-GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C" class="sect4">并行查询中的函数</h4>
                  <div>
                     <p>用户函数可以在SQL查询语句中并行执行，也可以在DML或DDL语句中的子查询中并行执行。</p>
                     <p>在<code class="codeph">SELECT</code>语句或DML或DDL语句中的子查询中，用户编写的函数可以在以下任何一种情况下并行执行：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果已使用<code class="codeph">PARALLEL_ENABLE</code>关键字声明它</p>
                        </li>
                        <li>
                           <p>如果它在包或类型中声明并且具有<code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code>子句，该子句指示所有<code class="codeph">WNDS</code> ， <code class="codeph">RNPS</code>和<code class="codeph">WNPS</code></p>
                        </li>
                        <li>
                           <p>如果使用<code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code>声明它并且系统可以分析PL / SQL代码的主体并确定代码既不写入数据库也不读取或修改包变量</p>
                        </li>
                     </ul>
                     <p>查询或子查询的其他部分有时可以并行执行，即使给定的函数执行必须保持串行。</p>
                     <div class="infoboxnotealso" id="GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C__ORACLEDATABASEDEVELOPMENTGUIDEFORIN-A68A5A66">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code>子句的信息，请<code class="codeph">PRAGMA</code> <a href="../adfns/coding-subprograms-and-packages.html#ADFNS388" target="_blank"><span><cite>“Oracle数据库开发指南”</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code>语句的信息，请<a href="../sqlrf/CREATE-FUNCTION.html#SQLRF01208" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="VLDBG1474"></a><div class="props_rev_3"><a id="GUID-DEF855C0-F7F7-47F9-BC1A-F01FBBF5225D" name="GUID-DEF855C0-F7F7-47F9-BC1A-F01FBBF5225D"></a><h4 id="VLDBG-GUID-DEF855C0-F7F7-47F9-BC1A-F01FBBF5225D" class="sect4">并行DML和DDL语句中的函数</h4>
                  <div>
                     <p>在某些条件下，用户函数可以在并行DML或DDL语句中执行。</p>
                     <p>在并行DML或DDL语句中，如在并行查询中，用户编写的函数可以在以下任何一种情况下并行执行：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果已使用<code class="codeph">PARALLEL_ENABLE</code>关键字声明它</p>
                        </li>
                        <li>
                           <p>如果它在包或类型中声明并且具有<code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code>子句，该子句指示所有<code class="codeph">RNDS</code> ， <code class="codeph">WNDS</code> ， <code class="codeph">RNPS</code>和<code class="codeph">WNPS</code></p>
                        </li>
                        <li>
                           <p>如果使用<code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code>语句声明它，并且系统可以分析PL / SQL代码的主体并确定代码既不读取也不写入数据库或读取或修改包变量</p>
                        </li>
                     </ul>
                     <p>对于并行DML语句，任何无法并行执行的函数调用都会导致整个DML语句以串行方式执行。对于<code class="codeph">INSERT</code> <code class="codeph">SELECT</code>或<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code>语句，查询部分中的函数调用将根据本节中描述的并行查询规则进行并行化。即使语句的其余部分必须串行执行，反之亦然，查询也可以并行化。
                     </p>
                  </div>
               </div>
            </div><a id="VLDBG1475"></a><div class="props_rev_3"><a id="GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85" name="GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85"></a><h3 id="VLDBG-GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85" class="sect3">关于其他类型的并行性</h3>
               <div>
                  <p>Oracle数据库可以在多种类型的操作中使用并行性。</p>
                  <p>除了并行SQL执行之外，Oracle数据库还可以将并行性用于以下类型的操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>并行恢复</p>
                     </li>
                     <li>
                        <p>并行传播（复制）</p>
                     </li>
                     <li>
                        <p>并行加载（外部表和SQL * Loader实用程序）</p>
                     </li>
                  </ul>
                  <p>与并行SQL一样，并行恢复，传播和外部表加载由并行执行协调器和多个并行执行服务器执行。但是，使用SQL * Loader的并行加载使用不同的机制。</p>
                  <p>并行执行协调器和并行执行服务器的行为可能不同，具体取决于它们执行的操作类型（SQL，恢复或传播）。例如，如果池中的所有并行执行服务器都已被占用，并且已启动并行执行服务器的最大数量：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在并行SQL和外部表加载中，并行执行协调器切换到串行处理。</p>
                     </li>
                     <li>
                        <p>在并行传播中，并行执行协调器返回错误。</p>
                     </li>
                  </ul>
                  <p>对于给定的会话，并行执行协调器仅协调一种操作。并行执行协调器不能同时协调并行SQL和并行恢复或传播。</p>
                  <div class="infoboxnotealso" id="GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85__GUID-0FA7207A-EBDA-4EBC-B548-9F60A746D8B0">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关并行加载和SQL * Loader的信息，请参见<a href="../sutil/oracle-sql-loader.html#SUTIL3311" target="_blank"><span><cite>Oracle数据库实用</cite></span></a>程序</p>
                        </li>
                        <li>
                           <p>有关并行介质恢复的信息<a href="../bradv/introduction-backup-recovery.html#BRADV8001" target="_blank"><span><cite>，请参见“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关并行实例恢复的信息，请<a href="../tgdba/performance-tuning-overview.html#TGDBA025" target="_blank"><span><cite>参见“Oracle数据库性能调整指南</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="VLDBG1477"></a><a id="VLDBG1476"></a><div class="props_rev_3"><a id="GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" name="GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4"></a><h3 id="VLDBG-GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" class="sect3">SQL语句的并行度规则</h3>
               <div>
                  <p>SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。</p>
                  <p>对于查询，DDL操作和DML操作，这些组件的确定方式不同。</p>
                  <p>并行化的决定将在以下部分中讨论：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="SQL查询只能在某些条件下并行执行。">并行化查询的规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" title="在某些条件下，DDL操作可以并行执行。">DDL声明规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" title="根据并行化DDL语句的规则，并行化CREATE TABLE AS SELECT语句的CREATE操作。">CREATE TABLE AS SELECT的规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" title="仅在某些条件下并行化更新，合并或删除操作。">UPDATE，MERGE和DELETE的规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-EB793246-B39F-444B-A2F0-7D101F016557" title="仅在某些条件下并行执行插入操作。">INSERT SELECT的规则</a></p>
                     </li>
                  </ul>
                  <p>各种类型的SQL语句的并行度可以通过语句或对象级别<code class="codeph">PARALLEL</code>提示， <code class="codeph">PARALLEL</code>子句， <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code>语句，自动并行度（Auto DOP）或表或索引<code class="codeph">PARALLEL</code>声明来确定。当使用多种方法时，Oracle数据库使用优先级规则来确定使用哪种方法来确定DOP。</p>
                  <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4__CACCAGCH" title="并行化优先级顺序">表8-2</a>显示了确定各种类型SQL语句的并行度（DOP）的优先级规则。在表中，较小的优先级数字表示该方法优先于较高的数字。例如，priority（1）优先于优先级（2），优先级（3），优先级（4）和优先级（5）。
                  </p>
                  <div class="tblformalwide" id="GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4__CACCAGCH">
                     <p class="titleintable">表8-2并行化优先级顺序</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="并行化优先级顺序" width="100%" border="1" summary="Parallelization Priority Order" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="23%" id="d53328e6538">并行操作</th>
                              <th align="left" valign="bottom" width="13%" id="d53328e6541">声明级别PARALLEL提示</th>
                              <th align="left" valign="bottom" width="13%" id="d53328e6544">对象级别PARALLEL提示</th>
                              <th align="left" valign="bottom" width="11%" id="d53328e6547">并行条款</th>
                              <th align="left" valign="bottom" width="13%" id="d53328e6550">改变会话</th>
                              <th align="left" valign="bottom" width="14%" id="d53328e6553">自动DOP</th>
                              <th align="left" valign="bottom" width="14%" id="d53328e6556">平行宣言</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6561" headers="d53328e6538 ">
                                 <p>并行查询表/索引扫描。有关更多信息，请参阅<a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="SQL查询只能在某些条件下并行执行。">并行化查询的规则</a> 。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6561 d53328e6541 ">
                                 <p>优先级（1）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6561 d53328e6544 ">
                                 <p>优先级（2）</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6561 d53328e6547 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6561 d53328e6550 ">
                                 <p>优先级（3） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6561 d53328e6553 ">
                                 <p>优先级（4）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6561 d53328e6556 ">
                                 <p>优先级（5）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6597" headers="d53328e6538 ">
                                 <p>并行<code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>或<code class="codeph">MERGE</code> 。有关更多信息，请参阅<a href="types-parallelism.html#GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" title="仅在某些条件下并行化更新，合并或删除操作。">UPDATE，MERGE和DELETE规则</a> 。</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6597 d53328e6541 ">
                                 <p>优先级（1）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6597 d53328e6544 ">
                                 <p>优先级（2）</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6597 d53328e6547 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6597 d53328e6550 ">
                                 <p>优先级（3） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DML</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6597 d53328e6553 ">
                                 <p>优先级（4）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6597 d53328e6556 ">
                                 <p>目标表的优先级（5）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6642" headers="d53328e6538 ">
                                 <p><code class="codeph">INSERT</code> <span class="bold"> </span>并行<code class="codeph">INSERT</code>操作......<code class="codeph">SELECT</code> 。有关更多信息，请参阅<a href="types-parallelism.html#GUID-EB793246-B39F-444B-A2F0-7D101F016557" title="仅在某些条件下并行执行插入操作。">INSERT SELECT规则</a> 。</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6642 d53328e6541 ">
                                 <p>优先级（1）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6642 d53328e6544 ">
                                 <p>优先级（2）</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6642 d53328e6547 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6642 d53328e6550 ">
                                 <p>优先级（3） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DML</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6642 d53328e6553 ">
                                 <p>优先级（4）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6642 d53328e6556 ">
                                 <p>插入表的优先级（5）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6688" headers="d53328e6538 ">
                                 <p><code class="codeph">SELECT</code> <span class="bold"> </span> <code class="codeph">INSERT</code>是串行时<code class="codeph">INSERT</code> <code class="codeph">SELECT</code>操作。有关更多信息，请参阅<a href="types-parallelism.html#GUID-EB793246-B39F-444B-A2F0-7D101F016557" title="仅在某些条件下并行执行插入操作。">INSERT SELECT规则</a> 。</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6688 d53328e6541 ">
                                 <p>优先级（1）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6688 d53328e6544 ">
                                 <p>优先级（2）</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6688 d53328e6547 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6688 d53328e6550 ">
                                 <p>优先级（3） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6688 d53328e6553 ">
                                 <p>优先级（4）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6688 d53328e6556 ">
                                 <p>选择表的优先级（5）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6737" headers="d53328e6538 ">
                                 <p><code class="codeph">CREATE</code> <span class="bold"> </span>并行<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code> （分区或非分区表）。有关更多信息，请参阅<a href="types-parallelism.html#GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" title="根据并行化DDL语句的规则，并行化CREATE TABLE AS SELECT语句的CREATE操作。">CREATE TABLE AS SELECT的规则</a> 。</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6737 d53328e6541 ">
                                 <p>优先级（1）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6737 d53328e6544 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6737 d53328e6547 ">
                                 <p>优先级（4）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6737 d53328e6550 ">
                                 <p>优先级（2） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DDL</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6737 d53328e6553 ">
                                 <p>优先级（3）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6737 d53328e6556 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6805" headers="d53328e6538 ">
                                 <p><code class="codeph">SELECT</code> <span class="bold"> </span> <code class="codeph">CREATE</code>是串行时<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code>操作。有关更多信息，请参阅<a href="types-parallelism.html#GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" title="根据并行化DDL语句的规则，并行化CREATE TABLE AS SELECT语句的CREATE操作。">CREATE TABLE AS SELECT的规则</a> 。</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6805 d53328e6541 ">
                                 <p>优先级（1）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6805 d53328e6544 ">
                                 <p>优先级（2）</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6805 d53328e6547 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6805 d53328e6550 ">
                                 <p>优先级（3） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6805 d53328e6553 ">
                                 <p>优先级（4）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6805 d53328e6556 ">
                                 <p>优先级（5）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6876" headers="d53328e6538 ">
                                 <p>其他DDL操作。有关更多信息，请参阅<a href="types-parallelism.html#GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" title="在某些条件下，DDL操作可以并行执行。">DDL语句规则</a> 。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6876 d53328e6541 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6876 d53328e6544 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6876 d53328e6547 ">
                                 <p>优先级（3）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6876 d53328e6550 ">
                                 <p>优先级（1） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DDL</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6876 d53328e6553 ">
                                 <p>优先级（2）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6876 d53328e6556 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnotealso" id="GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4__GUID-69C88072-93F5-454F-9AB7-5D560468BC36">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">PARALLEL</code>提示的信息，请<a href="../sqlrf/Comments.html#SQLRF50801" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">PARALLEL</code>子句的信息，请<a href="../sqlrf/parallel_clause.html#SQLRF20024" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL语句的更多信息，请<a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
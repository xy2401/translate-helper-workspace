<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Procedures for converting from Oracle Database single-instance databases to Oracle Real Application Clusters (Oracle RAC) and Oracle RAC One Node databases."></meta>
      <meta name="description" content="Procedures for converting from Oracle Database single-instance databases to Oracle Real Application Clusters (Oracle RAC) and Oracle RAC One Node databases."></meta>
      <title>将单实例Oracle数据库转换为Oracle RAC和Oracle RAC One节点</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta property="og:description" content="Procedures for converting from Oracle Database single-instance databases to Oracle Real Application Clusters (Oracle RAC) and Oracle RAC One Node databases."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00"></meta>
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95728-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="monitoring-performance.html" title="Previous" type="text/html"></link>
      <link rel="next" href="server-control-utility-reference.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="monitoring-performance.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="server-control-utility-reference.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters管理和部署指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">将单实例Oracle数据库转换为Oracle RAC和Oracle RAC One节点</li>
            </ol>
            <a id="GUID-B7E960A0-A4E8-47FE-AB6D-4172AD45944A" name="GUID-B7E960A0-A4E8-47FE-AB6D-4172AD45944A"></a><a id="RACAD8851"></a>
            
            <h2 id="RACAD-GUID-B7E960A0-A4E8-47FE-AB6D-4172AD45944A" class="sect2"><span class="enumeration_chapter">15</span>将单实例Oracle数据库转换为Oracle RAC和Oracle RAC One节点</h2>
         </header>
         <div class="ind">
            <div>
               <p>从Oracle数据库单实例数据库转换为Oracle Real Application Clusters（Oracle RAC）和Oracle RAC One Node数据库的过程。</p>
               <p>本章中的过程假定您的原始单实例数据库和目标Oracle RAC数据库使用相同的版本并在同一平台上运行。如果要从早期版本的Oracle RAC升级到Oracle RAC 12 <span class="italic">c</span> ，请使用Oracle数据库升级助手（DBUA）。
               </p>
               <p>本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-5B11828D-A9D1-4B7B-8759-DBA14AA9425D">将数据库转换为Oracle RAC的管理问题</a></p>
                  </li>
                  <li>
                     <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-E39F5684-4416-4040-B4CC-62214F5D8E52" title="您可以使用Database Configuration Assistant（DBCA）将单实例Oracle数据库转换为Oracle RAC或Oracle RAC One Node数据库。">使用DBCA转换为Oracle RAC和Oracle RAC One节点</a></p>
                  </li>
                  <li>
                     <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-28618CE4-3610-425B-B4B0-AC5D9D67AAF3" title="您可以使用Oracle Enterprise Manager Cloud Control将单实例数据库转换为Oracle RAC数据库。">准备使用rconfig和Oracle Enterprise Manager进行转换</a></p>
                  </li>
                  <li>
                     <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-1D7BB9E0-8C0F-4C80-9A22-E35F46B207EB">使用rconfig将数据库转换为Oracle RAC</a></p>
                  </li>
                  <li>
                     <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-2BCC2430-C55B-4CBA-A3DD-85CFF7EF996A">ConvertToRAC的rconfig XML输入文件示例</a></p>
                  </li>
                  <li>
                     <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-41B9B4C9-B5CF-44F6-AFA1-6FDDE156D92C">后转换步骤</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-B7E960A0-A4E8-47FE-AB6D-4172AD45944A__GUID-7E8C6E2C-A7C1-4C7D-BA25-B6264080B5F8">
                  <p class="notep1">注意：</p>
                  <p>您必须为Oracle RAC数据库使用集群Oracle自动存储管理（Oracle ASM）实例。</p>
               </div>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="../dblic/Licensing-Information.html#DBLIC-GUID-B6113390-9586-46D7-9008-DCC9EDA45AB4" target="_blank"><span><cite>Oracle数据库许可信息用户手册</cite></span></a></li>
                  </ul>
               </div>
            </div><a id="RACAD8852"></a><div class="sect2"><a id="GUID-5B11828D-A9D1-4B7B-8759-DBA14AA9425D" name="GUID-5B11828D-A9D1-4B7B-8759-DBA14AA9425D"></a><h3 id="RACAD-GUID-5B11828D-A9D1-4B7B-8759-DBA14AA9425D" class="sect3">将数据库转换为Oracle RAC的管理问题</h3>
               <div>
                  <p>请注意以下内容<a id="d45639e356" class="indexterm-anchor"></a>将单实例数据库转换为Oracle RAC之前的管理注意事项：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在从单实例Oracle数据库转换为Oracle RAC之前，应该可以使用B ackup过程。这包括在转换为Oracle RAC之前备份现有数据库，并准备在转换后立即备份Oracle RAC数据库。
                        </p>
                     </li>
                     <li>
                        <p>对于<a id="d45639e375" class="indexterm-anchor"></a>使用Oracle RAC环境进行归档时，归档文件格式需要一个线程号。
                        </p>
                     </li>
                     <li>
                        <p>介质恢复需要来自Oracle RAC数据库的所有实例的存档日志。由于此要求，如果归档到文件而不使用群集文件系统或其他方法来提供共享文件系统，则需要一种从群集数据库所在的所有节点访问归档日志的方法。实例。</p>
                     </li>
                     <li>
                        <p>默认情况下，所有数据库文件都迁移到Oracle Managed Files。此功能简化了表空间创建，确保了数据文件位置的一致性并符合Oracle Flexible Architecture规则，并通过数据文件管理减少了人为错误。</p>
                     </li>
                  </ul>
               </div>
            </div><a id="RACAD8853"></a><div class="sect2"><a id="GUID-E39F5684-4416-4040-B4CC-62214F5D8E52" name="GUID-E39F5684-4416-4040-B4CC-62214F5D8E52"></a><h3 id="RACAD-GUID-E39F5684-4416-4040-B4CC-62214F5D8E52" class="sect3">使用DBCA转换为Oracle RAC和Oracle RAC One节点</h3>
               <div>
                  <p>您可以使用Database Configuration Assistant（DBCA）将单实例Oracle数据库转换为Oracle RAC或Oracle RAC One Node数据库。</p>
                  <p>DBCA自动配置控制文件属性，创建撤消表空间和重做日志，并为启用集群的环境创建初始化参数文件条目。DBCA还使用Oracle Enterprise Manager或服务器控制实用程序（SRVCTL）配置Oracle Net Services，Oracle Clusterware资源以及Oracle RAC数据库管理配置。</p>
                  <p>在使用DBCA将单实例数据库转换为Oracle RAC或Oracle RAC One Node数据库之前，请确保您的系统满足以下条件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您的系统使用支持的硬件和操作系统软件。您的系统已正确配置以支持Oracle RAC数据库。</p>
                     </li>
                     <li>
                        <p>节点可以访问共享存储;例如，可以从所有节点访问Oracle Cluster File System或Oracle ASM。在Linux on POWER系统上，确保GPFS可用并可从所有节点访问。</p>
                     </li>
                     <li>
                        <p>您的应用程序没有设计特征，无法将其用于集群数据库处理。</p>
                     </li>
                  </ul>
                  <p>如果您的平台支持群集文件系统，则可以将其用于Oracle RAC。您还可以转换为Oracle RAC并使用非共享文件系统。在任何一种情况下，Oracle都强烈建议您使用Oracle Universal Installer来安装Oracle Database <span class="italic">12c</span> ，它可以在群集中每个选定节点上的相同位置设置Oracle主目录和库存。
                  </p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-ABE5F623-FC13-44A1-83AD-444FABBB542C" title="使用DBCA通过使用以下过程创建单实例数据库的预配置映像：">使用DBCA将Oracle数据库安装转换为Oracle RAC</a></p>
                     </li>
                     <li>
                        <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-7F9A7E91-1738-4509-9388-FD4C0A7BC23E">使用DBCA将群集上的单个实例转换为Oracle RAC One节点</a></p>
                     </li>
                     <li>
                        <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-17D75A80-D910-4662-A1A5-94F47A1D653A">使用DBCA将群集上的单个实例转换为Oracle RAC</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="administering-oracle-rac-one-node.html#GUID-0FF68097-A6DA-467D-A46C-EEB8F05FB05B" title="使用SRVCTL将Oracle RAC数据库转换为Oracle RAC One Node数据库。">转换数据库</a></li>
                     </ul>
                  </div>
               </div><a id="RACAD8854"></a><div class="sect3"><a id="GUID-ABE5F623-FC13-44A1-83AD-444FABBB542C" name="GUID-ABE5F623-FC13-44A1-83AD-444FABBB542C"></a><h4 id="RACAD-GUID-ABE5F623-FC13-44A1-83AD-444FABBB542C" class="sect4">使用DBCA将Oracle数据库安装转换为Oracle RAC</h4>
                  <div>
                     <p>从单个实例Oracle数据库转换为<a id="d45639e723" class="indexterm-anchor"></a><a id="d45639e727" class="indexterm-anchor"></a>非集群计算机到Oracle RAC，执行以下各节中描述的过程，并按所示顺序：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-B2E3B500-D57D-40D4-A33F-1D0B6890DFA1" title="使用DBCA通过使用以下过程创建单实例数据库的预配置映像：">使用DBCA创建单实例数据库的映像</a></p>
                        </li>
                        <li>
                           <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-6E53E393-DA83-4E4B-ABC1-1B46FA4DAF12">完成Oracle Clusterware安装</a></p>
                        </li>
                        <li>
                           <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-3828ACCE-DCFD-4F8B-B817-6873079D1F78">验证群集</a></p>
                        </li>
                        <li>
                           <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-BEF28BD4-0A06-4C4B-AEBD-93311B326AD9">复制预配置的数据库映像</a></p>
                        </li>
                        <li>
                           <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-CDCBB95C-59EA-4CA7-BDB6-11B3D114E397">使用Oracle RAC安装Oracle Database 12c软件</a></p>
                        </li>
                     </ul>
                  </div><a id="RACAD8855"></a><div class="sect4"><a id="GUID-B2E3B500-D57D-40D4-A33F-1D0B6890DFA1" name="GUID-B2E3B500-D57D-40D4-A33F-1D0B6890DFA1"></a><h5 id="RACAD-GUID-B2E3B500-D57D-40D4-A33F-1D0B6890DFA1" class="sect5">使用DBCA创建单实例数据库的映像</h5>
                     <div>
                        <p>使用DBCA通过使用以下过程创建单实例数据库的预配置映像：</p>
                        <ol>
                           <li>
                              <p>导航到<code class="codeph">$ORACLE_HOME</code>的<code class="codeph">bin</code>目录，然后启动DBCA。</p>
                           </li>
                           <li>
                              <p>在“欢迎”页面，单击“ <span class="bold">下一步”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在Operations页面上，选择<span class="bold">Manage Templates</span> ，然后单击<span class="bold">Next</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“模板管理”页面上，选择“ <span class="bold">创建数据库模板”</span>和“ <span class="bold">从现有数据库（结构和数据）”</span> ，然后单击“ <span class="bold">下一步”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“源数据库”页面上，在“数据库实例”列表中选择数据库名称，然后单击“ <span class="bold">下一步”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>使用SQL确保所有可插拔数据库（PDB）都是打开的，如下所示：</p><pre class="pre codeblock"><code>SQL&gt; SELECT name，open_mode FROM v $ pdbs;</code></pre><p>如果任何PDB处于OPEN以外的状态，则使用SQL打开它们。</p>
                           </li>
                           <li>
                              <p>在“模板属性”页面上，在“名称”字段中输入模板的名称。Oracle建议您使用数据库名称。</p>
                              <p>默认情况下，模板文件在<code class="codeph">$ORACLE_HOME/assistants/dbca/templates</code>目录中生成。您可以在“描述”字段中输入文件的描述，并在“模板数据文件”字段中更改模板文件位置。
                              </p>
                              <p>完成输入后，单击“ <span class="bold">下一步”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“数据库相关文件的位置”页上，选择“ <span class="bold">维护文件位置”</span> ，以便可以将数据库还原到当前目录结构，然后单击“ <span class="bold">完成”</span> 。
                              </p>
                           </li>
                        </ol>
                        <p>DBCA生成两个文件：数据库结构文件（ <span class="italic"><code class="codeph">template_name</code></span> <code class="codeph">.dbc</code> ）和数据库预配置映像文件（ <span class="italic"><code class="codeph">template_name</code></span> <code class="codeph">.dfb</code> ）。
                        </p>
                     </div>
                  </div><a id="RACAD8856"></a><div class="sect4"><a id="GUID-6E53E393-DA83-4E4B-ABC1-1B46FA4DAF12" name="GUID-6E53E393-DA83-4E4B-ABC1-1B46FA4DAF12"></a><h5 id="RACAD-GUID-6E53E393-DA83-4E4B-ABC1-1B46FA4DAF12" class="sect5">完成Oracle Clusterware安装</h5>
                     <div>
                        <p>完成Oracle Clusterware的安装。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="RACAD8857"></a><div class="sect4"><a id="GUID-3828ACCE-DCFD-4F8B-B817-6873079D1F78" name="GUID-3828ACCE-DCFD-4F8B-B817-6873079D1F78"></a><h5 id="RACAD-GUID-3828ACCE-DCFD-4F8B-B817-6873079D1F78" class="sect5">验证群集</h5>
                     <div>
                        <p>使用Cluster Verification Utility（CVU）验证群集配置。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../cwadd/cluster-verification-utility-reference.html#CWADD-GUID-B445A858-9F00-4423-990E-109545AC11C3" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="RACAD8858"></a><div class="sect4"><a id="GUID-BEF28BD4-0A06-4C4B-AEBD-93311B326AD9" name="GUID-BEF28BD4-0A06-4C4B-AEBD-93311B326AD9"></a><h5 id="RACAD-GUID-BEF28BD4-0A06-4C4B-AEBD-93311B326AD9" class="sect5">复制预配置的数据库映像</h5>
                     <div>
                        <p>复制预配置的数据库映像。这包括将数据库结构<code class="codeph">*.dbc</code>文件和数据库预配置的映像<code class="codeph">*.dfb</code>文件（您在上一节中使用DBCA创建）复制到计划运行DBCA的群集节点上的临时位置。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-B2E3B500-D57D-40D4-A33F-1D0B6890DFA1" title="使用DBCA通过使用以下过程创建单实例数据库的预配置映像：">使用DBCA创建单实例数据库的映像</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="RACAD8859"></a><div class="sect4"><a id="GUID-CDCBB95C-59EA-4CA7-BDB6-11B3D114E397" name="GUID-CDCBB95C-59EA-4CA7-BDB6-11B3D114E397"></a><h5 id="RACAD-GUID-CDCBB95C-59EA-4CA7-BDB6-11B3D114E397" class="sect5">使用Oracle RAC安装Oracle Database 12 <span class="italic">c</span>软件</h5>
                     <div>
                        <ol>
                           <li>
                              <p>运行Oracle Universal Installer以使用Oracle RAC安装Oracle数据库。</p>
                           </li>
                           <li>
                              <p>在Oracle Universal Installer的“指定硬件群集安装”页面上选择“ <span class="bold">群集安装模式</span> ”，然后选择要包含在Oracle RAC数据库中的节点。
                              </p>
                           </li>
                           <li>
                              <p>在“Oracle Universal Installer数据库配置类型”页面上，选择“ <span class="bold">高级”</span>安装类型。
                              </p>
                              <p>安装Oracle数据库软件后，Oracle Universal Installer将运行安装后配置工具，例如Net Configuration Assistant（NETCA），DBCA等。</p>
                           </li>
                           <li>
                              <p>在“DBCA模板选择”页面上，使用您在上一节中复制到临时位置的模板。使用浏览选项选择模板位置。</p>
                              <p>选择要部署的选项。您的选择如下：Oracle RAC数据库; Oracle RAC One Node数据库;或Oracle单实例数据库。</p>
                           </li>
                           <li>
                              <p>创建Oracle RAC数据库后，DBCA将显示“密码管理”页面，您必须在该页面上更改具有SYSDBA和SYSOPER权限的数据库用户的密码。DBCA退出时，转换过程完成。</p>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div><a id="RACAD8860"></a><div class="sect3"><a id="GUID-7F9A7E91-1738-4509-9388-FD4C0A7BC23E" name="GUID-7F9A7E91-1738-4509-9388-FD4C0A7BC23E"></a><h4 id="RACAD-GUID-7F9A7E91-1738-4509-9388-FD4C0A7BC23E" class="sect4">使用DBCA将群集上的单个实例转换为Oracle RAC One节点</h4>
                  <div>
                     <p>使用DBCA通过使用以下过程将单实例Oracle数据库转换为Oracle RAC One Node：</p>
                     <ol>
                        <li>
                           <p>将目录更改为<code class="codeph">$ORACLE_HOME/bin</code> 。
                           </p>
                        </li>
                        <li>
                           <p>启动DBCA：</p><pre class="pre codeblock"><code>$ dbca</code></pre></li>
                        <li>
                           <p>在“欢迎”窗口中，选择<span class="bold">Oracle RAC One Node</span>数据库。
                           </p>
                        </li>
                        <li>
                           <p>使用您在上一节中选择部署的模板。</p>
                        </li>
                     </ol>
                  </div>
               </div><a id="RACAD8861"></a><div class="sect3"><a id="GUID-17D75A80-D910-4662-A1A5-94F47A1D653A" name="GUID-17D75A80-D910-4662-A1A5-94F47A1D653A"></a><h4 id="RACAD-GUID-17D75A80-D910-4662-A1A5-94F47A1D653A" class="sect4">使用DBCA将群集上的单个实例转换为Oracle RAC</h4>
                  <div>
                     <p>在集群节点上可以存在单实例数据库的三种情况：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>方案1：单实例数据库的Oracle主目录安装在群集节点上并启用了Oracle RAC。</p>
                        </li>
                        <li>
                           <p>方案2：单实例数据库的Oracle主目录安装在群集节点上，但此Oracle主目录的Oracle RAC功能已禁用。</p>
                        </li>
                        <li>
                           <p>方案3：单实例数据库的Oracle主目录仅安装在群集中的本地节点上。当您选择Oracle数据库<span class="italic">12c的</span>安装过程中，Oracle通用安装指定硬件集群安装页面上的本地安装选项会出现这种情况。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-0BA2E0B2-2AD4-4BDD-99AC-3969D9E44C54">从支持Oracle RAC的主页运行的群集上的单实例数据库</a></li>
                           <li><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-0B53B175-4EF8-4634-8A80-A4307F12DF0C">从Oracle RAC禁用的主页运行的群集上的单实例数据库</a></li>
                           <li><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-ABE5F623-FC13-44A1-83AD-444FABBB542C" title="使用DBCA通过使用以下过程创建单实例数据库的预配置映像：">使用DBCA将Oracle数据库安装转换为Oracle RAC</a></li>
                           <li><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-CDCBB95C-59EA-4CA7-BDB6-11B3D114E397">使用Oracle RAC安装Oracle Database 12c软件</a></li>
                        </ul>
                     </div>
                  </div><a id="RACAD8862"></a><div class="sect4"><a id="GUID-0BA2E0B2-2AD4-4BDD-99AC-3969D9E44C54" name="GUID-0BA2E0B2-2AD4-4BDD-99AC-3969D9E44C54"></a><h5 id="RACAD-GUID-0BA2E0B2-2AD4-4BDD-99AC-3969D9E44C54" class="sect5">从支持Oracle RAC的主页运行的群集上的单实例数据库</h5>
                     <div>
                        <p>执行以下过程以转换从启用了Oracle RAC选项的Oracle主目录运行的群集节点上的单实例数据库。</p>
                        <ol>
                           <li>
                              <p>使用DBCA创建单实例数据库的预配置映像。要手动执行转换，请关闭单实例数据库。</p>
                           </li>
                           <li id="GUID-0BA2E0B2-2AD4-4BDD-99AC-3969D9E44C54__BABCEJBG">
                              <p>将节点添加到群集。确保所有节点都可以访问Oracle Clusterware和Oracle RAC使用的共享存储。</p>
                           </li>
                           <li>
                              <p>从现有的Oracle主目录中，将此主目录扩展到新节点。</p>
                           </li>
                           <li>
                              <p>从新添加的节点，使用NETCA在其他节点上配置侦听器。选择在现有节点上使用的相同端口号和协议。如果NETCA在节点列表页面中显示现有节点，则不要选择此节点，因为已在其上配置了侦听器。</p>
                           </li>
                           <li>
                              <p>使用以下过程之一转换数据库：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-811A4A82-4B4F-4C79-8A8C-78110D30C149">使用DBCA的自动转换过程</a></p>
                                 </li>
                                 <li>
                                    <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-A4F1E90E-152C-4A18-9E34-2CA7AE14F10C">手动转换程序</a></p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-B2E3B500-D57D-40D4-A33F-1D0B6890DFA1" title="使用DBCA通过使用以下过程创建单实例数据库的预配置映像：">使用DBCA创建单实例数据库的映像</a></li>
                              <li><a href="../cwadd/adding-and-deleting-cluster-nodes.html#CWADD-GUID-929C0CD9-9B67-45D6-B864-5ED3B47FE458" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                              <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-924C2E52-4C34-4500-92FB-80A453FE14A9" title="您可以在静默模式下使用DBCA将实例添加到已扩展Oracle Clusterware主目录和Oracle数据库主目录的节点。">在安装了Oracle Clusterware的情况下将Oracle RAC添加到节点</a></li>
                           </ul>
                        </div>
                     </div><a id="RACAD8863"></a><div class="sect5"><a id="GUID-811A4A82-4B4F-4C79-8A8C-78110D30C149" name="GUID-811A4A82-4B4F-4C79-8A8C-78110D30C149"></a><h6 id="RACAD-GUID-811A4A82-4B4F-4C79-8A8C-78110D30C149" class="sect6">使用DBCA的自动转换过程</h6>
                        <div>
                           <p></p>
                           <p>如果您使用DBCA创建单实例数据库的预配置映像（如上一节中所述），则执行以下步骤以完成到Oracle RAC数据库的转换：</p>
                           <ol>
                              <li>
                                 <p>从初始节点启动DBCA。选择要包含的节点名称作为群集数据库的一部分。在“模板选择”页面上，选择您创建的预配置模板。输入数据库名称并响应剩余的DBCA提示。</p>
                              </li>
                              <li>
                                 <p>指定Oracle数据库数据文件的共享存储位置。</p>
                              </li>
                           </ol>
                           <p>创建Oracle RAC数据库后，DBCA将显示“密码管理”页面，您必须在该页面上更改具有SYSDBA和SYSOPER权限的数据库用户的密码。DBCA退出时，转换过程完成。</p>
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>相关话题</strong></p>
                              <ul>
                                 <li><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-B2E3B500-D57D-40D4-A33F-1D0B6890DFA1" title="使用DBCA通过使用以下过程创建单实例数据库的预配置映像：">使用DBCA创建单实例数据库的映像</a></li>
                                 <li><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-A4F1E90E-152C-4A18-9E34-2CA7AE14F10C">手动转换程序</a></li>
                              </ul>
                           </div>
                        </div>
                     </div><a id="RACAD8864"></a><div class="sect5"><a id="GUID-A4F1E90E-152C-4A18-9E34-2CA7AE14F10C" name="GUID-A4F1E90E-152C-4A18-9E34-2CA7AE14F10C"></a><h6 id="RACAD-GUID-A4F1E90E-152C-4A18-9E34-2CA7AE14F10C" class="sect6">手动转换程序</h6>
                        <div>
                           <p>如果您没有使用DBCA创建单实例数据库的预配置映像（如上一节中所述），请执行以下步骤以完成转换：</p>
                           <ol>
                              <li>
                                 <p>在已添加的每个节点上创建Optimal Flexible Architecture目录结构。</p>
                              </li>
                              <li>
                                 <p>通过使用<code class="codeph">REUSE</code>关键字运行<code class="codeph">CREATE CONTROLFILE</code> SQL语句重新创建控制文件，并根据Oracle RAC配置的需要指定<code class="codeph">MAXINSTANCES</code>和<code class="codeph">MAXLOGFILES</code>等。<code class="codeph">MAXINSTANCES</code>建议默认值为32。
                                 </p>
                              </li>
                              <li>
                                 <p>关闭数据库实例。</p>
                              </li>
                              <li id="GUID-A4F1E90E-152C-4A18-9E34-2CA7AE14F10C__BABIHFFH">
                                 <p>如果您的单实例数据库使用SPFILE，则使用以下SQL语句从SPFILE创建临时参数文件（PFILE）：</p><pre class="pre codeblock"><code>CREATE PFILE = ' <span class="variable" translate="no">pfile_name</span>从SPFILE = '' <span class="variable" translate="no">spfile_name</span> '</code></pre></li>
                              <li>
                                 <p>将<code class="codeph">CLUSTER_DATABASE</code>参数设置为<code class="codeph">TRUE</code> ，并使用<code class="codeph"><span class="variable" translate="no">sid . <span class="variable" translate="no">parameter</span> = <span class="variable" translate="no">value</span></span></code>将<code class="codeph">INSTANCE_NUMBER</code>参数设置为每个实例的唯一值<code class="codeph"><span class="variable" translate="no">sid</span> . <span class="variable" translate="no">parameter</span> = <span class="variable" translate="no">value</span></code>语法。
                                 </p>
                                 <p>如果优化了单实例数据库的内存使用量，则调整系统全局区域（SGA）的大小，以避免在转换为Oracle RAC时进行交换和分页。您应该进行此调整，因为Oracle RAC需要大约350个字节用于每个缓冲区以容纳全局缓存服务（GCS）。例如，如果您有10,000个缓冲区，那么Oracle RAC需要大约350乘以10,000个字节的更多内存。因此，通过相应地更改<code class="codeph">DB_CACHE_SIZE</code>和<code class="codeph">DB_nK_CACHE_SIZE</code>参数来调整SGA的大小。
                                 </p>
                              </li>
                              <li>
                                 <p>使用步骤<a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-A4F1E90E-152C-4A18-9E34-2CA7AE14F10C__BABIHFFH">4中</a>创建的PFILE启动数据库实例。
                                 </p>
                              </li>
                              <li>
                                 <p>如果您的单实例数据库使用自动撤消管理，则使用<code class="codeph">CREATE UNDO TABLESPACE</code> SQL语句为每个其他实例创建一个撤消表空间。
                                 </p>
                              </li>
                              <li>
                                 <p>创建每个附加实例至少有两个重做日志的重做线程。使用<code class="codeph">ALTER DATABASE</code> SQL语句启用新的重做线程。然后，关闭数据库实例。
                                 </p>
                              </li>
                              <li>
                                 <p>将Oracle密码文件从初始节点或从您工作的节点复制到群集数据库将具有实例的其他节点上的相应位置。为每个其他实例适当地替换每个密码文件中的<code class="codeph">ORACLE_SID</code>名称。
                                 </p>
                              </li>
                              <li>
                                 <p>将<code class="codeph">REMOTE_LISTENER</code>参数设置为单客户端访问名称（SCAN）和端口。
                                 </p>
                              </li>
                              <li>
                                 <p>配置数据库和实例，并为地址表项的网络服务条目<code class="codeph">LOCAL_LISTENER</code>每个实例，为<code class="codeph">REMOTE_LISTENER</code>中<code class="codeph">tnsnames.ora</code>文件，并且复制<code class="codeph">tnsnames.ora</code>文件中的所有节点。
                                 </p>
                              </li>
                              <li>
                                 <p>从PFILE创建SPFILE。</p>
                              </li>
                              <li>
                                 <p>创建包含以下条目的<code class="codeph">$ORACLE_HOME/dbs/init <span class="variable" translate="no">sid</span> .ora</code>文件，其中<code class="codeph"><span class="variable" translate="no">spfile_path_name</span></code>是SPFILE的完整路径名：</p><pre class="pre codeblock"><code>spfile = <span class="variable" translate="no">'spfile_path_name</span> '</code></pre></li>
                              <li>
                                 <p>在本地节点上，使用SQL * Plus运行<code class="codeph">catclust.sql</code> 。此脚本创建Oracle RAC数据库所需的字典视图。例如：</p><pre class="pre codeblock"><code>SQL&gt;开始？/rdbms/admin/catclust.sql</code></pre></li>
                              <li>
                                 <p>使用SRVCTL添加Oracle RAC或Oracle RAC One Node数据库的配置及其实例到节点映射。</p>
                                 <ol type="a">
                                    <li>
                                       <p>要添加Oracle RAC数据库的配置，请使用以下命令：</p><pre class="pre codeblock"><code>$ srvctl add database -dbname <span class="variable" translate="no">db_name</span> -oraclehome <span class="variable" translate="no">Oracle_home</span> -spfile <span class="variable" translate="no">spfile_path_name</span> $ srvctl add instance -dbname <span class="variable" translate="no">db_name</span> -instance <span class="variable" translate="no">inst1_name</span> -node <span class="variable" translate="no">node1_name</span> $ srvctl add instance -dbname <span class="variable" translate="no">db_name</span> -instance <span class="variable" translate="no">inst2_name</span> -node <span class="variable" translate="no">node2_name</span> ...</code></pre></li>
                                    <li>
                                       <p>要添加Oracle RAC One Node数据库的配置，请使用以下命令：</p><pre class="pre codeblock"><code>$ srvctl add database -dbname <span class="variable" translate="no">db_name</span> -dbtype RACONENODE -oraclehome <span class="italic">Oracle_home</span> -spfile <span class="variable" translate="no">spfile_path_name</span></code></pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>使用SRVCTL启动Oracle RAC或Oracle RAC One Node数据库：</p><pre class="pre codeblock"><code>srvctl启动数据库-d <span class="variable" translate="no">db_name</span></code></pre></li>
                           </ol>
                           <p>使用SRVCTL启动数据库后，转换过程即告完成。您可以运行以下SQL语句来查看Oracle RAC数据库中所有实例的状态：</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM v $ active_instances;</code></pre></div>
                        <div>
                           <div class="relinfo">
                              <p><strong>相关话题</strong></p>
                              <ul>
                                 <li><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-B2E3B500-D57D-40D4-A33F-1D0B6890DFA1" title="使用DBCA通过使用以下过程创建单实例数据库的预配置映像：">使用DBCA创建单实例数据库的映像</a></li>
                                 <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>“Oracle Real Application Clusters安装指南”</cite></span></a></li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div><a id="RACAD8865"></a><div class="sect4"><a id="GUID-0B53B175-4EF8-4634-8A80-A4307F12DF0C" name="GUID-0B53B175-4EF8-4634-8A80-A4307F12DF0C"></a><h5 id="RACAD-GUID-0B53B175-4EF8-4634-8A80-A4307F12DF0C" class="sect5">从Oracle RAC禁用的主页运行的群集上的单实例数据库</h5>
                     <div>
                        <p>您可以在从禁用Oracle RAC选项的Oracle主目录运行的集群上创建单实例数据库。要在禁用Oracle RAC的群集上创建Oracle主目录，可以在安装Oracle数据库软件时在Oracle Universal Installer的“节点选择”页面上选择<span class="bold">本地</span>和<span class="bold">非群集</span> 。您还可以执行单节点群集（使用Oracle RAC）安装，但稍后会禁用Oracle RAC选项。
                        </p>
                        <p>执行以下过程以将此类型的单实例数据库转换为Oracle RAC或Oracle RAC One Node数据库：</p>
                        <ol>
                           <li>
                              <p>使用DBCA创建单实例数据库的预配置映像，如上一节中所述。要手动执行转换，请关闭单实例数据库。</p>
                           </li>
                           <li>
                              <p>将目录更改为Oracle主目录下<code class="codeph">rdbms</code>目录中的<code class="codeph">lib</code>子目录。
                              </p>
                           </li>
                           <li>
                              <p>通过运行以下命令重新链接<code class="codeph">oracle</code>二进制文件：</p><pre class="pre codeblock"><code>make -f ins_rdbms.mk rac_on make -f ins_rdbms.mk ioracle</code></pre></li>
                           <li>
                              <p>将节点添加到群集。确保所有节点都可以访问Oracle Clusterware和Oracle RAC使用的共享存储。</p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-B2E3B500-D57D-40D4-A33F-1D0B6890DFA1" title="使用DBCA通过使用以下过程创建单实例数据库的预配置映像：">使用DBCA创建单实例数据库的映像</a></li>
                              <li><a href="../cwadd/adding-and-deleting-cluster-nodes.html#CWADD-GUID-929C0CD9-9B67-45D6-B864-5ED3B47FE458" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD8867"></a><div class="sect2"><a id="GUID-28618CE4-3610-425B-B4B0-AC5D9D67AAF3" name="GUID-28618CE4-3610-425B-B4B0-AC5D9D67AAF3"></a><h3 id="RACAD-GUID-28618CE4-3610-425B-B4B0-AC5D9D67AAF3" class="sect3">准备使用rconfig和Oracle Enterprise Manager进行转换</h3>
               <div>
                  <p>你可以使用<code class="codeph">rconfig</code> ，或<a id="d45639e2993" class="indexterm-anchor"></a><a id="d45639e2995" class="indexterm-anchor"></a><a id="d45639e2999" class="indexterm-anchor"></a> Oracle Enterprise Manager，用于协助将单实例数据库安装转换为Oracle RAC数据库。第一个是<code class="codeph">rconfig</code> ，它是一个命令行实用程序。Oracle Enterprise Manager云控制数据库管理选项“转换为群集数据库”提供了基于GUI的转换工具。以下部分介绍了如何使用这些转换工具：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-F03B7CD7-4C61-47E9-8F58-7D3E1C611E90">转换为Oracle RAC数据库的先决条件</a></p>
                     </li>
                     <li>
                        <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-409E33E5-8E49-4C90-A85C-9EA3923510C3">使用rconfig进行Oracle RAC转换期间的配置更改</a></p>
                     </li>
                     <li>
                        <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-C846650A-B9CC-40C7-B31B-02CEE1177D60">使用rconfig或Oracle Enterprise Manager将数据库转换为Oracle RAC</a></p>
                     </li>
                     <li>
                        <p><a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-AB9AFE38-0992-4EC1-A645-E41C0E25BE0A" title="您可以使用Oracle Enterprise Manager Cloud Control将单实例数据库转换为Oracle RAC数据库。">使用Oracle Enterprise Manager将数据库转换为Oracle RAC</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-28618CE4-3610-425B-B4B0-AC5D9D67AAF3__GUID-CA30EEC8-0B26-491C-BA8D-387CDD6D2964">
                     <p class="notep1">注意：</p>
                     <p>在开始转换之前，请备份现有数据库;在开始任何重大更改之前，您应该备份数据库。</p>
                  </div>
               </div><a id="RACAD8868"></a><div class="sect3"><a id="GUID-F03B7CD7-4C61-47E9-8F58-7D3E1C611E90" name="GUID-F03B7CD7-4C61-47E9-8F58-7D3E1C611E90"></a><h4 id="RACAD-GUID-F03B7CD7-4C61-47E9-8F58-7D3E1C611E90" class="sect4">转换为Oracle RAC数据库的先决条件</h4>
                  <div>
                     <p>在将单实例数据库转换为Oracle RAC数据库之前，请确保为要创建Oracle RAC数据库节点的每个群集节点满足以下条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle Clusterware 12 <span class="italic">c</span>已安装，配置并正在运行。
                           </p>
                        </li>
                        <li>
                           <p>安装了Oracle RAC 12 <span class="italic">c</span>软件。
                           </p>
                        </li>
                        <li>
                           <p>Oracle软件启用了Oracle RAC选项。</p>
                        </li>
                        <li>
                           <p>共享存储（Oracle Cluster File System或Oracle ASM）可从所有节点访问和访问。</p>
                        </li>
                        <li>
                           <p><code class="codeph">oracle</code>帐户或用于安装Oracle软件的用户帐户存在用户等效性。
                           </p>
                        </li>
                        <li>
                           <p>如果您打算使用Oracle Enterprise Manager，则会在每个节点上配置并运行Oracle Management Agent，并配置集群和主机信息。</p>
                        </li>
                        <li>
                           <p>您已备份现有数据库。</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-F03B7CD7-4C61-47E9-8F58-7D3E1C611E90__GUID-C839EB9C-A1ED-4546-915A-DFF1C94A1A5C">
                        <p class="notep1">注意：</p>
                        <p>必须将集群Oracle ASM实例用于Oracle RAC数据库。</p>
                     </div>
                  </div>
               </div><a id="RACAD8869"></a><div class="sect3"><a id="GUID-409E33E5-8E49-4C90-A85C-9EA3923510C3" name="GUID-409E33E5-8E49-4C90-A85C-9EA3923510C3"></a><h4 id="RACAD-GUID-409E33E5-8E49-4C90-A85C-9EA3923510C3" class="sect4">使用rconfig进行Oracle RAC转换期间的配置更改</h4>
                  <div>
                     <p>使用<code class="codeph">rconfig</code>实用程序将单实例数据库转换为Oracle RAC时，会发生以下更改：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在转换期间， <code class="codeph">rconfig</code>将目标Oracle RAC数据库置于归档日志模式，并为数据库启用归档。如果您不打算使用存档日志空间，则可以在转换完成后禁用存档日志记录。
                           </p>
                        </li>
                        <li>
                           <p>对于<span class="bold">Shared Storage Type</span>值，如果输入<span class="bold">CFS</span> ，并且您使用群集文件系统进行单实例数据库存储，则<code class="codeph">rconfig</code>将环境转换为使用Oracle Managed Files进行数据库存储，并将数据文件放在位于子目录中的子目录中在共享存储位置下。
                           </p>
                        </li>
                        <li>
                           <p>在转换期间， <code class="codeph">rconfig</code>将数据库文件移动到指定的共享位置，并使用Oracle Managed Files配置它们。
                           </p>
                           <p>为避免将Oracle Managed Files与转换后的数据库一起使用，单实例数据库文件必须位于共享文件系统中，并且必须指明<code class="codeph">rconfig</code>不应移动文件。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RACAD8870"></a><div class="sect3"><a id="GUID-C846650A-B9CC-40C7-B31B-02CEE1177D60" name="GUID-C846650A-B9CC-40C7-B31B-02CEE1177D60"></a><h4 id="RACAD-GUID-C846650A-B9CC-40C7-B31B-02CEE1177D60" class="sect4">使用rconfig或Oracle Enterprise Manager将数据库转换为Oracle RAC</h4>
                  <div>
                     <p>以下列表描述了将单实例Oracle数据库转换为Oracle RAC数据库的方案：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>将单实例Oracle Database 12 <span class="italic">c</span>数据库转换为Oracle RAC 12 <span class="italic">c</span>数据库，该数据库使用<span class="italic">相同的</span> Oracle主目录并使用与单实例数据库相同的数据文件。
                           </p>
                           <p>在此方案中，从Oracle RAC数据库主目录运行<code class="codeph">rconfig</code>实用程序，或使用Oracle Enterprise Manager Cloud Control的单实例数据库目标上的“ <span class="bold">转换为RAC”</span>选项。
                           </p>
                        </li>
                        <li>
                           <p>转换使用Oracle数据库的版本早于Oracle数据库<span class="italic">12c</span>中到Oracle RAC 12 <span class="italic">C</span>数据库，跑出来的一样Oracle主的单实例数据库，并使用相同的数据文件的单实例数据库</p>
                           <p>在此方案中，使用Oracle Universal Installer和数据库升级助手（DBUA）将单实例数据库更新到Oracle Database 12 <span class="italic">c</span> 。然后使用<code class="codeph">rconfig</code>或Oracle Enterprise Manager <span class="bold">转换为RAC</span>选项，如上一个方案中所述。
                           </p>
                        </li>
                        <li>
                           <p>将单实例Oracle Database 12 <span class="italic">c</span>转换为Oracle RAC 12 <span class="italic">c</span>数据库，运行<span class="italic">不同的</span> Oracle主目录并使用与单实例数据库相同的数据文件。
                           </p>
                           <p>在此方案中，在目标数据库主目录中运行<code class="codeph">rconfig</code>实用程序，或使用Oracle企业管理器云控制的单实例数据库目标中的“ <span class="bold">转换为RAC”</span>选项。出现提示时提供文件存储位置。
                           </p>
                           <div class="infoboxnote" id="GUID-C846650A-B9CC-40C7-B31B-02CEE1177D60__GUID-0E500A1A-BFF1-4201-A792-CDF88B173E78">
                              <p class="notep1">注意：</p>
                              <p>如果为目标数据库主目录和源数据库主目录指定Oracle主目录用户，则目标数据库主目录的Oracle主目录用户必须与源数据库主目录的Oracle主目录用户相同。</p>
                           </div>
                        </li>
                        <li>
                           <p>将单实例Oracle Database 12 <span class="italic">c</span>转换为Oracle RAC 12 <span class="italic">c</span>数据库，运行<span class="italic">不同的</span> Oracle主目录，运行单实例数据库的主机<span class="italic">不是</span> Oracle RAC数据库使用的节点。
                           </p>
                           <p>在此方案中，创建单实例数据库的克隆映像，并将克隆映像移动到作为Oracle RAC数据库使用的节点之一的主机。然后使用<code class="codeph">rconfig</code>或Oracle Enterprise Manager <span class="bold">转换为RAC</span>选项，如上一个方案中所述。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RACAD8871"></a><div class="sect3"><a id="GUID-AB9AFE38-0992-4EC1-A645-E41C0E25BE0A" name="GUID-AB9AFE38-0992-4EC1-A645-E41C0E25BE0A"></a><h4 id="RACAD-GUID-AB9AFE38-0992-4EC1-A645-E41C0E25BE0A" class="sect4">使用Oracle Enterprise Manager将数据库转换为Oracle RAC</h4>
                  <div>
                     <p>您可以使用Oracle Enterprise Manager Cloud Control将单实例数据库转换为Oracle RAC数据库。</p>
                     <p>要使用此功能，请完成以下步骤：</p>
                     <ol>
                        <li>
                           <p>登录Oracle Enterprise Manager Cloud Control。在主页中，单击“ <span class="bold">目标”</span>选项卡。
                           </p>
                        </li>
                        <li>
                           <p>在“目标”页面上，单击“ <span class="bold">数据库”</span>辅助选项卡，然后单击数据库“名称”列中的链接以转换为Oracle RAC。</p>
                        </li>
                        <li>
                           <p>在“数据库”主页上，从“可用性”菜单中，选择“ <span class="bold">转换为群集数据库”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>以具有<code class="codeph">SYSDBA</code>权限的数据库用户<code class="codeph">SYS</code>身份登录到要转换的数据库，然后单击“ <span class="bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“转换为群集数据库：群集凭据”页面上，提供要转换的目标数据库的<code class="codeph">oracle</code>用户和密码的用户名和密码。如果目标数据库使用的是Oracle ASM，则还要提供SYSASM用户和密码，然后单击“ <span class="bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“主机”页面上，选择群集中的主机节点作为已安装的Oracle RAC数据库中的群集成员。完成选择后，单击“ <span class="bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“转换为数据库：选项”页上，选择是要使用现有侦听器和端口号，还是为群集指定新的侦听器和端口号。还为群集上的群集数据库实例提供前缀。</p>
                           <p>输入完信息后，单击“ <span class="bold">下一步”</span> ，或者在决定如何输入信息时需要帮助时单击“ <span class="bold">帮助”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“转换为群集数据库：共享存储”页上，选择使用现有共享存储区域的选项，或选择将数据库文件复制到新共享存储位置的选项。此外，确定是否要使用现有的快速恢复区域，或使用Oracle数据库管理的文件将恢复文件复制到新的快速恢复区域。</p>
                           <p>如果使用Oracle ASM，则Oracle建议您将数据文件和恢复文件放在不同的故障组中。故障组由共享硬件定义，例如两个磁盘之间共享的控制器，或同一主轴上的两个磁盘。如果两个磁盘共享可能发生故障的硬件，使两个磁盘都不可用，则说这些磁盘位于同一个故障组中。如果不使用Oracle ASM，则Oracle建议将数据文件和恢复文件存储在不同的位置，例如，单独的Oracle ASM故障组，以便硬件故障不会影响可用性。</p>
                           <p>输入完信息后，单击“ <span class="bold">下一步”</span> ，或者在决定如何输入信息时需要帮助时单击“ <span class="bold">帮助”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“转换为群集数据库：查看”页面上，查看您选择的选项。单击“ <span class="bold">提交作业”</span>以继续转换。要更改您选择的任何选项，请单击“上<span class="bold">一步”</span> 。要取消转换，请单击“ <span class="bold">取消”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“确认”页面上，单击“ <span class="bold">查看作业”</span>以检查转换的状态。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../upgrd/intro-to-upgrading-oracle-database.html#UPGRD-GUID-FA024F34-A61A-4C4B-AA60-C123A9191A16" target="_blank"><span><cite>Oracle数据库升级指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD8872"></a><div class="sect2"><a id="GUID-1D7BB9E0-8C0F-4C80-9A22-E35F46B207EB" name="GUID-1D7BB9E0-8C0F-4C80-9A22-E35F46B207EB"></a><h3 id="RACAD-GUID-1D7BB9E0-8C0F-4C80-9A22-E35F46B207EB" class="sect3">使用rconfig将数据库转换为Oracle RAC</h3>
               <div>
                  <p>您可以使用命令行实用程序<code class="codeph">rconfig</code>将单实例数据库转换为Oracle RAC数据库，或将其转换为Oracle RAC One Node数据库，具体取决于您在<code class="codeph">ConvertToRAC.xml</code>文件中提供的值。要使用此功能，请完成以下步骤：</p>
                  <ol>
                     <li>
                        <p>作为<code class="codeph">oracle</code>用户，导航到<code class="codeph">$ORACLE_HOME/assistants/rconfig/sampleXMLs</code> ，并使用文本编辑器（如<code class="codeph">vi</code>打开文件<code class="codeph">ConvertToRAC.xml</code> 。
                        </p>
                     </li>
                     <li id="GUID-1D7BB9E0-8C0F-4C80-9A22-E35F46B207EB__BABGIGID">
                        <p>查看<code class="codeph">ConvertToRAC.xml</code>文件，并根据系统要求修改参数。XML示例文件包含注释，提供有关如何配置文件的说明。
                        </p>
                        <div class="infoboxnote" id="GUID-1D7BB9E0-8C0F-4C80-9A22-E35F46B207EB__GUID-9493B1E2-CDE7-4A3D-A320-5786DC2979E5">
                           <p class="notep1">警告：</p>
                           <p>设置转换选项<code class="codeph">Convert verify="ONLY"</code>以执行测试转换，以确保可以成功完成转换。
                           </p>
                        </div>
                        <p>完成参数修改后，使用格式为<code class="codeph"><span class="variable" translate="no">file_name</span> .xml</code>的名称保存文件。记下您选择的名称。
                        </p>
                     </li>
                     <li>
                        <p>导航到<code class="codeph">$ORACLE_HOME/bin</code>目录，并使用以下命令运行命令<code class="codeph">rconfig</code> ，其中<code class="codeph"><span class="variable" translate="no">input.xml</span></code>是您在步骤<a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-1D7BB9E0-8C0F-4C80-9A22-E35F46B207EB__BABGIGID">2中</a>配置的XML输入文件的名称：</p><pre class="pre codeblock"><code>rconfig <span class="variable" translate="no">input.xml</span></code></pre><p>例如，如果创建名为<code class="codeph">convert.xml</code>的输入XML文件，则可以使用以下命令</p><pre class="oac_no_warn" dir="ltr">$ ./rconfig convert.xml</pre></li>
                  </ol>
                  <div class="infoboxnote" id="GUID-1D7BB9E0-8C0F-4C80-9A22-E35F46B207EB__GUID-7B23BCDC-AF50-4C37-88FD-91A617CA5250">
                     <p class="notep1">注意：</p>
                     <p><code class="codeph">ConvertToRAC.xml</code>文件中的<code class="codeph">Convert verify</code>选项有三个选项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">Convert verify="YES"</code> ：rconfig执行检查以确保在开始转换之前已满足单实例到Oracle RAC转换的先决条件</p>
                        </li>
                        <li>
                           <p><code class="codeph">Convert verify="NO"</code> ：rconfig不执行先决条件检查，并开始转换</p>
                        </li>
                        <li>
                           <p><code class="codeph">Convert verify="ONLY"</code> rconfig仅执行先决条件检查;完成先决条件检查后，它不会启动转换</p>
                        </li>
                     </ul>
                  </div>
                  <p>如果执行转换失败，请使用以下过程恢复并重新尝试转换：</p>
                  <ol>
                     <li>
                        <p>尝试使用DBCA删除数据库选项删除数据库。</p>
                     </li>
                     <li>
                        <p>还原源数据库。</p>
                     </li>
                     <li>
                        <p>查看转换日志，并修复可能导致转换失败的<code class="codeph">rconfig</code>报告的任何问题。该<code class="codeph">rconfig</code>日志文件的下<code class="codeph">rconfig</code>目录<code class="codeph">$ORACLE_BASE/cfgtoollogs</code> 。
                        </p>
                     </li>
                     <li>
                        <p>重新尝试转换。</p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../upgrd/intro-to-upgrading-oracle-database.html#UPGRD-GUID-FA024F34-A61A-4C4B-AA60-C123A9191A16" target="_blank"><span><cite>Oracle数据库升级指南</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD8874"></a><a id="RACAD8875"></a><a id="RACAD8873"></a><div class="sect2"><a id="GUID-2BCC2430-C55B-4CBA-A3DD-85CFF7EF996A" name="GUID-2BCC2430-C55B-4CBA-A3DD-85CFF7EF996A"></a><h3 id="RACAD-GUID-2BCC2430-C55B-4CBA-A3DD-85CFF7EF996A" class="sect3">ConvertToRAC的rconfig XML输入文件示例</h3>
               <div>
                  <p><a id="d45639e4279" class="indexterm-anchor"></a>以下是<code class="codeph">rconfig</code>实用程序的XML <code class="codeph">ConvertToRAC</code>输入文件的两个示例。<a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-2BCC2430-C55B-4CBA-A3DD-85CFF7EF996A__CACJJIEE">示例15-1</a>是一个XML输入文件，用于将带有Oracle ASM的单实例数据库转换为Oracle ASM存储上的策略管理的Oracle RAC数据库（使用服务器池）。<a href="converting-single-instance-oracle-databases-to-oracle-rac-and-oracle-rac-one-node.html#GUID-2BCC2430-C55B-4CBA-A3DD-85CFF7EF996A__CACJHJDH">示例15-2</a>是一个XML输入文件，用于将具有Oracle ASM的单实例数据库转换为管理员管理的Oracle RAC数据库。
                  </p>
                  <div class="example" id="GUID-2BCC2430-C55B-4CBA-A3DD-85CFF7EF996A__CACJJIEE">
                     <p class="titleinexample">示例15-1示例rconfig ConvertToRAC XML文件，用于策略管理的数据库</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”encoding =“UTF-8”？&gt; &lt;n：RConfig xmlns：n =“http://www.example.com/rconfig”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xsi：schemaLocation =“http： //www.example.com/rconfig“&gt; &lt;n：ConvertToRAC&gt; &lt;！ - 在尝试转换之前，验证是否执行预先检查以确保满足所有先决条件。允许值为：YES | NO | ONLY  - &gt; &lt;n：Convert verify =“YES”&gt; &lt;！ - 为SourceDBHome指定当前的非rac数据库OracleHome  - &gt; &lt;n：SourceDBHome&gt; /oracle/product/12.1 .0 / db_1 &lt;/ n：SourceDBHome&gt; &lt;！ - 指定应配置rac数据库的OracleHome。它可以与SourceDBHome相同 - &gt; &lt;n：TargetDBHome&gt; /oracle/product/12.1.0/db_1 &lt;/ n：TargetDBHome&gt; &lt;！ - 指定非rac数据库和凭证的SID。具有sysdba角色的用户需要执行转换 - &gt; &lt;n：SourceDBInfo SID =“sales”&gt; &lt;n：凭证&gt; &lt;n：用户&gt; sys &lt;/ n：用户&gt; &lt;n：密码&gt; oracle &lt;/ n：密码&gt; &lt;n：Role&gt; sysdba &lt;/ n：Role&gt; &lt;/ n：Credentials&gt; &lt;/ n：SourceDBInfo&gt; &lt;！ - 指定Policy Managed Cluster Database使用的现有或新服务器池的列表。 - &gt; &lt;n：ServerPoolList&gt; &lt;n：ExistingServerPool name =“custom”/&gt; &lt;n：NewServerPool name =“newpool”cardinality =“2”/&gt; &lt;/ n：ServerPoolList&gt; &lt;！ - 指定RacOneNode以及servicename将数据库转换为RACOne节点 - &gt; &lt;！ -  n：RacOneNode servicename =“salesrac1service”/  - &gt; &lt;！ - 策略管理数据库不需要InstancePrefix。如果指定，将被忽略。实例名称是根据策略管理的dababase的db_unique_名称自动生成的.--&gt; &lt;！ - 从11.2开始不再需要监听器详细信息。数据库使用从Oracle Grid Infrastructure主目录运行的默认侦听器和SCAN侦听器进行注册。 - &gt; &lt;！ - 指定rac数据库使用的存储类型。允许值为CFS | ASM。非rac数据库应具有相同的存储类型。转换不需要ASM凭据。 - &gt; &lt;n：SharedStorage type =“ASM”&gt; &lt;！ - 指定要为rac数据库配置的数据库区域位置。如果此字段为空，则当前存储将用于rac数据库。对于CFS，此字段将具有目录路径。 - &gt; &lt;n：TargetDatabaseArea&gt; + ASMDG &lt;/ n：TargetDatabaseArea&gt; &lt;！ - 指定要为rac数据库配置的快速恢复区。如果此字段留空，则将为rac数据库配置非rac数据库的当前恢复区域。如果当前数据库未使用恢复区，则生成的rac数据库将没有恢复区。 - &gt; &lt;n：TargetFlashRecoveryArea&gt; + ASMDG &lt;/ n：TargetFlashRecoveryArea&gt; &lt;/ n：SharedStorage&gt; &lt;/ n：Convert&gt; &lt;/ n：ConvertToRAC&gt; &lt;/ n：RConfig&gt;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-2BCC2430-C55B-4CBA-A3DD-85CFF7EF996A__CACJHJDH">
                     <p class="titleinexample">示例15-2管理员管理的数据库的示例rconfig ConvertToRAC XML文件</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”encoding =“UTF-8”？&gt; &lt;n：RConfig xmlns：n =“http://www.example.com/rconfig”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xsi：schemaLocation =“http： //www.example.com/rconfig rconfig.xsd“&gt; &lt;n：ConvertToRAC&gt; &lt;！ - 在尝试转换之前，验证是否执行预先检查以确保满足所有先决条件。允许值为：YES | NO | ONLY  - &gt; &lt;n：Convert verify =“YES”&gt; &lt;！ - 为SourceDBHome指定当前的非rac数据库OracleHome  - &gt; &lt;n：SourceDBHome&gt; /oracle/product/12.1 .0 / db_1 &lt;/ n：SourceDBHome&gt; &lt;！ - 指定应配置rac数据库的OracleHome。它可以与SourceDBHome相同 - &gt; &lt;n：TargetDBHome&gt; /oracle/product/12.1.0/db_1 &lt;/ n：TargetDBHome&gt; &lt;！ - 指定非rac数据库和凭证的SID。具有sysdba角色的用户需要执行转换 - &gt; &lt;n：SourceDBInfo SID =“sales”&gt; &lt;n：凭证&gt; &lt;n：用户&gt; sys &lt;/ n：用户&gt; &lt;n：密码&gt; oracle &lt;/ n：密码&gt; &lt;n：Role&gt; sysdba &lt;/ n：Role&gt; &lt;/ n：Credentials&gt; &lt;/ n：SourceDBInfo&gt; &lt;！ - 指定应为Admin Managed Cluster Database运行rac实例的节点列表。LocalNode应该是此节点列表中的第一个节点。- &gt; &lt;n：NodeList&gt; &lt;n：节点名称=“node1”/&gt; &lt;n：节点名称=“node2”/&gt; &lt;/ n：NodeList&gt; &lt;！ - 指定RacOneNode以及servicename将数据库转换为RACOne节点 - &gt; &lt;！ -  n：RacOneNode servicename =“salesrac1service”/  - &gt; &lt;！ -  Instance Prefix标签是可选的，从11.2开始。如果留空，则从db_unique_name派生.--&gt; &lt;n：InstancePrefix&gt; sales &lt;/ n：InstancePrefix&gt; &lt;！ - 从11.2开始不再需要监听器详细信息。数据库使用从Oracle Grid Infrastructure主目录运行的默认侦听器和SCAN侦听器进行注册。 - &gt; &lt;！ - 指定rac数据库使用的存储类型。允许值为CFS | ASM。非rac数据库应具有相同的存储类型。转换不需要ASM凭据。 - &gt; &lt;n：SharedStorage type =“ASM”&gt; &lt;！ - 指定要为rac数据库配置的数据库区域位置。如果此字段为空，则当前存储将用于rac数据库。对于CFS，此字段将具有目录路径。 - &gt; &lt;n：TargetDatabaseArea&gt; + ASMDG &lt;/ n：TargetDatabaseArea&gt; &lt;！ - 指定要为rac数据库配置的快速恢复区。如果此字段留空，则将为rac数据库配置非rac数据库的当前恢复区域。如果当前数据库未使用恢复区，则生成的rac数据库将没有恢复区。 - &gt; &lt;n：TargetFlashRecoveryArea&gt; + ASMDG &lt;/ n：TargetFlashRecoveryArea&gt; &lt;/ n：SharedStorage&gt; &lt;/ n：Convert&gt; &lt;/ n：ConvertToRAC&gt; &lt;/ n：RConfig&gt;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="RACAD8876"></a><div class="sect2"><a id="GUID-41B9B4C9-B5CF-44F6-AFA1-6FDDE156D92C" name="GUID-41B9B4C9-B5CF-44F6-AFA1-6FDDE156D92C"></a><h3 id="RACAD-GUID-41B9B4C9-B5CF-44F6-AFA1-6FDDE156D92C" class="sect3">后转换步骤</h3>
               <div>
                  <p>完成转换后，请注意以下有关Oracle RAC环境的建议，如下所述：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>按照前面所述的使用负载平衡和透明应用程序故障转移的建议进行操作</p>
                     </li>
                     <li>
                        <p>使用本地管理的表空间而不是字典管理的表空间来减少Oracle RAC中的争用和管理序列，如<span><cite>Oracle数据库管理员指南中所述</cite></span></p>
                     </li>
                     <li>
                        <p>遵循<span><cite>Oracle数据库管理员指南中</cite></span>所述的使用自动段空间管理的准则</p>
                     </li>
                  </ul>
                  <p>Oracle RAC中的缓冲区缓存和共享池容量要求略高于单实例Oracle数据库的要求。因此，您应该将缓冲区缓存的大小增加大约10％，并将共享池的大小增加大约15％。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="workload-management-with-dynamic-database-services.html#GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5" title="工作负载管理包括负载平衡，为Oracle Real Application Clusters（Oracle RAC），分布式事务处理和服务启用客户端。">使用动态数据库服务管理工作负载</a></li>
                        <li><a href="../admin/managing-tablespaces.html#ADMIN-GUID-66D4E07A-E88C-4111-96DB-9D42B532D51E" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                        <li><a href="../admin/managing-tablespaces.html#ADMIN-GUID-5254F3ED-DDFA-4797-B09C-A49DC62E80B0" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
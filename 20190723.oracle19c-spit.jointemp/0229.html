<html id='01527.getting-started-rman.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Getting Started with RMAN</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery User's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96241-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="introduction-backup-recovery.html" title="Previous" type="text/html">
      <link rel="next" href="part-starting-configuring-rman.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
    <meta name="dcterms.isVersionOf" content="BRADV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-backup-recovery.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="part-starting-configuring-rman.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-overview-backup-recovery.html" property="item" typeof="WebPage"><span property="name"> Overview of Backup and Recovery </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Getting Started with RMAN</li>
            </ol>
            <a id="GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B" name="GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B"></a><a id="BRADV89346"></a>
            
            <h2 id="BRADV-GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B" class="sect2"><span class="enumeration_chapter">2 </span> Getting Started with RMAN
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter is intended for new users who want to start using RMAN right away without first reading the more detailed chapters in this book. This chapter provides the briefest possible digest of the most important RMAN concepts and tasks. It is not a substitute for the rest of the backup and recovery documentation set.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="getting-started-rman.html#GUID-8B307A7B-5040-4950-B349-E7DE59413CBE" title="Recovery Manager (RMAN) is an Oracle Database client that performs backup and recovery tasks on your databases and automates administration of your backup strategies. It greatly simplifies backing up, restoring, and recovering database files.">Overview of the RMAN Environment</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E" title="The RMAN backup and recovery environment is preconfigured for each target database. The configuration is persistent and applies to all subsequent operations on this target database, even if you exit and restart RMAN.">Showing the Default RMAN Configuration</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022" title="Use the BACKUP command to back up files. RMAN backs up data to the configured default device for the type of backup requested.">Backing Up a Database</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8" title="RMAN can use the information stored in the RMAN repository to generate reports on backup activities.">Reporting on RMAN Operations</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415" title="RMAN repository metadata is always stored in the control file of the target database. The RMAN maintenance commands use this metadata when managing backups.">Maintaining RMAN Backups</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-F24568FC-0546-4CB0-B843-87F0A95D1649" title="Data Recovery Advisor is an Oracle Database tool that provides an infrastructure for diagnosing persistent data failures, presenting repair options to the user, and executes repairs at the user’s request.">Diagnosing and Repairing Failures with Data Recovery Advisor</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1" title="You can use the Oracle Flashback Database to rewind the whole database to a past time. Unlike media recovery, you do not need to restore data files to return the database to a past state.">Rewinding a Database with Flashback Database</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205" title="Use the RESTORE and RECOVER commands for RMAN restore and recovery of physical database files.">Restoring and Recovering Database Files</a></p>
                  </li>
               </ul>
            </div><a id="BRADV89347"></a><div class="props_rev_3"><a id="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE" name="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE"></a><h3 id="BRADV-GUID-8B307A7B-5040-4950-B349-E7DE59413CBE" class="sect3"><span class="enumeration_section">2.1 </span>Overview of the RMAN Environment
               </h3>
               <div>
                  <p>Recovery Manager (RMAN) is an Oracle Database client that performs backup and recovery tasks on your databases and automates administration of your backup strategies. It greatly simplifies backing up, restoring, and recovering database files.</p>
                  <p>The RMAN environment consists of the utilities and databases that play a role in backing up your data. At a minimum, the environment for RMAN must include the following components:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A <a href="glossary.html#GUID-272C4366-303F-4629-9679-1379AAC3FBC1"><span class="xrefglossterm">target database</span></a></p>
                        <p>An Oracle Database to which RMAN is connected with the <code class="codeph">TARGET</code> keyword. A target database is a database on which RMAN is performing backup and recovery operations. RMAN always maintains metadata about its operations on a database in the control file of the database. The RMAN metadata is known as the <a href="glossary.html#GUID-F5643EDD-CE1B-4A9F-9E6E-ADDFD6452341"><span class="xrefglossterm">RMAN repository</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>The <a href="glossary.html#GUID-BAF6F6F1-D4F1-4F46-B1B6-9F662B7AB35D"><span class="xrefglossterm">RMAN client</span></a></p>
                        <p>An Oracle Database executable that interprets commands, directs server sessions to execute those commands, and records its activity in the target database control file. The RMAN executable is automatically installed with the database and is typically located in the same directory as the other database executables. For example, the RMAN client on Linux is located in <code class="codeph">$ORACLE_HOME/bin</code>.
                        </p>
                     </li>
                  </ul>
                  <p>Some environments use the following optional components:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A <a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">fast recovery area</span></a></p>
                        <p>A disk location in which the database can store and manage files related to backup and recovery. You set the fast recovery area location and size with the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10234" target="_blank"><code class="codeph">DB_RECOVERY_FILE_DEST </code></a>and <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10235" target="_blank"><code class="codeph">DB_RECOVERY_FILE_DEST_SIZE</code></a> initialization parameters.
                        </p>
                     </li>
                     <li>
                        <p>A <a href="glossary.html#GUID-26FF62D0-5938-481D-B7B9-929BC971813E"><span class="xrefglossterm">media management software</span></a></p>
                        <p>An application required for RMAN to interact with sequential media devices such as tape libraries. A media manager controls these devices during backup and recovery, managing the loading, labeling, and unloading of media. Media management devices are sometimes called <a href="glossary.html#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a> (system backup to tape) devices.
                        </p>
                     </li>
                     <li>
                        <p>A <a href="glossary.html#GUID-CBFA8015-2DFF-42B1-A818-D6C5B92C608F"><span class="xrefglossterm">recovery catalog</span></a></p>
                        <p>A separate database schema used to record RMAN activity against one or more target databases. A recovery catalog preserves RMAN repository metadata if the control file is lost, making it much easier to restore and recover following the loss of the control file. The database may overwrite older records in the control file, but RMAN maintains records forever in the catalog unless the records are deleted by the user.</p>
                     </li>
                  </ul>
                  <p>This chapter explains how to use RMAN in the most basic configuration, which is <span class="italic">without</span> a recovery catalog or media manager.
                  </p>
                  <div class="infoboxnotealso" id="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE__GUID-33AC8CAF-28BD-4CC0-B11E-0874228CC4C1">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="rman-architecture.html#GUID-8ECC1FB0-7D25-4883-B9A6-2593FDB35940" title="The Recovery Manager environment consists of the various applications and databases that play a role in a backup and recovery strategy.Use the RMAN command-line client to enter commands that you can use to manage all aspects of backup and recovery operations.An RMAN channel represents one stream of data to a device, and corresponds to one database server session. During a backup or restore operation, the channel reads data from the input device, processes it, and writes it to the output device.The RMAN-supported device types are DISK and SBT (system backup to tape). RMAN can use automatic channels or manual channels for backup and recover operations.The RMAN repository is a collection of metadata about the target databases that RMAN uses for backup, recovery, and maintenance.The Oracle Media Management Layer (MML) API lets third-party vendors build media management software that works with RMAN to allow backups to sequential media devices such as tape drives.Before performing backup or restore to a media manager, you must allocate one or more channels to handle the communication with the media manager. You can also configure default channels for the media manager. The default channels are used for all backup and recovery tasks that employ the media manager and for which you have not explicitly allocated channels.Oracle Secure Backup is a media manager that provides reliable and secure data protection through file system backup to tape. All major tape drives and tape libraries in SAN, Gigabit Ethernet, and SCSI environments are supported.The Oracle Backup Solutions Program (BSP), part of the Oracle PartnerNetwork, is a group of media manager vendors whose products are compliant with Oracle's MML specification. Several products may be available for your platform from media management vendors. The fast recovery area is an optional disk location that can be used to store recovery-related files.Data Guard maintains standby databases as transactionally consistent copies of production database. A standby database can be either a physical standby database or a logical standby database.To simplify ongoing use of RMAN for backup and recovery, you can set some persistent configuration settings for each primary and physical standby database in a Data Guard environment. These settings control many aspects of RMAN behavior. For example, you can configure the backup retention policy, default destinations for backups to tape or disk, or default backup device type.RMAN uses a recovery catalog to track file names for all database files in a Data Guard environment. RMAN commands use the recovery catalog metadata to function transparently across different physical databases in the Data Guard environment. For example, you can back up a tablespace on a physical standby database and restore and recover it on the primary database. Similarly, you can back up a tablespace on a primary database and restore and recover it on a physical standby database.The recovery catalog tracks the files in the Data Guard environment by associating every database file or backup file with a DB_UNIQUE_NAME. The database that creates a file is associated with the file.The accessibility of a backup is different from its association. In a Data Guard environment, the recovery catalog considers disk backups as accessible only to the database with which they are associated, whereas tape backups created on one database are accessible to all databases.Recovery Appliance provides a centralized remote repository for backups of all target databases in the enterprise. Backups and backup metadata for all target databases is managed by a central recovery catalog (the Recovery Appliance catalog) on Recovery Appliance.">Recovery Manager Architecture</a> for a more detailed overview of the RMAN environment
                           </p>
                        </li>
                        <li>
                           <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">BACKUP</code> command syntax and semantics
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="BRADV549"></a><a id="BRADV89348"></a><div class="props_rev_3"><a id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" name="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D"></a><h3 id="BRADV-GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" class="sect3"><span class="enumeration_section">2.2 </span>Starting RMAN and Connecting to a Database: Quick Start
               </h3>
               <div>
                  <p>Before you perform any operations using RMAN, you must connect to a target database.</p>
                  <div class="section">
                     <p>The RMAN client is started by issuing the <code class="codeph">rman</code> command at the command prompt of your operating system. RMAN displays a prompt for your commands as shown in the following example:
                     </p><pre class="oac_no_warn" dir="ltr">% rman
RMAN&gt;
</pre><p>RMAN connections to a database are specified and authenticated in the same way as SQL*Plus connections to a database. The only difference is that RMAN connections to a target or auxiliary database require either the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege. Any user can be granted this privilege. 
                     </p>
                     <div class="infoboxnote" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-2023C49E-B271-4D88-B962-102239DBA5DC">
                        <p class="notep1">Caution:</p>
                        <p>Good security practice requires that you not enter passwords in plain text on the command line. Enter passwords in RMAN only when requested by an RMAN prompt. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=DBSEG0032" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> to learn about password protection.
                        </p>
                     </div>
                     <p>You can connect to a database with command-line options or by using the <a href="../rcmrf/CONNECT.html#RCMRF114" target="_blank"><code class="codeph">CONNECT TARGET</code></a> command. The following example starts RMAN and then connects to a target database through Oracle Net as user <code class="codeph">sbu</code>, which is created with the <code class="codeph">SYSBACKUP</code> privilege. RMAN prompts for a password.
                     </p><pre class="oac_no_warn" dir="ltr">% rman
RMAN&gt; CONNECT TARGET "sbu@prod AS SYSBACKUP"

target database Password: <span class="italic">password</span>
connected to target database: PROD (DBID=39525561)
</pre><p>When using the <a href="glossary.html#GUID-665B741C-5624-40B5-81FF-93B1EC67FC56"><span class="xrefglossterm">multitenant architecture</span></a>, you can connect to the <a href="glossary.html#GUID-EA3DB8F4-F68E-4FC5-A599-32A4886FFF8A"><span class="xrefglossterm">root</span></a> or to a specified <a href="glossary.html#GUID-D4239448-A344-41EF-9566-0B7716FEAE72"><span class="xrefglossterm">pluggable database (PDB)</span></a> as described in <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD" title="You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).">Making RMAN Connections to a CDB</a>"</span>.
                     </p>
                     <p>To quit the RMAN client, enter <code class="codeph">EXIT</code> at the RMAN prompt:
                     </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; EXIT</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-8B3350B3-06E9-499D-A575-C27B05E248CE">Syntax of Common RMAN Command-line Options</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">RMAN 
[ TARGET <span class="italic">connectStringSpec</span> 
| { CATALOG <span class="italic">connectStringSpec</span> } 
| LOG ['] <span class="italic">filename</span> ['] [ APPEND ]
.
.
. 
]...

connectStringSpec::=
['] [<span class="italic">userid</span>] [/ [<span class="italic">password</span>]] [@<span class="italic">net_service_name</span>] [']
</pre><p>The following example appends the output from an <a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a> to a text file at <code class="codeph">/tmp/msglog.log</code></p><pre class="oac_no_warn" dir="ltr">% rman TARGET / LOG /tmp/msglog.log APPEND</pre><div class="infoboxnotealso" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-C695D47B-3E10-4D41-8E89-B50F6FD73377">
                        <p class="notep1">See Also:</p>
                        <p><a href="starting-interacting-with-rman-client.html#GUID-E4E287F5-5F36-431A-B069-F360A5B4BC7C" title="The RMAN executable is automatically installed with the database and is typically located in the same directory as the other database executables. For example, the RMAN client on Linux is located in $ORACLE_HOME/bin.You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.To perform useful work, the RMAN client must connect to a database.Users connecting with RMAN to a target or auxiliary database require either the SYSDBA or SYSBACKUP system privilege. RMAN connections to a target or auxiliary database can be made using operating system authentication.Use a password file for either local or remote access. If a database uses a password file to authenticate administrative users, then RMAN can connect using a password.If you start RMAN without a connect string on the operating system command line, then you must issue a CONNECT TARGET command at the RMAN prompt to connect to a target database.To connect to a target database from the operating system command line, enter the rman command followed by the connection information. You can begin executing commands after the RMAN prompt is displayed.You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).You can perform RMAN operations on a whole CDB, the root only, or one or more PDBs. Certain restrictions apply when you connect directly to a pluggable database (PDB):There are several ways to connect as target to the root. You can connect to a PDB either from the RMAN prompt or the operating system command line.You can make a database connection by creating an RMAN command file containing a CONNECT command..To use the DUPLICATE command, you must connect to an auxiliary instance. Performing tablespace point-in-time recovery (TSPITR) may also require a connection to an auxiliary instance.When you are diagnosing errors that RMAN encounters in connecting to the target, catalog and auxiliary databases, consider using SQL*Plus to connect to the databases directly. This action can reveal underlying problems with the connection information or the databases.RMAN connects to target and auxiliary databases using the SYSDBA or SYSBACKUP privilege. Thus, when you use SQL*Plus to diagnose connection problems to the target or auxiliary databases, request a SYSDBA or SYSBACKUP connection to reproduce RMAN behavior.Use SQL*Plus to diagnose recovery catalog connection problems.By default, RMAN writes command output to standard output. To redirect output to a log file, enter the LOG parameter on the command line when you start RMAN.Before invoking RMAN, it may be useful to set the NLS_DATE_FORMAT and NLS_LANG environment variables. These variables determine the format used for the time parameters in RMAN commands such as RESTORE, RECOVER, and REPORT.When the RMAN client is ready for your commands, it displays the command promptFor repetitive tasks, you can create a text file containing RMAN commands, and start the RMAN client with the @ argument, followed by a file name.The comment character in RMAN is a pound sign (#). All text from the pound sign to the end of the line is ignored. When running a command file, you can specify one or more values in a USING clause for use in substitution variables in a command file. In this way, you can make your command files dynamic.You can test RMAN commands for syntactic correctness without executing them. Use the command-line argument CHECKSYNTAX to start the RMAN client in a mode in which it only parses the commands that you enter and returns an RMAN-00558 error for commands that are not legal RMAN syntax.You can check the syntax of RMAN commands interactively without actually executing the commands.To test commands in a command file, start RMAN with the CHECKSYNTAX parameter and use the @ command to name the command file to be passed.The RMAN pipe interface is an alternative method for issuing commands to RMAN and receiving the output from those commands. Using this interface, it is possible to write a portable programmatic interface to RMAN.This example assumes that the application controlling RMAN wants to run multiple commands in succession. After each command is sent down the pipe and executed and the output returned, RMAN pauses and waits for the next command.This example assumes that the application controlling RMAN wants to run one or more commands as a single job. After running the commands that are on the pipe, RMAN exits.">Starting and Interacting with the RMAN&nbsp;Client</a>, to learn more about starting and using the RMAN client
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV550"></a><a id="BRADV89349"></a><div class="props_rev_3"><a id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E" name="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E"></a><h3 id="BRADV-GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E" class="sect3"><span class="enumeration_section">2.3 </span>Showing the Default RMAN Configuration
               </h3>
               <div>
                  <p>The RMAN backup and recovery environment is preconfigured for each target database. The configuration is persistent and applies to all subsequent operations on this target database, even if you exit and restart RMAN.</p>
                  <div class="section">
                     <p>RMAN configuration settings can specify backup devices, set up connections to those devices (known as <a href="glossary.html#GUID-D7D8E7D7-3CD3-4FCF-AF75-AF2BE11A366F"><span class="xrefglossterm">channel</span></a>s), set policies affecting backup strategy, and more. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E__GUID-A990043F-E36F-422E-B5E2-6CD3B08C1368">To show the current configuration for a database:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                     <li class="stepexpand"><span>Run the <code class="codeph">SHOW ALL</code> command.</span><div>
                           <p>For example, enter the command at the RMAN prompt as follows:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; SHOW ALL;
</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>The output lists the <code class="codeph">CONFIGURE</code> commands to re-create this configuration.
                     </p>
                     <div class="infoboxnotealso" id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E__GUID-0A6ED498-21EB-40CA-9276-40A1786B32C6">
                        <p class="notep1">See Also:</p>
                        <p><a href="configuring-rman-client-basic.html#GUID-5155F8E6-6E35-4261-9CC1-F12DAA9FAC5B" title="RMAN provides sensible defaults for most parameters required to perform basic backup and recovery. You can modify the value of default parameters or override these values for a particular session.You can use the SHOW command to display the current value of RMAN configured settings for the target database. You can also view whether these commands are currently set to their default values.Backups for which no destination device type is specified are directed to the configured default device. RMAN is preconfigured to use disk as the default device type. No additional configuration is necessary.The BACKUP command can create either backup sets or image copies. For disk, you can configure RMAN to create either backup sets or image copies as its default backup type with the CONFIGURE DEVICE TYPE DISK BACKUP TYPE TO command. An RMAN channel is a connection to a database server session. RMAN uses channels to perform most tasks.Use the CONFIGURE CHANNEL command to configure options for disk or SBT channels. You can configure generic channel settings for a device type, that is, a template that is used for any channels created based on configured settings for that device.By default, RMAN allocates one disk channel for all operations. You can specify different options for this channel, for example, a new default location for backups.The number of channels available for a device type when you run a command determines whether RMAN reads or writes in parallel. As a rule, the number of channels used in executing a command should match the number of devices accessed. If you manually allocate a channel during a job, then RMAN disregards any configured channel settings.You can configure RMAN to automatically back up the control file and server parameter file. The autobackup occurs whenever a backup record is added.By default, the format of the autobackup file for all configured devices is the substitution variable %F in the FORMAT clause.The SET CONTROLFILE AUTOBACKUP FORMAT command, which you can specify either within a RUN command or at the RMAN prompt, overrides the configured autobackup format in the current session only. On most platforms, to back up to and restore from sequential media such as tape you must integrate a media management software with your Oracle database. You can use Oracle Secure Backup, which supports both database and file system backups to tape, as your media manager. Before attempting to use RMAN with a media manager, determine the location of the media management library. After installing the media management software, perform the configuration required by your vendor so that the software can accept RMAN backups. After you have confirmed that the database server can load the media management library, test to ensure that RMAN can back up to the media manager. The ALLOCATE CHANNEL command is used to perform a basic test of RMAN communication with the media manager.After testing a channel allocation on the media manager, create and restore a test backup.Configuring SBT channels creates a persistent setting that is the default used for backup and recovery operations with a media manager.A backup piece name is determined by the FORMAT string specified in the BACKUP command, CONFIGURE CHANNEL command, or ALLOCATECHANNEL command.The easiest technique for backing up to a media manager is to configure automatic SBT channelsRMAN commands can be used to back up target databases to Zero Data Loss Recovery Appliance (Recovery Appliance). Certain configuration steps are required to use the Recovery Appliance as a centralized repository for the target database backups.Before you can use RMAN to back up a target database to Zero Data Loss Recovery Appliance (Recovery Appliance), you must install the Recovery Appliance backup module in the Oracle home of the target database.RMAN configuration is required before you can back up Oracle databases to Zero Data Loss Recovery Appliance (Recovery Appliance).Before using RMAN to back up target databases to Zero Data Loss Recovery Appliance (Recovery Appliance), you need to determine the location of the Recovery Appliance backup module on the target database host. This location is used while configuring or allocating RMAN channels for Recovery Appliance.The client configuration file, stored on the protected database, contains the configuration settings that are used by the Zero Data Loss Recovery Appliance (Recovery Appliance) backup module to communicate with the Recovery Appliance. This file is created automatically when the Recovery Appliance backup module is installed.The fast recovery area feature enables you to set up a disk area where the database can create and manage a variety of files related to backup and recovery. Use of the fast recovery area is strongly recommended. Consider configuring a fast recovery area as a first step in implementing a backup strategy.The fast recovery area can contain control files, online redo logs, archived redo logs, flashback logs, and RMAN backups. The fast recovery area can be used with Oracle Managed Files (OMF) and Automatic Storage Management (ASM)Space in the fast recovery area is balanced among backups and archived logs that must be kept according to the retention policy, and other files that may be subject to deletion. You enable the fast recovery area by setting two initialization parameters. These parameters enable the fast recovery area with or without having to shut down and restart the database instance.The larger the fast recovery area is, the more useful it becomes. Ideally, the fast recovery area is large enough to contain the control files, online redo logs, archived redo logs, and flashback logs. It should be able to contain a copy of all data files in the database and the incremental backups used by your chosen backup strategy.Use database initialization parameters to set the location and size of the fast recovery area.You can use the ALTER SYSTEM command to disable the fast recovery area.Use initialization parameters to configure the default locations for control files and redo logs. The initialization parameters CONTROL_FILES, DB_CREATE_ONLINE_LOG_DEST_n, DB_RECOVERY_FILE_DEST, and DB_CREATE_FILE_DEST all interact to determine the location where the database control files are created.Oracle recommends that you the use fast recovery area as an archiving location because the archived logs are automatically managed by the database. Certain RMAN commands or implicit actions (such as control file autobackups) can create files in the fast recovery area. The backup retention policy specifies which backups must be retained to meet your data recovery requirements.The REDUNDANCY parameter of the CONFIGURE RETENTION POLICY command specifies how many full or level 0 backups of each data file and control file that RMAN keeps. The default retention policy is REDUNDANCY 1.The RECOVERY WINDOW parameter of the CONFIGURE command specifies the number of days between the current time and the earliest point of recoverability.When you disable the retention policy, RMAN does not consider any backup as obsolete.Run the RMAN CONFIGURE command to enable and disable backup optimization. Backup optimization skips the backup of files in certain circumstances if the identical file or an identical version of the file has been backed up.When you enable backup optimization, the BACKUP command skips backing up files when the identical file has been backed up to the specified device type.Backup optimization is not always applied when backing up to SBT devices.By default, backup optimization is configured to OFF. You can use the SHOW BACKUP OPTIMIZATION command to view the current settings of backup optimization.You can use RMAN to create a persistent configuration that governs when archived redo logs are eligible for deletion from disk.You can use the CONFIGURE ARCHIVELOG DELETION POLICY command to specify when archived redo logs are eligible for deletion.By default, there is no archived redo log deletion policy and this is why the archive redo log policy is set to the NONE clause.You can use the CONFIGURE ARCHIVELOG DELETION POLICY BACKED UP integer TIMES TO DEVICE TYPE command to enable an archived log deletion policy. This configuration specifies that archived logs are eligible for deletion only when the specified number of archived log backups exist on the specified device type.By default the archived redo log deletion policy is set to NONE.If you use RMAN in a Data Guard environment, then you can use the CONFIGURE command to register and configure settings for the physical databases in this environment."> Configuring the RMAN Environment</a>, and <a href="configuring-rman-client-advanced.html#GUID-2210B194-FDA8-4BB4-BC1E-DBE7DBEACB4A" title="The CONFIGURE CHANNEL command is used to configure RMAN channel options.Whether you allocate channels manually or use automatic channel allocation, you can use channel commands and options to control behavior. In addition to configuring parameters that apply to all channels of a particular type, you can also use the CONFIGURE command to configure parameters that apply to one specific channel. The PARALLELISM setting is not constrained by the number of specifically configured channels. Backup options enable you to control aspects such as backup size, backup compression, and backup encryption.The CONFIGURE MAXSETSIZE command limits the size of backup sets created on a channel. This CONFIGURE setting applies to any channel, whether manually allocated or configured, when the BACKUP command is used to create backup sets. The default value is given in bytes and is rounded down to the lowest kilobyte value.Backup piece size is an issue when it exceeds the maximum file size permitted by the file system or media management software. You can use the MAXPIECESIZE parameter of the CONFIGURE CHANNEL or ALLOCATE CHANNEL command to limit the size of backup pieces.Use the CONFIGURE ... BACKUP COPIES command to specify how many copies of each backup piece are created on the specified device type for the specified type of file. This type of backup is known as a duplexed backup set.Sometimes you may want to omit a specified tablespace from part of the regular backup schedule. Use the CONFIGURE command to configure tablespace exclusion.RMAN supports precompression processing and binary compression of backup sets. The CONFIGURE COMPRESSION ALGORITHM command enables you to configure compression options.Better backup compression ratios are achieved by consolidating the free space in each data block, and setting that free space to binary zeroes. This precompression processing stage has the most benefit for data blocks that have been the subject of many deletes and inserts operations. Conversely, it has no effect on data blocks that are still in their initial loaded state.Oracle Database provides two categories of compression algorithms: a default compression algorithm and a group of compression algorithms available with the Oracle Advanced Compression option.Use the CONFIGURE command to configure the default compression algorithm, which does not require the Oracle Advanced Compression option.For improved security, you can configure backup encryption for RMAN backup sets. Encrypted backups cannot be read if they are obtained by unauthorized users.The V$RMAN_ENCRYPTION_ALGORITHMS view contains a list of encryption algorithms supported by RMAN. If no encryption algorithm is specified, then the default encryption algorithm is 128-bit Advanced Encryption Standard (AES).Transparent encryption can create and restore encrypted backups with no DBA intervention, if the required Oracle key management infrastructure is available. Password encryption requires that the DBA provide a password when creating and restoring encrypted backups. Restoring a password-encrypted backup requires the same password that was used to create the backup.Dual-mode encrypted backups can be restored either transparently or by specifying a password. You can use the CONFIGURE command to persistently configure transparent encryption of backups. You can use the CONFIGURE command to persistently configure the default algorithm to use for encryption when writing backup sets.You may want to set the names of data files in the auxiliary instance when performing operations such as data file tablespace point-in-time recovery (TSPITR) or data transfer with RMAN. You set these names before starting the TSPITR or database duplication.When RMAN needs a read-consistent version of the control file, it creates a temporary snapshot control file. RMAN needs a snapshot control file when resynchronizing with the recovery catalog or when making a backup of the current control file.You can see the current snapshot location by running the SHOW command. Use the CONFIGURE SNAPSHOT CONTROLFILE NAME TO 'filepath' command to change the name and path of the snapshot control file. Subsequent snapshot control files that RMAN creates use the specified name and path.RMAN cannot connect to a target database through a shared server dispatcher. RMAN requires a dedicated server process. A data block lost write occurs when an I/O subsystem acknowledges the completion of the block write, but the write did not occur in the persistent storage. On a subsequent block read, the I/O subsystem returns the stale version of the data block, which might be used to update other blocks of the database, thereby corrupting it.Shadow lost write protection provides fast detection and immediate response to a data block lost rewrite thereby minimizing data loss and database repair time. A standby database is not mandatory for using shadow lost write protection."> Configuring the RMAN Environment: Advanced Topics</a>, to learn how to configure the RMAN environment
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV89350"></a><div class="props_rev_3"><a id="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022" name="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022"></a><h3 id="BRADV-GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022" class="sect3"><span class="enumeration_section">2.4 </span>Backing Up a Database: Quick Start
               </h3>
               <div>
                  <p>Use the BACKUP command to back up files. RMAN backs up data to the configured default device for the type of backup requested. </p>
                  <p>By default, RMAN creates backups on disk. If a fast recovery area is enabled, and if you do not specify the <code class="codeph">FORMAT</code> parameter (see <a href="getting-started-rman.html#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ" title="Common BACKUP options">Table 2-1</a>), then RMAN creates backups in the recovery area and automatically gives them unique names.
                  </p>
                  <p>By default, RMAN creates backup sets rather than image copies. A <a href="glossary.html#GUID-6AA43E7D-9946-4C41-A62F-01E5BACEB8A7"><span class="xrefglossterm">backup set</span></a> consists of one or more backup pieces, which are physical files written in a format that only RMAN can access. A <a href="glossary.html#GUID-EA6CE3E8-6986-4512-AF66-710D80376093"><span class="xrefglossterm">multiplexed backup set</span></a> contains the blocks from multiple input files. RMAN can write backup sets to disk or tape.
                  </p>
                  <p>If you specify <code class="codeph">BACKUP</code> <code class="codeph">AS</code> <code class="codeph">COPY</code>, then RMAN copies each file as an <a href="glossary.html#GUID-397CB99E-3F07-4980-96B3-9D0D0ABBABEA"><span class="xrefglossterm">image copy</span></a>, which is a bit-for-bit copy of a database file created on disk. Image copies are identical to copies created with operating system commands like <code class="codeph">cp</code> on Linux or <code class="codeph">COPY</code> on Windows, but are recorded in the RMAN repository and so are usable by RMAN. You can use RMAN to make image copies while the database is open.
                  </p>
                  <p>The following sections describe backing up databases in different modes:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC" title="The BACKUP command includes a host of options, parameters, and clauses that control backup output.">About Typical RMAN Backup Options</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A" title="If a database runs in ARCHIVELOG mode, then you can back up the database while it is open.">Backing Up a Database in ARCHIVELOG Mode</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255" title="If a database runs in NOARCHIVELOG mode, then the only valid database backup is a consistent backup.">Backing Up a Database in NOARCHIVELOG Mode</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-0B997E06-7881-444D-A910-CFC37C25DF72" title="Incremental backups capture block-level changes to a database made after a previous incremental backup.">Making Incremental Backups</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB" title="Incrementally updated backups enable you to implement an efficient incremental forever backup strategy.">Making Incrementally Updated Backups</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-24321560-D43E-4E25-8A32-99E4C5A3F940" title="RMAN supports the use of command files to manage recurring tasks such as weekly backups.">Scripting RMAN Operations</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022__GUID-604D4F5F-5BD6-46E8-9793-355357A945AE">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-B3380142-ABCD-437F-9E06-B219D74E6738" title="Use the RMAN BACKUP command to create both consistent and inconsistent backups.A consistent backup occurs when the database is in a consistent state. You can use the BACKUP command to make consistent backups of the database.Any database backup that is not consistent is an inconsistent backup. A backup made when the database is open is inconsistent, as is a backup made after an instance failure or SHUTDOWN ABORT command.You can create RMAN backups or user-managed backups.When you execute the BACKUP command in RMAN, you create one or more backup sets or image copies. By default, RMAN creates backup sets regardless of whether the destination is disk or a media manager.RMAN can store backup data in a logical structure called a backup set, which is the smallest unit of an RMAN backup.RMAN can use block compression when creating backup sets.When employing unused block compression, RMAN skips reading, and backing up, any database blocks that are not currently allocated to some database object. This is regardless of whether those blocks had previously been allocated.When employing null block compression, RMAN omits from its output any block that has never contained data. RMAN supports binary compression of backup sets. Binary compression is only enabled when you specify AS COMPRESSED BACKUPSET in the BACKUP command, or one-time with the CONFIGURE DEVICE TYPE [DISK | SBT] BACKUP TYPE TO COMPRESSED BACKUPSET command.In backup undo optimization, RMAN excludes undo not needed for recovery of a backup, that is, for transactions that have been committed. RMAN supports backup encryption for backup sets. You can use keystore-based transparent encryption, password-based encryption, or both. You can either let RMAN determine a unique name for backup pieces or use the FORMAT clause to specify a name. By default a backup set contains one backup piece. To restrict the size of each backup piece, specify the MAXPIECESIZE option of the CONFIGURE CHANNEL or ALLOCATE CHANNEL commands. You use the backupSpec clause of the BACKUP command to specify the objects to be backed up. Each backupSpec clause produces at least one backup set.When creating backup sets, RMAN can simultaneously read multiple files from disk and then write their blocks into the same backup set. For example, RMAN can read from two data files simultaneously, and then combine the blocks from these data files into a single backup piece. The combination of blocks from multiple files is called backup multiplexing.During a proxy copy, RMAN turns over control of the data transfer to a media manager that supports this feature. Proxy copy can only be used with media managers that support it and cannot be used with channels of type DISK. The PROXY option of the BACKUP command specifies that a backup is a proxy copy.An image copy is an exact copy of a single data file, archived redo log file, or control file. To create image copies and have them recorded in the RMAN repository, you run the RMAN BACKUP AS COPY command. RMAN can use image copies created by mechanisms outside of RMAN, such as native operating system file copy commands or third-party utilities that leave image copies of files on disk. This type of copy is known as a user-managed backup or operating system backup.You can use the RMAN BACKUP command to back up data blocks from sparse data files, tablespaces containing sparse data files, sparse pluggable databases (PDBs), and multitenant container databases (CDBs) containing sparse PDBs. A preplugin backup is an RMAN backup of a non-CDB or a PDB that was created before the non-CDB or PDB was plugged in to a different CDB.RMAN enables you to make multiple, identical copies of backups.The RMAN BACKUP BACKUPSET command backs up backup sets that were created on disk. The command is a useful way to spread backups among multiple media.Having recent backups of your control file and server parameter file is extremely valuable in many recovery situations. To ensure that you have backups of these files, the database supports control file and server parameter file autobackups. Depending on the configuration of the target database, RMAN can perform autobackups of the control file and server parameter file.The first channel allocated during the backup job creates the autobackup and places it into its own backup set. For autobackups after database structural changes, the server process associated with the structural change makes the backup.An incremental backup copies only those data blocks that have changed since a previous backup. You can use RMAN to create incremental backups of data files, tablespaces, or the whole database.RMAN can create multilevel incremental backups. Each incremental level is denoted by a value of 0 or 1. In a differential level 1 backup, RMAN backs up all blocks that have changed since the most recent incremental backup at level 1 (cumulative or differential) or level 0. In a cumulative level 1 backup, RMAN backs up all blocks used since the most recent level 0 incremental backup in either the current or parent incarnation.The block change tracking feature for incremental backups improves incremental backup performance by recording changed blocks in each data file in a block change tracking file. During media recovery, RMAN examines the restored files to determine whether it can recover them with an incremental backup. If it has a choice, then RMAN always chooses incremental backups over archived redo logs because applying changes at a block level is faster than applying redo.The incremental-forever backup strategy eliminates the need for creating recurring full backups when backing up to Zero Data Loss Recovery Appliance (Recovery Appliance). Although Recovery Appliance supports other RMAN backup strategies, the recommended method for ongoing backups is the incremental-forever backup strategy.You can use the CONFIGURE RETENTION POLICY command to create a persistent and automatic backup retention policy. A recovery window is a period that begins with the current time and extends backward in time to the point of recoverability. The point of recoverability is the earliest time for a hypothetical point-in-time recovery, that is, the earliest point to which you can recover following a media failure.In some cases using a recovery window can complicate disk space planning because the number of backups that must be retained is not constant and depends on the backup schedule. In contrast, a redundancy-based retention policy specifies how many backups of each data file must be retained. You can run the REPORT OBSOLETE command to determine which backups are currently obsolete according to the retention policy. If you configure a fast recovery area, then the database uses an internal algorithm to select files in the fast recovery area that are no longer needed to meet the configured retention policy."> RMAN Backup Concepts</a>, to learn concepts relating to RMAN backups
                           </p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7" title="RMAN backups are created using the BACKUP command.The primary purpose of RMAN backups is to protect your data. If a media failure or disaster occurs, then you can restore your backups and recover lost changes.You can back up all or part of your database with the BACKUP command from within the RMAN client.You can provide arguments to the BACKUP command to override the default backup options.The BACKUP command takes a DEVICE TYPE clause that specifies whether to back up to disk or tape device.RMAN can create backups on disk as image copies or as backup sets.RMAN provides a range of options to name the files generated by the BACKUP command. When backing up to disk, you can specify a format to spread the backup across several drives for improved performance. RMAN attaches a character string called a tag to every backup it creates, as a way of identifying the backup. You can either accept the default tag or specify your own with the TAG parameter of the BACKUP command.User-specified tags are a useful way to indicate the purpose or usage of different classes of backups or copies. Use the TAG parameter with the BACKUP command to specify tags for backup sets and image copies.When creating backup sets, you can use RMAN support for binary compression of backup sets by including the AS COMPRESSED BACKUPSET option to the BACKUP command.A multisection backup enables large data files to be divided into sections that can be backed up in parallel across multiple channels. This provides faster backup performance and better recovery times.While an image copy is being created, RMAN uses multiple channels to write files sections. However, the output of this operation is one copy for each data file.You can perform a whole database backup with the database mounted or open. You can back up one or more tablespaces with the BACKUP TABLESPACE command or one or more data files with the BACKUP DATAFILE command. You can back up the control file when the database is mounted or open. RMAN uses a snapshot control file to ensure a read-consistent version. A manual backup of the control file is different from a control file autobackup. RMAN makes a control file autobackup after the files specified in the BACKUP command are backed up. To make a manual backup, you can either specify INCLUDE CURRENT CONTROLFILE when backing up other files or specify BACKUP CURRENT CONTROLFILE. RMAN automatically backs up the current server parameter file in certain cases. The BACKUP SPFILE command backs up the parameter file explicitly. The server parameter file that is backed up is the one currently in use by the instance. You can only back up a database in NOARCHIVELOG mode when the database is closed and in a consistent state.Preplugin backups ensure that an RMAN backup is usable after a non-CDB is plugged in as a PDB into a CDB. Use the BACKUP command to back up multitenant container databases (CDBs) and pluggable databases (PDBs).RMAN and Oracle Enterprise Manager Cloud Control provide full support for backup and recovery in a multitenant environment.Backing up a whole multitenant container database (CDB) is similar to backing up a non-CDB. When you back up a whole CDB, RMAN backs up the root, all the pluggable databases (PDBs), and the archived redo logs.You can use RMAN to make a backup of only the root. Because the root contains critical metadata for the whole CDB, Oracle recommends that you back up the root or back up the whole CDB at regular intervals.Oracle Enterprise Manager Cloud Control (Cloud Control) can be used to back up the root.RMAN enables you to back up one or more PDBs in a CDB using the BACKUP command. Preplugin backups of a PDB can be used to perform restore and recover operations after the PDB is migrated and plugged in to a different destination CDB.Oracle Enterprise Manager Cloud Control (Cloud Control) can be used to perform backups of pluggable databases (PDBs).Because tablespaces in different PDBs can have the same name, to eliminate ambiguity you must connect directly to a PDB to back up one or more of its tablespaces.This example creates a preplugin backup of the PDB my_pdb that is contained in CDB cdb_prod. The CDB uses shared undo and is open in read-write mode.RMAN enables you to use the BACKUP command to perform backup operations on the application root, one or more application PDBs, and the application container.RMAN can back up application containers, application PDBs, and the application root.Use the RMAN BACKUP command to back up the application root.Use the BACKUP command to back up an application container, which consists of the application root and all the application PDBs that belong to the application root.The BACKUP command is used to back up one or more application PDBs. Use the BACKUP command to back up sparse databases.RMAN enables you to back up a sparse database, using steps similar to backing up a whole database, in the backup set or image copy format.You can back up one or more tablespaces containing sparse data files or individual sparse data files using the BACKUP command. RMAN enables you to back up one or more sparse PDBs in a CDB. Archived redo logs are the key to successful media recovery. You should back them up regularly.Several features of RMAN backups are specific to archived redo logs. For example, you can use BACKUP ... DELETE to delete one or all copies of archived redo logs from disk after backing them up to backup sets. Even if your redo logs are being archived to multiple destinations and you use RMAN to back up archived redo logs, RMAN selects only one copy of the archived redo log file to include in the backup set. Because logs with the same log sequence number are identical, RMAN does not need to include more than one log copy.Automatic online redo log switching is an important RMAN feature. In a CDB, archived redo logs can be backed up only when you connect to the root as a common user with the SYSDBA or SYSBACKUP privilege. To back up archived logs, use the BACKUP ARCHIVELOG command.You can indicate that RMAN should automatically skip backups of archived redo logs.You can back up archived redo logs in a multitenant container database (CDB) by using the BACKUP ARCHIVELOG command.The BACKUP ARCHIVELOG ... DELETE INPUT command deletes archived log files after they are backed up. This command eliminates the separate step of manually deleting archived redo logs. In a CDB, you can delete archived redo logs after they are backed up by using the BACKUP ARCHIVELOG ... DELETE INPUT command.An incremental backup copies only data file blocks that have changed since a specified previous backup. Use the BACKUP command to create incremental backups.RMAN incremental backups provide multiple benefits.Choose a backup strategy according to an acceptable MTTR (mean time to recover). You can use the Volume Shadow Copy Service (VSS) with the Oracle VSS writer to make a shadow copy or snapshot of files in a database.By incrementally updating backups, you can avoid the overhead of making full image copy backups of data files, while also minimizing time required for media recovery of your database. For example, if you run a daily backup script, then you never have more than 1 day of redo to apply for media recovery.To create incremental backups for use in an incrementally updated backup strategy, use the BACKUP ... FOR RECOVER OF COPY WITH TAG form of the BACKUP command. The command is best understood in a sample script that implements the strategy.The block change tracking feature for incremental backups improves backup performance by recording changed blocks for each data file.If block change tracking is enabled on a primary or standby database, then RMAN uses a block change tracking file to identify changed blocks for incremental backups. By reading this small bitmap file to determine which blocks changed, RMAN avoids having to scan every block in the data file that it is backing up.Oracle Database automatically manages space in the change tracking file to retain block change data that covers the eight most recent backups. After the maximum of eight bitmaps is reached, the oldest bitmap is overwritten by the bitmap that tracks the current changes.By default, the block change tracking file is created as an Oracle managed file in the destination specified by the DB_CREATE_FILE_DEST initialization parameter. You can also place the block change tracking file in any location that you choose, by specifying its name when enabling block change tracking. The size of the block change tracking file is proportional to the size of the database and the number of enabled threads of redo. You can enable block change tracking when the database is either open or mounted. When you disable block change tracking, the database removes the block change tracking file from the operating system.You can query the V$BLOCK_CHANGE_TRACKING view to determine whether change tracking is enabled, and if it is, the file name of the block change tracking file.To move the change tracking file, use the ALTER DATABASE RENAME FILE statement. You can use BACKUP... KEEP to create a backup that is both all-inclusive and exempt from the backup retention policy.You can exempt a backup from the retention policy by using the KEEP option with the BACKUP command. Typically, you make an archival backup to tape. Because your data protection backups are most likely to be on a set of tapes that remain accessible and are recycled, it is advisable to reserve a set of tapes for the archival backup. Use the BACKUP command with the KEEP option to make archival backups.One purpose of an archival backup is to create a test database. You can use the BACKUP BACKUPSET command to back up backup sets produced by other backup jobs. You can also use BACKUP RECOVERY AREA to back up recovery files created in the current and all previous fast recovery area destinations. The BACKUP BACKUPSET command creates additional copies of backup pieces in a backup set, but does not create a new backup set. For a backup retention policy based on redundancy, a backup set is counted as one instance of a backup. This statement is true even if there are multiple copies of the backup pieces that form the backup set, such as when a backup set has been backed up from disk to tape.Use the BACKUP BACKUPSET command to copy backup sets from disk to tape. Use the BACKUP command to back up image copies to tape."> Backing Up the Database</a>, to learn how to back up database files with RMAN
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">BACKUP</code> command syntax and semantics
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV121"></a><a id="BRADV89352"></a><div class="props_rev_3"><a id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC" name="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC"></a><h4 id="BRADV-GUID-DBA25637-179F-4AA5-9658-74EABF458FCC" class="sect4"><span class="enumeration_section">2.4.1 </span>About Typical RMAN Backup Options
                  </h4>
                  <div>
                     <p>The <code class="codeph">BACKUP</code> command includes a host of options, parameters, and clauses that control backup output.
                     </p>
                     <p><a href="getting-started-rman.html#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ" title="Common BACKUP options">Table 2-1</a> lists some typical backup options.
                     </p>
                     <div class="tblformal" id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ">
                        <p class="titleintable">Table 2-1 Common Backup Options</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Common Backup Options" summary="Common BACKUP options" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d12434e1624">Option</th>
                                 <th align="left" valign="bottom" width="57%" id="d12434e1627">Description</th>
                                 <th align="left" valign="bottom" width="29%" id="d12434e1630">Example</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e1635" headers="d12434e1624 ">
                                    <p><code class="codeph">FORMAT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e1635 d12434e1627 ">
                                    <p>Specifies a location and name for backup pieces and copies. You must use substitution variables to generate unique file names. </p>
                                    <p>The most common substitution variable is <code class="codeph">%U</code>, which generates a unique name. Others include <code class="codeph">%d</code> for the DB_NAME, <code class="codeph">%t</code> for the backup set time stamp, <code class="codeph">%s</code> for the backup set number, and <code class="codeph">%p</code> for the backup piece number.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e1635 d12434e1630 "><pre class="oac_no_warn" dir="ltr">BACKUP 
  FORMAT 'AL_%d/%t/%s/%p' 
  ARCHIVELOG LIKE '%arc_dest%';</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e1663" headers="d12434e1624 ">
                                    <p><code class="codeph">TAG</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e1663 d12434e1627 ">
                                    <p>Specifies a user-defined string as a label for the backup. If you do not specify a <a href="glossary.html#GUID-7679D8DB-B41A-4DDC-A1DD-20CEDC0BCA8E"><span class="xrefglossterm">tag</span></a>, then RMAN assigns a default tag with the date and time. Tags are always stored in the RMAN repository in uppercase.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e1663 d12434e1630 "><pre class="oac_no_warn" dir="ltr">BACKUP
  TAG 'weekly_full_db_bkup' 
  DATABASE MAXSETSIZE 10M;</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__GUID-B13D0E9D-1874-481D-84A1-D0B14CB46542">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="backing-up-database.html#GUID-FCD2EDB0-817F-4E92-A318-6E4BEC35B467" title="You can provide arguments to the BACKUP command to override the default backup options.">Specifying Backup Output Options</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF195" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for information about the format options
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV119"></a><a id="BRADV90058"></a><div class="props_rev_3"><a id="GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A" name="GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A"></a><h4 id="BRADV-GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A" class="sect4"><span class="enumeration_section">2.4.2 </span>Backing Up a Database in ARCHIVELOG Mode
                  </h4>
                  <div>
                     <p>If a database runs in <code class="codeph">ARCHIVELOG</code> mode, then you can back up the database while it is open.
                     </p>
                     <div class="section">
                        <p>A backup is called an <a href="glossary.html#GUID-BE64D1D8-34E7-4295-BDFC-2E99B1BC454D"><span class="xrefglossterm">inconsistent backup</span></a> if it contains changes after its checkpoint. If you have the archived redo logs needed to recover the backup, open database backups are as effective for data protection as consistent backups.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A__GUID-6967E8CF-5679-42C4-89A5-3CFEEA011E0A">To back up the database and archived redo logs while the database is open:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">BACKUP DATABASE</code> command.</span><div>
                              <p>For example, enter the following command at the RMAN prompt to back up the database and all archived redo log files to the default backup device:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; BACKUP DATABASE PLUS ARCHIVELOG;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV120"></a><a id="BRADV90059"></a><div class="props_rev_3"><a id="GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255" name="GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255"></a><h4 id="BRADV-GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255" class="sect4"><span class="enumeration_section">2.4.3 </span>Backing Up a Database in NOARCHIVELOG Mode
                  </h4>
                  <div>
                     <p>If a database runs in <code class="codeph">NOARCHIVELOG</code> mode, then the only valid database backup is a consistent backup.
                     </p>
                     <div class="section">
                        <p> For the backup to be consistent, the database must be mounted after a consistent shutdown. Recovery is not specifically required after restoring the backup, but you would lose any transactions made after the backup. You can recover with archived logs from a <a href="glossary.html#GUID-D11D736A-3513-48E5-8738-64DBE60725D1"><span class="xrefglossterm">consistent backup</span></a> to minimize data loss.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255__GUID-139EDE8C-B300-417D-9C55-531B6C24F91A">To make a consistent database backup:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Shut down the database consistently and then mount it. </span><div>
                              <p>For example, enter the following commands to <span class="italic">guarantee</span> that the database is in a consistent state for a backup:
                              </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; SHUTDOWN IMMEDIATE;
RMAN&gt; STARTUP FORCE DBA;
RMAN&gt; SHUTDOWN IMMEDIATE;
RMAN&gt; STARTUP MOUNT;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">BACKUP DATABASE</code> command. </span><div>
                              <p>For example, enter the following command at the RMAN prompt to back up the database to the default backup device:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; BACKUP DATABASE;
</pre><p>The following variation of the command creates image copy backups of all data files in the database:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; BACKUP AS COPY DATABASE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Open the database and resume normal operations. </span><div>
                              <p>The following command opens the database:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER DATABASE OPEN;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV122"></a><a id="BRADV89353"></a><div class="props_rev_3"><a id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72" name="GUID-0B997E06-7881-444D-A910-CFC37C25DF72"></a><h4 id="BRADV-GUID-0B997E06-7881-444D-A910-CFC37C25DF72" class="sect4"><span class="enumeration_section">2.4.4 </span>Making Incremental Backups: Quick Start
                  </h4>
                  <div>
                     <p>Incremental backups capture block-level changes to a database made after a previous incremental backup.</p>
                     <div class="section">
                        <p>If you specify <code class="codeph">BACKUP</code> <code class="codeph">INCREMENTAL</code>, then RMAN creates an <a href="glossary.html#GUID-31E3AC05-E73E-4E44-A9AA-915988B9A6A3"><span class="xrefglossterm">incremental backup</span></a> of a database. Incremental backups are generally smaller and faster to make than full database backups. Recovery with incremental backups is faster than using redo logs alone.
                        </p>
                        <p>The starting point for an incremental backup strategy is a <a href="glossary.html#GUID-DF84C185-E97D-4D3C-BF4E-41A9090C5F4C"><span class="xrefglossterm">level 0 incremental backup</span></a>, which backs up all blocks in the database. An incremental backup at level 0 is identical in content to a <a href="glossary.html#GUID-D47BE9B3-BAE1-4415-B4B4-4D577B6CB493"><span class="xrefglossterm">full backup</span></a>, however, unlike a full backup the level 0 backup is considered a part of the incremental backup strategy.
                        </p>
                        <p>A level 1 incremental backup contains only blocks changed after a previous incremental backup. If no level 0 backup exists in either the current or parent database <a href="glossary.html#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">incarnation</span></a> when you run a level 1 backup, then RMAN makes a level 0 backup automatically.
                        </p>
                        <div class="infoboxnote" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-180C27FC-9FFD-4B96-8BDD-97BF36194F95">
                           <p class="notep1">Note:</p>
                           <p>You cannot make incremental backups when a <code class="codeph">NOARCHIVELOG</code> database is open, although you can make incremental backups when the database is mounted after a consistent shutdown.
                           </p>
                        </div>
                        <p>A level 1 backup can be a <a href="glossary.html#GUID-8BABFB51-EA47-4204-9A44-E1695A9F9FBF"><span class="xrefglossterm">cumulative incremental backup</span></a>, which includes all blocks changed since the most recent level 0 backup, or a <a href="glossary.html#GUID-353B6668-6BA5-4815-8F08-1CD5B446FBD6"><span class="xrefglossterm">differential incremental backup</span></a>, which includes only blocks changed since the most recent incremental backup. Incremental backups are differential by default.
                        </p>
                        <p>During a restore operation, RMAN will first restore a level 0 backup, then automatically apply incremental backups and redo logs as needed. This will re-apply the changes that were made to the database since the start of the backup.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-106166A0-CF3E-46DF-BDA1-9C62F63AE1A4">To make incremental backups of the database:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">BACKUP INCREMENTAL</code> command.</span><div>
                              <p>The following example creates a level 0 incremental backup to serve as a base for an incremental backup strategy:</p><pre class="oac_no_warn" dir="ltr">BACKUP INCREMENTAL LEVEL 0 DATABASE;
</pre><p>The following example creates a level 1 cumulative incremental backup:</p><pre class="oac_no_warn" dir="ltr">BACKUP INCREMENTAL LEVEL 1 CUMULATIVE DATABASE;
</pre><p>The following example creates a level 1 differential incremental backup:</p><pre class="oac_no_warn" dir="ltr">BACKUP INCREMENTAL LEVEL 1 DATABASE;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-61666EC7-63CC-4A22-9D0A-362C8E51E384">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="rman-backup-concepts.html#GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023" title="An incremental backup copies only those data blocks that have changed since a previous backup. You can use RMAN to create incremental backups of data files, tablespaces, or the whole database.">About RMAN Incremental Backups</a>"</span> for a more detailed conceptual overview of incremental backups and <span class="q">"<a href="backing-up-database.html#GUID-2AF8EE74-CEB2-468D-A3B2-DD6AD8E41304" title="An incremental backup copies only data file blocks that have changed since a specified previous backup. Use the BACKUP command to create incremental backups.">Making and Updating RMAN Incremental Backups</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV123"></a><a id="BRADV124"></a><a id="BRADV89354"></a><div class="props_rev_3"><a id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB" name="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB"></a><h4 id="BRADV-GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB" class="sect4"><span class="enumeration_section">2.4.5 </span>Making Incrementally Updated Backups
                  </h4>
                  <div>
                     <p>Incrementally updated backups enable you to implement an efficient incremental forever backup strategy.</p>
                     <p>The RMAN <a href="glossary.html#GUID-A641BB91-65FB-4300-8A7A-066F019B8A20"><span class="xrefglossterm">incrementally updated backup</span></a> feature has the following main features:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The strategy requires a level 0 data file copy as a base. This copy has either a system-defined or user-defined tag.</p>
                        </li>
                        <li>
                           <p>Periodically, level 1 differential backups are created with the same tag as the level 0 data file copy. The <code class="codeph">BACKUP FOR RECOVER OF COPY</code> command specifies that an incremental backup contains <span class="italic">only</span> blocks changed since the most recent incremental backup with the same tag.
                           </p>
                        </li>
                        <li>
                           <p>Periodically, the incremental backups are applied to the level 0 data file copy. Because the data file copy has been updated with more recent changes, it now requires less media recovery.</p>
                        </li>
                     </ul>
                     <p><a href="getting-started-rman.html#GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__CIHDBFFF" title="FOR RECOVER OF COPY options">Table 2-2</a> explains which options to use with <code class="codeph">FOR RECOVER OF COPY</code> to implement an incrementally updated backup strategy.
                     </p>
                     <div class="tblformalwide" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__CIHDBFFF">
                        <p class="titleintable">Table 2-2 FOR RECOVER OF COPY Options</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="FOR RECOVER OF COPY Options" summary="FOR RECOVER OF COPY options" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d12434e2298">BACKUP Option</th>
                                 <th align="left" valign="bottom" width="57%" id="d12434e2301">Description</th>
                                 <th align="left" valign="bottom" width="29%" id="d12434e2304">Example</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e2309" headers="d12434e2298 ">
                                    <p><code class="codeph">FOR RECOVER OF COPY WITH TAG</code><code class="codeph"> '</code><span class="italic"><code class="codeph">tag_name</code></span><code class="codeph">'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e2309 d12434e2301 ">
                                    <p>Use <code class="codeph">TAG</code> to identify the tag of the data file copy serving as basis for the backup strategy. RMAN automatically assigns the same tag to every level 1 backup of this copy.
                                    </p>
                                    <p>If no level 0 data file copy with the specified tag exists in either the current or parent database <a href="glossary.html#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">incarnation</span></a>, then RMAN creates a level 0 data file copy with the specified tag.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e2309 d12434e2304 "><pre class="oac_no_warn" dir="ltr">BACKUP 
  INCREMENTAL LEVEL 1
  FOR RECOVER OF COPY 
  WITH TAG 'incr_update'
  DATABASE;</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e2336" headers="d12434e2298 ">
                                    <p><code class="codeph">FOR RECOVER OF COPY DATAFILECOPY FORMAT '</code><span class="italic"><code class="codeph">format</code></span><code class="codeph">'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e2336 d12434e2301 ">
                                    <p>Specifies where RMAN creates the data file copy if a copy does not exist. If you add a new data file to the database, then you do not need to change your script, because RMAN automatically creates the level 0 copy required by the incremental backup routine.</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e2336 d12434e2304 "><pre class="oac_no_warn" dir="ltr">BACKUP 
  INCREMENTAL LEVEL 1
  FOR RECOVER OF COPY
  DATAFILECOPY FORMAT
  '/disk2/df1.cpy'
  DATABASE;</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__GUID-18A1CE03-0690-4C77-8268-04882526C332">To implement an incrementally updated backup strategy:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li>
                           <p>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. 
                           </p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph">RECOVER COPY</code> and <code class="codeph">BACKUP INCREMENTAL</code> commands. 
                           </p>
                           <p>The following script, run on a regular basis, is all that is required to implement a strategy based on incrementally updated backups.</p><pre class="oac_no_warn" dir="ltr">RECOVER COPY OF DATABASE 
  WITH TAG 'incr_update';
BACKUP 
  INCREMENTAL LEVEL 1
  FOR RECOVER OF COPY WITH TAG 'incr_update'
  DATABASE;</pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__GUID-A3267B85-CB7B-4C7C-9435-B2DCC05139D4">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="backing-up-database.html#GUID-AF130A6B-06D1-4D52-87AC-BB8F4B30C9F9" title="By incrementally updating backups, you can avoid the overhead of making full image copy backups of data files, while also minimizing time required for media recovery of your database. For example, if you run a daily backup script, then you never have more than 1 day of redo to apply for media recovery.">Incrementally Updating Backups</a>"</span></p>
                     </div>
                  </div>
               </div><a id="BRADV125"></a><a id="BRADV89355"></a><div class="props_rev_3"><a id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9" name="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9"></a><h4 id="BRADV-GUID-32746671-9162-4FCD-9878-4DC241B6ABF9" class="sect4"><span class="enumeration_section">2.4.6 </span>Validating Database Files and Backups: Quick Start
                  </h4>
                  <div>
                     <p>RMAN validation checks a backup to determine whether it can be restored. Validation also checks for corrupt blocks and missing files.</p>
                     <div class="section">
                        <p>Use the <code class="codeph">VALIDATE</code> command to confirm that all database files exist, are in their correct location, and are free of physical corruption. The <code class="codeph">CHECK LOGICAL</code> option also checks for logical block corruption.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9__GUID-BAC9629A-96DB-4FF4-9738-0908BCC3FF85">To validate database files:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">BACKUP VALIDATE ...</code> command for the desired files. </span><div>
                              <p>For example, enter the following commands to validate all database files and archived redo log files for physical and logical corruption:</p><pre class="oac_no_warn" dir="ltr">BACKUP VALIDATE CHECK LOGICAL
  DATABASE ARCHIVELOG ALL;
</pre><p>You can also use the <a href="../rcmrf/VALIDATE.html#RCMRF162" target="_blank"><code class="codeph">VALIDATE</code></a> command to check individual data blocks, as shown in the following example:
                              </p><pre class="oac_no_warn" dir="ltr">VALIDATE DATAFILE 4 BLOCK 10 TO 13;
</pre><p>You can also validate backup sets, as shown in the following example:</p><pre class="oac_no_warn" dir="ltr">VALIDATE BACKUPSET 3;
</pre><p>You specify backup sets by primary key, which is shown in the output of the <code class="codeph">LIST BACKUP</code> command.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9__GUID-716E8554-ECF2-4945-A55E-0FF92951534A">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="validating-database-files-backups.html#GUID-CC967929-9610-410D-B881-66E71353D84C" title="Validation enables you to check the integrity of your backups.The main purpose of RMAN validation is to check for corrupt blocks and missing files. You can also use RMAN to determine whether backups can be restored.The database prevents operations that result in unusable backup files or corrupted restored data files. A corrupt block is a block that has been changed so that it differs from what Oracle Database expects to find.In a physical corruption, which is also called a media corruption, the database does not recognize the block at all: the checksum is invalid, the block contains all zeros, or the header and footer of the block do not match. You can use the SET MAXCORRUPT command to set the total number of unmarked corruptions permitted in a file for RMAN backups. The default is zero, meaning that RMAN does not tolerate unmarked corrupt blocks of any kind.Oracle Database supports different techniques for detecting, repairing, and monitoring block corruption.You can use the VALIDATE command to manually check for physical and logical corruptions in database files. You can also use the BACKUP VALIDATE command to perform validation.You can run RESTORE...VALIDATE to test whether RMAN can restore a specific file or set of files from a backup. RMAN chooses which backups to use.RMAN enables you to validate multitenant container databases (CDBs) and pluggable databases (PDBs) using the VALIDATE command. The steps to validate a CDB are similar to the ones used to validate a non-CDB. There are multiple methods to validate PDBs.">Validating Database Files and Backups</a></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">VALIDATE</code> command syntax and semantics
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV126"></a><a id="BRADV89356"></a><div class="props_rev_3"><a id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940" name="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940"></a><h4 id="BRADV-GUID-24321560-D43E-4E25-8A32-99E4C5A3F940" class="sect4"><span class="enumeration_section">2.4.7 </span>Scripting RMAN Operations
                  </h4>
                  <div>
                     <p>RMAN supports the use of command files to manage recurring tasks such as weekly backups.</p>
                     <div class="section">
                        <p>A <a href="glossary.html#GUID-71012407-A78E-40C4-9B0E-971C6E38EED0"><span class="xrefglossterm">command file</span></a> is a client-side text file containing RMAN commands, exactly as you enter them at the RMAN prompt. You can use any file extension.
                        </p>
                        <p>Stored scripts are an alternative to command files that allow scripts to be available to any RMAN client that can connect to the target database and its recovery catalog.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940__GUID-CEB4946C-692C-442E-867D-397C627BBC52">To create and run a command file:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Use a text editor to create a command file.</span><div>
                              <p>For example, create a command file with the following contents:</p><pre class="oac_no_warn" dir="ltr"># my_command_file.txt
CONNECT TARGET /
BACKUP DATABASE PLUS ARCHIVELOG;
LIST BACKUP;
EXIT;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Start RMAN and then execute the contents of a command file by running the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF100" target="_blank"><code class="codeph">@</code></a> command at the RMAN prompt:</span><div><pre class="oac_no_warn" dir="ltr">@/<span class="italic"><code class="codeph">my_dir</code></span>/<span class="italic"><code class="codeph">my_command_file.txt</code></span>  # runs specified command file
</pre><p>You can also start RMAN with a command file to run, as shown here:</p><pre class="oac_no_warn" dir="ltr">% rman @/<span class="italic"><code class="codeph">my_dir</code></span>/<span class="italic"><code class="codeph">my_command_file.txt</code></span>
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940__GUID-9B3C8D32-AB7F-4BD2-BC26-C5225AAD76B5">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-5FF51A4E-BC27-41A9-AA83-FF6E761C2535" title="For repetitive tasks, you can create a text file containing RMAN commands, and start the RMAN client with the @ argument, followed by a file name.">Using Command Files with RMAN</a>"</span> to learn more about command files
                                 </p>
                              </li>
                              <li>
                                 <p> <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-A9321B2D-6CFF-4616-B629-67960A8F87DD" title="When running a command file, you can specify one or more values in a USING clause for use in substitution variables in a command file. In this way, you can make your command files dynamic.">Using Substitution Variables in Command Files</a>"</span> to learn how to use substitution variables in command files and pass parameters at run time
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV89357"></a><div class="props_rev_3"><a id="GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8" name="GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8"></a><h3 id="BRADV-GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8" class="sect3"><span class="enumeration_section">2.5 </span>Reporting on RMAN Operations: Quick Start
               </h3>
               <div>
                  <p>RMAN can use the information stored in the RMAN repository to generate reports on backup activities.</p>
                  <p>Use the RMAN <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF132" target="_blank"><code class="codeph">LIST</code></a> and <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF147" target="_blank"><code class="codeph">REPORT</code></a> commands for reporting on backup operations. Use the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF154" target="_blank"><code class="codeph">SHOW ALL</code></a> command to display the current RMAN configuration. In addition, RMAN provides a comprehensive set of views for generating custom reports.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352" title="The LIST BACKUP and LIST COPY commands display information about backups and data file copies listed in the repository.">Listing Backups</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-2DFA0B10-38BD-435F-981D-A665D81243F3" title="The REPORT command performs more complex reporting analysis than the LIST command.">Reporting on Database Files and Backups</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV127"></a><a id="BRADV130"></a><a id="BRADV131"></a><a id="BRADV89358"></a><div class="props_rev_3"><a id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352" name="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352"></a><h4 id="BRADV-GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352" class="sect4"><span class="enumeration_section">2.5.1 </span>Listing Backups: Quick Start
                  </h4>
                  <div>
                     <p>The <code class="codeph">LIST</code> <code class="codeph">BACKUP</code> and <code class="codeph">LIST</code> <code class="codeph">COPY</code> commands display information about backups and data file copies listed in the repository.
                     </p>
                     <p>For backups, you can control the format of <code class="codeph">LIST</code> output with the options in <a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHEECHB" title="Describes the BY BACKUP, BY FILE, and SUMMARY options">Table 2-3</a> and <a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI" title="Describes the EXPIRED and RECOVERABLE options">Table 2-4</a>.
                     </p>
                     <div class="tblformal" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHEECHB">
                        <p class="titleintable">Table 2-3 LIST Options for Backups</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="LIST Options for Backups" summary="Describes the BY BACKUP, BY FILE, and SUMMARY options" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="12%" id="d12434e2984">Option</th>
                                 <th align="left" valign="bottom" width="38%" id="d12434e2987">Example</th>
                                 <th align="left" valign="bottom" width="50%" id="d12434e2990">Explanation</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="12%" id="d12434e2995" headers="d12434e2984 ">
                                    <p><code class="codeph">BY</code> <code class="codeph">BACKUP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d12434e2995 d12434e2987 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">OF</code> <code class="codeph">DATABASE</code> <code class="codeph">BY</code> <code class="codeph">BACKUP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d12434e2995 d12434e2990 ">
                                    <p>Organizes the output by backup set. This is the default mode of presentation.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="12%" id="d12434e3025" headers="d12434e2984 ">
                                    <p><code class="codeph">BY</code> <code class="codeph">FILE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d12434e3025 d12434e2987 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">BY</code> <code class="codeph">FILE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d12434e3025 d12434e2990 ">
                                    <p>Lists the backups according to which file was backed up.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="12%" id="d12434e3049" headers="d12434e2984 ">
                                    <p><code class="codeph">SUMMARY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d12434e3049 d12434e2987 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">SUMMARY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d12434e3049 d12434e2990 ">
                                    <p>Displays summary output.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>For both backups and copies you have additional options shown in <a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI" title="Describes the EXPIRED and RECOVERABLE options">Table 2-4</a>.
                     </p>
                     <div class="tblformal" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI">
                        <p class="titleintable">Table 2-4 Additional LIST Options</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Additional LIST Options" summary="Describes the EXPIRED and RECOVERABLE options" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="13%" id="d12434e3084">Option</th>
                                 <th align="left" valign="bottom" width="27%" id="d12434e3087">Example</th>
                                 <th align="left" valign="bottom" width="60%" id="d12434e3090">Explanation</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d12434e3095" headers="d12434e3084 ">
                                    <p><code class="codeph">EXPIRED</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d12434e3095 d12434e3087 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">EXPIRED</code> <code class="codeph">COPY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="60%" headers="d12434e3095 d12434e3090 ">
                                    <p>Lists backups that are recorded in the RMAN repository but that were not present at the expected location on disk or tape during the last <code class="codeph">CROSSCHECK</code> command. An <a href="glossary.html#GUID-A8547B27-5415-4AAA-B2B4-C0998EB62E47"><span class="xrefglossterm">expired backup</span></a> may have been deleted by an operating system utility.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d12434e3120" headers="d12434e3084 ">
                                    <p><code class="codeph">RECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d12434e3120 d12434e3087 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP RECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="60%" headers="d12434e3120 d12434e3090 ">
                                    <p>Lists data file backups or copies that have status <code class="codeph">AVAILABLE</code> in the RMAN repository and that can be restored and recovered.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__GUID-BAD7903C-4149-45C1-88BA-C8F369406E87">To list backups and copies:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li>
                           <p>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. 
                           </p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph">LIST</code> command at the RMAN prompt.
                           </p>
                           <p>You can display specific objects, as in the following examples:</p><pre class="oac_no_warn" dir="ltr">LIST BACKUP OF DATABASE;
LIST COPY OF DATAFILE 1, 2;
LIST BACKUP OF ARCHIVELOG FROM SEQUENCE 10;
LIST BACKUPSET OF DATAFILE 1;
</pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__GUID-7F54E77B-161E-4CAF-9841-517B665550BF">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="reporting-rman-operations.html#GUID-1B911001-C106-4267-9265-F649946DBF52" title="The LIST command uses the information in the RMAN repository to provide lists of backups and other objects relating to backup and recovery.">Listing Backups and Recovery-Related Objects</a>"</span> to learn more about the <code class="codeph">LIST</code> command
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF132" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">LIST</code> command syntax
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV551"></a><a id="BRADV133"></a><a id="BRADV89359"></a><div class="props_rev_3"><a id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3" name="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3"></a><h4 id="BRADV-GUID-2DFA0B10-38BD-435F-981D-A665D81243F3" class="sect4"><span class="enumeration_section">2.5.2 </span>Reporting on Database Files and Backups: Quick Start
                  </h4>
                  <div>
                     <p>The <code class="codeph">REPORT</code> command performs more complex reporting analysis than the <code class="codeph">LIST</code> command.
                     </p>
                     <p><a href="getting-started-rman.html#GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__CIHBJGBG" title="Describes the NEED BACKUP, OBSOLETE, UNRECOVERABLE, and SCHEMA options">Table 2-5</a> displays some of the main options of the REPORT command.
                     </p>
                     <div class="tblformal" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__CIHBJGBG">
                        <p class="titleintable">Table 2-5 REPORT Options</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT Options" summary="Describes the NEED BACKUP, OBSOLETE, UNRECOVERABLE, and SCHEMA options" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d12434e3296">Option</th>
                                 <th align="left" valign="bottom" width="29%" id="d12434e3299">Example</th>
                                 <th align="left" valign="bottom" width="57%" id="d12434e3302">Explanation</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3307" headers="d12434e3296 ">
                                    <p><code class="codeph">NEED</code> <code class="codeph">BACKUP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3307 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">NEED</code> <code class="codeph">BACKUP DATABASE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3307 d12434e3302 ">
                                    <p>Shows which files need backing up under current retention policy. Use optional <code class="codeph">REDUNDANCY</code> and <code class="codeph">RECOVERY</code> <code class="codeph">WINDOW</code> parameters to specify different criteria.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3337" headers="d12434e3296 ">
                                    <p><code class="codeph">OBSOLETE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3337 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">OBSOLETE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3337 d12434e3302 ">
                                    <p>Lists backups that are obsolete under the configured <a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">backup retention policy</span></a>. Use the optional <code class="codeph">REDUNDANCY</code> and <code class="codeph">RECOVERY</code> <code class="codeph">WINDOW</code> parameters to override the default.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3365" headers="d12434e3296 ">
                                    <p><code class="codeph">SCHEMA</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3365 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">SCHEMA</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3365 d12434e3302 ">
                                    <p>Reports the tablespaces and data files in the database at the current time (default) or a different time.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3380" headers="d12434e3296 ">
                                    <p><code class="codeph">UNRECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3380 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">UNRECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3380 d12434e3302 ">
                                    <p>Lists all data files for which an unrecoverable operation has been performed against an object in the data file since the last backup of the data file. </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__GUID-A1B9E4C0-73C8-4E19-9459-7ECDD9F29DAF">To generate reports of database files and backups:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li>
                           <p>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. 
                           </p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph">REPORT</code> command at the RMAN prompt.
                           </p>
                           <p>The following example reports backups that are obsolete according to the currently configured backup retention policy:</p><pre class="oac_no_warn" dir="ltr">REPORT OBSOLETE;
</pre><p>The following example reports the data files and temp files in the database:</p><pre class="oac_no_warn" dir="ltr">REPORT SCHEMA;
</pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__GUID-2E55EC8F-D02B-4269-B417-7EA6ACB79D8D">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="reporting-rman-operations.html#GUID-A1FDD9FE-74B8-4146-AFC4-6BD5402C8B5D" title="The RMAN REPORT command analyzes the available backups and your database.">Reporting on Backups and Database Schema</a>"</span> to learn how to use the <code class="codeph">REPORT</code> command for RMAN reporting
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV89360"></a><div class="props_rev_3"><a id="GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415" name="GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415"></a><h3 id="BRADV-GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415" class="sect3"><span class="enumeration_section">2.6 </span>Maintaining RMAN Backups
               </h3>
               <div>
                  <p>RMAN repository metadata is always stored in the control file of the target database. The RMAN maintenance commands use this metadata when managing backups.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-44223141-56C9-4F89-BD6D-474373EC1094" title="Use the CROSSCHECK command to synchronize the logical records of RMAN backups and copies with the files on storage media.">Cross-checking Backups</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10" title="The DELETE command removes RMAN backups and copies from disk and tape, updates the status of the files to DELETED in the control file repository, and removes the records from the recovery catalog (if you use a catalog).">Deleting Obsolete Backups</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV552"></a><a id="BRADV89362"></a><div class="props_rev_3"><a id="GUID-44223141-56C9-4F89-BD6D-474373EC1094" name="GUID-44223141-56C9-4F89-BD6D-474373EC1094"></a><h4 id="BRADV-GUID-44223141-56C9-4F89-BD6D-474373EC1094" class="sect4"><span class="enumeration_section">2.6.1 </span>Cross-checking Backups: Quick Start
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">CROSSCHECK</code> command to synchronize the logical records of RMAN backups and copies with the files on storage media.
                     </p>
                     <div class="section">
                        <p>If a backup is on disk, then <code class="codeph">CROSSCHECK</code> determines whether the header of the file is valid. If a backup is on tape, then RMAN queries the RMAN repository for the names and locations of the backup pieces. It is a good idea to crosscheck backups and copies before deleting them.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-44223141-56C9-4F89-BD6D-474373EC1094__GUID-EA497A12-C9E4-458B-8B7E-350900E2950B">To crosscheck all backups and copies on disk:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CROSSCHECK</code> command, as shown in the following example: </span><div><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUP;
CROSSCHECK COPY;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-44223141-56C9-4F89-BD6D-474373EC1094__GUID-45633A88-BF22-4A6E-9232-F8A1079D6253">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="maintaining-rman-backups.html#GUID-EFF8F8D1-D67C-4202-9C8E-DE74ADFF1FFB" title="To ensure that data about backups in the recovery catalog or control file is synchronized with corresponding data on disk or in the media management catalog, perform a crosscheck. The CROSSCHECK command operates only on files that are currently recorded in the RMAN repository.">Crosschecking the RMAN Repository</a>"</span> to learn how to crosscheck RMAN backups
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV135"></a><a id="BRADV89363"></a><div class="props_rev_3"><a id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10" name="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10"></a><h4 id="BRADV-GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10" class="sect4"><span class="enumeration_section">2.6.2 </span>Deleting Obsolete Backups: Quick Start
                  </h4>
                  <div>
                     <p>The DELETE command removes RMAN backups and copies from disk and tape, updates the status of the files to <code class="codeph">DELETED</code> in the control file repository, and removes the records from the recovery catalog (if you use a catalog).
                     </p>
                     <div class="section">
                        <p>If you run RMAN interactively, and if you do not specify the <code class="codeph">NOPROMPT</code> option, then <code class="codeph">DELETE</code> displays a list of files and prompts for confirmation before deleting any file in the list. The <code class="codeph">DELETE OBSOLETE</code> command is particular useful because RMAN deletes backups and data file copies recorded in the RMAN repository that are obsolete, that is, no longer needed. You can use options on the <code class="codeph">DELETE</code> command to specify what is obsolete or use the configured <a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">backup retention policy</span></a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10__GUID-F73F7403-4722-4C7C-A956-6BE8D2FFAC58">To delete obsolete backups and copies:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">DELETE OBSOLETE</code> command, as shown in the following example: </span><div><pre class="oac_no_warn" dir="ltr">DELETE OBSOLETE;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10__GUID-D3D3BBF9-E840-477D-BA13-615213CAEBB5">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="maintaining-rman-backups.html#GUID-8C4B395D-7C24-485F-BEA0-A355821FB93D" title="You can use the RMAN DELETE command to delete archived redo logs and RMAN backups.">Deleting RMAN Backups and Archived Redo Logs</a>"</span> to learn how to use the <code class="codeph">DELETE</code> command
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV89364"></a><div class="props_rev_3"><a id="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649" name="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649"></a><h3 id="BRADV-GUID-F24568FC-0546-4CB0-B843-87F0A95D1649" class="sect3"><span class="enumeration_section">2.7 </span>Diagnosing and Repairing Failures with Data Recovery Advisor: Quick Start
               </h3>
               <div>
                  <p>Data Recovery Advisor is an Oracle Database tool that provides an infrastructure for diagnosing persistent data failures, presenting repair options to the user, and executes repairs at the user’s request.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752" title="A failure is a persistent data corruption detected by the Health Monitor. Examples include physical and logical data block corruptions and missing data files.">Listing Failures and Determining Repair Options</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C" title="Use the RMAN REPAIR FAILURE command to repair failures that were detected.">Repairing Failures</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649__GUID-8F591ECE-3F72-4F8A-ABCB-6D5DC767F396">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="diagnosing-repairing-failures-dra.html#GUID-636EA9BE-2DFB-4FA0-959E-B1290C774ABD" title="The Data Recovery Advisor is a tool that helps reduce database recovery time by determining the best automated repair option for database failures.">Overview of Data Recovery Advisor</a>"</span></p>
                  </div>
               </div><a id="BRADV136"></a><a id="BRADV89365"></a><div class="props_rev_3"><a id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752" name="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752"></a><h4 id="BRADV-GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752" class="sect4"><span class="enumeration_section">2.7.1 </span>Listing Failures and Determining Repair Options
                  </h4>
                  <div>
                     <p>A failure is a persistent data corruption detected by the Health Monitor. Examples include physical and logical data block corruptions and missing data files.</p>
                     <div class="section">
                        <p>Each failure has a <a href="glossary.html#GUID-AFA532F1-81A1-433F-95BE-730178DD900D"><span class="xrefglossterm">failure priority</span></a> and <a href="glossary.html#GUID-7881F5D7-5E80-49BF-A369-DC4B670EF8EB"><span class="xrefglossterm">failure status</span></a>. The priority can be <code class="codeph">CRITICAL</code>, <code class="codeph">HIGH</code>, or <code class="codeph">LOW</code>. The status can be <code class="codeph">OPEN</code> or <code class="codeph">CLOSED</code>.
                        </p>
                        <p>You can run the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF132" target="_blank"><code class="codeph">LIST</code></a> <code class="codeph">FAILURE</code> command to show all known failures. If failures exist, then run the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF166" target="_blank"><code class="codeph">ADVISE FAILURE</code></a> command in the same session to determine repair options. The <code class="codeph">ADVISE FAILURE</code> output shows both manual and automated repair options. First try to fix the problem manually. If you cannot fix the problem manually, then review the automated repair section. 
                        </p>
                        <p>An automated <a href="glossary.html#GUID-76EA30CA-A51E-44C9-AB25-E1D89AF711B2"><span class="xrefglossterm">repair option</span></a> describes a server-managed repair for one or more failures. Repairs are consolidated when possible so that a single repair can fix multiple failures. The repair option indicates which repair is performed and whether data is lost by performing the repair operation.
                        </p>
                        <div class="infoboxnotealso" id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__GUID-B0297116-EC2B-4D6A-928D-906242300B51">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="diagnosing-repairing-failures-dra.html#GUID-05C2861A-4EC0-4F0C-8860-42AC2BC4CC17" title="If you suspect or know that one or more database failures have occurred, then use LIST FAILURE to obtain information about them.">Listing Failures</a>"</span> and <span class="q">"<a href="diagnosing-repairing-failures-dra.html#GUID-13944F9E-545E-480A-A47B-CE0A73FED3C7" title="Use the ADVISE FAILURE command to display repair options after running LIST FAILURE in an RMAN session. This command prints a summary of the failures and implicitly closes all open failures that are repaired.">Determining Repair Options</a>"</span></p>
                        </div>
                        <p><a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">Listing Failures and Determining Repair Options</a> illustrates the commands to list failures and determine repair options. The output indicates the file name of a repair script containing RMAN commands. If you do not want to use Data Recovery Advisor to repair the failure automatically, then you can use the script as the basis of your own recovery strategy.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">
                        <p class="titleinexample">Example 2-1 LIST FAILURE and ADVISE FAILURE</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; <span class="bold">LIST FAILURE;</span>
 
Database Role: PRIMARY
List of Database Failures
=========================
 
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
142        HIGH     OPEN      23-APR-13     One or more non-system datafiles are missing
101        HIGH     OPEN      23-APR-13     Datafile 1: '/disk1/oradata/prod/system01.dbf' 
                                            contains one or more corrupt blocks

RMAN&gt; <span class="bold">ADVISE FAILURE;</span>
 
Database Role: PRIMARY
List of Database Failures
=========================
 
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
142        HIGH     OPEN      23-APR-13     One or more non-system datafiles are missing
101        HIGH     OPEN      23-APR-13     Datafile 1: '/disk1/oradata/prod/system01.dbf' 
                                            contains one or more corrupt blocks
 
analyzing automatic repair options; this may take some time
using channel ORA_DISK_1
analyzing automatic repair options complete
 
Mandatory Manual Actions
========================
no manual actions available
 
Optional Manual Actions
=======================
1. If file /disk1/oradata/prod/users01.dbf was unintentionally renamed or moved, restore it
 
Automated Repair Options
========================
Option Repair Description
------ ------------------
1      Restore and recover datafile 28; Perform block media recovery of 
       block 56416 in file 1
  Strategy: The repair includes complete media recovery with no data loss
  Repair script: /disk1/oracle/log/diag/rdbms/prod/prod/hm/reco_660500184.hm
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="BRADV553"></a><a id="BRADV89366"></a><div class="props_rev_3"><a id="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C" name="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C"></a><h4 id="BRADV-GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C" class="sect4"><span class="enumeration_section">2.7.2 </span>Repairing Failures: Quick Start
                  </h4>
                  <div>
                     <p>Use the RMAN <code class="codeph">REPAIR FAILURE</code> command to repair failures that were detected.
                     </p>
                     <div class="section">
                        <p>After running <code class="codeph">LIST FAILURE</code> and <code class="codeph">ADVISE FAILURE</code> in an <a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a>, you can run <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF199" target="_blank"><code class="codeph">REPAIR FAILURE</code></a> to execute a repair option. If you execute <code class="codeph">REPAIR FAILURE</code> with no other command options, then RMAN uses the first repair option of the most recent <code class="codeph">ADVISE FAILURE</code> command in the current session. Alternatively, specify the repair option number obtained from the most recent <code class="codeph">ADVISE FAILURE</code> command. The following example illustrates how to repair the failures identified in <a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">Example 2-1</a>.
                        </p><pre class="pre codeblock"><code>RMAN&gt; REPAIR FAILURE;</code></pre><p>By default, <code class="codeph">REPAIR FAILURE</code> prompts for confirmation before it begins executing. After executing a repair, Data Recovery Advisor reevaluates all existing failures on the possibility that they may also have been fixed. Data Recovery Advisor always verifies that failures are still relevant and automatically closes fixed failures. If a repair fails to complete because of an error, then the error triggers a new assessment and re-evaluation of existing failures and repairs.
                        </p>
                        <div class="infoboxnotealso" id="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C__GUID-E43E6851-0927-4D18-ACA8-A63216B3266C">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="diagnosing-repairing-failures-dra.html#GUID-31DF1037-325F-4FED-8A37-23216EFF9526" title="You can use Data Recovery Advisor to repair failures automatically.">Repairing Failures</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV554"></a><a id="BRADV89367"></a><div class="props_rev_3"><a id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1" name="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1"></a><h3 id="BRADV-GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1" class="sect3"><span class="enumeration_section">2.8 </span>Rewinding a Database with Flashback Database: Quick Start
               </h3>
               <div>
                  <p>You can use the Oracle Flashback Database to rewind the whole database to a past time. Unlike media recovery, you do not need to restore data files to return the database to a past state.</p>
                  <div class="section">
                     <p>To use the RMAN <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF194" target="_blank"><code class="codeph">FLASHBACK DATABASE</code></a> command, your database must have been previously configured to generate <a href="glossary.html#GUID-725ED3D7-5077-4F16-85AA-CDAD5BFCE554"><span class="xrefglossterm">flashback logs</span></a>. This configuration task is described in <span class="q">"<a href="using-flasback-database-restore-points.html#GUID-509FB7A6-4CB2-4730-80CA-7B2D68F50773" title="Flashback Database is similar to conventional point-in-time recovery in its effects. It enables you to return a database to its state at a time in the recent past. Flashback Database is much faster than point-in-time recovery because it does not require restoring data files from backup and requires applying fewer changes from the archived redo logs.">About Flashback Database</a>"</span>. Flashback Database works by rewinding changes to the data files that exist at the moment that you run the command. You cannot use the flashback database to repair media failures or missing data files.
                     </p>
                     <p>The database must be mounted when you issue <code class="codeph">FLASHBACK DATABASE</code>. You can flashback to any time within the <a href="glossary.html#GUID-C25BCFCE-4DE2-499A-A5E3-407A774FE9F3"><span class="xrefglossterm">flashback database window</span></a>. If you have previously created a <a href="glossary.html#GUID-A5A5E7B1-72B6-4F50-8E11-04C03EB5FFAE"><span class="xrefglossterm">restore point</span></a>, that is a convenience, but not required.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1__GUID-01867A7A-D160-455E-949A-E3727A88CB4F">To rewind a database with Flashback Database:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                     <li class="stepexpand"><span>Ensure that the database is in a mounted state.</span><div>
                           <p>The following commands shut down and then mount the database: </p><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Run the <code class="codeph">FLASHBACK DATABASE</code> command.</span><div>
                           <p>The following examples illustrate different forms of the command:</p><pre class="oac_no_warn" dir="ltr">FLASHBACK DATABASE TO SCN 861150;

FLASHBACK DATABASE 
  TO RESTORE POINT BEFORE_CHANGES;

FLASHBACK DATABASE    
  TO TIMESTAMP TO_DATE(04-DEC-2009  03:30:00','DD-MON-YYYY HH24:MI:SS');
</pre></div>
                     </li>
                     <li class="stepexpand"><span>After performing the Flashback Database, open the database read-only in SQL*Plus and run some queries to verify the database contents.</span><div>
                           <p>Open the database read-only as follows:</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN READ ONLY;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>If satisfied with the results, then issue the following sequence of commands to shut down and then open the database:</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
ALTER DATABASE OPEN RESETLOGS;</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1__GUID-EE8D0C47-C8AB-4D21-AED0-B117B8C8CBF1">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="rman-performing-flashback-dbpitr.html#GUID-953FA30D-BED2-4DBA-8361-9DA1B8FF073F" title="Flashback Database reverses unwanted changes by returning your database to its state at a previous point in time.">Rewinding a Database with Flashback Database</a>"</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV89368"></a><div class="props_rev_3"><a id="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205" name="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205"></a><h3 id="BRADV-GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205" class="sect3"><span class="enumeration_section">2.9 </span>Restoring and Recovering Database Files: Quick Start
               </h3>
               <div>
                  <p>Use the <code class="codeph">RESTORE</code> and <code class="codeph">RECOVER</code> commands for RMAN restore and recovery of physical database files. 
                  </p>
                  <p>Restoring data files is retrieving them from backups as needed for a recovery operation. Media recovery is the application of changes from redo logs and incremental backups to a restored data file to bring the data file forward to a desired SCN or point in time.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="To recover the database because a media failure damages database files, then first ensure that you have the necessary backups.">Preparing to Restore and Recover Database Files</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8" title="Use the RESTORE DATABASE and RECOVER DATABASE commands to recover the whole database.">Recovering the Whole Database</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8" title="Use the RESTORE TABLESPACE and RECOVER TABLESPACE commands on individual tablespaces when the database is open. In this case, you must take the tablespace that needs recovery offline, restore and then recover the tablespace, and bring the recovered tablespace online.">Recovering Tablespaces</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E" title="RMAN can recover individual corrupted data file blocks.">Recovering Individual Data Blocks</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205__GUID-727878EF-123D-4A82-8CDF-6A90790E86F3">
                     <p class="notep1">See Also:</p>
                     <p><a href="rman-complete-database-recovery.html#GUID-D908719C-9D46-4084-850C-0F81C25094EB" title="Complete recovery returns your database to normal operation after the loss of one or more database files.Complete recovery is recovering a database to the most recent point in time, without the loss of any committed transactions.The complete recovery operations described in this chapter are subject to certain conditions.Zero Data Loss Recovery Appliance (Recovery Appliance) substantially reduces the window of potential data loss that exists between successive archived redo log backups. You to recover target databases to within a few subseconds of a database failure.You must plan your database restore and recovery strategy based on your recovery goal and which database files have been lost.The techniques for determining which files require restore or recovery depend upon the type of file that is lost.The database shuts down immediately when any of the multiplexed control files become inaccessible. The decision about when and how to recover depends on the state of the database and the location of its data files.An easy technique for determining which data files are missing is to run a VALIDATE DATABASE command. Although VALIDATE DATABASE is a good technique for determining whether files are inaccessible, you may want to use SQL queries to obtain more detailed information. It is recommended that you record the DBID of your database.Previewing backups helps you to ensure that all backups required for a restore and recovery operation are available.An offsite backup is stored in a remote location, such as a secure storage facility, and cannot be restored unless the media manager retrieves the media.Validating backups determines if the backups are usable.RMAN restores archived redo log files from backup automatically as needed to perform recovery.RMAN enables you to override the default location for restored archived redo log files.To manage disk space that is used to contain the restored logs, you can specify restore destinations for archived logs multiple times in one RUN block, to distribute restored logs among several destinations.For backups encrypted using certain techniques, you must provide the password that will be used to decrypt these backups.During complete recovery RMAN restores one or more data files and then applies all the redo generated after the restored backup.You use the RESTORE and RECOVER commands to restore and recover the database. If you cannot restore data files to their default locations, then you must update the control file to reflect the new locations of the data files.This scenario assumes that database trgt has lost most or all of its data files. It also assumes that the database uses a fast recovery area.Use the RESTORE and RECOVER commands with the TABLESPACE option to perform complete recovery of a tablespaceYou can recover a database by switching to image copies of inaccessible data files. This technique takes less time than traditional restore and recovery because no backups need to be restored.When one or more data files are damaged, you can perform recovery by switching to existing image copies of the damaged data files.You can perform complete database recovery by switching to image copies of the damaged data files instead of restoring these data files.RMAN and Oracle Enterprise Manager Cloud Control (Cloud Control) provide full support for backup and recovery in a multitenant environment. When you recover a whole CDB, you recover the root and all PDBs in a single operation.You might consider recovering only the root if a data corruption or user error occurs that affects only the root.You can perform complete recovery of one or more PDBs without affecting operations of other open PDBs.Enterprise Manager Cloud Control (Cloud Control) provides an interface to recover PDBs.Use the RECOVER command to perform complete recovery using preplugin backups.Preplugin backups are used to restore and recover a PDB to its state at a time in the past that was before the PDB was plugged in to the current CDB. RMAN performs complete recovery of a PDB using preplugin backups. These preplugin backups were created on a source non-CDB or a source CDB before the PDB was migrated to the current target CDB. This example performs complete recovery of a PDB my_pdb in the destination CDB prod_cdb using preplugin backups.Because tablespaces in different PDBs can have the same name, to eliminate ambiguity, you must connect directly to a PDB to recover one or more of its tablespaces. In contrast, because data file numbers and paths are unique across the CDB, you can connect either to the root or to a PDB when recovering PDB data files.Oracle Enterprise Manager Cloud Control (Cloud Control) provides an interface to recover tablespaces within a PDB.Recovering a CDB by switching to a copy is faster than traditional restore and recovery.RMAN enables you to use the RESTORE and RECOVER commands to perform complete recovery of the application containers without impacting the other containers in the CDB.Use the RESTORE and RECOVER commands to perform complete recovery of the application root.You can perform complete recovery of an application container, which includes the application root and all its application PDBs without impacting the other PDBs within the CDB.Use the RESTORE and RECOVER commands to perform complete recovery of one or more application PDBs.You can recover sparse databases to the most recent point in time using the RESTORE and RECOVER commands.Performing recovery of a database containing sparse data files is very similar to performing recovery of a whole database.Performing recovery of a sparse CDB is very similar to performing the complete recovery of a sparse database. You can recover a sparse PDB while you are connected at the root level or at the CDB level."> Performing Complete Database Recovery </a></p>
                  </div>
               </div><a id="BRADV555"></a><a id="BRADV99956"></a><div class="props_rev_3"><a id="GUID-F05FE79E-7C36-402B-8785-961F793AA710" name="GUID-F05FE79E-7C36-402B-8785-961F793AA710"></a><h4 id="BRADV-GUID-F05FE79E-7C36-402B-8785-961F793AA710" class="sect4"><span class="enumeration_section">2.9.1 </span>Preparing to Restore and Recover Database Files: Quick Start
                  </h4>
                  <div>
                     <p>To recover the database because a media failure damages database files, then first ensure that you have the necessary backups. </p>
                     <div class="section">
                        <p>You can use the <code class="codeph">RESTORE ... PREVIEW</code> command to report, but not restore, the backups that RMAN can use to restore to the specified time. RMAN queries the metadata and does not actually read the backup files. The database can be open when you run this command.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F05FE79E-7C36-402B-8785-961F793AA710__GUID-93F11DE9-D0B7-4005-96FE-C750C831971F">To preview a database restore and recovery:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to the target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Optionally, list the current tablespaces and data files, as shown in the following command:</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; REPORT SCHEMA;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">RESTORE DATABASE</code> command with the <code class="codeph">PREVIEW</code> option.</span><div>
                              <p>The following command specifies <code class="codeph">SUMMARY</code> so that the backup metadata is not displayed in verbose mode (sample output included):
                              </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RESTORE DATABASE PREVIEW SUMMARY;
 
Starting restore at 21-MAY-13
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=80 device type=DISK
 
List of Backups
===============
Key     TY LV S Device Type Completion Time #Pieces #Copies Compressed Tag
------- -- -- - ----------- --------------- ------- ------- ---------- ---
11      B  F  A DISK        18-MAY-13       1       2       NO         TAG20070518T181114
13      B  F  A DISK        18-MAY-13       1       2       NO         TAG20070518T181114
using channel ORA_DISK_1
 
List of Archived Log Copies for database with db_unique_name PROD
=====================================================================
 
Key     Thrd Seq     S Low Time
------- ---- ------- - ---------
47      1    18      A 18-MAY-13
        Name: /disk1/oracle/dbs/db1r_60ffa882_1_18_0622902157.arc
 
Media recovery start SCN is 586534
Recovery must be done beyond SCN 587194 to clear datafile fuzziness
validation succeeded for backup piece
Finished restore at 21-MAY-13</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV556"></a><a id="BRADV89369"></a><div class="props_rev_3"><a id="GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8" name="GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8"></a><h4 id="BRADV-GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8" class="sect4"><span class="enumeration_section">2.9.2 </span>Recovering the Whole Database: Quick Start
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">RESTORE</code> <code class="codeph">DATABASE</code> and <code class="codeph">RECOVER</code> <code class="codeph">DATABASE</code> commands to recover the whole database.
                     </p>
                     <div class="section">
                        <p>You must have previously made backups of all needed files. This scenario assumes that you can restore all data files to their original locations. If the original locations are inaccessible, then use the <code class="codeph">SET NEWNAME</code> command as described in <span class="q">"<a href="rman-complete-database-recovery.html#GUID-A3DE37A6-3983-4834-858E-A2BCC3804681" title="If you cannot restore data files to their default locations, then you must update the control file to reflect the new locations of the data files.">About Restoring Data Files to a Nondefault Location</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8__GUID-8F67F2DA-07E8-4FC7-92A5-14A1991BA56B">To recover the whole database:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Prepare for recovery as explained in <span class="q">"<a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="To recover the database because a media failure damages database files, then first ensure that you have the necessary backups.">Preparing to Restore and Recover Database Files</a>"</span>.</span></li>
                        <li class="stepexpand"><span>Place the database in a mounted state. </span><div>
                              <p>The following example terminates the database instance (if it is started) and mounts the database:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; STARTUP FORCE MOUNT;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Restore the database. </span><div>
                              <p>The following example uses the preconfigured disk channel to restore the database:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RESTORE DATABASE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Recover the database, as shown in the following example:</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; RECOVER DATABASE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Open the database, as shown in the following example:</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER DATABASE OPEN;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV557"></a><a id="BRADV89370"></a><div class="props_rev_3"><a id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8" name="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8"></a><h4 id="BRADV-GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8" class="sect4"><span class="enumeration_section">2.9.3 </span>Recovering Tablespaces: Quick Start
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">RESTORE</code> <code class="codeph">TABLESPACE</code> and <code class="codeph">RECOVER</code> <code class="codeph">TABLESPACE</code> commands on individual tablespaces when the database is open. In this case, you must take the tablespace that needs recovery offline, restore and then recover the tablespace, and bring the recovered tablespace online.
                     </p>
                     <div class="section">
                        <p>If you cannot restore a data file to its original location, then use the RMAN <code class="codeph">SET NEWNAME</code> command within a <code class="codeph">RUN</code> block to specify the new file name and location. Afterward, use a <code class="codeph">SWITCH DATAFILE ALL</code> command, which is equivalent to using the SQL statement <code class="codeph">ALTER DATABASE RENAME FILE</code>, to update the control file to reflect the new names for all data files for which a <code class="codeph">SET NEWNAME</code> has been issued in the <code class="codeph">RUN</code> command.
                        </p>
                        <p>Unlike user-managed media recovery, you do <span class="italic">not</span> place an online tablespace in <a href="glossary.html#GUID-BD2A12D3-A995-49B8-AE99-B8DDDF4FE7E7"><span class="xrefglossterm">backup mode</span></a>. RMAN does not require extra logging or backup mode because it knows the format of data blocks.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8__GUID-305AECEF-0FFF-4C42-B0C7-E933795994EB">To recover an individual tablespace when the database is open:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Prepare for recovery as explained in <span class="q">"<a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="To recover the database because a media failure damages database files, then first ensure that you have the necessary backups.">Preparing to Restore and Recover Database Files</a>"</span>.</span></li>
                        <li class="stepexpand"><span>Take the tablespace to be recovered offline. </span><div>
                              <p>The following example takes the <code class="codeph">USERS</code> tablespace offline:
                              </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER TABLESPACE users OFFLINE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Restore and recover the tablespace. </span><div>
                              <p>The following <code class="codeph">RUN</code> command, which you execute at the RMAN prompt, sets a new name for the data file in the <code class="codeph">USERS</code> tablespace:
                              </p><pre class="oac_no_warn" dir="ltr">RUN
{
  SET NEWNAME FOR DATAFILE '/disk1/oradata/prod/users01.dbf' 
    TO '/disk2/users01.dbf';
  RESTORE TABLESPACE users;
  SWITCH DATAFILE ALL;   # update control file with new file names
  RECOVER TABLESPACE users;
}
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Bring the tablespace online, as shown in the following example:</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER TABLESPACE users ONLINE;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>You can also use <code class="codeph">RESTORE DATAFILE</code> and <code class="codeph">RECOVER DATAFILE</code> for recovery at the data file level.
                        </p>
                        <div class="infoboxnotealso" id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8__GUID-0C9261C3-70BF-4D9B-A4E3-6A1053132540">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="rman-complete-database-recovery.html#GUID-4EBD9D56-9700-45A1-B233-1F5506A04532" title="Use the RESTORE and RECOVER commands with the TABLESPACE option to perform complete recovery of a tablespace">Performing Complete Recovery of a Tablespace</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="rman-backup-concepts.html#GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C" title="You can create RMAN backups or user-managed backups.">About Online Backups and Backup Mode</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV558"></a><a id="BRADV89371"></a><div class="props_rev_3"><a id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E" name="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E"></a><h4 id="BRADV-GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E" class="sect4"><span class="enumeration_section">2.9.4 </span>Recovering Individual Data Blocks: Quick Start
                  </h4>
                  <div>
                     <p>RMAN can recover individual corrupted data file blocks. </p>
                     <div class="section">
                        <p>When RMAN performs a complete scan of a file for a backup, any corrupted blocks are listed in <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>. Corruption is usually reported in alert logs, trace files, or results of SQL queries. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E__GUID-EED29271-8F04-4A0F-A066-FFF76A152F5B">To recover data blocks:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to the target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>.</span></li>
                        <li class="stepexpand"><span>Obtain the block numbers of the corrupted blocks if you do not have this information.</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; SELECT NAME, VALUE FROM V$DIAG_INFO;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">RECOVER</code> command to repair the blocks.</span><div>
                              <p>The following RMAN command recovers all corrupted blocks:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RECOVER CORRUPTION LIST;
</pre><p>You can also recover individual blocks, as shown in the following example:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RECOVER DATAFILE 1 BLOCK 233, 235 DATAFILE 2 BLOCK 100 TO 200;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E__GUID-641C5748-E11B-4796-9E60-902DCE0C2551">
                           <p class="notep1">See Also:</p>
                           <p><a href="rman-block-media-recovery.html#GUID-1E226393-17D0-4AB0-A05D-91210255D8FF" title="Block media recovery recovers provides lower mean time to recover (MTTR) by recovering corrupt data blocks.Use block media recovery to recover one or more corrupt data blocks within a data file. Usually, the database marks a block as media corrupt and then writes it to disk when the corruption is first encountered. No subsequent read of the block is successful until the block is recovered. You can perform block recovery only on blocks that are marked corrupt or that fail a corruption check.Block recovery behavior depends on whether the data block corruption was discovered on the primary database or the physical standby database.The V$DATABASE_BLOCK_CORRUPTION view displays blocks marked corrupt by database components such as RMAN, ANALYZE, and SQL queries.Block media recovery only requires an unbroken set of redo changes for the blocks being recovered. This is unlike data file recovery that requires an unbroken series of redo changes from the beginning of recovery to the end.Certain prerequisites must be met before you perform block media recovery by using the RECOVER ... BLOCK command.Use the RECOVER...BLOCK command to recover individual corrupt blocks in a data file.You identify the blocks that require recovery and then use any available backup to restore and recover these blocks.You can use the Data Recovery Advisor to diagnose and repair failures caused by data block corruptions. In this example, corrupt data blocks were discovered when the VALIDATE DATABASE command.RMAN can automatically recover all blocks listed in the V$DATABASE_BLOCK_CORRUPTION view."> Performing Block Media Recovery </a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='03691.image-processing-virtual-mosaic.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">
      <meta name="description" content="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">
      <title>Image Processing and Virtual Mosaic</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="GeoRaster Developer's Guide ">
      <meta property="og:description" content="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="GeoRaster Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="spatial-and-graph-georaster-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-14T11:48:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94793-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="raster-algebra-and-analytics.html" title="Previous" type="text/html">
      <link rel="next" href="SDO_GEOR-reference.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph GeoRaster Developer's Guide">
    <meta name="dcterms.isVersionOf" content="GEORS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="raster-algebra-and-analytics.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="SDO_GEOR-reference.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">GeoRaster Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Image Processing and Virtual Mosaic</li>
            </ol>
            <a id="GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" name="GUID-EB60166B-6A52-4974-AF16-139CD6480EBC"></a><a id="GEORS1217"></a>
            
            <h2 id="GEORS-GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" class="sect2"><span class="enumeration_chapter">6 </span> Image Processing and Virtual Mosaic
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.</p>
               <p>This chapter also describes the concept and application of <span class="italic">virtual mosaic</span> within the context of a large-scale image database and on-the-fly spatial queries over it.
               </p>
               <p>The operations in this chapter are most commonly used to process geospatial images, particularly raw satellite imagery and airborne photographs. However, those operations, just like the GeoRaster raster algebra, apply to all raster data types.</p>
               <p>This chapter contains the following major sections.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01">Advanced Georeferencing</a><br>In addition to spatial referencing capability, advanced georeferencing capabilities are available.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928">Image Reprojection</a><br>Image reprojection is the process of transforming an image from one SRS (spatial reference system, or coordinate system) to another.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897">Image Rectification</a><br>Most raster data originating from remote sensors above the ground is usually subject to distortion caused by the terrain, the view angles of the instrument, and the irregular shape of the Earth. Image rectification as explained in this section is the process of transforming the images to reduce some of that distortion.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95">Image Orthorectification</a><br>Orthorectification is a rectification transformation process where information about the elevation, the terrain, and the shape of the Earth is used to improve the quality of the output rectified image. Oracle GeoRaster supports single image orthorectification with average height value or DEM.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-F9C2917F-B85A-4D24-B760-A60CB5685501">Image Warping</a><br>Image warping transforms an input GeoRaster object to an output GeoRaster object using the spatial reference information from a specified SDO_GEOR_SRS object.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B">Image Affine Transformation and Scaling</a><br>Affine transformation is the process of using geometric transformations of translation, scaling, rotation, shearing, and reflection on an image to produce another image.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-1BFCB081-6C19-4727-B07E-1127515D75CD">Image Stretching, Normalization, Equalization, Histogram Matching, and Dodging</a><br>The color and contrast of images can be enhanced to improve their visual quality. The SDO_GEOR_IP package (“IP” for image processing) provides a set of subprograms for image enhancement, including performing image stretching, image normalization, image equalization, histogram matching, and image dodging. 
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-F3C5A387-4E89-4E85-B17D-75FB75917869">Image Filtering</a><br>Image filtering is the process of applying a convolution filter on an image to achieve a specific purpose. For example, applying a low-pass filter on an image can smooth and reduce noise in an image, while applying a high-pass filter on an image can enhance the details of the image or even detect the edges inside the image.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-21CA4981-4DFB-4918-BC1F-13803AFEAD28">Image Segmentation</a><br>Segmentation is a simple type of classification algorithm, and can be useful in classifying certain types of images into larger ground feature categories, such as land, cloud, water, or snow.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77">Image Pyramiding: Parallel Generation and Partial Update</a><br>Image pyramiding is one of the most commonly used processes in building large-scale image databases. 
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-60EC1E32-9E68-4E4D-8FFE-54A8A19A07EE">Bitmap Pyramiding</a><br>Bitmap pyramiding can produce high-quality pyramids in certain cases where traditional pyramiding is not adequate.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355">Vegetation Index Computation</a><br>In remote sensing, the Normalized Difference Vegetation Index (NDVI) is a widely used vegetation index, enabling users to quickly identify vegetated areas and monitor the growth and "condition" of plants.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-2530F5D2-7386-4DD4-877A-F004F2109912">Tasseled Cap Transformation</a><br>Tasseled Cap Transformation (TCT) is a useful tool for analyzing physical ground features using remotely sensed imagery.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-846AEB51-5BCC-48D6-8B27-8F846F38CC15">Image Masking</a><br>To perform image masking, an application can query the GeoRaster database for bitmap masks, retrieve the desired bitmap mask or masks, and apply the masking operation on the target GeoRaster object for the purpose of displaying the object or performing some other processing.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807">Band Merging</a><br>For image classification, time series analysis, and raster GIS modeling, multiple bands or layers of different GeoRaster objects may need to be merged into a single GeoRaster object.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156">Image Appending</a><br>You can append one image to another image when the two images have the same number of bands.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA">Large-Scale Image Mosaicking</a><br>A large geospatial area typically consists of many smaller aerial photographs or satellite images. Large-scale image mosaicking can stitch these small geospatial images into one large image to get a better view of the whole spatial area.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD">Virtual Mosaic</a><br>A virtual mosaic treats a set of GeoRaster images as one large virtually mosaicked image.
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-639C081E-8E7F-4467-8B89-3363810F561F">Image Serving</a><br>Serving of image and raster data to clients or applications is supported through many features of the GeoRaster PL/SQL and Java APIs.
                  </li>
               </ul>
            </div>
            <a id="GEORS1310"></a><a id="GEORS1311"></a><a id="GEORS1218"></a><div class="props_rev_3"><a id="GUID-AA625889-BB88-4633-BECD-E76FAE05EE01" name="GUID-AA625889-BB88-4633-BECD-E76FAE05EE01"></a><h3 id="GEORS-GUID-AA625889-BB88-4633-BECD-E76FAE05EE01" class="sect3"><span class="enumeration_section">6.1 </span>Advanced Georeferencing
               </h3>
               <div>
                  <p>In addition to spatial referencing capability, advanced georeferencing capabilities are available.</p>
                  <p>In GeoRaster, the spatial referencing capability is called SRS (spatial reference system) or georeferencing, which may or may not be related to geography or a geospatial scheme. Georeferencing is a key feature of GeoRaster and is the foundation of spatial query and operations over geospatial image and gridded raster data. See <a href="georaster-overview-and-concepts.html#GUID-E32BF03B-DB83-422E-B7D0-C0F3073890F9" title="The GeoRaster spatial reference system (SRS), a metadata component of the GeoRaster object, includes information related to georeferencing. Georeferencing establishes the relationship between cell coordinates of GeoRaster data and real-world ground coordinates (or some local coordinates). Georeferencing assigns ground coordinates to cell coordinates, and cell coordinates to ground coordinates.">Georeferencing</a> for a detailed description of the SRS models.
                  </p>
                  <p>GeoRaster supports non-geospatial images, fine art photos, and multi-dimensional arrays, which might not be associated with any coordinate system. For those images and rasters, there is generally no need for georeferencing, but most of the GeoRaster operations still work on them, such as pyramiding, scaling, subsetting, band merging, stretching, and algebraic operations. In these cases, you address the pixels (cells) using the raster's cell space coordinates (that is, row, column, and band). </p>
                  <p>You can also create a user-defined coordinate system (a new SRID) that is not related to geography, and you can use that SRID as the model coordinate system for the rasters. Then, you can spatially reference these rasters to that SRID; that is, an SRS metadata component will be created for each of those rasters. Doing this causes those rasters to be spatially referenced, and thus co-located in that user-defined model coordinate system. After this is done for all related rasters, GeoRaster operations will work on those rasters as if they are georeferenced to a geographic coordinate system. For example, assume that an artist has painted a large mural on a wall, and that you want to be able to take many high-resolution photographs of different tiles of this wall and then stitch them together. You can spatially reference the tile images and then use the GeoRaster mosaicking capability to do the stitching.</p>
                  <p>If you do not define a new coordinate system, you can still co-locate the images in the cell space. That is, you can set up different ULT coordinates for the images by calling the <a href="SDO_GEOR-reference.html#GUID-B5BF3AB1-3EB5-4D86-B417-28662B7AD00B">SDO_GEOR.setULTCoordinate</a> procedure, so that the images are aligned in the same coordinate system and then can be mosaicked.
                  </p>
                  <p>Most geospatial image and raster files that you have are probably already georeferenced by other software tools, and thus they may come with georeferencing information. In those cases, the georeferencing information can be directly loaded with the rasters or afterward by using <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>, <a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a>, the GeoRaster loader tool, GDAL, or other third-party ETL tools. For more information, check <a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster Tools: Viewer_ Loader_ Exporter</a> and <a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">Georeferencing GeoRaster Objects</a>.
                  </p>
                  <p>If a geospatial image does not have spatial reference information, you can use the GeoRaster Ground Control Point (GCP) support to georeference the image. GCPs are collected either automatically by the remote sensing system or manually afterward. For an image without GCP information, you can use a GeoRaster visualization tool to collection GCPs for the GeoRaster object. GCPs are described in <a href="georaster-overview-and-concepts.html#GUID-EC9DEF7E-54B5-488A-BBCC-932334C9FF9E">Ground Control Point (GCP) Georeferencing Model</a>. 
                  </p>
                  <p>After you have the GCPs and want to store them in the GeoRaster metadata, you can get and set the GCP-based georeferencing mode by using the <a href="SDO_GEOR-reference.html#GUID-9150C734-101F-479C-8FE4-3B3613C54EE1">SDO_GEOR.getGCPGeorefModel</a> function and the <a href="SDO_GEOR-reference.html#GUID-C6DD6322-F4C7-48B9-B009-AD92A54AFBC8">SDO_GEOR.setGCPGeorefModel</a> procedure. To get, set, and edit only GCPs, use the <a href="SDO_GEOR-reference.html#GUID-C2E30658-697E-413D-9EC7-1C55814B5BBD">SDO_GEOR.getControlPoint </a> function and the <a href="SDO_GEOR-reference.html#GUID-44A07135-D379-4DE1-86B1-D299388033E4">SDO_GEOR.setControlPoint</a> and <a href="SDO_GEOR-reference.html#GUID-ACB2F70E-DAB7-4AFC-9DDE-F35F451A19C1">SDO_GEOR.deleteControlPoint </a> procedures. The GCPs can also be stored in the GeoRaster metadata when you call <a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>.
                  </p>
                  <p>To get and set only the geometric model, use the <a href="SDO_GEOR-reference.html#GUID-A6BBF1F3-E28C-414D-BE24-8F8C8266B121">SDO_GEOR.getGCPGeorefMethod</a> function and the <a href="SDO_GEOR-reference.html#GUID-7F595E4E-2770-4012-9CFE-3B4725C82EF1">SDO_GEOR.setGCPGeorefMethod</a> procedure. GeoRaster also allows you to store check points (<code class="codeph">pointType</code> = 2), which are treated and manipulated in the same way as control points (<code class="codeph">pointType</code> = 1) except that check points are not used to create the SRS coefficient when <a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> is called with the GCPs.
                  </p>
                  <p>If you have ground control points (GCPs) that are either stored in the GeoRaster object or not, and if you want to calculate the functional fitting georeferencing model, you can call the <a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> procedure to find the solution. The functional fitting georeferencing model stores all coefficients in the GeoRaster SRS and enables the coordinate transformations between cell space and model space. To generate the functional fitting georeferencing model using GCP, you must specify an appropriate geometric model. The specific geometric models supported by <a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> are Affine Transformation, Quadratic Polynomial, Cubic Polynomial, DLT, Quadratic Rational, and RPC. These models are described in <a href="georaster-overview-and-concepts.html#GUID-D07DEFFD-F25A-4D8D-8A94-9AFD05CE4256">Functional Fitting Georeferencing Model</a>.
                  </p>
                  <div class="example" id="GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDDDIGC">
                     <p class="titleinexample">Example 6-1 Setting Up the GCP Georeferencing Model </p>
                     <p>For example, if you have a Landsat image in a plain area and want to georeference it, you might choose the Quadratic Polynomial geometric model. For that purpose, assuming you have collected 9 GCPs (at least 6 GCPs in this case) and 3 check points, you can set up the GCPs and store them in the GeoRaster's metadata using the code in <a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDDDIGC">Example 6-1</a>.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
   gr1         sdo_georaster;
   georefModel SDO_GEOR_GCPGEOREFTYPE;
   GCPs        SDO_GEOR_GCP_COLLECTION;
BEGIN
   SELECT georaster INTO gr1 from georaster_table WHERE georid=1 FOR UPDATE;
   GCPs := SDO_GEOR_GCP_COLLECTION( 
                 SDO_GEOR_GCP('1', '', 1, 
                      2, sdo_number_array(25, 73),
                      2, sdo_number_array(237036.9, 897987.2),
                      NULL, NULL),
                 SDO_GEOR_GCP('2', '', 1, 
                      2, sdo_number_array(100, 459),
                      2, sdo_number_array(237229.6, 897949.7),
                      NULL, NULL),
                 SDO_GEOR_GCP('3', '', 1, 
                      2, sdo_number_array(362, 77),
                      2, sdo_number_array(237038.9, 897818.8),
                      NULL, NULL),
                 SDO_GEOR_GCP('4', '', 1, 
                       2, sdo_number_array(478, 402),
                       2, sdo_number_array(237201.06, 897760.56),
                       NULL, NULL),
                 SDO_GEOR_GCP('5', '', 1, 
                       2, sdo_number_array(167, 64),
                       2, sdo_number_array(237032.02, 897916.26),
                       NULL, NULL),
                 SDO_GEOR_GCP('6', '', 1, 
                       2, sdo_number_array(101, 257),
                       2, sdo_number_array(237128.9, 897949.3),
                       NULL, NULL),
                 SDO_GEOR_GCP('7', '', 1, 
                       2, sdo_number_array(235, 501),
                       2, sdo_number_array(237250.9, 897882.2),
                       NULL, NULL),
                 SDO_GEOR_GCP('8', '', 1, 
                       2, sdo_number_array(423, 214),
                       2, sdo_number_array(237107.3, 897788.0),
                       NULL, NULL),
                 SDO_GEOR_GCP('9', '', 1, 
                       2, sdo_number_array(127, 178),
                       2, sdo_number_array(237089.0, 897936.5),
                       NULL, NULL),
                 SDO_GEOR_GCP('10', '', 2, 
                       2, sdo_number_array(131, 425),
                       2, sdo_number_array(237212.8, 897934.2),
                       NULL, NULL),
                 SDO_GEOR_GCP('11', '', 2, 
                       2, sdo_number_array(299, 111),
                       2, sdo_number_array(237055.7, 897850.4),
                       NULL, NULL),
                 SDO_GEOR_GCP('12', '', 2, 
                       2, sdo_number_array(329, 253),
                       2, sdo_number_array(237126.9,897835.4), 
                       NULL, NULL) );
   georefModel := SDO_GEOR_GCPGEOREFTYPE('QuadraticPolynomial', GCPs.count, GCPs, NULL);
   -- Set and store the GCP georeference model into the GeoRaster object's metadata
   sdo_geor.setGCPGeorefModel(gr1, georefModel);
   UPDATE georaster_table SET georaster=gr1 WHERE georid=1;
   COMMIT;
END;
/
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDECJDC">
                     <p class="titleinexample">Example 6-2 Generating the Functional Fitting Model Using GCPs </p>
                     <p>After using the code in <a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDDDIGC">Example 6-1</a>, you can generate the functional fitting model coefficients by using the code in <a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDECJDC">Example 6-2</a>.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
   gr1  sdo_georaster;
   rms  sdo_number_array;
BEGIN
   SELECT georaster INTO gr1 from georaster_table WHERE georid=1 FOR UPDATE;
   -- georeference the image using the GCPs stored in the image's metadata
   rms := sdo_geor.georeference(gr1, null, 26986, 0, 'TRUE'); 
   UPDATE georaster_table SET georaster=gr1 WHERE georid=1;
   COMMIT;
END;
/
</pre><p>The steps in <a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDDDIGC">Example 6-1</a> and <a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDECJDC">Example 6-2</a> can be combined without the need to pre-set the GCPs into the GeoRaster object's metadata (see the example for <a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> in <a href="SDO_GEOR-reference.html#GUID-587A19B6-40FF-4F1C-AC13-556891070C30" title="The SDO_GEOR package contains subprograms (functions and procedures) for creating, modifying, and retrieving information about GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram."> SDO_GEOR Package Reference</a>). The returned value array of <a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> in <a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDECJDC">Example 6-2</a> contains RMS values and residuals for each GCP. Using these, you can examine the solution accuracy and identify erratic GCPs. If the accuracy is not satisfactory, recheck all GCPs to make sure they are accurate and add more GCPs as necessary, and then run the script or scripts again.
                     </p>
                     <p>The GCP support in GeoRaster enables you to spatially reference any <span class="italic">non</span>-geospatial images and rasters also.
                     </p>
                     <p>After geospatial images are georeferenced, you can process those images, such as applying rectification, reprojection, and mosaicking, and spatially querying and subsetting the rasters using geometry polygons in different coordinate systems.</p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1327"></a><a id="GEORS1274"></a><div class="props_rev_3"><a id="GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928" name="GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928"></a><h3 id="GEORS-GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928" class="sect3"><span class="enumeration_section">6.2 </span>Image Reprojection
               </h3>
               <div>
                  <p>Image reprojection is the process of transforming an image from one SRS (spatial reference system, or coordinate system) to another.</p>
                  <p>Reprojection is particularly useful with certain GeoRaster operations that combine two or more objects, because it requires that all the GeoRaster objects involved be in the same SRS.</p>
                  <p>Basic reprojection in GeoRaster is performed by the <a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a> procedure and requires that the source GeoRaster SRID be different from the output SRID.
                  </p>
                  <div class="example" id="GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928__CHDBGHBG">
                     <p class="titleinexample">Example 6-3 Image Reprojection</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928__CHDBGHBG">Example 6-3</a> reprojects a raster image that had been loaded into a GeoRaster object with SRID 4326, but needs to be reprojected to have the same SRID as other images previously stored with SRID 23619.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
BEGIN
  select raster into gr1 from georaster_load_table where georid = 10;
  delete from georaster_table where georid = 54;
  insert into georaster_table 
         values(54,'reprojected', sdo_geor.init()) 
         returning georaster into gr2;
  sdo_geor.reproject(inGeoRaster   =&gt; gr1,
                     pyramidLevel  =&gt; 0,
                     cropArea      =&gt; null,
                     layerNumbers  =&gt; null,
                     resampleParam =&gt; 'resampling=BILINEAR',
                     storageParam  =&gt; null,
                     outSRID       =&gt; 32619,
                     outGeoraster  =&gt; gr2);
  update georaster_table set georaster = gr2 where georid = 54;
  commit;
END;
</pre><p>The same operation can be accomplished by the <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> procedure, producing similar results. The <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> procedure offers more capabilities and flexibility than <a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a>; for example, the input and output SRID can be the same and users can specify the precise resolution of the output (see <a href="image-processing-virtual-mosaic.html#GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897" title="Most raster data originating from remote sensors above the ground is usually subject to distortion caused by the terrain, the view angles of the instrument, and the irregular shape of the Earth. Image rectification as explained in this section is the process of transforming the images to reduce some of that distortion.">Image Rectification</a>).
                     </p>
                     <p>If a GeoRaster object does not have an associated SRS, the process for georeferencing and rectifying it is explained in <a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">Georeferencing GeoRaster Objects</a> and <a href="image-processing-virtual-mosaic.html#GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897" title="Most raster data originating from remote sensors above the ground is usually subject to distortion caused by the terrain, the view angles of the instrument, and the irregular shape of the Earth. Image rectification as explained in this section is the process of transforming the images to reduce some of that distortion.">Image Rectification</a>.
                     </p>
                     <p>Parallel reprojection is supported with the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedure. 
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1328"></a><a id="GEORS1275"></a><div class="props_rev_3"><a id="GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897" name="GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897"></a><h3 id="GEORS-GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897" class="sect3"><span class="enumeration_section">6.3 </span>Image Rectification
               </h3>
               <div>
                  <p>Most raster data originating from remote sensors above the ground is usually subject to distortion caused by the terrain, the view angles of the instrument, and the irregular shape of the Earth. Image rectification as explained in this section is the process of transforming the images to reduce some of that distortion.</p>
                  <p>Rectification is performed by the <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> procedure, and requires that the source GeoRaster object have at least a functional fitting georeferencing model. This means that the image does not need to be rectified, but it needs to have georeference information in the metadata (see <a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">Georeferencing GeoRaster Objects</a>). 
                  </p>
                  <p>The <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> procedure can use the information available in the source GeoRaster object to automatically establish the spatial extents, dimension, and SRID of the output GeoRaster, and users can also specify different values by using the appropriate parameters.
                  </p>
                  <div class="example" id="GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897__GUID-B95EF199-B348-4417-AF59-AA520AB727FB">
                     <p class="titleinexample">Example 6-4 Image Rectification</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928__CHDBGHBG">Example 6-3</a> rectifies an aerial image that had been loaded into GeoRaster and later georeferenced with GCPs (see <a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01" title="In addition to spatial referencing capability, advanced georeferencing capabilities are available.">Advanced Georeferencing</a>). The image is rectified so that the output GeoRaster object has the same SRS and resolution of an existing GeoRaster object. The image is to be restricted to the area of existing GeoRaster object, and the pixels should be perfectly aligned with the existing GeoRaster object.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr_src sdo_georaster;
  gr_ref sdo_georaster;
  gr_out sdo_georaster;
BEGIN
  select raster into gr_src from georaster_load_table where georid = 15;
  select raster into gr_ref from georaster_table where georid = 1;
  delete from georaster_table where georid = 2;
  insert into georaster_table 
         values(2, 'rectified', sdo_geor.init()) 
         returning georaster into gr_out;
  sdo_geor.rectify(inGeoRaster      =&gt; gr_src,
                   pyramidLevel     =&gt; null,
                   elevationParam   =&gt; null,
                   dem              =&gt; null,
                   outSRID          =&gt; sdo_geor.getModelSRID(gr_ref),
                   outModelCoordLoc =&gt; null,
                   cropArea         =&gt; sdo_geor.generateSpatialExtent(gr_ref),
                   polygonClip      =&gt; null,
                   layerNumbers     =&gt; null,
                   outResolutions   =&gt; sdo_geor.getSpatialResolutions(gr_ref),
                   resolutionUnit   =&gt; 'unit=meters',
                   referencePoint   =&gt; sdo_geor.getModelCoordinate(gr_ref,
                                       0, sdo_number_array(-0.5,-0.5)),
                   resampleParam    =&gt; null,
                   storageParam     =&gt; null,
                   outGeoraster     =&gt; gr_out);
  update georaster_table set georaster = gr_out where georid = 2;
  commit;
END;
</pre><p>Rectification output can be significantly improved if information about elevation is passed to the <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> procedure. (See <a href="image-processing-virtual-mosaic.html#GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" title="Orthorectification is a rectification transformation process where information about the elevation, the terrain, and the shape of the Earth is used to improve the quality of the output rectified image. Oracle GeoRaster supports single image orthorectification with average height value or DEM.">Image Orthorectification</a> for more information about elevation.)
                     </p>
                     <p>Parallel rectification is supported with the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedure.
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1276"></a><div class="props_rev_3"><a id="GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" name="GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95"></a><h3 id="GEORS-GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" class="sect3"><span class="enumeration_section">6.4 </span>Image Orthorectification
               </h3>
               <div>
                  <p>Orthorectification is a rectification transformation process where information about the elevation, the terrain, and the shape of the Earth is used to improve the quality of the output rectified image. Oracle GeoRaster supports single image orthorectification with average height value or DEM.</p>
                  <p>The orthorectification is done by the <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> procedure and requires that the source GeoRaster have a 3D SRS. The <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> procedure can execute orthorectification with just the average height of the area or with a detailed Digital Elevation Model (DEM).
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-2A0127F1-E83D-4462-B19B-52DB968F1737">Orthorectification with Average Height</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-C79FECF7-D80B-4B50-91D6-398D81315C77">Orthorectification with DEM</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS1330"></a><a id="GEORS1329"></a><div class="props_rev_3"><a id="GUID-2A0127F1-E83D-4462-B19B-52DB968F1737" name="GUID-2A0127F1-E83D-4462-B19B-52DB968F1737"></a><h4 id="GEORS-GUID-2A0127F1-E83D-4462-B19B-52DB968F1737" class="sect4"><span class="enumeration_section">6.4.1 </span>Orthorectification with Average Height
                  </h4>
                  <div>
                     <p>A GeoRaster object with a Digital Elevation Model (DEM) is optional for orthorectification. For relatively flat terrains, the 3D SRS together with the average height value might be sufficient to correct the distortion of the source image.</p>
                     <div class="example" id="GUID-2A0127F1-E83D-4462-B19B-52DB968F1737__CHDEFJEE">
                        <p class="titleinexample">Example 6-5 Orthorectification with Average Height</p>
                        <p><a href="image-processing-virtual-mosaic.html#GUID-2A0127F1-E83D-4462-B19B-52DB968F1737__CHDEFJEE">Example 6-5</a> shows orthorectification with average height. For this example, the source image was acquired from DigitalGlobe with RPC. The DEM was not available, but the average elevation of the area is known to be 1748.0 meters.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr_src  sdo_georaster;
  gr_out  sdo_georaster;
BEGIN
  select georaster into gr_src from georaster_table where georid = 1;
  delete from georaster_table where georid = 3;
  insert into georaster_table values(3, 'orthorectified without DEM',
         sdo_geor.init('rdt_4',3)) 
         returning georaster into gr_out;
  sdo_geor.rectify(inGeoRaster      =&gt; gr_src,
                   pyramidLevel     =&gt; null,
                   elevationParam   =&gt; 'average=1748.8',
                   dem              =&gt; null,
                   outSRID          =&gt; 32613,
                   outModelCoordLoc =&gt; null,
                   cropArea         =&gt; null,
                   polygonClip      =&gt; null,
                   layerNumbers     =&gt; null,
                   outResolutions   =&gt; null,
                   resolutionUnit   =&gt; null,
                   referencePoint   =&gt; null,
                   resampleParam    =&gt; 'resampling=AVERAGE4',
                   storageParam     =&gt; null,
                   outGeoraster     =&gt; gr_out);
  update georaster_table set georaster = gr_out where georid = 3;
  commit;
END;
</pre><p>In <a href="image-processing-virtual-mosaic.html#GUID-2A0127F1-E83D-4462-B19B-52DB968F1737__CHDEFJEE">Example 6-5</a>, the <code class="codeph">dem</code> parameter is null, and the <code class="codeph">elevationParam</code> average elevation must be in the same unit as the SRS. Also, in <code class="codeph">elevationParam</code> the <code class="codeph">offset</code> and scale <code class="codeph">keywords</code> are <span class="italic">not</span> specified because they are relevant only if DEM is specified.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" title="Orthorectification is a rectification transformation process where information about the elevation, the terrain, and the shape of the Earth is used to improve the quality of the output rectified image. Oracle GeoRaster supports single image orthorectification with average height value or DEM.">Image Orthorectification</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1332"></a><a id="GEORS1333"></a><a id="GEORS1331"></a><div class="props_rev_3"><a id="GUID-C79FECF7-D80B-4B50-91D6-398D81315C77" name="GUID-C79FECF7-D80B-4B50-91D6-398D81315C77"></a><h4 id="GEORS-GUID-C79FECF7-D80B-4B50-91D6-398D81315C77" class="sect4"><span class="enumeration_section">6.4.2 </span>Orthorectification with DEM
                  </h4>
                  <div>
                     <p>The use of a DEM (Digital Elevation Model) layer improves the accuracy of the rectification process and therefore produces a higher quality output GeoRaster object.</p>
                     <p>Orthorectification with DEM requires that the source GeoRaster have a 3D SRS. The DEM must cover all the target output area, and it should be in the same SRID as the output. The resolution of the DEM should be similar to the expected resolution of the output GeoRaster object.</p>
                     <p>For orthorectification with DEM, the <code class="codeph">elevationParam</code> <code class="codeph">average</code> keyword is optional; and if it is not specified, the procedure estimates elevation values based on sample values extracted from the DEM on the target area.
                     </p>
                     <p>The <code class="codeph">elevationParam</code> <code class="codeph">offset</code> and <code class="codeph">scale</code> values can be used to modify the values from the DEM. For example, <code class="codeph">scale</code> can be used for unit conversion if the DEM values are in a unit other than that of the source GeoRaster SRS, and <code class="codeph">offset</code> can be used to perform geoidal correction or other offsetting. However, these specifications do not apply the changes to DEM values in the GeoRaster object. An alternative is to pre-process the DEM values by applying the scaling and offsetting to the DEM data before the orthorectification, as explained in <a href="raster-algebra-and-analytics.html#GUID-34B59129-70AC-4E51-BF6D-2E43AA2A813B" title="You can perform raster data scaling and offsetting operations.">Raster Data Scaling and Offsetting</a>.
                     </p>
                     <div class="example" id="GUID-C79FECF7-D80B-4B50-91D6-398D81315C77__CHDCFHEH">
                        <p class="titleinexample">Example 6-6 Orthorectification with DEM</p>
                        <p><a href="image-processing-virtual-mosaic.html#GUID-C79FECF7-D80B-4B50-91D6-398D81315C77__CHDCFHEH">Example 6-6</a> example performs orthorectification with DEM. The DEM covers all the output area in a resolution approximated to the resolution of the output GeoRaster. The DEM values are in meters but the source image SRS is in feet. There is also a geoid correction on that area of about -15.3 meters:
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr_src  sdo_georaster;
  gr_dem  sdo_georaster;
  gr_out  sdo_georaster;
BEGIN
  select georaster into gr_src from georaster_table where georid = 1;
  select georaster into gr_dem from georaster_table where georid = 5;
  delete from georaster_table where georid = 6;
  insert into georaster_table values(5, 'orthorectified with DEM',
         sdo_geor.init('rdt_4',6)) 
         returning georaster into gr_out;
  sdo_geor.rectify(inGeoRaster      =&gt; gr_src,
                   pyramidLevel     =&gt; null,
                   elevationParam   =&gt; 'average=1748.8 offset=-15.3',
                   dem              =&gt; gr_dem,
                   outSRID          =&gt; 32613,
                   outModelCoordLoc =&gt; null,
                   cropArea         =&gt; null,
                   polygonClip      =&gt; null,
                   layerNumbers     =&gt; null,
                   outResolutions   =&gt; null,
                   resolutionUnit   =&gt; null,
                   referencePoint   =&gt; null,
                   resampleParam    =&gt; 'resampling=BILINEAR',
                   storageParam     =&gt; null,
                   outGeoraster     =&gt; gr_out);
  update georaster_table set georaster = gr_out where georid = 6;
  commit;
END;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-C79FECF7-D80B-4B50-91D6-398D81315C77__CHDCAIHF">
                        <p class="titleinexample">Example 6-7 Orthorectification with Cropped DEM</p>
                        <p>Typically, the DEM covers an area much larger than the target area, and the resolution is coarser than the target resolution of the output GeoRaster object. Using this DEM "as is" would result in poor quality orthorectification. The solution to that common problem is to crop the DEM to the target area and rescale it to the desired resolution, as shown in <a href="image-processing-virtual-mosaic.html#GUID-C79FECF7-D80B-4B50-91D6-398D81315C77__CHDCAIHF">Example 6-7</a>. This example uses the <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> procedure to transform the low-resolution DEM GeoRaster object into a second DEM GeoRaster object that has the same resolution as the orthorectified GeoRaster object generated by the second call to the <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> procedure.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  height   number := 1748.8;
  gr_src   sdo_georaster;
  gr_out   sdo_georaster;
  gr_dem   sdo_georaster;
  gr_dem2  sdo_georaster;
  gm_area  sdo_geometry;
begin
  select georaster into gr_src from georaster_table where georid = 1;
  select georaster into gr_dem from georaster_table where georid = 2;
  -- Calculate crop area
  gm_area := sdo_cs.make_2d(
             sdo_geor.generateSpatialExtent(gr_src,height),
             sdo_geor.getModelSRID(gr_dem));
  -- Rectify dem ( re-project, crop area, re-escale and resample )
  delete from georaster_table where georid = 4;
  insert into georaster_table values(4, 
              'rectified DEM',
              sdo_geor.init('rdt_4',4)) 
              returning georaster into gr_dem2;
  sdo_geor.rectify(inGeoRaster      =&gt; gr_dem,
                   pyramidLevel     =&gt; null,
                   elevationParam   =&gt; null,
                   dem              =&gt; null,
                   outSRID          =&gt; 32613,
                   outModelCoordLoc =&gt; null,
                   cropArea         =&gt; gm_area,
                   polygonClip      =&gt; null,
                   layerNumbers     =&gt; null,
                   outResolutions   =&gt; sdo_number_array(0.6,0.6),
                   resolutionUnit   =&gt; null,
                   referencePoint   =&gt; null,
                   resampleParam    =&gt; 'resampling=CUBIC',
                   storageParam     =&gt; null,
                   outGeoraster     =&gt; gr_dem2);
  update georaster_table set georaster = gr_dem2 where georid = 4;
  commit;
  -- Orthorectification with DEM
  select georaster into gr_dem2 from georaster_table where georid = 4;
  delete from georaster_table where georid = 5;
  insert into georaster_table 
         values(5, 'orthorectified', sdo_geor.init('rdt_4',5)) 
         returning georaster into gr_out;
  sdo_geor.rectify(inGeoRaster      =&gt; gr_src,
                   pyramidLevel     =&gt; null,
                   elevationParam   =&gt; 
                          'average=' || height || ' offset=-15.588',
                   dem              =&gt; gr_dem2,
                   outSRID          =&gt; 32613,
                   outModelCoordLoc =&gt; null,
                   cropArea         =&gt; gm_area,
                   polygonClip      =&gt; null,
                   layerNumbers     =&gt; null,
                   outResolutions   =&gt; sdo_number_array(0.6,0.6),
                   resolutionUnit   =&gt; null,
                   referencePoint   =&gt; null,
                   resampleParam    =&gt; 'resampling=average16',
                   storageParam     =&gt; null,
                   outGeoraster     =&gt; gr_out);
  update georaster_table set georaster = gr_out where georid = 5;
  commit;
end;
/</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" title="Orthorectification is a rectification transformation process where information about the elevation, the terrain, and the shape of the Earth is used to improve the quality of the output rectified image. Oracle GeoRaster supports single image orthorectification with average height value or DEM.">Image Orthorectification</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-F9C2917F-B85A-4D24-B760-A60CB5685501" name="GUID-F9C2917F-B85A-4D24-B760-A60CB5685501"></a><h3 id="GEORS-GUID-F9C2917F-B85A-4D24-B760-A60CB5685501" class="sect3"><span class="enumeration_section">6.5 </span>Image Warping
               </h3>
               <div>
                  <p>Image warping transforms an input GeoRaster object to an output GeoRaster object using the spatial reference information from a specified SDO_GEOR_SRS object.</p>
                  <p>The reference SDO_GEOR_SRS object can be copied from an existing GeoRaster object or created using a constructor. (For more information, see <a href="georaster-datatypes.html#GUID-A7C5B4C6-2B57-4E3F-B796-3313F6D67E57">SDO_GEOR_SRS Object Type</a>.)
                  </p>
                  <p>Warping is performed by the <a href="SDO_GEOR-reference.html#GUID-1B480F30-85C6-4F02-BC5E-142A872BEF64">SDO_GEOR.warp</a> procedure, and requires that the source GeoRaster object have at least a functional fitting georeferencing model. This means that the image does not need to be rectified, but it needs to have georeference information in the metadata (see <a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">Georeferencing GeoRaster Objects</a>). 
                  </p>
                  <div class="example" id="GUID-F9C2917F-B85A-4D24-B760-A60CB5685501__IMAGEWARPING-28D5437D">
                     <p class="titleinexample">Example 6-8 Image Warping</p>
                     <p>The following example uses the SDO_GEOR_SRS information from one GeoRaster image (<code class="codeph">gr1</code>) as a reference to transform an existing GeoRaster object (<code class="codeph">gr2</code>) into a new (warped) GeoRaster object (<code class="codeph">gr3</code>). Thus, the third GeoRaster object is a “copy” (actually, a transformation) of the second GeoRaster object, but reflects the same georeferencing as the first GeoRaster object.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  srs sdo_geor_srs;
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  gr3 sdo_georaster;
BEGIN
  select georaster into gr1 from georaster_table where georid = 1;
  select georaster into gr2 from georaster_table where georid = 2;

  srs := sdo_geor.getSRS(gr1); -- get the SRS from image 1.

  insert into georaster_table values(3, 'Warped Object',
         sdo_geor.init('imagery_rdt')) 
         returning georaster  into gr3;

  sdo_geor.warp( inGeoRaster      =&gt; gr2,
                 pyramidLevel     =&gt; null,
                 outSRS           =&gt; srs, -- apply SRS to warp transformation
                 cropArea         =&gt; null,
                 dimensionSize    =&gt; null,
                 layerNumbers     =&gt; null,
                 elevationParam   =&gt; null,
                 resampleParam    =&gt; ‘resampling=AVERAGE4’,
                 storageParam     =&gt; ‘pyramid=true’,
                 outGeoRaster     =&gt; gr3,
                 bgValues         =&gt; sdo_number_array(0,0,0),
                 parallelParam    =&gt; ‘parellel=4’ );

  update georaster_table set georaster = gr3 where georid = 3;
  commit;
END;
</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1334"></a><a id="GEORS1335"></a><a id="GEORS1277"></a><div class="props_rev_3"><a id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B" name="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B"></a><h3 id="GEORS-GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B" class="sect3"><span class="enumeration_section">6.6 </span>Image Affine Transformation and Scaling
               </h3>
               <div>
                  <p>Affine transformation is the process of using geometric transformations of translation, scaling, rotation, shearing, and reflection on an image to produce another image.</p>
                  <p>For details and examples, see the <a href="SDO_GEOR-reference.html#GUID-9C8F8F29-5D1A-4403-9147-B9FD1A30B767">SDO_GEOR.affineTransform</a> reference topic.
                  </p>
                  <p>Image scaling is the process of enlarging or shrinking an image by changing the pixel size for the row and column dimensions of an image. Image scaling resamples the pixel values from the original image to construct the rescaled version of that image. Image scaling can be performed in several ways:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use the <a href="SDO_GEOR-reference.html#GUID-3F7A39BD-67FB-40B7-9143-32FA5DFD9628">SDO_GEOR.scaleCopy</a> procedure and   specify for <code class="codeph">scaleParam</code> a <code class="codeph">scaleFactor</code> to be applied to the input image dimensions or a <code class="codeph">maxDimSize</code> for the output image.
                        </p>
                     </li>
                     <li>
                        <p>Use  the <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> procedure and specify the resolution of the output image. (This procedure can be executed in parallel.)
                        </p>
                     </li>
                     <li>
                        <p id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B___GOBACK-3ADA4D9C">During affine transformation, use the <code class="codeph">scales</code> parameter of the <a href="SDO_GEOR-reference.html#GUID-9C8F8F29-5D1A-4403-9147-B9FD1A30B767">SDO_GEOR.affineTransform</a> procedure. In that procedure, the <code class="codeph">scales</code> parameter is a two-number array where you can specify a scale factor for rows and for columns independently. (This procedure can be executed in parallel.)
                        </p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B__CHDCBFGA">
                     <p class="titleinexample">Example 6-9 Image Scaling Using SDO_GEOR.scaleCopy</p>
                     <p>This example performs rescaling by using <a href="SDO_GEOR-reference.html#GUID-3F7A39BD-67FB-40B7-9143-32FA5DFD9628">SDO_GEOR.scaleCopy</a> and specifying the <code class="codeph">scaleFactor</code> value as 2. The input image will have 2 times more rows and 2 times more columns than the original, and the values will be resampled by the <code class="codeph">average16</code> algorithm. Note that the image will be 4 times larger than the original.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr_src  sdo_georaster;
  gr_out  sdo_georaster;
BEGIN
  select georaster into gr_src from georaster_table where georid = 7;
  -- Rescale
  delete from georaster_table where georid = 9;
  insert into georaster_table values(9, 're-scaled by scaleCopy',
              sdo_geor.init('rdt_4',9)) 
              returning georaster into gr_out;
  <span class="bold">sdo_geor.scaleCopy</span>(inGeoRaster      =&gt; null,
                     <span class="bold">scaleFactor      =&gt; 'scaleFactor=2'</span>,
                     resampleParam    =&gt; 'resampling=AVERAGE16',
                     storageParam     =&gt; null,
                     outGeoraster     =&gt; gr_out);
  update georaster_table set georaster = gr_out where georid = 9;
  commit;
END;
/
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B__CHDJGFIF">
                     <p class="titleinexample">Example 6-10 Image Scaling Using SDO_GEOR.rectify</p>
                     <p>This example performs rescaling by using <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> and specifying the <code class="codeph">outResolutions</code> parameter. The input image is already rectified, and the output will have the same SRID as the input.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr_src     sdo_georaster;
  gr_out     sdo_georaster;
BEGIN
  select georaster into gr_src from georaster_table where georid = 7;
  -- Rescale
  delete from georaster_table where georid = 10;
  insert into georaster_table values(10, 're-scaled by rectify',
              sdo_geor.init('rdt_4',10)) 
              returning georaster into gr_out;
  <span class="bold">sdo_geor.rectify</span>(inGeoRaster      =&gt; null,
                   pyramidLevel     =&gt; null,
                   elevationParam   =&gt; null,
                   dem              =&gt; null,
                   outSRID          =&gt; null,
                   outModelCoordLoc =&gt; null,
                   cropArea         =&gt; null,
                   polygonClip      =&gt; null,
                   layerNumbers     =&gt; null,
                   <span class="bold">outResolutions   =&gt; sdo_number_array(1.2,1.2)</span>,
                   resolutionUnit   =&gt; null,
                   referencePoint   =&gt; null,
                   resampleParam    =&gt; 'resampling=CUBIC',
                   storageParam     =&gt; null,
                   outGeoraster     =&gt; gr_out,
                   parallelParam    =&gt; 'parallel=4');
  update georaster_table set georaster = gr_out where georid = 10;
  commit;
END;
/</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B__GUID-A1B493D3-6F40-49F5-86F1-616A068678B2">
                     <p class="titleinexample">Example 6-11 Rescaling Using SDO_GEOR.affineTransform</p>
                     <p>This example performs rescaling by using the <a href="SDO_GEOR-reference.html#GUID-9C8F8F29-5D1A-4403-9147-B9FD1A30B767">SDO_GEOR.affineTransform</a> procedure and specifying he <code class="codeph">scales</code> parameter as <code class="codeph">sdo_number_array(2, 2)</code>, indicating that the image will be enlarged 2 times on the rows dimension and 2 times on the columns dimension.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;  
BEGIN
  select georaster into gr1 from georaster_table where georid = 1;

  insert into georaster_table values(2, 'Rotated 90 left',
         sdo_geor.init('rdt0',2)) returning georaster into gr2;

  sdo_geor.affineTransform(inGeoRaster   =&gt; gr1,
                           translation   =&gt; null,
                           <span class="bold">scales        =&gt; sdo_number_array(2,2)</span>,
                           rotatePt      =&gt; null,
                           rotateAngle   =&gt; null,
                           shear         =&gt; null,
                           reflection    =&gt; null,
                           storageParam  =&gt; null,
                           outGeoraster  =&gt; gr2,
                           parallelParam =&gt; 'parallel=4');

  update georaster_table set georaster = gr2 where georid = 2;
  commit;
END;
</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1337"></a><a id="GEORS1338"></a><a id="GEORS1336"></a><div class="props_rev_3"><a id="GUID-1BFCB081-6C19-4727-B07E-1127515D75CD" name="GUID-1BFCB081-6C19-4727-B07E-1127515D75CD"></a><h3 id="GEORS-GUID-1BFCB081-6C19-4727-B07E-1127515D75CD" class="sect3"><span class="enumeration_section">6.7 </span>Image Stretching, Normalization, Equalization, Histogram Matching, and Dodging
               </h3>
               <div>
                  <p>The color and contrast of images can be enhanced to improve their visual quality. The SDO_GEOR_IP package (“IP” for image processing) provides a set of subprograms for image enhancement, including performing image stretching, image normalization, image equalization, histogram matching, and image dodging. </p>
                  <p><span class="bold">Linear stretching</span> and <span class="bold">piecewise stretching</span> can stretch the image cell values linearly for all cells values based on the minimum and maximum cell values or at specified value range, to achieve better color and contrast. To perform image stretching, you can use the following procedures:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="SDO_GEOR_IP-reference-ref.html#GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E">SDO_GEOR_IP.stretch</a> stretches GeoRaster objects in any supported cell depth (1BIT to 64BIT_REAL) to cell depth of 8BIT_U for display purposes.
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR_IP-reference-ref.html#GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3">SDO_GEOR_IP.piecewiseStretch</a> stretches GeoRaster objects of any supported cell depth to the GeoRaster objects in higher or lower cell depth, not limited to 8BIT_U.
                        </p>
                     </li>
                  </ul>
                  <p>Image <span class="bold">normalization</span> linearly stretches the image based on the statistics (mean and standard deviation) of the image cell values. To perform image normalization, use the <a href="SDO_GEOR_IP-reference-ref.html#GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77">SDO_GEOR_IP.normalize</a>.
                  </p>
                  <p>Image <span class="bold">equalization</span> enhances image contrast by equalizaing its histogram. To perform equalization, use the <a href="SDO_GEOR_IP-reference-ref.html#GUID-5E8228CC-DD00-42F4-80A4-458533A998EA">SDO_GEOR_IP.equalize</a> procedure.
                  </p>
                  <p>Image <span class="bold">histogram matching</span> stretches the image to match the specified histogram or the histogram of a reference image. To perform image histogram matching, use the <a href="SDO_GEOR_IP-reference-ref.html#GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA">SDO_GEOR_IP.histogramMatch</a> procedure.
                  </p>
                  <p>Image <span class="bold">dodging</span> balances image color by stretching the contrast of the image locally instead of globally. To perform image dodging, use the <a href="SDO_GEOR_IP-reference-ref.html#GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4">SDO_GEOR_IP.dodge</a> procedure.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-F3C5A387-4E89-4E85-B17D-75FB75917869" name="GUID-F3C5A387-4E89-4E85-B17D-75FB75917869"></a><h3 id="GEORS-GUID-F3C5A387-4E89-4E85-B17D-75FB75917869" class="sect3"><span class="enumeration_section">6.8 </span>Image Filtering
               </h3>
               <div>
                  <p>Image filtering is the process of applying a convolution filter on an image to achieve a specific purpose. For example, applying a low-pass filter on an image can smooth and reduce noise in an image, while applying a high-pass filter on an image can enhance the details of the image or even detect the edges inside the image.</p>
                  <p>The <a href="SDO_GEOR_IP-reference-ref.html#GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E">SDO_GEOR_IP.filter</a> procedure provides standard filters such as low-pass filter (LPF), high-pass filter (HPF), and high-boost filter (HBF). It also allows you to apply customized filters on images.
                  </p>
                  <p>The following example performs image filtering by providing a customized 3-by-3 Laplacian filter on the image for edge detection.</p><pre class="pre codeblock"><code>DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  cropArea sdo_geometry;
BEGIN
  INSERT INTO georaster_table (georid, georaster)
    VALUES (41, sdo_geor.init('RDT_1'))
    RETURNING georaster INTO gr2;

  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  sdo_geor_ip.filter(gr1, 0, cropArea, null, ‘filtertype=CUSTOM, kernelsize=(3,3)’, sdo_number_array(0, 1, 0, 1, -4, 1, 0, 1, 0 ), null, gr2);
  UPDATE georaster_table SET georaster=gr2 WHERE georid=41;
  COMMIT;
END;
/
</code></pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1339"></a><div class="props_rev_3"><a id="GUID-21CA4981-4DFB-4918-BC1F-13803AFEAD28" name="GUID-21CA4981-4DFB-4918-BC1F-13803AFEAD28"></a><h3 id="GEORS-GUID-21CA4981-4DFB-4918-BC1F-13803AFEAD28" class="sect3"><span class="enumeration_section">6.9 </span>Image Segmentation
               </h3>
               <div>
                  <p>Segmentation is a simple type of classification algorithm, and can be useful in classifying certain types of images into larger ground feature categories, such as land, cloud, water, or snow.</p>
                  <p><a id="d24355e1241" class="indexterm-anchor"></a>You can use the <a href="sdo-geor-ra-ref.html#GUID-D9DA6608-7D97-4428-B1B2-002C371846E9">SDO_GEOR_RA.classify</a> procedure to apply thresholding to images. <span class="bold">Thresholding</span> is the simplest segmentation, which classifies an image into two categories by using a single cell value as the threshold. The resulting image has only two values and can be cast into a binary bitmap mask directly in the same process.
                  </p>
                  <p>You can also apply more image segmentation operations using the <a href="sdo-geor-ra-ref.html#GUID-D9DA6608-7D97-4428-B1B2-002C371846E9">SDO_GEOR_RA.classify</a> procedure, by first applying arithmetic operations on multiple bands and then classifying the results into a number of categories.
                  </p>
                  <p>For examples of using the <a href="sdo-geor-ra-ref.html#GUID-D9DA6608-7D97-4428-B1B2-002C371846E9">SDO_GEOR_RA.classify</a> procedure, see <a href="raster-algebra-and-analytics.html#GUID-57DE5ACD-7DE9-4871-9DF0-CC685DF5114E" title="Classification (segmentation) operations can be applied on source GeoRaster objects to generate new objects.">Classification Operations</a>.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1341"></a><a id="GEORS1342"></a><a id="GEORS1340"></a><div class="props_rev_3"><a id="GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77" name="GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77"></a><h3 id="GEORS-GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77" class="sect3"><span class="enumeration_section">6.10 </span>Image Pyramiding: Parallel Generation and Partial Update
               </h3>
               <div>
                  <p>Image pyramiding is one of the most commonly used processes in building large-scale image databases. </p>
                  <p>This topic discusses some related techniques: pyramid generation in parallel, partial updating of pyramids, and batch and concurrent processing.</p>
                  <p>For working more efficiently with pyramids, you can generate pyramids in parallel and perform a partial update of a pyramid. (This section assumes you understand the concepts explained in <a href="georaster-overview-and-concepts.html#GUID-739D74CC-E256-4E89-AB7F-9251054B9E82" title="Pyramids are subobjects of a GeoRaster object that represent the raster image or raster data at differing sizes and degrees of resolution.">Pyramids</a>.)
                  </p>
                  <div class="example" id="GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77__CHDDJJHI">
                     <p class="titleinexample">Example 6-12 Parallel Generation of Pyramids</p>
                     <p>For faster pyramid generation, you can specify the <code class="codeph">parallelParam</code> parameter with the <a href="SDO_GEOR-reference.html#GUID-896CB187-FAC1-4A2C-9921-B98AC4E92F3B">SDO_GEOR.generatePyramid</a> procedure. In <a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77__CHDDJJHI">Example 6-12</a>, the degree of parallelism is set to 4. (The actual performance improvement for pyramid generation depends on the number of CPUs available to Oracle Database.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr sdo_georaster;
BEGIN
 
  SELECT georaster INTO gr 
    FROM georaster_table WHERE georid = 6 FOR UPDATE;
 
  -- Generate pyramids.
  sdo_geor.generatePyramid(gr, 'rLevel=5, resampling=NN', null, <span class="bold">'parallel=4'</span>);
 
  -- Update the original GeoRaster object.
  UPDATE georaster_table SET georaster = gr WHERE georid = 6;
 
  COMMIT;
END;
/
</pre><p>To enable parallel processing of the pyramid generation, <a href="SDO_GEOR-reference.html#GUID-896CB187-FAC1-4A2C-9921-B98AC4E92F3B">SDO_GEOR.generatePyramid</a> performs an implicit commit operation. If an error during the call, the GeoRaster object may in an invalid state. If this occurs, use <a href="SDO_GEOR-reference.html#GUID-351B293B-CE47-45E0-92F0-DC7A52D84FDF">SDO_GEOR.deletePyramid</a> to remove the newly generated and upper pyramid levels of the GeoRaster object.
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77__CHDIABFI">
                     <p class="titleinexample">Example 6-13 Partial Updating of Pyramids</p>
                     <p>You can partially update pyramids by using the <a href="SDO_GEOR-reference.html#GUID-ED3D72BF-B5C4-46B1-832C-287BF7696B3E">SDO_GEOR.updateRaster</a> procedure. In <a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77__CHDIABFI">Example 6-13</a>, the target GeoRaster object at a specified area (<code class="codeph">targetArea</code> is specified as <code class="codeph">area</code>) is updated by another GeoRaster object. The <code class="codeph">updateUpperPyramids</code> parameter is set to <code class="codeph">true</code>, so the upper pyramids of the target GeoRaster object are only partially updated at the specified area. In other words, the upper pyramid levels are not regenerated in full, but only the cells in that targetArea are regenerated, and thus performance is improved.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  area sdo_number_array := sdo_number_array(-200,-50,201,162);
BEGIN
  SELECT georaster INTO gr2 FROM georaster_table WHERE georid=0 FOR UPDATE;
  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=1;
  SDO_GEOR.updateRaster(gr2, 0, null, <span class="bold">area</span>, gr1, 0, null, <span class="bold">'true'</span>);
  UPDATE GEORASTER_TABLE SET georaster=gr2 WHERE georid=0;
  COMMIT;
END;
/
</pre><p>Other techniques to speed up and automate the pyramiding process include batch processing and concurrent processing can be used. To batch pyramid many images in a certain area, see the example in <a href="georaster-data-manipulation.html#GUID-13578486-979A-410B-94BB-863DBB4AA7E2">Querying and Searching GeoRaster Objects</a>. To process many batches concurrently, you can start different database sessions
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1344"></a><a id="GEORS1343"></a><div class="props_rev_3"><a id="GUID-60EC1E32-9E68-4E4D-8FFE-54A8A19A07EE" name="GUID-60EC1E32-9E68-4E4D-8FFE-54A8A19A07EE"></a><h3 id="GEORS-GUID-60EC1E32-9E68-4E4D-8FFE-54A8A19A07EE" class="sect3"><span class="enumeration_section">6.11 </span>Bitmap Pyramiding
               </h3>
               <div>
                  <p>Bitmap pyramiding can produce high-quality pyramids in certain cases where traditional pyramiding is not adequate.</p>
                  <p>For most raster data types, image pyramiding as described in <a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77" title="Image pyramiding is one of the most commonly used processes in building large-scale image databases.">Image Pyramiding: Parallel Generation and Partial Update</a> results in pyramids of great quality. However, for bitmap rasters of points, lines, or polylines, which are typically stored in 1-bit cell depth, the same pyramiding approach may not create high-quality pyramids. Distorted point patterns and dashed lines are commonly seen in those pyramids. 
                  </p>
                  <p>To solve such problems, you can use the <a href="SDO_GEOR-reference.html#GUID-78D4949A-D751-43F9-8066-C479980C8FB8">SDO_GEOR.generateBitmapPyramid</a> procedure, instead of <a href="SDO_GEOR-reference.html#GUID-896CB187-FAC1-4A2C-9921-B98AC4E92F3B">SDOGEOR.generatePyramid</a>, to perform pyramiding on bitmap GeoRaster objects. The <a href="SDO_GEOR-reference.html#GUID-78D4949A-D751-43F9-8066-C479980C8FB8">SDO_GEOR.generateBitmapPyramid</a>  procedure significantly improves the pyramid quality by avoiding distorted patterns, particularly dashed lines or missing lines in a bitmap raster, such as a road raster map or utility network raster map.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1346"></a><a id="GEORS1345"></a><div class="props_rev_3"><a id="GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355" name="GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355"></a><h3 id="GEORS-GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355" class="sect3"><span class="enumeration_section">6.12 </span>Vegetation Index Computation
               </h3>
               <div>
                  <p>In remote sensing, the Normalized Difference Vegetation Index (NDVI) is a widely used vegetation index, enabling users to quickly identify vegetated areas and monitor the growth and "condition" of plants.</p>
                  <p>Using Landsat TM imagery, the standard NDVI computation formula is: (TM4 - TM3) / (TM4 + TM3).</p>
                  <div class="example" id="GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355__CHDICBDG">
                     <p class="titleinexample">Example 6-14 Vegetation Index Computation</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355__CHDICBDG">Example 6-14</a>takes a Landsat 7 ETM+ image and computes the NDVI with parallelism.  The result is stored as another raster of floating number data type. Note that in the GeoRaster algebra language, band numbering starts with 0, so the formula translates into the expression: ({3}-{2})/({3}+{2}).
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE 
  geor1    SDO_GEORASTER; 
  geor2    SDO_GEORASTER; 
EBGIN
  -- Source ETM+ image
  select georaster into geor1 from georaster_table where georid = 2; 
  -- Store NDVI 
  select georaster into geor2 from georaster_table where georid = 3 for update; 
  sdo_geor_ra.rasterMathOp(geor1,
       SDO_STRING2_ARRAY('({3}-{2})/({3}+{2})'),
       'celldepth=32bit_real',geor2, null, null, ‘parallel=4’);
  update georaster_table set georaster = geor2 where georid = 3;
  commit;
end;
/
</pre><p>In addition to NDVI, there are many other vegetation indexes in the area of remote sensing. Many of these can be similarly computed using the GeoRaster raster algebra.</p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1348"></a><a id="GEORS1347"></a><div class="props_rev_3"><a id="GUID-2530F5D2-7386-4DD4-877A-F004F2109912" name="GUID-2530F5D2-7386-4DD4-877A-F004F2109912"></a><h3 id="GEORS-GUID-2530F5D2-7386-4DD4-877A-F004F2109912" class="sect3"><span class="enumeration_section">6.13 </span>Tasseled Cap Transformation
               </h3>
               <div>
                  <p>Tasseled Cap Transformation (TCT) is a useful tool for analyzing physical ground features using remotely sensed imagery.</p>
                  <p>With various Landsat imagery, it uses 5 bands of either original digital number (DN) or reflectance data to generate 6 new bands, each of which represents different ground features. The 6 resulting bands are generally called (soil) brightness, (vegetation) greenness, (soil and canopy) wetness, haze, TC5, and TC6. Each one or a combination of them is useful for different applications, such as crop growth monitoring and analysis, biomass study, and agriculture planning.</p>
                  <div class="example" id="GUID-2530F5D2-7386-4DD4-877A-F004F2109912__CHDGFEHH">
                     <p class="titleinexample">Example 6-15 Tasseled Cap Transformation</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-2530F5D2-7386-4DD4-877A-F004F2109912__CHDGFEHH">Example 6-15</a> takes the DN data of a Landsat 5 TM image as input, executes the TCT using the GeoRaster raster algebra with parallelism, and creates a new image holding the results.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
    gr1 sdo_georaster;
    gr2 sdo_georaster;
    ret varchar2(32);
BEGIN
    select georaster into gr1 from georaster_table where georid = 2;
    select georaster into gr2 from georaster_table where georid = 4 for update;
    sdo_geor_ra.rasterMathOp(
      gr1,
      SDO_STRING2_ARRAY(
         '0.3561*{0}+0.3972*{1}+0.3904*{2}+0.6966*{3}+0.2286*{4}+0.1596*{6}',
         '(-0.3344)*{0}-0.3544*{1}-0.4556*{2}+0.6966*{3}-0.0242*{4}-0.2630*{6}',
         '0.2626*{0}+0.2141*{1}+0.0926*{2}+0.0656*{3}-0.7629*{4}-0.5388*{6}',
         '0.0805*{0}-0.0498*{1}+0.1950*{2}-0.1327*{3}+0.5752*{4}-0.7775*{6}',
         '(-0.7252)*{0}-0.0202*{1}+0.6683*{2}+0.0631*{3}-0.1494*{4}-0.0274*{6}',
         '0.4000*{0}-0.8172*{1}+0.3832*{2}+0.0602*{3}-0.1095*{4}+0.0985*{6}' ),
      'celldepth=32BIT_REAL',
      gr2, null, null, ‘parallel=4’); 
    update georaster_table set georaster = gr2 where georid = 4;
    commit;
END;
/
</pre><p>You can also use the same raster algebra language to add code in <a href="image-processing-virtual-mosaic.html#GUID-2530F5D2-7386-4DD4-877A-F004F2109912__CHDGFEHH">Example 6-15</a> to convert the 32-bit floating number image into an 8-bit integer image and to apply image stretching (described in <a href="image-processing-virtual-mosaic.html#GUID-1BFCB081-6C19-4727-B07E-1127515D75CD" title="The color and contrast of images can be enhanced to improve their visual quality. The SDO_GEOR_IP package (“IP” for image processing) provides a set of subprograms for image enhancement, including performing image stretching, image normalization, image equalization, histogram matching, and image dodging.">Image Stretching</a>) on the resulting TCT image to generate a new GeoRaster object for visualization and analysis.
                     </p>
                     <p>In addition to using the optimized implementation of raster algebra algorithms and the embedded parallel processing, you can further take advantage of the Oracle grid computing infrastructure to quickly compute NDVI or apply TCT on thousands of images stored in the GeoRaster database.</p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1349"></a><div class="props_rev_3"><a id="GUID-846AEB51-5BCC-48D6-8B27-8F846F38CC15" name="GUID-846AEB51-5BCC-48D6-8B27-8F846F38CC15"></a><h3 id="GEORS-GUID-846AEB51-5BCC-48D6-8B27-8F846F38CC15" class="sect3"><span class="enumeration_section">6.14 </span>Image Masking
               </h3>
               <div>
                  <p>To perform image masking, an application can query the GeoRaster database for bitmap masks, retrieve the desired bitmap mask or masks, and apply the masking operation on the target GeoRaster object for the purpose of displaying the object or performing some other processing.</p>
                  <p>A bitmap mask (described in <a href="georaster-overview-and-concepts.html#GUID-20696505-9B9E-4E08-B165-1B23A574BEB3" title="A bitmap mask is a special one-bit deep rectangular raster grid with each pixel having either the value of 0 or 1. It is used to define an irregularly shaped region inside another image. The 1-bits define the interior of the region, and the 0-bits define the exterior of the region.">Bitmap Masks</a>) can be stored as an independent GeoRaster object; it can also be stored as metadata inside a GeoRaster object and be associated with a single band or with the whole GeoRaster object.
                  </p>
                  <p>You can also perform masking operations inside the database to generate new GeoRaster objects, using the <a href="SDO_GEOR-reference.html#GUID-A1FF83F0-481F-436C-BA4A-5C0490A4A7ED">SDO_GEOR.mask</a> procedure.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1351"></a><a id="GEORS1350"></a><div class="props_rev_3"><a id="GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807" name="GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807"></a><h3 id="GEORS-GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807" class="sect3"><span class="enumeration_section">6.15 </span>Band Merging
               </h3>
               <div>
                  <p>For image classification, time series analysis, and raster GIS modeling, multiple bands or layers of different GeoRaster objects may need to be merged into a single GeoRaster object.</p>
                  <p>This operation is called band or layer merging in GeoRaster, and can be performed by using the <a href="SDO_GEOR-reference.html#GUID-859F107A-4D75-4C36-B9FC-690FA202789C">SDO_GEOR.mergeLayers</a> procedure or the <a href="sdo-geor-ra-ref.html#GUID-BB7A762E-E615-43AD-9D74-5E917D29F333">SDO_GEOR_RA.rasterMathOp</a> procedure. You can either append specified bands of a source GeoRaster object to a target GeoRaster object or merge different bands from two GeoRaster objects into a new GeoRaster object. By doing this merging or appending iteratively, you can merge an unlimited number of bands into a single GeoRaster object.
                  </p>
                  <div class="example" id="GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807__CHDFDJDE">
                     <p class="titleinexample">Example 6-16 Band Merging</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807__CHDFDJDE">Example 6-16</a> includes two examples. The first example assumes there are eight GeoRaster objects, each of which contains <span class="italic">only one</span> band loaded from a single-band Landsat ETM+ image file in GeoTIFF format. The number of the band in each GeoRaster object is the same as the GEORID column value for the GeoRaster object. The example merges all bands into a single GeoRaster object to create a complete ETM+ scene.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
    gr1 sdo_georaster;
BEGIN
    select georaster into gr1 from georaster_table where georid = 1 for update;
    for rec in (select georaster from georaster_table 
                     where georid &gt;= 2 and georid &lt;= 8 
                     order by georid)
    loop
       <span class="bold">sdo_geor.mergelayers(gr1, rec.georaster)</span>;
    end loop;
    update georaster_table set georaster = gr1 where georid = 1;
    commit;
END;
/</pre><p>The second example assumes there are eight GeoRaster objects, each of which contains <span class="italic">three</span> bands.  The example picks up one band from each GeoRaster object and merges them into a single 8-band GeoRaster object in parallel.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  geor       SDO_GEORASTER;
  geo_array  SDO_GEORASTER_ARRAY;
BEGIN
  SELECT georaster INTO geor FROM georaster_table WHERE georid = 0 for update;
  geo_array:=SDO_GEORASTER_ARRAY();
  for rec in (select georaster from georaster_table 
                     where georid &gt;= 1 and georid &lt;= 8 
                     order by georid)
  loop
     geo_array.extend(1);
     geo_array(geo_array.last):=rec.georaster;
  end loop;
  sdo_geor_ra.rasterMathOp(geo_array,SDO_STRING2_ARRAY('{0,0}','{1,1}','{2,2}','{3,0}','{4,1}','{5,2}','{6,0}','{7,1}',),null,geor,'false',null,'parallel=4');
  UPDATE georaster_table SET georaster = geor WHERE georid = 0;
  COMMIT;
END;
/</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1353"></a><a id="GEORS1352"></a><div class="props_rev_3"><a id="GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156" name="GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156"></a><h3 id="GEORS-GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156" class="sect3"><span class="enumeration_section">6.16 </span>Image Appending
               </h3>
               <div>
                  <p>You can append one image to another image when the two images have the same number of bands.</p>
                  <p>Image appending is useful when the geospatial images are collected at intervals and the captured image later needs to be appended to the existing image to make a large image of the whole spatial area. Image appending is also useful for updating the existing image with a new image.</p>
                  <p>The <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-D47B17BE-79C2-4610-B75A-D03182FD40FB">SDO_GEOR_AGGR.append</a> procedure implements image appending by partially updating the existing GeoRaster object with another GeoRaster object. If the existing GeoRaster object contains pyramids, the pyramids with blocking are partially updated with the new data.
                  </p>
                  <p><a href="image-processing-virtual-mosaic.html#GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156__CHDFIAID">Example 6-17</a> appends one image to another, with pyramids with blocking are updated at the same time. Because the <code class="codeph">appendParam</code> parameter specifies <code class="codeph">'nodata=true'</code>, the NODATA values in the overlapping area are considered transparent.
                  </p>
                  <div class="example" id="GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156__CHDFIAID">
                     <p class="titleinexample">Example 6-17 Appending One Image to Another Image</p><pre class="oac_no_warn" dir="ltr">DECLARE
    gr1 sdo_georaster;
    gr1 sdo_georaster;
BEGIN
     select georaster into gr1 from georaster_table where georid = 1 for update;
     select georaster into gr2 from georaster_table where georid = 2;
     <span class="bold">sdo_geor_aggr.append(gr1, gr2, 0, 'nodata=true')</span>;
     update georaster_table set georaster = gr1 where georid= 1;
     commit;
END;
/</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1355"></a><a id="GEORS1357"></a><a id="GEORS1354"></a><div class="props_rev_3"><a id="GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" name="GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA"></a><h3 id="GEORS-GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" class="sect3"><span class="enumeration_section">6.17 </span>Large-Scale Image Mosaicking
               </h3>
               <div>
                  <p>A large geospatial area typically consists of many smaller aerial photographs or satellite images. Large-scale image mosaicking can stitch these small geospatial images into one large image to get a better view of the whole spatial area.</p>
                  <p>GeoRaster provides large-scale mosaicking functions that allow gaps, overlaps, and missing source GeoRaster objects. It supports both rectified and unrectified images. It supports internal reprojection and rectification, common point rules, and simple color balancing. You can also mosaic at a certain pyramid level. This mosaicking process results in a single GeoRaster object, which is also called a <span class="bold">physical mosaic</span> as opposed to <span class="italic">virtual mosaic</span> (For information about virtual mosaic, see <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="A virtual mosaic treats a set of GeoRaster images as one large virtually mosaicked image.">Virtual Mosaic</a>).
                  </p>
                  <p>The <a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">SDO_GEOR.mosaic</a> and <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedures provide support for image mosaicking; however, you are strongly encouraged to use <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> because it provides much more advanced features and options, and it is also implemented with parallelism. <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> can take a virtual mosaic, such as a list of GeoRaster tables, a database view with a GeoRaster column, or a REF CURSOR, as the source images.
                  </p>
                  <p>The <a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">SDO_GEOR.mosaic</a> procedure mosaics a set of source GeoRaster images that are rectified, are geospatially aligned under the same SRID, and have the same resolution. The result of the mosaic is another GeoRaster object. If there are overlaps between the source images, the mosaic result will have the last source image's content at the overlapping area. This procedure works well for preprocessed and perfectly aligned source images.
                  </p>
                  <p>In the examples in this section, the source images are stored in source GeoRaster tables GRTAB, GRTAB1, and GRTAB2, which are defined with the following columns: </p><pre class="oac_no_warn" dir="ltr">  (id          NUMBER PRIMARY KEY,
  cloud_cover  NUMBER     -- percentage of cloud coverage 
  last_update  TIMESTAMP  -- GeoRaster object's last update time
  grobj        SDO_GEORASTER )
</pre><p>Oracle Spatial and Graph spatial indexes have been created on the <code class="codeph">spatialExtent</code> attribute of the GeoRaster object in these tables.
                  </p>
                  <p>In these examples, the mosaicked image is stored in GEORASTER_TABLE, which is defined in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>. 
                  </p>
                  <div class="example" id="GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDBHAHJ">
                     <p class="titleinexample">Example 6-18 SDO_GEOR.mosaic (Table and Column Name)</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDBHAHJ">Example 6-18</a> shows the <a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">SDO_GEOR.mosaic</a> procedure.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr sdo_georaster;
BEGIN
  INSERT INTO georaster_table (georid, georaster) 
      VALUES (12, sdo_geor.init('rdt_1'))
      RETURNING georaster INTO gr;
  <span class="bold">sdo_geor.mosaic('grtab', 'grobj', gr, 'blocking=optimalpadding blocksize=(512,512,1)')</span>;
  UPDATE georaster_table SET georaster=gr WHERE id=12;
END;
/
</pre><p>In the real world, however, the source images are often collected under different circumstances so as to have different resolutions or large areas of overlap, or using a different georeference system. In such cases, you can use the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedure to mosaic these source images into one uniform mosaicked image. Compared to <a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">SDO_GEOR.mosaic</a>, the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedure provides more features and options: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The source images do not have to be in the same coordinate system (SRID) and have the same georeferencing information or resolutions.</p>
                        </li>
                        <li>
                           <p>The source images can be mosaicked on a user-specified pyramid level.</p>
                        </li>
                        <li>
                           <p>The source images can be mosaicked on user-specified bands.</p>
                        </li>
                        <li>
                           <p>The output images can have a different coordinate system and resolution than the input images (<code class="codeph">outSRID</code> and <code class="codeph">outResolutions</code> parameters).
                           </p>
                        </li>
                        <li>
                           <p>You have more control on the output of the overlapping area through the <code class="codeph">mosaicParam</code> parameter: <code class="codeph">commonPointRule</code> can specify which cell value to use for the output at the overlapping area, and <code class="codeph">NODATA</code> can indicate whether to consider the NODATA value at the overlapping area.
                           </p>
                        </li>
                        <li>
                           <p>The output mosaicked image can be aligned at a specified point (the reference point). The source image can be resampled in order to align with the reference point if the source image is out of alignment more than the <code class="codeph">resampleTolerance</code> value specified in <code class="codeph">mosaicParam</code>.
                           </p>
                        </li>
                        <li>
                           <p>If there is small gap between the source images that is less than 2 pixels wide, it can be filled using the neighboring pixel values when <code class="codeph">fillGap</code> is <code class="codeph">true</code> in <code class="codeph">mosaicParam</code>.
                           </p>
                        </li>
                        <li>
                           <p>Limited color balancing (linear stretching and normalization) is supported.</p>
                        </li>
                        <li>
                           <p>Parallel processing is supported to speed up the mosaicking process.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDCDABA">
                     <p class="titleinexample">Example 6-19 SDO_GEOR_AGGR.mosaicSubset</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDCDABA">Example 6-19</a> uses <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> to mosaic all the source images from two GeoRaster tables (GRTAB1 and GRTAB2) into a large mosaicked image in SRID 4326 with a resolution of 30 meters on the x and y dimensions.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  resolutions sdo_number_array;
  gr sdo_georaster;
BEGIN
    insert into georaster_table (georid, georaster)
        values (10, sdo_geor.init('RDT_1',10))
         returning georaster into gr;
 
    <span class="bold">resolutions := sdo_number_array(30, 30)</span>;
    <span class="bold">sdo_geor_aggr.mosaicSubset('grtab1, grtab2', 'grobj, grobj',</span>
                               <span class="bold">0, 4326, null, null, null,</span>
                               <span class="bold">null, null, null, resolutions, 'unit=meter',</span>
                               <span class="bold">'commonPointRule = end, nodata=true, resampleTolerance=0.2, resampling=bilinear, fillGap=true',</span>
                               <span class="bold">'blocking=optimalpadding blocksize=(512, 512, 3)', gr, null, 'parallel=4')</span>;
 
      update georaster_table set georaster = gr where georid=10;
      commit;                                                              
END;
/
</pre><p>In <a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDCDABA">Example 6-19</a>:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Any source image that is not rectified is rectified; any source image that is not in SRID 4326 is reprojected to SRID 4326.</p>
                        </li>
                        <li>
                           <p>Any source image that has a resolution other than 30 meters is scaled to a resolution of 30 meters.</p>
                        </li>
                        <li>
                           <p>The <code class="codeph">nodata</code> keyword in the <code class="codeph">mosaicParam</code> parameter is specified as <code class="codeph">true</code>, which means the NODATA values in the overlapping area are not considered.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">resampleTolerance</code> keyword in the <code class="codeph">mosaicParam</code> parameter is specified as 0.2, which means that if the source image is offset from the target by more than 0.2 pixel, the source image is resampled.
                           </p>
                        </li>
                        <li>
                           <p>The resampling method is specified as <code class="codeph">bilinear</code> in the <code class="codeph">mosaicParam</code> parameter.
                           </p>
                        </li>
                        <li>
                           <p>The degree of parallelism is specified as 4 in the <code class="codeph">parallelParam</code> parameter.
                           </p>
                        </li>
                     </ul>
                     <p>You can call <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-517B4271-BF48-45C3-B989-88EE40CF780A">SDO_GEOR_AGGR.validateForMosaicSubset</a> before calling <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a> to make sure that the source images can be mosaicked.
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19">Color Balancing During Mosaicking</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176">Parallel Compression, Copying, and Subsetting</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19" name="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19"></a><h4 id="GEORS-GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19" class="sect4"><span class="enumeration_section">6.17.1 </span>Color Balancing During Mosaicking
                  </h4>
                  <div>
                     <p>The source images of the mosaicking operation can have different luminance or colors due to the differences in the lighting conditions, time of day, or other factors when the images were captured. Color balancing minimizes the color differences between the neighboring images and makes the resulting mosaic look more seamless.</p>
                     <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> and <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a> provide some basic color balancing methods during the mosaicking process. Several color balancing methods are provided. They are identified by the keyword <code class="codeph">colorbalance</code> in the <code class="codeph">mosaicParam</code> parameter:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">LINEARSTRETCHING</code>: Perform the min-max stretch on each band of the source images to a reference minimum and maximum range. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">STATISTICSMATCHING</code>: Perform the image stretching so that the mean and standard deviation of each band of the source images is stretched and matched to the reference mean and standard deviation values. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">HISTOGRAMMATCHING</code>: Perform the image stretching so that the histograms of the resulting images match the reference histograms.
                           </p>
                        </li>
                     </ul>
                     <p>There are several ways to specify the reference values for the color balancing methods. They are identified by the keyword <code class="codeph">cbreference</code> in the <code class="codeph">mosaicParam</code> parameter:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>VALUE: The reference values are provided through <code class="codeph">referenceValue1</code>, <code class="codeph">referenceValue2</code>, or <code class="codeph">refHistograms</code> parameters directly. 
                           </p>
                        </li>
                        <li>
                           <p>IMAGE: The reference values are derived from the image specified by the <code class="codeph">referenceImage</code> parameter. The reference image must have the same number of bands as the source image.
                           </p>
                        </li>
                        <li>
                           <p>OVERLAP: The reference values are determined by the neighboring image through the overlapped area with the neighboring image. This option requires the source images have large enough overlaps so that the reference values can be derived from the overlapped area. Note that because linear stretching method does not provide a good result for this option, overlapped area reference is not supported for the linear stretching method.</p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19__GUID-B8853B44-D4B7-4EB5-B2CB-C8C646CE6E18">
                        <p class="titleinexample">Example 6-20 LINEARSTRETCHING Color Balancing</p>
                        <p>This example shows how to use the <code class="codeph">LINEARSTRETCHING</code> color balancing method on the source images in the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedure. The reference minimum and maximum values are specified in the <code class="codeph">referenceValue1</code> and <code class="codeph">referenceValue2</code> parameters. In the example, each band has different reference value.
                        </p><pre class="pre codeblock"><code>DECLARE
gr sdo_georaster;
resolutions  sdo_number_array;
ref_min    sdo_number_arrray;
ref_max   sdo_number_array;
BEGIN
    -- create the new GeoRaster object for mosaic
    insert into georaster_table (georid, georaster)
        values (10, sdo_geor.init('RDT_1',10))
         returning georaster into gr;
    
    -- set the output resolution
     resolutions := sdo_number_array(30, 30);


    -- Set the reference values, there are 3 values, one for each band
    ref_min := sdo_number_array(10, 10, 10);
    ref_max := sdo_number_array(200, 255, 230);

    -- Mosaic
    sdo_geor_aggr.MosaicSubset('georaster_table_1', 
                   'georaster', null, 32610, null, null, null, null,
                    null, null, null, resolutions, null, 
                   <span class="bold">'colorBalance=linearstretching, cbreference=value',</span> 
                   'blocking=optimalpadding, blocksize=(512,512,3)', 
                    gr, null, 'parallel=4', referenceValue1=&gt;ref_min,
                    <span class="bold">referenceValue2=&gt;ref_max</span>);
 
     update georaster_table set georaster = gr where georid=10;
     commit;                                                              
END;
/
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19__GUID-A558E3FE-4B69-4938-884C-2E3A2AD9F860">
                        <p class="titleinexample">Example 6-21 HISTOGRAMMATCHING Color Balancing</p>
                        <p>This example shows how to use the HISTOGRAMMATCHING color balancing method on the source images in the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedure. The reference histograms are derived from the reference image. The reference image must have the same number of bands as the source images.
                        </p><pre class="pre codeblock"><code>DECLARE
gr sdo_georaster;
resolutions  sdo_number_array;
ref_gr    sdo_georaster;
BEGIN
    -- create the new GeoRaster object for mosaic
    insert into georaster_table (georid, georaster)
        values (10, sdo_geor.init('RDT_1',10))
         returning georaster into gr;
    
    -- set the output resolution
    resolutions := sdo_number_array(30, 30);

-- retrieve the reference image 
Select georaster into ref_gr from georaster_table where georid = 1;

    -- Mosaic
    sdo_geor_aggr.MosaicSubset('georaster_table_1', 
                   'georaster', null, 32610, null, null, null, null,
                    null, null, null, resolutions, null, 
                   <span class="bold">'colorBalance=histogramMatching, cbreference=image',</span> 
                   'blocking=optimalpadding, blocksize=(512,512,3)', 
                    gr, null, 'parallel=4', <span class="bold">refereneImage=&gt;ref_gr</span>);
 
     update georaster_table set georaster = gr where georid=10;
     commit;                                                              
END;
/
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19__GUID-5E444286-C9D1-4564-AC09-18A66329F027">
                        <p class="titleinexample">Example 6-22 STATISTICSMATCHING Color Balancing</p>
                        <p>This example shows how to use the <code class="codeph">STATISTICSMATCHING</code> color balancing method on the source images in the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>procedure. The reference statistics values are calculated from the overlapped area of the neighboring images. This requires that the source images have significant overlaps so that the statistics of the overlapped area can reflect the color difference between neighboring images.
                        </p><pre class="pre codeblock"><code>DECLARE
gr sdo_georaster;
resolutions  sdo_number_array;
BEGIN
    -- create the new GeoRaster object for mosaic
    insert into georaster_table (georid, georaster)
        values (10, sdo_geor.init('RDT_1',10))
         returning georaster into gr;
    
    -- set the output resolution
    resolutions := sdo_number_array(30, 30);

    -- Mosaic
    sdo_geor_aggr.MosaicSubset('georaster_table_1', 
                   'georaster', null, 32610, null, null, null, null,
                    null, null, null, resolutions, null, 
                   <span class="bold">'colorBalance=statisticsMatching, cbreference=overlap',</span> 
                   'blocking=optimalpadding, blocksize=(512,512,3)', 
                    gr, null, 'parallel=4');
 
     update georaster_table set georaster = gr where georid=10;
     commit;                                                              
END;
/
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" title="A large geospatial area typically consists of many smaller aerial photographs or satellite images. Large-scale image mosaicking can stitch these small geospatial images into one large image to get a better view of the whole spatial area.">Large-Scale Image Mosaicking</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1388"></a><a id="GEORS1389"></a><a id="GEORS1390"></a><a id="GEORS1380"></a><div class="props_rev_3"><a id="GUID-8BA68795-65F7-40A6-AD9C-8E774B527176" name="GUID-8BA68795-65F7-40A6-AD9C-8E774B527176"></a><h4 id="GEORS-GUID-8BA68795-65F7-40A6-AD9C-8E774B527176" class="sect4"><span class="enumeration_section">6.17.2 </span>Parallel Compression, Copying, and Subsetting
                  </h4>
                  <div>
                     <p>To parallelize rectification, orthorectification and reprojecting, use <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>. To parallelize warping, call <a href="SDO_GEOR-reference.html#GUID-1B480F30-85C6-4F02-BC5E-142A872BEF64">SDO_GEOR.warp</a>. All raster algebra operations are parallelized too.
                     </p>
                     <p>You can use the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedure to conduct several types of parallel operations, including parallel compression and decompression, parallel copying or change format copying, parallel subsetting, parallel reprojection, and parallel rectification. The copying and subsetting operations are not parallelized directly. For JPEG and DEFLATE, the <a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a> procedure can be called to do parallel compression and decompression if reformatting is not required. This topic gives some examples for parallelized compressing, copying, and subsetting operations. In all these cases, the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedure works on single GeoRaster objects.
                     </p>
                     <p>To illustrate the parallelized operations, the examples in this section use a null value for most parameters. In your applications, you can apply all other parameters of the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedure; however, the <code class="codeph">mosaicParam</code> parameter has no effect when the input is a single GeoRaster object.
                     </p>
                     <div class="example" id="GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDEDHCE">
                        <p class="titleinexample">Example 6-23 Parallel Compression</p>
                        <p><a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDEDHCE">Example 6-23</a> shows parallel compression using the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedure. This applies to both DEFLATE and JPEG compression and decompression.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr sdo_georaster;
  cur sys_refcursor;
  crop_area sdo_geometry := null;
BEGIN
  -- create a new georaster object with georid = 2 
  -- to hold the compressed image
  delete from georaster_table where georid = 2;
  insert into georaster_table(georid, georaster) values (2, 
     sdo_geor.init('RDT2', 2)) returning georaster into gr;
 
  
  -- reblock and compress the image with georid = 1 into JPEG using parallel degree of 8 
  open cur for 'select georaster from georaster_table where georid = 1';
  sdo_geor_aggr.mosaicSubset(cur, 0, null, null, null, crop_area, 
                             null, null, null, null, null, null,
                             'compression=JPEG-F, blocking=optimalpadding, blocksize=(512,512,3)',
                             gr, null, 'parallel=8');
 
  update georaster_table set georaster = gr where georid = 2;
  commit;
END;
/
</pre><p>In the preceding example, if you adjust the storageParam parameter, it works as a parallelized <a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a> operation, including compression and decompression.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDIAIBB">
                        <p class="titleinexample">Example 6-24 Parallel Subsetting and Copying</p>
                        <p><a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDIAIBB">Example 6-24</a> shows parallel subsetting and copying using the<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedure.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr sdo_georaster;
  cur sys_refcursor;
  crop_area sdo_geometry := null;
BEGIN
  -- create a new georaster object with georid = 2 to hold the copy
  delete from georaster_table where georid = 2;
  insert into georaster_table(georid, georaster) values (2, 
     sdo_geor.init('RDT2', 2)) returning georaster into gr;
 

  -- set the crop_area for subsetting. 
  crop_area := sdo_geometry(2003, 26986, null, sdo_elem_info_array(1,1003,1),
                sdo_ordinate_array(237040,   897924, 
                                   237013.3, 897831.6,
                                   237129,   897840,
                                   237182.5, 897785.5, 
                                   237239.9, 897902.7,
                                   237223,   897954,
                                   237133,   897899,
                                   237040,   897924));

  -- subset from the image with georid = 1 using parallel degree of 8 
  -- and do polygon clipping
  -- If the crop_area is set to null, the same call will do a simple parallelized copying without subsetting. 
  open cur for 'select georaster from georaster_table where georid = 1';
  sdo_geor_aggr.mosaicSubset(cur, 0, null, null, null, crop_area,
                             'true', null, null, null, null, null,
                             'pyramid=true', gr, null, 'parallel=8');
  update georaster_table set georaster = gr where georid = 2;
  commit;
END;
/
</pre><p>In <a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDIAIBB">Example 6-24</a>, if you adjust the <code class="codeph">storageParam</code> parameter, it works as a parallelized copy or <a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a> operation, including compression and decompression.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" title="A large geospatial area typically consists of many smaller aerial photographs or satellite images. Large-scale image mosaicking can stitch these small geospatial images into one large image to get a better view of the whole spatial area.">Large-Scale Image Mosaicking</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS1358"></a><div class="props_rev_3"><a id="GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" name="GUID-16C91449-1E94-4B3F-9403-EEFE483251AD"></a><h3 id="GEORS-GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" class="sect3"><span class="enumeration_section">6.18 </span>Virtual Mosaic
               </h3>
               <div>
                  <p>A virtual mosaic treats a set of GeoRaster images as one large virtually mosaicked image.</p>
                  <p>For some applications, mosaicking a collection of images into a single physical mosaic is not necessary or desirable. For example, you might not have enough disk space for storing the mosaic separately or you simply want to save disk space. Another example is if you do not want to keep two identical copies of the same data set but prefer to have the original data set stored as is, such as a DEM data set, yet you want to query over this data set seamlessly. Yet another example is if you want to apply different processing and mosaicking rules for the same region when mosaicking the source images -- a physical mosaic has no such flexibility.</p>
                  <p>In such cases, instead of mosaicking a set of GeoRaster images into one large GeoRaster image and storing it in a GeoRaster table, you can create a virtual mosaic. A virtual mosaic treats a set of GeoRaster images as one large virtually mosaicked image, without storing it in a GeoRaster table.</p>
                  <p>In GeoRaster, a <span class="bold">virtual mosaic</span> is defined as any large collection of georeferenced GeoRaster objects, rectified or unrectified, from one or more GeoRaster tables or views that is treated as if it is a single GeoRaster object. Pyramids of virtual mosaic are supported. A virtual mosaic can contain unlimited number of images, and a whole GeoRaster database can be treated as a virtual mosaic. You issue a single call to query the virtual mosaic based on area-of-interest (that is, subsetting or cropping), and you can request the cropped images to be in different coordinate system with different resolutions. On-the-fly transformations with resampling and mosaicking with common point rules, based on user requests, are done internally and automatically during the query processes.
                  </p>
                  <p>The following are ways to define a virtual mosaic:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>As a GeoRaster table or a list of GeoRaster tables (see <a href="image-processing-virtual-mosaic.html#GUID-FF053675-AB0E-47AB-8D33-418B6A153E70">Virtual Mosaic as One or a List of GeoRaster Tables</a>)
                        </p>
                     </li>
                     <li>
                        <p>As a database view with a GeoRaster column (see <a href="image-processing-virtual-mosaic.html#GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3">Virtual Mosaic as a View with a GeoRaster Column</a>)
                        </p>
                     </li>
                     <li>
                        <p>As a SQL query statement (a cursor) that results in a collection of GeoRaster objects (see <a href="image-processing-virtual-mosaic.html#GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA">Virtual Mosaic as a SQL Query Statement or a Cursor</a>)
                        </p>
                     </li>
                  </ul>
                  <p>Regardless of how the virtual mosaic is defined, the GeoRaster objects in the GeoRaster tables must have the <code class="codeph">spatialExtent</code> attribute generated or set; otherwise, the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a> and <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedures return an empty lob locator or empty GeoRaster object. For general use cases and best query performance, you should always create a spatial index beforehand on the <code class="codeph">spatialExtent</code> attribute.
                  </p>
                  <p>After a virtual mosaic is defined, you can use these procedures to query or process it:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a> to perform on-the-fly queries over the virtual mosaic
                        </p>
                        <p>In spatial query of any portion of that virtually mosaicked image, the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a> procedure performs the mosaic operation dynamically for the queried area and returns the required result in a BLOB on-the-fly, as if it were subsetting a physically stored mosaicked image.
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> to store the mosaicked subset in the database as a GeoRaster object
                        </p>
                        <p>The <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> procedure performs the mosaic operation for the queried area and stores the required result in another GeoRaster object persistently
                        </p>
                     </li>
                  </ul>
                  <p>For a typical workflow of using virtual mosaic, see <a href="image-processing-virtual-mosaic.html#GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38">Using Virtual Mosaic in Applications</a>, and <a href="image-processing-virtual-mosaic.html#GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D">Special Considerations for Large-Scale Virtual Mosaic</a> and its related topic <a href="image-processing-virtual-mosaic.html#GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B">Improving Query Performance Using MIN_X_RES$ and MAX_X_RES$</a>.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-FF053675-AB0E-47AB-8D33-418B6A153E70">Virtual Mosaic as One or a List of GeoRaster Tables</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3">Virtual Mosaic as a View with a GeoRaster Column</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA">Virtual Mosaic as a SQL Query Statement or a Cursor</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38">Using Virtual Mosaic in Applications</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D">Special Considerations for Large-Scale Virtual Mosaic</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS1359"></a><a id="GEORS1368"></a><div class="props_rev_3"><a id="GUID-FF053675-AB0E-47AB-8D33-418B6A153E70" name="GUID-FF053675-AB0E-47AB-8D33-418B6A153E70"></a><h4 id="GEORS-GUID-FF053675-AB0E-47AB-8D33-418B6A153E70" class="sect4"><span class="enumeration_section">6.18.1 </span>Virtual Mosaic as One or a List of GeoRaster Tables
                  </h4>
                  <div>
                     <p>A virtual mosaic can be defined as one GeoRaster table or a list of GeoRaster tables. Applications specify each table and its GeoRaster column. In this approach, all GeoRaster objects in the specified GeoRaster columns of those GeoRaster tables are part of the virtual mosaic.</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-FF053675-AB0E-47AB-8D33-418B6A153E70__CHDIFABC">Example 6-25</a> specifies the source images for virtual mosaicking in a list of GeoRaster tables (GRTAB1, GRTAB2, and GRTAB3, which have the same definitions as GRTAB in <a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" title="A large geospatial area typically consists of many smaller aerial photographs or satellite images. Large-scale image mosaicking can stitch these small geospatial images into one large image to get a better view of the whole spatial area.">Large-Scale Image Mosaicking</a>).
                     </p>
                     <div class="example" id="GUID-FF053675-AB0E-47AB-8D33-418B6A153E70__CHDIFABC">
                        <p class="titleinexample">Example 6-25 Virtual Mosaic as a List of GeoRaster Tables</p><pre class="oac_no_warn" dir="ltr">DECLARE
  lb blob;
  cropArea sdo_geometry;
  outArea  sdo_geometry := null;
  outWin   sdo_number_array:=null;
  resolutions sdo_number_array;
BEGIN
    dbms_lob.createTemporary(lb, TRUE);
 
     cropArea :=  sdo_geometry(2003, 32610, null,                 
                    sdo_elem_info_array(1, 1003, 3), 
                    sdo_ordinate_array(399180, 4247820, 
                                       496140,4353900) );
      resolutions := sdo_number_array(30, 30);
     sdo_geor_aggr.getMosaicSubset(<span class="bold">'grtab1, grtab2, grtab3',</span> 
                 <span class="bold">'grobj, grobj, grobj'</span>, 
                 0, 32610, null, null, cropArea,
                 null, null, null, resolutions, null, 
                 'commonPointRule = end, nodata=true', 
                 lb, outArea, outWin);
    dbms_lob.freeTemporary(lb);
    if outWin is not null then
        dbms_output.put_line('output window: (' || outWin(1) || ',' || outWin(2) ||', ' || outWin(3) || ', ' || outWin(4) || ')');
    end if;
END;
/</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="A virtual mosaic treats a set of GeoRaster images as one large virtually mosaicked image.">Virtual Mosaic</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1360"></a><a id="GEORS1369"></a><div class="props_rev_3"><a id="GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3" name="GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3"></a><h4 id="GEORS-GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3" class="sect4"><span class="enumeration_section">6.18.2 </span>Virtual Mosaic as a View with a GeoRaster Column
                  </h4>
                  <div>
                     <p>A virtual mosaic can be defined as one database view with a GeoRaster column. Applications specify the view name and its GeoRaster column. In this approach, all GeoRaster objects in the specified GeoRaster column of the view are part of the virtual mosaic. This approach allows you to select the images for the virtual mosaic in complex ways from any number of GeoRaster tables, taking advantage of the spatial index and any other relevant indexes.</p>
                     <p>You can also define a virtual mosaic as a list combining GeoRaster views and GeoRaster tables.</p>
                     <p>When a virtual mosaic is defined as a database view, the view can be specified in the <code class="codeph">georasterTableNames</code> parameter when you query it. <a href="image-processing-virtual-mosaic.html#GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3__CHDGIHDD">Example 6-26</a> queries the virtual mosaic defined as a view. Note that in this example, the queries sort the images based on their creation time and pick the latest (newest) image for the resulting mosaic in the overlapping areas.
                     </p>
                     <div class="example" id="GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3__CHDGIHDD">
                        <p class="titleinexample">Example 6-26 Using a View on GeoRaster Tables for Virtual Mosaic</p><pre class="oac_no_warn" dir="ltr">Create or replace view grview as select * from (
       Select grobj, last_update from grtab1 where cloud_cover=0 union all
       Select grobj, last_update from grtab2 where cloud_cover=0 union all
       Select grobj, last_update from grtab3 ) order by last_update;

DECLARE
  lb blob;
  cropArea sdo_geometry;
  outArea  sdo_geometry := null;
  outWin   sdo_number_array:=null;
  resolutions sdo_number_array;
BEGIN
    dbms_lob.createTemporary(lb, TRUE);
 
     cropArea :=  sdo_geometry(2003, 32610, null,                 
                    sdo_elem_info_array(1, 1003, 3), 
                    sdo_ordinate_array(399180, 4247820, 
                                       496140,4353900) );
      resolutions := sdo_number_array(30, 30);
     sdo_geor_aggr.getMosaicSubset(<span class="bold">'grview', 'grobj'</span>, 
                 0, 32610, null, null, cropArea,
                 null, null, null, resolutions, null, 
                 'commonPointRule = end, nodata=true', 
                 lb, outArea, outWin);
    dbms_lob.freeTemporary(lb);
    if outWin is not null then
        dbms_output.put_line('output window: (' || outWin(1) || ',' || outWin(2) ||', ' || outWin(3) || ', ' || outWin(4) || ')');
    end if;
END;
/</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="A virtual mosaic treats a set of GeoRaster images as one large virtually mosaicked image.">Virtual Mosaic</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1361"></a><a id="GEORS1370"></a><div class="props_rev_3"><a id="GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA" name="GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA"></a><h4 id="GEORS-GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA" class="sect4"><span class="enumeration_section">6.18.3 </span>Virtual Mosaic as a SQL Query Statement or a Cursor
                  </h4>
                  <div>
                     <p>Instead of creating a view, you can define a virtual mosaic as a SQL statement or a runtime database cursor, which selects a collection of GeoRaster objects from the database. Applications create the cursor from the SQL statement and use the cursor as the virtual mosaic. In this definition, all GeoRaster objects in the cursor are part of the virtual mosaic. This approach allows you to select the images for the virtual mosaic in complex ways from any number of GeoRaster tables. However, the spatial indexes are not automatically used in queries over this type of virtual mosaic. To take advantage of spatial indexes, dynamically add a spatial query condition directly using the query window to the SQL statement, so that all images in that query window can be more quickly located.</p>
                     <p>The <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a> and <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>procedures accept a cursor of GeoRaster objects as the virtual mosaic, as shown in <a href="image-processing-virtual-mosaic.html#GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA__CHDHFCBB">Example 6-27</a>. Note that in this example, the queries sort the images based on their creation time and pick the latest (newest) image for the resulting mosaic in the overlapping areas. For best performance when there are many GeoRaster objects in the table, the query of the cursor should use the spatial query window to filter out the unrelated GeoRaster objects, as described in the preceding paragraph.
                     </p>
                     <div class="example" id="GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA__CHDHFCBB">
                        <p class="titleinexample">Example 6-27 Using a Cursor for Virtual Mosaic</p><pre class="oac_no_warn" dir="ltr">DECLARE
  lb blob;
  outArea  sdo_geometry := null;
  outWin   sdo_number_array:=null;
  resolutions sdo_number_array;
  mosaic_stmt  varchar2(1000);
  condition        varchar2(1000);
BEGIN
    dbms_lob.createTemporary(lb, TRUE);
 
    resolutions := sdo_number_array(30, 30);
 
   -- Define the query window (cropArea)
   cropArea := sdo_geometry(2003, 32610, null, 
                           sdo_elem_info_array(1, 1003, 3), 
                           sdo_ordinate_array(399180, 4247820, 496140,4353900) );
 
    -- Define the virtual mosaic
    mosaic_stmt := 'select grobj from (select grobj, last_update from grtab1 ' ||
                   'where cloud_cover=0  union all select grobj, last_update from grtab2 ' ||
                   'where cloud_cover=0) t ';
 
   -- Apply filtering using the query window (cropArea) to speed up query performance
    condition := 'where sdo_anyinteract(t.grobj.spatialExtent,:1) = ''true'' ' ||
                 ' order by last_update'; 
 
   -- Open the virtual mosaic for query
    open cur for mosaic_stmt || condition using cropArea;
 
   -- Query the virtual mosaic (make sure the cropArea used here is the same
   -- as the one used at opening the cursor)
    sdo_geor_aggr.getMosaicSubset(<span class="bold">cur</span>, 
                 0, 32610, null, null, cropArea,
                 null, null, null, resolutions, null, 
                 'commonPointRule=end, nodata=true', 
                 lb, outArea, outWin);
    dbms_lob.freeTemporary(lb);
    close cur;
    if outWin is not null then
        dbms_output.put_line('output window: (' || outWin(1) || ',' || outWin(2) ||', ' || outWin(3) || ', ' || outWin(4) || ')');
    end if;
END;
/
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="A virtual mosaic treats a set of GeoRaster images as one large virtually mosaicked image.">Virtual Mosaic</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1371"></a><div class="props_rev_3"><a id="GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38" name="GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38"></a><h4 id="GEORS-GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38" class="sect4"><span class="enumeration_section">6.18.4 </span>Using Virtual Mosaic in Applications
                  </h4>
                  <div>
                     <div class="section">
                        <p>Virtual mosaic can be used as an image serving engine and in a variety of other application scenarios. The definitions of virtual mosaics can be stored by applications separately as strings or other forms. Besides the major query procedures <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a> and <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>, GeoRaster provides other subprograms in the SDO_GEOR_AGGR package to facilitate application development:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-517B4271-BF48-45C3-B989-88EE40CF780A">SDO_GEOR_AGGR.validateForMosaicSubset</a></p>
                           </li>
                           <li>
                              <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-74A098CB-5EC9-406B-9437-FAEDEB012A2C">SDO_GEOR_AGGR.getMosaicExtent</a></p>
                           </li>
                           <li>
                              <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-D0BB7FCA-490F-4988-95BD-5DDF49D5B8CF">SDO_GEOR_AGGR.getMosaicResolutions</a></p>
                           </li>
                        </ul>
                        <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-517B4271-BF48-45C3-B989-88EE40CF780A">SDO_GEOR_AGGR.validateForMosaicSubset</a>, <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-74A098CB-5EC9-406B-9437-FAEDEB012A2C">SDO_GEOR_AGGR.getMosaicExtent</a>, and <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-D0BB7FCA-490F-4988-95BD-5DDF49D5B8CF">SDO_GEOR_AGGR.getMosaicResolutions</a> can be called in an application to make sure that the virtual mosaic is valid and that the spatial query falls inside the virtual mosaic. The following steps describe a possible workflow for virtual mosaic in an application: 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Define a virtual mosaic. For example:</span><div><pre class="oac_no_warn" dir="ltr">Create or replace view grview as select * from (
Select grobj, last_update from grtab1 where cloud_cover=0 union all
Select grobj, last_update from grtab2 where cloud_cover=0 union all
Select grobj, last_update from grtab3 ) order by last_update;
</pre><p>Note that tables GRTAB1, GRTAB2, and GRTAB3 were created using the same definition as GRTAB in <a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" title="A large geospatial area typically consists of many smaller aerial photographs or satellite images. Large-scale image mosaicking can stitch these small geospatial images into one large image to get a better view of the whole spatial area.">Large-Scale Image Mosaicking</a>, and Oracle Spatial and Graph spatial indexes have been created on the <code class="codeph">spatialExtent</code> attribute of the GeoRaster object in these tables.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Validate the virtual mosaic data set. For example:</span><div><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_GEOR_AGGR.validateForMosaicSubset('grview', 'grobj', OUTSRID, OUTResolutions);
</pre><p>A validation error table can be created and passed to the call if more detailed validation information is needed. See the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-517B4271-BF48-45C3-B989-88EE40CF780A">SDO_GEOR_AGGR.validateForMosaicSubset</a> reference section for details.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Get the spatial extent of the virtual mosaic. For example:</span><div><pre class="oac_no_warn" dir="ltr">SELECT SDO_GEOR_AGGR.getMosaicExtent('grview', 'grobj', OUTSRID) from dual;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Get the resolution range of the existing source images. For example:</span><div><pre class="oac_no_warn" dir="ltr">SELECT SDO_GEOR_AGGR.getMosaicResolutions('grview', 'grobj', 'unit=meter') from dual;
</pre><p>The resolution range reflects the minimum and maximum resolutions of the source images, including all pyramid levels.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Based on the information acquired in the preceding two steps, pass in the spatial query window <code class="codeph">cropArea</code> and <code class="codeph">OUTResolutions</code> according to the application requests to get a subset of the virtual mosaic and optionally to apply different resampling methods, different common point rules, special nodata handling, and color balancing. For example:</span><div><pre class="oac_no_warn" dir="ltr">SDO_GEOR_AGGR.getMosaicSubset('grview', 'grobj', null, OUTSRID, null, null,
  cropArea, null, null, null, OUTResolutions, null, 
  'commonPointRule=end, nodata=true', lb, outArea, outWin);
</pre><p>Note that <code class="codeph">OUTResolutions</code> must be within the source image resolution range. If <code class="codeph">OUTResolutions</code> is the same as the resolutions of the source image at a specified pyramid level, the pyramid data is used in the output mosaic; otherwise, the source image is scaled to the target resolution.
                              </p>
                              <p>A typical application repeatedly applies this step to query different areas of interest over the same virtual mosaic for image display, image distribution, or other purposes.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="A virtual mosaic treats a set of GeoRaster images as one large virtually mosaicked image.">Virtual Mosaic</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1376"></a><div class="props_rev_3"><a id="GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D" name="GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D"></a><h4 id="GEORS-GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D" class="sect4"><span class="enumeration_section">6.18.5 </span>Special Considerations for Large-Scale Virtual Mosaic
                  </h4>
                  <div>
                     <p>A virtual mosaic can contain just several images, but it can also contain tens of thousands or millions of images. Both <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a> and <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> automatically search (using native spatial indexes) the virtual mosaic for all images touching or inside the <code class="codeph">cropArea</code> and check the resolutions of those images and their pyramids. Only those images or their appropriate pyramid levels touching or inside the <code class="codeph">cropArea</code> and with their resolutions close to the requested resolution will be used in the mosaicking process. So, the configuration of the source images and their pyramids is critical for the quality of the results and the overall query performance. 
                     </p>
                     <p>The guideline is to avoid too many small images from either different source images or their pyramids in the requested crop areas at the requested resolution. </p>
                     <p>For a smaller virtual mosaic with only a limited number of images, simply generate full pyramids for each source image, and the query performance will be good for most applications.</p>
                     <p>For a large area with a larger number of images (more than a few hundred images), the application can generate only a certain number of pyramid levels for each source image, mosaic their top pyramids into new GeoRaster objects, and then generate pyramids for those mosaics, and so forth. For large-scale web visualization projects, all images at source resolutions and at lower resolution levels might be stored as GeoRaster objects without any pyramids built for them.</p>
                     <p>In these cases (large number of images and large-scale web visualization), if each source image is small and there are many resolution levels in the virtual mosaic, a query on the lower resolution levels would involve metadata resolution queries on many unnecessary images at the higher resolution levels, which slows the query. To improve performance, applications can define many virtual mosaics, each of which includes only all the images at a specific resolution or a few resolution levels. Then, the application finds the right virtual mosaic or mosaics based on the requested resolution as the first step, and then only spatially queries those selected virtual mosaics. This approach can significantly improve performance.</p>
                     <p>In addition to the preceding considerations, see <a href="image-processing-virtual-mosaic.html#GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B">Improving Query Performance Using MIN_X_RES$ and MAX_X_RES$</a> for queries where many different resolution levels are involved for the same area.
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B">Improving Query Performance Using MIN_X_RES$ and MAX_X_RES$</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="A virtual mosaic treats a set of GeoRaster images as one large virtually mosaicked image.">Virtual Mosaic</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="GEORS1377"></a><div class="props_rev_3"><a id="GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B" name="GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B"></a><h5 id="GEORS-GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B" class="sect5"><span class="enumeration_section">6.18.5.1 </span>Improving Query Performance Using MIN_X_RES$ and MAX_X_RES$
                     </h5>
                     <div>
                        <div class="section">
                           <p>A more general solution (instead of defining multiple virtual mosaics) for speeding virtual mosaic queries if there are many different resolution levels involved for the same area is to use the MIN_X_RES$ and MAX_X_RES$ columns in the GeoRaster tables or views. You must define these columns (NUMBER data type) in the GeoRaster tables of a virtual mosaic, where they specify the minimum and maximum spatial resolution values, respectively, of the source GeoRaster object. After these columns are added and populated with correct resolution data, the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a> procedure will (if you use the format with the <code class="codeph">georasterTableNames</code> parameter) use the resolution range stored in these columns to filter out the source GeoRaster objects that are not at the requested resolutions as specified in the <code class="codeph">outResolutions</code> parameter. This avoids parsing the metadata of each GeoRaster objects in the <code class="codeph">cropArea</code>, thus significantly improving performance.
                           </p>
                           <p>To use this approach, follow these steps:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Add the columns MIN_X_RES$ and MAX_X_RES$ to the GeoRaster tables. For example:</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLE georaster_table ADD (MIN_X_RES$ number, MAX_X_RES$ number);
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Populate the MIN_X_RES$ column. For example:</span><div><pre class="oac_no_warn" dir="ltr">UPDATE georaster_table t 
  SET min_x_res$ = (select column_value from the
    (select sdo_geor.generateSpatialResolutions(t.georaster, null,
    t.georaster.spatialextent.sdo_srid) from dual)
  WHERE rownum=1);</pre></div>
                           </li>
                           <li class="stepexpand"><span>Populate the MAX_X_RES$ column. For example:</span><div><pre class="oac_no_warn" dir="ltr">UPDATE georaster_table t 
  max_x_res$ = min_x_res$ * power(2, sdo_geor.getPyramidMaxLevel(t.georaster));
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>If the virtual mosaic is defined as a view, the view should also have both columns. For example, the view definition in <a href="image-processing-virtual-mosaic.html#GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3__CHDGIHDD">Example 6-26</a> must be changed to the following:
                           </p><pre class="oac_no_warn" dir="ltr">Create or replace view grview as select * from ( 
       Select grobj, <span class="bold">min_x_res$, max_x_res$,</span> last_update from grtab1 where cloud_cover=0 union all
       Select grobj, <span class="bold">min_x_res$, max_x_res$,</span> last_update from grtab2 where cloud_cover=0 union all 
       Select grobj, <span class="bold">min_x_res$, max_x_res$,</span> last_update from grtab3 ) 
       order by last_update;
</pre><p>After a virtual mosaic is defined as described in this section, applications can query and use it in the same ways as with all other virtual mosaics, but with better performance for large-scale virtual mosaics that involve many resolution levels. For more information, see the <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a> and <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> reference sections.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D">Special Considerations for Large-Scale Virtual Mosaic</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="GEORS1362"></a><div class="props_rev_3"><a id="GUID-639C081E-8E7F-4467-8B89-3363810F561F" name="GUID-639C081E-8E7F-4467-8B89-3363810F561F"></a><h3 id="GEORS-GUID-639C081E-8E7F-4467-8B89-3363810F561F" class="sect3"><span class="enumeration_section">6.19 </span>Image Serving
               </h3>
               <div>
                  <p>Serving of image and raster data to clients or applications is supported through many features of the GeoRaster PL/SQL and Java APIs.</p>
                  <p>Direct image serving includes searching and then subsetting or cropping the rasters (<a href="SDO_GEOR-reference.html#GUID-CC66F0CA-96A9-4C4F-AB94-AEB5FE53C83D">SDO_GEOR.getRasterSubset</a>), applying reprojection and rectification on-the-fly while cropping the images (<a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a> and <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>), and directly exporting to files (<a href="SDO_GEOR-reference.html#GUID-6261233E-5E90-479C-97FD-8125C28EC838">SDO_GEOR.exportTo</a>).
                  </p>
                  <p>Virtual mosaic is used mainly, and effectively, to serve an image database to various applications, particularly when you do not want to create large physical mosaics. Virtual mosaic does not require the source images to be preprocessed or mosaicked beforehand. Instead, all images are stored as is, and the whole image data set can be served based on small areas of interest using single calls (<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>) to the server. 
                  </p>
                  <p>Often, one or a series of preprocessing operations are applied to multiple GeoRaster objects to create the resulting GeoRaster object, and then the features described in this section are used on the resulting GeoRaster object to serve the raster data directly to applications. Thus, a rich set of GeoRaster image manipulation and raster algebra capabilities (described in <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="This chapter describes how to perform several important GeoRaster data query and manipulation operations.">GeoRaster Data Query and Manipulation</a>, <a href="raster-algebra-and-analytics.html#GUID-C75744C9-FA04-4391-96F2-59EF2EA212FF" title="This chapter describes the raster algebra language (PL/SQL and algebraic expressions) and related raster operations, including conditional queries, cell value-based updates or edits, mathematical operations, classify, on-the-fly statistical analysis, logical operations, and their applications in cartographic modeling.">Raster Algebra and Analytics</a>, and this chapter) can be incorporated into the workflow to meet complex image serving requirements.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking.">Image Processing and Virtual Mosaic</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id='04176.database-contents-Oracle-JVM-security.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Database Contents and Oracle JVM Security</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Java Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Java Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="java-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T00:55:24-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96468-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="network-connection-security.html" title="Previous" type="text/html">
      <link rel="next" href="Oracle-JVM-authentication-mechanism.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Java Developer's Guide">
    <meta name="dcterms.isVersionOf" content="JJDEV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="network-connection-security.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="Oracle-JVM-authentication-mechanism.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Java Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-Java-application-security.html" property="item" typeof="WebPage"><span property="name"> Security for Oracle Database Java Applications </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Database Contents and Oracle JVM Security</li>
            </ol>
            <a id="GUID-54515619-575D-4EFB-B745-F857A07813A6" name="GUID-54515619-575D-4EFB-B745-F857A07813A6"></a><a id="JJDEV10200"></a>
            
            <h2 id="JJDEV-GUID-54515619-575D-4EFB-B745-F857A07813A6" class="sect2"><span class="enumeration_section">11.2 </span>Database Contents and Oracle JVM Security
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>Once you are connected to the database, you must have the appropriate Java 2 security permissions and <a id="d32290e94" class="indexterm-anchor"></a><a id="d32290e98" class="indexterm-anchor"></a>database privileges to access the resources stored within the database. These resources include:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Database resources, such as tables and PL/SQL packages</p>
                     </li>
                     <li>
                        <p>Operating system resources, such as files and sockets</p>
                     </li>
                     <li>
                        <p>Oracle JVM classes</p>
                     </li>
                     <li>
                        <p>User-loaded classes</p>
                     </li>
                  </ul>
                  <p>These resources can be protected by the following methods:</p>
               </div>
               <!-- class="section" -->
               <div class="tblformal" id="GUID-54515619-575D-4EFB-B745-F857A07813A6__GUID-4D3D88CF-2318-431A-83A5-E5DB04612446">
                  <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table describes the methods to protect the resources stored within the database." width="100%" frame="hsides" border="1" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="24%" id="d32290e126">Resource Security</th>
                           <th align="left" valign="bottom" width="76%" id="d32290e129">Description</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d32290e134" headers="d32290e126 ">
                              <p>Database Resource Security</p>
                           </td>
                           <td align="left" valign="top" width="76%" headers="d32290e134 d32290e129 ">
                              <p>Authorization for database resources requires that database privileges, which are not the same as the Java 2 security permissions, are granted to resources. For example, database resources include tables, classes, and PL/SQL packages.</p>
                              <p><a id="d32290e141" class="indexterm-anchor"></a>All user-defined classes are secured against users from other schemas. You can grant execution permission to other users or schemas through an option on the <code class="codeph">loadjava</code> tool.
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d32290e150" headers="d32290e126 ">
                              <p>JVM Security</p>
                           </td>
                           <td align="left" valign="top" width="76%" headers="d32290e150 d32290e129 ">
                              <p>Oracle JVM uses Java 2 security, which uses <code class="codeph">Permission</code> objects to protect operating system resources. Java 2 security is automatically installed upon startup and protects all operating system resources and Oracle JVM classes from all users, except <a id="d32290e159" class="indexterm-anchor"></a><code class="codeph">JAVA_ADMIN</code>. The <code class="codeph">JAVA_ADMIN</code> user can grant permission to other users to access these classes.
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <div class="section">
                  <div class="infoboxnote" id="GUID-54515619-575D-4EFB-B745-F857A07813A6__GUID-23252983-880F-45F9-8D00-D671B48916A5">
                     <p class="notep1">Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The Oracle JVM is shipped with strong but limited encryption as included in JDK1.5 and JDK 6. If you want to have unlimited encryption strength in your application, then you must download and install the appropriate version-specific files from the following Web site</p>
                           <p><a href="http://www.oracle.com/technetwork/indexes/downloads/index.html" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/indexes/downloads/index.html</code></a></p>
                        </li>
                        <li>
                           <p>The Oracle JVM classes used for granting or revoking permissions can run only on a server.</p>
                        </li>
                     </ul>
                  </div>
                  <p>This section covers the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="database-contents-Oracle-JVM-security.html#GUID-0B0B3B02-2999-4A12-AEF8-4C0E4A47B758">Overview of Java 2 Security Features</a></p>
                     </li>
                     <li>
                        <p><a href="database-contents-Oracle-JVM-security.html#GUID-D90B4AA2-F408-474A-B006-6818336C92DD">Overview of Setting Permissions</a></p>
                     </li>
                     <li>
                        <p><a href="database-contents-Oracle-JVM-security.html#GUID-1DF94F34-BBCA-4061-A15C-B8B8E76E07BA">Debugging Permissions</a></p>
                     </li>
                     <li>
                        <p><a href="database-contents-Oracle-JVM-security.html#GUID-E3427117-0517-4B6D-B346-81BB36A51489">Permission for Loading Classes</a></p>
                     </li>
                     <li>
                        <p><a href="database-contents-Oracle-JVM-security.html#GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA">Customizing the Default java.security Resource</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-54515619-575D-4EFB-B745-F857A07813A6__GUID-08DB9084-0751-4C3A-9A8A-FE892B09EA9E">
                     <p class="notep1">See Also:</p>
                     <p><a href="../adfns/index.html" target="_blank"><span class="italic">Oracle Database Development Guide</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
            </div><a id="JJDEV13325"></a><div class="props_rev_3"><a id="GUID-0B0B3B02-2999-4A12-AEF8-4C0E4A47B758" name="GUID-0B0B3B02-2999-4A12-AEF8-4C0E4A47B758"></a><h3 id="JJDEV-GUID-0B0B3B02-2999-4A12-AEF8-4C0E4A47B758" class="sect3"><span class="enumeration_section">11.2.1 </span>Overview of Java 2 Security Features
               </h3>
               <div>
                  <div class="section">
                     <p>Each user or schema must be assigned the proper permissions to access operating system resources, such as sockets, files, and system properties.</p>
                     <p>Java 2 security provides a flexible and configurable security for Java applications. With Java 2 security, you can define exactly what permissions on each loaded object that a schema or role will have. In Oracle8<span class="italic">i</span> Database release 8.1.5, the following secure roles are available:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">JAVAUSERPRIV</code></p>
                           <p>Few permissions, including examining properties</p>
                        </li>
                        <li>
                           <p><code class="codeph">JAVASYSPRIV</code></p>
                           <p>Major permissions, including updating Oracle JVM-protected packages</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-0B0B3B02-2999-4A12-AEF8-4C0E4A47B758__GUID-5B8C93C1-4286-4CBB-BE88-222F0AADA56F">
                        <p class="notep1">Note:</p>
                        <p>Both roles still exist within this release for backward compatibility. However, Oracle recommends that you specify each permission explicitly, rather than utilize these roles.</p>
                     </div>
                     <p><a id="d32290e329" class="indexterm-anchor"></a>Because Oracle JVM security is based on Java 2 security, you assign permissions on a class-by-class basis. These permissions are assigned through database management tools. Each permission is encapsulated in a <code class="codeph">Permission</code> object and is stored within a <code class="codeph">Permission</code> table. <code class="codeph">Permission</code> contains the <code class="codeph">target</code> and <code class="codeph">action</code> attributes, which take <code class="codeph">String</code> values.
                     </p>
                     <p>Java 2 security was created for the non-database world. When you apply the Java 2 security model within the database, certain differences manifest themselves. For example, Java 2 security defines that all applets are implicitly untrusted and all classes within the <code class="codeph">CLASSPATH</code> are trusted. In Oracle Database, all classes are loaded within a secure database. As a result, no classes are trusted.
                     </p>
                     <p>The following table describes the differences between the standard Java 2 security and Oracle Database security implementation:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-0B0B3B02-2999-4A12-AEF8-4C0E4A47B758__GUID-2DD32A49-A908-4ECE-BB69-A95BB524C112">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table describes the Java 2 security standard in the left column and the corresponding Oracle Database security implementation in the right column." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="48%" id="d32290e368">Java 2 Security Standard</th>
                              <th align="left" valign="bottom" width="52%" id="d32290e371">Oracle Database Security Implementation</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e376" headers="d32290e368 ">
                                 <p>Java classes located within the <code class="codeph">CLASSPATH</code> are trusted.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e376 d32290e371 ">
                                 <p>All Java classes are loaded within the database. Classes are trusted on a class-by-class basis according to the permission granted.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e386" headers="d32290e368 ">
                                 <p><a id="d32290e388" class="indexterm-anchor"></a>You can specify the policy using the <code class="codeph">-usepolicy</code> flag on the <code class="codeph">java</code> command.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e386 d32290e371 ">
                                 <p>You must specify the policy within <code class="codeph">PolicyTable</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e406" headers="d32290e368 ">
                                 <p>You can write your own <code class="codeph">SecurityManager</code> or use the Launcher.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e406 d32290e371 ">
                                 <p>You can write your own <code class="codeph">SecurityManager</code>. However, Oracle recommends that you use only Oracle Database <code class="codeph">SecurityManager</code> or that you extend it. If you want to modify the behavior, then you should not define a <code class="codeph">SecurityManager</code>. Instead, you should extend <code class="codeph">oracle.aurora.rdbms. SecurityManagerImpl</code> and override specific methods.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e428" headers="d32290e368 ">
                                 <p><code class="codeph">SecurityManager</code> is not initialized by default. You must initialize <code class="codeph">SecurityManager</code>.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e428 d32290e371 ">
                                 <p>Oracle JVM always initializes <code class="codeph">SecurityManager</code> at startup.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e443" headers="d32290e368 ">
                                 <p>Permissions are determined by the location or the URL, where the application or applet is loaded, or keycode, that is, signed code.</p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e443 d32290e371 ">
                                 <p>Permissions are determined by the schema in which the class is loaded. Oracle Database does not support signed code.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e450" headers="d32290e368 ">
                                 <p><a id="d32290e452" class="indexterm-anchor"></a>The security policy is defined in a file.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e450 d32290e371 ">
                                 <p>The <code class="codeph">PolicyTable</code> definition is contained in a secure database table.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e464" headers="d32290e368 ">
                                 <p>You can update the security policy file using a text editor or a tool, if you have the appropriate permissions.</p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e464 d32290e371 ">
                                 <p>Y<a id="d32290e470" class="indexterm-anchor"></a>ou can update <code class="codeph">PolicyTable</code> through <code class="codeph">DBMS_JAVA</code> procedures. After initialization, only <code class="codeph">JAVA_ADMIN</code> has permission to modify <code class="codeph">PolicyTable</code>. <code class="codeph">JAVA_ADMIN</code> must grant you the right to modify <code class="codeph">PolicyTable</code> so that you can grant permissions to others.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e495" headers="d32290e368 ">
                                 <p>Permissions are assigned to a protection domain, which classes can belong to.</p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e495 d32290e371 ">
                                 <p>All classes within the same schema are in the same protection domain.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e502" headers="d32290e368 ">
                                 <p>You can use the <code class="codeph">CodeSource</code> class for identifying code.
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>The <code class="codeph">equals()</code> method returns <code class="codeph">true</code> if the URL and certificates are equal.
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">implies()</code> method returns <code class="codeph">true</code> if the first <code class="codeph">CodeSource</code> is a generic representation that includes the specific <code class="codeph">CodeSource</code> object.
                                       </p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e502 d32290e371 ">
                                 <p>You can use the <code class="codeph">CodeSource</code> class for identifying schema.
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>The <code class="codeph">equals()</code> method returns <code class="codeph">true</code> if the schemas are the same.
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">implies()</code> method returns <code class="codeph">true</code> if the schemas are the same.
                                       </p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e559" headers="d32290e368 ">
                                 <p><a id="d32290e561" class="indexterm-anchor"></a><a id="d32290e563" class="indexterm-anchor"></a><a id="d32290e567" class="indexterm-anchor"></a><a id="d32290e571" class="indexterm-anchor"></a>Supports positive permissions only, that is, <code class="codeph">grant</code>.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e559 d32290e371 ">
                                 <p>Supports both positive and limitation permissions, that is, <code class="codeph">grant</code> and <code class="codeph">restrict</code>.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="JJDEV13326"></a><div class="props_rev_3"><a id="GUID-D90B4AA2-F408-474A-B006-6818336C92DD" name="GUID-D90B4AA2-F408-474A-B006-6818336C92DD"></a><h3 id="JJDEV-GUID-D90B4AA2-F408-474A-B006-6818336C92DD" class="sect3"><span class="enumeration_section">11.2.2 </span>Overview of Setting Permissions
               </h3>
               <div>
                  <div class="section">
                     <p><a id="d32290e687" class="indexterm-anchor"></a>As with Java 2 security, Oracle Database supports the security classes. Typically, you set the permissions for the code base either using a tool or by editing the security <a id="d32290e692" class="indexterm-anchor"></a>policy file. In Oracle Database, you set the permissions dynamically using <code class="codeph">DBMS_JAVA</code> procedures, which modify a policy table in the database.
                     </p>
                     <p><a id="d32290e701" class="indexterm-anchor"></a>Two views have been created for you to view the policy table, <code class="codeph">USER_JAVA_POLICY</code> and <code class="codeph">DBA_JAVA_POLICY</code>. Both views contain information about granted and limitation permissions. The <code class="codeph">DBA_JAVA_POLICY</code> view can see all rows within the policy table. The <code class="codeph">USER_JAVA_POLICY</code> view can see only permissions relevant to the current user. The following is a description of the rows within each view:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-D90B4AA2-F408-474A-B006-6818336C92DD__GUID-AA89576F-40CC-4503-8A4F-4568E8EA0A6E">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table describes the rows within the USER_JAVA_POLICY view and the DBA_JAVA_POLICY view." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="24%" id="d32290e726">Table Column</th>
                              <th align="left" valign="bottom" width="76%" id="d32290e729">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e734" headers="d32290e726 ">
                                 <p>Kind</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e734 d32290e729 ">
                                 <p><code class="codeph">GRANT</code> or <code class="codeph">RESTRICT</code>. Shows whether this permission is a positive or a limitation permission.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e746" headers="d32290e726 ">
                                 <p>Grantee</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e746 d32290e729 ">
                                 <p>The name of the user, schema, or role to which the <code class="codeph">Permission</code> object is assigned.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e756" headers="d32290e726 ">
                                 <p>Permission_schema</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e756 d32290e729 ">
                                 <p>The schema in which the <code class="codeph">Permission</code> object is loaded.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e766" headers="d32290e726 ">
                                 <p>Permission_type</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e766 d32290e729 ">
                                 <p>The <a id="d32290e772" class="indexterm-anchor"></a><code class="codeph">Permission</code> class type, which is designated by a string containing the full class name, such as, <code class="codeph">java.io.FilePermission</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e781" headers="d32290e726 ">
                                 <p>Permission_name</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e781 d32290e729 ">
                                 <p>The <code class="codeph">target</code> attribute of the <code class="codeph">Permission</code> object. You use this when defining the permission. When defining the target for a <code class="codeph">Permission</code> object of type <code class="codeph">PolicyTablePermission</code>, the name can become quite complicated.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e800" headers="d32290e726 ">
                                 <p>Permission_action</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e800 d32290e729 ">
                                 <p>The <code class="codeph">action</code> attribute of the <code class="codeph">Permission</code> object. Many permissions expect a null value if no action is appropriate for the permission.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e813" headers="d32290e726 ">
                                 <p>Status</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e813 d32290e729 ">
                                 <p><code class="codeph">ENABLED</code> and <code class="codeph">DISABLED</code>. After creating a row for a <code class="codeph">Permission</code> object, you can disable or reenable it. This column shows whether the permission is enabled or disabled.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e828" headers="d32290e726 ">
                                 <p>Key</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e828 d32290e729 ">
                                 <p>Sequence number you use to identify this row. This number should be supplied when disabling, enabling, or deleting a permission.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>There are two ways to set permissions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-065CD132-9CAD-44B9-8823-C5C318C6F71A">Fine-Grain Definition for Each Permission</a></p>
                        </li>
                        <li>
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-1553DDD4-832F-49BB-B407-0BE10C176370">Assigning General Permission Definition to Roles</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-D90B4AA2-F408-474A-B006-6818336C92DD__GUID-A0E123E9-868C-4BE5-90EF-35E5807D80F9">
                        <p class="notep1">Note:</p>
                        <p>For absolute certainty about the security settings, implement the fine-grain definition. The general definition is easy to implement, but you may not get the exact security settings you require.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="JJDEV13327"></a><div class="props_rev_3"><a id="GUID-065CD132-9CAD-44B9-8823-C5C318C6F71A" name="GUID-065CD132-9CAD-44B9-8823-C5C318C6F71A"></a><h4 id="JJDEV-GUID-065CD132-9CAD-44B9-8823-C5C318C6F71A" class="sect4"><span class="enumeration_section">11.2.2.1 </span>Fine-Grain Definition for Each Permission
                  </h4>
                  <div>
                     <div class="section">
                        <p>Using fine-grain definition, you can grant each permission individually to specific users or roles. If you do not grant a permission for access, then the schema will be denied access. To set individual permissions within the policy table, you must provide the following information:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-065CD132-9CAD-44B9-8823-C5C318C6F71A__GUID-6DAA09E8-5BB8-4047-B5DC-7F58841834B1">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table describes the information that you must specify in the policy table to set individual permissions." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d32290e949">Parameter</th>
                                 <th align="left" valign="bottom" width="76%" id="d32290e952">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d32290e957" headers="d32290e949 ">
                                    <p>Grantee</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d32290e957 d32290e952 ">
                                    <p>The name of the user, schema, or role to which you want the grant to apply. <code class="codeph">PUBLIC</code> specifies that the row applies to all users.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d32290e967" headers="d32290e949 ">
                                    <p>Permission type</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d32290e967 d32290e952 ">
                                    <p>The <a id="d32290e973" class="indexterm-anchor"></a><code class="codeph">Permission</code> class on which you are granting permission. For example, if you were defining access to a file, the permission type would be <code class="codeph">FilePermission</code>. This parameter requires a fully-qualified name of a class that extends <code class="codeph">java.lang.security.Permission</code>. If the class is not within <code class="codeph">SYS</code>, then the name should be prefixed by <span class="italic"><code class="codeph">schema</code></span><code class="codeph">:</code>. For example, <code class="codeph">mySchema:myPackage.MyPermission</code> is a valid name for a user-generated permission.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d32290e998" headers="d32290e949 ">
                                    <p>Permission name</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d32290e998 d32290e952 ">
                                    <p>The meaning of the target attribute as defined by the <code class="codeph">Permission</code> class. Examine the appropriate <code class="codeph">Permission</code> class for the relevant name.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d32290e1011" headers="d32290e949 ">
                                    <p>Permission action</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d32290e1011 d32290e952 ">
                                    <p>The type of action that you can specify. This can vary according to the permission type. For example, <code class="codeph">FilePermission</code> can have the action, read or write.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d32290e1021" headers="d32290e949 ">
                                    <p>Key</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d32290e1021 d32290e952 ">
                                    <p>Number returned from grant or limit to use on enable, disable, or delete methods.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div><a id="JJDEV13329"></a><a id="JJDEV13328"></a><div class="props_rev_3"><a id="GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D" name="GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D"></a><h5 id="JJDEV-GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D" class="sect5"><span class="enumeration_section">11.2.2.1.1 </span>Granting and Limiting Permissions
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can grant permissions using either SQL or Java. Each version returns a row key identifier that identifies the row within the permission table. In the Java version of <code class="codeph">DBMS_JAVA</code>, each method returns the row key identifier, either as a returned parameter or as an <code class="codeph">OUT</code> variable in the parameter list. In the PL/SQL <code class="codeph">DBMS_JAVA</code> package, the row key is returned only in the procedure that defines the <code class="codeph">key OUT</code> parameter. This key is used to enable and disable specific permissions.
                           </p>
                           <p>After running the grant, if a row already exists for the exact permission, then no update occurs, but the key for that row is returned. If the row was disabled, then running the grant enables the existing row.</p>
                           <div class="infoboxnote" id="GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D__GUID-163004B6-0919-479C-9C1A-B1C8AD9029AE">
                              <p class="notep1">Note:</p>
                              <p>If you are granting <code class="codeph">FilePermission</code>, then you must provide the physical name of the directory or file, such as <code class="codeph">/private/oracle</code>. You cannot provide either an environment variable, such as <code class="codeph">$ORACLE_HOME</code>, or a symbolic link. To denote all files within a directory, provide the <code class="codeph">*</code> symbol, as follows:
                              </p><pre class="oac_no_warn" dir="ltr">/private/oracle/*
</pre><p>To denote all directories and files within a directory, provide the <code class="codeph">-</code> symbol, as follows:
                              </p><pre class="oac_no_warn" dir="ltr">/private/oracle/-
</pre></div>
                           <p>You can <a id="d32290e1178" class="indexterm-anchor"></a><a id="d32290e1182" class="indexterm-anchor"></a><a id="d32290e1184" class="indexterm-anchor"></a>grant permissions using the <code class="codeph">DBMS_JAVA</code> package, as follows:
                           </p><pre class="oac_no_warn" dir="ltr">procedure grant_permission ( grantee varchar2, permission_type varchar2, permission_name varchar2, 
permission_action varchar2 )

procedure grant_permission ( grantee varchar2, permission_type varchar2, permission_name varchar2, 
permission_action varchar2, key OUT number)
</pre><p>You can <a id="d32290e1196" class="indexterm-anchor"></a>grant permissions using Java, as follows:
                           </p><pre class="oac_no_warn" dir="ltr">long oracle.aurora.rdbms.security.PolicyTableManager.grant ( java.lang.String grantee, 
java.lang.String permission_type, java.lang.String permission_name, java.lang.String permission_action);

void oracle.aurora.rdbms.security.PolicyTableManager.grant ( java.lang.String grantee, 
java.lang.String permission_type, java.lang.String permission_name, java.lang.String permission_action, long[] key);
</pre><p>You can <a id="d32290e1203" class="indexterm-anchor"></a><a id="d32290e1207" class="indexterm-anchor"></a><a id="d32290e1211" class="indexterm-anchor"></a><a id="d32290e1215" class="indexterm-anchor"></a><a id="d32290e1217" class="indexterm-anchor"></a>limit permissions using the <code class="codeph">DBMS_JAVA</code> package, as follows:
                           </p><pre class="oac_no_warn" dir="ltr">procedure restrict_permission ( grantee varchar2, permission_type varchar2, permission_name varchar2, 
permission_action varchar2)

procedure restrict_permission ( grantee varchar2, permission_type varchar2, permission_name varchar2, 
permission_action varchar2, key OUT number)
</pre><p>You can <a id="d32290e1227" class="indexterm-anchor"></a>limit permissions using Java, as follows:
                           </p><pre class="oac_no_warn" dir="ltr">long oracle.aurora.rdbms.security.PolicyTableManager.restrict ( java.lang.String grantee, 
java.lang.String permission_type, java.lang.String permission_name, java.lang.String permission_action);

void oracle.aurora.rdbms.security.PolicyTableManager.restrict ( java.lang.String grantee, 
java.lang.String permission_type, java.lang.String permission_name, java.lang.String permission_action, long[] key);
</pre><p><a href="database-contents-Oracle-JVM-security.html#GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D__BABBDGAE">Example 11-1</a> shows how to use the <code class="codeph">grant_permission()</code> method to grant permissions. <a href="database-contents-Oracle-JVM-security.html#GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D__BABDGDIF">Example 11-2</a> shows how to limit permissions using the <code class="codeph">restrict()</code> method.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>The following examples perform the following actions:</p>
                           <ol>
                              <li>
                                 <p>Grants everyone read and write permission to all files in <code class="codeph">/tmp</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>Limits everyone from reading or writing only the <code class="codeph">password</code> file in <code class="codeph">/tmp</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>Grants only <code class="codeph">Larry</code> explicit permission to read and write the <code class="codeph">password</code> file.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D__BABBDGAE">
                           <p class="titleinexample">Example 11-1 Granting Permissions</p>
                           <p>Assuming that you have appropriate permissions to modify the policy table, you can use the <code class="codeph">grant_permission()</code> method, which is in the <code class="codeph">DBMS_JAVA</code> package, to modify <code class="codeph">PolicyTable</code> to allow user access to the indicated file. In this example, the user, <code class="codeph">Larry</code>, has modification permission on <code class="codeph">PolicyTable</code>. Within a SQL package, <code class="codeph">Larry</code> can grant permission to <code class="codeph">Dave</code> to read and write a file, as follows:
                           </p><pre class="oac_no_warn" dir="ltr">connect larry
Enter password: <span class="italic">password</span>

REM Grant DAVE permission to read and write the Test1 file.
call dbms_java.grant_permission('DAVE', 'java.io.FilePermission', '/test/Test1',  'read,write');

REM commit the changes to PolicyTable
commit;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D__BABDGDIF">
                           <p class="titleinexample">Example 11-2 Limiting Permissions</p>
                           <p>You can use the <code class="codeph">restrict()</code> method to specify a limitation or exception to general rules. A general rule is a rule where, in most cases, the permission is true or granted. However, there may be exceptions to this rule. For these exceptions, you specify a limitation permission.
                           </p>
                           <p>If you have defined a general rule that no one can read or write an entire directory, then you can define a limitation on an aspect of this rule through the <code class="codeph">restrict()</code> method. For example, if you want to allow access to all files within the <code class="codeph">/tmp</code> directory, except for your password file that exists in that directory, then you would grant permission for read and write to all files within <code class="codeph">/tmp</code> and limit read and write access to the password file.
                           </p>
                           <p>If you want to specify an exception to the limitation, then you must create an explicit grant permission to override the limitation permission. In the previously mentioned scenario, if you want the file owner to still be able to modify the password file, then you can grant a more explicit permission to allow access to one user, which will override the limitation. Oracle JVM security combines all rules to understand who really has access to the password file. This is demonstrated in the following diagram:</p>
                           <div class="figure" id="GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D__GUID-9CDF5E80-F33A-4CC1-8095-E0181827BE7E">
                              <p class="titleinfigure">Figure 11-1 The List of Files in the&nbsp;/tmp&nbsp;Directory</p><img src="img/limitper.gif" width="224" alt="Description of Figure 11-1 follows" title="Description of Figure 11-1 follows" longdesc="img_text/limitper.html"><br><a href="img_text/limitper.html">Description of "Figure 11-1 The List of Files in the&nbsp;/tmp&nbsp;Directory"</a></div>
                           <!-- class="figure" -->
                           <p>The explicit rule is as follows:</p>
                           <p>If the limitation permission implies the request, then for a grant permission to be effective, the limitation permission must also imply the grant.</p>
                           <p>The following code implements this example:</p><pre class="oac_no_warn" dir="ltr">connect larry
Enter password: <span class="italic">password</span>

REM Grant permission to all users (PUBLIC) to be able to read and write
REM all files in /tmp.
call dbms_java.grant_permission('PUBLIC', 'java.io.FilePermission', '/tmp/*', 'read,write');

REM Limit permission to all users (PUBLIC) from reading or writing the
REM password file in /tmp.
call dbms_java.restrict_permission('PUBLIC', 'java.io.FilePermission', '/tmp/password', 'read,write');

REM By providing a more specific rule that overrides the limitation,
REM Larry can read and write /tmp/password.
call dbms_java.grant_permission('LARRY', 'java.io.FilePermission', '/tmp/password', 'read,write');

commit;
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="JJDEV13331"></a><div class="props_rev_3"><a id="GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9" name="GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9"></a><h5 id="JJDEV-GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9" class="sect5"><span class="enumeration_section">11.2.2.1.2 </span>Acquiring Administrative Permission to Update Policy Table
                     </h5>
                     <div>
                        <div class="section">
                           <p><a id="d32290e1432" class="indexterm-anchor"></a><a id="d32290e1436" class="indexterm-anchor"></a>All permissions are rows in <code class="codeph">PolicyTable</code>. Because it is a table in the database, you need appropriate permissions to modify it. Specifically, the <code class="codeph">PolicyTablePermission</code> object is required to modify the table. After initializing Oracle JVM, only a single role, <code class="codeph">JAVA_ADMIN</code>, is granted <code class="codeph">PolicyTablePermission</code> to modify <code class="codeph">PolicyTable</code>. The <code class="codeph">JAVA_ADMIN</code> role is immediately assigned to the database administrator (DBA). Therefore, if you are assigned to the DBA group, then you will automatically take on all <code class="codeph">JAVA_ADMIN</code> permissions.
                           </p>
                           <p><a id="d32290e1464" class="indexterm-anchor"></a><a id="d32290e1468" class="indexterm-anchor"></a>If you need to add permissions as rows to this table, <code class="codeph">JAVA_ADMIN</code> must grant your schema update rights using <code class="codeph">PolicyTablePermission</code>. This permission defines that your schema can add rows to the table. Each <code class="codeph">PolicyTablePermission</code> is for a specific type of permission. For example, to add a permission that controls access to a file, you must have <code class="codeph">PolicyTablePermission</code> that lets you grant or limit a permission on <code class="codeph">FilePermission</code>. Once this occurs, you have administrative permission for <code class="codeph">FilePermission</code>.
                           </p>
                           <p><a id="d32290e1493" class="indexterm-anchor"></a>An administrator can grant and limit <code class="codeph">PolicyTablePermission</code> in the same manner as other permissions, but the syntax is complicated. For ease of use, you can use the <code class="codeph">grant_policy_permission()</code> or <code class="codeph">grantPolicyPermission()</code> method to grant administrative permissions.
                           </p>
                           <p>You can <a id="d32290e1509" class="indexterm-anchor"></a><a id="d32290e1513" class="indexterm-anchor"></a><a id="d32290e1515" class="indexterm-anchor"></a>grant policy table administrative permission using <code class="codeph">DBMS_JAVA</code>, as follows:
                           </p><pre class="oac_no_warn" dir="ltr">procedure grant_policy_permission ( grantee varchar2, permission_schema varchar2,
permission_type varchar2, permission_name varchar2 )

procedure grant_policy_permission ( grantee varchar2, permission_schema varchar2,
permission_type varchar2, permission_name varchar2, key OUT number )
</pre><p>You can <a id="d32290e1527" class="indexterm-anchor"></a>grant policy table administrative permission using Java, as follows:
                           </p><pre class="oac_no_warn" dir="ltr">long oracle.aurora.rdbms.security.PolicyTableManager.grantPolicyPermission (java.lang.String grantee, java.lang.String permission_schema,
 java.lang.String permission_type, java.lang.String permission_name);

void oracle.aurora.rdbms.security.PolicyTableManager.grantPolicyPermission (java.lang.String grantee, java.lang.String permission_schema, 
java.lang.String permission_type, java.lang.String permission_name, long[] key);
</pre><div class="tblformal" id="GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9__GUID-FE157D9D-075E-4028-B8B7-94A72E2A902F">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table describes the permissions that you need to update the PolicyTable." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="23%" id="d32290e1540">Parameter</th>
                                       <th align="left" valign="bottom" width="77%" id="d32290e1543">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d32290e1548" headers="d32290e1540 ">
                                          <p>Grantee</p>
                                       </td>
                                       <td align="left" valign="top" width="77%" headers="d32290e1548 d32290e1543 ">
                                          <p>The name of the user, schema, or role to which you want the grant to apply. <code class="codeph">PUBLIC</code> specifies that the row applies to all users.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d32290e1558" headers="d32290e1540 ">
                                          <p>Permission_schema</p>
                                       </td>
                                       <td align="left" valign="top" width="77%" headers="d32290e1558 d32290e1543 ">
                                          <p>The schema where the <code class="codeph">Permission</code> class is loaded.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d32290e1568" headers="d32290e1540 ">
                                          <p>Permission_type</p>
                                       </td>
                                       <td align="left" valign="top" width="77%" headers="d32290e1568 d32290e1543 ">
                                          <p>The <a id="d32290e1574" class="indexterm-anchor"></a><code class="codeph">Permission</code> class on which you are granting permission. For example, if you were defining access to a file, the permission type would be <code class="codeph">FilePermission</code>. This parameter requires a fully-qualified name of a class that extends <code class="codeph">java.lang.security.Permission</code>. If the class is not within <code class="codeph">SYS</code>, the name should be prefixed by <span class="italic"><code class="codeph">schema</code></span><code class="codeph">:</code>. For example, <code class="codeph">mySchema:myPackage.MyPermission</code> is a valid name for a user-generated permission.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d32290e1599" headers="d32290e1540 ">
                                          <p>Permission_name</p>
                                       </td>
                                       <td align="left" valign="top" width="77%" headers="d32290e1599 d32290e1543 ">
                                          <p>The meaning of the <code class="codeph">target</code> attribute as defined by the <code class="codeph">Permission</code> class. Examine the appropriate <code class="codeph">Permission</code> class for the relevant name.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d32290e1615" headers="d32290e1540 ">
                                          <p>Row_ number</p>
                                       </td>
                                       <td align="left" valign="top" width="77%" headers="d32290e1615 d32290e1543 ">
                                          <p>Number returned from grant or limitation to use on enable, disable, or delete methods.</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnote" id="GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9__GUID-66DFC236-886B-43C8-9EC6-A37E648C1D01">
                              <p class="notep1">Note:</p>
                              <p>When looking at the policy table, the name in the <code class="codeph">PolicyTablePermission</code> rows contains both the permission type and the permission name, which are separated by a <code class="codeph">#</code>. For example, to grant a user administrative rights for reading a file, the name in the row contains <code class="codeph">java.io.FilePermission#read</code>. The <code class="codeph">#</code> separates the <code class="codeph">Permission</code> class from the permission name.
                              </p>
                           </div>
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9__BABDBECA">Example 11-3</a> shows how you can modify <code class="codeph">PolicyTable</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9__BABDBECA">
                           <p class="titleinexample">Example 11-3 Granting PolicyTable Permission</p>
                           <p><a id="d32290e1649" class="indexterm-anchor"></a>This example shows <code class="codeph">SYS</code>, which has the <code class="codeph">JAVA_ADMIN</code> role assigned, giving <code class="codeph">Larry</code> permission to update <code class="codeph">PolicyTable</code> for <code class="codeph">FilePermission</code>. Once this permission is granted, <code class="codeph">Larry</code> can grant permissions to other users for reading, writing, and deleting files.
                           </p><pre class="oac_no_warn" dir="ltr">REM Connect as SYS, which is assigned JAVA_ADMIN role, to give Larry permission
REM to modify the PolicyTable
connect SYS as SYSDBA
Enter password: <span class="italic">password</span>

REM SYS grants Larry the right to administer permissions for
REM FilePermission
call dbms_java.grant_policy_permission('LARRY', 'SYS', 'java.io.FilePermission', '*');
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-0A24260B-17BF-49D8-A6AE-870694A465A5" name="GUID-0A24260B-17BF-49D8-A6AE-870694A465A5"></a><h5 id="JJDEV-GUID-0A24260B-17BF-49D8-A6AE-870694A465A5" class="sect5"><span class="enumeration_section">11.2.2.1.3 </span>Creating Permissions
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can create your own permission type by performing the following steps:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span><a id="d32290e1769" class="indexterm-anchor"></a>Create and load the user permission</span><div>
                                 <p>Create your own permission by extending the <code class="codeph">java.security.Permission</code> class. Any user-defined permission must extend <code class="codeph">Permission</code>. The following example creates <code class="codeph">MyPermission</code>, which extends <code class="codeph">BasicPermission</code>, which, in turn, extends <code class="codeph">Permission</code>.
                                 </p><pre class="oac_no_warn" dir="ltr">package test.larry;
import java.security.Permission;
import java.security.BasicPermission;

public class MyPermission extends BasicPermission
{

  public MyPermission(String name)
  {
    super(name);
  }

  public boolean implies(Permission p)
  {
    boolean result = super.implies(p);
    return result;
  }
}
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Grant administrative and action permissions to specified users</span><div>
                                 <p><a id="d32290e1797" class="indexterm-anchor"></a>When you create a permission, you are designated as the owner of that permission. The owner is implicitly granted administrative permission. This means that the owner can be an administrator for this permission and can run <code class="codeph">grant_policy_permission()</code>. Administrative permission enable the user to update the policy table for the user-defined permission.
                                 </p>
                                 <p>For example, if <code class="codeph">LARRY</code> creates a permission, <code class="codeph">MyPermission</code>, then only he can call <code class="codeph">grant_policy_permission()</code> for himself or another user. This method updates <code class="codeph">PolicyTable</code> on who can grant rights to <code class="codeph">MyPermission</code>. The following code demonstrates this:
                                 </p><pre class="oac_no_warn" dir="ltr">REM Since Larry is the user that owns MyPermission, Larry connects to
REW the database to assign permissions for MyPermission.</pre><pre class="oac_no_warn" dir="ltr">connect larry
Enter password: <span class="italic">password</span>

REM As the owner of MyPermission, Larry grants himself the right to
REM administer permissions for test.larry.MyPermission within the JVM
REM security PolicyTable. Only the owner of the user-defined permission
REM can grant administrative rights.
call dbms_java.grant_policy_permission ('LARRY', 'LARRY', 'test.larry.MyPermission', '*');

REM commit the changes to PolicyTable
commit;
</pre><p>Once you have granted administrative rights, you can grant action permissions for the created permission. For example, the following SQL statements grant <code class="codeph">LARRY</code> the permission to run anything within <code class="codeph">MyPermission</code> and <code class="codeph">DAVE</code> the permission to run only actions that start with "<code class="codeph">act.</code>".
                                 </p><pre class="oac_no_warn" dir="ltr">REM Since Larry is the user that creates MyPermission, Larry connects to
REW the database to assign permissions for MyPermission.</pre><pre class="oac_no_warn" dir="ltr">connect larry
Enter password: <span class="italic">password</span>

REM Once able to modify PolicyTable for MyPermission, Larry grants himself
REM full permission for MyPermission. Notice that the Permission is prefixed
REM with its owner schema.
call dbms_java.grant_permission( 'LARRY', 'LARRY:test.larry.MyPermission', '*', null);

REM Larry grants Dave permission to do any actions that start with 'act.*'.
call dbms_java.grant_permission
 ('DAVE', 'LARRY:test.larry.MyPermission', 'act.*', null);

REM commit the changes to PolicyTable
commit;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Implement security checks using the permission</span><div>
                                 <p>Once you have created, loaded, and assigned permissions for <code class="codeph">MyPermission</code>, you must implement the call to <code class="codeph">SecurityManager</code> to have the permission checked. There are four methods in the following example: <code class="codeph">sensitive()</code>, <code class="codeph">act()</code>, <code class="codeph">print()</code>, and <code class="codeph">hello()</code>. Because of the permissions granted using SQL in the preceding steps, the following users can run methods within the example class:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">LARRY</code> can run any of the methods.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DAVE</code> is given permission to run only the <code class="codeph">act()</code> method.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Anyone can run the <code class="codeph">print()</code> and <code class="codeph">hello()</code> methods. The <code class="codeph">print()</code> method does not check any permissions. As a result, anyone can run it. The <code class="codeph">hello()</code> method runs <code class="codeph">AccessController.doPrivileged()</code>, which means that the method runs with the permissions assigned to <code class="codeph">LARRY</code>. This is referred to as the definer's rights.
                                       </p>
                                    </li>
                                 </ul><pre class="oac_no_warn" dir="ltr">package test.larry;
import java.security.AccessController;
import java.security.Permission;
import java.security.PrivilegedAction;

import java.sql.Connection;
import java.sql.SQLException;

/**
* MyActions is a class with a variety of public methods that
* have some security risks associated with them. We will rely
* on the Java security mechanisms to ensure that they are
* performed only by code that is authorized to do so.
*/

public class Larry {

  private static String secret = "Larry's secret";
  MyPermission sensitivePermission = new MyPermission("sensitive");

/**
* This is a security sensitive operation. That is it can
* compromise our security if it is executed by a "bad guy".
* Only larry has permission to execute sensitive.
*/
  public void sensitive()
  {
    checkPermission(sensitivePermission);
    print();
  }

/**
* Will display a message from Larry. You must be
* careful about who is allowed to do this
* because messages from Larry may have extra impact.
* Both larry and dave have permission to execute act.
*/
  public void act(String message)
  {
    MyPermission p = new MyPermission("act." + message);
    checkPermission(p);
    System.out.println("Larry says: " + message);
  }

/**
* display secret key
* No permission check is made; anyone can execute print.
*/
  private void print()
  {
    System.out.println(secret);
  }

/**
* Display "Hello"
* This method invokes doPrivileged, which makes the method run
* under definer's rights. So, this method runs under Larry's
* rights, so anyone can execute hello. Only Larry can execute hello
*/
  public void hello()
  {
    AccessController.doPrivileged(new PrivilegedAction() {
      public Object run() { act("hello"); return null; }
    });
  }

/**
* If a security manager is installed ask it to check permission
* otherwise use the AccessController directly
*/
  void checkPermission(Permission permission)
  {
    SecurityManager sm = System.getSecurityManager();
    sm.checkPermission(permission);
  }
}
</pre></div>
                           </li>
                        </ol>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-EC03CF66-8B8F-46FC-AF74-92A856F72B7A" name="GUID-EC03CF66-8B8F-46FC-AF74-92A856F72B7A"></a><h5 id="JJDEV-GUID-EC03CF66-8B8F-46FC-AF74-92A856F72B7A" class="sect5"><span class="enumeration_section">11.2.2.1.4 </span>Enabling or Disabling Permissions
                     </h5>
                     <div>
                        <div class="section">
                           <p>Once you have created a row that defines a permission, you can disable it so that it no longer applies. However, if you decide that you want the row action again, then you can enable the row. You can delete the row from the table if you believe that it will never be used again. To delete, you must first disable the row. If you do not disable the row, then the deletion will not occur.</p>
                           <p>To disable rows, you can use either of the following methods:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">revoke_permission()</code></p>
                                 <p>This method accepts parameters similar to the <code class="codeph">grant()</code> and <code class="codeph">restrict()</code> methods. It searches the entire policy table for all rows that match the parameters provided.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">disable_permission()</code></p>
                                 <p>This method disables only a single row within the policy table. To do this, it accepts the policy table key as parameter. This key is also necessary to enable or delete a permission. To retrieve the permission key number, perform one of the following:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Save the key when it is returned on the grant or limit calls. If you do not foresee a need to ever enable or disable the permission, then you can use the grant and limit calls that do not return the permission number.</p>
                                    </li>
                                    <li>
                                       <p>Look up <a id="d32290e2031" class="indexterm-anchor"></a><code class="codeph">DBA_JAVA_POLICY</code> or <a id="d32290e2036" class="indexterm-anchor"></a><code class="codeph">USER_JAVA_POLICY</code> for the appropriate permission key number.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <p>You can <a id="d32290e2043" class="indexterm-anchor"></a><a id="d32290e2047" class="indexterm-anchor"></a><a id="d32290e2051" class="indexterm-anchor"></a>disable permissions using <code class="codeph">DBMS_JAVA</code>, as follows:
                           </p><pre class="oac_no_warn" dir="ltr">procedure revoke_permission (grantee varchar2, permission_type varchar2, permission_name varchar2, permission_action varchar2)

procedure disable_permission (key number)
</pre><p>You can <a id="d32290e2061" class="indexterm-anchor"></a><a id="d32290e2063" class="indexterm-anchor"></a>disable permissions using Java, as follows:
                           </p><pre class="oac_no_warn" dir="ltr">void oracle.aurora.rdbms.security.PolicyTableManager.revoke (java.lang.String grantee, java.lang.String permission_type,
 java.lang.String permission_name, java.lang.String permission_action_type);

void oracle.aurora.rdbms.security.<a id="d32290e2068" class="indexterm-anchor"></a>PolicyTableManager.disable (long key);
</pre><p>You can <a id="d32290e2075" class="indexterm-anchor"></a>enable permissions using <code class="codeph">DBMS_JAVA</code>, as follows:
                           </p><pre class="oac_no_warn" dir="ltr">procedure enable_permission (key number)
</pre><p>You can <a id="d32290e2087" class="indexterm-anchor"></a>enable permissions using Java, as follows:
                           </p><pre class="oac_no_warn" dir="ltr">void oracle.aurora.rdbms.security.<a id="d32290e2092" class="indexterm-anchor"></a>PolicyTableManager.enable (long key);
</pre><p>You can <a id="d32290e2099" class="indexterm-anchor"></a><a id="d32290e2103" class="indexterm-anchor"></a>delete permissions using <code class="codeph">DBMS_JAVA</code>, as follows:
                           </p><pre class="oac_no_warn" dir="ltr">procedure delete_permission (key number)
</pre><p>You can <a id="d32290e2116" class="indexterm-anchor"></a>delete permissions using Java, as follows:
                           </p><pre class="oac_no_warn" dir="ltr">void oracle.aurora.rdbms.security.<a id="d32290e2121" class="indexterm-anchor"></a>PolicyTableManager.delete (long key);
<a id="d32290e2126" class="indexterm-anchor"></a><a id="d32290e2130" class="indexterm-anchor"></a></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDEV13336"></a><a id="JJDEV13335"></a><div class="props_rev_3"><a id="GUID-87B33A94-4527-463A-95AE-4BCC4550CD57" name="GUID-87B33A94-4527-463A-95AE-4BCC4550CD57"></a><h5 id="JJDEV-GUID-87B33A94-4527-463A-95AE-4BCC4550CD57" class="sect5"><span class="enumeration_section">11.2.2.1.5 </span>About Permission Types
                     </h5>
                     <div>
                        <div class="section">
                           <p>Whenever you want to grant or limit a permission, you must provide the permission type. The permission types with which you control access are the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Java 2 permission types</p>
                              </li>
                              <li>
                                 <p>Oracle-specific permission types</p>
                              </li>
                              <li>
                                 <p>User-defined permission types that extend <code class="codeph">java.security.Permission</code></p>
                              </li>
                           </ul>
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-87B33A94-4527-463A-95AE-4BCC4550CD57__BABFHEIC" title="This table describes the type of the predefined permissions on the left column and the permissions on the right column.">Table 11-1</a> lists the installed <a id="d32290e2243" class="indexterm-anchor"></a>permission types. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-87B33A94-4527-463A-95AE-4BCC4550CD57__BABFHEIC">
                           <p class="titleintable">Table 11-1 Predefined Permissions</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Predefined Permissions" summary="This table describes the type of the predefined permissions on the left column and the permissions on the right column." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d32290e2258">Type</th>
                                    <th align="left" valign="bottom" width="78%" id="d32290e2261">Permissions</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d32290e2266" headers="d32290e2258 ">
                                       <p>Java 2</p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d32290e2266 d32290e2261 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">java.util.PropertyPermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.io.SerializablePermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.io.FilePermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.net.NetPermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.net.SocketPermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.lang.reflect.ReflectPermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.security.SecurityPermission</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d32290e2304" headers="d32290e2258 ">
                                       <p>Oracle specific</p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d32290e2304 d32290e2261 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">oracle.aurora.rdbms.security.PolicyTablePermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">oracle.aurora.security.JServerPermission</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <div class="infoboxnote" id="GUID-87B33A94-4527-463A-95AE-4BCC4550CD57__GUID-9E62950A-14F7-4CFF-94EA-7E3DCF0B2F67">
                              <p class="notep1">Note:</p>
                              <p><code class="codeph">SYS</code> is granted permission to load libraries that come with Oracle Database. However, Oracle JVM does not support other users loading libraries, because loading C libraries within the database is insecure. As a result, you are not allowed to grant <code class="codeph">RuntimePermission</code> for <code class="codeph">loadLibrary.*</code>.
                              </p>
                           </div>
                           <p>The<a id="d32290e2331" class="indexterm-anchor"></a> Oracle-specific permissions are:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">oracle.aurora.rdbms.security.PolicyTablePermission</code></p>
                                 <p><a id="d32290e2342" class="indexterm-anchor"></a>This permission controls who can update the policy table. Once granted the right to update the policy table for a certain permission type, you can control the access to few resources.
                                 </p>
                                 <p>After the initialization of Oracle JVM, only the <code class="codeph">JAVA_ADMIN</code> role can grant administrative rights for the policy table through <code class="codeph">PolicyTablePermission</code>. Once it grants this right to other users, these users can, in turn, update the policy table with their own grant and limitation permissions.
                                 </p>
                                 <p>To grant policy table updates, you can use the <code class="codeph">grant_policy_permission()</code> method, which is in the <code class="codeph">DBMS_JAVA</code> package. Once you have updated the table, you can view either the <code class="codeph">DBA_JAVA_POLICY</code> or <code class="codeph">USER_JAVA_POLICY</code> view to see who has been granted permissions.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">oracle.aurora.security.JServerPermission</code></p>
                                 <p>This permission is used to grant and limit access to Oracle JVM resources. The <code class="codeph">JServerPermission</code> extends <code class="codeph">BasicPermission</code>. The following table lists the permission names for which <code class="codeph">JServerPermission</code> grants access:
                                 </p>
                                 <div class="tblformal" id="GUID-87B33A94-4527-463A-95AE-4BCC4550CD57__GUID-F46F3CA3-CB6A-44A3-8311-FCC242C3CDE0">
                                    <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table lists the permission names for which JServerPermission grants access." width="90%" frame="hsides" border="1" rules="rows">
                                       <thead>
                                          <tr align="left" valign="top">
                                             <th align="left" valign="bottom" width="45%" id="d32290e2392">Permission Name</th>
                                             <th align="left" valign="bottom" width="55%" id="d32290e2395">Description</th>
                                          </tr>
                                       </thead>
                                       <tbody>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2400" headers="d32290e2392 ">
                                                <p><code class="codeph">LoadClassInPackage.</code><span class="italic"><code class="codeph">package_name</code></span></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2400 d32290e2395 ">
                                                <p>Grants the ability to load a class within the specified package</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2411" headers="d32290e2392 ">
                                                <p><code class="codeph">Verifier</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2411 d32290e2395 ">
                                                <p>Grants the ability to turn the bytecode verifier on or off</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2419" headers="d32290e2392 ">
                                                <p><code class="codeph">Debug</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2419 d32290e2395 ">
                                                <p>Grants the ability for debuggers to connect to a session</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2427" headers="d32290e2392 ">
                                                <p><code class="codeph">JRIExtensions</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2427 d32290e2395 ">
                                                <p>Grants the use of MEMSTAT</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2435" headers="d32290e2392 ">
                                                <p><code class="codeph">Memory.Call</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2435 d32290e2395 ">
                                                <p>Grants rights to call certain methods in <code class="codeph">oracle.aurora.vm.OracleRuntime</code> on call settings
                                                </p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2446" headers="d32290e2392 ">
                                                <p><code class="codeph">Memory.Stack</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2446 d32290e2395 ">
                                                <p>Grants rights to call certain methods in <code class="codeph">oracle.aurora.vm.OracleRuntime</code> on stack settings
                                                </p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2457" headers="d32290e2392 ">
                                                <p><code class="codeph">Memory.SGAIntern</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2457 d32290e2395 ">
                                                <p>Grants rights to call certain methods in <code class="codeph">oracle.aurora.vm.OracleRuntime</code> on SGA settings
                                                </p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2468" headers="d32290e2392 ">
                                                <p><code class="codeph">Memory.GC</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2468 d32290e2395 ">
                                                <p>Grants rights to call certain methods in <code class="codeph">oracle.aurora.vm.OracleRuntime</code> on garbage collector settings
                                                </p>
                                             </td>
                                          </tr>
                                       </tbody>
                                    </table>
                                 </div>
                                 <!-- class="inftblhruleinformal" -->
                                 <div class="tblformalwide" id="GUID-87B33A94-4527-463A-95AE-4BCC4550CD57__GUID-A28630BA-5A2C-48B6-9844-E4057DBEF85A">
                                    <p class="titleintable">Table 11-2 JServerPermission Description</p>
                                    <table cellpadding="4" cellspacing="0" class="FormalWide" title="JServerPermission Description" summary="This table describes the permissions for which JServerPermission grants access." width="90%" frame="hsides" border="1" rules="rows">
                                       <thead>
                                          <tr align="left" valign="top">
                                             <th align="left" valign="bottom" width="17%" id="d32290e2491">Grantee</th>
                                             <th align="left" valign="bottom" width="41%" id="d32290e2494">Permission Type</th>
                                             <th align="left" valign="bottom" width="23%" id="d32290e2497">Permission Name</th>
                                             <th align="left" valign="bottom" width="12%" id="d32290e2500">Permission Granted or Restricted</th>
                                             <th align="left" valign="bottom" width="8%" id="d32290e2503">Action</th>
                                          </tr>
                                       </thead>
                                       <tbody>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2508" headers="d32290e2491 ">
                                                <p><code class="codeph">JAVADEBUGPRIV</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2508 d32290e2494 ">
                                                <p><code class="codeph">SYS:oracle.aurora.security.JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2508 d32290e2497 ">
                                                <p><code class="codeph">Debug</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2508 d32290e2500 ">
                                                <p>Granted</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2508 d32290e2503 ">
                                                <p>null</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2527" headers="d32290e2491 ">
                                                <p><code class="codeph">SYS</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2527 d32290e2494 ">
                                                <p><code class="codeph">SYS:oracle.aurora.security.JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2527 d32290e2497 ">
                                                <p><code class="codeph">*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2527 d32290e2500 ">
                                                <p>Granted</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2527 d32290e2503 ">
                                                <p>null</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2546" headers="d32290e2491 ">
                                                <p><code class="codeph">SYS</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2546 d32290e2494 ">
                                                <p><code class="codeph">SYS:oracle.aurora.security.JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2546 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.java.*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2546 d32290e2500 ">
                                                <p>Granted</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2546 d32290e2503 ">
                                                <p>null</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2565" headers="d32290e2491 ">
                                                <p><code class="codeph">SYS</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2565 d32290e2494 ">
                                                <p><code class="codeph">SYS:oracle.aurora.security.JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2565 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.oracle.aurora.*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2565 d32290e2500 ">
                                                <p>Granted</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2565 d32290e2503 ">
                                                <p>null</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2584" headers="d32290e2491 ">
                                                <p><code class="codeph">SYS</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2584 d32290e2494 ">
                                                <p><code class="codeph">SYS:oracle.aurora.security.JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2584 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.oracle.jdbc.*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2584 d32290e2500 ">
                                                <p>Granted</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2584 d32290e2503 ">
                                                <p>null</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2603" headers="d32290e2491 ">
                                                <p><code class="codeph">PUBLIC</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2603 d32290e2494 ">
                                                <p><code class="codeph">SYS:oracle.aurora.security.JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2603 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2603 d32290e2500 ">
                                                <p>Granted</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2603 d32290e2503 ">
                                                <p>null</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2622" headers="d32290e2491 ">
                                                <p><code class="codeph">PUBLIC</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2622 d32290e2494 ">
                                                <p><code class="codeph">SYS:oracle.aurora.security.JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2622 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.java.*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2622 d32290e2500 ">
                                                <p>Restricted</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2622 d32290e2503 ">
                                                <p>null</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2641" headers="d32290e2491 ">
                                                <p><code class="codeph">PUBLIC</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2641 d32290e2494 ">
                                                <p><code class="codeph">SYS:oracle.aurora.security.JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2641 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.oracle.aurora.*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2641 d32290e2500 ">
                                                <p>Restricted</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2641 d32290e2503 ">
                                                <p>null</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2660" headers="d32290e2491 ">
                                                <p><code class="codeph">PUBLIC</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2660 d32290e2494 ">
                                                <p><code class="codeph">SYS:oracle.aurora.security.JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2660 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.oracle.jdbc.*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2660 d32290e2500 ">
                                                <p>Restricted</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2660 d32290e2503 ">
                                                <p>null</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2679" headers="d32290e2491 ">
                                                <p><code class="codeph">JAVA_DEPLOY</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2679 d32290e2494 ">
                                                <p><code class="codeph">SYS:oracle.aurora.security.JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2679 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.oracle.aurora.deploy.*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2679 d32290e2500 ">
                                                <p>Granted</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2679 d32290e2503 ">
                                                <p>null</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2698" headers="d32290e2491 ">
                                                <p><code class="codeph">JAVA_DEPLOY</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2698 d32290e2494 ">
                                                <p><code class="codeph">SYS:oracle.aurora.security.JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2698 d32290e2497 ">
                                                <p><code class="codeph">Deploy</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2698 d32290e2500 ">
                                                <p>Granted</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2698 d32290e2503 ">
                                                <p>null</p>
                                             </td>
                                          </tr>
                                       </tbody>
                                    </table>
                                 </div>
                                 <!-- class="inftblhruleinformal" -->
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDEV13339"></a><a id="JJDEV13340"></a><a id="JJDEV13341"></a><a id="JJDEV13342"></a><a id="JJDEV13338"></a><div class="props_rev_3"><a id="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA" name="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA"></a><h5 id="JJDEV-GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA" class="sect5"><span class="enumeration_section">11.2.2.1.6 </span>About Initial Permission Grants
                     </h5>
                     <div>
                        <div class="section">
                           <p>When you first initialize Oracle JVM, several roles are populated with certain permission grants. The following tables show these roles and their initial Permissions:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABCECGE" title="table">Table 11-3</a></p>
                              </li>
                              <li>
                                 <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABEHIBB" title="table">Table 11-4</a></p>
                              </li>
                              <li>
                                 <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABBIAGC" title="table">Table 11-5</a></p>
                              </li>
                              <li>
                                 <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABHDDDF" title="table">Table 11-6</a></p>
                              </li>
                              <li>
                                 <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABJEJCA" title="table">Table 11-7</a></p>
                              </li>
                           </ul>
                           <p>The <code class="codeph">JAVA_ADMIN</code> role is given access to modify the policy table for all permissions. All DBAs, including <code class="codeph">SYS</code>, are granted <code class="codeph">JAVA_ADMIN</code>. Full administrative rights to update the policy table are granted for the permissions listed in <a href="database-contents-Oracle-JVM-security.html#GUID-87B33A94-4527-463A-95AE-4BCC4550CD57__BABFHEIC" title="This table describes the type of the predefined permissions on the left column and the permissions on the right column.">Table 11-1</a>. In addition to the <code class="codeph">JAVA_ADMIN</code> permissions, <code class="codeph">SYS</code> is granted some additional permissions that are needed to support the standard JDK functionality and Oracle JVM specifics.
                           </p>
                           <p> <a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABCECGE" title="table">Table 11-3</a> lists some of the additional permissions granted to <code class="codeph">SYS</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABCECGE">
                           <p class="titleintable">Table 11-3 SYS Initial Permissions</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="SYS Initial Permissions" summary="table" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="49%" id="d32290e2916">Permission Type</th>
                                    <th align="left" valign="bottom" width="28%" id="d32290e2919">Permission Name</th>
                                    <th align="left" valign="bottom" width="23%" id="d32290e2922">Action</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2927" headers="d32290e2916 ">
                                       <p><code class="codeph">oracle.aurora.rdbms.security. PolicyTablePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2927 d32290e2919 ">
                                       <p><code class="codeph">oracle.aurora.rdbms.security.PolicyTablePermission#*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2927 d32290e2922 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2939" headers="d32290e2916 ">
                                       <p><code class="codeph">oracle.aurora.security.JServerPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2939 d32290e2919 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2939 d32290e2922 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2951" headers="d32290e2916 ">
                                       <p><code class="codeph">java.net.NetPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2951 d32290e2919 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2951 d32290e2922 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2963" headers="d32290e2916 ">
                                       <p><code class="codeph">java.security.SecurityPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2963 d32290e2919 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2963 d32290e2922 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2975" headers="d32290e2916 ">
                                       <p><code class="codeph">java.util.PropertyPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2975 d32290e2919 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2975 d32290e2922 ">
                                       <p>write</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2987" headers="d32290e2916 ">
                                       <p><code class="codeph">java.lang.reflect.ReflectPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2987 d32290e2919 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2987 d32290e2922 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2999" headers="d32290e2916 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2999 d32290e2919 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2999 d32290e2922 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e3011" headers="d32290e2916 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e3011 d32290e2919 ">
                                       <p><code class="codeph">loadLibrary.xaNative</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e3011 d32290e2922 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e3023" headers="d32290e2916 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e3023 d32290e2919 ">
                                       <p><code class="codeph">loadLibrary.corejava</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e3023 d32290e2922 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e3035" headers="d32290e2916 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e3035 d32290e2919 ">
                                       <p><code class="codeph">loadLibrary.corejava_d</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e3035 d32290e2922 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABEHIBB" title="table">Table 11-4</a> lists permissions initially granted or restricted to all users.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABEHIBB">
                           <p class="titleintable">Table 11-4 PUBLIC Default Permissions</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="PUBLIC Default Permissions" summary="table" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d32290e3065">Permission Type</th>
                                    <th align="left" valign="bottom" width="49%" id="d32290e3068">Permission Name</th>
                                    <th align="left" valign="bottom" width="13%" id="d32290e3071">Permission Granted or Restricted</th>
                                    <th align="left" valign="bottom" width="8%" id="d32290e3074">Action</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3079" headers="d32290e3065 ">
                                       <p><code class="codeph">oracle.aurora.rdbms.security. PolicyTablePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3079 d32290e3068 ">
                                       <p><code class="codeph">java.lang.RuntimePermission#loadLibrary.*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3079 d32290e3071 ">
                                       <p>Restricted</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3079 d32290e3074 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3094" headers="d32290e3065 ">
                                       <p><code class="codeph">java.util.PropertyPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3094 d32290e3068 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3094 d32290e3071 ">
                                       <p>Granted</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3094 d32290e3074 ">
                                       <p>read</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3109" headers="d32290e3065 ">
                                       <p><code class="codeph">java.util.PropertyPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3109 d32290e3068 ">
                                       <p><code class="codeph">user.language</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3109 d32290e3071 ">
                                       <p>Granted</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3109 d32290e3074 ">
                                       <p>write</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3124" headers="d32290e3065 ">
                                       <p><code class="codeph">java.util.PropertyPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3124 d32290e3068 ">
                                       <p><code class="codeph">oracle.net.tns_admin</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3124 d32290e3071 ">
                                       <p>Granted</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3124 d32290e3074 ">
                                       <p>write</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3139" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3139 d32290e3068 ">
                                       <p><code class="codeph">exitVM</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3139 d32290e3071 ">
                                       <p>Granted</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3139 d32290e3074 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3154" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3154 d32290e3068 ">
                                       <p><code class="codeph">createSecurityManager</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3154 d32290e3071 ">
                                       <p>Granted</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3154 d32290e3074 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3169" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3169 d32290e3068 ">
                                       <p><code class="codeph">modifyThread</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3169 d32290e3071 ">
                                       <p>Granted</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3169 d32290e3074 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3184" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3184 d32290e3068 ">
                                       <p><code class="codeph">modifyThreadGroup</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3184 d32290e3071 ">
                                       <p>Granted</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3184 d32290e3074 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3199" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3199 d32290e3068 ">
                                       <p><code class="codeph">getenv.ORACLE_HOME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3199 d32290e3071 ">
                                       <p>Granted</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3199 d32290e3074 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3214" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3214 d32290e3068 ">
                                       <p><code class="codeph">getenv.TNS_ADMIN</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3214 d32290e3071 ">
                                       <p>Granted</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3214 d32290e3074 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3229" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3229 d32290e3068 ">
                                       <p><code class="codeph">preferences</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3229 d32290e3071 ">
                                       <p>Granted</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3229 d32290e3074 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3245" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3245 d32290e3068 ">
                                       <p><code class="codeph">loadLibrary.*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3245 d32290e3071 ">
                                       <p>Restricted</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3245 d32290e3074 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3260" headers="d32290e3065 ">
                                       <p><code class="codeph">oracle.aurora.security. JServerPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3260 d32290e3068 ">
                                       <p><code class="codeph">LoadClassInPackage.*</code> except for <code class="codeph">LoadClassInPackage.java.*</code>, <code class="codeph">LoadClassInPackage.oracle.aurora.*</code>, and <code class="codeph">LoadClassInPackage.oracle.jdbc.*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3260 d32290e3071 ">
                                       <p>Granted</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3260 d32290e3074 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABBIAGC" title="table">Table 11-5</a> lists permissions initially granted to the <code class="codeph">JAVAUSERPRIV</code> role.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABBIAGC">
                           <p class="titleintable">Table 11-5 JAVAUSERPRIV Permissions</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="JAVAUSERPRIV Permissions" summary="table" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d32290e3304">Permission Type</th>
                                    <th align="left" valign="bottom" width="58%" id="d32290e3307">Permission Name</th>
                                    <th align="left" valign="bottom" width="9%" id="d32290e3310">Action</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d32290e3315" headers="d32290e3304 ">
                                       <p><code class="codeph">java.net.SocketPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d32290e3315 d32290e3307 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d32290e3315 d32290e3310 ">
                                       <p>connect, resolve</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d32290e3327" headers="d32290e3304 ">
                                       <p><code class="codeph">java.io.FilePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d32290e3327 d32290e3307 ">
                                       <p><code class="codeph">&lt;&lt;ALL FILES&gt;&gt;</code></p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d32290e3327 d32290e3310 ">
                                       <p>read</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d32290e3339" headers="d32290e3304 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d32290e3339 d32290e3307 ">
                                       <p><code class="codeph">stopThread</code></p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d32290e3339 d32290e3310 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d32290e3351" headers="d32290e3304 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d32290e3351 d32290e3307 ">
                                       <p><code class="codeph">getProtectionDomain</code></p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d32290e3351 d32290e3310 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d32290e3363" headers="d32290e3304 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d32290e3363 d32290e3307 ">
                                       <p><code class="codeph">accessClassInPackage.*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d32290e3363 d32290e3310 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d32290e3375" headers="d32290e3304 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d32290e3375 d32290e3307 ">
                                       <p><code class="codeph">defineClassInPackage.*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d32290e3375 d32290e3310 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABHDDDF" title="table">Table 11-6</a> lists permissions initially granted to the <code class="codeph">JAVASYSPRIV</code> role.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABHDDDF">
                           <p class="titleintable">Table 11-6 JAVASYSPRIV Permissions</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="JAVASYSPRIV Permissions" summary="table" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="37%" id="d32290e3407">Permission Type</th>
                                    <th align="left" valign="bottom" width="33%" id="d32290e3410">Permission Name</th>
                                    <th align="left" valign="bottom" width="30%" id="d32290e3413">Action</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3418" headers="d32290e3407 ">
                                       <p><code class="codeph">java.io.SerializablePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3418 d32290e3410 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3418 d32290e3413 ">
                                       <p>no applicable action</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3430" headers="d32290e3407 ">
                                       <p><code class="codeph">java.io.FilePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3430 d32290e3410 ">
                                       <p><code class="codeph">&lt;&lt;ALL FILES&gt;&gt;</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3430 d32290e3413 ">
                                       <p>read, write, execute, delete</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3442" headers="d32290e3407 ">
                                       <p><code class="codeph">java.net.SocketPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3442 d32290e3410 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3442 d32290e3413 ">
                                       <p>accept, connect, listen, resolve</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3454" headers="d32290e3407 ">
                                       <p><code class="codeph">java.sql.SQLPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3454 d32290e3410 ">
                                       <p><code class="codeph">setLog</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3454 d32290e3413 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3466" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3466 d32290e3410 ">
                                       <p><code class="codeph">createClassLoader</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3466 d32290e3413 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3478" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3478 d32290e3410 ">
                                       <p><code class="codeph">getClassLoader</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3478 d32290e3413 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3490" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3490 d32290e3410 ">
                                       <p><code class="codeph">setContextClassLoader</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3490 d32290e3413 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3502" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3502 d32290e3410 ">
                                       <p><code class="codeph">setFactory</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3502 d32290e3413 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3514" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3514 d32290e3410 ">
                                       <p><code class="codeph">setIO</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3514 d32290e3413 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3526" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3526 d32290e3410 ">
                                       <p><code class="codeph">setFileDescriptor</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3526 d32290e3413 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3538" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3538 d32290e3410 ">
                                       <p><code class="codeph">readFileDescriptor</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3538 d32290e3413 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3551" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang.RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3551 d32290e3410 ">
                                       <p><code class="codeph">writeFileDescriptor</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3551 d32290e3413 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABJEJCA" title="table">Table 11-7</a> lists permissions initially granted to the <code class="codeph">JAVADEBUGPRIV</code> role.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABJEJCA">
                           <p class="titleintable">Table 11-7 JAVADEBUGPRIV Permissions</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="JAVADEBUGPRIV Permissions" summary="table" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="50%" id="d32290e3583">Permission Type</th>
                                    <th align="left" valign="bottom" width="27%" id="d32290e3586">Permission Name</th>
                                    <th align="left" valign="bottom" width="23%" id="d32290e3589">Action</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d32290e3594" headers="d32290e3583 ">
                                       <p><code class="codeph">oracle.aurora.security.JServerPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d32290e3594 d32290e3586 ">
                                       <p><code class="codeph">Debug</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e3594 d32290e3589 ">
                                       <p>null</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div><a id="JJDEV13343"></a><div class="props_rev_3"><a id="GUID-1553DDD4-832F-49BB-B407-0BE10C176370" name="GUID-1553DDD4-832F-49BB-B407-0BE10C176370"></a><h4 id="JJDEV-GUID-1553DDD4-832F-49BB-B407-0BE10C176370" class="sect4"><span class="enumeration_section">11.2.2.2 </span>Assigning General Permission Definition to Roles
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d32290e3694" class="indexterm-anchor"></a>In Oracle8<span class="italic">i</span> Database release 8.1.5, Oracle JVM security was controlled by granting the <code class="codeph">JAVASYSPRIV</code>, <code class="codeph">JAVAUSERPRIV</code>, or <code class="codeph">JAVADEBUGPRIV</code> role to schemas. In Oracle Database 12<span class="italic">c</span> Release 1 (12.1), these roles still exist as permission groups. You can set up and define your own collection of permissions. Once defined, you can grant any collection of permissions to any user or role. That user will then have the same permissions that exist within the role. In addition, if you need additional permissions, then you can add individual permissions to either your specified user or role. Permissions defined within the policy table have a cumulative effect.
                        </p>
                        <div class="infoboxnote" id="GUID-1553DDD4-832F-49BB-B407-0BE10C176370__GUID-FB29CD57-C6F3-4D87-8BDB-0E6FE4903D4A">
                           <p class="notep1">Note:</p>
                           <p>The ability to write to properties, granted through the write action on <code class="codeph">PropertyPermission</code>, is no longer granted to all users. Instead, you must have either <code class="codeph">JAVA_ADMIN</code> grant this permission to you or you can receive it by being granted the <code class="codeph">JAVASYSPRIV</code> role.
                           </p>
                        </div>
                        <p>The following example gives Larry and Dave the following permissions:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Larry receives <code class="codeph">JAVASYSPRIV</code> permissions.
                              </p>
                           </li>
                           <li>
                              <p>Dave receives <code class="codeph">JAVADEBUGPRIV</code> permissions and the ability to read and write all files on the system.
                              </p>
                           </li>
                        </ul><pre class="oac_no_warn" dir="ltr">REM Granting Larry the same permissions as those existing within JAVASYSPRIV
grant javasyspriv to larry;

REM Granting Dave the ability to debug
grant javadebugpriv to dave;

commit;

REM I also want Dave to be able to read and write all files on the system
call dbms_java.grant_permission('DAVE', 'SYS:java.io.FilePermission',
 '&lt;&lt;ALL FILES&gt;&gt;', 'read,write', null);
</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="database-contents-Oracle-JVM-security.html#GUID-065CD132-9CAD-44B9-8823-C5C318C6F71A">Fine-Grain Definition for Each Permission</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JJDEV13344"></a><div class="props_rev_3"><a id="GUID-1DF94F34-BBCA-4061-A15C-B8B8E76E07BA" name="GUID-1DF94F34-BBCA-4061-A15C-B8B8E76E07BA"></a><h3 id="JJDEV-GUID-1DF94F34-BBCA-4061-A15C-B8B8E76E07BA" class="sect3"><span class="enumeration_section">11.2.3 </span>Debugging Permissions
               </h3>
               <div>
                  <div class="section">
                     <p>A debug role, <code class="codeph">JAVADEBUGPRIV</code>, was created to grant permissions for running the debugger. The permissions assigned to this role are listed in <a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABJEJCA" title="table">Table 11-7</a>. To receive permission to call the debug agent, the caller must have been granted <code class="codeph">JAVADEBUGPRIV</code> or the debug <code class="codeph">JServerPermission</code> as follows:
                     </p><pre class="oac_no_warn" dir="ltr">REM Granting Dave the ability to debug
grant javadebugpriv to dave;

REM Larry grants himself permission to start the debug agent.
call dbms_java.grant_permission(
  'LARRY', 'oracle.aurora.security.JServerPermission', 'Debug', null);
</pre><p>Although a debugger provides extensive access to both code and data on the server, its use should be limited to development environments.</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDEV13345"></a><div class="props_rev_3"><a id="GUID-E3427117-0517-4B6D-B346-81BB36A51489" name="GUID-E3427117-0517-4B6D-B346-81BB36A51489"></a><h3 id="JJDEV-GUID-E3427117-0517-4B6D-B346-81BB36A51489" class="sect3"><span class="enumeration_section">11.2.4 </span>Permission for Loading Classes
               </h3>
               <div>
                  <div class="section">
                     <p>To load classes, you must have the following permission:</p><pre class="oac_no_warn" dir="ltr">JServerPermission("LoadClassInPackage." + <span class="italic">class_name</span>)
</pre><p>where, <span class="italic"><code class="codeph">class_name</code></span> is the fully qualified name of the class that you are loading.
                     </p>
                     <p>This excludes loading into System packages or replacing any System classes. Even if you are granted permission to load a System class, Oracle Database prevents you from performing the load. System classes are classes that are installed by Oracle Database using the <code class="codeph">CREATE JAVA SYSTEM</code> statement. The following error is thrown if you try to replace a System class:
                     </p><pre class="oac_no_warn" dir="ltr">ORA-01031 "Insufficient privileges"
</pre><p>The following describes what each user can do after database installation:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">SYS</code> can load any class except for System classes.
                           </p>
                        </li>
                        <li>
                           <p>Any user can load classes in its own schema that do not start with the following patterns: <code class="codeph">java.*</code>, <code class="codeph">oracle.aurora.*</code>, and <code class="codeph">oracle.jdbc.*</code>. If the user wants to load such classes into another schema, then it must be granted the <code class="codeph">JServerPermission(LoadClassInPackage.</code><span class="italic"><code class="codeph">class</code></span><code class="codeph">)</code> permission.
                           </p>
                           <p>The following example shows how to grant <code class="codeph">HR</code> permission to load classes into the <code class="codeph">oracle.aurora.tools.*</code> package:
                           </p><pre class="oac_no_warn" dir="ltr">dbms_java.grant_permission('HR','SYS:oracle.aurora.security.JServerPermission','LoadClassInPackage.oracle.aurora.tools.*',null);
</pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDEV13562"></a><a id="JJDEV13561"></a><div class="props_rev_3"><a id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA" name="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA"></a><h3 id="JJDEV-GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA" class="sect3"><span class="enumeration_section">11.2.5 </span>Customizing the Default java.security Resource
               </h3>
               <div>
                  <div class="section">
                     <p>If you want to add a security provider or change the order of the security providers listed in the default <code class="codeph">java.security</code> resource, then you can create an alternate resource and add it to the Database. This change affects all new Oracle JVM sessions that start after the resource is loaded. Perform the following steps to configure the default <code class="codeph">java.security</code> resource:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__CACHCIIF"><span>Create the following file: </span><div>
                           <p><code class="codeph">$ORACLE_HOME/javavm/lib/security/java.security.alt</code></p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Use the following command to copy the contents of the file <code class="codeph">$ORACLE_HOME/javavm/lib/security/java.security</code> into the file created in step 1:</span><div><pre class="oac_no_warn" dir="ltr">cp $ORACLE_HOME/javavm/lib/security/java.security $ORACLE_HOME/javavm/lib/security/java.security.alt
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Edit the <code class="codeph">$ORACLE_HOME/javavm/lib/security/java.security.alt</code> file and make the necessary changes as necessary.</span><div>
                           <div class="infoboxnote" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-BCC2411E-7861-49D2-AC51-3C69825CE4FF">
                              <p class="notep1">Caution:</p>
                              <p>If you make a mistake in specifying the order of the service providers or defined devices, then some features may become unusable.</p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Use the following commands to load the <code class="codeph">java.security.alt</code> file:</span><div>
                           <div class="infoboxnote" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-6D18D5AE-9FA8-4EC7-A23C-846F0691AEDE">
                              <p class="notep1">Note:</p>
                              <p>You must be able to login as <code class="codeph">SYS</code> to load the <code class="codeph">lib/security/java.security.alt</code> file.
                              </p>
                           </div><pre class="oac_no_warn" dir="ltr">cd $ORACLE_HOME/javavm
loadjava -u sys/&lt;sys_pwd&gt; -v -g public lib/security/java.security.alt
</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>This security setting affects every future Oracle JVM session started from the Database. However, the changes in the security settings are not in effect for the loading session.</p>
                     <div class="infoboxnote" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-5FC47FBF-0572-41A8-9F8C-7EB199D7A898">
                        <p class="notep1">Caution:</p>
                        <p>You must have knowledge about the security parameters before configuring them. Incorrect settings can lead to abnormal operations.</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-ADB5119E-D121-4E37-B525-1935EEF1E4FA">
                        <p class="notep1">See Also:</p>
                        <p><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/security/index.html" target="_blank"><code class="codeph">http://docs.oracle.com/javase/7/docs/technotes/guides/security/index.html</code></a> for more information about this security setting
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-BD0B583F-CA34-49F5-A8A5-4AF813F357D2">
                     <p class="titleinexample">Example 11-4 Creating or Replacing Java System</p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-59549488-0C1A-4384-AD09-8FA66AECD6CD">
                     <p>You must now perform a Create or Replace Java System, for <code class="codeph">java.security.alt</code> to provide a different set of security parameters to the OJVM. Before this, all system sessions should be re-started using:
                     </p><pre class="oac_no_warn" dir="ltr">sqlplus / as sysdba
shutdown

sqlplus / as sysdba
startup
</pre><p>Create Java System is performed in the following way:</p><pre class="oac_no_warn" dir="ltr">sqlplus / as sysdba
create or replace java system
</pre><p>For Linux.X64 databases, the Create Java System will not work. In that case, use the following command:</p><pre class="oac_no_warn" dir="ltr">sqlplus / as sysdba
call javavm_sys.rehotload();
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-FCF3FD7D-64D3-436C-AAF4-B6076B420345">
                     <p class="titleinexample">Example 11-5 Restoring the Security Settings</p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-A066F175-79A2-4324-B907-FED52B4FBF39">
                     <p>You can restore the original security settings in either of the two following ways:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Use the following commands:</p><pre class="oac_no_warn" dir="ltr">cd $ORACLE_HOME/javavm
dropjava -u sys/&lt;sys_pwd&gt; -v lib/security/java.security.alt
</pre></li>
                        <li>
                           <p>Use the following commands:</p><pre class="oac_no_warn" dir="ltr">sqlplus sys/&lt;sys_pwd&gt; as sysdba
SQL&gt; drop java resource "lib/security/java.security.alt";
</pre></li>
                     </ul>
                  </div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='12847.developing-simple-database-application.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">
      <meta name="description" content="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">
      <title>Developing a Simple Oracle Database Application</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="2 Day Developer's Guide ">
      <meta property="og:description" content="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="2 Day Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="2-day-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T13:00:30-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94801-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="building-effective-applications.html" title="Previous" type="text/html">
      <link rel="next" href="deploying-database-application.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="2 Day Developer's Guide">
    <meta name="dcterms.isVersionOf" content="TDDDG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="building-effective-applications.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="deploying-database-application.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2 Day Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Developing a Simple Oracle Database Application</li>
            </ol>
            <a id="GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" name="GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7"></a><a id="TDDDG153"></a>
            
            <h2 id="TDDDG-GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" class="sect2"><span class="enumeration_chapter">9 </span>Developing a Simple Oracle Database Application
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='developing-simple-database-application'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C">About the Application</a><br>The application has the following purpose, structure, and naming conventions.
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-D8812009-9F2A-4EB4-A973-036EDA23697D">Creating the Schemas for the Application</a><br>Using the procedure in this section, create the schemas for the application.
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1">Granting Privileges to the Schemas</a><br>To grant privileges to schemas, use the SQL statement <span class="keyword">GRANT</span>.
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D">Creating the Schema Objects and Loading the Data</a><br>This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D">Creating the employees_pkg Package</a><br>This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE">Creating the admin_pkg Package</a><br>This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.
                  </li>
               </ul>
            </div>
            <a id="TDDDG154"></a><div class="props_rev_3"><a id="GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" name="GUID-11A0AA43-2038-4511-9A06-DB24958DF60C"></a><h3 id="TDDDG-GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" class="sect3"><span class="enumeration_section">9.1 </span>About the Application
               </h3>
               <div>
                  <p>The application has the following purpose, structure, and naming conventions.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-436CB761-34D0-49DB-8934-26F9CF88F712">Purpose of the Application</a><br>The application is intended for two kinds of users in a company.
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7">Structure of the Application</a><br>The application uses the following schema objects and schemas.
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-AA217345-C98E-435B-B3C9-F08D085E0980">Naming Conventions in the Application</a><br>The application uses these naming conventions.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">Developing a Simple Oracle Database Application</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG157"></a><div class="props_rev_3"><a id="GUID-436CB761-34D0-49DB-8934-26F9CF88F712" name="GUID-436CB761-34D0-49DB-8934-26F9CF88F712"></a><h4 id="TDDDG-GUID-436CB761-34D0-49DB-8934-26F9CF88F712" class="sect4"><span class="enumeration_section">9.1.1 </span>Purpose of the Application
                  </h4>
                  <div>
                     <p>The application is intended for two kinds of users in a company.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Typical users (managers of employees)</p>
                        </li>
                        <li>
                           <p>Application administrators</p>
                        </li>
                     </ul>
                     <p>Typical users can do the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Get the employees in a given department</p>
                        </li>
                        <li>
                           <p>Get the job history for a given employee</p>
                        </li>
                        <li>
                           <p>Show general information for a given employee (name, department, job, manager, salary, and so on)</p>
                        </li>
                        <li>
                           <p>Change the salary of a given employee</p>
                        </li>
                        <li>
                           <p>Change the job of a given employee</p>
                        </li>
                     </ul>
                     <p>Application administrators can do the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Change the ID, title, or salary range of an existing job</p>
                        </li>
                        <li>
                           <p>Add a new job</p>
                        </li>
                        <li>
                           <p>Change the ID, name, or manager of an existing department</p>
                        </li>
                        <li>
                           <p>Add a new department</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG158"></a><div class="props_rev_3"><a id="GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" name="GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7"></a><h4 id="TDDDG-GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" class="sect4"><span class="enumeration_section">9.1.2 </span>Structure of the Application
                  </h4>
                  <div>
                     <p>The application uses the following schema objects and schemas.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9">Schema Objects of the Application</a><br></li>
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-DA4704AD-7557-4455-889E-3E1745B56D81">Schemas for the Application</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TDDDG161"></a><div class="props_rev_3"><a id="GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9" name="GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9"></a><h5 id="TDDDG-GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9" class="sect5"><span class="enumeration_section">9.1.2.1 </span>Schema Objects of the Application
                     </h5>
                     <div>
                        <p>The application is composed of these schema objects:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Four tables, which store data about:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Jobs</p>
                                 </li>
                                 <li>
                                    <p>Departments</p>
                                 </li>
                                 <li>
                                    <p>Employees</p>
                                 </li>
                                 <li>
                                    <p>Job history of employees</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Four editioning views, which cover the tables, enabling you to use edition-based redefinition (EBR) to upgrade the finished application when it is in use</p>
                           </li>
                           <li>
                              <p>Two triggers, which enforce business rules</p>
                           </li>
                           <li>
                              <p>Two sequences that generate unique primary keys for new departments and new employees</p>
                           </li>
                           <li>
                              <p>Two packages:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>employees_pkg, the application program interface (API) for typical users</p>
                                 </li>
                                 <li>
                                    <p>admin_pkg, the API for application administrators</p>
                                 </li>
                              </ul>
                              <p>The typical users and application administrators access the application only through its APIs. Therefore, they can change the data only by invoking package subprograms.</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9__GUID-39DF9CBB-66D3-4B7E-99F2-215A81EB83E5">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="two-day-developer-intro.html#GUID-D6CEA186-A6ED-4E4B-A479-76E0CAFCA0BA" title="Oracle Database groups related information into logical structures called schemas. The logical structures contain schema objects.">About Oracle Database</a>"</span> for information about schema objects
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../adfns/editions.html#ADFNS020" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for information about EBR
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" title="The application uses the following schema objects and schemas.">Structure of the Application</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG162"></a><div class="props_rev_3"><a id="GUID-DA4704AD-7557-4455-889E-3E1745B56D81" name="GUID-DA4704AD-7557-4455-889E-3E1745B56D81"></a><h5 id="TDDDG-GUID-DA4704AD-7557-4455-889E-3E1745B56D81" class="sect5"><span class="enumeration_section">9.1.2.2 </span>Schemas for the Application
                     </h5>
                     <div>
                        <p>For security, the application uses these five schemas (or users), each of which has <span class="italic">only</span> the privileges that it needs:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>app_data, who owns all the schema objects except the packages and loads its tables with data from tables in the sample schema HR</p>
                              <p>The developers who create the packages never work in this schema. Therefore, they cannot accidently alter or drop application schema objects.</p>
                           </li>
                           <li>
                              <p>app_code, who owns only the package employees_pkg</p>
                              <p>The developers of employees_pkg work in this schema.</p>
                           </li>
                           <li>
                              <p>app_admin, who owns only the package admin_pkg</p>
                              <p>The developers of admin_pkg work in this schema.</p>
                           </li>
                           <li>
                              <p>app_user, the typical application user, who owns nothing and can only execute employees_pkg</p>
                              <p>The middle-tier application server connects to the database in the connection pool as app_user. If this schema is compromised—by a SQL injection bug, for example—the attacker can see and change only what employees_pkg subprograms let it see and change. The attacker cannot drop tables, escalate privileges, create or alter schema objects, or anything else.</p>
                           </li>
                           <li>
                              <p>app_admin_user, an application administrator, who owns nothing and can only execute admin_pkg and employees_pkg</p>
                              <p>The connection pool for this schema is very small, and only privileged users can access it. If this schema is compromised, the attacker can see and change only what admin_pkg and employees_pkg subprograms let it see and change.</p>
                           </li>
                        </ul>
                        <p>Suppose that instead of app_user and app_admin_user, the application had only one schema that owned nothing and could execute both employees_pkg and admin_pkg. The connection pool for this schema would have to be large enough for both the typical users and the application administrators. If there were a SQL injection bug in employees_pkg, a typical user who exploited that bug could access admin_pkg.</p>
                        <p>Suppose that instead of app_data, app_code, and app_admin, the application had only one schema that owned all the schema objects, including the packages. The packages would then have all privileges on the tables, which would be both unnecessary and undesirable.</p>
                        <p>For example, suppose that you have an audit trail table, AUDIT_TRAIL. You want the developers of employees_pkg to be able to write to AUDIT_TRAIL, but not read or change it. You want the developers of admin_pkg to be able to read AUDIT_TRAIL and write to it, but not change it. If AUDIT_TRAIL, employees_pkg, and admin_pkg belong to the same schema, then the developers of the two packages have all privileges on AUDIT_TRAIL. However, if AUDIT_TRAIL belongs to app_data, employees_pkg belongs to app_code, and admin_pkg belongs to app_admin, then you can connect to the database as app_data and do this:</p><pre class="oac_no_warn" dir="ltr">GRANT INSERT ON AUDIT_TRAIL TO app_code;
GRANT INSERT, SELECT ON AUDIT_TRAIL TO app_admin;</pre></div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-DA4704AD-7557-4455-889E-3E1745B56D81__GUID-C71C1BD3-57D6-406A-8EBD-65F56550C15D">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="two-day-developer-intro.html#GUID-D6CEA186-A6ED-4E4B-A479-76E0CAFCA0BA" title="Oracle Database groups related information into logical structures called schemas. The logical structures contain schema objects.">About Oracle Database</a>"</span> for information about schemas
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="two-day-developer-intro.html#GUID-F55D4815-FCD8-4075-AEBC-BC2B57A47F9E" title="The HR sample schema can be installed with Oracle Database. This schema contains information about employees—departments, locations, work histories, and related information. Like all schemas, HR has tables, views, indexes, procedures, functions, and other attributes. The examples and tutorials in this document use the schema.">About Sample Schema HR</a>"</span> for information about sample schema <code class="codeph">HR</code></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="building-effective-applications.html#GUID-32FBC335-6B08-4B50-B039-06BB9F500908" title="When granting privileges on the schema objects that comprise your application, use the principle of least privilege.">Recommended Security Practices</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" title="The application uses the following schema objects and schemas.">Structure of the Application</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TDDDG286"></a><div class="props_rev_3"><a id="GUID-AA217345-C98E-435B-B3C9-F08D085E0980" name="GUID-AA217345-C98E-435B-B3C9-F08D085E0980"></a><h4 id="TDDDG-GUID-AA217345-C98E-435B-B3C9-F08D085E0980" class="sect4"><span class="enumeration_section">9.1.3 </span>Naming Conventions in the Application
                  </h4>
                  <div>
                     <p>The application uses these naming conventions.</p>
                     <div class="tblformal" id="GUID-AA217345-C98E-435B-B3C9-F08D085E0980__GUID-8CE6D53D-040D-4C9C-A848-4881C8CAB52D">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Left column lists the items for which the application has naming conventions. Right column describes those conventions." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="52%" id="d40654e657">Item</th>
                                 <th align="left" valign="bottom" width="48%" id="d40654e660">Name</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e665" headers="d40654e657 ">
                                    <p>Table</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e665 d40654e660 ">
                                    <p><span class="italic">table</span>#
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e674" headers="d40654e657 ">
                                    <p>Editioning view for <span class="italic">table</span>#
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e674 d40654e660 ">
                                    <p><span class="italic">table</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e685" headers="d40654e657 ">
                                    <p>Trigger on editioning view <span class="italic">table</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e685 d40654e660 ">
                                    <p><span class="italic">table</span>_{a|b}<span class="italic">event</span>[_fer] where:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>a identifies an AFTER trigger.</p>
                                       </li>
                                       <li>
                                          <p>b identifies a BEFORE trigger.</p>
                                       </li>
                                       <li>
                                          <p>fer identifies a FOR EACH ROW trigger.</p>
                                       </li>
                                       <li>
                                          <p><span class="italic">event</span> identifies the event that fires the trigger. For example: i for INSERT, iu for INSERT or UPDATE, d for DELETE.
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e714" headers="d40654e657 ">
                                    <p>PRIMARY KEY constraint in <span class="italic">table</span>#
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e714 d40654e660 ">
                                    <p><span class="italic">table</span>_pk
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e726" headers="d40654e657 ">
                                    <p>NOT NULL constraint on <span class="italic">table</span>#.<span class="italic">column</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e726 d40654e660 ">
                                    <p><span class="italic">table_column</span>_not_null<a id="GUID-AA217345-C98E-435B-B3C9-F08D085E0980__BABDAEBB" name="GUID-AA217345-C98E-435B-B3C9-F08D085E0980__BABDAEBB" href="#GUID-AA217345-C98E-435B-B3C9-F08D085E0980__BABDAEBB" onclick="footdisplay(1, "table, table1, and table2 are abbreviated to emp for employees, dept for departments, and job_hist for job_history.")"><sup>Foot&nbsp;1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e751" headers="d40654e657 ">
                                    <p>UNIQUE constraint on <span class="italic">table</span>#.<span class="italic">column</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e751 d40654e660 ">
                                    <p><span class="italic">table_column</span>_unique<a id="fnsrc_d40654e764" name="fnsrc_d40654e764" href="#fnsrc_d40654e764" onclick="footdisplay(1, "table, table1, and table2 are abbreviated to emp for employees, dept for departments, and job_hist for job_history.")"><sup>Footref&nbsp;1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e767" headers="d40654e657 ">
                                    <p>CHECK constraint on <span class="italic">table</span>#.<span class="italic">column</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e767 d40654e660 ">
                                    <p><span class="italic">table_column</span>_check<a id="fnsrc_d40654e780" name="fnsrc_d40654e780" href="#fnsrc_d40654e780" onclick="footdisplay(1, "table, table1, and table2 are abbreviated to emp for employees, dept for departments, and job_hist for job_history.")"><sup>Footref&nbsp;1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e783" headers="d40654e657 ">
                                    <p>REF constraint on <span class="italic">table1</span>#.<span class="italic">column</span> to <span class="italic">table2</span>#.<span class="italic">column</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e783 d40654e660 ">
                                    <p><span class="italic">table1</span><code class="codeph">_to_</code><span class="italic">table2</span>_fk<a id="fnsrc_d40654e806" name="fnsrc_d40654e806" href="#fnsrc_d40654e806" onclick="footdisplay(1, "table, table1, and table2 are abbreviated to emp for employees, dept for departments, and job_hist for job_history.")"><sup>Footref&nbsp;1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e809" headers="d40654e657 ">
                                    <p>REF constraint on <span class="italic">table1</span>#.<span class="italic">column1</span> to <span class="italic">table2</span>#.<span class="italic">column2</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e809 d40654e660 ">
                                    <p><span class="italic">table1_col1</span>_to_<span class="italic">table2_col2</span>_fk<a id="fnsrc_d40654e831" name="fnsrc_d40654e831" href="#fnsrc_d40654e831" onclick="footdisplay(1, "table, table1, and table2 are abbreviated to emp for employees, dept for departments, and job_hist for job_history.")"><sup>Footref&nbsp;1</sup></a> <a id="fn_2" name="fn_2" href="#fn_2" onclick="footdisplay(2, "col1 and col2 are abbreviations of column names column1 and column2. A constraint name cannot have more than 30 characters.")"><sup>Foot&nbsp;2</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e849" headers="d40654e657 ">
                                    <p>Sequence for <span class="italic">table</span>#
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e849 d40654e660 ">
                                    <p><span class="italic">table_sequence</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e860" headers="d40654e657 ">
                                    <p>Parameter name</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e860 d40654e660 ">
                                    <p>p_<span class="italic">name</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e870" headers="d40654e657 ">
                                    <p>Local variable name</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e870 d40654e660 ">
                                    <p>l_<span class="italic">name</span></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup></p><p><span class="italic">table</span>, <span class="italic">table1</span>, and <span class="italic">table2</span> are abbreviated to emp for employees, dept for departments, and job_hist for job_history.
                        </p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;2 </sup></p><p><span class="italic">col1</span> and <span class="italic">col2</span> are abbreviations of column names <span class="italic">column1</span> and <span class="italic">column2</span>. A constraint name cannot have more than 30 characters.
                        </p>
                     <p></p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG164"></a><a id="TDDDG155"></a><div class="props_rev_3"><a id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D" name="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D"></a><h3 id="TDDDG-GUID-D8812009-9F2A-4EB4-A973-036EDA23697D" class="sect3"><span class="enumeration_section">9.2 </span>Creating the Schemas for the Application
               </h3>
               <div>
                  <p>Using the procedure in this section, create the schemas for the application.</p>
                  <div class="section">
                     <p>The schema names are:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>app_data</p>
                        </li>
                        <li>
                           <p>app_code</p>
                        </li>
                        <li>
                           <p>app_admin</p>
                        </li>
                        <li>
                           <p>app_user</p>
                        </li>
                        <li>
                           <p>app_admin_user</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-4BCC71E9-1DAD-4085-A110-F39B0976727B">
                        <p class="notep1">Note:</p>
                        <p>For the following procedure, you need the name and password of a user who has the <span class="keyword">CREATE USER</span> and <span class="keyword">DROP USER</span> system privileges.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-BF340FDB-259A-407B-ADF0-A401A02FB205">To create the schema (or user) <span class="italic">schema_name</span>:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Using SQL*Plus, connect to Oracle Database as a user with the <span class="keyword">CREATE USER</span> and <span class="keyword">DROP USER</span> system privileges.</span><div>
                           <p>The <samp class="sysout">SQL&gt;</samp> prompt appears.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>In case the schema exists, drop the schema and its objects with this SQL statement:</span><div><pre class="oac_no_warn" dir="ltr">DROP USER <span class="italic">schema_name</span> CASCADE;
</pre><p>If the schema existed, the system responds:</p><pre class="oac_no_warn" dir="ltr">User dropped.
</pre><p>If the schema did not exist, the system responds:</p><pre class="oac_no_warn" dir="ltr">DROP USER <span class="italic">schema_name</span> CASCADE
          *
ERROR at line 1:
ORA-01918: user '<span class="italic">schema_name</span>' does not exist
</pre></div>
                     </li>
                     <li class="stepexpand"><span>If <span class="italic"><code class="codeph">schema_name</code></span> is either <code class="codeph">app_data</code>, <code class="codeph">app_code</code>, or <code class="codeph">app_admin</code>, then create the schema with this SQL statement:</span><div><pre class="oac_no_warn" dir="ltr">CREATE USER <span class="italic">schema_name</span> IDENTIFIED BY <span class="italic">password</span>
DEFAULT TABLESPACE USERS
QUOTA UNLIMITED ON USERS
ENABLE EDITIONS;
</pre><p>Otherwise, create the schema with this SQL statement:</p><pre class="oac_no_warn" dir="ltr">CREATE USER <span class="italic">schema_name</span> IDENTIFIED BY <span class="italic">password</span>
ENABLE EDITIONS;</pre><div class="infoboxnote" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-B7C28A86-140E-49F3-85C0-2D4EA8FC1E98">
                              <p class="notep1">Caution:</p>
                              <p>Choose a secure password. For guidelines for secure passwords, see <a href="../dbseg/keeping-your-oracle-database-secure.html#DBSEG10005" target="_blank"><span class="italic">Oracle Database Security Guide</span></a>.
                              </p>
                           </div>
                           <p>The system responds:</p><pre class="oac_no_warn" dir="ltr">User created.
</pre></div>
                     </li>
                     <li class="stepexpand"><span>(Optional) In SQL Developer, create a connection for the schema, using the instructions in <span class="q">"<a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">Connecting to Oracle Database from SQL Developer</a>"</span>.</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-03CA2CB8-0A21-4DFE-8307-4FB0DCCB564C">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL*Plus is a client program from which you can access Oracle Database. This topic shows how to start SQL*Plus and connect to Oracle Database.">Connecting to Oracle Database from SQL*Plus</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/DROP-USER.html#SQLRF01811" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">DROP</code> <code class="codeph">USER</code> statement
                           </p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/CREATE-USER.html#SQLRF01503" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">CREATE</code> <code class="codeph">USER</code> statement
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">Developing a Simple Oracle Database Application</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TDDDG165"></a><div class="props_rev_3"><a id="GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" name="GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1"></a><h3 id="TDDDG-GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" class="sect3"><span class="enumeration_section">9.3 </span>Granting Privileges to the Schemas
               </h3>
               <div>
                  <p>To grant privileges to schemas, use the SQL statement <span class="keyword">GRANT</span>.
                  </p>
                  <div class="section">
                     <p>You can enter the <span class="keyword">GRANT</span> statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. For security, grant each schema <span class="italic">only</span> the privileges that it needs.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8">Granting Privileges to the app_data Schema</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC">Granting Privileges to the app_code Schema</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67">Granting Privileges to the app_admin Schema</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788">Granting Privileges to the app_user and app_admin_user Schemas</a><br></li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1__GUID-8D933627-9BCD-488D-8ACB-BFE4783C9363">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <span class="keyword">GRANT</span> statement
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">Developing a Simple Oracle Database Application</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG167"></a><div class="props_rev_3"><a id="GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8" name="GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8"></a><h4 id="TDDDG-GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8" class="sect4"><span class="enumeration_section">9.3.1 </span>Granting Privileges to the app_data Schema
                  </h4>
                  <div>
                     <div class="section">
                        <p>Grant to the app_data schema <span class="italic">only</span> the privileges to do the following:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connect to Oracle Database:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION TO app_data;
</pre></li>
                           <li>
                              <p>Create the tables, views, triggers, and sequences for the application:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE TABLE, CREATE VIEW, CREATE TRIGGER, CREATE SEQUENCE TO app_data;
</pre></li>
                           <li>
                              <p>Load data from four tables in the sample schema HR into its own tables:</p><pre class="oac_no_warn" dir="ltr">GRANT SELECT ON <span class="bold">HR.DEPARTMENTS</span> TO app_data;
GRANT SELECT ON <span class="bold">HR.EMPLOYEES</span> TO app_data;
GRANT SELECT ON <span class="bold">HR.JOB_HISTORY</span> TO app_data;
GRANT SELECT ON <span class="bold">HR.JOBS</span> TO app_data;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="To grant privileges to schemas, use the SQL statement GRANT.">Granting Privileges to the Schemas</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG170"></a><div class="props_rev_3"><a id="GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC" name="GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC"></a><h4 id="TDDDG-GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC" class="sect4"><span class="enumeration_section">9.3.2 </span>Granting Privileges to the app_code Schema
                  </h4>
                  <div>
                     <div class="section">
                        <p>Grant to the app_code schema <span class="italic">only</span> the privileges to do the following:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connect to Oracle Database:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION TO app_code;
</pre></li>
                           <li>
                              <p>Create the package employees_pkg:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE PROCEDURE TO app_code;
</pre></li>
                           <li>
                              <p>Create a synonym (for convenience):</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SYNONYM TO app_code;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="To grant privileges to schemas, use the SQL statement GRANT.">Granting Privileges to the Schemas</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG171"></a><div class="props_rev_3"><a id="GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67" name="GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67"></a><h4 id="TDDDG-GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67" class="sect4"><span class="enumeration_section">9.3.3 </span>Granting Privileges to the app_admin Schema
                  </h4>
                  <div>
                     <div class="section">
                        <p>Grant to the app_admin schema <span class="italic">only</span> the privileges to do the following:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connect to Oracle Database:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION TO app_admin;
</pre></li>
                           <li>
                              <p>Create the package admin_pkg:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE PROCEDURE TO app_admin;
</pre></li>
                           <li>
                              <p>Create a synonym (for convenience):</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SYNONYM TO app_admin;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="To grant privileges to schemas, use the SQL statement GRANT.">Granting Privileges to the Schemas</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG243"></a><div class="props_rev_3"><a id="GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788" name="GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788"></a><h4 id="TDDDG-GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788" class="sect4"><span class="enumeration_section">9.3.4 </span>Granting Privileges to the app_user and app_admin_user Schemas
                  </h4>
                  <div>
                     <div class="section">
                        <p>Grant to the app_user and app_admin_user schemas <span class="italic">only</span> the privileges to do the following:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connect to Oracle Database:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION TO app_user;
GRANT CREATE SESSION TO app_admin_user;
</pre></li>
                           <li>
                              <p>Create synonyms (for convenience):</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SYNONYM TO app_user;
GRANT CREATE SYNONYM TO app_admin_user;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="To grant privileges to schemas, use the SQL statement GRANT.">Granting Privileges to the Schemas</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG284"></a><a id="TDDDG283"></a><div class="props_rev_3"><a id="GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" name="GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D"></a><h3 id="TDDDG-GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" class="sect3"><span class="enumeration_section">9.4 </span>Creating the Schema Objects and Loading the Data
               </h3>
               <div>
                  <p>This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D__GUID-FB250A64-9086-428A-83F9-95CEEABA16D1">To create the schema objects and load the data:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Connect to Oracle Database as user app_data.</span><div>
                           <p>For instructions, see either <span class="q">"<a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL*Plus is a client program from which you can access Oracle Database. This topic shows how to start SQL*Plus and connect to Oracle Database.">Connecting to Oracle Database from SQL*Plus</a>"</span> or <span class="q">"<a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">Connecting to Oracle Database from SQL Developer</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create the tables, with all necessary constraints except the foreign key constraint that you must add after you load the data.</span></li>
                     <li class="stepexpand"><span>Create the editioning views.</span></li>
                     <li class="stepexpand"><span>Create the triggers.</span></li>
                     <li class="stepexpand"><span>Create the sequences.</span></li>
                     <li class="stepexpand"><span>Load the data into the tables.</span></li>
                     <li class="stepexpand"><span>Add the foreign key constraint.</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF">Creating the Tables</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-768FDDA1-1A22-4DEE-9890-450FA676A049">Creating the Editioning Views</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E">Creating the Triggers</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396">Creating the Sequences</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24">Loading the Data</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90">Adding the Foreign Key Constraint</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-4A22470D-2C45-44A9-940F-E39771CCCE76">Granting Privileges on the Schema Objects to Users</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">Developing a Simple Oracle Database Application</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG287"></a><a id="TDDDG285"></a><div class="props_rev_3"><a id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF" name="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF"></a><h4 id="TDDDG-GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF" class="sect4"><span class="enumeration_section">9.4.1 </span>Creating the Tables
                  </h4>
                  <div>
                     <div class="section">
                        <p>This section shows how to create the tables for the application, with all necessary constraints except one, which you must add after you load the data.</p>
                        <div class="infoboxnote" id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF__GUID-66E96FBE-3079-48EF-8551-40BE6FBE87EA">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user <code class="codeph">app_data</code>.
                           </p>
                        </div>
                        <p>In the following procedure, you can enter the statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the tables with the SQL Developer tool Create Table.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF__GUID-D197EBA9-507A-4F23-98B2-6E620B2B7B7C">To create the tables:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create jobs#, which stores information about the jobs in the company (one row for each job):</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE jobs#
( job_id      VARCHAR2(10)
              CONSTRAINT jobs_pk PRIMARY KEY,
  job_title   VARCHAR2(35)
              CONSTRAINT jobs_job_title_not_null NOT NULL,
  min_salary  NUMBER(6)
              CONSTRAINT jobs_min_salary_not_null NOT NULL,
  max_salary  NUMBER(6)
              CONSTRAINT jobs_max_salary_not_null NOT NULL
)
/
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create departments#, which stores information about the departments in the company (one row for each department):</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE departments#
( department_id    NUMBER(4)
                   CONSTRAINT departments_pk PRIMARY KEY,
  department_name  VARCHAR2(30)
                   CONSTRAINT department_name_not_null NOT NULL
                   CONSTRAINT department_name_unique UNIQUE,
  manager_id       NUMBER(6)
)
/
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create employees#, which stores information about the employees in the company (one row for each employee):</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE employees#
( employee_id     NUMBER(6)
                  CONSTRAINT employees_pk PRIMARY KEY,
  first_name      VARCHAR2(20)
                  CONSTRAINT emp_first_name_not_null NOT NULL,
  last_name       VARCHAR2(25)
                  CONSTRAINT emp_last_name_not_null NOT NULL,
  email_addr      VARCHAR2(25) 
                  CONSTRAINT emp_email_addr_not_null NOT NULL,
  hire_date       DATE
                  DEFAULT TRUNC(SYSDATE)
                  CONSTRAINT emp_hire_date_not_null NOT NULL
                  CONSTRAINT emp_hire_date_check
                    CHECK(TRUNC(hire_date) = hire_date),
  country_code    VARCHAR2(5)
                  CONSTRAINT emp_country_code_not_null NOT NULL,
  phone_number    VARCHAR2(20)
                  CONSTRAINT emp_phone_number_not_null NOT NULL,
  <span class="bold">job_id</span>          CONSTRAINT emp_job_id_not_null NOT NULL
                  CONSTRAINT emp_jobs_fk <span class="bold">REFERENCES jobs#</span>,
  job_start_date  DATE
                  CONSTRAINT emp_job_start_date_not_null NOT NULL,
                  CONSTRAINT emp_job_start_date_check
                    CHECK(TRUNC(JOB_START_DATE) = job_start_date),
  salary          NUMBER(6)
                  CONSTRAINT emp_salary_not_null NOT NULL,
  <span class="bold">manager_id</span>      CONSTRAINT emp_mgr_to_empno_fk <span class="bold">REFERENCES employees#</span>,
  <span class="bold">department_id</span>   CONSTRAINT emp_to_dept_fk <span class="bold">REFERENCES departments#</span>
)
/
</pre><p>The reasons for the REF constraints are:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>An employee must have an existing job. That is, values in the column employees#.job_id must also be values in the column jobs#.job_id.</p>
                                 </li>
                                 <li>
                                    <p>An employee must have a manager who is also an employee. That is, values in the column employees#.manager_id must also be values in the column employees#.employee_id.</p>
                                 </li>
                                 <li>
                                    <p>An employee must work in an existing department. That is, values in the column employees#.department_id must also be values in the column departments#.department_id.</p>
                                 </li>
                              </ul>
                              <p>Also, the manager of an employee must be the manager of the department in which the employee works. That is, values in the column employees#.manager_id must also be values in the column departments#.manager_id. However, you could not specify the necessary constraint when you created departments#, because employees# did not exist yet. Therefore, you must add a foreign key constraint to departments# later (see <span class="q">"<a href="developing-simple-database-application.html#GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90">Adding the Foreign Key Constraint</a>"</span>).
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create job_history#, which stores the job history of each employee in the company (one row for each job held by the employee):</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE job_history#
( employee_id  CONSTRAINT job_hist_to_employees_fk <span class="bold">REFERENCES employees#</span>,
  job_id       CONSTRAINT job_hist_to_jobs_fk <span class="bold">REFERENCES jobs#</span>,
  start_date   DATE
               CONSTRAINT job_hist_start_date_not_null NOT NULL,
  end_date     DATE
               CONSTRAINT job_hist_end_date_not_null NOT NULL,
  department_id
             CONSTRAINT job_hist_to_departments_fk <span class="bold">REFERENCES departments#</span>
             CONSTRAINT job_hist_dept_id_not_null NOT NULL,
             CONSTRAINT job_history_pk PRIMARY KEY(employee_id,start_date),
             CONSTRAINT job_history_date_check CHECK( start_date &lt; end_date )
)
/
</pre><p>The reasons for the REF constraints are that the employee, job, and department must exist. That is:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Values in the column job_history#.employee_id must also be values in the column employees#.employee_id.</p>
                                 </li>
                                 <li>
                                    <p>Values in the column job_history#.job_id must also be values in the column jobs#.job_id.</p>
                                 </li>
                                 <li>
                                    <p>Values in the column job_history#.department_id must also be values in the column departments#.department_id.</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF__GUID-1E98C0F2-6F8A-443D-912F-1AB09ADE3782">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-87AA2B05-2B7B-49D9-AD21-1B2877113D23" title="To create tables, use either the SQL Developer tool Create Table or the DDL statement CREATE TABLE.">Creating Tables</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG288"></a><div class="props_rev_3"><a id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049" name="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049"></a><h4 id="TDDDG-GUID-768FDDA1-1A22-4DEE-9890-450FA676A049" class="sect4"><span class="enumeration_section">9.4.2 </span>Creating the Editioning Views
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049__GUID-27894E6F-A616-45DA-A5A2-E74FC3875B1E">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_data.</p>
                        </div>
                        <p>To create the editioning views, use the following statements (in any order). You can enter the statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the editioning views with the SQL Developer tool Create View.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE EDITIONING VIEW jobs AS SELECT * FROM jobs#
/
CREATE OR REPLACE EDITIONING VIEW departments AS SELECT * FROM departments#
/
CREATE OR REPLACE EDITIONING VIEW employees AS SELECT * FROM employees#
/
CREATE OR REPLACE EDITIONING VIEW job_history AS SELECT * FROM job_history#
/</pre><div class="infoboxnote" id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049__GUID-07C078BC-D782-4DBE-BB81-8B161E9E5452">
                           <p class="notep1">Note:</p>
                           <p>The application must always reference the base tables through the editioning views. Otherwise, the editioning views do not cover the tables and you cannot use EBR to upgrade the finished application when it is in use.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049__GUID-C798D39A-5B8B-4054-8B01-920F362AFBCD">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-31755C84-1EE1-41FF-9EC8-FD8CDE2D5BC1" title="To create views, use either the SQL Developer tool Create View or the DDL statement CREATE VIEW.">Creating Views</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../adfns/editions.html#ADFNS0202" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for general information about editioning views
                              </p>
                           </li>
                           <li>
                              <p><a href="../adfns/editions.html#ADFNS99917" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for information about preparing an application to use editioning views
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG289"></a><div class="props_rev_3"><a id="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E" name="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E"></a><h4 id="TDDDG-GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E" class="sect4"><span class="enumeration_section">9.4.3 </span>Creating the Triggers
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E__GUID-03DA2D70-A4E5-4FC6-AA9A-BEFFB3AB63E9">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_data.</p>
                        </div>
                        <p>The triggers in the application enforce these business rules:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>An employee with job <span class="italic">j</span> must have a salary between the minimum and maximum salaries for job <span class="italic">j</span>.
                              </p>
                           </li>
                           <li>
                              <p>If an employee with job <span class="italic">j</span> has salary <span class="italic">s</span>, then you cannot change the minimum salary for <span class="italic">j</span> to a value greater than <span class="italic">s</span> or the maximum salary for <span class="italic">j</span> to a value less than <span class="italic">s</span>. (To do so would make existing data invalid.)
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E">Creating the Trigger to Enforce the First Business Rule</a><br>The first business rule is: An employee with job <span class="italic">j</span> must have a salary between the minimum and maximum salaries for job <span class="italic">j</span>.
                        </li>
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-9A964406-B333-4064-9171-A9CA69B71E75">Creating the Trigger to Enforce the Second Business Rule</a><br>The second business rule is: If an employee with job <span class="italic">j</span> has salary <span class="italic">s</span>, then you cannot change the minimum salary for <span class="italic">j</span> to a value greater than <span class="italic">s</span> or the maximum salary for <span class="italic">j</span> to a value less than <span class="italic">s</span>. (To do so would make existing data invalid.)
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E__GUID-51C8BB99-7CBC-48E3-9129-3756F2355875">
                        <p class="notep1">See Also:</p>
                        <p><a href="using-triggers.html#GUID-3744214A-861D-4C59-AD2D-95840B5B0871" title="Triggers are stored PL/SQL units that automatically execute ("fire") in response to specified events.">Using Triggers</a>, for information about triggers
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TDDDG290"></a><div class="props_rev_3"><a id="GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" name="GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E"></a><h5 id="TDDDG-GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" class="sect5"><span class="enumeration_section">9.4.3.1 </span>Creating the Trigger to Enforce the First Business Rule
                     </h5>
                     <div>
                        <p>The first business rule is: An employee with job <span class="italic">j</span> must have a salary between the minimum and maximum salaries for job <span class="italic">j</span>.
                        </p>
                        <div class="section">
                           <p>This rule could be violated either when a new row is inserted into the employees table or when the salary or job_id column of the employees table is updated.</p>
                           <p>To enforce the rule, create the following trigger on the editioning view employees. You can enter the <span class="keyword">CREATE TRIGGER</span> statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the trigger with the SQL Developer tool Create Trigger.
                           </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TRIGGER employees_aiufer
AFTER INSERT OR UPDATE OF salary, job_id ON employees FOR EACH ROW
DECLARE
  l_cnt NUMBER;
BEGIN
  <span class="bold">LOCK TABLE jobs IN SHARE MODE;</span>  -- Ensure that jobs does not change
                                  -- during the following query.
  SELECT COUNT(*) INTO l_cnt
  FROM jobs
  WHERE job_id = :NEW.job_id
  AND :NEW.salary BETWEEN min_salary AND max_salary;
 
  IF (l_cnt&lt;&gt;1) THEN
    RAISE_APPLICATION_ERROR( -20002,
      CASE
        WHEN :new.job_id = :old.job_id
        THEN 'Salary modification invalid'
        ELSE 'Job reassignment puts salary out of range'
      END );
  END IF;
END;
/
</pre><p><code class="codeph">LOCK TABLE jobs IN SHARE MODE</code> prevents other users from changing the table jobs while the trigger is querying it. Preventing changes to jobs during the query is necessary because nonblocking reads prevent the trigger from "seeing" changes that other users make to jobs while the trigger is changing employees (and prevent those users from "seeing" the changes that the trigger makes to employees).
                           </p>
                           <p>Another way to prevent changes to jobs during the query is to include the <span class="keyword">FOR UPDATE</span> clause in the <span class="keyword">SELECT</span> statement. However, <span class="keyword">SELECT FOR UPDATE</span> restricts concurrency more than <span class="keyword">LOCK TABLE jobs IN SHARE MODE</span> does.
                           </p>
                           <p><code class="codeph">LOCK TABLE jobs IN SHARE MODE</code> prevents other users from changing jobs, but not from locking jobs in share mode themselves. Changes to jobs will probably be much rarer than changes to employees. Therefore, locking jobs in share mode provides more concurrency than locking a single row of jobs in exclusive mode.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E__GUID-904717E7-1148-49F5-91B4-C4CF7DB78089">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../adfns/sql-processing-for-application-developers.html#ADFNS99941" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for information about locking tables <span class="keyword">IN SHARE MODE</span></p>
                              </li>
                              <li>
                                 <p><a href="../lnpls/static-sql.html#LNPLS603" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about <span class="keyword">SELECT FOR UPDATE</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="To create triggers, use either the SQL Developer graphical interface or the DDL statement CREATE TRIGGER.">Creating Triggers</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="developing-simple-database-application.html#GUID-06901C50-69DC-4D42-9074-FB40FF8356EA" title="Using SQL*Plus, this tutorial shows how the subprograms of the employees_pkg package work. The tutorial also shows how the trigger employees_aiufer and the CHECK constraint job_history_date_check work.">Tutorial: Showing How the employees_pkg Subprograms Work</a>"</span> to see how the employees_aiufer trigger works
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E">Creating the Triggers</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG291"></a><div class="props_rev_3"><a id="GUID-9A964406-B333-4064-9171-A9CA69B71E75" name="GUID-9A964406-B333-4064-9171-A9CA69B71E75"></a><h5 id="TDDDG-GUID-9A964406-B333-4064-9171-A9CA69B71E75" class="sect5"><span class="enumeration_section">9.4.3.2 </span>Creating the Trigger to Enforce the Second Business Rule
                     </h5>
                     <div>
                        <p>The second business rule is: If an employee with job <span class="italic">j</span> has salary <span class="italic">s</span>, then you cannot change the minimum salary for <span class="italic">j</span> to a value greater than <span class="italic">s</span> or the maximum salary for <span class="italic">j</span> to a value less than <span class="italic">s</span>. (To do so would make existing data invalid.)
                        </p>
                        <div class="section">
                           <p>This rule could be violated when the min_salary or max_salary column of the jobs table is updated.</p>
                           <p>To enforce the rule, create the following trigger on the editioning view jobs. You can enter the <span class="keyword">CREATE TRIGGER</span> statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the trigger with the SQL Developer tool Create Trigger.
                           </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TRIGGER jobs_aufer
AFTER UPDATE OF min_salary, max_salary ON jobs FOR EACH ROW
WHEN (NEW.min_salary &gt; OLD.min_salary OR NEW.max_salary &lt; OLD.max_salary)
DECLARE
  l_cnt NUMBER;
BEGIN
  <span class="bold">LOCK TABLE employees IN SHARE MODE;</span>

  SELECT COUNT(*) INTO l_cnt
  FROM employees
  WHERE job_id = :NEW.job_id
  AND salary NOT BETWEEN :NEW.min_salary and :NEW.max_salary;

  IF (l_cnt&gt;0) THEN
    RAISE_APPLICATION_ERROR( -20001,
      'Salary update would violate ' || l_cnt || ' existing employee records' );
  END IF;
END;
/
</pre><p><code class="codeph">LOCK TABLE employees IN SHARE MODE</code> prevents other users from changing the table employees while the trigger is querying it. Preventing changes to employees during the query is necessary because nonblocking reads prevent the trigger from "seeing" changes that other users make to employees while the trigger is changing jobs (and prevent those users from "seeing" the changes that the trigger makes to jobs).
                           </p>
                           <p>For this trigger, <span class="keyword">SELECT FOR UPDATE</span> is not an alternative to <span class="keyword">LOCK TABLE IN SHARE MODE</span>. While you are trying to change the salary range for this job, this trigger must prevent other users from changing a salary to be outside the new range. Therefore, the trigger must lock all rows in the employees table that have this job_id <span class="italic">and</span> lock all rows that someone could update to have this job_id.
                           </p>
                           <p>One alternative to <code class="codeph">LOCK TABLE employees IN SHARE MODE</code> is to use the DBMS_LOCK package to create a named lock with the name of the job_id and then use triggers on both the employees and jobs tables to use this named lock to prevent concurrent updates. However, using DBMS_LOCK and multiple triggers negatively impacts runtime performance.
                           </p>
                           <p>Another alternative to <code class="codeph">LOCK TABLE employees IN SHARE MODE</code> is to create a trigger on the employees table which, for each changed row of employees, locks the corresponding job row in jobs. However, this approach causes excessive work on updates to the employees table, which are frequent.
                           </p>
                           <p><code class="codeph">LOCK TABLE employees IN SHARE MODE</code> is simpler than the preceding alternatives, and changes to the jobs table are rare and likely to happen at application maintenance time, when locking the table does not inconvenience users.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-9A964406-B333-4064-9171-A9CA69B71E75__GUID-DCBE8BE8-47EF-4A39-9B68-55767FBB19E0">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../adfns/sql-processing-for-application-developers.html#ADFNS99941" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for information about locking tables with <code class="codeph">SHARE</code> <code class="codeph">MODE</code></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_LOCK.html#ARPLS021" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_LOCK</code> package
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="To create triggers, use either the SQL Developer graphical interface or the DDL statement CREATE TRIGGER.">Creating Triggers</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="developing-simple-database-application.html#GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80" title="Using SQL*Plus, this tutorial shows how the subprograms of the admin_pkg package work. The tutorial also shows how the trigger jobs_aufer works.">Tutorial: Showing How the admin_pkg Subprograms Work</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E">Creating the Triggers</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TDDDG295"></a><div class="props_rev_3"><a id="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396" name="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396"></a><h4 id="TDDDG-GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396" class="sect4"><span class="enumeration_section">9.4.4 </span>Creating the Sequences
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396__GUID-8BE30CBA-E591-49C1-9DAF-4411EE43DC9C">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_data.</p>
                        </div>
                        <p>To create the sequences that generate unique primary keys for new departments and new employees, use the following statements (in either order). You can enter the statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the sequences with the SQL Developer tool Create Sequence.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE SEQUENCE employees_sequence START WITH 210;
CREATE SEQUENCE departments_sequence START WITH 275;
</pre><p>To avoid conflict with the data that you will load from tables in the sample schema HR, the starting numbers for employees_sequence and departments_sequence must exceed the maximum values of employees.employee_id and departments.department_id, respectively. After <span class="q">"<a href="developing-simple-database-application.html#GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24">Loading the Data</a>"</span>, this query displays these maximum values:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT MAX(e.employee_id), MAX(d.department_id)
FROM employees e, departments d;
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">MAX(E.EMPLOYEE_ID) MAX(D.DEPARTMENT_ID)
------------------ --------------------
               206                  270</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396__GUID-948461FC-8EB0-429B-A716-EB8D90FE8201">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-474CBF2A-BDBF-498E-98DA-16B59E4D8050" title="Sequences are schema objects from which you can generate unique sequential values, which are very useful when you need unique primary keys. Sequences are used through the pseudocolumns CURRVAL and NEXTVAL, which return the current and next values of the sequence, respectively.">Creating and Managing Sequences</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG293"></a><a id="TDDDG292"></a><div class="props_rev_3"><a id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24" name="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24"></a><h4 id="TDDDG-GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24" class="sect4"><span class="enumeration_section">9.4.5 </span>Loading the Data
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-DF76FD7E-5E87-4500-B80F-E156EE5F5820">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_data.</p>
                        </div>
                        <p>Load the tables of the application with data from tables in the sample schema HR.</p>
                        <div class="infoboxnote" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-7FAE29A2-9876-40E6-A724-22BD820DD3EF">
                           <p class="notep1">Note:</p>
                           <p>The following procedure references the tables of the application through their editioning views.</p>
                        </div>
                        <p>In the following procedure, you can enter the statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-8FAD1AC2-B181-4AB5-9E30-48523B18CC7B">To load data into the tables:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Load jobs with data from the table HR.JOBS:</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO jobs (job_id, job_title, min_salary, max_salary)
SELECT job_id, job_title, min_salary, max_salary
  FROM HR.JOBS
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">19 rows created.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Load departments with data from the table HR.DEPARTMENTS:</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO departments (department_id, department_name, manager_id)
SELECT department_id, department_name, manager_id
  FROM HR.DEPARTMENTS
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">27 rows created.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Load employees with data from the tables HR.EMPLOYEES and HR.JOB_HISTORY, using searched <span class="keyword">CASE</span> expressions and SQL functions to get employees.country_code and employees.phone_number from HR.phone_number and SQL functions and a scalar subquery to get employees.job_start_date from HR.JOB_HISTORY:</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO employees (employee_id, first_name, last_name, email_addr,
  hire_date, country_code, phone_number, job_id, job_start_date, salary,
  manager_id, department_id)
SELECT employee_id, first_name, last_name, email, hire_date,
  CASE WHEN phone_number LIKE '011.%'
    THEN '+' || SUBSTR( phone_number, INSTR( phone_number, '.' )+1,
      INSTR( phone_number, '.', 1, 2 ) -  INSTR( phone_number, '.' ) - 1 )
    ELSE '+1'
  END country_code,
  CASE WHEN phone_number LIKE '011.%'
    THEN SUBSTR( phone_number, INSTR(phone_number, '.', 1, 2 )+1 )
    ELSE phone_number
  END phone_number,
  job_id,
  NVL( (SELECT MAX(end_date+1)
        FROM HR.JOB_HISTORY jh
        WHERE jh.employee_id = employees.employee_id), hire_date),
  salary, manager_id, department_id  
  FROM HR.EMPLOYEES
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">107 rows created.</pre><div class="infoboxnote" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-CFA34815-11D3-474B-8443-9D8CB5172243">
                                 <p class="notep1">Note:</p>
                                 <p>The preceding <code class="codeph">INSERT</code> statement fires the trigger created in <span class="q">"<a href="developing-simple-database-application.html#GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" title="The first business rule is: An employee with job j must have a salary between the minimum and maximum salaries for job j.">Creating the Trigger to Enforce the First Business Rule</a>"</span>.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Load job_history with data from the table HR.JOB_HISTORY:</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO job_history (employee_id, job_id, start_date, end_date,
  department_id)
SELECT employee_id, job_id, start_date, end_date, department_id
  FROM HR.JOB_HISTORY
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">10 rows created.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Commit the changes:</span><div><pre class="oac_no_warn" dir="ltr">COMMIT;</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-ED1393DA-5B2B-4FE3-B6C3-BB2B28758BDB">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="dml-and-transactions.html#GUID-E49519F6-5B93-43D9-852B-C6EB3DA8F1E1" title="The INSERT statement inserts rows into an existing table.">About the INSERT Statement</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="two-day-developer-intro.html#GUID-F55D4815-FCD8-4075-AEBC-BC2B57A47F9E" title="The HR sample schema can be installed with Oracle Database. This schema contains information about employees—departments, locations, work histories, and related information. Like all schemas, HR has tables, views, indexes, procedures, functions, and other attributes. The examples and tutorials in this document use the schema.">About Sample Schema HR</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="connecting-exploring-database.html#GUID-B7BACC62-95F0-42D9-BA26-882FE5268A0F" title="A CASE expression lets you use IF ... THEN ... ELSE logic in SQL statements without invoking subprograms. There are two kinds of CASE expressions, simple and searched.">Using CASE Expressions in Queries</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="connecting-exploring-database.html#GUID-703425FD-82B2-400F-AA87-C48604CE89FF" title="The NULL-related functions facilitate the handling of NULL values.">Using NULL-Related Functions in Queries</a>"</span> for information about the <code class="codeph">NVL</code> function
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/Functions.html#SQLRF006" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">SQL</code> functions
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG294"></a><div class="props_rev_3"><a id="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90" name="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90"></a><h4 id="TDDDG-GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90" class="sect4"><span class="enumeration_section">9.4.6 </span>Adding the Foreign Key Constraint
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90__GUID-6F6428F6-E766-4207-9294-2CA59329329D">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_data.</p>
                        </div>
                        <p>Now that the tables departments and employees contain data, add a foreign key constraint with the following <span class="keyword">ALTER TABLE</span> statement. You can enter the statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can add the constraint with the SQL Developer tool Add Foreign Key.
                        </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE departments#
ADD CONSTRAINT dept_to_emp_fk
FOREIGN KEY(manager_id) REFERENCES employees#;
</pre><p>If you add this foreign key constraint before departments# and employees# contain data, then you get this error when you try to load either of them with data:</p><pre class="oac_no_warn" dir="ltr">ORA-02291: integrity constraint (APP_DATA.JOB_HIST_TO_DEPT_FK) violated - parent key not found</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90__GUID-3821D366-62C7-44D5-B5F1-E11B6250B9FC">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-A951A80F-7774-4620-8497-12E7DFFB663E" title="This tutorial shows how to add constraints to existing tables using both SQL Developer tools and the ALTER TABLE statement.">Tutorial: Adding Constraints to Existing Tables</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG296"></a><div class="props_rev_3"><a id="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76" name="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76"></a><h4 id="TDDDG-GUID-4A22470D-2C45-44A9-940F-E39771CCCE76" class="sect4"><span class="enumeration_section">9.4.7 </span>Granting Privileges on the Schema Objects to Users
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76__GUID-C27129B1-CD15-4231-A823-3F79D58A2C5A">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_data.</p>
                        </div>
                        <p>To grant privileges to users, use the SQL statement <span class="keyword">GRANT</span>. You can enter the <span class="keyword">GRANT</span> statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer.
                        </p>
                        <p>Grant to app_code <span class="italic">only</span> the privileges that it needs to create employees_pkg:
                        </p><pre class="oac_no_warn" dir="ltr">GRANT SELECT, INSERT, UPDATE, DELETE ON employees TO app_code;
GRANT SELECT ON departments TO app_code;
GRANT SELECT ON jobs TO app_code;
GRANT SELECT, INSERT on job_history TO app_code;
GRANT SELECT ON employees_sequence TO app_code;
</pre><p>Grant to app_admin <span class="italic">only</span> the privileges that it needs to create admin_pkg:
                        </p><pre class="oac_no_warn" dir="ltr">GRANT SELECT, INSERT, UPDATE, DELETE ON jobs TO app_admin;
GRANT SELECT, INSERT, UPDATE, DELETE ON departments TO app_admin;
GRANT SELECT ON employees_sequence TO app_admin;
GRANT SELECT ON departments_sequence TO app_admin;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76__GUID-A6CEEE31-96F2-4E10-B9D7-FEE739956BF5">
                        <p class="notep1">See Also:</p>
                        <p><a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">GRANT</code> statement
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG298"></a><a id="TDDDG297"></a><div class="props_rev_3"><a id="GUID-A814459E-682F-44DB-8421-CB960B924F2D" name="GUID-A814459E-682F-44DB-8421-CB960B924F2D"></a><h3 id="TDDDG-GUID-A814459E-682F-44DB-8421-CB960B924F2D" class="sect3"><span class="enumeration_section">9.5 </span>Creating the employees_pkg Package
               </h3>
               <div>
                  <p>This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-A814459E-682F-44DB-8421-CB960B924F2D__GUID-356AFDC3-BF42-4D24-999F-CA49444090CA">To create the employees_pkg package:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Connect to Oracle Database as user app_code.</span><div>
                           <p>For instructions, see either <span class="q">"<a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL*Plus is a client program from which you can access Oracle Database. This topic shows how to start SQL*Plus and connect to Oracle Database.">Connecting to Oracle Database from SQL*Plus</a>"</span> or <span class="q">"<a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">Connecting to Oracle Database from SQL Developer</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create these synonyms:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE SYNONYM <span class="bold">employees</span> FOR app_data.employees;
CREATE OR REPLACE SYNONYM <span class="bold">departments</span> FOR app_data.departments;
CREATE OR REPLACE SYNONYM <span class="bold">jobs</span> FOR app_data.jobs;
CREATE OR REPLACE SYNONYM <span class="bold">job_history</span> FOR app_data.job_history;
</pre><p>You can enter the <span class="keyword">CREATE SYNONYM</span> statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the synonyms with the SQL Developer tool Create Synonym.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create the package specification.</span></li>
                     <li class="stepexpand"><span>Create the package body.</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-47D45AFD-E557-420A-8757-E04F23FA896E">Creating the Package Specification for employees_pkg</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB">Creating the Package Body for employees_pkg</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-06901C50-69DC-4D42-9074-FB40FF8356EA">Tutorial: Showing How the employees_pkg Subprograms Work</a><br>Using SQL*Plus, this tutorial shows how the subprograms of the employees_pkg package work. The tutorial also shows how the trigger employees_aiufer and the <span class="keyword">CHECK</span> constraint job_history_date_check work.
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25">Granting the Execute Privilege to app_user and app_admin_user</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C">Tutorial: Invoking get_job_history as app_user or app_admin_user</a><br>Using SQL*Plus, this tutorial shows how to invoke the subprogram app_code.employees_pkg.get_job_history as the user app_user (typically a manager) or app_admin_user (an application administrator).
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A814459E-682F-44DB-8421-CB960B924F2D__GUID-7FBB6D7F-1955-48AA-A486-E0D678ADA6C7">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-75E0379C-171F-408D-8DAE-7EC55982F83F" title="To create a synonym, use either the SQL Developer tool Create Database Synonym or the DDL statement CREATE SYNONYM .">Creating Synonyms</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-711EE477-C725-40BE-A82B-1880EECBF912" title="A package is a PL/SQL unit that consists of related subprograms and the declared cursors and variables that they use. Oracle recommends that you put your subprograms into packages.">About Packages</a>"</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">Developing a Simple Oracle Database Application</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG299"></a><div class="props_rev_3"><a id="GUID-47D45AFD-E557-420A-8757-E04F23FA896E" name="GUID-47D45AFD-E557-420A-8757-E04F23FA896E"></a><h4 id="TDDDG-GUID-47D45AFD-E557-420A-8757-E04F23FA896E" class="sect4"><span class="enumeration_section">9.5.1 </span>Creating the Package Specification for employees_pkg
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-47D45AFD-E557-420A-8757-E04F23FA896E__GUID-E0FFAA2B-6CF4-4D32-A4F9-61FF445CA383">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_code.</p>
                        </div>
                        <p>To create the package specification for employees_pkg, the API for managers, use the following <span class="keyword">CREATE PACKAGE</span> statement. You can enter the statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the package with the SQL Developer tool Create Package.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE employees_pkg
AS
  PROCEDURE get_employees_in_dept
    ( p_deptno     IN     employees.department_id%TYPE,
      p_result_set IN OUT SYS_REFCURSOR );
 
  PROCEDURE get_job_history
    ( p_employee_id  IN     employees.department_id%TYPE,
      p_result_set   IN OUT SYS_REFCURSOR );
 
  PROCEDURE show_employee
    ( p_employee_id  IN     employees.employee_id%TYPE,
      p_result_set   IN OUT SYS_REFCURSOR );
 
  PROCEDURE update_salary
    ( p_employee_id IN employees.employee_id%TYPE,
      p_new_salary  IN employees.salary%TYPE );
 
  PROCEDURE change_job
    ( p_employee_id IN employees.employee_id%TYPE,
      p_new_job     IN employees.job_id%TYPE,
      p_new_salary  IN employees.salary%TYPE := NULL,
      p_new_dept    IN employees.department_id%TYPE := NULL );
 
END employees_pkg;
/</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-47D45AFD-E557-420A-8757-E04F23FA896E__GUID-464ADE65-571A-447B-99A1-18BFC4320C8C">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="You can create and manage PL/SQL packages.">Creating and Managing Packages</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../lnpls/CREATE-PACKAGE-statement.html#LNPLS01371" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about the <span class="keyword">CREATE PACKAGE</span> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.">Creating the employees_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG300"></a><div class="props_rev_3"><a id="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB" name="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB"></a><h4 id="TDDDG-GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB" class="sect4"><span class="enumeration_section">9.5.2 </span>Creating the Package Body for employees_pkg
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB__GUID-91AC2F7C-F396-460E-884E-17C040FF751B">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_code.</p>
                        </div>
                        <p>To create the package body for employees_pkg, the API for managers, use the following <span class="keyword">CREATE PACKAGE BODY</span> statement. You can enter the statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the package with the SQL Developer tool Create Body.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE BODY employees_pkg
AS
  PROCEDURE get_employees_in_dept
    ( p_deptno     IN     employees.department_id%TYPE,
      p_result_set IN OUT SYS_REFCURSOR )
  IS
     l_cursor SYS_REFCURSOR;
  BEGIN
    OPEN p_result_set FOR
      SELECT e.employee_id,
        e.first_name || ' ' || e.last_name name,
        TO_CHAR( e.hire_date, 'Dy Mon ddth, yyyy' ) hire_date,
        j.job_title,
        m.first_name || ' ' || m.last_name manager,
        d.department_name
      FROM employees e INNER JOIN jobs j ON (e.job_id = j.job_id)
        LEFT OUTER JOIN employees m ON (e.manager_id = m.employee_id)
        INNER JOIN departments d ON (e.department_id = d.department_id)
      WHERE e.department_id = p_deptno ;
  END get_employees_in_dept;
 
  PROCEDURE get_job_history
    ( p_employee_id  IN     employees.department_id%TYPE,
      p_result_set   IN OUT SYS_REFCURSOR )
  IS 
  BEGIN
    OPEN p_result_set FOR
      SELECT e.First_name || ' ' || e.last_name name, j.job_title,
        e.job_start_date start_date,
        TO_DATE(NULL) end_date
      FROM employees e INNER JOIN jobs j ON (e.job_id = j.job_id)
      WHERE e.employee_id = p_employee_id
      UNION ALL
      SELECT e.First_name || ' ' || e.last_name name,
        j.job_title,
        jh.start_date,
        jh.end_date
      FROM employees e INNER JOIN job_history jh
        ON (e.employee_id = jh.employee_id)
        INNER JOIN jobs j ON (jh.job_id = j.job_id)
      WHERE e.employee_id = p_employee_id
      ORDER BY start_date DESC;
  END get_job_history;
 
  PROCEDURE show_employee
    ( p_employee_id  IN     employees.employee_id%TYPE,
      p_result_set   IN OUT sys_refcursor )
  IS 
  BEGIN
    OPEN p_result_set FOR
      SELECT *
      FROM (SELECT TO_CHAR(e.employee_id) employee_id,
              e.first_name || ' ' || e.last_name name,
              e.email_addr,
              TO_CHAR(e.hire_date,'dd-mon-yyyy') hire_date,
              e.country_code,
              e.phone_number,
              j.job_title,
              TO_CHAR(e.job_start_date,'dd-mon-yyyy') job_start_date,
              to_char(e.salary) salary,
              m.first_name || ' ' || m.last_name manager,
              d.department_name
            FROM employees e INNER JOIN jobs j on (e.job_id = j.job_id)
              RIGHT OUTER JOIN employees m ON (m.employee_id = e.manager_id)
              INNER JOIN departments d ON (e.department_id = d.department_id)
            WHERE e.employee_id = p_employee_id)
      UNPIVOT (VALUE FOR ATTRIBUTE IN (employee_id, name, email_addr, hire_date,
        country_code, phone_number, job_title, job_start_date, salary, manager,
        department_name) );
  END show_employee;
 
  PROCEDURE update_salary
    ( p_employee_id IN employees.employee_id%type,
      p_new_salary  IN employees.salary%type )
  IS 
  BEGIN
    UPDATE employees
    SET salary = p_new_salary
    WHERE employee_id = p_employee_id;
  END update_salary;
 
  PROCEDURE change_job
    ( p_employee_id IN employees.employee_id%TYPE,
      p_new_job     IN employees.job_id%TYPE,
      p_new_salary  IN employees.salary%TYPE := NULL,
      p_new_dept    IN employees.department_id%TYPE := NULL )
  IS
  BEGIN
    INSERT INTO job_history (employee_id, start_date, end_date, job_id,
      department_id)
    SELECT employee_id, job_start_date, TRUNC(SYSDATE), job_id, department_id
      FROM employees
      WHERE employee_id = p_employee_id;
 
    UPDATE employees
    SET job_id = p_new_job,
      department_id = NVL( p_new_dept, department_id ),
      salary = NVL( p_new_salary, salary ),
      job_start_date = TRUNC(SYSDATE)
    WHERE employee_id = p_employee_id;
  END change_job;
END employees_pkg;
/</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB__GUID-447B81C2-0231-4435-A5A8-7005A9A5D8FB">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="You can create and manage PL/SQL packages.">Creating and Managing Packages</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../lnpls/CREATE-PACKAGE-BODY-statement.html#LNPLS01372" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about the <span class="keyword">CREATE PACKAGE BODY</span> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.">Creating the employees_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG302"></a><a id="TDDDG301"></a><div class="props_rev_3"><a id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA" name="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA"></a><h4 id="TDDDG-GUID-06901C50-69DC-4D42-9074-FB40FF8356EA" class="sect4"><span class="enumeration_section">9.5.3 </span>Tutorial: Showing How the employees_pkg Subprograms Work
                  </h4>
                  <div>
                     <p>Using SQL*Plus, this tutorial shows how the subprograms of the employees_pkg package work. The tutorial also shows how the trigger employees_aiufer and the <span class="keyword">CHECK</span> constraint job_history_date_check work.
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA__GUID-15417D4B-4187-4725-A86A-70458903A76E">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_code from SQL*Plus.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA__GUID-4D8E8C84-C4CD-40F7-8DEA-6CC3CDF5D631">To use SQL*Plus to show how the employees_pkg subprograms work:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Use formatting commands to improve the readability of the output. For example:</span><div><pre class="oac_no_warn" dir="ltr">SET LINESIZE 80
SET RECSEP WRAPPED
SET RECSEPCHAR "="
COLUMN NAME FORMAT A15 WORD_WRAPPED
COLUMN HIRE_DATE FORMAT A20 WORD_WRAPPED
COLUMN DEPARTMENT_NAME FORMAT A10 WORD_WRAPPED
COLUMN JOB_TITLE FORMAT A29 WORD_WRAPPED
COLUMN MANAGER FORMAT A11 WORD_WRAPPED
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Declare a bind variable for the value of the subprogram parameter <span class="parmname" translate="no">p_result_set</span>:</span><div><pre class="oac_no_warn" dir="ltr">VARIABLE c REFCURSOR
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show the employees in department 90:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.get_employees_in_dept( 90, :c )</span>;
PRINT c
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">EMPLOYEE_ID NAME            HIRE_DATE            JOB_TITLE                 
----------- --------------- -------------------- --------------------------
MANAGER     DEPARTMENT                                                          
----------- ----------                                                          
        100 Steven King     Tue Jun 17th, 2003   President                      
            Executive                                                         ===========================================================================
        102 Lex De Haan     Sat Jan 13th, 2001   Administration Vice President  
Steven King Executive                                                      
===========================================================================
        101 Neena Kochhar   Wed Sep 21st, 2005   Administration Vice President  
Steven King Executive                                                      
===========================================================================
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show the job history of employee 101:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.get_job_history( 101, :c )</span>;
PRINT c
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">NAME            JOB_TITLE                     START_DAT END_DATE
--------------- ----------------------------- --------- ---------
Neena Kochhar   Administration Vice President 16-MAR-05          
Neena Kochhar   Accounting Manager            28-OCT-01 15-MAR-05
Neena Kochhar   Public Accountant             21-SEP-97 27-OCT-01
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show general information about employee 101:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.show_employee( 101, :c )</span>;
PRINT c
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">ATTRIBUTE       VALUE
--------------- ----------------------------------------------
EMPLOYEE_ID     101
NAME            Neena Kochhar
EMAIL_ADDR      NKOCHHAR
HIRE_DATE       21-sep-2005
COUNTRY_CODE    +1
PHONE_NUMBER    515.123.4568
<span class="bold">JOB_TITLE       Administration Vice President</span>
JOB_START_DATE  16-mar-05
<span class="bold">SALARY          17000</span>
MANAGER         Steven King
DEPARTMENT_NAME Executive
 
11 rows selected.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show the information about the job Administration Vice President:</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM jobs WHERE job_title = 'Administration Vice President';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">JOB_ID     JOB_TITLE                     MIN_SALARY MAX_SALARY
---------- ----------------------------- ---------- ----------
AD_VP      Administration Vice President      15000      30000
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Try to give employee 101 a new salary outside the range for her job:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.update_salary( 101, 30001 )</span>;
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXEC employees_pkg.update_salary( 101, 30001 );
BEGIN employees_pkg.update_salary( 101, 30001 ); END;
 
*
ERROR at line 1:
ORA-20002: Salary modification invalid
ORA-06512: at "APP_DATA.EMPLOYEES_AIUFER", line 13
<span class="bold">ORA-04088: error during execution of trigger 'APP_DATA.EMPLOYEES_AIUFER'</span>
ORA-06512: at "APP_CODE.EMPLOYEES_PKG", line 77
ORA-06512: at line 1
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Give employee 101 a new salary inside the range for her job and show general information about her again:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.update_salary( 101, 18000 )</span>;
EXEC <span class="bold">employees_pkg.show_employee( 101, :c )</span>;
PRINT c
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">ATTRIBUTE       VALUE
--------------- ----------------------------------------------
EMPLOYEE_ID     101
NAME            Neena Kochhar
EMAIL_ADDR      NKOCHHAR
HIRE_DATE       21-sep-2005
COUNTRY_CODE    +1
PHONE_NUMBER    515.123.4568
JOB_TITLE       Administration Vice President
JOB_START_DATE  16-mar-05
<span class="bold">SALARY          18000</span>
MANAGER         Steven King
DEPARTMENT_NAME Executive
 
11 rows selected.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Change the job of employee 101 to her current job with a lower salary:</span><div><pre class="oac_no_warn" dir="ltr">EXEC employees_pkg.change_job( 101, 'AD_VP', 17500, 90 );
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; exec employees_pkg.change_job( 101, 'AD_VP', 17500, 90 );
BEGIN employees_pkg.change_job( 101, 'AD_VP', 17500, 80 ); END;
 
*
ERROR at line 1:
<span class="bold">ORA-02290: check constraint (APP_DATA.JOB_HISTORY_DATE_CHECK) violated</span>
ORA-06512: at "APP_CODE.EMPLOYEES_PKG", line 101 
ORA-06512: at line 1</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show information about the employee. (Note that the salary was not changed by the statement in the preceding step; it is 18000, not 17500.)</span><div><pre class="oac_no_warn" dir="ltr">exec employees_pkg.show_employee( 101, :c );
print c</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">ATTRIBUTE       VALUE
--------------- ----------------------------------------------
EMPLOYEE_ID     101
NAME            Neena Kochhar
EMAIL_ADDR      NKOCHHAR
HIRE_DATE       21-sep-2005
COUNTRY_CODE    +1
PHONE_NUMBER    515.123.4568
JOB_TITLE       Administration Vice President
JOB_START_DATE  10-mar-2015
SALARY          18000
MANAGER         Steven King
DEPARTMENT_NAME Executive

11 rows selected.</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA__GUID-2A2FBCBF-82F3-4B96-9FB2-B5B7A7C17CC5">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../sqpug/index.html" target="_blank"><span class="italic">SQL*Plus User's Guide and Reference</span></a> for information about SQL*Plus commands
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="You can create and manage PL/SQL packages.">Creating and Managing Packages</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.">Creating the employees_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG303"></a><div class="props_rev_3"><a id="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25" name="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25"></a><h4 id="TDDDG-GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25" class="sect4"><span class="enumeration_section">9.5.4 </span>Granting the Execute Privilege to app_user and app_admin_user
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25__GUID-5438A8F4-1133-4B95-9E05-9ADA07FB083D">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_code.</p>
                        </div>
                        <p>To grant the execute privilege on the package employees_pkg to app_user (typically a manager) and app_admin_user (an application administrator), use the following <span class="keyword">GRANT</span> statements (in either order). You can enter the statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer.
                        </p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON employees_pkg TO app_user;
GRANT EXECUTE ON employees_pkg TO app_admin_user;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25__GUID-B76FCD24-B452-4002-810F-C633691A7071">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="developing-simple-database-application.html#GUID-DA4704AD-7557-4455-889E-3E1745B56D81">Schemas for the Application</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <span class="keyword">GRANT</span> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.">Creating the employees_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG305"></a><a id="TDDDG304"></a><div class="props_rev_3"><a id="GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C" name="GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C"></a><h4 id="TDDDG-GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C" class="sect4"><span class="enumeration_section">9.5.5 </span>Tutorial: Invoking get_job_history as app_user or app_admin_user
                  </h4>
                  <div>
                     <p>Using SQL*Plus, this tutorial shows how to invoke the subprogram app_code.employees_pkg.get_job_history as the user app_user (typically a manager) or app_admin_user (an application administrator).</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C__GUID-BF3CEDB3-2A36-4530-8E56-C554BD3F7DA5">To invoke employees_pkg.get_job_history as app_user or app_admin_user:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to Oracle Database as user app_user or app_admin_user from SQL*Plus.</span><div>
                              <p>For instructions, see <span class="q">"<a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL*Plus is a client program from which you can access Oracle Database. This topic shows how to start SQL*Plus and connect to Oracle Database.">Connecting to Oracle Database from SQL*Plus</a>"</span>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create this synonym:</span><div><pre class="oac_no_warn" dir="ltr">CREATE SYNONYM <span class="bold">employees_pkg</span> FOR app_code.employees_pkg;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show the job history of employee 101:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.get_job_history( 101, :c )</span>;
PRINT c
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">NAME            JOB_TITLE                     START_DAT END_DATE
--------------- ----------------------------- --------- ---------
Neena Kochhar   Administration Vice President 16-MAR-05 15-MAY-12
Neena Kochhar   Accounting Manager            28-OCT-01 15-MAR-05
Neena Kochhar   Public Accountant             21-SEP-97 27-OCT-01</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.">Creating the employees_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG307"></a><a id="TDDDG306"></a><div class="props_rev_3"><a id="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" name="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE"></a><h3 id="TDDDG-GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" class="sect3"><span class="enumeration_section">9.6 </span>Creating the admin_pkg Package
               </h3>
               <div>
                  <p>This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE__GUID-F5720039-919D-4849-9089-42FBC1DF555D">To create the admin_pkg package:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Connect to Oracle Database as user app_admin.</span><div>
                           <p>For instructions, see either <span class="q">"<a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL*Plus is a client program from which you can access Oracle Database. This topic shows how to start SQL*Plus and connect to Oracle Database.">Connecting to Oracle Database from SQL*Plus</a>"</span> or <span class="q">"<a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">Connecting to Oracle Database from SQL Developer</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create these synonyms:</span><div><pre class="oac_no_warn" dir="ltr">CREATE SYNONYM <span class="bold">departments</span> FOR app_data.departments;
CREATE SYNONYM <span class="bold">jobs</span> FOR app_data.jobs;
CREATE SYNONYM <span class="bold">departments_sequence</span> FOR app_data.departments_sequence;
</pre><p>You can enter the <span class="keyword">CREATE SYNONYM</span> statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the tables with the SQL Developer tool Create Synonym.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create the package specification.</span></li>
                     <li class="stepexpand"><span>Create the package body.</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3">Creating the Package Specification for admin_pkg</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B">Creating the Package Body for admin_pkg</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80">Tutorial: Showing How the admin_pkg Subprograms Work</a><br>Using SQL*Plus, this tutorial shows how the subprograms of the admin_pkg package work. The tutorial also shows how the trigger jobs_aufer works.
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674">Granting the Execute Privilege to app_admin_user</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E">Tutorial: Invoking add_department as app_admin_user</a><br>Using SQL*Plus, this tutorial shows how to invoke the function app_admin.admin_pkg.add_department as the user app_admin_user (an application administrator) and then see the information about the new department.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE__GUID-9DDB6CB2-B282-47CB-9697-C3304D728AC2">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-BE4C6796-7476-47E3-9F25-224135863A96" title="A synonym is an alias for another schema object. Some reasons to use synonyms are security (for example, to hide the owner and location of an object) and convenience.">Creating and Managing Synonyms</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-711EE477-C725-40BE-A82B-1880EECBF912" title="A package is a PL/SQL unit that consists of related subprograms and the declared cursors and variables that they use. Oracle recommends that you put your subprograms into packages.">About Packages</a>"</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">Developing a Simple Oracle Database Application</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG308"></a><div class="props_rev_3"><a id="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3" name="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3"></a><h4 id="TDDDG-GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3" class="sect4"><span class="enumeration_section">9.6.1 </span>Creating the Package Specification for admin_pkg
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3__GUID-CE8AF502-B158-4E8F-B491-023C9F7B07A7">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_admin.</p>
                        </div>
                        <p>To create the package specification for admin_pkg, the API for application administrators, use the following <span class="keyword">CREATE PACKAGE</span> statement. You can enter the statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the package with the SQL Developer tool Create Package.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE admin_pkg
AS
  PROCEDURE update_job
    ( p_job_id      IN jobs.job_id%TYPE,
      p_job_title   IN jobs.job_title%TYPE := NULL,
      p_min_salary  IN jobs.min_salary%TYPE := NULL,
      p_max_salary  IN jobs.max_salary%TYPE := NULL );

  PROCEDURE add_job
    ( p_job_id      IN jobs.job_id%TYPE,
      p_job_title   IN jobs.job_title%TYPE,
      p_min_salary  IN jobs.min_salary%TYPE,
      p_max_salary  IN jobs.max_salary%TYPE );

  PROCEDURE update_department
    ( p_department_id     IN departments.department_id%TYPE,
      p_department_name   IN departments.department_name%TYPE := NULL,
      p_manager_id        IN departments.manager_id%TYPE := NULL,
      p_update_manager_id IN BOOLEAN := FALSE );

  FUNCTION add_department
    ( p_department_name   IN departments.department_name%TYPE,
      p_manager_id        IN departments.manager_id%TYPE )
    RETURN departments.department_id%TYPE;

END admin_pkg;
/</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3__GUID-AA77F641-4821-4394-85B2-CF57C89C0502">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="You can create and manage PL/SQL packages.">Creating and Managing Packages</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../lnpls/CREATE-PACKAGE-statement.html#LNPLS01371" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about the <span class="keyword">CREATE PACKAGE</span> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.">Creating the admin_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG309"></a><div class="props_rev_3"><a id="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B" name="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B"></a><h4 id="TDDDG-GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B" class="sect4"><span class="enumeration_section">9.6.2 </span>Creating the Package Body for admin_pkg
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B__GUID-8EE74AED-913E-4C38-9729-A4DB62D6F683">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_admin.</p>
                        </div>
                        <p>To create the package body for admin_pkg, the API for application administrators, use the following <span class="keyword">CREATE PACKAGE BODY</span> statement. You can enter the statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the package with the SQL Developer tool Create Body.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE BODY admin_pkg
AS
  PROCEDURE update_job
    ( p_job_id      IN jobs.job_id%TYPE,
      p_job_title   IN jobs.job_title%TYPE := NULL,
      p_min_salary  IN jobs.min_salary%TYPE := NULL,
      p_max_salary  IN jobs.max_salary%TYPE := NULL )
  IS
  BEGIN
    UPDATE jobs
    SET job_title  = NVL( p_job_title, job_title ),
        min_salary = NVL( p_min_salary, min_salary ),
        max_salary = NVL( p_max_salary, max_salary )
    WHERE job_id = p_job_id;
  END update_job;

  PROCEDURE add_job
    ( p_job_id      IN jobs.job_id%TYPE,
      p_job_title   IN jobs.job_title%TYPE,
      p_min_salary  IN jobs.min_salary%TYPE,
      p_max_salary  IN jobs.max_salary%TYPE )
  IS
  BEGIN
    INSERT INTO jobs ( job_id, job_title, min_salary, max_salary )
    VALUES ( p_job_id, p_job_title, p_min_salary, p_max_salary );
  END add_job;

  PROCEDURE update_department
    ( p_department_id     IN departments.department_id%TYPE,
      p_department_name   IN departments.department_name%TYPE := NULL,
      p_manager_id        IN departments.manager_id%TYPE := NULL,
      p_update_manager_id IN BOOLEAN := FALSE )
  IS
  BEGIN
    IF ( p_update_manager_id ) THEN
      UPDATE departments
      SET department_name = NVL( p_department_name, department_name ),
          manager_id = p_manager_id
      WHERE department_id = p_department_id;
    ELSE
      UPDATE departments
      SET department_name = NVL( p_department_name, department_name )
      WHERE department_id = p_department_id;
    END IF;
  END update_department;

  FUNCTION add_department
    ( p_department_name   IN departments.department_name%TYPE,
      p_manager_id        IN departments.manager_id%TYPE )
    RETURN departments.department_id%TYPE
  IS
    l_department_id departments.department_id%TYPE;
  BEGIN
    INSERT INTO departments ( department_id, department_name, manager_id )
      VALUES ( departments_sequence.NEXTVAL, p_department_name, p_manager_id )
      RETURNING department_id INTO l_department_id;
    RETURN l_department_id;
  END add_department;

END admin_pkg;
/</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B__GUID-AC43A0C2-2997-4ACA-A23A-F690A79A62E7">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="You can create and manage PL/SQL packages.">Creating and Managing Packages</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../lnpls/CREATE-PACKAGE-BODY-statement.html#LNPLS01372" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about the <span class="keyword">CREATE PACKAGE BODY</span> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.">Creating the admin_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG311"></a><a id="TDDDG310"></a><div class="props_rev_3"><a id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80" name="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80"></a><h4 id="TDDDG-GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80" class="sect4"><span class="enumeration_section">9.6.3 </span>Tutorial: Showing How the admin_pkg Subprograms Work
                  </h4>
                  <div>
                     <p>Using SQL*Plus, this tutorial shows how the subprograms of the admin_pkg package work. The tutorial also shows how the trigger jobs_aufer works.</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80__GUID-79A8DC2E-951F-474E-814D-BDABAFB5605A">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_admin from SQL*Plus.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80__GUID-ED3BC188-D0A6-4B8B-B27F-9845451031B1">To show how the admin_pkg subprograms work:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Show the information about the job whose ID is AD_VP:</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM jobs WHERE job_id = 'AD_VP';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">JOB_ID     JOB_TITLE                           MIN_SALARY MAX_SALARY
---------- ----------------------------------- ---------- ----------
AD_VP      Administration Vice President            15000      30000
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Increase the maximum salary for this job and show the information about it again:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.update_job( 'AD_VP', p_max_salary =&gt; 31000 )</span>;
SELECT * FROM jobs WHERE job_id = 'AD_VP';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">JOB_ID     JOB_TITLE                           MIN_SALARY MAX_SALARY
---------- ----------------------------------- ---------- ----------
AD_VP      Administration Vice President            15000      <span class="bold">31000</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show the information about the job whose ID is IT_PROG:</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM jobs WHERE job_id = 'IT_PROG';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">JOB_ID     JOB_TITLE                           MIN_SALARY MAX_SALARY
---------- ----------------------------------- ---------- ----------
IT_PROG    Programmer                                4000      10000
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Try to increase the maximum salary for this job:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.update_job( 'IT_PROG', p_max_salary =&gt; 4001 )</span>;
</pre><p>Result (from SQL*Plus):</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXEC admin_pkg.update_job( 'IT_PROG', p_max_salary =&gt; 4001 );
BEGIN admin_pkg.update_job( 'IT_PROG', p_max_salary =&gt; 4001 ); END;
 
*
ERROR at line 1:
ORA-20001: Salary update would violate 5 existing employee records
ORA-06512: at "APP_DATA.JOBS_AUFER", line 12
<span class="bold">ORA-04088: error during execution of trigger 'APP_DATA.JOBS_AUFER'</span>
ORA-06512: at "APP_ADMIN.ADMIN_PKG", line 10
ORA-06512: at line 1
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Add a new job and show the information about it:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.add_job( 'AD_CLERK', 'Administrative Clerk', 3000, 7000 )</span>;
SELECT * FROM jobs WHERE job_id = 'AD_CLERK';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">JOB_ID     JOB_TITLE                           MIN_SALARY MAX_SALARY
---------- ----------------------------------- ---------- ----------
AD_CLERK   Administrative Clerk                      3000       7000
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show the information about department 100:</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM departments WHERE department_id = 100;
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID
------------- ------------------------------ ----------
          100 Finance                               108
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Change the name and manager of department 100 and show the information about it:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.update_department( 100, 'Financial Services' )</span>;
EXEC <span class="bold">admin_pkg.update_department( 100, p_manager_id =&gt; 111,</span>
  <span class="bold">p_update_manager_id =&gt; true );</span>
SELECT * FROM departments WHERE department_id = 100;
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID
------------- ------------------------------ ----------
          100 Financial Services                    111</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80__GUID-CD1620D4-AE22-4751-A4E6-16DA27601024">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="You can create and manage PL/SQL packages.">Creating and Managing Packages</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.">Creating the admin_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG312"></a><div class="props_rev_3"><a id="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674" name="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674"></a><h4 id="TDDDG-GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674" class="sect4"><span class="enumeration_section">9.6.4 </span>Granting the Execute Privilege to app_admin_user
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674__GUID-09FA5224-1755-4EB3-AEDC-097799482FBA">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_admin.</p>
                        </div>
                        <p>To grant the execute privilege on the package admin_pkg to app_admin_user (an application administrator), use the following <span class="keyword">GRANT</span> statement. You can enter the statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer.
                        </p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON admin_pkg TO app_admin_user;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674__GUID-4E3B9BAE-26AA-4598-B04E-6B70E6723D84">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="developing-simple-database-application.html#GUID-DA4704AD-7557-4455-889E-3E1745B56D81">Schemas for the Application</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <span class="keyword">GRANT</span> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.">Creating the admin_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG314"></a><a id="TDDDG315"></a><a id="TDDDG313"></a><div class="props_rev_3"><a id="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E" name="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E"></a><h4 id="TDDDG-GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E" class="sect4"><span class="enumeration_section">9.6.5 </span>Tutorial: Invoking add_department as app_admin_user
                  </h4>
                  <div>
                     <p>Using SQL*Plus, this tutorial shows how to invoke the function app_admin.admin_pkg.add_department as the user app_admin_user (an application administrator) and then see the information about the new department.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E__GUID-5A508C63-01C3-4712-B5F1-77DD9B1179CC">To invoke admin_pkg.add_department as app_admin_user:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>Connect to Oracle Database as user app_admin_user from SQL*Plus.</p>
                              <p>For instructions, see <span class="q">"<a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL*Plus is a client program from which you can access Oracle Database. This topic shows how to start SQL*Plus and connect to Oracle Database.">Connecting to Oracle Database from SQL*Plus</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Create this synonym:</p><pre class="oac_no_warn" dir="ltr">CREATE SYNONYM <span class="bold">admin_pkg</span> FOR app_admin.admin_pkg;
</pre></li>
                           <li>
                              <p>Declare a bind variable for the return value of the function:</p><pre class="oac_no_warn" dir="ltr">VARIABLE n NUMBER
</pre></li>
                           <li>
                              <p>Add a new department without a manager:</p><pre class="oac_no_warn" dir="ltr">EXEC :n := admin_pkg.add_department( 'New department', NULL );
</pre></li>
                           <li>
                              <p>Show the ID of the manager of the new department:</p><pre class="oac_no_warn" dir="ltr">PRINT :n
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">         N
----------
       275</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E__GUID-A66A740F-A087-4CD3-A602-1AA812967B61">To see the information about the new department:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to Oracle Database as user app_admin.</span></li>
                        <li class="stepexpand"><span>Show the information about the new department:</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM departments WHERE department_name LIKE 'New department%';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID
------------- ------------------------------ ----------
          275 New department</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.">Creating the admin_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='05918.oracle-label-security-using-oracle-internet-directory.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can use Oracle Label Security with Oracle Internet Directory.">
      <meta name="description" content="You can use Oracle Label Security with Oracle Internet Directory.">
      <title>Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator's Guide">
      <meta property="og:description" content="You can use Oracle Label Security with Oracle Internet Directory.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="label-security-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-11T09:39:52-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96303-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="working-with-labeled-data.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-label-security-tutorials.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Label Security Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="OLSAG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="working-with-labeled-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-label-security-tutorials.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part2.html" property="item" typeof="WebPage"><span property="name">Using Oracle Label Security Functionality</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</li>
            </ol>
            <a id="GUID-31FF897D-3922-4F70-BE24-4120915454B6" name="GUID-31FF897D-3922-4F70-BE24-4120915454B6"></a><a id="OLSAG026"></a>
            
            <h2 id="OLSAG-GUID-31FF897D-3922-4F70-BE24-4120915454B6" class="sect2"><span class="enumeration_chapter">7 </span> Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='oracle-label-security-using-oracle-internet-directory'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>You can use Oracle Label Security with Oracle Internet Directory. </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A838C192-6AB8-436B-9071-11A2E208B07E">About Label Management on Oracle Internet Directory</a><br>Managing Oracle Label Security metadata in a centralized LDAP repository provides many benefits. 
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1">Configuring Oracle Internet Directory-Enabled Label Security</a><br>You can configure Oracle Internet Directory-enabled Oracle Label Security. 
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-EC12CA4B-91A6-41E5-8B08-3C285F9F7D4E">Oracle Label Security Profiles</a><br>A user profile is a set of user authorizations and privileges. 
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-4EAFD2E3-A650-4415-9256-92533F4F5C36">Integrated Capabilities When Label Security Uses the Directory</a><br>The integration of Oracle Label Security and Oracle Internet Directory enables the several capabilities.
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-97670FE0-9EDD-484E-AC19-B7373FF1D558">Oracle Label Security Policy Attributes in Oracle Internet Directory</a><br>In Oracle Internet Directory, Oracle-related metadata is stored under <code class="codeph">cn=OracleContext</code>. 
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A28C8926-2C4D-44D7-A71A-FEAD20C7353D">Subscription of Policies in Directory-Enabled Label Security</a><br>In an Oracle Internet Directory-enabled Oracle Label Security, you must subscribe a policy before it can be applied (by <code class="codeph">SA_POLICY_ADMIN.APPLY_TABLE_POLICY</code> or <code class="codeph">SA_POLICY_ADMIN.APPLY_SCHEMA_POLICY</code>). 
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-76952FF1-DC68-412B-816F-A48C5F472E40">Restrictions on New Data Label Creation</a><br>When Oracle Label Security is used with Oracle Internet Directory, data labels must be pre-defined in the directory.
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A15F11C7-6A4D-4FF9-8F24-80A4FBCCBF83">Administrator Duties for Oracle Internet Directory and Oracle Label Security</a><br>Administrators listed within a policy are those individuals authorized to do the olicy-specific administrative tasks.
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-9EBE7D60-7300-4CF4-A631-FA80CC2FB40F">Bootstrapping Databases</a><br>After you register a new database with Oracle Internet Directory, you can install Oracle Internet Directory enabled Oracle Label Security on that database.
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B">Synchronizing the Database and Oracle Internet Directory</a><br>After you have installed and configured Oracle Internet Directory with Oracle Label Security, you should synchronize the database with OID and OLS.
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7">Security Roles and Permitted Actions</a><br>Oracle Label Security permits specific tasks and access levels for Oracle Internet Directory, including restrictions on directory-enabled OLS policy creators.
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-4961D225-DE89-4B96-A183-EA9D837C994F">Superseded PL/SQL Statements When OID Is Enabled with OLS</a><br>When Oracle Internet Directory is enabled with Oracle Label Security, there are several procedures that are superseded. 
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-1083B9CB-3D22-42B4-AA32-A817A3426AF5">Oracle Label Security Procedures for Policy Administrators</a><br>Several procedures in the <code class="codeph">SA_POLICY_ADMIN</code> PL/SQL package are allowed to be run only by policy administrators (enterprise users defined in Oracle Internet Directory). 
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="part2.html" title="Part II explains how to work with Oracle Label Security functionality.">Using Oracle Label Security Functionality</a></p>
                  </div>
               </div>
            </div>
            <a id="OLSAG3186"></a><a id="OLSAG3187"></a><a id="OLSAG027"></a><div class="props_rev_3"><a id="GUID-A838C192-6AB8-436B-9071-11A2E208B07E" name="GUID-A838C192-6AB8-436B-9071-11A2E208B07E"></a><h3 id="OLSAG-GUID-A838C192-6AB8-436B-9071-11A2E208B07E" class="sect3">About Label Management on Oracle Internet Directory</h3>
               <div>
                  <p>Managing Oracle Label Security metadata in a centralized LDAP repository provides many benefits. </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You can easily provision policies and user label authorizations, and distribute them throughout the enterprise.</p>
                     </li>
                     <li>
                        <p>When employees are terminated, you can revoke their label authorizations in one place and the change automatically propagates throughout the enterprise. </p>
                     </li>
                  </ul>
                  <p>Previous releases of Oracle Label Security relied on the Oracle Database as the central repository for policy and user label authorizations. This leveraged the scalability and high availability of the Oracle Database, but not the identity management infrastructure, which includes the Oracle Internet Directory (OID). Integrating your installation of Oracle Label Security with Oracle Internet Directory allows label authorizations as part of your standard provisioning process.</p>
                  <p>These advantages apply also to directory-stored information about policies, user labels, and privileges that Oracle Label Security assigns to users. These labels and privileges are specific to the installation policies defining access control on tables and schemas. If a site is not using Oracle Internet Directory, then such information is stored locally in the database.</p>
                  <p>The following Oracle Label Security information is stored in the directory: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Policy information, specifically policy name, column name, policy enforcement options, and audit options</p>
                     </li>
                     <li>
                        <p>User profiles identifying their labels and privileges</p>
                     </li>
                     <li>
                        <p>Policy label components: levels, compartments, and groups</p>
                     </li>
                     <li>
                        <p>Policy data labels</p>
                     </li>
                  </ul>
                  <p>Database-specific metadata, such as the following, is not stored in the directory:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Lists of schemas or tables, with associated policy information</p>
                     </li>
                     <li>
                        <p>Program units, with associated policy privileges</p>
                     </li>
                  </ul>
                  <p>Note the following important aspects of integrating an Oracle Label Security installation with Oracle Internet Directory (OID):</p>
                  <div class="infoboxnote" id="GUID-A838C192-6AB8-436B-9071-11A2E208B07E__GUID-DC98B8BE-9275-4A0D-9A66-06B4AF067564">
                     <p class="notep1">Note:</p>
                     <p>Oracle will continue to support both the database and directory-based (OID) architectures for Oracle Label Security. However, a single database environment cannot host both architectures. Administrators must decide whether to use the centralized LDAP administration model or the database-centric model.</p>
                  </div>
                  <div class="infoboxnote" id="GUID-A838C192-6AB8-436B-9071-11A2E208B07E__GUID-9E71DCB6-7EBC-4E7C-8CCF-9F38796470DE">
                     <p class="notep1">Note:</p>
                     <p>You can manage Oracle Label Security policies directly in the directory using the Oracle Label Security administration tool (<code class="codeph">olsadmintool</code>). 
                     </p>
                     <p>You can also use the graphical user interface provided by Oracle Enterprise Manager to manage Oracle Label Security. The Oracle Enterprise Manager help contains detailed documentation.</p>
                  </div>
                  <p>For sites that use Oracle Internet Directory, databases retrieve Oracle Label Security policy information from the directory. Administrators use the <code class="codeph">olsadmintool</code> policy administration tool or the Enterprise Manager graphical user interface to operate directly on the directory to insert, alter, or remove metadata as needed. Because enterprise users can log in to multiple databases using the credentials stored in Oracle Internet Directory, it is logical to store their Oracle Label Security policy authorizations and privileges there as well. An administrator can then modify these authorizations and privileges by updating such metadata in the directory.
                  </p>
                  <p>For distributed databases, centralized policy management removes the need for replicating policies, because the appropriate policy information is available in the directory. Changes are effective without further effort, synchronized with policy information in the databases by means of the Directory Integration Platform.</p>
                  <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1032179">Figure 7-1</a> illustrates the structure of metadata storage in Oracle Internet Directory.
                  </p>
                  <div class="figure" id="GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1032179">
                     <p class="titleinfigure">Figure 7-1 Diagram of Oracle Label Security Metadata Storage in Oracle Internet Directory</p><img src="img/olsag038.png" alt="Description of Figure 7-1 follows" title="Description of Figure 7-1 follows" longdesc="img_text/olsag038.html"><br><a href="img_text/olsag038.html">Description of "Figure 7-1 Diagram of Oracle Label Security Metadata Storage in Oracle Internet Directory"</a></div>
                  <!-- class="figure" -->
                  <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1035464">Figure 7-2</a> illustrates how different policies stored in Oracle Internet Directory apply to the databases accessed by different enterprise users. Directory entries corresponding to the user and the accessed database determine the policy to be applied.
                  </p>
                  <div class="figure" id="GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1035464">
                     <p class="titleinfigure">Figure 7-2 Oracle Label Security Policies Applied through Oracle Internet Directory</p><img src="img/olsag037.png" alt="Description of Figure 7-2 follows" title="Description of Figure 7-2 follows" longdesc="img_text/olsag037.html"><br><a href="img_text/olsag037.html">Description of "Figure 7-2 Oracle Label Security Policies Applied through Oracle Internet Directory"</a></div>
                  <!-- class="figure" -->
                  <p>In this figure, the directory has information about two Oracle Label Security policies, Alpha, applying to database DB1, and Beta, applying to database DB2 Although both policies are known to each database, only the appropriate one is applied in each case. In addition, enterprise users who are to access rows protected by Oracle Label Security are listed in profiles within the Oracle Label Security attributes in Oracle Internet Directory. </p>
                  <p>As <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1035464">Figure 7-2</a> shows, the connections between different databases and the directory are established over either SSL or SASL. The database always binds to the directory as a known identity using password-based authentication. Links between databases and their clients (such as a SQL*Plus session, any PL/SQL programs, and so on) can use either SSL or non-SSL connections. The example of <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1035464">Figure 7-2</a> assumes that users are logged on through password authentication. The choice of connection type depends on the enterprise user model.
                  </p>
                  <p>The Oracle Label Security policy administration tool operates directly on metadata in Oracle Internet Directory. Changes in the directory are then propagated to the Oracle Directory Integration and Provisioning server, which is configured to send changes to the databases at specific time intervals.</p>
                  <p>The databases update the policy information in Oracle Internet Directory only when policies are being applied to tables or schemas. These updates ensure that policies that are in use will not be dropped from the directory.</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-A838C192-6AB8-436B-9071-11A2E208B07E__GUID-2ED77F89-C3A2-478C-8070-346FE02A5F5D">
                     <p class="notep1">See Also:</p>
                     <p><a href="../dbimi/introducing-enterprise-user-security.html#DBIMI152" target="_blank"><span><cite>Oracle Database Enterprise User Security Administrator's Guide</cite></span></a> for more information on enterprise domains, user models and authentication activities
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="You can use Oracle Label Security with Oracle Internet Directory.">Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG028"></a><div class="props_rev_3"><a id="GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1" name="GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1"></a><h3 id="OLSAG-GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1" class="sect3">Configuring Oracle Internet Directory-Enabled Label Security</h3>
               <div>
                  <p>You can configure Oracle Internet Directory-enabled Oracle Label Security. </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-8B3BED29-BD9E-4A40-B02E-6797EC678261">About Configuring Oracle Internet Directory-Enabled Label Security</a><br>You can configure a database for Oracle Internet Directory-enabled Label Security after database creation or during custom database creation. 
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-6A1C88AD-1A83-4D52-8F08-7253A1CC7484">Granting Permissions for Configuring OID-Enabled Oracle Label Security</a><br>Users who perform Oracle Internet Directory-enabled Oracle Label Security using the Database Configuration Assistant (DBCA) must have additional privileges. 
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC">Registering a Database and Configuring OID-Enabled Oracle Label Security</a><br>The registration and configuration process entails configuring an Oracle home for the directory, performing the configuration, and setting a password and connect data. 
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-579A51AE-F293-42F5-8B01-DF2361B7E6B2">Unregisteration of a Database with OID-Enabled Oracle Label Security</a><br>To unregister a database with Oracle Internet Directory-enabled Oracle Label Security, you can use DBCA.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="You can use Oracle Label Security with Oracle Internet Directory.">Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-8B3BED29-BD9E-4A40-B02E-6797EC678261" name="GUID-8B3BED29-BD9E-4A40-B02E-6797EC678261"></a><h4 id="OLSAG-GUID-8B3BED29-BD9E-4A40-B02E-6797EC678261" class="sect4">About Configuring Oracle Internet Directory-Enabled Label Security</h4>
                  <div>
                     <p>You can configure a database for Oracle Internet Directory-enabled Label Security after database creation or during custom database creation. </p>
                     <p>Oracle Internet Directory-enabled label security relies on the Enterprise User security feature. </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8B3BED29-BD9E-4A40-B02E-6797EC678261__GUID-FCA060FF-5BD9-44B8-BC2C-A9688E78D8C5">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../dbimi/enterprise-user-security-configuration-tasks-and-troubleshooting.html#DBIMI150" target="_blank"><span><cite>Oracle Database Enterprise User Security Administrator's Guide</cite></span></a> for prerequisites and steps to configure a database for directory usage
                              </p>
                           </li>
                           <li>
                              <p><a href="../dbimi/configuration-and-administration-tools-overview.html#DBIMI246" target="_blank"><span><cite>Oracle Database Enterprise User Security Administrator's Guide</cite></span></a> for information about Database Configuration Assistant (DBCA).
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1" title="You can configure Oracle Internet Directory-enabled Oracle Label Security.">Configuring Oracle Internet Directory-Enabled Label Security</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG3188"></a><div class="props_rev_3"><a id="GUID-6A1C88AD-1A83-4D52-8F08-7253A1CC7484" name="GUID-6A1C88AD-1A83-4D52-8F08-7253A1CC7484"></a><h4 id="OLSAG-GUID-6A1C88AD-1A83-4D52-8F08-7253A1CC7484" class="sect4">Granting Permissions for Configuring OID-Enabled Oracle Label Security</h4>
                  <div>
                     <p>Users who perform Oracle Internet Directory-enabled Oracle Label Security using the Database Configuration Assistant (DBCA) must have additional privileges. </p>
                     <div class="section">
                        <p>The following steps describe what permissions are needed, and how to grant them:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Use Enterprise Manager to add the user to the <code class="codeph">OracleDBCreators</code> group.</span><div>
                              <p><a href="../dbimi/administering-enterprise-user-security.html#DBIMI275" target="_blank"><span><cite>Oracle Database Enterprise User Security Administrator's Guide</cite></span></a> describes how to add a user to an administrative group.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Add the user to the Provisioning Admins group. </span><div>
                              <p>This is necessary because DBCA creates a <code class="codeph">DIP</code> provisioning profile for Oracle Label Security. Use <code class="codeph">ldapmodify</code> command with the following <code class="codeph">.ldif</code> file to add a user to the Provisioning Admins group:
                              </p><pre class="oac_no_warn" dir="ltr">dn: cn=Provisioning Admins,cn=changelog subscriber, cn=oracle internet directory
changetype: modify
add: uniquemember
uniquemember: DN of the user who is to be added
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Add the user to the <code class="codeph">policyCreators</code> group using the <code class="codeph">olsadmintool</code> command line tool. </span><div>
                              <p>DBCA bootstraps the database with the Oracle Label Security policy information from Oracle Internet Directory, and only <code class="codeph">policyCreators</code> can perform this bootstrap.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If the database is already registered with the Oracle Internet Directory using DBCA, use Enterprise Manager to add the user to the <code class="codeph">OracleDBAdmins</code> group of that database.</span></li>
                     </ol>
                     <div class="section">
                        <p>Note that the permissions specified earlier are also needed by the administrator who unregisters the database that has Oracle Internet Directory enabled Oracle Label Security configuration.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1" title="You can configure Oracle Internet Directory-enabled Oracle Label Security.">Configuring Oracle Internet Directory-Enabled Label Security</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG3189"></a><div class="props_rev_3"><a id="GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" name="GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC"></a><h4 id="OLSAG-GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" class="sect4">Registering a Database and Configuring OID-Enabled Oracle Label Security</h4>
                  <div>
                     <p>The registration and configuration process entails configuring an Oracle home for the directory, performing the configuration, and setting a password and connect data. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-036642B4-2E8C-4F4D-B301-5880326F4144">Step 1: Configure Your Oracle Home for Directory Usage</a><br>First, you must configure your Oracle home directory so that you can use Oracle Internet Directory.
                        </li>
                        <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-AA456CA9-FFD9-419B-AA71-AF10EF0FD2A9">Step 2: Configure Oracle Internet Directory for Oracle Label Security</a><br>Next, you are ready to configure Oracle Internet Directory for Oracle Label security.
                        </li>
                        <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-93CA36FE-968A-41E5-AAB9-BEECE62A7072">Step 2 Alternate: Configuring Database for OID-Enabled Oracle Label Security</a><br>Registering the database and configuring Oracle Label Security can be done in one invocation of DBCA.
                        </li>
                        <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-32ADCB05-6430-4A0A-9EA6-E33BE8CBA94A">Step 3: Set the DIP Password and Connect Data</a><br>The <code class="codeph">DIP</code> user manages Oracle Internet Directory. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1" title="You can configure Oracle Internet Directory-enabled Oracle Label Security.">Configuring Oracle Internet Directory-Enabled Label Security</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="OLSAG3190"></a><div class="props_rev_3"><a id="GUID-036642B4-2E8C-4F4D-B301-5880326F4144" name="GUID-036642B4-2E8C-4F4D-B301-5880326F4144"></a><h5 id="OLSAG-GUID-036642B4-2E8C-4F4D-B301-5880326F4144" class="sect5">Step 1: Configure Your Oracle Home for Directory Usage</h5>
                     <div>
                        <p>First, you must configure your Oracle home directory so that you can use Oracle Internet Directory.</p>
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Follow the instructions in <a href="../dbimi/getting-started-with-enterprise-user-security.html#DBIMI235" target="_blank"><span><cite>Oracle Database Enterprise User Security Administrator's Guide</cite></span></a> to configure your Oracle home for directory usage.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" title="The registration and configuration process entails configuring an Oracle home for the directory, performing the configuration, and setting a password and connect data.">Registering a Database and Configuring OID-Enabled Oracle Label Security</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="OLSAG3191"></a><div class="props_rev_3"><a id="GUID-AA456CA9-FFD9-419B-AA71-AF10EF0FD2A9" name="GUID-AA456CA9-FFD9-419B-AA71-AF10EF0FD2A9"></a><h5 id="OLSAG-GUID-AA456CA9-FFD9-419B-AA71-AF10EF0FD2A9" class="sect5">Step 2: Configure Oracle Internet Directory for Oracle Label Security</h5>
                     <div>
                        <p>Next, you are ready to configure Oracle Internet Directory for Oracle Label security.</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Register your database in the directory using Database Configuration Assistant (DBCA).</p>
                                 <p>See <a href="../dbimi/getting-started-with-enterprise-user-security.html#DBIMI236" target="_blank"><span><cite>Oracle Database Enterprise User Security Administrator's Guide</cite></span> </a>.
                                 </p>
                              </li>
                              <li>
                                 <p>After your database is registered in the directory, configure Label Security:</p>
                                 <ol type="a">
                                    <li>
                                       <p>Start DBCA, select <span class="bold">Configure database options in a database</span>, and click <span class="bold">Next</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Select a database and click <span class="bold">Next</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Regarding the option of unregistering the database or keeping it   registered, select <span class="bold">Keep the database registered</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If the database is registered with Oracle Internet Directory, the <span class="bold">Database options</span> screen shows a customize button beside the Label Security check box. Select the <span class="bold">Label Security</span> option and click <span class="bold">Customize</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>This customize dialog has two configuration options, for standalone Oracle Label Security or for Oracle Internet Directory-enabled Oracle Label Security. Click <span class="bold">OID-enabled Label security configuration</span> and enter the Oracle Internet Directory credentials of an appropriate administrator. Click <span class="bold">Ok</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Continue with the remaining DBCA steps and click <span class="bold">Finish</span> when it appears.
                                       </p>
                                       <div class="infoboxnote" id="GUID-AA456CA9-FFD9-419B-AA71-AF10EF0FD2A9__GUID-41D4A3F3-88D8-4EB6-B77B-4DFAFF51F572">
                                          <p class="notep1">Note:</p>
                                          <p>You can configure a standalone Oracle Label Security on a database that is registered with Oracle Internet Directory. Select the standalone option in step <span class="bold">e</span>.
                                          </p>
                                       </div>
                                    </li>
                                 </ol>
                              </li>
                           </ol>
                           <p>When configuring for Oracle Internet Directory-enabled Oracle Label Security, DBCA does the following actions in addition to registering the database:</p>
                           <ol>
                              <li>
                                 <p>Creates a provisioning profile for propagating Label Security policy changes to the database. </p>
                              </li>
                              <li>
                                 <p>Installs the required packages on the database side for Oracle Internet Directory-enabled Oracle Label Security.</p>
                              </li>
                              <li>
                                 <p>Bootstraps the database with all the existing Label Security policy information in the Oracle Internet Directory. </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-9EBE7D60-7300-4CF4-A631-FA80CC2FB40F" title="After you register a new database with Oracle Internet Directory, you can install Oracle Internet Directory enabled Oracle Label Security on that database.">Bootstrapping Databases</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" title="The registration and configuration process entails configuring an Oracle home for the directory, performing the configuration, and setting a password and connect data.">Registering a Database and Configuring OID-Enabled Oracle Label Security</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="OLSAG3192"></a><div class="props_rev_3"><a id="GUID-93CA36FE-968A-41E5-AAB9-BEECE62A7072" name="GUID-93CA36FE-968A-41E5-AAB9-BEECE62A7072"></a><h5 id="OLSAG-GUID-93CA36FE-968A-41E5-AAB9-BEECE62A7072" class="sect5">Step 2 Alternate: Configuring Database for OID-Enabled Oracle Label Security</h5>
                     <div>
                        <p>Registering the database and configuring Oracle Label Security can be done in one invocation of DBCA.</p>
                        <ol>
                           <li class="stepexpand"><span>Start DBCA.</span></li>
                           <li class="stepexpand"><span>Select <span class="bold">Configure database options in a database</span> and click <span class="bold">Next</span>.</span></li>
                           <li class="stepexpand"><span>Select a database and click <span class="bold">Next</span>.</span></li>
                           <li class="stepexpand"><span>Click <span class="bold">Register the database</span>. </span></li>
                           <li class="stepexpand"><span>Enter the Oracle Internet Directory credentials of an appropriate administrator, and the corresponding password for the database wallet that will be created.</span></li>
                           <li class="stepexpand"><span>Enter an optional Custom Database Name for the database.</span><div>
                                 <p>The ability to specify a custom database name is new in Oracle Database 12<span class="italic">c</span>. By default, the database CN (first part of the DN or the distinguished name) in the directory is the <code class="codeph">DB_UNIQUE_NAME</code>. You can change this to a custom value.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>The Database options screen shows a Customize button beside the Label Security check box. Select the <span class="bold">Label Security</span> option and click <span class="bold">Customize</span>. </span><div>
                                 <p>The Customize dialog box is displayed, showing two configuration options, for standalone Oracle Label Security or for Oracle Internet Directory-enabled Oracle Label Security. </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Click <span class="bold">OID-enabled Label Security Configuration</span>.</span></li>
                           <li class="stepexpand"><span>Continue with the remaining DBCA steps and click <span class="bold">Finish</span>.</span></li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" title="The registration and configuration process entails configuring an Oracle home for the directory, performing the configuration, and setting a password and connect data.">Registering a Database and Configuring OID-Enabled Oracle Label Security</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="OLSAG3193"></a><div class="props_rev_3"><a id="GUID-32ADCB05-6430-4A0A-9EA6-E33BE8CBA94A" name="GUID-32ADCB05-6430-4A0A-9EA6-E33BE8CBA94A"></a><h5 id="OLSAG-GUID-32ADCB05-6430-4A0A-9EA6-E33BE8CBA94A" class="sect5">Step 3: Set the DIP Password and Connect Data</h5>
                     <div>
                        <p>The <code class="codeph">DIP</code> user manages Oracle Internet Directory. 
                        </p>
                        <div class="section">
                           <p>After you configure this user’s password, you must update the interface connect information in the <code class="codeph">DIP</code> provisioning profile. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Use the command line tool <code class="codeph">oidprovtool</code> to set the password for the <code class="codeph">DIP</code> user and update the interface connect information in the <code class="codeph">DIP</code> provisioning profile for that database with the new password.</span></li>
                           <li><span>Upon creation, the <code class="codeph">DIP</code> profile uses a schedule value of 3600 seconds by default, meaning that Oracle Label Security changes are propagated to the database every hour. You can use <code class="codeph">oidprovtool</code> to change this value if deployment considerations require that.</span></li>
                        </ol>
                        <div class="section">
                           <p>Once the database is configured for Oracle Internet Directory-enabled Oracle Label Security, further considerations regarding enterprise user security may apply.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-32ADCB05-6430-4A0A-9EA6-E33BE8CBA94A__GUID-8E0A5151-3911-4FB1-AA16-ACE192E48733">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-FE19E96D-9682-4088-A230-D566E77BDEF2" title="The DIP server synchronizes policy changes in the directory with the connected databases, using a separate DIP provisioning profile created for each database.">Oracle Directory Integration and Provisioning (DIP) Provisioning Profiles</a></p>
                              </li>
                              <li>
                                 <p><a href="../dbimi/introducing-enterprise-user-security.html#DBIMI152" target="_blank"><span><cite>Oracle Database Enterprise User Security Administrator's Guide</cite></span></a> for further concepts, tools, steps, and procedures
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" title="The registration and configuration process entails configuring an Oracle home for the directory, performing the configuration, and setting a password and connect data.">Registering a Database and Configuring OID-Enabled Oracle Label Security</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="OLSAG3194"></a><div class="props_rev_3"><a id="GUID-579A51AE-F293-42F5-8B01-DF2361B7E6B2" name="GUID-579A51AE-F293-42F5-8B01-DF2361B7E6B2"></a><h4 id="OLSAG-GUID-579A51AE-F293-42F5-8B01-DF2361B7E6B2" class="sect4">Unregisteration of a Database with OID-Enabled Oracle Label Security</h4>
                  <div>
                     <p>To unregister a database with Oracle Internet Directory-enabled Oracle Label Security, you can use DBCA.</p>
                     <p>DBCA does the following in this process:</p>
                     <ol>
                        <li>
                           <p>Deletes the <code class="codeph">DIP</code> provisioning profile for the database created for Oracle Label Security.
                           </p>
                        </li>
                        <li>
                           <p>Installs the required packages for standalone Oracle Label Security, so that after unregistering, Oracle Internet Directory enabled Oracle Label Security becomes standalone Oracle Label Security.</p>
                           <div class="infoboxnote" id="GUID-579A51AE-F293-42F5-8B01-DF2361B7E6B2__GUID-28A065B6-DA7F-4489-B502-A1B514F2CB91">
                              <p class="notep1">Note:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Specific instructions for database unregistration appear in the <a href="../dbimi/enterprise-user-security-configuration-tasks-and-troubleshooting.html#DBIMI586" target="_blank"><span><cite>Oracle Database Enterprise User Security Administrator's Guide</cite></span></a>. No special steps are required when Oracle Internet Directory-enabled Oracle Label Security is configured.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If a database has standalone Oracle Label Security, it cannot be converted to Oracle Internet Directory-enabled Oracle Label Security. You need to drop Oracle Label Security from the database and then use DBCA again to configure Oracle Internet Directory-enabled Oracle Label Security.</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1" title="You can configure Oracle Internet Directory-enabled Oracle Label Security.">Configuring Oracle Internet Directory-Enabled Label Security</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="OLSAG030"></a><div class="props_rev_3"><a id="GUID-EC12CA4B-91A6-41E5-8B08-3C285F9F7D4E" name="GUID-EC12CA4B-91A6-41E5-8B08-3C285F9F7D4E"></a><h3 id="OLSAG-GUID-EC12CA4B-91A6-41E5-8B08-3C285F9F7D4E" class="sect3">Oracle Label Security Profiles</h3>
               <div>
                  <p>A user profile is a set of user authorizations and privileges. </p>
                  <div class="section">
                     <p>Profiles are maintained as part of each Oracle Label Security policy stored in the Directory.If a user is added to a profile, then the authorizations and privileges defined in that profile for that particular policy are acquired by the user, which include the following attributes:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Five label authorizations: </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>maximum read label</p>
                              </li>
                              <li>
                                 <p>maximum write label</p>
                              </li>
                              <li>
                                 <p>minimum write label</p>
                              </li>
                              <li>
                                 <p>default read label</p>
                              </li>
                              <li>
                                 <p>default row label</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Privileges</p>
                        </li>
                        <li>
                           <p>The list of enterprise users to whom these authorizations apply</p>
                        </li>
                     </ul>
                     <p>An enterprise user can belong to only one profile, or none.</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-EC12CA4B-91A6-41E5-8B08-3C285F9F7D4E__GUID-B32EA125-DF1D-4A45-BFE4-6137A6D4BCCD">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-97670FE0-9EDD-484E-AC19-B7373FF1D558" title="In Oracle Internet Directory, Oracle-related metadata is stored under cn=OracleContext.">Oracle Label Security Policy Attributes in Oracle Internet Directory</a></p>
                        </li>
                        <li>
                           <p><a href="../dbimi/getting-started-with-enterprise-user-security.html#DBIMI234" target="_blank"><span><cite>Oracle Database Enterprise User Security Administrator's Guide</cite></span></a> for more information on creating and managing enterprise users
                           </p>
                        </li>
                        <li>
                           <p>Oracle Enterprise Manager help for information on creating and administering Oracle Label Security profiles and policies</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="You can use Oracle Label Security with Oracle Internet Directory.">Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG031"></a><div class="props_rev_3"><a id="GUID-4EAFD2E3-A650-4415-9256-92533F4F5C36" name="GUID-4EAFD2E3-A650-4415-9256-92533F4F5C36"></a><h3 id="OLSAG-GUID-4EAFD2E3-A650-4415-9256-92533F4F5C36" class="sect3">Integrated Capabilities When Label Security Uses the Directory</h3>
               <div>
                  <p>The integration of Oracle Label Security and Oracle Internet Directory enables the several capabilities.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>User/administrator actions</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Storing multiple Oracle Label Security policies in Oracle Internet Directory</p>
                           </li>
                           <li>
                              <p>Managing Oracle Label Security policies and options in the directory, including</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>creating or dropping a policy</p>
                                 </li>
                                 <li>
                                    <p>changing policy options</p>
                                 </li>
                                 <li>
                                    <p>changing audit settings</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Creating label components for any Oracle Label Security policies by</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>creating or removing levels, compartments, or groups</p>
                                 </li>
                                 <li>
                                    <p>assigning numeric values to levels, compartments, or groups</p>
                                 </li>
                                 <li>
                                    <p>changing long names of levels, compartments, or groups</p>
                                 </li>
                                 <li>
                                    <p>creating children groups </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Managing enterprise users configured as users of any Oracle Label Security policies, including</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>assigning or removing enterprise users to/from profiles within policies</p>
                                 </li>
                                 <li>
                                    <p>assigning policy-specific privileges to enterprise users, or removing them</p>
                                 </li>
                                 <li>
                                    <p>changing policy label authorizations assigned to enterprise users</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Managing all user/administrator actions and capabilities by means of an integrated set of command line tools that monitor and manage Oracle Label Security policies in Oracle Internet Directory. </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Automatic results of Oracle Label Security</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Limiting database policy usage to directory-defined policies only (no local policies defined or applied)</p>
                           </li>
                           <li>
                              <p>Synchronizing changes to policies in the directory with the databases using Oracle Label Security (to apply after enterprise users reconnect)</p>
                           </li>
                           <li>
                              <p>After changes are propagated by the Directory Integration Platform, having immediate access to enterprise users' Oracle Label Security attributes when these users log on to any database using Oracle Label Security, assuming they are configured within any Oracle Label Security policies. These attributes include users' label authorizations and users' privileges.</p>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="You can use Oracle Label Security with Oracle Internet Directory.">Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG3195"></a><a id="OLSAG032"></a><div class="props_rev_3"><a id="GUID-97670FE0-9EDD-484E-AC19-B7373FF1D558" name="GUID-97670FE0-9EDD-484E-AC19-B7373FF1D558"></a><h3 id="OLSAG-GUID-97670FE0-9EDD-484E-AC19-B7373FF1D558" class="sect3">Oracle Label Security Policy Attributes in Oracle Internet Directory</h3>
               <div>
                  <p>In Oracle Internet Directory, Oracle-related metadata is stored under <code class="codeph">cn=OracleContext</code>. 
                  </p>
                  <p>Within Label Security, each policy holds the information and parameters shown in <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1032179">Figure 7-1</a>:
                  </p>
                  <p>When Oracle Label Security is used without Oracle Internet Directory, it supports automatic creation of data labels by means of a label function. However, when Oracle Label Security is used with Oracle Internet Directory, such functions can create labels only using data labels that are already defined in the directory. </p>
                  <div class="tblformalwide" id="GUID-97670FE0-9EDD-484E-AC19-B7373FF1D558__GUID-9349AB05-C2D4-461D-B31B-D25D3B67ECD1">
                     <p class="titleintable">Table 7-1 Contents of Each Policy </p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Contents of Each Policy " summary="This table lists and describes the types of content in every policy, and gives examples and references for each." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d30435e1639">Type of Entry</th>
                              <th align="left" valign="bottom" width="43%" id="d30435e1642">Contents</th>
                              <th align="left" valign="bottom" width="37%" id="d30435e1645">Meaning/Sample Usage/References</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1650" headers="d30435e1639 ">
                                 <p>Policy Name</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1650 d30435e1642 ">
                                 <p>The name assigned to this policy at its creation</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1650 d30435e1645 ">
                                 <p>Used in <code class="codeph">olsadmintool</code> commands such as <code class="codeph">olsadmintool</code> <code class="codeph">createpolicy</code> (refer to <a href="command-line-tools-for-label-security-using-oracle-internet-directory.html#GUID-CEBDC422-8872-46C1-8A3B-F1161539DD22" title="Oracle Label Security provides command-line tools for using Oracle Internet Directory.">Command-line Tools for Label Security Using Oracle Internet Directory</a><code class="codeph">)</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1676" headers="d30435e1639 ">
                                 <p>Column Name</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1676 d30435e1642 ">
                                 <p>The name of the column that will hold the label values relevant to this policy </p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1676 d30435e1645 ">
                                 <p>Column is added to database. Refer to <a href="working-with-labeled-data.html#GUID-2C84DF95-0A12-4BBA-94C8-4FF369C54128" title="You should understand how policy label columns in a table or schema are created and filled.">How Policy Label Column and Label Tags Work</a></p>
                                 <p><a href="working-with-labeled-data.html#GUID-ED5DA711-477C-42D9-B03C-866A909DDE23" title="You can insert labeled data in a variety of situations.">Inserting Labeled Data</a></p>
                                 <p><a href="implementing-policy-enforcement-options-and-labeling-functions.html#GUID-26ABB868-ADB3-44D0-B5A0-3CAF9C5EC627" title="You can specify the HIDE policy configuration option when you add an Oracle Label Security policy column to a table.">How the HIDE Policy Column Option Works</a></p>
                                 <p><a href="oracle-label-security-reference.html#GUID-3EF3FD4E-A001-4110-9036-23022F2CD001" title="Oracle Label Security provides data dictionary tables, data dictionary views, and an user-created auditing view.">Oracle Label Security Tables and Views</a>.
                                 </p>
                                 <p>Used in</p>
                                 <p><code class="codeph">olsadmintool createpolicy</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1718" headers="d30435e1639 ">
                                 <p>Enforcement Options</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1718 d30435e1642 ">
                                 <p>Any combination of the following entries:</p>
                                 <p><code class="codeph">LABEL_DEFAULT,LABEL_UPDATE, CHECK_CONTROL,READ_CONTROL, WRITE_CONTROL,INSERT_CONTROL, DELETE_CONTROL,UPDATE_CONTROL, ALL_CONTROL, or NO_CONTROL</code></p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1718 d30435e1645 ">
                                 <p>Refer to the discussions in <a href="implementing-policy-enforcement-options-and-labeling-functions.html#GUID-74CD83CB-3398-439D-B791-7C08867EF645" title="You can customize the enforcement of Oracle Label Security policies and implement labeling functions.">Implementing Policy Enforcement Options and Labeling Functions</a> and <a href="oracle-label-security-reference.html#GUID-3EF3FD4E-A001-4110-9036-23022F2CD001" title="Oracle Label Security provides data dictionary tables, data dictionary views, and an user-created auditing view.">Oracle Label Security Tables and Views</a>. 
                                 </p>
                                 <p>Used in </p>
                                 <p><code class="codeph">olsadmintool createpolicy</code></p>
                                 <p>and <code class="codeph">olsadmintool alterpolicy</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1752" headers="d30435e1639 ">
                                 <p>Options</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1752 d30435e1642 ">
                                 <p>Enabled:<code class="codeph">TRUE or FALSE</code>, Type: <code class="codeph">ACCESS or SESSION</code>, Success:<code class="codeph"> SUCCESSFUL,UNSUCCESSFUL, or BOTH</code>.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1752 d30435e1645 ">
                                 <p>Used in</p>
                                 <p><code class="codeph">olsadmintool audit</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1774" headers="d30435e1639 ">
                                 <p>Levels</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1774 d30435e1642 ">
                                 <p>Name and number for each level</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1774 d30435e1645 ">
                                 <p>Used in <code class="codeph">olsadmintool create/alter/droplevel</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1786" headers="d30435e1639 ">
                                 <p>Compartments</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1786 d30435e1642 ">
                                 <p>Name and number for each compartment</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1786 d30435e1645 ">
                                 <p>Used in <code class="codeph">olsadmintool  create/alter/drop compartment</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1798" headers="d30435e1639 ">
                                 <p>Groups</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1798 d30435e1642 ">
                                 <p>Name, number, and parent for each group</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1798 d30435e1645 ">
                                 <p>Used in <code class="codeph">olsadmintool create/alter/dropgroup</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1810" headers="d30435e1639 ">
                                 <p>Profiles</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1810 d30435e1642 ">
                                 <p>Maximum and default read labels, maximum and minimum write labels, default row label, list of users, and a set of privileges from this list: </p>
                                 <p><code class="codeph">READ,</code> <code class="codeph">FULL,</code> 
                                 </p>
                                 <p><code class="codeph">WRITEUP,</code> <code class="codeph">WRITEDOWN, WRITEACROSS,</code> 
                                 </p>
                                 <p><code class="codeph">PROFILE_ACCESS,</code> <code class="codeph">or COMPACCESS</code></p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1810 d30435e1645 ">
                                 <p>Policies can have one or more profiles, each of which can be assigned to many users. Profiles reduce the need to set up label authorizations for individual users.</p>
                                 <p>All users with the same set of labels and privileges are grouped in a single profile. Each profile represents a different set of labels, privileges, and users. Each profile in a policy is unique. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1842" headers="d30435e1639 ">
                                 <p>Data Labels</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1842 d30435e1642 ">
                                 <p>Full name and number for each valid data label</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1842 d30435e1645 ">
                                 <p>Refer to <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-76952FF1-DC68-412B-816F-A48C5F472E40" title="When Oracle Label Security is used with Oracle Internet Directory, data labels must be pre-defined in the directory.">Restrictions on New Data Label Creation</a>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1858" headers="d30435e1639 ">
                                 <p>Administrators</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1858 d30435e1642 ">
                                 <p>Name of each administrator authorized to modify the parameters within this policy.</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1858 d30435e1645 ">
                                 <p>Policy administrators can modify parameters within a policy. They are not necessarily also policy creators, who have the right to create or remove policies or policy administrators. Refer to <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7" title="Oracle Label Security permits specific tasks and access levels for Oracle Internet Directory, including restrictions on directory-enabled OLS policy creators.">Security Roles and Permitted Actions</a>. 
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="You can use Oracle Label Security with Oracle Internet Directory.">Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG064"></a><div class="props_rev_3"><a id="GUID-A28C8926-2C4D-44D7-A71A-FEAD20C7353D" name="GUID-A28C8926-2C4D-44D7-A71A-FEAD20C7353D"></a><h3 id="OLSAG-GUID-A28C8926-2C4D-44D7-A71A-FEAD20C7353D" class="sect3">Subscription of Policies in Directory-Enabled Label Security</h3>
               <div>
                  <p>In an Oracle Internet Directory-enabled Oracle Label Security, you must subscribe a policy before it can be applied (by <code class="codeph">SA_POLICY_ADMIN.APPLY_TABLE_POLICY</code> or <code class="codeph">SA_POLICY_ADMIN.APPLY_SCHEMA_POLICY</code>). 
                  </p>
                  <p></p>
                  <p>In a standalone Oracle Label Security installation, the <code class="codeph">SA_POLICY_ADMIN.APPLY_TABLE_POLICY</code> or <code class="codeph">SA_POLICY_ADMIN.APPLY_SCHEMA_POLICY</code> functions can be used directly without the need to subscribe.
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="oracle-label-security-pl-sql-packages.html#GUID-5A1345FF-404B-468E-A5EA-792511E386DB" title="The SA_POLICY_ADMIN PL/SQL package manages Oracle Label Security policies as a whole.">SA_POLICY_ADMIN Policy Administration PL/SQL Package</a></li>
                        <li><a href="creating-an-oracle-label-security-policy.html#GUID-FEB6F9A6-75DB-45BA-8F9E-4B25288C975C" title="After you create grant authorizations and privileges to an Oracle Label Security policy, you can apply it to a database table or schema.">Step 5: Apply the Policy to a Database Table or Schema</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="You can use Oracle Label Security with Oracle Internet Directory.">Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="OLSAG033"></a><div class="props_rev_3"><a id="GUID-76952FF1-DC68-412B-816F-A48C5F472E40" name="GUID-76952FF1-DC68-412B-816F-A48C5F472E40"></a><h3 id="OLSAG-GUID-76952FF1-DC68-412B-816F-A48C5F472E40" class="sect3">Restrictions on New Data Label Creation</h3>
               <div>
                  <p>When Oracle Label Security is used with Oracle Internet Directory, data labels must be pre-defined in the directory.</p>
                  <p>They cannot be created dynamically by a label function, as is possible when label security is not integrated with the directory.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="You can use Oracle Label Security with Oracle Internet Directory.">Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG034"></a><div class="props_rev_3"><a id="GUID-A15F11C7-6A4D-4FF9-8F24-80A4FBCCBF83" name="GUID-A15F11C7-6A4D-4FF9-8F24-80A4FBCCBF83"></a><h3 id="OLSAG-GUID-A15F11C7-6A4D-4FF9-8F24-80A4FBCCBF83" class="sect3">Administrator Duties for Oracle Internet Directory and Oracle Label Security</h3>
               <div>
                  <p>Administrators listed within a policy are those individuals authorized to do the olicy-specific administrative tasks.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Modify existing policy options and audit settings.</p>
                     </li>
                     <li>
                        <p>Enable or disable auditing for a policy.</p>
                     </li>
                     <li>
                        <p>Create or remove levels, compartments, groups or children groups.</p>
                     </li>
                     <li>
                        <p>Modify full/long names for levels, compartment, or groups.</p>
                     </li>
                     <li>
                        <p>Define or modify enterprise user settings, in this policy, for:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Privileges</p>
                           </li>
                           <li>
                              <p>Maximum or minimum levels</p>
                           </li>
                           <li>
                              <p>Read, write, or row access for levels, compartments, or groups</p>
                           </li>
                           <li>
                              <p>Label profiles</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Remove enterprise users from a policy.</p>
                     </li>
                  </ul>
                  <p>There is a higher level of administrators, called policy creators, who can create and remove Oracle Label Security policies and the policy administrators named within them.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="You can use Oracle Label Security with Oracle Internet Directory.">Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG035"></a><div class="props_rev_3"><a id="GUID-9EBE7D60-7300-4CF4-A631-FA80CC2FB40F" name="GUID-9EBE7D60-7300-4CF4-A631-FA80CC2FB40F"></a><h3 id="OLSAG-GUID-9EBE7D60-7300-4CF4-A631-FA80CC2FB40F" class="sect3">Bootstrapping Databases</h3>
               <div>
                  <p>After you register a new database with Oracle Internet Directory, you can install Oracle Internet Directory enabled Oracle Label Security on that database.</p>
                  <div class="section">
                     <p>This installation process automatically creates a Directory Integration Platform (DIP) provisioning profile enabling policy information to be periodically refreshed in the future by downloading it to the database. </p>
                     <p>When configuring the database for Oracle Internet Directory enabled Oracle Label Security, Database Configuration Asssitant (DBCA) puts all the policy information in Oracle Internet Directory into a newly registered database and populates the information in the database. This process is called bootstrapping.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To bootstrap the database, run the bootstrap utility script at <code class="codeph">$ORACLE_HOME/bin/olsoidsync</code> by using the following parameters:
                           </p><pre class="oac_no_warn" dir="ltr">olsoidsync --dbconnectstring "<span class="italic">database_connect_string_in_host:port:sid_format</span>"
--dbuser <span class="italic">database_user</span> [-c] [-r]
[-b <span class="italic">admin_context</span>] -h <span class="italic">OID_host</span> [-p <span class="italic">port</span>] -D <span class="italic">bind_DN</span>

Enter Database password: <span class="italic">database_user_password</span>  
<span>Enter bind password: <span class="italic">bind_password</span></span></pre></li>
                     </ul>
                     <p>For example:</p><pre class="oac_no_warn" dir="ltr">olsoidsync --dbconnectstring sales_srvr:1521:ora101 --dbuser lbacsys -c 
-b "ou=Americas,o=ExampleCorp,c=US" -h sales_srvr -D cn=policycreator
Enter Database password: <span class="italic">database_user_password</span>
<span>Enter bind password: <span class="italic">bind_password</span></span></pre><p>You must provide the database TNS name, the database user name, the database user's password, the administrative context (if any), the Oracle Internet Directory host name, the bind DN and bind password, and optionally the Oracle Internet Directory port number. The <code class="codeph">c</code> and <code class="codeph">r</code> parameters are optional. <code class="codeph">c</code> drops all the existing policies in the database and refreshes it with policy information from Oracle Internet Directory, and <code class="codeph">r</code> drops all the policy metadata (without dropping the policies themselves) and refreshes the policies with new metadata from Oracle Internet Directory.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-FE19E96D-9682-4088-A230-D566E77BDEF2" title="The DIP server synchronizes policy changes in the directory with the connected databases, using a separate DIP provisioning profile created for each database.">Oracle Directory Integration and Provisioning (DIP) Provisioning Profiles</a></li>
                        <li><a href="command-line-tools-for-label-security-using-oracle-internet-directory.html#GUID-0E7828B5-86AF-44D8-8BE6-27A5795A7CB7" title="The olsoidsync command pulls policy information from Oracle Internet Directory and populates the information in the database (bootstrapping).">olsoidsync Command Reference</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="You can use Oracle Label Security with Oracle Internet Directory.">Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="OLSAG036"></a><div class="props_rev_3"><a id="GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" name="GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B"></a><h3 id="OLSAG-GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" class="sect3">Synchronizing the Database and Oracle Internet Directory</h3>
               <div>
                  <p>After you have installed and configured Oracle Internet Directory with Oracle Label Security, you should synchronize the database with OID and OLS.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-3F168919-22A1-4352-A721-A1023462B566">About Synchronizing the Database and Oracle Internet Directory</a><br>The Directory Integration Platform Oracle Directory Provisioning Service synchronizes Oracle Label Security metadata in the OID directory with the databases.
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-FE19E96D-9682-4088-A230-D566E77BDEF2">Oracle Directory Integration and Provisioning (DIP) Provisioning Profiles</a><br>The DIP server synchronizes policy changes in the directory with the connected databases, using a separate DIP provisioning profile created for each database.
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-33EE601D-CACD-4D38-924D-D7E553CECF45">Modifying a Provisioning Profile</a><br>The <code class="codeph">oidprovtool</code> <code class="codeph">modify</code> command changes the password for the <code class="codeph">interface_connect_info</code> connect string.
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-06391FAA-35A5-436A-88AF-EFFC322C8534">Changing the Database Connection Information for a Provisioning Profile</a><br>You can change the database connection information in the <code class="codeph">DIP</code> profile.
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-7424FF7F-1791-410C-A627-211FCA9FABF3">Configuring OID-Enabled Oracle Label Security with Oracle Data Guard</a><br>To configure Oracle Directory-Enabled Oracle Label Security to work with Oracle Data Guard, first you configure the primary database, then the secondary database.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="You can use Oracle Label Security with Oracle Internet Directory.">Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</a></p>
                     </div>
                  </div>
               </div>
               <a id="OLSAG4150"></a><div class="props_rev_3"><a id="GUID-3F168919-22A1-4352-A721-A1023462B566" name="GUID-3F168919-22A1-4352-A721-A1023462B566"></a><h4 id="OLSAG-GUID-3F168919-22A1-4352-A721-A1023462B566" class="sect4">About Synchronizing the Database and Oracle Internet Directory</h4>
                  <div>
                     <p>The Directory Integration Platform Oracle Directory Provisioning Service synchronizes Oracle Label Security metadata in the OID directory with the databases.</p>
                     <p>Changes to the label security data in the directory are conveyed by the provisioning integration service in the form of provisioning events. A software agent receives these events and generates appropriate SQL or PL/SQL statements to update the database. After these statements are processed, Oracle Label Security data dictionaries are updated to match the changes already made in the directory.</p>
                     <p>Oracle Label Security subscribes itself to the Provisioning Integration Service automatically during installation. The provisioning service stores the information associated with each database in the form of a provisioning profile. The software agent uses the identity of the user <code class="codeph">DIP</code>, which is created as for Oracle Label Security, to connect to the database, when synchronizing the changes in Oracle Internet Directory with the database.
                     </p>
                     <p>If the password for the user <code class="codeph">DIP</code> is changed, then you must update this password in the provisioning profile of the provisioning integration service.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" title="After you have installed and configured Oracle Internet Directory with Oracle Label Security, you should synchronize the database with OID and OLS.">Synchronizing the Database and Oracle Internet Directory</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG3197"></a><a id="OLSAG3196"></a><div class="props_rev_3"><a id="GUID-FE19E96D-9682-4088-A230-D566E77BDEF2" name="GUID-FE19E96D-9682-4088-A230-D566E77BDEF2"></a><h4 id="OLSAG-GUID-FE19E96D-9682-4088-A230-D566E77BDEF2" class="sect4">Oracle Directory Integration and Provisioning (DIP) Provisioning Profiles</h4>
                  <div>
                     <p>The DIP server synchronizes policy changes in the directory with the connected databases, using a separate DIP provisioning profile created for each database.</p>
                     <p>This profile is created automatically as part of the installation process for Oracle Internet Directory-enabled Oracle Label Security. The administrator can use the provisioning tool <code class="codeph">oidprovtool</code> to modify the password for a database profile, using the script <span class="italic"><code class="codeph">$ORACLE_HOME</code></span><code class="codeph">/bin/oidprovtoo</code>l. Each such profile contains the following information:
                     </p>
                     <div class="tblformal" id="GUID-FE19E96D-9682-4088-A230-D566E77BDEF2__GUID-8B8991FB-360B-4CB1-97F9-3CD42AA9F8B0">
                        <p class="titleintable">Table 7-2 Elements in a DIP Provisioning Profile </p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Elements in a DIP Provisioning Profile " summary="This table lists the elements in a profile in the Directory Integration Platform (DIP) and provides the name to be used for each element when you invoke oidprovtool." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="66%" id="d30435e2579">Element</th>
                                 <th align="left" valign="bottom" width="34%" id="d30435e2582">Name for This Element When Invoking oidprovtool</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2587" headers="d30435e2579 ">
                                    <p>The LDAP host name</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2587 d30435e2582 ">
                                    <p><code class="codeph">ldap_host</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2595" headers="d30435e2579 ">
                                    <p>The LDAP port number</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2595 d30435e2582 ">
                                    <p><code class="codeph">ldap_port</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2603" headers="d30435e2579 ">
                                    <p>The user DN and password to bind to Oracle Internet Directory to retrieve policy information</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2603 d30435e2582 ">
                                    <p><code class="codeph">ldap_user</code></p>
                                    <p><code class="codeph">ldap_user_password</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2614" headers="d30435e2579 ">
                                    <p>The database DN</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2614 d30435e2582 ">
                                    <p><code class="codeph">application_dn</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2622" headers="d30435e2579 ">
                                    <p>The organization DN, that is, the administrative context in which changes are being made</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2622 d30435e2582 ">
                                    <p><code class="codeph">organization_dn</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2630" headers="d30435e2579 ">
                                    <p>The callback function to be invoked, that is, <code class="codeph">LBACSYS.OLS_DIP_NTFY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2630 d30435e2582 ">
                                    <p><code class="codeph">interface_name</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2640" headers="d30435e2579 ">
                                    <p>The database connect information, which is the host name of the database, the port number used to connect to the database, the database SID, the database user name and password</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2640 d30435e2582 ">
                                    <p><code class="codeph">interface_connect_info</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2648" headers="d30435e2579 ">
                                    <p>Event subscriptions, including all <code class="codeph">MODIFY</code>, <code class="codeph">ADD</code> and <code class="codeph">DELETE</code> events under <code class="codeph">cn=LabelSecurity</code> in Oracle Internet Directory 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2648 d30435e2582 ">
                                    <p><code class="codeph">operation</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2668" headers="d30435e2579 ">
                                    <p>The time interval between synchronizations</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2668 d30435e2582 ">
                                    <p><code class="codeph">schedule</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>Here is an example of using <code class="codeph">oidprovtool</code>, followed by an explanation of the parameters in this example:
                     </p><pre class="oac_no_warn" dir="ltr">oidprovtool operation=modify ldap_host=yippee ldap_port=389
ldap_user=cn=defense_admin ldap_user_password=Easy2rem
application_dn="cn=db1,cn=OracleContext,ou=Americas,o=Oracle,c=US"
organization_dn="ou=Americas,o=Oracle,c=US" interface_name=LBACSYS.OLS_DIP_NTFY
interface_type=PLSQL interface_connect_info=yippee:1521:db1:dip:newdip schedule=60
event_subscription= "ENTRY:cn=LabelSecurity,cn=Products,cn=OracleContext,
ou=Americas,o=Oracle,c=US:ADD(*)" event_subscription=
"ENTRY:cn=LabelSecurity,cn=Products, cn=OracleContext,ou=Americas,
o=Oracle,c=US:MODIFY(*)" event_subscription="ENTRY:cn=LabelSecurity,cn=Products,
cn=OracleContext, ou=Americas,o=Oracle,c=US:DELETE"
</pre><p>This sample <code class="codeph">oidprovtool</code> command creates and enables a new DIP provisioning profile with the following attributes:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Oracle Internet Directory in host <code class="codeph">yippee</code> using port 389
                           </p>
                        </li>
                        <li>
                           <p>Oracle Internet Directory user bind DN:  <code class="codeph">cn=defense_admin</code> with password Easy2rem
                           </p>
                        </li>
                        <li>
                           <p>Database DN: <code class="codeph">cn=db1</code>, <code class="codeph">cn=OracleContext</code>, <code class="codeph">ou=Americas</code>, <code class="codeph">o=Oracle</code>, <code class="codeph">c=US</code></p>
                        </li>
                        <li>
                           <p>Organization DN (administrative context): <code class="codeph">ou=Americas</code>, <code class="codeph">o=Oracle</code>, <code class="codeph">c=US</code></p>
                        </li>
                        <li>
                           <p>Database on host yippee, listening on port 1521</p>
                        </li>
                        <li>
                           <p>Oracle SID: <code class="codeph">db1</code></p>
                        </li>
                        <li>
                           <p>Database user: <code class="codeph">dip</code> with new password <code class="codeph">newdip</code></p>
                        </li>
                        <li>
                           <p>Interval to synchronize directory with connected databases: 60 seconds</p>
                        </li>
                        <li>
                           <p>All the <code class="codeph">ADD</code>, <code class="codeph">MODIFY</code> and <code class="codeph">DELETE</code> events under <code class="codeph">cn=LabelSecurity</code> to be sent to DIP
                           </p>
                        </li>
                     </ul>
                     <p>To start the DIP server, use <span class="italic"><code class="codeph">$ORACLE_HOME</code></span><code class="codeph">/bin/oidctl.</code> For example:
                     </p><pre class="oac_no_warn" dir="ltr">oidctl server=odisrv connect=db2 config=0 instance=0 start
</pre><p>This command will start the DIP server by connecting to <code class="codeph">db2</code> (the Oracle Internet Directory database) with <code class="codeph">config</code> set to <code class="codeph">0</code> and instance number <code class="codeph">0</code>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" title="After you have installed and configured Oracle Internet Directory with Oracle Label Security, you should synchronize the database with OID and OLS.">Synchronizing the Database and Oracle Internet Directory</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG3198"></a><div class="props_rev_3"><a id="GUID-33EE601D-CACD-4D38-924D-D7E553CECF45" name="GUID-33EE601D-CACD-4D38-924D-D7E553CECF45"></a><h4 id="OLSAG-GUID-33EE601D-CACD-4D38-924D-D7E553CECF45" class="sect4">Modifying a Provisioning Profile</h4>
                  <div>
                     <p>The <code class="codeph">oidprovtool</code> <code class="codeph">modify</code> command changes the password for the <code class="codeph">interface_connect_info</code> connect string.
                     </p>
                     <div class="section">Before you change the password, you must temporarily disable the profile. After changing the password, you then reenable the profile.</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Disable the profile by using the<code class="codeph">oidprovtool</code> .</span><div>
                              <p>The syntax is as follows:</p><pre class="oac_no_warn" dir="ltr">oidprovtool operation=disable ldap_host=<span class="italic">host</span> ldap_port=<span class="italic">port</span> ldap_user_dn=<span class="italic">ldap_user_dn</span>  ldap_user_password=<span class="italic">password</span> application_dn=<span class="italic">app_dn</span>  organization_dn=<span class="italic">org_dn</span>
</pre><p>For example:</p><pre class="oac_no_warn" dir="ltr">oidprovtool operation=disable ldap_host=yippee ldap_port=389</pre><pre class="oac_no_warn" dir="ltr">ldap_user=cn=defense_admin ldap_user_password=<span class="italic">password</span> 
application_dn="cn=db1,cn=OracleContext,ou=Americas,o=Oracle,c=US"
organization_dn="ou=Americas,o=Oracle,c=US"</pre></div>
                        </li>
                        <li class="stepexpand"><span>Modify the password and connection information by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">oidprovtool operation=modify  ldap_host=<span class="italic">ldap_host</span> ldap_port=<span class="italic">port</span></pre><pre class="oac_no_warn" dir="ltr">ldap_user_dn=<span class="italic">ldap_user_dn</span>  ldap_user_password=<span class="italic">password</span> application_dn=<span class="italic">app_dn</span>
organization_dn=<span class="italic">org_dn</span> interface_connect_info=<span class="italic">new_connect_info</span></pre><p>For example:</p><pre class="oac_no_warn" dir="ltr">oidprovtool operation=modify ldap_host=yippee ldap_port=389</pre><pre class="oac_no_warn" dir="ltr">ldap_user=cn=defense_admin ldap_user_password=Easy2rem
application_dn="cn=db1,cn=OracleContext,ou=Americas,o=Oracle,c=US" 
organization_dn="ou=Americas,o=Oracle,c=US" 
interface_connect_info=yippee:1521:db1:dip:NewestDIPpassword 
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Reenable the profile by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">oidprovtool operation=enable ldap_host=<span class="italic">host</span> ldap_port=<span class="italic">port</span> ldap_user_dn=<span class="italic">ldap_user_dn</span> ldap_user_password=<span class="italic">password</span> application_dn=<span class="italic">app_dn</span> organization_dn=<span class="italic">org_dn</span></pre><pre class="oac_no_warn" dir="ltr"></pre><p>For example</p><pre class="oac_no_warn" dir="ltr">oidprovtool operation=enable ldap_host=yippee ldap_port=389 </pre><pre class="oac_no_warn" dir="ltr">ldap_user=cn=defense_admin ldap_user_password=<span class="italic">password</span> 
application_dn="cn=db1,cn=OracleContext,ou=Americas,o=Oracle,c=US" 
organization_dn="ou=Americas,o=Oracle,c=US"</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" title="After you have installed and configured Oracle Internet Directory with Oracle Label Security, you should synchronize the database with OID and OLS.">Synchronizing the Database and Oracle Internet Directory</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG4188"></a><div class="props_rev_3"><a id="GUID-06391FAA-35A5-436A-88AF-EFFC322C8534" name="GUID-06391FAA-35A5-436A-88AF-EFFC322C8534"></a><h4 id="OLSAG-GUID-06391FAA-35A5-436A-88AF-EFFC322C8534" class="sect4">Changing the Database Connection Information for a Provisioning Profile</h4>
                  <div>
                     <p>You can change the database connection information in the <code class="codeph">DIP</code> profile.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Disable the provisioning profile. </span><div>
                              <p>This step temporarily stops the propagation of label security changes in the directory to the database, but no data is lost. Once the profile is enabled, any label security changes that happened in the directory since the profile was disabled are synchronized with the database.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Update the database connection information in the profile.</span></li>
                        <li class="stepexpand"><span>Enable the profile.</span><div>
                              <div class="infoboxnote" id="GUID-06391FAA-35A5-436A-88AF-EFFC322C8534__GUID-0C0E5108-3193-4B5B-BF4F-FE66C284DA17">
                                 <p class="notep1">Note:</p>
                                 <p>The database character set must be compatible with Oracle Internet Directory for Oracle Internet Directory-enabled Oracle Label Security to work correctly. Only then can there be successful synchronization of the Label Security metadata in Oracle Internet Directory with the Database.</p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-06391FAA-35A5-436A-88AF-EFFC322C8534__GUID-A33683B5-8B93-4AD9-AEF6-FCD8AD967F24">
                                 <p class="notep1">See Also:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><a href="../nlspg/overview-of-globalization-support.html#NLSPG147" target="_blank"><span><cite>Oracle Database Globalization Support Guide</cite></span></a> for more information about character sets and Globalization Support parameters
                                       </p>
                                    </li>
                                    <li>
                                       <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-33EE601D-CACD-4D38-924D-D7E553CECF45" title="The oidprovtool modify command changes the password for the interface_connect_info connect string.">Modifying a Provisioning Profile</a></p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" title="After you have installed and configured Oracle Internet Directory with Oracle Label Security, you should synchronize the database with OID and OLS.">Synchronizing the Database and Oracle Internet Directory</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG4151"></a><div class="props_rev_3"><a id="GUID-7424FF7F-1791-410C-A627-211FCA9FABF3" name="GUID-7424FF7F-1791-410C-A627-211FCA9FABF3"></a><h4 id="OLSAG-GUID-7424FF7F-1791-410C-A627-211FCA9FABF3" class="sect4">Configuring OID-Enabled Oracle Label Security with Oracle Data Guard</h4>
                  <div>
                     <p>To configure Oracle Directory-Enabled Oracle Label Security to work with Oracle Data Guard, first you configure the primary database, then the secondary database.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82">Step 1: Set Up Directory-Enabled Oracle Label Security with Data Guard</a><br>You must set up the directory-enabled Oracle Label Security with Oracle Data Guard.
                        </li>
                        <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-15596614-FD87-4159-93B7-0E8E268C42D2">Step 2: After the Switchover, Update the OID Provisioning Profile</a><br>Once you complete the switchover operation, you must update the Oracle Internet Directory provisioning profile.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" title="After you have installed and configured Oracle Internet Directory with Oracle Label Security, you should synchronize the database with OID and OLS.">Synchronizing the Database and Oracle Internet Directory</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="OLSAG4153"></a><div class="props_rev_3"><a id="GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82" name="GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82"></a><h5 id="OLSAG-GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82" class="sect5">Step 1: Set Up Directory-Enabled Oracle Label Security with Data Guard</h5>
                     <div>
                        <p>You must set up the directory-enabled Oracle Label Security with Oracle Data Guard.</p>
                        <ol>
                           <li>
                              <p>Configure Oracle Data Guard for your database.</p>
                              <p>See <a href="../dgbkr/oracle-data-guard-broker-installation-requirements.html#DGBKR070" target="_blank"><span><cite>Oracle Data Guard Broker</cite></span></a> for information about installing Oracle Data Guard.
                              </p>
                           </li>
                           <li>
                              <p>Register Oracle Label Security in Oracle Internet Directory on the primary database. </p>
                              <p>See <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" title="The registration and configuration process entails configuring an Oracle home for the directory, performing the configuration, and setting a password and connect data.">Registering a Database and Configuring OID-Enabled Oracle Label Security</a> for more information.
                              </p>
                           </li>
                           <li>
                              <p>Verify the that the policies have been propagated to the primary database. </p>
                              <ol type="a">
                                 <li>
                                    <p>Create the Oracle Label Security policies in an Oracle Internet Directory using the <code class="codeph">olsadmintool</code> utility or in Oracle Enterprise Manager Cloud Control. 
                                    </p>
                                    <p>See <a href="command-line-tools-for-label-security-using-oracle-internet-directory.html#GUID-CEBDC422-8872-46C1-8A3B-F1161539DD22" title="Oracle Label Security provides command-line tools for using Oracle Internet Directory.">Command-line Tools for Label Security Using Oracle Internet Directory</a> for more information about using the <code class="codeph">olsadmintool</code> utility.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Connect to the primary database as user <code class="codeph">LBACSYS</code>. 
                                    </p>
                                 </li>
                                 <li>
                                    <p>Query the <code class="codeph">DBA_SA_POLICIES</code> data dictionary view to confirm that the policies were propagated to the primary database.
                                    </p><pre class="oac_no_warn" dir="ltr">SELECT POLICY_NAME FROM DBA_SA_POLICIES;
</pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>Connect to the standby database as user <code class="codeph">LBACSYS</code> and then perform the <code class="codeph">SELECT POLICY_NAME FROM DBA_SA_POLICIES;</code> query to ensure that the policies that were propagated on the primary database are on the standby database, though the redo log apply process.
                              </p>
                           </li>
                           <li id="GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82__BABHIEBF">
                              <p>Copy the <code class="codeph">ewallet.p12</code>, <code class="codeph">sqlnet.ora</code>, and <code class="codeph">ldap.ora</code> files from the primary database to the standby database after the OLS-OID registration is complete. 
                              </p>
                              <p>This step is useful in case of failover and the primary database is not accessible. By default, these files are in the following locations:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">ewallet.p12</code>, the wallet file, is in either the <code class="codeph">$ORACLE_BASE/admin/</code><span class="italic"><code class="codeph">Oracle_SID</code></span><code class="codeph">/wallet</code> directory or the <code class="codeph">$ORACLE_HOME/admin/</code><span class="italic"><code class="codeph">Oracle_SID</code></span><code class="codeph">/wallet</code> directory.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">sqlnet.ora</code> is in the <code class="codeph">$ORACLE_HOME/dbs</code> directory. (Back up this file before copying it to the standby database.)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ldap.ora</code> is in the <code class="codeph">$ORACLE_HOME/dbs</code> directory.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li id="GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82__BABIIHGH">
                              <p>Go to the directory where you copied the <code class="codeph">ewallet.p12</code> file.
                              </p>
                           </li>
                           <li id="GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82__BABGJHGA">
                              <p>Create SSO wallet file (<code class="codeph">cwallet.sso</code>) associated to PKCS#12 wallet (<code class="codeph">ewallet.p12</code>) by using the following syntax: 
                              </p><pre class="oac_no_warn" dir="ltr">orapki wallet create -wallet <span class="italic">wallet_location</span> -auto_login [-pwd <span class="italic">password</span>]</pre></li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-7424FF7F-1791-410C-A627-211FCA9FABF3" title="To configure Oracle Directory-Enabled Oracle Label Security to work with Oracle Data Guard, first you configure the primary database, then the secondary database.">Configuring OID-Enabled Oracle Label Security with Oracle Data Guard</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="OLSAG4154"></a><div class="props_rev_3"><a id="GUID-15596614-FD87-4159-93B7-0E8E268C42D2" name="GUID-15596614-FD87-4159-93B7-0E8E268C42D2"></a><h5 id="OLSAG-GUID-15596614-FD87-4159-93B7-0E8E268C42D2" class="sect5">Step 2: After the Switchover, Update the OID Provisioning Profile</h5>
                     <div>
                        <p>Once you complete the switchover operation, you must update the Oracle Internet Directory provisioning profile.</p>
                        <div class="section">
                           <p>In this step, after you have you have performed the switchover and completed steps <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82__BABHIEBF">5</a>, <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82__BABIIHGH">6</a>, and <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82__BABGJHGA">7</a> under <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82" title="You must set up the directory-enabled Oracle Label Security with Oracle Data Guard.">Step 1: Set Up Directory-Enabled Oracle Label Security with Data Guard</a>, you are ready to update the provisioning profile in Oracle Internet Directory with the connection information of the new primary database. 
                           </p>
                           <p>If you do not complete the following procedure, then the policies will continue to be propagated to the new standby database, and the old primary database will fail with an <code class="codeph">ORA-16000 database open for read-only access</code> error. After you have updated the provisioning profile with the new primary database connection information, then policy propagation takes place in the new primary database. In addition, these policies are propagated to the new standby through the redo apply process. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>On either the primary or the standby computer, run the following <code class="codeph">oidprovtool</code> utility command for the new primary database. </span><div><pre class="oac_no_warn" dir="ltr">oidprovtool operation=modify \
ldap_host=<span class="italic">OID_Server_hostname</span> ldap_port=<span class="italic">OID_Server_Port</span> \
ldap_user_dn="cn=orcladmin"  \ application_dn="<span class="italic">LDAP_distinguised_name_of_application</span>" \ 
</pre><p>The <code class="codeph">application_dn</code> setting can be derived from <code class="codeph">dn=</code><span class="italic"><code class="codeph">dbname</code></span>, <code class="codeph">cn=oraclecontext</code>, <span class="italic"><code class="codeph">default_admin_context</code></span>. The <code class="codeph">ldap.ora</code> file lists the <span class="italic"><code class="codeph">default_admin_context</code></span> setting. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>When prompted, enter the LDAP user password.</span><div><pre class="oac_no_warn" dir="ltr">Please enter the LDAP password: 
</pre></div>
                           </li>
                           <li class="stepexpand"><span>When prompted, enter the interface connection information in the following format:</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">host</span>:<span class="italic">port</span>:<span class="italic">service_name</span>:dip:<span class="italic">password</span>
</pre><p><code class="codeph">DIP</code> is the Oracle Directory Integration and Provisioning (DIP) account that is installed with Oracle Label Security. This account is created automatically as part of the installation process for Oracle Internet Directory-enabled Oracle Label Security. 
                                 </p>
                                 <p>To specify no interface connection information, omit any settings and press <span class="bold">Return</span>. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>After you complete the provisioning profile, then restart the <code class="codeph">DIP</code> server.</span></li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-7424FF7F-1791-410C-A627-211FCA9FABF3" title="To configure Oracle Directory-Enabled Oracle Label Security to work with Oracle Data Guard, first you configure the primary database, then the secondary database.">Configuring OID-Enabled Oracle Label Security with Oracle Data Guard</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="OLSAG037"></a><div class="props_rev_3"><a id="GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7" name="GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7"></a><h3 id="OLSAG-GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7" class="sect3">Security Roles and Permitted Actions</h3>
               <div>
                  <p>Oracle Label Security permits specific tasks and access levels for Oracle Internet Directory, including restrictions on directory-enabled OLS policy creators.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB">Permitted Tasks and Access Levels for Oracle Internet Directory</a><br>To manage Oracle Label Security policies in Oracle Internet Directory, certain entities are given access control rights in the directory. 
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-F567BEB6-633E-41FE-B7D6-74E34110B030">Restriction on Policy Creators for Directory-Enabled Oracle Label Security</a><br>A member of the Policy Creators group can only create, browse, and delete Oracle Label Security policies. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="You can use Oracle Label Security with Oracle Internet Directory.">Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</a></p>
                     </div>
                  </div>
               </div>
               <a id="OLSAG3200"></a><a id="OLSAG3199"></a><div class="props_rev_3"><a id="GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB" name="GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB"></a><h4 id="OLSAG-GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB" class="sect4">Permitted Tasks and Access Levels for Oracle Internet Directory</h4>
                  <div>
                     <p>To manage Oracle Label Security policies in Oracle Internet Directory, certain entities are given access control rights in the directory. </p>
                     <p>The access control mechanisms are provided by Oracle Internet Directory. </p>
                     <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB__G1035529" title="This table lists certain entities and the tasks that each one can perform.">Table 7-3</a> describes, in abstract terms, these entities and the tasks they are enabled to perform. 
                     </p>
                     <div class="tblformalwide" id="GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB__G1035529">
                        <p class="titleintable">Table 7-3 Tasks That Certain Entities Can Perform</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Tasks That Certain Entities Can Perform" summary="This table lists certain entities and the tasks that each one can perform." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="27%" id="d30435e3708">Entity</th>
                                 <th align="left" valign="bottom" width="73%" id="d30435e3711">Tasks This Entity Can Perform</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d30435e3716" headers="d30435e3708 ">
                                    <p> Policy creators</p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d30435e3716 d30435e3711 ">
                                    <p>Create new (or delete existing) policies, create new (or remove existing) policy administrators.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d30435e3723" headers="d30435e3708 ">
                                    <p> Policy administrators</p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d30435e3723 d30435e3711 ">
                                    <p>For Policies: modify existing policy options and audit settings, enable or disable auditing for a policy. </p>
                                    <p>For Label components: create, modify, or remove levels, compartments and groups, such as by changing their full or long names or (for groups) by creating or deleting their children groups.</p>
                                    <p>For enterprise users: remove enterprise users from a policy, modify enterprise users' maximum or minimum levels, their read, write, and row access for compartments or groups, their privileges for a policy, and their label profiles.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB__G1035696" title="This table lists possible entries in a Distinguished Name (DN) and identifies the access levels allowed for policy creators, policy administrators, and databases.">Table 7-4</a> lists the specific access level operations permitted or disallowed for policy creators, policy administrators, and label security users.
                     </p>
                     <div class="tblformalwide" id="GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB__G1035696">
                        <p class="titleintable">Table 7-4 Access Levels Allowed by Users in OID</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Access Levels Allowed by Users in OID" summary="This table lists possible entries in a Distinguished Name (DN) and identifies the access levels allowed for policy creators, policy administrators, and databases." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="28%" id="d30435e3751">Entries</th>
                                 <th align="left" valign="bottom" width="25%" id="d30435e3754">Policy Creators</th>
                                 <th align="left" valign="bottom" width="23%" id="d30435e3757">Policy Administrators</th>
                                 <th align="left" valign="bottom" width="24%" id="d30435e3760">Databases</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3765" headers="d30435e3751 ">
                                    <p><code class="codeph">cn=Policies</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3765 d30435e3754 ">
                                    <p>can modify</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3765 d30435e3757 ">
                                    <p>no access</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3765 d30435e3760 ">
                                    <p>no access</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3779" headers="d30435e3751 ">
                                    <p><code class="codeph">cn=Admins</code>, <code class="codeph">cn=Policy1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3779 d30435e3754 ">
                                    <p>can modify</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3779 d30435e3757 ">
                                    <p>no access</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3779 d30435e3760 ">
                                    <p>no access</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3796" headers="d30435e3751 ">
                                    <p><code class="codeph">uniqueMember</code>: <code class="codeph">cn=Policy1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3796 d30435e3754 ">
                                    <p>can browse</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3796 d30435e3757 ">
                                    <p>can browse</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3796 d30435e3760 ">
                                    <p>can modify</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3813" headers="d30435e3751 ">
                                    <p><code class="codeph">cn=PolicyCreators</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3813 d30435e3754 ">
                                    <p>no access<a id="fn_1" name="fn_1" href="#fn_1" onclick="footdisplay(1, "The group cn=OracleContextAdmins is the owner of the group cn=PolicyCreators, so members in cn=OracleContextAdmins can modify cn=PolicyCreators.")"><sup>Foot&nbsp;1</sup></a></p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3813 d30435e3757 ">
                                    <p>no access</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3813 d30435e3760 ">
                                    <p>no access</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3830" headers="d30435e3751 ">
                                    <p><code class="codeph">cn=Levels</code>, <code class="codeph">cn=Policy1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3830 d30435e3754 ">
                                    <p>can browse and delete</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3830 d30435e3757 ">
                                    <p>can modify</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3830 d30435e3760 ">
                                    <p>no access</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3847" headers="d30435e3751 ">
                                    <p><code class="codeph">cn=Compartments</code>, <code class="codeph">cn=Policy1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3847 d30435e3754 ">
                                    <p>can browse and delete</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3847 d30435e3757 ">
                                    <p>can modify</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3847 d30435e3760 ">
                                    <p>no access</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3864" headers="d30435e3751 ">
                                    <p><code class="codeph">cn=Groups</code>, <code class="codeph">cn=Policy1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3864 d30435e3754 ">
                                    <p>can browse and delete</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3864 d30435e3757 ">
                                    <p>can modify</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3864 d30435e3760 ">
                                    <p>no access</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3881" headers="d30435e3751 ">
                                    <p>cn=AuditOptions,cn=Policy1</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3881 d30435e3754 ">
                                    <p>can browse and delete</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3881 d30435e3757 ">
                                    <p>can modify</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3881 d30435e3760 ">
                                    <p>no access</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3894" headers="d30435e3751 ">
                                    <p>cn=Profiles,cn=Policy1</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3894 d30435e3754 ">
                                    <p>can browse and delete</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3894 d30435e3757 ">
                                    <p>can modify</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3894 d30435e3760 ">
                                    <p>no access</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3907" headers="d30435e3751 ">
                                    <p>cn=Labels,cn=Policy1</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3907 d30435e3754 ">
                                    <p>can browse and delete</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3907 d30435e3757 ">
                                    <p>can modify</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3907 d30435e3760 ">
                                    <p>no access</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3920" headers="d30435e3751 ">
                                    <p>cn=DBServers</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3920 d30435e3754 ">
                                    <p>no access<a id="fn_2" name="fn_2" href="#fn_2" onclick="footdisplay(2, "The group cn=OracleDBCreators is the owner of the group cn=DBServers, so members in cn=OracleDBCreators can modify cn=DBServers.")"><sup>Foot&nbsp;2</sup></a></p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3920 d30435e3757 ">
                                    <p>no access</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3920 d30435e3760 ">
                                    <p>no access</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup></p><p>The group cn=OracleContextAdmins is the owner of the group cn=PolicyCreators, so members in cn=OracleContextAdmins can modify cn=PolicyCreators.</p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;2 </sup></p><p>The group cn=OracleDBCreators is the owner of the group cn=DBServers, so members in cn=OracleDBCreators can modify cn=DBServers.</p>
                     <p></p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7" title="Oracle Label Security permits specific tasks and access levels for Oracle Internet Directory, including restrictions on directory-enabled OLS policy creators.">Security Roles and Permitted Actions</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG3201"></a><div class="props_rev_3"><a id="GUID-F567BEB6-633E-41FE-B7D6-74E34110B030" name="GUID-F567BEB6-633E-41FE-B7D6-74E34110B030"></a><h4 id="OLSAG-GUID-F567BEB6-633E-41FE-B7D6-74E34110B030" class="sect4">Restriction on Policy Creators for Directory-Enabled Oracle Label Security</h4>
                  <div>
                     <p>A member of the Policy Creators group can only create, browse, and delete Oracle Label Security policies. </p>
                     <p>This user cannot perform policy administrative tasks, such as creating label components and adding users, even if explicitly added to the Policy Admins group of that policy. In short, a policy creator cannot be the administrator of any policy.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7" title="Oracle Label Security permits specific tasks and access levels for Oracle Internet Directory, including restrictions on directory-enabled OLS policy creators.">Security Roles and Permitted Actions</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="OLSAG3202"></a><a id="OLSAG038"></a><div class="props_rev_3"><a id="GUID-4961D225-DE89-4B96-A183-EA9D837C994F" name="GUID-4961D225-DE89-4B96-A183-EA9D837C994F"></a><h3 id="OLSAG-GUID-4961D225-DE89-4B96-A183-EA9D837C994F" class="sect3">Superseded PL/SQL Statements When OID Is Enabled with OLS</h3>
               <div>
                  <p>When Oracle Internet Directory is enabled with Oracle Label Security, there are several procedures that are superseded. </p>
                  <p>Only user <code class="codeph">LBACSYS</code> is allowed to run these procedures.
                  </p>
                  <p>For some of the procedures listed in the table, the functionality they provided is replaced by the <code class="codeph">olsadmintool</code> command named in the second column (and explained in <a href="oracle-label-security-reference.html#GUID-3EF3FD4E-A001-4110-9036-23022F2CD001" title="Oracle Label Security provides data dictionary tables, data dictionary views, and an user-created auditing view.">Oracle Label Security Tables and Views</a>). 
                  </p>
                  <div class="tblformalwide" id="GUID-4961D225-DE89-4B96-A183-EA9D837C994F__GUID-C6C02E2F-0145-4B23-8D65-53F2E2B23A61">
                     <p class="titleintable">Table 7-5 Procedures Superseded by <span class="bold">olsadmintool</span> When Using Oracle Internet Directory 
                     </p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Procedures Superseded by olsadmintool When Using Oracle Internet Directory " summary="This table lists OLS procedures that are superseded by olsadmintool commands when OLS is used with OID, and identifies the corresponding olsadmintool for each such procedure." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="49%" id="d30435e4096">Disabled Procedure</th>
                              <th align="left" valign="bottom" width="51%" id="d30435e4099">Replaced by olsadmintool Command</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4107" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_SYSDBA.CREATE_POLICY</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4107 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool createpolicy</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4116" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_SYSDBA.ALTER_POLICY</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4116 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool alterpolicy</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4125" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_SYSDBA.DROP_POLICY</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4125 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool droppolicy</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4134" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.CREATE_LEVEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4134 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool createlevel</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4143" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.ALTER_LEVEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4143 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool alterlevel</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4152" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.DROP_LEVEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4152 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool droplevel</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4161" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.CREATE_COMPARTMENT</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4161 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool createcompartment</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4170" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.ALTER_COMPARTMENT</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4170 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool altercompartment</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4179" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.DROP_COMPARTMENT</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4179 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool dropcompartment</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4188" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.CREATE_GROUP</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4188 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool creategroup</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4197" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.ALTER_GROUP</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4197 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool altergroup</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4207" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.ALTER_GROUP_PARENT</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4207 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool altergroup</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4216" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.DROP_GROUP</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4216 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool dropgroup</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4225" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_LEVELS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4225 d30435e4099 ">
                                 <p>None</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4233" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_COMPARTMENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4233 d30435e4099 ">
                                 <p>None</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4241" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_GROUPS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4241 d30435e4099 ">
                                 <p>None</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4249" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.ADD_COMPARTMENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4249 d30435e4099 ">
                                 <p>None</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4257" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.ALTER_COMPARTMENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4257 d30435e4099 ">
                                 <p>None </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4265" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.DROP_COMPARTMENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4265 d30435e4099 ">
                                 <p>None </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4273" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.DROP_ALL_COMPARTMENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4273 d30435e4099 ">
                                 <p>None </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4281" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.ADD_GROUPS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4281 d30435e4099 ">
                                 <p>None </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4289" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.ALTER_GROUPS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4289 d30435e4099 ">
                                 <p>None </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4298" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.DROP_GROUPS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4298 d30435e4099 ">
                                 <p>None </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4306" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.DROP_ALL_GROUPS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4306 d30435e4099 ">
                                 <p>None </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4314" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_USER_LABELS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4314 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool</code> <code class="codeph">createprofile;</code> <code class="codeph">olsadmintool</code> <code class="codeph">adduser;</code> <code class="codeph">olsadmintool</code> <code class="codeph">dropprofile;</code> <code class="codeph">olsadmintool</code> <code class="codeph">dropuser;</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4346" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_DEFAULT_LABEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4346 d30435e4099 ">
                                 <p>None</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4354" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_ROW_LABEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4354 d30435e4099 ">
                                 <p>None</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4362" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.DROP_USER_ACCESS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4362 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool dropuser</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4371" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_USER_PRIVS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4371 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool</code> <code class="codeph">createprofile;</code> <code class="codeph">olsadmintool</code> <code class="codeph">adduser; </code><code class="codeph">olsadmintool</code> <code class="codeph">dropprofile;</code> <code class="codeph">olsadmintool</code> <code class="codeph">dropuser;</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4401" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_AUDIT_ADMIN.AUDIT</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4401 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool</code> <code class="codeph">audit</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4413" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_AUDIT_ADMIN.NOAUDIT</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4413 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool</code> <code class="codeph">noaudit</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4425" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_AUDIT_ADMIN.AUDIT_LABEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4425 d30435e4099 ">
                                 <p>None</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4433" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_AUDIT_ADMIN.NOAUDIT_LABEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4433 d30435e4099 ">
                                 <p>None</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="You can use Oracle Label Security with Oracle Internet Directory.">Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG039"></a><div class="props_rev_3"><a id="GUID-1083B9CB-3D22-42B4-AA32-A817A3426AF5" name="GUID-1083B9CB-3D22-42B4-AA32-A817A3426AF5"></a><h3 id="OLSAG-GUID-1083B9CB-3D22-42B4-AA32-A817A3426AF5" class="sect3">Oracle Label Security Procedures for Policy Administrators</h3>
               <div>
                  <p>Several procedures in the <code class="codeph">SA_POLICY_ADMIN</code> PL/SQL package are allowed to be run only by policy administrators (enterprise users defined in Oracle Internet Directory). 
                  </p>
                  <p>These procedures are as follows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.APPLY_SCHEMA_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.APPLY_TABLE_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.DISABLE_SCHEMA_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.DISABLE_TABLE_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.ENABLE_SCHEMA_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.ENABLE_TABLE_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.GRANT_PROG_PRIVS</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.POLICY_SUBSCRIBE</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.POLICY_UNSUBSCRIBE</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.REMOVE_SCHEMA_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.REMOVE_TABLE_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.SET_PROG_PRIVS</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.REVOKE_PROG_PRIVS</code></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="You can use Oracle Label Security with Oracle Internet Directory.">Oracle Label Security Using Oracle&nbsp;Internet&nbsp;Directory</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
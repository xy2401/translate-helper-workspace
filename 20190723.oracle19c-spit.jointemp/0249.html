<html id='05488.managing-security-for-a-multitenant-environment.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">
      <meta name="description" content="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">
      <title>Managing Security for a Multitenant Environment</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator’s Guide ">
      <meta property="og:description" content="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96136-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="administering-application-containers-with-sql-plus.html" title="Previous" type="text/html">
      <link rel="next" href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="MULTI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="administering-application-containers-with-sql-plus.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="managing-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">Administering a Multitenant Environment</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Managing Security for a Multitenant Environment</li>
            </ol>
            <a id="GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" name="GUID-92E55FB3-F968-473F-927C-A95745CE5EBA"></a>
            
            <h2 id="MULTI-GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" class="sect2"><span class="enumeration_chapter">18 </span> Managing Security for a Multitenant Environment
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.</p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391">Managing Commonly and Locally Granted Privileges</a><br><span>In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.</span></li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29">Managing Common Roles and Local Roles</a><br>A common role is a role that is created in the root; a local role is created in a PDB.
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275">Restricting Operations on PDBs Using PDB Lockdown Profiles</a><br>You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs). 
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459">Configuring Operating System Users for a PDB</a><br>The <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> procedure configures user accounts to be operating system users for a PDB. 
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE">Using Application Contexts in a Multitenant Environment</a><br>An application context stores user identification that can enable or prevent a user from accessing data in the database.
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22">Using Oracle Virtual Private Database in a Multitenant Environment</a><br>Oracle Virtual Private Database (VPD) enables you to filter users who access data.
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E">Using Transport Layer Security in a Multitenant Environment</a><br>Transport Layer Security (TLS) can be used in a multitenant environment for application containers.
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-52FA95B1-8823-43F9-9D96-8F801BF16178">Oracle Data Redaction in a Multitenant Environment</a><br>In a multitenant environment, Oracle Data Redaction policies apply only to the objects within the current pluggable database (PDB). 
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890">Auditing in a Multitenant Environment</a><br>Auditing tracks changes that users make in the multitenant container database (CDB).
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="managing-a-multitenant-environment.html#GUID-93F1E584-D309-4301-82E0-AD0E60D4977C" title="You can administer a multitenant environment using SQL*Plus or Enterprise Manager Cloud Control (Cloud Control).">Administering a Multitenant Environment</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-9BA29009-8148-426C-AD8F-DA2679384391" name="GUID-9BA29009-8148-426C-AD8F-DA2679384391"></a><h3 id="MULTI-GUID-9BA29009-8148-426C-AD8F-DA2679384391" class="sect3"><span class="enumeration_section">18.1 </span>Managing Commonly and Locally Granted Privileges
               </h3>
               <div>
                  <p><span>In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.</span></p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D">How the Oracle Multitenant Option Affects Privileges</a><br>In a multitenant environment, all users, including common users, can exercise their privileges only within the current container. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926">About Commonly and Locally Granted Privileges</a><br>In a multitenant environment, both common users and local users can grant privileges to one another. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B">How Commonly Granted System Privileges Work</a><br>Users can exercise system privileges only within the PDB in which they were granted. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-A804A571-D104-451E-83E0-8CEF716DBC68">How Commonly Granted Object Privileges Work</a><br>Object privileges on common objects applies to the object as well as all associated links on this common object. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD">Granting or Revoking Privileges to Access a PDB</a><br>You can grant and revoke privileges for PDB access in a multitenant environment.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051">Example: Granting a Privilege in a Multitenant Environment</a><br>You can use the <span class="apiname" translate="no">GRANT</span> statement to grant privileges in a multitenant environment.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3">Enabling Common Users to View CONTAINER_DATA Object Information</a><br>Common users can view information about <code class="codeph">CONTAINER_DATA</code> objects in the root or for data in specific PDBs.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D" name="GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D"></a><h4 id="MULTI-GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D" class="sect4"><span class="enumeration_section">18.1.1 </span>How the Oracle Multitenant Option Affects Privileges
                  </h4>
                  <div>
                     <p>In a multitenant environment, all users, including common users, can exercise their privileges only within the current container. </p>
                     <p>However, a user connected to the root can perform certain operations that affect other pluggable databases (PDBs). These operations include <code class="codeph">ALTER PLUGGABLE DATABASE</code>, <code class="codeph">CREATE USER</code>, <code class="codeph">CREATE ROLE</code>, and <code class="codeph">ALTER USER</code>. The common user must possess the commonly granted privileges that enable these operations. A common user connected to the root can see metadata pertaining to PDBs by way of the container data objects (for example, multitenant container database (CDB) views and <code class="codeph">V$</code> views) in the root, provided that the common user has been granted privileges required to access these views and his <code class="codeph">CONTAINER_DATA</code> attribute has been set to allow seeing data about various PDBs. The common user cannot query tables or views in a PDB.
                     </p>
                     <p>Common users cannot exercise their privileges across other PDBs. They must first switch to the PDB that they want, and then exercise their privileges from there. To switch to a different container, the common user must have the <code class="codeph">SET CONTAINER</code> privilege. The <code class="codeph">SET CONTAINER</code> privilege must be granted either commonly or in the container to which the user is attempting to switch. Alternatively, the common user can start a new database session whose initial current container is the container this user wants, relying on the <code class="codeph">CREATE SESSION</code> privilege in that PDB.
                     </p>
                     <p>Be aware that commonly granted privileges may interfere with the security configured for individual PDBs. For example, suppose an application PDB database administrator wants to prevent any user in the PDB from modifying a particular application common object. A privilege (such as <code class="codeph">UPDATE</code>) granted commonly to <code class="codeph">PUBLIC</code> or to a common user or common role on the object would circumvent the PDB database administrator’s intent.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926" name="GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926"></a><h4 id="MULTI-GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926" class="sect4"><span class="enumeration_section">18.1.2 </span>About Commonly and Locally Granted Privileges
                  </h4>
                  <div>
                     <p>In a multitenant environment, both common users and local users can grant privileges to one another. </p>
                     <p></p>
                     <p>Privileges by themselves are neither common nor local. How the privileges are applied depends on whether the privilege is granted commonly or granted locally. </p>
                     <p>For commonly granted privileges:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A privilege that is granted commonly can be used in every existing and future container. </p>
                        </li>
                        <li>
                           <p>Only common users can grant privileges commonly, and only if the grantee is common.</p>
                        </li>
                        <li>
                           <p>A common user can grant privileges to another common user or to a common role. </p>
                        </li>
                        <li>
                           <p>The grantor must be connected to the root and must specify <code class="codeph">CONTAINER=ALL</code> in the <code class="codeph">GRANT</code> statement. 
                           </p>
                        </li>
                        <li>
                           <p>Both system and object privileges can be commonly granted. (Object privileges become actual only with regard to the specified object.)</p>
                        </li>
                        <li>
                           <p>When a common user connects to or switches to a given container, this user's ability to perform various activities (such as creating a table) is controlled by privileges granted commonly as well as privileges granted locally in the given container.</p>
                        </li>
                        <li>
                           <p>Do not grant privileges to <code class="codeph">PUBLIC</code> commonly.
                           </p>
                        </li>
                     </ul>
                     <p>For locally granted privileges:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A privilege granted locally can be used only in the container in which it was granted. When the privilege is granted in the root, it applies only to the root.</p>
                        </li>
                        <li>
                           <p>Both common users and local users can grant privileges locally.</p>
                        </li>
                        <li>
                           <p>A common user and a local user can grant privileges to other common or local roles.</p>
                        </li>
                        <li>
                           <p>The grantor must be connected to the container and must specify <code class="codeph">CONTAINER=CURRENT</code> in the <code class="codeph">GRANT</code> statement. 
                           </p>
                        </li>
                        <li>
                           <p>Any user can grant a privilege locally to any other user or role (both common and local) or to the <code class="codeph">PUBLIC</code> role.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="overview-of-the-multitenant-architecture.html#GUID-16473474-7F47-4E40-A592-01836E7D911C" title="Just as in a non-CDB, users in a CDB can grant and be granted roles and privileges. Roles and privileges in a CDB, however, are either locally or commonly granted.">Overview of Privilege and Role Grants in a CDB</a></li>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" title="All privileges that Oracle grants to the PUBLIC role are granted locally.">How the PUBLIC Role Works in a Multitenant Environment</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B" name="GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B"></a><h4 id="MULTI-GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B" class="sect4"><span class="enumeration_section">18.1.3 </span>How Commonly Granted System Privileges Work
                  </h4>
                  <div>
                     <p>Users can exercise system privileges only within the PDB in which they were granted. </p>
                     <p>For example, if a system privilege is locally granted to a common user <code class="codeph">A</code> in a PDB <code class="codeph">B</code>, user <code class="codeph">A</code> can exercise that privilege only while connected to PDB <code class="codeph">B</code>. 
                     </p>
                     <p>System privileges can apply in the root and in all existing and future PDBs if the following requirements are met:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The system privilege grantor is a common user and the grantee is a common user, a common role, or the <code class="codeph">PUBLIC</code> role. Do not commonly grant system privileges to the <code class="codeph">PUBLIC</code> role, because this in effect makes the system privilege available to all users.
                           </p>
                        </li>
                        <li>
                           <p>The system privilege grantor possesses the <code class="codeph">ADMIN OPTION</code> for the commonly granted privilege
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">GRANT</code> statement must contain the <code class="codeph">CONTAINER=ALL</code> clause.
                           </p>
                        </li>
                     </ul>
                     <p>The following example shows how to commonly grant a privilege to the common user <code class="codeph">c##hr_admin</code>.
                     </p><pre class="pre codeblock"><code>CONNECT SYSTEM 
Enter password: <span class="italic">password</span>
Connected.

GRANT CREATE ANY TABLE TO c##hr_admin CONTAINER=ALL;</code></pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-CB7E6FE8-8DFE-445F-A521-6A1D82BBA925" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A804A571-D104-451E-83E0-8CEF716DBC68" name="GUID-A804A571-D104-451E-83E0-8CEF716DBC68"></a><h4 id="MULTI-GUID-A804A571-D104-451E-83E0-8CEF716DBC68" class="sect4"><span class="enumeration_section">18.1.4 </span>How Commonly Granted Object Privileges Work
                  </h4>
                  <div>
                     <p>Object privileges on common objects applies to the object as well as all associated links on this common object. </p>
                     <p>These links include all metadata links, data links (previously called object links), or extended data links that are associated with it in the root and in all PDBs belonging to the container (including future PDBs) if certain requirements are met.</p>
                     <p>These requirements are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The object privilege grantor is a common user and the grantee is a common user, a common role, or the <code class="codeph">PUBLIC</code> role. 
                           </p>
                        </li>
                        <li>
                           <p>The object privilege grantor possesses the commonly granted <code class="codeph">GRANT OPTION</code> for the privilege
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">GRANT</code> statement contains the <code class="codeph">CONTAINER=ALL</code> clause.
                           </p>
                        </li>
                     </ul>
                     <p>The following example shows how to grant an object privilege to the common user <code class="codeph">c##hr_admin</code> so that he can select from the <code class="codeph">DBA_PDBS</code> view in the CDB root or in any of the associated PDBs that he can access.
                     </p><pre class="oac_no_warn" dir="ltr">CONNECT SYSTEM
Enter password: <span class="italic">password</span>
Connected.

GRANT SELECT ON DBA_OBJECTS TO c##hr_admin 
CONTAINER=ALL;</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-1592480B-9EFC-4C3F-B84F-F518A5B80CF9" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                           <li><a href="overview-of-the-multitenant-architecture.html#GUID-A356382A-413A-4A42-98DC-6C2464808202" title="From the user and application perspective, the data dictionary in each container in a CDB is separate, as it would be in a non-CDB.">Data Dictionary Architecture in a CDB</a></li>
                           <li><a href="overview-of-the-multitenant-architecture.html#GUID-6A7183B5-E0AA-47E1-992C-838FDF21C3D9" title="In a CDB, the namespace for every object is scoped to its container.">Namespaces in a CDB</a></li>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" title="All privileges that Oracle grants to the PUBLIC role are granted locally.">How the PUBLIC Role Works in a Multitenant Environment</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD" name="GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD"></a><h4 id="MULTI-GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD" class="sect4"><span class="enumeration_section">18.1.5 </span>Granting or Revoking Privileges to Access a PDB
                  </h4>
                  <div>
                     <p>You can grant and revoke privileges for PDB access in a multitenant environment.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD__GUID-C330F2CE-7F39-404D-9086-5D858CB7596B">To grant a privilege in a multitenant environment:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Include the <code class="codeph">CONTAINER</code> clause in the <code class="codeph">GRANT</code> or <code class="codeph">REVOKE</code> statement. 
                              </p>
                           </li>
                        </ul>
                        <p>Setting <code class="codeph">CONTAINER</code> to <code class="codeph">ALL</code> applies the privilege to all existing and future containers; setting it to <code class="codeph">CURRENT</code> applies the privilege to the local container only. Omitting the <code class="codeph">CONTAINER</code> clause applies the privilege to the local container. If you issue the <code class="codeph">GRANT</code> statement from the root and omit the <code class="codeph">CONTAINER</code> clause, then the privilege is applied locally. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../sqlrf/GRANT.html#SQLRF-GUID-20B4E2C0-A7F8-4BC8-A5E8-BE61BDC41AC3" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051" name="GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051"></a><h4 id="MULTI-GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051" class="sect4"><span class="enumeration_section">18.1.6 </span>Example: Granting a Privilege in a Multitenant Environment
                  </h4>
                  <div>
                     <p>You can use the <span class="apiname" translate="no">GRANT</span> statement to grant privileges in a multitenant environment.
                     </p>
                     <p><a href="managing-security-for-a-multitenant-environment.html#GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051__CACJGEJA">Example 18-1</a> shows how to commonly grant the <code class="codeph">CREATE TABLE</code> privilege to common user <code class="codeph">c##hr_admin</code> so that this user can use this privilege in all existing and future containers.
                     </p>
                     <div class="example" id="GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051__CACJGEJA">
                        <p class="titleinexample">Example 18-1 Granting a Privilege in a Multitenant Environment</p><pre class="pre codeblock"><code>CONNECT SYSTEM
Enter password: <span class="italic">password</span>
Connected.

GRANT CREATE TABLE TO c##hr_admin CONTAINER=ALL;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" name="GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3"></a><h4 id="MULTI-GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" class="sect4"><span class="enumeration_section">18.1.7 </span>Enabling Common Users to View CONTAINER_DATA Object Information
                  </h4>
                  <div>
                     <p>Common users can view information about <code class="codeph">CONTAINER_DATA</code> objects in the root or for data in specific PDBs.
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E">Viewing Data About the Root, CDB, and PDBs While Connected to the Root</a><br>You can restrict view information for the <code class="codeph">X$</code> table and the <code class="codeph">V$</code>,  <code class="codeph">GV$</code> and <code class="codeph">CDB_*</code> views when common users perform queries.
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C">Enabling Common Users to Query Data in Specific PDBs</a><br>You can enable common users to access data pertaining to specific PDBs by adjusting the users’ <code class="codeph">CONTAINER_DATA</code> attribute.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E" name="GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E"></a><h5 id="MULTI-GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E" class="sect5"><span class="enumeration_section">18.1.7.1 </span>Viewing Data About the Root, CDB, and PDBs While Connected to the Root
                     </h5>
                     <div>
                        <p>You can restrict view information for the <code class="codeph">X$</code> table and the <code class="codeph">V$</code>,  <code class="codeph">GV$</code> and <code class="codeph">CDB_*</code> views when common users perform queries.
                        </p>
                        <div class="section">
                           <p>The <code class="codeph">X$</code> table and these views contain  information about the application root and its associated application PDBs or, if you are connected to the CDB root, the entire CDB. 
                           </p>
                           <p>Restricting this information is useful when you do not want to expose sensitive information about other PDBs. To enable this functionality, Oracle Database provides these tables and views as container data objects. You can find if a specific table or view is a container data object by querying the <code class="codeph">TABLE_NAME</code>, <code class="codeph">VIEW_NAME</code>, and <code class="codeph">CONTAINER_DATA</code> columns of the <code class="codeph">USER_</code>|<code class="codeph">DBA_</code>|<code class="codeph">ALL_VIEWS</code>|<code class="codeph">TABLES</code> dictionary views. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E__GUID-8877E116-47B2-401F-BB4F-5BEA0B56A8F2">To find information about the default (user-level) and object-specific <code class="codeph">CONTAINER_DATA</code> attributes:
                           </p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus or SQL Developer, log in to the root.</p>
                              </li>
                              <li>
                                 <p>Query the <code class="codeph">CDB_CONTAINER_DATA</code> data dictionary view.
                                 </p>
                                 <p>For example:</p><pre class="pre codeblock"><code>COLUMN USERNAME FORMAT A15
COLUMN DEFAULT_ATTR FORMAT A7
COLUMN OWNER FORMAT A15
COLUMN OBJECT_NAME FORMAT A15
COLUMN ALL_CONTAINERS FORMAT A3
COLUMN CONTAINER_NAME FORMAT A10
COLUMN CON_ID FORMAT A6

SELECT USERNAME, DEFAULT_ATTR, OWNER, OBJECT_NAME, 
       ALL_CONTAINERS, CONTAINER_NAME, CON_ID 
FROM   CDB_CONTAINER_DATA 
ORDER BY OBJECT_NAME;

USERNAME        DEFAULT OWNER           OBJECT_NAME     ALL CONTAINERS CON_ID
--------------- ------- --------------- --------------- --- ---------- ------
C##HR_ADMIN     N       SYS             V$SESSION       N   CDB$ROOT        1
C##HR_ADMIN     N       SYS             V$SESSION       N   SALESPDB        1
C##HR_ADMIN     Y                                       N   HRPDB           1
C##HR_ADMIN     Y                                       N   CDB$ROOT        1
DBSNMP          Y                                       Y                   1
SYSTEM          Y                                       Y                   1</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="overview-of-the-multitenant-architecture.html#GUID-1A22B2C5-B302-450E-BB41-6CB6B1AE75B0" title="A container data object is a table or view containing data pertaining to multiple containers or the whole CDB.">Container Data Objects in a CDB</a></li>
                              <li><a href="../refrn/DBA_CONTAINER_DATA.html#REFRN-GUID-094B1D4B-F6BB-43CE-A1FC-3D6DA51CE1BA" target="_blank"><span><cite>Oracle Database Reference</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" title="Common users can view information about CONTAINER_DATA objects in the root or for data in specific PDBs.">Enabling Common Users to View CONTAINER_DATA Object Information</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C" name="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C"></a><h5 id="MULTI-GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C" class="sect5"><span class="enumeration_section">18.1.7.2 </span>Enabling Common Users to Query Data in Specific PDBs
                     </h5>
                     <div>
                        <p>You can enable common users to access data pertaining to specific PDBs by adjusting the users’ <code class="codeph">CONTAINER_DATA</code> attribute.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C__GUID-12E0B2F6-83BF-46B7-961B-06AFD757E71E">To enable common users to access data about specific PDBs:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Issue the <code class="codeph">ALTER USER</code> statement in the root. 
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C__GUID-62CF107D-0766-4CF3-BABD-0DA884B6BE79">
                           <p class="titleinexample">Example 18-2 Setting the CONTAINER_DATA Attribute</p>
                           <p>This example shows how to issue the <code class="codeph">ALTER USER</code> statement to enable the common user <code class="codeph">c##hr_admin</code> to view information pertaining to the <code class="codeph">CDB$ROOT</code>, <code class="codeph">SALES_PDB</code>, and <code class="codeph">HRPDB</code> containers in the <code class="codeph">V$SESSION</code> view (assuming this user can query that view). 
                           </p><pre class="pre codeblock"><code>CONNECT SYSTEM
Enter password: <span class="italic">password</span>
Connected.

ALTER USER c##hr_admin
SET CONTAINER_DATA = (CDB$ROOT, SALESPDB, HRPDB) 
FOR V$SESSION CONTAINER=CURRENT;
</code></pre><p>In this specification: </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">SET CONTAINER_DATA</code> lists containers, data pertaining to which can be accessed by the user.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">FOR V$SESSION </code>specifies the <code class="codeph">CONTAINER_DATA</code> dynamic view, which common user <code class="codeph">c##hr_admin</code> will query.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">CONTAINER = CURRENT</code> must be specified because when you are connected to the root, <code class="codeph">CONTAINER=ALL</code> is the default for the <code class="codeph">ALTER USER</code> statement, but modification of the <code class="codeph">CONTAINER_DATA</code> attribute must be restricted to the root.
                                 </p>
                              </li>
                           </ul>
                           <p>If you want to enable user <code class="codeph">c##hr_admin</code> to view information that pertains to the <code class="codeph">CDB$ROOT</code>, <code class="codeph">SALES_PDB</code>, <code class="codeph">HRPDB</code> containers in all <code class="codeph">CONTAINER_DATA</code> objects that this user can access, then omit <code class="codeph">FOR V$SESSION</code>. For example: 
                           </p><pre class="pre codeblock"><code>ALTER USER c##hr_admin
SET CONTAINER_DATA = (CDB$ROOT, SALESPDB, HRPDB) 
CONTAINER=CURRENT;
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../sqlrf/ALTER-USER.html#SQLRF-GUID-9FCD038D-8193-4241-85CD-2F4723B27D44" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" title="Common users can view information about CONTAINER_DATA objects in the root or for data in specific PDBs.">Enabling Common Users to View CONTAINER_DATA Object Information</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-F87A4196-186D-4D31-83B4-E097325C3A29" name="GUID-F87A4196-186D-4D31-83B4-E097325C3A29"></a><h3 id="MULTI-GUID-F87A4196-186D-4D31-83B4-E097325C3A29" class="sect3"><span class="enumeration_section">18.2 </span>Managing Common Roles and Local Roles
               </h3>
               <div>
                  <p>A common role is a role that is created in the root; a local role is created in a PDB.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0">About Common Roles and Local Roles</a><br><span>In a multitenant environment, database roles can be specific to a PDB or used throughout the entire system container or application container. </span> 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-1557398B-E8F0-4792-A8FA-3F805F198B47">How Common Roles Work</a><br>Common roles are visible in the root and in every PDB of a container within which they are defined in a multitenant environment.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9">How the PUBLIC Role Works in a Multitenant Environment</a><br>All privileges that Oracle grants to the <code class="codeph">PUBLIC</code> role are granted locally.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-34E18048-D157-415D-AA7F-33C5AC315DC8">Privileges Required to Create, Modify, or Drop a Common Role</a><br><span>Only common users who have the commonly granted <code class="codeph">CREATE ROLE</code>, <code class="codeph">ALTER ROLE</code>, and <code class="codeph">DROP ROLE</code> privileges can create, alter, or drop common roles.</span> 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62">Rules for Creating Common Roles</a><br>When you create a common role, you must follow special rules.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D">Creating a Common Role</a><br>You can use the <code class="codeph">CREATE ROLE</code> statement to create a common role.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5">Rules for Creating Local Roles</a><br>To create a local role, you must follow special rules.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F">Creating a Local Role</a><br>You can use the <code class="codeph">CREATE ROLE</code> statement to create a role. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C">Role Grants and Revokes for Common Users and Local Users</a><br>Role grants and revokes apply only to the scope of access of the common user or the local user.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0" name="GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0"></a><h4 id="MULTI-GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0" class="sect4"><span class="enumeration_section">18.2.1 </span>About Common Roles and Local Roles
                  </h4>
                  <div>
                     <p><span>In a multitenant environment, database roles can be specific to a PDB or used throughout the entire system container or application container. </span> 
                     </p>
                     <p>A common role is a role whose identity and (optional) password are created in the root of a container and will be known in the root and in all existing and future PDBs belonging to that container. </p>
                     <p>A local role exists in only one PDB and can only be used within this PDB. It does not have any commonly granted privileges. </p>
                     <p>Note the following: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Common users can both create and grant common roles to other common and local users.</p>
                        </li>
                        <li>
                           <p>You can grant a role (local or common) to a local user or role only locally.</p>
                        </li>
                        <li>
                           <p>If you grant a common role locally, then the privileges of that common role apply only in the container where the role is granted.</p>
                        </li>
                        <li>
                           <p>Local users cannot create common roles, but they can grant them to common and other local users. </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">CONTAINER = ALL</code> clause is the default when you create a common role in the CDB root or an application root. 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-A5B26A03-32CF-4F5D-A6BE-F2452AD8CB8A" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-1557398B-E8F0-4792-A8FA-3F805F198B47" name="GUID-1557398B-E8F0-4792-A8FA-3F805F198B47"></a><h4 id="MULTI-GUID-1557398B-E8F0-4792-A8FA-3F805F198B47" class="sect4"><span class="enumeration_section">18.2.2 </span>How Common Roles Work
                  </h4>
                  <div>
                     <p>Common roles are visible in the root and in every PDB of a container within which they are defined in a multitenant environment.</p>
                     <p>A privilege can be granted commonly to a common role if: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The grantor is a common user.</p>
                        </li>
                        <li>
                           <p>The grantor possesses the commonly granted <code class="codeph">ADMIN OPTION</code> for the privilege that is being granted.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">GRANT</code> statement contains the <code class="codeph">CONTAINER=ALL</code> clause.
                           </p>
                        </li>
                     </ul>
                     <p>If the common role contains locally granted privileges, then these privileges apply only within the PDB in which they were granted to the common role. A local role cannot be granted commonly.</p>
                     <p>For example, suppose the CDB common user <code class="codeph">c##hr_mgr</code> has been commonly granted the <code class="codeph">DBA</code> role. This means that user <code class="codeph">c##hr_mgr</code> can use the privileges associated with the <code class="codeph">DBA</code> role in the root and in every PDB in the multitenant environment. However, if the CDB common user <code class="codeph">c##hr_mgr</code> has only been locally granted the <code class="codeph">DBA</code> role for the <code class="codeph">hr_pdb</code> PDB, then this user can only use the <code class="codeph">DBA</code> role's privileges in the <code class="codeph">hr_pdb</code> PDB. 
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" name="GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9"></a><h4 id="MULTI-GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" class="sect4"><span class="enumeration_section">18.2.3 </span>How the PUBLIC Role Works in a Multitenant Environment
                  </h4>
                  <div>
                     <p>All privileges that Oracle grants to the <code class="codeph">PUBLIC</code> role are granted locally.
                     </p>
                     <p>This feature enables you to revoke privileges or roles that have been granted to the <code class="codeph">PUBLIC</code> role individually in each PDB as needed. If you must grant any privileges to the <code class="codeph">PUBLIC</code> role, then grant them locally. Never grant privileges to <code class="codeph">PUBLIC</code> commonly.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926" title="In a multitenant environment, both common users and local users can grant privileges to one another.">About Commonly and Locally Granted Privileges</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-34E18048-D157-415D-AA7F-33C5AC315DC8" name="GUID-34E18048-D157-415D-AA7F-33C5AC315DC8"></a><h4 id="MULTI-GUID-34E18048-D157-415D-AA7F-33C5AC315DC8" class="sect4"><span class="enumeration_section">18.2.4 </span>Privileges Required to Create, Modify, or Drop a Common Role
                  </h4>
                  <div>
                     <p><span>Only common users who have the commonly granted <code class="codeph">CREATE ROLE</code>, <code class="codeph">ALTER ROLE</code>, and <code class="codeph">DROP ROLE</code> privileges can create, alter, or drop common roles.</span> 
                     </p>
                     <p>Common users can also create local roles, but these roles are available only in the PDB in which they were created. </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62" name="GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62"></a><h4 id="MULTI-GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62" class="sect4"><span class="enumeration_section">18.2.5 </span>Rules for Creating Common Roles
                  </h4>
                  <div>
                     <p>When you create a common role, you must follow special rules.</p>
                     <p>The rules are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Ensure that you are in the correct root.</span> For the creation of common roles, you must be in the correct root, either the CDB root or the application root. You cannot create common roles from a PDB. To check if you are in the correct root, run one of the following: 
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To confirm that you are in the CDB root, you can issue the <code class="codeph">show_con_name</code> command. The output should be <code class="codeph">CDB$ROOT</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>To confirm that you are in an application root, verify that the following query returns <code class="codeph">YES</code>:
                                 </p><pre class="pre codeblock"><code>SELECT APPLICATION_ROOT FROM V$PDBS WHERE CON_ID=SYS_CONTEXT('USERENV', 'CON_ID');</code></pre></li>
                              <li>
                                 <p><span class="bold">Ensure that the name that you give the common role starts with the value of the COMMON_USER_PREFIX parameter (which defaults to C##).</span> Note that this requirement does not apply to the names of existing Oracle-supplied roles, such as <code class="codeph">DBA</code> or <code class="codeph">RESOURCE</code>.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><span class="bold">Optionally, set the CONTAINER clause to ALL.</span> As long as you are in the root, if you omit the <code class="codeph">CONTAINER = ALL</code> clause, then by default the role is created as a common role for the CDB root or the application root. 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D" name="GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D"></a><h4 id="MULTI-GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D" class="sect4"><span class="enumeration_section">18.2.6 </span>Creating a Common Role
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">CREATE ROLE</code> statement to create a common role.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Connect to the root of the CDB or the application container in which you want to create the common role. </span><div>
                              <p>For example: </p><pre class="pre codeblock"><code>CONNECT SYSTEM
Enter password: <span class="italic">password</span>
Connected.
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CREATE ROLE</code> statement with the <code class="codeph">CONTAINER</code> clause set to <code class="codeph">ALL</code>.</span><div>
                              <p>For example: </p><pre class="pre codeblock"><code>CREATE ROLE c##sec_admin IDENTIFIED BY <span class="italic">password</span> CONTAINER=ALL; </code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-B8165502-1075-4B7D-9892-2D1EDE2ECB82" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5" name="GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5"></a><h4 id="MULTI-GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5" class="sect4"><span class="enumeration_section">18.2.7 </span>Rules for Creating Local Roles
                  </h4>
                  <div>
                     <p>To create a local role, you must follow special rules.</p>
                     <p>These rules are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You must be connected to the PDB in which you want to create the role, and have the <code class="codeph">CREATE ROLE</code> privilege.
                           </p>
                        </li>
                        <li>
                           <p>The name that you give the local role must not start with the value of the <code class="codeph">COMMON_USER_PREFIX</code> parameter (which defaults to <code class="codeph">C##</code>). 
                           </p>
                        </li>
                        <li>
                           <p>You can include <code class="codeph">CONTAINER=CURRENT</code> in the <code class="codeph">CREATE ROLE</code> statement to specify the role as a local role. If you are connected to a PDB and omit this clause, then the  <code class="codeph">CONTAINER=CURRENT</code> clause is implied.
                           </p>
                        </li>
                        <li>
                           <p>You cannot have common roles and local roles with the same name. However, you can use the same name for local roles in different PDBs. To find the names of existing roles, query the <code class="codeph">CDB_ROLES</code> and <code class="codeph">DBA_ROLES</code> data dictionary views.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F" name="GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F"></a><h4 id="MULTI-GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F" class="sect4"><span class="enumeration_section">18.2.8 </span>Creating a Local Role
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">CREATE ROLE</code> statement to create a role. 
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Connect to the PDB in which you want to create the local role. </span><div>
                              <p>For example: </p><pre class="pre codeblock"><code>CONNECT SYSTEM@hrpdb
Enter password: <span class="italic">password</span>
Connected.
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CREATE ROLE</code> statement with the <code class="codeph">CONTAINER</code> clause set to <code class="codeph">CURRENT</code>.</span><div>
                              <p>For example: </p><pre class="pre codeblock"><code>CREATE ROLE sec_admin CONTAINER=CURRENT;</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-B8165502-1075-4B7D-9892-2D1EDE2ECB82" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C" name="GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C"></a><h4 id="MULTI-GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C" class="sect4"><span class="enumeration_section">18.2.9 </span>Role Grants and Revokes for Common Users and Local Users
                  </h4>
                  <div>
                     <p>Role grants and revokes apply only to the scope of access of the common user or the local user.</p>
                     <p>Common users can grant and revoke common roles to and from other common users. A local user can grant a common role to any user in a PDB, including common users, but this grant applies only within the PDB.</p>
                     <p>The following example shows how to grant the common user <code class="codeph">c##sec_admin</code> the <code class="codeph">AUDIT_ADMIN</code> common role for use in all containers.
                     </p><pre class="pre codeblock"><code>CONNECT SYSTEM
Enter password: <span class="italic">password</span>
Connected.

GRANT AUDIT_ADMIN TO c##sec_admin CONTAINER=ALL;
</code></pre><p>Similarly, the next example shows how local user <code class="codeph">aud_admin</code> can grant the common user <code class="codeph">c##sec_admin</code> the <code class="codeph">AUDIT_ADMIN</code> common role for use within the <code class="codeph">hrpdb</code> PDB. 
                     </p><pre class="pre codeblock"><code>CONNECT aud_admin@hrpdb
Enter password: <span class="italic">password</span>
Connected.

GRANT AUDIT_ADMIN TO c##sec_admin CONTAINER=CURRENT;
</code></pre><p>This example shows how a local user <code class="codeph">aud_admin</code> can revoke a role from another user in a PDB. If you omit the <code class="codeph">CONTAINER</code> clause, then <code class="codeph">CURRENT</code> is implied.
                     </p><pre class="pre codeblock"><code>CONNECT aud_admin@hrpdb
Enter password: <span class="italic">password</span>
Connected.

REVOKE sec_admin FROM psmith CONTAINER=CURRENT;</code></pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" name="GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275"></a><h3 id="MULTI-GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" class="sect3"><span class="enumeration_section">18.3 </span>Restricting Operations on PDBs Using PDB Lockdown Profiles
               </h3>
               <div>
                  <p>You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs). </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1">About PDB Lockdown Profiles</a><br>A PDB lockdown profile is a named set of features that controls a group of operations.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D">Default PDB Lockdown Profiles</a><br>Oracle Database provides a set of default PDB lockdown profiles that you can customize for your site requirements.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70">Creating a PDB Lockdown Profile</a><br>To create a PDB lockdown profile, you must have the <code class="codeph">CREATE LOCKDOWN PROFILE</code> system privilege. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F">Enabling or Disabling a PDB Lockdown Profile</a><br>To enable or disable a PDB lockdown profile, use the <code class="codeph">PDB_LOCKDOWN</code> initialization parameter
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B">Dropping a PDB Lockdown Profile</a><br>To drop a PDB lockdown profile, you must have the <code class="codeph">DROP LOCKDOWN PROFILE</code> system privilege and be logged into the CDB or application root.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1" name="GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1"></a><h4 id="MULTI-GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1" class="sect4"><span class="enumeration_section">18.3.1 </span>About PDB Lockdown Profiles
                  </h4>
                  <div>
                     <p>A PDB lockdown profile is a named set of features that controls a group of operations.</p>
                     <p>In some cases, you can enable or disable operations individually. For example, a PDB lockdown profile can contain settings to disable specific clauses that come with the <code class="codeph">ALTER SYSTEM</code> statement.
                     </p>
                     <p>PDB lockdown profiles restrict user access to the functionality the features provided, similar to resource limits that are defined for users. As the name suggests, you use PDB lockdown profiles in a CDB, for an application container, or for a PDB or application PDB. You can create custom profiles to accommodate the requirements of your site. PDB profiles enable you to define custom security policies for an application. In addition, you can create a lockdown profile that is based on another profile, called a <strong class="term">base profile</strong>. You can configure this profile to be dynamically updated when the base profile is modified, or configure it to be static (unchanging) when the base profile is updated. Lockdown profiles are designed for both Oracle Cloud and on-premise environments.
                     </p>
                     <p>When identities are shared between PDBs, elevated privileges may exist. You can use lockdown profiles to prevent this elevation of privileges. Identities can be shared in the following situations:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>At the operating system level, when the database interacts with operating system resources such as files or processes</p>
                        </li>
                        <li>
                           <p>At the network level, when the database communicates with other systems, and network identity is important</p>
                        </li>
                        <li>
                           <p>Inside the database, as PDBs access or create common objects or they communicate across container boundaries using features such as database links</p>
                        </li>
                     </ul>
                     <p>The features that use shared identifies and that benefit from PDB lockdown profiles are in the following categories:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Network access features.</span> These are operations that use the network to communicate outside the PDB. For example, the PL/SQL packages <code class="codeph">UTL_TCP</code>, <code class="codeph">UTL_HTTP</code>, <code class="codeph">UTL_MAIL</code>, <code class="codeph">UTL_SNMP</code>, <code class="codeph">UTL_INADDR</code>, and <code class="codeph">DBMS_DEBUG_JDWP</code> perform these kinds of operations. Currently, ACLs are used to control this kind of access to share network identity. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Common user or object access.</span> These are operations in which a local user in the PDB can proxy through common user accounts or access objects in a common schema. These kinds of operations include adding or replacing objects in a common schema, granting privileges to common objects, accessing common directory objects, granting the <code class="codeph">INHERIT PRIVILEGES</code> role to a common user, and manipulating a user proxy to a common user. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Operating System access.</span> For example, you can restrict access to the <code class="codeph">UTL_FILE</code> or <code class="codeph">DBMS_FILE_TRANSFER</code> PL/SQL packages.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Connections.</span> For example, you can restrict common users from connecting to the PDB or you can restrict a local user who has the <code class="codeph">SYSOPER</code> administrative privilege from connecting to a PDB that is open in restricted mode.
                           </p>
                        </li>
                     </ul>
                     <p>The general procedure for creating a PDB lockdown profile is to first create it in the CDB root or the application root using the <code class="codeph">CREATE LOCKDOWN PROFILE</code> statement, and then use the <code class="codeph">ALTER LOCKDOWN PROFILE</code> statement to add the restrictions.
                     </p>
                     <p>To enable a PDB lockdown profile, you can use the <code class="codeph">ALTER SYSTEM</code> statement to set the <code class="codeph">PDB_LOCKDOWN</code> parameter. You can find information about existing PDB lockdown profiles by connecting to CDB or application root and querying the <code class="codeph">DBA_LOCKDOWN_PROFILES</code> data dictionary view. A local user can find the contents of a PDB lockdown parameter by querying the <code class="codeph">V$LOCKDOWN_RULES</code> dynamic data dictionary view.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs).">Restricting Operations on PDBs Using PDB Lockdown Profiles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D" name="GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D"></a><h4 id="MULTI-GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D" class="sect4"><span class="enumeration_section">18.3.2 </span>Default PDB Lockdown Profiles
                  </h4>
                  <div>
                     <p>Oracle Database provides a set of default PDB lockdown profiles that you can customize for your site requirements.</p>
                     <p>By default, most of these profiles are empty. They are designed to be a placeholder or template for you to configure, depending on your deployment requirements. </p>
                     <p>Detailed information about these profiles is as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">PRIVATE_DBAAS</code> incorporates restrictions that are suitable for private Cloud Database-as-a-Service (DBaaS) deployments. These restrictions are:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Must have the same database administrator for each PDB</p>
                              </li>
                              <li>
                                 <p>Different users permitted to connect to the database </p>
                              </li>
                              <li>
                                 <p>Different applications permitted</p>
                              </li>
                           </ul>
                           <p><code class="codeph">PRIVATE_DBAAS</code> permits users to connect to the PDBs but prevents them from using Oracle Database administrative features.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SAAS</code> incorporates restrictions that are suitable for Software-as-a-Service (SaaS) deployments. These restrictions are:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Must have the same database administrator for each PDB</p>
                              </li>
                              <li>
                                 <p>Different users permitted to connect to the database</p>
                              </li>
                              <li>
                                 <p>Must use the same application</p>
                              </li>
                           </ul>
                           <p>The <code class="codeph">SAAS</code> lockdown profile is more restrictive than the <code class="codeph">PRIVATE_DBAAS</code> profile. Users can be different, but the application code is the same; users are prevented from directly connecting and must connect only through the application; and users are not granted the ability to perform any administrative features. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">PUBLIC_DBAAS</code> incorporates restrictions that are suitable for public Cloud Database-as-a-Service (DBaaS) deployments. The restrictions are as follows:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Different DBAs in each PDB</p>
                              </li>
                              <li>
                                 <p>Different users</p>
                              </li>
                              <li>
                                 <p>Different applications</p>
                              </li>
                           </ul>
                           <p>The <code class="codeph">PUBLIC_DBAAS</code> lockdown profile is the most restrictive of the lockdown profiles. 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs).">Restricting Operations on PDBs Using PDB Lockdown Profiles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70" name="GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70"></a><h4 id="MULTI-GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70" class="sect4"><span class="enumeration_section">18.3.3 </span>Creating a PDB Lockdown Profile
                  </h4>
                  <div>
                     <p>To create a PDB lockdown profile, you must have the <code class="codeph">CREATE LOCKDOWN PROFILE</code> system privilege. 
                     </p>
                     <div class="section">After you create the lockdown profile, you can add restrictions before enabling it.</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the CDB root or the application root as a user who has the <code class="codeph">CREATE LOCKDOWN PROFILE</code> system privilege.</span><div>For example, to connect to the CDB root:<pre class="pre codeblock"><code>CONNECT c##sec_admin
Enter password: <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CREATE LOCKDOWN PROFILE</code> statement to create the profile by using the following syntax: </span><div><pre class="pre codeblock"><code>CREATE LOCKDOWN PROFILE <span class="italic">profile_name</span>
[FROM <span class="italic">static_base_profile</span> | INCLUDING <span class="italic">dynamic_base_profile</span>];</code></pre><p>In this specification:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">profile_name</span></code> is the name that you assign the lockdown profile. You can find existing names by querying the <code class="codeph">PROFILE_NAMES</code> column of the <code class="codeph">DBA_LOCKDOWN_PROFILES</code> data dictionary view. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">FROM <span class="codeinlineitalic">static_base_profile</span></code> creates a new lockdown profile by using the values from an existing profile. Any subsequent changes to the base profile will not affect the new profile.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">INCLUDING <span class="codeinlineitalic">dynamic_base_profile</span></code> also creates a new lockdown profile by using the values from an existing base profile, except that this new lockdown profile will inherit the <code class="codeph">DISABLE STATEMENT</code> rules that comprise the base profile, as well as any subsequent changes to the base profile. If rules that are explicitly added to the new profile conflict with the rules in the base profile, then the rules in the base profile take precedence. For example, an <code class="codeph">OPTION_VALUE</code> clause in the base profile takes precedence over the <code class="codeph">OPTION_VALUE</code> clause in the new profile.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div>The following two PDB lockdown profile statements demonstrate how the inheritance works:<pre class="pre codeblock"><code>CREATE LOCKDOWN PROFILE hr_prof INCLUDING PRIVATE_DBAAS;
CREATE LOCKDOWN PROFILE hr_prof2 FROM hr_prof;</code></pre><p>In the first statement, <code class="codeph">hr_prof</code> inherits any changes made to the <code class="codeph">PRIVATE_DBAAS</code> base profile. If a new statement is enabled for <code class="codeph">PRIVATE_DBAAS</code>, then it is enabled for <code class="codeph">hr_prof</code>. In the second statement, in contrast, when <code class="codeph">hr_prof</code> changes, then <code class="codeph">hr_prof2</code> does <span class="italic">not</span> change because it is independent of its base profile.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">ALTER LOCKDOWN PROFILE</code> statement to provide restrictions for the profile.</span><div>For example:<pre class="pre codeblock"><code>ALTER LOCKDOWN PROFILE hr_prof DISABLE STATEMENT  = ('ALTER SYSTEM');
ALTER LOCKDOWN PROFILE hr_prof ENABLE STATEMENT = ('ALTER SYSTEM') clause = ('flush shared_pool');
ALTER LOCKDOWN PROFILE hr_prof DISABLE FEATURE = ('XDB_PROTOCOLS');</code></pre><p>In the preceding example:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">DISABLE STATEMENT  = ('ALTER SYSTEM')</code> disables the use of all <code class="codeph">ALTER SYSTEM</code> statements for the PDB.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ENABLE STATEMENT = ('ALTER SYSTEM') clause = ('flush shared_pool')</code> enables only the use of the <code class="codeph">FLUSH_SHARED_POOL</code> clause for <code class="codeph">ALTER SYSTEM</code>. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DISABLE FEATURE = ('XDB_PROTOCOLS')</code> prohibits the use of the XDB protocols (FTP, HTTP, HTTPS) by this PDB
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div>After you create a PDB lockdown profile, you are ready to enable it by using the <code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code> SQL statement.
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs).">Restricting Operations on PDBs Using PDB Lockdown Profiles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F" name="GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F"></a><h4 id="MULTI-GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F" class="sect4"><span class="enumeration_section">18.3.4 </span>Enabling or Disabling a PDB Lockdown Profile
                  </h4>
                  <div>
                     <p>To enable or disable a PDB lockdown profile, use the <code class="codeph">PDB_LOCKDOWN</code> initialization parameter
                     </p>
                     <div class="section">
                        <p>You can use <code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code> to enable a lockdown profile in any of the following contexts:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>CDB (affects all PDBs)</p>
                           </li>
                           <li>
                              <p>Application root (affects all application PDBs in the container)</p>
                           </li>
                           <li>
                              <p>Application PDB</p>
                           </li>
                           <li>
                              <p>PDB</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F__GUID-483F47A9-11D8-4AA5-9B14-A98F2D379C69">
                           <p class="notep1">Note:</p>
                           <p>It is not necessary to restart the instance to enable the profile. When the <code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code> statement completes, the profile rules take effect immediately.
                           </p>
                        </div>
                        <p>When you set <code class="codeph">PDB_LOCKDOWN</code> in the CDB root, every PDB and application root inherits this setting unless <code class="codeph">PDB_LOCKDOWN</code> is set at the container level. To disable lockdown profiles, set <code class="codeph">PDB_LOCKDOWN</code> to null. If you set this parameter to null in the CDB root, then lockdown profiles are disabled for all PDBs except those that explicitly set a profile within the PDB.
                        </p>
                        <p>A CDB common user who has been commonly granted the <code class="codeph">SYSDBA</code> administrative privilege or the <code class="codeph">ALTER SYSTEM</code> system privilege can set <code class="codeph">PDB_LOCKDOWN</code> only to a lockdown profile that was created in the CDB root. An application common user with the application common <code class="codeph">SYSDBA</code> administrative privilege or the <code class="codeph">ALTER SYSTEM</code> system privilege can set <code class="codeph">PDB_LOCKDOWN</code> only to a lockdown profile created in an application root.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log in to the desired container as a user who has the commonly granted <code class="codeph">ALTER SYSTEM</code> or commonly granted <code class="codeph">SYSDBA</code> privilege.</span><div>For example, to enable the profile for all PDBs, log in to the CDB root:<pre class="pre codeblock"><code>CONNECT c##sec_admin
Enter password: <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code> statement. </span><div>For example, the following statement enables the lockdown profile named <code class="codeph">hr_prof</code> for all PDBs:<pre class="pre codeblock"><code>ALTER SYSTEM SET PDB_LOCKDOWN = hr_prof;
</code></pre></div>
                           <div>The following statement resets the <code class="codeph">PDB_LOCKDOWN</code> parameter:<pre class="pre codeblock"><code>ALTER SYSTEM RESET PDB_LOCKDOWN;
</code></pre></div>
                           <div>This variation of the preceding statement includes the <code class="codeph">SCOPE</code> clause::<pre class="pre codeblock"><code>ALTER SYSTEM RESET PDB_LOCKDOWN SCOPE = BOTH;
</code></pre></div>
                           <div>The following statement disables all lockdown profiles in the CDB except those that are explicitly set at the PDB level:<pre class="pre codeblock"><code>ALTER SYSTEM SET PDB_LOCKDOWN = '' SCOPE = BOTH;
</code></pre></div>
                           <div>To find the names of PDB lockdown profiles, query the <code class="codeph">PROFILE_NAME</code> column of the <code class="codeph">DBA_LOCKDOWN_PROFILES</code> data dictionary view.
                           </div>
                        </li>
                        <li class="stepexpand"><span>Optionally, review information about the profiles by querying <code class="codeph">DBA_LOCKDOWN_PROFILES</code>.</span><div>For example, run the following query:<pre class="pre codeblock"><code>SET LINESIZE 150
COL PROFILE_NAME FORMAT a20
COL RULE FORMAT a20
COL CLAUSE FORMAT a25

SELECT PROFILE_NAME, RULE, CLAUSE, STATUS FROM CDB_LOCKDOWN_PROFILES;</code></pre></div>
                           <div>
                              <p>Sample output appears below:</p><pre class="pre codeblock"><code>PROFILE_NAME         RULE                 CLAUSE                    STATUS
-------------------- -------------------- ------------------------- -------
HR_PROF              XDB_PROTOCOLS                                  DISABLE
HR_PROF              ALTER SYSTEM                                   DISABLE
HR_PROF              ALTER SYSTEM         FLUSH SHARED_POOL         ENABLE
HR_PROF2                                                            EMPTY
PRIVATE_DBAAS                                                       EMPTY
PUBLIC_DBAAS                                                        EMPTY
SAAS                                                                EMPTY</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs).">Restricting Operations on PDBs Using PDB Lockdown Profiles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B" name="GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B"></a><h4 id="MULTI-GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B" class="sect4"><span class="enumeration_section">18.3.5 </span>Dropping a PDB Lockdown Profile
                  </h4>
                  <div>
                     <p>To drop a PDB lockdown profile, you must have the <code class="codeph">DROP LOCKDOWN PROFILE</code> system privilege and be logged into the CDB or application root.
                     </p>
                     <div class="section">You can find the names of existing PDB lockdown profiles by querying the <code class="codeph">DBA_LOCKDOWN_PROFILES</code> data dictionary view.
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the CDB root or the application root as a user who has the <code class="codeph">DROP LOCKDOWN PROFILE</code> system privilege.</span><div>For example, to connect to the CDB root:<pre class="pre codeblock"><code>CONNECT c##sec_admin
Enter password: <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">DROP LOCKDOWN_PROFILE</code> statement.</span><div>For example:<pre class="oac_no_warn" dir="ltr">DROP LOCKDOWN PROFILE hr_prof2;</pre></div>
                        </li>
                        <li class="stepexpand"><span>Optionally, review the current list of profiles by querying <code class="codeph">DBA_LOCKDOWN_PROFILES</code>.</span><div>For example, run the following query:<pre class="pre codeblock"><code>SET LINESIZE 150
COL PROFILE_NAME FORMAT a20
COL RULE FORMAT a20
COL CLAUSE FORMAT a25

SELECT PROFILE_NAME, RULE, CLAUSE, STATUS FROM CDB_LOCKDOWN_PROFILES;</code></pre></div>
                           <div>
                              <p>Sample output appears below:</p><pre class="pre codeblock"><code>PROFILE_NAME         RULE                 CLAUSE                    STATUS
-------------------- -------------------- ------------------------- -------
HR_PROF              XDB_PROTOCOLS                                  DISABLE
HR_PROF              ALTER SYSTEM                                   DISABLE
HR_PROF              ALTER SYSTEM         FLUSH SHARED_POOL         ENABLE
PRIVATE_DBAAS                                                       EMPTY
PUBLIC_DBAAS                                                        EMPTY
SAAS                                                                EMPTY
</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs).">Restricting Operations on PDBs Using PDB Lockdown Profiles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" name="GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459"></a><h3 id="MULTI-GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" class="sect3"><span class="enumeration_section">18.4 </span>Configuring Operating System Users for a PDB
               </h3>
               <div>
                  <p>The <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> procedure configures user accounts to be operating system users for a PDB. 
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-79F8BC77-3B74-4A29-9C97-6337917F1652">About Configuring Operating System Users for a PDB</a><br>Instead the <code class="codeph">oracle</code> operating system user, you can set a specific user account to be the operating system user for that PDB. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B">Configuring an Operating System User for a PDB</a><br>The <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> procedure can set an operating system user for a PDB.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D">Setting the Default Credential in a PDB</a><br>You can set the database property <code class="codeph">DEFAULT_CREDENTIAL</code> for a specified PDB.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-79F8BC77-3B74-4A29-9C97-6337917F1652" name="GUID-79F8BC77-3B74-4A29-9C97-6337917F1652"></a><h4 id="MULTI-GUID-79F8BC77-3B74-4A29-9C97-6337917F1652" class="sect4"><span class="enumeration_section">18.4.1 </span>About Configuring Operating System Users for a PDB
                  </h4>
                  <div>
                     <p>Instead the <code class="codeph">oracle</code> operating system user, you can set a specific user account to be the operating system user for that PDB. 
                     </p>
                     <p>If you do not set a specific user to be the operating system user for the PDB, then by default the PDB uses the <code class="codeph">oracle</code> operating system user. For the root, you can use the <code class="codeph">oracle</code> operating system user when you must interact with the operating system. 
                     </p>
                     <p>For better security, Oracle recommends that you set a unique operating system user for each PDB in a multitenant environment. Doing so helps to ensure that operating system interactions are performed as a less powerful user than the <code class="codeph">oracle</code> operating system user, and helps to protect data that belongs to one PDB from being accessed by users who are connected to other PDBs.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" title="The DBMS_CREDENTIAL.CREATE_CREDENTIAL procedure configures user accounts to be operating system users for a PDB.">Configuring Operating System Users for a PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B" name="GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B"></a><h4 id="MULTI-GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B" class="sect4"><span class="enumeration_section">18.4.2 </span>Configuring an Operating System User for a PDB
                  </h4>
                  <div>
                     <p>The <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> procedure can set an operating system user for a PDB.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the database instance root as a user who has the <code class="codeph">EXECUTE</code> privilege for the <code class="codeph">DBMS_CREDENTIAL</code> PL/SQL package and the <code class="codeph">ALTER SYSTEM</code> system privilege.</span><div>For example:<pre class="pre codeblock"><code>sqlplus c##sec_admin
Enter password: <span class="italic">password</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> procedure to create an Oracle credential for the operating system user.</span><div>For example, to set the credential for a user named <code class="codeph">os_admin</code>: <pre class="pre codeblock"><code>BEGIN 
 DBMS_CREDENTIAL.CREATE_CREDENTIAL (
    credential_name =&gt; 'PDB1_OS_USER',
    username        =&gt; 'os_admin',
    password        =&gt; '<span class="italic">password</span>');
END;
/
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect to the PDB for which the operating system user will be used.</span><div>For example:<pre class="pre codeblock"><code>CONNECT cc##sec_admin@hrpdb
Enter password: <span class="italic">password</span>
</code></pre><p>To find the available PDBs, run the <code class="codeph">show pdbs</code> command. To check the current PDB, run the show <code class="codeph">con_name</code> command. 
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Set the <code class="codeph">PDB_OS_CREDENTIAL</code> initialization parameter for the user whose credential was set in Step 2. </span><div>For example:<pre class="pre codeblock"><code>ALTER SYSTEM SET PDB_OS_CREDENTIAL = PDB1_OS_USER SCOPE = SPFILE;</code></pre><p>The <code class="codeph">PDB_OS_CREDENTIAL</code> parameter is a static parameter, so you must set it using the <code class="codeph">SCOPE = SPFILE</code> clause. 
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Restart the database instance.</span><div><pre class="pre codeblock"><code>SHUTDOWN IMMEDIATE
STARTUP</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-authentication.html#DBSEG-GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                           <li><a href="../refrn/PDB_OS_CREDENTIAL.html#REFRN-GUID-E563FDDA-6840-42CC-944D-5B0FD60C9003" target="_blank"><span><cite>Oracle Database Reference</cite></span></a></li>
                           <li><a href="../arpls/DBMS_CREDENTIAL.html#ARPLS-GUID-D5791B72-E0F6-4C41-AD3E-DDEDFFCA7D0C" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></li>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D" title="You can set the database property DEFAULT_CREDENTIAL for a specified PDB.">Setting the Default Credential in a PDB</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" title="The DBMS_CREDENTIAL.CREATE_CREDENTIAL procedure configures user accounts to be operating system users for a PDB.">Configuring Operating System Users for a PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D" name="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D"></a><h4 id="MULTI-GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D" class="sect4"><span class="enumeration_section">18.4.3 </span>Setting the Default Credential in a PDB
                  </h4>
                  <div>
                     <p>You can set the database property <code class="codeph">DEFAULT_CREDENTIAL</code> for a specified PDB.
                     </p>
                     <div class="section">
                        <p>A default credential is useful when importing files from an object store into a PDB. If you do not specify a credential name when using <code class="codeph">impdp</code>, then Oracle Data Pump and the object store module can use the <code class="codeph">DEFAULT_CREDENTIAL</code> object to retrieve the user name and password. When running <code class="codeph">impdp</code> without specifying a credential, you must prefix the dump file name with <code class="codeph">DEFAULT_CREDENTIAL:</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D__GUID-C96AC8C8-4190-4540-84CF-5361EE8D35CE">To set the default credential:</p>
                        <ol>
                           <li>
                              <p>Log in to a PDB with administrator privileges.</p>
                           </li>
                           <li>
                              <p>Use an <code class="codeph">ALTER DATABASE</code> statement to set the default credential.
                              </p>
                              <p>For example, enter the following statement to set the credential to <code class="codeph">SYSTEM.HR_CRED</code>.
                              </p><pre class="pre codeblock"><code>ALTER DATABASE PROPERTY SET DEFAULT_CREDENTIAL = 'SYSTEM.HR_CRED';</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D__GUID-A5DA945E-7F7D-46C8-BFB4-BA6F5E28C352">
                        <p class="titleinexample">Example 18-3 Importing Data into a PDB Using the Default Credential</p>
                        <p>This example assumes that a default credential exists. The following command imports data from an object store , prefacing the URL with the string <code class="codeph">DEFAULT_CREDENTIAL</code>:
                        </p><pre class="pre codeblock"><code>impdp hr@pdb1 table_exists_action=replace dumpfile=DEFAULT_CREDENTIAL:https://example.com/ostore/obucket/myt.dmp</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D__GUID-E6FE01B3-80DA-4A0F-9740-A6B1EA71089B">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="using-database-utilities-in-a-cdb.html#GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71" title="After you create an empty PDB, you can use an Oracle Data Pump full-mode export and import operation to move data into the PDB.">Using Data Pump to Move Data Into a CDB</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sutil/datapump-import-utility.html#GUID-D11E340E-14C6-43B8-AB09-6335F0C1F71B" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> to learn about Data Pump Import
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" title="The DBMS_CREDENTIAL.CREATE_CREDENTIAL procedure configures user accounts to be operating system users for a PDB.">Configuring Operating System Users for a PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" name="GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE"></a><h3 id="MULTI-GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" class="sect3"><span class="enumeration_section">18.5 </span>Using Application Contexts in a Multitenant Environment
               </h3>
               <p>An application context stores user identification that can enable or prevent a user from accessing data in the database.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-5841261E-988F-4A56-A2B4-71114AB3D51D">What Is an Application Context?</a><br>An <strong class="term">application context</strong> is a set of name-value pairs that Oracle Database stores in memory. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-60DBA142-691E-4710-B8F2-2522E5B37745">Application Contexts in a Multitenant Environment</a><br>Where you create an application in a multitenant environment determines where you must create the application context. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-5841261E-988F-4A56-A2B4-71114AB3D51D" name="GUID-5841261E-988F-4A56-A2B4-71114AB3D51D"></a><h4 id="MULTI-GUID-5841261E-988F-4A56-A2B4-71114AB3D51D" class="sect4"><span class="enumeration_section">18.5.1 </span>What Is an Application Context?
                  </h4>
                  <div>
                     <p>An <strong class="term">application context</strong> is a set of name-value pairs that Oracle Database stores in memory. 
                     </p>
                     <p>The context has a label called a <strong class="term">namespace</strong> (for example, <code class="codeph">empno_ctx</code> for an application context that retrieves employee IDs). This context enables Oracle Database to find information about both database and nondatabase users during authentication.
                     </p>
                     <p>Inside the context are the name-value pairs (an associative array): the name points to a location in memory that holds the value. An application can use the application context to access session information about a user, such as the user ID or other user-specific information, or a client ID, and then securely pass this data to the database. </p>
                     <p>You can then use this information to either permit or prevent the user from accessing data through the application. You can use application contexts to authenticate both database and non-database users.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/using-application-contexts-to-retrieve-user-information.html#DBSEG-GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" title="An application context stores user identification that can enable or prevent a user from accessing data in the database.">Using Application Contexts in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-60DBA142-691E-4710-B8F2-2522E5B37745" name="GUID-60DBA142-691E-4710-B8F2-2522E5B37745"></a><h4 id="MULTI-GUID-60DBA142-691E-4710-B8F2-2522E5B37745" class="sect4"><span class="enumeration_section">18.5.2 </span>Application Contexts in a Multitenant Environment
                  </h4>
                  <div>
                     <p>Where you create an application in a multitenant environment determines where you must create the application context. </p>
                     <p>If an application is installed in the application root or CDB root, then it becomes accessible across the application container or system container and associated application PDBs. You will need to create a common application context in this root. </p>
                     <p>When you create a common application context for use with an application container, note the following: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You can create application contexts in a multitenant environment by setting the <code class="codeph">CONTAINER</code> clause in the <code class="codeph">CREATE CONTEXT</code> SQL statement. For example, to create a common application context in the application root, you must execute <code class="codeph">CREATE CONTEXT</code> with <code class="codeph">CONTAINER</code> set to <code class="codeph">ALL</code>. To create the application context in a PDB, set <code class="codeph">CONTAINER</code> to <code class="codeph">CURRENT</code>.
                           </p>
                        </li>
                        <li>
                           <p>You cannot use the same name for a local application context for a common application context. You can find the names of existing application contexts by running the following query: </p><pre class="pre codeblock"><code>SELECT OBJECT_NAME FROM DBA_OBJECTS WHERE OBJECT_TYPE ='CONTEXT';</code></pre></li>
                        <li>
                           <p>The PL/SQL package that you create to manage a common application context must be a common PL/SQL package. That is, it must exist in the application root or CDB root. If you create the application context for a specific PDB, then you must store the associated PL/SQL package in that PDB. </p>
                        </li>
                        <li>
                           <p>The name-value pairs that you set under a common session application context from an application container or a system container for a common application context are not accessible from other application containers or system containers when a common user accesses a different container.</p>
                        </li>
                        <li>
                           <p>The name-value pairs that you set under a common global application context from an application container or a system container, are accessible only within the same container in the same user session. </p>
                        </li>
                        <li>
                           <p>An application can retrieve the value of an application context whether it resides in the application root, the CDB root, or a PDB.</p>
                        </li>
                        <li>
                           <p>During a plug-in operation of a PDB into a CDB or an application container, if the name of the common application context conflicts with a PDB’s local application context, then the PDB must open in restricted mode. A database administrator would then need to correct the conflict before opening the PDB in normal mode. </p>
                        </li>
                        <li>
                           <p>During an unplug operation, a common application context retains its common semantics, so that later on, if the PDB is plugged into another CDB where a common application context with the same name exists, it would continue to behave like a common object. If a PDB is plugged into an application container or a system container, where the same common application context does not exist, then it behaves like a local object. </p>
                        </li>
                     </ul>
                     <p>To find if an application context is a local application context or an application common application context, query the <code class="codeph">SCOPE</code> column of the <code class="codeph">DBA_CONTEXT</code> or <code class="codeph">ALL_CONTEXT</code> data dictionary view.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/using-application-contexts-to-retrieve-user-information.html#DBSEG-GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" title="An application context stores user identification that can enable or prevent a user from accessing data in the database.">Using Application Contexts in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" name="GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22"></a><h3 id="MULTI-GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" class="sect3"><span class="enumeration_section">18.6 </span>Using Oracle Virtual Private Database in a Multitenant Environment
               </h3>
               <div>
                  <p>Oracle Virtual Private Database (VPD) enables you to filter users who access data.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE">What Is Oracle Virtual Private Database?</a><br>Oracle Virtual Private Database (VPD) creates security policies to control database access at the row and column level. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5">Oracle Virtual Private Database in a Multitenant Environment</a><br> <span>You can create Virtual Private Database policies in an application root for use throughout any associated application PDBs.</span></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE" name="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE"></a><h4 id="MULTI-GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE" class="sect4"><span class="enumeration_section">18.6.1 </span>What Is Oracle Virtual Private Database?
                  </h4>
                  <div>
                     <p>Oracle Virtual Private Database (VPD) creates security policies to control database access at the row and column level. </p>
                     <div class="infoboxnote" id="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE__GUID-CC44D99A-1031-411E-B725-04DC6A003550">
                        <p class="notep1">Note:</p>
                        <p>Oracle Database release 12c introduced Real Application Security (RAS) to supersede VPD. Oracle recommends that you use RAS for new projects that require row and column level access controls for their applications.</p>
                     </div>
                     <p>Essentially, Oracle Virtual Private Database adds a dynamic <code class="codeph">WHERE</code> clause to a SQL statement that is issued against the table, view, or synonym to which an Oracle Virtual Private Database security policy was applied. 
                     </p>
                     <p>Oracle Virtual Private Database enforces security, to a fine level of granularity, directly on database tables, views, or synonyms. Because you attach security policies directly to these database objects, and the policies are automatically applied whenever a user accesses data, there is no way to bypass security.</p>
                     <p>When a user directly or indirectly accesses a table, view, or synonym that is protected with an Oracle Virtual Private Database policy, Oracle Database dynamically modifies the SQL statement of the user. This modification creates a <code class="codeph">WHERE</code> condition (called a predicate) returned by a function implementing the security policy. Oracle Database modifies the statement dynamically, transparently to the user, using any condition that can be expressed in or returned by a function. You can apply Oracle Virtual Private Database policies to <code class="codeph">SELECT</code>, <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">INDEX</code>, and <code class="codeph">DELETE</code> statements.
                     </p>
                     <p>For example, suppose a user performs the following query: </p><pre class="pre codeblock"><code>SELECT * FROM OE.ORDERS;
</code></pre><p>The Oracle Virtual Private Database policy dynamically appends the statement with a <code class="codeph">WHERE</code> clause. For example:
                     </p><pre class="pre codeblock"><code>SELECT * FROM OE.ORDERS 
 WHERE SALES_REP_ID = 159;
</code></pre><p>In this example, the user can only view orders by Sales Representative 159. </p>
                     <p>If you want to filter the user based on the session information of that user, such as the ID of the user, then you can create the <code class="codeph">WHERE</code> clause to use an application context. For example:
                     </p><pre class="pre codeblock"><code>SELECT * FROM OE.ORDERS 
 WHERE SALES_REP_ID = SYS_CONTEXT('USERENV','SESSION_USER'); </code></pre><div class="infoboxnote" id="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE__GUID-6C59F3CD-71C6-4728-AA45-A01CE1527BEE">
                        <p class="notep1">Note:</p>
                        <p>Oracle Virtual Private Database does not support filtering for DDLs, such as <code class="codeph">TRUNCATE</code> or <code class="codeph">ALTER TABLE</code> statements.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbfsg/indroducing-oracle-database-real-application-security.html#DBFSG-GUID-4CA063EE-9405-439A-AAA1-5919E3C1470B" target="_blank"><span><cite>Oracle Database Real Application Security Administrator's and Developer's Guide</cite></span></a></li>
                           <li><a href="../dbseg/using-oracle-vpd-to-control-data-access.html#DBSEG-GUID-06022729-9210-4895-BF04-6177713C65A7" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" title="Oracle Virtual Private Database (VPD) enables you to filter users who access data.">Using Oracle Virtual Private Database in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5" name="GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5"></a><h4 id="MULTI-GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5" class="sect4"><span class="enumeration_section">18.6.2 </span>Oracle Virtual Private Database in a Multitenant Environment
                  </h4>
                  <div>
                     <p> <span>You can create Virtual Private Database policies in an application root for use throughout any associated application PDBs.</span></p>
                     <p>The CDB restriction applies to shared context sensitive policies and views related to Virtual Private Database policies as well. You cannot create a Virtual Private Database policy for an entire multitenant environment.</p>
                     <p> With regard to application containers, you can create Virtual Private Database policies to protect application common objects by applying the common policy to all PDBs that belong to the application root. In other words, when you install an application in the application root, all the common Virtual Private Database policies that protect the common objects will be applied to and immediately enforced for all PDBs in the application container.</p>
                     <p>Note the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You can only create the common Virtual Private Database policy and its associated PL/SQL function in the application root and only attach it to application common objects. If the function is not in the same location as the policy, then an error is raised at runtime.</p>
                        </li>
                        <li>
                           <p>A Virtual Private Database policy that is applied to common objects is considered a common policy that will be automatically enforced in PDBs that belong to the application container when it accesses the application common objects from application PDBs.</p>
                        </li>
                        <li>
                           <p>Application common Virtual Private Database policies can only protect application common objects.</p>
                        </li>
                        <li>
                           <p>A Virtual Private Database policy that is applied to application common objects in the application root and is applied to all application PDBs is considered a common Virtual Private Database policy. A policy that is applied to a local database table and enforced in one PDB is considered a local Virtual Private Database policy. </p>
                           <p>For example, if policy <code class="codeph">VPD_P1</code> is applied to the application common table <code class="codeph">T1</code> in the application root, then it is a considered to be a common policy. It will be enforced in each application PDB. If a policy named <code class="codeph">VPD_P1</code> is applied to a local table called <code class="codeph">T1</code> in <code class="codeph">PDB1</code>, then it is considered a local policy, which means that it affects only <code class="codeph">PDB1</code>. If a policy called <code class="codeph">VPD_P1</code> is applied to a local table <code class="codeph">T1</code> in the application root, then it is still considered a local policy because it affects only the application root. This concept applies to other operations, such as enabling, disabling, and removing Virtual Private Database policies. 
                           </p>
                        </li>
                        <li>
                           <p>Application common Virtual Private Database policies only protect application common objects, while local Virtual Private Database policies only protect local objects. </p>
                        </li>
                        <li>
                           <p>If you are using application contexts, then ensure common database session-based application contexts and common global application context objects are used in the common Virtual Private Database configuration. </p>
                        </li>
                        <li>
                           <p>Application container Virtual Private Database policies are stored in the application root. PDBs store only local policies. If you plug a PDB into the application container, then the common policies are not converted to local policies. Instead, Oracle Database loads them from the application root and enforces them in the local PDB when the policies access common objects in the local PDB.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/using-oracle-vpd-to-control-data-access.html#DBSEG-GUID-06022729-9210-4895-BF04-6177713C65A7" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" title="Oracle Virtual Private Database (VPD) enables you to filter users who access data.">Using Oracle Virtual Private Database in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E" name="GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E"></a><h3 id="MULTI-GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E" class="sect3"><span class="enumeration_section">18.7 </span>Using Transport Layer Security in a Multitenant Environment
               </h3>
               <div>
                  <p>Transport Layer Security (TLS) can be used in a multitenant environment for application containers.</p>
                  <div class="section">If you want to use Transport Layer Security (TLS) in a multitenant environment for an application container, then you must ensure that each PDB is able to use its own wallet with its own certificates for TLS authentication.</div>
                  <!-- class="section" -->
                  <ul>
                     <li class="stepexpand"><span>Because there is no individual <code class="codeph">sqlnet.ora</code> file for each PDB, place the wallet in a subdirectory of the <code class="codeph">wallet</code> directory where the name of the subdirectory is the GUID of the PDB that uses the wallet.</span><div>For example, suppose the <code class="codeph">WALLET_LOCATION</code> parameter in <code class="codeph">sqlnet.ora</code> is set as follows:<pre class="pre codeblock"><code>(SOURCE=(METHOD=FILE)(METHOD_DATA=
   (DIRECTORY=/home/oracle/wallet)))</code></pre><p>Place each PDB’s wallet in the <code class="codeph">/home/oracle/wallet</code> directory. You can find the existing PDBs and their GUIDs by querying the <code class="codeph">DBA_PDBS</code> data dictionary view.
                           </p>
                           <p>If the <code class="codeph">WALLET_LOCATION</code> parameter is not specified, then you must place the PDB wallet in a subdirectory of the default wallet path where the name of the subdirectory is the GUID of the PDB. For example:
                           </p><pre class="pre codeblock"><code>$ORACLE_BASE/admin/<span class="italic">db_unique_name</span>/wallet/<span class="italic">PDB_GUID</span></code></pre><p>Or if the <code class="codeph">ORACLE_BASE</code> environment variable is not set, then you can use the Oracle home:
                           </p><pre class="pre codeblock"><code>$ORACLE_HOME/admin/<span class="italic">db_unique_name</span>/wallet/<span class="italic">PDB_GUID</span></code></pre><p>These default locations correspond to the default that is used by Oracle Enterprise User Security to locate wallets for authentication to LDAP.</p>
                        </div>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../dbseg/configuring-secure-sockets-layer-authentication.html#DBSEG-GUID-6AD89576-526F-4D6B-A539-ADF4B840819F" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-52FA95B1-8823-43F9-9D96-8F801BF16178" name="GUID-52FA95B1-8823-43F9-9D96-8F801BF16178"></a><h3 id="MULTI-GUID-52FA95B1-8823-43F9-9D96-8F801BF16178" class="sect3"><span class="enumeration_section">18.8 </span>Oracle Data Redaction in a Multitenant Environment
               </h3>
               <div>
                  <p>In a multitenant environment, Oracle Data Redaction policies apply only to the objects within the current pluggable database (PDB). </p>
                  <p>You cannot create a Data Redaction policy for a multitenant container database (CDB). This is because the objects for which you create Data Redaction policies typically reside in a PDB. If you have the <code class="codeph">SYSDBA</code> privilege, then you can list all the PDBs in a CDB by running the <code class="codeph">SHOW PDBS</code> command.
                  </p>
                  <p>As with the CDB root, you cannot create Data Redaction policies in an application root. </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-F4AE4724-5E1F-478C-BF40-999E21189890" name="GUID-F4AE4724-5E1F-478C-BF40-999E21189890"></a><h3 id="MULTI-GUID-F4AE4724-5E1F-478C-BF40-999E21189890" class="sect3"><span class="enumeration_section">18.9 </span>Auditing in a Multitenant Environment
               </h3>
               <div>
                  <p>Auditing tracks changes that users make in the multitenant container database (CDB).</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-562D382F-356F-46FE-B061-CF5E589CCEB8">About Auditing in a Multitenant Environment</a><br>You can use unified auditing in a multitenant environment.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-335779FD-3DF8-4CBD-AC29-A02389749F93">Example: Auditing the DBA Role in a Multitenant Environment</a><br>The <code class="codeph">CREATE AUDIT POLICY</code> statement can audit roles in a multitenant environment.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a><br>In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-6F15B297-08C6-4904-938D-3DAA429E14B0">Fine-Grained Auditing in a Multitenant Environment</a><br><span>You can create fine-grained audit policies in the CDB root, application root, CDB PDBs, and application PDBs.</span></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-562D382F-356F-46FE-B061-CF5E589CCEB8" name="GUID-562D382F-356F-46FE-B061-CF5E589CCEB8"></a><h4 id="MULTI-GUID-562D382F-356F-46FE-B061-CF5E589CCEB8" class="sect4"><span class="enumeration_section">18.9.1 </span>About Auditing in a Multitenant Environment
                  </h4>
                  <div>
                     <p>You can use unified auditing in a multitenant environment.</p>
                     <p>You can apply audit settings to individual PDBs or to the CDB, depending on the type of policy. In a multitenant environment, each PDB, including the root, has own unified audit trail.</p>
                     <p>See the following sections for more information:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Unified audit policies created with the CREATE AUDIT POLICY and AUDIT statements:</span> You can create policies for both the root and individual PDBs. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Fine-grained audit policies:</span> You can create policies for individual PDBs only, not the root. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Purging the audit trail:</span> You can perform purge operations for both the root and individual PDBs. 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/introduction-to-auditing.html#DBSEG-GUID-94381464-53A3-421B-8F13-BD171C867405" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="Auditing tracks changes that users make in the multitenant container database (CDB).">Auditing in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-335779FD-3DF8-4CBD-AC29-A02389749F93" name="GUID-335779FD-3DF8-4CBD-AC29-A02389749F93"></a><h4 id="MULTI-GUID-335779FD-3DF8-4CBD-AC29-A02389749F93" class="sect4"><span class="enumeration_section">18.9.2 </span>Example: Auditing the DBA Role in a Multitenant Environment
                  </h4>
                  <div>
                     <p>The <code class="codeph">CREATE AUDIT POLICY</code> statement can audit roles in a multitenant environment.
                     </p>
                     <p>The following example shows how to audit a predefined common role <code class="codeph">DBA</code> in a multitenant environment.
                     </p>
                     <div class="example" id="GUID-335779FD-3DF8-4CBD-AC29-A02389749F93__CHDFEBFF">
                        <p class="titleinexample">Example 18-4 Auditing the DBA Role in a Multitenant Environment</p><pre class="pre codeblock"><code>CREATE AUDIT POLICY role_dba_audit_pol 
 ROLES DBA
 CONTAINER = ALL;

AUDIT POLICY role_dba_audit_pol;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="Auditing tracks changes that users make in the multitenant container database (CDB).">Auditing in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" name="GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB"></a><h4 id="MULTI-GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" class="sect4"><span class="enumeration_section">18.9.3 </span>Unified Audit Policies or AUDIT Settings in a Multitenant Environment
                  </h4>
                  <div>
                     <p>In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF">About Local, CDB Common, and Application Common Audit Policies</a><br><span>An audit policy can be either a local audit policy, a CDB common audit policy, or an application common audit policy.</span> 
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-BFCF47B5-4A96-4984-A07E-F210DD625590">Traditional Auditing in a Multitenant Environment</a><br>In traditional auditing (not unified auditing), the <code class="codeph">AUDIT</code> and <code class="codeph">NOAUDIT</code> statements can audit statements and privileges in a multitenant environment.
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F">Configuring a Local Unified Audit Policy or Common Unified Audit Policy</a><br>The <code class="codeph">CONTAINER</code> clause is specific to multitenant environment use for the <code class="codeph">CREATE AUDIT POLICY</code> statement. 
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-92AAA230-841F-4214-940E-C7C47AB0CA39">Example: Local Unified Audit Policy</a><br>The <span class="apiname" translate="no">CREATE AUDIT POLICY</span> statement can create a local unified audit policy in either the root or a PDB.
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0">Example: CDB Common Unified Audit Policy</a><br>The <span class="apiname" translate="no">CREATE AUDIT POLICY</span> statement can create a CDB common unified audit policy.
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C">Example: Application Common Unified Audit Policy</a><br>For application container common unified audit policies, you can audit action options and system privilege options, and refer to common objects and roles. 
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E">How Local or Common Audit Policies or Settings Appear in the Audit Trail</a><br>You can query unified audit policy views from either the root or the PDB in which the action occurred.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="Auditing tracks changes that users make in the multitenant container database (CDB).">Auditing in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF" name="GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF"></a><h5 id="MULTI-GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF" class="sect5"><span class="enumeration_section">18.9.3.1 </span><span>About Local, CDB Common, and Application Common Audit Policies</span></h5>
                     <div>
                        <p><span>An audit policy can be either a local audit policy, a CDB common audit policy, or an application common audit policy.</span> 
                        </p>
                        <p>This applies to both unified audit policies and policies that are created using the <code class="codeph">AUDIT</code> SQL statement.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Local audit policy.</span> This type of policy can exist in either the root (CDB or application) or the PDB (CDB or application). A local audit policy that exists in the root can contain object audit options for both local and common objects. Both local and common users who have been granted the <code class="codeph">AUDIT_ADMIN</code> role can enable local policies: local users from their PDBs and common users from the root or the PDB to which they have privileges. You can enable a local audit policy for both local and common users and roles. 
                              </p>
                              <p>You can create local audit policies for application local objects and application local roles, as well as system action options and system privilege options. You cannot enforce a local audit policy for a common user across all containers, nor can you enforce a common audit policy for a local user.</p>
                           </li>
                           <li>
                              <p><span class="bold">CDB common audit policy.</span> This type of policy is available to all PDBs in the multitenant environment. Only common users who have been granted the <code class="codeph">AUDIT_ADMIN</code> role can create and maintain common audit policies. You can enable common audit policies only for common users. You must create common audit policies only in the root. This type of policy can contain object audit options of only common objects, and be enabled only for common users. You can enable a common audit policy for common users and roles only. 
                              </p>
                              <p>You cannot enforce a common audit policy for a local user across all containers.</p>
                           </li>
                           <li>
                              <p><span class="bold">Application common audit policy.</span> Similar to CDB common audit policies, this type of policy is available to all PDBs in the multitenant environment. You can create common audit policies for application common objects and application common roles, as well as system action options and system privilege options. You can only create this type of policy in the application root container, but you can enable it on both application common users and CDB common users. If you want to audit objects, then ensure that these objects are application common objects. You can determine whether an object is an application common object by querying the <code class="codeph">SHARING</code> column of the <code class="codeph">DBA_OBJECTS</code> data dictionary view. 
                              </p>
                           </li>
                        </ul>
                        <p>By default, audit policies are local to the current PDB, for both CDB and application scenarios. </p>
                        <p>The following table explains how audit policies apply in different multitenant environments.</p>
                        <div class="tblformal" id="GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF__HOWAUDITPOLICIESAPPLYTOTHECDBROOTAP-FE335581">
                           <p class="titleintable">Table 18-1 How Audit Policies Apply to the CDB Root, Application Root, and Individual PDBs </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="How Audit Policies Apply to the CDB Root, Application Root, and Individual PDBs " summary="This table shows how audit policies apply to the CDB root, application root, and individual PDBs. Columns are from left to right Audit Option Type, CDB Root, Application Root, and Individual PDB." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d87660e6641">Audit Option Type</th>
                                    <th align="left" valign="bottom" id="d87660e6643">CDB Root</th>
                                    <th align="left" valign="bottom" id="d87660e6645">Application Root</th>
                                    <th align="left" valign="bottom" id="d87660e6647">Individual PDB</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d87660e6651" headers="d87660e6641 ">
                                       <p>Common audit statement or audit policy</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6651 d87660e6643 ">
                                       <p>Applies to CDB common users</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6651 d87660e6645 ">
                                       <p>Applies to CDB common users</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6651 d87660e6647 ">
                                       <p>Applies to CDB common users</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d87660e6664" headers="d87660e6641 ">
                                       <p>Application container common audit statement or audit policy</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6664 d87660e6643 ">
                                       <p>Not applicable</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6664 d87660e6645 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Applies to CDB common users and are valid for the current application container only</p>
                                          </li>
                                          <li>
                                             <p>Applies to application container common users</p>
                                          </li>
                                       </ul>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6664 d87660e6647 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Applies to CDB common users and are valid for this application container only</p>
                                          </li>
                                          <li>
                                             <p>Applies to application common users</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d87660e6687" headers="d87660e6641 ">
                                       <p>Local audit statement or audit policy</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6687 d87660e6643 ">
                                       <p>Local configurations not allowed</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6687 d87660e6645 ">
                                       <p>Local configurations not allowed</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6687 d87660e6647 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Applies to CDB common users</p>
                                          </li>
                                          <li>
                                             <p>Applies to application common users</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-BFCF47B5-4A96-4984-A07E-F210DD625590" name="GUID-BFCF47B5-4A96-4984-A07E-F210DD625590"></a><h5 id="MULTI-GUID-BFCF47B5-4A96-4984-A07E-F210DD625590" class="sect5"><span class="enumeration_section">18.9.3.2 </span>Traditional Auditing in a Multitenant Environment
                     </h5>
                     <div>
                        <p>In traditional auditing (not unified auditing), the <code class="codeph">AUDIT</code> and <code class="codeph">NOAUDIT</code> statements can audit statements and privileges in a multitenant environment.
                        </p>
                        <p>To configure the audit policy to be either a local audit policy or a common audit policy, you must include the <code class="codeph">CONTAINER</code> clause, as you normally do for other SQL creation or modification statements. If you want to audit an application container, then you can audit SQL statement and system privileges performed by local and common users and roles. The audit record will be created in the container in which the action was performed.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If you want to apply the <code class="codeph">AUDIT</code> or <code class="codeph">NOAUDIT</code> statement to the current CDB or application PDB, then in this PDB, you must set <code class="codeph">CONTAINER</code> to <code class="codeph">CURRENT</code>. For example:
                              </p><pre class="pre codeblock"><code>AUDIT DROP ANY TABLE BY SYSTEM BY ACCESS CONTAINER = CURRENT;</code></pre></li>
                           <li>
                              <p><span>If you want to apply the <code class="codeph">AUDIT</code> or <code class="codeph">NOAUDIT</code> statement to the entire multitenant environment, then in the CDB root, then you must set <code class="codeph">CONTAINER</code> to <code class="codeph">ALL</code>. For an application container, you would set it in the application root. For example: </span></p><pre class="pre codeblock"><code>AUDIT DROP ANY TABLE BY SYSTEM BY ACCESS CONTAINER = ALL;</code></pre></li>
                        </ul>
                        <p>To find if a traditional audit option is designed for use in an application container, perform a join query with the <code class="codeph">DBA_OBJ_AUDIT_OPTS</code> and <code class="codeph">DBA_OBJECTS</code> data dictionary views, by using the <code class="codeph">OWNER</code> and <code class="codeph">OBJECT_NAME</code> columns in both views, and the <code class="codeph">APPLICATION</code> column in <code class="codeph">DBA_OBJECTS</code>.
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../sqlrf/AUDIT-Traditional-Auditing.html#SQLRF-GUID-ADF45B07-547A-4096-8144-50241FA2D8DD" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-BFCF47B5-4A96-4984-A07E-F210DD625590__GUID-E65E8AEE-C77D-41EC-A5E0-144B6C44090D">
                           <p class="notep1">See Also:</p>
                           <p><span><cite>Oracle Database SQL Language Reference</cite></span> for more information about the traditional <a href="../sqlrf/AUDIT-Traditional-Auditing.html#SQLRF01107" target="_blank"><code class="codeph">AUDIT</code></a> and <a href="../sqlrf/NOAUDIT-Traditional-Auditing.html#SQLRF01607" target="_blank"><code class="codeph">NOAUDIT</code></a> SQL statements
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F" name="GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F"></a><h5 id="MULTI-GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F" class="sect5"><span class="enumeration_section">18.9.3.3 </span>Configuring a Local Unified Audit Policy or Common Unified Audit Policy
                     </h5>
                     <div>
                        <p>The <code class="codeph">CONTAINER</code> clause is specific to multitenant environment use for the <code class="codeph">CREATE AUDIT POLICY</code> statement. 
                        </p>
                        <div class="section">To create a local or common<span> (CDB or application)</span> unified audit policy in either the CDB environment or an application container environment, include the <code class="codeph">CONTAINER</code> clause in the <code class="codeph">CREATE AUDIT POLICY</code> statement. 
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the following syntax to create a local or common unified audit policy: </p><pre class="pre codeblock"><code>CREATE AUDIT POLICY policy_name
 <span class="italic">action1</span> [,<span class="italic">action2</span> ]
 [CONTAINER = {CURRENT | ALL}];
</code></pre></li>
                           </ul>
                           <p>In this specification:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">CURRENT</code> sets the audit policy to be local to the current PDB.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">ALL</code> makes the audit policy a common audit policy, that is, available to the entire multitenant environment.
                                 </p>
                              </li>
                           </ul>
                           <p>For example, for a common unified audit policy: </p><pre class="pre codeblock"><code>CREATE AUDIT POLICY dict_updates 
 ACTIONS UPDATE ON SYS.USER$, 
  DELETE ON SYS.USER$, 
  UPDATE ON SYS.LINK$, 
  DELETE ON SYS.LINK$ 
  CONTAINER = ALL;
</code></pre><p>Note the following: </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You can set the <code class="codeph">CONTAINER</code> clause for the <code class="codeph">CREATE AUDIT POLICY</code> statement but not for <code class="codeph">ALTER AUDIT POLICY</code> or <code class="codeph">DROP AUDIT POLICY</code>. If you want to change the scope of an existing unified audit policy to use this setting, then you must drop and re-create the policy.
                                 </p>
                              </li>
                              <li>
                                 <p>For <code class="codeph">AUDIT</code> statements, you can set the <code class="codeph">CONTAINER</code> clause for audit settings only if you have an Oracle database that has not been migrated to the Release 12.<span class="italic">x</span> audit features. You cannot use the <code class="codeph">CONTAINER</code> clause in an <code class="codeph">AUDIT</code> statement that is used to enable a unified audit policy. 
                                 </p>
                              </li>
                              <li>
                                 <p>If you are in a PDB, then you can only set the <code class="codeph">CONTAINER</code> clause to <code class="codeph">CURRENT</code>, not <code class="codeph">ALL</code>. If you omit the setting while in the PDB, then the default is <code class="codeph">CONTAINER = CURRENT</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>If you are in the root, then you can set the <code class="codeph">CONTAINER</code> clause to either <code class="codeph">CURRENT</code> if you want the policy to apply to the root only, or to <code class="codeph">ALL</code> if you want the policy to apply to the entire CDB. If you omit the <code class="codeph">CONTAINER</code> clause, then default is <code class="codeph">CONTAINER = CURRENT</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>For objects:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Common audit policies can have common objects only and local audit policies can have both local objects and common objects.</p>
                                    </li>
                                    <li>
                                       <p>You cannot set <code class="codeph">CONTAINER</code> to <code class="codeph">ALL</code> if the objects involved are local. They must be common objects. 
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>For privileges:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>You can set the <code class="codeph">CONTAINER</code> to <code class="codeph">CURRENT</code> (or omit the <code class="codeph">CONTAINER</code> clause) if the user accounts involved are a mixture of local and common accounts. This creates a local audit configuration that applies only to the current PDB.
                                       </p>
                                    </li>
                                    <li>
                                       <p>You cannot set <code class="codeph">CONTAINER</code> to <code class="codeph">ALL</code> if the users involved are local users. They must be common users. 
                                       </p>
                                    </li>
                                    <li>
                                       <p>If you set <code class="codeph">CONTAINER</code> to <code class="codeph">ALL</code> and do not specify a user list (using the <code class="codeph">BY</code> clause in the <code class="codeph">AUDIT</code> statement), then the configuration applies to all common users in each PDB.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>For application containers, you can run a common unified audit policy from the application container script that is used for application install, upgrade, patch, and uninstall operations. To do so: </p>
                                 <ol>
                                    <li>
                                       <p>Create a common unified audit policy in the application container root, and set this policy to <code class="codeph">CONTAINER = ALL</code>. Alternatively, you can include this policy in the script that is described in this next step.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Create a custom version of the script you normally would use to install, upgrade, patch, or uninstall Oracle Database. </p>
                                    </li>
                                    <li>
                                       <p>Within this script, include the SQL statements that you want to audit within the following lines:</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION BEGIN INSTALL
<span class="italic">List SQL statements here. Separate each statement with a semi-colon.
</span>ALTER PLUGGABLE DATABASE APPLICATION END INSTALL</code></pre><p>If you include the unified audit policy in the script, then ensure that you include both the <code class="codeph">CREATE AUDIT POLICY</code> and <code class="codeph">AUDIT POLICY</code> statements.
                                       </p>
                                    </li>
                                 </ol>
                                 <p>After the audit policy is created and enabled, all user access to the application common objects is audited irrespective of whether the audit policy is defined in the database or from the script. </p>
                              </li>
                              <li>
                                 <p>To audit application install, upgrade, patch, and uninstall operations locally in an application root or an application PDB, follow a procedure similar to the preceding procedure for common unified audit policies, but synchronize the application PDB afterward. For example:</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION <span class="italic">application_name</span> SYNC;</code></pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="You install, upgrade, or patch an application in an application container.">Managing Applications in an Application Container</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-92AAA230-841F-4214-940E-C7C47AB0CA39" name="GUID-92AAA230-841F-4214-940E-C7C47AB0CA39"></a><h5 id="MULTI-GUID-92AAA230-841F-4214-940E-C7C47AB0CA39" class="sect5"><span class="enumeration_section">18.9.3.4 </span>Example: Local Unified Audit Policy
                     </h5>
                     <div>
                        <p>The <span class="apiname" translate="no">CREATE AUDIT POLICY</span> statement can create a local unified audit policy in either the root or a PDB.
                        </p>
                        <p>When you create a local unified audit policy in the root, it only applies to the root and not across the multitenant environment. </p>
                        <p>The following example shows a local unified audit policy that has been created by the common user <code class="codeph">c##sec_admin</code> from a PDB and applied to common user <code class="codeph">c##hr_admin</code>. 
                        </p>
                        <div class="example" id="GUID-92AAA230-841F-4214-940E-C7C47AB0CA39__CHDGAGBG">
                           <p class="titleinexample">Example 18-5 Local Unified Audit Policy</p><pre class="pre codeblock"><code>CONNECT c##sec_admin@hrpdb
Enter password: <span class="italic">password</span>
Connected.

CREATE AUDIT POLICY table_privs
 PRIVILEGES CREATE ANY TABLE, DROP ANY TABLE
 CONTAINER = CURRENT;

AUDIT POLICY table_privs BY c##hr_admin;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0" name="GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0"></a><h5 id="MULTI-GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0" class="sect5"><span class="enumeration_section">18.9.3.5 </span>Example: CDB Common Unified Audit Policy
                     </h5>
                     <div>
                        <p>The <span class="apiname" translate="no">CREATE AUDIT POLICY</span> statement can create a CDB common unified audit policy.
                        </p>
                        <p><a href="managing-security-for-a-multitenant-environment.html#GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0__CHDDFHEH">Example 18-6</a> shows a common unified audit policy that has been created by the common user <code class="codeph">c##sec_admin</code> from the root and applied to common user <code class="codeph">c##hr_admin</code>. 
                        </p>
                        <div class="example" id="GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0__CHDDFHEH">
                           <p class="titleinexample">Example 18-6 Common Unified Audit Policy</p><pre class="pre codeblock"><code>CONNECT c##sec_admin
Enter password: <span class="italic">password</span>
Connected.

CREATE AUDIT POLICY admin_pol
 ACTIONS CREATE TABLE, ALTER TABLE, DROP TABLE
 ROLES c##hr_mgr, c##hr_sup
 CONTAINER = ALL;

AUDIT POLICY admin_pol BY c##hr_admin;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C" name="GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C"></a><h5 id="MULTI-GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C" class="sect5"><span class="enumeration_section">18.9.3.6 </span>Example: Application Common Unified Audit Policy
                     </h5>
                     <div>
                        <p>For application container common unified audit policies, you can audit action options and system privilege options, and refer to common objects and roles. </p>
                        <p>You can create the application common audit policy only from the application root, and enable the policy for both application common users and CDB common users. </p>
                        <p>The following example shows how to create a policy that audits the application common user <code class="codeph">SYSTEM</code> for the application container <code class="codeph">app_pdb</code>. The audit policy audits <code class="codeph">SELECT</code> actions on the <code class="codeph">SYSTEM.utils_tab</code> table and on <code class="codeph">DROP TABLE</code> actions on any of the PDBs in the container database, including the CDB root. The policy also audits the use of the <code class="codeph">SELECT ANY TABLE</code> system privilege across all containers.
                        </p>
                        <div class="example" id="GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C__EXAMPLETITLE-FE09F6DA">
                           <p class="titleinexample">Example 18-7 Application Common Unified Audit Policy</p><pre class="pre codeblock"><code>CONNECT c##sec_admin@app_pdb
Enter password: <span class="italic">password</span>
Connected.

CREATE AUDIT POLICY app_pdb_admin_pol
 ACTIONS SELECT ON hr_app_cdb.utils_tab, DROP TABLE
 PRIVILEGES SELECT ANY TABLE
 CONTAINER = ALL;

AUDIT POLICY app_pdb_admin_pol by SYSTEM, c##hr_admin;</code></pre><p>In the preceding example, setting <code class="codeph">CONTAINER</code> to <code class="codeph">ALL</code> applies the policy only to all the relevant object accesses in the application root and on all the application PDBs that belong to the application root. It does not apply the policy outside this scope. 
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E" name="GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E"></a><h5 id="MULTI-GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E" class="sect5"><span class="enumeration_section">18.9.3.7 </span>How Local or Common Audit Policies or Settings Appear in the Audit Trail
                     </h5>
                     <div>
                        <p>You can query unified audit policy views from either the root or the PDB in which the action occurred.</p>
                        <p>You can perform the following types of queries:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Audit records from all PDBs.</span> The audit trail reflects audited actions that have been performed in the PDBs. For example, if user <code class="codeph">lbrown</code> in <code class="codeph">PDB1</code> performs an action that has been audited by either a common or a local audit policy, then the audit trail will capture this action. The <code class="codeph">DBID</code> column in the <code class="codeph">UNIFIED_AUDIT_TRAIL</code> data dictionary view indicates the PDB in which the audited action takes place and to which the policy applies. If you want to see audit records from all PDBs, you should query the <code class="codeph">CDB_UNIFIED_AUDIT_TRAIL</code> data dictionary view from the root.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Audit records from common audit policies.</span> This location is where the common audit policy results in an audit record. The audit record can be generated anywhere in the multitenant environment—the root or the PDBs, depending on where the action really occurred. For example, the common audit policy <code class="codeph">fga_pol</code> audits the <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">DBMS_FGA</code> PL/SQL package, and if this action occurs in <code class="codeph">PDB1</code>, then the audit record is generated in <code class="codeph">PDB1</code> and not in the root. Hence, the audit record can be seen in PDB1. 
                              </p>
                              <p>You can query the <code class="codeph">UNIFIED_AUDIT_TRAIL</code> data dictionary view for the policy from either the root or a PDB if you include a <code class="codeph">WHERE</code> clause for the policy name (for example, <code class="codeph">WHERE UNIFIED_AUDIT_POLICIES = 'FGA_POL'</code>).
                              </p>
                           </li>
                        </ul>
                        <p>The following example shows how to find the results of a common unified audit policy:</p><pre class="pre codeblock"><code>CONNECT c##sec_admin
Enter password: <span class="italic">password</span>
Connected.

SELECT DBID, ACTION_NAME, OBJECT_SCHEMA, OBJECT_NAME FROM CDB_UNIFIED_AUDIT_TRAIL WHERE DBUSERNAME = 'c##hr_admin';
46892-1
DBID        ACTION_NAME  OBJECT_SCHEMA  OBJECT_NAME
----------- -----------  -------------  -----------
653916017   UPDATE       HR             EMPLOYEES
653916018   UPDATE       HR             JOB_HISTORY
653916017   UPDATE       HR             JOBS </code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-6F15B297-08C6-4904-938D-3DAA429E14B0" name="GUID-6F15B297-08C6-4904-938D-3DAA429E14B0"></a><h4 id="MULTI-GUID-6F15B297-08C6-4904-938D-3DAA429E14B0" class="sect4"><span class="enumeration_section">18.9.4 </span>Fine-Grained Auditing in a Multitenant Environment
                  </h4>
                  <div>
                     <p><span>You can create fine-grained audit policies in the CDB root, application root, CDB PDBs, and application PDBs.</span></p>
                     <p>Note the following general rules about fine-grained audit policies in a multitenant environment: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You cannot create fine-grained audit policies on <code class="codeph">SYS</code> objects. 
                           </p>
                        </li>
                        <li>
                           <p>You cannot create fine-grained audit policies, either local or application common, for extended data link objects. </p>
                        </li>
                        <li>
                           <p>When you create a fine-grained audit policy in the CDB root, the policy cannot be applied to all PDBs. It only applies to objects within the CDB root. (In other words, there is no such thing as a common fine-grained audit policy for the CDB root.) If you want to create a fine-grained audit policy to audit a common object’s access in all the PDBs, then you must explicitly create that policy in each PDB and then enable it on the common objects that is accessible in the PDB.</p>
                        </li>
                        <li>
                           <p>When you create a fine-grained audit policy in a PDB, it applies only to objects within the PDB.</p>
                        </li>
                        <li>
                           <p>You can create application common fine-grained audit policies only if you are connected to the application root and only within the <code class="codeph">BEGIN</code>/<code class="codeph">END</code> block. If you are connected to the application root and create the fine-grained audit policy outside the <code class="codeph">BEGIN</code>/<code class="codeph">END</code> block, then the fine-grained audit policy is created in the application root.
                           </p>
                        </li>
                        <li>
                           <p>You cannot create application common fine-grained audit policies on local PDB objects.</p>
                        </li>
                        <li>
                           <p>If the application common fine-grained audit policy has a handler, then this handler must be owned by either an application common user or a CDB common user. </p>
                        </li>
                        <li>
                           <p>You can create an application fine-grained audit policy on local (PDB) objects and CDB common objects. Because the policy is local to its container, the object on which the policy is defined is audited only in the particular container where the policy is defined. For example, if you create a fine-grained audit policy in the <code class="codeph">hr_pdb</code> PDB, the object for which you create this policy must exist in the <code class="codeph">hr_pdb</code> PDB.
                           </p>
                        </li>
                        <li>
                           <p>You cannot create local fine-grained audit policies in an application PDB on object linked and extended data link objects. On metadata-linked objects are allowed in the fine-grained audit policy.</p>
                        </li>
                        <li>
                           <p>Application root local policies are allowed for all application common objects. </p>
                        </li>
                        <li>
                           <p>When you create a fine-grained audit policy as a common audit policy in an application root, it will be effective in each PDB that belongs to this application root. Therefore, any access to the application common object and CDB common object (on which the application common fine-grained audit policy is defined) from the application PDB is audited in the fine-grained audit trail in that application PDB.</p>
                        </li>
                        <li>
                           <p>When you create scripts for application install, upgrade, patch, or uninstall operations, you can include SQL statements within the <code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> BEGIN INSTALL</code> and <code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> END INSTALL</code> blocks to perform various operations. You can include fine-grained audit policy statements only within these blocks.
                           </p>
                        </li>
                        <li>
                           <p>You can only enable, disable, or drop application common fine-grained audit policies from the application root, and from within a <code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> BEGIN INSTALL</code> and <code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> END INSTALL</code> block in a script.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-audit-policies.html#DBSEG-GUID-B706FF6F-13A6-4944-AFCB-29971F5076FD" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="Auditing tracks changes that users make in the multitenant container database (CDB).">Auditing in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='05814.creating-dimensions-and-cubes.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Creating Dimensions and Cubes</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="olap-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T13:54:33-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96405-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="getting-started-oracle-olap.html" title="Previous" type="text/html">
      <link rel="next" href="querying-dimensional-objects.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OLAP User's Guide">
    <meta name="dcterms.isVersionOf" content="OLAUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="getting-started-oracle-olap.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="querying-dimensional-objects.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Creating Dimensions and Cubes</li>
            </ol>
            <a id="GUID-A9AEBF37-F942-43E9-844B-D6F40A0348EF" name="GUID-A9AEBF37-F942-43E9-844B-D6F40A0348EF"></a><a id="OLAUG300"></a>
            
            <h2 id="OLAUG-GUID-A9AEBF37-F942-43E9-844B-D6F40A0348EF" class="sect2"><span class="enumeration_chapter">3 </span> Creating Dimensions and Cubes
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter explains how to design a data model and create dimensions and cubes using Analytic Workspace Manager. It contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-92777CA5-71CB-443B-BDFA-B6B01F27C407">Designing a Dimensional Model for Your Data</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-6408702D-6148-48CD-938A-BA4071E21ACE">Introduction to Analytic Workspace Manager</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-4B27A095-F1F1-4973-967D-D3750363491A">Creating a Dimensional Data Store Using Analytic Workspace Manager</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-E720BDB8-8485-4E4D-A506-3C647710885E">Creating Dimensions</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3">Creating Cubes</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-46D5F8CB-653A-49F3-BE97-06F33B2CAB16">Choosing a Data Maintenance Method</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-8809C850-1D01-4D4C-848A-D98039976956">Supporting Multiple Languages</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB">Defining Measure Folders</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-5A2504F6-7788-4A15-82A3-75257A80E3CA">Saving and Re-Creating Dimensional Objects with Object Definitions</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-04145C1A-FBCA-4EC3-BCD2-4547381D9A5B">Copying and Pasting Dimensional Objects</a></p>
                  </li>
               </ul>
            </div><a id="OLAUG9126"></a><div class="props_rev_3"><a id="GUID-92777CA5-71CB-443B-BDFA-B6B01F27C407" name="GUID-92777CA5-71CB-443B-BDFA-B6B01F27C407"></a><h3 id="OLAUG-GUID-92777CA5-71CB-443B-BDFA-B6B01F27C407" class="sect3"><span class="enumeration_section">3.1 </span>Designing a Dimensional Model for Your Data
               </h3>
               <div>
                  <p><a id="d5268e150" class="indexterm-anchor"></a>Chapter 1 introduced the dimensional objects: Cubes, measures, dimensions, levels, hierarchies, and attributes. In this chapter, you learn how to define them in Oracle Database, but first you should decide upon the dimensional model you want to create. What are your measures? What are your dimensions? How can you distinguish between a dimension and an attribute in your data? You can design a dimensional model using pencil and paper, a database design software package, or any other method that suits you.
                  </p>
                  <p>If your source data is in a star or snowflake schema, then you have the elements of a dimensional model:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Fact tables correspond to cubes.</p>
                     </li>
                     <li>
                        <p>Data columns in the fact tables correspond to measures.</p>
                     </li>
                     <li>
                        <p>Foreign key constraints in the fact tables identify the dimension tables.</p>
                     </li>
                     <li>
                        <p>Dimension tables identify the dimensions.</p>
                     </li>
                     <li>
                        <p>Primary keys in the dimension tables identify the base-level dimension members.</p>
                     </li>
                     <li>
                        <p>Parent columns in the dimension tables identify the higher level dimension members.</p>
                     </li>
                     <li>
                        <p>Columns in the dimension tables containing descriptions and characteristics of the dimension members identify the attributes.</p>
                     </li>
                  </ul>
                  <p>You can also get insights into the dimensional model by looking at the reports currently being generated from the source data. The reports identify the levels of aggregation that interest the report consumers and the attributes used to qualify the data.</p>
                  <p>While investigating your source data, you may decide to create relational views that more closely match the dimensional model that you plan to create.</p>
                  <div class="infoboxnotealso" id="GUID-92777CA5-71CB-443B-BDFA-B6B01F27C407__GUID-7161067D-DB22-4167-9024-6CF99AE9C48D">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <p><span class="q">"<a href="overview.html#GUID-EF116DF0-2536-470B-ACC3-A0253327A10B">Overview of the Dimensional Data Model</a>"</span> for an introduction to dimensional objects
                     </p>
                     <p><a href="designing-dimensional-model.html#GUID-3A7C2E03-7A22-435F-A90D-FC3C93664161"> Designing a Dimensional Model</a> for a case study of developing a dimensional model for the Global analytic workspace
                     </p>
                  </div>
               </div>
            </div><a id="OLAUG9426"></a><a id="OLAUG9127"></a><div class="props_rev_3"><a id="GUID-6408702D-6148-48CD-938A-BA4071E21ACE" name="GUID-6408702D-6148-48CD-938A-BA4071E21ACE"></a><h3 id="OLAUG-GUID-6408702D-6148-48CD-938A-BA4071E21ACE" class="sect3"><span class="enumeration_section">3.2 </span>Introduction to Analytic Workspace Manager
               </h3>
               <div>
                  <p>Analytic Workspace Manager is the primary tool for creating, developing, and managing dimensional objects in Oracle Database. Your goal in using Analytic Workspace Manager is to create a dimensional data store that supports business analysis. This data store can stand alone or store summary data as part of a relational data warehouse.</p>
                  <p>Populating dimensional objects involves a physical transformation of the data. The first step in that transformation is defining the cubes, measures, dimensions, levels, hierarchies, and attributes. Afterward, you can map these dimensional objects to their relational data sources. The data loading process transforms the data from a relational format into a dimensional format.</p>
                  <p><a id="d5268e257" class="indexterm-anchor"></a>Using Analytic Workspace Manager, you can:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Develop a dimensional model of your data.</p>
                     </li>
                     <li>
                        <p>Instantiate that model as dimensional objects.</p>
                     </li>
                     <li>
                        <p>Load data from relational tables into those objects.</p>
                     </li>
                     <li>
                        <p>Define information-rich calculations.</p>
                     </li>
                     <li>
                        <p>Create materialized views that can be used by the database refresh system.</p>
                     </li>
                     <li>
                        <p>Automatically generate relational views of the dimensional objects.</p>
                     </li>
                  </ul>
                  <p><a id="d5268e280" class="indexterm-anchor"></a>You can load data from these sources in the database:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Tables</p>
                     </li>
                     <li>
                        <p>Views</p>
                     </li>
                     <li>
                        <p>Synonyms</p>
                     </li>
                  </ul>
                  <p>You must have <code class="codeph">SELECT</code> privileges on the relational data sources so you can load the data into the dimensions and cubes. This chapter assumes that you have a star, snowflake, or other relational schema that supports dimensional objects. 
                  </p>
                  <p><a href="creating-dimensions-and-cubes.html#GUID-6408702D-6148-48CD-938A-BA4071E21ACE__CHDCJBBB">Figure 3-1</a> shows the main window of Analytic Workspace Manager. It contains menus, a toolbar, a navigation tree, and property sheets. When you select an object in the navigation tree, the property sheet to the right provides detailed information about that object. When you right-click an object, you get a choice of menu items with appropriate actions for that object.
                  </p>
                  <p>Analytic Workspace Manager has a full online Help system, which includes context-sensitive Help.</p>
                  <div class="figure" id="GUID-6408702D-6148-48CD-938A-BA4071E21ACE__CHDCJBBB">
                     <p class="titleinfigure">Figure 3-1 Analytic Workspace Manager Main Window</p><img width="471" src="img/awm_mod.gif" alt="Description of Figure 3-1 follows" title="Description of Figure 3-1 follows" longdesc="img_text/awm_mod.html"><br><a href="img_text/awm_mod.html">Description of "Figure 3-1 Analytic Workspace Manager Main Window"</a></div>
                  <!-- class="figure" -->
               </div>
            </div><a id="OLAUG9128"></a><div class="props_rev_3"><a id="GUID-4B27A095-F1F1-4973-967D-D3750363491A" name="GUID-4B27A095-F1F1-4973-967D-D3750363491A"></a><h3 id="OLAUG-GUID-4B27A095-F1F1-4973-967D-D3750363491A" class="sect3"><span class="enumeration_section">3.3 </span>Creating a Dimensional Data Store Using Analytic Workspace Manager
               </h3>
               <div>
                  <div class="section">
                     <p>An analytic workspace is a container for storing related cubes. You create dimensions, cubes, and other dimensional objects within an analytic workspace. </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4B27A095-F1F1-4973-967D-D3750363491A__GUID-139CEBE4-E8AB-4AAE-842F-E1596BB7C516">To create an analytic workspace:</p>
                     <ol>
                        <li>
                           <p>Open Analytic Workspace Manager and connect to your database instance as the user defined for this purpose.</p>
                        </li>
                        <li>
                           <p>Create an analytic workspace in the database: </p>
                           <ol type="a">
                              <li>
                                 <p>In the navigation tree, expand the folders until you see the schema where you want to create the analytic workspace.</p>
                              </li>
                              <li>
                                 <p>Right-click Analytic Workspaces, then click <span class="bold">Create Analytic Workspace</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Complete the Create Analytic Workspace dialog box, then select <span class="bold">Create</span>.
                                 </p>
                                 <p><a id="d5268e396" class="indexterm-anchor"></a>If the Attach Workspace dialog box appears, select the <span class="bold">Read Write</span> or <span class="bold">Read Write Exclusive</span> attachment mode.
                                 </p>
                                 <p>The analytic workspace appears in the Analytic Workspaces folder for the schema.</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>Define the dimensions for the data.</p>
                           <p>See <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-E720BDB8-8485-4E4D-A506-3C647710885E">Creating Dimensions</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Define the cubes for the data.</p>
                           <p>See <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3">Creating Cubes</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Load data into the cubes and dimensions.</p>
                           <p>See <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2">Loading Data Into Cubes</a>"</span>.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>When you have finished, you have an analytic workspace populated with the detail data fetched from relational tables or views. You may also have summarized data and calculated measures.</p>
                  </div>
                  <!-- class="section" -->
               </div><a id="OLAUG9130"></a><div class="props_rev_3"><a id="GUID-9E89DA4C-8408-43E3-9CCB-BBCEE82FA5F2" name="GUID-9E89DA4C-8408-43E3-9CCB-BBCEE82FA5F2"></a><h4 id="OLAUG-GUID-9E89DA4C-8408-43E3-9CCB-BBCEE82FA5F2" class="sect4"><span class="enumeration_section">3.3.1 </span>Adding Functionality to Dimensional Objects
                  </h4>
                  <div>
                     <p><a id="d5268e492" class="indexterm-anchor"></a>In addition to the basic steps, you can add functionality to the cubes in these ways:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Develop custom cube scripts to customize the builds.</p>
                           <p>See <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-0AB6E0EA-7814-493D-99A4-844A074A4D05">Creating and Executing Custom Cube Scripts</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Generate materialized views that support automatic refresh and query rewrite.</p>
                           <p>See <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C">Adding Materialized View Capability to a Cube</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Support multiple languages by adding translations of metadata and attribute values.</p>
                           <p>See <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-8809C850-1D01-4D4C-848A-D98039976956">Supporting Multiple Languages</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Define measure folders to simplify access for end users.</p>
                           <p>See <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB">Defining Measure Folders</a>"</span>.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="OLAUG9427"></a><div class="props_rev_3"><a id="GUID-B07462BD-F06E-407A-8A10-623454BD6952" name="GUID-B07462BD-F06E-407A-8A10-623454BD6952"></a><h4 id="OLAUG-GUID-B07462BD-F06E-407A-8A10-623454BD6952" class="sect4"><span class="enumeration_section">3.3.2 </span>When Does Analytic Workspace Manager Save Changes?
                  </h4>
                  <div>
                     <p><a id="d5268e588" class="indexterm-anchor"></a><a id="d5268e590" class="indexterm-anchor"></a>Analytic Workspace Manager saves changes automatically that you make to the analytic workspace. You do not explicitly save your changes. 
                     </p>
                     <p>Saves occur when you take an action such as these:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Click <span class="bold">OK</span> or the equivalent button in a dialog box.
                           </p>
                           <p>For example, when you click <span class="bold">Create</span> in the Create Dimension dialog box, the dimension is committed to the database.
                           </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Apply</span> in a property sheet.
                           </p>
                           <p>For example, when you change the labels on the General property page for an object, the change takes effect when you click <span class="bold">Apply</span>.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="OLAUG9132"></a><div class="props_rev_3"><a id="GUID-E720BDB8-8485-4E4D-A506-3C647710885E" name="GUID-E720BDB8-8485-4E4D-A506-3C647710885E"></a><h3 id="OLAUG-GUID-E720BDB8-8485-4E4D-A506-3C647710885E" class="sect3"><span class="enumeration_section">3.4 </span>Creating Dimensions
               </h3>
               <div>
                  <p><a id="d5268e668" class="indexterm-anchor"></a><a id="d5268e672" class="indexterm-anchor"></a><a id="d5268e674" class="indexterm-anchor"></a>Dimensions are lists of unique values that identify and categorize data. They form the edges of a cube, and thus of the measures within the cube. In a report, the dimension values (or their descriptive attributes) provide labels for the rows and columns.
                  </p>
                  <p>You can define dimensions that have any of these common forms:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Level-based dimensions that use parent-child relationships to group members into levels. Most dimensions are level-based.</p>
                     </li>
                     <li>
                        <p>Value-based dimensions that have parent-child relationships among their members, but these relationships do not form meaningful levels.</p>
                     </li>
                     <li>
                        <p>List or flat dimensions that have no levels or hierarchies.</p>
                     </li>
                  </ul>
                  <p>You define a dimension as a User, Time, or Measure dimension. Detail-level dimension values typically correspond to the unique keys of a fact table. A measure dimension has measures as dimension members.</p>
                  <p>This section has the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-FB8489D3-40A2-4327-8D29-C67B9565C771">Requirements of a Dimension</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B">Creating a Dimension</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB">Creating Levels</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982">Creating Hierarchies</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-6BA9713F-87FE-41CD-B724-B7E39E8B12EE">Creating Attributes</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201">Creating Measure Dimensions</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-8C11AAE4-41E7-4202-AEBA-C2B0D3E7C505">Mapping Dimensions</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB">Loading Data Into Dimensions</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-D01F4099-3CEE-43FE-AD70-56B886225C6C">Displaying the Dimension View</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-C7A844C2-39CF-47FF-B3D0-D51462747665">Displaying the Default Hierarchy</a></p>
                     </li>
                  </ul>
               </div><a id="OLAUG9571"></a><div class="props_rev_3"><a id="GUID-FB8489D3-40A2-4327-8D29-C67B9565C771" name="GUID-FB8489D3-40A2-4327-8D29-C67B9565C771"></a><h4 id="OLAUG-GUID-FB8489D3-40A2-4327-8D29-C67B9565C771" class="sect4"><span class="enumeration_section">3.4.1 </span>Requirements of a Dimension
                  </h4>
                  <div>
                     <p>Dimensions must meet the following requirements:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="creating-dimensions-and-cubes.html#GUID-024C89B6-3BB3-41A4-B06B-A7FFE81F564F">Dimension Members Must Be Unique</a></p>
                        </li>
                        <li>
                           <p><a href="creating-dimensions-and-cubes.html#GUID-CE8AD8B8-BE19-4DE8-936A-A358C9C9228D">Time Dimensions Have Special Requirements</a></p>
                        </li>
                     </ul>
                  </div><a id="OLAUG9572"></a><div class="props_rev_3"><a id="GUID-024C89B6-3BB3-41A4-B06B-A7FFE81F564F" name="GUID-024C89B6-3BB3-41A4-B06B-A7FFE81F564F"></a><h5 id="OLAUG-GUID-024C89B6-3BB3-41A4-B06B-A7FFE81F564F" class="sect5"><span class="enumeration_section">3.4.1.1 </span>Dimension Members Must Be Unique
                     </h5>
                     <div>
                        <p>Every dimension member must be a unique value. Depending on your data, you can create a dimension that uses either natural keys or surrogate keys from the relational sources for its members. If you have any doubt that the values are unique across all levels, then keep the default choice of surrogate keys. </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a id="d5268e860" class="indexterm-anchor"></a><span class="bold">Source keys</span> are read from the relational sources without modification. To use the same exact keys as the source data, the values must be unique across levels. Because each level may be mapped to a different relational column, this uniqueness may not be enforced in the source data. For example, a dimension table might have a Day column with values of <code class="codeph">1</code> to <code class="codeph">366</code> and a Week column with values of <code class="codeph">1</code> to <code class="codeph">52</code>. Unless you take steps to assure uniqueness, the values from the Week column overwrite the first 52 Day values.
                              </p>
                           </li>
                           <li>
                              <p><a id="d5268e879" class="indexterm-anchor"></a><span class="bold">Surrogate keys</span> ensure uniqueness by adding a level prefix to the members while loading them into the analytic workspace. For the previous example, surrogate keys create two dimension members named <code class="codeph">DAY_1</code> and <code class="codeph">WEEK_1</code>, instead of a single member named <code class="codeph">1</code>. A dimension that has surrogate keys must be defined with at least one level-based hierarchy.
                              </p>
                           </li>
                        </ul>
                        <p>Analytic Workspace Manager creates surrogate keys unless you specify otherwise.</p>
                     </div>
                  </div><a id="OLAUG9573"></a><div class="props_rev_3"><a id="GUID-CE8AD8B8-BE19-4DE8-936A-A358C9C9228D" name="GUID-CE8AD8B8-BE19-4DE8-936A-A358C9C9228D"></a><h5 id="OLAUG-GUID-CE8AD8B8-BE19-4DE8-936A-A358C9C9228D" class="sect5"><span class="enumeration_section">3.4.1.2 </span>Time Dimensions Have Special Requirements
                     </h5>
                     <div>
                        <p><a id="d5268e945" class="indexterm-anchor"></a>You can define dimensions as either User or Time dimensions. Business analysis is performed on historical data, so fully defined time periods are vital. A time dimension table must have columns for period end dates and time span. These required attributes support comparisons with earlier or later time periods. If this information is not available, then you can define Time as a User dimension, but it cannot support time-based analysis.
                        </p>
                        <p>You must define a Time dimension with at least one level to support time-based analysis, such as a custom measure that calculates the difference from the prior period.</p>
                     </div>
                  </div>
               </div><a id="OLAUG9430"></a><a id="OLAUG9574"></a><div class="props_rev_3"><a id="GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B" name="GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B"></a><h4 id="OLAUG-GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B" class="sect4"><span class="enumeration_section">3.4.2 </span>Creating a Dimension
                  </h4>
                  <div>
                     <div class="section">
                        <p>This section describes how to create a standard User or Time dimension. See <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201">Creating Measure Dimensions</a>"</span> for information on creating a measure dimension.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B__GUID-68E743CF-FCA7-45AD-B29C-6E340254324A">To create a dimension:</p>
                        <ol>
                           <li>
                              <p>Expand the folder for the analytic workspace.</p>
                           </li>
                           <li>
                              <p>Right-click <span class="bold">Dimensions</span>, then select <span class="bold">Create Dimension</span>. 
                              </p>
                              <p>The Create Dimension dialog box appears.</p>
                           </li>
                           <li>
                              <p>Complete the General tab.</p>
                           </li>
                           <li>
                              <p>If the keys in the source table are unique across levels, you can change the default setting on the Implementation Details tab.</p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Create</span>. 
                              </p>
                              <p>The dimension appears as a subfolder under Dimensions.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="creating-dimensions-and-cubes.html#GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B__CHDCCFEG">Figure 3-2</a> shows the creation of the Product dimension. 
                        </p>
                        <div class="figure" id="GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B__CHDCCFEG">
                           <p class="titleinfigure">Figure 3-2 Creation of the Product Dimension</p><img width="262" src="img/proddim_gen.gif" alt="Description of Figure 3-2 follows" title="Description of Figure 3-2 follows" longdesc="img_text/proddim_gen.html"><br><a href="img_text/proddim_gen.html">Description of "Figure 3-2 Creation of the Product Dimension"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9431"></a><a id="OLAUG9133"></a><div class="props_rev_3"><a id="GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB" name="GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB"></a><h4 id="OLAUG-GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB" class="sect4"><span class="enumeration_section">3.4.3 </span>Creating Levels
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e1108" class="indexterm-anchor"></a>For business analysis, data is typically summarized by level. For example, your database may contain daily snapshots of a transactional database. Days are the base level. You might summarize this data at the weekly, quarterly, and yearly levels.
                        </p>
                        <p>Levels have parent-child or one-to-many relationships, which form a <a id="d5268e1115" class="indexterm-anchor"></a><a id="d5268e1117" class="indexterm-anchor"></a><span class="bold">level-based hierarchy</span>. For example, each week summarizes seven days, each quarter summarizes 13 weeks, and each year summarizes four quarters. This hierarchical structure enables analysts to detect trends at the higher levels, then drill down to the lower levels to identify factors that contributed to a trend.
                        </p>
                        <p>For each level that you define, you must identify a data source for dimension members at that level. Members at all levels are stored in the same dimension. In the previous example, the Time dimension contains members for weeks, quarters, and years.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB__GUID-4888585B-0903-46AD-A69F-C3B965B53DF3">To create a level:</p>
                        <ol>
                           <li>
                              <p>Expand the folder for the dimension. </p>
                           </li>
                           <li>
                              <p>Right-click <span class="bold">Levels</span>, then select <span class="bold">Create Level</span>. 
                              </p>
                              <p>The Create Level dialog box appears.</p>
                           </li>
                           <li>
                              <p>Complete the General tab of the Create Level dialog box. </p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Create</span>. 
                              </p>
                              <p>The level appears as an item in the Levels folder.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infobox-tip" id="GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB__GUID-DC3EE029-7E59-4C2A-8580-048AE9CBA866">
                           <p class="notep1">Tip:</p>
                           <p>Alternatively, you can create levels in the Create Dimension dialog box Levels tab.</p>
                        </div>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB__CHDHEHFE">Figure 3-3</a> shows the creation of the Class level for the Product dimension. 
                        </p>
                        <div class="figure" id="GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB__CHDHEHFE">
                           <p class="titleinfigure">Figure 3-3 Creation of the Class Level</p><img width="180" src="img/classlevel_gen.gif" alt="Description of Figure 3-3 follows" title="Description of Figure 3-3 follows" longdesc="img_text/classlevel_gen.html"><br><a href="img_text/classlevel_gen.html">Description of "Figure 3-3 Creation of the Class Level"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9432"></a><a id="OLAUG9433"></a><a id="OLAUG9434"></a><a id="OLAUG9134"></a><div class="props_rev_3"><a id="GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982" name="GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982"></a><h4 id="OLAUG-GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982" class="sect4"><span class="enumeration_section">3.4.4 </span>Creating Hierarchies
                  </h4>
                  <div>
                     <p><a id="d5268e1226" class="indexterm-anchor"></a>Dimensions can have one or more hierarchies. They can be level based or value based.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982__GUID-3CBFCA04-2250-4276-B9AE-956FEE92DDE1">Level-Based Hierarchies</p>
                     </div>
                     <!-- class="section" -->
                     <p>Most hierarchies are level based. Analytic Workspace Manager supports these common types of level-based hierarchies:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a id="d5268e1239" class="indexterm-anchor"></a><a id="d5268e1241" class="indexterm-anchor"></a><a id="d5268e1243" class="indexterm-anchor"></a><a id="d5268e1245" class="indexterm-anchor"></a><span class="bold">Normal hierarchies</span> consist of one or more levels of aggregation. Members roll up into the next higher level in a many-to-one relationship, and these members roll up into the next higher level, and so forth to the top level.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Ragged hierarchies</span> contain at least one member with a different base, creating a "ragged" base level for the hierarchy. Ragged hierarchies are not supported for cube materialized views.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Skip-level hierarchies</span> contain at least one member whose parents are multiple levels above it, creating a hole in the hierarchy. An example of a skip-level hierarchy is City-State-Country, where at least one city has a country as its parent (for example, Washington D.C. in the United States).
                           </p>
                           <p>In relational source tables, a skip-level hierarchy may contain nulls in the level columns. Skip-level hierarchies are not supported for cube materialized views.</p>
                        </li>
                     </ul>
                     <p>Multiple hierarchies for a dimension typically share the base-level dimension members and then branch into separate hierarchies. They can share the top level if they use all the same base members and use the same aggregation operators. Otherwise, they need different top levels to store different aggregate values. For example, a Customer dimension may have multiple hierarchies that include all base-level customers and are summed to a shared top level. However, a Time dimension with calendar and fiscal hierarchies must aggregate to separate Calendar Year (January to December) and Fiscal Year (July to June) levels, because they use different selections of base-level members.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982__GUID-993118AD-F919-4233-B175-956789EEBE96">Value-Based Hierarchies</p>
                     </div>
                     <!-- class="section" -->
                     <p><a id="d5268e1270" class="indexterm-anchor"></a>You may also have dimensions with parent-child relations that do not support levels. For example, an employee dimension might have a parent-child relation that identifies each employee's supervisor. However, levels that group first-, second-, and third-level supervisors and so forth may not be meaningful for analysis. Similarly, you might have a line-item dimension with members that cannot be grouped into meaningful levels. In this situation, you can create a <span class="bold">value-based hierarchy</span> defined by the parent-child relations, which does not have named levels. You can create value-based hierarchies only for dimensions that use the source keys, because surrogate keys are formed with the names of the levels.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982__GUID-5EAEEB97-E06E-4EC5-837D-980CCAFB2745">To create a hierarchy:</p>
                        <ol>
                           <li>
                              <p>Expand the folder for the dimension. </p>
                           </li>
                           <li>
                              <p>Right-click <span class="bold">Hierarchies</span>, then select <span class="bold">Create Hierarchy</span>.
                              </p>
                              <p>The Create Hierarchy dialog box appears. </p>
                           </li>
                           <li>
                              <p>Complete the General tab of the Create Hierarchy dialog box. </p>
                              <p>Click <span class="bold">Help</span> for information about these choices.
                              </p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Create</span>. 
                              </p>
                              <p>The hierarchy appears as an item in the Hierarchies folder. </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <p><a href="creating-dimensions-and-cubes.html#GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982__CHDBCIDJ">Figure 3-4</a> shows the creation of the Primary hierarchy for the Product dimension.
                     </p>
                     <div class="figure" id="GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982__CHDBCIDJ">
                        <p class="titleinfigure">Figure 3-4 Creation of the Product Primary Hierarchy</p><img width="372" src="img/prodhier_gen.gif" alt="Description of Figure 3-4 follows" title="Description of Figure 3-4 follows" longdesc="img_text/prodhier_gen.html"><br><a href="img_text/prodhier_gen.html">Description of "Figure 3-4 Creation of the Product Primary Hierarchy"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="OLAUG9135"></a><div class="props_rev_3"><a id="GUID-6BA9713F-87FE-41CD-B724-B7E39E8B12EE" name="GUID-6BA9713F-87FE-41CD-B724-B7E39E8B12EE"></a><h4 id="OLAUG-GUID-6BA9713F-87FE-41CD-B724-B7E39E8B12EE" class="sect4"><span class="enumeration_section">3.4.5 </span>Creating Attributes
                  </h4>
                  <div>
                     <p><a id="d5268e1368" class="indexterm-anchor"></a>Attributes provide information about the individual members of a dimension. They are used for labeling crosstabular and graphical data displays, selecting data, organizing dimension members, and so forth.
                     </p>
                  </div><a id="OLAUG9136"></a><div class="props_rev_3"><a id="GUID-5A8C4680-B1B4-4CD1-8DEB-DCF6BCF946F7" name="GUID-5A8C4680-B1B4-4CD1-8DEB-DCF6BCF946F7"></a><h5 id="OLAUG-GUID-5A8C4680-B1B4-4CD1-8DEB-DCF6BCF946F7" class="sect5"><span class="enumeration_section">3.4.5.1 </span>Automatically Defined Attributes
                     </h5>
                     <div>
                        <p>Analytic Workspace Manager creates some attributes automatically when creating a dimension. These attributes have a unique type, such as "Long Description." </p>
                        <p>All dimensions can be created with long and short description attributes. If your source tables include long and short descriptions, then you can map the attributes to the appropriate columns. However, if your source tables include only one set of descriptions, then you can create and map just one description attribute. If you map both the long and short description attributes to the same column, the data is loaded twice.</p>
                        <p><a id="d5268e1427" class="indexterm-anchor"></a><a id="d5268e1429" class="indexterm-anchor"></a>Time dimensions are created with time-span and end-date attributes. This information must be provided for all Time dimension members.
                        </p>
                     </div>
                  </div><a id="OLAUG9435"></a><a id="OLAUG9137"></a><div class="props_rev_3"><a id="GUID-2E1C0FFA-C69A-45A5-A4EA-5707F9A446D4" name="GUID-2E1C0FFA-C69A-45A5-A4EA-5707F9A446D4"></a><h5 id="OLAUG-GUID-2E1C0FFA-C69A-45A5-A4EA-5707F9A446D4" class="sect5"><span class="enumeration_section">3.4.5.2 </span>User-Defined Attributes
                     </h5>
                     <div>
                        <p>You can create additional "User" attributes that provide supplementary information about the dimension members, such as the addresses and telephone numbers of customers, or the color and sizes of products.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-2E1C0FFA-C69A-45A5-A4EA-5707F9A446D4__GUID-86AE493F-413E-4C4A-A0C4-25AA858BFDFD">To create an attribute:</p>
                           <ol>
                              <li>
                                 <p>Expand the folder for the dimension. </p>
                              </li>
                              <li>
                                 <p>Right-click <span class="bold">Attributes</span>, then select <span class="bold">Create Attribute</span>. 
                                 </p>
                                 <p>The Create Attribute dialog box appears. </p>
                              </li>
                              <li>
                                 <p>Complete the General tab of the Create Attribute dialog box. </p>
                                 <p>Some attributes apply to all dimension members, and others apply to only one level. Your selection in the Apply Attributes To box controls the mapping of the attribute to one column or to multiple columns. </p>
                                 <p>Click <span class="bold">Help</span> for information about these choices.
                                 </p>
                              </li>
                              <li>
                                 <p>To change the data type from the default choice of <code class="codeph">VARCHAR2</code>, complete the Implementation Details tab.
                                 </p>
                              </li>
                              <li>
                                 <p>Click <span class="bold">Create</span>. 
                                 </p>
                                 <p>The attribute appears as an item in the Attributes folder. </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p><a href="creating-dimensions-and-cubes.html#GUID-2E1C0FFA-C69A-45A5-A4EA-5707F9A446D4__CHDDDHFF">Figure 3-5</a> shows the creation of the Marketing Manager attribute for the Product dimension. Notice that this attribute applies only to the Item level.
                           </p>
                           <div class="figure" id="GUID-2E1C0FFA-C69A-45A5-A4EA-5707F9A446D4__CHDDDHFF">
                              <p class="titleinfigure">Figure 3-5 Creation of the Product Marketing Manager Attribute</p><img width="292" src="img/prodattr_gen.gif" alt="Description of Figure 3-5 follows" title="Description of Figure 3-5 follows" longdesc="img_text/prodattr_gen.html"><br><a href="img_text/prodattr_gen.html">Description of "Figure 3-5 Creation of the Product Marketing Manager Attribute"</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9138"></a><div class="props_rev_3"><a id="GUID-B57D7F89-E047-43FE-99CE-A4D772C1B26B" name="GUID-B57D7F89-E047-43FE-99CE-A4D772C1B26B"></a><h5 id="OLAUG-GUID-B57D7F89-E047-43FE-99CE-A4D772C1B26B" class="sect5"><span class="enumeration_section">3.4.5.3 </span>Unique Key Attributes
                     </h5>
                     <div>
                        <p>Materialized views require that each dimension of the cube have unique key attributes. These attributes store the original key values of the source dimensions, which may have been changed when creating the embedded total dimensions of the cubes.</p>
                        <p><a id="d5268e1594" class="indexterm-anchor"></a>Analytic Workspace Manager automatically creates unique key attributes for the dimensions of a cube materialized view. You do not create or manage them manually.
                        </p>
                     </div>
                  </div>
               </div><a id="OLAUG9575"></a><div class="sect3"><a id="GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201" name="GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201"></a><h4 id="OLAUG-GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201" class="sect4"><span class="enumeration_section">3.4.6 </span>Creating Measure Dimensions
                  </h4>
                  <div>
                     <p>A measure dimension enables you to generate calculated measures for all of the measures in the cube simultaneously. Before creating a measure dimension you must first create a fact view. The fact view pivots a fact table so that the measures identify rows instead of columns.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201__GUID-A9E8DDD0-A4C8-4B19-AC1F-8491074F6A3B">To create a measure dimension:</p>
                        <ol>
                           <li>
                              <p>From the Tools menu, select <span class="bold">Create Fact View with Measure Dimension</span>.
                              </p>
                              <p>The Create Fact View with Measure Dimension dialog box appears.</p>
                           </li>
                           <li>
                              <p>Complete the Create Fact View with Measure Dimension dialog box.</p>
                              <ol type="a">
                                 <li>
                                    <p>From the Schema list, select a schema.</p>
                                 </li>
                                 <li>
                                    <p>From the Object list, select a fact table.</p>
                                 </li>
                                 <li>
                                    <p>In the Fact View Name field, keep the default name or enter a different name.</p>
                                 </li>
                                 <li>
                                    <p>In the table of the columns of the fact table, select the columns for the measures that you want the measure dimension to have.</p>
                                 </li>
                                 <li>
                                    <p><span class="italic">Optional</span>: To automatically create a table for the measure dimension, select the <span class="bold">Create Measure Dimension Table</span> option.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Click <span class="bold">Create</span>.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>Expand the folder for the analytic workspace.</p>
                           </li>
                           <li>
                              <p>Right-click <span class="bold">Dimensions</span>, then select <span class="bold">Create Dimension</span>. 
                              </p>
                              <p>The Create Dimension dialog box appears.</p>
                           </li>
                           <li>
                              <p>Complete the General tab. For the Dimension Class Type, be sure to select <span class="bold">Measure Dimension</span>.
                              </p>
                              <p>A measure dimension is a flat dimension, with no levels or hierarchies.</p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Create</span>.
                              </p>
                              <p>The dimension appears as a subfolder under Dimensions.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <p>After creating the measure dimension, create a cube and add the dimension to it.</p>
                     <div class="infoboxnote" id="GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201__GUID-51078FF5-4179-497E-A422-8D49B65C3334">
                        <p class="notep1">Note:</p>
                        <p>If you create a new column in the fact table and you want to add it to the measure dimension, then must create the fact view for the fact table again and maintain the measure dimension and the cube.</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201__GUID-C1585804-6CF0-4C23-9596-5C59CE66C94B">To add a measure to the measure dimension:</p>
                        <ol>
                           <li>
                              <p>From the Tools menu, select <span class="bold">Create Fact View with Measure Dimension</span>.
                              </p>
                              <p>The Create Fact View with Measure Dimension dialog box appears.</p>
                           </li>
                           <li>
                              <p>Complete the Create Fact View with Measure Dimension dialog box.</p>
                              <ol type="a">
                                 <li>
                                    <p>From the Schema list, select a schema.</p>
                                 </li>
                                 <li>
                                    <p>From the Object list, select the fact table that you used to create the measure dimension.</p>
                                 </li>
                                 <li>
                                    <p>In the Fact View Name field, keep the default name or enter a different name.</p>
                                 </li>
                                 <li>
                                    <p>In the table of the columns of the fact table, select the columns for the measures that you want the measure dimension to have.</p>
                                 </li>
                                 <li>
                                    <p><span class="italic">Optional</span>: To automatically create a table for the measure dimension, select the <span class="bold">Create Measure Dimension Table</span> option.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Click <span class="bold">Create</span>.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>Right-click the measure dimension and then select <span class="bold">Maintain Dimension</span>.
                              </p>
                           </li>
                           <li>
                              <p>Right-click the cube that has the measure dimension and then select <span class="bold">Maintain Cube</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnotealso" id="GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201__GUID-566BBFD7-4A77-4089-90C9-8BEF5D9325A6">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3">Creating Cubes</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="OLAUG9436"></a><a id="OLAUG9139"></a><div class="props_rev_3"><a id="GUID-8C11AAE4-41E7-4202-AEBA-C2B0D3E7C505" name="GUID-8C11AAE4-41E7-4202-AEBA-C2B0D3E7C505"></a><h4 id="OLAUG-GUID-8C11AAE4-41E7-4202-AEBA-C2B0D3E7C505" class="sect4"><span class="enumeration_section">3.4.7 </span>Mapping Dimensions
                  </h4>
                  <div>
                     <p><a id="d5268e1840" class="indexterm-anchor"></a><a id="d5268e1844" class="indexterm-anchor"></a><a id="d5268e1848" class="indexterm-anchor"></a>Mapping identifies the relational data source for each dimensional object. After mapping a dimension to a column of a relational table or view, you can load the data. You can create, map, and load each dimension individually, or perform each step for all dimensions before proceeding to the next step. 
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-8C11AAE4-41E7-4202-AEBA-C2B0D3E7C505__GUID-A56E3C4C-8381-4689-BA1A-1E5396711EB6">SQL Data Types for Dimensions</p>
                     </div>
                     <!-- class="section" -->
                     <p>You can map dimensions and levels to columns having these SQL data types, which are converted to text during a data load:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>VARCHAR2</p>
                        </li>
                        <li>
                           <p>NVARCHAR2</p>
                        </li>
                        <li>
                           <p>NUMBER</p>
                        </li>
                        <li>
                           <p>INTEGER</p>
                        </li>
                        <li>
                           <p>DECIMAL</p>
                        </li>
                        <li>
                           <p>CHAR</p>
                        </li>
                        <li>
                           <p>NCHAR</p>
                        </li>
                        <li>
                           <p>DATE</p>
                        </li>
                        <li>
                           <p>TIMESTAMP</p>
                        </li>
                        <li>
                           <p>TIMESTAMP WITH TIMEZONE</p>
                        </li>
                        <li>
                           <p>TIMESTAMP WITH LOCAL TIMEZONE </p>
                        </li>
                     </ul>
                     <p>You can map attributes to the same data types as cubes and measures, as described in <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__CIHFEABI">Data Types</a>"</span>.
                     </p>
                  </div><a id="OLAUG9437"></a><a id="OLAUG9438"></a><a id="OLAUG9140"></a><div class="props_rev_3"><a id="GUID-4E770D28-115E-487B-A91D-B764E361023E" name="GUID-4E770D28-115E-487B-A91D-B764E361023E"></a><h5 id="OLAUG-GUID-4E770D28-115E-487B-A91D-B764E361023E" class="sect5"><span class="enumeration_section">3.4.7.1 </span>Dimension Mapping Window
                     </h5>
                     <div>
                        <p>The mapping window has a tabular view and a graphical view. You can switch between the two views, using the icons at the top of the canvas.</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Tabular view</span>: Drag-and-drop the names of individual columns from the schema navigation tree to the rows for the dimensional objects. 
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Graphical view</span>: Drag-and-drop icons, which represent tables and views, from the schema navigation tree onto the mapping canvas. Then draw lines from the columns to the dimensional objects. 
                              </p>
                           </li>
                        </ul>
                        <p>You can use the OLAP expression syntax when mapping dimensions in the tabular view. This capability enables you to create the top level of a dimension without having a source column in the dimension table.</p>
                        <p>You can also map attributes from different tables. OLAP automatically joins the tables on columns with the same name.</p>
                        <p>Click <span class="bold">Help</span> on the Mapping window for more information. 
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-4E770D28-115E-487B-A91D-B764E361023E__GUID-B3065D55-5335-4E0F-A4AE-412A4C0366C6">To map a dimension: </p>
                           <ol>
                              <li>
                                 <p>In the navigation tree, expand the dimension folder and click <span class="bold">Mappings</span>. 
                                 </p>
                                 <p>The Mapping window contains a schema navigation tree on the left and a mapping table for the dimension with rows for the levels and their attributes. This is the tabular view. </p>
                              </li>
                              <li>
                                 <p>For normalized dimension tables, select <span class="bold">Snowflake Schema</span> for the Type of Dimension Table.
                                 </p>
                              </li>
                              <li>
                                 <p>To enlarge the Mapping Window, drag the divider to the left.</p>
                              </li>
                              <li>
                                 <p>In the schema tree, expand the tables, views, or synonyms that contain the dimension members and attributes.</p>
                              </li>
                              <li>
                                 <p>Drag-and-drop the source columns onto the appropriate cells in the mapping table for the dimension.</p>
                                 <p><a id="d5268e1999" class="indexterm-anchor"></a><a id="d5268e2003" class="indexterm-anchor"></a>Map a measure dimension to the measure dimension table. Specify <code class="codeph">measure_id</code> as the member value.
                                 </p>
                              </li>
                              <li>
                                 <p>After you have mapped all levels and attributes, click <span class="bold">Apply</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Drag the divider back to the right to reveal the navigation tree.</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <p><a href="creating-dimensions-and-cubes.html#GUID-4E770D28-115E-487B-A91D-B764E361023E__BGBCFAJF">Figure 3-6</a> shows the Product dimension mapped in the tabular view. The arrow highlights how the <code class="codeph">PRODUCT_DIM.ITEM_BUYER</code> column maps to the <code class="codeph">PRODUCT.ITEM.BUYER</code> attribute.
                        </p>
                        <div class="figure" id="GUID-4E770D28-115E-487B-A91D-B764E361023E__BGBCFAJF">
                           <p class="titleinfigure">Figure 3-6 Product Dimension Mapped in Tabular View</p><img width="443" src="img/maptbl_dim.gif" alt="Description of Figure 3-6 follows" title="Description of Figure 3-6 follows" longdesc="img_text/maptbl_dim.html"><br><a href="img_text/maptbl_dim.html">Description of "Figure 3-6 Product Dimension Mapped in Tabular View"</a></div>
                        <!-- class="figure" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-4E770D28-115E-487B-A91D-B764E361023E__GUID-85B3AAF6-4318-4B87-A7AA-6612AD6E5AFE">To map a top level without a relational source: </p>
                           <ol>
                              <li>
                                 <p>Create the dimension and its levels (including the top level), hierarchies, and attributes.</p>
                              </li>
                              <li>
                                 <p>Map the dimension as described previously for all but the top level.</p>
                              </li>
                              <li>
                                 <p>Enter an expression in the OLAP expression syntax for the top level. </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-4E770D28-115E-487B-A91D-B764E361023E__GUID-00197DE6-40BB-4A89-A2A6-CC3D456C6CD5">
                           <p class="titleinexample">Example 3-1 Creating a Top Level for the Global Time Dimension</p>
                           <p>This example shows a top level for all years in the Time dimension. The mapping expressions used for a Total level (that is, all years) in the Time dimension might look like this:</p><pre class="oac_no_warn" dir="ltr">Member: 'TOTAL' 
LONG_DESCRIPTION: 'Total'
SHORT_DESCRIPTION: 'Total' 
END_DATE: TO_DATE('31-Dec-2007', 'dd-mon-yyyy')
TIME_SPAN: 3646 
</pre><p><code class="codeph">Member</code>, <code class="codeph">LONG_DESCRIPTION</code>, and <code class="codeph">SHORT_DESCRIPTION</code> are set to literal strings, <code class="codeph">END_DATE</code> uses the <code class="codeph">TO_DATE</code> function, and <code class="codeph">TIME_SPAN</code> is set to a number. 
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="OLAUG9439"></a><a id="OLAUG9141"></a><div class="props_rev_3"><a id="GUID-280EEC79-F81B-4CD0-8AEF-150E3E5224BF" name="GUID-280EEC79-F81B-4CD0-8AEF-150E3E5224BF"></a><h5 id="OLAUG-GUID-280EEC79-F81B-4CD0-8AEF-150E3E5224BF" class="sect5"><span class="enumeration_section">3.4.7.2 </span>Source Data Query
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can view the contents of a particular source column without leaving the mapping window. The information is readily available, eliminating the guesswork when the names are not adequately descriptive.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-280EEC79-F81B-4CD0-8AEF-150E3E5224BF__GUID-7EDB51AB-0B3C-4019-A9CC-1CF41C8ACDD1">To see the values in a particular source table or view:</p>
                           <ol>
                              <li>
                                 <p>Right-click the source object in either the schema tree or the graphical view of the mapping canvas. </p>
                              </li>
                              <li>
                                 <p>Select <span class="bold">View Data</span> from the shortcut menu. 
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p><a href="creating-dimensions-and-cubes.html#GUID-280EEC79-F81B-4CD0-8AEF-150E3E5224BF__CJABACEG">Figure 3-7</a> shows the data stored in the <code class="codeph">PRODUCT_DIM</code> table.
                           </p>
                           <div class="figure" id="GUID-280EEC79-F81B-4CD0-8AEF-150E3E5224BF__CJABACEG">
                              <p class="titleinfigure">Figure 3-7 Data in the PRODUCT_DIM Table</p><img width="385" src="img/prod_data.gif" alt="Description of Figure 3-7 follows" title="Description of Figure 3-7 follows" longdesc="img_text/prod_data.html"><br><a href="img_text/prod_data.html">Description of "Figure 3-7 Data in the PRODUCT_DIM Table"</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="OLAUG9440"></a><a id="OLAUG9441"></a><a id="OLAUG9142"></a><div class="props_rev_3"><a id="GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB" name="GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB"></a><h4 id="OLAUG-GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB" class="sect4"><span class="enumeration_section">3.4.8 </span>Loading Data Into Dimensions
                  </h4>
                  <div>
                     <div class="section">
                        <p>Analytic Workspace Manager provides several ways to load data into dimensional objects. The quickest way when developing a data model is using the default choices of the Maintenance Wizard. Other methods may be more appropriate in a production environment than the one shown here. They are discussed in <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-46D5F8CB-653A-49F3-BE97-06F33B2CAB16">Choosing a Data Maintenance Method</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB__GUID-C8950B62-FF60-454D-9A05-5A2E162924D5">To load data into the dimensions:</p>
                        <ol>
                           <li>
                              <p>In the navigation tree, right-click the Dimensions folder or the folder for a particular dimension.</p>
                           </li>
                           <li>
                              <p>Select <span class="bold">Maintain Dimension</span>.
                              </p>
                              <p>The Maintenance Wizard opens on the Select Objects page.</p>
                           </li>
                           <li>
                              <p>Select one or more dimensions from Available Target Objects and use the shuttle buttons to move them to Selected Target Objects.</p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Finish</span> to load the dimension values immediately.
                              </p>
                              <p>The additional pages of the wizard enable you to create a SQL script or submit the load to the Oracle job queue. To use these options, click <span class="bold">Next</span> instead.
                              </p>
                           </li>
                           <li>
                              <p>Review the <a id="d5268e2250" class="indexterm-anchor"></a>build log, which appears when the build is complete. If the log shows that errors occurred, then fix them and run the Maintenance Wizard again. 
                              </p>
                              <p>Errors are typically caused by problems in the mapping. Check for incomplete mappings or changes to the source objects. </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="creating-dimensions-and-cubes.html#GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB__CHDJBBDF">Figure 3-8</a> shows the first page of the Maintenance Wizard. Only the Product dimension has been selected for maintenance. All the Product dimension members and attributes are fetched from the mapped relational sources.
                        </p>
                        <div class="figure" id="GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB__CHDJBBDF">
                           <p class="titleinfigure">Figure 3-8 Loading Dimension Values into the Product Dimension</p><img width="338" src="img/maintwiz_obj.gif" alt="Description of Figure 3-8 follows" title="Description of Figure 3-8 follows" longdesc="img_text/maintwiz_obj.html"><br><a href="img_text/maintwiz_obj.html">Description of "Figure 3-8 Loading Dimension Values into the Product Dimension"</a></div>
                        <!-- class="figure" -->
                        <p><a href="creating-dimensions-and-cubes.html#GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB__CJAEJHJH">Figure 3-9</a> shows the Maintenance log for a dimension displayed by Analytic Workspace Manager. It refreshes throughout the build to provide you with the most up-to-date information.
                        </p>
                        <div class="figure" id="GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB__CJAEJHJH">
                           <p class="titleinfigure">Figure 3-9 Maintenance Log for the Product Dimension</p><img width="491" src="img/dim_log.gif" alt="Description of Figure 3-9 follows" title="Description of Figure 3-9 follows" longdesc="img_text/dim_log.html"><br><a href="img_text/dim_log.html">Description of "Figure 3-9 Maintenance Log for the Product Dimension"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9442"></a><a id="OLAUG9144"></a><div class="props_rev_3"><a id="GUID-D01F4099-3CEE-43FE-AD70-56B886225C6C" name="GUID-D01F4099-3CEE-43FE-AD70-56B886225C6C"></a><h4 id="OLAUG-GUID-D01F4099-3CEE-43FE-AD70-56B886225C6C" class="sect4"><span class="enumeration_section">3.4.9 </span>Displaying the Dimension View
                  </h4>
                  <div>
                     <p>The Maintenance Wizard automatically generates relational views of dimensions and hierarchies. <a href="querying-dimensional-objects.html#GUID-D5DCEB00-B14B-4AC9-A9BD-05FB72B942BB"> Querying Dimensional Objects</a> describes these views and explains how to query them.
                     </p>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-D01F4099-3CEE-43FE-AD70-56B886225C6C__CJAJIABH">Figure 3-10</a> shows the description of the relational view of the Product Primary hierarchy. You can view the data on the Data tab.
                     </p>
                     <div class="figure" id="GUID-D01F4099-3CEE-43FE-AD70-56B886225C6C__CJAJIABH">
                        <p class="titleinfigure">Figure 3-10 Product Primary Hierarchy View</p><img width="353" src="img/prod_hierview.gif" alt="Description of Figure 3-10 follows" title="Description of Figure 3-10 follows" longdesc="img_text/prod_hierview.html"><br><a href="img_text/prod_hierview.html">Description of "Figure 3-10 Product Primary Hierarchy View"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="OLAUG9443"></a><a id="OLAUG9143"></a><div class="props_rev_3"><a id="GUID-C7A844C2-39CF-47FF-B3D0-D51462747665" name="GUID-C7A844C2-39CF-47FF-B3D0-D51462747665"></a><h4 id="OLAUG-GUID-C7A844C2-39CF-47FF-B3D0-D51462747665" class="sect4"><span class="enumeration_section">3.4.10 </span>Displaying the Default Hierarchy
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e2389" class="indexterm-anchor"></a><a id="d5268e2391" class="indexterm-anchor"></a>After loading a dimension, you can display the default hierarchy.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C7A844C2-39CF-47FF-B3D0-D51462747665__GUID-5D12EAA8-E214-4729-BAB8-F7895620F2C8">To display the default hierarchy:</p>
                        <ol>
                           <li>
                              <p>In the navigation tree, right-click the name of a dimension.</p>
                           </li>
                           <li>
                              <p>Select <span class="bold">View Data</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="creating-dimensions-and-cubes.html#GUID-C7A844C2-39CF-47FF-B3D0-D51462747665__CHDDJIAD">Figure 3-11</a> shows the Primary hierarchy of the Product dimension.
                        </p>
                        <div class="figure" id="GUID-C7A844C2-39CF-47FF-B3D0-D51462747665__CHDDJIAD">
                           <p class="titleinfigure">Figure 3-11 Displaying the Product Primary Hierarchy</p><img width="198" src="img/product_dim.gif" alt="Description of Figure 3-11 follows" title="Description of Figure 3-11 follows" longdesc="img_text/product_dim.html"><br><a href="img_text/product_dim.html">Description of "Figure 3-11 Displaying the Product Primary Hierarchy"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OLAUG9444"></a><a id="OLAUG9145"></a><div class="props_rev_3"><a id="GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3" name="GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3"></a><h3 id="OLAUG-GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3" class="sect3"><span class="enumeration_section">3.5 </span>Creating Cubes
               </h3>
               <div>
                  <p><a id="d5268e2469" class="indexterm-anchor"></a>Cubes are informational objects that identify measures with the exact same dimensions and thus are candidates for being processed together at all stages: data loading, aggregation, storage, and querying.
                  </p>
                  <p><a id="d5268e2475" class="indexterm-anchor"></a>Cubes define the shape of your business measures. They are defined by a set of ordered dimensions. The dimensions form the edges of a cube, and the measures are the cells in the body of the cube. 
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3__GUID-3B4442E9-C47A-4522-B472-EB12D9C6EA9A">To create a cube:</p>
                     <ol>
                        <li>
                           <p>Expand the folder for the analytic workspace. </p>
                        </li>
                        <li>
                           <p>Right-click <span class="bold">Cubes</span>, then select <span class="bold">Create Cube</span>. 
                           </p>
                           <p>The Create Cube dialog box appears. </p>
                        </li>
                        <li>
                           <p>On the General tab, enter a name for the cube and select its dimensions.</p>
                           <p>Select <span class="bold">Enable SQL Expressions</span> to allow Analytic Workspace Manager to create additional calculated measures as needed in processing a calculated measure. Enabling SQL expressions is especially useful if you are using the Oracle Business Intelligence Enterprise Edition (OBIEE) Plug-in for Analytic Workspace Manager to export the cube to OBIEE.
                           </p>
                        </li>
                        <li>
                           <p>On the Aggregation tab, click the Rules subtab and select an aggregation method for each dimension. If the cube uses multiple methods, then you may need to specify the order in which the dimensions are aggregated to get the desired results.</p>
                           <p>You can ignore the bottom of the tab, unless you want to exclude a hierarchy from the aggregation.</p>
                           <p><a id="d5268e2512" class="indexterm-anchor"></a>For a measure dimension, the aggregation operator is non-additive.
                           </p>
                        </li>
                        <li>
                           <p>If you run the advisors after mapping the cube, Oracle OLAP can determine the best partitioning and storage options. Alternatively, to define these options yourself, complete the Partitioning and Storage tabs before creating the cube.</p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Create</span>. The cube appears as a subfolder under <span class="bold">Cubes</span>.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <p><a id="d5268e2530" class="indexterm-anchor"></a><a href="creating-dimensions-and-cubes.html#GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3__CHDJJDIC">Figure 3-12</a> shows the Rules subtab for the Units cube with the list of operators displayed.
                  </p>
                  <div class="infoboxnotealso" id="GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3__GUID-9A15972D-56A0-47BA-936B-528057017E43">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="advanced-aggregations.html#GUID-4518CB7B-25A7-4C43-B2FB-EFFAC931C192">Aggregation Operators</a>"</span> for descriptions of the aggregation operators.
                     </p>
                  </div>
                  <div class="figure" id="GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3__CHDJJDIC">
                     <p class="titleinfigure">Figure 3-12 Selecting an Aggregation Operator</p><img width="462" src="img/cube_rules.gif" alt="Description of Figure 3-12 follows" title="Description of Figure 3-12 follows" longdesc="img_text/cube_rules.html"><br><a href="img_text/cube_rules.html">Description of "Figure 3-12 Selecting an Aggregation Operator"</a></div>
                  <!-- class="figure" -->
               </div><a id="OLAUG9445"></a><a id="OLAUG9146"></a><div class="props_rev_3"><a id="GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B" name="GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B"></a><h4 id="OLAUG-GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B" class="sect4"><span class="enumeration_section">3.5.1 </span>Creating Measures
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e2598" class="indexterm-anchor"></a>Measures store the facts collected about your business. Each measure belongs to a particular cube, and thus shares particular characteristics with other measures in the cube, such as the same dimensions. The default characteristics of a measure are inherited from the cube.
                        </p>
                        <div class="infoboxnote" id="GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B__GUID-B639198A-C003-44F4-913B-D40EF881F4AA">
                           <p class="notep1">Note:</p>
                           <p>The cube for a measure dimension has only one measure, which Analytic Workspace Manager creates automatically.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B__GUID-AFDDA45A-754E-4951-9C07-2A182A194FFA">To create a measure:</p>
                        <ol>
                           <li>
                              <p>Expand the folder for the cube that has the dimensions of the measure. </p>
                           </li>
                           <li>
                              <p>Right-click <span class="bold">Measures</span>, then select <span class="bold">Create Measure</span>.
                              </p>
                              <p>The Create Measure dialog box appears. </p>
                           </li>
                           <li>
                              <p>On the General tab, enter a name for the measure.</p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Create</span>. 
                              </p>
                              <p>The measure appears in the navigation tree as an item in the Measures folder.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="creating-dimensions-and-cubes.html#GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B__CHDCDCEH">Figure 3-13</a> shows the General tab of the Create Measure dialog box.
                        </p>
                        <div class="figure" id="GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B__CHDCDCEH">
                           <p class="titleinfigure">Figure 3-13 Creating the Sales Measure</p><img width="219" src="img/meas_gen.gif" alt="Description of Figure 3-13 follows" title="Description of Figure 3-13 follows" longdesc="img_text/meas_gen.html"><br><a href="img_text/meas_gen.html">Description of "Figure 3-13 Creating the Sales Measure"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9446"></a><a id="OLAUG9447"></a><a id="OLAUG9448"></a><a id="OLAUG9449"></a><a id="OLAUG9576"></a><a id="OLAUG9450"></a><a id="OLAUG9451"></a><a id="OLAUG9147"></a><div class="props_rev_3"><a id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400" name="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400"></a><h4 id="OLAUG-GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400" class="sect4"><span class="enumeration_section">3.5.2 </span>Mapping Cubes
                  </h4>
                  <div>
                     <p><a id="d5268e2708" class="indexterm-anchor"></a><a id="d5268e2712" class="indexterm-anchor"></a><a id="d5268e2716" class="indexterm-anchor"></a>You use the same interface to map cubes as you did to map dimensions, as described in <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-8C11AAE4-41E7-4202-AEBA-C2B0D3E7C505">Mapping Dimensions</a>"</span>. You can map a cube directly to a single fact table, or you can create more complex mappings using the OLAP expression syntax, which supports expressions, join conditions, and filters.
                     </p>
                     <p>Although the dimension columns in a fact table typically contain only key values at the detail level, you can also map cubes to summary tables that contain the values from multiple levels. For example, a Time column might contain days, months, quarters, and years; a Geography column might contain cities, states, and countries. When a build rolls up the data in the cube from the detail level, the calculated values overwrite the loaded summary values, thereby correcting any inconsistencies.</p>
                     <div class="section" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__CIHFEABI">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-7E2251FD-59FA-4D56-A44F-8C1538057E68">Data Types</p>
                     </div>
                     <!-- class="section" -->
                     <p>You can map cubes and measures to columns having these SQL data types:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>NUMBER</p>
                        </li>
                        <li>
                           <p>INTEGER </p>
                        </li>
                        <li>
                           <p>DECIMAL </p>
                        </li>
                        <li>
                           <p>BINARY_FLOAT </p>
                        </li>
                        <li>
                           <p>BINARY_DOUBLE </p>
                        </li>
                        <li>
                           <p>VARCHAR2 </p>
                        </li>
                        <li>
                           <p>NVARCHAR2 </p>
                        </li>
                        <li>
                           <p>CHAR </p>
                        </li>
                        <li>
                           <p>NCHAR </p>
                        </li>
                        <li>
                           <p>DATE </p>
                        </li>
                        <li>
                           <p>TIMESTAMP </p>
                        </li>
                        <li>
                           <p>TIMESTAMP WITH TIMEZONE </p>
                        </li>
                        <li>
                           <p>TIMESTAMP WITH LOCAL TIMEZONE </p>
                        </li>
                        <li>
                           <p>INTERVAL YEAR TO MONTH </p>
                        </li>
                        <li>
                           <p>INTERVAL DAY TO SECOND</p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-AE121F45-3C18-48C3-BDA0-5C1DEA6E73C8">Expressions</p>
                     </div>
                     <!-- class="section" -->
                     <p>You can use the OLAP expression syntax when mapping cubes in the tabular view. This capability enables you to perform tasks like these as part of data maintenance, without any intermediate staging of the data:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Perform calculations on the relational data using any combination of functions and operators available in the OLAP expression syntax.</p>
                        </li>
                        <li>
                           <p>Create measures that are more aggregate than their relational sources. For example, suppose the Time dimension has columns for Day, Month, Quarter, and Year, and the fact table for Sales is related to Time by the Day foreign key column. In a basic mapping, you would store data in the cube at the Day level. However, you could aggregate it to the Month level during the data refresh. Using a technique called one-up mapping, you would map the cube to the Month column for Time, and specify a join between the dimension table and the fact table on the Day columns. </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-A7BC7ED0-D644-43E2-B83A-E946860356E4">
                        <p class="notep1">Note:</p>
                        <p>You cannot map a measure dimension to an expression. You must map it to a column.</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-6B5CB611-975A-4689-9861-819F817B2F74">Join Conditions</p>
                     </div>
                     <!-- class="section" -->
                     <p>In the tabular view, the mapping for each dimension includes a join condition. In the basic case where you are mapping the foreign keys in a fact table to the primary keys in the related dimension tables, you can leave the join condition blank. Analytic Workspace Manager derives this information from the relational source tables when you save the mapping. </p>
                     <p>For example, Analytic Workspace Manager provides this join condition for the <code class="codeph">TIME</code> dimension in the <code class="codeph">UNITS_CUBE</code> mapping: 
                     </p><pre class="oac_no_warn" dir="ltr">GLOBAL.TIME_DIM.MONTH_ID = GLOBAL.UNITS_FACT.MONTH_ID
</pre><div class="infoboxnote" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-FF7B5686-6DBA-4C27-BFE9-74F31E8D91CE">
                        <p class="notep1">Note:</p>
                        <p>The join condition for a measure dimension must be a simple equijoin.</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-FA042E80-AC2C-4CFD-859D-CF48874530AB">Filters</p>
                     </div>
                     <!-- class="section" -->
                     <p>A filter applies a <code class="codeph">WHERE</code> clause to the query that loads data from the relational source into the cube. You can use a filter to limit the rows to those matching a certain condition. This filter restricts the data to the year 2007:
                     </p><pre class="oac_no_warn" dir="ltr">GLOBAL.UNITS_FACT.MONTH_ID LIKE '2007%'
</pre><p>You can also use a filter to join two or more tables containing the measures. This filter joins the <code class="codeph">UNITS_FACT</code> and <code class="codeph">PRICE_FACT</code> tables in the Global schema on the Time (<code class="codeph">MONTH_ID</code>) and Product (<code class="codeph">ITEM_ID</code>) dimensions:
                     </p><pre class="oac_no_warn" dir="ltr">GLOBAL.PRICE_FACT.MONTH_ID=GLOBAL.UNITS_FACT.MONTH_ID AND GLOBAL.PRICE_FACT.ITEM_ID=GLOBAL.UNITS_FACT.ITEM_ID</pre><div class="section" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__CJAGAJDG">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-A10DF20C-2CEF-47B3-9248-4ECB4AFADA95">Aggregate Functions</p>
                     </div>
                     <!-- class="section" -->
                     <p><a id="d5268e2844" class="indexterm-anchor"></a><a id="d5268e2846" class="indexterm-anchor"></a><a id="d5268e2848" class="indexterm-anchor"></a><a id="d5268e2850" class="indexterm-anchor"></a><a id="d5268e2852" class="indexterm-anchor"></a><a id="d5268e2854" class="indexterm-anchor"></a>The aggregate function specifies how the fact table data is loaded into the cube. You select an aggregate function from the Group By list. The aggregate functions are the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>SUM</p>
                        </li>
                        <li>
                           <p>AVG</p>
                        </li>
                        <li>
                           <p>MAX</p>
                        </li>
                        <li>
                           <p>MIN</p>
                        </li>
                        <li>
                           <p>COUNT</p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-BBFBA157-8521-440F-BCD8-E3B2B2FF30E3">To map a cube:</p>
                        <ol>
                           <li>
                              <p>In the navigation tree, expand the cube folder and click <span class="bold">Mappings</span>. 
                              </p>
                              <p>The Mapping window contains a schema navigation tree on the left and a mapping table for the cube and its dimensions. This is the tabular view. </p>
                              <p>The level of a dimension from which values are aggregated is indicated by the symbol <img src="img/sigma_up.gif" width="21" alt="Sigma Up Arrow" title="Sigma Up Arrow">. You specify the level in the Aggregate From Level column on the Rules subtab of the Aggregation tab of the property sheet of a cube.
                              </p>
                           </li>
                           <li>
                              <p>To enlarge the Mapping window, drag the divider to the left.</p>
                           </li>
                           <li>
                              <p>In the schema tree, expand the tables, views, or synonyms that contain the data for the measures. </p>
                           </li>
                           <li>
                              <p>Drag-and-drop the source columns onto the appropriate cells in the mapping table for the cube. </p>
                              <p>Map a measure dimension to the measure dimension fact view. See <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201">Creating Measure Dimensions</a>"</span> for information on creating the measure dimension fact view. From the measure dimension fact view columns, specify <code class="codeph">MEASURE_VALUE</code> as the source column for the measure of the cube and specify <code class="codeph">MEASURE_DIM</code> as the source column for the measure dimension of the cube.
                              </p>
                           </li>
                           <li>
                              <p><span class="italic">Optional</span>: To see the SQL statements for the mapping, click <span class="bold">Show SQL</span>. You can save the SQL to a file or to the clipboard.
                              </p>
                           </li>
                           <li>
                              <p>After you have mapped all dimensions and measures, click <span class="bold">Apply</span>.
                              </p>
                           </li>
                           <li>
                              <p>Drag the divider back to the right to reduce the size of the Mapping window. </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <p><a href="creating-dimensions-and-cubes.html#GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__BGBEHADB">Figure 3-14</a> shows the mapping canvas with the Units cube mapped to columns in the <code class="codeph">UNITS_FACT</code> table. After you save the mappings, Analytic Workspace Manager provides the join conditions for base-level mappings such as the ones shown here.
                     </p>
                     <div class="figure" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__BGBEHADB">
                        <p class="titleinfigure">Figure 3-14 Units Cube Mapped in the Tabular View</p><img src="img/map_cube.gif" width="449" alt="Description of Figure 3-14 follows" title="Description of Figure 3-14 follows" longdesc="img_text/map_cube.html"><br><a href="img_text/map_cube.html">Description of "Figure 3-14 Units Cube Mapped in the Tabular View"</a></div>
                     <!-- class="figure" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-9738F411-45B9-4A8B-80C5-B5925D15D683">To calculate the facts of a measure as they are loaded into a cube:</p>
                        <ol>
                           <li>
                              <p>Create the cube.</p>
                           </li>
                           <li>
                              <p>Map all dimensions and measures to the source tables.</p>
                           </li>
                           <li>
                              <p>Edit the mapping of the measure to include a calculation in the OLAP expression syntax.</p>
                              <p>For example, you might change <code class="codeph">UNITS_FACT.SALES</code> to <code class="codeph">UNITS_FACT.SALES*1.06</code>.
                              </p>
                              <p>You can use row expressions, column expressions, and conditions, but not nested SQL queries. </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-DAEC0AAB-4C7B-4253-A546-59427A777C29">To map a cube above the detail level:</p>
                        <ol>
                           <li>
                              <p>Create the cube dimensions with the desired levels and map them to the source dimension table. </p>
                           </li>
                           <li>
                              <p>Create the cube and its measures.</p>
                           </li>
                           <li>
                              <p>Map each measure to its source column in the fact table. </p>
                           </li>
                           <li>
                              <p>For dimensions that are not being consolidated, map the detail level to its source column in the fact table, the same as you would in a basic cube mapping. </p>
                           </li>
                           <li>
                              <p>For dimensions being consolidated:</p>
                              <ol type="a">
                                 <li>
                                    <p>Map the dimension to the appropriate column in the dimension table, not to the fact table. In the previous scenario, you would map the Month level of the Time dimension to the Month column of the Time dimension table. For example, you would map Month to time_dim.month_column. </p>
                                 </li>
                                 <li>
                                    <p>Enter a join condition between the fact table and the dimension table at the detail level. For example, <code class="codeph">time_dim.day_key = fact_tbl.day_foreign_key</code>. 
                                    </p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-85CF7FF3-91DE-48B8-B466-B98AA5062828">To map measures to different tables:</p>
                        <ol>
                           <li>
                              <p>Create the cube dimensions with the desired levels and map them to the source dimension table. </p>
                           </li>
                           <li>
                              <p>Create the cube and its measures.</p>
                           </li>
                           <li>
                              <p>Map each measure to its source column in the appropriate table.</p>
                           </li>
                           <li>
                              <p>Map the detail level of each of the dimensions to its source column in each of the tables. When you drop the additional source column names, you are asked whether to add or replace the existing mapping. Select <span class="bold">Add</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-C1D9C9AF-80DE-422C-B3EE-E35454B23081">
                        <p class="titleinexample">Example 3-2 Mapping Measures to Different Tables</p>
                        <p>This example maps the two measures of a cube to columns in two different fact tables. The data for <code class="codeph">UNIT_PRICE</code> is in the <code class="codeph">UNITS_FACT</code> table, and the data for <code class="codeph">UNITS_SOLD</code> is in the <code class="codeph">PRICE_FACT</code> table. The following mapping identifies the dimension keys in both tables for <code class="codeph">MONTH</code> and <code class="codeph">PRODUCT</code>.
                        </p><pre class="oac_no_warn" dir="ltr">UNIT_PRICE: GLOBAL.PRICE_FACT.UNIT_PRICE
UNITS_SOLD: GLOBAL.UNITS_FACT.UNITS
MONTH:      GLOBAL.PRICE_FACT.MONTH_ID
            GLOBAL.UNITS_FACT.MONTH_ID
PRODUCT:    GLOBAL.PRICE_FACT.ITEM_ID
            GLOBAL.UNITS_FACT.ITEM_ID
</pre><p>The next example maps one measure of a cube to columns in two different fact tables. The data for North America is in the <code class="codeph">AMERICA</code> table, and the data for Europe is in the <code class="codeph">EMEA</code> table. The following mapping for the <code class="codeph">UNITS_SOLD</code> measure of <code class="codeph">UNION_CUBE</code> creates a union of the two fact columns.
                        </p><pre class="oac_no_warn" dir="ltr">UNITS_SOLD: GLOBAL.AMERICA.UNITS
            GLOBAL.EMEA.UNITS
TIME:       GLOBAL.AMERICA.MONTH_ID
            GLOBAL.EMEA.MONTH_ID
CHANNEL:    GLOBAL.AMERICA.CHANNEL_ID
            GLOBAL.EMEA.CHANNEL_ID
CUSTOMER:   GLOBAL.AMERICA.SHIP_TO_ID
            GLOBAL.EMEA.SHIP_TO_ID
PRODUCT:    GLOBAL.AMERICA.ITEM_ID
            GLOBAL.EMEA.ITEM_ID</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLAUG9577"></a><a id="OLAUG9148"></a><div class="props_rev_3"><a id="GUID-882085CC-9872-42EA-803D-4735CAD6F44D" name="GUID-882085CC-9872-42EA-803D-4735CAD6F44D"></a><h4 id="OLAUG-GUID-882085CC-9872-42EA-803D-4735CAD6F44D" class="sect4"><span class="enumeration_section">3.5.3 </span>Partitioning a Cube
                  </h4>
                  <div>
                     <p><a id="d5268e3113" class="indexterm-anchor"></a><a id="d5268e3117" class="indexterm-anchor"></a><a id="d5268e3121" class="indexterm-anchor"></a>Partitioning is a method of physically storing the measures in a cube. It improves the performance of large measures in the following ways:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Improves scalability by keeping data structures small. Each partition functions like a smaller measure. </p>
                        </li>
                        <li>
                           <p>Keeps the working set of data smaller both for queries and maintenance, since the relevant data is stored together. </p>
                        </li>
                        <li>
                           <p>Enables parallel aggregation during data maintenance. Each partition can be aggregated by a separate process. </p>
                        </li>
                        <li>
                           <p>Simplifies removal of old data from storage. Old partitions can be dropped, and new partitions can be added.</p>
                        </li>
                     </ul>
                     <p>The number of partitions affects the database resources that can be allocated to loading and aggregating the data in a cube. Partitions can be aggregated simultaneously when sufficient resources have been allocated.</p>
                     <p>You can select multiple hierarchies and multiple levels of a hierarchy for partitioning.</p>
                     <p>You select partitions and specify properties of them on the Partitioning tab of the property sheet for a cube. You can also view information about the partitions to help you decide on a partitioning strategy.</p>
                     <div class="infoboxnote" id="GUID-882085CC-9872-42EA-803D-4735CAD6F44D__GUID-E7322FD7-28F0-412E-9091-52B4059B9C49">
                        <p class="notep1">Note:</p>
                        <p>Cubes are partitioned by default.</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-882085CC-9872-42EA-803D-4735CAD6F44D__GUID-12DE42D0-2B62-40CD-9515-EA82221EC5E9">To select partitions:</p>
                        <ol>
                           <li>
                              <p>In the navigation tree, select a cube.</p>
                           </li>
                           <li>
                              <p>In the property sheet, select the Partitioning tab.</p>
                              <p>The Partitioning tab appears, as shown in <a href="creating-dimensions-and-cubes.html#GUID-882085CC-9872-42EA-803D-4735CAD6F44D__CJAHBGJC">Figure 3-15</a>.
                              </p>
                           </li>
                           <li>
                              <p>Select <span class="bold">Partition Cube</span> and the Select Partitions subtab.
                              </p>
                           </li>
                           <li>
                              <p>Complete the Select Partitions subtab.</p>
                           </li>
                           <li>
                              <p><span class="italic">Optional</span>: To view information about the partitions, select the Partition Member Analysis subtab.
                              </p>
                           </li>
                           <li>
                              <p>To apply the partitioning to the cube, click <span class="bold">Apply</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="figure" id="GUID-882085CC-9872-42EA-803D-4735CAD6F44D__CJAHBGJC">
                        <p class="titleinfigure">Figure 3-15 Selecting Partitions</p><img width="399" src="img/select_partitions.gif" alt="Description of Figure 3-15 follows" title="Description of Figure 3-15 follows" longdesc="img_text/select_partitions.html"><br><a href="img_text/select_partitions.html">Description of "Figure 3-15 Selecting Partitions"</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-882085CC-9872-42EA-803D-4735CAD6F44D__GUID-651C3BCB-773C-4E08-B6C9-3276E1E2C9B1">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="creating-dimensions-and-cubes.html#GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95">Selecting Partitions</a></p>
                           </li>
                           <li>
                              <p><a href="creating-dimensions-and-cubes.html#GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD">Analyzing Partition Members</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="OLAUG9579"></a><a id="OLAUG9580"></a><a id="OLAUG9581"></a><a id="OLAUG9582"></a><a id="OLAUG9583"></a><a id="OLAUG9584"></a><a id="OLAUG9578"></a><div class="props_rev_3"><a id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95" name="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95"></a><h5 id="OLAUG-GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95" class="sect5"><span class="enumeration_section">3.5.3.1 </span>Selecting Partitions
                     </h5>
                     <div>
                        <p>You select the dimension and levels to be used for partitioning on the Select Partitions subtab. This section describes the following choices you can make on the subtab.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-88837D84-09ED-4D15-95F9-8080B0E7496B">Dimension</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>A dimension for partitioning the cube. The dimension must have at least one level-based hierarchy. In developing a partitioning strategy, you typically want the members to be distributed evenly, such that each partition has about the same amount of data as the others, to support the best performance. You can switch among dimensions without losing your selections in Aggregation Hierarchies, and so you can freely explore your data. By default, partitions are created on a time dimension.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-1290D4A3-B119-4883-A753-B8197EA0C907">Aggregation Hierarchies</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>From the hierarchies and their levels for the selected dimension, you select the levels for partitioning. If the dimension has multiple hierarchies and you are partitioning on only one of them, choose the one that has the most members; it should be defined as the default hierarchy. After you make a selection, brackets enclose the levels that will be stored in the same partition.</p>
                           <p>Each dimension member at the selected level is stored in a separate partition, along with its descendants. Any dimension members that are at higher levels or are not in the hierarchy are stored together, unless you select multiple levels for partitioning.</p>
                           <p>Choose the levels with care to distribute the data evenly across the partitions. For example, if the time dimension has 10 years of data at the year, quarter, month, and day levels, then you might partition at the quarter level. This choice creates 40 partitions, one for each quarter and its descendants (months and days). The 10 members at the year level are stored together in a separate partition. If the data is very sparse, then you might partition by year instead of quarter.</p>
                           <p>Another example is a time dimension with two hierarchies, calendar and fiscal, with month and day levels in both hierarchies. In this scenario, you might partition on the month, calendar year, and fiscal year levels.</p>
                           <p>The goal is to create partitions that fit in memory, which optimizes performance. The more memory your computer has, the larger the partitions can be and still achieve this goal.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-B8BB1DC9-A90B-4E58-B112-FA4031C0148D">Order Hierarchies</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>You can change the aggregation order of the hierarchies for the selected dimension.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-6BA2D4DF-3425-422A-9672-3683E9E0CE2A">Clear Selections</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>You can delete all hierarchy selections from the current display. Any selected hierarchies in other dimensions are unaffected.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-ACFD4CC0-EB57-4729-BCA6-6A7A104859A8">Edit the Precompute Values</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>You can edit the percentage of values that are calculated and stored during data maintenance. The remaining members are calculated on demand in response to a query. In general, you should precompute the values that are queried most frequently.</p>
                           <p>A value of 0 does not create any aggregate values; they are calculated at run-time to provide the answer sets to queries. The result of 0% pre-aggregation is the fastest maintenance, the least storage space, but the slowest query response time. A value of 100 creates all of the aggregate values, which are simply fetched in response to queries. The result of 100% pre-aggregation is the longest maintenance, the most storage space, but the fastest query response time. Most DBAs choose values between these two extremes to balance the performance requirements for queries with the limitations of a data maintenance window. </p>
                           <p>A value of 1 only creates 1% of the aggregate values, but also creates the data structures for storing and tracking the aggregates. Thus, the amount of time to calculate this small percentage is correspondingly longer. </p>
                           <p>You may want to adjust the percentages over time to balance runtime performance with maintenance restrictions on time and disk space. </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="bold">Partition Order</span>: The order in which the partitions are aggregated.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Partition Name</span>: Name assigned to the partition.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Partition Includes</span>: Levels included in the partition.
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d5268e3320" class="indexterm-anchor"></a><a id="d5268e3324" class="indexterm-anchor"></a><span class="bold">Precompute</span>: The percentage of precomputed values in this partition. You can edit this value unless Disable Editing of Cube Precompute Values is selected in the Configuration dialog box.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-3D01C0D0-6217-438F-8F2A-CFCA6CFDFBFD">Automatically Manage Partition Order</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>You can enable Oracle OLAP to determine the optimal aggregation order. Do <span class="italic">not</span> select this option when the aggregation order changes the results. Order is important for some aggregation operators, such as Average, and when a cube uses multiple aggregation methods, such as Hierarchical Last Member for Time and Sum for all other dimensions.
                           </p>
                           <p><a id="d5268e3342" class="indexterm-anchor"></a><a id="d5268e3346" class="indexterm-anchor"></a>This option appears only when the Show Automatic Partitioning Order Check Box is selected in the Analytic Workspace Manager Configuration dialog box.
                           </p>
                           <div class="infoboxnotealso" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-C6BE3F5A-9BC0-42DD-B650-5E7A64F29517">
                              <p class="notep1">See Also:</p>
                              <p></p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="advanced-aggregations.html#GUID-2A72F422-900A-4CF7-B0E6-EC78F139B70C">When Does Aggregation Order Matter?</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9586"></a><a id="OLAUG9587"></a><a id="OLAUG9588"></a><a id="OLAUG9585"></a><div class="props_rev_3"><a id="GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD" name="GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD"></a><h5 id="OLAUG-GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD" class="sect5"><span class="enumeration_section">3.5.3.2 </span>Analyzing Partition Members
                     </h5>
                     <div>
                        <p>The Partition Member Analysis subtab shows how the members of the selected dimension are distributed among the partitions. Use this information to create a partitioning strategy with approximately an even number of dimension members in each partition. </p>
                        <p>The information appears in tabular and graphic formats.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD__GUID-5941EC29-5F57-407A-8716-6223ACA69DB5">Table</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>The table provides this information about the specified partitions:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="bold">Partition Name</span>: Name of the partition, as shown in the <span class="bold">Select Partitions</span> subtab.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Number Partitions</span>: Number of partitions created by partitioning on the selected level.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Total Members</span>: Total number of dimension members being distributed across the partitions. This number includes the members at the level selected for partitioning and their children at levels included in the partition.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Minimum Members</span>: Minimum number of dimension members assigned to a partition.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Maximum Members</span>: Maximum number of dimension members assigned to a partition.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Average Members</span>: Average number of dimension members assigned to a partition.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Standard Deviation</span>: Amount of variation among the partitions from the average. A lower standard deviation is better than a high standard deviation.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD__GUID-BCBE4301-64D4-4A95-B650-1A5D1F44D9B6">Graph</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>The graph illustrates the partition selected in the table. It provides a visual representation of the number of members in each partition and their level in the dimension hierarchy. </p>
                           <p>A tool bar enables you to make temporary changes to the graph. The text tools are disabled. You can use these tools:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="bold">Fill Color</span>: Changes the background color surrounding the graph.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Graph Type</span>: Provides a variety of standard graph types, as described in <a href="creating-dimensions-and-cubes.html#GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD__CJAGCGHE" title="graph type descriptions">Table 3-1</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Legend</span>: Controls whether the legend is displayed.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Grid Lines</span>: Controls whether horizontal grid lines are displayed on graphs with an X/Y axis.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Gradient Effect</span>: Controls whether colored areas appear solid or with a slight variation in color.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">3-D Effect</span>: Controls whether the graph appears flat or three-dimensional.
                                 </p>
                              </li>
                           </ul>
                           <div class="tblformal" id="GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD__CJAGCGHE">
                              <p class="titleintable">Table 3-1 Partitioning Graph Types</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="Partitioning Graph Types" summary="graph type descriptions" width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="21%" id="d5268e3521">Graph Type</th>
                                       <th align="left" valign="bottom" width="79%" id="d5268e3524">Usage</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3529" headers="d5268e3521 ">
                                          <p>Bar</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3529 d5268e3524 ">
                                          <p>Comparisons (default)</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3536" headers="d5268e3521 ">
                                          <p>Horizontal Bar</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3536 d5268e3524 ">
                                          <p>Comparisons</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3543" headers="d5268e3521 ">
                                          <p>Pie</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3543 d5268e3524 ">
                                          <p>Percentage or comparisons of percentages; relationship between the parts and the whole</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3550" headers="d5268e3521 ">
                                          <p>Line</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3550 d5268e3524 ">
                                          <p>Trends over time; rate of data change</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3557" headers="d5268e3521 ">
                                          <p>Area</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3557 d5268e3524 ">
                                          <p>Trends over time; rate of data change</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3564" headers="d5268e3521 ">
                                          <p>Combination</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3564 d5268e3524 ">
                                          <p>Trends over time; effect of one variable on another</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3571" headers="d5268e3521 ">
                                          <p>Scatter</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3571 d5268e3524 ">
                                          <p>Correlations of two or three measures</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3578" headers="d5268e3521 ">
                                          <p>Stock</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3578 d5268e3524 ">
                                          <p>Stock prices over time</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3585" headers="d5268e3521 ">
                                          <p>Circular</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3585 d5268e3524 ">
                                          <p>Cyclical or directional patterns</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3592" headers="d5268e3521 ">
                                          <p>Pareto</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3592 d5268e3524 ">
                                          <p>Highest and lowest contributors to a total; ranking</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3599" headers="d5268e3521 ">
                                          <p>3-D</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3599 d5268e3524 ">
                                          <p>Three-dimensional comparison</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="OLAUG9589"></a><a id="OLAUG9454"></a><a id="OLAUG9455"></a><a id="OLAUG9151"></a><div class="props_rev_3"><a id="GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2" name="GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2"></a><h4 id="OLAUG-GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2" class="sect4"><span class="enumeration_section">3.5.4 </span>Loading Data Into Cubes
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e3659" class="indexterm-anchor"></a><a id="d5268e3661" class="indexterm-anchor"></a><a id="d5268e3663" class="indexterm-anchor"></a>You load data into cubes using the same methods as dimensions. However, loading and aggregating the data for your business measures typically takes more time to complete. Unless you are developing a dimensional model using a small sample of data, you may prefer to run the build in one or more background processes.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__GUID-52E6D1E6-89A4-49FB-9043-2632EBABAA13">To load data into a cube:</p>
                        <ol>
                           <li>
                              <p>In the navigation tree, right-click the Cubes folder or the name of a particular cube.</p>
                           </li>
                           <li>
                              <p>Select <span class="bold">Maintain Cube</span>.
                              </p>
                              <p>The Maintenance Wizard opens on the Select Objects page.</p>
                           </li>
                           <li>
                              <p>Select one or more cubes from Available Target Objects and use the shuttle buttons to move them to Selected Target Objects. If the dimensions are loaded, you can omit them from Selected Target Objects.</p>
                              <p>If you click <span class="bold">Next</span>, the Data Refresh Methods page appears.
                              </p>
                           </li>
                           <li>
                              <p>The Data Refresh Methods page identifies the cubes and dimensions included in the build, the load options, sort order, refresh methods, and the cube script that defines the steps of the build.</p>
                              <p>Click <span class="bold">Help</span> for information about these choices.
                              </p>
                              <p><a href="creating-dimensions-and-cubes.html#GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CJAHEJJG">Figure 3-16</a> shows the Data Refresh Methods page.
                              </p>
                              <div class="figure" id="GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CJAHEJJG">
                                 <p class="titleinfigure">Figure 3-16 Selecting Build Options</p><img width="483" src="img/maintwiz_dataref.gif" alt="Description of Figure 3-16 follows" title="Description of Figure 3-16 follows" longdesc="img_text/maintwiz_dataref.html"><br><a href="img_text/maintwiz_dataref.html">Description of "Figure 3-16 Selecting Build Options"</a></div>
                              <!-- class="figure" -->
                              <p>If you click <span class="bold">Next</span>, the Processing Options page appears.
                              </p>
                           </li>
                           <li>
                              <p>On the Processing Options page, you can keep the default values.</p>
                              <p>If you click <span class="bold">Next</span>, the Scheduling page appears.
                              </p>
                           </li>
                           <li>
                              <p>On the Scheduling page, you can specify task processing options. You can submit the build to the Oracle job queue or create a SQL script that you can run outside of Analytic Workspace Manager. </p>
                              <p>You can also select the number of processes to dedicate to this build. The number of parallel processes is limited by the smallest of these numbers: the number of partitions in the cube, the number of processes dedicated to the build, and the setting of the <code class="codeph">JOB_QUEUE_PROCESSES</code> initialization parameter.
                              </p>
                              <p>Click <span class="bold">Help</span> for information about these choices.
                              </p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Finish</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="creating-dimensions-and-cubes.html#GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CHDFIABF">Figure 3-17</a> shows the build submitted immediately to the Oracle job queue.
                        </p>
                        <div class="figure" id="GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CHDFIABF">
                           <p class="titleinfigure">Figure 3-17 Selecting the Scheduling Options</p><img width="380" src="img/maintwiz_opt.gif" alt="Description of Figure 3-17 follows" title="Description of Figure 3-17 follows" longdesc="img_text/maintwiz_opt.html"><br><a href="img_text/maintwiz_opt.html">Description of "Figure 3-17 Selecting the Scheduling Options"</a></div>
                        <!-- class="figure" -->
                        <p><a href="creating-dimensions-and-cubes.html#GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CJABCHEA">Figure 3-18</a> shows the maintenance log displayed by Analytic Workspace Manager for a cube. The log refreshes throughout the build to provide you with the most up-to-date information. The maintenance log appears automatically for maintenance tasks that run immediately in the session. When you submit a job to the Oracle job queue, you can track its progress through the various reports in the Maintenance Reports folder: Jobs Scheduled, Jobs Running, and Jobs History. The reports in Jobs Running and Jobs History are the same as the one shown in <a href="creating-dimensions-and-cubes.html#GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CJABCHEA">Figure 3-18</a>.
                        </p>
                        <div class="figure" id="GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CJABCHEA">
                           <p class="titleinfigure">Figure 3-18 Maintenance Log for the Units Cube</p><img width="484" src="img/cube_log.gif" alt="Description of Figure 3-18 follows" title="Description of Figure 3-18 follows" longdesc="img_text/cube_log.html"><br><a href="img_text/cube_log.html">Description of "Figure 3-18 Maintenance Log for the Units Cube"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9456"></a><a id="OLAUG9152"></a><div class="props_rev_3"><a id="GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE" name="GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE"></a><h4 id="OLAUG-GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE" class="sect4"><span class="enumeration_section">3.5.5 </span>Displaying the Data in a Cube
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e3808" class="indexterm-anchor"></a><a id="d5268e3810" class="indexterm-anchor"></a>After loading a cube, you can display the data for your business measures in Analytic Workspace Manager.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE__GUID-75383387-898F-4816-8383-AFBE55ECDBFC">To display the data in a cube:</p>
                        <ol>
                           <li>
                              <p>In the navigation tree, right-click the cube.</p>
                           </li>
                           <li>
                              <p>Select <span class="bold">View Data</span> from the shortcut menu.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The Measure Data Viewer displays the selected measure in a crosstab at the top of the page and a graph at the bottom of the page. On the crosstab, you can expand and collapse the dimension hierarchies that label the rows and columns. You can also change the location of a dimension by pivoting or swapping it. If you want, you can use multiple dimensions to label the columns and rows, by nesting one dimension under another. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE__GUID-69A687D5-D731-4B8E-86F7-159D097BD9B9">To change the default display:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To pivot, drag a dimension from one location and drop it at another location, usually above or below another dimension.</p>
                           </li>
                           <li>
                              <p>To swap dimensions, drag and drop one dimension directly over another dimension, so they exchange locations.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>To make extensive changes to the selection of data, select <span class="bold">Query Builder</span> from the File menu.
                        </p>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE__CJABJDEJ">Figure 3-19</a> shows the Units cube in the Measure Viewer.
                        </p>
                        <div class="figure" id="GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE__CJABJDEJ">
                           <p class="titleinfigure">Figure 3-19 Displaying the Units Cube</p><img width="453" src="img/meas_view.gif" alt="Description of Figure 3-19 follows" title="Description of Figure 3-19 follows" longdesc="img_text/meas_view.html"><br><a href="img_text/meas_view.html">Description of "Figure 3-19 Displaying the Units Cube"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9457"></a><a id="OLAUG9153"></a><div class="props_rev_3"><a id="GUID-52A5DB08-C694-49E4-82A8-E13D6DDDBCD3" name="GUID-52A5DB08-C694-49E4-82A8-E13D6DDDBCD3"></a><h4 id="OLAUG-GUID-52A5DB08-C694-49E4-82A8-E13D6DDDBCD3" class="sect4"><span class="enumeration_section">3.5.6 </span>Displaying the Cube View Descriptions
                  </h4>
                  <div>
                     <p><a id="d5268e3905" class="indexterm-anchor"></a>The Maintenance Wizard automatically generates relational views of a cube. <a href="querying-dimensional-objects.html#GUID-D5DCEB00-B14B-4AC9-A9BD-05FB72B942BB"> Querying Dimensional Objects</a> describes these views and explains how to query them.
                     </p>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-52A5DB08-C694-49E4-82A8-E13D6DDDBCD3__CJAGABFC">Figure 3-20</a> shows the description of the relational view of the Units cube.
                     </p>
                     <div class="figure" id="GUID-52A5DB08-C694-49E4-82A8-E13D6DDDBCD3__CJAGABFC">
                        <p class="titleinfigure">Figure 3-20 Description of the Units Cube View</p><img width="344" src="img/cube_view.gif" alt="Description of Figure 3-20 follows" title="Description of Figure 3-20 follows" longdesc="img_text/cube_view.html"><br><a href="img_text/cube_view.html">Description of "Figure 3-20 Description of the Units Cube View"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div>
            </div><a id="OLAUG9154"></a><div class="props_rev_3"><a id="GUID-46D5F8CB-653A-49F3-BE97-06F33B2CAB16" name="GUID-46D5F8CB-653A-49F3-BE97-06F33B2CAB16"></a><h3 id="OLAUG-GUID-46D5F8CB-653A-49F3-BE97-06F33B2CAB16" class="sect3"><span class="enumeration_section">3.6 </span>Choosing a Data Maintenance Method
               </h3>
               <div>
                  <p><a id="d5268e3971" class="indexterm-anchor"></a><a id="d5268e3973" class="indexterm-anchor"></a>While developing a dimensional model of your data, mapping and loading each object immediately after you create it is a good idea. That way, you can detect and correct any errors that you made to the object definition or the mapping.
                  </p>
                  <p>However, in a production environment, you want to perform routine maintenance as quickly and easily as possible. For this stage, you can choose among data maintenance methods.</p>
                  <p>You can refresh all cubes using the Maintenance Wizard. This wizard enables you to refresh a cube immediately, or submit the refresh as a job to the Oracle job queue, or generate a PL/SQL script. You can run the script manually or using a scheduling utility, such as Oracle Enterprise Manager Scheduler or the <a id="d5268e3980" class="indexterm-anchor"></a><code class="codeph">DBMS_SCHEDULER</code> PL/SQL package.
                  </p>
                  <p>The generated script calls the <code class="codeph">BUILD</code> procedure of the <a id="d5268e3990" class="indexterm-anchor"></a><code class="codeph">DBMS_CUBE</code> PL/SQL package. You can modify this script or develop one from the start using this package.
                  </p>
                  <p>The data for a partitioned cube is loaded and aggregated in parallel when multiple processes have been allocated to the build. You are able to see this in the build log.</p>
                  <p>In addition, each cube can support these data maintenance methods:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Custom cube scripts</p>
                     </li>
                     <li>
                        <p>Maintenance scripts</p>
                     </li>
                     <li>
                        <p>Cube materialized views</p>
                     </li>
                  </ul>
                  <p>If you are defining cubes to replace existing materialized views, then you use the materialized views as an integral part of data maintenance. Materialized view capabilities restrict the types of analytics that can be performed by a custom cube script.</p>
                  <div class="infoboxnotealso" id="GUID-46D5F8CB-653A-49F3-BE97-06F33B2CAB16__GUID-858807EB-11A3-465B-AFB8-546F5A155B0A">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="administering-oracle-olap.html#GUID-4C50CEB3-BD42-4575-B2C6-548E7D12A0FD">Maintenance Logs</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="administering-oracle-olap.html#GUID-6CA2DE52-5019-4383-B6DB-BBC19C56B682">Parallelism</a>"</span></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="OLAUG9155"></a><div class="props_rev_3"><a id="GUID-0AB6E0EA-7814-493D-99A4-844A074A4D05" name="GUID-0AB6E0EA-7814-493D-99A4-844A074A4D05"></a><h4 id="OLAUG-GUID-0AB6E0EA-7814-493D-99A4-844A074A4D05" class="sect4"><span class="enumeration_section">3.6.1 </span>Creating and Executing Custom Cube Scripts
                  </h4>
                  <div>
                     <p><a id="d5268e4088" class="indexterm-anchor"></a>A cube script is an ordered list of steps that prepare a cube for querying. Each step represents a particular data transformation. By specifying the order in which these steps are performed, you can allow for interdependencies.
                     </p>
                     <p><a id="d5268e4092" class="indexterm-anchor"></a>You can choose from these step types:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Clear Data</span>: Clears the data from the entire cube, from selected measures, or from selected portions of the cube. You can clear just the detail data (called <span class="bold">leaves</span>) for a fast refresh, just the aggregate data, or both for a complete refresh. Clearing old data values is typically done before loading new values.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Load</span>: Loads the data from the source tables into the cube. You can load all measures in the cube or just selected measures.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Aggregation</span>: Generates aggregate values using the rules defined for the cube. You can aggregate the entire cube, selected measures, or selected portions of the cube.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Analyze</span>: Generates optimizer statistics, which can improve the performance of some types of queries. For more information, see <span class="q">"<a href="administering-oracle-olap.html#GUID-153F15E3-949E-4049-A36A-D9AC7FDD870E">Analyzing Cubes and Dimensions</a>"</span>. Generating statistics is typically done immediately after data maintenance.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">OLAP DML</span>: Executes a command or program in the OLAP DML.
                           </p>
                        </li>
                        <li>
                           <p><a id="d5268e4131" class="indexterm-anchor"></a><span class="bold">PL/SQL</span>: Executes a PL/SQL command or script. You can run a PL/SQL script, for example, at the beginning of data maintenance to initiate a refresh of the relational source tables.
                           </p>
                        </li>
                     </ul>
                     <p>If a cube is used to support advanced analytics in a cube script, then it cannot be enhanced as a cube materialized view, as described in <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C">Adding Materialized View Capability to a Cube</a>"</span>. In this case, you are responsible for detecting when the data in the cube is stale and must be refreshed.
                     </p>
                  </div><a id="OLAUG9459"></a><a id="OLAUG9458"></a><div class="props_rev_3"><a id="GUID-B8A03B51-1500-4EA0-96FE-28088F369B51" name="GUID-B8A03B51-1500-4EA0-96FE-28088F369B51"></a><h5 id="OLAUG-GUID-B8A03B51-1500-4EA0-96FE-28088F369B51" class="sect5"><span class="enumeration_section">3.6.1.1 </span>Creating Cube Scripts
                     </h5>
                     <div>
                        <div class="section">
                           <p>To create a cube script:</p>
                           <ol>
                              <li>
                                 <p>Expand the folder for a cube that is not defined as a cube materialized view.</p>
                              </li>
                              <li>
                                 <p>Right-click <span class="bold">Cube Scripts</span>, then select <span class="bold">Create Cube Script</span>.
                                 </p>
                                 <p>The Create Cube Script dialog box appears.</p>
                              </li>
                              <li>
                                 <p>On the General tab, enter a name for the cube script.</p>
                              </li>
                              <li>
                                 <p>To create a step, click <span class="bold">New Step</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Select the type of step.</p>
                                 <p>The New Step dialog box appears for that type of step.</p>
                              </li>
                              <li>
                                 <p>Complete the tabs, then click <span class="bold">OK</span>.
                                 </p>
                                 <p>The step is listed on the Cube Script General tab.</p>
                              </li>
                              <li>
                                 <p>Click <span class="bold">Create</span>.
                                 </p>
                                 <p>The cube script appears as an item in the Cube Script folder.</p>
                              </li>
                              <li>
                                 <p>To run the cube script:</p>
                                 <ol type="a">
                                    <li>
                                       <p>Right-click the cube script on the navigation tree, and select <span class="bold">Run Cube Script</span>.
                                       </p>
                                       <p>The Maintenance Wizard opens.</p>
                                    </li>
                                    <li>
                                       <p>Follow the steps of the wizard.</p>
                                    </li>
                                    <li>
                                       <p>To view the results, right-click the cube and select <span class="bold">View Data</span>.
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                           </ol>
                           <p><a href="creating-dimensions-and-cubes.html#GUID-B8A03B51-1500-4EA0-96FE-28088F369B51__CJADGECA">Figure 3-21</a> shows the Create Cube Script dialog box, in which several steps have been defined.
                           </p>
                           <div class="figure" id="GUID-B8A03B51-1500-4EA0-96FE-28088F369B51__CJADGECA">
                              <p class="titleinfigure">Figure 3-21 Creating a Cube Script</p><img width="333" src="img/cube_script.gif" alt="Description of Figure 3-21 follows" title="Description of Figure 3-21 follows" longdesc="img_text/cube_script.html"><br><a href="img_text/cube_script.html">Description of "Figure 3-21 Creating a Cube Script"</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9460"></a><div class="props_rev_3"><a id="GUID-1CE9B707-34D8-4382-A53E-ED5B520B82AC" name="GUID-1CE9B707-34D8-4382-A53E-ED5B520B82AC"></a><h5 id="OLAUG-GUID-1CE9B707-34D8-4382-A53E-ED5B520B82AC" class="sect5"><span class="enumeration_section">3.6.1.2 </span>Running a Cube Script
                     </h5>
                     <div>
                        <div class="section">
                           <p>Each cube automatically has a default cube script named <code class="codeph">LOAD_AND_AGGREGATE</code> that loads the data and aggregates it using the rules defined on the cube. You can define any number of additional scripts and designate one as the default cube script. All methods of refreshing a cube execute the default cube script. You can execute other cube scripts manually using the Maintenance Wizard.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-1CE9B707-34D8-4382-A53E-ED5B520B82AC__GUID-6DC8E63D-9ED5-4F35-829A-1F84B37E537E">To manually run a custom cube script:</p>
                           <ol>
                              <li>
                                 <p>Expand the Cube Scripts folder for the cube.</p>
                              </li>
                              <li>
                                 <p>Right-click the cube script and select <span class="bold">Run Cube Script</span> to open the Maintenance Wizard.
                                 </p>
                              </li>
                              <li>
                                 <p>Follow the steps of the Maintenance Wizard.</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-1CE9B707-34D8-4382-A53E-ED5B520B82AC__GUID-EFE5D174-038E-44D8-9E72-0ED47A5112EE">To run a custom cube script as the default script:</p>
                           <ol>
                              <li>
                                 <p>Expand the Cube Scripts folder for the cube.</p>
                              </li>
                              <li>
                                 <p>Select the cube script so the General tab appears.</p>
                              </li>
                              <li>
                                 <p>Select Default Script For This Cube and click <span class="bold">Apply</span>. 
                                 </p>
                              </li>
                              <li>
                                 <p>Open the Maintenance Wizard anywhere on the navigation tree and select the cube.</p>
                              </li>
                              <li>
                                 <p>Follow the steps of the Maintenance Wizard.</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-1CE9B707-34D8-4382-A53E-ED5B520B82AC__GUID-1C83061E-BF24-4382-A6CA-BE4ABD740F4D">To run a cube script as a step in a maintenance script:</p>
                           <ol>
                              <li>
                                 <p>Create a maintenance script.</p>
                              </li>
                              <li>
                                 <p>Add the cube script as a step.</p>
                              </li>
                              <li>
                                 <p>Run the maintenance script. </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="OLAUG9461"></a><div class="props_rev_3"><a id="GUID-C179F9C7-239B-4E79-8B9B-5DBF05EA38D0" name="GUID-C179F9C7-239B-4E79-8B9B-5DBF05EA38D0"></a><h4 id="OLAUG-GUID-C179F9C7-239B-4E79-8B9B-5DBF05EA38D0" class="sect4"><span class="enumeration_section">3.6.2 </span>Creating and Executing Maintenance Scripts
                  </h4>
                  <div>
                     <p><a id="d5268e4426" class="indexterm-anchor"></a>A maintenance script is an ordered list of steps for maintaining multiple cubes in a schema. By using a maintenance script, you can manage interdependencies among the cubes.
                     </p>
                     <p>To load and aggregate a cube or a dimension, add it as a step. For more control over the maintenance of a particular cube or dimension, either create a cube script or enter the individual steps directly into the maintenance script:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Clear Data</p>
                        </li>
                        <li>
                           <p>Load</p>
                        </li>
                        <li>
                           <p>Aggregation</p>
                        </li>
                        <li>
                           <p>Analyze</p>
                        </li>
                        <li>
                           <p>OLAP DML</p>
                        </li>
                        <li>
                           <p>PL/SQL</p>
                        </li>
                     </ul>
                     <p>These are the same steps described in <span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-0AB6E0EA-7814-493D-99A4-844A074A4D05">Creating and Executing Custom Cube Scripts</a>"</span>.
                     </p>
                  </div><a id="OLAUG9463"></a><a id="OLAUG9462"></a><div class="props_rev_3"><a id="GUID-589D3AA8-19C5-4BFD-A41B-A70176D25DCB" name="GUID-589D3AA8-19C5-4BFD-A41B-A70176D25DCB"></a><h5 id="OLAUG-GUID-589D3AA8-19C5-4BFD-A41B-A70176D25DCB" class="sect5"><span class="enumeration_section">3.6.2.1 </span>Creating Maintenance Scripts
                     </h5>
                     <div>
                        <div class="section">
                           <p>To create a maintenance script:</p>
                           <ol>
                              <li>
                                 <p>In the navigation tree, right-click Maintenance Scripts, then select <span class="bold">Create Maintenance Script</span> to display the Create Maintenance Script dialog box.
                                 </p>
                              </li>
                              <li>
                                 <p>Enter the name, labels, and description on the General tab.</p>
                              </li>
                              <li>
                                 <p>To create a new step, click <span class="bold">Add</span>, then select the type of step from the list. 
                                 </p>
                              </li>
                              <li>
                                 <p>Create additional steps as desired. You can edit, delete, or re-order the steps at any time. </p>
                              </li>
                              <li>
                                 <p>Click <span class="bold">Create</span>. The new maintenance script appears as an object in the Maintenance Scripts folder.
                                 </p>
                              </li>
                           </ol>
                           <p><a href="creating-dimensions-and-cubes.html#GUID-589D3AA8-19C5-4BFD-A41B-A70176D25DCB__CIHJIGJC">Figure 3-22</a> shows the General tab of the Create Maintenance Script dialog box.
                           </p>
                           <div class="figure" id="GUID-589D3AA8-19C5-4BFD-A41B-A70176D25DCB__CIHJIGJC">
                              <p class="titleinfigure">Figure 3-22 Creating a Maintenance Script</p><img width="450" src="img/maint_script.gif" alt="Description of Figure 3-22 follows" title="Description of Figure 3-22 follows" longdesc="img_text/maint_script.html"><br><a href="img_text/maint_script.html">Description of "Figure 3-22 Creating a Maintenance Script"</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9464"></a><div class="props_rev_3"><a id="GUID-57A60ED4-64A8-47E6-B822-AE1E84B24192" name="GUID-57A60ED4-64A8-47E6-B822-AE1E84B24192"></a><h5 id="OLAUG-GUID-57A60ED4-64A8-47E6-B822-AE1E84B24192" class="sect5"><span class="enumeration_section">3.6.2.2 </span>Running Maintenance Scripts
                     </h5>
                     <div>
                        <div class="section">
                           <p>To run a maintenance script:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Expand the Maintenance Scripts folder.</span></li>
                           <li><span>Right-click the script, then select <span class="bold">Run Maintenance Script</span>. </span></li>
                           <li><span>The Maintenance Wizard opens.</span></li>
                           <li><span>Follow the steps of the Maintenance Wizard. </span></li>
                        </ol>
                     </div>
                  </div>
               </div><a id="OLAUG9465"></a><a id="OLAUG9156"></a><div class="props_rev_3"><a id="GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C" name="GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C"></a><h4 id="OLAUG-GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C" class="sect4"><span class="enumeration_section">3.6.3 </span>Adding Materialized View Capability to a Cube
                  </h4>
                  <div>
                     <p><a id="d5268e4663" class="indexterm-anchor"></a><a id="d5268e4665" class="indexterm-anchor"></a><a id="d5268e4669" class="indexterm-anchor"></a>Oracle OLAP cubes can be enhanced with materialized view capabilities. Cubes can be incrementally refreshed through the Oracle Database materialized view subsystem, and they can serve as targets for transparent rewrite of queries against the source tables. A cube that has been enhanced in this way is called a <span class="bold">cube materialized view</span>.
                     </p>
                     <p>The OLAP dimensions associated with a cube materialized view are also defined with materialized view capabilities.</p>
                     <p>A cube must conform to these requirements, before it can be designated as a cube materialized view:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>All dimensions of the cube have at least one level and one level-based hierarchy. Ragged and skip-level hierarchies are not supported. The dimensions must be mapped.</p>
                        </li>
                        <li>
                           <p>All dimensions of the cube use the same aggregation operator, which is either <code class="codeph">SUM</code>, <code class="codeph">MIN</code>, or <code class="codeph">MAX</code>.
                           </p>
                        </li>
                        <li>
                           <p>The cube has one or more dimensions and one or more measures.</p>
                        </li>
                        <li>
                           <p>The cube is fully defined and mapped. For example, if the cube has five measures, then all five are mapped to the source tables.</p>
                        </li>
                        <li>
                           <p>The data type of the cube is <code class="codeph">NUMBER</code>, <code class="codeph">VARCHAR2</code>, <code class="codeph">NVARCHAR2</code>, or <code class="codeph">DATE</code>. 
                           </p>
                        </li>
                        <li>
                           <p><a id="d5268e4720" class="indexterm-anchor"></a>The source detail tables support dimension and rely constraints. If they have not been defined, then use the Relational Schema Advisor on the Materialized Views tab of the cube property sheet to generate a script that defines them on the detail tables.
                           </p>
                        </li>
                        <li>
                           <p>The cube is compressed.</p>
                        </li>
                        <li>
                           <p>The cube can be enriched with calculated measures, but it cannot support more advanced analytics in a cube script. </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C__GUID-822B56A9-AEAF-471D-B116-FC13D5317C76">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="administering-oracle-olap.html#GUID-59B3CDC6-6402-4E8D-BD93-9C940D603987">Cube Materialized Views</a>"</span></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C__GUID-1C51F374-F886-4907-BBBA-758E7B3FEB8F">To add materialized view capabilities:</p>
                        <ol>
                           <li>
                              <p>In the navigation tree, select a cube.</p>
                              <p>The property sheets for the cube are displayed.</p>
                           </li>
                           <li>
                              <p>Select the Materialized Views tab.</p>
                           </li>
                           <li>
                              <p>Review the checklist and, if some tests failed, fix the cause of the problem.</p>
                              <p>You cannot define a cube materialized view until the cube is valid.</p>
                           </li>
                           <li>
                              <p>For automatic refresh, complete just the top half page. For query rewrite, complete the entire page.</p>
                              <p>Click <span class="bold">Help</span> for information about the choices on this page.
                              </p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Apply</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <p>The cube materialized views appear in the same schema as the analytic workspace. A materialized view is created for the cube and each of its dimensions. Unlike traditional materialized views, cube materialized views do not use relational tables to store data; the data is stored in the backing cube. A <code class="codeph">CB$</code> prefix identifies the tables as cube materialized views. 
                     </p>
                     <p>The initial state of a new materialized view is invalid, so it does not support query rewrite until after it is refreshed. You can specify the first refresh time on the Materialized View tab of the cube, or you can run the Maintenance Wizard.</p>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C__CJAJAJFE">Figure 3-23</a> shows the Materialized View tab of the Units Cube. 
                     </p>
                     <div class="figure" id="GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C__CJAJAJFE">
                        <p class="titleinfigure">Figure 3-23 Defining a Materialized View</p><img width="453" src="img/mv.gif" alt="Description of Figure 3-23 follows" title="Description of Figure 3-23 follows" longdesc="img_text/mv.html"><br><a href="img_text/mv.html">Description of "Figure 3-23 Defining a Materialized View"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div>
            </div><a id="OLAUG9467"></a><a id="OLAUG9466"></a><div class="props_rev_3"><a id="GUID-8809C850-1D01-4D4C-848A-D98039976956" name="GUID-8809C850-1D01-4D4C-848A-D98039976956"></a><h3 id="OLAUG-GUID-8809C850-1D01-4D4C-848A-D98039976956" class="sect3"><span class="enumeration_section">3.7 </span>Supporting Multiple Languages
               </h3>
               <div>
                  <div class="section">
                     <p><a id="d5268e4833" class="indexterm-anchor"></a><a id="d5268e4835" class="indexterm-anchor"></a>A single analytic workspace can support multiple languages. This support enables users of OLAP applications and tools to view the metadata in their native languages. For example, you can provide translations for the display names of measures, cubes, and dimensions. You can also map attributes to multiple columns, one for each language.
                     </p>
                     <p>The number and choice of languages is restricted only by the database character set and your ability to provide translated text. Languages can be added or removed at any time.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8809C850-1D01-4D4C-848A-D98039976956__GUID-78DC0A38-2D55-4795-93E4-B493B7D85588">To add support for multiple languages:</p>
                     <ol>
                        <li>
                           <p>In the navigation tree, expand the folder for the analytic workspace.</p>
                        </li>
                        <li>
                           <p>Select Languages to display its property page. </p>
                        </li>
                        <li>
                           <p>On the General tab, click <span class="bold">Modify Languages</span>.
                           </p>
                        </li>
                        <li>
                           <p>On the Modify Languages dialog box, select the languages that the analytic workspace must support. Use the shuttle keys to move them to the Selected Languages box.</p>
                        </li>
                        <li>
                           <p>Click <span class="bold">OK</span> to return to the Languages property page. 
                           </p>
                        </li>
                        <li>
                           <p>Enter the translations of the various labels and descriptions. Each language has a column where you can enter this information. </p>
                        </li>
                        <li>
                           <p>For each dimension, open the Mappings window. Map the attributes to the source columns for each language.</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a href="creating-dimensions-and-cubes.html#GUID-8809C850-1D01-4D4C-848A-D98039976956__CJAEAADA">Figure 3-24</a> shows the addition of French to the analytic workspace.
                     </p>
                     <div class="figure" id="GUID-8809C850-1D01-4D4C-848A-D98039976956__CJAEAADA">
                        <p class="titleinfigure">Figure 3-24 Adding a Language</p><img width="373" src="img/lang_gen.gif" alt="Description of Figure 3-24 follows" title="Description of Figure 3-24 follows" longdesc="img_text/lang_gen.html"><br><a href="img_text/lang_gen.html">Description of "Figure 3-24 Adding a Language"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OLAUG9468"></a><a id="OLAUG9157"></a><div class="props_rev_3"><a id="GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB" name="GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB"></a><h3 id="OLAUG-GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB" class="sect3"><span class="enumeration_section">3.8 </span>Defining Measure Folders
               </h3>
               <div>
                  <div class="section">
                     <p>Measure folders organize and label groups of measures. Users may have access to several analytic workspaces or relational schemas with measures named Sales or Costs, and measure folders provide a way for applications to differentiate among them.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB__GUID-195D694E-B69E-4476-B5CE-F9DB7E985E89">To create a measure folder:</p>
                     <ol>
                        <li>
                           <p>Expand the folder for the analytic workspace.</p>
                        </li>
                        <li>
                           <p>Right-click Measure Folders, then select <span class="bold">Create Measure Folder</span> from the shortcut menu.
                           </p>
                        </li>
                        <li>
                           <p>Complete the General tab of the Create Measure Folder dialog box. </p>
                           <p>Click <span class="bold">Help</span> for specific information about these choices.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The measure folder appears in the navigation tree under Measure Folders. You can also create subfolders.</p>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB__CJAHJJAJ">Figure 3-25</a> shows creation of a measure folder.
                     </p>
                     <div class="figure" id="GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB__CJAHJJAJ">
                        <p class="titleinfigure">Figure 3-25 Creating a Measure Folder</p><img width="354" src="img/meas_folder.gif" alt="Description of Figure 3-25 follows" title="Description of Figure 3-25 follows" longdesc="img_text/meas_folder.html"><br><a href="img_text/meas_folder.html">Description of "Figure 3-25 Creating a Measure Folder"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OLAUG9158"></a><div class="props_rev_3"><a id="GUID-5A2504F6-7788-4A15-82A3-75257A80E3CA" name="GUID-5A2504F6-7788-4A15-82A3-75257A80E3CA"></a><h3 id="OLAUG-GUID-5A2504F6-7788-4A15-82A3-75257A80E3CA" class="sect3"><span class="enumeration_section">3.9 </span>Saving and Re-Creating Dimensional Objects with Object Definitions
               </h3>
               <div>
                  <p><a id="d5268e5022" class="indexterm-anchor"></a><a id="d5268e5026" class="indexterm-anchor"></a><a id="d5268e5030" class="indexterm-anchor"></a><a id="d5268e5034" class="indexterm-anchor"></a><a id="d5268e5038" class="indexterm-anchor"></a><a id="d5268e5042" class="indexterm-anchor"></a><a id="d5268e5046" class="indexterm-anchor"></a>Analytic Workspace Manager enables you to save all or part of the data model as a template. You can save a template to a file or to a table. The template contains the XML definitions of the dimensional objects, such as dimensions, levels, hierarchies, attributes, and measures. Only the metadata is saved, not the data.
                  </p>
                  <p><a id="d5268e5052" class="indexterm-anchor"></a>Template files are small, so you can easily distribute them by email or on a website, just as the templates for Global and Sales History are distributed on the Oracle website. A template saved to a table is available to any user of the database who has permission to see it. Oracle OLAP saves templates to the CUBE_TEMPLATES table.
                  </p>
                  <p>To re-create the dimensional objects, you simply identify the templates in Analytic Workspace Manager.</p>
                  <p>You can also save an analytic workspace to, or create one from, an <a href="glossary.html#GUID-DCCDAB82-483A-40D1-980F-D00095FDDAAE"><span class="xrefglossterm">EIF file</span></a>. EIF files are specially formatted files for copying analytic workspaces. They save the definitions of OLAP DML objects and optionally save the data also. 
                  </p>
                  <p>This section has the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-6EA336A3-F54A-4134-99C0-BFD010488EF4">Creating Dimensional Objects From XML Templates</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-187597AB-7351-442F-B920-360DDB03B5A8">Saving Object Definitions to XML Templates</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-7CF37AC0-2C91-420A-8A31-7DA23E0C3339">Creating Analytic Workspaces from EIF Files</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-9AC3415E-1A61-4441-8C83-EFEDCFD405E5">Saving Analytic Workspaces to EIF Files</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-5A2504F6-7788-4A15-82A3-75257A80E3CA__GUID-69B37AEA-6A68-47CA-AE0C-1144E4419161">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="creating-dimensions-and-cubes.html#GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400">Mapping Cubes</a>"</span> for information on saving the SQL statements for a mapping.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="OLAUG9590"></a><div class="props_rev_3"><a id="GUID-6EA336A3-F54A-4134-99C0-BFD010488EF4" name="GUID-6EA336A3-F54A-4134-99C0-BFD010488EF4"></a><h4 id="OLAUG-GUID-6EA336A3-F54A-4134-99C0-BFD010488EF4" class="sect4"><span class="enumeration_section">3.9.1 </span>Creating Dimensional Objects From XML Templates
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e5147" class="indexterm-anchor"></a>You can create all or part of an analytic workspace from a template.
                        </p>
                        <p><span class="bold">To create dimensional objects from a template:</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In the navigation tree, right-click Analytic Workspaces, Dimensions, Cubes, or Measure Folders.</span></li>
                        <li class="stepexpand"><span>Select <span class="bold">Create </span><span class="italic"><span class="bold">Object</span></span><span class="bold"> from Template</span> to display the Create <span class="italic">Object</span> from Template dialog box.</span></li>
                        <li class="stepexpand"><span>Select the schema in which to create the objects and click <span class="bold">OK</span>.</span></li>
                        <li class="stepexpand"><span>Complete the Create <span class="italic">Object</span> from Template dialog box.</span><div>
                              <p>To overwrite the metadata for an existing object select <span class="bold">Modify Existing Objects</span> on the Options tab.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-6EA336A3-F54A-4134-99C0-BFD010488EF4__GUID-009C8FA3-C78D-47E6-A849-A2502E3A0E52">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="administering-oracle-olap.html#GUID-127D4FD2-1E80-42BF-9AE9-314B2A3219FE">About XML Templates</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9591"></a><div class="props_rev_3"><a id="GUID-187597AB-7351-442F-B920-360DDB03B5A8" name="GUID-187597AB-7351-442F-B920-360DDB03B5A8"></a><h4 id="OLAUG-GUID-187597AB-7351-442F-B920-360DDB03B5A8" class="sect4"><span class="enumeration_section">3.9.2 </span>Saving Object Definitions to XML Templates
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e5252" class="indexterm-anchor"></a><a id="d5268e5256" class="indexterm-anchor"></a><a id="d5268e5262" class="indexterm-anchor"></a>You can save the XML descriptions of all the objects in an analytic workspace, or just selected objects, and re-create them later in the same database or in a database on another computer or platform.
                        </p>
                        <p><span class="bold">To save object definitions in an XML template:</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>In the navigation tree, right-click an analytic workspace, dimension, cube, or measure folder.</span></li>
                        <li><span>Select <span class="bold">Save </span><span class="italic"><span class="bold">Object</span></span><span class="bold"> to Template</span> to display the Save <span class="italic">Object</span> to Template dialog box.</span></li>
                        <li><span>Select <span class="bold">Save to File</span> or <span class="bold">Save to Table</span>.</span></li>
                        <li><span>Verify the selection of objects in the Object Selection tab.</span></li>
                        <li><span>To modify the use of the schema name in the template, use the Options tab.</span></li>
                        <li><span>Complete the remaining fields to identify the name and location of the saved template. You can overwrite an existing template.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-187597AB-7351-442F-B920-360DDB03B5A8__GUID-AF6382A6-B1E0-42DA-93F9-BFEEEF68D316">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="administering-oracle-olap.html#GUID-127D4FD2-1E80-42BF-9AE9-314B2A3219FE">About XML Templates</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9592"></a><div class="props_rev_3"><a id="GUID-7CF37AC0-2C91-420A-8A31-7DA23E0C3339" name="GUID-7CF37AC0-2C91-420A-8A31-7DA23E0C3339"></a><h4 id="OLAUG-GUID-7CF37AC0-2C91-420A-8A31-7DA23E0C3339" class="sect4"><span class="enumeration_section">3.9.3 </span>Creating Analytic Workspaces from EIF Files
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e5368" class="indexterm-anchor"></a>EIF files are specially formatted files for transferring dimensional objects and data.
                        </p>
                        <p><span class="bold">To create an analytic workspace from an EIF file:</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In the navigation tree, right-click Analytic Workspaces and select <span class="bold">Create Analytic Workspace From EIF File</span>.</span><div>
                              <p>The Create Analytic Workspace From EIF File dialog box appears.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Specify the directory that contains the EIF file and the name of the file, a name for the new analytic workspace and the tablespace for it, and then click <span class="bold">OK</span>.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-7CF37AC0-2C91-420A-8A31-7DA23E0C3339__GUID-C7A59229-2C67-4E2E-A937-AB5D58781004">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="administering-oracle-olap.html#GUID-B8ACC3E4-6A7D-47CF-8E48-C97343271C3E">About EIF Files</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9593"></a><div class="props_rev_3"><a id="GUID-9AC3415E-1A61-4441-8C83-EFEDCFD405E5" name="GUID-9AC3415E-1A61-4441-8C83-EFEDCFD405E5"></a><h4 id="OLAUG-GUID-9AC3415E-1A61-4441-8C83-EFEDCFD405E5" class="sect4"><span class="enumeration_section">3.9.4 </span>Saving Analytic Workspaces to EIF Files
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e5453" class="indexterm-anchor"></a><a id="d5268e5457" class="indexterm-anchor"></a>You can save, or export, an analytic workspace to an EIF file.
                        </p>
                        <p><span class="bold">To save analytic workspace objects to an EIF file:</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>In the navigation tree, right-click the analytic workspace.</span></li>
                        <li><span>Select <span class="bold">Export Analytic Workspace </span><span class="italic"><span class="bold">Object</span></span><span class="bold">To EIF File</span> to display the Export Analytic Workspace <span class="italic">Object</span> to EIF File dialog box.</span></li>
                        <li><span>Specify the directory and file name for the EIF file, then click <span class="bold">OK</span>.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-9AC3415E-1A61-4441-8C83-EFEDCFD405E5__GUID-FF409633-9B42-4D43-84B0-FEF89F830CC0">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="administering-oracle-olap.html#GUID-B8ACC3E4-6A7D-47CF-8E48-C97343271C3E">About EIF Files</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OLAUG9594"></a><div class="props_rev_3"><a id="GUID-04145C1A-FBCA-4EC3-BCD2-4547381D9A5B" name="GUID-04145C1A-FBCA-4EC3-BCD2-4547381D9A5B"></a><h3 id="OLAUG-GUID-04145C1A-FBCA-4EC3-BCD2-4547381D9A5B" class="sect3"><span class="enumeration_section">3.10 </span>Copying and Pasting Dimensional Objects
               </h3>
               <div>
                  <p><a id="d5268e5549" class="indexterm-anchor"></a><a id="d5268e5553" class="indexterm-anchor"></a><a id="d5268e5557" class="indexterm-anchor"></a><a id="d5268e5561" class="indexterm-anchor"></a><a id="d5268e5565" class="indexterm-anchor"></a>You can copy a dimensional object and paste it in an appropriate location. The analytic workspace objects that you can copy are the following.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Analytic workspace</p>
                     </li>
                     <li>
                        <p>Dimension</p>
                     </li>
                     <li>
                        <p>Cube</p>
                     </li>
                     <li>
                        <p>Measure</p>
                     </li>
                     <li>
                        <p>Calculated measure</p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-04145C1A-FBCA-4EC3-BCD2-4547381D9A5B__GUID-4B3D798E-72FD-4ADE-8E0F-5F6BBF2E6C4B">To copy a dimensional object:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>In the navigation tree, right-click an analytic workspace, dimension, cubes, measure, or calculated measure.</p>
                        </li>
                        <li>
                           <p>Select <span class="bold">Copy</span>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-04145C1A-FBCA-4EC3-BCD2-4547381D9A5B__GUID-A711CF9E-C1ED-4E0F-BC1B-78E8123A2ED0">To paste a dimensional object:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>In the navigation tree, right-click Analytic Workspaces, Dimensions, Cubes, Measures, or Calculated Measures.</p>
                        </li>
                        <li>
                           <p>Select <span class="bold">Paste</span>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='05806.olap-dml-programs.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>OLAP DML Programs</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="DML Reference">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="DML Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="olap-dml-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T13:59:56-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1994, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96403-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="olap-dml-options.html" title="Previous" type="text/html">
      <link rel="next" href="olap-dml-functions-a-k.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OLAP DML Reference">
    <meta name="dcterms.isVersionOf" content="OLADM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="olap-dml-options.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="olap-dml-functions-a-k.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">DML Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> OLAP DML Programs</li>
            </ol>
            <a id="GUID-6CC5769C-7292-42CD-BF33-BBECF9456606" name="GUID-6CC5769C-7292-42CD-BF33-BBECF9456606"></a><a id="OLADM260"></a><a id="olapdml_programs"></a>
            
            <h2 id="OLADM-GUID-6CC5769C-7292-42CD-BF33-BBECF9456606" class="sect2"><span class="enumeration_chapter">6 </span> OLAP DML Programs
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter provides information about creating OLAP DML programs. It includes the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-2A2A7710-6459-440B-B9F8-3EC1408D4DB0">Programs Provided With the OLAP DML</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-09BE96DD-BEDA-431E-995E-95C698EBB132">Creating OLAP DML Programs</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">Specifying Program Contents</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC">Compiling Programs</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-08276648-C7E2-4B1C-A107-A372450210D0">Testing and Debugging Programs</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-6DF87053-F027-45F6-873B-EE240C3F33BE">Executing Programs</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-A8D9BF45-CC71-4BC8-A6A9-2ACC2AD3CBF0">Common Types of OLAP DML Programs</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-9A2862DD-0CAA-4DD3-8AC1-3EB884BE82CC">User-Written Programs Looked For by Oracle OLAP</a></p>
                  </li>
               </ul>
            </div><a id="OLADM261"></a><a id="olapdml_programs_provided_with_dml"></a><div class="props_rev_3"><a id="GUID-2A2A7710-6459-440B-B9F8-3EC1408D4DB0" name="GUID-2A2A7710-6459-440B-B9F8-3EC1408D4DB0"></a><h3 id="OLADM-GUID-2A2A7710-6459-440B-B9F8-3EC1408D4DB0" class="sect3"><span class="enumeration_section">6.1 </span>Programs Provided With the OLAP DML
               </h3>
               <div>
                  <p>The OLAP DML provides a number of programs that you can use to work with OLAP cubes and cube dimensions as previously defined in the Oracle Database data dictionary. These programs are listed in <span class="q">"<a href="olap-dml-basic-concepts.html#GUID-D5779171-E334-4EFC-8C5C-957A4AD22EE5">Cube-Aware OLAP DML Statements</a>"</span>.
                  </p>
                  <p>It also provides the following programs that work directly on the analytic workspace:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-B7A03CAD-BD8A-4633-92D8-333E5D30B955">ALLCOMPILE</a> which uses the COMPILE command to compile every compilable object in your current analytic workspace, one at a time. 
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-CC708B7C-7264-4716-82D7-D3BE4E2B2539">ALLSTAT</a> sets the status of all dimensions in the current analytic workspace to the default status list of the dimension.
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-7E15216F-8529-488B-8A2B-C17A9405CAE4">AWDESCRIBE</a> sends information about the current analytic workspace to the current outfile. After a summary page, it provides a report in two parts: An alphabetic list of analytic workspace objects showing name, type, and description; and a DESCRIBE of each object by object type. 
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-EDC7F9E2-1D07-42FF-AC5F-46A8735DEB2D">COPYDFN</a> defines a new object in the analytical workspace by copying the definition from an already-defined object in the current workspace or in an attached workspace.
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-C5F6EAE0-9A00-4F22-B2B5-753471F33250">FORECAST.REPORT</a> produces a standard report of a forecast created using the FORECAST command. The report shows the parameters of the forecast, including the forecast formula and Mean Absolute Percent Error, followed by a display of the forecasted values. 
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-1B30E714-3236-466D-9777-68EA704B51DF">FULLDSC</a> produces a report that lists the definition of one or more workspace objects, including the properties and triggers of the object(s).
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-functions-a-k.html#GUID-6BCF9603-239C-4309-9484-55DF8F68E58B">ISDATE</a> determines whether a text expression to see if it can be converted to a DATE value It returns YES when the text expression represents a valid date; NO when it does not. (Note that, ISDATE does not actually make the conversion. You must use CONVERT to make the conversion.) 
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-6730EB17-D6E4-4E9D-92A0-C60D5BE0439C">LISTBY</a> produces a report of the names of all objects in an analytic workspace that are dimensioned by or related to one or more specified dimensions or composites. You can use LISTBY with a dimension or composite in any attached workspace.
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-67A0A769-8D3B-4089-94A3-95987FDDDCCF">LISTNAMES</a> produces a report that lists the names of the objects in an analytic workspace. You can limit the list to particular types of objects, and you can have the names for each type of object listed in alphabetical order.
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-161883C7-BD6D-428E-A124-2A9EEE272790">MODEL.COMPRPT</a> produces a report that shows how model equations are grouped into blocks. For step blocks and for simultaneous blocks with a cross<span class="italic">-</span>dimensional dependence, the report lists the dimensions involved in the dependence.
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-7EBE833F-18B5-4A0B-AAAC-B449D3D60056">MODEL.DEPRT</a> produces a report that lists the variables and dimension values on which each model equation depends. When a dependence is dimensional, the report gives the name of the dimension.
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-94EE42D6-F56F-45EB-AD45-263F51F5ACEE">MODEL.XEQRPT</a> produces a report about the execution of the model. The report specifies the block where the solution failed and shows the values of the model options that were used in solving simultaneous blocks.
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-D23745E5-506E-42DF-B992-7AEAE83C74C1">PAGE</a>, commonly used in report programs or with LISTNAMES, forces a page break in output when PAGING is set to <code class="codeph">YES</code>. An optional argument to PAGE specifies a conditional page break based on how many lines are left on the page.
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-CF8E6243-1E8C-40D8-B094-5FD118A396AF">REGRESS.REPORT</a> produces a standard report of a regression performed using the REGRESS command.
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-7CB1E8F9-520F-4992-96D8-D006910909B6">STATUS</a> sends to the current outfile the status of one or more dimensions, dimension surrogates, or valuesets, or the status of all dimensions in an analytic workspace.
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-5EA99BE9-9A33-4218-BC3B-22E0BE47DAFB">STDHDR</a> generates the standard Oracle OLAP heading at the top of every page of report output.
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-functions-l-z.html#GUID-2D537F2F-D313-4625-BBA3-2698F68A5D0B">VALSPERPAGE</a> calculates the maximum number of values for a variable of a specified width that fits on one page. Pages are units of storage in the workspace.
                        </p>
                     </li>
                  </ul>
                  <p>Because the ISDATE and VALSPERPAGE programs are like simple functions, they are documented in alphabetical sequence along with OLAP DML functions in <a href="olap-dml-functions-a-k.html#GUID-61DF603D-3BD7-43B0-B14A-9C536BFF80CE">OLAP DML Functions: A - K</a> and <a href="olap-dml-functions-l-z.html#GUID-B01E26A8-F738-4D2C-A274-6B0B3941A2A7">OLAP DML Functions: L - Z</a>. The other programs provided with the OLAP DML are documented in alphabetical sequence along with the OLAP DML commands in <a href="olap-dml-commands-a-g.html#GUID-E53A76E2-3ED0-4084-BEFC-942266F3F811" title="The ALLOCATE command calculates lower-level data from upper-level data by allocating variable data down a hierarchical dimension.">OLAP DML Commands: A-G</a> and <a href="olap-dml-commands-h-z.html#GUID-C5C279D8-A1CE-4814-B6AE-BDD06AF798D8">OLAP DML Commands: H-Z</a>.
                  </p>
               </div>
            </div><a id="OLADM262"></a><a id="olapdml_creating_programs"></a><div class="props_rev_3"><a id="GUID-09BE96DD-BEDA-431E-995E-95C698EBB132" name="GUID-09BE96DD-BEDA-431E-995E-95C698EBB132"></a><h3 id="OLADM-GUID-09BE96DD-BEDA-431E-995E-95C698EBB132" class="sect3"><span class="enumeration_section">6.2 </span>Creating OLAP DML Programs
               </h3>
               <div>
                  <div class="section">
                     <p>An OLAP DML program is written in the OLAP DML. It acts on data in the analytic workspace and helps you accomplish some workspace management or analysis task. You can write OLAP DML programs to perform tasks that you must do repeatedly in the analytic workspace, or you can write them as part of an application that you are developing.</p>
                     <p>To create an OLAP DML program, take the following steps:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>Issue a DEFINE PROGRAM statement to define the program object. When the program that you are defining is used is a function, include the <span class="italic"><tt>datatype</tt></span> or the <span class="italic"><tt>dimension</tt></span> argument.</span></li>
                     <li><span>Add contents to the program that specify the processing that you want performed as described in <span class="q">"<a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">Specifying Program Contents</a>"</span>.</span></li>
                     <li><span>Compile the program as described in <span class="q">"<a href="olap-dml-programs.html#GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC">Compiling Programs</a>"</span>.</span></li>
                     <li><span>Test and debug the program as described in <span class="q">"<a href="olap-dml-programs.html#GUID-08276648-C7E2-4B1C-A107-A372450210D0">Testing and Debugging Programs</a>"</span>.</span></li>
                     <li><span>Execute the program as described in <span class="q">"<a href="olap-dml-programs.html#GUID-6DF87053-F027-45F6-873B-EE240C3F33BE">Executing Programs</a>"</span>.</span></li>
                  </ol>
               </div>
            </div><a id="OLADM263"></a><a id="olapdml_specify_prog_contents"></a><div class="props_rev_3"><a id="GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055" name="GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055"></a><h3 id="OLADM-GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055" class="sect3"><span class="enumeration_section">6.3 </span>Specifying Program Contents
               </h3>
               <div>
                  <p>The content of a program consists of the following OLAP DML statements:</p>
                  <ol>
                     <li>
                        <p>A PROGRAM statement that indicates the beginning of the program contents. (Omit when coding the specification in an Edit window of the OLAP Worksheet.)</p>
                     </li>
                     <li>
                        <p>(Optional) VARIABLE statements that define any local variables. </p>
                     </li>
                     <li>
                        <p>(Optional) ARGUMENT statements that declare arguments. (See <span class="q">"<a href="olap-dml-programs.html#GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF">Passing Arguments</a>"</span> for more information.)
                        </p>
                     </li>
                     <li>
                        <p>Additional OLAP DML statements that specify the processing you want performed. You can use almost any of the OLAP DML statements in a program. There are also some OLAP DML statements, such as flow-of-control statements, that are only used in programs. </p>
                        <p>Use the following formatting guidelines as you add lines to your program:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Each line of code can have a maximum of 4,000 bytes.</p>
                           </li>
                           <li>
                              <p>To continue a single statement on the next line, place a hyphen&nbsp;(<code class="codeph">-</code>) at the end of the line to be broken. The hyphen is called a continuation character.
                              </p>
                           </li>
                           <li>
                              <p>You cannot use a continuation character in the middle of a text literal.</p>
                           </li>
                           <li>
                              <p>To write multiple statements on a single line, separate the statements with semicolon (<code class="codeph">;</code>).
                              </p>
                           </li>
                           <li>
                              <p>Enclose literal text in single quotation marks (<code class="codeph">'</code>). To include a single quotation mark within literal text, precede it with a backslash (<code class="codeph">\</code>). To specify escape sequences, see <span class="q">"<a href="data-types-operators-and-expressions.html#GUID-5272CD1A-1D62-4832-8B57-A71A9AC84C8B">Escape Sequences</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p><a id="d57722e368" class="indexterm-anchor"></a><a id="d57722e370" class="indexterm-anchor"></a>Precede comments with double quotation marks (<code class="codeph">"</code>). You can place a comment, preceded by double quotation marks, either at the beginning of a line or at the end of a line, after some statements.
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>A final END statement that indicates the end of the contents of the program. (Omit when coding the specification in an Edit window of the OLAP Worksheet.)</p>
                     </li>
                  </ol>
               </div><a id="OLADM264"></a><div class="props_rev_3"><a id="GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289" name="GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289"></a><h4 id="OLADM-GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289" class="sect4"><span class="enumeration_section">6.3.1 </span>Creating User-Defined Functions
                  </h4>
                  <div>
                     <p>One type of program that is commonly written is a user-define function that you can use in OLAP DML statements in much the same way as you use an OLAP DML function. A user-defined function is simply an OLAP DML program that returns a value. For an example of a user-defined function, see <a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__BABIGFDB">Example 9-44</a>.
                     </p>
                     <p><a id="d57722e414" class="indexterm-anchor"></a><a id="d57722e418" class="indexterm-anchor"></a><a id="d57722e422" class="indexterm-anchor"></a>When you create a user‐defined function, you use a DEFINE PROGRAM statement that includes the <span class="italic"><tt>datatype</tt></span> and <span class="italic"><tt>dimension</tt></span> arguments. Within the program, you include a RETURN statement that returns a value. The return expression in the program should match the data type that is specified in its definition. When the data type of the return value does not match the data type that is specified in its definition, then the value is converted to the data type in the definition. 
                     </p>
                     <p><a id="d57722e436" class="indexterm-anchor"></a><a id="d57722e440" class="indexterm-anchor"></a><a id="d57722e444" class="indexterm-anchor"></a>User-defined functions can accept arguments. A user-defined function returns only a single value. However, when you supply an argument to a user‐defined function in a context that loops over a dimension (for example, in a REPORT statement), then the function returns results with the same dimensions as its argument.
                     </p>
                     <p>You must declare the arguments using an ARGUMENT statement within the program, and you must specify the arguments in parentheses following the name of the program.</p>
                     <div class="infoboxnotealso" id="GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289__GUID-4D9979D0-EBFB-4788-A56A-B8E1162BAFBF">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="olap-dml-programs.html#GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF">Passing Arguments</a>"</span>  for more information about using arguments with programs.
                        </p>
                     </div>
                  </div>
               </div><a id="OLADM265"></a><div class="props_rev_3"><a id="GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF" name="GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF"></a><h4 id="OLADM-GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF" class="sect4"><span class="enumeration_section">6.3.2 </span>Passing Arguments
                  </h4>
                  <div>
                     <p>Use ARGUMENT statements to declare both simple and complex arguments (such as expressions). ARGUMENT statement also make it convenient to pass arguments from one program to another, or to create your own user‐defined functions because by using these statements you can declare an argument of any data type, dimension, or valueset. Any ARGUMENT statements must precede the first executable line in the program. When you run the program, these declared arguments are initialized with the values you provided as arguments to the program. The program can then use these arguments in the same way it would use local variables.</p>
                  </div><a id="OLADM266"></a><div class="props_rev_3"><a id="GUID-19EB8220-BF70-4483-A5BE-8CEE2EFB73D2" name="GUID-19EB8220-BF70-4483-A5BE-8CEE2EFB73D2"></a><h5 id="OLADM-GUID-19EB8220-BF70-4483-A5BE-8CEE2EFB73D2" class="sect5"><span class="enumeration_section">6.3.2.1 </span>Using Multiple Arguments
                     </h5>
                     <div>
                        <p><a id="d57722e516" class="indexterm-anchor"></a>A program can declare as many arguments as needed. When the program is executed with arguments specified, the arguments are matched positionally with the declared arguments in the program. When you run the program, you must separate arguments with spaces rather than with commas or other punctuation. Punctuation is treated as part of the arguments. For an example of passing multiple arguments, see <a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__CHDEGHGE">Example 9-45</a>.
                        </p>
                     </div>
                  </div><a id="OLADM267"></a><div class="props_rev_3"><a id="GUID-398C4D08-6330-4486-A952-D062DC42FD8C" name="GUID-398C4D08-6330-4486-A952-D062DC42FD8C"></a><h5 id="OLADM-GUID-398C4D08-6330-4486-A952-D062DC42FD8C" class="sect5"><span class="enumeration_section">6.3.2.2 </span>Handling Arguments Without Converting Values to a Specific Data Type
                     </h5>
                     <div>
                        <p>Sometimes you want your OLAP DML program to be able to handle arguments without converting values to a specific data type. In this case, you can specify a data type of <code class="codeph">WORKSHEET</code> in the ARGUMENT and VARIABLE statements that define the arguments and temporary variables for the program. You can use WKSDATA to determine the actual data type of the argument or variable.
                        </p>
                     </div>
                  </div><a id="OLADM268"></a><div class="props_rev_3"><a id="GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98" name="GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98"></a><h5 id="OLADM-GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98" class="sect5"><span class="enumeration_section">6.3.2.3 </span>Passing Arguments as Text with Ampersand Substitution
                     </h5>
                     <div>
                        <p><a id="d57722e586" class="indexterm-anchor"></a><a id="d57722e590" class="indexterm-anchor"></a><a id="d57722e594" class="indexterm-anchor"></a><a id="d57722e598" class="indexterm-anchor"></a><a id="d57722e602" class="indexterm-anchor"></a>It is very common to pass a simple text argument to a program. However, there are some situations in which you might want to write more general programs or pass a more complicated text argument, such as an argument that is all of the data in an analytic workspace object or the results of an expression. In these cases, you can pass the argument using a substitution expression. Passing an argument in this way is called <span class="bold">ampersand substitution</span>.
                        </p>
                        <p>For the following types of arguments, you must <span class="italic">always</span> use an ampersand to make the appropriate substitution:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Names of workspace objects, such as <code class="codeph">units</code> or <code class="codeph">product</code></p>
                           </li>
                           <li>
                              <p>Statement keywords, such as <code class="codeph">COMMA</code> or <code class="codeph">NOCOMMA</code> in the REPORT<code class="codeph"> </code>statement, or <code class="codeph">A</code> or <code class="codeph">D</code> in the SORT	 command
                              </p>
                           </li>
                        </ul>
                        <p>When you use ampersand substitution to pass the names rather than the values of workspace objects to a program, the program has access to the objects themselves. This feature is useful when the program must manipulate the objects in several operations.</p>
                        <div class="infoboxnote" id="GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98__GUID-F7A62EF4-5986-4066-B15F-E7554FCD8944">
                           <p class="notep1">Note:</p>
                           <p>You cannot compile and save any program line that contains an ampersand. Instead, the line is evaluated at run time, which can reduce the speed of your programs. Therefore, to maximize performance, avoid using ampersand substitution when another technique is available.</p>
                        </div>
                        <p>For an example of using ampersand substitution to pass multiple dimension values, see <a href="olap-dml-commands-h-z.html#GUID-C84F165D-930A-461C-976B-F4C28F6DCA14__CHDFHBAJ">Example 10-18</a>. For an example of using ampersand substitution to pass the text of an expression, see <a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__CHDBIFDI">Example 9-47</a>. For an example of using ampersand substitution to pass object names and keywords, see <a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__CHDFCJBB">Example 9-48</a>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98__GUID-26ED4B3B-216B-491C-BC7E-432EF088071B">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="data-types-operators-and-expressions.html#GUID-5F4213DB-AA4C-4F73-84C7-3ECFE2616672">Substitution Expressions</a>"</span>  for more information about ampersand substitution.
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="OLADM1428"></a><a id="OLADM269"></a><div class="props_rev_3"><a id="GUID-ACF5AC85-A341-4EF4-87E5-ABCE8FB811AD" name="GUID-ACF5AC85-A341-4EF4-87E5-ABCE8FB811AD"></a><h4 id="OLADM-GUID-ACF5AC85-A341-4EF4-87E5-ABCE8FB811AD" class="sect4"><span class="enumeration_section">6.3.3 </span>Program Flow-of-Control
                  </h4>
                  <div>
                     <p>Like most programming languages, the OLAP DML has several statements that you can use to determine the flow-of-control within a program. However, you must code explicit loops less frequently in an OLAP DML program because of the intrinsic looping nature of many OLAP DML statements. </p>
                     <p>The following table lists OLAP DML flow-of-control statements. The looping characteristic of OLAP DML statements is discussed in <span class="q">"<a href="olap-dml-basic-concepts.html#GUID-D032BBB4-A0ED-41C1-80B7-D93CA5172FD6">OLAP DML Statements Apply to All of the Values of a Data Object</a>"</span>.
                     </p>
                     <p>The OLAP DML contains the flow-of-control statements typically found in a programming language. The following table lists these statements:</p>
                     <div class="tblformal" id="GUID-ACF5AC85-A341-4EF4-87E5-ABCE8FB811AD__G679844">
                        <p class="titleintable">Table 6-1 Statements For Determining Flow-of-Control</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Statements For Determining Flow-of-Control" summary="This table lists the OLAP DML statements that you only use within an OLAP DML program." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d57722e711">Statement</th>
                                 <th align="left" valign="bottom" width="70%" id="d57722e714">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e719" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-27A49A77-F73F-4852-B0CF-34A8A145FDFC">BREAK</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e719 d57722e714 ">
                                    <p>Transfers program control from within a SWITCH, FOR, or WHILE statement to the statement immediately following the DOEND associated with SWITCH, FOR, or WHILE.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e727" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-A97E3A63-90EA-4005-96BB-B02053FE4988">CONTINUE</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e727 d57722e714 ">
                                    <p>Transfers program control to the end of a FOR or WHILE loop (just before the DO/DOEND statement), allowing the loop to repeat. You can use CONTINUE only within programs and only with FOR or WHILE.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e735" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-15C78632-3125-49A3-A859-1CF655599087">DO ... DOEND</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e735 d57722e714 ">
                                    <p>Brackets a group of one or more statements. DO and DOEND are normally used to bracket a group of statements that are to be executed under a condition specified by an IF statement, a group of statements in a repeating loop introduced by FOR or WHILE, or the CASE labels for a SWITCH statement.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e743" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-387C3D9C-3204-494D-B01D-7D66CEF3F392">FOR</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e743 d57722e714 ">
                                    <p>Specifies one or more dimensions whose status controls the repetition of one or more statements.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e751" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-8AB3731E-B99D-4EF8-83D7-9DFE3D6B240E">GOTO</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e751 d57722e714 ">
                                    <p>Alters the sequence of statement execution within the program by indicating the next program statement to execute.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e759" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-D407815D-BDFB-4186-AA82-2526C3676855">IF...THEN...ELSE command</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e759 d57722e714 ">
                                    <p>Executes one or more statements in a program if a specified condition is met. Optionally, it also executes an alternative statement or group of statements when the condition is not met. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e767" headers="d57722e711 ">
                                    <p><a href="olap-dml-options.html#GUID-8C65970A-F914-4D78-8B80-9A65B75B2F5D">OKFORLIMIT</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e767 d57722e714 ">
                                    <p>An option that determines whether you can limit the dimension you are looping over within an explicit FOR loop.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e775" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-80C294ED-B4E1-40D8-A9E1-9E7A1EC54124">RETURN</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e775 d57722e714 ">
                                    <p>Terminates execution of a program before its last line. You can optionally specify a value that the program returns. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e783" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-5395AE41-C6A2-4AD4-A1AC-606B3986A3CA">SIGNAL</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e783 d57722e714 ">
                                    <p>Produces an error message and halts normal execution of the program. When the program contains an active trap label, execution branches to the label. Without a trap label, execution of the program terminates and, if the program was called by another program, execution control returns to the calling program.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e791" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-8254C656-5F02-4B1A-888B-B4505EFFCDD8">SWITCH command</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e791 d57722e714 ">
                                    <p>Provides a multipath branch in a program. The specific path taken during program execution depends on the value of the control expression that is specified with SWITCH. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e799" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-9AC4D116-A4B3-406C-8DE3-7BD1B59CE0D0">TEMPSTAT</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e799 d57722e714 ">
                                    <p>Limits the dimension you are looping over, inside a FOR loop or inside a loop that is generated by a REPORT statement. Status is restored after the statement following TEMPSTAT. If a DO ... DOEND phrase follows TEMPSTAT, status is restored when the matched DOEND or a BREAK or GOTO statement is encountered. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e808" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-F1C50CA4-3D41-47A2-924F-567C2A36BFB3">TRAP</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e808 d57722e714 ">
                                    <p>Causes program execution to branch to a label when an error occurs in a program or when the user interrupts the program. When execution branches to the trap label, that label is deactivated.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e816" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-D8796F7B-3C9D-4159-9164-E0C391D81CB2">WHILE</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e816 d57722e714 ">
                                    <p>Repeatedly executes a statement while the value of a Boolean expression remains TRUE. </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="OLADM270"></a><div class="props_rev_3"><a id="GUID-5E27F806-FF9F-4FC4-B02F-CB8CF9A49740" name="GUID-5E27F806-FF9F-4FC4-B02F-CB8CF9A49740"></a><h4 id="OLADM-GUID-5E27F806-FF9F-4FC4-B02F-CB8CF9A49740" class="sect4"><span class="enumeration_section">6.3.4 </span>Preserving the Environment Settings
                  </h4>
                  <div>
                     <p>There are two types of environments:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a id="d57722e856" class="indexterm-anchor"></a><a id="d57722e860" class="indexterm-anchor"></a>Session environment. The dimension status, option values, and output destination that are in effect before a program is run constitute the session environment.
                           </p>
                        </li>
                        <li>
                           <p><a id="d57722e867" class="indexterm-anchor"></a><a id="d57722e871" class="indexterm-anchor"></a>Program environment. The dimension status, option values, and output destination that you use in a program constitute the program environment.
                           </p>
                        </li>
                     </ul>
                  </div><a id="OLADM271"></a><div class="props_rev_3"><a id="GUID-B9C62BFB-D08E-473F-BA1A-79B570FAB419" name="GUID-B9C62BFB-D08E-473F-BA1A-79B570FAB419"></a><h5 id="OLADM-GUID-B9C62BFB-D08E-473F-BA1A-79B570FAB419" class="sect5"><span class="enumeration_section">6.3.4.1 </span>Changing the Program Environment
                     </h5>
                     <div>
                        <p>To perform a task within a program, you often must change the output destination or some dimension and option values. For example, you might run a monthly sales report that always shows the last six months of sales data. You might want to show the data without decimal places, include the text "No Sales" where the sales figure is zero, and send the report to a file. To set up this program environment, you can use the following statements in your program.</p><pre class="oac_no_warn" dir="ltr">LIMIT month TO LAST 6
DECIMALS = 0
ZSPELL = 'No Sales'
OUTFILE monsales.txt</pre><pre class="oac_no_warn" dir="ltr"></pre><p>To avoid disrupting the session environment, the initialization section of a program should save the values of the dimensions and options that are set in the program. After the program executes, you can restore the saved environment, so that other programs do not need to be concerned about whether any values have been changed. In addition, when you have sent output to a file, then the exit sections should return the output destination to the default outfile.</p>
                     </div>
                  </div><a id="OLADM272"></a><div class="props_rev_3"><a id="GUID-326A584A-2C0A-4073-8F27-0027252B82AD" name="GUID-326A584A-2C0A-4073-8F27-0027252B82AD"></a><h5 id="OLADM-GUID-326A584A-2C0A-4073-8F27-0027252B82AD" class="sect5"><span class="enumeration_section">6.3.4.2 </span>Ways to Save and Restore Environments
                     </h5>
                     <div>
                        <p><a id="d57722e940" class="indexterm-anchor"></a><a id="d57722e944" class="indexterm-anchor"></a>The following suggestions let you save the environment of a program or a session:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When you want to save the current status or value of a dimension, a valueset, an option, or a single-cell variable that is changed in the current program, then use PUSHLEVEL and PUSH statements. You can restore the current status values using POPLEVEL and POP statements.</p>
                           </li>
                           <li>
                              <p>When you want to save, access, or update the current status or value of a dimension, a valueset, an option, a single-cell variable, or a single-cell relation for use in the current session, then use a named context. Use the CONTEXT command to define the context.</p>
                           </li>
                        </ul>
                        <p>Contexts are the most sophisticated way to save object values for use during a session. With contexts, you can access, update, and commit the saved object values. In contrast, PUSH and POP simply allow you to save and restore values. Typically, you use PUSH and POP statements within a program to make changes that apply only during the execution of the program.</p>
                     </div>
                  </div><a id="OLADM273"></a><div class="props_rev_3"><a id="GUID-66BD6AD7-0002-4301-873A-4A12B4172D13" name="GUID-66BD6AD7-0002-4301-873A-4A12B4172D13"></a><h5 id="OLADM-GUID-66BD6AD7-0002-4301-873A-4A12B4172D13" class="sect5"><span class="enumeration_section">6.3.4.3 </span>Saving the Status of a Dimension or the Value of an Option
                     </h5>
                     <div>
                        <p><a id="d57722e988" class="indexterm-anchor"></a><a id="d57722e992" class="indexterm-anchor"></a><a id="d57722e996" class="indexterm-anchor"></a><a id="d57722e1000" class="indexterm-anchor"></a><a id="d57722e1004" class="indexterm-anchor"></a>A PUSH statement saves the current status of a dimension, the value of an option, or the value of a single-cell variable. For example, to save the current value of the <code class="codeph">DECIMALS</code> option so you can set it to a different value for the duration of the program, use the following statement in the initialization section. 
                        </p><pre class="oac_no_warn" dir="ltr">PUSH DECIMALS</pre><pre class="oac_no_warn" dir="ltr"></pre><p><a id="d57722e1016" class="indexterm-anchor"></a><a id="d57722e1018" class="indexterm-anchor"></a><a id="d57722e1022" class="indexterm-anchor"></a><a id="d57722e1026" class="indexterm-anchor"></a><a id="d57722e1030" class="indexterm-anchor"></a><a id="d57722e1034" class="indexterm-anchor"></a>You do not need to know the original value of the option to save it or to restore it later. You can restore the saved value with a POP statement.
                        </p><pre class="oac_no_warn" dir="ltr">POP DECIMALS</pre><pre class="oac_no_warn" dir="ltr"></pre><p>You must make sure a POP statement is executed when errors cause abnormal termination of the program and when the program ends normally. Therefore, place the POP statement in the normal and abnormal exit sections of the program. </p>
                     </div>
                  </div><a id="OLADM274"></a><div class="props_rev_3"><a id="GUID-99535339-6B89-4FEB-A7E6-71F1027FA94E" name="GUID-99535339-6B89-4FEB-A7E6-71F1027FA94E"></a><h5 id="OLADM-GUID-99535339-6B89-4FEB-A7E6-71F1027FA94E" class="sect5"><span class="enumeration_section">6.3.4.4 </span>Saving Several Values at Once
                     </h5>
                     <div>
                        <p><a id="d57722e1073" class="indexterm-anchor"></a><a id="d57722e1075" class="indexterm-anchor"></a>You can save the status of one or more dimensions and the values of any number of options and variables in a single PUSH statement, and you can restore the values with a single POP statement, as shown in the following example.
                        </p><pre class="oac_no_warn" dir="ltr">PUSH month DECIMALS ZSPELL
       ...
POP month DECIMALS ZSPELL</pre></div>
                  </div><a id="OLADM275"></a><div class="props_rev_3"><a id="GUID-42EC6C90-1D8B-4CA8-9A80-0194B619BF4A" name="GUID-42EC6C90-1D8B-4CA8-9A80-0194B619BF4A"></a><h5 id="OLADM-GUID-42EC6C90-1D8B-4CA8-9A80-0194B619BF4A" class="sect5"><span class="enumeration_section">6.3.4.5 </span>Using Level Markers
                     </h5>
                     <div>
                        <p>When you are saving the values of several dimensions and options, then PUSHLEVEL and POPLEVEL statements provide a convenient way to save and restore the session environment. </p>
                        <p>You first use a PUSHLEVEL statement to establish a level marker. Once the level marker is established, you use a PUSH statement to save the status of dimensions and the values of options or single-cell variables.</p>
                        <p><a id="d57722e1113" class="indexterm-anchor"></a>When you place multiple PUSH statements between the PUSHLEVEL and POPLEVEL statements, then all the objects that are specified in those PUSH statements are restored with a single POPLEVEL statement.
                        </p>
                        <p>By using PUSHLEVEL and POPLEVEL, you save some typing as you write your program because you must only type the list of objects once. You also reduce the risk of omitting an object from the list or misspelling the name of an object.</p>
                        <p>For an example of creating level markers, see <a href="olap-dml-commands-h-z.html#GUID-66899C5F-9C89-421F-9CB5-75B868429B83__CHDGEDJB">Example 10-85</a>. <a href="olap-dml-commands-h-z.html#GUID-66899C5F-9C89-421F-9CB5-75B868429B83__CHDGJFIG">Example 10-86</a> illustrates nesting PUSHLEVEL and POPLEVEL statements.
                        </p>
                     </div>
                  </div><a id="OLADM276"></a><div class="props_rev_3"><a id="GUID-5FDF2789-23B3-42B7-A9F0-1288A37CEDE1" name="GUID-5FDF2789-23B3-42B7-A9F0-1288A37CEDE1"></a><h5 id="OLADM-GUID-5FDF2789-23B3-42B7-A9F0-1288A37CEDE1" class="sect5"><span class="enumeration_section">6.3.4.6 </span>Using CONTEXT to Save Several Values at Once
                     </h5>
                     <div>
                        <p><a id="d57722e1156" class="indexterm-anchor"></a><a id="d57722e1158" class="indexterm-anchor"></a>As an alternative to using PUSHLEVEL and POPLEVEL, you can use the CONTEXT command. After you create a context, you can save the current status of dimensions and the values of options, single-cell variables, valuesets, and single-cell relations in the context. You can then restore some or all of the object values from the context. The CONTEXT function returns information about objects in a context.
                        </p>
                     </div>
                  </div>
               </div><a id="OLADM277"></a><div class="props_rev_3"><a id="GUID-1512D34B-DC11-439C-A55E-5C8F6BBC6C36" name="GUID-1512D34B-DC11-439C-A55E-5C8F6BBC6C36"></a><h4 id="OLADM-GUID-1512D34B-DC11-439C-A55E-5C8F6BBC6C36" class="sect4"><span class="enumeration_section">6.3.5 </span>Handling Errors
                  </h4>
                  <div>
                     <p><a id="d57722e1190" class="indexterm-anchor"></a><a id="d57722e1194" class="indexterm-anchor"></a><a id="d57722e1196" class="indexterm-anchor"></a><a id="d57722e1200" class="indexterm-anchor"></a>When an error occurs anywhere in a program, Oracle OLAP performs the following actions:
                     </p>
                     <ol>
                        <li>
                           <p>Stores the name of the error in the ERRORNAME option, and the text of the error message in the ERRORTEXT option. </p>
                           <div class="infoboxnote" id="GUID-1512D34B-DC11-439C-A55E-5C8F6BBC6C36__GUID-3A23DE33-20E5-4B3A-971A-950B9AF598D8">
                              <p class="notep1">Note:</p>
                              <p>When the ERRNAMES option is set to the default value of <code class="codeph">YES</code>, the ERRORTEXT option contains the name of the error (that is, the value of the ERRORNAME option) and the text of the error message.
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>When ECHOPROMPT is <code class="codeph">YES</code>, then Oracle OLAP echoes input lines, error messages, and output lines, to the current outfile. When you use the OUTFILE or DBGOUTFILE statement, you can capture the error messages in a file. See <a href="olap-dml-commands-h-z.html#GUID-16EA592C-4458-4D7F-AF4C-E458F7271C95__CHDGDBEH">Example 10-69</a> for an example of directing output to a file.
                           </p>
                        </li>
                        <li>
                           <p>When error trapping is off, then the execution of the program is halted. When error trapping is on, then the error is trapped.</p>
                        </li>
                     </ol>
                  </div><a id="OLADM278"></a><div class="props_rev_3"><a id="GUID-813DC8E5-2D36-408D-B9EC-727ED096D578" name="GUID-813DC8E5-2D36-408D-B9EC-727ED096D578"></a><h5 id="OLADM-GUID-813DC8E5-2D36-408D-B9EC-727ED096D578" class="sect5"><span class="enumeration_section">6.3.5.1 </span>Trapping an Error
                     </h5>
                     <div>
                        <p><a id="d57722e1253" class="indexterm-anchor"></a><a id="d57722e1255" class="indexterm-anchor"></a>To make sure the program works correctly, anticipate errors and set up a system for handling them. You can use a TRAP statement to turn on an error-trapping mechanism in a program. When error trapping is on and an error is signaled, then the execution of the program is not halted. Instead, error trapping does the following:
                        </p>
                        <ol>
                           <li>
                              <p>Turns off the error‐trapping mechanism to prevent endless looping in case additional errors occur during the error-handling process</p>
                           </li>
                           <li>
                              <p>Branches to the label that is specified in the <code class="codeph">TRAP</code> statement
                              </p>
                           </li>
                           <li>
                              <p>Executes the statements following the label</p>
                           </li>
                        </ol>
                     </div>
                  </div><a id="OLADM279"></a><div class="props_rev_3"><a id="GUID-2F1CC781-D205-40B9-8438-1CB65BC28DA3" name="GUID-2F1CC781-D205-40B9-8438-1CB65BC28DA3"></a><h5 id="OLADM-GUID-2F1CC781-D205-40B9-8438-1CB65BC28DA3" class="sect5"><span class="enumeration_section">6.3.5.2 </span>Passing an Error to a Calling Program
                     </h5>
                     <div>
                        <p>To pass an error to a calling program, you can use one of two methods. The method you use depends on when you want the error message to be produced. With the first method, Oracle OLAP produces the message immediately and then the error condition is passed through the chain of programs. With the second method, Oracle OLAP passes the error through the chain of programs first and then produces the message. See <span class="q">"<a href="olap-dml-programs.html#GUID-F3EBF9AB-45BF-41C8-983E-8938F1B89F5C">Passing an Error: Method One</a>"</span> and <span class="q">"<a href="olap-dml-programs.html#GUID-1C7698BF-210D-4E68-80D5-1AA89AFA2369">Passing an Error: Method Two</a>"</span> for details.
                        </p>
                        <p>With both methods, the appropriate error handling happens in each program in the chain, and at some point Oracle OLAP sends an error message to the current outfile.</p>
                     </div><a id="OLADM280"></a><div class="props_rev_3"><a id="GUID-F3EBF9AB-45BF-41C8-983E-8938F1B89F5C" name="GUID-F3EBF9AB-45BF-41C8-983E-8938F1B89F5C"></a><h6 id="OLADM-GUID-F3EBF9AB-45BF-41C8-983E-8938F1B89F5C" class="sect6"><span class="enumeration_section">6.3.5.2.1 </span>Passing an Error: Method One
                        </h6>
                        <div>
                           <p>Using this method, Oracle OLAP produces the message immediately and then the error condition is passed through the chain of programs.</p>
                           <p>Use a TRAP statement with the (default) PRINT option. When an error occurs, Oracle OLAP produces an error message, and execution branches to the trap label. After the trap label, perform whatever cleanup you want, and then execute the following statement.</p><pre class="oac_no_warn" dir="ltr">SIGNAL&nbsp;PRGERR</pre><pre class="oac_no_warn" dir="ltr"></pre><p>Using this statement creates an error condition that is passed up to the program from which the current program was run. However, PRGERR does not produce an error message. PRGERR sets the ERRORNAME option to a blank value.</p>
                           <p>When the calling program contains a trap label, execution branches to the label. When each of the programs in a sequence of nested programs uses TRAP and SIGNAL in this way, you can pass the error condition up through the entire sequence of programs.</p>
                        </div>
                     </div><a id="OLADM281"></a><div class="props_rev_3"><a id="GUID-1C7698BF-210D-4E68-80D5-1AA89AFA2369" name="GUID-1C7698BF-210D-4E68-80D5-1AA89AFA2369"></a><h6 id="OLADM-GUID-1C7698BF-210D-4E68-80D5-1AA89AFA2369" class="sect6"><span class="enumeration_section">6.3.5.2.2 </span>Passing an Error: Method Two
                        </h6>
                        <div>
                           <p>Using this method, Oracle OLAP passes the error through the chain of programs first and then produces the message.</p>
                           <p>Use a TRAP statement with the NOPRINT option. When an error occurs, execution branches to the trap label, but the error message is suppressed. After the trap label, perform whatever cleanup you want, then execute the following statement.</p><pre class="oac_no_warn" dir="ltr">SIGNAL&nbsp;ERRORNAME&nbsp;ERRORTEXT</pre><pre class="oac_no_warn" dir="ltr"></pre><p>The options ERRORNAME and ERRORTEXT contain the name and message of the original error, so this SIGNAL statement reproduces the original error. The error is then passed up to the program from which the current program was run.</p>
                           <p>When the calling program also contains a trap label, execution branches to its label. When each of the programs in a sequence of nested programs uses <code class="codeph">TRAP...NOPRINT</code> and <code class="codeph">SIGNAL</code> <code class="codeph">ERRORNAME</code> <code class="codeph">ERRORTEXT</code> in this way, you can pass the error condition up through the entire sequence of programs. Oracle OLAP produces the error message at the end of the chain.
                           </p>
                           <p>When you reach a level where you want to handle the error and continue the application, omit the SIGNAL statement. You can display your own message with a SHOW statement.</p>
                        </div>
                     </div>
                  </div><a id="OLADM282"></a><div class="props_rev_3"><a id="GUID-6A440F90-9FD1-4871-8333-2AFD40835AE2" name="GUID-6A440F90-9FD1-4871-8333-2AFD40835AE2"></a><h5 id="OLADM-GUID-6A440F90-9FD1-4871-8333-2AFD40835AE2" class="sect5"><span class="enumeration_section">6.3.5.3 </span>Suppressing Error Messages
                     </h5>
                     <div>
                        <p><a id="d57722e1435" class="indexterm-anchor"></a>When you do not want to produce the error message that is normally provided for a given error, then you can use TRAP statement with a <code class="codeph">NOPRINT</code> keyword.
                        </p><pre class="oac_no_warn" dir="ltr">TRAP ON error NOPRINT</pre><pre class="oac_no_warn" dir="ltr"></pre><p>When you use the <code class="codeph">NOPRINT</code> keyword with <code class="codeph">TRAP</code>, control branches to the <code class="codeph">error</code> label, and an error message is not issued when an error occurs. The statements following the <code class="codeph">error</code> label are then executed. 
                        </p>
                        <p>When you suppress the error message, you might want to produce your own message in the abnormal exit section. A <code class="codeph">SHOW</code> statement produces the text you specify but does not signal an error.
                        </p><pre class="oac_no_warn" dir="ltr">TRAP ON error NOPRINT
        ...
error:
        ...
SHOW 'The report will not be produced.'
</pre><p>The program continues with the next statement after producing the message.</p>
                     </div>
                  </div><a id="OLADM283"></a><div class="props_rev_3"><a id="GUID-8335DD91-CBD9-4D0A-B67F-496FF92ED52B" name="GUID-8335DD91-CBD9-4D0A-B67F-496FF92ED52B"></a><h5 id="OLADM-GUID-8335DD91-CBD9-4D0A-B67F-496FF92ED52B" class="sect5"><span class="enumeration_section">6.3.5.4 </span>Creating Your Own Error Messages
                     </h5>
                     <div>
                        <p><a id="d57722e1498" class="indexterm-anchor"></a><a id="d57722e1500" class="indexterm-anchor"></a><a id="d57722e1504" class="indexterm-anchor"></a>All errors that occur when a statement or statement sequence does not conform to its requirements are signaled automatically. In your program, you can establish additional requirements for your own application. When a requirement is not met, you can execute a <code class="codeph">SIGNAL</code> statement to signal an error.
                        </p>
                        <p>You can give the error any name. When a <code class="codeph">SIGNAL</code> statement is executed, the error name you specify is stored in the <code class="codeph">ERRORNAME</code> option, just as an OLAP DML error name is automatically stored. When you specify your own error message in a <code class="codeph">SIGNAL</code> statement, then your message is produced just as an OLAP DML error message is produced. When you are using a <code class="codeph">TRAP</code> statement to trap errors, a <code class="codeph">SIGNAL</code> statement branches to the <code class="codeph">TRAP</code> label after the error message is produced.
                        </p>
                        <p>For an example of signaling an error, see <a href="olap-dml-commands-h-z.html#GUID-5395AE41-C6A2-4AD4-A1AC-606B3986A3CA__CHDCDDAI">Example 10-123</a>.
                        </p>
                        <p>When you want to produce a warning message without branching to an error label, then you can use a <code class="codeph">SHOW</code> statement as illustrated in <a href="olap-dml-commands-h-z.html#GUID-0E4911F1-FBE6-463E-BB00-BB4419E0AF1C__CHDDCAAA">Example 10-121</a>.
                        </p>
                     </div>
                  </div><a id="OLADM284"></a><div class="props_rev_3"><a id="GUID-485092D6-D203-40C3-823E-D54DBDFCE74D" name="GUID-485092D6-D203-40C3-823E-D54DBDFCE74D"></a><h5 id="OLADM-GUID-485092D6-D203-40C3-823E-D54DBDFCE74D" class="sect5"><span class="enumeration_section">6.3.5.5 </span>Handling Errors in Nested Programs
                     </h5>
                     <div>
                        <p>When handling errors in nested programs, the error-handling section in each program should restore the environment. It can also handle any special error conditions that are particular to that program. For example, when your program signals its own error, then you can include statements that test for that error.</p>
                        <p>Any other errors that occur in a nested program should be passed up through the chain of programs and handled in each program. To pass errors through a chain of nested programs, you can use one of two methods, depending on when you want the error message to be produced:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The error message is produced immediately, and the error condition is then passed through the chain of programs as illustrated in <a href="olap-dml-commands-h-z.html#GUID-F1C50CA4-3D41-47A2-924F-567C2A36BFB3__CHDBJGHD">Example 10-157</a>.
                              </p>
                           </li>
                           <li>
                              <p>The error is passed through the chain of programs first, and the error message is produced at the end of the chain as illustrated in<a href="olap-dml-commands-h-z.html#GUID-F1C50CA4-3D41-47A2-924F-567C2A36BFB3__CHDDHFCC">Example 10-158</a>.
                              </p>
                           </li>
                        </ul>
                        <p>A <code class="codeph">SIGNAL</code> statement is used in both methods.
                        </p>
                     </div>
                  </div><a id="OLADM285"></a><div class="props_rev_3"><a id="GUID-F9AF0FF1-D873-40FA-AF5A-90205320926D" name="GUID-F9AF0FF1-D873-40FA-AF5A-90205320926D"></a><h5 id="OLADM-GUID-F9AF0FF1-D873-40FA-AF5A-90205320926D" class="sect5"><span class="enumeration_section">6.3.5.6 </span>Handling Errors While Saving the Session Environment
                     </h5>
                     <div>
                        <p><a id="d57722e1622" class="indexterm-anchor"></a><a id="d57722e1626" class="indexterm-anchor"></a>To correctly handle errors that might occur while you are saving the session environment, place your <code class="codeph">PUSHLEVEL</code> statement before the <code class="codeph">TRAP</code> statement and your <code class="codeph">PUSH</code> statements after the <code class="codeph">TRAP</code> statement.
                        </p><pre class="oac_no_warn" dir="ltr">PUSHLEVEL 'firstlevel'
TRAP ON error
PUSH 
 ...</pre><pre class="oac_no_warn" dir="ltr"></pre><p><a id="d57722e1647" class="indexterm-anchor"></a>In the abnormal exit section of your program, place the error label (followed by a colon) and the statements that restore the session environment and handle errors. The abnormal exit section might look like this.
                        </p><pre class="oac_no_warn" dir="ltr">error:
POPLEVEL 'firstlevel'
OUTFILE EOF</pre><pre class="oac_no_warn" dir="ltr"></pre><p>These statements restore saved dimension status and option values and reroute output to the default outfile.</p>
                     </div>
                  </div>
               </div>
            </div><a id="OLADM286"></a><a id="olapdml_compiling_programs"></a><div class="props_rev_3"><a id="GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC" name="GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC"></a><h3 id="OLADM-GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC" class="sect3"><span class="enumeration_section">6.4 </span>Compiling Programs
               </h3>
               <div>
                  <p>You can explicitly compile a program by using a <code class="codeph">COMPILE</code> statement. If you do not explicitly compile a program, then it is compiled when you run the program for the first time.
                  </p>
                  <p><a id="d57722e1692" class="indexterm-anchor"></a><a id="d57722e1696" class="indexterm-anchor"></a>When a program is compiled, it translates the program statements into efficient processed code that executes much more rapidly than the original text of the program. When errors are encountered in the program, then the compilation is not completed, and the program is considered to be uncompiled.
                  </p>
                  <p><a id="d57722e1702" class="indexterm-anchor"></a><a id="d57722e1706" class="indexterm-anchor"></a>After you compile a program, the compiled code is used each time you run the program in the current session. When you update and commit your analytic workspace after compiling a program, the compiled code is saved in your analytic workspace and used to run the program in future sessions. Therefore, be sure to update and commit after compiling a program. Issuing an update and commit after program compilation is particularly critical when the program is part of an application that is run by many users. Unless the compiled version of the program is saved in the analytic workspace, the program is recompiled individually in each user session.
                  </p>
                  <p><a href="olap-dml-commands-a-g.html#GUID-932941E8-A664-4E93-BFE5-4E60AFC02D19__CHDGDAFC">Example 9-69</a> illustrates using COMPILE to compile a program
                  </p>
               </div><a id="OLADM287"></a><div class="props_rev_3"><a id="GUID-B04A6F75-3396-4D26-AD2F-A444842ADB10" name="GUID-B04A6F75-3396-4D26-AD2F-A444842ADB10"></a><h4 id="OLADM-GUID-B04A6F75-3396-4D26-AD2F-A444842ADB10" class="sect4"><span class="enumeration_section">6.4.1 </span>Finding Out If a Program Has Been Compiled
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">ISCOMPILED</code> choice of the <code class="codeph">OBJ</code> function to determine whether a specific program in your analytic workspace has been compiled since the last time it was modified. The function returns a Boolean value.
                     </p><pre class="oac_no_warn" dir="ltr">SHOW OBJ(ISCOMPILED 'myprogram')</pre></div>
               </div><a id="OLADM288"></a><div class="props_rev_3"><a id="GUID-88F8F231-9CF1-4ECD-8977-3FB2F9386A21" name="GUID-88F8F231-9CF1-4ECD-8977-3FB2F9386A21"></a><h4 id="OLADM-GUID-88F8F231-9CF1-4ECD-8977-3FB2F9386A21" class="sect4"><span class="enumeration_section">6.4.2 </span>Programming Methods That Prevent Compilation
                  </h4>
                  <div>
                     <p>Program lines that include ampersand substitution are <span class="italic">not</span> compiled. Any syntax errors are not caught until the program is run. A program whose other lines compiled correctly is considered to be a compiled program.
                     </p>
                     <p>When your program defines an object and then uses the object in the program, the program cannot be compiled. <code class="codeph">COMPILE</code> treats the reference to the object as a misspelling because the object does not yet exist in the analytic workspace.
                     </p>
                  </div>
               </div>
            </div><a id="OLADM289"></a><a id="olapdml_testing_debug_programs"></a><div class="props_rev_3"><a id="GUID-08276648-C7E2-4B1C-A107-A372450210D0" name="GUID-08276648-C7E2-4B1C-A107-A372450210D0"></a><h3 id="OLADM-GUID-08276648-C7E2-4B1C-A107-A372450210D0" class="sect3"><span class="enumeration_section">6.5 </span>Testing and Debugging Programs
               </h3>
               <div>
                  <p><a id="d57722e1820" class="indexterm-anchor"></a><a id="d57722e1824" class="indexterm-anchor"></a>Even when your program compiles cleanly, you must also test the program by running it. Running a program helps you detect errors in statements with ampersand substitution, errors in logic, and errors in any nested programs.
                  </p>
                  <p>To test a program by running it, use a full set of test data that is typical of the data that the program processes. To confirm that you test all the features of the program, including error-handling mechanisms, run the program several times, using different data and responses. Use test data that:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Falls within the expected range</p>
                     </li>
                     <li>
                        <p>Falls outside the expected range</p>
                     </li>
                     <li>
                        <p>Causes each section of a program to execute</p>
                     </li>
                  </ul>
               </div><a id="OLADM290"></a><div class="props_rev_3"><a id="GUID-A3A12991-61AE-453E-A2A0-CD344D131B3E" name="GUID-A3A12991-61AE-453E-A2A0-CD344D131B3E"></a><h4 id="OLADM-GUID-A3A12991-61AE-453E-A2A0-CD344D131B3E" class="sect4"><span class="enumeration_section">6.5.1 </span>Generating Diagnostic Messages
                  </h4>
                  <div>
                     <p>Each time you run the program, confirm that the program executes its statements in the correct sequence and that the output is correct. As an aid in analyzing the execution of your program, you can include <code class="codeph">SHOW</code> or TRACE statements in the program to produce diagnostic or status messages. Then delete the <code class="codeph">these</code> statements after your tests are complete.
                     </p>
                     <p>When you detect or suspect an error in your program or a nested program, you can track down the error by using the debugging techniques that are described in the rest of this section.</p>
                  </div>
               </div><a id="OLADM291"></a><div class="props_rev_3"><a id="GUID-80BE649E-C979-44BE-99F5-97E13810C429" name="GUID-80BE649E-C979-44BE-99F5-97E13810C429"></a><h4 id="OLADM-GUID-80BE649E-C979-44BE-99F5-97E13810C429" class="sect4"><span class="enumeration_section">6.5.2 </span>Identifying Bad Lines of Code
                  </h4>
                  <div>
                     <p><a id="d57722e1908" class="indexterm-anchor"></a>When you set the BADLINE option to <code class="codeph">YES</code>, additional information is produced, along with any error message when a bad line of code is encountered. When the error occurs, the error message, the name of the program, and the program line that triggered the error are sent to the current outfile. You can edit the specified program to correct the error and then run the original program. See <a href="olap-dml-options.html#GUID-7FEA0D37-47DF-4547-8BF1-296E91622F2A__CHDHEFID">Example 5-4</a> for an example of using BADLINE.
                     </p>
                  </div>
               </div><a id="OLADM292"></a><div class="props_rev_3"><a id="GUID-158C8FC7-0438-4340-9D63-0B0E57A071DF" name="GUID-158C8FC7-0438-4340-9D63-0B0E57A071DF"></a><h4 id="OLADM-GUID-158C8FC7-0438-4340-9D63-0B0E57A071DF" class="sect4"><span class="enumeration_section">6.5.3 </span>Sending Output to a Debugging File
                  </h4>
                  <div>
                     <p>When your program contains an error in logic, then the program might execute without producing an error message, but it executes the wrong set of statements or produces incorrect results. For example, suppose you write a Boolean expression incorrectly in an <code class="codeph">IF</code> statement (for example, you use <code class="codeph">NE</code> instead of <code class="codeph">EQ</code>). The program executes the statements you specified, but it does so under the wrong conditions.
                     </p>
                     <p>To find an error in program logic, you must often see the order in which the statements are being executed. One way you can do this is to create a debugging file and then examine the file to diagnose any problems in your programs by issuing the following DML statements:</p>
                     <ol>
                        <li>
                           <p>C<a id="d57722e1962" class="indexterm-anchor"></a>reate a debugging file, by issuing an DBGOUTFILE statement. 
                           </p>
                        </li>
                        <li>
                           <p>Specify that you want each program line to be sent to the debugging file when a line executes by setting the PRGTRACE option to <code class="codeph">YES</code>.
                           </p>
                        </li>
                        <li>
                           <p><a id="d57722e1973" class="indexterm-anchor"></a>(Optional) When you want the debugging file to interweave the program lines with both the program input and error messages, set the ECHOPROMPT option to <code class="codeph">YES</code>.
                           </p>
                        </li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-158C8FC7-0438-4340-9D63-0B0E57A071DF__GUID-2D6C7BB7-ABEF-442E-9E19-B0381A695A01">
                        <p class="notep1">See Also:</p>
                        <p>The following examples of using a debugging file:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="olap-dml-commands-a-g.html#GUID-1B5FA1D0-5147-471B-B3AD-C16504825FDB__CHDBDJGH">Example 9-76</a></p>
                           </li>
                           <li>
                              <p><a href="olap-dml-commands-a-g.html#GUID-1B5FA1D0-5147-471B-B3AD-C16504825FDB__CHDIAHIB">Example 9-77</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="OLADM293"></a><a id="olapdml_executing_programs"></a><div class="props_rev_3"><a id="GUID-6DF87053-F027-45F6-873B-EE240C3F33BE" name="GUID-6DF87053-F027-45F6-873B-EE240C3F33BE"></a><h3 id="OLADM-GUID-6DF87053-F027-45F6-873B-EE240C3F33BE" class="sect3"><span class="enumeration_section">6.6 </span>Executing Programs
               </h3>
               <div>
                  <p><a id="d57722e2020" class="indexterm-anchor"></a>You can invoke a program that does not return a value by using a CALL statement. You enclose arguments in parentheses, and they are passed by value. For example, suppose you create a simple program named <code class="codeph">addit</code> to add two <code class="codeph">INTEGER</code> values. You can use a CALL statement in the main program of your application to invoke the program. 
                  </p>
                  <p>You can also invoke programs in much the same way as you issue OLAP DML statements. You invoke user-defined functions in the same way as you use built-in functions. You use the program name in an expression and enclose the program arguments, if any, in parentheses. For a program that does not return a value (a user-defined command), you use the program name as you would an OLAP DML command. When you invoke a user-defined program as a function, the program returns <code class="codeph">NA</code>.
                  </p>
                  <p>You can also create programs that execute automatically when Oracle OLAP:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Executes an AW ATTACH. AW CREATE, AW DELETE, AW DETACH, DEFINE, MAINTAIN, PROPERTY, UPDATE, or SET statement as described in <span class="q">"<a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">Trigger Programs</a>"</span>.
                        </p>
                     </li>
                     <li>
                        <p>Encounters an <code class="codeph">NA</code> value as described in $NATRIGGER.
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="OLADM294"></a><a id="olapdml_programs_common_types"></a><div class="props_rev_3"><a id="GUID-A8D9BF45-CC71-4BC8-A6A9-2ACC2AD3CBF0" name="GUID-A8D9BF45-CC71-4BC8-A6A9-2ACC2AD3CBF0"></a><h3 id="OLADM-GUID-A8D9BF45-CC71-4BC8-A6A9-2ACC2AD3CBF0" class="sect3"><span class="enumeration_section">6.7 </span>Common Types of OLAP DML Programs 
               </h3>
               <div>
                  <p>This section provides overview information about the following types of programs:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">Startup Programs</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-DB16D297-DC42-4E8F-AEF7-7BC11650D51E">Data Import and Export Programs</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">Trigger Programs</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-91C66052-0A4C-473B-A613-2828EDF37D0F">Aggregation, Allocation, and Modeling Programs</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-90BB4BA6-6284-4B12-A1AB-6C3765F9C2F4">Forecasting Programs</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-2631B3CE-BCEC-4AAA-914B-BE1CE9E60002">Programs to Export and Import Workspace Objects</a></p>
                     </li>
                  </ul>
               </div><a id="OLADM295"></a><div class="props_rev_3"><a id="GUID-128665B4-3043-47DA-B474-D164EA25908E" name="GUID-128665B4-3043-47DA-B474-D164EA25908E"></a><h4 id="OLADM-GUID-128665B4-3043-47DA-B474-D164EA25908E" class="sect4"><span class="enumeration_section">6.7.1 </span>Startup Programs
                  </h4>
                  <div>
                     <p><a id="d57722e2137" class="indexterm-anchor"></a>Startup programs are programs that you write and that Oracle OLAP checks for by name when an AW ATTACH statement executes. Startup programs do not exist within an analytic workspace unless you define and write them. In a startup program you can execute any OLAP DML statements, or run any of your own programs. For example, a startup program might set options to values appropriate to your application.
                     </p>
                     <p>When you first attach an analytic workspace, Oracle OLAP looks for and executes the Oracle OLAP startup programs (if they exist) in the order indicated:</p>
                     <ol>
                        <li>
                           <p>Permission programs. The execution of a permission program is determined by the attachment mode specified in the AW ATTACH statement and whether or not a related permission program exists in the analytic workspace you are attaching. For more information, see <span class="q">"<a href="olap-dml-programs.html#GUID-92DA4681-6C52-40E6-AE18-C0285558073B">Permission Programs</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>OnAttach programs. The execution of an OnAttach program is determined by how you code the ONATTACH and NOONATTACH clauses of the AW ATTACH statement and whether or not a program named ONATTACH exists in the analytic workspace you are attaching. For more information, see <span class="q">"<a href="olap-dml-programs.html#GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3">OnAttach Programs</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Autogo programs. The execution of an Autogo program is determined by how you code the AUTOGO and NOAUTOGO clauses of the AW ATTACH statement and whether or not a program named AUTOGO exists in the analytic workspace you are attaching. For more information, see <span class="q">"<a href="olap-dml-programs.html#GUID-1CD2A042-A915-4BEC-8ACD-429109BB1747">Autogo Programs</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Trigger program. The execution of a Trigger program is determined by whether or not a program named TRIGGER_AW exists in an already attached analytic workspace. When a TRIGGER_AW program exists in one attached analytic workspace, it is executed whenever you create, attach, detach, or delete any other analytic workspace. For more information, see <span class="q">"<a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">Trigger Programs</a>"</span> and <a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525">TRIGGER_AW</a>.
                           </p>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-128665B4-3043-47DA-B474-D164EA25908E__GUID-60DD9BA7-473E-4BBC-A68B-C1B5B6CDB760">
                        <p class="notep1">Note:</p>
                        <p>Within a session, when you:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Reattach an attached workspace, Oracle OLAP does <span class="italic">not</span> look for and execute permission programs and OnAttach programs.
                              </p>
                           </li>
                           <li>
                              <p>Reattach a previously detached workspace, Oracle OLAP does not execute permission programs, OnAttach programs, or Autogo programs, <span class="italic">unless</span> you detached that workspace using an AW DETACH statement that included the NOCACHE keyword .
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="OLADM1429"></a><a id="OLADM296"></a><div class="props_rev_3"><a id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B" name="GUID-92DA4681-6C52-40E6-AE18-C0285558073B"></a><h5 id="OLADM-GUID-92DA4681-6C52-40E6-AE18-C0285558073B" class="sect5"><span class="enumeration_section">6.7.1.1 </span>Permission Programs
                     </h5>
                     <div>
                        <p><a id="d57722e2222" class="indexterm-anchor"></a>Permission programs are programs that you write that give permission to users to access workspace data. <a id="d57722e2227" class="indexterm-anchor"></a><a id="d57722e2231" class="indexterm-anchor"></a><a id="d57722e2233" class="indexterm-anchor"></a><a id="d57722e2235" class="indexterm-anchor"></a>When a user first attaches an analytic workspace, Oracle OLAP checks to see if a permission program that is appropriate for the attachment mode exists. 
                        </p>
                        <div class="infoboxnote" id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B__GUID-607CEE1A-51BA-447D-ACAF-F4D691772B90">
                           <p class="notep1">Note:</p>
                           <p>When you reattach an attached workspace, Oracle OLAP does <span class="italic">not</span> look for and execute permission programs.
                           </p>
                        </div>
                        <p>The permission program for each attachment mode must have a particular name as outlined in the following table:</p>
                        <div class="tblformal" id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B__CHDHEDEJ">
                           <p class="titleintable">Table 6-2 Names of Permission Programs for Different Attachment Modes</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Names of Permission Programs for Different Attachment Modes" summary="This table lists the program names that you need to use to create a permission program for the various analytic workspace attachment modes." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="44%" id="d57722e2256">Attachment Modes</th>
                                    <th align="left" valign="bottom" width="56%" id="d57722e2259">Name of Program</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="44%" id="d57722e2264" headers="d57722e2256 ">
                                       <p>Read-only</p>
                                    </td>
                                    <td align="left" valign="top" width="56%" headers="d57722e2264 d57722e2259 ">
                                       <p><a href="olap-dml-programs.html#GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4">PERMIT_READ</a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="44%" id="d57722e2272" headers="d57722e2256 ">
                                       <p>Multiwriter, Read/write</p>
                                    </td>
                                    <td align="left" valign="top" width="56%" headers="d57722e2272 d57722e2259 ">
                                       <p><a href="olap-dml-programs.html#GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E">PERMIT_WRITE</a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>When an appropriate permission program exists, Oracle OLAP executes the program. When a user specifies a password when attaching the analytic workspace, then the password is passed as an argument to the permission program for processing.</p>
                        <div class="infoboxnote" id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B__GUID-8206F76F-1F7C-4D5F-95BF-27C4DD4EE45B">
                           <p class="notep1">Note:</p>
                           <p>A dimension surrogate has the access permissions of its dimension. Use a PERMIT on a dimension to grant or deny permission to access the values of a dimension surrogate for that dimension.</p>
                        </div>
                        <p>Permission programs allow you to control two levels of access to the analytic workspace in which they reside.</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Access at the analytic workspace level—Depending on the return value of the permission program, the user is or is not granted access to the entire analytic workspace. You can use the return value to indicate to Oracle OLAP whether or not the user has the right to attach the workspace.</p>
                           </li>
                           <li>
                              <p>Access at the object level—Within a permission program for read-only or read/write attachment, you can specify PERMIT statements that grant or restrict access to individual workspace objects. PERMIT programs must be in the same workspace as the objects for which they issue PERMIT statements.</p>
                              <div class="infoboxnote" id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B__GUID-38608803-45C8-4F17-A9FE-AAA006756F3F">
                                 <p class="notep1">Note:</p>
                                 <p>All of the objects referred to in a given permission program must exist in the same analytic workspace.</p>
                              </div>
                           </li>
                        </ul>
                        <p>To create a permission program, define a user-defined function (as described in <span class="q">"<a href="olap-dml-programs.html#GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289">Creating User-Defined Functions</a>"</span>) with a recognized name, then define the contents for the program as described in <span class="q">"<a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">Specifying Program Contents</a>"</span>. 
                        </p>
                     </div>
                  </div><a id="OLADM297"></a><div class="props_rev_3"><a id="GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3" name="GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3"></a><h5 id="OLADM-GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3" class="sect5"><span class="enumeration_section">6.7.1.2 </span>OnAttach Programs
                     </h5>
                     <div>
                        <p><a id="d57722e2335" class="indexterm-anchor"></a>An OnAttach program can have any name or it can explicitly be named <code class="codeph">ONATTACH</code>.
                        </p>
                        <div class="infoboxnote" id="GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3__GUID-9EBB720F-15DA-42C6-B404-B253E9CDDD28">
                           <p class="notep1">Note:</p>
                           <p>When an analytic workspace is created as an OLAP cube using the OLAP API, the OLAP API may also create a program named <code class="codeph">ONATTACH</code>. You cannot modify an <code class="codeph">ONATTACH</code> program that is automatically created in this way. Additionally, overriding the execution of <code class="codeph">ONATTACH</code> is not recommended.
                           </p>
                           <p>Consequently, when this type of <code class="codeph">ONATTACH</code> program exists in an analytic workspace, create a different type of startup program to specify behavior that you want performed when that analytic workspace is attached.
                           </p>
                        </div>
                        <p>How you specify the execution of an OnAttach program varies depending on its name:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When a program named <code class="codeph"><a href="olap-dml-programs.html#GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE">ONATTACH</a></code>. exists in an analytic workspace, each time you attach the workspace, that program executes automatically unless you include a NOOTTACH keyword in the AW ATTACH statement, or unless you include an ONATTACH clause that specifies a different program name.
                              </p>
                           </li>
                           <li>
                              <p>To execute an OnAttach program that is not named <code class="codeph">ONATTACH</code>, specify the name of the program within the ONATTACH clause of <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> statement.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3__GUID-CC1B1E91-FF64-4F87-81BD-49A072F48D94">
                           <p class="notep1">Note:</p>
                           <p>When you reattach an attached cached workspace, Oracle OLAP does <span class="italic">not</span> look for and execute OnAttach programs. To force an analytic worksapce to be fully detached so that Oracle OLAP will look for and execute OnAttach programs when you retach the workspace, specify the NOCACHE keyword in the DETACH statement that detaches the analytic workspace.
                           </p>
                        </div>
                     </div>
                  </div><a id="OLADM1430"></a><div class="props_rev_3"><a id="GUID-1CD2A042-A915-4BEC-8ACD-429109BB1747" name="GUID-1CD2A042-A915-4BEC-8ACD-429109BB1747"></a><h5 id="OLADM-GUID-1CD2A042-A915-4BEC-8ACD-429109BB1747" class="sect5"><span class="enumeration_section">6.7.1.3 </span>Autogo Programs
                     </h5>
                     <div>
                        <p><a id="d57722e2415" class="indexterm-anchor"></a>An Autogo program can have any name or it can explicitly be named <code class="codeph">AUTOGO</code>.
                        </p>
                        <p>How you specify the execution of an Autogo program varies depending on its name:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When a program named <a href="olap-dml-programs.html#GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B">AUTOGO</a> exists in an analytic workspace, each time you attach the workspace, that program executes automatically unless you include a NOAUTOGO keyword in the AW ATTACH statement, or unless you include an AUTOGO clause that specifies a different program name.
                              </p>
                           </li>
                           <li>
                              <p>To execute an Autogo program that is not named <code class="codeph">AUTOGO</code>, specify the name of the program within the AUTOGO clause of <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> statement.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="OLADM298"></a><div class="props_rev_3"><a id="GUID-DB16D297-DC42-4E8F-AEF7-7BC11650D51E" name="GUID-DB16D297-DC42-4E8F-AEF7-7BC11650D51E"></a><h4 id="OLADM-GUID-DB16D297-DC42-4E8F-AEF7-7BC11650D51E" class="sect4"><span class="enumeration_section">6.7.2 </span>Data Import and Export Programs
                  </h4>
                  <div>
                     <p><a id="d57722e2470" class="indexterm-anchor"></a><a id="d57722e2474" class="indexterm-anchor"></a><a id="d57722e2478" class="indexterm-anchor"></a><a id="d57722e2480" class="indexterm-anchor"></a>The OLAP DML provides support for importing data from relational tables, flat files, and spreadsheets into analytic workspace objects; and for exporting data from analytic workspace objects to relational tables, flat files, and spreadsheets.
                     </p>
                  </div><a id="OLADM299"></a><div class="props_rev_3"><a id="GUID-E83E19C5-2117-4E4D-80E0-10E45D646F79" name="GUID-E83E19C5-2117-4E4D-80E0-10E45D646F79"></a><h5 id="OLADM-GUID-E83E19C5-2117-4E4D-80E0-10E45D646F79" class="sect5"><span class="enumeration_section">6.7.2.1 </span>Importing Data to and Exporting Data from Relational Tables
                     </h5>
                     <div>
                        <p>You can embed SQL statements in OLAP DML programs using the OLAP DML SQL statement. Using the OLAP DML SQL statement you can import data from relational tables into analytic workspace objects and export data from analytic workspace objects to relational tables. </p>
                     </div><a id="OLADM300"></a><div class="props_rev_3"><a id="GUID-100070C8-819C-4DD9-AB37-C81E8CC57CFB" name="GUID-100070C8-819C-4DD9-AB37-C81E8CC57CFB"></a><h6 id="OLADM-GUID-100070C8-819C-4DD9-AB37-C81E8CC57CFB" class="sect6"><span class="enumeration_section">6.7.2.1.1 </span>Importing Data From Relational Tables to Workspace Objects
                        </h6>
                        <div>
                           <p><a id="d57722e2542" class="indexterm-anchor"></a>Using the OLAP DML SQL statement within an OLAP DML program you can copy relational data into analytic workspace objects using either an implicit cursor or an explicit cursor:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To copy data from relational tables into analytic workspace objects using an implicit cursor, use the SQL SELECT statement. You can use this OLAP DML statement interactively in the OLAP Worksheet or within an OLAP DML program.</p>
                              </li>
                              <li>
                                 <p>To copy data from relational tables into analytic workspace objects using an explicit cursor, use the following statements in the order indicated. You can only use these statements within an OLAP DML program. You cannot use them interactively in the OLAP Worksheet.</p>
                                 <ol>
                                    <li>
                                       <p>SQL DECLARE CURSOR defines a SQL cursor by associating it with a SELECT statement or procedure.</p>
                                    </li>
                                    <li>
                                       <p>SQL OPEN activates a SQL cursor.</p>
                                    </li>
                                    <li>
                                       <p>SQL FETCH and SQL IMPORT retrieve and process data specified by a cursor.</p>
                                    </li>
                                    <li>
                                       <p>SQL CLOSE closes a SQL cursor.</p>
                                    </li>
                                    <li>
                                       <p>SQL CLEANUP cancels a SQL cursor declaration and frees the memory resources of an SQL cursor.</p>
                                    </li>
                                 </ol>
                              </li>
                           </ul>
                           <p>For examples of programs that copy table data into workspace objects, see <a href="olap-dml-commands-h-z.html#GUID-45FC5AC8-1CEB-4DBB-9F21-3A858F2E5022">SQL FETCH</a> and <a href="olap-dml-commands-h-z.html#GUID-E185DE15-2F8F-4476-B8FA-8FAC6F02FB00">SQL IMPORT</a>.
                           </p>
                        </div>
                     </div><a id="OLADM301"></a><div class="props_rev_3"><a id="GUID-0E42AE27-B1A9-4DCC-9389-81125CED3DDE" name="GUID-0E42AE27-B1A9-4DCC-9389-81125CED3DDE"></a><h6 id="OLADM-GUID-0E42AE27-B1A9-4DCC-9389-81125CED3DDE" class="sect6"><span class="enumeration_section">6.7.2.1.2 </span>Exporting Data from OLAP DML Objects to Relational Tables
                        </h6>
                        <div>
                           <p>Within a program, you can use an OLAP DML SQL statement with the INSERT keyword to copy data from analytic workspace objects into relational tables. Typically, you do this by issuing the following statements in your OLAP DML program:</p>
                           <ol>
                              <li>
                                 <p>SQL PREPARE statements,<a id="d57722e2612" class="indexterm-anchor"></a> to precompile the INSERT and UPDATE statements.
                                 </p>
                              </li>
                              <li>
                                 <p>SQL EXECUTE statements, to execute the statements that you precompiled in Step 1.</p>
                              </li>
                           </ol>
                        </div>
                     </div>
                  </div><a id="OLADM302"></a><div class="props_rev_3"><a id="GUID-3A4F1783-9569-4798-A906-0FF5383BF801" name="GUID-3A4F1783-9569-4798-A906-0FF5383BF801"></a><h5 id="OLADM-GUID-3A4F1783-9569-4798-A906-0FF5383BF801" class="sect5"><span class="enumeration_section">6.7.2.2 </span>Importing Data to and Exporting Data from Flat Files
                     </h5>
                     <div>
                        <p>Oracle OLAP provides several statements that you can use to read data from flat files or to write data to flat files. These statements are frequently used together in a special program. </p>
                     </div>
                  </div><a id="OLADM303"></a><div class="props_rev_3"><a id="GUID-75907607-5BBF-45E8-A225-B970B6C0F924" name="GUID-75907607-5BBF-45E8-A225-B970B6C0F924"></a><h5 id="OLADM-GUID-75907607-5BBF-45E8-A225-B970B6C0F924" class="sect5"><span class="enumeration_section">6.7.2.3 </span>Importing Data to and Exporting Data from Spreadsheets
                     </h5>
                     <div>
                        <p>Within an OLAP DML program you can use an IMPORT statement to import data from a spreadsheet into analytic workspace objects. You can use an EXPORT statement to export data from analytic workspace objects into a spreadsheet.</p>
                     </div>
                  </div>
               </div><a id="OLADM304"></a><div class="props_rev_3"><a id="GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0" name="GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0"></a><h4 id="OLADM-GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0" class="sect4"><span class="enumeration_section">6.7.3 </span>Trigger Programs
                  </h4>
                  <div>
                     <p>DEFINE, MAINTAIN, PROPERTY, SET (=) UPDATE, and AW commands are recognized by Oracle OLAP as events that can trigger the execution of OLAP DML programs. </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Programs triggered by DEFINE, MAINTAIN, PROPERTY, UPDATE, or SET commands, are called object trigger programs and are discussed in this section and in the topic for the <a href="olap-dml-commands-h-z.html#GUID-44E6A949-B977-4B2F-AA11-34C1F1D1A4E0">TRIGGER command</a>.
                           </p>
                        </li>
                        <li>
                           <p>A program named <a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525">TRIGGER_AW</a> that is defined within one analytic workspace and which is triggered when another analytic workspace is created, attached, detached or deleted. See the discussion of the <span class="q">"<a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525">TRIGGER_AW</a>"</span>  for more information.
                           </p>
                        </li>
                     </ul>
                     <p>Trigger programs are frequently written to maintain application-specific metadata. Trigger programs have certain characteristics depending on the statement that triggers them. Some trigger programs execute before the triggering statement executes; some after. Oracle OLAP passes arguments to programs triggered by some statements, but not others. Oracle OLAP does not change dimension status before most trigger programs execute, but does change dimension status before some MAINTAIN statements trigger program execution. In most cases, you can give a trigger program any name that you choose, but some events require a program with a specific name. <span class="q">"<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1">Characteristics of Object Trigger Programs</a>"</span> discusses these characteristics.
                     </p>
                     <div class="infoboxnotealso" id="GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0__GUID-F85E757B-B070-4C39-B088-8F3A519C3BD5">
                        <p class="notep1">See Also:</p>
                        <p>The following statements:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="olap-dml-functions-l-z.html#GUID-A0FB7103-D63D-42B9-ADC8-2CE3E1A2C732">TRIGGER function</a>, <a href="olap-dml-commands-a-g.html#GUID-A90506EF-24DF-44C0-86CA-0D51AFAD921B">DESCRIBE</a> command, and <a href="olap-dml-functions-l-z.html#GUID-4AD8C727-8B19-4840-8F68-C11EF7E08DC3">OBJ</a> function that retrieve information about triggers.
                              </p>
                           </li>
                           <li>
                              <p><a href="olap-dml-options.html#GUID-37D42DE3-B227-4A22-84F0-74CFC946A3CD">USETRIGGERS</a> option that you can use to disable all triggers.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="OLADM305"></a><div class="props_rev_3"><a id="GUID-A5B8C035-27E8-4595-AC2F-BD158A998554" name="GUID-A5B8C035-27E8-4595-AC2F-BD158A998554"></a><h5 id="OLADM-GUID-A5B8C035-27E8-4595-AC2F-BD158A998554" class="sect5"><span class="enumeration_section">6.7.3.1 </span>Creating an Object Trigger Program
                     </h5>
                     <div>
                        <div class="section">
                           <p>Once an object is defined in an analytic workspace, you can create a trigger program for that object by following the following procedure:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Define the program as described in DEFINE PROGRAM. </span></li>
                           <li class="stepexpand"><span>Determine what to name the program and whether the program can be a user-defined program. (See <a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB" title="This table lists the OLAP DML statements that trigger programs, the required name of the program (if any), whether or not you can define the program as a function, and whether or not the program requires arguments.">Table 6-3</a>.) If the program can be a user-defined program, decide whether or not you want to define the trigger program as a user-defined function. </span></li>
                           <li class="stepexpand"><span>Code the actual program as described in<span class="q">"<a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">Specifying Program Contents</a>"</span>. </span></li>
                           <li class="stepexpand"><span>Keep the following points in mind when coding trigger programs:</span><div>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Use <a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB" title="This table lists the OLAP DML statements that trigger programs, the required name of the program (if any), whether or not you can define the program as a function, and whether or not the program requires arguments.">Table 6-3</a> to determine if Oracle OLAP passes values to the program. If it does, use an ARGUMENT statement to declare these arguments in your program and the VARIABLE statement to define program variables for the values. (See <a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIIFJI" title="This table describes the arguments of trigger programs that require arguments.">Table 6-4</a> for specific information about the arguments.)
                                       </p>
                                    </li>
                                    <li>
                                       <p>A program that is triggered by an Assign event is executed each time Oracle OLAP assigns a value to the object for which the event was defined. Thus, a program triggered by an Assign event is often executed over and over again as the assignment statements loops through an object assigning values. You can use TRIGGERASSIGN to assign a value that is different from the value specified by the assignment statement that triggered the execution of the program.</p>
                                    </li>
                                    <li>
                                       <p>In some cases, Oracle OLAP changes the status of the dimension being maintained when a Maintain event triggers the execution of a program. See <a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGCCCAI" title="This table explains how Oracle OLAP changes the status of the dimension being maintained when a Maintain event triggeres the execution of a program.">Table 6-5</a> for details
                                       </p>
                                    </li>
                                    <li>
                                       <p>Use the CALLTYPE function within a program to identify that the program was invoked as a trigger.</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>When the trigger program is <span class="italic">not</span> a TRIGGER_AFTER_UPDATE, TRIGGER_BEFORE_UPDATE, or TRIGGER_DEFINE program, associate the program with the desired object and event using the TRIGGER command.</span></li>
                           <li class="stepexpand"><span>There is no support for recursive triggers. You must set the USETRIGGERS option to <code class="codeph">NO</code> before you issue the same DML statement <span class="italic">within</span> a trigger program that triggered the program itself. For example, assume that you have written a program named <code class="codeph">TRIGGER_MAINTAIN_ADD</code> that is triggered by MAINTAIN ADD statements. Within the <code class="codeph">TRIGGER_MAINTAIN_ADD</code> program, you must set the USETRIGGERS option to <code class="codeph">NO</code> before you issue a MAINTAIN statement.</span></li>
                        </ol>
                     </div>
                  </div><a id="OLADM1431"></a><a id="OLADM1432"></a><a id="OLADM1433"></a><a id="OLADM306"></a><div class="props_rev_3"><a id="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1" name="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1"></a><h5 id="OLADM-GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1" class="sect5"><span class="enumeration_section">6.7.3.2 </span>Characteristics of Object Trigger Programs
                     </h5>
                     <div>
                        <p>Object t<a id="d57722e2894" class="indexterm-anchor"></a><a id="d57722e2898" class="indexterm-anchor"></a>rigger programs have certain characteristics depending on the statement that triggers them. Some trigger programs execute before the triggering statement executes; some after. Oracle OLAP passes arguments to programs triggered by some statements, but not others. Oracle OLAP does not change dimension status before most trigger programs execute, but does change dimension status before some MAINTAIN statements trigger program execution. In most cases, you can give a trigger program any name that you choose, but some events require a program with a specific name.
                        </p>
                        <p><a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB" title="This table lists the OLAP DML statements that trigger programs, the required name of the program (if any), whether or not you can define the program as a function, and whether or not the program requires arguments.">Table 6-3</a> lists the OLAP DML statements that trigger programs, the required name of the program (if any), whether or not Oracle OLAP uses values returned by the program, and whether or not Oracle OLAP passes arguments to the program. 
                        </p>
                        <p>Keep the following points in mind when designing trigger programs:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Triggers that execute <span class="italic">before</span> the DML statement—For trigger programs that execute before the triggering OLAP DML statement executes, you can define the trigger program as a user-defined function that returns a <code class="codeph">BOOLEAN</code> value. The value returned by the program determines if Oracle OLAP executes the statement that triggered the execution of the trigger program. When the program returns <code class="codeph">FALSE</code>, Oracle OLAP does not execute the triggering statement; when it returns <code class="codeph">TRUE</code> or <code class="codeph">NA</code>, the triggering statement executes. 
                              </p>
                           </li>
                           <li>
                              <p>Arguments passed to trigger programs—Oracle OLAP passes arguments to some trigger programs. These programs are identified in <a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB" title="This table lists the OLAP DML statements that trigger programs, the required name of the program (if any), whether or not you can define the program as a function, and whether or not the program requires arguments.">Table 6-3</a>. Descriptions of these arguments are provided in <a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIIFJI" title="This table describes the arguments of trigger programs that require arguments.">Table 6-4</a>. Use the ARGUMENT statement to declare these arguments in your program. Use VARIABLE to define program variables for the values. Use the WKSDATA function to retrieve the data type of an argument with a <code class="codeph">WORKSHEET</code> data type. 
                              </p>
                           </li>
                           <li>
                              <p>Assign trigger programs—Oracle OLAP executes a program triggered by an Assign event each time it assigns a value to the object for which the event was defined. Thus, a program triggered by an Assign event is often executed over and over again as the assignment statements loops through an object assigning values. With each execution, the value to be assigned is passed as argument1 to the Assign trigger program. (See <a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIIFJI" title="This table describes the arguments of trigger programs that require arguments.">Table 6-4</a> for more information and <a href="olap-dml-commands-h-z.html#GUID-44E6A949-B977-4B2F-AA11-34C1F1D1A4E0__CEGCIIGC">Example 10-163</a> for an example.) Within the Assign trigger program, you can use a TRIGGER ASSIGN statement to assign a different value than that specified by the assignment statement that triggered the execution of the Assign trigger program.
                              </p>
                              <p>You can <span class="italic">only</span> assign values to a formula when the formula has an Assign trigger defined for it. When you assign a value to a formula with an Assign event, Oracle OLAP executes the trigger program for the event for assigned value and passes the assigned value to the trigger program. The Assign trigger does <code class="codeph">not </code>change the definition of the formula itself. See <a href="olap-dml-commands-h-z.html#GUID-44E6A949-B977-4B2F-AA11-34C1F1D1A4E0__CEGCIBAE">Example 10-165</a> for an example of an Assign trigger on a formula.
                              </p>
                           </li>
                           <li>
                              <p>Maintain trigger programs and dimension status —In some cases, Oracle OLAP changes the status of the dimension being maintained when a Maintain event triggers the execution of a program. See <a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGCCCAI" title="This table explains how Oracle OLAP changes the status of the dimension being maintained when a Maintain event triggeres the execution of a program.">Table 6-5</a> for details.
                              </p>
                           </li>
                           <li>
                              <p>Maintain triggers and dimension surrogates—Maintain triggers for dimension surrogates are different than Maintain triggers for other objects. You can only successfully issue a MAINTAIN statement against a dimension surrogate, when the dimension surrogate has a Maintain trigger. Issuing a MAINTAIN statement for a surrogate dimension that does <span class="italic">not</span> have a Maintain trigger, returns an error. Also, for Maintain Add and Maintain Merge triggers, whether or not an argument is passed to the program depends on the object on which the trigger is defined:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>For dimension surrogates with a Maintain trigger, Oracle OLAP executes the trigger program one time for each value added or merged and passes that value into the program. </p>
                                 </li>
                                 <li>
                                    <p>For other objects with a Maintain trigger, Oracle OLAP executes the trigger program only once after the MAINTAIN statement executes and no values are passed into the program</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <div class="tblformal" id="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB">
                           <p class="titleintable">Table 6-3 Object Trigger Program Characteristics </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Object Trigger Program Characteristics " summary="This table lists the OLAP DML statements that trigger programs, the required name of the program (if any), whether or not you can define the program as a function, and whether or not the program requires arguments." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="36%" id="d57722e2999">Triggering Statement (event)</th>
                                    <th align="left" valign="bottom" width="38%" id="d57722e3002">Program Name</th>
                                    <th align="left" valign="bottom" width="11%" id="d57722e3005">Return Values</th>
                                    <th align="left" valign="bottom" width="15%" id="d57722e3008">Passed Arguments</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3013" headers="d57722e2999 ">
                                       <p>= (assignment) statement (SET)</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3013 d57722e3002 ">
                                       <p>No required name</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3013 d57722e3005 ">
                                       <p>No</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3013 d57722e3008 ">
                                       <p>Yes</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3026" headers="d57722e2999 ">
                                       <p>DEFINE</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3026 d57722e3002 ">
                                       <p><a href="olap-dml-programs.html#GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8">TRIGGER_DEFINE</a></p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3026 d57722e3005 ">
                                       <p>No</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3026 d57722e3008 ">
                                       <p>No</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3040" headers="d57722e2999 ">
                                       <p>MAINTAIN ADD</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3040 d57722e3002 ">
                                       <p>No required name</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3040 d57722e3005 ">
                                       <p>No</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3040 d57722e3008 ">
                                       <p>No</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3053" headers="d57722e2999 ">
                                       <p>MAINTAIN DELETE (<span class="italic">not</span> ALL)
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3053 d57722e3002 ">
                                       <p>No required name</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3053 d57722e3005 ">
                                       <p>Yes</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3053 d57722e3008 ">
                                       <p>No</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3069" headers="d57722e2999 ">
                                       <p>MAINTAIN DELETE ALL</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3069 d57722e3002 ">
                                       <p>No required name</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3069 d57722e3005 ">
                                       <p>Yes</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3069 d57722e3008 ">
                                       <p>No</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3082" headers="d57722e2999 ">
                                       <p>MAINTAIN MERGE</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3082 d57722e3002 ">
                                       <p>No required name</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3082 d57722e3005 ">
                                       <p>No</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3082 d57722e3008 ">
                                       <p>No</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3095" headers="d57722e2999 ">
                                       <p>MAINTAIN MOVE</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3095 d57722e3002 ">
                                       <p>No required name</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3095 d57722e3005 ">
                                       <p>Yes</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3095 d57722e3008 ">
                                       <p>Yes</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3108" headers="d57722e2999 ">
                                       <p>MAINTAIN RENAME</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3108 d57722e3002 ">
                                       <p>No required name</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3108 d57722e3005 ">
                                       <p>Yes</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3108 d57722e3008 ">
                                       <p>Yes</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3121" headers="d57722e2999 ">
                                       <p>PROPERTY</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3121 d57722e3002 ">
                                       <p>No required name</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3121 d57722e3005 ">
                                       <p>Yes</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3121 d57722e3008 ">
                                       <p>Yes</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3134" headers="d57722e2999 ">
                                       <p>UPDATE (Update AW)</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3134 d57722e3002 ">
                                       <p><a href="olap-dml-programs.html#GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65">TRIGGER_AFTER_UPDATE</a></p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3134 d57722e3005 ">
                                       <p>No</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3134 d57722e3008 ">
                                       <p>No</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3148" headers="d57722e2999 ">
                                       <p>UPDATE (Update AW)</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3148 d57722e3002 ">
                                       <p><a href="olap-dml-programs.html#GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB">TRIGGER_BEFORE_UPDATE</a></p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3148 d57722e3005 ">
                                       <p>Yes</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3148 d57722e3008 ">
                                       <p>No</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3163" headers="d57722e2999 ">
                                       <p>UPDATE (Update Multi)</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3163 d57722e3002 ">
                                       <p>No required name</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3163 d57722e3005 ">
                                       <p>No</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3163 d57722e3008 ">
                                       <p>No</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p></p>
                        <div class="tblformal" id="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIIFJI">
                           <p class="titleintable">Table 6-4 Arguments Passed to Trigger Programs</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Arguments Passed to Trigger Programs" summary="This table describes the arguments of trigger programs that require arguments." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="15%" id="d57722e3187">Event</th>
                                    <th align="left" valign="bottom" width="46%" id="d57722e3190">Argument1 </th>
                                    <th align="left" valign="bottom" width="39%" id="d57722e3193">Argument2 </th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3198" headers="d57722e3187 ">
                                       <p>Property</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3198 d57722e3190 ">
                                       <p>When the PROPERTY statement is assigning a property to an object, the name of the property. When the PROPERTY statement is deleting one or more properties, <code class="codeph">the literal DELETE</code>. (<code class="codeph">TEXT</code> data type)
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3198 d57722e3193 ">
                                       <p>When the value of <span class="italic">argument1</span> is <code class="codeph">DELETE</code>, the name of the property or the literal <code class="codeph">ALL</code>. In all other cases, the name of the property. (<code class="codeph">WORKSHEET</code> data type)
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3226" headers="d57722e3187 ">
                                       <p>Assignment</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3226 d57722e3190 ">
                                       <p>The value to assign. When you know the data type of the object to which the value is assigned, specify that data type for the argument. When you do not know the actual data type, specify <code class="codeph">WORKSHEET</code> as the data type of the argument.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3226 d57722e3193 ">
                                       <p>None. Oracle OLAP passes only one argument to the program.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3239" headers="d57722e3187 ">
                                       <p>Maintain Add</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3239 d57722e3190 ">
                                       <p></p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3239 d57722e3193 ">
                                       <p>(Dimension surrogates only) The value added. (<code class="codeph">WORKSHEET data type)</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3250" headers="d57722e3187 ">
                                       <p>Maintain Rename</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3250 d57722e3190 ">
                                       <p>The dimension value to rename. (<code class="codeph">TEXT</code> data type)
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3250 d57722e3193 ">
                                       <p>The new name of the dimension member. (<code class="codeph">WORKSHEET</code> data type)
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3266" headers="d57722e3187 ">
                                       <p>Maintain Merge</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3266 d57722e3190 ">
                                       <p></p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3266 d57722e3193 ">
                                       <p>(Dimension surrogates only) The value merged. (<code class="codeph">WORKSHEET data type)</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3277" headers="d57722e3187 ">
                                       <p>Maintain Move</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3277 d57722e3190 ">
                                       <p>The position of the dimension value to move. (<code class="codeph">TEXT</code> data type)
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3277 d57722e3193 ">
                                       <p>The literal <code class="codeph">BEFORE</code> or <code class="codeph">AFTER</code>. (<code class="codeph">WORKSHEET</code> data type)
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p></p>
                        <div class="tblformal" id="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGCCCAI">
                           <p class="titleintable">Table 6-5 How Programs Triggered by Maintain Events Effect Dimension Status</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="How Programs Triggered by Maintain Events Effect Dimension Status" summary="This table explains how Oracle OLAP changes the status of the dimension being maintained when a Maintain event triggeres the execution of a program." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d57722e3309">Event Subevent</th>
                                    <th align="left" valign="bottom" width="74%" id="d57722e3312">Dimension Status Before Program Execution</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3317" headers="d57722e3309 ">
                                       <p>Maintain Add</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3317 d57722e3312 ">
                                       <p>Status set to dimension values just added.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3324" headers="d57722e3309 ">
                                       <p>Maintain Delete</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3324 d57722e3312 ">
                                       <p>Status set to dimension values about to be deleted.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3331" headers="d57722e3309 ">
                                       <p>Maintain Delete All</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3331 d57722e3312 ">
                                       <p>Current status is not changed.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3338" headers="d57722e3309 ">
                                       <p>Maintain Merge</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3338 d57722e3312 ">
                                       <p>Status set to dimension values just merged.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3345" headers="d57722e3309 ">
                                       <p>Maintain Move</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3345 d57722e3312 ">
                                       <p>Status set to dimension values about to be moved.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3352" headers="d57722e3309 ">
                                       <p>Maintain Rename</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3352 d57722e3312 ">
                                       <p>Current status is not changed.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div><a id="OLADM307"></a><div class="props_rev_3"><a id="GUID-91C66052-0A4C-473B-A613-2828EDF37D0F" name="GUID-91C66052-0A4C-473B-A613-2828EDF37D0F"></a><h4 id="OLADM-GUID-91C66052-0A4C-473B-A613-2828EDF37D0F" class="sect4"><span class="enumeration_section">6.7.4 </span>Aggregation, Allocation, and Modeling Programs
                  </h4>
                  <div>
                     <p>To aggregate, allocate, or model data using the OLAP DML, you first specify the calculation that you want performed by defining a calculation specification as outlined in <span class="q">"<a href="formulas-models-aggregations-and-allocations.html#GUID-5483B557-E17F-4DFD-A5BB-FC785EEFCB20">Creating Calculation Objects</a>"</span>. Later, to populate variables with aggregated, allocated or modeled values as a database maintenance procedure, write a program to execute the calculation object. For more information on the OLAP DML statements that you use in these programs, see <span class="q">"<a href="formulas-models-aggregations-and-allocations.html#GUID-F20C02E1-E771-4DA9-AFD1-B6FB2BFB6E18">Running a Model</a>"</span>, <span class="q">"<a href="formulas-models-aggregations-and-allocations.html#GUID-8A57C56B-B39B-4C05-95D2-8DBA5D6FD2BD">Executing the Aggregation</a>"</span>, and <span class="q">"<a href="formulas-models-aggregations-and-allocations.html#GUID-BA7B4A64-E4BC-4C2B-B504-2A1C5E94680B">Allocating Data</a>"</span>.
                     </p>
                  </div>
               </div><a id="OLADM308"></a><div class="props_rev_3"><a id="GUID-90BB4BA6-6284-4B12-A1AB-6C3765F9C2F4" name="GUID-90BB4BA6-6284-4B12-A1AB-6C3765F9C2F4"></a><h4 id="OLADM-GUID-90BB4BA6-6284-4B12-A1AB-6C3765F9C2F4" class="sect4"><span class="enumeration_section">6.7.5 </span>Forecasting Programs
                  </h4>
                  <div>
                     <div class="section">
                        <p>The OLAP DML has several related statements that allow you to forecast data using the Geneva Forecasting engine which is a statistical forecasting engine from Roadmap Technologies that is used extensively in demand planning applications. </p>
                        <p>To forecast using the Geneva Forecasting engine, take the following steps:</p>
                        <ol>
                           <li>
                              <p>Add the future time values to the time dimension.</p>
                           </li>
                           <li>
                              <p>Create a variable to hold the results of the forecast.</p>
                           </li>
                           <li>
                              <p>Write a forecasting program. Within the program, issue the following statements in the order indicated:</p>
                              <ol type="a">
                                 <li>
                                    <p>FCOPEN function -- Creates a forecasting context.</p>
                                 </li>
                                 <li>
                                    <p>FCSET command -- Specifies the forecast characteristics.</p>
                                 </li>
                                 <li>
                                    <p>FCEXEC command -- Executes a forecast and populates Oracle OLAP variables with forecasting data.</p>
                                 </li>
                                 <li>
                                    <p>FCQUERY function -- Retrieves information about the characteristics of a forecast or a trial of a forecast.</p>
                                 </li>
                                 <li>
                                    <p>FCCLOSE command -- Closes a forecasting context.</p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                        <p>For examples of using these statements to forecast data see <a href="olap-dml-commands-a-g.html#GUID-4F77C39A-337D-437D-9C57-A3F56F936635__CIHFBEEF">Example 9-119</a>. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM309"></a><div class="props_rev_3"><a id="GUID-2631B3CE-BCEC-4AAA-914B-BE1CE9E60002" name="GUID-2631B3CE-BCEC-4AAA-914B-BE1CE9E60002"></a><h4 id="OLADM-GUID-2631B3CE-BCEC-4AAA-914B-BE1CE9E60002" class="sect4"><span class="enumeration_section">6.7.6 </span>Programs to Export and Import Workspace Objects
                  </h4>
                  <div>
                     <p><a id="d57722e3497" class="indexterm-anchor"></a><a id="d57722e3499" class="indexterm-anchor"></a><a id="d57722e3503" class="indexterm-anchor"></a><a id="d57722e3507" class="indexterm-anchor"></a><a id="d57722e3509" class="indexterm-anchor"></a>You can export an entire workspace, several workspace objects, a single workspace object, or a portion of an analytic workspace object to a specially formatted EIF file. Then you can import the information into a different workspace within the same schema or a different one.
                     </p>
                     <p>One reason for exporting and importing is to move your data to a new location. Another purpose is to remove extra space from your analytic workspace after you have added and then deleted many objects or dimension values. To do this, issue an EXPORT statement to put all the data in an EIF file, create another workspace with a different name, and then use an IMPORT statement to import the EIF file into the new workspace. When you have imported into the same database, you can delete the old workspace and refer to the new one with the same workspace alias that you used for the original one.</p>
                     <p>The following statement copies all the data and definitions from the current analytic workspace to an EIF file called <code class="codeph">reorg.eif</code> in a directory object called <code class="codeph">mydir</code>.
                     </p><pre class="oac_no_warn" dir="ltr">EXPORT ALL TO EIF FILE 'mydir/reorg.eif'</pre></div>
               </div>
            </div><a id="OLADM311"></a><div class="sect2"><a id="GUID-9A2862DD-0CAA-4DD3-8AC1-3EB884BE82CC" name="GUID-9A2862DD-0CAA-4DD3-8AC1-3EB884BE82CC"></a><h3 id="OLADM-GUID-9A2862DD-0CAA-4DD3-8AC1-3EB884BE82CC" class="sect3"><span class="enumeration_section">6.8 </span>User-Written Programs Looked For by Oracle OLAP
               </h3>
               <div>
                  <p>Oracle OLAP looks for the Oracle OLAP programs with the following names and executes them as explained in the topic for each program.</p>
                  <ul class="simple" style="list-style-type: none;padding-left:0;">
                     <li><a href="olap-dml-programs.html#GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B">AUTOGO</a></li>
                     <li><a href="olap-dml-programs.html#GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE">ONATTACH</a></li>
                     <li><a href="olap-dml-programs.html#GUID-41BF0229-149A-46F6-B386-0F7958590CBB">ONDETACH</a></li>
                     <li><a href="olap-dml-programs.html#GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4">PERMIT_READ</a></li>
                     <li><a href="olap-dml-programs.html#GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E">PERMIT_WRITE</a></li>
                     <li><a href="olap-dml-programs.html#GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65">TRIGGER_AFTER_UPDATE</a></li>
                     <li><a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525">TRIGGER_AW</a></li>
                     <li><a href="olap-dml-programs.html#GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB">TRIGGER_BEFORE_UPDATE</a></li>
                     <li><a href="olap-dml-programs.html#GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8">TRIGGER_DEFINE</a></li>
                  </ul>
               </div><a id="OLADM1434"></a><a id="AUTOGO"></a><div class="sect3"><a id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B" name="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B"></a><h4 id="OLADM-GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B" class="sect4"><span class="enumeration_section">6.8.1 </span>AUTOGO
                  </h4>
                  <div>
                     <p><a id="d57722e3612" class="indexterm-anchor"></a><a id="d57722e3614" class="indexterm-anchor"></a><a id="d57722e3618" class="indexterm-anchor"></a><a id="d57722e3620" class="indexterm-anchor"></a>An AUTOGO program is a program that you can create and that Oracle OLAP checks for by name when an <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> command executes. 
                     </p>
                     <p>When you attach an analytic workspace that contains a program named AUTOGO, unless the AW ATTACH statement includes an NOAUTOGO clause or an AUTOGO clause that specifies a program with a different name, Oracle OLAP executes the ONATTACH program.</p>
                     <div class="infoboxnote" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-48E9C31C-D949-41E4-9B11-23028BC4937D">
                        <p class="notep1">Note:</p>
                        <p>Oracle OLAP checks for this program and other programs when a user attaches an analytic workspace. See <span class="q">"<a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">Startup Programs</a>"</span> for more information.
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-BD5ADE81-91F9-47C3-A400-DE66F59B87DD">Return Value</p>
                        <p><code class="codeph">BOOLEAN</code> 
                        </p>
                        <p><code class="codeph">TRUE</code> when Oracle OLAP has successfully set up and attached the analytic workspace; or <code class="codeph">FALSE</code> when it has not or when the Autogo program has thrown an exception.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-C8C18F01-7330-4482-878B-4B900A9FDB09">
                        <p class="notep1">Note:</p>
                        <p>You are encouraged to use the normal return values rather than relying on exceptions to create a return value of <code class="codeph">FALSE</code>.
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-45907744-35D5-4889-983B-DD60236FB9C2">Syntax</p>
                        <p>To define a program with the name <code class="codeph">AUTOGO</code> use the syntax shown in <a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM</a>. Code the actual program as a user-defined function with the following argument.
                        </p>
                        <p>AUTOGO (<span class="italic">password</span>)
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-9D1D7426-F50B-436B-AED3-716B117F05D4">Parameters</p>
                        <p>See <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> for explanation of <span class="italic">password</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-2EBC919F-617A-471A-951E-ED3E3BA40579">Examples</p>
                        <p>For examples of how attachment programs behave, see <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">Example 9-50</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM312"></a><a id="OLADM1435"></a><a id="ONATTACH"></a><div class="sect3"><a id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE" name="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE"></a><h4 id="OLADM-GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE" class="sect4"><span class="enumeration_section">6.8.2 </span>ONATTACH
                  </h4>
                  <div>
                     <p><a id="d57722e3722" class="indexterm-anchor"></a><a id="d57722e3724" class="indexterm-anchor"></a><a id="d57722e3728" class="indexterm-anchor"></a><a id="d57722e3730" class="indexterm-anchor"></a>An ONATTACH program is a program that you can create and that Oracle OLAP checks for by name when an <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> command executes. 
                     </p>
                     <p>When you attach an analytic workspace that contains a program named ONATTACH, unless the AW ATTACH statement includes an NOONATTACH clause or an ONATTACH clause that specifies a program with a different name, Oracle OLAP executes the ONATTACH program.</p>
                     <p>Depending on the statements in the<code class="codeph"> onattach</code> program, the user is granted or denied access to specific objects or sets of object values. For multiwriter attachment, you can use <a href="olap-dml-commands-a-g.html#GUID-3F7EDB63-D96B-4965-9E97-F10CC29612BC">ACQUIRE</a> commands to provide access to individual workspace objects. For read-only and read/write attachment, you can use <a href="olap-dml-commands-h-z.html#GUID-C4913E34-637F-4599-B87D-C2FFDBFA455D">PERMIT</a> commands that grant or restrict access to individual workspace objects. All of the objects referred to in a given <code class="codeph">onattach</code> program must exist in the same analytic workspace.
                     </p>
                     <div class="infoboxnote" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-1D3CD76E-4C13-4AAF-95DC-AA536DF49C1F">
                        <p class="notep1">Note:</p>
                        <p>Oracle OLAP checks for this program and other programs when a user attaches an analytic workspace. See <span class="q">"<a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">Startup Programs</a>"</span> for more information.
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-A3BDF0E3-613C-4169-8425-1AE8086D7CE0">Return Value</p>
                        <p><code class="codeph">BOOLEAN</code> 
                        </p>
                        <p><code class="codeph">TRUE</code> when Oracle OLAP has successfully set up and attached the analytic workspace; or <code class="codeph">FALSE</code> when it has not or when the <code class="codeph">onattach</code> program has thrown an exception.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-F39189CD-7D0E-48B1-98B2-8B527491FE4A">
                        <p class="notep1">Note:</p>
                        <p>You are encouraged to use the normal return values rather than relying on exceptions to create a return value of <code class="codeph">FALSE</code>.
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-67CC84DC-A54E-4969-A78F-103C2F08E08D">Syntax</p>
                        <p>To define a program with the name <code class="codeph">ONATTACH</code> use the syntax shown in <a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM</a>. Code the actual program as a user-defined function with the following argument.
                        </p>
                        <p>ONATTACH ({READ|WRITE|EXCLUSIVE|MULTI} <span class="italic">password</span>)
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-9B5B9E5D-0D29-4AEF-A64A-B7545FA11626">Parameters</p>
                        <p>See <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> for explanations of the attachment modes (that is, READ, WRITE, EXCLUSIVE, and MULTI) and <span class="italic">password</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-2229F198-776A-4CE3-BA34-DF6051C0824D">Usage Notes</p>
                        <p> ONATTACH Programs Created by the OLAP API</p>
                        <p>When an analytic workspace is created as an OLAP cube using the OLAP API, the OLAP API may also create a program named ONATTACH. You can <span class="italic">not</span> modify an ONATTACH program that is automatically created in this way. Additionally, overriding the execution of this ONATTACH is not recommended.
                        </p>
                        <p>Consequently, when this type of ONATTACH program exists in an analytic workspace, create a different type of startup program to specify behavior that you want performed when that analytic workspace is attached.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-366933D4-6739-457D-9205-43AB15BC8589">Examples</p>
                        <p>For examples of how attachment programs behave, see <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">Example 9-50</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM313"></a><div class="sect3"><a id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB" name="GUID-41BF0229-149A-46F6-B386-0F7958590CBB"></a><h4 id="OLADM-GUID-41BF0229-149A-46F6-B386-0F7958590CBB" class="sect4"><span class="enumeration_section">6.8.3 </span>ONDETACH
                  </h4>
                  <div>
                     <p><a id="d57722e3861" class="indexterm-anchor"></a><a id="d57722e3863" class="indexterm-anchor"></a><a id="d57722e3867" class="indexterm-anchor"></a>An ONDETACH program is a program that you can create and that Oracle OLAP checks for by name when an <a href="olap-dml-commands-a-g.html#GUID-6416B2AA-7E9C-4CE7-8888-0B4A8456EF94">AW DETACH</a> command executes. Depending on the value returned by the program, Oracle OLAP executes the code within the program immediately after detaching the analytic workspace. 
                     </p>
                     <div class="infoboxnote" id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB__GUID-36330D49-B42D-4FCB-B640-BA5D29B9CBAD">
                        <p class="notep1">Note:</p>
                        <p>Oracle OLAP checks for other programs when a user attaches an analytic workspace. See <span class="q">"<a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">Startup Programs</a>"</span> for more information.
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB__GUID-A1159041-BA31-4F9A-9EC2-CC4636BAC2B1">Return Value</p>
                        <p><code class="codeph">BOOLEAN</code> 
                        </p>
                        <p><code class="codeph">TRUE</code> when Oracle OLAP has successfully detached the analytic workspace; or <code class="codeph">FALSE</code> when it has not or when the <code class="codeph">detach</code> program has thrown an exception.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB__GUID-B6111ABC-BE33-4E62-9BFA-E53B385EE7BE">
                        <p class="notep1">Note:</p>
                        <p>You are encouraged to use the normal return values rather than relying on exceptions to create a return value of <code class="codeph">FALSE</code>.
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB__GUID-8146212F-C5DF-4A8B-AF8D-F2E64BDD2C78">Syntax</p>
                        <p>To define a program with the name <code class="codeph">ONDETACH</code> use the syntax shown in <a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM</a>. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM314"></a><a id="PERMIT_READ"></a><div class="sect3"><a id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4" name="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4"></a><h4 id="OLADM-GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4" class="sect4"><span class="enumeration_section">6.8.4 </span>PERMIT_READ
                  </h4>
                  <div>
                     <p><a id="d57722e3946" class="indexterm-anchor"></a>A PERMIT_READ program is a program that <a id="d57722e3949" class="indexterm-anchor"></a><a id="d57722e3953" class="indexterm-anchor"></a><a id="d57722e3955" class="indexterm-anchor"></a>you can create and that Oracle OLAP checks for by name when an <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> read-only command executes. Depending on the value returned by the program, Oracle OLAP executes the code within the program after attaching the analytic workspace. Depending on the statements in the <code class="codeph">permit_read</code> program the user is granted or denied access to specific objects or sets of object values. Within <code class="codeph">permit_read</code> program, you can specify <a href="olap-dml-commands-h-z.html#GUID-C4913E34-637F-4599-B87D-C2FFDBFA455D">PERMIT</a> commands that grant or restrict access to individual workspace objects. All of the objects referred to in a given <code class="codeph">permit_read</code> must exist in the same analytic workspace.
                     </p>
                     <div class="infoboxnote" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-05974AAA-4A6D-4848-9498-4717E05467B5">
                        <p class="notep1">Note:</p>
                        <p>Oracle OLAP checks for this program and other programs when a user attaches an analytic workspace. See <span class="q">"<a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">Startup Programs</a>"</span> for more information.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-86C5AABE-DCA3-4444-8F84-9A5801096437">
                        <p class="notep1">See Also:</p>
                        <p><a href="olap-dml-options.html#GUID-7A354BA1-BC11-4FDB-8E9B-908EDBFB1634">PERMITERROR</a> option, <a href="olap-dml-options.html#GUID-F2C35395-AD89-4E78-ABCD-78F7DCD544A6">PERMITREADERROR</a> option, and <a href="olap-dml-programs.html#GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E">PERMIT_WRITE</a> program
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-D76F432C-9462-4767-A080-D3543F80FB49">Return Value</p>
                        <p><code class="codeph">BOOLEAN</code> 
                        </p>
                        <p><code class="codeph">TRUE</code> when Oracle OLAP has successfully set up and attached the analytic workspace; or <code class="codeph">FALSE</code> when it has not or when the <code class="codeph">permit_read</code> program has thrown an exception
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-164114B0-9830-4F6B-9455-3417167BADF2">
                        <p class="notep1">Note:</p>
                        <p>You are encouraged to use the normal return values rather than relying on exceptions to create a return value of <code class="codeph">FALSE</code>.
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-898CC43F-B667-462C-B6FA-825F8E5C79FD">Syntax</p>
                        <p>To define a program with the name <code class="codeph">PERMIT_READ</code> use the syntax shown in <a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM</a>. Code the actual program as a user-defined function with the following argument.
                        </p>
                        <p>PERMIT_READ (<span class="italic">password</span>)
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-4A31DDE1-E21D-4CEF-960C-1CFD48CC1D2B">Parameters</p>
                        <p>See <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> for an explanation of <span class="italic">password</span>. When a user specifies a password when attaching the analytic workspace, then the password is passed as an argument to the program for processing.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-C0BCFF6F-FE64-4840-BF16-917BE963AC9F">Examples</p>
                        <p>To see the order in which permission programs are executed when an analytic workspace is attached, see <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">Example 9-50</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM315"></a><a id="PERMIT_WRITE"></a><div class="sect3"><a id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E" name="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E"></a><h4 id="OLADM-GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E" class="sect4"><span class="enumeration_section">6.8.5 </span>PERMIT_WRITE
                  </h4>
                  <div>
                     <p><a id="d57722e4081" class="indexterm-anchor"></a>A PERMIT_WRITE program <a id="d57722e4084" class="indexterm-anchor"></a><a id="d57722e4088" class="indexterm-anchor"></a><a id="d57722e4090" class="indexterm-anchor"></a>is a program that you can create and that Oracle OLAP checks for by name when an <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> read/write command executes. Depending on the value returned by the program, Oracle OLAP executes the code within the program after attaching the analytic workspace. Depending on the statements in the <code class="codeph">permit_write</code> program, the user is granted or denied access to specific objects or sets of object values. Within <code class="codeph">permit_write</code> program, you can specify <a href="olap-dml-commands-h-z.html#GUID-C4913E34-637F-4599-B87D-C2FFDBFA455D">PERMIT</a> commands that grant or restrict access to individual workspace object. All of the objects referred to in a given <code class="codeph">permit_write</code> program must exist in the same analytic workspace.
                     </p>
                     <div class="infoboxnote" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-EAA4172A-8D34-423F-9870-664E2E954E3B">
                        <p class="notep1">Note:</p>
                        <p>Oracle OLAP checks for this program and other programs when a user attaches an analytic workspace. See <span class="q">"<a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">Startup Programs</a>"</span> for more information.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-A0F4DFD5-743A-4B6A-8131-8DE4BEEDFF67">
                        <p class="notep1">See Also:</p>
                        <p><a href="olap-dml-options.html#GUID-7A354BA1-BC11-4FDB-8E9B-908EDBFB1634">PERMITERROR</a> option, <a href="olap-dml-options.html#GUID-F2C35395-AD89-4E78-ABCD-78F7DCD544A6">PERMITREADERROR</a> option, and <a href="olap-dml-programs.html#GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4">PERMIT_READ</a> program
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-8FFDD9FD-DA7B-4B21-B31F-C30F33B31E5F">Return Value</p>
                        <p><code class="codeph">BOOLEAN</code> 
                        </p>
                        <p><code class="codeph">TRUE</code> when Oracle OLAP has successfully set up and attached the analytic workspace; or <code class="codeph">FALSE</code> when it has not or when the <code class="codeph">permit_write</code> program has thrown an exception
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-66B18C50-1887-43D0-9259-D9698D151AE5">
                        <p class="notep1">Note:</p>
                        <p>You are encouraged to use the normal return values rather than relying on exceptions to create a return value of <code class="codeph">FALSE</code>.
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-8D549E24-7B16-43C8-B9A4-6A63B2CFD366">Syntax</p>
                        <p>To define a program with the name <code class="codeph">PERMIT_WRITE</code> use the syntax shown in <a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM</a>. Code the actual program as a user-defined function with the following argument.
                        </p>
                        <p>PERMIT_WRITE (<span class="italic">password</span>)
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-B44D55C3-CA6B-434F-A3E0-F9DDF29E843C">Parameters</p>
                        <p>See <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> for an explanation of <span class="italic">password</span>. When a user specifies a password when attaching the analytic workspace, then the password is passed as an argument to the program for processing.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-12B3CBB9-7452-4F16-A7FD-3EA8CB1CB8C2">Examples</p>
                        <p>To see the order in which permission programs are executed when an analytic workspace is attached, see <a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">Example 9-50</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM316"></a><a id="OLADM1436"></a><a id="TRIGGER_AFTER_UPDATE"></a><div class="sect3"><a id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65" name="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65"></a><h4 id="OLADM-GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65" class="sect4"><span class="enumeration_section">6.8.6 </span>TRIGGER_AFTER_UPDATE
                  </h4>
                  <div>
                     <p><a id="d57722e4218" class="indexterm-anchor"></a><a id="d57722e4220" class="indexterm-anchor"></a><a id="d57722e4224" class="indexterm-anchor"></a><a id="d57722e4228" class="indexterm-anchor"></a><a id="d57722e4232" class="indexterm-anchor"></a><a id="d57722e4236" class="indexterm-anchor"></a>A <a id="d57722e4241" class="indexterm-anchor"></a><a id="d57722e4243" class="indexterm-anchor"></a><a id="d57722e4247" class="indexterm-anchor"></a>TRIGGER_AFTER_UPDATE program is a program that you can create in an analytic workspace and that Oracle OLAP checks for by name when an <a href="olap-dml-commands-h-z.html#GUID-96C177F0-933E-42E5-8C70-BDA6EBD398F0">UPDATE</a> command for that analytic workspace executes. When the program exists in the same analytic workspace that you are updating, Oracle OLAP executes the program after executing the UPDATE.
                     </p>
                     <div class="infoboxnote" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-CAC1D27E-30B2-480E-8BE6-E8980E6C2A50">
                        <p class="notep1">Note:</p>
                        <p>The <a href="olap-dml-options.html#GUID-37D42DE3-B227-4A22-84F0-74CFC946A3CD">USETRIGGERS</a> option must be set to its default value of <code class="codeph">TRUE</code> for a TRIGGER_AFTER_UPDATE program to execute
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-D8F1D500-0E80-4DB1-BC23-C35559CE825A">
                        <p class="notep1">Note:</p>
                        <p><span class="q">"<a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">Trigger Programs</a>"</span>.
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-1BDC38D6-07A8-4417-BDB8-C843D6E8EA30">Syntax</p>
                        <p>To create a program with the name <code class="codeph">TRIGGER_AFTER_UPDATE</code>, follow the guidelines presented in <span class="q">"<a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">Trigger Programs</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-9BFC7614-F33E-4D1F-A5F6-D2B31D32DA24">Examples</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-68E8BF44-A16C-4250-9404-07A07BE02DE4">
                        <p class="titleinexample">Example 6-1 TRIGGER_AFTER_UPDATE Program</p>
                        <p>Assume you have defined the following program in your analytic workspace.</p><pre class="oac_no_warn" dir="ltr">DEFINE TRIGGER_AFTER_UPDATE PROGRAM
PROGRAM
SHOW JOINCHARS ('calltype = ' CALLTYPE)
SHOW JOINCHARS ('triggering event = ' TRIGGER(EVENT))
SHOW JOINCHARS ('triggering subevent = ' TRIGGER(SUBEVENT))
END
 </pre><p>When you issue an UPDATE statement the program executes and displays the following output.</p><pre class="oac_no_warn" dir="ltr">calltype = TRIGGER
triggering event = AFTER_UPDATE
triggering subevent = AW</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLADM317"></a><a id="OLADM1437"></a><a id="OLADM1438"></a><a id="TRIGGER_AW"></a><div class="sect3"><a id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525" name="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525"></a><h4 id="OLADM-GUID-08832CCD-34C7-44D7-AEE9-3668616E8525" class="sect4"><span class="enumeration_section">6.8.7 </span>TRIGGER_AW
                  </h4>
                  <div>
                     <p><a id="d57722e4329" class="indexterm-anchor"></a><a id="d57722e4331" class="indexterm-anchor"></a><a id="d57722e4335" class="indexterm-anchor"></a><a id="d57722e4339" class="indexterm-anchor"></a><a id="d57722e4343" class="indexterm-anchor"></a></p>
                     <p>A TRIGGER_AW program is a program that you can create in one analytic workspace and that Oracle OLAP checks for by name when that analytic workspace is current and you create, attach, detach, or delete any other analytic workspace.</p>
                     <div class="infoboxnote" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-E3BCC969-E5BE-426A-80D3-5CFAE661ABE7">
                        <p class="notep1">Note:</p>
                        <p>Oracle OLAP checks for this program and other programs when a user attaches an analytic workspace. See <span class="q">"<a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">Startup Programs</a>"</span> for more information.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-81A579AD-E68C-4F0A-9F51-81896A0815A4">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">Trigger Programs</a>"</span></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-51552FAB-2E1E-423D-B5CB-08D8F193DE9C">Return Value</p>
                        <p>None. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-61F2FEF4-94CF-438E-96AD-E59AB58B70CC">Syntax</p>
                        <p>To create a program with the name <code class="codeph">TRIGGER_AW</code>, follow the guidelines presented in<span class="q">"<a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__CHDHDDIB">How to Create a TRIGGER_AW Program</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-BD434A80-AE8E-4C6C-92F8-42A7C4852CC4">Usage Notes</p>
                        <p id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__CHDHDDIB">How to Create a TRIGGER_AW Program</p>
                        <p>You create a TRIGGER_AW program by following the following procedure:</p>
                        <ol>
                           <li>
                              <p>Define the program as described in DEFINE PROGRAM. </p>
                           </li>
                           <li>
                              <p>Name the program TRIGGER_AW. </p>
                           </li>
                           <li>
                              <p>Code the actual program as described in <span class="q">"<a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">Specifying Program Contents</a>"</span>. 
                              </p>
                              <div class="infoboxnote" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-9DEB12BC-5FFE-43D1-B5DA-761FCE0EF04B">
                                 <p class="notep1">Note:</p>
                                 <p>There is no support for recursive triggers. You must set the USETRIGGERS option to <code class="codeph">NO</code> before you issue an AW statement <span class="italic">within</span> an TRIGGER_AW program
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-672F0212-24F2-4104-AE82-745EAB804287">Examples</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-348F5622-182B-4DD6-B40C-A1BE16CCA1AE">
                        <p class="titleinexample">Example 6-2 A TRIGGER_AW Program</p>
                        <p>Assume that you have defined a program with the following definition in an analytic workspace named <code class="codeph">my_aw</code>.
                        </p><pre class="oac_no_warn" dir="ltr">DEFINE TRIGGER_AW PROGRAM
PROGRAM
SHOW CALLTYPE
SHOW TRIGGER(EVENT)
SHOW TRIGGER(SUBEVENT)
SHOW TRIGGER(NAME)
END
</pre><p>When  attach the <code class="codeph">my_aw</code> workspace, the specified values are displayed.
                        </p><pre class="oac_no_warn" dir="ltr">AW ATTACH MY_AW

TRIGGER
AW
ATTACH
MY_AW </pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLADM318"></a><a id="OLADM1439"></a><a id="TRIGGER_BEFORE_UPDATE"></a><div class="sect3"><a id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB" name="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB"></a><h4 id="OLADM-GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB" class="sect4"><span class="enumeration_section">6.8.8 </span>TRIGGER_BEFORE_UPDATE
                  </h4>
                  <div>
                     <p><a id="d57722e4459" class="indexterm-anchor"></a><a id="d57722e4461" class="indexterm-anchor"></a><a id="d57722e4465" class="indexterm-anchor"></a><a id="d57722e4469" class="indexterm-anchor"></a><a id="d57722e4473" class="indexterm-anchor"></a><a id="d57722e4477" class="indexterm-anchor"></a><a id="d57722e4481" class="indexterm-anchor"></a>A TRIGGER_BEFORE_UPDATE program is a program that you can create and that Oracle OLAP checks for by name when an <a href="olap-dml-commands-h-z.html#GUID-96C177F0-933E-42E5-8C70-BDA6EBD398F0">UPDATE</a> command executes. When the program exists in the same analytic workspace that you are updating, Oracle OLAP executes the program and then, depending on the value returned by the program (if any), either does nor does not update the workspace.
                     </p>
                     <div class="infoboxnote" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-F77BBC83-43B5-49B1-B905-835EFBEE78FA">
                        <p class="notep1">Note:</p>
                        <p>The <a href="olap-dml-options.html#GUID-37D42DE3-B227-4A22-84F0-74CFC946A3CD">USETRIGGERS</a> option must be set to its default value of <code class="codeph">TRUE</code> for a TRIGGER_BEFORE_UPDATE program to execute
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-7C66C585-5FAF-45F5-83B4-3EB61CB2533A">
                        <p class="notep1">Note:</p>
                        <p><span class="q">"<a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">Trigger Programs</a>"</span></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-9E110585-BAAC-4DA7-B359-1416D08A8D40">Return Value</p>
                        <p>You can write the program as a function that returns a <code class="codeph">BOOLEAN</code> value. In this case, when the program returns FALSE, Oracle OLAP does not execute the UPDATE statement that triggered the execution of the TRIGGER_BEFORE_UPDATE program; when the program returns <code class="codeph">TRUE</code> or <code class="codeph">NA</code>, the UPDATE statement executes. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-4740647E-0804-4A8F-9D43-93921F9317AA">Syntax</p>
                        <p>To create a program with the name <code class="codeph">TRIGGER_UPDATE</code>, follow the guidelines presented in <span class="q">"<a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">Trigger Programs</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-D8C06C7E-65F5-44E7-AE81-52A1A0DD4FD4">Examples</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__CEGCBCAB">
                        <p class="titleinexample">Example 6-3 TRIGGER_BEFORE_UPDATE Program</p>
                        <p>Assume that an analytic workspace named <code class="codeph">myaw</code> has an TRIGGER_BEFORE_UPDATE program with the following definition.
                        </p><pre class="oac_no_warn" dir="ltr">DEFINE TRIGGER_BEFORE_UPDATE PROGRAM BOOLEAN
PROGRAM
SHOW JOINCHARS ('calltype = ' CALLTYPE)
SHOW JOINCHARS ('triggering event = ' TRIGGER(EVENT))
SHOW JOINCHARS ('triggering subevent = ' TRIGGER(SUBEVENT))
RETURN TRUE
END
 </pre><p>Assume that you define a <code class="codeph">TEXT</code> variable named <code class="codeph">myvar</code> and, then, issue an UPDATE statement. The TRIGGER_BEFORE_UPDSATE program executes. 
                        </p><pre class="oac_no_warn" dir="ltr">calltype = TRIGGER
triggering event = BEFORE_UPDATE
triggering subevent = AW
</pre><p>Because the program returned TRUE, the definition for <code class="codeph">myva</code>r exists after you detach and reattach the workspace.
                        </p><pre class="oac_no_warn" dir="ltr">AW DETACH myaw
AW ATTACH myaw
DESCRIBE

DEFINE TRIGGER_BEFORE_UPDATE PROGRAM BOOLEAN
PROGRAM
SHOW JOINCHARS ('calltype = ' CALLTYPE)
SHOW JOINCHARS ('triggering event = ' TRIGGER(EVENT))
SHOW JOINCHARS ('triggering subevent = ' TRIGGER(SUBEVENT))
RETURN TRUE
END
 
DEFINE MYVAR VARIABLE TEXT
</pre><p>However, if you modified the program so that it returned <code class="codeph">FALSE</code>, then when you detach and reattach the workspace, not only would the <code class="codeph">myva</code>r definition not in the workspace, the definition for the TRIGGER_BEFORE_UPDATE program would also not be in the workspace.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLADM319"></a><a id="OLADM1440"></a><a id="TRIGGER_DEFINE"></a><div class="sect3"><a id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8" name="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8"></a><h4 id="OLADM-GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8" class="sect4"><span class="enumeration_section">6.8.9 </span>TRIGGER_DEFINE
                  </h4>
                  <div>
                     <p><a id="d57722e4599" class="indexterm-anchor"></a><a id="d57722e4601" class="indexterm-anchor"></a><a id="d57722e4605" class="indexterm-anchor"></a><a id="d57722e4609" class="indexterm-anchor"></a><a id="d57722e4613" class="indexterm-anchor"></a><a id="d57722e4617" class="indexterm-anchor"></a><a id="d57722e4621" class="indexterm-anchor"></a>A TRIGGER_DEFINE program is a program that you create and that Oracle OLAP checks for by name when a <a href="olap-dml-commands-a-g.html#GUID-569FA3A3-ADF7-488B-9D39-AB8785572C11">DEFINE</a> command executes. When the program exists in the same analytic workspace in which you are defining a new object, Oracle OLAP executes the program.
                     </p>
                     <div class="infoboxnote" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-95CBCCF6-5420-49E4-96FA-730FB12DF28C">
                        <p class="notep1">Note:</p>
                        <p>The <a href="olap-dml-options.html#GUID-37D42DE3-B227-4A22-84F0-74CFC946A3CD">USETRIGGERS</a> option must be set to its default value of <code class="codeph">TRUE</code> for a TRIGGER_DEFINE program to execute
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-5F0484C5-594A-466D-8D74-D334F72302BA">
                        <p class="notep1">Note:</p>
                        <p><span class="q">"<a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">Trigger Programs</a>"</span></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-2DA6837C-036D-424D-9E59-3D992C32A30A">Syntax</p>
                        <p>To create a program with the name <code class="codeph">TRIGGER_DEFINE</code>, follow the guidelines presented in <span class="q">"<a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">Trigger Programs</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-EA49A5C7-EBB0-4660-8920-B0D574EA9007">Examples</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-C10F33A3-A21C-482C-96B0-F73817A4DF36">
                        <p class="titleinexample">Example 6-4 A TRIGGER_DEFINE Program</p>
                        <p>Assume that you have written a TRIGGER_DEFINE program with the following description in your analytic workspace.</p><pre class="oac_no_warn" dir="ltr">DEFINE TRIGGER_DEFINE PROGRAM
PROGRAM
SHOW JOINCHARS ('calltype = ' CALLTYPE)
SHOW JOINCHARS ('triggering event = ' TRIGGER(EVENT))
SHOW JOINCHARS ('fully qualified object name ='TRIGGER(NAME))
SHOW JOINCHARS ('type of object = 'OBJ(TYPE TRIGGER(NAME))
DESCRIBE &amp;TRIGGER(NAME)
END
</pre><p>Assume, as shown in the following statements, that you issue a DEFINE VARIABLE statement to define a variable named <code class="codeph">myvar</code>. As shown by the output following the statement, Oracle OLAP defines the variable and executes the TRIGGER_DEFINE program.
                        </p><pre class="oac_no_warn" dir="ltr">DEFINE myvar VARIABLE TEXT
calltype = TRIGGER
triggering event = DEFINE
fully qualified object name =MYAW!MYVAR
type of object = VARIABLE
 
DEFINE MYVAR VARIABLE TEXT</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='06138.introduction-to-oracle-rac.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Provides an overview of Oracle Real Application Clusters (Oracle RAC) installation and administration, and various components and functions.">
      <meta name="description" content="Provides an overview of Oracle Real Application Clusters (Oracle RAC) installation and administration, and various components and functions.">
      <title>Introduction to Oracle RAC</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide">
      <meta property="og:description" content="Provides an overview of Oracle Real Application Clusters (Oracle RAC) installation and administration, and various components and functions.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00">
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95728-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="changes-in-this-release-for-oracle-real-application-clusters-administration-and-deployment-guide.html" title="Previous" type="text/html">
      <link rel="next" href="administering-storage-in-oracle-rac.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="changes-in-this-release-for-oracle-real-application-clusters-administration-and-deployment-guide.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="administering-storage-in-oracle-rac.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Introduction to Oracle RAC</li>
            </ol>
            <a id="GUID-5A1B02A2-A327-42DD-A1AD-20610B2A9D92" name="GUID-5A1B02A2-A327-42DD-A1AD-20610B2A9D92"></a><a id="RACAD1111"></a>
            
            <h2 id="RACAD-GUID-5A1B02A2-A327-42DD-A1AD-20610B2A9D92" class="sect2"><span class="enumeration_chapter">1 </span>Introduction to Oracle RAC
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Provides an overview of Oracle Real Application Clusters (Oracle RAC) installation and administration, and various components and functions.</p>
               <p>This chapter includes the following topics: </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E" title="This topic provides an introduction to Oracle RAC and its functionality.">Overview of Oracle RAC</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E" title="Install Oracle Grid Infrastructure and Oracle Database software using Oracle Universal Installer, and create your database with Database Configuration Assistant (DBCA).">Overview of Installing Oracle RAC</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6" title="Oracle Real Application Clusters One Node (Oracle RAC One Node) is an option to Oracle Database Enterprise Edition available since Oracle Database 11g release 2 (11.2).">Overview of Oracle Real Application Clusters One Node</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-4194E2D5-53CD-4D93-BE20-42EC14B7C44A" title="Oracle Clusterware provides a complete, integrated clusterware management solution on all Oracle Database platforms.">Overview of Oracle Clusterware for Oracle RAC</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-0014A9C2-F7E3-43D2-913E-494CAC107C03" title="All nodes in an Oracle RAC environment must connect to at least one Local Area Network (LAN) (commonly referred to as the public network) to enable users and applications to access the database.Applications should use the Dynamic Database Services feature to connect to an Oracle database over the public network.The valid node checking feature provides the ability to configure and dynamically update a set of IP addresses or subnets from which registration requests are allowed by the listener.Oracle RAC databases generally have two or more database instances that each contain memory structures and background processes.">Overview of Oracle RAC Architecture and Processing</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-75EE86C1-E690-4624-BA83-DFB83234156C" title="Services represent groups of applications with common attributes, service level thresholds, and priorities.">Overview of Automatic Workload Management with Dynamic Database Services</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-7D01967A-2E0F-4228-82CE-428D7B65F961" title="Server pools are the basis for policy-managed databases.">Overview of Server Pools and Policy-Managed Databases</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01" title="Oracle Database Quality of Service Management (Oracle Database QoS Management) is an automated, policy-based product that monitors the workload requests for an entire system.">Overview of Oracle Database Quality of Service Management</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-249A970C-4650-485E-9E11-EFC70FDF3079" title="Hang Manager is an Oracle Database feature that automatically detects and resolves system hangs.">Overview of Hang Manager</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-2FB4477F-8D93-4210-8E17-0FDCAFE9DE33" title="Oracle Multitenant is an option with Oracle Database 12c that simplifies consolidation, provisioning, upgrades, and more.">Overview of Oracle Multitenant with Oracle RAC</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" title="Every Oracle RAC node has its own In-Memory (IM) column store. By default, populated objects are distributed across all IM column stores in the cluster.">Overview of Database In-Memory and Oracle RAC</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-74F4FF89-688A-4DE4-9592-1D96E851013C" title="Any enterprise that is designing and implementing a high availability strategy with Oracle RAC must begin by performing a thorough analysis of the business drivers that require high availability.You administer a cluster database as a single-system image using the Server Control Utility (SRVCTL), Oracle Enterprise Manager, SQL*Plus, and other utilities.Web-based Oracle Enterprise Manager Cloud Control enables you to monitor an Oracle RAC database.">Overview of Managing Oracle RAC Environments</a></p>
                  </li>
               </ul>
            </div><a id="RACAD8887"></a><a id="RACAD7270"></a><div class="sect2"><a id="GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E" name="GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E"></a><h3 id="RACAD-GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E" class="sect3">Overview of Oracle RAC</h3>
               <div>
                  <p>This topic provides an introduction to Oracle RAC and its functionality.</p>
                  <p>Non-cluster Oracle databases have a one-to-one relationship between the Oracle database and the instance. Oracle RAC environments, however, have a one-to-many relationship between the database and instances. An Oracle RAC database can have several instances, all of which access one database. All database instances must use the same interconnect, which can also be used by Oracle Clusterware.</p>
                  <p>Oracle RAC databases differ architecturally from non-cluster Oracle databases in that each Oracle RAC database instance also has: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>At least one additional thread of redo for each instance</p>
                     </li>
                     <li>
                        <p>An instance-specific undo tablespace</p>
                     </li>
                  </ul>
                  <p>The combined processing power of the multiple servers can provide greater throughput and Oracle RAC scalability than is available from a single server.</p>
                  <p>A <a href="glossary.html#GUID-1B7C963C-0E0C-425E-AD47-D75C912230CB"><span class="xrefglossterm">cluster</span></a> comprises multiple interconnected computers or servers that appear as if they are one server to end users and applications. The Oracle RAC option with Oracle Database enables you to cluster Oracle databases. Oracle RAC uses Oracle Clusterware for the infrastructure to bind multiple servers so they operate as a single system.
                  </p>
                  <p>Oracle Clusterware is a portable cluster management solution that is integrated with Oracle Database. Oracle Clusterware is a required component for using Oracle RAC that provides the infrastructure necessary to run Oracle RAC. Oracle Clusterware also manages resources, such as <a href="glossary.html#GUID-918C3356-9A2D-4A62-84B3-3C0290971BD9"><span class="xrefglossterm">Virtual Internet Protocol (VIP)</span></a> addresses, databases, listeners, services, and so on. In addition, Oracle Clusterware enables both non-cluster Oracle databases and Oracle RAC databases to use the Oracle high-availability infrastructure. Oracle Clusterware along with Oracle Automatic Storage Management (Oracle ASM) (the two together comprise the <a href="glossary.html#GUID-D9337CD1-B7A6-473D-9590-939D04ACED56"><span class="xrefglossterm">Oracle Grid Infrastructure</span></a>) enables you to create a clustered pool of storage to be used by any combination of non cluster and Oracle RAC databases. 
                  </p>
                  <p>Oracle Clusterware is the only clusterware that you need for most platforms on which Oracle RAC operates. If your database applications require vendor clusterware, then you can use such clusterware in conjunction with Oracle Clusterware if that vendor clusterware is certified for Oracle RAC.</p>
                  <p><a href="introduction-to-oracle-rac.html#GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E__BABHCCAE">Figure 1-1</a> shows how Oracle RAC is the Oracle Database option that provides a single system image for multiple servers to access one Oracle database. In Oracle RAC, each Oracle instance must run on a separate server.
                  </p>
                  <div class="figure" id="GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E__BABHCCAE">
                     <p class="titleinfigure">Figure 1-1 Oracle Database with Oracle RAC Architecture</p><img src="img/haovw002.gif" width="421" alt="Description of Figure 1-1 follows" title="Description of Figure 1-1 follows" longdesc="img_text/haovw002.html"><br><a href="img_text/haovw002.html">Description of "Figure 1-1 Oracle Database with Oracle RAC Architecture"</a></div>
                  <!-- class="figure" -->
                  <p>Traditionally, an Oracle RAC environment is located in one data center. However, you can configure Oracle RAC on an <a href="glossary.html#GUID-A0C837CD-9E57-4EC9-AA24-18511C0C5B07"><span class="xrefglossterm">Oracle Extended Cluster</span></a>, which is an architecture that provides extremely fast recovery from a site failure and allows for all nodes, at all sites, to actively process transactions as part of a single database cluster. In an extended cluster, the nodes in the cluster are typically dispersed, geographically, such as between two fire cells, between two rooms or buildings, or between two different data centers or cities. For availability reasons, the data must be located at both sites, thus requiring the implementation of disk mirroring technology for storage.
                  </p>
                  <p>If you choose to implement this architecture, you must assess whether this architecture is a good solution for your business, especially considering distance, latency, and the degree of protection it provides. Oracle RAC on extended clusters provides higher availability than is possible with local Oracle RAC configurations, but an extended cluster may not fulfill all of the disaster-recovery requirements of your organization. A feasible separation provides great protection for some disasters (for example, local power outage or server room flooding) but it cannot provide protection against all types of outages. For comprehensive protection against disasters—including protection against corruptions and regional disasters—Oracle recommends the use of Oracle Data Guard with Oracle RAC, as described in the <span><cite>Oracle Data Guard Concepts and Administration</cite></span> and on the Maximum Availability Architecture (MAA) Web site.
                  </p>
                  <p>Oracle RAC is a unique technology that provides high availability and scalability for all application types. The Oracle RAC infrastructure is also a key component for implementing the Oracle enterprise grid computing architecture. Having multiple instances access a single database prevents the server from being a single point of failure. Oracle RAC enables you to combine smaller commodity servers into a cluster to create scalable environments that support mission critical business applications. Applications that you deploy on Oracle RAC databases can operate without code changes.</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../cwadd/introduction-to-oracle-clusterware.html#CWADD-GUID-58F85575-7D88-4D45-B097-6274FBBBB646" target="_blank">Introduction to Oracle Clusterware</a></li>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span></a></li>
                        <li><a href="../sbydb/configuring-data-guard-standby-databases-in-oracle-RAC.html#SBYDB-GUID-084DF97B-5524-401A-BAA4-65BA279F5B11" target="_blank">Oracle Data Guard and Oracle Real Application Clusters</a></li>
                        <li><a href="http://www.oracle.com/au/products/database/maa-096107.html" target="_blank">Maximum Availability Architecture (MAA)</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD03261"></a><div class="sect2"><a id="GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E" name="GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E"></a><h3 id="RACAD-GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E" class="sect3">Overview of Installing Oracle RAC</h3>
               <div>
                  <p>Install Oracle Grid Infrastructure and Oracle Database software using Oracle Universal Installer, and create your database with Database Configuration Assistant (DBCA).</p>
                  <p>This ensures that your Oracle RAC environment has the optimal network configuration, database structure, and parameter settings for the environment that you selected.</p>
                  <p>Alternatively, you can install Oracle RAC using Fleet Patching and Provisioning, which offers all of the advantages of Oracle Universal Installer and DBCA previously specified. In addition, Fleet Patching and Provisioning allows for standardization and automation.</p>
                  <p>This section introduces the installation processes for Oracle RAC under the following topics: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-11942C40-7052-48CE-BA1E-C92587F5936E">Understanding Compatibility in Oracle RAC Environments</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C">Oracle RAC Database Management Styles and Database Installation</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506" title="Part of Oracle Database deployment is the creation of the database.">Oracle RAC Database Management Styles and Database Creation</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-918558E3-24DC-4145-A073-4A4A20BE97C2" title="If you want to extend the Oracle RAC cluster (also known as cloning) and add nodes to the existing environment after your initial deployment, then you must to do this on multiple layers, considering the management style that you currently use in the cluster.">Overview of Extending an Oracle RAC Cluster</a></p>
                        <div class="infoboxnote" id="GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E__GUID-8832EECE-F3E8-4615-A4A9-CF3F05FB8C46">
                           <p class="notep1">Note:</p>
                           <p>You must first install Oracle Grid Infrastructure before installing Oracle RAC.</p>
                        </div>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Real Application Clusters Installation Guide</cite></span></a></li>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="RACAD7277"></a><div class="sect3"><a id="GUID-11942C40-7052-48CE-BA1E-C92587F5936E" name="GUID-11942C40-7052-48CE-BA1E-C92587F5936E"></a><h4 id="RACAD-GUID-11942C40-7052-48CE-BA1E-C92587F5936E" class="sect4">Understanding Compatibility in Oracle RAC Environments</h4>
                  <div>
                     <p>To run Oracle RAC in configurations with different versions of Oracle Database in the same cluster, you must first install Oracle Grid Infrastructure, which must be the same version, or higher, as the highest version of Oracle Database that you want to deploy in this cluster. For example, to run an Oracle RAC 12<span class="italic">c</span> database and an Oracle RAC 18c database in the same cluster, you must install Oracle Grid Infrastructure 18c. Contact My Oracle Support for more information about version compatibility in Oracle RAC environments.
                     </p>
                     <div class="infoboxnote" id="GUID-11942C40-7052-48CE-BA1E-C92587F5936E__GUID-A4E13CBC-3079-4247-A960-506A15843509">
                        <p class="notep1">Note:</p>
                        <p>Oracle does not support deploying an Oracle9<span class="italic">i</span> cluster in an Oracle Grid Infrastructure 12<span class="italic">c</span>, or later, environment.
                        </p>
                     </div>
                  </div>
               </div><a id="RACAD7278"></a><div class="sect3"><a id="GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C" name="GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C"></a><h4 id="RACAD-GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C" class="sect4">Oracle RAC Database Management Styles and Database Installation</h4>
                  <div>
                     <p>Before installing the Oracle RAC database software and creating respective databases, decide on the management style you want to apply to the Oracle RAC databases, as described in <span class="q">"Overview of Server Pools and Policy-Managed Databases"</span>.
                     </p>
                     <p>The management style you choose impacts the software deployment and database creation. If you choose the administrator-managed database deployment model, using a per-node installation of software, then it is sufficient to deploy the Oracle Database software (the database home) on only those nodes on which you plan to run Oracle Database.</p>
                     <p>If you choose the policy-managed deployment model, using a per-node installation of software, then you must deploy the software on all nodes in the cluster, because the dynamic allocation of servers to server pools, in principle, does not predict on which server a database instance can potentially run. To avoid instance startup failures on servers that do not host the respective database home, Oracle strongly recommends that you deploy the database software on all nodes in the cluster. When you use a shared Oracle Database home, accessibility to this home from all nodes in the cluster is assumed and the setup needs to ensure that the respective file system is mounted on all servers, as required.</p>
                     <p>Oracle Universal Installer will only allow you to deploy an Oracle Database home across nodes in the cluster if you previously installed and configured Oracle Grid Infrastructure for the cluster. If Oracle Universal Installer does not give you an option to deploy the database home across all nodes in the cluster, then check the prerequisite, as stated, by Oracle Universal Installer.</p>
                     <p>During installation, you can choose to create a database during the database home installation. Oracle Universal Installer runs DBCA to create your Oracle RAC database according to the options that you select.</p>
                     <div class="infoboxnotealso" id="GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C__GUID-5668356C-BAC4-4EC7-AFE6-814E3189BDDF">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"Oracle RAC Database Management Styles and Database Creation"</span> for more information if you choose this option
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C__GUID-5287E1E6-21C5-4A47-940B-6A03FED8F1B1">
                        <p class="notep1">Note:</p>
                        <p>Before you create a database, a default listener must be running in the Oracle Grid Infrastructure home. If a default listener is not present in the Oracle Grid Infrastructure home, then DBCA returns an error instructing you to run NETCA from the Oracle Grid Infrastructure home to create a default listener.</p>
                     </div>
                     <p>The Oracle RAC software is distributed as part of the Oracle Database installation media. By default, the Oracle Database software installation process installs the Oracle RAC option when it recognizes that you are performing the installation on a cluster. Oracle Universal Installer installs Oracle RAC into a directory structure referred to as the Oracle home, which is separate from the Oracle home directory for other Oracle software running on the system. Because Oracle Universal Installer is cluster aware, it installs the Oracle RAC software on all of the nodes that you defined to be part of the cluster.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="introduction-to-oracle-rac.html#GUID-7D01967A-2E0F-4228-82CE-428D7B65F961" title="Server pools are the basis for policy-managed databases.">Overview of Server Pools and Policy-Managed Databases</a></li>
                           <li><a href="introduction-to-oracle-rac.html#GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506" title="Part of Oracle Database deployment is the creation of the database.">Oracle RAC Database Management Styles and Database Creation</a></li>
                           <li><a href="../netag/managing-oracle-net-services.html#NETAG-GUID-D8861C13-A525-4A57-97FD-BD8F2DC5A662" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD8905"></a><div class="sect3"><a id="GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506" name="GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506"></a><h4 id="RACAD-GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506" class="sect4">Oracle RAC Database Management Styles and Database Creation</h4>
                  <div>
                     <p>Part of Oracle Database deployment is the creation of the database.</p>
                     <p>You can choose to create a database as part of the database software deployment, as described in <span class="q">"Oracle RAC Database Management Styles and Database Installation"</span>, or you can choose to only deploy the database software, first, and then, subsequently, create any database that is meant to run out of the newly created Oracle home by using DBCA. In either case, you must consider the management style that you plan to use for the Oracle RAC databases.
                     </p>
                     <p>For administrator-managed databases, you must ensure that the database software is deployed on the nodes on which you plan to run the respective database instances. You must also ensure that these nodes have access to the storage in which you want to store the database files. Oracle recommends that you select Oracle ASM during database installation to simplify storage management. Oracle ASM automatically manages the storage of all database files within disk groups. If you plan to use Oracle Database Standard Edition to create an Oracle RAC database, then you <span class="italic">must</span> use Oracle ASM to store all of the database files.
                     </p>
                     <p>For policy-managed databases, you must ensure that the database software is deployed on all nodes on which database instances can potentially run, given your active server pool setup. You must also ensure that these nodes have access to the storage in which you want to store the database files. Oracle recommends using Oracle ASM, as previously described for administrator-managed databases.</p>
                     <p>Server pools are a feature of Oracle Grid Infrastructure (specifically Oracle Clusterware). There are different ways you can set up server pools on the Oracle Clusterware level, and Oracle recommends you create server pools for database management before you create the respective databases. DBCA, however, will present you with a choice of either using precreated server pools or creating a new server pool, when you are creating a policy-managed database. Whether you can create a new server pool during database creation depends on the server pool configuration that is active at the time.</p>
                     <p>By default, DBCA creates one service for your Oracle RAC installation. This is the default database service and should not be used for user connectivity. The default database service is typically identified using the combination of the <code class="codeph">DB_NAME</code> and <code class="codeph">DB_DOMAIN</code> initialization parameters: <code class="codeph"><span class="variable" translate="no">db_name.db_domain</span></code>. The default service is available on all instances in an Oracle RAC environment, unless the database is in restricted mode.
                     </p>
                     <div class="infoboxnote" id="GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506__GUID-A3557EF3-5EFE-4F60-9834-316CE649506B">
                        <p class="notep1">Note:</p>
                        <p>Oracle recommends that you reserve the default database service for maintenance operations and create dynamic database services for user or application connectivity as a post-database-creation step, using either SRVCTL or Oracle Enterprise Manager. DBCA no longer offers a dynamic database service creation option for Oracle RAC databases. For Oracle RAC One Node databases, you must create at least one dynamic database service.</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="introduction-to-oracle-rac.html#GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C">Oracle RAC Database Management Styles and Database Installation</a></li>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-42F6324B-8A51-4FDE-9E9B-38B058F227A5" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD1113"></a><div class="sect3"><a id="GUID-918558E3-24DC-4145-A073-4A4A20BE97C2" name="GUID-918558E3-24DC-4145-A073-4A4A20BE97C2"></a><h4 id="RACAD-GUID-918558E3-24DC-4145-A073-4A4A20BE97C2" class="sect4">Overview of Extending an Oracle RAC Cluster</h4>
                  <div>
                     <p>If you want to extend the Oracle RAC cluster (also known as cloning) and add nodes to the existing environment after your initial deployment, then you must to do this on multiple layers, considering the management style that you currently use in the cluster.</p>
                     <p>Oracle provides various means of extending an Oracle RAC cluster. In principle, you can choose from the following approaches to extend the current environment:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Fleet Patching and Provisioning to provision new Oracle RAC databases and other software</p>
                        </li>
                        <li>
                           <p>Cloning using cloning scripts</p>
                        </li>
                        <li>
                           <p>Adding nodes using the <code class="codeph">addnode.sh</code> (<code class="codeph">addnode.bat</code> on Windows) script
                           </p>
                        </li>
                     </ul>
                     <p>Both approaches are applicable, regardless of how you initially deployed the environment. Both approaches copy the required Oracle software on to the node that you plan to add to the cluster. Software that gets copied to the node includes the Oracle Grid Infrastructure software and the Oracle database homes.</p>
                     <p>For Oracle database homes, you must consider the management style deployed in the cluster. For administrator-managed databases, you must ensure that the database software is deployed on the nodes on which you plan to run the respective database instances. For policy-managed databases, you must ensure that the database software is deployed on all nodes on which database instances can potentially run, given your active server pool setup. In either case, you must first deploy Oracle Grid Infrastructure on all nodes that are meant to be part of the cluster.</p>
                     <div class="infoboxnote" id="GUID-918558E3-24DC-4145-A073-4A4A20BE97C2__GUID-1938526B-7663-42EC-BFF8-1AC341AD964D">
                        <p class="notep1">Note:</p>
                        <p>Oracle cloning is not a replacement for cloning using Oracle Enterprise Manager as part of the Provisioning Pack. When you clone Oracle RAC using Oracle Enterprise Manager, the provisioning process includes a series of steps where details about the home you want to capture, the location to which you want to deploy, and various other parameters are collected.</p>
                     </div>
                     <p>For new installations or if you install only one Oracle RAC database, use the traditional automated and interactive installation methods, such as Oracle Universal Installer, Fleet Patching and Provisioning, or the Provisioning Pack feature of Oracle Enterprise Manager. If your goal is to add or delete Oracle RAC from nodes in the cluster, you can use the procedures detailed in <span class="q">"Adding and Deleting Oracle RAC from Nodes on Linux and UNIX Systems"</span>.
                     </p>
                     <p>The cloning process assumes that you successfully installed an Oracle Clusterware home and an Oracle home with Oracle RAC on at least one node. In addition, all root scripts must have run successfully on the node from which you are extending your cluster database.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-8444F1C2-5F67-46B4-ABDE-18D3AFF42D55" title="This chapter describes how to clone Oracle Real Application Clusters (Oracle RAC) database homes on Linux and UNIX systems to nodes in a new cluster.">Cloning Oracle RAC to Nodes in a New Cluster</a></li>
                           <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-66AB702E-D600-4B10-9BF3-AC0E7C7BF44D" title="Extend an existing Oracle Real Application Clusters (Oracle RAC) home to other nodes and instances in the cluster, and delete Oracle RAC from nodes and instances in the cluster.">Adding and Deleting Oracle RAC from Nodes on Linux and UNIX Systems</a></li>
                           <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-75C6891F-ECDC-4D78-9176-EB7E7080FBCB" title="You can use either Oracle Enterprise Manager or DBCA to add Oracle RAC database instances to the target nodes.Add instances to nodes on which you have extended an Oracle Clusterware home and an Oracle Database home.The procedures for deleting instances are different for policy-managed and administrator-managed databases.This procedure removes the Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.">Adding and Deleting Oracle RAC from Nodes on Windows Systems</a></li>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/racad&amp;id=CWADD-GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-918558E3-24DC-4145-A073-4A4A20BE97C2__GUID-57B875BB-8920-4750-9510-63D83E487AA7">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span> for more information about Fleet Patching and Provisioning
                              </p>
                           </li>
                           <li>
                              <p>Oracle Enterprise Manager online help system for more information about the Provisioning Pack</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD8960"></a><div class="sect2"><a id="GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6" name="GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6"></a><h3 id="RACAD-GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6" class="sect3">Overview of Oracle Real Application Clusters One Node</h3>
               <div>
                  <p>Oracle Real Application Clusters One Node (Oracle RAC One Node) is an option to Oracle Database Enterprise Edition available since Oracle Database 11<span class="italic">g</span> release 2 (11.2).
                  </p>
                  <p>Oracle RAC One Node is a single instance of an Oracle RAC-enabled database running on one node in the cluster, only, under normal operations. This option adds to the flexibility that Oracle offers for database consolidation while reducing management overhead by providing a standard deployment for Oracle databases in the enterprise. Oracle RAC One Node database requires Oracle Grid Infrastructure and, therefore, requires the same hardware setup as an Oracle RAC database.</p>
                  <p>Oracle supports Oracle RAC One Node on all platforms on which Oracle RAC is certified. Similar to Oracle RAC, Oracle RAC One Node is certified on Oracle Virtual Machine (Oracle VM). Using Oracle RAC or Oracle RAC One Node with Oracle VM increases the benefits of Oracle VM with the high availability and scalability of Oracle RAC.</p>
                  <p>With Oracle RAC One Node, there is no limit to server scalability and, if applications grow to require more resources than a single node can supply, then you can upgrade your applications online to Oracle RAC. If the node that is running Oracle RAC One Node becomes overloaded, then you can relocate the instance to another node in the cluster. With Oracle RAC One Node you can use the Online Database Relocation feature to relocate the database instance with no downtime for application users. Alternatively, you can limit the CPU consumption of individual database instances per server within the cluster using Resource Manager Instance Caging and dynamically change this limit, if necessary, depending on the demand scenario.</p>
                  <p>Using the Single Client Access Name (SCAN) to connect to the database, clients can locate the service independently of the node on which it is running. Relocating an Oracle RAC One Node instance is therefore mostly transparent to the client, depending on the client connection. Oracle recommends to use either Application Continuity and Oracle Fast Application Notification or Transparent Application Failover to minimize the impact of a relocation on the client.</p>
                  <p>Oracle RAC One Node databases are administered slightly differently from Oracle RAC or non-cluster databases. For administrator-managed Oracle RAC One Node databases, you must monitor the candidate node list and make sure a server is always available for failover, if possible. Candidate servers reside in the Generic server pool and the database and its services will fail over to one of those servers.</p>
                  <p>For policy-managed Oracle RAC One Node databases, you must ensure that the server pools are configured such that a server will be available for the database to fail over to in case its current node becomes unavailable. In this case, the destination node for online database relocation must be located in the server pool in which the database is located. Alternatively, you can use a server pool of size 1 (one server in the server pool), setting the minimum size to 1 and the importance high enough in relation to all other server pools used in the cluster, to ensure that, upon failure of the one server used in the server pool, a new server from another server pool or the Free server pool is relocated into the server pool, as required.</p>
                  <div class="infoboxnote" id="GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6__GUID-F0914FAD-410D-434A-A94E-ACCA4F2454C0">
                     <p class="notep1">Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Oracle RAC One Node supports Transaction Guard and Application Continuity for failing clients over.</p>
                        </li>
                        <li>
                           <p>To prepare for all failure possibilities, you must add at least one Dynamic Database Service (Oracle Clusterware-managed database service) to an Oracle RAC One Node database.</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../rilin/installing-oracle-rac-and-oracle-rac-one-node.html#RILIN-GUID-15AAC8E3-5AF7-48B7-BD53-EFE662FA669A" target="_blank"><span><cite>Oracle Real Application Clusters Installation Guide for Linux and UNIX</cite></span></a></li>
                        <li><a href="ensuring-application-continuity.html#GUID-097A5067-8CCF-4FF0-B97B-BF109DFA1841" title="Transaction Guard prevents a transaction being replayed by Application Continuity from being applied more than once.">Transaction Guard for Improving Client Failover</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD0015"></a><div class="sect2"><a id="GUID-4194E2D5-53CD-4D93-BE20-42EC14B7C44A" name="GUID-4194E2D5-53CD-4D93-BE20-42EC14B7C44A"></a><h3 id="RACAD-GUID-4194E2D5-53CD-4D93-BE20-42EC14B7C44A" class="sect3">Overview of Oracle Clusterware for Oracle RAC</h3>
               <div>
                  <p>Oracle Clusterware provides a complete, integrated clusterware management solution on all Oracle Database platforms.</p>
                  <p>This clusterware functionality provides all of the features required to manage your cluster database including node membership, group services, global resource management, and high availability functions.</p>
                  <p>You can install Oracle Clusterware independently or as a prerequisite to the Oracle RAC installation process. Oracle Database features, such as services, use the underlying Oracle Clusterware mechanisms to provide advanced capabilities. Oracle Database also continues to support select third-party clusterware products on specified platforms.</p>
                  <p>Oracle Clusterware is designed for, and tightly integrated with, Oracle RAC. You can use Oracle Clusterware to manage high-availability operations in a cluster. When you create an Oracle RAC database using any of the management tools, the database is registered with and managed by Oracle Clusterware, along with the other required components such as the VIP address, the Single Client Access Name (SCAN) (which includes the SCAN VIPs and the SCAN listener), Oracle Notification Service, and the Oracle Net listeners. These resources are automatically started when the node starts and automatically restart if they fail. The Oracle Clusterware daemons run on each node.</p>
                  <p>Anything that Oracle Clusterware manages is known as a <span class="italic">CRS resource</span>. A CRS resource can be a database, an instance, a service, a listener, a VIP address, or an application process. Oracle Clusterware manages CRS resources based on the resource's configuration information that is stored in the Oracle Cluster Registry (OCR). You can use SRVCTL commands to administer any Oracle-defined CRS resources. Oracle Clusterware provides the framework that enables you to create CRS resources to manage any process running on servers in the cluster which are not predefined by Oracle. Oracle Clusterware stores the information that describes the configuration of these components in OCR that you can administer.
                  </p>
                  <p>Another advantage with Oracle Flex Clusters is that you can convert Hub Nodes to Leaf Nodes and vice versa, and you can convert a Leaf Node to a Hub Node with no downtime.</p>
                  <p>This section includes the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-083A53F8-C0EC-4308-B5C9-6C92148BAE41" title="Oracle Flex Clusters provide a platform for a variety of applications, including Oracle RAC databases with large numbers of nodes.">Overview of Oracle Flex Clusters</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-FE34333D-7A31-4C33-BDE5-0C92F5739998" title="Reader nodes are instances of an Oracle RAC database that run on Leaf Nodes in an Oracle Flex Cluster.">Overview of Reader Nodes</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F" title="Oracle uses local temporary tablespaces to write spill-overs to the local (non-shared) temporary tablespaces which are created on local disks on the reader nodes.">Overview of Local Temporary Tablespaces</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../cwadd/managing-oracle-cluster-registry-and-voting-files.html#CWADD-GUID-20101C89-B87C-49C9-BA63-634376EDB62E" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                        <li><a href="../cwadd/oracle-flex-clusters.html#CWADD-GUID-DF441DD8-B3B4-48C2-96B5-3DD59EAAC8EF" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-083A53F8-C0EC-4308-B5C9-6C92148BAE41" name="GUID-083A53F8-C0EC-4308-B5C9-6C92148BAE41"></a><h4 id="RACAD-GUID-083A53F8-C0EC-4308-B5C9-6C92148BAE41" class="sect4">Overview of Oracle Flex Clusters</h4>
                  <div>
                     <p>Oracle Flex Clusters provide a platform for a variety of applications, including Oracle RAC databases with large numbers of nodes.</p>
                     <p>Oracle Flex Clusters also provide a platform for other service deployments that require coordination and automation for high availability.</p>
                     <p>All nodes in an Oracle Flex Cluster belong to a single Oracle Grid Infrastructure cluster. This architecture centralizes policy decisions for deployment of resources based on application needs, to account for various service levels, loads, failure responses, and recovery.</p>
                     <p>Oracle Flex Clusters contain two types of nodes arranged in a hub and spoke architecture: <a href="glossary.html#GUID-8AD68754-1C50-408B-82A9-61D132FC09F9"><span class="xrefglossterm">Hub Node</span></a>s and <a href="glossary.html#GUID-57A8F9FA-9AA0-4F47-828D-22B38FE7B924"><span class="xrefglossterm">Leaf Node</span></a>s. The number of Hub Nodes in an Oracle Flex Cluster can be as many as 64. The number of Leaf Nodes can be many more. Hub Nodes and Leaf Nodes can host different types of applications.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../cwadd/oracle-flex-clusters.html#CWADD-GUID-DF441DD8-B3B4-48C2-96B5-3DD59EAAC8EF" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-FE34333D-7A31-4C33-BDE5-0C92F5739998" name="GUID-FE34333D-7A31-4C33-BDE5-0C92F5739998"></a><h4 id="RACAD-GUID-FE34333D-7A31-4C33-BDE5-0C92F5739998" class="sect4">Overview of Reader Nodes</h4>
                  <div>
                     <p>Reader nodes are instances of an Oracle RAC database that run on Leaf Nodes in an Oracle Flex Cluster.</p>
                     <p>An advantage of using reader nodes is that these instances are not affected if you need to reconfigure a Hub Node. Parallel query jobs running on reader nodes are not subject to the brownout times that can occur when you reconfigure a Hub Node, and can continue to service clients that are connected to the reader nodes, as long as the Hub Node to which it is connected is not evicted from the cluster. You can scale up to 64 reader nodes per Hub Node, and reader nodes can utilize massive parallel query to speed up operations on large data sets.</p>
                     <p>Database instances running on reader nodes have different characteristics than database instances running on Hub Nodes. Hub Node instances are similar to previous versions of Oracle RAC database instances, whereas instances running on reader nodes have the following notable differences:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Database instances run in read-only mode.</p>
                        </li>
                        <li>
                           <p>Database instances are unaffected if you reconfigure Hub Node clusterware. Database instances running on reader nodes are not subject to the brownout times and can continue to service the clients connected to the reader nodes, as long as the Hub Node to which it is connected is not evicted from the cluster. Using reader nodes, you can scale up to 64 reader nodes per hub.</p>
                        </li>
                        <li>
                           <p>Because database instances running on the reader nodes are read only, you will receive an error if you attempt any DDL or DML operations.</p>
                        </li>
                     </ul>
                     <p>You can create services to direct queries to read-only instances running on reader nodes. These services can use parallel query to further speed up performance. Oracle recommends that you size the memory in these reader nodes as high as possible so that parallel queries can use the memory for best performance.</p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F" name="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F"></a><h4 id="RACAD-GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F" class="sect4">Overview of Local Temporary Tablespaces</h4>
                  <div>
                     <p>Oracle uses local temporary tablespaces to write spill-overs to the local (non-shared) temporary tablespaces which are created on local disks on the reader nodes.</p>
                     <p>It is still possible for SQL operations, such as hash aggregation, sort, hash join, creation of cursor-duration temporary tables for the <code class="codeph">WITH</code> clause, and star transformation to spill over to disk (specifically to the global temporary tablespace on shared disks). Management of the local temporary tablespace is similar to that of the existing temporary tablespace.
                     </p>
                     <p>Local temporary tablespaces improve temporary tablespace management in read-only instances by:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Storing temp files in reader node private storage to take advantage of the I/O benefits of local storage.</p>
                        </li>
                        <li>
                           <p>Avoiding expensive cross-instance temporary tablespace management.</p>
                        </li>
                        <li>
                           <p>Increased addressability of temporary tablespace.</p>
                        </li>
                        <li>
                           <p>Improving instance warm-up performance by eliminating on-disk space metadata management.</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-D6ACD8BF-2373-4F09-B885-EE33022074F1">
                        <p class="notep1">Note:</p>You cannot use local temporary tablespaces to store database objects, such as tables or indexes. This same restriction is also true for space for Oracle global temporary tables.
                     </div>
                     <p>This section includes the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__PARALLELEXECUTIONSUPPORTFORCURSOR-D-054A7763">Parallel Execution Support for Cursor-Duration Temporary Tablespaces</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEORGANIZATIO-054A79AC">Local Temporary Tablespace Organization</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__TEMPORARYTABLESPACEHIERARCHY-054A7B94">Temporary Tablespace Hierarchy</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEFEATURES-054A807A">Local Temporary Tablespace Features</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__METADATAMANAGEMENTOFLOCALTEMPORARYF-054A8203">Metadata Management of Local Temporary Files</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__DDLSUPPORTFORLOCALTEMPORARYTABLESPA-054A8408">DDL Support for Local Temporary Tablespaces</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEFORUSERS-054A86C7">Local Temporary Tablespaces for Users</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__ATOMICITYREQUIREMENTFORCOMMANDS-054A88E3">Atomicity Requirement for Commands</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEANDDICTIONA-054A8C42">Local Temporary Tablespace and Dictionary Views</a></p>
                        </li>
                     </ul>
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__PARALLELEXECUTIONSUPPORTFORCURSOR-D-054A7763">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-B21F4FB0-E49A-4310-A0A1-DB7AECE19B1D">Parallel Execution Support for Cursor-Duration Temporary Tablespaces</p>
                        <p>The temporary tablespaces created for the <code class="codeph">WITH</code> clause and star transformation exist in the temporary tablespace on the shared disk. A set of parallel query child processes load intermediate query results into these temporary tablespaces, which are then read later by a different set of child processes. There is no restriction on how these child processes reading these results are allocated, as any parallel query child process on any instance can read the temporary tablespaces residing on the shared disk.
                        </p>
                        <p>For read-write and read-only instance architecture, as the parallel query child processes load intermediate results to the local temporary tablespaces of these instances, the parallel query child processes belonging to the instance where the intermediate results are stored share affinity with the reads for the intermediate results and can thus read them.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEORGANIZATIO-054A79AC">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-FF6A5E9D-486D-4F2C-AF33-35FC90B02A3D">Local Temporary Tablespace Organization</p>
                        <p>You can create local temporary tablespace using the <code class="codeph">{FOR_RIM | FOR ALL}</code> extension, as follows:
                        </p><pre class="pre codeblock"><code>CREATE LOCAL TEMPORARY TABLESPACE FOR RIM local_temp_ts_for_rim TEMPFILE\
   '/u01/app/oracle/database/12.2.0.1/dbs/temp_file_rim'\
   EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre><ul style="list-style-type: disc;">
                           <li>
                              <p>Creation of a local temporary tablespace results in the creation of local temporary files on every instance and not a single file, as is currently true for shared global temporary tablespaces.</p>
                           </li>
                           <li>
                              <p>You can create local temporary tablespaces for both read-only and read-write instances. The <code class="codeph">LOCAL...FOR RIM</code> option creates a local temporary tablespace whose files reside on local disks for read-only instances. The <code class="codeph">LOCAL...FOR ALL</code> option creates a local temporary tablespace whose files reside on local disks for both read-write and read-only instances. For example:
                              </p><pre class="pre codeblock"><code>CREATE LOCAL TEMPORARY TABLESPACE FOR ALL temp_ts_for_all  TEMPFILE\
  ‘/u01/app/oracle/database/12.2.0.1/dbs/temp_file_all’\
  EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__TEMPORARYTABLESPACEHIERARCHY-054A7B94">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-FFF2F364-A6B3-42AE-9617-EB09B4ABD977">Temporary Tablespace Hierarchy</p>
                        <p>When you define local temporary tablespace and shared (existing) temporary tablespace, there is a hierarchy in which they are used. To understand the hierarchy, remember that there can be multiple shared temporary tablespaces in a database, such the default shared temporary tablespace for the database and multiple temporary tablespaces assigned to individual users. If a user has a shared temporary tablespace assigned, then that tablespace is used first, otherwise the database default temporary tablespace is used.</p>
                        <p>Once a tablespace has been selected for spilling during query processing, there is no switching to another tablespace. For example, if a user has a shared temporary tablespace assigned and during spilling it runs out of space, then there is no switching to an alternative tablespace. The spilling, in that case, will result in an error. Additionally, remember that shared temporary tablespaces are shared among instances.</p>
                        <p>The allocation of temporary space for spilling to a local temporary tablespace differs between read-only and read-write instances. For read-only instances, the following is the priority of selecting which temporary location to use for spills:</p>
                        <ol>
                           <li>
                              <p>Allocate from a user's local temporary tablespace.</p>
                           </li>
                           <li>
                              <p>Allocate from the database default local temporary tablespace.</p>
                           </li>
                           <li>
                              <p>Allocate from a user's temporary tablespace.</p>
                           </li>
                           <li>
                              <p>Allocate from the database default temporary tablespace.</p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-06284F3F-8921-408C-8AB5-416573E8585A">
                           <p class="notep1">Note:</p>If there is no local temporary tablespace in the database, then read-only instances will spill to shared temporary tablespace.
                        </div>
                        <p>For read-write instances, the priority of allocation differs from the preceding allocation order, as shared temporary tablespaces are given priority, as follows:</p>
                        <ol>
                           <li>
                              <p>Allocate from a user’s shared temporary tablespace.</p>
                           </li>
                           <li>
                              <p>Allocate from a user’s local temporary tablespace.</p>
                           </li>
                           <li>
                              <p>Allocate from the database default shared temporary tablespace.</p>
                           </li>
                           <li>
                              <p>Allocate from the database default local temporary tablespace.</p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-CD5915B1-0840-4D67-8858-B07C3A7F29F7">
                           <p class="notep1">Note:</p>For read-write instances to use a local temporary tablespace, that temporary tablespace must be created with the <code class="codeph">LOCAL...FOR ALL</code> option.
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEFEATURES-054A807A">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-E7B96DDE-DF2F-4DB3-B676-7DCDD778385D">Local Temporary Tablespace Features</p>
                        <p>Instances cannot share local temporary tablespace, hence one instance cannot take local temporary tablespace from another. If an instance runs out of temporary tablespace during spilling, then the statement resutls in an error.</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Local temporary tablespace support only one <code class="codeph">BIGFILE</code> per tablespace.
                              </p>
                           </li>
                           <li>
                              <p>To address contention issues arising from having only one <code class="codeph">BIGFILE</code>-based local temporary tablespace, multiple local temporary tablespaces can be assigned to different users, as default.
                              </p>
                           </li>
                           <li>
                              <p>A database administrator can specify the default temporary tablespace for a user using <code class="codeph">ALTER USER</code> syntax. For example:
                              </p><pre class="pre codeblock"><code>ALTER USER MAYNARD LOCAL TEMPORARY TABLESPACE temp_ts_for_rim;</code></pre></li>
                           <li>
                              <p>A user can be configured with two default temporary tablespaces:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>One local temporary (created with the <code class="codeph">FOR RIM</code> option) when the user is connected to the read-only instance running on reader nodes.
                                    </p>
                                 </li>
                                 <li>
                                    <p>One shared temporary tablespace to be used when the same user is connected on the read-write instances running on a Hub Node.</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__METADATAMANAGEMENTOFLOCALTEMPORARYF-054A8203">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-389B0E4A-56BE-4EF8-BCBC-0C64528F10C5">Metadata Management of Local Temporary Files</p>
                        <p>Currently, temporary file information (such as file name, creation size, creation SCN, temporary block size, and file status) is stored in the control file along with the initial and max files, as well as auto extent attributes. However, the information about local temporary files in the control file is common to all applicable instances (read write and read only for <code class="codeph">LOCAL...FOR ALL</code>, and read only for <code class="codeph">LOCAL...FOR RIM</code>).
                        </p>
                        <p>Instance-specific information, such as bitmap for allocation, current size for a temporary file, and the file status, is stored in the SGA on instances and not in the control file because this information can be different for different instances. When an instance starts up, it reads the information in the control file and creates the temporary files that constitute the local temporary tablespace for that instance. If there are two or more instances running on a node, then each instance will have its own local temporary files.</p>
                        <p>For local temporary tablespaces, there is a separate file for each involved instance. If you create the local temporary tablespace using the <code class="codeph">LOCAL...FOR RIM</code> option, then Oracle creates files only on read-only instances. If you create the local temporary tablespace using the <code class="codeph">LOCAL...FOR ALL</code> option, then Oracle creates files on all instances. The local temporary file names follow a naming convention such that the instance numbers are appended to the temporary file names specified while creating the local temporary tablespace.
                        </p>
                        <p>For example, assume that a read-only node, N1, runs two Oracle read-only database instances with numbers 3 and 4. The following DDL command creates two files on node N1—<code>/temp/temp_file_rim_3</code> and <code>/temp/temp_file_rim_4</code>, for instance 3 and 4 respectively:
                        </p><pre class="pre codeblock"><code>CREATE LOCAL TEMPORARY TABLESPACE FOR RIM temp_ts_for_rim TEMPFILE  '/temp/temp_file_rim'\
   EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre><p>Assuming that there are two read-write instances (instance numbers 1 and 2) and two read-only instances (instance numbers 3 and 4), the following DDL command creates four files—<code>/temp/temp_file_all_1</code> and <code>/temp/temp_file_all_2</code> for instances 1 and 2, respectively, and <code>/temp/temp_file_all_3</code> and <code>/temp/temp_file_all_4</code> for instances 3 and 4, respectively:
                        </p><pre class="pre codeblock"><code>CREATE LOCAL TEMPORARY TABLESPACE FOR ALL  temp_ts_for_all TEMPFILE  '/temp/temp_file_all'\
   EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__DDLSUPPORTFORLOCALTEMPORARYTABLESPA-054A8408">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-6020B383-934F-494F-82AB-0CFD2694ED3E">DDL Support for Local Temporary Tablespaces</p>
                        <p>You manage local temporary tablespaces and temporary files with either <code class="codeph">ALTER TABLESPACE</code>, <code class="codeph">ALTER DATABASE</code>, or both DDL commands. All DDL commands related to local temporary tablespace management and creation are run from the read-write instances. Running all other DDL commands will affect all instances in a homogeneous manner.
                        </p>
                        <p>For example, the following command resizes the temporary files on all read-only instances:</p><pre class="pre codeblock"><code>ALTER TABLESPACE temp_ts_for_rim RESIZE 1G;</code></pre><p>For local temporary tablespaces, Oracle supports the allocation options and their restrictions currently active for temporary files.</p>
                        <p>To run a DDL command on a local temporary tablespace on a read-only instance, only (in particular, <code class="codeph">CREATE LOCAL TABLESPACE...FOR RIM</code> or <code class="codeph">ALTER TABLESPACE LOCAL TABLESPACE...FOR RIM</code>), there must be at least one read-only instance in the cluster. This restriction is not applicable when creating or altering local temporary tablespaces <code class="codeph">FOR ALL</code>. Users can assign a default local temporary tablespace to the database with a <code class="codeph">DEFAULT LOCAL TEMPORARY TABLESPACE</code> clause appended to the <code class="codeph">ALTER DATABASE</code> command.
                        </p>
                        <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-B1829D8F-CE71-46BB-AC61-8FD727B48934">
                           <p class="notep1">Note:</p>The annotation <code class="codeph">FOR RIM</code> is unnecessary because it is implied by the name of the table space.
                        </div>
                        <p>For example:</p><pre class="pre codeblock"><code>ALTER DATABASE DEFAULT LOCAL TEMPORARY TABLESPACE temp_ts_for_rim;</code></pre><p>A database administrator can specify default temporary tablespace when creating the database, as follows:</p><pre class="pre codeblock"><code>CREATE DATABASE .. DEFAULT TEMPORARY TABLESPACE temp_ts_for_dbtemp_ts_for_rim TEMPFILE\
   '/temp/temp_file_for_dbrim' EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre><p>It is not possible to specify default local temporary tablespaces using the <code class="codeph">CREATE DATABASE</code> command. When you create a database, its default local temporary tablespace will point to the default shared temporary tablespace. Database administrators must run the <code class="codeph">ALTER DATABASE</code> command to assign an existing local temporary tablespace as the default for the database.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEFORUSERS-054A86C7">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-3811732C-71A0-4A89-A965-368E40A389BC">Local Temporary Tablespace for Users</p>
                        <p>When you create a user without explicitly specifying shared or local temporary tablespace, the user inherits shared and local temporary tablespace from the corresponding default database tablespaces. You can specify default local temporary tablespace for a user, as follows:</p><pre class="pre codeblock"><code>CREATE USER <span class="variable" translate="no">new_user</span> IDENTIFIED BY <span class="variable" translate="no">new_user</span> LOCAL TEMPORARY TABLESPACE temp_ts_for_all;</code></pre><p>You can change the local temporary tablespace for a user using the <code class="codeph">ALTER USER</code> command, as follows:
                        </p><pre class="pre codeblock"><code>ALTER USER maynard LOCAL TEMPORARY TABLESPACE temp_ts_for_rim;</code></pre><p>As previously mentioned, default user local temporary tablespace can be shared temporary space. Consider the following items for the <code class="codeph">ALTER USER...TEMPORARY TABLESPACE</code> command:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You can change the user default local temporary tablespace to any existing local temporary tablespace.</p>
                           </li>
                           <li>
                              <p>If you want to set the user default local temporary tablespace to a shared temporary tablespace, <code class="codeph">T</code>, then <code class="codeph">T</code> must be the same as the default shared temporary tablespace.
                              </p>
                           </li>
                           <li>
                              <p>If a default user local temporary tablespace points to a shared temporary tablespace, then, when you change the default shared temporary tablespace of the user, you also change the default local temporary tablespace to that tablespace.</p>
                           </li>
                        </ul>
                        <p>Following are some examples of local temporary space management using the <code class="codeph">ALTER</code> command:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To take a local temporary tablespace offline:</p><pre class="pre codeblock"><code>ALTER DATABASE TEMPFILE ‘/temp/temp_file_rim’ OFFLINE;</code></pre></li>
                           <li>
                              <p>To decrease the size of a local temporary tablespace:</p><pre class="pre codeblock"><code>ALTER TABLESPACE temp_ts_for_rim SHRINK SPACE KEEP 20M</code></pre></li>
                           <li>
                              <p>To change the auto-extension attributes of a local temporary file:</p><pre class="pre codeblock"><code>ALTER TABLESPACE temp_ts_for_rim AUTOEXTEND ON NEXT 20G</code></pre></li>
                           <li>
                              <p>To resize a local temporary file:</p><pre class="pre codeblock"><code>ALTER TABLESPACE temp_ts_for_rim RESIZE 10G</code></pre><div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-2549168B-2606-4181-A770-5FA8436760D6">
                                 <p class="notep1">Note:</p>When you resize a local temporary file, it applies to individual files.
                              </div>
                           </li>
                        </ul>
                        <p>Some read-only instances may be down when you run any of the preceding commands. This does not prevent the commands from succeeding because, when a read-only instance starts up later, it creates the temporary files based on information in the control file. Creation is fast because Oracle reformats only the header block of the temporary file, recording information about the file size, among other things. If you cannot create any of the temporary files, then the read-only instance stays down. Commands that were submitted from a read-write instance are replayed, immediately, on all open read-only instances.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__ATOMICITYREQUIREMENTFORCOMMANDS-054A88E3">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-4DB1A780-7583-42C2-A1A1-B59BE684C445">Atomicity Requirement for Commands</p>
                        <p>All the commands that you run from the read-write instances are performed in an atomic manner, which means the command succeeds only when it succeeds on all live instances.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEANDDICTIONA-054A8C42">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-87C59A8F-3C09-4ADB-A1E3-0B0909F5887C">Local Temporary Tablespace and Dictionary Views</p>
                        <p>Oracle extended dictionary views to display information about local temporary tablespaces. Oracle made the following changes:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>All the diagnosibility information related to temporary tablespaces and temporary files exposed through AWR, SQL monitor, and other utilities, is also available for local temporary tablespaces and local temporary files. This information is available with the exisiting dictionary views for temporary tablespaces and temporary files: <code class="codeph">DBA_TEMP_FILES</code>, <code class="codeph">DBA_TEMP_FREE_SPACE</code>.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">USER_TABLESPACES</code> and <code class="codeph">DBA_TABLESPACES</code> dictionary view are extended by a column, called <code class="codeph">SHARED</code>, that indicates whether the temporary file is local (<code class="codeph">FOR RIM</code> or <code class="codeph">FOR ALL</code>) or shared.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">DBA_TEMP_FILES</code> dictionary view is extended by two columns: <code class="codeph">SHARED</code> and <code class="codeph">INST_ID</code>. The <code class="codeph">SHARED</code> column indicates whether the temp file is local (<code class="codeph">FOR RIM</code> or <code class="codeph">FOR ALL</code>) or shared. The <code class="codeph">INST_ID</code> column contains the instance number. For shared temporary files, there is a single row per file, and the <code class="codeph">INST_ID</code> is null. For local temporary files, this column contains information about temporary files per instance, such as the size of the file in bytes (<code class="codeph">BYTES</code> column).
                              </p>
                              <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-CFD85A78-74F2-4B4E-8113-BD4459AF495B">
                                 <p class="notep1">Note:</p><code class="codeph">LOCAL...FOR RIM</code> shows only read-only instances per file.
                              </div>
                           </li>
                           <li>
                              <p>The <code class="codeph">DBA_TEMP_FREE_SPACE</code> dictionary view is extended by two columns: <code class="codeph">SHARED</code> and <code class="codeph">INST_ID</code>. The <code class="codeph">SHARED</code> column indicates whether the temporary file is local (<code class="codeph">FOR RIM</code> or <code class="codeph">FOR ALL</code>) or shared. The <code class="codeph">INST_ID</code> column contains the instance number. For shared temporary files, there is a single row per file, and the <code class="codeph">INST_ID</code> is null. For local temporary files, this column contains information about temporary files per instance, such as total free space available (<code class="codeph">FREE_SPACE</code> column).
                              </p>
                              <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-875375A5-323E-4365-B689-09537091F268">
                                 <p class="notep1">Note:</p><code class="codeph">LOCAL...FOR RIM</code> shows only read-only instances per file.
                              </div>
                           </li>
                           <li>
                              <p>In the dictionary views, such as <code class="codeph">DBA_TABLESPACES</code>, Oracle distinguishes the type of the tablespace using the <code class="codeph">SHARED</code> column with the following values:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">SHARED</code>: for shared temporary tablespace
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">LOCAL_ON_ALL</code>: for local temporary tablespace on all instances
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">LOCAL_ON_RIM</code>: for local temporary tablespace on read-only instances
                                    </p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-5D4396A6-BC67-4D0A-BA63-D1B2159E201E">
                                 <p class="notep1">Note:</p>Currently, spills onto temporary tablespace for queries (such as sort and hash join spills) are automatically encrypted. This is also true for spills to local temporary tablespace.
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../sqlrf/CREATE-TABLESPACE.html#SQLRF-GUID-51F07BF5-EFAF-4910-9040-C473B86A8BF9" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD7271"></a><div class="sect2"><a id="GUID-0014A9C2-F7E3-43D2-913E-494CAC107C03" name="GUID-0014A9C2-F7E3-43D2-913E-494CAC107C03"></a><h3 id="RACAD-GUID-0014A9C2-F7E3-43D2-913E-494CAC107C03" class="sect3">Overview of Oracle RAC Architecture and Processing</h3>
               <div>
                  <p>At a minimum, Oracle RAC requires Oracle Clusterware software infrastructure to provide concurrent access to the same storage and the same set of data files from all nodes in the cluster, a communications protocol for enabling interprocess communication (IPC) across the nodes in the cluster, enable multiple database instances to process data as if the data resided on a logically combined, single cache, and a mechanism for monitoring and communicating the status of the nodes in the cluster. </p>
                  <p>The following sections describe these concepts in more detail:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-3D97ED57-338F-465F-8CC9-A2DFB14A00E4">Understanding Cluster-Aware Storage Solutions</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-504A615B-C63C-43C4-A481-520DEC015EF1" title="All nodes in an Oracle RAC environment must connect to at least one Local Area Network (LAN) (commonly referred to as the public network) to enable users and applications to access the database.">Oracle RAC and Network Connectivity</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-F859B8B3-16B2-49CC-B41E-39A328F8027B" title="Applications should use the Dynamic Database Services feature to connect to an Oracle database over the public network.">Overview of Using Dynamic Database Services to Connect to Oracle Databases</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-AEC7612B-4C10-40F2-A0DC-F5E308A948E8" title="The valid node checking feature provides the ability to configure and dynamically update a set of IP addresses or subnets from which registration requests are allowed by the listener.">Restricted Service Registration in Oracle RAC</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4" title="Oracle RAC databases generally have two or more database instances that each contain memory structures and background processes.">About Oracle RAC Software Components</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42">About Oracle RAC Background Processes</a></p>
                     </li>
                  </ul>
               </div><a id="RACAD7272"></a><div class="sect3"><a id="GUID-3D97ED57-338F-465F-8CC9-A2DFB14A00E4" name="GUID-3D97ED57-338F-465F-8CC9-A2DFB14A00E4"></a><h4 id="RACAD-GUID-3D97ED57-338F-465F-8CC9-A2DFB14A00E4" class="sect4">Understanding Cluster-Aware Storage Solutions</h4>
                  <div>
                     <p>An Oracle RAC database is a <a id="d6446e3181" class="indexterm-anchor"></a><a href="glossary.html#GUID-7F14B19A-BECA-4CCF-BDD0-21A6A4449B96"><span class="xrefglossterm">shared everything</span></a> database. All data files, control files, SPFILEs, and redo log files in Oracle RAC environments must reside on cluster-aware shared disks, so that all of the cluster database instances can access these storage components. Because Oracle RAC databases use a shared everything architecture, Oracle RAC requires cluster-aware storage for all database files.
                     </p>
                     <p>In Oracle RAC, the Oracle Database software manages disk access and is certified for use on a variety of storage architectures. It is your choice how to configure your storage, but you must use a supported cluster-aware storage solution. Oracle Database provides the following storage options for Oracle RAC:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a id="d6446e3192" class="indexterm-anchor"></a>Oracle Automatic Storage Management (Oracle ASM)
                           </p>
                           <p>Oracle recommends this solution to manage your storage.</p>
                        </li>
                        <li>
                           <p>A certified cluster file system</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle recommends <a id="d6446e3208" class="indexterm-anchor"></a><a id="d6446e3214" class="indexterm-anchor"></a>Oracle Automatic Storage Management Cluster File System (Oracle ACFS).
                                 </p>
                              </li>
                              <li>
                                 <p>A third-party cluster file system on a cluster-aware <a id="d6446e3220" class="indexterm-anchor"></a>volume manager that is certified for Oracle RAC. For example:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><a id="d6446e3230" class="indexterm-anchor"></a>Oracle OCFS2 (Linux, only)
                                       </p>
                                    </li>
                                    <li>
                                       <p><a id="d6446e3239" class="indexterm-anchor"></a>IBM GPFS (IBM AIX, only)
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Certified <a id="d6446e3249" class="indexterm-anchor"></a>network file system (NFS) solution
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RACAD7273"></a><div class="sect3"><a id="GUID-504A615B-C63C-43C4-A481-520DEC015EF1" name="GUID-504A615B-C63C-43C4-A481-520DEC015EF1"></a><h4 id="RACAD-GUID-504A615B-C63C-43C4-A481-520DEC015EF1" class="sect4">Oracle RAC and Network Connectivity</h4>
                  <div>
                     <p>All nodes in an Oracle RAC environment must connect to at least one Local Area Network (LAN) (commonly referred to as the <span class="italic">public network</span>) to enable users and applications to access the database.
                     </p>
                     <p>In addition to the public network, Oracle RAC requires private network connectivity used exclusively for communication between the <a href="glossary.html#GUID-DAAF0CE2-6E9E-4DF8-9971-0A0377BEE1E8"><span class="xrefglossterm">node</span></a>s and database instances running on those nodes. This network is commonly referred to as the <span class="italic">interconnect</span>.
                     </p>
                     <p>The interconnect network is a private network that connects all of the servers in the cluster. The interconnect network must use at least one switch and a Gigabit Ethernet adapter.</p>
                     <div class="infoboxnote" id="GUID-504A615B-C63C-43C4-A481-520DEC015EF1__GUID-95CAEF77-CA33-4297-AFF0-F77A5BB31F7D">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Oracle supports interfaces with higher bandwidth but <span class="italic">does not</span> support using crossover cables with the interconnect.
                              </p>
                           </li>
                           <li>
                              <p>Do not use the interconnect (the private network) for user communication, because <a href="glossary.html#GUID-178C264E-12FF-468C-89B5-99CD47A4B373"><span class="xrefglossterm">Cache Fusion</span></a> uses the interconnect for interinstance communication.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>You can configure Oracle RAC to use either the User Datagram Protocol (UDP) or Reliable Data Socket (RDS) protocols for inter-instance communication on the interconnect. Oracle Clusterware uses the same interconnect using the UDP protocol, but cannot be configured to use RDS.</p>
                     <p>An additional network connectivity is required when using <a href="glossary.html#GUID-9A54D98E-C943-43F6-9D49-3FBE35142F0B"><span class="xrefglossterm">Network Attached Storage (NAS)</span></a>. Network attached storage can be typical NAS devices, such as NFS filers, or can be storage that is connected using Fibre Channel over IP, for example. This additional network communication channel should be independent of the other communication channels used by Oracle RAC (the public and private network communication). If the storage network communication must be converged with one of the other network communication channels, then you must ensure that storage-related communication gets first priority.
                     </p>
                  </div>
               </div><a id="RACAD8899"></a><div class="sect3"><a id="GUID-F859B8B3-16B2-49CC-B41E-39A328F8027B" name="GUID-F859B8B3-16B2-49CC-B41E-39A328F8027B"></a><h4 id="RACAD-GUID-F859B8B3-16B2-49CC-B41E-39A328F8027B" class="sect4">Overview of Using Dynamic Database Services to Connect to Oracle Databases</h4>
                  <div>
                     <p>Applications should use the Dynamic Database Services feature to connect to an Oracle database over the public network.</p>
                     <p>Dynamic Database Services enable you to define rules and characteristics to control how users and applications connect to database instances. These characteristics include a unique name, workload balancing and failover options, and high availability characteristics.</p>
                     <p>Users can access an Oracle RAC database using a client/server configuration or through one or more middle tiers, with or without connection pooling. By default, a user connection to an Oracle RAC database is established using the TCP/IP protocol but Oracle supports other protocols. Oracle RAC database instances must be accessed through the SCAN for the cluster.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="introduction-to-oracle-rac.html#GUID-75EE86C1-E690-4624-BA83-DFB83234156C" title="Services represent groups of applications with common attributes, service level thresholds, and priorities.">Overview of Automatic Workload Management with Dynamic Database Services</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD8950"></a><div class="sect3"><a id="GUID-6C72F02D-BB43-4C56-9F46-244C8D6BB670" name="GUID-6C72F02D-BB43-4C56-9F46-244C8D6BB670"></a><h4 id="RACAD-GUID-6C72F02D-BB43-4C56-9F46-244C8D6BB670" class="sect4">Overview of Virtual IP Addresses</h4>
                  <div>
                     <p>Oracle Clusterware hosts node virtual IP (VIP) addresses on the public network. <a id="d6446e3751" class="indexterm-anchor"></a><a id="d6446e3753" class="indexterm-anchor"></a>Node VIPs are VIP addresses that clients use to connect to an Oracle RAC database. A typical connect attempt from a database client to an Oracle RAC database instance can be summarized, as follows:
                     </p>
                     <ol>
                        <li>
                           <p>The database client connects to SCAN (which includes a SCAN VIP on a public network), providing the SCAN listener with a valid service name.</p>
                        </li>
                        <li>
                           <p>The SCAN listener then determines which database instance hosts this service and routes the client to the local or node listener on the respective node.</p>
                        </li>
                        <li>
                           <p>The node listener, listening on a node VIP and a given port, retrieves the connection request and connects the client to the an instance on the local node.</p>
                        </li>
                     </ol>
                     <p>If multiple public networks are used on the cluster to support client connectivity through multiple subnets, then the preceding operation is performed within a given subnet.</p>
                     <p>If a <a id="d6446e3772" class="indexterm-anchor"></a>node fails, then the VIP address fails over to another node on which the VIP address can accept TCP connections, but it does not accept connections to the Oracle database. Clients that attempt to connect to a VIP address not residing on its home node receive a <span class="italic">rapid connection refused</span> error instead of waiting for TCP connect timeout messages. When the network on which the VIP is configured comes back online, Oracle Clusterware fails back the VIP to its home node, where connections are accepted. Generally, VIP addresses fail over when:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The node on which a VIP address runs fails</p>
                        </li>
                        <li>
                           <p>All interfaces for the VIP address fail</p>
                        </li>
                        <li>
                           <p>All interfaces for the VIP address are disconnected from the network</p>
                        </li>
                     </ul>
                     <p>Oracle RAC 12<span class="italic">c</span> supports <a id="d6446e3795" class="indexterm-anchor"></a><a id="d6446e3797" class="indexterm-anchor"></a>multiple public networks to enable access to the cluster through different subnets. Each network resource represents its own <a id="d6446e3800" class="indexterm-anchor"></a>subnet and each database service uses a particular network to access the Oracle RAC database. Each network resource is a resource managed by Oracle Clusterware, which enables the VIP behavior previously described.
                     </p>
                     <p>SCAN is a single network name defined either in your organization's Domain Name Server (DNS) or in the Grid Naming Service (GNS) that round robins to three IP addresses. Oracle recommends that all connections to the Oracle RAC database use the SCAN in their client connection string. Incoming connections are load balanced across the active instances providing the requested service through the three SCAN listeners. With SCAN, you do not have to change the client connection even if the configuration of the cluster changes (nodes added or removed). Unlike in previous releases, SCAN in Oracle RAC 12<span class="italic">c</span> fully supports multiple subnets, which means you can create one SCAN for each subnet in which you want the cluster to operate.
                     </p>
                  </div>
               </div><a id="RACAD8900"></a><div class="sect3"><a id="GUID-AEC7612B-4C10-40F2-A0DC-F5E308A948E8" name="GUID-AEC7612B-4C10-40F2-A0DC-F5E308A948E8"></a><h4 id="RACAD-GUID-AEC7612B-4C10-40F2-A0DC-F5E308A948E8" class="sect4">Restricted Service Registration in Oracle RAC</h4>
                  <div>
                     <p>The valid node checking feature provides the ability to configure and dynamically update a set of IP addresses or subnets from which registration requests are allowed by the listener.</p>
                     <p>Database instance registration with a listener succeeds only when the request originates from a valid node. The network administrator can specify a list of valid nodes, excluded nodes, or disable valid node checking. The list of valid nodes explicitly lists the nodes and subnets that can register with the database. The list of excluded nodes explicitly lists the nodes that cannot register with the database. The control of dynamic registration results in increased manageability and security of Oracle RAC deployments.</p>
                     <p>By default, valid node checking for registration (VNCR) is enabled. In the default configuration, registration requests from all nodes within the subnet of the SCAN listener can register with the listener. Non-SCAN listeners only accept registration from instances on the local node. Remote nodes or nodes outside the subnet of the SCAN listener must be included on the list of valid nodes by using the <code class="codeph">registration_invited_nodes_<span class="variable" translate="no">alias</span></code> parameter in the <code class="codeph">listener.ora</code> file or by modifying the SCAN listener using SRVCTL.
                     </p>
                  </div>
               </div><a id="RACAD7274"></a><div class="sect3"><a id="GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4" name="GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4"></a><h4 id="RACAD-GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4" class="sect4">About Oracle RAC Software Components</h4>
                  <div>
                     <p>Oracle RAC databases generally have two or more database instances that each contain memory structures and background processes.</p>
                     <p>An Oracle RAC database has the same processes and memory structures as a noncluster Oracle database and additional processes and memory structures that are specific to Oracle RAC. Any one instance's database view is nearly identical to any other instance's view in the same Oracle RAC database; the view is a single system image of the environment. </p>
                     <p>Each instance has a buffer cache in its System Global Area (SGA). Using Cache Fusion, Oracle RAC environments logically combine each instance's buffer cache to enable the instances to process data as if the data resided on a logically combined, single cache.</p>
                     <div class="infoboxnote" id="GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4__GUID-4B9257B8-4269-42B8-8101-73EC793721B2">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The In-Memory Transaction Manager integrates with the Cache Fusion protocol.</p>
                           </li>
                           <li>
                              <p>The SGA size requirements for Oracle RAC are greater than the SGA requirements for noncluster Oracle databases due to Cache Fusion.</p>
                           </li>
                        </ul>
                     </div>
                     <p>To ensure that each Oracle RAC database instance obtains the block that it requires to satisfy a query or transaction, Oracle RAC instances use two processes, the Global Cache Service (GCS) and the Global Enqueue Service (GES). The GCS and GES maintain records of the statuses of each data file and each cached block using a Global Resource Directory (GRD). The GRD contents are distributed across all of the active instances, which effectively increases the size of the SGA for an Oracle RAC instance.</p>
                     <p>After one instance caches data, any other instance within the same cluster database can acquire a block image from another instance in the same database faster than by reading the block from disk. Therefore, Cache Fusion moves current blocks between instances rather than re-reading the blocks from disk. When a consistent block is needed or a changed block is required on another instance, Cache Fusion transfers the block image directly between the affected instances. Oracle RAC uses the private interconnect for interinstance communication and block transfers. The GES Monitor and the Instance Enqueue Process manage access to Cache Fusion resources and enqueue recovery processing.\</p>
                     <p>Cache Fusion monitors the latency on the private networks and the service time on the disks, and automatically chooses the best path. If shared disks include low latency SSDs, then Oracle automatically chooses the best path.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../inmem/concepts-for-the-im-column-store.html#INMEM-GUID-5A72B48A-8427-41AE-9220-E46042BC90C4" target="_blank"><span><cite>Oracle Database In-Memory Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7275"></a><div class="sect3"><a id="GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42" name="GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42"></a><h4 id="RACAD-GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42" class="sect4">About Oracle RAC Background Processes</h4>
                  <div>
                     <p>The GCS and GES processes, and the GRD collaborate to enable Cache Fusion. The Oracle RAC processes and their identifiers are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">ACMS</code>: Atomic Controlfile to Memory Service (<code class="codeph">ACMS</code>)
                           </p>
                           <p>In an Oracle RAC environment, the <code class="codeph">ACMS</code> per-instance process is an agent that contributes to ensuring a distributed SGA memory update is either globally committed on success or globally aborted if a failure occurs.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GTX0-j</code>: Global Transaction Process
                           </p>
                           <p>The <code class="codeph">GTX0-j</code> process provides transparent support for XA global transactions in an Oracle RAC environment. The database autotunes the number of these processes based on the workload of XA global transactions.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LMON</code>: Global Enqueue Service Monitor
                           </p>
                           <p>The <code class="codeph">LMON</code> process monitors global enqueues and resources across the cluster and performs global enqueue recovery operations.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LMD</code>: Global Enqueue Service Daemon
                           </p>
                           <p>The <code class="codeph">LMD</code> process manages incoming remote resource requests within each instance.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LMS</code>: Global Cache Service Process
                           </p>
                           <p>The <code class="codeph">LMS</code> process maintains records of the data file statuses and each cached block by recording information in a Global Resource Directory (GRD). The <code class="codeph">LMS</code> process also controls the flow of messages to remote instances and manages global data block access and transmits block images between the buffer caches of different instances. This processing is part of the Cache Fusion feature.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LCK0</code>: Instance Enqueue Process
                           </p>
                           <p>The <code class="codeph">LCK0</code> process manages non-Cache Fusion resource requests such as library and row cache requests.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">RMS<span class="variable" translate="no">n</span></code>: Oracle RAC Management Processes (<code class="codeph">RMS<span class="variable" translate="no">n</span></code>)
                           </p>
                           <p>The <code class="codeph">RMS<span class="variable" translate="no">n</span></code> processes perform manageability tasks for Oracle RAC. Tasks accomplished by an <code class="codeph">RMS<span class="variable" translate="no">n</span></code> process include creation of resources related to Oracle RAC when new instances are added to the clusters.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">RSMN</code>: Remote Slave Monitor manages background slave process creation and communication on remote instances. These background slave processes perform tasks on behalf of a coordinating process running in another instance.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42__GUID-2D5A372E-B03E-48CE-A228-B041E24364F6">
                        <p class="notep1">Note:</p>
                        <p>Many of the Oracle Database components that this section describes are in addition to the components that are described for noncluster Oracle databases in <span><cite>Oracle Database Concepts</cite></span>.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../cncpt/introduction-to-oracle-database.html#CNCPT-GUID-A42A6EF0-20F8-4F4B-AFF7-09C100AE581E" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD8888"></a><a id="RACAD7276"></a><div class="sect2"><a id="GUID-75EE86C1-E690-4624-BA83-DFB83234156C" name="GUID-75EE86C1-E690-4624-BA83-DFB83234156C"></a><h3 id="RACAD-GUID-75EE86C1-E690-4624-BA83-DFB83234156C" class="sect3">Overview of Automatic Workload Management with Dynamic Database Services</h3>
               <div>
                  <p>Services represent groups of applications with common attributes, service level thresholds, and priorities.</p>
                  <p>Application functions can be divided into workloads identified by services. For example, Oracle E-Business Suite can define a service for each responsibility, such as general ledger, accounts receivable, order entry, and so on. A service can span one or more instances of an Oracle database, multiple databases in a global cluster, and a single instance can support multiple services. The number of instances that are serving the service is transparent to the application. Services provide a single system image to manage competing applications, and allow each workload to be managed as a unit.</p>
                  <p>Middle tier applications and clients select a service by specifying the service name as part of the connection in the TNS connect string. For example, data sources for Oracle WebLogic Server are set to route to a service. Using Net Easy*Connection, this connection comprises simply the service name and network address, as follows: <code class="codeph"><span class="variable" translate="no">user_name</span>/<span class="variable" translate="no">password</span>@SCAN/<span class="variable" translate="no">service_name</span></code>. Server-side work such as Oracle Scheduler, Parallel Query, and Oracle GoldenGate queues set the service name as part of the workload definition. For Oracle Scheduler, jobs are assigned to job classes and job classes execute within services. For Parallel Query and Parallel DML, the query coordinator connects to a service and the parallel query slaves inherit the service for the duration of the parallel execution. For Oracle GoldenGate, streams queues are accessed using services. Work executing under a service inherits the thresholds and attributes for the service and is measured as part of the service.
                  </p>
                  <p>Oracle Database Resource Manager binds services to consumer groups and priorities. This allows the database to manage the services in the order of their importance. For example, the DBA can define separate services for high priority online users and lower priority internal reporting applications. Likewise, the DBA can define Gold, Silver and Bronze services to prioritize the order in which requests are serviced for the same application. When planning the services for a system, the plan should include the priority of each service relative to the other services. In this way, Oracle Database Resource Manager can satisfy the priority-one services first, followed by the priority-two services, and so on.</p>
                  <p>When users or applications connect to a database, Oracle recommends that you use a service specified in the <code class="codeph">CONNECT_DATA</code> portion of the connect string. Oracle Database automatically creates one database service when the database is created but the behavior of this service is different from that of database services that you subsequently create. To enable more flexibility in the management of a workload using the database, Oracle Database enables you to create multiple services and specify on which instances (or in which server pools) the services start. If you are interested in greater workload management flexibility, then continue reading this chapter to understand the added features that you can use with services.
                  </p>
                  <div class="infoboxnote" id="GUID-75EE86C1-E690-4624-BA83-DFB83234156C__GUID-895C4868-AE1A-4310-8995-3FB77F3806F5">
                     <p class="notep1">Note:</p>
                     <p>The features discussed in this chapter do not work with the following default database services: <code class="codeph">DB_NAME</code>, <code class="codeph">DB_UNIQUE_NAME</code>, <code class="codeph">PDB_NAME</code>, <code class="codeph">SYS$BACKGROUND</code>, and <code class="codeph">SYS$USERS</code>. Oracle strongly recommends that you do not use these services for applications to connect to the database. You must create cluster managed services to take advantage of these features. You can only manage the services that you create. Any service that the database create automatically is managed by the database server.
                     </p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-75EE86C1-E690-4624-BA83-DFB83234156C__GUID-BC45815E-C493-4E0F-A372-3D98A398ACEF">Dynamic Database Services</p>
                  </div>
                  <!-- class="section" -->
                  <p>Dynamic database services enable you to manage workload distributions to provide optimal performance for users and applications. Dynamic database services offer the following features:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold">Services</span>: Oracle Database provides a powerful automatic workload management facility, called services, to enable the enterprise grid vision. Services are entities that you can define in Oracle RAC databases that enable you to group database workloads, route work to the optimal instances that are assigned to offer the service, and achieve high availability for planned and unplanned actions.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">High Availability Framework</span>: An Oracle RAC component that enables Oracle Database to always maintain components in a running state.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Fast Application Notification (FAN)</span>: Provides information to Oracle RAC applications and clients about cluster state changes and Load Balancing Advisory events, such as <code class="codeph">UP</code> and <code class="codeph">DOWN</code> events for instances, services, or nodes. FAN has two methods for publishing events to clients, the Oracle Notification Service daemon, which is used by Java Database Connectivity (JDBC) clients including the Oracle Application Server, and Oracle GoldenGate Advanced Queueing, which is only used by previous releases of Oracle Call Interface (OCI) and Oracle Data Provider for .NET (ODP.NET) clients.
                        </p>
                        <div class="infoboxnote" id="GUID-75EE86C1-E690-4624-BA83-DFB83234156C__GUID-B92CBA9A-DE29-406C-956F-1D167E1DDC18">
                           <p class="notep1">Note:</p>
                           <p>All clients beginning with Oracle Database 12<span class="italic">c</span> release 2 (12.2) use Oracle Notification Service.
                           </p>
                        </div>
                     </li>
                     <li>
                        <p><span class="bold">Transaction Guard</span>: A tool that provides a protocol and an API for at-most-once execution of transactions in case of unplanned outages and duplicate submissions.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Application Continuity</span>: Provides a general purpose infrastructure that replays the in-flight request when a recoverable error is received, masking many system, communication, and storage outages, and hardware failures. Unlike existing recovery technologies, this feature attempts to recover the transactional and non-transactional session states beneath the application, so that the outage appears to the application as a delayed execution.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Connection Load Balancing</span>: A feature of Oracle Net Services that balances incoming connections across all of the instances that provide the requested database service.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Load Balancing Advisory</span>: Provides information to applications about the current service levels that the database and its instances are providing. The load balancing advisory makes recommendations to applications about where to direct application requests to obtain the best service based on the management policy that you have defined for that service. Load balancing advisory events are published through Oracle Notification Service.
                        </p>
                     </li>
                     <li>
                        <p> <span class="bold">Automatic Workload Repository (AWR)</span>: Tracks service-level statistics as <a href="glossary.html#GUID-3C591280-F8D5-4979-8134-152C2DF66F2F"><span class="xrefglossterm">metric</span></a>s. Server generated alerts can be created for these metrics when they exceed or fail to meet certain thresholds. 
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Fast Connection Failover (FCF)</span>: This is the ability of Oracle Clients to provide rapid failover of connections by subscribing to FAN events. 
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Runtime Connection Load Balancing</span>: This is the ability of Oracle Clients to provide intelligent allocations of connections in the connection pool based on the current service level provided by the database instances when applications request a connection to complete some work.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Single Client Access Name (SCAN)</span>: Provides a single name to the clients connecting to Oracle RAC that does not change throughout the life of the cluster, even if you add or remove nodes from the cluster. Clients connecting with SCAN can use a simple connection string, such as a thin JDBC URL or EZConnect, and still achieve the load balancing and client connection failover.
                        </p>
                     </li>
                  </ul>
                  <p>You can deploy Oracle RAC and noncluster Oracle database environments to use dynamic database service features in many different ways. Depending on the number of nodes and your environment's complexity and objectives, your choices for optimal automatic workload management and high-availability configuration depend on several considerations that are described in this chapter.</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a></li>
                        <li><a href="workload-management-with-dynamic-database-services.html#GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5" title="Workload management includes load balancing, enabling clients for Oracle Real Application Clusters (Oracle RAC), distributed transaction processing, and services.">Workload Management with Dynamic Database Services</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD8889"></a><div class="sect2"><a id="GUID-7D01967A-2E0F-4228-82CE-428D7B65F961" name="GUID-7D01967A-2E0F-4228-82CE-428D7B65F961"></a><h3 id="RACAD-GUID-7D01967A-2E0F-4228-82CE-428D7B65F961" class="sect3">Overview of Server Pools and Policy-Managed Databases</h3>
               <div>
                  <p>Server pools are the basis for policy-managed databases.</p>
                  <p>You can create Oracle RAC databases, whether multinode or Oracle Real Application Clusters One Node (Oracle RAC One Node), using the following deployment models:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Administrator-managed deployment is based on the Oracle RAC deployment types that existed before Oracle Database 11<span class="italic">g</span> release 2 (11.2) and requires that you statically configure each database instance to run on a specific node in the cluster, and that you configure database services to run on specific instances belonging to a certain database using the <code class="codeph">preferred</code> and <code class="codeph">available</code> designation.
                        </p>
                     </li>
                     <li>
                        <p>Policy-managed deployment is based on <span class="italic">server pools</span>, where database services run within a server pool as <span class="italic">singleton</span> or <span class="italic">uniform</span> across all of the servers in the server pool. Databases are deployed in one or more server pools and the size of the server pools determine the number of database instances in the deployment.
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/racad&amp;id=APQOS-GUID-1466C923-4F4F-4313-8962-D870249A79A7" target="_blank"><span><cite>Oracle Database Quality of Service Management User's Guide</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="RACAD8890"></a><div class="sect3"><a id="GUID-342BDB31-4A5D-473B-8F27-AB5785BBC0A9" name="GUID-342BDB31-4A5D-473B-8F27-AB5785BBC0A9"></a><h4 id="RACAD-GUID-342BDB31-4A5D-473B-8F27-AB5785BBC0A9" class="sect4">Introduction to Server Pools</h4>
                  <div>
                     <p>Server pools logically apportion a cluster into groups of servers offering database or application services.</p>
                     <p>Server pool properties control the scalability and availability of those databases and applications. You can configure each server pool with a minimum and maximum size, which determines scalability. Oracle Clusterware manages availability between server pools, and you can further regulate availability by configuring the importance value of individual server pools.</p>
                     <p>Servers are not assigned to server pools by name but by number. Therefore, you must configure any server to run any database. If you cannot configure servers due to, for example, heterogeneous servers or storage connectivity, then you can restrict servers by using server category definitions to determine server pool membership eligibility.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-B591A9DF-BEB1-4B72-B665-7416BEA27C7A" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div><a id="RACAD8892"></a><a id="RACAD8901"></a><a id="RACAD8893"></a><a id="RACAD8902"></a><a id="RACAD8894"></a><a id="RACAD8903"></a><a id="RACAD8891"></a><div class="sect4"><a id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733" name="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733"></a><h5 id="RACAD-GUID-B1523FC3-DED5-4A91-98D5-789CFE650733" class="sect5">Examples of Using Server Pools</h5>
                     <div>
                        <p>This section includes the following examples of using server pools:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABEJACC">Minimum and Maximum Number of Servers</a></p>
                           </li>
                           <li>
                              <p><a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABIFIIE">IMPORTANCE Attribute of Server Pools</a></p>
                           </li>
                           <li>
                              <p><a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABJGBHE">Consolidation of Databases</a></p>
                           </li>
                        </ul>
                        <div class="section" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABEJACC">
                           <p class="subhead3" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__GUID-8D7D8BD4-3264-4686-B6BF-9DBBD4195213">Minimum and Maximum Number of Servers</p>
                        </div>
                        <!-- class="section" -->
                        <p>Consider a four-node cluster configured into two server pools named <code class="codeph">online</code> and <code class="codeph">backoffice</code>. A database named <code class="codeph">dbsales</code> runs in the <code class="codeph">online</code> server pool offering the <code class="codeph">browse</code>, <code class="codeph">search</code>, and <code class="codeph">salescart</code> services. A database named <code class="codeph">dberp</code> runs in the <code class="codeph">backoffice</code> server pool and offers the <code class="codeph">inventory</code> and <code class="codeph">shipping</code> services, as shown in <a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CHDEBFHG">Figure 1-2</a>. During normal business hours the enterprise requires a minimum of two instances of the <code class="codeph">dbsales</code> database and one instance of the <code class="codeph">dberp</code> database to meet normal demand.
                        </p>
                        <div class="figure" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CHDEBFHG">
                           <p class="titleinfigure">Figure 1-2 Server Placement by Minimum and Maximum Limits</p><img src="img/racad_vm_039.png" width="573" alt="Description of Figure 1-2 follows" title="Description of Figure 1-2 follows" longdesc="img_text/racad_vm_039.html"><br><a href="img_text/racad_vm_039.html">Description of "Figure 1-2 Server Placement by Minimum and Maximum Limits"</a></div>
                        <!-- class="figure" -->
                        <p>In this policy-managed deployment, the value of the <code class="codeph">MIN_SIZE</code> server pool attribute for the <code class="codeph">online</code> server pool is 2, while the value of the <code class="codeph">MIN_SIZE</code> server pool attribute for the <code class="codeph">backoffice</code> server pool is 1. Configured this way, Oracle Clusterware ensures that there are always two servers in the <code class="codeph">online</code> server pool and one server in the <code class="codeph">backoffice</code> server pool. Because this is a four-node cluster, there is one server left not assigned to either server pool. Where that last server gets deployed is determined by the <code class="codeph">MAX_SIZE</code> server pool parameter of each server pool. If the sum of the values of the <code class="codeph">MAX_SIZE</code> server pool attribute for each server pool is less than the total number of servers in the cluster, then the remaining servers stay in the Free server pool awaiting a failure of a deployed node.
                        </p>
                        <p>If the value of <code class="codeph">MAX_SIZE</code> is greater than that of <code class="codeph">MIN_SIZE</code>, then the remaining server will be deployed into the server pool whose importance value is greatest, as shown in <a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CHDEBFHG">Figure 1-2</a>, and fully discussed in the next section. In this case, the server is a shareable resource that can be relocated online to join the server pool where it is required. For example, during business hours the server could be given to the <code class="codeph">online</code> server pool to add an instance of the <code class="codeph">dbsales</code> database but after hours could be relocated to the <code class="codeph">backoffice</code> server pool, adding a <code class="codeph">dberp</code> database instance. All such movements are online and instances are shut down, transactionally.
                        </p>
                        <p>These two policy-managed databases are running only the instances that are required and they can be dynamically increased or decreased to meet demand or business requirements.</p>
                        <div class="section" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABIFIIE">
                           <p class="subhead3" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__GUID-B4421E08-80C3-4082-B1A1-7FF2ED95BA6A">IMPORTANCE Attribute of Server Pools</p>
                        </div>
                        <!-- class="section" -->
                        <p>The <code class="codeph">IMPORTANCE</code> server pool attribute is used at cluster startup and in response to a node failure or eviction. In contrast to administrator-managed databases, you can configure server pools with different importance levels to determine which databases are started first and which databases remain online in case there is a multinode outage.
                        </p>
                        <p>Consider a four-node cluster that hosts a database named <code class="codeph">dbapps</code> in two server pools, <code class="codeph">sales</code> and <code class="codeph">backoffice</code>. Two services, <code class="codeph">orderentry</code> and <code class="codeph">billing</code>, run in the <code class="codeph">sales</code> server pool, while two other services, <code class="codeph">erp</code> and <code class="codeph">reports</code>, run in the <code class="codeph">backoffice</code> server pool, as shown in <a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__SERVERPOOLIMPORTANCE-4980C05C">Figure 1-3</a>. By configuring the value of the <code class="codeph">IMPORTANCE</code> server pool attribute of the <code class="codeph">sales</code> server pool higher than that of the <code class="codeph">backoffice</code> server pool, the services in <code class="codeph">sales</code> start first when the cluster starts and are always available, even if there is only one server left running after a multinode failure. The <code class="codeph">IMPORTANCE</code> server pool attribute enables you to rank services and also eliminates the requirement to run a service on all nodes in a cluster to ensure that it is always available.
                        </p>
                        <div class="figure" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__SERVERPOOLIMPORTANCE-4980C05C">
                           <p class="titleinfigure">Figure 1-3 Server Pool Importance</p><img src="img/racad_vm_038.png" width="573" alt="Description of Figure 1-3 follows" title="Description of Figure 1-3 follows" longdesc="img_text/racad_vm_038.html"><br><a href="img_text/racad_vm_038.html">Description of "Figure 1-3 Server Pool Importance"</a></div>
                        <!-- class="figure" -->
                        <div class="section" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABJGBHE">
                           <p class="subhead3" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__GUID-D3A7AA34-E595-4626-97C7-F2E7845F05B7">Consolidation of Databases</p>
                        </div>
                        <!-- class="section" -->
                        <p>You can use several different approaches, either discretely or combined, to consolidate Oracle databases. Policy-managed deployments facilitate consolidation. In the case of schema consolidation, where multiple applications are being hosted in a single database separated into discrete schemas or pluggable databases (PDBs), you can use server pools to meet required capacity. Because of the dynamic scaling property of server pools, you can increase or decrease the number of database instances to meet current demand or business requirements. Since server pools also determine which services run together or separately, you can configure and maintain required affinity or isolation.</p>
                        <p>When it is not possible to use schema consolidation because of, for example, version requirements, you can host multiple databases on a single set of servers. Using policy-managed databases facilitates this database consolidation because they can share the same server pool by making use of <a href="glossary.html#GUID-EA9BDE17-264E-4375-8F98-1B4184A03648"><span class="xrefglossterm">instance caging</span></a>, which enables you to dynamically increase or decrease databases, both horizontally (using server pool size) and vertically (using the <code class="codeph">CPU_COUNT</code> server configuration attribute) to meet demand or business policies and schedules.
                        </p>
                        <p>By contrast, with administrator-managed databases, you are required to reserve capacity on each server to absorb workload failing over should a database instance or server fail. With policy-managed databases, however, you can effectively rank server pools by the business necessity of the workloads that they are running using the <code class="codeph">MIN_SIZE</code>, <code class="codeph">MAX_SIZE</code>, and <code class="codeph">IMPORTANCE</code> server pool attributes.
                        </p>
                        <p>When the failure of a server brings a server pool to below its configured minimum number of servers, another server will move from a less important server pool to take its place and bring the number of servers back up to the configured minimum. This eliminates the risk of cascade failures due to overloading the remaining servers and enables you to significantly reduce or even eliminate the need to reserve capacity for handling failures.</p>
                        <p>Migrating or converting to policy-managed databases also enables cluster consolidation and creates larger clusters that have greater availability and scalability because of the increased number of servers available to host and scale databases. Because policy-managed databases do not require binding their instance names to a particular server and binding services to particular instances, the complexity of configuring and managing large clusters is greatly reduced.</p>
                        <p>An example deployment is shown in <a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CONSOLIDATINGDATABASES-49815171">Figure 1-4</a> where the previous two cluster examples (shown in <a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CHDEBFHG">Figure 1-2</a> and <a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__SERVERPOOLIMPORTANCE-4980C05C">Figure 1-3</a>) are consolidated into a single cluster, making use of both database consolidation (using instance caging) and cluster consolidation (using server pools) configured so that workloads are properly sized and prioritized.
                        </p>
                        <div class="figure" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CONSOLIDATINGDATABASES-49815171">
                           <p class="titleinfigure">Figure 1-4 Consolidating Databases</p><img src="img/racad_vm_037.png" width="573" alt="Description of Figure 1-4 follows" title="Description of Figure 1-4 follows" longdesc="img_text/racad_vm_037.html"><br><a href="img_text/racad_vm_037.html">Description of "Figure 1-4 Consolidating Databases"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-E5103867-6683-4D5C-9343-1F1F2522FEF3" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="RACAD8895"></a><div class="sect3"><a id="GUID-0D6E4EC3-7D75-45DB-97D8-372B2FD010D3" name="GUID-0D6E4EC3-7D75-45DB-97D8-372B2FD010D3"></a><h4 id="RACAD-GUID-0D6E4EC3-7D75-45DB-97D8-372B2FD010D3" class="sect4">Deploying Policy-Managed Databases</h4>
                  <div>
                     <p>When you deploy a policy-managed database you must first determine the services and their required sizing, taking into account that services cannot span server pools.</p>
                     <p>If you are going to collocate this database with other databases, then you should factor in its CPU requirements relative to the other hosted databases, and also factor in the value of its <code class="codeph">CPU_COUNT</code> attribute for instance caging, so that you can size the database both vertically and horizontally in one or more server pools.
                     </p>
                     <p>If you are going to collocate the server pools for this database with other server pools, then consider configuring the server pools to adjust the server pool sizes on a calendar or event basis to optimize meeting demand and business requirements. Once you have determined the sizes of the server pools, and configured the appropriate values for the <code class="codeph">MIN_SIZE</code> and <code class="codeph">MAX_SIZE</code> server pool attributes, you can then determine the relative importance of each server pool.
                     </p>
                     <p>You, as the cluster administrator, create policy-managed database server pools using the <code class="codeph">srvctl add serverpool</code> command. You can modify the properties of the server pool using the <code class="codeph">srvctl modify serverpool</code> command in the Oracle Grid Infrastructure home.
                     </p>
                     <p>While it is possible to create a server pool using DBCA, Oracle recommends this only for small, single server pool deployments, because DBCA will fail if servers are already allocated to other server pools. Additionally, if the cluster is made up of servers with different capacities, such as old and new servers, Oracle recommends that you set up server category definitions defining the minimum server requirements for a server to join each server pool.</p>
                     <p>After you create the server pools, you can run DBCA from the appropriate database home. Depending on the database type and task, you will be presented with different default options. For all new Oracle RAC and Oracle RAC One Node databases, including container databases (CDBs), the Policy-Managed option is the default and the option that Oracle recommends.</p>
                     <p>If you are upgrading your database from an administrator-managed database or a database earlier than Oracle Database 11<span class="italic">g</span> release 2 (11.2), then you will not have the option to directly upgrade to a policy-managed database. After you upgrade, however, you can convert the database to policy managed using the <code class="codeph">srvctl modify database</code> command.
                     </p>
                     <p>When you convert from an administrator-managed database to a policy-managed database, the instance names are automatically updated to include the underscore (for example: <code class="codeph">orcl1</code> becomes <code class="codeph">orcl_1</code>). The underscore is required so that the database can automatically create instances when a server pool grows in size.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-E5103867-6683-4D5C-9343-1F1F2522FEF3" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-F936D4CA-C277-4F22-A701-5DC28B6C5D49" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                           <li><a href="administering-database-instances-and-cluster-databases.html#GUID-1423B27A-3FD5-4B5F-AD29-029A799E28FF" title="You can convert an administrator-managed database to a policy-managed database.">Converting an Administrator-Managed Database to a Policy-Managed Database</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD8904"></a><div class="sect3"><a id="GUID-977D2FC5-8D6D-4CE5-AE51-C216CF81F477" name="GUID-977D2FC5-8D6D-4CE5-AE51-C216CF81F477"></a><h4 id="RACAD-GUID-977D2FC5-8D6D-4CE5-AE51-C216CF81F477" class="sect4">Managing Policy-Managed Databases</h4>
                  <div>
                     <p>Managing a policy-managed database requires less configuration and reconfiguration steps than an administrator-managed one with respect to creation, sizing, patching, and load balancing.</p>
                     <p>Also, because any server in the server pools within the cluster can run any of the databases, you do not have to create and maintain database instance-to-node-name mappings. If, however, you want a database to use a specific instance name whenever it runs on a particular node, then you can create instance-to-node-name mappings using the <code class="codeph">srvctl modify instance -db <span class="variable" translate="no">db_unique_name</span> -instance <span class="variable" translate="no">inst_name</span> -node <span class="variable" translate="no">node_name</span></code> command. This can be useful when scripts on a particular node connect to the database using a fixed <code class="codeph">ORACLE_SID</code> value.
                     </p>
                     <p>You can perform maintenance tasks such as patching by relocating servers into the Free pool or by adjusting the server pool minimum and maximum sizes, thereby retaining required availability.</p>
                     <p>Policy-managed databases also facilitate the management of services, because they are assigned to a single server pool and run as singletons or uniform across all servers in the pool. You no longer have to create or maintain explicit preferred and available database instance lists for each service. If a server moves into a server pool because of manual relocation or a high availability event, all uniform services and their dependent database instances are automatically started. If a server hosting one or more singleton services goes down, those services will automatically be started on one or more of the remaining servers in the server pool. In the case of Oracle RAC One Node, the corresponding database instance will also be started automatically.</p>
                     <p>Managing services relative to each other is improved by making use of the importance attribute of each server pool. Each service running in a server pool inherits the server pool's importance relative to the other server pool-hosted services in the cluster. If the minimum size of the most important server pool is greater than zero, then the services and associated database instances in that server pool are started first on cluster startup and will be the last services and database instances running, as long as there is one server running in the cluster. You can offer services not critical to the business in the least important server pool, ensuring that, should sufficient resources not be available due to demand or failures, those services will eventually be shut down and the more business-critical services remain available.</p>
                     <p>Because many management tasks may involve making changes that can affect multiple databases, services, or server pools in a consolidated environment, you can use the evaluate mode for certain SRVCTL commands to get a report of the resource impact of a command.</p>
                     <p>Consider the following example, that evaluates the effect on the system of modifying a server pool:</p><pre class="pre codeblock"><code><span class="bold">$ srvctl modify srvpool -l 3 -g online -eval</span>

Service erp1 will be stopped on node test3
Service reports will be stopped on node test3
Service inventory will be stopped on node test3
Service shipping will be stopped on node test3
Database dbsales will be started on node test3
Service orderentry will be started on node test3
Service billing will be started on node test3
Service browse will be started on node test3
Service search will be started on node test3
Service salescart will be started on node test3
Server test3 will be moved from pool backoffice to pool online
</code></pre><p>As shown in the preceding example, modifying a server pool can result in many resource state changes. You can use a <span class="italic">policy set</span> through either Oracle Clusterware or Oracle Database Quality of Service Management.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="server-control-utility-reference.html#GUID-E768864F-7362-4A80-AB40-96274F61A19A" title="Modifies a server pool in a cluster.">srvctl modify srvpool</a></li>
                           <li><a href="server-control-utility-reference.html#GUID-03EAA16F-2197-45AF-93A6-DDC7943166BD" title="Relocates servers to a server pool in the cluster.">srvctl relocate server</a></li>
                           <li><a href="server-control-utility-reference.html#GUID-803F603E-8638-4946-84D4-CB24D21C893C" title="SRVCTL is installed on each node in a cluster by default. To use SRVCTL, log in to the operating system of a node and enter the SRVCTL command and its parameters in case-sensitive syntax.">SRVCTL Usage Information</a></li>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-7FBE1007-3BA0-4DE5-A993-358E3423721B" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD8844"></a><div class="sect3"><a id="GUID-41B8D007-0D96-49A0-960F-315940BE436A" name="GUID-41B8D007-0D96-49A0-960F-315940BE436A"></a><h4 id="RACAD-GUID-41B8D007-0D96-49A0-960F-315940BE436A" class="sect4">Policy-Based Cluster Management</h4>
                  <div>
                     <p>Oracle Clusterware supports the management of a cluster configuration policy set as a native Oracle Clusterware feature.</p>
                     <p>A <a href="glossary.html#GUID-8331EB9B-FDBB-4F03-94DC-80220D2942B8"><span class="xrefglossterm">cluster configuration policy</span></a> contains one definition for each server pool that is defined in the system. A cluster configuration policy also specifies resource placement and cluster node availability. A <a href="glossary.html#GUID-748D6AE0-F7E8-4716-9AB7-2AAA8D6AC393"><span class="xrefglossterm">cluster configuration policy set</span></a> defines the names of all of the server pools that are configured in a cluster, and contains one or more configuration policies. 
                     </p>
                     <p>There is always only one configuration policy in effect at any one time. However, administrators typically create several configuration policies to reflect the different business needs and demands based on calendar dates or time of day parameters. For instance, morning hours during business days are typically when most users log in and download their email; email-related workloads are usually light at nighttime and on weekends. In such cases, you can use cluster configuration policies to define the server allocation based on the expected demand. More specifically for this example, a configuration policy that allocates more servers to OLTP workloads is in effect during workday mornings, and another configuration policy allocates more servers to batch workloads on weekends and workday evenings. </p>
                     <p>Using cluster configuration policies can also help manage clusters that comprise servers of different capabilities, such as different computer and memory sizes (heterogeneous). To create management and availability policies for clusters comprised of heterogeneous server types, the cluster administrator can create server categories based on server attributes. These attributes can restrict which servers can be assigned to which server pools. For example, if you have some servers in a cluster that run older hardware, then you can use an attribute to specify that these servers should only be allocated to the server pools that support batch jobs and testing, instead of allocating them to the server pools that are used for online sales or other business-critical applications.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-7FBE1007-3BA0-4DE5-A993-358E3423721B" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01" name="GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01"></a><h3 id="RACAD-GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01" class="sect3">Overview of Oracle Database Quality of Service Management</h3>
               <div>
                  <p>Oracle Database Quality of Service Management (Oracle Database QoS Management) is an automated, policy-based product that monitors the workload requests for an entire system.</p>
                  <p>Oracle Database QoS Management manages the resources that are shared across applications, and adjusts the system configuration to keep the applications running at the performance levels needed by your business. Oracle Database QoS Management responds gracefully to changes in system configuration and demand, thus avoiding additional oscillations in the performance levels of your applications.</p>
                  <p>Oracle Database QoS Management monitors and manages Oracle RAC database workload performance objectives by identifying bottlenecked resources impacting these objectives, and both recommending and taking actions to restore performance. Administrator-managed deployments bind database instances to nodes but policy-managed deployments do not, so the Oracle Database QoS Management server pool size resource control is only available for the latter. All other resource management controls are available for both deployments.</p>
                  <p>Oracle Database QoS Management supports administrator-managed Oracle RAC and Oracle RAC One Node databases with its Measure-Only, Monitor, and Management modes. This enables schema consolidation support within an administrator-managed Oracle RAC database by adjusting the CPU shares of performance classes running in the database. Additionally, database consolidation is supported by adjusting CPU counts for databases hosted on the same physical servers.</p>
                  <p>Because administrator-managed databases do not run in server pools, the ability to expand or shrink the number of instances by changing the server pool size that is supported in policy-managed database deployments is not available for administrator-managed databases. This new deployment support is integrated into the Oracle QoS Management pages in Oracle Enterprise Manager Cloud Control.</p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-249A970C-4650-485E-9E11-EFC70FDF3079" name="GUID-249A970C-4650-485E-9E11-EFC70FDF3079"></a><h3 id="RACAD-GUID-249A970C-4650-485E-9E11-EFC70FDF3079" class="sect3">Overview of Hang Manager</h3>
               <div>
                  <p>Hang Manager is an Oracle Database feature that automatically detects and resolves system hangs.</p>
                  <div class="p">Hang Manager was first available in Oracle Database 11<span class="italic">g</span> release 1 (11.1) and, initially, identified system hangs and then dumped the relevant information about the hang into a trace file. In Oracle Database 12<span class="italic">c</span> release 2 (12.2), Hang Manager can take action on and attempt to resolve the system hang. Hang Manager also runs in both single-instance and Oracle RAC database instances.
                     <div class="infoboxnote" id="GUID-249A970C-4650-485E-9E11-EFC70FDF3079__GUID-BDC2B009-1AC1-4B7F-987A-8E4F8A064916">
                        <p class="notep1">Note:</p>Hang manager does not resolve dead locks, although dead lock detection has been available in Oracle Database for several of the past releases.
                     </div>
                  </div>
                  <p>Hang Manager functions, as follows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>First detects a system hang and then analyzes the hang and verifies the cause of the hang. It then applies heuristics to decide on a course of action to resolve the hang.</p>
                     </li>
                     <li>
                        <p>Automates the tasks that used to require manual steps by a DBA to provide the trace files to My Oracle Support so that someone there could identify the source of the hang, minimizing or eliminating database and application downtime.</p>
                     </li>
                     <li>
                        <p>Periodically scans all processes and analyzes a smaller subset of processes that are holding resources in successive scans. Hang manager ignores processes if there is nothing waiting on the resource.</p>
                     </li>
                     <li>
                        <p>Considers cross-instance hangs, which are hangs where the holder is a database process waiting on a response from an Oracle ASM instance.</p>
                     </li>
                     <li>
                        <p>Is aware of processes running in reader nodes instances, and checks whether any of these processes are blocking progress on Hub Nodes and takes action, if possible.</p>
                     </li>
                     <li>
                        <p>Considers the Oracle Database Quality of Service Management settings of the holder.</p>
                     </li>
                     <li>
                        <p>Terminates the holder process so the next process waiting on that resource can move on and prevent a hang.</p>
                     </li>
                     <li>
                        <p>Notifies a DBA with an ORA-32701 error message in the alert log.</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-249A970C-4650-485E-9E11-EFC70FDF3079__GUID-71C522C1-2E7F-4CDA-B9A6-268BCE93528D">
                     <p class="notep1">See Also:</p><a href="../atnms/hang-manager.html#ATNMS-GUID-6E2043A6-E460-4442-A6F7-088206563D5E" target="_blank"><span><cite>Oracle Autonomous Health Framework User's Guide</cite></span></a></div>
               </div>
            </div><a id="RACAD8961"></a><div class="sect2"><a id="GUID-2FB4477F-8D93-4210-8E17-0FDCAFE9DE33" name="GUID-2FB4477F-8D93-4210-8E17-0FDCAFE9DE33"></a><h3 id="RACAD-GUID-2FB4477F-8D93-4210-8E17-0FDCAFE9DE33" class="sect3">Overview of Oracle Multitenant with Oracle RAC</h3>
               <div>
                  <p>Oracle Multitenant is an option with Oracle Database 12<span class="italic">c</span> that simplifies consolidation, provisioning, upgrades, and more.
                  </p>
                  <p>It is based on an architecture that allows a multitenant container database (CDB) to hold several pluggable databases (PDBs). You can adopt an existing database as a PDB without having to change the application tier. In this architecture, Oracle RAC provides the local high availability that is required when consolidating various business-critical applications on one system.</p>
                  <p>When using PDBs with Oracle RAC, the multitenant CDB is based on Oracle RAC. You can make each PDB available on either every instance of the Oracle RAC CDB or a subset of instances. In either case, access to and management of the PDBs are regulated using dynamic database services, which will also be used by applications to connect to the respective PDB, as they would in a single instance Oracle database using Oracle Net Services for connectivity.</p>
                  <p>You can isolate PDBs to prevent certain operations from being performed on or within a particular PDB that may interfere with other PDBs sharing the same Oracle RAC database or database instance. PDB isolation allows for a higher degree of consolidation using Oracle Multitenant.</p>
                  <p>If you create an Oracle RAC database as a CDB and plug one or more PDBs into the CDB, then, by default, a PDB is not started automatically on any instance of the Oracle RAC CDB. With the first dynamic database service assigned to the PDB (other than the default database service which has the same name as the database name), the PDB is made available on those instances on which the service runs.</p>
                  <p>Whether a PDB is available on more than one instance of an Oracle RAC CDB, the CDB is typically managed by the services running on the PDB. You can manually enable PDB access on each instance of an Oracle RAC CDB by starting the PDB manually on that instance.</p>
               </div>
            </div><a id="RACAD8951"></a><div class="sect2"><a id="GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" name="GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3"></a><h3 id="RACAD-GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" class="sect3">Overview of Database In-Memory and Oracle RAC</h3>
               <div>
                  <p>Every Oracle RAC node has its own In-Memory (IM) column store. By default, populated objects are distributed across all IM column stores in the cluster.</p>
                  <p>Oracle recommends that you size the IM column stores equally on every Oracle RAC node. If an Oracle RAC node does not require an IM column store, then set the <code class="codeph">INMEMORY_SIZE</code> parameter to <code class="codeph">0</code>.
                  </p>
                  <p>It is possible to have completely different objects populated on every node, or to have larger objects distributed across all of the IM column stores in the cluster. On Oracle Engineered Systems, it is also possible for the same objects to appear in the IM column store on every node. The distribution of objects across the IM column stores in a cluster is controlled by two subclauses to the <code class="codeph">INMEMORY</code> attribute: <code class="codeph">DISTRIBUTE</code> and <code class="codeph">DUPLICATE</code>.
                  </p>
                  <p>In an Oracle RAC environment, an object that only has the <code class="codeph">INMEMORY</code> attribute specified is automatically distributed across the IM column stores in the cluster. You can use the <code class="codeph">DISTRIBUTE</code> clause to specify how an object is distributed across the cluster. By default, the type of partitioning used (if any) determines how the object is distributed. If the object is not partitioned, then it is distributed by rowid range. Alternatively, you can specify the <code class="codeph">DISTRIBUTE</code> clause to override the default behavior. 
                  </p>
                  <p>On an Oracle Engineered System, you can duplicate or mirror populated objects across the IM column stores in the cluster. This technique provides the highest level of redundancy. The <code class="codeph">DUPLICATE</code> clause controls how an object is duplicated. If you specify only <code class="codeph">DUPLICATE</code>, then one mirrored copy of the data is distributed across the IM column stores in the cluster. To duplicate the entire object in each IM column store, specify <code class="codeph">DUPLICATE ALL</code>.
                  </p>
                  <div class="infoboxnote" id="GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3__GUID-066A39FB-3D36-4E0C-86EA-91CBF912EB51">
                     <p class="notep1">Note:</p>
                     <p>When you deploy Oracle RAC on a non-Engineered System, the <code class="codeph">DUPLICATE</code> clause is treated as <code class="codeph">NO DUPLICATE</code>.
                     </p>
                  </div>
               </div>
            </div><a id="RACAD7279"></a><div class="sect2"><a id="GUID-74F4FF89-688A-4DE4-9592-1D96E851013C" name="GUID-74F4FF89-688A-4DE4-9592-1D96E851013C"></a><h3 id="RACAD-GUID-74F4FF89-688A-4DE4-9592-1D96E851013C" class="sect3">Overview of Managing Oracle RAC Environments</h3>
               <div>
                  <p>This section describes the following Oracle RAC environment management topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72" title="Any enterprise that is designing and implementing a high availability strategy with Oracle RAC must begin by performing a thorough analysis of the business drivers that require high availability.">About Designing and Deploying Oracle RAC Environments</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-B97D335E-105F-4721-9647-D1A3D485399A" title="You administer a cluster database as a single-system image using the Server Control Utility (SRVCTL), Oracle Enterprise Manager, SQL*Plus, and other utilities.">About Administrative Tools for Oracle RAC Environments</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14" title="Web-based Oracle Enterprise Manager Cloud Control enables you to monitor an Oracle RAC database.">About Monitoring Oracle RAC Environments</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-BE8B9433-C6D9-442A-B83C-B39C0B3CF4D6">About Evaluating Performance in Oracle RAC Environments</a></p>
                     </li>
                  </ul>
               </div><a id="RACAD7280"></a><div class="sect3"><a id="GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72" name="GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72"></a><h4 id="RACAD-GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72" class="sect4">About Designing and Deploying Oracle RAC Environments</h4>
                  <div>
                     <p>Any enterprise that is designing and implementing a high availability strategy with Oracle RAC must begin by performing a thorough analysis of the business drivers that require high availability.</p>
                     <p>An analysis of business requirements for high availability combined with an understanding of the level of investment required to implement different high availability solutions enables the development of a high availability architecture that achieves both business and technical objectives.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="design-and-deployment-techniques.html#GUID-DD273C7C-7F74-4A95-B8E5-E007D36119D2" title="For mission critical systems, you must be able to perform failover and recovery, and your environment must be resilient to all types of failures.A database cloud is a set of databases integrated by the Global Data Services framework into a single virtual server that offers one or more global services, while ensuring high performance, availability and optimal utilization of resources.You can configure and use SSL certificates to set up authentication between the ONS server in the database tier and the notification client in the middle tier.">Design and Deployment Techniques</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72__GUID-66E64B61-4AD6-4978-9523-25451289E32B">
                        <p class="notep1">See Also:</p>
                        <p>For help choosing and implementing the architecture that best fits your availability requirements:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"Design and Deployment Techniques"</span> provides a high-level overview you can use to evaluate the high availability requirements of your business. 
                              </p>
                           </li>
                           <li>
                              <p><span><cite>Oracle Database High Availability Overview</cite></span> describes how to select the most suitable architecture for your organization, describes several high availability architectures, and provides guidelines for choosing the one that best meets your requirements, and also provides information about the Oracle Maximum Availability Architecture
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7281"></a><div class="sect3"><a id="GUID-B97D335E-105F-4721-9647-D1A3D485399A" name="GUID-B97D335E-105F-4721-9647-D1A3D485399A"></a><h4 id="RACAD-GUID-B97D335E-105F-4721-9647-D1A3D485399A" class="sect4">About Administrative Tools for Oracle RAC Environments</h4>
                  <div>
                     <p>You administer a cluster database as a single-system image using the Server Control Utility (SRVCTL), Oracle Enterprise Manager, SQL*Plus, and other utilities.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Server Control Utility (SRVCTL)</span>: SRVCTL is a command-line interface that you can use to manage an Oracle RAC database from a single point. You can use SRVCTL to start and stop the database and instances and to delete or move instances and services. You can also use SRVCTL to manage configuration information, Oracle Real Application Clusters One Node (Oracle RAC One Node), Oracle Clusterware, and Oracle ASM.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Fleet Patching and Provisioning</span>: Use Fleet Patching and Provisioning to patch, upgrade, and provision Oracle RAC databases.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Oracle Enterprise Manager</span>: Oracle Enterprise Manager Cloud Control GUI interface for managing both noncluster database and Oracle RAC database environments. Oracle recommends that you use Oracle Enterprise Manager to perform administrative tasks whenever feasible.
                           </p>
                           <p>You can use Oracle Enterprise Manager Cloud Control to also manage Oracle RAC One Node databases.</p>
                        </li>
                        <li>
                           <p><span class="bold">SQL*Plus</span>: SQL*Plus commands operate on the current instance. The current instance can be either the local default instance on which you initiated your SQL*Plus session, or it can be a remote instance to which you connect with Oracle Net Services.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Cluster Verification Utility (CVU)</span>: CVU is a command-line tool that you can use to verify a range of cluster and Oracle RAC components, such as shared storage devices, networking configurations, system requirements, and Oracle Clusterware, in addition to operating system groups and users. You can use CVU for preinstallation checks and for postinstallation checks of your cluster environment. CVU is especially useful during preinstallation and during installation of Oracle Clusterware and Oracle RAC components. Oracle Universal Installer runs CVU after installing Oracle Clusterware and Oracle Database to verify your environment.
                           </p>
                           <p>Install and use CVU before you install Oracle RAC to ensure that your configuration meets the minimum Oracle RAC installation requirements. Also, use CVU for verifying the completion of ongoing administrative tasks, such as node addition and node deletion.</p>
                        </li>
                        <li>
                           <p><span class="bold">DBCA</span>: The recommended utility for creating and initially configuring Oracle RAC, Oracle RAC One Node, and Oracle noncluster databases.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">NETCA</span>: Configures the network for your Oracle RAC environment.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../cwadd/rapid-home-provisioning.html#CWADD-GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                           <li><a href="administering-database-instances-and-cluster-databases.html#GUID-C9DB4DCB-34B9-42F0-8AB4-33199087CE98" title="Oracle RAC database administration requires certain privileges and involves either a policy-managed or administrator-managed deployment model.The Server Control Utility (SRVCTL) is a command-line interface that you can use to manage Oracle Databases in a centralized manner.Oracle Enterprise Manager provides a central point of control for the Oracle RAC environment, allowing you to perform administrative tasks simultaneously on multiple cluster databases.Unlike SRVCTL or Oracle Enterprise Manager, SQL*Plus is an instance-oriented management tool.You can start and stop instances with Oracle Enterprise Manager, SQL*Plus, or SRVCTL.Use SRVCTL start Oracle RAC databases and instances.Use SRVCTL to stop instances and Oracle RAC databases.If you want to start or stop just one instance and you are connected to your local node, then you must first ensure that your current environment includes the SID for the local instance.Administering a pluggable database (PDB) involves a small subset of the tasks required to administer a non-CDB.You can use SQL*Plus to verify that database instances are running.You can use the ALTER SYSTEM KILL SESSION statement to terminate a session on a specific instance.Oracle Database searches for your parameter file in a particular order depending on your platform. For Oracle RAC databases, you can easily determine the location of the parameter file by using the srvctl config database command.Oracle recommends that you regularly back up the server parameter file for recovery purposes.By default, most parameters are set to a default value and this value is the same across all instances.Oracle recommends that the parameters listed here have identical settings on all instances.You can convert an administrator-managed database to a policy-managed database.The procedure for quiescing Oracle RAC databases is identical to quiescing a noncluster database.In Oracle RAC environments that run on Linux and UNIX platforms, you can use the CLUSTER_INTERCONNECTS initialization parameter to specify an alternative interconnect to the one Oracle Clusterware is using for the private network.Use these examples to minimize Oracle Clusterware control over Oracle RAC databases, which you may need to do during upgrades.You can install, configure, and monitor an Oracle RAC database from a single location using Oracle Enterprise Manager Cloud Control.You can use Oracle Enterprise Manager to configure Oracle RAC environment alerts.">Administering Database Instances and Cluster Databases</a></li>
                           <li><a href="monitoring-performance.html#GUID-CB16404E-DC1C-4EA0-8A2D-7FA0907E63CD" title="The Oracle Enterprise Manager Cluster Database Performance page provides a quick glimpse of the performance statistics for a database.">Monitoring Oracle RAC and Oracle Clusterware</a></li>
                           <li><a href="server-control-utility-reference.html#GUID-3ED4DBCE-A148-462B-8A79-534A3F0D6E7D" title="SRVCTL is installed on each node in a cluster by default. To use SRVCTL, log in to the operating system of a node and enter the SRVCTL command and its parameters in case-sensitive syntax.Use SRVCTL to manage databases, instances, cluster databases, cluster database instances, Oracle ASM instances and disk groups, services, listeners, or other clusterware resources. This section includes information about using context sensitive help with SRVCTL.A number of SRVCTL commands and parameters have been deprecated in this release.Single-character parameters have been deprecated in Oracle Database 12c.A comprehensive list of SRVCTL commands to use in Oracle RAC environments.Adds a database configuration to Oracle Clusterware.Displays the configuration for an Oracle RAC database or lists all configured databases that are registered with Oracle Clusterware.Converts a database either to or from an Oracle RAC One Node database.Disables a running database.Downgrades the configuration of a database and its services from its current version to a specific lower version.Enables a cluster database and its instances.Displays the values for environment variables associated with a database.Modifies the configuration for a database.Predicts the consequences of the failure of a specific database.Initiates the relocation of an Oracle RAC One Node database from one node to another node.Removes database configurations.Administers cluster database environment configurations.Starts a cluster database and its enabled instances, and all listeners on nodes with database instances.This command displays the current state of the of the database.Stops a database, its instances, and its services.Unsets the cluster database environment configurations.Updates the specified database to use the new listener endpoints.Upgrades the configuration of a database and all of its services to the version of the database home from where this command is run.Disables a specific disk group on a number of specified nodes.Enables a specific disk group on a number of specified nodes.Predicts the consequences of an Oracle ASM disk group failure.Removes a specific Oracle ASM disk group resource from Oracle Clusterware or Oracle Restart.Starts a specific Oracle ASM disk group resource on a number of specified nodes.Displays the status of a specific disk group on a number of specified nodes.Stops a specific Oracle ASM disk group resource on a number of specified nodes.Starts all the Oracle Restart-managed or Oracle Clusterware-managed resources on the specified Oracle home.Displays the status of all the Oracle Restart-managed or Oracle Clusterware-managed resources for the specified Oracle home.Stops all the Oracle Restart-managed or Oracle Clusterware-managed resources that run from the specified Oracle home.Adds a configuration for an instance to your cluster database configuration. Disables a database instance.Enables an instance of an Oracle RAC database.For an administrator-managed database, this command modifies the configuration for a database instance from its current node to another node. For a policy-managed database, this command defines an instance name to use when the database runs on the specified node.Removes the configurations for an instance of an administrator-managed database.Starts instances in the cluster database.The srvctl stop instance command stops instances and stops any services running on specified instances.The srvctl update instance command changes to which Oracle ASM instance or Oracle ASM IOServer the instance connects, or it changes the open mode of the instance.Adds a listener to every node in a cluster.Displays configuration information of a specific listener that is registered with Oracle Clusterware.Disables a listener resource.Enables a listener resource.Displays the environment variables for the specified listener.Changes several aspects of the listenerPredicts the consequences of a listener failure.Removes the configuration of a specific listener, or all listeners, from Oracle Clusterware or Oracle Restart.Administers listener environment configurations.Starts the default listener on specific node, or starts the specified listener on all nodes that are registered with Oracle Clusterware or on the given node.Displays the status of listener resources.Stops the default listener or a specific listener on all nodes or the specified node.Unsets the environment configuration for a listener.Updates the listener to listen on the new endpoints.Adds a static or dynamic network.Displays the network configuration for the cluster.Modifies the subnet, network type, or IP address type for a network.Predicts the consequences of network failure.Removes the network configuration.Adds a node application configuration to the specified node.Displays the VIP configuration for each node in the cluster.Disables node applications on all nodes in the cluster.Enables the node applications on all nodes in the cluster.Displays the environment variables for the node application configurations.Modifies the configuration for a node application.Removes the node application configuration.Sets the environment variables for the node application configurations.Starts node-level applications on a node or all nodes in the cluster.Displays the status of node applications.Stops node-level applications on a node in the cluster.Unsets the environment configuration for the node applications.Adds an Oracle Notification Service daemon to an Oracle Restart configuration.Displays configuration information for the Oracle Notification Service daemon.Disables the Oracle Notification Service daemon for Oracle Restart installations.Enables the Oracle Notification Service daemon.Modifies the ports used by the Oracle Notification Service daemon that is registered with Oracle Restart.Removes Oracle Notification Service from the Oracle Grid Infrastructure home.Starts the Oracle Notification Service daemon.Displays the current state of the Oracle Notification Service daemon.Stops the Oracle Notification Service daemon.Adds Oracle Clusterware resources for the given SCAN. Displays the configuration information for all SCAN VIPs, by default, or a specific SCAN VIP identified by ordinal_number.Disables all SCAN VIPs, by default, or a specific SCAN VIP identified by ordinal_number.Enables all SCAN VIPs, by default, or a specific SCAN VIP identified by its ordinal number.Modifies the number of SCAN VIPs to match the number of IP addresses returned by looking up the scan_name you specify in DNS.Predicts the consequences of SCAN failure.Relocates a specific SCAN VIP from its current hosting node to another node within the cluster.Removes Oracle Clusterware resources from all SCAN VIPs.Starts all SCAN VIPs, by default, or a specific SCAN VIP, on all nodes or a specific node in the cluster.Displays the status for all SCAN VIPs, by default, or a specific SCAN VIP.Stops all SCAN VIPs, by default, that are running or in starting state, or stops a specific SCAN VIP identified by an ordinal number.Adds Oracle Clusterware resources for the SCAN listeners.Displays the configuration information for all SCAN listeners, by default, or a specific listener identified by network number or ordinal_number.Disables all SCAN listeners, by default, or a specific listener identified by an ordinal number.Enables all SCAN listeners, by default, or a specific listener identified by its ordinal number.Modifies the SCAN listener to match that of the SCAN VIP, or modifies the SCAN listener endpoints or service registration restrictions.Predicts the consequences of SCAN listener failure.Relocates a specific SCAN listener from its current hosting node to another node within the cluster.Removes Oracle Clusterware resources from all SCAN listeners.Starts all SCAN listeners, by default, or a specific listener on all nodes or a specific node in the cluster.Displays the status for all SCAN listeners, by default, or a specific listener.Stops all SCAN listeners, by default, that are in a running or starting state, or a specific listener identified by an ordinal number.Updates the SCAN listeners to listen on the new endpoints.Relocates servers to a server pool in the cluster.Displays the current state of specific servers.Adds services to a database and assigns them to instances.Displays the configuration for a service.Disables a service.Enables a service for Oracle Clusterware.Modifies service configuration.Predicts the consequences of service failure.Temporarily relocates the specified service names from one specified instance to another specified instance.Removes the configuration for a service.Starts a service or multiple services on a database, pluggable database, or instance.Displays the status of a service.Stops one or more services globally across the cluster database, or on the specified instance.Adds a server pool that is configured to host Oracle databases to a cluster.Displays configuration information including name, minimum size, maximum size, importance, and a list of server names, if applicable, for a specific server pool in a cluster.Modifies a server pool in a cluster.Removes a specific server pool.Displays server pool names, number of servers in server pools, and, optionally, the names of the servers in the server pools.Adds a virtual IP address (VIP) to a node.Displays all VIPs on all networks in the cluster except for user VIPs.Disables a specific VIP.Enables a specific VIP.Obtains the values of environment variables for a specific VIP.Modifies IP address type but you can also use it to modify just the IP address.Predicts the consequences of VIP failure.Relocates a specific VIP from its current hosting node to another node within the cluster.Removes specific VIPs.Administers cluster VIP environment configurations.Starts a specific VIP or a VIP on a specific node.Displays status for a specific VIP or a VIP on a specific node.Stops a specific VIP or all VIPs on a specific node, including any VIPs that were relocated due to a failover.Unsets the environment configuration for the specified cluster VIP.Displays the configuration for a specific volume or all volumes.Disables Oracle Clusterware management for a specific volume or all volumes.Enables Oracle Clusterware management for a specific volume or all volumes.Removes a specific volume.Starts a specific, enabled volume.Displays the status of a specific volume or all volumes.Stops a specific, running volume.">Server Control Utility Reference</a></li>
                           <li><a href="../cwadd/cluster-verification-utility-reference.html#CWADD-GUID-B88DC0CC-851A-4821-AB02-539D994ED524" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                           <li><a href="../netag/managing-oracle-net-services.html#NETAG-GUID-D8861C13-A525-4A57-97FD-BD8F2DC5A662" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-B97D335E-105F-4721-9647-D1A3D485399A__GUID-B8DCBE41-C04A-4546-8320-91963C52192D">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"Administering Database Instances and Cluster Databases"</span> for an introduction to Oracle RAC administration using SRVCTL, Oracle Enterprise Manager, and SQL*Plus
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"Monitoring Oracle RAC and Oracle Clusterware"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"Server Control Utility Reference"</span> for SRVCTL reference information 
                              </p>
                           </li>
                           <li>
                              <p><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span> for information about the Cluster Verification Utility (CVU), in addition to other Oracle Clusterware tools, such as the OIFCFG tool for allocating and deallocating network interfaces and the <code class="codeph">OCRCONFIG</code> command-line tool for managing OCR
                              </p>
                           </li>
                           <li>
                              <p><span><cite>Oracle Database Net Services Administrator's Guide</cite></span> for more information about NETCA
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7282"></a><div class="sect3"><a id="GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14" name="GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14"></a><h4 id="RACAD-GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14" class="sect4">About Monitoring Oracle RAC Environments</h4>
                  <div>
                     <p>Web-based Oracle Enterprise Manager Cloud Control enables you to monitor an Oracle RAC database.</p>
                     <p>Oracle Enterprise Manager Cloud Control is a central point of control for the Oracle environment that you access by way of a graphical user interface (GUI). See <span class="q">"Monitoring Oracle RAC and Oracle Clusterware"</span> for more information about using Oracle Enterprise Manager to monitor Oracle RAC environments.
                     </p>
                     <p>Also, note the following recommendations about monitoring Oracle RAC environments:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Use Oracle Enterprise Manager Cloud Control to initiate cluster database management tasks.</p>
                        </li>
                        <li>
                           <p>Use Oracle Enterprise Manager Cloud Control to administer multiple or individual Oracle RAC databases.</p>
                        </li>
                        <li>
                           <p>Use the global views (<code class="codeph">GV$</code> views), which are based on <code class="codeph">V$</code> views. The <code class="codeph">catclustdb.sql</code> script creates the <code class="codeph">GV$</code> views. Run this script if you do not create your database with DBCA. Otherwise, DBCA runs this script for you.
                           </p>
                           <p>For almost every <code class="codeph">V$</code> view, there is a corresponding global <code class="codeph">GV$</code> view. In addition to the <code class="codeph">V$</code> information, each <code class="codeph">GV$</code> view contains an extra column named <code class="codeph">INST_ID</code>, which displays the instance number from which the associated <code class="codeph">V$</code> view information was obtained.
                           </p>
                        </li>
                        <li>
                           <p>Use the sophisticated management and monitoring features of the Oracle Database Diagnostic and Tuning packs within Oracle Enterprise Manager that include the Automatic Database Diagnostic Monitor (ADDM) and Automatic Workload Repository (AWR).</p>
                           <div class="infoboxnote" id="GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14__GUID-AFCCD611-FD5A-4F9F-9F1A-44DDB698358C">
                              <p class="notep1">Note:</p>
                              <p>Although Statspack is available for backward compatibility, Statspack provides reporting only. You must run Statspack at level 7 to collect statistics related to block contention and segment block waits.</p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="monitoring-performance.html#GUID-CB16404E-DC1C-4EA0-8A2D-7FA0907E63CD" title="The Oracle Enterprise Manager Cluster Database Performance page provides a quick glimpse of the performance statistics for a database.">Monitoring Oracle RAC and Oracle Clusterware</a></li>
                           <li><a href="../tgdba/automatic-performance-diagnostics.html#TGDBA-GUID-843A596D-2D8B-422D-9C8D-73C0EF52739D" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14__GUID-401BA8B5-7AD1-49D5-9F67-6A73EDBFF1D5">
                        <p class="notep1">See Also:</p>
                        <p><span><cite>Oracle Database Performance Tuning Guide</cite></span> for descriptions of the Oracle Database automatic features for performance diagnosing and tuning, including ADDM
                        </p>
                     </div>
                  </div>
               </div><a id="RACAD7283"></a><div class="sect3"><a id="GUID-BE8B9433-C6D9-442A-B83C-B39C0B3CF4D6" name="GUID-BE8B9433-C6D9-442A-B83C-B39C0B3CF4D6"></a><h4 id="RACAD-GUID-BE8B9433-C6D9-442A-B83C-B39C0B3CF4D6" class="sect4">About Evaluating Performance in Oracle RAC Environments</h4>
                  <div>
                     <p>You do not need to perform special tuning for Oracle RAC; Oracle RAC scales without special configuration changes. If your application performs well on a noncluster Oracle database, then it will perform well in an Oracle RAC environment. Many of the tuning tasks that you would perform on a noncluster Oracle database can also improve Oracle RAC database performance<a id="d6446e7978" class="indexterm-anchor"></a>. This is especially true if your environment requires scalability across a greater number of CPUs.
                     </p>
                     <p>Some of the performance features specific to Oracle RAC include:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a id="d6446e7988" class="indexterm-anchor"></a>Dynamic resource allocation
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle Database dynamically allocates Cache Fusion resources as needed</p>
                              </li>
                              <li>
                                 <p>The dynamic mastering of resources improves performance by keeping resources local to data blocks </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Cache Fusion<a id="d6446e8003" class="indexterm-anchor"></a> enables a simplified tuning methodology
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You do not have to tune any parameters for Cache Fusion</p>
                              </li>
                              <li>
                                 <p>No application-level tuning is necessary</p>
                              </li>
                              <li>
                                 <p>You can use a bottom-up tuning approach with virtually no effect on your existing applications</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>More detailed performance statistics</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>More views for Oracle RAC performance monitoring</p>
                              </li>
                              <li>
                                 <p>Oracle RAC-specific performance views in Oracle Enterprise Manager</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='05477.cloning-a-pdb.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB.">
      <meta name="description" content="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB.">
      <title>Cloning a PDB or Non-CDB</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator’s Guide ">
      <meta property="og:description" content="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96136-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="creating-a-pdb-from-scratch.html" title="Previous" type="text/html">
      <link rel="next" href="relocating-a-pdb.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="MULTI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-a-pdb-from-scratch.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="relocating-a-pdb.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="creating-pdbs.html" property="item" typeof="WebPage"><span property="name">Creating and Removing PDBs and Application Containers</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Cloning a PDB or Non-CDB</li>
            </ol>
            <a id="GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" name="GUID-05702CEB-A43C-452C-8081-4CA68DDA8007"></a>
            
            <h2 id="MULTI-GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" class="sect2"><span class="enumeration_chapter">7 </span>Cloning a PDB or Non-CDB
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB.</p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B">About Cloning a PDB or Non-CDB</a><br>Cloning means creating a new PDB from a source PDB or from a non-CDB.
                  </li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5">Cloning a Local PDB</a><br>You can clone a local PDB by running a <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement and specifying a local PDB in the <code class="codeph">FROM</code> statement.
                  </li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079">Cloning a Remote PDB</a><br>You can clone a local PDB by running a <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement, and specifying a database link to the remote PDB in the <code class="codeph">FROM</code> statement.
                  </li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618">Cloning a Non-CDB</a><br>The procedure for cloning a non-CDB is very similar to the procedure for cloning a remote PDB.
                  </li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-C476B273-469B-4999-8637-A6BA1BD6300A">About Refreshable Clone PDBs</a><br>The <code class="codeph">CREATE&nbsp;PLUGGABLE&nbsp;DATABASE ... REFRESH MODE</code> statement clones a source PDB and configures the clone to be refreshable. Refreshing the clone PDB updates it with redo accumulated since the last redo log apply.
                  </li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-22118625-3157-4C38-8A88-79A561A3E6ED">Cloning PDBs from PDB Snapshots</a><br>You can create PDBs from PDB snapshots by executing the <code class="codeph">CREATE PLUGGABLE DATABASE … USING SNAPSHOT</code> statement.
                  </li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E">Creating Snapshot Copy PDBs</a><br>You can clone a PDB from snapshots of the underlying storage.
                  </li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999">Creating a Split Mirror Clone PDBs</a><br>In Oracle ASM, a split mirror is the process of detaching a point-in-time media copy from a parent copy. After the split, updates to the parent do not affect the child copy.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="You can create PDBs, application containers, and application seeds using a variety of techniques.">Creating and Removing PDBs and Application Containers</a></p>
                  </div>
               </div>
            </div>
            <a id="ADMIN13754"></a><a id="ADMIN13755"></a><a id="ADMIN14321"></a><a id="ADMIN13585"></a><a id="ADMIN14166"></a><a id="ADMIN13584"></a><div class="props_rev_3"><a id="GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B" name="GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B"></a><h3 id="MULTI-GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B" class="sect3"><span class="enumeration_section">7.1 </span>About Cloning a PDB or Non-CDB
               </h3>
               <div>
                  <p>Cloning means creating a new PDB from a source PDB or from a non-CDB.</p>
                  <p>A typical use case is development testing. You can create one or more clones of a PDB or non-CDB and safely test them in isolation. For example, you might test a new or modified application on a cloned PDB before using the application with a production PDB.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12">How Cloning Works</a><br>This technique creates a new PDB from a source PDB or non-CDB. The process automatically plugs the new PDB into the CDB.
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-B00A0E48-C892-4DC8-8455-C6F2ABC8EF91">User Interface for PDB Cloning</a><br>All forms of PDB cloning use the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B__GUID-94D52D7E-4986-4B72-9118-90C645C164F3">
                     <p class="notep1">See Also:</p>
                     <p><a href="../asoag/managing-keystores-encryption-keys-in-united-mode.html#ASOAG-GUID-67812205-D0C9-4F5F-BA64-DAE282F3B516" target="_blank"><span><cite>Oracle Database Advanced Security Guide</cite></span></a> to learn about cloning a source with encrypted data or a keystore set
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB.">Cloning a PDB or Non-CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12" name="GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12"></a><h4 id="MULTI-GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12" class="sect4"><span class="enumeration_section">7.1.1 </span>How Cloning Works
                  </h4>
                  <div>
                     <p>This technique creates a new PDB from a source PDB or non-CDB. The process automatically plugs the new PDB into the CDB.</p>
                     <p>To use this technique, you must specify the source in a <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement. The source can be any of the following:
                     </p>
                     <ul style="list-style-type: disc;" id="GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12__UL_CMX_VJM_YFB">
                        <li>
                           <p>Local PDB</p>
                        </li>
                        <li>
                           <p>PDB in a remote CDB</p>
                        </li>
                        <li>
                           <p>Non-CDB</p>
                        </li>
                     </ul>
                     <p>The target PDB is the copy of the source PDB or non-CDB. The copy is called a <span>clone PDB</span>.
                     </p>
                     <p>The <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement copies the files associated with the source to a new location and associates the files with the target PDB. When the CDB is in <code class="codeph">ARCHIVELOG</code> mode and local undo mode, the source PDB can be open in read/write mode and operational during the cloning process. This technique is known as <strong class="term">hot cloning</strong>.
                     </p>
                     <div class="infoboxnote" id="GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12__GUID-B68D5A88-B47A-4784-A98F-29616971BC91">
                        <p class="notep1">Note:</p>If you clone a PDB, and if the source database has encrypted data or a keystore set, then you must provide the keystore password by including the keystore identified by <code class="codeph"><span class="codeinlineitalic">keystore_password</span></code> clause in the <code class="codeph">CREATE PLUGGABLE DATABASE ... FROM</code> SQL statement. You must provide this password even if the source database is using an auto-login software keystore. You can determine whether the source database has encrypted data or a keystore by querying the <code class="codeph">DBA_ENCRYPTED_COLUMNS</code> data dictionary view.
                     </div>
                     <p>In all cloning scenarios, when you run the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement in the application root, the clone PDB is created in the application container. The application name and version of the source PDB must match the application name and version of the application container. 
                     </p>
                     <p>The following graphic illustrates how this technique creates a new application PDB in an application container by cloning a local source application PDB. The source PDB can also be a PDB plugged into the local CDB root, a PDB plugged into a remote CDB root, or an application PDB plugged into a remote application root.</p>
                     <div class="figure" id="GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12__CLONEAPDBINANAPPLICATIONCONTAINER-7BC6E389">
                        <p class="titleinfigure">Figure 7-1 Clone a PDB in an Application Container</p><img src="img/admin115.png" alt="Description of Figure 7-1 follows" title="Description of Figure 7-1 follows" longdesc="img_text/admin115.html"><br><a href="img_text/admin115.html">Description of "Figure 7-1 Clone a PDB in an Application Container"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12__GUID-0D128A0B-3EF1-4B66-A522-1DCAAA9B2408">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="overview-of-pdb-creation.html#GUID-59F42929-7237-4371-8934-921B46DB6F31" title="However you choose to create a PDB, you must decide on the tablespaces and files that will store the data.">PDB Storage</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B" title="Cloning means creating a new PDB from a source PDB or from a non-CDB.">About Cloning a PDB or Non-CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-B00A0E48-C892-4DC8-8455-C6F2ABC8EF91" name="GUID-B00A0E48-C892-4DC8-8455-C6F2ABC8EF91"></a><h4 id="MULTI-GUID-B00A0E48-C892-4DC8-8455-C6F2ABC8EF91" class="sect4"><span class="enumeration_section">7.1.2 </span>User Interface for PDB Cloning
                  </h4>
                  <div>
                     <p>All forms of PDB cloning use the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement.
                     </p>
                     <div class="section">
                        <p>Cloning requires specifying the source PDB or non-CDB in a <code class="codeph">FROM</code> clause. The following table summarizes the most important clauses.
                        </p>
                        <div class="tblformal" id="GUID-B00A0E48-C892-4DC8-8455-C6F2ABC8EF91__TABLE_JG2_RPM_YFB">
                           <p class="titleintable">Table 7-1 CREATE PLUGGABLE DATABASE Options for PDB Cloning</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE PLUGGABLE DATABASE Options for PDB Cloning" summary="This table shows the effect of different clauses." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d38373e575">Clause</th>
                                    <th align="left" valign="bottom" id="d38373e578">Cloning Operation</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e583" headers="d38373e575 ">
                                       <p><code class="codeph">USING SNAPSHOT</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e583 d38373e578 ">
                                       <p>Creates a PDB from a database-managed PDB snapshot. This type of snapshot is different from a storage-managed snapshot. Specify the PDB snapshot name, SCN, or timestamp.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e591" headers="d38373e575 ">
                                       <p><code class="codeph">REFRESH MODE</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e591 d38373e578 ">
                                       <p>Creates a refreshable clone PDB.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e599" headers="d38373e575 ">
                                       <p><code class="codeph">SNAPSHOT COPY</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e599 d38373e578 ">
                                       <p>Creates a sparse PDB based on a storage-level snapshot. Snapshot copies are only supported on specific file systems.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e607" headers="d38373e575 ">
                                       <p><code class="codeph">USING MIRROR COPY</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e607 d38373e578 ">
                                       <p>Creates a new PDB by splitting an ASM storage mirror.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B00A0E48-C892-4DC8-8455-C6F2ABC8EF91__GUID-1EF2D6B3-A008-450B-AC3B-BD7F9EED0352">
                        <p class="notep1">See Also:</p>
                        <p><a href="../sqlrf/CREATE-PLUGGABLE-DATABASE.html#GUID-F2DBA8DD-EEA8-4BB7-A07F-78DC04DB1FFC" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about <code class="codeph">CREATE PLUGGABLE DATABASE</code> clauses
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B" title="Cloning means creating a new PDB from a source PDB or from a non-CDB.">About Cloning a PDB or Non-CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5" name="GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5"></a><h3 id="MULTI-GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5" class="sect3"><span class="enumeration_section">7.2 </span>Cloning a Local PDB
               </h3>
               <div>
                  <p>You can clone a local PDB by running a <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement and specifying a local PDB in the <code class="codeph">FROM</code> statement.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2">About Cloning a Local PDB</a><br>The simplest form of cloning copies a PDB from a CDB into the same CDB.
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-B39552A6-9206-40FE-B168-962215C7E743">Cloning a Local PDB: Basic Steps</a><br>You can clone a local PDB by executing <code class="codeph">CREATE PLUGGABLE DATABASE</code> and specify the source PDB in the <code class="codeph">FROM</code> clause.
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-90BD14B9-DAA2-4EA0-B086-DFA29FF1E06A">After Cloning a Local PDB</a><br>Certain rules regarding users and tablespaces apply after cloning a local PDB.
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-85093F44-9783-4BBD-862B-0E484C118ECA">Cloning a Local PDB: Examples</a><br>The following examples clone a local source PDB named <code class="codeph">pdb1</code> to a target PDB named <code class="codeph">pdb2</code> given different factors.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB.">Cloning a PDB or Non-CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2" name="GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2"></a><h4 id="MULTI-GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2" class="sect4"><span class="enumeration_section">7.2.1 </span>About Cloning a Local PDB
                  </h4>
                  <div>
                     <p>The simplest form of cloning copies a PDB from a CDB into the same CDB.</p>
                     <div class="infoboxnote" id="GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2__GUID-B5F57724-4C3A-41F4-8E2C-176FA16E09D0">
                        <p class="notep1">Note:</p>
                        <p>You cannot use the <code class="codeph">FROM</code> clause in the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement to create a PDB from the PDB seed (<code class="codeph">PDB$SEED</code>) or from an application seed.
                        </p>
                     </div>
                     <p>The following figure illustrates how to clone a local PDB.</p>
                     <div class="figure" id="GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2__CEGGCIDD">
                        <p class="titleinfigure">Figure 7-2 Clone a Local PDB</p><img src="img/admin0911.png" width="484" alt="Description of Figure 7-2 follows" title="Description of Figure 7-2 follows" longdesc="img_text/admin0911.html"><br><a href="img_text/admin0911.html">Description of "Figure 7-2 Clone a Local PDB"</a></div>
                     <!-- class="figure" -->
                     <p>Before cloning a PDB, address the questions that apply to cloning a PDB in <span class="q">"<a href="overview-of-pdb-creation.html#GUID-87F21FDE-7115-4207-954E-B229C1879EF6__GUID-57A2E4B5-E8EB-4294-95C2-A3E04AF93D8C" title="This table describes each clause and when to use each clause.">Table 5-3</a>"</span>. The table describes which <code class="codeph">CREATE PLUGGABLE DATABASE</code> clauses to specify based on different factors.
                     </p>
                     <p>Starting in <span>Oracle Database 18c</span>, you can clone a local PDB using DBCA.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2__GUID-E953B3C0-7E64-4873-BBB4-C9F13CA7F51D">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html#GUID-626B9812-6938-4268-806A-DAF6D5B4F2E6" title="You can determine your current container ID or container name in a CDB.">Determining the Current Container ID or Name</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="creating-a-pdb-from-scratch.html#GUID-CCA938BD-52BE-422C-86AF-576D3E02B96B" title="Use the CREATE PLUGGABLE DATABASE statement to create a PDB in a CDB using the files of the PDB seed (PDB$SEED).">Creating a PDB from Scratch</a>"</span> to learn how to create a PDB from the seed
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="cloning-a-pdb.html#GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26" title="This example clones a PDB using the silent mode of DBCA. Hot cloning is supported.">Cloning a Local PDB Using DBCA: Example</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="creating-removing-application-containers-seeds-with-sql-plus.html#GUID-88E61123-F651-47D7-9977-B589268EBD29" title="You create an application PDB by running the CREATE&nbsp;PLUGGABLE&nbsp;DATABASE&nbsp;statement with an application root as the current container.">Creating an Application PDB</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5" title="You can clone a local PDB by running a CREATE PLUGGABLE DATABASE statement and specifying a local PDB in the FROM statement.">Cloning a Local PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13589"></a><a id="ADMIN13590"></a><a id="ADMIN13591"></a><a id="ADMIN13592"></a><a id="ADMIN14331"></a><a id="ADMIN13586"></a><div class="props_rev_3"><a id="GUID-B39552A6-9206-40FE-B168-962215C7E743" name="GUID-B39552A6-9206-40FE-B168-962215C7E743"></a><h4 id="MULTI-GUID-B39552A6-9206-40FE-B168-962215C7E743" class="sect4"><span class="enumeration_section">7.2.2 </span>Cloning a Local PDB: Basic Steps
                  </h4>
                  <div>
                     <p>You can clone a local PDB by executing <code class="codeph">CREATE PLUGGABLE DATABASE</code> and specify the source PDB in the <code class="codeph">FROM</code> clause.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B39552A6-9206-40FE-B168-962215C7E743__GUID-68A0A6C5-C9E3-4B16-920D-49734FD089D3">Prerequisites</p>
                        <p>You must meet the following prerequisites:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Complete the prerequisites described in <span class="q">"<a href="overview-of-pdb-creation.html#GUID-B26D56E1-B958-444F-864C-8AFDFF1566A6" title="Before creating a PDB, you must meet certain prerequisites.">General Prerequisites for PDB Creation</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>The current user must have the <code class="codeph">CREATE PLUGGABLE DATABASE</code> system privilege in both the root and the source PDB. 
                              </p>
                           </li>
                           <li>
                              <p>The source PDB cannot be closed.</p>
                           </li>
                           <li>
                              <p>If the CDB is not in local undo mode, then the source PDB must be in open read-only mode. This requirement does not apply if the CDB is in local undo mode.</p>
                           </li>
                           <li>
                              <p>If the CDB is not in <code class="codeph">ARCHIVELOG</code> mode, then the source PDB must be in open read-only mode. This requirement does not apply if the CDB is in <code class="codeph">ARCHIVELOG</code> mode.
                              </p>
                           </li>
                           <li>
                              <p>If you are creating an application PDB, then the application PDB must have the same character set and national character set as the application container.</p>
                              <p> If the database character set of the CDB is AL32UTF8, then the character set and national character set of the application container can be different from the CDB. However, all application PDBs in an application container must have same character set and national character set, matching that of the application container.</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-B39552A6-9206-40FE-B168-962215C7E743__GUID-22F7E672-064D-429E-A53A-1172DE92BB5D">
                           <p class="notep1">Note:</p>You can use the <code class="codeph">REFRESH MODE</code> clause to create a refreshable clone of a local PDB, but only if the database link loops back to the same CDB.
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B39552A6-9206-40FE-B168-962215C7E743__GUID-390ECA39-E899-4B5A-AC13-C86562BCF147">To clone a local PDB:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, ensure that the current container is the CDB root or an application root.</p>
                              <p>When the current container is the CDB root, the PDB is created in the CDB. When the current container is an application root, the application PDB is created in the application container.</p>
                           </li>
                           <li>
                              <p>Run the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement, and specify the source PDB in the <code class="codeph">FROM</code> clause. Specify other clauses when required.
                              </p>
                              <p>After cloning a local PDB, the source and target PDBs are in the same CDB. The new PDB is in mounted mode, and its status is <code class="codeph">NEW</code>. You can view the open mode of a PDB by querying the <code class="codeph">OPEN_MODE</code> column in the <code class="codeph">V$PDBS</code> view. You can view the status of a PDB by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">CDB_PDBS</code> or <code class="codeph">DBA_PDBS</code> view.
                              </p>
                              <p>A new default service is created for the PDB. The service has the same name as the PDB and can be used to access the PDB. Oracle Net Services must be configured properly for clients to access this service.</p>
                           </li>
                           <li>
                              <p>Open the new PDB in read/write mode.</p>
                              <p>You must open the new PDB in read/write mode for Oracle Database to complete the integration of the new PDB into the CDB. An error is returned if you attempt to open the PDB in read-only mode. After the PDB is opened in read/write mode, its status is <code class="codeph">NORMAL</code>.
                              </p>
                           </li>
                           <li>
                              <p>Back up the new PDB.</p>
                              <p>A PDB cannot be recovered unless it is backed up.</p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-B39552A6-9206-40FE-B168-962215C7E743__GUID-66D9D9B6-EA6A-406B-9FA0-84C33639E792">
                           <p class="notep1">Note:</p>
                           <p>If an error is returned during PDB creation, then the PDB being created might be in an <code class="codeph">UNUSABLE</code> state. You can check the PDB state by querying the <code class="codeph">CDB_PDBS</code> or <code class="codeph">DBA_PDBS</code> view. You can learn more about PDB creation errors by checking the alert log. An unusable PDB can only be dropped, and it must be dropped before you can create a PDB with the same name as the unusable PDB.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B39552A6-9206-40FE-B168-962215C7E743__GUID-F65F1CCF-A7CA-4159-B2B8-BA4F8D209AA6">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="The data dictionary in each container in a CDB is separate, and the current container is the container whose data dictionary is used for name resolution and for privilege authorization.">About the Current Container</a>"</span> and <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-8F8B2FF8-7FA7-40CD-8AA5-ACABCD3964D8" title="You can configure a CDB to use local undo in every container or to use shared undo for the entire CDB.">About the CDB Undo Mode</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="You can modify the open mode of a PDB by using the ALTER PLUGGABLE DATABASE SQL statement or the SQL*Plus STARTUP command.">Modifying the Open Mode of One or More PDBs</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../bradv/backing-up-database.html#BRADV428" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> to learn how to back up a PDB
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5" title="You can clone a local PDB by running a CREATE PLUGGABLE DATABASE statement and specifying a local PDB in the FROM statement.">Cloning a Local PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-90BD14B9-DAA2-4EA0-B086-DFA29FF1E06A" name="GUID-90BD14B9-DAA2-4EA0-B086-DFA29FF1E06A"></a><h4 id="MULTI-GUID-90BD14B9-DAA2-4EA0-B086-DFA29FF1E06A" class="sect4"><span class="enumeration_section">7.2.3 </span>After Cloning a Local PDB
                  </h4>
                  <div>
                     <p>Certain rules regarding users and tablespaces apply after cloning a local PDB.</p>
                     <p>Users in the new PDB who used the default temporary tablespace of the source PDB use the default temporary tablespace of the new PDB. Users who used nondefault temporary tablespaces in the PDB continue to use the same local temporary tablespaces in the cloned PDB.</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-90BD14B9-DAA2-4EA0-B086-DFA29FF1E06A__NOTE_V4H_TM2_YFB">
                        <p class="notep1">See Also:</p>
                        <p> <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-B34BC55B-C734-4799-A54A-0BB04073D9D0" title="A tablespace is a logical storage container for database objects, such as tables and indexes, that consume storage space.">About Managing Tablespaces in a CDB</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5" title="You can clone a local PDB by running a CREATE PLUGGABLE DATABASE statement and specifying a local PDB in the FROM statement.">Cloning a Local PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-85093F44-9783-4BBD-862B-0E484C118ECA" name="GUID-85093F44-9783-4BBD-862B-0E484C118ECA"></a><h4 id="MULTI-GUID-85093F44-9783-4BBD-862B-0E484C118ECA" class="sect4"><span class="enumeration_section">7.2.4 </span>Cloning a Local PDB: Examples
                  </h4>
                  <div>
                     <p>The following examples clone a local source PDB named <code class="codeph">pdb1</code> to a target PDB named <code class="codeph">pdb2</code> given different factors.
                     </p>
                     <p>In each example, the root to which the new PDB belongs depends on the current container when the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement is run:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>When the current container is the CDB root, the database creates the PDB in the CDB root.</p>
                        </li>
                        <li>
                           <p>When the current container is an application root in an application container, the database creates an application PDB in the application root.</p>
                        </li>
                     </ul>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B">Cloning a Local PDB Using No Clauses: Example</a><br>This example shows the simplest way to clone a PDB.
                        </li>
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26">Cloning a Local PDB Using DBCA: Example</a><br>This example clones a PDB using the silent mode of DBCA. Hot cloning is supported.
                        </li>
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-E28E2322-36A0-424C-8FCB-9AE145CFC6EA">Cloning a Local PDB with the PATH_PREFIX Clause: Example</a><br>This example explains how to clone a local PDB with the <code class="codeph">PATH_PREFIX</code>, <code class="codeph">FILE_NAME_CONVERT</code>, and <code class="codeph">SERVICE_NAME_CONVERT</code> clauses.
                        </li>
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-82C98D63-C24F-4143-AC1C-53C97A5786B1">Cloning a Local PDB Using the STORAGE Clause: Example</a><br>This example clones a local PDB using the <code class="codeph">FILE_NAME_CONVERT</code>, <code class="codeph">STORAGE</code>, and <code class="codeph">SERVICE_NAME_CONVERT</code> clauses.
                        </li>
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-010A4F9F-FBBF-4516-8D19-09BEB999274B">Cloning a Local PDB with the NO DATA Clause: Example</a><br>This example clones the data model definition of the PDB, but does not clone the data in the PDB.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5" title="You can clone a local PDB by running a CREATE PLUGGABLE DATABASE statement and specifying a local PDB in the FROM statement.">Cloning a Local PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B" name="GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B"></a><h5 id="MULTI-GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B" class="sect5"><span class="enumeration_section">7.2.4.1 </span>Cloning a Local PDB Using No Clauses: Example
                     </h5>
                     <div>
                        <p>This example shows the simplest way to clone a PDB.</p>
                        <div class="section">
                           <p>This example assumes the following factors:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">FILE_NAME_CONVERT</code> clause and the <code class="codeph">CREATE_FILE_DEST</code> clause are not required.
                                 </p>
                                 <p>Either Oracle Managed Files is enabled, or the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter is set. Therefore, the <code class="codeph">FILE_NAME_CONVERT</code> clause is not required. The files will be copied to a new location based on the Oracle Managed Files configuration or the initialization parameter setting.
                                 </p>
                              </li>
                              <li>
                                 <p>Storage limits are not required for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is not required.
                                 </p>
                              </li>
                              <li>
                                 <p>There is no file with the same name as the new temp file that will be created in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is not required.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B__CEGGGAGG">
                           <p>The following statement clones the <code class="codeph">pdb2</code> PDB from the <code class="codeph">pdb1</code> PDB:
                           </p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE pdb2 FROM pdb1;
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B__GUID-99F70C52-970F-462D-8926-05F79107ED58">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../admin/using-oracle-managed-files.html#ADMIN-GUID-4A3C4616-0D81-4BBA-8EAD-FCAA8AD5C15A" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about Oracle Managed Files
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../refrn/PDB_FILE_NAME_CONVERT.html#REFRN10322" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-85093F44-9783-4BBD-862B-0E484C118ECA" title="The following examples clone a local source PDB named pdb1 to a target PDB named pdb2 given different factors.">Cloning a Local PDB: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26" name="GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26"></a><h5 id="MULTI-GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26" class="sect5"><span class="enumeration_section">7.2.4.2 </span>Cloning a Local PDB Using DBCA: Example
                     </h5>
                     <div>
                        <p>This example clones a PDB using the silent mode of DBCA. Hot cloning is supported.</p>
                        <div class="section">
                           <p>This example assumes the following factors:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The source CDB is a single-instance database with the SID <code class="codeph">orcl</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The source PDB is <code class="codeph">pdb1</code>. You intend for <code class="codeph">pdb1</code> to remain open during the cloning operation, which means that local undo and <code class="codeph">ARCHIVELOG</code> mode are enabled in the CDB. Otherwise, DBCA closes the PDB during the clone operation, and after receiving confirmation, opens the source PDB in read-only mode.
                                 </p>
                              </li>
                              <li>
                                 <p>The new PDB is <code class="codeph">pdb2</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>You are running DBCA in noninteractive mode.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26__GUID-512B1DA0-B16E-4F12-81FD-77056F606157">
                           <p>The following command clones the <code class="codeph">pdb2</code> PDB from the <code class="codeph">pdb1</code> PDB:
                           </p><pre class="pre codeblock"><code>./dbca -silent 
  -createpluggabledatabase 
  -sourcedb orcl 
  -createpdbfrom PDB 
  -pdbName pdb2 
  -sourcepdb pdb1</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26__GUID-95789FD3-C198-476F-B2DB-A84D80628B27">
                           <p class="notep1">See Also:</p>
                           <p><a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN-GUID-5DD346B8-4404-48F1-A811-F39D739E4D05" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for the DBCA command reference
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-85093F44-9783-4BBD-862B-0E484C118ECA" title="The following examples clone a local source PDB named pdb1 to a target PDB named pdb2 given different factors.">Cloning a Local PDB: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-E28E2322-36A0-424C-8FCB-9AE145CFC6EA" name="GUID-E28E2322-36A0-424C-8FCB-9AE145CFC6EA"></a><h5 id="MULTI-GUID-E28E2322-36A0-424C-8FCB-9AE145CFC6EA" class="sect5"><span class="enumeration_section">7.2.4.3 </span>Cloning a Local PDB with the PATH_PREFIX Clause: Example
                     </h5>
                     <div>
                        <p>This example explains how to clone a local PDB with the <code class="codeph">PATH_PREFIX</code>, <code class="codeph">FILE_NAME_CONVERT</code>, and <code class="codeph">SERVICE_NAME_CONVERT</code> clauses.
                        </p>
                        <div class="section">
                           <p>This example assumes the following factors:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The path prefix must be added to the PDB's directory object paths. Therefore, the <code class="codeph">PATH_PREFIX</code> clause is required. In this example, the path prefix /disk2/oracle/pdb2/ is added to the PDB’s directory object paths.
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">FILE_NAME_CONVERT</code> clause is required to specify the target locations of the copied files. In this example, the files are copied from <code class="codeph">/disk1/oracle/pdb1</code> to <code class="codeph">/disk2/oracle/pdb2</code>.
                                 </p>
                                 <p>The <code class="codeph">CREATE_FILE_DEST</code> clause is not used, and neither Oracle Managed Files nor the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter is used to specify the target locations of the copied files.
                                 </p>
                                 <p>To view the location of the data files for a PDB, run the query in <span class="q">"<a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html#GUID-1DED3127-84E4-4967-BEB3-D0ADEC622643__CHDHDICB">Example 19-7</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Storage limits are not required for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is not required.
                                 </p>
                              </li>
                              <li>
                                 <p>There is no file with the same name as the new temp file that will be created in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is not required.
                                 </p>
                              </li>
                              <li>
                                 <p>The PDB that is being cloned (<code class="codeph">pdb1</code>) has two user-defined services: <code class="codeph">salesrep_ca</code> and <code class="codeph">orders_ca</code> for the sales representatives and order entry personnel in California. The new services will be for the sales representatives and order entry personnel in Oregon, and the service names will be renamed to <code class="codeph">salesrep_or</code> and <code class="codeph">orders_or</code>, respectively, in the cloned PDB (<code class="codeph">pdb2</code>).
                                 </p>
                              </li>
                              <li>
                                 <p>Future tablespaces created within the PDB will be created with the <code class="codeph">NOLOGGING</code> attribute by default. This feature is available starting with <span>Oracle Database 12c</span> Release 1 (12.1.0.2).
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-E28E2322-36A0-424C-8FCB-9AE145CFC6EA__CEGHFCBB">
                           <p>The following statement clones the <code class="codeph">pdb2</code> PDB from the <code class="codeph">pdb1</code> PDB:
                           </p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE pdb2 FROM pdb1 
  PATH_PREFIX = '/disk2/oracle/pdb2/'
  FILE_NAME_CONVERT = ('/disk1/oracle/pdb1/', '/disk2/oracle/pdb2/')
  SERVICE_NAME_CONVERT = ('salesrep_ca','salesrep_or','orders_ca','orders_or')
  NOLOGGING;
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-85093F44-9783-4BBD-862B-0E484C118ECA" title="The following examples clone a local source PDB named pdb1 to a target PDB named pdb2 given different factors.">Cloning a Local PDB: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-82C98D63-C24F-4143-AC1C-53C97A5786B1" name="GUID-82C98D63-C24F-4143-AC1C-53C97A5786B1"></a><h5 id="MULTI-GUID-82C98D63-C24F-4143-AC1C-53C97A5786B1" class="sect5"><span class="enumeration_section">7.2.4.4 </span>Cloning a Local PDB Using the STORAGE Clause: Example
                     </h5>
                     <div>
                        <p>This example clones a local PDB using the <code class="codeph">FILE_NAME_CONVERT</code>, <code class="codeph">STORAGE</code>, and <code class="codeph">SERVICE_NAME_CONVERT</code> clauses.
                        </p>
                        <div class="section">
                           <p>This example assumes the following factors:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">FILE_NAME_CONVERT</code> clause is required to specify the target locations of the copied files. In this example, the files are copied from /disk1/oracle/pdb1 to /disk2/oracle/pdb2.
                                 </p>
                                 <p>The <code class="codeph">CREATE_FILE_DEST</code> clause is not used, and neither Oracle Managed Files nor the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter is used to specify the target locations of the copied files.
                                 </p>
                                 <p>To view the location of the data files for a PDB, run the query in <a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html#GUID-1DED3127-84E4-4967-BEB3-D0ADEC622643__CHDHDICB">Example 19-7</a>.
                                 </p>
                              </li>
                              <li>
                                 <p>Storage limits must be enforced for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is required. Specifically, all tablespaces that belong to the PDB must not exceed 2 gigabytes.
                                 </p>
                              </li>
                              <li>
                                 <p>The source PDB (<code class="codeph">pdb1</code>) has two user-defined services: <code class="codeph">salesrep_ca</code> and <code class="codeph">orders_ca</code> for the sales representatives and order entry personnel in California. The new services will be for the sales representatives and order entry personnel in Oregon, and the service names will be renamed to <code class="codeph">salesrep_or</code> and <code class="codeph">orders_or</code>, respectively, in the cloned PDB (<code class="codeph">pdb2</code>).
                                 </p>
                              </li>
                              <li>
                                 <p>There is no file with the same name as the new temp file that will be created in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is not required.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-82C98D63-C24F-4143-AC1C-53C97A5786B1__CEGCIDDB">
                           <p>The following statement clones the <code class="codeph">pdb2</code> PDB from the <code class="codeph">pdb1</code> PDB:
                           </p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE pdb2 FROM pdb1 
  FILE_NAME_CONVERT = ('/disk1/oracle/pdb1/', '/disk2/oracle/pdb2/')
  STORAGE (MAXSIZE 2G)
  SERVICE_NAME_CONVERT = ('salesrep_ca','salesrep_or','orders_ca','orders_or');
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-85093F44-9783-4BBD-862B-0E484C118ECA" title="The following examples clone a local source PDB named pdb1 to a target PDB named pdb2 given different factors.">Cloning a Local PDB: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-010A4F9F-FBBF-4516-8D19-09BEB999274B" name="GUID-010A4F9F-FBBF-4516-8D19-09BEB999274B"></a><h5 id="MULTI-GUID-010A4F9F-FBBF-4516-8D19-09BEB999274B" class="sect5"><span class="enumeration_section">7.2.4.5 </span>Cloning a Local PDB with the NO DATA Clause: Example
                     </h5>
                     <div>
                        <p>This example clones the data model definition of the PDB, but does not clone the data in the PDB.</p>
                        <div class="section">
                           <p>This example assumes the following factors:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">NO DATA</code> clause is required because the goal is to clone the data model definition of the source PDB without cloning its data.
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">FILE_NAME_CONVERT</code> clause and the <code class="codeph">CREATE_FILE_DEST</code> clause are not required.
                                 </p>
                                 <p>Either Oracle Managed Files is enabled, or the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter is set. Therefore, the <code class="codeph">FILE_NAME_CONVERT</code> clause is not required. The process copies the files to a new location based on the Oracle Managed Files configuration or the initialization parameter setting.
                                 </p>
                              </li>
                              <li>
                                 <p>Storage limits are not required for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is not required.
                                 </p>
                              </li>
                              <li>
                                 <p>There is no file with the same name as the new temp file that will be created in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is not required.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-010A4F9F-FBBF-4516-8D19-09BEB999274B__GUID-E67C9C2A-5ED2-4124-8946-0219F209C6CF">
                           <p>Assume that the source PDB <code class="codeph">pdb1</code> has a large amount of data. The following steps illustrate how the clone does not contain the data of the source PDB when the operation is complete:
                           </p>
                           <ol>
                              <li>
                                 <p>With the source PDB <code class="codeph">pdb1</code> as the current container, query a table with a large amount of data:
                                 </p><pre class="pre codeblock"><code>SELECT COUNT(*) FROM tpch.lineitem;

  COUNT(*)
----------
  60001215
</code></pre><p>The table has over sixty million rows.</p>
                              </li>
                              <li>
                                 <p>Clone the source PDB with the <code class="codeph">NO DATA</code> clause:
                                 </p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE pdb2 FROM pdb1 NO DATA;
</code></pre></li>
                              <li>
                                 <p>Open the cloned PDB:</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE pdb2 OPEN;
</code></pre></li>
                              <li>
                                 <p>With the cloned PDB <code class="codeph">pdb2</code> as the current container, query the table that has a large amount of data in the source PDB:
                                 </p><pre class="pre codeblock"><code>SELECT COUNT(*) FROM tpch.lineitem;

  COUNT(*)
----------
         0
</code></pre><p>The table in the cloned PDB has no rows.</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-85093F44-9783-4BBD-862B-0E484C118ECA" title="The following examples clone a local source PDB named pdb1 to a target PDB named pdb2 given different factors.">Cloning a Local PDB: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079" name="GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079"></a><h3 id="MULTI-GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079" class="sect3"><span class="enumeration_section">7.3 </span>Cloning a Remote PDB
               </h3>
               <div>
                  <p>You can clone a local PDB by running a <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement, and specifying a database link to the remote PDB in the <code class="codeph">FROM</code> statement.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-13FF2CE2-532C-4816-8E88-7A5A6E16A279">About Cloning a Remote PDB</a><br>When the source is a PDB is in a remote CDB, you must use a database link to clone the PDB into the local CDB. 
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F">Cloning a Remote PDB: Basic Steps</a><br>You can create a PDB by cloning a remote PDB. After the cloning operation, the source and the target PDB are in different locations.
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-AF27B6CB-A1A9-4AFD-B45B-2DA92C972396">After Cloning a Remote PDB</a><br>Certain rules regarding users and tablespaces apply after cloning a remote PDB.
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-5A9E81ED-D9BF-4551-A5FC-3154DC7223C8">Cloning a Remote PDB: Examples</a><br>These examples clone a remote PDB or non-CDB given different factors.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB.">Cloning a PDB or Non-CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-13FF2CE2-532C-4816-8E88-7A5A6E16A279" name="GUID-13FF2CE2-532C-4816-8E88-7A5A6E16A279"></a><h4 id="MULTI-GUID-13FF2CE2-532C-4816-8E88-7A5A6E16A279" class="sect4"><span class="enumeration_section">7.3.1 </span>About Cloning a Remote PDB
                  </h4>
                  <div>
                     <p>When the source is a PDB is in a remote CDB, you must use a database link to clone the PDB into the local CDB. </p>
                     <p>The database link must exist in the <span class="italic">local</span> CDB (not the remote CDB). When you issue the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement from the root of the local CDB, you must specify a database link to the remote CDB that contains the PDB being cloned in the <code class="codeph">FROM</code> clause. The database link connects from the local CDB to either to the root of the remote CDB or to the remote source PDB.
                     </p>
                     <p>The following figure illustrates how this technique creates a new PDB when the source PDB is remote.</p>
                     <div class="figure" id="GUID-13FF2CE2-532C-4816-8E88-7A5A6E16A279__CEGHBGGJ">
                        <p class="titleinfigure">Figure 7-3 Creating a PDB by Cloning a Remote PDB</p><img src="img/admin092.png" width="587" alt="Description of Figure 7-3 follows" title="Description of Figure 7-3 follows" longdesc="img_text/admin092.html"><br><a href="img_text/admin092.html">Description of "Figure 7-3 Creating a PDB by Cloning a Remote PDB"</a></div>
                     <!-- class="figure" -->
                     <p>Starting in <span>Oracle Database 19c</span>, you can clone a remote PDB using DBCA in silent mode.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079" title="You can clone a local PDB by running a CREATE PLUGGABLE DATABASE statement, and specifying a database link to the remote PDB in the FROM statement.">Cloning a Remote PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13596"></a><a id="ADMIN14322"></a><a id="ADMIN13593"></a><div class="props_rev_3"><a id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F" name="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F"></a><h4 id="MULTI-GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F" class="sect4"><span class="enumeration_section">7.3.2 </span>Cloning a Remote PDB: Basic Steps
                  </h4>
                  <div>
                     <p>You can create a PDB by cloning a remote PDB. After the cloning operation, the source and the target PDB are in different locations.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GUID-49986022-D198-415E-9ED3-05C75E597C4E">General Prerequisites</p>
                        <p>The following prerequisites must be met:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Complete the prerequisites described in <span class="q">"<a href="overview-of-pdb-creation.html#GUID-B26D56E1-B958-444F-864C-8AFDFF1566A6" title="Before creating a PDB, you must meet certain prerequisites.">General Prerequisites for PDB Creation</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>The current user must have the <code class="codeph">CREATE PLUGGABLE DATABASE</code> system privilege in the root of the CDB that will contain the target PDB. 
                              </p>
                           </li>
                           <li>
                              <p>The source and target platforms must meet the following requirements:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>They must have the same endianness.</p>
                                 </li>
                                 <li>
                                    <p>The database options installed on the source platform must be the same as, or a subset of, the database options installed on the target platform.</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>If you are creating an application PDB, then the application name and version of the source PDB must match the application name and version of the target application container.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GUID-48DDDC51-F206-4233-96C3-870BC789BB57">Prerequisites for Character Sets</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the character set of the CDB to which the PDB is being cloned is not AL32UTF8, then the source and target must have compatible character sets and national character sets. If the character set of the CDB to which the PDB is being cloned is AL32UTF8, then this requirement does not apply. </p>
                           </li>
                           <li>
                              <p>If you are creating an application PDB, then the application PDB must have the same character set and national character set as the application container.</p>
                              <p>If the database character set of the CDB is AL32UTF8, then the character set and national character set of the application container can different from the CDB. However, all application PDBs in an application container must have same character set and national character set, matching that of the application container.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GUID-00A67D0B-E84B-46FE-B050-596506C27809">Prerequisites for the Open Mode of the Source PDB</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The source PDB must not be closed.</p>
                           </li>
                           <li>
                              <p>If the remote CDB is not in local undo mode, then the source PDB must be open in read-only mode.</p>
                              <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-8F8B2FF8-7FA7-40CD-8AA5-ACABCD3964D8" title="You can configure a CDB to use local undo in every container or to use shared undo for the entire CDB.">About the CDB Undo Mode</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>If the remote CDB is not in <code class="codeph">ARCHIVELOG</code> mode, then the source PDB must be open in read-only mode.
                              </p>
                           </li>
                           <li>
                              <p>If you are creating a refreshable PDB, then the source PDB must be in <code class="codeph">ARCHIVELOG</code> mode and local undo mode.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GENERALPREREQUISITES-EFA2D3FB">Prerequisites for the Database Link</p>
                        <p>The following prerequisites must be met:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A database link must enable a connection from the CDB to which the PDB is being cloned to the source PDB’s CDB. The database link can connect to either the root of the CDB, to an application PDB if the source is an application PDB, or to the PDB.</p>
                           </li>
                           <li>
                              <p>The user that the database link connects with must have the <code class="codeph">CREATE PLUGGABLE DATABASE</code> system privilege.
                              </p>
                           </li>
                           <li>
                              <p>If the database link connects to the root in the CDB of the source PDB, then the user that the database link connects with must be a common user.</p>
                           </li>
                           <li>
                              <p>In an Oracle Data Guard environment, if you are performing a remote clone of a PDB into a primary CDB, then on the standby CDB set the <code class="codeph">STANDBY_PDB_SOURCE_FILE_DBLINK</code> initialization parameter. This parameter specifies the name of the database link used in <code class="codeph">CREATE PLUGGABLE DATABASE ... FROM <span class="codeinlineitalic">dblink</span></code>. The standby CDB attempts to copy the data files from the source PDB referenced in the database link, but only if the source PDB is open in read-only mode. Otherwise, you must copy data files to the Oracle Managed Files location on the standby CDB.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GUID-C4A3DE1C-CC50-46D7-9D92-4BFF8D01A49E">To clone a remote PDB:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, ensure that the current container is the root of the target CDB or the application root of the target application container.</p>
                           </li>
                           <li>
                              <p>Run the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement, and specify the source PDB in the <code class="codeph">FROM</code> clause. Specify other clauses when required.
                              </p>
                              <p>After you create the PDB, it is in mounted mode, and its status is <code class="codeph">NEW</code>. You can view the open mode of a PDB by querying the <code class="codeph">OPEN_MODE</code> column in the <code class="codeph">V$PDBS</code> view. You can view the status of a PDB by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">CDB_PDBS</code> or <code class="codeph">DBA_PDBS</code> view.
                              </p>
                              <p>A new default service is created for the PDB. The service has the same name as the PDB and can be used to access the PDB. Oracle Net Services must be configured properly for clients to access this service.</p>
                              <div class="infoboxnote" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GUID-A9FFF8B4-5144-40E0-B701-6D2154BAD23D">
                                 <p class="notep1">Note:</p>
                                 <p>If an error is returned during PDB creation, then the PDB being created might be in an <code class="codeph">UNUSABLE</code> state. You can check the PDB state by querying the <code class="codeph">CDB_PDBS</code> or <code class="codeph">DBA_PDBS</code> view, and you can learn more about PDB creation errors by checking the alert log. An unusable PDB can only be dropped, and it must be dropped before a PDB with the same name as the unusable PDB can be created.
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>Open the new PDB in read/write mode.</p>
                              <p>You must open the new PDB in read/write mode for Oracle Database to complete the integration of the new PDB into the CDB. An error is returned if you attempt to open the PDB in read-only mode. After the PDB is opened in read/write mode, its status is <code class="codeph">NORMAL</code>.
                              </p>
                           </li>
                           <li>
                              <p>Back up the PDB.</p>
                              <p>A PDB cannot be recovered unless it is backed up.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GUID-7AADBFE0-C629-4ED2-8C6B-2DCAE9B281B9">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="administering-pdbs-with-sql-plus.html#GUID-80301677-C50F-45DE-AF6C-35492F11A49F" title="You can refresh a PDB that was created as a refreshable clone.">Refreshing a PDB</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="You can modify the open mode of a PDB by using the ALTER PLUGGABLE DATABASE SQL statement or the SQL*Plus STARTUP command.">Modifying the Open Mode of One or More PDBs</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../bradv/backing-up-database.html#BRADV428" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about backing up a PDB
                              </p>
                           </li>
                           <li>
                              <p><a href="../sbydb/creating-oracle-data-guard-physical-standby.html#SBYDB-GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> to learn more about plugging in a PDB in an Oracle Data Guard environment
                              </p>
                           </li>
                           <li>
                              <p><a href="../nlspg/choosing-character-set.html#NLSPG1035" target="_blank"><span><cite>Oracle Database Globalization Support Guide</cite></span></a> to learn about the requirements for the compatibility of character sets
                              </p>
                           </li>
                           <li>
                              <p><a href="../refrn/PDB_FILE_NAME_CONVERT.html#REFRN10322" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079" title="You can clone a local PDB by running a CREATE PLUGGABLE DATABASE statement, and specifying a database link to the remote PDB in the FROM statement.">Cloning a Remote PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN14167"></a><div class="props_rev_3"><a id="GUID-AF27B6CB-A1A9-4AFD-B45B-2DA92C972396" name="GUID-AF27B6CB-A1A9-4AFD-B45B-2DA92C972396"></a><h4 id="MULTI-GUID-AF27B6CB-A1A9-4AFD-B45B-2DA92C972396" class="sect4"><span class="enumeration_section">7.3.3 </span>After Cloning a Remote PDB
                  </h4>
                  <div>
                     <p>Certain rules regarding users and tablespaces apply after cloning a remote PDB.</p>
                     <p>The following applies after cloning a remote PDB:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Users in the new PDB who used the default temporary tablespace of the source PDB use the default temporary tablespace of the new PDB. Users who used nondefault temporary tablespaces in the PDB continue to use the same local temporary tablespaces in the cloned PDB.</p>
                        </li>
                        <li>
                           <p>User-created common user accounts that existed in the source CDB but not in the target CDB do not have privileges granted commonly. However, if the target CDB has a common user account with the same name as a common user account in the PDB, then the latter is linked to the former and has the privileges granted to this common user account in the target CDB.</p>
                           <p>If the cloned or plugged-in PDB has a common user account that does not exist in the target CDB, and if this user does not own objects in the PDB, then Oracle Database drops the user during the synchronization step; otherwise, the user account is locked in the target PDB. You have the following options regarding locked accounts:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Close the PDB, connect to the root, and create a common user account with the same name. When the PDB is opened in read/write mode, differences in roles and privileges granted commonly to the user account are resolved, and you can unlock the account. Privileges and roles granted locally to the user account remain unchanged during this process.</p>
                              </li>
                              <li>
                                 <p>Create a new local user account in the PDB and use Data Pump to export/import the locked user's data into the new local user's schema.</p>
                              </li>
                              <li>
                                 <p>Leave the user account locked.</p>
                              </li>
                              <li>
                                 <p>Drop the user account.</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-AF27B6CB-A1A9-4AFD-B45B-2DA92C972396__GUID-6D44C122-8526-40B4-B99F-F1848E0AEB21">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p> <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-B34BC55B-C734-4799-A54A-0BB04073D9D0" title="A tablespace is a logical storage container for database objects, such as tables and indexes, that consume storage space.">About Managing Tablespaces in a CDB</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../dbseg/managing-security-for-oracle-database-users.html#DBSEG832" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> for information about creating a local user
                              </p>
                           </li>
                           <li>
                              <p><a href="../sutil/oracle-data-pump-overview.html#SUTIL4334" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> for information about using Oracle Data Pump with a CDB
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079" title="You can clone a local PDB by running a CREATE PLUGGABLE DATABASE statement, and specifying a database link to the remote PDB in the FROM statement.">Cloning a Remote PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-5A9E81ED-D9BF-4551-A5FC-3154DC7223C8" name="GUID-5A9E81ED-D9BF-4551-A5FC-3154DC7223C8"></a><h4 id="MULTI-GUID-5A9E81ED-D9BF-4551-A5FC-3154DC7223C8" class="sect4"><span class="enumeration_section">7.3.4 </span>Cloning a Remote PDB: Examples
                  </h4>
                  <div>
                     <p>These examples clone a remote PDB or non-CDB given different factors.</p>
                     <p>In each example, the root to which the new PDB belongs depends on the current container when the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement is run:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>When the current container is the CDB root, the new PDB is created in the CDB root.</p>
                        </li>
                        <li>
                           <p>When the current container is an application root in an application container, the new PDB is created as an application PDB in the application root.</p>
                        </li>
                     </ul>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-EC6660DC-14A8-4589-A2E4-71C1987E2C93">Cloning a Remote PDB Using No Clauses: Example</a><br>This example clones a remote source PDB named <code class="codeph">pdb1</code> to a target PDB named <code class="codeph">pdb2</code> given different factors. 
                        </li>
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6">Cloning a Remote PDB Using DBCA: Example</a><br>This example uses DBCA to clone a PDB named <code class="codeph">pdb1</code> from a remote CDB to the local CDB, where it will be renamed <code class="codeph">clonepdb1</code>.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079" title="You can clone a local PDB by running a CREATE PLUGGABLE DATABASE statement, and specifying a database link to the remote PDB in the FROM statement.">Cloning a Remote PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-EC6660DC-14A8-4589-A2E4-71C1987E2C93" name="GUID-EC6660DC-14A8-4589-A2E4-71C1987E2C93"></a><h5 id="MULTI-GUID-EC6660DC-14A8-4589-A2E4-71C1987E2C93" class="sect5"><span class="enumeration_section">7.3.4.1 </span>Cloning a Remote PDB Using No Clauses: Example
                     </h5>
                     <div>
                        <p>This example clones a remote source PDB named <code class="codeph">pdb1</code> to a target PDB named <code class="codeph">pdb2</code> given different factors. 
                        </p>
                        <div class="section">
                           <p>This example assumes the following factors:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The database link name to the remote PDB is <code class="codeph">pdb1_link</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">FILE_NAME_CONVERT</code> clause and the <code class="codeph">CREATE_FILE_DEST</code> clause are not required.
                                 </p>
                                 <p>Either Oracle Managed Files is enabled, or the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter is set. The files will be copied to a new location based on the Oracle Managed Files configuration or the initialization parameter setting.
                                 </p>
                              </li>
                              <li>
                                 <p>Storage limits are not required for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is not required.
                                 </p>
                              </li>
                              <li>
                                 <p>There is no file with the same name as the new temp file that will be created in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is not required.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-EC6660DC-14A8-4589-A2E4-71C1987E2C93__GUID-FDD7C76D-BF5E-4BB6-A115-85F1BBD653B4">
                           <p>The following statement clones the <code class="codeph">pdb2</code> PDB from the <code class="codeph">pdb1</code> remote PDB:
                           </p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE pdb2 FROM pdb1@pdb1_link;
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-EC6660DC-14A8-4589-A2E4-71C1987E2C93__GUID-99F70C52-970F-462D-8926-05F79107ED58">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../admin/using-oracle-managed-files.html#ADMIN-GUID-4A3C4616-0D81-4BBA-8EAD-FCAA8AD5C15A" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about Oracle Managed Files
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../refrn/PDB_FILE_NAME_CONVERT.html#REFRN10322" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-5A9E81ED-D9BF-4551-A5FC-3154DC7223C8" title="These examples clone a remote PDB or non-CDB given different factors.">Cloning a Remote PDB: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6" name="GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6"></a><h5 id="MULTI-GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6" class="sect5"><span class="enumeration_section">7.3.4.2 </span>Cloning a Remote PDB Using DBCA: Example
                     </h5>
                     <div>
                        <p>This example uses DBCA to clone a PDB named <code class="codeph">pdb1</code> from a remote CDB to the local CDB, where it will be renamed <code class="codeph">clonepdb1</code>.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6__GUID-EF2E206B-2BBD-411A-8688-D89797242B95">Prerequisites</p>
                           <p>This scenario assumes the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The user in the local database has the <code class="codeph">CREATE PLUGGABLE DATABASE</code> privilege in the root container.
                                 </p>
                              </li>
                              <li>
                                 <p>The remote CDB is in local undo mode.</p>
                              </li>
                              <li>
                                 <p>The remote and local CDBs are in <code class="codeph">ARCHIVELOG</code> mode.
                                 </p>
                              </li>
                              <li>
                                 <p>The common user in the remote CDB to whom the database link connects has the <code class="codeph">CREATE PLUGGABLE DATABASE</code>, <code class="codeph">SESSION</code>, and <code class="codeph">SYSOPER</code> privilege. 
                                 </p>
                              </li>
                              <li>
                                 <p>The local and remote CDBs have the same options installed.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6__GUID-E9EC94DF-30F4-4955-9971-DA9AE9F0345D">Assumptions</p>
                           <p>This scenario assumes the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You are running DBCA on the host of the CDB that will contain the cloned PDB. The local CDB is named <code class="codeph">loccdb1</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The remote (source) CDB is named <code class="codeph">remcdb1</code> and resides on host <code class="codeph">remcdb1host</code>. The instance name for the remote CDB is <code class="codeph">reminst</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The remote PDB, which is the PDB to be cloned, is named <code class="codeph">rempdb1</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The common user <code class="codeph">c##adminuser_remcdb1</code> resides in <code class="codeph">remcdb1</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The administrative user <code class="codeph">locSYS</code> has <code class="codeph">SYSDBA</code> privileges on <code class="codeph">loccdb1</code>, which is the CDB to which the PDB is being cloned.
                                 </p>
                              </li>
                              <li>
                                 <p>The administrative user <code class="codeph">remSYS</code> has <code class="codeph">SYSDBA</code> privileges on <code class="codeph">remcdb1</code>, which is the CDB that contains the PDB to be cloned.
                                 </p>
                              </li>
                              <li>
                                 <p>After cloning to <code class="codeph">loccdb1</code>, the PDB will be renamed <code class="codeph">clonepdb1</code>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6__GUID-AB41D72C-6BC2-4BA3-AC9B-8AE4B3FC5BE7">
                           <p>This following silent command clones <code class="codeph">rempdb1</code> to <code class="codeph">loccdb1</code>:
                           </p><pre class="pre codeblock"><code>./dbca -silent 
  -createPluggableDatabase
  -createFromRemotePDB
  -sourceDB <span class="bold">remcdb1</span>  
  -remotePDBName <span class="bold">rempdb1</span> 
  -remoteDBConnString <span class="bold">remcdb1host:1521/reminst</span> 
  -remoteDBSYSDBAUserName <span class="bold">remSYS</span> 
      -remoteDBSYSDBAUserPassword <span class="italic">remsyspwd</span> 
  -dbLinkUsername <span class="bold">c##adminuser_remcdb1</span> 
      -dbLinkUserPassword <span class="italic">pwd4dblinkusr</span> 
  -sysDBAUserName <span class="bold">locSYS</span> 
      -sysDBAPassword <span class="italic">locsyspwd</span>
  -pdbName <span class="bold">clonepdb1</span></code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6__GUID-EFC6AA59-AE8E-4D34-9560-14F68CB9C456">
                           <p class="notep1">See Also:</p>
                           <p><a href="../admin/creating-and-configuring-an-oracle-database.html#GUID-5DD346B8-4404-48F1-A811-F39D739E4D05" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for syntax and semantics of DBCA commands
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-5A9E81ED-D9BF-4551-A5FC-3154DC7223C8" title="These examples clone a remote PDB or non-CDB given different factors.">Cloning a Remote PDB: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618" name="GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618"></a><h3 id="MULTI-GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618" class="sect3"><span class="enumeration_section">7.4 </span>Cloning a Non-CDB
               </h3>
               <div>
                  <p>The procedure for cloning a non-CDB is very similar to the procedure for cloning a remote PDB.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-4E66AD07-FF5A-45B5-98B8-0B83B846BA26">About Cloning a Non-CDB</a><br>When the source is a non-CDB, you must specify a database link to the non-CDB in the <code class="codeph">FROM</code> clause. 
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875">Cloning a Non-CDB: Basic Steps</a><br>You can create a PDB by cloning a non-CDB.
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-3433B3BF-372F-4A4A-988E-919E76C7F2A6">Cloning a Remote Non-CDB: Example</a><br>This example creates a new PDB by cloning a remote source non-CDB named <code class="codeph">mydb</code> to a target PDB named <code class="codeph">pdb2</code> given different factors. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB.">Cloning a PDB or Non-CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-4E66AD07-FF5A-45B5-98B8-0B83B846BA26" name="GUID-4E66AD07-FF5A-45B5-98B8-0B83B846BA26"></a><h4 id="MULTI-GUID-4E66AD07-FF5A-45B5-98B8-0B83B846BA26" class="sect4"><span class="enumeration_section">7.4.1 </span>About Cloning a Non-CDB
                  </h4>
                  <div>
                     <p>When the source is a non-CDB, you must specify a database link to the non-CDB in the <code class="codeph">FROM</code> clause. 
                     </p>
                     <p>The following figure illustrates how this technique creates a new PDB when the source is a remote non-CDB.</p>
                     <div class="figure" id="GUID-4E66AD07-FF5A-45B5-98B8-0B83B846BA26__CEGJIEAI">
                        <p class="titleinfigure">Figure 7-4 Creating a PDB by Cloning a Non-CDB</p><img src="img/admin108.png" alt="Description of Figure 7-4 follows" title="Description of Figure 7-4 follows" longdesc="img_text/admin108.html"><br><a href="img_text/admin108.html">Description of "Figure 7-4 Creating a PDB by Cloning a Non-CDB"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618" title="The procedure for cloning a non-CDB is very similar to the procedure for cloning a remote PDB.">Cloning a Non-CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875" name="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875"></a><h4 id="MULTI-GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875" class="sect4"><span class="enumeration_section">7.4.2 </span>Cloning a Non-CDB: Basic Steps
                  </h4>
                  <div>
                     <p>You can create a PDB by cloning a non-CDB.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GUID-49986022-D198-415E-9ED3-05C75E597C4E">General Prerequisites</p>
                        <p>The following prerequisites must be met:</p>
                        <ul style="list-style-type: disc;" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__UL_BPR_ZV2_YFB">
                           <li>
                              <p>Complete the prerequisites described in <span class="q">"<a href="overview-of-pdb-creation.html#GUID-B26D56E1-B958-444F-864C-8AFDFF1566A6" title="Before creating a PDB, you must meet certain prerequisites.">General Prerequisites for PDB Creation</a>"</span>.
                              </p>
                              <div class="infoboxnote" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GUID-96A551CD-5402-484F-AAF1-B1E55712C8E5">
                                 <p class="notep1">Note:</p>
                                 <p>If you want to be able to recover the new PDB using backups of the source non-CDB, then you <span class="italic">must</span> use <code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code> before cloning.
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>The current user must have the <code class="codeph">CREATE PLUGGABLE DATABASE</code> system privilege in the root of the CDB that will contain the target PDB. 
                              </p>
                           </li>
                           <li>
                              <p>The source and target platforms must meet the following requirements:</p>
                              <ul style="list-style-type: disc;" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__UL_CPR_ZV2_YFB">
                                 <li>
                                    <p>They must have the same endianness.</p>
                                 </li>
                                 <li>
                                    <p>The database options installed on the source platform must be the same as, or a subset of, the database options installed on the target platform.</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>The CDB and the non-CDB must be running Oracle Database 12c Release 1 (12.1.0.2) or later.</p>
                           </li>
                           <li>
                              <p>The CDB and the non-CDB must be running the same Oracle Database release.</p>
                           </li>
                           <li>
                              <p>The data block size of the newly created PDB must match the CDB.</p>
                           </li>
                           <li>
                              <p>If the non-CDB is in <code class="codeph">NOARCHIVELOG</code> mode, then it must be open in read-only mode. If the non-CDB is in <code class="codeph">ARCHIVELOG</code> mode, then it can be open read-only or read/write.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GUID-48DDDC51-F206-4233-96C3-870BC789BB57">Prerequisites for Character Sets</p>
                        <ul style="list-style-type: disc;" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__UL_MHL_1W2_YFB">
                           <li>
                              <p>If the character set of the CDB is not AL32UTF8, then the source and target must have compatible character sets and national character sets. If the character set of the CDB to which the PDB is being cloned is AL32UTF8, then this requirement does not apply. </p>
                           </li>
                           <li>
                              <p>If you are creating an application PDB, then the application PDB must have the same character set and national character set as the application container.</p>
                              <p>If the database character set of the CDB is AL32UTF8, then the character set and national character set of the application container can different from the CDB. However, all application PDBs in an application container must have same character set and national character set, matching that of the application container.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GENERALPREREQUISITES-EFA2D3FB">Prerequisites for the Database Link</p>
                        <p>The following prerequisites must be met:</p>
                        <ul style="list-style-type: disc;" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__UL_X4R_BW2_YFB">
                           <li>
                              <p>A database link must enable a connection from the target CDB to the source CDB. The database link can connect to either the root of the CDB, to an application PDB if the source is an application PDB, or to the PDB.</p>
                           </li>
                           <li>
                              <p>The user that the database link connects with must have the <code class="codeph">CREATE PLUGGABLE DATABASE</code> system privilege.
                              </p>
                           </li>
                           <li>
                              <p>If the database link connects to the root in the CDB of the source PDB, then the user that the database link connects with must be a common user.</p>
                           </li>
                           <li>
                              <p>In an Oracle Data Guard environment, if you are performing a remote clone of a PDB into a primary CDB, then on the standby CDB set the <code class="codeph">STANDBY_PDB_SOURCE_FILE_DBLINK</code> initialization parameter. This parameter specifies the name of the database link used in <code class="codeph">CREATE PLUGGABLE DATABASE ... FROM <span class="codeinlineitalic">dblink</span></code>. The standby CDB attempts to copy the data files from the source PDB referenced in the database link, but only if the source PDB is open in read-only mode. Otherwise, you must copy data files to the Oracle Managed Files location on the standby CDB.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GUID-C4A3DE1C-CC50-46D7-9D92-4BFF8D01A49E">To clone a remote non-CDB:</p>
                        <ol id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__OL_CXK_CW2_YFB">
                           <li>
                              <p>In SQL*Plus, ensure that the current container is the root of the target CDB or the application root of the target application container.</p>
                           </li>
                           <li>
                              <p>Run the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement, and specify the source non-CDB in the <code class="codeph">FROM</code> clause. Specify other clauses when required.
                              </p>
                              <p>After you create the PDB, it is in mounted mode, and its status is <code class="codeph">NEW</code>. You can view the open mode of a PDB by querying the <code class="codeph">OPEN_MODE</code> column in the <code class="codeph">V$PDBS</code> view. You can view the status of a PDB by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">CDB_PDBS</code> or <code class="codeph">DBA_PDBS</code> view.
                              </p>
                              <p>A new default service is created for the PDB. The service has the same name as the PDB and can be used to access the PDB. Oracle Net Services must be configured properly for clients to access this service.</p>
                              <div class="infoboxnote" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GUID-A9FFF8B4-5144-40E0-B701-6D2154BAD23D">
                                 <p class="notep1">Note:</p>
                                 <p>If an error is returned during PDB creation, then the PDB being created might be in an <code class="codeph">UNUSABLE</code> state. You can check the PDB state by querying the <code class="codeph">CDB_PDBS</code> or <code class="codeph">DBA_PDBS</code> view, and you can learn more about PDB creation errors by checking the alert log. An unusable PDB can only be dropped, and it must be dropped before a PDB with the same name as the unusable PDB can be created.
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>Run the <code class="codeph"><span class="codeinlineitalic">ORACLE_HOME</span>/rdbms/admin/noncdb_to_pdb.sql</code> script. This script must be run before the PDB can be opened for the first time.
                              </p>
                              <p>To run the <code class="codeph">noncdb_to_pdb.sql</code> script, complete the following steps:
                              </p>
                              <ol type="a" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__OL_DXK_CW2_YFB">
                                 <li>
                                    <p>Set the container to the newly created PDB.</p>
                                    <p>The current user must have <code class="codeph">SYSDBA</code> administrative privilege, and the privilege must be either commonly granted or locally granted in the PDB. The user must exercise the privilege using <code class="codeph">AS SYSDBA</code> at connect time.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Run the <code class="codeph">noncdb_to_pdb.sql</code> script:
                                    </p><pre class="pre codeblock"><code>@$ORACLE_HOME/rdbms/admin/noncdb_to_pdb.sql
</code></pre></li>
                              </ol>
                              <p>The script opens the PDB, performs changes, and then closes the PDB.</p>
                           </li>
                           <li>
                              <p>Open the new PDB in read/write mode.</p>
                              <p>You must open the new PDB in read/write mode for Oracle Database to complete the integration of the new PDB into the CDB. An error is returned if you attempt to open the PDB in read-only mode. After the PDB is opened in read/write mode, its status is <code class="codeph">NORMAL</code>.
                              </p>
                           </li>
                           <li>
                              <p>Back up the PDB.</p>
                              <p>A PDB cannot be recovered unless it is backed up.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GUID-7AADBFE0-C629-4ED2-8C6B-2DCAE9B281B9">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__UL_EXK_CW2_YFB">
                           <li>
                              <p><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1928653.1" target="_blank">My Oracle Support Note 1928653.1</a> for a detailed example of cloning a PDB from a non-CDB
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="administering-pdbs-with-sql-plus.html#GUID-80301677-C50F-45DE-AF6C-35492F11A49F" title="You can refresh a PDB that was created as a refreshable clone.">Refreshing a PDB</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="You can modify the open mode of a PDB by using the ALTER PLUGGABLE DATABASE SQL statement or the SQL*Plus STARTUP command.">Modifying the Open Mode of One or More PDBs</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../bradv/backing-up-database.html#BRADV428" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about backing up a PDB
                              </p>
                           </li>
                           <li>
                              <p><a href="../nlspg/choosing-character-set.html#NLSPG1035" target="_blank"><span><cite>Oracle Database Globalization Support Guide</cite></span></a> to learn about the requirements for the compatibility of character sets
                              </p>
                           </li>
                           <li>
                              <p><a href="../refrn/PDB_FILE_NAME_CONVERT.html#REFRN10322" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618" title="The procedure for cloning a non-CDB is very similar to the procedure for cloning a remote PDB.">Cloning a Non-CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-3433B3BF-372F-4A4A-988E-919E76C7F2A6" name="GUID-3433B3BF-372F-4A4A-988E-919E76C7F2A6"></a><h4 id="MULTI-GUID-3433B3BF-372F-4A4A-988E-919E76C7F2A6" class="sect4"><span class="enumeration_section">7.4.3 </span>Cloning a Remote Non-CDB: Example
                  </h4>
                  <div>
                     <p>This example creates a new PDB by cloning a remote source non-CDB named <code class="codeph">mydb</code> to a target PDB named <code class="codeph">pdb2</code> given different factors. 
                     </p>
                     <div class="section">
                        <p>This example assumes the following factors:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The database link name to the remote non-CDB is <code class="codeph">mydb_link</code>.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">FILE_NAME_CONVERT</code> clause and the <code class="codeph">CREATE_FILE_DEST</code> clause are not required.
                              </p>
                              <p>Either Oracle Managed Files is enabled, or the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter is set. The files will be copied to a new location based on the Oracle Managed Files configuration or the initialization parameter setting.
                              </p>
                           </li>
                           <li>
                              <p>Storage limits are not required for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is not required.
                              </p>
                           </li>
                           <li>
                              <p>There is no file with the same name as the new temp file that will be created in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is not required.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3433B3BF-372F-4A4A-988E-919E76C7F2A6__GUID-82088866-3794-4F8B-98ED-8E0C0DC11680">
                        <p>The following statement creates the <code class="codeph">pdb2</code> PDB from the remote non-CDB named <code class="codeph">mydb</code>:
                        </p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE pdb2 FROM mydb@mydb_link;
</code></pre><p>When the source database is a non-CDB, you can substitute <code class="codeph">NON$CDB</code> for the name of the non-CDB. For example, the following statement is equivalent to the previous example:
                        </p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE pdb2 FROM NON$CDB@mydb_link;
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3433B3BF-372F-4A4A-988E-919E76C7F2A6__GUID-99F70C52-970F-462D-8926-05F79107ED58">
                        <p class="notep1">See Also:</p>
                        <p><a href="../admin/using-oracle-managed-files.html#ADMIN-GUID-4A3C4616-0D81-4BBA-8EAD-FCAA8AD5C15A" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about Oracle Managed Files
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618" title="The procedure for cloning a non-CDB is very similar to the procedure for cloning a remote PDB.">Cloning a Non-CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-C476B273-469B-4999-8637-A6BA1BD6300A" name="GUID-C476B273-469B-4999-8637-A6BA1BD6300A"></a><h3 id="MULTI-GUID-C476B273-469B-4999-8637-A6BA1BD6300A" class="sect3"><span class="enumeration_section">7.5 </span>About Refreshable Clone PDBs
               </h3>
               <div>
                  <p>The <code class="codeph">CREATE&nbsp;PLUGGABLE&nbsp;DATABASE ... REFRESH MODE</code> statement clones a source PDB and configures the clone to be refreshable. Refreshing the clone PDB updates it with redo accumulated since the last redo log apply.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-0D45FD7D-AB4A-4120-9D57-DF5D8326436B">Purpose of Refreshable Clone PDBs</a><br>The cloning operation for production PDBs can take a long time.
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-DB70AAC5-A426-4991-8D84-697790AA9A11">Automatic and Manual Refresh Modes</a><br>You can configure the clone PDB to refresh automatically at set intervals, or you can refresh it manually with the <code class="codeph">ALTER PLUGGABLE DATABASE REFRESH</code> statement. 
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-30E0CC68-4F4C-4E58-9451-6390406D90A1">Requirements for Refreshable Clone PDBs</a><br>Creation of a refreshable clone PDB requires a database link. The database link can point to the same CDB or a different CDB.
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-2FF464EE-706C-4FE1-9E54-31312550BED6">Creating a Refreshable Clone PDB: Scenario</a><br>This scenario creates a refreshable clone named <code class="codeph">pdb1_ref_cln</code> from a remote PDB named <code class="codeph">pdb1</code>. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB.">Cloning a PDB or Non-CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-0D45FD7D-AB4A-4120-9D57-DF5D8326436B" name="GUID-0D45FD7D-AB4A-4120-9D57-DF5D8326436B"></a><h4 id="MULTI-GUID-0D45FD7D-AB4A-4120-9D57-DF5D8326436B" class="sect4"><span class="enumeration_section">7.5.1 </span>Purpose of Refreshable Clone PDBs
                  </h4>
                  <div>
                     <p>The cloning operation for production PDBs can take a long time.</p>
                     <p>If PDBs are cloned infrequently to avoid a drag on the system, then the clone data becomes stale. A refreshable clone PDB solves this problem. When a refreshable clone is stale, you can quickly refresh it with recent redo. A typical practice is to maintain a “golden master” refreshable clone of a production PDB, and then take snapshot clones of the golden master for development and testing.</p>
                     <p>You can reverse the roles for source and clone PDBs using an <code class="codeph">ALTER PLUGGABLE DATABASE ... SWITCHOVER</code> statement. This capability is useful in the following situations:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Planned switchover</p>
                           <p>The CDB hosting the source PDB may experience significantly more overhead than the CDB hosting the clone PDB. To achieve load balancing, you can reverse the roles, making the clone the new source PDB, and the source PDB the new clone.</p>
                        </li>
                        <li>
                           <p>Unplanned switchover</p>
                           <p>The source PDB may suffer an unplanned failure. In this case, you can make the clone PDB the new source PDB, and resume normal operations.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-0D45FD7D-AB4A-4120-9D57-DF5D8326436B__GUID-AADE6323-617E-47BD-9391-EC3FEE1BD970">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="administering-pdbs-with-sql-plus.html#GUID-666252E7-BE9E-4D59-B8A4-86F80A7B186A" title="A refreshable clone PDB is a read-only clone that can periodically synchronize with its source PDB.">Managing Refreshable Clone PDBs</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/ALTER-PLUGGABLE-DATABASE.html#SQLRF-GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about <code class="codeph">ALTER PLUGGABLE DATABASE ... SWITCHOVER</code></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-C476B273-469B-4999-8637-A6BA1BD6300A" title="The CREATE&nbsp;PLUGGABLE&nbsp;DATABASE ... REFRESH MODE statement clones a source PDB and configures the clone to be refreshable. Refreshing the clone PDB updates it with redo accumulated since the last redo log apply.">About Refreshable Clone PDBs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-DB70AAC5-A426-4991-8D84-697790AA9A11" name="GUID-DB70AAC5-A426-4991-8D84-697790AA9A11"></a><h4 id="MULTI-GUID-DB70AAC5-A426-4991-8D84-697790AA9A11" class="sect4"><span class="enumeration_section">7.5.2 </span>Automatic and Manual Refresh Modes
                  </h4>
                  <div>
                     <p>You can configure the clone PDB to refresh automatically at set intervals, or you can refresh it manually with the <code class="codeph">ALTER PLUGGABLE DATABASE REFRESH</code> statement. 
                     </p>
                     <p>The <code class="codeph">REFRESH MODE</code> clause is supported only in a <code class="codeph">CREATE PLUGGABLE DATABASE ... FROM</code> statement. You can use this clause to specify one of the following options:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Specify <code class="codeph">REFRESH MODE NONE</code>, the default, to create a PDB that is not refreshable.
                           </p>
                           <p>You can change a refreshable clone PDB into an ordinary PDB by including the <code class="codeph">REFRESH MODE NONE</code> clause in an <code class="codeph">ALTER PLUGGABLE DATABASE</code> statement and then opening the PDB in read/write mode. You cannot change an ordinary PDB into a refreshable clone PDB. After a refreshable clone PDB is converted to an ordinary PDB, you cannot change it back into a refreshable clone PDB.
                           </p>
                        </li>
                        <li>
                           <p>Specify <code class="codeph">REFRESH MODE MANUAL</code> to create a refreshable PDB that must be refreshed manually.
                           </p>
                        </li>
                        <li>
                           <p>Specify <code class="codeph">REFRESH MODE EVERY <span class="codeinlineitalic">number_of_minutes</span> MINUTES</code> to create a refreshable PDB that is refreshed automatically after the specified number of minutes has passed. A refreshable PDB that uses automatic refresh can also be refreshed manually.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-DB70AAC5-A426-4991-8D84-697790AA9A11__GUID-D010F47C-77A9-4589-AF7C-8DAB7ADEA297">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When you create a refreshable PDB, you can set the <code class="codeph">REMOTE_RECOVERY_FILE_DEST</code> initialization parameter in the PDB. This initialization parameter specifies a directory from which to read archive log files during refresh operations if the source PDB is not available over its database link.
                              </p>
                           </li>
                           <li>
                              <p>If new data files are created in the source PDB, then the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter must be set in the CDB to convert the data file paths from the source PDB to the clone PDB.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="example" id="GUID-DB70AAC5-A426-4991-8D84-697790AA9A11__GUID-A5EAF9C8-DA70-4EFC-B78C-3DD227F864DB">
                        <p class="titleinexample">Example 7-1 A REFRESH MODE Clause That Specifies Automatic Refresh</p>
                        <p>This refresh mode clause specifies that a refreshable PDB is refreshed automatically every two hours (120 minutes):</p><pre class="pre codeblock"><code>REFRESH MODE EVERY 120 MINUTES</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-DB70AAC5-A426-4991-8D84-697790AA9A11__GUID-A4E51717-37C4-498F-BB95-A8983D8D851D">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="cloning-a-pdb.html#GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F" title="You can create a PDB by cloning a remote PDB. After the cloning operation, the source and the target PDB are in different locations.">Cloning a Remote PDB: Basic Steps</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="administering-pdbs-with-sql-plus.html#GUID-80301677-C50F-45DE-AF6C-35492F11A49F" title="You can refresh a PDB that was created as a refreshable clone.">Refreshing a PDB</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-C476B273-469B-4999-8637-A6BA1BD6300A" title="The CREATE&nbsp;PLUGGABLE&nbsp;DATABASE ... REFRESH MODE statement clones a source PDB and configures the clone to be refreshable. Refreshing the clone PDB updates it with redo accumulated since the last redo log apply.">About Refreshable Clone PDBs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-30E0CC68-4F4C-4E58-9451-6390406D90A1" name="GUID-30E0CC68-4F4C-4E58-9451-6390406D90A1"></a><h4 id="MULTI-GUID-30E0CC68-4F4C-4E58-9451-6390406D90A1" class="sect4"><span class="enumeration_section">7.5.3 </span>Requirements for Refreshable Clone PDBs
                  </h4>
                  <div>
                     <p>Creation of a refreshable clone PDB requires a database link. The database link can point to the same CDB or a different CDB.</p>
                     <p>A refreshable clone PDB must be in either of the following states:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Closed</p>
                           <p>A refreshable PDB must be closed when a refresh is performed. If it is not closed when automatic refresh is attempted, then the refresh is deferred until the next scheduled refresh. If it is not closed when a user attempts to perform manual refresh, then an error is reported.</p>
                        </li>
                        <li>
                           <p>Open in read-only mode</p>
                           <p>The refreshable PDB must be kept in read-only mode to prevent out-of-sync changes on the refreshable PDB which do not occur on the source PDB. The refreshable PDB is intended to serve as a clone master and as such must accurately reflect the source PDB at the refreshed point in time.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-C476B273-469B-4999-8637-A6BA1BD6300A" title="The CREATE&nbsp;PLUGGABLE&nbsp;DATABASE ... REFRESH MODE statement clones a source PDB and configures the clone to be refreshable. Refreshing the clone PDB updates it with redo accumulated since the last redo log apply.">About Refreshable Clone PDBs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6" name="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6"></a><h4 id="MULTI-GUID-2FF464EE-706C-4FE1-9E54-31312550BED6" class="sect4"><span class="enumeration_section">7.5.4 </span>Creating a Refreshable Clone PDB: Scenario
                  </h4>
                  <div>
                     <p>This scenario creates a refreshable clone named <code class="codeph">pdb1_ref_cln</code> from a remote PDB named <code class="codeph">pdb1</code>. 
                     </p>
                     <div class="section">
                        <p>The clone PDB is a copy of the source PDB. You can refresh the clone PDB periodically to update it with any changes made to the source PDB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6__GUID-B4C916E6-7689-49C3-8664-3657241DE4E1">Assumptions</p>
                        <p>This scenario assumes the following factors:</p>
                        <ul style="list-style-type: disc;" id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6__UL_TCK_PGM_YFB">
                           <li>
                              <p>The database link name to the remote PDB is <code class="codeph">pdb1_link</code>.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">FILE_NAME_CONVERT</code> clause and the <code class="codeph">CREATE_FILE_DEST</code> clause are not required.
                              </p>
                              <p>Either Oracle Managed Files is enabled, or the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter is set. The files will be copied to a new location based on the Oracle Managed Files configuration or the initialization parameter setting.
                              </p>
                           </li>
                           <li>
                              <p>Storage limits are not required for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is not required.
                              </p>
                           </li>
                           <li>
                              <p>There is no file with the same name as the new temp file that will be created in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is not required.
                              </p>
                           </li>
                           <li>
                              <p>The refreshable clone will be refreshed automatically every 60 minutes.</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6__GUID-641958F6-1204-4AD1-8D6E-564B3399CA9F">
                           <p class="notep1">Note:</p>
                           <p>To create a refreshable PDB, the source PDB must be in <code class="codeph">ARCHIVELOG</code> mode and local undo mode.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6__GUID-AEEDCC90-BBAD-4210-85CA-4D118A3B7836">To create a refreshable clone PDB:</p>
                        <ol id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6__OL_PJT_TGM_YFB">
                           <li>
                              <p>In SQL*Plus, ensure that the current container is the CDB root or an application root.</p>
                              <p>When the current container is the CDB root, the PDB is created in the CDB. When the current container is an application root, the application PDB is created in the application container.</p>
                           </li>
                           <li>
                              <p>Execute the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement.
                              </p>
                              <p>The following statement creates <code class="codeph">pdb1_ref_cln</code> from <code class="codeph">pdb1</code>:
                              </p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE pdb1_ref_cln FROM pdb1@pdb1_link REFRESH MODE EVERY 60 MINUTES;
</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6__GUID-99F70C52-970F-462D-8926-05F79107ED58">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="administering-pdbs-with-sql-plus.html#GUID-666252E7-BE9E-4D59-B8A4-86F80A7B186A" title="A refreshable clone PDB is a read-only clone that can periodically synchronize with its source PDB.">Managing Refreshable Clone PDBs</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-C476B273-469B-4999-8637-A6BA1BD6300A" title="The CREATE&nbsp;PLUGGABLE&nbsp;DATABASE ... REFRESH MODE statement clones a source PDB and configures the clone to be refreshable. Refreshing the clone PDB updates it with redo accumulated since the last redo log apply.">About Refreshable Clone PDBs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-22118625-3157-4C38-8A88-79A561A3E6ED" name="GUID-22118625-3157-4C38-8A88-79A561A3E6ED"></a><h3 id="MULTI-GUID-22118625-3157-4C38-8A88-79A561A3E6ED" class="sect3"><span class="enumeration_section">7.6 </span>Cloning PDBs from PDB Snapshots
               </h3>
               <div>
                  <p>You can create PDBs from PDB snapshots by executing the <code class="codeph">CREATE PLUGGABLE DATABASE … USING SNAPSHOT</code> statement.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D">About Cloning PDBs from PDB Snapshots</a><br>A <strong class="term">PDB snapshot</strong> is a database-managed, point-in-time copy of a PDB. A <strong class="term">snapshot clone PDB</strong> is a PDB created from a snapshot.
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-539A1F68-27B9-4802-95AC-2C721347296C">Cloning a PDB from a PDB Snapshot: Scenario</a><br>This scenario creates a new PDB from a PDB snapshot by executing <code class="codeph">CREATE PLUGGABLE DATABASE ... USING SNAPSHOT</code>.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB.">Cloning a PDB or Non-CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D" name="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D"></a><h4 id="MULTI-GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D" class="sect4"><span class="enumeration_section">7.6.1 </span>About Cloning PDBs from PDB Snapshots
                  </h4>
                  <div>
                     <p>A <strong class="term">PDB snapshot</strong> is a database-managed, point-in-time copy of a PDB. A <strong class="term">snapshot clone PDB</strong> is a PDB created from a snapshot.
                     </p>
                     <p>Starting in <span>Oracle Database 19c</span>, the behavior of PDB snapshots depends on the setting of the <code class="codeph">CLONEDB</code> initialization parameter:
                     </p>
                     <ul style="list-style-type: disc;" id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__UL_G4J_VWZ_YFB">
                        <li>
                           <p><code class="codeph">CLONEDB=TRUE</code></p>
                           <p>You can take snapshots of PDBs that are in read/write mode or read-only mode. The first snapshot of the PDB contains full copies of the original PDB files, but subsequent snapshots of the same PDB contain sparse files.</p>
                        </li>
                        <li>
                           <p><code class="codeph">CLONEDB=FALSE</code></p>
                           <p>You can only take snapshots of read-only PDBs. Every snapshot is a full copy of the source PDB files. In this case, if you create a clone PDB based on a PDB snapshot, then the source PDB must remain read-only for the lifetime of the clone PDB.</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__GUID-FEE7CE17-B281-4A3F-980C-B0581F730B0C">
                        <p class="notep1">Note:</p>
                        <p id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__d5e5244">See <span id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__d5e5246"><a href="../dblic/Licensing-Information.html#DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>Oracle Database Licensing Information User Manual</cite></span></a> for details on which features are supported for different editions and services</span>.
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__GUID-D861A478-C6DA-4459-80A8-6AD3E58B0E19">PDB Snapshot Carousel</p>
                        <p>A <span>PDB snapshot carousel</span> is a library of up to 8 snapshots. The carousel enables you to perform a “hot clone” of a PDB to a specific SCN or point in time. A use case is to restore a snapshot from the carousel, typically the most recent snapshot, and then recover it to the required SCN or timestamp.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__GUID-185DBA54-7406-4B02-8BD2-1EA62BF693D3">Cloning a PDB from a PDB Snapshot</p>
                        <p>The <code class="codeph">USING SNAPSHOT</code> clause of the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement creates an active PDB from an existing PDB snapshot. To view the available PDB snapshots, query the <code class="codeph">DBA_PDB_SNAPSHOTS</code> data dictionary view.
                        </p>
                        <p>To clone a PDB from a snapshot, specify one of the following values in the <code class="codeph">USING SNAPSHOT</code> clause:
                        </p>
                        <ul style="list-style-type: disc;" id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__UL_Y1C_LRX_XFB">
                           <li>
                              <p>The PDB snapshot name</p>
                           </li>
                           <li>
                              <p>The PDB snapshot SCN in the following form:</p><pre class="pre codeblock"><code>USING SNAPSHOT AT SCN <span class="italic">scn</span></code></pre></li>
                           <li>
                              <p>The PDB snapshot timestamp in the following form:</p><pre class="pre codeblock"><code>USING SNAPSHOT AT TIME <span class="italic">timestamp</span></code></pre></li>
                        </ul>
                        <p>If the PDB snapshot is a sparse copy (that is, it was created when <code class="codeph">CLONEDB=TRUE</code> and was not the first snapshot taken of the source PDB), then the PDB cloned from this snapshot is also sparse.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__GUID-2FFC8633-8544-4BB0-9755-9BF6E0FDD169">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;" id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__UL_Z1C_LRX_XFB">
                           <li>
                              <p><span class="q">"<a href="administering-pdb-snapshots.html#GUID-8771C38E-E6C1-49BC-8160-CE987E6154AF" title="The SNAPSHOT MODE clause controls creation of snapshots, and determines whether creation is manual, automatic, or disabled.">User Interface for PDB Snapshot Carousel</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/CREATE-PLUGGABLE-DATABASE.html#SQLRF55694" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for the syntax and semantics of the <code class="codeph">USING SNAPSHOT</code> clause
                              </p>
                           </li>
                           <li>
                              <p><span><a href="../dblic/Licensing-Information.html#DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>Oracle Database Licensing Information User Manual</cite></span></a> for details on which features are supported for different editions and services</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-22118625-3157-4C38-8A88-79A561A3E6ED" title="You can create PDBs from PDB snapshots by executing the CREATE PLUGGABLE DATABASE … USING SNAPSHOT statement.">Cloning PDBs from PDB Snapshots</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-539A1F68-27B9-4802-95AC-2C721347296C" name="GUID-539A1F68-27B9-4802-95AC-2C721347296C"></a><h4 id="MULTI-GUID-539A1F68-27B9-4802-95AC-2C721347296C" class="sect4"><span class="enumeration_section">7.6.2 </span>Cloning a PDB from a PDB Snapshot: Scenario
                  </h4>
                  <div>
                     <p>This scenario creates a new PDB from a PDB snapshot by executing <code class="codeph">CREATE PLUGGABLE DATABASE ... USING SNAPSHOT</code>.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-539A1F68-27B9-4802-95AC-2C721347296C__GUID-804E2E00-EA12-4E3B-A3E6-8ED68EFEF609">Assumptions</p>
                        <p>This example assumes the following factors:</p>
                        <ul style="list-style-type: disc;" id="GUID-539A1F68-27B9-4802-95AC-2C721347296C__UL_GYR_DPL_YFB">
                           <li>
                              <p>A <span>PDB snapshot carousel</span> exists with 8 daily snapshots of source PDB <code class="codeph">salespdb</code>, named after the weekday, day of the month, and time when they were created: <code class="codeph">pdb1_mon_2_1201</code>, <code class="codeph">pdb1_tue_3_1201</code>, <code class="codeph">pdb1_wed_4_1201</code>, and so on.
                              </p>
                           </li>
                           <li>
                              <p>All snapshots were created when <code class="codeph">salespdb</code> was in read/write mode and the <code class="codeph">CLONEDB</code> initialization parameter was set to <code class="codeph">TRUE</code>. All PDB snapshots except the first one are sparse.
                              </p>
                           </li>
                           <li>
                              <p>The new PDB will be a clone of a snapshot named <code class="codeph">pdb1_wed_4_1201</code>, which is a snapshot of <code class="codeph">pdb1</code> taken last Wednesday on the 4th of the month at 12:01 a.m.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">FILE_NAME_CONVERT</code> clause and the <code class="codeph">CREATE_FILE_DEST</code> clause are not required.
                              </p>
                              <p>Either Oracle Managed Files is enabled, or the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter is set. Therefore, the <code class="codeph">FILE_NAME_CONVERT</code> clause is not required. The files will be copied to a new location based on the Oracle Managed Files configuration or the initialization parameter setting.
                              </p>
                           </li>
                           <li>
                              <p>Storage limits are not required for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is not required.
                              </p>
                           </li>
                           <li>
                              <p>There is no file with the same name as the new temp file that will be created in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is not required.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-539A1F68-27B9-4802-95AC-2C721347296C__GUID-081F1A33-896B-4DE4-87CF-75B3E23BDF83">To clone a PDB from a PDB snapshot:</p>
                        <ol id="GUID-539A1F68-27B9-4802-95AC-2C721347296C__OL_I21_GPL_YFB">
                           <li>
                              <p>In SQL*Plus, ensure that the current container is the CDB root or an application root.</p>
                              <p>When the current container is the CDB root, the PDB is created in the CDB. When the current container is an application root, the application PDB is created in the application container.</p>
                           </li>
                           <li>
                              <p>Execute the <code class="codeph">CREATE PLUGGABLE DATABASE ... USING SNAPSHOT</code> statement.
                              </p>
                              <p>The following statement clones the <code class="codeph">pdb1_copy</code> PDB from the PDB snapshot named <code class="codeph">pdb1_wed_4_1201</code>:
                              </p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE pdb1_copy FROM pdb1 USING SNAPSHOT pdb1_wed_4_1201;
</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-539A1F68-27B9-4802-95AC-2C721347296C__GUID-31595C90-5E04-4133-85D4-9078A802CC51">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;" id="GUID-539A1F68-27B9-4802-95AC-2C721347296C__UL_KWR_D2J_CGB">
                           <li>
                              <p><span class="q">"<a href="administering-pdb-snapshots.html#GUID-82BCCB60-4A6F-4687-BD16-64A5FE767FB5" title="Configure a PDB for automatic snapshots by using the SNAPSHOT MODE EVERY clause when creating or altering a PDB.">Configuring Automatic PDB Snapshots</a>"</span></p>
                           </li>
                           <li>
                              <p><span><a href="../dblic/Licensing-Information.html#DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>Oracle Database Licensing Information User Manual</cite></span></a> for details on which features are supported for different editions and services</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-22118625-3157-4C38-8A88-79A561A3E6ED" title="You can create PDBs from PDB snapshots by executing the CREATE PLUGGABLE DATABASE … USING SNAPSHOT statement.">Cloning PDBs from PDB Snapshots</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E" name="GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E"></a><h3 id="MULTI-GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E" class="sect3"><span class="enumeration_section">7.7 </span>Creating Snapshot Copy PDBs
               </h3>
               <div>
                  <p>You can clone a PDB from snapshots of the underlying storage.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62">About Snapshot Copy PDBs</a><br>You can create a <strong class="term">snapshot copy PDB</strong> by executing a <code class="codeph">CREATE PLUGGABLE DATABASE ... FROM ... SNAPSHOT COPY</code> statement. The source PDB is specified in the <code class="codeph">FROM</code> clause.
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-B7746995-6DC8-4650-A955-7DFDD49E5087">Creating a Snapshot Copy PDB: Scenario</a><br>This scenario create a snapshot copy PDB by specify the <code class="codeph">SNAPSHOT COPY</code> clause in <code class="codeph">CREATE PLUGGABLE DATABASE</code>.
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774">Materializing a Snapshot Copy PDB</a><br>You can materialize a snapshot copy PDB by running an <code class="codeph">ALTER PLUGGABLE DATABASE</code> statement with the <code class="codeph">MATERIALIZE</code> clause. Materializing a snapshot copy PDB copies all data blocks.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB.">Cloning a PDB or Non-CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62" name="GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62"></a><h4 id="MULTI-GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62" class="sect4"><span class="enumeration_section">7.7.1 </span>About Snapshot Copy PDBs
                  </h4>
                  <div>
                     <p>You can create a <strong class="term">snapshot copy PDB</strong> by executing a <code class="codeph">CREATE PLUGGABLE DATABASE ... FROM ... SNAPSHOT COPY</code> statement. The source PDB is specified in the <code class="codeph">FROM</code> clause.
                     </p>
                     <p>A snapshot copy reduces the time required to create the clone because it does not include a complete copy of the source data files. Furthermore, the snapshot copy PDB occupies a fraction of the space of the source PDB.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705">Storage Requirements for Snapshot Copy PDBs</a><br>When you specify the <code class="codeph">SNAPSHOT COPY</code> clause in <code class="codeph">CREATE PLUGGABLE DATABASE ... FROM <span class="codeinlineitalic">sourcepdb</span></code>, all data files of the source PDB must reside in the same storage type.
                        </li>
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-F26C8A55-2465-475A-905A-83BD2E68AE6E">Types of Snapshots</a><br>In Oracle Multitenant, the term <strong class="term">snapshot</strong> means different things depending on context. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E" title="You can clone a PDB from snapshots of the underlying storage.">Creating Snapshot Copy PDBs</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705" name="GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705"></a><h5 id="MULTI-GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705" class="sect5"><span class="enumeration_section">7.7.1.1 </span>Storage Requirements for Snapshot Copy PDBs
                     </h5>
                     <div>
                        <p>When you specify the <code class="codeph">SNAPSHOT COPY</code> clause in <code class="codeph">CREATE PLUGGABLE DATABASE ... FROM <span class="codeinlineitalic">sourcepdb</span></code>, all data files of the source PDB must reside in the same storage type.
                        </p>
                        <p>Storage requirements depend on the setting of the <code class="codeph">CLONEDB</code> initialization parameter:
                        </p>
                        <ul style="list-style-type: disc;" id="GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705__UL_UBX_HGL_YFB">
                           <li>
                              <p><code class="codeph">CLONEDB=FALSE</code></p>
                              <p>The underlying file system for the source PDB files must support storage snapshots. Such file systems include Oracle Automatic Storage Management Cluster File System (Oracle ACFS) and Direct NFS Client storage. Oracle Exadata supports snapshot copy functionality on ASM configured with sparse ASM grid disks.</p>
                           </li>
                           <li>
                              <p><code class="codeph">CLONEDB=TRUE</code></p>
                              <p>The underlying file system for the source PDB files can be any local file system, network file system (NFS), or clustered file system that has Direct NFS enabled and supports sparse files. Most UNIX systems meet these requirements, including Oracle ACFS and ZFS. However, when <code class="codeph">CLONEDB=TRUE</code>, the source PDB must remain in open read-only mode when clones exist.
                              </p>
                           </li>
                        </ul>
                        <p>Direct NFS Client enables an Oracle database to access network attached storage (NAS) devices directly, rather than using the operating system kernel NFS client. If the files of the source PDB are stored on Direct NFS Client storage, then the following additional requirements must be met:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The source PDB files must be located on an NFS volume.</p>
                           </li>
                           <li>
                              <p>Storage credentials must be stored in a Transparent Data Encryption keystore.</p>
                           </li>
                           <li>
                              <p>The storage user must have the privileges required to create and destroy snapshots on the volume that hosts the files of the source PDB.</p>
                           </li>
                           <li>
                              <p>Credentials must be stored in the keystore using an <code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET</code> SQL statement.
                              </p>
                              <p>The following example configures an Oracle Database secret in a software keystore:</p><pre class="pre codeblock"><code>ADMINISTER KEY MANAGEMENT  
  ADD SECRET '<span class="italic">secret</span>' FOR CLIENT '<span class="italic">client_name</span>' 
  USING TAG '<span class="italic">storage_user</span>' 
  IDENTIFIED BY  <span class="italic">keystore_password</span>  WITH BACKUP;
</code></pre><p>Run this statement to add a separate entry for each storage server in the configuration. In the previous example, the following values must be specified:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p> <span class="italic"><code class="codeph">secret</code></span> is the storage password.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">client_name</code></span> is the storage server. On a Linux or UNIX platform, it is the name entered in /etc/hosts or the IP address of the storage server.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">tag</code></span> is the user name passed to the storage server.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">keystore_password</code></span> is the password for the keystore.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>You cannot unplug PDB clones created using the <code class="codeph">SNAPSHOT COPY</code> clause. You can only drop them. Attempting to unplug a clone created using the <code class="codeph">SNAPSHOT COPY</code> clause results in an error.
                        </p>
                        <p>Storage clones are named and tagged using the GUID of the target PDB. You can query the <code class="codeph">CLONETAG</code> column of <code class="codeph">DBA_PDB_HISTORY</code> view to view clone tags for storage clones.
                        </p>
                        <div class="infoboxnote" id="GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705__GUID-A780A64D-E5EA-428B-BC57-3D4D901F9CAF">
                           <p class="notep1">Note:</p>
                           <p>Snapshot copy behavior and efficiency are vendor specific and may vary between vendors.</p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705__GUID-E5C87C2A-2F7C-4B03-A716-95BB3F3A5B05">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../ostmg/overview-acfs-advm.html#OSTMG31000" target="_blank"><span><cite>Oracle Automatic Storage Management Administrator's Guide</cite></span></a> for more information about Oracle ACFS
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span></a> for your operating system for information about Direct NFS Client
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../asoag/introduction-to-transparent-data-encryption.html#ASOAG-GUID-0E59AD1E-514A-4F93-9A1F-E5683A535A89" target="_blank"><span><cite>Oracle Database Advanced Security Guide</cite></span></a> for more information about Transparent Data Encryption
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=support_article_1597027_1" target="_blank">My Oracle Support Note 1597027.1</a> for more information about supported platforms for snapshot cloning of PDBs.
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=SAGUG-GUID-78370F4C-EEDD-4230-9A80-BF979B4C907F" target="_blank"><span><cite>Oracle Exadata System Software User's Guide</cite></span></a> for information about Exadata support for PDB clones created using the <code class="codeph">SNAPSHOT COPY</code> clause
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62" title="You can create a snapshot copy PDB by executing a CREATE PLUGGABLE DATABASE ... FROM ... SNAPSHOT COPY statement. The source PDB is specified in the FROM clause.">About Snapshot Copy PDBs</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-F26C8A55-2465-475A-905A-83BD2E68AE6E" name="GUID-F26C8A55-2465-475A-905A-83BD2E68AE6E"></a><h5 id="MULTI-GUID-F26C8A55-2465-475A-905A-83BD2E68AE6E" class="sect5"><span class="enumeration_section">7.7.1.2 </span>Types of Snapshots
                     </h5>
                     <div>
                        <p>In Oracle Multitenant, the term <strong class="term">snapshot</strong> means different things depending on context. 
                        </p>
                        <p>The principal difference is between a storage-managed snapshot and a database-managed snapshot. You can only create a snapshot copy PDB from a storage-managed snapshot. PDBs created from database-managed snapshots are standard clone PDBs. A database-managed snapshot does not involve storage-level snapshots. The following table explicates the differences.</p>
                        <div class="tblformal" id="GUID-F26C8A55-2465-475A-905A-83BD2E68AE6E__TABLE_J5Z_NMS_YFB">
                           <p class="titleintable">Table 7-2 Types of Snapshots</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Types of Snapshots" summary="This table distinguishes different meanings of the term "snapshot" in a CDB." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d38373e6133">Object</th>
                                    <th align="left" valign="bottom" id="d38373e6135">SQL Statement</th>
                                    <th align="left" valign="bottom" id="d38373e6137">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e6141" headers="d38373e6133 ">
                                       <p>Storage-managed snapshot</p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e6141 d38373e6135 ">
                                       <p>N/A</p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e6141 d38373e6137 ">
                                       <p>A storage-managed snapshot is only supported on specific file systems. The storage and security credential requirements depend on the setting of the <code class="codeph">CLONEDB</code> initialization parameter.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e6154" headers="d38373e6133 ">
                                       <p>Snapshot copy PDB</p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e6154 d38373e6135 ">
                                       <p><code class="codeph">CREATE PLUGGABLE DATABASE ... FROM ... SNAPSHOT COPY</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e6154 d38373e6137 ">
                                       <p>A snapshot copy PDB does not include a complete copy of the source data files. Rather, Oracle Database creates a storage-level snapshot of the underlying file system, and then creates the clone PDB from the snapshot. </p>
                                       <p>Unlike a standard clone PDB, the snapshot copy PDB is dependent on the storage snapshot. Therefore, you cannot unplug this PDB from the CDB root or plug it in to an application root. Also, you cannot drop the storage snapshot on which the PDB is based. Instead, you must materialize the snapshot copy PDB, which converts it into a full PDB with non-sparse files.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e6167" headers="d38373e6133 ">PDB snapshot</td>
                                    <td align="left" valign="top" headers="d38373e6167 d38373e6135 "><code class="codeph">ALTER PLUGGABLE DATABASE SNAPSHOT</code></td>
                                    <td align="left" valign="top" headers="d38373e6167 d38373e6137 ">
                                       <p>A PDB snapshot is a database-managed copy of a PDB. No storage-level snapshot is involved.</p>
                                       <p>If the snapshot is created when <code class="codeph">CLONEDB=FALSE</code>, then the snapshot is a full copy of the source PDB. Starting in Oracle Database 19c, if the snapshot is created when <code class="codeph">CLONEDB=TRUE</code>, then the source PDB can be in read/write mode. In this case, every snapshot except the first one is a sparse copy of the source PDB.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e6184" headers="d38373e6133 ">Clone PDB based on a PDB snapshot</td>
                                    <td align="left" valign="top" headers="d38373e6184 d38373e6135 "><code class="codeph">CREATE PLUGGABLE DATABASE ... FROM ... USING SNAPSHOT</code></td>
                                    <td align="left" valign="top" headers="d38373e6184 d38373e6137 ">
                                       <p>If the snapshot was created when <code class="codeph">CLONEDB=FALSE</code>, then this statement creates a full, standalone clone PDB that does not need to be materialized. Starting in Oracle Database 19c, if the snapshot was created when <code class="codeph">CLONEDB=TRUE</code>, then this statement creates a sparse clone PDB.
                                       </p>
                                       <p>You cannot create a snapshot copy PDB that is based on a PDB snapshot by including both the <code class="codeph">USING SNAPSHOT</code> clause and the <code class="codeph">SNAPSHOT COPY</code> clause. However, you can create a standalone clone PDB with <code class="codeph">USING SNAPSHOT</code>, and then create a <code class="codeph">SNAPSHOT COPY</code> PDB from the standalone PDB.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-F26C8A55-2465-475A-905A-83BD2E68AE6E__GUID-03B7E63E-EE98-4CC6-8CD7-27104E79A60B">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="cloning-a-pdb.html#GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774" title="You can materialize a snapshot copy PDB by running an ALTER PLUGGABLE DATABASE statement with the MATERIALIZE clause. Materializing a snapshot copy PDB copies all data blocks.">Materializing a Snapshot Copy PDB</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="administering-pdb-snapshots.html#GUID-F2FC2FCB-2DA2-43B5-B98D-8902BC8D66A6" title="The carousel for a specific PDB is a circular library of copies for this PDB.">How PDB Snapshot Carousel Works</a>"</span></p>
                              </li>
                              <li>
                                 <p><span><a href="../dblic/Licensing-Information.html#DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>Oracle Database Licensing Information User Manual</cite></span></a> for details on which features are supported for different editions and services</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62" title="You can create a snapshot copy PDB by executing a CREATE PLUGGABLE DATABASE ... FROM ... SNAPSHOT COPY statement. The source PDB is specified in the FROM clause.">About Snapshot Copy PDBs</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087" name="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087"></a><h4 id="MULTI-GUID-B7746995-6DC8-4650-A955-7DFDD49E5087" class="sect4"><span class="enumeration_section">7.7.2 </span>Creating a Snapshot Copy PDB: Scenario
                  </h4>
                  <div>
                     <p>This scenario create a snapshot copy PDB by specify the <code class="codeph">SNAPSHOT COPY</code> clause in <code class="codeph">CREATE PLUGGABLE DATABASE</code>.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087__GUID-78C4DE76-F1B0-43F7-BACF-20966A52359A">Assumptions</p>
                        <p>This scenario assumes the following factors:</p>
                        <ul style="list-style-type: disc;" id="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087__UL_RZX_QTL_YFB">
                           <li>
                              <p>The new snapshot copy PDB will be created based on a PDB snapshot named <code class="codeph">pdb1_snap3</code>, which is a PDB snapshot that is a copy of <code class="codeph">pdb1</code> at a specific point in time and SCN.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">FILE_NAME_CONVERT</code> clause and the <code class="codeph">CREATE_FILE_DEST</code> clause are not required.
                              </p>
                              <p>Either Oracle Managed Files is enabled, or the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter is set. Therefore, the <code class="codeph">FILE_NAME_CONVERT</code> clause is not required. The files will be copied to a new location based on the Oracle Managed Files configuration or the initialization parameter setting.
                              </p>
                           </li>
                           <li>
                              <p>Storage limits are not required for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is not required.
                              </p>
                           </li>
                           <li>
                              <p>There is no file with the same name as the new temp file that will be created in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is not required.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087__GUID-E4B9C2F9-AD69-468C-8A52-8E4B6F1E437E">To create a snapshot copy PDB:</p>
                        <ol id="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087__OL_RZF_TTL_YFB">
                           <li>
                              <p>In SQL*Plus, ensure that the current container is the CDB root or an application root.</p>
                              <p>When the current container is the CDB root, the PDB is created in the CDB. When the current container is an application root, the application PDB is created in the application container.</p>
                           </li>
                           <li>
                              <p>Execute the <code class="codeph">CREATE PLUGABBLE DATABASE … SNAPSHOT COPY</code> statement.
                              </p>
                              <p>The following statement clones the <code class="codeph">pdb1_snap_copy</code> PDB from the <code class="codeph">pdb1_snap3</code> PDB snapshot:
                              </p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE pdb1_snap_copy FROM pdb1 USING SNAPSHOT pdb1_snap3 SNAPSHOT COPY;
</code></pre><p>After <code class="codeph">pdb1_snap_copy</code> is created, it is dependent on the <code class="codeph">pdb1_snap3</code> PDB snapshot. Therefore, you cannot drop <code class="codeph">pdb1_snap3</code> when <code class="codeph">pdb1_snap_copy</code> exists. However, you can transform <code class="codeph">pd1_snap_copy</code> from a snapshot copy PDB into a regular PDB by running an <code class="codeph">ALTER PLUGGABLE DATABASE ... MATERIALIZE</code> statement. Materializing the PDB means that <code class="codeph">pdb1_snap_copy</code> no longer depends on <code class="codeph">pdb1_snap3</code>, enabling you to drop <code class="codeph">pdb1_snap3</code>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087__GUID-8A45ABFB-715E-412F-92A2-FD97869736B4">
                        <p class="notep1">See Also:</p><span class="q">"<a href="cloning-a-pdb.html#GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774" title="You can materialize a snapshot copy PDB by running an ALTER PLUGGABLE DATABASE statement with the MATERIALIZE clause. Materializing a snapshot copy PDB copies all data blocks.">Materializing a Snapshot Copy PDB</a>"</span></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E" title="You can clone a PDB from snapshots of the underlying storage.">Creating Snapshot Copy PDBs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774" name="GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774"></a><h4 id="MULTI-GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774" class="sect4"><span class="enumeration_section">7.7.3 </span>Materializing a Snapshot Copy PDB
                  </h4>
                  <div>
                     <p>You can materialize a snapshot copy PDB by running an <code class="codeph">ALTER PLUGGABLE DATABASE</code> statement with the <code class="codeph">MATERIALIZE</code> clause. Materializing a snapshot copy PDB copies all data blocks.
                     </p>
                     <div class="section">
                        <p>When you create a snapshot copy PDB, it is dependent on the source PDB. Because of this dependency, you cannot drop the source PDB.</p>
                        <p>Materializing the snapshot copy PDB transforms the snapshot copy PDB, which uses sparse files, into a full PDB, which does <span class="italic">not</span> use sparse files. Therefore, it is no longer dependent on the source PDB, which can be dropped.
                        </p>
                        <div class="infoboxnote" id="GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774__GUID-A54744F1-46F7-482D-9343-D892E1807DC3">
                           <p class="notep1">Note:</p>
                           <p>A PDB snapshot created with the <code class="codeph">USING SNAPSHOT</code> clause and a snapshot copy PDB created with the <code class="codeph">SNAPSHOT COPY</code> clause are two distinct types of snapshots and should not be confused with each other. The <code class="codeph">USING SNAPSHOT</code> clause creates a full PDB that does not need to be materialized. The <code class="codeph">SNAPSHOT COPY</code> clause creates a sparse PDB that must be materialized if you want to drop the PDB snapshot on which it is based.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774__GUID-03E353ED-291D-4BA8-80B7-B9F6C0B08EED">To materialize a PDB snapshot:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, ensure that the current container is the snapshot copy PDB that is being materialized.</p>
                           </li>
                           <li>
                              <p>Run an <code class="codeph">ALTER PLUGGABLE DATABASE</code> statement with the <code class="codeph">MATERIALIZE</code> clause.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774__GUID-509A37D6-9BB3-469B-BB3A-B5D32C8C2AE1">
                        <p class="titleinexample">Example 7-2 Materializing a Snapshot Copy PDB</p>
                        <p>The following SQL statement materializes a snapshot copy PDB:</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE MATERIALIZE;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774__GUID-F3848A4C-DFF3-436A-A8A6-75EBA81E3901">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="cloning-a-pdb.html#GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62" title="You can create a snapshot copy PDB by executing a CREATE PLUGGABLE DATABASE ... FROM ... SNAPSHOT COPY statement. The source PDB is specified in the FROM clause.">About Snapshot Copy PDBs</a>"</span> for more information about snapshot copy PDBs
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="cloning-a-pdb.html#GUID-B7746995-6DC8-4650-A955-7DFDD49E5087" title="This scenario create a snapshot copy PDB by specify the SNAPSHOT COPY clause in CREATE PLUGGABLE DATABASE.">Creating a Snapshot Copy PDB: Scenario</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E" title="You can clone a PDB from snapshots of the underlying storage.">Creating Snapshot Copy PDBs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999" name="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999"></a><h3 id="MULTI-GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999" class="sect3"><span class="enumeration_section">7.8 </span>Creating a <span>Split Mirror Clone PDB</span>s
               </h3>
               <div>
                  <p>In Oracle ASM, a split mirror is the process of detaching a point-in-time media copy from a parent copy. After the split, updates to the parent do not affect the child copy.</p>
                  <div class="section">
                     <p>Starting in <span>Oracle Database 18c</span>, the parent copy can be a PDB rather than a storage volume. The <span>split mirror clone PDB</span> resides on the same media as the parent. The principal use case is to rapidly provision test and development PDBs in an Oracle ASM environment.
                     </p>
                     <div class="infoboxnote" id="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999__GUID-B668A0D3-E9CD-4646-9029-36C019AC89C6">
                        <p class="notep1">Note:</p>
                        <p>Oracle ASM flex and extended disk groups are required for <span>split mirror clone PDB</span>s.
                        </p>
                     </div>
                     <p>Mirror refresh is refreshing a <span>split mirror clone PDB</span> with changes from the parent PDB. In effect, this operation is equivalent to deleting the mirror split, and then taking a new mirror split.
                     </p>
                     <p>To drop a <span>split mirror clone PDB</span>, enter <code class="codeph">ALTER PLUGGABLE DATABASE ... DROP MIRROR COPY</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999__GUID-527D2D0F-868A-4A60-95A0-CFCFBC6349BA">To create a <span>split mirror clone PDB</span>:
                     </p>
                     <ol id="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999__OL_EPG_FBM_YFB">
                        <li>
                           <p>Start SQL*Plus, and connect to the CDB root.</p>
                        </li>
                        <li>
                           <p>Prepare the source PDB by issuing the <code class="codeph">ALTER PLUGGABLE DATABASE ... PREPARE MIRROR COPY</code> statement.
                           </p>
                        </li>
                        <li>
                           <p>Create a clone PDB from the source PDB by issuing the <code class="codeph">CREATE PLUGGABLE DATABASE ... FROM ... USING MIRROR COPY</code> statement.
                           </p>
                        </li>
                        <li>
                           <p>Optionally, query <code class="codeph">V$ASM_DBCLONE_INFO</code> view to see the relationship between the source PDB, the cloned PDB, and their file groups.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999__GUID-F182EDCB-B18D-4D72-8C5D-CB73ABCAEA96">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;" id="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999__UL_RRG_3BM_YFB">
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=OSTMG-GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2" target="_blank"><span><cite>Oracle Automatic Storage Management Administrator's Guide</cite></span></a> to learn how to create or drop a <span>split mirror clone PDB</span></li>
                        <li>
                           <p><a href="../refrn/V-ASM_DBCLONE_INFO.html#REFRN-GUID-434D0A47-A61C-4882-8FAC-9539F272E609" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn more about <code class="codeph">V$ASM_DBCLONE_INFO</code></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB.">Cloning a PDB or Non-CDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
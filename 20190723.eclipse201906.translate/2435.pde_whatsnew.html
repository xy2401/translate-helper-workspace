<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" gtc:encodedoriginal="PCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBYSFRNTCAxLjAgVHJhbnNpdGlvbmFsLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSL3hodG1sMS9EVEQveGh0bWwxLXRyYW5zaXRpb25hbC5kdGQiPg==">
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="copyright" content="Copyright (c) Eclipse contributors and others 2018. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page."></meta>
<meta http-equiv="Content-Language" content="en-us"></meta>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
<link rel="STYLESHEET" href="../book.css" type="text/css"></link>
<style type="text/css">body {
  max-width: 900px;
}
table.news col.title {
  width: 30%;
}
/* img {max-width: 520px;} */
table.news {
  table-layout: fixed;
  border-collapse: collapse;
  width: 100%;
}
table.news td {
  border-top: solid thin black;
  padding: 10px;
  overflow: visible;
}
table.news tr {
  vertical-align: top;
}
table.news tr td.section {
  font-size: 20px;
  font-weight: bold;
}
table.news tr td.title {
  vertical-align: top;
  font-weight: bold;
}
table.news tr td.content {
  vertical-align: top;
}
ul {
  padding-left: 13px;
}
</style>
<title>4.12（PDE）的新功能</title>
</head>

<body dir="ltr">
<h2>4.12（PDE）的新功能</h2>
<p>以下是对4.12版Eclipse的插件开发环境（PDE）所做的一些更有趣或重要的更改的描述。它们分为：</p>
<ul> <!-- NOTE: Sync ../topics_WhatsNew.xml with this! -->
	<li><a href="#dialogs-wizards-views">对话框，向导和视图</a></li>
	<li><a href="#editors">编者</a></li>
	<li><a href="#APITools">API工具</a></li>
</ul>
<p>另请参阅<b><a href="../../org.eclipse.platform.doc.user/whatsNew/platform_whatsnew.html">Eclipse平台什么是新的</a></b>和<b><a href="../../org.eclipse.jdt.doc.user/whatsNew/jdt_whatsnew.html">JDT什么是新</a></b>文档。</p>
<p>我们还建议您阅读<a href="../tips/pde_tips.htm">提示和技巧</a> 。</p>
<br>

<!-- ****************** START OF N&N TABLE****************** -->
<table class="news">
<colgroup>
  <col class="title">
  <col>
</colgroup>
<tbody>
  <td><!-- ******************** Dialogs, Wizards and Views ********************** -->
  <tr>
    </tr></td><td id="dialogs-wizards-views" class="section" colspan="2"><h2>对话框，向导和视图</h2></td>
  
  <tr id="pde-target-platform-preferences"> <td><!--https://bugs.eclipse.org/bugs/show_bug.cgi?id=546400 -->
    </td><td class="title">目标平台首选项</td>
    <td class="content"><b>首选项&gt;插件开发&gt;目标平台</b>首选项页面现在允许更改“目标定义”和“位置”区域之间的高度平衡。
    </td>
  </tr>
  <td><!--
  -->
  <!-- ******************** End ofDialogs, Wizards and Views ********************** -->
  
  <!-- ******************** Editors ********************** -->
  <!--
  -->
  <tr>
    </tr></td><td id="editors" class="section" colspan="2"><h2>编者</h2></td>
  
  <tr id="pde-category-editor-source"> <td><!--https://bugs.eclipse.org/bugs/show_bug.cgi?id=546803 https://bugs.eclipse.org/bugs/show_bug.cgi?id=547322 -->
    </td><td class="title">产品和类别编辑器的“来源”选项卡</td>
    <td class="content"><b>产品编辑器</b>和<b>类别编辑器</b>现在具有“源”选项卡，可以直接访问其清单。
    <p>
        <img src="images/pde-category-editor-source.png" alt="">
    </p>
    </td>
  </tr>
  <td><!-- ******************** End of Editors ********************** -->

  <!-- ******************** APITools ********************** -->
  <tr>
    </tr></td><td id="APITools" class="section" colspan="2"><h2>API工具</h2></td>
  
  <tr id="pde-restriction-removal-reported"> <td><!--https://bugs.eclipse.org/bugs/show_bug.cgi?id=327452 -->
    </td><td class="title">删除API限制会导致API错误</td>
    <td class="content">删除PDE API工具限制（例如<code>@noextend</code> ， <code>@noimplement</code>和<code>@noinstantiate</code>现在会导致不兼容的捆绑包版本API工具错误，因为此代码的客户端可以在删除后访问更多API。
      <p>可以快速修复此错误，并增加次要版本以反映代码更改。
      </p>
      <p>
        <img src="images/pde-remove-restriction.png" alt="">
      </p>
    </td>
  </tr>

  <tr id="api-analysis-report-application"> <td><!--https://bugs.eclipse.org/bugs/show_bug.cgi?id=547206 -->
    </td><td class="title">运行API分析作为应用程序</td>
    <td class="content">为了在没有Ant的情况下简化自动化，可以使用名为<code>org.eclipse.pde.api.tools.apiAnalysis</code>的常规Eclipse应用程序来执行API Tools分析。
      <p>它可以接收以下参数：</p>
       <ul>
       <li><code>-project &lt;/path/to/project&gt;</code>配置应分析哪个项目。它必须是包含.project文件的有效插件项目。</li>
       <li><code>-dependencyList &lt;/path/to/a/dependencyList.txt&gt;</code>配置目标平台以进行分析。将使用换行和冒号（:)作为分隔符解析此文件，并将与文件系统上的路径匹配的所有标记添加到目标平台。</li>
       <li><code>-baseline &lt;default|/path/to/baseline.target&gt;</code>指定用于比较的基线。如果省略或<code>default</code> ，则它是当前运行的平台。如果指定了<code>.target</code>文件的路径，它将解析目标定义并使用包含的bundle作为基线。</li>
       <li><code>-failOnError</code>如果存在，应用程序将在API错误的情况下返回错误（非<code>0</code> ）。</li>
       </ul>
      <p>API分析使用项目设置，但强制<em>不兼容的api组件版本报告主要不会破坏更改</em>和<em>不兼容的api组件版本报告次要而不会将api更改</em>规则破坏报告为错误。
      </p>
      <p>调用示例如下所示：</p>
      <p>
      <code>./eclipse -project /home/mistria/sandbox/org.eclipse.e4.ui.css.core -dependencyList /home/mistria/sandbox/org.eclipse.e4.ui.css.core/dependencies.txt -failOnError</code>
      </p>
      <p>除了潜在的非<code>0</code>结果外，输出示例可能如下所示：</p>
      <p>
      <code>1 API ERRORS * Marker [on：/org.eclipse.e4.ui.css.core/META-INF/MANIFEST.MF,id:80,type：org.eclipse.pde.api.tools.version_numbering，attributes：[ apiMarkerID：4，charEnd：228，charStart：210，description :, lineNumber：7，message：版本0.11.400的次要版本应该相同，因为自版本0.12.700以来没有添加新的API，messagearguments：0.11 .400＃0.12.700，problemid：926941240，严重性：2，sourceId：API工具，版本：0.12.700.qualifier]，创建时间：5/16/19,5：36 PM] 1 API警告*标记[on： /org.eclipse.e4.ui.css.core,id:81,type：org.eclipse.pde.api.tools.api_usage，attributes：[apiMarkerID：3，charEnd：-1，charStart：-1，lineNumber： 0，消息：未检查“org.eclipse.e4.ui.css.core”的执行环境引用，因为未安装任何环境描述。 ，messagearguments：org.eclipse.e4.ui.css.core，problemid：665845798，severity：1，sourceId：API Tools]，创建时间：5/16/19，下午5:36]</code>
      </p>
      <p>下面是如何可以在第谷可以用来触发API检查在第谷建设，在示例中<code>pom.xml</code>
      </p>
      <pre style="width:778px">&lt;project&gt; [...]&lt;build&gt; [...]&lt;plugins&gt; [...]&lt;plugin&gt; &lt;artifactId&gt; maven-dependency-plugin &lt;/ artifactId&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt; list-dependencies &lt;/ id&gt; &lt;goals&gt; &lt;goal&gt; list &lt;/ goal&gt; &lt;/ goals&gt; &lt;phase&gt; verify &lt;/ phase&gt; &lt;configuration&gt; &lt;outputAbsoluteArtifactFilename&gt; true &lt;/ outputAbsoluteArtifactFilename&gt; &lt;outputScope&gt; false &lt;/ outputScope&gt; &lt;outputFile&gt; $ {project.build.directory} /dependencies.txt &lt;/ outputFile&gt; &lt;/ configuration&gt; &lt;/ execution&gt; &lt;/ executions&gt; &lt;/ plugin&gt; &lt;plugin&gt; &lt;groupId&gt; org.eclipse.tycho.extras &lt;/ groupId&gt; &lt;artifactId&gt; tycho-eclipserun-plugin &lt;/ artifactId&gt; &lt;version&gt; 1.4.0 &lt;/ version&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt; api-analysis &lt;/ id&gt; &lt;goals&gt; &lt;goal&gt; eclipse-run &lt;/ goal&gt; &lt;/ goals&gt; &lt;phase&gt; verify &lt;/ phase&gt; &lt;configuration&gt; &lt;applicationsArgs&gt; &lt;！ - 需要将工作空间设置为不是项目子项的目录 - &gt; &lt;arg&gt; -data &lt;/ arg&gt; &lt;args&gt; $ {project.basedir} /../ target / $ {project.artifactId} -apiAnalyzer-workspace &lt; / args&gt; &lt;args&gt; -application &lt;/ args&gt; &lt;args&gt; org.eclipse.pde.api.tools.apiAnalysis &lt;/ args&gt; &lt;args&gt; -project &lt;/ args&gt; &lt;args&gt; $ {project.basedir} &lt;/ args&gt; &lt;args&gt; -bas eline &lt;/ args&gt; &lt;args&gt; default &lt;/ args&gt; &lt;args&gt; -dependencyList &lt;/ args&gt; &lt;args&gt; $ {project.build.directory} /dependencies.txt &lt;/ args&gt; &lt;args&gt; -failOnError &lt;/ args&gt; &lt;/ applicationsArgs&gt; &lt;repositories&gt; &lt;repository&gt; &lt;id&gt; eclipse-4.12 &lt;/ id&gt; &lt;layout&gt; p2 &lt;/ layout&gt; &lt;url&gt; https://download.eclipse.org/eclipse/updates/4.12-I-builds / &lt;/ url&gt; &lt;/ repository&gt; &lt;/ repositories&gt; &lt;dependencies&gt; &lt;！ - 这将构成默认基线 - &gt; &lt;dependency&gt; &lt;artifactId&gt; org.eclipse.sdk.ide &lt;/ artifactId&gt; &lt;type&gt; p2 -installable-unit &lt;/ type&gt; &lt;/ dependency&gt; &lt;/ dependencies&gt; &lt;/ configuration&gt; &lt;/ execution&gt; &lt;/ executions&gt; &lt;/ plugin&gt; &lt;/ plugins&gt; &lt;/ build&gt; &lt;/ project&gt;</pre>
    </td>
  </tr>
  <td><!-- ******************** End of APITools ********************** -->
  
   <!-- ******************** PDE Compiler ********************** -->
   <!--
  <tr>
    <td id="pde-compiler" class="section" colspan="2"><h2>PDE Compiler</h2></td>
  </tr>
  -->
   <!-- ******************** End of PDE Compiler ********************** --> 
  
</td></tbody>
</table>
</body>
</html>

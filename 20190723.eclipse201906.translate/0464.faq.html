<html lang="zh-Hans" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
  <link rel="stylesheet" href="../book.css" type="text/css" charset="ISO-8859-1"></link>
  <title>常问问题</title>
</head>
<body dir="ltr">

<h1>经常问的问题</h1>

<h3>用法</h3>
<ul>
  <li><a href="#usage01">如何再次从Java编辑器中删除coverage颜色？</a></li>
  <li><a href="#usage03">如何使用EclEmma运行{whateverapplication}？</a></li>
  <li><a href="#usage04">EclEmma是否支持自动化Ant或Maven构建？</a></li>
  <li><a href="#usage05">如何更改源代码突出显示？</a></li>
  <li><a href="#usage07">我需要源代码才能使用EclEmma吗？</a></li>
  <li><a href="#usage08">为什么这条线是黄色的？</a></li>
  <li><a href="#usage09">如何从分析中排除测试类？</a></li>
</ul>

<h3>故障排除</h3>
<ul>
  <li><a href="#trouble01">为什么我收到错误消息“在此覆盖会话期间没有收集覆盖数据”？</a></li>
  <li><a href="#trouble02">具有例外的代码显示无覆盖。为什么？</a></li>
  <li><a href="#trouble03">我的应用程序不能与EclEmma一起运行！</a></li>
  <li><a href="#trouble04">我的Eclipse工作台窗口没有用于覆盖启动的工具栏按钮！</a></li>
  <li><a href="#trouble05">为什么JUnit4测试用例的预期异常显示为未涵盖？</a></li>
  <li><a href="#trouble06"><i>Coverage</i>视图保持为空，没有源突出显示。为什么？</a></li>
</ul>


<h2>用法</h2>

<h3><a name="usage01"></a>如何再次从Java编辑器中删除coverage颜色？</h3>
<p>如果删除覆盖会话，覆盖着色也将消失。为此，请在<i>Coverage</i>视图的工具栏中单击<i>Remove Session</i>或<i>Remove All Sessions</i> 。
</p>

<h3><a name="usage03"></a>如何使用EclEmma运行{whateverapplication}？</h3>
<p>EclEmma专为在Eclipse中启动的Java程序而设计。可以使用<a class="extern" href="http://www.jacoco.org/jacoco">JaCoCo</a>直接分析在不同环境中运行的Java应用程序，例如使用Ant或Maven集成。有不同的受支持的启动类型，其他插件可能会定义EclEmma不支持的其他启动类型。检查当前支持的启动类型的用户文档。
</p>

<h3><a name="usage04"></a> EclEmma是否支持自动化Ant或Maven构建？</h3>
<p>EclEmma是<a class="extern" href="http://www.jacoco.org/jacoco">JaCoCo</a>代码覆盖工具的Eclipse集成。JaCoCo为自动构建提供了一组<a class="extern" href="http://www.jacoco.org/jacoco/trunk/doc/ant.html">Ant任务</a>和<a class="extern" href="http://www.jacoco.org/jacoco/trunk/doc/maven.html">Maven目标</a> 。
</p>

<h3><a name="usage05"></a>如何更改源代码突出显示？</h3>
<p>可以在“ <i>常规”→“外观”→“编辑器”→“文本编辑器”→“注释”</i>的“Eclipse <i>首选项”</i>对话框中更改源代码突出显示。您可以修改突出显示样式和颜色，或使用垂直标尺。
</p>

<h3><a name="usage07"></a>我需要源代码才能使用EclEmma吗？</h3>
<p>不，您还可以获得第三方JAR的覆盖信息。只需将它们作为Eclipse中类路径设置的一部分，然后在coverage启动对话框的<i>Coverage</i>选项卡上选择它们。如果使用调试信息编译库，则行覆盖率将显示在<i>Coverage</i>视图中。如果源正确附加到库语法，则编辑器中将以与源代码相同的方式突出显示。
</p>

<h3><a name="usage08"></a>为什么这条线是黄色的？</h3>
<p>EclEmma注释所有部分被黄色覆盖的线条。部分覆盖意味着并非所有与此行关联的指令和分支都已在覆盖会话期间执行。在某些情况下，为什么Java编译器为特定的源代码行创建额外的字节代码并不明显。这种情况可能会被未来版本的JaCoCo和EclEmma过滤掉。
</p>

<h3><a name="usage09"></a>如何从分析中排除测试类？</h3>
<p>可以在源文件夹（或库）粒度的<i>Coverage</i>启动对话框中定义覆盖会话的分析范围。由于测试代码通常保存在单独的源文件夹或项目中，因此可以从覆盖率分析中排除测试类。
</p>


<h2>故障排除</h2>

<h3><a name="trouble01"></a>为什么我收到错误消息“在此覆盖会话期间没有收集覆盖数据”？</h3>
<p>当Java进程没有正确终止时，例如已经使用<i>Terminate</i>按钮手动终止，就会发生这种情况。确保您的Java程序自行终止。或者，您可以在终止之前转储正在运行的进程的覆盖数据。为此，从<i>Coverage</i>视图的工具栏中选择按钮<i>Dump Execution Data</i> 。
</p>

<p>
</p>

<h3><a name="trouble02"></a>具有例外的源代码行显示无覆盖。为什么？</h3>
<p>底层JaCoCo代码覆盖库使用所谓的探测器确定代码执行。探针在某些位置插入控制流程中。代码被视为在执行后续探测时执行。在异常的情况下，这样的指令序列在中间某处被中止，并且相应的源代码行未被标记为被覆盖。
</p>

<h3><a name="trouble03"></a>我的应用程序不能与EclEmma一起运行！</h3>
<p>您的应用程序是否在正常<i>运行</i>模式下在Eclipse中正确执行？请验证！如果没有，您的应用很可能也不会在<i>覆盖</i>模式下执行。在这种情况下，首先在Eclipse中创建正确的启动配置;然后在<i>覆盖</i>模式下执行。
</p>

<h3><a name="trouble04">我的Eclipse工作台窗口没有用于覆盖启动的工具栏按钮！</a></h3>
<p>即使正确安装了EclEmma，它也只会在与Java任务相关的一些预定义透视图中显示其动作集。如果要在工具栏的上下文菜单中使用<i>资源</i>选择<i>自定义透视</i>图等其他透视图中的coverage工具栏，请检查“ <i>命令组可用性”</i>选项卡上的“ <i>Java代码覆盖率”</i>选项。
</p>

<h3><a name="trouble05">为什么JUnit4测试用例的预期异常显示为未涵盖？</a></h3>
<p>具有预期异常的JUnit4测试用例即使已执行也显示为未涵盖。这样做的原因是底层的JaCoCo代码覆盖库只考虑在执行某些探测时执行的代码。对于标有<code>@Test{expected=...}</code>成功测试用例不是这种情况。另请参阅<a href="#trouble02">“具有例外的源代码行显示无覆盖。为什么？“</a> 。
</p>

<h3><a name="trouble06"><i>Coverage</i>视图保持为空，没有源突出显示。为什么？</a></h3>
<p>在Eclipse首选项<i>中，当工作空间</i>在<i>“运行/调试”</i> →“ <i>启动”</i>下<i>包含断点时，在调试模式下</i>有一个选项<i>“</i> <i>启动”</i> 。如果启用此选项并且工作区<i>覆盖</i>模式中存在断点将无法工作，因为它会自动替换为<i>调试</i>模式。如果要运行代码覆盖率分析，请将此选项设置为“ <i>从不”</i> 。
</p>

</body>
</html>
<html lang="zh-Hans" dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
      <link rel="stylesheet" type="text/css" href="../css/ot.css"></link>
      <link rel="stylesheet" type="text/css" href="../css/otjld.css"></link>
      <title>OT / J语言定义v1.3.1</title>
   </head>
   <body class="otdt" dir="ltr">
      <div id="content">
         <table class="nav">
            <tr>
               <td class="back"><a id="top"></a> <a href="s6.2.d.html" rel="prev">&lt;&lt;§6.2。（d）例外</a></td>
               <td class="top"><a href="index.html" rel="contents">↑目录↑</a></td>
               <td class="next"></td>
            </tr>
         </table>
         <div class="breadcrumb"><a class="nav" href="s6.html" rel="section">§6对象团队API</a> &gt; <a class="nav" href="s6.html" rel="section">§6.2</a> <a class="nav" href="s6.2.html" rel="section">其他API元素</a></div>
         <div class="subsect depth3" id="s6.2.e">
            <h4 class="subsect">§6.2。（e） <span class="title">角色迁移</span><a class="img" href="s6.2.e.html" title="PermaLink（e）角色迁移"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
            <p>以下接口可用于启用角色迁移：</p>
            <dl>
               <dt><code>IBaseMigratable</code></dt>
               <dd>该接口声明了一个方法<div class="listing plain"><pre>
    <code>&lt;B&gt; <b>void</b> migrateToBase（B otherBase）</code> </pre></div>并指示编译器为任何绑定角色生成此方法的实现，声明<code>IBaseMigratable</code>为其超级接口。<br>在角色实例上调用<code>migrateToBase</code>的效果是将此角色重新绑定到新的基本实例。基本实例必须与角色的基类兼容（为了避免在解除编译器期间出现问题，可能需要基类具有角色基类的确切类型）。将<code>null</code>传递给此方法会导致抛出<code>NullPointerException</code> 。
               </dd>
               <dt><code>ITeamMigratable</code></dt>
               <dd>该接口声明了一个方法<div class="listing plain"><pre>
    <code>&lt;R&gt; R &lt;@otherTeam&gt; migrateToTeam（ <b>最终</b> ITeam otherTeam）</code></pre></div>并指示编译器为任何声明<code>ITeamMigratable</code>作为其超级接口的角色生成此方法的实现。<br>在角色实例上调用<code>migrateToTeam</code>的效果是重新绑定此角色，使其成为新团队实例的包含部分。团队实例必须是角色的封闭团队的确切类型。将<code>null</code>传递给此方法会导致抛出<code>NullPointerException</code> 。<br><div class="note">
                     <h5>警告：</h5>这种方法有意破坏了家族多态性的规则：在迁移之前建立的任何引用<code>R&lt;@previousTeam&gt; r</code>都会错误地暗示角色的封闭团队仍然是<code>previousTeam</code> ，迁移后不再是真的。虽然这不会影响任何方法查找（这仍然是安全的），但基于角色的依赖类型的进一步假设会因团队迁移而失效。从迁移角色到任何兄弟角色实例的引用也是如此。<br>如果应该保持家庭多态性的规则，那么就应该避免将<code>ITeamMigratable</code>声明为角色的超级接口。
                  </div>
               </dd>
            </dl>
            <p>对于这两种方法，接口中声明的签名过于通用，但编译器执行必要的检查以确保角色，基本和团队实例确实兼容，并且另外将<code>migrateToTeam</code>的返回类型作为自我类型进行检查，即，它反映了呼叫目标的确切类型。
            </p>
         </div>
         <table class="nav">
            <tr>
               <td class="back"><a href="s6.2.d.html" rel="prev">&lt;&lt;§6.2。（d）例外</a></td>
               <td class="top"><a href="index.html" rel="contents">↑目录↑</a></td>
               <td class="next"></td>
            </tr>
         </table>
         <div class="breadcrumb"><a class="nav" href="s6.html" rel="section">§6对象团队API</a> &gt; <a class="nav" href="s6.html" rel="section">§6.2</a> <a class="nav" href="s6.2.html" rel="section">其他API元素</a></div>
      </div>
      <div id="footer">
         <hr><a class="w3c img" href="http://jigsaw.w3.org/css-validator/check/referer" shape="rect"><img src="../images/valid-css2-blue.png" alt="有效的CSS！" height="31" width="88"></a><a class="w3c img" href="http://validator.w3.org/check?uri=referer" shape="rect"><img src="../images/valid-xhtml10-blue.png" alt="有效的XHTML 1.0严格" height="31" width="88"></a><address>©Stephan Herrmann，Christine Hundt，Marco Mosconi</address>OT / J版本1.3.1  - 最后修改时间：2013-05-28</div>
   </body>
</html>
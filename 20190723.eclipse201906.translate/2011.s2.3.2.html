<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "../xhtml1-strict.dtd" gtc:encodedoriginal="PCFET0NUWVBFIGh0bWwKICBQVUJMSUMgIi0vL1czQy8vRFREIFhIVE1MIDEuMCBTdHJpY3QvL0VOIiAiLi4veGh0bWwxLXN0cmljdC5kdGQiPg==">
<html lang="zh-Hans"  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <link rel="stylesheet" type="text/css" href="../css/ot.css">
      <link rel="stylesheet" type="text/css" href="../css/otjld.css">
      <title>OT / J语言定义v1.3.1</title>
   </head>
   <body class="otdt" >
      <div id="content">
         <table class="nav">
            <tr>
               <td class="back"><a id="top"></a> <a href="s2.3.1.html" rel="prev">&lt;&lt;§2.3.1隐式角色创建</a></td>
               <td class="top"><a href="index.html" rel="contents">↑目录↑</a></td>
               <td class="next"><a href="s2.3.3.html" rel="next">§2.3.3智能提升&gt;&gt;</a></td>
            </tr>
         </table>
         <div class="breadcrumb"><a class="nav" href="s2.html" rel="section">§2角色绑定</a> &gt; <a class="nav" href="s2.3.html" rel="section">§2.3提升</a></div>
         <div class="sect depth3" id="s2.3.2">
            <h3 class="sect">§2.3.2宣布解除<a class="img" href="s2.3.2.html" title="PermaLinkto§2.3.2声明解除"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h3>
            <div class="syntaxlink"><a href="sA.html#sA.6.2" title="§A.6.2LiftingType" class="syntax">→语法§A.6.2</a></div>
            <div class="subsect depth4" id="s2.3.2.a">
               <h4 class="subsect">（a） <span class="title">声明提升的参数</span><a class="img" href="s2.3.2.a.html" title="PermaLink to（a）声明提升的参数"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>非静态团队级方法或构造函数可以声明具有两种类型的参数，以明确表示<strong>提升的位置</strong> 。使用语法</p>
               <div class="listing plain"><pre><b>public</b> <b>void</b> m (BaseClass <em>as</em> RoleClass param) { <i>stmts</i> }</pre></div>
               <p>如果第二种类型（ <code>RoleClass</code> ）是（ <code>playedBy</code> ）第一种类型（ <code>BaseClass</code> ）的角色，则可以声明一个可升级的参数。此外，角色类型必须是定义给定方法的封闭团队类的角色。角色类型必须由其简单（即不合格）名称给出。
                  			<br>这样的签名要求调用者提供基础对象（此处为<code>BaseClass</code> ），但被调用者接收角色对象（此处为<code>RoleClass</code> ）。实际上，客户端会看到一个签名，其中省略了“ <code>as RoleClass</code> ”部分。
                  			<br>呼叫者和被呼叫者之间的兼容性通过隐式插入的提升转换来实现。如果要求提升，则使用声明提升的签名仅有效（详情请参见<a href="s2.3.3.html" title="§2.3.3智能提升" class="sect">§2.3.3</a>和<a href="s2.3.4.html" title="§2.3.4绑定含糊不清" class="sect">§2.3.4</a> ）。
                  				
               </p>
            </div>
            <div class="subsect depth4" id="s2.3.2.b">
               <h4 class="subsect">（b） <span class="title">在宣布解除的范围内超级</span><a class="img" href="s2.3.2.b.html" title="PermaLink to（b）Super在声明提升的背景下"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>在声明提升一个或多个参数的方法或构造函数中调用<code>super</code>或<code>tsuper</code>是指具有角色类型参数的方法或构造函数，即， <em>在</em>超级调用<em>之前进行</em>提升。然而，超级方法也可以具有声明的提升签名。然后它将看到与当前方法相同的角色实例。
                  				
               </p>
            </div>
            <div class="subsect depth4" id="s2.3.2.c">
               <h4 class="subsect">（c） <span class="title">宣布解除阵列</span><a class="img" href="s2.3.2.c.html" title="PermaLink to（c）声明解除数组"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>如果涉及显式提升的参数应该是<strong>数组</strong>类型，则语法为</p>
               <div class="listing plain"><pre><b>public</b> <b>void</b> m (BaseClass <b>as</b> RoleClass param[]) ...</pre></div>
               <p>这里表示数组的括号适用于<code>BaseClass</code>和<code>RoleClass</code>这两种类型。
                  				
               </p>
            </div>
            <div class="subsect depth4" id="s2.3.2.d">
               <h4 class="subsect">（d） <span class="title">宣布解除捕获区块</span><a class="img" href="s2.3.2.d.html" title="PermaLink to（d）声明解除catch块"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>catch块的参数也可以应用声明的提升，如：</p>
               <div class="listing plain"><pre><b>catch</b> (BaseException <b>as</b> RoleClass param) { <i>stmts</i> }</pre></div>
               <p>此语法仅在团队的非静态范围内有效（直接或嵌套）。在给定的示例中， <code>RoleClass</code>必须由<code>BaseException</code> 。注意， <code>RoleClass</code>本身不一定是throwable。由于此声明的效果，catch块将捕获<code>BaseException</code>类型的任何异常，并将其与<code>RoleClass</code>实例一起包装到后续块中。
                  			<br>还要注意，重新抛出给定的实例<code>param</code>具有在抛出之前隐式地将角色降低到其基本异常的语义，因为角色仅通过降低符合所需类型<code>Throwable</code> 。
                  				
               </p>
            </div>
            <div class="subsect depth4" id="s2.3.2.e">
               <h4 class="subsect">（e） <span class="title">通用宣布解除</span><a class="img" href="s2.3.2.e.html" title="永久链接到（e）通用声明提升"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>声明提升的方法可能会引入一个相对于给定角色类型有界的类型参数。这种约束声明为：</p>
               <div class="listing plain"><pre>&lt;AnyBase <b>base</b> SuperRole&gt;
<b>void</b> teamMethod(AnyBase <b>as</b> SuperRole arg) {
   <span class="comment">// body using arg as of type SuperRole</span>
}</pre></div>
               <p>这意味着<code>AnyBase</code>是一个类型参数，其实例化对于角色<code>SuperRole</code>都必须是可<code>SuperRole</code> 。
                  				
               </p>
               <p>给定的类型绑定要求调用站点提供与任何基类兼容的参数，当前团队包含的绑定角色是<code>SuperRole</code>的子类，包括<code>SuperRole</code>本身。但是， <code>SuperRole</code>本身不需要绑定到任何基类。另一方面， <code>AnyBase</code>不同有效替换不需要通过继承来关联。
                  				
               </p>
               <div class="note">
                  <h5>注意：</h5>此功能支持对其他不相关的基类进行广义处理。这是通过为所考虑的每个基础定义一个绑定角色并使所有这些角色扩展一个共同的未绑定角色来完成的。
                  				
               </div>
            </div>
            <h5 class="listing">示例代码（声明提升）：</h5>
            <div class="listing example frame" id="l2.3.2">
               <table class="listing">
                  <tr class="line odd">
                     <td class="ln">1</td>
                     <td><pre><b>team</b> <b>class</b> Super {</pre></td>
                  </tr>
                  <tr class="line even">
                     <td class="ln">2</td>
                     <td><pre>  <b>public</b> <b>class</b> MyRole <b>playedBy</b> MyBase { ... }</pre></td>
                  </tr>
                  <tr class="line odd">
                     <td class="ln">3</td>
                     <td><pre>  <b>void</b> m (MyRole o) { ... };</pre></td>
                  </tr>
                  <tr class="line even">
                     <td class="ln">4</td>
                     <td><pre>}</pre></td>
                  </tr>
                  <tr class="line odd">
                     <td class="ln">五</td>
                     <td><pre><b>team</b> <b>class</b> Sub <b>extends</b> Super {</pre></td>
                  </tr>
                  <tr class="line even">
                     <td class="ln">6</td>
                     <td><pre>  <b>void</b> m (<em>MyBase <b>as</b> MyRole o</em>) {</pre></td>
                  </tr>
                  <tr class="line odd">
                     <td class="ln">7</td>
                     <td><pre>    <span class="comment">// inside this method o is of type MyRole</span></pre></td>
                  </tr>
                  <tr class="line even">
                     <td class="ln">8</td>
                     <td><pre>    super.m(o);</pre></td>
                  </tr>
                  <tr class="line odd">
                     <td class="ln">9</td>
                     <td><pre>  }</pre></td>
                  </tr>
                  <tr class="line even">
                     <td class="ln">10</td>
                     <td><pre>}</pre></td>
                  </tr>
                  <tr class="line odd">
                     <td class="ln">11</td>
                     <td><pre>Sub s_<b>team</b> = <b>new</b> Sub();</pre></td>
                  </tr>
                  <tr class="line even">
                     <td class="ln">12</td>
                     <td><pre>MyBase b = <b>new</b> MyBase();</pre></td>
                  </tr>
                  <tr class="line odd">
                     <td class="ln">13</td>
                     <td><pre>s_team.m(b); <span class="comment">// clients see a parameter "MyBase o"</span></pre></td>
                  </tr>
               </table>
            </div>
            <div class="codecomment">
               <h5>功效：</h5>
               <ul>
                  <li>客户端使用方法<code>m</code>和基本实例（类型<code>MyBase</code> ）作为其参数（第13行）。
                  </li>
                  <li>在执行<code>m</code>的主体之前，解除参数，使得方法体接收<code>MyRole</code>类型的参数（第8行）。
                  </li>
               </ul>
            </div>
         </div>
         <table class="nav">
            <tr>
               <td class="back"><a href="s2.3.1.html" rel="prev">&lt;&lt;§2.3.1隐式角色创建</a></td>
               <td class="top"><a href="index.html" rel="contents">↑目录↑</a></td>
               <td class="next"><a href="s2.3.3.html" rel="next">§2.3.3智能提升&gt;&gt;</a></td>
            </tr>
         </table>
         <div class="breadcrumb"><a class="nav" href="s2.html" rel="section">§2角色绑定</a> &gt; <a class="nav" href="s2.3.html" rel="section">§2.3提升</a></div>
      </div>
      <div id="footer">
         <hr><a class="w3c img" href="http://jigsaw.w3.org/css-validator/check/referer" shape="rect"><img src="../images/valid-css2-blue.png" alt="有效的CSS！" height="31" width="88"></a><a class="w3c img" href="http://validator.w3.org/check?uri=referer" shape="rect"><img src="../images/valid-xhtml10-blue.png" alt="有效的XHTML 1.0严格" height="31" width="88"></a><address>©Stephan Herrmann，Christine Hundt，Marco Mosconi</address>OT / J版本1.3.1  - 最后修改时间：2013-05-28</div>
   </body>
</html>
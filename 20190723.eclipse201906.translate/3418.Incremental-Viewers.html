<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Incremental Viewers</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Incremental Viewers</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The VIATRA <a href="https://wiki.eclipse.org/index.php?title=VIATRA/Addon/VIATRA_Viewers">Viewers Framework</a> is applied to create custom views for the CPS demonstrator.</p>
</div>
<div class="paragraph">
<p>The views are defined using declarative pattern annotations which specify items and edges in a view. The view may be a graph visualization, but simple UI elements, such as lists or tree views are also supported by the technology. In the CPS demonstrator, we created views using the <a href="https://www.eclipse.org/gef/zest/">Zest</a> Graph Visualization framework.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://git.eclipse.org/c/viatra/org.eclipse.viatra.examples.git/plain/cps/models/org.eclipse.viatra.examples.cps.instances/deployment_viewer.png" alt="Deployment model viewer">
</div>
</div>
<div class="paragraph">
<p>The definition of the views can be found in the <code>cps.queries</code> project in the <code>model/viewer</code> and <code>deployment/viewer</code> packages. Items are defined with <code>@Item</code> annotations, edges are specified with <code>@Edge</code> annotations, while the format (such as colours) is described with <code>@Format</code> annotations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_viewer_example">Viewer example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following patterns define the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create items for each deployment host</p>
</li>
<li>
<p>Create items for each deployment application</p>
</li>
<li>
<p>Create edges between items that correspond to the deployment host and application objects</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>@Format(color = "#FBFE00")
@Item(item = host, label = "Host $host.ip$")
pattern deploymentHostItem(host) {
    DeploymentHost(host);
}

@Format(color = "#996600")
@Item(item = app, label = "App $app.id$")
pattern deploymentApplicationItem(app) {
    DeploymentApplication(app);
}

@Edge(source = host, target = app, label = "apps")
pattern deploymentHostApplicationEdge(host, app) {
    DeploymentHost.applications(host, app);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>
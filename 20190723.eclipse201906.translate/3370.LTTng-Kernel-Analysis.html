<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
		<title>Trace Compass用户指南 -  LTTng内核分析</title>
		<link type="text/css" rel="stylesheet" href="book.css"></link>
	</head>
	<body dir="ltr">
		<table class="navigation" border="0" style="width:100%" summary="navigation">
			<tr>
				<th align="center" colspan="3" style="width:100%">LTTng内核分析</th>
			</tr>
			<tr>
				<td align="left" style="width:20%">
					<a href="LTTng-Tracer-Control.html" title="LTTng Tracer Control">
						<img alt="以前" border="0" src="images/prev.gif">
					</a>
				</td>
				<td align="center" style="width:60%"></td>
				<td align="right" style="width:20%">
					<a href="LTTng-UST-Analyses.html" title="LTTng-UST分析">
						<img alt="下一个" border="0" src="images/next.gif">
					</a>
				</td>
			</tr>
			<tr>
				<td align="left" valign="top" style="width:20%">LTTng Tracer Control</td>
				<td align="center" style="width:60%"></td>
				<td align="right" valign="top" style="width:20%">LTTng-UST分析</td>
			</tr>
		</table><hr class="navigation-separator">
		<h1 id="LTTng_Kernel_Analysis">LTTng内核分析</h1>
		<p>从历史上看，LTTng是为跟踪Linux内核而开发的，随着时间的推移，我们开发并组织了许多面向内核的分析视图。</p>
		<p>本节介绍<b>操作系统跟踪概述</b>透视图和<b>LTTng内核</b>透视图。
		</p>
		<h2 id="OS_Tracing_Overview_Perspective">操作系统跟踪概述视角</h2>
		<p><b>操作系统跟踪概述</b>透视图将以下视图分组：</p>
		<ul>
			<li>
				<a href="Trace-Compass-Main-Features.html#Project_Explorer_View">Project Explorer视图</a>
			</li>
			<li>
				<a href="Trace-Compass-Main-Features.html#Events_Editor">活动编辑</a>
			</li>
			<li>
				<a href="Trace-Compass-Main-Features.html#Histogram_View">直方图视图</a>
			</li>
			<li>
				<a href="#LTTng_CPU_Usage_View">CPU使用率视图</a>
			</li>
			<li>
				<a href="#Disk_I.2FO_Activity_View">磁盘I / O活动视图</a>
			</li>
			<li>
				<a href="#Kernel_Memory_Usage_View">内核内存使用情况视图</a>
			</li>
		</ul>
		<p>可以从Eclipse Open Perspective对话框（ <b>Window&gt; Open Perspective ...&gt; Other</b> ） <b>打开透视图</b> 。
		</p>
		<p>
			<img border="0" src="images/osOverview/select_os_overview.png">
		</p>
		<p>此透视图旨在用于通过观察资源使用情况来定位性能问题。</p>
		<p>透视图可以显示资源使用情况是异常的。这有助于找出系统在吞吐量或响应时间方面减速的原因。</p>
		<p>一个示例可以是执行大量处理的程序，然后由于数据库访问而减慢。用户将看到CPU使用率下降，I / O访问可能略有上升。用户应该将尖峰和贫民窟都视为值得研究的区域。</p>
		<p>
			<img border="0" src="images/osOverview/os_overview_perspective.png">
		</p>
		<p>一旦性能问题得到了本地化，就可以使用#LTTng内核Perspective进一步调查。</p>
		<h2 id="LTTng_Kernel_Perspective">LTTng内核视角</h2>
		<p><b>LTTng Kernel</b>透视图基于<a href="Trace-Compass-Main-Features.html#Tracing_Perspective">Tracing Perspective</a>构建，稍微重新组织它们并添加以下视图：</p>
		<ul>
			<li>
				<a href="#Control_Flow_View">控制流视图</a> - 可视化流程状态转换</li>
			<li>
				<a href="#Resources_View">资源视图</a> - 可视化系统资源状态转换</li>
			<li>
				<a href="LTTng-Tracer-Control.html#LTTng_Tracer_Control">LTTng Tracer Control</a> - 远程配置LTTng跟踪会话</li>
		</ul>
		<p>
			<img border="0" src="images/LTTngKernelPerspective.png">
		</p>
		<p>可以从Eclipse Open Perspective对话框（ <b>Window&gt; Open Perspective ...&gt; Other</b> ） <b>打开透视图</b> 。
		</p>
		<p>
			<img border="0" src="images/OpenLTTngKernelPerspective.png">
		</p>
		<h2 id="Control_Flow_View">控制流视图</h2>
		<p>“ <b><i>控制流”</i></b>视图是一个LTTng特定的视图，以图形方式显示每个进程的事件。Linux内核分析在第一次打开LTTng内核时执行。打开跟踪后，将在Project Explorer中的<b>Linux Kernel Analysis</b>树元素下添加元素<b>Control Flow</b> 。要打开视图，请双击“ <b>控制流”</b>树元素。
		</p>
		<p>
			<img border="0" src="images/Cfv_show_view.png">
		</p>
		<p>或者，在<i>Show View</i>窗口中选择<i>LTTng</i>下的<i>Control Flow</i> （ <b>Window</b> - &gt; <b>Show View</b> - &gt; <b>Other ...</b> ）：</p>
		<p>你应该得到这样的东西：</p>
		<p>
			<img border="0" src="images/Cfv_global.png">
		</p>
		<p>视图分为以下重要部分： <b>进程树和信息</b> ， <b>控制流</b>和<b>工具栏</b> 。时间轴与支持自动时间轴对齐的其他视图对齐（请参阅<a href="Trace-Compass-Main-Features.html#Automatic_Time_Axis_Alignment">自动时间轴对齐</a> ）。
		</p>
		<p>以下部分提供了控制流视图的每个部分的详细信息。</p>
		<h3 id="Process_tree_and_information">处理树和信息</h3>
		<p>进程在此视图中组织为树。这样，子进程和父进程很容易识别。</p>
		<p>
			<img border="0" src="images/Cfv_process_tree.png">
		</p>
		<p>布局基于跟踪事件计算的状态。</p>
		<p>由于节点是<b>唯一的（TID，出生时间）对，因此</b>可以在树内的不同位置示出给定过程。这意味着如果父A的进程B死亡，您仍然会在树中看到它。如果进程A再次处理进程B，则它将显示为不同的节点，因为它不会具有相同的出生时间（并且可能不是相同的TID）。这具有以下优点：树一旦加载就永远不会改变： <a href="#Control_flow">控制流</a>内的水平滚动仍然是可能的。
		</p>
		<p>TID列显示进程节点的<b>线程ID</b> ，PTID列显示<b>其父线程ID</b> （如果进程没有父进程，则不显示任何内容）。
		</p>
		<p>可以通过单击列标题对树的列进行排序。随后单击将更改排序顺序。保持层次结构，即父子关系。首次打开跟踪时，按<b>出生时间</b>对进程进行排序。在打开的跟踪之间切换时，将保留排序顺序和列。请注意，在打开实验时，将在每个跟踪中对进程进行排序。
		</p>
		<h3 id="Control_flow">控制流</h3>
		<p>控制流视图的这一部分可能是最有趣的部分。使用鼠标，您可以浏览轨迹（向左，向右）并放大特定区域以检查其详细信息。</p>
		<p>您所看到的彩色条代表相关的工艺节点<b>的状态</b> 。当过程状态随时间变化时，颜色也会变化。对于状态<b>SYSCALL</b> ，系统调用的名称显示在状态栏中。状态颜色图例可通过<a href="#Toolbar">工具栏按钮获得</a> ：</p>
		<p>
			<img border="0" src="images/Cfv_legend.png">
		</p>
		<p>样式可以在图例中更新。</p>
		<p>这种深黄色是大多数时候你会看到的，因为调度会使进程保持不变而其他进程运行。</p>
		<p>其上方T1的垂直蓝线是<b>当前选择指示器</b> 。选择时间范围时，将选择开始和结束时间之间的区域，并显示上面带有T1和T2的两条线。当鼠标悬停在控制流上时，状态行中显示对应于T1，T2及其增量的时间戳。
		</p>
		<p>可以显示在跨进程执行每个CPU之后的箭头。箭头指示调度程序何时从给定CPU的一个进程切换到另一个进程。在状态工具提示上指示所遵循的CPU。当调度程序切换到空闲进程和从空闲进程切换时，箭头跳到下一个进程，该进程在空闲进程之后在CPU上执行。请注意，要显示的所有箭头都需要适当的缩放级别。</p>
		<p>箭头的显示是可选的，可以使用“ <b>隐藏箭头”</b>工具栏按钮切换。还可以使用“ <b>跟随CPU前进/后退”</b>工具栏按钮<b>跟踪CPU</b>在状态更改和调度程序进程切换中的执行情况。
		</p>
		<h4 id="Using_the_mouse">用鼠标</h4>
		<p>可以使用以下鼠标操作：</p>
		<ul>
			<li>
				<b>左键单击</b> ：选择时间或时间范围开始时间</li>
			<li>
				<b>按住Shift键并单击或拖动</b> ：扩展或缩小选择范围</li>
		</ul>
		<ul>
			<li>
				<b>左拖动</b> ：选择时间范围或更改时间范围开始或结束时间</li>
			<li>
				<b>中间拖动或Ctrl-左拖动</b> ：水平和/或垂直平移</li>
			<li>
				<b>水平右拖</b> ： <a href="#Zoom_region">缩放区域</a>
			</li>
			<li>
				<b>单击彩色条</b> ：选择关联的流程节点，并在发生单击的位置移动当前时间指示器</li>
			<li>
				<b>鼠标滚轮向上/向下</b> ：向上或向下滚动</li>
			<li>
				<b>向上/向下移动鼠标滚轮</b> ：向左或向右滚动</li>
			<li>
				<b>Ctrl-鼠标滚轮向上/向下</b> ：水平放大或缩小</li>
			<li>
				<b>Shift-Ctrl-鼠标滚轮向上/向下</b> ：垂直放大或缩小</li>
			<li>
				<b>水平拖动时间标尺</b> ：以固定的开始时间放大或缩小</li>
			<li>
				<b>双击时间标尺</b> ：将缩放重置为全范围</li>
		</ul>
		<p>当更改当前时间指示器时（单击状态流时），将<b>同步</b>所有其他视图。例如， <a href="#LTTng_Kernel_Events_Editor">事件编辑器</a>将显示与当前时间指示器匹配的事件。还实现了相反的行为：在事件视图中选择事件将更新控制流视图当前时间指示器。
		</p>
		<h4 id="Using_the_keyboard">使用键盘</h4>
		<p>可以使用以下键盘快捷键：</p>
		<ul>
			<li>
				<b>arrow-right键</b> ：选择所选进程的下一个状态</li>
			<li>
				<b>arrow-left键</b> ：选择所选进程的先前状态</li>
			<li>
				<b>Shift + arrow-right键</b> ：通过选择当前进程的下一个状态来更新当前选择范围的选择结束时间</li>
			<li>
				<b>Shift +向左箭头键</b> ：通过选择当前进程的先前状态来更新当前选择范围的选择结束时间</li>
			<li>
				<b>。</b> ：选择下一个活动标记</li>
			<li>
				<b>，</b> ：选择上一个活动标记</li>
			<li>
				<b>Shift +。</b> ：通过选择下一个活动标记边界来更新当前选择范围的选择结束时间</li>
			<li>
				<b>Shift + ,</b> :通过选择上一个活动标记边界来更新当前选择范围的选择结束时间</li>
			<li>
				<b>向下箭头</b> ：选择下一个进程</li>
			<li>
				<b>向上箭头</b> ：选择上一个过程</li>
			<li>
				<b>Page Down</b> ：在一页中选择进程</li>
			<li>
				<b>Page Up</b> ：选择<b>一页上</b>的进程</li>
			<li>
				<b>主页</b> ：选择第一个流程</li>
			<li>
				<b>结束</b> ：选择最后一个进程</li>
			<li>
				<b>输入</b> ：切换树中当前进程的扩展状态</li>
			<li>
				<b>+</b> ：以所选时间范围为中心放大（如果时间选择不可见，则放大窗口范围）</li>
			<li>
				<b>-</b> ：缩小中心到所选时间范围（如果时间选择不可见，则缩小窗口范围）</li>
			<li>
				<b>Ctrl + +</b> ：垂直放大</li>
			<li>
				<b>Ctrl +  -</b> ：垂直缩小</li>
			<li>
				<b>Ctrl + 0</b> ：重置垂直缩放</li>
			<li>
				<b>Ctrl + F</b> ：在视图中搜索。 （请参阅<a href="Trace-Compass-Main-Features.html#Searching_in_Time_Graph_Views">在时间图表视图中搜索</a> ）</li>
			<li>
				<b>G</b> ：切换垂直和水平网格线</li>
			<li>
				<b>Z</b> ：缩放到当前选定的时间范围（如果范围大于0）</li>
		</ul>
		<p>
			<b>WASD导航</b>
		</p>
		<p>将WASD导航与鼠标结合使用，其中一只手改变鼠标位置，另一只手使用键盘快捷键进行缩放或滚动。</p>
		<ul>
			<li>
				<b>W</b> ：水平居中放大到鼠标位置</li>
			<li>
				<b>S</b> ：水平居中缩放到鼠标位置</li>
			<li>
				<b>答</b> ：向左滚动当前窗口范围的四分之一</li>
			<li>
				<b>D</b> ：向右滚动当前窗口范围的四分之一</li>
		</ul>
		<p>当鼠标光标在条目上时（左窗格）：</p>
		<ul>
			<li>
				<b>-</b> ：折叠选定的条目</li>
			<li>
				<b>+</b> ：展开所选条目</li>
			<li>
				<b>*</b> ：将所选条目展开到至少有一个折叠条目的级别</li>
		</ul>
		<p>
			<b>请注意，某些快捷方式的行为可能会因操作系统而略有不同。</b>
		</p>
		<p>更改选择指示器后，将<b>同步</b>所有其他视图。例如， <a href="#LTTng_Kernel_Events_Editor">事件编辑器</a>将显示与当前时间指示器匹配的事件。还实现了相反的行为：在事件视图中选择事件将更新控制流视图当前时间指示器。
		</p>
		<h4 id="Incomplete_regions">不完整的地区</h4>
		<p>您会注意到某些地方的彩色条纹上有<b>小点</b> ：</p>
		<p>
			<img border="0" src="images/Cfv_small_dots.png">
		</p>
		<p>这些点意味着底层区域<b>不完整</b> ：没有足够的像素来查看所有事件。换句话说，你必须放大。
		</p>
		<p>放大时，小点开始消失：</p>
		<p>
			<img border="0" src="images/Cfv_zoom.png">
		</p>
		<p>如果没有剩余点，则表示您正在查看<b>该区</b>域内的<b>所有事件和状态</b> 。
		</p>
		<h4 id="Zoom_region">缩放区域</h4>
		<p>要放大特定区域，请<b>右键单击并拖动</b>以绘制时间范围：</p>
		<p>
			<img border="0" src="images/Cfv_zoom_region.png">
		</p>
		<p>状态流水平空间仅显示所选区域。</p>
		<h4 id="Tooltips">提示</h4>
		<p>将光标悬停在彩色条上，弹出<b>工具提示</b> ：</p>
		<p>
			<img border="0" src="images/Cfv_tooltip.png">
		</p>
		<p>工具提示表明：</p>
		<ul>
			<li>进程名称</li>
			<li>尖头的州名</li>
			<li>CPU（如适用）</li>
			<li>系统调用名称（如果适用）</li>
			<li>指向状态日期和开始/停止时间</li>
			<li>指向状态持续时间（秒）</li>
		</ul>
		<p>提供基于浏览器的工具提示，允许用户使用超链接导航或复制文本。要启用功能选择</p>
		<p>
			<b>窗口</b> - &gt; <b>首选项</b> - &gt; <b>跟踪</b>然后检查<b>使用基于浏览器的工具提示</b> 。众所周知，在较旧的平台上不稳定，如果遇到这种不稳定，请在此处提交您的错误： <a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=547563">https</a> ： <a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=547563">//bugs.eclipse.org/bugs/show_bug.cgi？id = 547563</a>
		</p>
		<p>
			<img border="0" src="images/tooltippref.png">
		</p>
		<h4 id="Dynamics_Filters">动态过滤器</h4>
		<p>动态过滤器是每次控制流视图可见时间范围更改时处理和应用的过滤器。</p>
		<p>动态滤波器可以在其子视图子菜单中快速切换。</p>
		<p>
			<img border="0" src="images/DynamicFilters/DynamicFiltersToggle.png">
		</p>
		<p>动态过滤器可以在配置对话框中进行微调。</p>
		<p>
			<img border="0" src="images/DynamicFilters/DynamicFiltersConfigure.png">
		</p>
		<p>注意：动态过滤器可能会导致性能下降。</p>
		<h5 id="Show_Active_Threads_Only">仅显示活动主题</h5>
		<p>“仅显示活动线程”过滤器允许用户通过过滤掉所有<u>非活动</u>线程来提高信噪比。</p>
		<p>当线程处于以下状态时，该线程被视为非活动状态：</p>
		<ul>
			<li>不存在</li>
			<li>未知</li>
			<li>等待和阻止</li>
			<li>等待和未知</li>
		</ul>
		<p>用户可以通过提供CPU范围来微调此过滤器，从而允许过滤器仅显示在指定CPU上运行的活动线程。</p>
		<p>
			<img border="0" src="images/DynamicFilters/DynamicFilter_ShowActiveThreadsConfigure.png">
		</p>
		<h3 id="Toolbar">工具栏</h3>
		<p>位于视图右上角的“控制流视图” <b>工具栏</b>具有执行常用操作的快捷按钮：</p>
		<table>
			<tr>
				<td>
					<img border="0" src="images/filter_items.gif">
				</td>
				<td>显示视图过滤器</td>
				<td>打开过程过滤器对话框。在打开的跟踪之间切换时，将保留过滤器设置。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/show_legend.gif">
				</td>
				<td>显示传奇</td>
				<td>显示状态图例。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/Optimization.png">
				</td>
				<td>优化</td>
				<td>“优化”控制流视图的行顺序。这通过最小化CPU在给定时间范围内的转换图中的距离来对线程进行分组。调度程序通常会在同一CPU上保持紧密耦合的线程以保留数据位置。一个有趣的副作用是，按下按钮时，在该时间范围内一起通信的线程将更加靠近。按钮仅在按下时才会移动行。移动时间范围时，可以重新应用优化操作。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/home_nav.gif">
				</td>
				<td>将时间刻度重置为默认值</td>
				<td>将缩放窗口重置为整个范围。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/prev_event.gif">
				</td>
				<td>选择以前的状态更改</td>
				<td>选择所选进程的先前状态。同时按下<b>Shift</b>键将更新当前选择范围的选择结束时间。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/next_event.gif">
				</td>
				<td>选择下一状态更改</td>
				<td>选择所选进程的下一个状态。同时按下<b>Shift</b>键将更新当前选择范围的选择结束时间。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/add_bookmark.gif">
				</td>
				<td>添加书签...</td>
				<td>在当前选择范围添加书签。书签是用户定义的间隔标记。将打开“ <b>添加书签”</b>对话框，用户可以在其中输入说明并选择突出显示颜色和Alpha（透明度）值。如果当前选择范围对应于现有书签，则此按钮将替换为“ <b>删除书签”</b>按钮。书签也可以在<b>书签视图中</b>进行管理。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/remove_bookmark.gif">
				</td>
				<td>删除书签</td>
				<td>删除当前选择范围内的书签。当前选择范围对应于现有书签时，此按钮将替换<b>添加</b>书签。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/prev_bookmark.gif">
				</td>
				<td>以前的标记</td>
				<td>选择上一个活动标记。同时按下<b>Shift</b>键将更新当前选择范围的选择结束时间。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/next_bookmark.gif">
				</td>
				<td>下一个标记</td>
				<td>选择下一个活动标记。同时按下<b>Shift</b>键将更新当前选择范围的选择结束时间。单击按钮下拉箭头将打开一个菜单，其中标记类别可以处于活动状态或非活动状态以进行导航。要切换标记类别的显示，请改用<b>查看菜单</b> 。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/prev_menu.gif">
				</td>
				<td>选择Previous Process</td>
				<td>选择上一个过程。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/next_menu.gif">
				</td>
				<td>选择Next Process</td>
				<td>选择下一个过程。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/zoomin_nav.gif">
				</td>
				<td>放大</td>
				<td>放大50％的选择。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/zoomout_nav.gif">
				</td>
				<td>缩小</td>
				<td>选择缩小50％。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/hide_arrows.gif">
				</td>
				<td>隐藏箭头</td>
				<td>打开或关闭箭头的显示。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/follow_arrow_bwd.gif">
				</td>
				<td>跟随CPU向后</td>
				<td>选择跨进程执行CPU后的先前状态。同时按下<b>Shift</b>键将更新当前选择范围的选择结束时间。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/follow_arrow_fwd.gif">
				</td>
				<td>跟随CPU Forward</td>
				<td>选择跨进程执行CPU后的下一个状态。同时按下<b>Shift</b>键将更新当前选择范围的选择结束时间。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/shift_l_edit.gif">
				</td>
				<td>转到所选线程的上一个事件</td>
				<td>移至属于所选线程的最近的上一个事件。此操作将查看所有跟踪事件，而不像“ <i>选择以前状态更改”</i>操作，该操作仅在状态更改时停止。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/shift_r_edit.gif">
				</td>
				<td>转到所选线程的下一个事件</td>
				<td>移动到属于所选线程的最近的事件。此操作将查看所有跟踪事件，而不像“ <i>选择下一个状态更改”</i>操作，该操作仅在状态更改时停止。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/unpinned_view.gif">
					<br>
					<img border="0" src="images/pin_view.gif">
				</td>
				<td>固定/取消固定视图</td>
				<td>固定或取消固定视图。固定视图被冻结，并且在固定时选择了跟踪。单击取消固定按钮时，视图将同步回活动跟踪。按钮的下拉菜单可用于快速将视图固定到任何打开的迹线。</td>
			</tr>
		</table>
		<p>查看菜单</p>
		<table>
			<tr>
				<td>新的控制流视图</td>
				<td>生成一个新的控制流视图。新视图可以固定到当前跟踪的新实例，固定到任何打开的跟踪或取消固定。</td>
			</tr>
			<tr>
				<td>对齐视图</td>
				<td>禁用并启用基于时间的视图的自动时间轴对齐。在此视图中禁用对齐将在所有视图中禁用此功能，因为它是工作区首选项。</td>
			</tr>
			<tr>
				<td>显示标记</td>
				<td>标记突出显示时间间隔。例如，标记可以用于指示丢失事件发生的时间范围，或者为有趣的间隔添加书签以供将来参考。选择类别名称将切换该类别标记的可见性。</td>
			</tr>
			<tr>
				<td>标记集</td>
				<td>用户可以从配置的市场集中选择一个，或选择“ <b>无”</b>以不使用标记集。该设置适用于支持标记集的所有视图。可以通过选择<b>Edit ...</b>菜单项来<b>编辑</b> <a href="Trace-Compass-Main-Features.html#Marker_Set_Configuration_XML_Format">标记集配置</a> （请参阅<a href="Trace-Compass-Main-Features.html#Marker_Set_Configuration_XML_Format">标记集配置XML格式</a> ）。在打开的编辑器中保存更改后，应重新选择标记集以更新视图。
				</td>
			</tr>
			<tr>
				<td>线程演示</td>
				<td>选择线程布局。有两种布局可供选择。
					<b>平面</b>布局列出每个跟踪的平面列表中的线程。
					<b>分层</b>布局显示每个跟踪的父子树中的线程。
				</td>
			</tr>
			<tr>
				<td></td>
				<td>动态过滤器</td>
				<td>选择并配置要应用的动态过滤器。</td>
			</tr>
		</table>
		<h3 id="Marker_Axis">标记轴</h3>
		<p>仅当显示至少一个带有当前迹线标记的标记类别时，标记轴才可见。</p>
		<p>标记轴显示每个标记类别一行。每个标记的时间范围和/或标签（如果适用）都在标记轴上绘制。</p>
		<p>单击任何标记的时间范围或标签会将当前时间选择设置为标记的时间或时间范围。</p>
		<p>单击标记类别名称左侧的“X”图标将从时间图中隐藏此标记类别。可以使用视图菜单中相应的“ <b>显示标记”</b>菜单项再次<b>显示</b> 。
		</p>
		<p>通过单击标记轴左上角的图标，可以折叠和展开标记轴。可以通过隐藏所有可用的标记类别来完全移除标记轴。</p>
		<h2 id="Resources_View">资源视图</h2>
		<p>此视图特定于LTTng内核跟踪。Linux内核分析在第一次打开LTTng内核时执行。打开跟踪后，元素<b>Resources</b>将添加到Project Explorer的<b>Linux Kernel Analysis</b>树元素下。要打开视图，请双击<b>Resources</b>树元素。
		</p>
		<p>或者，进入<b>Window</b> - &gt; <b>Show View</b> - &gt; <b>Other ...</b>并在列表中选择<b>LTTng / Resources</b> 。
		</p>
		<p>
			<img title="启用了所有跟踪点和系统调用的资源视图示例" alt="启用了所有跟踪点和系统调用的资源视图示例" border="0" src="images/Rv_example.png">
		</p>
		<p>此视图显示系统资源的状态，即如果在<b>CPU</b> ， <b>IRQ</b>或<b>软IRQ</b>上跟踪期间发生更改，它将显示在此视图中。视图的左侧显示受至少一个跟踪事件影响的资源列表。右侧说明了每个资源在某个时间点的状态。对于状态<b>USERMODE</b> ，它还在状态栏中输出进程名称。对于状态<b>SYSCALL</b> ，系统调用的名称显示在状态区域中。
		</p>
		<p>当<b>CPU</b>处理<b>IRQ时</b> ，其状态显示在相应的<b>CPU</b>条目下。类似地，正在处理一个<b>IRQ</b> <b>CPU</b>正在处理的<b>IRQ</b>下所示。因此，可以从<b>CPU</b>的角度或从<b>IRQ的</b>角度可视化跟踪。
		</p>
		<p>与其他视图一样，根据激活跟踪点和系统调用，此视图的内容可能会从一个跟踪更改为另一个跟踪。</p>
		<p>时间轴与支持自动时间轴对齐的其他视图对齐（请参阅<a href="Trace-Compass-Main-Features.html#Automatic_Time_Axis_Alignment">自动时间轴对齐</a> ）。
		</p>
		<p>每种状态都用一种颜色表示，因此说出正在发生的事情会更快。</p>
		<p>
			<img title="每个州的颜色" alt="每个州的颜色" border="0" src="images/Rv_legend.png">
		</p>
		<p>样式可以在图例中更新。</p>
		<p>要完成资源状态，首先必须选择您感兴趣的资源和时间戳。对于后者，您可以在跟踪的有趣部分之前选择一些时间。</p>
		<p>
			<img title="显示IRQ的状态" alt="显示IRQ的状态" border="0" src="images/RV_infobox1.png">
		</p>
		<p>然后，通过选择<b>Next Event</b> ，它将显示下一个状态转换以及此时发生的事件。
		</p>
		<p>
			<img title="显示IRQ的下一个状态" alt="显示IRQ的下一个状态" border="0" src="images/RV_infobox2.png">
		</p>
		<p>此视图也与其他视图同步： <a href="Trace-Compass-Main-Features.html#Histogram_View">直方图视图</a> ， <a href="#LTTng_Kernel_Events_Editor">事件编辑器</a> ， <a href="#Control_Flow_View">控制流视图</a>等。</p>
		<h3 id="Follow_CPU">关注CPU</h3>
		<p>可以通过右键单击视图中的条目来<i>跟踪CPU</i> ，然后选择<i>Follow CPU X</i> ，其中X是CPU的编号。在CPU之后，将过滤<a href="#LTTng_CPU_Usage_View">CPU使用率视图</a>以仅显示所选CPU的使用情况。要取消关注CPU，需要右键单击任何CPU条目并选择<i>取消关注CPU</i> 。</p>
		<h3 id="Follow_thread">跟随线程</h3>
		<p>可以通过右键单击CPU线程状态行中的线程时间事件来<i>跟踪</i>线程，然后选择<i>Follow TID X</i> ，其中X是要遵循的线程的TID编号。在线程之后，将在属于该特定线程的所有时间事件周围显示一个红色框。要取消关注线程，需要右键单击任何线程时间事件并选择<i>取消关注</i> 。
		</p>
		<p>
			<img title="在资源视图中跟踪线程" alt="在资源视图中跟踪线程" border="0" src="images/resourcesView/followThread.png">
		</p>
		<h3 id="Navigation">导航</h3>
		<p>请参阅控制流视图<b><a href="#Using_the_mouse">使用鼠标</a></b> ， <b><a href="#Using_the_keyboard">使用键盘</a></b>和<b><a href="#Zoom_region">缩放区域</a></b> 。
		</p>
		<h3 id="Incomplete_regions_2">不完整的地区</h3>
		<p>请参阅控制流视图的<b><a href="#Incomplete_regions">不完整区域</a></b> 。
		</p>
		<h3 id="Toolbar_2">工具栏</h3>
		<p>位于视图右上角的“资源视图” <b>工具栏</b>具有执行常用操作的快捷按钮：</p>
		<table>
			<tr>
				<td>
					<img border="0" src="images/filter_items.gif">
				</td>
				<td>显示视图过滤器</td>
				<td>打开资源过滤器对话框。在打开的跟踪之间切换时，将保留过滤器设置。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/show_legend.gif">
				</td>
				<td>显示传奇</td>
				<td>显示状态图例。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/home_nav.gif">
				</td>
				<td>将时间刻度重置为默认值</td>
				<td>将缩放窗口重置为整个范围。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/prev_event.gif">
				</td>
				<td>选择以前的状态更改</td>
				<td>选择所选资源的先前状态。同时按下<b>Shift</b>键将更新当前选择范围的选择结束时间。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/next_event.gif">
				</td>
				<td>选择下一状态更改</td>
				<td>选择所选资源的下一个状态。同时按下<b>Shift</b>键将更新当前选择范围的选择结束时间。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/add_bookmark.gif">
				</td>
				<td>添加书签...</td>
				<td>在当前选择范围添加书签。书签是用户定义的间隔标记。将打开“ <b>添加书签”</b>对话框，用户可以在其中输入说明并选择突出显示颜色和Alpha（透明度）值。如果当前选择范围对应于现有书签，则此按钮将替换为“ <b>删除书签”</b>按钮。书签也可以在<b>书签视图中</b>进行管理。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/remove_bookmark.gif">
				</td>
				<td>删除书签</td>
				<td>删除当前选择范围内的书签。当前选择范围对应于现有书签时，此按钮将替换<b>添加</b>书签。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/prev_bookmark.gif">
				</td>
				<td>以前的标记</td>
				<td>选择上一个活动标记。同时按下<b>Shift</b>键将更新当前选择范围的选择结束时间。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/next_bookmark.gif">
				</td>
				<td>下一个标记</td>
				<td>选择下一个活动标记。同时按下<b>Shift</b>键将更新当前选择范围的选择结束时间。单击按钮下拉箭头将打开一个菜单，其中标记类别可以处于活动状态或非活动状态以进行导航。
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/prev_menu.gif">
				</td>
				<td>选择Previous Resource</td>
				<td>选择以前的资源</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/next_menu.gif">
				</td>
				<td>选择Next Resource</td>
				<td>选择下一个资源</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/zoomin_nav.gif">
				</td>
				<td>放大</td>
				<td>放大50％的选择。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/zoomout_nav.gif">
				</td>
				<td>缩小</td>
				<td>选择缩小50％。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/unpinned_view.gif">
					<br>
					<img border="0" src="images/pin_view.gif">
				</td>
				<td>固定/取消固定视图</td>
				<td>固定或取消固定视图。固定视图被冻结，并且在固定时选择了跟踪。单击取消固定按钮时，视图将同步回活动跟踪。按钮的下拉菜单可用于快速将视图固定到任何打开的迹线。</td>
			</tr>
		</table>
		<p>查看菜单</p>
		<table>
			<tr>
				<td>新资源视图</td>
				<td>生成一个新的Resources视图。新视图可以固定到当前跟踪的新实例，固定到任何打开的跟踪或取消固定。</td>
			</tr>
			<tr>
				<td>对齐视图</td>
				<td>禁用并启用基于时间的视图的自动时间轴对齐。在此视图中禁用对齐将在所有视图中禁用此功能，因为它是工作区首选项。</td>
			</tr>
			<tr>
				<td>显示标记</td>
				<td>标记突出显示时间间隔。例如，标记可以用于指示丢失事件发生的时间范围，或者为有趣的间隔添加书签以供将来参考。选择类别名称将切换该类别标记的可见性。</td>
			</tr>
			<tr>
				<td>标记集</td>
				<td>用户可以从配置的市场集中选择一个，或选择“ <b>无”</b>以不使用标记集。该设置适用于支持标记集的所有视图。可以通过选择<b>Edit ...</b>菜单项来<b>编辑</b> <a href="Trace-Compass-Main-Features.html#Marker_Set_Configuration_XML_Format">标记集配置</a> （请参阅<a href="Trace-Compass-Main-Features.html#Marker_Set_Configuration_XML_Format">标记集配置XML格式</a> ）。在打开的编辑器中保存更改后，应重新选择标记集以更新视图。
				</td>
			</tr>
		</table>
		<h3 id="Marker_Axis_2">标记轴</h3>
		<p>请参阅控制流视图的<b><a href="#Marker_Axis">标记轴</a></b> 。
		</p>
		<h2 id="LTTng_CPU_Usage_View">LTTng CPU使用率视图</h2>
		<p>CPU使用率分析和视图特定于LTTng内核跟踪。只要在跟踪收集期间启用了<b>sched_switch</b>事件，CPU使用率就从内核跟踪派生。在打开跟踪后第一次打开CPU Usage视图时执行此分析。要打开视图，请双击Project Explorer的<b>Linux Kernel Analysis</b>树元素下的<b>CPU Usage</b>树元素。
		</p>
		<p>
			<img border="0" src="images/LTTng_OpenCpuUsageView.png">
		</p>
		<p>现在，CPU Usage视图将显示：</p>
		<p>
			<img border="0" src="images/LTTng_CpuUsageView.png">
		</p>
		<p>该视图分为以下重要部分： <b>进程信息</b>和<b>CPU使用率图表</b> 。时间轴与支持自动时间轴对齐的其他视图对齐（请参阅<a href="Trace-Compass-Main-Features.html#Automatic_Time_Axis_Alignment">自动时间轴对齐</a> ）。
		</p>
		<h3 id="Process_Information">处理信息</h3>
		<p>“进程信息”显示在视图的左侧，并显示在当前时间范围内所有可用CPU上执行的所有线程。对于每个进程，它在不同的列中显示当前时间范围内的线程ID（TID），进程名称（进程），平均（％）执行时间和实际执行时间（时间）。它显示了当前时间范围内在CPU上执行的所有线程。</p>
		<h3 id="CPU_Usage_Chart">CPU使用率图表</h3>
		<p>视图右侧的CPU使用情况图表，显示了所有进程的所有CPU花费的总时间以及所选进程的时间。</p>
		<h4 id="Tooltips_2">提示</h4>
		<p>将光标悬停在图表的某一行上，将弹出一个工具提示，其中包含以下信息：</p>
		<ul>
			<li>
				<b>时间</b> ：鼠标位置的当前时间</li>
			<li>
				<b>total</b> ：总CPU使用率</li>
			<li>
				<b>&lt;process&gt;</b> ：所选进程的CPU使用率</li>
		</ul>
		<p>
			<img border="0" src="images/LTTng_CpuUsageViewToolTip.png">
		</p>
		<h4 id="Using_the_mouse_2">用鼠标</h4>
		<p>CPU使用率图表可与鼠标一起使用。设置了以下操作：</p>
		<ul>
			<li>
				<b>左键单击</b> ：选择时间或时间范围开始时间</li>
			<li>
				<b>按住Shift键并单击或拖动</b> ：扩展或缩小选择范围</li>
			<li>
				<b>左拖动</b> ：选择时间范围或更改时间范围开始或结束时间</li>
			<li>
				<b>中间拖动或Ctrl-左键水平拖动</b> ：向左或向右平移</li>
			<li>
				<b>水平右拖</b> ： <a href="#Zoom_region">缩放区域</a>
			</li>
			<li>
				<b>向上/向下移动鼠标滚轮</b> ：向左或向右滚动</li>
			<li>
				<b>Ctrl-鼠标滚轮向上/向下</b> ：水平放大或缩小</li>
		</ul>
		<h4 id="Using_the_keyboard_2">使用键盘</h4>
		<p>当鼠标光标位于图形上方（右侧窗格）时，可以使用以下键盘快捷键：</p>
		<ul>
			<li>
				<b>+</b> ：水平居中放大到所选时间范围（如果时间选择不可见，则放大窗口范围）</li>
			<li>
				<b>-</b> ：水平居中缩小到所选时间范围（如果时间选择不可见，则缩小窗口范围）</li>
			<li>
				<b>Z</b> ：如果选择范围大于0，则缩放到当前选择时间范围</li>
		</ul>
		<p>
			<b>WASD导航</b>
		</p>
		<p>将WASD导航与鼠标结合使用，其中一只手改变鼠标位置，另一只手使用键盘快捷键进行缩放或滚动。</p>
		<ul>
			<li>
				<b>W</b> ：水平居中放大到鼠标位置</li>
			<li>
				<b>S</b> ：水平居中缩放到鼠标位置</li>
			<li>
				<b>答</b> ：向左滚动当前窗口范围的四分之一</li>
			<li>
				<b>D</b> ：向右滚动当前窗口范围的四分之一</li>
		</ul>
		<h4 id="Toolbar_3">工具栏</h4>
		<p>视图<b>工具栏</b>位于视图的右上角，具有执行常用操作的快捷按钮：</p>
		<table>
			<tr>
				<td>
					<img border="0" src="images/home_nav.gif">
				</td>
				<td>将时间刻度重置为默认值</td>
				<td>将缩放窗口重置为整个范围。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/zoomin_nav.gif">
				</td>
				<td>放大</td>
				<td>放大50％的选择。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/zoomout_nav.gif">
				</td>
				<td>缩小</td>
				<td>选择缩小50％。</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/unpinned_view.gif">
					<br>
					<img border="0" src="images/pin_view.gif">
				</td>
				<td>固定/取消固定视图</td>
				<td>固定或取消固定视图。固定视图被冻结，并且在固定时选择了跟踪。单击取消固定按钮时，视图将同步回活动跟踪。按钮的下拉菜单可用于快速将视图固定到任何打开的迹线。</td>
			</tr>
		</table>
		<h4 id="View_Menu">查看菜单</h4>
		<p>位于<b>视图</b>右上角的“CPU使用率视图” <b>视图菜单</b>具有执行常用操作的快捷按钮：</p>
		<table>
			<tr>
				<td>新的CPU使用率视图</td>
				<td>生成一个新的CPU Usage视图。新视图可以固定到当前跟踪的新实例，固定到任何打开的跟踪或取消固定。</td>
			</tr>
			<tr>
				<td>对齐视图</td>
				<td>禁用并启用基于时间的视图的自动时间轴对齐。在此视图中禁用对齐将在所有视图中禁用此功能，因为它是工作区首选项。</td>
			</tr>
		</table>
		<h4 id="CPU_Filtering">CPU过滤</h4>
		<p>
			<a href="#Follow_CPU">跟随CPU</a>将过滤CPU使用率视图，并仅显示后续CPU的使用情况。</p>
		<h2 id="Kernel_Memory_Usage_View">内核内存使用情况视图</h2>
		<p>内核内存使用情况和视图特定于内核跟踪。要打开视图，请双击Project Explorer的<b>Kernel</b>树元素下的<b>Kernel</b> <b>Memory Usage Analysis</b>树元素。
		</p>
		<p>
			<img border="0" src="images/kernelMemoryUsage/OpenKernelMemoryUsageView.png">
		</p>
		<p>现在，内核内存使用情况视图将显示：</p>
		<p>
			<img border="0" src="images/kernelMemoryUsage/KernelMemoryUsageView.png">
		</p>
		<p>哪里：</p>
		<ul>
			<li>
				<b>TID</b> ：此事件所属线程的ID</li>
			<li>
				<b>进程</b> ：属于它的TID的进程</li>
		</ul>
		<p>该视图分为以下重要部分： <b>进程信息</b>和<b>相对内核内存使用情况</b> 。时间轴与支持自动时间轴对齐的其他视图对齐（请参阅<a href="Trace-Compass-Main-Features.html#Automatic_Time_Axis_Alignment">自动时间轴对齐</a> ）。
		</p>
		<p>过滤按钮： <img border="0" src="images/filter_items.gif">可用于仅显示树查看器中的活动线程。默认情况下，仅显示在可见时间范围内具有内存使用量变化的线程，单击该按钮将显示所有线程。可以通过在左侧树中检查和取消选中它们来过滤线程。
		</p>
		<p>通过双击时间轴或主页按钮，可以将时间范围设置为完全缩小。</p>
		<h3 id="Process_Information_2">处理信息</h3>
		<p>“进程信息”显示在视图的左侧，并显示在当前时间范围内所有可用CPU上执行的所有线程。对于每个进程，它在不同的列中显示线程ID（TID）和进程名称（进程）。</p>
		<h3 id="Navigation_2">导航</h3>
		<p>有关导航，请参阅CPU使用情况视图<b><a href="#Using_the_mouse_2">使用鼠标</a></b> ， <b><a href="#Using_the_keyboard_2">使用键盘</a></b>和<b><a href="#Zoom_region">缩放区域</a></b> 。
		</p>
		<h3 id="Toolbar_4">工具栏</h3>
		<p>视图<b>工具栏</b>位于视图的右上角，具有执行常用操作的快捷按钮：</p>
		<table>
			<tr>
				<td>
					<img border="0" src="images/filter_items.gif">
				</td>
				<td>过滤活动线程</td>
				<td>仅显示活动主题</td>
			</tr>
		</table>
		<p>对于其他工具栏按钮，请参阅CPU使用情况视图的<b><a href="#Toolbar_3">工具栏</a></b> 。
		</p>
		<h3 id="View_Menu_2">查看菜单</h3>
		<p>内存使用情况视图<b>视图菜单</b>位于<b>视图</b>的右上角，具有执行常用操作的快捷按钮：</p>
		<table>
			<tr>
				<td>新内存使用情况视图</td>
				<td>生成一个新的内存使用情况视图。新视图可以固定到当前跟踪的新实例，固定到任何打开的跟踪或取消固定。</td>
			</tr>
			<tr>
				<td>对齐视图</td>
				<td>禁用并启用基于时间的视图的自动时间轴对齐。在此视图中禁用对齐将在所有视图中禁用此功能，因为它是工作区首选项。</td>
			</tr>
		</table>
		<h3 id="Relative_Kernel_Memory_Chart">相对内核内存图</h3>
		<p>视图右侧的相对内核内存图表绘制了在该段时间内分配和释放的相对内存量。</p>
		<h4 id="Navigation_3">导航</h4>
		<p>有关导航，请参阅CPU使用情况视图<b><a href="#Using_the_mouse_2">使用鼠标</a></b> ， <b><a href="#Using_the_keyboard_2">使用键盘</a></b>和<b><a href="#Zoom_region">缩放区域</a></b> 。
		</p>
		<h4 id="Tooltips_3">提示</h4>
		<p>将光标悬停在图表的某一行上，将弹出一个工具提示，其中包含以下信息：</p>
		<ul>
			<li>
				<b>时间</b> ：鼠标位置的当前时间</li>
			<li>
				<b>总计</b> ：CPU使用总量</li>
		</ul>
		<p>
			<img border="0" src="images/kernelMemoryUsage/KernelMemoryUsageChart.png">
		</p>
		<h2 id="Process_Wait_Analysis">流程等待分析</h2>
		<p>TraceCompass可以使用操作系统事件恢复本地和分布式进程的等待原因。分析突出显示导致等待的任务和设备。等待原因恢复是递归的，包括在系统上运行的所有任务，并使用数据包跟踪同步在计算机上工作。</p>
		<p>分析详细信息可在文章<a href="http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=7294678&amp;isnumber=4359390">中使用内核跟踪等待分布式系统分析</a> 。
		</p>
		<h3 id="Prerequisites">先决条件</h3>
		<p>该分析需要Linux内核跟踪。特定内核版本和分布式跟踪可能需要额外的检测。该仪器可在GitHub上的<a href="https://github.com/giraldeau/lttng-modules/tree/addons">LTTng模块插件</a>中使用。
		</p>
		<p>所需的事件是：</p>
		<ul>
			<li>
				<b>sched_switch，sched_wakeup</b> ：调度事件指示进程被阻止的时间以及唤醒事件指示<b>取消</b>阻止任务的任务或资源。对于3.8和4.1之间的内核版本，提供事件<b>sched_ttwu</b> （代表试图唤醒）以便在LTTng模块插件中向后兼容。
			</li>
			<li>
				<b>IRQ，SoftIRQ和IPI</b> ：需要中断事件来区分唤醒的上下文。当在中断处理程序内发生唤醒时，它必须与导致中断的设备相关联，而不是与中断的任务相关联。因此，需要中断进入和退出事件。
			</li>
			<li>
				<b>inet_sock_local_in，inet_sock_local_out</b> ：网络事件使用内核中的netfilter挂钩记录TCP / IP数据包头的子集。匹配发送和接收事件以显示分布式进程之间的通信。网络事件对于分析TCP / IP程序中的等待是必需的，无论它们是在本地执行还是在不同的计算机上执行。它们还用于同步多台计算机上记录的跟踪。有关更多详细信息，请参阅<a href="Trace-synchronization.html#Trace_synchronization">跟踪同步</a>部分。
			</li>
		</ul>
		<p>要分析分布式程序，必须同时跟踪处理中涉及的所有计算机。TraceCompass的LTTng Tracer控件可以跟踪远程计算机，但目前不支持控制同时跟踪，这意味着必须单独和交互地启动所有会话。TraceCompass将来会支持此功能。目前，建议使用<a href="https://github.com/giraldeau/lttng-cluster">lttng-cluster</a>命令行工具来控制多台计算机上的同步跟踪会话。此工具基于<a href="http://www.fabfile.org/">Fabric，</a>并使用SSH启动跟踪会话，执行工作负载，停止会话以及收集本地计算机上的跟踪。有关更多信息，请参阅lttng-cluster文档。
		</p>
		<p>我们使用<a href="https://github.com/giraldeau/traces/blob/master/django-vote.tar.gz">Django跟踪</a>作为示例来演示等待分析。
			<a href="https://www.djangoproject.com/">Django</a>是一个流行的Web框架。该应用程序是<a href="https://docs.djangoproject.com/en/1.9/intro/tutorial01/">Django Poll应用程序教程</a> 。跟踪记录在三台计算机上，即客户端（使用Python Mechanize实现），Web服务器（带有WSGI的Apache）和数据库服务器（PostgreSQL）。客户端模拟投票中的投票。
		</p>
		<h3 id="Running_the_analysis">运行分析</h3>
		<p>要同时打开所有三条迹线，我们首先创建一个包含这些迹线的实验，然后同步迹线，使它们具有共同的时基。然后，通过在“ <b>控制流视图”中</b>选择任务来完成分析。结果显示在<b>Critical Flow View中</b> ，其工作方式与<b>Control Flow View</b>类似。下面是加载Django示例的步骤。
		</p>
		<ol>
			<li>下载并解压缩<a href="https://github.com/giraldeau/traces/blob/master/django-vote.tar.gz">Django跟踪</a>存档。
			</li>
			<li>在<a href="#LTTng_Kernel_Perspective">TraceCompass中</a> ，打开<a href="#LTTng_Kernel_Perspective">LTTng内核透视图</a> 。
			</li>
			<li>创建一个新的跟踪项目。选择<b>File  - &gt; New  - &gt; Tracing  - &gt; Tracing Project</b> ，选择一个名称，然后单击<b>Finish</b> 。
			</li>
			<li>在创建的跟踪项目下，右键单击“ <b>跟踪”</b>并选择“ <b>导入...”</b> 。在导入对话框中，单击“ <b>浏览”</b>选择包含提取的跟踪的根目录。应列出三条迹线。选择跟踪，然后单击“ <b>完成”</b> 。导入完成后，跟踪应列在<b>跟踪</b>下方。
			</li>
			<li>右键单击<b>Experiments</b> ，选择<b>New ...</b>并输入实验的名称，例如<b>django</b> 。
			</li>
			<li>右键单击<b>django</b>实验，然后单击<b>Select Traces ....</b>在对话框中，检查三个跟踪<b>django-client</b> ， <b>django-httpd</b>和<b>django-db</b> 。这些痕迹将显示在实验下方。如果在此阶段打开实验，则跟踪不会同步，并且来自不同跟踪的事件之间将存在大的时间间隔。
			</li>
			<li>要同步跟踪，请右键单击<b>django</b>实验，然后选择“ <b>同步跟踪”</b> 。在<b>Select reference trace</b>对话框中，选择任何可用的跟踪，然后单击<b>Finish</b> 。同步完成后，将为每个修改的跟踪显示带有下划线后缀的新条目。创建的跟踪条目具有应用于事件的时间戳的功能，以便根据参考跟踪移动时间。导入后的<b>Project Explorer</b>如下所示。
				<dl>
					<dd>
						<img border="0" src="images/waitAnalysis/KernelWaitAnalysisProjectExplorer.png">
					</dd>
				</dl>
			</li>
			<li>打开实验<b>django</b> 。<b>Control Flow</b>和<b>Resources</b>视图应同时显示三条迹线。
			</li>
			<li>在主菜单中，选择<b>Window  - &gt; Show View  - &gt; Other ...，</b>然后在<b>LTTng</b>下选择<b>Critical Flow View</b> 。目前该视图为空。
			</li>
			<li>在<b>Critical Flow View中</b> ，右键单击<b>Process</b> entry进行分析并选择<b>Follow</b> ，如下图所示。
				<dl>
					<dd>
						<img border="0" src="images/waitAnalysis/KernelWaitAnalysisFollow.png">
					</dd>
					<dd>将执行分析，结果将显示在“ <b>关键流视图”中</b> 。对于Django示例，使用<b>View Filters</b>搜索TID 2327的python进程。在放大执行时，视图显示Web服务器和数据库完成的工作，以处理python客户端的请求。垂直箭头表示进程之间的同步和通信。传奇<img border="0" src="images/show_legend.gif">显示与进程状态关联的颜色。
					</dd>
				</dl>
			</li>
		</ol>
		<p>
			<img border="0" src="images/waitAnalysis/KernelWaitAnalysisDjango.png">
		</p>
		<h2 id="Input.2FOutput_Analysis">输入/输出分析</h2>
		<p>TraceCompass可以通过读/写系统调用来分析磁盘输入/输出，以获得每个进程的读/写，还可以通过磁盘请求事件来获取对磁盘的实际读写。</p>
		<h3 id="Get_the_trace">得到踪迹</h3>
		<p>应启用以下跟踪点以获取磁盘读/写数据。此外，启用系统调用将允许匹配每个进程的读取和写入。</p>
		<pre>#sudo lttng list -k内核事件：------------- ...block_rq_complete（loglevel：TRACE_EMERG（0））（类型：tracepoint）block_rq_insert（loglevel：TRACE_EMERG（0））（类型：tracepoint）block_rq_issue（loglevel：TRACE_EMERG（0））（类型：tracepoint）＃来宾块block_bio_frontmerge（loglevel： TRACE_EMERG（0））（类型：tracepoint）＃来宾...
</pre>
		<p>对于完整磁盘请求跟踪，需要一些额外的跟踪点。它们不是I / O分析所必需的，但可以使分析更加完整。以下是获取尚未成为主线内核的跟踪点的过程。</p>
		<pre>#git clone <a href="https://github.com/giraldeau/lttng-modules.git">https://github.com/giraldeau/lttng-modules.git#cd</a> lttng-modules</pre>
		<p>检查addons分支，根据lttng-modules文档编译和安装lttng-modules。</p>
		<pre>#git checkout addons #make #sudo make modules_install #sudo depmod -a</pre>
		<p>必须手动插入lttng插件模块才能使额外的跟踪点可用：</p>
		<pre>#sudo modprobe lttng-addons＃sudo modprobe lttng-elv</pre>
		<p>并启用以下跟踪点</p>
		<pre>addons_elv_merge_requests</pre>
		<h3 id="Input.2FOutput_Views">输入/输出视图</h3>
		<p>以下视图可用于输入/输出分析：</p>
		<h4 id="Disk_I.2FO_Activity_View">磁盘I / O活动视图</h4>
		<p>时间对齐的XY图表，显示系统上不同磁盘的读写速度。此视图有助于查看磁盘上有更多活动的位置以及是否主要是读取或写入。</p>
		<p>可以在左侧的树中选择磁盘读取和写入。</p>
		<p>双击时间轴或单击重置按钮可以重置时间范围。</p>
		<pre><img title="磁盘I / O活动示例" alt="磁盘I / O活动示例" border="0" src="images/io/diskIoActivity.png">
</pre>
		<h4 id="Navigation_4">导航</h4>
		<p>有关导航，请参阅CPU使用情况视图<b><a href="#Using_the_mouse_2">使用鼠标</a></b> ， <b><a href="#Using_the_keyboard_2">使用键盘</a></b>和<b><a href="#Zoom_region">缩放区域</a></b> 。
		</p>
		<h4 id="Toolbar_5">工具栏</h4>
		<p>视图<b>工具栏</b>位于视图的右上角，具有执行常用操作的快捷按钮。
		</p>
		<p>有关“CPU使用率”视图的<b><a href="#Toolbar_3">工具栏的</a></b>详细信息。
		</p>
		<h4 id="View_Menu_3">查看菜单</h4>
		<p>磁盘I / O视图<b>视图菜单</b>位于<b>视图</b>的右上角，具有执行常用操作的快捷按钮：</p>
		<table>
			<tr>
				<td>新磁盘I / O活动视图</td>
				<td>生成一个新的磁盘I / O活动视图。新视图可以固定到当前跟踪的新实例，固定到任何打开的跟踪或取消固定。</td>
			</tr>
			<tr>
				<td>对齐视图</td>
				<td>禁用并启用基于时间的视图的自动时间轴对齐。在此视图中禁用对齐将在所有视图中禁用此功能，因为它是工作区首选项。</td>
			</tr>
		</table>
		<h2 id="System_Call_Latency_Analysis">系统调用延迟分析</h2>
		<p><b>系统调用延迟分析</b>测量系统调用进入和退出每种系统调用之间的系统调用延迟。使用<b>Latency</b>视图可视化持续<b>时间</b> 。有关<b>延迟</b>视图的更多信息，请参阅<a href="Latency-Analyses.html#Latency_Analyses">延迟分析</a>一章。
		</p>
		<h2 id="Futex_Contention_Latency_Analysis">Futex争用延迟分析</h2>
		<p><b>Futex争用延迟分析</b>测量线程的futex进入和退出事件之间的<b>互斥锁争</b>用延迟。使用<b>Latency</b>视图可视化持续<b>时间</b> 。有关<b>延迟</b>视图的更多信息，请参阅<a href="Latency-Analyses.html#Latency_Analyses">延迟分析</a>一章。
		</p>
		<p>以下视图也可用于Futex争用延迟分析：</p>
		<h3 id="Uaddr_vs_Waiter">Uaddr vs Waiter</h3>
		<p>futex uaddr的服务员时间图。此视图有助于查看哪些线程正在等待特定的futex并了解阻塞的线程。</p>
		<p>
			<img title="uaddr vs服务员的例子" alt="uaddr vs服务员的例子" border="0" src="images/futex/uaddrVsWaiter.png">
		</p>
		<h3 id="Scenarios">方案</h3>
		<p>futex等待/锁定和唤醒/解锁方案的时间图视图（从futex entry到futex exit）。此视图有助于提高给定跟踪中的一般争用级别。它突出了futex lifespans。</p>
		<p>
			<img title="场景示例" alt="场景示例" border="0" src="images/futex/scenario.png">
		</p>
		<h2 id="Latency_analysis_for_IRQ_handlers">IRQ处理程序的延迟分析</h2>
		<p><b>IRQ处理程序</b>的<b>延迟分析</b>测量IRQ处理程序进入和退出事件之间的延迟。使用<b>Latency</b>视图可视化持续<b>时间</b> 。有关<b>延迟</b>视图的更多信息，请参阅<a href="Latency-Analyses.html#Latency_Analyses">延迟分析</a>一章。
		</p>
		<h2 id="LTTng_Kernel_Events_Editor">LTTng内核事件编辑器</h2>
		<p>LTTng内核事件编辑器<b>是</b>普通的TMF <a href="Trace-Compass-Main-Features.html#Events_Editor">事件编辑器</a> ，不同之处在于它提供了自己的专用查看器来替换标准的查看器。简而言之，它具有完全相同的行为，但布局略有不同：</p>
		<ul>
			<li>
				<b>时间戳</b> ：事件时间戳</li>
			<li>
				<b>频道</b> ：事件频道（数据收集器）</li>
			<li>
				<b>CPU</b> ：发生事件的CPU</li>
			<li>
				<b>事件类型</b> ：事件类型（或内核标记）</li>
			<li>
				<b>内容</b> ：此事件的字段（或有效负载）</li>
			<li>
				<b>TID</b> ：此事件所属线程的ID</li>
			<li>
				<b>Prio</b> ：此事件所属线程的优先级</li>
		</ul>
		<p>
			<img border="0" src="images/LTTng2EventsEditor.png">
		</p><hr class="navigation-separator">
		<table class="navigation" border="0" style="width:100%" summary="navigation">
			<tr>
				<td align="left" style="width:20%">
					<a href="LTTng-Tracer-Control.html" title="LTTng Tracer Control">
						<img alt="以前" border="0" src="images/prev.gif">
					</a>
				</td>
				<td align="center" style="width:60%">
					<a href="User-Guide.html" title="Trace Compass用户指南">
						<img alt="Trace Compass用户指南" border="0" src="images/home.gif">
					</a>
				</td>
				<td align="right" style="width:20%">
					<a href="LTTng-UST-Analyses.html" title="LTTng-UST分析">
						<img alt="下一个" border="0" src="images/next.gif">
					</a>
				</td>
			</tr>
			<tr>
				<td align="left" valign="top" style="width:20%">LTTng Tracer Control</td>
				<td align="center" style="width:60%"></td>
				<td align="right" valign="top" style="width:20%">LTTng-UST分析</td>
			</tr>
		</table>
	</body>
</html>
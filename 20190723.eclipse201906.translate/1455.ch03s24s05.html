<html dir="ltr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
<title>3.24.5。�测试运行后自动向外部存储库报告</title>
<link rel="stylesheet" type="text/css" href="../../css/style.css"></link>
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1"></meta>
<link rel="home" href="../index.html" title="Jubula User Manual"></link>
<link rel="up" href="ch03s24.html" title="3.24.�Working with external task repositories (ALM Integration)"></link>
<link rel="prev" href="ch03s24s04.html" title="3.24.4.�Creating tasks in external repositories from test result reports"></link>
<link rel="next" href="ch03s25.html" title="3.25.�Using the test executor for testing from the command line"></link>
</head>
<body bgcolor="white" dir="ltr" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">3.24.5。�测试运行后自动向外部存储库报告</th></tr>
<tr>
<td width="20%" align="left">
<a href="ch03s24s04.html" accesskey="p">上一页</a> �</td>
<th width="60%" align="center">3.24。�使用外部任务存储库（ALM集成）</th>
<td width="20%" align="right">� <a href="ch03s25.html" accesskey="n">下一步</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="breadcrumbs" xmlns:d="http://docbook.org/ns/docbook">
<span class="breadcrumb-link"><a href="../index.html">Jubula用户手册</a></span> &gt; <span class="breadcrumb-link"><a href="ch03.html">任务</a></span> &gt; <span class="breadcrumb-link"><a href="ch03s24.html">使用外部任务存储库（ALM集成）</a></span> &gt; <span class="breadcrumb-node">测试运行后自动向外部存储库报告</span>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="automatically-reporting-to-external-repositories-after-test-runs"></a> 3.24.5。�测试运行后自动向外部存储库报告</h3></div></div></div>
<a name="automatically-reporting-to-external-repositories-after-test-runs.guidancerPropertiesViewContextId"></a><p>运行测试时，您可以自动更新外部存储库中的任务。您可以通过在外部存储库中的任务上编写注释来报告测试结果，并在ITE中添加指向测试结果的链接。您还可以根据在项目中指定的信息更新任务的字段/属性。
  </p>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="configuring-a-task-repository"></a> 3.24.5.1。�为项目配置任务存储库</h4></div></div></div>
<p>为工作区配置一个或多个存储库后（ <a class="xref" href="ch03s24s02.html" title="3.24.2。�在工作区中配置任务存储库">Section�3.24.2，“在工作区中配置任务存储库”</a> ），您可以选择其中一个作为项目的测试相关存储库。
    </p>
<p>这将让你：</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc">
<li class="listitem"><p>将此存储库中的任务ID添加到项目中的测试用例和测试套件，以表示此项目是此任务的测试（ <a class="xref" href="ch03s24s05.html#adding-task-id-alm" title="3.24.5.3。�将任务ID添加到测试套件和测试用例">Section�3.24.5.3，“向测试套件和测试用例添加任务ID”</a> ）。
        </p></li>
<li class="listitem"><p>自动将测试结果报告给测试运行时定义的任务。
        </p></li>
<li class="listitem"><p>查看ITE中相关项目的测试结果，作为任务存储库中的链接。
        </p></li>
</ul></div>
<p>
      <span class="strong"><strong>要为项目配置任务存储库：</strong></span>
    </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"><p>在Project Properties中，从左侧的树中选择<span class="emphasis"><em>Mylyn ALM</em></span> （图<a class="xref" href="ch03s24s05.html#TasksALMProjectProperties" title="Figure3.31。�ALM设置">�3.31，“ALM设置”</a> ）。
        </p></li>
<li class="listitem"><p>在显示的页面中，您可以从组合框中选择存储库。您可以使用按钮验证存储库设置。
        </p></li>
<li class="listitem"><p>您可以（可选）输入配置为使用正确数据库作为测试结果的ITE的URL。如果您在此处输入其URL，则可以单击任务存储库中的测试结果链接以自动在ITE中打开测试结果。
        </p></li>
</ol></div>
<div class="figure">
<a name="TasksALMProjectProperties"></a><div class="figure-contents"><div class="mediaobject"><img src="../images/almproperties.png" xmlns:d="http://docbook.org/ns/docbook"></div></div>
<div class="figure-title">Figure3.31。�ALM设置</div>
</div>
<br class="figure-break">
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="configuring-reporting-to-tasks-via-properties"></a> 3.24.5.2。�配置任务报告</h4></div></div></div>
<p>测试运行后，您可以使用以下信息更新存储库中的相关任务：</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc">
<li class="listitem"><p>包含测试运行状态的注释，以及指向该测试结果的链接。</p></li>
<li class="listitem">
<p>您可以根据测试是成功还是失败来更新任务的字段/属性。
  	</p>
<p xmlns:d="http://docbook.org/ns/docbook"></p><table>
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td><img align="bottom" width="100" height="91" src="../images/img2.jpg"></td>
<td class="topbotline"><span class="strong"><strong>具有非<span class="emphasis"><em>传递</em></span>状态的测试（例如，失败，停止，仍在测试）被视为失败</strong></span></td>
</tr></tbody>
</table>
</li>
</ul></div>
<p>对于链接到任务的测试运行中的每个项目（测试用例，测试套件）（ <a class="xref" href="ch03s24s05.html#adding-task-id-alm" title="3.24.5.3。�将任务ID添加到测试套件和测试用例">Section�3.24.5.3，“将任务ID添加到测试套件和测试用例”</a> ），您将在项目属性中指定的规则将被执行out将测试结果报告给该任务。
  	</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"><p>在Project Properties中，从左侧的树中选择<span class="emphasis"><em>Mylyn ALM</em></span> 。</p></li>
<li class="listitem"><p>在显示的页面中，您可以配置报告结果的方式。对于成功和失败的操作，您有相同的选择。
	</p></li>
<li class="listitem">
<p>
		</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc">
<li class="listitem"><p>您可以激活该复选框，为每个链接的任务添加注释。注释包含有关测试运行（日期，状态）的信息以及测试结果的链接。测试结果可以在指定的ITE中看到（ <a class="xref" href="ch03s24s05.html#configuring-a-task-repository" title="3.24.5.1。�为项目配置任务存储库">Section�3.24.5.1，“为项目配置任务存储库”</a> ）。
			</p></li>
<li class="listitem">
<p>您可以在表中添加规则以更新任务的属性。输入描述性名称（这仅用于“属性”中的显示目的），要更新的属性的ID以及应更新属性的值。作为更新的值，您可以输入：</p>
<p>
				</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:circle">
<li class="listitem"><p>纯文本，例如“通过”</p></li>
<li class="listitem">
<p>此运行的“测试结果摘要视图”中的列的值。通过输入列名作为变量来获取列的值。一些例子是：</p>
<p>$ summary_autHostname，$ summary_testRunState（例如“OK”或“FAILED”），$ summary_testsuiteName，$ summary_testJobName，$ summary_testsuiteEndTime，$ summary_testsuiteDate（完整日期格式），$ summary_statusString（例如“成功测试”或“儿童错误”） ），$ summary_testsuiteDuration，$ summary_testsuiteStartTime，$ summary_date（对于DD.MM.YYYY），$ summary_autOS</p>
<p>但您可以通过输入列名称作为前缀为“summary_”的变量来使用任何列值。
					</p>
</li>
<li class="listitem">
<p>来自执行节点的值。该值作为变量输入，例如</p>
<p>$ node_taskId，$ node_timeStamp，$ node_typeOfNode（例如测试用例），$ node_name，$ node_parameterDescription，$ node_date（用于DD.MM.YYYY），$ node_url（见下文）</p>
<p>使用$ node_url参数接收将链接到ITE中此节点（测试用例或测试套件）的URL（ <a class="xref" href="ch03s24s05.html" title="3.24.5。�测试运行后自动向外部存储库报告">xSection�3.24.5，“测试运行后自动向外部存储库报告”</a> ）。
					</p>
</li>
</ul></div>
<p>
			</p>
</li>
</ul></div>
<p>
		</p>
</li>
<li class="listitem"><p>要查看ALM存储库中可用的属性，可以从任务视图查看各个任务的信息（ <a class="xref" href="ch03s24s05.html#viewing-task-attributes" title="3.24.5.2.1。�查看任务属性">Section�3.24.5.2.1，“查看任务属性”</a> ）</p></li>
</ol></div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="viewing-task-attributes"></a> 3.24.5.2.1。�查看任务属性</h4></div></div></div>
<p>为了定义向ALM系统报告的规则，您需要输入要更新的任何属性的ID（ <a class="xref" href="ch03s24s05.html#configuring-reporting-to-tasks-via-properties" title="3.24.5.2。�配置任务报告">Section�3.24.5.2，“配置向任务报告”</a> ）。
	</p>
<p>您可以使用“任务视图”中的“ <span class="menuPath">显示属性”</span>选项<span class="menuPath">查看</span>任务具有哪些属性。
	</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<p>通过选择以下内容打开任务视图（如果尚未打开）：</p>
<p>
		<span class="menuPath">窗口</span> - &gt; <span class="menuPath">显示视图</span> - &gt; <span class="menuPath">任务视图</span> 。
		</p>
</li>
<li class="listitem"><p>如果尚未为工作区配置存储库，请在“任务存储库”视图中执行此操作（ <a class="xref" href="ch03s24s02.html" title="3.24.2。�在工作区中配置任务存储库">Section�3.24.2，“在工作区中配置任务存储库”</a> ）。
		</p></li>
<li class="listitem">
<p>导航到要查看其属性的任务，然后选择：</p>
<p>
		从上下文菜单中<span class="menuPath">显示属性</span> 。
		</p>
</li>
<li class="listitem"><p>将出现任务属性查看器。在此对话框中，您可以看到此任务的属性的ID，您可以使用这些ID在项目属性中定义测试结果报告的规则（ <a class="xref" href="ch03s24s05.html#configuring-reporting-to-tasks-via-properties" title="3.24.5.2。�配置任务报告">Section�3.24.5.2，“配置向任务报告”</a> ）。您可以使用键盘复制属性。
		</p></li>
</ol></div>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="adding-task-id-alm"></a> 3.24.5.3。�将任务ID添加到测试套件和测试用例</h4></div></div></div>
<p>您可以在项目中为测试用例和测试套件添加任务ID。
    </p>
<p>任务ID应该是您已指定为此项目的存储库的存储库中的有效ID（ <a class="xref" href="ch03s24s05.html#configuring-a-task-repository" title="3.24.5.1。�为项目配置任务存储库">Section�3.24.5.1，“为项目配置任务存储库”</a> ）。将任务ID添加到项目中的项目意味着此项目是存储库中该任务的相关测试。您将能够报告此项目的测试结果。
    </p>
<p>要将任务ID添加到测试用例或测试套件：</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"><p>双击打开编辑器中的项目。
        </p></li>
<li class="listitem"><p>在“属性视图”的“ <span class="emphasis"><em>任务ID</em></span> ”单元格中，输入外部存储库中的任务ID。您只能在规范位置输入任务ID  - 重复使用该项目时不能覆盖它们。
        </p></li>
<li class="listitem"><p>保存编辑器。
        </p></li>
<li class="listitem">
<p>将任务ID添加到节点后，可以通过选择以下命令从浏览器打开此节点的任务：</p>
<p>
          <span class="menuPath">用</span> - &gt; <span class="menuPath">Mylyn任务编辑器</span> <span class="menuPath">打开</span>
        </p>
</li>
</ol></div>
<p xmlns:d="http://docbook.org/ns/docbook"></p><table>
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td><img align="bottom" width="100" height="91" src="../images/img2.jpg"></td>
<td class="topbotline"><span class="strong"><strong>您应该确保将任务ID添加到正确的节点级别，以便为存储库中的任务提供相关数量的信息。这通常是测试套件中的用例级别。
    </strong></span></td>
</tr></tbody>
</table>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="test-execution-with-reporting-to-external-repositories"></a> 3.24.5.4。�通过向外部存储库报告执行测试</h4></div></div></div>
<p>如果您的项目已加入外部存储库（ <a class="xref" href="ch03s24s05.html#configuring-a-task-repository" title="3.24.5.1。�为项目配置任务存储库">Section�3.24.5.1，“为您的项目配置任务存储库”</a> ），并且您已将任务ID添加到项目中的一个或多个项目（ <a class="xref" href="ch03s24s05.html#adding-task-id-alm" title="3.24.5.3。�将任务ID添加到测试套件和测试用例">Section�3.24.5.3，“添加”）测试套件和测试用例的任务ID“</a> ），然后您将能够在测试运行后将测试结果报告给存储库。测试运行可以通过ITE或命令行<span class="emphasis"><em>testexec进行</em></span> 。
    </p>
<p xmlns:d="http://docbook.org/ns/docbook"></p><table>
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td><img align="bottom" width="100" height="91" src="../images/img2.jpg"></td>
<td class="topbotline"><span class="strong"><strong>如果您通过应向ALM系统报告的ITE运行“相关”测试，则在测试运行后会自动触发报告。如果测试运行的报告遇到错误，那么您将能够在以后手动触发报告<a class="xref" href="ch03s24s05.html#test-execution-with-reporting-to-external-repositories" title="3.24.5.4。�通过向外部存储库报告执行测试">Section�3.24.5.4，“使用报告到外部存储库来测试执行”</a> 。要在通过testexec运行测试后向ALM系统报告，还必须手动触发记录（ <a class="xref" href="ch03s24s05.html#test-execution-with-reporting-to-external-repositories" title="3.24.5.4。�通过向外部存储库报告执行测试">Section�3.24.5.4，“测试执行并向外部存储库报告”</a> ）。
    </strong></span></td>
</tr></tbody>
</table>
<p>触发报告时，会发生以下情况：</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc">
<li class="listitem"><p>与Project属性中配置的ALM系统建立连接。
        </p></li>
<li class="listitem"><p>然后分析测试结果以查看是否需要在外部存储库中添加任何注释。
        </p></li>
<li class="listitem">
<p>如果要进行报告，ITE会将每个必要任务报告为批处理作业。这些批处理作业包含所需的字段更新和注释。虽然这在控制台视图中显示为一个操作，但您将获得<span class="emphasis"><em>N个</em></span>评论/字段更新的<span class="emphasis"><em>N个</em></span>事务。如果一个测试运行中的多个项目引用相同的任务ID，或者在同一个测试运行中多次执行具有任务ID的项目，则只会写入一个注释，但是这个注释将包含有关所有已执行项目的信息。这个ID。但是，链接到任务ID的每个项目都会进行字段更新。</p>
<p xmlns:d="http://docbook.org/ns/docbook"></p><table>
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td><img align="bottom" width="100" height="91" src="../images/img2.jpg"></td>
<td class="topbotline"><span class="strong"><strong>具有非<span class="emphasis"><em>传递</em></span>状态的测试（例如，失败，停止，仍在测试）被视为<span class="emphasis"><em>失败</em></span> 。
        </strong></span></td>
</tr></tbody>
</table>
</li>
<li class="listitem"><p>您可以在控制台视图中查看ALM报告的状态。
        </p></li>
<li class="listitem"><p>报告完成后，您可以在外部存储库中看到更改。如果添加了注释，则可以单击提供的链接以在为项目指定的ITE中打开测试结果报告。ITE必须已经运行才能成功完成此操作。测试结果还必须存在于数据库中（ <a class="xref" href="ch03s22s03.html#re-opening-the-test-result-view-for-a-test-run" title="3.22.3.1。�重新打开测试运行的测试结果视图">Section�3.22.3.1，“重新打开测试运行的测试结果视图”</a> ）。
        </p></li>
<li class="listitem"><p>测试结果报告在引用当前任务ID的节点处打开。</p></li>
<li class="listitem">
<p>您可以在“测试结果摘要视图<a class="xref" href="ch03s24s05.html#test-execution-with-reporting-to-external-repositories" title="3.24.5.4.�Test execution with reporting to external repositories">”中</a>查看报告的状态（ <a class="xref" href="ch03s24s05.html#test-execution-with-reporting-to-external-repositories" title="3.24.5.4。�通过向外部存储库报告执行测试">Section�3.24.5.4，“使用向外部存储库报告的测试执行”</a> ）。
        </p>
<p xmlns:d="http://docbook.org/ns/docbook"></p><table>
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td><img align="bottom" width="100" height="91" src="../images/img2.jpg"></td>
<td class="topbotline"><span class="strong"><strong>写入外部存储库的集成可以与Bugzilla 3.6 +，JIRA 5.0+和HP ALM 11+一起使用。其他有Mylyn连接器的存储库也可以使用，但这些尚未经过测试。
        </strong></span></td>
</tr></tbody>
</table>
</li>
</ul></div>
<p>
      <span class="strong"><strong>通过testexec</strong></span>开始<span class="strong"><strong>测试后向ALM存储库报告对于通过testexec</strong></span>启动的测试，报告不会自动发生。相反，您必须选择从“测试结果摘要视图”向ALM报告。
    </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"><p>在配置为向ALM存储库报告的项目中，当测试通过testexec运行时，您可以打开Reporting Perspective并在“测试结果摘要视图”中找到测试运行。
        </p></li>
<li class="listitem">
<p>在“ <span class="emphasis"><em>ALM报告状态”</em></span>列中，您将看到是否有任何待处理的报告。您可以在此列中看到各种状态：</p>
<div class="variablelist"><dl class="variablelist">
<dt><span class="term">未配置：</span></dt>
<dd><p>如果您尚未为项目配置ALM报告，或者在测试开始时将Test Suite的相关性设置为false。
              </p></dd>
<dt><span class="term">尚未报道：</span></dt>
<dd><p>如果为项目配置了报告，并且有可用于报告的信息尚未报告，例如通过testexec的测试运行。如果您通过ITE运行了由于例如连接问题而无法向ALM系统报告的测试，您也将看到此状态。这使您可以在问题解决后稍后报告测试结果。
              </p></dd>
<dt><span class="term">报道说：</span></dt>
<dd><p>如果您运行了通过ITE配置报告的测试，则会显示此状态，该报告会自动报告。如果您在通过testexec运行测试后选择向ALM系统报告，也会显示它。即使测试运行未链接到任何任务，也会显示此状态，但为项目配置了报告。可以理解， <span class="emphasis"><em>任何必要的报告都已经执行</em></span> 。如果在报告其中一个任务时发生错误，即使并非所有任务都已正确更新，状态仍会显示<span class="emphasis"><em>报告</em></span></p></dd>
<dt><span class="term">报告丢弃：</span></dt>
<dd><p>如果报告信息可用，但信息被丢弃，因此未报告。您可以通过从上下文菜单中选择放弃待处理报告的选项来执行此操作。对于导入的项目中的任何测试运行，也会显示此状态，该项目在导出项目时状态为<span class="emphasis"><em>尚未报告</em></span> 。
              </p></dd>
<dt><span class="term">标记为不相关：</span></dt>
<dd><p>您将在测试开始时标记为相关的任何测试运行中看到此状态，并且具有要报告的信息（状态： <span class="emphasis"><em>尚未报告</em></span> ），但您通过切换测试结果中的相关性将其标记为不相关摘要视图。此状态表示您可以报告或丢弃信息，但前提是您重新切换测试运行是相关的。
              </p></dd>
</dl></div>
</li>
<li class="listitem"><p>选择要向ALM报告其结果的任何测试运行，然后单击工具栏上的“ <span class="emphasis"><em>报告到ALM</em></span> ”按钮。您也可以从上下文相关菜单中选择此选项。如果选择多个测试运行，则每个测试运行将按顺序进行报告。
        </p></li>
<li class="listitem"><p>选择此选项后，将按上述方法触发报告。如果报告成功，则“ <span class="emphasis"><em>ALM报告状态”</em></span>列中的<span class="emphasis"><em>状态</em></span>将从<span class="emphasis"><em>“尚未报告”</em></span>更改为“已<span class="emphasis"><em>报告”</em></span> 。如果发生错误，则状态仍为“ <span class="emphasis"><em>尚未报告”</em></span> 。
        </p></li>
<li class="listitem"><p>如果您不想将测试结果报告给ALM工具，则可以通过从上下文菜单中选择放弃待处理报告的选项来放弃报告信息。这会将<span class="emphasis"><em>ALM报告状态</em></span>列中的<span class="emphasis"><em>状态</em></span>从<span class="emphasis"><em>尚未报告的报告</em></span>更改为已<span class="emphasis"><em>丢弃</em></span> 。
        </p></li>
</ol></div>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="specific-information-for-hp-alm-users"></a> 3.24.5.5。�HPALM用户的特定信息</h4></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type:disc">
<li class="listitem"><p>要使用HP ALM集成，必须为HP ALM使用单独的连接器，这可能会产生许可证成本。访问Tasktop网站了解更多详情<a class="link" href="http://www.tasktop.com" target="_top">http://www.tasktop.com</a> 。</p></li>
<li class="listitem">
<p>如果您已在HP ALM安装中更改了缺陷和/或要求的属性ID（相对默认值）（ <span class="emphasis"><em>BG_DEV_COMMENTS</em></span>和<span class="emphasis"><em>REQ_DEV_COMMENTS</em></span> ），或者您更改了连接器的ID，则必须在<span class="input">almAccess.properties中</span>修改这些属性包含在jar中的文件：</p>
<p>
          <span class="emphasis"><em>org.eclipse.jubula.client.alm.mylyn.core</em></span>
        </p>
</li>
<li class="listitem"><p>由于HP ALM中的任务只有一个注释字段，因此结果信息将附加到注释字段，而不是每次都添加为新注释。
        </p></li>
<li class="listitem"><p>要在默认HP ALM安装中写入需求，必须使用前缀<span class="emphasis"><em>REQ</em></span> ，例如REQ100。要写入默认HP ALM安装中的缺陷，必须使用前缀<span class="emphasis"><em>DEF</em></span> ，例如DEF42。
        </p></li>
</ul></div>
</div>
</div>
<br xmlns:d="http://docbook.org/ns/docbook"><hr xmlns:d="http://docbook.org/ns/docbook">
<address xmlns:d="http://docbook.org/ns/docbook">版权所有BREDEX GmbH 2015。根据Eclipse Public License v1.0提供。</address>
<br xmlns:d="http://docbook.org/ns/docbook">
</body>
</html>
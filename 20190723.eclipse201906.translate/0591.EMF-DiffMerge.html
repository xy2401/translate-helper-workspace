<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
		<meta name="copyright" content="Copyright (c) 2010-2018 THALES GLOBAL SERVICES S.A.S.
  			This program and the accompanying materials are made
  			available under the terms of the Eclipse Public License 2.0
  			which is available at https://www.eclipse.org/legal/epl-2.0/
			  
			SPDX-License-Identifier: EPL-2.0"></meta>
		<title>EMF-DiffMerge</title>
	</head>
	<body dir="ltr">
		<h1 id="User.27s_Guide">用户指导</h1>
		<h2 id="Overview">概观</h2>
		<p>EMF Diff / Merge是模型的差异/合并技术。其主要目的是帮助构建需要基于一致性规则合并模型的更高级别的工具。典型用法包括模型重构，迭代模型转换，模型或建模工具之间的桥梁，协作建模环境或与版本控制系统的集成。</p>
		<p>还提供了一个GUI，用于Eclipse中的经典用法。
			<b>本文档介绍了用户如何使用GUI手动比较和合并模型。</b> GUI支持设置和配置比较，可视化差异并有选择地合并这些差异。
		</p>
		<p><a href="https://wiki.eclipse.org/EMF_DiffMerge">EMF Diff / Merge维基</a>上提供了<a href="https://wiki.eclipse.org/EMF_DiffMerge">EMF Diff / Merge的</a>其他技术用法以及补充技术文档。
		</p>
		<p>
			<br> 
		</p>
		<h2 id="Starting_the_Diff.2FMerge_GUI">启动Diff / Merge GUI</h2>
		<p>可以通过“比较” - “彼此作为模型”弹出菜单项访问GUI。在Project Explorer中选择两个模型文件时，将启用此菜单项，如下图所示。</p>
		<p>
			<img border="0" src="Images/Model-DiffMerge_html_m42c302d5.png">
		</p>
		<p>它也可以用于基于模型的图表（例如GMF文件或Sirius * .aird文件）或模型片段。</p>
		<p>只要单击菜单项，就会显示涉及所选文件的<b>设置对话框</b> 。
		</p>
		<p>
			<img width="600" border="0" src="Images/SetupTwoWays.png">
		</p>
		<ul>
			<li>为方便起见，右侧的<b>“向上和向下箭头</b> ”按钮可用于在工具中交换模型的位置（左侧或右侧）。
			</li>
		</ul>
		<ul>
			<li><b>“可修改</b> ”复选框允许定义可以修改的模型。如果未选中复选框，则无法执行将修改相应模型的合并操作。这是一种保护模型免受由于错误使用工具而导致的意外更改的方法。
			</li>
		</ul>
		<ul>
			<li><b>“合并方向</b> ”单选按钮指定<b>合并的方向</b> ，即哪个模型是更改的来源以及可以应用更改的模型。这些单选按钮会对“可修改”复选框产生影响。如果选择“任何”，则以对称方式表示比较，并且可以修改两个模型。
			</li>
		</ul>
		<ul>
			<li><b>“比较方法</b> ”组合框允许选择比较模型的方式。可以使用适合于例如版本控制的默认可配置比较方法。可以通过diff / merge工具的扩展添加其他方法。
			</li>
		</ul>
		<p>如果用户选择三个文件，则比较建议将两个文件进行比较，同时考虑第三共同祖先，如下所示。</p>
		<p>
			<img width="600" border="0" src="Images/SetupThreeWays.png">
		</p>
		<p>
			<br> 
		</p>
		<h2 id="Configuring_a_Comparison">配置比较</h2>
		<p>设置对话框中的<b>“配置...</b> ”按钮可以更改计算比较的方式：如何匹配元素，检测到哪些差异以及如何合并它们，提供了哪些额外信息。
		</p>
		<p>
			<br>
		</p>
		<h3 id="Predefined_Configurations">预定义配置</h3>
		<p>使用默认比较方法，配置对话框如下所示。</p>
		<p>
			<img width="400" border="0" src="Images/ConfigMain.png">
		</p>
		<p>单选按钮对应于反映常见用例的预定义配置。</p>
		<ul>
			<li>
				<b>'同一模型</b>的<b>不同版本之间的差异/合并</b> '：将此配置用于同一模型的不同版本之间的经典差异/合并。它假定每个模型元素都具有唯一标识符，可以通过专用属性或通过持久性（例如，XML或XMI ID）。
			</li>
		</ul>
		<ul>
			<li>
				<b>“在独立创建的模型之间传递元素</b> ”：如果需要在历史上不相关但以类似方式结构化的模型之间传输元素，请使用此配置。
			</li>
		</ul>
		<p>其他配置可能在特定建模工具中可用。</p>
		<p>如果这些预定义配置未涵盖需求，则高级用户可以通过单击<b>“显示高级设置</b> ”按钮切换到高级配置模式。其他选项卡变为可见，如下图所示。
		</p>
		<p>
			<img width="400" border="0" src="Images/ConfigMainExpanded.png">
		</p>
		<p>以下小节描述了默认提供的选项。但是，特定建模工具中可能还有其他选项。</p>
		<p>
			<br>
		</p>
		<h3 id="Advanced_Matching">高级匹配</h3>
		<p>高级<b>“匹配</b> ”选项卡提供了确定元素匹配方式的选项。默认情况下，以下选项可用。
		</p>
		<p>
			<img width="400" border="0" src="Images/ConfigMatch.png">
		</p>
		<p>匹配标准分为两类。</p>
		<ul>
			<li>
				<b>绝对标准</b>独立于其他模型元素考虑每个模型元素。如果模型元素即使模型中的其他所有内容都发生更改也不会更改，则它们将始终以相同的方式匹配。
			</li>
			<li>
				相反， <b>相对标准</b>考虑其他人的背景下的模型元素。
			</li>
		</ul>
		<p>标准按优先级递增顺序列出。例如，当启用“名称”和“属性ID”时，如果元素具有限定名称，则忽略其属性ID。如果该元素具有相同的限定名称，它将仅与另一个模型中的元素匹配。</p>
		<p>所有标准类别和所有标准均提供工具提示。将鼠标悬停在相应的用户界面元素上以查看工具提示。</p>
		<ul>
			<li>
				<b>技术ID</b> ：元素的技术ID是仅为持久性目的而定义的标识符。它有时被称为“外在的”，因为它不属于元素：它取决于模型持久化的方式，并且可以在持久性技术发生变化时发生变化。默认情况下，模型作为XML或XMI文件保留，因此模型元素具有XML ID。通过CDO技术存储在数据库中的模型具有CDO ID。</li>
		</ul>
		<ul>
			<li>
				<b>属性ID</b> ：属性ID是通过专用属性属于该元素的ID。它通常在元素的整个生命周期中保持不变，这使其成为版本控制上下文中最合适的标准。大多数情况下，它是string类型属性的值，通常名为'id'，在创建元素时随机生成。请注意，模型元素可能同时具有技术ID和属性ID，这可能（但不必）相同。
			</li>
		</ul>
		<ul>
			<li>
				<b>名称</b> ：如果元素具有名称且其所有容器元素也具有名称，则该元素具有限定名称，该名称是所有这些名称的序列。如果它们具有相同的限定名称，则此标准与两个元素匹配。只有元素具有名称和命名规则才有意义，禁止同一容器中的两个元素具有相同的名称。这个标准的弱点在于它对移动很敏感：移动元素意味着更改其容器，这通常意味着更改限定名称。
				<br>
				<br>
				<ul>
					<li>
						<b>'使用标签作为名称</b> '：此选项允许使用元素在编辑器中具有的标签作为名称，即使它们实际上没有名称。如果不同的元素具有不同的标签，则该标准才有意义。
					</li>
				</ul>
			</li>
		</ul>
		<ul>
			<li>
				<b>结构</b> ：如果两个元素在模型中位于相同的“位置”并且在同一“位置”中没有其他元素也可以匹配，则它们在结构上匹配。子选项改进了“位置”的含义。
				<br>
				<br>
				<ul>
					<li>
						<b>'匹配唯一的根</b> '：元素可以位于模型的顶层，在这种情况下，它被称为根。此选项允许匹配两个既是根又不能与其他根混淆的元素，通常是因为它们是它们类型中唯一的元素。
						<br>
						<br>
					</li>
					<li>
						<b>“匹配独特的孩子</b> ”：匹配具有相同容器并在其中扮演相同区别角色的元素。例如，考虑表示数据的建模语言，其中数据值可以定义为具有一个左操作数和一个右操作数的二进制表达式。左操作数和右操作数是区别角色，因为只有一个元素可以扮演这些角色中的每一个。因此，如果两个二进制表达式匹配，那么它们的左操作数将匹配，并且它们的右操作数将匹配，前提是它们具有相同的类型。
						<br>
						<br>
					</li>
					<li>
						<b>'匹配明确的子项</b> '：匹配具有相同容器的元素，不能与容器中的其他元素混淆。通常，在容器中扮演相同角色的元素，以及扮演该角色的唯一类型。这是一个比上述标准更宽松的标准。
					</li>
				</ul>
			</li>
		</ul>
		<ul>
			<li>
				<b>语义</b> ：语义匹配包含基于特定建模语言知识的标准。一般的理由是根据元素的性质和含义来尝试和匹配元素。
				<br>
				<br>
				<ul>
					<li>
						<b>“匹配默认模型内容</b> ”：创建新模型时，可能会自动填充默认模型元素。匹配这些默认元素（如果存在）它可能仅在模型的顶级元素匹配时才有效（请参阅“结构 - 匹配明确的根”）。
						<br>
						<br>
					</li>
					<li>
						<b>“匹配等效技术元素</b> ”（默认情况下隐藏，可能出现在特定的建模工具中）：某些建模语言定义纯粹技术性且通常对用户不可见的元素。如果适用，根据它们携带的语义匹配这些元素。
						<br>
						<br>
					</li>
					<li>
						<b>'图表：根据表示的元素</b>匹配形状：匹配（GMF或Sirius）图表中的图形形状（如果它们代表同一图表中的相同元素）。请注意，如果元素不能在同一图表中用不同的形状表示，那么它才有意义。
						<br>
						<br>
					</li>
					<li>
						<b>'图表：根据类型匹配剩余的形状</b> '：（GMF或Sirius）图表中的某些形状可能纯粹是技术性的，可能不代表元素：它们仅在其他更重要的形状的背景下才有意义。根据类型和更重要的形状匹配这些形状。
					</li>
				</ul>
			</li>
		</ul>
		<h4 id="Applicability">适用性</h4>
		<p>请注意，相对标准（名称，结构，语义）的计算成本比绝对标准更高：它们需要更多的计算时间和更多的内存。如果有足够的可用内存，Misc选项卡中的“使用缓存”选项（见下文）可以更快地完成比较计算。</p>
		<p>请注意，所有匹配条件都不适用于所有模型。例如，名称仅在每个模型元素具有唯一（限定）名称时才起作用。相反，如果模型中存在名称重复（或者，对于结构/语义标准，结构/语义模糊），则差异/合并工具将检测到比较是不一致的，并将按照“计算比较'。</p>
		<p>在这种情况下，Misc选项卡（见下文）中的“保持匹配键”选项可用于理解为什么存在匹配的不一致性。根据该分析，用户可以决定修改模型以避免不一致，例如通过强制执行名称唯一性约束，或者使用比较编辑器提供的“更新”特征来试验稍微不同的匹配标准。</p>
		<p>
			<br>
		</p>
		<h3 id="Other_Advanced_Options">其他高级选项</h3>
		<p>高级<b>差异</b>选项卡提供了用于确定检测到<b>差异的</b>选项。默认情况下，以下选项可用。
		</p>
		<p>
			<img width="400" border="0" src="Images/ConfigDiff.png">
		</p>
		<ul>
			<li>
				<b>忽略订单</b>会禁用排序差异的检测，这具有提高性能的优势。如果选中，那么例如UML类在模型中包含属性A然后B的事实和属性B然后在另一个模型中包含A将不会产生任何差异。请注意，此选项可防止语义高度依赖于订单的模型始终合并，例如UML或Sirius Sequence Diagrams。在这种情况下，请勿选择此选项。
			</li>
		</ul>
		<p><b>其他</b>高级<b>杂项</b>选项卡提供了其他附加选项。默认情况下，以下选项可用。
		</p>
		<p>
			<img width="400" border="0" src="Images/ConfigMisc.png">
		</p>
		<ul>
			<li>
				<b>保持匹配键</b>激活工具提示，显示用于匹配比较编辑器中模型元素的匹配键，如下面的快照所示。当且仅当它们具有相同的匹配键时，两个模型元素匹配，该匹配键是根据所选匹配选项为每个模型元素生成的。查看匹配键可以更好地理解元素的匹配方式，但代价是更高的内存消耗。如果通过相对标准获得匹配键，那么它由几个部分组成，这些部分根据其来源作为前缀：默认情况下，'::'表示按名称标识，'@'表示结构，'〜'表示语义。
			</li>
		</ul>
		<p>
			<img width="400" border="0" src="Images/Model-DiffMerge_html_29d2b86f.png">
		</p>
		<ul>
			<li>
				<b>使用缓存</b>是一种技术选项，用于确定缓存是否用于匹配元素。如果使用相对匹配条件并且有足够的内存可用，它会加速匹配阶段。如果内存有限，建议不要使用此选项。
			</li>
		</ul>
		<p>
			<br>
		</p>
		<h2 id="Computing_a_Comparison">计算比较</h2>
		<p>在设置对话框中单击“完成”按钮后，可能会弹出一些其他信息对话框。</p>
		<ul>
			<li><b>“模糊映射</b> ”警告消息（如下图所示）。如果至少有一个被比较的模型包含重复的匹配键，则会弹出此消息。如果默认比较方法已使用其默认配置，则查看此消息意味着对话框中显示的每个重复项都是同一模型的多个元素具有共同点的标识符。因此，该模型不正确，违反了基本验证规则;因此，无法保证比较正确或合并操作将表现一致。相反，如果使用了高级匹配标准，则表示它们不适用于所选模型</li>
		</ul>
		<p>
			<img width="500" border="0" src="Images/Model-DiffMerge_html_39002cd3.png">
		</p>
		<p>
			<b>警告</b> ：如果出现此消息， <b>请勿启动合并活动</b> ;首先修复模型或比较配置（参见上面关于高级匹配适用性的讨论）。为此，在对话框中选择重复的ID可能会有所帮助，右键单击，然后选择“复制到剪贴板”菜单项。此操作将重复ID列表存储在操作系统的剪贴板中，以供以后分析。在显示比较后，可以随时再次显示“模糊映射”消息。它可以通过<b>“显示不一致</b> ”按钮访问，否则隐藏（下图中的红色圆圈）。
		</p>
		<p>
			<img width="700" border="0" src="Images/Model-DiffMerge_html_13763f84.png">
		</p>
		<ul>
			<li><b>“无撤消/重做</b> ”警告消息（如下图所示）。在对Sirius *进行比较时会弹出此消息。已打开的AIRD文件。该工具的策略是通过比较内存中的模型来尝试最小化内存使用。如果只有一个*，这也是如此。AIRD文件已打开：比较将对内存中的模型进行操作。但是，在两个开放模型的情况下，出于技术原因，此时无法启用撤消/重做。如消息中所示，如果比较的目的是合并模型，而不仅仅是比较模型，并且需要撤消/重做，则必须在启动差异/合并工具之前关闭至少一个模型。重新获得撤消/重做功能。
			</li>
		</ul>
		<p>
			<img border="0" src="Images/Model-DiffMerge_html_m43da5a9d.png">
		</p>
		<p>
			<br>
		</p>
		<ul>
			<li><b>进度对话框</b> （如下图所示）。计算模型之间的差异需要一些时间，具体取决于模型的大小和它们之间的差异数量。单击“在后台运行”按钮，以便在并行计算差异时继续使用您的环境。如果发现差异，则此阶段将结束打开下一节中描述的比较编辑器。
			</li>
		</ul>
		<p>
			<img border="0" src="Images/Model-DiffMerge_html_m37e3e9e3.png">
		</p>
		<p>
			<br>
		</p>
		<ul>
			<li><b>“无差异”消息对话框</b> （如下图所示）。此消息对话框表明未找到任何差异。比较过程结束，不提供其他信息。这种情况不同于已发现差异但被认为过于技术性而无法在默认情况下可见的情况。在这种情况下，将打开一个比较编辑器，其中包含一个空的Synthesis部分，并且可以使用“差异类别”对话框显示技术差异（请参见下文）。
			</li>
		</ul>
		<p>
			<img width="500" border="0" src="Images/NoDiffs.png">
		</p>
		<p>
			<br>
		</p>
		<h2 id="Exploiting_a_Comparison">利用比较</h2>
		<p>比较编辑器显示已计算的差异。</p>
		<p>
			<img width="700" border="0" src="Images/Overview.png">
		</p>
		<p>编辑器由两个与三个垂直区域或列相交的水平区域组成。</p>
		<p>
			<br>
		</p>
		<h3 id="Vertical_Areas">垂直区域</h3>
		<p>
			<img width="700" border="0" src="Images/VerticalSections.png">
		</p>
		<p>中间列表示<b>左侧模型</b>的内容，而右侧列表示<b>右侧模型</b>的内容。每一侧都与一种颜色相关联：默认情况下，左侧模型为<b>深红色</b> ，右侧模型为<b>蓝色</b> 。此颜色代码也用于差异/合并工具的其他对话框，以防止任何歧义。
		</p>
		<p>直接带有差异的元素，无论是在其属性中还是因为它们没有匹配，都以<b>粗体显示</b> 。除非它们直接带有差异，否则其层次结构中的元素以<b>斜体显示</b> 。
		</p>
		<p>当悬停在任一列的顶部时，如果窗口太窄，则模型的完整路径将显示为工具提示。</p>
		<p>
			<img border="0" src="Images/Model-DiffMerge_html_m1961c198.png">
		</p>
		<p>
			<img height="19" width="23" border="0" src="Images/Model-DiffMerge_html_m617a07f2.png"> <b>锁定</b>切换按钮显示在这些列的顶部。选择后，禁止修改相应的模型。因此，如果它们意味着修改模型，则通常启用的合并按钮将被禁用。使用此机制临时保护模型以防意外修改。
		</p>
		<p>左列的上部是<b>合成部分</b> 。它侧重于实际包含差异的模型部分。
		</p>
		<p>这三列是同步的：单击Synthesis部分中的元素会在其他部分中突出显示它，反之亦然（除非禁用'Link views'选项，请参见下文）。</p>
		<p>
			<br>
		</p>
		<h3 id="Horizontal_Areas">水平区域</h3>
		<p>
			<img width="700" border="0" src="Images/HorizontalSections.png">
		</p>
		<p>两个水平区域对应于两个不同的细节层次。上部区域侧重于存在的模型元素和位置。下部区域是“ <b>详细信息”部分</b> ：它显示在上部区域中选择的模型元素的属性（属性和引用）。
		</p>
		<p>例如，如果在“合成”部分（上部区域）中单击了修改后的元素（紫色），则“详细信息”部分（下部区域）将显示具有差异的元素的所有属性。相应的值根据它们所属的模型显示在“详细信息”部分的中间和右侧部分。例如，在上面的快照中，在“综合”部分中选择了“飞行中娱乐系统”元素;详细信息部分显示其名称有所不同：左侧模型中的名称为“飞行中娱乐系统”，右侧模型中名称为“P1”。</p>
		<p>
			<br>
		</p>
		<h3 id="Synthesis_Section">合成部分</h3>
		<p>“合成”部分表示模型之间在元素的添加，删除和移动方面的差异。根据颜色代码，存在于右模型中但不存在于左模型中的模型元素用蓝色书写，而在相反的情况下用深红色书写。存在于两侧但其性质（属性或参考）不同的元素用<b>紫色</b>书写。它们包含的差异数量写在括号之间（除非禁用“显示差异数字”选项，请参见下文）。
		</p>
		<p>元素相对于模型树的位置被视为名为<b>“Container</b> ”的元素的属性。此属性的差异可以解释为<b>移动</b> 。如果元素位于左侧和右侧模型中的不同位置，则它在“合成”部分中与左侧模型中的位置相同。
		</p>
		<p>“合成”部分中的按钮分别用于：</p>
		<ul>
			<li>
				<img height="18" width="18" border="0" src="Images/nextdiff.png">快速导航到具有差异的下一个元素。
			</li>
			<li>
				<img height="18" width="18" border="0" src="Images/prevdiff.png">快速导航到具有差异的上一个元素。
			</li>
			<li>
				<img height="18" width="18" border="0" src="Images/expand.png">展开“合成”部分的树。请注意，此操作可能需要大型模型。
			</li>
			<li>
				<img height="18" width="18" border="0" src="Images/collapse.png">折叠合成部分的树。
			</li>
			<li>
				<img height="18" width="18" border="0" src="Images/categories_icon.png">打开提供过滤和聚焦功能的“差异类别”对话框（见下文）。
			</li>
		</ul>
		<p>通过单击三角形按钮可以获得其他功能。</p>
		<p>
			<img width="220" border="0" src="Images/SynthesisMenu.png">
		</p>
		<ul>
			<li>
				<b>'更新...</b> '：显示设置对话框以重新启动比较，可能使用不同的设置，而无需重新加载模型。对模型所做的所有更改都将保留。例如，这对于迭代地调整比较的配置是有用的。
			</li>
		</ul>
		<ul>
			<li>
				<b>“显示所有元素</b> ”：禁用时，“合成”部分仅直接或通过其子元素表示包含差异的元素。启用后，将显示左侧和右侧模型中的所有元素。
			</li>
		</ul>
		<ul>
			<li>
				<b>'差异类别......</b> '：与上述按钮类似，打开提供过滤和聚焦功能的“类别”对话框（见下文）。
			</li>
		</ul>
		<ul>
			<li>
				<b>'链接视图</b> '：此菜单项有两个子项。
				<b>“左/右模型和合成</b> ”启用/禁用“合成”部分与中间和右侧部分之间的同步。
				<b>“外部视图</b> ”启用/禁用整个差异/合并UI与其他Eclipse视图（如“属性”视图）之间的同步。
			</li>
		</ul>
		<ul>
			<li>
				<b>'按字母顺序排序</b> '： <b>按字母顺序</b>对“合成”部分的元素进行排序。
			</li>
		</ul>
		<ul>
			<li>
				<b>'使用增强的图标</b> '：元素的图标是否用指示差异原点的箭头装饰。
			</li>
		</ul>
		<ul>
			<li>
				<b>'使用增强标签</b> '：类似地，元素名称是否富含指示差异来源的字符。
			</li>
		</ul>
		<ul>
			<li>
				<b>'显示左/右内容</b> '：右上和左侧模型是否显示在上部区域。如果水平空间有限，隐藏它们会很方便。
			</li>
		</ul>
		<ul>
			<li>
				<b>'显示差异数字</b> '：每个元素包含的<b>差异数量</b>是否显示为其名称的后缀。
			</li>
		</ul>
		<ul>
			<li>
				<b>'显示合并影响</b> '：是否必须在执行合并之前显示“合并影响”对话框。此对话框表示由于合并而将对模型进行的所有更改（请参阅下面的快照）。它允许用户更好地理解他的合并操作的后果，并在需要时取消它们。这些后果并不总是微不足道的：为了合并，某些差异需要同时合并其他人才能保持模型的完整性 - 这是由差异/合并工具自动完成的。这些差异在对话框中显示为“隐含更改”。请注意，在3向比较中，合并差异可能会阻止在相反方向上合并另一个差异 - 这称为冲突。对话框中的红色叠加图标突出显示此类冲突。
			</li>
		</ul>
		<p>
			<img border="0" src="Images/Model-DiffMerge_html_6a675b42.png">
		</p>
		<ul>
			<li>
				<b>'支持撤消/重做</b> '：当激活时，用户可以通过常用的快捷键Ctrl-Z和Ctrl-Y或通过“编辑”菜单撤消/重做他的动作。当模型的尺寸有限时，此功能更合适;否则，撤消大型模型上的合并可能是长时间运行的操作。
			</li>
		</ul>
		<ul>
			<li>
				<b>“记录对模型</b>的<b>更改</b> ”：激活时，对模型所做的所有修改都记录在HTML文件中。此文件名为“ModelComparisonLog.htm”，与当前工作空间文件夹的“.metadata”子文件夹中的常用“.log”文件位于同一位置。如果当前工作空间文件夹未知，请右键单击从头开始创建的项目，单击“属性”菜单项并在“资源”类别中查找“位置”行。
			</li>
		</ul>
		<p>
			<b>重要提示</b> ：最后三个功能（“显示合并影响”，“支持撤消/重做”，“对模型进行日志更改”）会产生性能损失。合并差异通常需要更长时间，如果启用它们则需要更多内存。因此，在执行大型合并时禁用它们可能是相关的。
		</p>
		<p>
			<br>
		</p>
		<h3 id="Difference_Categories_Dialog">差异类别对话框</h3>
		<p>该<img border="0" src="Images/categories_icon.png">按钮或“差异类别...”菜单项允许过滤掉显示的差异，以便于理解并将合并活动拆分为专注于不同差异的连续阶段。
		</p>
		<p>差异类别涵盖比较中的差异或模型元素的子集。相反，给定的差异或元素可以属于几个类别。<b>“差异类别</b> ”对话框提供对差异类别的控制。
		</p>
		<p>
			<img width="500" border="0" src="Images/Categories.png">
		</p>
		<p>通过复选框将不同的模式应用于每个差异类别。</p>
		<ul>
			<li>
				<b>正常</b> ：除非在任何其他类别上设置焦点，否则使类别的元素和差异可见。
			</li>
			<li>
				<b>已过滤</b> ：过滤掉类别的元素和差异。此模式优先于其他模式：如果差异属于多个类别且其中一个处于过滤模式，则差异仍会被过滤掉。
			</li>
			<li>
				<b>焦点</b> ：仅显示属于该类别的元素和差异。如果多个类别处于焦点模式，则仅显示属于任何这些类别的元素和差异。
			</li>
		</ul>
		<p>将鼠标指针悬停在某个类别上可在工具提示中查看其说明。</p>
		<p>此外，对话框中提出了四个按钮。</p>
		<ul>
			<li>
				<b>'Apply</b> '：应用已设置的模式并更新整个GUI而不关闭对话框。
			</li>
			<li>
				<b>'确定</b> '：应用已设置的模式，更新整个GUI并关闭对话框。
			</li>
			<li>
				<b>'重置</b> '：将所有类别设置为默认模式，这可能因类别而异。
			</li>
			<li>
				<b>'取消</b> '：保留当前应用的模式，关闭自上次应用程序以来所做的所有更改并关闭对话框。
			</li>
		</ul>
		<p>请注意，“差异类别”对话框不是模态的，因此可以在对话框打开时导航差异。</p>
		<p>如果由于所选的类别模式而有可能过滤掉默认设置中可见的差异，则<b>“[过滤]</b> ”提及将出现在“合成”部分的标题中（如下图所示）。这是一个警告，即使GUI可能没有显示任何差异，也可能无法完成差异分辨率的工作。只需单击“重置”按钮，然后单击“确定”或“应用”按钮即可显示剩余差异。
		</p>
		<p>
			<img width="300" border="0" src="Images/FilteredWarning.png">
		</p>
		<p>
			<br>
		</p>
		<h3 id="Details_Section">细节部分</h3>
		<p>在“合成”部分中选择的元素的属性在“详细信息”部分（下部区域）中可见。此部分细分为表示属性本身的<b>属性部分</b> （左列）和表示模型中与列对应的所选属性的值的两个<b>值部分</b> （中间和右侧列）。
		</p>
		<p>
			<img width="600" border="0" src="Images/Details.png">
		</p>
		<p>单击属性部分中的三角形按钮会带来一些选项。</p>
		<p>
			<img width="250" border="0" src="Images/Model-DiffMerge_html_c86e852.png">
		</p>
		<ul>
			<li>
				<b>“显示差异值</b> ”：选中后，“值”部分中仅显示不同的值。
			</li>
		</ul>
		<ul>
			<li>
				<b>“显示所有值</b> ”：选中后，当前属性或引用的所有值都显示在“值”部分中。突出显示那些不同的。
			</li>
		</ul>
		<ul>
			<li>
				<b>'显示所有值和属性</b> '：选中后，当前元素的所有属性（属性和引用）都显示在“详细信息”部分中。具有差异的属性将突出显示，如下面的快照中所示。因此，可以查看模型元素的所有属性，但通常建议使用“ <a href="https://wiki.eclipse.org/ModelingAmalgam/ContextualExplorer">模拟混合</a>视图”的“ <a href="https://wiki.eclipse.org/ModelingAmalgam/ContextualExplorer">上下文浏览器”</a> 。
			</li>
		</ul>
		<ul>
			<li>
				<b>“使用技术表示</b> ”：选择后，属性以技术形式显示，提供更难阅读但更准确的命名和输入信息。
			</li>
		</ul>
		<p>
			<br>
		</p>
		<h3 id="Difference_Handling_Buttons">差异处理按钮</h3>
		<p>差异处理按钮的目的是决定如何处理差异，即比较模型的合并方式。</p>
		<ul>
			<li>
				<img height="18" width="18" border="0" src="Images/dedicated.png"> <b>“在专用编辑器中打开</b> ”按钮仅对文本属性启用。它打开一个专门用于细粒度文本合并的编辑器（这也可以通过双击“值”部分中的文本来实现）。按下此编辑器的“确定”按钮后，用户所做的更改将标记为已接受。如果需要，可以通过取消过滤“忽略的差异”类别来细化它们（参见上面相应的小节）。
			</li>
		</ul>
		<p>编辑器中的向上/向下箭头按钮在差异之间导航，而左/右按钮应用更改。还支持复制/粘贴和直接版本。</p>
		<p>
			<img width="800" border="0" src="Images/DedicatedText2Way.png">
		</p>
		<p>在三向比较中，由于<b>“显示祖先窗格</b> ”按钮（工具栏中最左边的一个），也可以显示祖先的文本。
		</p>
		<p>
			<img width="800" border="0" src="Images/DedicatedText3Way.png">
		</p>
		<p>文本属性设置为分开，差异处理的通用按钮在“值”部分中可见。</p>
		<p>
			<img border="0" src="Images/MergeButtons.png">
		</p>
		<p>它们分为两个对称组，每个模型一组。根据当前选择自动启用和禁用组中的按钮。</p>
		<ul>
			<li>
				<img border="0" src="Images/Model-DiffMerge_html_5b0468f9.png"> <b>“应用于右侧/左侧</b> ”按钮：给定一个模型中存在的元素或值而不存在另一个模型中的元素或值，单击此按钮可复制元素或值并将其存储在缺少模型的模型中。
			</li>
		</ul>
		<ul>
			<li>
				<img border="0" src="Images/Model-DiffMerge_html_m7a3a1b12.png"> <b>“左/右删除</b> ”按钮：给定一个模型中存在的元素或值而不存在另一个模型中的元素或值，单击此按钮将删除模型中存在的元素或值。
			</li>
		</ul>
		<ul>
			<li>
				<img border="0" src="Images/Model-DiffMerge_html_3f155383.png"> <b>“忽略左/右</b> ”按钮：选中的差异将被忽略，虽然它们未合并，但不会再出现。通过单击此按钮，用户声明所选差异不是有趣或相关的。为了使它们再次可见，可以使用通常的撤消机制撤消忽略操作，或者可以通过“差异类别”对话框临时恢复所有忽略的差异的可见性。
			</li>
		</ul>
		<p>当前选择位于“值”部分时，可以将这些按钮应用于值，或者当当前选择位于“合成”部分时，可以应用于元素。如果选择是多个或包含多个差异，则“删除”按钮被禁用，“复制”按钮允许合并所有差异。单击它们会弹出一个对话框，允许用户说明必须如何合并差异。</p>
		<p>
			<img border="0" src="Images/Model-DiffMerge_html_306f66da.png">
		</p>
		<ul>
			<li><b>“包含子项差异</b> ”复选框确定是否必须合并包含树中所选元素及其所有子项的差异。否则，仅合并所选元素中的差异。
			</li>
			<li><b>“增量模式</b> ”在激活时不会删除元素或值。仅合并保留现有数据的差异。
			</li>
			<li>
				<b>“显示合并影响</b> ”会覆盖“显示合并影响”选项（请参阅“合成”部分的相应菜单项的说明），这对于避免在选择大量差异时显示大的影响特别有用。
			</li>
		</ul>
		<p>与“复制”按钮类似，“忽略”按钮可以触发专用对话框，该对话框允许控制该操作是否适用于所选元素的所有子元素。如果未选中该复选框，则会忽略所选元素的差异，但不会忽略其子元素的差异。</p>
		<p>
			<img border="0" src="Images/Model-DiffMerge_html_6268bf2e.png">
		</p>
		<p>
			<br>
		</p>
		<h3 id="Fully_Textual_Comparison">完全文本比较</h3>
		<p>虽然建议的模型和图表文件的比较方法是使用Diff / Merge工具，但有时可能会以文本方式比较模型和图表文件。这可以通过选择两个模型或图表文件并在Project Explorer弹出菜单中选择“Compare With” - “Each Other”来实现。这将打开Diff / Merge比较，区别在于可以通过在比较编辑器下拉菜单中选择“文本比较”来切换到文本比较：</p>
		<p>
			<img border="0" src="Images/compare_as_text.png">
		</p>
		<p>
			<br>
		</p>
		<h2 id="Difference_Resolution_in_a_Nutshell">坚果壳中的差异分辨率</h2>
		<p>本节总结了处理模型差异必须遵循的<b>基本步骤</b> 。
		</p>
		<h3 id="Opening_the_GUI">打开GUI</h3>
		<p>EMF差异/合并GUI可以在Eclipse中使用工作区文件的“比较” - “彼此作为模型”上下文菜单打开。</p>
		<p>
			<img border="0" src="Images/Model-DiffMerge_html_m4a2563eb.png">
		</p>
		<h3 id="Resolving_Differences">解决差异</h3>
		<p>以下按钮可用于解决差异。</p>
		<ul>
			<li>
				<img border="0" src="Images/Model-DiffMerge_html_6894195c.png">用于在差异之间导航的按钮。
			</li>
			<li>
				<img border="0" src="Images/Model-DiffMerge_html_m47d0d5c1.png">用于合并和忽略差异的按钮。
			</li>
			<li>
				<img border="0" src="Images/Model-DiffMerge_html_7d047cd2.png">或用于保存更改的Ctrl-S快捷方式。
			</li>
		</ul>
		<p>请注意，在某些情况下，执行合并可能需要一些时间，尤其是在大型模型之间进行全局合并时。操作期间显示进度条。</p>
		<p>
			<img border="0" src="Images/Model-DiffMerge_html_m9cba6ee.png">
		</p>
		<h3 id="Saving_Merge_Decisions">保存合并决策</h3>
		<p>当“合成”部分的内容为空时，不会消除显着差异（“[过滤]”未出现在“合成”部分的标题中），并且按Ctrl-保存更改，则认为差异的分辨率已完成S.</p>
		<p>
			<img border="0" src="Images/Model-DiffMerge_html_m4d91695e.png">
		</p>
		<p>请注意，没有明显的差异并不意味着左右模型是相同的。它只是意味着用户已考虑所有差异，并且已合并或明确忽略或过滤掉。</p>
		<p>
			<br>
		</p>
		<h2 id="Integration_with_Version_Control">与版本控制集成</h2>
		<h3 id="Local_File_History">本地文件历史记录</h3>
		<p>Eclipse维护文件修改的本地历史记录，并允许将文件与本地历史记录中的版本进行比较。有关更多信息，请参阅<a href="/wiki/../help/topic/org.eclipse.platform.doc.user/concepts/concepts-17a.htm?cp=0_2_1_8" title="../help/topic/org.eclipse.platform.doc.user/concepts/concepts-17a.htm？CP = 0_2_1_8">本地历史记录文档</a>
		</p>
		<h3 id="Version_Control_Systems">版本控制系统</h3>
		<p>Eclipse提供了一些机制（Eclipse Team），可以更轻松地与版本控制系统（VCS）进行交互。集成在Eclipse中并使用这些机制的VCS客户端（例如EGit for Git）可以与EMF Diff / Merge交互，以便例如比较识别良好的版本，提交或分支，理解提交的内容或解决冲突合并分支时。</p>
		<p>这可以通过以下方式实现</p>
		<ul>
			<li>在Eclipse中安装VCS客户端。</li>
			<li>为此客户端安装EMF Diff / Merge插件（此时只有EGit）。</li>
			<li>将模型的文件扩展名声明为XMI：Window  -  Preferences  -  General  -  Content Types  -  Text  -  XML  -  XMI Metadata Interchange  -  Add：type，例如'* .myfileextension'。</li>
		</ul>
		<p>如果此设置成功，则基于VCS的功能（例如通过“与...比较”上下文菜单中提供的功能）将在适当时自动使用EMF Diff / Merge GUI。对于EGit，请注意不要直接使用Git预合并的内容（请参阅窗口 - 首选项 - 团队 -  Git，'合并工具内容'：不要选择'工作区'）。</p>
	</body>
</html>
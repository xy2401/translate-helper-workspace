<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" gtc:encodedoriginal="PCFET0NUWVBFIEhUTUwgUFVCTElDICItLy9XM0MvL0RURCBIVE1MIDQuMDEgVHJhbnNpdGlvbmFsLy9FTiI-">
<html >
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WTP教程 -  JavaServer Faces工具教程</title>


<link rel="stylesheet" href="default_style.css">

</head>


<body  link="#0000ff" vlink="#800080">

<div align="right"> 
<table border="0" cellpadding="2" cellspacing="0" width="100%">

	<tbody>

		<tr>

			<td colspan="2" align="left" bgcolor="#0080c0" valign="top"><b><font color="#ffffff">Eclipse Corner文章</font></b></td>

		</tr>

	</tbody>
</table>

</div>

<div align="left">
<h1><img src="images/Idea.jpg" align="middle" height="86" width="120"></h1>

</div>

<p></p>

<h1 align="center">WTP教程 -  JavaServer Faces工具教程</h1>

<blockquote><b>摘要</b> <br>在本教程中，我们将构建并执行JavaServer Faces应用程序，并突出显示JSF Tools Project提供的功能。
<p><b>作者：Oracle公司的Raghu Srinivasan。</b> <br>

<font size="-1">2009年6月15日</font></p>

</blockquote>

<hr width="100%">
<h3>介绍</h3>

<p>在本教程中，我们将使用JavaServer Faces功能创建和执行Web应用程序。WTP JSF Tools项目提供了简化应用程序构建，配置和执行的功能。其中包括用于可视化编辑JSF-JSP网页的Web页面编辑器，JSF-JSP页面的语法和语义验证，用于编辑应用程序配置资源文件的Faces Configuration Editor。<br>在尝试本教程之前，您可能希望访问<a href="http://www.eclipse.org/webtools/community/tutorials/BuildJ2EEWebApp/BuildJ2EEWebApp.html">构建和运行Web应用程序</a> 。该教程涵盖了本教程未提供的服务器实例的设置。<a id="setup"></a></p>

<h3>建立</h3>
<p></p>
<ul>
	<li><a href="http://java.sun.com/javase/downloads/index.jsp">Java SE 6开发套件（JDK）</a></li>
	<li><a href="http://eclipse.org/downloads/">Eclipse 3.5</a></li>
	<li><a href="http://download.eclipse.org/webtools/downloads/">Eclipse Web Tools Platform Project（WTP）3.1</a></li>

	<li><a href="http://tomcat.apache.org/">Apache Tomcat 6.0</a></li>
	<li><a href="http://java.sun.com/javaee/javaserverfaces/download.html">JavaServer Faces RI v1.2</a></li>
	<li>JSP（tm）标准标记库1.2实现</li>
</ul>
<p><a id="reglibs"></a></p>
<h3>使Web页面编辑器成为JSP页面的默认编辑器</h3>JSF工具项目提供的网页编辑器（WPE）未注册为JSP文件的默认编辑器。您可以按照以下步骤使WPE成为JSP文件的默认编辑器：<ul>
	<li>导航到“窗口” - &gt;“首选项...” - &gt;“常规” - &gt;“编辑器” - &gt;“文件关联”</li>
	<li>在“文件类型”部分中，选择“* .jsp”</li>
	<li>在“关联的编辑器”部分中，选择“网页编辑器”</li>
	<li>选择“默认”按钮</li>
</ul>

<p><a id="newproject"></a></p>
<h3>创建JavaServer Faces项目</h3>

<p>创建一个名为<b>JSFTutorial</b>的新动态Web应用程序。将目标运行时设置为<b>Apache Tomcat 6.0</b><br>在<b>配置</b>部分中，选择<b>JavaServer Faces Project v1.2</b> 。跳过接下来的两个面板，进入JSF功能页面。<br>
<br>
<img alt="新的动态Web应用程序" src="images/new-dynamic-web-project.png" height="588" width="554"></p>


<br>

<p>在JSF Capabilities页面上，从JSF Library的Type下拉列表中，选择<b>User Library</b> 。<br>
<br>

<img alt="JSF功能页面" src="images/jsf-capabilities-library.png"></p>


<br>
<p>单击“ <b>下载库”</b>图标。将显示“下载库”对话框，其中包含JSF实现JAR文件的提供程序列表。从Sun Microsystem中选择库。单击<b>下一步</b> 。接受许可证并单击“ <b>完成”</b> <br><br>
<img alt="JSF功能页面" src="images/jsf-download-library.png"></p>


<br>该工具下载JAR文件，创建JDT用户库并将其添加到当前项目中。如果未选择新库，请选中该库的复选框。接下来，选择“ <b>管理库”</b>图标。<br>
<br>
<img alt="JSF功能页面" src="images/jsf-capabilities-library-2.png">
<br>
<br>创建JDT用户库以保存JSTL jar文件。谢谢你好<b>。</b>
<br><br>
<img alt="JSF功能页面" src="images/jsf-new-library.png">
<br>
<br>JSTL库显示在JSF Capabilities对话框中。选择libray并单击<b>Finish</b>
<br><br>
<img alt="JSF功能页面" src="images/jsf-add-jstl-library.png">
<br>
<br>
<p>您的JSF应用程序已创建。请注意，web.xml文件已使用Faces Servlet和servlet-mapping进行更新，已创建存根JSF应用程序配置文件（faces-config.xml），并且已使用实现jar更新了构建路径。<br>
<br>
<br>
<img alt="" src="images/project-explorer.png" height="283" width="389"></p>


<br>
<p><img src="images/note.gif" height="13" width="62">如果您有一个现有的动态Web应用程序，则可以通过以下方式添加JSF功能：<br>
<b>项目属性&gt;项目构面&gt;添加\删除项目构面...</b></p>

<p><a id="newpage"></a></p>

<h3>创建一个JSF JSP页面</h3>
<p>使用JSP页面向导在新应用程序的Web Content文件夹中创建名为<b>login.jsp</b>的页面。在向导的“选择模板”页面中，选择“ <b>新建JSP（html）”</b>模板。单击完成。该页面将在网页编辑器中打开，如下所示<br>
<br>
<br>
<img alt="网页编辑器" src="images/web-page-editor.png" height="589" width="957"></p>

<br>打开“属性视图”。在设计器画布上单击鼠标右键，然后从上下文菜单中选择“显示” - &gt;“属性”。等待“读取属性”对话框消失。
<br>
<br>
<h5>将CommandButton添加到画布。</h5>
<ul>
	<li>在<b>Palette View中</b> ，单击<b>JSF HTML</b>部分以显示组件列表。</li>
	<li>将CommandButton拖放到画布上。请注意，编辑器使用<b>&lt;f：view&gt;</b>和<b>&lt;h：form&gt;</b>标记包装CommandButton。</li>
	<li>在属性视图中，单击“ <b>快速编辑”</b> 。</li>
	<li>将<b>Value</b>属性设置为<b>Login</b> 。</li>
	<li>将<b>Action</b>属性设置为<b>login</b></li>
</ul>
<br>
<br>
<img alt="WPE-Add CommandButton" src="images/wpe-add-cmd.png" height="447" width="854">


<br>
<h5>添加PanelGrid</h5>
<ul>
	<li>从Palette View中，将PanelGrid拖放到画布上。注意掉落目标的反馈。</li>
	<li>在命令按钮之前删除Panel Grid，但在Form标记内。Panel Grid是使用一组预定义的OutputText组件创建的。</li>
</ul>
<h5>修改Panel Grid内的组件</h5>
<ul>
	<li>单击OutputText <b>Item2</b>并单击Delete</li>
	<li>在<b>Item1</b>之后和<b>Item3</b>之前添加InputText（Palette视图中的文本输入）标记</li>
	<li>删除OutputText， <b>第4项</b></li>
	<li>在<b>Item3</b>之后添加InputSecret（Palette视图中的Secret Input）标记</li>
	<li>单击OutputText， <b>Item1</b> 。将其源视图中的值更改为<b>名称</b></li>
	<li>单击OutputText， <b>Item3</b> 。将其在“源视图”中的值更改为“ <b>密码”</b></li>
	<li>单击“ <b>预览”</b>选项卡以查看在浏览器中呈现的页面</li>
	<li>单击<b>Name</b>旁边的InputText标签。在Property View中，将value属性设置为<b>＃{loginBean.name}</b> 。</li>
	<li>保存页面。编辑器将标记一个警告，指示无法解析变量<b>loginBean</b> 。</li>
</ul>
<br>
<br>
<img alt="WPE-Add PanelGrid" src="images/wpe-add-panel.png" height="438" width="892">


<br>

<a id="faces-config-bean"></a>在Project Explorer中，展开节点JSFTutorial-&gt; WebContent。双击<b>faces-config.xml</b> 。这将启动Faces Configuration编辑器。选择<b>ManagedBean</b>选项卡。

<br>
<br>
<img alt="Faces Config Editor Managed Bean" src="images/facesconfig-editor-bean.png" height="423" width="694">
<br>
<br>单击“ <b>添加”</b>按钮。这将启动New Managed Bean向导。选择“ <b>创建新Java类</b> ”选项。在下一个向导面板中，输入包as， <b>com.tutorial</b>和类名为<b>LoginBean</b> 。单击“完成”按钮。
<br>
<br>
<img alt="新管理的Bean" src="images/new-managedbean.png" height="234" width="495">
<br>
<br>这将创建Java类并将其注册为托管bean。保存Faces配置编辑器。要编辑Java类，请单击Managed bean页面中的超链接<b>ManagedBean类</b> ，如下图所示。这将启动Java编辑器。
<br>
<br>
<img alt="Faces Configuration Editor  -  Managed Bean选项卡" src="images/fce-managedbean-class.png" height="181" width="599">
<br>
<br>

<p><a id="createbean"></a></p>
<br>编辑Java类<b>com.tutorial。LoginBean</b> 。添加以下代码并保存。
<br>
<br>
<img alt="LoginBean" src="images/loginbean.png" height="491" width="405">

<br>
<a id="el-validate-bean"></a>在Project Explorer视图中，右键单击JSP页面<b>login.jsp，</b>然后从上下文菜单中选择<b>Validate</b>选项。请注意，该页面现在应该有效。
<br>
<br>
<a id="el-ca-bean-properties"> </a>在网页编辑器的源页面中，添加JSF标记<b>&lt;h：inputSecret value =“＃{}”&gt; &lt;/ h：inputSecret&gt;</b> 。将光标放在括号内， <b>按Ctrl +空格键</b> 。您应该看到一个弹出窗口，其中包含所有隐式对象的列表以及上面定义的托管bean。选择托管bean， <b>loginBean</b>
<br>
<br>
<img alt="在EL中验证bean属性" src="images/el-ca-all.png" height="186" width="715">
<br>
<br>输入未在托管bean中定义的属性名称（例如x）并保存更改。编辑器将报告无法解析该属性的警告。
<br>
<br>
<img alt="在EL中验证bean属性" src="images/validate-bean-properties.png" height="141" width="509">
<br>
<br>删除无效属性。在<b>'后面<b>按Ctrl +空格键</b> <b>。'</b>在豆名中。您应该看到一个弹出窗口，其中列出了托管bean中定义的属性。从菜单中选择<b>密码</b> 。
<br>
<br>
<img alt="内容辅助" src="images/el-ca-bean-properties.png" height="55" width="487">
<br>
<br>创建一个Java类<b>com.tutorial.validatePassword</b> ，它实现<b>Validator</b>接口并保存。
<br>
<br>
<img alt="验证器" src="images/custom-validator.png" height="278" width="611">

<br>
<a id="faces-config-validator"></a>在Project Explorer中，展开节点JSFTutorial-&gt; WebContent。双击<b>faces-config.xml</b> 。这将启动faces-config编辑器。选择“ <b>组件”</b>选项卡。展开“ <b>验证器”</b>部分。

<br>
<br>
<img alt="面配置编辑器组件选项卡" src="images/faces-config-validator.png" height="376" width="788">
<br>
<br>单击“ <b>添加”</b>按钮。选择与<b>Validator Class</b>字段关联的<b>Browse</b>按钮，然后选择<b>com.tutorial。ValidatePassword</b>类。保存更改。
<br>
<br>
<img alt="Faces Config Editor寄存器Validator" src="images/facesconfig-register-validator.png" height="372" width="645">
<br>
<br>
<a id="ca-validator-id-list"></a>添加JSF标记， <b>&lt;f：validator id =“”&gt; &lt;/ f：validator&gt;</b> 。将光标放在双引号内， <b>按Ctrl +空格键</b> 。您应该看到一个弹出窗口，其中包含所有标准验证器的列表以及faces-config文件中注册的验证器。选择<b>验证密码</b> 。
<br>
<br>
<img alt="验证器的内容辅助" src="images/ca-validator-lov.png" height="112" width="495">
<br>
<br>
<br>
<a id="el-ca-loadbundle"></a>我们现在将页面中使用的静态字符串移动到资源包中。为此，请在<b>com.tutorial</b>文件夹中添加名为<b>messages.properties</b>的文件。如下所示定义属性并保存文件。
<br>
<br>
<img alt="资源包的内容辅助" src="images/el-ca-messages-properties.png" height="207" width="552">
<br>
<br>添加JSF标记， <b>loadBundle</b>如下所示。您可以从Palette View的<b>JSF Core</b>部分拖放标记。
<br>
<br>
<img alt="资源包的内容辅助" src="images/el-ca-define-loadbundle.png" height="86" width="480">
<br>
<br>删除<b>outputLabel</b>标记的value属性中的字符串<b>Name</b> 。将光标放在括号内，然后<b>按Ctrl +空格键</b> 。您应该看到一个弹出窗口，其中包含您在<b>loadBundle</b>标记中定义的<b>msg</b>变量。选择它。
<br>
<br>
<img alt="资源包的内容辅助" src="images/el-ca-loadbundle-var.png" height="187" width="529">
<br>
<br>在<b>msg</b>之后输入一个点，然后<b>按Ctrl +空格键</b> 。您应该看到一个弹出窗口，其中包含<b>messages.properties</b>文件中定义的属性列表。选择属性， <b>名称</b> 。
<br>
<br>
<img alt="资源包的内容辅助" src="images/el-ca-msg-properties.png" height="69" width="550">
<br>
<br>
<br>完成登录页面，如下所示。
<br>
<br>
<img alt="完成登录页面" src="images/login-final.png" height="484" width="836">
<br>
<br>创建一个新的JSF页面<b>welcome.jsp</b> ，如下所示。
<br>
<br>
<img alt="完成登录页面" src="images/welcome.png" height="342" width="650">
<br>
<br>
<h3><a id="facesconfigeditor"></a>面部配置资源编辑器</h3>JSF Tools项目包含faces配置资源文件的特殊编辑器。以下部分简要介绍了编辑器。详细介绍编辑器所有功能的综合教程即将发布。
<br>双击<b>faces-config.xml</b>文件以启动Faces配置编辑器。切换到“ <b>导航”</b>选项卡。
<br>
<br>
<img alt="面部配置编辑器" src="images/facesconfig-editor.png" height="388" width="528">
<br>
<br>
<ul>
	<li>将<b>login.jsp</b>和<b>welcome.jsp</b>添加到Navigation选项卡。从Palette中选择<b>Page</b>控件并将其放在Navigation选项卡上。在生成的“ <b>选择JSP文件”</b>对话框中选择页面。</li>

	<li>连接两页。单击Palette中的<b>Link</b>控件，选择<b>登录</b>页面并在<b>欢迎</b>页面上画一条线。在“导航”选项卡中选择该行，然后在属性视图中，将<b>from-outcome</b>的值设置为<b>login</b> 。</li>
</ul>
<br>
<br>
<img alt="面部配置编辑器" src="images/navigation.png" height="412" width="519">
<br>
<br>
<h3><a id="testpage"></a>测试JSF JSP页面</h3>
<p>1）我们现在将针对Apache Tomcat服务器执行页面。在导航器中选择login.jsp页面时，使用上下文菜单选择<b>Run on Server</b> 。<br>
<br>
<br>
<img alt="" src="images/run-jsf.PNG" height="443" width="450"></p>


<br>

<p>2）选择您的Apache Tomcat服务器并根据需要进行设置（如果您尚未这样做）。<br>
<br>3）单击“完成”。您应该从Console视图中看到Tomcat服务器启动，然后您应该看到正在执行的登录页面出现在Web浏览器中，如下所示。<br>
<br>
<br>
<img alt="" src="images/jsf-app.png" height="173" width="547"></p>


<br>单击<b>登录</b>按钮。您应该导航到<b>欢迎</b>页面。
<br>
<br>
<img alt="" src="images/jsf-app1.png" height="144" width="516">



<br>
<p><b>恭喜！您已使用新的Eclipse WTP JSF工具创建并执行了第一个JavaServer Faces应用程序。</b></p>
</body>
</html>

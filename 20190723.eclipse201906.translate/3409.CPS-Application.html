<html lang="zh-Hans" dir="ltr">
<head>
<meta charset="UTF-8"></meta>
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
<meta name="generator" content="Asciidoctor 1.5.6.1"></meta>
<title>CPS申请</title>
<link rel="stylesheet" href="asset?aid=0"></link>
<link rel="stylesheet" href="./asciidoctor.css"></link>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css"></link>
</head>
<body class="article" dir="ltr">
<div id="header">
<h1>CPS申请</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>CPS演示器应用程序包含各种功能，以演示使用<a href="Domains.html">CPS域模型</a>的VIATRA的各种功能。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_start">怎么开始</h2>
<div class="sectionbody">
<div class="paragraph">
<p>启动CPS Application Eclipse实例（ <a href="https://hudson.eclipse.org/viatra/job/viatra-examples-cps/lastSuccessfulBuild/artifact/cps/releng/org.eclipse.viatra.examples.cps.application.product/target/products">从此处下载</a> ）。</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">启动此应用程序的多个实例会导致<code>Java was started but returned exit code=1</code>错误消息，这两个应用程序打开端口1099以便VIATRA调试器连接。为了支持多个实例，您必须在相应的eclipse.ini文件中<a href="../extra/VIATRA-debugger.html#_setting_up_the_transformation_under_debugging">修改调试端口号</a> 。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_initializing_cps_models">初始化CPS模型</h2>
<div class="sectionbody">
<div class="paragraph">
<p>选择<em>文件/新建/其他，</em>然后在<em>CPS演示器</em>类别中选择<em>CPS演示器示例</em>并创建示例项目。<br>该项目包含一个示例CPS模型<em>（example.cyberphysicalsystem）</em>作为转换的源模型，一个空目标模型<em>（example.deployment）</em>和一个<em>example.traceability</em> ，它连接源模型和目标模型。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_executing_the_transformation">执行转换</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CPS转换视图允许使用<a href="Alternative-transformation-methods.html">不同策略</a>启动或停止<a href="CPS-to-Deployment-Transformation.html">CPS到部署M2M转换，</a>并显示正在运行的转换。<br>要打开视图，请按CTRL + 3并键入视图的名称。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cps/cps_transform_view.png" alt="CPS转换视图">
</div>
</div>
<div class="paragraph">
<p>该视图显示当前运行的转换的详细信息：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>包含模型的资源的名称</p>
</li>
<li>
<p>转型战略</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>双击转换以导航到模型。</p>
</div>
<div class="paragraph">
<p><strong>转型策略：</strong><br>在下拉列表中，您可以选择转换<a href="Alternative-transformation-methods.html">策略</a> 。批处理和增量有两种执行模式。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>批处理模式清除目标模型并转换整个源模型然后停止。</p>
</li>
<li>
<p>增量转换会转换模型，然后继续运行并将源模型的更改应用于目标模型。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>操作：</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>运行Transformation image :: cps / load_query_icon.png []：打开Traceability模型并选择<code>CPS To Deployment</code>元素。此按钮使用所选策略启动新转换。</p>
</li>
<li>
<p>使用调试器运行转换image :: cps / load_xform_w_debugger_icon.png []：此按钮使用所选策略在<code>CPS To Deployment</code>元素上启动新转换。在连接<a href="#debug">VIATRA Transformation Remote Debugging</a>之前，转换不会开始。</p>
</li>
<li>
<p>停止转换image :: cps / unload_icon.gif []：停止当前运行的增量转换（在下面选择）并释放其资源。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced">高级</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="debug">使用转换调试器</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>选择<code>CPS To Deployment</code>元素并启动具有调试器支持的VIATRA转换。现在，转换正在等待附加调试器。</p>
</li>
<li>
<p>打开Debug透视图</p>
</li>
<li>
<p>在<em>运行/调试配置中，</em>创建一个新的VIATRA转换远程调试</p>
</li>
<li>
<p>将Target Port设置为10990并按<em>Query Port</em> ，然后转换将出现在Target VIATRA Transformation列表中</p>
</li>
<li>
<p>定义转换的Java类应输入VIATRA转换类字段，以将断点与其关联。这次在新的Java项目中使用一个新的虚拟类。</p>
</li>
<li>
<p>按Debug</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>使用Step Over，设置断点并恢复转换。<br>以下视图有助于调试：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>转换浏览器视图显示可以执行转换规则的哪些激活。如果要执行某个规则或激活或条件为真，您可以在此处设置要暂停的断点。</p>
</li>
<li>
<p>转换模型实例查看器显示转换期间模型的当前状态。</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cps/cps_debug.png" alt="CPS调试配置">
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">使用相同的Eclipse实例调试增量转换并更改模型会导致程序冻结。使用其他Eclipse实例或从<em>“运行/运行配置”运行</em>新的Eclipse Application实例并从中<em>运行</em>调试器。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>在<a href="../extra/VIATRA-debugger.html">此处</a>查找有关调试器的更多详细信息。</p>
</div>
</div>
<div class="sect2">
<h3 id="_cps_model_generator_wizard">CPS模型生成器向导</h3>
<div class="paragraph">
<p>除了初始化准备好的示例或手动创建CPS模型之外，演示器还包括CPS模型生成器，其可以创建预定义模型的实例并且还支持生成任意大的CPS模型。</p>
</div>
<div class="paragraph">
<p>选择<em>文件/新建/其他，</em>然后在<em>CPS演示器</em>类别中选择<em>生成CPS模型</em> 。选择一个文件夹并输入CPS模型的名称。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">与生成源CPS模型，目标部署模型和连接器可跟踪性模型的<em>CPS Demonstrator示例</em>项目相比，CPS模型生成器仅生成CPS模型，该模型必须连接到其他模型才能在转换中使用它。要手动执行此操作，请参阅<a href="#init-models-manual">此部分</a> 。
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cps/cps_wizard_type_page.png" alt="CPS模型生成器中的模型类型">
</div>
</div>
<div class="paragraph">
<p>要创建简单模型，您可以从“ <em>简单测试模型”</em>选项下的几个预设模型中进行选择。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="小费"></i>
</td>
<td class="content">一些发电机使用随机数。种子的初始值是时间依赖的，因此模型很可能在每一代都是不同的。要生成相同的模型，每次使用与随机种子相同的任意数字。
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_scalable_models">可扩展模型</h4>
<div class="paragraph">
<p>要创建任意大的CPS模型，这些模型在结构上相似但具有不同数量的元素，请选择<em>可扩展模型</em>类型。输入正比例因子，该比例因子与模型元素的数量成比例。要生成可在编辑器中打开的合理大小的模型，请从建议的范围输入缩放系数。</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">打开大型模型可能需要一段时间。如果不需要，请关闭开门。
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_model_by_detailed_constraints">按详细约束模型</h4>
<div class="imageblock">
<div class="content">
<img src="images/cps/cps_wizard_details_page.png" alt="详细的模型生成器约束">
</div>
</div>
<div class="paragraph">
<p>CPS模型生成器在生成阶段使用详细配置。 （&lt;&lt; Model-Generator＃，Here&gt;详细介绍。）如果选择“按详细约束建模”，则可以使用此配置的简单版本。</p>
</div>
<div class="paragraph">
<p>某些参数使用最小 - 最大范围指定，该范围用于获取范围的随机数以获取该参数的精确值。<br>其他参数是百分比参数，用于决定如何分配可能元素的选择。</p>
</div>
<div class="paragraph">
<p>对于主机，您可以定义每种类型的HostTypes数量和HostInstances数量。对于每个实例，通信线路的数量将落入定义的范围内。也可以指定生成的信号的数量。<br>ApplicationTypes和ApplicationInstances的数量可以类似地定义。此外，还可以定义ApplicationInstance的状态机中的状态和转换的数量。可以使用百分比参数指定为HostInstance分配的ApplicationInstances的数量，转换中的操作比率以及所有操作中的发送操作的比率。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="init-models-manual">手动初始化CPS模型</h3>
<div class="ulist">
<ul>
<li>
<p>创建<em>部署模型</em> （ <em>文件/新/其他</em>和<em>CPS演示器</em>类别）</p>
<div class="ulist">
<ul>
<li>
<p>根元素应该是<em>部署</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>创建<em>可跟踪性模型</em> （ <em>文件/新/其他</em>和<em>CPS演示器</em>类别）</p>
<div class="ulist">
<ul>
<li>
<p>根元素应为<em>CPS To Deployment</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>打开Traceability文件</p>
</li>
<li>
<p>在Traceability编辑器中，在上下文菜单中<em>加载</em>现有CPS和新创建的Deployment Models with <em>Load Resources ....</em></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tutorial/viatraIncr_example4.png" alt="将必要的资源加载到可跟踪性模型中">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>在属性视图中设置Traceability模型的CPS和部署参考</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tutorial/viatraIncr_example5.png" alt="设置可跟踪性模型的引用">
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>
<html dir="ltr">
<head>
   <meta name="copyright" content="Copyright (c) IBM Corporation and others 2000, 2013. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page."></meta>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></meta>
   <link rel="stylesheet" href="../../../book.css" type="text/css" charset="ISO-8859-1"></link>
   <title>键/值对的结构比较</title>
</head>
<body dir="ltr">

<h2>比较示例 - 键/值对的结构比较</h2>

<h3>介绍</h3>此示例演示如何支持由键/值对组成的文件的结构比较。它展示了如何实现和注册自定义结构创建器，该创建器将键/值对解析为树结构，该树结构用作Compare插件提供的结构比较框架的输入。此外，它还为各个键/值对注册标准文本查看器。

<p>此示例仅用于演示目的。Eclipse Java Tooling提供了对Java属性文件（另一种键/值格式）的结构比较支持。

</p><h3>运行示例</h3>

<ol>
	<li>创建项目（不一定是Java项目）</li>
	
	<li>创建一个键/值对文件f1.kv</li>
	
	<li>打开<strong>窗口</strong> &gt; <strong>首选项</strong> &gt; <strong>工作台</strong> &gt; <strong>文件关联</strong> ，并将默认文本编辑器与文件扩展名“kv”关联</li>
	
	<li>使用编辑器打开f1.kv并输入此内容<pre>lastname = Doe firstname = John city =芝加哥州= IL</pre></li>
	
	<li>制作此文件的副本并将其重命名为f2.kv</li>
	
	<li>打开f2.kv并将名字“John”更改为“Mary”</li>

	<li>将另一个键/值对“country = US”添加到f2.kv</li>
	
	<li>选择文件f1.kv和f2.kv</li>
	
	<li>从上下文菜单中选择<strong>Compare With</strong> &gt; <strong>Each Other</strong></li>
	
	<li>将打开一个新的比较编辑器，显示其顶部窗格中两个文件的结构差异。选择其中一个属性“firstname”或“country”将相应键/值对的文本提供给底部窗格中的标准文本比较查看器。
	</li>
	
</ol>

<h3>代码组织的例子</h3>示例代码组织在单个包<tt>org.eclipse.compare.examples.structcreator中</tt> ：<ul>
	<li><tt>KeyValuePairStructureCreator</tt><br>是结构创建者，它将流的内容解析为<tt>IStructureComparator</tt>的树。
	</li>
	
	<li><tt>TextMergeViewerCreator</tt><br>是TextMergeViewers的工厂。它被注册为“kvtxt”类型，它是单个键/值对的类型。
	</li>
	
	<li><tt>UTIL</tt><br>提供NLS支持的实用程序方法以及将InputStream作为String读取。
	</li>
	
</ul>

</body>
</html>
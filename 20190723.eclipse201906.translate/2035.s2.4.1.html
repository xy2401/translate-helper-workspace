<html lang="zh-Hans" dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
      <link rel="stylesheet" type="text/css" href="../css/ot.css"></link>
      <link rel="stylesheet" type="text/css" href="../css/otjld.css"></link>
      <title>OT / J语言定义v1.3.1</title>
   </head>
   <body class="otdt" dir="ltr">
      <div id="content">
         <table class="nav">
            <tr>
               <td class="back"><a id="top"></a></td>
               <td class="top"><a href="index.html" rel="contents">↑目录↑</a></td>
               <td class="next"><a href="s2.4.2.html" rel="next">§2.4.2通过常规构造函数创建角色&gt;&gt;</a></td>
            </tr>
         </table>
         <div class="breadcrumb"><a class="nav" href="s2.html" rel="section">§2角色绑定</a> &gt; <a class="nav" href="s2.4.html" rel="section">§2.4显式角色创建</a></div>
         <div class="sect depth3" id="s2.4.1">
            <h3 class="sect">§2.4.1通过提升构造函数创建角色<a class="img" href="s2.4.1.html" title="PermaLinkto§2.4.1通过提升构造函数创建角色"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h3>
            <p>提升使用角色的默认构造函数（参见<a href="s2.3.1.html" title="§2.3.1隐式角色创建" class="sect">§2.3.1</a> ）。如果遵循以下规则，则可以从客户端代码调用此构造函数。
               			
            </p>
            <div class="subsect depth4" id="s2.4.1.a">
               <h4 class="subsect">（a） <span class="title">团队背景</span><a class="img" href="s2.4.1.a.html" title="PermaLink到（a）团队环境"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>提升构造函数只能在要实例化的角色的封闭团队中使用。因此，合格的分配表达式（ <code>someTeam.new SomeRole(..)</code> ）可能永远不会使用提升构造函数。
                  				
               </p>
            </div>
            <div class="subsect depth4" id="s2.4.1.b">
               <h4 class="subsect">（b） <span class="title">新鲜基础物体</span><a class="img" href="s2.4.1.b.html" title="PermaLink to（b）Fresh base object"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>如果提升构造函数调用的参数是一个<code>new</code>表达式，创建一个新的基础对象，则使用提升构造函数是安全的。否则，以下（c）的规则适用。
                  				
               </p>
            </div>
            <div class="subsect depth4" id="s2.4.1.c">
               <h4 class="subsect">（c） <span class="title">重复角色运行时检查</span><a class="img" href="s2.4.1.c.html" title="PermaLink到（c）重复角色运行时检查"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>如果它不能在语法上派生，那么提升构造函数的参数是一个新创建的基础对象（b），编译时警告将指示需要进行额外的运行时检查：必须防止为a创建新角色基础对象，已在给定团队中具有所需类型的角色。使用提升构造器无法替换现有角色。在运行时，任何尝试这样做都会导致<code>org.objectteams.要抛出DuplicateRoleException</code> 。此异常只能在发出上述编译时警告的情况下发生。
                  		<br><a href="s6.1.html" title="§6.1反思" class="sect">§6.1</a>将引入反射函数，可用于手动防止重复角色等错误。
                  				
               </p>
            </div>
         </div>
         <table class="nav">
            <tr>
               <td class="back"></td>
               <td class="top"><a href="index.html" rel="contents">↑目录↑</a></td>
               <td class="next"><a href="s2.4.2.html" rel="next">§2.4.2通过常规构造函数创建角色&gt;&gt;</a></td>
            </tr>
         </table>
         <div class="breadcrumb"><a class="nav" href="s2.html" rel="section">§2角色绑定</a> &gt; <a class="nav" href="s2.4.html" rel="section">§2.4显式角色创建</a></div>
      </div>
      <div id="footer">
         <hr><a class="w3c img" href="http://jigsaw.w3.org/css-validator/check/referer" shape="rect"><img src="../images/valid-css2-blue.png" alt="有效的CSS！" height="31" width="88"></a><a class="w3c img" href="http://validator.w3.org/check?uri=referer" shape="rect"><img src="../images/valid-xhtml10-blue.png" alt="有效的XHTML 1.0严格" height="31" width="88"></a><address>©Stephan Herrmann，Christine Hundt，Marco Mosconi</address>OT / J版本1.3.1  - 最后修改时间：2013-05-28</div>
   </body>
</html>
<html >
<head>
<title>运行并行程序</title>
<link rel="stylesheet" type="text/css" href="help.css">
<script type="text/javascript" src="thumb.js"> </script>
</head>
<body >

<h1 id="top">运行并行程序</h1>
<p>本节介绍如何运行并行程序。在PTP中，这称为“运行工作”。
</p><p>以前版本的PTP需要在启动作业之前为每个作业调度程序/运行时环境设置<i>资源管理器</i> 。在PTP 6.0及更高版本中，不会单独处理，而是在“运行配置”页面上指定<i>目标系统配置</i> 。设置并行作业的进一步交互高度依赖于选择哪个TSC。
</p><p>如果<i>目标系统配置</i>支持编程模型，PTP能够启动使用各种编程模型（例如MPI，OpenMP，UPC等）的并行应用程序。也可以启动顺序程序的多个副本，以便它们同时执行。</p>

<p>Eclipse使用<i>运行配置</i> （也称为<i>启动配置</i> ）来封装正常启动作业或在调试器控制下启动作业所需的所有设置和参数。使用“ <b>运行”&gt;“运行配置...”</b>菜单创建<b>运行配置</b> 。

</p><p>本节仅介绍如何启动并行程序。<a href="05monitoring.html">监视作业和系统中</a>提供了有关如何监视应用程序启动的说明。<a href="06parDebugging.html">并行调试中</a>提供了有关如何调试应用程序的说明。</p>

<p>主题包括：</p>
<ol>
	<li><a href="#create">创建<b>并行应用程序</b>运行配置</a></li>
	<li><a href="#resources">完成“ <b>资源”选项卡</b></a> - 选择目标系统配置</li>
	<li><a href="#application">完成“ <b>应用程序”选项卡</b></a></li>
	<li><a href="#arguments">完成“ <b>参数”选项卡</b></a></li>
	<li><a href="#environment">完成“ <b>环境”选项卡</b></a></li>
	<li><a href="#synchronize">完成“ <b>同步”选项卡</b></a></li>
	<li><a href="#launch">运行应用程序</a></li>
</ol>
<h2 id="create">步骤1：创建并行应用程序运行配置</h2>

<ol>
	<li>
	<p>要设置运行配置，请使用<b>“运行”&gt;“运行配置”</b>打开“ <b>运行配置”</b>对话框<b>...</b> 
	</p><p><img src="images/03runMenu.png">
	<br>或单击工具栏上的运行图标的上下文菜单（图标旁边的小三角形），然后选择<b>“运行配置...”</b> 。
	</p><p><img src="images/03runMenu2.png">
	</p>
	
	<p><br>
	</p>
	</li>
	<li>
	<p>单击“ <b>并行应用程序”</b> ，然后单击“ <b>新建”</b>按钮图标，创建新的并行应用程序运行配置。</p>
	<p><br>
	</p>
	<p><img src="images/03launch1.png"></p>
	<p><br>
	</p>
	</li>
	<li>
	<p>在<b>名称：</b>字段中输入配置的<b>名称</b> 。这里我们使用与项目相同的名称。如果在项目浏览器中选择了项目，则可能已在此处填写。</p>
	<p><br>
	</p>
	<p><img src="images/03launch1a.png"></p>
	 </li>
</ol>

<h2 id="resources">第2步：完成“资源”选项卡</h2>
<p>“ <b>资源”选项卡</b>用于指定作业执行所需的资源。选择<b>目标系统配置后</b> ，此选项卡的内容将因不同的目标配置而异，您的安装可能已添加其他配置。
</p><h3 id="ptp-tscs">PTP支持目标系统配置</h3>
<p>PTP包括许多支持各种并行运行时系统和作业调度程序的不同系统的目标配置。下表列出了常见配置以及其他帮助文档的链接。
</p><p>请注意，在使用PTP之前，关联的运行时或作业调度程序需要在目标系统上可用：</p><blockquote>
<table border="1">
   <tr>
   <th scope="col">目标配置</th>
   <th scope="col">描述</th>
   </tr>
   <tr id="gridengine">
    <td><a href="rms/gridengine.html">Grid Engine-Generic-Batch</a></td>
    <td>使用Grid Engine批量执行</td>
  </tr>
  <tr id="ibm-ll">
    <td><a href="rms/ibm-ll.html">IBM LoadLeveler</a></td>
	<td>通用IBM LoadLeveler批处理系统</td>
  </tr>
  <tr id="ibm-ll-bg">
    <td><a href="rms/ibm-ll.html">IBM LoadLeveler（蓝色基因）</a></td>
	<td>Blue Gene系统上的IBM LoadLeveler</td>
  </tr>
  <tr id="ibm-pe">
    <td><a href="rms/ibm-pe.html">IBM并行环境</a></td>
    <td>使用IBM Parallel Environment进行交互式执行</td>
  </tr>
    <tr id="ibm-lsf">
    <td><a href="PLUGINS_ROOT/org.eclipse.ptp.rm.ibm.platform.lsf.doc.user/html/lsf.html">IBM Platform LSF</a></td>
 <td>在IBM Platform LSF系统上批量执行</td>
  </tr>
  <tr id="ibm-platform-mpi">
    <td><a href="rms/ibm-pmpi.html">IBM Platform MPI</a></td>
    <td>IBM Platform MPI</td>
  </tr>
      <tr id="mpich2">
    <td>MPICH2  - 通用 - 互动</td>
    <td>在MPICH2系统上交互执行</td>
  </tr>
  <tr id="openMPI">
    <td><a href="rms/openMPI.html">打开MPI-Generic-Interactive</a></td>
    <td>Open MPI系统上的交互式执行</td>
  </tr>
  <tr id="pbs-int">
    <td><a href="rms/pbs.html">PBS-通用交互式</a></td>
    <td>使用PBS批处理系统执行交互式作业</td>
  </tr>
  <tr id="pbs-bgp-batch">
    <td><a href="rms/pbs.html">PBS-BGP-批</a></td>
    <td>Blue Gene / P系统使用</td>
  </tr>
  <tr id="pbs-bgq-batch">
    <td><a href="rms/pbs.html">PBS-BGQ-批</a></td>
    <td>使用PBS的蓝色基因/ Q系统</td>
  </tr>

  <tr id="slurm">
    <td><a href="rms/slurm.html">SLURM  - 通用 - 批</a></td>
    <td>通用SLURM批处理系统</td>
  </tr>
  <tr id="slurm-alps">
    <td><a href="rms/slurmalps.html">SLURM  - 阿尔卑斯 - 通用 - 批</a></td>
    <td>SLURM和ALPS组合作为批处理系统</td>
  </tr>
  <tr id="slurm-bgp">
    <td><a href="rms/slurm.html">SLURM-BGP-批</a></td>
    <td>使用SLURM的Blue Gene / P系统</td>
  </tr>
  <tr id="slurm-bgq-batch">
    <td><a href="rms/slurm.html">SLURM-BGQ-批</a></td>
    <td>使用SLURM的Blue Gene / Q系统</td>
  </tr>
  <tr id="pbs-batch">
    <td><a href="rms/pbs.html">PBS-仿制批</a></td>
    <td>通用PBS批处理系统</td>
  </tr>
    <tr id="remote-generic-interactive">
    <td><a href="rms/remote-generic-interactive.html">远程通用交互式</a></td>
    <td>远程系统上的简单（非并行）交互式执行</td>
  </tr>
  
  <tr id="torque-batch">
    <td><a href="rms/torque.html">扭矩仿制批</a></td>
    <td>通用TORQUE批处理系统</td>
  </tr>
  <tr id="torque-int">
    <td><a href="rms/torque.html">扭矩通用交互式</a></td>
    <td>使用Torque批处理系统执行交互式作业</td>
  </tr>
  <tr id="juelich-judge">
    <td><a href="rms/de.fz-juelich.judge.html">de.fz-juelich.judge.torque.batch</a></td>
    <td>在JSC系统JUDGE上运行批处理作业</td>
  </tr>
  <tr id="juelich-juropa">
    <td><a href="rms/de.fz-juelich.juropa.html">de.fz-juelich.juropa.torque.batch</a></td>
    <td>在JSC系统JUROPA上运行批处理作业</td>
  </tr>
  <tr id="juelich-juqueen">
    <td><a href="rms/de.fz-juelich.juqueen.html">de.fz-juelich.juqueen.ll_bg</a></td>
    <td>在JSC系统JUQUEEN上运行批处理作业</td>
  </tr>
</table>
</blockquote>

<ol>
	<li>
	<p>从下拉列表中选择要使用的<b>目标系统配置</b> 。

	</p>
	<p> 
	</p><p><img src="images/03resources_configs.png">
	</p>
	<p> 
 
	</p><p>请注意，如果在选择框中键入单个字符（或几个），则目标系统配置列表将仅限于以该字符开头的那些。
	</p><p><img src="images/03resources_configs_cull.png">
	
	</p></li>
	<li>
	<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
	<p>选择要用于目标系统的连接。如果先前已配置同步或远程项目，则应该可以使用连接，并且可能已经选择了该连接。
	<br>（要在本地计算机上启动，请为连接类型选择“ <b>本地</b> ”。）
	<br>您可以通过单击“ <b>新建...”</b>按钮在此处创建新连接。
	 </p>
	<p>
	</p><p> </p>
	</li><li>
	<p>选择连接后，如果连接尚未打开，系统可能会提示您打开连接。然后，“ <b>资源”</b>选项卡的内容将填充控件，以便您可以为目标系统配置必要的启动信息。此区域通常（取决于目标系统配置）包括更多选项卡，以分割您可以提供的其他信息。填写目标系统配置所需的信息。
	<br>
	</p>
	</li>


	<!-- unused image<img src="images/03launchResTab.png"> -->

</ol>

<h2 id="application">第3步：完成“ <b>应用程序”</b>选项卡</h2>
<p>“ <b>应用程序”选项卡</b>用于指定要启动的应用程序（可执行文件）。</p>
<ol>
	<li>
	<p>确保选择了正确的<b>并行项目</b> 。这是包含应用程序的源和二进制文件的项目。</p>
	<p><br>
	</p>
	</li>

	<li>
	<p>选择要启动的<b>应用程序</b> （可执行文件）。如果目标系统连接指向远程目标，则表示远程目标<i>上的可执行文件</i>的<i>路径</i> 。否则，对于指向本地计算机的连接，它应该是项目目录中可执行文件的路径。
	</p><p><b>Browse ...</b>按钮可用于选择可执行文件。
	</p>
	<p><br>
	</p>
	</li>
    
	<li>
	<p>如果在远程计算机上运行应用程序并且项目是在本地<i>构建的</i> ，则必须首先将可执行文件复制到远程计算机。为此，您可以启用<b>从本地文件系统复制可执行文件，</b>并使用项目目录中可执行<b>文件</b>的路径填充<b>本地文件</b>的路径。这会将启动程序配置为在启动运行/调试会话之前将可执行文件自动复制到远程目标。如果未启用，则需要手动将可执行文件复制到远程目标。</p>
 
	<p><br>
	</p>
	</li>
	 
	<p><img src="images/03launch6.png"></p>
	<p><br>
	</p>

	<li>
	<p>如果希望在单个输出控制台中获得所有进程的输出，请确保选中“ <b>控制台视图中所有进程</b>的<b>显示输出”</b>选项。</p>
	<p><br>
	</p>
	</li>
	  
</ol>

<h2 id="arguments">第4步：完成“参数”选项卡</h2>
<p><b>Arguments选项卡</b>用于指定并行应用程序所需的任何命令行参数并修改工作目录。</p>
<ol>
	<li>
	<p>在“ <b>程序参数”</b>字段中输入应用程序所需的任何参数。这是一个自由格式的文本字段，将逐字传递给应用程序。</p>
	<p><br>
	</p>
	</li>
	<li>
	<p>如果需要，请选择其他工作目录。工作目录在应用程序启动之前设置。请注意，对于远程启动，这将是远程计算机上的目录。</p>
	</li>
	<p><img src="images/03launch3.png"></p>
	<p><br>
	</p>
</ol>

<h2 id="environment">第5步：完成“环境”选项卡</h2>
<p>“ <b>环境”选项卡</b>用于指定并行应用程序所需的任何环境变量，或者用于运行应用程序。该选项卡还提供了将环境变量附加到本机环境的选项，或者使用选项卡中指定的变量替换本机环境。</p>
<ol>
	<li>
	<p>使用“ <b>新建...”</b>按钮创建新的环境变量。</p>
	<p><br>
	</p>
	</li>
	<li>
	<p>使用<b>选择...</b>按钮导入环境变量。</p>
	<p><br>
	</p>
	</li>
	<li>
	<p>使用<b>编辑...</b>按钮编辑环境变量。</p>
	<p><br>
	</p>
	</li>
	<li>
	<p>使用“ <b>删除...”</b>按钮删除环境变量。</p>
	<p><br>
	</p>
	</li>
	<p><img src="images/03launch4.png"></p>
	<p><br>
	</p>
</ol>

<h2 id="synchronize">第6步：完成“ <b>同步”</b>选项卡</h2>
<p>“ <b>同步”选项卡</b>用于连接引用远程目标的方案。该选项卡指定描述在开始并行应用程序执行之前需要复制（上<i>载</i> ）到远程目标的文件或目录的规则。通常，此功能用于上载依赖项（如动态库）或输入测试用例数据。</p>
<p>请注意，对于<a href="sync.html">同步项目</a> ，这可能不是必需的，其中文件独立于启动机制来回复制到远程系统。

</p><p>此选项卡还允许指定描述远程主机上的文件的规则，以便在并行应用程序完成执行后将其检索回（ <i>下载</i> ）到本地主机，作为并行应用程序执行生成的输出数据。</p>

<ol>
	<li>
	<p>如果要启用到远程目标的文件传输，请启用“启用上<b>载规则”</b>或“根据需要的文件传输方向<b>启用</b> <b>下载规则”</b> 。</p>
	<p><br>
	</p>
	<p><img src="images/03launch7.png"></p>
	<p><br>
	</p>
	</li>

	<li>
	<p>要指定要从本地系统复制到远程目标（已上<i>载</i> ）的文件，请单击“ <b>新建上载规则”</b> 。上载规则列出了应复制到单个目录中的文件或目录集合。</p>
	<p><br>
	</p>
	<p>如果启用了<b>使用启动配置中的目录</b> ，则会将列出的文件或目录复制到启动配置中指定的工作目录。目前，这相当于包含并行应用程序可执行文件的同一目录。如果未启用，则必须在<b>远程目录中</b>指定将放置文件或目录的路径。路径可以是绝对路径或相对路径（到工作目录）。</p>
	<p><br>
	</p>
	<p>在下面的列表中， <b>选择文件</b> ，添加要复制的文件或目录。单击<b>文件</b>以从本地文件系统中的任何位置选择一个或多个单个文件。“ <b>目录”</b>按钮的工作方式类似于从本地文件系统中选择目录。目录以递归方式复制。“ <b>工作区”</b>按钮允许从当前工作区轻松选择文件。</p>
	<p><br>
	</p>
	<p>在对话框的底部，您可能希望设置要应用于远程目标上的复制文件的属性。<b>Readonly</b>或<b>Executable</b>选项将所有复制的文件设置为只读或远程主机上的可执行文件。如果启用了“ <b>保留时间”属性</b> ，则远程副本将采用与本地文件相同的时间戳，否则，时间戳将是文件复制的时间。此外，如果远程目标上已存在该文件，您可以选择如何在<b>If file exists</b>下拉列表中做出反应。</p>
	<p><br>
	</p>
	<p><img src="images/03launch8.png"></p>
	<p><br>
	</p>
	<p><br>
	</p>
	</li>
	<li>
	<p>要在并行应用程序完成后指定要从远程目标复制到本地系统（已<i>下载</i> ）的文件，请单击“ <b>新建下载规则”</b> 。</p>
	<p><br>
	</p>
	<p>下载规则列出了应复制到单个本地目录中的文件或目录集合。它的选项与上传规则非常相似。</p>
	<p><br>
	</p>
	<p><img src="images/03launch9.png"></p>
	<p><br>
	</p>
	</li>
</ol>

<h2 id="launch">第7步：启动应用程序</h2>
<p>启动配置现已完成。选择“ <b>运行”</b>按钮（在“ <b>运行配置”</b>对话框的右下角以启动作业。切换到“ <b>系统监视”</b>透视图以查看作业的状态并检查程序输出。
</p><p><a href="#top">回到顶部</a> | <a href="toc.html">返回目录</a>
</p></body>
</html>





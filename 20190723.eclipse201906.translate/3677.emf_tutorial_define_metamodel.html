<html dir="ltr">
<head>
<title>定义EMF元模型</title>
<link href="book.css" rel="stylesheet" type="text/css"></link>
<meta name="generator" content="DocBook XSL Stylesheets V1.75.1"></meta>
<link rel="home" href="index.html" title="Xpand Documentation"></link>
<link rel="up" href="emf_tutorial.html" title="Getting Started"></link>
<link rel="prev" href="emf_tutorial_overview.html" title="Tutorial overview"></link>
<link rel="next" href="emf_tutorial_generate_emf_tooling.html" title="Generating the EMF tooling"></link>
</head>
<body bgcolor="white" dir="ltr" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">定义EMF元模型</h1>
<div class="section" title="定义EMF元模型">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear:both">
<a name="emf_tutorial_define_metamodel"></a>定义EMF元模型</h2>
</div>
</div>
</div>
<p>为了说明元模型，在我们处理EMF的复杂性之前，这里是UML中的元模型：</p>
<div class="figure">
<a name="emf_tutorial_sample_metamodel"></a>
<p class="title">
<b>图1。示例元模型</b>
</p>
<div class="figure-contents">
<div class="mediaobject">
<img src="images/emf_tutorial/metamodel.gif" alt="示例元模型">
</div>
</div>
</div>
<p>
<br class="figure-break">
</p>
<div class="section" title="创建EMF项目">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="emf_tutorial_creating_emf_project"></a>创建EMF项目</h3>
</div>
</div>
</div>
<p>创建一个EMF项目，如下所示：</p>
<div class="figure">
<a name="emf_tutorial_create_emf_project"></a>
<p class="title">
<b>图2。创建EMF项目</b>
</p>
<div class="figure-contents">
<div class="mediaobject">
<img src="images/emf_tutorial/create_emf_project.png" alt="创建EMF项目">
</div>
</div>
</div>
<br class="figure-break">
<p>创建EMF项目非常重要，而不仅仅是简单项目或Java项目。将其命名为<code class="filename">xpand.demo.emf.datamodel</code> 。</p>
</div>
<div class="section" title="定义（meta）模型">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="emf_tutorial_defining_metamodel"></a>定义（meta）模型</h3>
</div>
</div>
</div>
<p>在该项目中创建一个新的源文件夹<code class="filename">metamodel</code> 。然后，在名为<code class="filename">data.ecore</code>源文件夹中创建一个新的Ecore模型。使用<span class="type">EPackage</span>作为模型对象。</p>
<div class="figure">
<a name="emf_tutorial_create_ecore_model"></a>
<p class="title">
<b>图3。创建新的Ecore模型</b>
</p>
<div class="figure-contents">
<div class="mediaobject">
<img src="images/emf_tutorial/create_ecore_model.png" alt="创建新的Ecore模型">
</div>
</div>
</div>
<p>
<br class="figure-break">这将打开Ecore编辑器。您将看到名为<code class="varname">null</code>的根包。打开“属性视图”（上下文菜单）。为包设置以下属性：</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>名称：数据</p>
</li>
<li class="listitem">
<p>Ns前缀：数据</p>
</li>
<li class="listitem">
<p>Ns URI：http：//www.xpand.org/xpand.demo.emf.datamodel</p>
</li>
</ul>
</div>
<p> </p>
<div class="figure">
<a name="emf_tutorial_adjust_namespace_settings"></a>
<p class="title">
<b>图4。调整命名空间设置</b>
</p>
<div class="figure-contents">
<div class="mediaobject">
<img src="images/emf_tutorial/create_ecore_model_adjust_namespace.png" alt="调整命名空间设置">
</div>
</div>
</div>
<p>
<br class="figure-break">
</p>
<p>创建以下Ecore模型。 <sup>[ <a href="#ftn.N100A4" name="N100A4" class="footnote">1</a> ]</sup>确保<span class="emphasis"><em>完全</em></span>按照下面的描述设置以下属性：</p>
<p>在<span class="package">数据</span>包中，使用它们的属性创建这些<code class="classname">EClass</code>元素： <sup>[ <a href="#ftn.N100B6" name="N100B6" class="footnote">2</a> ]</sup>
</p>
<div class="informaltable">
<a name="emf_tutorial_metamodel_attributes"></a>
<table cellspacing="0" cellpadding="10" style="border-collapse:collapse;border-bottom:0.5pt solid">
<colgroup>
<col align="left">
<col align="left">
<col align="left">
</colgroup>
<thead>
<tr>
<th align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">EClass名称</th>
<th align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">EAttribute名称</th>
<th align="left" style="border-bottom:2 solid #000000">EAttribute EType</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">的DataModel</td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-bottom:2 solid #000000"> </td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">名称</td>
<td align="left" style="border-bottom:2 solid #000000">为EString</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">实体</td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-bottom:2 solid #000000"> </td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">名称</td>
<td align="left" style="border-bottom:2 solid #000000">为EString</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">属性</td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-bottom:2 solid #000000"> </td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">名称</td>
<td align="left" style="border-bottom:2 solid #000000">为EString</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">类型</td>
<td align="left" style="border-bottom:2 solid #000000">为EString</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">的EntityReference</td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-bottom:2 solid #000000"> </td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">名称</td>
<td align="left" style="border-bottom:2 solid #000000">为EString</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000">太多</td>
<td align="left">EBoolean</td>
</tr>
</tbody>
</table>
</div>
<p>现在，是时候在模型元素之间创建引用了。添加<code class="classname">EReferences</code>类型的子<code class="classname">EReferences</code>如下： <sup>[ <a href="#ftn.N1010E" name="N1010E" class="footnote">3</a> ]</sup>
</p>
<div class="informaltable">
<a name="emf_tutorial_metamodel_references"></a>
<table cellspacing="0" cellpadding="10" width="100%" style="border-collapse:collapse;border-bottom:0.5pt solid">
<colgroup>
<col align="left">
<col align="left">
<col align="left">
<col align="left">
</colgroup>
<thead>
<tr>
<th align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">的EClass</th>
<th align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">EReference名称</th>
<th align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">EReference属性名称</th>
<th align="left" style="border-bottom:2 solid #000000">EReference属性值</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">的DataModel</td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-bottom:2 solid #000000"> </td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">实体</td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-bottom:2 solid #000000"> </td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">ETYPE</td>
<td align="left" style="border-bottom:2 solid #000000">实体</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">遏制</td>
<td align="left" style="border-bottom:2 solid #000000">真正</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">下界</td>
<td align="left" style="border-bottom:2 solid #000000">0</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">UPPERBOUND</td>
<td align="left" style="border-bottom:2 solid #000000">-1</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">实体</td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-bottom:2 solid #000000"> </td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">属性</td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-bottom:2 solid #000000"> </td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">ETYPE</td>
<td align="left" style="border-bottom:2 solid #000000">属性</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">遏制</td>
<td align="left" style="border-bottom:2 solid #000000">真正</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">下界</td>
<td align="left" style="border-bottom:2 solid #000000">1</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">UPPERBOUND</td>
<td align="left" style="border-bottom:2 solid #000000">-1</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">实体</td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-bottom:2 solid #000000"> </td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">参考</td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-bottom:2 solid #000000"> </td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">ETYPE</td>
<td align="left" style="border-bottom:2 solid #000000">的EntityReference</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">遏制</td>
<td align="left" style="border-bottom:2 solid #000000">真正</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">下界</td>
<td align="left" style="border-bottom:2 solid #000000">0</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">UPPERBOUND</td>
<td align="left" style="border-bottom:2 solid #000000">-1</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">的EntityReference</td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-bottom:2 solid #000000"> </td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">目标</td>
<td class="auto-generated" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td class="auto-generated" style="border-bottom:2 solid #000000"> </td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">ETYPE</td>
<td align="left" style="border-bottom:2 solid #000000">实体</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">遏制</td>
<td align="left" style="border-bottom:2 solid #000000">假</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000;border-bottom:2 solid #000000">下界</td>
<td align="left" style="border-bottom:2 solid #000000">1</td>
</tr>
<tr>
<td align="left" style="border-right:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000"> </td>
<td align="left" style="border-right:2 solid #000000">UPPERBOUND</td>
<td align="left">1</td>
</tr>
</tbody>
</table>
</div>
<div class="figure">
<a name="emf_tutorial_metamodel_structure"></a>
<p class="title">
<b>图5。元模型结构</b>
</p>
<div class="figure-contents">
<div class="mediaobject">
<img src="images/emf_tutorial/create_ecore_model_mm_structure.png" alt="元模型结构">
</div>
</div>
</div>
<p>
<br class="figure-break">
</p>
<p>EMF将我们在上面创建的模型保存在自己的XMI方言中<a name="N101D9" class="indexterm"></a> 。为避免任何歧义，这里是元模型的完整XMI源。它进入文件<code class="filename">data.ecore</code> ：</p>
<pre class="programlisting">&lt;？xml version =“1.0”encoding =“UTF-8”？&gt; &lt;ecore：EPackage xmi：version =“2.0”xmlns：xmi =“http://www.omg.org/XMI”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance” xmlns：ecore =“http://www.eclipse.org/emf/2002/Ecore”name =“data”nsURI =“http://www.xpand.org/xpand.demo.emf.datamodel”nsPrefix =“ data“&gt; &lt;eClassifiers xsi：type =”ecore：EClass“name =”DataModel“&gt; &lt;eStructuralFeatures xsi：type =”ecore：EAttribute“name =”name“eType =”ecore：EDataType http：//www.eclipse。 org / emf / 2002 / Ecore＃// EString“/&gt; &lt;eStructuralFeatures xsi：type =”ecore：EReference“name =”entity“upperBound =” -  1“eType =”＃// Entity“containment =”true“/ &gt; &lt;/ eClassifiers&gt; &lt;eClassifiers xsi：type =“ecore：EClass”name =“Entity”&gt; &lt;eStructuralFeatures xsi：type =“ecore：EAttribute”name =“name”eType =“ecore：EDataType http：// www。 eclipse.org/emf/2002/Ecore#// EString“/&gt; &lt;eStructuralFeatures xsi：type =”ecore：EReference“name =”attribute“lowerBound =”1“upperBound =” -  1“eType =”＃// Attribute “containment =”true“/&gt; &lt;eStructuralFeatures xsi：type =”ecore：EReference“name =”reference“upperBound =” -  1“eType = “＃// EntityReference”containment =“true”/&gt; &lt;/ eClassifiers&gt; &lt;eClassifiers xsi：type =“ecore：EClass”name =“Attribute”&gt; &lt;eStructuralFeatures xsi：type =“ecore：EAttribute”name =“name” eType =“ecore：EDataType http://www.eclipse.org/emf/2002/Ecore#//EString”/&gt; &lt;eStructuralFeatures xsi：type =“ecore：EAttribute”name =“type”eType =“ecore：EDataType http://www.eclipse.org/emf/2002/Ecore#//EString“/&gt; &lt;/ eClassifiers&gt; &lt;eClassifiers xsi：type =”ecore：EClass“name =”EntityReference“&gt; &lt;eStructuralFeatures xsi：type =” ecore：EAttribute“name =”name“eType =”ecore：EDataType http://www.eclipse.org/emf/2002/Ecore#//EString“/&gt; &lt;eStructuralFeatures xsi：type =”ecore：EAttribute“name = “toMany”eType =“ecore：EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean”/&gt; &lt;eStructuralFeatures xsi：type =“ecore：EReference”name =“target”lowerBound =“ 1“eType =”＃//实体“/&gt; &lt;/ eClassifiers&gt; &lt;/ ecore：EPackage&gt;</pre>
</div>
<div class="footnotes">
<br>
<hr align="left" width="100">
<div class="footnote">
<p>
<sup>[ <a href="#N100A4" name="ftn.N100A4" class="para">1</a> ]</sup>要添加子项，请右键单击要添加这些子项的元素，然后从列表中选择子项的类型。要配置属性，请通过选择任何上下文菜单底部的“ <span class="guimenu">显示属性视图”</span>打开属性对话框。请注意，这不是EMF教程。有关如何构建EMF（元）模型的更多详细信息，请参阅EMF文档。</p>
</div>
<div class="footnote">
<p>
<sup>[ <a href="#N100B6" name="ftn.N100B6" class="para">2</a> ]</sup>属性是<code class="classname">EAttribute</code>类型的子类。请填写<span class="property">名称</span>和<span class="property">EType</span>属性。</p>
</div>
<div class="footnote">
<p>
<sup>[ <a href="#N1010E" name="ftn.N1010E" class="para">3</a> ]</sup>注意：有几个<span class="emphasis"><em>-1的</em></span> ...不要错过减号！此外，收容标志是必不可少的。如果包含为<code class="literal">true</code>您将能够创建引用类型的子项，否则您只能引用它们。</p>
</div>
</div>
</div>
</body>
</html>
<?xml version="1.0" encoding="utf-8" ?="">
<html  xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>常问问题</title>
		<style type="text/css">
			.info {border: 1px solid #3c78b5;background-color: #D8E4F1;margin: 20px;padding: 0px 6px 0px 6px;}
			.note {border: 1px solid #F0C000;background-color: #FFFFCE;margin: 20px;padding: 0px 6px 0px 6px;}
			.panel {border: 1px solid #ccc;background-color: #FFFFCE;margin: 10px;padding: 0px 6px 0px 6px;}
			.tip {border: 1px solid #090;background-color: #dfd;margin: 20px;padding: 0px 6px 0px 6px;}
			.warning {border: 1px solid #c00;background-color: #fcc;margin: 20px;padding: 0px 6px 0px 6px;}
</style>
		<link type="text/css" rel="stylesheet" href="/help/topic/org.eclipse.emf.compare.doc/help/resources/bootstrap.css">
		<link type="text/css" rel="stylesheet" href="/help/topic/org.eclipse.emf.compare.doc/help/resources/custom.css">
	</head>
	<body >
		<h1 id="FAQs">常见问题解答</h1>
		<p>这些常见问题解答将针对EMF Compare 2及其后续版本。由于此版本与之前的1. *流有很大不同，因此在大多数情况下，与版本1相关的答案不适用。</p>
		<h3 id="Users_FAQ">用户FAQ</h3>
		<h4 id="Which_files_should_be_compared_via_EMF_Compare_.3F">应通过EMF比较哪些文件进行比较？</h4>
		<p>
			<b>问</b> ：我的模型被比作文本文件，EMF如何比较它应该处理的文件？
		</p>
		<p>
			<b>答</b> ：对于被识别为EMF模型的任何文件，将触发EMF比较。从技术上讲，它将是使用内容类型XMI（org.eclipse.emf.ecore.xmi）或“EMF Compare”（org.eclipse.emf.compare.content.type）识别的文件。
		</p>
		<p>如果将模型与文本比较编辑器进行比较，并且您希望使用EMF Compare，则应使用“首选项”视图/“常规”/“内容”类型添加自己的扩展，并在“EMF比较”内容类型中添加文件扩展名。</p>
		<p>
			<img border="0" src="images/EMF_Compare_Preferences_Content_Type.png">
		</p>
		<h4 id="How_to_force_text_comparison.3F">如何强制文字比较？</h4>
		<p>
			<b>问</b> ：我希望我的模型可以作为文本进行比较，但我无法删除它与XMI内容类型或EMF比较内容类型的关联，因为它们已被锁定（例如Ecore，UML等...）</p>
		<p>
			<b>答</b> ：每个用XMI内容类型锁定的文件（即其内容类型为“org.eclipse.emf.ecore.xmi”或其子类型之一）或EMF比较内容类型都不能强制使用文本比较编辑器。这是Eclipse Compare平台的限制。但是，您可以从EMF比较编辑器中查看文本比较。取消激活“空资源映射”过滤器，然后选择适当的资源映射。底部窗格将显示映射资源的文本内容的比较。
		</p>
		<p>
			<img border="0" src="images/EMF_Compare_Text_Comparison.png">
		</p>
		<h4 id="EMF_Compare_compatibility_.3F">EMF比较兼容性？</h4>
		<p>
			<b>问</b> ：哪些Java / Eclipse版本可以运行EMF Compare？
		</p>
		<p>
			<b>答</b> ：EMF Compare是针对JDK 1.5构建的，它利用了它引入的功能，如foreach和泛型。因此它与JDK &lt;1.5不兼容。EMF Compare也可以与JDK 1.6和JDK 1.7一起使用。
		</p>
		<p>我们努力使<a href="./user/user-guide.html#Compatibility" title="./user/user-guide.html#Compatibility">兼容性图表</a>保持更新，以便您可以确定哪个版本的EMF Compare可以与您选择的Eclipse一起使用。
		</p>
		<h4 id="Where_can_I_find_EMF_Compare_.3F">我在哪里可以找到EMF比较？</h4>
		<p>
			<b>问</b> ：我在哪里可以下载最新版本的EMF比较？
		</p>
		<p>
			<b>答</b> ： <a href="./user/user-guide.html#Installing_EMF_Compare" title="./user/user-guide.html#Installing_EMF_Compare">安装说明</a>提供了一组可用于安装的更新站点。如果您希望尝试其中一个最新的集成版本，“ <a href="http://www.eclipse.org/emf/compare/downloads/">下载”页面会</a>列出更具体的更新站点。
		</p>
		<h2 id="Developers_FAQ">开发人员FAQ</h2>
		<h3 id="How_can_I_programmatically_add_my_model_file_extension_in_EMF_Compare_so_that_it_is_called_automatically_.3F">如何以编程方式在EMF Compare中添加模型文件扩展名以便自动调用？</h3>
		<p>
			<b>问</b> ：我如何以编程方式将我的模型文件扩展名添加到EMF Compare中，以便自动调用它？
		</p>
		<p>
			<b>答</b> ：您可以使用exore XMI内容类型，这是plugin.xml中的示例：</p>
		<pre class="source-xml">&lt;extension
    point="org.eclipse.core.contenttype.contentTypes"&gt;
  &lt;file-association
      content-type="org.eclipse.emf.ecore.xmi"
      file-extensions="uml"
      file-names="*"/&gt;
&lt;/extension&gt;

</pre>
		<h3 id="How_can_I_use_EMF_Compare_programmatically_.3F">如何以编程方式使用EMF Compare？</h3>
		<p>
			<b>问</b> ：如何以编程方式使用EMF Compare来比较文件或“内存中”对象？
		</p>
		<p>
			<b>答</b> ：在<a href="http://git.eclipse.org/c/emfcompare/org.eclipse.emf.compare.git/tree/plugins/org.eclipse.emf.compare.tests">EMF比较的单元测试中</a>可以找到许多如何比较对象的样本（另请参阅<a href="EMF_Compare/Contributor_Guide#Checking_out_the_code" title="EMF_Compare / Contributor_Guide＃Checking_out_the_code">如何检查源代码</a> ）。这是一个应该涵盖基本用例的示例（具有此方法的类应该依赖于<i>org.eclipse.emf.compare</i>插件）：</p>
		<pre class="source-java">public void compare(File model1, File model2) {
	URI uri1 = URI.createFileURI("path/to/first/model.xmi");
	URI uri2 = URI.createFileURI("path/to/second/model.xmi");

	Resource.Factory.Registry.INSTANCE.getExtensionToFactoryMap().put("xmi", new XMIResourceFactoryImpl());

	ResourceSet resourceSet1 = new ResourceSetImpl();
	ResourceSet resourceSet2 = new ResourceSetImpl();

	resourceSet1.getResource(uri1, true);
	resourceSet2.getResource(uri2, true);

	IComparisonScope scope = new DefaultComparisonScope(resourceSet1, resourceSet2);
	Comparison comparison = EMFCompare.builder().build().compare(scope);

	List&lt;Diff&gt; differences = comparison.getDifferences();
	// Let's merge every single diff
	IMerger.Registry mergerRegistry = new IMerger.RegistryImpl();
	IBatchMerger merger = new BatchMerger(mergerRegistry);
	merger.copyAllLeftToRight(differences, new BasicMonitor());
}

</pre>
		<h3 id="Can_EMF_Compare_be_used_standalone_.3F">EMF Compare可以独立使用吗？</h3>
		<p>
			<b>问</b> ：EMF Compare能否比较“内存中”对象，是否可以在没有Eclipse的情况下运行？
		</p>
		<p>
			<b>答</b> ：是的，EMF Compare的核心主要是为独立开发的，与Eclipse的集成是建立在它之上的。位于<i>org.eclipse.emf.compare</i>插件中的所有类和实用程序都是纯Java，不依赖于Eclipse，因此可以安全地在Eclipse外部运行的Java应用程序中使用。
		</p>
		<p>以下是EMF Compare所需的最小依赖关系集。</p>
		<pre>* org.eclipse.emf.common 2.5 or higher
* org.eclipse.emf.ecore 2.5 or higher
* org.eclipse.emf.ecore.xmi 2.5 or higher
* org.eclipse.emf.compare 2.0 or higher
* com.google.guava 11.0 (EMF Compare should also be compatible with Guava 12, 13 and 14 as far as we tested our integration)
</pre>
		<h3 id="Custom_data_types_are_always_marked_as_modified_by_EMF_Compare">自定义数据类型始终标记为EMF比较修改</h3>
		<p>
			<b>问</b> ：基于自定义元模型的模型始终将自定义数据类型的元素显示为已更改。如何让EMF Compare正常运行？
		</p>
		<p>
			<b>答</b> ：EMF Compare的差分过程基于平等帮助者。对于数据类型，这取决于这些数据类型的<i>equals（Object）</i>方法的返回值。因此，如果在自定义数据类型的实例类中未覆盖<i>equals（Object）</i>方法，则无法确定两个对象是否匹配。记得在重写<i>equals（Object）</i>时也覆盖<i>hashCode（</i> <i>）</i> 。一个典型的例子是<a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=226152">错误226152</a> 。
		</p>
		<p>解决此问题的另一种方法是将自己的等式助手提供给EMF Compare，以便它知道如何比较这些类型的数据类型。这可以通过EMFCompare构建器完成：</p>
		<pre class="source-java">IEqualityHelperFactory helperFactory = new DefaultEqualityHelperFactory() {
	@Override
	public org.eclipse.emf.compare.utils.IEqualityHelper createEqualityHelper() {
		final Cache&lt;EObject, URI&gt; cache = EqualityHelper.createDefaultCache(getCacheBuilder());
		return new EqualityHelper(cache) {
			@Override
			public boolean matchingValues(Object object1, Object object2) {
				if (object1 instanceof MyDataType &amp;&amp; object2 instanceof MyDataType) {
					// custom code
				}
				return super.matchingValues(object1, object2);
			}
		};
	}
};
IComparisonFactory comparisonFactory = new DefaultComparisonFactory(helperFactory);
Comparison comparison = EMFCompare.builder().setMatchEngine(new DefaultMatchEngine(DefaultMatchEngine
		.createDefaultEObjectMatcher(UseIdentifiers.WHEN_AVAILABLE), comparisonFactory)).build().compare(scope);

</pre>
		<h3 id="Can_I_programmatically_open_a_comparison_editor_or_dialog_.3F">我可以以编程方式打开比较编辑器或对话框吗？</h3>
		<p>
			<b>问</b> ：我需要在我自己的插件中以编程方式调用EMF Compare，但我希望能够向用户显示比较编辑器。有办法吗？
		</p>
		<p>
			<b>答</b> ：由于EMF比较2.1.0M4，有。由于这个问题的答案有点复杂，所以它应该<a href="./developer/how-to-open-compare-dialog.html" title="./developer/how-to-open-compare-dialog.html">有自己的页面</a> 。
		</p>
		<h3 id="Can_I_use_custom_identifiers_for_my_objects_.3F">我可以为我的对象使用自定义标识符吗？</h3>
		<p>
			<b>问</b> ：我有自己的自定义元素，我想告诉EMF比较用什么来唯一识别它们。例如，他们的名字。
		</p>
		<p>
			<b>答</b> ：EMF Compare在内部使用函数来计算EObject的标识符。您可以使用自己的函数覆盖此函数，或者使用它自己构建，以便EMF Compare将您的函数用于元素，并回退到需要匹配的任何其他元素的默认行为。
		</p>
		<p>“ <a href="./developer/developer-guide.html#Defining_custom_identifiers" title="./developer/developer-guide.html#定义自定义标识符">开发者指南”中</a>概述了如何执行此操作。
		</p>
		<h3 id="Can_I_ignore_differences_on_a_specific_reference.2C_or_ignore_ordering_differences_.3F">我可以忽略特定参考的差异，或忽略排序差异吗？</h3>
		<p>
			<b>问</b> ：我想忽略给定结构特征的所有差异，我可以告诉EMF比较不要看这些特征吗？
			<br>

			<b>问</b> ：EMF Compare在我的模型上检测到许多<i>排序</i>差异，但我不关心它们。有没有办法忽略所有订单更改？
		</p>
		<p>
			<b>答</b> ：您可以覆盖<i>FeatureFilter</i>告诉EMF Compare应忽略某些引用，在<a href="./developer/developer-guide.html#Changing_the_FeatureFilter" title="./developer/developer-guide.html#Changing FeatureFilter">开发人员指南中</a>有一个示例。
		</p>
	</body>
</html>
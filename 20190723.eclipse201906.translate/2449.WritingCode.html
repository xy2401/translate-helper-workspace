<html >
  <head>
    <meta http-equiv="Content-Type" content="text/html" charset="iso-8859-1">
    <title>编写代码</title>
    <link rel="stylesheet" type="text/css" href="../help.css">
  </head>
<body >
<div><h1>配置源表单和文件名扩展名</h1><p>Photran支持固定格式和自由格式的Fortran代码。Photran还支持C预处理程序指令，例如Fortran代码中的＃define，＃ifdef，＃include，__ FILE__和__LINE__。
</p><blockquote><small>
<i>固定表格是为打卡设计的旧表格。它在Fortran 77和早期程序中更常见，尽管它仍然是Fortran 2003的一部分。固定形式，“c”，“C”，“*”或“！“在第1列中表示注释;第1列到第5列用于语句标签;第6列中的字符表示连续行;程序语句包含在第7列到第72列中。第72列之后的任何内容都将被忽略。（尽管第72列是在Fortran标准中指定的，但大多数编译器允许您更改它以允许更长的行; Photran也允许您更改它，如下一节所述。）
</i></small>
</blockquote><p>Photran使用文件扩展名来确定文件是固定格式还是自由格式，以及它是否是C预处理的。默认文件扩展名如下。
</p><table cellspacing="0" cellpadding="5" border="1" align="center"><tr><td> 
<b>文件名扩展名</b></td><td> 
<b>来源表格/预处理</b></td></tr><tr><td>.f，.fix，.for，.fpp，.ftn<br>。F， 。F77 ,.FIX ,.FOR ,.FTN ,.FPP，.fpp</td><td>固定来源表格</td></tr><tr><td>.f08，.f03，.f95，.f90</td><td>包含INCLUDE行的免费源表单<br>
</td></tr><tr><td>。F08 ,.F03 ,.F95 ,.F90</td><td>带有C预处理程序指令的自由源表单</td></tr></table><h2>配置源表单/文件名扩展关联</h2><p>上面列出的文件扩展名是新Fortran项目的默认值。要改变它们：</p><ol><li>在Fortran Projects视图中，右键单击项目，然后选择Properties。
</li><li>在左侧的树中，导航到Fortran General&gt; Source Form。
</li><li>对于要更改的每个文件扩展名，请从下拉框中选择相应的源表单。
</li><li>单击“确定”关闭对话框。
</li></ol><p><center>
<img src="../images/Photran-source-form-config.png"></center>
</p><h2>添加其他文件扩展名</h2><p>可以通过更改Eclipse Content Type首选项来添加其他文件扩展名。
</p><ol><li>单击窗口&gt;首选项...（Eclipse&gt; Preferences ...在Mac OS X上）。
<ol><li>在右窗格的“内容类型：”树中，导航到“文本”&gt;“Fortran源文件”。
</li></ol></li><li>单击添加...按钮。
</li><li>要使具有“.fre”文件扩展名的所有文件都被识别为Fortran源代码， <i>请</i>在对话框中输入<i>* .fre</i> 。您也可以通过省略*来指定单个文件名。字首;例如，输入<i>old-fortran-code.txt</i>将使任何名为old-fortran-code.txt的文件被识别为Fortran源代码，而不是其他.txt文件。
</li><li>单击“确定”关闭对话框。
</li></ol><p><b>有关配置内容类型的更多信息，</b>请单击Eclipse中的“帮助”&gt;“帮助内容”，然后导航到<b>Workbench用户指南&gt;参考&gt;首选项&gt;内容类型。
</b></p><h1>配置固定表格线宽</h1><p>虽然自由源形式允许线任意长，但是在固定形式中，存在预定的最大线宽。通常，这是72个字符（即，第72列之后的任何内容都被忽略并视为注释），尽管大多数编译器允许您更改此字符以允许更长的行。Photran允许您更改它。要更改固定格式源中的最大线宽...
</p><ol><li>打开工作台首选项。在Windows或Linux上，单击窗口&gt;首选项;在Mac OS X上，单击Eclipse&gt; Preferences。
</li><li>展开Fortran类别，然后选择Editor。
</li><li>更改标记为“固定表格行长度”的字段的值。该值必须至少为72。
</li></ol><p>如果您有任何固定的表单编辑器打开，关闭并重新打开它们;请注意，最右边的灰色垂直条已移动到指示的列，并且解析器（构造“大纲”视图）已相应调整。
<b>注意：</b>这是工作区范围的首选项：它会影响工作区中的所有固定表单文件。目前无法针对每个项目或每个文件调整此设置。
</p><h1>Fortran透视</h1><p>当您编写Fortran代码时，通常您将使用Fortran透视图。当您创建一个新的Fortran项目（如上所述）时，向导将询问您是否要切换到Fortran透视图，或者您可以通过单击Window&gt; Open Perspective&gt; Other ...并从列表中选择Fortran来手动执行此操作。 。
<b>有关透视图的更多信息，</b>请单击Eclipse中的“帮助”&gt;“帮助内容”，然后导航到“ <b>Workbench用户指南”&gt;“概念”&gt;“透视图”。
</b> Eclipse教程还介绍了透视图，可以在<b>Workbench用户指南&gt;入门&gt;基础教程中找到。
</b>特别要注意，您可以通过单击“窗口”&gt;“显示视图”&gt;“其他...”并从“显示视图”对话框中选择新视图来向透视图添加视图。您还可以将当前透视图重置为其原始布局：从菜单栏中，选择“窗口”&gt;“重置透视图”。默认情况下，Fortran透视图包含用于编辑代码的中心区域以及以下视图：</p><ul><li><b>Fortran项目</b>视图显示您的项目以及其中的所有文件和文件夹。
</li><li>如果Photran可以识别它们，则<b>Problems</b>视图将显示Fortran编译器的错误。（这需要配置<i>错误解析器，</i>本手册的其他部分对此进行了描述。）
</li><li><b>Console</b>视图显示Fortran编译器的输出。运行Fortran程序时，其输出也会显示在Console视图中。
</li><li><b>“</b> <a href="http://wiki.eclipse.org/PTP/photran/documentation/photran7advanced">光子高级功能”手册中</a>介绍了<b>Fortran声明</b>视图。
</li><li>“ <b>大纲”</b>视图显示程序的高级结构，即包含它的子程序，模块，派生类型等。
</li><li><b>Make Targets</b>视图允许您在自定义Makefile中定义的特定目标上快速运行<b>make</b> 。
</li></ul><p><b>有关Make Targets视图的更多信息，请</b>单击Eclipse中的Help&gt; Help Contents，然后导航到<b>C / C ++ Development用户指南&gt;参考&gt; C / C ++视图和编辑器&gt; Make Targets视图。
</b></p><h1>Fortran项目视图</h1><p>Fortran项目视图以树结构显示项目文件。在此视图中，您可以执行以下操作：</p><ul><li>在Fortran编辑器中打开文件</li><li>管理现有文件（剪切，粘贴，删除，移动或重命名）</li><li>创建新项目，文件或文件夹</li><li>导入或导出文件和项目</li><li>浏览Fortran文件中的高级结构</li><li>在新窗口中打开项目</li><li>执行一些多文件重构（例如，介绍隐式无;请参阅<a href="http://wiki.eclipse.org/PTP/photran/documentation/photran7advanced">Photran高级功能手册</a> ）</li></ul><p>双击文件名或右键单击文件并从上下文菜单中选择“打开方式”，即可打开文件。通过右键单击文件并从上下文菜单中选择操作来执行大多数其他操作。Fortran项目视图类似于C / C ++项目视图。
<b>有关Fortran项目视图的更多信息，</b>请单击Eclipse中的“帮助”&gt;“帮助内容”并导航到“ <b>C / C ++开发用户指南”&gt;“参考”&gt;“C / C ++视图和编辑器”&gt;“C / C / C ++项目”视图中的文档。 <b>C ++ Projects视图。
</b></p><h1>使用Fortran编辑器和Fortran透视图</h1><h2>大纲视图</h2><p><center>
<img src="../images/Photran-outline-view.PNG" alt="大纲视图"></center>在Fortran编辑器中打开Fortran文件时，Outline视图显示该文件的结构元素的大纲：子程序，主程序，模块，派生类型等.Outline视图记录了文件的内容类型（自由格式）或固定形式）;它还会在代码中出现错误时注明。要将Outline视图添加到当前透视图，请转到Window&gt; Show View&gt; Other ...&gt; General&gt; Outline。
<center>
<img src="../images/Photran-outline-view-error.PNG" alt="大纲错误"></center>
</p><h2>Fortran编辑器概述</h2><p>Fortran编辑器包含许多功能。要注意的主要功能是编辑器顶部的水平标尺，代码折叠和语法高亮。<b>水平标尺</b>以字符为单位测量编辑器的宽度：编辑器中的每列都有一个符号（ -  / +）或数字。每五个字符显示一个加号（+），每十个字符编号。也可以打开第80列的<b>打印边距</b> （灰色垂直线）;这将在下面标题为“配置编辑器”的部分中进一步讨论。<center>
<img src="../images/Photran-editor-ruler.PNG" alt="编辑统治者"></center>
<b>代码折叠</b>也支持免费的形式编辑器，但打开代码折叠将禁用水平标尺;如何做到这一点也在下面描述。打开折叠时，编辑器左边缘将显示一个减号（ - ），旁边是每个程序，功能，子程序等;单击减号将暂时将该实体的显示折叠为单行。
<center>
<img src="../images/Photran-editor-folding-1.PNG" alt="编辑折叠"></center>编辑器还支持<b>语法突出显示。
</b>当您在Fortran中编写程序时，您会注意到不同的颜色应用于注释，标识符，内在函数，关键字和字符串，以使代码更具可读性。可以在Fortran编辑器首选项中更改前面提到的每个代码组件的颜色（这将在下面的“配置编辑器”一节中讨论）。通常，编辑器甚至可以区分关键字“if”和名为“if”的变量。但是，它并不完美;它使用比驱动Outline视图和所有<a href="http://wiki.eclipse.org/PTP/photran/documentation/photran7advanced">高级功能</a>的实际Fortran解析器更快但不太可靠的启发式算法。
</p><h2>注释/取消注释</h2><p>Photran可以评论或取消注释一个Fortran语句块，放置一个感叹号（！）在陈述之前或分别删除它。在Fortran编辑器中选择语句。然后右键单击所选内容，并从上下文菜单中选择“注释/取消注释”。
<center>
<img src="../images/Photran-comment-action.png"></center>
</p><h2>设置书签</h2><p>书签是Eclipse功能，允许您在文件中标记重要行，然后使用“书签”视图快速跳转到这些行。要设置书签，请右键单击编辑器左侧的灰色栏（位于书签所在的行），然后从弹出菜单中选择“添加书签...”。通过将光标定位在该行上，也可以将书签放置在一行上，转到菜单栏中的编辑&gt;添加书签....在对话框中键入所需的书签名称，然后单击“确定”。蓝色书签将显示在编辑器左侧的灰色栏中。然后可以在“书签”视图中查看书签（“窗口”&gt;“显示视图”&gt;“其他...”，在“常规”文件夹中选择“书签”）。
</p><h2>转到行（Ctrl + L）</h2><p>“Go To Line ...”功能允许您在Fortran编辑器中打开时跳转到文件中的特定行号。在菜单栏中，转到导航&gt;转到行...（或按热键，Windows / Linux上的Ctrl + L或Mac上的Command + L）以打开“转到行”对话框。键入要导航到的行，然后单击“确定”。光标将移动到指定行的开头。
</p><h2>配置编辑器</h2><p><center>
<img src="../images/TheEditor.png"></center>
</p><h3>选择水平标尺与折叠</h3><p>Fortran编辑器既可以显示水平标尺，也可以启用代码折叠，但不能同时启用。要确定将启用哪个，请转到菜单栏中的“窗口”&gt;“首选项”。展开Fortran并选择Editor。选中相应的框以在自由格式和/或固定格式的Fortran编辑器中启用折叠。
</p><h3>设置语法突出显示的颜色</h3><p>可以在Fortran编辑器首选项中修改Fortran语法突出显示的颜色。要修改颜色设置，请转到菜单栏中的“窗口”&gt;“首选项”。展开Fortran并选择Editor。此页面提供了注释，标识符，内在函数，关键字和字符串的颜色选择器。
</p><h3>显示打印边距</h3><p>编辑者可以选择在指定列处显示灰色垂直条;通常，这在列80中设置以充当视觉“打印边缘”。要启用打印边距显示，请转到菜单栏中的窗口&gt;首选项。在常规下，展开编辑器，然后选择文本编辑器。选中“显示打印边距”复选框。或者，您也可以更改将显示打印边距的列。单击“应用”，打印边距现在应显示在编辑器中。
</p><h3>设置固定形式的线长</h3><p>在固定格式中，Fortran指定经过第72列（默认）的任何内容都是注释。但是，可以将其更改为72以外的值。要更改线条的长度，请转到菜单栏中的“窗口”&gt;“首选项”。在Fortran下，选择编辑器。将标记为“固定线条长度”的字段的值更改为所需的线条长度。请注意，行的长度的可接受范围是72-999（含）。
</p><h3>将制表符转换为空格</h3><p>要启用将标签转换为空格，请转到菜单栏中的“窗口”&gt;“首选项”。在常规下，展开编辑器，然后选择文本编辑器。选中“为选项卡插入空格”框，让Eclipse自动将Tabs转换为空格。请注意，这仅适用于您键入的<i>新</i>选项卡;它不会更改您现有的文件。
</p><blockquote><small>只要选项卡全部出现在一行的开头，就很容易用现有文件中的空格替换制表符。（对于行中间的标签，这不会很正常。）（1）将光标移动到文件的开头; （2）点击编辑&gt;查找/替换...; （3）在“查找”框中，键入“\ t”（不带引号）; （4）在“替换为”框中，键入4或8个空格（每个制表符将替换为您键入的内容，因此如果键入四个空格，则每个制表符将替换为四个空格）; （5）选择搜索：转发和范围：全部; （6）检查“正则表达式”框; （7）单击全部替换。这将用空格替换每个制表符。</small>
</blockquote><h3>显示空格</h3><p>可以通过转到窗口&gt;首选项来显示空白字符。在“常规”&gt;“编辑器”&gt;“文本编辑器”下，选中“显示空白字符”旁边的框，然后单击“应用”。现在，空格，制表符和换行符将分别显示为浅灰色双角引号（»），点（·）和段落符号（¶）。
</p><h3>设置字体</h3><p>Photran使用与基本Eclipse文本编辑器相同的字体。要更改它，请单击菜单栏中的“窗口”&gt;“首选项”。在“常规”下，展开“外观”，然后选择“颜色和字体”。搜索您想要的字体。
<center>
<img src="../images/fonts.png"></center>
</p><h3>显示行号</h3><p>行号可以在编辑器的“文本编辑器”首选项页面中显示。转到窗口&gt;首选项。在“常规”&gt;“编辑器”&gt;“文本编辑器”下，选中“显示行号”框，然后单击“应用”。
<center>
<img src="../images/Text_Editors.png"></center>
</p><h3>代码模板</h3><p>代码模板用于使编码更快更容易。输入您输入的任何内容的第一个字母后，按Ctrl + Space键将显示一个选项列表。转到Windows&gt;首选项&gt; Fortran&gt;模板以管理您想要的模板。
<center>
<img src="../images/Code_Templates.png"></center>
</p></div>
</body>
</html>
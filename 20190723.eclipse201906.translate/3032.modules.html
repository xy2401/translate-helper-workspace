<html dir="ltr">
<head>
<title>配置环境模块</title>
<link rel="stylesheet" type="text/css" href="help.css"></link>
<script type="text/javascript" src="thumb.js"> </script>
</head> 
<body dir="ltr">
<h1 id="top">配置环境模块</h1>
<p>
</p><p>环境模块允许用户在超级计算机上的不同版本的编译器，库和其他已安装的软件之间切换。在命令行上，环境模块通常使用<tt>模块加载gcc / 4.6.2</tt>或<tt>模块交换PrgEnv / cray PrgEnv / pgi</tt>等命令进行配置。</p>

<p>PTP提供了在构建同步C / C ++或Fortran项目时配置要加载的一组模块的功能。可以手动输入模块命令 - 就像在命令行输入一样 - 或者可以使用图形界面配置它们。</p>

<p><a href="build.html#envMgmt">“构建同步项目”</a>的“ <a href="build.html#envMgmt">环境管理”部分</a>提供了“使用模块进行环境管理”的简要说明。
<br>本节介绍更多其他详细信息。

</p><p><i><b>注意：以下说明仅适用于同步项目。</b>目前，无法为本地或远程项目配置模块。</i></p>

<p>要配置用于构建同步C / C ++或Fortran项目的环境模块，可以在两个位置访问这些信息：</p>
<p></p>
<ol>
<li>从项目上下文菜单（右键单击C / C ++或Fortran项目），选择<b>Synchronize&gt; Manage ...</b> 
<p><img src="images/build-sync-manage.png"></p>
<p> 
</p><p>这将打开“ <b>管理同步配置”</b>对话框。
</p><p><img src="images/build-sync-manage-dialog.png"></p>
<p> 
</p></li>
<li>或者，也可以在“ <b>同步”</b>页面上的“ <a href="misc.html#projProps">项目属性”</a>对话框中找到它。

</li></ol>

<p>这里我们从第一个选项“ <b>管理同步配置”</b>对话框中进行说明。

<!--  ----------------------------- -->




</p><li>选中“ <b>使用环境管理系统”自定义远程构建环境</b> 。
<p align="center"><script>thumb("images/build-sync-manage-dialog-box.png",245)</script></p><p><br></p>

<p> 
</p></li><li>如果显示消息正在读取<b>未连接远程环境<i>（连接名称）</i></b> ，请单击“ <b>连接”</b>按钮。如果未显示此类消息，请继续执行下一步。
<br>
<p align="center"><script>thumb("images/modules-notConnected.png",245)</script></p><p><br></p>
</li>
<li>在10-15秒内，将出现以下其中一项之一。<br> <br>
    <ul>
    <li>如果显示消息（读取<b><i>连接名称）</i>未安装支持的环境管理系统</b> ，则需要手动指定环境配置命令。
        <a href="#manual">点击此处</a>获取进一步说明。
        <br>
        <p align="center"><script>thumb("images/modules-notDetected.png",245)</script></p><p><br></p>
        </li>
    <li>如果出现模块列表，您可以从列表中选择要加载的模块。
        <a href="#select">点击此处</a>获取进一步说明。
        <br>
        <p align="center"><script>thumb("images/modules-list.png",245)</script></p><p><br></p>
        </li>
    </ul>
</li>
<li>为构建配置环境模块后，单击“ <b>确定”</b>按钮以保存配置并关闭“项目属性”对话框。</li>


<h2 id="select">使用模块列表配置环境模块<p>当远程计算机运行以下环境管理系统之一时，PTP允许使用可用和所选模块的列表来配置模块：</p>
<ul>
<li><a href="http://modules.sourceforge.net/">模块</a> -  C或Tcl版本</li>
<li><a href="http://lmod.sourceforge.net/">Lmod</a> - 基于Lua的模块</li>
<li>SoftEnv</li>
</ul>

<p align="center"><img src="images/modules-list.png"></p><p><br></p>

<p>模块配置区域包含以下元素。</p>
<ul>
<li>左侧的<b>可用模块</b>列表显示远程计算机上可用的所有模块。从左侧列表中选择一个模块，然后单击<b>添加 - &gt;</b>按钮将其添加到所选模块列表中。从右侧的模块列表中选择一个模块，然后使用<b>&lt; -  Remove</b>按钮从所选模块列表中删除模块。如果“ <b>选定模块”</b>列表右侧列出了模块，则在构建项目时将加载该模块。如果模块不在所选模块的列表中，PTP将确保在构建项目时未加载模块。</li>
<li>在右侧列表中选择一个模块，然后使用<b>向上</b>和<b>向下</b>按钮重新排序所选模块，以便按所列顺序加载它们。
</li><li>“ <b>设置默认值”</b>按钮可恢复列表，以便仅检查默认模块。“默认模块”是在远程计算机上启动新的Bash登录shell时自动加载的模块。（某些系统允许用户通过在远程计算机上创建<i>〜/ .modules</i>文件来自定义其默认模块。）</li>
<li>“ <b>重新加载列表”</b>按钮可从远程计算机重新加载可用模块列表。如果在对话框打开时可用模块集发生更改，或者通信问题导致列表无法正确加载，则此选项非常有用。</li>
<li>“ <b>筛选器列表”</b>文本字段允许您临时仅显示可用模块的子集。这对于快速查找具有特定名称的模块非常有用。请注意，进入过滤文本中选择什么模块<i>不会</i>改变;相反，它暂时从视图中删除一些模块。有关详细说明， <a href="#filter">请参见下文</a> 。</li>
</ul>


<h3 id="filter">使用<b>筛选器列表</b>文本字段<p>“ <b>筛选器列表”</b>文本字段可用于临时仅显示具有特定名称的模块。（在此字段中输入文本不会影响选择的模块;它只是从视图中隐藏一些条目，直到清除过滤器文本。）</p>

<ul>
<li>在字段中键入文本会将显示限制为仅以名称以该文本开头的模块。例如：<ul>
    <li>输入“open”将显示诸如open64 / 4.5.1，open64 / 5.0，openmpi-1.4.3-intel-12.0.4和openmpi_gcc-1.4.2之类的模块 - 即名称以“open”开头的模块。</li></ul></li>
<li>文本中的星号（*）与任何文本匹配（或根本不匹配）。例如：<ul>
    <li>输入“* gcc”将匹配名为gcc，gcc / 4.6.2，openmpi_gcc-1.4.2甚至R / 2.14.2-gcc的模块 - 即名称中包含“gcc”的任何模块。</li>
    <li>输入“metis / * / gnu”将匹配metis / 4.0 / gnu和metis / 5.0 / gnu（但不是metis / 4.0 / intel或metis / 5.0 / intel）。
    </li><li>输入“m * pi”将匹配mpi，mpip，mvapich2  - 名称以<i>m</i>开头且名称后面有<i>pi的</i>模块。</li>
    </ul></li>
<li>问号（？）在文本中恰好匹配一个字符。例如：<ul>
    <li>输入“openmpi-1.?-intel”将匹配名为openmpi-1.6-intel-12.0.4的模块，但不匹配openmpi-1.4.3-intel-12.0.4。）</li>
    </ul></li>
        <p><img src="images/modules-filter-list.png"></p>
</ul>

<h2 id="manual">手动配置环境模块<p>要手动配置环境模块：</p>
<ol>
<li>选择“ <b>手动指定环境配置命令”</b> 。</li>
<li>将出现一个文本框。如果先前可以看到检查列表，则文本框将包含根据<b>所选模块</b>列表配置模块所需的命令。否则文本区域将为空白。</li>
<li>输入配置环境所需的Bash shell命令，每行一个。</li>
    <p><img src="images/modules-manual.png"></p>
</ol>

<p> </p>

<p><a href="#top">回到顶部</a> | <a href="toc.html">返回目录</a></p>
</h2></h3></h2></body>

</html>
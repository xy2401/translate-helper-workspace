<html lang="zh-Hans" dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta name="copyright" content="Copyright (c) IBM Corporation and others 2009, 2011. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page."></meta>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
<meta http-equiv="Content-Style-Type" content="text/css"></meta>
<link rel="stylesheet" type="text/css" href="../book.css"></link>
<title>CopyrightTabPage.java</title>
</head>
<body dir="ltr">
<pre class="color1">/ ******************* ****************************** *版权所有（c）2009 IBM Corporation和其他人。* 版权所有。本程序及随附的材料*根据本分发版附带的Eclipse Public License v1.0 *的条款提供，可从* http://www.eclipse.org/legal/epl-v10.html *获取* ************************************************** ***************************** / package org.eclipse.jdt.ui.internal.copyrightupdater; import org.eclipse.swt。SWT; import org.eclipse.swt.custom。SashForm; import org.eclipse.swt.custom。ScrolledComposite; import org.eclipse.swt.events。ControlEvent资料; import org.eclipse.swt.events。ControlListener; import org.eclipse.swt.events。SelectionAdapter; import org.eclipse.swt.events。SelectionEvent; import org.eclipse.swt.graphics。点; import org.eclipse.swt.graphics。长方形; import org.eclipse.swt.layout。的GridData; import org.eclipse.swt.layout。网格布局; import org.eclipse.swt.widgets。按钮; import org.eclipse.swt.widgets。综合; import org.eclipse.swt.widgets。控制; import org.eclipse.swt.widgets。组; import org.eclipse.swt.widgets。标签; import org.eclipse.swt.widgets。布局; import org.eclipse.jface.dialogs。IDialogConstants; import org.eclipse.jface.layout。PixelConverter; import org.eclipse.jdt.ui.cleanup。CleanUpOptions; import org.eclipse.jdt.ui.cleanup。ICleanUpConfigurationUI; public class CopyrightTabPage实现ICleanUpConfigurationUI {private PixelConverter fPixelConverter;私人CleanUpOptions fOptions; public CopyrightTabPage（）{super（）; } / *（非Javadoc）* @see org.eclipse.jdt.ui.cleanup。ICleanUpConfigurationUI＃createContents（是org.eclipse.swt.widgets。Composite）* / public Composite createContents（Composite parent）{final int numColumns = 4; if（fPixelConverter == null）{fPixelConverter = new PixelConverter（parent）; } final SashForm sashForm = new SashForm（parent，SWT.HORIZONTAL）; sashForm.setFont（parent.getFont（））;复合scrollContainer = new Composite（sashForm，SWT.NONE）; GridData gridData = new GridData（SWT.FILL，SWT.FILL，true，true）; scrollContainer.setLayoutData（的GridData）; GridLayout layout = new GridLayout（2，false）; layout.marginHeight = 0; layout.marginWidth = 0; layout.horizontalSpacing = 0; layout.verticalSpacing = 0; scrollContainer.setLayout（布局）; ScrolledComposite scroll = new ScrolledComposite（scrollContainer，SWT.V_SCROLL | SWT.H_SCROLL）; scroll.setLayoutData（new GridData（SWT.FILL，SWT.FILL，true，true））; scroll.setExpandHorizontal（真）; scroll.setExpandVertical（真）; final CompositeContainer = new Composite（scroll，SWT.NONE）; settingsContainer.setFont（sashForm.getFont（））; scroll.setContent（settingsContainer）; settingsContainer.setLayout（new PageLayout（scroll，400,400））; settingsContainer.setLayoutData（new GridData（SWT.FILL，SWT.FILL，true，true））;复合settingsPane = new Composite（settingsContainer，SWT.NONE）; settingsPane.setLayoutData（new GridData（SWT.FILL，SWT.FILL，true，true））; layout = new GridLayout（numColumns，false）; layout.verticalSpacing =（int）（1.5 * fPixelConverter.convertVerticalDLUsToPixels（IDialogConstants。VERTICAL_SPACING））; layout.horizontalSpacing = fPixelConverter.convertHorizontalDLUsToPixels（IDialogConstants。HORIZONTAL_SPACING）; layout.marginHeight = fPixelConverter.convertVerticalDLUsToPixels（IDialogConstants。VERTICAL_MARGIN）; layout.marginWidth = fPixelConverter.convertHorizontalDLUsToPixels（IDialogConstants。HORIZONTAL_MARGIN）; settingsPane.setLayout（布局）; doCreatePreferences（settingsPane）; settingsContainer.setSize（settingsContainer.computeSize（SWT.DEFAULT，SWT.DEFAULT））; scroll.addControlListener（new ControlListener（）{public void controlMoved（ControlEvent e）{} public void controlResized（ControlEvent e）{settingsContainer.setSize（settingsContainer.computeSize（SWT.DEFAULT，SWT.DEFAULT））;}}）; Label sashHandle = new Label（scrollContainer，SWT.SEPARATOR | SWT.VERTICAL）; gridData = new GridData（SWT.RIGHT，SWT.FILL，false，true）; sashHandle.setLayoutData（的GridData）;返回sashForm; } / ** *创建标签页的首选项。* * @param复合复合创建* / protected void doCreatePreferences（复合复合）{Group group = new Group（composite，SWT.NONE）; group.setLayoutData（new GridData（SWT.FILL，SWT.FILL，true，false））; group.setLayout（new GridLayout（1，false））; group.setText（“版权更新”）; // $ NON-NLS-1 $ final按钮updateCheckbox = new Button（group，SWT.CHECK）; updateCheckbox.setLayoutData（new GridData（SWT.BEGINNING，SWT.CENTER，false，false））; updateCheckbox.setText（“更新版权”）; // $ NON-NLS-1 $ updateCheckbox.setSelection（fOptions.isEnabled（“cleanup.update_copyrights”））; // $ NON-NLS-1 $ updateCheckbox.addSelectionListener（new SelectionAdapter（）{/ * * @see org.eclipse.swt.events。SelectionAdapter＃widgetSelected（org.eclipse.swt.events。SelectionEvent）* / public void widgetSelected（SelectionEvent e）{fOptions.setOption（“cleanup.update_copyrights”，updateCheckbox.getSelection（）？CleanUpOptions。TRUE：CleanUpOptions。假）; // $ NON-NLS-1 $}}）; } / *（非Javadoc）* @see org.eclipse.jdt.ui.cleanup。ICleanUpConfigurationUI＃getCleanUpCount（）* / public int getCleanUpCount（）{return 1; } / *（非Javadoc）* @see org.eclipse.jdt.ui.cleanup。ICleanUpConfigurationUI＃getPreview（）* / public String getPreview（）{StringBuffer buf = new StringBuffer（）; if（fOptions.isEnabled（“cleanup.update_copyrights”））{// $ NON-NLS-1 $ buf.append（“/ * Copyright（c）2007,2009 IBM Corporation and others。* /”）; // $ NON-NLS-1 $} else {buf.append（“/ * Copyright（c）2007,2008 IBM Corporation and others。* /”）; // $ NON-NLS-1 $}返回buf.toString（）; } / *（非Javadoc）* @see org.eclipse.jdt.ui.cleanup。ICleanUpConfigurationUI＃getSelectedCleanUpCount（）* / public int getSelectedCleanUpCount（）{return fOptions.isEnabled（“cleanup.update_copyrights”）？1：0; // $ NON-NLS-1 $} / *（非Javadoc）* @see org.eclipse.jdt.ui.cleanup。ICleanUpConfigurationUI＃setOptions（org.eclipse.jdt.ui.cleanup。CleanUpOptions）* / public void setOptions（CleanUpOptions options）{fOptions = options; } / ** *用于设置部分的布局。确保在必要时显示滚动条*。设置部分需要在调整大小时进行布局。* / private static class PageLayout extends Layout {private final ScrolledComposite fContainer; private final int fMinimalWidth; private final int fMinimalHight; private PageLayout（ScrolledComposite container，int minimalWidth，int minimalHight）{fContainer = container; fMinimalWidth = minimalWidth; fMinimalHight = minimalHight; public Point computeSize（Composite composite，int wHint，int hHint，boolean force）{if（wHint！= SWT.DEFAULT &amp;&amp; hHint！= SWT.DEFAULT）{return new Point（wHint，hHint）; } int x = fMinimalWidth; int y = fMinimalHight; Control [] children = composite.getChildren（）; for（int i = 0; i &lt;children.length; i ++）{Point size = children [i] .computeSize（SWT.DEFAULT，SWT.DEFAULT，force）; x = Math.max（x，size.x）; y = Math.max（y，size.y）; } Rectangle area = fContainer.getClientArea（）; if（area.width&gt; x）{fContainer.setExpandHorizontal（true）; } else {fContainer.setExpandHorizontal（false）; } if（area.height&gt; y）{fContainer.setExpandVertical（true）; } else {fContainer.setExpandVertical（false）;如果（wHint！= SWT.DEFAULT）{x = wHint;如果（hHint！= SWT.DEFAULT）{y = hHint; } return new Point（x，y）; } / *（非Javadoc）* @see org.eclipse.swt.widgets。布局＃布局（是org.eclipse.swt.widgets。Composite，boolean）* / public void layout（Composite composite，boolean force）{Rectangle rect = composite.getClientArea（）; Control [] children = composite.getChildren（）; for（int i = 0; i &lt;children.length; i ++）{children [i] .setSize（rect.width，rect.height）; }}}}</pre>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Swing Designer FAQ</title>
<meta content="text/html; charset=windows-1252" http-equiv="Content-Type">
<link href="../book.css" rel="stylesheet" type="text/css">
</head>

<body>
		<h1>Swing Designer FAQ</h1>
		<table border="0" width="900" cellspacing="0" cellpadding="0">
			<tr>
				<td>The following are frequently asked questions about <b>Swing Designer</b>:&nbsp;<ul>
			<li><a href="#OtherGUIBuilders">Can 
			Swing Designer edit windows created 
	with JBuilder, VA Java, NetBeans, VisualCafe, etc.?</a></li>
			<li><a href="#CreatedByHand">Can Swing Designer edit windows that have been 
	created by hand?</a></li>
			<li><a href="#Refactor">Can I refactor or otherwise modify the 
			Swing Designer 
	generated code?</a></li>
			<li><a href="#SpecialTags">Why doesn't Swing Designer surround generate code with 
	special tags or mark it as read-only?</a></li>
			<li><a href="#CantParse">Are there any specific constructs that 
			Swing Designer 
	can't parse?</a></li>
			<li><a href="#CustomWidgets">Can Swing Designer use custom&nbsp;widgets?</a></li>
			<li><a href="#DesignTab">What can I do if I don't see the Design tab 
	when I edit a window?</a></li>
			<li><a href="#Exception">What should I do if I encounter an exception using
			Swing Designer?</a></li>
			<li><a href="#ParsingError">What should I do if I encounter &quot;Unknown 
			Window Type (Parsing Error)&quot;?</a></li>
			<li><a href="#OutOfMemoryError">What should I do if I encounter an 
	OutOfMemoryError using Swing Designer?</a></li>
			<li><a href="#NoSuchMethodError">What should I do if I encounter an 
			NoSuchMethodError or NoClassDefFoundError using Swing Designer?</a></li>
			<li><a href="#UnsupportedClassVersionError">What should I do if I encounter an 
			UnsupportedClassVersionError using Swing Designer?</a></li>
			<li><a href="#InstantiationException">What should I do if I 
			encounter an InstantiationException or other error when using a custom widget?</a></li>
			<li><a href="#Linux">How should Swing Designer be configured to work on 
			Linux?</a></li>
			<li><a href="#SuSELinux">What should I do if I have problems running 
			under SuSE Linux?</a></li>
			<li><a href="#LinuxFlashing">How can I prevent 
			the preview window from flashing under Linux using Metacity</a></li>
		</ul>
				<h2><a name="OtherGUIBuilders"></a>Can Swing Designer 
			edit windows created with JBuilder, VA Java, NetBeans, VisualCafe, 
			etc.?</h2>
		<p>Yes. Most GUI builders in the world will only read and write the 
			code that they themselves create. Swing Designer is an exception to 
			that rule. It can read and edit not only the code it creates, but 
			also a great deal of code generated by other GUI builders (&gt;95%). We 
			have had very good success with code generated by JBuilder, NetBeans, 
			Visual Cafe, VA Java, the Eclipse VE, etc. If you come across a case 
			that does not work, send it to us for analysis. The more broken 
			examples that we can "fix", the better Swing Designer will get in the long 
			run (and the better chance you will have of salvaging your old code 
			as-is). Note that Swing Designer will edit any existing code in place 
			without changing its formatting. Any new widgets will be created 
			using Swing Designer's own code 
			generation preferences.</p>
		<h2 style="font-weight: bold"><a name="CreatedByHand"></a>Can 
		Swing Designer edit windows that have been created by hand?</h2>
		<p>Yes. Most GUI builders in the world will only read and write the 
			code that they themselves create. Swing Designer is an exception to 
			that rule. It can read and write not only the code it creates, but 
			also a great deal of code written by hand(&gt;90%). If you come across 
			a case that does not work, send it to us for analysis. The more 
			broken examples that we can "fix", the better Swing Designer will get in 
			the long run (and the better chance you will have of salvaging your 
			old code as-is).</p><p>Note that dynamic GUI code can not be rendered or edited. The
problem with dynamic code is that it generally relies on runtime
calculations that have no meaning at runtime. Widgets created in a loop
(where the loop parameters are passed in externally) are a good
example. Widgets created in conditionals where the value of the
conditional is not known until runtime are another example. Dynamic GUI
code constructed from the results of complex database queries is yet
another example.</p>
		<h2 style="font-weight: bold"><a name="Refactor"></a>Can I refactor 
			or otherwise modify the Swing Designer generated code?</h2>
		<p>Yes. The Swing Designer parser has a good understanding of basic 
			Java code and various Swing, SWT and other UI toolkit patterns. As a result, it is 
			very refactoring friendly and very resilient in the face of hand 
			made changes. You can make changes or add code anywhere you like and 
		Swing Designer will reverse engineer it when possible. You can also 
			refactor the code in almost any conceivable way and Swing Designer 
			will still be able to parse it and render it in the design view. For 
			example, use the tool to create a new Swing JFrame, add some 
			widgets, and then use the Eclipse refactoring tools to extract some 
			of the widgets into their own methods.</p>
		<h2 style="font-weight: bold;"><a name="SpecialTags"></a>Why doesn't 
			Swing Designer surround generate code with special tags or mark it as 
			read-only?</h2>
		<p>Using special tags or marking code read-only would 
			go against several of Swing Designer's major design goals. 
		Swing Designer does 
			not make any distinction between generated code and user-written 
			code. Swing Designer is designed to generated the same code that you would 
			write by hand and to make minimal changes to the source when you 
			make a change to the design view. Swing Designer never regenerates the 
			entire source for a file. If you change a single property, it will 
			change only a single line of code. That line of code could 
			theoretically be anywhere in the source file (including within lines 
			originally created by Swing Designer or within lines that you wrote by 
			hand).</p>
		<h2 style="font-weight: bold;"><a name="CantParse"></a>Are there any 
			specific constructs that Swing Designer can't parse?</h2>
		<p>Yes. Here are some examples of constructs that Swing Designer 
			does not yet handle:</p>
		<ul>
			<li>Re-use of GridBagConstraint objects across multiple widgets 
				(we support reusing the same variable but not the same objects)</li>
			<li>UI construction through the use of local 
				parameterized helper methods</li>
			<li>Multiple aliases (fields or local variables) referring to 
				the same component</li>
			<li>Multiple references to the same widget definition through 
			multiple invocations of the same helper method</li>
			<li>Dynamic GUI code based on runtime calculations</li>
		</ul>
				<h2 style="font-weight: bold;"><a name="CustomWidgets"></a>Can 
				Swing Designer use custom widgets?</h2>
		<p>Yes., with a few restrictions.</p><p>For Swing, any public JComponent subclass that has a 
			public, zero-argument constructor can be used (as required by the Java Bean spec). Custom properties are 
			derived through reflection by looking for getter/setter pairs of 
			known types. If a matching JavaBean class is defined and available, 
			it will be used for any custom properties. Custom JPanel subclasses 
			will show their subcomponents when placed in Swing Designer.&nbsp;</p>
				<p>Note: the
Java Bean conventions are important from a
GUI builder point of view as they establish a common, expected, and,
for the most part, self documenting API. If you create your own unique
constructors, your are, in effect, creating your own personal API which
makes it difficult for a GUI builder to reflectively interact with your
components. Generating code to a custom constructor API requires
knowledge of the API that generally is not provided by the component.
That requires hard coding knowledge of the component into the GUI
builder itself. </p>
		<p>Note: A component may rely on some runtime behavior that is 
		not possible at design time (such as accessing an application database 
		or some other file). Runtime specific behavior should be isolated (and 
		stubbed out as necessary) by wrappering the runtime specific code with a call to
		Beans.isDesignTime() which will answer true when the 
		component is loaded within Swing Designer and false at runtime.</p>
				<h2 style="font-weight: bold;"><a name="DesignTab"></a>What can I do 
			if I don't see the Design tab when I edit a window?</h2>
		<p>
<img border=0
src="features/images/open_with.gif" v:shapes="_x0000_i1032" align="right">Eclipse remembers the last editor type used with a 
			file. If you don't see the <b>Design</b> tab, that means that you are using the standard Eclipse 
		<b>Java Editor</b> 
			rather than the <a href="features/editing_existing_window.html"><b>
WindowBuilder</b></a><b><a href="features/editing_existing_window.html"> Editor</a></b>. Open the file with the
		<a href="features/editing_existing_window.html"><b>WindowBuilder</b></a><b><a href="features/editing_existing_window.html"> Editor</a></b> and you will see both 
			the <b>Source</b> and <b>Design</b> tabs. Note that Eclipse will 
		only let you have a file open with one editor at a time, so you may need 
		to close any existing editor before opening it with the 
<a href="features/editing_existing_window.html"><b>WindowBuilder</b></a><b><a href="features/editing_existing_window.html"> Editor</a></b>.</p>
				<p>
<img border=0 width=252 height=70
src="features/images/source_design.png" v:shapes="_x0000_i1033"></p>
		<h2 style="font-weight: bold;"><a name="Exception"></a>What should I 
			do if I encounter an exception using Swing Designer?</h2>
		<p>If a newer Swing Designer build is available than the one you 
			are using, please download the newer build and try and reproduce the 
			problem. If the problem has been reported in the past, there is a 
			good chance that it has already been fixed. If the problem still 
			exists, you should send your Eclipse ".log" file (found in your 
			&lt;workspace&gt;/.metadata directory) as well as any relevant test cases 
			to support. 
		Including a test case that will 
			help us reproduce the problem is very important. The faster we can 
			reproduce the problem, the faster we can get you a fix. If we can't 
			reproduce a problem, there is little we can do to help you. </p>
		<p>Ideally, 
			the test case you send should be the same window you were editing 
			when the problem occurred (along with any supporting files needed to 
		compile it). If that is not possible (possibly because 
			you aren't allowed to send any code to a 3rd party), then you should 
			try to create a new, standalone test case that illustrates the same 
			problem. The best approach is to create a standalone test case by 
		removing all of the code that isn't relevant to the problem at hand 
		(e.g., keep deleting code until the problem goes away and then restore 
		that last code that was last deleted).</p>
		<h2 style="font-weight: bold;"><a name="ParsingError"></a>What should I do 
		if I encounter "Unknown Window Type (Parsing Error)"?</h2>
		<p>As suggested by the message, this is error is caused by a parsing 
		problem. It has nothing to do with licensing. Your Eclipse &quot;.log&quot; file 
		(found in your &lt;workspace&gt;/.metadata directory) should provide a hint as 
		to the cause of the parsing error. Send the log file as well as a test 
		case to support 
		(ideally the window you are trying to edit). Including a test case that will 
			help us reproduce the problem is very important. The faster we can 
			reproduce the problem, the faster we can get you a fix. If we can't 
			reproduce a problem, there is little we can do to help you. </p>
		<p>Ideally, 
			the test case you send should be the same window you were editing 
			when the problem occurred (along with any supporting files needed to 
		compile it). If that is not possible (possibly because 
			you aren't allowed to send any code to a 3rd party), then you should 
			try to create a new, standalone test case that illustrates the same 
			problem. The best approach is to create a standalone test case by 
		removing all of the code that isn't relevant to the problem at hand 
		(e.g., keep deleting code until the problem goes away and then restore 
		that last code that was last deleted).</p>
		<p>Refreshing and rebuilding your project using the Project &gt; Clean 
		command can often help as can cleaning your Eclipse &quot;configuration&quot; 
		directory.</p>
		<h2 style="font-weight: bold;"><a name="OutOfMemoryError"></a>What 
			should I do if I encounter an OutOfMemoryError using Swing Designer?</h2>
		<p>Make sure that you have Eclipse
			configured to use enough memory. 
			Begin by specifying the starting amount of memory (-vmargs -Xms###m)
      in your Eclipse startup command line (e.g., the
      target field within a Windows shortcut) or eclipse.ini file (in 
		your Eclipse root directory). If this is not specified,
      Eclipse's starting amount of memory is quite small (only 40 MB). You 
		should also specify the maximum amount of memory that Eclipse can 
		use (-vmargs -Xmx###m) and the maximum amount of perm space available (-vmargs -XX:MaxPermSize=###m).</p>
		<p>We typically recommend something like this (these setting are 
		independent of any of the startup settings that you might have in place):</p>
		<dl>
			<dd>-vmargs -XX:MaxPermSize=128m -Xms256m 
			-Xmx512m</dd>
		</dl>
		<p>An OutOfMemoryError is usually a side effect of something else, so 
		you should send your Eclipse &quot;.log&quot; file (found in your 
		&lt;workspace&gt;/.metadata directory) as well as any relevant test cases to 
		support. 
		</p>
		<p>You might try running Eclipse with the -debug command line 
		option. You can then press Ctrl+Break in the console to look at the 
		thread dump which may show where the system is locking up and where the 
		memory is going. Send that thread dump to support.</p>
		<h2 style="font-weight: bold;"><a name="NoSuchMethodError"></a><a name="NoClassDefFoundError"></a>What 
			should I do if I encounter an NoSuchMethodError or 
		NoClassDefFoundError using Swing Designer?</h2>
		<p>Start by checking your Eclipse ".log" file (found in your 
		&lt;workspace&gt;/.metadata directory). If the error references one of 
		your classes or methods, check that your classpath properly references 
		the class you are trying to use. Also check that your class is properly 
		compiled (no red <font color="#ff0000"><b>X</b></font>'s) and that a <b>
		.class</b> file exists in your projects <b>/bin</b>
directory. A mismatch between the JDK used to compile your code and the JVM used 
		to run Eclipse can also manifest itself as a <span style="font-weight: bold;">NoClassDefFoundError </span>
problem. For example, if you compile your code using JDK 1.5 or 1.6 and
then run your Eclipse using a 1.4 or 1.5 JVM, you can have this
problem. If the error refers to a custom widget, you should also
check that your component does not trigger an exception during its
initialization (which can manifest itself as a <span style="font-weight: bold;">NoClassDefFoundError</span>).&nbsp;Try <b>
		refreshing</b> and <b>cleaning</b> your project using the <b>Project &gt; 
		Clean...</b> or <b>Project &gt; Build Project</b> commands. If that does 
		not help, send a test case to support.</p>
		<p>If the error references a base Eclipse 
		method or class, this means that you have the wrong version of 
		Swing Designer 
		loaded for the version of Eclipse you are using. Swing Designer is 
		trying to access a method or class that simply does not exist in your Eclipse 
		distribution. Delete the Swing Designer feature and plugin directories 
		and then download and install the correct version of&nbsp; Swing 
		Designer for the version of Eclipse you are 
		using.</p>
		<h2 style="font-weight: bold;"><a name="UnsupportedClassVersionError"></a>What 
			should I do if I encounter an UnsupportedClassVersionError using 
		Swing Designer?</h2>
		<p>An UnsupportedClassVersionError is usually caused by attempting to 
		run code compiled against a later JRE with an IDE using an earlier JRE. 
		Typically, you will see this when trying to use a class (such as a 
		custom widget) that has been compiled against JDK 1.6 within a version 
		of Eclipse launched with JDK 1.5.</p>
		<p>Two solutions are possible: you may either recompile the class using 
		JDK 1.5, or you can tell Eclipse to run using JDK 1.6 by modifying its 
		startup parameters as follows (use your path to JDK 1.6 on your system):</p>
		<blockquote>
			<p>-vm C:\jdk1.6.0_21\bin\java.exe</p>
		</blockquote>
		<h2 style="font-weight: bold;"><a name="UnsatisfiedLinkError"></a>What should I do 
			if I encounter an UnsatisfiedLinkError when launching my SWT 
			application?</h2>
		<p>As stated in the product docs and tutorial, the 
			Eclipse SWT DLL (which can be found in the $ECLIPSE$\plugins\org.eclipse.swt.win32_x.x.x\os\win32\x86\ 
			directory or in the org.eclipse.swt.win32.win32.x86_3.x.x.jar 
		file) needs to be on your path. Placing it into your 
			windows/system32 directory is the easiest thing to do.</p>
		<p>For Linux, you need to locate the corresponding Eclipse 
		SWT *.so files contained in the SWT GTK plugin.</p>
		<h2 style="font-weight: bold;"><a name="InstantiationException"></a>What should I do 
			if I encounter an InstantiationException or other error using a custom widget?</h2>
		<p>An InstantiationException means that Swing Designer 
		could not create an instance of a particular class. The most common 
		reason for this is that the component is not a <a href="#CustomWidgets">valid custom widget</a>. In order to be a valid Swing widget, a class must be a valid 
		Java Bean and have a public, zero-argument constructor. SWT 
		widgets must have a public two-argument constructor with parent 
		and style bits as the two arguments. To fix the problem, add the missing 
		constructor. Note: the
Java Bean conventions (slightly modified for SWT) are important from a
GUI builder point of view as they establish a common, expected, and,
for the most part, self documenting API. If you create your own unique
constructors, your are, in effect, creating your own personal API which
makes it difficult for a GUI builder to reflectively interact with your
components. Generating code to a custom constructor API requires
knowledge of the API that generally is not provided by the component.
That requires hard coding knowledge of the component into the GUI
builder itself.</p>
		<p>Another possible cause for this exception is some other 
		failure in the initialization code of the component. A component may 
		rely on some runtime behavior that is not possible at design time (such 
		as accessing an application database or some other file). Runtime 
		specific behavior should be isolated (and stubbed out as necessary) by 
		wrappering the runtime specific code with a call to
		Beans.isDesignTime() which will answer true when the 
		component is loaded within Swing Designer and false at runtime.</p>
		<p>More detail about the use of custom widgets is available 
		in <a href="#CustomWidgets">this FAQ entry</a>.</p>
				<h2 style="font-weight: bold;"><a name="Linux"></a>How should 
				Swing Designer be configured to 
		work on Linux?</h2>
		<p>To use Swing Designer in Linux, we recommend that you use an 
		official JDK from Sun, as using the GPL version of the java is not recommended. 
		Here are some setup instructions for using Sun's java with Fedora Core and Debian. Note that 
		use of a non-Sun JDK can result in Eclipse locking up.<br>
		<br>
		Using Sun's Java with Fedora Core:</p>
		<ol>
			<li>Download and Unpack Sun's JDK .bin format.<br>
&nbsp;</li>
			<li>If you wish to use java on the command line or with other 
			programs besides eclipse add the following to your /etc/profile <br>
			<br>
			JAVA_HOME = &lt;path_to_jdk&gt;<br>
			PATH= $PATH:$JAVA_HOME/bin<br>
			Export JAVA_HOME PATH<br>
&nbsp;</li>
			<li>Install Sun's java as alternative<br>
			#/usr/sbin/alternatives -install /usr/bin/java java &lt;path_to_jdk&gt; 2<br>
&nbsp;</li>
			<li>Switch to the new alternative<br>
			#/usr/sbin/alternatives -config java<br>
			Select option 2<br>
&nbsp;</li>
			<li>Test <br>
			#/usr/sbin/alternatives -display java </li>
		</ol>
		<p>You should see java pointing to the Sun JDK.<br>
		<br>
		Using Sun's Java with Debian:</p>
		<ol>
			<li>Download Sun JDK in .bin format<br>
&nbsp;</li>
			<li>fakeroot make-jpkg &lt;jdk&gt;.bin<br>
			This creates a .deb package.<br>
&nbsp;</li>
			<li>sudo dpkg -i &lt;jdk&gt;.deb<br>
&nbsp;</li>
			<li>Test <br>
			#java -version.</li>
		</ol>
		<h2 style="font-weight: bold;">
		<a name="SuSELinux"></a>What should I do if I have problems running 
		under SuSE Linux?</h2>
		<p>If you have a problem running Swing Designer on Linux SuSE 
		10.3 such as Eclipse crashing and/or working incorrectly, or your my log 
		files contains something like &quot;xcb_xlib.c:42: xcb_xlib_lock: Assertion 
		`!c-&gt;xlib.lock'&quot; and/or &quot;/usr/lib/Eclipse: No such file or directory&quot;, 
		please try to add the following into you profile:</p>
		<blockquote>
			<p>LIBXCB_ALLOW_SLOPPY_LOCK=1<br>
			export LIBXCB_ALLOW_SLOPPY_LOCK. </p>
		</blockquote>
		<h2 style="font-weight: bold;">
		<a name="LinuxFlashing"></a>How can I prevent the preview window from 
		flashing under Linux using Metacity</h2>
		<p>In order to create the graphics that you see in the 
		design view, Swing Designer creates an off screen window containing the 
		various widgets and they takes a screen snapshot of them. This works 
		very well under Windows, OSX and some versions of Linux. Recent versions 
		of the Metacity window manager (more recent than 2.1.4), however, 
		have been modified/"fixed" to disallow windows to be opened off screen. 
		This forces the preview window to appear on screen leading to an 
		annoying flashing effect any time you make a change. The solution is to 
		disable the Metacity "fully_onscreen" constraint by patching the Metacity source code and rebuilding and installing the patched 
		version into your system. <br>
		<br>
		Here are the steps to follow:</p>
		<ol>
			<li>
			Download the Metacity source code from
			<a href="ftp://ftp.gnome.org/pub/gnome/sources/metacity/">
			ftp://ftp.gnome.org/pub/gnome/sources/metacity/</a></li>
			<li>
			Unpack the source code tarball into any temporary 
			directory.</li>
			<li>
			Chdir into this directory (with the unpacked code).</li>
			<li>
			Find window.c file and open it with your 
			favourite texteditor.</li>
			<li>
			Find a line with "window-&gt;require_fully_onscreen 
			= TRUE;"</li>
			<li>
			Replace it with "window-&gt;require_fully_onscreen = 
			FALSE;"</li>
			<li>
			Save the changes and close the editor.</li>
			<li>
			Open a terminal and chdir into the directory with 
			the source code (nice if you have already done this)</li>
			<li>
			Run "./configure".</li>
			<li>
			Run "make all".</li>
			<li>
			Make sure that steps 9 &amp; 10 completed without 
			errors.</li>
			<li>
			Become root (or execute the next command via "sudo" 
			depending on the Linux you are running)</li>
			<li>
			Run "make install" (or "sudo make install").</li>
			<li>
			Save your work and close any application you are 
			working with.</li>
			<li>
			End your session (or press Ctrl-Alt-Delete to 
			restart the x-server) and log in again.</li>
			<li>
			You are done!</li>
		</ol>
				</td>
			</tr>
		</table>









</body></html>

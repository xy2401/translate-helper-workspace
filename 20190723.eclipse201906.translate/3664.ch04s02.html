<html >
<head>
<title>Stdlib扩展</title>
<link href="book.css" rel="stylesheet" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.1">
<link rel="home" href="index.html" title="Xpand Documentation">
<link rel="up" href="stdlib_reference.html" title="Stdlib">
<link rel="prev" href="stdlib_reference.html" title="Stdlib">
<link rel="next" href="ch04s03.html" title="Stdlib workflow components">
</head>
<body bgcolor="white"  text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">Stdlib扩展</h1>
<div class="section" title="Stdlib扩展">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear:both">
<a name="N123D6"></a> Stdlib扩展</h2>
</div>
</div>
</div>
<p>本节介绍Stdlib提供的组件和扩展。我们使用快捷方式<span class="emphasis"><em>xpand.util.stdlib ...</em>
</span>为方便起见，在工作流配置中包<span class="package">org.eclipse.xtend.util.stdlib</span>中的组件类。</p>
<p>请注意，Stdlib的许多函数都在其Java实现中使用静态变量，因此值通过完整的MWE工作流保存。此外，由于静态实现，功能不是线程安全的。</p>
<div class="section" title="IO扩展">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N123E3"></a> IO扩展</h3>
</div>
</div>
</div>
<p>这是一个非常有用的库，用于将信息打印到日志记录工具。通过转换过程或复杂的表达式来确定对表达式进行精确计算是非常有价值的。</p>
<p>
<span class="emphasis"><em>扩展名：</em></span> <code class="classname">org::eclipse::xtend::util::stdlib::io</code>
</p>
<div class="section" title="debug（对象o）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N123EE"></a> debug（对象o）</h4>
</div>
</div>
</div>
<p>将具有DEBUG级别的对象记录到记录器。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>o  - 要转储的对象。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>对象o</p>
</div>
<div class="section" title="info（对象o）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N123FE"></a> info（对象o）</h4>
</div>
</div>
</div>
<p>将具有INFO级别的对象记录到记录器。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>o  - 要转储的对象。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>对象o</p>
</div>
<div class="section" title="错误（对象o）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1240E"></a>错误（对象o）</h4>
</div>
</div>
</div>
<p>将具有ERROR级别的对象记录到记录器。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>o  - 要转储的对象。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>对象o</p>
</div>
<div class="section" title="syserr（对象o）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1241E"></a> syserr（对象o）</h4>
</div>
</div>
</div>
<p>将对象打印到System.err。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>o  - 应打印的对象。允许<code class="code">null</code> 。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>对象o</p>
</div>
<div class="section" title="syserr（Object o，String prefix）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N12431"></a> syserr（Object o，String prefix）</h4>
</div>
</div>
</div>
<p>将对象打印到System.err。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>o  - 应打印的对象。允许<code class="code">null</code> 。</p>
</li>
<li class="listitem">
<p>prefix  - 消息的前缀字符串。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>对象o</p>
</div>
<div class="section" title="syserr（对象o）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N12447"></a> syserr（对象o）</h4>
</div>
</div>
</div>
<p>将对象打印到System.err。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>o  - 应打印的对象。允许<code class="code">null</code> 。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>对象o</p>
</div>
<div class="section" title="throwError（Object o）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1245A"></a> throwError（Object o）</h4>
</div>
</div>
</div>
<p>抛出IllegalStateMessage。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>o  - 异常消息。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>没有，因为抛出异常。</p>
</div>
<div class="section" title="String includeFile（String filePath，String encoding）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1246A"></a> String includeFile（String filePath，String encoding）</h4>
</div>
</div>
</div>
<p>读取文件的内容。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>filePath  - 文件的路径</p>
<p>encoding  - 用于读取的文件编码</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>文件内容。</p>
</div>
<div class="section" title="字符串includeFile（String filePath）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1247C"></a>字符串includeFile（String filePath）</h4>
</div>
</div>
</div>
<p>读取文件的内容。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>filePath  - 文件的路径</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>文件内容。</p>
</div>
<div class="section" title="例子">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1248C"></a>例子</h4>
</div>
</div>
</div>
<pre class="programlisting">import data; 
extension org.eclipse.xtend.util.stdlib::io; 
create DataModel this duplicate(DataModel s): 
  entity.addAll( s.entity.duplicate() ) -&gt; 
  setName(s.name); 
  
create Entity this duplicate(Entity old): 
  (old.name+" has "+old.reference.size+" references").info() -&gt; 
  old.reference.name.info() -&gt; 
        </pre>
<p>这导致控制台上的以下输出：</p>
<pre class="programlisting">922  INFO  - Person has 1 references 
923  INFO  - [autos] 
926  INFO  - Vehicle has 0 references 
926  INFO  - []
        </pre>
<p>当然IO扩展函数也可以在Xpand中使用，但是如果用于记录目的，你必须处理一个副作用：因为函数返回传递的对象（表达式的结果，在最简单的情况下只是一个字符串）和Xpand将表达式结果打印到打开的文件，消息将显示在控制台上，但也可以在结果文件中。这可能是你想要避免的，所以你可以使用一个小技巧：在调用日志函数之后使用链接运算符并让表达式的结果为空字符串：</p>
<pre class="programlisting">«EXTENSION org::eclipse::xtend::util::stdlib::io» 
... 
«DEFINE javaClass FOR Entity» 
  «REM»The following expression will dump the feature names without producing output 
  as side effect«ENDREM» 
  «features.name.info() -&gt; ""»</pre>
<p>这将在控制台上产生此输出：</p>
<pre class="programlisting">1122 INFO  IOExtensions       - [name, age, address] 
1740 INFO  IOExtensions       - [street, zip, city]</pre>
<p>每个函数都返回调用它们的对象，因此您可以构建链表达式。或者，换句话说，如果你有一些表达式</p>
<pre class="programlisting">element.x.y.z.select(t|t.someProp).a</pre>
<p>你总是可以在任何地方嵌入其中一个io功能</p>
<pre class="programlisting">element.x.<span class="emphasis">
<em>syserr()</em>
</span>.y.z.select(t|t.someProp.<span class="emphasis">
<em>info()</em>
</span>).a</pre>
</div>
<div class="section" title="控制日志级别">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N124AF"></a>控制日志级别</h4>
</div>
</div>
</div>
<p>您可能希望控制通过日志记录工具打印的消息的日志记录级别。具体配置方式取决于底层日志框架。Xpand使用Apache Commons Logging库，它可以调度到另一个日志框架，主要是Log4J。</p>
<p>要精确控制IO扩展的日志记录级别，您必须知道消息所记录的类别。通常使用使用记录器的类的类名。对于IO扩展，此类是<code class="classname">org.eclipse.xtend.util.stdlib.IOExtensions</code> 。</p>
<p>以下示例显示了一个Log4J配置文件，该文件将禁用低于警告的日志级别。只有在类路径的开头找到属性文件时，此示例才有效。确保在类路径上的任何其他Log4J配置之前找到该文件。该文件必须命名为<code class="filename">log4j.properties</code> 。</p>
<pre class="programlisting">log4j.appender.CONSOLE = org.apache.log4j.ConsoleAppender 
log4j.appender.CONSOLE.layout = org.apache.log4j.PatternLayout 
log4j.appender.CONSOLE.layout.ConversionPattern = %p %C{1} %m %n 
log4j.rootLogger = INFO, CONSOLE 
# suppress info messages from IOExtensions 
log4j.logger.org.eclipse.xtend.util.stdlib.IOExtensions=WARN, CONSOLE 
log4j.additivity.org.eclipse.xtend.util.stdlib.IOExtensions=false</pre>
</div>
</div>
<div class="section" title="柜台扩展">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N124C0"></a>柜台扩展</h3>
</div>
</div>
</div>
<p>有时需要在转换代码中包含计数器。计数器扩展可以初始化，操作和检索计数器。</p>
<p>
<span class="emphasis"><em>扩展名：</em></span> <code class="classname">org::eclipse:xtend:::util::stdlib::counter</code>
</p>
<div class="section" title="int counterInc（Object o）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N124CA"></a> int counterInc（Object o）</h4>
</div>
</div>
</div>
<p>增加一个计数器。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>o  - 此计数器的键。如果使用<code class="code">null</code>参数调用此函数，则使用匿名计数器。如果没有为密钥注册计数器，则将创建一个新的计数器实例并使用0初始化。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>递增的计数器。</p>
</div>
<div class="section" title="int counterDec（Object o）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N124DD"></a> int counterDec（Object o）</h4>
</div>
</div>
</div>
<p>减少一个柜台。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>o  - 此计数器的键。如果使用<code class="code">null</code>参数调用此函数，则使用匿名计数器。如果没有为密钥注册计数器，则将创建一个新的计数器实例并使用0初始化。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>递减的计数器。</p>
</div>
<div class="section" title="int counterReset（Object o）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N124F0"></a> int counterReset（Object o）</h4>
</div>
</div>
</div>
<p>重置计数器。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>o  - 此计数器的键。如果使用<code class="code">null</code>参数调用此函数，则使用匿名计数器。如果没有为密钥注册计数器，则将创建一个新的计数器实例并使用0初始化。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>总是0。</p>
</div>
<div class="section" title="int counterGet（Object o）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N12503"></a> int counterGet（Object o）</h4>
</div>
</div>
</div>
<p>检索计数器的当前状态。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>o  - 此计数器的键。如果使用<code class="code">null</code>参数调用此函数，则使用匿名计数器。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>当前计数器值。</p>
</div>
<div class="section" title="例">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N12516"></a>例</h4>
</div>
</div>
</div>
<pre class="programlisting">«DEFINE CounterExtensionsDemo FOR Object» 
«FILE "CounterExtensions.txt"» 
  First counter: 
  get         : «counterGet()» 
  inc         : «counterInc()» 
  inc         : «counterInc()» 
  inc         : «counterInc()» 
  dec         : «counterDec()» 
  Second (named) counter: 
  inc         : «counterInc("idx")» 
  inc         : «counterInc("idx")» 
  inc         : «counterInc("idx")» 
  reset       : «counterReset("idx")» 
  inc         : «counterInc("idx")» 
  First counter: 
  inc         : «counterInc()» 
  
«ENDFILE» 
«ENDDEFINE»</pre>
<p>此示例将创建以下输出：</p>
<pre class="programlisting">  First counter: 
  get         : 0 
  inc         : 1 
  inc         : 2 
  inc         : 3 
  dec         : 2 
  Second (named) counter: 
  inc         : 1 
  inc         : 2 
  inc         : 3 
  reset       : 0 
  inc         : 1 
  First counter: 
  inc         : 3 </pre>
</div>
</div>
<div class="section" title="属性扩展">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N12520"></a>属性扩展</h3>
</div>
</div>
</div>
<p>您可能希望从转换代码中的属性文件中指定配置值。属性扩展可以帮助您。在能够通过扩展功能访问属性之前，必须读取属性文件并存储其值。这是通过工作流组件<span class="emphasis"><em>PropertiesReader完成的</em></span> ，如下所述。</p>
<p>
<span class="emphasis"><em>扩展：</em></span> <code class="classname">org::eclipse::xtend::util::stdlib::properties</code>
</p>
<div class="section" title="String getProperty（String key）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1252E"></a> String getProperty（String key）</h4>
</div>
</div>
</div>
<p>检索配置属性。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">o</code> - 属性密钥</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>属性值，如果已定义，则<span class="emphasis"><em>返回</em></span> null。</p>
</div>
<div class="section" title="工作流程组件">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N12540"></a>工作流程组件</h4>
</div>
</div>
</div>
<p>工作流组件PropertiesReader用于加载属性文件。可以通过多次添加propertiesFile标记来配置多个属性文件。</p>
<div class="table">
<a name="N12545"></a>
<p class="title">
<b>表格1。工作流组件org.eclipse.xtend.util.stdlib。PropertiesReader</b>
</p>
<div class="table-contents">
<table cellspacing="0" cellpadding="10" summary="Workflow component
          org.eclipse.xtend.util.stdlib.PropertiesReader" style="border-collapse:collapse;border-top:0.5pt solid;border-bottom:0.5pt solid;border-left:0.5pt solid;border-right:0.5pt solid">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td style="border-right:2 solid #000000;border-bottom:2 solid #000000">属性</td>
<td style="border-right:2 solid #000000;border-bottom:2 solid #000000">类型</td>
<td style="border-right:2 solid #000000;border-bottom:2 solid #000000">强制性</td>
<td style="border-bottom:2 solid #000000">描述</td>
</tr>
<tr>
<td style="border-right:2 solid #000000">propertiesFile</td>
<td style="border-right:2 solid #000000">串</td>
<td style="border-right:2 solid #000000">是</td>
<td>要读取的属性文件</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
</div>
<div class="section" title="例">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1255D"></a>例</h4>
</div>
</div>
</div>
<p>工作流程配置：</p>
<pre class="programlisting">&lt;component class="org.eclipse.xtend.util.stdlib.PropertiesReader"&gt; 
  &lt;propertiesFile value="src/config1.properties"/&gt; 
  &lt;propertiesFile value="src/config2.properties"/&gt; 
&lt;/component&gt; </pre>
<p>
<code class="filename">config1.properties</code> ：</p>
<pre class="programlisting">shapes = box,polygon,ellipse,point</pre>
<p>扩展中的用法：</p>
<pre class="programlisting">extension org::eclipse::xtend::util::stdlib::properties;

cached List[String] SHAPES () : getProperty("shapes").split(",").trim();</pre>
</div>
</div>
<div class="section" title="元素属性扩展">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N1256E"></a>元素属性扩展</h3>
</div>
</div>
</div>
<p>这允许您临时将名称 - 值对与任何模型元素相关联。</p>
<p>
<span class="emphasis"><em>扩展：</em></span> <code class="classname">org::eclipse::xtend::util::stdlib::elementprops</code>
</p>
<p></p>
<div class="section" title="void setProperty（Object element，String name，Object value）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1257A"></a> void setProperty（Object element，String name，Object value）</h4>
</div>
</div>
</div>
<p>将名为<code class="code">name</code>的属性设置为值。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">element</code> - 模型元素</p>
</li>
<li class="listitem">
<p>
<code class="code">name</code> - 属性名称</p>
</li>
<li class="listitem">
<p>
<code class="code">element</code> - 属性值</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>没什么。</p>
</div>
<div class="section" title="Object getProperty（Object element，String name）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N12599"></a> Object getProperty（Object element，String name）</h4>
</div>
</div>
</div>
<p>从元素中检索动态属性。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">element</code> - 模型元素</p>
</li>
<li class="listitem">
<p>
<code class="code">name</code> - 属性名称</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>属性值。</p>
</div>
</div>
<div class="section" title="问题扩展">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N125B0"></a>问题扩展</h3>
</div>
</div>
</div>
<p>在模板代码中，无法直接访问工作流上下文的“问题”实例。问题扩展有助于在转换期间向“问题”实例报告警告和错误。</p>
<p>这不应该鼓励您使用约束检查，并且通常直接从转换中引发错误。但是，有时能够这样做是明智和有用的。</p>
<p>
<span class="emphasis"><em>扩展：</em></span> <code class="classname">org::eclipse::xtend::util::stdlib::issues</code>
</p>
<div class="section" title="字符串reportWarning（String message）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N125BC"></a>字符串reportWarning（String message）</h4>
</div>
</div>
</div>
<p>向工作流上下文报告警告消息。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">message</code> - 消息</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>消息。</p>
</div>
<div class="section" title="字符串reportWarning（Object object，String message）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N125CE"></a>字符串reportWarning（Object object，String message）</h4>
</div>
</div>
</div>
<p>向工作流上下文报告警告消息和上下文对象的限定名称。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">object</code> - 上下文对象</p>
</li>
<li class="listitem">
<p>
<code class="code">message</code> - 消息</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>消息。</p>
</div>
<div class="section" title="字符串reportError（字符串消息）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N125E5"></a>字符串reportError（字符串消息）</h4>
</div>
</div>
</div>
<p>向工作流上下文报告错误消息。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">message</code> - 消息</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>消息。</p>
</div>
<div class="section" title="字符串reportError（对象对象，字符串消息）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N125F7"></a>字符串reportError（对象对象，字符串消息）</h4>
</div>
</div>
</div>
<p>向工作流上下文报告错误消息和上下文对象的限定名称。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">object</code> - 上下文对象</p>
</li>
<li class="listitem">
<p>
<code class="code">message</code> - 消息</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>消息。</p>
</div>
<div class="section" title="工作流程组件">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1260E"></a>工作流程组件</h4>
</div>
</div>
</div>
<p>问题扩展需要工作流组件<code class="classname">org.eclipse.xtend.util.stdlib.ExtIssueReporter</code> 。此组件的目的是使工作流的“问题”实例可用于扩展。</p>
<p><code class="classname">ExtIssueReporter</code>组件没有任何属性。</p>
</div>
<div class="section" title="例">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1261B"></a>例</h4>
</div>
</div>
</div>
<p>工作流程配置：</p>
<pre class="programlisting">&lt;?xml version="1.0"?&gt; 
&lt;workflow&gt; 
  ... 
  &lt;component class="xpand.util.stdlib.ExtIssueReporter"/&gt;</pre>
<p>从Xtend使用：</p>
<pre class="programlisting">import metamodel; 
extension org::eclipse::xtend::util::stdlib::issues;

demo (Model this) : 
  issuesExtensionsDemo() 
  ; 

issuesExtensionsDemo () : 
  reportWarning("Reporting a warn message from Xtend to the workflow");</pre>
<p>控制台输出：</p>
<pre class="programlisting">INFO WorkflowRunner running workflow: workflow/generator.mwe 
... 
... 
INFO CompositeComponent ExtIssueReporter: setting up issue logging from 
   within .ext and .xpt files 
INFO WorkflowRunner workflow completed in 1101ms! 
WARN WorkflowRunner Reporting a warn message from Xtend to the workflow</pre>
</div>
</div>
<div class="section" title="命名扩展">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N1262A"></a>命名扩展</h3>
</div>
</div>
</div>
<p>命名扩展仅适用于EMF模型。这个有助于名称，限定名称和命名空间。限定名称定义为元素的包含层次结构的原始名称的seuqence，由点分隔（例如java.lang。串）。为了使其工作，模型元素应具有EString类型的name属性。 <sup>[ <a href="#ftn.N1262F" name="N1262F" class="footnote">9</a> ]</sup>
</p>
<p>
<span class="emphasis"><em>扩展名：</em></span> <code class="classname">org::eclipse::xtend::util::stdlib::naming
      </code>
</p>
<div class="section" title="String namespace（Object this）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N12637"></a> String namespace（Object this）</h4>
</div>
</div>
</div>
<p>返回命名空间，即限定名称减去元素本身的名称。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">this</code> - 一个模型元素</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>元素的限定名称空间名称。</p>
</div>
<div class="section" title="String qualifiedName（Object this）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N12649"></a> String qualifiedName（Object this）</h4>
</div>
</div>
</div>
<p>通过评估元素的包含层次结构，返回元素的限定名称（以点分隔）。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">this</code> - 一个模型元素</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>元素的限定名称。</p>
</div>
<div class="section" title="String loc（Object this）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1265B"></a> String loc（Object this）</h4>
</div>
</div>
</div>
<p>试图在模型中构建一个有用的元素描述;对错误报告非常有用。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">this</code> - 一个模型元素</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>有关元素的位置信息。</p>
</div>
<div class="section" title="对象findByName（集合候选者，字符串名称）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1266D"></a>对象findByName（集合候选者，字符串名称）</h4>
</div>
</div>
</div>
<p>在候选者中搜索具有特定名称的元素。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">candidates</code> - 模型元素的集合</p>
</li>
<li class="listitem">
<p>
<code class="code">name</code> - 搜索的元素名称</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>搜索的元素;如果候选集合中不包含具有该名称的元素，则<span class="emphasis"><em>返回</em></span> null。</p>
</div>
</div>
<div class="section" title="Globalvar扩展">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N12684"></a> Globalvar扩展</h3>
</div>
</div>
</div>
<p>有时您可能希望在转换过程中共享信息。一种替代方法是使用GLOBALVAR表达式，但这需要在工作流中配置变量。Globalvar扩展有助于在转换过程中存储和检索对象。</p>
<p>
<span class="emphasis"><em>扩展名：</em></span> <code class="classname">
      org::eclipse::xtend::util::stdlib::globalvar</code>
</p>
<div class="section" title="例">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1268E"></a>例</h4>
</div>
</div>
</div>
<p>在Xtend中的用法：</p>
<pre class="programlisting">import metamodel; 
extension org::eclipse::xtend::util::stdlib::io; 
extension org::eclipse::xtend::util::stdlib::globalvar;

demo (Model this) : 
  globalvarExtensionsDemo1() -&gt; 
  globalvarExtensionsDemo2() 
;

globalvarExtensionsDemo1 () : 
    "Storing global var...".info() -&gt; 
    storeGlobalVar("msg", "Xpand is cool stuff!"); 
    
globalvarExtensionsDemo2 () : 
    ("Getting message from global var: "+getGlobalVar("msg")).info();</pre>
<p>控制台输出：</p>
<pre class="programlisting">INFO IOExtensions Storing global var...
INFO IOExtensions Getting message from global var: Xpand is cool stuff!</pre>
<p>这是一个存储字符串的简单示例，但当然您可以通过这种方式存储任何表达式的结果。</p>
</div>
</div>
<div class="section" title="克隆扩展">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N1269B"></a>克隆扩展</h3>
</div>
</div>
</div>
<p>克隆实用程序可帮助您克隆模型元素及其所有子元素。<code class="code">clone(Object)</code>函数克隆单个对象及其子对象，而<code class="code">clone(List)</code>克隆元素列表。克隆的语义如下：</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>作为参数传入的对象是重复的</p>
</li>
<li class="listitem">
<p>通过包含引用引用的所有对象也是递归复制的</p>
</li>
<li class="listitem">
<p>属性的值是重复的</p>
</li>
<li class="listitem">
<p>在未克隆目标时复制对其他对象的非包含引用（在新对象中创建对原始的引用）</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>扩展名：</em></span> <code class="classname">org::eclipse::xtend::util::stdlib::cloning</code>
</p>
<div class="section" title="对象克隆（对象原始）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N126B9"></a>对象克隆（对象原始）</h4>
</div>
</div>
</div>
<p>克隆一个对象。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">original</code> - 应该克隆的对象。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>克隆的对象。</p>
</div>
<div class="section" title="列表克隆（列表l）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N126CB"></a>列表克隆（列表l）</h4>
</div>
</div>
</div>
<p>克隆对象列表。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">l</code> - 来源清单。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>克隆对象的列表。</p>
</div>
</div>
<div class="section" title="交叉引用扩展">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N126DD"></a>交叉引用扩展</h3>
</div>
</div>
</div>
<p>有时需要找到引用特定对象的对象。此扩展有助于解决此重复任务。此扩展名仅可用于基于EMF的模型。</p>
<p>
<span class="emphasis"><em>扩展名：</em></span> <code class="classname">org::eclipse::xtend::util::stdlib::crossref</code>
</p>
<div class="section" title="List [EObject] getReferencingObjects（EObject target）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N126E7"></a> List [EObject] getReferencingObjects（EObject target）</h4>
</div>
</div>
</div>
<p>检索引用给定对象的对象。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">target</code> - 目标对象。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>引用目标的对象列表。</p>
</div>
<div class="section" title="例">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N126F9"></a>例</h4>
</div>
</div>
</div>
<p>在Xtend中的用法：</p>
<pre class="programlisting">extension org::eclipse::xtend::util::stdlib::crossref; 
crossRefDemo (Model this) : 
    eAllContents.typeSelect(Datatype).dumpCrossReferences(); 
    
dumpCrossReferences (Datatype this) : 
    ("Number of cross references to datatype "+name+":" 
    + getReferencingObjects().size) 
    .info() 
    ;</pre>
<p>控制台输出：</p>
<pre class="programlisting">INFO IOExtensions Number of cross references to datatype Integer:1 
INFO IOExtensions Number of cross references to datatype String:4</pre>
</div>
</div>
<div class="section" title="UID扩展">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N12704"></a> UID扩展</h3>
</div>
</div>
</div>
<p>通常需要通过转换过程为对象创建和检索唯一标识符。UID扩展为此任务提供了一种简单的机制。唯一标识符根据当前系统时间加上内部计数器计算得出。因此，扩展仅保证标识符在一个工作流程执行中保持不变，但将通过不同的运行进行更改。如果您需要在每一代运行中保持相同的唯一标识符（例如，对于受保护的区域ID），那么您需要另一种机制。</p>
<p>如果要加载为<code class="classname">EObject</code>分配ID的模型（仅适用于基于EMF的模型），则<code class="methodname">xmlId()</code>函数将非常有用。特别是在使用UML2模型时，此函数将返回对象的唯一且不变的标识符。</p>
<p>
<span class="emphasis"><em>扩展名：</em></span> <code class="classname">org::eclipse::xtend::util::stdlib::uid</code>
</p>
<div class="section" title="缓存的字符串uid（对象o）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N12717"></a>缓存的字符串uid（对象o）</h4>
</div>
</div>
</div>
<p>检索对象的唯一标识符。首次访问时创建一个新的。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">o</code> - 模型元素或其他对象。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>此对象的UID</p>
</div>
<div class="section" title="字符串createUID（对象o）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N12729"></a>字符串createUID（对象o）</h4>
</div>
</div>
</div>
<p>为对象创建唯一标识符。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">o</code> - 模型元素或其他对象。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>此对象的新创建的UID。</p>
</div>
<div class="section" title="String xmlId（ecore :: EObject o）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="stdlib_uid_xmlid"></a> String xmlId（ecore :: EObject o）</h4>
</div>
</div>
</div>
<p>检索对象的标识符。必须从XMLResource读取该对象。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">o</code> - 一个对象。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>对象的id。如果未从XMLResource加载对象，则返回null。</p>
</div>
</div>
<div class="section" title="Mixin扩展">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N1274E"></a> Mixin扩展</h3>
</div>
</div>
</div>
<p>这些实用程序有助于mixin模型。Mixin模型通常是简单模型，可在变换的源模型中提供有关模型元素的其他信息。它们可以被视为注释。</p>
<p>这些实用程序期望mixin模型具有非常特定的结构：根元素，然后是任何子树，其中元素具有name属性。这是一个例子：</p>
<div class="figure">
<a name="N12755"></a>
<p class="title">
<b>图1。Mixin模型示例</b>
</p>
<div class="figure-contents">
<div class="screenshot">
<div class="mediaobject">
<img src="images/stdlib/mixinmodel.png" width="432" alt="Mixin模型示例">
</div>
</div>
</div>
</div>
<br class="figure-break">
<p>mixin元素是<code class="classname">ControllingServiceRefSpec</code>和<code class="classname">BundleSpec</code> 。它们由根元素<code class="classname">Cbd2OsgiMixin</code> 。该名称应包含注释引用的元素的限定名称。一旦模型设置如此，并使用工作流的GLOBALVAR工具进行转换，您就可以使用扩展功能。</p>
<p>扩展名：org :: eclipse :: xtend :: util :: stdlib :: mixin</p>
<div class="section" title="Object getMandatoryMixin（Object mixinModel，Object ctx，xpand2 :: Type t）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1276D"></a> Object getMandatoryMixin（Object mixinModel，Object ctx，xpand2 :: Type t）</h4>
</div>
</div>
</div>
<p>返回上下文对象的相应mixin元素; mixin必须是t类型，并且其name属性必须对应于上下文的限定名称。如果未找到，则引发工作流ERROR并返回null对象（因此您可以在其上调用其他操作而不会获得null评估错误）。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">mixinModel</code> -  mixin模型的根元素。</p>
</li>
<li class="listitem">
<p>
<code class="code">ctx</code> - 上下文对象。</p>
</li>
<li class="listitem">
<p>
<code class="code">t</code> -  mixin模型元素的类型。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>与ctx对应的mixin模型元素。</p>
</div>
<div class="section" title="Object getOptionalMixin（Object mixinModel，Object ctx，xpand2 :: Type t）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N12789"></a> Object getOptionalMixin（Object mixinModel，Object ctx，xpand2 :: Type t）</h4>
</div>
</div>
</div>
<p>与getMandatoryMixin（）相同，但如果未找到任何内容，则不会引发错误。</p>
</div>
</div>
<div class="section" title="跟踪扩展">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N1278E"></a>跟踪扩展</h3>
</div>
</div>
</div>
<p>跟踪扩展允许在模型转换期间创建跟踪路径。这是通过创建跟踪模型来完成的，该模型保存从源元素到目标元素的引用。必须将跟踪显式添加到转换代码中。</p>
<p>
<span class="emphasis"><em>扩展名：</em></span> <code class="classname">org::eclipse::xtend::util::stdlib::tracing</code>
</p>
<div class="section" title="Void createTrace（Object from，Object to，String kind，String backKind）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N12799"></a> Void createTrace（Object from，Object to，String kind，String backKind）</h4>
</div>
</div>
</div>
<p>在两个元素之间创建跟踪。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">from</code> - 来源元素。</p>
</li>
<li class="listitem">
<p>
<code class="code">to</code> - 目标元素。</p>
</li>
<li class="listitem">
<p>
<code class="code">kind</code> - 从源到目标的跟踪的名称。</p>
</li>
<li class="listitem">
<p>
<code class="code">backkind</code> - 从目标返回到源的跟踪的名称。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>没什么。</p>
</div>
<div class="section" title="Void createTrace（Object from，Object to，String kind）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N127BA"></a> Void createTrace（Object from，Object to，String kind）</h4>
</div>
</div>
</div>
<p>在两个元素之间创建跟踪。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">from</code> - 来源元素。</p>
</li>
<li class="listitem">
<p>
<code class="code">to</code> - 目标元素。</p>
</li>
<li class="listitem">
<p>
<code class="code">kind</code> - 从源到目标的跟踪的名称。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>没什么。</p>
</div>
<div class="section" title="Void clearTrace（）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N127D6"></a> Void clearTrace（）</h4>
</div>
</div>
</div>
<p>清除所有痕迹。</p>
<p>
<span class="emphasis"><em>参数：</em></span>无</p>
<p>
<span class="emphasis"><em>返回：</em></span>没什么。</p>
</div>
<div class="section" title="Object getSingleTraceTarget（Object from，String kind）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N127E3"></a> Object getSingleTraceTarget（Object from，String kind）</h4>
</div>
</div>
</div>
<p>找到跟踪的目标。如果找不到源元素到指定类型的目标的跟踪，则此函数将报告错误。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">from</code> - 来源元素。</p>
</li>
<li class="listitem">
<p>
<code class="code">kind</code> - 跟踪类型名称。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>该跟踪的目标元素。</p>
</div>
<div class="section" title="Boolean hasTrace（Object from，String kind）">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N127FA"></a> Boolean hasTrace（Object from，String kind）</h4>
</div>
</div>
</div>
<p>证明某些元素是否存在特定类型的痕迹。</p>
<p>
<span class="emphasis">
<em>参数：</em>
</span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
<code class="code">from</code> - 来源元素。</p>
</li>
<li class="listitem">
<p>
<code class="code">kind</code> - 跟踪类型名称。</p>
</li>
</ul>
</div>
<p>
<span class="emphasis"><em>返回：</em></span>如果元素存在该类型的跟踪，则<span class="emphasis"><em>返回</em></span> true。</p>
</div>
</div>
<div class="footnotes">
<br>
<hr align="left" width="100">
<div class="footnote">
<p>
<sup>[ <a href="#N1262F" name="ftn.N1262F" class="para">9</a> ]</sup> uml2ecore实用程序可以自动为每个元类添加这样的name属性。</p>
</div>
</div>
</div>
</body>
</html>
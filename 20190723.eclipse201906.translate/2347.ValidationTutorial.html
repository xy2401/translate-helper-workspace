<html >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>验证教程</title>
<link href="book.css" rel="stylesheet" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.1">
<link rel="home" href="index.html" title="OCL Documentation">
<link rel="up" href="Tutorials.html" title="Tutorials">
<link rel="prev" href="DebuggerTutorial.html" title="Debugger tutorial">
<link rel="next" href="OCLInterpreterTutorial.html" title="Working with Classic OCL">
</head>
<body bgcolor="white"  text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">验证教程</h1>
<div class="section" title="验证教程">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear:both">
<a name="ValidationTutorial"></a>验证教程</h2>
</div>
</div>
</div>
<p>本教程已针对Eclipse Mars更新：Eclipse 4.5，EMF 2.11，OCL 6.0。</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>一些截图可能会略微过时。</p>
</li>
</ul>
</div>
<p>标准EMF验证工具对于避免模型错误非常有用，并且在模型正确或至少接近正确时工作良好。在本教程中，我们将展示<a class="link" href="ValidityView.html" title="有效性观点（Luna中的新内容）">有效性视图</a>如何更好地了解哪些有效，哪些无效。
			</p>
<p>我们将展示如何</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>识别适用于特定模型元素的所有约束</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="circle">
<li class="listitem">
<p>显示约束文本</p>
</li>
<li class="listitem">
<p>显示验证状态</p>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>识别受特定约束约束的所有模型元素</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="circle">
<li class="listitem">
<p>显示约束文本</p>
</li>
<li class="listitem">
<p>显示验证状态</p>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>过滤显示的模型元素和约束</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="circle">
<li class="listitem">
<p>按名字</p>
</li>
<li class="listitem">
<p>按地位</p>
</li>
<li class="listitem">
<p>按型号</p>
</li>
<li class="listitem">
<p>通过元模型</p>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>为特定的模型元素和约束启动OCL调试器</p>
</li>
</ul>
</div>
<div class="section" title="加载完成OCL教程示例项目">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="LoadCompleteOCLTutorialExampleProject2"></a>加载完成OCL教程示例项目</h3>
</div>
</div>
</div>
<p>本教程的材料作为完整OCL示例项目的一部分提供，您可以通过使用Project Explorer的右键上下文菜单选择<span class="bold"><strong>New，</strong></span>然后<span class="bold"><strong>示例</strong></span>来加载。这应该给出<span class="bold"><strong>New Example</strong></span>对话框，您可以在其中选择OCL（OCL约束语言）插件和完整OCL教程。
				</p>
</div>
<div class="section" title="负载测试模型">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="LoadTestModel"></a>负载测试模型</h3>
</div>
</div>
</div>
<p>双击<span class="bold"><strong>model / XMITestFile.xmi</strong></span>打开模型并展开顶部条目以显示EPackage。
				</p>
<p>如果模型打开另一个编辑器，请关闭它，然后使用Sample Reflective Ecore Editor打开，方法是选择<span class="bold"><strong>model / Tutorial.ecore</strong></span> ，然后从上下文菜单中选择<span class="bold"><strong>Open With-&gt; Sample Reflective Ecore Model Editor</strong></span> 。
				</p>
<p>在编辑器中调用<span class="bold"><strong>OCL-&gt; Load Document</strong></span>来加载<span class="bold"><strong>model / ExtraEcoreValidation.ocl</strong></span>并再次加载<span class="bold"><strong>model / ExtraXMIValidation.ocl</strong></span>
				
</p>
<p>
					
</p>
<div class="mediaobject">
<img src="images/4600-validation-view-model.png"></div>
<p>
				
</p>
<p>您的源ResourceSet现在包含四个资源</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>XMITestFile.xmi模型</p>
</li>
<li class="listitem">
<p>EcoreTestFile.ecore元模型</p>
</li>
<li class="listitem">
<p>ExtraXMIValidation.ocl其他模型验证规则</p>
</li>
<li class="listitem">
<p>ExtraEcoreValidation.ocl其他元模型验证规则</p>
</li>
</ul>
</div>
</div>
<div class="section" title="EMF验证">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="EMFValidation"></a> EMF验证</h3>
</div>
</div>
</div>
<p>选择<span class="bold"><strong>XMITestFile.xmi</strong></span>并从上下文菜单中调用<span class="bold"><strong>Validate</strong></span> 。单击“ <span class="bold"><strong>确定”</strong></span>关闭。
				</p>
<p>
					
</p>
<div class="mediaobject">
<img src="images/4600-validation-view-model-errors.png"></div>
<p>
				
</p>
<p>选择<span class="bold"><strong>EcoreTestFile.ecore</strong></span>并从上下文菜单中调用<span class="bold"><strong>Validate</strong></span> 。单击“ <span class="bold"><strong>确定”</strong></span>关闭。
				</p>
<p>
					
</p>
<div class="mediaobject">
<img src="images/4600-validation-view-metamodel-errors.png"></div>
<p>
				
</p>
<p>上述结果清楚地显示了问题，但不一定是所有问题，也没有显示实际完成的内容。有时，一旦报告错误，模型元素的验证就会过早终止。在其他情况下，某些约束不会运行，因此不会检测到相应的错误。</p>
<p>当一切运行良好时，上述限制不是问题，但是当您对正在验证的内容存在误解时，糟糕的一天会变得更糟。</p>
<div class="section" title="有效性查看验证">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="ValidityViewValidation"></a>有效性查看验证</h4>
</div>
</div>
</div>
<p>从编辑器上下文菜单中选择<span class="bold"><strong>OCL-&gt;显示有效性视图</strong></span> 。
					</p>
<p>左侧窗格以与Sample Reflective Ecore Editor类似的方式显示根模型元素。</p>
<p>右侧窗格显示根元模型约束源。</p>
<p>
						
</p>
<div class="mediaobject">
<img src="images/4600-validation-view-roots.png"></div>
<p>
					
</p>
<p>每个可以使用每行开头的控件或工具栏中更一般的控件进行扩展。</p>
<p>重要提示：单击“有效性模型”工具栏中的图钉图标以停止“有效性视图”追踪鼠标选择。</p>
<p>现在，您可以通过单击主验证视图工具栏中的绿色“运行”图标来获取更详细的验证结果。</p>
<p>
						
</p>
<div class="mediaobject">
<img src="images/4600-validation-view-root-results.png"></div>
<p>
					
</p>
<p>使用悬停文本查看已将多少验证四舍五入到每个根显示中。</p>
</div>
<div class="section" title="按根模型过滤">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="FilteringbyRootModels"></a>按根模型过滤</h4>
</div>
</div>
</div>
<p>总共有34个结果，这比我们想要查看的结果还要多，即使对于这个非常小的模型也是如此。</p>
<p><span class="bold"><strong>http://www.eclipse.org/emf/2002/Ecore</strong></span>根约束中的<span class="bold"><strong>ecore</strong></span>正在贡献30个成功而没有问题，因此我们通过取消选中它之前的启用复选框来忽略它。
					</p>
<p>该模型非常简单，现在我们可以完全扩展它。单击+展开图标。</p>
<p>
						
</p>
<div class="mediaobject">
<img src="images/4600-validation-view-some-results.png"></div>
<p>
					
</p>
<p>在左侧窗格中，黑色文本标签显示模型元素的层次结构。在蓝色斜体文本中的叶子是适用于模型元素的约束。</p>
<p>在右侧窗格中，蓝色斜体标签显示约束的层次结构。在黑色文本中的叶子是受约束的模型元素。</p>
<p>您可以将鼠标悬停在约束上以查看详细信息，并调用<span class="bold"><strong>“在编辑器中显示”</strong></span>以导航到它们。
					</p>
</div>
<div class="section" title="按状态过滤">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="FilteringbyStatus"></a>按状态过滤</h4>
</div>
</div>
</div>
<p>许多成功通常都是有限的兴趣，所以我们可以通过调用主过验证工具栏右侧的过滤下拉<span class="bold"><strong>显示所有错误</strong></span>来集中于错误。
					</p>
<p>
						
</p>
<div class="mediaobject">
<img src="images/4600-validation-view-error-results.png"></div>
<p>
					
</p>
<p>找到感兴趣的错误后，我们可以在上下文中看到它。</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>在Constraints窗格中选择<span class="bold"><strong>Bad :: BadClass :: uncachedDerived</strong></span>错误</p>
</li>
<li class="listitem">
<p>使用“过滤”下拉列表删除“ <span class="bold"><strong>显示所有错误”</strong></span>过滤</p>
</li>
<li class="listitem">
<p>单击“模型约束”窗格工具栏中的勾选图标，启用所有约束的视图。</p>
</li>
</ul>
</div>
<p>
						
</p>
<div class="mediaobject">
<img src="images/4600-validation-view-results-context.png"></div>
<p>
					
</p>
<p>这表明约束被验证五次，一次错误，两次警告和两次成功。</p>
<p>双击错误的子约束使约束在右侧窗格中可见，表明约束仅应用于此一个模型元素。</p>
</div>
<div class="section" title="调试约束">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="Debuggingconstraints"></a>调试约束</h4>
</div>
</div>
</div>
<p>也许是时候进行一些调试了。选择模型元素下面的叶子约束，或约束下面的叶子元素，并调用<span class="bold"><strong>Debug Single Enabled Selection</strong></span>以启动OCL调试器以逐步解决有问题的模型元素上的有问题的约束。（如果调试器透视图未自动打开，则显式选择它。）
					</p>
<p>调试<a class="link" href="DebuggerTutorial.html" title="调试器教程">器教程中</a>描述了OCL调试器的使用。
					</p>
<p>
						
</p>
<div class="mediaobject">
<img src="images/4600-validation-view-debugger.png"></div>
<p>
					
</p>
</div>
</div>
</div>
</body>
</html>

<html dir="ltr">
<head>
    <link rel="stylesheet" type="text/css" href="../css/style.css"></link>
    <link rel="stylesheet" type="text/css" href="../css/nn.css"></link>
	<title>OTDT 2.2  - 新的和值得注意的</title>
</head>
<body dir="ltr">
<h1>OTDT 2.2  - 新的和值得注意的</h1>
<div class="navigation">此页面上： <!--a href="#metrics">&bull; Metrics Plug-in</a--> <!--a href="#configuration">&bull; Configuration</a--> <a href="#views">•视图/对话框</a> <!--a href="#assist">&bull; Content Assist</a--> <a href="#refactor">•重构</a> <!--a href="#formatting">&bull; Formatting</a--> <!--a href="#debug">&bull; Run/Debug</a--> <a href="#language">•语言</a> <!--a href="#api">&bull; API</a--> <!--a href="#compiler">&bull; Compiler</a--> <!--a href="#otre">&bull; Runtime</a--> <!--a href="#otequinox">&bull; OT/Equinox</a--> <!--a href="#releng">&bull; Release Engineering</a-->  
</div>
<table cellpadding="10" cellspacing="0" width="100%">
  <colgroup>
  <col width="20%">
  <col width="80%">
  </colgroup>
  <tbody>
<td><!--
  <tr><td colspan="2" id="NAME"><h2>HEADING</h2></td></tr>
  <tr>
    <td><p align="right"><b>DESC</b><br>
        <span class="since">since&nbsp;0.7.1</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/308029">308029</a></p></td>
    <td><p>
    		
    	</p>
    	<p><img alt="TEXT" src="../images/screenshots/NN07/.png"></p>
    	<p></p>
    </td>
  </tr>
  <div class="listbox"><div class="listing"><pre><code class="keyword">public team class</code> <font color="blue">MyTeam</font> {
}</pre></div></div>
-->
  <tr></tr></td><td colspan="2" id="views"><h2>视图和对话框</h2></td>
  <tr>
    <td><p align="right"><b>结构中的OT元素比较</b><br>
        <span class="since">从2.2开始</span><br>
        <a class="buglink" title="[比较]显示结构比较中的callin / callout元素" href="https://bugs.eclipse.org/408460">408460</a></p></td>
    <td>
    	<p>对象团队元素现在可以在任何比较编辑器的结构比较中正确显示。</p>
    	<img src="../images/screenshots/NN22/ot-elements-in-structure-compare.png">
    </td>
  </tr>
<td><!--
  <tr><td colspan="2" id="assist"><h2>Content assist</h2></td></tr>
  <tr>
    <td><p align="right"><b>HEADING</b><br>
        <span class="since">since&nbsp;2.1M6</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/301314">301314</a></p></td>
    <td><p>PARA</p>
    </td>
  </tr>
  <tr><td colspan="2" id="formatting"><h2>Formatting</h2></td></tr>
  <tr>
    <td><p align="right"><b>HEADING</b><br>
        <span class="since">since&nbsp;2.1M6</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/301314">301314</a></p></td>
    <td><p>PARA</p>
    </td>
  </tr>
-->
  <tr></tr></td><td colspan="2" id="refactor"><h2>重构</h2></td>
  <tr>
    <td><p align="right"><b>上拉标注绑定</b><br>
        <span class="since">从2.2M1开始</span><br>
        <a class="buglink" title="[重构] pull-up重构无法处理callout绑定" href="https://bugs.eclipse.org/386587">386587</a><br>
        <a class="buglink" title="[重构]上拉应该区分可以是上拉与抽象decl的标注。" href="https://bugs.eclipse.org/386814">386814</a></p></td>
    <td><p>上拉重构已经变得更加智能，因此它也可以正确地处理callout方法绑定。</p>
    	<p>标注绑定可以这样提取，也可以在超级角色中创建相应的抽象方法。</p>
    	<p>在向导中选择上述策略时，仅当超级角色具有兼容的<code class="keyword">playedBy</code>绑定时才会接受上拉。</p>
    	<p>在提取调用标注的方法时，这一点特别有趣：</p>
    	<p><b><u>拉起：</u></b></p>
    	<p></p><div style="position:relative"><div class="listbox" style="width:45%;margin-right:2px;margin-bottom:30px;float:left"><div class="listing"><pre><code class="keyword">public team class</code> T { <code class="keyword">protected class</code> R0 <code class="keyword">playedBy</code> B {} <code class="keyword">protected class</code> R1 <code class="keyword">extends</code> R0 { <code class="keyword">void</code> foo（） - &gt; <code class="keyword">void</code> bar（）; <code class="keyword">void</code> test（）{foo（）; }}}</pre></div></div><div style="margin-top:80px;float:left">=&gt;</div><div class="listbox" style="width:45%;margin-right:2px;float:left"><div class="listing"><pre><code class="keyword">public team class</code> T { <code class="keyword">protected class</code> R0 <code class="keyword">playedBy</code> B { <code class="keyword">void</code> foo（） - &gt; <code class="keyword">void</code> bar（）; <code class="keyword">void</code> test（）{foo（）; <code class="keyword">protected class</code> R1 <code class="keyword">extends</code> R0 {}}</pre></div></div></div>
    	<p style="clear:both"><b><u>声明摘要：</u></b></p>
    	<p></p><div style="position:relative"><div class="listbox" style="width:45%;margin-right:2px;margin-bottom:30px;float:left"><div class="listing"><pre><code class="keyword">public team class</code> T { <code class="keyword">protected class</code> R0 {} <code class="keyword">protected class</code> R1 <code class="keyword">extends</code> R0 <code class="keyword">playedBy</code> B { <code class="keyword">void</code> foo（） - &gt; <code class="keyword">void</code> bar（）; <code class="keyword">void</code> test（）{foo（）; }}}</pre></div></div><div style="margin-top:80px;float:left">=&gt;</div><div class="listbox" style="width:45%;margin-right:2px;float:left"><div class="listing"><pre><code class="keyword">public team class</code> T { <code class="keyword">protected abstract class</code> R0 { <code class="keyword">abstract void</code> foo（）; <code class="keyword">void</code> test（）{foo（）; <code class="keyword">protected class</code> R1 <code class="keyword">extends</code> R0 <code class="keyword">playedBy</code> B { <code class="keyword">void</code> foo（） - &gt; <code class="keyword">void</code> bar（）; }}</pre></div></div></div>
	<p style="clear:both">在后一个示例中，您可以看到<code>test()</code>可以成功提取，尽管超级角色<code>R0</code>没有<code>foo()</code>实现。
	</p>
    </td>
  </tr>
  <tr>
    <td><p align="right"><b>移至角色文件</b><br>
        <span class="since">从2.2M7开始</span><br>
        <a class="buglink" title="[重构]将内联角色更改为角色文件，反之亦然" href="https://bugs.eclipse.org/382186">382186</a></p></td>
    <td><p>添加了一个新的重构以将内联角色移动到新的角色文件（参见<a class="otjldlink" href="http://www.objectteams.org/def/1.3/s1.html#s1.2.5">OTJLD§1.2.5</a> ）。</p>
    	<p>当具有内联角色的团队增长到可维护性缺乏分解的大小时，这种重构是相关的。由于团队通常只从少数几个小角色开始，因此这个问题很自然只会在演变过程中出现。使用这种新的重构重新组织文件结构是这些问题的自然答案。</p>
    	<p>根据定义，这种重构不会改变程序的语义。重构还考虑以下项目：</p>
    	<ul>
    	<li>如有必要，创建表示团队包的文件夹。</li>
    	<li>将<code>@role</code> javadoc标记插入到团队类中。这用作逻辑上包含在团队中的角色文件的索引，从而便于导航（F3）并在增量编译期间帮助编译器。</li>
    	<li>尝试在角色类之前和之后识别可能属于角色类的注释，因此也应该将其移动到新文件中。</li>
    	</ul>
    	<p>通过<b>Refactor</b>菜单或上下文菜单调用<b>重构</b>作为<b>Move to Role File</b> 。无需进一步输入。</p>
    </td>
  </tr>
  <tr><td colspan="2" id="language"><h2>语言</h2></td></tr>
  <tr>
    <td><p align="right"><b>Callin to Constructor</b><br>
        <span class="since">从2.2开始</span><br>
        <a class="buglink" title="[编译] [otre] OT / J：支持callin-interception的构造函数调用" href="https://bugs.eclipse.org/316616">316616</a></p></td>
    <td>
    	<p>现在可以定义一个callin-after绑定到角色基类的构造函数：</p>
    	<p></p><div class="listbox" style="margin-right:2px;float:left"><div class="listing"><pre><code class="keyword">class</code> SomeBase {SomeBase（）{ <em class="comment">// ... body</em> ignored}} <code class="keyword">public team class</code> T { <code class="keyword">protected class</code> R <code class="keyword">playedBy</code> SomeBase { <code class="keyword">void</code> test（） <code class="keyword">&lt;- after</code> SomeBase（）之后; <code class="keyword">void</code> test（）{ <em class="comment">// ... body ignored</em> }}}</pre></div></div>
	<p style="clear:both">在拦截角色方法内，可以假设基本实例被完全初始化，因此角色是完全可操作的，例如，在调用标注绑定方法方面。出于这些原因，构造函数不允许使用<code class="keyword">before</code>和<code class="keyword">replace</code>绑定：基本实例不可访问，因此此时无法创建角色。
	</p>
    </td>
  </tr>
<td><!--

  <tr><td colspan="2" id="debug"><h2>Run / Debug</h2></td></tr>
  <tr>
    <td><p align="right"><b>HEADING</b><br>
        <span class="since">since&nbsp;2.1M6</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/301314">301314</a></p></td>
    <td><p>PARA</p>
    </td>
  </tr>

  <tr><td colspan="2" id="api"><h2>API</h2></td></tr>
  <tr>
    <td><p align="right"><b>HEADING</b><br>
        <span class="since">since&nbsp;2.1M6</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/301314">301314</a></p></td>
    <td><p>PARA</p>
    </td>
  </tr>

  <tr><td colspan="2" id="compiler"><h2>Compiler</h2></td></tr>
  <tr>
    <td><p align="right"><b>HEADING</b><br>
        <span class="since">since&nbsp;2.1M6</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/301314">301314</a></p></td>
    <td><p>PARA</p>
    </td>
  </tr>


  <tr><td colspan="2" id="otre"><h2>Object Teams Runtime Environment</h2></td></tr>
  <tr>
    <td><p align="right"><b>HEADING</b><br>
        <span class="since">since&nbsp;2.1M6</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/301314">301314</a></p></td>
    <td><p>PARA</p>
    </td>
  </tr>
  
  <tr><td colspan="2" id="releng"><h2>Release Engineering</h2></td></tr>
  <tr>
    <td><p align="right"><b>HEADING</b><br>
        <span class="since">since&nbsp;2.1M6</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/301314">301314</a></p></td>
    <td><p>PARA</p>
    </td>
  </tr>
-->  
</td></tbody></table>
</body>
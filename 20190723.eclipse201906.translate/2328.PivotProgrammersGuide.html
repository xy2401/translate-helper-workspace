<html dir="ltr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
<title>Unified或Pivot程序员指南</title>
<link href="book.css" rel="stylesheet" type="text/css"></link>
<meta name="generator" content="DocBook XSL Stylesheets V1.75.1"></meta>
<link rel="home" href="index.html" title="OCL Documentation"></link>
<link rel="up" href="index.html" title="OCL Documentation"></link>
<link rel="prev" href="Standalone.html" title="Ecore/UML Standalone Configuration"></link>
<link rel="next" href="PivotEvaluator.html" title="The Pivot Evaluator"></link>
</head>
<body bgcolor="white" dir="ltr" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">Unified或Pivot程序员指南</h1>
<div class="chapter" title="Unified或Pivot程序员指南">
<div class="titlepage">
<div>
<div>
<h2 class="title">
<a name="PivotProgrammersGuide"></a> Unified或Pivot程序员指南</h2>
</div>
</div>
</div>
<div class="toc">
<dl>
<dt>
<span class="section"><a href="PivotProgrammersGuide.html#Validators">验证器</a></span>
</dt>
<dt>
<span class="section"><a href="PivotEvaluator.html">枢轴评估员</a></span>
</dt>
<dt>
<span class="section"><a href="PivotStandalone.html">Pivot独立配置</a></span>
</dt>
<dt>
<span class="section"><a href="PivotThreadSafety.html">枢轴螺纹安全</a></span>
</dt>
<dt>
<span class="section"><a href="PivotParsingConstraints.html">解析约束和查询</a></span>
</dt>
<dt>
<span class="section"><a href="PivotEvaluatingConstraints.html">评估约束和查询</a></span>
</dt>
<dt>
<span class="section"><a href="PivotParsingDocuments.html">解析OCL文档</a></span>
</dt>
<dt>
<span class="section"><a href="PivotMetamodels.html">OCL与元模型的关系</a></span>
</dt>
<dt>
<span class="section"><a href="Pivot-Ids.html">IDS</a></span>
</dt>
</dl>
</div>
<p>Unified或Pivot程序员指南描述了可以从Java程序使用Pivot绑定Eclipse OCL的方法。</p>
<p>Pivot绑定首次作为3.1.0（Indigo）中的示例质量原型提供。Pivot结合成为6.0.0（Mars）中的首选结合。旧的Ecore和UML绑定在单独的<a class="link" href="ProgrammersGuide.html" title="经典Ecore / UML程序员指南">Ecore / UML程序员指南中描述</a> 。
		</p>
<p>OCL解析器/解释器为基于EMF的元模型和模型提供了<a class="ulink" href="http://www.omg.org/spec/OCL" target="_new">对象约束语言2.4</a>规范的实现。它提供OCL约束和查询解析和评估，基于模型的验证，并为文本编辑器中的内容辅助提供基础结构。
		</p>
<p>当前版本支持以下功能：</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>分类器不变约束</p>
</li>
<li class="listitem">
<p>操作前提条件和后置条件约束和身体状况</p>
</li>
<li class="listitem">
<p>属性约束（初始值和派生）</p>
</li>
<li class="listitem">
<p>属性和操作定义（def：表达式）</p>
</li>
<li class="listitem">
<p>包上下文声明</p>
</li>
<li class="listitem">
<p>基本价值观和类型</p>
</li>
<li class="listitem">
<p>集合类型</p>
</li>
<li class="listitem">
<p>属性和关联的导航结束</p>
</li>
<li class="listitem">
<p>操作调用</p>
</li>
<li class="listitem">
<p>迭代表达式（所有标准迭代器）</p>
</li>
<li class="listitem">
<p>让表达</p>
</li>
<li class="listitem">
<p>如果表达</p>
</li>
<li class="listitem">
<p>元组</p>
</li>
<li class="listitem">
<p>消息表达式，包括未指定的值</p>
</li>
<li class="listitem">
<p>OCL预定义的操作：allInstances（），oclIsKindOf（），oclIsTypeOf（），oclAsType（），oclIsNew（）</p>
</li>
<li class="listitem">
<p>非法名称的转义语法：类型，操作，属性等与OCL保留字对应的名称可以使用前导下划线（'_'）以标准方式转义。此外，包含空格或制表符的名称可以通过用双引号括起来进行转义（'“';这是非标准的）。例如， <code class="code">self.ownedRule-&gt;forAll(c : Constraint | c._context = self)</code>
				
</p>
</li>
</ul>
</div>
<p>解析器支持上述结构进行解析和评估，但oclIsNew（）操作和消息表达式除外。Ecore和UML模型都支持以上所有功能。UML默认支持以下内容（解析和评估）：</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>不可导航关联的导航结束（包括该关联拥有的那些）</p>
</li>
<li class="listitem">
<p>合格的协会结束导航</p>
</li>
<li class="listitem">
<p>导航到关联类，包括源限定符</p>
</li>
<li class="listitem">
<p>OCL预定义的操作：oclIsInState（）</p>
</li>
</ul>
</div>
<p>除OCL规范外，还提供以下功能：</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>字符串大小写转换操作：toUpper（），toLower（）</p>
</li>
<li class="listitem">
<p>支持比较（&lt;，&lt;=等）和排序符合类型的任何java <code class="code">Comparable</code></p>
</li>
<li class="listitem">
<p>关联的传递闭包：closure（expr：OCLExpression）迭代器</p>
</li>
<li class="listitem">
<p>使用<code class="code">Property.oppositeRoleName</code>注释在前向引用上使用源<code class="code">http://schema.omg.org/spec/MOF/2.0/emof.xml</code>导出Ecore模型中指定的引用的“隐藏”对立，生成<code class="code">OppositePropertyCallExp</code>表达式</p>
</li>
</ul>
</div>
<p>OCL实现在插件中定义，以便在Eclipse中进行部署，但与EMF的情况一样，它也可以单独使用。插件因此被分区：</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>
					
<code class="code">org.eclipse.ocl.domain</code> ：中性的Pivot模型接口。
				</p>
</li>
<li class="listitem">
<p>
					
<code class="code">org.eclipse.ocl.pivot</code> ：中立的Pivot模型和评估者。
				</p>
</li>
<li class="listitem">
<p>
					
<code class="code">org.eclipse.ocl.library</code> ：可扩展的OCL标准库。
				</p>
</li>
<li class="listitem">
<p>
					
<code class="code">org.eclipse.ocl.examples.codegen</code> ：OCL到Java代码生成器。
				</p>
</li>
<li class="listitem">
<p>
					
<code class="code">org.eclipse.ocl.examples.debug...</code> ：可扩展的调试器。
				</p>
</li>
<li class="listitem">
<p>
					
<code class="code">org.eclipse.ocl.examples.validity</code> ：验证视图。
				</p>
</li>
<li class="listitem">
<p>
					
<code class="code">org.eclipse.ocl.examples.xtext...</code> ：Xtext编辑器。
				</p>
</li>
</ul>
</div>
<div class="section" title="验证器">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear:both">
<a name="Validators"></a>验证器</h2>
</div>
</div>
</div>
<p>使用Pivot元模型时，有两个专用验证器可用于支持将OCL集成到更大的Ecore环境中。</p>
<div class="section" title="OCLinEcoreEObjectValidator">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="OCLinEcoreEObjectValidator"></a> OCLinEcoreEObjectValidator</h3>
</div>
</div>
</div>
<p>不幸的是，在Indigo版本中，EMF不支持此自定义，因此必须通过显式使用知道ValidationDelegateExtension扩展API的EValidator来激活。这可以通过使用OCLinEcoreEObjectValidator获得，您可以通过以下方式全局安装：</p>
<div class="literallayout">
<p>
<code class="code">EValidator。注册。INSTANCE.put（null，new OCLinEcoreEObjectValidator（））;<br>

</code>
</p>
</div>
<p></p>
<p>或者更有选择地通过调整EMF生成的Validator类的继承（对于公司的模型）：</p>
<div class="literallayout">
<p>
<code class="code">import org.eclipse.emf.ecore.util。EObjectValidator;<br>

<br>/ **<br>* &lt;！ -  begin-user-doc  - &gt;<br>*模型的&lt;b&gt;验证器&lt;/ b&gt;。<br>* &lt;！ -  end-user-doc  - &gt;<br>* @see公司。CompanyPackage<br>* /<br>公共类CompanyValidator扩展EObjectValidator {<br>

</code>
</p>
</div>
<p></p>
<p>至</p>
<div class="literallayout">
<p>
<code class="code">import org.eclipse.ocl.xtext.oclinecore.validation。OCLinEcoreEObjectValidator;<br>

<br>/ **<br>* &lt;！ -  begin-user-doc  - &gt;<br>*模型的&lt;b&gt;验证器&lt;/ b&gt;。<br>* &lt;！ -  end-user-doc  - &gt;<br>* @see公司。CompanyPackage<br>* @generated没有<br>* /<br>公共类CompanyValidator扩展OCLinEcoreEObjectValidator {<br>

</code>
</p>
</div>
<p></p>
<p>注意<span class="bold"><strong>@generated not</strong></span>表示类接口是手动定义的。不要使用<span class="bold"><strong>@generated NOT，</strong></span>因为它表示整个类是手动定义的。
				</p>
</div>
<div class="section" title="CompleteOCLEObjectValidator">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="CompleteOCLEObjectValidator"></a> CompleteOCLEObjectValidator</h3>
</div>
</div>
</div>
<p>CompleteOCLEObjectValidator用于启用Complete OCL文档以参与Xtext编辑器的验证处理。</p>
<p>用于将完整OCL和Ecore合并为中间数据库，然后将数据透视表迁移回Ecore的API是实验性的。</p>
</div>
</div>
</div>
</body>
</html>

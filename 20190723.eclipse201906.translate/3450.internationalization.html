<html dir="ltr">

<head>
<title>国际化（i18n）/本地化</title>
<link href="../../book.css" rel="stylesheet" type="text/css"></link>
</head>

<body dir="ltr">

<h1>国际化（i18n）/本地化</h1>

<table border="0" cellpadding="0" cellspacing="0" width="800">
  <tr>
    <td>
    <p>该工具具有强大的国际化（i18n）支持。它可以外部化组件字符串，为多种语言创建和管理资源包，在运行中切换区域设置以及在上下文中编辑已翻译的字符串。</p>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
		<tr>
			<td valign="top">
			<img border="0" src="images/nls_package_explorer1.png" align="top"></td>
			<td valign="top" width="10"></td>
			<td valign="top">编辑器的国际化功能围绕<b><a href="../userinterface/toolbar.html">工具栏</a></b>上的两个项目 - <b>Externalize Strings</b>按钮<img src="../userinterface/images/globe3.png" alt="" width="16" height="16">和下拉<b>区域设置</b>列表（列出为当前窗口定义的任何区域设置）。
              <blockquote>
				<p>
      <img src="../userinterface/images/choose_locale.gif" alt=""></p>
			</blockquote></td>
		</tr>
	</table>
      <p>为了说明如何使用各种国际化功能，我们将从下面显示的简单示例开始。此示例包括各种窗口小部件类型，每个窗口小部件包含静态字符串标</p>
	<p><img border="0" src="images/nls_design_view1.png"></p>
      <p>此示例的源代码如下所示。请注意，所有窗口小部件和窗口文本元素都被硬编码为源中的字符串文字。对于国际化应用程序，需要将这些字符串提取到资源（属性）文件并通过密钥访问。</p>
    <p><img border="0" src="images/nls_source_view1.png"></p>
      <h2>“外部化字符串”对话框</h2>
      <p>要开始国际化过程，请单击“ <b>外部化字符串”</b>按钮<img src="../userinterface/images/globe3.png" alt="" width="16" height="16">打开<b>Externalize Strings</b>对话框。最初，对话框应显示分配给窗口内任何组件的所有硬编码字符串属性的列表。如果已为同一包中的其他类创建了任何NLS字符串外部化源，则它们将在“ <b>现有源”</b>列表中列出（如果包中的类没有外部化，则列表将为空）。选择现有源或通过单击<b>新建...</b>创建新源<b>。</b> 按钮。</p>
      <p><img border="0" src="images/nls_externalize_strings1.png"></p>
	<p>单击“ <b>新建...”</b>按钮以创建新的NLS字符串源（可以使用多个源）。支持四种不同类型的源： <b>Classic Eclipse消息类</b> ， <b>Modern Eclipse消息类</b> ， <b>Direct ResourceBundle用法</b>和<b>字段中的ResourceBundle</b> 。选择源类型时， <b>示例</b>字段中会显示代码的<b>示例</b> 。</p>
	<p>对于<b>Classic Eclipse消息类</b>样式，您可以创建新的bundle访问器类或选择现有的类。您还可以指定应使用的资源包属性文件的名称和位置。</p>
	<p><img border="0" src="images/nls_new_source1.png"></p>
	<p>对于<b>Modern Eclipse消息类</b>样式，您可以创建新的bundle访问器类或选择现有的类。您还可以指定应使用的资源包属性文件的名称和位置。</p>
	<p><img border="0" src="images/nls_new_source2.png"></p>
	<p>对于<b>Direct ResourceBundle使用</b>样式，您只需指定应使用的资源包属性文件的名称和位置。</p>
	<p><img border="0" src="images/nls_new_source3.png"></p>
	<p>对于<b>字段</b>样式的<b>ResourceBundle</b> ，除了资源包属性文件的名称和位置之外，还需要指定应将资源包分配给的字段的名称。</p>
	<p><img border="0" src="images/nls_new_source4.png"></p>
      <p>创建源后，单击“ <b>全部启用”</b>按钮以选择所有组件中的所有字符串。最后，单击“ <b>外部化”</b>按钮开始提取过程。字符串将被提取到“ <b>现有来源”</b>列表中选择的<b>来源</b> 。打开“ <b>将字符串复制到所有语言环境”</b>选项会将提取的字符串复制到所有已定义的语言环境，而不是仅复制到默认语言环境</p>
      <p><img border="0" src="images/nls_externalize_strings2.png"></p>
      <p>切换到以资源包命名的选项卡以查看结果（如果使用多个源，则每个源都有一个选项卡）。根据窗口类的名称，组件的变量名称和字符串的属性名称（通常只是“text”），每个字符串都会给出一个默认的键名。表示每个组件的图标显示在键旁边。将鼠标悬停在该图标上将显示一个工具提示，显示使用该键的小部件。</p>
      <p><img border="0" src="images/nls_externalize_strings3.png"></p>
      <p>请注意，对话框中的键名和字符串值都是可编辑的。您可以使用<b>Enter</b>和<b>Tab</b>键遍历表格中的单元格。</p>
      <p><img border="0" src="images/nls_externalize_strings4.png"></p>
	<p>如果更改密钥的值以使其与另一个现有密钥匹配，则需要确认更改。</p>
	<p><img border="0" src="images/nls_rename_key.png"></p>
      <h2>消息类和属性文件</h2>
      <p>关闭对话框后，请注意已创建了几个附加文件。第一个是默认语言环境的属性文件（资源包），其中包含所有键及其关联值。</p>
      <p><img border="0" src="images/nls_package_explorer2.png">  
      <img border="0" src="images/nls_properties_default.png" align="top"></p>
      <p>第二个（可选）文件是<b>Messages</b>类，其作用是通过键名与资源包接口。经典的Eclipse消息类格式如下所示：</p>
      <p><img border="0" src="images/nls_messages.png"></p>
	<p>现代Eclipse消息类格式如下所示：</p>
	<p><img border="0" src="images/nls_messages2.png" width="558" height="512"></p>
      <p>如果我们现在<b>在字段</b>样式中使用<b>ResourceBundle</b>时再看一下源视图，我们会看到所有硬编码字符串都被替换为对ResourceBundle的调用，字符串键名是参数。请注意，这些密钥本身将在多种语言中保持不变，因此出于国际化目的应予以忽略。因此，它们都标有<b>// $ NON-NLS-1 $</b>行尾注释。</p>
      <p><img border="0" src="images/nls_source_view2.png"></p>
	<h2>添加新的区域设置</h2>
      <p>一旦创建了默认资源包，就可以通过再次单击<b>Externalize Strings</b>按钮来添加第二种（或第三种）语言。该对话框将打开，重点关注第一个资源包选项卡。单击“ <b>新建区域设置...”</b>按钮以打开“ <b>新建区域设置”</b>对话框。该对话框列出了所有已知的语言环境。您可以选择<b>语言</b>代码（例如fr代表法语）和可选的<b>国家/地区</b>代码，也可以从<b>所有语言环境</b>列表中进行选择。您还可以使用“ <b>从字符串复制字符串</b> ”中的下拉列表，选择是应从现有语言环境（如默认语言环境）复制新语言环境中的字符串，还是将其留空（从“无”复制）。</p>
      <p><img border="0" src="images/nls_new_locale.png">  
		<img border="0" src="images/nls_new_locale2.png"></p>
      <p>选择新语言环境后，单击“ <b>确定”</b>将语言环境添加为表中的新列。字符串值将与“ <b>新建区域设置”</b>对话框中“ <b>复制字符串”</b>字段中指定的区域设置相匹配。然后，您可以自己输入翻译的值，或将该任务留给语言专家。如果右键单击单元格，则可以内化键（删除行）或删除整个区域设置（列）。</p>
      <p><img border="0" src="images/nls_externalize_strings5.png"></p>
      <p>第二次关闭对话框后，您将看到已为新语言环境创建了新的属性文件。</p>
      <p><img border="0" src="images/nls_package_explorer3.png"> 
      <img border="0" src="images/nls_properties_fr.png" align="top"></p>
      <p>如果切换回<b><a href="../userinterface/design_view.html">设计视图</a></b> ，您将看到<b>Locales</b>下拉列表现在包含两个值 - 一个用于默认语言环境，另一个用于第二个语言环境。选择第二个区域设置将更新设计视图以在上下文中显示相应的字符串值。</p>
      <p><img border="0" src="images/nls_design_view2.png"></p>
      <p>选择默认语言环境将使字符串值恢复为原始语言。因此，您可以使用“ <b>区域设置”</b>下拉列表在语言之间快速切换以检查布局。</p>
      <p><img border="0" src="images/nls_design_view3.png"></p>
      <h2>在设计视图中编辑字符串值</h2>
      <p>同样重要的是要注意，您可以继续在<b><a href="../userinterface/design_view.html">设计视图中</a></b>编辑字符串值（通过<a href="../userinterface/design_view.html#DirectEdit">直接编辑</a>或在<b><a href="../userinterface/property_pane.html">属性窗格中</a></b> ），该工具将自动更新相应的属性文件。如果选择了默认语言环境，则将更改默认属性文件。如果选择了第二个区域设置，则将更新其对应的属性文件。相反，如果您编辑其中一个属性文件中的文本，则在编辑器获得焦点时将更新“ <b><a href="../userinterface/design_view.html">设计视图”</a></b> 。</p>
      <p><img border="0" src="images/nls_design_view4.png"></p>
      <h2>添加新组件</h2>
      <p>您甚至可以将带有新文本组件的新窗口小部件添加到窗口，并通过“ <b>外部化字符串”</b>对话框逐步外部化它们。如果打开对话框并切换到“ <b>属性”</b>选项卡，则会看到任何非外部化字符串的列表。</p>
      <p><img border="0" src="images/nls_externalize_strings6.png"> </p>
      <p>选择这些字符串，然后单击“ <b>外部化”</b>以将新键/值对添加到“ <b>现有源”</b>列表中选择的属性文件中。如果已定义多个语言环境并且选中了<b>将字符串复制到所有语言环境</b>选项，则新键/值对将同时添加到所有语言环境。根据需要翻译辅助语言环境。</p>
      <p><img border="0" src="images/nls_externalize_strings7.png"></p>
      <h2>使用属性窗格中的现有键</h2>
<p>直接在属性窗格中输入密钥，方法是在其前面添加星号（*）或单击<img border="0" src="../userinterface/images/ellipses.png">按钮以访问<b>字符串编辑器</b>并从现有资源包中选择一个键。</p>
	<p>
		<img src="images/nls_key_as_value.gif"></p>
	<p>要使用资源包中的值，请选中“ <b>使用现有NLS源/密钥”</b>复选框，然后单击“ <b>浏览”</b>按钮。将打开“ <b>选择键”</b>对话框，您可以在其中选择字符串源和键/值对。您可以通过在“ <b>搜索字符串”</b>字段中输入字符串来过滤显示的键/值对列表。默认情况下，会搜索键名，但您也可以通过选择对话框底部的相应单选按钮来搜索值或键和值。</p>
<p>
			<img src="../userinterface/images/property_editor_string2.png" alt="" border="0" hspace="0" vspace="5"> 
			<img src="../userinterface/images/property_editor_string3.png" alt="" border="0" hspace="0" vspace="5" width="335" height="374" align="top"></p>
    </td>
  </tr>
</table>
</body>
</html>

<html >
<head>
   <meta name="copyright" content="Copyright (c) IBM Corporation and others 2000, 2013. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page.">
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <link rel="stylesheet" href="../../../book.css" type="text/css" charset="ISO-8859-1">
   <title>撤消示例</title>
</head>
<body >

<h2>
<b>示例 - 撤消</b></h2>

<h3>介绍</h3>
<p>撤消示例向工作台添加两个视图。<b>Box View</b>是一个基本视图，允许用户通过单击空白区域并拖动鼠标来形成框来创建框。可以通过选择一个框并拖动它来移动框。用户可以撤消和重做在框视图中执行的任何操作。“ <b>撤消历史记录视图”</b>显示工作台操作历史记录维护的撤消历史记录。
</p>
<h3>示例中演示的功能</h3>
<ul>
<li>在操作中创建<tt>IUndoableOperation</tt> （删除所有框）以执行操作的工作。</li>
<li>根据手势隐含的操作创建<tt>IUndoableOperation</tt> （添加和移动框）。</li>
<li>使用本地<tt>IUndoContext</tt>将撤消操作保持在特定视图的本地。</li>
<li>使用平台undo和redo action处理程序在视图中提供撤消和重做。</li>
<li>提供用户偏好以设置特定撤消上下文的撤消限制。</li>
<li>使用<tt>IOperationApprover</tt>在操作历史记录中安装其他策略（撤消前提示）。</li>
<li>使用<tt>IOperationHistory</tt>协议显示不同撤消上下文的撤消历史记录（撤消历史记录视图）。</li>
</ul>
<h3>功能未展示</h3>
<ul>
<li>由于该示例专注于简单撤消，因此BoxView代码保持最小化。因此，它不提供预期的图形编辑器功能，如选择，调整大小和选择句柄，颜色和线条样式属性等。出于同样的原因，撤消框架中的高级功能未显示。</li>
<li>没有分配多个撤消上下文以便在视图或编辑器之间共享操作的示例。</li>
<li>没有使用复合撤消操作的示例。</li>
</ul>
<h3>运行示例</h3>
<p>从Eclipse的<strong>Window</strong>菜单中选择<strong>Show View</strong> &gt; <strong>Other ....</strong>在“ <strong>显示视图”</strong>对话框中，展开“ <strong>撤消示例”，</strong>然后选择名为“ <strong>框视图”的视图</strong> 。将出现框视图。
</p>
<p>同样，从“ <strong>窗口”</strong>菜单中选择“ <strong>显示视图”</strong> &gt;“ <strong>其他...”</strong> 。在“ <strong>显示视图”</strong>对话框中，展开“ <strong>撤消示例”</strong>并选择名为“ <strong>撤消历史记录视图”的视图</strong> 。将显示包含撤消历史记录的视图。此视图可与Box View一起用于在添加或移动框时观察撤消历史记录。它也可以独立于Box View使用，以跟踪使用工作台操作历史记录跟踪可撤消操作的任何视图或编辑器的撤消历史记录。
</p>
<h3>细节</h3>
<h4>盒子视图</h4>
<p>在框视图中单击并拖动鼠标以创建一个跟随鼠标的框。单击现有框并拖动鼠标将该框移动到新位置。请注意，添加和移动“ <strong>撤消”</strong>和“ <strong>重做”</strong>菜单中显示的操作作为框。通过从上下文菜单或视图的本地菜单和工具栏中选择“ <strong>删除所有”框</strong> ，可以清除框视图。此操作也可以撤消。
</p>
<h4>撤消历史记录视图</h4>
<p>“撤消历史记录视图”显示可在所有撤消上下文中撤消的操作。要查看特定撤消上下文中的历史记录，请从视图的上下文菜单中选择“ <strong>筛选...</strong> ”。这将过滤特定撤消上下文的撤消历史记录。该视图可用于查看Box视图的撤消历史记录，SDK文本编辑器以及影响工作空间的可撤消操作（例如重构操作）。可以从撤消历史记录视图的菜单中执行撤消和重做。<b>撤消选定</b>将尝试撤消撤消历史记录中的所选操作，无论其在操作历史记录中的位置如何。根据所涉及的操作，可能允许也可能不允许。例如，Box View允许撤消或重做所有添加和移动操作，即使它们不是最近执行的操作。如果尝试撤消不是最新的键入操作，则文本编辑器将提示。
</p>
<h4>示例偏好</h4>
<p>提供的首选项会影响两个视图的操作。从Eclipse的<strong>Window</strong>菜单中选择<strong>Preferences</strong> &gt; <strong>Undo Preferences</strong> 。
</p><ul>
<li><strong>撤消历史记录限制</strong>控制Box视图的历史记录中保留的可撤消操作数。</li>
<li><strong>在撤消历史记录视图中显示调试标签可</strong>控制撤消菜单中显示的简单标签是用于显示操作，还是包含指定撤消上下文等信息的调试标签。</li>
<li><strong>确认所有撤消操作</strong>控制在撤消或重做操作之前是否进行提示。此首选项由示例安装的操作批准者使用。</li>
</ul>

</body>
</html>
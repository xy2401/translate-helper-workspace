<html  xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="CONTENT-TYPE">
<link rel="stylesheet" href="../../book.css" type="text/css">
<title>故障，补偿，终止和事件处理程序</title>
</head>

<body >
	<h1>故障，补偿，终止和事件处理程序</h1>
	<p>处理程序允许BPEL流程从异常条件中恢复。异常条件包括：等待合作伙伴服务响应的超时，消息数据无效或丢失，服务返回的故障情况。有四种类型的处理程序：</p>

	<ul>
		<li>故障处理程序<img src="../../../images/reference/Handlers_01.png"> ：在活动引发故障时执行。
		</li>
		<li>赔偿处理者<img src="../../../images/reference/Handlers_02.png"> ：BPEL流程遇到Compensate或CompensateScope活动时执行。
		</li>
		<li>终止处理程序<img src="../../../images/reference/Handlers_03.png"> ：如果Scope被迫提前终止，则执行。
		</li>
		<li>事件处理程序<img src="../../../images/reference/Handlers_04.png"> ：对事件执行包括收到消息和计时器到期。
		</li>
	</ul>

	<p>处理程序是针对流程或某些活动定义的。要创建新处理程序，请右键单击某个活动，然后从其上下文菜单中选择所需的处理程序。BPEL Designer将在附加到活动的可折叠窗口中生成处理程序的框架。下图说明了完全展开视图中所有不同类型的处理程序。可以通过单击各自的图标来折叠和展开处理程序窗口。
	</p>
	<p><img src="../../../images/reference/Handlers_05.png" alt="处理程序概述"></p>
	<p><b>处理程序概述</b></p>
	<p>处理程序的行为和异常处理的顺序很复杂，超出了本文档的范围。有关更多信息，请参阅<a href="http://docs.oasis-open.org/wsbpel/2.0/wsbpel-v2.0.html">http://docs.oasis-open.org/wsbpel/2.0/wsbpel-v2.0.html</a>上的OASIS WS-BPEL 2.0规范。
	</p>
	
	<h5>进程级处理程序</h5>
	<p><img src="../../../images/reference/Handlers_06.png" alt="使用处理程序启动活动"></p>
	<p><b>使用处理程序启动活动</b></p>
	<p>通过右键单击“开始”活动并从上下文菜单中选择所需的处理程序，可以为该过程定义故障和事件处理程序。
	</p>

	<h5>范围级处理程序</h5>
	<p>Scope可以有任何处理程序。由于Scopes可以嵌套，因此每个级别都可以定义自己的一组处理程序。未被内部作用域中的处理程序捕获和处理的事件将传播到其祖先。
	</p>

	<h5>活动级处理程序</h5>
	<p>只有Invoke活动才能定义处理程序。可用的处理程序是故障和补偿处理程序。
	</p>
</body>
</html>
<html dir="ltr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
<title>调试器（Luna中的新功能）</title>
<link href="book.css" rel="stylesheet" type="text/css"></link>
<meta name="generator" content="DocBook XSL Stylesheets V1.75.1"></meta>
<link rel="home" href="index.html" title="OCL Documentation"></link>
<link rel="up" href="UsersGuide.html" title="Users Guide"></link>
<link rel="prev" href="ValidityView.html" title="Validity View (new in Luna)"></link>
<link rel="next" href="Integration.html" title="OCL Integration"></link>
</head>
<body bgcolor="white" dir="ltr" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">调试器（Luna中的新功能）</h1>
<div class="section" title="调试器（Luna中的新功能）">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear:both">
<a name="Debugger"></a>调试器（Luna中的新功能）</h2>
</div>
</div>
</div>
<p>OCL调试器支持调试OCL约束。它是标准Eclipse调试器的自定义，因此Eclipse Java调试器的用户应该熟悉大多数工具。</p>
<p>
				
</p>
<div class="mediaobject">
<img src="images/1540-debugger-image.png"></div>
<p>
			
</p>
<p>截图显示</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>调试堆栈跟踪显示嵌套评估环境的上下文</p>
</li>
<li class="listitem">
<p>变量视图显示中间变量和局部变量</p>
</li>
<li class="listitem">
<p>编辑器在几个步骤之后显示输入和上下文</p>
</li>
<li class="listitem">
<p>大纲显示具体语法树上下文</p>
</li>
</ul>
</div>
<p>
				
<span class="italic">OCL调试器是非常新的，毫无疑问，人体工程学改进和错误修复的机会很多。请举起一个<a class="ulink" href="http://bugs.eclipse.org/bugs/enter_bug.cgi?product=MDT.OCL" target="_new">Bugzilla</a> 。
				</span>
			
</p>
<div class="section" title="发射">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="Launching"></a>发射</h3>
</div>
</div>
</div>
<p>启动OCL约束的调试器需要用户提供两条信息</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>要评估的表达式或约束</p>
</li>
<li class="listitem">
<p>操作的自我对象</p>
</li>
</ul>
</div>
<p>这些可以以各种方式提供</p>
<div class="section" title="选定的模型对象和手动输入的表达式">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="Selectedmodelobjectandmanuallyenteredexpression"></a>选定的模型对象和手动输入的表达式</h4>
</div>
</div>
</div>
<p>可以在Xtext OCL控制台中输入任意OCL表达式，并在使用鼠标选择选择的模型对象上进行评估。从控制台工具栏上的调试图标调用调试器。</p>
<p>
						
</p>
<div class="mediaobject">
<img src="images/1540-debugger-console-launch.png"></div>
<p>
					
</p>
<p>单击调试图标将创建一个虚拟的完整OCL文件，然后启动调试器。该表达式被封装为所选对象类型的oclDebugExpression操作扩展。该文件提供源级调试的源。调试时可以重新使用控制台。</p>
</div>
<div class="section" title="选定的模型对象/约束组合">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="Selectedmodelobjectconstraintcombination"></a>选定的模型对象/约束组合</h4>
</div>
</div>
</div>
<p>有效性视图提供了对适用于模型元素的每个约束的评估的细粒度显示，反之亦然。可以选择其中一个模型元素/约束组合，并使用<span class="bold"><strong>Debug Single Enabled Selection</strong></span>启动<span class="bold"><strong>调试</strong></span>器，以调查验证产生意外结果的原因。
					</p>
<p>
						
</p>
<div class="mediaobject">
<img src="images/1540-debugger-validity-view-launch.png"></div>
<p>
					
</p>
</div>
<div class="section" title="选定的模型对象和选定的约束">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="Selectedmodelobjectandselectedconstraint"></a>选定的模型对象和选定的约束</h4>
</div>
</div>
</div>
<p>可以创建OCL表达式启动配置以选择模型元素和用于执行或调试的约束。</p>
<p>可以使用Eclipse菜单栏中的<span class="bold"><strong>Run-&gt; Run Configurations ...</strong></span>或<span class="bold"><strong>Debug-&gt; Debug Configurations ...</strong></span>创建启动配置。这需要单独选择模型元素和约束。
					</p>
<p>
						
</p>
<div class="mediaobject">
<img src="images/1540-debugger-run-configuration-launch.png"></div>
<p>
					
</p>
<p>或者，模型编辑器中的上下文菜单提供<span class="bold"><strong>OCL-&gt; Debug ...</strong></span>选项，该选项创建调试配置，其中从调用上下文中预先选择模型元素。
					</p>
</div>
</div>
<div class="section" title="步进">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="Stepping"></a>步进</h3>
</div>
</div>
</div>
<p>OCL表达式可以非常紧凑，通常嵌入在更大的应用程序中。因此，调试器针对此用途进行了优化。</p>
<p>OCL调试器不是典型的Java调试器的基于行的步进，而是支持逐项步进，突出显示要评估的下一个术语，并在变量视图中将中间结果显示为$ -prefixed name。</p>
<p>调整步骤功能的OCL调试器解释，以便于在复杂表达式中步进到多个点，而无需使用换行符重新格式化源。</p>
<p><a class="link" href="Debugger.html" title="调试器（Luna中的新功能）">示例调试器视图</a>显示在进入“self”和“.name”后即将执行“.size（）”。
				</p>
<div class="section" title="踏入">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="StepInto"></a>踏入</h4>
</div>
</div>
</div>
<p>执行单个OCL AST节点。可以将结果作为后续AST节点的输入进行检查。</p>
</div>
<div class="section" title="跳过">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="StepOver"></a>跳过</h4>
</div>
</div>
</div>
<p>执行继续执行，直到下一个OCL AST节点与新的源行号相关联。</p>
</div>
<div class="section" title="退一步">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="StepReturn"></a>退一步</h4>
</div>
</div>
</div>
<p>执行继续进行，直到下一个OCL AST节点与减小的堆栈深度相关联。迭代引入嵌套的堆栈条目，因此步骤返回可以逐步退出迭代。 let表达式和嵌套的OCL调用也引入了额外的堆栈嵌套。</p>
</div>
<div class="section" title="恢复">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="Resume"></a>恢复</h4>
</div>
</div>
</div>
<p>执行继续执行到下一个断点。</p>
</div>
</div>
<div class="section" title="变量视图">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="VariablesView"></a>变量视图</h3>
</div>
</div>
</div>
<p>变量视图允许使用OCL语法（如字符串的单引号）检查局部变量和中间结果。</p>
<p><a class="link" href="Debugger.html" title="调试器（Luna中的新功能）">示例调试器视图</a>显示“self”变量，它是一个“ecore :: Package”实例，打开以显示其字段，其中名称为“tutorial”。
				</p>
<p>中间变量使用后续AST节点输入的属性名称命名。因此，“$ source”显示已经计算为“self.name”的OperationCallExp.source输入。多个输入通过后缀分配，如“$ argument [0]”中所示。</p>
<p>“$ pc”标识下一条指令，可以用与任何其他变量相同的方式检查。</p>
</div>
<div class="section" title="断点视图">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="BreakpointsView"></a>断点视图</h3>
</div>
</div>
</div>
<p>可以在完整OCL编辑器中设置换行符，并在断点视图中进行检查。执行与断点行关联的OCL AST节点时，执行停止。</p>
<p>
					
<span class="italic">目前还没有过滤设施。</span>
				
</p>
</div>
<div class="section" title="大纲视图">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="OutlineView"></a>大纲视图</h3>
</div>
</div>
</div>
<p>纲要当前显示OCL具体语法树，其结构类似于执行的抽象语法树。 。</p>
<p>
					
<span class="italic">显示AST并在其上支持Node断点会更有用。</span>
				
</p>
</div>
</div>
</body>
</html>

<html dir="ltr">
<head>
<title>同步项目</title>
<link rel="stylesheet" type="text/css" href="help.css"></link>
<script type="text/javascript" src="thumb.js"> </script>
</head> 
<body dir="ltr">
<h1 id="top">同步项目</h1>
<p>
</p><ul>
<li><a href="#prereq">同步项目的要求</a>
</li><li><a href="#create">创建新的同步项目</a>
</li><li><a href="#work">使用同步项目</a>
</li><li><a href="#context-menu">使用“同步上下文菜单”更改同步行为</a>
</li><li><a href="#file-filter">更改与文件筛选同步的文件</a>
</li><li><a href="#conversion-wizard">将项目转换为同步项目</a>
</li><li><a href="#merge-conflict">解决合并冲突</a>
</li><li><a href="#remote-discovery">发现远程环境（远程包括和代码分析）</a>
</li><li><a href="#prefs">同步首选项</a>
</li></ul>
<p>同步项目由在本地系统以及一个或多个远程系统上镜像的文件组成。编辑在本地进行，每个文件在更改，创建或删除时与当前活动的远程系统同步。这样可以更快地与文件和编辑器交互，更多CDT编辑器功能，因为文件是本地的，并且如果网络连接丢失，则继续进行交互以进行编辑等。
</p><p>有关不同类型项目（本地，同步和远程）的<a href="localVsRemote.html">概述，</a>请参阅<a href="localVsRemote.html">PTP项目类型简介</a> 。
</p><p>
</p><h2 id="prereq">同步项目的要求</h2>
<p>要托管同步项目，远程系统必须支持<a href="http://git-scm.com/">Git</a>分布式版本控制系统。请注意，这完全独立于使用<a href="http://git-scm.com/">Git</a>进行源代码控制。

</p><h2 id="create">创建新的同步项目</h2>
<p>首先，我们假设您处于<b>C / C ++透视图中</b> 。
</p><p>如果还没有，请使用<b>Window&gt; Open Perspective&gt; Other ...</b>切换到C / C ++ Perspective，然后选择<b>C / C ++</b></p> 

<p>要创建新的同步项目，请首先选择适当的向导：</p>选择<b>文件&gt;新建&gt;其他...</b>然后在向导选择对话框中，选择<b>远程&gt;同步C / C ++项目</b> ， <b>同步Fortran项目</b>或<b>同步项目</b>以进行同步，而不支持特定语言。
<p><br></p>
<p><img src="images/sync-newproj.png">
</p><p><br></p>
<p>或者，从C / C ++ Perspective的Project Explorer中的上下文菜单（右键），选择<b>New&gt; Synchronized C / C ++ Project</b> ， <b>Synchronized Fortran Project</b>或<b>Synchronized Project</b>进行同步，但不支持特定语言。
</p><p><br></p>
<p><img src="images/sync-newprojContext.png">
</p><p><br></p>
<p id="new-sync-proj">现在填写显示的<b>New Synchronized Project</b>对话框。通用<b>同步项目</b> （仅同步）的对话框不包含用于选择项目类型和工具链的下半部分。

</p><p>
<img src="images/sync-newprojCreate.png">

</p><p><br></p>填写项目名称。对于<b>本地目录，</b>提供项目名称和位置，很可能是本地工作空间目录中的默认位置。然后通过指定<a href="#connection">连接</a>和远程目录来提供远程位置。接下来，指定项目类型。最后，选择要用于远程和本地站点的工具链。通常，您只为每个工具链选择一个工具链，但可以选择其他工具链。
<i>请注意，如果您不需要在本地构建，则不需要本地工具链。</i>
<p>文件筛选指定将在本地计算机和远程目标之间同步哪些文件。可以通过“ <b>修改文件过滤...”</b>按钮为此新项目更改默认值。默认情况下，eclipse相关文件（如<code>.project</code>在本地和远程系统之间不同步。二进制文件是。有关更多信息，请参阅<a href="#file-filter">文件过滤</a> 。有关如何修改后续新同步项目的默认行为的信息，请参阅<a href="#prefs">同步首选项</a> 。
</p><p>此时，您可以选择“ <b>完成”</b>以使用其余选项的默认值完成项目设置。
</p><p>或者，您可以选择“ <b>下一步”</b>以滚动其余页面，这些页面根据所选项目类型和工具链而有所不同。这包括配置页面，它将为之前选择的每个工具链列出单独的构建配置。
</p><p><br></p>
<!-- <p><img src="images/sync-newprojConfig.png"> -->
<p><img src="images/sync-newprojConfig.png">
</p><p><br></p>从这里，您可以配置构建属性。（这也可以在创建项目后完成。）请注意，如果为本地和远程选择相同的工具链，则只显示一个配置。在项目创建期间，将重复此配置，为本地创建一个，为远程创建另一个。
<p>如果然后选择<b>Next&gt;</b>而不是<b>Finish</b> ，将显示<b>Default Build Configurations</b>页面。有关同步配置和构建配置的更多信息，请参阅<a href="#work">使用同步项目</a> 。
</p><p><img src="images/sync-build-config.png"></p>
<p> 
</p><p>选择“ <b>完成”</b>以结束“新建项目向导”。
</p><p> 
</p><h3 id="connection">创建远程连接</h3>在第一个向导页面上， <b>New ...</b>按钮可用于创建新的远程连接。填写主机名，用户和密码（或其他身份验证信息）。选择<b>完成</b> 。在返回上一个对话框并选择“ <b>浏览...”</b>按钮或需要进行其他通信之前，不会测试连接。
<p><br></p>
<p><img src="images/sync-newprojConnection.png">
</p><p>注意：要在创建连接后编辑连接信息，例如更改用户名或密码，请参阅<a href="remoteTools.html#edit">编辑远程连接</a> 。</p><p>
<br></p>

<h2 id="work">使用同步项目</h2>
<p>在Eclipse Kepler（PTP 7.0）中，同步和构建的设置已分开。对于前者，使用<b>同步配置</b> ，并且可在所有同步项目中使用。这些主要用于指定应同步的本地文件（机器和目录）的位置。对于构建，使用<b>构建配置</b> ，仅适用于同步的C，C ++或Fortran项目。它们用于配置构建参数，例如编译器和编译器选项。这两种配置类型主要独立运行，同步或构建始终分别使用当前<b>活动同步配置</b>或<b>活动构建配置</b> 。

</p><p>唯一的依赖是默认情况下，构建发生在活动同步配置指定的位置。此外，您可以为每个同步配置指定默认构建配置。切换到其他同步配置时，会自动选择其默认构建配置。这只是为了方便起见，因此切换到不同的遥控器时不需要更改两个设置。您还可以独立于同步配置更改构建配置。对于相同的源位置，甚至对多个远程位置（同步配置）使用相同的构建配置，通常有多种类型的构建，例如“调试”和“发布”构建。

</p><p>如果在向导中选择，则启动同步配置将用于具有其默认构建配置的远程系统。因此，对于最常见的情况（要修改和构建的单个远程站点），同步项目开箱即用。如果远程位置不存在，则创建它。否则，该目录中的文件将同步到本地工作区。您可以像编辑任何本地项目一样编辑文件。每次保存文件时，它都将与远程系统同步。如果您创建或删除文件，将适当更新远程系统。请注意，即使未选择本地工具链，也始终为方便起见创建本地同步配置。它提供了一种简单的方法来禁用所有远程操作并在本地工作而不更改其他同步设置。
</p>
<p>要构建项目（假设您已经创建了一个makefile），请确保在<b>Project Explorer</b>视图中选择了<b>项目</b> ，然后单击构建图标（看起来像锤子的图标）。Console视图显示构建的结果。
</p><p>有关创建和构建简单的新同步项目的更多示例，请参阅<a href="01buildMPIprog.html">创建MPI项目简介</a> 。
</p>
<p>有关构建配置，同步配置等的详细信息，请参阅“ <a href="build.html">构建同步项目”</a>页面上的“ <a href="build.html#syncConfig">同步配置</a> ”。

</p><h2 id="context-menu">使用“同步上下文菜单”更改同步行为</h2>
<p>使用同步上下文菜单可以查看或更改与同步行为相关的多个属性。要访问同步上下文菜单，请在<b>Project Explorer</b>视图中右键单击项目，然后向下移动到<b>Synchronize</b>子菜单。
</p><p><img src="images/sync-contextMenu.png"></p>
<p>在此菜单中，您可以立即强制执行活动同步配置，设置活动同步配置，管理配置（同步配置及其关联的构建配置），强制同步所有同步配置等。 <b>自动同步（全局） ）</b>和<b>自动同步设置</b>允许您更改所有项目或每个项目的自动<b>同步</b>行为。
</p><p>在构建之前，无论任何设置如何，文件始终使用仅活动配置的强制同步进行更新。这可确保构建基于最新版本。在构建更新文件之后可能会发生另一次同步，因为构建可能会在编译期间更改远程文件。（但是，此同步确实尊重用户的设置。）有关“ <a href="#file-filter">过滤</a>器...”选项的信息，请参阅“ <a href="#file-filter">文件过滤：更改要同步的文件</a> ”。



</p><h2 id="file-filter">文件过滤：更改同步的文件</h2>
<p>默认情况下，所有文件通常都是同步的。
</p><p>但是某些文件不需要在本地和远程位置之间同步。例如，二进制文件可能在本地计算机上没有用（并且可能很大且复制速度很慢），但源文件通常是因为它们通常是从本地Eclipse工作台编辑的，但用于构建远程目标系统。
</p><p>从<a href="#context-menu">同步上下文菜单</a>的“过滤器...”选项，</p><p><img src="images/sync-filter-menu.png"></p>您可以更改当前项目的同步文件。您还可以在“ <a href="#prefs">同步项目”首选项页面</a>上更改以后项目的默认设置。默认情况下，Eclipse专门使用的文件和目录将从同步中排除。（请注意，这些文件，例如<code>.project</code>和<code>.project</code>等通常不可见。）
<p>可以在三个位置访问同步过滤信息：</p><ol>
<li>现有项目的“ <b>配置同步项目过滤器”</b>对话框（同步过滤器对话框）可从上面显示的同步上下文菜单中获得，如下所示。它显示了当前所选项目中的设置及其对文件的作用</li><li><a href="#new-sync-proj">新同步项目对话框中</a>的<b>文件过滤器</b>弹出对话框（来自<b>修改文件过滤...</b>按钮）允许在创建项目时设置同步过滤器设置，并且</li><li>“ <q href="#sync-prefs">同步过滤器首选项”页面设置将在新项目中使用的默认值。
</q></li></ol>
<p>现有项目的“ <b>配置同步项目过滤器”</b>对话框的部分：</p><ul>
<li>顶部的<b>文件/文件夹</b>列表指示当前所选项目的当前排除和包含的目录和文件。（不包含在“ <a href="#prefs">同步首选项”</a>页面中。）您可以选择（包括）或取消选择（排除）单个文件和文件夹，这将向“ <b>模式”</b>区域添加相应的<b>模式</b> 。
</li><li>底部附近的“ <b>模式”</b>区域显示当前的排除和包含模式。可以添加，编辑或删除模式。结果将显示在文件/文件夹列表中。
</li></ul>
<p><img src="images/sync-filter-dialog.png">
</p><p>如果更改了其他部分，则对话框的每个部分都会自动更新，以便它们始终保持一致。这使您可以立即看到添加新模式的效果。默认情况下，不显示远程文件。在更新视图时，显示远程文件可能会导致响应时间变慢。如果要<b>查看远程文件，</b>请选中它们。如果远程系统断开连接，则会显示错误消息。
</p><p>
</p><p>要输入新模式，请选择<b>添加...</b>按钮。出现“ <b>添加模式”</b>对话框。
</p><p><img src="images/sync-filter-add-dialog.png"></p>
<p>在<b>Pattern：</b>字段中，输入使用Git语法的模式（gitignore）</p><ul>
<li>支持fnmatch（*，？，[]）</li><li>过滤目录会忽略其中的所有文件</li><li>最后一个模式具有最高优先级</li><li>路径以/匹配目录结尾</li></ul>
<p>选择<b>Pattern：</b>字段下方的单选按钮，以指示是否应在同步中包含或排除该模式。默认排除。


</p><p>模式按“ <b>配置同步项目过滤器”</b>对话框的模式区域中给出的顺序应用。新模式位于底部（最高优先级）。因此，将根据第一个匹配模式排除或包含文件，或者如果没有模式匹配则包括该文件。使用“上移”和“下移”按钮更改模式的优先级。如果新模式与旧模式相同，则删除旧模式。请注意，旧模式是排除模式还是包含模式并不重要，因为新模式会取代它。

</p><p>例如，要从同步中排除<code>*.o</code>文件（例如，它们是在远程系统上构建的，但您不希望将它们复制回本地目录），请在“ <b>配置同步项目”的</b> “模式”区域中选择“ <b>添加...”</b>按钮。 <b>过滤</b>对话框。
</p><p>在模式字段中键入<code>*.o</code> ，并确保为<b>模式类型</b>选择了<b>排除</b> 。
</p><p><img src="images/sync-filter-add-dialog-dot-o.png"></p>
<p>然后选择<b>确定</b>按钮。新过滤器将显示在“ <b>配置同步项目过滤器”</b>对话框的模式区域中， <code>*.o</code>文件不再包含在同步中。
</p><p><img src="images/sync-filter-add-dialog-dot-o-results.png"></p>
<p>您可以使用按钮向上或向下移动优先级，编辑图案等。
</p><p>
</p><p><b>单击确定</b>以保存对同步过滤所做的任何更改。

</p><h2 id="conversion-wizard">将项目转换为同步项目</h2>
<p>转换向导允许您将任何项目类型转换为同步项目。目前只能转换本地项目。要转换项目，请在<b>Project Explorer</b>视图中单击鼠标右键，然后选择<b>New&gt; Other ...</b> 在向导选择对话框中，选择“ <b>远程”&gt;“转换为同步项目”，</b>然后选择“ <b>下一步&gt;”</b> 。
</p><p><img src="images/sync-selectConversionWizard.png"></p>

<p>在此对话框中，您可以选择要转换的项目。
</p><p><img src="images/sync-conversionWizard.png"></p><p>
</p><p>选择本地项目以将其转换为同步项目。选择一个连接（或<a href="remoteTools.html#create"></a>创建一个新的连接。）
</p><p>选择<b>Next&gt;</b> ，然后在下一个对话框中，为每个Sync Configuration选择默认的Build Configurations（仅适用于C，C ++或Fortran项目）。
</p><p><img src="images/sync-conversionWizard2.png"></p><p>
</p><p>选择<b>Finish</b> ，将项目同步（复制）到连接指定的远程系统。

</p><h2 id="merge-conflict">解决合并冲突</h2>
<p>通常，在将文件的两个不同版本合并为单个版本时，可能发生“合并冲突”。由于各种原因，最终版本可能存在分歧。对于同步项目，在正常使用期间不会发生合并冲突，因为底层系统知道本地文件更改是对旧版远程版本的更新，反之亦然。但是，如果文件在本地和远程更改而没有插入同步，则可能会发生合并冲突，因为下一次同步可能不知道如何合并这两个版本。（在Eclipse中恢复工作之前进行远程更改后进行同步是一个好主意。）检测到冲突时，将显示以下对话框：</p><p><br></p>
<p><img src="images/sync-mergeConflictDialog.png">
</p><p><br></p>您可以从此对话框或从“ <b>窗口”&gt;“显示视图”&gt;“其他...”</b>打开合并冲突视图，然后单击“ <b>远程开发”&gt;“同步合并视图”</b> 。<b>同步合并视图</b> （可能位于工作台窗口的底部）显示了冲突文件的列表。（如果查看器为空，您可能需要在Project Explorer中选择项目。）双击“ <b>同步合并视图</b> ”中的文件以<b>显示</b> “比较编辑器”，其中可以查看差异并解决冲突。在此编辑器中，左窗格显示本地文件，该文件已标记为显示冲突，右窗格显示远程文件。“祖先”文件可选地显示在这两个窗格上方，可以使用编辑器的最左侧图标打开或关闭。祖先是文件的最后一个已知版本，本地和远程都是从该文件派生的。另请注意，右键单击查看器中的文件会显示上下文菜单，从中可以选择某些选项（如下所述）。

<p><br></p>
<p><img src="images/sync-mergeConflictResolve.png">
</p><p><br></p>在比较编辑器中，编辑左窗格会编辑文件的本地版本。比较编辑器仅为方便起见。您还可以从普通的Eclipse文本编辑器编辑该文件。完成编辑后，请务必保存文件，然后从“ <b>同步合并视图”</b>的上下文菜单中选择“ <b>标记为已解决</b> <b>”</b> 。此版本将在下次同步时复制到远程站点。对每个冲突的文件执行相同的操作。在所有冲突都已解决之前，阻止同步。而是会出现合并冲突对话框。（单击合并冲突对话框中的复选框以禁用它，直到解析合并。）解析合并后手动同步以将编辑推送到远程系统是个好主意。要手动同步，请在<b>Project Explorer</b>视图中选择项目，然后单击鼠标右键， <b>Synchronize&gt; Sync Active Now</b> 。
<p>合并冲突后，本地文件添加了标记和注释，以显示本地和远程站点上的不同内容。这对于单独编辑文件很有用，但对于使用比较编辑器则没有那么多。在“ <b>同步合并视图”</b>的上下文菜单中选择“ <b>合并前重置为版本”，</b>以将本地文件还原为其先前版本。现在，比较编辑器将清楚地显示本地和远程之间的差异。有时您可能只想要文件的远程版本。选择<b>Resolve as remote</b>会使本地文件与远程版本相同，然后将其标记为已解决。

</p><h2 id="remote-discovery">发现远程环境（远程包括和代码分析）</h2>
<h3>介绍</h3>现代软件项目几乎总是依赖于外部代码，宏和变量，它们通过include指令和各种编译器命令和设置引入到源代码中。我们将所有这些外部元素称为项目的“环境”。检测此环境是一个难题，但对于Eclipse提供有用的代码帮助（错误突出显示，代码导航等）至关重要。这很困难，因为这个环境部分内置在编译器中，并且在构建时由编译器部分“发现”。CDT在开发<b><i>扫描仪发现</i></b>方面有着悠久的历史来解决这个问题，并且最近公布了对发现机制的重新设计。同步项目扩展了这种新的重新设计，以便发现可以反映当前远程计算机的环境（由活动的构建配置指定）。目前，仅支持GCC编译器。请注意，CDT仍然提供旧的扫描程序发现方法，但尚未扩展为使用同步项目。
<p>扫描仪发现发现的元素由CDT <i>索引器</i>和CDT <i>Codan（CODe ANalysis）</i>工具使用。前者是一个可能长期运行的任务，它收集有关所有源代码组件（变量，函数，类等）的信息。然后，Codan使用此信息分析并可能使用各种错误报告和警告标记源文件。这三个组件（发现，索引和Codan）中的每一个都在不同时间独立运行。此外，构建过程可能会在<b>Problems</b>视图中生成编译器错误的标记。Codan使用类似于bug的图标，将其与构建系统使用的更传统的图标区分开来。（由于分析C ++的复杂性，经常出现程序在编译时仍会显示Codan标记的情况。这可能是由于发现，索引或代码分析方面的问题。）
</p><p>
</p><h3>建立</h3>
<p>注意：还相关： <a href="includes.html">包含同步项目的文件</a>
</p><p>默认情况下，同步项目使用正常的CDT发现机制，该机制读取本地环境。要配置新的发现元素，请在创建新的同步项目后按照这些说明进行操作。转到<b>项目&gt;属性&gt; C / C ++常规&gt;预处理器包括路径，宏等</b> 。确保在对话框顶部选择了远程配置。在“提供程序”选项卡下，如果要输入自己的路径，请取消选择“CDT用户设置条目”以外的所有CDT提供程序。接下来，选择两个同步提供程序，“同步GCC构建输出分析器”和“同步GCC内置编译器设置”。后一个提供程序运行特制的编译器命令以获取特定于编译器的设置。选择“确定”后立即运行。前提供程序将与构建同时执行。它拦截构建输出并尝试查找环境信息。因此，必须在此提供程序有用之前运行构建。
</p><p>现在，确保启用了索引并调用远程构建。为了使构建输出解析器有用，构建必须生成详细输出。设置此类构建的方法因项目而异，但请参阅<a href="https://developer.mozilla.org/en-US/docs/Eclipse_CDT">Mozilla Project CDT设置页面</a>以获取一个好例子。对每个远程构建配置重复这些步骤。对于本地配置，标准CDT或新的Sync提供程序都应该可用。如果您希望在切换构建配置时自动更新环境，请转到<b>项目&gt;属性&gt; C / C ++常规&gt;索引器，</b>然后为“构建索引器的配置”选择“使用活动构建配置”。这样做的缺点是每次切换配置时索引器都会运行。

</p><p><br></p>
<p><img src="images/sync-discoveryDialog.png">
</p><p><br></p>

<h3>结果</h3>可以在上一页的“条目”选项卡下找到已发现路径和宏的列表。请注意，连接名称前置为远程包含（UNC表示法）。添加自己的条目时，可以使用相同的表示法通过省略连接名称来指定远程计算机或本地路径上的路径。（因此，远程配置可以使用本地路径，反之亦然。）
<p>默认情况下，构建输出解析器会发现每个文件的条目。这可以在<b>Providers</b>选项卡下更改（见上图）。但是，如果发现是按文件进行的，则从项目菜单访问或右键单击项目或文件夹并选择“ <b>属性”时</b> ，包含和宏列表将为空<b>。</b> 而是，右键单击单个文件，然后选择“ <b>属性”</b>以查看该特定文件的条目。

<!-- FIXME end not changed to here -->
</p><h3 id="prefs">同步首选项</h3>
<p>同步项目的首选项页面包括设置同步<a href="#file-filter">过滤的</a>默认值。
</p><p><img src="images/sync-prefs.png">
</p><p>另请参阅<a href="07ptpPrefs.html">PTP首选项</a> 。
</p><p> 
</p><h3>提示</h3>
<dl>
<li>索引源文件可能需要很长时间。您可能要取消该过程或完全禁用索引，直到上述设置完成（ <b>项目&gt;属性&gt; C / C ++常规&gt;索引器</b> ）</li>
<li><b>Indexer</b>页面还有一些用于微调索引器的有用设置。</li>
<li>要重新编制索引，请右键单击该项目，然后选择“ <b>索引器”&gt;“重建”</b></li>
<li>在“提供程序”选项卡（而不是“条目”选项卡）中，使用“清除条目”按钮删除特定提供程序的条目。在为不同的远程创建新配置后，通常需要执行此操作。复制配置的条目将复制到新配置。</li>
<li>构建输出解析器在包含编译器可执行文件名称的构建输出行上运行。在提供程序选项卡下，如果它与您的可执行文件名不匹配，请更改“编译器命令模式”（参见上图）。例如，如果您使用MPI，则可执行文件可能是“mpicc”，“mpic ++”或“mpiCC”。小心模仿正则表达式格式。例如，添加“mpic ++”追加：|（mpic \ + \ +）到模式。</li>
<li>如果切换配置不会改变环境，请仔细检查索引器“为索引器构建配置”设置。出于某种原因，它有时会重置为使用固定配置，例如重新启动Eclipse时。</li>
</dl>

<p>有关<a href="http://wiki.eclipse.org/PTP/sync-projects">同步项目</a>的更多信息，另请参阅<a href="http://wiki.eclipse.org/PTP/sync-projects">PTP Wiki页面上的同步项目使用信息</a> 。

</p><p> </p><p> </p><p> 

</p><p>见<a href="localVsRemote.html">本地比。远程项目</a> ，了解有关不同类型的本地和远程项目的更多信息。</p><p> 
</p><p><a href="#top">回到顶部</a> | <a href="toc.html">返回目录</a>
</p></body>

</html>
<html id="2877.org_eclipse_ui_editors.html" dir="ltr"></html><html dir="ltr">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
<title>内部和外部编辑</title>
<style type="text/css"></style>
<style type="text/css"></style>
</head>
<body dir="ltr">
<h1 style="text-align:center">内部和外部编辑</h1>
<p></p>
<h6 class="CaptionFigColumn SchemaHeader">标识符：</h6>org.Eclipse.ui.editors的<p></p>
<h6 class="CaptionFigColumn SchemaHeader">描述：</h6>此扩展点用于向工作台添加新编辑器或将已声明的编辑器与内容类型相关联。编辑器是工作台页面中的可视组件。它通常用于编辑或浏览文档或输入对象。要打开编辑器，用户通常会在<samp>IFile</samp>上调用“打开”。执行此操作时，将查询工作台注册表以确定文件类型的适当编辑器，然后创建编辑器类型的新实例。实际结果取决于编辑器的类型。工作台为创建内部编辑器提供支持，内部编辑器紧密集成到工作台中，外部编辑器在单独的框架窗口中启动。这些极端之间也存在各种程度的整合。
<p>在内部编辑器的情况下，可以在工作台窗口和编辑器部件之间实现紧密集成。工作台菜单和工具栏预先加载了许多常见操作，例如剪切，复制和粘贴。活动部分，视图或编辑器应该为这些操作提供实现。内部编辑器还可以定义出现在工作台窗口中的新操作。这些操作仅在编辑器处于活动状态时显示。
</p><p>工作台和外部编辑器之间的集成更加脆弱。在这种情况下，工作台可以启动编辑器，但之后无法通过任何方式确定外部编辑器的状态或通过文件系统进行协作。</p><p></p>
<h6 class="CaptionFigColumn SchemaHeader">配置标记：</h6>
<p></p>
<p class="code SchemaDtd">&lt;！ELEMENT <a name="e.extension">扩展</a> （ <a href="#e.editor">editor</a> *， <a href="#e.editorContentTypeBinding">editorContentTypeBinding</a> *）&gt;</p>
<p class="code SchemaDtd">&lt;！ATTLIST扩展</p>
<p class="code SchemaDtdAttlist">点CDATA #REQUIRED</p>
<p class="code SchemaDtdAttlist">id CDATA #IMPLIED</p>
<p class="code SchemaDtdAttlist">名称CDATA #IMPLIED&gt;</p>
<p></p>
<ul class="ConfigMarkupAttlistDesc">
<li><b>point</b> - 目标扩展点的完全限定标识符</li>
<li><b>id</b> - 扩展实例的可选标识符</li>
<li><b>name</b> - 扩展实例的可选名称</li>
</ul>
<br><p class="code SchemaDtd">&lt;！ELEMENT <a name="e.editor">编辑器</a> （ <a href="#e.contentTypeBinding">contentTypeBinding</a> *）&gt;</p>
<p class="code SchemaDtd">&lt;！ATTLIST编辑</p>
<p class="code SchemaDtdAttlist">id CDATA #REQUIRED</p>
<p class="code SchemaDtdAttlist">名称CDATA #REQUIRED</p>
<p class="code SchemaDtdAttlist">icon CDATA #IMPLIED</p>
<p class="code SchemaDtdAttlist">扩展CDATA #IMPLIED</p>
<p class="code SchemaDtdAttlist">class CDATA #IMPLIED</p>
<p class="code SchemaDtdAttlist">命令CDATA #IMPLIED</p>
<p class="code SchemaDtdAttlist">发射器CDATA #IMPLIED</p>
<p class="code SchemaDtdAttlist">contributorClass CDATA #IMPLIED</p>
<p class="code SchemaDtdAttlist">default（true | false）“false”</p>
<p class="code SchemaDtdAttlist">文件名CDATA #IMPLIED</p>
<p class="code SchemaDtdAttlist">symbolicFontName CDATA #IMPLIED</p>
<p class="code SchemaDtdAttlist">matchingStrategy CDATA #IMPLIED&gt;</p>
<p></p>
<ul class="ConfigMarkupAttlistDesc">
<li><b>id</b> - 将用于标识此编辑器的唯一名称</li>
<li><b>name</b> - 将在此编辑器的UI中使用的可翻译名称</li>
<li><b>icon</b> - 将用于与指定扩展名匹配的所有资源的图标的相对名称。编辑者应提供一个图标，以便用户轻松区分不同的编辑器类型。如果指定命令而不是类，则不需要图标。在这种情况下，工作台将使用操作系统提供的图标。</li>
<li><b>extensions</b> - 包含编辑器可以理解的文件类型列表的可选字段。这是一个包含逗号单独文件扩展名的字符串。例如，理解超文本文档的编辑器可以注册“htm，html”。</li>
<li><b>class</b> - 实现<samp>org.eclipse.ui的类的名称<samp>。IEditorPart</samp> 。属性<samp>class</samp> ， <samp>command</samp>和<samp>launcher</samp>是互斥的。如果定义了此属性，则还应定义<samp>contributorClass</samp> 。</li>
<li><b>command</b> - 要启动外部编辑器而运行的命令。可执行命令必须位于系统路径或插件目录中。属性<samp>class</samp> ， <samp>command</samp>和<samp>launcher</samp>是互斥的。</li>
<li><b>launcher</b> - 实现<samp>org.eclipse.ui的类的名称<samp>。IEditorLauncher</samp> 。启动器将打开外部编辑器。属性<samp>class</samp> ， <samp>command</samp>和<samp>launcher</samp>是互斥的。</li>
<li><b>contributorClass</b> - 实现<samp>org.eclipse.ui的类的名称<samp>。IEditorActionBarContributor</samp> 。只有在定义了<samp>class</samp>属性时才应定义此属性。此类用于向工作台菜单和工具栏添加新操作，以反映编辑器类型的功能。</li>
<li><b>default</b> - 如果为true，则此编辑器将用作该类型的默认编辑器。这仅适用于为同一类型注册多个编辑器的情况。如果编辑器不是该类型的默认编辑器，则仍可以使用“打开方式...”子菜单为所选资源启动它。
<p>请注意，此属性仅适用于此时的文件名和扩展名关联。内容类型绑定不会受到尊重。基于内容类型的解决方案将以先到先得的方式进行，并且未明确指定。</p></li>
<li><b>filenames</b> - 包含编辑器可以理解的文件名列表的可选字段。这是一个包含逗号单独文件名的字符串。例如，理解特定超文本文档的编辑器可以注册“ejb.htm，ejb.html”。</li>
<li><b>symbolicFontName</b> - 字体的符号名称。符号字体名称必须是已定义字体的id（请参阅org.eclipse.ui.fontDefinitions）。如果此属性缺失或无效，则字体名称是编辑器首选项存储中“org.eclipse.jface.textfont”的值。如果没有首选项存储或未定义键，则将使用JFace文本字体。编辑器实现决定它是否使用此符号字体名称来设置字体。</li>
<li><b>matchingStrategy</b> - 实现<samp>org.eclipse.ui的类的名称<samp>。IEditorMatchingStrategy</samp> 。只有在定义了<samp>class</samp>属性时才应定义此属性。这允许编辑器扩展提供自己的算法，用于将其编辑器的输入与给定的编辑器输入进行匹配。</li>
</ul>
<br><p class="code SchemaDtd">&lt;！ELEMENT <a name="e.contentTypeBinding">contentTypeBinding</a> EMPTY&gt;</p>
<p class="code SchemaDtd">&lt;！ATTLIST contentTypeBinding</p>
<p class="code SchemaDtdAttlist">contentTypeId IDREF #REQUIRED&gt;</p>
<p></p>
<p class="ConfigMarkupElementDesc">宣告包含编辑器理解给定的内容类型，并且适合编辑该类型的文件。</p>
<br>
<ul class="ConfigMarkupAttlistDesc">
<li><b>contentTypeId</b> - 内容类型标识符。这是由'org.eclipse.core.contenttype.contentTypes'扩展点定义的ID。</li>
</ul>
<br><p class="code SchemaDtd">&lt;！ELEMENT <a name="e.editorContentTypeBinding">editorContentTypeBinding</a> EMPTY&gt;</p>
<p class="code SchemaDtd">&lt;！ATTLIST editorContentTypeBinding</p>
<p class="code SchemaDtdAttlist">contentTypeId IDREF #REQUIRED</p>
<p class="code SchemaDtdAttlist">editorId IDREF #REQUIRED&gt;</p>
<p></p>
<p class="ConfigMarkupElementDesc">将现有编辑器绑定到给定的内容类型。</p>
<br>
<ul class="ConfigMarkupAttlistDesc">
<li><b>contentTypeId</b> - 内容类型标识符。这是由'org.eclipse.core.contenttype.contentTypes'扩展点定义的ID。</li>
<li><b>editorId</b> - 编辑器标识符。这是'org.eclipse.ui.editors'扩展点的编辑器ID。</li>
</ul>
<br><h6 class="CaptionFigColumn SchemaHeader">例子：</h6>以下是内部编辑器扩展定义的示例：<p>
</p><pre class="Example"><span class="code SchemaTag">&lt;extension point =</span> <span class="code SchemaCstring">“org.eclipse.ui.editors”</span> <span class="code SchemaTag">&gt; &lt;editor id =</span> <span class="code SchemaCstring">“com.xyz。XMLEditor“</span> <span class="code SchemaTag">name =</span> <span class="code SchemaCstring">”Fancy XYZ XML编辑器“</span> <span class="code SchemaTag">icon =</span> <span class="code SchemaCstring">”./icons/XMLEditor.png“</span> <span class="code SchemaTag">extensions =</span> <span class="code SchemaCstring">”xml“</span> <span class="code SchemaTag">class =</span> <span class="code SchemaCstring">”com.xyz。XMLEditor“</span> <span class="code SchemaTag">contributorClass =</span> <span class="code SchemaCstring">”com.xyz。XMLEditorContributor“</span> <span class="code SchemaTag">symbolicFontName =</span> <span class="code SchemaCstring">”org.eclipse.jface.textfont“</span> <span class="code SchemaTag">default =</span> <span class="code SchemaCstring">”false“</span> <span class="code SchemaTag">&gt; &lt;/ editor&gt; &lt;/ extension&gt;</span></pre>

<p></p>

<h6 class="CaptionFigColumn SchemaHeader">API信息：</h6>如果使用命令属性，则将其视为外部程序命令行，该命令行将以与平台相关的方式执行。
<p>如果使用了启动器属性，编辑器也将被视为外部程序。在这种情况下，指定的类必须实现<samp>org.eclipse.ui。IEditorLauncher</samp> 。将实例化启动器，然后<samp>打开（IPath路径）</samp>以在提供的本地文件系统路径上启动编辑器。
</p><p>如果使用了class属性，工作台将假定它是一个内部编辑器，并且指定的类必须实现<samp>org.eclipse.ui。IEditorPart</samp> 。通常的做法是<samp>继承org.eclipse.ui。EditorPart</samp>定义新的编辑器类型时。还必须定义<samp>contributorClass</samp>属性。指定的类必须实现<samp>org.eclipse.ui。IEditorActionBarContributor</samp> ，用于向工作台菜单和工具栏添加新操作，以反映编辑器类型的功能。
</p><p>在工作台中，可能存在多个特定类型的开放编辑器。例如，可能有一个或多个开放的Java编辑器。为避免创建重复的动作和动作图像，编辑器概念已分为两部分。<samp>IEditorActionBarContributor</samp>负责创建操作。编辑负责行动实施。此外，每个开放编辑共享贡献者。由于此设计，一个或多个开放编辑器只有一组操作。
</p><p>贡献者将向工作台菜单和工具栏添加新操作，以反映编辑器类型。这些操作是共享的，并且在调用时，会对活动编辑器执行操作。通过调用<samp>IEditorActionBarContributor.setActiveEditor</samp>将活动编辑器传递给贡献者。工作台窗口中的操作和主要组的标识符在<samp>org.eclipse.ui中定义<samp>。IWorkbenchActionConstants</samp> 。这些应该用作添加新操作的参考点。通过使用path属性的以下值创建顶级菜单：</p><ul>
<li>添加 - 表示窗口菜单左侧的组。
</li>
</ul>只有在关联的编辑器处于活动状态时，才会显示添加到这些路径中的操作和菜单。关闭编辑器后，将删除菜单和操作。
<p></p>

<h6 class="CaptionFigColumn SchemaHeader">提供的实施：</h6>工作台提供“默认文本编辑器”。最终用户产品可能包含其他编辑器作为运输包的一部分。在这种情况下，编辑器将使用上述语法注册为扩展名。
<p></p>

<br>
<p class="note SchemaCopyright">版权所有（c）2002,2007 IBM Corporation等。<br>本程序及随附材料根据本发行版附带的Eclipse Public License 2.0条款提供，可从<a href="https://www.eclipse.org/legal/epl-2.0">https://www.eclipse.org/legal/epl-v20.html</a> / SPDX-License-Identifier获取。 ：EPL-2.0</p>
</body>
</html><html id="0131.iv-HowToCreateAHyperlinkToLinkTwoSections.html" dir="ltr"></html><html id="3102.key-and-mouse-events.html" dir="ltr"></html><html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="copyright" content="Copyright (c) 2012, 2019 EclipseSource. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page."></meta>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
  <title>RAP中的键和鼠标事件处理</title>
  <link rel="stylesheet" href="../../../PRODUCT_PLUGIN/book.css" type="text/css"></link>
</head>
<body dir="ltr">
  <h1>RAP中的键和鼠标事件处理</h1>
  <p>大多数SWT小部件提供的特殊事件非常适合该小部件的典型用例，例如选择事件和修改事件。如果可能，这些事件应始终优先于所有控件上可用的键和鼠标事件。不仅在适当的时间触发了更具体的事件并提供了所有相关信息，而且还可以通过RAP框架对性能，网络流量和兼容性进行更优化。尽管如此，有时还需要使用键和鼠标事件，尤其是在添加或修改窗口小部件行为或全局事件处理时。
  </p>
  <p>由于它们的多样性，不同的实现以及它们可能被解雇的频率很高，因此关键和鼠标事件是Web环境中的主要挑战，尤其是对于像RAP这样的客户端 - 服务器架构。虽然RWT为键和鼠标事件提供类似SWT的API，但应注意一些细节。
  </p>
  <h2 id="mouse">鼠标事件</h2>
   <p>几乎完全支持在<em><a href="../reference/api/org/eclipse/swt/events/MouseListener.html">MouseListener</a></em>接口中使用的所有鼠标事件类型。（他们只能检测前三个鼠标按钮。）他们是：</p>
    <ul>
      <li><em><a href="../reference/api/org/eclipse/swt/SWT.html#MouseDown">的MouseDown</a></em></li>
      <li><em><a href="../reference/api/org/eclipse/swt/SWT.html#MouseUp">的MouseUp</a></em></li>
      <li><em><a href="../reference/api/org/eclipse/swt/SWT.html#MouseDoubleClick">MouseDoubleClick</a></em></li>
    </ul>
    <p>但是，Java事件API不支持<em><a href="../reference/api/org/eclipse/swt/events/MouseTrackListener.html">MouseTrackListener</a></em>和<em>MouseWheelListener中</em>使用的所有其他事件鼠标事件类型。即：</p>
    <ul>
      <li><em><a href="../reference/api/org/eclipse/swt/SWT.html#MouseMove">的MouseMove</a></em></li>
      <li><em><a href="../reference/api/org/eclipse/swt/SWT.html#MouseEnter">的MouseEnter</a></em></li>
      <li><em><a href="../reference/api/org/eclipse/swt/SWT.html#MouseExit">MouseExit</a></em></li>
      <li><em><a href="../reference/api/org/eclipse/swt/SWT.html#MouseWheel">鼠标滚轮</a></em></li>
    </ul>
    <p>这些不能合理地实现为服务器端事件，因为网络延迟会使它们几乎无法使用。但是<a href="scripting.html">ClientListener</a>支持它们。
    </p>
    <p id="mouse_filter">鼠标事件仅发送到服务器（并且仅导致流量），如果它们在具有<em><a href="../reference/api/org/eclipse/swt/events/MouseListener.html">MouseListener</a></em>或附加鼠标事件的<a href="../reference/api/org/eclipse/swt/widgets/Listener.html">无类型侦听</a>器的窗口小部件上触发。作为副作用，使用<a href="../reference/api/org/eclipse/swt/widgets/Display.html#addFilter-int, org.eclipse.swt.widgets.Listener-">显示过滤器</a>不像SWT那样有效。例：</p>
    <pre class="lang-java">display.addFilter（SWT.MouseDown，new Listener（）{...}）;</pre>
    <p>这将捕获SWT中的所有鼠标事件，但在RWT中，它将仅接收那些已经具有鼠标侦听器的目标。
    </p>
  <h2 id="traverse">遍历事件</h2>
  <p>在我们讨论关键事件之前，重要的是要注意还有与之相关的<q><a href="../reference/api/org/eclipse/swt/events/TraverseEvent.html">遍历事件</a></q> 。遍历事件<em>在</em>键事件<em>之前</em>触发，并且仅针对可以更改焦点的键。（例如Escape，Tab，Arrows。）这个想法是你可以防止或操纵焦点变化，但RWT <strong>不支持</strong> 。 （有关解决方法，请参阅<a href="#prevent">“防止默认操作”</a> 。）
  </p>
  <h2 id="key">关键事件</h2>
  <h3>事件顺序和延迟</h3>
  <p>有两种类型的键事件， <em><a href="../reference/api/org/eclipse/swt/SWT.html#KeyDown">KeyDown</a></em>和<em><a href="../reference/api/org/eclipse/swt/SWT.html#KeyUp">KeyUp</a></em> 。在SWT中， <em>KeyDown</em>在按下键后被触发，然后在重复触发短暂延迟之后直到释放该键。然后解雇<em>KeyUp</em> 。<br>在RWT中， <em>KeyUp</em>会在<em>KeyDown</em>之后立即触发，即使密钥未释放也是如此。在短暂延迟之后，两个事件都会重复触发，直到释放密钥。在SWT和RWT中按住键的示例（从左到右阅读）：</p>
    <table border="1" cellpadding="5" cellspacing="0">
      <tr>
        <th align="left">SWT</th>
        <td style="padding:4px"><em>的KeyDown</em></td>
        <td>延迟</td>
        <td style="padding:4px"><em>的KeyDown</em></td>
        <td style="padding:4px"><em>的KeyDown</em></td>
        <td style="padding:4px"><em>KEYUP</em></td>
      </tr>
      <tr>
        <th align="left">RWT</th>
        <td style="padding:4px"><em>的KeyDown</em><br><em>KEYUP</em></td>
        <td>延迟</td>
        <td style="padding:4px"><em>的KeyDown</em><br><em>KEYUP</em></td>
        <td style="padding:4px"><em>的KeyDown</em><br><em>KEYUP</em></td>
        <td style="padding:4px">-</td>
      </tr>
    </table>
  <p>按下该键时（不是在释放时），会立即将关键事件发送到服务器。此请求会触发<em>KeyDown</em>和<em>KeyUp</em>事件。如果按下某个键，或者键入的速度非常快，则可以将新的键事件放入客户端的队列中，直到当前键事件处理完毕为止。这也会稍微增加延迟。<br>如果根本不接受任何延迟，则必须直接<a href="scripting.html">在客户端</a>上<a href="scripting.html">处理</a>关键事件，或者必须使用<a href="custom-widget.html">自定义小部件</a> 。
  </p>
  <h3 id="prevent">防止默认操作（CANCEL_KEYS）</h3>
  <p><em>KeyEvent</em>对象具有<em><a href="../reference/api/org/eclipse/swt/events/KeyEvent.html#doit">doit</a></em>字段（与非<a href="../reference/api/org/eclipse/swt/widgets/Event.html#doit">类型化事件一样</a> ），默认情况下为true。在SWT中，此字段可以设置为false以防止与按下或释放此键相关联的默认操作，例如在“ <em><a href="../reference/api/org/eclipse/swt/widgets/Text.html">文本”</a></em>小部件中插入字符。RAP在有限的容量内支持这种情况直到1.4，但支持在1.5中停止。这样做的原因是它不可靠地工作并且防止了许多错误被修复。
  </p>
  <p>作为替代方案，引入了<q>取消密钥</q>功能。它的灵活性稍差，但非常强大且仍然具有单一来源的能力。它允许使用<em><a href="../reference/api/org/eclipse/rap/rwt/RWT.html#CANCEL_KEYS">RWT.CANCEL_KEYS</a></em>常量将键或键组合列表附加到窗口小部件，而不是对键事件做出反应：</p>
   <pre class="lang-java">widget.setData（RWT.CANCEL_KEYS，new String [] {“CTRL + 1”，“CTRL + 2”}）;</pre>
   <p>当在小部件聚焦时按下给定的键组合时，操作被取消。它还取消了只能在SWT中的遍历事件上阻止的操作。更重要的是，事件可以抑制大多数（不是全部）浏览器快捷方式，否则会在执行密钥监听器的同一时刻触发。例如， <q><code>CTRL+F</code></q>通常会打开并将搜索对话框聚焦在浏览器中，但RAP应用程序可能希望使用它来聚焦自己的搜索字段。
  </p>
  <p>
    <em>补充说明：</em>
  </p>
    <ul>
      <li><em><a href="../reference/api/org/eclipse/rap/rwt/RWT.html#ACTIVE_KEYS">RWT.ACTIVE_KEYS</a></em>常量记录了用于标识键组合的有效模式。
      </li>
      <li><q><code>ALT+[letter]</code></q>模式的浏览器快捷方式通常无法被抑制。</li>
      <li>取消键不影响键事件处理。这意味着无论是否附加了侦听器，它都可以工作，并且取消的键仍然作为SWT键事件被触发。</li>
      <li>这种方法具有单一来源的能力。由于<em>doit</em>字段仍存在于RWT中，并且仅使用<em><a href="../reference/api/org/eclipse/swt/widgets/Widget.html#setData-java.lang.String-java.lang.Object-">setData</a></em>附加列表，因此可以并行使用这两种机制。</li>
      <li>取消密钥的替代方法是使用<a href="scripting.html">ClientListener</a> ，它完全支持关键事件的<code><a href="../reference/jsdoc/symbols/Event.html#doit">doit</a></code>标志。如果您希望根据仅包含静态列表的更复杂模式取消键，这将非常有用。</li>
    </ul>
  <h3 id="active">减少流量（ACTIVE_KEYS）</h3>
  <p>如上所述，每次击键创建至少一个HTTP请求。显然，这可以创造大量的流量。如果这是一个问题， <q>Active Keys</q>功能可以帮助您。与<a href="#prevent">取消键</a>完全相同，使用活动键可以将键列表或键组合附加到窗口小部件（使用<em><a href="../reference/api/org/eclipse/rap/rwt/RWT.html#ACTIVE_KEYS">RWT.ACTIVE_KEYS</a></em> ）。因此，只会发出与此列表中的组合匹配的关键事件，从而大幅减少流量。
  </p>
  <p>
    <em>补充说明：</em>
  </p>
    <ul>
      <li><em><a href="../reference/api/org/eclipse/rap/rwt/RWT.html#ACTIVE_KEYS">RWT.ACTIVE_KEYS</a></em>常量记录了用于标识键组合的有效模式。
      </li>
      <li>与取消密钥不同，活动密钥仅在附加密钥监听器时才相关。</li>
      <li>尽管有命名，但可以自由组合活动键和取消键。他们互不影响。</li>
      <li>只要关键监听器不依赖于活动密钥功能的预选，这种方法也是单一来源的。</li>
    </ul>
  <h3 id="global">全局关键事件处理（密钥绑定）</h3>
  <p><q>活动键</q>和<q>取消键</q>都可以在<em><a href="../reference/api/org/eclipse/swt/widgets/Display.html">Display</a></em>实例上使用，这对于允许键绑定（“快捷键”）很有用。在这种情况下，Active Keys的工作略有不同。与鼠标事件（见<a href="#mouse_filter">上文</a> ）一样， <a href="../reference/api/org/eclipse/swt/widgets/Display.html#addFilter-int, org.eclipse.swt.widgets.Listener-">显示过滤器</a>通常仅在其目标附加了侦听<a href="../reference/api/org/eclipse/swt/widgets/Display.html#addFilter-int, org.eclipse.swt.widgets.Listener-">器时</a>捕获关键事件。但是，附加要显示的活动键列表将导致与列表条目匹配的<i>所有</i>键事件被触发，而不管聚焦小部件如何。同样，显示器上附带的取消键列表始终有效。
  </p>
  <p>要实现全局快捷方式，首先要将所有快捷方式的列表附加为要显示的活动密钥。然后可以将相同的列表再次用于取消密钥，以防止任何密钥触发任何不期望的操作。然后必须<a href="../reference/api/org/eclipse/swt/widgets/Display.html#addFilter-int, org.eclipse.swt.widgets.Listener-">添加</a> <em><a href="../reference/api/org/eclipse/swt/SWT.html#KeyDown">SWT.KeyDown</a></em>的过滤器，其中必须确定和处理按下的组合键。
   </p>
   <p>应谨慎选择全局快捷方式的组合，这样它们就不会干扰小部件或浏览器的任何核心功能。例如， <q><code>SHIFT+[arrow key]</code></q>不是一个好选择，因为许多小部件都会使用它来进行选择。同样，许多用户可能习惯使用F5重新加载页面。组合<q><code>CTRL+TAB</code></q>和<q><code>ALT+TAB</code></q> <strong>不能使用</strong> 。他们永远不会被解雇，也无法取消。
  </p>
  <h3>摘要：</h3>
   <p>如果有的话，将发出关键事件：</p>
     <ul>
       <li>组合键位于显示活动键列表中。</li>
       <li>焦点小部件附加了一个密钥监听器，没有活动密钥列表。</li>
       <li>焦点小部件附加了一个键侦听器，键组合是其活动键列表。</li>
     </ul>
    <p>如果浏览器支持关键事件，则会取消该关键事件，如果是这样，则会取消：</p>
     <ul>
       <li>组合键位于显示取消键列表中。</li>
       <li>焦点小部件有一个取消键列表，其中包含组合键。</li>
       <li>ClientListener将<code>doit</code>标志设置为false。</li>
     </ul>
   <h3>助记符和加速器</h3>
   <p>助记符和加速器为通过<a href="#global">全局键事件处理</a>实现快捷方式提供了更简单的替代方案，但也会影响传统的键事件。
   </p>
   <p>加速器是可以使用<em><a href="../reference/api/org/eclipse/swt/widgets/MenuItem.html#setAccelerator-int-">MenuItem＃setAccelerator</a></em>方法与<em>MenuItem</em>小部件关联的快捷方式。输入快捷方式将在关联的<em>MenuItem</em>上触发<em>Selection</em>事件。快捷方式也将添加到显示<a href="#global">当前的ACTIVE_KEYS列表中</a> 。<strong>注意不要覆盖它们。</strong>
   </p>
   <p>助记符是使用键盘选择小部件的简单方法。窗口小部件文本中的任何字符都可以通过在它之前插入＆符号（ <code>&amp;</code> ）来制作助记符。可以在<a href="../reference/api/org/eclipse/rap/rwt/RWT.html#MNEMONIC_ACTIVATOR">此处</a>找到支持的小部件列表。
   </p>
   <p>必须通过设置使助记符可见的修饰键或键组合为UISession启用助记符：</p>
<pre class="lang-java">display.setData（RWT.MNEMONIC_ACTIVATOR，“CTRL + ALT”）;</pre>
  <p><em>CTRL</em> ， <em>SHIFT</em>和<em>ALT的</em>任何组合都是有效的，但<em>ALT</em>不应单独使用，因为浏览器可能会为自己保留此密钥。保持助记符激活器将为所有屏幕上的助记符字符加下划线，然后按匹配键将选择或聚焦关联的窗口小部件。
  </p>
  <p>助记符的优先级高于键绑定，加速器或键事件。这也意味着<strong>不会触发触发mnemnoic的组合键事件</strong> 。
  </p>
</body>
</html><html id="0188.sub-TutT7CreateOrdersSubRpt.html" dir="ltr"></html><html lang="zh-Hans" dir="ltr" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"></meta>
    <meta http-equiv="Content-Style-Type" content="text/css"></meta>
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>创建订单子报表</title>
    <link rel="StyleSheet" href="css/subreport.css" type="text/css" media="all"></link>
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"></link>
    <link rel="StyleSheet" href="webworks.css" type="text/css" media="all"></link>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
  </head>
  <body dir="ltr">
    <div style="text-align:left">
      <table cellspacing="0" summary="">
        <tr>
          <td>
            <a href="sub-TutT6CreateCustomerMasterRpt.html"><img src="images/prev.gif" alt="以前" border="0"></a>
          </td>
          <td>
            <a href="sub-TutT8LinkOrdersSubrpttoMasterRpt.html"><img src="images/next.gif" alt="下一个" border="0"></a>
          </td>
        </tr>
      </table>
    </div>
    <hr align="left">
    <blockquote>
      <h3 class="N_TutorialTask">任务7： <a name="187726">创建订单子报表</a></h3>
      <p class="b_Body"><a name="187728">订单子报告以行和列格式列出每个客户的订单。它显示每个订单的订单号和日期。要遍历Orders数据集行并以行和列格式显示它们，可以使用table元素。</a></p>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">1</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="187730">选择“布局”以继续编辑报告。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">2</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="187732">从调色板拖动一个表格元素，并将其放在详细信息区域中的[CUSTOMERNAME]数据元素下面。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">3</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="284754">在“插入表”中，指定以下值：</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="b2_Bullet2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="b2_Bullet2_inner" style="width:14.1732pt;white-space:nowrap">
                <img src="Bullet.png" alt="*" border="0" width="6" height="6">
              </div>
            </td>
            <td width="100%">
              <div class="b2_Bullet2_inner"><a name="284755">在“列数”中，键入2。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="b2_Bullet2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="b2_Bullet2_inner" style="width:14.1732pt;white-space:nowrap">
                <img src="Bullet.png" alt="*" border="0" width="6" height="6">
              </div>
            </td>
            <td width="100%">
              <div class="b2_Bullet2_inner"><a name="284765">在“详细信息数”中，键入1。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="b2_Bullet2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="b2_Bullet2_inner" style="width:14.1732pt;white-space:nowrap">
                <img src="Bullet.png" alt="*" border="0" width="6" height="6">
              </div>
            </td>
            <td width="100%">
              <div class="b2_Bullet2_inner"><a name="284790">在“数据集”中，从下拉列表中选择“订单”。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_i_Indent1"><a name="284802">选择确定。表格将显示在列表的详细信息区域中，</a> <a href="#286283" title="创建订单子报表">如图12-12</a> <a name="284802">所示</a> 。</div>
      <p class="i2_Image2"><a name="284809"><img class="Default" src="images/optrpt_tableindesign.png" alt="图12-12在列表的详细信息区域中插入的表" style="display:inline;float:none;left:0.0;top:0.0"></a></p>
      <div class="fc2_FigCall2Title">
        <b class="Bold">图12-12</b> <a name="286283">在列表的详细信息区域中插入的表</a></div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">4</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="222807">选择Data Explorer，展开Data Sets，然后展开Orders。您在查询中指定的列显示在“订单”下方。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">五</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="187738">从数据资源管理器中拖动ORDERNUMBER，并将其放在表的详细信息行的第一个单元格中。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_i_Indent1"><a name="246762">在布局编辑器中，包含已删除数据集字段的表格单元格包含显示[ORDERNUMBER]的数据元素。在此数据元素上方是布局编辑器添加到标题行的标签元素。此标签将字段名称显示为静态文本，并用作列标题。</a></div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">6</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="246763">从数据资源管理器中拖动ORDERDATE，并将其放在详细信息行的第二个单元格中。报告设计应</a> <a href="#227114" title="创建订单子报表">如图12-13</a> 所示</a> 。</div>
            </td>
          </tr>
        </table>
      </div>
      <p class="i2_Image2"><a name="246770"><img class="Default" src="images/oprpt_layout3.png" alt="图12-13报告设计，包括订单子报告" style="display:inline;float:none;left:0.0;top:0.0"></a></p>
      <div class="fc2_FigCall2Title">
        <b class="Bold">图12-13</b> <a name="227114">报告设计，包括订单子报告</a></div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">7</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="219252">按订单号对订单行进行排序。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">1</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="187749">选择订单表。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">2</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="187750">在Property Editor中，选择Sorting。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">3</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="187752">在“排序”页面中，选择“添加”以创建排序表达式。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">4</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="284836">在New Sort Key中，指定以下值，然后选择OK：</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="b3_Bullet3_outer" style="margin-left:28.3464pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="b3_Bullet3_inner" style="width:14.173199999999997pt;white-space:nowrap">
                <img src="Bullet.png" alt="*" border="0" width="6" height="6">
              </div>
            </td>
            <td width="100%">
              <div class="b3_Bullet3_inner"><a name="284840">在Key中，从下拉列表中选择ORDERNUMBER。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="b3_Bullet3_outer" style="margin-left:28.3464pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="b3_Bullet3_inner" style="width:14.173199999999997pt;white-space:nowrap">
                <img src="Bullet.png" alt="*" border="0" width="6" height="6">
              </div>
            </td>
            <td width="100%">
              <div class="b3_Bullet3_inner"><a name="284841">使用其他字段的默认值。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">8</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="291203">预览报告。该报告应</a> <a href="#291222" title="创建订单子报表">如图12-14</a> 所示</a> 。</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_i_Indent1"><a name="339329">为每个客户显示相同的订单记录，因为您在创建数据集参数CustID时为customerNumber指定了默认值103。使用此默认值，orders子报告始终显示客户103的订单记录。解决方案是每次主报表中的客户行发生更改时动态更新CustID参数的值。此过程在下一个任务中描述。</a></div>
      <div class="N_i_Indent1"><a name="339332">列标题以粗体显示并居中，因为BIRT报告设计器使用浏览器的默认格式放置在表头中的元素。您可以在以后的任务中重新格式化这些元素。</a></div>
      <p class="i2_Image2"><a name="291210"><img class="Default" src="images/oprpt_output2.png" alt="图12-14显示重复订单记录的报告预览" style="display:inline;float:none;left:0.0;top:0.0"></a></p>
      <div class="fc2_FigCall2Title">
        <b class="Bold">图12-14</b> <a name="291222">显示重复订单记录的报告预览</a></div>
    </blockquote>
    <hr align="left">
    <table align="right" summary="">
      <tr>
        <td class="WebWorks_Company_Name_Bottom">
          <a href="notices.html">（c）版权Actuate Corporation 2013</a>
        </td>
      </tr>
    </table>
  </body>
</html><html id="1890.new_in_2.3.html" dir="ltr"></html><html dir="ltr">
<head>
    <link rel="stylesheet" type="text/css" href="../css/style.css"></link>
    <link rel="stylesheet" type="text/css" href="../css/nn.css"></link>
	<title>OTDT 2.3  - 新的和值得注意的</title>
</head>
<script language="JavaScript">
	// web: var OTJLD_BASE = "http://www.objectteams.org/def/1.3.1"; //"../otjld/def"
	// help:
	var OTJLD_BASE = "../otjld/def"
	var HELP_ROOT = "http://help.eclipse.org/luna/topic" // only if not already replaced
  	function replaceROOTS() {
  		var baseURLskip = document.URL.lastIndexOf("/");
    	var anchors = document.getElementsByTagName("a");
    	for (i = 0; i < anchors.length; i++) {
      		var item = anchors[i];
      		var relref = item.href.substring(baseURLskip+1)
      		if (relref.indexOf("OTJLD") == 0) {
  				item.href = relref.replace("OTJLD", OTJLD_BASE);
      		} else if (relref.indexOf("PLUGINS_ROOT") == 0) {
      			item.href = relref.replace("PLUGINS_ROOT", HELP_ROOT);
      		}
    	}
  	}
</script>
<body dir="ltr" onload="replaceROOTS();">
<h1>OTDT 2.3  - 新的和值得注意的</h1>
<div class="navigation">在此页面上： <!--a href="#metrics">&bull; Metrics Plug-in</a--> <!--a href="#configuration">&bull; Configuration</a--> <!--a href="#views">&bull; Views/Dialogs</a--> <!--a href="#assist">&bull; Content Assist</a--> <!--a href="#refactor">&bull; Refactoring</a--> <!--a href="#formatting">&bull; Formatting</a--> <!--a href="#debug">&bull; Run/Debug</a--> <a href="#language">•语言</a> <!--a href="#api">&bull; API</a--> <!--a href="#compiler">&bull; Compiler</a--> <a href="#otre">•运行时</a> <a href="#otequinox">•OT / Equinox</a> <!--a href="#releng">&bull; Release Engineering</a-->  
</div>
<table cellpadding="10" cellspacing="0" width="100%">
  <colgroup>
  <col width="20%">
  <col width="80%">
  </colgroup>
  <tbody>
<td><!--
  <tr><td colspan="2" id="NAME"><h2>HEADING</h2></td></tr>
  <tr>
    <td><p align="right"><b>DESC</b><br>
        <span class="since">since&nbsp;0.7.1</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/308029">308029</a></p></td>
    <td><p>
    		
    	</p>
    	<p><img alt="TEXT" src="../images/screenshots/NN07/.png"></p>
    	<p></p>
    </td>
  </tr>
  <div class="listbox"><div class="listing"><pre><code class="keyword">public team class</code> <font color="blue">MyTeam</font> {
}</pre></div></div>
-->
  <tr></tr></td><td colspan="2" id="language"><h2>语言</h2></td>
  <tr>
    <td id="java8"><a href="PLUGINS_ROOT/org.eclipse.jdt.doc.user/whatsNew/jdt_whatsnew.html#JavaCompiler"><img align="right" src="../../images/java8.png"></a><br>
    	<p align="right"><b>采用Java 8</b><br>
    	 <br>
        <!--span class="since">since&nbsp;2.3</span><br--> <a class="buglink" title="[java8]从JDT的BETA_JAVA8分支采用并合并Java 8的实现" href="https://bugs.eclipse.org/384991" target="_blank">384991</a></p></td>
    <td>
    	<div style="background-color:#fffce4;padding:4px;border:solid 2px #e0e0f0;color:#300080"><strong>OT / J已与Java™8完全集成。</strong><br>这意味着lambda表达式，方法引用，默认方法，类型注释等都可以在OT / J程序中使用。此外，OT / J中的角色可以绑定到包含任何这些新功能的Java 8类。
		</div>
		<h3>语法挑战</h3>
		<p>从语法上讲，Java 8中的一些新功能看起来与OT / J类似：</p>
		<ul>
		<li>用于lambda表达式的箭头“ <code>-&gt;</code> ”与OT / J用于<a class="otjldlink" href="OTJLD/s3.html">标注绑定</a>和<a class="otjldlink" href="OTJLD/s3.html#s3.2">角色到基础参数映射的</a>标记相同（另请参见<a class="otjldlink" href="OTJLD/s4.html#s4.4">4.4</a> ）。</li>
		<li>用于类型注释的“ <code>@</code> ”标记（JSR 308）与OT / J用于表示<a class="otjldlink" href="OTJLD/s1.html#s1.2.2.b">团队锚点的</a>标记相同</li>
		</ul>
		<h3>清洁整合</h3>		
		<p>尽管存在这些语法上的相似性，但为了与Java 8的语法协调，没有必要更改OT / J.因此，最小的，不可避免的限制（“团队”和“内部”是OT / J中的无条件关键字）每个合法的Java 8程序也是合法的OT / J程序。相反，早期版本的每个合法OT / J程序仍然是合法的OT / J程序。
		</p>
		<h3>功能互动</h3>
		<p>在大多数情况下，Java 8中的新功能可以被视为与OT / J引入的功能正交：</p>
		<ul>
		<li>Java 8中的Lambda表达式是关于实现算法的细节</li>
		<li>Java 8中的类型注释是关于改进类型系统的</li>
		<li>OT / J中的角色和团队是关于将单个对象组合到系统中</li>
		</ul> 
		<p>关于<strong>类型检查</strong> ，以下特性需要在幕后进行重要工作以协调各种类型规则：具有增强型类型推断的泛型，类型注释以及最终：角色类型，所有这些都有助于形成非常丰富的类型概念。鉴于Eclipse Compiler for Java中的类型推断已经完全重写，采用OT / J的重写需要对该实现有深入的了解。</p>
		<p>由于引入了默认方法， <strong>继承</strong>现在有更多选项。这与OT / J的<a href="OTJLD/s1.html#s1.3.1">隐式继承</a>相结合提出了新的挑战，其中一些细节可能在2.3版本之后仍需要更多的工作。从技术上讲，OT / J现在支持两种不同风格的多重继承，但从细节来看，很明显这两个概念都追求完全不同的目标。预计这些概念不会竞争解决任何现实世界的设计任务。
			</p>
    </td>
  </tr>

  <tr><td colspan="2" id="otre"><h2>对象团队运行时环境</h2></td></tr>
  <tr>
    <td><p align="right"><b>新的字节码编织器</b><br>
         <br>
        <a class="buglink" title="支持运行时编织" href="https://bugs.eclipse.org/398232" target="_blank">398232</a></p></td>
    <td><p>从2.3开始，OTDT附带一个新的字节码编织器作为传统<a href="PLUGINS_ROOT/org.eclipse.objectteams.otdt.doc/guide/features.html#execution">OTRE</a>的替代品。</p>
    	<p>这个称为“ <strong>对象团队动态运行时环境（OTDRE）</strong> ”的<strong>编织器的</strong>开发目的是支持<strong>运行时编织</strong> ，即支持在应用程序启动期间未知的角色和团队的集成。此功能已完全实现，但仍需要开发充分利用新灵活性的基础架构（例如，允许运行时部署新监控团队类的监控控制台）。</p>
    	<p>OTDRE使用字节码库<strong>ASM实现</strong> ，而不是基于BCEL的OTRE实现。 ASM采用更现代的方法，可以提高织造性能。ASM也得到积极维护，遗憾的是，BCEL不再适用。</p>
    </td></tr>
  <tr>
  <td class="noborder"><a href="#java8"><img align="right" src="../../images/java8.png"></a></td>
  <td class="noborder"><p>通过使用最新版本的ASM，OTDRE能够处理甚至<strong>Java 8的</strong>类文件，这是使用BCEL无法实现的。因此，OTDRE的具体目标是支持Java 8，尽管它还没有达到OTRE多年来获得的成熟度。</p>
    	<p>编织器支持两种编织器，通过生成要从编织代码调用的特定基础结构。由于<strong>编织方案</strong>的根本区别，有必要在编译时选择，编织者应该作为目标。请参阅开发人员指南中有关<a href="../weavingscheme.html">目标编织方案</a>的部分。</p>
    </td>
  </tr>

  <tr><td colspan="2" id="otequinox"><h2>OT /春分</h2></td></tr>
  <tr>
    <td><p align="right"><b>迁移到新的Equinox实施</b><br>
        <span class="since">从2.3M2开始</span><br>
        <a class="buglink" title="将OT / Equinox迁移到标准的OSGi WeavingHook" href="https://bugs.eclipse.org/406518" target="_blank">406518</a></p></td>
    <td><h3>大多数兼容的重新实现</h3>
    	<p>OT / Equinox的实现已被重写，当Equinox撤销了一个名为“Adapter Hooks”的“非官方API”时，这是必要的，OT / Equinox已经依赖它多年。</p>
    	<p>在表面上，OT / Equinox技术的常规客户几乎看不到这种情况;支持现有的扩展点<a href="PLUGINS_ROOT/org.eclipse.objectteams.otdt.doc/reference/extension-points/org_eclipse_objectteams_otequinox_aspectBindings.html"><code>aspectBindings</code></a>不变。</p>
    	<p>单个表面更改考虑了如何建立基类和适应团队之间的可见性：在新实现中，每个方面包必须<strong>导出包含一个或多个团队类的所有包</strong> 。这是一项硬性要求，缺少的导出将被标记为错误。提供了一个新的<strong><a href="#qfAddExport">快速修复程序</a></strong>来支持此任务。</p>
    	<h3>目前的局限</h3>
    	<p>OT / Equinox的一些附加功能目前尚未实现，并计划在Luna服务版本中重新添加：</p>
    	<ul>
    	<li><a href="PLUGINS_ROOT/org.eclipse.objectteams.otdt.doc/reference/extension-points/org_eclipse_objectteams_otequinox_aspectBindings.html#e.forcedExports">强迫出口</a></li>
    	<li><a href="PLUGINS_ROOT/org.eclipse.objectteams.otdt.doc/reference/extension-points/org_eclipse_objectteams_otequinox_liftingParticipant.html">提升参与者</a>
    	</li><li><a href="PLUGINS_ROOT/org.eclipse.objectteams.otdt.doc/reference/extension-points/org_eclipse_objectteams_otequinox_aspectBindingNegotiators.html">Aspect Binding Negotiation</a>
    	</li></ul>
    	<h3>细节</h3>
    	<p>以前，我们已经建议可以通过从文件<code>configuration/config.ini</code>删除特定行来<strong>禁用</strong> OT / Equinox。这条线不再存在。相反，现在可以使用以下Java属性禁用OT / Equinox：</p>
    	<pre>-Dot.equinox = FALSE</pre>
    	<p>Equinox <strong>延迟加载时</strong> ，新的实现也可以更好地发挥作用：之前，只要受影响的基本<em>包</em>被激活，就会触发团队的加载和激活。鉴于团队加载/激活可以反过来触发其他捆绑加载/激活，在系统启动期间可以观察到很多加载活动，这不是绝对必要的。新实现等待直到实际访问受影响的基<em>类</em> ，这是激活相应团队的最新可能点。结果，可以显着减少对装载顺序的影响。</p>
    	<h3>可移植性</h3>
    	<p>新实现不再依赖于“非官方API”，而是依赖于OSGi标准<strong>WeavingHook</strong> 。这样，OT / Equinox的基本功能实际上也适用于其他OSGi容器。当然，使用扩展点来声明团队被激活仍然取决于Equinox，但这是一个很好的孤立的问题，并将其移植到任何其他配置方式应该是直截了当的。</p>
    	<h3>可视化不变</h3>
		<p>作为兼容性的（部分）证明，现有的<strong>OT / Equinox Monitor</strong>视图在新实现之上工作，而不需要更改单行代码。</p>
			<img src="../images/screenshots/otequinoxMonitor.png" width="519" alt="OT / Equinox Montitor视图">
		<p>事实上，这个视图可以用来观察OT / Equinox在两个方面的不影响：</p>
		<ul>
		<li>尚未知道/显示其基类尚未加载的团队。要查看突出显示的BrandingAdaptor，需要打开“ <code class="UI">Help &gt; Installation Details &gt; Plug-ins</code>对话框</li>
		<li>适应已被垃圾收集的基本实例的角色实例也将从内存中删除，因此不再显示在监视器视图中（参见“＃roles”列中的多个零）。</li>
		</ul>
    </td>
  </tr>
  <tr>
    <td id="qfAddExport"><p align="right"><b>快速修复以添加方面导出</b><br>
        <span class="since">从2.3M2开始</span><br>
        <a class="buglink" title="将OT / Equinox迁移到标准的OSGi WeavingHook" href="https://bugs.eclipse.org/406518#c37" target="_blank">406518＃C37</a></p></td>
    <td><p>OT / Equinox的新实现需要导出包含团队的所有包（参见上文）。如果缺少此导出，则会针对插件的清单标记错误，并提供快速修复以便以推荐格式添加所需的导出。
    	</p>
    	<a href="../images/screenshots/NN23/QFAddAspectExport.png"><img src="../images/screenshots/NN23/QFAddAspectExport.png" width="519" alt="快速修复以添加所需的方面导出"></a>
    	<p>应用快速修复会产生以下结果：</p>
    	<a href="../images/screenshots/NN23/QFAddAspectExport1.png"><img src="../images/screenshots/NN23/QFAddAspectExport1.png" width="519" alt="快速修复的结果"></a>
    	<p>屏幕截图显示了一个包导出，其中包含<em>推荐的</em>属性<code>ot-aspect-host</code> ，它将导出标记为仅用于让编织代码调用到团队中。此外，此属性的值标识声明方面包，即使在拆分包的情况下，它也在内部用于唯一标识此包。
   		</p>
    	<p>最后，导出可以使用<code>x-internal</code>或<code>x-friends</code>来防止意外使用此包。
    	</p>
    	<p>一旦我们重新实施Forced Exports概念（见上文），我们可能会考虑删除导出包含团队的所有包的附加要求。
   		</p>    
  	</td>
  </tr>
  	
<td><!--

  <tr><td colspan="2" id="debug"><h2>Run / Debug</h2></td></tr>
  <tr>
    <td><p align="right"><b>HEADING</b><br>
        <span class="since">since&nbsp;2.1M6</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/301314">301314</a></p></td>
    <td><p>PARA</p>
    </td>
  </tr>

  <tr><td colspan="2" id="api"><h2>API</h2></td></tr>
  <tr>
    <td><p align="right"><b>HEADING</b><br>
        <span class="since">since&nbsp;2.1M6</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/301314">301314</a></p></td>
    <td><p>PARA</p>
    </td>
  </tr>

  <tr><td colspan="2" id="compiler"><h2>Compiler</h2></td></tr>
  <tr>
    <td><p align="right"><b>HEADING</b><br>
        <span class="since">since&nbsp;2.1M6</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/301314">301314</a></p></td>
    <td><p>PARA</p>
    </td>
  </tr>

 
  <tr><td colspan="2" id="releng"><h2>Release Engineering</h2></td></tr>
  <tr>
    <td><p align="right"><b>HEADING</b><br>
        <span class="since">since&nbsp;2.1M6</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/301314">301314</a></p></td>
    <td><p>PARA</p>
    </td>
  </tr>
-->  
</td></tbody></table>
</body><html id="0795.JSFTools_tutorial.html" dir="ltr"></html><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" gtc:encodedoriginal="PCFET0NUWVBFIEhUTUwgUFVCTElDICItLy9XM0MvL0RURCBIVE1MIDQuMDEgVHJhbnNpdGlvbmFsLy9FTiI-">
<html dir="ltr">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
<title>WTP教程 -  JavaServer Faces工具教程</title>


<link rel="stylesheet" href="default_style.css"></link>

</head>


<body dir="ltr" link="#0000ff" vlink="#800080">

<div align="right"> 
<table border="0" cellpadding="2" cellspacing="0" width="100%">

	<tbody>

		<tr>

			<td colspan="2" align="left" bgcolor="#0080c0" valign="top"><b><font color="#ffffff">Eclipse Corner文章</font></b></td>

		</tr>

	</tbody>
</table>

</div>

<div align="left">
<h1><img src="images/Idea.jpg" align="middle" height="86" width="120"></h1>

</div>

<p></p>

<h1 align="center">WTP教程 -  JavaServer Faces工具教程</h1>

<blockquote><b>摘要</b> <br>在本教程中，我们将构建并执行JavaServer Faces应用程序，并突出显示JSF Tools Project提供的功能。
<p><b>作者：Oracle公司的Raghu Srinivasan。</b> <br>

<font size="-1">2009年6月15日</font></p>

</blockquote>

<hr width="100%">
<h3>介绍</h3>

<p>在本教程中，我们将使用JavaServer Faces功能创建和执行Web应用程序。WTP JSF Tools项目提供了简化应用程序构建，配置和执行的功能。其中包括用于可视化编辑JSF-JSP网页的Web页面编辑器，JSF-JSP页面的语法和语义验证，用于编辑应用程序配置资源文件的Faces Configuration Editor。<br>在尝试本教程之前，您可能希望访问<a href="http://www.eclipse.org/webtools/community/tutorials/BuildJ2EEWebApp/BuildJ2EEWebApp.html">构建和运行Web应用程序</a> 。该教程涵盖了本教程未提供的服务器实例的设置。<a id="setup"></a></p>

<h3>建立</h3>
<p></p>
<ul>
	<li><a href="http://java.sun.com/javase/downloads/index.jsp">Java SE 6开发套件（JDK）</a></li>
	<li><a href="http://eclipse.org/downloads/">Eclipse 3.5</a></li>
	<li><a href="http://download.eclipse.org/webtools/downloads/">Eclipse Web Tools Platform Project（WTP）3.1</a></li>

	<li><a href="http://tomcat.apache.org/">Apache Tomcat 6.0</a></li>
	<li><a href="http://java.sun.com/javaee/javaserverfaces/download.html">JavaServer Faces RI v1.2</a></li>
	<li>JSP（tm）标准标记库1.2实现</li>
</ul>
<p><a id="reglibs"></a></p>
<h3>使Web页面编辑器成为JSP页面的默认编辑器</h3>JSF工具项目提供的网页编辑器（WPE）未注册为JSP文件的默认编辑器。您可以按照以下步骤使WPE成为JSP文件的默认编辑器：<ul>
	<li>导航到“窗口” - &gt;“首选项...” - &gt;“常规” - &gt;“编辑器” - &gt;“文件关联”</li>
	<li>在“文件类型”部分中，选择“* .jsp”</li>
	<li>在“关联的编辑器”部分中，选择“网页编辑器”</li>
	<li>选择“默认”按钮</li>
</ul>

<p><a id="newproject"></a></p>
<h3>创建JavaServer Faces项目</h3>

<p>创建一个名为<b>JSFTutorial</b>的新动态Web应用程序。将目标运行时设置为<b>Apache Tomcat 6.0</b><br>在<b>配置</b>部分中，选择<b>JavaServer Faces Project v1.2</b> 。跳过接下来的两个面板，进入JSF功能页面。<br>
<br>
<img alt="新的动态Web应用程序" src="images/new-dynamic-web-project.png" height="588" width="554"></p>


<br>

<p>在JSF Capabilities页面上，从JSF Library的Type下拉列表中，选择<b>User Library</b> 。<br>
<br>

<img alt="JSF功能页面" src="images/jsf-capabilities-library.png"></p>


<br>
<p>单击“ <b>下载库”</b>图标。将显示“下载库”对话框，其中包含JSF实现JAR文件的提供程序列表。从Sun Microsystem中选择库。单击<b>下一步</b> 。接受许可证并单击“ <b>完成”</b> <br><br>
<img alt="JSF功能页面" src="images/jsf-download-library.png"></p>


<br>该工具下载JAR文件，创建JDT用户库并将其添加到当前项目中。如果未选择新库，请选中该库的复选框。接下来，选择“ <b>管理库”</b>图标。<br>
<br>
<img alt="JSF功能页面" src="images/jsf-capabilities-library-2.png">
<br>
<br>创建JDT用户库以保存JSTL jar文件。谢谢你好<b>。</b>
<br><br>
<img alt="JSF功能页面" src="images/jsf-new-library.png">
<br>
<br>JSTL库显示在JSF Capabilities对话框中。选择libray并单击<b>Finish</b>
<br><br>
<img alt="JSF功能页面" src="images/jsf-add-jstl-library.png">
<br>
<br>
<p>您的JSF应用程序已创建。请注意，web.xml文件已使用Faces Servlet和servlet-mapping进行更新，已创建存根JSF应用程序配置文件（faces-config.xml），并且已使用实现jar更新了构建路径。<br>
<br>
<br>
<img alt="" src="images/project-explorer.png" height="283" width="389"></p>


<br>
<p><img src="images/note.gif" height="13" width="62">如果您有一个现有的动态Web应用程序，则可以通过以下方式添加JSF功能：<br>
<b>项目属性&gt;项目构面&gt;添加\删除项目构面...</b></p>

<p><a id="newpage"></a></p>

<h3>创建一个JSF JSP页面</h3>
<p>使用JSP页面向导在新应用程序的Web Content文件夹中创建名为<b>login.jsp</b>的页面。在向导的“选择模板”页面中，选择“ <b>新建JSP（html）”</b>模板。单击完成。该页面将在网页编辑器中打开，如下所示<br>
<br>
<br>
<img alt="网页编辑器" src="images/web-page-editor.png" height="589" width="957"></p>

<br>打开“属性视图”。在设计器画布上单击鼠标右键，然后从上下文菜单中选择“显示” - &gt;“属性”。等待“读取属性”对话框消失。
<br>
<br>
<h5>将CommandButton添加到画布。</h5>
<ul>
	<li>在<b>Palette View中</b> ，单击<b>JSF HTML</b>部分以显示组件列表。</li>
	<li>将CommandButton拖放到画布上。请注意，编辑器使用<b>&lt;f：view&gt;</b>和<b>&lt;h：form&gt;</b>标记包装CommandButton。</li>
	<li>在属性视图中，单击“ <b>快速编辑”</b> 。</li>
	<li>将<b>Value</b>属性设置为<b>Login</b> 。</li>
	<li>将<b>Action</b>属性设置为<b>login</b></li>
</ul>
<br>
<br>
<img alt="WPE-Add CommandButton" src="images/wpe-add-cmd.png" height="447" width="854">


<br>
<h5>添加PanelGrid</h5>
<ul>
	<li>从Palette View中，将PanelGrid拖放到画布上。注意掉落目标的反馈。</li>
	<li>在命令按钮之前删除Panel Grid，但在Form标记内。Panel Grid是使用一组预定义的OutputText组件创建的。</li>
</ul>
<h5>修改Panel Grid内的组件</h5>
<ul>
	<li>单击OutputText <b>Item2</b>并单击Delete</li>
	<li>在<b>Item1</b>之后和<b>Item3</b>之前添加InputText（Palette视图中的文本输入）标记</li>
	<li>删除OutputText， <b>第4项</b></li>
	<li>在<b>Item3</b>之后添加InputSecret（Palette视图中的Secret Input）标记</li>
	<li>单击OutputText， <b>Item1</b> 。将其源视图中的值更改为<b>名称</b></li>
	<li>单击OutputText， <b>Item3</b> 。将其在“源视图”中的值更改为“ <b>密码”</b></li>
	<li>单击“ <b>预览”</b>选项卡以查看在浏览器中呈现的页面</li>
	<li>单击<b>Name</b>旁边的InputText标签。在Property View中，将value属性设置为<b>＃{loginBean.name}</b> 。</li>
	<li>保存页面。编辑器将标记一个警告，指示无法解析变量<b>loginBean</b> 。</li>
</ul>
<br>
<br>
<img alt="WPE-Add PanelGrid" src="images/wpe-add-panel.png" height="438" width="892">


<br>

<a id="faces-config-bean"></a>在Project Explorer中，展开节点JSFTutorial-&gt; WebContent。双击<b>faces-config.xml</b> 。这将启动Faces Configuration编辑器。选择<b>ManagedBean</b>选项卡。

<br>
<br>
<img alt="Faces Config Editor Managed Bean" src="images/facesconfig-editor-bean.png" height="423" width="694">
<br>
<br>单击“ <b>添加”</b>按钮。这将启动New Managed Bean向导。选择“ <b>创建新Java类</b> ”选项。在下一个向导面板中，输入包as， <b>com.tutorial</b>和类名为<b>LoginBean</b> 。单击“完成”按钮。
<br>
<br>
<img alt="新管理的Bean" src="images/new-managedbean.png" height="234" width="495">
<br>
<br>这将创建Java类并将其注册为托管bean。保存Faces配置编辑器。要编辑Java类，请单击Managed bean页面中的超链接<b>ManagedBean类</b> ，如下图所示。这将启动Java编辑器。
<br>
<br>
<img alt="Faces Configuration Editor  -  Managed Bean选项卡" src="images/fce-managedbean-class.png" height="181" width="599">
<br>
<br>

<p><a id="createbean"></a></p>
<br>编辑Java类<b>com.tutorial。LoginBean</b> 。添加以下代码并保存。
<br>
<br>
<img alt="LoginBean" src="images/loginbean.png" height="491" width="405">

<br>
<a id="el-validate-bean"></a>在Project Explorer视图中，右键单击JSP页面<b>login.jsp，</b>然后从上下文菜单中选择<b>Validate</b>选项。请注意，该页面现在应该有效。
<br>
<br>
<a id="el-ca-bean-properties"> </a>在网页编辑器的源页面中，添加JSF标记<b>&lt;h：inputSecret value =“＃{}”&gt; &lt;/ h：inputSecret&gt;</b> 。将光标放在括号内， <b>按Ctrl +空格键</b> 。您应该看到一个弹出窗口，其中包含所有隐式对象的列表以及上面定义的托管bean。选择托管bean， <b>loginBean</b>
<br>
<br>
<img alt="在EL中验证bean属性" src="images/el-ca-all.png" height="186" width="715">
<br>
<br>输入未在托管bean中定义的属性名称（例如x）并保存更改。编辑器将报告无法解析该属性的警告。
<br>
<br>
<img alt="在EL中验证bean属性" src="images/validate-bean-properties.png" height="141" width="509">
<br>
<br>删除无效属性。在<b>'后面<b>按Ctrl +空格键</b> <b>。'</b>在豆名中。您应该看到一个弹出窗口，其中列出了托管bean中定义的属性。从菜单中选择<b>密码</b> 。
<br>
<br>
<img alt="内容辅助" src="images/el-ca-bean-properties.png" height="55" width="487">
<br>
<br>创建一个Java类<b>com.tutorial.validatePassword</b> ，它实现<b>Validator</b>接口并保存。
<br>
<br>
<img alt="验证器" src="images/custom-validator.png" height="278" width="611">

<br>
<a id="faces-config-validator"></a>在Project Explorer中，展开节点JSFTutorial-&gt; WebContent。双击<b>faces-config.xml</b> 。这将启动faces-config编辑器。选择“ <b>组件”</b>选项卡。展开“ <b>验证器”</b>部分。

<br>
<br>
<img alt="面配置编辑器组件选项卡" src="images/faces-config-validator.png" height="376" width="788">
<br>
<br>单击“ <b>添加”</b>按钮。选择与<b>Validator Class</b>字段关联的<b>Browse</b>按钮，然后选择<b>com.tutorial。ValidatePassword</b>类。保存更改。
<br>
<br>
<img alt="Faces Config Editor寄存器Validator" src="images/facesconfig-register-validator.png" height="372" width="645">
<br>
<br>
<a id="ca-validator-id-list"></a>添加JSF标记， <b>&lt;f：validator id =“”&gt; &lt;/ f：validator&gt;</b> 。将光标放在双引号内， <b>按Ctrl +空格键</b> 。您应该看到一个弹出窗口，其中包含所有标准验证器的列表以及faces-config文件中注册的验证器。选择<b>验证密码</b> 。
<br>
<br>
<img alt="验证器的内容辅助" src="images/ca-validator-lov.png" height="112" width="495">
<br>
<br>
<br>
<a id="el-ca-loadbundle"></a>我们现在将页面中使用的静态字符串移动到资源包中。为此，请在<b>com.tutorial</b>文件夹中添加名为<b>messages.properties</b>的文件。如下所示定义属性并保存文件。
<br>
<br>
<img alt="资源包的内容辅助" src="images/el-ca-messages-properties.png" height="207" width="552">
<br>
<br>添加JSF标记， <b>loadBundle</b>如下所示。您可以从Palette View的<b>JSF Core</b>部分拖放标记。
<br>
<br>
<img alt="资源包的内容辅助" src="images/el-ca-define-loadbundle.png" height="86" width="480">
<br>
<br>删除<b>outputLabel</b>标记的value属性中的字符串<b>Name</b> 。将光标放在括号内，然后<b>按Ctrl +空格键</b> 。您应该看到一个弹出窗口，其中包含您在<b>loadBundle</b>标记中定义的<b>msg</b>变量。选择它。
<br>
<br>
<img alt="资源包的内容辅助" src="images/el-ca-loadbundle-var.png" height="187" width="529">
<br>
<br>在<b>msg</b>之后输入一个点，然后<b>按Ctrl +空格键</b> 。您应该看到一个弹出窗口，其中包含<b>messages.properties</b>文件中定义的属性列表。选择属性， <b>名称</b> 。
<br>
<br>
<img alt="资源包的内容辅助" src="images/el-ca-msg-properties.png" height="69" width="550">
<br>
<br>
<br>完成登录页面，如下所示。
<br>
<br>
<img alt="完成登录页面" src="images/login-final.png" height="484" width="836">
<br>
<br>创建一个新的JSF页面<b>welcome.jsp</b> ，如下所示。
<br>
<br>
<img alt="完成登录页面" src="images/welcome.png" height="342" width="650">
<br>
<br>
<h3><a id="facesconfigeditor"></a>面部配置资源编辑器</h3>JSF Tools项目包含faces配置资源文件的特殊编辑器。以下部分简要介绍了编辑器。详细介绍编辑器所有功能的综合教程即将发布。
<br>双击<b>faces-config.xml</b>文件以启动Faces配置编辑器。切换到“ <b>导航”</b>选项卡。
<br>
<br>
<img alt="面部配置编辑器" src="images/facesconfig-editor.png" height="388" width="528">
<br>
<br>
<ul>
	<li>将<b>login.jsp</b>和<b>welcome.jsp</b>添加到Navigation选项卡。从Palette中选择<b>Page</b>控件并将其放在Navigation选项卡上。在生成的“ <b>选择JSP文件”</b>对话框中选择页面。</li>

	<li>连接两页。单击Palette中的<b>Link</b>控件，选择<b>登录</b>页面并在<b>欢迎</b>页面上画一条线。在“导航”选项卡中选择该行，然后在属性视图中，将<b>from-outcome</b>的值设置为<b>login</b> 。</li>
</ul>
<br>
<br>
<img alt="面部配置编辑器" src="images/navigation.png" height="412" width="519">
<br>
<br>
<h3><a id="testpage"></a>测试JSF JSP页面</h3>
<p>1）我们现在将针对Apache Tomcat服务器执行页面。在导航器中选择login.jsp页面时，使用上下文菜单选择<b>Run on Server</b> 。<br>
<br>
<br>
<img alt="" src="images/run-jsf.PNG" height="443" width="450"></p>


<br>

<p>2）选择您的Apache Tomcat服务器并根据需要进行设置（如果您尚未这样做）。<br>
<br>3）单击“完成”。您应该从Console视图中看到Tomcat服务器启动，然后您应该看到正在执行的登录页面出现在Web浏览器中，如下所示。<br>
<br>
<br>
<img alt="" src="images/jsf-app.png" height="173" width="547"></p>


<br>单击<b>登录</b>按钮。您应该导航到<b>欢迎</b>页面。
<br>
<br>
<img alt="" src="images/jsf-app1.png" height="144" width="516">



<br>
<p><b>恭喜！您已使用新的Eclipse WTP JSF工具创建并执行了第一个JavaServer Faces应用程序。</b></p>
</body>
</html>
<html id="2333.SafeNavigationTutorial.html" dir="ltr"></html><html dir="ltr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
<title>安全导航教程</title>
<link href="book.css" rel="stylesheet" type="text/css"></link>
<meta name="generator" content="DocBook XSL Stylesheets V1.75.1"></meta>
<link rel="home" href="index.html" title="OCL Documentation"></link>
<link rel="up" href="Tutorials.html" title="Tutorials"></link>
<link rel="prev" href="CompleteOCLTutorial.html" title="Complete OCL tutorial"></link>
<link rel="next" href="CodeGenerationTutorial.html" title="Code Generation tutorial"></link>
</head>
<body bgcolor="white" dir="ltr" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">安全导航教程</h1>
<div class="section" title="安全导航教程">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear:both">
<a name="SafeNavigationTutorial"></a>安全导航教程</h2>
</div>
</div>
</div>
<p>本教程演示了Eclipse Mars的新安全导航工具; Eclipse 4.5，EMF 2.11，OCL 6.0。</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>一些截图可能会略微过时。</p>
</li>
</ul>
</div>
<div class="section" title="概观">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="Overview3"></a>概观</h3>
</div>
</div>
</div>
<p>在这个例子中你会</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>了解导航危险</p>
</li>
<li class="listitem">
<p>打开安全导航验证</p>
</li>
<li class="listitem">
<p>使用安全导航来消除危险</p>
</li>
<li class="listitem">
<p>使用null free声明来避免许多安全导航危险</p>
</li>
</ul>
</div>
</div>
<div class="section" title="参考">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="References2"></a>参考</h3>
</div>
</div>
</div>
<p>本教程继续<a class="link" href="Tutorials.html#OCLinEcoreTutorial" title="OCLinEcore教程">OCLinEcore教程</a> 。
				</p>
</div>
<div class="section" title="评估危害">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="Evaluationhazards"></a>评估危害</h3>
</div>
</div>
</div>
<p>对OCL表达式的评估可能会给内部问题带来无效结果</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>除以零</p>
</li>
<li class="listitem">
<p>索引超出有序集合的范围</p>
</li>
<li class="listitem">
<p>大多数来自null源的操作或属性的导航</p>
</li>
</ul>
</div>
<p>在本教程中，我们将展示如何从null中消除不安全导航的危险。</p>
</div>
<div class="section" title="启用安全导航诊断">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="EnableSafeNavigationDiagnosis"></a>启用安全导航诊断</h3>
</div>
</div>
</div>
<p>默认情况下，安全导航过于新颖且无需启用。因此，必须通过从工作区<span class="bold"><strong>Window-&gt; Preferences中</strong></span>选择<span class="bold"><strong>OCL-&gt; Unified Pivot Binding</strong></span>设置来明确启用它。您也可以从Project属性页面设置项目特定的首选项。
				</p>
<p>将<span class="bold"><strong>Potential null导航</strong></span>和<span class="bold"><strong>Redundant安全导航</strong></span>更改为<span class="bold"><strong>Error</strong></span> （或警告）。
				</p>
<p>
					
</p>
<div class="mediaobject">
<img src="images/4120-safe-navigation-preferences.png"></div>
<p>
				
</p>
</div>
<div class="section" title="安全导航诊断">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="SafeNavigationDiagnosis"></a>安全导航诊断</h3>
</div>
</div>
</div>
<p>我们将继续OCLinEcore教程，你可以跳到<span class="bold"><strong>New  - &gt; Example ...  - &gt; OCL Plugins  - &gt; OCLinEcore Tutorial</strong></span> 。
				</p>
<p>选择<span class="bold"><strong>Tutorial.ecore</strong></span>并使用<span class="bold"><strong>OCLinEcore编辑器</strong></span>打开。 5行出现8个错误。
				</p>
<p>
					
</p>
<div class="mediaobject">
<img src="images/4120-raw-safe-navigation-errors.png"></div>
<p>
				
</p>
<p>有点郁闷; 7个OCL生产线中有5个在长期存在的例子中存在危害。只要允许空值，就会出现问题。</p>
<p>每当多重性隐式或显式<span class="bold"><strong>MyType [？]时</strong></span> ，非集合值可以为null，它允许MyType的实例或null。替代<span class="bold"><strong>MyType [1]</strong></span>禁止空值。示例元模型与许多属性相比较好，例如<span class="bold"><strong>Loan :: book</strong></span>定义为<span class="bold"><strong>Book [1]</strong></span> 。但<span class="bold"><strong>贷款::日期</strong></span>是<span class="bold"><strong>日期[？]</strong></span> 这似乎是不明智的;为什么贷款有未知日期？
					<span class="bold"><strong>Book :: library</strong></span>是正确的<span class="bold"><strong>库[？]</strong></span> 因为没有理由在书店或家庭中找不到书籍。
				</p>
<p>我们将在扩展简短表格后检查这两个错误。</p>
<p>
					
</p>
<div class="mediaobject">
<img src="images/4120-expanded-safe-navigation-error.png"></div>
<p>
				
</p>
<p>
					
<code class="code">self.library.loans</code>违反了UnsafeSourceCannotBeNull约束，因为源[ <code class="code">self.library</code>可能因为<span class="bold"><strong>库[？]</strong></span>而为null 多重性。
				</p>
<p>收集价值几乎是OCL的存在理由，是一种灾难安全导航方式。任何OCL集合都可能包含空值，因此任何OCL迭代都可能具有null迭代器。因此，隐式迭代器被输入为<span class="bold"><strong>Loan [？]</strong></span> 而<code class="code">loan.book</code>的来源也不安全。
				</p>
</div>
<div class="section" title="安全导航操作员">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="SafeNavigationOperators"></a>安全导航操作员</h3>
</div>
</div>
</div>
<p>Groovy等语言引入了一个安全的导航操作符来缓解空导航问题。建议OCL 2.5也这样做。Eclipse OCL提供了一个原型实现。</p>
<p>OCL提供两个导航操作员</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>对象导航操作符“。”</p>
</li>
<li class="listitem">
<p>集合导航操作符“ - &gt;”。</p>
</li>
</ul>
</div>
<p>安全导航增加</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>安全对象导航操作员“？”。</p>
</li>
<li class="listitem">
<p>安全收集导航操作员“？ - &gt;”。</p>
</li>
</ul>
</div>
<p>安全对象导航操作符将任何空导航替换为<code class="code">null</code> 。其中<code class="code">a</code>是对象值，因此<code class="code">a?.b</code>相当于</p>
<div class="literallayout">
<p>
<code class="code">设a'= a in if a'&lt;&gt; null然后a'.b else null endif<br>

</code>
</p>
</div>
<p></p>
<p>安全收集导航操作符从集合源中删除所有空术语。
					<code class="code">a?-&gt;b</code>因此相当于</p>
<div class="literallayout">
<p>
<code class="code">A-&gt;不含（空） - &gt;乙<br>

</code>
</p>
</div>
<p></p>
<p>安全隐式集合导航操作符同样从集合中删除所有空术语。其中<code class="code">a</code>是集合值，因此<code class="code">ab</code>等价于</p>
<div class="literallayout">
<p>
<code class="code">A-&gt;不含（空） - &gt;收集（b）中<br>

</code>
</p>
</div>
<p></p>
<p>我们可能会使用这些运算符来消除警告。</p>
<p>
					
</p>
<div class="mediaobject">
<img src="images/4120-suppressed-safe-navigation-error.png"></div>
<p>
				
</p>
<p><code class="code">library?.loans</code>的第一个替代品是合理的。该<code class="code">library</code>实际上可以为<code class="code">null</code> ，因此，如果它为null，则shortform执行为<code class="code">null-&gt;select(book = self)</code> 。在非集合对象（如<code class="code">null</code> ）上使用集合运算符会导致调用oclAsSet（），对于<code class="code">null</code>会给出一个空集。因此， <code class="code">null.oclAsSet()-&gt;select(...)</code>从空集中选择元素，确保来自空库的贷款是空集合。
				</p>
<p><code class="code">loans?-&gt;select</code>的第二次替换<code class="code">loans?-&gt;select</code>会使问题消失，但实际上几乎每个收集导航操作员都需要以词汇为前缀“？”并通过<code class="code">exclude(null)</code> 。
				</p>
</div>
<div class="section" title="无空的收藏">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="NullfreeCollections"></a>无空的收藏</h3>
</div>
</div>
</div>
<p>OCL和UML支持有序/无序，唯一/非唯一的四种排列，以提供有用的Collection行为。</p>
<p>不幸的是，OCL允许任何集合包含null，即使在几乎所有应用程序中都不需要null集合元素，并且正如我们刚刚看到的那样安全，导航会在许多集合访问中强加冗余<code class="code">exclude(null)</code> 。
				</p>
<p>如果可以将OCL集合声明为无空，则可以消除对<code class="code">exclude(null)</code>的需要，可能会给出8个而不是4个可能的集合行为。
				</p>
<p>集合的UML和Ecore声明（如<code class="code">MyType[2..*] {ordered}</code>支持边界，而Complete OCL支持嵌套集合，如<code class="code">Set(Sequence(MyType))</code> 。OCL 2.5的UML对齐支持嵌套的有界集合，例如<code class="code">Set(Sequence(MyType[*])[+])</code> ;一组一个或多个MyTypes的序列。
				</p>
<p>我们可以通过在每个集合多样性之后添加元素多重性来扩展这种表示法，以便每个元素都可以</p>
<div class="itemizedlist">
<ul class="itemizedlist" type="disc">
<li class="listitem">
<p>非空，明确<code class="code">[...| 1]</code>
						
</p>
</li>
<li class="listitem">
<p>隐式或显式null / not-null <code class="code">[...|？]</code>
						
</p>
</li>
</ul>
</div>
<p>拥有<code class="code">null</code>贷款是没有用的，所以我们可以将<code class="code">Library::loans</code>的多样性改为<code class="code">Loan[*|1]</code> ;每个贷款不为空的零个或多个贷款对象。
				</p>
<p>
					
</p>
<div class="mediaobject">
<img src="images/4120-null-free-collection-suppression.png"></div>
<p>
				
</p>
<p>迭代器的问题现在被替换为迭代的问题。现在违反了SafeSourceCanBeNull约束，因为源<code class="code">library?.loan</code>不能提供由于<span class="bold"><strong>[==</strong></span> | 1 ==] *多样性而导致的null元素。请注意，扩展多重性显示在消息和悬停文本中，以帮助理解无效。
				</p>
<p>恢复<code class="code">loans-&gt;select</code> ，新问题消失;更改多重性以声明无空集合使原始表达式安全，而无需额外的安全导航操作符。
				</p>
</div>
<div class="section" title="在Ecore中声明无空集合">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="DeclaringNullfreeCollectionsinEcore"></a>在Ecore中声明无空集合</h3>
</div>
</div>
</div>
<p>我们刚刚看到了多重语法的扩展，因此在OCLinECore中，可以通过<span class="bold"><strong>[... | 1]</strong></span>扩展的每元素多重性来声明无空集合。
				</p>
<p>Ecore不支持无空集合，因此在幕后它由EAnnotation表示。</p>
<div class="literallayout">
<p>
<code class="code">&lt;eStructuralFeatures xsi：type =“ecore：EReference”name =“loans”ordered =“false”<br>upperBound =“ -  1”eType =“＃// Loan”containment =“true”&gt;<br>&lt;eAnnotations source =“http://www.eclipse.org/OCL/Collection”&gt;<br>&lt;details key =“nullFree”value =“true”/&gt;<br>&lt;/ eAnnotations&gt;<br>&lt;/ eStructuralFeatures&gt;<br>

</code>
</p>
</div>
<p></p>
</div>
<div class="section" title="在UML中声明无空集合">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="DeclaringNullfreeCollectionsinUML"></a>在UML中声明无空集合</h3>
</div>
</div>
</div>
<p>UML不支持无空集合，因此引入了OCLforUML配置文件来弥补这一缺陷和其他缺陷。</p>
<p><span class="bold"><strong>Collection</strong></span> <code class="code">Collection::isNullFree</code>型可以应用于<span class="bold"><strong>TypedElement，</strong></span>例如<span class="bold"><strong>Parameter</strong></span>或<span class="bold"><strong>Property，</strong></span>以便<code class="code">Collection::isNullFree</code>属性定义所需的null-free-ness。
				</p>
<p>将构造型应用于所有集合属性和参数有点单调乏味，可以通过将<span class="bold"><strong>集合</strong></span>构造型应用于<span class="bold"><strong>类</strong></span> es甚至<span class="bold"><strong>Package</strong></span>来避免。通过首先查找<span class="bold"><strong>Collection</strong></span>构造型，然后在容器层次结构中搜索最近的<span class="bold"><strong>Collections</strong></span>构造型来确定null-free-ness。
				</p>
<p><span class="bold"><strong>Package</strong></span>上的单个<span class="bold"><strong>Collections</strong></span>构造型应用程序足以声明其所有集合为null-null这通常是合适的，但是如果任何集合可以包含null，则必须为每个<span class="bold"><strong>TypedElement</strong></span>重写包级别的<span class="bold"><strong>Collections</strong></span> <span class="bold"><strong>构造型</strong></span> ，其中集合可能包含null 。
				</p>
</div>
</div>
</body>
</html>
<html id="3023.03pRunConfig.html" dir="ltr"></html><html dir="ltr">
<head>
<title>运行并行程序</title>
<link rel="stylesheet" type="text/css" href="help.css"></link>
<script type="text/javascript" src="thumb.js"> </script>
</head>
<body dir="ltr">

<h1 id="top">运行并行程序</h1>
<p>本节介绍如何运行并行程序。在PTP中，这称为“运行工作”。
</p><p>以前版本的PTP需要在启动作业之前为每个作业调度程序/运行时环境设置<i>资源管理器</i> 。在PTP 6.0及更高版本中，不会单独处理，而是在“运行配置”页面上指定<i>目标系统配置</i> 。设置并行作业的进一步交互高度依赖于选择哪个TSC。
</p><p>如果<i>目标系统配置</i>支持编程模型，PTP能够启动使用各种编程模型（例如MPI，OpenMP，UPC等）的并行应用程序。也可以启动顺序程序的多个副本，以便它们同时执行。</p>

<p>Eclipse使用<i>运行配置</i> （也称为<i>启动配置</i> ）来封装正常启动作业或在调试器控制下启动作业所需的所有设置和参数。使用“ <b>运行”&gt;“运行配置...”</b>菜单创建<b>运行配置</b> 。

</p><p>本节仅介绍如何启动并行程序。<a href="05monitoring.html">监视作业和系统中</a>提供了有关如何监视应用程序启动的说明。<a href="06parDebugging.html">并行调试中</a>提供了有关如何调试应用程序的说明。</p>

<p>主题包括：</p>
<ol>
	<li><a href="#create">创建<b>并行应用程序</b>运行配置</a></li>
	<li><a href="#resources">完成“ <b>资源”选项卡</b></a> - 选择目标系统配置</li>
	<li><a href="#application">完成“ <b>应用程序”选项卡</b></a></li>
	<li><a href="#arguments">完成“ <b>参数”选项卡</b></a></li>
	<li><a href="#environment">完成“ <b>环境”选项卡</b></a></li>
	<li><a href="#synchronize">完成“ <b>同步”选项卡</b></a></li>
	<li><a href="#launch">运行应用程序</a></li>
</ol>
<h2 id="create">步骤1：创建并行应用程序运行配置</h2>

<ol>
	<li>
	<p>要设置运行配置，请使用<b>“运行”&gt;“运行配置”</b>打开“ <b>运行配置”</b>对话框<b>...</b> 
	</p><p><img src="images/03runMenu.png">
	<br>或单击工具栏上的运行图标的上下文菜单（图标旁边的小三角形），然后选择<b>“运行配置...”</b> 。
	</p><p><img src="images/03runMenu2.png">
	</p>
	
	<p><br>
	</p>
	</li>
	<li>
	<p>单击“ <b>并行应用程序”</b> ，然后单击“ <b>新建”</b>按钮图标，创建新的并行应用程序运行配置。</p>
	<p><br>
	</p>
	<p><img src="images/03launch1.png"></p>
	<p><br>
	</p>
	</li>
	<li>
	<p>在<b>名称：</b>字段中输入配置的<b>名称</b> 。这里我们使用与项目相同的名称。如果在项目浏览器中选择了项目，则可能已在此处填写。</p>
	<p><br>
	</p>
	<p><img src="images/03launch1a.png"></p>
	 </li>
</ol>

<h2 id="resources">第2步：完成“资源”选项卡</h2>
<p>“ <b>资源”选项卡</b>用于指定作业执行所需的资源。选择<b>目标系统配置后</b> ，此选项卡的内容将因不同的目标配置而异，您的安装可能已添加其他配置。
</p><h3 id="ptp-tscs">PTP支持目标系统配置</h3>
<p>PTP包括许多支持各种并行运行时系统和作业调度程序的不同系统的目标配置。下表列出了常见配置以及其他帮助文档的链接。
</p><p>请注意，在使用PTP之前，关联的运行时或作业调度程序需要在目标系统上可用：</p><blockquote>
<table border="1">
   <tr>
   <th scope="col">目标配置</th>
   <th scope="col">描述</th>
   </tr>
   <tr id="gridengine">
    <td><a href="rms/gridengine.html">Grid Engine-Generic-Batch</a></td>
    <td>使用Grid Engine批量执行</td>
  </tr>
  <tr id="ibm-ll">
    <td><a href="rms/ibm-ll.html">IBM LoadLeveler</a></td>
	<td>通用IBM LoadLeveler批处理系统</td>
  </tr>
  <tr id="ibm-ll-bg">
    <td><a href="rms/ibm-ll.html">IBM LoadLeveler（蓝色基因）</a></td>
	<td>Blue Gene系统上的IBM LoadLeveler</td>
  </tr>
  <tr id="ibm-pe">
    <td><a href="rms/ibm-pe.html">IBM并行环境</a></td>
    <td>使用IBM Parallel Environment进行交互式执行</td>
  </tr>
    <tr id="ibm-lsf">
    <td><a href="PLUGINS_ROOT/org.eclipse.ptp.rm.ibm.platform.lsf.doc.user/html/lsf.html">IBM Platform LSF</a></td>
 <td>在IBM Platform LSF系统上批量执行</td>
  </tr>
  <tr id="ibm-platform-mpi">
    <td><a href="rms/ibm-pmpi.html">IBM Platform MPI</a></td>
    <td>IBM Platform MPI</td>
  </tr>
      <tr id="mpich2">
    <td>MPICH2  - 通用 - 互动</td>
    <td>在MPICH2系统上交互执行</td>
  </tr>
  <tr id="openMPI">
    <td><a href="rms/openMPI.html">打开MPI-Generic-Interactive</a></td>
    <td>Open MPI系统上的交互式执行</td>
  </tr>
  <tr id="pbs-int">
    <td><a href="rms/pbs.html">PBS-通用交互式</a></td>
    <td>使用PBS批处理系统执行交互式作业</td>
  </tr>
  <tr id="pbs-bgp-batch">
    <td><a href="rms/pbs.html">PBS-BGP-批</a></td>
    <td>Blue Gene / P系统使用</td>
  </tr>
  <tr id="pbs-bgq-batch">
    <td><a href="rms/pbs.html">PBS-BGQ-批</a></td>
    <td>使用PBS的蓝色基因/ Q系统</td>
  </tr>

  <tr id="slurm">
    <td><a href="rms/slurm.html">SLURM  - 通用 - 批</a></td>
    <td>通用SLURM批处理系统</td>
  </tr>
  <tr id="slurm-alps">
    <td><a href="rms/slurmalps.html">SLURM  - 阿尔卑斯 - 通用 - 批</a></td>
    <td>SLURM和ALPS组合作为批处理系统</td>
  </tr>
  <tr id="slurm-bgp">
    <td><a href="rms/slurm.html">SLURM-BGP-批</a></td>
    <td>使用SLURM的Blue Gene / P系统</td>
  </tr>
  <tr id="slurm-bgq-batch">
    <td><a href="rms/slurm.html">SLURM-BGQ-批</a></td>
    <td>使用SLURM的Blue Gene / Q系统</td>
  </tr>
  <tr id="pbs-batch">
    <td><a href="rms/pbs.html">PBS-仿制批</a></td>
    <td>通用PBS批处理系统</td>
  </tr>
    <tr id="remote-generic-interactive">
    <td><a href="rms/remote-generic-interactive.html">远程通用交互式</a></td>
    <td>远程系统上的简单（非并行）交互式执行</td>
  </tr>
  
  <tr id="torque-batch">
    <td><a href="rms/torque.html">扭矩仿制批</a></td>
    <td>通用TORQUE批处理系统</td>
  </tr>
  <tr id="torque-int">
    <td><a href="rms/torque.html">扭矩通用交互式</a></td>
    <td>使用Torque批处理系统执行交互式作业</td>
  </tr>
  <tr id="juelich-judge">
    <td><a href="rms/de.fz-juelich.judge.html">de.fz-juelich.judge.torque.batch</a></td>
    <td>在JSC系统JUDGE上运行批处理作业</td>
  </tr>
  <tr id="juelich-juropa">
    <td><a href="rms/de.fz-juelich.juropa.html">de.fz-juelich.juropa.torque.batch</a></td>
    <td>在JSC系统JUROPA上运行批处理作业</td>
  </tr>
  <tr id="juelich-juqueen">
    <td><a href="rms/de.fz-juelich.juqueen.html">de.fz-juelich.juqueen.ll_bg</a></td>
    <td>在JSC系统JUQUEEN上运行批处理作业</td>
  </tr>
</table>
</blockquote>

<ol>
	<li>
	<p>从下拉列表中选择要使用的<b>目标系统配置</b> 。

	</p>
	<p> 
	</p><p><img src="images/03resources_configs.png">
	</p>
	<p> 
 
	</p><p>请注意，如果在选择框中键入单个字符（或几个），则目标系统配置列表将仅限于以该字符开头的那些。
	</p><p><img src="images/03resources_configs_cull.png">
	
	</p></li>
	<li>
	<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
	<p>选择要用于目标系统的连接。如果先前已配置同步或远程项目，则应该可以使用连接，并且可能已经选择了该连接。
	<br>（要在本地计算机上启动，请为连接类型选择“ <b>本地</b> ”。）
	<br>您可以通过单击“ <b>新建...”</b>按钮在此处创建新连接。
	 </p>
	<p>
	</p><p> </p>
	</li><li>
	<p>选择连接后，如果连接尚未打开，系统可能会提示您打开连接。然后，“ <b>资源”</b>选项卡的内容将填充控件，以便您可以为目标系统配置必要的启动信息。此区域通常（取决于目标系统配置）包括更多选项卡，以分割您可以提供的其他信息。填写目标系统配置所需的信息。
	<br>
	</p>
	</li>


	<!-- unused image<img src="images/03launchResTab.png"> -->

</ol>

<h2 id="application">第3步：完成“ <b>应用程序”</b>选项卡</h2>
<p>“ <b>应用程序”选项卡</b>用于指定要启动的应用程序（可执行文件）。</p>
<ol>
	<li>
	<p>确保选择了正确的<b>并行项目</b> 。这是包含应用程序的源和二进制文件的项目。</p>
	<p><br>
	</p>
	</li>

	<li>
	<p>选择要启动的<b>应用程序</b> （可执行文件）。如果目标系统连接指向远程目标，则表示远程目标<i>上的可执行文件</i>的<i>路径</i> 。否则，对于指向本地计算机的连接，它应该是项目目录中可执行文件的路径。
	</p><p><b>Browse ...</b>按钮可用于选择可执行文件。
	</p>
	<p><br>
	</p>
	</li>
    
	<li>
	<p>如果在远程计算机上运行应用程序并且项目是在本地<i>构建的</i> ，则必须首先将可执行文件复制到远程计算机。为此，您可以启用<b>从本地文件系统复制可执行文件，</b>并使用项目目录中可执行<b>文件</b>的路径填充<b>本地文件</b>的路径。这会将启动程序配置为在启动运行/调试会话之前将可执行文件自动复制到远程目标。如果未启用，则需要手动将可执行文件复制到远程目标。</p>
 
	<p><br>
	</p>
	</li>
	 
	<p><img src="images/03launch6.png"></p>
	<p><br>
	</p>

	<li>
	<p>如果希望在单个输出控制台中获得所有进程的输出，请确保选中“ <b>控制台视图中所有进程</b>的<b>显示输出”</b>选项。</p>
	<p><br>
	</p>
	</li>
	  
</ol>

<h2 id="arguments">第4步：完成“参数”选项卡</h2>
<p><b>Arguments选项卡</b>用于指定并行应用程序所需的任何命令行参数并修改工作目录。</p>
<ol>
	<li>
	<p>在“ <b>程序参数”</b>字段中输入应用程序所需的任何参数。这是一个自由格式的文本字段，将逐字传递给应用程序。</p>
	<p><br>
	</p>
	</li>
	<li>
	<p>如果需要，请选择其他工作目录。工作目录在应用程序启动之前设置。请注意，对于远程启动，这将是远程计算机上的目录。</p>
	</li>
	<p><img src="images/03launch3.png"></p>
	<p><br>
	</p>
</ol>

<h2 id="environment">第5步：完成“环境”选项卡</h2>
<p>“ <b>环境”选项卡</b>用于指定并行应用程序所需的任何环境变量，或者用于运行应用程序。该选项卡还提供了将环境变量附加到本机环境的选项，或者使用选项卡中指定的变量替换本机环境。</p>
<ol>
	<li>
	<p>使用“ <b>新建...”</b>按钮创建新的环境变量。</p>
	<p><br>
	</p>
	</li>
	<li>
	<p>使用<b>选择...</b>按钮导入环境变量。</p>
	<p><br>
	</p>
	</li>
	<li>
	<p>使用<b>编辑...</b>按钮编辑环境变量。</p>
	<p><br>
	</p>
	</li>
	<li>
	<p>使用“ <b>删除...”</b>按钮删除环境变量。</p>
	<p><br>
	</p>
	</li>
	<p><img src="images/03launch4.png"></p>
	<p><br>
	</p>
</ol>

<h2 id="synchronize">第6步：完成“ <b>同步”</b>选项卡</h2>
<p>“ <b>同步”选项卡</b>用于连接引用远程目标的方案。该选项卡指定描述在开始并行应用程序执行之前需要复制（上<i>载</i> ）到远程目标的文件或目录的规则。通常，此功能用于上载依赖项（如动态库）或输入测试用例数据。</p>
<p>请注意，对于<a href="sync.html">同步项目</a> ，这可能不是必需的，其中文件独立于启动机制来回复制到远程系统。

</p><p>此选项卡还允许指定描述远程主机上的文件的规则，以便在并行应用程序完成执行后将其检索回（ <i>下载</i> ）到本地主机，作为并行应用程序执行生成的输出数据。</p>

<ol>
	<li>
	<p>如果要启用到远程目标的文件传输，请启用“启用上<b>载规则”</b>或“根据需要的文件传输方向<b>启用</b> <b>下载规则”</b> 。</p>
	<p><br>
	</p>
	<p><img src="images/03launch7.png"></p>
	<p><br>
	</p>
	</li>

	<li>
	<p>要指定要从本地系统复制到远程目标（已上<i>载</i> ）的文件，请单击“ <b>新建上载规则”</b> 。上载规则列出了应复制到单个目录中的文件或目录集合。</p>
	<p><br>
	</p>
	<p>如果启用了<b>使用启动配置中的目录</b> ，则会将列出的文件或目录复制到启动配置中指定的工作目录。目前，这相当于包含并行应用程序可执行文件的同一目录。如果未启用，则必须在<b>远程目录中</b>指定将放置文件或目录的路径。路径可以是绝对路径或相对路径（到工作目录）。</p>
	<p><br>
	</p>
	<p>在下面的列表中， <b>选择文件</b> ，添加要复制的文件或目录。单击<b>文件</b>以从本地文件系统中的任何位置选择一个或多个单个文件。“ <b>目录”</b>按钮的工作方式类似于从本地文件系统中选择目录。目录以递归方式复制。“ <b>工作区”</b>按钮允许从当前工作区轻松选择文件。</p>
	<p><br>
	</p>
	<p>在对话框的底部，您可能希望设置要应用于远程目标上的复制文件的属性。<b>Readonly</b>或<b>Executable</b>选项将所有复制的文件设置为只读或远程主机上的可执行文件。如果启用了“ <b>保留时间”属性</b> ，则远程副本将采用与本地文件相同的时间戳，否则，时间戳将是文件复制的时间。此外，如果远程目标上已存在该文件，您可以选择如何在<b>If file exists</b>下拉列表中做出反应。</p>
	<p><br>
	</p>
	<p><img src="images/03launch8.png"></p>
	<p><br>
	</p>
	<p><br>
	</p>
	</li>
	<li>
	<p>要在并行应用程序完成后指定要从远程目标复制到本地系统（已<i>下载</i> ）的文件，请单击“ <b>新建下载规则”</b> 。</p>
	<p><br>
	</p>
	<p>下载规则列出了应复制到单个本地目录中的文件或目录集合。它的选项与上传规则非常相似。</p>
	<p><br>
	</p>
	<p><img src="images/03launch9.png"></p>
	<p><br>
	</p>
	</li>
</ol>

<h2 id="launch">第7步：启动应用程序</h2>
<p>启动配置现已完成。选择“ <b>运行”</b>按钮（在“ <b>运行配置”</b>对话框的右下角以启动作业。切换到“ <b>系统监视”</b>透视图以查看作业的状态并检查程序输出。
</p><p><a href="#top">回到顶部</a> | <a href="toc.html">返回目录</a>
</p></body>
</html>




<html id="2159.s4.9.3.html" dir="ltr"></html><!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "../xhtml1-strict.dtd" gtc:encodedoriginal="PCFET0NUWVBFIGh0bWwKICBQVUJMSUMgIi0vL1czQy8vRFREIFhIVE1MIDEuMCBTdHJpY3QvL0VOIiAiLi4veGh0bWwxLXN0cmljdC5kdGQiPg==">
<html lang="zh-Hans" dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
      <link rel="stylesheet" type="text/css" href="../css/ot.css"></link>
      <link rel="stylesheet" type="text/css" href="../css/otjld.css"></link>
      <title>OT / J语言定义v1.3.1</title>
   </head>
   <body class="otdt" dir="ltr">
      <div id="content">
         <table class="nav">
            <tr>
               <td class="back"><a id="top"></a> <a href="s4.9.2.html" rel="prev">&lt;&lt;§4.9.2角色侧继承</a></td>
               <td class="top"><a href="index.html" rel="contents">↑目录↑</a></td>
               <td class="next"></td>
            </tr>
         </table>
         <div class="breadcrumb"><a class="nav" href="s4.9.html" rel="section">§4Callin</a> <a class="nav" href="s4.html" rel="section">绑定</a> &gt; <a class="nav" href="s4.9.html" rel="section">§4.9Callin继承</a></div>
         <div class="sect depth3" id="s4.9.3">
            <h3 class="sect">§4.9.3协变返回类型<a class="img" href="s4.9.3.html" title="PermaLinkto§4.9.3协变返回类型"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h3>
            <p>从版本5开始，Java支持对方法返回类型的协变重定义（参见<a href="http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.4.5" class="ext">JLS 8.4.5</a> ）。<code>callin</code>方法<em>不</em>支持此功能（ <a href="#s4.9.3.a" title="§4.9.3。（a）没有协变的callin方法" class="sect">§4.9.3。（a）</a> ）。如果具有协同重新定义返回类型的基本方法将受到callin绑定的约束，则后续规则将确保保留类型安全性。必须考虑两个<em>限制</em>因素：</p>
            <ol>
               <li>当callin方法发出基本调用或调用其tsuper版本时，此调用必须生成一个值，该类型的类型与封闭方法声明的返回类型兼容。
                  				
               </li>
               <li>如果替换绑定角色方法返回的值不是基本调用的结果，则必须确保返回值实际满足绑定基本方法的声明签名。
                  				
               </li>
            </ol>
            <div class="subsect depth4" id="s4.9.3.a">
               <h4 class="subsect">（a） <span class="title">没有协变的callin方法</span><a class="img" href="s4.9.3.a.html" title="永久链接到（a）没有协变的callin方法"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>使用<code>callin</code>修饰符声明的覆盖继承方法的方法不得重新定义与继承方法相关的返回类型。这反映了这样一个事实，即继承的callin绑定在绑定到新的重写角色方法时应保持类型安全。将协变角色方法绑定到原始基本方法将破坏上面的约束（1）。
                  				
               </p>
            </div>
            <div class="subsect depth4" id="s4.9.3.b">
               <h4 class="subsect">（b） <span class="title">捕获协变基方法</span><a class="img" href="s4.9.3.b.html" title="PermaLink to（b）捕获协变基本方法"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>如果callin绑定确实不仅影响指定的基本方法，而且还覆盖了协同重新定义返回类型的覆盖版本，则绑定必须指定基本方法的返回类型，并在类型名称后附加“+”，如</p>
               <div class="listing plain"><pre><b>void</b> rm（） <b>&lt; -</b> <b>在</b> <em>RT +</em> bm（）之前;</pre></div>
               <p>没有“+”符号，绑定只会捕获其返回类型正好是<code>RT</code>基本方法;通过附加“+”，也接受<code>RT</code>子类型作为声明的返回类型。
                  				
               </p>
            </div>
            <div class="subsect depth4" id="s4.9.3.c">
               <h4 class="subsect">（c） <span class="title">协变替换绑定</span><a class="img" href="s4.9.3.c.html" title="PermaLink到（c）协变替换绑定"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>当使用<a href="#s4.9.3.b" title="§4.9.3。（b）捕获协变基方法" class="sect">§4.9.3。（b）</a>的语法在与<code>replace</code>修饰符的callin绑定中捕获具有协变返回类型的基本方法时，必须使用free类型参数指定role方法，如下所示：</p>
               <div class="listing plain"><pre><em>&lt;E <b>extends</b> RT&gt; E</em> rm（） <b>&lt; -</b> <b>替换</b> RT + bm（）;</pre></div>
               <p>此callin绑定引用的角色方法<code>rm</code>必须使用类型参数使用相同类型的返回类型。从这种方法返回的唯一可能的类型<code>E</code>非空值是base-call或tsuper-call提供的值。<br>此规则强制执行上面的约束（2）。<br>请注意，此规则在<a href="s4.10.html" title="§4.10通用callin绑定" class="sect">§4.10中</a>进一步概括。
                  				
               </p>
               <h5 class="listing">绑定参数角色方法</h5>
               <div class="listing example frame">
                  <table class="listing">
                     <tr class="line odd">
                        <td class="ln">1</td>
                        <td><pre><b>公共</b> <b>类</b> SuperBase {</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">2</td>
                        <td><pre>SuperBase foo（）{ <b>返回</b>此; }</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">3</td>
                        <td><pre>    <b>void</b> check（）{System.out.print（“OK”）; }</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">4</td>
                        <td><pre>}</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">五</td>
                        <td><pre><b>公共</b> <b>类</b> SubBase <b>扩展</b> SuperBase {</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">6</td>
                        <td><pre>@覆盖</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">7</td>
                        <td><pre>SubBase foo（）{ <b>return</b> this; }</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">8</td>
                        <td><pre>    <b>void</b> print（）{System.out.print（“SubBase”）; }</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">9</td>
                        <td><pre>字符串测试（）{</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">10</td>
                        <td><pre>。this.foo（）打印（）; <span class="comment">// print（）需要一个SubBase</span></pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">11</td>
                        <td><pre>}</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">12</td>
                        <td><pre>}</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">13</td>
                        <td><pre></pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">14</td>
                        <td><pre><b>公共</b> <b>团队</b> <b>班</b> MyTeam {</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">15</td>
                        <td><pre>    <b>受保护的</b> <b>类</b> R <b>playingBy</b> SuperBase {</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">16</td>
                        <td><pre>        <b>callin</b> &lt;E <b>extends</b> SuperBase&gt; E ci（）{</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">17</td>
                        <td><pre>E result = base.ci（）;</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">18</td>
                        <td><pre>result.check（）; <span class="comment">//通过类型绑定的SuperBase在E上提供check（）</span></pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">19</td>
                        <td><pre>			<b>返回</b>结果;</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">20</td>
                        <td><pre>}</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">21</td>
                        <td><pre>&lt;E <b>extends</b> SuperBase&gt; E ci（） <b>&lt; -</b> <b>替换</b> SuperBase + foo（）;</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">22</td>
                        <td><pre>}</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">23</td>
                        <td><pre>}</pre></td>
                     </tr>
                  </table>
               </div>
               <div class="codecomment">
                  <h5>说明：</h5>
                  <ul>
                     <li>第7行中的方法<code>SubBase.foo</code>将返回类型从<code>SuperBase</code> （继承版本）重新定义为<code>SubBase</code> ，因此像第10行中的方法调用这样的客户端必须安全地假设返回值始终符合<code>SubBase</code> 。
                        						
                     </li>
                     <li>第21行中的callin绑定通过将<code>SuperBase+</code>指定为预期的返回类型，显式捕获了两个版本的<code>foo</code> 。因此，如果<code>MyTeam</code>的实例在第10行的方法调用中处于活动状态，则即使静态地知道此调用返回<code>SubBase</code>类型的值，也会截获对<code>foo</code>调用。
                        						
                     </li>
                     <li>第16-20行中的callin方法具有静态未知的返回类型，但返回类型由类型变量<code>E</code> 。由于已知基本调用具有与其封闭方法完全相同的签名，因此基本调用提供的值与<code>E</code>类型相同，因此可以从<code>ci</code>安全地返回。
                        							<em>注意，</em>没有其他非空值可以具有类型<code>E</code></li>
                     <li>通过指定<code>SuperBase</code>作为上界类型<code>E</code>的呼唤方法<code>ci</code>可以调用在类型中声明的任何方法<code>SuperBase</code>上类型的任何值<code>E</code> 。有关示例，请参阅第18行的<code>check</code>电话。
                        						
                     </li>
                  </ul>
                  <p><em>顺便指出，上述例子中使用类型<code>SuperBase</code>在散漫方式：角色内<code>R</code>此类型使用约束<code>playedBy</code> <strong>和</strong>相同类型也直接使用（作为上限<code>E</code> ）。这被认为是错误的样式，如果使用基本导入导入<code>SuperBase</code> ，则禁止使用它（ <a href="s2.1.2.d.html" title="§2.1.2。（d）基础进口" class="sect">§2.1.2。（d）</a> ）。在这里，这个规则被忽略只是为了保持示例小。
                        						</em></p>
               </div>
            </div>
         </div>
         <table class="nav">
            <tr>
               <td class="back"><a href="s4.9.2.html" rel="prev">&lt;&lt;§4.9.2角色侧继承</a></td>
               <td class="top"><a href="index.html" rel="contents">↑目录↑</a></td>
               <td class="next"></td>
            </tr>
         </table>
         <div class="breadcrumb"><a class="nav" href="s4.9.html" rel="section">§4Callin</a> <a class="nav" href="s4.html" rel="section">绑定</a> &gt; <a class="nav" href="s4.9.html" rel="section">§4.9Callin继承</a></div>
      </div>
      <div id="footer">
         <hr><a class="w3c img" href="http://jigsaw.w3.org/css-validator/check/referer" shape="rect"><img src="../images/valid-css2-blue.png" alt="有效的CSS！" height="31" width="88"></a><a class="w3c img" href="http://validator.w3.org/check?uri=referer" shape="rect"><img src="../images/valid-xhtml10-blue.png" alt="有效的XHTML 1.0严格" height="31" width="88"></a><address>©Stephan Herrmann，Christine Hundt，Marco Mosconi</address>OT / J版本1.3.1  - 最后修改时间：2013-05-28</div>
   </body>
</html><html id="0570.Doc08_Collaborating.html" dir="ltr"></html><!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd" gtc:encodedoriginal="PCFkb2N0eXBlIGh0bWwgcHVibGljICItLy9XM0MvL0RURCBIVE1MIDQuMDEgVHJhbnNpdGlvbmFsLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw0L2xvb3NlLmR0ZCI-">
<html dir="ltr">

<head>
<title>实时协作（CDO模型存储库文档）</title>

<link rel="stylesheet" href="../book.css" type="text/css" charset="UTF-8"></link>

<noscript></noscript>
<script type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Collaborating in Real-Time (CDO Model Repository Documentation)";
    }
}
</script>
</head>

<body bgcolor="white" dir="ltr" onload="windowTitle();">
<!-- <div class="help_breadcrumbs breadcrumbs_top"><a href="../Overview.html" title="CDO Model Repository Documentation">CDO Model Repository Documentation</a> > <a href="index.html" title="Category in CDO Model Repository Documentation">User's Guide</a></div> -->

<table border="0">
	<tr>
		<td width="100%"><h1>实时协作</h1></td>
		<td align="right" valign="middle" nowrap=""><a href="Doc07_UsingModels.html" title="向后使用模型和模型元素"><img src="../../images/backward.png" border="0"></a> <a href="Doc09_TechnicalBackground.html" title="转发了解技术背景"><img src="../../images/forward.png" border="0"></a></td>
	</tr>
</table>
<p class="author">作者：Eike Stepper</p>
<p>CDO通过将一个用户<a href="../../javadoc/org/eclipse/emf/cdo/transaction/CDOUserTransaction.html#commit(org.eclipse.core.runtime.IProgressMonitor)" title="org.eclipse.emf.cdo.transaction中的方法。CDOUserTransaction"><code>commits</code></a>到存储库的更改传输到连接到同一存储库的所有其他用户，并将这些更改透明地编织到其模型副本中，支持模型上的实时协作。
 </p><p align="center"><img src="collaborating.png">

 </p><p>使用CDO，本地模型副本（特别是<a href="Doc04_CheckingOut.html#Doc_TransactionalCheckouts" title="CDO模型存储库文档中的章节">在线事务检出</a> ）不需要手动<i>更新</i> ;它们会在其他用户更改时自动更新（几乎）。
 </p><p>由于实时协作依赖于提交<a href="../../javadoc/org/eclipse/emf/cdo/transaction/CDOTransaction.html" title="org.eclipse.emf.cdo.transaction中的接口"><code>transaction</code></a>因此它仅适用于在线事务检出和在线事务模型上打开的<a href="Doc07_UsingModels.html#Doc_EditingModelElementsEditor" title="CDO模型存储库文档中的章节">编辑器</a> 。保存模型编辑器会提交基础事务。
 </p><p>存储库中的模型和模型元素的数据完整性由<b>每个模型元素</b>获取的<a href="../../../org.eclipse.net4j.util.doc/javadoc/org/eclipse/net4j/util/concurrent/IRWLockManager.LockType.html#WRITE" title="org.eclipse.net4j.util.concurrent中的字段。IRWLockManager。锁定类型"><code>write locks</code></a>保证。<a href="../../../org.eclipse.net4j.util.doc/javadoc/org/eclipse/net4j/util/concurrent/IRWLockManager.LockType.html#READ" title="org.eclipse.net4j.util.concurrent中的字段。IRWLockManager。锁定类型"><code>Read locks</code></a>和<a href="../../../org.eclipse.net4j.util.doc/javadoc/org/eclipse/net4j/util/concurrent/IRWLockManager.LockType.html#OPTION" title="org.eclipse.net4j.util.concurrent中的字段。IRWLockManager。锁定类型"><code>write options</code></a>以及<a href="../../javadoc/org/eclipse/emf/cdo/view/CDOView.html#enableDurableLocking()" title="org.eclipse.emf.cdo.view中的方法。CDOView"><code>durable locks</code></a>由核心级API支持，但不受CDO Explorer的用户界面支持。
 </p><p>
 <b>目录</b> </p><p>
</p><table border="0">
<tr><td>1</td><td class="te" colspan="4"><a href="Doc08_Collaborating.html#Doc_OptimisticLocking" title="CDO模型存储库文档中的章节">乐观锁定</a></td></tr>
<tr><td></td><td>1.1</td><td class="te" colspan="3"><a href="Doc08_Collaborating.html#Doc_EarlyConflictDetection" title="CDO模型存储库文档中的章节">早期冲突检测</a></td></tr>
<tr><td></td><td>1.2</td><td class="te" colspan="3"><a href="Doc08_Collaborating.html#Doc_AutomaticConflictResolution" title="CDO模型存储库文档中的章节">自动冲突解决</a></td></tr>
<tr><td></td><td>1.3</td><td class="te" colspan="3"><a href="Doc08_Collaborating.html#Doc_InteractiveConflictResolution" title="CDO模型存储库文档中的章节">互动冲突解决方案</a></td></tr>
<tr><td>2</td><td class="te" colspan="4"><a href="Doc08_Collaborating.html#Doc_PessimisticLocking" title="CDO模型存储库文档中的章节">悲观锁定</a></td></tr>
<tr><td></td><td>2.1</td><td class="te" colspan="3"><a href="Doc08_Collaborating.html#Doc_TreeLocking" title="CDO模型存储库文档中的章节">树锁定</a></td></tr>
<tr><td>3</td><td class="te" colspan="4"><a href="Doc08_Collaborating.html#Doc_AutomaticLocking" title="CDO模型存储库文档中的章节">自动锁定</a></td></tr>
<tr><td>4</td><td class="te" colspan="4"><a href="Doc08_Collaborating.html#Doc_AutomaticCommitting" title="CDO模型存储库文档中的章节">自动提交</a></td></tr>
</table>



<h2><a name="Doc_OptimisticLocking"></a> 1乐观锁定</h2>
<p>默认情况下，模型元素被乐观地锁定，也就是说，CDO服务器在执行提交操作时<i>隐式地</i>获取和释放锁。这些隐式锁对提交用户或同一存储库的任何其他用户不可见。
 </p><p>乐观锁定提供尽可能高的并发度，但它也带有非零的提交冲突风险，只有在CDO服务器执行提交操作时才会检测到这种风险，因此会被拒绝。由于<a href="Doc08_Collaborating.html#Doc_EarlyConflictDetection" title="CDO模型存储库文档中的章节">早期冲突检测</a> ，在提交过程后期检测到的冲突风险通常远低于例如纯数据库应用程序中的冲突风险。
 </p><p>要完全消除提交冲突的风险，必须使用<a href="Doc08_Collaborating.html#Doc_PessimisticLocking" title="CDO模型存储库文档中的章节">悲观锁定</a> 。

</p><h3><a name="Doc_EarlyConflictDetection"></a> 1.1早期冲突检测</h3>
<p>由于用户的本地模型副本（几乎）在其他用户更改时自动更新，因此CDO可以提前预测本地更改的冲突可能性，特别是在尝试提交这些更改之前。<a href="Doc07_UsingModels.html#Doc_EditingModelElementsEditor" title="CDO模型存储库文档中的章节">CDO模型编辑器</a>使用红色字体装饰这些冲突的模型元素，表明基础<a href="../../javadoc/org/eclipse/emf/cdo/transaction/CDOTransaction.html" title="org.eclipse.emf.cdo.transaction中的接口"><code>transaction</code></a>不再能够成功提交。
 </p><p align="center"><img src="early-conflict.png">

 </p><p>
 <a href="Doc08_Collaborating.html#Doc_AutomaticConflictResolution" title="CDO模型存储库文档中的章节">自动冲突解决</a>和<a href="Doc08_Collaborating.html#Doc_InteractiveConflictResolution" title="CDO模型存储库文档中的章节">交互式冲突解决</a> （如果启用）可能会对哪些确切类型的更改被视为冲突产生影响。

</p><h3><a name="Doc_AutomaticConflictResolution"></a> 1.2自动冲突解决</h3>
<p>每当CDO服务器通知本地事务远程更改并检测到本地冲突时（请参阅<a href="Doc08_Collaborating.html#Doc_EarlyConflictDetection" title="CDO模型存储库文档中的章节">早期冲突检测</a> ），这些冲突被分类为<i>平凡</i>冲突<i>或非平凡</i>冲突。琐碎的冲突是：</p><ul>
 <li>改变多值<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.9.0/org/eclipse/emf/ecore/EStructuralFeature.html" title="org.eclipse.emf.ecore中的接口" target="_blank"><code>features</code></a>在两侧上相同的模型元素的（本地和远程）。
 </li><li>对同一模型元素的两侧（本地和远程）的不同单值<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.9.0/org/eclipse/emf/ecore/EStructuralFeature.html" title="org.eclipse.emf.ecore中的接口" target="_blank"><code>features</code></a>更改。
 </li></ul>
 <p>普通冲突自动合并到本地事务中，即不涉及用户交互。
 </p><p>当检测到非平凡的变化时，即，对同一模型元素的两侧（本地和远程）的相同单值<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.9.0/org/eclipse/emf/ecore/EStructuralFeature.html" title="org.eclipse.emf.ecore中的接口" target="_blank"><code>feature</code></a>更改时，将暂停所有模型元素的自动冲突解决，直到下一次本地提交操作。在此期间，所有传入的更改通知都会在提交时累积并记住，以便进行<a href="Doc08_Collaborating.html#Doc_InteractiveConflictResolution" title="CDO模型存储库文档中的章节">交互式冲突解决</a> 。

</p><h3><a name="Doc_InteractiveConflictResolution"></a> 1.3互动冲突解决方案</h3>
<p>如果<a href="Doc08_Collaborating.html#Doc_AutomaticConflictResolution" title="CDO模型存储库文档中的章节">自动冲突解决</a>已在本地<a href="../../javadoc/org/eclipse/emf/cdo/transaction/CDOTransaction.html" title="org.eclipse.emf.cdo.transaction中的接口"><code>transaction</code></a>检测到非平凡冲突，并且尝试提交此事务，则会弹出以下对话框：</p><p align="center"><img src="late-conflict.png">

 </p><p>该对话框显示了添加，更改和删除了多少本地模型元素的概述。用户必须选择以下几种冲突解决方案之一：</p><ul>
 <li>如果选择了“合并”操作，则会打开EMF合并编辑器，左侧显示远程更改，右侧显示本地更改：<p align="center"><img src="merge.png">

      </p><p>保存此合并编辑器会提交合并的本地事务。请注意，在此期间可能已检测到新的非平凡冲突，在这种情况下，再次触发交互式冲突解决。
 </p></li><li>如果选择了回滚操作的本地事务<a href="../../javadoc/org/eclipse/emf/cdo/transaction/CDOUserTransaction.html#rollback()" title="org.eclipse.emf.cdo.transaction中的方法。CDOUserTransaction"><code>rolled back</code></a>和局部模型副本会自动更新到最新版本的遥控器。因此，所有本地更改都将丢失，最终需要重新应用并再次提交。
 </li></ul>

<h2><a name="Doc_PessimisticLocking"></a> 2悲观锁定</h2>
<p>有时似乎不希望冒险提交冲突，因为<a href="Doc08_Collaborating.html#Doc_OptimisticLocking" title="CDO模型存储库文档中的章节">乐观锁定</a>会发生冲突。在这些情况下，CDO支持在所选模型上获取<i>显式</i>锁（请参见<a href="Doc08_Collaborating.html#Doc_TreeLocking" title="CDO模型存储库文档中的章节">树锁定</a> ）和模型元素。
 </p><p>悲观锁定支持包括：</p><ul>
 <li>锁定和解锁操作</li><li>锁定状态可视化</li></ul>
 <p>自定义用户界面组件（如模型编辑器或视图）是否支持本地操作和/或锁定状态可视化取决于这些组件的实现。CDO模型编辑器的上下文菜单为未被任何人锁定的模型元素提供锁定操作，并为当前用户锁定的模型元素解锁操作。CDO模型编辑器和<a href="Doc01_UserInterface.html#Doc_ProjectExplorerIntegration" title="CDO模型存储库文档中的章节">Project Explorer集成都</a>支持锁定状态可视化，方法是使用绿色锁定图标（表示可以修改它们）修饰当前用户锁定的模型元素，并使用红色锁定其他用户锁定的模型元素锁定图标（表示无法修改）：</p><p align="center"><img src="pessimistic-locking.png">

 </p><p>请注意，CDO编辑器通常在单独的事务的上下文中操作，特别是在相关结帐的<a href="../../javadoc/org/eclipse/emf/cdo/view/CDOView.html" title="org.eclipse.emf.cdo.view中的接口"><code>read-only view</code></a>的上下文中，这解释了为什么在上面的屏幕截图中，两个结账显示锁定的模型元素红色锁图标装饰。换句话说，当模型元素被锁定在CDO编辑器中时，不能通过Project Explorer在相关的结帐中直接修改它。

</p><h3><a name="Doc_TreeLocking"></a> 2.1树锁定</h3>
<p>有时，不仅要锁定单个模型元素，而且要原子锁定以所选模型元素为根的模型元素树。CDO模型编辑器的上下文菜单为未被任何人锁定的模型元素提供锁定树操作，为当前用户锁定的模型元素提供解锁树操作。

</p><h2><a name="Doc_AutomaticLocking"></a> 3自动锁定</h2>
<p>在为特定<a href="../../javadoc/org/eclipse/emf/cdo/transaction/CDOTransaction.html" title="org.eclipse.emf.cdo.transaction中的接口"><code>transaction</code></a>启用自动锁定时，在第一次修改这些模型元素时，会自动为模型元素获取写锁定。
 </p><p>结帐时尚不支持自动锁定。

</p><h2><a name="Doc_AutomaticCommitting"></a> 4自动提交</h2>
<p>通过为特定<a href="../../javadoc/org/eclipse/emf/cdo/transaction/CDOTransaction.html" title="org.eclipse.emf.cdo.transaction中的接口"><code>transaction</code></a>启用自动提交，每次修改模型元素时都会自动提交事务。当存储库的主要目的是支持许多用户之间的实时协作时，这非常有用。
 </p><p>另一方面，自动提交多个逻辑相关的更改不再在单个组合提交中被隔离。这在具有审计或分支支持的存储库中尤其不合需要，因为这些类型的存储库的数据库随着提交的数量单调增长。
 </p><p>结帐时尚不支持自动提交。

</p><p align="right">
<a href="Doc07_UsingModels.html" title="向后使用模型和模型元素"><img src="../../images/backward.png" border="0"></a> <a href="Doc09_TechnicalBackground.html" title="转发了解技术背景"><img src="../../images/forward.png" border="0"></a></p>
<!-- <div class="help_breadcrumbs breadcrumbs_bottom"><a href="../Overview.html" title="CDO Model Repository Documentation">CDO Model Repository Documentation</a> > <a href="index.html" title="Category in CDO Model Repository Documentation">User's Guide</a></div> -->

<div class="copyright">版权所有（c）2014 Eike Stepper（德国柏林）等。<br>版权所有。本程序及随附材料根据本发行版附带的Eclipse Public License v1.0条款提供，可从http://www.eclipse.org/legal/epl-v10.html获取。</div>
</body>
</html>
<html id="1888.new_in_2.1.html" dir="ltr"></html><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" gtc:encodedoriginal="PCFET0NUWVBFIEhUTUwgUFVCTElDICItLy9XM0MvL0RURCBIVE1MIDQuMCBUcmFuc2l0aW9uYWwvL0VOIj4=">
<html dir="ltr">
<head>
    <link rel="stylesheet" type="text/css" href="../css/style.css"></link>
    <link rel="stylesheet" type="text/css" href="../css/nn.css"></link>
	<title>OTDT 2.1  - 新的和值得注意的</title>
</head>
<body dir="ltr">
<h1>OTDT 2.1  - 新的和值得注意的</h1>
<!--div class="navigation"><i>Status: 2.1 M7</i></div-->
<div class="navigation">在此页面上： <!--a href="#metrics">&bull; Metrics Plug-in</a--> <!--a href="#configuration">&bull; Configuration</a--> <a href="#views">•视图/对话框</a> <a href="#assist">•内容辅助</a> <!--a href="#refactor">&bull; Refactoring</a--> <a href="#formatting">•格式化</a> <a href="#debug">•运行/调试</a> <a href="#language">•语言</a> <!--a href="#api">&bull; API</a--> <a href="#compiler">•编译器</a> <a href="#otre">•运行时</a> <!--a href="#otequinox">&bull; OT/Equinox</a--> <a href="#releng">•发布工程</a>  
</div>
<table cellpadding="10" cellspacing="0" width="100%">
  <colgroup>
  <col width="20%">
  <col width="80%">
  </colgroup>
  <tbody>
<td><!--
  <tr><td colspan="2" id="NAME"><h2>HEADING</h2></td></tr>
  <tr>
    <td><p align="right"><b>DESC</b><br>
        <span class="since">since&nbsp;0.7.1</span><br>
        <a class="buglink" title="TITLE" href="https://bugs.eclipse.org/308029">308029</a></p></td>
    <td><p>
    		
    	</p>
    	<p><img alt="TEXT" src="../images/screenshots/NN07/.png"></p>
    	<p></p>
    </td>
  </tr>
  <div class="listbox"><div class="listing"><pre><code class="keyword">public team class</code> <font color="blue">MyTeam</font> {
}</pre></div></div>
-->
  <tr></tr></td><td colspan="2" id="views"><h2>视图和对话框</h2></td>
  <tr>
    <td><p align="right"><b>提升呼叫层次结构</b><br>
        <span class="since">从2.1M6开始</span><br>
        <a class="buglink" title="CallHierarchy应该考虑提升为角色实例创建" href="https://bugs.eclipse.org/301314">301314</a></p></td>
    <td><p>以前，角色构造函数的调用层次结构是不完整的，因为可以通过提升按需构建角色。为了可视化这种隐式行为，调用层次结构已被扩展，以考虑提升作为角色提升构造函数的调用。
    	</p>
    	<p><img alt="调用角色构造的层次结构" src="../images/screenshots/NN21/callHierarchyLifting.png"></p>
    	<p>这里为角色类型<code>Item</code>打开了调用层次结构，以查找实例化的所有路径。调用层次结构显示callin绑定<code>earchCredit &lt;- after book</code>因为它可能会触发将<code>Segment</code>提升到其<code>Item</code>角色。</p>
    </td>
  </tr>
  <tr><td colspan="2" id="assist"><h2>内容辅助</h2></td></tr>
  <tr>
    <td><p align="right"><b>将签名添加到方法绑定</b><br>
        <span class="since">从2.1M2开始</span><br>
        <a class="buglink" title="[辅助]使添加签名更加灵活，可以防止模糊的方法绑定" href="https://bugs.eclipse.org/355274">355274</a></p></td>
    <td><p>现有的快速辅助“向方法绑定添加签名”已得到改进，因此即使无法解析其基本方法，也可以在无签名方法绑定上使用它。如果基类具有方法绑定中提到的名称的多个方法，则收集所有匹配的基本方法，将最佳匹配插入编辑器中，并且在链接模式中提供其他匹配作为替代。
    	</p>
    	<p>所以，如果在调用助手之前你有：</p>
    	<p><img alt="模糊基础方法" src="../images/screenshots/NN21/AmbiguousBaseMethod.png"></p>
    	<p>您可以调用辅助作为quickfix（例如，从错误悬停），产生此更改：</p>
    	<p><img alt="添加签名快速帮助" src="../images/screenshots/NN21/AddSignaturesAssist.png"></p>
    	<p>您可以从列表中选择合适的基本方法。</p>
    	<p><strong>提示：</strong>如果方法绑定的签名不正确，您可以先删除签名（使用快速辅助），然后让这个新的辅助插入正确的签名。</p>
    </td>
  </tr>
  <tr>
    <td><p align="right"><b>从隐式超级角色实现抽象方法</b><br>
        <span class="since">从2.1M3开始</span><br>
        <a class="buglink" title="[quickfix]从tsuper实现抽象方法" href="https://bugs.eclipse.org/348574">348574</a></p></td>
    <td><p>现有的快速辅助“添加未实现的方法”已经扩展，也适用于那些从超级团队中的相应角色<b>隐式继承的</b>抽象方法。
    	</p>
    	<p>针对角色类的错误现在提供了快速修复：</p>
    	<p><img alt="必须实现..抽象方法" src="../images/screenshots/NN21/ImplementFromTSuper.png"></p>
    	<p>调用快速修复（例如，从错误悬停）产生此更改：</p>
    	<p><img alt="“添加未实现的方法”快速修复的结果" src="../images/screenshots/NN21/ImplementFromTSuper1.png"></p>
    </td>
  </tr>
  <tr>
    <td><p align="right"><b>改进了基础进口的处理</b><br>
        <span class="since">从2.1M5开始</span><br>
        <a class="buglink" title="改善基础进口的处理" href="https://bugs.eclipse.org/356003">356003</a></p></td>
    <td><p>OT / J中使用所谓的“基础导入”来区分那些仅作为当前团队中角色的基类导入的类，不允许在团队实施中直接使用及其角色（参见<a class="otjldlink" href="http://www.objectteams.org/def/1.3/s2.html#s2.1.2.d">OTJLD§2.1） .2（d）</a> ）。伞虫356003列出了几个单独的改进，以使内容辅助，向导和重构更好地了解基本导入的语义规则。在所有这些情况下，现在都会创建正确的基本导入或常规导入，并且如果重构要求，则会正确更新基本导入。
    	</p>
    </td>
  </tr>
  <tr><td colspan="2" id="formatting"><h2>格式化</h2></td></tr>
  <tr>
    <td><p align="right"><b>OT / J的基本代码格式</b><br>
        <span class="since">从2.1M5开始</span><br>
        <a class="buglink" title="Formatter在大团队上无声地失败" href="https://bugs.eclipse.org/331731">331731</a></p></td>
    <td><p>在以前的版本中，对OT / J的代码格式化的支持是不完整的，并且某些构造（如<code class="keyword">precedence</code>出现使格式化程序无声地失败。从2.1 M5开始，OT / J的代码格式现在通常适用于所有语言结构。对于所有语法元素，结果可能不是最佳的，因为没有为callin / callout等元素引入特殊首选项选项。但是，不反对默认格式样式的用户现在可以依赖角色和团队的自动格式。
    	</p>
    </td>
  </tr>
<td><!--
  <tr><td colspan="2" id="refactor"><h2>Refactoring</h2></td></tr>
-->
  <tr></tr></td><td colspan="2" id="language"><h2>语言</h2></td>
  <tr>
    <td><p align="right"><b>Java 7支持</b><br>
        <span class="since">从2.1M1开始</span><br>
        <a class="buglink" title="升级到Java7" href="https://bugs.eclipse.org/353894">353894</a></p></td>
    <td><p>从2.1 M1开始，OT / J已经与Java 7集成，即OT / J编译器也支持<a href="http://www.eclipse.org/jdt/ui/r3_8/Java7news/whats-new-java-7.html">Java 7中引入的</a>所有<a href="http://www.eclipse.org/jdt/ui/r3_8/Java7news/whats-new-java-7.html">新功能</a> 。
    	</p>
    </td>
  </tr>
  <tr>
    <td><p align="right"><b>@Override用于静态角色方法</b><br>
        <span class="since">从2.1M3开始</span><br>
        <a class="buglink" title="[编译器]支持@Override用于静态角色方法" href="https://bugs.eclipse.org/359894">359894</a></p></td>
    <td><p>沿着隐式继承，角色甚至可以从其隐式超级角色覆盖静态方法。现在可以使用<code>@Override</code>注释记录此<code>@Override</code> ，这将导致编译器检查声明的覆盖是否实际发生：</p>
    	<p>
    	</p><div class="listbox"><div class="listing"><pre><code class="keyword">public team class</code> T0 { <code class="keyword">protected class</code> R { <code class="keyword">static int</code> zork（）{return 0;}}} <code class="keyword">public team class</code> T1 <code class="keyword">extends</code> T0 { <code class="annotation">@Override</code> <code class="keyword">protected class</code> R { <code class="annotation">@Override</code> <code class="comment">// OK</code> <code class="keyword">static int</code> zork（）{return 1;} <code class="annotation">@Override</code> <code class="comment">// <b style="color:red">ERROR</b></code> <code class="keyword">static void</code> bar（）{}}}</pre></div></div>
    	
    </td>
  </tr>
  <tr>
    <td><p align="right"><b>基类作为方法返回</b><br>
        <span class="since">从2.1M6开始</span><br>
        <a class="buglink" title="[编译器] [otjld]考虑允许基本导入类型作为团队方法的返回类型" href="https://bugs.eclipse.org/370273">370273</a></p></td>
    <td><p>不允许在团队或角色的主体中提及基本导入的类。但是，团队方法可能希望返回一个角色，然后在途中应该降低该角色。以前，这种降低是不可能的，因为无法提及基本类型（通过其简单的名称）。对于团队方法返回类型的特定情况，已删除此限制。
    	</p>
    	<p>
    	</p><div class="listbox"><div class="listing"><pre><code class="keyword">import base</code> some.pack。基础; // <span style="color:red">base import限制使用“Base”</span> <code class="keyword">public team class</code> T { <code class="keyword">protected class</code> R <code class="keyword">playedBy</code> Base {} <code class="keyword">private</code> R r; <code class="keyword">public</code> <b style="color:blue">Base</b> getObject（）{ <code class="keyword">return this</code> .r; // <span style="color:green">适用降低</span> }}</pre></div></div>
    	
    </td>
  </tr>
  <tr><td colspan="2" id="debug"><h2>运行/调试</h2></td></tr>
  <tr>
    <td><p align="right"><b>使用OT / Equinox简化启动</b><br>
        <span class="since">从2.1M4开始</span><br>
        <a class="buglink" title="[debug]使OT / Equinox启动位置无关" href="https://bugs.eclipse.org/366315">366315</a></p></td>
    <td><p>OT / Equinox使用片段实现，该片段充当Equinox的<em>框架扩展</em> 。到目前为止，这要求OT / Equinox束位于同一位置，也就是<code>org.eclipse.osgi</code>所在的位置。这可能使调试OT / Equinox本身变得困难，因为所有提到的捆绑包都必须设置为物理存储在工作空间中的项目。
    	</p>
    	<p>此限制已被删除，即，可以从工作空间解析OT / Equinox包，同时从基础平台解析<code>org.eclipse.osgi</code> 。
    	</p>
    </td>
  </tr>  
  <tr>
    <td><p align="right"><b>热代码替换</b><br>
        <span class="since">从2.1M7开始</span><br>
        <a class="buglink" title="[debug]支持团队/角色/基地的热代码替换" href="https://bugs.eclipse.org/378176">378176</a><br>
        <a class="buglink" title="支持OT / Equinox的热代码替换" href="https://bugs.eclipse.org/378195">378195</a></p></td>
    <td><p>以前，在调试OT / J或OT / Equinox应用程序时，无法动态应用对正在运行的应用程序的源代码所做的更改，因为JVM会检测签名不匹配。这是因为在热代码替换期间没有使用对象团队字节码转换器。
    	</p>
    	<p>这已通过启用对象团队转换器重新编织已加载的类来解决。此外，对于OT / Equinox调试启动，已经开发了一种新的Java代理来触发编织以进行热代码替换（Equinox中的底层适配器挂钩不支持）。对于所有OT / Equinox调试启动，此代理程序将自动添加到Java命令行。
    	</p>
    	<p>因此，现在可以直接查看源代码更改的效果，即使在编织类中也无需重新启动应用程序。请注意，热代码替换受JVM限制为不影响任何签名的更改。
    	</p>
    </td>
  </tr>  
<td><!--
  <tr><td colspan="2" id="api"><h2>API</h2></td></tr>
-->
  <tr></tr></td><td colspan="2" id="compiler"><h2>编译器</h2></td>
  <tr><td><p align="right"><b>报告多个callins</b><br>
        <span class="since">从2.1M2开始</span><br>
        <a class="buglink" title="当两个角色同时捕获相同的方法时产生警告" href="https://bugs.eclipse.org/314610">314610</a></p></td>
    <td><p>当两个独立的callin绑定影响相同的基本方法时，这<em>可能</em>会导致意外行为。因此，报告新警告以警告用户这种情况：</p>
  		<p><img alt="多个callin绑定正在影响方法foo（）" src="../images/screenshots/NN21/MultipleCallins.png"></p>
  		<p>如警告消息中所述，此诊断仅在完整构建期间重新计算，因为此计算需要整个系统分析。
  		</p>
  		<p>使用左侧标尺中的callin标记导航到可能存在冲突的callin绑定以进行检查（对于callin标记和警告标记之间的混乱感到遗憾）：</p>
  		<p><img alt="OT / J callin绑定导航" src="../images/screenshots/NN21/GotoCallin.png"></p>
  	</td>
  </tr>

  <tr><td colspan="2" id="otre"><h2>对象团队运行时环境</h2></td></tr>
  <tr>
    <td><p align="right"><b>内存优化</b><br>
        <span class="since">从2.1M2开始</span><br>
        <a class="buglink" title="[otre]类RepositoryAccess正在浪费内存" href="https://bugs.eclipse.org/355328">355328</a></p></td>
    <td><p>可以显着降低OTRE的内存消耗。来自BCEL的给定类保留了加载类的完整结构，可以将其简化为更紧凑的格式。测量显示该数据结构减少到大约。原始尺寸的1％。
    	</p>
    </td>
  </tr>  
  <tr>
    <td><p align="right"><b>性能优化</b><br>
        <span class="since">从2.1M2开始</span><br>
        <a class="buglink" title="[otre]避免因急切创建_OT $ roleSet而导致性能下降" href="https://bugs.eclipse.org/355263">355263</a></p></td>
    <td><p>编织到每个基类中的内部数据结构被急切地初始化，从而导致性能损失。可以完全删除这种急切的初始化，已经实现了延迟初始化。对于创建了大量基础对象的情况，其中没有创建任何角色，这导致最多3.5的加速（来自微基准）。
    	</p>
    </td>
  </tr>  
  
  <tr><td colspan="2" id="releng"><h2>发布工程</h2></td></tr>
  <tr><td><p align="right"><b>来源捆绑</b><br>
        <span class="since">从2.1M6开始</span><br>
        <a class="buglink" title="创建源包和功能" href="https://bugs.eclipse.org/370650">370650</a></p></td>
    <td><p>我们现在发布一个额外的（可选）功能<code>org.eclipse.objectteams.otdt.source.feature</code> ，其中包含所有Object Teams插件的源代码，以支持浏览二进制插件，其中插件项目位于工作空间中依靠。
    	</p>
  	</td>
  </tr>
  
</tbody></table>
</body><html id="2196.s6.1.html" dir="ltr"></html><!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "../xhtml1-strict.dtd" gtc:encodedoriginal="PCFET0NUWVBFIGh0bWwKICBQVUJMSUMgIi0vL1czQy8vRFREIFhIVE1MIDEuMCBTdHJpY3QvL0VOIiAiLi4veGh0bWwxLXN0cmljdC5kdGQiPg==">
<html lang="zh-Hans" dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
      <link rel="stylesheet" type="text/css" href="../css/ot.css"></link>
      <link rel="stylesheet" type="text/css" href="../css/otjld.css"></link>
      <title>OT / J语言定义v1.3.1</title>
   </head>
   <body class="otdt" dir="ltr">
      <div id="content">
         <table class="nav">
            <tr>
               <td class="back"><a id="top"></a></td>
               <td class="top"><a href="index.html" rel="contents">↑目录↑</a></td>
               <td class="next"><a href="s6.2.html" rel="next">§6.2其他API元素&gt;&gt;</a></td>
            </tr>
         </table>
         <div class="breadcrumb"><a class="nav" href="s6.html" rel="section">§6ObjectTeams API</a></div>
         <div class="sect depth2" id="s6.1">
            <h2 class="sect">§6.1反思<a class="img" href="s6.1.html" title="PermaLinkto§6.1反思"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h2>
            <p>对象团队支持关于团队，角色和角色基础关系的反思。
               		
            </p>
            <div class="subsect depth3" id="s6.1.a">
               <h4 class="subsect">（a） <span class="title">与角色登记处的接口</span><a class="img" href="s6.1.a.html" title="PermaLink（a）与角色注册表的接口"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>每个团队实例内部都有一个由其基础对象索引的已知角色对象的注册表。程序员可以使用<code>org.objectteams.定义的以下反射方法来使用此注册表<code>org.objectteams.ITeam</code> ：</p>
               <dl>
                  <dt><code>boolean hasRole（Object aBase）;</code></dt>
                  <dd>此方法检查传递的基础对象的角色是否已存在于目标团队中。
                     				
                  </dd>
                  <dt><code>boolean hasRole（Object aBase，Class roleType）;</code></dt>
                  <dd>此方法检查作为传递的基础对象<code>aBase</code>的角色的<code>roleType</code>的实例是否已存在于目标团队中。角色也可以是指定角色类型的任何子类型。<br>如果<code>roleType</code>不是当前团队的成员类型，则抛出<code>IllegalArgumentException</code> 。
                     				
                  </dd>
                  <dt><code>Object getRole（Object aBase）;</code></dt>
                  <dd>如果传递的基础对象<code>aBase</code>已在目标团队中具有角色，则返回此角色。否则返回<code>null</code> 。
                     				
                  </dd>
                  <dt><code>&lt;T&gt; T getRole（Object aBase，Class &lt;T&gt; roleType）;</code></dt>
                  <dd>如果传递的基础对象<code>aBase</code>已在目标团队中具有可分配给<code>roleType</code>表示的<code>roleType</code> ，则返回此角色。否则返回<code>null</code> 。<br>如果<code>roleType</code>不是当前团队的成员类型，则抛出<code>IllegalArgumentException</code> 。
                     				
                  </dd>
                  <dt><code>Object [] getAllRoles（）;</code></dt>
                  <dd>检索目标团队中的所有现有（已注册） <a href="s2.1.a.html" title="§2.1。（a）基于角色的约束" class="sect">绑定角色（第2.1节（a））</a> 。
                     					<br>此方法使用弱引用的内部结构。因此，它可能会返回垃圾收集器即将回收的角色实例。如果性能允许，建议在调用<code>getAllRoles()</code> <code>System.gc()</code>之前始终调用<code>System.gc()</code>以获得确定性结果（另见<a href="s2.1.f.html" title="§2.1。（f）对垃圾收集的影响" class="sect">§2.1。（f）</a> ）。
                     				
                  </dd>
                  <dt><code>&lt;T&gt; T [] getAllRoles（Class &lt;T&gt; roleType）;</code></dt>
                  <dd>检索目标团队中可分配给<code>roleType</code>表示的<code>roleType</code>所有现有（已注册） <a href="s2.1.a.html" title="§2.1。（a）基于角色的约束" class="sect">绑定角色（第2.1。（a））</a> 。
                     					<br>如果<code>roleType</code>不是当前团队的成员类型，则抛出<code>IllegalArgumentException</code> 。
                     <br>请参阅上面有关垃圾收集的说明。
                     				
                  </dd>
                  <dt><code>void unregisterRole（Object aRole）;</code></dt>
                  <dd>此方法从目标团队取消注册传递的角色对象。因此相应的基础失去了这个角色。调用此方法后，不应再使用该角色。
                     				
                  </dd>
                  <dt><code>void unregisterRole（Object aRole，Class roleType）;</code></dt>
                  <dd>此方法从目标团队取消注册传递的角色对象。因此相应的基地失去了这个角色。调用此方法后，不应再使用该角色。与前一种方法的唯一区别是提高了速度，因为不必搜索相应的注册表。
                     					<br>如果<code>roleType</code>不是当前团队的成员类型，则抛出<code>IllegalArgumentException</code> 。
                     				
                  </dd>
               </dl>
               <p>希望并且可能在警卫中使用这些方法（见<a href="s5.4.html" title="§5.4守护谓词" class="sect">§5.4</a> ）。这些方法允许以更简洁和更具表现力的方式编写警卫的规范。由签名确定，前四种方法只能用于基本级别的保护（第<a href="s5.4.2.html" title="§5.4.2基地警卫" class="sect">5.4.2节</a> ），因为它们需要引用基础对象。
                  			
               </p>
               <h5 class="listing">示例代码（警卫和反射）：</h5>
               <div class="listing example frame">
                  <table class="listing">
                     <tr class="line odd">
                        <td class="ln">1</td>
                        <td><pre><b>公共</b> <b>团队</b> <b>类</b> SpecialConditions {</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">2</td>
                        <td><pre>  <b>public</b> <b>void</b>参与（账户<b>为</b> BonusAccount ba）{}</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">3</td>
                        <td><pre>  <b>公共</b> <b>类</b> BonusAccount <b>播放了</b>账号</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">4</td>
                        <td><pre>    <b>基</b>时<em>（SpecialConditions.this。hasRole（</em>碱，BonusAccount.class））</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">五</td>
                        <td><pre>{</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">6</td>
                        <td><pre>    <b>callin</b> <b>void</b> creditBonus（ <b>int</b> amount）{</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">7</td>
                        <td><pre>base.creditBonus（金额+奖金）;</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">8</td>
                        <td><pre>}</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">9</td>
                        <td><pre>    <b>void</b> creditBonus（ <b>int</b> amount） <b>&lt; -</b> <b>replace</b> <b>void</b> credit（ <b>int</b> i）</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">10</td>
                        <td><pre>      <b>基数</b> <b>何时</b> （i&gt; 1000）;</pre></td>
                     </tr>
                     <tr class="line odd">
                        <td class="ln">11</td>
                        <td><pre>}</pre></td>
                     </tr>
                     <tr class="line even">
                        <td class="ln">12</td>
                        <td><pre>}</pre></td>
                     </tr>
                  </table>
               </div>
               <div class="codecomment">
                  <h5>功效：</h5>该团队为注册<code>Account</code>提供奖励系统。每次向注册账户存入超过1000的金额时，额外1％的金额将被记入贷方。
                  				 
                  <ul>
                     <li><code>participate</code>第2行的团队级方法使用声明的提升（参见<a href="s2.3.2.html" title="§2.3.2宣布解除" class="sect">§2.3.2</a> ），允许通过的<code>Account</code>对象参与<code>SpecialConditions</code>团队提供的奖励系统。
                        	
                     </li>
                     <li>第4行中的基准防护使用反射方法<code>hasRole</code>来检查基础对象是否已在周围团队中具有<code>BonusAccount</code>类型的角色。表达式<code>BonusAccount.class</code>返回<code>java.lang.表示角色<code>BonusAccount</code> Class</code>对象（参见<a href="http://java.sun.com/docs/books/jls/second_edition/html/expressions.doc.html#251530" class="ext">JLS§15.8.2</a> ）。该警卫确保只有通过<code>participate</code>明确注册的帐户才会使用<code>BonusAccount</code>类型的角色进行<code>BonusAccount</code> 。
                        
                     </li>
                     <li>第10行中的方法绑定保护将callin转换为<code>creditBonus</code>以限制基本方法参数<code>amount</code>大于1000的调用。
                        					
                     </li>
                  </ul>
               </div>
            </div>
            <div class="subsect depth3" id="s6.1.b">
               <h4 class="subsect">（b） <span class="title">行为反思</span><a class="img" href="s6.1.b.html" title="永久链接到（b）行为反思"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>org.objectteams中定义的以下反射方法。ITeam可用于检查团队的动态行为：</p>
               <dl>
                  <dt><code>boolean isExecutingCallin（）;</code></dt>
                  <dd>此方法用于检查控制流是否已被当前团队的至少一个callin绑定截获。它可以用来避免不希望的重新进入团队。
                     				
                  </dd>
                  <dt><code>boolean isActive（）;</code></dt>
                  <dd>此方法检查团队实例是否对当前线程处于活动状态。
                     				
                  </dd>
                  <dt><code>boolean isActive（Thread aThread）;</code></dt>
                  <dd>此方法检查团队实例是否对线程<code>aThread</code>是活动的。
                     				
                  </dd>
               </dl>
            </div>
            <div class="subsect depth3" id="s6.1.c">
               <h4 class="subsect">（c） <span class="title">角色的类文字</span><a class="img" href="s6.1.c.html" title="PermaLink to（c）角色的类文字"><img src="../images/permalink.png" alt="" style="vertical-align:text-top;margin-left:5px"></a></h4>
               <p>所谓的类文字的Java语法， <code>MyClass <strong>.class</strong></code> （参见<a href="http://java.sun.com/docs/books/jls/second_edition/html/expressions.doc.html#251530" class="ext">JLS§15.8.2</a> ）可用于语义稍有变化的角色类型：角色类型是动态绑定的虚拟类型（ <a href="s1.3.1.html" title="§1.3.1角色类的获取和隐式继承" class="sect">§1.3.1</a> ）（ <a href="s1.3.1.e.html" title="§1.3.1。（e）类型的动态绑定" class="sect">§1.3） .1。（e）</a> ）。这也适用于角色类文字。由此遵循约束，即角色类文字只能在团队的非静态上下文中使用，即，用于评估角色类文字，封闭团队实例必须在范围内。
                  		<br>与角色类型的常规类型检查不同，类文本本身没有依赖类型。因此，对<code>hasRole(Object, Class)</code>等方法的调用的类型检查无法检测到<code>Class</code>实例是否实际上是从正确的团队实例中获取的。在给定团队中传递未被称为绑定角色的类的任何尝试都会在运行时导致<code>IllegalArgumentException</code> 。
                  			
               </p>
            </div>
         </div>
         <table class="nav">
            <tr>
               <td class="back"></td>
               <td class="top"><a href="index.html" rel="contents">↑目录↑</a></td>
               <td class="next"><a href="s6.2.html" rel="next">§6.2其他API元素&gt;&gt;</a></td>
            </tr>
         </table>
         <div class="breadcrumb"><a class="nav" href="s6.html" rel="section">§6ObjectTeams API</a></div>
      </div>
      <div id="footer">
         <hr><a class="w3c img" href="http://jigsaw.w3.org/css-validator/check/referer" shape="rect"><img src="../images/valid-css2-blue.png" alt="有效的CSS！" height="31" width="88"></a><a class="w3c img" href="http://validator.w3.org/check?uri=referer" shape="rect"><img src="../images/valid-xhtml10-blue.png" alt="有效的XHTML 1.0严格" height="31" width="88"></a><address>©Stephan Herrmann，Christine Hundt，Marco Mosconi</address>OT / J版本1.3.1  - 最后修改时间：2013-05-28</div>
   </body>
</html><html id="0104.fm-HowToCreateAFormattingRule.html" dir="ltr"></html><?xml version="1.0" encoding="utf-8" ?="">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" gtc:encodedoriginal="PCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBYSFRNTCAxLjAgVHJhbnNpdGlvbmFsLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSL3hodG1sMS9EVEQveGh0bWwxLXRyYW5zaXRpb25hbC5kdGQiPg==">
<html lang="zh-Hans" dir="ltr" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"></meta>
    <meta http-equiv="Content-Style-Type" content="text/css"></meta>
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>如何创建格式规则</title>
    <link rel="StyleSheet" href="css/format.css" type="text/css" media="all"></link>
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"></link>
    <link rel="StyleSheet" href="webworks.css" type="text/css" media="all"></link>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
  </head>
  <body dir="ltr">
    <div style="text-align:left">
      <table cellspacing="0" summary="">
        <tr>
          <td>
            <a href="fm-HowToDeleteAStyle.html"><img src="images/prev.gif" alt="以前" border="0"></a>
          </td>
          <td>
            <a href="fm-HowToModifyAFormattingRule.html"><img src="images/next.gif" alt="下一个" border="0"></a>
          </td>
        </tr>
      </table>
    </div>
    <hr align="left">
    <blockquote>
      <h4 class="N_hth_HowToHelp"><a name="239932">如何创建格式规则</a></h4>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732283464567pt;white-space:nowrap">
                <span class="zAuto_0023Format">1</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="239935">在布局编辑器中，选择要有条件地格式化的报表元素。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732283464567pt;white-space:nowrap">
                <span class="zAuto_0023Format">2</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="257326">在Property Editor中选择Highlights选项卡。将出现“亮点”页面，</a> <a href="#257320" title="如何创建格式规则">如图6-11</a> 所示</a> 。如果尚未为所选元素指定任何格式规则，则它为空。</div>
            </td>
          </tr>
        </table>
      </div>
      <p class="i2_Image2"><a name="257318"><img class="Default" src="images/highlights.png" alt="图6-11“亮点”页面" style="display:inline;float:none;left:0.0;top:0.0"></a></p>
      <div class="fc2_FigCall2Title">
        <b class="Bold">图6-11“</b> <a name="257320">亮点”页面</a></div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732283464567pt;white-space:nowrap">
                <span class="zAuto_0023Format">3</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="337384">选择“添加”以添加新的格式设置规则。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732283464567pt;white-space:nowrap">
                <span class="zAuto_0023Format">4</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="337387">在“新建突出显示”中，通过完成以下步骤，创建将特定格式应用于报表元素的规则：</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732283464567pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732283464567pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">1</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="337388">首先用简单的英语来思考规则。例如：</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="cfi2_CodeFirstIndent2"><a name="262379">如果订单总额大于$ 50,000.00，则设置</a></div>
      <div class="coi2_CodeIndent2"><a name="262380">字体颜色为蓝色，字体样式为粗体。</a></div>
      <div class="N_i2_Indent2"><a name="138795">该规则分为两部分：If（条件）和Then（格式）。“新建突出显示”对话框可帮助您通过将规则分解为更具体的部分来指定规则的条件和格式。</a></div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732283464567pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732283464567pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">2</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="138798">通过完成以下步骤指定规则的条件部分：</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n3_NumList3_outer" style="margin-left:28.3464566929134pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n3_NumList3_inner" style="width:14.173228346456703pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray2">1</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n3_NumList3_inner"><a name="138799">在第一个字段中，指定条件表达式的第一部分。使用示例规则，此部分是订单总数：</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="b4_Bullet4_outer" style="margin-left:42.5196850393701pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="b4_Bullet4_inner" style="width:14.173228346456696pt;white-space:nowrap">
                <img src="Bullet.png" alt="*" border="0" width="6" height="6">
              </div>
            </td>
            <td width="100%">
              <div class="b4_Bullet4_inner"><a name="337687">如果订单总值直接来自所选元素，请从下拉列表中选择此数据项的值。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="b4_Bullet4_outer" style="margin-left:42.5196850393701pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="b4_Bullet4_inner" style="width:14.173228346456696pt;white-space:nowrap">
                <img src="Bullet.png" alt="*" border="0" width="6" height="6">
              </div>
            </td>
            <td width="100%">
              <div class="b4_Bullet4_inner"><a name="337688">如果订单总值来自另一个数据元素，请从下拉列表中选择该元素的列绑定名称。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n3_NumList3_outer" style="margin-left:28.3464566929134pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n3_NumList3_inner" style="width:14.173228346456703pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray2">2</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n3_NumList3_inner"><a name="337689">在第二个字段中，通过从列表中选择一个选项来指定条件表达式的第二部分。使用我们的示例规则，此部分大于。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n3_NumList3_outer" style="margin-left:28.3464566929134pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n3_NumList3_inner" style="width:14.173228346456703pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray2">3</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n3_NumList3_inner"><a name="337394">在第三个字段中，指定条件表达式的第三部分。使用我们的示例规则，此部分的值为50000，</a> <a href="#257300" title="如何创建格式规则">如图6-12</a> 所示</a> 。</div>
            </td>
          </tr>
        </table>
      </div>
      <p class="i4_Image4"><a name="257312"><img class="Default" src="images/ifcondition.png" alt="图6-12条件表达式的元素" style="display:inline;float:none;left:0.0;top:0.0"></a></p>
      <div class="fc4_FigCall4Title">
        <b class="Bold">图6-12</b> <a name="257300">条件表达式的元素</a></div>
      <div class="N_i2_Indent2"><a name="257302">您现在已经完成了规则的条件部分，该部分指定了以下内容：</a></div>
      <div class="cfi2_CodeFirstIndent2"><a name="138817">如果row [“OrderTotal”]大于50000</a></div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732283464567pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732283464567pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">3</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="138818">指定规则的格式部分，即“然后将字体颜色设置为蓝色，字体样式设置为粗体”，方法是完成以下步骤：</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="b3_Bullet3_outer" style="margin-left:28.3464566929134pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="b3_Bullet3_inner" style="width:14.173228346456703pt;white-space:nowrap">
                <img src="Bullet.png" alt="*" border="0" width="6" height="6">
              </div>
            </td>
            <td width="100%">
              <div class="b3_Bullet3_inner"><a name="138820">选择颜色，然后从颜色选择器中选择一种颜色。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <p class="N_si_ScanIcon"><a name="257284"><img class="Default" src="images/bold_button.png" alt="大胆的按钮" style="display:inline;float:none;left:0.0;top:0.0"></a></p>
      <div class="b3_Bullet3_outer" style="margin-left:28.3464566929134pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="b3_Bullet3_inner" style="width:14.173228346456703pt;white-space:nowrap">
                <img src="Bullet.png" alt="*" border="0" width="6" height="6">
              </div>
            </td>
            <td width="100%">
              <div class="b3_Bullet3_inner"><a name="257288">选择B选择粗体格式，</a> <a href="#237806" title="如何创建格式规则">如图6-13</a> <a name="257288">所示</a> 。</div>
            </td>
          </tr>
        </table>
      </div>
      <p class="i4_Image4"><a name="257292"><img class="Default" src="images/thencondition.png" alt="图6-13新突出显示中格式表达式的元素" style="display:inline;float:none;left:0.0;top:0.0"></a></p>
      <div class="fc4_FigCall4Title">
        <b class="Bold">图6-13</b> <a name="237806">新突出显示中格式表达式的元素</a></div>
      <div class="b3_Bullet3_outer" style="margin-left:28.3464566929134pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="b3_Bullet3_inner" style="width:14.173228346456703pt;white-space:nowrap">
                <img src="Bullet.png" alt="*" border="0" width="6" height="6">
              </div>
            </td>
            <td width="100%">
              <div class="b3_Bullet3_inner"><a name="293649">或者，如果您创建了一个名为order_data_highlight的样式（例如，指定格式），则可以从“应用样式”旁边的样式列表中选择样式。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732283464567pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732283464567pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">4</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="138827">选择确定以保存突出显示规则。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_i2_Indent2"><a name="223896">您创建的规则将显示在“突出显示列表”中，</a> <a href="#237882" title="如何创建格式规则">如图6-14</a> <a name="223896">所示</a> 。该规则将在您下次运行报表时生效。</div>
      <p class="i3_Image3"><a name="138832"><img class="Default" src="images/highlightslist.png" alt="图6-14突出显示列表" style="display:inline;float:none;left:0.0;top:0.0"></a></p>
      <div class="fc3_FigCall3Title">
        <b class="Bold">图6-14</b> <a name="237882">突出显示列表</a></div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732283464567pt;white-space:nowrap">
                <span class="zAuto_0023Format">五</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="138834">预览报告以测试格式规则。</a></div>
            </td>
          </tr>
        </table>
      </div>
    </blockquote>
    <hr align="left">
    <table align="right" summary="">
      <tr>
        <td class="WebWorks_Company_Name_Bottom">
          <a href="notices.html">（c）版权Actuate Corporation 2013</a>
        </td>
      </tr>
    </table>
  </body>
</html><html id="0161.rp-HowToDefineADataSetParameter.html" dir="ltr"></html><?xml version="1.0" encoding="utf-8" ?="">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" gtc:encodedoriginal="PCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBYSFRNTCAxLjAgVHJhbnNpdGlvbmFsLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSL3hodG1sMS9EVEQveGh0bWwxLXRyYW5zaXRpb25hbC5kdGQiPg==">
<html lang="zh-Hans" dir="ltr" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"></meta>
    <meta http-equiv="Content-Style-Type" content="text/css"></meta>
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>如何在SQL查询中插入参数标记</title>
    <link rel="StyleSheet" href="css/parameter.css" type="text/css" media="all"></link>
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"></link>
    <link rel="StyleSheet" href="webworks.css" type="text/css" media="all"></link>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
  </head>
  <body dir="ltr">
    <div style="text-align:left">
      <table cellspacing="0" summary="">
        <tr>
          <td>
            <a href="rp-HowToCreateABasicReportParameter.html"><img src="images/prev.gif" alt="以前" border="0"></a>
          </td>
          <td>
            <a href="rp-HowToUpdateAFilterConditionDynamicallyWhenTheReportRuns.html"><img src="images/next.gif" alt="下一个" border="0"></a>
          </td>
        </tr>
      </table>
    </div>
    <hr align="left">
    <blockquote>
      <h4 class="N_hth_HowToHelp"><a name="192655">如何在SQL查询中插入参数标记</a></h4>
      <p class="b_Body"><a name="192660">此过程假定您已创建数据集。</a></p>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">1</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="192666">在“数据资源管理器”中，右键单击要为其编辑查询的数据集，然后选择“编辑”。编辑数据集显示查询。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">2</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="140400">添加带有一个或多个参数的WHERE子句，如以下示例所示：</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="cfi_CodeFirstIndent"><a name="140401">数量&lt;？</a></div>
      <div class="cfi_CodeFirstIndent"><a name="140402">quantityinstock &lt;=？AND productvendor =？</a></div>
      <div class="cfi_CodeFirstIndent"><a name="142269">quantityinstock &lt;=？或者产品线喜欢？</a></div>
      <div class="N_i_Indent1"><a href="#250464" title="如何在SQL查询中插入参数标记" name="140403">图11-2</a>显示了带有两个参数标记的查询示例。</div>
      <p class="i2_Image2"><a name="140407"><img class="Default" src="images/querywithmarker_03.png" alt="图11-2使用两个参数标记进行查询" style="display:inline;float:none;left:0.0;top:0.0"></a></p>
      <div class="fc2_FigCall2Title">
        <b class="Bold">图11-2</b> <a name="250464">使用两个参数标记进行查询</a></div>
      <p class="b_Body"><a name="511208">此时，您已准备好为每个定义数据集参数？参数标记。下一节将介绍此任务。</a></p>
      <h4 class="N_ht_HowTo"><span style="font-family:&quot;Microsoft Sans Serif&quot;;font-size:10.0pt;font-weight:normal"><a name="511214"> </a></span>如何定义数据集参数</h4>
      <p class="b_Body"><a name="251082">此过程假定您已在SQL查询中插入参数标记。</a></p>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">1</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="140501">在“数据资源管理器”中，双击要为其创建参数的数据集。编辑数据集显示查询。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">2</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="227306">选择参数。编辑数据集显示“参数”页面。此页面显示BIRT报告设计器为每个参数创建的占位符数据集参数？查询的WHERE子句中的参数标记。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">3</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="298937">编辑每个数据集参数。选择一个参数并选择“编辑”。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">4</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="141938">在“编辑参数”中，</a>指定以下信息：</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">1</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="441693">在“名称”中，键入数据集参数的名称。优良作法是使用前缀（如DSP）将数据集参数与其他参数类型（如报表参数）区分开来。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">2</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="441696">在“数据类型”中，选择参数的数据类型。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">3</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="441698">在“方向”中，选择“输入该值表示该参数是输入参数。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">4</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="441589">在“链接到报告参数”中，选择要绑定到此数据集参数的报告参数。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_i2_Indent2"><a href="#298979" title="如何在SQL查询中插入参数标记" name="441596">图11-3</a>显示了数据集参数定义的示例，其中数据集参数DSP_quantityinstock链接到报告参数RP_quantityinstock。</div>
      <p class="i3_Image3"><a name="298952"><img class="Default" src="images/newdsparam.png" alt="图11-3数据集参数定义" style="display:inline;float:none;left:0.0;top:0.0"></a></p>
      <div class="fc3_FigCall3Title">
        <b class="Bold">图11-3</b> <a name="298979">数据集参数定义</a></div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">五</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="309957">选择确定。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">五</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="259664">重复步骤</a> <a href="#298937" title="如何在SQL查询中插入参数标记">3</a>和<a href="#141938" title="如何在SQL查询中插入参数标记">4</a> ，为SQL查询中的任何其他参数标记定义其他数据集参数。</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">6</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="259587">要将更改保存到数据集，请选择“确定”。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n1_NumList1_outer" style="margin-left:0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n1_NumList1_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023Format">7</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n1_NumList1_inner"><a name="143415">测试参数以验证是否使用用户指定的值更新查询，并且报告显示了您期望的结果。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">1</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="143455">选择预览。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">2</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="259966">如果未显示“输入参数”，请选择“刷新报告”。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_i2_Indent2"><a name="455130">输入参数显示您创建的所有报告参数。</a><a href="#455139" title="如何在SQL查询中插入参数标记">图11-4</a>显示了示例报告参数RP_quantityinstock和RP_productvendor。出现参数名称是因为未为“提示”文本属性提供值。</div>
      <p class="i3_Image3"><a name="455137"><img class="Default" src="images/enter_quantityinstock_parm.png" alt="图11-4输入参数" style="display:inline;float:none;left:0.0;top:0.0"></a></p>
      <div class="fc3_FigCall3Title">
        <b class="Bold">图11-4</b> <a name="455139">输入参数</a></div>
      <div class="N_n2_NumList2_outer" style="margin-left:14.1732pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align:baseline">
            <td>
              <div class="N_n2_NumList2_inner" style="width:14.1732pt;white-space:nowrap">
                <span class="zAuto_0023FormatGray">3</span>
              </div>
            </td>
            <td width="100%">
              <div class="N_n2_NumList2_inner"><a name="143460">为每个参数指定一个值，然后选择“确定”。</a></div>
            </td>
          </tr>
        </table>
      </div>
      <p class="b_Body"><a name="143546">如果您已完成本</a>节<a name="143546">前面所述的所有任务，则</a>查询的WHERE子句将包含指定的值，并且报告将显示与WHERE子句匹配的行。</p>
    </blockquote>
    <hr align="left">
    <table align="right" summary="">
      <tr>
        <td class="WebWorks_Company_Name_Bottom">
          <a href="notices.html">（c）版权Actuate Corporation 2013</a>
        </td>
      </tr>
    </table>
  </body>
</html></?xml></?xml></html></html>
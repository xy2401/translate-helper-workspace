<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="tutorial-introduction-to-refactoring.html"><meta charset="UTF-8"><title>Introduction to Refactoring - Help | IntelliJ IDEA</title><link rel="stylesheet" href="../app/v2/app.css"></head><body data-id="Tutorial_Introduction_to_Refactoring"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search IntelliJ IDEA Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="tutorial-introduction-to-refactoring.html#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_jbuilder">JBuilder</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="Tutorial_Introduction_to_Refactoring" id="Tutorial_Introduction_to_Refactoring.xml">Introduction to Refactoring</h1>    <p id="262a1ba0">        On this page:    </p>    <ul data-skip-index="skip"><li class="list__item"><a href="tutorial-introduction-to-refactoring.html#3b93d14e">Introduction</a></li><li class="list__item"><a href="tutorial-introduction-to-refactoring.html#ea777618">Renaming</a></li><li class="list__item"><a href="tutorial-introduction-to-refactoring.html#56cdf808">Extracting</a></li><li class="list__item"><a href="tutorial-introduction-to-refactoring.html#6082b21f">Deleting</a></li><li class="list__item"><a href="tutorial-introduction-to-refactoring.html#a3cada07">Conclusion</a></li></ul>    <div class="chapter"><h2 id="3b93d14e">Introduction</h2>        <p id="6a431861">            IntelliJ IDEA offers a lot of            <a href="refactoring-source-code.html">automatic refactoring capabilities</a>, but as developers it's not enough to know            how to perform them, we need to understand what these refactorings are, when we would want to apply            them, and any possible downsides or things to consider before using them.        </p>        <p id="b1763af3">            <a href="http://refactoring.com/" data-bypass="yes" target="_blank"><span>Refactoring, as defined by Martin Fowler</span></a>, "...is a disciplined            technique for restructuring an existing body of code, altering its internal structure without changing            its external behavior". Hence it's important before performing any refactoring in production code to have            comprehensive <a href="code-coverage.html">test coverage</a> to prove that you            haven't inadvertently changed the behaviour.        </p>        <p id="0e14423e">            The goal of this tutorial is to introduce those who may be new to the idea of            refactoring, particularly automatic refactoring, to IntelliJ IDEA's capabilities and show when you might want            to apply three of the basic types of refactoring:            <a href="rename-refactorings.html">Renaming</a>,            <a href="extract-method.html">Extracting</a>            and <a href="safe-delete.html">Deleting</a>.        </p>    </div>    <div class="chapter"><h2 id="ea777618">Renaming</h2>        <p id="5fe5154a"><a href="http://refactoring.com/catalog/renameMethod.html" data-bypass="yes" target="_blank"><span>Renaming</span></a>            may seem like a trivial refactoring, but renaming via a simple find-and-replace often means            unrelated items with the same name are unintentionally changed. Using IntelliJ IDEA's            <a href="rename-refactorings.html">rename refactorings</a>            minimises these errors.        </p>        <section class="procedure-steps"><h2 id="7757448f">Why Rename?</h2><ol class="list _decimal"><li class="list__item" id="dba2d25c"><p>The name is not descriptive enough</p></li><li class="list__item" id="a9851020"><p>The class/method/variable name doesn't match the what it really is</p></li><li class="list__item" id="e9484f14"><p>Something new has been introduced, requiring existing code to have more specific name</p></li></ol></section>        <section class="procedure-steps"><h2 id="b4785556">Renaming as you code</h2><p id="507f57b3">                    Imagine you come across the following code as you're implementing some feature or fixing some bug                    <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Server</span><span class="o">(</span><span class="n">path</span><span class="o">,</span> <span class="n">port</span><span class="o">,</span> <span class="n">endpoint</span><span class="o">);</span>
<span class="n">server</span><span class="o">.</span><span class="na">init</span><span class="o">();</span>
<span class="n">server</span><span class="o">.</span><span class="na">run</span><span class="o">();</span></code></div>                    Let's assume that we want to:                    <ul class="list _bullet"><li class="list__item" id="5d830a2c"><p>Rename <code class="code">endpoint</code>, a field, to describe what sort of endpoint it is. </p></li><li class="list__item" id="c7d4d533"><p>Rename <code class="code">init()</code>, a method on <code class="code">Server</code>, to something that more                            accurately describes that method.                        </p></li><li class="list__item" id="1fb5930a"><p>Rename <code class="code">Server</code>, a class, to something more specific.</p></li></ul>                </p><ol class="list _decimal"><li class="list__item" id="77dcd194">                <p id="fb87b63c">To rename the <code class="code">endpoint</code> field, place your cursor on the word endpoint and press                    <kbd data-primary_default="Shift+F6" data-primary_default_for_gnome="Shift+F6" data-primary_default_for_kde="Shift+F6" data-primary_default_for_xwin="Shift+F6" data-primary_emacs="Shift+F6" data-primary_jbuilder="Shift+F6" data-primary_visual_studio="Shift+F6" data-primary_netbeans="Ctrl+R" data-primary_eclipse="Shift+Alt+R" data-secondary_mac_os_x_10.5_="⇧F6" data-secondary_mac_os_x="⇧F6" data-secondary_eclipse_mac_os_x="⇧F6" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⇧F6">Shift+F6</kbd>. IntelliJ IDEA will pop up a list of suggestions, based on the class                    name and other aspects. In this case, the name of the parameter this field is used in is also                    suggested.                </p>                <figure><img alt="Rename the field" title="Rename the field" src="../img/idea/2019.1/ij_rename_field.png" id="1a7860ae" width="675" height="189"></figure>.                <p id="1ec98f70">Select one of these options or type your own. If the field has a getter, IntelliJ IDEA will ask if you                    want to rename this as well.                </p>                <figure><img alt="Do you want to rename the getter?" title="Do you want to rename the getter?" src="../img/idea/2019.1/ij_rename_getter.png" id="4c5090bb" width="410" height="148"></figure>.                <p id="a26ac674">You'll notice that all uses of this field are changed to the new name, and if you've                    chosen to rename the getter, other classes in your project will be updated to use the new name. See                    the next step for more information on method renaming.                </p>            </li><li class="list__item" id="99940d1a">                <p id="0f1199bb">To rename the method, the process is the same: place your cursor on <code class="code">init</code> and press                    <kbd data-primary_default="Shift+F6" data-primary_default_for_gnome="Shift+F6" data-primary_default_for_kde="Shift+F6" data-primary_default_for_xwin="Shift+F6" data-primary_emacs="Shift+F6" data-primary_jbuilder="Shift+F6" data-primary_visual_studio="Shift+F6" data-primary_netbeans="Ctrl+R" data-primary_eclipse="Shift+Alt+R" data-secondary_mac_os_x_10.5_="⇧F6" data-secondary_mac_os_x="⇧F6" data-secondary_eclipse_mac_os_x="⇧F6" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⇧F6">Shift+F6</kbd>. Here you'll have fewer suggestions, so type the new name:                </p>                <figure><img alt="Rename the method" title="Rename the method" src="../img/idea/2019.1/ij_rename_method.png" id="0d704698" width="602" height="175"></figure>                <p id="8986a8b4">As well as renaming the method, this renames all calls of the method and all overridden/implemented                    methods in subclasses. IntelliJ IDEA can also rename non-code uses of the name too, which is useful if                    you have XML configuration or other non-Java files which refer to classes or methods. You can                    configure what gets renamed if you press                    <kbd data-primary_default="Shift+F6" data-primary_default_for_gnome="Shift+F6" data-primary_default_for_kde="Shift+F6" data-primary_default_for_xwin="Shift+F6" data-primary_emacs="Shift+F6" data-primary_jbuilder="Shift+F6" data-primary_visual_studio="Shift+F6" data-primary_netbeans="Ctrl+R" data-primary_eclipse="Shift+Alt+R" data-secondary_mac_os_x_10.5_="⇧F6" data-secondary_mac_os_x="⇧F6" data-secondary_eclipse_mac_os_x="⇧F6" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⇧F6">Shift+F6</kbd>                    a second time to bring up                    the rename dialog                </p>                <figure><img alt="More rename settings" title="More rename settings" src="../img/idea/2019.1/ij_rename_dialog.png" id="d9dab90a" width="642" height="153"></figure>                <p id="de440542">If the rename will apply to more than just code, IntelliJ IDEA will preview the refactoring for you, so                    you can select which changes you want to make. Often in these cases you may choose not to rename                    occurrences in comments, especially if the original method name was a common word like                    <code class="code">name</code>.                </p>                <figure><img alt="Preview the rename" title="Preview the rename" src="../img/idea/2019.1/ij_rename_method_more_details.png" id="e873d1dc" width="883" height="316"></figure>                <p id="0320416f">If you don't want to make some of these changes, press                    <kbd data-primary_default="Backspace" data-primary_default_for_gnome="Backspace" data-primary_default_for_kde="Backspace" data-primary_default_for_xwin="Backspace" data-primary_emacs="Backspace" data-primary_jbuilder="Backspace" data-primary_visual_studio="Backspace" data-primary_netbeans="Backspace" data-primary_eclipse="Backspace" data-secondary_mac_os_x_10.5_="⌫" data-secondary_mac_os_x="⌫" data-secondary_eclipse_mac_os_x="⌫" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌫">Backspace</kbd> on the usages you do not want to change.                </p>            </li><li class="list__item" id="2033433f">                <p id="01becc82">Renaming a class is similar, but can also be performed via the                    <a href="project-tool-window.html"><span>Project Tool Window</span></a>. In this case, because we've discovered we want to                    rename the class where we use it, we're going to use <kbd data-primary_default="Shift+F6" data-primary_default_for_gnome="Shift+F6" data-primary_default_for_kde="Shift+F6" data-primary_default_for_xwin="Shift+F6" data-primary_emacs="Shift+F6" data-primary_jbuilder="Shift+F6" data-primary_visual_studio="Shift+F6" data-primary_netbeans="Ctrl+R" data-primary_eclipse="Shift+Alt+R" data-secondary_mac_os_x_10.5_="⇧F6" data-secondary_mac_os_x="⇧F6" data-secondary_eclipse_mac_os_x="⇧F6" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⇧F6">Shift+F6</kbd>                    on the class name in the code.                </p>                <figure><img alt="Rename the class" title="Rename the class" src="../img/idea/2019.1/ij_rename_class.png" id="87d2ce7f" width="658" height="174"></figure>                <p id="18517b62">Of course, any code that uses this class will also be renamed, but you also have the option of                    renaming variables, inheritors and other parts of the code so they're aligned with the new name.                    Again, these options can be set by pressing <kbd data-primary_default="Shift+F6" data-primary_default_for_gnome="Shift+F6" data-primary_default_for_kde="Shift+F6" data-primary_default_for_xwin="Shift+F6" data-primary_emacs="Shift+F6" data-primary_jbuilder="Shift+F6" data-primary_visual_studio="Shift+F6" data-primary_netbeans="Ctrl+R" data-primary_eclipse="Shift+Alt+R" data-secondary_mac_os_x_10.5_="⇧F6" data-secondary_mac_os_x="⇧F6" data-secondary_eclipse_mac_os_x="⇧F6" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⇧F6">Shift+F6</kbd> a second time.                </p>            </li></ol></section>        <section class="procedure-steps"><h2 id="b39afaf8">Impact of renaming</h2><p id="ce235975">Renaming local variables or private methods can be done fairly safely on-the-fly. For                    example, while you're working on a piece of functionality that touches this area of code, you can                    perform this refactoring knowing the impact is limited in scope.                </p><p id="3a742911">Renaming classes or public methods could potentially impact a lot of                    files. If this is the case, this sort of refactoring should, at the very least, be in its own                    separate commit so the changes are clearly separated from any changed or additional functionality                    that you may have been working on at the time.                </p></section>    </div>    <div class="chapter"><h2 id="56cdf808">Extracting</h2>        <p id="b2a6eb41">IntelliJ IDEA's <span class="emphasis">extract refactorings</span> give developers the power to reshape            their code when it becomes clear the current design, whether on a small or large scale, is no longer fit            for purpose.        </p>        <section class="procedure-steps"><h2 id="6fdcb46e">Extract variable</h2><p id="90e4d885">                    <a href="http://refactoring.com/catalog/extractVariable.html" data-bypass="yes" target="_blank"><span>Extract variable</span></a>                    is a low impact change to make your code                    <a href="https://en.wikipedia.org/wiki/Self-documenting_code" data-bypass="yes" target="_blank"><span>code self-documenting</span></a>. It can                    also be used to reduce code duplication.                </p><p id="b7df584d">                    Imagine you come across the following code                    <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getUsernameFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">)</span> <span class="o">+</span> <span class="mi">15</span><span class="o">,</span>
    <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">)</span> <span class="o">+</span> <span class="mi">15</span><span class="o">));</span>
<span class="o">}</span></code></div>                    We can use extract variable to improve the readability of this code by:                    <ul class="list _bullet"><li class="list__item" id="d6bedc03"><p>Removing the duplication of                            <code class="code">message.indexOf("\"screen_name\":\"") + 15)</code>                        </p></li><li class="list__item" id="8dc165c2"><p>Introducing variables to describe what each of the                            <code class="code">indexOf</code>                            calls represent                        </p></li><li class="list__item" id="7cf590b4"><p>Removing the magic number 15</p></li></ul>                </p><ol class="list _decimal"><li class="list__item" id="1e7d2ee9">                <p id="d19d9b4f">First, let's reduce the duplication and introduce a variable that describes what this operation is                    doing. Place your cursor anywhere in the expression                    <code class="code">message.indexOf("\"screen_name\":\"") + 15)</code>                    and                    press<kbd data-primary_default="Ctrl+Alt+V" data-primary_default_for_gnome="Ctrl+Alt+V" data-primary_default_for_kde="Shift+Alt+V" data-primary_default_for_xwin="Ctrl+Alt+V" data-primary_emacs="Ctrl+Alt+V" data-primary_jbuilder="Ctrl+Alt+V" data-primary_visual_studio="Ctrl+Alt+V" data-primary_netbeans="Shift+Alt+V" data-primary_eclipse="Shift+Alt+L" data-secondary_mac_os_x_10.5_="⌥⌘V" data-secondary_mac_os_x="⌥⌘V" data-secondary_eclipse_mac_os_x="⌥⌘L" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥V">Ctrl+Alt+V</kbd>. IntelliJ IDEA will suggest a context for this refactoring,                    and you want to choose the one that encapsulates this expression:                </p>                <figure><img alt="Select the expression to extract" title="Select the expression to extract" src="../img/idea/2019.1/ij_extract_variable_1.png" id="97fcfa75" width="833" height="154"></figure>                <p id="ee72bb66">Next, if IntelliJ IDEA has detected this expression occurs more than once, you have the option to                    replace all the occurrences or just the one you selected.                </p>                <figure><img alt="Select replace all occurrences" title="Select replace all occurrences" src="../img/idea/2019.1/ij_extract_variable_2.png" id="e2181132" width="820" height="105"></figure>                <p id="e1726727">Once the variable is extracted, IntelliJ IDEA suggests possible names based on things like the                    parameter the expression was used in.                </p>                <figure><img alt="Choose or type name" title="Choose or type name" src="../img/idea/2019.1/ij_extract_variable_3_select_name.png" id="f8ff81c9" width="610" height="146"></figure>                <p id="f07cdd3e">We're going to use our own name,                    <code class="code">indexOfFieldValue</code>, to describe what this really represents. Note that you can                    decide whether or not you wish this variable to be final.                </p>            </li><li class="list__item" id="7b2a130d">                <p id="f002fe59">Next we're going to introduce a variable for the String value. There's two reasons for this:                    firstly, to document what the String value represents, and secondly because it will help us to                    remove the magic number.                </p>                <p id="e1119891">Place your cursor somewhere on                    <code class="code">screen_name</code>                    and press<kbd data-primary_default="Ctrl+Alt+V" data-primary_default_for_gnome="Ctrl+Alt+V" data-primary_default_for_kde="Shift+Alt+V" data-primary_default_for_xwin="Ctrl+Alt+V" data-primary_emacs="Ctrl+Alt+V" data-primary_jbuilder="Ctrl+Alt+V" data-primary_visual_studio="Ctrl+Alt+V" data-primary_netbeans="Shift+Alt+V" data-primary_eclipse="Shift+Alt+L" data-secondary_mac_os_x_10.5_="⌥⌘V" data-secondary_mac_os_x="⌥⌘V" data-secondary_eclipse_mac_os_x="⌥⌘L" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥V">Ctrl+Alt+V</kbd>.                </p>                <figure><img alt="Select String value" title="Select String value" src="../img/idea/2019.1/ij_extract_variable_4.png" id="952cff1b" width="688" height="131"></figure>                <p id="161f9b7c">We're going to give this a more meaningful name,                    <code class="code">fieldName</code>.                </p>                <figure><img alt="Give the variable a name" title="Give the variable a name" src="../img/idea/2019.1/ij_extract_variable_5.png" id="34a51c08" width="608" height="139"></figure>            </li><li class="list__item" id="9a5adba4">                <p id="3d3f478d">Now, we're going to create a variable for the other expression used as a parameter to                    <code class="code">substring()</code>, using the same process, and we'll call this                    <code class="code">indexOfEndOfFieldValue</code>.                </p>                <figure><img alt="Extract variable" title="Extract variable" src="../img/idea/2019.1/ij_extract_variable_6.png" id="db68386f" width="575" height="199"></figure>            </li><li class="list__item" id="bdbb2b4b"><p>Finally, we can remove the magic number, as this is just the length of the field name. The                final code looks like:                <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getUsernameFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">fieldName</span> <span class="o">=</span> <span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span></code></div>                It's longer than the original, but it's much more descriptive, which is particularly important in                code like this where it's not clear what each expression represents. The choice of applying                <code class="code">final</code>                or not is up to you, and depends upon your coding standards.            </p></li></ol></section>        <section class="procedure-steps"><h2 id="288946c6">Extract parameter</h2><p id="12682681">                    <a href="javaintroduce.html">Extracting</a>                    or                    <a href="http://refactoring.com/catalog/addParameter.html" data-bypass="yes" target="_blank"><span>adding a parameter</span></a>                    allows a developer to change a method so that it's easier to use. You may want to change the                    parameters, for example by passing in some values from an Object rather than the object itself, or                    you may want to introduce a value from the method body as a parameter to allow the method to be used                    in more places. We're going to look at an example of the latter.                </p><p id="67af84f1">For this example, we're going to use the same code as the last example, after it has been                    refactored, and extend it slightly to show another method in the same class:</p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getTextFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">fieldName</span> <span class="o">=</span> <span class="s">&quot;\&quot;text\&quot;:\&quot;&quot;</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">static</span> <span class="n">String</span> <span class="nf">getUsernameFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">fieldName</span> <span class="o">=</span> <span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span></code></div><p id="1e729da9">Our goal is to remove the duplication of code that we see in these two methods. To do that, we're going to:</p><ul class="list _bullet"><li class="list__item" id="aef8590d"><p>Change <code class="code">fieldName</code> into a parameter so that we can make the                            <code class="code">getUsernameFromMessage</code> method apply to any field.                        </p></li><li class="list__item" id="1650d703"><p>Rename <code class="code">getUsernameFromMessage</code> to something which represents its more general nature</p></li><li class="list__item" id="25fc74dd"><p>Remove the duplication of code in <code class="code">getTextFromMessage</code>.</p></li></ul><ol class="list _decimal"><li class="list__item" id="268b2e32">                <p id="f3eaf9a1">Place your cursor on                    <code class="code">fieldName</code>                    and press                    <kbd data-primary_default="Ctrl+Alt+P" data-primary_default_for_gnome="Ctrl+Alt+P" data-primary_default_for_kde="Ctrl+Alt+P" data-primary_default_for_xwin="Ctrl+Alt+P" data-primary_emacs="Ctrl+Alt+P" data-primary_jbuilder="N/A" data-primary_visual_studio="Ctrl+Alt+P" data-primary_netbeans="Ctrl+Alt+P" data-primary_eclipse="Ctrl+Alt+P" data-secondary_mac_os_x_10.5_="⌥⌘P" data-secondary_mac_os_x="⌥⌘P" data-secondary_eclipse_mac_os_x="⌥⌘P" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥P">Ctrl+Alt+P</kbd>                </p>                <figure><img alt="Extract parameter" title="Extract parameter" src="../img/idea/2019.1/ij_extract_parameter_1.png" id="f005629d" width="822" height="176"></figure>                <p id="ee12114a">As with the other refactorings, you can type a new name for the parameter if you wish. IntelliJ IDEA                    also previews the updated method signature. Press                    <kbd data-primary_default="Enter" data-primary_default_for_gnome="Enter" data-primary_default_for_kde="Enter" data-primary_default_for_xwin="Enter" data-primary_emacs="Enter" data-primary_jbuilder="Enter" data-primary_visual_studio="Enter" data-primary_netbeans="Enter" data-primary_eclipse="Enter" data-secondary_mac_os_x_10.5_="⏎" data-secondary_mac_os_x="⏎" data-secondary_eclipse_mac_os_x="⏎" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⏎">Enter</kbd>                    to approve the changes.                </p>                <figure><img alt="Any problems with the new method signature" title="Any problems with the new method signature" src="../img/idea/2019.1/ij_extract_parameter_2_conflict.png" id="66e32245" width="567" height="509"></figure>                <p id="cf9cfbc3">This particular issue tells us the method is being used as a method reference, and this change will                    result in the method reference being converted into a lambda expression. This message could be a sign that this is                    not the refactoring you wish to perform.  If this is the case, the next example shows an approach we could                    take using Extract Method.  However, for this example we'll assume we're happy with the                    consequences of introducing a                    new parameter, so we'll just select                    <span class="keyword">Continue</span>.                    </p>                <p id="490e91bd">Next, IntelliJ IDEA will detect any code which can now be replaced with a                    call to the new method signature.                </p>                <figure><img alt="Now this code is a duplicate of the updated method" title="Now this code is a duplicate of the updated method" src="../img/idea/2019.1/ij_extract_parameter_3_duplicate.png" id="28a1971c" width="721" height="303"></figure>                <p id="85119e2d">If you select                    <span class="keyword">Replace</span>                    in this case, all the duplicate code will be replaced, and IntelliJ IDEA will select the appropriate                    value to pass in for the new parameter.                </p>            </li><li class="list__item" id="636d1b6c">                <p id="67643c01">At this point, the original method                    <code class="code">getUsernameFromMessage</code>                    is more general than it was, so we should rename it. We put                    our cursor on the name and use<kbd data-primary_default="Shift+F6" data-primary_default_for_gnome="Shift+F6" data-primary_default_for_kde="Shift+F6" data-primary_default_for_xwin="Shift+F6" data-primary_emacs="Shift+F6" data-primary_jbuilder="Shift+F6" data-primary_visual_studio="Shift+F6" data-primary_netbeans="Ctrl+R" data-primary_eclipse="Shift+Alt+R" data-secondary_mac_os_x_10.5_="⇧F6" data-secondary_mac_os_x="⇧F6" data-secondary_eclipse_mac_os_x="⇧F6" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⇧F6">Shift+F6</kbd>, as shown in the previous section.                </p>                <figure><img alt="Rename the updated method" title="Rename the updated method" src="../img/idea/2019.1/ij_extract_parameter_4_rename_method.png" id="12df465d" width="707" height="188"></figure>                </li><li class="list__item" id="e1cc7c1c">                <p id="ded45417">We can simplify the code further.  <a href="inline.html">Inline</a> is the                    inverse of extract, and in the code we have here it may be appropriate to                    <a href="http://refactoring.com/catalog/inlineTemp.html" data-bypass="yes" target="_blank"><span>inline our temporary variable</span></a>, as                    the variable name gives us little more than having the value passed directly into                    the method.  Or, given that getTextFromMessage really is a simple delegation to                    <code class="code">getValueForField</code>, we can use inline                    to remove this method completely.                </p>                <p id="a4792222">To inline, place your cursor on the                    <code class="code">getTextFromMessage</code>                    variable and press                    <kbd data-primary_default="Ctrl+Alt+N" data-primary_default_for_gnome="Ctrl+Alt+N" data-primary_default_for_kde="Ctrl+Alt+N" data-primary_default_for_xwin="Ctrl+Alt+N" data-primary_emacs="Ctrl+Alt+N" data-primary_jbuilder="Ctrl+Alt+N" data-primary_visual_studio="Ctrl+Alt+N" data-primary_netbeans="Ctrl+Alt+N" data-primary_eclipse="Shift+Alt+I" data-secondary_mac_os_x_10.5_="⌥⌘N" data-secondary_mac_os_x="⌥⌘N" data-secondary_eclipse_mac_os_x="⌥⌘I" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥N">Ctrl+Alt+N</kbd>                </p>                <figure><img alt="Inline unnecessary method" title="Inline unnecessary method" src="../img/idea/2019.1/ij_extract_parameter_5_inline.png" id="c17db73f" width="707" height="257"></figure>                </li><li class="list__item" id="17c01d7b">                <p id="8a2ec7b9">Now our final code looks like:</p>                <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getValueForField</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">String</span> <span class="n">fieldName</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span></code></div>                <p id="d56a498b">Our code that was calling the original getUsernameFromMessage method was:</p>                <code class="code">Parser::getUsernameFromMessage</code>                <p id="8b6c4e89">and is now</p>                <code class="code">(message) -&gt; Parser.getValueForField(message, "\"screen_name\":\"")</code>                <p id="5d0cf61a">Our code that was calling the original getTextFromMessage method was:</p>                <code class="code">String[] wordsInMessage = Parser.getTextFromMessage(message).split("\\s");</code>                <p id="e2ad63bb">and is now</p>                <code class="code">String[] wordsInMessage = Parser.getValueForField(message, "\"text\":\"").split("\\s");</code>            </li></ol><p id="e1a1833d">Note that the way we applied this refactoring forces all callers to pass in the field name and a) spreads the use of a                    String value around your code and b) may introduce duplication of one or more of these String values.  This may be                    appropriate for your code, especially if the String duplication is dealt with, or the method is not frequently used.                    However, if this is not a trade off you wish to make for reducing the duplication of code, see                    the next chapter for an                    alternative approach.                </p><p id="cc9d037d">Extract parameter can be very powerful, so it's worth reading the                    <a href="javaintroduce.html">more detailed help page</a>.                </p></section>        <section class="procedure-steps"><h2 id="79c298b7">Extract method</h2><p id="c52c74a1">One way to aid code readability is to have it in small, understandable sections.                    <a href="http://refactoring.com/catalog/extractMethod.html" data-bypass="yes" target="_blank"><span>Extract method</span></a>                    allows a developer to do just that, moving segments of code into their own, descriptively-named,                method when appropriate.</p><p id="ca0f779e">                    Some developers may find themselves writing long methods that perform the operation they                    have in mind, and when they've completed (and tested) the functionality, look at the code to see where it can be                    refactored and simplified and break up these longer methods. Or, as a developer comes across code when they're                    implementing a new feature, they realise extracting some code into its own method lets them reuse existing                    functionality.                </p><aside class="tip sideblock" data-title="" rel="ca0f779e" id="6204c78a"><p>When IntelliJ IDEA detects duplicate code this is a very good candidate for creating a new                    method that can be called by all of the places that has the duplicate code.                </p></aside><p id="e9bdf5b4">We're going to look at the same example as in the previous section, but take a slightly different approach to before.</p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getTextFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">fieldName</span> <span class="o">=</span> <span class="s">&quot;\&quot;text\&quot;:\&quot;&quot;</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">static</span> <span class="n">String</span> <span class="nf">getUsernameFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">fieldName</span> <span class="o">=</span> <span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span></code></div><p id="c60acf51">As we saw earlier, the previous refactoring had some trade-offs: a method reference needed to be converted to a lambda                    expression, and all calling code needed to know the field name that was required. We may choose to remove the code                    duplication between the two methods in a different way:</p><ul class="list _bullet"><li class="list__item" id="0b66e89d"><p>Extracting the common code into its own method.</p></li><li class="list__item" id="278a9db9"><p>Inlining variables to simplify the remaining code.</p></li></ul><ol class="list _decimal"><li class="list__item" id="a18b8954">                <p id="073e025b">First, highlight the code that's common between the two methods:</p>                <figure><img alt="Highlight an instance of the duplicate code" title="Highlight an instance of the duplicate code" src="../img/idea/2019.1/ij_extract_method_1_duplicate_code.png" id="cd1f773c" width="731" height="232"></figure>                <p id="ad1e85eb">Pressing <kbd data-primary_default="Ctrl+Alt+M" data-primary_default_for_gnome="Ctrl+Alt+M" data-primary_default_for_kde="Ctrl+Alt+M" data-primary_default_for_xwin="Ctrl+Alt+M" data-primary_emacs="Ctrl+Alt+M" data-primary_jbuilder="Ctrl+Shift+E" data-primary_visual_studio="Ctrl+Alt+M" data-primary_netbeans="Shift+Alt+M" data-primary_eclipse="Shift+Alt+M" data-secondary_mac_os_x_10.5_="⌥⌘M" data-secondary_mac_os_x="⌥⌘M" data-secondary_eclipse_mac_os_x="⌥⌘M" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥M">Ctrl+Alt+M</kbd> will bring up the                    <a href="extract-method-dialog.html">Extract Method Dialog</a>.</p>                <figure><img alt="Extract method dialog" title="Extract method dialog" src="../img/idea/2019.1/ij_extract_method_2_dialog.png" id="930fd5b9" width="524" height="444"></figure>                <p id="c68ef5de">Type the name of the new method,                    <code class="code">getValueForField</code>, and check the parameter names and order.                    In this case, we're going to swap the order of the parameters because we prefer the                    <code class="code">fieldName</code> parameter to be closer to the name of the method. This will depend upon your code style and                    team preferences, you might like to read the name and parameters aloud to see if it makes sense as a statement in                    natural language.                </p>                <figure><img alt="Final settings in extract method dialog" title="Final settings in extract method dialog" src="../img/idea/2019.1/ij_extract_method_3_dialog_complete.png" id="c11a382f" width="524" height="444"></figure>                <p id="a99e32dd">When you press                    <span class="keyword">OK</span>, IntelliJ IDEA will detect code that can be replaced with a call to this new method, and will offer to                    refactor that too.  We're going to select                    <span class="keyword">Yes</span>.                </p>                <figure><img alt="Refactor duplicate code" title="Refactor duplicate code" src="../img/idea/2019.1/ij_extract_method_4_detect_duplicates.png" id="9b222b21" width="716" height="370"></figure>            </li><li class="list__item" id="3df9f8c7">                <p id="cc14532d">At this point, our                    <code class="code">getTextFromMessage</code>                    and                    <code class="code">getUsernameFromMessage</code>                    methods are two lines of simple code, and here it makes                    sense to <a href="inline.html">inline</a> the fieldName variable, as the method name is descriptive enough to                    remove the <a href="http://refactoring.com/catalog/inlineTemp.html" data-bypass="yes" target="_blank"><span>temporary variable</span></a>. Press <kbd data-primary_default="Ctrl+Alt+N" data-primary_default_for_gnome="Ctrl+Alt+N" data-primary_default_for_kde="Ctrl+Alt+N" data-primary_default_for_xwin="Ctrl+Alt+N" data-primary_emacs="Ctrl+Alt+N" data-primary_jbuilder="Ctrl+Alt+N" data-primary_visual_studio="Ctrl+Alt+N" data-primary_netbeans="Ctrl+Alt+N" data-primary_eclipse="Shift+Alt+I" data-secondary_mac_os_x_10.5_="⌥⌘N" data-secondary_mac_os_x="⌥⌘N" data-secondary_eclipse_mac_os_x="⌥⌘I" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥N">Ctrl+Alt+N</kbd> on                    <code class="code">fieldName</code>                    and select                    <span class="keyword">Refactor</span>.                </p>                <figure><img alt="Inline unnecessary variable" title="Inline unnecessary variable" src="../img/idea/2019.1/ij_extract_method_5_inline.png" id="a1977b59" width="624" height="265"></figure>            </li><li class="list__item" id="014fb5d8">                <p id="562b51ca">As a last touch, you may want all similar methods grouped together. Depending upon your settings,                    IntelliJ IDEA may have placed the new method directly under the method you were in when you chose to                    extract the method, as in our case here. To put the helper methods next to each other, put your                    cursor on the                    <code class="code">getValueForField</code>                    method name and press                    <kbd data-primary_default="Ctrl+Shift+Down" data-primary_default_for_gnome="Ctrl+Shift+Down" data-primary_default_for_kde="Ctrl+Shift+Down" data-primary_default_for_xwin="Ctrl+Shift+Down" data-primary_emacs="Ctrl+Shift+Down" data-primary_jbuilder="Ctrl+Shift+Down" data-primary_visual_studio="Ctrl+Shift+Down" data-primary_netbeans="Shift+Alt+Page Down" data-primary_eclipse="Alt+Down" data-secondary_mac_os_x_10.5_="⇧⌘↓" data-secondary_mac_os_x="⇧⌘↓" data-secondary_eclipse_mac_os_x="⌥↓" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⇧↓">Ctrl+Shift+Down</kbd>. This will place your new method,                    <code class="code">getValueForField</code>, under the                    existing getUsernameFromMessage method.                </p>                <p id="19f29ff3">Our final code looks like:</p>                <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getTextFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">getValueForField</span><span class="o">(</span><span class="s">&quot;\&quot;text\&quot;:\&quot;&quot;</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">static</span> <span class="n">String</span> <span class="nf">getUsernameFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">getValueForField</span><span class="o">(</span><span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">static</span> <span class="n">String</span> <span class="nf">getValueForField</span><span class="o">(</span><span class="n">String</span> <span class="n">fieldName</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span></code></div>                <p id="ead1f957">Now we have two very specific helper methods which get the message body and the username, and a more general method                    that can be used to get the value of any field from the message.  Additional helper methods can be                    added when there are other fields which are frequently needed.</p>            </li></ol><p id="113c133a">Note that the Extract Parameter and Extract Method examples start with the same code, but end with                    code that looks very different. This is not just because we used a different refactoring, but                    because we made different decisions - in the first example, we chose to remove duplication                    completely, and move some of the decision-making into the caller of the method. In the second                    example, we chose to provide an API which hid the details of the field name behind small                    helper methods but still provide the more general method as well. We also could have mixed and                    matched the approaches, the refactoring we chose to begin with may have lead us in a particular                    direction but we can dictate our final destination. We should remember the goal of our                    refactoring (in this case, reduce duplication) and understand the trade offs we're making when                    we choose one direction over another, for example deciding whether we want calling code to know                    which field name they're asking for.                </p></section>        <section class="procedure-steps"><h2 id="55afff8a">Impact of extracting</h2><p id="7cb20b7c">                    The good news is that you can undo an extract fairly easily. Not only by selecting                    <kbd data-primary_default="Ctrl+Z" data-primary_default_for_gnome="Ctrl+Z" data-primary_default_for_kde="Ctrl+Z" data-primary_default_for_xwin="Ctrl+Z" data-primary_emacs="Ctrl+Shift+Minus" data-primary_jbuilder="Ctrl+Z" data-primary_visual_studio="Ctrl+Z" data-primary_netbeans="Ctrl+Z" data-primary_eclipse="Ctrl+Z" data-secondary_mac_os_x_10.5_="⌘Z" data-secondary_mac_os_x="⌘Z" data-secondary_eclipse_mac_os_x="⌘Z" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⇧-">Ctrl+Z</kbd>, of course, but by                    <a href="inline.html">inlining</a>                    the created method so that the code is back where it used to be.                </p><p id="47831f18">The extract refactorings                    we've mentioned here are used regularly by experienced developers to                    shape the code as it evolves, and it would not be uncommon to use them to some greater or lesser extent every time                    the code is touched. Some of the ones that were not covered, like                    <a href="extract-interface.html">extract interface</a> and                    <a href="extract-superclass.html">extract superclass</a>, may have a wider impact on the overall design, and more care should be taken with                    them.                </p></section>    </div>    <div class="chapter"><h2 id="6082b21f">Deleting</h2>        <p id="2879bf0a">Sometimes when you've refactored code in several steps, you can end up with code that is no longer used,            or ideally should not be used. As the goal of refactoring is simplification, you should always aim to            remove unused code where you can - regardless of any impact (or not) unused code has on the performance            of your application, unused code definitely takes a toll on developers working with and trying to            understand the application.        </p>        <section class="procedure-steps"><h2 id="b820827a">Safe delete</h2><p id="6653d608">IntelliJ IDEA lets you                    <a href="safe-delete.html">safe delete</a>                    unused code fragments or whole files, informing you if it's                    safe to delete the code, and giving you the option to preview the changes before you make them. The                    fastest way to identify and deal with unused code is to make sure the relevant inspections are                    enabled, which they usually are by default:                </p><figure><img alt="Inspections for finding unused code" title="Inspections for finding unused code" src="../img/idea/2019.1/ij_safe_delete_1_inspections.png" id="5ee0ff33" width="1003" height="671"></figure><p id="02fac863">Let's continue the example of our previous refactoring. Assuming we ended up with this code:</p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getUsernameFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">getValueForField</span><span class="o">(</span><span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">static</span> <span class="n">String</span> <span class="nf">getValueForField</span><span class="o">(</span><span class="n">String</span> <span class="n">fieldName</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span></code></div><p id="77b485d2">It's possible that some time later, when we come back to this code, the                    <code class="code">getUsernameFromMessage</code> method is no longer used - maybe it's no longer required, or                    maybe people are comfortable calling                    <code class="code">getValueForField</code>                    with the relevant parameter.  So assuming we're comfortable with these reasons, we can go ahead                    and remove this method.                </p><ol class="list _decimal"><li class="list__item" id="dc1593b4"><p>If the unused declaration inspection is turned on, the method name will be in grey to                represent that it is unused.                <figure><img alt="Unused method is safe to delete" title="Unused method is safe to delete" src="../img/idea/2019.1/ij_safe_delete_2_unused.png" id="d386473a" width="710" height="159"></figure>            </p></li><li class="list__item" id="0b5025ef"><p>                Place the cursor in                <code class="code">getUsernameFromMessage</code>                and press                <kbd data-primary_default="Alt+Enter" data-primary_default_for_gnome="Alt+Enter" data-primary_default_for_kde="Alt+Enter" data-primary_default_for_xwin="Alt+Enter" data-primary_emacs="Alt+Enter" data-primary_jbuilder="Alt+Enter" data-primary_visual_studio="Alt+Enter" data-primary_netbeans="Alt+Enter" data-primary_eclipse="Alt+Enter" data-secondary_mac_os_x_10.5_="⌥⏎" data-secondary_mac_os_x="⌥⏎" data-secondary_eclipse_mac_os_x="⌘1" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌥⏎">Alt+Enter</kbd>.  This will give you the option to delete this method.                <figure><img alt="Delete unused method" title="Delete unused method" src="../img/idea/2019.1/ij_safe_delete_3_delete.png" id="201ef698" width="747" height="183"></figure>            </p></li><li class="list__item" id="9fed0a25">                <p id="861d444f">Selecting safe delete will pop up the safe delete dialog, allowing you to search for usages of                    this method.                </p>                <figure><img alt="Safe delete dialog" title="Safe delete dialog" src="../img/idea/2019.1/ij_safe_delete_4_dialog.png" id="a120f214" width="506" height="125"></figure>                <p id="673febc0">Press                    <span class="keyword">OK</span>                    to go ahead and do the search. In our case, it was completely safe to delete,                    so the method is removed.                </p>            </li><li class="list__item" id="874ca64d">                <p id="f6a40bae">                    <p id="448472f5">It's possible that our "unused" method is not flagged as unused, as it may                        be covered by a test. But if we still know that it's unused, or have checked it via                        <kbd data-primary_default="Alt+F7" data-primary_default_for_gnome="Shift+Alt+7" data-primary_default_for_kde="Shift+Alt+7" data-primary_default_for_xwin="Alt+F7" data-primary_emacs="Alt+F7" data-primary_jbuilder="Alt+F7" data-primary_visual_studio="Shift+Alt+F7" data-primary_netbeans="Alt+F7" data-primary_eclipse="Ctrl+G" data-secondary_mac_os_x_10.5_="⌥F7" data-secondary_mac_os_x="⌥F7" data-secondary_eclipse_mac_os_x="⇧⌘G" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌥F7">Alt+F7</kbd>, we can still safely delete it.                    </p>                    <p id="470eb828">Place the cursor on the method name and                        press                        <kbd data-primary_default="Alt+Delete" data-primary_default_for_gnome="Alt+Delete" data-primary_default_for_kde="Alt+Delete" data-primary_default_for_xwin="Alt+Delete" data-primary_emacs="N/A" data-primary_jbuilder="Alt+Delete" data-primary_visual_studio="Alt+Delete" data-primary_netbeans="Alt+Delete" data-primary_eclipse="Alt+Delete" data-secondary_mac_os_x_10.5_="⌘⌦" data-secondary_mac_os_x="⌘⌦" data-secondary_eclipse_mac_os_x="N/A" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="N/A">Alt+Delete</kbd>. This will pop up the safe delete dialog as before, and this time                        when                        you press                        <span class="keyword">OK</span>                        IntelliJ IDEA will warn you that this method has usages                    </p>                </p>                <figure><img alt="Usages found" title="Usages found" src="../img/idea/2019.1/ij_safe_delete_5_usages_dialog.png" id="c7532c82" width="524" height="489"></figure>                <p id="61faff72">Press                    <span class="keyword">View Usages</span>                    to check what these are</p>                <figure><img alt="See all code usages" title="See all code usages" src="../img/idea/2019.1/ij_safe_delete_6_usages.png" id="27cf76d7" width="735" height="262"></figure>            </li><li class="list__item" id="f2f97e0d">                <p id="a171eb28">Use the results panel to navigate to the usages by double-clicking on each usage. In our case,                    we see there's a test that calls the method we want to delete.                </p>                <figure><img alt="Method is used in a test" title="Method is used in a test" src="../img/idea/2019.1/ij_safe_delete_7_test.png" id="634b7c2f" width="623" height="109"></figure>                <p id="396db27c">Since this test is there to ensure                    the correctness of a method we no longer want, we can delete this test too. In the editor                    window, press                    <kbd data-primary_default="Alt+Delete" data-primary_default_for_gnome="Alt+Delete" data-primary_default_for_kde="Alt+Delete" data-primary_default_for_xwin="Alt+Delete" data-primary_emacs="N/A" data-primary_jbuilder="Alt+Delete" data-primary_visual_studio="Alt+Delete" data-primary_netbeans="Alt+Delete" data-primary_eclipse="Alt+Delete" data-secondary_mac_os_x_10.5_="⌘⌦" data-secondary_mac_os_x="⌘⌦" data-secondary_eclipse_mac_os_x="N/A" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="N/A">Alt+Delete</kbd>                    on the test method name and say                    <span class="keyword">OK</span>                    in the Safe Delete dialog. The test method will be removed.                </p>            </li><li class="list__item" id="f71f8347"><p id="d66567c5">Now we'll see in our Safe Delete Conflicts window that this code is no longer valid.</p>                <figure><img alt="No more usages of the method" title="No more usages of the method" src="../img/idea/2019.1/ij_safe_delete_8_invalid.png" id="894d7c60" width="648" height="261"></figure>                <p id="69d08cfc">                Since                this was our only usage of the method we originally wanted to delete, we can select the                    <span class="keyword">Rerun Safe Delete</span>                    button. This time when you press                    <span class="keyword">OK</span> on the Safe Delete dialog, the                    <code class="code">getUsernameFromMessage</code>                    method will have been                    removed.                </p>            </li></ol></section>        <section class="procedure-steps"><h2 id="47d44d34">Impact of deleting</h2><aside class="tip sideblock" data-title="" rel="47d44d34" id="d3a89b7b"><p>If you find a public method that appears to be unused but does form part of a public API,                    it should be covered by tests. The "unused" warning may not mean you should delete the method,                    it's telling you this method should be tested.                </p></aside><p id="64956a6f">IntelliJ's inspections can show you code that is unused, but if your code is going to be packaged as                    a library for others to use, or exposes a public API in some other way, it's possible that some                    public symbols may be marked as unused when in actual fact they are used by code that you do not                    control. If public symbols appear to be unused, you should check if these are used by other systems                    in some way.                </p><p id="75dba3b7">Unused parameters, local variables, and private fields are good candidates for deletion as it                    should be easy to see that deleting them does not impact any functionality.                </p><p id="bb609cc5">Using safe delete to remove symbols, whether they were unused or not, lets you check before you                    perform the refactoring that the areas impacted are the ones you expect, and gives you control                    over the changes you wish to apply. However, still be aware of the caveat that public symbols                    may be used by systems out of your control, so always exercise caution when deleting these.                </p></section>    </div>    <div class="chapter"><h2 id="a3cada07">Conclusion</h2>        <p id="81ea74fb">IntelliJ IDEA has a number of automatic refactorings available, all of which aim to let you, the            developer, reshape your code in as low-impact way as possible. The aim is to make small, incremental            changes, all the time keeping the code in a state that compiles. The power of the refactoring capabilities            lies in chaining smaller changes together to move the code in the direction of some goal that you have in            mind: reducing duplication, removing unnecessary code, striving for simplicity, improving readability, or            some larger re-shaping of the design.        </p>        <p id="4a4e1bd4">Small, simple changes are possible, even desirable, while working on new features or bug fixing, but            remember that larger changes may need to applied separately to differentiate between refactoring that            should not impact existing functionality and functional changes.        </p>    </div><div class="last-modified" data-skip-index="skip">Last modified: 28 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="tutorial-file-watchers-in-product.html">File Watchers in IntelliJ IDEA</a><a class="navigation-links__next" href="replace-conditional-logic-with-strategy-pattern.html">Replace Conditional Logic with Strategy Pattern</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>


























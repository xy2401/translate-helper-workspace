<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="running-behave-django.html"><meta charset="UTF-8"><title>Enabling support for behave-django - Help | PyCharm</title><link rel="stylesheet" href="../app/v2/app.css"></head><body data-id="running_behave_django"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search PyCharm Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="running-behave-django.html#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="running_behave_django" id="running_behave_django.xml">Enabling support for behave-django</h1>           <aside class="warning " data-title="" rel="running_behave_django.xml" id="5c0fa9a6"><p>        This feature is only supported in the <b id="970c63da" origin="intellij-platform">Professional</b> edition.         This edition is commercial, and it provides an outstanding set of features:          see the <a href="https://www.jetbrains.com/pycharm/features/editions_comparison_matrix.html" data-bypass="yes" target="_blank"><span>comparison matrix</span></a> for more details.    </p></aside>                    <p id="87a475f4">With PyCharm you can benefit from the behavior-driven development (BDD) with Django by enabling <a href="https://pypi.python.org/pypi/behave-django" data-bypass="yes" target="_blank"><span>behave-django</span></a> integration        in your Django applications.</p>    <section class="procedure-steps"><h2 id="enable_behave_django">To enable behave-django integration:</h2><ol class="list _decimal"><li class="list__item" id="df425aa7">In your <a href="creating-django-project.html">Django project</a>, install the following <a href="installing-uninstalling-and-upgrading-packages.html">            Python packages</a>:            <ul class="list _ul"><li class="list__item" id="cd4b605d"><code class="code">behave</code></li><li class="list__item" id="ef76d149"><code class="code">behave-django</code></li></ul>        </li><li class="list__item" id="b15ff290"><p>            Modify the structure of your project to meet the behave structural requirements. In your Django application directory, create            the <code class="code">features</code> directory for the test scenario files and the <code class="code">steps</code> subdirectory for the Python implementations of the scenarios.            Create a new Gherkin feature file, <code class="code">features/Auth.feature</code>, and a new Python step file, <code class="code">features/steps/Auth.py</code>.            <figure><img alt="a Django project structure required for behave-django ntegration" title="a Django project structure required for behave-django ntegration" src="../img/idea/2019.1/py_behave_django_project_structure.png" id="43515895" width="337" height="724"></figure>        </p></li><li class="list__item" id="ce4c205e">            <p id="92d44404">Now, add your test scenarios to the <code class="code">Auth.feature</code> by using                <a href="https://github.com/cucumber/cucumber/wiki/Gherkin" data-bypass="yes" target="_blank"><span>Gherkin</span></a> feature testing language:</p>               <div class="code-block" data-lang="Actionscript"><code class="code-block__wrapper"><span class="nx">Feature</span><span class="o">:</span> <span class="nx">Auth</span>

<span class="nx">Scenario</span><span class="o">:</span> <span class="nx">Unauthenticated</span> <span class="nx">user</span> <span class="nx">can</span><span class="err">&#39;</span><span class="nx">t</span> <span class="nx">access</span> <span class="nx">the</span> <span class="nx">page</span>
<span class="nx">Given</span> <span class="nx">I</span> <span class="nx">am</span> <span class="nx">not</span> <span class="nx">authenticated</span>
<span class="nx">When</span> <span class="nx">I</span> <span class="nx">access</span> <span class="nx">the</span> <span class="nx">page</span>
<span class="nx">Then</span> <span class="nx">Status</span> <span class="nx">code</span> <span class="nx">is</span> <span class="mi">302</span>


<span class="nx">Scenario</span><span class="o">:</span> <span class="nx">Authenticated</span> <span class="nx">user</span> <span class="nx">can</span> <span class="nx">access</span> <span class="nx">the</span> <span class="nx">page</span>
<span class="nx">Given</span> <span class="nx">I</span> <span class="nx">am</span> <span class="nx">authenticated</span>
<span class="nx">When</span> <span class="nx">I</span> <span class="nx">access</span> <span class="nx">the</span> <span class="nx">page</span>
<span class="nx">Then</span> <span class="nx">Status</span> <span class="nx">code</span> <span class="nx">is</span> <span class="mi">200</span></code></div>        </li><li class="list__item" id="5a28e1d4">        <p id="904ba2fb">Implement the steps used in the <code class="code">Auth.feature</code> scenarios in the <code class="code">features/steps/Auth.py</code> Python file:</p>        <div class="code-block" data-lang="Python"><code class="code-block__wrapper"><span class="kn">from</span> <span class="nn">behave</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>

<span class="n">use_step_matcher</span><span class="p">(</span><span class="s">&quot;re&quot;</span><span class="p">)</span>


<span class="nd">@given</span><span class="p">(</span><span class="s">&quot;I am not authenticated&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">step_impl</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
<span class="k">pass</span>


<span class="nd">@when</span><span class="p">(</span><span class="s">&quot;I access the page&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">step_impl</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
<span class="n">context</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>


<span class="nd">@then</span><span class="p">(</span><span class="s">&quot;Status code is (?P&lt;status&gt;\d+)&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">step_impl</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
<span class="n">code</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="k">assert</span> <span class="n">code</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">status</span><span class="p">),</span> <span class="s">&quot;{0} != {1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>


<span class="nd">@given</span><span class="p">(</span><span class="s">&quot;I am authenticated&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">step_impl</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create_superuser</span><span class="p">(</span><span class="s">&quot;jane&quot;</span><span class="p">,</span> <span class="s">&quot;jane@example.org&quot;</span><span class="p">,</span> <span class="s">&quot;123&quot;</span><span class="p">)</span>
<span class="n">context</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">force_login</span><span class="p">(</span><span class="n">user</span><span class="p">)</span></code></div>    </li><li class="list__item" id="a327bc3d">        <p id="7719b1d8">Modify the <code class="code">views.py</code> file and the <code class="code">urls.py</code> files to add code required for our testing sample:</p>        <p id="eb9b769e"><code class="code">views.py</code></p>        <div class="code-block" data-lang="Python"><code class="code-block__wrapper"><span class="kn">from</span> <span class="nn">django.contrib.auth.decorators</span> <span class="kn">import</span> <span class="n">login_required</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>


<span class="c"># Create your views here.</span>
<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">show_user</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&quot;OK&quot;</span><span class="p">)</span></code></div>        <p id="eaed7492"><code class="code">urls.py</code></p>        <div class="code-block" data-lang="Python"><code class="code-block__wrapper"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span>

<span class="kn">from</span> <span class="nn">Django_Behave</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">show_user</span><span class="p">),</span>
<span class="p">]</span></code></div>    </li><li class="list__item" id="e4c0cfa4"><p>        Now, implement the key tweak: add <code class="code">'behave_django'</code> to the <code class="code">INSTALLED_APPS</code> section of the <code class="code">settings.py</code>.        <figure><img alt="enabling behave-django integration in the settings.py file" title="enabling behave-django integration in the settings.py file" src="../img/idea/2019.1/py_behave-django_installed-apps.png" id="0b44be09" width="336" height="426"></figure>        With this done, your application is ready for a test session. All you need is to run test configurations for your scenarios.    </p></li><li class="list__item" id="6aebe526"><p>        Open the <code class="code">Auth.feature</code> file in the <span class="control">Editor</span> window. Position the cursor on a line with        any of the <code class="code">Scenario</code> statements, then right-click it, and choose <span class="control">Run &lt;scenario name&gt;</span>.        Preview the test run results.        <figure><img alt="Test running for a behave configuration" title="Test running for a behave configuration" src="../img/idea/2019.1/py_behave_test_run.png" id="f32cc3a1" width="1267" height="542"></figure>        From the test report, you can learn that the test was run by <code class="code">manage.py</code>. You can also see how many steps of the        scenario have been passed, failed, or skipped.    </p></li></ol></section>  <div class="last-modified" data-skip-index="skip">Last modified: 28 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="running-manage-py.html">Running Tasks of manage.py Utility</a><a class="navigation-links__next" href="referring-to-static-contents.html">Referring to Static Contents</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>See Also</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>Reference:</h3><ul class="list"><li class="list__item"><a href="manage-py.html"><span>manage.py</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>External Links:</h3><ul class="list"><li class="list__item"><a href="http://docs.djangoproject.com/en/dev/ref/django-admin/" data-bypass="yes" target="_blank"><span>Django</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>


























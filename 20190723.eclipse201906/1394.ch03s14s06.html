<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>3.14.6. Using functions as data for Test Cases</title>
<link rel="stylesheet" type="text/css" href="../../css/style.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="../index.html" title="Jubula User Manual">
<link rel="up" href="ch03s14.html" title="3.14. Working with test data">
<link rel="prev" href="ch03s14s05.html" title="3.14.5. Using variables as data for Test Cases">
<link rel="next" href="ch03s14s07.html" title="3.14.7. Concatenating (combining) parameters">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">3.14.6. Using functions as data for Test Cases</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ch03s14s05.html">Prev</a> </td>
<th width="60%" align="center">3.14. Working with test data</th>
<td width="20%" align="right"> <a accesskey="n" href="ch03s14s07.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
<span class="breadcrumb-link"><a href="../index.html">Jubula User Manual</a></span> &gt; <span class="breadcrumb-link"><a href="ch03.html">Tasks</a></span> &gt; <span class="breadcrumb-link"><a href="ch03s14.html">Working with test data</a></span> &gt; <span class="breadcrumb-node">Using functions as data for Test Cases</span>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="using-functions-as-data-for-test-cases"></a>3.14.6. Using functions as data for Test Cases</h3></div></div></div>
<a name="using-functions-as-data-for-test-cases.guidancerDataSetViewContextId"></a><a name="using-functions-as-data-for-test-cases.guidancerPropertiesViewContextId"></a><a name="using-functions-as-data-for-test-cases.guidancerCentralTestDataEditorContextId"></a><p>
    You can calculate specific values without entering the results
    yourself using <span class="emphasis"><em>functions</em></span>. There are
    specific functions that work out-of-the-box, and additional
    functions can be added as well.
  </p>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="syntax-for-functions"></a>3.14.6.1. Syntax for functions</h4></div></div></div>
<p>
      The sign used to introduce a function is the question mark: <span class="input">?</span>
      (without quotes).
    </p>
<p>
      After the sign, you must enter the name of the function
      followed by the arguments the function requires, e.g.:
    </p>
<p>
      <code class="literal">?add(arg1,arg2)</code>
    </p>
<p>
      The arguments are separated by commas and are placed within
      round brackets.
    </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="pre-defined-functions"></a>3.14.6.2. Pre-defined functions</h4></div></div></div>
<p>
      The following functions are available directly in the ITE:
    </p>
<p>
      <span class="strong"><strong>Mathematical functions</strong></span><br xmlns:d="http://docbook.org/ns/docbook">
      The following functions give their results as decimal numbers, e.g. 1.0, 1.2 etc.
    </p>
<div class="variablelist"><dl class="variablelist">
<dt><span class="term">
          add
        </span></dt>
<dd><p>
            Adds 0 or more numbers to 0, e.g.:
            <span class="input">?add(1,2)</span>.
          </p></dd>
<dt><span class="term">
          sub
        </span></dt>
<dd><p>
            Subtracts the second number from the first: <span class="input">?sub(3,2)</span>.<br xmlns:d="http://docbook.org/ns/docbook">
            This function only accepts two numbers.
          </p></dd>
<dt><span class="term">
          mult
        </span></dt>
<dd><p>
            Multiplies 0 or more numbers by 1 e.g.:
            <span class="input">?mult(2,4)</span>.
          </p></dd>
<dt><span class="term">
          div
        </span></dt>
<dd><p>
            Divides the first number by the second: <span class="input">?div(2,1)</span>.<br xmlns:d="http://docbook.org/ns/docbook">
            This function only accepts two numbers.
          </p></dd>
<dt><span class="term">
          trunc
        </span></dt>
<dd><p>
            Takes two arguments, the decimal to be truncated and the
            precision (as an integer) to truncate the decimal to.
            Use <span class="input">0</span> to cut off the number to no
            decimal places (i.e. to receive a plain integer), and
            use <span class="input">1</span> to cut off the decimal to one
            decimal place etc: <span class="input">?trunc(2.396,0)</span> gives
            <span class="input">2</span> and <span class="input">?trunc(2.789,1)</span>
            gives <span class="input">2.7</span>.
          </p></dd>
<dt><span class="term">
          round
        </span></dt>
<dd>
<p>
            Takes two arguments, the decimal to be rounded and the
            precision (as an integer) to round to. This function
            uses <span class="emphasis"><em>half-up</em></span> rounding to round the
            number so that if the final decimal place after rounding
            is 5 or higher, the final number will be incremented by
            1 e.g.: <span class="input">?round(2.56,1)</span> gives
            <span class="input">2.6</span>. If the final number after rounding
            is 4 or less, there is no incrementation, eg.
            <span class="input">?round(2.43,1)</span> gives
            <span class="input">2.4</span>.
          </p>
<p xmlns:d="http://docbook.org/ns/docbook"><table>
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td><img align="bottom" width="102" height="89" src="../images/img1.jpg"></td>
<td class="topbotline"><span class="strong"><strong>
            It is currently only possible to use numbers formatted with the decimal mark
            <span class="emphasis"><em>period</em></span> or
            <span class="emphasis"><em>fullstop</em></span> (<span class="input">.</span>).
            Thousands separators may not be used. For example,
            <span class="input">1.5</span> is accepted, but <span class="input">1,5</span>
            is not. <span class="input">1000</span> can be entered but
            <span class="input">1,000</span> cannot. Entering
            <span class="input">1.000</span> is equivalent to entering
            <span class="input">1</span>. You can use the 
            <span class="input">formatNumber</span> function to convert
            a number to an integer or to change the amount of decimal points a
            number has.
          </strong></span></td>
</tr></tbody>
</table></p>
</dd>
<dt><span class="term">
          formatNumber
        </span></dt>
<dd><p>
            Takes two arguments, the decimal to be formatted and the amount of
            decimal places the formatted number should contain. The numbers or
            decimal places will not be rounded when using this function.
            <span class="input">?formatNumber(15.43,0)</span> gives
            <span class="input">15</span>. <span class="input">?formatNumber(15.4,3)</span>
            gives <span class="input">15.4</span>, no zeros will be
            appended. <span class="input">?formatNumber(15.4356,2)</span>
            gives <span class="input">15.43</span>.
          </p></dd>
</dl></div>
<p xmlns:d="http://docbook.org/ns/docbook"><table>
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td><img align="bottom" width="100" height="91" src="../images/img2.jpg"></td>
<td class="topbotline"><span class="strong"><strong>
      Use single quotes around negative numbers, e.g.
      &#8217;-0.5&#8217;.
    </strong></span></td>
</tr></tbody>
</table></p>
<p>
      <span class="strong"><strong>Date functions</strong></span>
    </p>
<div class="variablelist"><dl class="variablelist">
<dt><span class="term">
          now
        </span></dt>
<dd><p>
            Saves the current date in an internal format that can be
            used as a basis for the formatDate and modifyDate
            functions. This function takes no arguments:
            <span class="input">?now()</span>.
          </p></dd>
<dt><span class="term">
          formatDate
        </span></dt>
<dd><p>
            Puts a date into a specific format. The date to be
            formatted is entered as the first argument, followed by
            the format string e.g.
            <span class="input">?formatDate(?now(), dd-MM-yyyy)</span>. The
            formats that can used here are the formats from the
            SimpleDateFormat class in Java.
          </p></dd>
<dt><span class="term">
          parseDate
        </span></dt>
<dd><p>
            Reads a value that is a date and parses it into an
            internal format based on the format string given (i.e.
            how the date should be understood). The first argument
            is the date, and the second is the format string
            <span class="input">?parseDate(2011.06.25,yyyy.MM.dd)</span>. This
            function should be used when reading and working with
            dates shown in the AUT. 
          </p></dd>
<dt><span class="term">
          modifyDate
        </span></dt>
<dd><p>
            This function can add days (d), months (M), years (y), hours (h),
            minutes (i), seconds (s) and milliseconds (j) to a given date. The 
            date must first be parsed (i.e. using parseDate) so that the correct
            internal format is used. This function takes two arguments: the
            first is the date to modify, and the second is the modification
            to perform, e.g. <span class="input">?modifyDate(?now(),1d)</span>.
            Additions are entered as positive integers (but without
            a plus sign, e.g. 1d, 1M, 1y) and subtractions are
            entered as negative integers, e.g. -1d, -1M, -1y, -1i.
          </p></dd>
</dl></div>
<p xmlns:d="http://docbook.org/ns/docbook"><table>
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td><img align="bottom" width="100" height="91" src="../images/img2.jpg"></td>
<td class="topbotline"><span class="strong"><strong>
      If you want to use the result of a date function as a
      part of your test data (i.e. to enter or check), then you will
      most likely need to use formatDate on any date modifications
      you have performed.
    </strong></span></td>
</tr></tbody>
</table></p>
<p>
      <span class="strong"><strong>Test functions</strong></span>
    </p>
<div class="variablelist"><dl class="variablelist">
<dt><span class="term">
          getNodeAttribute
        </span></dt>
<dd><p>
            Reads the value on the node (e.g. Test Case, Test Step)
            on which this function is resolved, and uses this as the
            data for the Test Step. It has four possible arguments,
            <span class="emphasis"><em>name</em></span> reads the name of the node,
             <span class="emphasis"><em>comment</em></span> reads the comment on
            the node, <span class="emphasis"><em>description</em></span> 
            reads the raw (non-rendered) 
            description on the node, and <span class="emphasis"><em>task.id</em></span> reads 
            the task ID on the node. If the content is empty, the value used is
            <span class="emphasis"><em>null</em></span>. If you have overwritten
            either the name or the comment at this place of reuse,
            then these new details are used.
          </p></dd>
<dt><span class="term">
          getCentralTestDataSetValue
        </span></dt>
<dd><p>
            Use this function to access a value saved in a central
            data set. This lets you combine values that you have
            defined centrally with values that you use locally, or
            lets you combine values from different central data sets
            in your test. It locates a single cell in a specific
            central data set based on a value in a column that you
            define as a key, and a column in which to search for the
            required value. It requires four arguments: the name of
            the central data set to search in, the name of the
            column which you wish to use as a &#8221;key&#8221; (you can name
            the column KEY if you require), the value in the key
            column (to specify the line), and the column in which
            the required data cell is located.
          </p></dd>
</dl></div>
<p>
      <span class="strong"><strong>Example of the getCentralTestDataSetValue function</strong></span><br xmlns:d="http://docbook.org/ns/docbook">
      The function to retrieve data from a central data set can be exemplified using this example central data set, which is named <span class="emphasis"><em>Customer</em></span>:
    </p>
<p>
      </p>
<div class="informaltable"><table border="1">
<colgroup>
<col align="center">
<col align="center">
</colgroup>
<thead><tr>
<th align="center">CUSTOMER_TYPE</th>
<th align="center">CUSTOMER_NAME</th>
</tr></thead>
<tbody>
<tr>
<td align="center">NormalUser</td>
<td align="center">Bob Normal</td>
</tr>
<tr>
<td align="center">SuperUser</td>
<td align="center">Alice Super</td>
</tr>
<tr>
<td align="center">SupportUser</td>
<td align="center">John Support</td>
</tr>
</tbody>
</table></div>
<p>
    </p>
<p>
      To select a customer name using the customer type, you should
      enter:
    </p>
<div class="blockquote"><blockquote class="blockquote"><p>
        <span class="strong"><strong>?getCentralTestDataSetValue<br xmlns:d="http://docbook.org/ns/docbook">
        (Customer,CUSTOMER_TYPE,SuperUser,CUSTOMER_NAME)</strong></span>
      </p></blockquote></div>
<p>
      This will look in the central data set called
      <span class="emphasis"><em>Customer</em></span>, locate the value
      <span class="emphasis"><em>SuperUser</em></span> in the
      <span class="emphasis"><em>CUSTOMER_TYPE</em></span> column, and use that line
      to choose the cell in the <span class="emphasis"><em>CUSTOMER_NAME</em></span>
      column &#8211; Alice Super.
    </p>
<p>
      If you use this function, then it is possible to try to jump to the
      referenced data set using the Jump to Central Test Data Set command in the
      Properties or Data Set View (<a class="xref" href="../userInterface/ch05s05s02.html" title="5.5.2. The Properties View">Section 5.5.2, &#8220;The Properties View&#8221;</a>, <a class="xref" href="../userInterface/ch05s05s03.html" title="5.5.3. The Data Sets View">Section 5.5.3, &#8220;The Data Sets View&#8221;</a>).
    </p>
<p>
      <span class="strong"><strong>Wrapped functions from other libraries</strong></span><br xmlns:d="http://docbook.org/ns/docbook">
      You can also use the following functions in your tests. For full documentation on them, please refer to the respective library.
    </p>
<div class="variablelist"><dl class="variablelist">
<dt><span class="term">
          randomInt(exclusive maximum value)
        </span></dt>
<dd><p>
            Use this function to generate a random integer up to but
            not including the value you specify. The function is
            from
            <span class="emphasis"><em>org.apache.commons.lang.math.RandomUtils</em></span>
          </p></dd>
<dt><span class="term">
          replaceAll(string,regular expression,replacement)
        </span></dt>
<dd><p>
            Use this function to replace all of the parts of a
            string you specify with something else. The string to
            perform the replacement on is entered as the
            <span class="emphasis"><em>string</em></span>, the part(s) of the string
            to replace are defined by the <span class="emphasis"><em>regular
            expression</em></span>, and the string to replace it with
            is given as the <span class="emphasis"><em>replacement</em></span>. This
            function is from <span class="emphasis"><em>java.util.regex</em></span>.
          </p></dd>
<dt><span class="term">
          uuid()
        </span></dt>
<dd><p>
            This function generates a universal unique identifier.
            The function is from
            <span class="emphasis"><em>java.util.UUID</em></span>.
          </p></dd>
<dt><span class="term">
          base64Encode(string)
        </span></dt>
<dd><p>
            This function encodes a string to base 64. The function
            is from
            <span class="emphasis"><em>org.apache.commons.codec.binary.Base64</em></span>.
          </p></dd>
<dt><span class="term">
          base64Decode(string)
        </span></dt>
<dd><p>
            This function decodes a string from base 64. The
            function is from
            <span class="emphasis"><em>org.apache.commons.codec.binary.Base64</em></span>.
          </p></dd>
<dt><span class="term">
          urlEncode(string)
        </span></dt>
<dd><p>
            This function encodes (using UTF-8) a string for further usage within URLs.
          </p></dd>
<dt><span class="term">
          urlDecode(string)
        </span></dt>
<dd><p>
            This function decodes (using UTF-8) a string from a URL.
          </p></dd>
</dl></div>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="embedding-functions-in-other-functions"></a>3.14.6.3. Embedding functions in other functions</h4></div></div></div>
<p>
      Functions can be added as arguments to other functions. If, for example, you want to use the result of a subtraction as the first argument of your addition, you could write it like this:
    </p>
<p>
      <span class="input">?add(?sub(2,1),1)</span>
    </p>
<p>
      Results in <span class="input">1.0 + 1</span>, i.e. <span class="input">2.0</span>
    </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="useful-examples-for-functions"></a>3.14.6.4. Useful examples for functions</h4></div></div></div>
<p>
      Especially when it comes to the date functions, it is often
      necessary to use multiple functions embedded within each
      other.
    </p>
<div class="variablelist"><dl class="variablelist">
<dt><span class="term">
          ?formatDate(?now(), dd&#8217; MMMM &#8217;yyyy)
        </span></dt>
<dd><p>
            e.g. 29 February 2012
          </p></dd>
<dt><span class="term">
          ?formatDate(?now(), dd&#8217; MMM &#8217;yyyy)
        </span></dt>
<dd><p>
            e.g. 29 Feb 2012
          </p></dd>
<dt><span class="term">
          ?formatDate(?now(), dd-MMM-yyyy)
        </span></dt>
<dd><p>
            e.g. 29-Feb-2012
          </p></dd>
<dt><span class="term">
          ?formatDate(?now(), dd.MM.yyyy)
        </span></dt>
<dd><p>
            e.g. 29.02.2012
          </p></dd>
<dt><span class="term">
          ?formatDate(?now(), dd/MM/yyyy)
        </span></dt>
<dd><p>
            e.g. 29/02/2012
          </p></dd>
</dl></div>
<p>
      A more complex example involving embedded functions is e.g.:
    </p>
<div class="blockquote"><blockquote class="blockquote"><p>
        <span class="strong"><strong>?formatDate(?modifyDate(?parseDate<br xmlns:d="http://docbook.org/ns/docbook">
        (22.2.2012, dd.MM.yyyy),-1d),dd.MM.yy)</strong></span><br xmlns:d="http://docbook.org/ns/docbook">
        This function will parse the date 22.2.2012 into an internal format, subtract one day and then format it as a dd.MM.yy, in this case: 21.2.12.
      </p></blockquote></div>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="adding-your-own-functions"></a>3.14.6.5. Adding your own functions</h4></div></div></div>
<p>
      You can also add your own functions using an extension point.
      This is described in the Developer Manual.
    </p>
</div>
</div>
<br xmlns:d="http://docbook.org/ns/docbook"><hr xmlns:d="http://docbook.org/ns/docbook">
<address xmlns:d="http://docbook.org/ns/docbook">Copyright BREDEX GmbH 2015. Made available under the Eclipse Public License v1.0.</address>
<br xmlns:d="http://docbook.org/ns/docbook">
</body>
</html>

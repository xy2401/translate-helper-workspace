<?xml version='1.0' encoding='utf-8' ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<title>Trace Compass User Guide - LTTng Kernel Analysis</title>
		<link type="text/css" rel="stylesheet" href="book.css"/>
	</head>
	<body>
		<table class="navigation" style="width: 100%;" border="0" summary="navigation">
			<tr>
				<th style="width: 100%" align="center" colspan="3">LTTng Kernel Analysis</th>
			</tr>
			<tr>
				<td style="width: 20%" align="left">
					<a href="LTTng-Tracer-Control.html" title="LTTng Tracer Control">
						<img alt="Previous" border="0" src="images/prev.gif"/>
					</a>
				</td>
				<td style="width: 60%" align="center"></td>
				<td style="width: 20%" align="right">
					<a href="LTTng-UST-Analyses.html" title="LTTng-UST Analyses">
						<img alt="Next" border="0" src="images/next.gif"/>
					</a>
				</td>
			</tr>
			<tr>
				<td style="width: 20%" align="left" valign="top">LTTng Tracer Control</td>
				<td style="width: 60%" align="center"></td>
				<td style="width: 20%" align="right" valign="top">LTTng-UST Analyses</td>
			</tr>
		</table><hr class="navigation-separator"/>
		<h1 id="LTTng_Kernel_Analysis">LTTng Kernel Analysis</h1>
		<p>Historically, LTTng was developed to trace the Linux kernel and, over time, a number of kernel-oriented analysis views were developed and organized in a perspective.</p>
		<p>This section presents a description of the 
			<b>OS Tracing Overview</b> perspective and the 
			<b>LTTng Kernel</b> perspective.
		</p>
		<h2 id="OS_Tracing_Overview_Perspective">OS Tracing Overview Perspective</h2>
		<p>The 
			<b>OS Tracing Overview</b> perspective groups the following views:
		</p>
		<ul>
			<li>
				<a href="Trace-Compass-Main-Features.html#Project_Explorer_View">Project Explorer View</a>
			</li>
			<li>
				<a href="Trace-Compass-Main-Features.html#Events_Editor">Events Editor</a>
			</li>
			<li>
				<a href="Trace-Compass-Main-Features.html#Histogram_View">Histogram View</a>
			</li>
			<li>
				<a href="#LTTng_CPU_Usage_View">CPU Usage View</a>
			</li>
			<li>
				<a href="#Disk_I.2FO_Activity_View">Disk I/O Activity View</a>
			</li>
			<li>
				<a href="#Kernel_Memory_Usage_View">Kernel Memory Usage View</a>
			</li>
		</ul>
		<p>The perspective can be opened from the Eclipse Open Perspective dialog (
			<b>Window &gt; Open Perspective... &gt; Other</b>).
		</p>
		<p>
			<img border="0" src="images/osOverview/select_os_overview.png"/>
		</p>
		<p>This perspective is intended to be used to locate performance issues by observing resource usage.</p>
		<p>The perspective can show times resource usage is anomalous. This can help locating the causes of system slowdowns in throughput or response time.</p>
		<p>An example can be program that is doing a lot of processing then slows down due to a database access. The user will see a dip in CPU usage and maybe a slight rise in I/O access. The user should consider both spike and slums to be an indication of an area worth investigating.</p>
		<p>
			<img border="0" src="images/osOverview/os_overview_perspective.png"/>
		</p>
		<p>Once a performance issue has been localized, it can be further investigated with the #LTTng kernel Perspective.</p>
		<h2 id="LTTng_Kernel_Perspective">LTTng Kernel Perspective</h2>
		<p>The 
			<b>LTTng Kernel</b> perspective is built upon the 
			<a href="Trace-Compass-Main-Features.html#Tracing_Perspective">Tracing Perspective</a>, re-organizes them slightly and adds the following views:
		</p>
		<ul>
			<li>
				<a href="#Control_Flow_View">Control Flow View</a> - to visualize processes state transitions
			</li>
			<li>
				<a href="#Resources_View">Resources View</a> - to visualize system resources state transitions
			</li>
			<li>
				<a href="LTTng-Tracer-Control.html#LTTng_Tracer_Control">LTTng Tracer Control</a> - to configure LTTng tracing sessions remotely
			</li>
		</ul>
		<p>
			<img border="0" src="images/LTTngKernelPerspective.png"/>
		</p>
		<p>The perspective can be opened from the Eclipse Open Perspective dialog (
			<b>Window &gt; Open Perspective... &gt; Other</b>).
		</p>
		<p>
			<img border="0" src="images/OpenLTTngKernelPerspective.png"/>
		</p>
		<h2 id="Control_Flow_View">Control Flow View</h2>
		<p>The 
			<b>
				<i>Control Flow</i>
			</b> view is a LTTng-specific view that shows per-process events graphically. The Linux Kernel Analysis is executed the first time a LTTng Kernel is opened. After opening the trace, the element 
			<b>Control Flow</b> is added under the 
			<b>Linux Kernel Analysis</b> tree element in the Project Explorer. To open the view,  double-click the 
			<b>Control Flow</b> tree element.
		</p>
		<p>
			<img border="0" src="images/Cfv_show_view.png"/>
		</p>
		<p>Alternatively, select 
			<i>Control Flow</i> under 
			<i>LTTng</i> within the 
			<i>Show View</i> window (
			<b>Window</b> -&gt; 
			<b>Show View</b> -&gt; 
			<b>Other...</b>):
		</p>
		<p>You should get something like this:</p>
		<p>
			<img border="0" src="images/Cfv_global.png"/>
		</p>
		<p>The view is divided into the following important sections: 
			<b>process tree and information</b>, 
			<b>control flow</b> and the 
			<b>toolbar</b>. The time axis is aligned with other views that support automatic time axis alignment (see 
			<a href="Trace-Compass-Main-Features.html#Automatic_Time_Axis_Alignment">Automatic Time Axis Alignment</a>).
		</p>
		<p>The following sections provide detailed information for each part of the Control Flow View.</p>
		<h3 id="Process_tree_and_information">Process tree and information</h3>
		<p>Processes are organized as a tree within this view. This way, child and parent processes are easy to identify.</p>
		<p>
			<img border="0" src="images/Cfv_process_tree.png"/>
		</p>
		<p>The layout is based on the states computed from the trace events.</p>
		<p>A given process may be shown at different places within the tree since the nodes are 
			<b>unique (TID, birth time) couples</b>. This means that if process B of parent A dies, you'll still see it in the tree. If process A forks process B again, it will be shown as a different node since it won't have the same birth time (and probably not the same TID). This has the advantage that the tree, once loaded, never changes: horizontal scrolling within the 
			<a href="#Control_flow">control flow</a> remains possible.
		</p>
		<p>The TID column shows the process node's 
			<b>thread ID</b> and the PTID column shows its 
			<b>parent thread ID</b> (nothing is shown if the process has no parent).
		</p>
		<p>It is possible to sort the columns of the tree by clicking on the column header. Subsequent clicking will change the sort order. The hierarchy, i.e. the parent-child relationship is kept. When opening a trace for the first time, the processes are sorted by 
			<b>birth time</b>. The sort order and column will be preserved when switching between open traces. Note that when opening an experiment the processes will be sorted within each trace.
		</p>
		<h3 id="Control_flow">Control flow</h3>
		<p>This part of the Control Flow View is probably the most interesting one. Using the mouse, you can navigate through the trace (go left, right) and zoom on a specific region to inspect its details.</p>
		<p>The colored bars you see represent 
			<b>states</b> for the associated process node. When a process state changes in time, so does the color. For state 
			<b>SYSCALL</b> the name of the system call is displayed in the state bar. States colors legend is available through a 
			<a href="#Toolbar">toolbar button</a>:
		</p>
		<p>
			<img border="0" src="images/Cfv_legend.png"/>
		</p>
		<p>The style can be updated in the legend.</p>
		<p>This dark yellow is what you'll see most of the time since scheduling puts processes on hold while others run.</p>
		<p>The vertical blue line with T1 above it is the 
			<b>current selection indicator</b>. When a time range is selected, the region between the begin and end time of the selection will be shaded and two lines with T1 and T2 above will be displayed. The time stamps corresponding to T1, T2 and their delta are shown in the status line when the mouse is hovering over the control flow.
		</p>
		<p>Arrows can be displayed that follow the execution of each CPU across processes. The arrows indicate when the scheduler switches from one process to another for a given CPU. The CPU being followed is indicated on the state tooltip. When the scheduler switches to and from the idle process, the arrow skips to the next process which executes on the CPU after the idle process. Note that an appropriate zoom level is required for all arrows to be displayed.</p>
		<p>The display of arrows is optional and can be toggled using the 
			<b>Hide Arrows</b> toolbar button. It is also possible to follow a CPU's execution across state changes and the scheduler's process switching using the 
			<b>Follow CPU Forward/Backward</b> toolbar buttons.
		</p>
		<h4 id="Using_the_mouse">Using the mouse</h4>
		<p>The following mouse actions are available:</p>
		<ul>
			<li>
				<b>left-click</b>: select a time or time range begin time
			</li>
			<li>
				<b>Shift-left-click or drag</b>: Extend or shrink the selection range
			</li>
		</ul>
		<ul>
			<li>
				<b>left-drag horizontally</b>: select a time range or change the time range begin or end time
			</li>
			<li>
				<b>middle-drag or Ctrl-left-drag</b>: pan horizontally and/or vertically
			</li>
			<li>
				<b>right-drag horizontally</b>: 
				<a href="#Zoom_region">zoom region</a>
			</li>
			<li>
				<b>click on a colored bar</b>: the associated process node is selected and the current time indicator is moved where the click happened
			</li>
			<li>
				<b>mouse wheel up/down</b>: scroll up or down
			</li>
			<li>
				<b>Shift-mouse wheel up/down</b>: scroll left or right
			</li>
			<li>
				<b>Ctrl-mouse wheel up/down</b>: zoom in or out horizontally
			</li>
			<li>
				<b>Shift-Ctrl-mouse wheel up/down</b>: zoom in or out vertically
			</li>
			<li>
				<b>drag the time ruler horizontally</b>: zoom in or out with fixed start time
			</li>
			<li>
				<b>double-click the time ruler</b>: reset zoom to full range
			</li>
		</ul>
		<p>When the current time indicator is changed (when clicking in the states flow), all the other views are 
			<b>synchronized</b>. For example, the 
			<a href="#LTTng_Kernel_Events_Editor">Events Editor</a> will show the event matching the current time indicator. The reverse behaviour is also implemented: selecting an event within the Events View will update the Control Flow View current time indicator.
		</p>
		<h4 id="Using_the_keyboard">Using the keyboard</h4>
		<p>The following keyboard shortcuts are available:</p>
		<ul>
			<li>
				<b>arrow-right key</b>: selects the next state for the selected process
			</li>
			<li>
				<b>arrow-left key</b>: selects the previous state for the selected process
			</li>
			<li>
				<b>Shift + arrow-right key</b>: updates the selection end time of the current selection range by selecting the next state of the current process
			</li>
			<li>
				<b>Shift + arrow-left key</b>: updates the selection end time of the current selection range by selecting the previous state of the current process
			</li>
			<li>
				<b>.</b>: selects the next active marker
			</li>
			<li>
				<b>,</b>: selects the previous active marker
			</li>
			<li>
				<b>Shift + .</b>: updates the selection end time of the current selection range by selecting the next active marker boundary
			</li>
			<li>
				<b>Shift + ,</b>: updates the selection end time of the current selection range by selecting the previous active marker boundary
			</li>
			<li>
				<b>arrow-down</b>: selects the next process
			</li>
			<li>
				<b>arrow-up</b>: selects the previous process
			</li>
			<li>
				<b>Page Down</b>: selects the process down one page
			</li>
			<li>
				<b>Page Up</b>: selects the process up one page
			</li>
			<li>
				<b>Home</b>: selects the first process
			</li>
			<li>
				<b>End</b>: selects the last process
			</li>
			<li>
				<b>Enter</b>: toggles the expansion state of the current process in the tree
			</li>
			<li>
				<b>+</b>: Zoom-in centered to the selected time range (or window range if time selection is not visible)
			</li>
			<li>
				<b>-</b>: Zoom-out centered to the selected time range (or window range if time selection is not visible)
			</li>
			<li>
				<b>Ctrl + +</b>: Zoom-in vertically
			</li>
			<li>
				<b>Ctrl + -</b>: Zoom-out vertically
			</li>
			<li>
				<b>Ctrl + 0</b>: Reset the vertical zoom
			</li>
			<li>
				<b>Ctrl + F</b>: Search in the view. (see 
				<a href="Trace-Compass-Main-Features.html#Searching_in_Time_Graph_Views">Searching in Time Graph Views</a>)
			</li>
			<li>
				<b>G</b>: Toggles both vertical and horizontal gridlines
			</li>
			<li>
				<b>Z</b>: Zoom to current selected time range (if range is greater than 0)
			</li>
		</ul>
		<p>
			<b>WASD Navigation</b>
		</p>
		<p>Use WASD Navigation in conjunction with the mouse, where one hand changes the mouse
			position and the other hand uses the keyboard shortcuts to zoom or scroll.</p>
		<ul>
			<li>
				<b>W</b>: Zoom-in horizontally centered to the mouse position
			</li>
			<li>
				<b>S</b>: Zoom-out horizontally centered to the mouse position
			</li>
			<li>
				<b>A</b>: Scroll left by a quarter of the current window range
			</li>
			<li>
				<b>D</b>: Scroll right by a quarter of the current window range
			</li>
		</ul>
		<p>When the mouse cursor is over entries (left pane):</p>
		<ul>
			<li>
				<b>-</b>: Collapse selected entry
			</li>
			<li>
				<b>+</b>: Expand selected entry
			</li>
			<li>
				<b>*</b>: Expand selected entry to the level with at least one collapsed entry
			</li>
		</ul>
		<p>
			<b>Please note that the behavior of some shortcuts can slightly differ based on the operating system.</b>
		</p>
		<p>When the selection indicators are changed, all the other views are 
			<b>synchronized</b>. For example, the 
			<a href="#LTTng_Kernel_Events_Editor">Events Editor</a> will show the event matching the current time indicator. The reverse behaviour is also implemented: selecting an event within the Events View will update the Control Flow View current time indicator.
		</p>
		<h4 id="Incomplete_regions">Incomplete regions</h4>
		<p>You'll notice 
			<b>small dots</b> over the colored bars at some places:
		</p>
		<p>
			<img border="0" src="images/Cfv_small_dots.png"/>
		</p>
		<p>Those dots mean the underlying region is 
			<b>incomplete</b>: there's not enough pixels to view all the events. In other words, you have to zoom in.
		</p>
		<p>When zooming in, small dots start to disappear:</p>
		<p>
			<img border="0" src="images/Cfv_zoom.png"/>
		</p>
		<p>When no dots are left, you are viewing 
			<b>all the events and states</b> within that region.
		</p>
		<h4 id="Zoom_region">Zoom region</h4>
		<p>To zoom in on a specific region, 
			<b>right-click and drag</b> in order to draw a time range:
		</p>
		<p>
			<img border="0" src="images/Cfv_zoom_region.png"/>
		</p>
		<p>The states flow horizontal space will only show the selected region.</p>
		<h4 id="Tooltips">Tooltips</h4>
		<p>Hover the cursor over a colored bar and a 
			<b>tooltip</b> will pop up:
		</p>
		<p>
			<img border="0" src="images/Cfv_tooltip.png"/>
		</p>
		<p>The tooltip indicates:</p>
		<ul>
			<li>the process name</li>
			<li>the pointed state name</li>
			<li>the CPU (if applicable)</li>
			<li>the system call name (if applicable)</li>
			<li>the pointed state date and start/stop times</li>
			<li>the pointed state duration (seconds)</li>
		</ul>
		<p>A browser based tooltip is available that allows users to use hyperlink navigation or to copy text. To enable the feature select</p>
		<p>
			<b>Window</b>-&gt;
			<b>Preferences</b>-&gt;
			<b>Tracing</b> then checking 
			<b>Use browser based tooltips</b>. It is known to be unstable on older platforms, if this instability is encountered, please submit your bug here: 
			<a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=547563">https://bugs.eclipse.org/bugs/show_bug.cgi?id=547563</a>
		</p>
		<p>
			<img border="0" src="images/tooltippref.png"/>
		</p>
		<h4 id="Dynamics_Filters">Dynamics Filters</h4>
		<p>Dynamic filters are filters that are processed and applied each time the control flow view visible time range changes.</p>
		<p>The dynamics filters can be rapidly toggled in their view sub menu.</p>
		<p>
			<img border="0" src="images/DynamicFilters/DynamicFiltersToggle.png"/>
		</p>
		<p>The dynamics filters  can be fine tuned in the configuration dialog.</p>
		<p>
			<img border="0" src="images/DynamicFilters/DynamicFiltersConfigure.png"/>
		</p>
		<p>Note: Dynamic filters can induce performance degradation.</p>
		<h5 id="Show_Active_Threads_Only">Show Active Threads Only</h5>
		<p>The Show Active Threads Only filter allow a user to increase the signal to noise ratio by filtering out all <u>inactive</u> threads.</p>
		<p>A thread is considered inactive when it is in the following state:</p>
		<ul>
			<li>non-existing</li>
			<li>unknown</li>
			<li>wait and blocked</li>
			<li>wait and unknown</li>
		</ul>
		<p>A user can fine tune this filter by providing ranges of CPUs allowing the filter to only show active thread running on the specified CPUs.</p>
		<p>
			<img border="0" src="images/DynamicFilters/DynamicFilter_ShowActiveThreadsConfigure.png"/>
		</p>
		<h3 id="Toolbar">Toolbar</h3>
		<p>The Control Flow View 
			<b>toolbar</b>, located at the top right of the view, has shortcut buttons to perform common actions:
		</p>
		<table>
			<tr>
				<td>
					<img border="0" src="images/filter_items.gif"/>
				</td>
				<td>Show View Filter</td>
				<td>Opens the process filter dialog. Filter settings will be preserved when switching between open traces.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/show_legend.gif"/>
				</td>
				<td>Show Legend</td>
				<td>Displays the states legend.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/Optimization.png"/>
				</td>
				<td>Optimize</td>
				<td>"Optimize" the row order of the control flow view. This groups the threads by minimizing the distance in the graph of transitions by CPU for a given time range. The scheduler will often keep tightly coupled threads on the same CPU to preserve data locality. An interesting side effect of this is that threads communicating together in that time range will be moved closer together when pressing the button. The button moves the rows only when pressed. When the time range is moved, the optimization action can be re-applied.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/home_nav.gif"/>
				</td>
				<td>Reset the Time Scale to Default</td>
				<td>Resets the zoom window to the full range.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/prev_event.gif"/>
				</td>
				<td>Select Previous State Change</td>
				<td>Selects the previous state for the selected process. Pressing the 
					<b>Shift</b> key at the same time will update the selection end time of the current selection range.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/next_event.gif"/>
				</td>
				<td>Select Next State Change</td>
				<td>Selects the next state for the selected process. Pressing the 
					<b>Shift</b> key at the same time will update the selection end time of the current selection range.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/add_bookmark.gif"/>
				</td>
				<td>Add Bookmark...</td>
				<td>Adds a bookmark at the current selection range. A bookmark is a user-defined interval marker. The 
					<b>Add Bookmark</b> dialog is opened where the user can enter a description and choose the highlighting color and alpha (transparency) value. This button is replaced by the 
					<b>Remove Bookmark</b> button if the current selection range corresponds to an existing bookmark. The bookmarks can also be managed in the 
					<b>Bookmark View</b>.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/remove_bookmark.gif"/>
				</td>
				<td>Remove Bookmark</td>
				<td>Removes the bookmark at the current selection range. This button replaces the 
					<b>Add Bookmark</b> when the current selection range corresponds to an existing bookmark.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/prev_bookmark.gif"/>
				</td>
				<td>Previous Marker</td>
				<td>Selects the previous active marker. Pressing the 
					<b>Shift</b> key at the same time will update the selection end time of the current selection range.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/next_bookmark.gif"/>
				</td>
				<td>Next Marker</td>
				<td>Selects the next active marker. Pressing the 
					<b>Shift</b> key at the same time will update the selection end time of the current selection range. Clicking the button drop-down arrow will open a menu where marker categories can be made active or inactive for navigation. To toggle the display of a marker category, use the 
					<b>View Menu</b> instead.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/prev_menu.gif"/>
				</td>
				<td>Select Previous Process</td>
				<td>Selects the previous process.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/next_menu.gif"/>
				</td>
				<td>Select Next Process</td>
				<td>Selects the next process.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/zoomin_nav.gif"/>
				</td>
				<td>Zoom In</td>
				<td>Zooms in on the selection by 50%.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/zoomout_nav.gif"/>
				</td>
				<td>Zoom Out</td>
				<td>Zooms out on the selection by 50%.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/hide_arrows.gif"/>
				</td>
				<td>Hide Arrows</td>
				<td>Toggles the display of arrows on or off.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/follow_arrow_bwd.gif"/>
				</td>
				<td>Follow CPU Backward</td>
				<td>Selects the previous state following CPU execution across processes. Pressing the 
					<b>Shift</b> key at the same time will update the selection end time of the current selection range.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/follow_arrow_fwd.gif"/>
				</td>
				<td>Follow CPU Forward</td>
				<td>Selects the next state following CPU execution across processes. Pressing the 
					<b>Shift</b> key at the same time will update the selection end time of the current selection range.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/shift_l_edit.gif"/>
				</td>
				<td>Go to previous event of the selected thread</td>
				<td>Move to the closest previous event belonging to the selected thread. This action looks through all trace events, unlike the 
					<i>Select Previous State Change</i> action which only stops at state changes.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/shift_r_edit.gif"/>
				</td>
				<td>Go to next event of the selected thread</td>
				<td>Move to the closest following event belonging to the selected thread. This action looks through all trace events, unlike the 
					<i>Select Next State Change</i> action which only stops at state changes.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/unpinned_view.gif"/>
					<br/>
					<img border="0" src="images/pin_view.gif"/>
				</td>
				<td>Pin/Unpin View</td>
				<td>Pin or unpin the view. A pinned view is frozen with the trace selected at the time of pinning. When the unpin button is clicked the view synchronizes back to the active trace. The button's drop down menu can be used to quickly pin the view to any of the opened traces.</td>
			</tr>
		</table>
		<p>View Menu</p>
		<table>
			<tr>
				<td>New Control Flow view</td>
				<td>Spawn a new Control Flow view. The new view can be pinned to a new instance of the current trace, pinned to any opened trace, or unpinned.</td>
			</tr>
			<tr>
				<td>Align Views</td>
				<td>Disable and enable the automatic time axis alignment of time-based views. Disabling the alignment in this view will disable this feature across all the views because it's a workspace preference.</td>
			</tr>
			<tr>
				<td>Show Markers</td>
				<td>A marker highlights a time interval. A marker can be used for instance to indicate a time range where lost events occurred or to bookmark an interesting interval for future reference. Selecting a category name will toggle the visibility of markers of that category.</td>
			</tr>
			<tr>
				<td>Marker Set</td>
				<td>The user can select from one of the configured market sets, or choose 
					<b>None</b> to use no marker set. The setting applies to all views that support marker sets. The marker set configuration can be edited by selecting the 
					<b>Edit...</b> menu item (see 
					<a href="Trace-Compass-Main-Features.html#Marker_Set_Configuration_XML_Format">Marker Set Configuration XML Format</a>). After saving the changes in the opened editor, the marker set should then be re-selected to update the view.
				</td>
			</tr>
			<tr>
				<td>Thread Presentation</td>
				<td>Select the threads layout. Two layouts are available. 
					<b>Flat</b> layout lists the threads in a flat list per trace. 
					<b>Hierarchical</b> layout shows the threads in a parent-child tree per trace.
				</td>
			</tr>
			<tr>
				<td></td>
				<td>Dynamic Filters</td>
				<td>Select and configure the Dynamic Filters to be applied.</td>
			</tr>
		</table>
		<h3 id="Marker_Axis">Marker Axis</h3>
		<p>The marker axis is visible only when at least one marker category with markers for the current trace is shown.</p>
		<p>The marker axis displays one row per marker category. Each marker's time range and/or label (if applicable) are drawn on the marker axis.</p>
		<p>Clicking on any marker's time range or label will set the current time selection to the marker's time or time range.</p>
		<p>Clicking on the "X" icon to the left of the marker category name will hide this marker category from the time graph. It can be shown again using the corresponding 
			<b>Show Markers</b> menu item in the view menu.
		</p>
		<p>The marker axis can be collapsed and expanded by clicking on the icon at the top left of the marker axis. The marker axis can be completely removed by hiding all available marker categories.</p>
		<h2 id="Resources_View">Resources View</h2>
		<p>This view is specific to LTTng kernel traces.  The Linux Kernel Analysis is executed the first time a LTTng Kernel is opened. After opening the trace, the element 
			<b>Resources</b> is added under the 
			<b>Linux Kernel Analysis</b> tree element of the Project Explorer. To open the view, double-click the 
			<b>Resources</b> tree element.
		</p>
		<p>Alternatively, go in 
			<b>Window</b> -&gt; 
			<b>Show View</b> -&gt; 
			<b>Other...</b> and select 
			<b>LTTng/Resources</b> in the list.
		</p>
		<p>
			<img title="Example of resources view with all trace points and syscalls enabled" alt="Example of resources view with all trace points and syscalls enabled" border="0" src="images/Rv_example.png"/>
		</p>
		<p>This view shows the state of system resources i.e. if changes occurred during the trace either on 
			<b>CPUs</b>, 
			<b>IRQs</b> or 
			<b>soft IRQs</b>, it will appear in this view. The left side of the view present a list of resources that are affected by at least one event of the trace. The right side illustrate the state in which each resource is at some point in time. For state 
			<b>USERMODE</b> it also prints the process name in the state bar. For state 
			<b>SYSCALL</b> the name of the system call is
			displayed in the state region.
		</p>
		<p>When an 
			<b>IRQ</b> is handled by a 
			<b>CPU</b>, its states are shown under the corresponding 
			<b>CPU</b> entry. Similarly, the 
			<b>CPU</b> that was handling an 
			<b>IRQ</b> is shown under the handled 
			<b>IRQ</b>. Therefore, the trace can be visualized from a 
			<b>CPU</b> point of view or from an 
			<b>IRQ</b> point of view.
		</p>
		<p>Just like other views, according to which trace points and system calls are activated, the content of this view may change from one trace to another.</p>
		<p>The time axis is aligned with other views that support automatic time axis alignment (see 
			<a href="Trace-Compass-Main-Features.html#Automatic_Time_Axis_Alignment">Automatic Time Axis Alignment</a>).
		</p>
		<p>Each state are represented by one color so it is faster to say what is happening.</p>
		<p>
			<img title="Color for each state" alt="Color for each state" border="0" src="images/Rv_legend.png"/>
		</p>
		<p>The style can be updated in the legend.</p>
		<p>To go through the state of a resource, you first have to select the resource and the timestamp that interest you. For the latter, you can pick some time before the interesting part of the trace.</p>
		<p>
			<img title="Shows the state of an IRQ" alt="Shows the state of an IRQ" border="0" src="images/RV_infobox1.png"/>
		</p>
		<p>Then, by selecting 
			<b>Next Event</b>, it will show the next state transition and the event that occurred at this time.
		</p>
		<p>
			<img title="Shows the next state of the IRQ" alt="Shows the next state of the IRQ" border="0" src="images/RV_infobox2.png"/>
		</p>
		<p>This view is also synchronized with the others: 
			<a href="Trace-Compass-Main-Features.html#Histogram_View">Histogram View</a>, 
			<a href="#LTTng_Kernel_Events_Editor">Events Editor</a>, 
			<a href="#Control_Flow_View">Control Flow View</a>, etc.
		</p>
		<h3 id="Follow_CPU">Follow CPU</h3>
		<p>It is possible to follow a CPU by right-clicking on its entry in the view, then selecting 
			<i>Follow CPU X</i> where X is the number of the CPU. Following a CPU will filter the 
			<a href="#LTTng_CPU_Usage_View">CPU Usage View</a> to display only usage for the selected CPU. To unfollow a CPU, one needs to right-click on any CPU entry and select 
			<i>Unfollow CPU</i>.
		</p>
		<h3 id="Follow_thread">Follow thread</h3>
		<p>It is possible to follow a thread by right-clicking on a thread time event in a CPU thread status line, then selecting  
			<i>Follow TID X</i> where X is the TID number of the thread to follow. Following a thread will display a red box around all the time events belonging to that specific thread. To unfollow a thread, one needs to right-click on any thread time event and select 
			<i>Unfollow</i>.
		</p>
		<p>
			<img title="Follow thread in the Resources View" alt="Follow thread in the Resources View" border="0" src="images/resourcesView/followThread.png"/>
		</p>
		<h3 id="Navigation">Navigation</h3>
		<p>See Control Flow View's 
			<b>
				<a href="#Using_the_mouse">Using the mouse</a>
			</b>, 
			<b>
				<a href="#Using_the_keyboard">Using the keyboard</a>
			</b> and 
			<b>
				<a href="#Zoom_region">Zoom region</a>
			</b>.
		</p>
		<h3 id="Incomplete_regions_2">Incomplete regions</h3>
		<p>See Control Flow View's 
			<b>
				<a href="#Incomplete_regions">Incomplete regions</a>
			</b>.
		</p>
		<h3 id="Toolbar_2">Toolbar</h3>
		<p>The Resources View 
			<b>toolbar</b>, located at the top right of the view, has shortcut buttons to perform common actions:
		</p>
		<table>
			<tr>
				<td>
					<img border="0" src="images/filter_items.gif"/>
				</td>
				<td>Show View Filter</td>
				<td>Opens the resources filter dialog. Filter settings will be preserved when switching between open traces.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/show_legend.gif"/>
				</td>
				<td>Show Legend</td>
				<td>Displays the states legend.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/home_nav.gif"/>
				</td>
				<td>Reset the Time Scale to Default</td>
				<td>Resets the zoom window to the full range.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/prev_event.gif"/>
				</td>
				<td>Select Previous State Change</td>
				<td>Selects the previous state for the selected resource. Pressing the 
					<b>Shift</b> key at the same time will update the selection end time of the current selection range.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/next_event.gif"/>
				</td>
				<td>Select Next State Change</td>
				<td>Selects the next state for the selected resource. Pressing the 
					<b>Shift</b> key at the same time will update the selection end time of the current selection range.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/add_bookmark.gif"/>
				</td>
				<td>Add Bookmark...</td>
				<td>Adds a bookmark at the current selection range. A bookmark is a user-defined interval marker. The 
					<b>Add Bookmark</b> dialog is opened where the user can enter a description and choose the highlighting color and alpha (transparency) value. This button is replaced by the 
					<b>Remove Bookmark</b> button if the current selection range corresponds to an existing bookmark. The bookmarks can also be managed in the 
					<b>Bookmark View</b>.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/remove_bookmark.gif"/>
				</td>
				<td>Remove Bookmark</td>
				<td>Removes the bookmark at the current selection range. This button replaces the 
					<b>Add Bookmark</b> when the current selection range corresponds to an existing bookmark.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/prev_bookmark.gif"/>
				</td>
				<td>Previous Marker</td>
				<td>Selects the previous active marker. Pressing the 
					<b>Shift</b> key at the same time will update the selection end time of the current selection range.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/next_bookmark.gif"/>
				</td>
				<td>Next Marker</td>
				<td>Selects the next active marker. Pressing the 
					<b>Shift</b> key at the same time will update the selection end time of the current selection range. Clicking the button drop-down arrow will open a menu where marker categories can be made active or inactive for navigation.
				</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/prev_menu.gif"/>
				</td>
				<td>Select Previous Resource</td>
				<td>Selects the previous resource</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/next_menu.gif"/>
				</td>
				<td>Select Next Resource</td>
				<td>Selects the next resource</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/zoomin_nav.gif"/>
				</td>
				<td>Zoom In</td>
				<td>Zooms in on the selection by 50%.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/zoomout_nav.gif"/>
				</td>
				<td>Zoom Out</td>
				<td>Zooms out on the selection by 50%.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/unpinned_view.gif"/>
					<br/>
					<img border="0" src="images/pin_view.gif"/>
				</td>
				<td>Pin/Unpin View</td>
				<td>Pin or unpin the view. A pinned view is frozen with the trace selected at the time of pinning. When the unpin button is clicked the view synchronizes back to the active trace. The button's drop down menu can be used to quickly pin the view to any of the opened traces.</td>
			</tr>
		</table>
		<p>View Menu</p>
		<table>
			<tr>
				<td>New Resources view</td>
				<td>Spawn a new Resources view. The new view can be pinned to a new instance of the current trace, pinned to any opened trace, or unpinned.</td>
			</tr>
			<tr>
				<td>Align Views</td>
				<td>Disable and enable the automatic time axis alignment of time-based views. Disabling the alignment in this view will disable this feature across all the views because it's a workspace preference.</td>
			</tr>
			<tr>
				<td>Show Markers</td>
				<td>A marker highlights a time interval. A marker can be used for instance to indicate a time range where lost events occurred or to bookmark an interesting interval for future reference. Selecting a category name will toggle the visibility of markers of that category.</td>
			</tr>
			<tr>
				<td>Marker Set</td>
				<td>The user can select from one of the configured market sets, or choose 
					<b>None</b> to use no marker set. The setting applies to all views that support marker sets. The marker set configuration can be edited by selecting the 
					<b>Edit...</b> menu item (see 
					<a href="Trace-Compass-Main-Features.html#Marker_Set_Configuration_XML_Format">Marker Set Configuration XML Format</a>). After saving the changes in the opened editor, the marker set should then be re-selected to update the view.
				</td>
			</tr>
		</table>
		<h3 id="Marker_Axis_2">Marker Axis</h3>
		<p>See Control Flow View's 
			<b>
				<a href="#Marker_Axis">Marker Axis</a>
			</b>.
		</p>
		<h2 id="LTTng_CPU_Usage_View">LTTng CPU Usage View</h2>
		<p>The CPU Usage analysis and view is specific to LTTng Kernel traces. The CPU usage is derived from a kernel trace as long as the 
			<b>sched_switch</b> event was enabled during the collection of the trace. This analysis is executed the first time that the CPU Usage view is opened after opening the trace. To open the view, double-click on the 
			<b>CPU Usage</b> tree element under the 
			<b>Linux Kernel Analysis</b> tree element of the Project Explorer.
		</p>
		<p>
			<img border="0" src="images/LTTng_OpenCpuUsageView.png"/>
		</p>
		<p>Now, the CPU Usage view will show:</p>
		<p>
			<img border="0" src="images/LTTng_CpuUsageView.png"/>
		</p>
		<p>The view is divided into the following important sections: 
			<b>Process Information</b> and the 
			<b>CPU Usage Chart</b>. The time axis is aligned with other views that support automatic time axis alignment (see 
			<a href="Trace-Compass-Main-Features.html#Automatic_Time_Axis_Alignment">Automatic Time Axis Alignment</a>).
		</p>
		<h3 id="Process_Information">Process Information</h3>
		<p>The Process Information is displayed on the left side of the view and shows all threads that were executing on all available CPUs in the current time range. For each process, it shows in different columns the thread ID (TID), process name (Process), the average (%) execution time and the actual execution time (Time) during the current time range. It shows all threads that were executing on the CPUs in the current time range.</p>
		<h3 id="CPU_Usage_Chart">CPU Usage Chart</h3>
		<p>The CPU Usage Chart on the right side of the view, plots the total time spent on all CPUs of all processes and the time of the selected process.</p>
		<h4 id="Tooltips_2">Tooltips</h4>
		<p>Hover the cursor over a line of the chart and a tooltip will pop up with the following information:</p>
		<ul>
			<li>
				<b>Time</b>: current time of mouse position
			</li>
			<li>
				<b>total</b>: The total CPU usage
			</li>
			<li>
				<b>&lt;process&gt;</b>: CPU usage of selected process
			</li>
		</ul>
		<p>
			<img border="0" src="images/LTTng_CpuUsageViewToolTip.png"/>
		</p>
		<h4 id="Using_the_mouse_2">Using the mouse</h4>
		<p>The CPU Usage chart is usable with the mouse. The following actions are set:</p>
		<ul>
			<li>
				<b>left-click</b>: select a time or time range begin time
			</li>
			<li>
				<b>Shift-left-click or drag</b>: Extend or shrink the selection range
			</li>
			<li>
				<b>left-drag horizontally</b>: select a time range or change the time range begin or end time
			</li>
			<li>
				<b>middle-drag or Ctrl-left-drag horizontally</b>: pan left or right
			</li>
			<li>
				<b>right-drag horizontally</b>: 
				<a href="#Zoom_region">zoom region</a>
			</li>
			<li>
				<b>Shift-mouse wheel up/down</b>: scroll left or right
			</li>
			<li>
				<b>Ctrl-mouse wheel up/down</b>: zoom in or out horizontally
			</li>
		</ul>
		<h4 id="Using_the_keyboard_2">Using the keyboard</h4>
		<p>The following keyboard shortcuts are available, when the mouse cursor is over the graph (right pane):</p>
		<ul>
			<li>
				<b>+</b>: Zoom-in horizontally centered to the selected time range (or window range if time selection is not visible)
			</li>
			<li>
				<b>-</b>: Zoom-out horizontally centered to the selected time range (or window range if time selection is not visible)
			</li>
			<li>
				<b>Z</b>: Zoom to the current selection time range, if the selection range is greater than 0
			</li>
		</ul>
		<p>
			<b>WASD Navigation</b>
		</p>
		<p>Use WASD Navigation in conjunction with the mouse, where one hand changes the mouse
			position and the other hand uses the keyboard shortcuts to zoom or scroll.</p>
		<ul>
			<li>
				<b>W</b>: Zoom-in horizontally centered to the mouse position
			</li>
			<li>
				<b>S</b>: Zoom-out horizontally centered to the mouse position
			</li>
			<li>
				<b>A</b>: Scroll left by a quarter of the current window range
			</li>
			<li>
				<b>D</b>: Scroll right by a quarter of the current window range
			</li>
		</ul>
		<h4 id="Toolbar_3">Toolbar</h4>
		<p>The view 
			<b>toolbar</b>, located at the top right of the view, has shortcut buttons to perform common actions:
		</p>
		<table>
			<tr>
				<td>
					<img border="0" src="images/home_nav.gif"/>
				</td>
				<td>Reset the Time Scale to Default</td>
				<td>Resets the zoom window to the full range.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/zoomin_nav.gif"/>
				</td>
				<td>Zoom In</td>
				<td>Zooms in on the selection by 50%.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/zoomout_nav.gif"/>
				</td>
				<td>Zoom Out</td>
				<td>Zooms out on the selection by 50%.</td>
			</tr>
			<tr>
				<td>
					<img border="0" src="images/unpinned_view.gif"/>
					<br/>
					<img border="0" src="images/pin_view.gif"/>
				</td>
				<td>Pin/Unpin View</td>
				<td>Pin or unpin the view. A pinned view is frozen with the trace selected at the time of pinning. When the unpin button is clicked the view synchronizes back to the active trace. The button's drop down menu can be used to quickly pin the view to any of the opened traces.</td>
			</tr>
		</table>
		<h4 id="View_Menu">View Menu</h4>
		<p>The CPU Usage View 
			<b>view menu</b>, located at the top right of the view, has shortcut buttons to perform common actions:
		</p>
		<table>
			<tr>
				<td>New CPU Usage view</td>
				<td>Spawn a new CPU Usage view. The new view can be pinned to a new instance of the current trace, pinned to any opened trace, or unpinned.</td>
			</tr>
			<tr>
				<td>Align Views</td>
				<td>Disable and enable the automatic time axis alignment of time-based views. Disabling the alignment in this view will disable this feature across all the views because it's a workspace preference.</td>
			</tr>
		</table>
		<h4 id="CPU_Filtering">CPU Filtering</h4>
		<p>
			<a href="#Follow_CPU">Follow a CPU</a> will filter the CPU Usage View and will display only usage for the followed CPU.
		</p>
		<h2 id="Kernel_Memory_Usage_View">Kernel Memory Usage View</h2>
		<p>The Kernel Memory Usage and view is specific to kernel traces. To open the view, double-click on the 
			<b>Kernel Memory Usage Analysis</b> tree element under the 
			<b>Kernel</b> tree element of the Project Explorer.
		</p>
		<p>
			<img border="0" src="images/kernelMemoryUsage/OpenKernelMemoryUsageView.png"/>
		</p>
		<p>Now, the Kernel memory usage view will show:</p>
		<p>
			<img border="0" src="images/kernelMemoryUsage/KernelMemoryUsageView.png"/>
		</p>
		<p>Where:</p>
		<ul>
			<li>
				<b>TID</b>: The ID of the thread this event belongs to
			</li>
			<li>
				<b>Process</b>: The process of the TID that belongs to it
			</li>
		</ul>
		<p>The view is divided into the following important sections: 
			<b>Process Information</b> and the 
			<b>Relative Kernel Memory Usage</b>. The time axis is aligned with other views that support automatic time axis alignment (see 
			<a href="Trace-Compass-Main-Features.html#Automatic_Time_Axis_Alignment">Automatic Time Axis Alignment</a>).
		</p>
		<p>The filter button: 
			<img border="0" src="images/filter_items.gif"/> can be used to show only the active threads in the tree viewer. By default only the threads which have had memory usage variations in the visible time range will be shown, clicking the button will reveal all the threads. Threads can be filtered by checking and unchecking them in the left hand side tree.
		</p>
		<p>The time range can be set to fully zoomed out by double-clicking the time axis or the home button.</p>
		<h3 id="Process_Information_2">Process Information</h3>
		<p>The Process Information is displayed on the left side of the view and shows all threads that were executing on all available CPUs in the current time range. For each process, it shows in different columns the thread ID (TID) and the process name (Process).</p>
		<h3 id="Navigation_2">Navigation</h3>
		<p>For navigation, see CPU Usage view's 
			<b>
				<a href="#Using_the_mouse_2">Using the mouse</a>
			</b>, 
			<b>
				<a href="#Using_the_keyboard_2">Using the keyboard</a>
			</b> and 
			<b>
				<a href="#Zoom_region">Zoom region</a>
			</b>.
		</p>
		<h3 id="Toolbar_4">Toolbar</h3>
		<p>The view 
			<b>toolbar</b>, located at the top right of the view, has shortcut buttons to perform common actions:
		</p>
		<table>
			<tr>
				<td>
					<img border="0" src="images/filter_items.gif"/>
				</td>
				<td>Filter active threads</td>
				<td>Show only active threads</td>
			</tr>
		</table>
		<p>For other toolbar buttons, see CPU Usage view's 
			<b>
				<a href="#Toolbar_3">Toolbar</a>
			</b>.
		</p>
		<h3 id="View_Menu_2">View Menu</h3>
		<p>The Memory Usage View 
			<b>view menu</b>, located at the top right of the view, has shortcut buttons to perform common actions:
		</p>
		<table>
			<tr>
				<td>New Memory Usage view</td>
				<td>Spawn a new Memory Usage view. The new view can be pinned to a new instance of the current trace, pinned to any opened trace, or unpinned.</td>
			</tr>
			<tr>
				<td>Align Views</td>
				<td>Disable and enable the automatic time axis alignment of time-based views. Disabling the alignment in this view will disable this feature across all the views because it's a workspace preference.</td>
			</tr>
		</table>
		<h3 id="Relative_Kernel_Memory_Chart">Relative Kernel Memory Chart</h3>
		<p>The Relative Kernel Memory Chart on the right side of the view plots the relative amount of memory that was allocated and deallocated during that period of time.</p>
		<h4 id="Navigation_3">Navigation</h4>
		<p>For navigation, see CPU Usage view's 
			<b>
				<a href="#Using_the_mouse_2">Using the mouse</a>
			</b>, 
			<b>
				<a href="#Using_the_keyboard_2">Using the keyboard</a>
			</b> and 
			<b>
				<a href="#Zoom_region">Zoom region</a>
			</b>.
		</p>
		<h4 id="Tooltips_3">Tooltips</h4>
		<p>Hover the cursor over a line of the chart and a tooltip will pop up with the following information:</p>
		<ul>
			<li>
				<b>time</b>: current time of mouse position
			</li>
			<li>
				<b>Total</b>: The total CPU usage
			</li>
		</ul>
		<p>
			<img border="0" src="images/kernelMemoryUsage/KernelMemoryUsageChart.png"/>
		</p>
		<h2 id="Process_Wait_Analysis">Process Wait Analysis</h2>
		<p>TraceCompass can recover wait causes of local and distributed processes using operating system events. The analysis highlights the tasks and devices causing wait. Wait cause recovery is recursive, comprise all tasks running on the system and works across computers using packet trace synchronization.</p>
		<p>The analysis details are available in the paper 
			<a href="http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=7294678&amp;isnumber=4359390">Wait analysis of distributed systems using kernel tracing</a>.
		</p>
		<h3 id="Prerequisites">Prerequisites</h3>
		<p>The analysis requires a Linux kernel trace. Additional instrumentation may be required for specific kernel version and for distributed tracing. This instrumentation is available in 
			<a href="https://github.com/giraldeau/lttng-modules/tree/addons">LTTng modules addons</a> on GitHub.
		</p>
		<p>The required events are:</p>
		<ul>
			<li>
				<b>sched_switch, sched_wakeup</b>: Scheduling events indicate when a process is blocked and the wake-up event indicates the task or resource that unblocked the task. For kernel versions comprised between 3.8 and 4.1, the event 
				<b>sched_ttwu</b> (which stands for Try To Wake-Up) is provided for backward compatibility in LTTng modules addons.
			</li>
			<li>
				<b>IRQ, SoftIRQ and IPI</b>: Interrupt events are required to distinguish the context of the wake-up. When a wake-up occurs inside an interrupt handler, it must be associated with the device causing the interrupt and not the interrupted task. For that reason, interrupt entry and exit events are required.
			</li>
			<li>
				<b>inet_sock_local_in, inet_sock_local_out</b>: The network events record a subset of TCP/IP packet header using a netfilter hook in the kernel. The send and receive events are matched to show the communication between distributed processes. Network events are mandatory for analyzing wait in TCP/IP programs, whether they are executing locally or on different computers. They also used to synchronize traces recorded on multiple computers. For further details, refer to the 
				<a href="Trace-synchronization.html#Trace_synchronization">Trace synchronization</a> section.
			</li>
		</ul>
		<p>To analyze a distributed program, all computers involved in the processing must be traced simultaneously. The LTTng Tracer Control of TraceCompass can trace a remote computer, but controlling simultaneous tracing is not supported at the moment, meaning that all sessions must be started separately and interactively. TraceCompass will support this feature in the future. For now, it is suggested to use 
			<a href="https://github.com/giraldeau/lttng-cluster">lttng-cluster</a> command line tool to control simultaneous tracing sessions on multiple computers. This tool is based on 
			<a href="http://www.fabfile.org/">Fabric</a> and uses SSH to start the tracing sessions, execute a workload, stop the sessions and gather traces on the local computer. For more information, refer to the lttng-cluster documentation.
		</p>
		<p>We use the 
			<a href="https://github.com/giraldeau/traces/blob/master/django-vote.tar.gz">Django trace</a> as an example to demonstrate the wait analysis. 
			<a href="https://www.djangoproject.com/">Django</a> is a popular Web framework. The application is the 
			<a href="https://docs.djangoproject.com/en/1.9/intro/tutorial01/">Django Poll app tutorial</a>. The traces were recorded on three computers, namely the client (implemented with Python Mechanize), the Web server (Apache with WSGI) and the database server (PostgreSQL). The client simulates a vote in the poll.
		</p>
		<h3 id="Running_the_analysis">Running the analysis</h3>
		<p>To open all three traces simultaneously, we first create an experiment containing these traces and then synchronize the traces, such that they have a common time base. Then, the analysis is done by selecting a task in the 
			<b>Control Flow View</b>. The result is displayed in the 
			<b>Critical Flow View</b>, which works like the 
			<b>Control Flow View</b>. The steps to load the Django example follows.
		</p>
		<ol>
			<li>Download and extract the 
				<a href="https://github.com/giraldeau/traces/blob/master/django-vote.tar.gz">Django trace</a> archive.
			</li>
			<li>In TraceCompass, open the 
				<a href="#LTTng_Kernel_Perspective">LTTng Kernel Perspective</a>.
			</li>
			<li>Create a new tracing project. Select 
				<b>File -&gt; New -&gt; Tracing -&gt; Tracing Project</b>, choose a name and click 
				<b>Finish</b>.
			</li>
			<li>Under the created tracing project, right-click on 
				<b>Traces</b> and select 
				<b>Import...</b>. In the import dialog, select the root directory containing the extracted trace by clicking on 
				<b>Browse</b>. Three traces should be listed. Select the traces and click 
				<b>Finish</b>. After the import is completed, the traces should be listed below 
				<b>Traces</b>.
			</li>
			<li>Right-click on 
				<b>Experiments</b>, select 
				<b>New...</b> and enter a name for the experiment, such as 
				<b>django</b>.
			</li>
			<li>Right-click on the 
				<b>django</b> experiment and click on 
				<b>Select Traces...</b>. In the dialog, check the three traces 
				<b>django-client</b>, 
				<b>django-httpd</b> and 
				<b>django-db</b>. These traces will appear below the experiment. If the experiment is opened at this stage, the traces are not synchronized and there will be a large time gap between events from different traces.
			</li>
			<li>To synchronize the traces, right-click on the 
				<b>django</b> experiment and select 
				<b>Synchronize Traces</b>. In the 
				<b>Select reference trace</b> dialog, select any available trace and click 
				<b>Finish</b>. Once the synchronization is completed, a new entry with an underline suffix will appear for each modified trace. The created trace entries have a function which is applied to the timestamps of events in order to shift the time according to the reference trace. The 
				<b>Project Explorer</b> after the import is shown below.
				<dl>
					<dd>
						<img border="0" src="images/waitAnalysis/KernelWaitAnalysisProjectExplorer.png"/>
					</dd>
				</dl>
			</li>
			<li>Open the experiment 
				<b>django</b>. The 
				<b>Control Flow</b> and the 
				<b>Resources</b> views should display the three traces simultaneously.
			</li>
			<li>In the main menu, select 
				<b>Window -&gt; Show View -&gt; Other...</b> and under 
				<b>LTTng</b> select 
				<b>Critical Flow View</b>. The view is empty for the moment.
			</li>
			<li>In the 
				<b>Critical Flow View</b>, right-click on the 
				<b>Process</b> entry to analyze and select 
				<b>Follow</b>, as shown in the figure below.
				<dl>
					<dd>
						<img border="0" src="images/waitAnalysis/KernelWaitAnalysisFollow.png"/>
					</dd>
					<dd>The analysis will execute and the result will appear in the 
						<b>Critical Flow View</b>. For the Django example, use the 
						<b>View Filters</b> to search for the python process with TID 2327. When zooming on the execution, the view displays the work done by the Web server and the database to process the request of the python client. Vertical arrows represent synchronization and communication between processes. The legend 
						<img border="0" src="images/show_legend.gif"/> displays the colors associated with the processes states.
					</dd>
				</dl>
			</li>
		</ol>
		<p>
			<img border="0" src="images/waitAnalysis/KernelWaitAnalysisDjango.png"/>
		</p>
		<h2 id="Input.2FOutput_Analysis">Input/Output Analysis</h2>
		<p>TraceCompass can analyse disk input/output through the read/write system calls to get the read/write per processes, but also with the disk request events, to get the actual reads and writes to disk.</p>
		<h3 id="Get_the_trace">Get the trace</h3>
		<p>The following tracepoints should be enabled to get the disk read/write data. Also, enabling syscalls will allow to match the reads and writes per processes.</p>
		<pre>   # sudo lttng list -k
   Kernel events:
   -------------
     ...
     block_rq_complete (loglevel: TRACE_EMERG (0)) (type: tracepoint)
     block_rq_insert (loglevel: TRACE_EMERG (0)) (type: tracepoint)
     block_rq_issue (loglevel: TRACE_EMERG (0)) (type: tracepoint) # on the guest
     block_bio_frontmerge (loglevel: TRACE_EMERG (0)) (type: tracepoint) # on the guest
     ...
</pre>
		<p>For full disk request tracking, some extra tracepoints are necessary. They are not required for the I/O analysis, but make the analysis more complete. Here is the procedure to get those tracepoints that are not yet part of the mainline kernel.</p>
		<pre>   # git clone <a href="https://github.com/giraldeau/lttng-modules.git">https://github.com/giraldeau/lttng-modules.git</a>
   # cd lttng-modules
</pre>
		<p>Checkout the addons branch, compile and install lttng-modules as per the lttng-modules documentation.</p>
		<pre>   # git checkout addons
   # make
   # sudo make modules_install
   # sudo depmod -a
</pre>
		<p>The lttng addons modules must be inserted manually for the extra tracepoints to be available:</p>
		<pre>   # sudo modprobe lttng-addons
   # sudo modprobe lttng-elv
</pre>
		<p>And enable the following tracepoint</p>
		<pre>   addons_elv_merge_requests
</pre>
		<h3 id="Input.2FOutput_Views">Input/Output Views</h3>
		<p>The following views are available for input/output analyses:</p>
		<h4 id="Disk_I.2FO_Activity_View">Disk I/O Activity View</h4>
		<p>A time aligned XY chart of the read and write speed for the different disks on the system. This view is useful to see where there was more activity on the disks and whether it was mostly reads or writes.</p>
		<p>Disk reads and writes can be selected in the tree on the left hand side.</p>
		<p>The time range can be reset by double-clicking the time axis or by clicking the reset button.</p>
		<pre><img title=" Disk I/O Activity Example" alt=" Disk I/O Activity Example" border="0" src="images/io/diskIoActivity.png"/>
</pre>
		<h4 id="Navigation_4">Navigation</h4>
		<p>For navigation, see CPU Usage view's 
			<b>
				<a href="#Using_the_mouse_2">Using the mouse</a>
			</b>, 
			<b>
				<a href="#Using_the_keyboard_2">Using the keyboard</a>
			</b> and 
			<b>
				<a href="#Zoom_region">Zoom region</a>
			</b>.
		</p>
		<h4 id="Toolbar_5">Toolbar</h4>
		<p>The view 
			<b>toolbar</b>, located at the top right of the view, has shortcut buttons to perform common actions.
		</p>
		<p>For details about the see CPU Usage view's 
			<b>
				<a href="#Toolbar_3">Toolbar</a>
			</b>.
		</p>
		<h4 id="View_Menu_3">View Menu</h4>
		<p>The Disk I/O View 
			<b>view menu</b>, located at the top right of the view, has shortcut buttons to perform common actions:
		</p>
		<table>
			<tr>
				<td>New Disk I/O Activity view</td>
				<td>Spawn a new Disk I/O Activity view. The new view can be pinned to a new instance of the current trace, pinned to any opened trace, or unpinned.</td>
			</tr>
			<tr>
				<td>Align Views</td>
				<td>Disable and enable the automatic time axis alignment of time-based views. Disabling the alignment in this view will disable this feature across all the views because it's a workspace preference.</td>
			</tr>
		</table>
		<h2 id="System_Call_Latency_Analysis">System Call Latency Analysis</h2>
		<p>The 
			<b>System Call Latency Analysis</b> measures the system call latency between system call entry and exit per type of system call. The durations are visualized using the 
			<b>Latency</b> views. For more information about the 
			<b>Latency</b> views see chapter 
			<a href="Latency-Analyses.html#Latency_Analyses">Latency Analyses</a>.
		</p>
		<h2 id="Futex_Contention_Latency_Analysis">Futex Contention Latency Analysis</h2>
		<p>The 
			<b>Futex Contention Latency Analysis</b> measures the futexes contention latency between futex entry and exit event for a thread. The durations are visualized using the 
			<b>Latency</b> views. For more information about the 
			<b>Latency</b> views see chapter 
			<a href="Latency-Analyses.html#Latency_Analyses">Latency Analyses</a>.
		</p>
		<p>The following views are also available for the Futex Contention Latency Analysis:</p>
		<h3 id="Uaddr_vs_Waiter">Uaddr vs Waiter</h3>
		<p>A timegraph view of the waiters by futex uaddr. This view is useful to see which threads are waiting on a specific futex and understand blocked threads.</p>
		<p>
			<img title=" uaddr vs waiter example" alt=" uaddr vs waiter example" border="0" src="images/futex/uaddrVsWaiter.png"/>
		</p>
		<h3 id="Scenarios">Scenarios</h3>
		<p>A timegraph view of the futex wait/lock and wake/unlock scenarios (from futex entry to futex exit). This view is useful to suss up the general level of contention in a given trace. It highlights futex lifespans.</p>
		<p>
			<img title=" scenario example" alt=" scenario example" border="0" src="images/futex/scenario.png"/>
		</p>
		<h2 id="Latency_analysis_for_IRQ_handlers">Latency analysis for IRQ handlers</h2>
		<p>The 
			<b>Latency analysis for IRQ handlers</b> measures the latency between the IRQ handlers entry and exit events.
			The durations are visualized using the 
			<b>Latency</b> views. For more information about the 
			<b>Latency</b> views see chapter 
			<a href="Latency-Analyses.html#Latency_Analyses">Latency Analyses</a>.
		</p>
		<h2 id="LTTng_Kernel_Events_Editor">LTTng Kernel Events Editor</h2>
		<p>The LTTng Kernel Events editor 
			<b>is</b> the plain TMF 
			<a href="Trace-Compass-Main-Features.html#Events_Editor">Events Editor</a>, except that it provides its own specialized viewer to replace the standard one. In short, it has exactly the same behaviour but the layout is slightly different:
		</p>
		<ul>
			<li>
				<b>Timestamp</b>: the event timestamp
			</li>
			<li>
				<b>Channel</b>: the event channel (data collector)
			</li>
			<li>
				<b>CPU</b>: the CPU on which the event was taken
			</li>
			<li>
				<b>Event Type</b>: the event type (or kernel marker)
			</li>
			<li>
				<b>Contents</b>: the fields (or payload) of this event
			</li>
			<li>
				<b>TID</b>: The ID of the thread this event belongs to
			</li>
			<li>
				<b>Prio</b>: The priority of the thread this event belongs to
			</li>
		</ul>
		<p>
			<img border="0" src="images/LTTng2EventsEditor.png"/>
		</p><hr class="navigation-separator"/>
		<table class="navigation" style="width: 100%;" border="0" summary="navigation">
			<tr>
				<td style="width: 20%" align="left">
					<a href="LTTng-Tracer-Control.html" title="LTTng Tracer Control">
						<img alt="Previous" border="0" src="images/prev.gif"/>
					</a>
				</td>
				<td style="width: 60%" align="center">
					<a href="User-Guide.html" title="Trace Compass User Guide">
						<img alt="Trace Compass User Guide" border="0" src="images/home.gif"/>
					</a>
				</td>
				<td style="width: 20%" align="right">
					<a href="LTTng-UST-Analyses.html" title="LTTng-UST Analyses">
						<img alt="Next" border="0" src="images/next.gif"/>
					</a>
				</td>
			</tr>
			<tr>
				<td style="width: 20%" align="left" valign="top">LTTng Tracer Control</td>
				<td style="width: 60%" align="center"></td>
				<td style="width: 20%" align="right" valign="top">LTTng-UST Analyses</td>
			</tr>
		</table>
	</body>
</html>
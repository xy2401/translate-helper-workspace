<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="using-docker-compose-as-a-remote-interpreter.html"><meta charset="UTF-8"><title>Configure a remote interpreter using Docker Compose - Help | PyCharm</title><link rel="stylesheet" href="../app/v2/app.css"></head><body data-id="add_interpreter_docker_compose"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search PyCharm Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="using-docker-compose-as-a-remote-interpreter.html#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="add_interpreter_docker_compose" id="Using_Docker_Compose_as_a_Remote_Interpreter.xml">Configure a remote interpreter using Docker Compose</h1>             <aside class="warning " data-title="" rel="Using_Docker_Compose_as_a_Remote_Interpreter.xml" id="91d31bba"><p>        This feature is only supported in the <b id="3aee4c4b" origin="intellij-platform">Professional</b> edition.         This edition is commercial, and it provides an outstanding set of features:          see the <a href="https://www.jetbrains.com/pycharm/features/editions_comparison_matrix.html" data-bypass="yes" target="_blank"><span>comparison matrix</span></a> for more details.    </p></aside>    <div class="chapter"><h2 id="prereq" data-toc="add_interpreter_docker_compose#prereq">Prerequisites</h2>        <p id="c1c60257">Make sure that the following prerequisites are met:</p>                        <ul class="list _ul"><li class="list__item" id="b9f23f96">                <p id="15b22ca8">Docker is installed. You can install Docker on the various platforms, but here we'll use the                    <a href="https://docs.docker.com/docker-for-windows/" data-bypass="yes" target="_blank"><span>Windows</span></a>                                        installation.                </p>                <p id="e0b328d3">Note that you might want to repeat this tutorial on different platforms; then use Docker installations                    for <a href="https://docs.docker.com/docker-for-mac/" data-bypass="yes" target="_blank"><span>macOS</span></a>                                        and                    <a href="https://docs.docker.com/engine/installation/linux/ubuntu/" data-bypass="yes" target="_blank"><span>Linux</span></a> (Ubuntu, other                    distributions-related instructions are available as well). </p>            </li><li class="list__item" id="0c4cdfd6">        <p id="e169be44">Before you start working with Docker, make sure that the Docker Integration and Python Docker plugins are enabled.        The plugins are bundled with PyCharm and activated by default. If the plugins are not activated,            enable them on the <a href="plugins-settings.html"><span>Plugins</span></a> page of the <a href="settings-preferences-dialog.html"><span>Settings / Preferences Dialog</span></a> as described in            <a href="managing-plugins.html"><span>Managing plugins</span></a>.</p>                </li></ul>    </div>    <div class="chapter"><h2 id="example" data-toc="add_interpreter_docker_compose#example">Preparing an example</h2>              <p id="e28cc0ff">We could have actually repeated the        <a href="using-docker-as-a-remote-interpreter.html#example">same example</a> as was used for Docker,            but for Docker Compose it makes no sense - too simple...</p>        <p id="33b8aa78">To show a realistic example of a Docker Compose application, we'll use a Django application with a            PostgreSQL database running in a separate container.            <a href="https://github.com/ErnstHaagsman/djangodocker" data-bypass="yes" target="_blank"><span>Get the project from GitHub,</span></a>            and open it in PyCharm (<span data-skip-index="skip" class="menupath">File | Open</span>).</p>        <p id="d56e5d3a">For this Django application, we should create two containers: one for a database, and one for the            application itself. We'll use the Docker Compose to link the two containers together. </p>                </div>    <div class="chapter"><h2 id="dockerfile" data-toc="add_interpreter_docker_compose#dockerfile">Adding files for Docker and Docker Compose</h2>        <p id="730f3b6f">In the Project tool window, right-click the project root and choose <span data-skip-index="skip" class="menupath">New | File</span>            (<kbd data-primary_default="Alt+Insert" data-primary_default_for_gnome="Alt+Insert" data-primary_default_for_kde="Alt+Insert" data-primary_default_for_xwin="Alt+Insert" data-primary_emacs="Alt+Insert" data-primary_visual_studio="Ctrl+N" data-primary_netbeans="Alt+Insert" data-primary_eclipse="Alt+Insert" data-secondary_mac_os_x_10.5_="⌘N" data-secondary_mac_os_x="⌃N" data-secondary_eclipse_mac_os_x="⌘N" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌃N" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="N/A">Alt+Insert</kbd>), enter the filename (here <code class="code">Dockerfile</code>) and enter the following            code:</p>        <div class="code-block" data-lang="Generic"><code class="code-block__wrapper">FROM python:3.6

WORKDIR /app

<span class="c"># By copying over requirements first, we make sure that Docker will cache</span>
<span class="c"># our installed requirements rather than reinstall them on every build</span>
COPY requirements.txt /app/requirements.txt
RUN pip install -r requirements.txt

<span class="c"># Now copy in our code, and run it</span>
COPY . /app
EXPOSE 8000
CMD <span class="o">[</span><span class="s2">&quot;python&quot;</span>, <span class="s2">&quot;manage.py&quot;</span>, <span class="s2">&quot;runserver&quot;</span>, <span class="s2">&quot;0.0.0.0:8000&quot;</span><span class="o">]</span></code></div>                <p id="docker-compose">Next, repeat the same steps for the <code class="code">docker-compose.yml</code> file and enter the following            code:</p>        <div class="code-block" data-lang="Generic"><code class="code-block__wrapper">version: <span class="s1">&#39;2&#39;</span>
services:
    web:
        build: .
        ports:
            - <span class="s2">&quot;8000:8000&quot;</span>
        volumes:
            - .:/app
        links:
            - db

    db:
        image: <span class="s2">&quot;postgres:9.6&quot;</span>
        ports:
            - <span class="s2">&quot;5432:5432&quot;</span>
        environment:
            POSTGRES_PASSWORD: hunter2</code></div>                <p id="2815bb7a">Let's look at the <code class="code">docker-compose.yml</code> file. This file defines 2 services:            <code class="code">web</code> and <code class="code">db</code>, and links them together. </p>            </div>    <div class="chapter"><h2 id="configuring-docker" data-toc="add_interpreter_docker_compose#configuring-docker">Configuring Docker</h2>        <p id="92d24334">Now that we've prepared our example, let's configure Docker. </p>        <p id="5062b5db">To do that, open Settings             dialog (<kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌥F7" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl+Alt+S</kbd> or click <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.settings.svg@2x.png" width="16" alt="Settings">            on the main toolbar) and click the <a href="docker-connection-settings.html"><span>Docker</span></a> page under the            <span class="control">Build, Execution, Deployment</span> node. Click <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="Add a docker server"> to create a Docker server.</p>        <p id="d7d256c1">Accept the suggested default values:</p>        <figure><img alt="Docker settings" title="Docker settings" src="../img/idea/2019.1/py_docker_settings.png" id="9b03ac8e" width="763" height="933"></figure>                <p id="60f7f4f4">For macOS, select <span class="control">Docker for Mac</span> to connect to the Docker daemon. </p>        <figure><img alt="Docker settings" title="Docker settings" src="../img/idea/2019.1/py_docker_settings_mac.png" id="11c89a1d" width="801" height="970"></figure>        <p id="46149753">Next, apply changes. </p>    </div>    <div class="chapter"><h2 id="docker-compose-remote" data-toc="add_interpreter_docker_compose#docker-compose-remote">Configuring Docker Compose as a remote interpreter</h2>        <p id="79dc6282">Let's now define a remote interpreter based on Docker-Compose.</p>                                                    <p id="b3afd240">Open the <span class="control">Add Python Interpreter</span> dialog by either way:</p>            <ul class="list _ul"><li class="list__item" id="b59f5852"><p>When you're in the <span class="control">Editor</span>, the most convenient way is to use the <span class="control">Python Interpreter</span> widget in the <a href="status-bar.html#python-interpreter-widget"><span>Status bar</span></a>. Click the widget and                    select <span data-skip-index="skip" class="menupath">Add Interpreter ...</span></p></li><li class="list__item" id="a91cc8d3"><p id="dd65d1ef">If you are in the <span class="control">Settings/Preferences</span> dialog (<kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌥F7" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl+Alt+S</kbd>), select <span data-skip-index="skip" class="menupath">Project &lt;project name&gt; | Project Interpreter</span>.                    Click the <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.gearPlain.svg@2x.png" width="16" alt="The Configure project interpreter"> icon and select <span class="control">Add</span>.</p></li></ul>                        <p id="8b783fd4">In the dialog that opens, select the <span class="control">Docker Compose</span> option,                from the drop-down lists select the Docker server, Docker Compose service (here <code class="code">web</code>),                configuration file (here <code class="code">docker-compose.yml</code>)and image name (here <code class="code">python</code>).</p>            <p id="68e94154">Why we've chosen <code class="code">web</code>? This choice is explained by the fact, that after configuring a                Docker-Compose-based interpreter, we'll be able to create regular run configurations that will alter the                behavior of the container we selected. Therefore, if we want to debug the code in a container, that's the                one we should select here. All other containers in the compose file will always be started together with                this one, but you won't be able to affect their behavior from PyCharm - they'll always behave as if you                started them with the command <code class="code">docker-compose up</code> from the command line.</p>            <p id="d3378fe6">Next, wait while PyCharm starts your Docker-Compose configuration to scan and index:</p>                        <figure><img alt="Configure remote Python interpreter" title="Configure remote Python interpreter" src="../img/idea/2019.1/py_docker_as_remote.png" id="4fa7608c" width="904" height="1106"></figure>                                             </div>    <div class="chapter"><h2 id="tw" data-toc="add_interpreter_docker_compose#tw">Using the Docker tool window</h2>        <p id="bce8f9eb">Since we've <a href="using-docker-compose-as-a-remote-interpreter.html#configuring-docker">configured            Docker</a>, the Docker tool window button appears at the bottom of PyCharm's main window.</p>                <p id="2c0b5626">Click this button and see your container running:</p>        <figure><img alt="Docker window" title="Docker window" src="../img/idea/2019.1/py_docker_running_container.png" id="0948c1fa" width="400" height="660"></figure>            </div>    <div class="chapter"><h2 id="db_Settings" data-toc="add_interpreter_docker_compose#db_Settings">Configuring database credentials</h2>        <p id="f153179a">Modify the <code class="code">DATABASES</code> section of the <code class="code">settings.py</code> file in your Django project to add database configuration details:</p>        <div class="code-block" data-lang="Python"><code class="code-block__wrapper"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;django.db.backends.postgresql&#39;</span><span class="p">,</span>
        <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;postgres&#39;</span><span class="p">,</span>
        <span class="s">&#39;USER&#39;</span><span class="p">:</span> <span class="s">&#39;postgres&#39;</span><span class="p">,</span>
        <span class="s">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s">&#39;hunter2&#39;</span><span class="p">,</span>
        <span class="s">&#39;HOST&#39;</span><span class="p">:</span> <span class="s">&#39;db&#39;</span>
    <span class="p">}</span>
<span class="p">}</span></code></div>    </div>    <div class="chapter"><h2 id="run" data-toc="add_interpreter_docker_compose#run">Running your application under Docker-Compose</h2>        <p id="f299559c">First, as we are executing a Django application, we must run a migration.</p>                <p id="920a07fc">To do that, choose <span data-skip-index="skip" class="menupath">Tools | Run 'manage.py' task</span> and enter <code class="code">migrate</code>:</p>        <figure><img alt="manage.py task is running in the Docker" title="manage.py task is running in the Docker" src="../img/idea/2019.1/py_docker_run_manage_py_task.png" id="b3f9050f" width="743" height="798"></figure>            <p id="419b5ceb">(See <a href="running-manage-py.html"><span>Running Tasks of manage.py Utility</span></a> for details.)</p>        <p id="60d15598">Next, create an ordinary Django server run/debug configuration. To do that, on the main menu choose        <span data-skip-index="skip" class="menupath">Run | Edit Configurations...</span>; in the dialog that opens click <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="Add Run/Debug configuration for a Django Server"> and        select <span class="control">Django Server</span>:</p>            <figure><img alt="Run/Debug configuration for a Django server" title="Run/Debug configuration for a Django server" src="../img/idea/2019.1/py_docker_run_django_server.png" id="7b63512e" width="1453" height="1131"></figure>            <p id="9b1e1ec9">            <span class="emphasis">The only thing you should pay attention to, is that <span class="control">Host</span> field must be set to                <code class="code">0.0.0.0</code> - to make sure that we listen to requests coming from outside the Docker container.            </span>            </p>            <p id="1a74539d">Launch this configuration (<span data-skip-index="skip" class="menupath">Run | Run 'RunDjangoApp'</span>): </p>            <figure><img alt="Docker compose run" title="Docker compose run" src="../img/idea/2019.1/py_docker_compose_run.png" id="e9959a87" width="2178" height="378"></figure>            <p id="1">To see output in your web browser, go to <a href="http://localhost:8000" data-bypass="yes" target="_blank"><span>http://localhost:8000</span></a>                (in the address bar, change <code class="code">0.0.0.0</code> to <code class="code">localhost</code>): </p>            <figure><img alt="Django application output" title="Django application output" src="../img/idea/2019.1/py_docker_django_app_result.png" id="ccca01ea" width="891" height="281"></figure>            <aside class="tip sideblock" data-title="" rel="1" id="0f769be6">                <p id="55c9ce29">If you are using the Docker Machine, use the machine's IP address instead.</p>            </aside>                    </div>        <div class="chapter"><h2 id="summary" data-toc="add_interpreter_docker_compose#summary">Summary</h2>        <p id="c1811070">Let's summarize what has been done with the help of PyCharm:</p>        <ul class="list _ul"><li class="list__item" id="5ebc04e3"><p>We downloaded a Django application from GitHub and opened it.</p></li><li class="list__item" id="17ae2924"><p>We added specific Docker Compose files to our project.</p></li><li class="list__item" id="d69727da"><p>We configured a remote interpreter based on Docker Compose.</p></li><li class="list__item" id="1576166c"><p>We ran our Django application in the Docker Compose container.</p></li></ul>    </div>    <div class="last-modified" data-skip-index="skip">Last modified: 28 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="using-docker-as-a-remote-interpreter.html">Configure a remote interpreter using Docker</a><a class="navigation-links__next" href="installing-uninstalling-and-upgrading-packages.html">Install, uninstall, and upgrade packages</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>See Also</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>Languages, Frameworks and Technologies:</h3><ul class="list"><li class="list__item"><a href="debugging-django-templates.html"><span>Debugging Django Templates</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>Reference:</h3><ul class="list"><li class="list__item"><a href="docker-connection-settings.html"><span>Docker</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>


























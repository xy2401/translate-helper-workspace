<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="debugging-with-spy-js.html"><meta charset="UTF-8"><title>Spy-js - Help | WebStorm</title><link rel="stylesheet" href="../app/v2/app.css"></head><body data-id="Debugging_with_Spy-js"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search WebStorm Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="debugging-with-spy-js.html#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>WebStorm 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="true"><h1 data-toc="Debugging_with_Spy-js" id="Debugging_with_Spy-js.xml">Spy-js</h1>                <p id="spy_js_intro">        Spy-js is a tool for  debugging, tracing, and  profiling JavaScript running on different platforms/browsers/devices        as well as server-side Node.js applications.            Spy-js recognizes source maps so you can trace applications with CoffeeScript        and TypeScript code.                            See                <a href="coffeescript.html#ws_coffee_debug">Debugging CoffeeScript</a> and                <a href="using-file-watchers.html"><span>Using File Watchers</span></a>                for details.                    </p>    <p id="c60a45a7">        With WebStorm, you can trace your applications during a SpyJS-specific debugging session and explore the results        in the dedicated UI.    </p><p id="bddbc3a7">        To trace a script, Spy-js modifies it on the fly by inserting instrumentation instructions that report back to Spy-js UI about            what functions have been invoked when the script executes.    </p>    <p id="86a22bee">        Spy-js uses different mechanisms for tracing Web applications and Node.js applications.        <ul class="list _bullet"><li class="list__item" id="41a169e8"><p>                To modify website scripts, Spy-js has to act as a proxy server that "sits" between your browser and the website you are tracing.                When you open a traced website in your browser, Spy-js receives the script request, requests the script from your website, receives the script,                makes the required modifications, and sends it back to your browser where the script executes, and sends the runtime information to the Spy-js UI.            </p></li><li class="list__item" id="9f954215"><p>                In case of a Node.js application, Spy-js cannot get between the Node.js server and the scripts if the application is already running.                Therefore to trace a Node.js application, spy-js launches the Node.js server and the application itself.                This enables Spy-js to intercept and modify script requests and scripts, whereupon the tracing procedure runs as when tracing a website script.            </p></li></ul>    </p>    <aside class="tip sideblock" data-title="" rel="spy_js_intro" id="72be8e03">        <p id="cc570216">                    Before you start, make sure you have <a href="http://nodejs.org/" data-bypass="yes" target="_blank"><span>Node.js</span></a> on your computer.            </p>    </aside>        <div class="chapter"><h2 id="ws_spy_js_ui" data-toc="Debugging_with_Spy-js#ws_spy_js_ui">Spy-js UI</h2>    <p id="66f6d57e">            All the tracing-related activities, such as viewing captured events, examining their call stacks, navigating to the source code, etc.            are performed in the dedicated        <a href="spy-js-tool-window.html">Spy-js Tool Window</a>, in particular in its        <a href="trace-run-tab.html">Trace Run Tab</a>.        The tab consists of a toolbar and three panes:    </p>    <ul class="list _bullet"><li class="list__item" id="524a8103">            <span class="control">Events Pane</span>                <p id="940d3bda">        The pane shows a tree of captured events. The top-level nodes represent <span class="emphasis">documents</span> that are Web pages involved in tracing.        When you hover the mouse over a <span class="emphasis">document</span>, WebStorm displays a tooltip with the URL address of the <span class="emphasis">document</span>, the browser in which it is opened,        and the operating system the browser is running on. The <span class="emphasis">document</span> node is also supplied with an icon that indicates the browser in which it is opened.    </p>    <p id="59251a2f">        Under each <span class="emphasis">document</span> node, events detected on the page and scripts started from it are listed.        Events of the same type are grouped into visual containers. The header of a container displays the name of the events grouped in it,        the average execution time across all the events within the container, and the number of events inside the container.        You can expand each node  and inspect the individual events in it.    </p>    <p id="d8c4a63c">        Script file names have different colour indicators to help distinguishing between them when working with the <span class="control">Event Stack</span> pane.        By hovering your mouse over a script file name, you can see the full script URL.    </p>    <p id="4316ec05">        Once an event is clicked, its call stack is displayed in the <span class="control">Event Stack</span> pane. The stack is represented by a tree of function calls.    </p>            </li><li class="list__item" id="dec6f462">            <span class="control">Event Stack Pane</span>                <p id="f5b46723">        Once an event in the <span class="control">Events</span> pane is clicked, its call stack is displayed in the <span class="control">Event Stack</span> pane. The stack is represented by a tree of function calls.        Each tree node represents the invoked function. Node text contains the total execution time, the script file name and the function name.        When you click a node, the <span class="control">Quick Evaluation</span> pane shows additional function call details, parameter values and return value,        occurred exception details if there was one during the function execution.    </p>    <p id="ff07854f">        The pane is synchronized with the editor, so you can navigate from an item in the stack tree to the corresponding <span class="emphasis">trace file</span> or <span class="emphasis">source file</span>.        <ul class="list _bullet"><li class="list__item" id="7b14990b">                        A <span class="emphasis">trace file</span> is a write-protected prettified version of a script. A is named <code class="code">&lt;script name&gt;.js.trace</code>.                    When you double click an item in the stack tree or select it and choose <span class="control">Jump to Trace</span> on the context menu of the selection,                the corresponding <span class="emphasis">trace file</span> opens in the editor with the cursor positioned at the clicked function.                Another approach is to press the <span class="control">Autoscroll to Trace</span> toggle button and select various stack nodes.                In this case, the trace file opens when you click an event or script in the <span class="control">Events</span> pane.                <p id="4ce65e3c">                    You can not only jump to a function but also to the place in the code where it was called from. To do that, select the required item                    and choose <span class="control">Jump to Caller</span> on the context menu.                </p>                <p id="a589733c">                    The contents of the file are highlighted to display the code execution path of the selected stack node.                </p>            </li><li class="list__item" id="d75e33e3"><p>                When you are tracing an application with <span class="emphasis">ECMASript6</span>, <span class="emphasis">CoffeeScript</span>,                and <span class="emphasis">TypeScript</span> code,                        <span class="emphasis">Spy-js</span> also generates <span class="emphasis">mapped trace files</span>. These are <span class="emphasis">EcmaScript 6</span>, <span class="emphasis">TypeScript</span>,        or <span class="emphasis">CoffeeScript</span> trace files with the extensions <code class="code">.ts.trace</code>, <code class="code">.coffee.trace</code>,        or <code class="code">.js.trace</code>. The fragments of code in these files are highlighted as if they were really executed.                </p></li><li class="list__item" id="6fe6d272">                                You can also navigate to the <span class="emphasis">source file</span> displayed as is, without prettifying,                 by selecting an item in the <span class="control">Event Stack</span> pane                and choosing <span class="control">Jump to Source</span> on the context menu of the selection.                                        If the traced site is mapped with a WebStorm project, WebStorm detects the corresponding local file                        according to the mapping and opens this file in the editor. If you are tracing a site that is not mapped to a WebStorm project, WebStorm opens the read-only <span class="emphasis">page source</span>,                        just as if you chose <span class="control">View Page Source</span> in the browser.                                                    <p id="e73a59c2">                        When the traced site is mapped with a WebStorm project, WebStorm opens the <span class="emphasis">source file</span> on any attempt to edit the opened <span class="emphasis">trace file</span>.                    </p>                            </li></ul>    </p>                </li><li class="list__item" id="2f83f272">            <span class="control">Quick Evaluation Pane</span>                <p id="986ff544">        When you click a node in the <span class="control">Event Stack</span> pane, the <span class="control">Quick Evaluation</span> pane shows additional function call details,        parameter values and return value, occurred exception details if there was one during the function execution.    </p>            </li></ul>    </div>    <div class="chapter"><h2 id="createRunConfiguration" data-toc="Debugging_with_Spy-js#createRunConfiguration">Starting a Spy-js tracing session</h2>        <p id="fccd8e02">            From WebStorm, Spy-js is started with a run/debug configuration of the type  <span class="emphasis">Spy-js</span> for tracing Web applications            or of the type <span class="emphasis">Spy-js for Node.js</span> for tracing Node.js applications.        </p>        <section class="procedure-steps"><h2 id="spy_js_web_app_create_run_config">To create a Spy-js debug configuration</h2><ol class="list _decimal"><li class="list__item" id="1da2f43e"><p>                                        Click <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add@2x.png" width="16" alt="icons general add"> on the toolbar  and select <span class="control">Spy-js</span> from the list.                    The <a href="run-debug-configuration-spy-js.html"><span>Run/Debug Configuration: Spy-js</span></a> dialog box opens.            </p></li><li class="list__item" id="e262e642"><p>                Specify the Node.js interpreter to use.            </p></li><li class="list__item" id="ca8d7644">                The trace server port.                        This port number must be the same as your system proxy port.        If the <span class="control">Automatically configure system proxy</span> checkbox is selected, the specified port number is automatically set for the system proxy server.        Otherwise you will have to specify the value of the field in the system proxy settings manually.        <p id="6d668895">            The <span class="emphasis">trace server port</span> is filled in automatically. To avoid port conflicts, it is recommended that you accept the suggested value            and keep the <span class="control">Automatically configure system proxy</span> checkbox selected.        </p>                </li><li class="list__item" id="c0e18092">                To activate the system proxy server automatically with the port from the <span class="control">Trace server port</span> field,                select the <span class="control">Automatically configure system proxy</span> checkbox.                <p id="8083b227">                Alternatively, clear the checkbox to specify the proxy settings manually.                    clear the <span class="control">Automatically configure system proxy</span> checkbox.                            See how to configure proxy settings manually on <a href="http://answers.oreilly.com/topic/675-how-to-configure-proxy-settings-in-windows-7/" data-bypass="yes" target="_blank"><span>Windows</span></a>,        <a href="http://support.apple.com/kb/PH7050" data-bypass="yes" target="_blank"><span>Mac</span></a>, <a href="http://www.ubuntugeek.com/how-to-configure-ubuntu-desktop-to-use-your-proxy-server.html" data-bypass="yes" target="_blank"><span>Ubuntu</span></a>,        <a href="http://www.allanonymity.com/billing/knowledgebase/11/How-to-configure-proxy-usage-for-iPadorIphone.html" data-bypass="yes" target="_blank"><span>iOS</span></a>,        <a href="http://www.youngzsoft.net/ccproxy/how-to-make-proxy-settings-on-android-phone.htm" data-bypass="yes" target="_blank"><span>Android</span></a>,        <a href="http://forum.xda-developers.com/showthread.php?t=1106268" data-bypass="yes" target="_blank"><span>Windows Phone</span></a>.        Please note that some desktop browsers have their own screens for proxy settings configuration.                    </p>            </li><li class="list__item" id="02ca66dd">                From the <span class="control">Use</span> list, choose the way to specify the way to configure a tracing session.                        <ul class="list _bullet"><li class="list__item" id="37929e79"><p>                To have <span class="emphasis">Spy-js</span> apply its internal predefined configuration, choose <span class="control">Default configuration</span>.            </p></li><li class="list__item" id="3e54928d">                To have your custom manually created configuration applied, choose the <span class="control">Configuration file</span> option and then specify the location of your custom configuration file in the                <span class="control">Configuration</span> field below.                        <p id="222d8eb2">            A <span class="emphasis">configuration file</span> is a JavaScript file with the extension <code class="code">.js</code> or <code class="code">.conf.js</code>            that contains valid JavaScript code that meets the <a href="https://github.com/spy-js/spy-js#configuration" data-bypass="yes" target="_blank"><span>Spy-js configuration requirements</span></a>.            If WebStorm detects files with the extension <code class="code">.conf.js</code> in the project, these files are displayed in the drop-down list.        </p>        <p id="6a5e4af7">            Type the path to the configuration file manually or click <span class="control">Browse</span> <img alt="browseButton" title="browseButton" src="../img/idea/2019.1/browseButton.png" id="b0ab34fb" width="15" height="15" class="inline-icon-15"> and choose the location in the dialog box that opens.            Once specified, a configuration file is added to the drop-down list so you can get if next time from the list instead of specifying the path.        </p>                </li></ul>                </li></ol></section>        <section class="procedure-steps"><h2 id="7112b9af">To start tracing a Web application</h2><ol class="list _decimal"><li class="list__item" id="79f34fb1"><p>                Choose the <a href="debugging-with-spy-js.html#spy_js_web_app_create_run_config">newly created configuration</a>                in the <span class="control">Select run/debug configuration</span> drop-down                list on the toolbar and click <img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.startDebugger.svg@2x.png" width="16" alt="icons actions startDebugger svg">.                The <a href="spy-js-tool-window.html">Spy-js Tool Window</a> opens with an empty <span class="control">Trace Run</span> tab                and a <span class="control">Trace Proxy Server</span> tab informing you about the status of the proxy server.            </p></li><li class="list__item" id="b08d8b35"><p>                Switch to the browser and refresh the page to start debugging from. Spy-js starts capturing events on this page                and the <span class="control">Spy-js</span> tool window shows them in the <span class="control">Events</span> pane.            </p></li></ol></section>        <section class="procedure-steps"><h2 id="spy_js_node_app_create_run_config">To create a Spy-js for Node.js debug configuration</h2><ol class="list _decimal"><li class="list__item" id="dd275d32"><p>                                        Click <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add@2x.png" width="16" alt="icons general add"> on the toolbar  and select <span class="control">Spy-js for Node.js</span> from the list.                    The <a href="run-debug-configuration-spy-js-for-node-js.html">Run/Debug Configuration: Spy-js for Node.js</a> dialog box opens.            </p></li><li class="list__item" id="a1a203ae"><p>                                                Specify the Node.js interpreter to use. This can be a <a href="developing-node-js-applications.html#ws_node_configure_local_node_interpreter">local Node.js interpreter</a>            or a <a href="developing-node-js-applications.html#ws_node_wsl">Node.js on Windows Subsystem for Linux</a>.                                </p></li><li class="list__item" id="f858db59">                Specify the JavaScript file to start the application with.                        <p id="898777cc">            If you are going to trace CoffeeScript, specify the path to the generated JavaScript file. The file can be generated externally            or through compilation using file watchers.                            For more details, see <a href="coffeescript.html#ws_coffee_debug">Debugging CoffeeScript</a>.                    </p>                        </li><li class="list__item" id="478cd711">                Specify the trace server port.                        This port number must be the same as your system proxy port.        If the <span class="control">Automatically configure system proxy</span> checkbox is selected, the specified port number is automatically set for the system proxy server.        Otherwise you will have to specify the value of the field in the system proxy settings manually.        <p id="e59dbee0">            The <span class="emphasis">trace server port</span> is filled in automatically. To avoid port conflicts, it is recommended that you accept the suggested value            and keep the <span class="control">Automatically configure system proxy</span> checkbox selected.        </p>                </li><li class="list__item" id="64cf2765">                Specify the configuration file  with the configuration settings to apply to the tracing session.                        <p id="bd41568f">            A <span class="emphasis">configuration file</span> is a JavaScript file with the extension <code class="code">.js</code> or <code class="code">.conf.js</code>            that contains valid JavaScript code that meets the <a href="https://github.com/spy-js/spy-js#configuration" data-bypass="yes" target="_blank"><span>Spy-js configuration requirements</span></a>.            If WebStorm detects files with the extension <code class="code">.conf.js</code> in the project, these files are displayed in the drop-down list.        </p>        <p id="0e222c58">            Type the path to the configuration file manually or click <span class="control">Browse</span> <img alt="browseButton" title="browseButton" src="../img/idea/2019.1/browseButton.png" id="24f53161" width="15" height="15" class="inline-icon-15"> and choose the location in the dialog box that opens.            Once specified, a configuration file is added to the drop-down list so you can get if next time from the list instead of specifying the path.        </p>                </li><li class="list__item" id="5bc2e377">                Optionally:                <ul class="list _bullet"><li class="list__item" id="496c18fb"><p>                        Type the <span class="control">Node Parameters</span> that customize the start of Node.js.                                For example, to enable tracing        <a href="http://www.ecma-international.org/ecma-262/6.0/" data-bypass="yes" target="_blank"><span>ECMAScript 6</span></a> scripts,        specify <code class="code">--harmony</code> as a Node parameter. Note that Node.js must be version 0.11.13 or higher.                        </p></li><li class="list__item" id="2e949a0a"><p>                        Choose <a href="http://en.wikipedia.org/wiki/Working_directory" data-bypass="yes" target="_blank"><span>working directory</span></a> of the application.                                        By default, the field shows the <span class="emphasis">project root folder</span>.                        </p></li><li class="list__item" id="2951d4e5"><p>                        Specify          the Node.js-specific arguments to be passed to the application on start        through the <a href="http://nodejs.org/docs/latest/api/process.html#process.argv" data-bypass="yes" target="_blank"><span>process.argv</span></a> array.                        </p></li><li class="list__item" id="39352582"><p>                        Specify the <a href="http://en.wikipedia.org/wiki/Environment_variable" data-bypass="yes" target="_blank"><span>environment variables</span></a> for the Node.js executable file, if applicable.                        See <a href="run-debug-configuration-spy-js-for-node-js.html"><span>Run/Debug Configuration: Spy-js for Node.js</span></a> for details.                    </p></li></ul>            </li></ol></section>        <section class="procedure-steps"><h2 id="c822c461">To start tracing a Node.js application</h2><ul class="list _no-style"><li class="list__item" id="7c037ffb"><p>                Choose the <a href="debugging-with-spy-js.html#spy_js_node_app_create_run_config">newly created configuration</a>                in the <span class="control">Select run/debug configuration</span> drop-down                list on the toolbar and click <img class="inline-icon-16" src="../img/idea/2019.1/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="icons toolwindows toolWindowRun svg">.            The <a href="spy-js-tool-window.html">Spy-js Tool Window</a> opens showing the captured events in the <span class="control">Trace Run</span> tab.            </p></li></ul></section>    </div>    <div class="chapter"><h2 id="ws_spy_js_saving_and_loading_tracing_session" data-toc="Debugging_with_Spy-js#ws_spy_js_saving_and_loading_tracing_session">Saving and loading tracing sessions</h2><aside class="tip sideblock" data-title="" rel="ws_spy_js_saving_and_loading_tracing_session_load_start_spy_js" id="8a461bbd">    <p id="a2f20b34">        If you load an image while actually tracing an application, the currently running session is lost.    </p></aside>        <p id="951de919">                    Spy-js stores the calls and properties of a tracing session in <code class="code">.json</code> files that can be compressed        into a <code class="code">zip</code> archive. You can extract them at any time later to load the tracing session image into Spy-js.                        Note that a loaded image does not restore the session because no scripts are actually executed. All you can do is analyze the flow and properties of previously executed code.            </p>        <section class="procedure-steps"><h2 id="982efc67">To save an image of a tracing session</h2><ul class="list _no-style"><li class="list__item" id="1c3e8cf2"><p>                Click <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.gearPlain.svg@2x.png" width="16" alt="icons general gearPlain svg"> on the <span class="control">Events</span> toolbar,                and then choose <span class="control">Save trace</span> from the list.                WebStorm compresses all the affected <code class="code">.json</code> files in a <code class="code">zip</code> archive and opens the folder where the archive is saved.            </p></li></ul></section>        <section class="procedure-steps"><h2 id="6fe4f965">To load an image of a previous tracing session</h2><ol class="list _decimal"><li class="list__item" id="ws_spy_js_saving_and_loading_tracing_session_load_start_spy_js"><p>                To activate Spy-js, start a tracing session of the same type as the session saved in the image, Spy-js or a Spy-js for Node.js respectively,                see <a href="debugging-with-spy-js.html#createRunConfiguration">Initiating a Spy-js Tracing Session</a> above.            </p></li><li class="list__item" id="b98cc1ed"><p>                Click the <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.gearPlain.svg@2x.png" width="16" alt="icons general gearPlain svg"> button on the <span class="control">Events</span> toolbar and choose <span class="control">Load Trace</span> from the list.            </p></li><li class="list__item" id="1e37194f"><p>                In the dialog box that opens, choose the location of the <code class="code">zip</code> archive with the image of the desired session.                Spy-js  stops the running and shows the loaded trace in a new tab named <span class="control">Loaded &lt;loaded session&gt;</span>.            </p></li></ol></section>    </div>    <div class="chapter"><h2 id="ws_spy_js_configuring_range_of_events_to_display" data-toc="Debugging_with_Spy-js#ws_spy_js_configuring_range_of_events_to_display">Configuring the event capturing policy</h2>        <p id="a13a4893">                    By default, Spy-js captures all events on all opened Web pages, excluding <span class="emphasis">https secure</span> web sites,        unless you specify their URL addresses explicitly in the run configuration.        All the captured events are shown on the <span class="control">Events</span> pane of the <span class="control">Spy-js</span> tool window.        You can suppress capturing some types of events by applying user-defined event filters.            </p>        <p id="14e3f4a6">                You can define new custom filters or add event patterns to existing filters on the fly.                    </p>        <section class="procedure-steps"><h2 id="becf78b7">To view the available configured filters</h2><ul class="list _no-style"><li class="list__item" id="93b0714b"><p>                Click the <span class="control">Capture Events</span> button                <img class="inline-icon-16" src="../img/idea/2019.1/artwork.studio.icons.common.filter@2x.png" width="16" alt="Capture Events"> on the toolbar.                The currently applied filter is marked with a tick.                By default the <span class="control">Capture All</span> predefined filter is applied.            </p></li></ul></section>        <section class="procedure-steps"><h2 id="ws_spy_js_configuring_range_of_events_to_display_mute_all">To stop capturing events without stopping the application</h2><ul class="list _no-style"><li class="list__item" id="846ea706"><p>                    Click the <span class="control">Capture Events</span> button <img class="inline-icon-16" src="../img/idea/2019.1/artwork.studio.icons.common.filter@2x.png" width="16" alt="Capture Events"> on the toolbar        and choose <span class="control">Mute All</span> from the context menu.        The application is still running but the <span class="control">Events</span> pane shows the last captured event.        This is helpful if you want to analyze a script and therefore need it to be displayed in the <span class="control">Events</span> pane        but not removed as new events are captured.                </p></li></ul></section>        <section class="procedure-steps"><h2 id="dd1a0241">To define a new event filter</h2><ol class="list _decimal"><li class="list__item" id="eadc446c"><p>                        Click the <span class="control">Capture Events</span> button <img class="inline-icon-16" src="../img/idea/2019.1/artwork.studio.icons.common.filter@2x.png" width="16" alt="Capture Events"> on the toolbar, and then choose <span class="control">Edit Capture Exclusions</span> from the list.                </p></li><li class="list__item" id="4b89943f"><p>                        In the        <a href="spy-js-capture-exclusions-dialog.html">Spy-js Capture Exclusions Dialog</a>        that opens, click        <span class="control">Add</span>        <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="icons general add svg"> on the left-hand pane.                </p></li><li class="list__item" id="8ba3a6bd">                        In the right-hand pane, specify the filter name in the <span class="control">Exclusion name</span> field        and configure a list of exclusion rules.        <ul class="list _bullet"><li class="list__item" id="9a947f15"><p>                    To add a rule, click <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="icons general add svg">, the <span class="control">Add Condition to Exclusion</span> dialog box opens.        Type a pattern in the <span class="control">Value/pattern</span> text box, in the<span class="control">Condition type</span> drop-down list        specify whether the pattern should be applied to event types or script names. Note that        <a href="http://en.wikipedia.org/wiki/Glob_(programming)" data-bypass="yes" target="_blank"><span>glob pattern matching</span></a> is used.        When you click <span class="control">OK</span>, WebStorm brings you to the        <a href="spy-js-capture-exclusions-dialog.html">Spy-js Capture Exclusions Dialog</a>.                </p></li><li class="list__item" id="6027bf46"><p>            To edit a rule, select it in the list, click <img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.edit.svg@2x.png" width="16" alt="icons actions edit svg">, and update the rule in the dialog box that opens.            To remove a rule, select it in the list and click <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.remove.svg@2x.png" width="16" alt="icons general remove svg">.        </p></li></ul>                </li></ol></section>        <section class="procedure-steps"><h2 id="7ce7e09c">To choose a filter to apply</h2><ul class="list _no-style"><li class="list__item" id="5a419011"><p>                    Click <img class="inline-icon-16" src="../img/idea/2019.1/artwork.studio.icons.common.filter@2x.png" width="16" alt="Filter"> and select the checkbox next to the required filter in the list.        If no filters are configured or none of the available filters fits the task, create a new filter as described above.                </p></li></ul></section>        <p id="4a5c2315">                    While navigating through the tree of already captured events in the <span class="control">Events</span> pane, you may come across some events or scripts that you definitely do not want to trace.        You can create a filter as described above but in this case you will have to leave the pane. With WebStorm, you can create an exclusion rule based on any event or script,        as soon as you have detected such event or script, right from the <span class="control">Events</span> pane.                    </p>        <section class="procedure-steps"><h2 id="b019a07e">To create an exclusion rule on the fly</h2><ul class="list _no-style"><li class="list__item" id="c9871879"><p>                            Select the event to exclude and choose <span class="control">Mute &lt;event name&gt; event</span> or <span class="control">Mute &lt;script name&gt; file</span>.                                If a user-defined filter is currently applied, the new rule is added to it silently.        If <span class="control">Capture All</span> is currently active, the        <a href="spy-js-capture-exclusions-dialog.html">Spy-js Capture Exclusions Dialog</a>        opens, where you can create a new filter based on the selected event        or script or choose an existing filter and add the new rule to it.                    </p></li></ul></section>        <p id="9f731d12">                    Timestamp labels help you to analyze your code execution within a specific period of time.        For example, you can set two timestamp labels and view which events were captured between them.        Or on the contrary, you can locate the events that were not captured within a certain period of time although you expected them to be        and thus detect performance problems.            </p>        <section class="procedure-steps"><h2 id="label">To set a timestamp label</h2><ul class="list _no-style"><li class="list__item" id="9418a7d5"><p>                Choose <span class="control">Add Label</span> on the context menu in the <span class="control">Events</span> pane.                A label Labelled at &lt;timestamp&gt; is added under the document node.            </p></li></ul></section>    </div>    <div class="chapter"><h2 id="ws_spy_js_sync_and_navigation_between_panes_and_editor" data-toc="Debugging_with_Spy-js#ws_spy_js_sync_and_navigation_between_panes_and_editor">Navigating between the panes and the editor</h2>                <p id="f6fdaca3">            The <span class="control">Event Stack</span> pane is synchronized with the <span class="control">Events</span> pane and with the editor.        </p>        <section class="procedure-steps"><h2 id="1a45be65">To view the call stack of a script or an event</h2><ul class="list "><li class="list__item" id="a7d77ee1"><p>                Click the event or the script in the <span class="control">Events</span> pane. Its call stack is shown in the <span class="control">Event Stack</span> pane.            </p></li><li class="list__item" id="e12d154a"><p>                Optionally: to open the corresponding trace file in the editor automatically,                press the  <span class="control">Autoscroll to Trace</span> toggle button on the toolbar.            </p></li></ul></section>        <section class="procedure-steps"><h2 id="ws_spy_js_sync_and_navigation_jump_to_trace">To open the trace file of an event or a script in the editor</h2><ul class="list "><li class="list__item" id="06ea9137"><p>                In the <span class="control">Event Stack</span> pane, click the script or event twice or choose <span class="control">Jump to Trace</span> on its context menu.            </p></li><li class="list__item" id="83df3f34"><p>                <a href="debugging-with-spy-js.html#ws_spy_js_sync_and_navigation_activate_autoscroll_to_source">Activate automatic navigation</a> (press <span class="control">Autoscroll to Trace</span>)                and click the required event or script in the <span class="control">Events</span> pane.            </p></li></ul></section>                        <section class="procedure-steps"><h2 id="ws_spy_js_sync_and_navigation_activate_autoscroll_to_source">To synchronize the Events pane directly with the editor</h2><ul class="list _no-style"><li class="list__item" id="790bb250"><p>            Press the <span class="control">Autoscroll to Trace</span> toggle button on the toolbar.<br>            After that, on clicking a node in the <span class="control">Events</span> pane, WebStorm shows its call stack            in the <span class="control">Event Stack</span> pane aqnd opens  the corresponding trace file in the editor.            Also, when you scroll through the <span class="control">Event Stack</span>            WebStorm automatically opens the corresponding files in the editor and highlights the called functions.            </p></li></ul></section>            <aside class="tip sideblock" data-title="" rel="ws_spy_js_sync_and_navigation_jump_to_trace" id="b56074f7">            <p id="c7b6cb25">                        A <span class="emphasis">trace file</span> is a write-protected prettified version of a script. A is named <code class="code">&lt;script name&gt;.js.trace</code>.                </p>        </aside>        <section class="procedure-steps"><h2 id="0f48ae41">To navigate from a function to its call</h2><ul class="list _no-style"><li class="list__item" id="7ff412d3"><p>                In the <span class="control">Event Stack</span> pane, select the required item in the call stack and choose <span class="control">Jump to Caller</span> on the context menu of the selection.            </p></li></ul></section>        <div class="chapter"><h3 id="source_maps" data-toc="Debugging_with_Spy-js#source_maps">Navigating through ECMAScript 6, TypeScript, or CoffeeScript</h3>                            <p id="bd99b56f">                            <span class="emphasis">Spy-js</span> supports <span class="emphasis">source maps</span>, which means that you can now jump from the <span class="control">Event Stack</span> pane        right to the original source code in <span class="emphasis">ECMAScript 6</span>, <span class="emphasis">TypeScript</span> or <span class="emphasis">CoffeeScript</span>        and observe what code fragments were executed.                    </p>                <p id="e102e2f6">                            <span class="emphasis">Spy-js</span> also generates <span class="emphasis">mapped trace files</span>. These are <span class="emphasis">EcmaScript 6</span>, <span class="emphasis">TypeScript</span>,        or <span class="emphasis">CoffeeScript</span> trace files with the extensions <code class="code">.ts.trace</code>, <code class="code">.coffee.trace</code>,        or <code class="code">.js.trace</code>. The fragments of code in these files are highlighted as if they were really executed.                    </p>                                        <p id="a65d313f">                    Alternatively, you can navigate to the executed JavaScript code by choosing <span class="control">Jump to Trace</span>.                </p>            <section class="procedure-steps"><h2 id="7aa2bf02">To configure processing of source maps</h2><ul class="list "><li class="list__item" id="6037aa87">                Configure the way source maps are treated by clicking <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.gearPlain@2x.png" width="16" alt="icons general gearPlain"> on the toolbar of the <span class="control">Events</span> stack and                choosing the following options on the context menu:                <ul class="list _bullet"><li class="list__item" id="c0d893e5"><p>                        Choose <span class="control">Enable Source Map Look-up</span>                                to enable navigation to the  <span class="emphasis">ECMAScript 6</span>, <span class="emphasis">TypeScript</span> or <span class="emphasis">CoffeeScript</span> source code        using the source maps generated during compilation.                        </p></li><li class="list__item" id="a1620984"><p>                        Choose <span class="control">Enable source map generation</span>,                                to generate source maps for everything to map the instrumented code.        Choose this option if you are going to debug the original code in <span class="emphasis"> Chrome Dev Tools</span>        or <span class="emphasis"> FireFox FireBug</span> development tools.                        </p></li><li class="list__item" id="12c9dbbb"><p>                        Choose <span class="control">Always open source mapped trace if available</span>,                                to have <span class="emphasis">Spy-js</span> try to open the <span class="emphasis">mapped trace file</span> when you invoke navigation from an event to its caller.                        </p></li></ul>            </li></ul></section>            <section class="procedure-steps"><h2 id="a0b2ce34">To navigate from a function call to its source code</h2><ul class="list _no-style"><li class="list__item" id="9a0892df">                In the <span class="control">Event Stack</span> pane, select the function in question                and choose one of the following options on the context menu of the selection:                <ul class="list _ul"><li class="list__item" id="e537eb19"><p>                        To navigate to the ECMAScript 6, TypeScript or CoffeeScript source code,                        choose <span class="control">Jump to Source</span> on the context menu of the selection.                    </p></li><li class="list__item" id="0c1e3ed3"><p>                        To navigate to the JavaScript trace file, choose <span class="control">Jump to Trace</span>.                    </p></li><li class="list__item" id="c28003a2"><p>                        To navigate to the mapped trace file (ECMAScript 6, TypeScript or CoffeeScript),                        choose <span class="control">Jump to Mapped Trace</span>.                    </p></li></ul>            </li></ul></section>            <section class="procedure-steps"><h2 id="81abed96">To navigate from a function to its call</h2><ul class="list _no-style"><li class="list__item" id="7db1837f">                Select the function in the <span class="control">Event Stack</span> and choose <span class="control">Jump to Caller</span>.                <ul class="list _ul"><li class="list__item" id="d326a86c"><p>            If the <span class="control">Always open source mapped trace if available</span> option is selected, the corresponding mapped trace file opens.        </p></li><li class="list__item" id="b2309c08"><p>            If the <span class="control">Always open source mapped trace if available</span> option is not selected, the JavaScript trace file opens.        </p></li></ul>            </li></ul></section>        </div>        <div class="chapter"><h3 id="advancedNavigation" data-toc="Debugging_with_Spy-js#advancedNavigation">Advanced trace navigation</h3>                            <p id="d795eeb4">                    With advanced trace navigation, you can                            move through the whole stack based on calls and locate the functions that have not been called, that is,        locate the fragments of code that have not been executed and analyze the reason for them to be skipped.                    </p>                <p id="8d9c1013">                            The following six actions are available: move to the next/previous call of the next/current/previous function in a trace file.        The full list of actions is available from the context menu in the <span class="control">Event Stack</span> pane.        Moving to the next and previous calls of the selected function, to the previous call of the previous function, and to the next call of the next function        are also available from the navigation toolbar of the <span class="control">Event Stack</span> pane.                                <figure><img alt="spy_js_advanced_navigation_1.png" title="spy_js_advanced_navigation_1.png" src="../img/idea/2019.1/spy_js_advanced_navigation_1.png" id="bf8af932" width="665" height="315"></figure>        When you choose one of these actions, the cursor jumps to the call in the stack. If the <span class="control">Autoscroll to Trace</span> toggle button is pressed,        the corresponding trace file opens automatically with the cursor positioned at the call.                    </p>                    </div>        <div class="chapter"><h3 id="advancedSearch" data-toc="Debugging_with_Spy-js#advancedSearch">Advanced trace search</h3>                            <p id="cd2ef3d6">                    Advanced trace search lets you                            navigate between the calls of a function within the whole trace (across all the traced events).        This means that if you are tracing 5 pages in the browser and the <span class="control">Events</span> pane, accordingly, shows 5 document nodes,        WebStorm searches for the calls of the selected function under all these nodes and displays the number of found calls of the function        in the <span class="control">Status</span> bar.                    </p>                                        <p id="31ae79cc">                            The search results are reset and the search toolbar is hidden when you invoke another advanced search or navigation.                    </p>                <p id="df1a3b16">                            Also keep in mind that the number of call occurrences is calculated        when you choose the <span class="control">Search this function calls across all events</span> option. As you analyze the detected calls,        the time passes, new events are captured, and the first detected call can happen to be already removed from the stack        which means that it is no longer available for navigation.                    </p>            <section class="procedure-steps"><h2 id="dbc8ede9">To search for the calls of a function in all document nodes</h2><ul class="list _no-style"><li class="list__item" id="06826b84"><p>                Select the function in question in the <span class="control">Event Stack</span> pane                and choose <span class="control">Search this function calls across all events</span> on the context menu of the selection.                        The number of found calls is displayed in the <span class="control">Status</span> bar,        and the toolbar shows four previously hidden navigation chevron buttons.        <figure><img alt="spy_js_advanced_search_1.png" title="spy_js_advanced_search_1.png" src="../img/idea/2019.1/spy_js_advanced_search_1.png" id="dec75bf6" width="608" height="324"></figure>                </p></li></ul></section>                    <section class="procedure-steps"><h2 id="5309f5a2">To navigate within the found calls</h2><ul class="list _no-style"><li class="list__item" id="10fc6a5e">        use the chevron buttons:        <ul class="list _bullet"><li class="list__item" id="8b197264"><p>                To jump to the first detected call, click <img alt="spy js advanced search first occurence" title="spy js advanced search first occurence" src="../img/idea/2019.1/spy_js_advanced_search_first_occurence.png" id="bbb079a5" width="9" height="10" class="inline-icon-9">.            </p></li><li class="list__item" id="3bca12ee"><p>                To jump to the last detected call, click <img alt="spy js advanced search last occurence" title="spy js advanced search last occurence" src="../img/idea/2019.1/spy_js_advanced_search_last_occurence.png" id="13d04ed6" width="9" height="9" class="inline-icon-9">            </p></li><li class="list__item" id="6c6558ff"><p>                To jump to the next detected call, click <img alt="spy js advanced search next occurence" title="spy js advanced search next occurence" src="../img/idea/2019.1/spy_js_advanced_search_next_occurence.png" id="5fb1a047" width="5" height="8" class="inline-icon-5">                The <span class="control">Status</span> bar shows a message: <code class="code">Occurrence &lt;number&gt; of &lt;total number of detected calls&gt;</code>                <figure><img alt="spy_js_advanced_search_2.png" title="spy_js_advanced_search_2.png" src="../img/idea/2019.1/spy_js_advanced_search_2.png" id="7d5525e3" width="282" height="344"></figure>            </p></li><li class="list__item" id="8b666f3f"><p>                To jump to the previous detected call, click <img alt="spy js advanced search previous occurence" title="spy js advanced search previous occurence" src="../img/idea/2019.1/spy_js_advanced_search_previous_occurence.png" id="dcc75edd" width="5" height="10" class="inline-icon-5">.            </p></li></ul>            </li></ul></section>            </div>    </div>    <div class="chapter"><h2 id="autocompletion" data-toc="Debugging_with_Spy-js#autocompletion">Expanding the basic completion list with runtime data (Spy-js autocompletion)</h2>        <p id="d741be9d">                    The term <span class="emphasis">Spy-js autocompletion</span> denotes expanding the        <a href="auto-completing-code.html#basic_completion">basic completion list</a> with suggestions retrieved from the runtime data.        The <span class="emphasis">Spy-js autocompletion</span> functionality is available from <span class="emphasis">source</span> files for the code that has already been executed        (highlighted green in the corresponding <span class="emphasis">trace</span> file).            </p>        <p id="651e4b2c">                    When you position the caret at a symbol in the source file and press <kbd data-primary_default="Ctrl+Space" data-primary_default_for_gnome="Ctrl+Space" data-primary_default_for_kde="Ctrl+Space" data-primary_default_for_xwin="Ctrl+Space" data-primary_emacs="Alt+/" data-primary_visual_studio="Ctrl+Space" data-primary_eclipse="Ctrl+Space" data-secondary_mac_os_x_10.5_="⌃Space" data-secondary_mac_os_x="⌃Space" data-secondary_eclipse_mac_os_x="⌃Space">Ctrl+Space</kbd>,        <span class="emphasis">Spy-js</span> retrieves data from the browser or from the running Node.js application and merges it with the basic completion list according to the following rules:            </p>        <ol class="list _decimal"><li class="list__item" id="2eda29f9"><p>            If an object both is present on the basic completion list and is retrieved from the runtime, the variant that provides more information about parameters, attributes, their type, etc.            remains on the list.        </p></li><li class="list__item" id="9b7e0ae9"><p>            Objects retrieved by <span class="emphasis">Spy.js</span> are shown on top of the list and marked with the <img class="inline-icon-16" src="../img/idea/2019.1/spy-js.icons.spy_js@2x.png" width="16" alt="the Spy.js icon"> icon.            If a retrieved object is specific to a browser, the object is marked with the <img class="inline-icon-16" src="../img/idea/2019.1/spy-js.icons.spy_js@2x.png" width="16" alt="the Spy.js icon"> icon and with the icon of this browser.        </p></li></ol>        <section class="procedure-steps"><h2 id="0bb817b3">To activate Spy-js autocompletion</h2><ul class="list _no-style"><li class="list__item" id="ad12894c"><p>                Click the <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.gearPlain.svg@2x.png" width="16" alt="icons general gearPlain svg"> button on the <span class="control">Events</span> toolbar, and then choose <span class="control">Enable Spy-js autocomplete and magnifier</span> from the list.            </p></li></ul></section>    </div>    <div class="chapter"><h2 id="magnification" data-toc="Debugging_with_Spy-js#magnification">Evaluating expressions without running a debugging session (Spy-js magnification)</h2>        <p id="07167134">                    The term <span class="emphasis">Spy-js magnification</span> denotes <a href="evaluating-expressions.html">evaluating expressions</a> without actually running a debugging session.        When you click the expression in question or position the caret at it and press <kbd data-primary_default="Ctrl+Alt+F8" data-primary_default_for_gnome="Ctrl+Alt+8" data-primary_default_for_kde="Ctrl+Alt+8" data-primary_default_for_xwin="Ctrl+Alt+8" data-primary_emacs="Ctrl+Alt+F8" data-primary_visual_studio="Shift+F9" data-primary_eclipse="Ctrl+Alt+F8" data-secondary_mac_os_x_10.5_="⌥⌘F8" data-secondary_mac_os_x="⌥⌘F8" data-secondary_eclipse_mac_os_x="⌥⌘F8">Ctrl+Alt+F8</kbd>,        a tooltip is displayed below the expression showing the expression value.        If <span class="emphasis">Spy-js</span> retrieves several values, click <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="icons general add svg"> icon in the tooltip to expand the list of values.            </p>        <p id="26a8d2f9">                    The <span class="emphasis">magnification</span> functionality is available from <span class="emphasis">source</span> files for both executed and not yet executed code.            </p>        <p id="513735a7">                    By default, the functionality is turned off.            </p>        <section class="procedure-steps"><h2 id="d50103f0">To activate Spy-js magnification</h2><ul class="list _no-style"><li class="list__item" id="852c26c3"><p>                Click the <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.gearPlain.svg@2x.png" width="16" alt="icons general gearPlain svg"> button on the <span class="control">Events</span> toolbar, and then choose <span class="control">Enable Spy-js autocomplete and magnifier</span> from the list.            </p></li></ul></section>    </div>    <div class="chapter"><h2 id="diagram" data-toc="Debugging_with_Spy-js#diagram">Viewing dependency diagrams</h2>            <p id="a1af7bcc">                With Spy-js, you can build and examine runtime application/event diagrams for client-side                and Node.js applications.            </p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="56b97605">            Generate a diagram:            <ul class="list _bullet"><li class="list__item" id="cdaf06d5"><p>                    To build a diagram with the dependencies within the entire application, select the document node                    and choose <span class="control">Show application dependency diagram</span> on the context menu of the selection.                </p></li><li class="list__item" id="31878173"><p>                    To build a diagram with the dependencies of a single event, select the required event in the <span class="control">Events</span> pane and choose                    <span class="control">Show event dependency diagram</span>.                </p></li></ul>        </li><li class="list__item" id="1c16be8f">            Analyze the diagram:            <ul class="list _bullet"><li class="list__item" id="c3914795"><p>            The diagram is opened in a separate editor tab. The nodes in the diagram represent your project files, while the edges represent the fact            that there’s one or more functions in the source file that invoke functions in the target file.        </p></li><li class="list__item" id="a633a756"><p>            To examine the details of a node or an edge, select the node or the edge in question and view its <span class="control">Details</span> tree            in a dedicated pane in the upper right-hand corner of the editor.            The pane displays the connecting function combinations, along with event(s) the calls are made within and the number of calls made.        </p></li></ul>        </li></ol></section></div>    <div class="last-modified" data-skip-index="skip">Last modified: 25 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="specific-javascript-refactorings.html">Refactoring JavaScript</a><a class="navigation-links__next" href="unit-testing-javascript.html">Testing JavaScript</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>See Also</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>Reference:</h3><ul class="list"><li class="list__item"><a href="spy-js-tool-window.html"><span>Spy-js Tool Window</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>External Links:</h3><ul class="list"><li class="list__item"><a href="https://github.com/spy-js/spy-js#spy-js-documentation" data-bypass="yes" target="_blank"><span>https://github.com/spy-js/spy-js#spy-js-documentation</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>


























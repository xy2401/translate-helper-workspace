<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. 准备RHEL 7系统以进行升级</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. 准备RHEL 7系统以进行升级</h1></div></div></div><p>此过程描述了在使用<span class="strong"><strong><span class="application">Leapp</span></strong></span>实用程序执行就地升级到RHEL 8之前必需的步骤。
		</p><h2><a id="prerequisites"></a>先决条件</h2><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">系统满足<a class="xref" href="requirements-and-known-limitationsupgrading-to-rhel-8.html" title="Chapter 9. 要求和已知限制">第1章， <em>要求和已知限制中</em></a>列出的条件。
				</li></ul></div><h2><a id="procedure"></a>程序</h2><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">确保您的系统已使用Red Hat Subscription Manager成功注册到Red Hat Content Delivery Network（CDN）或Red Hat Satellite 6.5或更高版本。
				</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>如果您的系统已注册到Satellite服务器，则需要通过将在Red Hat客户门户中创建的Subscription Manifest文件导入Satellite Server来使RHEL 8存储库可用。有关说明，请参阅“ <span class="emphasis"><em>内容管理指南”</em></span>中的“ <span class="emphasis"><em>管理订阅”</em></span>部分，了解特定版本的<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_satellite/">Red Hat Satellite</a> ，例如， <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.5/html/content_management_guide/managing_subscriptions">版本6.5</a> 。
					</p></div></li><li class="listitem"><p class="simpara">确认您已附加Red Hat Enterprise Linux Server订阅。
				</p><pre class="screen"># subscription-manager list --installed
+-------------------------------------------+
    	  Installed Product Status
+-------------------------------------------+
Product Name:  	Red Hat Enterprise Linux Server
Product ID:     69
Version:        7.6
Arch:           x86_64
Status:         Subscribed</pre></li><li class="listitem"><p class="simpara">如果使用<code class="literal">yum-plugin-versionlock</code>插件将软件包锁定到特定版本，请通过运行以下命令清除锁定：</p><pre class="screen"># yum versionlock clear</pre><p class="simpara">请参阅<a class="link" href="https://access.redhat.com/solutions/98873">如何限制yum将软件包安装或升级到固定的特定软件包版本？</a> 欲获得更多信息。
				</p></li><li class="listitem"><p class="simpara">设置Red Hat Subscription Manager以使用RHEL 7.6内容：</p><pre class="screen"># subscription-manager release --set 7.6</pre><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>升级是为RHEL 7.6设计的。如果您有更高版本RHEL的任何软件包，请将它们降级到RHEL 7.6版本。
					</p></div></li><li class="listitem"><p class="simpara">将所有软件包更新到最新的RHEL 7.6版本：</p><pre class="screen"># yum update</pre></li><li class="listitem"><p class="simpara">重启系统：</p><pre class="screen"># reboot</pre></li><li class="listitem"><p class="simpara">启用Extras存储库，其中某些依赖项可用：</p><pre class="screen"># subscription-manager repos --enable rhel-7-server-extras-rpms</pre></li><li class="listitem"><p class="simpara">安装Leapp实用程序：</p><pre class="screen"># yum install leapp</pre></li><li class="listitem">下载附加到知识库文章的其他所需数据文件（RPM软件包更改和RPM存储库映射） <a class="link" href="https://access.redhat.com/articles/3664871">Leapp实用程序所需的数据，用于从RHEL 7到RHEL 8的就地升级</a> ，并将它们放在<code class="literal">/etc/leapp/files/</code>目录中。
				</li><li class="listitem">确保已禁用或已充分重新配置任何配置管理（例如<span class="strong"><strong>Salt</strong></span> ， <span class="strong"><strong>Chef</strong></span> ， <span class="strong"><strong>Puppet</strong></span> ， <span class="strong"><strong>Ansible</strong></span> ）以不尝试还原原始RHEL 7系统。
				</li><li class="listitem">确保您的系统不使用多个网络接口卡（NIC），其名称基于内核使用的前缀（ <code class="literal">eth</code> ）。有关如何在就地升级到RHEL 8之前迁移到另一个命名方案的说明，请参阅<a class="link" href="https://access.redhat.com/solutions/4067471">在RHEL 7上使用内核NIC名称时如何执行RHEL 8的就地升级</a> 。
				</li><li class="listitem">确保您具有完整系统备份或虚拟机快照。如果您遵循环境中的标准灾难恢复过程，则应该能够使系统进入升级前状态。
				</li></ol></div></div></body></html>
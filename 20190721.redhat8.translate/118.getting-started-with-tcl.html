<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. 在Red Hat Enterprise Linux 8上开始使用Tcl / Tk</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. 在Red Hat Enterprise Linux 8上开始使用Tcl / Tk</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="introduction-to-tcl_getting-started-with-tcl"></a> Tcl / Tk简介</h1></div></div></div><p>
				<span class="strong"><strong><span class="application">工具命令语言（Tcl）</span></strong></span>是一种动态编程语言。该语言的解释器与C库一起由<code class="literal">tcl</code>包提供。
			</p><p>使用<span class="strong"><strong><span class="application">Tcl</span></strong></span>与<span class="strong"><strong><span class="application">Tk</span></strong></span> （ <span class="strong"><strong>Tcl / Tk</strong></span> ）配对可以创建跨平台的GUI应用程序。<span class="strong"><strong><span class="application">Tk</span></strong></span>由<code class="literal">tk</code>包提供。
			</p><p>请注意， <span class="strong"><strong><span class="application">Tk</span></strong></span>可以参考以下任何一项：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">适用于多种语言的编程工具包</li><li class="listitem">可用于多种语言的Tk C库绑定，例如C，Ruby，Perl和Python</li><li class="listitem">一个实例化Tk控制台的愿望解释器</li><li class="listitem">Tk扩展，为特定的Tcl解释器添加了许多新命令</li></ul></div><p>有关Tcl / Tk的更多信息，请参阅<a class="link" href="https://www.tcl.tk/man/tcl8.6/">Tcl / Tk手册</a>或<a class="link" href="https://www.tcl.tk/doc/">Tcl / Tk文档网页</a> 。
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="tcl-notable-changes_getting-started-with-tcl"></a> Tcl / Tk 8.6的显着变化</h1></div></div></div><p>与<span class="strong"><strong>Tcl / Tk 8.5</strong></span>相比， <span class="strong"><strong><span class="application">Tcl / Tk 8.6的</span></strong></span>主要变化是：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">面向对象的编程支持</li><li class="listitem">无堆栈评估实施</li><li class="listitem">增强的异常处理</li><li class="listitem">使用Tcl构建和安装的第三方软件包的集合</li><li class="listitem">启用多线程操作</li><li class="listitem">SQL数据库驱动的脚本支持</li><li class="listitem">IPv6网络支持</li><li class="listitem">内置Zlib压缩</li><li class="listitem"><p class="simpara">列表处理</p><p class="simpara">有两个新命令， <code class="literal">lmap</code>和<code class="literal">dict map</code> ，它们允许在<span class="strong"><strong><span class="application">Tcl</span></strong></span>容器上表达转换。
					</p></li><li class="listitem"><p class="simpara">按脚本堆叠通道</p><p class="simpara">有两个新命令， <code class="literal">chan push</code>和<code class="literal">chan pop</code> ，可以在I / O通道上添加或删除转换。
					</p></li></ul></div><p><span class="strong"><strong><span class="application">Tk的</span></strong></span>主要变化包括：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">内置PNG图像支持</li><li class="listitem"><p class="simpara">繁忙的窗户</p><p class="simpara">新命令<code class="literal">tk busy</code>可用，它禁用窗口或窗口小部件的用户交互并显示忙碌光标。
					</p></li><li class="listitem">新的字体选择对话框界面</li><li class="listitem">有角度的文本支持</li><li class="listitem">在画布支持上移动东西</li></ul></div><p>有关<span class="strong"><strong><span class="application">Tcl 8.5</span></strong></span>和<span class="strong"><strong><span class="application">Tcl 8.6</span></strong></span>之间的更改的详细列表，请参阅<a class="link" href="https://wiki.tcl.tk/21276">Tcl / Tk 8.6中的更改</a> 。
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="migrate-to-tcl8.6_getting-started-with-tcl"></a>迁移到Tcl / Tk 8.6</h1></div></div></div><p>Red Hat Enterprise Linux 7使用<span class="strong"><strong><span class="application">Tcl / Tk 8.5</span></strong></span> 。使用Red Hat Enterprise Linux 8，Base OS存储库中提供了<span class="strong"><strong><span class="application">Tcl / Tk 8.6版</span></strong></span> 。
			</p><p>本节介绍了<span class="strong"><strong><span class="application">Tcl / Tk 8.6的</span></strong></span>迁移路径：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">开发人员编写<span class="strong"><strong><span class="application">Tcl</span></strong></span>扩展或将<span class="strong"><strong><span class="application">Tcl</span></strong></span>解释器嵌入到他们的应用程序中（请参阅<a class="xref" href="getting-started-with-tcl.html#migrate-to-tcl8.6-developers" title="Tcl扩展的开发人员的迁移路径">“Tcl扩展开发人员的迁移路径”一节</a> ）</li><li class="listitem">用户使用<span class="strong"><strong><span class="application">Tcl / Tk</span></strong></span>编写脚本任务（请参阅<a class="xref" href="getting-started-with-tcl.html#migrate-to-tcl8.6-users" title="用户使用Tcl / Tk编写任务脚本的迁移路径">“用户使用Tcl / Tk编写任务脚本的迁移路径”一节</a> ）</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="migrate-to-tcl8.6-developers"></a> Tcl扩展的开发人员的迁移路径</h2></div></div></div><p>
					<span class="strong"><strong><span class="application">Tcl 8.6</span></strong></span>限制了对<code class="literal">interp</code>结构成员的直接访问。例如，如果您的代码读取<code class="literal">interp→errorLine</code> ，则重写代码以使用<code class="literal">Tcl_GetErrorLine(interp)</code>函数。
				</p><p>要使代码与<span class="strong"><strong><span class="application">Tcl 8.5</span></strong></span>和<span class="strong"><strong><span class="application">Tcl 8.6</span></strong></span>兼容，请在C或C ++应用程序的头文件或包含<span class="strong"><strong><span class="application">Tcl</span></strong></span>库的扩展中使用以下代码段：</p><pre class="literallayout"># include &lt;tcl.h&gt;
# if !defined(Tcl_GetErrorLine)
# define Tcl_GetErrorLine(interp) (interp→errorLine)
# endif</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="migrate-to-tcl8.6-users"></a>用户使用Tcl / Tk编写任务脚本的迁移路径</h2></div></div></div><p>在<span class="strong"><strong><span class="application">Tcl 8.6中</span></strong></span> ，大多数脚本的工作方式与以前版本的<span class="strong"><strong><span class="application">Tcl相同</span></strong></span> 。编写可移植代码时，请确保不要使用<span class="strong"><strong><span class="application">Tk 8.6中</span></strong></span>不再支持的命令：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">tkIconList_Arrange</li><li class="listitem">tkIconList_AutoScan</li><li class="listitem">tkIconList_Btn1</li><li class="listitem">tkIconList_Config</li><li class="listitem">tkIconList_Create</li><li class="listitem">tkIconList_CtrlBtn1</li><li class="listitem">tkIconList_Curselection</li><li class="listitem">tkIconList_DeleteAll</li><li class="listitem">tkIconList_Double1</li><li class="listitem">tkIconList_DrawSelection</li><li class="listitem">tkIconList_FocusIn</li><li class="listitem">tkIconList_FocusOut</li><li class="listitem">tkIconList_Get</li><li class="listitem">tkIconList_Goto</li><li class="listitem">tkIconList_Index</li><li class="listitem">tkIconList_Invoke</li><li class="listitem">tkIconList_KeyPress</li><li class="listitem">tkIconList_Leave1</li><li class="listitem">tkIconList_LeftRight</li><li class="listitem">tkIconList_Motion1</li><li class="listitem">tkIconList_Reset</li><li class="listitem">tkIconList_ReturnKey</li><li class="listitem">tkIconList_See</li><li class="listitem">tkIconList_Select</li><li class="listitem">tkIconList_Selection</li><li class="listitem">tkIconList_ShiftBtn1</li><li class="listitem">tkIconList_UpDown</li></ul></div><p>您还可以在<code class="literal">/usr/share/tk8.6/unsupported.tcl</code>文件中查看不受支持的命令列表。
				</p></div></div></div></body></html>
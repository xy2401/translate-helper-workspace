<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. Bug修复</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Bug修复</h1></div></div></div><p>本部分介绍了Red Hat Enterprise Linux 8.0中修复的对用户有重大影响的错误。
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="desktop_2"></a>桌面</h1></div></div></div><p><a id="BZ-1559414"></a></p><div class="title"><strong><span class="strong"><strong>PackageKit</strong></span>现在可以在rpm包上运行</strong></div><p>通过此更新，已在<span class="strong"><strong>PackageKit中</strong></span>添加了对<code class="literal">rpm</code>包进行操作的支持。
				</p><p>（BZ＃1559414）</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="graphics_infrastructures"></a>图形基础设施</h1></div></div></div><p><a id="BZ-1598776"></a></p><div class="title"><strong>QEMU无法正确处理8字节<code class="literal">ggtt</code>条目</strong></div><p>QEMU偶尔将8字节<code class="literal">ggtt</code>条目写入分成两个连续的4字节写入。这些部分写入中的每一个都可以触发单独的主机<code class="literal">ggtt</code>写入。有时两个<code class="literal">ggtt</code>写入组合不正确。因此，转换为计算机地址失败，并发生错误日志。
				</p><p>（BZ＃1598776）</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="identity_management_2"></a>身份管理</h1></div></div></div><p><a id="BZ-1538645"></a></p><div class="title"><strong>Enterprise Security Client使用<code class="literal">opensc</code>库进行令牌检测</strong></div><p>Red Hat Enterprise Linux 8.0仅支持智能卡的<code class="literal">opensc</code>库。通过此更新，企业安全客户端（ESC）使用<code class="literal">opensc</code>进行令牌检测，而不是使用已删除的<code class="literal">coolkey</code>库。因此，应用程序可以正确检测支持的令牌。
				</p><p>（BZ＃1538645）</p><p><a id="BZ-1565073"></a></p><div class="title"><strong>证书系统现在支持旋转调试日志</strong></div><p>以前，证书系统使用自定义日志记录框架，该框架不支持日志轮换。因此，调试日志（例如<code class="literal">/var/log/pki/ <span class="emphasis"><em>instance_name</em></span> /ca/debug</code>无限增长。通过此更新，证书系统使用<code class="literal">java.logging.util</code>框架，该框架支持日志轮换。因此，您可以在<code class="literal">/var/lib/pki/ <span class="emphasis"><em>instance_name</em></span> /conf/logging.properties</code>文件中配置日志轮换。
				</p><p>有关日志轮换的更多信息，请参阅<code class="literal">java.util.logging</code>包的文档。
			</p><p>（BZ＃1565073）</p><p><a id="BZ-1424966"></a></p><div class="title"><strong>服务启动时，证书系统不再记录<code class="literal">SetAllPropertiesRule</code>操作警告</strong></div><p>以前，证书系统在服务启动时在<code class="literal">/var/log/messages</code>日志文件中记录了<code class="literal">SetAllPropertiesRule</code>操作的警告。问题已得到解决，并且不再记录上述警告。
				</p><p>（BZ＃1424966）</p><p><a id="BZ-1623444"></a></p><div class="title"><strong>证书系统KRA客户端正确解析<code class="literal">Key Request</code>响应</strong></div><p>以前，证书系统切换到新的JSON库。因此，某些对象的序列化不同，并且Python密钥恢复授权（KRA）客户端无法解析<code class="literal">Key Request</code>响应。已修改客户端以使用旧JSON库和新JSON库支持响应。因此，Python KRA客户端正确解析<code class="literal">Key Request</code>响应。
				</p><p>（BZ＃1623444）</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="compilers_and_development_tools_2"></a>编译器和开发工具</h1></div></div></div><p><a id="BZ-1246444"></a></p><div class="title"><strong>GCC不再产生关于越界访问的误报警告</strong></div><p>以前，当使用<code class="literal">-O3</code>优化级别选项进行编译时，GNU编译器集合（GCC）偶尔会返回关于越界访问的误报警告，即使编译后的代码不包含它也是如此。优化已得到修复，GCC不再显示误报警告。
				</p><p>（BZ＃1246444）</p><p><a id="BZ-1584322"></a></p><div class="title"><strong><code class="literal">ltrace</code>正确显示大型结构</strong></div><p>以前， <code class="literal">ltrace</code>工具无法正确打印从函数返回的大型结构。<code class="literal">ltrace</code>中大型结构的<code class="literal">ltrace</code>已得到改进，现在可以正确打印。
				</p><p>（BZ＃1584322）</p><p><a id="BZ-1652016"></a></p><div class="title"><strong>GCC内置函数<code class="literal">__builtin_clz</code>在IBM Z上返回正确的值</strong></div><p>以前，GCC编译器错误地折叠了IBM Z体系结构的<code class="literal">FLOGR</code>指令。因此，当使用<code class="literal">-funroll-loops</code> GCC选项编译代码时，使用此指令的<code class="literal">__builtin_clz</code>函数可能返回错误的结果。此错误已得到修复，现在该功能可提供正确的结果。
				</p><p>（BZ＃1652016）</p><p><a id="BZ-1491128"></a></p><div class="title"><strong>当批处理模式中的最后一个命令失败时，GDB提供非零退出状态</strong></div><p>以前，无论命令中的错误如何，GDB在批处理模式下运行时始终以状态<code class="literal">0</code>退出。结果，无法确定命令是否成功。当最后一个命令发生错误时，此行为已更改，GDB现在以状态<code class="literal">1</code>退出。这保留了与执行所有命令的先前行为的兼容性。因此，现在可以确定GDB批处理模式执行是否成功。
				</p><p>（BZ＃1491128）</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="file_systems_and_storage_2"></a>文件系统和存储</h1></div></div></div><p><a id="BZ-1582099"></a></p><div class="title"><strong>较高的打印级别不再导致<code class="literal">iscsiadm</code>意外终止</strong></div><p>以前，当用户使用<code class="literal">--print</code>或<code class="literal">-P</code>选项指定高于0的打印级别时， <code class="literal">iscsiadm</code>实用程序意外终止。此问题已得到修复，所有打印级别现在都按预期工作。
				</p><p>（BZ＃1582099）</p><p><a id="BZ-1673167"></a></p><div class="title"><strong><code class="literal">multipathd</code>在无法获取路径的WWID时不再禁用路径</strong></div><p>以前， <code class="literal">multipathd</code>服务处理尝试将路径的WWID作为获取空WWID的失败尝试。如果<code class="literal">multipathd</code>无法获取路径的WWID，则有时会禁用该路径。
				</p><p>通过此更新， <code class="literal">multipathd</code>继续使用旧WWID，如果在检查WWID是否已更改时无法获取WWID。
			</p><p>因此，当检查WWID是否已更改时， <code class="literal">multipathd</code>在无法获取WWID时不再禁用路径。
			</p><p>（ <a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1673167">BZ＃1673167</a> ）</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="high_availability_and_clusters_2"></a>高可用性和集群</h1></div></div></div><p><a id="BZ-1566430"></a></p><div class="title"><strong>新的<code class="literal">/etc/sysconfig/pcsd</code>选项拒绝客户端启动的SSL / TLS重新协商</strong></div><p>在服务器上启用TLS重新协商时，允许客户端发送重新协商请求，从而启动新的握手。握手的计算要求在服务器上比在客户端上要高。这使服务器容易受到DoS攻击。使用此修复程序， <code class="literal">/etc/sysconfig/pcsd</code>配置文件中的设置<code class="literal">PCSD_SSL_OPTIONS</code>接受<code class="literal">OP_NO_RENEGOTIATION</code>选项以拒绝重新协商。请注意，客户端仍然可以打开与服务器的多个连接，并在所有服务器中执行握手。
				</p><p>（BZ＃1566430）</p><p><a id="BZ-1595829"></a></p><div class="title"><strong>已删除的群集节点不再显示在群集状态中</strong></div><p>以前，当使用<code class="literal">pcs cluster node remove</code>命令删除节点时，已删除的节点在<code class="literal">pcs status</code>显示的输出中仍然可见。使用此修复程序，已删除的节点不再显示在群集状态中。
				</p><p>（BZ＃1595829）</p><p><a id="BZ-1436217"></a></p><div class="title"><strong>现在可以使用较新的首选参数名称或不推荐使用的参数名称来配置Fence代理</strong></div><p>已重命名大量fence代理参数，而旧参数名称仍被支持为已弃用。以前，除非与<code class="literal">--force</code>选项一起使用，否则<code class="literal">pcs</code>无法设置新参数。通过此修复， <code class="literal">pcs</code>现在支持重命名的fence代理参数，同时保持对不推荐使用的参数的支持。
				</p><p>（BZ＃1436217）</p><p><a id="BZ-1578955"></a></p><div class="title"><strong><code class="literal">pcs</code>命令现在可以正确读取群集的XML状态以供显示</strong></div><p><code class="literal">pcs</code>命令运行<code class="literal">crm_mon</code>实用程序以获取XML格式的集群状态。<code class="literal">crm_mon</code>实用程序将XML打印到标准输出，并将警告输出到标准错误输出。以前， <code class="literal">pcs</code>将XML和警告混合到一个流中，然后无法将其解析为XML。通过此修复，标准和错误输出在<code class="literal">pcs</code>中分离，并且读取群集的XML状态按预期工作。
				</p><p>（BZ＃1578955）</p><p><a id="BZ-1596050"></a></p><div class="title"><strong>在使用现有集群中的节点创建新集群时，不再建议用户销毁集群</strong></div><p>以前，当用户在运行<code class="literal">pcs cluster setup</code>命令时指定现有集群中的节点时，或者在使用<code class="literal">pcsd</code> Web UI创建集群时，pcs会<code class="literal">pcsd</code>报告为错误并建议用户销毁节点上的集群。结果，用户将破坏节点上的集群，打破节点所属的集群，因为其余节点仍将被破坏的节点视为集群的一部分。通过此修复，建议用户从群集中删除节点，更好地告知他们如何在不破坏群集的情况下解决问题。
				</p><p>（BZ＃1596050）</p><p><a id="BZ-1554310"></a></p><div class="title"><strong><code class="literal">pcs</code>命令不再以交互方式请求凭据</strong></div><p>当非root用户运行需要root权限的<code class="literal">pcs</code>命令时， <code class="literal">pcs</code>连接到本地运行的<code class="literal">pcsd</code>守护程序并将命令传递给它，因为<code class="literal">pcsd</code>守护程序以root权限运行并且能够运行该命令。以前，如果用户未对本地<code class="literal">pcsd</code>守护程序进行身份验证，则<code class="literal">pcs</code>以交互方式请求用户名和密码。这让用户感到困惑，并且需要在运行<code class="literal">pcs</code>脚本中进行特殊处理。使用此修复程序，如果用户未经过身份验证，则<code class="literal">pcs</code>退出时会出现错误，告知该怎么做：以root身份运行<code class="literal">pcs</code>或使用新的<code class="literal">pcs client local-auth</code>命令<code class="literal">pcs client local-auth</code> 。因此， <code class="literal">pcs</code>命令不会以交互方式请求凭据，从而改善用户体验。
				</p><p>（BZ＃1554310）</p><p><a id="BZ-1638852"></a></p><div class="title"><strong>当<code class="literal">crypto-policies</code>设置为<code class="literal">FUTURE</code>时， <code class="literal">pcsd</code>守护程序现在以其默认的自生成SSL证书启动。</strong></div><p><code class="literal">FUTURE</code> <code class="literal">crypto-policies</code>设置要求SSL证书中的RSA密钥长度至少为3072b。以前， <code class="literal">pcsd</code>守护程序在设置此策略时不会启动，因为它生成带有2048b密钥的SSL证书。通过此更新， <code class="literal">pcsd</code>自生成SSL证书的密钥大小已增加到3072b， <code class="literal">pcsd</code>现在以其默认的自生成SSL证书启动。
				</p><p>（BZ＃1638852）</p><p><a id="BZ-1640477"></a></p><div class="title"><strong><code class="literal">pcsd</code>服务现在在网络准备就绪时启动</strong></div><p>以前，当用户将<code class="literal">pcsd</code>配置为绑定到特定IP地址并且在<code class="literal">pcsd</code>尝试启动时启动期间地址未准备好时，则<code class="literal">pcsd</code>无法启动并且需要手动干预才能启动<code class="literal">pcsd</code> 。有了这个修复， <code class="literal">pcsd.service</code>依赖于<code class="literal">network-online.target</code> 。因此， <code class="literal">pcsd</code>在网络准备就绪时启动，并且能够绑定到IP地址。
				</p><p>（BZ＃1640477）</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="networking_2"></a>联网</h1></div></div></div><p><a id="BZ-1640534"></a></p><div class="title"><strong><code class="literal">glib-networking</code>不再允许使用弱TLS算法</strong></div><p>以前， <code class="literal">glib-networking</code>软件包与RHEL 8系统范围的加密策略不兼容。因此，使用<code class="literal">glib</code>库进行联网的应用程序可能允许使用比管理员预期的弱算法的传输层安全性（TLS）连接。通过此更新，将应用系统范围的加密策略，现在使用<code class="literal">glib</code>进行网络连接的应用程序仅允许根据策略接受的TLS连接。
				</p><p>（BZ＃1640534）</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="security_2"></a>安全</h1></div></div></div><p><a id="BZ-1626446"></a></p><div class="title"><strong>SELinux策略现在允许<code class="literal">iscsiuio</code>进程连接到发现门户</strong></div><p>以前，SELinux策略对于<code class="literal">iscsiuio</code>进程限制太多，并且这些进程无法使用<code class="literal">mmap</code>系统调用访问<code class="literal">/dev/uio*</code>设备。因此，与发现门户的连接失败。此更新将缺少的规则添加到SELinux策略，并且<code class="literal">iscsiuio</code>进程在所描述的方案中按预期工作。
				</p><p>（BZ＃1626446）</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="subscription_management"></a>订阅管理</h1></div></div></div><p><a id="BZ-1654531"></a></p><div class="title"><strong>无论<code class="literal">subscription-manager</code>值如何， <code class="literal">dnf</code>和<code class="literal">yum</code>现在都可以访问repos</strong></div><p>以前， <code class="literal">dnf</code>或<code class="literal">yum</code>命令忽略了<span class="strong"><strong>订阅管理器</strong></span>服务添加的URL中的<code class="literal">https://</code>前缀。更新的<code class="literal">dnf</code>或<code class="literal">yum</code>命令不会忽略无效的<code class="literal">https://</code> URL。结果， <code class="literal">dnf</code>和<code class="literal">yum</code>无法访问回购。要解决此问题，已将新配置变量<code class="literal">proxy_scheme</code>添加到<code class="literal">/etc/rhsm/rhsm.conf</code>文件中，并且该值可以设置为<code class="literal">http</code>或<code class="literal">https</code> 。如果未指定任何值，则<span class="strong"><strong>subscription-manager</strong></span>默认设置<code class="literal">http</code> ，这是更常用的。
				</p><p>请注意，如果代理使用<code class="literal">http</code> ，则大多数用户不应更改<code class="literal">/etc/rhsm/rhsm.conf</code>中配置中的<code class="literal">/etc/rhsm/rhsm.conf</code> 。如果代理使用<code class="literal">https</code> ，则用户应将<code class="literal">proxy_scheme</code>的值更新为<code class="literal">https</code> 。然后，在这两种情况下，用户都需要运行<code class="literal">subscription-manager repos --list</code>命令或等待<code class="literal">rhsmcertd</code>守护程序进程正确地重新生成<code class="literal">/etc/yum.repos.d/redhat.repo</code> 。
			</p><p>（ <a class="link" href="https://bugzilla.redhat.com/show_bug.cgi?id=1654531">BZ＃1654531</a> ）</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="virtualization_2"></a>虚拟化</h1></div></div></div><p><a id="BZ-1615599"></a></p><div class="title"><strong>现在，在Azure上安装短暂磁盘的工作更加可靠</strong></div><p>以前，如果VM已“停止（取消分配）”然后启动，则在Microsoft Azure平台上运行的虚拟机（VM）上安装临时磁盘会失败。此更新可确保在所描述的情况下正确处理重新连接磁盘，从而防止出现问题。
				</p><p>（BZ＃1615599）</p></div></div></body></html>
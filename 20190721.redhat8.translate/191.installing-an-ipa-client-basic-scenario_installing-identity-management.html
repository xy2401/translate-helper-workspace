<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. 安装Identity Management客户端：基本方案</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. 安装Identity Management客户端：基本方案</h1></div></div></div><p>以下部分介绍如何使用<code class="literal">ipa-client-install</code>实用程序将系统配置为Identity Management（IdM）客户<code class="literal">ipa-client-install</code> 。将系统配置为IdM客户端会将其注册到IdM域，并使系统能够在域中的IdM服务器上使用IdM服务。
			</p><p>有几个选项可用于基本安装：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">要使用特权用户的凭据以交互方式安装客户端，请参阅<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#installing-client-basic-installing-a-client-by-using-user-credentials-interactive-installation" title="使用用户凭据安装客户端：交互式安装">“使用用户凭据安装客户端：交互式安装”一节</a> 。
					</li><li class="listitem">要使用一次性密码以交互方式安装客户端，请参阅<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#installing-client-basic-installing-a-client-by-using-a-one-time-password-interactive-installation" title="使用一次性密码安装客户端：交互式安装">“使用一次性密码安装客户端：交互式安装”一节</a> 。
					</li><li class="listitem">要使用特权用户的凭据，一次性密码或以前注册的密钥表<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#installing-ipa-client-non-interactive-install_install-client-basic" title="Installing a client: Non-interactive installation">非交互式安装客户端</a> ，请参阅<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#installing-ipa-client-non-interactive-install_install-client-basic" title="安装客户端：非交互式安装">“安装客户端：非交互式安装”一节</a> 。
					</li></ul></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="prerequisites_4"></a>先决条件</h1></div></div></div><p>在开始安装Identity Management客户端之前，请确保您已满足所有先决条件。请参见<a class="xref" href="preparing-the-system-for-ipa-client-installation_installing-identity-management.html" title="Chapter 9. 准备系统以进行Identity Management客户端安装">第8章， <em>为Identity Management客户端安装准备系统</em></a> 。
				</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="overview-of-the-ipa-client-installation-options"></a> Identity Management客户端安装选项的概述</h1></div></div></div><p>要成功安装Identity Management客户端，您必须提供可用于注册客户端的凭据。可以使用以下身份验证方法：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">授权注册客户端的用户的凭据。这是<code class="literal">ipa-client-install</code>预期的默认选项。
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">要直接向<code class="literal">ipa-client-install</code>提供授权用户的凭据， <code class="literal">ipa-client-install</code>使用<code class="literal">--principal</code>和<code class="literal">--password</code>选项。有关详细过程，请参阅<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#installing-client-basic-installing-a-client-by-using-user-credentials-interactive-installation" title="使用用户凭据安装客户端：交互式安装">“使用用户凭据安装客户端：交互式安装”</a>一节。
								</li></ul></div></li><li class="listitem"><p class="simpara">在服务器上预先生成的随机一次性密码：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">要使用此身份验证方法，请将<code class="literal">--random</code>选项添加到<code class="literal">ipa-client-install</code>选项。有关详细步骤，请参阅<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#installing-client-basic-installing-a-client-by-using-a-one-time-password-interactive-installation" title="使用一次性密码安装客户端：交互式安装">“使用一次性密码安装客户端：交互式安装”</a>一节。
								</li></ul></div></li><li class="listitem"><p class="simpara">以前注册的客户主要负责人：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">如果系统先前已注册为Identity Management客户端，则此选项可用。要使用此身份验证方法，请将<code class="literal">--keytab</code>选项添加到<code class="literal">ipa-client-install</code> 。有关详细信息<a class="xref" href="re-enrolling-an-ipa-client_installing-identity-management.html" title="Chapter 11. Re-enrolling an Identity Management client">，</a>请参见<a class="xref" href="re-enrolling-an-ipa-client_installing-identity-management.html" title="Chapter 9. 重新注册Identity Management客户端">第11章， <em>重新注册Identity Management客户端</em></a> 。
								</li></ul></div></li></ul></div><h4><a id="additional_resources_6"></a>其他资源</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">有关<code class="literal">ipa-client-install</code>接受的选项的详细信息，请参阅<span class="strong"><strong>ipa-client-install</strong></span> （1）手册页。
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="installing-client-basic-installing-a-client-by-using-user-credentials-interactive-installation"></a>使用用户凭据安装客户端：交互式安装</h1></div></div></div><p>此过程描述了使用授权用户的凭据以交互方式安装Identity Management客户端，以将系统注册到域中。
				</p><h3><a id="prerequisites_5"></a>先决条件</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">确保您拥有授权将客户端注册到Identity Management域的用户凭据。例如，这可能是具有注册管理员角色的<code class="literal">hostadmin</code>用户。
						</li></ul></div><h3><a id="procedure_12"></a>程序</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">在要配置为Identity Management客户端的系统上运行<code class="literal">ipa-client-install</code>实用程序。
						</p><pre class="literallayout"># <span class="strong"><strong>ipa-client-install</strong></span></pre><p class="simpara">如果满足以下任一条件，请添加<code class="literal">--enable-dns-updates</code>选项以使用客户端系统的IP地址更新DNS记录：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">客户端将注册的身份管理服务器安装了集成的DNS</li><li class="listitem">网络上的DNS服务器接受使用GSS-TSIG协议的DNS条目更新</li></ul></div><pre class="literallayout"># <span class="strong"><strong>ipa-client-install --enable-dns-updates</strong></span></pre><p class="simpara">如果您的客户端启用DNS更新很有用：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">具有使用动态主机配置协议发出的动态IP地址</li><li class="listitem">有一个静态IP地址，但它刚刚被分配，IdM服务器不知道它</li></ul></div></li><li class="listitem"><p class="simpara">安装脚本会尝试自动获取所有必需的设置，例如DNS记录。
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">如果在IdM DNS区域中正确设置了SRV记录，则脚本会自动发现所有其他所需值并显示它们。输入<code class="literal">yes</code>进行确认。
								</p><pre class="literallayout">Client hostname: client.example.com
Realm: EXAMPLE.COM
DNS Domain: example.com
IPA Server: server.example.com
BaseDN: dc=example,dc=com

Continue to configure the system with these values? [no]: <span class="strong"><strong>yes</strong></span></pre></li><li class="listitem"><p class="simpara">要使用不同的值安装系统，请输入<code class="literal">no</code> 。然后再次运行<code class="literal">ipa-client-install</code> ，并通过向<code class="literal">ipa-client-install</code>添加命令行选项来指定所需的值，例如：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											<code class="literal">- 主机名</code>
										</li><li class="listitem">
											<code class="literal">- 领域</code>
										</li><li class="listitem">
											<code class="literal">- 域</code>
										</li><li class="listitem">
											<code class="literal">- 服务器</code>
										</li></ul></div></li><li class="listitem">如果脚本无法自动获取某些设置，则会提示您输入值。
								</li></ul></div><div class="important" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">重要</h3><p>完全限定的域名必须是有效的DNS名称：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">仅允许使用数字，字母字符和连字符（ - ）。例如，不允许使用下划线，这可能导致DNS失败。
									</li><li class="listitem">主机名必须全部为小写。不允许使用大写字母。
									</li></ul></div></div></li><li class="listitem"><p class="simpara">该脚本会提示用户身份将用于注册客户端。例如，这可能是具有注册管理员角色的<code class="literal">hostadmin</code>用户：</p><pre class="literallayout">User authorized to enroll computers: <code class="literal">hostadmin</code>
Password for <code class="literal">hostadmin</code>@<code class="literal">EXAMPLE.COM</code>:</pre></li><li class="listitem"><p class="simpara">安装脚本现在配置客户端。等待操作完成。
						</p><pre class="literallayout">Client configuration complete.</pre></li></ol></div><h3><a id="additional_resources_7"></a>其他资源</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">有关客户端安装脚本如何搜索DNS记录的详细信息，请参阅<code class="literal">ipa-client-install</code> （1）手册页中的<code class="literal">DNS Autodiscovery</code>部分。
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="installing-client-basic-installing-a-client-by-using-a-one-time-password-interactive-installation"></a>使用一次性密码安装客户端：交互式安装</h1></div></div></div><p>此过程描述了使用一次性密码以系统方式将系统注册到域中，以交互方式安装Identity Management客户端。
				</p><h3><a id="prerequisites_6"></a>先决条件</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">在域中的服务器上，将未来的客户端系统添加为Identity Management主机。使用<code class="literal">--random</code>选项和<code class="literal">ipa host-add</code>命令为注册生成一次性随机密码。
						</p><pre class="literallayout">$ <span class="strong"><strong>ipa host-add <span class="emphasis"><em>client.example.com</em></span> --random</strong></span>
 --------------------------------------------------
 Added host "client.example.com"
 --------------------------------------------------
  Host name: client.example.com
  Random password: <span class="strong"><strong>W5YpARl=7M.n</strong></span>
  Password: True
  Keytab: False
  Managed by: server.example.com</pre><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>使用它将计算机注册到Identity Management域后，生成的密码将变为无效。注册完成后，它将替换为正确的主机密钥表。
							</p></div></li></ol></div><h3><a id="procedure_13"></a>程序</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">在要配置为Identity Management客户端的系统上运行<code class="literal">ipa-client-install</code>实用程序。使用<code class="literal">--password</code>选项提供一次性随机密码。由于密码通常包含特殊字符，因此请将其用单引号（'）括起来。
						</p><pre class="literallayout"># <span class="strong"><strong>ipa-client-install</strong></span></pre><p class="simpara">如果满足以下任一条件，请添加<code class="literal">--enable-dns-updates</code>选项以使用客户端系统的IP地址更新DNS记录：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">客户端将注册的身份管理服务器安装了集成的DNS</li><li class="listitem">网络上的DNS服务器接受使用GSS-TSIG协议的DNS条目更新</li></ul></div><pre class="literallayout"># <span class="strong"><strong>ipa-client-install --password 'W5YpARl=7M.n' --enable-dns-updates</strong></span></pre><p class="simpara">如果您的客户端启用DNS更新很有用：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">具有使用动态主机配置协议发出的动态IP地址</li><li class="listitem">有一个静态IP地址，但它刚刚被分配，IdM服务器不知道它</li></ul></div></li><li class="listitem"><p class="simpara">安装脚本会尝试自动获取所有必需的设置，例如DNS记录。
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">如果在IdM DNS区域中正确设置了SRV记录，则脚本会自动发现所有其他所需值并显示它们。输入<code class="literal">yes</code>进行确认。
								</p><pre class="literallayout">Client hostname: client.example.com
Realm: EXAMPLE.COM
DNS Domain: example.com
IPA Server: server.example.com
BaseDN: dc=example,dc=com

Continue to configure the system with these values? [no]: <span class="strong"><strong>yes</strong></span></pre></li><li class="listitem"><p class="simpara">要使用不同的值安装系统，请输入<code class="literal">no</code> 。然后再次运行<code class="literal">ipa-client-install</code> ，并通过向<code class="literal">ipa-client-install</code>添加命令行选项来指定所需的值，例如：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											<code class="literal">- 主机名</code>
										</li><li class="listitem">
											<code class="literal">- 领域</code>
										</li><li class="listitem">
											<code class="literal">- 域</code>
										</li><li class="listitem">
											<code class="literal">- 服务器</code>
										</li></ul></div></li><li class="listitem">如果脚本无法自动获取某些设置，则会提示您输入值。
								</li></ul></div><div class="important" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">重要</h3><p>完全限定的域名必须是有效的DNS名称：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">仅允许使用数字，字母字符和连字符（ - ）。例如，不允许使用下划线，这可能导致DNS失败。
									</li><li class="listitem">主机名必须全部为小写。不允许使用大写字母。
									</li></ul></div></div></li><li class="listitem"><p class="simpara">安装脚本现在配置客户端。等待操作完成。
						</p><pre class="literallayout">Client configuration complete.</pre></li></ol></div><h3><a id="additional_resources_8"></a>其他资源</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">有关客户端安装脚本如何搜索DNS记录的详细信息，请参阅<code class="literal">ipa-client-install</code> （1）手册页中的<code class="literal">DNS Autodiscovery</code>部分。
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="installing-ipa-client-non-interactive-install_install-client-basic"></a>安装客户端：非交互式安装</h1></div></div></div><p>对于非交互式安装，您必须使用命令行选项向<code class="literal">ipa-client-install</code>实用程序提供所有必需的信息。以下部分描述了非交互式安装所需的最低选项。
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">客户端注册的预期身份验证方法的选项</span></dt><dd><p class="simpara">可用选项包括：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										<code class="literal">--principal</code>和<code class="literal">--password</code>指定有权注册客户端的用户的凭据</li><li class="listitem">
										<code class="literal">--random</code>指定为客户端生成的一次性随机密码</li><li class="listitem">
										<code class="literal">--keytab</code>指定先前注册的keytab</li></ul></div><p class="simpara">有关详细信息，请参阅<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#overview-of-the-ipa-client-installation-options" title="Identity Management客户端安装选项的概述">“Identity Management客户端安装选项概述”一节</a> 。
							</p></dd><dt><span class="term">无人参与安装的选项</span></dt><dd><p class="simpara"><code class="literal">--unattended</code>允许安装运行而无需用户确认。
							</p><p class="simpara">如果在IdM DNS区域中正确设置了SRV记录，则脚本会自动发现所有其他所需值。如果脚本无法自动发现值，请使用命令行选项提供它们，例如：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
										<code class="literal">--hostname</code>指定客户端计算机的静态主机名</p><div class="important" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">重要</h3><p>完全限定的域名必须是有效的DNS名称：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">仅允许使用数字，字母字符和连字符（ - ）。例如，不允许使用下划线，这可能导致DNS失败。
												</li><li class="listitem">主机名必须全部为小写。不允许使用大写字母。
												</li></ul></div></div></li><li class="listitem">
										<code class="literal">--server</code>指定客户端将注册的IdM服务器的主机名</li><li class="listitem">
										<code class="literal">--domain</code>指定客户端将注册的IdM服务器的DNS域名</li><li class="listitem">
										<code class="literal">--realm</code>指定Kerberos领域名称</li></ul></div></dd></dl></div><p>用于非交互式安装的基本<span class="strong"><strong>ipa-client-install</strong></span>命令的示例：</p><pre class="literallayout"># <span class="strong"><strong>ipa-client-install --password '<span class="emphasis"><em>W5YpARl=7M.n</em></span>' --unattended</strong></span></pre><p>
					 <br>
				</p><p>用于非交互式安装的<span class="strong"><strong>ipa-client-install</strong></span>命令的示例，其中指定了更多选项：</p><pre class="literallayout"># <span class="strong"><strong>ipa-client-install --password '<span class="emphasis"><em>W5YpARl=7M.n</em></span>' --domain <span class="emphasis"><em>example.com</em></span> --server <span class="emphasis"><em>server.idm.example.com</em></span> --unattended</strong></span></pre><h3><a id="additional_resources_9"></a>其他资源</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">有关<code class="literal">ipa-client-install</code>接受的选项的完整列表，请参阅<span class="strong"><strong>ipa-client-install</strong></span> （1）手册页。
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="removing-pre-ipa-configuration-after-installing-client_install-client-basic"></a>安装客户端后删除身份前管理配置</h1></div></div></div><p><code class="literal">ipa-client-install</code>脚本不会从<code class="literal">/etc/openldap/ldap.conf</code>和<code class="literal">/etc/sssd/sssd.conf</code>文件中删除任何以前的LDAP和SSSD配置。如果在安装客户端之前修改了这些文件中的配置，则脚本会添加新的客户端值，但会将其注释掉。例如：</p><pre class="literallayout">BASE   dc=example,dc=com
URI    ldap://ldap.example.com

#URI ldaps://server.example.com # modified by IPA
#BASE dc=ipa,dc=example,dc=com # modified by IPA</pre><p>要应用新的Identity Management配置值：</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">打开<code class="literal">/etc/openldap/ldap.conf</code>和<code class="literal">/etc/sssd/sssd.conf</code> 。
						</li><li class="listitem">删除以前的配置。
						</li><li class="listitem">取消注释新的Identity Management配置。
						</li><li class="listitem">依赖于系统范围的LDAP配置的服务器进程可能需要重新启动才能应用更改。使用<code class="literal">openldap</code>库的应用程序通常在启动时导入配置。
						</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="testing-an-ipa-client-installing-client-basic"></a>测试Identity Management客户端</h1></div></div></div><p>命令行界面通知您<code class="literal">ipa-client-install</code>成功，但您也可以进行自己的测试。</p><p>要测试Identity Management客户端是否可以获取有关在服务器上定义的用户的信息，请检查您是否能够解析在服务器上定义的用户。例如，要检查默认<code class="literal">admin</code>用户：</p><pre class="literallayout">[user@client ~]$ <span class="strong"><strong>id admin</strong></span>
uid=1254400000(admin) gid=1254400000(admins) groups=1254400000(admins)</pre><p>要测试身份验证是否正常工作，请从非root用户<code class="literal">su</code>到root用户：</p><pre class="literallayout">[user@client ~]$ <span class="strong"><strong>su -</strong></span>
Last login: Thu Oct 18 18:39:11 CEST 2018 from 192.168.122.1 on pts/0
[root@client ~]#</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="connection-requests-during-an-ipa-client-installation"></a>在Identity Management客户端安装期间执行的连接</h1></div></div></div><p>
					<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-requests-client-installation" title="表9.1。在Identity Management客户端安装期间执行的请求">表9.1“Identity Management客户端安装期间执行的请求”</a>列出了<code class="literal">ipa-client-install</code> （身份管理（IdM）客户端安装工具）执行的操作。
				</p><div class="table"><a id="tab-requests-client-installation"></a><p class="title"><strong>表9.1。在Identity Management客户端安装期间执行的请求</strong></p><div class="table-contents"><table border="1" summary="Requests performed during an Identity Management client installation"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th valign="top" style="text-align:left">手术</th><th valign="top" style="text-align:left">使用的协议</th><th valign="top" style="text-align:left">目的</th></tr></thead><tbody><tr><td valign="top" style="text-align:left"> <p>针对客户端系统上配置的DNS解析器的DNS解析</p>
								 </td><td valign="top" style="text-align:left"> <p>DNS</p>
								 </td><td valign="top" style="text-align:left"> <p>发现IdM主人的IP地址; （可选）添加A / AAAA和SSHFP记录</p>
								 </td></tr><tr><td valign="top" style="text-align:left"> <p>对IdM副本上的端口88（TCP / TCP6和UDP / UDP6）的请求</p>
								 </td><td valign="top" style="text-align:left"> <p>Kerberos的</p>
								 </td><td valign="top" style="text-align:left"> <p>获取Kerberos票证</p>
								 </td></tr><tr><td valign="top" style="text-align:left"> <p>JSON-RPC在已发现或已配置的IdM主服务器上调用基于IdM Apache的Web服务</p>
								 </td><td valign="top" style="text-align:left"> <p>HTTPS</p>
								 </td><td valign="top" style="text-align:left"> <p>IdM客户注册;如果LDAP方法失败，则检索CA证书链;如果需要，请求颁发证书</p>
								 </td></tr><tr><td valign="top" style="text-align:left"> <p>使用SASL GSSAPI身份验证，普通LDAP或两者，通过TCP / TCP6向IdM服务器上的端口389发出请求</p>
								 </td><td valign="top" style="text-align:left"> <p>LDAP</p>
								 </td><td valign="top" style="text-align:left"> <p>IdM客户注册;通过SSSD流程进行身份检索;主机主体的Kerberos密钥检索</p>
								 </td></tr><tr><td valign="top" style="text-align:left"> <p>网络时间协议（NTP）发现和解决方案（可选）</p>
								 </td><td valign="top" style="text-align:left"> <p>NTP</p>
								 </td><td valign="top" style="text-align:left"> <p>同步客户端系统和NTP服务器之间的时间</p>
								 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ipa-client-communication-with-server"></a> Identity Management客户端在安装后部署期间与服务器的通信</h1></div></div></div><p>身份管理（IdM）框架的客户端使用两个不同的应用程序实现：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">ipa</code>命令行界面（CLI）</li><li class="listitem">基于浏览器的Web UI</li></ul></div><p>基于浏览器的Web UI是可选的。
				</p><p>
					<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-ipa-operations" title="表9.2。CLI安装后操作">表9.2“CLI安装后操作”</a>显示了CLI在IdM客户端安装后部署期间执行的操作。<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-browser-operations" title="Table 9.3. webUI post-installation operations">表9.3“webUI安装后操作”</a>显示了在<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-browser-operations" title="表9.3。 webUI安装后操作">UIM</a>客户端安装后部署期间Web UI执行的操作。
				</p><p>两个守护进程在IdM客户端， <code class="literal">System Security Services Daemon</code> （SSSD）和<code class="literal">certmonger</code> 。 <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#sssd-deployment-operations" title="SSSD通信模式">称为“SSSD通信模式”</a> <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#certmonger-deployment-operations" title="Certmonger communication patterns">的部分</a>和<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#certmonger-deployment-operations" title="Certmonger沟通模式">称为“Certmonger通信模式”的部分</a>描述了这些守护进程如何与IdM和Active Directory服务器上可用的服务进行通信。
				</p><div class="table"><a id="tab-ipa-operations"></a><p class="title"><strong>表9.2。CLI安装后操作</strong></p><div class="table-contents"><table border="1" summary="CLI post-installation operations"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th valign="top" style="text-align:left">手术</th><th valign="top" style="text-align:left">使用的协议</th><th valign="top" style="text-align:left">目的</th></tr></thead><tbody><tr><td valign="top" style="text-align:left"> <p>针对客户端系统上配置的DNS解析器的DNS解析</p>
								 </td><td valign="top" style="text-align:left"> <p>DNS</p>
								 </td><td valign="top" style="text-align:left"> <p>发现IdM主站的IP地址</p>
								 </td></tr><tr><td valign="top" style="text-align:left"> <p>对IdM副本上的端口88（TCP / TCP6和UDP / UDP6）和464（TCP / TCP6和UDP / UDP6）的请求</p>
								 </td><td valign="top" style="text-align:left"> <p>Kerberos的</p>
								 </td><td valign="top" style="text-align:left"> <p>获取Kerberos票证;更改Kerberos密码;对IdM Web UI进行身份验证</p>
								 </td></tr><tr><td valign="top" style="text-align:left"> <p>JSON-RPC在已发现或已配置的IdM主服务器上调用基于IdM Apache的Web服务</p>
								 </td><td valign="top" style="text-align:left"> <p>HTTPS</p>
								 </td><td valign="top" style="text-align:left"> <p>任何<code class="literal">ipa</code>实用程序用法</p>
								 </td></tr></tbody></table></div></div><div class="table"><a id="tab-browser-operations"></a><p class="title"><strong>表9.3。 webUI安装后操作</strong></p><div class="table-contents"><table border="1" summary="webUI post-installation operations"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th valign="top" style="text-align:left">手术</th><th valign="top" style="text-align:left">使用的协议</th><th valign="top" style="text-align:left">目的</th></tr></thead><tbody><tr><td valign="top" style="text-align:left"> <p>JSON-RPC在已发现或已配置的IdM主服务器上调用基于IdM Apache的Web服务</p>
								 </td><td valign="top" style="text-align:left"> <p>HTTPS</p>
								 </td><td valign="top" style="text-align:left"> <p>检索IdM Web UI页面</p>
								 </td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sssd-deployment-operations"></a> SSSD通信模式</h2></div></div></div><p>系统安全服务守护程序（SSSD）是一种用于访问远程目录和身份验证机制的系统服务。如果在IdM客户端上配置，它将连接到IdM服务器，该服务器提供身份验证，授权和其他身份和策略信息。如果IdM服务器与Active Directory（AD）处于信任关系中，则SSSD还会连接到AD以使用Kerberos协议对AD用户执行身份验证。默认情况下，SSSD使用Kerberos对任何非本地用户进行身份验证。在特殊情况下，可能会将SSSD配置为使用LDAP协议。
					</p><p>系统安全服务守护程序（SSSD）可以配置为与多个服务器通信。<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-sssd-deployment-operations-clients" title="表9.4。与IdM服务器通信时，IdM客户端上SSSD的通信模式">表9.4“与IdM服务器通信时在IdM客户端上的SSSD的通信模式”</a>和<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-sssd-deployment-operations-trust-controllers" title="Table 9.5. Communication patterns of SSSD on IdM servers acting as trust agents when talking to Active Directory Domain Controllers">表9.5“在与Active Directory域控制器</a>通信<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-sssd-deployment-operations-trust-controllers" title="Table 9.5. Communication patterns of SSSD on IdM servers acting as trust agents when talking to Active Directory Domain Controllers">时充当信任代理的IdM服务器上的SSSD的</a>通信模式<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-sssd-deployment-operations-trust-controllers" title="表9.5。与Active Directory域控制器通信时，IdM服务器上的SSSD通信模式充当信任代理">”</a>显示了IdM中SSSD的通用通信模式。</p><div class="table"><a id="tab-sssd-deployment-operations-clients"></a><p class="title"><strong>表9.4。与IdM服务器通信时，IdM客户端上SSSD的通信模式</strong></p><div class="table-contents"><table border="1" summary="Communication patterns of SSSD on IdM clients when talking to IdM servers"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th valign="top" style="text-align:left">手术</th><th valign="top" style="text-align:left">使用的协议</th><th valign="top" style="text-align:left">目的</th></tr></thead><tbody><tr><td valign="top" style="text-align:left"> <p>针对客户端系统上配置的DNS解析器的DNS解析</p>
									 </td><td valign="top" style="text-align:left"> <p>DNS</p>
									 </td><td valign="top" style="text-align:left"> <p>发现IdM主站的IP地址</p>
									 </td></tr><tr><td valign="top" style="text-align:left"> <p>对Identity Management副本和Active Directory域控制器上的端口88（TCP / TCP6和UDP / UDP6），464（TCP / TCP6和UDP / UDP6）和749（TCP / TCP6）的请求</p>
									 </td><td valign="top" style="text-align:left"> <p>Kerberos的</p>
									 </td><td valign="top" style="text-align:left"> <p>获取Kerberos票证;更改Kerberos密码</p>
									 </td></tr><tr><td valign="top" style="text-align:left"> <p>使用SASL GSSAPI身份验证，普通LDAP或两者，通过TCP / TCP6向IdM服务器上的端口389发出请求</p>
									 </td><td valign="top" style="text-align:left"> <p>LDAP</p>
									 </td><td valign="top" style="text-align:left"> <p>要获取有关IdM用户和主机的信息，请下载HBAC和sudo规则，自动安装映射，SELinux用户上下文，公共SSH密钥以及存储在IdM LDAP中的其他信息</p>
									 </td></tr><tr><td valign="top" style="text-align:left"> <p>（可选）如果是智能卡身份验证，则向在线证书状态协议（OCSP）响应程序（如果已配置）发出请求。这通常通过端口80完成，但它取决于客户端证书中OCSP响应器URL的实际值。
									</p>
									 </td><td valign="top" style="text-align:left"> <p>HTTP</p>
									 </td><td valign="top" style="text-align:left"> <p>获取有关智能卡中安装的证书状态的信息</p>
									 </td></tr></tbody></table></div></div><div class="table"><a id="tab-sssd-deployment-operations-trust-controllers"></a><p class="title"><strong>表9.5。与Active Directory域控制器通信时，IdM服务器上的SSSD通信模式充当信任代理</strong></p><div class="table-contents"><table border="1" summary="Communication patterns of SSSD on IdM servers acting as trust agents when talking to Active Directory Domain Controllers"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th valign="top" style="text-align:left">手术</th><th valign="top" style="text-align:left">使用的协议</th><th valign="top" style="text-align:left">目的</th></tr></thead><tbody><tr><td valign="top" style="text-align:left"> <p>针对客户端系统上配置的DNS解析器的DNS解析</p>
									 </td><td valign="top" style="text-align:left"> <p>DNS</p>
									 </td><td valign="top" style="text-align:left"> <p>发现IdM主站的IP地址</p>
									 </td></tr><tr><td valign="top" style="text-align:left"> <p>对Identity Management副本和Active Directory域控制器上的端口88（TCP / TCP6和UDP / UDP6），464（TCP / TCP6和UDP / UDP6）和749（TCP / TCP6）的请求</p>
									 </td><td valign="top" style="text-align:left"> <p>Kerberos的</p>
									 </td><td valign="top" style="text-align:left"> <p>获取Kerberos票证;更改Kerberos密码;远程管理Kerberos</p>
									 </td></tr><tr><td valign="top" style="text-align:left"> <p>对端口389（TCP / TCP6和UDP / UDP6）和3268（TCP / TCP6）的请求</p>
									 </td><td valign="top" style="text-align:left"> <p>LDAP</p>
									 </td><td valign="top" style="text-align:left"> <p>查询Active Directory用户和组信息;发现Active Directory域控制器</p>
									 </td></tr><tr><td valign="top" style="text-align:left"> <p>（可选）如果是智能卡身份验证，则向在线证书状态协议（OCSP）响应程序（如果已配置）发出请求。这通常通过端口80完成，但它取决于客户端证书中OCSP响应器URL的实际值。
									</p>
									 </td><td valign="top" style="text-align:left"> <p>HTTP</p>
									 </td><td valign="top" style="text-align:left"> <p>获取有关智能卡中安装的证书状态的信息</p>
									 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="certmonger-deployment-operations"></a> Certmonger沟通模式</h2></div></div></div><p>
						<code class="literal">Certmonger</code>是在IdM主服务器和IdM客户端上运行的守护程序，允许及时续订与主机上的服务相关联的SSL证书。<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-certmonger-deployment-operations" title="表9.6。Certmonger沟通模式">表9.6“Certmonger通信模式”</a>显示了IdM客户端的<code class="literal">certmonger</code>实用程序在IdM主服务器上执行的操作。
					</p><div class="table"><a id="tab-certmonger-deployment-operations"></a><p class="title"><strong>表9.6。Certmonger沟通模式</strong></p><div class="table-contents"><table border="1" summary="Certmonger communication patterns"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th valign="top" style="text-align:left">手术</th><th valign="top" style="text-align:left">使用的协议</th><th valign="top" style="text-align:left">目的</th></tr></thead><tbody><tr><td valign="top" style="text-align:left"> <p>针对客户端系统上配置的DNS解析器的DNS解析</p>
									 </td><td valign="top" style="text-align:left"> <p>DNS</p>
									 </td><td valign="top" style="text-align:left"> <p>发现IdM主站的IP地址</p>
									 </td></tr><tr><td valign="top" style="text-align:left"> <p>对IdM副本上的端口88（TCP / TCP6和UDP / UDP6）和464（TCP / TCP6和UDP / UDP6）的请求</p>
									 </td><td valign="top" style="text-align:left"> <p>Kerberos的</p>
									 </td><td valign="top" style="text-align:left"> <p>获取Kerberos票证</p>
									 </td></tr><tr><td valign="top" style="text-align:left"> <p>JSON-RPC在已发现或已配置的IdM主服务器上调用基于IdM Apache的Web服务</p>
									 </td><td valign="top" style="text-align:left"> <p>HTTPS</p>
									 </td><td valign="top" style="text-align:left"> <p>申请新证书</p>
									 </td></tr><tr><td valign="top" style="text-align:left"> <p>通过IdM主站上的端口8080（TCP / TCP6）进行访问</p>
									 </td><td valign="top" style="text-align:left"> <p>HTTP</p>
									 </td><td valign="top" style="text-align:left"> <p>获取在线证书状态协议（OCSP）响应者和证书状态</p>
									 </td></tr><tr><td valign="top" style="text-align:left"> <p>（在第一个已安装的服务器上或已转移证书跟踪的服务器上）通过IdM主站上的端口8443（TCP / TCP6）进行访问</p>
									 </td><td valign="top" style="text-align:left"> <p>HTTPS</p>
									 </td><td valign="top" style="text-align:left"> <p>在IdM主服务器上管理证书颁发机构（仅在IdM主服务器和副本服务器安装期间）</p>
									 </td></tr></tbody></table></div></div></div></div></div></body></html>
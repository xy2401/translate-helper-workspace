<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 2. Getting started with virtualization in RHEL 8</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization"/>Chapter 2. Getting started with virtualization in RHEL 8</h1></div></div></div><p>
			To start using <a class="link" href="configuring_and_managing_virtualization/#virtualization-in-rhel-8-an-overview_configuring-and-managing-virtualization">virtualization in RHEL 8</a>, follow the steps below. The default method for this is the command-line interface (CLI), but for user convenience, some of the steps can be completed in the <a class="link" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html" title="Chapter 5. Using the RHEL 8 web console for managing virtual machines">the web console GUI</a>.
		</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
					Enable the virtualization module and install the virtualization packages - see <a class="xref" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#enabling-virtualization-in-rhel8_virt-getting-started" title="Enabling virtualization in RHEL 8">the section called “Enabling virtualization in RHEL 8”</a>.
				</li><li class="listitem"><p class="simpara">
					Create a guest virtual machine:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For CLI, see <a class="xref" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" title="Creating virtual machines using the command-line interface">the section called “Creating virtual machines using the command-line interface”</a>.
						</li><li class="listitem">
							For GUI, see <a class="xref" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#creating-vms-using-the-rhel-8-web-console_assembly_creating-virtual-machines" title="Creating virtual machines using the RHEL 8 web console">the section called “Creating virtual machines using the RHEL 8 web console”</a>.
						</li></ul></div></li><li class="listitem"><p class="simpara">
					Start the guest virtual machine:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For CLI, see <a class="xref" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines" title="Starting a virtual machine using the command-line interface">the section called “Starting a virtual machine using the command-line interface”</a>.
						</li><li class="listitem">
							For GUI, see <a class="xref" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#powering-up-vms-using-the-rhel-8-web-console_assembly_starting-virtual-machines" title="Powering up virtual machines in the RHEL 8 web console">the section called “Powering up virtual machines in the RHEL 8 web console”</a>.
						</li></ul></div></li><li class="listitem"><p class="simpara">
					Connect to the guest virtual machine:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For CLI, see <a class="xref" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines" title="Connecting to a virtual machine using SSH">the section called “Connecting to a virtual machine using SSH”</a> or <a class="xref" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="Opening a virtual machine graphical console using Virt Viewer">the section called “Opening a virtual machine graphical console using Virt Viewer”</a>.
						</li><li class="listitem">
							For GUI, see <a class="xref" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#viewing-guest-graphical-console-in-the-rhel-8-web-console_assembly_connecting-to-virtual-machines" title="Viewing the virtual machine graphical console in the RHEL 8 web console">the section called “Viewing the virtual machine graphical console in the RHEL 8 web console”</a>.
						</li></ul></div></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
				The web console currently provides only a subset of guest management functions for virtual machines, so using the command line is recommended for advanced use of virtualization in RHEL 8.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="enabling-virtualization-in-rhel8_virt-getting-started"/>Enabling virtualization in RHEL 8</h1></div></div></div><p>
				To use virtualization in RHEL 8, you must enable the virtualization module, install virtualization packages, and ensure your system is configured to host virtual machines.
			</p><h3><a id="prerequisites"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Red Hat Enterprise Linux 8 must be <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/index">installed and registered</a> on your host machine.
					</li><li class="listitem"><p class="simpara">
						Your system must meet the following hardware requirements to work as a virtualization host:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								The architecture of your host machine <a class="link" href="feature-support-and-limitations-in-rhel8-virtualization_configuring-and-managing-virtualization.html#recommended-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization" title="Recommended features in RHEL 8 virtualization">supports KVM virtualization</a>.
							</li><li class="listitem"><p class="simpara">
								The following system resources are available, or more:
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										6 GB free disk space for the host, plus another 6 GB for each intended guest
									</li><li class="listitem">
										2 GB of RAM for the host, plus another 2 GB for each intended guest
									</li></ul></div></li></ul></div></li></ul></div><h3><a id="procedure"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Install the packages in the virtualization module:
					</p><pre class="literallayout"># <span class="strong"><strong>yum module install virt</strong></span></pre></li><li class="listitem"><p class="simpara">
						Install the <code class="literal">virt-install</code> package:
					</p><pre class="literallayout"># <span class="strong"><strong>yum install virt-install</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify that your system is prepared to be a virtualization host:
					</p><pre class="literallayout"># <span class="strong"><strong>virt-host-validate</strong></span>
[...]
QEMU: Checking for device assignment IOMMU support         : PASS
QEMU: Checking if IOMMU is enabled by kernel               : WARN (IOMMU appears to be disabled in kernel. Add intel_iommu=on to kernel cmdline arguments)
LXC: Checking for Linux &gt;= 2.6.26                          : PASS
[...]
LXC: Checking for cgroup 'blkio' controller mount-point    : PASS
LXC: Checking if device /sys/fs/fuse/connections exists    : FAIL (Load the 'fuse' module to enable /proc/ overrides)</pre></li><li class="listitem"><p class="simpara">
						If all <span class="strong"><strong>virt-host-validate</strong></span> checks return a <code class="literal">PASS</code> value, your system is prepared for <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#assembly_creating-virtual-machines_virt-getting-started" title="Creating virtual machines">creating virtual machines</a>.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">FAIL</code> value, follow the displayed instructions to fix the problem.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">WARN</code> value, consider following the displayed instructions to improve virtualization capabilities.
					</p></li></ol></div><h3><a id="additional_information"/>Additional information</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
						Note that if virtualization is not supported by your host CPU, <span class="strong"><strong>virt-host-validate</strong></span> generates the following output:
					</p><pre class="literallayout">QEMU: Checking for hardware virtualization: FAIL (Only emulated CPUs are available, performance will be significantly limited)</pre><p class="simpara">
						However, attempting to create virtual machines on such a host system will fail, rather than have performance problems.
					</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="assembly_creating-virtual-machines_virt-getting-started"/>Creating virtual machines</h1></div></div></div><p>
				To create a virtual machine (VM) in RHEL 8, use the <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" title="Creating virtual machines using the command-line interface">command line interface</a> or the <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#creating-vms-using-the-rhel-8-web-console_assembly_creating-virtual-machines" title="Creating virtual machines using the RHEL 8 web console">the RHEL 8 web console</a>.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="prerequisites-assembly_creating-virtual-machines"/>Prerequisites</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Virtualization must be <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#enabling-virtualization-in-rhel8_virt-getting-started" title="Enabling virtualization in RHEL 8">installed and enabled</a> on your system.
						</li><li class="listitem"><p class="simpara">
							Prior to creating VMs on your system, consider the amount of system resources you need to allocate to your VMs, such as disk space, RAM, or CPUs. The recommended values may vary significantly depending on the intended tasks and workload of the VMs.
						</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
								Installing from a host CD-ROM or DVD-ROM device is not possible in RHEL 8. If you select a CD-ROM or DVD-ROM as the installation source when using any VM installation method available in RHEL 8, the installation will fail. For more information, see the <a class="link" href="https://access.redhat.com/solutions/1185913">Red Hat Knowledge Base</a>.
							</p></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines"/>Creating virtual machines using the command-line interface</h2></div></div></div><p>
					To create a virtual machine (VM) on your RHEL 8 host using the <code class="literal">virt-install</code> utility, follow the instructions below.
				</p><h4><a id="prerequisites_2"/>Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							An operating system (OS) installation source, which can be one of the following, and can be available locally or on a network:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									An ISO image of an installation medium
								</li><li class="listitem">
									A disk image of an existing virtual machine installation
								</li></ul></div></li><li class="listitem">
							Optionally, a Kickstart file can also be provided for faster and easier configuration of the installation.
						</li></ul></div><h4><a id="procedure_2"/>Procedure</h4><p>
					To create a VM and start its OS installation, use the <code class="literal">virt-install</code> command. In its arguments, specify at minimum:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							The name of the new machine
						</li><li class="listitem">
							The amount of allocated memory
						</li><li class="listitem">
							The number of allocated virtual CPUs (vCPUs)
						</li><li class="listitem">
							The type and size of allocated storage
						</li><li class="listitem">
							The type and location of the OS installation source
						</li></ul></div><p>
					Based on the chosen installation method, the necessary options and values can vary. See below for examples:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							The following creates a VM named <span class="strong"><strong>demo-guest1</strong></span> that installs the Windows 10 OS from an ISO image locally stored in the <span class="strong"><strong>/home/username/Downloads/Win10install.iso</strong></span> file. This VM is also allocated with 2048 MiB of RAM, 2 vCPUs, and a 8 GiB qcow2 virtual disk is automatically configured for the VM.
						</p><pre class="literallayout"># <span class="strong"><strong>virt-install --name demo-guest1 --memory 2048 --vcpus 2 --disk size=8 --os-variant win10 --cdrom /home/username/Downloads/Win10install.iso</strong></span></pre></li><li class="listitem"><p class="simpara">
							The following creates a VM named <span class="strong"><strong>demo-guest2</strong></span> that uses the <span class="strong"><strong>/home/username/Downloads/rhel8.iso</strong></span> image to run a RHEL 8 OS from a live CD. No disk space is assigned to this VM, so changes made during the session will not be preserved. In addition, the VM is allocated with 4096 MiB of RAM and 4 vCPUs.
						</p><pre class="literallayout"># <span class="strong"><strong>virt-install --name demo-guest2 --memory 4096 --vcpus 4 --disk none --livecd --os-variant rhel8.0 --cdrom /home/username/Downloads/rhel8.iso</strong></span></pre></li><li class="listitem"><p class="simpara">
							The following creates a RHEL 8 VM named <span class="strong"><strong>demo-guest3</strong></span> connects to an existing disk image, <span class="strong"><strong>/home/username/backup/disk.qcow2</strong></span>. This is similar to physically moving a hard drive between machines, so the OS and data available to demo-guest3 are determined by how the image was handled previously. In addition, this VM is allocated with 2048 MiB of RAM and 2 vCPUs.
						</p><pre class="literallayout"># <span class="strong"><strong>virt-install --name demo-guest3 --memory 2048 --vcpus 2 --os-variant rhel8.0 --import --disk /home/username/backup/disk.qcow2</strong></span></pre><p class="simpara">
							Note that the <code class="literal">--os-variant</code> option is highly recommended when importing a disk image. If it is not provided, the performance of the created VM will be negatively affected.
						</p></li><li class="listitem"><p class="simpara">
							The following creates a VM named <span class="strong"><strong>demo-guest4</strong></span> that installs from the <code class="literal"><a class="link" href="http://example.com/OS-install">http://example.com/OS-install</a></code> URL. For the installation to start successfully, the URL must contain a working OS installation tree. In addition, the OS is automatically configured using the <span class="strong"><strong>/home/username/ks.cfg</strong></span> kickstart file. This VM is also allocated with 2048 MiB of RAM, 2 vCPUs, and a 16 GiB qcow2 virtual disk.
						</p><pre class="literallayout"># <span class="strong"><strong>virt-install --name demo-guest4 --memory 2048 --vcpus 2 --disk size=16 --os-variant rhel8.0 --location http://example.com/OS-install --initrd-inject /home/username/ks.cfg --extra-args="ks=file:/ks.cfg console=tty0 console=ttyS0,115200n8"</strong></span></pre></li><li class="listitem"><p class="simpara">
							The following creates a VM named <span class="strong"><strong>demo-guest5</strong></span> that installs from a <code class="literal">RHEL8.iso</code> file in text-only mode, without graphics. It connects the guest console to the serial console. The VM has 16384 MiB of memory, 16 vCPUs, and 280 GiB disk. This kind of installation is useful when connecting to a host over a slow network link.
						</p><pre class="literallayout"># <span class="strong"><strong>virt-install --name demo-guest5 --memory 16384 --vcpus 16 --disk size=280 --os-variant rhel8.0 --location RHEL8.iso --graphics none --extra-args='console=ttyS0'</strong></span></pre></li><li class="listitem"><p class="simpara">
							The following creates a VM named <span class="strong"><strong>demo-guest6</strong></span>, which has the same configuration as demo-guest5, but resides on the 10.0.0.1 remote host.
						</p><pre class="literallayout"># <span class="strong"><strong>virt-install --connect qemu+ssh://root@10.0.0.1/system --name demo-guest6 --memory 16384 --vcpus 16 --disk size=280 --os-variant rhel8.0 --location RHEL8.iso --graphics none --extra-args='console=ttyS0'</strong></span></pre></li></ul></div><p>
					If the the VM is created successfully, a <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="Opening a virtual machine graphical console using Virt Viewer">virt-viewer</a> window opens with a graphical console of the VM and starts the guest OS installation.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						A number of other options can be specified for <span class="strong"><strong>virt-install</strong></span> to further configure the VM and its OS installation. For details, see the <span class="strong"><strong>virt-install</strong></span> man page.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="creating-vms-using-the-rhel-8-web-console_assembly_creating-virtual-machines"/>Creating virtual machines using the RHEL 8 web console</h2></div></div></div><p>
					To​ create a VM on the host machine to which the web console is connected, follow the instructions below.
				</p><h4><a id="prerequisites_3"/>Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							To be able to use the RHEL 8 web console to manage virtual machines, you must install the web console virtual machine plug-in.
						</p><p class="simpara">
							If the web console plug-in is not installed, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="Setting up the RHEL 8 web console to manage virtual machines">the section called “Setting up the RHEL 8 web console to manage virtual machines”</a> for information about installing the web console virtual machine plug-in.
						</p></li><li class="listitem">
							Before creating VMs, consider the amount of system resources you need to allocate to your VMs, such as disk space, RAM, or CPUs. The recommended values may vary significantly depending on the intended tasks and workload of the VMs.
						</li><li class="listitem"><p class="simpara">
							A locally available operating system (OS) installation source, which can be one of the following:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									An ISO image of an installation medium
								</li><li class="listitem">
									A disk image of an existing guest installation
								</li></ul></div></li></ul></div><h4><a id="procedure_3"/>Procedure</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Click <span class="strong"><strong><span class="guibutton">Create VM</span></strong></span> in the Virtual Machines interface of the RHEL 8 web console.
						</p><p class="simpara">
							The Create New Virtual Machine dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/cockpit_create_new_vm.png" alt="cockpit create new vm"/></div></div></li><li class="listitem"><p class="simpara">
							Enter the basic configuration of the virtual machine you want to create.
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									<span class="strong"><strong>Connection</strong></span> - The connection to the host to be used by the virtual machine.
								</li><li class="listitem">
									<span class="strong"><strong>Name</strong></span> - The name of the virtual machine.
								</li><li class="listitem">
									<span class="strong"><strong>Installation Source Type</strong></span> - The type of the installation source: Filesystem, URL
								</li><li class="listitem">
									<span class="strong"><strong>Installation Source</strong></span> - The path or URL that points to the installation source.
								</li><li class="listitem">
									<span class="strong"><strong>OS Vendor</strong></span> - The vendor of the virtual machine’s operating system.
								</li><li class="listitem">
									<span class="strong"><strong>Operating System</strong></span> - The virtual machine’s operating system.
								</li><li class="listitem">
									<span class="strong"><strong>Memory</strong></span> - The amount of memory with which to configure the virtual machine.
								</li><li class="listitem">
									<span class="strong"><strong>Storage Size</strong></span> - The amount of storage space with which to configure the virtual machine.
								</li><li class="listitem">
									<span class="strong"><strong>Immediately Start VM</strong></span> - Whether or not the virtual machine will start immediately after it is created.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create</span>.
						</p><p class="simpara">
							The virtual machine is created. If the <span class="strong"><strong>Immediately Start VM</strong></span> checkbox is selected, the VM will immediately start and begin installing the guest operating system.
						</p></li></ol></div><p>
					You must install the operating system the first time the virtual machine is run.
				</p><h4><a id="additional_resources"/>Additional resources</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For information on installing an operating system on a virtual machine, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#installing-an-os-using-the-rhel-8-web-console_creating-vms-and-installing-an-os-using-the-rhel-8-web-console" title="Installing operating systems using the RHEL 8 web console">the section called “Installing operating systems using the RHEL 8 web console”</a>.
						</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="assembly_starting-virtual-machines_virt-getting-started"/>Starting virtual machines</h1></div></div></div><p>
				To start a virtual machine (VM) in RHEL 8, you can use <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines" title="Starting a virtual machine using the command-line interface">the command line interface</a> or <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#powering-up-vms-using-the-rhel-8-web-console_assembly_starting-virtual-machines" title="Powering up virtual machines in the RHEL 8 web console">the web console GUI</a>.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="prerequisites-assembly_starting-virtual-machines"/>Prerequisites</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Before a VM can be started, it must be created and ideally also installed with an OS. For instruction to do so, see <a class="xref" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#assembly_creating-virtual-machines_virt-getting-started" title="Creating virtual machines">the section called “Creating virtual machines”</a>.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines"/>Starting a virtual machine using the command-line interface</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							To start a local VM using the command-line interface, use the <code class="literal">virsh start</code> command:
						</p><pre class="literallayout"><span class="strong"><strong># virsh start demo-guest1</strong></span>
Domain demo-guest1 started</pre></li><li class="listitem"><p class="simpara">
							If the VM is on a remote host, use QEMU+SSH connection to the host. For example, the following starts the <code class="literal">demo-guest1</code> VM on the 192.168.123.123 host:
						</p><pre class="literallayout"><span class="strong"><strong># virsh -c qemu+ssh://root@192.168.123.123/system start demo-guest1</strong></span>

root@192.168.123.123's password:
Last login: Mon Feb 18 07:28:55 2019

Domain demo-guest1 started</pre><p class="simpara">
							Note that managing VMs on remote host can be simplified by <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="Setting up easy access to remote virtualization hosts">modifying your libvirt and SSH configuration</a>.
						</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="powering-up-vms-using-the-rhel-8-web-console_assembly_starting-virtual-machines"/>Powering up virtual machines in the RHEL 8 web console</h2></div></div></div><p>
					If a VM is in the <span class="strong"><strong>shut off</strong></span> state, you can start it using the RHEL 8 web console.
				</p><h4><a id="prerequisites_4"/>Prerequisites</h4><p>
					To be able to use the RHEL 8 web console to manage virtual machines, you must install the web console virtual machine plug-in.
				</p><p>
					If the web console plug-in is not installed, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="Setting up the RHEL 8 web console to manage virtual machines">the section called “Setting up the RHEL 8 web console to manage virtual machines”</a> for information about installing the web console virtual machine plug-in.
				</p><h4><a id="procedure_4"/>Procedure</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Click a row with the name of the virtual machine you want to start.<br/> The row expands to reveal the Overview pane with basic information about the selected virtual machine and controls for shutting down and deleting the virtual machine.
						</li><li class="listitem">
							Click <span class="guibutton">Run</span>.<br/> The virtual machine starts.
						</li></ol></div><h4><a id="additional_resources_2"/>Additional resources</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For information on shutting down a virtual machine, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#powering-down-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="Powering down virtual machines in the RHEL 8 web console">the section called “Powering down virtual machines in the RHEL 8 web console”</a>.
						</li><li class="listitem">
							For information on restarting a virtual machine, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#restarting-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="Restarting virtual machines using the RHEL 8 web console">the section called “Restarting virtual machines using the RHEL 8 web console”</a>.
						</li><li class="listitem">
							For information on sending a non-maskable interrupt to a virtual machine, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#sending-NMIs-to-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="Sending non-maskable interrupts to VMs using the RHEL 8 web console">the section called “Sending non-maskable interrupts to VMs using the RHEL 8 web console”</a>.
						</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="assembly_connecting-to-virtual-machines_virt-getting-started"/>Connecting to virtual machines</h1></div></div></div><p>
				To interact with a virtual machine (VM) in RHEL 8, you need to connect to it by doing one of the following:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						When using the RHEL 8 web console interface, use the Virtual Machines pane in the web console interface. For more information, see <a class="xref" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#viewing-guest-graphical-console-in-the-rhel-8-web-console_assembly_connecting-to-virtual-machines" title="Viewing the virtual machine graphical console in the RHEL 8 web console">the section called “Viewing the virtual machine graphical console in the RHEL 8 web console”</a>
					</li><li class="listitem">
						If you need to interact with a VM graphical display without using the RHEL 8 web console, use the Virt Viewer application. For details, see <a class="xref" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="Opening a virtual machine graphical console using Virt Viewer">the section called “Opening a virtual machine graphical console using Virt Viewer”</a>
					</li><li class="listitem">
						When a graphical display is not possible or not necessary, use <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines" title="Connecting to a virtual machine using SSH">an SSH terminal connection</a>.
					</li><li class="listitem">
						When the virtual machine is not reachable from your system by using a network, use <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines" title="Opening a virtual machine serial console">the virsh console</a>.
					</li></ul></div><p>
				If the VMs to which you are connecting are on a remote host rather than a local one, you can optionally also configure your system for <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="Setting up easy access to remote virtualization hosts">more convenient access to remote hosts</a>.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="prerequisites-assembly_connecting-to-virtual-machines"/>Prerequisites</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							The VMs you want to interact with are <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#assembly_creating-virtual-machines_virt-getting-started" title="Creating virtual machines">installed</a> and <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#assembly_starting-virtual-machines_virt-getting-started" title="Starting virtual machines">started</a>.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="viewing-guest-graphical-console-in-the-rhel-8-web-console_assembly_connecting-to-virtual-machines"/>Viewing the virtual machine graphical console in the RHEL 8 web console</h2></div></div></div><p>
					You can view the graphical console of a selected virtual machine in the RHEL 8 web console. The virtual machine console shows the graphical output of the virtual machine.
				</p><h4><a id="prerequisites_5"/>Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							To be able to use the RHEL 8 web console to manage virtual machines, you must install the web console virtual machine plug-in.
						</p><p class="simpara">
							If the web console plug-in is not installed, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="Setting up the RHEL 8 web console to manage virtual machines">the section called “Setting up the RHEL 8 web console to manage virtual machines”</a> for information about installing the web console virtual machine plug-in.
						</p></li><li class="listitem">
							Ensure that both the host and the VM support a graphical interface.
						</li></ul></div><h4><a id="procedure_5"/>Procedure</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Click a row with the name of the virtual machine whose graphical console you want to view.<br/> The row expands to reveal the Overview pane with basic information about the selected virtual machine and controls for shutting down and deleting the virtual machine.
						</li><li class="listitem">
							Click <span class="guibutton">Consoles</span>.<br/> The graphical console appears in the web interface.
						</li></ol></div><div class="informalfigure"><div class="mediaobject"><img src="images/cockpit_graphical_console_in_cockpit.png" alt="cockpit graphical console in cockpit"/></div></div><p>
					You can interact with the virtual machine console using the mouse and keyboard in the same manner you interact with a real machine. The display in the virtual machine console reflects the activities being performed on the virtual machine.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						The server on which the RHEL 8 web console is running can intercept specific key combinations, such as <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>, preventing them from being sent to the virtual machine.
					</p><p>
						To send such key combinations, click the <span class="guibutton">Send key</span> menu and select the key sequence to send.
					</p><p>
						For example, to send the <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span> combination to the virtual machine, click the <span class="guibutton">Send key</span> menu and select the <span class="guibutton">Ctrl+Alt+F1</span> menu entry.
					</p></div><h4><a id="additional_resources_3"/>Additional Resources</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For details on viewing the graphical console in a remote viewer, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#viewing-vm-consoles-in-remote-viewers-using-the-rhel-8-web-console_viewing-vm-consoles-using-the-rhel-8-web-console" title="Viewing virtual machine consoles in remote viewers using the RHEL 8 web console">the section called “Viewing virtual machine consoles in remote viewers using the RHEL 8 web console”</a>.
						</li><li class="listitem">
							For details on viewing the serial console in the RHEL 8 web console, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#viewing-vm-serial-console-in-the-rhel-8-web-console_viewing-vm-consoles-using-the-rhel-8-web-console" title="Viewing the virtual machine serial console in the RHEL 8 web console">the section called “Viewing the virtual machine serial console in the RHEL 8 web console”</a>.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines"/>Opening a virtual machine graphical console using Virt Viewer</h2></div></div></div><p>
					To connect to a graphical console of a KVM virtual machine (VM) and open it in the <code class="literal">Virt Viewer</code> desktop application, follow the procedure below.
				</p><h4><a id="prerequisites_6"/>Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Your system, as well as the virtual machine you are connecting to, must support graphical displays.
						</li><li class="listitem">
							If the target VM is located on a remote host, connection and root access privileges to the host are needed.
						</li><li class="listitem">
							<span class="strong"><strong>[Optional]</strong></span> If the target VM is located on a remote host, set up your libvirt and SSH for <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="Setting up easy access to remote virtualization hosts">more convenient access to remote hosts</a>.
						</li></ul></div><h4><a id="procedure_6"/>Procedure</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							To connect to a local VM, use the following command and replace <span class="emphasis"><em>guest-name</em></span> with the name of the VM you want to connect to:
						</p><pre class="literallayout"><span class="strong"><strong># virt-viewer guest-name</strong></span></pre></li><li class="listitem"><p class="simpara">
							To connect to a remote VM, use the <code class="literal">virt-viewer</code> command with the SSH protocol. For example, the following command connects as root to a VM called <span class="emphasis"><em>guest-name</em></span>, located on remote system 10.0.0.1. The connection also requires root authentication for 10.0.0.1.
						</p><pre class="literallayout"><span class="strong"><strong># virt-viewer --direct --connect qemu+ssh://root@10.0.0.1/system guest-name</strong></span>
root@10.0.0.1's password:</pre></li></ul></div><p>
					If the connection works correctly, the VM display is shown in the <code class="literal">Virt Viewer</code> window.
				</p><div class="informalfigure"><div class="mediaobject"><img src="images/virt-viewer-GUI.png" alt="Virt Viewer displaying a RHEL 7 guest OS"/></div></div><p>
					You can interact with the VM console using the mouse and keyboard in the same manner you interact with a real machine. The display in the VM console reflects the activities being performed on the VM.
				</p><h4><a id="additional_resources_4"/>Additional resources</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For more information on using Virt Viewer, see the <code class="literal">virt-viewer</code> man page.
						</li><li class="listitem">
							Connecting to VMs on a remote host can be simplified by <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="Setting up easy access to remote virtualization hosts">modifying your libvirt and SSH configuration</a>.
						</li><li class="listitem">
							For management of virtal machines in an interactive GUI in RHEL 8, you can use the web console interface. For more information, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#viewing-vm-consoles-using-the-rhel-8-web-console_using-the-rhel-8-web-console-for-managing-vms" title="Interacting with virtual machines using the RHEL 8 web console">the section called “Interacting with virtual machines using the RHEL 8 web console”</a>.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines"/>Connecting to a virtual machine using SSH</h2></div></div></div><p>
					To interact with the terminal of a virtual machine (VM) using the SSH connection protocol, follow the procedure below:
				</p><h4><a id="prerequisites_7"/>Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Network connection and root access privileges to the target VM.
						</li><li class="listitem"><p class="simpara">
							The <code class="literal">libvirt-nss</code> component must be installed and enabled on the VM’s host. If it is not, do the following:
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
									Install the <code class="literal">libvirt-nss</code> package:
								</p><pre class="literallayout"># <span class="strong"><strong>yum install libvirt-nss</strong></span></pre></li><li class="listitem"><p class="simpara">
									Edit the <code class="literal">/etc/nsswitch.conf</code> file and add <code class="literal">libvirt_guest</code> to the <code class="literal">hosts</code> line:
								</p><pre class="literallayout">[...]
passwd:      compat
shadow:      compat
group:       compat
hosts:       files libvirt_guest dns
[...]</pre></li></ol></div></li><li class="listitem">
							If the target VM is located on a remote host, connection and root access privileges to the host are also needed.
						</li></ul></div><h4><a id="procedure_7"/>Procedure</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							<span class="strong"><strong>Optional</strong></span>: When connecting to a remote guest, SSH into its physical host first. The following example demonstrates connecting to a host machine 10.0.0.1 using its root credentials:
						</p><pre class="literallayout"><span class="strong"><strong># ssh root@10.0.0.1</strong></span>
root@10.0.0.1's password:
Last login: Mon Sep 24 12:05:36 2018
root~#</pre></li><li class="listitem"><p class="simpara">
							Use the VM’s name and user access credentials to connect to it. For example, the following connects to to the "testguest1" VM using its root credentials:
						</p><pre class="literallayout"><span class="strong"><strong># ssh root@testguest1</strong></span>
root@testguest1's password:
Last login: Wed Sep 12 12:05:36 2018
root~]#</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
								If you do not know the virtual machine’s name, you can list all VMs available on the host using the <code class="literal">virsh list --all</code> command:
							</p><pre class="literallayout"># <span class="strong"><strong>virsh list --all</strong></span>
Id    Name                           State
----------------------------------------------------
2     testguest1                    running
-     testguest2                    shut off</pre></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines"/>Opening a virtual machine serial console</h2></div></div></div><p>
					Using the <code class="literal">virsh console</code> command, it is possible to connect to the serial console of a virtual machine (VM).
				</p><p>
					This is useful when the VM:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Does not provide VNC or SPICE protocols, and thus does not offer video display for GUI tools.
						</li><li class="listitem">
							Does not have network connection, and thus cannot be interacted with <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines" title="Connecting to a virtual machine using SSH">using SSH</a>.
						</li></ul></div><h4><a id="prerequisites_8"/>Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							The VM must have the serial console configured in its kernel command line. To verify this, the <code class="literal">cat /proc/cmdline</code> command output on the VM should include <span class="emphasis"><em>console=ttyS0</em></span>. For example:
						</p><pre class="literallayout"><span class="strong"><strong># cat /proc/cmdline</strong></span>
BOOT_IMAGE=/vmlinuz-3.10.0-948.el7.x86_64 root=/dev/mapper/rhel-root ro console=tty0 console=ttyS0,9600n8 rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb</pre><p class="simpara">
							If the serial console is not set up properly on a VM, using <span class="strong"><strong>virsh console</strong></span> to connect to the VM connects you to an unresponsive guest console. However, you can still exit the unresponsive console by using the <span class="keycap"><strong>Ctrl+</strong></span>] shortcut.
						</p></li><li class="listitem"><p class="simpara">
							To set up serial console on the VM, do the following:
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
									On the VM, edit the <code class="literal">/etc/default/grub</code> file and add <span class="strong"><strong>console=ttyS0</strong></span> to the line that starts with <span class="strong"><strong>GRUB_CMDLINE_LINUX</strong></span>.
								</li><li class="listitem"><p class="simpara">
									Clear the kernel options that may prevent your changes from taking effect
								</p><pre class="literallayout"># <span class="strong"><strong>grub2-editenv - unset kernelopts</strong></span></pre></li><li class="listitem"><p class="simpara">
									Reload the Grub configuration:
								</p><pre class="literallayout"><span class="strong"><strong># grub2-mkconfig -o /boot/grub2/grub.cfg</strong></span>
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-3.10.0-948.el7.x86_64
Found initrd image: /boot/initramfs-3.10.0-948.el7.x86_64.img
[...]
done</pre></li><li class="listitem">
									Reboot the VM.
								</li></ol></div></li></ul></div><h4><a id="procedure_8"/>Procedure</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							On your host system, use the <code class="literal">virsh console</code> command. The following example connects to the <span class="emphasis"><em>guest1</em></span> virtual machine, if the libvirt driver supports safe console handling:
						</p><pre class="literallayout"><span class="strong"><strong># virsh console guest1 --safe</strong></span>
Connected to domain guest1
Escape character is ^]

<span class="emphasis"><em>Subscription-name</em></span>
Kernel 3.10.0-948.el7.x86_64 on an x86_64

localhost login:</pre></li><li class="listitem">
							You can interact with the virsh console in the same way as with a standard command-line interface.
						</li></ol></div><h4><a id="additional_resources_5"/>Additional resources</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For more information about the VM serial console, see the virsh man page.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines"/>Setting up easy access to remote virtualization hosts</h2></div></div></div><p>
					When managing VMs on a remote host system using libvirt utilities, it is recommended to use the <code class="literal">-c qemu+ssh://root@hostname/system</code> syntax. For example, to use the <code class="literal">virsh list</code> command as root on the 10.0.0.1 host:
				</p><pre class="literallayout"># <span class="strong"><strong>virsh -c qemu+ssh://root@10.0.0.1/system list</strong></span>

root@10.0.0.1's password:
Last login: Mon Feb 18 07:28:55 2019

Id   Name              State
---------------------------------
1    remote-guest      running</pre><p>
					However, for convenience, you can remove the need to specify the connection details in full by modifying your SSH and libvirt configuration. For example, you will be able to do:
				</p><pre class="literallayout"># <span class="strong"><strong>virsh -c remote-host list</strong></span>

root@10.0.0.1's password:
Last login: Mon Feb 18 07:28:55 2019

Id   Name              State
---------------------------------
1    remote-guest      running</pre><p>
					To enable this improvement, follow the instructions below.
				</p><h4><a id="procedure_9"/>Procedure</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Edit or create the <code class="literal">~/.ssh/config</code> file and add the following to it, where <span class="emphasis"><em>host-alias</em></span> is a shortened name associated with a specific remote host, and <span class="emphasis"><em>hosturl</em></span> is the URL address of the host.
						</p><pre class="literallayout">Host <span class="emphasis"><em>host-alias</em></span>
        User                    root
        Hostname                <span class="emphasis"><em>hosturl</em></span></pre><p class="simpara">
							For example, the following sets up the <span class="emphasis"><em>tyrannosaurus</em></span> alias for root@10.0.0.1:
						</p><pre class="literallayout">Host tyrannosaurus
        User                    root
        Hostname                10.0.0.1</pre></li><li class="listitem"><p class="simpara">
							Edit or create the <code class="literal">/etc/libvirt/libvirt.conf</code> file, and add the following, where <span class="emphasis"><em>qemu-host-alias</em></span> is a host alias that QEMU and libvirt utilities will associate with the intended host:
						</p><pre class="literallayout">uri_aliases = [
  "<span class="emphasis"><em>qemu-host-alias</em></span>=qemu+ssh://<span class="emphasis"><em>host-alias</em></span>/system",
]</pre><p class="simpara">
							For example, the following uses the <span class="emphasis"><em>tyrannosaurus</em></span> alias configured in the previous step to set up the <span class="emphasis"><em>t-rex</em></span> alias, which stands for <code class="literal">qemu+ssh://10.0.0.1/system</code>:
						</p><pre class="literallayout">uri_aliases = [
  "t-rex=qemu+ssh://tyrannosaurus/system",
]</pre></li><li class="listitem"><p class="simpara">
							As a result, you can manage remote VMs by using libvirt-based utilities on the local system and adding add <code class="literal">-c <span class="emphasis"><em>qemu-host-alias</em></span></code> to the commands. This automatically performs the commands over SSH on the remote host.
						</p><p class="simpara">
							For example, the following lists VMs on the 10.0.0.1 remote host, the connection to which was set up as <span class="emphasis"><em>t-rex</em></span> in the previous steps:
						</p><pre class="literallayout">$ <span class="strong"><strong>virsh -c t-rex list</strong></span>

root@10.0.0.1's password:
Last login: Mon Feb 18 07:28:55 2019

Id   Name              State
---------------------------------
1    velociraptor      running</pre></li><li class="listitem"><p class="simpara">
							<span class="strong"><strong>[Optional]</strong></span> If you want to use libvirt utilities exclusively on a single remote host, you can also set a specific connection as the default target for libvirt-based utilities. To do so, edit the <code class="literal">/etc/libvirt/libvirt.conf</code> file and set the value of the <code class="literal">uri_default</code> parameter to <span class="emphasis"><em>qemu-host-alias</em></span>. For example, the following uses the <span class="emphasis"><em>t-rex</em></span> host alias set up in the previous steps as a default libvirt target.
						</p><pre class="literallayout"># These can be used in cases when no URI is supplied by the application
# (@uri_default also prevents probing of the hypervisor driver).
#
uri_default = "t-rex"</pre><p class="simpara">
							As a result, all libvirt-based commands will automatically be performed on the specified remote host.
						</p><pre class="literallayout">$ <span class="strong"><strong>virsh list</strong></span>
root@10.0.0.1's password:
Last login: Mon Feb 18 07:28:55 2019

Id   Name              State
---------------------------------
1    velociraptor      running</pre><p class="simpara">
							However, this is not recommended if you also want to manage VMs on your local host or on different remote hosts.
						</p></li></ol></div><h4><a id="additional_resources_6"/>Additional resources</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							When connecting to a remote host, it is also possible to avoid having to provide the root password to the remote system. To do so, do one or more of the following:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/getting-started-with-system-administration#sec-SSH">Set up key-based SSH access to the remote host</a>.
								</li><li class="listitem">
									Use SSH connection multiplexing to connect to the remote system.
								</li><li class="listitem">
									Set up a kerberos authentication ticket on the remote system.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Utilities that can use the <code class="literal">-c</code> (or <code class="literal">--connect</code>) option and the remote host access configuration described above include:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									<a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" title="Creating virtual machines using the command-line interface">virt-install</a>
								</li><li class="listitem">
									<a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="Opening a virtual machine graphical console using Virt Viewer">virt-viewer</a>
								</li><li class="listitem">
									virsh
								</li><li class="listitem">
									virt-manager
								</li></ul></div></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="assembly_shutting-down-virtual-machines_virt-getting-started"/>Shutting down virtual machines</h1></div></div></div><p>
				To shut down a running virtual machine in Red Hat Enterprise Linux 8, use <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#shutting-down-a-virtual-machine-using-the-command-line-interface_assembly_shutting-down-virtual-machines" title="Shutting down a virtual machine using the command-line interface">the command line interface</a> or <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#powering-down-vms-using-the-rhel-8-web-console_assembly_shutting-down-virtual-machines" title="Powering down virtual machines in the RHEL 8 web console">the web console GUI</a>.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="shutting-down-a-virtual-machine-using-the-command-line-interface_assembly_shutting-down-virtual-machines"/>Shutting down a virtual machine using the command-line interface</h2></div></div></div><p>
					To shut down a responsive virtual machine (VM), do one of the following:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							use a shutdown command appropriate to the guest OS while <a class="link" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html#assembly_connecting-to-virtual-machines_virt-getting-started" title="Connecting to virtual machines">connected to the guest</a>
						</li><li class="listitem"><p class="simpara">
							use the <code class="literal">virsh shutdown</code> command on the host:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
									If the VM is on a local host:
								</p><pre class="literallayout"><span class="strong"><strong># virsh shutdown demo-guest1</strong></span>
Domain demo-guest1 is being shutdown</pre></li><li class="listitem"><p class="simpara">
									If the VM is on a remote host, in this example 10.0.0.1:
								</p><pre class="literallayout"><span class="strong"><strong># virsh -c qemu+ssh://root@10.0.0.1/system shutdown demo-guest1</strong></span>

root@10.0.0.1's password:
Last login: Mon Feb 18 07:28:55 2019
Domain demo-guest1 is being shutdown</pre></li></ul></div></li></ul></div><p>
					To force a guest to shut down, for example if it has become unresponsive, use the <code class="literal">virsh destroy</code> command on the host:
				</p><pre class="literallayout"><span class="strong"><strong># virsh destroy demo-guest1</strong></span>
Domain demo-guest1 destroyed</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						The <code class="literal">virsh destroy</code> command does not actually delete or remove the guest configuration or disk images. It only destroys the running guest instance. However, in rare cases, this command may cause corruption of the guest’s file system, so using <span class="strong"><strong>virsh destroy</strong></span> is only recommended if all other shutdown methods have failed.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="powering-down-vms-using-the-rhel-8-web-console_assembly_shutting-down-virtual-machines"/>Powering down virtual machines in the RHEL 8 web console</h2></div></div></div><p>
					If a virtual machine is in the <span class="strong"><strong>running</strong></span> state, you can shut it down using the RHEL 8 web console.
				</p><h4><a id="prerequisites_9"/>Prerequisites</h4><p>
					To be able to use the RHEL 8 web console to manage virtual machines, you must install the web console virtual machine plug-in.
				</p><p>
					If the web console plug-in is not installed, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms" title="Setting up the RHEL 8 web console to manage virtual machines">the section called “Setting up the RHEL 8 web console to manage virtual machines”</a> for information about installing the web console virtual machine plug-in.
				</p><h4><a id="procedure_10"/>Procedure</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Click a row with the name of the virtual machine you want to shut down.<br/> The row expands to reveal the Overview pane with basic information about the selected virtual machine and controls for shutting down and deleting the virtual machine.
						</li><li class="listitem">
							Click <span class="guibutton">Shut Down</span>.<br/> The virtual machine shuts down.
						</li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						If the virtual machine does not shut down, click the arrow next to the <span class="guibutton">Shut Down</span> button and select <span class="guimenu">Force Shut Down</span>.
					</p></div><h4><a id="additional_resources_7"/>Additional resources</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For information on starting a virtual machine, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#powering-up-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="Powering up virtual machines in the RHEL 8 web console">the section called “Powering up virtual machines in the RHEL 8 web console”</a>.
						</li><li class="listitem">
							For information on restarting a virtual machine, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#restarting-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="Restarting virtual machines using the RHEL 8 web console">the section called “Restarting virtual machines using the RHEL 8 web console”</a>.
						</li><li class="listitem">
							For information on sending a non-maskable interrupt to a virtual machine, see <a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html#sending-NMIs-to-vms-using-the-rhel-8-web-console_powering-up-and-powering-down-vms-using-the-rhel-8-web-console" title="Sending non-maskable interrupts to VMs using the RHEL 8 web console">the section called “Sending non-maskable interrupts to VMs using the RHEL 8 web console”</a>.
						</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="related-information-virt-getting-started"/>Related information</h1></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
						The information above apply to the AMD64 and Intel 64 architectures. If you want to use RHEL8 virtualization on other supported architectures, different setup procedures are needed and certain features may be restricted or work differently. For details, see the appropriate section below:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<a class="xref" href="getting-started-with-virtualization-in-rhel-8-on-ibm-z_configuring-and-managing-virtualization.html" title="Chapter 4. Getting started with virtualization in RHEL 8 on IBM Z">Chapter 4, <em>Getting started with virtualization in RHEL 8 on IBM Z</em></a>
							</li><li class="listitem">
								<a class="xref" href="getting-started-with-virtualization-in-rhel-8-on-ibm-power_configuring-and-managing-virtualization.html" title="Chapter 3. Getting started with virtualization in RHEL 8 on IBM POWER">Chapter 3, <em>Getting started with virtualization in RHEL 8 on IBM POWER</em></a>
							</li></ul></div></li></ul></div></div></div></body></html>
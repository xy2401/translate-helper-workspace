<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. 身份管理</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. 身份管理</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm-module_considerations-in-adopting-RHEL-8"></a>身份管理包作为模块安装</h1></div></div></div><p>在RHEL 8中，安装身份管理（IdM）服务器和客户端所需的程序包作为模块分发。<code class="literal">client</code>流是<code class="literal">idm</code>模块的默认流，您可以在不启用流的情况下下载安装客户端所需的软件包。
			</p><p>IdM服务器模块流称为<code class="literal">DL1</code>流。该流包含与不同类型的IdM服务器对应的多个配置文件：server，dns，adtrust，client和default。要在<code class="literal">DL1</code>流的特定配置文件中下载软件包：</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">启用流。
					</li><li class="listitem">切换到通过流传递的RPM。
					</li><li class="listitem">运行<code class="literal">yum module install idm:DL1/profile_name</code>命令。
					</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idoverrides-to-allow-ad-user-to-administer-idm_considerations-in-adopting-RHEL-8"></a> Active Directory用户现在可以管理身份管理</h1></div></div></div><p>在Red Hat Enterprise Linux（RHEL）7中，外部组成员资格允许AD用户和组在系统安全服务守护程序（SSSD）的帮助下访问POSIX环境中的IdM资源。
			</p><p>IdM LDAP服务器有自己的机制来授予访问控制权。RHEL 8引入了一个更新，允许为AD用户添加ID用户覆盖，作为IdM组的成员。ID覆盖是描述特定ID视图中特定Active Directory用户或组属性应该是什么样的记录，在本例中为默认信任视图。作为更新的结果，IdM LDAP服务器能够将IdM组的访问控制规则应用于AD用户。
			</p><p>AD用户现在可以使用IdM UI的自助服务功能，例如上传他们的SSH密钥或更改他们的个人数据。AD管理员无需拥有两个不同的帐户和密码即可完全管理IdM。
			</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>目前，IDM中的所选功能可能仍然无法供AD用户使用。例如，从IdM <code class="literal">admins</code>组中将IdM用户的密码设置为AD用户可能会失败。
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="session-recording_considerations-in-adopting-RHEL-8"></a>添加了RHEL 8的会话录制解决方案</h1></div></div></div><p>Red Hat Enterprise Linux 8（RHEL 8）中添加了会话记录解决方案。新的<code class="literal">tlog</code>包及其关联的Web控制台会话播放器使得能够记录和回放用户终端会话。可以通过系统安全服务守护程序（SSSD）服务按用户或用户组配置记录。捕获所有终端输入和输出，并以基于文本的格式存储在系统日志中。出于安全原因，默认情况下输入处于非活动状态，不会拦截原始密码和其他敏感信息。
			</p><p>该解决方案可用于审核安全敏感系统上的用户会话。如果发生安全漏洞，可以将记录的会话作为取证分析的一部分进行审核。系统管理员现在可以在本地配置会话记录，并使用<code class="literal">tlog-play</code>实用程序从RHEL 8 Web控制台界面或命令行界面查看结果。
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm-removed-functionality_considerations-in-adopting-RHEL-8"></a>删除了身份管理功能</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="nss_db_considerations-in-adopting-RHEL-8"></a> OpenLDAP不支持NSS数据库</h2></div></div></div><p>早期版本的Red Hat Enterprise Linux（RHEL）中的OpenLDAP套件使用Mozilla网络安全服务（NSS）进行加密。在RHEL 8中，由OpenLDAP社区支持的OpenSSL取代了NSS。 OpenSSL不支持NSS数据库来存储证书和密钥。但是，它仍然支持用于相同目的的隐私增强邮件（PEM）文件。
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="python-kerberos_considerations-in-adopting-RHEL-8"></a>选定的Python Kerberos包已被替换</h2></div></div></div><p>在Red Hat Enterprise Linux（RHEL）8中， <code class="literal">python-gssapi</code>包， <code class="literal">python-requests-gssapi</code>模块和<code class="literal">urllib-gssapi</code>库已经取代了Python Kerberos包，例如<code class="literal">python-krbV</code> ， <code class="literal">python-kerberos</code> ， <code class="literal">python-requests-kerberos</code>和<code class="literal">python-urllib2_kerberos</code> 。显着的好处包括：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal">python-gssapi</code>比<code class="literal">python-kerberos</code>和<code class="literal">python-krbV</code>更容易使用
						</li><li class="listitem">
							<code class="literal">python-gssapi</code>支持<code class="literal">python 2</code>和<code class="literal">python 3</code>而<code class="literal">python-krbV</code>则不支持</li><li class="listitem">基于GSSAPI的软件包允许使用除Kerberos之外的其他通用安全服务API（GSSAPI）机制，例如NT LAN Manager <code class="literal">NTLM</code>以实现向后兼容性</li></ul></div><p>此更新提高了RHEL 8中GSSAPI的可维护性和可调试性。
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm-sssd_considerations-in-adopting-RHEL-8"></a> SSSD</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="authselect_considerations-in-adopting-RHEL-8"></a> <code class="literal">authselect</code>替换<code class="literal">authconfig</code></h2></div></div></div><p>在RHEL 8中， <code class="literal">authselect</code>实用程序替换了<code class="literal">authconfig</code>实用程序。 <code class="literal">authselect</code>提供了一种更安全的PAM堆栈管理方法，使PAM配置更改对于系统管理员来说更加简单。 <code class="literal">authselect</code>可用于配置身份验证方法，如密码，证书，智能卡和指纹。 <code class="literal">authselect</code>不配置加入远程域所需的服务。此任务由专用工具执行，例如<code class="literal">realmd</code>或<code class="literal">ipa-client-install</code> 。
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="kcm-replace-keyring-default-cache_considerations-in-adopting-RHEL-8"></a> KCM将KEYRING替换为默认凭证缓存存储</h2></div></div></div><p>在RHEL 8中，默认凭据缓存存储是Kerberos凭据管理器（KCM），由<code class="literal">sssd-kcm</code> deamon支持。KCM克服了以前使用的KEYRING的局限性，例如它很难在容器化环境中使用，因为它没有命名空间，并且可以查看和管理配额。
				</p><p>通过此更新，RHEL 8包含一个更适合容器化环境的凭据缓存，并为将来版本中构建更多功能提供了基础。
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sssctl-print-hbac-rules-report_considerations-in-adopting-RHEL-8"></a> <code class="literal">sssctl</code>为IdM域打印HBAC规则报告</h2></div></div></div><p>通过此更新，系统安全服务守护程序（SSSD）的<code class="literal">sssctl</code>实用程序可以打印身份管理（IdM）域的访问控制报告。出于监管原因，此功能可满足某些环境的需要，以查看可以访问特定客户端计算机的用户和组列表。在IdM客户端上运行<code class="literal">sssctl access-report</code> <code class="literal">domain_name</code>在适用于客户端计算机的IdM域中打印已解析的基于主机的访问控制（HBAC）规则的子集。
				</p><p>请注意，除IdM之外，没有其他提供商支持此功能。
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="local-users-cached-by-sssd-nsssss_considerations-in-adopting-RHEL-8"></a>本地用户由SSSD缓存并通过<code class="literal">nss_sss</code>模块提供服务</h2></div></div></div><p>在RHEL 8中，系统安全服务守护程序（SSSD）默认为<code class="literal">/etc/passwd</code>和<code class="literal">/etc/groups</code>文件中的用户和组提供服务。<code class="literal">sss</code> nsswitch模块位于<code class="literal">/etc/nsswitch.conf</code>文件中的文件之前。
				</p><p>通过SSSD为本地用户提供服务的优势在于，与访问磁盘和打开每个NSS请求上的文件相比， <code class="literal">nss_sss</code>模块具有快速<code class="literal">memory-mapped cache</code> ，可加快名称服务交换（NSS）查找。以前，Name服务缓存守护程序（ <code class="literal">nscd</code> ）有助于加快访问磁盘的过程。但是，使用与SSSD并行的<code class="literal">nscd</code>很麻烦，因为SSSD和<code class="literal">nscd</code>使用它们自己的独立缓存。因此，在SSSD也为来自远程域（例如LDAP或Active Directory）的用户提供服务的设置中使用<code class="literal">nscd</code>会导致不可预测的行为。
				</p><p>通过此更新，RHEL 8中本地用户和组的分辨率更快。请注意， <code class="literal">root</code>用户永远不会被SSSD处理，因此<code class="literal">root</code>解析不会受到SSSD中潜在错误的影响。另请注意，如果SSSD未运行，则<code class="literal">nss_sss</code>模块会通过回<code class="literal">nss_files</code>来优雅地处理这种情况，以避免出现问题。您不必以任何方式配置SSSD，自动添加文件域。
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sssd-allow-multiple-smart-card-auth-devs_considerations-in-adopting-RHEL-8"></a> SSSD现在允许您选择多个智能卡身份验证设备之一</h2></div></div></div><p>默认情况下，系统安全服务守护程序（SSSD）会尝试自动检测设备以进行智能卡身份验证。如果连接了多个设备，SSSD会选择它检测到的第一个设备。因此，您无法选择特定设备，这有时会导致故障。
				</p><p>通过此更新，您可以为<code class="literal">p11_uri</code>配置文件的<code class="literal">[pam]</code>部分配置新的<code class="literal">sssd.conf</code>选项。使用此选项可以定义用于智能卡身份验证的设备。
				</p><p>例如，要选择OpenSC PKCS＃11模块检测到插槽ID为<code class="literal">2</code>的阅读器，请添加：</p><pre class="screen">p11_uri = library-description=OpenSC%20smartcard%20framework;slot-id=2</pre><p>到<code class="literal">[pam]</code>的<code class="literal">sssd.conf</code>部分。
				</p><p>有关详细信息，请参阅<code class="literal">man sssd.conf</code>页面。
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sssd-removed-functionality_considerations-in-adopting-RHEL-8"></a>删除了SSSD功能</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sssd-secrets_considerations-in-adopting-RHEL-8"></a> <code class="literal">sssd-secrets</code>已被删除</h2></div></div></div><p>系统安全服务守护程序（SSSD）的<code class="literal">sssd-secrets</code>组件已在Red Hat Enterprise Linux 8中删除。这是因为秘密服务提供商Custodia不再积极开发。使用其他身份管理工具来存储机密，例如Identity Management Vault。
				</p></div></div></div></body></html>
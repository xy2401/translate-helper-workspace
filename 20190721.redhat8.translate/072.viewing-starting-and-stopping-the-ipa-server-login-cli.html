<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. 查看，启动和停止Identity Management服务</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. 查看，启动和停止Identity Management服务</h1></div></div></div><p>身份管理（IdM）服务器是用作域控制器（DC）的Red Hat Enterprise Linux系统。IdM服务器上运行了许多不同的服务，最着名的是Directory Server，证书颁发机构（CA），DNS和Kerberos。
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="viewing-running-idm-services_start-stop-ipa"></a>查看IdM服务的状态</h1></div></div></div><p>要查看在IdM服务器上配置的IdM服务的状态，请执行以下操作：</p><pre class="literallayout">[root@server ~]# <code class="literal">ipactl status</code>
Directory Service: RUNNING
krb5kdc Service: RUNNING
kadmin Service: RUNNING
named Service: RUNNING
httpd Service: RUNNING
ntpd Service: RUNNING
pki-tomcatd Service: RUNNING
smb Service: RUNNING
winbind Service: RUNNING
ipa-otpd Service: RUNNING
ipa-dnskeysyncd Service: RUNNING
ipa: INFO: The ipactl command was successful</pre><p>在上面的输出中：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Kerberos服务分为两部分， <code class="literal">krb5kdc</code>和<code class="literal">kadmin</code> 。<code class="literal">krb5kdc</code>服务是Kerberos版本5身份验证服务和密钥分发中心（KDC）守护程序。<code class="literal">kadmin</code>服务是Kerberos V5数据库管理程序。
					</li><li class="listitem"><code class="literal">named</code>服务是指Internet域名服务（DNS）。
					</li><li class="listitem">
						<code class="literal">pki</code>是用于访问证书系统服务的命令行界面。<code class="literal">pki-tomcatd</code>程序处理与证书相关的身份管理操作。
					</li></ul></div><p>服务器上<code class="literal">ipactl status</code>命令的输出取决于您的IdM配置。例如，如果IdM部署不包含DNS服务器，则列表中不存在<code class="literal">named</code>服务。
			</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>您无法使用IdM Web UI查看在特定IdM服务器上运行的所有IdM服务的状态。可以在IdM Web UI的“ <code class="literal">Identity</code> →“ <code class="literal">Services</code>选项卡中查看在不同服务器上运行的Kerberized服务。</p></div><p>您可以启动或停止整个服务器，也可以仅启动或停止单个服务。
			</p><p>要启动，停止或重新启动整个IdM服务器，请参阅：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="xref" href="viewing-starting-and-stopping-the-ipa-server-login-cli.html#starting-and-stopping-the-entire-ipa-server-the-ipactl-utility-start-stop-ipa" title="启动和停止整个Identity Management服务器：ipactl实用程序">“启动和停止整个身份管理服务器： <code class="literal">ipactl</code>实用程序”一节</a>
					</li></ul></div><p>要启动，停止或重新启动单个IdM服务，请参阅：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="xref" href="viewing-starting-and-stopping-the-ipa-server-login-cli.html#starting-and-stopping-an-individual-ipa-service-the-systemctl-utility-start-stop-ipa" title="启动和停止单个Identity Management服务：systemctl实用程序">“启动和停止单个身份管理服务： <code class="literal">systemctl</code>实用程序”一节</a>
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="starting-and-stopping-the-entire-ipa-server-the-ipactl-utility-start-stop-ipa"></a>启动和停止整个Identity Management服务器： <code class="literal">ipactl</code>实用程序</h1></div></div></div><p>使用<code class="literal">ipactl</code>实用程序停止，启动或重新启动整个IdM服务器以及所有已安装的服务。使用<code class="literal">ipactl</code>实用程序可确保以适当的顺序停止，启动或重新启动所有服务。您无需拥有有效的Kerberos票证即可运行<code class="literal">ipactl</code>命令。
			</p><h3><a id="literal_ipactl_literal_commands"></a> <code class="literal">ipactl</code>命令</h3><p>要启动整个IdM服务器：</p><pre class="literallayout"># <span class="strong"><strong>ipactl start</strong></span></pre><p>要停止整个IdM服务器：</p><pre class="literallayout"># <span class="strong"><strong>ipactl stop</strong></span></pre><p>要重新启动整个IdM服务器：</p><pre class="literallayout"># <span class="strong"><strong>ipactl restart</strong></span></pre><p>要显示构成IdM的所有服务的状态：</p><pre class="literallayout"># <span class="strong"><strong>ipactl status</strong></span></pre><div class="important" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">重要</h3><p>您无法使用IdM Web UI执行<code class="literal">ipactl</code>命令。
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="starting-and-stopping-an-individual-ipa-service-the-systemctl-utility-start-stop-ipa"></a>启动和停止单个Identity Management服务： <code class="literal">systemctl</code>实用程序</h1></div></div></div><p>通常不建议手动更改IdM配置文件。但是，某些情况需要管理员执行特定服务的手动配置。在这种情况下，请使用<code class="literal">systemctl</code>实用程序停止，启动或重新启动单个IdM服务。
			</p><p>例如，在自定义Directory Server行为后使用<code class="literal">systemctl</code> ，而不修改其他IdM服务：</p><pre class="literallayout"># <code class="literal">systemctl restart dirsrv@REALM-NAME.service</code></pre><p>此外，在最初使用Active Directory部署IdM信任时，请修改<code class="literal">/etc/sssd/sssd.conf</code>文件，添加：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">在远程服务器具有高延迟的环境中调整超时配置选项的特定参数</li><li class="listitem">用于调整Active Directory站点关联的特定参数</li><li class="listitem">覆盖全局IdM设置未提供的某些配置选项</li></ul></div><p>要应用您在<code class="literal">/etc/sssd/sssd.conf</code>文件中所做的更改：</p><pre class="literallayout"># <code class="literal">systemctl restart sssd.service</code></pre><p>运行<code class="literal">systemctl restart sssd.service</code>是必需的，因为系统安全服务守护程序（SSSD）不会自动重新读取或重新应用其配置。
			</p><p>请注意，对于影响IdM标识范围的更改，建议完全重新启动服务器。
			</p><div class="important" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">重要</h3><p>要重新启动多个IdM域服务，请始终使用<code class="literal">ipactl</code> 。由于与IdM服务器一起安装的服务之间存在依赖关系，因此启动和停止它们的顺序至关重要。<code class="literal">ipactl</code>实用程序确保以适当的顺序启动和停止服务。
				</p></div><h3><a id="useful_literal_systemctl_literal_commands"></a>有用的<code class="literal">systemctl</code>命令</h3><p>要启动特定的IdM服务：</p><pre class="literallayout"># <span class="strong"><strong>systemctl start <span class="emphasis"><em>name</em></span>.service</strong></span></pre><p>要停止特定的IdM服务：</p><pre class="literallayout"># <span class="strong"><strong>systemctl stop <span class="emphasis"><em>name</em></span>.service</strong></span></pre><p>要重新启动特定的IdM服务：</p><pre class="literallayout"># <span class="strong"><strong>systemctl restart <span class="emphasis"><em>name</em></span>.service</strong></span></pre><p>要查看特定IdM服务的状态，请执行以下操作：</p><pre class="literallayout"># <span class="strong"><strong>systemctl status <span class="emphasis"><em>name</em></span>.service</strong></span></pre><div class="important" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">重要</h3><p>您无法使用IdM Web UI启动或停止在IdM服务器上运行的各个服务。您只能通过导航到“ <code class="literal">Identity</code> →“ <code class="literal">Services</code>并选择服务来使用Web UI来修改Kerberized服务的设置。
				</p></div></div></div></body></html>
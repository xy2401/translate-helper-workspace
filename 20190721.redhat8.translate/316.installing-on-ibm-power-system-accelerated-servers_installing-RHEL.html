<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. 在IBM Power System加速服务器上安装Red Hat Enterprise Linux</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. 在IBM Power System加速服务器上安装Red Hat Enterprise Linux</h1></div></div></div><p>本指南可帮助您在IBM Power Systems加速服务器（AC）上安装Red Hat Enterprise Linux。将这些说明用于以下IBM Power System服务器：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">8335-GTG（IBM Power System AC922）</li><li class="listitem">8335-GTH（IBM Power System AC922）</li><li class="listitem">8335-GTX（IBM Power System AC922）</li></ul></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="installing-red-hat-enterprise-linux-on-ibm-power-system-accelerated-servers_installing-on-ibm-power-system-accelerated-servers"></a>概观</h1></div></div></div><p>使用此信息在非虚拟化或裸机IBM Power System加速服务器上安装Red Hat Enterprise Linux。此过程遵循以下一般步骤：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">连接到BMC固件以设置网络连接</li><li class="listitem"><p class="simpara">选择安装方法：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">从USB设备安装Red Hat Enterprise Linux</li><li class="listitem">从网络安装Red Hat Enterprise Linux</li></ul></div></li><li class="listitem">安装Red Hat Enterprise Linux</li></ul></div><h3><a id="additional_resources_15"></a>其他资源</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">有关受支持的Red Hat Enterprise Linux版本的列表，请参阅<a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/liaam/liaamdistros.htm">Power8上POWER8和POWER9 Linux的受支持Linux发行版</a> 。
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="completing-the-prerequisites-and-booting-your-firmware_installing-on-ibm-power-system-accelerated-servers"></a>完成先决条件并启动固件</h1></div></div></div><p>在打开系统电源之前，请确保您具有以下项目：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">以太网电缆</li><li class="listitem">VGA显示器。VGA分辨率必须设置为1024x768-60Hz。</li><li class="listitem">USB键盘</li><li class="listitem">系统的电源线和插座</li></ul></div><p>这些说明要求您使用Red Hat Enterprise Linux 7.x设置网络服务器。通过<a class="link" href="https://access.redhat.com/products/red-hat-enterprise-linux/#addl-arch">https://access.redhat.com/products/red-hat-enterprise-linux/#addl-arch</a>下载Red Hat Enterprise Linux 7.x LE ALT。</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">获取<span class="strong"><strong>Red Hat Enterprise Linux for Power的下载</strong></span>链接<span class="strong"><strong>，小端</strong></span> 。
						</li><li class="listitem">登录您的Red Hat帐户（如果您还没有这样做）。从Product Variant列表中选择<span class="strong"><strong>Red Hat Enterprise Linux for Power 9</strong></span> 。
						</li><li class="listitem">寻找Red Hat Enterprise Linux for Power 9（v.7.x for ppc64le）ISO文件。下载的ISO文件将在路径名中包含<span class="strong"><strong><span class="emphasis"><em>rhel-alt ... ... iso</em></span></strong></span>而不是<span class="strong"><strong><span class="emphasis"><em>rhel ... .iso</em></span></strong></span> 。
						</li></ol></div><p>完成以下步骤：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">如果您的系统属于机架，请将系统安装到该机架中。有关说明，请参阅<a class="link" href="https://www.ibm.com/support/knowledgecenter/POWER9/p9hdx/POWER9welcome.htm">https://www.ibm.com/support/knowledgecenter/POWER9/p9hdx/POWER9welcome.htm上的</a> IBM Power Systems信息。</li><li class="listitem">将以太网电缆连接到系统背面串行端口旁边的嵌入式以太网端口。将另一端连接到您的网络。
						</li><li class="listitem">将VGA显示器连接到系统背面的VGA端口。
						</li><li class="listitem">将USB键盘连接到可用的USB端口。
						</li><li class="listitem">将电源线连接到系统并将其插入插座。
						</li></ul></div><p>此时，您的固件正在启动。等待电源按钮上的绿色LED指示灯开始闪烁，表示已准备就绪。如果您的系统没有绿色LED指示灯，请等待1至2分钟。
				</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring-the-firmware-ip-address_installing-on-ibm-power-system-accelerated-servers"></a>配置固件IP地址</h1></div></div></div><p>要设置或启用与BMC固件的网络连接，请使用Petitboot引导加载程序界面。跟着这些步骤：</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">使用系统正面的电源按钮打开服务器电源。您的系统将打开Petitboot引导程序菜单。此过程通常需要大约1-2分钟才能完成，但在首次启动或固件更新后可能需要5-10分钟。不要离开你的系统！加载Petitboot时，您的监视器将变为活动状态，您需要按任意键才能中断启动过程。
						</li><li class="listitem">在Petitboot引导加载程序主菜单中，选择退出到Shell。
						</li><li class="listitem"><p class="simpara">运行<code class="literal">ipmitool lan print 1</code> 。如果此命令返回IP地址，请验证是否正确并继续执行步骤4。如果没有返回IP地址，请按照下列步骤操作：</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">运行此命令将模式设置为静态：</p><pre class="literallayout">ipmitool lan设置1 ipsrc静态</pre></li><li class="listitem"><p class="simpara">运行以下命令设置IP地址：</p><pre class="screen">ipmitool lan设置1 ipaddr _ip_address_</pre><p class="simpara">其中<span class="emphasis"><em>ip_address</em></span>是您为此系统分配的静态IP地址。
								</p></li><li class="listitem"><p class="simpara">通过运行以下命令设置网络掩码：</p><pre class="literallayout">ipmitool lan set 1 netmask _netmask_address_</pre><p class="simpara">其中netmask_address是系统的网络掩码。
								</p></li><li class="listitem"><p class="simpara">通过运行以下命令设置网关服务器：</p><pre class="screen">ipmitool lan set 1 defgw ipaddr _gateway_server_</pre><pre class="literallayout">其中gateway_server是此系统的网关。</pre></li><li class="listitem"><p class="simpara">再次运行命令<code class="literal">ipmitool lan print 1</code>确认IP地址。
								</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>在执行以下步骤之前，此接口无效。
									</p></div></li><li class="listitem"><p class="simpara">要重置固件，请运行以下命令：</p><pre class="literallayout">ipmitool raw 0x06 0x40。</pre><p class="simpara">在继续该过程之前必须完成此命令;但是，它不会返回任何信息。要验证此命令是否已完成，请ping您的系统BMC地址（与IPMItool命令中使用的IP地址相同）。ping成功返回后，继续执行下一步。
								</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>
										<span class="strong"><strong>注意</strong></span> ：如果ping在合理的时间内（2  -  3分钟）未成功返回，请尝试以下附加步骤</p></div></li><li class="listitem">使用以下命令关闭系统电源： <code class="literal">poweroff.h.</code>
								</li><li class="listitem">从系统背面拔下电源线。等待30秒，然后接通电源以启动BMC。</li></ol></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="powering-on-your-server-with-openbmc-commands_installing-on-ibm-power-system-accelerated-servers"></a>使用OpenBMC命令打开服务器电源</h1></div></div></div><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>系统启动后，会加载Petitboot界面。如果您没有在10秒内按任意键中断启动过程，Petitboot会自动启动第一个选项。
					</p></div><p>要从运行Linux的PC或笔记本电脑打开服务器电源，请执行以下步骤：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">默认用户名： <code class="literal">root</code>
						</li><li class="listitem"><p class="simpara">默认密码： <code class="literal">0penBmc</code> （其中，0penBMC使用零而不是大写O）</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">在PC或笔记本电脑上打开终端程序。
								</li><li class="listitem"><p class="simpara">通过运行以下命令登录BMC。
								</p><pre class="literallayout">ssh root @ &lt;BMC server_ip_address&gt; root @ &lt;BMC服务器密码&gt;</pre><p class="simpara">其中<span class="emphasis"><em>BMC server_ip_address</em></span>是<span class="emphasis"><em>BMC</em></span>的IP地址， <span class="emphasis"><em>BMC服务器密码</em></span>是要进行身份验证的密码。
								</p></li><li class="listitem"><p class="simpara">要启动服务器，请运行以下命令：</p><pre class="literallayout">$ root @ witherspoon：〜＃obmcutil poweron</pre></li><li class="listitem"><p class="simpara">连接到OS控制台并使用默认密码<code class="literal">0penBmc</code> 。
								</p><pre class="literallayout">ssh -p 2200 root @ &lt;BMC server_ip_address&gt; root @</pre></li></ol></div></li></ul></div><p>其中<span class="emphasis"><em>BMC server_ip_address</em></span>是<span class="emphasis"><em>BMC</em></span>的IP地址， <span class="emphasis"><em>BMC服务器密码</em></span>是要进行身份验证的密码。
				</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="choose-your-installation-method-on-ibm-accelerated-servers_installing-on-ibm-power-system-accelerated-servers"></a>在IBM加速服务器上选择安装方法</h1></div></div></div><p>您可以从USB设备或通过网络安装Red Hat Enterprise Linux。
				</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring-petitboot-for-network-installation_installing-on-ibm-power-system-accelerated-servers"></a>配置Petitboot以进行网络安装</h1></div></div></div><p>系统启动后，Petitboot引导加载程序会扫描本地引导设备和网络接口，以查找系统可用的引导选项。要从网络服务器安装Red Hat Enterprise Linux，您需要设置网络接口（不是BMC网络接口）。
				</p><p>设置网络连接并通过以下步骤向Petitboot提供网络引导详细信息：</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">将以太网电缆连接到系统背面的第二个以太网端口。将另一端连接到您的网络。
						</li><li class="listitem">在Petitboot主屏幕上，选择c以配置系统选项。
						</li><li class="listitem"><p class="simpara">在配置屏幕的“网络”字段中，输入您的网络信息：</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">选择您的网络类型</li><li class="listitem">选择您的网络设备（记住接口名称和mac地址）</li><li class="listitem">指定您的IP /掩码，网关和DNS服务器（请记住这些设置，因为您将在下一步中使用它们）</li><li class="listitem">选择确定返回主菜单。
								</li></ol></div></li><li class="listitem">返回Petitboot主屏幕，选择<code class="literal">n</code>以创建新选项。
						</li><li class="listitem"><p class="simpara">选择引导设备或选择手动指定路径/ URL，然后输入引导选项：</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">在“内核”字段中，输入内核的路径。此字段是必填字段。为网络输入与此类似的URL：</p><pre class="literallayout">HTTP：//＆LT; http_server_ip＆GT; / PPC / PPC64 / vmlinuz的</pre></li><li class="listitem"><p class="simpara">在Initrd字段中，输入init ramdisk的路径。为网络输入与此类似的URL：</p><pre class="literallayout">HTTP：//＆LT; http_server_ip＆GT; /ppc/ppc64/initrd.gz</pre></li><li class="listitem"><p class="simpara">在Boot参数字段中，设置存储库路径的设置以及安装操作系统的服务器的IP地址。例如：</p><pre class="screen">append repo = http：// &lt;http_server_ip&gt; / root = live：http：// &lt;http_server_ip&gt; /os/LiveOS/squashfs.img ipv6.disable = 1 ifname = &lt;ethernet_interface_name&gt;：&lt;mac_addr&gt; ip = &lt;os ip&gt; :: &lt;gateway&gt;：&lt;2位掩码&gt;：&lt;hostname&gt;：&lt;ethernet_interface_name&gt;：none nameserver = &lt;anem_server&gt; inst.text</pre><p class="simpara">您可以接受其余字段的默认值。
								</p></li></ol></div></li><li class="listitem">设置netboot选项后，选择“确定”并按Enter键。
						</li><li class="listitem">在Petitboot主窗口中，选择User Item 1作为引导选项，然后按Enter键。
						</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring-petitboot-for-installation-with-usb-device-on-accelerated-servers_installing-on-ibm-power-system-accelerated-servers"></a>配置Petitboot以在加速服务器上使用USB设备进行安装</h1></div></div></div><p>系统启动后，Petitboot引导加载程序会扫描本地引导设备和网络接口，以查找系统可用的引导选项。有关创建可引导USB设备的信息，请参阅<a class="xref" href="installing-red-hat-enterprise-linux-on-ibm-power-system-lc-servers_installing-RHEL.html#create-bootable-usb-linux_installing-red-hat-enterprise-linux-on-ibm-power-system-lc-servers" title="在Linux上创建可启动的USB设备">“在Linux上创建可引导USB设备”一节</a> 。
				</p><p>使用以下USB设备之一：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">USB连接DVD播放器，配有一根USB线，可保持在1.0安培以下</li><li class="listitem">8 GB 2.0 USB闪存盘</li></ul></div><p>请按照以下步骤配置Petitboot：</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">将可引导USB设备插入前置USB端口。Petitboot显示以下内容：</p><pre class="literallayout"></pre><pre class="screen">[USB：sdb1 / 2015-10-30-11-05-03-00]救援Red Hat Enterprise Linux系统（64位内核）测试此媒体并安装Red Hat Enterprise Linux 8.x（64位内核） *安装Red Hat Enterprise Linux 8.x（64位内核）</pre><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>如果未显示USB设备，请选择重新扫描设备。如果未检测到您的设备，则可能必须尝试其他类型。
							</p></div></li><li class="listitem">记录USB设备的UUID。例如，上例中USB设备的UUID为2015-10-30-11-05-03-00。
						</li><li class="listitem">选择安装Red Hat Enterprise Linux 8.x（64位内核），然后按e（编辑）打开Petitboot Option Editor窗口。
						</li><li class="listitem"><p class="simpara">将光标移动到Boot arguments部分并添加以下信息：</p><pre class="literallayout"></pre><pre class="screen">inst.text inst.stage2 = hd：UUID = your_UUID其中your_UUID是您录制的UUID。Petitboot选项编辑器qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq设备:(）sda2 [f8437496-78b8-4b11-9847-bb2d8b9f7cbd]（*）sdb1 [2015-10-30-11-05-03-00]（）手动指定路径/ URL内核：/ ppc / ppc64 / vmlinuz Initrd：/ppc/ppc64/initrd.img设备树：引导参数：ro inst.text inst.stage2 = hd：UUID = 2015-10-30-11-05-03-00 [确定] [帮助] [取消]</pre></li><li class="listitem">
							<span class="strong"><strong>选择</strong></span>确定以保存选项并返回主菜单。
						</li><li class="listitem">确认已选中“安装Red Hat Enterprise Linux 8.x（64位内核）”，然后<span class="strong"><strong>按</strong></span> Enter开始安装。
						</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="completing-your-accelerated-server-installation_installing-on-ibm-power-system-accelerated-servers"></a>完成加速服务器安装</h1></div></div></div><p>选择引导Red Hat Enterprise Linux 8.x安装程序后，安装程序向导将引导您完成这些步骤。
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">按照Red Hat Enterprise Linux的安装向导设置磁盘选项，用户名和密码，时区等。最后一步是重新启动系统。
						</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>在系统重新启动时，请移除USB设备。
							</p></div></li><li class="listitem">系统重启后，Petitboot会显示启动Red Hat Enterprise Linux 8.x的选项。选择此选项，然后按Enter键。
						</li></ol></div></div></div></body></html>
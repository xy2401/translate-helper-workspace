<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. Pacemaker集群属性</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Pacemaker集群属性</h1></div></div></div><p>群集属性控制群集在遇到群集操作期间可能发生的情况时的行为方式。
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ref_cluster-properties-options-controlling-cluster-behavior"></a>群集属性和选项摘要</h1></div></div></div><p>
				<a class="xref" href="assembly_controlling-cluster-behavior-configuring-and-managing-high-availability-clusters.html#tb-clusterprops-HAAR" title="表19.1。群集属性">表19.1“群集属性”</a>汇总了Pacemaker群集属性，显示了属性的默认值以及可以为这些属性设置的可能值。
			</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>除了此表中描述的属性之外，还有群集软件公开的其他群集属性。对于这些属性，建议您不要更改其默认值。
				</p></div><div class="table"><a id="tb-clusterprops-HAAR"></a><p class="title"><strong>表19.1。群集属性</strong></p><div class="table-contents"><table border="1" summary="Cluster Properties"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th valign="top" style="text-align:left">选项</th><th valign="top" style="text-align:left">默认</th><th valign="top" style="text-align:left">描述</th></tr></thead><tbody><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">批处理限制</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>0</p>
							 </td><td valign="top" style="text-align:left"> <p>允许群集并行执行的资源操作数。“正确”值取决于网络和群集节点的速度和负载。默认值0表示当任何节点具有高CPU负载时，群集将动态施加限制。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">迁移限制</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>-1（无限制）</p>
							 </td><td valign="top" style="text-align:left"> <p>允许群集在节点上并行执行的迁移作业数。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">无定额政策</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>停</p>
							 </td><td valign="top" style="text-align:left"> <p>群集没有仲裁时该怎么办。允许值：</p>
							 <p>*忽略 - 继续所有资源管理</p>
							 <p>*冻结 - 继续资源管理，但不从不在受影响分区中的节点恢复资源</p>
							 <p>*停止 - 停止受影响的群集分区中的所有资源</p>
							 <p>* suicide  - 围绕受影响的集群分区中的所有节点</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">对称簇</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>真正</p>
							 </td><td valign="top" style="text-align:left"> <p>指示默认情况下资源是否可以在任何节点上运行。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">启用STONITH  -</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>真正</p>
							 </td><td valign="top" style="text-align:left"> <p>表示应该对具有无法停止的资源的故障节点和节点进行隔离。保护您的数据需要您设置为<code class="literal">true</code> 。
							</p>
							 <p>如果为<code class="literal">true</code>或未设置，则除非已配置一个或多个STONITH资源，否则群集将拒绝启动资源。
							</p>
							 <p>Red Hat仅支持将此值设置为<code class="literal">true</code>群集。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">STONITH行动</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>重启</p>
							 </td><td valign="top" style="text-align:left"> <p>要发送到STONITH设备的操作。允许值： <code class="literal">reboot</code> ， <code class="literal">off</code> 。值<code class="literal">poweroff</code>也是允许的，但仅用于传统设备。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">群延迟</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>60年代</p>
							 </td><td valign="top" style="text-align:left"> <p>网络上的往返延迟（不包括动作执行）。“正确”值取决于网络和群集节点的速度和负载。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">停止孤儿资源</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>真正</p>
							 </td><td valign="top" style="text-align:left"> <p>指示是否应停止已删除的资源。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">停孤儿行动</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>真正</p>
							 </td><td valign="top" style="text-align:left"> <p>指示是否应取消已删除的操作。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">启动故障是致命</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>真正</p>
							 </td><td valign="top" style="text-align:left"> <p>指示无法在特定节点上启动资源是否阻止在该节点上进一步启动尝试。设置为<code class="literal">false</code> ，群集将根据资源的当前故障计数和迁移阈值决定是否再次尝试在同一节点上启动。有关为资源设置<code class="literal">migration-threshold</code>选项的信息，请参阅<a class="link" href="assembly_configuring-cluster-resources-configuring-and-managing-high-availability-clusters.html#proc_configuring-resource-meta-options-configuring-cluster-resources" title="配置资源元选项">配置资源元选项</a> 。
							</p>
							 <p>将<code class="literal">start-failure-is-fatal</code> fat <code class="literal">start-failure-is-fatal</code>为<code class="literal">false</code>会产生这样的风险，即这将允许一个无法启动资源的故障节点阻止所有依赖操作。这就是为什么<code class="literal">start-failure-is-fatal</code>默认为true的原因。设置<code class="literal">start-failure-is-fatal=false</code>的风险可以通过设置较低的迁移阈值来减轻，以便在许多故障之后可以继续执行其他操作。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">PE-错误系列-MAX</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>-1（全部）</p>
							 </td><td valign="top" style="text-align:left"> <p>调度程序输入的数量导致ERROR保存。报告问题时使用。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">PE-警告系列-MAX</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>-1（全部）</p>
							 </td><td valign="top" style="text-align:left"> <p>调度程序输入的数量导致警告保存。报告问题时使用。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">PE-输入系列-MAX</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>-1（全部）</p>
							 </td><td valign="top" style="text-align:left"> <p>要保存的“正常”调度程序输入的数量。报告问题时使用。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">集群基础设施</code>
							</p>
							 </td><td valign="top" style="text-align:left"> </td><td valign="top" style="text-align:left"> <p>Pacemaker当前正在运行的消息传递堆栈。用于信息和诊断目的;不是用户可配置的。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">DC-版本</code>
							</p>
							 </td><td valign="top" style="text-align:left"> </td><td valign="top" style="text-align:left"> <p>群集的指定控制器（DC）上的Pacemaker版本。用于诊断目的;不是用户可配置的。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">群集复检间隔</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>15分钟</p>
							 </td><td valign="top" style="text-align:left"> <p>轮询间隔，用于基于时间的选项，资源参数和约束的更改。允许值：零禁用轮询，正值是以秒为单位的间隔（除非指定了其他SI单位，例如5分钟）。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">维护模式</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>假</p>
							 </td><td valign="top" style="text-align:left"> <p>维护模式告诉群集进入“手动”模式，除非另有说明，否则不会启动或停止任何服务。完成维护模式后，群集会对任何服务的当前状态进行健全性检查，然后停止或启动任何需要它的服务。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">关机递增</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>20分钟</p>
							 </td><td valign="top" style="text-align:left"> <p>放弃试图优雅地关闭然后退出的时间。仅限高级用途。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">STONITH超时</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>60年代</p>
							 </td><td valign="top" style="text-align:left"> <p>等待STONITH操作完成的时间。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">停所有资源</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>假</p>
							 </td><td valign="top" style="text-align:left"> <p>集群是否应停止所有资源。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">使-ACL</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>假</p>
							 </td><td valign="top" style="text-align:left"> <p>指示群集是否可以使用通过<code class="literal">pcs acl</code>命令设置的访问控制列表。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">布局策略</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>
								<code class="literal">默认</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>指示在确定群集节点上的资源放置时，群集是否以及如何将利用率属性考虑在内。
							</p>
							 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="setting-cluster-properties-controlling-cluster-behavior"></a>设置和删除群集属性</h1></div></div></div><p>要设置集群属性的值，请使用以下<span class="strong"><strong><span class="application">pcs</span></strong></span>命令。
			</p><pre class="literallayout">pcs property set <span class="emphasis"><em>property</em></span>=<span class="emphasis"><em>value</em></span></pre><p>例如，要将<code class="literal">symmetric-cluster</code>的值设置为<code class="literal">false</code> ，请使用以下命令。
			</p><pre class="literallayout"># <code class="literal">pcs property set symmetric-cluster=false</code></pre><p>您可以使用以下命令从配置中删除集群属性。
			</p><pre class="literallayout">pcs property unset <span class="emphasis"><em>property</em></span></pre><p>或者，您可以通过将<code class="literal">pcs property set</code>命令的value字段留空来从配置中删除集群属性。这会将该属性恢复为其默认值。例如，如果先前已将<code class="literal">symmetric-cluster</code>属性设置为<code class="literal">false</code> ，则以下命令将从配置中删除您设置的值，并将<code class="literal">symmetric-cluster</code>的值恢复为<code class="literal">true</code> ，这是其默认值。
			</p><pre class="literallayout"># <code class="literal">pcs property set symmetic-cluster=</code></pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="proc_querying-cluster-property-settings-controlling-cluster-behavior"></a>查询群集属性设置</h1></div></div></div><p>在大多数情况下，当您使用<code class="literal">pcs</code>命令显示各种群集组件的值时，您可以使用<code class="literal">pcs list</code>或<code class="literal">pcs show</code>互换。在以下示例中， <code class="literal">pcs list</code>是用于显示多个属性的所有设置的完整列表的格式，而<code class="literal">pcs show</code>是用于显示特定属性值的格式。
			</p><p>要显示已为群集设置的属性设置的值，请使用以下<span class="strong"><strong><span class="application">pcs</span></strong></span>命令。
			</p><pre class="literallayout">pcs property list</pre><p>要显示群集的属性设置的所有值，包括尚未显式设置的属性设置的默认值，请使用以下命令。
			</p><pre class="literallayout">pcs property list --all</pre><p>要显示特定群集属性的当前值，请使用以下命令。
			</p><pre class="literallayout">pcs property show <span class="emphasis"><em>property</em></span></pre><p>例如，要显示<code class="literal">cluster-infrastructure</code>属性的当前值，请执行以下命令：</p><pre class="literallayout"># <code class="literal">pcs property show cluster-infrastructure</code>
Cluster Properties:
 cluster-infrastructure: cman</pre><p>出于提供参考的目的，您可以使用以下命令显示属性的所有默认值的列表，无论它们是否已设置为默认值以外的值。
			</p><pre class="literallayout">pcs property [list|show] --defaults</pre></div></div></body></html>
<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. LVM的自定义报告</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. LVM的自定义报告</h1></div></div></div><p>LVM提供各种配置和命令行选项，以生成自定义报告并过滤报告的输出。有关LVM报告功能和功能的完整说明，请参见<code class="literal">lvmreport</code> （7）手册页。
		</p><p>您可以使用<code class="literal">pvs</code> ， <code class="literal">lvs</code>和<code class="literal">vgs</code>命令生成LVM对象的简明和可自定义报告。这些命令生成的报告包括每个对象的一行输出。每行包含与对象相关的属性字段的有序列表。有五种方法可以选择要报告的对象：按物理卷，卷组，逻辑卷，物理卷段和逻辑卷段。
		</p><p>您可以使用<code class="literal">lvm fullreport</code>命令一次性报告有关物理卷，卷组，逻辑卷，物理卷段和逻辑卷段的信息。有关此命令及其功能的信息，请参见<code class="literal">lvm-fullreport</code> （8）手册页。
		</p><p>LVM支持日志报告，其中包含操作，消息和每个对象状态的日志，并在LVM命令执行期间收集完整的对象标识。有关LVM日志报告的详细信息。请参阅<code class="literal">lvmreport</code> （7）手册页。
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="proc_controlling-format-of-lvm-display-customizing-lvm-display"></a>控制LVM显示的格式</h1></div></div></div><p>是否使用<code class="literal">pvs</code> ， <code class="literal">lvs</code>或<code class="literal">vgs</code>命令确定显示的默认字段集和排序顺序。您可以使用以下参数控制这些命令的输出：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">您可以使用<code class="literal">-o</code>参数将显示的字段更改为默认字段以外的其他字段。例如，以下命令仅显示物理卷名称和大小。
					</p><pre class="literallayout"># <code class="literal">pvs -o pv_name,pv_size</code>
PV PSize
/dev/sdb1 17.14G
/dev/sdc1 17.14G
/dev/sdd1 17.14G</pre></li><li class="listitem"><p class="simpara">您可以使用加号（+）将字段附加到输出，该符号与-o参数结合使用。
					</p><p class="simpara">以下示例显示除默认字段外的物理卷的UUID。
					</p><pre class="literallayout"># <code class="literal">pvs -o +pv_uuid</code>
PV VG Fmt Attr PSize PFree PV UUID
/dev/sdb1 new_vg lvm2 a- 17.14G 17.14G onFF2w-1fLC-ughJ-D9eB-M7iv-6XqA-dqGeXY
/dev/sdc1 new_vg lvm2 a- 17.14G 17.09G Joqlch-yWSj-kuEn-IdwM-01S9-X08M-mcpsVe
/dev/sdd1 new_vg lvm2 a- 17.14G 17.14G yvfvZK-Cf31-j75k-dECm-0RZ3-0dGW-UqkCS</pre></li><li class="listitem"><p class="simpara">将<code class="literal">-v</code>参数添加到命令包括一些额外的字段。例如，除默认字段外， <code class="literal">pvs -v</code>命令还将显示<code class="literal">DevSize</code>和<code class="literal">PV UUID</code>字段。
					</p><pre class="literallayout"># <code class="literal">pvs -v</code>
Scanning for physical volume names
PV VG Fmt Attr PSize PFree DevSize PV UUID
/dev/sdb1 new_vg lvm2 a- 17.14G 17.14G 17.14G onFF2w-1fLC-ughJ-D9eB-M7iv-6XqA-dqGeXY
/dev/sdc1 new_vg lvm2 a- 17.14G 17.09G 17.14G Joqlch-yWSj-kuEn-IdwM-01S9-XO8M-mcpsVe
/dev/sdd1 new_vg lvm2 a- 17.14G 17.14G 17.14G yvfvZK-Cf31-j75k-dECm-0RZ3-0dGW-tUqkCS</pre></li><li class="listitem"><p class="simpara"><code class="literal">--noheadings</code>参数抑制了标题行。这对编写脚本很有用。
					</p><p class="simpara">下面的示例使用<code class="literal">--noheadings</code>与组合参数<code class="literal">pv_name</code>的说法，这将生成所有物理卷的列表。
					</p><pre class="literallayout"># <code class="literal">pvs --noheadings -o pv_name</code>
/dev/sdb1
/dev/sdc1
/dev/sdd1</pre></li><li class="listitem"><p class="simpara"><code class="literal">--separator <span class="emphasis"><em>separator</em></span></code>参数使用<span class="emphasis"><em>separator</em></span>来分隔每个字段。
					</p><p class="simpara">以下示例<code class="literal">pvs</code>等号（=）分隔<code class="literal">pvs</code>命令的默认输出字段。
					</p><pre class="literallayout"># <code class="literal">pvs --separator =</code>
PV=VG=Fmt=Attr=PSize=PFree
/dev/sdb1=new_vg=lvm2=a-=17.14G=17.14G
/dev/sdc1=new_vg=lvm2=a-=17.14G=17.09G
/dev/sdd1=new_vg=lvm2=a-=17.14G=17.14G</pre><p class="simpara">要在使用<code class="literal">separator</code>参数时保持字段对齐，请将<code class="literal">separator</code>参数与<code class="literal">--aligned</code>参数结合使用。
					</p><pre class="literallayout"># <code class="literal">pvs --separator = --aligned</code>
PV =VG =Fmt =Attr=PSize =PFree
/dev/sdb1 =new_vg=lvm2=a- =17.14G=17.14G
/dev/sdc1 =new_vg=lvm2=a- =17.14G=17.09G
/dev/sdd1 =new_vg=lvm2=a- =17.14G=17.14G</pre></li></ul></div><p>您可以使用<code class="literal">lvs</code>或<code class="literal">vgs</code>命令的<code class="literal">-P</code>参数来显示有关失败卷的信息，否则该卷将不会出现在输出中。
			</p><p>有关显示参数的完整列表，请参见<code class="literal">pvs</code> （8）， <code class="literal">vgs</code> （8）和<code class="literal">lvs</code> （8）手册页。
			</p><p>卷组字段可以与物理卷（和物理卷段）字段或逻辑卷（和逻辑卷段）字段混合，但不能混合物理卷和逻辑卷字段。例如，以下命令将为每个物理卷显示一行输出。
			</p><pre class="literallayout"># <code class="literal">vgs -o +pv_name</code>
  VG     #PV #LV #SN Attr   VSize  VFree  PV
  new_vg   3   1   0 wz--n- 51.42G 51.37G /dev/sdc1
  new_vg   3   1   0 wz--n- 51.42G 51.37G /dev/sdd1
  new_vg   3   1   0 wz--n- 51.42G 51.37G /dev/sdb1</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ref_lvm-object-display-fields-customizing-lvm-display"></a> LVM对象显示字段</h1></div></div></div><p>本节提供了一系列表，列出了可以使用<code class="literal">pvs</code> ， <code class="literal">vgs</code>和<code class="literal">lvs</code>命令显示的有关LVM对象的信息。
			</p><p>为方便起见，如果字段名称前缀与命令的默认值匹配，则可以删除该字段名称前缀。例如，使用<code class="literal">pvs</code>命令， <code class="literal">name</code>表示<code class="literal">pv_name</code> ，但使用<code class="literal">vgs</code>命令时， <code class="literal">name</code>被解释为<code class="literal">vg_name</code> 。
			</p><p>执行以下命令相当于执行<code class="literal">pvs -o pv_free</code> 。
			</p><pre class="literallayout"># <code class="literal">pvs -o free</code>
  PFree
  17.14G
  17.09G
  17.14G</pre><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>在以后的版本中， <code class="literal">pvs</code> ， <code class="literal">vgs</code>和<code class="literal">lvs</code>输出中属性字段中的字符数可能会增加。现有字符字段不会更改位置，但可以在末尾添加新字段。在编写搜索特定属性字符的脚本时，应考虑到这一点，根据字段与字段开头的相对位置搜索字符，而不是搜索字段末尾的相对位置。例如，要在<code class="literal">lv_attr</code>字段的第九位搜索字符<code class="literal">p</code> ，您可以搜索字符串“^ / ... ... ..p /”，但不应搜索字符串“/ * p $ /”。
				</p></div><p>
				<a class="xref" href="assembly_customizing-lvm-display-configuring-and-managing-logical-volumes.html#tb-table-pvs-fields" title="表6.1。pvs命令显示字段">表6.1“pvs命令显示字段”</a>列出了<code class="literal">pvs</code>命令的显示参数，以及标题显示中显示的字段名称和字段说明。
			</p><div class="table"><a id="tb-table-pvs-fields"></a><p class="title"><strong>表6.1。pvs命令显示字段</strong></p><div class="table-contents"><table border="1" summary="The pvs Command Display Fields"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th valign="top" style="text-align:left">争论</th><th valign="top" style="text-align:left">头</th><th valign="top" style="text-align:left">描述</th></tr></thead><tbody><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">dev_size</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>DevSize</p>
							 </td><td valign="top" style="text-align:left"> <p>创建物理卷的基础设备的大小</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pe_start</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>第一届PE</p>
							 </td><td valign="top" style="text-align:left"> <p>偏移到底层设备中第一个物理范围的开始</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pv_attr</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>ATTR</p>
							 </td><td valign="top" style="text-align:left"> <p>物理卷的状态：（a）llocatable或e（x）移植。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pv_fmt</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>FMT</p>
							 </td><td valign="top" style="text-align:left"> <p>物理卷的元数据格式（ <code class="literal">lvm2</code>或<code class="literal">lvm1</code> ）</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pv_free</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>PFree</p>
							 </td><td valign="top" style="text-align:left"> <p>物理卷上剩余的可用空间</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pv_name</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>PV</p>
							 </td><td valign="top" style="text-align:left"> <p>物理卷名称</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pv_pe_alloc_count</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>ALLOC</p>
							 </td><td valign="top" style="text-align:left"> <p>已使用的物理范围数</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pv_pe_count</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>PE</p>
							 </td><td valign="top" style="text-align:left"> <p>物理范围的数量</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pvseg_size</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>SSize</p>
							 </td><td valign="top" style="text-align:left"> <p>物理卷的段大小</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pvseg_start</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>开始</p>
							 </td><td valign="top" style="text-align:left"> <p>物理卷段的起始物理范围</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pv_size</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>PSize</p>
							 </td><td valign="top" style="text-align:left"> <p>物理卷的大小</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pv_tags</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>PV标签</p>
							 </td><td valign="top" style="text-align:left"> <p>附加到物理卷的LVM标记</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pv_used</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>用过的</p>
							 </td><td valign="top" style="text-align:left"> <p>当前在物理卷上使用的空间量</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pv_uuid</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>PV UUID</p>
							 </td><td valign="top" style="text-align:left"> <p>物理卷的UUID</p>
							 </td></tr></tbody></table></div></div><p><code class="literal">pvs</code>命令默认显示以下字段： <code class="literal">pv_name</code> ， <code class="literal">vg_name</code> ， <code class="literal">pv_fmt</code> ， <code class="literal">pv_attr</code> ， <code class="literal">pv_size</code> ， <code class="literal">pv_free</code> 。显示按<code class="literal">pv_name</code>排序。
			</p><pre class="literallayout"># <code class="literal">pvs</code>
  PV         VG     Fmt  Attr PSize  PFree
  /dev/sdb1  new_vg lvm2 a-   17.14G 17.14G
  /dev/sdc1  new_vg lvm2 a-   17.14G 17.09G
  /dev/sdd1  new_vg lvm2 a-   17.14G 17.13G</pre><p>将<code class="literal">-v</code>参数与<code class="literal">pvs</code>命令一起<code class="literal">pvs</code>会将以下字段添加到默认显示中： <code class="literal">dev_size</code> ， <code class="literal">pv_uuid</code> 。
			</p><pre class="literallayout"># <code class="literal">pvs -v</code>
    Scanning for physical volume names
  PV         VG     Fmt  Attr PSize  PFree  DevSize PV UUID
  /dev/sdb1  new_vg lvm2 a-   17.14G 17.14G  17.14G onFF2w-1fLC-ughJ-D9eB-M7iv-6XqA-dqGeXY
  /dev/sdc1  new_vg lvm2 a-   17.14G 17.09G  17.14G Joqlch-yWSj-kuEn-IdwM-01S9-XO8M-mcpsVe
  /dev/sdd1  new_vg lvm2 a-   17.14G 17.13G  17.14G yvfvZK-Cf31-j75k-dECm-0RZ3-0dGW-tUqkCS</pre><p>您可以使用<code class="literal">pvs</code>命令的<code class="literal">--segments</code>参数来显示有关每个物理卷段的信息。段是一组范围。如果要查看逻辑卷是否已碎片化，则段视图可能很有用。
			</p><p><code class="literal">pvs --segments</code>命令默认显示以下字段： <code class="literal">pv_name</code> ， <code class="literal">vg_name</code> ， <code class="literal">pv_fmt</code> ， <code class="literal">pv_attr</code> ， <code class="literal">pv_size</code> ， <code class="literal">pv_free</code> ， <code class="literal">pvseg_start</code> ， <code class="literal">pvseg_size</code> 。显示按物理卷中的<code class="literal">pv_name</code>和<code class="literal">pvseg_size</code>排序。
			</p><pre class="literallayout"># <code class="literal">pvs --segments</code>
  PV         VG         Fmt  Attr PSize  PFree  Start SSize
  /dev/hda2  VolGroup00 lvm2 a-   37.16G 32.00M     0  1172
  /dev/hda2  VolGroup00 lvm2 a-   37.16G 32.00M  1172    16
  /dev/hda2  VolGroup00 lvm2 a-   37.16G 32.00M  1188     1
  /dev/sda1  vg         lvm2 a-   17.14G 16.75G     0    26
  /dev/sda1  vg         lvm2 a-   17.14G 16.75G    26    24
  /dev/sda1  vg         lvm2 a-   17.14G 16.75G    50    26
  /dev/sda1  vg         lvm2 a-   17.14G 16.75G    76    24
  /dev/sda1  vg         lvm2 a-   17.14G 16.75G   100    26
  /dev/sda1  vg         lvm2 a-   17.14G 16.75G   126    24
  /dev/sda1  vg         lvm2 a-   17.14G 16.75G   150    22
  /dev/sda1  vg         lvm2 a-   17.14G 16.75G   172  4217
  /dev/sdb1  vg         lvm2 a-   17.14G 17.14G     0  4389
  /dev/sdc1  vg         lvm2 a-   17.14G 17.14G     0  4389
  /dev/sdd1  vg         lvm2 a-   17.14G 17.14G     0  4389
  /dev/sde1  vg         lvm2 a-   17.14G 17.14G     0  4389
  /dev/sdf1  vg         lvm2 a-   17.14G 17.14G     0  4389
  /dev/sdg1  vg         lvm2 a-   17.14G 17.14G     0  4389</pre><p>您可以使用<code class="literal">pvs -a</code>命令查看LVM检测到的尚未初始化为LVM物理卷的设备。
			</p><pre class="literallayout"># <code class="literal">pvs -a</code>
  PV                             VG     Fmt  Attr PSize  PFree
  /dev/VolGroup00/LogVol01                   --       0      0
  /dev/new_vg/lvol0                          --       0      0
  /dev/ram                                   --       0      0
  /dev/ram0                                  --       0      0
  /dev/ram2                                  --       0      0
  /dev/ram3                                  --       0      0
  /dev/ram4                                  --       0      0
  /dev/ram5                                  --       0      0
  /dev/ram6                                  --       0      0
  /dev/root                                  --       0      0
  /dev/sda                                   --       0      0
  /dev/sdb                                   --       0      0
  /dev/sdb1                      new_vg lvm2 a-   17.14G 17.14G
  /dev/sdc                                   --       0      0
  /dev/sdc1                      new_vg lvm2 a-   17.14G 17.09G
  /dev/sdd                                   --       0      0
  /dev/sdd1                      new_vg lvm2 a-   17.14G 17.14G</pre><p>
				<a class="xref" href="assembly_customizing-lvm-display-configuring-and-managing-logical-volumes.html#tb-table-vgs-fields" title="表6.2。 vgs显示字段">表6.2“vgs显示字段”</a>列出了<code class="literal">vgs</code>命令的显示参数，以及标题显示中显示的字段名称和字段说明。
			</p><div class="table"><a id="tb-table-vgs-fields"></a><p class="title"><strong>表6.2。 vgs显示字段</strong></p><div class="table-contents"><table border="1" summary="vgs Display Fields"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th valign="top" style="text-align:left">争论</th><th valign="top" style="text-align:left">头</th><th valign="top" style="text-align:left">描述</th></tr></thead><tbody><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">lv_count</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>#LV</p>
							 </td><td valign="top" style="text-align:left"> <p>卷组包含的逻辑卷数</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">max_lv</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>MaxLV</p>
							 </td><td valign="top" style="text-align:left"> <p>卷组中允许的最大逻辑卷数（如果不受限制，则为0）</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">max_pv的</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>MaxPV</p>
							 </td><td valign="top" style="text-align:left"> <p>卷组中允许的最大物理卷数（如果无限制，则为0）</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">pv_count</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>#PV</p>
							 </td><td valign="top" style="text-align:left"> <p>定义卷组的物理卷数</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">snap_count</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>#SN</p>
							 </td><td valign="top" style="text-align:left"> <p>卷组包含的快照数</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">vg_attr</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>ATTR</p>
							 </td><td valign="top" style="text-align:left"> <p>卷组的状态：（w）riteable，（r）eadonly，resi（z）eable，e（x）ported，（p）artial和（c）lustered。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">vg_extent_count</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>#Ext</p>
							 </td><td valign="top" style="text-align:left"> <p>卷组中的物理盘区数</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">vg_extent_size</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>分机</p>
							 </td><td valign="top" style="text-align:left"> <p>卷组中物理盘区的大小</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">vg_fmt</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>FMT</p>
							 </td><td valign="top" style="text-align:left"> <p>卷组的元数据格式（ <code class="literal">lvm2</code>或<code class="literal">lvm1</code> ）</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">vg_free</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>VFree</p>
							 </td><td valign="top" style="text-align:left"> <p>卷组中剩余的可用空间大小</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">vg_free_count</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>自由</p>
							 </td><td valign="top" style="text-align:left"> <p>卷组中的可用物理盘区数</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">卷组名</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>VG</p>
							 </td><td valign="top" style="text-align:left"> <p>卷组名称</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">vg_seqno</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>SEQ</p>
							 </td><td valign="top" style="text-align:left"> <p>表示卷组修订的数字</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">vg_size</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>VSIZE</p>
							 </td><td valign="top" style="text-align:left"> <p>卷组的大小</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">vg_sysid</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>SYS ID</p>
							 </td><td valign="top" style="text-align:left"> <p>LVM1系统ID</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">vg_tags</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>VG标签</p>
							 </td><td valign="top" style="text-align:left"> <p>附加到卷组的LVM标记</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">vg_uuid</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>VG UUID</p>
							 </td><td valign="top" style="text-align:left"> <p>卷组的UUID</p>
							 </td></tr></tbody></table></div></div><p><code class="literal">vgs</code>命令默认显示以下字段： <code class="literal">vg_name</code> ， <code class="literal">pv_count</code> ， <code class="literal">lv_count</code> ， <code class="literal">snap_count</code> ， <code class="literal">vg_attr</code> ， <code class="literal">vg_size</code> ， <code class="literal">vg_free</code> 。显示按<code class="literal">vg_name</code>排序。
			</p><pre class="literallayout"># <code class="literal">vgs</code>
  VG     #PV #LV #SN Attr   VSize  VFree
  new_vg   3   1   1 wz--n- 51.42G 51.36G</pre><p>将<code class="literal">-v</code>参数与<code class="literal">vgs</code>命令一起使用会将以下字段添加到默认显示： <code class="literal">vg_extent_size</code> ， <code class="literal">vg_uuid</code> 。
			</p><pre class="literallayout"># <code class="literal">vgs -v</code>
    Finding all volume groups
    Finding volume group "new_vg"
  VG     Attr   Ext   #PV #LV #SN VSize  VFree  VG UUID
  new_vg wz--n- 4.00M   3   1   1 51.42G 51.36G jxQJ0a-ZKk0-OpMO-0118-nlwO-wwqd-fD5D32</pre><p>
				<a class="xref" href="assembly_customizing-lvm-display-configuring-and-managing-logical-volumes.html#tb-table-lvs-fields" title="表6.3。 lvs显示字段">表6.3“lvs显示字段”</a>列出了<code class="literal">lvs</code>命令的显示参数，以及标题显示中显示的字段名称和字段说明。
			</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>在Red Hat Enterprise Linux的更高版本中， <code class="literal">lvs</code>命令的输出可能不同，输出中包含其他字段。但是，字段的顺序将保持不变，并且任何其他字段将显示在显示的末尾。
				</p></div><div class="table"><a id="tb-table-lvs-fields"></a><p class="title"><strong>表6.3。 lvs显示字段</strong></p><div class="table-contents"><table border="1" summary="lvs Display Fields"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th valign="top" style="text-align:left">争论</th><th valign="top" style="text-align:left">头</th><th valign="top" style="text-align:left">描述</th></tr></thead><tbody><tr><td valign="top" style="text-align:left"> <p>* <code class="literal">chunksize</code>
							</p>
							 <p>* <code class="literal">chunk_size</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>块</p>
							 </td><td valign="top" style="text-align:left"> <p>快照卷中的单元大小</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">copy_percent</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>复制％</p>
							 </td><td valign="top" style="text-align:left"> <p>镜像逻辑卷的同步百分比;也可以在使用<code class="literal">pv_move</code>命令移动物理盘区时使用</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">设备</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>设备</p>
							 </td><td valign="top" style="text-align:left"> <p>构成逻辑卷的基础设备：物理卷，逻辑卷以及启动物理扩展区和逻辑扩展区</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">lv_ancestors</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>祖先</p>
							 </td><td valign="top" style="text-align:left"> <p>对于精简池快照，逻辑卷的祖先</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">lv_descendants</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>后人</p>
							 </td><td valign="top" style="text-align:left"> <p>对于精简池快照，逻辑卷的后代</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">lv_attr</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>ATTR</p>
							 </td><td valign="top" style="text-align:left"> <p>逻辑卷的状态。逻辑卷属性位如下：</p>
							 <p>*位1：卷类型：（m）irrored，（M）没有初始同步的irrored，（o）rigin，（O）rigin with merge snapshot，（r）aid，？aid without initial synchronization，（s）napshot，merge （S）napshot，（p）vmove，（v）irtual，mirror或raid（i）mage，mirror或raid（I）mage不同步，mirror（l）og device，（c）onversion，thin （V）olume，（t）hin池，（T）hin池数据，raid或精简池m（e）数据库或池元数据备用，</p>
							 <p>*第2位：权限：（w）riteable，（r）ead-only，仅激活非只读卷</p>
							 <p>*第3位：分配政策：（a）在任何地方，（c）邻接，（i）nherited，c（l）ing，（n）ormal。如果卷当前已锁定分配更改（例如在执行<code class="literal">pvmove</code>命令时），则将其大写。
							</p>
							 <p>*位4：固定（m）inor</p>
							 <p>*第5位：状态：（a）ctive，（s）已被使用，（I）无效快照，无效（S）用户快照，快照（m）erge失败，暂停快照（M）erge失败，映射（d）evice present没有表，映射设备与（i）nactive表一起出现</p>
							 <p>*第6位：设备（o）笔</p>
							 <p>*第7位：目标类型：（m）irror，（r）援助，（s）napshot，（t）hin，（u）nknown，（v）irtual。这将与同一内核目标相关的逻辑卷组合在一起。因此，例如，镜像，镜像日志以及镜像本身如果使用原始设备映射镜像内核驱动程序则显示为（m），而使用md raid内核驱动程序的raid等效项全部显示为（r）。使用原始设备映射器驱动程序的快照显示为（s），而使用精简配置驱动程序的精简卷的快照显示为（t）。
							</p>
							 <p>*位8：新分配的数据块在使用前被（z）eroes块覆盖。
							</p>
							 <p>*第9位：体积健康：（p）艺术，（r）需要的efresh，（m）存在的匹配，（w）最终。 （p）artial表示系统中缺少此逻辑卷使用的一个或多个物理卷。 （r）efresh表示此RAID逻辑卷使用的一个或多个物理卷遭遇写入错误。写入错误可能是由于该物理卷的临时故障或其失败的指示。应该刷新或更换设备。 （m）ismatches表示RAID逻辑卷具有不一致的阵列部分。通过在RAID逻辑卷上启动<code class="literal">check</code>操作来发现不一致。（可以通过<code class="literal">lvchange</code>命令在RAID逻辑卷上执行清理操作， <code class="literal">check</code>和<code class="literal">repair</code> 。）（w）最终表示RAID 1逻辑卷中已标记为写入的设备。
							</p>
							 <p>*位10：s（k）ip激活：标记在激活期间跳过此卷。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">lv_kernel_major</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>KMaj</p>
							 </td><td valign="top" style="text-align:left"> <p>逻辑卷的实际主设备号（如果不活动，则为-1）</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">lv_kernel_minor</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>kmin个</p>
							 </td><td valign="top" style="text-align:left"> <p>逻辑卷的实际次设备编号（如果不活动，则为-1）</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">lv_major</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>少校</p>
							 </td><td valign="top" style="text-align:left"> <p>逻辑卷的持久主设备号（如果未指定，则为-1）</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">lv_minor</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>敏</p>
							 </td><td valign="top" style="text-align:left"> <p>逻辑卷的持久性次设备编号（如果未指定，则为-1）</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">lv_name</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>LV</p>
							 </td><td valign="top" style="text-align:left"> <p>逻辑卷的名称</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">lv_size</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>LSIZE</p>
							 </td><td valign="top" style="text-align:left"> <p>逻辑卷的大小</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">lv_tags</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>LV标签</p>
							 </td><td valign="top" style="text-align:left"> <p>附加到逻辑卷的LVM标记</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">lv_uuid</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>LV UUID</p>
							 </td><td valign="top" style="text-align:left"> <p>逻辑卷的UUID。
							</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">mirror_log</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>日志</p>
							 </td><td valign="top" style="text-align:left"> <p>镜像日志所在的设备</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">模块</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>模块</p>
							 </td><td valign="top" style="text-align:left"> <p>使用此逻辑卷所需的相应内核设备映射器目标</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">move_pv</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>移动</p>
							 </td><td valign="top" style="text-align:left"> <p>使用<code class="literal">pvmove</code>命令创建的临时逻辑卷的源物理卷</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">起源</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>起源</p>
							 </td><td valign="top" style="text-align:left"> <p>快照卷的源设备</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>* <code class="literal">regionsize</code>
							</p>
							 <p>* <code class="literal">region_size</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>区域</p>
							 </td><td valign="top" style="text-align:left"> <p>镜像逻辑卷的单元大小</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">seg_count</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>#Seg</p>
							 </td><td valign="top" style="text-align:left"> <p>逻辑卷中的段数</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">seg_size</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>SSize</p>
							 </td><td valign="top" style="text-align:left"> <p>逻辑卷中段的大小</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">seg_start</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>开始</p>
							 </td><td valign="top" style="text-align:left"> <p>逻辑卷中段的偏移量</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">seg_tags</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>Seg标签</p>
							 </td><td valign="top" style="text-align:left"> <p>LVM标记附加到逻辑卷的段</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">segtype</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>类型</p>
							 </td><td valign="top" style="text-align:left"> <p>逻辑卷的段类型（例如：镜像，条带，线性）</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">snap_percent</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>四合％</p>
							 </td><td valign="top" style="text-align:left"> <p>正在使用的快照卷的当前百分比</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>
								<code class="literal">条纹</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>#Str</p>
							 </td><td valign="top" style="text-align:left"> <p>逻辑卷中的条带或镜像数</p>
							 </td></tr><tr><td valign="top" style="text-align:left"> <p>* <code class="literal">stripesize</code>
							</p>
							 <p>* <code class="literal">stripe_size</code>
							</p>
							 </td><td valign="top" style="text-align:left"> <p>条纹</p>
							 </td><td valign="top" style="text-align:left"> <p>条带化逻辑卷中条带的单位大小</p>
							 </td></tr></tbody></table></div></div><p><code class="literal">lvs</code>命令默认提供以下显示。默认显示按卷组中的<code class="literal">vg_name</code>和<code class="literal">lv_name</code>排序。
			</p><pre class="literallayout"># <code class="literal">lvs</code>
  LV     VG              Attr       LSize    Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  origin VG              owi-a-s---    1.00g
  snap   VG              swi-a-s---  100.00m      origin 0.00</pre><p><code class="literal">lvs</code>命令的常见用法是将<code class="literal">devices</code>附加到命令以显示组成逻辑卷的底层设备。此示例还指定<code class="literal">-a</code>选项以显示作为逻辑卷组件的内部卷，例如括在括号中的RAID镜像。此示例包括RAID卷，条带卷和精简池。
			</p><pre class="literallayout"># <code class="literal">lvs -a -o +devices</code>
  LV               VG            Attr       LSize   Pool   Origin Data%  Meta%  Move Log Cpy%Sync Convert Devices
  raid1            VG            rwi-a-r---   1.00g                                      100.00           raid1_rimage_0(0),raid1_rimage_1(0)
  [raid1_rimage_0] VG            iwi-aor---   1.00g                                                       /dev/sde1(7041)
  [raid1_rimage_1] VG            iwi-aor---   1.00g                                                       /dev/sdf1(7041)
  [raid1_rmeta_0]  VG            ewi-aor---   4.00m                                                       /dev/sde1(7040)
  [raid1_rmeta_1]  VG            ewi-aor---   4.00m                                                       /dev/sdf1(7040)
  stripe1          VG            -wi-a-----  99.95g                                                       /dev/sde1(0),/dev/sdf1(0)
  stripe1          VG            -wi-a-----  99.95g                                                       /dev/sdd1(0)
  stripe1          VG            -wi-a-----  99.95g                                                       /dev/sdc1(0)
  [lvol0_pmspare]  rhel_host-083 ewi-------   4.00m                                                       /dev/vda2(0)
  pool00           rhel_host-083 twi-aotz--  &lt;4.79g               72.90  54.69                            pool00_tdata(0)
  [pool00_tdata]   rhel_host-083 Twi-ao----  &lt;4.79g                                                       /dev/vda2(1)
  [pool00_tmeta]   rhel_host-083 ewi-ao----   4.00m                                                       /dev/vda2(1226)
  root             rhel_host-083 Vwi-aotz--  &lt;4.79g pool00        72.90
  swap             rhel_host-083 -wi-ao---- 820.00m                                                       /dev/vda2(1227)</pre><p>将<code class="literal">-v</code>参数与<code class="literal">lvs</code>命令一起使用会将以下字段添加到默认显示： <code class="literal">seg_count</code> ， <code class="literal">lv_major</code> ， <code class="literal">lv_minor</code> ， <code class="literal">lv_kernel_major</code> ， <code class="literal">lv_kernel_minor</code> ， <code class="literal">lv_uuid</code> 。
			</p><pre class="literallayout"># <code class="literal">lvs -v</code>
    Finding all logical volumes
  LV         VG     #Seg Attr   LSize  Maj Min KMaj KMin Origin Snap%  Move Copy%  Log Convert LV UUID
  lvol0      new_vg    1 owi-a- 52.00M  -1  -1 253  3                                          LBy1Tz-sr23-OjsI-LT03-nHLC-y8XW-EhCl78
  newvgsnap1 new_vg    1 swi-a-  8.00M  -1  -1 253  5    lvol0    0.20                         1ye1OU-1cIu-o79k-20h2-ZGF0-qCJm-CfbsIx</pre><p>您可以使用<code class="literal">lvs</code>命令的<code class="literal">--segments</code>参数来显示包含强调段信息的默认列的信息。使用<code class="literal">segments</code>参数时， <code class="literal">seg</code>前缀是可选的。<code class="literal">lvs --segments</code>命令默认显示以下字段： <code class="literal">lv_name</code> ， <code class="literal">vg_name</code> ， <code class="literal">lv_attr</code> ， <code class="literal">stripes</code> ， <code class="literal">segtype</code> ， <code class="literal">seg_size</code> 。默认显示按卷组中的<code class="literal">vg_name</code> ， <code class="literal">lv_name</code>和<code class="literal">seg_start</code>中的<code class="literal">lv_name</code>排序。如果逻辑卷已分段，则此命令的输出将显示该内容。
			</p><pre class="literallayout"># <code class="literal">lvs --segments</code>
  LV       VG         Attr   #Str Type   SSize
  LogVol00 VolGroup00 -wi-ao    1 linear  36.62G
  LogVol01 VolGroup00 -wi-ao    1 linear 512.00M
  lv       vg         -wi-a-    1 linear 104.00M
  lv       vg         -wi-a-    1 linear 104.00M
  lv       vg         -wi-a-    1 linear 104.00M
  lv       vg         -wi-a-    1 linear  88.00M</pre><p>将<code class="literal">-v</code>参数与<code class="literal">lvs --segments</code>命令一起使用会将以下字段添加到默认显示中： <code class="literal">seg_start</code> ， <code class="literal">stripesize</code> ， <code class="literal">chunksize</code> 。
			</p><pre class="literallayout"># <code class="literal">lvs -v --segments</code>
    Finding all logical volumes
  LV         VG     Attr   Start SSize  #Str Type   Stripe Chunk
  lvol0      new_vg owi-a-    0  52.00M    1 linear     0     0
  newvgsnap1 new_vg swi-a-    0   8.00M    1 linear     0  8.00K</pre><p>以下示例显示了配置了一个逻辑卷的系统上<code class="literal">lvs</code>命令的缺省输出，后跟<code class="literal">lvs</code>命令的缺省输出，并指定了<code class="literal">segments</code>参数。
			</p><pre class="literallayout"># <code class="literal">lvs</code>
  LV    VG     Attr   LSize  Origin Snap%  Move Log Copy%
  lvol0 new_vg -wi-a- 52.00M
# <code class="literal">lvs --segments</code>
  LV    VG     Attr   #Str Type   SSize
  lvol0 new_vg -wi-a-    1 linear 52.00M</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="proc_sorting-lvm-reports-customizing-lvm-display"></a>对LVM报告进行排序</h1></div></div></div><p>通常， <code class="literal">lvs</code> ， <code class="literal">vgs</code>或<code class="literal">pvs</code>命令的整个输出必须在内部生成并存储，然后才能对其进行排序并正确对齐列。您可以指定<code class="literal">--unbuffered</code>参数，以便在生成后立即显示未排序的输出。
			</p><p>要指定要排序的备用有序列表，请使用任何报告命令的<code class="literal">-O</code>参数。没有必要在输出本身中包含这些字段。
			</p><p>以下示例显示了<code class="literal">pvs</code>命令的输出，该命令显示物理卷名称，大小和可用空间。
			</p><pre class="literallayout"># <code class="literal">pvs -o pv_name,pv_size,pv_free</code>
  PV         PSize  PFree
  /dev/sdb1  17.14G 17.14G
  /dev/sdc1  17.14G 17.09G
  /dev/sdd1  17.14G 17.14G</pre><p>以下示例显示了相同的输出，按可用空间字段排序。
			</p><pre class="literallayout"># <code class="literal">pvs -o pv_name,pv_size,pv_free -O pv_free</code>
  PV         PSize  PFree
  /dev/sdc1  17.14G 17.09G
  /dev/sdd1  17.14G 17.14G
  /dev/sdb1  17.14G 17.14G</pre><p>以下示例显示您不需要显示要排序的字段。
			</p><pre class="literallayout"># <code class="literal">pvs -o pv_name,pv_size -O pv_free</code>
  PV         PSize
  /dev/sdc1  17.14G
  /dev/sdd1  17.14G
  /dev/sdb1  17.14G</pre><p>要显示反向排序，请在<code class="literal">-O</code>参数后面指定的字段前加上<code class="literal">-</code>字符。
			</p><pre class="literallayout"># <code class="literal">pvs -o pv_name,pv_size,pv_free -O -pv_free</code>
  PV         PSize  PFree
  /dev/sdd1  17.14G 17.14G
  /dev/sdb1  17.14G 17.14G
  /dev/sdc1  17.14G 17.09G</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="proc_specifying-lvm-display-units-customizing-lvm-display"></a>指定LVM报告的单位显示</h1></div></div></div><p>要指定LVM报告显示的单位，请使用report命令的<code class="literal">--units</code>参数。您可以指定（b）ytes，（k）ilobytes，（m）egabytes，（g）igabytes，（t）erabytes，（e）xabytes，（p）etabytes，以及（h）uman-readable。默认显示是人类可读的。您可以通过在<code class="literal">/etc/lvm/lvm.conf</code>文件的<code class="literal">global</code>部分中设置<code class="literal">units</code>参数来覆盖默认值。
			</p><p>以下示例以兆字节而不是默认千兆字节为单位指定<code class="literal">pvs</code>命令的输出。
			</p><pre class="literallayout"># <code class="literal">pvs --units m</code>
  PV         VG     Fmt  Attr PSize     PFree
  /dev/sda1         lvm2 --   17555.40M 17555.40M
  /dev/sdb1  new_vg lvm2 a-   17552.00M 17552.00M
  /dev/sdc1  new_vg lvm2 a-   17552.00M 17500.00M
  /dev/sdd1  new_vg lvm2 a-   17552.00M 17552.00M</pre><p>默认情况下，单位显示为2的幂（1024的倍数）。您可以通过将单位规格（B，K，M，G，T，H）大写来指定单位以1000的倍数显示。
			</p><p>以下命令将输出显示为1024的倍数（默认行为）。
			</p><pre class="literallayout"># <code class="literal">pvs</code>
  PV         VG     Fmt  Attr PSize  PFree
  /dev/sdb1  new_vg lvm2 a-   17.14G 17.14G
  /dev/sdc1  new_vg lvm2 a-   17.14G 17.09G
  /dev/sdd1  new_vg lvm2 a-   17.14G 17.14G</pre><p>以下命令将输出显示为1000的倍数。
			</p><pre class="literallayout">#  <code class="literal">pvs --units G</code>
  PV         VG     Fmt  Attr PSize  PFree
  /dev/sdb1  new_vg lvm2 a-   18.40G 18.40G
  /dev/sdc1  new_vg lvm2 a-   18.40G 18.35G
  /dev/sdd1  new_vg lvm2 a-   18.40G 18.40G</pre><p>您还可以指定（e）ectors（定义为512字节）或自定义单位。
			</p><p>以下示例将<code class="literal">pvs</code>命令的输出显示为多个扇区。
			</p><pre class="literallayout"># <code class="literal">pvs --units s</code>
  PV         VG     Fmt  Attr PSize     PFree
  /dev/sdb1  new_vg lvm2 a-   35946496S 35946496S
  /dev/sdc1  new_vg lvm2 a-   35946496S 35840000S
  /dev/sdd1  new_vg lvm2 a-   35946496S 35946496S</pre><p>以下示例以4 MB为单位显示<code class="literal">pvs</code>命令的输出。</p><pre class="literallayout"># <code class="literal">pvs --units 4m</code>
  PV         VG     Fmt  Attr PSize    PFree
  /dev/sdb1  new_vg lvm2 a-   4388.00U 4388.00U
  /dev/sdc1  new_vg lvm2 a-   4388.00U 4375.00U
  /dev/sdd1  new_vg lvm2 a-   4388.00U 4388.00U</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="proc_diplaying-lvm-output-in-JSON-customizing-lvm-display"></a>以JSON格式显示LVM命令输出</h1></div></div></div><p>您可以使用LVM display命令的<code class="literal">--reportformat</code>选项以JSON格式显示输出。
			</p><p>以下示例以标准默认格式显示<code class="literal">lvs</code>的输出。
			</p><pre class="literallayout"># <code class="literal">lvs</code>
  LV      VG            Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  my_raid my_vg         Rwi-a-r---  12.00m                                    100.00
  root    rhel_host-075 -wi-ao----   6.67g
  swap    rhel_host-075 -wi-ao---- 820.00m</pre><p>以下命令显示指定JSON格式时相同LVM配置的输出。
			</p><pre class="literallayout"># <code class="literal">lvs --reportformat json</code>
  {
      "report": [
          {
              "lv": [
                  {"lv_name":"my_raid", "vg_name":"my_vg", "lv_attr":"Rwi-a-r---", "lv_size":"12.00m", "pool_lv":"", "origin":"", "data_percent":"", "metadata_percent":"", "move_pv":"", "mirror_log":"", "copy_percent":"100.00", "convert_lv":""},
                  {"lv_name":"root", "vg_name":"rhel_host-075", "lv_attr":"-wi-ao----", "lv_size":"6.67g", "pool_lv":"", "origin":"", "data_percent":"", "metadata_percent":"", "move_pv":"", "mirror_log":"", "copy_percent":"", "convert_lv":""},
                  {"lv_name":"swap", "vg_name":"rhel_host-075", "lv_attr":"-wi-ao----", "lv_size":"820.00m", "pool_lv":"", "origin":"", "data_percent":"", "metadata_percent":"", "move_pv":"", "mirror_log":"", "copy_percent":"", "convert_lv":""}
              ]
          }
      ]
  }</pre><p>您还可以使用<code class="literal">output_format</code>设置将报告格式设置为<code class="literal">/etc/lvm/lvm.conf</code>文件中的配置选项。但是，命令行的<code class="literal">--reportformat</code>设置优先于此设置。
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="proc_displaying-lvm-command-log-customizing-lvm-display"></a>显示LVM命令日志</h1></div></div></div><p>如果使用<code class="literal">log/report_command_log</code>配置设置启用了面向报告和面向处理的LVM命令，则可以报告命令日志。您可以确定要显示的字段集以及对此报表进行排序。
			</p><p>以下示例将LVM配置为生成LVM命令的完整日志报告。在此示例中，您可以看到成功处理了逻辑卷<code class="literal">lvol0</code>和<code class="literal">lvol1</code> ，以及包含卷的卷组<code class="literal">VG</code> 。
			</p><pre class="literallayout"># <code class="literal">lvmconfig --type full log/command_log_selection</code>
command_log_selection="all"

# <code class="literal">lvs</code>
  Logical Volume
  ==============
  LV    LSize Cpy%Sync
  lvol1 4.00m 100.00
  lvol0 4.00m

  Command Log
  ===========
  Seq LogType Context    ObjType ObjName ObjGrp  Msg     Errno RetCode
    1 status  processing lv      lvol0   vg      success     0       1
    2 status  processing lv      lvol1   vg      success     0       1
    3 status  processing vg      vg              success     0       1

# <code class="literal">lvchange -an vg/lvol1</code>
  Command Log
  ===========
  Seq LogType Context    ObjType ObjName ObjGrp  Msg     Errno RetCode
    1 status  processing lv      lvol1   vg      success     0       1
    2 status  processing vg      vg              success     0       1</pre><p>有关配置LVM报告和命令日志的更多信息，请参阅<code class="literal">lvmreport</code>手册页。
			</p></div></div></body></html>
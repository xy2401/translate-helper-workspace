<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. RHEL 8中的虚拟化 - 概述</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. RHEL 8中的虚拟化 - 概述</h1></div></div></div><p>如果您不熟悉虚拟化概念或其在Linux中的实现，以下部分概述了RHEL 8中的虚拟化：其基础，优势，组件以及Red Hat提供的其他可能的虚拟化解决方案。
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="what-is-virtualization-in-rhel-8-virt-overview"></a>什么是RHEL 8中的虚拟化？</h1></div></div></div><p>红帽企业Linux 8（RHEL 8）提供<span class="emphasis"><em>虚拟化</em></span>功能。这意味着，虚拟化软件的帮助下，运行RHEL 8机器可以<span class="emphasis"><em>承载</em></span>多个虚拟机（VM），也被称为<span class="emphasis"><em>客人</em></span> 。客户使用主机的物理硬件和计算资源在主机操作系统上运行单独的虚拟化操作系统（ <span class="emphasis"><em>客户操作系统</em></span> ）作为用户空间进程。
			</p><p>换句话说，虚拟化使操作系统中的操作系统成为可能。
			</p><p>VM使您能够安全地测试软件配置和功能，运行旧版软件或优化硬件的工作负载效率。有关优点的更多信息，请参阅<a class="xref" href="virtualization-in-rhel-8-an-overview_configuring-and-managing-virtualization.html#advantages-of-virtualization_virt-overview" title="虚拟化的优势">“虚拟化优势”一节</a> 。
			</p><p>有关虚拟化的更多信息，请参阅<a class="link" href="https://www.redhat.com/en/topics/virtualization/what-is-virtualization">Red Hat客户门户</a> 。
			</p><p>要在RHEL 8中试用虚拟化，请参阅<a class="xref" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html" title="Chapter 9. 在RHEL 8中开始使用虚拟化">第2章， <em>RHEL 8中的虚拟化入门</em></a> 。
			</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>除了RHEL 8虚拟化之外，Red Hat还提供了许多专业的虚拟化解决方案，每个解决方案都有不同的用户关注点和功能。有关更多信息，请参阅<a class="xref" href="virtualization-in-rhel-8-an-overview_configuring-and-managing-virtualization.html#red-hat-virtualization-solutions_virt-overview" title="红帽虚拟化解决方案">“Red Hat虚拟化解决方案”一节</a> 。
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="advantages-of-virtualization_virt-overview"></a>虚拟化的优势</h1></div></div></div><p>与使用物理机相比，使用虚拟机（VM）具有以下优势：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
						<span class="strong"><strong>灵活，细粒度的资源分配</strong></span>
					</p><p class="simpara">VM在主机上运行，主机通常是物理的，也可以为客户操作系统分配物理硬件。但是，物理资源到VM的分配是在软件中完成的，因此非常灵活。VM使用主机内存，CPU或存储空间的可配置部分，该配置可以指定非常细粒度的资源请求。
					</p><p class="simpara">例如，客户操作系统看到的磁盘可以表示为主机文件系统上的文件，并且该磁盘的大小比物理磁盘的可用大小要小得多。
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong"><strong>软件控制的配置</strong></span>
					</p><p class="simpara">所有VM的配置都作为数据保存在主机上，并在软件控制下。因此，可以轻松地创建，删除，克隆，迁移，远程操作VM或连接到远程存储。
					</p><p class="simpara">此外，VM的当前状态可以随时备份为快照。然后可以加载快照以将系统还原到已保存的状态。
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong"><strong>与主机分离</strong></span>
					</p><p class="simpara">guest虚拟机在虚拟内核上运行，与主机OS分开。这意味着可以在VM上安装任何操作系统，即使客户操作系统变得不稳定或受到危害，主机也不会受到任何影响。
					</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>并非所有操作系统都支持RHEL 8主机中的来宾操作系统。有关详细信息，请参阅<a class="xref" href="feature-support-and-limitations-in-rhel8-virtualization_configuring-and-managing-virtualization.html#recommended-features-in-rhel8-virtualization_feature-support-and-limitations-in-rhel8-virtualization" title="RHEL 8虚拟化中的推荐功能">“RHEL 8虚拟化中的推荐功能”一节</a> 。
						</p></div></li><li class="listitem"><p class="simpara">
						<span class="strong"><strong>空间和成本效率</strong></span>
					</p><p class="simpara">单个物理机可以托管大量VM。因此，它避免了多个物理机器执行相同任务的需要，因此降低了与物理硬件相关的空间，功率和维护要求。
					</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="rhel-8-virtual-machine-components-and-their-interaction_virt-overview"></a> RHEL 8虚拟机组件及其交互</h1></div></div></div><p>RHEL 8中的虚拟化包含以下主要软件组件：</p><h3><a id="hypervisor"></a>管理程序</h3><p>在RHEL 8中创建虚拟机（VM）的基础是虚拟机<span class="emphasis"><em>管理程序</em></span> ，它是一个控制硬件并允许在主机上运行多个操作系统的软件层。
			</p><p>管理程序包括<span class="strong"><strong>基于内核的虚拟机（KVM）</strong></span>内核模块和虚拟化内核驱动程序，例如<code class="literal">virtio</code>和<code class="literal">vfio</code> 。这些组件确保主机上的Linux内核为用户空间软件提供虚拟化资源。
			</p><p>在用户空间级别， <span class="strong"><strong>QEMU</strong></span>仿真器模拟客户机操作系统可以运行的完整虚拟化硬件平台，并管理如何在主机上分配资源并呈现给客户机。</p><p>此外， <code class="literal">libvirt</code>软件套件还可用作管理和通信层，使QEMU更易于与之交互，实施安全规则，并提供许多用于配置和运行guest虚拟机的附加工具。
			</p><h3><a id="xml_configuration"></a> XML配置</h3><p>基于主机的XML配置文件（也称为<span class="emphasis"><em>域XML</em></span>文件）描述了特定的VM。这包括：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">元数据，例如VM的名称，时区和有关VM的其他信息。</li><li class="listitem">虚拟机中设备的描述，包括虚拟CPU（vCPUS），存储设备，输入/输出设备，网络接口卡以及其他硬件，真实和虚拟。
					</li><li class="listitem">VM设置，例如可以使用的最大内存量，重新启动设置以及有关VM行为的其他设置。</li></ul></div><h3><a id="component_interaction"></a>组件交互</h3><p>启动VM时，管理程序会根据XML配置在主机上创建VM实例作为用户空间进程。虚拟机管理程序还使基于主机的接口可以访问VM进程，例如<code class="literal">virsh</code> ， <code class="literal">virt-install</code>和<code class="literal">guestfish</code>命令，或Web控制台GUI。</p><p>使用这些虚拟化工具时，libvirt会将其输入转换为QEMU的指令。 QEMU将指令传送给KVM，确保内核适当地分配执行指令所需的资源。因此，QEMU可以执行相应的用户空间更改，例如创建或修改guest虚拟机，或在guest虚拟机的操作系统中执行操作。
			</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>虽然QEMU是架构的重要组成部分，但出于安全考虑，它并不打算直接用于RHEL 8系统。因此，Red Hat不支持使用<code class="literal">qemu-*</code>命令，强烈建议使用libvirt与QEMU进行交互。
				</p></div><p>有关基于主机的接口的更多信息，请参阅<a class="link" href="virtualization-in-rhel-8-an-overview_configuring-and-managing-virtualization.html#con_tools-and-interfaces-for-virtualization-management-in-RHEl8_virt-overview" title="RHEL 8中用于虚拟化管理的工具和界面">RHEL 8中的虚拟化管理工具和接口</a> 。
			</p><div class="figure"><a id="idm139710572723584"></a><p class="title"><strong>图1.1。RHEL 8虚拟化架构</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/virt-architecture.png" alt="virt架构"></div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="con_tools-and-interfaces-for-virtualization-management-in-RHEl8_virt-overview"></a> RHEL 8中用于虚拟化管理的工具和界面</h1></div></div></div><p>您可以使用命令行界面（CLI）或多个图形用户界面（GUI）在RHEL 8中管理虚拟化。
			</p><h3><a id="command_line_interface"></a>命令行界面</h3><p>CLI是在RHEL 8中管理虚拟化的最强大方法。用于虚拟化管理的突出CLI命令包括：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
						<span class="strong"><strong>virsh</strong></span> - 一个多功能虚拟化命令行实用程序和shell，具有多种用途，具体取决于提供的参数。例如：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">启动和关闭虚拟机 - <code class="literal">virsh start</code>和<code class="literal">virsh shutdown</code>
							</li><li class="listitem">列出可用的虚拟机（VM） - <code class="literal">virsh list</code>
							</li><li class="listitem">从配置文件创建虚拟机 - <code class="literal">virsh create</code>
							</li><li class="listitem">进入虚拟化shell  - <code class="literal">virsh</code>
							</li></ul></div><p class="simpara">有关更多信息，请参见<code class="literal">virsh(1)</code>手册页。
					</p></li><li class="listitem">
						<code class="literal">virt-install</code> - 用于创建新虚拟机的CLI实用程序。有关更多信息，请参见<code class="literal">virt-install(1)</code>手册页。
					</li><li class="listitem">
						<code class="literal">virt-xml</code> - 用于编辑虚拟机配置的实用程序。
					</li><li class="listitem">
						<code class="literal">guestfish</code> - 用于检查和修改虚拟机磁盘映像的实用程序。有关更多信息，请参见<code class="literal">guestfish(1)</code>手册页。
					</li></ul></div><p>有关使用CLI进行基本虚拟化管理的说明，请参阅<a class="xref" href="getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization.html" title="Chapter 9. 在RHEL 8中开始使用虚拟化">第2章， <em>RHEL 8中的虚拟化入门</em></a> 。
			</p><h3><a id="graphical_interfaces"></a>图形界面</h3><p>您可以使用以下GUI管理RHEL 8中的虚拟化：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara"><span class="strong"><strong>RHEL 8 Web控制台</strong></span> （也称为<span class="emphasis"><em>Cockpit</em></span> ）提供了一个可远程访问且易于使用的图形用户界面，用于管理VM和虚拟化主机。
					</p><p class="simpara">有关使用Web控制台进行基本虚拟化管理的说明，请参阅<a class="xref" href="using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization.html" title="Chapter 9. 使用RHEL 8 Web控制台管理虚拟机">第5章， <em>使用RHEL 8 Web控制台管理虚拟机</em></a> 。
					</p></li><li class="listitem"><p class="simpara">Virtual Machine Manager（ <span class="strong"><strong>virt-manager</strong></span> ）应用程序提供用于管理VM和虚拟化主机的专用GUI。
					</p><div class="important" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">重要</h3><p>虽然RHEL 8仍然支持，但<span class="strong"><strong>virt-manager</strong></span>已被弃用。RHEL 8 Web控制台旨在成为后续版本的替代品。因此，建议您熟悉用于在GUI中管理虚拟化的Web控制台。但是，在RHEL 8中，某些功能只能从<span class="strong"><strong>virt-manager</strong></span>或命令行访问。
						</p></div></li><li class="listitem"><p class="simpara"><span class="strong"><strong>Gnome Boxes</strong></span>应用程序是一个轻量级图形界面，用于查看和访问VM和远程系统。Gnome Boxes主要用于桌面系统。
					</p><div class="important" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">重要</h3><p>
							<span class="strong"><strong>Gnome Boxes</strong></span>作为GNOME桌面环境的一部分提供，在RHEL 8上受支持，但Red Hat建议您使用Web控制台在GUI中管理虚拟化。</p></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="red-hat-virtualization-solutions_virt-overview"></a>红帽虚拟化解决方案</h1></div></div></div><p>以下Red Hat产品构建于RHEL 8虚拟化功能之上，并扩展了RHEL 8中提供的KVM虚拟化功能。此外， <a class="link" href="feature-support-and-limitations-in-rhel8-virtualization_configuring-and-managing-virtualization.html" title="Chapter 11. Feature support and limitations in RHEL 8 virtualization">RHEL 8虚拟化的</a>许多<a class="link" href="feature-support-and-limitations-in-rhel8-virtualization_configuring-and-managing-virtualization.html" title="Chapter 9. RHEL 8虚拟化中的功能支持和限制">限制</a>不适用于这些产品：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">红帽虚拟化（RHV）</span></dt><dd><p class="simpara">RHV专为企业级可扩展性和性能而设计，可通过集中式图形界面管理整个虚拟基础架构，包括主机，虚拟机，网络，存储和用户。
						</p><p class="simpara">有关红帽企业Linux和红帽虚拟化中虚拟化之间差异的信息，请参阅<a class="link" href="https://access.redhat.com/solutions/629513">红帽客户门户</a> 。
						</p><p class="simpara">运行大型部署或任务关键型应用程序的企业可以使用红帽虚拟化。适用于红帽虚拟化的大型部署示例包括数据库，交易平台和消息系统，这些系统必须连续运行而不会出现任何停机。
						</p><p class="simpara">有关Red Hat Virtualization的更多信息，请参阅<a class="link" href="http://www.redhat.com/en/technologies/virtualization/enterprise-virtualization">Red Hat Customer Portal</a>或<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/">Red Hat Virtualization文档套件</a> 。
						</p><p class="simpara">要下载完全支持的60天Red Hat Virtualization评估版，请访问<a class="link" href="https://access.redhat.com/products/red-hat-virtualization/evaluation">https://access.redhat.com/products/red-hat-virtualization/evaluation</a>
						</p></dd><dt><span class="term">红帽OpenStack平台（RHOSP）</span></dt><dd><p class="simpara">红帽OpenStack平台提供了一个集成的基础，用于创建，部署和扩展安全可靠的公共或私有<a class="link" href="https://www.redhat.com/en/topics/openstack">OpenStack</a>云。
						</p><p class="simpara">有关Red Hat OpenStack Platform的更多信息，请参阅<a class="link" href="https://www.redhat.com/en/technologies/linux-platforms/openstack-platform">Red Hat客户门户</a>或<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/">Red Hat OpenStack Platform文档套件</a> 。
						</p><p class="simpara">要下载完全支持的60天Red Hat OpenStack平台评估版，请访问<a class="link" href="https://access.redhat.com/products/red-hat-openstack-platform/evaluation">https://access.redhat.com/products/red-hat-openstack-platform/evaluation</a>
						</p></dd></dl></div><p>此外，特定的Red Hat产品还提供<span class="emphasis"><em>操作系统级虚拟化</em></span> ，也称为<span class="strong"><strong>容器化</strong></span> ：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">容器是主机操作系统的隔离实例，并在现有操作系统内核之上运行。有关容器的更多信息，请参阅<a class="link" href="https://www.redhat.com/en/topics/containers">Red Hat客户门户</a> 。
					</li><li class="listitem">容器不具备KVM虚拟化的多功能性，但更轻巧，更灵活。有关更详细的比较，请参阅<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/overview_of_containers_in_red_hat_systems/introduction_to_linux_containers">Linux容器简介</a> 。
					</li></ul></div></div></div></body></html>
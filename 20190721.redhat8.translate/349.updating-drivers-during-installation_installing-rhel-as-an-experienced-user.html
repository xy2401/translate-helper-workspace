<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. 安装期间更新驱动程序</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. 安装期间更新驱动程序</h1></div></div></div><p>本节介绍如何在Red Hat Enterprise Linux安装过程中完成驱动程序更新。
			</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>这是安装过程的可选步骤。除非必要，否则Red Hat建议您不要执行驱动程序更新。
				</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="prerequisites-updating-drivers-during-installation"></a>条件</h1></div></div></div><p>Red Hat，您的硬件供应商或受信任的第三方供应商已通知您，在Red Hat Enterprise Linux安装期间需要更新驱动程序。
				</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="driver-overview_updating-drivers-during-installation"></a>概观</h1></div></div></div><p>Red Hat Enterprise Linux支持许多硬件设备的驱动程序，但可能不支持某些新发布的驱动程序。只有在不受支持的驱动程序阻止安装完成时才应执行驱动程序更新。安装期间更新驱动程序通常只需要支持特定配置。例如，安装存储适配卡的驱动程序，以提供对系统存储设备的访问。
				</p><div class="warning" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">警告</h3><p>驱动程序更新磁盘可能会禁用冲突的内核驱动在极少数情况下，卸载内核模块可能会导致安装错误。
					</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="types-of-driver-update_updating-drivers-during-installation"></a>驱动程序更新的类型</h1></div></div></div><p>Red Hat，您的硬件供应商或受信任的第三方提供驱动程序更新作为ISO映像文件。收到ISO映像文件后，请选择驱动程序更新的类型。
				</p><div class="variablelist"><p class="title"><strong>驱动程序更新的类型</strong></p><dl class="variablelist"><dt><span class="term">自动</span></dt><dd>推荐的驱动程序更新方法;标有<code class="literal">OEMDRV</code>的存储设备（包括CD，DVD或USB闪存驱动器）物理连接到系统。如果安装启动时存在<code class="literal">OEMDRV</code>存储设备，则将其视为驱动程序更新磁盘，安装程序会自动加载其驱动程序。
							</dd><dt><span class="term">辅助</span></dt><dd>安装程序会提示您查找驱动程序更新。您可以使用任何带有<code class="literal">OEMDRV</code>以外标签的本地存储设备。启动安装时指定了<code class="literal">inst.dd</code>引导选项。如果使用此选项而没有任何参数，则安装程序将显示连接到系统的所有存储设备，并提示您选择包含驱动程序更新的设备。
							</dd><dt><span class="term">手册</span></dt><dd>手动指定驱动程序更新映像或RPM包的路径。您可以使用任何带有<code class="literal">OEMDRV</code>以外标签的本地存储设备，也可以使用可从安装系统访问的网络位置。启动安装时指定了<code class="literal">inst.dd=location</code> boot选项，其中<span class="emphasis"><em>location</em></span>是驱动程序更新磁盘或ISO映像的路径。指定此选项时，安装程序会尝试加载在指定位置找到的任何驱动程序更新。通过手动驱动程序更新，您可以指定本地存储设备或网络位置（HTTP，HTTPS或FTP服务器）。
							</dd></dl></div><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">您可以同时使用<code class="literal">inst.dd=location</code>和<code class="literal">inst.dd</code> ，其中<span class="emphasis"><em>location</em></span>是驱动程序更新磁盘或ISO映像的路径。在此方案中，安装程序尝试从该位置加载任何可用的驱动程序更新，并提示您选择包含驱动程序更新的设备。
							</li><li class="listitem">从网络位置加载驱动程序更新时，使用<code class="literal">ip= option</code>初始化网络。
							</li></ul></div></div><div class="title"><strong>限制</strong></div><p>在启用了安全启动技术的UEFI系统上，必须使用有效证书对所有驱动程序进行签名。Red Hat驱动程序由Red Hat的一个私钥签名，并通过内核中相应的公钥进行身份验证。如果您加载其他单独的驱动程序，请验证它们是否已签名。
					</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="preparing-a-driver-update-disc_updating-drivers-during-installation"></a>准备驱动程序更新</h1></div></div></div><p>此过程描述如何在CD和DVD上准备驱动程序更新。</p><h3><a id="prerequisites_3"></a>先决条件</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">您从Red Hat，您的硬件供应商或受信任的第三方供应商处收到了驱动程序更新ISO映像。
						</li><li class="listitem">您将驱动程序更新ISO映像刻录到CD或DVD。</li></ul></div><div class="warning" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">警告</h3><p>如果CD或DVD上只有一个以<code class="literal">.iso</code>结尾的ISO映像文件，则刻录过程未成功。有关如何将ISO映像刻录到CD或DVD的说明，请参阅系统的刻录软件文档。</p></div><h3><a id="procedure_3"></a>程序</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">将驱动程序更新CD或DVD插入系统的CD / DVD驱动器，然后使用系统的文件管理器工具进行浏览。
						</li><li class="listitem">验证单个文件<code class="literal">rhdd3</code>是否可用。 <code class="literal">rhdd3</code>是一个签名文件，包含驱动程序描述和名为<code class="literal">rpms</code>的目录，其中包含RPM软件包以及各种体系结构的实际驱动程序。
						</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="performing-an-automatic-driver-update_updating-drivers-during-installation"></a>执行自动驱动程序更新</h1></div></div></div><p>此过程描述如何在安装期间执行自动驱动程序更新。
				</p><h3><a id="prerequisites_4"></a>先决条件</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">您已将驱动程序更新映像放在具有<code class="literal">OEMDRV</code>标签的标准磁盘分区上，或将<code class="literal">OEMDRV</code>驱动程序更新映像刻录到CD或DVD。在驱动程序更新过程中可能无法访问高级存储（如RAID或LVM卷）。
						</li><li class="listitem">您已将具有<code class="literal">OEMDRV</code>卷标的块设备连接到系统，或者在开始安装过程之前将准备好的CD或DVD插入系统的CD / DVD驱动器。
						</li></ul></div><h3><a id="procedure_4"></a>程序</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">完成先决条件步骤后，驱动程序会在安装程序启动时自动加载，并在安装过程中安装在系统上。
						</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="performing-an-assisted-driver-update_updating-drivers-during-installation"></a>执行辅助驱动程序更新</h1></div></div></div><p>此过程描述如何在安装期间执行辅助驱动程序更新。
				</p><h3><a id="prerequisite"></a>条件</h3><p>您已将没有<code class="literal">OEMDRV</code>卷标的块设备连接到系统，并将驱动程序磁盘映像复制到此设备，或者您已准备好驱动程序更新CD或DVD，并在开始安装过程之前将其插入系统的CD / DVD驱动器。
				</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>如果将ISO映像文件刻录到CD或DVD但它没有<code class="literal">OEMDRV</code>卷标，则可以使用不带参数的<code class="literal">inst.dd</code>选项。安装程序提供扫描和选择CD或DVD驱动程序的选项。在这种情况下，安装程序不会提示您选择驱动程序更新ISO映像。另一种情况是使用带有<code class="literal">inst.dd=location</code>引导选项的CD或DVD;这允许安装程序自动扫描CD或DVD以获取驱动程序更新。有关更多信息，请参阅<a class="xref" href="updating-drivers-during-installation_installing-rhel-as-an-experienced-user.html#performing-a-manual-driver-update_updating-drivers-during-installation" title="执行手动驱动程序更新">“执行手动驱动程序更新”一节</a> 。
					</p></div><h3><a id="procedure_5"></a>程序</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">在引导菜单窗口中，按键盘上的<span class="strong"><strong>Tab</strong></span>键以显示引导命令行。
						</li><li class="listitem">将<code class="literal">inst.dd</code>引导选项附加到命令行，然后按<span class="strong"><strong>Enter</strong></span>执行引导过程。
						</li><li class="listitem">从菜单中，选择本地磁盘分区或CD或DVD设备。安装程序扫描ISO文件或驱动程序更新RPM软件包。
						</li><li class="listitem"><p class="simpara">可选：选择驱动程序更新ISO文件。
						</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>如果所选设备或分区包含驱动程序更新RPM软件包而不是ISO映像文件（例如，包含驱动程序更新CD或DVD的光盘驱动器），则不需要此步骤。</p></div></li><li class="listitem"><p class="simpara">选择所需的驱动程序。
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">使用键盘上的数字键切换驱动程序选择。
								</li><li class="listitem">按<span class="strong"><strong>c</strong></span>键安装选定的驱动程序。加载选定的驱动程序并开始安装过程。
								</li></ol></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="performing-a-manual-driver-update_updating-drivers-during-installation"></a>执行手动驱动程序更新</h1></div></div></div><p>此过程描述如何在安装期间执行手动驱动程序更新。
				</p><h3><a id="prerequisite_2"></a>条件</h3><p>将驱动程序更新ISO映像文件放在USB闪存驱动器或Web服务器上，并将其连接到您的计算机。
				</p><h3><a id="procedure_6"></a>程序</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">在引导菜单窗口中，按键盘上的<span class="strong"><strong>Tab</strong></span>键以显示引导命令行。
						</li><li class="listitem">将<code class="literal">inst.dd=location</code> boot选项附加到命令行，其中location是驱动程序更新的路径。通常，映像文件位于Web服务器上，例如<a class="link" href="http://server.example.com/dd.iso">http://server.example.com/dd.iso</a> ，或位于USB闪存驱动器上，例如<code class="literal">/dev/sdb1</code> 。也可以指定包含驱动程序更新的RPM包，例如<a class="link" href="http://server.example.com/dd.rpm">http://server.example.com/dd.rpm</a> 。</li><li class="listitem">按<span class="strong"><strong>Enter</strong></span>执行引导过程。将自动加载指定位置的可用驱动程序并开始安装过程。
						</li></ol></div><h3><a id="additional_resources_4"></a>其他资源</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">有关<code class="literal">inst.dd</code>引导选项的更多信息，请参阅上游<a class="link" href="https://github.com/rhinstaller/anaconda/blob/rhel-8.0/docs/boot-options.rst/#instdd">inst.dd引导选项</a>内容。
						</li><li class="listitem">有关所有引导选项的更多信息，请参阅上游<a class="link" href="https://github.com/rhinstaller/anaconda/blob/rhel-8.0/docs/boot-options.rst/">引导选项</a>内容。
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="disabling-a-driver_updating-drivers-during-installation"></a>禁用驱动程序</h1></div></div></div><p>此过程描述如何禁用故障驱动程序。
				</p><h3><a id="prerequisites_5"></a>先决条件</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">您已启动安装程序启动菜单。
						</li></ul></div><h3><a id="procedure_7"></a>程序</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">从启动菜单中，按键盘上的<span class="strong"><strong>Tab</strong></span>键以显示启动命令行。
						</li><li class="listitem">将<code class="literal">modprobe.blacklist=driver_name</code>引导选项附加到命令行。
						</li><li class="listitem"><p class="simpara">将<span class="emphasis"><em>driver_name</em></span>替换为要禁用的驱动程序的名称，例如：</p><pre class="screen">modprobe.blacklist=ahci</pre><p class="simpara">使用<code class="literal">modprobe.blacklist=</code> boot选项禁用的驱动程序在已安装的系统上保持禁用状态，并显示在<code class="literal">/etc/modprobe.d/anaconda-blacklist.conf</code>文件中。
						</p></li><li class="listitem">按<span class="strong"><strong>Enter</strong></span>执行引导过程。
						</li></ol></div></div></div></body></html>
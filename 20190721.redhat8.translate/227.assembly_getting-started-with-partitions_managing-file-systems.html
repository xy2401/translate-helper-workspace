<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. 分区入门</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. 分区入门</h1></div></div></div><p>作为系统管理员，您可以使用以下过程来创建，删除和修改各种类型的磁盘分区。
		</p><p>有关在块设备上使用分区的优缺点的概述，请参阅以下KBase文章： <a class="link" href="https://access.redhat.com/solutions/163853">https</a> ：//access.redhat.com/solutions/163853。</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="assembly_viewing-the-partition-table_assembly_getting-started-with-partitions"></a>查看分区表</h1></div></div></div><p>作为系统管理员，您可以显示块设备的分区表，以查看分区布局和各个分区的详细信息。
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="proc_viewing-the-partition-table-with-parted_assembly_viewing-the-partition-table"></a>使用parted查看分区表</h2></div></div></div><p>此过程描述如何使用<code class="literal">parted</code>实用程序查看块设备上的分区表。
				</p><h4><a id="procedure_19"></a>程序</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">启动交互式<code class="literal">parted</code> shell：</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">将<span class="emphasis"><em><span class="replaceable">块设备</span></em></span>替换为要检查的设备的路径：例如， <code class="literal">/dev/sda</code> 。
								</li></ul></div></li><li class="listitem"><p class="simpara">查看分区表：</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">（可选）使用以下命令切换到下一个要检查的其他设备：</p><pre class="screen">(parted) select <span class="emphasis"><em><span class="replaceable">block-device</span></em></span></pre></li></ol></div><h4><a id="additional_resources_15"></a>其他资源</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">parted(8)</code>手册页。
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ref_example-output-of-parted-print_assembly_viewing-the-partition-table"></a> <code class="literal">parted print</code>示例输出</h2></div></div></div><p>本节提供<code class="literal">print</code> shell中<code class="literal">parted</code>命令的示例输出，并描述输出中的字段。
				</p><div class="example"><a id="idm139870595481648"></a><p class="title"><strong>例7.1。输出<code class="literal">print</code>命令</strong></p><div class="example-contents"><pre class="screen">Model: ATA SAMSUNG MZNLN256 (scsi)
Disk /dev/sda: 256GB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags:

Number  Start   End     Size    Type      File system  Flags
 1      1049kB  269MB   268MB   primary   xfs          boot
 2      269MB   34.6GB  34.4GB  primary
 3      34.6GB  45.4GB  10.7GB  primary
 4      45.4GB  256GB   211GB   extended
 5      45.4GB  256GB   211GB   logical</pre><p>以下是对字段的描述：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">Model: ATA SAMSUNG MZNLN256 (scsi)</code></span></dt><dd>磁盘类型，制造商，型号和接口。
								</dd><dt><span class="term"><code class="literal">Disk /dev/sda: 256GB</code></span></dt><dd>块设备的文件路径和存储容量。
								</dd><dt><span class="term"><code class="literal">Partition Table: msdos</code></span></dt><dd>磁盘标签类型。
								</dd><dt><span class="term"><code class="literal">Number</code></span></dt><dd>分区号。例如，编号为1的分区对应于<code class="literal">/dev/sda1</code> 。
								</dd><dt><span class="term"><code class="literal">Start</code>和<code class="literal">End</code></span></dt><dd>分区开始和结束的设备上的位置。
								</dd><dt><span class="term"><code class="literal">Type</code></span></dt><dd>有效类型是元数据，免费，主要，扩展或逻辑。
								</dd><dt><span class="term"><code class="literal">File system</code></span></dt><dd>文件系统类型。如果设备的“ <code class="literal">File system</code>字段未显示任何值，则表示其文件系统类型未知。<code class="literal">parted</code>实用程序无法识别加密设备上的文件系统。
								</dd><dt><span class="term"><code class="literal">Flags</code></span></dt><dd>列出为分区设置的标志。可用的标志是<code class="literal">boot</code> ， <code class="literal">root</code> ， <code class="literal">swap</code> ， <code class="literal">hidden</code> ， <code class="literal">raid</code> ， <code class="literal">lvm</code>或<code class="literal">lba</code> 。
								</dd></dl></div></div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="assembly_creating-a-partition-table-on-a-disk_assembly_getting-started-with-partitions"></a>在磁盘上创建分区表</h1></div></div></div><p>作为系统管理员，您可以使用不同类型的分区表格式化块设备，以启用设备上的分区。
			</p><div class="warning" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">警告</h3><p>使用分区表格式化块设备会删除存储在设备上的所有数据。
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="con_considerations-before-modifying-partitions-on-a-disk_assembly_creating-a-partition-table-on-a-disk"></a>修改磁盘上的分区之前的注意事项</h2></div></div></div><p>本节列出了在创建，删除或调整分区大小之前要考虑的要点。
				</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>本节不涉及DASD分区表，该表特定于IBM Z体系结构。有关DASD的信息，请参阅：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">在IBM Z上配置Linux实例</a>
							</li><li class="listitem"><a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">您应该</a>在IBM Knowledge Center上<a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">了解有关DASD的</a>文章</li></ul></div></div><h4><a id="the_maximum_number_of_partitions"></a>最大分区数</h4><p>设备上的分区数受分区表类型的限制：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">在使用<span class="strong"><strong>主引导记录（MBR）</strong></span>分区表格式化的设备上，您可以：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">最多四个主分区，或</li><li class="listitem">扩展中最多有三个主分区，一个扩展分区和多个逻辑分区。
								</li></ul></div></li><li class="listitem">在使用<span class="strong"><strong>GUID分区表（GPT）</strong></span>格式化的设备上，最大分区数为128。虽然GPT规范通过增加为分区表保留的区域来允许更多分区，但是<code class="literal">parted</code>实用程序使用的常见做法是将其限制为足够的区域以用于128个分区。
						</li></ul></div><h4><a id="the_maximum_size_of_a_partition"></a>分区的最大大小</h4><p>设备上分区的大小受分区表类型的限制：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">在使用<span class="strong"><strong>主引导记录（MBR）</strong></span>分区表格式化的设备上，最大大小为2TiB。</li><li class="listitem">在使用<span class="strong"><strong>GUID分区表（GPT）</strong></span>格式化的设备上，最大大小为8ZiB。</li></ul></div><p>如果要创建大于2TiB的分区，则必须使用GPT格式化磁盘。</p><h4><a id="size_alignment"></a>尺寸对齐</h4><p><code class="literal">parted</code>实用程序使您可以使用多个不同的后缀指定分区大小：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MiB，GiB或TiB</span></dt><dd><p class="simpara">大小以2的幂表示。
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">分区的起点与size指定的确切扇区对齐。
									</li><li class="listitem">结束点与指定的大小减去1个扇区对齐。
									</li></ul></div></dd><dt><span class="term">MB，GB或TB</span></dt><dd><p class="simpara">大小以10的幂表示。
							</p><p class="simpara">起点和终点在指定单位的一半内对齐：例如，使用MB后缀时为±500KB。
							</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ref_comparison-of-partition-table-types_assembly_creating-a-partition-table-on-a-disk"></a>分区表类型的比较</h2></div></div></div><p>本节将比较可以在块设备上创建的不同类型的分区表的属性。
				</p><div class="table"><a id="idm139870543664736"></a><p class="title"><strong>表7.1。分区表类型</strong></p><div class="table-contents"><table border="1" summary="Partition table types"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th valign="top" style="text-align:left">分区表</th><th valign="top" style="text-align:left">最大分区数</th><th valign="top" style="text-align:left">最大分区大小</th></tr></thead><tbody><tr><td valign="top" style="text-align:left"> <p>主引导记录（MBR）</p>
								 </td><td valign="top" style="text-align:left"> <p>扩展分区内有4个主要或3个主要和12个逻辑</p>
								 </td><td valign="top" style="text-align:left"> <p>2TiB</p>
								 </td></tr><tr><td valign="top" style="text-align:left"> <p>GUID分区表（GPT）</p>
								 </td><td valign="top" style="text-align:left"> <p>128</p>
								 </td><td valign="top" style="text-align:left"> <p>8ZiB</p>
								 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="proc_creating-a-partition-table-on-a-disk-with-parted_assembly_creating-a-partition-table-on-a-disk"></a>在parted的磁盘上创建分区表</h2></div></div></div><p>此过程描述如何使用<code class="literal">parted</code>实用程序使用分区表格式化块设备。
				</p><h4><a id="procedure_20"></a>程序</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">启动交互式<code class="literal">parted</code> shell：</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">将<span class="emphasis"><em><span class="replaceable">块设备</span></em></span>替换为要创建分区表的设备的路径：例如， <code class="literal">/dev/sda</code> 。
								</li></ul></div></li><li class="listitem"><p class="simpara">确定设备上是否已存在分区表：</p><pre class="screen">(parted) print</pre><p class="simpara">如果设备已包含分区，则将在后续步骤中删除它们。
						</p></li><li class="listitem"><p class="simpara">创建新的分区表：</p><pre class="screen">(parted) mklabel <span class="emphasis"><em><span class="replaceable">table-type</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">将<span class="emphasis"><em><span class="replaceable">table-type</span></em></span>替换为预期的分区表类型：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											MBR的<code class="literal">msdos</code></li><li class="listitem">
											<code class="literal">gpt</code> for GPT</li></ul></div></li></ul></div><div class="example"><a id="idm139870567892656"></a><p class="title"><strong>例7.2。创建GPT表</strong></p><div class="example-contents"><p>例如，要在磁盘上创建GPT表，请使用：</p><pre class="screen">(parted) mklabel gpt</pre></div></div><p class="simpara">一旦输入此命令，更改即开始发生，因此请在执行之前对其进行检查。
						</p></li><li class="listitem"><p class="simpara">查看分区表以确认分区表是否存在：</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">退出<code class="literal">parted</code> shell：</p><pre class="screen">(parted) quit</pre></li></ol></div><h4><a id="additional_resources_16"></a>其他资源</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">parted(8)</code>手册页。
						</li></ul></div><h4><a id="next_steps"></a>下一步</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">在设备上创建分区。有关详细信息，请参阅<a class="xref" href="assembly_getting-started-with-partitions_managing-file-systems.html#assembly_creating-a-partition_assembly_getting-started-with-partitions" title="创建分区">“创建分区”一节</a> 。
						</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="assembly_creating-a-partition_assembly_getting-started-with-partitions"></a>创建分区</h1></div></div></div><p>作为系统管理员，您可以在磁盘上创建新分区。
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="con_considerations-before-modifying-partitions-on-a-disk_assembly_creating-a-partition"></a>修改磁盘上的分区之前的注意事项</h2></div></div></div><p>本节列出了在创建，删除或调整分区大小之前要考虑的要点。
				</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>本节不涉及DASD分区表，该表特定于IBM Z体系结构。有关DASD的信息，请参阅：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">在IBM Z上配置Linux实例</a>
							</li><li class="listitem"><a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">您应该</a>在IBM Knowledge Center上<a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">了解有关DASD的</a>文章</li></ul></div></div><h4><a id="the_maximum_number_of_partitions_2"></a>最大分区数</h4><p>设备上的分区数受分区表类型的限制：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">在使用<span class="strong"><strong>主引导记录（MBR）</strong></span>分区表格式化的设备上，您可以：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">最多四个主分区，或</li><li class="listitem">扩展中最多有三个主分区，一个扩展分区和多个逻辑分区。
								</li></ul></div></li><li class="listitem">在使用<span class="strong"><strong>GUID分区表（GPT）</strong></span>格式化的设备上，最大分区数为128。虽然GPT规范通过增加为分区表保留的区域来允许更多分区，但是<code class="literal">parted</code>实用程序使用的常见做法是将其限制为足够的区域以用于128个分区。
						</li></ul></div><h4><a id="the_maximum_size_of_a_partition_2"></a>分区的最大大小</h4><p>设备上分区的大小受分区表类型的限制：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">在使用<span class="strong"><strong>主引导记录（MBR）</strong></span>分区表格式化的设备上，最大大小为2TiB。</li><li class="listitem">在使用<span class="strong"><strong>GUID分区表（GPT）</strong></span>格式化的设备上，最大大小为8ZiB。</li></ul></div><p>如果要创建大于2TiB的分区，则必须使用GPT格式化磁盘。</p><h4><a id="size_alignment_2"></a>尺寸对齐</h4><p><code class="literal">parted</code>实用程序使您可以使用多个不同的后缀指定分区大小：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MiB，GiB或TiB</span></dt><dd><p class="simpara">大小以2的幂表示。
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">分区的起点与size指定的确切扇区对齐。
									</li><li class="listitem">结束点与指定的大小减去1个扇区对齐。
									</li></ul></div></dd><dt><span class="term">MB，GB或TB</span></dt><dd><p class="simpara">大小以10的幂表示。
							</p><p class="simpara">起点和终点在指定单位的一半内对齐：例如，使用MB后缀时为±500KB。
							</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="con_partition-types_assembly_creating-a-partition"></a>分区类型</h2></div></div></div><p>本节介绍指定分区类型的不同属性。
				</p><h4><a id="partition_types_or_flags"></a>分区类型或标志</h4><p>分区类型或标志很少被正在运行的系统使用。但是，分区类型对于动态生成器很重要，例如<code class="literal">systemd-gpt-auto-generator</code> ，它使用分区类型来自动识别和安装设备。
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">parted</code>实用程序通过将分区类型映射到<span class="emphasis"><em>flags</em></span>来提供对分区类型的一些控制。parted实用程序只能处理某些分区类型：例如LVM，swap或RAID。</li><li class="listitem"><code class="literal">fdisk</code>实用程序通过指定十六进制代码来支持所有分区类型。
						</li></ul></div><h4><a id="partition_file_system_type"></a>分区文件系统类型</h4><p><code class="literal">parted</code>实用程序在创建分区时可选地接受文件系统类型参数。该值用于：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">在MBR上设置分区标志，或</li><li class="listitem">在GPT上设置分区UUID类型。例如， <code class="literal">swap</code> ， <code class="literal">fat</code>或<code class="literal">hfs</code>文件系统类型设置不同的GUID。默认值为Linux Data GUID。</li></ul></div><p>该参数不会以任何方式修改分区上的文件系统。它仅区分支持的标志或GUID。
				</p><p>支持以下文件系统类型：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal">xfs</code>
						</li><li class="listitem">
							<code class="literal">ext2</code>
						</li><li class="listitem">
							<code class="literal">ext3</code>
						</li><li class="listitem">
							<code class="literal">ext4</code>
						</li><li class="listitem">
							<code class="literal">fat16</code>
						</li><li class="listitem">
							<code class="literal">fat32</code>
						</li><li class="listitem">
							<code class="literal">hfs</code>
						</li><li class="listitem">
							<code class="literal">hfs+</code>
						</li><li class="listitem">
							<code class="literal">linux-swap</code>
						</li><li class="listitem">
							<code class="literal">ntfs</code>
						</li><li class="listitem">
							<code class="literal">reiserfs</code>
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="proc_creating-a-partition-with-parted_assembly_creating-a-partition"></a>使用parted创建分区</h2></div></div></div><p>此过程描述如何使用<code class="literal">parted</code>实用程序在块设备上创建新分区。
				</p><h4><a id="prerequisites_7"></a>先决条件</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">磁盘上有一个分区表。有关如何格式化磁盘的详细信息，请参阅<a class="xref" href="assembly_getting-started-with-partitions_managing-file-systems.html#assembly_creating-a-partition-table-on-a-disk_assembly_getting-started-with-partitions" title="在磁盘上创建分区表">“在磁盘上创建分区表”一节</a> 。
						</li><li class="listitem">如果要创建的分区大于2TiB，则必须使用GUID分区表（GPT）格式化磁盘。
						</li></ul></div><h4><a id="procedure_21"></a>程序</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">启动交互式<code class="literal">parted</code> shell：</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">将<span class="emphasis"><em><span class="replaceable">块设备</span></em></span>替换为要创建分区的设备的路径：例如， <code class="literal">/dev/sda</code> 。
								</li></ul></div></li><li class="listitem"><p class="simpara">查看当前分区表以确定是否有足够的可用空间：</p><pre class="screen">(parted) print</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">如果没有足够的可用空间，则可以调整现有分区的大小。有关更多信息，请参阅<a class="xref" href="assembly_getting-started-with-partitions_managing-file-systems.html#assembly_resizing-a-partition_assembly_getting-started-with-partitions" title="调整分区大小">“调整分区大小”一节</a> 。
								</li><li class="listitem"><p class="simpara">从分区表中确定：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">新分区的起点和终点</li><li class="listitem">在MBR上，它应该是什么分区类型。
										</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">创建新分区：</p><pre class="screen">(parted) mkpart <span class="emphasis"><em><span class="replaceable">part-type</span></em></span> <span class="emphasis"><em><span class="replaceable">name</span></em></span> <span class="emphasis"><em><span class="replaceable">fs-type</span></em></span> <span class="emphasis"><em><span class="replaceable">start</span></em></span> <span class="emphasis"><em><span class="replaceable">end</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">根据您从分区表中确定的内容，将<span class="emphasis"><em><span class="replaceable">part-type</span></em></span>替换为<code class="literal">primary</code> ， <code class="literal">logical</code>或<code class="literal">extended</code> 。这仅适用于MBR分区表。
								</li><li class="listitem">用任意分区的名称替换<span class="emphasis"><em><span class="replaceable">名称</span></em></span> 。这是GPT分区表所必需的。
								</li><li class="listitem">用<code class="literal">xfs</code> ， <code class="literal">ext2</code> ， <code class="literal">ext3</code> ， <code class="literal">ext4</code> ， <code class="literal">fat16</code> ， <code class="literal">fat32</code> ， <code class="literal">hfs</code> ， <code class="literal">hfs+</code> ， <code class="literal">linux-swap</code> ， <code class="literal">ntfs</code>或<code class="literal">reiserfs</code>任何一个替换<span class="emphasis"><em><span class="replaceable">fs-type</span></em></span> 。<span class="emphasis"><em><span class="replaceable">fs-type</span></em></span>参数是可选的。请注意， <code class="literal">parted</code>不会在分区上创建文件系统。
								</li><li class="listitem">使用确定分区起点和终点的大小替换<span class="emphasis"><em><span class="replaceable">开始</span></em></span>和<span class="emphasis"><em><span class="replaceable">结束</span></em></span> ，从磁盘的开头开始计算。您可以使用大小后缀，例如<code class="literal">512MiB</code> ， <code class="literal">20GiB</code>或<code class="literal">1.5TiB</code> 。默认大小为兆字节。
								</li></ul></div><div class="example"><a id="idm139870564515264"></a><p class="title"><strong>例7.3。创建一个小的主分区</strong></p><div class="example-contents"><p>例如，要在MBR表上创建从1024MiB到2048MiB的主分区，请使用：</p><pre class="screen">(parted) mkpart primary 1024MiB 2048MiB</pre></div></div><p class="simpara">一旦输入此命令，更改即开始发生，因此请在执行之前对其进行检查。
						</p></li><li class="listitem"><p class="simpara">查看分区表以确认创建的分区位于具有正确分区类型，文件系统类型和大小的分区表中：</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">退出<code class="literal">parted</code> shell：</p><pre class="screen">(parted) quit</pre></li><li class="listitem"><p class="simpara">使用以下命令等待系统注册新设备节点：</p><pre class="screen"># udevadm settle</pre></li><li class="listitem"><p class="simpara">验证内核是否识别新分区：</p><pre class="screen"># cat /proc/partitions</pre></li></ol></div><h4><a id="additional_resources_17"></a>其他资源</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">parted(8)</code>手册页。
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="proc_setting-a-partition-type-with-fdisk_assembly_creating-a-partition"></a>使用fdisk设置分区类型</h2></div></div></div><p>此过程描述如何使用<code class="literal">fdisk</code>实用程序设置分区类型或标志。
				</p><h4><a id="prerequisites_8"></a>先决条件</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">磁盘上有一个分区。
						</li></ul></div><h4><a id="procedure_22"></a>程序</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">启动交互式<code class="literal">fdisk</code> shell：</p><pre class="screen"># fdisk <span class="emphasis"><em><span class="replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">将<span class="emphasis"><em><span class="replaceable">块设备</span></em></span>替换为要设置分区类型的设备的路径：例如， <code class="literal">/dev/sda</code> 。
								</li></ul></div></li><li class="listitem"><p class="simpara">查看当前分区表以确定次要分区号：</p><pre class="screen">Command (m for help): <span class="strong"><strong><span class="command">print</span></strong></span></pre><p class="simpara">您可以在“ <code class="literal">Type</code>列中查看当前分区类型，并在“ <code class="literal">Id</code>列中查看其对应的类型ID。
						</p></li><li class="listitem"><p class="simpara">输入分区类型命令并使用其次要编号选择分区：</p><pre class="screen">Command (m for help): <span class="strong"><strong><span class="command">type</span></strong></span>
Partition number (<span class="emphasis"><em><span class="replaceable">1,2,3</span></em></span> default <span class="emphasis"><em><span class="replaceable">3</span></em></span>): <span class="emphasis"><em><span class="replaceable"><span class="strong"><strong>2</strong></span></span></em></span></pre></li><li class="listitem"><p class="simpara">（可选）列出可用的十六进制代码：</p><pre class="screen">Hex code (type L to list all codes): <span class="strong"><strong><span class="command">L</span></strong></span></pre></li><li class="listitem"><p class="simpara">设置分区类型：</p><pre class="screen">Hex code (type L to list all codes): <span class="emphasis"><em><span class="replaceable"><span class="strong"><strong>8e</strong></span></span></em></span></pre></li><li class="listitem"><p class="simpara">编写更改并退出<code class="literal">fdisk</code> shell：</p><pre class="screen">Command (m for help): <span class="strong"><strong><span class="command">write</span></strong></span>
The partition table has been altered.
Syncing disks.</pre></li><li class="listitem"><p class="simpara">验证您的更改：</p><pre class="screen"># fdisk --list <span class="emphasis"><em><span class="replaceable">block-device</span></em></span></pre></li></ol></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="assembly_removing-a-partition_assembly_getting-started-with-partitions"></a>删除分区</h1></div></div></div><p>作为系统管理员，您可以删除不再用于释放磁盘空间的磁盘分区。
			</p><div class="warning" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">警告</h3><p>删除分区会删除存储在分区上的所有数据。
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="con_considerations-before-modifying-partitions-on-a-disk_assembly_removing-a-partition"></a>修改磁盘上的分区之前的注意事项</h2></div></div></div><p>本节列出了在创建，删除或调整分区大小之前要考虑的要点。
				</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>本节不涉及DASD分区表，该表特定于IBM Z体系结构。有关DASD的信息，请参阅：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">在IBM Z上配置Linux实例</a>
							</li><li class="listitem"><a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">您应该</a>在IBM Knowledge Center上<a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">了解有关DASD的</a>文章</li></ul></div></div><h4><a id="the_maximum_number_of_partitions_3"></a>最大分区数</h4><p>设备上的分区数受分区表类型的限制：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">在使用<span class="strong"><strong>主引导记录（MBR）</strong></span>分区表格式化的设备上，您可以：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">最多四个主分区，或</li><li class="listitem">扩展中最多有三个主分区，一个扩展分区和多个逻辑分区。
								</li></ul></div></li><li class="listitem">在使用<span class="strong"><strong>GUID分区表（GPT）</strong></span>格式化的设备上，最大分区数为128。虽然GPT规范通过增加为分区表保留的区域来允许更多分区，但是<code class="literal">parted</code>实用程序使用的常见做法是将其限制为足够的区域以用于128个分区。
						</li></ul></div><h4><a id="the_maximum_size_of_a_partition_3"></a>分区的最大大小</h4><p>设备上分区的大小受分区表类型的限制：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">在使用<span class="strong"><strong>主引导记录（MBR）</strong></span>分区表格式化的设备上，最大大小为2TiB。</li><li class="listitem">在使用<span class="strong"><strong>GUID分区表（GPT）</strong></span>格式化的设备上，最大大小为8ZiB。</li></ul></div><p>如果要创建大于2TiB的分区，则必须使用GPT格式化磁盘。</p><h4><a id="size_alignment_3"></a>尺寸对齐</h4><p><code class="literal">parted</code>实用程序使您可以使用多个不同的后缀指定分区大小：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MiB，GiB或TiB</span></dt><dd><p class="simpara">大小以2的幂表示。
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">分区的起点与size指定的确切扇区对齐。
									</li><li class="listitem">结束点与指定的大小减去1个扇区对齐。
									</li></ul></div></dd><dt><span class="term">MB，GB或TB</span></dt><dd><p class="simpara">大小以10的幂表示。
							</p><p class="simpara">起点和终点在指定单位的一半内对齐：例如，使用MB后缀时为±500KB。
							</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="proc_removing-a-partition-with-parted_assembly_removing-a-partition"></a>删除分区的分区</h2></div></div></div><p>此过程描述如何使用<code class="literal">parted</code>实用程序删除磁盘分区。
				</p><h4><a id="procedure_23"></a>程序</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">启动交互式<code class="literal">parted</code> shell：</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">将<span class="emphasis"><em><span class="replaceable">块设备</span></em></span>替换为要删除分区的设备的路径：例如， <code class="literal">/dev/sda</code> 。
								</li></ul></div></li><li class="listitem"><p class="simpara">查看当前分区表以确定要删除的分区的次要编号：</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">删除分区：</p><pre class="screen">(parted) rm <span class="emphasis"><em><span class="replaceable">minor-number</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">将<span class="emphasis"><em><span class="replaceable">minor-number</span></em></span>替换为要删除的分区的次要编号：例如， <code class="literal">3</code> 。
								</li></ul></div><p class="simpara">一旦输入此命令，更改即开始发生，因此请在执行之前对其进行检查。
						</p></li><li class="listitem"><p class="simpara">确认已从分区表中删除分区：</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">退出<code class="literal">parted</code> shell：</p><pre class="screen">(parted) quit</pre></li><li class="listitem"><p class="simpara">验证内核是否知道删除了分区：</p><pre class="screen"># cat /proc/partitions</pre></li><li class="listitem">从<code class="literal">/etc/fstab</code>文件中删除该分区（如果存在）。找到声明已删除分区的行，并将其从文件中删除。
						</li><li class="listitem"><p class="simpara">重新生成装载单元，以便系统注册新的<code class="literal">/etc/fstab</code>配置：</p><pre class="screen"># systemctl daemon-reload</pre></li><li class="listitem"><p class="simpara">如果已删除交换分区或删除了LVM部分，请从<code class="literal">/etc/default/grub</code>文件中的内核命令行中删除对该分区的所有引用，并重新生成GRUB配置：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">在基于BIOS的系统上：</p><pre class="screen"># grub2-mkconfig --output=/etc/grub2.cfg</pre></li><li class="listitem"><p class="simpara">在基于UEFI的系统上：</p><pre class="screen"># grub2-mkconfig --output=/etc/grub2-efi.cfg</pre></li></ul></div></li><li class="listitem"><p class="simpara">要在早期引导系统中注册更改，请重新构建<code class="literal">initramfs</code>文件系统：</p><pre class="screen"># dracut --force --verbose</pre></li></ol></div><h4><a id="additional_resources_18"></a>其他资源</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">parted(8)</code>手册页</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="assembly_resizing-a-partition_assembly_getting-started-with-partitions"></a>调整分区大小</h1></div></div></div><p>作为系统管理员，您可以扩展分区以利用未使用的磁盘空间，或者缩小分区以将其容量用于不同目的。
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="con_considerations-before-modifying-partitions-on-a-disk_assembly_resizing-a-partition"></a>修改磁盘上的分区之前的注意事项</h2></div></div></div><p>本节列出了在创建，删除或调整分区大小之前要考虑的要点。
				</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>本节不涉及DASD分区表，该表特定于IBM Z体系结构。有关DASD的信息，请参阅：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_a_standard_rhel_installation/configuring-a-linux-instance-on-ibm-z_installing-rhel">在IBM Z上配置Linux实例</a>
							</li><li class="listitem"><a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">您应该</a>在IBM Knowledge Center上<a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lgdd/lgdd_c_dasd_know.html">了解有关DASD的</a>文章</li></ul></div></div><h4><a id="the_maximum_number_of_partitions_4"></a>最大分区数</h4><p>设备上的分区数受分区表类型的限制：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">在使用<span class="strong"><strong>主引导记录（MBR）</strong></span>分区表格式化的设备上，您可以：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">最多四个主分区，或</li><li class="listitem">扩展中最多有三个主分区，一个扩展分区和多个逻辑分区。
								</li></ul></div></li><li class="listitem">在使用<span class="strong"><strong>GUID分区表（GPT）</strong></span>格式化的设备上，最大分区数为128。虽然GPT规范通过增加为分区表保留的区域来允许更多分区，但是<code class="literal">parted</code>实用程序使用的常见做法是将其限制为足够的区域以用于128个分区。
						</li></ul></div><h4><a id="the_maximum_size_of_a_partition_4"></a>分区的最大大小</h4><p>设备上分区的大小受分区表类型的限制：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">在使用<span class="strong"><strong>主引导记录（MBR）</strong></span>分区表格式化的设备上，最大大小为2TiB。</li><li class="listitem">在使用<span class="strong"><strong>GUID分区表（GPT）</strong></span>格式化的设备上，最大大小为8ZiB。</li></ul></div><p>如果要创建大于2TiB的分区，则必须使用GPT格式化磁盘。</p><h4><a id="size_alignment_4"></a>尺寸对齐</h4><p><code class="literal">parted</code>实用程序使您可以使用多个不同的后缀指定分区大小：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MiB，GiB或TiB</span></dt><dd><p class="simpara">大小以2的幂表示。
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">分区的起点与size指定的确切扇区对齐。
									</li><li class="listitem">结束点与指定的大小减去1个扇区对齐。
									</li></ul></div></dd><dt><span class="term">MB，GB或TB</span></dt><dd><p class="simpara">大小以10的幂表示。
							</p><p class="simpara">起点和终点在指定单位的一半内对齐：例如，使用MB后缀时为±500KB。
							</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="proc_resizing-a-partition-with-parted_assembly_resizing-a-partition"></a>使用parted调整分区大小</h2></div></div></div><p>此过程使用<code class="literal">parted</code>实用程序调整磁盘分区的大小。
				</p><h4><a id="prerequisites_9"></a>先决条件</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">如果要缩小分区，请备份存储在其中的数据。
						</p><div class="warning" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">警告</h3><p>缩小分区可能会导致分区数据丢失。
							</p></div></li><li class="listitem">如果要将分区的大小调整为大于2TiB，则必须使用GUID分区表（GPT）格式化磁盘。有关如何格式化磁盘的详细信息，请参阅<a class="xref" href="assembly_getting-started-with-partitions_managing-file-systems.html#assembly_creating-a-partition-table-on-a-disk_assembly_getting-started-with-partitions" title="在磁盘上创建分区表">“在磁盘上创建分区表”一节</a> 。
						</li></ul></div><h4><a id="procedure_24"></a>程序</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem">如果要缩小分区，请首先缩小文件系统，使其不大于调整大小的分区。请注意，XFS不支持收缩。
						</li><li class="listitem"><p class="simpara">启动交互式<code class="literal">parted</code> shell：</p><pre class="screen"># parted <span class="emphasis"><em><span class="replaceable">block-device</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">将<span class="emphasis"><em><span class="replaceable">块设备</span></em></span>替换为要调整分区大小的设备的路径：例如， <code class="literal">/dev/sda</code> 。
								</li></ul></div></li><li class="listitem"><p class="simpara">查看当前分区表：</p><pre class="screen">(parted) print</pre><p class="simpara">从分区表中确定：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">分区的次要编号</li><li class="listitem">调整大小后现有分区的位置及其新的结束点</li></ul></div></li><li class="listitem"><p class="simpara">调整分区大小：</p><pre class="screen">(parted) resizepart <span class="emphasis"><em><span class="replaceable">minor-number</span></em></span> <span class="emphasis"><em><span class="replaceable">new-end</span></em></span></pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">将<span class="emphasis"><em><span class="replaceable">minor-number</span></em></span>替换为要调整大小的分区的次要编号：例如， <code class="literal">3</code> 。
								</li><li class="listitem">将<span class="emphasis"><em><span class="replaceable">new-end</span></em></span>替换<span class="emphasis"><em><span class="replaceable">为</span></em></span>确定已调整大小的分区的新结束点的大小，从磁盘的开头开始计算。您可以使用大小后缀，例如<code class="literal">512MiB</code> ， <code class="literal">20GiB</code>或<code class="literal">1.5TiB</code> 。默认大小为兆字节。
								</li></ul></div><div class="example"><a id="idm139870591151440"></a><p class="title"><strong>例7.4。扩展分区</strong></p><div class="example-contents"><p>例如，要将位于磁盘开头的分区扩展为2GiB，请使用：</p><pre class="screen">(parted) resizepart 1 2GiB</pre></div></div><p class="simpara">一旦输入此命令，更改即开始发生，因此请在执行之前对其进行检查。
						</p></li><li class="listitem"><p class="simpara">查看分区表以确认调整大小的分区位于具有正确大小的分区表中：</p><pre class="screen">(parted) print</pre></li><li class="listitem"><p class="simpara">退出<code class="literal">parted</code> shell：</p><pre class="screen">(parted) quit</pre></li><li class="listitem"><p class="simpara">验证内核是否识别新分区：</p><pre class="screen"># cat /proc/partitions</pre></li><li class="listitem">如果扩展了分区，也可以在其上扩展文件系统。有关详细信息，请参阅（参考）
						</li></ol></div><h4><a id="additional_resources_19"></a>其他资源</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">parted(8)</code>手册页。
						</li></ul></div></div></div></div></body></html>
<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. 桌面和图形</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. 桌面和图形</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="gnome-shell-is-the-default-desktop-environment_desktop-and-graphics"></a> GNOME Shell是默认的桌面环境</h1></div></div></div><p>RHEL 8随GNOME Shell一起分发，作为默认桌面环境。
			</p><p>与KDE Plasma Workspaces（KDE）相关的所有软件包都已删除，不再可以使用KDE替代默认的GNOME桌面环境。
			</p><p>Red Hat不支持从使用KDE的RHEL 7迁移到RHEL 8 GNOME。建议使用带有KDE的RHEL 7用户备份其数据并使用GNOME Shell安装RHEL 8。
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="notable-changes-in-gnome-shell_desktop-and-graphics"></a> GNOME Shell中的显着变化</h1></div></div></div><p>RHEL 8随GNOME Shell 3.28版一起发布。
			</p><p>这个部分：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">突出显示与GNOME Shell 3.28版相关的增强功能。
					</li><li class="listitem">通知GNOME Shell环境和显示协议的默认组合的更改。
					</li><li class="listitem">说明如何访问默认情况下不可用的功能。
					</li><li class="listitem">解释GNOME工具中用于软件管理的更改。
					</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="gnome-shell-in-rhel-8_notable-changes-in-gnome-shell"></a> GNOME Shell，RHEL 8中的3.28版</h2></div></div></div><p>GNOME Shell版本3.28在RHEL 8中可用。显着的增强功能包括：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">新的GNOME Boxes功能</li><li class="listitem">新的屏幕键盘</li><li class="listitem">扩展设备支持Thunderbolt 3接口的最显着集成</li><li class="listitem">GNOME软件，dconf编辑器和GNOME终端的改进</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="gnome-shell-environments_notable-changes-in-gnome-shell"></a> GNOME Shell环境</h2></div></div></div><p>GNOME 3提供了两个基本环境：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">GNOME标准</li><li class="listitem">GNOME经典</li></ul></div><p>两种环境都可以使用两种不同的协议来构建图形用户界面：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>X11</strong></span>协议，使用<span class="strong"><strong>X.Org</strong></span>作为显示服务器。
						</li><li class="listitem"><p class="simpara"><span class="strong"><strong>Wayland</strong></span>协议，使用<span class="strong"><strong>GNOME Shell</strong></span>作为<span class="strong"><strong>Wayland</strong></span>合成器和显示服务器。
						</p><p class="simpara">显示服务器的这种解决方案<span class="strong"><strong>在Wayland上</strong></span>进一步称为<span class="strong"><strong>GNOME Shell</strong></span> 。
						</p></li></ul></div><p>RHEL 8中的默认组合是GNOME标准环境，使用<span class="strong"><strong>Wayland上的GNOME Shell</strong></span>作为显示服务器。
				</p><p>但是，您可能希望切换到GNOME Shell环境和图形协议堆栈的另一种组合。有关更多信息，请参阅<a class="xref" href="desktop-and-graphics_considerations-in-adopting-RHEL-8.html#selecting-gnome-environment-modified_desktop-and-graphics" title="选择GNOME环境并显示协议">“选择GNOME环境和显示协议”一节</a> 。
				</p><p>有关使用两个GNOME Shell环境的基础知识的更多信息，请参阅<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#gnome-environments_starting-using-gnome">从桌面管理RHEL系统</a> 。
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="desktop-icons_notable-changes-in-gnome-shell"></a>桌面图标</h2></div></div></div><p>在RHEL 8中，Nautilus文件管理器不再提供桌面图标功能，而是由桌面图标gnome-shell扩展提供。
				</p><p>为了能够使用该扩展，您必须安装Appstream存储库中提供的<code class="literal">gnome-shell-extension-desktop-icons</code>包。
				</p><p>有关RHEL 8中桌面图标的更多信息，请参阅<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#desktop-icons_starting-using-gnome">从桌面管理RHEL系统</a> 。
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="fractional-scaling_notable-changes-in-gnome-shell"></a>分数缩放</h2></div></div></div><p>在<span class="strong"><strong>Wayland</strong></span>会话的<span class="strong"><strong>GNOME Shell上</strong></span> ，可以使用小数缩放功能。该功能可以按分数缩放GUI，从而改善某些显示器上缩放GUI的外观。
				</p><p>请注意，该功能目前被认为是实验性的，因此默认情况下处于禁用状态。
				</p><p>要启用小数缩放，请运行以下命令：</p><pre class="literallayout"># gsettings set org.gnome.mutter experimental-features "['scale-monitor-framebuffer']"</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="gnome-software-for-package-management_notable-changes-in-gnome-shell"></a>用于包管理的GNOME软件</h2></div></div></div><p>在RHEL 7上为图形环境中的包管理提供了一组工具的<code class="literal">gnome-packagekit</code>包不再可用。
				</p><p>在RHEL 8上， <span class="strong"><strong>GNOME软件</strong></span>实用程序提供了类似的功能，使您可以安装和更新应用程序和gnome-shell扩展。<span class="strong"><strong>GNOME软件</strong></span>分发在<code class="literal">gnome-software</code>软件包中。
				</p><p>有关使用<span class="strong"><strong>GNOME软件</strong></span>安装应用程序的更多信息，请参阅<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#installing-applications_starting-using-gnome">从桌面管理RHEL系统</a> 。
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="opening-graphical-applications-with-sudo_notable-changes-in-gnome-shell"></a>用sudo打开图形应用程序</h2></div></div></div><p>尝试使用<code class="literal">sudo</code>命令在终端中打开图形应用程序时，必须执行以下操作：</p><h4><a id="x11_applications"></a> X11应用程序</h4><p>如果应用程序使用<code class="literal">X11</code>显示协议，请在X服务器访问控制列表中添加本地用户<code class="literal">root</code> 。因此，允许<code class="literal">root</code>连接到<code class="literal">Xwayland</code> ，后者将<code class="literal">X11</code>协议转换为<code class="literal">Wayland</code>协议，反之亦然。
				</p><div class="example"><a id="idm139646225050848"></a><p class="title"><strong>例18.1。将<code class="literal">root</code>添加到X服务器访问控制列表以使用sudo打开xclock</strong></p><div class="example-contents"><p>$ xhost + si：localuser：root</p><p>$ sudo xclock</p></div></div><h4><a id="wayland_applications"></a> Wayland应用程序</h4><p>如果应用程序是<code class="literal">Wayland</code> native，请包含<code class="literal">-E</code>选项。
				</p><div class="example"><a id="idm139646225045168"></a><p class="title"><strong>例18.2。用sudo打开GNOME计算器</strong></p><div class="example-contents"><p>$ sudo -E gnome-calculator</p></div></div><p>否则，如果只键入<code class="literal">sudo</code>和应用程序的名称，则打开应用程序的操作将失败，并显示以下错误消息：</p><pre class="literallayout">No protocol specified
Unable to init server: could not connect: connection refused
# Failed to parse arguments: Cannot open display</pre></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="selecting-gnome-environment-modified_desktop-and-graphics"></a>选择GNOME环境并显示协议</h1></div></div></div><p>要在GNOME环境和图形协议堆栈的各种组合之间切换，请使用以下过程。
			</p><h3><a id="procedure"></a>程序</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">在登录屏幕（GDM）中，单击“ <span class="strong"><strong>登录”</strong></span>按钮旁边的齿轮。
					</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>您无法从锁定屏幕访问此选项。首次启动RHEL 8或退出当前会话时，将显示登录屏幕。
						</p></div><p class="simpara">
						<span class="inlinemediaobject"><img src="images/gnome-environments-new.png" alt="侏儒环境新"></span>

					</p></li><li class="listitem"><p class="simpara">从显示的下拉菜单中，选择您喜欢的选项。
					</p><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>请注意，在登录屏幕上显示的菜单中， <span class="strong"><strong>X.Org</strong></span>显示服务器被标记为<span class="strong"><strong>X11</strong></span>显示服务器。
						</p></div></li></ol></div><div class="important" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">重要</h3><p>上述过程导致的GNOME环境和图形协议堆栈的更改在用户注销之间以及关闭或重新启动计算机时都是持久的。
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="graphics-stack_desktop-and-graphics"></a>图形堆栈</h1></div></div></div><p>在RHEL 8中，您可以选择两种协议来构建图形用户界面：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">X11</li><li class="listitem">韦兰</li></ul></div><p><span class="strong"><strong>X11</strong></span>协议使用<span class="strong"><strong>X.Org</strong></span>作为显示服务器。基于此协议显示图形的方式与RHEL 7中的方式相同，这是唯一的选择。
			</p><p>RHEL 8上的<span class="strong"><strong>Wayland</strong></span>协议使用<span class="strong"><strong>GNOME Shell</strong></span>作为其合成器和显示服务器， <span class="strong"><strong>在Wayland上</strong></span>进一步称为<span class="strong"><strong>GNOME Shell</strong></span> 。
			</p><p>RHEL 8的新安装会自动选择<span class="strong"><strong>Wayland上的GNOME Shell</strong></span> ，因此默认使用<span class="strong"><strong>Wayland</strong></span>协议。但是，由于<a class="link" href="desktop-and-graphics_considerations-in-adopting-RHEL-8.html#current-wayland-limitations-modified_graphics-stack" title="目前Wayland的局限性">当前Wayland限制</a>或在<a class="link" href="desktop-and-graphics_considerations-in-adopting-RHEL-8.html#environments-where-x11-is-preferred-over-wayland_graphics-stack" title="X11优于Wayland的环境">环境中X11优于Wayland</a> ，您可能需要切换到<span class="strong"><strong>X.Org</strong></span> ，或者选择GNOME环境和显示服务器的所需组合，如<a class="link" href="desktop-and-graphics_considerations-in-adopting-RHEL-8.html#selecting-gnome-environment-modified_desktop-and-graphics" title="选择GNOME环境并显示协议">选择GNOME环境和显示协议中所述</a> 。
			</p><p>本节介绍：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Wayland</strong></span>和<span class="strong"><strong>X11</strong></span>之间的主要区别
					</li><li class="listitem">目前<span class="strong"><strong>Wayland的</strong></span>局限性</li><li class="listitem"><span class="strong"><strong>X11</strong></span>优于<span class="strong"><strong>Wayland的环境</strong></span>
					</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="key-differences-between-wayland-and-x11_graphics-stack"></a> Wayland和X11之间的主要区别</h2></div></div></div><h4><a id="x11_applications_2"></a> X11应用程序</h4><p>客户端应用程序需要移植到<span class="strong"><strong>Wayland</strong></span>协议或使用具有<span class="strong"><strong>Wayland</strong></span>后端的图形工具包（例如GTK）才能与基于<span class="strong"><strong>Wayland</strong></span>的合成器和显示服务器本地工作。
				</p><p>无法移植到<span class="strong"><strong>Wayland的</strong></span>旧版<span class="strong"><strong>X11</strong></span>应用程序会自动将<span class="strong"><strong>Xwayland</strong></span>用作<span class="strong"><strong>X11</strong></span>旧版客户端和<span class="strong"><strong>Wayland</strong></span>合成器之间的代理。<span class="strong"><strong>Xwayland</strong></span>既可以作为<span class="strong"><strong>X11</strong></span>服务器，也可以作为<span class="strong"><strong>Wayland</strong></span>客户端。<span class="strong"><strong>Xwayland</strong></span>的作用是将<span class="strong"><strong>X11</strong></span>协议转换为<span class="strong"><strong>Wayland</strong></span>协议，反之亦然，以便<span class="strong"><strong>X11</strong></span>遗留应用程序可以与基于<span class="strong"><strong>Wayland</strong></span>的显示服务器一起使用。
				</p><p>在<span class="strong"><strong>Wayland</strong></span>上的<span class="strong"><strong>GNOME Shell上</strong></span> ， <span class="strong"><strong>Xwayland</strong></span>在启动时自动启动，这确保大多数<span class="strong"><strong>X11</strong></span>遗留应用<span class="strong"><strong>程序在Wayland上</strong></span>使用<span class="strong"><strong>GNOME Shell</strong></span>时按预期工作。但是， <span class="strong"><strong>X11</strong></span>和<span class="strong"><strong>Wayland</strong></span>协议是不同的，因此一些依赖<span class="strong"><strong>X11</strong></span>特定功能的客户端在<span class="strong"><strong>Xwayland</strong></span>下的行为可能会有所不同。对于此类特定客户端，您可以切换到<span class="strong"><strong>X.Org</strong></span>显示服务器，如<a class="xref" href="desktop-and-graphics_considerations-in-adopting-RHEL-8.html#selecting-gnome-environment-modified_desktop-and-graphics" title="选择GNOME环境并显示协议">“选择GNOME环境和显示协议”一节中所述</a> 。
				</p><h4><a id="libinput"></a> libinput</h4><p>RHEL 8使用新的统一输入堆栈<code class="literal">libinput</code> ，它管理所有常见的设备类型，例如鼠标，触摸板，触摸屏，平板电脑，轨迹球和指点杆。这个统一的堆栈由<span class="strong"><strong>X.Org</strong></span>和<span class="strong"><strong>Wayland</strong></span>合成器<span class="strong"><strong>上</strong></span>的<span class="strong"><strong>GNOME Shell使用</strong></span> 。
				</p><p>
					<span class="strong"><strong>Wayland上的GNOME Shell</strong></span>直接为所有设备使用<code class="literal">libinput</code> ，并且没有可切换的驱动程序支持。在<code class="literal">X.Org</code> ， <code class="literal">libinput</code>实现为<code class="literal">X.Org libinput</code>驱动程序。有关<code class="literal">X.Org</code>下的驱动程序支持的信息，请参阅<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#libinput">从桌面管理RHEL系统</a> 。
				</p><h4><a id="gestures"></a>手势</h4><p>
					<span class="strong"><strong>Wayland上的GNOME Shell</strong></span>支持新的触摸板和触摸屏手势。这些手势包括：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">通过四个手指向上或向下拖动来切换工作区。
						</li><li class="listitem">将三根手指放在一起打开活动概览。
						</li></ul></div><h4><a id="additional_information"></a>附加信息</h4><p>有关<span class="strong"><strong>Wayland</strong></span>和<span class="strong"><strong>X11</strong></span>之间差异的更多信息，请参阅<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#wayland-differences-xorg_displaying-graphics">从桌面管理RHEL系统</a> 。
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="current-wayland-limitations-modified_graphics-stack"></a>目前Wayland的局限性</h2></div></div></div><p>使用<span class="strong"><strong>Wayland</strong></span>显示协议目前有多个显着的局限性：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">不支持专有的Nvidia二进制驱动程序。
						</li><li class="listitem">某些传统的VNC工具不可用。
						</li><li class="listitem">不支持X显示管理器控制协议（XDMCP）。
						</li></ul></div><p>其他限制包括：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">X.Org *屏幕操作实用程序不可用。
						</li><li class="listitem">不支持<code class="literal">xrandr</code>实用程序，因为<span class="strong"><strong>Wayland以不同方式</strong></span>处理布局，旋转和分辨率。
						</li><li class="listitem">无法使用<code class="literal">ALT+F2/r</code>方法重新启动GNOME Shell。
						</li><li class="listitem">由于稳定性问题，建议在虚拟环境中使用<span class="strong"><strong>X11</strong></span>而不是<span class="strong"><strong>Wayland</strong></span> 。
						</li><li class="listitem">
							<span class="strong"><strong>Wayland</strong></span>不支持<code class="literal">libinput</code>驱动程序无法处理的自定义或小众设备。
						</li></ul></div><p>有关当前<span class="strong"><strong>Wayland</strong></span>限制的更多信息，请参阅<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#wayland-limitations_displaying-graphics">从桌面管理RHEL系统</a> 。
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="environments-where-x11-is-preferred-over-wayland_graphics-stack"></a> X11优于Wayland的环境</h2></div></div></div><p>在某些环境中， <span class="strong"><strong>X11</strong></span>优于<span class="strong"><strong>Wayland</strong></span> ：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">在VM环境中使用的Cirrus图形</li><li class="listitem">Matrox图形</li><li class="listitem">Aspeed图形</li><li class="listitem">VM环境中使用的QXL图形</li><li class="listitem">与专有驱动程序一起使用时的Nvidia图形</li></ul></div><div class="important" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">重要</h3><p>Nvidia图形默认使用<code class="literal">Nouveau</code> ，这是一个开源驱动程序。<code class="literal">Nouveau</code> <span class="strong"><strong>在Wayland</strong></span>上的<span class="strong"><strong>GNOME Shell上</strong></span>受到支持，因此您可以将Nvidia图形与<code class="literal">Nouveau</code>一起使用，没有任何限制。但是， <span class="strong"><strong>在Wayland</strong></span>上的<span class="strong"><strong>GNOME Shell上</strong></span>不支持使用带有专有Nvidia二进制驱动程序的Nvidia图形。在这种情况下，请按照<a class="xref" href="desktop-and-graphics_considerations-in-adopting-RHEL-8.html#selecting-gnome-environment-modified_desktop-and-graphics" title="Selecting GNOME environment and display protocol">“选择GNOME环境和显示协议”一节</a>中<a class="xref" href="desktop-and-graphics_considerations-in-adopting-RHEL-8.html#selecting-gnome-environment-modified_desktop-and-graphics" title="选择GNOME环境并显示协议">的说明</a>切换到<span class="strong"><strong>X.Org</strong></span> 。
					</p></div><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>您可以在<code class="literal">/usr/lib/udev/rules.d/61-gdm.rules</code>文件中找到<span class="strong"><strong>Wayland</strong></span>不可用的当前环境列表。
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="related-information-graphics-stack"></a>附加信息</h2></div></div></div><p>有关在RHEL 8中显示图形的更多信息，请参阅<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#displaying-graphics_starting-using-gnome">从桌面管理RHEL系统</a> 。
				</p></div></div></div></body></html>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 3. Introduction to the IdM command-line utilities</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="introduction-to-the-ipa-command-line-utilities"/>Chapter 3. Introduction to the IdM command-line utilities</h1></div></div></div><p>
			The following sections describe the basics of using the Identity Management (IdM) command-line utilities.
		</p><h2><a id="prerequisites_2"/>Prerequisites</h2><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
					Installed and accessible IdM server.
				</p><p class="simpara">
					For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/installing_identity_management">Installing Identity Management</a>.
				</p></li><li class="listitem"><p class="simpara">
					To use the IPA command line interface, authenticate to IdM with a valid Kerberos ticket.
				</p><p class="simpara">
					For details about obtaining a valid Kerberos ticket, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_and_managing_identity_management/index#logging-in-to-ipa-from-the-command-line_getting-started-using-identity-management">Logging in to Identity Management from the command line</a>.
				</p></li></ul></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="what-is-the-ipa-command-line-interface_introduction-to-the-ipa-command-line-utilities"/>What is the IPA command line interface</h1></div></div></div><p>
				The IPA command line interface (CLI) is the basic command-line interface for Identity Management (IdM) administration.
			</p><p>
				It supports a lot of subcommands that are used to manage IdM, such as the <code class="literal">ipa user-add</code> command to add a new user.
			</p><p>
				IPA CLI allows you to:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Add, manage, or remove users, groups, hosts and other objects in the network.
					</li><li class="listitem">
						Manage certificates.
					</li><li class="listitem">
						Search entries.
					</li><li class="listitem">
						Display and list objects.
					</li><li class="listitem">
						Set access rights.
					</li><li class="listitem">
						Get help with the correct command syntax.
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="what-is-the-ipa-help_introduction-to-the-ipa-command-line-utilities"/>What is the IPA help</h1></div></div></div><p>
				The IPA help is a built-in documentation system for the IdM server.
			</p><p>
				IPA command line interface (CLI) generates available help topics from loaded IdM plugin modules. If you want to run the IPA help successfully, you need to:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Have an IdM server installed and running.
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Be authenticated with a valid Kerberos ticket.
					</li></ul></div><p>
				Executing the <code class="literal">ipa help</code> command without options displays information about basic help usage and the most common command examples.
			</p><p>
				Executing help with options has the following syntax:
			</p><pre class="literallayout"><span class="strong"><strong>$ ipa help [TOPIC | COMMAND | topics | commands]</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<code class="literal"><span class="strong"><strong>[]</strong></span></code> — Brackets mean that all parameters are optional and you can write just <code class="literal">ipa help</code> and the command will be executed.
					</li><li class="listitem">
						<code class="literal"><span class="strong"><strong>|</strong></span></code> — The pipe character means <span class="strong"><strong>or</strong></span>. Therefore, you can use TOPIC or COMMAND or topics or commands with the basic <code class="literal">ipa help</code> command.
					</li><li class="listitem">
						<code class="literal"><span class="strong"><strong>topics</strong></span></code> — You can run the command <code class="literal">ipa help topics</code> and it will execute correctly. The command displays a list of topics that are covered by IPA help, for example, <code class="literal">user</code>, <code class="literal">cert</code>, <code class="literal">server</code> and many others.
					</li><li class="listitem">
						<code class="literal"><span class="strong"><strong>TOPIC</strong></span></code> — The <span class="strong"><strong>TOPIC</strong></span> with capital letters means variable, therefore, you can use the particular topic, for example, <code class="literal">ipa help user</code>
					</li><li class="listitem">
						<code class="literal"><span class="strong"><strong>commands</strong></span></code> — You can run the command <code class="literal">ipa help commands</code> and it will execute correctly. The command displays a list of commands which are covered by the IPA help, for example, <code class="literal">user-add</code>, <code class="literal">ca-enable</code>, <code class="literal">server-show</code> and many others.
					</li><li class="listitem">
						<code class="literal"><span class="strong"><strong>COMMAND</strong></span></code> — The <span class="strong"><strong>COMMAND</strong></span> with capital letters means variable, therefore, you can use the particular command, for example, <code class="literal">ipa help user-add</code>
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="using-ipa-help-topics_introduction-to-the-ipa-command-line-utilities"/>Using IPA help topics</h1></div></div></div><p>
				The following procedure helps you to understand using the IPA help in the command line interface.
			</p><h3><a id="procedure_4"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						Open terminal and connect to the IdM server.
					</li><li class="listitem"><p class="simpara">
						Enter <code class="literal">ipa help topics</code> to display a list of topics covered by help.
					</p><pre class="literallayout">$ <span class="strong"><strong>ipa help topics</strong></span></pre></li><li class="listitem"><p class="simpara">
						Select one of the topics and create a command according to the following pattern: <code class="literal">ipa help [topic_name]</code>, instead of the <code class="literal">topic_name</code> string, add one of the topics you listed in the previous step.
					</p><p class="simpara">
						In the example, we use the following topic: <code class="literal">user</code>
					</p><pre class="literallayout">$ <span class="strong"><strong>ipa help user</strong></span></pre></li><li class="listitem"><p class="simpara">
						If the IPA help command is too long and you cannot see the whole text, use the following syntax:
					</p><pre class="literallayout">$ <span class="strong"><strong>ipa help user | less</strong></span></pre><p class="simpara">
						You can then scroll down and read the whole help.
					</p></li></ol></div><p>
				The IPA CLI displays a help page for the <code class="literal">user</code> topic. After reading the overview, you can see many examples with patterns for working with topic commands.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="using-ipa-help-commands_introduction-to-the-ipa-command-line-utilities"/>Using IPA help commands</h1></div></div></div><p>
				The following procedure helps you to understand creating the IPA help commands in the command line interface.
			</p><h3><a id="procedure_5"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						Open terminal and connect to the IdM server.
					</li><li class="listitem"><p class="simpara">
						Enter <code class="literal">ipa help commands</code> to display a list of commands covered by help.
					</p><pre class="literallayout">$ <span class="strong"><strong>ipa help commands</strong></span></pre></li><li class="listitem"><p class="simpara">
						Select one of the commands and create a help command according to the following pattern: <code class="literal">ipa help &lt;COMMAND&gt;</code>, instead of the <code class="literal">&lt;COMMAND&gt;</code> string, add one of the commands you listed in the previous step.
					</p><pre class="literallayout">$ <span class="strong"><strong>ipa help user-add</strong></span></pre></li></ol></div><h3><a id="additional_resources_2"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						For details, see <code class="literal">man ipa</code> page.
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="the-structure-of-ipa-commands_introduction-to-the-ipa-command-line-utilities"/>Structure of IPA commands</h1></div></div></div><p>
				The IPA CLI distinguishes the following types of commands:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Built-in commands — Built-in commands are all available in the IdM server.
					</li><li class="listitem">
						Plug-in provided commands
					</li></ul></div><p>
				Structure of IPA commands allows you to manage various types of objects. For example:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Users,
					</li><li class="listitem">
						Hosts,
					</li><li class="listitem">
						DNS records,
					</li><li class="listitem">
						Certificates,
					</li></ul></div><p>
				and many others.
			</p><p>
				For most of these objects, the IPA CLI includes commands to:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Add (<code class="literal">add</code>)
					</li><li class="listitem">
						Modify (<code class="literal">mod</code>)
					</li><li class="listitem">
						Delete (<code class="literal">del</code>)
					</li><li class="listitem">
						Search (<code class="literal">find</code>)
					</li><li class="listitem">
						Display (<code class="literal">show</code>)
					</li></ul></div><p>
				Commands have the following structure:
			</p><p>
				<code class="literal">ipa user-add</code>, <code class="literal">ipa user-mod</code>, <code class="literal">ipa user-del</code>, <code class="literal">ipa user-find</code>, <code class="literal">ipa user-show</code>
			</p><p>
				<code class="literal">ipa host-add</code>, <code class="literal">ipa host-mod</code>, <code class="literal">ipa host-del</code>, <code class="literal">ipa host-find</code>, <code class="literal">ipa host-show</code>
			</p><p>
				<code class="literal">ipa dnsrecord-add</code>, <code class="literal">ipa dnsrecord-mod</code>, <code class="literal">ipa dnsrecord-del</code>, <code class="literal">ipa dnsrecord-find</code>, <code class="literal">ipa dnrecord-show</code>
			</p><p>
				You can create a user with the <code class="literal">ipa user-add [options]</code>, where <code class="literal">[options]</code> are optional. If you use just the <code class="literal">ipa user-add</code> command, the script asks you for details one by one.
			</p><p>
				To change an existing object, you need to define the object, therefore the command includes also object: <code class="literal">ipa user-mod USER_NAME [options]</code>.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="using-an-ipa-command-to-add-a-user-account-to-idm_introduction-to-the-ipa-command-line-utilities"/>Using an IPA command to add a user account to IdM</h1></div></div></div><p>
				The following describes adding a new user to the Identity Management database using command line.
			</p><h3><a id="prerequisites_3"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						You need to have administrator privileges to add user accounts to the IdM server.
					</li></ul></div><h3><a id="procedure_6"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						Open terminal and connect to the IdM server.
					</li><li class="listitem"><p class="simpara">
						Enter the command for adding a new user:
					</p><pre class="literallayout">$ <span class="strong"><strong>ipa user-add</strong></span></pre><p class="simpara">
						The command runs a script where you can add basic data necessary for creating a user account.
					</p></li><li class="listitem">
						In the <span class="strong"><strong>First name:</strong></span> field, enter the first name of the new user and press the <span class="strong"><strong>Enter</strong></span> key.
					</li><li class="listitem">
						In the <span class="strong"><strong>Last name:</strong></span> field, enter the last name of the new user and press the <span class="strong"><strong>Enter</strong></span> key.
					</li><li class="listitem"><p class="simpara">
						In the <span class="strong"><strong>User login [suggested user name]:</strong></span> enter the user name or just press the <span class="strong"><strong>Enter</strong></span> key if the suggested user name works for you.
					</p><p class="simpara">
						User name must be unique for the whole IdM database. If an error occurs, that the user already exists, you need to start from the beginning with the <code class="literal">ipa user-add</code> command and try a different user name.
					</p></li></ol></div><p>
				After you successfully added the user name, the user account has been added to the IdM database and the IPA CLI prints on the output the following log:
			</p><pre class="literallayout">----------------------
Added user "euser"
----------------------
User login: euser
First name: Example
Last name: User
Full name: Example User
Display name: Example User
Initials: EU
Home directory: /home/euser
GECOS: Example User
Login shell: /bin/sh
Principal name: euser@IDM.EXAMPLE.COM
Principal alias: euser@IDM.EXAMPLE.COM
Email address: euser@idm.example.com
UID: 427200006
GID: 427200006
<span class="strong"><strong>Password: False</strong></span>
Member of groups: ipausers
<span class="strong"><strong>Kerberos keys available: False</strong></span></pre><p>
				As you can see, a user password is not set to the user account. If you want to add also password, use the <code class="literal">ipa user-add</code> command in the following syntax:
			</p><pre class="literallayout">$ <span class="strong"><strong>ipa user-add --first=Example --last=User --password</strong></span></pre><p>
				The IPA CLI then asks you for adding or confirming a user name and password.
			</p><p>
				If the user has been already created, you can add only the password with the `ipa user-mod`command.
			</p><h3><a id="additional_resources_3"/>Additional resources</h3><p>
				For more information about parameters, enter the following help command to the command line:
			</p><pre class="literallayout">$ <span class="strong"><strong>ipa help user-add</strong></span></pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="using-an-ipa-command-to-modify-a-user-account-in-idm_introduction-to-the-ipa-command-line-utilities"/>Using an IPA command to modify a user account in IdM</h1></div></div></div><p>
				You can change many parameters for each user account. For example, you can add a new password to the user.
			</p><p>
				Basic command syntax is different from the <code class="literal">user-add</code> syntax because you need to define the existing user account for which you want to perform changes, for example, add a password.
			</p><h3><a id="prerequisites_4"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						You need to have administrator privileges to modify user accounts in the IdM server.
					</li></ul></div><h3><a id="procedure_7"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						Open terminal and connect to the IdM server.
					</li><li class="listitem"><p class="simpara">
						Enter the command for adding a password:
					</p><pre class="literallayout">$ <span class="strong"><strong>ipa user-mod euser --password</strong></span></pre><p class="simpara">
						The command runs a script where you can add the new password.
					</p></li><li class="listitem">
						Enter the new password and press the <span class="strong"><strong>Enter</strong></span> key.
					</li></ol></div><p>
				After you successfully added the user name, the user account has been added to the IdM database and the IPA CLI prints on the output the following log:
			</p><pre class="literallayout">----------------------
Modified user "euser"
----------------------
User login: euser
First name: Example
Last name: User
Home directory: /home/euser
Principal name: euser@IDM.EXAMPLE.COM
Principal alias: euser@IDM.EXAMPLE.COM
Email address: euser@idm.example.com
UID: 427200006
GID: 427200006
<span class="strong"><strong>Password: True</strong></span>
Member of groups: ipausers
<span class="strong"><strong>Kerberos keys available: True</strong></span></pre><p>
				The user password is now set for the account and the user can log into IdM.
			</p><h3><a id="additional_resources_4"/>Additional resources</h3><p>
				For more information about parameters, enter the following help command to the command line:
			</p><pre class="literallayout">$ <span class="strong"><strong>ipa help user-mod</strong></span></pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="how-to-supply-a-list-of-values-to-the-ipa-utilities_introduction-to-the-ipa-command-line-utilities"/>How to supply a list of values to the IdM utilities</h1></div></div></div><p>
				Identity Management (IdM) stores values for multi-valued attributes in lists.
			</p><p>
				IdM supports the following methods of supplying multi-valued lists:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
						Using the same command-line argument multiple times within the same command invocation:
					</p><pre class="literallayout">$ <span class="strong"><strong>ipa permission-add <span class="emphasis"><em>--right=read --permissions=write --permissions=delete ...</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Alternatively, you can enclose the list in curly braces, in which case the shell performs the expansion:
					</p><pre class="literallayout">$ <span class="strong"><strong>ipa permission-add <span class="emphasis"><em>--right={read,write,delete} ...</em></span></strong></span></pre></li></ul></div><p>
				Examples above show a command <code class="literal"><span class="strong"><strong>permission-add</strong></span></code> which adds permissions to an object. The object is not mentioned in the example. Instead of <code class="literal"><span class="strong"><strong>…​</strong></span></code> you need to add the object for which you want to add permissions.
			</p><p>
				When you update such multi-valued attributes from the command line, IdM completely overwrites the previous list of values with a new list. Therefore, when updating a multi-valued attribute, you must specify the whole new list, not just a single value you want to add.
			</p><p>
				In the command above, the list of permissions includes reading, writing and deleting. When you decide to update the list with the <code class="literal"><span class="strong"><strong>permission-mod</strong></span></code> command, you must add all values, otherwise those not mentioned will be deleted.
			</p><p>
				<span class="strong"><strong>Example 1:</strong></span> — The <code class="literal"><span class="strong"><strong>ipa permission-mod</strong></span></code> command updates all previously added permissions.
			</p><pre class="literallayout">$ <span class="strong"><strong>ipa permission-mod <span class="emphasis"><em>--right=read --right=write --right=delete ...</em></span></strong></span></pre><p>
				or
			</p><pre class="literallayout">$ <span class="strong"><strong>ipa permission-mod <span class="emphasis"><em>--right={read,write,delete} ...</em></span></strong></span></pre><p>
				<span class="strong"><strong>Example 2</strong></span> — The <code class="literal"><span class="strong"><strong>ipa permission-mod</strong></span></code> command deletes the <code class="literal"><span class="strong"><strong>--right=delete</strong></span></code> argument because it is not included in the command:
			</p><pre class="literallayout">$ <span class="strong"><strong>ipa permission-mod <span class="emphasis"><em>--right=read --right=write ...</em></span></strong></span></pre><p>
				or
			</p><pre class="literallayout">$ <span class="strong"><strong>ipa permission-mod <span class="emphasis"><em>--right={read,write} ...</em></span></strong></span></pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="how-to-use-special-characters-with-the-ipa-utilities_introduction-to-the-ipa-command-line-utilities"/>How to use special characters with the IdM utilities</h1></div></div></div><p>
				When passing command-line arguments that include special characters to the <code class="literal">ipa</code> commands, escape these characters with a backslash (\). For example, common special characters include angle brackets (&lt; and &gt;), ampersand (&amp;), asterisk (*), or vertical bar (|).
			</p><p>
				For example, to escape an asterisk (*):
			</p><pre class="literallayout">$ <span class="strong"><strong>ipa certprofile-show certificate_profile --out=<span class="emphasis"><em>exported\*profile.cfg</em></span></strong></span></pre><p>
				Commands containing unescaped special characters do not work as expected because the shell cannot properly parse such characters.
			</p></div></div></body></html>
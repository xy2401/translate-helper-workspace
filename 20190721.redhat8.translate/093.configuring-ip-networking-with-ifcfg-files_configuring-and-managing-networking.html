<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. 使用ifcfg文件配置ip网络</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. 使用ifcfg文件配置ip网络</h1></div></div></div><p>本节介绍如何通过编辑<code class="literal">ifcfg</code>文件手动配置网络接口。
		</p><p>接口配置（ifcfg）文件控制各个网络设备的软件接口。在系统引导时，它使用这些文件来确定要显示的接口以及如何配置它们。这些文件通常命名为<code class="literal">ifcfg-<span class="emphasis"><em>name</em></span></code> ，其中后缀<span class="emphasis"><em>名称</em></span>是指配置文件控制的设备的名称。按照惯例， <code class="literal">ifcfg</code>文件的后缀与配置文件本身中<code class="literal">DEVICE</code>指令给出的字符串相同。
		</p><p>注意，在RHEL 8中， <code class="literal">ifcfg</code>文件要求<span class="strong"><strong><span class="application">NetworkManager</span></strong></span>运行以使用当前解决方案的功能。
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring-an-interface-with-static-network-settings-using-ifcfg-files_configuring-ip-networking-with-ifcfg-files"></a>使用ifcfg文件配置具有静态网络设置的接口</h1></div></div></div><p>此过程描述如何使用<code class="literal">ifcfg</code>文件配置网络接口。
			</p><h3><a id="prerequisites_39"></a>先决条件</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<span class="strong"><strong><span class="application">NetworkManager</span></strong></span>正在运行。
					</li></ul></div><h3><a id="procedure_38"></a>程序</h3><p>要使用<code class="literal">ifcfg</code>文件配置具有静态网络设置的接口，对于名为<code class="literal">eth0</code>的接口，请在<code class="literal">ifcfg-eth0</code>目录中创建名为<code class="literal">/etc/sysconfig/network-scripts/</code>的文件，该文件包含：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">对于<code class="literal">IPv4</code>配置：</p><pre class="literallayout">DEVICE=eth0
BOOTPROTO=none
ONBOOT=yes
PREFIX=24
IPADDR=10.0.1.27
GATEWAY=10.0.1.1</pre></li><li class="listitem"><p class="simpara">对于<code class="literal">IPv6</code>配置：</p><pre class="literallayout">DEVICE=eth0
BOOTPROTO=none
ONBOOT=yes
IPV6INIT=yes
IPV6ADDR=2001:db8::2/48</pre><p class="simpara">有关更多<code class="literal">IPv6</code> ifcfg配置选项，请参见<span class="emphasis"><em><span class="citetitle"><span class="strong"><strong>nm-settings-ifcfg-rh</strong></span> （5）</span></em></span>手册页。
					</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring-an-interface-with-dynamic-network-settings-using-ifcfg-files_configuring-ip-networking-with-ifcfg-files"></a>使用ifcfg文件配置具有动态网络设置的接口</h1></div></div></div><p>此过程描述如何使用<code class="literal">ifcfg</code>文件配置具有动态网络设置的网络接口。
			</p><h3><a id="prerequisites_40"></a>先决条件</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<span class="strong"><strong><span class="application">NetworkManager</span></strong></span>正在运行。
					</li></ul></div><h3><a id="procedure_39"></a>程序</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">要使用<code class="literal">ifcfg</code>文件使用动态网络设置配置名为<span class="emphasis"><em>em1</em></span>的接口，请在<code class="literal">ifcfg-em1</code>目录中创建名为<code class="literal">/etc/sysconfig/network-scripts/</code>文件，该文件包含：</p><pre class="literallayout">DEVICE=em1
BOOTPROTO=dhcp
ONBOOT=yes</pre></li><li class="listitem"><p class="simpara">要配置接口以向<code class="literal">DHCP</code>服务器发送不同的主机名，请将以下行添加到<code class="literal">ifcfg</code>文件中：</p><pre class="literallayout">DHCP_HOSTNAME=<span class="emphasis"><em>hostname</em></span></pre></li><li class="listitem"><p class="simpara">要配置接口以向<code class="literal">DHCP</code>服务器发送不同的完全限定域名（FQDN），请将以下行添加到<code class="literal">ifcfg</code>文件：</p><pre class="literallayout">DHCP_FQDN=<span class="emphasis"><em>fully.qualified.domain.name</em></span></pre><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>在给定的<code class="literal">DHCP_HOSTNAME</code>文件中，只应使用一个指令<code class="literal">DHCP_FQDN</code>或<code class="literal">ifcfg</code> 。如果指定了<code class="literal">DHCP_HOSTNAME</code>和<code class="literal">DHCP_FQDN</code> ，则仅使用后者。
						</p></div></li><li class="listitem"><p class="simpara">要配置接口以使用特定<code class="literal">DNS</code>服务器，请将以下行添加到<code class="literal">ifcfg</code>文件：</p><pre class="literallayout">  PEERDNS=no
  DNS1=<span class="emphasis"><em>ip-address</em></span>
  DNS2=<span class="emphasis"><em>ip-address</em></span></pre><p class="simpara">其中<span class="emphasis"><em>ip-address</em></span>是<code class="literal">DNS</code>服务器的地址。这将导致网络服务使用指定的指定<code class="literal">/etc/resolv.conf</code>服务器更新<code class="literal">DNS</code> 。只需要一个<code class="literal">DNS</code>服务器地址，另一个是可选的。
					</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="managing-system-wide-and-private-connection-profiles-with-ifcfg-files_configuring-ip-networking-with-ifcfg-files"></a>使用ifcfg文件管理系统范围和专用连接配置文件</h1></div></div></div><p>此过程描述如何配置<code class="literal">ifcfg</code>文件以管理系统范围和专用连接配置文件。
			</p><h3><a id="prerequisites_41"></a>先决条件</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<span class="strong"><strong><span class="application">NetworkManager</span></strong></span>正在运行。
					</li></ul></div><h3><a id="procedure_40"></a>程序</h3><p>权限对应于<code class="literal">USERS</code>文件中的<code class="literal">ifcfg</code>指令。如果<code class="literal">USERS</code>指令不存在，则所有用户都可以使用网络配置文件。
			</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">例如，使用以下行修改<code class="literal">ifcfg</code>文件，这将使连接仅对列出的用户可用：</p><pre class="literallayout">USERS="joe bob alice"</pre></li></ol></div></div></div></body></html>
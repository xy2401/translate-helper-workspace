<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Appendix A. Kickstart script file format reference</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a id="kickstart-script-file-format-reference_installing-rhel-as-an-experienced-user"/>Appendix A. Kickstart script file format reference</h1></div></div></div><p>
				This reference describes in detail the kickstart file format.
			</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="kickstart-file-format_kickstart-script-file-format-reference"/>Kickstart file format</h1></div></div></div><p>
					Kickstart scripts are plain text files that contain keywords recognized by the installation program, which serve as directions for the installation. Any text editor able to save files as ASCII text, such as <code class="literal">Gedit</code> or <code class="literal">vim</code> on Linux systems or <code class="literal">Notepad</code> on Windows systems, can be used to create and edit Kickstart files. The file name of your Kickstart configuration does not matter; however, it is recommended to use a simple name as you will need to specify this name later in other configuration files or dialogs.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Commands</span></dt><dd>
								Commands are keywords that serve as directions for installation. Each command must be on a single line. Commands can take options. Specifying commands and options is similar to using Linux commands in shell.
							</dd><dt><span class="term">Sections</span></dt><dd>
								Certain special commands that begin with the percent <code class="literal">%</code> character start a section. Interpretation of commands in sections is different from commands placed outside sections. Every section must be finished with <code class="literal">%end</code> command.
							</dd><dt><span class="term">Section types</span></dt><dd><p class="simpara">
								The available sections are:
							</p><div class="informalexample"><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										<span class="strong"><strong>Add-on sections</strong></span>. These sections use the <code class="literal">%addon <span class="emphasis"><em>addon_name</em></span></code> command.
									</li><li class="listitem">
										<span class="strong"><strong>Package selection sections</strong></span>. Starts with <code class="literal">%packages</code>. Use it to list packages for installation, including indirect means such as package groups or modules.
									</li><li class="listitem">
										<span class="strong"><strong>Script sections</strong></span>. These start with <code class="literal">%pre</code>, <code class="literal">%pre-install</code>, <code class="literal">%post</code>, and <code class="literal">%onerror</code>. These sections are not required.
									</li></ul></div></div></dd><dt><span class="term">Command section</span></dt><dd>
								The command section is a term used for the commands in the Kickstart file that are not part of any script section or `%packages ` section.
							</dd><dt><span class="term">Script section count and ordering</span></dt><dd>
								All sections except the command section are optional and can be present multiple times. When a particular type of script section is to be ecvaluated, all sections of that type present in the Kickstart are evaluated in order of appearance: two <code class="literal">%post</code> sections are evaluated one after another, in the order as they appear. However, you do not have to specify the various types of script sections in any order: it does not matter if there are <code class="literal">%post</code> sections before <code class="literal">%pre</code> sections.
							</dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Comments</span></dt><dd>
								Kickstart comments are lines starting with the hash <code class="literal">#</code> character. These lines are ignored by the installation program.
							</dd></dl></div><p>
					Items that are not required can be omitted. Omitting any required item results in the installation program changing to the interactive mode so that the the user can provide an answer to the related item, just as during a regular interactive installation. It is also possible to declare the kickstart script as non-interactive with the <code class="literal">cmdline</code> command. In non-interactive mode, any missing answer aborts the installation process.
				</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="package-selection-in-kickstart_kickstart-script-file-format-reference"/>Package selection in Kickstart</h1></div></div></div><p>
					Kickstart uses sections started by the <code class="literal">%packages</code> command for selecting packages to install. You can install packages, groups, environments, module streams, and module profiles this way.
				</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="package-selection-section_package-selection-in-kickstart"/>Package selection section</h2></div></div></div><p>
						Use the <code class="literal">%packages</code> command to begin a Kickstart section which describes the software packages to be installed. The <code class="literal">%packages</code> section must end with the <code class="literal">%end</code> command.
					</p><p>
						You can specify packages by environment, group, module stream, module profile, or by their package names. Several environments and groups that contain related packages are defined. See the <code class="literal"><span class="emphasis"><em>repository</em></span>/repodata/*-comps-<span class="emphasis"><em>repository</em></span>.<span class="emphasis"><em>architecture</em></span>.xml</code> file on the Red Hat Enterprise Linux 8 Installation DVD for a list of environments and groups.
					</p><p>
						The <code class="literal">*-comps-<span class="emphasis"><em>repository</em></span>.<span class="emphasis"><em>architecture</em></span>.xml</code> file contains a structure describing available environments (marked by the <code class="literal">&lt;environment&gt;</code> tag) and groups (the <code class="literal">&lt;group&gt;</code> tag). Each entry has an ID, user visibility value, name, description, and package list. If the group is selected for installation, the packages marked <code class="literal">mandatory</code> in the package list are always installed, the packages marked <code class="literal">default</code> are installed if they are not specifically excluded elsewhere, and the packages marked <code class="literal">optional</code> must be specifically included elsewhere even when the group is selected.
					</p><p>
						You can specify a package group or environment using either its ID (the <code class="literal">&lt;id&gt;</code> tag) or name (the <code class="literal">&lt;name&gt;</code> tag).
					</p><p>
						If you are not sure what package should be installed, Red Hat recommends you to select the <span class="strong"><strong><span class="GUI">Minimal Install</span></strong></span> environment. <span class="strong"><strong><span class="GUI">Minimal Install</span></strong></span> provides only the packages which are essential for running Red Hat Enterprise Linux 8. This will substantially reduce the chance of the system being affected by a vulnerability. If necessary, additional packages can be added later after the installation. For more details on <span class="strong"><strong><span class="GUI">Minimal Install</span></strong></span>, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/security_hardening/index#Minimal_install_configuring-and-managing-security">Installing the Minimum Amount of Packages Required</a> section of the <span class="emphasis"><em>Security Hardening</em></span> document. Note that <span class="strong"><strong><span class="GUI">Initial Setup</span></strong></span> can not run after a system is installed from a Kickstart file unless a desktop environment and the X Window System were included in the installation and graphical login was enabled.
					</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							To install a 32-bit package on a 64-bit system:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									specify the <code class="literal">--multilib</code> option for the <code class="literal">%packages</code> section
								</li><li class="listitem">
									append the package name with the 32-bit architecture for which the package was built; for example, <code class="literal">glibc.i686</code>
								</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="package-selection-commands_package-selection-in-kickstart"/>Package selection commands</h2></div></div></div><p>
						These commands can be used within the <code class="literal">%packages</code> section of a Kickstart file.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Specifying an environment</span></dt><dd><p class="simpara">
									Specify an entire environment to be installed as a line starting with the <code class="literal">@^</code> symbols:
								</p><pre class="screen">%packages
@^Infrastructure Server
%end</pre><p class="simpara">
									This installs all packages which are part of the <code class="literal">Infrastructure Server</code> environment. All available environments are described in the <code class="literal"><span class="emphasis"><em>repository</em></span>/repodata/*-comps-<span class="emphasis"><em>repository</em></span>.<span class="emphasis"><em>architecture</em></span>.xml</code> file on the Red Hat Enterprise Linux 8 Installation DVD.
								</p><p class="simpara">
									Only a single environment should be specified in the Kickstart file. If more environments are specified, only the last specified environment is used.
								</p></dd><dt><span class="term">Specifying groups</span></dt><dd><p class="simpara">
									Specify groups, one entry to a line, starting with an <code class="literal">@</code> symbol, and then the full group name or group id as given in the <code class="literal">*-comps-<span class="emphasis"><em>repository</em></span>.<span class="emphasis"><em>architecture</em></span>.xml</code> file. For example:
								</p><pre class="screen">%packages
@X Window System
@Desktop
@Sound and Video
%end</pre><p class="simpara">
									The <code class="literal">Core</code> group is always selected - it is not necessary to specify it in the <code class="literal">%packages</code> section.
								</p></dd><dt><span class="term">Specifying individual packages</span></dt><dd><p class="simpara">
									Specify individual packages by name, one entry to a line. You can use the asterisk character (<code class="literal">*</code>) as a wildcard in package names. For example:
								</p><pre class="screen">%packages
sqlite
curl
aspell
docbook*
%end</pre><p class="simpara">
									The <code class="literal">docbook*</code> entry includes the packages <code class="literal">docbook-dtds</code> and <code class="literal">docbook-style</code> that match the pattern represented with the wildcard.
								</p></dd><dt><span class="term">Specifying profiles of module streams</span></dt><dd><p class="simpara">
									Specify profiles for module streams, one entry to a line, using the syntax for profiles:
								</p><pre class="screen">%packages
@module:stream/profile
%end</pre><p class="simpara">
									This installs all packages listed in the specified profile of the module stream.
								</p><div class="informalexample"><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											When a module has a default stream specified, you can leave it out. When the default stream is not specified, you must specify it.
										</li><li class="listitem">
											When a module stream has a default profile specified, you can leave it out. When the default profile is not specified, you must specify it.
										</li><li class="listitem">
											Installing a module multiple times with different streams is not possible.
										</li><li class="listitem">
											Installing multiple profiles of the same module and stream is possible.
										</li></ul></div></div><p class="simpara">
									Modules and groups use the same syntax starting with the <code class="literal">@</code> symbol. When a module and a package group exist with the same name, the module takes precedence.
								</p><p class="simpara">
									In Red Hat Enterprise Linux 8, modules are present only in the AppStream repository. To list available modules, use the <code class="literal">yum module list</code> command on an installed Red Hat Enterprise Linux 8 system.
								</p><p class="simpara">
									It is also possible to enable module streams using the <code class="literal">module</code> Kickstart command and then install packages contained in the module stream by naming them directly.
								</p></dd><dt><span class="term">Excluding environments, groups, or packages</span></dt><dd><p class="simpara">
									Use a leading dash (<code class="literal">-</code>) to specify packages or groups to exclude from the installation. For example:
								</p><pre class="screen">%packages
-@Graphical Administration Tools
-autofs
-ipa*compat
%end</pre></dd></dl></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							Installing all available packages using only <code class="literal">*</code> in a Kickstart file is not supported.
						</p></div><p>
						You can change the default behavior of the <code class="literal">%packages</code> section by using several options. Some options work for the entire package selection, others are used with only specific groups.
					</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist"><li class="listitem">
								For more information about handling packages, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/installing-software-with-yum_configuring-basic-system-settings">Installing software with yum</a> chapter of the <span class="emphasis"><em>Configuring basic system settings</em></span> document.
							</li><li class="listitem">
								For more information about modules and streams, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/installing_managing_and_removing_user_space_components/index">Installing, managing, and removing user space components</a> document.
							</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="common-package-selection-options_package-selection-in-kickstart"/>Common package selection options</h2></div></div></div><p>
						The following options are available for the <code class="literal">%packages</code> sections. To use an option, append it to the start of the package selection section. For example:
					</p><pre class="screen">%packages --multilib --ignoremissing</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">--default</code></span></dt><dd>
									Install the default set of packages. This corresponds to the package set which would be installed if no other selections were made in the <span class="strong"><strong><span class="GUI">Package Selection</span></strong></span> screen during an interactive installation.
								</dd><dt><span class="term"><code class="literal">--excludedocs</code></span></dt><dd>
									Do not install any documentation contained within packages. In most cases, this excludes any files normally installed in the <code class="literal">/usr/share/doc</code> directory, but the specific files to be excluded depend on individual packages.
								</dd><dt><span class="term"><code class="literal">--ignoremissing</code></span></dt><dd>
									Ignore any packages, groups, module streams, module profiles, and environments missing in the installation source, instead of halting the installation to ask if the installation should be aborted or continued.
								</dd><dt><span class="term"><code class="literal">--instLangs=</code></span></dt><dd>
									Specify a list of languages to install. Note that this is different from package group level selections. This option does not describe which package groups should be installed; instead, it sets RPM macros controlling which translation files from individual packages should be installed.
								</dd><dt><span class="term"><code class="literal">--multilib</code></span></dt><dd><p class="simpara">
									Configure the installed system for multilib packages (that is, to allow installing 32-bit packages on a 64-bit system) and install packages specified in this section as such.
								</p><p class="simpara">
									Normally, on an AMD64 and Intel 64 system, only packages for this architecture (marked as <code class="literal">x86_64</code>) and packages for all architectures (marked as <code class="literal">noarch</code>) would be installed. When you use this option, packages for 32-bit AMD and Intel systems (marked as <code class="literal">i686</code>) are automatically installed as well, if available.
								</p><p class="simpara">
									This only applies to packages explicitly specified in the <code class="literal">%packages</code> section. Packages which are only being installed as dependencies without being specified in the Kickstart file are only installed in architecture versions in which they are needed, even if they are available for more architectures.
								</p></dd><dt><span class="term"><code class="literal">--nocore</code></span></dt><dd><p class="simpara">
									Disables installation of the <code class="literal">@Core</code> package group which is otherwise always installed by default. Disabling the <code class="literal">@Core</code> package group should be only used for creating lightweight containers; installing a desktop or server system with <code class="literal">--nocore</code> will result in an unusable system.
								</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
										Using <code class="literal">-@Core</code> to exclude packages in the <code class="literal">@Core</code> package group does not work. The only way to exclude the <code class="literal">@Core</code> package group is with the <code class="literal">--nocore</code> option.
									</p></div></dd><dt><span class="term"><code class="literal">--excludeWeakdeps</code></span></dt><dd>
									Disables installation of packages from weak dependencies. These are packages linked to the selected package set by Recommends and Supplements flags. By default weak dependencies will be installed.
								</dd><dt><span class="term"><code class="literal">--retries=</code></span></dt><dd>
									Sets the number of times Yum will attempt to download packages (retries). The default value is 10. This option only applies during the installation, and will not affect Yum configuration on the installed system.
								</dd><dt><span class="term"><code class="literal">--timeout=</code></span></dt><dd>
									Sets the Yum timeout in seconds. The default value is 30. This option only applies during the installation, and will not affect Yum configuration on the installed system.
								</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="options-for-specific-package-groups_package-selection-in-kickstart"/>Options for specific package groups</h2></div></div></div><p>
						The options in this list only apply to a single package group. Instead of using them at the <code class="literal">%packages</code> command in the Kickstart file, append them to the group name. For example:
					</p><pre class="screen">%packages
@Graphical Administration Tools --optional
%end</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">--nodefaults</code></span></dt><dd>
									Only install the group’s mandatory packages, not the default selections.
								</dd><dt><span class="term"><code class="literal">--optional</code></span></dt><dd><p class="simpara">
									Install packages marked as optional in the group definition in the <code class="literal">*-comps-<span class="emphasis"><em>repository</em></span>.<span class="emphasis"><em>architecture</em></span>.xml</code> file, in addition to installing the default selections.
								</p><p class="simpara">
									Note that some package groups, such as <code class="literal">Scientific Support</code>, do not have any mandatory or default packages specified - only optional packages. In this case the <code class="literal">--optional</code> option must always be used, otherwise no packages from this group will be installed.
								</p></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="pre-installation-scripts-in-kickstart_kickstart-script-file-format-reference"/>Pre-installation scripts in Kickstart</h1></div></div></div><p>
					Pre-installation scripts are run immediately before installation begins.
				</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="pre-installation-script-section_pre-installation-scripts-in-kickstart"/>Pre-installation script section</h2></div></div></div><p>
						The <code class="literal">%pre</code> scripts are run on the system immediately after the Kickstart file has been loaded, but before it is completely parsed and installation begins. Each of these sections must start with <code class="literal">%pre</code> and end with <code class="literal">%end</code>.
					</p><p>
						The <code class="literal">%pre</code> script can be used for activation and configuration of networking and storage devices. It is also possible to run scripts, using interpreters available in the installation environment. Adding a <code class="literal">%pre</code> script can be useful if you have networking and storage that needs special configuration before proceeding with the installation, or have a script that, for example, sets up additional logging parameters or environment variables.
					</p><p>
						Debugging problems with <code class="literal">%pre</code> scripts can be difficult, so it is recommended only to use a <code class="literal">%pre</code> script when necessary.
					</p><p>
						Commands related to networking, storage, and file systems are available to use in the <code class="literal">%pre</code> script, in addition to most of the utilities in the installation environment <code class="literal">/sbin</code> and <code class="literal">/bin</code> directories.
					</p><p>
						You can access the network in the <code class="literal">%pre</code> section. However, the name service has not been configured at this point, so only IP addresses work, not URLs.
					</p><p>
						The <code class="literal">%pre</code> scripts ignore missing files for the <code class="literal">%include</code> commands. This is useful for generating the included files in the <code class="literal">%pre</code> section, and having them loaded later.
					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							Unlike the post-installation script, the pre-installation script is not run in the chroot environment.
						</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="pre-installation-kickstart-section-options_pre-installation-scripts-in-kickstart"/>Pre-installation Kickstart section options</h2></div></div></div><p>
						The following options can be used to change the behavior of pre-installation scripts. To use an option, append it to the <code class="literal">%pre</code> line at the beginning of the script. For example:
					</p><pre class="screen">%pre --interpreter=/usr/libexec/platform-python
-- Python script omitted --
%end</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">--interpreter=</code></span></dt><dd><p class="simpara">
									Allows you to specify a different scripting language, such as Python. Any scripting language available on the system can be used; in most cases, these are <code class="literal">/usr/bin/sh</code>, <code class="literal">/usr/bin/bash</code>, and <code class="literal">/usr/libexec/platform-python</code>.
								</p><p class="simpara">
									Note that the <code class="literal">platform-python</code> interpreter uses Python version 3.6. You must change your Python scripts from previous RHEL versions for the new path and version. Additionally, <code class="literal">platform-python</code> is meant for system tools: Use the <code class="literal">python36</code> package outside the installation environment. For more details about Python in Red Hat Enterprise Linux 8, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/using-python3_configuring-basic-system-settings#introduction-to-python_using-python3">Introduction to Python</a> in <span class="emphasis"><em>Configuring basic system settings</em></span>.
								</p></dd><dt><span class="term"><code class="literal">--erroronfail</code></span></dt><dd>
									Display an error and halt the installation if the script fails. The error message will direct you to where the cause of the failure is logged.
								</dd><dt><span class="term"><code class="literal">--log=</code></span></dt><dd><p class="simpara">
									Logs the script’s output into the specified log file. For example:
								</p><pre class="screen">%pre --log=/mnt/sysimage/root/ks-pre.log</pre></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="post-installation-scripts-in-kickstart_kickstart-script-file-format-reference"/>Post-installation scripts in Kickstart</h1></div></div></div><p>
					Post-installation scripts are run after the installation is complete, but before the system is rebooted for the first time. You can use this section to run tasks such as system subscription.
				</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="post-installation-script-section_post-installation-scripts-in-kickstart"/>Post-installation script section</h2></div></div></div><p>
						You have the option of adding commands to run on the system once the installation is complete, but before the system is rebooted for the first time. This section must start with <code class="literal">%post</code> and end with <code class="literal">%end</code>.
					</p><p>
						The <code class="literal">%post</code> section is useful for functions such as installing additional software or configuring an additional name server. The post-install script is run in a <code class="literal">chroot</code> environment, therefore, performing tasks such as copying scripts or RPM packages from the installation media do not work by default. You can change this behavior using the <code class="literal">--nochroot</code> option as described below. Then the <code class="literal">%post</code> script will run in the installation environment, not in <code class="literal">chroot</code> on the installed target system.
					</p><p>
						Because post-install script runs in a <code class="literal">chroot</code> environment, most <code class="literal">systemctl</code> commands will refuse to perform any action. For more information, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/managing-services-with-systemd_configuring-basic-system-settings#behavior_of_systemctl_in_a_chroot_environment">Behavior of systemctl in a chroot Environment</a> section of the <span class="emphasis"><em>Configuring and managing system administration</em></span> document.
					</p><p>
						Note that during execution of the <code class="literal">%post</code> section, the installation media must be still inserted.
					</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
							If you configured the network with static IP information, including a name server, you can access the network and resolve IP addresses in the <code class="literal">%post</code> section. If you configured the network for DHCP, the <code class="literal">/etc/resolv.conf</code> file has not been completed when the installation executes the <code class="literal">%post</code> section. You can access the network, but you cannot resolve IP addresses. Thus, if you are using DHCP, you must specify IP addresses in the <code class="literal">%post</code> section.
						</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="post-installation-kickstart-section-options_post-installation-scripts-in-kickstart"/>Post-installation Kickstart section options</h2></div></div></div><p>
						The following options can be used to change the behavior of post-installation scripts. To use an option, append it to the <code class="literal">%post</code> line at the beginning of the script. For example:
					</p><pre class="screen">%post --interpreter=/usr/libexec/platform-python
-- Python script omitted --
%end</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">--interpreter=</code></span></dt><dd><p class="simpara">
									Allows you to specify a different scripting language, such as Python. For example:
								</p><pre class="screen">%post --interpreter=/usr/libexec/platform-python</pre><p class="simpara">
									Any scripting language available on the system can be used; in most cases, these are <code class="literal">/usr/bin/sh</code>, <code class="literal">/usr/bin/bash</code>, and <code class="literal">/usr/libexec/platform-python</code>.
								</p><p class="simpara">
									Note that the <code class="literal">platform-python</code> interpreter uses Python version 3.6. You must change your Python scripts from previous RHEL versions for the new path and version. Additionally, <code class="literal">platform-python</code> is meant for system tools: Use the <code class="literal">python36</code> package outside the installation environment. For more details about Python in Red Hat Enterprise Linux 8, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/using-python3_configuring-basic-system-settings#introduction-to-python_using-python3">Introduction to Python</a> in <span class="emphasis"><em>Configuring basic system settings</em></span>.
								</p></dd><dt><span class="term"><code class="literal">--nochroot</code></span></dt><dd><p class="simpara">
									Allows you to specify commands that you would like to run outside of the chroot environment.
								</p><p class="simpara">
									The following example copies the file /etc/resolv.conf to the file system that was just installed.
								</p><pre class="screen">%post --nochroot
cp /etc/resolv.conf /mnt/sysimage/etc/resolv.conf
%end</pre></dd><dt><span class="term"><code class="literal">--erroronfail</code></span></dt><dd>
									Display an error and halt the installation if the script fails. The error message will direct you to where the cause of the failure is logged.
								</dd><dt><span class="term"><code class="literal">--log=</code></span></dt><dd><p class="simpara">
									Logs the script’s output into the specified log file. Note that the path of the log file must take into account whether or not you use the <code class="literal">--nochroot</code> option. For example, without <code class="literal">--nochroot</code>:
								</p><pre class="screen">%post --log=/root/ks-post.log</pre><p class="simpara">
									and with <code class="literal">--nochroot</code>:
								</p><pre class="screen">%post --nochroot --log=/mnt/sysimage/root/ks-post.log</pre></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example-mounting-nfs-in-a-post-install-script_post-installation-scripts-in-kickstart"/>Example: Mounting NFS in a post-install script</h2></div></div></div><p>
						This example of a <code class="literal">%post</code> section mounts an NFS share and executes a script named <code class="literal">runme</code> located at <code class="literal">/usr/new-machines/</code> on the share. Note that NFS file locking is not supported while in Kickstart mode, therefore the <code class="literal">-o nolock</code> option is required.
					</p><pre class="screen"># Start of the %post section with logging into /root/ks-post.log
%post --log=/root/ks-post.log

# Mount an NFS share
mkdir /mnt/temp
mount -o nolock 10.10.0.2:/usr/new-machines /mnt/temp
openvt -s -w -- /mnt/temp/runme
umount /mnt/temp

# End of the %post section
%end</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="example-running-subscription-manager-as-a-post-install-script_post-installation-scripts-in-kickstart"/>Example: Running subscription-manager as a post-install script</h2></div></div></div><p>
						One of the most common uses of post-installation scripts in Kickstart installations is automatic registration of the installed system using Red Hat Subscription Manager. The following is an example of automatic subscription in a <code class="literal">%post</code> script:
					</p><pre class="screen">%post --log=/root/ks-post.log
subscription-manager register --username=admin@example.com --password=secret --auto-attach
%end</pre><p>
						The subscription-manager command-line script registers a system to a Red Hat Subscription Management server (Customer Portal Subscription Management, Satellite 6, or CloudForms System Engine). This script can also be used to assign or attach subscriptions automatically to the system that best-match that system. When registering to the Customer Portal, use the Red Hat Network login credentials. When registering to Satellite 6 or CloudForms System Engine, you may also need to specify more subscription-manager options like <code class="literal">--serverurl</code>, <code class="literal">--org</code>, <code class="literal">--environment</code> as well as credentials provided by your local administrator. Note that credentials in the form of an <code class="literal">--org --activationkey</code> combination is a good way to avoid exposing <code class="literal">--username --password</code> values in shared kickstart files.
					</p><p>
						Additional options can be used with the registration command to set a preferred service level for the system and to restrict updates and errata to a specific minor release version of RHEL for customers with Extended Update Support subscriptions that need to stay fixed on an older stream.
					</p><p>
						See also the <a class="link" href="https://access.redhat.com/solutions/748313">How do I use subscription-manager in a kickstart file?</a> article on the Red Hat Customer Portal for additional information about using <code class="literal">subscription-manager</code> in a Kickstart <code class="literal">%post</code> section.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="anaconda-configuration-section_kickstart-script-file-format-reference"/>Anaconda configuration section</h1></div></div></div><p>
					Additional installation options can be configured in the <code class="literal">%anaconda</code> section of your Kickstart file. This section controls the behavior of the user interface of the installation system.
				</p><p>
					This section must be placed towards the end of the Kickstart file, after Kickstart commands, and must start with <code class="literal">%anaconda</code> and end with <code class="literal">%end</code>.
				</p><p>
					Currently, the only command that can be used in the <code class="literal">%anaconda</code> section is <code class="literal">pwpolicy</code>.
				</p><div class="example"><a id="idm139712675574224"/><p class="title"><strong>Example A.1. Sample <code class="literal">%anaconda</code> script</strong></p><div class="example-contents"><p>
						The following is an example %anaconda section:
					</p><pre class="screen">%anaconda
pwpolicy root --minlen=10 --strict
%end</pre><p>
						This example <code class="literal">%anaconda</code> section sets a password policy which requires that the root password be at least 10 characters long, and strictly forbids passwords which do not match this requirement.
					</p></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="kickstart-error-handling-section_kickstart-script-file-format-reference"/>Kickstart error handling section</h1></div></div></div><p>
					Starting with Red Hat Enterprise Linux 7, Kickstart installations can contain custom scripts which are run when the installation program encounters a fatal error. For example, an error in a package that has been requested for installation, failure to start VNC when specified, or an error when scanning storage devices. Installation cannot continue after such an error has occured. The installation program will run all <code class="literal">%onerror</code> scripts in the order they are provided in the Kickstart file. In addition, <code class="literal">%onerror</code> scripts will be run in the event of a traceback.
				</p><p>
					Each <code class="literal">%onerror</code> script is required to end with <code class="literal">%end</code>.
				</p><p>
					Error handling sections accept the following options:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">--erroronfail</code></span></dt><dd>
								Display an error and halt the installation if the script fails. The error message will direct you to where the cause of the failure is logged.
							</dd><dt><span class="term"><code class="literal">--interpreter=</code></span></dt><dd><p class="simpara">
								Allows you to specify a different scripting language, such as Python. For example:
							</p><pre class="screen">%onerror --interpreter=/usr/libexec/platform-python</pre><p class="simpara">
								Any scripting language available on the system can be used; in most cases, these are <code class="literal">/usr/bin/sh</code>, <code class="literal">/usr/bin/bash</code>, and <code class="literal">/usr/libexec/platform-python</code>.
							</p><p class="simpara">
								Note that the <code class="literal">platform-python</code> interpreter uses Python version 3.6. You must change your Python scripts from previous RHEL versions for the new path and version. Additionally, <code class="literal">platform-python</code> is meant for system tools: Use the <code class="literal">python36</code> package outside the installation environment. For more details about Python in Red Hat Enterprise Linux 8, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/using-python3_configuring-basic-system-settings#introduction-to-python_using-python3">Introduction to Python</a> in <span class="emphasis"><em>Configuring basic system settings</em></span>.
							</p></dd><dt><span class="term"><code class="literal">--log=</code></span></dt><dd>
								Logs the script’s output into the specified log file.
							</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="kickstart-add-on-sections_kickstart-script-file-format-reference"/>Kickstart add-on sections</h1></div></div></div><p>
					Starting with Red Hat Enterprise Linux 7, Kickstart installations support add-ons. These add-ons can expand the basic Kickstart (and Anaconda) functionality in many ways.
				</p><p>
					To use an add-on in your Kickstart file, use the <code class="literal">%addon <span class="emphasis"><em>addon_name</em></span> <span class="emphasis"><em>options</em></span></code> command, and finish the command with an <code class="literal">%end</code> statement, similar to pre-installation and post-installation script sections. For example, if you want to use the Kdump add-on, which is distributed with Anaconda by default, use the following commands:
				</p><pre class="screen">%addon com_redhat_kdump --enable --reserve-mb=auto
%end</pre><p>
					The <code class="literal">%addon</code> command does not include any options of its own - all options are dependent on the actual add-on.
				</p></div></div></body></html>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 7. Logging in to the Identity Management Web UI using one time passwords</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="logging-in-to-the-ipa-web-ui-using-one-time-passwords_start-stop-ipa"/>Chapter 7. Logging in to the Identity Management Web UI using one time passwords</h1></div></div></div><p>
			Access to IdM Web UI can be secured using several methods. The basic one is password authentication.
		</p><p>
			To increase the security of password authentication, you can add a second step and require automatically generated one-time passwords (OTPs). The most common usage is to combine password connected with the user account and a time limited one time password generated by a hardware or software token.
		</p><p>
			The following sections help you to:
		</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
					Understand how the OTP authentication works in IdM.
				</li><li class="listitem">
					Configure OTP authentication on the IdM server.
				</li><li class="listitem">
					Create OTP tokens and synchronize them with the FreeOTP app in your phone.
				</li><li class="listitem">
					Authenticate to the IdM Web UI with the combination of user password and one time password.
				</li><li class="listitem">
					Re-synchronize tokens in the Web UI.
				</li></ul></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="prerequisites_6"/>Prerequisites</h1></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="link" href="accessing-the-ipa-web-ui-in-a-web-browser_start-stop-ipa.html#what-is-the-ipa-web-ui_access-web-ui" title="What is the IdM Web UI">Accessing the IdM Web UI in a web browser</a>
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="one-time-password-authentication-in-identity-management_logging-in-to-ipa-in-the-web-ui-using-a-password"/>One time password (OTP) authentication in Identity Management</h1></div></div></div><p>
				One-time passwords bring an additional step to your authentication security. The authentication uses your password + an automatically generated one time password.
			</p><p>
				To generate one time passwords, you can use a hardware or software token. IdM supports both software and hardware tokens.
			</p><p>
				Identity Management supports the following two standard OTP mechanisms:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The HMAC-Based One-Time Password (HOTP) algorithm is based on a counter. HMAC stands for Hashed Message Authentication Code.
					</li><li class="listitem">
						The Time-Based One-Time Password (TOTP) algorithm is an extension of HOTP to support time-based moving factor.
					</li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					IdM does not support OTP logins for Active Directory trust users.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="enabling-the-one-time-password-in-the-web-ui_logging-in-to-ipa-in-the-web-ui-using-a-password"/>Enabling the one time password in the Web UI</h1></div></div></div><pre class="literallayout">The IdM Web UI allows you to configure hardware or software device to generate one-time passwords.</pre><p>
				The one time password is entered just after the usual password in the dedicated field in the login dialog.
			</p><p>
				Only administrators can enable OTP authentication in the user settings.
			</p><h3><a id="prerequisites_7"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Administration privileges
					</li></ul></div><h3><a id="procedure_16"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						Log in to the IdM Web UI with your username and password.
					</li><li class="listitem"><p class="simpara">
						Open the <span class="strong"><strong>Identity → Users → Active users</strong></span> tab.
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="images/web_ui-users.png" alt="web ui users"/></span>

					</p></li><li class="listitem">
						Click your username to open the user settings.
					</li><li class="listitem">
						In the <span class="strong"><strong>User authentication types</strong></span>, select <span class="strong"><strong>Two factor authentication (password + OTP)</strong></span>.
					</li><li class="listitem">
						Click <span class="strong"><strong>Save</strong></span>.
					</li></ol></div><p>
				At this point, the OTP authentication is enabled on the IdM server.
			</p><p>
				Now you or users themselves need to assign a new token ID to the user account.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="adding-otp-tokens-in-the-web-ui_logging-in-to-ipa-in-the-web-ui-using-a-password"/>Adding OTP tokens in the Web UI</h1></div></div></div><p>
				The following section helps you to add token to the IdM Web UI and to your software token generator.
			</p><h3><a id="prerequisites_8"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Active user account on the IdM server.
					</li><li class="listitem">
						Administrator has enabled OTP for the particular user account in the IdM Web UI.
					</li><li class="listitem">
						A software device generating OTP tokens, for example FreeOTP.
					</li></ul></div><h3><a id="procedure_17"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						Log in to the IdM Web UI with your user name and password.
					</li><li class="listitem">
						To create the token in your mobile phone, open the <span class="strong"><strong>Authentication → OTP Tokens</strong></span> tab.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong"><strong>Add</strong></span>.
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="images/web_ui_tokens_tab.png" alt="web ui tokens tab"/></span>

					</p></li><li class="listitem"><p class="simpara">
						In the <span class="strong"><strong>Add OTP token</strong></span> dialog box, leave everything unfilled and click <span class="strong"><strong>Add</strong></span>.
					</p><p class="simpara">
						At this stage, the IdM server creates a token with default parameters at the server and opens a page with a QR code.
					</p></li><li class="listitem">
						Copy the QR code into your mobile phone.
					</li><li class="listitem">
						Click <span class="strong"><strong>OK</strong></span> to close the QR code.
					</li></ol></div><p>
				Now you can generate one time passwords and log in with them to the IdM Web UI.
			</p><p>
				<span class="inlinemediaobject"><img src="images/freeotp_token.png" alt="freeotp token"/></span>

			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="logging-in-to-the-web-ui-with-a-one-time-password_logging-in-to-ipa-in-the-web-ui-using-a-password"/>Logging into the Web UI with a one time password</h1></div></div></div><p>
				This procedure describes the first login into the IdM Web UI using a one time password (OTP).
			</p><h3><a id="prerequisites_9"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
						OTP configuration enabled on the Identity Management server for the user account you are using for the OTP authentication. Administrators as well as users themselves can enable OTP.
					</p><p class="simpara">
						To enable the OTP configuration, see <a class="xref" href="logging-in-to-the-ipa-web-ui-using-one-time-passwords_start-stop-ipa.html#enabling-the-one-time-password-in-the-web-ui_logging-in-to-ipa-in-the-web-ui-using-a-password" title="Enabling the one time password in the Web UI">the section called “Enabling the one time password in the Web UI”</a>
					</p></li><li class="listitem">
						A hardware or software device generating OTP tokens configured.
					</li></ul></div><h3><a id="procedure_18"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						In the Identity Management login screen, enter your user name or a user name of the IdM server adminisntrator account.
					</li><li class="listitem">
						Add the password for the user name entered above.
					</li><li class="listitem">
						Generate a one time password on your device.
					</li><li class="listitem">
						Enter the one time password right after the password (without space).
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong"><strong>Log in</strong></span>.
					</p><p class="simpara">
						If the authentication fails, synchronize OTP tokens.
					</p><p class="simpara">
						If your CA uses a self-signed certificate, the browser issues a warning. Check the certificate and accept the security exception to proceed with the login.
					</p><p class="simpara">
						If the the IdM Web UI does not open, verify the DNS configuration of your Identity Management server.
					</p></li></ol></div><p>
				After successful login, the IdM Web UI appears.
			</p><p>
				<span class="inlinemediaobject"><img src="images/web_ui_users.png" alt="web ui users"/></span>

			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="synchronizing-otp-tokens_logging-in-to-ipa-in-the-web-ui-using-a-password"/>Synchronizing OTP tokens using the Web UI</h1></div></div></div><p>
				If the login with OTP (One Time Password) fails, OTP tokens are not synchronized correctly.
			</p><p>
				The following text describes token re-synchronization.
			</p><h3><a id="prerequisites_10"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						A login screen opened.
					</li><li class="listitem">
						A device generating OTP tokens configured.
					</li></ul></div><h3><a id="procedure_19"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						On the IdM Web UI login screen, click <span class="strong"><strong>Sync OTP Token</strong></span>.
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="images/web_ui_login_otp_link.png" alt="web ui login otp link"/></span>

					</p></li><li class="listitem">
						In the login screen, enter your username and the Identity Management password.
					</li><li class="listitem">
						Generate one time password and enter it in the <span class="strong"><strong>First OTP</strong></span> field.
					</li><li class="listitem">
						Generate another one time password and enter it in the <span class="strong"><strong>Second OTP</strong></span> field.
					</li><li class="listitem"><p class="simpara">
						Optionally, enter the token ID.
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="images/web_ui_login_otp_configuration.png" alt="web ui login otp configuration"/></span>

					</p></li><li class="listitem">
						Click <span class="strong"><strong>Sync OTP Token</strong></span>.
					</li></ol></div><p>
				After the successful synchronization, you can log in to the IdM server.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="changing-expired-passwords_logging-in-to-ipa-in-the-web-ui-using-a-password"/>Changing expired passwords</h1></div></div></div><p>
				Administrators of Identity Management can enforce you having to change your password at the next login. It means that you cannot successfully log in to the IdM Web UI until you change the password.
			</p><p>
				Password expiration can happen during your first login to the Web UI.
			</p><p>
				If the expiration password dialog appears, follow the instructions in the procedure.
			</p><h3><a id="prerequisites_11"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						A login screen opened.
					</li><li class="listitem">
						Active account to the IdM server.
					</li></ul></div><h3><a id="procedure_20"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						In the password expiration login screen, enter the user name.
					</li><li class="listitem">
						Add the password for the user name entered above.
					</li><li class="listitem"><p class="simpara">
						In the OTP field, generate a one time password, if you use the one time password authentication.
					</p><p class="simpara">
						If you do not have enabled the OTP authentication, leave the field empty.
					</p></li><li class="listitem">
						Enter the new password twice for verification.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong"><strong>Reset Password</strong></span>.
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="images/web_ui_passwd_expiration.png" alt="web ui passwd expiration"/></span>

					</p></li></ol></div><p>
				After the successful password change, the usual login dialog displays. Log in with the new password.
			</p></div></div></body></html>
<html  xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. 网络主题概述</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"></head><body ><div class="chapter"><div class="titlepage"><div><div><h1 class="title">Chapter 9. 网络主题概述</h1></div></div></div><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>以下部分提到了一些要执行的命令。<code class="literal">root</code>用户需要输入的命令在提示符中有<code class="literal">~]#</code> ，而普通用户可以执行的命令在提示符中有<code class="literal">~]$</code> 。
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="IP_versus_non_IP_networks_Overview-of-Networking-topics"></a> IP与非IP网络</h1></div></div></div><p>网络是互连设备的系统，可以传递共享信息和资源，例如文件，打印机，应用程序和Internet连接。这些设备中的每一个都具有唯一的因特网协议（IP）地址，以使用称为协议的一组规则在两个或更多设备之间发送和接收消息。
			</p><h3><a id="bh-Categories_of_Network_Communication"></a>网络通信的类别</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">IP网络</span></dt><dd>通过IP地址进行通信的网络。IP网络在因特网和大多数内部网络中实现。以太网，电缆调制解调器，DSL调制解调器，拨号调制解调器，无线网络和VPN连接是典型的例子。
						</dd><dt><span class="term">非IP网络</span></dt><dd>用于通过较低层而不是传输层进行通信的网络。请注意，很少使用这些网络。InfiniBand是一个非IP网络。
						</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Static-vesrus-dynamic-IP-addressing_Overview-of-Networking-topics"></a>静态与动态IP寻址</h1></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">静态IP寻址</span></dt><dd><p class="simpara">为设备分配静态IP地址时，除非手动更改，否则地址不会随时间变化。如果需要，请使用静态<code class="literal">IP</code>寻址：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">确保<code class="literal">DNS</code>和身份验证服务器等服务器的网络地址一致性。
								</li><li class="listitem"><p class="simpara">使用独立于其他网络基础架构工作的带外管理设备。
								</p><p class="simpara"><a class="xref" href="overview-of-Network-configuration-methods_configuring-and-managing-networking.html#Selecting-Network-Configuration-methods_overview-of-Network-configuration-methods" title="选择网络配置方法">“选择网络配置方法”一节中</a>列出的所有配置工具都允许手动分配静态<code class="literal">IP</code>地址。
								</p></li></ul></div></dd><dt><span class="term">动态IP寻址</span></dt><dd><p class="simpara">为设备分配动态IP地址时，地址会随时间而变化。因此，建议偶尔连接到网络的设备，因为重新启动计算机后可能会更改IP地址。
						</p><p class="simpara">动态IP地址更灵活，更易于设置和管理。<span class="strong"><strong>动态主机控制协议</strong></span> （ <span class="strong"><strong>DHCP</strong></span> ）是一种向主机动态分配网络配置的传统方法。
						</p></dd></dl></div><div class="note" style="margin-left:0.5in;margin-right:0.5in"><h3 class="title">注意</h3><p>没有严格的规则来定义何时使用静态或动态IP地址。这取决于用户的需求，偏好和网络环境。
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Configuring-the-DHCP-Client-Behavior_Overview-of-Networking-topics"></a>配置DHCP客户端行为</h1></div></div></div><p>每次客户端连接到网络时，动态主机配置协议（DHCP）客户端都会从DHCP服务器请求动态IP地址和相应的配置信息。
			</p><h3><a id="Requesting_an_IP_Address"></a>配置DHCP超时</h3><p>启动<code class="literal">DHCP</code>连接时，dhcp客户端从<code class="literal">DHCP</code>服务器请求IP地址。dhcp客户端等待此请求完成的时间默认为45秒。此过程描述如何可以配置<code class="literal">ipv4.dhcp-timeout</code>使用<span class="strong"><strong><span class="application">nmcli</span></strong></span>工具或财产<code class="literal">IPV4_DHCP_TIMEOUT</code>在选项中<code class="literal">/etc/sysconfig/network-scripts/ifcfg- <span class="emphasis"><em>ifname</em></span></code>文件。例如，使用<span class="strong"><strong><span class="application">nmcli</span></strong></span> ：</p><pre class="literallayout">~]# <code class="literal">nmcli connection modify eth1 ipv4.dhcp-timeout 10</code></pre><p>如果在此间隔期间无法获取地址，则IPv4配置将失败。整个连接也可能失败，这取决于<code class="literal">ipv4.may-fail</code>属性：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">如果<code class="literal">ipv4.may-fail</code>设置为<span class="strong"><strong>yes</strong></span> （默认值），则连接状态取决于IPv6配置：</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">如果IPv6配置已启用且成功，则会激活连接，但永远不会再次重试IPv4配置。
							</li><li class="listitem">如果禁用IPv6配置或未配置IPv6配置，则连接将失败。
							</li></ol></div></li><li class="listitem"><p class="simpara">如果<code class="literal">ipv4.may-fail</code>设置为<span class="strong"><strong>no</strong></span> ，则取消激活连接。在这种情况下：</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">如果启用了连接的<code class="literal">autoconnect</code>属性， <span class="strong"><strong><span class="application">NetworkManager将</span></strong></span>重试激活连接的次数与<code class="literal">autoconnect-retries</code>属性中设置<code class="literal">autoconnect-retries</code> 。默认值为4。
							</li><li class="listitem"><p class="simpara">如果连接仍无法获取dhcp地址，则自动激活失败。
							</p><p class="simpara">请注意，5分钟后，自动连接过程再次启动，dhcp客户端将重试从dhcp服务器获取地址。
							</p></li></ol></div></li></ul></div><h3><a id="Requesting_a_Lease_Renewal"></a>租约续期和到期</h3><p>成功获取DHCP租约后， <span class="strong"><strong>NetworkManager会</strong></span>使用从DHCP服务器接收的参数在给定时间内配置接口，并尝试定期续订租约。当租约到期且无法续订时， <span class="strong"><strong>NetworkManager会</strong></span>继续尝试联系服务器最多8分钟。如果其他IP配置（IPv4或IPv6）成功，则只要连接处于活动状态，DHCP请求就会继续。
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Making_DHCPv4_persistent"></a>使DHCPv4持久化</h2></div></div></div><p>要使DHCPv4在启动时和租约续订过程中都保持持久，请将<code class="literal">ipv4.dhcp-timeout</code>属性设置为32位整数（MAXINT32）的最大值，即<code class="literal">2147483647</code> ，或者设置为<code class="literal">infinity</code>值：</p><pre class="literallayout">~]$ <code class="literal">nmcli connection modify <span class="emphasis"><em>eth1</em></span> ipv4.dhcp-timeout infinity</code></pre><p>因此， <span class="strong"><strong><span class="application">NetworkManager</span></strong></span>永远不会停止尝试从DHCP服务器获取或续订租约，直到成功为止。
				</p><p>要仅在租约续订过程中确保DHCP持久性行为，您可以手动将静态IP添加到<code class="literal">/etc/sysconfig/network-scripts/ifcfg- <span class="emphasis"><em>ethX</em></span></code>配置文件中的<code class="literal">IPADDR</code>属性或使用<span class="strong"><strong>nmcli</strong></span> ：</p><pre class="literallayout">~]$ <code class="literal">nmcli connection modify <span class="emphasis"><em>eth0</em></span> ipv4.address <span class="emphasis"><em>192.168.122.88/24</em></span></code></pre><p>当IP地址租约到期时，静态IP将IP状态保留为已配置或部分配置 - 您可以拥有IP地址，但未连接到Internet。
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Setting_the_Wireless_Regulatory_Domain_Overview-of-Networking-topics"></a>设置无线监管域</h1></div></div></div><p>在Red Hat Enterprise Linux中， <span class="strong"><strong><span class="package">crda</span></strong></span>软件包包含中央监管域代理，该代理为内核提供给定管辖区域的无线监管规则。它由某些<span class="strong"><strong><span class="package">udev</span></strong></span>脚本使用，除非调试<span class="strong"><strong><span class="package">udev</span></strong></span>脚本，否则不应手动运行。内核通过在新的监管域更改时发送<span class="strong"><strong><span class="package">udev</span></strong></span>事件来运行<span class="strong"><strong><span class="package">crda</span></strong></span> 。监管域更改由Linux无线子系统（IEEE-802.11）触发。该子系统使用<code class="literal">regulatory.bin</code>文件来保存其监管数据库信息。
			</p><p><code class="literal">setregdomain</code>实用程序为您的系统设置监管域。<code class="literal">Setregdomain</code>不带参数，通常通过系统脚本（如<span class="strong"><strong><span class="package">udev）</span></strong></span>调用，而不是由管理员手动调用。如果国家/地区代码查找失败，系统管理员可以在<code class="literal">/etc/sysconfig/regdomain</code>文件中定义<code class="literal">COUNTRY</code>环境变量。
			</p><h3><a id="additional_resources"></a>其他资源</h3><p>有关监管域的更多信息，请参见以下手册页：</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<code class="literal">setregdomain(1)</code>手册页 - 根据国家/地区代码设置监管域。
					</li><li class="listitem">
						<code class="literal">crda(8)</code>手册页 - <code class="literal">crda(8)</code>送给定ISO或IEC 3166 alpha2的无线监管域。
					</li><li class="listitem">
						<code class="literal">regulatory.bin(5)</code>手册页 - 显示Linux无线监管数据库。
					</li><li class="listitem">
						<code class="literal">iw(8)</code>手册页 - 显示或操作无线设备及其配置。
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Using_Network_Kernel_Tunables_with_sysctl_Overview-of-Networking-topics"></a>将网络内核可调参数与sysctl一起使用</h1></div></div></div><p>通过<code class="literal">sysctl</code>实用程序使用某些内核可调参数，可以调整正在运行的系统上的网络配置，并直接影响网络性能。
			</p><p>要更改网络设置，请使用<code class="literal">sysctl</code>命令。对于在系统重新启动时持续存在的永久性更改，请在<code class="literal">/etc/sysctl.conf</code>文件中添加行。
			</p><p>要显示所有可用<code class="literal">sysctl</code>参数的列表，请以<code class="literal">root</code>身份输入：</p><pre class="literallayout">~]# <code class="literal">sysctl -a</code></pre></div></div></body></html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces.">
      <meta name="description" content="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces.">
      <title>Configuring Transparent Data Encryption</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Advanced Security Guide ">
      <meta property="og:description" content="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Advanced Security Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="advanced-security-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-13T09:26:12-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96301-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="introduction-to-transparent-data-encryption.html" title="Previous" type="text/html">
      <link rel="next" href="managing-keystore-and-tde-master-encryption-key.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Advanced Security Guide">
    <meta name="dcterms.isVersionOf" content="ASOAG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-to-transparent-data-encryption.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="managing-keystore-and-tde-master-encryption-key.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Advanced Security Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="asopart1.html" property="item" typeof="WebPage"><span property="name">Using Transparent Data Encryption</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Configuring Transparent Data Encryption</li>
            </ol>
            <a id="GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" name="GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D"></a><a id="ASOAG10474"></a>
            
            <h2 id="ASOAG-GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" class="sect2"><span class="enumeration_chapter">3 </span>Configuring Transparent Data Encryption
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces. </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-C7989D41-F54B-4A48-ADE7-19175E88889C">About Configuring Transparent Data Encryption</a><br>To configure Transparent Data Encryption, you must perform a one-time setup before you create keystores and encrypt data.
                  </li>
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-AFC2AF54-3C53-46EB-B867-01DA523F7870">Transparent Data Encryption Keystore Search Order</a><br>The search order for the TDE keystore depends on how you have set either the instance initialization parameters, the <code class="codeph">sqlnet.ora</code> parameters, or the environment variables. 
                  </li>
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9">Configuring a Software Keystore</a><br>A software keystore is a container for the master encryption key, and it resides in the software file system. 
                  </li>
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14">Configuring a Hardware Keystore</a><br>A hardware keystore resides in a hardware security module (HSM), which is designed to store encryption keys.
                  </li>
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE">Encrypting Columns in Tables</a><br>You can use Transparent Data Encryption to encrypt individual columns in database tables.
                  </li>
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8">Encryption Conversions for Tablespaces and Databases</a><br>You can perform encryption operations on both offline and online tablespaces and databases. 
                  </li>
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F">Transparent Data Encryption Data Dynamic and Data Dictionary Views</a><br>You can query a set of dynamic and data dictionary views to find more information about Transparent Data Encryption (TDE) data.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="asopart1.html" title="Part I describes how to use Transparent Data Encryption.">Using Transparent Data Encryption</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-C7989D41-F54B-4A48-ADE7-19175E88889C" name="GUID-C7989D41-F54B-4A48-ADE7-19175E88889C"></a><h3 id="ASOAG-GUID-C7989D41-F54B-4A48-ADE7-19175E88889C" class="sect3">About Configuring Transparent Data Encryption</h3>
               <div>
                  <p>To configure Transparent Data Encryption, you must perform a one-time setup before you create keystores and encrypt data.</p>
                  <p>Before you can configure keystores and begin to encrypt data, you must perform a one-time configuration using the <code class="codeph">WALLET_ROOT</code> and <code class="codeph">TDE_CONFIGURATION</code> parameters to designate the location and type of keystores that you plan to create. 
                  </p>
                  <p>The <code class="codeph">WALLET_ROOT</code> parameter specifies the keystore directory location. Before you set <code class="codeph">WALLET_ROOT</code>, ensure that you have an existing directory that you can use to store keystores. (Typically, this directory is called <code class="codeph">wallet</code>.) 
                  </p>
                  <p>The <code class="codeph">TDE_CONFIGURATION</code> parameter specifies the type of keystore (software keystore, hardware keystore, or Oracle Key Vault keystore). If you omit the <code class="codeph">TDE_CONFIGURATION</code> parameter, then Oracle Database uses the <code class="codeph">sqlnet.ora</code> file settings. After you set the type of keystore using <code class="codeph">TDE_CONFIGURATION</code>, when you create the keystore, Oracle Database creates a directory within the <code class="codeph">WALLET_ROOT</code> location for the keystore type. For example, if you set <code class="codeph">TDE_CONFIGURATION</code> to <code class="codeph">FILE</code>, for Transparent Data Encryption keystores, then Oracle Database creates a directory named <code class="codeph">tde</code> (lower case) within the wallet directory. If you want to migrate from one keystore type to another, then you must first set <code class="codeph">TDE_CONFIGURATION</code> parameter to the keystore type that you want to use, and then use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement to perform the migration. For example, you can migrate from a hardware security module (HSM) keystore to a TDE keystore.
                  </p>
                  <p>The <code class="codeph">KEYSTORE_MODE</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> dynamic view shows whether united mode or isolated mode has been configured. 
                  </p>
                  <div class="infoboxnote" id="GUID-C7989D41-F54B-4A48-ADE7-19175E88889C__GUID-F7541009-C008-4471-81DE-EF015D242305">
                     <p class="notep1">Note:</p>In previous releases, the <code class="codeph">SQLNET.ENCRYPTION_WALLET_LOCATION</code> parameter was used to define the keystore directory location. This parameter has been deprecated. Oracle recommends that you use the <code class="codeph">WALLET_ROOT</code> static initialization parameter and <code class="codeph">TDE_CONFIGURATION</code> dynamic initialization parameter instead. 
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="configuring-transparent-data-encryption.html#GUID-AFC2AF54-3C53-46EB-B867-01DA523F7870" title="The search order for the TDE keystore depends on how you have set either the instance initialization parameters, the sqlnet.ora parameters, or the environment variables.">Transparent Data Encryption Keystore Search Order</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces.">Configuring Transparent Data Encryption</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-AFC2AF54-3C53-46EB-B867-01DA523F7870" name="GUID-AFC2AF54-3C53-46EB-B867-01DA523F7870"></a><h3 id="ASOAG-GUID-AFC2AF54-3C53-46EB-B867-01DA523F7870" class="sect3">Transparent Data Encryption Keystore Search Order</h3>
               <div>
                  <p>The search order for the TDE keystore depends on how you have set either the instance initialization parameters, the <code class="codeph">sqlnet.ora</code> parameters, or the environment variables. 
                  </p>
                  <p>Oracle Database retrieves the keystore by searching in these locations, in the following order:</p>
                  <ol id="GUID-AFC2AF54-3C53-46EB-B867-01DA523F7870__OL_DGJ_KKL_YFB">
                     <li>
                        <p>The location set by the <code class="codeph">WALLET_ROOT</code> instance initialization parameter, when the <code class="codeph">KEYSTORE_CONFIGURATION</code> attribute of the <code class="codeph">TDE_CONFIGURATION</code> initialization parameter is set to <code class="codeph">FILE</code>. Oracle recommends that you use this parameter to configure the keystore location.
                        </p>
                     </li>
                     <li>
                        <p>If the <code class="codeph">KEYSTORE_CONFIGURATION</code> attribute of the <code class="codeph">TDE_CONFIGURATION</code> initialization parameter is not set to <code class="codeph">FILE</code> or <code class="codeph">WALLET_ROOT</code> is not set, then the location specified by the <code class="codeph">WALLET_LOCATION</code> setting in the <code class="codeph">sqlnet.ora</code> file.
                        </p>
                     </li>
                     <li>
                        <p>If <code class="codeph">WALLET_ROOT</code> and <code class="codeph">WALLET_LOCATION</code> are not set, then the location specified by the <code class="codeph">ENCRYPTION_WALLET_LOCATION</code> parameter (now deprecated in favor of <code class="codeph">WALLET_ROOT</code>) in the <code class="codeph">sqlnet.ora</code> file.
                        </p>
                     </li>
                     <li>
                        <p>If none of these parameters are set, and if the <code class="codeph">ORACLE_BASE</code> environment variable is set, then the <code class="codeph">$ORACLE_BASE/admin/<span class="codeinlineitalic">db_unique_name</span>/wallet</code> directory. If <code class="codeph">ORACLE_BASE</code> is not set, then <code class="codeph">$ORACLE_HOME/admin/<span class="codeinlineitalic">db_unique_name</span>/wallet</code>. 
                        </p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces.">Configuring Transparent Data Encryption</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ASOAG10274"></a><div class="props_rev_3"><a id="GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" name="GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9"></a><h3 id="ASOAG-GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" class="sect3">Configuring a Software Keystore</h3>
               <div>
                  <p>A software keystore is a container for the master encryption key, and it resides in the software file system. </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-01E3A39B-87BD-4E3F-9198-6CBD896B405B">About Configuring a Software Keystore</a><br>A software keystore is a container that stores the TDE master encryption key. 
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-82EAFC96-5B0E-4BA6-B748-14385D04E002">Step 1: Configure the Software Keystore Location and Type</a><br>You must configure the keystore location and type by setting <code class="codeph">WALLET_ROOT</code> in <code class="codeph">init.ora</code> and <code class="codeph">TDE_CONFIGURATION</code> in the database instance.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1">Step 2: Create the Software Keystore</a><br>After you have specified a directory location for the software keystore, you can create the keystore.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2">Step 3: Open the Software Keystore</a><br>Depending on the type of keystore you create, you must manually open the keystore before you can use it. 
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8">Step 4: Set the TDE Master Encryption Key in the Software Keystore</a><br>Once the keystore is open, you can set a TDE master encryption key for it.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-9D157063-2C48-40AC-8697-0FD1A866F038">Step 5: Encrypt Your Data</a><br>Now that you have completed the keystore configuration, you can begin to encrypt data in the PDB.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces.">Configuring Transparent Data Encryption</a></p>
                     </div>
                  </div>
               </div>
               <a id="ASOAG10275"></a><div class="props_rev_3"><a id="GUID-01E3A39B-87BD-4E3F-9198-6CBD896B405B" name="GUID-01E3A39B-87BD-4E3F-9198-6CBD896B405B"></a><h4 id="ASOAG-GUID-01E3A39B-87BD-4E3F-9198-6CBD896B405B" class="sect4">About Configuring a Software Keystore</h4>
                  <div>
                     <p>A software keystore is a container that stores the TDE master encryption key. </p>
                     <p>Before you can configure the keystore, you first must define a location for it by setting the <code class="codeph">WALLET_ROOT</code> parameter in the <code class="codeph">init.ora</code> file. The database locates this keystore by first checking the <code class="codeph">WALLET_ROOT</code> setting. If this setting has not been created, then the database checks the <code class="codeph">sqlnet.ora</code> file. You can create other keystores, such as copies of the keystore and export files that contain keys, depending on your needs. If you must remove or delete the keystore that you configured in the <code class="codeph">WALLET_ROOT</code> location, then you must do so only after you have moved the TDE master encryption key in this keystore to another keystore. Then you must reset <code class="codeph">WALLET_ROOT</code> to point to the new location of the keystore.
                     </p>
                     <p>After you configure the software keystore location using the <code class="codeph">WALLET_ROOT</code> parameter, you can log in to the database instance to create and open the keystore, and then set the TDE master encryption key. After you complete these steps, you can begin to encrypt data.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="A software keystore is a container for the master encryption key, and it resides in the software file system.">Configuring a Software Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-82EAFC96-5B0E-4BA6-B748-14385D04E002" name="GUID-82EAFC96-5B0E-4BA6-B748-14385D04E002"></a><h4 id="ASOAG-GUID-82EAFC96-5B0E-4BA6-B748-14385D04E002" class="sect4">Step 1: Configure the Software Keystore Location and Type</h4>
                  <div>
                     <p>You must configure the keystore location and type by setting <code class="codeph">WALLET_ROOT</code> in <code class="codeph">init.ora</code> and <code class="codeph">TDE_CONFIGURATION</code> in the database instance.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the server where the Oracle database resides.</span></li>
                        <li class="stepexpand"><span>If necessary, create a wallet directory. </span><div>Typically, the wallet directory is located in the <code class="codeph">$ORACLE_BASE/admin/<span class="codeinlineitalic">db_unique_name</span></code> directory, and it is named <code class="codeph">wallet</code>. Preferably, this directory should be empty.
                           </div>
                        </li>
                        <li class="stepexpand"><span>Edit the <code class="codeph">init.ora</code> initialization file for the database instance to include the <code class="codeph">WALLET_ROOT</code> static initialization parameter for the wallet directory.</span><div>By default, the <code class="codeph">init.ora</code> file is located in the <code class="codeph">$ORACLE_HOME/dbs</code> directory. 
                           </div>
                           <div>For example, for a database instance named <code class="codeph">orcl</code>: <pre class="oac_no_warn" dir="ltr">WALLET_ROOT=$ORACLE_BASE/admin/orcl/wallet</pre></div>
                        </li>
                        <li class="stepexpand"><span>Log in to the database instance as a user who has been granted the <code class="codeph">SYSDBA</code> administrative privilege. </span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba
Enter password: <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Set the <code class="codeph">TDE_CONFIGURATION</code> dynamic initialization parameter to specify the keystore type. </span><div>For example: <pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=<span class="italic">keystore_type</span>" SCOPE=<span class="italic">scope_type</span> ;</pre><p>In this specification:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">keystore_type</span></code> must be set to <code class="codeph">FILE</code> to configure a TDE keystore.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">scope_type</span></code> sets the type of scope (for example, <code class="codeph">both</code>, <code class="codeph">memory</code>, or <code class="codeph">spfile</code>.
                                    </p>
                                 </li>
                              </ul>
                              <p>For example, to configure a TDE keystore if the parameter file (<code class="codeph">pfile</code>) is in use, set <code class="codeph">scope</code> to <code class="codeph">memory</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=FILE" scope=memory;</pre><p>To configure a TDE keystore if the server parameter file (<code class="codeph">spfile</code>) is in use, set <code class="codeph">scope</code> to <code class="codeph">both</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=FILE" scope=both;</pre></div>
                        </li>
                        <li class="stepexpand"><span>Restart the database.</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE
STARTUP</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="A software keystore is a container for the master encryption key, and it resides in the software file system.">Configuring a Software Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10282"></a><div class="props_rev_3"><a id="GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1" name="GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1"></a><h4 id="ASOAG-GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1" class="sect4">Step 2: Create the Software Keystore</h4>
                  <div>
                     <p>After you have specified a directory location for the software keystore, you can create the keystore.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-5DAB02E7-CEE2-4C06-B2E0-6070F7BF8BDE">About Creating Software Keystores</a><br>There are three different types of software keystores.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-0AB76778-7D98-4C23-B848-C00BD05DFEFE">Creating a Password-Protected Software Keystore</a><br>A password-protected software keystore requires a user password, which is used to protect the keys and credentials stored in the keystore.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-98BA94DA-571B-429C-8E7A-B6A1020E9420">Creating an Auto-Login or a Local Auto-Login Software Keystore</a><br>As an alternative to password-protected keystores, you can create either an auto-login or local auto-login software keystore.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="A software keystore is a container for the master encryption key, and it resides in the software file system.">Configuring a Software Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10501"></a><div class="props_rev_3"><a id="GUID-5DAB02E7-CEE2-4C06-B2E0-6070F7BF8BDE" name="GUID-5DAB02E7-CEE2-4C06-B2E0-6070F7BF8BDE"></a><h5 id="ASOAG-GUID-5DAB02E7-CEE2-4C06-B2E0-6070F7BF8BDE" class="sect5">About Creating Software Keystores</h5>
                     <div>
                        <p>There are three different types of software keystores.</p>
                        <p>You can create password-protected software keystores, auto-login software keystores, and local auto-login software keystores. </p>
                        <p>Be aware that executing the query <code class="codeph">SELECT * FROM V$ENCRYPTION_WALLET</code> will automatically open an auto-login software keystore. For example, suppose you have a password-protected keystore and an auto-login keystore. If the password-protected keystore is open and you close the password-protected keystore and then query the <code class="codeph">V$ENCRYPTION_WALLET</code> view, then the output will indicate that a keystore is open. However, this is because <code class="codeph">V$ENCRYPTION_WALLET</code> opened up the auto-login software keystore and then displayed the status of the auto-login keystore.
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="introduction-to-transparent-data-encryption.html#GUID-4B020933-2A30-4ED1-AE58-F8F6BD26A224" title="Oracle Database supports both software keystores and hardware keystores.">Types of Keystores</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1" title="After you have specified a directory location for the software keystore, you can create the keystore.">Step 2: Create the Software Keystore</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10283"></a><div class="props_rev_3"><a id="GUID-0AB76778-7D98-4C23-B848-C00BD05DFEFE" name="GUID-0AB76778-7D98-4C23-B848-C00BD05DFEFE"></a><h5 id="ASOAG-GUID-0AB76778-7D98-4C23-B848-C00BD05DFEFE" class="sect5">Creating a Password-Protected Software Keystore</h5>
                     <div>
                        <p>A password-protected software keystore requires a user password, which is used to protect the keys and credentials stored in the keystore.</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre><p>If SQL*Plus is already open and you had modified the <code class="codeph">init.ora</code> file to set the <code class="codeph">WALLET_ROOT</code> parameter during this time, then reconnect to SQL*Plus. The database session must be changed before the <code class="codeph">init.ora</code> changes can take effect.
                                 </p>
                              </li>
                              <li>
                                 <p>Create the keystore by using the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEYSTORE '<span class="italic">keystore_location</span>' 
IDENTIFIED BY <span class="italic">software_keystore_password</span>;
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore_location</code></span> is the path to the keystore directory location of the password-protected keystore for which you want to create the auto-login keystore (for example, <code class="codeph">/etc/ORACLE/WALLETS/orcl</code>). If the path that is set by the <code class="codeph">WALLET_ROOT</code> parameter is the path that you want to use, then you can omit the <span class="italic"><code class="codeph">keystore_location</code></span> setting. 
                                       </p>
                                       <p>If you specify the <span class="italic"><code class="codeph">keystore_location</code></span>, then enclose it in single quotation marks (<code class="codeph">' '</code>). To find this location, you can query the <code class="codeph">WRL_PARAMETER</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view. (If the keystore was not created in the default location, then the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view is <code class="codeph">NOT_AVAILABLE</code>.) If <code class="codeph">WALLET_ROOT</code> is set and you want to use the directory that <code class="codeph">WALLET_ROOT</code> points to, then you can omit the <span class="italic"><code class="codeph">keystore_location</code></span> setting.
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">software_keystore_password</code></span> is the password of the keystore that you, the security administrator, creates. 
                                       </p>
                                    </li>
                                 </ul>
                                 <p>For example, to create the keystore in the <code class="codeph">/etc/ORACLE/WALLETS/orcl</code> directory:
                                 </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEYSTORE <code class="codeph">'/etc/ORACLE/WALLETS/orcl</code>' IDENTIFIED BY <span class="italic">password</span>;

keystore altered.
</pre><p>After you run this statement, the <code class="codeph">ewallet.p12</code> file, which is the keystore, appears in the keystore location. 
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1" title="After you have specified a directory location for the software keystore, you can create the keystore.">Step 2: Create the Software Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10284"></a><div class="props_rev_3"><a id="GUID-98BA94DA-571B-429C-8E7A-B6A1020E9420" name="GUID-98BA94DA-571B-429C-8E7A-B6A1020E9420"></a><h5 id="ASOAG-GUID-98BA94DA-571B-429C-8E7A-B6A1020E9420" class="sect5">Creating an Auto-Login or a Local Auto-Login Software Keystore</h5>
                     <div>
                        <p>As an alternative to password-protected keystores, you can create either an auto-login or local auto-login software keystore.</p>
                        <div class="section">
                           <p>Both of these keystores have system-generated passwords. They are also PKCS#12-based files. The auto-login software keystore can be opened from different computers from the computer where this keystore resides, but the local auto-login software keystore can only be opened from the computer on which it was created. Both the auto-login and local auto-login keystores are created from the password-protected software keystores.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre><p>If SQL*Plus is already open and you had modified the <code class="codeph">init.ora</code> file to set the <code class="codeph">WALLET_ROOT</code> parameter during this time, then reconnect to SQL*Plus. The database session must be changed before the <code class="codeph">init.ora</code> changes can take effect.
                                 </p>
                              </li>
                              <li>
                                 <p>Create a password-protected software keystore.</p>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEYSTORE '/etc/ORACLE/WALLETS/orcl' 
IDENTIFIED BY <span class="italic">keystore_password</span>;</pre></li>
                              <li>
                                 <p>Create the auto-login or local auto-login keystore by using the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE [LOCAL] AUTO_LOGIN KEYSTORE 
FROM KEYSTORE '<span class="italic">keystore_location</span>' 
IDENTIFIED BY <span class="italic">software_keystore_password</span>;
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">LOCAL</code> enables you to create a local auto-login software keystore. Otherwise, omit this clause if you want the keystore to be accessible by other computers.
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore_location</code></span> is the path to the directory location of the password-protected keystore for which you want to create the auto-login keystore (for example, <code class="codeph">/etc/ORACLE/WALLETS/orcl</code>). Enclose this setting in single quotation marks (<code class="codeph">'&nbsp;'</code>). To find this location, query the <code class="codeph">WRL_PARAMETER</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">software_keystore_password</code></span> is the password-protected keystore for which you want to create the auto-login keystore. 
                                       </p>
                                    </li>
                                 </ul>
                                 <p>For example, to create an auto-login software keystore of the password-protected keystore that is located in the<code class="codeph">/etc/ORACLE/WALLETS/orcl</code> directory:
                                 </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE AUTO_LOGIN KEYSTORE <code class="codeph">
FROM KEYSTORE '/etc/ORACLE/WALLETS/orcl</code>' 
IDENTIFIED BY <span class="italic">password</span>;

keystore altered.
</pre><p>After you run this statement, the <code class="codeph">cwallet.sso</code> file appears in the keystore location. The <code class="codeph">ewallet.p12</code> file is the password-protected wallet. 
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>Follow these guidelines:</p>
                           <ul style="list-style-type: disc;" id="GUID-98BA94DA-571B-429C-8E7A-B6A1020E9420__UL_NRN_WRW_XFB">
                              <li>Do not remove the <code class="codeph">PKCS#12</code> wallet (<code class="codeph">ewallet.p12</code> file) after you create the auto-login keystore (<code class="codeph">.sso</code> file). You must have the <code class="codeph">PKCS#12</code> wallet to regenerate or rekey the TDE master encryption key in the future. By default, this file is located in the <code class="codeph">admin/<span class="codeinlineitalic">db_unique_name</span>/wallet</code> directory of the <code class="codeph">$ORACLE_BASE</code> or  <code class="codeph">$ORACLE_HOME</code> location.
                              </li>
                              <li>Remember that Transparent Data Encryption uses an auto login keystore only if it is available at the correct location (<code class="codeph">WALLET_ROOT</code>, <code class="codeph">WALLET_LOCATION</code>, <code class="codeph">ENCRYPTION_WALLET_LOCATION</code>, or the default keystore location), and the SQL statement to open an encrypted keystore has not already been executed. Note that auto-login keystores are encrypted, because they have system-generated passwords. If you have the <code class="codeph">ENCRYPTION_WALLET_LOCATION</code> parameter set, then be aware this parameter is deprecated. Oracle recommends that you use the <code class="codeph">WALLET_ROOT</code> static initialization parameter and <code class="codeph">TDE_CONFIGURATION</code> dynamic initialization parameter instead. 
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-0AB76778-7D98-4C23-B848-C00BD05DFEFE" title="A password-protected software keystore requires a user password, which is used to protect the keys and credentials stored in the keystore.">Creating a Password-Protected Software Keystore</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1" title="After you have specified a directory location for the software keystore, you can create the keystore.">Step 2: Create the Software Keystore</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10285"></a><div class="props_rev_3"><a id="GUID-37296947-18DB-4CFA-A112-794A55E942E2" name="GUID-37296947-18DB-4CFA-A112-794A55E942E2"></a><h4 id="ASOAG-GUID-37296947-18DB-4CFA-A112-794A55E942E2" class="sect4">Step 3: Open the Software Keystore</h4>
                  <div>
                     <p>Depending on the type of keystore you create, you must manually open the keystore before you can use it. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F3652F6F-B1B8-485A-BCBE-32C0875E93E5">About Opening Software Keystores</a><br>A password-protected software keystore must be open before any TDE master encryption keys can be created or accessed in the keystore. 
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-A9C23E31-CF57-477A-9E85-856DD411718D">Opening a Software Keystore</a><br>To open a software keystore, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEYSTORE OPEN</code> clause. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="A software keystore is a container for the master encryption key, and it resides in the software file system.">Configuring a Software Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10286"></a><div class="props_rev_3"><a id="GUID-F3652F6F-B1B8-485A-BCBE-32C0875E93E5" name="GUID-F3652F6F-B1B8-485A-BCBE-32C0875E93E5"></a><h5 id="ASOAG-GUID-F3652F6F-B1B8-485A-BCBE-32C0875E93E5" class="sect5">About Opening Software Keystores</h5>
                     <div>
                        <p>A password-protected software keystore must be open before any TDE master encryption keys can be created or accessed in the keystore. </p>
                        <p>Many Transparent Data Encryption operations require the software keystore to be open. There are two ways that you can open the software keystore:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Manually open the keystore by issuing the <code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN</code> statement. Afterward, you can perform the operation. 
                              </p>
                           </li>
                           <li>
                              <p>Include the <code class="codeph">FORCE KEYSTORE</code> clause in the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement that is used to perform the operation. <code class="codeph">FORCE KEYSTORE</code> temporarily opens the keystore for the duration of the operation, and when the operation completes, the keystore is closed again. <code class="codeph">FORCE KEYSTORE</code> is useful for situations when the database is heavily loaded. In this scenario, because of concurrent access to encrypted objects in the database, the auto-login keystore continues to open immediately after it has been closed but before a user has had chance to open the password-based keystore.
                              </p>
                           </li>
                        </ul>
                        <p>Keystores can be in the following states: open, closed, open but with no master encryption key, open but with an unknown master encryption key, undefined, or not available (that is, not present in the <code class="codeph">WALLET_ROOT</code> location).
                        </p>
                        <p>After you manually open a keystore, it remains open until you manually close it. Each time you restart a database instance, you must manually open the password keystore to reenable encryption and decryption operations.</p>
                        <p>You can check the status of whether a keystore is open or not by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view. 
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-AB8F896D-A068-47AC-AA26-DDA52BFE5699" title="Many ADMINISTER KEY MANAGEMENT operations require access to a keystore password, for both software and hardware keystores.">Performing Operations That Require a Keystore Password</a></li>
                              <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-75855CB2-3FBC-41E4-BC89-8EA2078E633E" title="You should be aware of how keystore open and close operations work in united mode.">How Keystore Open and Close Operations Work in United Mode</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="Depending on the type of keystore you create, you must manually open the keystore before you can use it.">Step 3: Open the Software Keystore</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10287"></a><div class="props_rev_3"><a id="GUID-A9C23E31-CF57-477A-9E85-856DD411718D" name="GUID-A9C23E31-CF57-477A-9E85-856DD411718D"></a><h5 id="ASOAG-GUID-A9C23E31-CF57-477A-9E85-856DD411718D" class="sect5">Opening a Software Keystore</h5>
                     <div>
                        <p>To open a software keystore, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEYSTORE OPEN</code> clause. 
                        </p>
                        <ol>
                           <li class="stepexpand"><span>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege. </span><div>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Run the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement to open the keystore.</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
IDENTIFIED BY <span class="italic">password</span>;
keystore altered.</pre><p>To switch over to opening the password-protected software keystore when an auto-login keystore is configured and is currently open, specify the <code class="codeph">FORCE KEYSTORE</code> clause as follows. 
                                 </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
FORCE KEYSTORE 
IDENTIFIED BY EXTERNAL STORE;
keystore altered.</pre><p>Here, the <code class="codeph">IDENTIFIED BY EXTERNAL STORE</code> clause is included in the statement because the keystore credentials exist in an external store. This enables the&nbsp;password-protected keystore to be opened without specifying the keystore&nbsp;password within the statement itself.
                                 </p>
                                 <p>If the <code class="codeph">WALLET_ROOT</code> parameter has been set, then Oracle Database finds the external store by searching in this path: <code class="codeph"><span class="codeinlineitalic">WALLET_ROOT</span>/<span class="codeinlineitalic">PDB_GUID</span>/tde_seps</code>. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Confirm that the keystore is open.</span><div><pre class="oac_no_warn" dir="ltr">SELECT STATUS FROM V$ENCRYPTION_WALLET;</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>Note that if the keystore is open but you have not created a TDE master encryption key yet, the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view reminds you with an <code class="codeph">OPEN_NO_MASTER_KEY</code> status.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="Depending on the type of keystore you create, you must manually open the keystore before you can use it.">Step 3: Open the Software Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10288"></a><div class="props_rev_3"><a id="GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8" name="GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8"></a><h4 id="ASOAG-GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8" class="sect4">Step 4: Set the TDE Master Encryption Key in the Software Keystore</h4>
                  <div>
                     <p>Once the keystore is open, you can set a TDE master encryption key for it.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-C44968C5-9B77-4D19-82F4-5705268BF429">About Setting the Software Keystore TDE Master Encryption Key</a><br>The TDE master encryption key is stored in the keystore.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-9C72F219-B6DC-4F57-B5FC-40F1F4C1EA21">Setting the TDE Master Encryption Key in the Software Keystore</a><br> To set the TDE master encryption key in a software keystore, use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEY</code> clause. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="A software keystore is a container for the master encryption key, and it resides in the software file system.">Configuring a Software Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10289"></a><div class="props_rev_3"><a id="GUID-C44968C5-9B77-4D19-82F4-5705268BF429" name="GUID-C44968C5-9B77-4D19-82F4-5705268BF429"></a><h5 id="ASOAG-GUID-C44968C5-9B77-4D19-82F4-5705268BF429" class="sect5">About Setting the Software Keystore TDE Master Encryption Key</h5>
                     <div>
                        <p>The TDE master encryption key is stored in the keystore.</p>
                        <p>The TDE master encryption key protects the <a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE table key</span></a>s and <a href="glossary.html#GUID-5101B9BB-386F-4826-B639-2BE246A66E90"><span class="xrefglossterm">tablespace encryption key</span></a>s. By default, the TDE master encryption key is a key that TDE generates. You can find if a keystore has no TDE master encryption key set or an unknown TDE master encryption key by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view.
                        </p>
                        <p>You can manually create a master encryption ID outside the database, which is useful for Cloud environments. You also can create TDE master encryption keys for use later on, and then manually activate them.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-270396F9-B023-4F57-8640-D19445F36CF8" title="You can create a user-defined TDE master encryption key outside the database by generating a TDE master encryption key ID.">Creating User-Defined TDE Master Encryption Keys</a></li>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55" title="You can create a TDE master encryption key that can be activated at a later date.">Creating TDE Master Encryption Keys for Later Use</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8" title="Once the keystore is open, you can set a TDE master encryption key for it.">Step 4: Set the TDE Master Encryption Key in the Software Keystore</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10290"></a><div class="props_rev_3"><a id="GUID-9C72F219-B6DC-4F57-B5FC-40F1F4C1EA21" name="GUID-9C72F219-B6DC-4F57-B5FC-40F1F4C1EA21"></a><h5 id="ASOAG-GUID-9C72F219-B6DC-4F57-B5FC-40F1F4C1EA21" class="sect5">Setting the TDE Master Encryption Key in the Software Keystore</h5>
                     <div>
                        <p> To set the TDE master encryption key in a software keystore, use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEY</code> clause. 
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>Ensure that the database is open in <code class="codeph">READ WRITE</code> mode. 
                                 </p>
                                 <p>You can set the TDE master encryption key if <code class="codeph">OPEN_MODE</code> is set to <code class="codeph">READ WRITE</code>. To find the status, query the <code class="codeph">OPEN_MODE</code> column of the <code class="codeph">V$DATABASE</code> dynamic view. (If you cannot access this view, then connect as <code class="codeph">SYSDBA</code> and try the query again. In order to connect as <code class="codeph">SYSKM</code> for this type of query, you must create a password file for it.) 
                                 </p>
                              </li>
                              <li>
                                 <p>Set the TDE master encryption key in the software by using the following syntax: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEY 
[USING TAG '<span class="italic">tag</span>'] 
[FORCE KEYSTORE] 
IDENTIFIED BY [EXTERNAL STORE] | <span class="italic">keystore_password</span> 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification: </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span> is the associated attributes and information that you define. Enclose this setting in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> should be included if the keystore is closed. This automatically opens the keystore before setting the TDE master encryption key. The <code class="codeph">FORCE KEYSTORE</code> clause also switches over&nbsp;to opening the password-protected software keystore when an auto-login keystore is configured and is currently open.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code> specifies the keystore password. Alternatively, if the keystore password is in an external store, you can use the <code class="codeph">IDENTIFIED BY EXTERNAL STORE</code> clause.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code> creates a backup of the keystore. You must use this option for password-protected keystores. Optionally, you can use the <code class="codeph">USING</code> clause to add a brief description of the backup. Enclose this description in single quotation marks (<code class="codeph">'&nbsp;'</code>). This identifier is appended to the named keystore file (for example, <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">time_stamp</code></span><code class="codeph">_emp_key_backup.p12</code>, with <code class="codeph">emp_key_backup</code> being the backup identifier). Follow the file naming conventions that your operating system uses. 
                                       </p>
                                    </li>
                                 </ul>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEY 
FORCE KEYSTORE
IDENTIFIED BY <span class="italic">keystore_password</span> 
WITH BACKUP USING 'emp_key_backup';

keystore altered.</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8" title="Once the keystore is open, you can set a TDE master encryption key for it.">Step 4: Set the TDE Master Encryption Key in the Software Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10291"></a><div class="props_rev_3"><a id="GUID-9D157063-2C48-40AC-8697-0FD1A866F038" name="GUID-9D157063-2C48-40AC-8697-0FD1A866F038"></a><h4 id="ASOAG-GUID-9D157063-2C48-40AC-8697-0FD1A866F038" class="sect4">Step 5: Encrypt Your Data</h4>
                  <div>
                     <p>Now that you have completed the keystore configuration, you can begin to encrypt data in the PDB.</p>
                     <div class="section">
                        <p>You can encrypt data in individual table columns or in entire tablespaces or databases. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="You can use Transparent Data Encryption to encrypt individual columns in database tables.">Encrypting Columns in Tables</a></li>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="You can perform encryption operations on both offline and online tablespaces and databases.">Encryption Conversions for Tablespaces and Databases</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="A software keystore is a container for the master encryption key, and it resides in the software file system.">Configuring a Software Keystore</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ASOAG10292"></a><div class="props_rev_3"><a id="GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" name="GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14"></a><h3 id="ASOAG-GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" class="sect3">Configuring a Hardware Keystore</h3>
               <div>
                  <p>A hardware keystore resides in a hardware security module (HSM), which is designed to store encryption keys.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-B2A6A003-BA45-4740-8BA8-308307CACC33">About Configuring a Hardware (External) Keystore</a><br>A hardware keystore, also called an external keystore, is a separate server or device that provides security storage for encryption keys. 
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-3F97FA3A-75D6-47BB-9678-72F34392983C">Step 1: Configure the Hardware Keystore Type</a><br>You can configure the hardware keystore type by setting the <code class="codeph">TDE_CONFIGURATION</code> parameter.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291">Step 2: Configure the Hardware Security Module</a><br>To configure a third-party hardware security module, you must copy the PKCS#11 library to the correct location and follow your vendor's instructions.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC">Step 3: Open the Hardware Keystore</a><br>After you have configured the hardware security module, you must open the hardware keystore before it can be used.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5">Step 4: Set the Hardware Keystore TDE Master Encryption Key</a><br>After you have opened the hardware keystore, you are ready to set the hardware keystore TDE master encryption key.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-34017F99-A5AC-46BF-828A-1EBDF51A796D">Step 5: Encrypt Your Data</a><br>Now that you have completed the configuration for a hardware keystore or for an Oracle Key Vault keystore, you can begin to encrypt data. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces.">Configuring Transparent Data Encryption</a></p>
                     </div>
                  </div>
               </div>
               <a id="ASOAG10293"></a><div class="props_rev_3"><a id="GUID-B2A6A003-BA45-4740-8BA8-308307CACC33" name="GUID-B2A6A003-BA45-4740-8BA8-308307CACC33"></a><h4 id="ASOAG-GUID-B2A6A003-BA45-4740-8BA8-308307CACC33" class="sect4">About Configuring a Hardware (External) Keystore</h4>
                  <div>
                     <p>A hardware keystore, also called an external keystore, is a separate server or device that provides security storage for encryption keys. </p>
                     <p>External keystores are external to an Oracle database. Oracle Database can interface with external keystores but cannot manipulate them outside of the Oracle interface. The Oracle database can request the external keystore to create a key but it cannot define how this key is stored in an external database. (Conversely, for software keystores that are created using TDE, Oracle Database has full control: that is, you can use SQL statements to manipulate this type of keystore.) Examples of external keystores are hardware security modules or Oracle Key Vault keystores. External keystores among multiple databases can be managed centrally, such as with Oracle Key Vault. </p>
                     <p>To configure a keystore for a hardware security module (hardware keystore), you must first include the keystore type in the <code class="codeph">TDE_CONFIGURATION</code> parameter setting, configure and open the hardware keystore, and then set the hardware keystore TDE master encryption key. In short, there is one hardware keystore per database, and the database locates this keystore by checking the keystore type that you define in the <code class="codeph">TDE_CONFIGURATION</code> parameter. 
                     </p>
                     <p>How you specify the <code class="codeph">IDENTIFIED BY</code> clause when you run the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement depends on the type of hardware keystore. In most cases, and in the examples throughout this guide, you would use the following syntax for a hardware security module (<code class="codeph">HSM</code>) or Cloud Key Management Service (<code class="codeph">KMS</code>) keystore: 
                     </p><pre class="oac_no_warn" dir="ltr">IDENTIFIED BY "<span class="italic">user_name</span>:<span class="italic">password</span>"</pre><p>However, depending on your site’s configuration of HSMs, the syntax for the credential may be <code class="codeph">“<span class="codeinlineitalic">password</span>:<span class="codeinlineitalic">user_name</span>”</code>.
                     </p>
                     <p>For an Oracle Key Vault keystore, you can omit the <code class="codeph"><span class="codeinlineitalic">user_name</span></code> and colon, but you must include the quotation marks:
                     </p><pre class="oac_no_warn" dir="ltr">IDENTIFIED BY "<span class="italic">password</span>"</pre><p>After you configure the hardware keystore, you are ready to begin encrypting your data.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="A hardware keystore resides in a hardware security module (HSM), which is designed to store encryption keys.">Configuring a Hardware Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10294"></a><div class="props_rev_3"><a id="GUID-3F97FA3A-75D6-47BB-9678-72F34392983C" name="GUID-3F97FA3A-75D6-47BB-9678-72F34392983C"></a><h4 id="ASOAG-GUID-3F97FA3A-75D6-47BB-9678-72F34392983C" class="sect4">Step 1: Configure the Hardware Keystore Type</h4>
                  <div>
                     <p>You can configure the hardware keystore type by setting the <code class="codeph">TDE_CONFIGURATION</code> parameter.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the database instance as a user who has been granted the <code class="codeph">SYSDBA</code> administrative privilege. </span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba
Enter password: <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Set the <code class="codeph">TDE_CONFIGURATION</code> dynamic initialization parameter to specify the keystore type by using the following syntax: </span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=<span class="italic">keystore_type</span>" SCOPE=<span class="italic">scope_type</span> ;</pre><p>In this specification:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">keystore_type</span></code> can be one of the following types: 
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">HSM</code> to configure a hardware security module (HSM) keystore
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">OKV</code> to configure an Oracle Key Vault keystore
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">scope_type</span></code> sets the type of scope (for example, <code class="codeph">both</code>, <code class="codeph">memory</code>, or <code class="codeph">spfile</code>.
                                    </p>
                                 </li>
                              </ul>
                              <p>For example, to configure an HSM keystore if the parameter file (<code class="codeph">pfile</code>) is in use, set <code class="codeph">scope</code> to <code class="codeph">memory</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=HSM" 
scope=memory;</pre><p>To configure an Oracle Key Vault keystore if the server parameter file (<code class="codeph">spfile</code>) is in use, set <code class="codeph">scope</code> to <code class="codeph">both</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=OKV" 
scope=both;</pre></div>
                        </li>
                        <li class="stepexpand"><span>Restart the database.</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE
STARTUP</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="A hardware keystore resides in a hardware security module (HSM), which is designed to store encryption keys.">Configuring a Hardware Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10295"></a><div class="props_rev_3"><a id="GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291" name="GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291"></a><h4 id="ASOAG-GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291" class="sect4">Step 2: Configure the Hardware Security Module</h4>
                  <div>
                     <p>To configure a third-party hardware security module, you must copy the PKCS#11 library to the correct location and follow your vendor's instructions.</p>
                     <div class="section">If you are using Oracle Key Vault, then you can bypass this section. </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>Copy the PKCS#11 library to its correct path. </p>
                              <p>Your hardware keystore vendor should provide you with an associated PKCS#11 library. Only one PKCS#11 library is supported at a time. If you want to use a hardware keystore from a new vendor, then you must replace the PKCS#11 library from the earlier vendor with the library from the new vendor.</p>
                              <p>Copy this library to the appropriate location to ensure that Oracle Database can find this library:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="bold">UNIX systems:</span> Use the following syntax to copy the library to this directory:
                                    </p><pre class="oac_no_warn" dir="ltr">/opt/oracle/extapi/[32,64]/hsm/{<span class="italic">VENDOR</span>}/{<span class="italic">VERSION</span>}/lib<span class="italic">apiname.</span>so
</pre></li>
                                 <li>
                                    <p><span class="bold">Windows systems:</span> Use the following syntax to copy the library to this directory:
                                    </p><pre class="oac_no_warn" dir="ltr"><span class="italic">%SYSTEM_DRIVE%</span>\oracle\extapi\[32,64]\hsm\{<span class="italic">VENDOR</span>}\{<span class="italic">VERSION</span>}\lib<span class="italic">apiname.</span>dll
</pre></li>
                              </ul>
                              <p>In this specification: </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">[32,64]</code> specifies whether the supplied binary is 32 bits or 64 bits.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">VENDOR</code></span> stands for the name of the vendor supplying the library
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">VERSION</code></span> refers to the version of the library. This should preferably be in the format, <span class="italic"><code class="codeph">number.number.number</code></span></p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">apiname</code></span> requires no special format. However, the <span class="italic"><code class="codeph">apiname</code></span> must be prefixed with the word <code class="codeph">lib</code>, as illustrated in the syntax.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li id="GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291__CIHHFABB">
                              <p>Follow your vendor's instructions to set up the hardware keystore.</p>
                              <p>Use your hardware keystore management interface and the instructions provided by your HSM vendor to set up the hardware keystore. Create the user account and password that must be used by the database to interact with the hardware keystore. This process creates and configures a hardware keystore that communicates with your Oracle database.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="A hardware keystore resides in a hardware security module (HSM), which is designed to store encryption keys.">Configuring a Hardware Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10296"></a><div class="props_rev_3"><a id="GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC" name="GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC"></a><h4 id="ASOAG-GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC" class="sect4">Step 3: Open the Hardware Keystore</h4>
                  <div>
                     <p>After you have configured the hardware security module, you must open the hardware keystore before it can be used.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-CEDB143A-BC7E-43EF-AD41-59BD0ED36421">About Opening Hardware Keystores</a><br>You must open the hardware keystore so that it is accessible to the database before you can perform any encryption or decryption.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B">Opening a Hardware Keystore</a><br>To open a hardware keystore, use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEYSTORE OPEN</code> clause. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="A hardware keystore resides in a hardware security module (HSM), which is designed to store encryption keys.">Configuring a Hardware Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10297"></a><div class="props_rev_3"><a id="GUID-CEDB143A-BC7E-43EF-AD41-59BD0ED36421" name="GUID-CEDB143A-BC7E-43EF-AD41-59BD0ED36421"></a><h5 id="ASOAG-GUID-CEDB143A-BC7E-43EF-AD41-59BD0ED36421" class="sect5">About Opening Hardware Keystores</h5>
                     <div>
                        <p>You must open the hardware keystore so that it is accessible to the database before you can perform any encryption or decryption.</p>
                        <p>If a recovery operation is needed on your database (for example, if the database was not cleanly shut down, and has an encrypted tablespace that needs recovery), then you must open the hardware keystore before you can open the database itself. </p>
                        <p>There are two ways that you can open the hardware keystore:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Manually open the keystore by issuing the <code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN</code> statement. Afterward, you can perform the operation. 
                              </p>
                           </li>
                           <li>
                              <p>Include the <code class="codeph">FORCE KEYSTORE</code> clause in the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement. <code class="codeph">FORCE KEYSTORE</code> temporarily opens the keystore for the duration of the operation, and when the operation completes, the keystore is closed again. <code class="codeph">FORCE KEYSTORE</code> is useful for situations when the database is heavily loaded. In this scenario, because of concurrent access to encrypted objects in the database, the auto-login keystore continues to open immediately after it has been closed but before a user has had a chance to open the password-based keystore. 
                              </p>
                           </li>
                        </ul>
                        <p>To check the status of the keystore, query the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view. Keystores can be in the following states: <code class="codeph">CLOSED</code>, <code class="codeph">NOT_AVAILABLE</code> (that is, not present in the <code class="codeph">WALLET_ROOT</code> location), <code class="codeph">OPEN</code>, <code class="codeph">OPEN_NO_MASTER_KEY</code>, <code class="codeph">OPEN_UNKNOWN_MASTER_KEY_STATUS</code>.
                        </p>
                        <p>Be aware that for hardware keystores, if the database is in the mounted state, then it cannot check if the master key is set because the data dictionary is not available. In this situation, the status will be <code class="codeph">OPEN_UNKNOWN_MASTER_KEY_STATUS</code>.
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-75855CB2-3FBC-41E4-BC89-8EA2078E633E" title="You should be aware of how keystore open and close operations work in united mode.">How Keystore Open and Close Operations Work in United Mode</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC" title="After you have configured the hardware security module, you must open the hardware keystore before it can be used.">Step 3: Open the Hardware Keystore</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10298"></a><div class="props_rev_3"><a id="GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B" name="GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B"></a><h5 id="ASOAG-GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B" class="sect5">Opening a Hardware Keystore</h5>
                     <div>
                        <p>To open a hardware keystore, use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEYSTORE OPEN</code> clause. 
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>Open the hardware keystore by using the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
[FORCE KEYSTORE] 
IDENTIFIED BY "<span class="italic">hardware_keystore_password</span>";
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> enables the keystore operation if the keystore is closed.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph"><span class="codeinlineitalic">hardware_keystore_credentials</span></code> refers to the credentials for either an HSM or an Oracle Key Vault hardware keystore. For an HSM, specify the credentials using this format, enclosed in quotation marks and separating the components with a colon: <code class="codeph">“<span class="codeinlineitalic">user_name</span>:<span class="codeinlineitalic">password</span>”</code>, with <code class="codeph"><span class="codeinlineitalic">user_name</span></code> being the user who created the HSM and password being this user’s password. For Oracle Key Vault, enter only the password of the user who created the keystore. Enclose this password with quotation marks.
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                 </ul>
                                 <p>For example, for an HSM:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
IDENTIFIED BY "psmith:<span class="italic">password</span>";

keystore altered.
</pre></li>
                              <li>
                                 <p>Repeat this procedure each time you restart the database instance. </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC" title="After you have configured the hardware security module, you must open the hardware keystore before it can be used.">Step 3: Open the Hardware Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10299"></a><div class="props_rev_3"><a id="GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" name="GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5"></a><h4 id="ASOAG-GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" class="sect4">Step 4: Set the Hardware Keystore TDE Master Encryption Key</h4>
                  <div>
                     <p>After you have opened the hardware keystore, you are ready to set the hardware keystore TDE master encryption key.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-E3DC7C57-A8F3-41D5-98FB-1DBE6EE10D1E">About Setting the Hardware Keystore TDE Master Encryption Key</a><br>You must create a TDE master encryption key that is stored inside the hardware keystore.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-6781E98E-F59C-420E-AC7E-8CC57D33E706">Setting a New TDE Master Encryption Key</a><br>You should complete this procedure if you have not previously configured a hardware keystore for Transparent Data Encryption. 
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-5CDB2D10-81DE-4C98-9F9C-155C45E31CDB">Migration of a Previously Configured TDE Master Encryption Key</a><br>You must migrate the previously configured TDE master encryption key if you previously configured a software keystore.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="A hardware keystore resides in a hardware security module (HSM), which is designed to store encryption keys.">Configuring a Hardware Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10502"></a><div class="props_rev_3"><a id="GUID-E3DC7C57-A8F3-41D5-98FB-1DBE6EE10D1E" name="GUID-E3DC7C57-A8F3-41D5-98FB-1DBE6EE10D1E"></a><h5 id="ASOAG-GUID-E3DC7C57-A8F3-41D5-98FB-1DBE6EE10D1E" class="sect5">About Setting the Hardware Keystore TDE Master Encryption Key</h5>
                     <div>
                        <p>You must create a TDE master encryption key that is stored inside the hardware keystore.</p>
                        <p>Oracle Database uses the master encryption key to encrypt or decrypt <a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE table key</span></a>s or <a href="glossary.html#GUID-5101B9BB-386F-4826-B639-2BE246A66E90"><span class="xrefglossterm">tablespace encryption key</span></a>s inside the hardware security module. 
                        </p>
                        <p>If you have not previously configured a software keystore for TDE, then you must set the master encryption key. If you have already configured a software keystore for TDE, then you must migrate it to the hardware security module.</p>
                        <p>Along with the current master encryption key, Oracle wallets maintain historical master encryption keys that are generated after every re-key operation that rekeys the master encryption key. These historical master keys help to restore Oracle database backups that were taken previously using one of the historical master encryption keys.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-6781E98E-F59C-420E-AC7E-8CC57D33E706" title="You should complete this procedure if you have not previously configured a hardware keystore for Transparent Data Encryption.">Setting a New TDE Master Encryption Key</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-5CDB2D10-81DE-4C98-9F9C-155C45E31CDB" title="You must migrate the previously configured TDE master encryption key if you previously configured a software keystore.">Migration of a Previously Configured TDE Master Encryption Key</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" title="After you have opened the hardware keystore, you are ready to set the hardware keystore TDE master encryption key.">Step 4: Set the Hardware Keystore TDE Master Encryption Key</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10503"></a><div class="props_rev_3"><a id="GUID-6781E98E-F59C-420E-AC7E-8CC57D33E706" name="GUID-6781E98E-F59C-420E-AC7E-8CC57D33E706"></a><h5 id="ASOAG-GUID-6781E98E-F59C-420E-AC7E-8CC57D33E706" class="sect5">Setting a New TDE Master Encryption Key</h5>
                     <div>
                        <p>You should complete this procedure if you have not previously configured a hardware keystore for Transparent Data Encryption. </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>Ensure that the database is open in <code class="codeph">READ WRITE</code> mode. 
                                 </p>
                                 <p>You can set the master encryption key if <code class="codeph">OPEN_MODE</code> is set to <code class="codeph">READ WRITE</code>. To find the status, for a non-multitenant environment, query the <code class="codeph">OPEN_MODE</code> column of the <code class="codeph">V$DATABASE</code> dynamic view. If you are in a multitenant environment, then run the <code class="codeph">show_pdbs</code> command.
                                 </p>
                              </li>
                              <li>
                                 <p>Set the new master encryption key by using the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEY 
[USING TAG '<span class="italic">tag</span>'] 
[FORCE KEYSTORE] 
IDENTIFIED BY [EXTERNAL STORE | "<span class="italic">hardware_keystore_credentials</span>"];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span> is the associated attributes and information that you define. Enclose this setting in single quotation marks (<code class="codeph">' '</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph"><span class="codeinlineitalic">hardware_keystore_credentials</span></code> refers to the credentials for either an HSM or an Oracle Key Vault hardware keystore. For an HSM, specify the credentials using this format, enclosed in quotation marks and separating the components with a colon: <code class="codeph">“<span class="codeinlineitalic">user_name</span>:<span class="codeinlineitalic">password</span>”</code>, with <code class="codeph"><span class="codeinlineitalic">user_name</span></code> being the user who created the HSM and password being this user’s password. For Oracle Key Vault, enter only the password of the user who created the keystore. Enclose this password with quotation marks.
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                 </ul>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEY
FORCE KEYSTORE 
IDENTIFIED BY "psmith:<span class="italic">password</span>";

keystore altered.</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-8E7F27F9-99A5-4233-BC16-5B0479F947F9" title="A keystore must be opened before you can create a TDE master encryption key for use later on.">Creating a TDE Master Encryption Key for Later Use</a></li>
                              <li><a href="../admin/getting-started-with-database-administration.html#ADMIN11056" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" title="After you have opened the hardware keystore, you are ready to set the hardware keystore TDE master encryption key.">Step 4: Set the Hardware Keystore TDE Master Encryption Key</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10504"></a><div class="props_rev_3"><a id="GUID-5CDB2D10-81DE-4C98-9F9C-155C45E31CDB" name="GUID-5CDB2D10-81DE-4C98-9F9C-155C45E31CDB"></a><h5 id="ASOAG-GUID-5CDB2D10-81DE-4C98-9F9C-155C45E31CDB" class="sect5">Migration of a Previously Configured TDE Master Encryption Key</h5>
                     <div>
                        <p>You must migrate the previously configured TDE master encryption key if you previously configured a software keystore.</p>
                        <p>Tools such as Oracle Data Pump and Oracle Recovery Manager require access to the old software keystore to perform decryption and encryption operations on data exported or backed up using the software keystore. You can migrate from the software to the hardware keystore.</p>
                        <p>Along with the current master encryption key, Oracle keystores maintain historical master encryption keys that are generated after every re-key operation that rotates the master encryption key. These historical master encryption keys help to restore Oracle database backups that were taken previously using one of the historical master encryption keys.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4335220F-49FF-40BC-9EB0-21442608F436" title="You can migrate between password-protected software keystores and hardware keystores.">Migrating Between a Software Password Keystore and a Hardware Keystore</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" title="After you have opened the hardware keystore, you are ready to set the hardware keystore TDE master encryption key.">Step 4: Set the Hardware Keystore TDE Master Encryption Key</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10301"></a><div class="props_rev_3"><a id="GUID-34017F99-A5AC-46BF-828A-1EBDF51A796D" name="GUID-34017F99-A5AC-46BF-828A-1EBDF51A796D"></a><h4 id="ASOAG-GUID-34017F99-A5AC-46BF-828A-1EBDF51A796D" class="sect4">Step 5: Encrypt Your Data</h4>
                  <div>
                     <p>Now that you have completed the configuration for a hardware keystore or for an Oracle Key Vault keystore, you can begin to encrypt data. </p>
                     <div class="section">
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=OKVAG10489" target="_blank"><span><cite>Oracle Key Vault Administrator's Guide</cite></span></a> describes how to configure Oracle Key Vault keystores.
                        </p>
                        <p>You can encrypt individual columns in a table or entire tablespaces. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="You can use Transparent Data Encryption to encrypt individual columns in database tables.">Encrypting Columns in Tables</a></li>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="You can perform encryption operations on both offline and online tablespaces and databases.">Encryption Conversions for Tablespaces and Databases</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="A hardware keystore resides in a hardware security module (HSM), which is designed to store encryption keys.">Configuring a Hardware Keystore</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ASOAG10143"></a><div class="props_rev_3"><a id="GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" name="GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE"></a><h3 id="ASOAG-GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" class="sect3">Encrypting Columns in Tables</h3>
               <div>
                  <p>You can use Transparent Data Encryption to encrypt individual columns in database tables.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-86FCB830-28B8-4F7C-97B6-EB80B20D8752">About Encrypting Columns in Tables</a><br>You can encrypt individual columns in tables. 
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6">Data Types That Can Be Encrypted with TDE Column Encryption</a><br>Oracle Database supports a specific set of data types that can be used with TDE column encryption.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-9A78E72B-D9D9-4BA2-BFEF-11C0060B6F91">Restrictions on Using TDE Column Encryption</a><br>TDE column encryption is performed at the SQL layer. Oracle Database utilities that bypass the SQL layer cannot use TDE column encryption services. 
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA">Creating Tables with Encrypted Columns</a><br>Oracle Database provides a selection of different algorithms that you can use to define the encryption used in encrypted columns.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0">Encrypting Columns in Existing Tables</a><br>You can encrypt columns in existing tables. As with new tables, you have a choice of different algorithms to use to definite the encryption.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-9E4EC0E4-A395-4C79-B841-CB13BDE41B4C">Creating an Index on an Encrypted Column</a><br>You can create an index on an encrypted column.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-3A298444-09BB-409E-94E5-1FA5FFA89A1D">Adding Salt to an Encrypted Column</a><br>Salt, which is a random string added to data before encryption, is a way to strengthen the security of encrypted data. . 
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F1C34179-BE14-4966-82B7-97904AB4CF44">Removing Salt from an Encrypted Column</a><br>You can use the <span class="apiname" translate="no">ALTER TABLE</span> SQL statement to remove salt from an encrypted column.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-2931A16D-84E8-4A42-8D01-662FD693A711">Changing the Encryption Key or Algorithm for Tables with Encrypted Columns</a><br>You can use the <code class="codeph">ALTER TABLE</code> SQL statement to change the encryption key or algorithm used in encrypted columns.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces.">Configuring Transparent Data Encryption</a></p>
                     </div>
                  </div>
               </div>
               <a id="ASOAG10302"></a><div class="props_rev_3"><a id="GUID-86FCB830-28B8-4F7C-97B6-EB80B20D8752" name="GUID-86FCB830-28B8-4F7C-97B6-EB80B20D8752"></a><h4 id="ASOAG-GUID-86FCB830-28B8-4F7C-97B6-EB80B20D8752" class="sect4">About Encrypting Columns in Tables</h4>
                  <div>
                     <p>You can encrypt individual columns in tables. </p>
                     <p>Whether you choose to encrypt individual columns or entire tablespaces depends on the data types that the table has. There are also several features that do not support TDE column encryption.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6" title="Oracle Database supports a specific set of data types that can be used with TDE column encryption.">Data Types That Can Be Encrypted with TDE Column Encryption</a></li>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-9A78E72B-D9D9-4BA2-BFEF-11C0060B6F91" title="TDE column encryption is performed at the SQL layer. Oracle Database utilities that bypass the SQL layer cannot use TDE column encryption services.">Restrictions on Using TDE Column Encryption</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="You can use Transparent Data Encryption to encrypt individual columns in database tables.">Encrypting Columns in Tables</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10158"></a><a id="ASOAG9579"></a><div class="props_rev_3"><a id="GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6" name="GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6"></a><h4 id="ASOAG-GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6" class="sect4">Data Types That Can Be Encrypted with TDE Column Encryption</h4>
                  <div>
                     <p>Oracle Database supports a specific set of data types that can be used with TDE column encryption.</p>
                     <div class="section">
                        <p>You can encrypt data columns that use a variety of different data types.</p>
                        <p>Supported data types are as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">BINARY_DOUBLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">BINARY_FLOAT</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">CHAR</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DATE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">INTERVAL DAY TO SECOND</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">INTERVAL YEAR TO MONTH</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NCHAR</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NUMBER</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NVARCHAR2</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">RAW</code> (legacy or extended)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">TIMESTAMP</code> (includes <code class="codeph">TIMESTAMP WITH TIME ZONE</code> and <code class="codeph">TIMESTAMP WITH LOCAL TIME ZONE</code>)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">VARCHAR2</code> (legacy or extended)
                              </p>
                           </li>
                        </ul>
                        <p>If you want to encrypt large binary objects (LOBs), then you can use Oracle SecureFiles. Oracle SecureFiles enables you to store LOB data securely. To encrypt a LOB using SecureFiles, you use the <code class="codeph">CREATE TABLE</code> or <code class="codeph">ALTER TABLE</code> statements. 
                        </p>
                        <p>You cannot encrypt a column if the encrypted column size is greater than the size allowed by the data type of the column. </p>
                        <p><a href="configuring-transparent-data-encryption.html#GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6__CJAIDCFJ" title="Data types and sizes">Table 3-1</a> shows the maximum allowable sizes for various data types.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6__CJAIDCFJ">
                        <p class="titleintable">Table 3-1 Maximum Allowable Size for Data Types</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Maximum Allowable Size for Data Types" summary="Data types and sizes" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d6228e4404">Data Type</th>
                                 <th align="left" valign="bottom" width="69%" id="d6228e4407">Maximum Size</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4412" headers="d6228e4404 ">
                                    <p><code class="codeph">CHAR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4412 d6228e4407 ">
                                    <p>1932 bytes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4420" headers="d6228e4404 ">
                                    <p><code class="codeph">VARCHAR2</code> (legacy)
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4420 d6228e4407 ">
                                    <p>3932 bytes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4429" headers="d6228e4404 ">
                                    <p><code class="codeph">VARCHAR2</code> (extended)
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4429 d6228e4407 ">
                                    <p>32,699 bytes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4438" headers="d6228e4404 ">
                                    <p><code class="codeph">NVARCHAR2</code> (legacy)
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4438 d6228e4407 ">
                                    <p>1966 bytes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4447" headers="d6228e4404 ">
                                    <p><code class="codeph">NVARCHAR2</code> (extended)
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4447 d6228e4407 ">
                                    <p>16,315 bytes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4456" headers="d6228e4404 ">
                                    <p><code class="codeph">NCHAR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4456 d6228e4407 ">
                                    <p>966 bytes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4464" headers="d6228e4404 ">
                                    <p><code class="codeph">RAW</code> (extended)
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4464 d6228e4407 ">
                                    <p>32,699 bytes</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6__GUID-3B5429F4-360E-415D-8E11-19A5B8AC079B">
                           <p class="notep1">Note:</p>
                           <p>TDE tablespace encryption does not have these data type restrictions.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-EA4F9C84-0BE8-44AF-8638-3B7EFE4CA92C" title="You should be aware of restrictions on using Transparent Data Encryption when you encrypt a tablespace.">Restrictions on Using Transparent Data Encryption Tablespace Encryption</a></li>
                           <li><a href="../adlob/using-oracle-LOBs-storage.html#ADLOB-GUID-36592CEE-0C08-46A4-8218-D6CB1EB9EA12" target="_blank"><span><cite>Oracle Database SecureFiles and Large Objects Developer's Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="You can use Transparent Data Encryption to encrypt individual columns in database tables.">Encrypting Columns in Tables</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG9518"></a><div class="props_rev_3"><a id="GUID-9A78E72B-D9D9-4BA2-BFEF-11C0060B6F91" name="GUID-9A78E72B-D9D9-4BA2-BFEF-11C0060B6F91"></a><h4 id="ASOAG-GUID-9A78E72B-D9D9-4BA2-BFEF-11C0060B6F91" class="sect4">Restrictions on Using TDE Column Encryption</h4>
                  <div>
                     <p>TDE column encryption is performed at the SQL layer. Oracle Database utilities that bypass the SQL layer cannot use TDE column encryption services. </p>
                     <p>Do not use TDE column encryption with the following database features: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Index types other than B-tree</p>
                        </li>
                        <li>
                           <p>Range scan search through an index</p>
                        </li>
                        <li>
                           <p>Synchronous change data capture</p>
                        </li>
                        <li>
                           <p>Transportable tablespaces</p>
                        </li>
                        <li>
                           <p>Columns that have been created as identity columns</p>
                        </li>
                     </ul>
                     <p>In addition, you cannot use TDE column encryption to encrypt columns used in foreign key constraints.</p>
                     <p>Applications that must use these unsupported features can use the <code class="codeph">DBMS_CRYPTO</code> PL/SQL package for their encryption needs.
                     </p>
                     <p>Transparent Data Encryption protects data stored on a disk or other media. It does not protect data in transit. Use the network encryption solutions discussed in <a href="../dbseg/stong-authentication-administration-tools.html#DBSEG451" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> to encrypt data over the network. 
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="using-transparent-data-encryption-with-other-oracle-features.html#GUID-15CB716C-74A5-42E5-9BCA-7EC9C9FFA712" title="Oracle Data Pump can export and import tables that contain encrypted columns, as well as encrypt entire dump sets.">How Transparent Data Encryption Works with Export and Import Operations</a></li>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6" title="Oracle Database supports a specific set of data types that can be used with TDE column encryption.">Data Types That Can Be Encrypted with TDE Column Encryption</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="You can use Transparent Data Encryption to encrypt individual columns in database tables.">Encrypting Columns in Tables</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG9529"></a><div class="props_rev_3"><a id="GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" name="GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA"></a><h4 id="ASOAG-GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" class="sect4">Creating Tables with Encrypted Columns</h4>
                  <div>
                     <p>Oracle Database provides a selection of different algorithms that you can use to define the encryption used in encrypted columns.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F2EECC3A-0AEC-48B7-8EC9-8CA829146A6B">About Creating Tables with Encrypted Columns</a><br>You can use the <code class="codeph">CREATE TABLE</code> SQL statement to create a table with an encrypted column.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-5235D492-19CB-4E23-80A0-68030C7D5C85">Creating a Table with an Encrypted Column Using the Default Algorithm</a><br>By default, TDE uses the <code class="codeph">AES</code> encryption algorithm with a 192-bit key length (<code class="codeph">AES192</code>). 
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F27449B1-AD0D-4F94-8249-EF072584FF68">Creating a Table with an Encrypted Column Using No Algorithm or a Non-Default Algorithm</a><br>You an use the <code class="codeph">CREATE TABLE</code> SQL statement to create a table with an encrypted column.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-0332B6B4-2A41-498A-B584-713E5ED3AB62">Using the NOMAC Parameter to Save Disk Space and Improve Performance</a><br>You can bypass checks that TDE performs. This can save up to 20 bytes of disk space per encrypted value.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-DFAB21A7-7024-4A7E-9DFE-B6E667857DA7">Example: Using the NOMAC Parameter in a CREATE TABLE Statement</a><br>You can use the <span class="apiname" translate="no">CREATE TABLE</span> SQL statement to encrypt a table column using the <span class="apiname" translate="no">NOMAC</span> parameter.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-ACAB9AA5-6EC8-4430-A799-54117177CC91">Example: Changing the Integrity Algorithm for a Table</a><br>You can use the <span class="apiname" translate="no">ALTER TABLE</span> SQL statement to change the integrity algorithm for a database table. 
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-936CC3D2-8102-454C-AC49-D0126929D738">Creating an Encrypted Column in an External Table</a><br>The external table feature enables you to access data in external sources as if the data were in a database table. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="You can use Transparent Data Encryption to encrypt individual columns in database tables.">Encrypting Columns in Tables</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10375"></a><div class="props_rev_3"><a id="GUID-F2EECC3A-0AEC-48B7-8EC9-8CA829146A6B" name="GUID-F2EECC3A-0AEC-48B7-8EC9-8CA829146A6B"></a><h5 id="ASOAG-GUID-F2EECC3A-0AEC-48B7-8EC9-8CA829146A6B" class="sect5">About Creating Tables with Encrypted Columns</h5>
                     <div>
                        <p>You can use the <code class="codeph">CREATE TABLE</code> SQL statement to create a table with an encrypted column.
                        </p>
                        <p>To create relational tables with encrypted columns, you can specify the SQL <code class="codeph">ENCRYPT</code> clause when you define database columns with the <code class="codeph">CREATE TABLE</code> SQL statement.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle Database provides a selection of different algorithms that you can use to define the encryption used in encrypted columns.">Creating Tables with Encrypted Columns</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG9530"></a><div class="props_rev_3"><a id="GUID-5235D492-19CB-4E23-80A0-68030C7D5C85" name="GUID-5235D492-19CB-4E23-80A0-68030C7D5C85"></a><h5 id="ASOAG-GUID-5235D492-19CB-4E23-80A0-68030C7D5C85" class="sect5">Creating a Table with an Encrypted Column Using the Default Algorithm</h5>
                     <div>
                        <p>By default, TDE uses the <code class="codeph">AES</code> encryption algorithm with a 192-bit key length (<code class="codeph">AES192</code>). 
                        </p>
                        <div class="section">
                           <p>If you encrypt a table column without specifying an algorithm, then the column is encrypted using the <code class="codeph">AES192</code> algorithm.
                           </p>
                           <p>TDE adds <a href="glossary.html#GUID-6803F75B-7883-4D0B-B1FF-0084AD65E001"><span class="xrefglossterm">salt</span></a> to plaintext before encrypting it. Adding salt makes it harder for attackers to steal data through a brute force attack. TDE also adds a Message Authentication Code (MAC) to the data for integrity checking. The <code class="codeph">SHA-1</code> integrity algorithm is used by default.
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To create a table that encrypts a column, use the <code class="codeph">CREATE TABLE</code> SQL statement with the <code class="codeph">ENCRYPT</code> clause.
                                 </p>
                                 <p>For example, to encrypt a table column using the default algorithm:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employee (
     first_name VARCHAR2(128),
     last_name VARCHAR2(128),
     empID NUMBER,
     salary NUMBER(6) <span class="bold">ENCRYPT</span>);</pre><p>This example creates a new table with an encrypted column (<code class="codeph">salary</code>). The column is encrypted using the default encryption algorithm (<code class="codeph">AES192</code>). Salt and MAC are added by default. This example assumes that the keystore is open and a master encryption key is set.
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-5235D492-19CB-4E23-80A0-68030C7D5C85__GUID-0939699C-0204-41CB-A778-63F344B7DB5A">
                              <p class="notep1">Note:</p>
                              <p>If there are multiple encrypted columns in a table, then all of these columns must use the same pair of encryption and integrity algorithms.</p>
                              <p>Salt is specified at the column level. This means that an encrypted column in a table can choose not to use salt irrespective of whether or not other encrypted columns in the table use salt.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle Database provides a selection of different algorithms that you can use to define the encryption used in encrypted columns.">Creating Tables with Encrypted Columns</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG9531"></a><div class="props_rev_3"><a id="GUID-F27449B1-AD0D-4F94-8249-EF072584FF68" name="GUID-F27449B1-AD0D-4F94-8249-EF072584FF68"></a><h5 id="ASOAG-GUID-F27449B1-AD0D-4F94-8249-EF072584FF68" class="sect5">Creating a Table with an Encrypted Column Using No Algorithm or a Non-Default Algorithm</h5>
                     <div>
                        <p>You an use the <code class="codeph">CREATE TABLE</code> SQL statement to create a table with an encrypted column.
                        </p>
                        <div class="section">
                           <p>By default, TDE adds <a href="glossary.html#GUID-6803F75B-7883-4D0B-B1FF-0084AD65E001"><span class="xrefglossterm">salt</span></a> to plaintext before encrypting it. Adding salt makes it harder for attackers to steal data through a brute force attack. However, if you plan to index the encrypted column, then you must use the <code class="codeph">NO SALT</code> parameter.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To create a table that uses an encrypted column that is a non-default algorithm or no algorithm, run the <code class="codeph">CREATE TABLE</code> SQL statement as follows:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>If you do not want to use any algorithm, then include the <code class="codeph">ENCRYPT NO SALT</code> clause.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If you want to use a non-default algorithm, then use the <code class="codeph">ENCRYPT USING</code> clause, followed by one of the following algorithms enclosed in single quotation marks:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">3DES168</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES128</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES192</code> (default)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES256</code></p>
                                          </li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <p>The following example shows how to specify encryption settings for the <code class="codeph">empID</code> and <code class="codeph">salary</code> columns.
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employee (
     first_name VARCHAR2(128),
     last_name VARCHAR2(128),
     empID NUMBER <span class="bold">ENCRYPT NO SALT</span>,
     salary NUMBER(6) <span class="bold">ENCRYPT USING '3DES168'</span>);
</pre><p>In this example:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">empID</code> column is encrypted and does not use salt. Both the <code class="codeph">empID</code> and <code class="codeph">salary</code> columns will use the <code class="codeph">3DES168</code> encryption algorithm, because all of the encrypted columns in a table must use the same encryption algorithm. 
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">salary</code> column is encrypted using the <code class="codeph">3DES168</code> encryption algorithm. Note that the string that specifies the algorithm must be enclosed in single quotation marks (' '). The <code class="codeph">salary</code> column uses salt by default.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle Database provides a selection of different algorithms that you can use to define the encryption used in encrypted columns.">Creating Tables with Encrypted Columns</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10146"></a><div class="props_rev_3"><a id="GUID-0332B6B4-2A41-498A-B584-713E5ED3AB62" name="GUID-0332B6B4-2A41-498A-B584-713E5ED3AB62"></a><h5 id="ASOAG-GUID-0332B6B4-2A41-498A-B584-713E5ED3AB62" class="sect5">Using the NOMAC Parameter to Save Disk Space and Improve Performance</h5>
                     <div>
                        <p>You can bypass checks that TDE performs. This can save up to 20 bytes of disk space per encrypted value.</p>
                        <div class="section">
                           <p> If the number of rows and encrypted columns in the table is large, then bypassing TDE checks can add up to a significant amount of disk space. In addition, this saves processing cycles and reduces the performance overhead associated with TDE.</p>
                           <p> TDE uses the <code class="codeph">SHA-1</code> integrity algorithm by default. All of the encrypted columns in a table must use the same integrity algorithm. If you already have a table column using the <code class="codeph">SHA-1</code> algorithm, then you cannot use the <code class="codeph">NOMAC</code> parameter to encrypt another column in the same table.
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To bypass the integrity check during encryption and decryption operations, use the <code class="codeph">NOMAC</code> parameter in the <code class="codeph">CREATE TABLE</code> and <code class="codeph">ALTER TABLE</code> statements. 
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-2B082CD7-EDDA-4705-9B61-1B1015AB287B" title="The performance of Transparent Data Encryption can vary.">Performance and Storage Overhead of Transparent Data Encryption</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle Database provides a selection of different algorithms that you can use to define the encryption used in encrypted columns.">Creating Tables with Encrypted Columns</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10147"></a><div class="props_rev_3"><a id="GUID-DFAB21A7-7024-4A7E-9DFE-B6E667857DA7" name="GUID-DFAB21A7-7024-4A7E-9DFE-B6E667857DA7"></a><h5 id="ASOAG-GUID-DFAB21A7-7024-4A7E-9DFE-B6E667857DA7" class="sect5">Example: Using the NOMAC Parameter in a CREATE TABLE Statement</h5>
                     <div>
                        <p>You can use the <span class="apiname" translate="no">CREATE TABLE</span> SQL statement to encrypt a table column using the <span class="apiname" translate="no">NOMAC</span> parameter.
                        </p>
                        <p><a href="configuring-transparent-data-encryption.html#GUID-DFAB21A7-7024-4A7E-9DFE-B6E667857DA7__CHDGCAIG">Example 3-1</a> creates a table with an encrypted column. The <code class="codeph">empID</code> column is encrypted using the <code class="codeph">NOMAC</code> parameter. 
                        </p>
                        <div class="example" id="GUID-DFAB21A7-7024-4A7E-9DFE-B6E667857DA7__CHDGCAIG">
                           <p class="titleinexample">Example 3-1 Using the NOMAC parameter in a CREATE TABLE statement</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employee (
     first_name VARCHAR2(128),
     last_name VARCHAR2(128),
     empID NUMBER <span class="bold">ENCRYPT 'NOMAC'</span> ,
     salary NUMBER(6));
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle Database provides a selection of different algorithms that you can use to define the encryption used in encrypted columns.">Creating Tables with Encrypted Columns</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10303"></a><div class="props_rev_3"><a id="GUID-ACAB9AA5-6EC8-4430-A799-54117177CC91" name="GUID-ACAB9AA5-6EC8-4430-A799-54117177CC91"></a><h5 id="ASOAG-GUID-ACAB9AA5-6EC8-4430-A799-54117177CC91" class="sect5">Example: Changing the Integrity Algorithm for a Table</h5>
                     <div>
                        <p>You can use the <span class="apiname" translate="no">ALTER TABLE</span> SQL statement to change the integrity algorithm for a database table. 
                        </p>
                        <p><a href="configuring-transparent-data-encryption.html#GUID-ACAB9AA5-6EC8-4430-A799-54117177CC91__CHDDAFEG">Example 3-2</a> shows how to change the integrity algorithm for encrypted columns in a table. The encryption algorithm is set to <code class="codeph">3DES168</code> and the integrity algorithm is set to <code class="codeph">SHA-1</code>. The second <code class="codeph">ALTER TABLE</code> statement sets the integrity algorithm to <code class="codeph">NOMAC</code>.
                        </p>
                        <div class="example" id="GUID-ACAB9AA5-6EC8-4430-A799-54117177CC91__CHDDAFEG">
                           <p class="titleinexample">Example 3-2 Changing the Integrity Algorithm for a Table</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE EMPLOYEE REKEY USING '3DES168' '<span class="bold">SHA-1</span>';

ALTER TABLE EMPLOYEE REKEY USING '3DES168' '<span class="bold">NOMAC</span>';</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle Database provides a selection of different algorithms that you can use to define the encryption used in encrypted columns.">Creating Tables with Encrypted Columns</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10148"></a><a id="ASOAG9532"></a><div class="props_rev_3"><a id="GUID-936CC3D2-8102-454C-AC49-D0126929D738" name="GUID-936CC3D2-8102-454C-AC49-D0126929D738"></a><h5 id="ASOAG-GUID-936CC3D2-8102-454C-AC49-D0126929D738" class="sect5">Creating an Encrypted Column in an External Table</h5>
                     <div>
                        <p>The external table feature enables you to access data in external sources as if the data were in a database table. </p>
                        <div class="section">
                           <p>External tables can be updated using the <code class="codeph">ORACLE_DATAPUMP</code> access driver.
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To encrypt specific columns in an external table, use the <code class="codeph">ENCRYPT</code> clause when you define those columns:
                                 </p>
                                 <p>A system-generated key encrypts the columns. For example, the following <code class="codeph">CREATE TABLE</code> SQL statement encrypts the <code class="codeph">ssn</code> column using the <code class="codeph">3DES168</code> algorithm:
                                 </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE emp_ext (
    first_name,
    ....
    <span class="bold">ssn ENCRYPT USING '3DES168'</span>,
    ....

</pre></li>
                           </ul>
                           <p>If you plan to move an external table to a new location, then you cannot use a randomly generated key to encrypt the columns. This is because the randomly generated key will not be available at the new location. </p>
                           <p>For such scenarios, you should specify a password while you encrypt the columns. After you move the data, you can use the same password to regenerate the key required to access the encrypted column data at the new location.</p>
                           <p>Table partition exchange also requires a password-protected <a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE table key</span></a>.
                           </p>
                           <p><a href="configuring-transparent-data-encryption.html#GUID-936CC3D2-8102-454C-AC49-D0126929D738__BABHGEAC">Example 3-3</a> creates an external table using a password to create the <a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE table key</span></a>. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-936CC3D2-8102-454C-AC49-D0126929D738__BABHGEAC">
                           <p class="titleinexample">Example 3-3 Creating a New External Table with a Password-Generated TDE Table Key</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE emp_ext (
     first_name,
     last_name,
     empID,
     salary,
     ssn <span class="bold">ENCRYPT IDENTIFIED BY </span><span class="italic"><span class="bold">password</span></span>
)  ORGANIZATION EXTERNAL
   (
    TYPE ORACLE_DATAPUMP
    DEFAULT DIRECTORY "D_DIR"
    LOCATION('emp_ext.dat')
    )
    REJECT LIMIT UNLIMITED
AS SELECT * FROM EMPLOYEE;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle Database provides a selection of different algorithms that you can use to define the encryption used in encrypted columns.">Creating Tables with Encrypted Columns</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG9533"></a><div class="props_rev_3"><a id="GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0" name="GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0"></a><h4 id="ASOAG-GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0" class="sect4">Encrypting Columns in Existing Tables</h4>
                  <div>
                     <p>You can encrypt columns in existing tables. As with new tables, you have a choice of different algorithms to use to definite the encryption.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-7BEE47F1-A3FE-4B1D-9744-B8F24E699B01">About Encrypting Columns in Existing Tables</a><br>The <code class="codeph">ALTER TABLE</code> SQL statement enables you to encrypt columns in an existing table.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-2720E333-6335-42CC-935F-35041991D130">Adding an Encrypted Column to an Existing Table</a><br>You can encrypt columns in existing tables, use a different algorithm, and use <code class="codeph">NO SALT</code> to index the column. 
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-E3CAE9C6-CD38-4854-B53F-F082A41A14F5">Encrypting an Unencrypted Column</a><br>You can use the <code class="codeph">ALTER TABLE MODIFY</code> statement to encrypt an existing unencrypted column.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-49ADF60E-73A2-4672-8494-11F499160AB0">Disabling Encryption on a Column</a><br>You may want to disable encryption for reasons of compatibility or performance. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="You can use Transparent Data Encryption to encrypt individual columns in database tables.">Encrypting Columns in Tables</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10304"></a><div class="props_rev_3"><a id="GUID-7BEE47F1-A3FE-4B1D-9744-B8F24E699B01" name="GUID-7BEE47F1-A3FE-4B1D-9744-B8F24E699B01"></a><h5 id="ASOAG-GUID-7BEE47F1-A3FE-4B1D-9744-B8F24E699B01" class="sect5">About Encrypting Columns in Existing Tables</h5>
                     <div>
                        <p>The <code class="codeph">ALTER TABLE</code> SQL statement enables you to encrypt columns in an existing table.
                        </p>
                        <p>To add an encrypted column to an existing table, or to encrypt or decrypt an existing column, you use the <code class="codeph">ALTER TABLE</code> SQL statement with the <code class="codeph">ADD</code> or <code class="codeph">MODIFY</code> clause. 
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0" title="You can encrypt columns in existing tables. As with new tables, you have a choice of different algorithms to use to definite the encryption.">Encrypting Columns in Existing Tables</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10149"></a><a id="ASOAG9534"></a><div class="props_rev_3"><a id="GUID-2720E333-6335-42CC-935F-35041991D130" name="GUID-2720E333-6335-42CC-935F-35041991D130"></a><h5 id="ASOAG-GUID-2720E333-6335-42CC-935F-35041991D130" class="sect5">Adding an Encrypted Column to an Existing Table</h5>
                     <div>
                        <p>You can encrypt columns in existing tables, use a different algorithm, and use <code class="codeph">NO SALT</code> to index the column. 
                        </p>
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To add an encrypted column to an existing table, use the <code class="codeph">ALTER TABLE ADD</code> statement, specifying the new column with the <code class="codeph">ENCRYPT</code> clause. 
                                 </p>
                              </li>
                           </ul>
                           <p><a href="configuring-transparent-data-encryption.html#GUID-2720E333-6335-42CC-935F-35041991D130__BABEDGDA">Example 3-4</a> adds an encrypted column, <code class="codeph">ssn</code>, to an existing table, called <code class="codeph">employee</code>. The <code class="codeph">ssn</code> column is encrypted with the default <code class="codeph">AES192</code> algorithm. Salt and MAC are added by default.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-2720E333-6335-42CC-935F-35041991D130__BABEDGDA">
                           <p class="titleinexample">Example 3-4 Adding an Encrypted Column to an Existing Table</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE employee ADD (ssn VARCHAR2(11) ENCRYPT);
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0" title="You can encrypt columns in existing tables. As with new tables, you have a choice of different algorithms to use to definite the encryption.">Encrypting Columns in Existing Tables</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG9535"></a><div class="props_rev_3"><a id="GUID-E3CAE9C6-CD38-4854-B53F-F082A41A14F5" name="GUID-E3CAE9C6-CD38-4854-B53F-F082A41A14F5"></a><h5 id="ASOAG-GUID-E3CAE9C6-CD38-4854-B53F-F082A41A14F5" class="sect5">Encrypting an Unencrypted Column</h5>
                     <div>
                        <p>You can use the <code class="codeph">ALTER TABLE MODIFY</code> statement to encrypt an existing unencrypted column.
                        </p>
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To encrypt an existing unencrypted column, use the <code class="codeph">ALTER TABLE MODIFY</code> statement, specifying the unencrypted column with the <code class="codeph">ENCRYPT</code> clause. 
                                 </p>
                              </li>
                           </ul>
                           <p>The following example encrypts the <code class="codeph">first_name</code> column in the <code class="codeph">employee</code> table. The <code class="codeph">first_name</code> column is encrypted with the default <code class="codeph">AES192</code> algorithm. Salt is added to the data, by default. You can encrypt the column using a different algorithm. If you want to index a column, then you must specify <code class="codeph">NO SALT</code>. You can also bypass integrity checks by using the <code class="codeph">NOMAC</code> parameter.
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE employee MODIFY (first_name ENCRYPT);
</pre><p>The following example encrypts the <code class="codeph">first_name</code> column in the employee table using the <code class="codeph">NOMAC</code> parameter.
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE employee MODIFY (first_name ENCRYPT 'NOMAC');</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0" title="You can encrypt columns in existing tables. As with new tables, you have a choice of different algorithms to use to definite the encryption.">Encrypting Columns in Existing Tables</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10152"></a><a id="ASOAG9536"></a><div class="props_rev_3"><a id="GUID-49ADF60E-73A2-4672-8494-11F499160AB0" name="GUID-49ADF60E-73A2-4672-8494-11F499160AB0"></a><h5 id="ASOAG-GUID-49ADF60E-73A2-4672-8494-11F499160AB0" class="sect5">Disabling Encryption on a Column</h5>
                     <div>
                        <p>You may want to disable encryption for reasons of compatibility or performance. </p>
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To disable column encryption, use the <code class="codeph">ALTER TABLE MODIFY</code> command with the <code class="codeph">DECRYPT</code> clause. 
                                 </p>
                              </li>
                           </ul>
                           <p><a href="configuring-transparent-data-encryption.html#GUID-49ADF60E-73A2-4672-8494-11F499160AB0__BABHAIFI">Example 3-5</a> decrypts the <code class="codeph">first_name</code> column in the <code class="codeph">employee</code> table.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-49ADF60E-73A2-4672-8494-11F499160AB0__BABHAIFI">
                           <p class="titleinexample">Example 3-5 Turning Off Column Encryption</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE employee MODIFY (first_name <span class="bold">DECRYPT</span>);</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0" title="You can encrypt columns in existing tables. As with new tables, you have a choice of different algorithms to use to definite the encryption.">Encrypting Columns in Existing Tables</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10153"></a><a id="ASOAG9537"></a><div class="props_rev_3"><a id="GUID-9E4EC0E4-A395-4C79-B841-CB13BDE41B4C" name="GUID-9E4EC0E4-A395-4C79-B841-CB13BDE41B4C"></a><h4 id="ASOAG-GUID-9E4EC0E4-A395-4C79-B841-CB13BDE41B4C" class="sect4">Creating an Index on an Encrypted Column</h4>
                  <div>
                     <p>You can create an index on an encrypted column.</p>
                     <div class="section">
                        <p>The column being indexed must be encrypted without <a href="glossary.html#GUID-6803F75B-7883-4D0B-B1FF-0084AD65E001"><span class="xrefglossterm">salt</span></a>. If the column is encrypted with salt, then the <code class="codeph">ORA-28338: cannot encrypt indexed column(s) with salt</code> error is raised.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To create an index on an encrypted column, use the <code class="codeph">CREATE INDEX</code> statement with the <code class="codeph">ENCRYPT NO SALT</code> clause. 
                              </p>
                           </li>
                        </ul>
                        <p><a href="configuring-transparent-data-encryption.html#GUID-9E4EC0E4-A395-4C79-B841-CB13BDE41B4C__CHDFIGCF">Example 3-6</a> shows how to create an index on a column that has been encrypted without salt.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9E4EC0E4-A395-4C79-B841-CB13BDE41B4C__CHDFIGCF">
                        <p class="titleinexample">Example 3-6 Creating Index on a Column Encrypted Without Salt</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employee (
   first_name VARCHAR2(128),
   last_name VARCHAR2(128),
   empID NUMBER <span class="bold">ENCRYPT NO SALT</span>,
   salary NUMBER(6) ENCRYPT USING '3DES168');

CREATE INDEX employee_idx on employee (empID);</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="You can use Transparent Data Encryption to encrypt individual columns in database tables.">Encrypting Columns in Tables</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG9538"></a><div class="props_rev_3"><a id="GUID-3A298444-09BB-409E-94E5-1FA5FFA89A1D" name="GUID-3A298444-09BB-409E-94E5-1FA5FFA89A1D"></a><h4 id="ASOAG-GUID-3A298444-09BB-409E-94E5-1FA5FFA89A1D" class="sect4">Adding Salt to an Encrypted Column</h4>
                  <div>
                     <p>Salt, which is a random string added to data before encryption, is a way to strengthen the security of encrypted data. . </p>
                     <div class="section">
                        <p>Salt ensures that the same plaintext data does not always translate to the same encrypted text. Salt removes the one common method that intruders use to steal data, namely, matching patterns of encrypted text. Adding <a href="glossary.html#GUID-6803F75B-7883-4D0B-B1FF-0084AD65E001"><span class="xrefglossterm">salt</span></a> requires an additional 16 bytes of storage per encrypted data value.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To add or remove salt from encrypted columns, use the <code class="codeph">ALTER TABLE MODIFY</code> SQL statement. 
                              </p>
                           </li>
                        </ul>
                        <p>For example, suppose you want to encrypt the <code class="codeph">first_name</code> column using salt. If the <code class="codeph">first_name</code> column was encrypted without salt earlier, then the <code class="codeph">ALTER TABLE MODIFY</code> statement reencrypts it using salt.
                        </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE employee MODIFY (first_name ENCRYPT SALT);
</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="You can use Transparent Data Encryption to encrypt individual columns in database tables.">Encrypting Columns in Tables</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-F1C34179-BE14-4966-82B7-97904AB4CF44" name="GUID-F1C34179-BE14-4966-82B7-97904AB4CF44"></a><h4 id="ASOAG-GUID-F1C34179-BE14-4966-82B7-97904AB4CF44" class="sect4">Removing Salt from an Encrypted Column</h4>
                  <div>
                     <p>You can use the <span class="apiname" translate="no">ALTER TABLE</span> SQL statement to remove salt from an encrypted column.
                     </p>
                     <div class="section">
                        <p></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To remove salt from an encrypted column, use the <code class="codeph">ENCRYPT NO SALT</code> clause in the <span class="apiname" translate="no">ALTER TABLE</span> SQL statement.
                              </p>
                           </li>
                        </ul>
                        <p>For example, suppose you wanted to remove salt from the <code class="codeph">first_name</code> column. If you must index a column that was encrypted using salt, then you can use this statement to remove the salt before indexing
                        </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE employee MODIFY (first_name ENCRYPT NO SALT);</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="You can use Transparent Data Encryption to encrypt individual columns in database tables.">Encrypting Columns in Tables</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10305"></a><a id="ASOAG9539"></a><div class="props_rev_3"><a id="GUID-2931A16D-84E8-4A42-8D01-662FD693A711" name="GUID-2931A16D-84E8-4A42-8D01-662FD693A711"></a><h4 id="ASOAG-GUID-2931A16D-84E8-4A42-8D01-662FD693A711" class="sect4">Changing the Encryption Key or Algorithm for Tables with Encrypted Columns</h4>
                  <div>
                     <p>You can use the <code class="codeph">ALTER TABLE</code> SQL statement to change the encryption key or algorithm used in encrypted columns.
                     </p>
                     <div class="section">
                        <p>Each table can have only one <a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE table key</span></a> for its columns. You can regenerate the TDE table key with the <code class="codeph">ALTER TABLE</code> statement. This process generates a new key, decrypts the data in the table using the previous key, reencrypts the data using the new key, and then updates the table metadata with the new key information. You can also use a different encryption algorithm for the new TDE table key.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To change the encryption key or algorithm for tables that contain encrypted columns, use the <code class="codeph">ALTER TABLE</code> SQL statement with the <code class="codeph">REKEY</code> or <code class="codeph">REKEY USING</code> clause.
                              </p>
                           </li>
                        </ul>
                        <p>For example: </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE employee REKEY;
</pre><p><a href="configuring-transparent-data-encryption.html#GUID-2931A16D-84E8-4A42-8D01-662FD693A711__CIHHEEFF">Example 3-7</a> regenerates the TDE table key for the <code class="codeph">employee</code> table by using the <code class="codeph">3DES168</code> algorithm.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-2931A16D-84E8-4A42-8D01-662FD693A711__CIHHEEFF">
                        <p class="titleinexample">Example 3-7 Changing an Encrypted Table Column Encryption Key and Algorithm </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE employee REKEY USING '3DES168';</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="You can use Transparent Data Encryption to encrypt individual columns in database tables.">Encrypting Columns in Tables</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ASOAG620"></a><div class="props_rev_3"><a id="GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" name="GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8"></a><h3 id="ASOAG-GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" class="sect3">Encryption Conversions for Tablespaces and Databases</h3>
               <div>
                  <p>You can perform encryption operations on both offline and online tablespaces and databases. </p>
                  <p></p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-79072DFC-4DC6-4920-9B2A-D649123D15C7">About Encryption Conversion for Tablespaces and Databases</a><br>The <code class="codeph">CREATE TABLESPACE</code> SQL statement can be used to encrypt new tablespaces. <code class="codeph">ALTER TABLESPACE</code> can encrypt existing tablespaces.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF">Impact of a Closed TDE Keystore on Encrypted Tablespaces</a><br>A TDE keystore can be closed or migrated when an Oracle-managed tablespace is encrypted, and the database system itself must be shut down to disallow operations on an Oracle-managed tablespace.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-EA4F9C84-0BE8-44AF-8638-3B7EFE4CA92C">Restrictions on Using Transparent Data Encryption Tablespace Encryption</a><br>You should be aware of restrictions on using Transparent Data Encryption when you encrypt a tablespace. 
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F95E13AA-FE30-423B-930C-13D355CE46B3">Creating an Encrypted New Tablespace</a><br>When you create a new tablespace, you can configure its encryption settings during the creation process.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-9D9BDB52-CA0F-4275-B16E-B71173C76D56">Encrypting Future Tablespaces</a><br>You can configure Oracle Database to automatically encrypt future tablespaces that you will create. 
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-833FDC4E-0980-4291-8F56-53BD6C8F7EEF">Encrypted Sensitive Credential Data in the Data Dictionary</a><br>You can encrypt sensitive credential data in the <code class="codeph">SYS.LINK$</code> and <code class="codeph">SYS.SCHEDULER$_CREDENTIAL</code> system tables.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35">Encryption Conversions for Existing Offline Tablespaces</a><br>You can perform offline encryption conversions by using the <code class="codeph">ALTER TABLESPACE</code> SQL statement <code class="codeph">OFFLINE</code>, <code class="codeph">ENCRYPT</code>, and <code class="codeph">DECRYPT</code> clauses.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19">Encryption Conversions for Existing Online Tablespaces</a><br>You can encrypt and decrypt an online existing tablespace by using the <code class="codeph">ALTER TABLESPACE</code> SQL statement with the <code class="codeph">ONLINE</code> and <code class="codeph">ENCRYPT</code> or <code class="codeph">DECRYPT</code> clauses.
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-445053E7-8568-4990-A4C6-2ED68787ED2C">Encryption Conversions for Existing Databases</a><br>You can encrypt both offline and online databases.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces.">Configuring Transparent Data Encryption</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-79072DFC-4DC6-4920-9B2A-D649123D15C7" name="GUID-79072DFC-4DC6-4920-9B2A-D649123D15C7"></a><h4 id="ASOAG-GUID-79072DFC-4DC6-4920-9B2A-D649123D15C7" class="sect4">About Encryption Conversion for Tablespaces and Databases</h4>
                  <div>
                     <p>The <code class="codeph">CREATE TABLESPACE</code> SQL statement can be used to encrypt new tablespaces. <code class="codeph">ALTER TABLESPACE</code> can encrypt existing tablespaces.
                     </p>
                     <p>In addition to encrypting new and existing tablespaces, you can encrypt full databases, which entails the encryption of the <a href="glossary.html#GUID-CD28FCE6-F90B-4353-B594-C19FCFF4FDE9"><span class="xrefglossterm">Oracle-managed tablespace</span></a>s (in this release, the <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, <code class="codeph">TEMP</code>, and <code class="codeph">UNDO</code> tablespaces). To encrypt a full database, you use the <code class="codeph">ALTER TABLESPACE</code> statement, not <code class="codeph">ALTER DATABASE</code>, to encrypt the Oracle-managed tablespaces.
                     </p>
                     <p>The following table compares the differences between an offline and an online encryption conversion of tablespaces and databases.</p>
                     <div class="tblformal" id="GUID-79072DFC-4DC6-4920-9B2A-D649123D15C7__COMPARISONBETWEENOFFLINEANDONLINETA-DC9FA811">
                        <p class="titleintable">Table 3-2 Offline and Online Tablespace and Database Encryption Conversions</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Offline and Online Tablespace and Database Encryption Conversions" summary="Comparison Between Offline and Online Tablespace and Database Encryption Conversion" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d6228e7008">Functionality</th>
                                 <th align="left" valign="bottom" id="d6228e7010">Offline Conversion</th>
                                 <th align="left" valign="bottom" id="d6228e7012">Online Conversion</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7016" headers="d6228e7008 ">
                                    <p>Release with minimum conversion capability</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7016 d6228e7010 ">
                                    <p>Oracle Database 11g release 2 (11.2)</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7016 d6228e7012 ">
                                    <p>Oracle Database 12c release 2 (12.2) and later</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7026" headers="d6228e7008 ">
                                    <p>What can be backported?</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7026 d6228e7010 ">
                                    <div class="p">The ability to encrypt or decrypt a data file with the <code class="codeph">AES128</code> algorithm (using <pre class="pre codeblock"><code>ALTER DATABASE DATAFILE <span class="italic">data_file</span> ENCRYPT</code></pre> or <code class="codeph">DECRYPT</code>) can be used in Oracle Database releases 12.1.0.2 and 11.2.0.4. 
                                    </div>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7026 d6228e7012 ">
                                    <p>No</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7048" headers="d6228e7008 ">
                                    <p>Algorithms supported</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7048 d6228e7010 ">
                                    <p>All symmetric encryption algorithms that TDE supports. See <a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="By default, Transparent Data Encryption (TDE) Column encryption uses the Advanced Encryption Standard (AES).">Supported Encryption and Integrity Algorithms</a>. See also <a href="configuring-transparent-data-encryption.html#GUID-689A82BA-F09A-47AB-8A81-41375F833C7D" title="You can encrypt or decrypt an existing data file of a user tablespace when the tablespace is offline or when the database is not open.">About Encryption Conversion for Existing Offline Tablespaces</a>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7048 d6228e7012 ">
                                    <p>All symmetric encryption algorithm that TDE supports. See <a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="By default, Transparent Data Encryption (TDE) Column encryption uses the Advanced Encryption Standard (AES).">Supported Encryption and Integrity Algorithms</a>. See also <a href="configuring-transparent-data-encryption.html#GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C" title="You can encrypt, decrypt, or rekey existing user tablespaces, and the SYSTEM, SYSAUX, and UNDO tablespace when they are online.">About Encryption Conversion for Existing Online Tablespaces</a>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7091" headers="d6228e7008 ">
                                    <p>When can the conversion be run?</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7091 d6228e7010 ">
                                    <p>When the tablespace is offline or the database is in the mount stage. </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7091 d6228e7012 ">
                                    <p>When the tablespace is online and database is open in read/write mode. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7101" headers="d6228e7008 ">
                                    <p>Is auxiliary space required for the conversion?</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7101 d6228e7010 ">
                                    <p>No</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7101 d6228e7012 ">
                                    <p>Yes. See <a href="configuring-transparent-data-encryption.html#GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF" title="To encrypt an existing tablespace with online conversion, use ALTER TABLESPACE with the ONLINE and ENCRYPT clauses.">Encrypting an Existing Tablespace with Online Conversion</a> for guidelines.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7126" headers="d6228e7008 ">
                                    <p>Oracle Data Guard conversion guidelines</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7126 d6228e7010 ">
                                    <p>Convert both the primary and standby manually. Convert the standby first and then switch over to minimum downtime</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7126 d6228e7012 ">
                                    <p>After you convert the primary, the standby conversion takes place automatically. You cannot perform an online conversion directly on the standby.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7136" headers="d6228e7008 ">
                                    <p>Encrypt the <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, and <code class="codeph">UNDO</code> tablespaces (database conversion)
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7136 d6228e7010 ">
                                    <p>Oracle Database 12c release 2 (12.2) and later only. You must set <code class="codeph">COMPATIBILITY</code> to <code class="codeph">12.2.0.0</code>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7136 d6228e7012 ">
                                    <p>Oracle Database 12c release 2 (12.2) and later only. You must set <code class="codeph">COMPATIBILITY</code> to <code class="codeph">12.2.0.0</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7167" headers="d6228e7008 ">
                                    <p>Can an existing <code class="codeph">TEMP</code> tablespace be converted?
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7167 d6228e7010 ">
                                    <p>No, but you can create an encrypted <code class="codeph">TEMP</code> tablespace in Oracle Database 12c release 2 (12.2) and later, make it the default temporary tablespace, and then drop the original <code class="codeph">TEMP</code> tablespace.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7167 d6228e7012 ">
                                    <p>No, but you can create an encrypted <code class="codeph">TEMP</code> tablespace in Oracle Database 12c release 2 (12.2) and later, make it the default temporary tablespace, and then drop the original <code class="codeph">TEMP</code> tablespace.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7192" headers="d6228e7008 ">
                                    <p>Can an existing tablespace be decrypted?</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7192 d6228e7010 ">
                                    <p>You only can decrypt a tablespace or data file that was previously encrypted by an offline encrypt operation. Oracle does not recommend that you decrypt the <code class="codeph">UNDO</code> tablespace once it is encrypted.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7192 d6228e7012 ">
                                    <p>Yes, but Oracle does not recommend that you decrypt the <code class="codeph">UNDO</code> tablespace once it is encrypted.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7208" headers="d6228e7008 ">
                                    <p>Can encryption keys be rekeyed?</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7208 d6228e7010 ">
                                    <p>No, but after the tablespace is encrypted, you can then use online conversion to rekey in Oracle Database 12c release 2 (12.2) compatibility. </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7208 d6228e7012 ">
                                    <p>Yes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7218" headers="d6228e7008 ">
                                    <p>Can encryption operations be run in parallel? </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7218 d6228e7010 ">
                                    <p>You can run parallel encryption conversions at the data file level with multiple user sessions running.</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7218 d6228e7012 ">
                                    <p>You can run parallel encryption conversions at the tablespace level with multiple user sessions running.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7229" headers="d6228e7008 ">
                                    <p>What to do if an encryption conversion SQL statement fails to complete?</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7229 d6228e7010 ">
                                    <p>Re-issue the encryption or decryption SQL statement to ensure that all the data files within the tablespace are consistently either encrypted or decrypted. </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7229 d6228e7012 ">
                                    <p>Rerun the SQL statement but use the <code class="codeph">FINISH</code> clause. 
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="You can perform encryption operations on both offline and online tablespaces and databases.">Encryption Conversions for Tablespaces and Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF" name="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF"></a><h4 id="ASOAG-GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF" class="sect4">Impact of a Closed TDE Keystore on Encrypted Tablespaces</h4>
                  <div>
                     <p>A TDE keystore can be closed or migrated when an Oracle-managed tablespace is encrypted, and the database system itself must be shut down to disallow operations on an Oracle-managed tablespace.</p>
                     <p>A closed TDE keystore has no impact on operations that involve an encrypted <a href="glossary.html#GUID-CD28FCE6-F90B-4353-B594-C19FCFF4FDE9"><span class="xrefglossterm">Oracle-managed tablespace</span></a> (in this release, the <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, <code class="codeph">TEMP</code>, and <code class="codeph">UNDO</code> tablespaces). This enables operations that are performed by background processes (for example, the log writer) to continue to work on these tablespaces while the TDE keystore is closed. If you want to disallow operations on an encrypted Oracle-managed tablespace, then you must shut down the database. 
                     </p>
                     <p>With regard to user-created tablespaces, a closed TDE keystore causes operations such as rotating a key or decrypting the tablespace to fail with an <code class="codeph">ORA-28365 wallet is not open</code> error, just as it did in earlier releases. If you want to disallow operations on the user-created tablespace, then close the TDE keystore (or shut down the database). 
                     </p>
                     <p>User-created data can be copied into an encrypted Oracle-managed tablespace (for example, by an internal process such as <code class="codeph">DBMS_STATS</code> statistics gathering) from a user-created tablespace while the TDE keystore is open. Closing the keystore does not prevent a user from viewing this data afterward, when the TDE keystore is in the <code class="codeph">CLOSED</code> state at the time that you query the <code class="codeph">V$ENCRYPTION_WALLET</code> view. Access to the original data by attempting to query an encrypted user-created tablespace will fail, resulting in an <code class="codeph">ORA-28365 wallet is not open</code> error. 
                     </p>
                     <p><a href="configuring-transparent-data-encryption.html#GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__TABLE_SZP_TFD_V2B" title="This table describes commands that are necessary to disallow or allow operations on encrypted data in user tablespaces and Oracle-managed tablespaces. From left to right: Tablespace Encryption Scenarios, Commands to Disallow Operations on Encrypted User-Created Tablespace Data, Commands to Disallow Operations on Encrypted Oracle-Managed Tablespace Data, Commands to Allow Operations on Encrypted User-Created Tablespace Data, Commands to Allow Operations on Encrypted Oracle-Managed Tablespace Data.">Table 3-3</a> describes the operations that are necessary to disallow or allow operations on encrypted data in user-created tablespaces and Oracle-managed tablespaces. For example, in the first scenario, both the user-created tablespaces and the Oracle-managed tablespaces are encrypted. In this case, for the encrypted data in the encrypted user-created tablespace, an administrator can close or open keystores, and shut down and open a database with an encrypted user-created tablespace. When an encrypted Oracle-managed tablespace is configured, the administrator can disallow operations by shutting down the database, and can allow operations by starting up in mount mode, opening the TDE keystore, and then opening the database. (It is necessary to open the TDE keystore <span class="italic">before</span> opening the database because the system may need the TDE master encryption key to decrypt the bootstrap dictionary tables, which are located in the encrypted Oracle-managed tablespace.) The N/A flags in this table refer to non-encrypted data, which you can always operate on, unless the instance is shut down.
                     </p>
                     <div class="tblformalwide" id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__TABLE_SZP_TFD_V2B">
                        <p class="titleintable">Table 3-3 Necessary Commands to Disallow or Allow Operations on Encrypted Data</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Necessary Commands to Disallow or Allow Operations on Encrypted Data" summary="This table describes commands that are necessary to disallow or allow operations on encrypted data in user tablespaces and Oracle-managed tablespaces. From left to right: Tablespace Encryption Scenarios, Commands to Disallow Operations on Encrypted User-Created Tablespace Data, Commands to Disallow Operations on Encrypted Oracle-Managed Tablespace Data, Commands to Allow Operations on Encrypted User-Created Tablespace Data, Commands to Allow Operations on Encrypted Oracle-Managed Tablespace Data." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d6228e7379"> Tablespace Encryption Scenarios</th>
                                 <th align="left" valign="bottom" id="d6228e7381">Commands to Disallow Operations on Encrypted User-Created Tablespace Data</th>
                                 <th align="left" valign="bottom" id="d6228e7383">Commands to Disallow Operations on Encrypted Oracle-Managed Tablespace Data</th>
                                 <th align="left" valign="bottom" id="d6228e7385">Commands to Allow Operations on Encrypted User-Created Tablespace Data</th>
                                 <th align="left" valign="bottom" id="d6228e7387">Commands to Allow Operations on Encrypted Oracle-Managed Tablespace Data</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7391" headers="d6228e7379 ">Both user-created and Oracle-managed tablespaces encrypted</td>
                                 <td align="left" valign="top" headers="d6228e7391 d6228e7381 ">
                                    <ul style="list-style-type: disc;" id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__UL_ZCV_2GD_V2B">
                                       <li><code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE IDENTIFIED BY <span class="codeinlineitalic">password</span>;</code></li>
                                       <li><code class="codeph">SHUTDOWN</code></li>
                                    </ul>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7391 d6228e7383 "><code class="codeph">SHUTDOWN</code></td>
                                 <td align="left" valign="top" headers="d6228e7391 d6228e7385 ">
                                    <ul style="list-style-type: disc;" id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__UL_QLH_PGD_V2B">
                                       <li><code class="codeph">STARTUP MOUNT;</code></li>
                                       <li><code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN IDENTIFIED BY <span class="codeinlineitalic">password</span>;</code></li>
                                       <li><code class="codeph">ALTER DATABASE OPEN</code></li>
                                    </ul>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7391 d6228e7387 ">
                                    <ul style="list-style-type: disc;" id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__UL_OLW_B3D_V2B">
                                       <li><code class="codeph">STARTUP MOUNT;</code></li>
                                       <li><code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN IDENTIFIED BY <span class="codeinlineitalic">password</span>;</code></li>
                                       <li><code class="codeph">ALTER DATABASE OPEN</code></li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7436" headers="d6228e7379 ">User tablespace encrypted; Oracle-managed tablespace not encrypted</td>
                                 <td align="left" valign="top" headers="d6228e7436 d6228e7381 ">
                                    <ul style="list-style-type: disc;" id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__UL_XDQ_SHD_V2B">
                                       <li><code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE IDENTIFIED BY <span class="codeinlineitalic">password</span>;</code></li>
                                       <li><code class="codeph">SHUTDOWN</code></li>
                                    </ul>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7436 d6228e7383 ">N/A</td>
                                 <td align="left" valign="top" headers="d6228e7436 d6228e7385 ">
                                    <ul style="list-style-type: disc;" id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__UL_YXN_5HD_V2B">
                                       <li><code class="codeph">STARTUP MOUNT;</code></li>
                                       <li><code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN IDENTIFIED BY <span class="codeinlineitalic">password</span>;</code></li>
                                       <li><code class="codeph">ALTER DATABASE OPEN</code></li>
                                    </ul>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7436 d6228e7387 ">N/A</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7468" headers="d6228e7379 ">User tablespace not encrypted; Oracle-managed tablespace encrypted</td>
                                 <td align="left" valign="top" headers="d6228e7468 d6228e7381 ">N/A</td>
                                 <td align="left" valign="top" headers="d6228e7468 d6228e7383 "><code class="codeph">SHUTDOWN</code></td>
                                 <td align="left" valign="top" headers="d6228e7468 d6228e7385 ">N/A</td>
                                 <td align="left" valign="top" headers="d6228e7468 d6228e7387 ">
                                    <ul style="list-style-type: disc;" id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__UL_O2K_C3D_V2B">
                                       <li><code class="codeph">STARTUP MOUNT;</code></li>
                                       <li><code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN IDENTIFIED BY <span class="codeinlineitalic">password</span>;</code></li>
                                       <li><code class="codeph">ALTER DATABASE OPEN</code></li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7492" headers="d6228e7379 ">Neither user nor Oracle-managed tablespaces encrypted</td>
                                 <td align="left" valign="top" headers="d6228e7492 d6228e7381 ">N/A</td>
                                 <td align="left" valign="top" headers="d6228e7492 d6228e7383 ">N/A</td>
                                 <td align="left" valign="top" headers="d6228e7492 d6228e7385 ">N/A</td>
                                 <td align="left" valign="top" headers="d6228e7492 d6228e7387 ">N/A</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="You can perform encryption operations on both offline and online tablespaces and databases.">Encryption Conversions for Tablespaces and Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10162"></a><div class="props_rev_3"><a id="GUID-EA4F9C84-0BE8-44AF-8638-3B7EFE4CA92C" name="GUID-EA4F9C84-0BE8-44AF-8638-3B7EFE4CA92C"></a><h4 id="ASOAG-GUID-EA4F9C84-0BE8-44AF-8638-3B7EFE4CA92C" class="sect4">Restrictions on Using Transparent Data Encryption Tablespace Encryption</h4>
                  <div>
                     <p>You should be aware of restrictions on using Transparent Data Encryption when you encrypt a tablespace. </p>
                     <p>Note the following restrictions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Transparent Data Encryption (TDE) tablespace encryption encrypts or decrypts data during read and write operations, as opposed to TDE column encryption, which encrypts and decrypts data at the SQL layer. This means that most restrictions that apply to TDE column encryption, such as data type restrictions and index type restrictions, do not apply to TDE tablespace encryption.</p>
                        </li>
                        <li>
                           <p>To perform import and export operations, use Oracle Data Pump.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-EA4F9C84-0BE8-44AF-8638-3B7EFE4CA92C__GUID-456ABB31-8537-4E39-9566-A277423B4DE2">
                        <p class="notep1">See Also:</p><a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> for more information about Oracle Data Pump
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="You can perform encryption operations on both offline and online tablespaces and databases.">Encryption Conversions for Tablespaces and Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-F95E13AA-FE30-423B-930C-13D355CE46B3" name="GUID-F95E13AA-FE30-423B-930C-13D355CE46B3"></a><h4 id="ASOAG-GUID-F95E13AA-FE30-423B-930C-13D355CE46B3" class="sect4">Creating an Encrypted New Tablespace</h4>
                  <div>
                     <p>When you create a new tablespace, you can configure its encryption settings during the creation process.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-058B849C-6014-4730-B395-E1FF36900F0F">Step 1: Set the COMPATIBLE Initialization Parameter for Tablespace Encryption</a><br>You must set the <code class="codeph">COMPATIBLE</code> initialization parameter before creating an encrypted tablespace.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-A00B8C8A-3C98-41A5-BB80-EC7BE3E46252">Step 2: Set the Tablespace TDE Master Encryption Key</a><br>You should ensure that you have configured the TDE master encryption key.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B">Step 3: Create the Encrypted Tablespace</a><br>After you have set the <code class="codeph">COMPATIBLE</code> initialization parameter, you are ready to create the encrypted tablespace.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="You can perform encryption operations on both offline and online tablespaces and databases.">Encryption Conversions for Tablespaces and Databases</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10307"></a><div class="props_rev_3"><a id="GUID-058B849C-6014-4730-B395-E1FF36900F0F" name="GUID-058B849C-6014-4730-B395-E1FF36900F0F"></a><h5 id="ASOAG-GUID-058B849C-6014-4730-B395-E1FF36900F0F" class="sect5">Step 1: Set the COMPATIBLE Initialization Parameter for Tablespace Encryption</h5>
                     <div>
                        <p>You must set the <code class="codeph">COMPATIBLE</code> initialization parameter before creating an encrypted tablespace.
                        </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-FC737030-FB70-4E7E-809D-22ABAF8A4C09">About Setting the COMPATIBLE Initialization Parameter for Tablespace Encryption</a><br>A minimum <code class="codeph">COMPATIBLE</code> initialization parameter setting of <code class="codeph">11.2.0.0</code> enables the full set of tablespace encryption features. 
                           </li>
                           <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-DE637157-E201-482D-B12D-F5C59FF9618D">Setting the COMPATIBLE Initialization Parameter for Tablespace Encryption</a><br>To set the <code class="codeph">COMPATIBLE</code> initialization parameter, you must edit the initialization parameter file for the database instance.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-F95E13AA-FE30-423B-930C-13D355CE46B3" title="When you create a new tablespace, you can configure its encryption settings during the creation process.">Creating an Encrypted New Tablespace</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ASOAG10516"></a><div class="props_rev_3"><a id="GUID-FC737030-FB70-4E7E-809D-22ABAF8A4C09" name="GUID-FC737030-FB70-4E7E-809D-22ABAF8A4C09"></a><h6 id="ASOAG-GUID-FC737030-FB70-4E7E-809D-22ABAF8A4C09" class="sect6">About Setting the COMPATIBLE Initialization Parameter for Tablespace Encryption</h6>
                        <div>
                           <p>A minimum <code class="codeph">COMPATIBLE</code> initialization parameter setting of <code class="codeph">11.2.0.0</code> enables the full set of tablespace encryption features. 
                           </p>
                           <p> Setting the compatibility to <code class="codeph">11.2.0.0</code> enables the following functionality:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">11.2.0.0</code> setting enables the database to use any of the four supported algorithms for data encryption (<code class="codeph">3DES168</code>, <code class="codeph">AES128</code>, <code class="codeph">AES192</code>, and <code class="codeph">AES256</code>).
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">11.2.0.0</code> setting enables the migration of a key from a software keystore to a hardware keystore (ensure that the TDE master encryption key was configured for the hardware keystore)
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">11.2.0.0</code> setting enables rekeying the TDE master encryption key
                                 </p>
                              </li>
                           </ul>
                           <p>Be aware that once you set the <code class="codeph">COMPATIBLE</code> parameter to <code class="codeph">11.2.0.0</code>, the change is irreversible. To use tablespace encryption, ensure that the compatibility setting is at the minimum, which is <code class="codeph">11.2.0.0</code>.
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-FC737030-FB70-4E7E-809D-22ABAF8A4C09__GUID-E3D7450D-3507-4CCD-9722-EFAA4AD01832">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../refrn/COMPATIBLE.html#REFRN10019" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for more information about the <code class="codeph">COMPATIBLE</code> parameter
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN11099" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about initialization parameter files
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-058B849C-6014-4730-B395-E1FF36900F0F" title="You must set the COMPATIBLE initialization parameter before creating an encrypted tablespace.">Step 1: Set the COMPATIBLE Initialization Parameter for Tablespace Encryption</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10517"></a><div class="props_rev_3"><a id="GUID-DE637157-E201-482D-B12D-F5C59FF9618D" name="GUID-DE637157-E201-482D-B12D-F5C59FF9618D"></a><h6 id="ASOAG-GUID-DE637157-E201-482D-B12D-F5C59FF9618D" class="sect6">Setting the COMPATIBLE Initialization Parameter for Tablespace Encryption</h6>
                        <div>
                           <p>To set the <code class="codeph">COMPATIBLE</code> initialization parameter, you must edit the initialization parameter file for the database instance.
                           </p>
                           <div class="section">
                              <ol>
                                 <li>
                                    <p>Log in to the database instance.</p>
                                    <p>In a multitenant environment, log in to the PDB. For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin@hrpdb
Enter password: <span class="italic">password</span>
Connected.
</pre><p>To find the available PDBs, run the <code class="codeph">show pdbs</code> command. To check the current PDB, run the <code class="codeph">show con_name</code> command. 
                                    </p>
                                 </li>
                                 <li>
                                    <p>Check the current setting of the <code class="codeph">COMPATIBLE</code> parameter.
                                    </p>
                                    <p>For example: </p><pre class="oac_no_warn" dir="ltr">SHOW PARAMETER COMPATIBLE
 
NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
compatible                           string      11.2.0.0
noncdbcompatible                     BOOLEAN     FALSE
</pre></li>
                                 <li>
                                    <p>If you must change the <code class="codeph">COMPATIBLE</code> parameter, then complete the remaining steps in this procedure.
                                    </p>
                                    <p>The value should be 11.2.0.0 or higher. </p>
                                 </li>
                                 <li>
                                    <p>From the command line, locate the initialization parameter file for the database instance. </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><span class="bold">UNIX systems:</span> This file is in the <span class="italic"><code class="codeph">ORACLE_HOME</code></span><code class="codeph">/dbs</code> directory and is named <code class="codeph">init</code><span class="italic"><code class="codeph">ORACLE_SID</code></span><code class="codeph">.ora</code> (for example, <code class="codeph">initmydb.ora</code>).
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="bold">Windows systems:</span> This file is in the <span class="italic"><code class="codeph">ORACLE_HOME</code></span><code class="codeph">\database</code> directory and is named <code class="codeph">init</code><span class="italic"><code class="codeph">ORACLE_SID</code></span><code class="codeph">.ora</code> (for example, <code class="codeph">initmydb.ora</code>).
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p>Edit the initialization parameter file to use the new <code class="codeph">COMPATIBLE</code> setting. 
                                    </p>
                                    <p>For example:</p><pre class="oac_no_warn" dir="ltr">compatible=12.2.0.0.0</pre></li>
                                 <li>
                                    <p>In SQL*Plus, connect as a user who has the <code class="codeph">SYSDBA</code> administrative privilege, and then restart the database.
                                    </p>
                                    <p>For example: </p><pre class="oac_no_warn" dir="ltr">CONNECT /AS SYSDBA
SHUTDOWN
STARTUP
</pre><p>If tablespace encryption is in use, then open the keystore at the database mount. The keystore must be open before you can access data in an encrypted tablespace. </p>
                                    <p>For example:</p><pre class="oac_no_warn" dir="ltr">STARTUP MOUNT;
ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN IDENTIFIED BY <span class="italic">keystore_password</span>;
ALTER DATABASE OPEN;</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-058B849C-6014-4730-B395-E1FF36900F0F" title="You must set the COMPATIBLE initialization parameter before creating an encrypted tablespace.">Step 1: Set the COMPATIBLE Initialization Parameter for Tablespace Encryption</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ASOAG9556"></a><div class="props_rev_3"><a id="GUID-A00B8C8A-3C98-41A5-BB80-EC7BE3E46252" name="GUID-A00B8C8A-3C98-41A5-BB80-EC7BE3E46252"></a><h5 id="ASOAG-GUID-A00B8C8A-3C98-41A5-BB80-EC7BE3E46252" class="sect5">Step 2: Set the Tablespace TDE Master Encryption Key</h5>
                     <div>
                        <p>You should ensure that you have configured the TDE master encryption key.</p>
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Set the TDE master encryption key as follows:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>For software TDE master encryption keys, see <a href="configuring-transparent-data-encryption.html#GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8" title="Once the keystore is open, you can set a TDE master encryption key for it.">Step 4: Set the TDE Master Encryption Key in the Software Keystore</a>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>For hardware TDE master encryption keys, see <a href="configuring-transparent-data-encryption.html#GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" title="After you have opened the hardware keystore, you are ready to set the hardware keystore TDE master encryption key.">Step 4: Set the Hardware Keystore TDE Master Encryption Key</a>.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-F95E13AA-FE30-423B-930C-13D355CE46B3" title="When you create a new tablespace, you can configure its encryption settings during the creation process.">Creating an Encrypted New Tablespace</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG9558"></a><div class="props_rev_3"><a id="GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B" name="GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B"></a><h5 id="ASOAG-GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B" class="sect5">Step 3: Create the Encrypted Tablespace</h5>
                     <div>
                        <p>After you have set the <code class="codeph">COMPATIBLE</code> initialization parameter, you are ready to create the encrypted tablespace.
                        </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-5B8CCF8D-278D-411B-B8EF-F69F9364D762">About Creating Encrypted Tablespaces</a><br>To create an encrypted tablespace, you can use the <code class="codeph">CREATE TABLESPACE</code> SQL statement.
                           </li>
                           <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-A0D33E93-FC64-45F1-B45A-D0D80AD37176">Creating an Encrypted Tablespace</a><br>To create an encrypted tablespace, you must use the <code class="codeph">CREATE TABLESPACE</code> statement with the <code class="codeph">ENCRYPTION USING</code> clause.
                           </li>
                           <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-9E5ACD09-D598-4DB1-8C8F-1BB5F646B6E9">Example: Creating an Encrypted Tablespace That Uses AES192</a><br>You can use the <code class="codeph">CREATE TABLESPACE</code> SQL statement to create an encrypted tablespace. 
                           </li>
                           <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-A7FE953F-048E-462F-8E2A-851A05AF9A04">Example: Creating an Encrypted Tablespace That Uses the Default Algorithm</a><br>You can use the <code class="codeph">CREATE TABLESPACE</code> SQL statement to create an encrypted tablespace that uses the default algorithm.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-F95E13AA-FE30-423B-930C-13D355CE46B3" title="When you create a new tablespace, you can configure its encryption settings during the creation process.">Creating an Encrypted New Tablespace</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ASOAG10308"></a><div class="props_rev_3"><a id="GUID-5B8CCF8D-278D-411B-B8EF-F69F9364D762" name="GUID-5B8CCF8D-278D-411B-B8EF-F69F9364D762"></a><h6 id="ASOAG-GUID-5B8CCF8D-278D-411B-B8EF-F69F9364D762" class="sect6">About Creating Encrypted Tablespaces</h6>
                        <div>
                           <p>To create an encrypted tablespace, you can use the <code class="codeph">CREATE TABLESPACE</code> SQL statement.
                           </p>
                           <p> You must have the <code class="codeph">CREATE TABLESPACE</code> system privilege to create an encrypted tablespace. 
                           </p>
                           <p>You can import data into an encrypted tablespace by using Oracle Data Pump. You can also use a SQL statement such as <code class="codeph">CREATE TABLE...AS SELECT...</code> or <code class="codeph">ALTER TABLE...MOVE...</code> to move data into an encrypted tablespace. The <code class="codeph">CREATE TABLE...AS SELECT...</code> statement creates a table from an existing table. The <code class="codeph">ALTER TABLE...MOVE...</code> statement moves a table into the encrypted tablespace.
                           </p>
                           <p>For security reasons, you cannot encrypt a tablespace with the <code class="codeph">NO SALT</code> option. 
                           </p>
                           <p>You can query the <code class="codeph">ENCRYPTED</code> column of the <code class="codeph">DBA_TABLESPACES</code> and <code class="codeph">USER_TABLESPACES</code> data dictionary views to verify if a tablespace was encrypted.
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-5B8CCF8D-278D-411B-B8EF-F69F9364D762__GUID-A14F401C-494B-409F-A962-A6E84FD8FF06">
                              <p class="notep1">See Also:</p>
                              <p><span><cite>Oracle Database Reference</cite></span> for more information about the <a href="../refrn/DBA_TABLESPACES.html#REFRN23287" target="_blank"><code class="codeph">DBA_TABLESPACES</code></a> and <a href="../refrn/USER_TABLESPACES.html#REFRN26287" target="_blank"><code class="codeph">USER_TABLESPACES</code></a> data dictionary views
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B" title="After you have set the COMPATIBLE initialization parameter, you are ready to create the encrypted tablespace.">Step 3: Create the Encrypted Tablespace</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10309"></a><div class="props_rev_3"><a id="GUID-A0D33E93-FC64-45F1-B45A-D0D80AD37176" name="GUID-A0D33E93-FC64-45F1-B45A-D0D80AD37176"></a><h6 id="ASOAG-GUID-A0D33E93-FC64-45F1-B45A-D0D80AD37176" class="sect6">Creating an Encrypted Tablespace</h6>
                        <div>
                           <p>To create an encrypted tablespace, you must use the <code class="codeph">CREATE TABLESPACE</code> statement with the <code class="codeph">ENCRYPTION USING</code> clause.
                           </p>
                           <div class="section">
                              <ol>
                                 <li>
                                    <p>Log in to the database instance as a user who has been granted the <code class="codeph">CREATE TABLESPACE</code> system privilege.
                                    </p>
                                    <p>In a multitenant environment, log in to the PDB. For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin@hrpdb as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre><p>To find the available PDBs, run the <code class="codeph">show pdbs</code> command. To check the current PDB, run the <code class="codeph">show con_name</code> command. 
                                    </p>
                                 </li>
                                 <li>
                                    <p>Run the <code class="codeph">CREATE TABLESPACE</code> statement, using its encryption clauses. 
                                    </p>
                                    <p>For example: </p><pre class="oac_no_warn" dir="ltr">CREATE TABLESPACE encrypt_ts
  DATAFILE '$ORACLE_HOME/dbs/encrypt_df.dbf' SIZE 1M
  <span class="bold">ENCRYPTION USING 'AES256' ENCRYPT;</span>
</pre><p>In this specification: </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">ENCRYPTION USING 'AES256' ENCRYPT</code> specifies the encryption algorithm and the key length for the encryption. The <code class="codeph">ENCRYPT</code> clause encrypts the tablespace. Enclose this setting in single quotation marks (' '). The key lengths are included in the names of the algorithms. If you do not specify an encryption algorithm, then the default encryption algorithm, <code class="codeph">AES128</code>, is used. 
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-A0D33E93-FC64-45F1-B45A-D0D80AD37176__GUID-E1D5B7FD-161E-453C-954E-947065EC4B53">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="By default, Transparent Data Encryption (TDE) Column encryption uses the Advanced Encryption Standard (AES).">Supported Encryption and Integrity Algorithms</a></p>
                                 </li>
                                 <li>
                                    <p><a href="../sqlrf/CREATE-TABLESPACE.html#SQLRF01403" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B" title="After you have set the COMPATIBLE initialization parameter, you are ready to create the encrypted tablespace.">Step 3: Create the Encrypted Tablespace</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10160"></a><a id="ASOAG10310"></a><div class="props_rev_3"><a id="GUID-9E5ACD09-D598-4DB1-8C8F-1BB5F646B6E9" name="GUID-9E5ACD09-D598-4DB1-8C8F-1BB5F646B6E9"></a><h6 id="ASOAG-GUID-9E5ACD09-D598-4DB1-8C8F-1BB5F646B6E9" class="sect6">Example: Creating an Encrypted Tablespace That Uses AES192</h6>
                        <div>
                           <p>You can use the <code class="codeph">CREATE TABLESPACE</code> SQL statement to create an encrypted tablespace. 
                           </p>
                           <p><a href="configuring-transparent-data-encryption.html#GUID-9E5ACD09-D598-4DB1-8C8F-1BB5F646B6E9__CJABGBEJ">Example 3-8</a> creates a tablespace called <code class="codeph">securespace_1</code> that is encrypted using the <code class="codeph">AES192</code> algorithm. The key length is 192 bits.
                           </p>
                           <div class="example" id="GUID-9E5ACD09-D598-4DB1-8C8F-1BB5F646B6E9__CJABGBEJ">
                              <p class="titleinexample">Example 3-8 Creating an Encrypted Tablespace That Uses AES192</p><pre class="oac_no_warn" dir="ltr">CREATE TABLESPACE securespace_1
DATAFILE '/home/user/oradata/secure01.dbf'
SIZE 150M
ENCRYPTION USING 'AES192' ENCRYPT;</pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B" title="After you have set the COMPATIBLE initialization parameter, you are ready to create the encrypted tablespace.">Step 3: Create the Encrypted Tablespace</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10161"></a><div class="sect5"><a id="GUID-A7FE953F-048E-462F-8E2A-851A05AF9A04" name="GUID-A7FE953F-048E-462F-8E2A-851A05AF9A04"></a><h6 id="ASOAG-GUID-A7FE953F-048E-462F-8E2A-851A05AF9A04" class="sect6">Example: Creating an Encrypted Tablespace That Uses the Default Algorithm</h6>
                        <div>
                           <p>You can use the <code class="codeph">CREATE TABLESPACE</code> SQL statement to create an encrypted tablespace that uses the default algorithm.
                           </p>
                           <p><a href="configuring-transparent-data-encryption.html#GUID-A7FE953F-048E-462F-8E2A-851A05AF9A04__CJADCCEH">Example 3-9</a> creates a tablespace called <code class="codeph">securespace_2</code>. Because no encryption algorithm is specified, the default encryption algorithm (<code class="codeph">AES128</code>) is used. The key length is 128 bits.
                           </p>
                           <p>You cannot encrypt an existing tablespace. </p>
                           <div class="example" id="GUID-A7FE953F-048E-462F-8E2A-851A05AF9A04__CJADCCEH">
                              <p class="titleinexample">Example 3-9 Creating an Encrypted Tablespace That Uses the Default Algorithm</p><pre class="oac_no_warn" dir="ltr">CREATE TABLESPACE securespace_2
DATAFILE '/home/user/oradata/secure01.dbf'
SIZE 150M
ENCRYPTION ENCRYPT;
</pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B" title="After you have set the COMPATIBLE initialization parameter, you are ready to create the encrypted tablespace.">Step 3: Create the Encrypted Tablespace</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9D9BDB52-CA0F-4275-B16E-B71173C76D56" name="GUID-9D9BDB52-CA0F-4275-B16E-B71173C76D56"></a><h4 id="ASOAG-GUID-9D9BDB52-CA0F-4275-B16E-B71173C76D56" class="sect4">Encrypting Future Tablespaces</h4>
                  <div>
                     <p>You can configure Oracle Database to automatically encrypt future tablespaces that you will create. </p>
                     <p></p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-A288B628-28B5-4A4F-9F08-395B0BB49871">About Encrypting Future Tablespaces</a><br>The ability to encrypt future tablespaces can help prevent data breaches in Oracle Cloud environments. 
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-63BC7CE0-1EB8-44D2-9C4D-D85294AF00AE">Setting Future Tablespaces to be Encrypted</a><br>You can set the <code class="codeph">ENCRYPT_NEW_TABLESPACES</code> database initialization parameter to automatically encrypt future tablespaces that you create.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="You can perform encryption operations on both offline and online tablespaces and databases.">Encryption Conversions for Tablespaces and Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-A288B628-28B5-4A4F-9F08-395B0BB49871" name="GUID-A288B628-28B5-4A4F-9F08-395B0BB49871"></a><h5 id="ASOAG-GUID-A288B628-28B5-4A4F-9F08-395B0BB49871" class="sect5">About Encrypting Future Tablespaces</h5>
                     <div>
                        <p>The ability to encrypt future tablespaces can help prevent data breaches in Oracle Cloud environments. </p>
                        <p>The <code class="codeph">ENCRYPT_NEW_TABLESPACES</code> database initialization parameter controls how future databases are encrypted. 
                        </p>
                        <p>You can create and run an Oracle database completely in Oracle Cloud. Because this configuration hosts the customer’s data in the Cloud, Oracle recommends that you enable encryption as much as possible. A long-term goal is to encrypt all data in Oracle Cloud. Alternatively, you can have the database both in the Cloud and on premises.</p>
                        <p>In an Oracle Cloud environment, the following scenarios may occur when you create encrypted tablespaces in Oracle Cloud and on-premises environments:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You create a test database in Oracle Cloud and the tablespaces were encrypted by using when the <code class="codeph">ENCRYPT_NEW_TABLESPACE</code> parameter has been set to automatically create the Cloud database as encrypted. However, you may not have the intention or even an Advanced Security Option license to bring the encrypted database back on premises. 
                              </p>
                           </li>
                           <li>
                              <p>You create a hybrid definer’s rights environment where the primary database is on premises and the standby database is on Oracle Cloud. If a switchover operation takes place, then the new primary is on Oracle Cloud. If a new tablespace is transparently encrypted, then a similar scenario to the first item in this list may occur. For example, suppose you do not have an Advanced Security Option (ASO) license, and you have an automatically encrypted tablespace in the Oracle Cloud. The standby database on premises is also automatically encrypted. In this case, because you do not have an ASO license, you cannot use the standby database. To remedy this problem, set the <code class="codeph">ENCRYPT_NEW_TABLESPACES</code> to DDL, which prevents the encryption of the tablespace in Oracle Cloud. 
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-9D9BDB52-CA0F-4275-B16E-B71173C76D56" title="You can configure Oracle Database to automatically encrypt future tablespaces that you will create.">Encrypting Future Tablespaces</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-63BC7CE0-1EB8-44D2-9C4D-D85294AF00AE" name="GUID-63BC7CE0-1EB8-44D2-9C4D-D85294AF00AE"></a><h5 id="ASOAG-GUID-63BC7CE0-1EB8-44D2-9C4D-D85294AF00AE" class="sect5">Setting Future Tablespaces to be Encrypted</h5>
                     <div>
                        <p>You can set the <code class="codeph">ENCRYPT_NEW_TABLESPACES</code> database initialization parameter to automatically encrypt future tablespaces that you create.
                        </p>
                        <ul>
                           <li class="stepexpand"><span>In SQL*Plus, enter the following <code class="codeph">ALTER SYSTEM</code> statement:</span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET ENCRYPT_NEW_TABLESPACES = <span class="italic">value</span>;</pre><p>In this specification, <code class="codeph"><span class="codeinlineitalic">value</span></code> can be:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">CLOUD_ONLY</code> transparently encrypts the tablespace in the Cloud using the <code class="codeph">AES128</code> algorithm if you do not specify the <code class="codeph">ENCRYPTION</code> clause of the <code class="codeph">CREATE TABLESPACE</code> SQL statement. It applies only to an Oracle Cloud environment. If you create the tablespace on premise, then it will follow the <code class="codeph">CREATE TABLESPACE</code> statement specification that you enter. For example, if you omit the <code class="codeph">ENCRYPTION</code> clause, then the tablespace is created unencrypted. If you include this clause and use a different algorithm, then the tablespace will use that algorithm. <code class="codeph">CLOUD_ONLY</code> is the default.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">ALWAYS</code> automatically encrypts the tablespace using the <code class="codeph">AES128</code> algorithm if you omit the <code class="codeph">ENCRYPTION</code> clause of <code class="codeph">CREATE TABLESPACE</code>, for both the Cloud and premises scenarios.
                                       </p> If you do provide the <code class="codeph">ENCRYPTION</code> clause, however, the algorithm that you specify takes precedence over <code class="codeph">AES128</code>.
                                    </li>
                                    <li>
                                       <p><code class="codeph">DDL</code> encrypts the tablespace using the specified setting of the <code class="codeph">ENCRYPTION</code> clause of <code class="codeph">CREATE TABLESPACE</code>, for both Oracle Cloud and on-premises environments.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=REFRN-GUID-44EF2AAC-1313-4437-B0F3-A427F45016F2" target="_blank">ENCRYPT_NEW_TABLESPACES</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-9D9BDB52-CA0F-4275-B16E-B71173C76D56" title="You can configure Oracle Database to automatically encrypt future tablespaces that you will create.">Encrypting Future Tablespaces</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-833FDC4E-0980-4291-8F56-53BD6C8F7EEF" name="GUID-833FDC4E-0980-4291-8F56-53BD6C8F7EEF"></a><h4 id="ASOAG-GUID-833FDC4E-0980-4291-8F56-53BD6C8F7EEF" class="sect4">Encrypted Sensitive Credential Data in the Data Dictionary</h4>
                  <div>
                     <p>You can encrypt sensitive credential data in the <code class="codeph">SYS.LINK$</code> and <code class="codeph">SYS.SCHEDULER$_CREDENTIAL</code> system tables.
                     </p>
                     <p>By default, the credential data in the <code class="codeph">SYS.LINK$</code> and <code class="codeph">SYS.SCHEDULER$_CREDENTIAL</code> system tables is obfuscated. However, because of the availability of many types of de-obfuscation algorithms, Oracle recommends that you encrypt this sensitive credential data. To check the status the data dictionary credentials, you can query the <code class="codeph">DICTIONARY_CREDENTIALS_ENCRYPT</code> data dictionary view. 
                     </p>
                     <p>The encryption of sensitive credential data in these two system tables uses Transparent Data Encryption. Encryption of credential data uses the AES256 algorithm. To encrypt credential data, you do not need an Oracle Advanced Security Option license, but you must be granted the <code class="codeph">SYSKM</code> administrative privilege and the database must have an open keystore. 
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/encrypt-sensitive-data.html#DBSEG-GUID-F9451BB4-8BF5-4E0B-8C49-8CE9C0C4AB1F" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="You can perform encryption operations on both offline and online tablespaces and databases.">Encryption Conversions for Tablespaces and Databases</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35" name="GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35"></a><h4 id="ASOAG-GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35" class="sect4">Encryption Conversions for Existing Offline Tablespaces</h4>
                  <div>
                     <p>You can perform offline encryption conversions by using the <code class="codeph">ALTER TABLESPACE</code> SQL statement <code class="codeph">OFFLINE</code>, <code class="codeph">ENCRYPT</code>, and <code class="codeph">DECRYPT</code> clauses.
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-689A82BA-F09A-47AB-8A81-41375F833C7D">About Encryption Conversion for Existing Offline Tablespaces</a><br>You can encrypt or decrypt an existing data file of a user tablespace when the tablespace is offline or when the database is not open. 
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-57B9D24B-02CC-4DEF-909E-81577E35DD5F">Encrypting an Existing User-Defined Tablespace with Offline Conversion</a><br>To encrypt an existing tablespace with offline conversion, you can use the <code class="codeph">ALTER TABLESPACE</code> SQL statement with the <code class="codeph">OFFLINE</code> and <code class="codeph">ENCRYPT</code> clauses.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-68BAB7C8-2757-4513-BE78-CA251C27B65F">Decrypting an Existing Tablespace with Offline Conversion</a><br>To decrypt an existing tablespace with offline conversion, you can use the <code class="codeph">ALTER TABLESPACE</code> SQL statement with the <code class="codeph">OFFLINE</code> and <code class="codeph">DECRYPT</code> clauses.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="You can perform encryption operations on both offline and online tablespaces and databases.">Encryption Conversions for Tablespaces and Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-689A82BA-F09A-47AB-8A81-41375F833C7D" name="GUID-689A82BA-F09A-47AB-8A81-41375F833C7D"></a><h5 id="ASOAG-GUID-689A82BA-F09A-47AB-8A81-41375F833C7D" class="sect5">About Encryption Conversion for Existing Offline Tablespaces</h5>
                     <div>
                        <p>You can encrypt or decrypt an existing data file of a user tablespace when the tablespace is offline or when the database is not open. </p>
                        <p>Use the offline encryption method if you do not plan to change the compatibility of your databases from Oracle Database 11c release 2 (11.2) or Oracle Database 12c release 1 (12.1) to release 18c, which is irreversible. The offline encryption method is also useful if you want to quickly make use of Transparent Data Encryption before you upgrade this database to release 18c. You can both encrypt and decrypt offline tablespaces.</p>
                        <p>Note the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If you want to encrypt the Oracle Database-supplied tablespaces (<code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, and <code class="codeph">UNDO</code>) using the offline conversion method, then you must use the method that is described in <a href="configuring-transparent-data-encryption.html#GUID-F64315CB-F80F-4F06-B7B1-A71A80B96710" title="When you encrypt an existing database with offline conversion, for the Oracle-managed tablespaces, you do not specify an encryption algorithm.">Encrypting an Existing Database with Offline Conversion</a>.
                              </p>
                           </li>
                           <li>
                              <p>You can use the online method to rekey a tablespace that was previously encrypted with the offline method.</p>
                           </li>
                           <li>
                              <p>If you have configured Oracle Data Guard, you can minimize downtime by encrypting the tablespaces on the standby first, switching over to the primary, and then encrypting the tablespaces on the primary. </p>
                           </li>
                           <li>
                              <p>You can use the <code class="codeph">USING ... ENCRYPT</code> clause to specify an encryption algorithm. Supported algorithms include <code class="codeph">AES128</code>, <code class="codeph">AES192</code>, <code class="codeph">AES256</code>, and others, such as <code class="codeph">ARIA</code> and <code class="codeph">GOST</code>. To check the encryption key, query the <code class="codeph">ENCRYPTIONALG</code> column in the <code class="codeph">V$DATABASE_KEY_INFO</code> view.
                              </p>
                           </li>
                           <li>
                              <p>You can use the <code class="codeph">ALTER TABLESPACE</code> statement to convert offline tablespaces in parallel by using multiple foreground sessions to encrypt different data files.
                              </p>
                           </li>
                           <li>
                              <p>If you are using Oracle Data Guard, you can minimize the downtime by encrypting the tablespaces on the standby first, switching over, and then encrypting the tablespaces on the original primary next.</p>
                           </li>
                           <li>
                              <p>For Oracle Database 11g release 2 (11.2.0.4) and Oracle Database 12c release 1 (12.1.0.2), you cannot perform an offline encryption of the <code class="codeph">SYSTEM</code> and <code class="codeph">SYSAUX</code> tablespaces. Also, Oracle does not recommend encrypting offline the <code class="codeph">UNDO</code> tablespace in these releases. Doing so prevents the keystore from being closed, and this prevents the database from functioning. In addition, encrypting the <code class="codeph">UNDO</code> tablespace while the database is offline is not necessary because all undo records that are associated with any encrypted tablespaces are already automatically encrypted in the <code class="codeph">UNDO</code> tablespace. If you want to encrypt the <code class="codeph">TEMP</code> tablespace, you must drop and then recreate it as encrypted.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="By default, Transparent Data Encryption (TDE) Column encryption uses the Advanced Encryption Standard (AES).">Supported Encryption and Integrity Algorithms</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35" title="You can perform offline encryption conversions by using the ALTER TABLESPACE SQL statement OFFLINE, ENCRYPT, and DECRYPT clauses.">Encryption Conversions for Existing Offline Tablespaces</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-57B9D24B-02CC-4DEF-909E-81577E35DD5F" name="GUID-57B9D24B-02CC-4DEF-909E-81577E35DD5F"></a><h5 id="ASOAG-GUID-57B9D24B-02CC-4DEF-909E-81577E35DD5F" class="sect5">Encrypting an Existing User-Defined Tablespace with Offline Conversion</h5>
                     <div>
                        <p>To encrypt an existing tablespace with offline conversion, you can use the <code class="codeph">ALTER TABLESPACE</code> SQL statement with the <code class="codeph">OFFLINE</code> and <code class="codeph">ENCRYPT</code> clauses.
                        </p>
                        <div class="section">The procedure that is described in this section applies to the case where you want to encrypt individual user-created tablespaces within a database. These tablespaces can be encrypted offline. However, the Oracle Database-supplied <code class="codeph">SYSTEM</code> and <code class="codeph">UNDO</code> tablespaces cannot be brought offline. If you want to encrypt the tablespaces offline, then you must use the method that is described in <a href="configuring-transparent-data-encryption.html#GUID-F64315CB-F80F-4F06-B7B1-A71A80B96710" title="When you encrypt an existing database with offline conversion, for the Oracle-managed tablespaces, you do not specify an encryption algorithm.">Encrypting an Existing Database with Offline Conversion</a>.
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect as a user who has the <code class="codeph">SYSDBA</code> administrative privilege.</span><div>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba
Enter password: <span class="italic">password</span></pre><p>You must have the <code class="codeph">SYSDBA</code> administrative privilege if you plan to encrypt the <code class="codeph">SYSTEM</code> and <code class="codeph">SYSAUX</code> tablespaces. Otherwise, connect with the <code class="codeph">SYSKM</code> administrative privilege.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Bring the tablespace offline.</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users OFFLINE NORMAL;</pre></div>
                           </li>
                           <li class="stepexpand"><span>Back up the tablespace. </span><div>
                                 <p>The offline conversion method does not use auxiliary disk space or files, and it operates directly in-place to the data files. Therefore, you should perform a full backup of the user tablespace before converting it offline. </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>As a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege, open the software keystore.</span><div>For example:<pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN IDENTIFIED BY <span class="italic">software_keystore_password</span>; </pre></div>
                           </li>
                           <li class="stepexpand"><span>Encrypt the tablespace.</span><div>For example, to encrypt an entire tablespace, include its data files:<pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users1 ENCRYPTION OFFLINE ENCRYPT;</pre><p>This example encrypts the tablespace with the default encryption algorithm, <code class="codeph">AES128</code>. To use a different encryption algorithm, enter a statement similar to the following:
                                 </p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users2 ENCRYPTION OFFLINE USING 'AES256' ENCRYPT;</pre></div>
                              <div>To encrypt individual data files within a tablespace, use the <code class="codeph">ALTER DATABASE DATAFILE</code> SQL statement. For example, to encrypt the data files <code class="codeph">user_01.dbf</code> and <code class="codeph">user_02.dbf</code>:<pre class="oac_no_warn" dir="ltr">ALTER DATABASE DATAFILE 'user_01.dbf' ENCRYPT;
ALTER DATABASE DATAFILE 'user_02.dbf' ENCRYPT;</pre><p>In the same database session, these statements encrypt each of the data files in sequence, one after another. If you execute each statement in its own database session, then they will be executed in parallel. </p>
                              </div>
                              <div>If the encryption process is interrupted, then rerun the <code class="codeph">ALTER TABLESPACE</code> statement. The kinds of errors that you can expect in an interruption are general errors, such as file system or storage file system errors. The data files within the tablespace should be consistently encrypted. For example, suppose you offline a tablespace that has 10 files but for some reason, the encryption only completes for nine of the files, leaving one decrypted. Although it is possible to bring the tablespace back online with such inconsistent encryption if the <code class="codeph">COMPATIBLE</code> parameter is set to <code class="codeph">12.2.0.0</code> or higher, then it is not recommended to leave the tablespace in this state. If <code class="codeph">COMPATIBLE</code> is less than <code class="codeph">12.2.0.0</code>, then it is not possible to bring the tablespace online if the encryption property is inconsistent across the data files.
                              </div>
                           </li>
                           <li class="stepexpand"><span>Bring the tablespace back online or open the database.</span><ul>
                                 <li>To bring the tablespace back online:<pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users ONLINE;</pre></li>
                                 <li>
                                    <p>To open a database in a non-multitenant environment:</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN</pre></li>
                                 <li>
                                    <p>In a multitenant environment, you can encrypt a data file or tablespace with the offline method if the root is open and the PDB is not open. For example, for a PDB named <code class="codeph">hr_pdb</code>:
                                    </p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE hr_pdb OPEN</pre></li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-A9C23E31-CF57-477A-9E85-856DD411718D" title="To open a software keystore, you must use the ADMINISTER KEY MANAGEMENT statement with the SET KEYSTORE OPEN clause.">Opening a Software Keystore</a></li>
                              <li><a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="By default, Transparent Data Encryption (TDE) Column encryption uses the Advanced Encryption Standard (AES).">Supported Encryption and Integrity Algorithms</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35" title="You can perform offline encryption conversions by using the ALTER TABLESPACE SQL statement OFFLINE, ENCRYPT, and DECRYPT clauses.">Encryption Conversions for Existing Offline Tablespaces</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-68BAB7C8-2757-4513-BE78-CA251C27B65F" name="GUID-68BAB7C8-2757-4513-BE78-CA251C27B65F"></a><h5 id="ASOAG-GUID-68BAB7C8-2757-4513-BE78-CA251C27B65F" class="sect5">Decrypting an Existing Tablespace with Offline Conversion</h5>
                     <div>
                        <p>To decrypt an existing tablespace with offline conversion, you can use the <code class="codeph">ALTER TABLESPACE</code> SQL statement with the <code class="codeph">OFFLINE</code> and <code class="codeph">DECRYPT</code> clauses.
                        </p>
                        <ol>
                           <li class="stepexpand"><span>Connect as a user who has the <code class="codeph">SYSDBA</code> administrative privilege.</span><div>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba
Enter password: <span class="italic">password</span></pre><p>You must have the <code class="codeph">SYSDBA</code> administrative privilege if you plan to decrypt the <code class="codeph">SYSTEM</code> and <code class="codeph">SYSAUX</code> tablespaces. Otherwise, connect with the <code class="codeph">SYSKM</code> administrative privilege.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Bring the tablespace offline.</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users OFFLINE NORMAL;</pre></div>
                           </li>
                           <li class="stepexpand"><span>As a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege, open the keystore.</span><div>For example:<pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN IDENTIFIED BY <span class="italic">software_keystore_password</span>; </pre></div>
                           </li>
                           <li class="stepexpand"><span>Run the <code class="codeph">ALTER TABLESPACE</code> SQL statement to perform the decryption. </span><div>For example, for a tablespace called <code class="codeph">users</code>:<pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users ENCRYPTION OFFLINE DECRYPT; </pre></div>
                              <div>
                                 <p>If the decryption process is interrupted, then rerun the <code class="codeph">ALTER TABLESPACE</code> statement. The kinds of errors that you can expect in an interruption are general errors, such as file system or storage file system errors. The data files within the tablespace should be consistently decrypted. For example, suppose you offline a tablespace that has 10 files but for some reason, the decryption only completes for nine of the files, leaving one encrypted. Although it is possible to bring the tablespace back online with such inconsistent decryption if the <code class="codeph">COMPATIBLE</code> parameter is set to <code class="codeph">12.2.0.0</code> or higher, then it is not recommended to leave the tablespace in this state. If <code class="codeph">COMPATIBLE</code> is less than <code class="codeph">12.2.0.0</code>, then it is not possible to bring the tablespace online if the encryption property is inconsistent across the data files.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Bring the tablespace online.</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users ONLINE;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-A9C23E31-CF57-477A-9E85-856DD411718D" title="To open a software keystore, you must use the ADMINISTER KEY MANAGEMENT statement with the SET KEYSTORE OPEN clause.">Opening a Software Keystore</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35" title="You can perform offline encryption conversions by using the ALTER TABLESPACE SQL statement OFFLINE, ENCRYPT, and DECRYPT clauses.">Encryption Conversions for Existing Offline Tablespaces</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" name="GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19"></a><h4 id="ASOAG-GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" class="sect4">Encryption Conversions for Existing Online Tablespaces</h4>
                  <div>
                     <p>You can encrypt and decrypt an online existing tablespace by using the <code class="codeph">ALTER TABLESPACE</code> SQL statement with the <code class="codeph">ONLINE</code> and <code class="codeph">ENCRYPT</code> or <code class="codeph">DECRYPT</code> clauses.
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C">About Encryption Conversion for Existing Online Tablespaces</a><br>You can encrypt, decrypt, or rekey existing user tablespaces, and the <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, and <code class="codeph">UNDO</code> tablespace when they are online. 
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF">Encrypting an Existing Tablespace with Online Conversion</a><br>To encrypt an existing tablespace with online conversion, use <code class="codeph">ALTER TABLESPACE</code> with the <code class="codeph">ONLINE</code> and <code class="codeph">ENCRYPT</code> clauses.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-EC3DF033-8975-4233-B4A5-B933A48897E7">Rekeying an Existing Tablespace with Online Conversion</a><br>To rekey an existing tablespace that is online, you can use the <code class="codeph">REKEY</code> clause of the <code class="codeph">ALTER TABLESPACE</code> SQL statement.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-22675921-3A4C-4E6C-86DD-6172A1526689">Decrypting an Existing Tablespace with Online Conversion</a><br>To decrypt an existing tablespace with online conversion, you can use the <code class="codeph">ALTER TABLESPACE</code> SQL statement with <code class="codeph">DECRYPT</code> clause.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-CD29F72C-780F-455C-B2BB-B089F23025E5">Finishing an Interrupted Online Encryption Conversion</a><br>If an online encryption process is interrupted, then you can complete the conversion by rerunning the <code class="codeph">ALTER TABLESPACE</code> statement using the <code class="codeph">FINISH</code> clause.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="You can perform encryption operations on both offline and online tablespaces and databases.">Encryption Conversions for Tablespaces and Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C" name="GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C"></a><h5 id="ASOAG-GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C" class="sect5">About Encryption Conversion for Existing Online Tablespaces</h5>
                     <div>
                        <p>You can encrypt, decrypt, or rekey existing user tablespaces, and the <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, and <code class="codeph">UNDO</code> tablespace when they are online. 
                        </p>
                        <p>However, you cannot encrypt, decrypt, or rekey a temporary tablespace online. </p>
                        <p>An online tablespace can be created by using the <code class="codeph">ONLINE</code> clause of the <code class="codeph">CREATE TABLESPACE</code> SQL statement. When you encrypt or rekey a tablespace online, the tablespace will have its own independent encryption keys and algorithms. 
                        </p>
                        <p>Note the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If an offline tablespace has been encrypted, then you can rekey it online to use a different algorithm.</p>
                           </li>
                           <li>
                              <p>You can encrypt multiple tablespaces online in parallel by using multiple foreground sessions to encrypt different tablespaces. Within each tablespace, the data files are encrypted sequentially. </p>
                           </li>
                           <li>
                              <p>If the conversion is interrupted, then you can resume the process by issuing the <code class="codeph">FINISH</code> clause of the <code class="codeph">ALTER TABLESPACE</code> SQL statement.
                              </p>
                           </li>
                           <li>
                              <p>A redo log is generated for each online tablespace conversion.</p>
                           </li>
                           <li>
                              <p>Do not encrypt the <code class="codeph">SYSTEM</code> and <code class="codeph">UNDO</code> tablespaces concurrently with other tablespaces. 
                              </p>
                           </li>
                           <li>
                              <p>You cannot use the transportable tablespace feature with Oracle Data Pump while you are encrypting a tablespace.</p>
                           </li>
                           <li>
                              <div class="p">You cannot run the <code class="codeph">ALTER TABLESPACE</code> statement concurrently with the following features:
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">ADMINSTER KEY MANAGEMENT SET KEY</code> SQL statement
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FLASHBACK DATABASE</code> SQL statement
                                       </p>
                                    </li>
                                 </ul> 
                              </div>
                           </li>
                           <li>
                              <p>If you are using Oracle-managed files for the data files, then the encryption process rekeys the data files that are associated with the tablespace and then copies or moves them to the default Oracle-managed files location.</p>
                           </li>
                           <li>
                              <p>You can add new files to the tablespace after you have encrypted it. Oracle Database reformats the new file with the new encryption key. Blocks will be encrypted using the new key.</p>
                           </li>
                           <li>
                              <p>Previous operations that took place in the root or the PDB may require the control files to be cross-checked against the data dictionary before you can begin the online conversion process. An <code class="codeph">ORA-241 operation disallowed: control file is not yet checked against data dictionary</code> error may occur. To resolve this problem, restart the root or PDB, and then try issuing the online conversion commands again. 
                              </p>
                           </li>
                           <li>For security reasons, once online conversion processes a data file, Oracle will zero out the original data file before deletion. This prevents the database from leaving ghost data on disk sectors. However, there is a known limitation that can occur if you are performing an online tablespace conversion at the same time that Oracle Recovery Manager (Oracle RMAN) is validating files. The online tablespace conversion processes each file one at a time. If Oracle RMAN is validating a file at the same time that it is being processed by the online tablespace conversion, then Oracle RMAN could report a corruption problem (<code class="codeph">ORA-01578: ORACLE data block corrupted (file # , block # )</code>). It does this because it sees the blocks that comprise the file as zero. This is a false alarm and you can ignore the error. If this occurs, then try running the Oracle RMAN validation process again. 
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="By default, Transparent Data Encryption (TDE) Column encryption uses the Advanced Encryption Standard (AES).">Supported Encryption and Integrity Algorithms</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" title="You can encrypt and decrypt an online existing tablespace by using the ALTER TABLESPACE SQL statement with the ONLINE and ENCRYPT or DECRYPT clauses.">Encryption Conversions for Existing Online Tablespaces</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF" name="GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF"></a><h5 id="ASOAG-GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF" class="sect5">Encrypting an Existing Tablespace with Online Conversion</h5>
                     <div>
                        <p>To encrypt an existing tablespace with online conversion, use <code class="codeph">ALTER TABLESPACE</code> with the <code class="codeph">ONLINE</code> and <code class="codeph">ENCRYPT</code> clauses.
                        </p>
                        <ol>
                           <li class="stepexpand"><span>Connect as a user who has the <code class="codeph">SYSDBA</code> administrative privilege.</span><div>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba
Enter password: <span class="italic">password</span></pre><p>You must have the <code class="codeph">SYSDBA</code> administrative privilege if you plan to encrypt the <code class="codeph">SYSTEM</code> and <code class="codeph">SYSAUX</code> tablespaces. Otherwise, connect with the <code class="codeph">SYSKM</code> administrative privilege.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Ensure that the <code class="codeph">COMPATIBLE</code> initialization parameter is set to 12.2.0.0. </span><div>
                                 <p>You can use the <code class="codeph">SHOW PARAMETER</code> command to check the current setting of a parameter. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Ensure that the database is open in read-write mode.</span><div>
                                 <p>You can query the <code class="codeph">STATUS</code> column of the <code class="codeph">V$INSTANCE</code> dynamic view to find if a database is open and the <code class="codeph">OPEN_MODE</code> column of the <code class="codeph">V$DATABASE</code> view to find if it in read-write mode. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>If necessary, open the database in read-write mode. </span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN READ WRITE;</pre></div>
                           </li>
                           <li class="stepexpand"><span>Ensure that the auxiliary space is at least the same size as the largest data file of this tablespace.</span><div>
                                 <p>This size requirement is because Oracle Database performs the conversion one file at a time. For example, if the largest data file of the tablespace is 32 GB, then ensure that you have 32 GB of auxiliary space. To find the space used by a data file, query the <code class="codeph">BYTES</code> or <code class="codeph">BLOCKS</code> column of the <code class="codeph">V$DATAFILE</code> dynamic performance view.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Create and open a master encryption key. </span><div>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEYSTORE '<span class="italic">keystore_location</span>' IDENTIFIED BY <span class="italic">software_keystore_password</span>;
ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN IDENTIFIED BY <span class="italic">software_keystore_password</span>;
ADMINISTER KEY MANAGEMENT SET KEY IDENTIFIED BY <span class="italic">software_keystore_password</span> WITH BACKUP;</pre></div>
                           </li>
                           <li class="stepexpand"><span>Run the <code class="codeph">ALTER TABLESPACE</code> statement using the <code class="codeph">ENCRYPTION</code> and <code class="codeph">ENCRYPT</code> clauses to perform the encryption.</span><div>
                                 <p>For example, for a non-Oracle managed files tablespace named <code class="codeph">users</code>:
                                 </p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users ENCRYPTION ONLINE USING 'AES192' ENCRYPT FILE_NAME_CONVERT = ('users.dbf', 'users_enc.dbf');</pre><p>In this example:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">ENCRYPTION ONLINE USING ‘AES192’ ENCRYPT</code> sets the statement to encrypt the tablespace <code class="codeph">users</code> while it is online and assigns it the <code class="codeph">AES192</code> encryption algorithm. If you omit the <code class="codeph">USING </code><code class="codeph"><span class="variable" translate="no">algorithm</span></code> clause, then the default algorithm, <code class="codeph">AES128</code>, is used. For the <code class="codeph">SYSTEM</code> and <code class="codeph">UNDO</code> tablespaces, you can use the <code class="codeph">ENCRYPT</code> clause to encrypt the tablespace, but you cannot specify an encryption algorithm because they must be encrypted with the existing database key the first time. After encrypting the tablespace, use the <code class="codeph">REKEY</code> clause to specify the algorithm.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FILE_NAME_CONVERT</code> specifies one or more pairs of data files that are associated with the tablespace. The first name in the pair is an existing data file, and the second name is for the encrypted version of this data file, which will be created after the <code class="codeph">ALTER TABLESPACE</code> statement successfully executes. If the tablespace has more than one data file, then you must process them all in this statement. Note the following: 
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Separate each file name with a comma, including multiple pairs of files. For example:</p><pre class="oac_no_warn" dir="ltr">FILE_NAME_CONVERT = ('users1.dbf', 'users1_enc.dbf', 'users2.dbf', 'users2_enc.dbf')</pre></li>
                                          <li>
                                             <p>You can specify directory paths in the <code class="codeph">FILE_NAME_CONVERT</code> clause. For example, the following clause converts and moves the matching files of the tablespace from the <code class="codeph">dbs</code> directory to the <code class="codeph">dbs/enc</code> directory: 
                                             </p><pre class="oac_no_warn" dir="ltr">FILE_NAME_CONVERT = ('dbs', 'dbs/enc')</pre></li>
                                          <li>
                                             <p>The <code class="codeph">FILE_NAME_CONVERT</code> clause recognizes patterns. The following example converts the data files <code class="codeph">users_1.dbf</code> and <code class="codeph">users_2.dbf</code> to <code class="codeph">users_enc1.dbf</code> and <code class="codeph">users_enc2.dbf</code>:
                                             </p><pre class="oac_no_warn" dir="ltr">FILE_NAME_CONVERT = ('users', 'users_enc')</pre></li>
                                          <li>
                                             <p>In an Oracle Data Guard environment, include the name of the standby database data file in the <code class="codeph">FILE_NAME_CONVERT</code> settings.
                                             </p>
                                          </li>
                                          <li>
                                             <p>If you are using Oracle-managed file mode, then the new file name is internally assigned, so this file name should not affect your site's file-naming standards. If you are using non-Oracle-managed file mode and if you omit the <code class="codeph">FILE_NAME_CONVERT</code> clause, then Oracle Database internally assigns an auxiliary file name, and then later renames it back to the original name. This enables the encryption process to use the name that you had originally given the file to be encrypted. The renaming operation is effectively creating another copy of the file, hence it is slower than explicitly including the <code class="codeph">FILE_NAME_CONVERT</code> clause. For better performance, include the <code class="codeph">FILE_NAME_CONVERT</code> clause. 
                                             </p>
                                          </li>
                                          <li>
                                             <p>You can find the data files for a tablespace by querying the <code class="codeph">V$DATAFILE</code> or <code class="codeph">V$DATAFILE_HEADER</code> dynamic views.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>By default, data files are in the <code class="codeph">$ORACLE_HOME/dbs</code> directory. If the data files are located there, then you do not have to specify a path. 
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                        <div class="section">After you complete the conversion, you can check the encryption status by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTED_TABLESPACES</code> dynamic view. The <code class="codeph">ENCRYPTIONALG</code> column of this view shows the encryption algorithm that is used. If the conversion process was interrupted, then you can resume it by running <code class="codeph">ALTER TABLESPACE</code> with the <code class="codeph">FINISH</code> clause. For example, if the primary data file converts but the standby data file does not, then you can run <code class="codeph">ALTER TABLESPACE ... FINISH</code> on the standby database for the standby data files. 
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-DE637157-E201-482D-B12D-F5C59FF9618D" title="To set the COMPATIBLE initialization parameter, you must edit the initialization parameter file for the database instance.">Setting the COMPATIBLE Initialization Parameter for Tablespace Encryption</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-CD29F72C-780F-455C-B2BB-B089F23025E5" title="If an online encryption process is interrupted, then you can complete the conversion by rerunning the ALTER TABLESPACE statement using the FINISH clause.">Finishing an Interrupted Online Encryption Conversion</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" title="You can encrypt and decrypt an online existing tablespace by using the ALTER TABLESPACE SQL statement with the ONLINE and ENCRYPT or DECRYPT clauses.">Encryption Conversions for Existing Online Tablespaces</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-EC3DF033-8975-4233-B4A5-B933A48897E7" name="GUID-EC3DF033-8975-4233-B4A5-B933A48897E7"></a><h5 id="ASOAG-GUID-EC3DF033-8975-4233-B4A5-B933A48897E7" class="sect5">Rekeying an Existing Tablespace with Online Conversion</h5>
                     <div>
                        <p>To rekey an existing tablespace that is online, you can use the <code class="codeph">REKEY</code> clause of the <code class="codeph">ALTER TABLESPACE</code> SQL statement.
                        </p>
                        <div class="section">Before you perform a rekey operation, be aware of the following:
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You cannot rekey the <code class="codeph">TEMP</code> tablespace. If you want to assign a different encryption algorithm to a <code class="codeph">TEMP</code> tablespace, then drop <code class="codeph">TEMP</code> and recreate it with the correct encryption algorithm.
                                 </p>
                              </li>
                              <li>
                                 <p>Do not perform an online tablespace rekey operation with a master key operation concurrently. To find if any tablespaces are currently being rekeyed, issue the following query to find the rekey status of encrypted tablespaces: </p><pre class="oac_no_warn" dir="ltr">SELECT TS#,ENCRYPTIONALG,STATUS FROM V$ENCRYPTED_TABLESPACES;</pre><p>A status of <code class="codeph">REKEYING</code> means that the corresponding tablespace is still being rekeyed. Do not rekey the master key while this status is in effect. 
                                 </p>
                              </li>
                           </ul>
                           <p>To rekey an existing tablespace with online conversion:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect as a user who has the <code class="codeph">SYSDBA</code> administrative privilege.</span><div>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba
Enter password: <span class="italic">password</span></pre><p>You must have the <code class="codeph">SYSDBA</code> administrative privilege if you plan to rekey the <code class="codeph">SYSTEM</code> and <code class="codeph">SYSAUX</code> tablespaces. Otherwise, connect with the <code class="codeph">SYSKM</code> administrative privilege.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Ensure that the following requirements are met:</span><ul>
                                 <li>The <code class="codeph">COMPATIBLE</code> initialization parameter is set to 12.2.0.0. 
                                 </li>
                                 <li>The database is open and in read-write mode.</li>
                                 <li>A master encryption key has been created and is open.</li>
                              </ul>
                           </li>
                           <li class="stepexpand"><span>Query the <code class="codeph">KEY_VERSION</code> and <code class="codeph">STATUS</code> columns of the <code class="codeph">V$ENCRYPTED_TABLESPACES</code> dynamic view to find the current status of the encryption algorithm used by the master encryption key. </span></li>
                           <li class="stepexpand" id="GUID-EC3DF033-8975-4233-B4A5-B933A48897E7__PERFORMTHEREKEYOPERATIONBASEDONTHES-438B420C"><span>Perform the rekey operation, based on the status returned by the <code class="codeph">V$ENCRYPTED_TABLESPACES</code> dynamic view:</span><ul>
                                 <li>
                                    <p>If the key version status of the tablespace is <code class="codeph">NORMAL</code>, then specify the new algorithm of the online tablespace rekey.
                                    </p> 
                                    <p>For example:</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users ENCRYPTION USING 'AES192' REKEY FILE_NAME_CONVERT = ('users.dbf', 'users_enc.dbf');</pre></li>
                                 <li>
                                    <p>If the key version status is <code class="codeph">ENCRYPTING</code>, <code class="codeph">DECRYPTING</code>, or <code class="codeph">REKEYING</code>, then use the <code class="codeph">FINISH</code> clause. 
                                    </p>
                                    <p>For example:</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users ENCRYPTION ONLINE FINISH REKEY FILE_NAME_CONVERT = ('users.dbf', 'users_enc.dbf');</pre></li>
                              </ul>
                           </li>
                           <li class="stepexpand"><span>If the <code class="codeph">ORA-00241 operation disallowed: control file inconsistent with data dictionary</code> error appears, then restart the database. </span><div>In a multitenant environment, restart the CDB root database and then retry Step <a href="configuring-transparent-data-encryption.html#GUID-EC3DF033-8975-4233-B4A5-B933A48897E7__PERFORMTHEREKEYOPERATIONBASEDONTHES-438B420C">4</a>.
                              </div>
                           </li>
                        </ol>
                        <div class="section">If the conversion process was interrupted, then you can resume it by running <code class="codeph">ALTER TABLESPACE</code> with the <code class="codeph">FINISH</code> clause. 
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF" title="To encrypt an existing tablespace with online conversion, use ALTER TABLESPACE with the ONLINE and ENCRYPT clauses.">Encrypting an Existing Tablespace with Online Conversion</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C" title="You can encrypt, decrypt, or rekey existing user tablespaces, and the SYSTEM, SYSAUX, and UNDO tablespace when they are online.">About Encryption Conversion for Existing Online Tablespaces</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-CD29F72C-780F-455C-B2BB-B089F23025E5" title="If an online encryption process is interrupted, then you can complete the conversion by rerunning the ALTER TABLESPACE statement using the FINISH clause.">Finishing an Interrupted Online Encryption Conversion</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" title="You can encrypt and decrypt an online existing tablespace by using the ALTER TABLESPACE SQL statement with the ONLINE and ENCRYPT or DECRYPT clauses.">Encryption Conversions for Existing Online Tablespaces</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-22675921-3A4C-4E6C-86DD-6172A1526689" name="GUID-22675921-3A4C-4E6C-86DD-6172A1526689"></a><h5 id="ASOAG-GUID-22675921-3A4C-4E6C-86DD-6172A1526689" class="sect5">Decrypting an Existing Tablespace with Online Conversion</h5>
                     <div>
                        <p>To decrypt an existing tablespace with online conversion, you can use the <code class="codeph">ALTER TABLESPACE</code> SQL statement with <code class="codeph">DECRYPT</code> clause.
                        </p>
                        <ol>
                           <li class="stepexpand"><span>Connect as a user who has the <code class="codeph">SYSDBA</code> administrative privilege.</span><div>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba
Enter password: <span class="italic">password</span></pre><p>You must have the <code class="codeph">SYSDBA</code> administrative privilege if you plan to decrypt the <code class="codeph">SYSTEM</code> and <code class="codeph">SYSAUX</code> tablespaces. Otherwise, connect with the <code class="codeph">SYSKM</code> administrative privilege.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Ensure that the following requirements are met:</span><ul>
                                 <li>The <code class="codeph">COMPATIBLE</code> initialization parameter is set to 12.2.0.0. 
                                 </li>
                                 <li>The database is open and in read-write mode.</li>
                                 <li>A master encryption key has been created and is open.</li>
                                 <li>There is enough auxiliary space to complete the decryption.</li>
                              </ul>
                           </li>
                           <li class="stepexpand"><span>Run the <code class="codeph">ALTER TABLESPACE</code> SQL statement with the <code class="codeph">DECRYPT</code> clause. </span><div>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users ENCRYPTION ONLINE DECRYPT FILE_NAME_CONVERT = ('users_enc.dbf', 'users.dbf');</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>When you specify the files to decrypt, enter them in the reverse order in which they were originally encrypted. That is, first enter the name of the encrypted file (<code class="codeph">users_enc.dbf</code>), followed by the data file (<code class="codeph">users.dbf</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p>Do not provide an algorithm key for the decryption.</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                        <div class="section">If the conversion process was interrupted, then you can resume it by running <code class="codeph">ALTER TABLESPACE</code> with the <code class="codeph">FINISH</code> clause. 
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF" title="To encrypt an existing tablespace with online conversion, use ALTER TABLESPACE with the ONLINE and ENCRYPT clauses.">Encrypting an Existing Tablespace with Online Conversion</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-CD29F72C-780F-455C-B2BB-B089F23025E5" title="If an online encryption process is interrupted, then you can complete the conversion by rerunning the ALTER TABLESPACE statement using the FINISH clause.">Finishing an Interrupted Online Encryption Conversion</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" title="You can encrypt and decrypt an online existing tablespace by using the ALTER TABLESPACE SQL statement with the ONLINE and ENCRYPT or DECRYPT clauses.">Encryption Conversions for Existing Online Tablespaces</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-CD29F72C-780F-455C-B2BB-B089F23025E5" name="GUID-CD29F72C-780F-455C-B2BB-B089F23025E5"></a><h5 id="ASOAG-GUID-CD29F72C-780F-455C-B2BB-B089F23025E5" class="sect5">Finishing an Interrupted Online Encryption Conversion</h5>
                     <div>
                        <p>If an online encryption process is interrupted, then you can complete the conversion by rerunning the <code class="codeph">ALTER TABLESPACE</code> statement using the <code class="codeph">FINISH</code> clause.
                        </p>
                        <div class="section">An interrupted encryption process (encryption, rekey, or decryption) can be, for example, an <code class="codeph">ORA-28425: missing a valid FILE_NAME_CONVERT clause</code> error in the <code class="codeph">FILE_NAME_CONVERT</code> clause of the <code class="codeph">ALTER TABLESPACE</code> SQL statement. Other examples of interrupted processes are if the conversion skips a data file, which can happen if there is an error when an Oracle DataBase WRiter (DBWR) process offlines a data file, or if there is not enough space for the auxiliary file. The tablespace should be operational even if you do not rerun the <code class="codeph">ALTER TABLESPACE</code> statement with the <code class="codeph">FINISH</code> clause.
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Query the <code class="codeph">V$ENCRYPTED_TABLESPACES</code> to check the <code class="codeph">STATUS</code> column for the tablespace.</span><div>
                                 <p>If the <code class="codeph">STATUS</code> column reports <code class="codeph">ENCRYPTING</code>, <code class="codeph">DECRYPTING</code>, or <code class="codeph">REKEYING</code>, then re-run the <code class="codeph">ALTER TABLESPACE</code> statement with the <code class="codeph">FINISH</code> clause, as described in this procedure. If the <code class="codeph">STATUS</code> reports <code class="codeph">NORMAL</code>, then you can rerun <code class="codeph">ALTER TABLESPACE</code> without the <code class="codeph">FINISH</code> clause.
                                 </p>
                                 <p>You can find the tablespace name that matches the <code class="codeph">TS#</code> and <code class="codeph">TABLESPACE_NAME</code> columns by querying the <code class="codeph">V$DATAFILE_HEADER</code> view.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>If necessary query the following additional views to find information about the tablespace whose online conversion was interrupted:</span><ul>
                                 <li><code class="codeph">DBA_TABLESPACES</code> to find if the <code class="codeph">STATUS</code> of the tablespace indicates if it is online or offline.
                                 </li>
                                 <li><code class="codeph">V$ENCRYPTED_TABLESPACES</code> to find if the <code class="codeph">STATUS</code> of the tablespace indicates if it is encrypted, and what the <code class="codeph">KEY_VERSION</code> of the encryption key is.
                                 </li>
                                 <li><code class="codeph">V$DATAFILE</code> and <code class="codeph">V$DATAFILE_HEADER</code> to find the data files that are associated with a tablespace. 
                                 </li>
                              </ul>
                           </li>
                           <li class="stepexpand"><span>Run the <code class="codeph">ALTER TABLESPACE</code> statement using the <code class="codeph">FINISH</code> clause. </span><div>Examples are as follows: 
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <div class="p">For an encryption operation:<pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users ENCRYPTION ONLINE FINISH ENCRYPT FILE_NAME_CONVERT = ('users.dbf', 'users_enc.dbf');</pre></div>
                                    </li>
                                    <li>
                                       <div class="p">For a decryption operation:<pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users ENCRYPTION ONLINE FINISH DECRYPT FILE_NAME_CONVERT = ('users_enc.dbf', 'users.dbf');</pre></div>
                                       <p>Note the order in which the files are specified: first, the name of the encrypted file, and then the name of the data file. (In the encryption operation, the name of the data file is specified first, followed by the name of the encrypted file.)</p>
                                    </li>
                                    <li>
                                       <div class="p">For a rekey operation:<pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users ENCRYPTION ONLINE FINISH REKEY FILE_NAME_CONVERT = ('users.dbf', 'users_enc.dbf');</pre>You cannot specify an algorithm when you use the <code class="codeph">FINISH</code> clause in an <code class="codeph">ALTER TABLESPACE</code> statement. 
                                       </div>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>To check the conversion, query the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTED_TABLESPACES</code> view. </span><div>The status should be <code class="codeph">NORMAL</code>. In an Oracle Data Guard environment, if the database does not have <code class="codeph">NORMAL</code> as the <code class="codeph">STATUS</code>, then run the <code class="codeph">ALTER TABLESPACE ... FINISH</code> statement on the primary or the standby data file that did not successfully convert.
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" title="You can encrypt and decrypt an online existing tablespace by using the ALTER TABLESPACE SQL statement with the ONLINE and ENCRYPT or DECRYPT clauses.">Encryption Conversions for Existing Online Tablespaces</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-445053E7-8568-4990-A4C6-2ED68787ED2C" name="GUID-445053E7-8568-4990-A4C6-2ED68787ED2C"></a><h4 id="ASOAG-GUID-445053E7-8568-4990-A4C6-2ED68787ED2C" class="sect4">Encryption Conversions for Existing Databases</h4>
                  <div>
                     <p>You can encrypt both offline and online databases.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-504FCF09-227E-4CFD-92CD-91D1A4577AD3">About Encryption Conversions for Existing Databases</a><br>The encryption conversion of an entire database encrypts all tablespaces, including the Oracle-supplied <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, <code class="codeph">UNDO</code>, and <code class="codeph">TEMP</code> tablespaces.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F64315CB-F80F-4F06-B7B1-A71A80B96710">Encrypting an Existing Database with Offline Conversion</a><br>When you encrypt an existing database with offline conversion, for the Oracle-managed tablespaces, you do not specify an encryption algorithm.
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-86F51DED-4CFE-4B41-8654-55E3D087735D">Encrypting an Existing Database with Online Conversion</a><br>When you encrypt an existing database with online conversion, you do not specify an encryption algorithm.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="You can perform encryption operations on both offline and online tablespaces and databases.">Encryption Conversions for Tablespaces and Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-504FCF09-227E-4CFD-92CD-91D1A4577AD3" name="GUID-504FCF09-227E-4CFD-92CD-91D1A4577AD3"></a><h5 id="ASOAG-GUID-504FCF09-227E-4CFD-92CD-91D1A4577AD3" class="sect5">About Encryption Conversions for Existing Databases</h5>
                     <div>
                        <p>The encryption conversion of an entire database encrypts all tablespaces, including the Oracle-supplied <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, <code class="codeph">UNDO</code>, and <code class="codeph">TEMP</code> tablespaces.
                        </p>
                        <p>Note the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To perform the encryption, you can use the offline and online functionality of the tablespace encryption conversions. </p>
                           </li>
                           <li>
                              <p>You can encrypt any or all of the Oracle-supplied tablespaces, and in any order. The encryption of the Oracle-supplied tablespaces has no impact on the encryption of user-created tablespaces. </p>
                           </li>
                           <li>
                              <p>When you encrypt the Oracle-supplied tablespaces, Oracle Database prevents the keystore from being closed. </p>
                           </li>
                           <li>
                              <p>You cannot encrypt an existing temporary tablespace, but you can drop the existing temporary tablespace and then recreate it as encrypted. </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">UNDO</code> and <code class="codeph">TEMP</code> metadata that is generated from sensitive data in an encrypted tablespace is already automatically encrypted. Therefore, encrypting <code class="codeph">UNDO</code> and <code class="codeph">TEMP</code> is optional.
                              </p>
                           </li>
                           <li>
                              <p>Oracle recommends that you encrypt the Oracle-supplied tablespaces by using the default tablespace encryption algorithm, <code class="codeph">AES128</code>. However, you can rekey any of these tablespaces afterwards to use a different encryption algorithm if you want. (To find the current encryption key for the current database, you can query the <code class="codeph">V$DATABASE_KEY_INFO</code> dynamic view.)
                              </p>
                           </li>
                           <li>
                              <p>The performance effect of encrypting all the tablespaces in a database depends on the workload and platform. Many modern CPUs provide built-in hardware acceleration, which results in a minimal performance impact. </p>
                           </li>
                           <li>
                              <p>In a multitenant environment, you can encrypt any tablespaces in any pluggable databases (PDBs), including the Oracle-supplied tablespaces. However, the keystore in the CDB root must be open at all times so that a PDB can open its keystore. You can check the status of whether a keystore is open by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-445053E7-8568-4990-A4C6-2ED68787ED2C" title="You can encrypt both offline and online databases.">Encryption Conversions for Existing Databases</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-F64315CB-F80F-4F06-B7B1-A71A80B96710" name="GUID-F64315CB-F80F-4F06-B7B1-A71A80B96710"></a><h5 id="ASOAG-GUID-F64315CB-F80F-4F06-B7B1-A71A80B96710" class="sect5">Encrypting an Existing Database with Offline Conversion</h5>
                     <div>
                        <p>When you encrypt an existing database with offline conversion, for the Oracle-managed tablespaces, you do not specify an encryption algorithm.</p>
                        <ol>
                           <li class="stepexpand"><span>Connect as a user who has the <code class="codeph">SYSDBA</code> administrative privilege.</span><div>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba
Enter password: <span class="italic">password</span></pre><p>You must have the <code class="codeph">SYSDBA</code> administrative privilege to encrypt the <code class="codeph">SYSTEM</code> and <code class="codeph">SYSAUX</code> tablespaces. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Mount the database.</span><div><pre class="oac_no_warn" dir="ltr">STARTUP MOUNT</pre></div>
                           </li>
                           <li class="stepexpand"><span>Open the keystore. </span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN IDENTIFIED BY <span class="italic">keystore_password</span>;</pre></div>
                           </li>
                           <li class="stepexpand"><span>Run the <code class="codeph">ALTER TABLESPACE</code> SQL statement to encrypt the <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, and <code class="codeph">UNDO</code> tablespaces. Do not encrypt the <code class="codeph">SYSTEM</code> tablespace concurrently with the encryption of other tablespaces.</span><div>
                                 <p>For example, to encrypt the <code class="codeph">SYSTEM</code> tablespace:
                                 </p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE SYSTEM ENCRYPTION OFFLINE ENCRYPT;</pre></div>
                           </li>
                           <li class="stepexpand"><span>Open the database. </span><div>For example, to open the database in read/write mode:<pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN READ WRITE;</pre></div>
                           </li>
                           <li class="stepexpand"><span>Run the <code class="codeph">ALTER TABLESPACE</code> SQL statement to encrypt other user tablespaces.</span><div>Alternatively, you can proceed to the next step and open the database first, and then perform the steps described in <a href="configuring-transparent-data-encryption.html#GUID-57B9D24B-02CC-4DEF-909E-81577E35DD5F" title="To encrypt an existing tablespace with offline conversion, you can use the ALTER TABLESPACE SQL statement with the OFFLINE and ENCRYPT clauses.">Encrypting an Existing User-Defined Tablespace with Offline Conversion</a>.
                              </div>
                           </li>
                           <li class="stepexpand"><span>Open the database.</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN;</pre></div>
                           </li>
                        </ol>
                        <div class="section">After you have encrypted the tablespace, if you want to use a different encryption algorithm (change the TDE master encryption key) for the <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, and <code class="codeph">UNDO</code> tablespaces, then you must use online conversion. In addition to <code class="codeph">AES128</code>, supported encryption algorithms are <code class="codeph">AES192</code> and <code class="codeph">AES256</code>, in addition to other algorithms such as <code class="codeph">ARIA</code> and <code class="codeph">GOST</code>. 
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DFF126F3-6E49-4E98-9846-F4417A665E18" title="You can use the ENCRYPT and REKEY clauses of the ALTER TABLESPACE statement to encrypt a tablespace.">Changing the TDE Master Encryption Key for a Tablespace</a></li>
                              <li><a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="By default, Transparent Data Encryption (TDE) Column encryption uses the Advanced Encryption Standard (AES).">Supported Encryption and Integrity Algorithms</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-445053E7-8568-4990-A4C6-2ED68787ED2C" title="You can encrypt both offline and online databases.">Encryption Conversions for Existing Databases</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-86F51DED-4CFE-4B41-8654-55E3D087735D" name="GUID-86F51DED-4CFE-4B41-8654-55E3D087735D"></a><h5 id="ASOAG-GUID-86F51DED-4CFE-4B41-8654-55E3D087735D" class="sect5">Encrypting an Existing Database with Online Conversion</h5>
                     <div>
                        <p>When you encrypt an existing database with online conversion, you do not specify an encryption algorithm.</p>
                        <div class="section">The reason that you do not need to specify an encryption algorithm the first time you perform the encryption is that the tablespaces that you must use to encrypt the database are automatically encrypted with the database key. If you want to change the algorithm, then you can issue the <code class="codeph">ALTER TABLESPACE ENCRYPTION REKEY</code> SQL statement after the initial encryption.
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Perform the following tasks, which are described in <a href="configuring-transparent-data-encryption.html#GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF" title="To encrypt an existing tablespace with online conversion, use ALTER TABLESPACE with the ONLINE and ENCRYPT clauses.">Encrypting an Existing Tablespace with Online Conversion</a>:</span><ol type="a">
                                 <li><span>Connect as a user who has been granted the <code class="codeph">SYSDBA</code> administrative privilege.</span></li>
                                 <li><span>Ensure that the <code class="codeph">COMPATIBLE</code> parameter is set to <code class="codeph">12.2.0.0</code>.</span></li>
                                 <li><span>Ensure that the database is open in read-write mode.</span></li>
                                 <li><span>Ensure that you have enough auxiliary space to complete the encryption.</span></li>
                                 <li><span>Back up the tablespaces that you must encrypt.</span></li>
                                 <li><span>Open the keystore.</span></li>
                              </ol>
                           </li>
                           <li class="stepexpand"><span>Run the <code class="codeph">ALTER TABLESPACE</code> SQL statement to encrypt the <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, and <code class="codeph">UNDO</code> tablespaces. Do not specify an algorithm, and do not encrypt the <code class="codeph">SYSTEM</code> tablespace concurrently with the encryption of other tablespaces.</span><div>
                                 <p>For example, to encrypt the <code class="codeph">SYSTEM</code> tablespace:
                                 </p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE SYSTEM ENCRYPTION ONLINE ENCRYPT 
FILE_NAME_CONVERT=('system01.dbf','system01_enc.dbf');</pre></div>
                           </li>
                           <li class="stepexpand"><span>For a temporary tablespace, drop it and then recreate it as encrypted. Do not specify an algorithm.</span><div>
                                 <p>For example, for a user-created tablespace:</p><pre class="oac_no_warn" dir="ltr">DROP TABLESPACE temp_01;
CREATE TEMPORARY TABLESPACE temp_01 
TEMPFILE 'temp01.dbf' SIZE 5M AUTOEXTEND ON 
ENCRYPTION ENCRYPT;</pre></div>
                              <div>
                                 <p>You cannot drop the default <code class="codeph">TEMP</code> tablespace. You must first create a new tablespace and make it the default before you can drop <code class="codeph">TEMP</code>.
                                 </p>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">CREATE TEMPORARY TABLESPACE temp_01 
TEMPFILE 'temp01.dbf' SIZE 5M AUTOEXTEND ON 
ENCRYPTION ENCRYPT;

ALTER DATABASE DEFAULT TEMPORARY TABLESPACE temp_01;

DROP TABLESPACE TEMP;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DFF126F3-6E49-4E98-9846-F4417A665E18" title="You can use the ENCRYPT and REKEY clauses of the ALTER TABLESPACE statement to encrypt a tablespace.">Changing the TDE Master Encryption Key for a Tablespace</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-445053E7-8568-4990-A4C6-2ED68787ED2C" title="You can encrypt both offline and online databases.">Encryption Conversions for Existing Databases</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ASOAG10362"></a><a id="ASOAG9555"></a><div class="props_rev_3"><a id="GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F" name="GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F"></a><h3 id="ASOAG-GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F" class="sect3">Transparent Data Encryption Data Dynamic and Data Dictionary Views</h3>
               <div>
                  <p>You can query a set of dynamic and data dictionary views to find more information about Transparent Data Encryption (TDE) data.</p>
                  <div class="section">
                     <p><a href="configuring-transparent-data-encryption.html#GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F__CIHGBGHG" title="TDE views">Table 3-4</a> describes these dynamic and data dictionary views. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F__CIHGBGHG">
                     <p class="titleintable">Table 3-4 Transparent Data Encryption Related Views</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Transparent Data Encryption Related Views" summary="TDE views" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="34%" id="d6228e12323">View</th>
                              <th align="left" valign="bottom" width="66%" id="d6228e12326">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12331" headers="d6228e12323 ">
                                 <p><code class="codeph">ALL_ENCRYPTED_COLUMNS</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12331 d6228e12326 ">
                                 <p>Displays encryption information about encrypted columns in the tables accessible to the current user</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12339" headers="d6228e12323 ">
                                 <p><code class="codeph">DBA_ENCRYPTED_COLUMNS</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12339 d6228e12326 ">
                                 <p>Displays encryption information for all of the encrypted columns in the database</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12347" headers="d6228e12323 ">
                                 <p><code class="codeph">USER_ENCRYPTED_COLUMNS</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12347 d6228e12326 ">
                                 <p>Displays encryption information for encrypted table columns in the current user's schema</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12355" headers="d6228e12323 ">
                                 <p><code class="codeph">DBA_TABLESPACE_USAGE_METRICS</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12355 d6228e12326 ">
                                 <p>Describes tablespace usage metrics for all types of tablespaces, including permanent, temporary, and undo tablespaces</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12363" headers="d6228e12323 ">
                                 <p><code class="codeph">V$CLIENT_SECRETS</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12363 d6228e12326 ">
                                 <p>Lists the properties of the strings (secrets) that were stored in the keystore for various features (clients). </p>
                                 <p>In a multitenant environment, when you query this view in a PDB, then it displays information about keys that were created or activated for the current PDB. If you query this view in the root, then it displays this information about keys for all of the PDBs.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12373" headers="d6228e12323 ">
                                 <p><code class="codeph">V$DATABASE_KEY_INFO</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12373 d6228e12326 ">
                                 <p>Displays information about the default encryption key that is used for the current database. The default is <code class="codeph">AES128</code>. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12384" headers="d6228e12323 ">
                                 <p><code class="codeph">V$ENCRYPTED_TABLESPACES</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12384 d6228e12326 ">
                                 <p>Displays information about the tablespaces that are encrypted</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12392" headers="d6228e12323 ">
                                 <p><code class="codeph">V$ENCRYPTION_KEYS</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12392 d6228e12326 ">
                                 <p>When used with keys that have been rekeyed with the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement, displays information about the TDE master encryption keys. 
                                 </p>
                                 <p>In a multitenant environment, when you query this view in a PDB, it displays information about keys that were created or activated for the current PDB. If you query this view in the root, it displays this information about keys for all of the PDBs.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12405" headers="d6228e12323 ">
                                 <p><code class="codeph">V$ENCRYPTION_WALLET</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12405 d6228e12326 ">
                                 <p>Displays information on the status of the keystore and the keystore location for TDE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12413" headers="d6228e12323 ">
                                 <p><code class="codeph">V$WALLET</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12413 d6228e12326 ">
                                 <p>Displays metadata information for a PKI certificate, which can be used as a master encryption key for TDE</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F__GUID-0D627C67-A82E-4C3E-BCC3-AD6B6DD3731F">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=REFRN" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for detailed information about these views
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces.">Configuring Transparent Data Encryption</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
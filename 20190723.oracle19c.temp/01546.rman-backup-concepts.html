<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>RMAN Backup Concepts</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery User's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96241-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="part-backing-up-archiving.html" title="Previous" type="text/html">
      <link rel="next" href="backing-up-database.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
    <meta name="dcterms.isVersionOf" content="BRADV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="part-backing-up-archiving.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="backing-up-database.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-backing-up-archiving.html" property="item" typeof="WebPage"><span property="name">Backing Up and Archiving Data</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> RMAN Backup Concepts</li>
            </ol>
            <a id="GUID-B3380142-ABCD-437F-9E06-B219D74E6738" name="GUID-B3380142-ABCD-437F-9E06-B219D74E6738"></a><a id="BRADV002"></a>
            
            <h2 id="BRADV-GUID-B3380142-ABCD-437F-9E06-B219D74E6738" class="sect2"><span class="enumeration_chapter">8 </span> RMAN Backup Concepts
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes the general concepts that you must understand to make any type of RMAN backup. This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0" title="Use the RMAN BACKUP command to create both consistent and inconsistent backups.">About Consistent and Inconsistent RMAN Backups</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C" title="You can create RMAN backups or user-managed backups.">About Online Backups and Backup Mode</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D" title="When you execute the BACKUP command in RMAN, you create one or more backup sets or image copies. By default, RMAN creates backup sets regardless of whether the destination is disk or a media manager.">About Backup Sets</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-3580BA12-463A-4A61-939D-58C51E81FF12" title="An image copy is an exact copy of a single data file, archived redo log file, or control file.">About RMAN Image Copies</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5" title="RMAN enables you to make multiple, identical copies of backups.">About Multiple Copies of RMAN Backups</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-95840C84-1595-49AC-923D-310DA750676B" title="Having recent backups of your control file and server parameter file is extremely valuable in many recovery situations. To ensure that you have backups of these files, the database supports control file and server parameter file autobackups.">About RMAN Control File and Server Parameter File Autobackups</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023" title="An incremental backup copies only those data blocks that have changed since a previous backup. You can use RMAN to create incremental backups of data files, tablespaces, or the whole database.">About RMAN Incremental Backups</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF" title="You can use the CONFIGURE RETENTION POLICY command to create a persistent and automatic backup retention policy.">About Backup Retention Policies</a></p>
                  </li>
               </ul>
            </div><a id="BRADV89477"></a><div class="props_rev_3"><a id="GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0" name="GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0"></a><h3 id="BRADV-GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0" class="sect3"><span class="enumeration_section">8.1 </span>About Consistent and Inconsistent RMAN Backups
               </h3>
               <div>
                  <p>Use the RMAN <code class="codeph">BACKUP</code> command to create both consistent and inconsistent backups.
                  </p>
                  <p>The RMAN <code class="codeph">BACKUP</code> command supports backing up the following types of files:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Data files and control files</p>
                     </li>
                     <li>
                        <p>Server parameter file</p>
                     </li>
                     <li>
                        <p>Archived redo logs</p>
                     </li>
                     <li>
                        <p>RMAN backups</p>
                     </li>
                  </ul>
                  <p>Although the database depends on other types of files, such as network configuration files, password files, and the contents of the Oracle home, you cannot back up these files with RMAN. Likewise, some features of Oracle Database, such as external tables, may depend upon files other than the data files, control files, and redo log. RMAN cannot back up these files. Use general-purpose backup software such as Oracle Secure Backup to protect files that RMAN does not support.</p>
                  <p>When you execute the <code class="codeph">BACKUP</code> command in RMAN, the output is always either one or more backup sets or one or more image copies. A <a href="glossary.html#GUID-6AA43E7D-9946-4C41-A62F-01E5BACEB8A7"><span class="xrefglossterm">backup set</span></a> is an RMAN-specific proprietary format, whereas an <a href="glossary.html#GUID-397CB99E-3F07-4980-96B3-9D0D0ABBABEA"><span class="xrefglossterm">image copy</span></a> is a bit-for-bit copy of a file. By default, RMAN creates backup sets.
                  </p>
                  <div class="infoboxnotealso" id="GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0__GUID-5A6CD23D-6A3C-4E15-B343-E5F8861DDC3A">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-10871A83-DD0B-49FB-9601-A598D367ECD3" title="A consistent backup occurs when the database is in a consistent state. You can use the BACKUP command to make consistent backups of the database.">About Consistent RMAN Backups</a></p>
                        </li>
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C" title="Any database backup that is not consistent is an inconsistent backup. A backup made when the database is open is inconsistent, as is a backup made after an instance failure or SHUTDOWN ABORT command.">About Inconsistent RMAN Backups</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV99964"></a><div class="props_rev_3"><a id="GUID-10871A83-DD0B-49FB-9601-A598D367ECD3" name="GUID-10871A83-DD0B-49FB-9601-A598D367ECD3"></a><h4 id="BRADV-GUID-10871A83-DD0B-49FB-9601-A598D367ECD3" class="sect4"><span class="enumeration_section">8.1.1 </span>About Consistent RMAN Backups
                  </h4>
                  <div>
                     <p>A consistent backup occurs when the database is in a consistent state. You can use the <code class="codeph">BACKUP</code> command to make consistent backups of the database.
                     </p>
                     <p>A database is in a consistent state after being shut down with the <a href="../rcmrf/SHUTDOWN.html#RCMRF155" target="_blank"><code class="codeph">SHUTDOWN</code></a> <code class="codeph">NORMAL</code>, <code class="codeph">SHUTDOWN IMMEDIATE</code>, or <code class="codeph">SHUTDOWN TRANSACTIONAL</code> commands. A consistent shutdown guarantees that all redo has been applied to the data files. If you mount the database and make a backup at this point, then you can restore the database backup later and open it without performing media recovery. But you will, of course, lose all transactions that occurred after the backup was created.
                     </p>
                  </div>
               </div><a id="BRADV99965"></a><div class="props_rev_3"><a id="GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C" name="GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C"></a><h4 id="BRADV-GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C" class="sect4"><span class="enumeration_section">8.1.2 </span>About Inconsistent RMAN Backups
                  </h4>
                  <div>
                     <p>Any database backup that is not consistent is an inconsistent backup. A backup made when the database is open is inconsistent, as is a backup made after an instance failure or <code class="codeph">SHUTDOWN ABORT</code> command.
                     </p>
                     <p>When a database is restored from an inconsistent backup, Oracle Database must perform media recovery before the database can be opened, applying changes from the redo logs that took place after the backup was created.</p>
                     <div class="infoboxnote" id="GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C__GUID-4EFE7E16-3939-4EAD-A8D4-579546927B87">
                        <p class="notep1">Note:</p>
                        <p>RMAN does not permit you to make inconsistent backups when the database is in <code class="codeph">NOARCHIVELOG</code> mode. If you employ user-managed backup techniques for a <code class="codeph">NOARCHIVELOG</code> database, then you must not make inconsistent backups of this database.
                        </p>
                     </div>
                     <p>If the database runs in <code class="codeph">ARCHIVELOG</code> mode, and you back up the archived redo logs and data files, inconsistent backups can be the foundation for a sound backup and recovery strategy. Inconsistent backups offer superior availability because you do not have to shut down the database to make backups that fully protect the database.
                     </p>
                  </div>
               </div>
            </div><a id="BRADV89479"></a><div class="props_rev_3"><a id="GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C" name="GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C"></a><h3 id="BRADV-GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C" class="sect3"><span class="enumeration_section">8.2 </span>About Online Backups and Backup Mode
               </h3>
               <div>
                  <p>You can create RMAN backups or user-managed backups.</p>
                  <p>When performing a <a href="glossary.html#GUID-F4A66D43-CA48-412E-98E8-B25CE1C7B065"><span class="xrefglossterm">user-managed backup</span></a> of an online tablespace or database, an operating system utility can back up a data file at the same time that the database writer (DBWR) is updating the file. It is possible for the utility to read a block in a half-updated state, so that the block that is copied to the backup media is updated in its first half, while the second half contains older data. This type of <a href="glossary.html#GUID-E55A74E5-8AD7-478F-A458-E4CB2E389009"><span class="xrefglossterm">logical corruption</span></a> is known as a <a href="glossary.html#GUID-9999D934-31A1-44D5-995F-EC5B92583B17"><span class="xrefglossterm">fractured block</span></a>, that is, a block that is not consistent with an SCN. If this backup must be restored and the block requires recovery, then recovery fails because the block is not usable.
                  </p>
                  <p>For third-party snapshot technologies, you must use one of the following techniques to eliminate the risk of creating fractured blocks:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Ensure that the snapshot technology complies with Oracle requirements for online backups</p>
                     </li>
                     <li>
                        <p>Take the database or data files offline</p>
                     </li>
                     <li>
                        <p>Place the database in backup mode before using a third-party snapshot backup</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C__GUID-EAD87694-A55A-4E23-AAE6-341EF6AC2416">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p> <a href="user-managed-database-backups.html#GUID-A1112F2C-D0ED-4C2F-BA24-A614F99F0FCA">Making Backups with Third-Party Snapshot Technologies</a>.
                           </p>
                        </li>
                        <li>
                           <p><a href="user-managed-flashback-dbpitr.html#GUID-5A3BB8EE-291F-41C6-976C-1F304069FF0B">Recovery Using Storage Snapshot Optimization</a></p>
                        </li>
                     </ul>
                  </div>
                  <p>Unlike user-managed tools, RMAN does not require extra logging or backup mode because it knows the format of data blocks. RMAN is guaranteed not to back up fractured blocks. During an RMAN backup, a database server session reads each data block and checks whether it is fractured by comparing the block header and footer. If a block is fractured, then the session rereads the block. If the same fracture is found, then the block is considered permanently corrupt. Also, RMAN does not need to freeze the data file header checkpoint because it knows the order in which the blocks are read, which enables it to capture a known good checkpoint for the file. </p>
                  <div class="infoboxnotealso" id="GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C__GUID-D0B338C8-E6E6-4F4A-8D20-D5C8161A6A1B">
                     <p class="notep1">See Also:</p>
                     <p><a href="user-managed-database-backups.html#GUID-57387AB6-1204-44F0-826A-F9B638453935">Making User-Managed Backups of Online Tablespaces and Data Files</a> to learn how to back up online tablespaces when not using RMAN
                     </p>
                  </div>
               </div>
            </div><a id="BRADV106"></a><div class="props_rev_3"><a id="GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D" name="GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D"></a><h3 id="BRADV-GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D" class="sect3"><span class="enumeration_section">8.3 </span>About Backup Sets
               </h3>
               <div>
                  <p>When you execute the <code class="codeph">BACKUP</code> command in RMAN, you create one or more backup sets or image copies. By default, RMAN creates backup sets regardless of whether the destination is disk or a media manager.
                  </p>
                  <div class="infoboxnote" id="GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D__GUID-A2E6EAE1-8A44-4967-9E06-8BC9BC74B382">
                     <p class="notep1">Note:</p>
                     <p>Data file backup sets are typically smaller than data file image copies and take less time to write.</p>
                  </div>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-1C871377-D8A7-4414-B0F0-884403666E8C" title="RMAN can store backup data in a logical structure called a backup set, which is the smallest unit of an RMAN backup.">About Backup Sets and Backup Pieces</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070" title="RMAN can use block compression when creating backup sets.">About RMAN Block Compression for Backup Sets</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-2AFCD551-95CB-4F9F-946E-550E89613974" title="RMAN supports binary compression of backup sets. Binary compression is only enabled when you specify AS COMPRESSED BACKUPSET in the BACKUP command, or one-time with the CONFIGURE DEVICE TYPE [DISK | SBT] BACKUP TYPE TO COMPRESSED BACKUPSET command.">About Binary Compression for RMAN Backup Sets</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-1AD870B1-4D49-4056-A7C0-9B10BC3EE005" title="In backup undo optimization, RMAN excludes undo not needed for recovery of a backup, that is, for transactions that have been committed.">About RMAN Backup Undo Optimization</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF" title="RMAN supports backup encryption for backup sets. You can use keystore-based transparent encryption, password-based encryption, or both.">About Encryption for RMAN Backup Sets</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9" title="You can either let RMAN determine a unique name for backup pieces or use the FORMAT clause to specify a name.">About File Names for RMAN Backup Pieces</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9" title="By default a backup set contains one backup piece. To restrict the size of each backup piece, specify the MAXPIECESIZE option of the CONFIGURE CHANNEL or ALLOCATE CHANNEL commands.">About Number and Size of RMAN Backup Pieces</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A" title="You use the backupSpec clause of the BACKUP command to specify the objects to be backed up. Each backupSpec clause produces at least one backup set.">About Number and Size of RMAN Backup Sets</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97" title="When creating backup sets, RMAN can simultaneously read multiple files from disk and then write their blocks into the same backup set. For example, RMAN can read from two data files simultaneously, and then combine the blocks from these data files into a single backup piece. The combination of blocks from multiple files is called backup multiplexing.">About Multiplexed RMAN Backup Sets</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47" title="During a proxy copy, RMAN turns over control of the data transfer to a media manager that supports this feature. Proxy copy can only be used with media managers that support it and cannot be used with channels of type DISK. The PROXY option of the BACKUP command specifies that a backup is a proxy copy.">About RMAN Proxy Copies</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89480"></a><div class="props_rev_3"><a id="GUID-1C871377-D8A7-4414-B0F0-884403666E8C" name="GUID-1C871377-D8A7-4414-B0F0-884403666E8C"></a><h4 id="BRADV-GUID-1C871377-D8A7-4414-B0F0-884403666E8C" class="sect4"><span class="enumeration_section">8.3.1 </span>About Backup Sets and Backup Pieces
                  </h4>
                  <div>
                     <p>RMAN can store backup data in a logical structure called a backup set, which is the smallest unit of an RMAN backup.</p>
                     <p>A backup set contains the data from one or more data files, archived redo logs, control files, or server parameter file. Backup sets, which are only created and accessed through RMAN, are the only form in which RMAN can write backups to media managers such as tape drives and tape libraries.</p>
                     <p>A backup set contains one or more binary files in an RMAN-specific format. Each of these files is known as a <a href="glossary.html#GUID-AED62318-D45A-49FA-B4B4-DAD98647FCF6"><span class="xrefglossterm">backup piece</span></a>. A backup set can contain multiple data files. For example, you can back up 10 data files into a single backup set consisting of a single backup piece. In this case, RMAN creates one backup piece as output. The backup set contains only this backup piece.
                     </p>
                     <p>If you specify the <code class="codeph">SECTION SIZE</code> parameter on the <code class="codeph">BACKUP</code> command, then RMAN produces a <a href="glossary.html#GUID-6D6DDA5E-F1EF-4273-8649-137F1FC89EB6"><span class="xrefglossterm">multisection backup</span></a>. This is a backup of a single large file, produced by multiple channels in parallel, each of which produces one backup piece. Each backup piece contains one <a href="glossary.html#GUID-FDECFF77-1833-4BD3-A23C-AA4806E28241"><span class="xrefglossterm">file section</span></a> of the file being backed up.
                     </p>
                     <p>For non-multisection backups, RMAN only records backup sets in the repository that complete successfully. There is no such thing as a partial backup set. This differs from an unsuccessful multisection backup, where it is possible for RMAN metadata to contain a record for a partial backup set. In the latter case, you must use the <code class="codeph">DELETE</code> command to delete the partial backup set. 
                     </p>
                     <div class="infoboxnote" id="GUID-1C871377-D8A7-4414-B0F0-884403666E8C__GUID-E6714636-A1C2-428D-ACDD-36AA384045F2">
                        <p class="notep1">Note:</p>
                        <p>RMAN never considers partial backups as candidates for restore and recovery.</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-1C871377-D8A7-4414-B0F0-884403666E8C__GUID-0AB0FE3D-9617-44F7-ABE0-A21A2180368F">
                        <p class="notep1">See Also:</p>
                        <p><a href="backing-up-database.html#GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7" title="RMAN backups are created using the BACKUP command.The primary purpose of RMAN backups is to protect your data. If a media failure or disaster occurs, then you can restore your backups and recover lost changes.You can back up all or part of your database with the BACKUP command from within the RMAN client.You can provide arguments to the BACKUP command to override the default backup options.The BACKUP command takes a DEVICE TYPE clause that specifies whether to back up to disk or tape device.RMAN can create backups on disk as image copies or as backup sets.RMAN provides a range of options to name the files generated by the BACKUP command. When backing up to disk, you can specify a format to spread the backup across several drives for improved performance. RMAN attaches a character string called a tag to every backup it creates, as a way of identifying the backup. You can either accept the default tag or specify your own with the TAG parameter of the BACKUP command.User-specified tags are a useful way to indicate the purpose or usage of different classes of backups or copies. Use the TAG parameter with the BACKUP command to specify tags for backup sets and image copies.When creating backup sets, you can use RMAN support for binary compression of backup sets by including the AS COMPRESSED BACKUPSET option to the BACKUP command.A multisection backup enables large data files to be divided into sections that can be backed up in parallel across multiple channels. This provides faster backup performance and better recovery times.While an image copy is being created, RMAN uses multiple channels to write files sections. However, the output of this operation is one copy for each data file.You can perform a whole database backup with the database mounted or open. You can back up one or more tablespaces with the BACKUP TABLESPACE command or one or more data files with the BACKUP DATAFILE command. You can back up the control file when the database is mounted or open. RMAN uses a snapshot control file to ensure a read-consistent version. A manual backup of the control file is different from a control file autobackup. RMAN makes a control file autobackup after the files specified in the BACKUP command are backed up. To make a manual backup, you can either specify INCLUDE CURRENT CONTROLFILE when backing up other files or specify BACKUP CURRENT CONTROLFILE. RMAN automatically backs up the current server parameter file in certain cases. The BACKUP SPFILE command backs up the parameter file explicitly. The server parameter file that is backed up is the one currently in use by the instance. You can only back up a database in NOARCHIVELOG mode when the database is closed and in a consistent state.Preplugin backups ensure that an RMAN backup is usable after a non-CDB is plugged in as a PDB into a CDB. Use the BACKUP command to back up multitenant container databases (CDBs) and pluggable databases (PDBs).RMAN and Oracle Enterprise Manager Cloud Control provide full support for backup and recovery in a multitenant environment.Backing up a whole multitenant container database (CDB) is similar to backing up a non-CDB. When you back up a whole CDB, RMAN backs up the root, all the pluggable databases (PDBs), and the archived redo logs.You can use RMAN to make a backup of only the root. Because the root contains critical metadata for the whole CDB, Oracle recommends that you back up the root or back up the whole CDB at regular intervals.Oracle Enterprise Manager Cloud Control (Cloud Control) can be used to back up the root.RMAN enables you to back up one or more PDBs in a CDB using the BACKUP command. Preplugin backups of a PDB can be used to perform restore and recover operations after the PDB is migrated and plugged in to a different destination CDB.Oracle Enterprise Manager Cloud Control (Cloud Control) can be used to perform backups of pluggable databases (PDBs).Because tablespaces in different PDBs can have the same name, to eliminate ambiguity you must connect directly to a PDB to back up one or more of its tablespaces.This example creates a preplugin backup of the PDB my_pdb that is contained in CDB cdb_prod. The CDB uses shared undo and is open in read-write mode.RMAN enables you to use the BACKUP command to perform backup operations on the application root, one or more application PDBs, and the application container.RMAN can back up application containers, application PDBs, and the application root.Use the RMAN BACKUP command to back up the application root.Use the BACKUP command to back up an application container, which consists of the application root and all the application PDBs that belong to the application root.The BACKUP command is used to back up one or more application PDBs. Use the BACKUP command to back up sparse databases.RMAN enables you to back up a sparse database, using steps similar to backing up a whole database, in the backup set or image copy format.You can back up one or more tablespaces containing sparse data files or individual sparse data files using the BACKUP command. RMAN enables you to back up one or more sparse PDBs in a CDB. Archived redo logs are the key to successful media recovery. You should back them up regularly.Several features of RMAN backups are specific to archived redo logs. For example, you can use BACKUP ... DELETE to delete one or all copies of archived redo logs from disk after backing them up to backup sets. Even if your redo logs are being archived to multiple destinations and you use RMAN to back up archived redo logs, RMAN selects only one copy of the archived redo log file to include in the backup set. Because logs with the same log sequence number are identical, RMAN does not need to include more than one log copy.Automatic online redo log switching is an important RMAN feature. In a CDB, archived redo logs can be backed up only when you connect to the root as a common user with the SYSDBA or SYSBACKUP privilege. To back up archived logs, use the BACKUP ARCHIVELOG command.You can indicate that RMAN should automatically skip backups of archived redo logs.You can back up archived redo logs in a multitenant container database (CDB) by using the BACKUP ARCHIVELOG command.The BACKUP ARCHIVELOG ... DELETE INPUT command deletes archived log files after they are backed up. This command eliminates the separate step of manually deleting archived redo logs. In a CDB, you can delete archived redo logs after they are backed up by using the BACKUP ARCHIVELOG ... DELETE INPUT command.An incremental backup copies only data file blocks that have changed since a specified previous backup. Use the BACKUP command to create incremental backups.RMAN incremental backups provide multiple benefits.Choose a backup strategy according to an acceptable MTTR (mean time to recover). You can use the Volume Shadow Copy Service (VSS) with the Oracle VSS writer to make a shadow copy or snapshot of files in a database.By incrementally updating backups, you can avoid the overhead of making full image copy backups of data files, while also minimizing time required for media recovery of your database. For example, if you run a daily backup script, then you never have more than 1 day of redo to apply for media recovery.To create incremental backups for use in an incrementally updated backup strategy, use the BACKUP ... FOR RECOVER OF COPY WITH TAG form of the BACKUP command. The command is best understood in a sample script that implements the strategy.The block change tracking feature for incremental backups improves backup performance by recording changed blocks for each data file.If block change tracking is enabled on a primary or standby database, then RMAN uses a block change tracking file to identify changed blocks for incremental backups. By reading this small bitmap file to determine which blocks changed, RMAN avoids having to scan every block in the data file that it is backing up.Oracle Database automatically manages space in the change tracking file to retain block change data that covers the eight most recent backups. After the maximum of eight bitmaps is reached, the oldest bitmap is overwritten by the bitmap that tracks the current changes.By default, the block change tracking file is created as an Oracle managed file in the destination specified by the DB_CREATE_FILE_DEST initialization parameter. You can also place the block change tracking file in any location that you choose, by specifying its name when enabling block change tracking. The size of the block change tracking file is proportional to the size of the database and the number of enabled threads of redo. You can enable block change tracking when the database is either open or mounted. When you disable block change tracking, the database removes the block change tracking file from the operating system.You can query the V$BLOCK_CHANGE_TRACKING view to determine whether change tracking is enabled, and if it is, the file name of the block change tracking file.To move the change tracking file, use the ALTER DATABASE RENAME FILE statement. You can use BACKUP... KEEP to create a backup that is both all-inclusive and exempt from the backup retention policy.You can exempt a backup from the retention policy by using the KEEP option with the BACKUP command. Typically, you make an archival backup to tape. Because your data protection backups are most likely to be on a set of tapes that remain accessible and are recycled, it is advisable to reserve a set of tapes for the archival backup. Use the BACKUP command with the KEEP option to make archival backups.One purpose of an archival backup is to create a test database. You can use the BACKUP BACKUPSET command to back up backup sets produced by other backup jobs. You can also use BACKUP RECOVERY AREA to back up recovery files created in the current and all previous fast recovery area destinations. The BACKUP BACKUPSET command creates additional copies of backup pieces in a backup set, but does not create a new backup set. For a backup retention policy based on redundancy, a backup set is counted as one instance of a backup. This statement is true even if there are multiple copies of the backup pieces that form the backup set, such as when a backup set has been backed up from disk to tape.Use the BACKUP BACKUPSET command to copy backup sets from disk to tape. Use the BACKUP command to back up image copies to tape.">Backing Up the Database</a></p>
                     </div>
                  </div>
               </div><a id="BRADV89481"></a><div class="props_rev_3"><a id="GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070" name="GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070"></a><h4 id="BRADV-GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070" class="sect4"><span class="enumeration_section">8.3.2 </span>About RMAN Block Compression for Backup Sets
                  </h4>
                  <div>
                     <p>RMAN can use block compression when creating backup sets.</p>
                     <p>The following types of block compression are available:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Unused Block Compression (Supports disk backup and Oracle Secure Backup tape backup)</p>
                        </li>
                        <li>
                           <p>Null Block Compression (Supports all backups)</p>
                        </li>
                     </ul>
                     <p>RMAN block compression is not traditional binary compression. Rather, it is a set of techniques that RMAN uses to altogether avoid backing up certain blocks that are not needed in this backup.</p>
                  </div><a id="BRADV193"></a><div class="props_rev_3"><a id="GUID-50F8DBCD-C285-491F-B8E7-E1B2140E1B51" name="GUID-50F8DBCD-C285-491F-B8E7-E1B2140E1B51"></a><h5 id="BRADV-GUID-50F8DBCD-C285-491F-B8E7-E1B2140E1B51" class="sect5"><span class="enumeration_section">8.3.2.1 </span>About Unused Block Compression
                     </h5>
                     <div>
                        <p>When employing unused block compression, RMAN skips reading, and backing up, any database blocks that are not currently allocated to some database object. This is regardless of whether those blocks had previously been allocated.</p>
                        <p>So if a database table is dropped, RMAN will not back up the space that was occupied by that table until new objects are created in that space.</p>
                        <p>Unused block compression is used automatically when the following conditions are true: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">COMPATIBLE</code> initialization parameter is set to 10.2 or higher. 
                              </p>
                           </li>
                           <li>
                              <p>There are currently no guaranteed restore points defined for the database.</p>
                           </li>
                           <li>
                              <p>The data file is locally managed.</p>
                           </li>
                           <li>
                              <p>The data file is being backed up to a backup set as part of a full backup or a level 0 incremental backup.</p>
                           </li>
                           <li>
                              <p>The backup set is created on disk, or Oracle Secure Backup is the media manager. </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="BRADV192"></a><div class="props_rev_3"><a id="GUID-89D85BBF-C0F2-4393-A1BF-7D6C8D9A6C87" name="GUID-89D85BBF-C0F2-4393-A1BF-7D6C8D9A6C87"></a><h5 id="BRADV-GUID-89D85BBF-C0F2-4393-A1BF-7D6C8D9A6C87" class="sect5"><span class="enumeration_section">8.3.2.2 </span>About Null Block Compression 
                     </h5>
                     <div>
                        <p>When employing null block compression, RMAN omits from its output any block that has never contained data. </p>
                        <p>Null block compression is always used with level 0 or full backups that are created in backup set format.</p>
                     </div>
                  </div>
               </div><a id="BRADV194"></a><div class="props_rev_3"><a id="GUID-2AFCD551-95CB-4F9F-946E-550E89613974" name="GUID-2AFCD551-95CB-4F9F-946E-550E89613974"></a><h4 id="BRADV-GUID-2AFCD551-95CB-4F9F-946E-550E89613974" class="sect4"><span class="enumeration_section">8.3.3 </span>About Binary Compression for RMAN Backup Sets
                  </h4>
                  <div>
                     <p>RMAN supports binary compression of backup sets. Binary compression is only enabled when you specify <code class="codeph">AS COMPRESSED BACKUPSET</code> in the <code class="codeph">BACKUP</code> command, or one-time with the <code class="codeph">CONFIGURE DEVICE TYPE [DISK | SBT] BACKUP TYPE TO COMPRESSED BACKUPSET</code> command.
                     </p>
                     <p>You have two binary compression options:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You can use the <code class="codeph">BASIC</code> compression algorithm, which does not require the Oracle Advanced Compression option. This setting offers a compression ratio comparable to <code class="codeph">MEDIUM</code>, at the expense of additional CPU consumption. 
                           </p>
                        </li>
                        <li>
                           <p>If you have enabled the Oracle Advanced Compression option, you can choose from the compression levels outlined in <span class="q">"<a href="configuring-rman-client-advanced.html#GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45">About Oracle Advanced Compression Option</a>"</span>.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-2AFCD551-95CB-4F9F-946E-550E89613974__GUID-E9A27EB7-A169-4973-8402-BEBAB927D5AB">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="configuring-rman-client-advanced.html#GUID-3117DA93-EC34-488D-A4FB-29E6CD4D168A" title="RMAN supports precompression processing and binary compression of backup sets. The CONFIGURE COMPRESSION ALGORITHM command enables you to configure compression options.">Configuring Compression Options</a></p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn about <code class="codeph">BACKUP AS BACKUPSET</code> and <code class="codeph">CONFIGURE COMPRESSION ALGORITHM</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV417"></a><div class="props_rev_3"><a id="GUID-1AD870B1-4D49-4056-A7C0-9B10BC3EE005" name="GUID-1AD870B1-4D49-4056-A7C0-9B10BC3EE005"></a><h4 id="BRADV-GUID-1AD870B1-4D49-4056-A7C0-9B10BC3EE005" class="sect4"><span class="enumeration_section">8.3.4 </span>About RMAN Backup Undo Optimization
                  </h4>
                  <div>
                     <p>In backup undo optimization, RMAN excludes undo not needed for recovery of a backup, that is, for transactions that have been committed. </p>
                     <p>Backup undo optimization works for disk backups and Oracle Secure Backup tape backups. Unlike <a href="glossary.html#GUID-C75B395F-CA6E-4286-826B-67AABE99606A"><span class="xrefglossterm">backup optimization</span></a>, backup undo optimization is not configurable. 
                     </p>
                  </div>
               </div><a id="BRADV89482"></a><div class="props_rev_3"><a id="GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF" name="GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF"></a><h4 id="BRADV-GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF" class="sect4"><span class="enumeration_section">8.3.5 </span>About Encryption for RMAN Backup Sets
                  </h4>
                  <div>
                     <p>RMAN supports backup encryption for backup sets. You can use keystore-based transparent encryption, password-based encryption, or both. </p>
                     <p>You can use the <a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><code class="codeph">CONFIGURE ENCRYPTION</code></a> command to configure persistent transparent encryption. Use the <a href="../rcmrf/SET.html#RCMRF153" target="_blank"><code class="codeph">SET ENCRYPTION</code></a> command at the <a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a> level to specify password-based encryption.
                     </p>
                     <div class="infoboxnote" id="GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF__GUID-C34AC04A-0343-460B-9496-444AC6E04E9A">
                        <p class="notep1">Note:</p>
                        <p>Keystore-based encryption is more secure than password-based encryption because no passwords are involved. Use password-based encryption only when it is absolutely necessary because your backups must be transportable.</p>
                     </div>
                     <p>To create encrypted backups on disk with RMAN, the database must use the Advanced Security Option. For encrypted RMAN backups directly to tape, the <a href="glossary.html#GUID-8879C26C-4DF5-4040-BC7A-37CF7C482C56"><span class="xrefglossterm">Oracle Secure Backup</span></a> <a href="glossary.html#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a> is the only supported interface. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF__GUID-0F6E14DB-917F-44C9-8075-294A3027AACA">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="configuring-rman-client-advanced.html#GUID-21D5FCCE-7AF1-4CF8-BC53-2496ECE3C56E" title="For improved security, you can configure backup encryption for RMAN backup sets. Encrypted backups cannot be read if they are obtained by unauthorized users.">Configuring Backup Encryption</a></p>
                           </li>
                           <li>
                              <p><a href="backing-up-database-advanced.html#GUID-ECBE4965-57F7-49F0-BECD-734196F417F5" title="You can protect RMAN backup sets with backup encryption. Encrypted backups cannot be read if they are obtained by unauthorized users.">Encrypting RMAN Backups</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89483"></a><div class="props_rev_3"><a id="GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9" name="GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9"></a><h4 id="BRADV-GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9" class="sect4"><span class="enumeration_section">8.3.6 </span>About File Names for RMAN Backup Pieces
                  </h4>
                  <div>
                     <p>You can either let RMAN determine a unique name for backup pieces or use the <code class="codeph">FORMAT</code> clause to specify a name. 
                     </p>
                     <p>If you do not specify the <code class="codeph">FORMAT</code> parameter, then RMAN automatically generates a unique file name with the <code class="codeph">%U</code> substitution variable in the default backup location. 
                     </p>
                     <p>An example of RMAN generating an SBT backup piece name by <code class="codeph">%U</code> is: 
                     </p><pre class="pre codeblock"><code>2i1nk47_1_1</code></pre><p>An example of a non- Oracle Managed File (OMF) backup piece on disk is: </p><pre class="pre codeblock"><code>/backups/TEST/2i1nk47_1_1
</code></pre><p>The <code class="codeph">FORMAT</code> clause supports substitution variables other than <code class="codeph">%U</code> for generating unique file names. For example, you can use <code class="codeph">%d</code> to generate the name of the database, <code class="codeph">%I</code> for the DBID, <code class="codeph">%t</code> for the time stamp, and so on.
                     </p>
                     <p>You can specify up to four <code class="codeph">FORMAT</code> parameters. If you specify multiple <code class="codeph">FORMAT</code> parameters, then RMAN uses the multiple <code class="codeph">FORMAT</code> parameters only when you specify multiple copies. You can create multiple copies by using the <code class="codeph">BACKUP ... </code><code class="codeph">COPIES</code>, <a href="../rcmrf/SET.html#RCMRF153" target="_blank"><code class="codeph">SET BACKUP COPIES</code></a>, or <a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><code class="codeph">CONFIGURE ... BACKUP COPIES</code></a> commands.
                     </p>
                     <div class="infoboxnote" id="GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9__GUID-19CC7970-0D5B-4B70-977A-092FC189D732">
                        <p class="notep1">Note:</p>
                        <p>If you use a media manager, then check your vendor documentation for restrictions on <code class="codeph">FORMAT</code>, such as the size of the name, the naming conventions, and so on.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9__GUID-68F4AC4E-0297-419C-9E6F-0769116E7081">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="backing-up-database.html#GUID-A733BDFC-8239-4610-8D26-40B6F2D07091" title="RMAN provides a range of options to name the files generated by the BACKUP command.">Specifying a Format for RMAN Backups</a></p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for descriptions of the <code class="codeph">FORMAT</code> clause and the substitution variables
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89484"></a><div class="props_rev_3"><a id="GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9" name="GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9"></a><h4 id="BRADV-GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9" class="sect4"><span class="enumeration_section">8.3.7 </span>About Number and Size of RMAN Backup Pieces
                  </h4>
                  <div>
                     <p>By default a backup set contains one backup piece. To restrict the size of each backup piece, specify the <code class="codeph">MAXPIECESIZE</code> option of the <code class="codeph">CONFIGURE CHANNEL</code> or <code class="codeph">ALLOCATE CHANNEL</code> commands. 
                     </p>
                     <p>The <code class="codeph">MAXPIECESIZE</code> option limits backup piece size to the specified number of bytes. If the total size of the backup set is greater than the specified backup piece size, then RMAN creates multiple physical pieces to hold the backup set contents.
                     </p>
                     <p>You can use this option for media managers that cannot manage a backup piece that spans multiple tapes. For example, if a tape can hold 10 GB, but the backup set being created must hold 80 GB of data, then you must instruct RMAN to create backup pieces of 10 GB, small enough to fit on the tapes used with the media manager. In this case, the backup set media consists of eight tapes. Media managers supporting SBT 2.0 can return a value to RMAN indicating the largest supported backup piece size, which RMAN uses in planning backup activities.</p>
                     <p>If you specify the <code class="codeph">SECTION SIZE</code> parameter on the <code class="codeph">BACKUP</code> command, then RMAN can create a <a href="glossary.html#GUID-6D6DDA5E-F1EF-4273-8649-137F1FC89EB6"><span class="xrefglossterm">multisection backup</span></a>. In this case, a single backup set can contain multiple backup pieces, each containing a <a href="glossary.html#GUID-FDECFF77-1833-4BD3-A23C-AA4806E28241"><span class="xrefglossterm">file section</span></a>. The purpose of multisection backups is to enable multiple channels to back up a large file in parallel.
                     </p>
                     <div class="infoboxnotealso" id="GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9__GUID-1B03D6AC-4A72-4BC0-AFFB-6B9B9FA1B862">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="configuring-rman-client-advanced.html#GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33" title="Backup piece size is an issue when it exceeds the maximum file size permitted by the file system or media management software. You can use the MAXPIECESIZE parameter of the CONFIGURE CHANNEL or ALLOCATE CHANNEL command to limit the size of backup pieces.">Configuring the Maximum Size of Backup Pieces</a></p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/ALLOCATE-CHANNEL.html#RCMRF102" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">ALLOCATE</code> <code class="codeph">CHANNEL</code> syntax
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">CONFIGURE</code> syntax
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89485"></a><div class="props_rev_3"><a id="GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A" name="GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A"></a><h4 id="BRADV-GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A" class="sect4"><span class="enumeration_section">8.3.8 </span>About Number and Size of RMAN Backup Sets
                  </h4>
                  <div>
                     <p>You use the <span class="italic"><code class="codeph">backupSpec</code></span> clause of the <code class="codeph">BACKUP</code> command to specify the objects to be backed up. Each <span class="italic"><code class="codeph">backupSpec</code></span> clause produces at least one backup set.
                     </p>
                     <p>The total number and size of backup sets depends mostly on an internal RMAN algorithm. However, you can influence RMAN behavior with the <code class="codeph">MAXSETSIZE</code> parameter in the <code class="codeph">CONFIGURE</code> or <code class="codeph">BACKUP</code> command. By limiting the size of the backup set, the parameter indirectly limits the number of files in the set and can possibly force RMAN to create additional backup sets. Also, you can specify <code class="codeph">BACKUP ... FILESPERSET</code> to specify the maximum number of files in each backup set.
                     </p>
                     <div class="infoboxnotealso" id="GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A__GUID-757856C9-A548-4205-9623-BBF1EAE042C5">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="backing-up-database-advanced.html#GUID-04C958FE-A0D3-41A2-B777-73868CDAD4B7" title="The MAXSETSIZE parameter of the BACKUP command specifies a maximum size for a backup set in units of bytes (default), kilobytes, megabytes, or gigabytes.">About Backup Set Size</a></p>
                           </li>
                           <li>
                              <p><a href="tuning-rman-performance.html#GUID-33D81037-2310-4021-8039-1A2C579AAA5A" title="The purpose of RMAN tuning is to identify the bottlenecks for a given job and use RMAN commands, initialization parameters, or adjustments to physical media to improve performance.Multiple factors can affect the performance when an RMAN channel is reading data from disk.During a backup, an RMAN channel reads the blocks from the input files into I/O disk buffers. The database files on the disk subsystem can be managed by either Automatic Storage Management (ASM) or an alternative volume manager or file system. The considerations for backup tuning change depending on whether you manage database files with ASM.When a channel reads from or writes to disk, the I/O is either synchronous I/O or asynchronous I/O. On operating systems that do not support native asynchronous I/O, the database can simulate it with special I/O slave processes. These processes are dedicated to performing I/O on behalf of another process. You can use the RATE parameter to set an upper limit for bytes read so that RMAN does not consume excessive disk bandwidth and degrade online performance. Essentially, RATE serves as a backup throttle. In the copy phase, a channel copies blocks from the input buffers to the output buffers and performs additional processing.When backing up to SBT, RMAN gives the media management software a stream of bytes and associates a unique name with this stream. All details of how and where that stream is stored are handled entirely by the media manager. Thus, a backup to tape involves the interaction of both RMAN and the media manager.The RMAN-specific factors affecting the SBT write phase are analogous to the factors affecting disk reads. In both cases, the buffer allocation, slave processes, and synchronous or asynchronous I/O affect performance. Multiple factors affect the speed of the backup to tape.If the tape device is remote, then the media manager must transfer data over the network. The tape native transfer rate is the speed of writing to a tape without compression. This speed represents the upper limit of the backup rate. The level of tape compression is very important for backup performance. If the tape has good compression, then the sustained backup rate is faster. Tape streaming during write operations has a major effect on tape backup performance. The physical tape block size can affect backup performance. The principal factor affecting the write phase for disk is the buffer size. Typically, you begin the tuning process by using V$ views to determine where RMAN backup and restore operations are encountering problems.You can monitor the progress of backups and restore jobs by querying the view V$SESSION_LONGOPS. RMAN uses two types of rows in V$SESSION_LONGOPS: detail rows and aggregate rows.You can use the V$BACKUP_SYNC_IO and V$BACKUP_ASYNC_IO views to determine the source of backup or restore bottlenecks and to see detailed progress of backup jobs.Query the V$BACKUP_SYNC_IO view to identify bottlenecks with synchronoous I/O.Query the V$BACKUP_ASYNC_IO to identify bottlenecks with asynchronous I/O.Many factors can affect backup performance. Often, finding the solution to a slow backup is a process of trial and error. The RATE parameter on a channel is intended to reduce, rather than increase, backup throughput so that more disk bandwidth is available for other database operations. If the backup is not streaming to tape, then confirm that the RATE parameter is not set.Some operating systems support native asynchronous I/O. If and only if your disk does not support asynchronous I/O, then set DBWR_IO_SLAVES. Any nonzero value for DBWR_IO_SLAVES causes a fixed number of disk I/O slaves to be used for backup and restore, which simulates asynchronous I/O.Set the LARGE_POOL_SIZE initialization parameter if the database reports an error in the alert log stating that it does not have enough memory and that it cannot start I/O slaves.You can perform several tasks to identify and remedy bottlenecks that affect backup performance. One reliable way to determine whether the output device or input disk I/O is the bottleneck in a given backup job is to compare the time required to run backup tasks with the time required to run BACKUP VALIDATE of the same tasks. BACKUP VALIDATE of a backup performs the same disk reads as a real backup but performs no I/O to an output device.Tuning the read phase can help to improve RMAN performance.If the read phase is performing well, then the copy or write phases are probably the bottleneck. In particular, if RMAN is sending data blocks to the tape drive fast enough to support streaming, but the tape is not streaming, then the SBT write phase is the bottleneck.">Tuning RMAN Performance</a> to learn about RMAN buffer management
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn the syntax for the <span class="italic"><code class="codeph">backupSpec</code></span> clause
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV196"></a><a id="BRADV89486"></a><div class="props_rev_3"><a id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97" name="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97"></a><h4 id="BRADV-GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97" class="sect4"><span class="enumeration_section">8.3.9 </span>About Multiplexed RMAN Backup Sets
                  </h4>
                  <div>
                     <p>When creating backup sets, RMAN can simultaneously read multiple files from disk and then write their blocks into the same backup set. For example, RMAN can read from two data files simultaneously, and then combine the blocks from these data files into a single backup piece. The combination of blocks from multiple files is called backup multiplexing.</p>
                     <p>Image copies, by contrast, are never multiplexed. </p>
                     <div class="infoboxnote" id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__GUID-10CE3FAB-D691-4ECD-9857-11AB637004E5">
                        <p class="notep1">Note:</p>
                        <p>If RMAN creates a <a href="glossary.html#GUID-6D6DDA5E-F1EF-4273-8649-137F1FC89EB6"><span class="xrefglossterm">multisection backup</span></a> of a data file, then the data file is not multiplexed with any other data file or <a href="glossary.html#GUID-FDECFF77-1833-4BD3-A23C-AA4806E28241"><span class="xrefglossterm">file section</span></a>.
                        </p>
                     </div>
                     <p>As <a href="rman-backup-concepts.html#GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__I1018026">Figure 8-1</a> illustrates, RMAN can back up three data files into a backup set that contains only one backup piece. This backup piece contains the intermingled data blocks of the three input data files.
                     </p>
                     <div class="figure" id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__I1018026">
                        <p class="titleinfigure">Figure 8-1 Data File Multiplexing</p><img src="img/bradv022.gif" alt="Description of Figure 8-1 follows" title="Description of Figure 8-1 follows" longdesc="img_text/bradv022.html"><br><a href="img_text/bradv022.html">Description of "Figure 8-1 Data File Multiplexing"</a></div>
                     <!-- class="figure" -->
                     <p>RMAN multiplexing is determined by several factors. For example, the <code class="codeph">FILESPERSET</code> parameter of the <code class="codeph">BACKUP</code> command determines how many data files to put in each backup set. The <code class="codeph">MAXOPENFILES</code> parameter of <code class="codeph">ALLOCATE CHANNEL</code> or <code class="codeph">CONFIGURE CHANNEL</code> defines how many data files RMAN can read from simultaneously. The basic multiplexing algorithm is as follows:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Number of files in each backup set</p>
                           <p>This number is the minimum of the <code class="codeph">FILESPERSET</code> setting and the number of files read by each channel. The <code class="codeph">FILESPERSET</code> default is 64.
                           </p>
                        </li>
                        <li>
                           <p>The <a href="glossary.html#GUID-648D7B2D-7AB2-40C0-AFFD-0A6FE569F3D7"><span class="xrefglossterm">level of multiplexing</span></a></p>
                           <p>This is the number of input files simultaneously read and then written into the same backup piece. The level of multiplexing is the minimum of <code class="codeph">MAXOPENFILES</code> and the number of files in each backup set. The <code class="codeph">MAXOPENFILES</code> default is 8.
                           </p>
                        </li>
                     </ul>
                     <p>Suppose that you back up 12 data files with one channel when <code class="codeph">FILEPERSET</code> is set to 4. The level of multiplexing is the lesser of this number and 8. Thus, the channel simultaneously writes blocks from 4 data files into each backup piece.
                     </p>
                     <p>Now suppose that you back up 50 data files with one channel. The number of files in each backup set is 50. The level of multiplexing is the lesser of this number and 8. Thus, the channel simultaneously writes blocks from 8 data files into each backup piece.</p>
                     <p>RMAN multiplexing of backup sets is different from <a href="glossary.html#GUID-C40B78A9-99C9-4B49-85D0-8174FD1E271B"><span class="xrefglossterm">media manager multiplexing</span></a>. One type of media manager multiplexing occurs when the media manager writes the concurrent output from multiple RMAN channels to a single sequential device. Another type occurs when a backup mixes database files and non-database files on the same tape.
                     </p>
                     <div class="infoboxnote" id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__GUID-E4DAF1D6-C569-4440-A486-DEBA713A4C37">
                        <p class="notep1">Note:</p>
                        <p>Oracle recommends that you never use media manager multiplexing for RMAN backups.</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__GUID-23DF9C1B-2AA3-460D-834F-D14D63550319">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="tuning-rman-performance.html#GUID-59FBFBBE-78F0-4035-8FAC-818DB539576B" title="During a backup, an RMAN channel reads the blocks from the input files into I/O disk buffers. The database files on the disk subsystem can be managed by either Automatic Storage Management (ASM) or an alternative volume manager or file system. The considerations for backup tuning change depending on whether you manage database files with ASM.">Allocation of Input Disk Buffers</a> to learn how multiplexing affects allocation of disk buffers during backups
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">BACKUP</code> syntax
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89487"></a><div class="props_rev_3"><a id="GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47" name="GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47"></a><h4 id="BRADV-GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47" class="sect4"><span class="enumeration_section">8.3.10 </span>About RMAN Proxy Copies
                  </h4>
                  <div>
                     <p>During a proxy copy, RMAN turns over control of the data transfer to a media manager that supports this feature. Proxy copy can only be used with media managers that support it and cannot be used with channels of type <code class="codeph">DISK</code>. The <code class="codeph">PROXY</code> option of the <code class="codeph">BACKUP</code> command specifies that a backup is a proxy copy.
                     </p>
                     <p>For each file that you attempt to back up with the <code class="codeph">BACKUP</code> <code class="codeph">PROXY</code> command, RMAN queries the media manager to determine whether it can perform a proxy copy. If the media manager cannot proxy copy the file, then RMAN backs up the file as if the <code class="codeph">PROXY</code> option had not been used. (Use the <code class="codeph">PROXY</code> <code class="codeph">ONLY</code> option to force RMAN to fail if a proxy copy cannot be performed.)
                     </p>
                     <p>Control files are never backed up with proxy copy. If the <code class="codeph">PROXY</code> option is specified on an operation backing up a control file, then it is silently ignored for the purposes of backing up the control file.
                     </p>
                     <div class="infoboxnotealso" id="GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47__GUID-53D434D4-1052-40A7-9D65-D21EC89FFF83">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../refrn/V-PROXY_DATAFILE.html#REFRN30188" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">V$PROXY_DATAFILE</code> view
                              </p>
                           </li>
                           <li>
                              <p><a href="../refrn/V-PROXY_ARCHIVEDLOG.html#REFRN30187" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">V$PROXY_ARCHIVEDLOG</code> view
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for the <code class="codeph">BACKUP</code> command and the <code class="codeph">PROXY</code> option
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV89488"></a><div class="props_rev_3"><a id="GUID-3580BA12-463A-4A61-939D-58C51E81FF12" name="GUID-3580BA12-463A-4A61-939D-58C51E81FF12"></a><h3 id="BRADV-GUID-3580BA12-463A-4A61-939D-58C51E81FF12" class="sect3"><span class="enumeration_section">8.4 </span>About RMAN Image Copies
               </h3>
               <div>
                  <p>An image copy is an exact copy of a single data file, archived redo log file, or control file. </p>
                  <p>Image copies are not stored in an RMAN-specific format. They are identical to the results of copying a file with operating system commands. RMAN can use image copies during RMAN restore and recover operations, and you can also use image copies with non-RMAN restore and recovery techniques.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4" title="To create image copies and have them recorded in the RMAN repository, you run the RMAN BACKUP AS COPY command.">About RMAN-Created Image Copies</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0" title="RMAN can use image copies created by mechanisms outside of RMAN, such as native operating system file copy commands or third-party utilities that leave image copies of files on disk. This type of copy is known as a user-managed backup or operating system backup.">About User-Managed Image Copies</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV197"></a><a id="BRADV89489"></a><div class="props_rev_3"><a id="GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4" name="GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4"></a><h4 id="BRADV-GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4" class="sect4"><span class="enumeration_section">8.4.1 </span>About RMAN-Created Image Copies
                  </h4>
                  <div>
                     <p>To create image copies and have them recorded in the RMAN repository, you run the RMAN <code class="codeph">BACKUP</code> <code class="codeph">AS</code> <code class="codeph">COPY</code> command. 
                     </p>
                     <p>Alternatively, you can configure the default backup type for disk as image copies. A database server session is used to create the copy. The server session also performs actions such as validating the blocks in the file and recording the image copy in the RMAN repository.</p>
                     <p>As with backup pieces, <a href="../rcmrf/formatSpec.html#RCMRF195" target="_blank"><code class="codeph">FORMAT</code></a> variables are used to specify the names of image copies. The default format <code class="codeph">%U</code>, which was explained in <span class="q">"<a href="rman-backup-concepts.html#GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9" title="You can either let RMAN determine a unique name for backup pieces or use the FORMAT clause to specify a name.">About File Names for RMAN Backup Pieces</a>"</span>, is defined differently for image copies. The following example shows the name for data file <code class="codeph">2</code> generated by <code class="codeph">%U</code>:
                     </p><pre class="pre codeblock"><code>/d1/oracle/work/orcva/RDBMS/datafile/o1_mf_sysaux_2qylngm3_.dbf
</code></pre><p>When creating image copies, you can also name the output copies with the <code class="codeph">DB_FILE_NAME_CONVERT</code> parameter of the <code class="codeph">BACKUP</code> command. This parameter works identically to the <a href="../refrn/DB_FILE_NAME_CONVERT.html#REFRN10038" target="_blank"><code class="codeph">DB_FILE_NAME_CONVERT</code></a> initialization parameter. Pairs of file name prefixes are provided to change the names of the output files. If a file is not converted by any of the pairs, then RMAN uses the <code class="codeph">FORMAT</code> specification: if no <code class="codeph">FORMAT</code> is specified, then RMAN uses the default format <code class="codeph">%U</code>. 
                     </p>
                     <div class="example" id="GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4__CHDFBHHA">
                        <p class="titleinexample">Example 8-1 Specifying File Names with DB_FILE_NAME_CONVERT</p>
                        <p>This example copies the data files whose file name is prefixed with <code class="codeph">/maindisk/oradata/users</code> so that they are prefixed with <code class="codeph">/backups/users_ts</code>.
                        </p><pre class="pre codeblock"><code>BACKUP AS COPY 
  DB_FILE_NAME_CONVERT ('/maindisk/oradata/users',
                        '/backups/users_ts')
  TABLESPACE users;
</code></pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <p>If you run a <code class="codeph">RESTORE</code> command, then by default RMAN restores a data file or control file to its original location by copying an image copy backup to that location. Image copies are chosen over backup sets because of the extra overhead of reading through an entire backup set in search of files to be restored.
                        </p>
                        <p>If you must restore and recover a current data file, and if you have an image copy available on disk, then you do not need to have RMAN copy the image copy back to its old location. Instead, you can use the image copy in place as a replacement for the data file to be restored. <span class="q">"<a href="rman-complete-database-recovery.html#GUID-19A07A76-AE1E-41EE-8B7D-7C4EF1FD3137" title="You can recover a database by switching to image copies of inaccessible data files. This technique takes less time than traditional restore and recovery because no backups need to be restored.">Performing Complete Recovery After Switching to a Copy</a>"</span> explains how to perform this task.
                        </p>
                        <div class="infoboxnotealso" id="GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4__GUID-4B1FF3CA-8C95-42D6-9849-ED5D8E2A449C">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="configuring-rman-client-basic.html#GUID-BC37B3E4-3338-4452-A363-DB882F2E9415" title="The BACKUP command can create either backup sets or image copies. For disk, you can configure RMAN to create either backup sets or image copies as its default backup type with the CONFIGURE DEVICE TYPE DISK BACKUP TYPE TO command.">Configuring the Default Type for Backups: Backup Sets or Copies</a> to learn how to make either backup sets or image copies the default type of RMAN backups
                                 </p>
                              </li>
                              <li>
                                 <p><a href="backing-up-database.html#GUID-030BA0C5-832E-42A1-A63A-5E2D768BABB9" title="RMAN can create backups on disk as image copies or as backup sets.">Specifying Backup Set or Copy for an RMAN Backup to Disk</a></p>
                              </li>
                              <li>
                                 <p><a href="../rcmrf/formatSpec.html#RCMRF195" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn about the meaning of <code class="codeph">%U</code> for image copies
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV89490"></a><div class="props_rev_3"><a id="GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0" name="GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0"></a><h4 id="BRADV-GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0" class="sect4"><span class="enumeration_section">8.4.2 </span>About User-Managed Image Copies
                  </h4>
                  <div>
                     <p>RMAN can use image copies created by mechanisms outside of RMAN, such as native operating system file copy commands or third-party utilities that leave image copies of files on disk. This type of copy is known as a user-managed backup or operating system backup.</p>
                     <p>You can use the <a href="../rcmrf/CATALOG.html#RCMRF109" target="_blank"><code class="codeph">CATALOG</code></a> command to inspect an existing image copy and enter its metadata into the RMAN repository. However, the <code class="codeph">CATALOG</code> command does not do the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Read all blocks in the data file copy to ensure there are no corruptions</p>
                        </li>
                        <li>
                           <p>Guarantee that the image copy was correctly made in <a href="glossary.html#GUID-BD2A12D3-A995-49B8-AE99-B8DDDF4FE7E7"><span class="xrefglossterm">backup mode</span></a></p>
                        </li>
                     </ul>
                     <p>After you catalog these files, you can use them with the <a href="../rcmrf/RESTORE.html#RCMRF149" target="_blank"><code class="codeph">RESTORE</code></a> or <a href="../rcmrf/SWITCH.html#RCMRF159" target="_blank"><code class="codeph">SWITCH</code></a> commands just as you can for RMAN-generated image copies.
                     </p>
                     <p>Some sites store their data files on mirrored disk volumes, which permit the creation of image copies by <a href="glossary.html#GUID-4810DFC7-CC25-4CD9-8D04-79EE7DAF061D"><span class="xrefglossterm">breaking a mirror</span></a>. After you have broken the mirror, you can notify RMAN of the existence of a new user-managed copy, thus making it eligible for a backup. You must notify RMAN when the copy is no longer available by using the <a href="../rcmrf/CHANGE.html#RCMRF110" target="_blank"><code class="codeph">CHANGE</code></a> <code class="codeph">...</code> <code class="codeph">UNCATALOG</code> command.
                     </p>
                     <div class="infoboxnotealso" id="GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0__GUID-CAA82815-C2C1-43AC-800B-90579187BAA2">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="user-managed-database-backups.html#GUID-2193FAD0-F62C-4671-9272-55E8BD7367DC">Making User-Managed Database Backups</a></p>
                           </li>
                           <li>
                              <p><a href="maintaining-rman-backups.html#GUID-3FC88C14-C9CC-445D-8922-C92659004FA4" title="You can use the CATALOG command to make RMAN aware of the existence of archived logs not recorded in the repository or copies of database files that are created through means other than RMAN.">Adding Backup Records to the RMAN Repository</a> to learn how to catalog data file and archived log image copies
                              </p>
                           </li>
                           <li>
                              <p><a href="backing-up-database-advanced.html#GUID-EEA8D192-E7CD-4457-A0E3-5062EA2E8D0C" title="Many sites keep a backup of the database stored on disk in case a media failure occurs on the primary database or an incorrect user action requires point-in-time recovery. A data file backup on disk simplifies the restore step of recovery, making recovery much quicker and more reliable.">Making Split Mirror Backups with RMAN</a></p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/CHANGE.html#RCMRF110" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">CHANGE</code> syntax
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-D0AEBAF2-FDEA-4977-9B4D-97759A1CA865" name="GUID-D0AEBAF2-FDEA-4977-9B4D-97759A1CA865"></a><h3 id="BRADV-GUID-D0AEBAF2-FDEA-4977-9B4D-97759A1CA865" class="sect3"><span class="enumeration_section">8.5 </span>About Sparse Backups
               </h3>
               <div>
                  <p>You can use the RMAN <code class="codeph">BACKUP</code> command to back up data blocks from sparse data files, tablespaces containing sparse data files, sparse pluggable databases (PDBs), and multitenant container databases (CDBs) containing sparse PDBs. 
                  </p>
                  <p>A sparse data file is a logical Oracle object that is created as a shadow of a base data file object and is stored in a physical storage space known as delta space. For instance, consider a sparse database <code class="codeph">DB0</code> that is created from a base database <code class="codeph">DB</code>. In a sparse environment, it is mandatory that the base objects must be read-only. Unlike the base database, sparse databases are read-write databases. In this case, <code class="codeph">DB</code>, a read-only database, consists of 5 data files. <code class="codeph">DB0</code> recreates the logical versions of each of these 5 base data files and assigns a separate delta storage space for each individual file. When the sparse database <code class="codeph">DB0</code> updates a data block in one of the sparse data files, only the updated block is logically stored in the delta space of that modified data file. When you choose to perform a sparse backup on <code class="codeph">DB0</code>, the operation will copy data only from the delta storage space of the database and the delta space of the sparse data files. A sparse backup can either be in the backup set format (default) or the image copy format. RMAN restores sparse data files from sparse backups and then recovers them from archive and redo logs. You can perform a complete or a point-in-time recovery on sparse data files.
                  </p>
                  <p>To perform sparse backup and recovery operations, your database must have the <code class="codeph">COMPATIBLE</code> initialization parameter set to 12.2 or higher.
                  </p>
                  <p>If your database has the <code class="codeph">COMPATIBLE</code> initialization parameter as 12.2 and you perform a full or level 0 incremental backup on a non-sparse (normal) data file, then RMAN performs a traditional full or level 0 incremental backup of the specified data file. On the other hand, if you perform a full or level 0 incremental backup on a sparse data file, then RMAN performs a backup only of all the latest changes from the delta storage space of that particular data file.
                  </p>
                  <p>For a database with the <code class="codeph">COMPATIBLE</code> initialization parameter less than 12.2, RMAN continues to perform the backup and recovery operations as before and are not influenced by the sparseness of a data file.
                  </p>
                  <p>Sparse backups help in efficiently managing storage space and facilitate faster backup and recovery.</p>
                  <div class="infoboxnote" id="GUID-D0AEBAF2-FDEA-4977-9B4D-97759A1CA865__GUID-32B516C4-6C90-49D5-8C04-E9AAC0D767DB">
                     <p class="notep1">Note:</p>
                     <p>The base (read-only) data files in a sparse database are not encrypted. Ensure that the base data files are stored in a protected storage and accessed using secured communications.</p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-D0AEBAF2-FDEA-4977-9B4D-97759A1CA865__GUID-5B10FB60-6A45-45BE-B3AF-33B7B34F112C">
                     <p class="notep1">See Also:</p>
                     <p><a href="backing-up-database.html#GUID-17F2020E-9C9B-4D1C-BC60-A09C3A87CF55" title="Use the BACKUP command to back up sparse databases.">Backing Up Sparse Databases with RMAN</a></p>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D" name="GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D"></a><h3 id="BRADV-GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D" class="sect3"><span class="enumeration_section">8.6 </span>About Preplugin Backups
               </h3>
               <div>
                  <p>A preplugin backup is an RMAN backup of a non-CDB or a PDB that was created before the non-CDB or PDB was plugged in to a different CDB.</p>
                  <p></p>
                  <p>The CDB into which the non-CDB or PDB is plugged in is referred to as the destination CDB. Preplugin backups can be used for PDB restore and recovery operations in destination CDB. To perform media recovery, all the required archive redo logs must be included in the preplugin backup.</p>
                  <p>For preplugin backups to be usable in the destination CDB, metadata about the preplugin backups must be exported to the RMAN repository of the destination CDB. When a PDB is unplugged from a source CDB, the required metadata is stored in the XML file created during the unplug operation. With non-CDBs, metadata required to make preplugin backups usable in the destination CDB is added to the non-CDBs data dictionary using the <code class="codeph">DBMS_PDB.EXPORTRMANBACKUP()</code> procedure.
                  </p>
                  <p>Preplugin backups are usable only on the destination CDB into which the source non-CDB or PDB are plugged in. For example, assume that you migrate a PDB from the CDB <code class="codeph">src_cdb</code> to the CDB <code class="codeph">stage_cdb</code>. Subsequently, you migrate the source PDB from the CDB <code class="codeph">stage_cdb</code> to the CDB <code class="codeph">prod_cdb</code>. The PDB backups created on the CDB <code class="codeph">src_pdb</code> are accessible to CDB <code class="codeph">stage_pdb</code>. However, the CDB <code class="codeph">prod_cdb</code> can only access the PDB backups created on the CDB <code class="codeph">stage_cdb</code>, not the PDB backups created on the CDB <code class="codeph">src_cdb</code>. 
                  </p>
                  <div class="infoboxnotealso" id="GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D__GUID-24EF611B-FF85-458E-ABCF-237CF477990E">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="backing-up-database.html#GUID-E5A3E523-C55C-4666-8334-81E7A224371B" title="Preplugin backups of a PDB can be used to perform restore and recover operations after the PDB is migrated and plugged in to a different destination CDB.">Creating Preplugin Backups of PDBs Using RMAN</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-7F9F8913-2838-4066-A000-048B35A70EA4" title="Preplugin backups ensure that an RMAN backup is usable after a non-CDB is plugged in as a PDB into a CDB.">Creating a Preplugin Backup of the Whole Database</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="BRADV107"></a><div class="props_rev_3"><a id="GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5" name="GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5"></a><h3 id="BRADV-GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5" class="sect3"><span class="enumeration_section">8.7 </span>About Multiple Copies of RMAN Backups
               </h3>
               <div>
                  <p>RMAN enables you to make multiple, identical copies of backups.</p>
                  <p>Use one of the following ways:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Duplex backups with the <code class="codeph">BACKUP</code> <code class="codeph">... COPIES</code> command, in which case RMAN creates multiple copies of each backup set
                        </p>
                        <p>See <a href="rman-backup-concepts.html#GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A">About Duplexed Backup Sets</a>.
                        </p>
                     </li>
                     <li>
                        <p>Back up your files as backup sets or image copies, and then back up the backup sets or image copies with the RMAN <code class="codeph">BACKUP</code> <code class="codeph">BACKUPSET</code> or <code class="codeph">BACKUP </code><code class="codeph">COPY OF</code> commands
                        </p>
                        <p>See <a href="rman-backup-concepts.html#GUID-3F8EDAFC-8A29-4E7B-BFEC-087AE10EDC91" title="The RMAN BACKUP BACKUPSET command backs up backup sets that were created on disk. The command is a useful way to spread backups among multiple media.">About Backups of RMAN Backups</a>.
                        </p>
                     </li>
                  </ul>
               </div><a id="BRADV89491"></a><div class="props_rev_3"><a id="GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A" name="GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A"></a><h4 id="BRADV-GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A" class="sect4"><span class="enumeration_section">8.7.1 </span>About Duplexed Backup Sets
                  </h4>
                  <div>
                     <p><a id="d36784e3646" class="indexterm-anchor"></a><a id="d36784e3648" class="indexterm-anchor"></a>When backing up data files, archived redo log files, server parameter files, and control files into backup pieces, RMAN can create a <a href="glossary.html#GUID-614D6594-1A1A-46EE-A041-312ADAB7E151"><span class="xrefglossterm">duplexed backup set</span></a>, producing up to four identical copies of each backup piece in the backup set on different backup destinations with one <code class="codeph">BACKUP</code> command. Duplexing is not supported for backup operations that produce image copies.
                     </p>
                     <p>You can use the <code class="codeph">COPIES</code> parameter in the <code class="codeph">CONFIGURE</code>, <code class="codeph">SET</code>, or<a id="d36784e3673" class="indexterm-anchor"></a><a id="d36784e3677" class="indexterm-anchor"></a> <code class="codeph">BACKUP</code> commands to specify duplexing of backup sets when using the <code class="codeph">BACKUP</code> command. RMAN can duplex backups to either disk or tape, but cannot duplex backups to tape and disk simultaneously. When backing up to tape, ensure that the number of copies does not exceed the number of available tape devices.
                     </p>
                     <p><a id="d36784e3690" class="indexterm-anchor"></a><a id="d36784e3694" class="indexterm-anchor"></a>The <code class="codeph">FORMAT</code> parameter of the <code class="codeph">BACKUP</code> command specifies the destinations for duplexed backups. The following example creates three copies of the backup of data file 7:
                     </p><pre class="oac_no_warn" dir="ltr">BACKUP DEVICE TYPE DISK COPIES 3 DATAFILE 7 
  FORMAT '/disk1/%U','?/oradata/%U','?/%U';
</pre><p>RMAN places the first copy of each backup piece in <code class="codeph">/disk1</code>, the second in <code class="codeph">?/oradata</code>, and the third in the Oracle home. RMAN does not produce three backup sets, each with a different unique backup set key. Rather, RMAN produces one backup set with a unique key, and generates three identical copies of each backup piece in the set. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A__GUID-E86A1E9C-6391-414B-B664-6785ED7B1BDB">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="configuring-rman-client-advanced.html#GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B" title="Use the CONFIGURE ... BACKUP COPIES command to specify how many copies of each backup piece are created on the specified device type for the specified type of file. This type of backup is known as a duplexed backup set.">Configuring Backup Duplexing</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="backing-up-database-advanced.html#GUID-4CFE9BA0-E298-42B8-9FB6-D36751C09D54" title="RMAN can make up to four copies of a backup set simultaneously, each an exact duplicate of the others.">Duplexing Backup Sets</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">CONFIGURE</code> syntax
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/SET.html#RCMRF153" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">SET</code> syntax
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89492"></a><div class="props_rev_3"><a id="GUID-3F8EDAFC-8A29-4E7B-BFEC-087AE10EDC91" name="GUID-3F8EDAFC-8A29-4E7B-BFEC-087AE10EDC91"></a><h4 id="BRADV-GUID-3F8EDAFC-8A29-4E7B-BFEC-087AE10EDC91" class="sect4"><span class="enumeration_section">8.7.2 </span>About Backups of RMAN Backups
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">BACKUP</code> command to back up existing backup sets and image copies. Backing up existing backups enables you to make multiple, identical copies of RMAN backups.
                     </p>
                     <p>The following sections provide more information about the methods of creating backups up backups:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-27161367-1F36-403A-9862-F7C69DA24642" title="The RMAN BACKUP BACKUPSET command backs up backup sets that were created on disk. The command is a useful way to spread backups among multiple media.">Backups of Backup Sets</a></p>
                        </li>
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-FEBF71D7-0FD8-4BB4-8B71-6485165C8C01">Backups of Image Copies</a></p>
                        </li>
                     </ul>
                  </div><a id="BRADV607"></a><a id="BRADV203"></a><a id="BRADV89493"></a><div class="props_rev_3"><a id="GUID-27161367-1F36-403A-9862-F7C69DA24642" name="GUID-27161367-1F36-403A-9862-F7C69DA24642"></a><h5 id="BRADV-GUID-27161367-1F36-403A-9862-F7C69DA24642" class="sect5"><span class="enumeration_section">8.7.2.1 </span>Backups of Backup Sets
                     </h5>
                     <div>
                        <p>The RMAN <code class="codeph">BACKUP BACKUPSET</code> command backs up backup sets that were created on disk. The command is a useful way to spread backups among multiple media.
                        </p>
                        <p>If RMAN discovers that one copy of a backup set is corrupted or missing, then it searches for other copies of the same backup set. This behavior is similar to the behavior of RMAN when backing up archived redo logs that exist in multiple archiving destinations.</p>
                        <p>Starting with Oracle Database Release 18c, while backing up backup sets, you can compress backup sets that were not previously compressed by using the <code class="codeph">BACKUP AS COMPRESSED BACKUPSET</code> command.
                        </p>
                        <p>RMAN enables you to create encrypted backups of unencrypted backup sets. Before you back up the unencrypted backup sets, use the <code class="codeph">SET ENCRYPTION FOR DATABASE ON</code> command to enable encryption. Note that the <code class="codeph">SET</code> command enables encryption for the current RMAN session. If encryption is not required for subsequent operations, then turn off encryption for the database.
                        </p>
                        <div class="example" id="GUID-27161367-1F36-403A-9862-F7C69DA24642__CHDHGCFI">
                           <p class="titleinexample">Example 8-2 Backing Up Backup Sets to Tape</p>
                           <p>This example shows how you might run the <code class="codeph">BACKUP</code> command weekly as part of the production backup schedule. In this way, you ensure that all your backups exist on both disk and tape.
                           </p><pre class="oac_no_warn" dir="ltr">BACKUP DEVICE TYPE DISK AS BACKUPSET 
  DATABASE PLUS ARCHIVELOG; 
BACKUP 
  DEVICE TYPE sbt 
  BACKUPSET ALL; # copies backup sets on disk to tape</pre><div class="infoboxnote" id="GUID-27161367-1F36-403A-9862-F7C69DA24642__GUID-4A312AF8-5FB7-44B5-A2C4-63CD32486337">
                              <p class="notep1">Note:</p>
                              <p>Backups to <code class="codeph">sbt</code> that use automatic channels require that you first run the <code class="codeph">CONFIGURE</code> <code class="codeph">DEVICE</code> <code class="codeph">TYPE</code> <code class="codeph">sbt</code> command.
                              </p>
                           </div>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-27161367-1F36-403A-9862-F7C69DA24642__CHDFIGIE">
                           <p class="titleinexample">Example 8-3 Managing Space Allocation</p>
                           <p>You can also use <code class="codeph">BACKUP</code> <code class="codeph">BACKUPSET</code> to manage backup space allocation. This example backs up backup sets that were created more than a week ago from disk to tape, and then deletes them from disk.
                           </p><pre class="oac_no_warn" dir="ltr">BACKUP 
  DEVICE TYPE sbt 
  BACKUPSET COMPLETED BEFORE 'SYSDATE-7' 
  DELETE INPUT;
</pre><p><code class="codeph">DELETE</code> <code class="codeph">INPUT</code> here is equivalent to <code class="codeph">DELETE</code> <code class="codeph">ALL</code> <code class="codeph">INPUT</code>: RMAN deletes all existing copies of the backup set. If you duplexed a backup to four locations, then RMAN deletes all four copies of the pieces in the backup set.
                           </p>
                           <div class="infoboxnotealso" id="GUID-27161367-1F36-403A-9862-F7C69DA24642__GUID-A8948460-5FB1-41A4-9C8D-57660ACBF89F">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="backing-up-database.html#GUID-731ADA67-235E-481D-AC17-9F9067AD55BF" title="You can use the BACKUP BACKUPSET command to back up backup sets produced by other backup jobs. You can also use BACKUP RECOVERY AREA to back up recovery files created in the current and all previous fast recovery area destinations. The BACKUP BACKUPSET command creates additional copies of backup pieces in a backup set, but does not create a new backup set. For a backup retention policy based on redundancy, a backup set is counted as one instance of a backup. This statement is true even if there are multiple copies of the backup pieces that form the backup set, such as when a backup set has been backed up from disk to tape.Use the BACKUP BACKUPSET command to copy backup sets from disk to tape. Use the BACKUP command to back up image copies to tape.">Backing Up RMAN Backups</a>"</span></p>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="BRADV89494"></a><div class="props_rev_3"><a id="GUID-FEBF71D7-0FD8-4BB4-8B71-6485165C8C01" name="GUID-FEBF71D7-0FD8-4BB4-8B71-6485165C8C01"></a><h5 id="BRADV-GUID-FEBF71D7-0FD8-4BB4-8B71-6485165C8C01" class="sect5"><span class="enumeration_section">8.7.2.2 </span>Backups of Image Copies
                     </h5>
                     <div>
                        <p><a id="d36784e4125" class="indexterm-anchor"></a><a id="d36784e4129" class="indexterm-anchor"></a>You can use the <code class="codeph">BACKUP COPY OF</code> command to back up existing image copies of database files either as backup sets or as image copies. When using this command, an image copy of every data file specified in the command must exist. If there are multiple copies of a data file, then the latest one is used. If you specify a tablespace or the whole database, then RMAN issues an error if there are data files in the database or tablespace for which there are no image copy backups.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV111"></a><div class="props_rev_3"><a id="GUID-95840C84-1595-49AC-923D-310DA750676B" name="GUID-95840C84-1595-49AC-923D-310DA750676B"></a><h3 id="BRADV-GUID-95840C84-1595-49AC-923D-310DA750676B" class="sect3"><span class="enumeration_section">8.8 </span>About RMAN Control File and Server Parameter File Autobackups
               </h3>
               <div>
                  <p>Having recent backups of your control file and server parameter file is extremely valuable in many recovery situations. To ensure that you have backups of these files, the database supports control file and server parameter file autobackups. </p>
                  <p>The autobackup occurs independently of any backup of the current control file explicitly requested as part of your <code class="codeph">BACKUP</code> command. With a <a href="glossary.html#GUID-7CDA6567-DFB0-450D-8771-B033E9872AF7"><span class="xrefglossterm">control file autobackup</span></a>, RMAN can recover the database even if the current control file, recovery catalog, and server parameter file are inaccessible. Because the path used to store the autobackup follows a well-known format, RMAN can search for and restore the server parameter file from that autobackup. After you have started the instance with the restored server parameter file, RMAN can restore the control file from the autobackup. After you mount the control file, use the RMAN repository in the mounted control file to restore the data files.
                  </p>
                  <p>It is recommended that you turn on control file autobackups. Otherwise, RMAN database point-in-time recovery (DBPITR) and point-in-time recovery (PITR) for <a href="glossary.html#GUID-993BFB3F-3305-481C-999D-26132095DEC9"><span class="xrefglossterm">PDB</span></a>s may not work effectively when PITR needs to undo data file additions or deletions.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2" title="Depending on the configuration of the target database, RMAN can perform autobackups of the control file and server parameter file.">When RMAN Performs Control File Autobackups</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F" title="The first channel allocated during the backup job creates the autobackup and places it into its own backup set. For autobackups after database structural changes, the server process associated with the structural change makes the backup.">How RMAN Performs Control File Autobackups</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89495"></a><div class="props_rev_3"><a id="GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2" name="GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2"></a><h4 id="BRADV-GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2" class="sect4"><span class="enumeration_section">8.8.1 </span>When RMAN Performs Control File Autobackups
                  </h4>
                  <div>
                     <p>Depending on the configuration of the target database, RMAN can perform autobackups of the control file and server parameter file.</p>
                     <p>For non-CDBs, if <code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP</code> is <code class="codeph">ON</code>, then RMAN automatically backs up the control file and the current server parameter file (if used to start the database) after a successful <code class="codeph">BACKUP</code> command. For CDBs and standalone databases with the <code class="codeph">COMPATIBLE</code> initialization parameter set to 12.0 or higher, by default, the control file autobackup is turned on.
                     </p>
                     <p>If the database runs in <code class="codeph">ARCHIVELOG</code> mode, RMAN makes control file autobackups when a structural change to the database affects the contents of the control file.
                     </p>
                     <div class="infoboxnote" id="GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2__GUID-FD13ECCC-B9EF-4E08-96F4-FCB5A89CCDBF">
                        <p class="notep1">Note:</p>
                        <p>Beginning with Oracle Database Release 11<span class="italic">g</span> Release 2, RMAN takes only one control file autobackup when multiple structural changes contained in a script (for example, adding tablespaces, altering the state of a tablespace or data file, adding a new online redo log, renaming a file, and so on) have been applied. 
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV89496"></a><div class="props_rev_3"><a id="GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F" name="GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F"></a><h4 id="BRADV-GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F" class="sect4"><span class="enumeration_section">8.8.2 </span>How RMAN Performs Control File Autobackups
                  </h4>
                  <div>
                     <p>The first channel allocated during the backup job creates the autobackup and places it into its own backup set. For autobackups after database structural changes, the server process associated with the structural change makes the backup.</p>
                     <p>If a server parameter file is in use by the database, then RMAN backs it up in the same backup set as the control file autobackup. After the autobackup completes, the database writes a message containing the complete path of the backup piece and the device type to the alert log located in the <a href="glossary.html#GUID-BDCE90D1-13B7-4D2C-A761-1583A238A247"><span class="xrefglossterm">Automatic Diagnostic Repository (ADR)</span></a>.
                     </p>
                     <div class="infoboxnote" id="GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F__GUID-D20BCECC-CFD2-472C-87D3-EF83B039D85D">
                        <p class="notep1">Note:</p>
                        <p>Control file autobackups are never duplexed.</p>
                     </div>
                     <p>The control file autobackup file name has a default format of <code class="codeph">%F</code> for all device types, so that RMAN can determine the file location and restore it without a repository. You can specify a different format with the <code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP FORMAT</code> command, but all autobackup formats must include the <code class="codeph">%F</code> variable. If you do not use the default format, then during disaster recovery you must specify the format that was used to generate the autobackups. Otherwise, RMAN cannot restore the autobackup.
                     </p>
                     <div class="infoboxnotealso" id="GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F__GUID-FAB4770C-BD14-4909-A759-94D224954DC0">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="configuring-rman-client-basic.html#GUID-98BA7492-7108-4DF9-B5A2-21957072E308" title="You can configure RMAN to automatically back up the control file and server parameter file. The autobackup occurs whenever a backup record is added.">Configuring Control File and Server Parameter File Autobackups</a></p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">CONFIGURE</code> syntax
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">BACKUP</code> syntax
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/formatSpec.html#RCMRF195" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn about the substitution variable <code class="codeph">%F</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV109"></a><div class="props_rev_3"><a id="GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023" name="GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023"></a><h3 id="BRADV-GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023" class="sect3"><span class="enumeration_section">8.9 </span>About RMAN Incremental Backups
               </h3>
               <div>
                  <p>An incremental backup copies only those data blocks that have changed since a previous backup. You can use RMAN to create incremental backups of data files, tablespaces, or the whole database.</p>
                  <p>By default, RMAN makes full backups. A <a href="glossary.html#GUID-D47BE9B3-BAE1-4415-B4B4-4D577B6CB493"><span class="xrefglossterm">full backup</span></a> of a data file includes every allocated block in the file being backed up. A full backup of a data file can be an image copy, in which case every data block is backed up. It can also be stored in a backup set, in which case data file blocks not in use may be skipped.
                  </p>
                  <p>A full backup has no effect on subsequent incremental backups. Image copies are always full backups because they include every data block in a data file. A backup set is by default a full backup because it can potentially include every data block in a data file, although <a href="glossary.html#GUID-0AA7EB43-FEA6-405F-9443-A4A2B43FFF96"><span class="xrefglossterm">unused block compression</span></a> means that blocks never used are excluded and, in some cases, currently unused blocks are excluded (see <span class="q">"<a href="rman-backup-concepts.html#GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070" title="RMAN can use block compression when creating backup sets.">About RMAN Block Compression for Backup Sets</a>"</span>).
                  </p>
                  <p>A full backup cannot be part of an incremental backup strategy; that is, it cannot be the parent for a subsequent incremental backup.</p>
                  <div class="infoboxnotealso" id="GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023__GUID-9396A789-0FFE-4DE0-9FC2-DC28188F90E7">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79" title="RMAN can create multilevel incremental backups. Each incremental level is denoted by a value of 0 or 1.">About Multilevel Incremental Backups</a></p>
                        </li>
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-4F871762-2D64-4709-910A-1880D39A4B99">About the Incremental Backup Algorithm</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV89499"></a><div class="props_rev_3"><a id="GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79" name="GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79"></a><h4 id="BRADV-GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79" class="sect4"><span class="enumeration_section">8.9.1 </span>About Multilevel Incremental Backups
                  </h4>
                  <div>
                     <p>RMAN can create multilevel incremental backups. Each incremental level is denoted by a value of 0 or 1. </p>
                     <p>A <a href="glossary.html#GUID-DF84C185-E97D-4D3C-BF4E-41A9090C5F4C"><span class="xrefglossterm">level 0 incremental backup</span></a>, which is the base for subsequent incremental backups, copies all blocks containing data. The only difference between a level 0 incremental backup and a full backup is that a full backup is never included in an incremental strategy. Thus, an incremental level 0 backup is a full backup that happens to be the parent of incremental backups whose level is greater than 0.
                     </p>
                     <p>A level 1 incremental backup can be either of the following types:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A <a href="glossary.html#GUID-353B6668-6BA5-4815-8F08-1CD5B446FBD6"><span class="xrefglossterm">differential incremental backup</span></a>, which backs up all blocks changed after the most recent incremental backup at level 1 or 0
                           </p>
                           <p>See <a href="rman-backup-concepts.html#GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2" title="In a differential level 1 backup, RMAN backs up all blocks that have changed since the most recent incremental backup at level 1 (cumulative or differential) or level 0.">About Differential Incremental Backups</a>.
                           </p>
                        </li>
                        <li>
                           <p>A <a href="glossary.html#GUID-8BABFB51-EA47-4204-9A44-E1695A9F9FBF"><span class="xrefglossterm">cumulative incremental backup</span></a>, which backs up all blocks changed after the most recent incremental backup at level 0
                           </p>
                           <p>See <a href="rman-backup-concepts.html#GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859" title="In a cumulative level 1 backup, RMAN backs up all blocks used since the most recent level 0 incremental backup in either the current or parent incarnation.">About Cumulative Incremental Backups</a>.
                           </p>
                        </li>
                     </ul>
                     <p>Incremental backups are differential by default.</p>
                     <p>Incremental backups at level 0 can be either backup sets or image copies, but incremental backups at level 1 can only be backup sets.</p>
                     <div class="infoboxnote" id="GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79__GUID-2C755C08-D6E9-4822-AD53-A29EB3762F30">
                        <p class="notep1">Note:</p>
                        <p> Cumulative backups are preferable to differential backups when recovery time is more important than disk space, because fewer incremental backups must be applied during recovery.</p>
                     </div>
                     <p>The size of the backup file depends solely upon the number of blocks modified, the incremental backup level, and the type of incremental backup (differential or cumulative).</p>
                  </div><a id="BRADV207"></a><a id="BRADV89500"></a><div class="props_rev_3"><a id="GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2" name="GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2"></a><h5 id="BRADV-GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2" class="sect5"><span class="enumeration_section">8.9.1.1 </span>About Differential Incremental Backups
                     </h5>
                     <div>
                        <p>In a differential level 1 backup, RMAN backs up all blocks that have changed since the most recent incremental backup at level 1 (cumulative or differential) or level 0. </p>
                        <p>For example, in a differential level 1 backup, RMAN determines which level 1 backup occurred most recently and backs up all blocks modified after that backup. If no level 1 is available, then RMAN copies all blocks changed since the base level 0 backup.</p>
                        <p>If no level 0 backup is available in either the current or parent <a href="glossary.html#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">incarnation</span></a>, then the behavior varies with the compatibility mode setting. If compatibility is &gt;=10.0.0, RMAN copies all blocks that have been changed since the file was created. Otherwise, RMAN generates a level 0 backup.
                        </p>
                        <div class="figure" id="GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2__BABFJCBH">
                           <p class="titleinfigure">Figure 8-2 Differential Incremental Backups</p><img src="img/bradv017.gif" alt="Description of Figure 8-2 follows" title="Description of Figure 8-2 follows" longdesc="img_text/bradv017.html"><br><a href="img_text/bradv017.html">Description of "Figure 8-2 Differential Incremental Backups"</a></div>
                        <!-- class="figure" -->
                        <p>In the example shown in <a href="rman-backup-concepts.html#GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2__BABFJCBH">Figure 8-2</a>, the following activity occurs each week:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Sunday</p>
                              <p>An incremental level 0 backup backs up <span class="italic">all</span> blocks that have ever been in use in this database.
                              </p>
                           </li>
                           <li>
                              <p>Monday through Saturday</p>
                              <p>On each day from Monday through Saturday, a differential incremental level 1 backup backs up all blocks that have changed since the most recent incremental backup at level 1 or 0. The Monday backup copies blocks changed since Sunday level 0 backup, the Tuesday backup copies blocks changed since the Monday level 1 backup, and so forth.</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="BRADV208"></a><a id="BRADV89501"></a><div class="props_rev_3"><a id="GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859" name="GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859"></a><h5 id="BRADV-GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859" class="sect5"><span class="enumeration_section">8.9.1.2 </span>About Cumulative Incremental Backups
                     </h5>
                     <div>
                        <p>In a cumulative level 1 backup, RMAN backs up all blocks used since the most recent level 0 incremental backup in either the current or parent incarnation.</p>
                        <p>Cumulative incremental backups reduce the work needed for a restore operation by ensuring that you only need one incremental backup from any particular level. Cumulative backups require more space and time than differential backups because they duplicate the work done by previous backups at the same level.</p>
                        <p>In the example shown in <a href="rman-backup-concepts.html#GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859__BABHEJFE">Figure 8-3</a>, the following occurs each week:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Sunday</p>
                              <p>An incremental level 0 backup backs up <span class="italic">all</span> blocks that have ever been in use in this database.
                              </p>
                           </li>
                           <li>
                              <p>Monday - Saturday</p>
                              <p>A cumulative incremental level 1 backup copies all blocks changed since the most recent level 0 backup. Because the most recent level 0 backup was created on Sunday, the level 1 backup on each day Monday through Saturday backs up all blocks changed since the Sunday backup.</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859__GUID-059641F8-F35E-4CD7-A2BA-7731466DCE33">
                           <p class="notep1">See Also:</p>
                           <p><a href="backing-up-database.html#GUID-2AF8EE74-CEB2-468D-A3B2-DD6AD8E41304" title="An incremental backup copies only data file blocks that have changed since a specified previous backup. Use the BACKUP command to create incremental backups.">Making and Updating RMAN Incremental Backups</a></p>
                        </div>
                        <div class="figure" id="GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859__BABHEJFE">
                           <p class="titleinfigure">Figure 8-3 Cumulative Incremental Backups</p><img src="img/bradv018.gif" alt="Description of Figure 8-3 follows" title="Description of Figure 8-3 follows" longdesc="img_text/bradv018.html"><br><a href="img_text/bradv018.html">Description of "Figure 8-3 Cumulative Incremental Backups"</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div>
               </div><a id="BRADV90078"></a><div class="props_rev_3"><a id="GUID-16069217-F44A-45BF-BAE6-774B99155E3A" name="GUID-16069217-F44A-45BF-BAE6-774B99155E3A"></a><h4 id="BRADV-GUID-16069217-F44A-45BF-BAE6-774B99155E3A" class="sect4"><span class="enumeration_section">8.9.2 </span>About Block Change Tracking
                  </h4>
                  <div>
                     <p>The block change tracking feature for incremental backups improves incremental backup performance by recording changed blocks in each data file in a block change tracking file. </p>
                     <p>The block change tracking file is a small binary file stored in the <a href="glossary.html#GUID-B2954743-3455-4045-9200-891927E38048"><span class="xrefglossterm">database area</span></a>. RMAN tracks changed blocks as redo is generated.
                     </p>
                     <p>If block change tracking is enabled, then RMAN uses the change tracking file to identify changed blocks for incremental backups, thus avoiding the need to scan every block in the data file. RMAN only uses block change tracking when the incremental level is greater than 0, because a <a href="glossary.html#GUID-DF84C185-E97D-4D3C-BF4E-41A9090C5F4C"><span class="xrefglossterm">level 0 incremental backup</span></a> includes all blocks.
                     </p>
                     <div class="infoboxnotealso" id="GUID-16069217-F44A-45BF-BAE6-774B99155E3A__GUID-5C91A0AD-884F-4CDF-9A9D-982EEE49E19A">
                        <p class="notep1">See Also:</p>
                        <p><a href="backing-up-database.html#GUID-4E1F605A-76A7-48D0-9D9B-7343B4327E2A" title="The block change tracking feature for incremental backups improves backup performance by recording changed blocks for each data file.">Using Block Change Tracking to Improve Incremental Backup Performance</a></p>
                     </div>
                  </div>
               </div><a id="BRADV89498"></a><div class="props_rev_3"><a id="GUID-4F871762-2D64-4709-910A-1880D39A4B99" name="GUID-4F871762-2D64-4709-910A-1880D39A4B99"></a><h4 id="BRADV-GUID-4F871762-2D64-4709-910A-1880D39A4B99" class="sect4"><span class="enumeration_section">8.9.3 </span>About the Incremental Backup Algorithm
                  </h4>
                  <div>
                     <p>The following concepts are essential for understanding the algorithm that RMAN uses to make incremental backups:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Checkpoint SCN</p>
                           <p>Every data file has a <a href="glossary.html#GUID-22212AAE-6F3C-4E84-B940-5AB2261A7EDA"><span class="xrefglossterm">data file checkpoint</span></a> SCN, which you can view in <code class="codeph">V$DATAFILE.CHECKPOINT_CHANGE#</code>. All changes with an SCN <span class="italic">lower</span> than this SCN are guaranteed to be in the file. When a level 0 incremental backup is restored, the restored data file contains the checkpoint SCN that it had when the level 0 was created. When a level 1 incremental backup is applied to a file, the checkpoint SCN of the file is advanced to the checkpoint SCN that the file had when the incremental level 1 backup was created.
                           </p>
                        </li>
                        <li>
                           <p>Incremental start SCN</p>
                           <p>This SCN applies only to level 1 incremental backups. All blocks whose SCN is greater than or equal to the incremental start SCN are included in the backup. Blocks whose SCN is lower than the incremental start SCN are not included in the backup. The incremental start SCN is most often the checkpoint SCN of the parent of the level 1 backup.</p>
                        </li>
                        <li>
                           <p>Block SCN</p>
                           <p>Every data block in a data file records the SCN at which the most recent change was made to the block.</p>
                        </li>
                     </ul>
                     <p>When RMAN makes a level 1 incremental backup of a file, RMAN reads the file, examines the SCN of every block, and backs up blocks whose SCN is greater than or equal to the incremental start SCN for this backup. If the backup is differential, then the incremental start SCN is the checkpoint SCN of the most recent level 1 backup. If the backup is cumulative, then the incremental start SCN is the checkpoint SCN of the most recent level 0 backup.</p>
                     <p>When block change tracking is enabled, RMAN uses bitmaps to avoid reading blocks that have not changed during the range from incremental start SCN to checkpoint SCN. RMAN still examines every block that is read and uses the SCN in the block to decide which blocks to include in the backup.</p>
                     <p>One consequence of the incremental backup algorithm is that RMAN applies all blocks containing changed data during recovery, even if the change is to an object created with the <code class="codeph">NOLOGGING</code> option. Thus, if you restore a backup made before <code class="codeph">NOLOGGING</code> changes were made, then incremental backups are the only way to recover these changes.
                     </p>
                  </div>
               </div><a id="BRADV89497"></a><div class="props_rev_3"><a id="GUID-D3BD53B8-91F3-474C-BD10-00AE9B30E610" name="GUID-D3BD53B8-91F3-474C-BD10-00AE9B30E610"></a><h4 id="BRADV-GUID-D3BD53B8-91F3-474C-BD10-00AE9B30E610" class="sect4"><span class="enumeration_section">8.9.4 </span>About Recovery with Incremental Backups
                  </h4>
                  <div>
                     <p>During media recovery, RMAN examines the restored files to determine whether it can recover them with an incremental backup. If it has a choice, then RMAN always chooses incremental backups over archived redo logs because applying changes at a block level is faster than applying redo.</p>
                     <p>RMAN does not need to restore a base incremental backup of a data file to apply incremental backups to the data file during recovery. For example, you can restore data file image copies and recover them with incremental backups.</p>
                     <div class="infoboxnotealso" id="GUID-D3BD53B8-91F3-474C-BD10-00AE9B30E610__GUID-FB2DD143-9EA7-41E5-A74D-1357F41DFC72">
                        <p class="notep1">See Also:</p>
                        <p><a href="rman-data-repair-concepts.html#GUID-EC33413A-79B8-4ECF-A77B-DF91957D76FF" title="RMAN automates media recovery. RMAN automatically restores and applies both incremental backups and archived redo logs in whatever combination is most efficient.">About Selection of Incremental Backups and Archived Redo Logs</a></p>
                     </div>
                  </div>
               </div><a id="BRADV567"></a><div class="props_rev_3"><a id="GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6" name="GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6"></a><h4 id="BRADV-GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6" class="sect4"><span class="enumeration_section">8.9.5 </span>About the Incremental-Forever Backup Strategy for Recovery Appliance
                  </h4>
                  <div>
                     <p>The incremental-forever backup strategy eliminates the need for creating recurring full backups when backing up to Zero Data Loss Recovery Appliance (Recovery Appliance). Although Recovery Appliance supports other RMAN backup strategies, the recommended method for ongoing backups is the incremental-forever backup strategy.</p>
                     <p>With the incremental-forever backup strategy, you need to create only one initial level 0 full backup and subsequent level 1 incremental backups. The initial backup and the subsequent incrementals must be RMAN backup sets and not image copies.</p>
                     <p>Note that the Recovery Appliance incremental-forever backup strategy is different from the incrementally updated backup strategy in a conventional RMAN setup. With RMAN, incrementally updated backups use an initial image copy, followed by incremental backups which are eventually merged into the full backup. Therefore, there is always at least one full image copy, a few incremental backups, and some archived redo logs.</p>
                     <div class="infoboxnotealso" id="GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6__GUID-ED558961-9446-4E59-B910-E094E321A212">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="rman-complete-database-recovery.html#GUID-C192C448-0D8A-4366-91AB-BE62ED5B12ED" title="Zero Data Loss Recovery Appliance (Recovery Appliance) substantially reduces the window of potential data loss that exists between successive archived redo log backups. You to recover target databases to within a few subseconds of a database failure.">About Real-time Redo Transport for Recovery Appliance</a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=AMPDB768" target="_blank"><span class="italic">Zero Data Loss Recovery Appliance Protected Database Configuration Guide</span></a> for information about the incremental-forever backup strategy
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV99966"></a><div class="props_rev_3"><a id="GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF" name="GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF"></a><h3 id="BRADV-GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF" class="sect3"><span class="enumeration_section">8.10 </span>About Backup Retention Policies
               </h3>
               <div>
                  <p>You can use the <code class="codeph">CONFIGURE RETENTION POLICY</code> command to create a persistent and automatic backup retention policy. 
                  </p>
                  <p>When a backup retention policy is in effect, RMAN considers a backup of data files or control files as an <a href="glossary.html#GUID-A4D8B0BE-D3B9-4DD9-A7B3-BC0D88D25DC0"><span class="xrefglossterm">obsolete backup</span></a>, that is, no longer needed for recovery, according to criteria specified in the <code class="codeph">CONFIGURE</code> command. You can use the <a href="../rcmrf/REPORT.html#RCMRF147" target="_blank"><code class="codeph">REPORT OBSOLETE</code></a> command to view obsolete files and the <a href="../rcmrf/DELETE.html#RCMRF121" target="_blank"><code class="codeph">DELETE OBSOLETE</code></a> command to delete them.
                  </p>
                  <p>As you produce backups over time, older backups become obsolete as they are no longer needed to satisfy the retention policy. RMAN can identify the obsolete files for you, but it does not automatically delete them. You must use the <code class="codeph">DELETE</code> <code class="codeph">OBSOLETE</code> command to delete files that are no longer needed to satisfy the retention policy.
                  </p>
                  <p>If a fast recovery area is configured, then the database automatically deletes files that are either obsolete or backed up to tape when more recovery area space is needed for new files. The disk quota rules are distinct from the retention policy rules, but the database never deletes files in violation of the retention policy to satisfy the disk quota. Refer to <span class="q">"<a href="maintaining-rman-backups.html#GUID-3F11ECB5-1321-45F5-A557-BB1A5BAF011F" title="If the RMAN retention policy requires keeping a set of backups larger than the fast recovery area disk quota, or if the retention policy is set to NONE, then the fast recovery area can fill completely with no reclaimable space.">Responding to a Full Fast Recovery Area</a>"</span>.
                  </p>
                  <p>A backup is obsolete when <code class="codeph">REPORT</code> <code class="codeph">OBSOLETE</code> or <code class="codeph">DELETE</code> <code class="codeph">OBSOLETE</code> determines, based on the user-defined retention policy, that it is not needed for recovery. A backup is considered an <a href="glossary.html#GUID-A8547B27-5415-4AAA-B2B4-C0998EB62E47"><span class="xrefglossterm">expired backup</span></a> only when RMAN performs a crosscheck and cannot find the file. In short, <span class="italic">obsolete</span> means a file is not needed, whereas <span class="italic">expired</span> means it is not found.
                  </p>
                  <p>A backup retention policy applies only to full or level 0 data file and control file backups. For data file copies and proxy copies, if RMAN determines that the copy or proxy copy is not needed, then the copy or proxy copy can be deleted. For data file backup sets, RMAN cannot delete the backup set until all data file backups within the backup set are obsolete.</p>
                  <p>The retention policy is not responsible for deleting or rendering obsolete archived redo logs and incremental level 1 backups. Rather, these files become obsolete when no full backups exist that need them. Besides affecting full or level 0 data file and control file backups, the retention policy affects archived redo logs and level 1 incremental backups. First, RMAN decides which data file and control file backups are obsolete. Then, RMAN considers as obsolete all archived logs and incremental level 1 backups that are not needed to recover the oldest data file or control file backup that must be retained.</p>
                  <div class="infoboxnote" id="GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF__GUID-4F6CC500-7BC2-43B6-86E1-603D8F983494">
                     <p class="notep1">Note:</p>
                     <p>RMAN cannot implement an automatic retention policy if backups are deleted by non-RMAN techniques, for example, through the media manager's tape retention policy. The media manager must never expire a tape until all RMAN backups on that tape have been removed from the media manager's catalog.</p>
                  </div>
                  <p>There are two mutually exclusive options for implementing a retention policy: <a href="glossary.html#GUID-57A71B9A-2353-4669-A152-EFAD9AFF3ED3"><span class="xrefglossterm">redundancy</span></a> and <a href="glossary.html#GUID-1C595EF7-B8A1-4AA3-8C45-44E9FC8BAB9E"><span class="xrefglossterm">recovery window</span></a>.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED" title="A recovery window is a period that begins with the current time and extends backward in time to the point of recoverability. The point of recoverability is the earliest time for a hypothetical point-in-time recovery, that is, the earliest point to which you can recover following a media failure.">About the Recovery Window</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9" title="In some cases using a recovery window can complicate disk space planning because the number of backups that must be retained is not constant and depends on the backup schedule. In contrast, a redundancy-based retention policy specifies how many backups of each data file must be retained.">About Backup Redundancy</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A" title="You can run the REPORT OBSOLETE command to determine which backups are currently obsolete according to the retention policy.">About Batch Deletes of Obsolete Backups</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A" title="If you configure a fast recovery area, then the database uses an internal algorithm to select files in the fast recovery area that are no longer needed to meet the configured retention policy.">About Backup Retention Policy and Fast Recovery Area Deletion Rules</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV209"></a><a id="BRADV608"></a><a id="BRADV89502"></a><div class="props_rev_3"><a id="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED" name="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED"></a><h4 id="BRADV-GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED" class="sect4"><span class="enumeration_section">8.10.1 </span>About the Recovery Window
                  </h4>
                  <div>
                     <p>A recovery window is a period that begins with the current time and extends backward in time to the point of recoverability. The point of recoverability is the earliest time for a hypothetical point-in-time recovery, that is, the earliest point to which you can recover following a media failure.</p>
                     <p>For example, if you implement a recovery window of 1 week, then RMAN retains full backups and required incremental backups and archived logs so that the database can be recovered up to 7 days in the past. You implement this retention policy as follows:</p><pre class="pre codeblock"><code>CONFIGURE RETENTION POLICY TO RECOVERY WINDOW OF 7 DAYS;
</code></pre><p>This command ensures that for each data file, one backup that is older than the point of recoverability is retained. For example, if the recovery window is <code class="codeph">7</code>, then there must always exist one backup of each data file that satisfies the following condition:
                     </p><pre class="pre codeblock"><code>SYSDATE - BACKUP CHECKPOINT TIME &gt;= 7
</code></pre><p>All backups older than the most recent backup that satisfied this condition are obsolete.</p>
                     <p>Assume the retention policy illustrated in <a href="rman-backup-concepts.html#GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__I1018027">Figure 8-4</a>. The retention policy has the following aspects:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The recovery window is 7 days.</p>
                        </li>
                        <li>
                           <p>Database backups are scheduled every two weeks on these days:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>January 1</p>
                              </li>
                              <li>
                                 <p>January 15</p>
                              </li>
                              <li>
                                 <p>January 29</p>
                              </li>
                              <li>
                                 <p>February 12</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>The database runs in <code class="codeph">ARCHIVELOG</code> mode, and archived logs are saved on disk only if needed for the retention policy.
                           </p>
                        </li>
                     </ul>
                     <div class="figure" id="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__I1018027">
                        <p class="titleinfigure">Figure 8-4 Recovery Window, Part 1</p><img src="img/bradv004.png" alt="Description of Figure 8-4 follows" title="Description of Figure 8-4 follows" longdesc="img_text/bradv004.html"><br><a href="img_text/bradv004.html">Description of "Figure 8-4 Recovery Window, Part 1"</a></div>
                     <!-- class="figure" -->
                     <p>As illustrated in <a href="rman-backup-concepts.html#GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__I1018027">Figure 8-4</a>, the current time is January 23 and the point of recoverability is January 16. Hence, the January 15 backup is needed for recovery, and so are the archived logs from log sequence 500 through 850. The logs before 500 and the January 1 backup are obsolete because they are not needed for recovery to a point within the window.
                     </p>
                     <p>Assume the same scenario a week later, as depicted in <a href="rman-backup-concepts.html#GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__I1018028">Figure 8-5</a>.
                     </p>
                     <div class="figure" id="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__I1018028">
                        <p class="titleinfigure">Figure 8-5 Recovery Window, Part 2</p><img src="img/bradv002.png" alt="Description of Figure 8-5 follows" title="Description of Figure 8-5 follows" longdesc="img_text/bradv002.html"><br><a href="img_text/bradv002.html">Description of "Figure 8-5 Recovery Window, Part 2"</a></div>
                     <!-- class="figure" -->
                     <p>In this scenario, the current time is January 30 and the point of recoverability is January 23. Note how the January 15 backup is <span class="italic">not</span> obsolete even though a more recent backup (January 29) exists in the recovery window. This situation occurs because restoring the January 29 backup does not enable you to recover to the earliest time in the window, January 23. To ensure recoverability to any point in the window, you must save the January 15 backup and all archived logs from sequence 500 to 1150.
                     </p>
                     <div class="infoboxnotealso" id="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__GUID-E17A29E0-6A1B-45B3-9C68-A3F61AEF6AF6">
                        <p class="notep1">See Also:</p>
                        <p><a href="configuring-rman-client-basic.html#GUID-95ABBB30-713E-4781-B5C3-6ADBEB658DE3" title="The RECOVERY WINDOW parameter of the CONFIGURE command specifies the number of days between the current time and the earliest point of recoverability.">Configuring a Recovery Window-Based Retention Policy</a></p>
                     </div>
                  </div>
               </div><a id="BRADV89503"></a><div class="props_rev_3"><a id="GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9" name="GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9"></a><h4 id="BRADV-GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9" class="sect4"><span class="enumeration_section">8.10.2 </span>About Backup Redundancy
                  </h4>
                  <div>
                     <p>In some cases using a recovery window can complicate disk space planning because the number of backups that must be retained is not constant and depends on the backup schedule. In contrast, a redundancy-based retention policy specifies how many backups of each data file must be retained. </p>
                     <p>For example, you can configure a redundancy of 2 as follows:</p><pre class="pre codeblock"><code>CONFIGURE RETENTION POLICY TO REDUNDANCY 2;
</code></pre><p>The default retention policy is configured to <code class="codeph">REDUNDANCY</code> <code class="codeph">1</code>. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9__GUID-D1B32A62-734C-48E6-B67C-6B2E43D02001">
                        <p class="notep1">See Also:</p>
                        <p><a href="configuring-rman-client-basic.html#GUID-E9AEAC34-6C40-40A1-BAF5-3EAE20417715" title="The REDUNDANCY parameter of the CONFIGURE RETENTION POLICY command specifies how many full or level 0 backups of each data file and control file that RMAN keeps. The default retention policy is REDUNDANCY 1.">Configuring a Redundancy-Based Retention Policy</a></p>
                     </div>
                  </div>
               </div><a id="BRADV89504"></a><div class="props_rev_3"><a id="GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A" name="GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A"></a><h4 id="BRADV-GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A" class="sect4"><span class="enumeration_section">8.10.3 </span>About Batch Deletes of Obsolete Backups
                  </h4>
                  <div>
                     <p>You can run the <code class="codeph">REPORT OBSOLETE</code> command to determine which backups are currently obsolete according to the retention policy. 
                     </p>
                     <p>A companion command, <code class="codeph">DELETE OBSOLETE</code>, deletes all files that are obsolete according to the retention policy. You can run <code class="codeph">DELETE OBSOLETE</code> periodically to minimize space wasted by storing obsolete backups. For example, you can run <code class="codeph">DELETE OBSOLETE</code> in a weekly script.
                     </p>
                     <p>You can also override the configured retention policy by specifying the <code class="codeph">REDUNDANCY</code> or <code class="codeph">RECOVERY</code> <code class="codeph">WINDOW</code> options on the <code class="codeph">REPORT</code> or <code class="codeph">DELETE</code> commands. Using <code class="codeph">DELETE OBSOLETE</code> with a recovery window shorter than the configured recovery window effectively reduces the window of recoverability. For example, if the configured window is 14 days, but you execute <code class="codeph">DELETE OBSOLETE RECOVERY WINDOW OF 7 DAYS</code>, then you no longer have the ability to recover to a time between 7 and 14 days ago.
                     </p>
                     <div class="infoboxnotealso" id="GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A__GUID-EA814556-9A91-4E69-91ED-457FA7107112">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="reporting-rman-operations.html#GUID-550638CC-0D16-4B1A-83C7-5D10181DC7C1" title="As part of your backup and recovery strategy, you should periodically run reports that indicate what you have backed up. You can determine which data files need backups or which files were not backed up recently. Also, you can preview which backups RMAN must restore if a problem occurs.RMAN stores metadata of every database on which it performs operations.In a Data Guard environment, you can use the LIST, REPORT, and SHOW commands just as you can when not using Data Guard. You can run these commands with the FOR DB_UNIQUE_NAME clause to show the backups associated with a specified database. The LIST command uses the information in the RMAN repository to provide lists of backups and other objects relating to backup and recovery. The primary purpose of the LIST command is to list backup and copies. Specify the desired objects with the listObjList or recordSpec clause. If you do not specify an object, then RMAN displays copies of all database files and archived redo log files.You can specify several different conditions to narrow your LIST output.Use the LIST command to list preplugin backups and preplugin archived redo log files.Each time an OPEN RESETLOGS operation is performed on a database, this operation creates a new incarnation of the database.The RMAN REPORT command analyzes the available backups and your database. The REPORT command provides various reports of RMAN backups.Use the REPORT NEED BACKUP command to determine which database files need backup under a specific retention policy. You can use options of the REPORT NEED BACKUP command to specify different retention policies.The REPORT NEED BACKUP command can check the entire database, skip specified tablespaces, or check only specific tablespaces or data files against different retention policies.You can limit the backups tested by the REPORT NEED BACKUP command to disk-based or tape-based backups only.When a data file has been changed by an unrecoverable operation, such as a direct load insert, normal media recovery cannot be used to recover the file, because an unrecoverable operation does not generate redo. You must perform either a full or incremental backup of affected data files after such operations, to ensure that data blocks affected by the unrecoverable operation can be recovered using RMAN.You can report backup sets, backup pieces, and data file copies that are obsolete that is, not needed to meet a specified retention policy by specifying the OBSOLETE keyword. The REPORT SCHEMA command lists and displays information about the database files, tablespaces, and so on. You can view reports on the metadata related to a multitenant container database (CDB), the root only, or one or more pluggable databases (PDBs). Use the LIST command with the GUID option to list backups of pluggable databases (PDBs) that have been dropped from a multitenant container database (CDB).In some cases, V$ views supply information that is not available through use of the LIST and REPORT commands. An RMAN job is the set of commands executed within an RMAN session. Thus, one RMAN job can contain multiple commands. The ENCRYPTED column of the V$BACKUP_PIECE and V$RMAN_BACKUP_PIECE views indicates whether a backup piece is encrypted (YES) or unencrypted (NO).The LIST, REPORT, and SHOW commands provide the easiest means of accessing the data in the control file and the recovery catalog. RMAN obtains backup and recovery metadata from a target database control file and stores it in the tables of the recovery catalog. The recovery catalog views are derived from these tables. The recovery catalog views are not normalized or optimized for user queries.Most recovery catalog views contain the columns DB_KEY and DBINC_KEY. Each database registered in the recovery catalog can be uniquely identified by either the primary key, which is the DB_KEY column value, or the DBID, which is the 32-bit unique database identifier. Each incarnation of a database is uniquely identified by the DBINC_KEY column.Special considerations apply when querying the recovery catalog in a Data Guard environment. The DB_KEY value, which is the primary key for a registered database, is used only in the recovery catalog. The easiest way is to obtain the DB_KEY is to use the DBID of the target database, which is displayed whenever you connect RMAN to a database as TARGET. You can query the view RC_BACKUP_FILES for information about all backups of any database registered in the recovery catalog. Before querying RC_BACKUP_FILES, however, you must call the DBMS_RCVMAN.SETDATABASE procedure.">Reporting on RMAN Operations</a>to learn how to generate reports and delete backups
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF121" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">DELETE</code> syntax
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/REPORT.html#RCMRF147" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">REPORT</code> syntax
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89505"></a><div class="props_rev_3"><a id="GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A" name="GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A"></a><h4 id="BRADV-GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A" class="sect4"><span class="enumeration_section">8.10.4 </span>About Backup Retention Policy and Fast Recovery Area Deletion Rules
                  </h4>
                  <div>
                     <p>If you configure a fast recovery area, then the database uses an internal algorithm to select files in the fast recovery area that are no longer needed to meet the configured retention policy. </p>
                     <p>The retention policy is never violated when determining which files to delete from the fast recovery area to satisfy the disk quota rules. These backups have status <code class="codeph">OBSOLETE</code> and are eligible for deletion to satisfy the <a href="glossary.html#GUID-925AC655-2953-4F1F-9E5A-F8EA6D9DA552"><span class="xrefglossterm">disk quota</span></a> rules.
                     </p>
                     <p>The RMAN status <code class="codeph">OBSOLETE</code> is always determined in reference to a retention policy. For example, if a database backup is considered <code class="codeph">OBSOLETE</code> in the RMAN repository, then it is because it is either not needed for recovery to a point within the recovery window, or it is redundant.
                     </p>
                     <p>There is one important difference between the fast recovery area rules for <code class="codeph">OBSOLETE</code> status and the disk quota rules for deletion eligibility. Assume that archived logs 1000 through 2000, which are on disk, are needed for the current recovery window and so are not obsolete. If you back up these logs to tape, then the retention policy considers the disk logs as required, that is, not obsolete. Nevertheless, the fast recovery area disk quota algorithm considers the logs on disk as eligible for deletion because they have been backed up to tape. The logs on disk do not have <code class="codeph">OBSOLETE</code> status in the repository, but they are eligible for deletion by the fast recovery area. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A__GUID-445086E2-9643-4162-AA09-F83404107818">
                        <p class="notep1">See Also:</p>
                        <p><a href="maintaining-rman-backups.html#GUID-2D7B9EF4-C306-4377-82F2-DDE3549FB63C" title="RMAN uses certain rules to determine when files can be deleted from the fast recovery area.">Deletion Rules for the Fast Recovery Area</a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
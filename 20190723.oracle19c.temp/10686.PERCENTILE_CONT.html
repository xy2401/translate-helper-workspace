<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>PERCENTILE_CONT</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="PERCENT_RANK.html" title="Previous" type="text/html">
      <link rel="next" href="PERCENTILE_DISC.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="PERCENT_RANK.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="PERCENTILE_DISC.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">Functions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">PERCENTILE_CONT </li>
            </ol>
            <a id="GUID-CA259452-A565-41B3-A4F4-DD74B66CEDE0" name="GUID-CA259452-A565-41B3-A4F4-DD74B66CEDE0"></a><a id="SQLRF51606"></a><a id="SQLRF51607"></a><a id="SQLRF51608"></a><a id="SQLRF51609"></a><a id="SQLRF00687"></a>
            
            <h2 id="SQLRF-GUID-CA259452-A565-41B3-A4F4-DD74B66CEDE0" class="sect2">PERCENTILE_CONT </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-CA259452-A565-41B3-A4F4-DD74B66CEDE0__GUID-7E11D28D-71DB-44AE-808F-77BF59E8EBBB">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-CA259452-A565-41B3-A4F4-DD74B66CEDE0__GUID-A3E806CF-6F0F-48C8-ABF3-E3220AD8791E"><img src="img/percentile_cont.gif" alt="Description of percentile_cont.eps follows" title="Description of percentile_cont.eps follows" longdesc="img_text/percentile_cont.html"><br><a href="img_text/percentile_cont.html">Description of the illustration percentile_cont.eps</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-CA259452-A565-41B3-A4F4-DD74B66CEDE0__GUID-5EB9D19A-B821-4C83-B4D3-4E256EACCA31">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="Analytic-Functions.html#GUID-527832F7-63C0-4445-8C16-307FA5084056">Analytic Functions</a>"</span> for information on syntax, semantics, and restrictions of the <code class="codeph">OVER</code> clause
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CA259452-A565-41B3-A4F4-DD74B66CEDE0__GUID-919133EC-7490-4A17-819A-5F657E7D9A47">Purpose</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><code class="codeph">PERCENTILE_CONT</code> is an inverse distribution function that assumes a continuous distribution model. It takes a percentile value and a sort specification, and returns an interpolated value that would fall into that percentile value with respect to the sort specification. Nulls are ignored in the calculation.
                  </p>
                  <p>This function takes as an argument any numeric data type or any nonnumeric data type that can be implicitly converted to a numeric data type. The function returns the same data type as the numeric data type of the argument.</p>
                  <div class="infoboxnotealso" id="GUID-CA259452-A565-41B3-A4F4-DD74B66CEDE0__GUID-3817BC30-728E-4F69-9535-66116EAA0E29">
                     <p class="notep1">See Also:</p>
                     <p><a href="Data-Type-Comparison-Rules.html#GUID-98BE3A78-6E33-4181-B5CB-D96FD9DC1694__G195937" title="This matrix lists the data types in the first column and in the header cell for each subsequent column. An X in a cell indicates implicit conversion of the data types named in the header of that column and column 1 of that row.">Table 2-8</a> for more information on implicit conversion
                     </p>
                  </div>
                  <p>The first <span class="italic"><code class="codeph">expr</code></span> must evaluate to a numeric value between 0 and 1, because it is a percentile value. This <span class="italic"><code class="codeph">expr</code></span> must be constant within each aggregation group. The <code class="codeph">ORDER</code> <code class="codeph">BY</code> clause takes a single expression that must be a numeric or datetime value, as these are the types over which Oracle can perform interpolation.
                  </p>
                  <p>The result of <code class="codeph">PERCENTILE_CONT</code> is computed by linear interpolation between values after ordering them. Using the percentile value (P) and the number of rows (N) in the aggregation group, you can compute the row number you are interested in after ordering the rows with respect to the sort specification. This row number (RN) is computed according to the formula <code class="codeph">RN</code> <code class="codeph">=</code> <code class="codeph">(1+(P*(N-1))</code>. The final result of the aggregate function is computed by linear interpolation between the values from rows at row numbers <code class="codeph">CRN</code> <code class="codeph">=</code> <code class="codeph">CEILING(RN)</code> and <code class="codeph">FRN</code> <code class="codeph">=</code> <code class="codeph">FLOOR(RN)</code>.
                  </p>
                  <p>The final result will be:</p><pre class="oac_no_warn" dir="ltr">  If (CRN = FRN = RN) then the result is
    (value of expression from row at RN)
  Otherwise the result is
    (CRN - RN) * (value of expression for row at FRN) +
    (RN - FRN) * (value of expression for row at CRN)
</pre><p>You can use the <code class="codeph">PERCENTILE_CONT</code> function as an analytic function. You can specify only the <span class="italic"><code class="codeph">query_partitioning_clause</code></span> in its <code class="codeph">OVER</code> clause. It returns, for each row, the value that would fall into the specified percentile among a set of values within each partition.
                  </p>
                  <p>The <code class="codeph">MEDIAN</code> function is a specific case of <code class="codeph">PERCENTILE_CONT</code> where the percentile value defaults to 0.5. For more information, refer to <a href="MEDIAN.html#GUID-DE15705A-AC18-4416-8487-B9E1D70CE01A">MEDIAN</a>.
                  </p>
                  <div class="infoboxnote" id="GUID-CA259452-A565-41B3-A4F4-DD74B66CEDE0__GUID-479FE0FC-C8A1-48C0-92B0-35D3E5FBEEE7">
                     <p class="notep1">Note:</p>
                     <p>Before processing a large amount of data with the <code class="codeph">PERCENTILE_CONT</code> function, consider using one of the following methods to obtain approximate results more quickly than exact results:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Set the <code class="codeph">APPROX_FOR_PERCENTILE</code> initialization parameter to <code class="codeph">PERCENTILE_CONT</code> or <code class="codeph">ALL</code> before using the <code class="codeph">PERCENTILE_CONT</code> function. Refer to <a href="../refrn/APPROX_FOR_PERCENTILE.html#REFRN-GUID-3872A78C-9B3F-457C-AD28-4E86F71AE74D" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information on this parameter.
                           </p>
                        </li>
                        <li>
                           <p>Use the <code class="codeph">APPROX_PERCENTILE</code> function instead of the <code class="codeph">PERCENTILE_CONT</code> function. Refer to <a href="APPROX_PERCENTILE.html#GUID-70D54091-EE2F-4283-A10B-1AB5A1242FE2">APPROX_PERCENTILE</a>.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CA259452-A565-41B3-A4F4-DD74B66CEDE0__GUID-9A65F61D-4981-4C3B-B9B7-F59B1086C2B5">Aggregate Example</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example computes the median salary in each department: </p><pre class="oac_no_warn" dir="ltr">SELECT department_id,
       PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY salary DESC) "Median cont",
       PERCENTILE_DISC(0.5) WITHIN GROUP (ORDER BY salary DESC) "Median disc"
  FROM employees
  GROUP BY department_id
  ORDER BY department_id;

DEPARTMENT_ID Median cont Median disc
------------- ----------- -----------
           10        4400        4400
           20        9500       13000
           30        2850        2900
           40        6500        6500
           50        3100        3100
           60        4800        4800
           70       10000       10000
           80        8900        9000
           90       17000       17000
          100        8000        8200
          110       10154       12008
                     7000        7000
</pre><p><code class="codeph">PERCENTILE_CONT</code> and <code class="codeph">PERCENTILE_DISC</code> may return different results. <code class="codeph">PERCENTILE_CONT</code> returns a computed result after doing linear interpolation. <code class="codeph">PERCENTILE_DISC</code> simply returns a value from the set of values that are aggregated over. When the percentile value is 0.5, as in this example, <code class="codeph">PERCENTILE_CONT</code> returns the average of the two middle values for groups with even number of elements, whereas <code class="codeph">PERCENTILE_DISC</code> returns the value of the first one among the two middle values. For aggregate groups with an odd number of elements, both functions return the value of the middle element.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CA259452-A565-41B3-A4F4-DD74B66CEDE0__GUID-1B6CDABB-E9D3-4E27-B2EE-5FBA18B37743">Analytic Example</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>In the following example, the median for Department 60 is 4800, which has a corresponding percentile (<code class="codeph">Percent_Rank</code>) of 0.5. None of the salaries in Department 30 have a percentile of 0.5, so the median value must be interpolated between 2900 (percentile 0.4) and 2800 (percentile 0.6), which evaluates to 2850.
                  </p><pre class="oac_no_warn" dir="ltr">SELECT last_name, salary, department_id,
       PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY salary DESC) 
         OVER (PARTITION BY department_id) "Percentile_Cont",
       PERCENT_RANK() 
        OVER (PARTITION BY department_id ORDER BY salary DESC) "Percent_Rank"
  FROM employees
  WHERE department_id IN (30, 60)
  ORDER BY last_name, salary, department_id;

LAST_NAME                     SALARY DEPARTMENT_ID Percentile_Cont Percent_Rank
------------------------- ---------- ------------- --------------- ------------
Austin                          4800            60            4800           .5
Baida                           2900            30            2850           .4
Colmenares                      2500            30            2850            1
Ernst                           6000            60            4800          .25
Himuro                          2600            30            2850           .8
Hunold                          9000            60            4800            0
Khoo                            3100            30            2850           .2
Lorentz                         4200            60            4800            1
Pataballa                       4800            60            4800           .5
Raphaely                       11000            30            2850            0
Tobias                          2800            30            2850           .6</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
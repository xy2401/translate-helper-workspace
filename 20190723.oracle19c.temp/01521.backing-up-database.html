<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Backing Up the Database</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery User's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96241-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="rman-backup-concepts.html" title="Previous" type="text/html">
      <link rel="next" href="backing-up-database-advanced.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
    <meta name="dcterms.isVersionOf" content="BRADV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="rman-backup-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="backing-up-database-advanced.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-backing-up-archiving.html" property="item" typeof="WebPage"><span property="name">Backing Up and Archiving Data</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Backing Up the Database</li>
            </ol>
            <a id="GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7" name="GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7"></a><a id="BRADV8003"></a>
            
            <h2 id="BRADV-GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7" class="sect2"><span class="enumeration_chapter">9 </span>Backing Up the Database
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter explains how to perform the most basic backup tasks and implement backup strategies using RMAN. This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="backing-up-database.html#GUID-E31D9EAF-32FE-4599-BEEF-E3C52F116210" title="RMAN backups are created using the BACKUP command.">Overview of RMAN Backups</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database.html#GUID-FCD2EDB0-817F-4E92-A318-6E4BEC35B467" title="You can provide arguments to the BACKUP command to override the default backup options.">Specifying Backup Output Options</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database.html#GUID-344F4D14-AC81-4093-B921-6403EE75112C" title="You can perform a whole database backup with the database mounted or open. You can back up one or more tablespaces with the BACKUP TABLESPACE command or one or more data files with the BACKUP DATAFILE command. You can back up the control file when the database is mounted or open. RMAN uses a snapshot control file to ensure a read-consistent version. A manual backup of the control file is different from a control file autobackup. RMAN makes a control file autobackup after the files specified in the BACKUP command are backed up. To make a manual backup, you can either specify INCLUDE CURRENT CONTROLFILE when backing up other files or specify BACKUP CURRENT CONTROLFILE. RMAN automatically backs up the current server parameter file in certain cases. The BACKUP SPFILE command backs up the parameter file explicitly. The server parameter file that is backed up is the one currently in use by the instance. You can only back up a database in NOARCHIVELOG mode when the database is closed and in a consistent state.Preplugin backups ensure that an RMAN backup is usable after a non-CDB is plugged in as a PDB into a CDB.">Backing Up Database Files with RMAN</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database.html#GUID-EB261F93-318D-4EBA-8E26-B0589703CC73" title="Use the BACKUP command to back up multitenant container databases (CDBs) and pluggable databases (PDBs).">Backing Up CDBs and PDBs</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database.html#GUID-896D464C-7741-4CE2-A8FD-E897300EB1AC" title="RMAN enables you to use the BACKUP command to perform backup operations on the application root, one or more application PDBs, and the application container.">Backing Up Application Containers</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database.html#GUID-17F2020E-9C9B-4D1C-BC60-A09C3A87CF55" title="Use the BACKUP command to back up sparse databases.">Backing Up Sparse Databases with RMAN</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database.html#GUID-4481CA5F-B1B5-4819-9E6B-7184951EC81A" title="Archived redo logs are the key to successful media recovery. You should back them up regularly.">Backing Up Archived Redo Logs with RMAN</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database.html#GUID-2AF8EE74-CEB2-468D-A3B2-DD6AD8E41304" title="An incremental backup copies only data file blocks that have changed since a specified previous backup. Use the BACKUP command to create incremental backups.">Making and Updating RMAN Incremental Backups</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database.html#GUID-8894680E-8BBA-475D-8815-D789C1A04FD9" title="You can use BACKUP... KEEP to create a backup that is both all-inclusive and exempt from the backup retention policy.You can exempt a backup from the retention policy by using the KEEP option with the BACKUP command. Typically, you make an archival backup to tape. Because your data protection backups are most likely to be on a set of tapes that remain accessible and are recycled, it is advisable to reserve a set of tapes for the archival backup. Use the BACKUP command with the KEEP option to make archival backups.One purpose of an archival backup is to create a test database.">Making Database Backups for Long-Term Storage</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database.html#GUID-731ADA67-235E-481D-AC17-9F9067AD55BF" title="You can use the BACKUP BACKUPSET command to back up backup sets produced by other backup jobs. You can also use BACKUP RECOVERY AREA to back up recovery files created in the current and all previous fast recovery area destinations. The BACKUP BACKUPSET command creates additional copies of backup pieces in a backup set, but does not create a new backup set. For a backup retention policy based on redundancy, a backup set is counted as one instance of a backup. This statement is true even if there are multiple copies of the backup pieces that form the backup set, such as when a backup set has been backed up from disk to tape.Use the BACKUP BACKUPSET command to copy backup sets from disk to tape. Use the BACKUP command to back up image copies to tape.">Backing Up RMAN Backups</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7__GUID-A354DABE-D5A3-4839-AA95-9480C96DC401">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-A4FABEF4-677C-42ED-9DF8-3731ADA12E5F" title="You can use the CONFIGURE command to create persistent settings that govern backup set size.The MAXSETSIZE parameter of the BACKUP command specifies a maximum size for a backup set in units of bytes (default), kilobytes, megabytes, or gigabytes. Backup piece size is an issue in those situations where it exceeds the maximum file size of the file system or media management software. Use the MAXSETSIZE parameter of the CONFIGURE CHANNEL or ALLOCATE CHANNEL command to limit the size of backup pieces.If you specify the SECTION SIZE parameter on the BACKUP command, then RMAN creates a backup set in which each backup piece contains the blocks from one file section. You run the CONFIGURE BACKUP OPTIMIZATION command to enable backup optimization. When certain criteria are met, RMAN skips backups of files that are identical to files that are already backed up.In Oracle Secure Backup, a media family is a named group of volumes with a set of shared, user-defined attributes. In this scenario, you back up logs that are not on tape to one media family, then back up the same logs to a second media family. Finally, you delete old logs.By default, the BACKUP command terminates when it cannot access a data file.RMAN can make up to four copies of a backup set simultaneously, each an exact duplicate of the others.The CONFIGURE...BACKUP COPIES command specifies the number of identical backup sets to create on the specified device type. The COPIES option of the BACKUP command overrides every other COPIES or DUPLEX setting to control duplexing of backup sets.Many sites keep a backup of the database stored on disk in case a media failure occurs on the primary database or an incorrect user action requires point-in-time recovery. A data file backup on disk simplifies the restore step of recovery, making recovery much quicker and more reliable.You can protect RMAN backup sets with backup encryption. Encrypted backups cannot be read if they are obtained by unauthorized users. Backup encryption is performed based on the specified encryption settings.You can set an encryption password in an RMAN session by executing the SET ENCRYPTION BY PASSWORD command. If transparent encryption is configured, then specify the ONLY keyword to indicate that the backups are protected with a password and not with the configured transparent encryption.Use the SET ENCRYPTION BY PASSWORD command at the RMAN prompt to make password-protected backups. If transparent encryption is configured, then omit the ONLY keyword to indicate that the backups are protected with both a password and the configured transparent encryption.With the restartable backup feature, RMAN backs up only those files that were not backed up after a specified date.The minimum unit of restartability is a data file. However, if a backup set contains one backup piece, and if this piece contains blocks from multiple data files, then the unit of restartability is the backup piece. The unit of restartability for image copies is a data file.Use the SINCE TIME parameter of the BACKUP command to specify a date after which a new backup is required.A backup window is a period of time during which a backup must complete. For example, you may want to restrict your database backups to a window of time when user activity on your system is low, such as between 2:00 a.m. and 6:00 a.m.Use the DURATION parameter of the BACKUP command to specify how long a given backup job is allowed to run.When you specify PARTIAL, RMAN does not report an error when a backup is interrupted because of the end of the backup window. Instead, RMAN displays a message showing which files are not backed up.When using DURATION you can run the backup with the maximum possible performance, or run as slowly as possible while still finishing within the allotted time, to minimize the performance impact of backup tasks."> Backing Up the Database: Advanced Topics</a> to learn about more advanced topics such as backup optimization, duplexing, backup encryption, and restartable backups
                        </p>
                     </li>
                     <li>
                        <p><a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> to learn how to perform RMAN backup and recovery in a Data Guard environment
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="BRADV8131"></a><div class="props_rev_3"><a id="GUID-E31D9EAF-32FE-4599-BEEF-E3C52F116210" name="GUID-E31D9EAF-32FE-4599-BEEF-E3C52F116210"></a><h3 id="BRADV-GUID-E31D9EAF-32FE-4599-BEEF-E3C52F116210" class="sect3"><span class="enumeration_section">9.1 </span>Overview of RMAN Backups
               </h3>
               <div>
                  <p>RMAN backups are created using the <code class="codeph">BACKUP</code> command.
                  </p>
                  <p>This section provides an overview of RMAN backups.</p>
               </div><a id="BRADV89506"></a><div class="props_rev_3"><a id="GUID-CCFB214A-1334-44B6-862C-F4E2243EE3D2" name="GUID-CCFB214A-1334-44B6-862C-F4E2243EE3D2"></a><h4 id="BRADV-GUID-CCFB214A-1334-44B6-862C-F4E2243EE3D2" class="sect4"><span class="enumeration_section">9.1.1 </span>Purpose of RMAN Backups
                  </h4>
                  <div>
                     <p>The primary purpose of RMAN backups is to protect your data. If a media failure or disaster occurs, then you can restore your backups and recover lost changes.</p>
                     <p>You can also make backups to preserve data for long-time archival, as explained in <span class="q">"<a href="backing-up-database.html#GUID-8894680E-8BBA-475D-8815-D789C1A04FD9" title="You can use BACKUP... KEEP to create a backup that is both all-inclusive and exempt from the backup retention policy.You can exempt a backup from the retention policy by using the KEEP option with the BACKUP command. Typically, you make an archival backup to tape. Because your data protection backups are most likely to be on a set of tapes that remain accessible and are recycled, it is advisable to reserve a set of tapes for the archival backup. Use the BACKUP command with the KEEP option to make archival backups.One purpose of an archival backup is to create a test database.">Making Database Backups for Long-Term Storage</a>"</span>, and to transfer data, as explained in the chapters included in <a href="part-transfering-data-rman.html#GUID-A341A776-5EEF-41C5-B708-338453D4DFB2">Transferring Data with RMAN</a>.
                     </p>
                  </div>
               </div><a id="BRADV89507"></a><div class="props_rev_3"><a id="GUID-E8B1FE91-6C75-44AB-986C-3E91AA88FB6B" name="GUID-E8B1FE91-6C75-44AB-986C-3E91AA88FB6B"></a><h4 id="BRADV-GUID-E8B1FE91-6C75-44AB-986C-3E91AA88FB6B" class="sect4"><span class="enumeration_section">9.1.2 </span>Basic Concepts of RMAN Backups
                  </h4>
                  <div>
                     <p>You can back up all or part of your database with the <code class="codeph">BACKUP</code> command from within the RMAN client.
                     </p>
                     <p>In many cases, after your database has been configured in accordance with your backup strategy, you can back up the database by entering the following command at the RMAN prompt:</p><pre class="pre codeblock"><code>RMAN&gt; BACKUP DATABASE;</code></pre><p>RMAN uses the configured settings, the records of previous backups, and the control file record of the database structure to determine an efficient set of steps for the backup. RMAN then performs these steps.</p>
                     <p>As explained in <span class="q">"<a href="rman-architecture.html#GUID-E514F9D2-D96E-4087-B8C5-5A8EB6A44E6B" title="RMAN uses a recovery catalog to track file names for all database files in a Data Guard environment.">About RMAN File Management in a Data Guard Environment</a>"</span>, you can run RMAN backups at any database in a Data Guard environment. Any backup of any database in the environment is usable for recovery of any other database if the backup is accessible. You can offload all backups of database files, including control file backups, to a <a href="glossary.html#GUID-009B3F56-8C1E-4CF6-AF0F-A9D2C2E4B9C2"><span class="xrefglossterm">physical standby database</span></a> and thereby avoid consuming resources on the primary database.
                     </p>
                     <div class="infoboxnotealso" id="GUID-E8B1FE91-6C75-44AB-986C-3E91AA88FB6B__GUID-4EA16608-A109-4C06-A0CB-D06F546807B0">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn about the <code class="codeph">BACKUP</code> command
                              </p>
                           </li>
                           <li>
                              <p><a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> to learn how to back up a standby database with RMAN
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV89508"></a><div class="props_rev_3"><a id="GUID-FCD2EDB0-817F-4E92-A318-6E4BEC35B467" name="GUID-FCD2EDB0-817F-4E92-A318-6E4BEC35B467"></a><h3 id="BRADV-GUID-FCD2EDB0-817F-4E92-A318-6E4BEC35B467" class="sect3"><span class="enumeration_section">9.2 </span>Specifying Backup Output Options
               </h3>
               <div>
                  <p>You can provide arguments to the <code class="codeph">BACKUP</code> command to override the default backup options.
                  </p>
                  <p>If you specify only the minimum required options for an RMAN command such as <a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><code class="codeph">BACKUP DATABASE</code></a>, then RMAN automatically determines the destination device, locations for backup output, and a backup tag based on your configured environment and built-in RMAN defaults.
                  </p>
                  <p>The most typical backup options are described in the following sections:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="backing-up-database.html#GUID-5F7FFAD5-2D51-4803-B56A-9C94E7D2FBB2" title="The BACKUP command takes a DEVICE TYPE clause that specifies whether to back up to disk or tape device.">Specifying the Device Type for an RMAN Backup</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-030BA0C5-832E-42A1-A63A-5E2D768BABB9" title="RMAN can create backups on disk as image copies or as backup sets.">Specifying Backup Set or Copy for an RMAN Backup to Disk</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-A733BDFC-8239-4610-8D26-40B6F2D07091" title="RMAN provides a range of options to name the files generated by the BACKUP command.">Specifying a Format for RMAN Backups</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-88BAB25A-FD25-4577-A08A-71B78A91583F" title="RMAN attaches a character string called a tag to every backup it creates, as a way of identifying the backup. You can either accept the default tag or specify your own with the TAG parameter of the BACKUP command.">Specifying Tags for an RMAN Backup</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-E0D30989-9477-45DD-8FE1-367BDD0A7A8E" title="When creating backup sets, you can use RMAN support for binary compression of backup sets by including the AS COMPRESSED BACKUPSET option to the BACKUP command.">Making Compressed Backups</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-22AFE123-0D60-4194-9DE0-C4C0884BAEF9" title="A multisection backup enables large data files to be divided into sections that can be backed up in parallel across multiple channels. This provides faster backup performance and better recovery times.">Specifying Multisection Incremental Backups</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-6F1B35CC-9292-4A78-9E64-9206CB8EDFF8" title="While an image copy is being created, RMAN uses multiple channels to write files sections. However, the output of this operation is one copy for each data file.">Making Multisection Backups Using Image Copies</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-FCD2EDB0-817F-4E92-A318-6E4BEC35B467__GUID-35365433-9562-4D70-9A60-0B88DC9DBE6F">
                     <p class="notep1">See Also:</p>
                     <p><a href="backing-up-database-advanced.html#GUID-A4FABEF4-677C-42ED-9DF8-3731ADA12E5F" title="You can use the CONFIGURE command to create persistent settings that govern backup set size.The MAXSETSIZE parameter of the BACKUP command specifies a maximum size for a backup set in units of bytes (default), kilobytes, megabytes, or gigabytes. Backup piece size is an issue in those situations where it exceeds the maximum file size of the file system or media management software. Use the MAXSETSIZE parameter of the CONFIGURE CHANNEL or ALLOCATE CHANNEL command to limit the size of backup pieces.If you specify the SECTION SIZE parameter on the BACKUP command, then RMAN creates a backup set in which each backup piece contains the blocks from one file section. You run the CONFIGURE BACKUP OPTIMIZATION command to enable backup optimization. When certain criteria are met, RMAN skips backups of files that are identical to files that are already backed up.In Oracle Secure Backup, a media family is a named group of volumes with a set of shared, user-defined attributes. In this scenario, you back up logs that are not on tape to one media family, then back up the same logs to a second media family. Finally, you delete old logs.By default, the BACKUP command terminates when it cannot access a data file.RMAN can make up to four copies of a backup set simultaneously, each an exact duplicate of the others.The CONFIGURE...BACKUP COPIES command specifies the number of identical backup sets to create on the specified device type. The COPIES option of the BACKUP command overrides every other COPIES or DUPLEX setting to control duplexing of backup sets.Many sites keep a backup of the database stored on disk in case a media failure occurs on the primary database or an incorrect user action requires point-in-time recovery. A data file backup on disk simplifies the restore step of recovery, making recovery much quicker and more reliable.You can protect RMAN backup sets with backup encryption. Encrypted backups cannot be read if they are obtained by unauthorized users. Backup encryption is performed based on the specified encryption settings.You can set an encryption password in an RMAN session by executing the SET ENCRYPTION BY PASSWORD command. If transparent encryption is configured, then specify the ONLY keyword to indicate that the backups are protected with a password and not with the configured transparent encryption.Use the SET ENCRYPTION BY PASSWORD command at the RMAN prompt to make password-protected backups. If transparent encryption is configured, then omit the ONLY keyword to indicate that the backups are protected with both a password and the configured transparent encryption.With the restartable backup feature, RMAN backs up only those files that were not backed up after a specified date.The minimum unit of restartability is a data file. However, if a backup set contains one backup piece, and if this piece contains blocks from multiple data files, then the unit of restartability is the backup piece. The unit of restartability for image copies is a data file.Use the SINCE TIME parameter of the BACKUP command to specify a date after which a new backup is required.A backup window is a period of time during which a backup must complete. For example, you may want to restrict your database backups to a window of time when user activity on your system is low, such as between 2:00 a.m. and 6:00 a.m.Use the DURATION parameter of the BACKUP command to specify how long a given backup job is allowed to run.When you specify PARTIAL, RMAN does not report an error when a backup is interrupted because of the end of the backup window. Instead, RMAN displays a message showing which files are not backed up.When using DURATION you can run the backup with the maximum possible performance, or run as slowly as possible while still finishing within the allotted time, to minimize the performance impact of backup tasks.">Backing Up the Database: Advanced Topics</a> to learn about advanced backup options such as duplexing and restarting backups
                     </p>
                  </div>
               </div><a id="BRADV211"></a><a id="BRADV89509"></a><div class="props_rev_3"><a id="GUID-5F7FFAD5-2D51-4803-B56A-9C94E7D2FBB2" name="GUID-5F7FFAD5-2D51-4803-B56A-9C94E7D2FBB2"></a><h4 id="BRADV-GUID-5F7FFAD5-2D51-4803-B56A-9C94E7D2FBB2" class="sect4"><span class="enumeration_section">9.2.1 </span>Specifying the Device Type for an RMAN Backup
                  </h4>
                  <div>
                     <p>The <code class="codeph">BACKUP</code> command takes a <code class="codeph">DEVICE TYPE</code> clause that specifies whether to back up to disk or tape device.
                     </p>
                     <div class="section">
                        <p>When you run <code class="codeph">BACKUP</code> without a <code class="codeph">DEVICE TYPE</code> clause, RMAN stores the backup on the configured default device (disk or <a href="glossary.html#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a>). You set the default device with the <a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><code class="codeph">CONFIGURE DEFAULT DEVICE TYPE</code></a> command.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-5F7FFAD5-2D51-4803-B56A-9C94E7D2FBB2__BGBCIIGJ">
                        <p class="titleinexample">Example 9-1 Specifying Device Type DISK</p>
                        <p>This example illustrates a backup to disk.</p><pre class="pre codeblock"><code>BACKUP 
   DEVICE TYPE DISK
   DATABASE;</code></pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-5F7FFAD5-2D51-4803-B56A-9C94E7D2FBB2__GUID-75365359-67F9-42F6-A26A-8F6BC1432CC2">
                           <p class="notep1">See Also:</p>
                           <p><a href="configuring-rman-client-basic.html#GUID-3845B630-DD47-4147-BA6E-8D677CAF1CC2" title="Backups for which no destination device type is specified are directed to the configured default device. RMAN is preconfigured to use disk as the default device type. No additional configuration is necessary.">Configuring the Default Device for Backups: Disk or SBT</a> for information about configuring the default device
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV212"></a><a id="BRADV213"></a><a id="BRADV89510"></a><div class="props_rev_3"><a id="GUID-030BA0C5-832E-42A1-A63A-5E2D768BABB9" name="GUID-030BA0C5-832E-42A1-A63A-5E2D768BABB9"></a><h4 id="BRADV-GUID-030BA0C5-832E-42A1-A63A-5E2D768BABB9" class="sect4"><span class="enumeration_section">9.2.2 </span>Specifying Backup Set or Copy for an RMAN Backup to Disk
                  </h4>
                  <div>
                     <p>RMAN can create backups on disk as image copies or as backup sets.</p>
                     <div class="section">
                        <p><span class="q">"<a href="configuring-rman-client-basic.html#GUID-BC37B3E4-3338-4452-A363-DB882F2E9415" title="The BACKUP command can create either backup sets or image copies. For disk, you can configure RMAN to create either backup sets or image copies as its default backup type with the CONFIGURE DEVICE TYPE DISK BACKUP TYPE TO command.">Configuring the Default Type for Backups: Backup Sets or Copies</a>"</span> explains how to configure the default disk device. You can override this default with the <code class="codeph">AS</code> <code class="codeph">COPY</code> or <code class="codeph">AS</code> <code class="codeph">BACKUPSET</code> clauses.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-030BA0C5-832E-42A1-A63A-5E2D768BABB9__BGBHDIAG">
                        <p class="titleinexample">Example 9-2 Making Image Copies</p>
                        <p>This example uses <code class="codeph">BACKUP AS COPY</code> to back up to disk as image copies.
                        </p><pre class="pre codeblock"><code>BACKUP AS COPY
  DEVICE TYPE DISK 
  DATABASE;
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-030BA0C5-832E-42A1-A63A-5E2D768BABB9__BGBBHEDE">
                        <p class="titleinexample">Example 9-3 Making Backup Sets</p>
                        <p>To back up your data into backup sets, use the <code class="codeph">AS BACKUPSET</code> clause. This example illustrates how you can allow backup sets to be created on the configured default device, or direct them specifically to disk or tape.
                        </p><pre class="pre codeblock"><code>BACKUP AS BACKUPSET 
  DATABASE;

BACKUP AS BACKUPSET 
  DEVICE TYPE DISK 
  DATABASE;

BACKUP AS BACKUPSET 
  DEVICE TYPE SBT 
  DATABASE;</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="BRADV89511"></a><div class="props_rev_3"><a id="GUID-A733BDFC-8239-4610-8D26-40B6F2D07091" name="GUID-A733BDFC-8239-4610-8D26-40B6F2D07091"></a><h4 id="BRADV-GUID-A733BDFC-8239-4610-8D26-40B6F2D07091" class="sect4"><span class="enumeration_section">9.2.3 </span>Specifying a Format for RMAN Backups
                  </h4>
                  <div>
                     <p>RMAN provides a range of options to name the files generated by the <code class="codeph">BACKUP</code> command. 
                     </p>
                     <div class="section">
                        <p>RMAN uses the following set of rules to determine the format of the output files, which are listed in order of precedence:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>If a <a href="../rcmrf/formatSpec.html#RCMRF195" target="_blank"><code class="codeph">FORMAT</code></a> parameter is specified on the <code class="codeph">BACKUP</code> command, then this setting controls the generated file name. </span><div>
                              <p>For example, you can direct the output to a specific location, as shown in the following command:</p><pre class="pre codeblock"><code>BACKUP DATABASE 
  FORMAT "/disk1/backup_%U";  # specifies a location on the file system
</code></pre><p>In this case, backups are stored with generated unique file names with the prefix <code class="codeph">/disk1/backup_</code>. The <code class="codeph">%U</code> substitution variable, used to generate a unique string at this point in the file name, is required.
                              </p>
                              <p>You can also use the <code class="codeph">FORMAT</code> parameter to name an ASM disk group as the backup destination, as shown in the following example:
                              </p><pre class="pre codeblock"><code>BACKUP DATABASE 
  FORMAT '+dgroup1';  # specifies an ASM disk group
</code></pre><p>No <code class="codeph">%U</code> is required in this case because <a href="glossary.html#GUID-94080845-3FF3-4FB4-91EB-AEA1749411DC"><span class="xrefglossterm">Automatic Storage Management (ASM)</span></a> generates unique file names as needed. However, you can specify <code class="codeph">%U</code> if desired.
                              </p>
                              <div class="infoboxnote" id="GUID-A733BDFC-8239-4610-8D26-40B6F2D07091__GUID-9F997D14-5D45-4034-A2FE-EE9660D43EAE">
                                 <p class="notep1">Note:</p>
                                 <p>If you specify <code class="codeph">FORMAT</code> when a fast recovery area is enabled, then RMAN obeys the <code class="codeph">FORMAT</code> setting. If no location is specified in the <code class="codeph">FORMAT</code> clause, then RMAN creates the backup in a platform-specific location.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If a <code class="codeph">FORMAT</code> setting is configured for the specific channel used for the backup, then this setting controls the generated file name.</span></li>
                        <li class="stepexpand"><span>If a <code class="codeph">FORMAT</code> setting is configured for the device type used for the backup, then this setting controls the generated file name.</span></li>
                        <li class="stepexpand"><span>If a <a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">fast recovery area</span></a> is enabled during a disk backup, and if <code class="codeph">FORMAT</code> is not specified, then RMAN creates the backup with an automatically generated name in the fast recovery area.</span></li>
                        <li class="stepexpand"><span>If no other conditions in this list apply, then the default location and file name format of the backup are platform-specific.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-A733BDFC-8239-4610-8D26-40B6F2D07091__GUID-29F7F2E5-3406-4BCD-9F8D-DD4667BF374D">
                           <p class="notep1">See Also:</p>
                           <p><a href="../rcmrf/formatSpec.html#RCMRF195" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn about the <code class="codeph">FORMAT</code> clause, and the installation guides in the Oracle Database documentation library to learn about the default file locations for your platform
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="BRADV89512"></a><div class="props_rev_3"><a id="GUID-D9A1870F-E5E4-48DD-B479-C55C09B59388" name="GUID-D9A1870F-E5E4-48DD-B479-C55C09B59388"></a><h5 id="BRADV-GUID-D9A1870F-E5E4-48DD-B479-C55C09B59388" class="sect5"><span class="enumeration_section">9.2.3.1 </span>Specifying Multiple Formats for Disk Backups
                     </h5>
                     <div>
                        <p>When backing up to disk, you can specify a format to spread the backup across several drives for improved performance. </p>
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To back up a database to multiple disk drives, allocate one <code class="codeph">DISK</code> channel for each disk drive and specify the format string on the <code class="codeph">ALLOCATE CHANNEL</code> command so that the file names are on different disks.
                                 </p><pre class="pre codeblock"><code>RUN
{ 
  ALLOCATE CHANNEL disk1 DEVICE TYPE DISK FORMAT '/disk1/%d_backups/%U';
  ALLOCATE CHANNEL disk2 DEVICE TYPE DISK FORMAT '/disk2/%d_backups/%U';
  ALLOCATE CHANNEL disk3 DEVICE TYPE DISK FORMAT '/disk3/%d_backups/%U';
  BACKUP AS COPY DATABASE; 
} </code></pre></li>
                              <li>
                                 <p>To create a default configuration that distributes backups to multiple disk drives by default, configure multiple disk channels.</p><pre class="pre codeblock"><code>CONFIGURE DEVICE TYPE DISK PARALLELISM 3;
CONFIGURE DEFAULT DEVICE TYPE TO DISK;
CONFIGURE CHANNEL 1 DEVICE TYPE DISK FORMAT '/disk1/%d_backups/%U';
CONFIGURE CHANNEL 2 DEVICE TYPE DISK FORMAT '/disk2/%d_backups/%U';
CONFIGURE CHANNEL 3 DEVICE TYPE DISK FORMAT '/disk3/%d_backups/%U';
BACKUP AS COPY DATABASE;</code></pre></li>
                           </ul>
                           <p>Typically, you do not need to specify a format when backing up to tape because the default <code class="codeph">%U</code> variable generates a unique file name for tape backups. 
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="BRADV89513"></a><div class="props_rev_3"><a id="GUID-88BAB25A-FD25-4577-A08A-71B78A91583F" name="GUID-88BAB25A-FD25-4577-A08A-71B78A91583F"></a><h4 id="BRADV-GUID-88BAB25A-FD25-4577-A08A-71B78A91583F" class="sect4"><span class="enumeration_section">9.2.4 </span>Specifying Tags for an RMAN Backup
                  </h4>
                  <div>
                     <p>RMAN attaches a character string called a tag to every backup it creates, as a way of identifying the backup. You can either accept the default tag or specify your own with the <code class="codeph">TAG</code> parameter of the <code class="codeph">BACKUP</code> command.
                     </p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="backing-up-database.html#GUID-DB2C0F4B-C1CF-4023-A2B0-DF09D0788B15" title="User-specified tags are a useful way to indicate the purpose or usage of different classes of backups or copies.">About Backup Tags</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-938A6B6B-F16E-4D43-B902-A4D09429ED36" title="Use the TAG parameter with the BACKUP command to specify tags for backup sets and image copies.">Specifying Tags for Backup Sets and Image Copies</a></p>
                        </li>
                     </ul>
                  </div><a id="BRADV89514"></a><div class="props_rev_3"><a id="GUID-DB2C0F4B-C1CF-4023-A2B0-DF09D0788B15" name="GUID-DB2C0F4B-C1CF-4023-A2B0-DF09D0788B15"></a><h5 id="BRADV-GUID-DB2C0F4B-C1CF-4023-A2B0-DF09D0788B15" class="sect5"><span class="enumeration_section">9.2.4.1 </span>About Backup Tags
                     </h5>
                     <div>
                        <p>User-specified tags are a useful way to indicate the purpose or usage of different classes of backups or copies. </p>
                        <p>You can tag backup sets, proxy copies, data file copies, or control file copies. For example, you can tag data file copies that you intend to use in a <a href="../rcmrf/SWITCH.html#RCMRF159" target="_blank"><code class="codeph">SWITCH</code></a> command as <code class="codeph">for_switch_only</code> and file copies to use only for a <a href="../rcmrf/RESTORE.html#RCMRF149" target="_blank"><code class="codeph">RESTORE</code></a> command as <code class="codeph">for_restore_only</code>.
                        </p>
                        <p>Tags do not need to be unique, so multiple backup sets or image copies can have the same tag (for example, <code class="codeph">weekly_backup</code>). Assume that you specify that a data file be restored from backups that have a specific tag. If multiple backups of the requested file have the desired tag, then RMAN restores the most recent backup that has the desired tag, within any constraints on the <code class="codeph">RESTORE</code> command.
                        </p>
                        <p>In practice, tags are often used to distinguish a series of backups created as part of a single strategy, such as an incremental backup strategy. For example, you might create a weekly incremental backup with a tag like <code class="codeph">BACKUP TAG weekly_incremental</code>. Many forms of the <code class="codeph">BACKUP</code> command let you associate a tag with a backup, and many <code class="codeph">RESTORE</code> and <a href="../rcmrf/RECOVER.html#RCMRF140" target="_blank"><code class="codeph">RECOVER</code></a> commands let you specify a tag to restrict which backups to use in the <code class="codeph">RESTORE</code> or <code class="codeph">RECOVER</code> operation.
                        </p>
                        <p>If you do not explicitly specify a tag with the <code class="codeph">TAG</code> parameter of the <code class="codeph">BACKUP</code> command, then RMAN implicitly creates a default tag for backups (except for control file autobackups). The format of the tag is <code class="codeph">TAG</code><span class="italic"><code class="codeph">YYYYMMDD</code></span><code class="codeph">T</code><span class="italic"><code class="codeph">HHMMSS</code></span>, where <span class="italic"><code class="codeph">YYYY</code></span> is the year, <span class="italic"><code class="codeph">MM</code></span> is the month, <span class="italic"><code class="codeph">DD</code></span> is the day, <span class="italic"><code class="codeph">HH</code></span> is the hour (in 24-hour format), <span class="italic"><code class="codeph">MM</code></span> is the minutes, and <span class="italic"><code class="codeph">SS</code></span> is the seconds. For example, a backup of data file <code class="codeph">1</code> may get the tag <code class="codeph">TAG20070208T133437</code>. The date and time refer to when RMAN started the backup in the time zone of the instance performing the backup. If multiple backup sets are created by one <code class="codeph">BACKUP</code> command, then each backup piece has the same default tag.
                        </p>
                        <p>Tags are stored in uppercase, regardless of the case used when entering them. The maximum length of a backup tag is 30 bytes. Tags cannot use operating system environment variables or use special formats such as <code class="codeph">%T</code> or <code class="codeph">%D</code>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-DB2C0F4B-C1CF-4023-A2B0-DF09D0788B15__GUID-281FEFA1-06F9-4CE8-B1B1-759674355ED3">
                           <p class="notep1">See Also:</p>
                           <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a>for the default format description in <code class="codeph">BACKUP...TAG</code> 
                           </p>
                        </div>
                     </div>
                  </div><a id="BRADV214"></a><a id="BRADV609"></a><a id="BRADV610"></a><a id="BRADV89515"></a><div class="props_rev_3"><a id="GUID-938A6B6B-F16E-4D43-B902-A4D09429ED36" name="GUID-938A6B6B-F16E-4D43-B902-A4D09429ED36"></a><h5 id="BRADV-GUID-938A6B6B-F16E-4D43-B902-A4D09429ED36" class="sect5"><span class="enumeration_section">9.2.4.2 </span>Specifying Tags for Backup Sets and Image Copies
                     </h5>
                     <div>
                        <p>Use the <code class="codeph">TAG</code> parameter with the <code class="codeph">BACKUP</code> command to specify tags for backup sets and image copies.
                        </p>
                        <div class="p">The characters in a tag must be limited to the characters that are legal in file names on the target database file system. For example, <a href="glossary.html#GUID-94080845-3FF3-4FB4-91EB-AEA1749411DC"><span class="xrefglossterm">Automatic Storage Management (ASM)</span></a> does not support the use of the hyphen (<code class="codeph">-</code>) in the file names it uses internally, so a tag including a hyphen (such as <code class="codeph">weekly-incr</code>) is not a legal tag name for backups in ASM disk groups.
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>When you tag a backup set, the tag is an attribute of each backup piece in a given copy of a backup set. If you create a <a href="glossary.html#GUID-EA6CE3E8-6986-4512-AF66-710D80376093"><span class="xrefglossterm">multiplexed backup set</span></a>, then each copy of the backup set is assigned the same tag.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-938A6B6B-F16E-4D43-B902-A4D09429ED36__CHDEEGGD">
                           <p class="titleinexample">Example 9-4 Applying a Tag to a Backup Set</p>
                           <p>This example creates one backup set with the tag <code class="codeph">MONDAYBKP</code>.
                           </p><pre class="pre codeblock"><code>BACKUP AS BACKUPSET
  COPIES 1 
  DATAFILE 7
  TAG mondaybkp; 
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-938A6B6B-F16E-4D43-B902-A4D09429ED36__CHDHAABB">
                           <p class="titleinexample">Example 9-5 Applying Tags to Image Copies</p>
                           <p>This example shows that copies of data files in tablespaces <code class="codeph">users</code> and <code class="codeph">tools</code> are assigned the tag <code class="codeph">MONDAYCPY</code>. When you specify a tag for image copies, the tag applies to each individual copy.
                           </p><pre class="pre codeblock"><code>BACKUP AS COPY 
  TABLESPACE users, tools
  TAG mondaycpy;
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-938A6B6B-F16E-4D43-B902-A4D09429ED36__CHDFIDHD">
                           <p class="titleinexample">Example 9-6 Assigning Tags to Output Copies</p>
                           <p>This example creates new copies of all image copies of the database that have the tag <code class="codeph">full_cold_copy</code> and gives the new copies the tag <code class="codeph">new_full_cold_copy</code>. You can use <code class="codeph">FROM TAG</code> to copy an image copy with a specific tag, and then use <code class="codeph">TAG</code> to assign the output copy a different tag.
                           </p><pre class="pre codeblock"><code>BACKUP AS COPY
  COPY OF DATABASE
    FROM TAG full_cold_copy
  TAG new_full_cold_copy;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="BRADV218"></a><a id="BRADV8138"></a><div class="props_rev_3"><a id="GUID-E0D30989-9477-45DD-8FE1-367BDD0A7A8E" name="GUID-E0D30989-9477-45DD-8FE1-367BDD0A7A8E"></a><h4 id="BRADV-GUID-E0D30989-9477-45DD-8FE1-367BDD0A7A8E" class="sect4"><span class="enumeration_section">9.2.5 </span>Making Compressed Backups
                  </h4>
                  <div>
                     <p>When creating backup sets, you can use RMAN support for binary compression of backup sets by including the <code class="codeph">AS COMPRESSED BACKUPSET</code> option to the <code class="codeph">BACKUP</code> command.
                     </p>
                     <div class="section">
                        <p>RMAN compresses the backup set contents before writing them to disk. The details of which binary compression level is used are automatically recorded in the backup set. There is no need to explicitly mention the type of compression used or how to decompress the backup set in the recovery operation.</p>
                        <p>Binary compression creates some performance overhead during backup and restore operations. Binary compression consumes CPU resources, so do not routinely schedule compressed backups when CPU usage is high. However, the following circumstances may warrant paying the performance penalty:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You are using disk-based backups when disk space in your fast recovery area or other disk-based backup destination is limited.</p>
                           </li>
                           <li>
                              <p>You are performing your backups to some device over a network when reduced network bandwidth is more important than CPU usage.</p>
                           </li>
                           <li>
                              <p>You are using some archival backup media such as CD or DVD, where reducing backup sizes saves on media costs and archival storage.</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-E0D30989-9477-45DD-8FE1-367BDD0A7A8E__GUID-AD1CE662-A3FB-48E9-BF25-511746AAB792">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="rman-backup-concepts.html#GUID-2AFCD551-95CB-4F9F-946E-550E89613974" title="RMAN supports binary compression of backup sets. Binary compression is only enabled when you specify AS COMPRESSED BACKUPSET in the BACKUP command, or one-time with the CONFIGURE DEVICE TYPE [DISK | SBT] BACKUP TYPE TO COMPRESSED BACKUPSET command.">About Binary Compression for RMAN Backup Sets</a></p>
                              </li>
                              <li>
                                 <p><code class="codeph">AS COMPRESSED BACKUPSET</code> option of the <code class="codeph">BACKUP</code> command in <a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for performance details regarding backup sets
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E0D30989-9477-45DD-8FE1-367BDD0A7A8E__CHDHCDFJ">
                        <p class="titleinexample">Example 9-7 Making Compressed Backups</p>
                        <p>This example backs up the entire database and archived logs to the configured default backup destination (disk or tape), producing compressed backup sets.</p><pre class="pre codeblock"><code>BACKUP 
  AS COMPRESSED BACKUPSET 
  DATABASE PLUS ARCHIVELOG;
</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="BRADV711"></a><a id="BRADV728"></a><a id="BRADV659"></a><a id="BRADV380"></a><div class="props_rev_3"><a id="GUID-22AFE123-0D60-4194-9DE0-C4C0884BAEF9" name="GUID-22AFE123-0D60-4194-9DE0-C4C0884BAEF9"></a><h4 id="BRADV-GUID-22AFE123-0D60-4194-9DE0-C4C0884BAEF9" class="sect4"><span class="enumeration_section">9.2.6 </span>Specifying Multisection Incremental Backups
                  </h4>
                  <div>
                     <p>A multisection backup enables large data files to be divided into sections that can be backed up in parallel across multiple channels. This provides faster backup performance and better recovery times.</p>
                     <div class="section">
                        <p>A multisection backup contains multiple backup pieces. During a multisection backup operation, RMAN writes to each backup piece, in parallel, by using a separate channel for each backup piece.</p>
                        <p>Multisection full backups of databases and data files are supported starting with Oracle Database 11<span class="italic">g</span> Release 1. Starting with Oracle Database 12<span class="italic">c</span> Release 1 (12.1), RMAN supports multisection incremental backups. Wherever applicable, RMAN also uses <a href="glossary.html#GUID-0AA7EB43-FEA6-405F-9443-A4A2B43FFF96"><span class="xrefglossterm">unused block compression</span></a> and <a href="glossary.html#GUID-C80ACD57-9170-4FA5-A61F-81A05E77A1A4"><span class="xrefglossterm">block change tracking</span></a> while creating multisection incremental backups. When backup sets are used, you can create multisection full or incremental backups.
                        </p>
                        <p>To create level 0 multisection incremental backups, the <code class="codeph">COMPATIBLE</code> parameter must be set to 11.0 or higher. However, to create multisection incremental backups of level 1 or higher, you must set the <code class="codeph">COMPATIBLE</code> parameter to 12.0.0 or higher. RMAN always creates multisection incremental backups with <code class="codeph">FILESPERSET</code> set to 1.
                        </p>
                        <p>Use the <code class="codeph">SECTION SIZE</code> clause of the <code class="codeph">BACKUP</code> command to create multisection backups. The <code class="codeph">SECTION SIZE</code> clause specifies the size of each backup section. If you specify a section size that is larger than the size of the file, then RMAN does not use multisection backups for that file. If you specify a small section size that would produce more than 256 sections, then RMAN increases the section size to a value that results in exactly 256 sections.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-22AFE123-0D60-4194-9DE0-C4C0884BAEF9__GUID-BDE5693E-D052-4F9B-B27D-8D3A6B174C78">Views to Identify Multisection Backups</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Use the <code class="codeph">MULTI_SECTION</code> column of the <code class="codeph">V$BACKUP_SET</code> view or the recovery catalog view <code class="codeph">RC_BACKUP_SET</code> to determine if a backup is a multisection backup. For multisection backups, the <code class="codeph">MULTI_SECTION</code> column contains YES.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-22AFE123-0D60-4194-9DE0-C4C0884BAEF9__GUID-D2F6C1E2-3CB5-4DD5-827F-33A7E659F687">Views That Contain Metadata for Multisection Backups</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The <code class="codeph">V$BACKUP_DATAFILE</code> and <code class="codeph">RC_BACKUP_DATAFILE</code> views provide information about the number of blocks in each section of a multisection backup. The <code class="codeph">BLOCKS</code> column specifies the number of blocks in each multisection backup.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-22AFE123-0D60-4194-9DE0-C4C0884BAEF9__GUID-2F5DB958-0409-48E3-879B-BFAB1222CCB4">
                        <p class="titleinexample">Example 9-8 Multisection Incremental Backup of Database as Backup Sets</p>
                        <p>The following example creates a multisection level 1 incremental backup of the data file as backup sets.</p>
                        <ol>
                           <li>
                              <p>Ensure that the initialization parameter <code class="codeph">COMPATIBLE</code> of the target database is set to 12.0.0 or higher.
                              </p>
                           </li>
                           <li>
                              <p>Start RMAN and connect to a target database as a user with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege.
                              </p> 
                              <div class="infoboxnotealso" id="GUID-22AFE123-0D60-4194-9DE0-C4C0884BAEF9__GUID-20AF60A9-6FDD-4473-9154-50880EE0763B">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a> for information about connecting to a target database
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>If required, configure RMAN to write in parallel to the backup device.</p>
                              <p>The following example configures RMAN to use two disk channels in parallel.</p><pre class="pre codeblock"><code>CONFIGURE DEVICE TYPE disk PARALLELISM 2;</code></pre></li>
                           <li>
                              <p>Execute <code class="codeph">BACKUP</code> with <code class="codeph">SECTION SIZE</code> to indicate that a multisection backup must be created.
                              </p>
                              <p>The following example creates a multisection section level 1 backup of the data file <code class="codeph">users_df.dbf</code> using backup sets. Each backup piece is 100MB.
                              </p><pre class="pre codeblock"><code>BACKUP 
   INCREMENTAL LEVEL 1
   SECTION SIZE 100M
   DATAFILE '/oradata/datafiles/users_df.dbf';</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-22AFE123-0D60-4194-9DE0-C4C0884BAEF9__GUID-184CBFAC-CCED-48B1-85D4-06977F56DF9F">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="rman-backup-concepts.html#GUID-50F8DBCD-C285-491F-B8E7-E1B2140E1B51" title="When employing unused block compression, RMAN skips reading, and backing up, any database blocks that are not currently allocated to some database object. This is regardless of whether those blocks had previously been allocated.">About Unused Block Compression</a></p>
                              </li>
                              <li>
                                 <p><a href="backing-up-database.html#GUID-4E1F605A-76A7-48D0-9D9B-7343B4327E2A" title="The block change tracking feature for incremental backups improves backup performance by recording changed blocks for each data file.">Using Block Change Tracking to Improve Incremental Backup Performance</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV660"></a><a id="BRADV665"></a><div class="props_rev_3"><a id="GUID-6F1B35CC-9292-4A78-9E64-9206CB8EDFF8" name="GUID-6F1B35CC-9292-4A78-9E64-9206CB8EDFF8"></a><h4 id="BRADV-GUID-6F1B35CC-9292-4A78-9E64-9206CB8EDFF8" class="sect4"><span class="enumeration_section">9.2.7 </span>Making Multisection Backups Using Image Copies
                  </h4>
                  <div>
                     <p>While an image copy is being created, RMAN uses multiple channels to write files sections. However, the output of this operation is one copy for each data file.</p>
                     <div class="section">
                        <p>Multisection backups provide better performance by using multiple channels to back up large files in parallel. Starting with Oracle Database 12<span class="italic">c</span> Release 1 (12.1), you can create multisection full backups that are stored as image copies. 
                        </p>
                        <p>Use the <code class="codeph">SECTION SIZE</code> clause to create multisection backups. If the section size that you specify is larger than the size of the file, then RMAN does not use multisection backups for that file. If you specify a small section size that would produce more than 256 sections, then RMAN increases the section size to a value that results in exactly 256 sections
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6F1B35CC-9292-4A78-9E64-9206CB8EDFF8__GUID-ED50DFB3-AA81-4E4E-BE42-F3B6CC92B765">
                        <p class="titleinexample">Example 9-9 Multisection Backup of Data File as Image Copies</p>
                        <p>Use the following steps to create a multisection backup of a database as image copies:</p>
                        <ol>
                           <li>
                              <p>Ensure that the <code class="codeph">COMPATIBLE</code> parameter for the target database is set to 12.0.0 or higher.
                              </p>
                           </li>
                           <li>
                              <p>Start RMAN and connect to a target database as a user with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>If required, configure <a href="glossary.html#GUID-57D1A253-9620-4588-82E3-EC2BEC2B1B0C"><span class="xrefglossterm">channel parallelism</span></a> so that RMAN can perform the backup operation using multiple drives in parallel.
                              </p>
                           </li>
                           <li>
                              <p>Execute <code class="codeph">BACKUP</code> with <code class="codeph">SECTION SIZE</code> and <code class="codeph">AS COPY</code> to indicate that a multisection backup must be created using image copies.
                              </p>
                              <p>The following command creates a multisection incremental backup of the entire database using image copies. Each backup piece is 500MB.</p><pre class="pre codeblock"><code>BACKUP 
   AS COPY
   SECTION SIZE 500M
   DATABASE;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-6F1B35CC-9292-4A78-9E64-9206CB8EDFF8__GUID-816FAD2E-CCED-4B34-B21C-4E505A474E8A">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a> for information about connecting to a target database
                                 </p>
                              </li>
                              <li>
                                 <p><a href="backing-up-database.html#GUID-22AFE123-0D60-4194-9DE0-C4C0884BAEF9" title="A multisection backup enables large data files to be divided into sections that can be backed up in parallel across multiple channels. This provides faster backup performance and better recovery times.">Specifying Multisection Incremental Backups</a> for information about the views that contain information about multisection backups.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV8132"></a><div class="props_rev_3"><a id="GUID-344F4D14-AC81-4093-B921-6403EE75112C" name="GUID-344F4D14-AC81-4093-B921-6403EE75112C"></a><h3 id="BRADV-GUID-344F4D14-AC81-4093-B921-6403EE75112C" class="sect3"><span class="enumeration_section">9.3 </span>Backing Up Database Files with RMAN
               </h3>
               <div>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="backing-up-database.html#GUID-D7EC8119-A260-4300-8756-F53DBC2C2D45" title="You can perform a whole database backup with the database mounted or open.">Backing Up a Whole Database with RMAN</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-71976B2C-B142-46D8-AB45-2D6F783CCEF1" title="You can back up one or more tablespaces with the BACKUP TABLESPACE command or one or more data files with the BACKUP DATAFILE command.">Backing Up Tablespaces and Data Files with RMAN</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-D25F0A92-12AE-490E-AB8F-C9E54E081CDD" title="You can back up the control file when the database is mounted or open. RMAN uses a snapshot control file to ensure a read-consistent version.">Backing Up Control Files with RMAN</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-D3E617F5-121C-41DC-A191-B3BA6D121B30" title="RMAN automatically backs up the current server parameter file in certain cases. The BACKUP SPFILE command backs up the parameter file explicitly. The server parameter file that is backed up is the one currently in use by the instance.">Backing Up Server Parameter Files with RMAN</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-31FBFBD3-B8C8-4085-AAFC-8BA696A8F31E" title="You can only back up a database in NOARCHIVELOG mode when the database is closed and in a consistent state.">Backing Up a Database in NOARCHIVELOG Mode</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV220"></a><a id="BRADV8231"></a><div class="props_rev_3"><a id="GUID-D7EC8119-A260-4300-8756-F53DBC2C2D45" name="GUID-D7EC8119-A260-4300-8756-F53DBC2C2D45"></a><h4 id="BRADV-GUID-D7EC8119-A260-4300-8756-F53DBC2C2D45" class="sect4"><span class="enumeration_section">9.3.1 </span>Backing Up a Whole Database with RMAN
                  </h4>
                  <div>
                     <p>You can perform a whole database backup with the database mounted or open. </p>
                     <div class="section">
                        <p>To perform a whole database backup, from the RMAN prompt, use the <a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><code class="codeph">BACKUP DATABASE</code></a> command. 
                        </p>
                        <p>You may want to exclude specified tablespaces from a whole database backup. You can persistently skip tablespaces across RMAN sessions by executing the <a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><code class="codeph">CONFIGURE EXCLUDE</code></a> command for each tablespace that you always want to skip. You can override the configured setting with <code class="codeph">BACKUP ... NOEXCLUDE</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D7EC8119-A260-4300-8756-F53DBC2C2D45__GUID-E55F5DB6-6CC2-4A07-BD96-1B01EAB727D6">To back up the database:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and a recovery catalog (if used) as described in <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a>"</span>.</span></li>
                        <li class="stepexpand"><span>Ensure that the database is mounted or open.</span></li>
                        <li class="stepexpand"><span>Issue the <code class="codeph">BACKUP DATABASE</code> command at the RMAN prompt.</span><div>
                              <p>The simplest form of the command requires no options or parameters:</p><pre class="pre codeblock"><code>BACKUP DATABASE;</code></pre><p>The list of files (data files, control file, server parameter file) backed up depends on the keyword used with the <code class="codeph">BACKUP</code> command.
                              </p>
                              <p>The following example backs up the database, switches the online redo logs, and includes archived logs in the backup:</p><pre class="pre codeblock"><code>BACKUP DATABASE PLUS ARCHIVELOG;
</code></pre><p>By archiving the logs immediately after the backup, you ensure that you have a full set of archived logs through the time of the backup. In this way, you guarantee that you can perform media recovery after restoring this backup.</p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-D7EC8119-A260-4300-8756-F53DBC2C2D45__GUID-8B865B1E-D66E-4C3E-A213-CDED2E040DEC">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../rcmrf/index.html" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> to learn about the <code class="codeph">BACKUP</code> command and <code class="codeph">CONNECT</code> command
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="backing-up-database-advanced.html#GUID-CBF7B516-AEBB-433F-A57C-EECAEF153C12" title="By default, the BACKUP command terminates when it cannot access a data file.">Skipping Offline, Read-Only, and Inaccessible Files</a>"</span> to learn how to use <code class="codeph">BACKUP ... SKIP</code> to skip inaccessible data files or data files that are in offline or read-only tablespaces
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV222"></a><a id="BRADV89516"></a><div class="props_rev_3"><a id="GUID-71976B2C-B142-46D8-AB45-2D6F783CCEF1" name="GUID-71976B2C-B142-46D8-AB45-2D6F783CCEF1"></a><h4 id="BRADV-GUID-71976B2C-B142-46D8-AB45-2D6F783CCEF1" class="sect4"><span class="enumeration_section">9.3.2 </span>Backing Up Tablespaces and Data Files with RMAN
                  </h4>
                  <div>
                     <p>You can back up one or more tablespaces with the <code class="codeph">BACKUP TABLESPACE</code> command or one or more data files with the <code class="codeph">BACKUP DATAFILE</code> command. 
                     </p>
                     <div class="section">
                        <p>When you specify tablespaces, RMAN translates the tablespace name internally into a list of data files. The database can be mounted or open. Tablespaces can be read/write or read-only.</p>
                        <div class="infoboxnote" id="GUID-71976B2C-B142-46D8-AB45-2D6F783CCEF1__GUID-17CBBDAE-D18F-49BC-9EEF-1FB7D6499241">
                           <p class="notep1">Note:</p>
                           <p>Transportable tablespaces do not have to be in read/write mode for backup as in previous releases.</p>
                        </div>
                        <p>RMAN automatically backs up the control file and the server parameter file (if the instance was started with a server parameter file) when data file <code class="codeph">1</code> is included in the backup. If <a href="glossary.html#GUID-7CDA6567-DFB0-450D-8771-B033E9872AF7"><span class="xrefglossterm">control file autobackup</span></a> is enabled, then RMAN writes the current control file and server parameter file to a separate autobackup piece. Otherwise, RMAN includes these files in the backup set that contains data file <code class="codeph">1</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-71976B2C-B142-46D8-AB45-2D6F783CCEF1__GUID-06FDFCBA-2731-4FEC-B270-B8B4DADF95D4">To back up tablespaces or data files:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and a recovery catalog (if used).</span><div>
                              <div class="infoboxnotealso" id="GUID-71976B2C-B142-46D8-AB45-2D6F783CCEF1__GUID-65E9AB0A-8BCF-4466-B7F2-862799C57A43">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a> for information about connecting to a target database
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If the database instance is not started, then either mount or open the database.</span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">BACKUP</code> <code class="codeph">TABLESPACE</code> command or <code class="codeph">BACKUP DATAFILE</code> command at the RMAN prompt.</span></li>
                     </ol>
                     <div class="section">
                        <p>The following example backs up the <code class="codeph">users</code> and <code class="codeph">tools</code> tablespaces to tape:
                        </p><pre class="pre codeblock"><code>BACKUP
  DEVICE TYPE sbt
  TABLESPACE users, tools;
</code></pre><p>The following example uses an SBT channel to back up data files <code class="codeph">1</code> through <code class="codeph">4</code> and a data file copy stored at <code class="codeph">/tmp/system01.dbf</code> to tape:
                        </p><pre class="pre codeblock"><code>BACKUP 
  DEVICE TYPE sbt 
  DATAFILE 1,2,3,4 
  DATAFILECOPY '/tmp/system01.dbf';</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV89517"></a><div class="props_rev_3"><a id="GUID-D25F0A92-12AE-490E-AB8F-C9E54E081CDD" name="GUID-D25F0A92-12AE-490E-AB8F-C9E54E081CDD"></a><h4 id="BRADV-GUID-D25F0A92-12AE-490E-AB8F-C9E54E081CDD" class="sect4"><span class="enumeration_section">9.3.3 </span>Backing Up Control Files with RMAN
                  </h4>
                  <div>
                     <p>You can back up the control file when the database is mounted or open. RMAN uses a snapshot control file to ensure a read-consistent version. </p>
                     <p>If the <a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP</code></a> command is set to <code class="codeph">ON</code> (by default it is <code class="codeph">OFF</code>), then RMAN automatically backs up the control file and server parameter file after every backup and after database structural changes. The <a href="glossary.html#GUID-7CDA6567-DFB0-450D-8771-B033E9872AF7"><span class="xrefglossterm">control file autobackup</span></a> contains metadata about the previous backup, which is crucial for <a href="glossary.html#GUID-641AA42A-EAFE-449E-99D9-55DCBAE6539D"><span class="xrefglossterm">disaster recovery</span></a>.
                     </p>
                     <div class="infoboxnote" id="GUID-D25F0A92-12AE-490E-AB8F-C9E54E081CDD__GUID-FB72AC7A-D9BC-401A-8918-7C5F7944D5C9">
                        <p class="notep1">Note:</p>
                        <p>You can restore a backup of a control file made on one Data Guard database to any other database in the environment. Primary and standby control file backups are interchangeable. See <a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> to learn how to use RMAN to restore files on a standby database.
                        </p>
                     </div>
                     <p>If the autobackup feature is not set, then you must manually back up the control file in one of the following ways:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Run <code class="codeph">BACKUP</code> <code class="codeph">CURRENT</code> <code class="codeph">CONTROLFILE</code>.
                           </p>
                        </li>
                        <li>
                           <p>Include a backup of the control file within any backup by using the <code class="codeph">INCLUDE</code> <code class="codeph">CURRENT</code> <code class="codeph">CONTROLFILE</code> option of the <code class="codeph">BACKUP</code> command.
                           </p>
                        </li>
                        <li>
                           <p>Back up data file <code class="codeph">1</code>, because RMAN automatically includes the control file and server parameter file in backups of data file <code class="codeph">1</code>.
                           </p>
                           <div class="infoboxnote" id="GUID-D25F0A92-12AE-490E-AB8F-C9E54E081CDD__GUID-74C12E57-6DC4-4132-8DB3-584EB0D9142A">
                              <p class="notep1">Note:</p>
                              <p>If the control file block size is different from the block size for data file <code class="codeph">1</code>, then the control file cannot be written into the same backup set as the data file. RMAN writes the control file into a backup set by itself if the block size is different. The <code class="codeph">V$CONTROLFILE.BLOCK_SIZE</code> column indicates the control file block size, whereas the <code class="codeph">DB_BLOCK_SIZE</code> initialization parameter indicates the block size of data file <code class="codeph">1</code>.
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div><a id="BRADV729"></a><div class="props_rev_3"><a id="GUID-D796580F-B3F0-46BE-A47B-D8130461CF3D" name="GUID-D796580F-B3F0-46BE-A47B-D8130461CF3D"></a><h5 id="BRADV-GUID-D796580F-B3F0-46BE-A47B-D8130461CF3D" class="sect5"><span class="enumeration_section">9.3.3.1 </span>About Manual Backups of the Control File
                     </h5>
                     <div>
                        <p>A manual backup of the control file is different from a control file autobackup. RMAN makes a control file autobackup after the files specified in the <code class="codeph">BACKUP</code> command are backed up. 
                        </p>
                        <p>Thus, the autobackup—unlike a manual control file backup—contains metadata about the backup that just completed. Also, RMAN can automatically restore autobackups without the use of a recovery catalog.</p>
                        <p>You can make a manual backup of the current control file either as a <a href="glossary.html#GUID-6AA43E7D-9946-4C41-A62F-01E5BACEB8A7"><span class="xrefglossterm">backup set</span></a> or as an <a href="glossary.html#GUID-397CB99E-3F07-4980-96B3-9D0D0ABBABEA"><span class="xrefglossterm">image copy</span></a>. For a backup set, RMAN first creates a snapshot control file for read consistency. You can configure the file name and location of the snapshot control file. A snapshot control file is not needed for an image copy.
                        </p>
                        <p>In an Oracle Real Application Clusters (Oracle RAC) environment, the following restrictions apply:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The snapshot control file location must be on shared storage—that is, storage that is accessible by all Oracle RAC instances.</p>
                           </li>
                           <li>
                              <p>The destination of an image copy of the current control file must be shared storage.</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-D796580F-B3F0-46BE-A47B-D8130461CF3D__GUID-0A0E143A-8CAC-4CE4-8421-3FE2504FAD13">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="configuring-rman-client-advanced.html#GUID-B7B61600-6DED-413D-B134-1DAE79627A01" title="When RMAN needs a read-consistent version of the control file, it creates a temporary snapshot control file. RMAN needs a snapshot control file when resynchronizing with the recovery catalog or when making a backup of the current control file.">Configuring the Snapshot Control File Location</a></p>
                              </li>
                              <li>
                                 <p><a href="backing-up-database.html#GUID-F3EC4BC5-DF2B-4052-9BDF-28D16E9B4351" title="To make a manual backup, you can either specify INCLUDE CURRENT CONTROLFILE when backing up other files or specify BACKUP CURRENT CONTROLFILE.">Making a Manual Backup of the Control File</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="BRADV226"></a><a id="BRADV89518"></a><div class="props_rev_3"><a id="GUID-F3EC4BC5-DF2B-4052-9BDF-28D16E9B4351" name="GUID-F3EC4BC5-DF2B-4052-9BDF-28D16E9B4351"></a><h5 id="BRADV-GUID-F3EC4BC5-DF2B-4052-9BDF-28D16E9B4351" class="sect5"><span class="enumeration_section">9.3.3.2 </span>Making a Manual Backup of the Control File
                     </h5>
                     <div>
                        <p>To make a manual backup, you can either specify <code class="codeph">INCLUDE CURRENT CONTROLFILE</code> when backing up other files or specify <code class="codeph">BACKUP CURRENT CONTROLFILE</code>. 
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-F3EC4BC5-DF2B-4052-9BDF-28D16E9B4351__GUID-05BE8ABE-2C80-4287-AFDF-6F417F2D4527">To manually back up the control file:</p>
                           <p>You can also back up control file copies on disk by specifying the <code class="codeph">CONTROLFILECOPY</code> parameter.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Start RMAN and connect to a target database and a recovery catalog (if used) as described in <a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a>.</span></li>
                           <li><span>Ensure that the target database is mounted or open.</span></li>
                           <li><span>Execute the <code class="codeph">BACKUP</code> command with the desired control file clause.</span></li>
                        </ol>
                        <div class="example" id="GUID-F3EC4BC5-DF2B-4052-9BDF-28D16E9B4351__GUID-2D6645D6-C509-40E5-9294-C7DED2AA3345">
                           <p class="titleinexample">Example 9-10 Backing Up a Tablespace and Current Control File to Tape</p>
                           <p>This example backs up tablespace <code class="codeph">users</code> to tape and includes the current control file in the backup:
                           </p><pre class="pre codeblock"><code>BACKUP DEVICE TYPE sbt 
  TABLESPACE users 
  INCLUDE CURRENT CONTROLFILE;
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-F3EC4BC5-DF2B-4052-9BDF-28D16E9B4351__GUID-F9AD00DF-FB34-4E0D-8E71-EF470E855B51">
                           <p class="titleinexample">Example 9-11 Backing Up Current Control File to Fast Recovery Area</p>
                           <p>This example backs up the current control file to the fast recovery area as a backup set:</p><pre class="pre codeblock"><code>BACKUP CURRENT CONTROLFILE;</code></pre><p>RMAN first creates a snapshot control file.</p>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-F3EC4BC5-DF2B-4052-9BDF-28D16E9B4351__GUID-CB923A26-D480-47C4-AA32-FD41EEAF7DAC">
                           <p class="titleinexample">Example 9-12 Backing Up the Current Control File as Image Copy</p>
                           <p>This example backs up the current control file to the default disk device as an image copy:</p><pre class="pre codeblock"><code>BACKUP AS COPY
  CURRENT CONTROLFILE 
  FORMAT '/tmp/control01.ctl';
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-F3EC4BC5-DF2B-4052-9BDF-28D16E9B4351__GUID-46227440-AE01-4DF8-AD96-6872CA776B2F">
                           <p class="titleinexample">Example 9-13 Backing Up a Control File Copy</p>
                           <p>This example backs up the control file copy created in the previous example to tape:</p><pre class="pre codeblock"><code>BACKUP AS COPY 
  CURRENT CONTROLFILE 
  FORMAT '/tmp/control01.ctl';
BACKUP DEVICE TYPE sbt 
  CONTROLFILECOPY '/tmp/control01.ctl';
</code></pre><p>A snapshot control file is not needed when backing up a control file copy.</p>
                           <p>If the control file autobackup feature is enabled, then RMAN makes two control file backups in these examples: the explicit backup of the files specified in the <code class="codeph">BACKUP</code> command and the control file and server parameter file autobackup.
                           </p>
                           <div class="infoboxnotealso" id="GUID-F3EC4BC5-DF2B-4052-9BDF-28D16E9B4351__GUID-0F793CC9-89D7-43E2-9F18-E030AD452369">
                              <p class="notep1">See Also:</p>
                              <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn about the <code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP</code> command
                              </p>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="BRADV230"></a><a id="BRADV89519"></a><div class="props_rev_3"><a id="GUID-D3E617F5-121C-41DC-A191-B3BA6D121B30" name="GUID-D3E617F5-121C-41DC-A191-B3BA6D121B30"></a><h4 id="BRADV-GUID-D3E617F5-121C-41DC-A191-B3BA6D121B30" class="sect4"><span class="enumeration_section">9.3.4 </span>Backing Up Server Parameter Files with RMAN
                  </h4>
                  <div>
                     <p>RMAN automatically backs up the current server parameter file in certain cases. The <code class="codeph">BACKUP</code> <code class="codeph">SPFILE</code> command backs up the parameter file explicitly. The server parameter file that is backed up is the one currently in use by the instance. 
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D3E617F5-121C-41DC-A191-B3BA6D121B30__GUID-66C6EEDF-7CAA-43D4-A266-D4E45C98BC64">To back up the server parameter file:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and a recovery catalog (if used) as described in <a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a>.</span></li>
                        <li class="stepexpand"><span>Ensure that the target database is mounted or open.</span><div>
                              <p>The database must have been started with a server parameter file. If the instance is started with a client-side initialization parameter file, then RMAN issues an error if you execute <code class="codeph">BACKUP ... SPFILE</code>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">BACKUP ... SPFILE</code> command.</span><div>
                              <p>The following example backs up the server parameter file to tape:</p><pre class="oac_no_warn" dir="ltr">BACKUP DEVICE TYPE sbt SPFILE;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-D3E617F5-121C-41DC-A191-B3BA6D121B30__GUID-E755E933-2FC6-48DD-BE06-F63F254C728F">
                           <p class="notep1">See Also:</p>
                           <p><a href="backing-up-database.html#GUID-D25F0A92-12AE-490E-AB8F-C9E54E081CDD" title="You can back up the control file when the database is mounted or open. RMAN uses a snapshot control file to ensure a read-consistent version.">Backing Up Control Files with RMAN</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV231"></a><a id="BRADV89526"></a><div class="props_rev_3"><a id="GUID-31FBFBD3-B8C8-4085-AAFC-8BA696A8F31E" name="GUID-31FBFBD3-B8C8-4085-AAFC-8BA696A8F31E"></a><h4 id="BRADV-GUID-31FBFBD3-B8C8-4085-AAFC-8BA696A8F31E" class="sect4"><span class="enumeration_section">9.3.5 </span>Backing Up a Database in NOARCHIVELOG Mode
                  </h4>
                  <div>
                     <p>You can only back up a database in <code class="codeph">NOARCHIVELOG</code> mode when the database is closed and in a consistent state.
                     </p>
                     <div class="section">
                        <p>The script shown in <a href="backing-up-database.html#GUID-31FBFBD3-B8C8-4085-AAFC-8BA696A8F31E__BGBBDDEA">Example 9-14</a> puts the database into the correct mode for a consistent, whole database backup and then backs up the database. The script assumes that <a href="glossary.html#GUID-7CDA6567-DFB0-450D-8771-B033E9872AF7"><span class="xrefglossterm">control file autobackup</span></a> is enabled for the database.
                        </p>
                        <p>You can skip tablespaces, such as read-only tablespaces, but any skipped tablespace that has not been offline or read-only since its last backup is lost if the database has to be restored from a backup.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-31FBFBD3-B8C8-4085-AAFC-8BA696A8F31E__BGBBDDEA">
                        <p class="titleinexample">Example 9-14 Backing Up a Database in NOARCHIVELOG Mode</p><pre class="pre codeblock"><code>SHUTDOWN IMMEDIATE; 
# Start the database in case it suffered instance failure or was 
# closed with SHUTDOWN ABORT before starting this script. 
STARTUP FORCE DBA; 
SHUTDOWN IMMEDIATE; 
STARTUP MOUNT;
# this example uses automatic channels to make the backup
BACKUP 
  INCREMENTAL LEVEL 0
  MAXSETSIZE 10M
  DATABASE
  TAG 'BACKUP_1';
# Now that the backup is complete, open the database. 
ALTER DATABASE OPEN; </code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-7F9F8913-2838-4066-A000-048B35A70EA4" name="GUID-7F9F8913-2838-4066-A000-048B35A70EA4"></a><h4 id="BRADV-GUID-7F9F8913-2838-4066-A000-048B35A70EA4" class="sect4"><span class="enumeration_section">9.3.6 </span>Creating a Preplugin Backup of the Whole Database
                  </h4>
                  <div>
                     <p>Preplugin backups ensure that an RMAN backup is usable after a non-CDB is plugged in as a PDB into a CDB. </p>
                     <div class="section">
                        <p></p>
                        <p>Starting with Oracle Database Release 18c, you can create preplugin backups of non-CDBs. The preplugin backups are used for restore and recover operations after this non-CDB is plugged in as a PDB in a destination CDB. Preplugin backups can be either tape and disk backups.</p>
                        <p><span class="bold">To create a preplugin backup of a non-CDB:</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to the target database (non-CDB) as a user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege as described in <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a>"</span>.</span><div>
                              <p>Connect to a recovery catalog if one is used.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Ensure that the required prerequisites are met as described in <a href="../rcmrf/BACKUP.html#RCMRF-GUID-73642FF2-43C5-48B2-9969-99001C52EB50" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a>.</span></li>
                        <li class="stepexpand"><span>(Optional) Configure autobackups for the database control file and server parameter file as described in <span class="q">"<a href="configuring-rman-client-basic.html#GUID-98BA7492-7108-4DF9-B5A2-21957072E308" title="You can configure RMAN to automatically back up the control file and server parameter file. The autobackup occurs whenever a backup record is added.">Configuring Control File and Server Parameter File Autobackups</a>"</span>.</span></li>
                        <li class="stepexpand"><span>Perform a full backup of the non-CDB, including archived redo log files. </span><div>
                              <p>If backups of the non-CDB already exist, then you can just create backups of the archived redo log files. All existing RMAN backups are usable after their metadata is exported into the data dictionary by using the <code class="codeph">dbms_pdb.exportrmanbackup()</code> procedure.
                              </p>
                              <p>Although it is not mandatory to backup archived redo log files, it is recommended that you do so. By archiving the logs immediately after the backup, you ensure that you have a full set of archived logs through the time of the backup. This enables you to perform media recovery after restoring this backup.</p>
                              <p>The following command backs up a non-CDB including all archived redo log files. The <code class="codeph">TAG</code> clause specifies the backup tag that is used to identify this RMAN backup.
                              </p><pre class="pre codeblock"><code>RMAN&gt; BACKUP DATABASE PLUS ARCHIVELOG ALL TAG for_migration; </code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Exit RMAN.</span></li>
                        <li class="stepexpand"><span>In the target database, connect to SQL*Plus as a user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span></li>
                        <li class="stepexpand"><span>Export the RMAN backup metadata for the non-CDB into its data dictionary by using the <code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code> procedure. </span><div><pre class="pre codeblock"><code>SQL&gt; EXECUTE DBMS_PDB.EXPORTRMANBACKUP();</code></pre><p>While plugging the non-CDB as a PDB in a destination CDB, this backup metadata of the source non-CDB is copied into the data dictionary of the destination CDB.</p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-7F9F8913-2838-4066-A000-048B35A70EA4__GUID-C1FD65DC-4C9D-4A39-A3CE-47C0F0F5A4B7">
                           <p class="notep1">See Also:</p>
                           <p><a href="rman-backup-concepts.html#GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D" title="A preplugin backup is an RMAN backup of a non-CDB or a PDB that was created before the non-CDB or PDB was plugged in to a different CDB.">About Preplugin Backups</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV428"></a><div class="props_rev_3"><a id="GUID-EB261F93-318D-4EBA-8E26-B0589703CC73" name="GUID-EB261F93-318D-4EBA-8E26-B0589703CC73"></a><h3 id="BRADV-GUID-EB261F93-318D-4EBA-8E26-B0589703CC73" class="sect3"><span class="enumeration_section">9.4 </span>Backing Up CDBs and PDBs
               </h3>
               <div>
                  <p>Use the <code class="codeph">BACKUP</code> command to back up multitenant container databases (CDBs) and pluggable databases (PDBs).
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="backing-up-database.html#GUID-E96DC7C6-7A02-4DF6-92A0-795CD8E9FE37" title="RMAN and Oracle Enterprise Manager Cloud Control provide full support for backup and recovery in a multitenant environment.">About Backing Up CDBs and PDBs</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-9A4E9357-820F-449A-8832-C32F1A8C9BDB" title="Backing up a whole multitenant container database (CDB) is similar to backing up a non-CDB. When you back up a whole CDB, RMAN backs up the root, all the pluggable databases (PDBs), and the archived redo logs.">Backing Up a Whole CDB</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-B416FCDB-1EA1-48F8-8162-F9181A75B6BB" title="You can use RMAN to make a backup of only the root. Because the root contains critical metadata for the whole CDB, Oracle recommends that you back up the root or back up the whole CDB at regular intervals.">Backing Up the Root with RMAN</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-079A8D28-018C-4B99-ACAE-129E3D265ED5" title="Oracle Enterprise Manager Cloud Control (Cloud Control) can be used to back up the root.">Backing Up the Root with Oracle Enterprise Manager Cloud Control</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-655DC5F5-FF8D-4A73-B67D-F5AAE20CA382" title="RMAN enables you to back up one or more PDBs in a CDB using the BACKUP command.">Backing Up PDBs with RMAN</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-F7E1D8EA-2F4F-4497-87FF-547EF6D0EE8B" title="Oracle Enterprise Manager Cloud Control (Cloud Control) can be used to perform backups of pluggable databases (PDBs).">Backing Up PDBs with Oracle Enterprise Manager Cloud Control</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-6AD83271-F900-4EA6-B787-865E5DC0678A" title="Because tablespaces in different PDBs can have the same name, to eliminate ambiguity you must connect directly to a PDB to back up one or more of its tablespaces.">Backing Up Tablespaces and Data Files in a PDB</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-EB261F93-318D-4EBA-8E26-B0589703CC73__GUID-3D62F1DC-06C5-451A-8FED-401F47CB69CD">
                     <p class="notep1">Note:</p>
                     <p>Backups of a <a href="glossary.html#GUID-62A96A52-3B97-455A-A443-75B999DCAC94"><span class="xrefglossterm">non-CDB</span></a> are not usable after the non-CDB is plugged in as a PDB into another CDB.
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-EB261F93-318D-4EBA-8E26-B0589703CC73__GUID-FEFB7343-2E65-49AA-940C-D5F270049444">
                     <p class="notep1">See Also:</p>
                     <p><a href="../multi/multitenant-architecture.html#CNCPT89233" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> for an introduction to PDBs
                     </p>
                  </div>
               </div><a id="BRADV730"></a><div class="props_rev_3"><a id="GUID-E96DC7C6-7A02-4DF6-92A0-795CD8E9FE37" name="GUID-E96DC7C6-7A02-4DF6-92A0-795CD8E9FE37"></a><h4 id="BRADV-GUID-E96DC7C6-7A02-4DF6-92A0-795CD8E9FE37" class="sect4"><span class="enumeration_section">9.4.1 </span>About Backing Up CDBs and PDBs
                  </h4>
                  <div>
                     <p>RMAN and Oracle Enterprise Manager Cloud Control provide full support for backup and recovery in a multitenant environment.</p>
                     <p>The <a href="glossary.html#GUID-665B741C-5624-40B5-81FF-93B1EC67FC56"><span class="xrefglossterm">multitenant architecture</span></a> enables an Oracle Database to function as a CDB. You can back up and recover a whole CDB, the <a href="glossary.html#GUID-EA3DB8F4-F68E-4FC5-A599-32A4886FFF8A"><span class="xrefglossterm">root</span></a> only, or one or more pluggable databases (PDBs). You can also back up and recover individual tablespaces and data files in a PDB.
                     </p>
                     <p>You might want to perform nightly backups of the whole multitenant container database (CDB) by using an incremental backup strategy, or you might want to make frequent separate backups of individual PDBs and do less frequent backups of either the whole CDB or of the root. </p>
                     <p>In terms of the ability to recover from data loss, separately backing up the root and all PDBs, including the CDB seed, is equivalent to backing up the whole CDB. The main difference is in the number of RMAN commands that you must enter and the time to recover. Recovering a whole CDB requires less time than recovering the root plus all PDBs.</p>
                     <p>If the compatibility parameter for CDBs and PDBs is set to 12.2 or higher, RMAN also enables you to perform sparse backups on your CDB and PDB. These backups copy the latest updates from the delta storage space assigned to each database. </p>
                     <div class="infoboxnotealso" id="GUID-E96DC7C6-7A02-4DF6-92A0-795CD8E9FE37__GUID-2282CD9B-87ED-4F09-913E-B964659AD381">
                        <p class="notep1">See Also:</p>
                        <p><a href="rman-backup-concepts.html#GUID-D0AEBAF2-FDEA-4977-9B4D-97759A1CA865" title="You can use the RMAN BACKUP command to back up data blocks from sparse data files, tablespaces containing sparse data files, sparse pluggable databases (PDBs), and multitenant container databases (CDBs) containing sparse PDBs.">About Sparse Backups</a> for more information on sparse backups
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV429"></a><a id="BRADV731"></a><div class="props_rev_3"><a id="GUID-9A4E9357-820F-449A-8832-C32F1A8C9BDB" name="GUID-9A4E9357-820F-449A-8832-C32F1A8C9BDB"></a><h4 id="BRADV-GUID-9A4E9357-820F-449A-8832-C32F1A8C9BDB" class="sect4"><span class="enumeration_section">9.4.2 </span>Backing Up a Whole CDB
                  </h4>
                  <div>
                     <p>Backing up a whole multitenant container database (CDB) is similar to backing up a non-CDB. When you back up a whole CDB, RMAN backs up the root, all the pluggable databases (PDBs), and the archived redo logs.</p>
                     <div class="section">
                        <p>The <code class="codeph">BACKUP</code> command is used to back up CDBs. You can then recover either the whole CDB, the root only, or one or more PDBs from the CDB backup.
                        </p>
                        <p><span class="bold">To backup up a whole CDB:</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to the root as a common user with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege and to a recovery catalog (if used) as described in <a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a>.</span></li>
                        <li class="stepexpand"><span>Ensure that the database is mounted or open.</span></li>
                        <li class="stepexpand"><span>Issue the <a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><code class="codeph">BACKUP DATABASE</code></a> command at the RMAN prompt.</span><div>
                              <p>The simplest form of the command requires no options or parameters:</p><pre class="pre codeblock"><code>BACKUP DATABASE;</code></pre><p>The list of files backed up depends on the keyword used with the <code class="codeph">BACKUP</code> command.
                              </p>
                              <p>The following example backs up the CDB, switches the online redo logs, and includes archived logs in the backup:</p><pre class="pre codeblock"><code>BACKUP DATABASE PLUS ARCHIVELOG;
</code></pre><p>By archiving the logs immediately after the backup, you ensure that you have a full set of archived logs through the time of the backup. In this way, you guarantee that you can perform media recovery after restoring this backup.</p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-9A4E9357-820F-449A-8832-C32F1A8C9BDB__GUID-C2ECAD7C-21AD-48B7-989C-549A8D6A6526">
                           <p class="notep1">Note:</p>
                           <p>Proxy PDBs are not backed up while backing up a CDB.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV733"></a><a id="BRADV732"></a><div class="props_rev_3"><a id="GUID-B416FCDB-1EA1-48F8-8162-F9181A75B6BB" name="GUID-B416FCDB-1EA1-48F8-8162-F9181A75B6BB"></a><h4 id="BRADV-GUID-B416FCDB-1EA1-48F8-8162-F9181A75B6BB" class="sect4"><span class="enumeration_section">9.4.3 </span>Backing Up the Root with RMAN
                  </h4>
                  <div>
                     <p>You can use RMAN to make a backup of only the root. Because the root contains critical metadata for the whole CDB, Oracle recommends that you back up the root or back up the whole CDB at regular intervals.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B416FCDB-1EA1-48F8-8162-F9181A75B6BB__GUID-0F04A9C3-BC7D-46AB-89ED-65ADC629449A">To back up the root with RMAN:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to the root as a common user with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege as described in <a href="starting-interacting-with-rman-client.html#GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D" title="There are several ways to connect as target to the root.">Connecting as Target to the Root</a>.</span></li>
                        <li class="stepexpand"><span>Enter the following command:</span><div><pre class="oac_no_warn" dir="ltr">BACKUP DATABASE ROOT;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV734"></a><div class="props_rev_3"><a id="GUID-079A8D28-018C-4B99-ACAE-129E3D265ED5" name="GUID-079A8D28-018C-4B99-ACAE-129E3D265ED5"></a><h4 id="BRADV-GUID-079A8D28-018C-4B99-ACAE-129E3D265ED5" class="sect4"><span class="enumeration_section">9.4.4 </span>Backing Up the Root with Oracle Enterprise Manager Cloud Control
                  </h4>
                  <div>
                     <p>Oracle Enterprise Manager Cloud Control (Cloud Control) can be used to back up the root.</p>
                     <div class="section">
                        <p>Use the following steps to back up the root with Cloud Control:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>From the Database Home page, select <span class="uicontrol bold">Backup &amp; Recovery</span> from the Availability menu, and then select <span class="uicontrol bold">Schedule Backup</span>.</span></li>
                        <li class="stepexpand"><span>If you have not logged in to the database previously, then the Database Login page is displayed. Log in to the database using Named or New credentials and then click <span class="uicontrol bold">Login</span>.</span><div>
                              <p>Cloud Control displays the Schedule Backup page.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>From the Customized Backup section, choose <span class="uicontrol bold">Container Database Root</span>, and then click <span class="uicontrol bold">Schedule Customized Backup</span>.</span><div>
                              <p>The Schedule Backup Wizard appears and displays the Options page.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Complete the wizard by navigating the remainder of the pages to back up the root. For more information about each page of the wizard, click <span class="uicontrol bold">Help</span>.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-079A8D28-018C-4B99-ACAE-129E3D265ED5__GUID-FE568C63-0C02-4C65-B4E5-72FACAC53A58">
                           <p class="notep1">See Also:</p>
                           <p><a href="introduction-backup-recovery.html#GUID-7557D8F6-2DC8-460A-8453-74E73DEF8705" title="The Database Home page is the main database management page in Oracle Enterprise Manager Cloud Control (Cloud Control).">Accessing the Database Home Page Using Cloud Control</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV542"></a><a id="BRADV736"></a><a id="BRADV735"></a><div class="props_rev_3"><a id="GUID-655DC5F5-FF8D-4A73-B67D-F5AAE20CA382" name="GUID-655DC5F5-FF8D-4A73-B67D-F5AAE20CA382"></a><h4 id="BRADV-GUID-655DC5F5-FF8D-4A73-B67D-F5AAE20CA382" class="sect4"><span class="enumeration_section">9.4.5 </span>Backing Up PDBs with RMAN
                  </h4>
                  <div>
                     <p>RMAN enables you to back up one or more PDBs in a CDB using the <code class="codeph">BACKUP</code> command. 
                     </p>
                     <div class="section">
                        <p>There are two approaches to backing up a PDB with RMAN:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connect to the root and then use the <code class="codeph">BACKUP PLUGGABLE DATABASE</code> command. This approach enables you to back up multiple PDBs with a single command.
                              </p>
                              <p>When you connect to the root and back up a PDB, this backup is visible to the root and to that particular PDB but not to the other PDBs.</p>
                           </li>
                           <li>
                              <p>Connect to the PDB and use the <code class="codeph">BACKUP DATABASE</code> command. This approach backs up only a single PDB and enables you to use the same commands used for backing up non-CDBs.
                              </p>
                              <p>Backups created when connected to any PDB are visible when connected to the root.</p>
                           </li>
                        </ul>
                        <p>When you back up individual PDBs, the archived redo logs are not backed up.</p>
                        <p></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-655DC5F5-FF8D-4A73-B67D-F5AAE20CA382__GUID-F1726ECB-8C7D-4BD8-A61C-C3D57F5B32F0">To back up one or more PDBs while connected to the root:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>Start RMAN. Connect to the root as a common user with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege and to a recovery catalog (if used), as described in <a href="starting-interacting-with-rman-client.html#GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D" title="There are several ways to connect as target to the root.">Connecting as Target to the Root</a>.
                              </p> 
                           </li>
                           <li>
                              <p>Issue a <code class="codeph">BACKUP PLUGGABLE DATABASE</code> command at the RMAN prompt. 
                              </p>
                              <p>The following example backs up the PDBs <code class="codeph">sales</code> and <code class="codeph">hr</code>:
                              </p><pre class="oac_no_warn" dir="ltr">BACKUP PLUGGABLE DATABASE sales, hr;</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-655DC5F5-FF8D-4A73-B67D-F5AAE20CA382__GUID-9508D3A8-C9F8-441C-887F-A5382A92CE24">To back up one PDB while connected to the PDB:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to the PDB as a <a href="glossary.html#GUID-43EA1A4C-E5EB-4926-99EC-1DDA0E74A07C"><span class="xrefglossterm">local user</span></a> with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege and to a recovery catalog (if used), as described in <a href="starting-interacting-with-rman-client.html#GUID-E95C5C27-C036-4773-B77C-E4120526F422" title="You can connect to a PDB either from the RMAN prompt or the operating system command line.">Connecting as Target to a PDB</a>.</span><div></div>
                        </li>
                        <li class="stepexpand"><span>Issue a <code class="codeph">BACKUP DATABASE</code> command at the RMAN prompt. </span><div><pre class="oac_no_warn" dir="ltr">BACKUP DATABASE;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-655DC5F5-FF8D-4A73-B67D-F5AAE20CA382__GUID-157CE916-7749-4C2D-B857-BE105FB07488">
                           <p class="notep1">Note:</p>
                           <p>Backing up a proxy PDB using RMAN is not supported.</p>
                        </div>
                        <p></p>
                        <p></p>
                        <div class="infoboxnote" id="GUID-655DC5F5-FF8D-4A73-B67D-F5AAE20CA382__GUID-76DBD35B-F953-46CF-8160-2E25B2EA577D">
                           <p class="notep1">Note:</p>
                           <p>PDB backups can be used to perform media recovery only if the backups include all the archived redo log files that contain changes for this PDB. When creating a backup while connected to the PDB, there may be some situations in which all the required logs are not backed up.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E5A3E523-C55C-4666-8334-81E7A224371B" name="GUID-E5A3E523-C55C-4666-8334-81E7A224371B"></a><h4 id="BRADV-GUID-E5A3E523-C55C-4666-8334-81E7A224371B" class="sect4"><span class="enumeration_section">9.4.6 </span>Creating Preplugin Backups of PDBs Using RMAN
                  </h4>
                  <div>
                     <p>Preplugin backups of a PDB can be used to perform restore and recover operations after the PDB is migrated and plugged in to a different destination CDB.</p>
                     <div class="section">
                        <p></p>
                        <p>Starting with Oracle Database Release 18c, you can create preplugin backups of PDBs to disk and tape.</p>
                        <div class="infoboxnote" id="GUID-E5A3E523-C55C-4666-8334-81E7A224371B__GUID-F15F2EEB-64C3-40DA-818A-26D90557C63A">
                           <p class="notep1">Note:</p>
                           <p>The destination CDB does not manage backups created on the source CDB after it has been plugged in to the destination CDB.</p>
                        </div>
                        <p><span class="bold">To create preplugin backups of a PDB:</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Ensure that the required prerequisites are met as described in <a href="../rcmrf/BACKUP.html#RCMRF-GUID-73642FF2-43C5-48B2-9969-99001C52EB50" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a>.</span></li>
                        <li class="stepexpand"><span>Start RMAN and connect using one of the following techniques as described in <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a>"</span>:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Connect to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Connect to the PDB as a local user or common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>(Optional) Configure control file and server parameter file autobackups for the target database as described in <span class="q">"<a href="configuring-rman-client-basic.html#GUID-98BA7492-7108-4DF9-B5A2-21957072E308" title="You can configure RMAN to automatically back up the control file and server parameter file. The autobackup occurs whenever a backup record is added.">Configuring Control File and Server Parameter File Autobackups</a>"</span>.</span></li>
                        <li class="stepexpand"><span>Create a full backup of the PDB including the archived redo log files.</span><div>
                              <p>If RMAN backups of the PDB already exist, then these backups are usable after the PDB is migrated to another destination CDB. However, it is recommended that you back up the archived redo log files.</p>
                              <p>The following command backs up the PDB when you are connected to the PDB as a local user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege:
                              </p><pre class="pre codeblock"><code>RMAN&gt; BACKUP DATABASE PLUS ARCHIVELOG ALL TAG for_migration; </code></pre><p>The following command backs up the PDB <code class="codeph">my_pdb</code> when connected to the <code class="codeph">ROOT</code> as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege:
                              </p><pre class="pre codeblock"><code>RMAN&gt; BACKUP PLUGGABLE DATABASE my_pdb PLUS ARCHIVELOG ALL TAG for_migration;</code></pre><div class="infoboxnote" id="GUID-E5A3E523-C55C-4666-8334-81E7A224371B__GUID-9B7108FA-8C3D-4DFA-8108-17E48B3667BB">
                                 <p class="notep1">Note:</p>
                                 <p>When you use <code class="codeph">BACKUP PLUGGABLE DATABASE</code>, all the required archived redo logs are backed up only when the CDB uses local undo.
                                 </p>
                              </div>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>The metadata that is required for these preplugin backups to be usable in a destination CDB is included in the XML file created when the PDB is unplugged from the source CDB.</p>
                        <div class="infoboxnotealso" id="GUID-E5A3E523-C55C-4666-8334-81E7A224371B__GUID-BEB9686E-0D45-43EE-AEDD-34A0258D90BA">
                           <p class="notep1">See Also:</p>
                           <p><a href="rman-backup-concepts.html#GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D" title="A preplugin backup is an RMAN backup of a non-CDB or a PDB that was created before the non-CDB or PDB was plugged in to a different CDB.">About Preplugin Backups</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV737"></a><div class="props_rev_3"><a id="GUID-F7E1D8EA-2F4F-4497-87FF-547EF6D0EE8B" name="GUID-F7E1D8EA-2F4F-4497-87FF-547EF6D0EE8B"></a><h4 id="BRADV-GUID-F7E1D8EA-2F4F-4497-87FF-547EF6D0EE8B" class="sect4"><span class="enumeration_section">9.4.7 </span>Backing Up PDBs with Oracle Enterprise Manager Cloud Control
                  </h4>
                  <div>
                     <p>Oracle Enterprise Manager Cloud Control (Cloud Control) can be used to perform backups of pluggable databases (PDBs).</p>
                     <div class="section">
                        <p>To back up one or more PDBs with Cloud Control, complete the following steps:</p>
                        <ol>
                           <li>
                              <p>From the Database Home page, select <span class="uicontrol bold">Backup &amp; Recovery</span> from the Availability menu, and then select <span class="uicontrol bold">Schedule Backup</span>.
                              </p>
                           </li>
                           <li>
                              <p>If you have not logged in to the database previously, then the Database Login page is displayed. Log in to the database using Named or New credentials and then click <span class="uicontrol bold">Login</span>.
                              </p>
                              <p>Cloud Control displays the Schedule Backup page.</p>
                           </li>
                           <li>
                              <p>From the Customized Backup section, select <span class="uicontrol bold">Pluggable Databases</span>, and then click <span class="uicontrol bold">Schedule Customized Backup</span>.
                              </p>
                              <p>The Schedule Backup Wizard appears and displays the Pluggable Databases page.</p>
                           </li>
                           <li>
                              <p>Select the PDBs that you want to back up by following these steps:</p>
                              <ol type="a">
                                 <li>
                                    <p>Click <span class="uicontrol bold">Add</span> to display the Available Pluggable Databases page.
                                    </p>
                                 </li>
                                 <li>
                                    <p>From the list of PDBs shown, click in the <span class="uicontrol bold">Select</span> column to designate the PDBs you want to back up. Optionally, you can click <span class="uicontrol bold">Select All</span> to turn on the Select option for all available PDBs. Click <span class="bold">Select None</span> to deselect all PDBs.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Click the <span class="uicontrol bold">Select</span> button to return to the Pluggable Databases page.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Optionally, you can remove PDBs from the table by clicking in the <span class="uicontrol bold">Select</span> column for each PDB that you want to remove and then clicking <span class="uicontrol bold">Remove</span>.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>Click <span class="uicontrol bold">Next</span> to move to the Options page of the wizard.
                              </p>
                           </li>
                           <li>
                              <p>Complete the wizard by navigating the remainder of the pages to back up the PDBs. For more information about each page of the wizard, click <span class="uicontrol bold">Help</span>.
                              </p>
                           </li>
                        </ol>
                        <div class="infoboxnotealso" id="GUID-F7E1D8EA-2F4F-4497-87FF-547EF6D0EE8B__GUID-CE8E08A1-A4EF-4915-9477-08806EA3888D">
                           <p class="notep1">See Also:</p>
                           <p><a href="introduction-backup-recovery.html#GUID-7557D8F6-2DC8-460A-8453-74E73DEF8705" title="The Database Home page is the main database management page in Oracle Enterprise Manager Cloud Control (Cloud Control).">Accessing the Database Home Page Using Cloud Control</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV545"></a><a id="BRADV739"></a><a id="BRADV738"></a><div class="props_rev_3"><a id="GUID-6AD83271-F900-4EA6-B787-865E5DC0678A" name="GUID-6AD83271-F900-4EA6-B787-865E5DC0678A"></a><h4 id="BRADV-GUID-6AD83271-F900-4EA6-B787-865E5DC0678A" class="sect4"><span class="enumeration_section">9.4.8 </span>Backing Up Tablespaces and Data Files in a PDB
                  </h4>
                  <div>
                     <p>Because tablespaces in different PDBs can have the same name, to eliminate ambiguity you must connect directly to a PDB to back up one or more of its tablespaces.</p>
                     <div class="p">Ensure that the CDB is open or mounted. Tablespaces can be read-only or read-write.</div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>In contrast, because data file numbers and paths are unique across the CDB, you can connect to either the root or a PDB to back up PDB data files. If you connect to the root, you can back up data files from multiple PDBs with a single command. If you connect to a PDB, you can back up only data files in that PDB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6AD83271-F900-4EA6-B787-865E5DC0678A__GUID-FB8EE1F9-55BF-46A0-9B3B-79E6507A2C8B">To back up tablespaces in a PDB:</p>
                        <p></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>Start RMAN. Connect to the PDB as a local user with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege and to a recovery catalog (if used), as described in <a href="starting-interacting-with-rman-client.html#GUID-E95C5C27-C036-4773-B77C-E4120526F422" title="You can connect to a PDB either from the RMAN prompt or the operating system command line.">Connecting as Target to a PDB</a>.
                              </p>
                           </li>
                           <li>
                              <p>Issue a <code class="codeph">BACKUP TABLESPACE</code> command.
                              </p>
                              <p>The following example backs up the tablespaces <code class="codeph">users</code> and <code class="codeph">examples</code> to the configured default device.
                              </p><pre class="pre codeblock"><code>BACKUP TABLESPACE users, examples;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6AD83271-F900-4EA6-B787-865E5DC0678A__GUID-0758FEA3-0AD8-4253-BDFA-5464B1E87999">To back up data files in a PDB:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Do one of the following:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Start RMAN and connect to the root as a common user with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Start RMAN and connect to the PDB as a local user with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Issue a <code class="codeph">BACKUP</code> <code class="codeph">DATAFILE</code> command.</span><div><pre class="pre codeblock"><code>BACKUP DATAFILE 10, 13;</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-6AD83271-F900-4EA6-B787-865E5DC0678A__GUID-203C3C03-744A-4841-B3E6-652AE06E04EB">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="starting-interacting-with-rman-client.html#GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D" title="There are several ways to connect as target to the root.">Connecting as Target to the Root</a></p>
                              </li>
                              <li>
                                 <p><a href="starting-interacting-with-rman-client.html#GUID-E95C5C27-C036-4773-B77C-E4120526F422" title="You can connect to a PDB either from the RMAN prompt or the operating system command line.">Connecting as Target to a PDB</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A506832F-F3AA-4458-B3B9-B0E80A3BC252" name="GUID-A506832F-F3AA-4458-B3B9-B0E80A3BC252"></a><h4 id="BRADV-GUID-A506832F-F3AA-4458-B3B9-B0E80A3BC252" class="sect4"><span class="enumeration_section">9.4.9 </span>Example: Creating a Preplugin Backup of a PDB with RMAN
                  </h4>
                  <div>
                     <p>This example creates a preplugin backup of the PDB <code class="codeph">my_pdb</code> that is contained in CDB <code class="codeph">cdb_prod</code>. The CDB uses shared undo and is open in read-write mode.
                     </p>
                     <div class="section">
                        <p></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Ensure that the prerequisites required for creating preplugin backups are met as described in <a href="../rcmrf/BACKUP.html#RCMRF-GUID-73642FF2-43C5-48B2-9969-99001C52EB50" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a>.</span></li>
                        <li class="stepexpand"><span>Start RMAN and connect to the root as a common user with the <code class="codeph">SYSBACKUP</code> privilege.</span><div>
                              <p>The following command uses password file authentication to connect to the root. <code class="codeph">cdb_prod</code> is the net service name of the CDB.
                              </p><pre class="pre codeblock"><code>CONNECT TARGET "sbu@cdb_prod AS SYSBACKUP";</code></pre><p>Enter the password for the <code class="codeph">sbu</code> user when prompted.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Enable control file autobackup for the CDB.</span><div><pre class="pre codeblock"><code>CONFIGURE CONTROLFILE AUTOBACKUP ON;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Back up the PDB using the<code class="codeph"> BACKUP PLUGGABLE DATABASE</code> command. Include archived redo logs in the backup so that you can use this backup to perform media recovery, if required.</span><div>
                              <p>The following command creates a preplugin backup of <code class="codeph">my_pdb</code>, including the archived redo log files. The tag used when naming the backups is <code class="codeph">mypdb_bkup</code>.
                              </p><pre class="pre codeblock"><code>BACKUP PLUGGABLE DATABASE my_pdb PLUS ARCHIVELOG TAG mypdb_bkup;</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-896D464C-7741-4CE2-A8FD-E897300EB1AC" name="GUID-896D464C-7741-4CE2-A8FD-E897300EB1AC"></a><h3 id="BRADV-GUID-896D464C-7741-4CE2-A8FD-E897300EB1AC" class="sect3"><span class="enumeration_section">9.5 </span>Backing Up Application Containers
               </h3>
               <div>
                  <p>RMAN enables you to use the <code class="codeph">BACKUP</code> command to perform backup operations on the application root, one or more application PDBs, and the application container.
                  </p>
                  <p></p>
                  <div class="infoboxnote" id="GUID-896D464C-7741-4CE2-A8FD-E897300EB1AC__GUID-CAFE9238-7975-452A-A996-FF2E32E12F6D">
                     <p class="notep1">Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="backing-up-database.html#GUID-3F46FE1E-670A-4EE1-89A2-D0C9CE0CCA03" title="RMAN can back up application containers, application PDBs, and the application root.">About Backing Up Application Containers</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-DDB57A12-4A1C-4E7A-9B1A-BE680603F233" title="Use the RMAN BACKUP command to back up the application root.">Backing Up the Application Root</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-78023B42-87D5-40F4-A0EF-A99BAF68AE4F" title="Use the BACKUP command to back up an application container, which consists of the application root and all the application PDBs that belong to the application root.">Backing Up the Application Root and its Application PDBs</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-9EAA1FF9-9F42-4EDC-8A77-0C29191BAAA1" title="The BACKUP command is used to back up one or more application PDBs.">Backing Up Application PDBs</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-3F46FE1E-670A-4EE1-89A2-D0C9CE0CCA03" name="GUID-3F46FE1E-670A-4EE1-89A2-D0C9CE0CCA03"></a><h4 id="BRADV-GUID-3F46FE1E-670A-4EE1-89A2-D0C9CE0CCA03" class="sect4"><span class="enumeration_section">9.5.1 </span>About Backing Up Application Containers
                  </h4>
                  <div>
                     <p>RMAN can back up application containers, application PDBs, and the application root.</p>
                     <p>An <a href="glossary.html#GUID-F213CD77-8CCF-430E-AA7B-A6BA7927EC98"><span class="xrefglossterm">application container</span></a> is an optional component of a CDB that stores data for one or more applications and shares application metadata and common data. A CDB can contain zero or more application containers. An application container consists of exactly one <a href="glossary.html#GUID-CC9EB948-16BC-4AB6-A05E-08EEAFCDD05F"><span class="xrefglossterm">application root</span></a> (different from the root in its CDB) and one or more <a href="glossary.html#GUID-6E2F65AE-C36C-446D-84D7-4F709C7DEBCE"><span class="xrefglossterm">application PDB</span></a>s.  The application root serves as the parent container to all the application PDBs plugged into it. 
                     </p>
                     <p>An application container typically contains one or more application common users. An application common user can only connect to the application root in which it was created or a PDB that is plugged in to this application root. An application root has its own service name, and you can connect to the application root in the same way that you connect to a PDB.</p>
                     <p>To perform backup and recovery tasks for the application root or application PDBs, you connect either to the application root or CDB root. </p>
                     <div class="infoboxnotealso" id="GUID-3F46FE1E-670A-4EE1-89A2-D0C9CE0CCA03__GUID-7D3A9019-4D77-4BA5-827A-7681B3F60B23">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../multi/overview-of-the-multitenant-architecture.html#GUID-8F8979E3-9B81-4293-B3CF-ACCF42A0B2D6" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> for conceptual information about application containers
                              </p>
                           </li>
                           <li>
                              <p><a href="../multi/creating-removing-application-containers-seeds-with-sql-plus.html#GUID-065649AC-18ED-4858-ACC5-36F011362A83" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about creating application containers
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-DDB57A12-4A1C-4E7A-9B1A-BE680603F233" name="GUID-DDB57A12-4A1C-4E7A-9B1A-BE680603F233"></a><h4 id="BRADV-GUID-DDB57A12-4A1C-4E7A-9B1A-BE680603F233" class="sect4"><span class="enumeration_section">9.5.2 </span>Backing Up the Application Root
                  </h4>
                  <div>
                     <p>Use the RMAN <code class="codeph">BACKUP</code> command to back up the application root.
                     </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>The <code class="codeph">COMPATIBLE</code> parameter for the CDB must be set to 19.0 or higher.
                        </p>
                        <p><span class="bold">To back up the application root:</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to the CDB root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege or to the application root as an application common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span></li>
                        <li class="stepexpand"><span>Use the <code class="codeph">BACKUP APPLICATION ROOT</code> command to back up the application root.</span><div><pre class="pre codeblock"><code>BACKUP APPLICATION ROOT DATABASE;</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-DDB57A12-4A1C-4E7A-9B1A-BE680603F233__GUID-1C7EB91F-53EE-47E5-8C85-7B5DDB6B37C1">
                           <p class="notep1">See Also:</p>
                           <p><a href="starting-interacting-with-rman-client.html#GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD" title="You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).">Making RMAN Connections to a CDB</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-78023B42-87D5-40F4-A0EF-A99BAF68AE4F" name="GUID-78023B42-87D5-40F4-A0EF-A99BAF68AE4F"></a><h4 id="BRADV-GUID-78023B42-87D5-40F4-A0EF-A99BAF68AE4F" class="sect4"><span class="enumeration_section">9.5.3 </span>Backing Up the Application Root and its Application PDBs
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">BACKUP</code> command to back up an application container, which consists of the application root and all the application PDBs that belong to the application root.
                     </p>
                     <div class="p">
                        <p>The <code class="codeph">COMPATIBLE</code> parameter for the CDB must be set to 12.2 or higher.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><span class="bold">To connect to the CDB and back up the application root and all its application PDBs:</span></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p></p>
                        <ol id="GUID-78023B42-87D5-40F4-A0EF-A99BAF68AE4F__OL_PWZ_VGY_JGB">
                           <li>Start RMAN and connect to the CDB root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                           </li>
                           <li>Use the following command, where <code class="codeph">hr_appcont</code> is the name of the application root:<pre class="pre codeblock"><code>BACKUP PLUGGABLE DATABASE hr_appcont</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><span class="bold">To connect to the application root and back up the application root and all its application PDBs:</span></div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to the <a href="glossary.html#GUID-CC9EB948-16BC-4AB6-A05E-08EEAFCDD05F"><span class="xrefglossterm">application root</span></a> as an application common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span><div>The application root has its own service name and you can connect to the application root in the same way that you connect to a PDB.</div>
                        </li>
                        <li class="stepexpand"><span>Use the following command to back up the <a href="glossary.html#GUID-F213CD77-8CCF-430E-AA7B-A6BA7927EC98"><span class="xrefglossterm">application container</span></a>:</span><div><pre class="pre codeblock"><code>BACKUP DATABASE;</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-78023B42-87D5-40F4-A0EF-A99BAF68AE4F__GUID-B23BCB70-4949-40F8-8683-0084CCCA16E7">
                           <p class="notep1">See Also:</p>
                           <p><a href="starting-interacting-with-rman-client.html#GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD" title="You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).">Making RMAN Connections to a CDB</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9EAA1FF9-9F42-4EDC-8A77-0C29191BAAA1" name="GUID-9EAA1FF9-9F42-4EDC-8A77-0C29191BAAA1"></a><h4 id="BRADV-GUID-9EAA1FF9-9F42-4EDC-8A77-0C29191BAAA1" class="sect4"><span class="enumeration_section">9.5.4 </span>Backing Up Application PDBs
                  </h4>
                  <div>
                     <p>The <code class="codeph">BACKUP</code> command is used to back up one or more application PDBs. 
                     </p>
                     <div class="p">
                        <p>The <code class="codeph">COMPATIBLE</code> parameter for the CDB must be set to 12.2 or higher.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><span class="bold">To back up one or more application PDBs:</span></div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and establish one of the following types of connections:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Connect to the <a href="glossary.html#GUID-CC9EB948-16BC-4AB6-A05E-08EEAFCDD05F"><span class="xrefglossterm">application root</span></a> as an application common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                                    </p>
                                    <p>The application root has its own service name and you can connect to the application root in the same way that you connect to a PDB.</p>
                                 </li>
                                 <li>
                                    <p>Connect to the CDB root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Use the <code class="codeph">BACKUP PLUGGABLE DATABASE</code> command to back up the <a href="glossary.html#GUID-6E2F65AE-C36C-446D-84D7-4F709C7DEBCE"><span class="xrefglossterm">application PDB</span></a>. To back up multiple application PDBs, use a comma-separated list of application PDB names.</span><div>
                              <p>The following command backs up an application PDB named <code class="codeph">hr_app_pdb</code>:
                              </p><pre class="pre codeblock"><code>BACKUP PLUGGABLE DATABASE hr_app_pdb;</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-9EAA1FF9-9F42-4EDC-8A77-0C29191BAAA1__GUID-158AEBBC-28BE-4683-8773-29160EB3FDA2">
                           <p class="notep1">See Also:</p>
                           <p><a href="starting-interacting-with-rman-client.html#GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD" title="You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).">Making RMAN Connections to a CDB</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-17F2020E-9C9B-4D1C-BC60-A09C3A87CF55" name="GUID-17F2020E-9C9B-4D1C-BC60-A09C3A87CF55"></a><h3 id="BRADV-GUID-17F2020E-9C9B-4D1C-BC60-A09C3A87CF55" class="sect3"><span class="enumeration_section">9.6 </span>Backing Up Sparse Databases with RMAN
               </h3>
               <div>
                  <p>Use the <code class="codeph">BACKUP</code> command to back up sparse databases.
                  </p>
                  <p></p>
                  <div class="p">This section contains the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="backing-up-database.html#GUID-E61CEE70-896E-49D0-8405-C9E4F243D4BF" title="RMAN enables you to back up a sparse database, using steps similar to backing up a whole database, in the backup set or image copy format.">Backing Up a Sparse Database with RMAN</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-0A2A3056-AD3A-4A92-B4FB-4EABB200FA42" title="You can back up one or more tablespaces containing sparse data files or individual sparse data files using the BACKUP command.">Backing Up Sparse Tablespaces and Data Files with RMAN</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-731D2F5F-9B1F-4209-8257-FD30C636998F">Backing Up a Sparse CDB with RMAN</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-4BCE971E-3860-4BDE-A052-E4D313FCB5A6" title="RMAN enables you to back up one or more sparse PDBs in a CDB.">Backing Up a Sparse PDB with RMAN</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnote" id="GUID-17F2020E-9C9B-4D1C-BC60-A09C3A87CF55__GUID-2E33F1E3-CD94-48B0-B648-801094DEFE23">
                     <p class="notep1">Note:</p>
                     <p>The base (read-only) data files in a sparse database are not encrypted. Ensure that the base data files are stored in a protected storage and accessed using secured communications.</p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E61CEE70-896E-49D0-8405-C9E4F243D4BF" name="GUID-E61CEE70-896E-49D0-8405-C9E4F243D4BF"></a><h4 id="BRADV-GUID-E61CEE70-896E-49D0-8405-C9E4F243D4BF" class="sect4"><span class="enumeration_section">9.6.1 </span>Backing Up a Sparse Database with RMAN
                  </h4>
                  <div>
                     <p>RMAN enables you to back up a sparse database, using steps similar to backing up a whole database, in the backup set or image copy format.</p>
                     <div class="section">
                        <p>The difference while backing up a sparse database is that RMAN backs up data only from the delta storage space of the database, which contains the latest changes made to the data blocks within the sparse database. </p>
                        <div class="p">Ensure you meet the following requirements before backing up a sparse database:
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The base database for your sparse database must be read-only</p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">COMPATIBLE</code> initialization parameter of the database being backed up must be set to 12.2 or higher.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E61CEE70-896E-49D0-8405-C9E4F243D4BF__GUID-978469A7-AFB2-4C95-BFA1-F990AA0FABA3">To back up a sparse database</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a>.</span><div></div>
                        </li>
                        <li class="stepexpand"><span>Ensure that the database is mounted or open.</span></li>
                        <li class="stepexpand"><span>Issue the <code class="codeph">BACKUP</code> command with the <code class="codeph">AS SPARSE</code> option. To specify your backup format, use one of the following options:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <div class="p">To create your backup in the backup set format, use the <code class="codeph">AS SPARSE BACKUPSET</code> option. The following example performs a sparse backup in the backup set format:<pre class="pre codeblock"><code>BACKUP AS SPARSE BACKUPSET DATABASE PLUS ARCHIVELOG;</code></pre></div>
                                 </li>
                                 <li>
                                    <div class="p">To create your backup in the image copy format use the <code class="codeph">AS SPARSE COPY</code> option. The following example performs a backup in the image copy format:<pre class="pre codeblock"><code>BACKUP AS SPARSE COPY DATABASE PLUS ARCHIVELOG;</code></pre></div>
                                 </li>
                                 <li>
                                    <div class="p">To create your backup in the compressed backup set format use the <code class="codeph">COMPRESSED BACKUPSET</code> option. The following example performs a backup in the compressed backups set format:<pre class="pre codeblock"><code>BACKUP AS SPARSE COMPRESSED BACKUPSET DATABASE;</code></pre></div>
                                 </li>
                              </ul>
                              <div class="infoboxnotealso" id="GUID-E61CEE70-896E-49D0-8405-C9E4F243D4BF__GUID-66CEE34A-5872-4BF8-95A4-04F1E4931675">
                                 <p class="notep1">See Also:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><a href="rman-backup-concepts.html#GUID-D0AEBAF2-FDEA-4977-9B4D-97759A1CA865" title="You can use the RMAN BACKUP command to back up data blocks from sparse data files, tablespaces containing sparse data files, sparse pluggable databases (PDBs), and multitenant container databases (CDBs) containing sparse PDBs.">About Sparse Backups</a> for more information on sparse backups
                                       </p>
                                    </li>
                                    <li>
                                       <p><a href="backing-up-database.html#GUID-D7EC8119-A260-4300-8756-F53DBC2C2D45" title="You can perform a whole database backup with the database mounted or open.">Backing Up a Whole Database with RMAN</a> for more information on how to perform a traditional backup on a normal database
                                       </p>
                                    </li>
                                    <li>
                                       <p><a href="backing-up-database.html#GUID-0A2A3056-AD3A-4A92-B4FB-4EABB200FA42" title="You can back up one or more tablespaces containing sparse data files or individual sparse data files using the BACKUP command.">Backing Up Sparse Tablespaces and Data Files with RMAN</a></p>
                                    </li>
                                    <li>
                                       <p><a href="rman-complete-database-recovery.html#GUID-C8453C47-BA71-4272-B0D4-BC7B97EC2584" title="Performing recovery of a database containing sparse data files is very similar to performing recovery of a whole database.">Performing Complete Recovery of a Sparse Database</a></p>
                                    </li>
                                 </ul>
                              </div>
                              <div class="infoboxnotealso" id="GUID-E61CEE70-896E-49D0-8405-C9E4F243D4BF__GUID-1700583F-8783-4E12-8AC5-D7E4634D8428">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="italic"><a href="../rcmrf/BACKUP.html#RCMRF-GUID-73642FF2-43C5-48B2-9969-99001C52EB50" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a></span> for more information on the options to back up sparse databases
                                 </p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-0A2A3056-AD3A-4A92-B4FB-4EABB200FA42" name="GUID-0A2A3056-AD3A-4A92-B4FB-4EABB200FA42"></a><h4 id="BRADV-GUID-0A2A3056-AD3A-4A92-B4FB-4EABB200FA42" class="sect4"><span class="enumeration_section">9.6.2 </span>Backing Up Sparse Tablespaces and Data Files with RMAN
                  </h4>
                  <div>
                     <p>You can back up one or more tablespaces containing sparse data files or individual sparse data files using the <code class="codeph">BACKUP</code> command. 
                     </p>
                     <div class="section">While backing up tablespaces, RMAN translates the <code class="codeph">BACKUP</code> command to individual data files that are sparse compatible. Similarly, only data files containing sparse data blocks are eligible for a sparse backup. RMAN creates sparse backups of sparse data files and non-sparse backups of non-sparse data files.
                     </div>
                     <!-- class="section" -->
                     <div class="p">Ensure that the database containing the sparse tablespace or data file has the <code class="codeph">COMPATIBLE</code> initialization parameter set to 12.2 or higher.
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A2A3056-AD3A-4A92-B4FB-4EABB200FA42__GUID-31D7A2D3-7787-402A-B265-BC26A2BA79EF">To back up sparse tablespaces or data files:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database. For tablespaces and data files in CDB, you must connect to the root as a user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span><div>
                              <div class="infoboxnotealso" id="GUID-0A2A3056-AD3A-4A92-B4FB-4EABB200FA42__GUID-6AA90B4E-0469-4661-A457-3DAECA20B68D">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a> for information about connecting to a target database
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Ensure that the database instance is mounted or open.</span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">BACKUP</code> command for the tablespace or data file with the <code class="codeph">AS SPARSE</code> option. Specify whether you want the backup in the backup set format, image copy format, or compressed backup set format. To do this, state one of the following options:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <div class="p">To create your backup in the backup set format, use the <code class="codeph">AS SPARSE BACKUPSET</code> option. The following example performs a sparse backup in the backup set format:<pre class="pre codeblock"><code>BACKUP AS SPARSE BACKUPSET TABLESPACE MYTBS1;</code></pre></div>
                                 </li>
                                 <li>
                                    <div class="p">To create your backup in the image copy format use the <code class="codeph">AS SPARSE COPY</code> option. The following example performs a backup in the image copy format:<pre class="pre codeblock"><code>BACKUP AS SPARSE COPY DATAFILE 8,9,10;</code></pre></div>
                                 </li>
                                 <li>
                                    <div class="p">To create your backup in the compressed backup set format use the <code class="codeph">COMPRESSED BACKUPSET</code> option. The following example performs a backup in the compressed backups set format:<pre class="pre codeblock"><code>BACKUP AS SPARSE COMPRESSED BACKUPSET TABLESPACE MYTBS3;</code></pre></div>
                                 </li>
                              </ul>
                              <div class="infoboxnotealso" id="GUID-0A2A3056-AD3A-4A92-B4FB-4EABB200FA42__GUID-910D6C32-953A-4D66-B10D-B8CAA8D6A6D6">
                                 <p class="notep1">See Also:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><a href="backing-up-database.html#GUID-E61CEE70-896E-49D0-8405-C9E4F243D4BF" title="RMAN enables you to back up a sparse database, using steps similar to backing up a whole database, in the backup set or image copy format.">Backing Up a Sparse Database with RMAN</a></p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a></span></p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-731D2F5F-9B1F-4209-8257-FD30C636998F" name="GUID-731D2F5F-9B1F-4209-8257-FD30C636998F"></a><h4 id="BRADV-GUID-731D2F5F-9B1F-4209-8257-FD30C636998F" class="sect4"><span class="enumeration_section">9.6.3 </span>Backing Up a Sparse CDB with RMAN
                  </h4>
                  <div>
                     <div class="section">You can back up a sparse multitenant container database (CDB) or a CDB containing some sparse pluggable databases (PDBs) by performing a backup operation similar to backing up a sparse database using the <code class="codeph">BACKUP</code> command. 
                     </div>
                     <!-- class="section" -->
                     <div class="p">Ensure that the <code class="codeph">COMPATIBLE</code> initialization parameter of your CDB is set to 12.2 or higher.
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-731D2F5F-9B1F-4209-8257-FD30C636998F__GUID-BF30ED66-CD16-404E-BC04-076074E28536">To back up a sparse CDB:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to root as a common user with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege.</span></li>
                        <li class="stepexpand"><span>Ensure that the CDB is mounted or open and in <code class="codeph">ARCHIVELOG</code> mode.</span></li>
                        <li class="stepexpand"><span>Enter the <code class="codeph">BACKUP</code> command with the <code class="codeph">AS SPARSE</code> option. Specify which format you want to create your backup in: </span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <div class="p">To create your backup in the backup set format, use the <code class="codeph">AS SPARSE BACKUPSET</code> option. The following example performs a backup on the sparse CDB in the backup set format:<pre class="pre codeblock"><code>BACKUP AS SPARSE BACKUPSET DATABASE;</code></pre></div>
                                 </li>
                                 <li>
                                    <div class="p">To create your backup in the image copy format use the <code class="codeph">AS SPARSE COPY</code> option. The following example performs a backup on the sparse CDB in the image copy format:<pre class="pre codeblock"><code>BACKUP AS SPARSE COPY DATABASE;</code></pre></div>
                                 </li>
                                 <li>
                                    <div class="p">To create your backup in the compressed backup set format use the <code class="codeph">COMPRESSED BACKUPSET</code> option. The following example performs a backup on the sparse CDB in the compressed backups set format:<pre class="pre codeblock"><code>BACKUP AS SPARSE COMPRESSED BACKUPSET DATABASE;</code></pre></div>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-731D2F5F-9B1F-4209-8257-FD30C636998F__GUID-3F18313D-B01D-48E4-AB10-1DC6D955119A">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="backing-up-database.html#GUID-E61CEE70-896E-49D0-8405-C9E4F243D4BF" title="RMAN enables you to back up a sparse database, using steps similar to backing up a whole database, in the backup set or image copy format.">Backing Up a Sparse Database with RMAN</a></p>
                              </li>
                              <li>
                                 <p><a href="rman-complete-database-recovery.html#GUID-9E0A0ABF-4DC9-4DF6-9015-004868ACB01C" title="Performing recovery of a sparse CDB is very similar to performing the complete recovery of a sparse database.">Performing Complete Recovery of a Sparse CDB</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4BCE971E-3860-4BDE-A052-E4D313FCB5A6" name="GUID-4BCE971E-3860-4BDE-A052-E4D313FCB5A6"></a><h4 id="BRADV-GUID-4BCE971E-3860-4BDE-A052-E4D313FCB5A6" class="sect4"><span class="enumeration_section">9.6.4 </span>Backing Up a Sparse PDB with RMAN
                  </h4>
                  <div>
                     <p>RMAN enables you to back up one or more sparse PDBs in a CDB. </p>
                     <div class="p">Ensure that the <code class="codeph">COMPATIBLE</code> initialization parameter is set to 12.2 or higher.
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4BCE971E-3860-4BDE-A052-E4D313FCB5A6__GUID-1DA3E499-9362-4B9B-A63A-8545A0E3A91E">To back up a sparse PDB while connected to root:</p>
                        <ol>
                           <li>
                              <p>Start RMAN and connect to the root as a common user with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege as described in <a href="starting-interacting-with-rman-client.html#GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D" title="There are several ways to connect as target to the root.">Connecting as Target to the Root</a>.
                              </p>
                           </li>
                           <li>
                              <div class="p">Run the <code class="codeph">BACKUP</code> command for the pluggable database. Specify the format for your backup:
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <div class="p">To create your backup in the backup set format, use the <code class="codeph">AS SPARSE BACKUPSET</code> option. The following example performs a sparse backup in the backup set format:<pre class="pre codeblock"><code>BACKUP AS SPARSE BACKUPSET PLUGGABLE DATABASE PDB1;</code></pre></div>
                                    </li>
                                    <li>
                                       <div class="p">To create your backup in the image copy format use the <code class="codeph">AS SPARSE COPY</code> option. The following example performs a backup in the image copy format:<pre class="pre codeblock"><code>BACKUP AS SPARSE COPY PLUGGABLE DATABASE PDB1;</code></pre></div>
                                    </li>
                                    <li>
                                       <div class="p">To create your backup in the compressed backup set format use the <code class="codeph">COMPRESSED BACKUPSET</code> option. The following example performs a backup in the compressed backups set format:<pre class="pre codeblock"><code>BACKUP AS SPARSE COMPRESSED BACKUPSET PLUGGABLE DATABASE PDB1;</code></pre></div>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4BCE971E-3860-4BDE-A052-E4D313FCB5A6__GUID-2158B9B7-A413-40FF-A734-9D62D0A41236">To back up a sparse PDB while connected to the PDB:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN. Connect to the sparse PDB as a <a href="glossary.html#GUID-43EA1A4C-E5EB-4926-99EC-1DDA0E74A07C"><span class="xrefglossterm">local user</span></a> with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege as described in <a href="starting-interacting-with-rman-client.html#GUID-E95C5C27-C036-4773-B77C-E4120526F422" title="You can connect to a PDB either from the RMAN prompt or the operating system command line.">Connecting as Target to a PDB</a>.</span><div></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">BACKUP</code> command at the RMAN prompt, with the <code class="codeph">AS SPARSE</code> option and the format required. To specify the format for your backup, use one of the following commands:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <div class="p">To create your backup in the backup set format, use the <code class="codeph">AS SPARSE BACKUPSET</code> option. The following example performs a sparse backup in the backup set format:<pre class="pre codeblock"><code>BACKUP AS SPARSE BACKUPSET DATABASE;</code></pre></div>
                                 </li>
                                 <li>
                                    <div class="p">To create your backup in the image copy format use the <code class="codeph">AS SPARSE COPY</code> option. The following example performs a backup in the image copy format:<pre class="pre codeblock"><code>BACKUP AS SPARSE COPY DATABASE;</code></pre></div>
                                 </li>
                                 <li>
                                    <div class="p">To create your backup in the compressed backup set format use the <code class="codeph">COMPRESSED BACKUPSET</code> option. The following example performs a backup in the compressed backups set format:<pre class="pre codeblock"><code>BACKUP AS SPARSE COMPRESSED BACKUPSET DATABASE;</code></pre></div>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>To back up a tablespace from a sparse PDB, connect to the selected PDB directly and then run the <code class="codeph">BACKUP</code> command with the <code class="codeph">AS SPARSE</code> option, the appropriate backup format, and the tablespace name. </span></li>
                        <li class="stepexpand"><span>To back up a data file from a sparse PDB, you can either connect to root or directly to the PDB. Run the <code class="codeph">BACKUP</code> command with the <code class="codeph">AS SPARSE</code> option, the backup format, and the data file name, to back up an individual data file.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-4BCE971E-3860-4BDE-A052-E4D313FCB5A6__GUID-6379A333-5C78-4A01-8455-98166E5ABE27">
                           <p class="notep1">See Also:</p>
                           <p><a href="backing-up-database.html#GUID-655DC5F5-FF8D-4A73-B67D-F5AAE20CA382" title="RMAN enables you to back up one or more PDBs in a CDB using the BACKUP command.">Backing Up PDBs with RMAN</a></p>
                           <p><a href="rman-complete-database-recovery.html#GUID-C7DF025E-B8DF-4686-876D-AAE28E7869CF" title="You can recover a sparse PDB while you are connected at the root level or at the CDB level.">Performing Recovery of a Sparse PDB with RMAN</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV81399"></a><div class="props_rev_3"><a id="GUID-4481CA5F-B1B5-4819-9E6B-7184951EC81A" name="GUID-4481CA5F-B1B5-4819-9E6B-7184951EC81A"></a><h3 id="BRADV-GUID-4481CA5F-B1B5-4819-9E6B-7184951EC81A" class="sect3"><span class="enumeration_section">9.7 </span>Backing Up Archived Redo Logs with RMAN
               </h3>
               <div>
                  <p>Archived redo logs are the key to successful media recovery. You should back them up regularly.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="backing-up-database.html#GUID-344774AE-65ED-49CB-A0EE-021E2C60102E" title="Several features of RMAN backups are specific to archived redo logs. For example, you can use BACKUP ... DELETE to delete one or all copies of archived redo logs from disk after backing them up to backup sets.">About Backups of Archived Redo Logs for non-CDBs</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-2E06F006-55ED-46EA-A3CD-35DD34E067C9" title="In a CDB, archived redo logs can be backed up only when you connect to the root as a common user with the SYSDBA or SYSBACKUP privilege.">About Backup of Archived Redo Logs in CDBs</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-66760DDA-F264-4ECC-9FDF-861FF8032F0C" title="To back up archived logs, use the BACKUP ARCHIVELOG command.">Backing Up Archived Redo Log Files in non-CDBs</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-4AA2DE00-B80B-47CE-8861-8733C120E8E2" title="You can indicate that RMAN should automatically skip backups of archived redo logs.">Backing Up Only Archived Redo Logs That Need Backups in non-CDBs</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-82593941-EA75-4BB0-A001-3B086C6B72EA" title="You can back up archived redo logs in a multitenant container database (CDB) by using the BACKUP ARCHIVELOG command.">Backing Up Archived Redo Logs in CDBs</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-E99C2A06-868F-458A-88F1-B257EADD63CB" title="The BACKUP ARCHIVELOG ... DELETE INPUT command deletes archived log files after they are backed up. This command eliminates the separate step of manually deleting archived redo logs.">Deleting Archived Redo Logs After Backups in non-CDBs</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-3ABF5B11-71BA-4161-8CC1-DE7C33EDE853" title="In a CDB, you can delete archived redo logs after they are backed up by using the BACKUP ARCHIVELOG ... DELETE INPUT command.">Deleting Archived Redo Logs After Backups in CDBs</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89520"></a><div class="props_rev_3"><a id="GUID-344774AE-65ED-49CB-A0EE-021E2C60102E" name="GUID-344774AE-65ED-49CB-A0EE-021E2C60102E"></a><h4 id="BRADV-GUID-344774AE-65ED-49CB-A0EE-021E2C60102E" class="sect4"><span class="enumeration_section">9.7.1 </span>About Backups of Archived Redo Logs for non-CDBs
                  </h4>
                  <div>
                     <p>Several features of RMAN backups are specific to archived redo logs. For example, you can use <code class="codeph">BACKUP ... DELETE</code> to delete one or all copies of archived redo logs from disk after backing them up to backup sets. 
                     </p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="backing-up-database.html#GUID-2AC0D66D-D261-432E-8E28-FD3030C4AB0C" title="Even if your redo logs are being archived to multiple destinations and you use RMAN to back up archived redo logs, RMAN selects only one copy of the archived redo log file to include in the backup set. Because logs with the same log sequence number are identical, RMAN does not need to include more than one log copy.">About Archived Redo Log Failover</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-5A2AEEA4-CB81-421A-8C4A-805B92DBD8FA" title="Automatic online redo log switching is an important RMAN feature.">About Online Redo Log Switching</a></p>
                        </li>
                     </ul>
                  </div><a id="BRADV232"></a><a id="BRADV89521"></a><div class="props_rev_3"><a id="GUID-2AC0D66D-D261-432E-8E28-FD3030C4AB0C" name="GUID-2AC0D66D-D261-432E-8E28-FD3030C4AB0C"></a><h5 id="BRADV-GUID-2AC0D66D-D261-432E-8E28-FD3030C4AB0C" class="sect5"><span class="enumeration_section">9.7.1.1 </span>About Archived Redo Log Failover
                     </h5>
                     <div>
                        <p>Even if your redo logs are being archived to multiple destinations and you use RMAN to back up archived redo logs, RMAN selects only one copy of the archived redo log file to include in the backup set. Because logs with the same log sequence number are identical, RMAN does not need to include more than one log copy.</p>
                        <p>The <a href="glossary.html#GUID-DFD7F339-C64C-4FE2-8F89-C88B4A020571"><span class="xrefglossterm">archived redo log failover</span></a> feature enables RMAN to complete a backup even when some archiving destinations are missing logs or contain logs with corrupt blocks. If at least one log corresponding to a given log sequence and thread is available in the fast recovery area or any of the archiving destinations, then RMAN tries to back it up. If RMAN finds a corrupt block in a log file during backup, it searches other destinations for a copy of that log without corrupt blocks.
                        </p>
                        <p>For example, assume that you archive logs 121 through 124 to two destinations: <code class="codeph">/arch1</code> and <code class="codeph">/arch2</code>. <a href="backing-up-database.html#GUID-2AC0D66D-D261-432E-8E28-FD3030C4AB0C__CHDHDGAE" title="Sampled archived redo log records">Table 9-1</a> shows the archived redo log records in the control file.
                        </p>
                        <div class="tblformal" id="GUID-2AC0D66D-D261-432E-8E28-FD3030C4AB0C__CHDHDGAE">
                           <p class="titleintable">Table 9-1 Sample Archived Redo Log Records</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Sample Archived Redo Log Records" summary="Sampled archived redo log records" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="14%" id="d40792e7300">Sequence</th>
                                    <th align="left" valign="bottom" width="43%" id="d40792e7303">File Name in /arch1</th>
                                    <th align="left" valign="bottom" width="43%" id="d40792e7306">File Name in /arch2</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d40792e7311" headers="d40792e7300 ">
                                       <p>121</p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d40792e7311 d40792e7303 ">
                                       <p><code class="codeph">/arch1/archive1_121.arc</code></p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d40792e7311 d40792e7306 ">
                                       <p><code class="codeph">/arch2/archive1_121.arc</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d40792e7323" headers="d40792e7300 ">
                                       <p>122</p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d40792e7323 d40792e7303 ">
                                       <p><code class="codeph">/arch1/archive1_122.arc</code></p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d40792e7323 d40792e7306 ">
                                       <p><code class="codeph">/arch2/archive1_122.arc</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d40792e7335" headers="d40792e7300 ">
                                       <p>123</p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d40792e7335 d40792e7303 ">
                                       <p><code class="codeph">/arch1/archive1_123.arc</code></p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d40792e7335 d40792e7306 ">
                                       <p><code class="codeph">/arch2/archive1_123.arc</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d40792e7347" headers="d40792e7300 ">
                                       <p>124</p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d40792e7347 d40792e7303 ">
                                       <p><code class="codeph">/arch1/archive1_124.arc</code></p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d40792e7347 d40792e7306 ">
                                       <p><code class="codeph">/arch2/archive1_124.arc</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>However, unknown to RMAN, a user deletes logs 122 and 124 from the <code class="codeph">/arch1</code> directory. Afterward, you run the following backup:
                        </p><pre class="pre codeblock"><code>BACKUP ARCHIVELOG
  FROM  SEQUENCE 121 
  UNTIL SEQUENCE 125;
</code></pre><p>With failover, RMAN completes the backup, using logs 122 and 124 in <code class="codeph">/arch2</code>.
                        </p>
                     </div>
                  </div><a id="BRADV89523"></a><div class="props_rev_3"><a id="GUID-5A2AEEA4-CB81-421A-8C4A-805B92DBD8FA" name="GUID-5A2AEEA4-CB81-421A-8C4A-805B92DBD8FA"></a><h5 id="BRADV-GUID-5A2AEEA4-CB81-421A-8C4A-805B92DBD8FA" class="sect5"><span class="enumeration_section">9.7.1.2 </span>About Online Redo Log Switching
                     </h5>
                     <div>
                        <p>Automatic online redo log switching is an important RMAN feature. </p>
                        <p>To make an open database backup of archived redo logs that includes the most recent online redo log, you can execute the <code class="codeph">BACKUP</code> command with any of the following clauses:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">PLUS ARCHIVELOG</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ARCHIVELOG ALL</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ARCHIVELOG FROM ...</code></p>
                           </li>
                        </ul>
                        <p>Before beginning the backup, RMAN switches out of the current redo log group, and archives all online redo logs that have not yet been archived, up to and including the redo log group that was current when the command was issued. This feature ensures that the backup contains all redo generated before the start of the command.</p>
                        <p>An effective way of backing up archived redo logs is the <code class="codeph">BACKUP</code> <code class="codeph">...</code> <code class="codeph">PLUS</code> <code class="codeph">ARCHIVELOG</code> command, which causes RMAN to do the following:
                        </p>
                        <ol>
                           <li>
                              <p>Run the <a href="../sqlrf/ALTER-SYSTEM.html#SQLRF00902" target="_blank"><code class="codeph">ALTER SYSTEM</code></a> <code class="codeph">ARCHIVE</code> <code class="codeph">LOG</code> <code class="codeph">CURRENT</code> statement.
                              </p>
                           </li>
                           <li>
                              <p>Run <code class="codeph">BACKUP ARCHIVELOG ALL</code> . If <a href="glossary.html#GUID-C75B395F-CA6E-4286-826B-67AABE99606A"><span class="xrefglossterm">backup optimization</span></a> is enabled, then RMAN skips logs that it has already backed up to the specified device.
                              </p>
                           </li>
                           <li>
                              <p>Back up the rest of the files specified in the <code class="codeph">BACKUP</code> command.
                              </p>
                           </li>
                           <li>
                              <p>Run the <code class="codeph">ALTER SYSTEM ARCHIVE LOG CURRENT</code> statement.
                              </p>
                           </li>
                           <li>
                              <p>Back up any remaining archived logs generated during the backup. If backup optimization is not enabled, then RMAN backs up the logs generated in Step 1 plus all the logs generated during the backup.</p>
                           </li>
                        </ol>
                        <p>The preceding steps guarantee that data file backups taken during the command are recoverable to a consistent state. Also, unless the online redo log is archived at the end of the backup, <code class="codeph">DUPLICATE</code> is not possible with the backup.
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV835"></a><div class="props_rev_3"><a id="GUID-2E06F006-55ED-46EA-A3CD-35DD34E067C9" name="GUID-2E06F006-55ED-46EA-A3CD-35DD34E067C9"></a><h4 id="BRADV-GUID-2E06F006-55ED-46EA-A3CD-35DD34E067C9" class="sect4"><span class="enumeration_section">9.7.2 </span>About Backup of Archived Redo Logs in CDBs
                  </h4>
                  <div>
                     <p>In a CDB, archived redo logs can be backed up only when you connect to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege. 
                     </p>
                     <p>When you connect to a PDB as a local user with <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege, you cannot back up or delete archived redo logs.
                     </p>
                     <p>If your archived redo logs are being copied to multiple destinations, when you connect to the root and backup archived redo log files, RMAN includes only one copy of the archived redo log files in a backup. You can switch archived redo log files when you connect to root of a CDB. Therefore, the information in <span class="q">"<a href="backing-up-database.html#GUID-2AC0D66D-D261-432E-8E28-FD3030C4AB0C" title="Even if your redo logs are being archived to multiple destinations and you use RMAN to back up archived redo logs, RMAN selects only one copy of the archived redo log file to include in the backup set. Because logs with the same log sequence number are identical, RMAN does not need to include more than one log copy.">About Archived Redo Log Failover</a>"</span> and <span class="q">"<a href="backing-up-database.html#GUID-5A2AEEA4-CB81-421A-8C4A-805B92DBD8FA" title="Automatic online redo log switching is an important RMAN feature.">About Online Redo Log Switching</a>"</span> is applicable when you connect to the root. However, you cannot backup or switch archived redo log files when connected to a PDB.
                     </p>
                     <div class="infoboxnotealso" id="GUID-2E06F006-55ED-46EA-A3CD-35DD34E067C9__GUID-CDBE0F48-A5A5-4FD4-892D-770DF24C00F8">
                        <p class="notep1">See Also:</p>
                        <p><a href="backing-up-database.html#GUID-82593941-EA75-4BB0-A001-3B086C6B72EA" title="You can back up archived redo logs in a multitenant container database (CDB) by using the BACKUP ARCHIVELOG command.">Backing Up Archived Redo Logs in CDBs</a></p>
                     </div>
                  </div>
               </div><a id="BRADV611"></a><a id="BRADV89525"></a><div class="props_rev_3"><a id="GUID-66760DDA-F264-4ECC-9FDF-861FF8032F0C" name="GUID-66760DDA-F264-4ECC-9FDF-861FF8032F0C"></a><h4 id="BRADV-GUID-66760DDA-F264-4ECC-9FDF-861FF8032F0C" class="sect4"><span class="enumeration_section">9.7.3 </span>Backing Up Archived Redo Log Files in non-CDBs
                  </h4>
                  <div>
                     <p>To back up archived logs, use the <code class="codeph">BACKUP</code> <code class="codeph">ARCHIVELOG</code> command.
                     </p>
                     <div class="section">
                        <p>If <a href="glossary.html#GUID-C75B395F-CA6E-4286-826B-67AABE99606A"><span class="xrefglossterm">backup optimization</span></a> is enabled, then RMAN skips backups of archived logs that have already been backed up to the specified device.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-66760DDA-F264-4ECC-9FDF-861FF8032F0C__GUID-1DFBA5B2-6D14-416E-848B-6979481368EF">To back up archived redo log files:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and a recovery catalog (if used) as described in <a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a>.</span></li>
                        <li class="stepexpand"><span>Ensure that the target database is mounted or open.</span></li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">BACKUP ARCHIVELOG</code> or <code class="codeph">BACKUP ... PLUS ARCHIVELOG</code> command.</span><div>
                              <p>The following example backs up the database and all archived redo logs:</p><pre class="pre codeblock"><code>BACKUP DATABASE PLUS ARCHIVELOG;
</code></pre><p>The following example uses a configured disk or SBT channel to back up one copy of each log sequence number for all archived redo logs:</p><pre class="pre codeblock"><code>BACKUP ARCHIVELOG ALL;
</code></pre><p>You can also specify a range of archived redo logs by time, SCN, or log sequence number, as in the following example:</p><pre class="pre codeblock"><code>BACKUP ARCHIVELOG 
  FROM TIME  'SYSDATE-30'
  UNTIL TIME 'SYSDATE-7';</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV234"></a><a id="BRADV89522"></a><div class="props_rev_3"><a id="GUID-4AA2DE00-B80B-47CE-8861-8733C120E8E2" name="GUID-4AA2DE00-B80B-47CE-8861-8733C120E8E2"></a><h4 id="BRADV-GUID-4AA2DE00-B80B-47CE-8861-8733C120E8E2" class="sect4"><span class="enumeration_section">9.7.4 </span>Backing Up Only Archived Redo Logs That Need Backups in non-CDBs
                  </h4>
                  <div>
                     <p>You can indicate that RMAN should <span class="italic">automatically</span> skip backups of archived redo logs.
                     </p>
                     <div class="section">
                        <p>Use one of the following techniques:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Configure <a href="glossary.html#GUID-C75B395F-CA6E-4286-826B-67AABE99606A"><span class="xrefglossterm">backup optimization</span></a>.
                              </p>
                              <p>If you enable backup optimization, then the <a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><code class="codeph">BACKUP ARCHIVELOG</code></a> command skips backing up files when an identical archived log has been backed up to the specified device type. An archived log is considered identical to another when it has the same DBID, thread, sequence number, and <code class="codeph">RESETLOGS</code> SCN and time.
                              </p>
                           </li>
                           <li>
                              <p>Configure an <a href="glossary.html#GUID-3492E0C3-F42C-45E6-84E2-63E30A3489A4"><span class="xrefglossterm">archived redo log deletion policy</span></a>.
                              </p>
                              <p>If the deletion policy is configured with the <code class="codeph">BACKED UP</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TIMES</code> clause, then a <code class="codeph">BACKUP ARCHIVELOG</code> command copies the logs unless <span class="italic"><code class="codeph">integer</code></span> backups exist on the specified device type. If <span class="italic"><code class="codeph">integer</code></span> backups of the logs exist, then the <code class="codeph">BACKUP ARCHIVELOG</code> command skips the logs.
                              </p>
                           </li>
                        </ul>
                        <p>The <code class="codeph">BACKUP ... NOT BACKED UP</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TIMES</code> command specifies that RMAN backs up only those archived log files that have not been backed up at least <span class="italic"><code class="codeph">integer</code></span> times to the specified device. To determine the number of backups for a file, RMAN only considers backups created on the same device type as the current backup.
                        </p>
                        <p>The <code class="codeph">BACKED UP</code> clause is a convenient way to back up archived logs to a specified device type. For example, you can specify that RMAN should keep two copies of each archived redo log on tape and skip additional backups.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4AA2DE00-B80B-47CE-8861-8733C120E8E2__GUID-36CFB441-ED8B-49C4-82CC-C7AA13EFC3D8">To back up archived redo logs that need backups:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and a recovery catalog (if used) as described in <a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a>.</span></li>
                        <li class="stepexpand"><span>Ensure that the target database is mounted or open.</span></li>
                        <li class="stepexpand"><span>Ensure that appropriate channels are configured for the backup.</span></li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">BACKUP ARCHIVELOG</code> command with the <code class="codeph">NOT BACKED UP</code> clause.</span><div><pre class="pre codeblock"><code>BACKUP ARCHIVELOG ALL NOT BACKED UP 2 TIMES;</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-4AA2DE00-B80B-47CE-8861-8733C120E8E2__GUID-798A7CD8-F06B-4EA8-8B66-FA0D140B63D5">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="configuring-rman-client-basic.html#GUID-914A65A7-872E-465B-95E5-0FD5ADAF6A9C" title="Run the RMAN CONFIGURE command to enable and disable backup optimization. Backup optimization skips the backup of files in certain circumstances if the identical file or an identical version of the file has been backed up.">Backup Optimization and the CONFIGURE command</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-rman-client-basic.html#GUID-FA142760-8ACB-43DA-939C-8407618D2D0F" title="You can use RMAN to create a persistent configuration that governs when archived redo logs are eligible for deletion from disk.">Configuring an Archived Redo Log Deletion Policy</a></p>
                              </li>
                              <li>
                                 <p><a href="backing-up-database-advanced.html#GUID-BC32C333-F0EB-4F17-AD79-8882E224D2F4" title="You run the CONFIGURE BACKUP OPTIMIZATION command to enable backup optimization. When certain criteria are met, RMAN skips backups of files that are identical to files that are already backed up.">Using Backup Optimization to Skip Files</a> for scenarios using <code class="codeph">NOT BACKED UP</code></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV837"></a><a id="BRADV838"></a><a id="BRADV836"></a><div class="props_rev_3"><a id="GUID-82593941-EA75-4BB0-A001-3B086C6B72EA" name="GUID-82593941-EA75-4BB0-A001-3B086C6B72EA"></a><h4 id="BRADV-GUID-82593941-EA75-4BB0-A001-3B086C6B72EA" class="sect4"><span class="enumeration_section">9.7.5 </span>Backing Up Archived Redo Logs in CDBs
                  </h4>
                  <div>
                     <p>You can back up archived redo logs in a multitenant container database (CDB) by using the <code class="codeph">BACKUP ARCHIVELOG</code> command.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-82593941-EA75-4BB0-A001-3B086C6B72EA__GUID-ACE0900F-F961-47C1-9B24-91208621AE8D">To back up archived redo logs in a CDB:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>Start RMAN and connect to the root as a user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege as described in <a href="starting-interacting-with-rman-client.html#GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D" title="There are several ways to connect as target to the root.">Connecting as Target to the Root</a>.
                              </p>
                           </li>
                           <li>
                              <p>Ensure that the target CDB is mounted or open.</p>
                           </li>
                           <li>
                              <p>Execute the <code class="codeph">BACKUP ARCHIVELOG</code> or <code class="codeph">BACKUP ... PLUS ARCHIVELOG</code> command.
                              </p>
                              <p>The following example backs up the database and all archived redo logs:</p><pre class="pre codeblock"><code>BACKUP DATABASE PLUS ARCHIVELOG;
</code></pre><p>The following example uses a configured disk or SBT channel to back up one copy of each log sequence number for all archived redo logs:</p><pre class="pre codeblock"><code>BACKUP ARCHIVELOG ALL;
</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-82593941-EA75-4BB0-A001-3B086C6B72EA__GUID-0A3BE9A7-3C95-4538-A083-530AF066FD8E">To back up only archived redo logs that need backup in a CDB:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>Start RMAN and connect to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>Ensure that the target CDB is mounted or open.</p>
                           </li>
                           <li>
                              <p>Ensure that appropriate channels are configured for the backup.</p>
                           </li>
                           <li>
                              <p>Configure RMAN to automatically skip backups of archived redo logs. Use one of the following techniques:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Configure backup optimization so that the <code class="codeph">BACKUP ARCHIVELOG</code> command skips backing up files when an identical archived log has been backed up to the specified device type.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Configure an archived redo log retention policy using the <code class="codeph">BACKED UP</code> <span class="italic">integer</span> <code class="codeph">TIMES</code> clause. A <code class="codeph">BACKUP ARCHIVELOG</code> command will copy the logs unless <span class="italic">integer</span> backups exist on the specified device type.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Execute the <code class="codeph">BACKUP ARCHIVELOG</code> command with the <code class="codeph">NOT BACKED UP</code> clause.
                              </p><pre class="pre codeblock"><code>BACKUP ARCHIVELOG ALL NOT BACKED UP 2 TIMES;</code></pre></li>
                        </ol>
                        <div class="infoboxnotealso" id="GUID-82593941-EA75-4BB0-A001-3B086C6B72EA__GUID-4AB728C9-496D-45EB-A4FE-DC57172A635A">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="backing-up-database.html#GUID-2E06F006-55ED-46EA-A3CD-35DD34E067C9" title="In a CDB, archived redo logs can be backed up only when you connect to the root as a common user with the SYSDBA or SYSBACKUP privilege.">About Backup of Archived Redo Logs in CDBs</a></p>
                              </li>
                              <li>
                                 <p><a href="backing-up-database.html#GUID-4AA2DE00-B80B-47CE-8861-8733C120E8E2" title="You can indicate that RMAN should automatically skip backups of archived redo logs.">Backing Up Only Archived Redo Logs That Need Backups in non-CDBs</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV235"></a><a id="BRADV89524"></a><div class="props_rev_3"><a id="GUID-E99C2A06-868F-458A-88F1-B257EADD63CB" name="GUID-E99C2A06-868F-458A-88F1-B257EADD63CB"></a><h4 id="BRADV-GUID-E99C2A06-868F-458A-88F1-B257EADD63CB" class="sect4"><span class="enumeration_section">9.7.6 </span>Deleting Archived Redo Logs After Backups in non-CDBs
                  </h4>
                  <div>
                     <p>The <code class="codeph">BACKUP ARCHIVELOG</code> <code class="codeph">... DELETE INPUT</code> command deletes archived log files after they are backed up. This command eliminates the separate step of manually deleting archived redo logs. 
                     </p>
                     <div class="section">
                        <p>With <code class="codeph">DELETE INPUT</code>, RMAN deletes only the specific copy of the archived log chosen for the backup set. With <code class="codeph">DELETE ALL INPUT</code>, RMAN deletes each backed-up archived redo log file from all log archiving destinations.
                        </p>
                        <p>The <code class="codeph">BACKUP ... DELETE INPUT</code> and <code class="codeph">DELETE ARCHIVELOG</code> commands obey the <a href="glossary.html#GUID-3492E0C3-F42C-45E6-84E2-63E30A3489A4"><span class="xrefglossterm">archived redo log deletion policy</span></a> for logs in all archiving locations. For example, if you specify that logs be deleted only when backed up at least twice to tape, then <code class="codeph">BACKUP ... DELETE</code> honors this policy.
                        </p>
                        <p>For the following procedure, assume that you archive to <code class="codeph">/arc_dest1</code>, <code class="codeph">/arc_dest2</code>, and the fast recovery area.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E99C2A06-868F-458A-88F1-B257EADD63CB__GUID-5C647184-B49F-42A7-90B5-950079C8140D">To delete archived redo logs after a backup:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and a recovery catalog (if used) as described in <a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a>.</span></li>
                        <li class="stepexpand"><span>Ensure that the target database is mounted or open.</span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">BACKUP</code> command with the <code class="codeph">DELETE INPUT</code> clause.</span><div>
                              <p>Assume that you run the following <code class="codeph">BACKUP</code> command:
                              </p><pre class="pre codeblock"><code>BACKUP DEVICE TYPE sbt 
  ARCHIVELOG ALL 
    DELETE ALL INPUT;
</code></pre><p>In this case, RMAN backs up only one copy of each log sequence number in these archiving locations. RMAN deletes all copies of any log that it backed up from both the fast recovery area and the other archiving destinations.</p>
                              <p>If you specify <code class="codeph">DELETE</code> <code class="codeph">INPUT</code> rather than <code class="codeph">DELETE</code> <code class="codeph">ALL</code> <code class="codeph">INPUT</code>, then RMAN only deletes the specific archived redo log files that it backed up. For example, RMAN deletes the logs in <code class="codeph">/arc_dest1</code> if these files were used as the source of the backup, but leave the contents of the <code class="codeph">/arc_dest2</code> intact.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-E99C2A06-868F-458A-88F1-B257EADD63CB__GUID-6A785433-6EC0-407F-8699-161D1A64CCAF">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="configuring-rman-client-basic.html#GUID-FA142760-8ACB-43DA-939C-8407618D2D0F" title="You can use RMAN to create a persistent configuration that governs when archived redo logs are eligible for deletion from disk.">Configuring an Archived Redo Log Deletion Policy</a></p>
                              </li>
                              <li>
                                 <p><a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> to learn about archived redo log management with standby databases
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../rcmrf/index.html" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn about the <code class="codeph">CONFIGURE ARCHIVELOG DELETION POLICY</code> and <code class="codeph">DELETE ARCHIVELOG</code> commands
                                 </p>
                              </li>
                              <li>
                                 <p><a href="maintaining-rman-backups.html#GUID-8C4B395D-7C24-485F-BEA0-A355821FB93D" title="You can use the RMAN DELETE command to delete archived redo logs and RMAN backups.">Deleting RMAN Backups and Archived Redo Logs</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV840"></a><a id="BRADV839"></a><div class="props_rev_3"><a id="GUID-3ABF5B11-71BA-4161-8CC1-DE7C33EDE853" name="GUID-3ABF5B11-71BA-4161-8CC1-DE7C33EDE853"></a><h4 id="BRADV-GUID-3ABF5B11-71BA-4161-8CC1-DE7C33EDE853" class="sect4"><span class="enumeration_section">9.7.7 </span>Deleting Archived Redo Logs After Backups in CDBs
                  </h4>
                  <div>
                     <p>In a CDB, you can delete archived redo logs after they are backed up by using the <code class="codeph">BACKUP ARCHIVELOG ... DELETE INPUT</code> command.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3ABF5B11-71BA-4161-8CC1-DE7C33EDE853__GUID-7C2D258E-AE8B-478B-A4BA-DE4F7CEA5B93">To delete archived redo logs in a CDB after they are backed up:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>Start RMAN and connect to the root as a user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege as described in <a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a>.
                              </p>
                           </li>
                           <li>
                              <p>Ensure that the target database is mounted or open.</p>
                           </li>
                           <li>
                              <p>Run the <code class="codeph">BACKUP</code> command with the <code class="codeph">DELETE INPUT</code> clause.
                              </p>
                           </li>
                        </ol>
                        <div class="infoboxnotealso" id="GUID-3ABF5B11-71BA-4161-8CC1-DE7C33EDE853__GUID-39B662DB-C307-45F8-8B80-98075947294B">
                           <p class="notep1">See Also:</p>
                           <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for information about the <code class="codeph">BACKUP</code> command
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV8133"></a><div class="props_rev_3"><a id="GUID-2AF8EE74-CEB2-468D-A3B2-DD6AD8E41304" name="GUID-2AF8EE74-CEB2-468D-A3B2-DD6AD8E41304"></a><h3 id="BRADV-GUID-2AF8EE74-CEB2-468D-A3B2-DD6AD8E41304" class="sect3"><span class="enumeration_section">9.8 </span>Making and Updating RMAN Incremental Backups
               </h3>
               <div>
                  <p>An incremental backup copies only data file blocks that have changed since a specified previous backup. Use the <code class="codeph">BACKUP</code> command to create incremental backups.
                  </p>
                  <p>An incremental backup is either a <a href="glossary.html#GUID-8BABFB51-EA47-4204-9A44-E1695A9F9FBF"><span class="xrefglossterm">cumulative incremental backup</span></a> or a <a href="glossary.html#GUID-353B6668-6BA5-4815-8F08-1CD5B446FBD6"><span class="xrefglossterm">differential incremental backup</span></a>.
                  </p>
                  <p>Although the content of the backups is the same, <code class="codeph">BACKUP DATABASE</code> and <code class="codeph">BACKUP INCREMENTAL LEVEL 0 DATABASE</code> are different. A <a href="glossary.html#GUID-D47BE9B3-BAE1-4415-B4B4-4D577B6CB493"><span class="xrefglossterm">full backup</span></a> is not usable as part of an incremental strategy, whereas a <a href="glossary.html#GUID-DF84C185-E97D-4D3C-BF4E-41A9090C5F4C"><span class="xrefglossterm">level 0 incremental backup</span></a> is the basis of an incremental strategy. No RMAN command can change a full backup into a level 0 incremental backup.
                  </p>
                  <p>As with full backups, RMAN can make incremental backups of an <code class="codeph">ARCHIVELOG</code> mode database that is open. If the database is in <code class="codeph">NOARCHIVELOG</code> mode, then RMAN can make incremental backups only after a consistent shutdown.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="backing-up-database.html#GUID-38B982A8-FBD5-487C-98E4-5A2300648BDE" title="RMAN incremental backups provide multiple benefits.">Purpose of RMAN Incremental Backups</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-309CCC44-79F6-4760-97BF-2CBC39EDAF3B" title="Choose a backup strategy according to an acceptable MTTR (mean time to recover).">Planning an Incremental Backup Strategy</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-D918BE3A-31CD-4F4D-8728-2314F1CB504E" title="You can use the Volume Shadow Copy Service (VSS) with the Oracle VSS writer to make a shadow copy or snapshot of files in a database.">Making Incremental Backups</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-AF130A6B-06D1-4D52-87AC-BB8F4B30C9F9" title="By incrementally updating backups, you can avoid the overhead of making full image copy backups of data files, while also minimizing time required for media recovery of your database. For example, if you run a daily backup script, then you never have more than 1 day of redo to apply for media recovery.">Incrementally Updating Backups</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-4E1F605A-76A7-48D0-9D9B-7343B4327E2A" title="The block change tracking feature for incremental backups improves backup performance by recording changed blocks for each data file.">Using Block Change Tracking to Improve Incremental Backup Performance</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89527"></a><div class="props_rev_3"><a id="GUID-38B982A8-FBD5-487C-98E4-5A2300648BDE" name="GUID-38B982A8-FBD5-487C-98E4-5A2300648BDE"></a><h4 id="BRADV-GUID-38B982A8-FBD5-487C-98E4-5A2300648BDE" class="sect4"><span class="enumeration_section">9.8.1 </span>Purpose of RMAN Incremental Backups
                  </h4>
                  <div>
                     <p>RMAN incremental backups provide multiple benefits.</p>
                     <p>The primary reasons for making incremental backups part of your strategy are:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Faster daily backups if <a href="glossary.html#GUID-C80ACD57-9170-4FA5-A61F-81A05E77A1A4"><span class="xrefglossterm">block change tracking</span></a> is enabled (see <span class="q">"<a href="backing-up-database.html#GUID-4E1F605A-76A7-48D0-9D9B-7343B4327E2A" title="The block change tracking feature for incremental backups improves backup performance by recording changed blocks for each data file.">Using Block Change Tracking to Improve Incremental Backup Performance</a>"</span>)
                           </p>
                        </li>
                        <li>
                           <p>Ability to roll forward data file image copies, thereby reducing recovery time and avoiding repeated full backups</p>
                        </li>
                        <li>
                           <p>Less bandwidth consumption when backing up over a network</p>
                        </li>
                        <li>
                           <p>Improved performance when the aggregate tape bandwidth for tape write I/Os is much less than the aggregate disk bandwidth for disk read I/Os</p>
                        </li>
                        <li>
                           <p>Possibility of recovering changes to objects created with the <code class="codeph">NOLOGGING</code> option
                           </p>
                           <p>For example, direct load inserts do not create redo log entries, so their changes cannot be reproduced with media recovery. Direct load inserts do change data blocks, however, and these blocks are captured by incremental backups.</p>
                        </li>
                        <li>
                           <p>Ability to synchronize a physical standby database with the primary database</p>
                           <p>You can use the RMAN <code class="codeph">BACKUP INCREMENTAL FROM SCN</code> command to create a backup on the primary database that starts at the current SCN of the standby database, which you can then use to roll forward the standby database. See <a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> to learn how to apply incremental backups to a standby database.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-38B982A8-FBD5-487C-98E4-5A2300648BDE__GUID-F51FA7D7-450C-4A3E-A7BB-2A57964B7614">
                        <p class="notep1">See Also:</p>
                        <p><a href="../admin/managing-tablespaces.html#ADMIN11374" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about <code class="codeph">NOLOGGING</code> mode
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV89528"></a><div class="props_rev_3"><a id="GUID-309CCC44-79F6-4760-97BF-2CBC39EDAF3B" name="GUID-309CCC44-79F6-4760-97BF-2CBC39EDAF3B"></a><h4 id="BRADV-GUID-309CCC44-79F6-4760-97BF-2CBC39EDAF3B" class="sect4"><span class="enumeration_section">9.8.2 </span>Planning an Incremental Backup Strategy
                  </h4>
                  <div>
                     <p>Choose a backup strategy according to an acceptable MTTR (mean time to recover). </p>
                     <p>For example, you can implement a three-level backup scheme so that a level 0 backup is taken monthly, a cumulative level 1 is taken weekly, and a differential level 1 is taken daily. In this strategy, you never have to apply more than a day of redo for complete recovery.</p>
                     <p>When deciding how often to take level 0 backups, a general rule is to take a new level 0 backup whenever 20% or more of the data has changed. If the rate of change to your database is predictable, then you can observe the size of your incremental backups to determine when a new level 0 backup is appropriate. The following SQL query determines the number of blocks written to an incremental level 1 backup of each data file with at least 20% of its blocks backed up:</p><pre class="pre codeblock"><code>SELECT   FILE#, INCREMENTAL_LEVEL, COMPLETION_TIME, 
         BLOCKS, DATAFILE_BLOCKS 
FROM     V$BACKUP_DATAFILE 
WHERE    INCREMENTAL_LEVEL &gt; 0 
AND      BLOCKS / DATAFILE_BLOCKS &gt; .2
ORDER BY COMPLETION_TIME;
</code></pre><p>Compare the number of blocks in level 1 backups to a level 0 backup. For example, if you create only level 1 cumulative backups, then take a new level 0 backup when the most recent level 1 backup is about half the size of the level 0 backup.</p>
                     <p>An effective way to conserve disk space is to make incremental backups to disk, and then offload the backups to tape with the <code class="codeph">BACKUP</code> <code class="codeph">AS</code> <code class="codeph">BACKUPSET</code> command. Incremental backups are generally smaller than full backups, which limits the space required to store them until they are moved to tape. When the incremental backups on disk are backed up to tape, the tape is more likely to stream because all blocks of the incremental backup are copied to tape. There is no possibility of delay due to time required for RMAN to locate changed blocks in the data files.
                     </p>
                     <p>Another strategy is to use incrementally updated backups, as explained in <span class="q">"<a href="backing-up-database.html#GUID-AF130A6B-06D1-4D52-87AC-BB8F4B30C9F9" title="By incrementally updating backups, you can avoid the overhead of making full image copy backups of data files, while also minimizing time required for media recovery of your database. For example, if you run a daily backup script, then you never have more than 1 day of redo to apply for media recovery.">Incrementally Updating Backups</a>"</span>. In this strategy, you create an image copy of each data file, and then periodically roll forward this copy by making and then applying a level 1 incremental backup. In this way you avoid the overhead of making repeated full image copies of your data files, but enjoy all of the advantages.
                     </p>
                     <p>In a Data Guard environment, you can offload incremental backups to a <a href="glossary.html#GUID-009B3F56-8C1E-4CF6-AF0F-A9D2C2E4B9C2"><span class="xrefglossterm">physical standby database</span></a>. Incremental backups of a standby and primary database are interchangeable. Thus, you can apply an incremental backup of a standby database to a primary database, or apply an incremental backup of a primary database to a standby database. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-309CCC44-79F6-4760-97BF-2CBC39EDAF3B__GUID-FA4F3605-1AFE-4B31-8A04-20E4BD4676EB">
                        <p class="notep1">See Also:</p>
                        <p><a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> to learn how to back up a standby database with RMAN. In particular, consult Chapter 10, "Managing Physical and Snapshot Standby Databases" 
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV236"></a><a id="BRADV89529"></a><div class="props_rev_3"><a id="GUID-D918BE3A-31CD-4F4D-8728-2314F1CB504E" name="GUID-D918BE3A-31CD-4F4D-8728-2314F1CB504E"></a><h4 id="BRADV-GUID-D918BE3A-31CD-4F4D-8728-2314F1CB504E" class="sect4"><span class="enumeration_section">9.8.3 </span>Making Incremental Backups
                  </h4>
                  <div>
                     <div class="section">
                        <p>After starting RMAN, run the <code class="codeph">BACKUP</code> <code class="codeph">INCREMENTAL</code> command at the RMAN prompt. By default incremental backups are differential.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D918BE3A-31CD-4F4D-8728-2314F1CB504E__GUID-6518512D-C4F9-454A-908A-86CEDFA6D23B">To make an incremental backup:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and a recovery catalog (if used).</span><div>
                              <div class="infoboxnotealso" id="GUID-D918BE3A-31CD-4F4D-8728-2314F1CB504E__GUID-7C100209-BD5A-424A-9E54-532DCB933A82">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a></p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Ensure that the target database is mounted or open.</span></li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">BACKUP INCREMENTAL</code> command with the desired options.</span><div>
                              <p>Use the <code class="codeph">LEVEL</code> parameter to indicate the incremental level. The following example makes a level 0 incremental database backup.
                              </p><pre class="pre codeblock"><code>BACKUP
  INCREMENTAL LEVEL 0
  DATABASE;
</code></pre><p>The following example makes a <a href="glossary.html#GUID-353B6668-6BA5-4815-8F08-1CD5B446FBD6"><span class="xrefglossterm">differential incremental backup</span></a> at level 1 of the <code class="codeph">SYSTEM</code> and <code class="codeph">tools</code> tablespaces. It only backs up those data blocks changed since the most recent level 1 or level 0 backup.
                              </p><pre class="pre codeblock"><code>BACKUP
  INCREMENTAL LEVEL 1
  TABLESPACE SYSTEM, tools;
</code></pre><p>The following example makes a <a href="glossary.html#GUID-8BABFB51-EA47-4204-9A44-E1695A9F9FBF"><span class="xrefglossterm">cumulative incremental backup</span></a> at level 1 of the tablespace <code class="codeph">users</code>, backing up all blocks changed since the most recent level 0 backup.
                              </p><pre class="pre codeblock"><code>BACKUP
  INCREMENTAL LEVEL 1 CUMULATIVE
  TABLESPACE users;</code></pre></div>
                        </li>
                     </ol>
                  </div><a id="BRADV89530"></a><div class="props_rev_3"><a id="GUID-1B709C63-3857-40C6-BB3B-C2F73ED7CBA8" name="GUID-1B709C63-3857-40C6-BB3B-C2F73ED7CBA8"></a><h5 id="BRADV-GUID-1B709C63-3857-40C6-BB3B-C2F73ED7CBA8" class="sect5"><span class="enumeration_section">9.8.3.1 </span>Making Incremental Backups of a VSS Snapshot
                     </h5>
                     <div>
                        <p>You can use the Volume Shadow Copy Service (VSS) with the Oracle VSS writer to make a shadow copy or snapshot of files in a database.</p>
                        <div class="section">
                           <p>You must use a third-party backup program other than RMAN to make VSS snapshots with the Oracle VSS writer. In this case, the <a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">fast recovery area</span></a> automates management of files that are backed up in a VSS snapshot and deletes them as needed.
                           </p>
                           <p>You can use the <code class="codeph">BACKUP INCREMENTAL LEVEL 1 ... FROM SCN</code> command in RMAN to create incremental backups in the fast recovery area. Thus, you can use this command to create an incremental level 1 backup of a VSS shadow copy. RMAN can apply incremental backups during recovery transparently.
                           </p>
                           <div class="infoboxnotealso" id="GUID-1B709C63-3857-40C6-BB3B-C2F73ED7CBA8__GUID-099B7F37-540A-4862-B0B6-A83C03343E9F">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=NTQRF280" target="_blank"><span><cite>Oracle Database Administrator’s Reference for Microsoft Windows</cite></span></a> to learn how to make VSS backups with RMAN
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="BRADV237"></a><a id="BRADV8186"></a><div class="props_rev_3"><a id="GUID-AF130A6B-06D1-4D52-87AC-BB8F4B30C9F9" name="GUID-AF130A6B-06D1-4D52-87AC-BB8F4B30C9F9"></a><h4 id="BRADV-GUID-AF130A6B-06D1-4D52-87AC-BB8F4B30C9F9" class="sect4"><span class="enumeration_section">9.8.4 </span>Incrementally Updating Backups
                  </h4>
                  <div>
                     <p>By incrementally updating backups, you can avoid the overhead of making full image copy backups of data files, while also minimizing time required for media recovery of your database. For example, if you run a daily backup script, then you never have more than 1 day of redo to apply for media recovery.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AF130A6B-06D1-4D52-87AC-BB8F4B30C9F9__GUID-F40C0B17-F1C5-4EB9-A0C0-EB0A6500F332">To incrementally update data file backups:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Create a full image copy backup of a data file with a specified tag.</span></li>
                        <li><span>At regular intervals (such as daily), make a level 1 differential incremental backup of the data file and use the same tag as the base data file copy. </span></li>
                        <li><span>Apply the incremental backup to the most recent backup with the same tag.</span></li>
                     </ol>
                     <div class="section">
                        <p>This technique rolls forward the backup to the time when the level 1 incremental backup was made. RMAN can restore this <a href="glossary.html#GUID-F879F805-CAD5-4798-B9C1-A9C877D4FBC8"><span class="xrefglossterm">incremental forever</span></a> and apply changes from the redo log. The result equals restoring a data file backup taken at the SCN of the most recently applied incremental level 1 backup.
                        </p>
                        <div class="infoboxnote" id="GUID-AF130A6B-06D1-4D52-87AC-BB8F4B30C9F9__GUID-30C611AD-B2A7-486C-9D7A-81910735C64E">
                           <p class="notep1">Note:</p>
                           <p>If you run <code class="codeph">RECOVER COPY</code> daily <span class="italic">without</span> specifying an <code class="codeph">UNTIL TIME</code>, then a continuously updated image copy cannot satisfy a <a href="glossary.html#GUID-1C595EF7-B8A1-4AA3-8C45-44E9FC8BAB9E"><span class="xrefglossterm">recovery window</span></a> of more than a day. The incrementally updated backup feature is an optimization for fast media recovery.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="BRADV239"></a><a id="BRADV238"></a><a id="BRADV89531"></a><div class="props_rev_3"><a id="GUID-5225B54C-7720-473E-9B8B-68A66B4ADA0A" name="GUID-5225B54C-7720-473E-9B8B-68A66B4ADA0A"></a><h5 id="BRADV-GUID-5225B54C-7720-473E-9B8B-68A66B4ADA0A" class="sect5"><span class="enumeration_section">9.8.4.1 </span>Incrementally Updating Backups: Basic Example
                     </h5>
                     <div>
                        <p>To create incremental backups for use in an incrementally updated backup strategy, use the <code class="codeph">BACKUP ...</code> <code class="codeph">FOR</code> <code class="codeph">RECOVER</code> <code class="codeph">OF</code> <code class="codeph">COPY</code> <code class="codeph">WITH</code> <code class="codeph">TAG</code> form of the <code class="codeph">BACKUP</code> command. The command is best understood in a sample script that implements the strategy.
                        </p>
                        <p>The script in <a href="backing-up-database.html#GUID-5225B54C-7720-473E-9B8B-68A66B4ADA0A__CHDCHGAE">Example 9-15</a>, run regularly, is all that is required to implement a strategy based on incrementally updated backups.
                        </p>
                        <div class="example" id="GUID-5225B54C-7720-473E-9B8B-68A66B4ADA0A__CHDCHGAE">
                           <p class="titleinexample">Example 9-15 Basic Incremental Update Script</p><pre class="pre codeblock"><code>RUN
{
  RECOVER COPY OF DATABASE 
    WITH TAG 'incr_update';
  BACKUP 
    INCREMENTAL LEVEL 1
    FOR RECOVER OF COPY WITH TAG 'incr_update'
    DATABASE;
}
</code></pre></div>
                        <!-- class="example" -->
                        <div class="section">
                           <p>To understand the script and the strategy, you must understand the effects of these two commands when no data file copies or incremental backups exist. Note two important features:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">BACKUP</code> command in <a href="backing-up-database.html#GUID-5225B54C-7720-473E-9B8B-68A66B4ADA0A__CHDCHGAE">Example 9-15</a> does not always create a level 1 incremental backup.
                                 </p>
                              </li>
                              <li>
                                 <p>The <a href="../rcmrf/RECOVER.html#RCMRF140" target="_blank"><code class="codeph">RECOVER</code></a> command in <a href="backing-up-database.html#GUID-5225B54C-7720-473E-9B8B-68A66B4ADA0A__CHDCHGAE">Example 9-15</a> causes RMAN to apply any available incremental level 1 backups with the specified tag to a set of data file copies with the same tag.
                                 </p>
                              </li>
                           </ul>
                           <p><a href="backing-up-database.html#GUID-5225B54C-7720-473E-9B8B-68A66B4ADA0A__BGBGCEBG" title="This table shows an example incremental update strategy when the basic script is run daily.">Table 9-2</a> shows the effect of the script when it is run once per day starting on Monday.
                           </p>
                           <div class="tblformalwide" id="GUID-5225B54C-7720-473E-9B8B-68A66B4ADA0A__BGBGCEBG">
                              <p class="titleintable">Table 9-2 Effect of Basic Script When Run Daily</p>
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="Effect of Basic Script When Run Daily" summary="This table shows an example incremental update strategy when the basic script is run daily. " width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="11%" id="d40792e9563">Command</th>
                                       <th align="left" valign="bottom" width="22%" id="d40792e9566">Monday</th>
                                       <th align="left" valign="bottom" width="22%" id="d40792e9569">Tuesday</th>
                                       <th align="left" valign="bottom" width="22%" id="d40792e9572">Wednesday</th>
                                       <th align="left" valign="bottom" width="22%" id="d40792e9575">Thursday Onward</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="11%" id="d40792e9580" headers="d40792e9563 ">
                                          <p><code class="codeph">RECOVER</code></p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9580 d40792e9566 ">
                                          <p>Because no incremental backup or data file copy exists, the command generates a message (but not an error). That is, the command has no effect.</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9580 d40792e9569 ">
                                          <p>A database copy now exists, but no incremental level 1 backup exists with which to recover it. Thus, the <code class="codeph">RECOVER</code> command has no effect. 
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9580 d40792e9572 ">
                                          <p>The level 1 incremental backup made on Tuesday is applied to the database copy, bringing the copy up to the checkpoint SCN of the level 1 incremental backup.</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9580 d40792e9575 ">
                                          <p>The level 1 incremental backup made yesterday is applied to the database copy, bringing the copy up to the checkpoint SCN of the level 1 incremental backup.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="11%" id="d40792e9600" headers="d40792e9563 ">
                                          <p><code class="codeph">BACKUP</code></p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9600 d40792e9566 ">
                                          <p>No level 0 image copy exists, so the command creates an image copy of the database and applies the tag <code class="codeph">incr_update</code>. This copy is needed to begin the cycle of incremental updates.
                                          </p>
                                          <p><span class="bold">Note:</span> If the script sets <code class="codeph">DEVICE</code> <code class="codeph">TYPE</code> <code class="codeph">sbt</code>, then the first run creates the copy on disk, not on tape. Subsequent runs make level 1 backups on tape.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9600 d40792e9569 ">
                                          <p>The command makes an incremental level 1 backup and assigns it the tag <code class="codeph">incr_update</code>. This backup contains blocks that changed between Monday and Tuesday.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9600 d40792e9572 ">
                                          <p>The command makes an incremental level 1 backup and assigns it the tag <code class="codeph">incr_update</code>. This backup contains blocks that changed between Tuesday and Wednesday.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9600 d40792e9575 ">
                                          <p>The command makes an incremental level 1 backup and assigns it the tag <code class="codeph">incr_update</code>. This backup contains blocks that changed between now and the most recent backup with the tag <code class="codeph">incr_update</code>.
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>Note the following additional details about <a href="backing-up-database.html#GUID-5225B54C-7720-473E-9B8B-68A66B4ADA0A__CHDCHGAE">Example 9-15</a>:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Each time a data file is added to the database, an image copy of the new data file is created the next time the script runs. The next run makes the first level 1 incremental for the added data file. On all subsequent runs the new data file is processed like any other data file.</p>
                              </li>
                              <li>
                                 <p>You must use tags to identify the data file copies and incremental backups in this strategy so that they do not interfere with other backup strategies. If you use multiple incremental backup strategies, then RMAN cannot unambiguously create incremental level 1 backups unless you tag level 0 backups.</p>
                                 <p>The incremental level 1 backups to apply to those image copies are selected based upon the tag of the image copy data files and the available incremental level 1 backups. The tag is essential in the selection of the incremental level backups.</p>
                              </li>
                              <li>
                                 <p>After the third run of the script, the following files are available for a point-in-time recovery:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>An image copy of the database, as of the checkpoint SCN of the preceding run of the script, 24 hours earlier</p>
                                    </li>
                                    <li>
                                       <p>An incremental backup for the changes after the checkpoint SCN of the preceding run</p>
                                    </li>
                                    <li>
                                       <p>Archived redo logs including all changes between the checkpoint SCN of the image copy and the current time</p>
                                    </li>
                                 </ul>
                                 <p>If you must restore and recover your database during the following 24 hours, then you can restore the data files from the incrementally updated data file copies. You can then apply changes from the most recent incremental level 1 and the redo logs to reach the desired SCN. At most, you have 24 hours of redo to apply, which limits how long point-in-time recovery takes to finish.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="BRADV243"></a><a id="BRADV240"></a><a id="BRADV89532"></a><div class="props_rev_3"><a id="GUID-025D990B-4EB0-48FA-A181-13787069E573" name="GUID-025D990B-4EB0-48FA-A181-13787069E573"></a><h5 id="BRADV-GUID-025D990B-4EB0-48FA-A181-13787069E573" class="sect5"><span class="enumeration_section">9.8.4.2 </span>Incrementally Updated Backups: Advanced Example
                     </h5>
                     <div>
                        <p>You can extend the basic script in <a href="backing-up-database.html#GUID-5225B54C-7720-473E-9B8B-68A66B4ADA0A__CHDCHGAE">Example 9-15</a> to provide fast recoverability to a window greater than 24 hours. <a href="backing-up-database.html#GUID-025D990B-4EB0-48FA-A181-13787069E573__CHDCDFDF">Example 9-16</a> shows how to maintain a window of 7 days by specifying the beginning time of your window of recoverability in the <code class="codeph">RECOVER</code> command.
                        </p>
                        <div class="example" id="GUID-025D990B-4EB0-48FA-A181-13787069E573__CHDCDFDF">
                           <p class="titleinexample">Example 9-16 Advanced Incremental Update Script</p><pre class="pre codeblock"><code>RUN
{
  RECOVER COPY OF DATABASE 
    WITH TAG 'incr_update' 
    UNTIL TIME 'SYSDATE - 7';
  BACKUP
    INCREMENTAL LEVEL 1 
    FOR RECOVER OF COPY WITH TAG 'incr_update'
    DATABASE;
}
</code></pre></div>
                        <!-- class="example" -->
                        <div class="section">
                           <p><a href="backing-up-database.html#GUID-025D990B-4EB0-48FA-A181-13787069E573__BGBHAIFA" title="This table shows an example incremental update strategy when an advanced script is run.">Table 9-3</a> shows the effect of the script when it is run once per day starting on Monday, January 1.
                           </p>
                           <div class="tblformalwide" id="GUID-025D990B-4EB0-48FA-A181-13787069E573__BGBHAIFA">
                              <p class="titleintable">Table 9-3 Effect of Advanced Script When Run Daily</p>
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="Effect of Advanced Script When Run Daily" summary="This table shows an example incremental update strategy when an advanced script is run. " width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="11%" id="d40792e9779">Command</th>
                                       <th align="left" valign="bottom" width="22%" id="d40792e9782">Monday 1/1</th>
                                       <th align="left" valign="bottom" width="22%" id="d40792e9785">Tuesday 1/2 - Monday 1/8</th>
                                       <th align="left" valign="bottom" width="22%" id="d40792e9788">Tuesday 1/9</th>
                                       <th align="left" valign="bottom" width="22%" id="d40792e9791">Wednesday 1/10 Onward</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="11%" id="d40792e9796" headers="d40792e9779 ">
                                          <p><code class="codeph">RECOVER</code></p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9796 d40792e9782 ">
                                          <p>Because no incremental backup or data file copy exists, the command generates a message (but not an error). That is, the command has no effect.</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9796 d40792e9785 ">
                                          <p>A database copy exists, but <code class="codeph">SYSDATE-7</code> specifies a time <span class="italic">before</span> the base copy was created. For example, on Wednesday <code class="codeph">SYSDATE-7</code> specifies the Wednesday <span class="italic">before</span> Monday 1/1. Thus, the <code class="codeph">RECOVER</code> command has no effect.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9796 d40792e9788 ">
                                          <p><code class="codeph">SYSDATE-7</code> now specifies a date <span class="italic">after</span> the base copy was created. The database copy made on Monday 1/1 is updated with the incremental backup made on Tuesday 1/2, bringing the copy up to the checkpoint SCN of the level 1 incremental backup.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9796 d40792e9791 ">
                                          <p>The database copy is updated with the incremental backup made 7 days ago, bringing the copy up to the checkpoint SCN of the level 1 incremental backup.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="11%" id="d40792e9833" headers="d40792e9779 ">
                                          <p><code class="codeph">BACKUP</code></p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9833 d40792e9782 ">
                                          <p>No level 0 image copy exists, so the command creates an image copy of the database and applies the tag <code class="codeph">incr_update</code>. This copy is needed to begin the cycle of incremental updates.
                                          </p>
                                          <p><span class="bold">Note:</span> If the script sets <code class="codeph">DEVICE</code> <code class="codeph">TYPE</code> <code class="codeph">sbt</code>, then the first run creates the copy on disk, not on tape. Subsequent runs make level 1 backups on tape.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9833 d40792e9785 ">
                                          <p>The command makes an incremental level 1 backup and assigns it the tag <code class="codeph">incr_update</code>. This backup contains blocks that changed between yesterday and today.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9833 d40792e9788 ">
                                          <p>The command makes an incremental level 1 backup and assigns it the tag <code class="codeph">incr_update</code>. This backup contains blocks that changed between Monday 1/8 and Tuesday 1/9.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d40792e9833 d40792e9791 ">
                                          <p>The command makes an incremental level 1 backup and assigns it the tag <code class="codeph">incr_update</code>. This backup contains blocks that changed between yesterday and today.
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>As with the basic script in <a href="backing-up-database.html#GUID-5225B54C-7720-473E-9B8B-68A66B4ADA0A__CHDCHGAE">Example 9-15</a>, you have fast recoverability to any point in time between the SCN of the data file copies and the present. RMAN can use both block changes from the incremental backups and individual changes from the redo logs. Because you have the daily level 1 incremental backups, you never need to apply more than 1 day of redo.
                           </p>
                           <div class="infoboxnotealso" id="GUID-025D990B-4EB0-48FA-A181-13787069E573__GUID-B91B28B3-63E7-4866-9548-B772F468BC17">
                              <p class="notep1">See Also:</p>
                              <p><a href="../rcmrf/RECOVER.html#RCMRF140" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn about the <code class="codeph">RECOVER</code> command
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="BRADV8125"></a><div class="props_rev_3"><a id="GUID-4E1F605A-76A7-48D0-9D9B-7343B4327E2A" name="GUID-4E1F605A-76A7-48D0-9D9B-7343B4327E2A"></a><h4 id="BRADV-GUID-4E1F605A-76A7-48D0-9D9B-7343B4327E2A" class="sect4"><span class="enumeration_section">9.8.5 </span>Using Block Change Tracking to Improve Incremental Backup Performance
                  </h4>
                  <div>
                     <p>The block change tracking feature for incremental backups improves backup performance by recording changed blocks for each data file.</p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="backing-up-database.html#GUID-22A5856C-970A-4DA0-AEB8-41C8F180280B" title="If block change tracking is enabled on a primary or standby database, then RMAN uses a block change tracking file to identify changed blocks for incremental backups. By reading this small bitmap file to determine which blocks changed, RMAN avoids having to scan every block in the data file that it is backing up.">About Block Change Tracking</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-5753BEEF-5F87-442E-9BC9-A69E21769C14" title="You can enable block change tracking when the database is either open or mounted.">Enabling and Disabling Block Change Tracking</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-83495ADC-6DC8-414A-8E27-D2CC7F208E71" title="When you disable block change tracking, the database removes the block change tracking file from the operating system.">Disabling Block Change Tracking</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-7E510FA0-952E-4799-8928-3DAC1E3E9EFE" title="You can query the V$BLOCK_CHANGE_TRACKING view to determine whether change tracking is enabled, and if it is, the file name of the block change tracking file.">Checking Whether Change Tracking Is Enabled</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-268DD5BF-27DE-4536-8F93-D57431CE4397" title="To move the change tracking file, use the ALTER DATABASE RENAME FILE statement.">Changing the Location of the Block Change Tracking File</a></p>
                        </li>
                     </ul>
                  </div><a id="BRADV89533"></a><div class="props_rev_3"><a id="GUID-22A5856C-970A-4DA0-AEB8-41C8F180280B" name="GUID-22A5856C-970A-4DA0-AEB8-41C8F180280B"></a><h5 id="BRADV-GUID-22A5856C-970A-4DA0-AEB8-41C8F180280B" class="sect5"><span class="enumeration_section">9.8.5.1 </span>About Block Change Tracking
                     </h5>
                     <div>
                        <p>If block change tracking is enabled on a primary or standby database, then RMAN uses a block change tracking file to identify changed blocks for incremental backups. By reading this small bitmap file to determine which blocks changed, RMAN avoids having to scan every block in the data file that it is backing up.</p>
                        <p>Block change tracking is disabled by default. Nevertheless, the benefits of avoiding full data file scans during backup are considerable, especially if only a small percentage of data blocks are changed between backups. If your backup strategy involves incremental backups, then block change tracking is recommended. Block change tracking does not change the commands used to perform incremental backups. The <a href="glossary.html#GUID-67A48E71-6A0D-4590-A2BC-C9DE6DAEA3A5"><span class="xrefglossterm">block change tracking file</span></a> requires no maintenance after initial configuration.
                        </p>
                        <p>You can only enable block change tracking at a physical standby database if a license for the Oracle Active Data Guard option is enabled.</p>
                     </div><a id="BRADV100"></a><div class="props_rev_3"><a id="GUID-F4254E7F-1BB6-4BE7-A605-8E28E93703A5" name="GUID-F4254E7F-1BB6-4BE7-A605-8E28E93703A5"></a><h6 id="BRADV-GUID-F4254E7F-1BB6-4BE7-A605-8E28E93703A5" class="sect6"><span class="enumeration_section">9.8.5.1.1 </span>About Space Management in the Block Change Tracking File
                        </h6>
                        <div>
                           <p>Oracle Database automatically manages space in the change tracking file to retain block change data that covers the eight most recent backups. After the maximum of eight bitmaps is reached, the oldest bitmap is overwritten by the bitmap that tracks the current changes.</p>
                           <p>The block change tracking file maintains bitmaps that mark changes in the data files between backups. The database performs a bitmap switch before each backup.</p>
                           <p>The first level 0 incremental backup scans the entire data file. Subsequent incremental backups use the block change tracking file to scan only the blocks that have been marked as changed since the last backup. An incremental backup can be optimized only when it is based on a parent backup that was made after the start of the oldest bitmap in the block change tracking file.</p>
                           <p>Consider the eight-bitmap limit when developing your incremental backup strategy. For example, if you make a level 0 database backup followed by seven differential incremental backups, then the block change tracking file now includes eight bitmaps. If you then make a cumulative level 1 incremental backup, then RMAN cannot optimize the backup, because the bitmap corresponding to the parent level 0 backup is overwritten with the bitmap that tracks the current changes.</p>
                        </div>
                     </div><a id="BRADV89534"></a><div class="props_rev_3"><a id="GUID-68349131-773B-4920-9D04-2FCF9C280257" name="GUID-68349131-773B-4920-9D04-2FCF9C280257"></a><h6 id="BRADV-GUID-68349131-773B-4920-9D04-2FCF9C280257" class="sect6"><span class="enumeration_section">9.8.5.1.2 </span>Location of the Block Change Tracking File
                        </h6>
                        <div>
                           <p>By default, the block change tracking file is created as an Oracle managed file in the destination specified by the <code class="codeph">DB_CREATE_FILE_DEST</code> initialization parameter. You can also place the block change tracking file in any location that you choose, by specifying its name when enabling block change tracking. 
                           </p>
                           <p>One block change tracking file is created for the whole database. Oracle recommends against using a raw device (that is, a disk without a file system) as a change tracking file.</p>
                           <div class="infoboxnote" id="GUID-68349131-773B-4920-9D04-2FCF9C280257__GUID-C58DD63D-7316-4FB7-9304-B830BAD9CF91">
                              <p class="notep1">Note:</p>
                              <p>In an Oracle Real Application Clusters (Oracle RAC) environment, the change tracking file must be located on shared storage accessible from all nodes in the cluster.</p>
                           </div>
                           <p>RMAN does not support backup and recovery of the change tracking file. The database resets the change tracking file when it determines that the change tracking file is invalid. If you restore and recover the whole database or a subset, then the database resets the block change tracking file and starts tracking changes again. After you make a level 0 incremental backup, the next incremental backup can use change tracking data.</p>
                        </div>
                     </div><a id="BRADV89535"></a><div class="props_rev_3"><a id="GUID-FA0A845D-C071-404F-B7CB-3876C5981B0F" name="GUID-FA0A845D-C071-404F-B7CB-3876C5981B0F"></a><h6 id="BRADV-GUID-FA0A845D-C071-404F-B7CB-3876C5981B0F" class="sect6"><span class="enumeration_section">9.8.5.1.3 </span>About the Size of the Block Change Tracking File
                        </h6>
                        <div>
                           <p>The size of the block change tracking file is proportional to the size of the database and the number of enabled threads of redo. </p>
                           <p>The size of the block change tracking file can increase and decrease as the database changes. The size is not related to the frequency of updates to the database. Typically, the space required for block change tracking for a single instance is approximately 1/30,000 the size of the data blocks to be tracked. For an Oracle RAC environment, it is 1/30,000 of the size of the database, times the number of enabled threads.</p>
                           <p>The following factors that may cause the file to be larger than this estimate suggests:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To avoid the overhead of allocating space as your database grows, the block change tracking file size starts at 10 megabytes. New space is allocated in 10 MB increments. Thus, for any database up to approximately 300 gigabytes, the file size is no smaller than 10 MB, for up to approximately 600 gigabytes the file size is no smaller than 20 megabytes, and so on.</p>
                              </li>
                              <li>
                                 <p>For each data file, a minimum of 320 kilobytes of space is allocated in the block change tracking file, regardless of the size of the data file. Thus, if you have a large number of relatively small data files, the change tracking file is larger than for databases with a smaller number of larger data files containing the same data.</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="BRADV247"></a><a id="BRADV89536"></a><div class="props_rev_3"><a id="GUID-5753BEEF-5F87-442E-9BC9-A69E21769C14" name="GUID-5753BEEF-5F87-442E-9BC9-A69E21769C14"></a><h5 id="BRADV-GUID-5753BEEF-5F87-442E-9BC9-A69E21769C14" class="sect5"><span class="enumeration_section">9.8.5.2 </span>Enabling and Disabling Block Change Tracking
                     </h5>
                     <div>
                        <p>You can enable block change tracking when the database is either open or mounted. </p>
                        <div class="section">
                           <p>This section assumes that you intend to create the block change tracking file as an <a href="glossary.html#GUID-37F461C5-AAE0-4F82-92E4-7FB822874640"><span class="xrefglossterm">Oracle managed file</span></a> in the <a href="glossary.html#GUID-B2954743-3455-4045-9200-891927E38048"><span class="xrefglossterm">database area</span></a>, which is where the database maintains active database files such as data files, control files, and online redo log files. See <span class="q">"<a href="configuring-rman-client-basic.html#GUID-061CCF1D-2C8D-4460-B469-9C32893A590A" title="The fast recovery area can contain control files, online redo logs, archived redo logs, flashback logs, and RMAN backups.">Overview of Files in the Fast Recovery Area</a>"</span> to learn about the database area and <a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">fast recovery area</span></a>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-5753BEEF-5F87-442E-9BC9-A69E21769C14__GUID-EDF30EE9-6F1C-4F25-A186-8AA266CC5654">To enable block change tracking:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Start SQL*Plus and connect to a target database with administrator privileges.</span></li>
                           <li class="stepexpand"><span>Ensure that the <code class="codeph">DB_CREATE_FILE_DEST</code> initialization parameter is set.</span><div><pre class="pre codeblock"><code>SHOW PARAMETER DB_CREATE_FILE_DEST
</code></pre><p>If the parameter is not set, and if the database is open, then you can set the parameter with the following form of the <a href="../sqlrf/ALTER-SYSTEM.html#SQLRF00902" target="_blank"><code class="codeph">ALTER SYSTEM</code></a> statement:
                                 </p><pre class="pre codeblock"><code>ALTER SYSTEM SET 
  DB_CREATE_FILE_DEST = '/disk1/bct/'
  SCOPE=BOTH SID='*';
</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>Enable block change tracking.</span><div>
                                 <p>Execute the following <code class="codeph">ALTER DATABASE</code> statement:
                                 </p><pre class="pre codeblock"><code>ALTER DATABASE ENABLE BLOCK CHANGE TRACKING;
</code></pre><p>You can also create the change tracking file in a location that you choose yourself by using the following form of SQL statement:</p><pre class="pre codeblock"><code>ALTER DATABASE ENABLE BLOCK CHANGE TRACKING 
  USING FILE '/mydir/rman_change_track.f' REUSE;
</code></pre><p>The <code class="codeph">REUSE</code> option tells Oracle Database to overwrite any existing block change tracking file with the specified name.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="BRADV248"></a><a id="BRADV89537"></a><div class="props_rev_3"><a id="GUID-83495ADC-6DC8-414A-8E27-D2CC7F208E71" name="GUID-83495ADC-6DC8-414A-8E27-D2CC7F208E71"></a><h5 id="BRADV-GUID-83495ADC-6DC8-414A-8E27-D2CC7F208E71" class="sect5"><span class="enumeration_section">9.8.5.3 </span>Disabling Block Change Tracking
                     </h5>
                     <div>
                        <p>When you disable block change tracking, the database removes the block change tracking file from the operating system.</p>
                        <div class="section">
                           <p>This section assumes that the block change tracking feature is currently enabled. </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-83495ADC-6DC8-414A-8E27-D2CC7F208E71__GUID-37D81D1B-DEC7-42F2-A1CD-0F93CAACA6B9">To disable block change tracking:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Start SQL*Plus and connect to a target database with administrator privileges.</span></li>
                           <li class="stepexpand"><span>Ensure that the target database is mounted or open.</span></li>
                           <li class="stepexpand"><span>Disable block change tracking.</span><div>
                                 <p>Execute the following <code class="codeph">ALTER DATABASE</code> statement:
                                 </p><pre class="pre codeblock"><code>ALTER DATABASE DISABLE BLOCK CHANGE TRACKING;</code></pre></div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="BRADV249"></a><a id="BRADV89538"></a><div class="props_rev_3"><a id="GUID-7E510FA0-952E-4799-8928-3DAC1E3E9EFE" name="GUID-7E510FA0-952E-4799-8928-3DAC1E3E9EFE"></a><h5 id="BRADV-GUID-7E510FA0-952E-4799-8928-3DAC1E3E9EFE" class="sect5"><span class="enumeration_section">9.8.5.4 </span>Checking Whether Change Tracking Is Enabled
                     </h5>
                     <div>
                        <p>You can query the <code class="codeph">V$BLOCK_CHANGE_TRACKING</code> view to determine whether change tracking is enabled, and if it is, the file name of the block change tracking file.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7E510FA0-952E-4799-8928-3DAC1E3E9EFE__GUID-A7F37229-90D9-4C04-88B1-96A0CE36095B">To determine whether change tracking is enabled:</p>
                           <p>Enter the following query in SQL*Plus (sample output included):</p><pre class="pre codeblock"><code>COL STATUS   FORMAT A8
COL FILENAME FORMAT A60
 
SELECT STATUS, FILENAME
FROM   V$BLOCK_CHANGE_TRACKING;

STATUS   FILENAME
-------- ------------------------------------------------------------
ENABLED  /disk1/bct/RDBMS/changetracking/o1_mf_2f71np5j_.chg</code></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="BRADV250"></a><a id="BRADV89539"></a><div class="props_rev_3"><a id="GUID-268DD5BF-27DE-4536-8F93-D57431CE4397" name="GUID-268DD5BF-27DE-4536-8F93-D57431CE4397"></a><h5 id="BRADV-GUID-268DD5BF-27DE-4536-8F93-D57431CE4397" class="sect5"><span class="enumeration_section">9.8.5.5 </span>Changing the Location of the Block Change Tracking File
                     </h5>
                     <div>
                        <p>To move the change tracking file, use the <code class="codeph">ALTER DATABASE RENAME FILE</code> statement. 
                        </p>
                        <div class="section">
                           <p>The database must be mounted. The statement updates the control file to refer to the new location and preserves the contents of the change tracking file. If you cannot shut down the database, then you can disable and enable block change tracking. In this case, you lose the contents of the existing block change tracking file.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-268DD5BF-27DE-4536-8F93-D57431CE4397__GUID-2CC2F988-3C7D-40AF-BFFE-CEE712134ECF">To change the location of the change tracking file:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Start SQL*Plus and connect to a target database.</span></li>
                           <li class="stepexpand"><span>If necessary, determine the current name of the change tracking file:</span><div><pre class="pre codeblock"><code>SQL&gt; SELECT FILENAME FROM V$BLOCK_CHANGE_TRACKING;
</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>If possible, shut down the database. For example:</span><div><pre class="pre codeblock"><code>SQL&gt; SHUTDOWN IMMEDIATE
</code></pre><p>If you shut down the database, then skip to the next step. If you choose not to shut down the database, then execute the following SQL statements and skip all remaining steps:</p><pre class="pre codeblock"><code>SQL&gt; ALTER DATABASE DISABLE BLOCK CHANGE TRACKING;
SQL&gt; ALTER DATABASE ENABLE BLOCK CHANGE TRACKING USING FILE '<span class="italic">new_location</span>';
</code></pre><p>In this case you lose the contents of the block change tracking file.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Using host operating system commands, move the block change tracking file to its new location.</span></li>
                           <li class="stepexpand"><span>Mount the database and move the change tracking file to a location that has more space. For example:</span><div><pre class="pre codeblock"><code>ALTER DATABASE RENAME FILE
   '/disk1/bct/RDBMS/changetracking/o1_mf_2f71np5j_.chg' TO 
   '/disk2/bct/RDBMS/changetracking/o1_mf_2f71np5j_.chg';
</code></pre><p>This statement changes the location of the change tracking file while preserving its contents.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Open the database:</span><div><pre class="pre codeblock"><code>SQL&gt; ALTER DATABASE OPEN;</code></pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-268DD5BF-27DE-4536-8F93-D57431CE4397__GUID-B6DD290D-32D6-4FF6-80CA-2325F45AD28E">
                              <p class="notep1">See Also:</p>
                              <p><a href="../sqlrf/index.html" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn about the <code class="codeph">ALTER DATABASE</code> statement and the <code class="codeph">ALTER SYSTEM</code> statement
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="BRADV89551"></a><div class="props_rev_3"><a id="GUID-8894680E-8BBA-475D-8815-D789C1A04FD9" name="GUID-8894680E-8BBA-475D-8815-D789C1A04FD9"></a><h3 id="BRADV-GUID-8894680E-8BBA-475D-8815-D789C1A04FD9" class="sect3"><span class="enumeration_section">9.9 </span>Making Database Backups for Long-Term Storage
               </h3>
               <div>
                  <p>This section explains the basic concepts and tasks involved in making backups for long-term storage.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="backing-up-database.html#GUID-8C01CFF7-EE90-4A04-8E27-EA5C725919AC" title="You can use BACKUP... KEEP to create a backup that is both all-inclusive and exempt from the backup retention policy.">Purpose of Archival Backups</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-09DA2028-0C54-492B-BDE9-9CE07BCD4390" title="You can exempt a backup from the retention policy by using the KEEP option with the BACKUP command.">Basic Concepts of Archival Backups</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-471E69FD-5483-40AD-A598-8BF6F4530287" title="Typically, you make an archival backup to tape. Because your data protection backups are most likely to be on a set of tapes that remain accessible and are recycled, it is advisable to reserve a set of tapes for the archival backup.">Making an Archival Backup for Long-Term Storage</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-F6594D70-D4F8-498E-BEC3-8B4B5C1C45D3" title="One purpose of an archival backup is to create a test database.">Making a Temporary Archival Backup</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89552"></a><div class="props_rev_3"><a id="GUID-8C01CFF7-EE90-4A04-8E27-EA5C725919AC" name="GUID-8C01CFF7-EE90-4A04-8E27-EA5C725919AC"></a><h4 id="BRADV-GUID-8C01CFF7-EE90-4A04-8E27-EA5C725919AC" class="sect4"><span class="enumeration_section">9.9.1 </span>Purpose of Archival Backups
                  </h4>
                  <div>
                     <p>You can use <code class="codeph">BACKUP... KEEP</code> to create a backup that is both all-inclusive and exempt from the backup retention policy.
                     </p>
                     <p> The backup is all-inclusive because every file needed to restore and recover the database is backed up to a single disk or tape location. The <code class="codeph">KEEP</code> option also specifies that the backup is exempt from the retention policy either forever or for a specified period. The general name for a backup created with <code class="codeph">BACKUP ... KEEP</code> is an <a href="glossary.html#GUID-52B0BB49-8AC2-4C8E-A52F-1908CDE77717"><span class="xrefglossterm">archival backup</span></a>.
                     </p>
                     <p>As explained in <span class="q">"<a href="introduction-backup-recovery.html#GUID-8863FC3F-43B7-43B4-A017-30A90F5DA7D5" title="Data archival, although related to data protection, serves a different purpose. An archival backup is exempted from the normal backup and recovery strategy. These backups are typically archived onto separate storage media and retained for long periods.">About Data Archival</a>"</span>, one purpose of a backup and recovery strategy is to preserve data. You can use <code class="codeph">BACKUP ... KEEP</code> to retain a database backup for longer than the time dictated by the retention policy. For example, you can back up the database on the first day of every year to satisfy a regulatory requirement and store the media off-site. Years after you make the archival backup, you can restore and recover it to query the data as it appeared at the time of the backup. 
                     </p>
                     <p>Another purpose of an archival backup is to create a backup that you want to restore for testing purposes and then delete. For example, you can back up the database, restore the database in a test environment, and then discard the archival backup after the test database is operational. A related purpose is to create a self-contained backup that you can delete after transferring it to another user or host. For example, another user might want a copy of the database for reporting or testing.</p>
                  </div>
               </div><a id="BRADV89553"></a><div class="props_rev_3"><a id="GUID-09DA2028-0C54-492B-BDE9-9CE07BCD4390" name="GUID-09DA2028-0C54-492B-BDE9-9CE07BCD4390"></a><h4 id="BRADV-GUID-09DA2028-0C54-492B-BDE9-9CE07BCD4390" class="sect4"><span class="enumeration_section">9.9.2 </span>Basic Concepts of Archival Backups
                  </h4>
                  <div>
                     <p>You can exempt a backup from the retention policy by using the <code class="codeph">KEEP</code> option with the <code class="codeph">BACKUP</code> command. 
                     </p>
                     <p>You can also use the <code class="codeph">KEEP</code> and <code class="codeph">NOKEEP</code> options of the <a href="../rcmrf/CHANGE.html#RCMRF110" target="_blank"><code class="codeph">CHANGE</code></a> command to change the status of an existing backup. Backups with <code class="codeph">KEEP</code> attributes are valid backups that can be recovered like any other backups.
                     </p>
                     <p>You can specify an end date for an archival backup with the <a href="../rcmrf/untilClause.html#RCMRF160" target="_blank"><code class="codeph">KEEP UNTIL TIME</code></a> clause, or specify that the backup is kept <code class="codeph">FOREVER</code>. If you specify <code class="codeph">UNTIL</code>, then RMAN marks the backup as obsolete when the <code class="codeph">UNTIL</code> time has passed, regardless of any configured retention policy. For example, if you specify <code class="codeph">KEEP UNTIL TIME '01-JAN-13'</code>, then the backup is obsolete one second after midnight on January 1, 2013. If you specify an <code class="codeph">UNTIL TIME</code> of 9:00 p.m, then the backup is obsolete at 9:01 p.m. 
                     </p>
                     <p>When you specify <code class="codeph">KEEP</code> on the <code class="codeph">BACKUP</code> command, RMAN generates multiple backup sets. Note the following characteristics of the <code class="codeph">BACKUP ... KEEP</code> command:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>It automatically backs up the data files, control file (even if the <a href="glossary.html#GUID-7CDA6567-DFB0-450D-8771-B033E9872AF7"><span class="xrefglossterm">control file autobackup</span></a> is disabled), and the server parameter file.
                           </p>
                        </li>
                        <li>
                           <p>It automatically generates an archived redo log backup to ensure that the database backup can be recovered to a consistent state.</p>
                        </li>
                        <li>
                           <p>If the <code class="codeph">FORMAT</code>, <code class="codeph">POOL</code>, or <code class="codeph">TAG</code> parameters are specified, then they are used for all backups. For this reason, the <code class="codeph">FORMAT</code> string must allow for the creation of multiple backup pieces. Specifying the <code class="codeph">%U</code> substitution variable is the easiest way to meet this requirement.
                           </p>
                        </li>
                        <li>
                           <p>It supports an optional <code class="codeph">RESTORE POINT</code> clause that creates a <a href="glossary.html#GUID-565076C7-1651-4D58-9F8E-9617561A450A"><span class="xrefglossterm">normal restore point</span></a>, which is a label for an SCN to which the backup must be recovered to be made consistent. The SCN is captured just after the data file backups complete. RMAN resynchronizes restore points with the <a href="glossary.html#GUID-CBFA8015-2DFF-42B1-A818-D6C5B92C608F"><span class="xrefglossterm">recovery catalog</span></a> and maintains the restore points while the backup exists.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-09DA2028-0C54-492B-BDE9-9CE07BCD4390__GUID-BA7EB7FF-5055-4ADF-B3DE-4A3FF29F33A2">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="using-flasback-database-restore-points.html#GUID-305E9D61-0F50-4885-891C-A7D86C6D3C8D">Listing Restore Points Using the LIST Command</a> for information on how to display restore points
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/CHANGE.html#RCMRF110" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">CHANGE</code> syntax 
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">BACKUP ... KEEP</code> syntax
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89554"></a><div class="props_rev_3"><a id="GUID-471E69FD-5483-40AD-A598-8BF6F4530287" name="GUID-471E69FD-5483-40AD-A598-8BF6F4530287"></a><h4 id="BRADV-GUID-471E69FD-5483-40AD-A598-8BF6F4530287" class="sect4"><span class="enumeration_section">9.9.3 </span>Making an Archival Backup for Long-Term Storage
                  </h4>
                  <div>
                     <p>Typically, you make an archival backup to tape. Because your data protection backups are most likely to be on a set of tapes that remain accessible and are recycled, it is advisable to reserve a set of tapes for the archival backup. </p>
                     <p>You can write the archival backup to this special set of tapes and then place them in off-site storage. You can vary the procedure for creating an archival backup by creating a <a href="glossary.html#GUID-6A46F2BF-D1BF-4993-89BC-52A0AEC9370C"><span class="xrefglossterm">stored script</span></a> or shell script that updates dynamically. When you run the script, you can dynamically set the name of the restore point, backup format, and so on.
                     </p>
                     <div class="infoboxnotealso" id="GUID-471E69FD-5483-40AD-A598-8BF6F4530287__GUID-673B8EE2-4F4D-4F2D-9E58-A045702C3403">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="starting-interacting-with-rman-client.html#GUID-A9321B2D-6CFF-4616-B629-67960A8F87DD" title="When running a command file, you can specify one or more values in a USING clause for use in substitution variables in a command file. In this way, you can make your command files dynamic.">Using Substitution Variables in Command Files</a></p>
                           </li>
                           <li>
                              <p><a href="managing-recovery-catalog.html#GUID-BA0C61D6-BE78-4950-946F-2E83A8E65B2C" title="You can specify substitution variables in the CREATE SCRIPT command.">Creating and Executing Dynamic Stored Scripts</a>  to learn how to make archival backups with RMAN command files
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="BRADV251"></a><a id="BRADV89555"></a><div class="props_rev_3"><a id="GUID-71184821-155F-4540-B2CB-E5126DE10600" name="GUID-71184821-155F-4540-B2CB-E5126DE10600"></a><h5 id="BRADV-GUID-71184821-155F-4540-B2CB-E5126DE10600" class="sect5"><span class="enumeration_section">9.9.3.1 </span>Making an Archival Backup
                     </h5>
                     <div>
                        <p>Use the <code class="codeph">BACKUP</code> command with the <code class="codeph">KEEP</code> option to make archival backups.
                        </p>
                        <div class="section">
                           <p>This scenario makes a long-term archival backup with a backup <a href="glossary.html#GUID-7679D8DB-B41A-4DDC-A1DD-20CEDC0BCA8E"><span class="xrefglossterm">tag</span></a> of <code class="codeph">QUARTERLY</code> and assigns it to a special family of Oracle Secure Backup tapes reserved for long-term storage. Note the following features of this example:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">FOREVER</code> keyword indicates that this backup is never eligible for deletion by the <a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">backup retention policy</span></a>. 
                                 </p>
                              </li>
                              <li>
                                 <p>The <a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><code class="codeph">BACKUP</code></a> command creates the restore point named <code class="codeph">FY06Q4</code> to match the SCN at which point this backup is consistent.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-71184821-155F-4540-B2CB-E5126DE10600__GUID-A8AC649E-6ADA-4B0E-8735-E2649F82F846">To make a long-term archival backup:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Start RMAN and connect to a target database and recovery catalog.</span><div>
                                 <p>The target database can be open or mounted. A recovery catalog is required for <code class="codeph">KEEP FOREVER</code>, but is not required for any other <code class="codeph">KEEP</code> option.
                                 </p>
                                 <div class="infoboxnotealso" id="GUID-71184821-155F-4540-B2CB-E5126DE10600__GUID-2880F3BE-5EA8-4F24-B471-4702642288CF">
                                    <p class="notep1">See Also:</p>
                                    <p><a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a></p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Run <code class="codeph">BACKUP ... KEEP</code> to make the backup.</span><div>
                                 <p>The following example generates a data file and archived log backup and creates a <a href="glossary.html#GUID-565076C7-1651-4D58-9F8E-9617561A450A"><span class="xrefglossterm">normal restore point</span></a>. The specified restore point must not already exist.
                                 </p>
                                 <p>The log backup contains just those archived logs needed to restore this backup to a consistent state. The database performs an online redo log switch to archive the redo that is in the current online logs and is necessary to make this new backup consistent. The control file autobackup has a copy of the restore point, so it can be referenced as soon as the control file is restored.</p><pre class="pre codeblock"><code>RUN
{
  ALLOCATE CHANNEL c1 
    DEVICE TYPE sbt
    PARMS 'ENV=(OB_MEDIA_FAMILY=archival_backup)';
  BACKUP DATABASE
    TAG quarterly
    KEEP FOREVER
    RESTORE POINT FY06Q4;
}
</code></pre><p>The following variation keeps the backup for 365 days instead of keeping it forever. After a year has passed, the backup becomes obsolete regardless of the backup retention policy settings.</p><pre class="pre codeblock"><code>RUN
{
  ALLOCATE CHANNEL c1 DEVICE TYPE sbt
    PARMS 'ENV=(OB_MEDIA_FAMILY=archival_backup)';
  BACKUP DATABASE
    TAG quarterly
    KEEP UNTIL TIME 'SYSDATE+365'
    RESTORE POINT FY06Q4;
}</code></pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-71184821-155F-4540-B2CB-E5126DE10600__GUID-C441D7B9-010C-41ED-86A9-034DB2E89381">
                              <p class="notep1">See Also:</p>
                              <p><a href="using-flasback-database-restore-points.html#GUID-FAA04D1F-36E2-4B20-954F-845E42386775" title="Oracle Flashback Database and restore points are related data protection features that enable you to rewind data back in time to correct any problems caused by logical data corruption or user errors within a designated time window.">Overview of Flashback Database, Restore Points and Guaranteed Restore Points</a> to learn about restore points
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="BRADV252"></a><a id="BRADV89556"></a><div class="props_rev_3"><a id="GUID-F6594D70-D4F8-498E-BEC3-8B4B5C1C45D3" name="GUID-F6594D70-D4F8-498E-BEC3-8B4B5C1C45D3"></a><h4 id="BRADV-GUID-F6594D70-D4F8-498E-BEC3-8B4B5C1C45D3" class="sect4"><span class="enumeration_section">9.9.4 </span>Making a Temporary Archival Backup
                  </h4>
                  <div>
                     <p>One purpose of an archival backup is to create a test database. </p>
                     <div class="section">
                        <p>The technique for making a test database is essentially the same as the technique described in <span class="q">"<a href="backing-up-database.html#GUID-471E69FD-5483-40AD-A598-8BF6F4530287" title="Typically, you make an archival backup to tape. Because your data protection backups are most likely to be on a set of tapes that remain accessible and are recycled, it is advisable to reserve a set of tapes for the archival backup.">Making an Archival Backup for Long-Term Storage</a>"</span>. The difference is that you intend to delete the backup soon after creating it.
                        </p>
                        <p>You can specify the temporary status of the backup with the <code class="codeph">BACKUP ... KEEP UNTIL</code> parameter. Assume that you want to make a backup and then restore it to a new host the same day. In this case, you can specify <code class="codeph">KEEP UNTIL</code> <code class="codeph">TIME SYSDATE+1</code> to indicate that RMAN overrides the retention policy for this backup for only one day. After one day, the backup becomes obsolete, regardless of any configured backup retention policy.
                        </p>
                        <p>The command in <a href="backing-up-database.html#GUID-F6594D70-D4F8-498E-BEC3-8B4B5C1C45D3__CHDDJHCG">Example 9-17</a> makes an archival backup on a temporary disk with the tag <code class="codeph">TESTDB</code>. The example creates a normal restore point, which is a label for the time to which the backup is recovered. RMAN only backs up the archived redo logs if the database is open during the backup. Archived logs are not needed for offline backups and so are not backed up.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-F6594D70-D4F8-498E-BEC3-8B4B5C1C45D3__CHDDJHCG">
                        <p class="titleinexample">Example 9-17 Creating a Temporary Archival Backup</p><pre class="oac_no_warn" dir="ltr">BACKUP DATABASE
  FORMAT '/disk1/oraclebck/%U' 
  TAG TESTDB 
  KEEP UNTIL TIME 'SYSDATE+1' 
  RESTORE POINT TESTDB06;
</pre><p>The recommended technique for restoring an archival backup is to use the <a href="../rcmrf/DUPLICATE.html#RCMRF126" target="_blank"><code class="codeph">DUPLICATE</code></a> command. 
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="BRADV89557"></a><div class="props_rev_3"><a id="GUID-731ADA67-235E-481D-AC17-9F9067AD55BF" name="GUID-731ADA67-235E-481D-AC17-9F9067AD55BF"></a><h3 id="BRADV-GUID-731ADA67-235E-481D-AC17-9F9067AD55BF" class="sect3"><span class="enumeration_section">9.10 </span>Backing Up RMAN Backups
               </h3>
               <div>
                  <p>This section explains how to back up backup sets and image copies and contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="backing-up-database.html#GUID-B4D2B5C1-7382-48E6-A2FD-3FBE038930D5" title="You can use the BACKUP BACKUPSET command to back up backup sets produced by other backup jobs. You can also use BACKUP RECOVERY AREA to back up recovery files created in the current and all previous fast recovery area destinations.">About Backups of RMAN Backups</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-ACE4E75B-FE49-4C45-97B0-89CB57048B78" title="Use the BACKUP BACKUPSET command to copy backup sets from disk to tape.">Backing Up Backup Sets with RMAN</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database.html#GUID-2A0B4416-2AAC-49C1-A617-28CDEF96E97A" title="Use the BACKUP command to back up image copies to tape.">Backing Up Image Copy Backups with RMAN</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89558"></a><div class="props_rev_3"><a id="GUID-B4D2B5C1-7382-48E6-A2FD-3FBE038930D5" name="GUID-B4D2B5C1-7382-48E6-A2FD-3FBE038930D5"></a><h4 id="BRADV-GUID-B4D2B5C1-7382-48E6-A2FD-3FBE038930D5" class="sect4"><span class="enumeration_section">9.10.1 </span>About Backups of RMAN Backups
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">BACKUP BACKUPSET</code> command to back up backup sets produced by other backup jobs. You can also use <code class="codeph">BACKUP RECOVERY AREA</code> to back up recovery files created in the current and all previous fast recovery area destinations. 
                     </p>
                     <p>Recovery files are full and incremental backup sets, control file autobackups, data file copies, and archived redo logs. SBT and disk backups are supported for <code class="codeph">BACKUP RECOVERY AREA</code>. For disk backups of the recovery files, you must use the <code class="codeph">TO DESTINATION</code> option.
                     </p>
                     <p>The preceding commands are especially useful in the following scenarios:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Ensuring that all backups exist both on disk and on tape.</p>
                        </li>
                        <li>
                           <p>Moving backups from disk to tape and then freeing space on disk. This task is especially important when the database uses a fast recovery area so that the space can be reused as needed.</p>
                        </li>
                     </ul>
                     <p>You can also use the <code class="codeph">BACKUP COPY OF</code> command to back up image copies of data files, control files, and archived redo logs. The output of this command can be either backup sets or image copies, so you can generate backup sets from image copies. This form of backup is used to back up a database backup created as image copies on disk to tape.
                     </p>
                     <div class="infoboxnote" id="GUID-B4D2B5C1-7382-48E6-A2FD-3FBE038930D5__GUID-81CE4233-2FCF-487D-98AD-DDD832355AD6">
                        <p class="notep1">Note:</p>
                        <p>In a multitenant environment, you cannot back up backup sets and image copies of PDBs that have been dropped. RMAN skips backing up these backups.</p>
                     </div>
                  </div><a id="BRADV89559"></a><div class="props_rev_3"><a id="GUID-99B02CD1-1302-46F7-A354-1CD3BB57BF80" name="GUID-99B02CD1-1302-46F7-A354-1CD3BB57BF80"></a><h5 id="BRADV-GUID-99B02CD1-1302-46F7-A354-1CD3BB57BF80" class="sect5"><span class="enumeration_section">9.10.1.1 </span>About Multiple Copies of RMAN Backup Sets
                     </h5>
                     <div>
                        <p>The <code class="codeph">BACKUP BACKUPSET</code> command creates additional copies of backup pieces in a backup set, but does not create a new backup set. 
                        </p>
                        <p>Thus, <code class="codeph">BACKUP BACKUPSET</code> is similar to using the <code class="codeph">DUPLEX</code> or <code class="codeph">MAXCOPIES</code> option of <code class="codeph">BACKUP</code> (see <span class="q">"<a href="backing-up-database-advanced.html#GUID-4CFE9BA0-E298-42B8-9FB6-D36751C09D54" title="RMAN can make up to four copies of a backup set simultaneously, each an exact duplicate of the others.">Duplexing Backup Sets</a>"</span>). The extra copy of a backup set created by <code class="codeph">BACKUP BACKUPSET</code> is not a new backup set, just as copies of a backup set produced by other forms of the <code class="codeph">BACKUP</code> command are not separate backup sets.
                        </p>
                     </div>
                  </div><a id="BRADV253"></a><a id="BRADV89560"></a><div class="props_rev_3"><a id="GUID-7170DF18-ABD2-45DF-83E3-72B3811020B6" name="GUID-7170DF18-ABD2-45DF-83E3-72B3811020B6"></a><h5 id="BRADV-GUID-7170DF18-ABD2-45DF-83E3-72B3811020B6" class="sect5"><span class="enumeration_section">9.10.1.2 </span>Viewing the Effect of a Backup Retention Policy on Backups of Backups
                     </h5>
                     <div>
                        <p>For a backup retention policy based on redundancy, a backup set is counted as one instance of a backup. This statement is true even if there are multiple copies of the backup pieces that form the backup set, such as when a backup set has been backed up from disk to tape.</p>
                        <div class="section">
                           <p>For a <a href="glossary.html#GUID-1C595EF7-B8A1-4AA3-8C45-44E9FC8BAB9E"><span class="xrefglossterm">recovery window</span></a> retention policy, either all of the copies of a backup set are obsolete, or none of them are. This point is easiest to grasp when viewing the output of the <a href="../rcmrf/LIST.html#RCMRF132" target="_blank"><code class="codeph">LIST</code></a> and <a href="../rcmrf/REPORT.html#RCMRF147" target="_blank"><code class="codeph">REPORT</code></a> commands.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7170DF18-ABD2-45DF-83E3-72B3811020B6__GUID-FC292FEB-1BDC-4CF6-86E3-14C34B02DC1F">To view the effect of a backup retention policy on backups of backups:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Back up a data file.</span><div>
                                 <p>The following example backs up data file 5:</p><pre class="pre codeblock"><code>BACKUP AS BACKUPSET DATAFILE 5;
</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>Run the <code class="codeph">LIST</code> command for the data file backup from Step 1.</span><div>
                                 <p>For example, run the following command (sample output included).</p><pre class="pre codeblock"><code>LIST BACKUP OF DATAFILE 5 SUMMARY;
 
List of Backups
===============
Key     TY LV S Device Type Completion Time #Pieces #Copies Compressed Tag
------- -- -- - ----------- --------------- ------- ------- ---------- ---
18      B  F  A DISK        04-AUG-13       1       1       NO         TAG20070804T160 134
</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>Use the backup set key from the previous step to back up the backup set.</span><div>
                                 <p>For example, enter the following command:</p><pre class="oac_no_warn" dir="ltr">BACKUP BACKUPSET 18;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Run the same <code class="codeph">LIST</code> command that you ran in Step 2.</span><div>
                                 <p>For example, run the following command (sample output included).</p><pre class="pre codeblock"><code>LIST BACKUP OF DATAFILE 5 SUMMARY;
 
List of Backups
===============
Key     TY LV S Device Type Completion Time #Pieces #Copies Compressed Tag
------- -- -- - ----------- --------------- ------- ------- ---------- ---
18      B  F  A DISK        04-AUG-13       1       2       NO         TAG20070804T160 134
</code></pre><p>Only one backup set is shown in this output, but there are now two copies of it.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Generate a report to see the effect of these copies under a redundancy-based backup retention policy.</span><div>
                                 <p>For example, issue the following command:</p><pre class="pre codeblock"><code>REPORT OBSOLETE REDUNDANCY 1;
</code></pre><p>No copy is reported as obsolete because both copies of the backup set have the same values for <code class="codeph">set_stamp</code> and <code class="codeph">set_count</code>.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Generate a report to see the effect of these copies under a recovery window-based backup retention policy.</span><div>
                                 <p>For example, issue the following command:</p><pre class="pre codeblock"><code>REPORT OBSOLETE RECOVERY WINDOW OF 1 DAYS;
</code></pre><p>No copy of the backup set is reported as obsolete or based on the <code class="codeph">CHECKPOINT_CHANGE#</code> of this backup set, with the current time and the availability of other backups. 
                                 </p>
                                 <div class="infoboxnotealso" id="GUID-7170DF18-ABD2-45DF-83E3-72B3811020B6__GUID-DC504A2A-1D5D-44F4-8414-AB9A30B39423">
                                    <p class="notep1">See Also:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><a href="configuring-rman-client-basic.html#GUID-E9AEAC34-6C40-40A1-BAF5-3EAE20417715" title="The REDUNDANCY parameter of the CONFIGURE RETENTION POLICY command specifies how many full or level 0 backups of each data file and control file that RMAN keeps. The default retention policy is REDUNDANCY 1.">Configuring a Redundancy-Based Retention Policy</a></p>
                                       </li>
                                       <li>
                                          <p><a href="reporting-rman-operations.html#GUID-550638CC-0D16-4B1A-83C7-5D10181DC7C1" title="As part of your backup and recovery strategy, you should periodically run reports that indicate what you have backed up. You can determine which data files need backups or which files were not backed up recently. Also, you can preview which backups RMAN must restore if a problem occurs.RMAN stores metadata of every database on which it performs operations.In a Data Guard environment, you can use the LIST, REPORT, and SHOW commands just as you can when not using Data Guard. You can run these commands with the FOR DB_UNIQUE_NAME clause to show the backups associated with a specified database. The LIST command uses the information in the RMAN repository to provide lists of backups and other objects relating to backup and recovery. The primary purpose of the LIST command is to list backup and copies. Specify the desired objects with the listObjList or recordSpec clause. If you do not specify an object, then RMAN displays copies of all database files and archived redo log files.You can specify several different conditions to narrow your LIST output.Use the LIST command to list preplugin backups and preplugin archived redo log files.Each time an OPEN RESETLOGS operation is performed on a database, this operation creates a new incarnation of the database.The RMAN REPORT command analyzes the available backups and your database. The REPORT command provides various reports of RMAN backups.Use the REPORT NEED BACKUP command to determine which database files need backup under a specific retention policy. You can use options of the REPORT NEED BACKUP command to specify different retention policies.The REPORT NEED BACKUP command can check the entire database, skip specified tablespaces, or check only specific tablespaces or data files against different retention policies.You can limit the backups tested by the REPORT NEED BACKUP command to disk-based or tape-based backups only.When a data file has been changed by an unrecoverable operation, such as a direct load insert, normal media recovery cannot be used to recover the file, because an unrecoverable operation does not generate redo. You must perform either a full or incremental backup of affected data files after such operations, to ensure that data blocks affected by the unrecoverable operation can be recovered using RMAN.You can report backup sets, backup pieces, and data file copies that are obsolete that is, not needed to meet a specified retention policy by specifying the OBSOLETE keyword. The REPORT SCHEMA command lists and displays information about the database files, tablespaces, and so on. You can view reports on the metadata related to a multitenant container database (CDB), the root only, or one or more pluggable databases (PDBs). Use the LIST command with the GUID option to list backups of pluggable databases (PDBs) that have been dropped from a multitenant container database (CDB).In some cases, V$ views supply information that is not available through use of the LIST and REPORT commands. An RMAN job is the set of commands executed within an RMAN session. Thus, one RMAN job can contain multiple commands. The ENCRYPTED column of the V$BACKUP_PIECE and V$RMAN_BACKUP_PIECE views indicates whether a backup piece is encrypted (YES) or unencrypted (NO).The LIST, REPORT, and SHOW commands provide the easiest means of accessing the data in the control file and the recovery catalog. RMAN obtains backup and recovery metadata from a target database control file and stores it in the tables of the recovery catalog. The recovery catalog views are derived from these tables. The recovery catalog views are not normalized or optimized for user queries.Most recovery catalog views contain the columns DB_KEY and DBINC_KEY. Each database registered in the recovery catalog can be uniquely identified by either the primary key, which is the DB_KEY column value, or the DBID, which is the 32-bit unique database identifier. Each incarnation of a database is uniquely identified by the DBINC_KEY column.Special considerations apply when querying the recovery catalog in a Data Guard environment. The DB_KEY value, which is the primary key for a registered database, is used only in the recovery catalog. The easiest way is to obtain the DB_KEY is to use the DBID of the target database, which is displayed whenever you connect RMAN to a database as TARGET. You can query the view RC_BACKUP_FILES for information about all backups of any database registered in the recovery catalog. Before querying RC_BACKUP_FILES, however, you must call the DBMS_RCVMAN.SETDATABASE procedure.">Reporting on RMAN Operations</a> to learn how to use the <code class="codeph">LIST</code> and <code class="codeph">REPORT</code> commands
                                          </p>
                                       </li>
                                    </ul>
                                 </div>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div><a id="BRADV254"></a><a id="BRADV147"></a><div class="props_rev_3"><a id="GUID-ACE4E75B-FE49-4C45-97B0-89CB57048B78" name="GUID-ACE4E75B-FE49-4C45-97B0-89CB57048B78"></a><h4 id="BRADV-GUID-ACE4E75B-FE49-4C45-97B0-89CB57048B78" class="sect4"><span class="enumeration_section">9.10.2 </span>Backing Up Backup Sets with RMAN
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">BACKUP BACKUPSET</code> command to copy backup sets from disk to tape. 
                     </p>
                     <div class="section">
                        <p>The procedure in this section assumes that you have configured an <a href="glossary.html#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a> device as your default device.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-ACE4E75B-FE49-4C45-97B0-89CB57048B78__GUID-C0B52A6F-18BE-47C4-8BE0-A5053D4330CF">To back up backup sets from disk to tape:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>If you are backing up a subset of available backup sets, then execute the <code class="codeph">LIST BACKUPSET</code> command to obtain their primary keys.</span><div>
                              <p>The following example lists the backup sets in summary form:</p><pre class="pre codeblock"><code>RMAN&gt; LIST BACKUPSET SUMMARY;

List of Backups
===============
Key TY LV S Device Type Completion Time #Pieces #Copies Comp Tag
--- -- -- - ----------- --------------- ------- ------- ---- ---
1   B  F  A DISK        28-MAY-13       1       1       NO   TAG20070528T132432
2   B  F  A DISK        29-MAY-13       1       1       NO   TAG20070529T132433
3   B  F  A DISK        30-MAY-13       1       1       NO   TAG20070530T132434
</code></pre><p>The following example lists details about backup set 3:</p><pre class="pre codeblock"><code>RMAN&gt; LIST BACKUPSET 3;

List of Backup Sets
===================

BS Key  Type LV Size       Device Type Elapsed Time Completion Time
------- ---- -- ---------- ----------- ------------ ---------------
3       Full    8.33M      DISK        00:00:01     30-MAY-13
        BP Key: 3   Status: AVAILABLE  Compressed: NO  Tag: TAG20070530T132434
        Piece Name: /disk1/oracle/dbs/c-35764265-20070530-02
  Control File Included: Ckp SCN: 397221       Ckp time: 30-MAY-13
  SPFILE Included: Modification time: 30-MAY-13
  SPFILE db_unique_name: PROD
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">BACKUP BACKUPSET</code> command.</span><div>
                              <p>The following example backs up all disk backup sets to tape and then deletes the input disk backups:</p><pre class="pre codeblock"><code>BACKUP BACKUPSET ALL
  DELETE INPUT;
</code></pre><p>The following example backs up only the backup sets with the primary key 1 and 2 to tape and then deletes the input disk backups:</p><pre class="pre codeblock"><code>BACKUP BACKUPSET 1,2
  DELETE INPUT;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Optionally, execute the <a href="../rcmrf/LIST.html#RCMRF132" target="_blank"><code class="codeph">LIST</code></a> command to see a listing of backup sets and pieces.</span><div>
                              <p>The output lists all copies, including backup piece copies created by <code class="codeph">BACKUP BACKUPSET</code> .
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV255"></a><a id="BRADV89561"></a><div class="props_rev_3"><a id="GUID-2A0B4416-2AAC-49C1-A617-28CDEF96E97A" name="GUID-2A0B4416-2AAC-49C1-A617-28CDEF96E97A"></a><h4 id="BRADV-GUID-2A0B4416-2AAC-49C1-A617-28CDEF96E97A" class="sect4"><span class="enumeration_section">9.10.3 </span>Backing Up Image Copy Backups with RMAN
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">BACKUP</code> command to back up image copies to tape. 
                     </p>
                     <div class="section">
                        <p>This section assumes that you have configured an <a href="glossary.html#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a> device as your default device.
                        </p>
                        <p>When you back up image copies that have multiple copies of the data files, specifying tags for the backups makes it easier to identify the input image copy. All image copies of data files have tags. The <a href="glossary.html#GUID-7679D8DB-B41A-4DDC-A1DD-20CEDC0BCA8E"><span class="xrefglossterm">tag</span></a> of an image copy is inherited by default when the image copy is backed up as a new image copy.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2A0B4416-2AAC-49C1-A617-28CDEF96E97A__GUID-7D7D64DF-D7A1-44B6-BD09-B3BFB19D9144">To back up image copies from disk to tape:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Issue the <code class="codeph">BACKUP ... COPY OF</code> or <code class="codeph">BACKUP DATAFILECOPY</code> command. </span><div>
                              <p>The following example backs up data file copies that have the tag <code class="codeph">DBCopy</code>: 
                              </p><pre class="pre codeblock"><code>BACKUP DATAFILECOPY FROM TAG DBCopy;
</code></pre><p>The following example backs up the latest image copies of a database to tape, assigns the tag <code class="codeph">QUARTERLY_BACKUP</code>, and deletes the input disk backups:
                              </p><pre class="pre codeblock"><code>BACKUP DEVICE TYPE sbt
  TAG "quarterly_backup"
  COPY OF DATABASE 
  DELETE INPUT;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Optionally, issue the <a href="../rcmrf/LIST.html#RCMRF132" target="_blank"><code class="codeph">LIST</code></a> command to see a listing of backup sets. The output lists all copies, including backup piece copies created by the <code class="codeph">BACKUP</code> command with the <code class="codeph">BACKUPSET</code> clause.</span></li>
                     </ol>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
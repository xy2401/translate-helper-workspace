<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Using Flashback Database and Restore Points</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery User's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96241-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="configuring-rman-client-advanced.html" title="Previous" type="text/html">
      <link rel="next" href="part-backing-up-archiving.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
    <meta name="dcterms.isVersionOf" content="BRADV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-rman-client-advanced.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="part-backing-up-archiving.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-starting-configuring-rman.html" property="item" typeof="WebPage"><span property="name"> Starting and Configuring RMAN and Flashback Database</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Flashback Database and Restore Points</li>
            </ol>
            <a id="GUID-909BBEEF-389B-443B-8CD7-F3C027AAFFF3" name="GUID-909BBEEF-389B-443B-8CD7-F3C027AAFFF3"></a><a id="BRADV71000"></a>
            
            <h2 id="BRADV-GUID-909BBEEF-389B-443B-8CD7-F3C027AAFFF3" class="sect2"><span class="enumeration_chapter">7 </span>Using Flashback Database and Restore Points
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter explains Flashback Database and restore points. It discusses configuring, monitoring, and maintaining these features as part of an overall data protection strategy.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="using-flasback-database-restore-points.html#GUID-FAA04D1F-36E2-4B20-954F-845E42386775" title="Oracle Flashback Database and restore points are related data protection features that enable you to rewind data back in time to correct any problems caused by logical data corruption or user errors within a designated time window.">Overview of Flashback Database, Restore Points and Guaranteed Restore Points</a></p>
                  </li>
                  <li>
                     <p><a href="using-flasback-database-restore-points.html#GUID-E90F7FBD-CCE2-4234-A3B4-FDFEC3BC2E90" title="Logging for Flashback Database and guaranteed restore points involves capturing images of data file blocks before changes are applied. The FLASHBACK DATABASE command can use these images to return the data files to their previous state.">About Logging for Flashback Database and Guaranteed Restore Points</a></p>
                  </li>
                  <li>
                     <p><a href="using-flasback-database-restore-points.html#GUID-AE2AD6A0-507A-4E40-A8FF-76AFC88EC56D" title="To ensure successful operation of Flashback Database and guaranteed restore points, you must first set some key database options.">Prerequisites for Flashback Database and Guaranteed Restore Points</a></p>
                  </li>
                  <li>
                     <p><a href="using-flasback-database-restore-points.html#GUID-2C846D84-EDCC-4FAA-9F6A-05CD0C6C7C09" title="You can create, monitor, and drop both normal and guaranteed restore points.">Using Normal and Guaranteed Restore Points</a></p>
                  </li>
                  <li>
                     <p><a href="using-flasback-database-restore-points.html#GUID-4E96DB60-3616-4680-866A-F38A6049053A" title="To use flashback logging for a target database, you must enable Flashback Database. Certain guidelines can be followed to ensure optimal performance of Flashback Database.">Using Flashback Database</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-909BBEEF-389B-443B-8CD7-F3C027AAFFF3__GUID-DC5B60B4-8FC2-4C41-B8BF-DBF72DC7ABCE">
                  <p class="notep1">Note:</p>
                  <p>Detailed information on recovery scenarios that use Flashback Database and normal and guaranteed restore points can be found in <a href="rman-performing-flashback-dbpitr.html#GUID-5463669A-DC89-4FF4-ACCE-136A72DF687B" title="This overview describes the purpose and basic concepts of Oracle Flashback Technology and database point-in-time recovery.Certain situations are suited for using point-in-time recovery or flashback features to return the database or database object to its state at a previous point in time.Database point-in-time recovery (DBPITR) and Flashback features enable you to recover your database to a prior point in time.DBPITR works at the physical level to return the data files to their state at a target time in the past.RMAN provides support for point-in-time recovery for one or more PDBs. To recover PDBs, you must connect to the root as a user with SYSDBA or SYSBACKUP privilege. After recovery, old backups of the PDB remain valid and can be used if a media failure occurs.The flashback features of the Oracle Database are more efficient than media recovery in most circumstances in which they are available. You can use them to investigate past states of the database.Oracle Flashback Database is the most efficient alternative to DBPITR.Logical flashback features are used to recover tables and their contents to a past time.You can perform a Flashback Database operation for a whole multitenant container database (CDB) or for a particular pluggable database (PDB). A multitenant container database (CDB) can use shared undo or local undo. The technique used by RMAN to perform flashback database operations depends on the type of undo configuration for the CDB.RMAN provides methods to manage redo corruption to data blocks in a PDB.Flashback Table uses information in the undo tablespace rather than restored backups to retrieve the table. When a Flashback Table operation occurs, new rows are deleted and old rows are reinserted. The rest of your database remains available while the flashback of the table is being performed.To perform a Flashback Table operation, the table must be eligible to be flashed back and the user performing the operation must have the required privileges.To use the Flashback Table feature on one or more tables, use the FLASHBACK TABLE SQL statement with a target time or SCN.By default, the database disables triggers on the affected table before performing a FLASHBACK TABLE operation. After the operation, the database returns the triggers to the state they were in before the operation (enabled or disabled). You can retrieve objects from the recycle bin with the FLASHBACK TABLE ... TO BEFORE DROP statement.Flashback Drop reverses the effects of a DROP TABLE operation. Flashback Drop is faster than other recovery mechanisms that can be used in this situation, such as point-in-time recovery, and does not lead to downtime or loss of recent transactions.Prerequisites must be met before you perform a Flashback Drop operation.Use the FLASHBACK TABLE ... TO BEFORE DROP statement to recover objects from the recycle bin. You can specify either the name of the table in the recycle bin or the original table name.You can create, and then drop, several objects with the same original name. All dropped objects are stored in the recycle bin.Flashback Database reverses unwanted changes by returning your database to its state at a previous point in time.Flashback Database works by undoing changes to the data files that exist at the moment that you run the command. Prerequisites must be met to perform a Flashback Database operation.A Flashback Database operation uses the FLASHBACK DATABASE command to rewind the database to a past point in time.You can perform a flashback database operation for a whole multitenant container database (CDB) using the FLASHBACK DATABASE command.You can perform a flashback database operation for a single pluggable database (PDB) in a multitenant container database (CDB) using the FLASHBACK DATABASE command.Data dictionary views contain information that is used to monitor flashback database.RMAN DBPITR restores the database from backups before the target time for recovery, then uses incremental backups and redo to roll the database forward to the target time. You can recover to an SCN, time, log sequence number, or restore point. Oracle recommends that you create restore points at important times to make point-in-time recovery more manageable if it ever becomes necessary.Certain prerequisites must be met to perform database point-in-time recovery (DBPITR).Use the RESTORE and RECOVER commands to perform DBPITR.Use the RECOVER command to perform point-in-time recovery (PITR) of container databases (CDBs) and pluggable databases (PDBs). PITR of PDBs can only be performed using RMAN.Use the RESTORE and RECOVER commands to perform point-in-time recovery for a whole CDB.When you recover one or more PDBs to a specified point-in-time, the remaining PDBs in the CDB are not affected and they can be open and operational. Use the RESTORE and RECOVER commands to perform point-in-time recovery of an application PDB.Performing point-in-time recovery of sparse databases is similar to performing point-in-time recovery of normal databases. This section describes variations of the basic Flashback Database and DBPITR scenarios.Flashback Database can be used to undo an OPEN RESETLOGS operation.Flashback Database across OPEN RESETLOGS may be used to perform multiple functions in a Data Guard environment.You can use Flashback Database to rewind a database to an abandoned database incarnation.To perform DPITR to an noncurrent database incarnation, you must explicitly execute the RESET DATABASE to reset the database to the incarnation that was current at the target SCN. You must also restore a control file from the database incarnation containing the target SCN."> Performing Flashback and Database Point-in-Time Recovery</a>.
                  </p>
               </div>
            </div><a id="BRADV180"></a><div class="props_rev_3"><a id="GUID-FAA04D1F-36E2-4B20-954F-845E42386775" name="GUID-FAA04D1F-36E2-4B20-954F-845E42386775"></a><h3 id="BRADV-GUID-FAA04D1F-36E2-4B20-954F-845E42386775" class="sect3"><span class="enumeration_section">7.1 </span>Overview of Flashback Database, Restore Points and Guaranteed Restore Points
               </h3>
               <div>
                  <p>Oracle Flashback Database and restore points are related data protection features that enable you to rewind data back in time to correct any problems caused by logical data corruption or user errors within a designated time window.</p>
                  <p>These features provide a more efficient alternative to point-in-time recovery and does not require a backup of the database to be restored first. The effects are similar to <a href="glossary.html#GUID-FCC8BB91-79B6-4AF1-974A-43E75CD161E3"><span class="xrefglossterm">database point-in-time recovery (DBPITR)</span></a>. Flashback Database and restore points are not only effective in traditional database recovery situations but can also be useful during database upgrades, application deployments and testing scenarios when test databases must be quickly created and re-created. Flashback Database also provides an efficient alternative to rebuilding a failed primary database after a Data Guard failover.
                  </p>
                  <p>Restore points provide capabilities related to Flashback Database and other media recovery operations. In particular, a guaranteed restore point created at a system change number (SCN) ensures that you can use Flashback Database to rewind the database to this SCN. You can use restore points and Flashback Database independently or together.</p>
                  <p>Flashback Database is accessible through both RMAN and SQL as <code class="codeph">FLASHBACK DATABASE</code> . You can use either language to quickly recover the database from logical data corruption or user errors. The following examples return the database to a specified SCN or restore point:
                  </p><pre class="pre codeblock"><code>FLASHBACK DATABASE TO RESTORE POINT 'before_upgrade';
FLASHBACK DATABASE TO SCN 202381;
</code></pre><div class="infoboxnotealso" id="GUID-FAA04D1F-36E2-4B20-954F-845E42386775__GUID-DB8A922F-0AA5-403B-BC4F-D927F669F039">
                     <p class="notep1">See Also:</p>
                     <p><a href="../sbydb/examples-of-using-oracle-data-guard.html#SBYDB4891" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a></p>
                  </div>
               </div><a id="BRADV582"></a><div class="props_rev_3"><a id="GUID-509FB7A6-4CB2-4730-80CA-7B2D68F50773" name="GUID-509FB7A6-4CB2-4730-80CA-7B2D68F50773"></a><h4 id="BRADV-GUID-509FB7A6-4CB2-4730-80CA-7B2D68F50773" class="sect4"><span class="enumeration_section">7.1.1 </span>About Flashback Database
                  </h4>
                  <div>
                     <p>Flashback Database is similar to conventional point-in-time recovery in its effects. It enables you to return a database to its state at a time in the recent past. Flashback Database is much faster than point-in-time recovery because it does not require restoring data files from backup and requires applying fewer changes from the archived redo logs.</p>
                     <p>You can use Flashback Database to reverse most unwanted changes to a database if the data files are intact. You can return a database to its state in a previous <a href="glossary.html#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">incarnation</span></a>, and undo the effects of an <a href="../sqlrf/ALTER-DATABASE.html#SQLRF00802" target="_blank"><code class="codeph">ALTER DATABASE OPEN RESETLOGS</code></a> statement. <span class="q">"<a href="rman-performing-flashback-dbpitr.html#GUID-953FA30D-BED2-4DBA-8361-9DA1B8FF073F" title="Flashback Database reverses unwanted changes by returning your database to its state at a previous point in time.">Rewinding a Database with Flashback Database</a>"</span> explains how to use the <code class="codeph">FLASHBACK</code> <code class="codeph">DATABASE</code> command to reverse database changes.
                     </p>
                     <p>Flashback Database uses its own logging mechanism, creating <a href="glossary.html#GUID-725ED3D7-5077-4F16-85AA-CDAD5BFCE554"><span class="xrefglossterm">flashback logs</span></a> and storing them in the <a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">fast recovery area</span></a>. You can only use Flashback Database if flashback logs are available. To take advantage of this feature, you must set up your database in advance to create flashback logs.
                     </p>
                     <p>To enable Flashback Database, you configure a fast recovery area and set a <a href="glossary.html#GUID-F472DAAD-F619-47F7-B025-7FE21FD9E5DB"><span class="xrefglossterm">flashback retention target</span></a>. This retention target specifies how far back you can rewind a database with Flashback Database.
                     </p>
                     <p>From that time onwards, at regular intervals, the database copies images of each altered block in every data file into the flashback logs. These block images can later be reused to reconstruct the data file contents for any moment at which logs were captured.</p>
                     <p>When you use Flashback Database to rewind a database to a past target time, the command determines which blocks changed after the target time and restores them from the flashback logs. The database restores the version of each block that is immediately before the target time. The database then uses redo logs to reapply changes that were made after these blocks were written to the flashback logs.</p>
                     <p>Redo logs on disk or tape must be available for the entire time period spanned by the flashback logs. For example, if the flashback retention target is 1 week, then you must ensure that online and archived redo logs that contain all changes for the past week are accessible. In practice, redo logs are typically needed much longer than the flashback retention target to support point-in-time recovery.</p>
                  </div>
               </div><a id="BRADV583"></a><div class="props_rev_3"><a id="GUID-9699CDF3-C01E-4104-8452-8F01443760AC" name="GUID-9699CDF3-C01E-4104-8452-8F01443760AC"></a><h4 id="BRADV-GUID-9699CDF3-C01E-4104-8452-8F01443760AC" class="sect4"><span class="enumeration_section">7.1.2 </span>About Flashback Database Window
                  </h4>
                  <div>
                     <p>The range of SCNs for which there is currently enough flashback log data to support the <code class="codeph">FLASHBACK DATABASE</code> command is called the flashback database window. The flashback database window cannot extend further back than the earliest SCN in the available flashback logs.
                     </p>
                     <p>You cannot back up flashback logs to locations outside the fast recovery area. To increase the likelihood that enough flashback logs are retained to meet the flashback database window, you can increase the space in your fast recovery area (see <span class="q">"<a href="configuring-rman-client-basic.html#GUID-233338E2-3EE6-4248-A2B6-16A7899DB14F__CHDDJJHE" title="This table describes the DB_RECOVERY_FILE_DEST_SIZE and DB_RECOVERY_FILE_DEST parameters.">Table 5-3</a>"</span>).
                     </p>
                     <p>If the fast recovery area is not large enough to hold the flashback logs and files such as archived redo logs and other backups needed for the retention policy, then the database may delete flashback logs from the earliest SCNs forward to make room for other files. Consequently, the flashback database window can be shorter than the flashback retention target, depending on the size of the fast recovery area, other backups that must be retained, and how much flashback logging data is needed. The flashback retention target is a target, not a guarantee that Flashback Database is available.</p>
                     <p>If you cannot use <code class="codeph">FLASHBACK DATABASE</code> because the flashback database window is not long enough, then usually you can use database point-in-time recovery (DBPITR) to achieve a similar result. Guaranteed restore points are the only way to ensure that you can use Flashback Database to return to a specific point in time or guarantee the size of the flashback window.
                     </p>
                     <div class="infoboxnote" id="GUID-9699CDF3-C01E-4104-8452-8F01443760AC__GUID-CA78ADB1-9F49-4235-ADF1-471147F6858A">
                        <p class="notep1">Note:</p>
                        <p>Some database operations, such as dropping a tablespace or shrinking a data file, cannot be reversed with Flashback Database. See <span class="q">"<a href="using-flasback-database-restore-points.html#GUID-28EB12CA-6E98-4ED4-A798-1326E4A938AB" title="Because Flashback Database works by undoing changes to the data files that exist at the moment when you run the command, it has certain limitations.">Limitations of Flashback Database</a>"</span> for details.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-9699CDF3-C01E-4104-8452-8F01443760AC__GUID-CDAA88FD-BB79-406E-882C-4FFBA793F84D">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="rman-performing-flashback-dbpitr.html#GUID-953FA30D-BED2-4DBA-8361-9DA1B8FF073F" title="Flashback Database reverses unwanted changes by returning your database to its state at a previous point in time.">Rewinding a Database with Flashback Database</a> to learn about Flashback Database
                              </p>
                           </li>
                           <li>
                              <p><a href="rman-performing-flashback-dbpitr.html#GUID-7D3EE2F7-77A2-4264-8875-CC0AEC64ABE0" title="RMAN DBPITR restores the database from backups before the target time for recovery, then uses incremental backups and redo to roll the database forward to the target time. You can recover to an SCN, time, log sequence number, or restore point. Oracle recommends that you create restore points at important times to make point-in-time recovery more manageable if it ever becomes necessary.">Performing Database Point-in-Time Recovery</a> to learn about DBPITR
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV286"></a><div class="props_rev_3"><a id="GUID-28EB12CA-6E98-4ED4-A798-1326E4A938AB" name="GUID-28EB12CA-6E98-4ED4-A798-1326E4A938AB"></a><h4 id="BRADV-GUID-28EB12CA-6E98-4ED4-A798-1326E4A938AB" class="sect4"><span class="enumeration_section">7.1.3 </span>Limitations of Flashback Database
                  </h4>
                  <div>
                     <p>Because Flashback Database works by undoing changes to the data files that exist at the moment when you run the command, it has certain limitations.</p>
                     <p>Following are the limitations of Flashback Database:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Flashback Database can only undo changes to a data file made by Oracle Database. It cannot be used to repair media failures, or to recover from accidental deletion of data files.</p>
                        </li>
                        <li>
                           <p>You cannot use Flashback Database to undo a shrink data file operation. However, you can take the shrunken file offline, flash back the rest of the database, and then later restore and recover the shrunken data file.</p>
                        </li>
                        <li>
                           <p>You cannot use Flashback Database alone to retrieve a dropped data file. If you flash back a database to a time when a dropped data file existed in the database, only the data file entry is added to the control file. You can only recover the dropped data file by using RMAN to fully restore and recover the data file.</p>
                        </li>
                        <li>
                           <p>If the database control file is restored from backup or re-created, all accumulated flashback log information is discarded. You cannot use <code class="codeph">FLASHBACK DATABASE</code> to return to a point in time before the restore or re-creation of a control file.
                           </p>
                        </li>
                        <li>
                           <p>When using Flashback Database with a target time at which a <code class="codeph">NOLOGGING</code> operation was in progress, block corruption is likely in the database objects and data files affected by the <code class="codeph">NOLOGGING</code> operation. For example, if you perform a direct-path <code class="codeph">INSERT</code> operation in <code class="codeph">NOLOGGING</code> mode, and that operation runs from 9:00 to 9:15 on April 3, 2005, and you later use Flashback Database to return to the target time 09:07 on that date, the objects and data files updated by the direct-path <code class="codeph">INSERT</code> may be left with block corruption after the Flashback Database operation completes.
                           </p>
                           <p>If possible, avoid using Flashback Database with a target time or SCN that coincides with a <code class="codeph">NOLOGGING</code> operation. Also, perform a full or incremental backup of the affected data files immediately after any <code class="codeph">NOLOGGING</code> operation to ensure recoverability to points in time after the operation. If you expect to use Flashback Database to return to a point in time during an operation such as a direct-path <code class="codeph">INSERT</code>, consider performing the operation in <code class="codeph">LOGGING</code> mode.
                           </p>
                           <div class="infoboxnotealso" id="GUID-28EB12CA-6E98-4ED4-A798-1326E4A938AB__GUID-76D3EF63-9FC7-4084-ACEA-9F811164EAEA">
                              <p class="notep1">See Also:</p>
                              <p><a href="../sqlrf/logging_clause.html#SQLRF30009" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for more information about operations that support<code class="codeph"> NOLOGGING</code> mode.
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV529"></a><div class="props_rev_3"><a id="GUID-1EE0CCDD-BAA4-402B-B808-D228212AF772" name="GUID-1EE0CCDD-BAA4-402B-B808-D228212AF772"></a><h4 id="BRADV-GUID-1EE0CCDD-BAA4-402B-B808-D228212AF772" class="sect4"><span class="enumeration_section">7.1.4 </span>About Normal Restore Points
                  </h4>
                  <div>
                     <p>Creating a normal restore point assigns a restore point name to an SCN or specific point in time.</p>
                     <p>Thus, a restore point functions as a bookmark or alias for this SCN. Before performing any operation that you may have to reverse, you can create a normal restore point. The control file stores the name of the restore point and the SCN.</p>
                     <p>If you use flashback features or point-in-time recovery, then you can use the name of the restore point instead of a time or SCN. The following commands support this use of restore points:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <a href="../rcmrf/RECOVER.html#RCMRF140" target="_blank"><code class="codeph">RECOVER DATABASE</code></a> and <code class="codeph">FLASHBACK DATABASE</code> commands in RMAN 
                           </p>
                        </li>
                        <li>
                           <p>The <a href="../sqlrf/FLASHBACK-TABLE.html#SQLRF01802" target="_blank"><code class="codeph">FLASHBACK TABLE</code></a> statement in SQL
                           </p>
                        </li>
                     </ul>
                     <p>Creating a normal restore point eliminates manually recording an SCN in advance or determine the correct SCN after the fact by using features such as Flashback Query. </p>
                     <p>Normal restore points are lightweight. The control file can maintain a record of thousands of normal restore points with no significant effect on database performance. Normal restore points eventually age out of the control file if not manually deleted, so they require no ongoing maintenance.</p>
                     <div class="infoboxnotealso" id="GUID-1EE0CCDD-BAA4-402B-B808-D228212AF772__GUID-04F2EBB0-9D6A-42CE-A57B-278B783C0C6F">
                        <p class="notep1">See Also:</p>
                        <p><a href="../adfns/flashback.html#ADFNS1008" target="_blank"><span><cite>Oracle Database Development Guide</cite></span></a> to learn how to use Flashback Query
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV530"></a><div class="props_rev_3"><a id="GUID-82523F18-5AE7-40C8-972D-35A9423F19B7" name="GUID-82523F18-5AE7-40C8-972D-35A9423F19B7"></a><h4 id="BRADV-GUID-82523F18-5AE7-40C8-972D-35A9423F19B7" class="sect4"><span class="enumeration_section">7.1.5 </span>About Guaranteed Restore Points
                  </h4>
                  <div>
                     <p>Like a normal restore point, a guaranteed restore point serves as an alias for an SCN in recovery operations. A principal difference is that guaranteed restore points never age out of the control file and must be explicitly dropped. </p>
                     <p>In general, you can use a guaranteed restore point as an alias for an SCN with any command that works with a normal restore point. Except as noted, the information about where and how to use normal restore points applies to guaranteed restore points as well.</p>
                     <p>A guaranteed restore point ensures that you can use Flashback Database to rewind a database to its state at the restore point SCN, even if the generation of <a href="glossary.html#GUID-725ED3D7-5077-4F16-85AA-CDAD5BFCE554"><span class="xrefglossterm">flashback logs</span></a> is disabled. If flashback logging is enabled, then a guaranteed restore point enforces the retention of flashback logs required for Flashback Database to any SCN after the earliest guaranteed restore point. Thus, if flashback logging is enabled, you can rewind the database to any SCN in the continuum rather than to a single SCN only.
                     </p>
                     <div class="infoboxnote" id="GUID-82523F18-5AE7-40C8-972D-35A9423F19B7__GUID-6108369A-D8BC-4DD7-93F6-A811F2A453E9">
                        <p class="notep1">Note:</p>
                        <p>If flashback logging is disabled, then you <span class="italic">cannot</span> <code class="codeph">FLASHBACK DATABASE</code> directly to SCNs between the guaranteed restore points and the current time. You can, however, flashback to the guaranteed restore point first and then recover to SCN's between the guaranteed restore point and current time. 
                        </p>
                     </div>
                     <p>If the recovery area has enough disk space to store the needed logs, then you can use a guaranteed restore point to rewind a whole database to a known good state days or weeks ago. As with Flashback Database, even the effects of <code class="codeph">NOLOGGING</code> operations like direct load inserts can be reversed with guaranteed restore points.
                     </p>
                     <div class="infoboxnote" id="GUID-82523F18-5AE7-40C8-972D-35A9423F19B7__GUID-B993BD4D-AB0A-4E19-B8EA-0FF07F26656E">
                        <p class="notep1">Note:</p>
                        <p>Limitations that apply to Flashback Database also apply to guaranteed restore points. For example, shrinking a data file or dropping a tablespace can prevent flashing back the affected data files to the guaranteed restore point. See <span class="q">"<a href="using-flasback-database-restore-points.html#GUID-28EB12CA-6E98-4ED4-A798-1326E4A938AB" title="Because Flashback Database works by undoing changes to the data files that exist at the moment when you run the command, it has certain limitations.">Limitations of Flashback Database</a>"</span> for details. In addition, when there are guaranteed restore points in the database, the database compatibility parameter cannot be set to a higher database version. An attempt to do so results in an error. This restriction exists because flashback database is currently unable to reverse the effects of increasing the database version with the compatibility initialization parameter.
                        </p>
                     </div>
                  </div><a id="BRADV543"></a><div class="props_rev_3"><a id="GUID-F70E202F-A53C-4E33-AB0F-7091EA3DE608" name="GUID-F70E202F-A53C-4E33-AB0F-7091EA3DE608"></a><h5 id="BRADV-GUID-F70E202F-A53C-4E33-AB0F-7091EA3DE608" class="sect5"><span class="enumeration_section">7.1.5.1 </span>Guaranteed Restore Points versus Storage Snapshots
                     </h5>
                     <div>
                        <p>In practice, guaranteed restore points provide a useful alternative to storage snapshots.</p>
                        <p>Storage snapshots are often used to protect a database before risky operations such as large-scale database updates or application patches or upgrades. Rather than creating a snapshot or <a href="glossary.html#GUID-FFB6CFD5-300C-4290-B3C0-BFD930ACA30C"><span class="xrefglossterm">duplicate database</span></a> to test the operation, you can create a guaranteed restore point on a primary or <a href="glossary.html#GUID-009B3F56-8C1E-4CF6-AF0F-A9D2C2E4B9C2"><span class="xrefglossterm">physical standby database</span></a>. You can then perform the risky operation with the certainty that the required flashback logs are retained.
                        </p>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-1150031F-3C15-40C8-BA91-A387F75DC49A" name="GUID-1150031F-3C15-40C8-BA91-A387F75DC49A"></a><h4 id="BRADV-GUID-1150031F-3C15-40C8-BA91-A387F75DC49A" class="sect4"><span class="enumeration_section">7.1.6 </span>Overview of Restore Points in a Multitenant Environment
                  </h4>
                  <div>
                     <p> You can create both normal and guaranteed restore points in a multitenant environment.</p>
                     <p>The basic concepts of restore points for databases are also applicable to restore points in a multitenant environment. You can create the following types of restore points in a multitenant environment:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>CDB restore point</p>
                        </li>
                        <li>
                           <p>PDB restore point</p>
                        </li>
                        <li>
                           <p>Clean PDB restore point</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-1150031F-3C15-40C8-BA91-A387F75DC49A__GUID-8755F8B6-622E-4F09-B935-65BC555C1852">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="using-flasback-database-restore-points.html#GUID-FAA04D1F-36E2-4B20-954F-845E42386775" title="Oracle Flashback Database and restore points are related data protection features that enable you to rewind data back in time to correct any problems caused by logical data corruption or user errors within a designated time window.">Overview of Flashback Database, Restore Points and Guaranteed Restore Points</a></p>
                           </li>
                           <li>
                              <p><a href="using-flasback-database-restore-points.html#GUID-434CD26D-D3DC-454B-A598-70F64D7C01EB" title="A CDB restore point serves as an alias for an SCN or a point in time in a multitenant container database (CDB). It can be a normal restore point or a guaranteed restore point.">About CDB Restore Points</a></p>
                           </li>
                           <li>
                              <p><a href="using-flasback-database-restore-points.html#GUID-34C48821-B29D-4A2E-94DE-CD97CFA7784E" title="You can create normal and guaranteed restore points in a pluggable database (PDB). PDB restore points are accessible only to the PDB in which they are defined.">About Restore Points in PDBs</a></p>
                           </li>
                           <li>
                              <p><a href="using-flasback-database-restore-points.html#GUID-B48EF079-BBAF-45C3-8FB5-8BA5BBE90BE4" title="Each pluggable database (PDB) has its own namespace for restore points. Therefore, you can define a PDB restore point with the same name in more than one PDB.">About the Namespace for PDB Restore Points</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-434CD26D-D3DC-454B-A598-70F64D7C01EB" name="GUID-434CD26D-D3DC-454B-A598-70F64D7C01EB"></a><h5 id="BRADV-GUID-434CD26D-D3DC-454B-A598-70F64D7C01EB" class="sect5"><span class="enumeration_section">7.1.6.1 </span>About CDB Restore Points
                     </h5>
                     <div>
                        <p> A CDB restore point serves as an alias for an SCN or a point in time in a multitenant container database (CDB). It can be a normal restore point or a guaranteed restore point.</p>
                        <p>CDB restore points are similar to restore points in a non-CDB, except that you need to connect to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege to create them. You can create CDB restore points starting with Oracle Database 12<span class="italic">c</span> Release 1 (12.1). CDB restore points are accessible to every <a href="glossary.html#GUID-D4239448-A344-41EF-9566-0B7716FEAE72"><span class="xrefglossterm">pluggable database (PDB)</span></a> within the CDB. However, a CDB restore point does not reflect the PDB sub-incarnation of any of its PDBs. 
                        </p>
                        <p>CDB restore points are useful in the following scenarios:</p>
                        <div class="p">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The whole CDB needs to be recovered to a particular point in time</p>
                              </li>
                              <li>
                                 <p>Multiple PDBs in a CDB need to be recovered to a particular point in time</p>
                              </li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-434CD26D-D3DC-454B-A598-70F64D7C01EB__GUID-7E1B6E0B-21C0-4318-B1DF-8A200C839894">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="using-flasback-database-restore-points.html#GUID-1150031F-3C15-40C8-BA91-A387F75DC49A" title="You can create both normal and guaranteed restore points in a multitenant environment.">Overview of Restore Points in a Multitenant Environment</a></p>
                              </li>
                              <li>
                                 <p><a href="using-flasback-database-restore-points.html#GUID-34C48821-B29D-4A2E-94DE-CD97CFA7784E" title="You can create normal and guaranteed restore points in a pluggable database (PDB). PDB restore points are accessible only to the PDB in which they are defined.">About Restore Points in PDBs</a></p>
                              </li>
                              <li>
                                 <p><a href="rman-performing-flashback-dbpitr.html#GUID-A2146E48-16FC-40CC-B25D-902DEB93CB75" title="You can perform a Flashback Database operation for a whole multitenant container database (CDB) or for a particular pluggable database (PDB).">Basic Concepts of Performing Flashback Database for CDBs and PDBs</a></p>
                              </li>
                              <li>
                                 <p><a href="rman-performing-flashback-dbpitr.html#GUID-8466CA3C-652A-4AAB-88EB-8815575D6266" title="You can perform a flashback database operation for a whole multitenant container database (CDB) using the FLASHBACK DATABASE command.">Performing a Flashback Database Operation for a Whole CDB</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-34C48821-B29D-4A2E-94DE-CD97CFA7784E" name="GUID-34C48821-B29D-4A2E-94DE-CD97CFA7784E"></a><h5 id="BRADV-GUID-34C48821-B29D-4A2E-94DE-CD97CFA7784E" class="sect5"><span class="enumeration_section">7.1.6.2 </span>About Restore Points in PDBs
                     </h5>
                     <div>
                        <p> You can create normal and guaranteed restore points in a pluggable database (PDB). PDB restore points are accessible only to the PDB in which they are defined.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-34C48821-B29D-4A2E-94DE-CD97CFA7784E__GUID-3D24200C-BF0F-40F9-A313-F7C61DC3D1B1">PDB Restore Points</p>
                           <p>A PDB restore point is a bookmark to a point in time or an SCN in a particular <a href="glossary.html#GUID-D4239448-A344-41EF-9566-0B7716FEAE72"><span class="xrefglossterm">pluggable database (PDB)</span></a>. It pertains only to the PDB for which it is created and is only usable for operations on that PDB. A PDB restore point represents the PDB sub-incarnation of the point in time at which it was created.
                           </p>
                           <p>PDB restore points can be normal restore points or guaranteed restore points. A guaranteed PDB restore point guarantees that you can perform a flashback operation for the PDB to this restore point.</p>
                           <p>A PDB restore point can be used to perform Flashback Database operations or point-in-time recovery only for the PDB in which it was created.</p>
                           <div class="infoboxnote" id="GUID-34C48821-B29D-4A2E-94DE-CD97CFA7784E__GUID-089C70FC-0407-4230-857E-D48FB875DBD3">
                              <p class="notep1">Note:</p>Creating a guaranteed PDB restore point requires careful consideration because such a restore point can prevent required flashback logs in the <a href="glossary.html#GUID-3E156A59-F6CC-4A2A-9749-DB7D1CE25F13"><span class="xrefglossterm">multitenant container database (CDB)</span></a> from being reused. This can potentially impact CDB functioning because the fast recovery area could run out of space.
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-34C48821-B29D-4A2E-94DE-CD97CFA7784E__GUID-E2BAB79B-382A-4B96-AA7B-1208CF6509DE">Clean PDB Restore Points</p>
                           <p>A clean PDB restore point is a PDB restore point that is created when the PDB is closed and when there are no outstanding transactions for that PDB. Clean PDB restore points are only applicable to CDBs that use shared undo. </p>
                           <p>Clean PDB restore points can be normal or guaranteed restore points. Use the <code class="codeph">CREATE CLEAN RESTORE POINT</code> command to explicitly create a clean PDB restore point. For a CDB that uses shared undo, if a PDB is closed and it has no outstanding transactions, any PDB restore point created is marked as a clean PDB restore point.
                           </p>
                           <p>If you anticipate that you may need to rewind a PDB to a particular point in time, for example, to a state just before an application upgrade, then it is recommended that you create a clean PDB guaranteed restore point.</p>
                           <p>For CDBs that use shared undo, a Flashback Database operation to a clean PDB restore point is faster than a Flashback Database operation to an SCN or other restore points that are not clean PDB restore points. This is because RMAN does not need to restore any backups while performing a flashback operation to a clean PDB restore point.</p>
                           <div class="infoboxnotealso" id="GUID-34C48821-B29D-4A2E-94DE-CD97CFA7784E__GUID-3943E87F-DF4B-40DD-852D-191E5BBF2434">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="using-flasback-database-restore-points.html#GUID-B48EF079-BBAF-45C3-8FB5-8BA5BBE90BE4" title="Each pluggable database (PDB) has its own namespace for restore points. Therefore, you can define a PDB restore point with the same name in more than one PDB.">About the Namespace for PDB Restore Points</a></p>
                                 </li>
                                 <li>
                                    <p><a href="using-flasback-database-restore-points.html#GUID-434CD26D-D3DC-454B-A598-70F64D7C01EB" title="A CDB restore point serves as an alias for an SCN or a point in time in a multitenant container database (CDB). It can be a normal restore point or a guaranteed restore point.">About CDB Restore Points</a></p>
                                 </li>
                                 <li>
                                    <p><a href="rman-performing-flashback-dbpitr.html#GUID-A2146E48-16FC-40CC-B25D-902DEB93CB75" title="You can perform a Flashback Database operation for a whole multitenant container database (CDB) or for a particular pluggable database (PDB).">Basic Concepts of Performing Flashback Database for CDBs and PDBs</a></p>
                                 </li>
                                 <li>
                                    <p><a href="rman-performing-flashback-dbpitr.html#GUID-C1215E86-9A7B-4EC9-9777-2A18BD627394" title="You can perform a flashback database operation for a single pluggable database (PDB) in a multitenant container database (CDB) using the FLASHBACK DATABASE command.">Performing a Flashback Database Operation for PDBs</a></p>
                                 </li>
                                 <li>
                                    <p><a href="rman-data-repair-concepts.html#GUID-195FE6CA-9CEB-4ED1-9810-F7323F119D87" title="A pluggable database (PDB) incarnation is a subincarnation of the multitenant container database (CDB) and is expressed as (database_incarnation, pdb_incarnation).">About Incarnations of PDBs</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-B48EF079-BBAF-45C3-8FB5-8BA5BBE90BE4" name="GUID-B48EF079-BBAF-45C3-8FB5-8BA5BBE90BE4"></a><h5 id="BRADV-GUID-B48EF079-BBAF-45C3-8FB5-8BA5BBE90BE4" class="sect5"><span class="enumeration_section">7.1.6.3 </span>About the Namespace for PDB Restore Points
                     </h5>
                     <div>
                        <p> Each pluggable database (PDB) has its own namespace for restore points. Therefore, you can define a PDB restore point with the same name in more than one PDB.</p>
                        <p>In a multitenant environment, when you use a restore point name in a PDB or for a PDB operation, the name is first interpreted as a <a href="glossary.html#GUID-7C3A47D4-B9C5-40D3-89D0-8BD77281AAB1"><span class="xrefglossterm">PDB restore point</span></a> for the concerned PDB. If a PDB restore point with the specified name is not found, then it is interpreted as a <a href="glossary.html#GUID-6BFC6E77-175D-4055-8198-6091D47AD8F6"><span class="xrefglossterm">CDB restore point</span></a>. 
                        </p>
                        <div class="infoboxnotealso" id="GUID-B48EF079-BBAF-45C3-8FB5-8BA5BBE90BE4__GUID-0A64EBF8-E3C5-408F-8C6A-F0A3CF405C9A">
                           <p class="notep1">See Also:</p>
                           <p><a href="using-flasback-database-restore-points.html#GUID-34C48821-B29D-4A2E-94DE-CD97CFA7784E" title="You can create normal and guaranteed restore points in a pluggable database (PDB). PDB restore points are accessible only to the PDB in which they are defined.">About Restore Points in PDBs</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV577"></a><div class="props_rev_3"><a id="GUID-E90F7FBD-CCE2-4234-A3B4-FDFEC3BC2E90" name="GUID-E90F7FBD-CCE2-4234-A3B4-FDFEC3BC2E90"></a><h3 id="BRADV-GUID-E90F7FBD-CCE2-4234-A3B4-FDFEC3BC2E90" class="sect3"><span class="enumeration_section">7.2 </span>About Logging for Flashback Database and Guaranteed Restore Points
               </h3>
               <div>
                  <p>Logging for Flashback Database and guaranteed restore points involves capturing images of data file blocks before changes are applied. The <code class="codeph">FLASHBACK DATABASE</code> command can use these images to return the data files to their previous state.
                  </p>
                  <p>The chief differences between normal flashback logging and logging for guaranteed restore points are related to when blocks are logged and whether the logs can be deleted in response to space pressure in the fast recovery area. These differences affect space usage for logs and database performance.</p>
                  <p>Your recoverability goals partially determine whether to enable logging for flashback database, or use guaranteed restore points, or both. The implications in performance and in space usage for these features, separately and when used together, also factor into your decision.</p>
               </div><a id="BRADV581"></a><div class="props_rev_3"><a id="GUID-36048C35-BCC7-4D1F-8E2A-C2254D732EEE" name="GUID-36048C35-BCC7-4D1F-8E2A-C2254D732EEE"></a><h4 id="BRADV-GUID-36048C35-BCC7-4D1F-8E2A-C2254D732EEE" class="sect4"><span class="enumeration_section">7.2.1 </span>Guaranteed Restore Points and Fast Recovery Area Space Usage 
                  </h4>
                  <div>
                     <p>Certain rules govern the usage of space in the fast recovery area.</p>
                     <p>When you create a guaranteed restore point, with or without enabling full flashback database logging, you must monitor the space available in your fast recovery area. <span class="q">"<a href="maintaining-rman-backups.html#GUID-26C1A1E8-5555-4399-9DD1-39BA90E45A0C" title="You cannot manage the flashback logs in the fast recovery area directly other than by setting the flashback retention target or using guaranteed restore points.">Managing Space for Flashback Logs in the Fast Recovery Area</a>"</span> explains how to monitor fast recovery area disk space usage.
                     </p>
                     <p>The following rules govern creating, retaining, overwriting and deleting of flashback logs in the fast recovery area:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If the fast recovery area has enough space, then a flashback log is created whenever necessary to satisfy the flashback retention target.</p>
                        </li>
                        <li>
                           <p>If a flashback log is old enough that it is no longer needed to satisfy the flashback retention target, then a flashback log is reused.</p>
                        </li>
                        <li>
                           <p>If the database must create a flashback log and the fast recovery area is full or there is no disk space, then the oldest flashback log is reused instead.</p>
                           <div class="infoboxnote" id="GUID-36048C35-BCC7-4D1F-8E2A-C2254D732EEE__GUID-AF4F2CFC-7C8D-4C5D-8922-E0FF099A4C11">
                              <p class="notep1">Note:</p>
                              <p>Reusing the oldest flashback log shortens the flashback database window. If enough flashback logs are reused due to a lack of disk space, then the flashback retention target may not be satisfied. </p>
                           </div>
                        </li>
                        <li>
                           <p>If the fast recovery area is full, then an archived redo log that is reclaimable according to the fast recovery area rules may be automatically deleted by the fast recovery area to make space for other files. In this case, any flashback logs that require the use of that redo log file for the use of <code class="codeph">FLASHBACK DATABASE</code> are also deleted.
                           </p>
                           <div class="infoboxnote" id="GUID-36048C35-BCC7-4D1F-8E2A-C2254D732EEE__GUID-8D953A0A-806D-43DB-AF26-DFA84707E8FE">
                              <p class="notep1">Note:</p>
                              <p>According to fast recovery area rules, a file is reclaimable when one of the following criteria is true: </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The file is reported as obsolete and not needed by the flashback database. For example, the file is outside the <code class="codeph">DB_FLASHBACK_RETENTION_TARGET</code> parameters. 
                                    </p>
                                 </li>
                                 <li>
                                    <p>The file is backed up to tape.</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p>Files in the fast recovery area are not eligible for deletion if they are required to satisfy a guaranteed restore point. However, archived redo logs required to satisfy a guaranteed restore point may be deleted after they are backed up to disk or tape. When you use the RMAN <code class="codeph">FLASHBACK DATABASE</code> command, if the archived redo logs required to satisfy a specified guaranteed restore point are not available in the fast recovery area, they are restored from the backups.
                           </p>
                           <p>Retention of flashback logs and other files required to satisfy the guaranteed restore point, in addition to files required to satisfy the backup retention policy, can cause the fast recovery area to fill completely. Consult <span class="q">"<a href="maintaining-rman-backups.html#GUID-3F11ECB5-1321-45F5-A557-BB1A5BAF011F" title="If the RMAN retention policy requires keeping a set of backups larger than the fast recovery area disk quota, or if the retention policy is set to NONE, then the fast recovery area can fill completely with no reclaimable space.">Responding to a Full Fast Recovery Area</a>"</span> if your fast recovery area becomes full.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-36048C35-BCC7-4D1F-8E2A-C2254D732EEE__GUID-DE859F0F-29CD-4859-9113-B871BD4DC08D">
                        <p class="notep1">Caution:</p>
                        <p>If no files are eligible for deletion from the fast recovery area because of the requirements imposed by your retention policy and the guaranteed restore point, then the database performs as if it has encountered a disk full condition. In many circumstances, this causes your database to halt. See <span class="q">"<a href="maintaining-rman-backups.html#GUID-3F11ECB5-1321-45F5-A557-BB1A5BAF011F" title="If the RMAN retention policy requires keeping a set of backups larger than the fast recovery area disk quota, or if the retention policy is set to NONE, then the fast recovery area can fill completely with no reclaimable space.">Responding to a Full Fast Recovery Area</a>"</span>.
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV584"></a><div class="props_rev_3"><a id="GUID-D0FAAADC-6185-4F8D-A557-18346EE3BDFF" name="GUID-D0FAAADC-6185-4F8D-A557-18346EE3BDFF"></a><h4 id="BRADV-GUID-D0FAAADC-6185-4F8D-A557-18346EE3BDFF" class="sect4"><span class="enumeration_section">7.2.2 </span>About Logging for Guaranteed Restore Points with Flashback Logging Disabled
                  </h4>
                  <div>
                     <p>Assume that you create a guaranteed restore point when logging for Flashback Database is disabled. In this case, the first time a data file block is modified after the time of the guaranteed restore point, the database stores an image of the block before the modification in the flashback logs. Thus, the flashback logs preserve the contents of every changed data block when the guaranteed restore point was created. Later modifications to the same block do not cause the contents to be logged again unless another guaranteed restore point was created after the block was last modified or a subsequent flashback database operation has restored the original contents of the block. When you use Flashback Database to restore a database multiple times to the same restore point, it is common practise to  drop and recreate the guaranteed restore point each time. This deletes the old flashback logs and also ensures that the  space quota for the fast recovery area is not exceeded.</p>
                     <p>This method of logging has the following important consequences:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">FLASHBACK DATABASE</code> can re-create the data file contents at the time of a guaranteed restore point by using the block images. 
                           </p>
                        </li>
                        <li>
                           <p>For workloads that repeatedly modify the same data, disk space usage can be less than normal flashback logging. Less space is needed because each changed block is only logged once. Applications with low volume inserts may benefit from this disk space saving. This advantage is less likely for applications with high volume inserts or large batch inserts. The performance overhead of logging for a guaranteed restore point without flashback database logging enabled can also be lower.</p>
                        </li>
                     </ul>
                     <p>Assume that your primary goal is the ability to return your database to the time at which the guaranteed restore point was created. In this case, it is usually more efficient to turn off flashback logging and use only guaranteed restore points. For example, suppose that you are performing an application upgrade on a database host over a weekend. You could create a guaranteed restore point at the start of the upgrade. If the upgrade fails, then reverse the changes with the <code class="codeph">FLASHBACK DATABASE</code> command.
                     </p>
                  </div>
               </div><a id="BRADV585"></a><div class="props_rev_3"><a id="GUID-502D1646-2A81-4F04-BC3A-1927298A8F8D" name="GUID-502D1646-2A81-4F04-BC3A-1927298A8F8D"></a><h4 id="BRADV-GUID-502D1646-2A81-4F04-BC3A-1927298A8F8D" class="sect4"><span class="enumeration_section">7.2.3 </span>About Logging for Flashback Database with Guaranteed Restore Points Defined
                  </h4>
                  <div>
                     <p>If you enable Flashback Database and define one or more guaranteed restore points, then the database performs normal flashback logging. </p>
                     <p>In this case, the recovery area retains the flashback logs required to flash back to any arbitrary time between the present and the earliest currently defined guaranteed restore point. Flashback logs are not deleted in response to space pressure if they are required to satisfy the guarantee.</p>
                     <p>Flashback logging causes some performance overhead. Depending upon the pattern of activity on your database, it can also cause significant space pressure in the fast recovery area. Thus, you should monitor space used in the fast recovery area.</p>
                  </div>
               </div>
            </div><a id="BRADV587"></a><a id="BRADV588"></a><a id="BRADV586"></a><div class="props_rev_3"><a id="GUID-AE2AD6A0-507A-4E40-A8FF-76AFC88EC56D" name="GUID-AE2AD6A0-507A-4E40-A8FF-76AFC88EC56D"></a><h3 id="BRADV-GUID-AE2AD6A0-507A-4E40-A8FF-76AFC88EC56D" class="sect3"><span class="enumeration_section">7.3 </span>Prerequisites for Flashback Database and Restore Points
               </h3>
               <div>
                  <p>To ensure successful operation of Flashback Database and guaranteed restore points, you must first set some key database options.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-AE2AD6A0-507A-4E40-A8FF-76AFC88EC56D__GUID-87114FE1-B383-4CB4-B570-357182ED62F3">Flashback Database</p>
                  </div>
                  <!-- class="section" -->
                  <p>Configure the following database settings before enabling Flashback Database:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Your database must be running in <code class="codeph">ARCHIVELOG</code> mode, because archived logs are used in the Flashback Database operation.
                        </p>
                     </li>
                     <li>
                        <p>You must have a fast recovery area enabled, because flashback logs can only be stored in the fast recovery area. </p>
                     </li>
                     <li>
                        <p>For Oracle Real Application Clusters (Oracle RAC) databases, the fast recovery area must be in a clustered file system or in ASM.</p>
                        <p></p>
                     </li>
                     <li>
                        <p>For creating restore points in CDBs, the <code class="codeph">COMPATIBLE</code> initialization parameter must be set to 12.1.0 or higher.
                        </p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-AE2AD6A0-507A-4E40-A8FF-76AFC88EC56D__GUID-445F9F3A-43B3-497A-A7DB-D40039A65732">Guaranteed Restore Points</p>
                  </div>
                  <!-- class="section" -->
                  <p>To use guaranteed restore points, the database must satisfy the following additional prerequisite: the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10019" target="_blank"><code class="codeph">COMPATIBLE</code></a> initialization parameter must be set to 10.2.0 or greater.
                  </p>
                  <div class="infoboxnote" id="GUID-AE2AD6A0-507A-4E40-A8FF-76AFC88EC56D__GUID-5DA71B43-3FF6-410F-ADC8-7002C19DA1EA">
                     <p class="notep1">Note:</p>
                     <p>There are no special prerequisites to set before using normal restore points.</p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-AE2AD6A0-507A-4E40-A8FF-76AFC88EC56D__GUID-953B42D0-1F22-4958-BF09-8BC0528FB166">Restore Points in PDBs</p>To create restore points in a <a href="glossary.html#GUID-D4239448-A344-41EF-9566-0B7716FEAE72"><span class="xrefglossterm">pluggable database (PDB)</span></a>, the <code class="codeph">COMPATIBLE</code> initialization parameter must be set to 12.2.0 or higher.
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV589"></a><div class="props_rev_3"><a id="GUID-2C846D84-EDCC-4FAA-9F6A-05CD0C6C7C09" name="GUID-2C846D84-EDCC-4FAA-9F6A-05CD0C6C7C09"></a><h3 id="BRADV-GUID-2C846D84-EDCC-4FAA-9F6A-05CD0C6C7C09" class="sect3"><span class="enumeration_section">7.4 </span>Using Normal and Guaranteed Restore Points
               </h3>
               <div>
                  <p>You can create, monitor, and drop both normal and guaranteed restore points.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="using-flasback-database-restore-points.html#GUID-1FD69FF6-F131-47D6-9ED8-592FEA1D13E1" title="To create normal or guaranteed restore points, use the CREATE RESTORE POINT SQL statement, providing a name for the restore point and specifying whether it is to be a guaranteed restore point or a normal one (the default).">Creating Normal and Guaranteed Restore Points in non-CDBs</a></p>
                     </li>
                     <li>
                        <p><a href="using-flasback-database-restore-points.html#GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB" title="The CREATE RESTORE POINT SQL command enables you to create normal and guaranteed restore points in a multitenant container database (CDB).">Creating CDB Restore Points</a></p>
                     </li>
                     <li>
                        <p><a href="using-flasback-database-restore-points.html#GUID-9363C4B9-48E5-470F-B13B-43FA56667978" title="You use the CREATE RESTORE POINT SQL statement to create restore points in a pluggable database (PDB).">Creating PDB Restore Points</a></p>
                     </li>
                     <li>
                        <p><a href="using-flasback-database-restore-points.html#GUID-305E9D61-0F50-4885-891C-A7D86C6D3C8D">Listing Restore Points Using the LIST Command</a></p>
                     </li>
                     <li>
                        <p><a href="using-flasback-database-restore-points.html#GUID-1A583D44-66CB-4D21-B170-2A07CFF6EE65" title="You can use the V$RESTORE_POINT control file view to obtain information about all currently-defined restore points (normal and guaranteed), including CDB restore points and PDB restore points.">Listing Restore Points Using the V$RESTORE_POINT View</a></p>
                     </li>
                     <li>
                        <p><a href="using-flasback-database-restore-points.html#GUID-A1563822-015B-4941-B7EB-C3D44A63232C" title="When you are satisfied that you do not need an existing restore point, or when you want to create a restore point with the name of an existing restore point, you can drop the restore point, using the DROP RESTORE POINT SQL*Plus statement.">Dropping Restore Points</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV591"></a><a id="BRADV590"></a><div class="props_rev_3"><a id="GUID-1FD69FF6-F131-47D6-9ED8-592FEA1D13E1" name="GUID-1FD69FF6-F131-47D6-9ED8-592FEA1D13E1"></a><h4 id="BRADV-GUID-1FD69FF6-F131-47D6-9ED8-592FEA1D13E1" class="sect4"><span class="enumeration_section">7.4.1 </span>Creating Normal and Guaranteed Restore Points in non-CDBs
                  </h4>
                  <div>
                     <p>To create normal or guaranteed restore points, use the <code class="codeph">CREATE RESTORE POINT</code> SQL statement, providing a name for the restore point and specifying whether it is to be a guaranteed restore point or a normal one (the default).
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1FD69FF6-F131-47D6-9ED8-592FEA1D13E1__GUID-57886AAB-2D06-490D-A9CC-7CDEB295EF52">To create a restore point:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect SQL*Plus to a target database. </span><div>
                              <div class="infoboxnotealso" id="GUID-1FD69FF6-F131-47D6-9ED8-592FEA1D13E1__GUID-B60F84B6-AF9E-436D-8665-24189928BC26">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=ADMIN-GUID-7842AF72-DA25-4559-A8E7-9883D0C63BF2" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for using SQL*Plus to connect to a database
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Ensure that the database is open or mounted. If the database is mounted, then it must have been shut down cleanly (unless it is a physical standby database).</span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CREATE RESTORE POINT</code> statement.</span><div>
                              <p>The following example shows how to create a normal restore point in SQL*Plus:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE RESTORE POINT before_upgrade;
</pre><p>This example shows how to create a guaranteed restore point:</p><pre class="pre codeblock"><code>SQL&gt; CREATE RESTORE POINT before_upgrade GUARANTEE FLASHBACK DATABASE;</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-1FD69FF6-F131-47D6-9ED8-592FEA1D13E1__GUID-2071B65F-23F8-44AF-A55F-C3E871D9D02B">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../sqlrf/CREATE-RESTORE-POINT.html#SQLRF20001" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for reference information about the SQL <code class="codeph">CREATE RESTORE POINT</code> statement
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-flasback-database-restore-points.html#GUID-305E9D61-0F50-4885-891C-A7D86C6D3C8D">Listing Restore Points Using the LIST Command</a>"</span> to learn how to list restore point
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-flasback-database-restore-points.html#GUID-A1563822-015B-4941-B7EB-C3D44A63232C" title="When you are satisfied that you do not need an existing restore point, or when you want to create a restore point with the name of an existing restore point, you can drop the restore point, using the DROP RESTORE POINT SQL*Plus statement.">Dropping Restore Points</a>"</span> to learn how to delete restore points
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB" name="GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB"></a><h4 id="BRADV-GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB" class="sect4"><span class="enumeration_section">7.4.2 </span>Creating CDB Restore Points
                  </h4>
                  <div>
                     <p>The <code class="codeph">CREATE RESTORE POINT</code> SQL command enables you to create normal and guaranteed restore points in a multitenant container database (CDB).
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB__GUID-B7C0E398-DF3B-4609-A3BF-8F0F7B56CF41">To create a CDB restore point:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Ensure that the prerequisites described in <a href="using-flasback-database-restore-points.html#GUID-AE2AD6A0-507A-4E40-A8FF-76AFC88EC56D" title="To ensure successful operation of Flashback Database and guaranteed restore points, you must first set some key database options.">Prerequisites for Flashback Database and Restore Points</a> are satisfied.</span></li>
                        <li class="stepexpand"><span>Connect SQL*Plus to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span></li>
                        <li class="stepexpand"><span>Ensure that the CDB is open or mounted. If the CDB is mounted, then it must have been shut down cleanly (unless it is a physical standby database).</span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CREATE RESTORE POINT</code> statement to create a <a href="glossary.html#GUID-6BFC6E77-175D-4055-8198-6091D47AD8F6"><span class="xrefglossterm">CDB restore point</span></a>.</span><div>
                              <p>The following command creates a normal CDB restore point:</p><pre class="pre codeblock"><code>SQL&gt; CREATE RESTORE POINT cdb_before_upgrade;</code></pre><p>The following command creates a guaranteed CDB restore point:</p><pre class="pre codeblock"><code>SQL&gt; CREATE RESTORE POINT cdb_grp_before_upgrade GUARANTEE FLASHBACK DATABASE;</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB__GUID-AD694122-9165-4FD8-A398-FB92EB1E0454">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="using-flasback-database-restore-points.html#GUID-434CD26D-D3DC-454B-A598-70F64D7C01EB" title="A CDB restore point serves as an alias for an SCN or a point in time in a multitenant container database (CDB). It can be a normal restore point or a guaranteed restore point.">About CDB Restore Points</a></p>
                              </li>
                              <li>
                                 <p><a href="using-flasback-database-restore-points.html#GUID-9363C4B9-48E5-470F-B13B-43FA56667978" title="You use the CREATE RESTORE POINT SQL statement to create restore points in a pluggable database (PDB).">Creating PDB Restore Points</a></p>
                              </li>
                              <li>
                                 <p><a href="using-flasback-database-restore-points.html#GUID-1A583D44-66CB-4D21-B170-2A07CFF6EE65" title="You can use the V$RESTORE_POINT control file view to obtain information about all currently-defined restore points (normal and guaranteed), including CDB restore points and PDB restore points.">Listing Restore Points Using the V$RESTORE_POINT View</a></p>
                              </li>
                              <li>
                                 <p><a href="../admin/getting-started-with-database-administration.html#ADMIN-GUID-7842AF72-DA25-4559-A8E7-9883D0C63BF2" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for the steps to connect SQL*Plus to the root
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9363C4B9-48E5-470F-B13B-43FA56667978" name="GUID-9363C4B9-48E5-470F-B13B-43FA56667978"></a><h4 id="BRADV-GUID-9363C4B9-48E5-470F-B13B-43FA56667978" class="sect4"><span class="enumeration_section">7.4.3 </span>Creating PDB Restore Points
                  </h4>
                  <div>
                     <p>You use the <code class="codeph">CREATE RESTORE POINT</code> SQL statement to create restore points in a pluggable database (PDB).
                     </p>
                     <div class="section">The restore point can be a normal <a href="glossary.html#GUID-7C3A47D4-B9C5-40D3-89D0-8BD77281AAB1"><span class="xrefglossterm">PDB restore point</span></a>, guaranteed PDB restore point, or clean PDB restore point. You can create PDB restore points either when connected to the PDB or to the root.
                     </div>
                     <!-- class="section" -->
                     <div class="section">When a PDB uses shared undo, you can create a clean restore point only if the PDB does not have any outstanding transactions.</div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9363C4B9-48E5-470F-B13B-43FA56667978__GUID-F760138D-D0B8-42E5-B91E-C6F52F5C17D7">To create a PDB restore point when connected to the PDB:</p>
                        <ol>
                           <li>
                              <p>Ensure that the prerequisites described in <a href="using-flasback-database-restore-points.html#GUID-AE2AD6A0-507A-4E40-A8FF-76AFC88EC56D" title="To ensure successful operation of Flashback Database and guaranteed restore points, you must first set some key database options.">Prerequisites for Flashback Database and Restore Points</a> are met.
                              </p>
                           </li>
                           <li>
                              <p>Connect SQL*Plus to the PDB as a common user or local user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>If you are creating a clean PDB restore point in a CDB that uses shared undo, then the PDB must be closed.</p>
                              <p>The following command displays the state of the PDB:</p><pre class="pre codeblock"><code>SQL&gt; SELECT name, open_mode FROM V$PDBs;</code></pre><p>Use the following command to close the PDB:</p><pre class="pre codeblock"><code>SQL&gt; ALTER PLUGGABLE DATABASE CLOSE;</code></pre></li>
                           <li>
                              <p>If the <a href="glossary.html#GUID-3E156A59-F6CC-4A2A-9749-DB7D1CE25F13"><span class="xrefglossterm">multitenant container database (CDB)</span></a> is in mounted state, then it must have been shut down consistently (unless it is a physical standby database).
                              </p>
                           </li>
                           <li>
                              <p>Set the current container to the PDB.</p>
                              <p>The following command sets to current container to the PDB <code class="codeph">my_pdb</code>:
                              </p><pre class="pre codeblock"><code>SQL&gt; ALTER SESSION SET CONTAINER=my_pdb;</code></pre></li>
                           <li>
                              <p>Create a PDB restore point by using the <code class="codeph">CREATE RESTORE POINT</code> command.
                              </p>
                              <p>The following command creates a normal PDB restore point:</p><pre class="pre codeblock"><code>SQL&gt; CREATE RESTORE POINT before_patching;</code></pre><p>The following command creates a guaranteed PDB restore point:</p><pre class="pre codeblock"><code>SQL&gt; CREATE RESTORE POINT before_upgrade GUARENTEE FLASHBACK DATABASE;</code></pre><p>The following command explicitly creates a clean PDB restore point. If a clean restore point cannot be created, then an error is returned.</p><pre class="pre codeblock"><code>SQL&gt; CREATE CLEAN RESTORE POINT before_patching;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9363C4B9-48E5-470F-B13B-43FA56667978__GUID-9214C3FA-54CD-460D-AD18-A35E8F07AC13">To create a PDB restore point when connected to the CDB:</p>
                        <p></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Ensure that the prerequisites described in <a href="using-flasback-database-restore-points.html#GUID-AE2AD6A0-507A-4E40-A8FF-76AFC88EC56D" title="To ensure successful operation of Flashback Database and guaranteed restore points, you must first set some key database options.">Prerequisites for Flashback Database and Restore Points</a> are met.</span></li>
                        <li class="stepexpand"><span>Connect SQL*Plus to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span></li>
                        <li class="stepexpand"><span>If you are creating a clean PDB restore point in a CDB that uses shared undo, then the PDB must be closed.</span><div>The following command closes the PDB <code class="codeph">my_pdb</code>:
                           </div>
                           <div><pre class="pre codeblock"><code>SQL&gt; ALTER PLUGGABLE DATABASE my_pdb CLOSE;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>The CDB that contains the PDB can be open or mounted. If the CDB is mounted, then it must have been shut down consistently (unless it is a physical standby database).</span><div>
                              <p>The following commands place the CDB in a mounted state:</p>
                           </div>
                           <div><pre class="pre codeblock"><code>SQL&gt; SHUTDOWN IMMEDIATE;
SQL&gt; STARTUP MOUNT;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Set the current container to the root.</span><div><code class="codeph">SQL&gt; ALTER SESSION SET CONTAINER = CDB$ROOT;</code></div>
                        </li>
                        <li class="stepexpand"><span>Create a PDB restore point by using the <code class="codeph">CREATE RESTORE POINT</code> command with the <code class="codeph">FOR PLUGGABLE DATABASE</code> clause.</span><div>The following command creates a normal PDB restore point:<pre class="pre codeblock"><code>SQL&gt; CREATE RESTORE POINT mypdb_before_patching FOR PLUGGABLE DATABASE my_pdb;</code></pre><p>The following command creates a guaranteed PDB restore point:</p><pre class="pre codeblock"><code>SQL&gt; CREATE RESTORE POINT mypdb_grp_before_upgrade FOR PLUGGABLE DATABASE my_pdb GUARANTEE FLASHBACK DATABASE;</code></pre><p>The following command explicitly creates a clean PDB restore point (when the PDB is closed and has no pending transactions). If the restore point cannot be created, then an error is displayed.</p><pre class="pre codeblock"><code>SQL&gt; CREATE CLEAN RESTORE POINT mypdb_crp_before_patching FOR PLUGGABLE DATABASE my_pdb;</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-9363C4B9-48E5-470F-B13B-43FA56667978__GUID-9CB8C1F3-2282-4E0A-819A-5401961C8FC5">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="rman-performing-flashback-dbpitr.html#GUID-66B1A12D-1C92-43B5-A204-AA8A6D177ABD" title="A multitenant container database (CDB) can use shared undo or local undo. The technique used by RMAN to perform flashback database operations depends on the type of undo configuration for the CDB.">About Undo and Flashback Database Operations for PDBs</a></p>
                              </li>
                              <li>
                                 <p><a href="using-flasback-database-restore-points.html#GUID-34C48821-B29D-4A2E-94DE-CD97CFA7784E" title="You can create normal and guaranteed restore points in a pluggable database (PDB). PDB restore points are accessible only to the PDB in which they are defined.">About Restore Points in PDBs</a></p>
                              </li>
                              <li>
                                 <p><a href="using-flasback-database-restore-points.html#GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB" title="The CREATE RESTORE POINT SQL command enables you to create normal and guaranteed restore points in a multitenant container database (CDB).">Creating CDB Restore Points</a></p>
                              </li>
                              <li>
                                 <p><a href="../admin/getting-started-with-database-administration.html#ADMIN-GUID-7842AF72-DA25-4559-A8E7-9883D0C63BF2" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for the steps to connect SQL*Plus to the root
                                 </p>
                              </li>
                              <li>
                                 <p><a href="using-flasback-database-restore-points.html#GUID-1A583D44-66CB-4D21-B170-2A07CFF6EE65" title="You can use the V$RESTORE_POINT control file view to obtain information about all currently-defined restore points (normal and guaranteed), including CDB restore points and PDB restore points.">Listing Restore Points Using the V$RESTORE_POINT View</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV592"></a><div class="props_rev_3"><a id="GUID-305E9D61-0F50-4885-891C-A7D86C6D3C8D" name="GUID-305E9D61-0F50-4885-891C-A7D86C6D3C8D"></a><h4 id="BRADV-GUID-305E9D61-0F50-4885-891C-A7D86C6D3C8D" class="sect4"><span class="enumeration_section">7.4.4 </span>Listing Restore Points Using the LIST Command
                  </h4>
                  <div>
                     <div class="section">
                        <p></p>
                        <p><a id="d33613e2822" class="indexterm-anchor"></a>You can use the <code class="codeph">LIST</code> command to list either a specific restore point or all restore points known to the RMAN repository. The variations of the command are as follows:
                        </p><pre class="oac_no_warn" dir="ltr">LIST RESTORE POINT <span class="italic">restore_point_name</span>;
LIST RESTORE POINT ALL;
</pre><p>RMAN indicates the SCN and time of the restore point, the type of restore point, and the name of the restore point. The following example shows sample output:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; LIST RESTORE POINT ALL;
 
using target database control file instead of recovery catalog
SCN              RSP Time  Type       Time      Name
---------------- --------- ---------- --------- ----
341859           28-APR-15            28-APR-15 NORMAL_RS
343690           28-APR-15 GUARANTEED 28-APR-15 GUARANTEED_RS
</pre><div class="infoboxnote" id="GUID-305E9D61-0F50-4885-891C-A7D86C6D3C8D__GUID-05810482-DBDD-4011-8594-16F5B12B8E47">
                           <p class="notep1">Note:</p>The <code class="codeph">LIST</code> command does not display details such as the PDB incarnation number and whether a restore point is a PDB restore point. To view additional details about restore points in a multitenant environment, see <a href="using-flasback-database-restore-points.html#GUID-1A583D44-66CB-4D21-B170-2A07CFF6EE65" title="You can use the V$RESTORE_POINT control file view to obtain information about all currently-defined restore points (normal and guaranteed), including CDB restore points and PDB restore points.">Listing Restore Points Using the V$RESTORE_POINT View</a>.
                        </div>
                        <div class="infoboxnotealso" id="GUID-305E9D61-0F50-4885-891C-A7D86C6D3C8D__GUID-4195DB14-20E0-460E-A713-BCFED405EB8B">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="rman-performing-flashback-dbpitr.html#GUID-953FA30D-BED2-4DBA-8361-9DA1B8FF073F" title="Flashback Database reverses unwanted changes by returning your database to its state at a previous point in time.">Rewinding a Database with Flashback Database</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-1A583D44-66CB-4D21-B170-2A07CFF6EE65" name="GUID-1A583D44-66CB-4D21-B170-2A07CFF6EE65"></a><h4 id="BRADV-GUID-1A583D44-66CB-4D21-B170-2A07CFF6EE65" class="sect4"><span class="enumeration_section">7.4.5 </span>Listing Restore Points Using the V$RESTORE_POINT View
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">V$RESTORE_POINT</code> control file view to obtain information about all currently-defined restore points (normal and guaranteed), including CDB restore points and PDB restore points.
                     </p>
                     <div class="section">The <code class="codeph">V$RESTORE_POINT</code> view contains additional information about restore points in a multitenant environment that is not displayed by the <code class="codeph">LIST RESTORE POINT</code> command. This includes details such as the incarnation of the <a href="glossary.html#GUID-D4239448-A344-41EF-9566-0B7716FEAE72"><span class="xrefglossterm">pluggable database (PDB)</span></a> in which a <a href="glossary.html#GUID-7C3A47D4-B9C5-40D3-89D0-8BD77281AAB1"><span class="xrefglossterm">PDB restore point</span></a> was created and whether a restore point is a PDB restore point or clean PDB restore point.
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>The following steps display information about PDB restore points for all PDBs in the CDB:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect SQL*Plus to the target database. If the target database is a <a href="glossary.html#GUID-3E156A59-F6CC-4A2A-9749-DB7D1CE25F13"><span class="xrefglossterm">multitenant container database (CDB)</span></a>, then connect to the root.</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>To view restore points for all PDBs, you must connect to the root as a common use with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                                    </p>
                                 </li>
                                 <li>
                                    <p>To view the restore points in a particular PDB, you can connect to that PDB as a common user or local user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Query the <code class="codeph">V$RESTORE_POINT</code> view to display information about restore points.</span></li>
                     </ol>
                     <div class="example" id="GUID-1A583D44-66CB-4D21-B170-2A07CFF6EE65__GUID-242EBFA4-87DC-4B01-9AFD-80AE6FDF7B1F">
                        <p class="titleinexample">Example 7-1 Displaying Restore Points in a Multitenant Environment</p>
                        <p></p>
                        <p>The following query displays details about all restore points in a multitenant environment (query output formatted to fit in the page):</p><pre class="oac_no_warn" dir="ltr">SELECT name, guarantee_flashback_database, pdb_restore_point, clean_pdb_restore_point, pdb_incarnation#, storage_sizeFROM v$restore_point;</pre><pre class="oac_no_warn" dir="ltr">NAME                         GUARANTEE_  PDB_RESTORE_POINT  CLEAN_PDB_RESTORE_POINT  STORAGE_SIZE
--------                     ----------  ----------------   -----------------------  ------------
CDB_GRP_BEFORE_PATCH            YES         NO                  NO                     84586
PDB_GRP_BEFORE_UPGRADE_TEMP     YES         YES                 NO                      4562
CDB_RP1                         NO          NO                  NO                         0
PDB1_BEFORE_PATCHING            NO          YES                 NO                         0
MYPDB_CLEAN_GRP_BEFORE_UPGRADE  NO          YES                 YES                        0    

</pre><p>For normal restore points, <code class="codeph">STORAGE_SIZE</code> is zero. For guaranteed restore points, <code class="codeph">STORAGE_SIZE</code> indicates the approximate number of bytes of disk space in the fast recovery area that is tied up retaining logs required to guarantee <code class="codeph">FLASHBACK</code> <code class="codeph">DATABASE</code> to that restore point.
                        </p>
                        <div class="infoboxnotealso" id="GUID-1A583D44-66CB-4D21-B170-2A07CFF6EE65__GUID-00A96BB4-D232-4EF6-B0E6-C85EE99731E5">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../refrn/V-RESTORE_POINT.html#REFRN30390" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about <code class="codeph">V$RESTORE_POINT</code></p>
                              </li>
                              <li>
                                 <p><a href="using-flasback-database-restore-points.html#GUID-305E9D61-0F50-4885-891C-A7D86C6D3C8D">Listing Restore Points Using the LIST Command</a></p>
                              </li>
                              <li>
                                 <p><a href="rman-performing-flashback-dbpitr.html#GUID-953FA30D-BED2-4DBA-8361-9DA1B8FF073F" title="Flashback Database reverses unwanted changes by returning your database to its state at a previous point in time.">Rewinding a Database with Flashback Database</a></p>
                              </li>
                              <li>
                                 <p><a href="rman-performing-flashback-dbpitr.html#GUID-8466CA3C-652A-4AAB-88EB-8815575D6266" title="You can perform a flashback database operation for a whole multitenant container database (CDB) using the FLASHBACK DATABASE command.">Performing a Flashback Database Operation for a Whole CDB</a></p>
                              </li>
                              <li>
                                 <p><a href="rman-performing-flashback-dbpitr.html#GUID-C1215E86-9A7B-4EC9-9777-2A18BD627394" title="You can perform a flashback database operation for a single pluggable database (PDB) in a multitenant container database (CDB) using the FLASHBACK DATABASE command.">Performing a Flashback Database Operation for PDBs</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="BRADV593"></a><div class="props_rev_3"><a id="GUID-A1563822-015B-4941-B7EB-C3D44A63232C" name="GUID-A1563822-015B-4941-B7EB-C3D44A63232C"></a><h4 id="BRADV-GUID-A1563822-015B-4941-B7EB-C3D44A63232C" class="sect4"><span class="enumeration_section">7.4.6 </span>Dropping Restore Points
                  </h4>
                  <div>
                     <p>When you are satisfied that you do not need an existing restore point, or when you want to create a restore point with the name of an existing restore point, you can drop the restore point, using the <code class="codeph">DROP RESTORE POINT</code> SQL*Plus statement. 
                     </p>
                     <div class="section">
                        <p>For example:</p><pre class="pre codeblock"><code>SQL&gt; DROP RESTORE POINT before_app_upgrade;
Restore point dropped.
</code></pre><p>The same statement is used to drop both normal and guaranteed restore points.</p>
                        <div class="infoboxnote" id="GUID-A1563822-015B-4941-B7EB-C3D44A63232C__GUID-C8141E34-1290-4E83-BDEE-5C4A65BA07D2">
                           <p class="notep1">Note:</p>
                           <p>Normal restore points eventually age out of the control file, even if not explicitly dropped. The rules governing retention of restore points in the control file are:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The most recent 2048 restore points are always kept in the control file, regardless of their age.</p>
                              </li>
                              <li>
                                 <p>Any restore point more recent than the value of <code class="codeph">CONTROL_FILE_RECORD_KEEP_TIME</code> is retained, regardless of how many restore points are defined.
                                 </p>
                              </li>
                           </ul>
                           <p>Normal restore points that do not meet either of these conditions may age out of the control file.</p>
                        </div>
                        <p>Guaranteed restore points never age out of the control file. They remain until they are explicitly dropped.</p>
                        <div class="infoboxnote" id="GUID-A1563822-015B-4941-B7EB-C3D44A63232C__GUID-CF9D23CC-90DF-4B8C-B01A-0FF25B10A8E0">
                           <p class="notep1">See also:</p>
                           <p><a href="../sqlrf/DROP-RESTORE-POINT.html#SQLRF20002" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for reference information about the SQL <code class="codeph">DROP RESTORE POINT</code> statement
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV594"></a><div class="props_rev_3"><a id="GUID-4E96DB60-3616-4680-866A-F38A6049053A" name="GUID-4E96DB60-3616-4680-866A-F38A6049053A"></a><h3 id="BRADV-GUID-4E96DB60-3616-4680-866A-F38A6049053A" class="sect3"><span class="enumeration_section">7.5 </span>Using Flashback Database
               </h3>
               <div>
                  <p>To use flashback logging for a target database, you must enable Flashback Database. Certain guidelines can be followed to ensure optimal performance of Flashback Database. </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="using-flasback-database-restore-points.html#GUID-FC98B2D7-9F18-4A62-BE4A-E97A0AA10BF4" title="Use the ALTER DATABASE command to enable Flashback Database">Enabling Flashback Database</a></p>
                     </li>
                     <li>
                        <p><a href="using-flasback-database-restore-points.html#GUID-B343C3D9-0CA1-49E5-AC62-1E872E9966A6" title="Use the ALTER DATABASE command to disable Flashback Database.">Disabling Flashback Database Logging</a></p>
                     </li>
                     <li>
                        <p><a href="using-flasback-database-restore-points.html#GUID-A214980E-8DF5-49A3-A2CF-35C90E74A045" title="Maintaining flashback logs imposes comparatively limited overhead on an database instance. Changed blocks are written from memory to the flashback logs at relatively infrequent, regular intervals, to limit processing and I/O overhead.">Configuring the Environment for Optimal Flashback Database Performance</a></p>
                     </li>
                     <li>
                        <p><a href="using-flasback-database-restore-points.html#GUID-19A3894F-22A9-49B1-91F4-951E9824C95F" title="Several data analysis methods are available to monitor the Flashback Database workload on your system.">Monitoring the Effect of Flashback Database on Performance</a></p>
                     </li>
                     <li>
                        <p><a href="using-flasback-database-restore-points.html#GUID-C6E3FBBA-188F-4D26-AC7D-31ED3D190E88" title="When flashback is enabled or when there are guaranteed restore points, the background process RVWR writes flashback data to flashback database logs in the fast recovery area.">About Flashback Writer (RVWR) Behavior with I/O Errors</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV596"></a><a id="BRADV595"></a><div class="props_rev_3"><a id="GUID-FC98B2D7-9F18-4A62-BE4A-E97A0AA10BF4" name="GUID-FC98B2D7-9F18-4A62-BE4A-E97A0AA10BF4"></a><h4 id="BRADV-GUID-FC98B2D7-9F18-4A62-BE4A-E97A0AA10BF4" class="sect4"><span class="enumeration_section">7.5.1 </span>Enabling Flashback Database
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">ALTER DATABASE</code> command to enable Flashback Database
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-FC98B2D7-9F18-4A62-BE4A-E97A0AA10BF4__GUID-A6BCA30F-8B5E-4EE6-BC8E-C58DEF3AF562">To enable flashback logging:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Configure the recovery area as described in <span class="q">"<a href="configuring-rman-client-basic.html#GUID-233338E2-3EE6-4248-A2B6-16A7899DB14F" title="You enable the fast recovery area by setting two initialization parameters. These parameters enable the fast recovery area with or without having to shut down and restart the database instance.">Enabling the Fast Recovery Area</a>"</span>.</span></li>
                        <li class="stepexpand"><span>Ensure the database instance is open or mounted. If the instance is mounted, then the database must be shut down cleanly unless it is a physical standby database. Other Oracle Real Application Clusters (Oracle RAC) instances can be in any mode.</span></li>
                        <li class="stepexpand"><span>Optionally, set the <code class="codeph">DB_FLASHBACK_RETENTION_TARGET</code> to the length of the desired flashback window in minutes:</span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET DB_FLASHBACK_RETENTION_TARGET=4320 SCOPE=BOTH; # 3 days
</pre><p>By default <code class="codeph">DB_FLASHBACK_RETENTION_TARGET</code> is set to 1 day (1440 minutes). 
                              </p>
                              <div class="infoboxnote" id="GUID-FC98B2D7-9F18-4A62-BE4A-E97A0AA10BF4__GUID-7D7A30FD-341C-4C0D-8B66-FA5049E0ACB1">
                                 <p class="notep1">Note:</p>
                                 <p>This setting must be persistent across database startup and shutdown.</p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Enable the Flashback Database feature for the whole database:</span><div><pre class="pre codeblock"><code>ALTER DATABASE FLASHBACK ON;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Optionally, disable flashback logging for specific tablespaces.</span><div>
                              <p>By default, flashback logs are generated for all permanent tablespaces. You can reduce overhead by disabling flashback logging for specific tablespaces as in the following example:</p><pre class="pre codeblock"><code>ALTER TABLESPACE tbs_3 FLASHBACK OFF;
</code></pre><p>You can re-enable flashback logging for a tablespace later with this command:</p><pre class="pre codeblock"><code>ALTER TABLESPACE tbs_3 FLASHBACK ON;</code></pre><p>If you disable Flashback Database for a tablespace, then you must take its data files offline before running <code class="codeph">FLASHBACK</code> <code class="codeph">DATABASE</code>. 
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>When you enable Flashback Database while the database is open, there is a very small chance the command may not be able to obtain the memory it needs. If the command fails because of that reason, retry the command after a while or retry after a shutdown and restart of the instance.</p>
                        <p>When you enable Flashback Database on a <a href="glossary.html#GUID-009B3F56-8C1E-4CF6-AF0F-A9D2C2E4B9C2"><span class="xrefglossterm">physical standby database</span></a>, you can flash back a standby database. Flashback Database of standby databases has some applications in the Data Guard environment. 
                        </p>
                        <div class="infoboxnotealso" id="GUID-FC98B2D7-9F18-4A62-BE4A-E97A0AA10BF4__GUID-674A0CA8-6517-4278-ABFA-29FAF383F2AF">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sbydb/examples-of-using-oracle-data-guard.html#SBYDB4891" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> for details about standby databases
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV597"></a><div class="props_rev_3"><a id="GUID-B343C3D9-0CA1-49E5-AC62-1E872E9966A6" name="GUID-B343C3D9-0CA1-49E5-AC62-1E872E9966A6"></a><h4 id="BRADV-GUID-B343C3D9-0CA1-49E5-AC62-1E872E9966A6" class="sect4"><span class="enumeration_section">7.5.2 </span>Disabling Flashback Database Logging
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">ALTER DATABASE</code> command to disable Flashback Database.
                     </p>
                     <div class="section">
                        <p>On a database instance that is either in mount or open state, issue the following command:</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE FLASHBACK OFF;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV598"></a><div class="props_rev_3"><a id="GUID-A214980E-8DF5-49A3-A2CF-35C90E74A045" name="GUID-A214980E-8DF5-49A3-A2CF-35C90E74A045"></a><h4 id="BRADV-GUID-A214980E-8DF5-49A3-A2CF-35C90E74A045" class="sect4"><span class="enumeration_section">7.5.3 </span>Configuring the Environment for Optimal Flashback Database Performance
                  </h4>
                  <div>
                     <p>Maintaining flashback logs imposes comparatively limited overhead on an database instance. Changed blocks are written from memory to the flashback logs at relatively infrequent, regular intervals, to limit processing and I/O overhead. </p>
                     <div class="section">
                        <p>To achieve good performance for large production databases with Flashback Database enabled, Oracle recommends the following: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use a fast file system for your fast recovery area, preferably without operating system file caching. </p>
                              <p>Files that the database creates in the fast recovery area, including flashback logs, are typically large. Operating system file caching is typically not effective for these files, and may actually add CPU overhead for reading from and writing to these files. Thus, it is recommended to use a file system that avoids operating system file caching, such as Automatic Storage Management (ASM).</p>
                           </li>
                           <li>
                              <p>Configure enough disk spindles for the file system that holds the fast recovery area. </p>
                              <p>For large production databases, multiple disk spindles may be needed to support the required disk throughput for the database to write the flashback logs effectively.</p>
                           </li>
                           <li>
                              <p>If the storage system used to hold the fast recovery area does not have nonvolatile RAM, then try to configure the file system on striped storage volumes.</p>
                              <p>Use a relatively small stripe size such as 128 KB. This technique enables each write to the flashback logs to be spread across multiple spindles, improving performance.</p>
                           </li>
                           <li>
                              <p>For large databases, set the initialization parameter <code class="codeph">LOG_BUFFER</code> to at least 8 MB. 
                              </p>
                           </li>
                        </ul>
                        <p>The overhead of logging for Flashback Database depends on the mixture of reads and writes in the database workload. When you have a write-intensive workload, the Flashback Database logging overhead is high since it must log all those database changes. Queries do not change data and thus do not contribute to logging activity for Flashback Database.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV600"></a><a id="BRADV599"></a><div class="props_rev_3"><a id="GUID-19A3894F-22A9-49B1-91F4-951E9824C95F" name="GUID-19A3894F-22A9-49B1-91F4-951E9824C95F"></a><h4 id="BRADV-GUID-19A3894F-22A9-49B1-91F4-951E9824C95F" class="sect4"><span class="enumeration_section">7.5.4 </span>Monitoring the Effect of Flashback Database on Performance
                  </h4>
                  <div>
                     <p>Several data analysis methods are available to monitor the Flashback Database workload on your system.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p> AWR reports</p>
                           <p>The Automatic Workload Repository (AWR) automates database statistics gathering by collecting, processing, and maintaining performance statistics for database problem detection and self-tuning. You can compare AWR reports from before and after the Flashback Database was turned on to monitor performance effects.</p>
                        </li>
                        <li>
                           <p>AWR snapshots</p>
                           <p>You can review AWR snapshots to pinpoint system usage caused by flashback logging. For example, if <code class="codeph">flashback buf free by RVWR</code> is the top wait event, then you know that Oracle Database cannot write flashback logs very quickly. Therefore, you might want to tune the file system and storage used by the fast recovery area, possibly using a technique described in <span class="q">"<a href="using-flasback-database-restore-points.html#GUID-A214980E-8DF5-49A3-A2CF-35C90E74A045" title="Maintaining flashback logs imposes comparatively limited overhead on an database instance. Changed blocks are written from memory to the flashback logs at relatively infrequent, regular intervals, to limit processing and I/O overhead.">Configuring the Environment for Optimal Flashback Database Performance</a>"</span></p>
                        </li>
                        <li>
                           <p><code class="codeph">V$FLASHBACK_DATABASE_STAT</code> view
                           </p>
                           <p>The <code class="codeph">V$FLASHBACK_DATABASE_STAT</code> view shows the bytes of flashback data logged by the database. Each row in the view shows the statistics accumulated (typically over the course of an hour). The <code class="codeph">FLASHBACK_DATA</code> and <code class="codeph">REDO_DATA</code> columns describe bytes of flashback data and redo data written respectively during the time interval, while the <code class="codeph">DB_DATA</code> column describes bytes of data blocks read and written. The columns <code class="codeph">FLASHBACK_DATA</code> and <code class="codeph">REDO_DATA</code> correspond to sequential writes, whereas <code class="codeph">DB_DATA</code> column corresponds to random reads and writes.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">V$SYSSTAT</code> view
                           </p>
                           <p>Because of the difference between sequential I/O and random I/O, a better indication of I/O overhead is the number of I/O operations issued for flashback logs. The <code class="codeph">V$SYSSTAT</code> statistics shown in <a href="using-flasback-database-restore-points.html#GUID-19A3894F-22A9-49B1-91F4-951E9824C95F__CFHBHCAG" title="Describes columns in the V$SYSSTAT View">Table 7-1</a> can tell you the number of I/O operations that your instance has issued for various purposes.
                           </p>
                        </li>
                     </ul>
                     <div class="tblformal" id="GUID-19A3894F-22A9-49B1-91F4-951E9824C95F__CFHBHCAG">
                        <p class="titleintable">Table 7-1 V$SYSSTAT Statistics</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="V$SYSSTAT Statistics" summary="Describes columns in the V$SYSSTAT View" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d33613e3819">Column Name</th>
                                 <th align="left" valign="bottom" width="69%" id="d33613e3822">Column Meaning</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d33613e3827" headers="d33613e3819 ">
                                    <p>Physical write I/O request </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d33613e3827 d33613e3822 ">
                                    <p>The number of write operations issued for writing data blocks</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d33613e3834" headers="d33613e3819 ">
                                    <p>Physical read I/O request</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d33613e3834 d33613e3822 ">
                                    <p>The number of read operations issued for reading data blocks</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d33613e3841" headers="d33613e3819 ">
                                    <p>Redo writes</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d33613e3841 d33613e3822 ">
                                    <p>The number of write operations issued for writing to the redo log</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d33613e3848" headers="d33613e3819 ">
                                    <p>Flashback log writes </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d33613e3848 d33613e3822 ">
                                    <p>The number of write operations issued for writing to flashback logs </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d33613e3855" headers="d33613e3819 ">
                                    <p>Flashback log write bytes </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d33613e3855 d33613e3822 ">
                                    <p>Total size in bytes of flashback database data written from this instance</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-19A3894F-22A9-49B1-91F4-951E9824C95F__GUID-82CC01DB-6C2C-4835-9076-5FDD2F685269">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../refrn/statistics-descriptions.html#REFRN103" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more details on columns in the <code class="codeph">V$SYSSTAT</code> view
                              </p>
                           </li>
                           <li>
                              <p><a href="../tgdba/gathering-database-statistics.html#TGDBA185" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a> to learn about AWR
                              </p>
                           </li>
                           <li>
                              <p><a href="../tdppt/resolving-performance-degradation-over-time.html#TDPPT091" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> for more information about AWR reports
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV601"></a><div class="props_rev_3"><a id="GUID-C6E3FBBA-188F-4D26-AC7D-31ED3D190E88" name="GUID-C6E3FBBA-188F-4D26-AC7D-31ED3D190E88"></a><h4 id="BRADV-GUID-C6E3FBBA-188F-4D26-AC7D-31ED3D190E88" class="sect4"><span class="enumeration_section">7.5.5 </span>About Flashback Writer (RVWR) Behavior with I/O Errors 
                  </h4>
                  <div>
                     <p>When flashback is enabled or when there are guaranteed restore points, the background process RVWR writes flashback data to flashback database logs in the fast recovery area.</p>
                     <p>If RVWR encounters an I/O error, then the following behavior is expected:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If there are any guaranteed restore points defined, then the instance fails when RVWR encounters I/O errors.</p>
                        </li>
                        <li>
                           <p>If no guaranteed restore points are defined, then the instance remains unaffected when RVWR encounters I/O errors. Note the following cases:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>On a primary database, Oracle Database automatically disables Flashback Database while the database is open. All existing transactions and queries proceed unaffected. This behavior is expected for both single-instance and Oracle RAC databases.</p>
                              </li>
                              <li>
                                 <p>On a physical or logical standby, RVWR appears to have stopped responding, retrying the I/O periodically. This may eventually cause the logical standby or the managed recovery of the physical standby to suspend. (Oracle Database does not cause the standby instance to fail because it does not want to cause the primary database to fail in maximum protection mode.) To resolve the issue, you can issue either a <code class="codeph">SHUTDOWN ABORT</code> or an <code class="codeph">ALTER DATABASE FLASHBACK OFF</code> command.
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
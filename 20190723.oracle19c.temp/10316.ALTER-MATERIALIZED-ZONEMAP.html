<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>ALTER MATERIALIZED ZONEMAP</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="ALTER-MATERIALIZED-VIEW-LOG.html" title="Previous" type="text/html">
      <link rel="next" href="ALTER-OPERATOR.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ALTER-MATERIALIZED-VIEW-LOG.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="ALTER-OPERATOR.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-ALTER-LIBRARY-to-ALTER-SESSION.html" property="item" typeof="WebPage"><span property="name"> SQL Statements: ALTER LIBRARY to ALTER SESSION</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">ALTER MATERIALIZED ZONEMAP</li>
            </ol>
            <a id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A" name="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A"></a><a id="SQLRF56855"></a><a id="SQLRF56856"></a><a id="SQLRF56857"></a><a id="SQLRF56914"></a><a id="SQLRF56915"></a><a id="SQLRF56916"></a><a id="SQLRF56917"></a><a id="SQLRF56918"></a><a id="SQLRF56919"></a><a id="SQLRF56920"></a><a id="SQLRF56921"></a><a id="SQLRF56922"></a><a id="SQLRF56923"></a><a id="SQLRF56924"></a><a id="SQLRF56925"></a><a id="SQLRF56926"></a><a id="SQLRF56927"></a><a id="SQLRF56854"></a>
            
            <h2 id="SQLRF-GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A" class="sect2">ALTER MATERIALIZED ZONEMAP</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-DA222BAE-E433-4644-BB8F-AC171FC350C5">Purpose</p>
                  <p>Use the <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code> statement to modify an existing zone map in one of the following ways:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>To change its attributes</p>
                     </li>
                     <li>
                        <p>To change its default refresh method and mode</p>
                     </li>
                     <li>
                        <p>To enable or disable its use for pruning</p>
                     </li>
                     <li>
                        <p>To compile it, rebuild it, or make it unusable</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-E08F2241-CDB5-4D45-AE7B-AF9A6DB34B51">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="CREATE-MATERIALIZED-ZONEMAP.html#GUID-1E5048FC-3D28-49BC-80FE-7871568B4702">CREATE MATERIALIZED ZONEMAP</a> for information on creating zone maps
                           </p>
                        </li>
                        <li>
                           <p><a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information on zone maps
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-BDC70833-81C9-4763-B337-A85D1FFD4FFA">Prerequisites</p>
                  <p>The zone map must be in your own schema or you must have the <code class="codeph">ALTER</code> <code class="codeph">ANY</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> system privilege.
                  </p>
                  <p>The user who owns the schema containing the zone map must have access to any base tables of the zone map that reside outside of that schema, either through a <code class="codeph">READ</code> or <code class="codeph">SELECT</code> object privilege on each of the tables, or through the <code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> or <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-5DEDFD6B-CCC3-42C5-BFE1-27E3912EE1E7">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-0F7351AF-7408-4630-92AF-066C90FB9706"><span class="italic">alter_materialized_zonemap</span>::=
                  </p>
                  <div class="figure" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-5FB3B478-36A0-4F0C-BD88-7181E4970CED"><img src="img/alter_materialized_zonemap.gif" alt="Description of alter_materialized_zonemap.eps follows" title="Description of alter_materialized_zonemap.eps follows" longdesc="img_text/alter_materialized_zonemap.html"><br><a href="img_text/alter_materialized_zonemap.html">Description of the illustration alter_materialized_zonemap.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-85E1AA8C-7C48-4EBB-BCD1-14251FB97D77"><span class="italic">alter_zonemap_attributes</span>::=
                  </p>
                  <div class="figure" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-488DF4F4-6710-4678-AF97-C31819E19AAF"><img src="img/alter_zonemap_attributes.gif" alt="Description of alter_zonemap_attributes.eps follows" title="Description of alter_zonemap_attributes.eps follows" longdesc="img_text/alter_zonemap_attributes.html"><br><a href="img_text/alter_zonemap_attributes.html">Description of the illustration alter_zonemap_attributes.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-3131EEF5-F7ED-4D8F-A711-4B6CAC62979B"><span class="italic">zonemap_refresh_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-F3F8B642-81C7-4159-A586-55493765F9A8"><img src="img/zonemap_refresh_clause.gif" alt="Description of zonemap_refresh_clause.eps follows" title="Description of zonemap_refresh_clause.eps follows" longdesc="img_text/zonemap_refresh_clause.html"><br><a href="img_text/zonemap_refresh_clause.html">Description of the illustration zonemap_refresh_clause.eps</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnote" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-57D97C50-8DF1-4E0F-8BF6-591B239901A8">
                     <p class="notep1">Note:</p>
                     <p>When specifying the <span class="italic"><code class="codeph">zonemap_refresh_clause</code></span>, you must specify at least one clause after the <code class="codeph">REFRESH</code> keyword.
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-20F5B3BD-947D-4F03-808E-A36773BE5813">Semantics</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-C7328B1D-5B32-4339-9A8E-8A84F13E37B1"><span class="italic">schema</span></p>
                  <p>Specify the schema containing the zone map. If you omit <span class="italic"><code class="codeph">schema</code></span>, then Oracle Database assumes the zone map is in your own schema.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-0EC4EC2E-39E1-4D4A-BC7F-B32D5F6B0303"><span class="italic">zonemap_name</span></p>
                  <p>Specify the name of the zone map to be altered. </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-14262948-7D55-4A88-826B-8F57EA27CD6D"><span class="italic">alter_zonemap_attributes</span></p>
                  <p>Use this clause to modify the following attributes for the zone map: <code class="codeph">PCTFREE</code>, <code class="codeph">PCTUSED</code>, and <code class="codeph">CACHE</code> or <code class="codeph">NOCACHE</code>. These attributes have the same semantics for <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code> and <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>. For complete information on these attributes, refer to <a href="CREATE-MATERIALIZED-ZONEMAP.html#GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACDIEDG">PCTFREE</a>, <a href="CREATE-MATERIALIZED-ZONEMAP.html#GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACJGFEF">PCTUSED</a>, and <a href="CREATE-MATERIALIZED-ZONEMAP.html#GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACIGEHI">CACHE | NOCACHE</a> in the documentation on <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-D51944E9-415D-4634-B780-08F663BEEAE9"><span class="italic">zonemap_refresh_clause</span></p>
                  <p>Use this clause to modify the default refresh method and mode for the zone map. This clause has the same semantics for <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code> and <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>. For complete information on this clause, refer to <span class="italic"><a href="CREATE-MATERIALIZED-ZONEMAP.html#GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACBDIJH">zonemap_refresh_clause</a></span> in the documentation on <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-32D29337-200D-4BA3-8E5D-C5162417F074">ENABLE | DISABLE PRUNING</p>
                  <p>Use this clause to enable or disable use of the zone map for pruning. This clause has the same semantics for <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code> and <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>. For complete information on this clause, refer to <a href="CREATE-MATERIALIZED-ZONEMAP.html#GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACEAADH">ENABLE | DISABLE PRUNING</a> in the documentation on <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-B14BAE51-3632-4D4B-8007-0321E6DE0894">COMPILE</p>
                  <p>This clause lets you explicitly compile the zone map. This operation validates the zone map after a DDL operation changes the structure of one or more of its base tables. It is usually not necessary to issue this clause because Oracle database automatically compiles a zone map that requires compilation before using it. However, if you would like to explicitly compile a zone map, then you can use this clause to do so.</p>
                  <p>The result of compiling a zone map depends on whether a base table is changed in a way that affects the zone map. For example, if a column is added to a base table, then the zone map will be valid after compilation because the change does not affect the zone map. However, if a column that is included in the defining subquery of the zone map is dropped from a base table, then the zone map will be invalid after compilation.</p>
                  <p>You can determine if a zone map requires compilation by querying the <code class="codeph">COMPILE_STATE</code> column of the <code class="codeph">ALL_</code>, <code class="codeph">DBA_</code>, and <code class="codeph">USER_ZONEMAPS</code> data dictionary views. If the value of the column is <code class="codeph">NEEDS_COMPILE</code>, then the zone map requires compilation.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__BGBHEFFI">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-98430C6D-9DB4-486D-89BE-F852505DA332">REBUILD</p>
                  <p>This clause lets you explicitly rebuild the zone map. This operation refreshes the data in the zone map. This clause is useful in the following situations:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You can use this clause to refresh the data for a refresh-on-demand zone map. Refer to the <a href="CREATE-MATERIALIZED-ZONEMAP.html#GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACFCGJJ">ON DEMAND</a> clause in the documentation on <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code> for more information.
                        </p>
                     </li>
                     <li>
                        <p>You must issue this clause after an <code class="codeph">EXCHANGE</code> <code class="codeph">PARTITION</code> operation on one of the base tables of a zone map, regardless of the default refresh mode of the zone map.
                        </p>
                     </li>
                     <li>
                        <p>If a zone map is marked unusable, then you must issue this clause to mark it usable. You can determine if a zone map is marked unusable by querying the <code class="codeph">UNUSABLE</code> column of the <code class="codeph">ALL_</code>, <code class="codeph">DBA_</code>, and <code class="codeph">USER_ZONEMAPS</code> data dictionary views.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-42D6849D-7382-4123-A751-93818588AF8B">UNUSABLE</p>
                  <p>Specify this clause to make the zone map unusable. Subsequent queries will not use the zone map and the database will no longer maintain the zone map. You can make the zone map usable again by issuing an <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code> ... <code class="codeph">REBUILD</code> statement.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__GUID-4722BF3E-2F5A-4591-A5C8-8DDC4D163F5F">Examples</p>
                  <p><span class="bold">Modifying Zone Map Attributes: Example</span></p>
                  <p>The following statement modifies the <code class="codeph">PCTFREE</code> and <code class="codeph">PCTUSED</code> attributes of zone map <code class="codeph">sales_zmap</code>, and modifies the zone map so that it does not use caching:
                  </p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap
  PCTFREE 20 PCTUSED 50 NOCACHE;</pre><p><span class="bold">Modifying the Default Refresh Method and Mode for a Zone Map: Example</span></p>
                  <p>The following statement changes the default refresh method to <code class="codeph">FAST</code> and the default refresh mode to <code class="codeph">ON</code> <code class="codeph">COMMIT</code> for zone map <code class="codeph">sales_zmap</code>:
                  </p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap
  REFRESH FAST ON COMMIT;</pre><p><span class="bold">Disabling Use of a Zone Map for Pruning: Example</span></p>
                  <p>The following statement disables use of zone map <code class="codeph">sales_zmap</code> for pruning:
                  </p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap
  DISABLE PRUNING;</pre><p><span class="bold">Compiling a Zone Map: Example</span></p>
                  <p>The following statement compiles zone map <code class="codeph">sales_zmap</code>:
                  </p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap
  COMPILE;</pre><p><span class="bold">Rebuilding a Zone Map: Example</span></p>
                  <p>The following statement rebuilds zone map <code class="codeph">sales_zmap</code>:
                  </p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap
  REBUILD;</pre><p><span class="bold">Making a Zone Map Unusable: Example</span></p>
                  <p>The following statement makes zone map <code class="codeph">sales_zmap</code> unusable:
                  </p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap
  UNUSABLE;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
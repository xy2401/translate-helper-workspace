<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can use utilities such as Oracle Data Pump, DBNEWID, and Oracle LogMiner in a multitenant environment.">
      <meta name="description" content="You can use utilities such as Oracle Data Pump, DBNEWID, and Oracle LogMiner in a multitenant environment.">
      <title>Using Database Utilities in a Multitenant Environment</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator’s Guide ">
      <meta property="og:description" content="You can use utilities such as Oracle Data Pump, DBNEWID, and Oracle LogMiner in a multitenant environment.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96136-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="backing-up-and-recovering-cdbs-and-pdbs.html" title="Previous" type="text/html">
      <link rel="next" href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="MULTI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="backing-up-and-recovering-cdbs-and-pdbs.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-oracle-features-in-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">Using Oracle Features in a Multitenant Environment</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Database Utilities in a Multitenant Environment</li>
            </ol>
            <a id="GUID-FF209AA0-3628-4E33-B155-FDF8FAC60BB6" name="GUID-FF209AA0-3628-4E33-B155-FDF8FAC60BB6"></a>
            
            <h2 id="MULTI-GUID-FF209AA0-3628-4E33-B155-FDF8FAC60BB6" class="sect2"><span class="enumeration_chapter">21 </span>Using Database Utilities in a Multitenant Environment
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can use utilities such as Oracle Data Pump, DBNEWID, and Oracle LogMiner in a multitenant environment.</p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-database-utilities-in-a-cdb.html#GUID-0CE0454A-C192-4075-97D6-5C1333440778">Importing and Exporting Data in a CDB</a><br>Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.
                  </li>
                  <li class="ulchildlink"><a href="using-database-utilities-in-a-cdb.html#GUID-2555A155-01E3-483E-9FC6-2BDC2D8A4093">Using LogMiner in a CDB</a><br>You can use LogMiner in a multitenant container database (CDB).
                  </li>
                  <li class="ulchildlink"><a href="using-database-utilities-in-a-cdb.html#GUID-73D5DDC3-F576-4869-A68F-5091DB961B48">DBNEWID Considerations for CDBs and PDBs</a><br>The DBNEWID parameter <code class="codeph">PDB</code> allows you to change the DBID on pluggable databases (PDBs).
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="using-oracle-features-in-a-multitenant-environment.html#GUID-CE922DAA-66FB-430B-96E5-29FF50BFD2FF" title="You can use Oracle Database features in a multitenant environment.">Using Oracle Features in a Multitenant Environment</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-0CE0454A-C192-4075-97D6-5C1333440778" name="GUID-0CE0454A-C192-4075-97D6-5C1333440778"></a><h3 id="MULTI-GUID-0CE0454A-C192-4075-97D6-5C1333440778" class="sect3"><span class="enumeration_section">21.1 </span>Importing and Exporting Data in a CDB
               </h3>
               <div>
                  <p>Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-database-utilities-in-a-cdb.html#GUID-BD76463C-0867-477E-983F-4329610EC458">About Using Data Pump in a Multitenant Environment</a><br>In general, using Data Pump with PDBs is identical to using Data Pump with a non-CDB. 
                     </li>
                     <li class="ulchildlink"><a href="using-database-utilities-in-a-cdb.html#GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71">Using Data Pump to Move Data Into a CDB</a><br>After you create an empty PDB, you can use an Oracle Data Pump full-mode export and import operation to move data into the PDB.
                     </li>
                     <li class="ulchildlink"><a href="using-database-utilities-in-a-cdb.html#GUID-C1578FB6-216F-473E-A6D5-18453D4F9021">Using Data Pump to Move PDBs Within Or Between CDBs</a><br>Data Pump export and import operations on PDBs are identical to those on non-CDBs, with the exception of how common users are handled.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-database-utilities-in-a-cdb.html#GUID-FF209AA0-3628-4E33-B155-FDF8FAC60BB6" title="You can use utilities such as Oracle Data Pump, DBNEWID, and Oracle LogMiner in a multitenant environment.">Using Database Utilities in a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-BD76463C-0867-477E-983F-4329610EC458" name="GUID-BD76463C-0867-477E-983F-4329610EC458"></a><h4 id="MULTI-GUID-BD76463C-0867-477E-983F-4329610EC458" class="sect4"><span class="enumeration_section">21.1.1 </span>About Using Data Pump in a Multitenant Environment
                  </h4>
                  <div>
                     <p>In general, using Data Pump with PDBs is identical to using Data Pump with a non-CDB. </p>
                     <p>A multitenant container database (CDB) is an Oracle database that includes zero, one, or many user-created pluggable databases (PDBs). A PDB is a portable set of schemas, schema objects, and nonschema objects that appear to an Oracle Net client as a non-CDB. A non-CDB is an Oracle database that is not a CDB.</p>
                     <p>You can use Data Pump to migrate all or some of a database in the following scenarios:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>From a non-CDB into a PDB</p>
                        </li>
                        <li>
                           <p>Between PDBs within the same or different CDBs</p>
                        </li>
                        <li>
                           <p>From a PDB into a non-CDB</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-BD76463C-0867-477E-983F-4329610EC458__GUID-140B9CD4-E02E-4A16-9410-B036E8310254">
                        <p class="notep1">Note:</p>
                        <p>Data Pump does not support any CDB-wide operations. If you are connected to the root or seed database of a CDB, then Data Pump issues the following warning:</p><pre class="pre codeblock"><code>ORA-39357: Warning: Oracle Data Pump operations are not typically needed when connected to the root or seed of a container database.</code></pre></div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-database-utilities-in-a-cdb.html#GUID-0CE0454A-C192-4075-97D6-5C1333440778" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Importing and Exporting Data in a CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71" name="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71"></a><h4 id="MULTI-GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71" class="sect4"><span class="enumeration_section">21.1.2 </span>Using Data Pump to Move Data Into a CDB
                  </h4>
                  <div>
                     <p>After you create an empty PDB, you can use an Oracle Data Pump full-mode export and import operation to move data into the PDB.</p>
                     <p>You can import data with or without the transportable option. If you use the transportable option on a full mode export or import, then it is referred to as a full transportable export/import. </p>
                     <p>When the transportable option is used, export and import use both transportable tablespace data movement and conventional data movement; the latter for those tables that reside in non-transportable tablespaces such as <code class="codeph">SYSTEM</code> and <code class="codeph">SYSAUX</code>. Using the transportable option can reduce the export time and especially, the import time, because table data does not need to be unloaded and reloaded and index structures in user tablespaces do not need to be recreated.
                     </p>
                     <p>Note the following requirements when using Data Pump to move data into a CDB:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To administer a multitenant environment, you must have the <code class="codeph">CDB_DBA</code> role.
                           </p>
                        </li>
                        <li>
                           <p>Full database exports from Oracle Database 11.2.0.2 and earlier can be imported into Oracle Database 12c (CDB or non-CDB). However, Oracle recommends that you first upgrade the source database to Oracle Database 11g release 2 (11.2.0.3 or later), so that information about registered options and components is included in the export.</p>
                        </li>
                        <li>
                           <p>When migrating Oracle Database 11g release 2 (11.2.0.3 or later) to a CDB (or to a non-CDB) using either full database export or full transportable database export, you must set the Data Pump Export parameter <code class="codeph">VERSION=12</code> in order to generate a dump file that is ready for import into Oracle Database 12c. If you do not set <code class="codeph">VERSION=12</code>, then the export file that is generated does not contain complete information about registered database options and components. 
                           </p>
                        </li>
                        <li>
                           <p>Network-based full transportable imports require use of the <code class="codeph">FULL=YES</code>, <code class="codeph">TRANSPORTABLE=ALWAYS</code>, and <code class="codeph">TRANSPORT_DATAFILES=<span class="variable" translate="no">datafile_name</span></code> parameters. When the source database is Oracle Database 11g release 11.2.0.3 or later, but earlier than Oracle Database 12c Release 1 (12.1), the <code class="codeph">VERSION=12</code> parameter is also required.
                           </p>
                        </li>
                        <li>
                           <p>File-based full transportable imports only require use of the <code class="codeph">TRANSPORT_DATAFILES=<span class="variable" translate="no">datafile_name</span></code> parameter. Data Pump Import infers the presence of the <code class="codeph">TRANSPORTABLE=ALWAYS</code> and <code class="codeph">FULL=YES</code> parameters.
                           </p>
                        </li>
                        <li>
                           <p>As of Oracle Database 12c release 2 (12.2), in a multitenant container database (CDB) environment, the default Data Pump directory object, <code class="codeph">DATA_PUMP_DIR</code>, is defined as a unique path for each PDB in the CDB. This unique path is defined whether the <code class="codeph">PATH_PREFIX</code> clause of the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement is defined or is not defined for relative paths. 
                           </p>
                        </li>
                        <li>
                           <p>Starting in Oracle Database 19c, the <code class="codeph">credential</code> parameter of <code class="codeph">impdp</code> specifies the name of the credential object that contains the user name and password required to access an object store bucket. You can also specify a default credential using the PDB property named <code class="codeph">DEFAULT_CREDENTIAL</code>. When you run <code class="codeph">impdb</code> with then default credential, you prefix the dump file name with <code class="codeph">DEFAULT_CREDENTIAL:</code> and you do not specify the <code class="codeph">credential</code> parameter. 
                           </p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71__GUID-13F8CE65-B6F4-4A75-AB27-5F6268C39C84">
                        <p class="titleinexample">Example 21-1 Importing a Table into a PDB</p>
                        <p>To specify a particular PDB for the export/import operation, supply a connect identifier in the connect string when you start Data Pump. For example, to import data to a PDB named <code class="codeph">pdb1</code>, you could enter the following on the Data Pump command line:
                        </p><pre class="pre codeblock"><code>impdp hr@pdb1 DIRECTORY=dpump_dir1 DUMPFILE=hr.dmp TABLES=employees
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71__GUID-30BBDAEB-AC3A-4672-BC72-09052CFBFB35">
                        <p class="titleinexample">Example 21-2 Specifying a Credential When Importing Data</p>
                        <p>This example assumes that you created a credential named <code class="codeph">HR_CRED</code> using <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> as follows: 
                        </p><pre class="pre codeblock"><code>BEGIN
  DBMS_CLOUD.CREATE_CREDENTIAL(
    credential_name =&gt; 'HR_CRED',
    username =&gt; 'atpc_user@oracle.com',
    password =&gt; '<span class="italic">password</span>'
  );
END;
/</code></pre><p>The following command specifies credential <code class="codeph">HR_CRED</code>, and specifies the a file stored in an object store. The URL of the file is <code class="codeph">https://example.com/ostore/dnfs/myt.dmp</code>.
                        </p><pre class="pre codeblock"><code>impdp hr@pdb1 \
      table_exists_action=replace \
      credential=HR_CRED \
      parallel=16 \
      dumpfile=https://example.com/ostore/dnfs/myt.dmp</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71__GUID-73EF3BB4-46CA-44E4-B67C-1DD09FC48DA3">
                        <p class="titleinexample">Example 21-3 Importing Data Using a Default Credential</p>
                        <ol id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71__OL_D5V_NX3_QFB">
                           <li>
                              <p>You create a credential named <code class="codeph">HR_CRED</code> using <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> as follows: 
                              </p><pre class="pre codeblock"><code>BEGIN
  DBMS_CLOUD.CREATE_CREDENTIAL(
    credential_name =&gt; 'HR_CRED',
    username =&gt; 'atpc_user@oracle.com',
    password =&gt; '<span class="italic">password</span>'
  );
END;
/</code></pre></li>
                           <li>
                              <p>You set the PDB property <code class="codeph">DEFAULT_CREDENTIAL</code> as follows:
                              </p><pre class="pre codeblock"><code>ALTER DATABASE PROPERTY SET DEFAULT_CREDENTIAL = 'ADMIN.HR_CRED'</code></pre></li>
                           <li>
                              <p>The following command specifies the default credential as a prefix to the dump file location <code class="codeph">https://example.com/ostore/dnfs/myt.dmp</code>:
                              </p><pre class="pre codeblock"><code>impdp hr@pdb1 \
      table_exists_action=replace \
      parallel=16 \
      dumpfile=default_credential:https://example.com/ostore/dnfs/myt.dmp</code></pre><p>Note that the <code class="codeph">credential</code> parameter is not specified.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71__GUID-3144C863-B387-49F4-AEDF-010D15E4D2B1">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;" id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71__UL_BYJ_FW3_QFB">
                           <li>
                              <p><a href="../dbseg/configuring-secure-sockets-layer-authentication.html#DBSEG-GUID-6AD89576-526F-4D6B-A539-ADF4B840819F" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> to learn how to configure SSL authentication, which is necessary for object store access
                              </p>
                           </li>
                           <li>
                              <p><a href="../sutil/datapump-import-utility.html#SUTIL-GUID-D11E340E-14C6-43B8-AB09-6335F0C1F71B" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> to learn about using Data Pump Import to load files to the object store
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-database-utilities-in-a-cdb.html#GUID-0CE0454A-C192-4075-97D6-5C1333440778" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Importing and Exporting Data in a CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C1578FB6-216F-473E-A6D5-18453D4F9021" name="GUID-C1578FB6-216F-473E-A6D5-18453D4F9021"></a><h4 id="MULTI-GUID-C1578FB6-216F-473E-A6D5-18453D4F9021" class="sect4"><span class="enumeration_section">21.1.3 </span>Using Data Pump to Move PDBs Within Or Between CDBs
                  </h4>
                  <div>
                     <p>Data Pump export and import operations on PDBs are identical to those on non-CDBs, with the exception of how common users are handled.</p>
                     <div class="section">
                        <p>If you have created a common user in a CDB, then a full database or privileged schema export of that user from within any PDB in the CDB results in a standard <code class="codeph">CREATE USER C##common name</code> DDL statement being performed upon import. The statement will fail because of the common user prefix <code class="codeph">C##</code> on the user name. The following error message will be returned:
                        </p><pre class="pre codeblock"><code>ORA-65094:invalid local user or role name
</code></pre><p>In the PDB being exported, if you have created local objects in that user's schema and you want to import them, then either make sure a common user of the same name already exists in the target CDB instance or use the Data Pump Import <code class="codeph">REMAP_SCHEMA</code> parameter on the <code class="codeph">impdp</code> command, as follows:
                        </p><pre class="pre codeblock"><code>REMAP_SCHEMA=C##<span class="variable" translate="no">common name:local user name</span>
</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../sutil/oracle-data-pump-export-utility.html#SUTIL-GUID-079769D8-40F4-432F-88AD-E7264D7A2E2D" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a></li>
                           <li><a href="../sutil/datapump-import-utility.html#SUTIL-GUID-E27D2DC9-A6D8-4F0B-AB72-6BF526B3AA18" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a></li>
                           <li><a href="../sutil/oracle-data-pump-export-utility.html#SUTIL-GUID-72973E3D-FC0A-47E8-A62A-6DF8AD83138D" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-database-utilities-in-a-cdb.html#GUID-0CE0454A-C192-4075-97D6-5C1333440778" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Importing and Exporting Data in a CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="SUTIL3926"></a><div class="props_rev_3"><a id="GUID-2555A155-01E3-483E-9FC6-2BDC2D8A4093" name="GUID-2555A155-01E3-483E-9FC6-2BDC2D8A4093"></a><h3 id="MULTI-GUID-2555A155-01E3-483E-9FC6-2BDC2D8A4093" class="sect3"><span class="enumeration_section">21.2 </span>Using LogMiner in a CDB
               </h3>
               <div>
                  <p>You can use LogMiner in a multitenant container database (CDB).</p>
                  <p>The following sections discuss some differences to be aware of when using LogMiner in a CDB versus a non-CDB:</p>
                  <p>LogMiner supports CDBs that have PDBs of different character sets provided the root container has a character set that is a superset of all the PDBs.</p>
                  <p>To administer a multitenant environment you must have the <code class="codeph">CDB_DBA</code> role.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-database-utilities-in-a-cdb.html#GUID-945F35C4-1D2D-4F0E-954B-408BBB09EDF0">LogMiner V$ Views and DBA Views in a CDB</a><br>In a CDB, views used by LogMiner to show information about LogMiner sessions running in the system contain an additional column named <code class="codeph">CON_ID</code>.
                     </li>
                     <li class="ulchildlink"><a href="using-database-utilities-in-a-cdb.html#GUID-98AED018-EAF5-4B56-BE6C-F1DEEF8D6B51">The V$LOGMNR_CONTENTS View in a CDB</a><br>In a CDB, the <code class="codeph">V$LOGMNR_CONTENTS</code> view and its associated functions are restricted to the root database. Several new columns exist in <code class="codeph">V$LOGMNR_CONTENTS</code> in support of CDBs.
                     </li>
                     <li class="ulchildlink"><a href="using-database-utilities-in-a-cdb.html#GUID-6564DEB6-DE46-4269-BFA0-4797612DE7C0">Enabling Supplemental Logging in a CDB</a><br>In a CDB, the syntax for enabling and disabling database-wide supplemental logging is the same as in a non-CDB database
                     </li>
                     <li class="ulchildlink"><a href="using-database-utilities-in-a-cdb.html#GUID-EF8A932F-7E71-4995-893E-E583B90007C2">Using a Flat File Dictionary in a CDB</a><br>You cannot take a dictionary snapshot for an entire CDB in a single flat file. You must be connected to a distinct PDB, and can take a snapshot of only that PDB in a flat file. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-database-utilities-in-a-cdb.html#GUID-FF209AA0-3628-4E33-B155-FDF8FAC60BB6" title="You can use utilities such as Oracle Data Pump, DBNEWID, and Oracle LogMiner in a multitenant environment.">Using Database Utilities in a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-945F35C4-1D2D-4F0E-954B-408BBB09EDF0" name="GUID-945F35C4-1D2D-4F0E-954B-408BBB09EDF0"></a><h4 id="MULTI-GUID-945F35C4-1D2D-4F0E-954B-408BBB09EDF0" class="sect4"><span class="enumeration_section">21.2.1 </span>LogMiner V$ Views and DBA Views in a CDB
                  </h4>
                  <div>
                     <p>In a CDB, views used by LogMiner to show information about LogMiner sessions running in the system contain an additional column named <code class="codeph">CON_ID</code>.
                     </p>
                     <p>The <code class="codeph">CON_ID</code> column identifies the container ID associated with the session for which information is being displayed. When you query the view from a pluggable database (PDB), only information associated with the database is displayed. The following views are affected by this new behavior:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">V$LOGMNR_DICTIONARY_LOAD</code>	
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">V$LOGMNR_LATCH</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">V$LOGMNR_PROCESS</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">V$LOGMNR_SESSION</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">V$LOGMNR_STATS</code></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-945F35C4-1D2D-4F0E-954B-408BBB09EDF0__GUID-98114A40-FAB4-40B7-AE82-FE364F882588">
                        <p class="notep1">Note:</p>
                        <p>To support CDBs, the <code class="codeph">V$LOGMNR_CONTENTS</code> view has several other new columns in addition to <code class="codeph">CON_ID</code>.
                        </p>
                     </div>
                     <p>The following DBA views have analogous CDB views whose names begin with CDB.</p>
                     <div class="tblformal" id="GUID-945F35C4-1D2D-4F0E-954B-408BBB09EDF0__LOGMINERDBAANDCDBVIEWSDBAVIEWCDB_VI-FEBFF9B4">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="LogMiner DBA views and CDB Views " width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="34%" id="d101602e988">Type of Log View</th>
                                 <th align="left" valign="bottom" width="33%" id="d101602e990">DBA View</th>
                                 <th align="left" valign="bottom" width="33%" id="d101602e993">CDB View</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d101602e998" headers="d101602e988 ">LogMiner Log Views</td>
                                 <td align="left" valign="top" width="33%" headers="d101602e998 d101602e990 ">
                                    <p><code class="codeph">DBA_LOGMNR_LOG</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d101602e998 d101602e993 ">
                                    <p><code class="codeph">CDB_LOGMNR_LOG</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d101602e1009" headers="d101602e988 ">LogMiner Purged Log Views</td>
                                 <td align="left" valign="top" width="33%" headers="d101602e1009 d101602e990 ">
                                    <p><code class="codeph">DBA_LOGMNR_PURGED_LOG</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d101602e1009 d101602e993 ">
                                    <p><code class="codeph">CDB_LOGMNR_PURGED_LOG</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d101602e1020" headers="d101602e988 ">LogMiner Session Log Views</td>
                                 <td align="left" valign="top" width="33%" headers="d101602e1020 d101602e990 ">
                                    <p><code class="codeph">DBA_LOGMNR_SESSION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d101602e1020 d101602e993 ">
                                    <p><code class="codeph">CDB_LOGMNR_SESSION</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>The DBA views show only information related to sessions defined in the container in which they are queried.</p>
                     <p>The CDB views contain an additional <code class="codeph">CON_ID</code> column, which identifies the container whose data a given row represents. When CDB views are queried from the root, they can be used to see information about all containers.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-database-utilities-in-a-cdb.html#GUID-2555A155-01E3-483E-9FC6-2BDC2D8A4093" title="You can use LogMiner in a multitenant container database (CDB).">Using LogMiner in a CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-98AED018-EAF5-4B56-BE6C-F1DEEF8D6B51" name="GUID-98AED018-EAF5-4B56-BE6C-F1DEEF8D6B51"></a><h4 id="MULTI-GUID-98AED018-EAF5-4B56-BE6C-F1DEEF8D6B51" class="sect4"><span class="enumeration_section">21.2.2 </span>The V$LOGMNR_CONTENTS View in a CDB
                  </h4>
                  <div>
                     <p>In a CDB, the <code class="codeph">V$LOGMNR_CONTENTS</code> view and its associated functions are restricted to the root database. Several new columns exist in <code class="codeph">V$LOGMNR_CONTENTS</code> in support of CDBs.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CON_ID</code> — contains the ID associated with the container from which the query is executed. Because <code class="codeph">V$LOGMNR_CONTENTS</code> is restricted to the root database, this column returns a value of 1 when a query is done on a CDB.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SRC_CON_NAME</code> — the PDB name. This information is available only when mining is performed with a LogMiner dictionary.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SRC_CON_ID</code> — the container ID of the PDB that generated the redo record. This information is available only when mining is performed with a LogMiner dictionary.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SRC_CON_DBID</code> — the PDB identifier. This information is available only when mining is performed with a current LogMiner dictionary.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SRC_CON_GUID</code> — contains the GUID associated with the PDB. This information is available only when mining is performed with a current LogMiner dictionary.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-database-utilities-in-a-cdb.html#GUID-2555A155-01E3-483E-9FC6-2BDC2D8A4093" title="You can use LogMiner in a multitenant container database (CDB).">Using LogMiner in a CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL3929"></a><div class="props_rev_3"><a id="GUID-6564DEB6-DE46-4269-BFA0-4797612DE7C0" name="GUID-6564DEB6-DE46-4269-BFA0-4797612DE7C0"></a><h4 id="MULTI-GUID-6564DEB6-DE46-4269-BFA0-4797612DE7C0" class="sect4"><span class="enumeration_section">21.2.3 </span>Enabling Supplemental Logging in a CDB
                  </h4>
                  <div>
                     <p>In a CDB, the syntax for enabling and disabling database-wide supplemental logging is the same as in a non-CDB database</p>
                     <div class="section">
                        <p>For example, use the following syntax when adding or dropping supplemental log data:</p><pre class="pre codeblock"><code>ALTER DATABASE [ADD|DROP] SUPPLEMENTAL LOG DATA ...
</code></pre><p>However, note the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>In a CDB, supplemental logging levels that are enabled from <code class="codeph">CDB$ROOT</code> are enabled across the CDB.
                              </p>
                           </li>
                           <li>
                              <p>If at least minimal supplemental logging is enabled in <code class="codeph">CDB$ROOT</code>, then additional supplemental logging levels can be enabled at the PDB level.
                              </p>
                           </li>
                           <li>
                              <p>Supplemental logging levels enabled at the CDB level from <code class="codeph">CDB$ROOT</code> cannot be disabled at the PDB level.
                              </p>
                           </li>
                           <li>
                              <p>Dropping all supplemental logging from <code class="codeph">CDB$ROOT</code> disables all supplemental logging across the CDB regardless of previous PDB level settings.
                              </p>
                           </li>
                        </ul>
                        <p>Supplemental logging operations started with <code class="codeph">CREATE TABLE</code> and <code class="codeph">ALTER TABLE</code> statements can be executed from either the CDB root or a PDB. They affect only the table to which they are applied.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-database-utilities-in-a-cdb.html#GUID-2555A155-01E3-483E-9FC6-2BDC2D8A4093" title="You can use LogMiner in a multitenant container database (CDB).">Using LogMiner in a CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL4227"></a><div class="props_rev_3"><a id="GUID-EF8A932F-7E71-4995-893E-E583B90007C2" name="GUID-EF8A932F-7E71-4995-893E-E583B90007C2"></a><h4 id="MULTI-GUID-EF8A932F-7E71-4995-893E-E583B90007C2" class="sect4"><span class="enumeration_section">21.2.4 </span>Using a Flat File Dictionary in a CDB
                  </h4>
                  <div>
                     <p>You cannot take a dictionary snapshot for an entire CDB in a single flat file. You must be connected to a distinct PDB, and can take a snapshot of only that PDB in a flat file. </p>
                     <p>Thus, when using a flat file dictionary, you can only mine the redo logs for the changes associated with the PDB whose data dictionary is contained within the flat file.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-database-utilities-in-a-cdb.html#GUID-2555A155-01E3-483E-9FC6-2BDC2D8A4093" title="You can use LogMiner in a multitenant container database (CDB).">Using LogMiner in a CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-73D5DDC3-F576-4869-A68F-5091DB961B48" name="GUID-73D5DDC3-F576-4869-A68F-5091DB961B48"></a><h3 id="MULTI-GUID-73D5DDC3-F576-4869-A68F-5091DB961B48" class="sect3"><span class="enumeration_section">21.3 </span>DBNEWID Considerations for CDBs and PDBs
               </h3>
               <div>
                  <p>The DBNEWID parameter <code class="codeph">PDB</code> allows you to change the DBID on pluggable databases (PDBs).
                  </p>
                  <p>By default, when you run the DBNEWID utility on a container database (CDB) it changes the DBID of only the CDB; the DBIDs of the pluggable databases (PDBs) comprising the CDB remain the same. This could cause problems with duplicate DBIDs for PDBs in some cases, such as when a CDB is cloned.</p>
                  <p>As of Oracle Database 12<span class="italic">c</span> Release 2 (12.2), you can change the DBID on the PDBs by using  the new DBNEWID <code class="codeph">PDB</code> parameter. You cannot specify a particular PDB; either all of them or none of them will have new DBIDs. The <code class="codeph">PDB</code> parameter is applicable only in a CDB environment. It has the following format:
                  </p><pre class="pre codeblock"><code>PDB=[ALL | NONE]</code></pre><ul style="list-style-type: disc;">
                     <li>
                        <p>If you specify <code class="codeph">ALL</code>, then in addition to the DBID for the CDB changing, the DBIDs for all PDBs comprising the CDB are also changed. 
                        </p>
                     </li>
                     <li>
                        <p>Specifying <code class="codeph">NONE</code> (the default) leaves the PDB DBIDs the same, even if the CDB DBID is changed.
                        </p>
                     </li>
                  </ul>
                  <p>Oracle recommends that you use <code class="codeph">PDB=ALL</code>, but <code class="codeph">PDB=NONE</code> is the default for backward compatibility reasons.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-database-utilities-in-a-cdb.html#GUID-FF209AA0-3628-4E33-B155-FDF8FAC60BB6" title="You can use utilities such as Oracle Data Pump, DBNEWID, and Oracle LogMiner in a multitenant environment.">Using Database Utilities in a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
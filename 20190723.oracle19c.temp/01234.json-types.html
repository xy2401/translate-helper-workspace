<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="To work with JSON data in PL/SQL, you can use these data structures.">
      <meta name="description" content="To work with JSON data in PL/SQL, you can use these data structures.">
      <title>JSON Data Structures</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="To work with JSON data in PL/SQL, you can use these data structures.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="JMS-Types.html" title="Previous" type="text/html">
      <link rel="next" href="Logical-Change-Record-TYPEs.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="JMS-Types.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="Logical-Change-Record-TYPEs.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">JSON Data Structures</li>
            </ol>
            <a id="GUID-BDE10AAA-445B-47B5-8A39-D86C8EA99283" name="GUID-BDE10AAA-445B-47B5-8A39-D86C8EA99283"></a>
            
            <h2 id="ARPLS-GUID-BDE10AAA-445B-47B5-8A39-D86C8EA99283" class="sect2"><span class="enumeration_chapter">278 </span>JSON Data Structures
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>To work with JSON data in PL/SQL, you can use these data structures. </p>
               <div class="section">
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="json-types.html#GUID-639D871E-D116-4793-888E-F7948E48F4DE" title="JSON_ELEMENT_T is the supertype for the JSON_OBJECT_T, JSON_SCALAR_T, and JSON_ARRAY_T object types.">JSON_ELEMENT_T Object Type</a></p>
                     </li>
                     <li>
                        <p><a href="json-types.html#GUID-10062646-E36F-48B1-9F24-751B613DFB5A" title="JSON_OBJECT_T is a subtype of the JSON_ELEMENT_T object type. It corresponds to the JSON object structure.">JSON_OBJECT_T Object Type</a></p>
                     </li>
                     <li>
                        <p><a href="json-types.html#GUID-69E61601-5533-418B-8C03-E591B4F7FE36" title="JSON_ARRAY_T is a subtype of the JSON_ELEMENT_T object type. JSON_ARRAY_T corresponds to the JSON array structure.">JSON_ARRAY_T Object Type</a></p>
                     </li>
                     <li>
                        <p><a href="json-types.html#GUID-B9526171-92E2-423A-8831-872ADCC71D1E" title="JSON_SCALAR_T is a subtype of the JSON_ELEMENT_T object type.">JSON_SCALAR_T Object Type</a></p>
                     </li>
                     <li>
                        <p><a href="json-types.html#GUID-50692D34-FEAF-471E-BA22-17530E31D95D" title="JSON_KEY_LIST is a varray of VARCHAR2(4000).">JSON_KEY_LIST Type</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="../adjsn/pl-sql-object-types-for-json.html#ADJSN-GUID-C0C2A8C0-99BD-4770-9EA2-B7D53804FC18" target="_blank"><span class="italic">Oracle Database JSON Developer’s Guide</span></a></li>
                     <li><a href="http://www.json.org" target="_blank">The JSON standard</a></li>
                  </ul>
               </div>
            </div>
            <div class="sect2"><a id="GUID-639D871E-D116-4793-888E-F7948E48F4DE" name="GUID-639D871E-D116-4793-888E-F7948E48F4DE"></a><h3 id="ARPLS-GUID-639D871E-D116-4793-888E-F7948E48F4DE" class="sect3"><span class="enumeration_section">278.1 </span>JSON_ELEMENT_T Object Type
               </h3>
               <div>
                  <p><code class="codeph">JSON_ELEMENT_T</code> is the supertype for the <code class="codeph">JSON_OBJECT_T</code>, <code class="codeph">JSON_SCALAR_T</code>, and <code class="codeph">JSON_ARRAY_T</code> object types.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-639D871E-D116-4793-888E-F7948E48F4DE__GUID-5F8FBD64-A38B-4326-AAC5-4A881F24A7D0">Description</p>
                     <p>Note the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To create an instance of JSON_ELEMENT_T, use the <code class="codeph">parse</code> function. See the “Constructors” section below for details.
                           </p>
                        </li>
                        <li>
                           <p>You cannot create an empty JSON_ELEMENT_T instance. To create an empty JSON container, create it based on one of the subtypes.</p>
                        </li>
                        <li>
                           <p>To cast a JSON_ELEMENT_T  into a subtype (for example, JSON_OBJECT_T), you need to perform an explicit cast using TREAT AS. For example:</p><pre class="oac_no_warn" dir="ltr">TREAT (elem AS JSON_OBJECT_T)</pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-639D871E-D116-4793-888E-F7948E48F4DE__GUID-17EE8ECD-505B-4867-B23A-7C8905AFF0FD">Constructors</p>
                     <p>You create a JSON_ELEMENT_T instance using the <code class="codeph">parse</code> function. The function takes as input VARCHAR2, CLOB, or BLOB data, and returns a JSON_ELEMENT_T instance.
                     </p><pre class="oac_no_warn" dir="ltr">STATIC FUNCTION parse(json VARCHAR2) RETURN JSON_ELEMENT_T
STATIC FUNCTION parse(json CLOB)     RETURN JSON_ELEMENT_T
STATIC FUNCTION parse(json BLOB)     RETURN JSON_ELEMENT_T
</pre><p>Only UTF8-encoded JSON is passed as a BLOB.</p>
                     <p>The <code class="codeph">parse</code> function takes a JSON string as input and sets up an internal representation of the JSON data. If the provided input is not valid JSON, then an error message is raised. Valid JSON has to pass the lax check of the “IS JSON” SQL condition.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-639D871E-D116-4793-888E-F7948E48F4DE__GUID-8BCC06CD-04C9-4679-A01D-893543A65C06">Serialization</p>
                     <p>Serialization is the inverse of the <code class="codeph">parse</code> function. The serialization operation takes the in-memory representation of the JSON data and prints it to a string. The serialization functions and procedures are:
                     </p><pre class="oac_no_warn" dir="ltr">MEMBER FUNCTION to_String    RETURN VARCHAR2
MEMBER FUNCTION to_Number    RETURN NUMBER
MEMBER FUNCTION to_Date      RETURN DATE
MEMBER FUNCTION to_Timestamp RETURN TIMESTAMP
MEMBER FUNCTION to_Boolean   RETURN BOOLEAN
MEMBER FUNCTION to_Clob      RETURN CLOB
MEMBER FUNCTION to_Blob      RETURN BLOB

MEMBER PROCEDURE to_Clob(c IN OUT CLOB)
MEMBER PROCEDURE to_Blob(c IN OUT BLOB)</pre><p>The <code class="codeph">to_Clob</code> and <code class="codeph">to_Blob</code> <span class="italic">procedures</span> accept a CLOB or BLOB input and enable you to provide a LOB to be used as the serialization destination. For instance, EMPTY_LOB can be provided. The input LOB cannot be NULL.
                     </p>
                     <p>If the <code class="codeph">to_Clob</code> <span class="italic">function</span> is used, then a new CLOB is created. If you do not want to create a CLOB first, then you can use the <code class="codeph">to_Clob</code> or <code class="codeph">to_Blob</code> <span class="italic">functions</span>, which take no parameter and generate a temp lob.
                     </p>
                     <p><code class="codeph">to_Blob</code> serializes to UTF8 format only.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-639D871E-D116-4793-888E-F7948E48F4DE__GUID-E8FDDC18-6CD1-47E5-852D-3F23E17D43AD">Introspection</p>
                     <p>Introspection enables you to discover properties of JSON objects without modifying them. The introspection functions are:</p><pre class="oac_no_warn" dir="ltr">MEMBER FUNCTION is_Object    RETURN BOOLEAN
MEMBER FUNCTION is_Array     RETURN BOOLEAN
MEMBER FUNCTION is_Scalar    RETURN BOOLEAN
MEMBER FUNCTION is_String    RETURN BOOLEAN
MEMBER FUNCTION is_Number    RETURN BOOLEAN
MEMBER FUNCTION is_Boolean   RETURN BOOLEAN
MEMBER FUNCTION is_True      RETURN BOOLEAN
MEMBER FUNCTION is_False     RETURN BOOLEAN
MEMBER FUNCTION is_Null      RETURN BOOLEAN
MEMBER FUNCTION is_Date      RETURN BOOLEAN
MEMBER FUNCTION is_Timestamp RETURN BOOLEAN
MEMBER FUNCTION get_Size     RETURN NUMBER</pre><p>The return value of the <code class="codeph">get_size</code> function depends on the JSON type:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>For a scalar, it returns <code class="codeph">1</code>.
                           </p>
                        </li>
                        <li>
                           <p>For an object, it returns the number of keys.</p>
                        </li>
                        <li>
                           <p>For an array, it returns the number of items.</p>
                        </li>
                     </ul>
                     <p>Note that JSON does not support dates and timestamps natively. Instead they are typically modeled as strings. The DOM API enables you to add dates and timestamps as scalar values and preserve them until serialization to JSON, where they are printed as string following the ISO 8601 format. If a SQL value of type date or timestamp has been added, then the <code class="codeph">is_Date</code> and <code class="codeph">is_Timestamp</code> functions return true. If a date has been added as a string (e.g. as ISO 8601), then the <code class="codeph">is_Date</code> and <code class="codeph">is_Timestamp</code> functions return false. You can use Oracle conversion function <code class="codeph">to_Date</code> and <code class="codeph">to_Timestamp</code> to convert a string representation of a date, and timestamp to the Oracle representation.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-639D871E-D116-4793-888E-F7948E48F4DE__GUID-C5122358-0EA0-4D43-9600-ECF42A53BCBB">Error Handling</p>
                     <p>You can set the level of error handling for JSON processing. You might not want an error to be raised for every mismatch. The <code class="codeph">on_Error</code> procedure enables you to specify when errors should be raised:
                     </p><pre class="oac_no_warn" dir="ltr">MEMBER PROCEDURE on_Error(value NUMBER)</pre><p>The <code class="codeph">on_Error</code> procedure defines what happens if an error is encountered during a PL/SQL operation, for instance, a get call.
                     </p>
                     <p>The default is to not raise an error but to return NULL instead.</p>
                     <p>You invoke <code class="codeph">On_error</code> on a JSON_ELEMENT_T instance and it sets the error behavior for all subsequent calls. To reset the behavior to the default, you can call <code class="codeph">on_Error(0)</code>.
                     </p>
                     <p>Values for the <code class="codeph">value</code> parameter are:
                     </p>
                     <div class="tblformal" id="GUID-639D871E-D116-4793-888E-F7948E48F4DE__GUID-01D146CD-4467-4EF7-B5E0-42BA44070E57">
                        <p class="titleintable">Table 278-1 Values for the value Parameter in the ON_ERROR Procedure</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Values for the value Parameter in the ON_ERROR Procedure" summary="This table describes the values for the value parameter in the ON_ERROR procedure." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d1587413e423">Value</th>
                                 <th align="left" valign="bottom" width="20%" id="d1587413e425">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1587413e429" headers="d1587413e423 ">0</td>
                                 <td align="left" valign="top" width="20%" headers="d1587413e429 d1587413e425 ">Reset to the default behavior, which is to return NULL instead of raising an error.</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1587413e434" headers="d1587413e423 ">1</td>
                                 <td align="left" valign="top" width="20%" headers="d1587413e434 d1587413e425 ">Raise all errors.</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1587413e439" headers="d1587413e423 ">2</td>
                                 <td align="left" valign="top" width="20%" headers="d1587413e439 d1587413e425 ">Raise an error if no value is detected.</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1587413e444" headers="d1587413e423 ">3</td>
                                 <td align="left" valign="top" width="20%" headers="d1587413e444 d1587413e425 ">Raise an error if the data types do not match, for example, if you call GET_NUMBER on a string value.</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1587413e449" headers="d1587413e423 ">4</td>
                                 <td align="left" valign="top" width="20%" headers="d1587413e449 d1587413e425 ">Raise an error if the input is invalid, for example, if the array is out of bounds.</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>You can combine values. For example, you can specify 7 to indicate a combination of 3 and 4.</p>
                     <p>In the following example, an error is raised because the value of “a” is “xyz”, which cannot be converted to a number. If the <code class="codeph">on_Error</code> procedure had not been called, then NULL would be returned, and no error would be raised.
                     </p><pre class="oac_no_warn" dir="ltr">declare
 	jo JSON_OBJECT_T;
begin
 	jo := JSON_OBJECT_T.parse('{a:"xyz"}');
 	jo.On_error(1);
 	dbms_output.put_line(jo.get_Number('a'));
end;
/</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A" name="GUID-10062646-E36F-48B1-9F24-751B613DFB5A"></a><h3 id="ARPLS-GUID-10062646-E36F-48B1-9F24-751B613DFB5A" class="sect3"><span class="enumeration_section">278.2 </span>JSON_OBJECT_T Object Type
               </h3>
               <div>
                  <p><code class="codeph">JSON_OBJECT_T</code> is a subtype of the JSON_ELEMENT_T object type. It corresponds to the JSON object structure.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-F055C65B-84E3-483B-912B-9E0196738893">Constructors</p>
                     <p>You can create an empty JSON_OBJECT_T instance using the following constructor.</p><pre class="oac_no_warn" dir="ltr">   CONSTRUCTOR FUNCTION JSON_OBJECT_T RETURN SELF AS RESULT</pre><p>You can create a JSON_OBJECT_T instance using one of the following <code class="codeph">parse</code> functions:
                     </p><pre class="oac_no_warn" dir="ltr">STATIC FUNCTION parse(json VARCHAR2) RETURN JSON_OBJECT_T
STATIC FUNCTION parse(json CLOB)     RETURN JSON_OBJECT_T
STATIC FUNCTION parse(json BLOB)     RETURN JSON_OBJECT_T</pre><p>You can also create a JSON_OBJECT_T instance using one of the following constructors:</p><pre class="oac_no_warn" dir="ltr">CONSTRUCTOR FUNCTION JSON_OBJECT_T(jsn VARCHAR2) RETURN SELF AS RESULT,
CONSTRUCTOR FUNCTION JSON_OBJECT_T(jsn CLOB) RETURN SELF AS RESULT,
CONSTRUCTOR FUNCTION JSON_OBJECT_T(jsn BLOB) RETURN SELF AS RESULT,
CONSTRUCTOR FUNCTION JSON_OBJECT_T(e JSON_ELEMENT_T) RETURN SELF AS RESULT
</pre><p>Only UTF8-encoded JSON is passed as a BLOB.</p>
                     <p>The <code class="codeph">parse</code> function takes a JSON string as input and sets up an internal representation of the JSON data. If the provided input is not a valid JSON object, then an error message is raised. The input has to specify a JSON object, not an array.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-42836CFB-B5D6-45B0-AA90-68ABFF7D5315">Get Functions and Procedures</p>
                     <p> The following functions and procedures enable you to retrieve the value of the JSON object:</p><pre class="oac_no_warn" dir="ltr">MEMBER FUNCTION get(key VARCHAR2)           RETURN JSON_ELEMENT_T
MEMBER FUNCTION get_String(key VARCHAR2)    RETURN VARCHAR2
MEMBER FUNCTION get_Number(key VARCHAR2)    RETURN NUMBER
MEMBER FUNCTION get_Date(key VARCHAR2)      RETURN DATE
MEMBER FUNCTION get_Timestamp(key VARCHAR2) RETURN TIMESTAMP
MEMBER FUNCTION get_Boolean(key VARCHAR2)   RETURN BOOLEAN
MEMBER FUNCTION get_Clob(key VARCHAR2)      RETURN CLOB
MEMBER FUNCTION get_Blob(key VARCHAR2)      RETURN BLOB
MEMBER FUNCTION get_Object(key VARCHAR2)    RETURN JSON_OBJECT_T
MEMBER FUNCTION get_Array(key VARCHAR2)     RETURN JSON_ARRAY_T

MEMBER PROCEDURE get_Clob(key NUMBER, c IN OUT CLOB)
MEMBER PROCEDURE get_Blob(key NUMBER, c IN OUT BLOB)
</pre><p>Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">get</code> function has reference semantics. This means that if the returned JSON_ELEMENT_T is modified, then the containing JSON_ELEMENT_T is also changed. See the <a href="json-types.html#GUID-10062646-E36F-48B1-9F24-751B613DFB5A__REFERENCESEMANTICS-1FB7D130">Reference Semantics</a> section below for details.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">GET_STRING</code> function converts the value to a string if it is not already a string. Thus, the <code class="codeph">GET_STRING</code> function returns a non-null value even if IS_STRING returns false.
                           </p>
                        </li>
                        <li>
                           <p>All the “get” functions perform a conversion if possible. If no conversion is possible, then an error might be raised, depending on what <code class="codeph">ON_ERROR</code> is set to.
                           </p>
                        </li>
                     </ul>
                     <p>The <code class="codeph">GET_CLOB</code> and <code class="codeph">GET_BLOB</code> <span class="italic">procedures</span>, which accept a CLOB or BLOB as input, enable you to provide a LOB to be used as serialization destination. For instance, EMPTY_LOB can be provided. If you use the <code class="codeph">GET_CLOB</code> <span class="italic">function</span> instead, then a new CLOB will be created implicitly. The input LOB cannot be NULL. If you do not want to create a BLOB or CLOB first, you can use the GET_CLOB or GET_BLOB functions, which take no parameter and generates a temp LOB.
                     </p>
                     <p><code class="codeph">GET_BLOB</code> serializes to UTF8 format only.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-72ABF406-ECBF-4D26-AF1D-29CF64CF6F82">Set Procedures</p>
                     <p> The following procedures enable you to set the value of a JSON object. Existing values, if present, will be overwritten.</p><pre class="oac_no_warn" dir="ltr">MEMBER PROCEDURE put(key VARCHAR2, value JSON_ELEMENT_T)
MEMBER PROCEDURE put(key VARCHAR2, value VARCHAR2)
MEMBER PROCEDURE put(key VARCHAR2, value NUMBER)
MEMBER PROCEDURE put(key VARCHAR2, value BOOLEAN)
MEMBER PROCEDURE put(key VARCHAR2, value DATE)
MEMBER PROCEDURE put(key VARCHAR2, value TIMESTAMP)
MEMBER PROCEDURE put_Null(key VARCHAR2)
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-02E551ED-AC46-4269-91CA-49CFC24803E8">Introspection Functions</p>
                     <p>Introspection enables you to discover properties of JSON objects without modifying them. The introspection functions are:</p><pre class="oac_no_warn" dir="ltr">MEMBER FUNCTION has(key VARCHAR2)      RETURN BOOLEAN
MEMBER FUNCTION get_Type(key VARCHAR2) RETURN VARCHAR2
MEMBER FUNCTION get_Keys               RETURN JSON_KEY_LIST
</pre><p>The get_Keys function returns an object type of JSON_KEY_LIST, which is a varray of VARCHAR2(4000). The varray contains the names of keys in the JSON object. The get_Keys function returns at most 32767 field names for a given JSON object. An error is raised if it is applied to an object with more than 32767 fields.</p>
                     <p>The example below walks through the items of the varray to build a JSON_ARRAY_T object that contains all key names.</p><pre class="oac_no_warn" dir="ltr">declare
  jo JSON_OBJECT_T;
  ja JSON_ARRAY_T;
  keys JSON_KEY_LIST;
  keys_string VARCHAR2(100);

begin
  ja := new JSON_ARRAY_T;
  jo := JSON_OBJECT_T.parse('{"name":"fred",
                              "jobTitle":"codemonkey",
                              "projects":["json", "xml"]}');
  keys := jo.get_keys;
  for i in 1..keys.count loop
     ja.append(keys(i));
  end loop;

  keys_string := ja.to_string;
  dbms_output.put_line(keys_string);
end;
/</pre><p>The output is:</p><pre class="oac_no_warn" dir="ltr">["name","jobTitle","projects"]</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-9DC108CB-88B4-48EB-942A-78FA01C296CF">Modification Procedures</p>
                     <p>The following procedures enable you to remove or rename keys in a JSON object.</p><pre class="oac_no_warn" dir="ltr">MEMBER PROCEDURE remove(key VARCHAR2)
MEMBER PROCEDURE rename_Key(keyOld VARCHAR2, keyNew VARCHAR2)
</pre><p>Duplicate key names are not supported and will raise an error.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-075E3B0C-0D60-492C-B228-B07C9C3782C3">Clone Function</p>
                     <p>This function makes a copy of the JSON object. Reference semantics is changed to value semantics.</p><pre class="oac_no_warn" dir="ltr">MEMBER FUNCTION clone RETURN JSON_OBJECT_T
</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__REFERENCESEMANTICS-1FB7D130">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-1389FF0F-B3F9-4CF3-9A4D-EE1F717F8608">Reference Semantics</p>
                     <p>Calling the <code class="codeph">get</code> function that returns a JSON_ELEMENT_T object always returns a reference to the complex values instead of a copy. This means that changing the returned value affects its container. See the example below.
                     </p><pre class="oac_no_warn" dir="ltr">declare
  data    JSON_OBJECT_T;
  address JSON_OBJECT_T;
  zip     number;

begin

  data := new JSON_OBJECT_T('{
	"first": "John",
	"last": "Doe",
	"address": {
		"country": "USA",
		"zip": "94065"
	}
  }'); 

  address := data.get_object('address');
  dbms_output.put_line(address.to_string);
  
  -- 1) VALUE SEMANTICS for scalar values 
  -- (changing the value has no effect on container)
  zip := address.get_number('zip');
  dbms_output.put_line(zip);
  zip := 12345;
  dbms_output.put_line(zip);
  -- address is still the same
  dbms_output.put_line(address.to_string);


  -- 2) REFERENCE SEMANTICS for complex values
  --    'address' is a reference to the complex address values inside 'data'
  address.put('zip', 12345);
  address.put('street', 'Detour Road');
  dbms_output.put_line(data.to_string);
end;
/
</pre><p>In cases where you do not want the reference semantics, you can use the <code class="codeph">clone</code> function to create a copy of the returned object. This decouples the value from its container. In the example above, you can create a copy of the “address” object by replacing this line:
                     </p><pre class="oac_no_warn" dir="ltr">address := data.get_object('address');</pre><p>with this line:</p><pre class="oac_no_warn" dir="ltr">address := data.get_object('address').clone;</pre><p>After this, changing the address with have no effect on the value of the ‘data’ containing object.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-67DC773B-DE65-496D-8A31-A0E1D732A6E5">Update Example</p>
                     <p>The following example updates the price of an item by 10%.</p><pre class="oac_no_warn" dir="ltr">WITH
  FUNCTION updatePrice(jsonTxt in VARCHAR2 ) RETURN VARCHAR2 IS
  jo JSON_OBJECT_T;
  oldPrice NUMBER;

  BEGIN
    jo := new JSON_OBJECT_T(jsonTxt);
    oldPrice := jo.get_number('price');
    jo.put('price', oldPrice * 1.1);
    RETURN jo.to_string();
  END;
SELECT updatePrice(col)
FROM   t1;
</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36" name="GUID-69E61601-5533-418B-8C03-E591B4F7FE36"></a><h3 id="ARPLS-GUID-69E61601-5533-418B-8C03-E591B4F7FE36" class="sect3"><span class="enumeration_section">278.3 </span>JSON_ARRAY_T Object Type
               </h3>
               <div>
                  <p><code class="codeph">JSON_ARRAY_T</code> is a subtype of the <code class="codeph">JSON_ELEMENT_T</code> object type. <code class="codeph">JSON_ARRAY_T</code> corresponds to the JSON array structure.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36__GUID-027F8C09-D18F-4EBB-9135-2C94625F0793">Constructors</p>
                     <p>You can create an empty JSON_ARRAY_T instance using the following constructor.</p><pre class="oac_no_warn" dir="ltr">   CONSTRUCTOR FUNCTION JSON_ARRAY_T RETURN SELF AS RESULT</pre><p>You can create a JSON_ARRAY_T instance using one the following <code class="codeph">parse</code> functions:
                     </p><pre class="oac_no_warn" dir="ltr">STATIC FUNCTION parse(json VARCHAR2) RETURN JSON_ARRAY_T
STATIC FUNCTION parse(json CLOB)     RETURN JSON_ARRAY_T
STATIC FUNCTION parse(json BLOB)     RETURN JSON_ARRAY_T</pre><p>You can also create a JSON_ARRAY_T instance using one the following constructors:</p><pre class="oac_no_warn" dir="ltr">CONSTRUCTOR FUNCTION JSON_Array_T(jsn VARCHAR2) RETURN SELF AS RESULT
CONSTRUCTOR FUNCTION JSON_Array_T(jsn CLOB) RETURN SELF AS RESULT
CONSTRUCTOR FUNCTION JSON_Array_T(jsn BLOB) RETURN SELF AS RESULT
CONSTRUCTOR FUNCTION JSON_Array_T(e JSON_ELEMENT_T) RETURN SELF AS RESULT
</pre><p>Only UTF8-encoded JSON is passed as a BLOB.</p>
                     <p>The <code class="codeph">parse</code> function takes a JSON string as input and sets up an internal representation of the JSON data. If the provided input is not valid JSON, then an error message is raised. The input has to specify a JSON array, not an object.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36__GUID-7A93FF09-F705-477D-A8C8-F99D3B700630">Get Functions and Procedures</p>
                     <p> The following functions and procedures enable you to retrieve the value of the JSON array:</p><pre class="oac_no_warn" dir="ltr">MEMBER FUNCTION get(pos NUMBER)           RETURN JSON_ELEMENT_T
MEMBER FUNCTION get_String(pos NUMBER)    RETURN VARCHAR2
MEMBER FUNCTION get_Number(pos NUMBER)    RETURN NUMBER
MEMBER FUNCTION get_Date(pos NUMBER)      RETURN DATE
MEMBER FUNCTION get_Timestamp(pos NUMBER) RETURN TIMESTAMP
MEMBER FUNCTION get_Boolean(pos NUMBER)   RETURN BOOLEAN
MEMBER FUNCTION get_Clob(pos NUMBER)      RETURN CLOB
MEMBER FUNCTION get_Blob(pos NUMBER)      RETURN BLOB

MEMBER PROCEDURE get_Clob(pos NUMBER, c IN OUT CLOB)
MEMBER PROCEDURE get_Blob(pos NUMBER, c IN OUT BLOB)
</pre><p>Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">get</code> function has reference semantics. This means that if the returned JSON_ELEMENT_T is modified, then the containing JSON_ELEMENT_T is changed too.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">GET_STRING</code> function converts the value to a string if it is not already a string. The function returns a non-null value even if IS_STRING returns false.
                           </p>
                        </li>
                        <li>
                           <p>All the “get” functions perform a conversion if possible. If no conversion is possible, then an error might be raised, depending on what <code class="codeph">ON_ERROR</code> is set to.
                           </p>
                        </li>
                     </ul>
                     <p>The <code class="codeph">GET_CLOB</code> and <code class="codeph">GET_BLOB</code> <span class="italic">procedures</span>, which accept a CLOB or BLOB as input, enable you to provide a LOB to be used as serialization destination. For instance, EMPTY_LOB can be provided. If you use the <code class="codeph">GET_CLOB</code> <span class="italic">function</span> instead, then a new CLOB will be created implicitly. The input LOB cannot be NULL. If you do not want to create a BLOB or CLOB first, you can use the GET_CLOB or GET_BLOB functions, which take no parameter and generates a temp LOB.
                     </p>
                     <p><code class="codeph">GET_BLOB</code> serializes to UTF8 format only.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36__GUID-5761855C-FEC8-447C-B957-020CC85B7390">Set Procedures</p>
                     <p> The following procedures enable you to set the value at the specified position in the JSON array. These procedures insert (not overwrite) at the specified position unless overwrite is requested.</p><pre class="oac_no_warn" dir="ltr">MEMBER PROCEDURE put(pos NUMBER, value VARCHAR2, overwrite BOOLEAN DEFAULT FALSE)
MEMBER PROCEDURE put(pos NUMBER, value NUMBER, overwrite BOOLEAN DEFAULT FALSE)
MEMBER PROCEDURE put(pos NUMBER, value BOOLEAN, overwrite BOOLEAN DEFAULT FALSE)
MEMBER PROCEDURE put(pos NUMBER, value JSON_ELEMENT_T, overwrite BOOLEAN DEFAULT FALSE)
MEMBER PROCEDURE put(pos NUMBER, value DATE, overwrite BOOLEAN DEFAULT FALSE) 
MEMBER PROCEDURE put(pos NUMBER, value TIMESTAMP, overwrite BOOLEAN DEFAULT FALSE)
MEMBER PROCEDURE put_Null(pos NUMBER, overwrite BOOLEAN DEFAULT FALSE)
</pre><p>The following procedures append the specified value to the end of the JSON array:</p><pre class="oac_no_warn" dir="ltr">MEMBER PROCEDURE append(value JSON_ELEMENT_T)
MEMBER PROCEDURE append(value VARCHAR2)
MEMBER PROCEDURE append(value NUMBER)
MEMBER PROCEDURE append(value BOOLEAN)
MEMBER PROCEDURE append(value DATE)
MEMBER PROCEDURE append(value TIMESTAMP)
MEMBER PROCEDURE append_Null</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36__GUID-E11A0BB6-9804-44E8-9127-A8E0CD33008B">Introspection Function</p>
                     <p>Introspection enables you to discover properties of the JSON array without modifying them.</p><pre class="oac_no_warn" dir="ltr">MEMBER FUNCTION get_Type(pos NUMBER) RETURN VARCHAR2
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36__GUID-141F4B0F-4748-4278-9386-EF87450591B5">Modification Procedure</p>
                     <p>The following procedure enables you to remove the value at the specified position in the JSON array.</p><pre class="oac_no_warn" dir="ltr">MEMBER PROCEDURE remove(pos NUMBER)
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36__GUID-A789A751-4A76-4720-8C16-B1154F5BEC12">Clone Function</p>
                     <p>This function makes a copy of the JSON array. Reference semantics is changed to value semantics.</p><pre class="oac_no_warn" dir="ltr">MEMBER FUNCTION clone RETURN JSON_ARRAY_T
</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-B9526171-92E2-423A-8831-872ADCC71D1E" name="GUID-B9526171-92E2-423A-8831-872ADCC71D1E"></a><h3 id="ARPLS-GUID-B9526171-92E2-423A-8831-872ADCC71D1E" class="sect3"><span class="enumeration_section">278.4 </span>JSON_SCALAR_T Object Type
               </h3>
               <div>
                  <p><code class="codeph">JSON_SCALAR_T</code> is a subtype of the <code class="codeph">JSON_ELEMENT_T</code> object type.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B9526171-92E2-423A-8831-872ADCC71D1E__GUID-A810D2EF-4B32-4944-8E10-DA418A75B668">Description</p>
                     <p>A <code class="codeph">JSON_SCALAR_T</code> instance captures one scalar values, for example, the string “fred” or the number 1. This type does not have any  functions or procedures other than the ones inherited from  <code class="codeph">JSON_ELEMENT_T.</code> You cannot create an instance of this type directly.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-50692D34-FEAF-471E-BA22-17530E31D95D" name="GUID-50692D34-FEAF-471E-BA22-17530E31D95D"></a><h3 id="ARPLS-GUID-50692D34-FEAF-471E-BA22-17530E31D95D" class="sect3"><span class="enumeration_section">278.5 </span>JSON_KEY_LIST Type
               </h3>
               <div>
                  <p><code class="codeph">JSON_KEY_LIST</code> is a varray of <code class="codeph">VARCHAR2(4000)</code>.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-50692D34-FEAF-471E-BA22-17530E31D95D__GUID-08FBAAD2-2FEB-4B06-A633-066E3D42A472">Description</p>
                     <p>This type is used by the <code class="codeph">get_Keys</code> function in the <a href="json-types.html#GUID-10062646-E36F-48B1-9F24-751B613DFB5A" title="JSON_OBJECT_T is a subtype of the JSON_ELEMENT_T object type. It corresponds to the JSON object structure.">JSON_OBJECT_T Object Type</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
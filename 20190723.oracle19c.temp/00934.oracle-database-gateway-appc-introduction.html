<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Introduction to the Oracle Database Gateway for APPC</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-gateway-appc-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-16T18:35:49-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="F18239-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="preface.html" title="Previous" type="text/html">
      <link rel="next" href="pga-utility-oracle-database-gateway-appc.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for APPC User's Guide">
    <meta name="dcterms.isVersionOf" content="APPUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="preface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="pga-utility-oracle-database-gateway-appc.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Introduction to the Oracle Database Gateway for APPC</li>
            </ol>
            <a id="GUID-305ED3CC-1F1B-4D77-BDFE-6294CF2073D2" name="GUID-305ED3CC-1F1B-4D77-BDFE-6294CF2073D2"></a><a id="APPUG100"></a>
            
            <h2 id="APPUG-GUID-305ED3CC-1F1B-4D77-BDFE-6294CF2073D2" class="sect2"><span class="enumeration_chapter">1 </span> Introduction to the Oracle Database Gateway for APPC
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The Oracle Database Gateway for APPC enables users to initiate transaction program execution on remote <a id="d2651e30" class="indexterm-anchor"></a>online transaction processors (OLTPs). The Oracle Database Gateway for APPC can establish connection with OLTP using the SNA communication protocol. The gateway can also use TCP/IP for IMS Connect to establish communication with <a id="d2651e35" class="indexterm-anchor"></a>IMS/TM through TCP/IP. The gateway provides Oracle applications with seamless access to IBM mainframe data and services through <a id="d2651e40" class="indexterm-anchor"></a>Remote Procedural Call (RPC) processing.
               </p>
               <p>Refer to the <a href="../install-and-upgrade.html" target="_blank"><span class="italic">Oracle Database Installation Guide</span></a> and to the certification matrix on the My Oracle Support Web site for the most up-to-date list of certified hardware platforms and operating system versions. The My Oracle Support Web site can be found at: 
               </p>
               <p><a href="https://support.oracle.com" target="_blank"><code class="codeph">https://support.oracle.com</code></a></p>
               <p>The following sections describe the architecture, uses, and features of the Oracle Database Gateway for APPC.</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="oracle-database-gateway-appc-introduction.html#GUID-23C70B16-DF20-428F-BB50-B9E0BF4E3CD3">Overview of the Gateway</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-database-gateway-appc-introduction.html#GUID-71472A10-7CDD-489D-9F3F-3CDA3BDC8CB4">Features of the Gateway</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-database-gateway-appc-introduction.html#GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2">Terms</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-database-gateway-appc-introduction.html#GUID-E00522C5-A379-4D91-BF8C-E91E99258114">Examples and Sample Files for the Gateway</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-database-gateway-appc-introduction.html#GUID-F9B82855-84A6-43F1-A05C-C263557DF91E">Architecture of the Gateway</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-database-gateway-appc-introduction.html#GUID-B97F1C5F-BD96-4C40-9D01-039457D1A6DD">Communication with the Gateway</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-database-gateway-appc-introduction.html#GUID-FB873291-0F7A-454F-9AA4-BE37615FAA89">RPC Functions</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-database-gateway-appc-introduction.html#GUID-CA304293-6ECF-44AD-9A1C-932AD3FBC74F">Overview of a Gateway Using SNA</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-database-gateway-appc-introduction.html#GUID-7A5AF521-D507-4988-854C-AAE5BBD7FF87">Overview of a Gateway Using TCP/IP</a></p>
                  </li>
               </ul>
            </div><a id="APPUG1155"></a><a id="APPUG901"></a><div class="props_rev_3"><a id="GUID-23C70B16-DF20-428F-BB50-B9E0BF4E3CD3" name="GUID-23C70B16-DF20-428F-BB50-B9E0BF4E3CD3"></a><h3 id="APPUG-GUID-23C70B16-DF20-428F-BB50-B9E0BF4E3CD3" class="sect3">Overview of the Gateway</h3>
               <div>
                  <p>The Oracle Database Gateway for APPC extends the <a id="d2651e150" class="indexterm-anchor"></a><a id="d2651e154" class="indexterm-anchor"></a>RPC <a id="d2651e161" class="indexterm-anchor"></a><a id="d2651e165" class="indexterm-anchor"></a>facilities available with the Oracle database. The gateway enables any client application to use <a id="d2651e170" class="indexterm-anchor"></a>PL/SQL to request execution of a <a id="d2651e175" class="indexterm-anchor"></a>remote transaction<a id="d2651e181" class="indexterm-anchor"></a> program (RTP) residing on a host. The gateway provides RPC processing to systems using the <a id="d2651e186" class="indexterm-anchor"></a>SNA Advanced Program-to-Program Communication (APPC) protocol and to IMS/TM systems using <a id="d2651e191" class="indexterm-anchor"></a>TCP/IP support for IMS Connect. This architecture allows efficient access to data and transactions available on the IBM mainframe and <a id="d2651e196" class="indexterm-anchor"></a>IMS, respectively.
                  </p>
                  <p>The gateway requires no Oracle software on the remote host system. Because of this, the gateway uses existing transactions with little or no programming effort on the remote host.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-23C70B16-DF20-428F-BB50-B9E0BF4E3CD3__GUID-01AE25B2-E1D5-45D1-966A-F8ECF66827AE">For gateways using SNA only:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a id="d2651e206" class="indexterm-anchor"></a>The use of a generic and standard protocol, APPC, allows the gateway to access numerous systems. The <a id="d2651e211" class="indexterm-anchor"></a>gateway can communicate with virtually any APPC-enabled system, including IBM Corporation's CICS on any platform and IBM Corporation's IMS and APPC/MVS. These transaction monitors provide access to a broad range of systems, allowing the gateway to access many <a id="d2651e216" class="indexterm-anchor"></a><a id="d2651e220" class="indexterm-anchor"></a>datastores, including VSAM, DB2 (static SQL), IMS, and others. 
                     </p>
                     <p>The gateway can access any application capable of using the CPI-C API, either directly or through a TP monitor such as CICS.</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPUG902"></a><div class="props_rev_3"><a id="GUID-71472A10-7CDD-489D-9F3F-3CDA3BDC8CB4" name="GUID-71472A10-7CDD-489D-9F3F-3CDA3BDC8CB4"></a><h3 id="APPUG-GUID-71472A10-7CDD-489D-9F3F-3CDA3BDC8CB4" class="sect3">Features of the Gateway</h3>
               <div>
                  <p>The Oracle Database Gateway for APPC provides the following benefits:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a id="d2651e262" class="indexterm-anchor"></a>Fast interface
                        </p>
                        <p>The gateway is optimized so that remote execution of a program is achieved with minimum network traffic. The interface to the gateway is an optimized <a id="d2651e271" class="indexterm-anchor"></a>PL/SQL stored procedure specification (called the TIP or transaction interface package) precompiled in the <a id="d2651e276" class="indexterm-anchor"></a>Oracle database. Because there are no additional software layers on the remote host, overhead occurs only when your program executes.
                        </p>
                     </li>
                     <li>
                        <p>Location <a id="d2651e284" class="indexterm-anchor"></a><a id="d2651e288" class="indexterm-anchor"></a>transparency
                        </p>
                        <p>Client applications need not be operating system-specific. For example, your application can call a program in a CICS Transaction Server for z/OS. If you move the program to a CICS region on AIX, then you need not change the application.</p>
                     </li>
                     <li>
                        <p>Application<a id="d2651e300" class="indexterm-anchor"></a><a id="d2651e304" class="indexterm-anchor"></a> transparency
                        </p>
                        <p>Users calling applications that execute a remote transaction program are unaware that a request is sent to a host.</p>
                     </li>
                     <li>
                        <p><a id="d2651e315" class="indexterm-anchor"></a>Flexible interface
                        </p>
                        <p>You can use the gateway to interface with existing procedural logic or to integrate new procedural logic into an Oracle database environment.</p>
                     </li>
                     <li>
                        <p><a id="d2651e326" class="indexterm-anchor"></a>Oracle database integration
                        </p>
                        <p>The integration of the Oracle database with the gateway enables the gateway to benefit from existing and future Oracle database features. For example, the gateway can be called from an Oracle stored procedure or database trigger.</p>
                     </li>
                     <li>
                        <p>Transactional support</p>
                        <p>The gateway and the Oracle database allow remote transfer updates and Oracle database updates to be performed in a coordinated fashion.</p>
                     </li>
                     <li>
                        <p>Wide selection of <a id="d2651e343" class="indexterm-anchor"></a>tools
                        </p>
                        <p>The gateway supports any tool or application that supports PL/SQL.</p>
                     </li>
                     <li>
                        <p><a id="d2651e354" class="indexterm-anchor"></a><a id="d2651e358" class="indexterm-anchor"></a>PL/SQL code generator
                        </p>
                        <p>The <a id="d2651e367" class="indexterm-anchor"></a>Oracle Database Gateway for APPC provides a powerful development environment, including:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>a data dictionary to store information relevant to the remote transaction</p>
                           </li>
                           <li>
                              <p>a tool to generate the PL/SQL Transaction Interface Package, or TIP</p>
                           </li>
                           <li>
                              <p>a report utility to view the information stored in the gateway dictionary</p>
                           </li>
                           <li>
                              <p>a complete set of tracing and debugging facilities</p>
                           </li>
                           <li>
                              <p>a wide set of samples to demonstrate the use of the product against datastores such as DB2, IMS, and CICS.</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><a id="d2651e390" class="indexterm-anchor"></a>Site autonomy and security
                        </p>
                        <p>The gateway provides site autonomy, allowing you to do such things as authenticate users. It also provides role-based security compatible with any security package running on your mainframe computer.</p>
                     </li>
                     <li>
                        <p><a id="d2651e401" class="indexterm-anchor"></a>Automatic conversion
                        </p>
                        <p>Through the <a id="d2651e410" class="indexterm-anchor"></a>TIP, the following conversions are performed:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a id="d2651e418" class="indexterm-anchor"></a>ASCII to and from <a id="d2651e423" class="indexterm-anchor"></a>EBCDIC
                              </p>
                           </li>
                           <li>
                              <p>remote transaction program datatypes to and from PL/SQL datatypes</p>
                           </li>
                           <li>
                              <p>national language support for many languages</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Globalization Support</p>
                     </li>
                     <li>
                        <p>TCP/IP support for IMS Connect</p>
                        <p> <a id="d2651e443" class="indexterm-anchor"></a>This release of the gateway includes TCP/IP support for IMS Connect, giving users a choice of whether to use an SNA or TCP/IP communication protocol. IMS Connect is an IBM product which allows TCP/IP clients to trigger execution of IMS transactions. The gateway can use a TCP/IP communication protocol to access IMS Connect, which triggers execution of IMS transactions. There is no SNA involvement with this configuration.
                        </p>
                        <p> Related to this feature of the gateway is:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <a id="d2651e454" class="indexterm-anchor"></a>gateway mapping tool. This release of the gateway includes a tool (<a id="d2651e459" class="indexterm-anchor"></a><code class="codeph">pg4tcpmap</code>) whose purpose is to map the information from your SNA Side Profile Name to the TCP/IP host name and Port Number. 
                              </p>
                              <div class="infoboxnote" id="GUID-71472A10-7CDD-489D-9F3F-3CDA3BDC8CB4__GUID-41698BE5-5149-4B23-9DEF-6FBF7C80E58A">
                                 <p class="notep1">Note:</p>
                                 <p>When your communications protocol is <a id="d2651e469" class="indexterm-anchor"></a><a id="d2651e473" class="indexterm-anchor"></a>TCP/IP, only IMS is supported as the OLTP.
                                 </p>
                              </div>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
            </div><a id="APPUG1156"></a><a id="APPUG1157"></a><a id="APPUG1158"></a><a id="APPUG1159"></a><a id="APPUG1160"></a><a id="APPUG1161"></a><a id="APPUG1162"></a><a id="APPUG1163"></a><a id="APPUG1164"></a><a id="APPUG1165"></a><a id="APPUG1166"></a><a id="APPUG1167"></a><a id="APPUG1168"></a><a id="APPUG1169"></a><a id="APPUG1170"></a><a id="APPUG1171"></a><a id="APPUG1172"></a><a id="APPUG903"></a><div class="props_rev_3"><a id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2" name="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2"></a><h3 id="APPUG-GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2" class="sect3">Terms</h3>
               <div>
                  <div class="section">
                     <p>The following terms and definitions are used throughout this guide: </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-360B429E-B124-4415-9B59-7DF28A5C1966">Gateway Initialization File </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This file is known as <a id="d2651e663" class="indexterm-anchor"></a><a id="d2651e665" class="indexterm-anchor"></a><code class="codeph">init<span class="codeinlineitalic">sid</span>.ora</code> and it contains parameters that govern the operation of the gateway. If you are using the SNA protocol, refer to Appendix&nbsp;A, "Gateway Initialization Parameters for SNA Protocol" in the <a href="../appci/appc-gateway-initialization-parameters-sna.html#APPCI283" target="_blank"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for IBM AIX on POWER Systems (64-Bit), Linux x86-64, Oracle Solaris on SPARC (64-Bit), and HP-UX Itanium</span></a> or <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/appug&amp;id=APPCW258" target="_blank"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for Microsoft Windows</span></a> for more information. If your protocol is TCP/IP, refer to Appendix&nbsp;B, "Gateway Initialization Parameters for TCP/IP Communication Protocol" in the <a href="../appci/appc-gateway-initialization-parameters-tcp-ip.html#APPCI290" target="_blank"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for IBM AIX on POWER Systems (64-Bit), Linux x86-64, Oracle Solaris on SPARC (64-Bit), and HP-UX Itanium</span></a> or <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/appug&amp;id=APPCW265" target="_blank"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for Microsoft Windows</span></a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-F3763162-9925-4088-A1FF-F1B9EFF2591A">Gateway Remote Procedure</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The Oracle Database Gateway for APPC provides prebuilt remote procedures. In general, <a id="d2651e702" class="indexterm-anchor"></a><a id="d2651e708" class="indexterm-anchor"></a><a id="d2651e714" class="indexterm-anchor"></a>the following three remote procedures are used:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">PGAINIT</code>, which initializes transactions
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">PGAXFER</code>, which transfers data
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">PGATERM</code>, which terminates transactions
                           </p>
                        </li>
                     </ul>
                     <p>Refer to <a href="oracle-database-gateway-appc-rpc-interface.html#GUID-E715B6DF-B773-4D0D-9382-643472B34FC3"> Gateway RPC Interface</a> in this guide and to "Remote Procedural Call Functions" in Chapter&nbsp;1 of the <a href="../appci/appc-gateway-introduction.html#APPCI101" target="_blank"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for IBM AIX on POWER Systems (64-Bit), Linux x86-64, Oracle Solaris on SPARC (64-Bit), and HP-UX Itanium</span></a> or <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/appug&amp;id=APPCW101" target="_blank"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for Microsoft Windows</span></a> for more information about gateway remote procedures.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-E3C0F342-15C2-40F4-B5EC-AD41AB7C6B26">dg4pwd</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p> <code class="codeph"></code><code class="codeph">dg4pwd</code> is a utility which encrypts passwords that are normally stored in the gateway initialization file. Passwords are stored in an encrypted form in the password file, making the information more secure. Refer to "Passwords in the Gateway Initialization File" in the security requirements chapter of the<a href="../appci/appc-gateway-security-requirements.html#APPCI256" target="_blank"><span class="italic"> Oracle Database Gateway for APPC Installation and Configuration Guide for IBM AIX on POWER Systems (64-Bit), Linux x86-64, Oracle Solaris on SPARC (64-Bit), and HP-UX Itanium</span></a> and <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/appug&amp;id=APPCW232" target="_blank"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for Microsoft Windows</span></a> for detailed information about how the <code class="codeph">dg4pwd</code> utility works. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-1ED29A39-3344-41F9-B830-EF186B216027">pg4tcpmap Tool</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This tool is applicable only when the gateway is using TCP/IP support for IMS Connect. Its function is to map SNA parameters (such as Side Profile Name) to TCP/IP parameters (such as OLTP host name, IMS Connect port number and IMS destination ID). </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-60A87F9E-2C85-4932-A012-3DA462FC4007">PGA (Procedural Gateway Administration)</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>PGA is a general reference within this guide to all or most components comprising the Oracle Database Gateway for APPC. This term is used when references to a specific product or component are too narrow.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-0FA584DC-F09E-4048-ACAE-F43EB037BBAC">PGDL (Procedural Gateway Definition Language)</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>PGDL is the collection of statements used to define transactions and data to the PGAU.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-2A92D3E5-0F75-4337-BB9C-FEEB69BC9CD7">PL/SQL Stored Procedure Specification (PL/SQL package)</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This is a precompiled PL/SQL procedure that is stored in Oracle database.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-438CB326-CE89-44EA-8C6F-16E3582C350B">UTL_RAW PL/SQL Package (the UTL_RAW Functions)</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This component of the gateway represents a series of data conversion functions for PL/SQL RAW variables and remote host data. The types of conversions performed depend on the language of the remote host data. Refer to <a href="data-type-conversion-oracle-database-gateway-appc.html#GUID-FEB0C201-9C07-4932-A328-B048B582B18A"> Datatype Conversions</a> in this guide for more information.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-B9246004-4C44-4D87-984E-07E8402E2B28">UTL_PG PL/SQL Package (the UTL_PG Functions)</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This component of the gateway represents a series of COBOL numeric data conversion functions. Refer to <span class="q">"<a href="oracle-database-gateway-appc-utl_pg-interface.html#GUID-6455E79A-90A8-4074-B428-669B46934CCC">NUMBER_TO_RAW and RAW_TO_NUMBER Argument Values</a>"</span> in <a href="oracle-database-gateway-appc-utl_pg-interface.html#GUID-A6AC77AC-DE2C-476B-AC68-DF8E8F9C600E"> The UTL_PG Interface</a> of this guide for supported numeric datatype conversions.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-44F2808B-CEC1-4E66-94CD-6325F8563B7C">Oracle Database </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This is any Oracle database instance that communicates with the gateway for purposes of performing RPCs to execute <a id="d2651e832" class="indexterm-anchor"></a>RTP. The Oracle database can be on the same system as the gateway or on a different system. If it is on a different system, then <a id="d2651e837" class="indexterm-anchor"></a>Oracle Net is required on both systems. Refer to <a href="oracle-database-gateway-appc-introduction.html#GUID-F9B82855-84A6-43F1-A05C-C263557DF91E__I1006880">Figure 1-2</a> for a view of the gateway architecture. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-55142CFF-093D-4618-A7FB-6533214315D5">OLTP (Online Transaction Processor)</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>OLTP is any of a number of online transaction processors available from other vendors, including CICS Transaction Server for z/OS and IMS/TM.</p>
                     <div class="infoboxnote" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-0BC836B5-3D6B-4B0C-8CF0-C0C552986BDF">
                        <p class="notep1">Note:</p>
                        <p>When your communications protocol is <a id="d2651e852" class="indexterm-anchor"></a><a id="d2651e856" class="indexterm-anchor"></a>TCP/IP, only IMS is supported as the OLTP. <a id="d2651e861" class="indexterm-anchor"></a><a id="d2651e865" class="indexterm-anchor"></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-6A00CD6D-2428-487F-B65A-CBF0C4CF1B84">PGAU (Procedural Gateway Administration Utility)</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>PGAU is the tool that is used to define and generate <a id="d2651e875" class="indexterm-anchor"></a>PL/SQL transaction interface packages (TIPs). Refer to <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> in this guide for more information about PGAU.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-8B5C520F-3A68-461C-882F-FF55F8CA85AA">PG DD (Procedural Gateway Data Dictionary)</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This component of the gateway is a repository of remote host transaction definitions and data definitions. <a id="d2651e888" class="indexterm-anchor"></a>PGAU accesses definitions in the PG&nbsp;DD when generating TIPs. The PG DD has datatype dependencies because it supports the PGAU and is not intended to be directly accessed by the customer. Refer to <a href="oracle-database-gateway-appc-data-dictionary.html#GUID-F3F6C244-4F0A-4529-B790-A5BBC4FB2F93"> Database Gateway for APPC Data Dictionary</a> in this guide for a list of PG&nbsp;DD tables.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-827E6C58-D82A-471B-A899-C260ED35F5B0">RPC (Remote Procedural Call)</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>RPC is a programming call that executes program logic on one system in response to a request from another system. Refer to "Gateway Remote Procedure" in Appendix&nbsp;C of the <a href="../appci/appc-gateway-terminology.html#APPCI296" target="_blank"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for IBM AIX on POWER Systems (64-Bit), Linux x86-64, Oracle Solaris on SPARC (64-Bit), and HP-UX Itanium</span></a>or  <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/appug&amp;id=APPCW271" target="_blank"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for Microsoft Windows</span></a> , and to <a href="oracle-database-gateway-appc-rpc-interface.html#GUID-E715B6DF-B773-4D0D-9382-643472B34FC3"> Gateway RPC Interface</a> in this guide for more information.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-B87C9380-E287-4915-AD4D-C63807505155">RTP (Remote Transaction Program) </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>A remote transaction program is a customer-written transaction, running under the control of an OLTP, which the user invokes remotely using a PL/SQL procedure. To execute a remote transaction program through the gateway, you must use RPC to execute a PL/SQL program to call the gateway functions.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__GUID-99E22A96-F5A5-47FD-AB99-5BA6D13D715A">TIP (Transaction Interface Package)</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>A <a id="d2651e929" class="indexterm-anchor"></a>TIP is an Oracle <a id="d2651e934" class="indexterm-anchor"></a>PL/SQL package that exists between your application and the remote transaction program. The transaction interface package, or TIP, is a set of PL/SQL stored procedures that invoke the RTP through the gateway. TIPs perform the conversion and reformatting of remote host data using PL/SQL and <code class="codeph">UTL_RAW/UTL_PG</code> functions.
                     </p>
                     <p><a href="oracle-database-gateway-appc-introduction.html#GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__I1006739">Figure 1-1</a> illustrates where the terminology discussed in the preceding sections applies to the gateway's architecture. 
                     </p>
                     <div class="figure" id="GUID-E0F4ECF2-04C6-45F7-B10E-88DBF4413FB2__I1006739">
                        <p class="titleinfigure">Figure 1-1  Relationship of Gateway and Oracle Database </p><img src="img/trms1_1.gif" alt="Description of Figure 1-1 follows" title="Description of Figure 1-1 follows" longdesc="img_text/trms1_1.html"><br><a href="img_text/trms1_1.html">Description of "Figure 1-1  Relationship of Gateway and Oracle Database "</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPUG1173"></a><a id="APPUG1174"></a><a id="APPUG904"></a><div class="props_rev_3"><a id="GUID-E00522C5-A379-4D91-BF8C-E91E99258114" name="GUID-E00522C5-A379-4D91-BF8C-E91E99258114"></a><h3 id="APPUG-GUID-E00522C5-A379-4D91-BF8C-E91E99258114" class="sect3">Examples and Sample Files for the Gateway</h3>
               <div>
                  <div class="section">
                     <p>The following sample files and examples are referred to for illustration purposes throughout this guide. There are different example and sample files for a gateway using the SNA protocol than for a gateway using TCP/IP for IMS Connect.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E00522C5-A379-4D91-BF8C-E91E99258114__GUID-D79DA43F-D239-44FD-9C5B-33FDD82938E3">Examples and Sample Files for Gateway Using SNA</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a id="d2651e1007" class="indexterm-anchor"></a>For gateways using the SNA communication protocol, this guide uses a CICS-DB2 inquiry as an example. Transaction Interface Packages (TIPs) <a id="d2651e1012" class="indexterm-anchor"></a><a id="d2651e1014" class="indexterm-anchor"></a><code class="codeph">pgadb2i.pkb</code> and <a id="d2651e1023" class="indexterm-anchor"></a><a id="d2651e1025" class="indexterm-anchor"></a><code class="codeph">pgadb2i.pkh</code> send an employee number, <code class="codeph">empno</code>, to a DB2 application and receive an employee record, <code class="codeph">emprec</code>.
                     </p>
                     <p>The CICS-DB2 inquiry sample and its associated PGAU commands are also available in the <code class="codeph">%ORACLE_HOME%\dg4appc\demo\CICS </code>directory on Windows platform and <code class="codeph">$ORACLE_HOME/dg4appc/demo/CICS</code> directory on UNIX platforms. The sample CICS-DB2 inquiry used as an example in this chapter is in files <a id="d2651e1049" class="indexterm-anchor"></a><a id="d2651e1051" class="indexterm-anchor"></a><code class="codeph">pgadb2i.pkh</code> and <a id="d2651e1058" class="indexterm-anchor"></a><a id="d2651e1062" class="indexterm-anchor"></a><code class="codeph">pgadb2i.pkb</code>. Refer to the <code class="codeph">README.doc</code> file in the same directory for information about installing and using the samples. It can be found in the                                                             <code class="codeph">%ORACLE_HOME%\dg4appc\demo\CICS</code> directory for Windows and             <code class="codeph">$ORACLE_HOME/dg4appc/demo/CICS</code> directory for UNIX.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E00522C5-A379-4D91-BF8C-E91E99258114__GUID-D7EE66DC-2AFD-458F-93B5-0B6B0B036CC1">Examples and Sample Files for Gateway Using TCP/IP</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>If your gateway is using the TCP/IP communication protocol, this guide uses an IMS inquiry as an example. Transaction Interface Packages (<a id="d2651e1083" class="indexterm-anchor"></a>TIPs) <code class="codeph">pgtflip.pkh</code> and <code class="codeph">pgtflip.pkb</code> send input to IMS, through IMS Connect, and receive the flipped input as the output.
                     </p>
                     <p>The <a id="d2651e1094" class="indexterm-anchor"></a>IMS inquiry sample (FLIP) and its associated PGAU commands are located in the <code class="codeph">%ORACLE_HOME%\dg4appc\demo\IMS</code> directory for Windows and <code class="codeph">$ORACLE_HOME/dg4appc/demo/IMS</code> directory for UNIX. The sample IMS inquiry used as an example for a gateway using TCP/IP is located in files <code class="codeph">pgtflip.pkh</code> and <code class="codeph">pgtflip.pkb</code>. 
                     </p>
                     <p>Refer to the <code class="codeph">README.doc</code> file for more information about installing and using other IMS samples. It can be found in the <code class="codeph">%ORACLE_HOME%\dg4appc\demo\IMS</code> directory for Windows and<code class="codeph"> $ORACLE_HOME/dg4appc/demo/IMS </code>directory for UNIX.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPUG1175"></a><a id="APPUG905"></a><div class="props_rev_3"><a id="GUID-F9B82855-84A6-43F1-A05C-C263557DF91E" name="GUID-F9B82855-84A6-43F1-A05C-C263557DF91E"></a><h3 id="APPUG-GUID-F9B82855-84A6-43F1-A05C-C263557DF91E" class="sect3">Architecture of the Gateway</h3>
               <div>
                  <p>The architecture of Oracle Database Gateway for APPC consists of several components:<a id="d2651e1165" class="indexterm-anchor"></a><a id="d2651e1169" class="indexterm-anchor"></a><a id="d2651e1173" class="indexterm-anchor"></a><a id="d2651e1177" class="indexterm-anchor"></a></p>
                  <ol>
                     <li>
                        <p><a id="d2651e1184" class="indexterm-anchor"></a>Oracle database
                        </p>
                        <p>Refer to the configuration section corresponding to your communications protocol in the installation guides for a description of the various methods for establishing the gateway-Oracle database relationship. <span class="italic"> </span>  
                        </p>
                        <p>The Oracle database can also be used for non-gateway applications.</p>
                     </li>
                     <li>
                        <p>The gateway</p>
                        <p>Oracle Database Gateway for APPC must be installed on a server that can run the <a id="d2651e1201" class="indexterm-anchor"></a>required version of the operating system.
                        </p>
                     </li>
                     <li>
                        <p>An OLTP<a id="d2651e1209" class="indexterm-anchor"></a></p>
                        <p>The OLTP must be accessible from the gateway using your SNA or TCP/IP communication protocol. Multiple <a id="d2651e1215" class="indexterm-anchor"></a><a id="d2651e1221" class="indexterm-anchor"></a>Oracle databases can access the same gateway. A single system gateway installation can be configured to access more than one OLTP.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="italic">For gateways using TCP/IP:</span> The only <a id="d2651e1232" class="indexterm-anchor"></a>OLTP that is supported through TCP/IP is IMS through IMS Connect.The OLTP must be accessible to the system using the TCP/IP protocol. Multiple <a id="d2651e1237" class="indexterm-anchor"></a>Oracle databases can access the same gateway. A single system gateway installation can be configured to access more than one OLTP. Multiple IMS systems can be accessed from an IMS Connect. If you have a number of IMS Connect systems available, any of these may be connected to one or more IMS systems. 
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ol>
                  <p><a href="oracle-database-gateway-appc-introduction.html#GUID-F9B82855-84A6-43F1-A05C-C263557DF91E__I1006880">Figure 1-2</a> illustrates the architecture of the Oracle Database Gateway for APPC using SNA or TCP/IP, as described in the previous section.
                  </p>
                  <div class="figure" id="GUID-F9B82855-84A6-43F1-A05C-C263557DF91E__I1006880">
                     <p class="titleinfigure">Figure 1-2  Gateway Architecture Featuring SNA or TCP/IP Protocol</p><img src="img/arch1_2.gif" alt="Description of Figure 1-2 follows" title="Description of Figure 1-2 follows" longdesc="img_text/arch1_2.html"><br><a href="img_text/arch1_2.html">Description of "Figure 1-2  Gateway Architecture Featuring SNA or TCP/IP Protocol"</a></div>
                  <!-- class="figure" -->
               </div>
            </div><a id="APPUG906"></a><div class="props_rev_3"><a id="GUID-B97F1C5F-BD96-4C40-9D01-039457D1A6DD" name="GUID-B97F1C5F-BD96-4C40-9D01-039457D1A6DD"></a><h3 id="APPUG-GUID-B97F1C5F-BD96-4C40-9D01-039457D1A6DD" class="sect3">Communication with the Gateway</h3>
               <div>
                  <p>All the communication between the <a id="d2651e1285" class="indexterm-anchor"></a><a id="d2651e1291" class="indexterm-anchor"></a>user or client program and the gateway is handled through a TIP which executes on an Oracle database. The TIP is a standard <a id="d2651e1298" class="indexterm-anchor"></a><a id="d2651e1302" class="indexterm-anchor"></a><a id="d2651e1306" class="indexterm-anchor"></a>PL/SQL package that provides the following functions:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>declares the PL/SQL variables that can be exchanged with a remote transaction program;</p>
                     </li>
                     <li>
                        <p>calls the gateway packages that handle the communications for starting the conversation, exchanging data, and terminating the conversation;</p>
                     </li>
                     <li>
                        <p>handles all datatype conversions between <a id="d2651e1321" class="indexterm-anchor"></a>PL/SQL datatypes and the target program datatypes.
                        </p>
                     </li>
                  </ul>
                  <p>The <a id="d2651e1328" class="indexterm-anchor"></a><a id="d2651e1332" class="indexterm-anchor"></a>PGAU, provided with the gateway, automatically generates the <a id="d2651e1337" class="indexterm-anchor"></a><a id="d2651e1343" class="indexterm-anchor"></a>TIP specification.
                  </p>
                  <p>The gateway is identified to the Oracle database using a database link.<a id="d2651e1352" class="indexterm-anchor"></a> The database link is the same construct used to identify other Oracle databases. The functions in the gateway are referenced in <a id="d2651e1355" class="indexterm-anchor"></a>PL/SQL as:
                  </p><pre class="oac_no_warn" dir="ltr"><span class="italic">function_name@dblink_name</span> 
</pre></div>
            </div><a id="APPUG1176"></a><a id="APPUG907"></a><div class="props_rev_3"><a id="GUID-FB873291-0F7A-454F-9AA4-BE37615FAA89" name="GUID-FB873291-0F7A-454F-9AA4-BE37615FAA89"></a><h3 id="APPUG-GUID-FB873291-0F7A-454F-9AA4-BE37615FAA89" class="sect3">RPC Functions</h3>
               <div>
                  <p>The Oracle Database Gateway for APPC provides a set of functions that are called by the client through <a id="d2651e1397" class="indexterm-anchor"></a><a id="d2651e1403" class="indexterm-anchor"></a>RPC. These functions direct the gateway to initiate, transfer data with, and terminate RTP running under an OLTP on another system. 
                  </p>
                  <p><a href="oracle-database-gateway-appc-introduction.html#GUID-FB873291-0F7A-454F-9AA4-BE37615FAA89__CHDBFJJG" title="This 4 column table describes lists the remote procedural call functions and the correlating commands that are invoked in the Oracle TIP, the gateway and remote host">Table 1-1</a> lists the RPC functions and the correlating commands that are invoked in the gateway and remote host.
                  </p>
                  <div class="tblformal" id="GUID-FB873291-0F7A-454F-9AA4-BE37615FAA89__CHDBFJJG">
                     <p class="titleintable">Table 1-1 RPC Functions and Commands in the Gateway and Remote Host</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="RPC Functions and Commands in the Gateway and Remote Host" summary="This 4 column table describes lists the remote procedural call functions and the correlating commands that are invoked in the Oracle TIP, the gateway and remote host" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="26%" id="d2651e1426">Applications</th>
                              <th align="left" valign="bottom" width="32%" id="d2651e1429">Oracle TIP</th>
                              <th align="left" valign="bottom" width="18%" id="d2651e1432">Gateway</th>
                              <th align="left" valign="bottom" width="24%" id="d2651e1435">Remote Host</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d2651e1440" headers="d2651e1426 ">
                                 <p><code class="codeph">call tip_init</code></p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d2651e1440 d2651e1429 ">
                                 <p><code class="codeph">tip_init</code></p>
                                 <p><code class="codeph">call pgainit@gateway</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d2651e1440 d2651e1432 ">
                                 <p><code class="codeph">PGAINIT</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d2651e1440 d2651e1435 ">
                                 <p>Initiate program</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d2651e1459" headers="d2651e1426 ">
                                 <p><code class="codeph">call tip_main</code></p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d2651e1459 d2651e1429 ">
                                 <p><code class="codeph">tip_main</code></p>
                                 <p><code class="codeph">call pgaxfer@gateway</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d2651e1459 d2651e1432 ">
                                 <p><code class="codeph">PGAXFER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d2651e1459 d2651e1435 ">
                                 <p>Exchange data</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d2651e1478" headers="d2651e1426 ">
                                 <p><code class="codeph">call tip_term</code></p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d2651e1478 d2651e1429 ">
                                 <p><code class="codeph">tip_term</code></p>
                                 <p><code class="codeph">call pgaterm@gateway</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d2651e1478 d2651e1432 ">
                                 <p><code class="codeph">PGATERM</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d2651e1478 d2651e1435 ">
                                 <p>Terminate program</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="APPUG908"></a><div class="props_rev_3"><a id="GUID-3D04A99C-B4DE-4C8C-9B9A-E72FA5DEC43D" name="GUID-3D04A99C-B4DE-4C8C-9B9A-E72FA5DEC43D"></a><h4 id="APPUG-GUID-3D04A99C-B4DE-4C8C-9B9A-E72FA5DEC43D" class="sect4">TIP Function</h4>
                  <div>
                     <p>The following sections describe how a TIP works by first establishing a connection to the remote host, then exchanging data from the target transaction program and finally, terminating a conversation.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-database-gateway-appc-introduction.html#GUID-2EFCA740-E85D-4889-AF88-CCD56C8682AF">Remote Transaction Initiation</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-database-gateway-appc-introduction.html#GUID-EEFF058B-7830-4059-B809-8E97F5585120">Data Exchange </a></p>
                        </li>
                        <li>
                           <p><a href="oracle-database-gateway-appc-introduction.html#GUID-1B3FA84E-16F2-4BBC-882C-33CB0AEF92D0">Remote Transaction Termination</a></p>
                        </li>
                     </ul>
                  </div><a id="APPUG909"></a><div class="props_rev_3"><a id="GUID-2EFCA740-E85D-4889-AF88-CCD56C8682AF" name="GUID-2EFCA740-E85D-4889-AF88-CCD56C8682AF"></a><h5 id="APPUG-GUID-2EFCA740-E85D-4889-AF88-CCD56C8682AF" class="sect5">Remote Transaction Initiation</h5>
                     <div>
                        <p>The <a id="d2651e1592" class="indexterm-anchor"></a><a id="d2651e1596" class="indexterm-anchor"></a><a id="d2651e1600" class="indexterm-anchor"></a>TIP initiates a connection to the remote host using one of the gateway functions, <code class="codeph">PGAINIT</code>. 
                        </p>
                        <p><span class="bold">When the communication protocol is SNA:</span> <code class="codeph">PGAINIT</code><a id="d2651e1616" class="indexterm-anchor"></a><a id="d2651e1618" class="indexterm-anchor"></a><a id="d2651e1624" class="indexterm-anchor"></a><a id="d2651e1626" class="indexterm-anchor"></a><a id="d2651e1630" class="indexterm-anchor"></a> provides, as input, the required <a id="d2651e1635" class="indexterm-anchor"></a>SNA parameters to start a conversation with the target transaction program. These parameters are sent across the SNA network, which returns a conversation identifier to <code class="codeph">PGAINIT</code>. Future calls to the target program use the conversation identifier as an input parameter.
                        </p>
                        <p><span class="bold">When the communication protocol is TCP/IP</span>: <code class="codeph">PGAINIT</code><a id="d2651e1650" class="indexterm-anchor"></a><a id="d2651e1652" class="indexterm-anchor"></a><a id="d2651e1658" class="indexterm-anchor"></a><a id="d2651e1660" class="indexterm-anchor"></a><a id="d2651e1664" class="indexterm-anchor"></a> provides<a id="d2651e1669" class="indexterm-anchor"></a>, as input, the required TCP/IP parameters.These parameters are sent across the TCP/IP network to start the conversation with the target transaction program. The TCP/IP network returns a <a id="d2651e1675" class="indexterm-anchor"></a><a id="d2651e1679" class="indexterm-anchor"></a>socket file descriptor to <code class="codeph">PGAINIT</code>. Future calls, such as <a id="d2651e1685" class="indexterm-anchor"></a><code class="codeph">PGAXFER</code> and <a id="d2651e1690" class="indexterm-anchor"></a><code class="codeph">PGATERM</code>, use this same socket file descriptor as an input parameter. 
                        </p>
                     </div>
                  </div><a id="APPUG910"></a><div class="props_rev_3"><a id="GUID-EEFF058B-7830-4059-B809-8E97F5585120" name="GUID-EEFF058B-7830-4059-B809-8E97F5585120"></a><h5 id="APPUG-GUID-EEFF058B-7830-4059-B809-8E97F5585120" class="sect5">Data Exchange </h5>
                     <div>
                        <p>After the conversation is established, a database gateway function called <a id="d2651e1739" class="indexterm-anchor"></a><a id="d2651e1741" class="indexterm-anchor"></a><code class="codeph">PGAXFER</code> can exchange data in the form of input and output variables. <code class="codeph">PGAXFER</code> sends and receives buffers to and from the target transaction program. The gateway sees a buffer as only a RAW stream of bytes. The TIP that resides in the <a id="d2651e1753" class="indexterm-anchor"></a><a id="d2651e1755" class="indexterm-anchor"></a>Oracle database is responsible for converting P<a id="d2651e1760" class="indexterm-anchor"></a>L/SQL datatypes of the application to RAW before sending the buffer to the gateway. It is also responsible for converting RAW to PL/SQL datatypes before returning the results to the application.
                        </p>
                     </div>
                  </div><a id="APPUG911"></a><div class="props_rev_3"><a id="GUID-1B3FA84E-16F2-4BBC-882C-33CB0AEF92D0" name="GUID-1B3FA84E-16F2-4BBC-882C-33CB0AEF92D0"></a><h5 id="APPUG-GUID-1B3FA84E-16F2-4BBC-882C-33CB0AEF92D0" class="sect5">Remote Transaction Termination</h5>
                     <div>
                        <p>When communication with the remote program is complete, the gateway function <code class="codeph">PGATERM</code> terminates the conversation between the gateway and the remote host. 
                        </p>
                        <p><span class="bold">When the communication protocol is SNA</span>: <code class="codeph">PGATERM</code> uses the conversation identifier as an input parameter to request conversation termination.
                        </p>
                        <p><span class="bold">When the communication protocol is TCP/IP</span>: <a id="d2651e1830" class="indexterm-anchor"></a><a id="d2651e1834" class="indexterm-anchor"></a><a id="d2651e1838" class="indexterm-anchor"></a><code class="codeph">PGATERM</code> uses the socket file descriptor for TCP/IP as an input parameter to request conversation termination.
                        </p>
                        <div class="infoboxnote" id="GUID-1B3FA84E-16F2-4BBC-882C-33CB0AEF92D0__GUID-FE58747F-4FFB-4D17-BB64-BADE5E5DE8F6">
                           <p class="notep1">Note:</p>
                           <p>At this point, if your communication protocol is SNA, then proceed to the following section, <a href="oracle-database-gateway-appc-introduction.html#GUID-CA304293-6ECF-44AD-9A1C-932AD3FBC74F">Overview of a Gateway Using SNA</a>. 
                           </p>
                           <p>If your gateway communication protocol is TCP/IP, then proceed to <a href="oracle-database-gateway-appc-introduction.html#GUID-7A5AF521-D507-4988-854C-AAE5BBD7FF87">Overview of a Gateway Using TCP/IP</a>.
                           </p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="APPUG912"></a><div class="props_rev_3"><a id="GUID-CA304293-6ECF-44AD-9A1C-932AD3FBC74F" name="GUID-CA304293-6ECF-44AD-9A1C-932AD3FBC74F"></a><h3 id="APPUG-GUID-CA304293-6ECF-44AD-9A1C-932AD3FBC74F" class="sect3">Overview of a Gateway Using SNA</h3>
               <div>
                  <p>If you are using the SNA communication protocol, read the following sections to develop an understanding of how the gateway communicates with the Oracle database and with the mainframe, as well as transaction types unique to your gateway and writing TIPs.</p>
               </div><a id="APPUG913"></a><div class="props_rev_3"><a id="GUID-52D2A508-FE0B-4028-8D1D-80590AF314F4" name="GUID-52D2A508-FE0B-4028-8D1D-80590AF314F4"></a><h4 id="APPUG-GUID-52D2A508-FE0B-4028-8D1D-80590AF314F4" class="sect4">Transaction Types for a Gateway Using SNA</h4>
                  <div>
                     <p>The Oracle Database Gateway for APPC supports <a id="d2651e1924" class="indexterm-anchor"></a><a id="d2651e1930" class="indexterm-anchor"></a><a id="d2651e1934" class="indexterm-anchor"></a><a id="d2651e1938" class="indexterm-anchor"></a>three types of transactions that read data from and write data to remote host systems:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">one-shot</span></p>
                           <p>In a <a id="d2651e1952" class="indexterm-anchor"></a>one-shot transaction, the application starts the connection, exchanges data, and terminates the connection, all in a single call.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">persistent</span></p>
                           <p>In a <a id="d2651e1961" class="indexterm-anchor"></a>persistent transaction, multiple calls to exchange data with the remote transaction can be executed before terminating the conversation.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">multi-conversational</span></p>
                           <p>In a <a id="d2651e1970" class="indexterm-anchor"></a>multi-conversational transaction, the database gateway server can be used to exchange multiple records in one call to the remote transaction program.
                           </p>
                        </li>
                     </ul>
                     <p>Refer to <span class="q">"<a href="developing-appc-client-app-sna-only.html#GUID-FD67739C-7249-466A-A492-0E43195A6D3B">Remote Host Transaction Types</a>"</span> in <a href="developing-appc-client-app-sna-only.html#GUID-9D1AFA3A-C1DC-4D52-AAAB-41269D6D5788"> Client Application Development (SNA Only)</a> of this guide for more information about transaction types.
                     </p>
                     <p>The following list demonstrates examples of the power of the <a id="d2651e1988" class="indexterm-anchor"></a>Oracle Database Gateway for APPC:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You can initiate a CICS transaction on the mainframe to retrieve data from a VSAM file for a PC application.</p>
                        </li>
                        <li>
                           <p>You can modify and monitor the operation of a remote process control computer.</p>
                        </li>
                        <li>
                           <p>You can initiate an IMS/TM transaction that executes static SQL in DB2.</p>
                        </li>
                        <li>
                           <p>You can initiate a <a id="d2651e2006" class="indexterm-anchor"></a>CICS transaction that returns a large number of records in a single call.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="APPUG914"></a><div class="props_rev_3"><a id="GUID-63C9BB44-1931-48BB-B008-E3AAD3C0DA45" name="GUID-63C9BB44-1931-48BB-B008-E3AAD3C0DA45"></a><h4 id="APPUG-GUID-63C9BB44-1931-48BB-B008-E3AAD3C0DA45" class="sect4">Simple Gateway Communication with the Oracle Database (SNA)</h4>
                  <div>
                     <p>This section describes simple communication between the mainframe and the <a id="d2651e2057" class="indexterm-anchor"></a>Oracle database on a gateway using the SNA communication protocol. The Oracle Database Gateway for APPC lets you write your own procedures to begin transferring information between the Oracle database and a variety of programs on an IBM mainframe, including IBM CICS, IMS, and APPC/MVS. 
                     </p>
                     <p>For an illustration of the communications function of the Oracle Database Gateway for APPC, refer to <code class="codeph">%ORACLE_HOME%\dg4appc\demo\CICS\pgacics.sql</code> on Microsoft Windows or <code class="codeph">$ORACLE_HOME/dg4appc/demo/CICS/pgacics.sql</code> on UNIX based platforms. This is a sample communication between the Oracle database and CICS Transaction Server for z/OS. Executing this simple <a id="d2651e2072" class="indexterm-anchor"></a>PL/SQL procedure <code class="codeph">pgacics.sql</code>, causes the Oracle database to invoke the database gateway, which uses <a id="d2651e2080" class="indexterm-anchor"></a>SNA to converse with the <a id="d2651e2086" class="indexterm-anchor"></a><code class="codeph">FLIP</code> transaction in CICS. These steps are described in detail in <a href="oracle-database-gateway-appc-introduction.html#GUID-4CC5C50B-B5CF-4CA6-BAF1-11D2872CEA68">Steps to Communicate Between Gateway and Mainframe Using SNA </a>. Note that you will already have compiled and linked the stored procedure when you configured the gateway.
                     </p>
                  </div><a id="APPUG1177"></a><a id="APPUG915"></a><div class="props_rev_3"><a id="GUID-4CC5C50B-B5CF-4CA6-BAF1-11D2872CEA68" name="GUID-4CC5C50B-B5CF-4CA6-BAF1-11D2872CEA68"></a><h5 id="APPUG-GUID-4CC5C50B-B5CF-4CA6-BAF1-11D2872CEA68" class="sect5">Steps to Communicate Between Gateway and Mainframe Using SNA </h5>
                     <div>
                        <div class="section">
                           <p>The following steps describe the Windows-to-mainframe communications process illustrated in <a href="oracle-database-gateway-appc-introduction.html#GUID-4CC5C50B-B5CF-4CA6-BAF1-11D2872CEA68__I1007062">Figure 1-3</a> when your communication protocol is SNA to communicate between the gateway and the mainframe:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>From <a id="d2651e2137" class="indexterm-anchor"></a><a id="d2651e2143" class="indexterm-anchor"></a><a id="d2651e2147" class="indexterm-anchor"></a>SQL*Plus, execute <code class="codeph">pgacics</code>. This invokes the <a id="d2651e2155" class="indexterm-anchor"></a>PL/SQL stored procedure in the Oracle database.</span><div>
                                 <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; sqlplus &lt;userid&gt;/&lt;password&gt;@&lt;database_specification_string&gt;
SQL&gt; execute pgacics('==&lt; .SCIC htiw gnitacinummoc si yawetag ruoy ,snoitalutargnoC &gt;==');
</pre><p>For UNIX Based platforms:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus &lt;userid&gt;/&lt;password&gt;@&lt;database_specification_string&gt;
SQL&gt; execute pgacics('==&lt; .SCIC htiw gnitacinummoc si yawetag ruoy ,snoitalutargnoC &gt;==');
</pre></div>
                           </li>
                           <li class="stepexpand"><span>The <code class="codeph">pgacics</code> <a id="d2651e2175" class="indexterm-anchor"></a><a id="d2651e2179" class="indexterm-anchor"></a>PL/SQL stored procedure will start up the gateway. The <a id="d2651e2184" class="indexterm-anchor"></a><a id="d2651e2190" class="indexterm-anchor"></a>gateway will start up communication with <a id="d2651e2197" class="indexterm-anchor"></a>CICS Transaction Server for z/OS through SNA and will call <code class="codeph">FLIP</code>.</span></li>
                           <li class="stepexpand"><span><code class="codeph">FLIP</code> processes the input, generates the output and sends the output back to the database gateway.</span></li>
                           <li class="stepexpand"><span>Finally, the database gateway will send the output back to the PL/SQL stored procedure in the Oracle database. The result is displayed in SQL*Plus:</span><div><pre class="oac_no_warn" dir="ltr">==&gt; Congratulations, your gateway is communicating with CICS. &lt;==
PL/SQL procedure successfully completed.
</pre><p><a href="oracle-database-gateway-appc-introduction.html#GUID-4CC5C50B-B5CF-4CA6-BAF1-11D2872CEA68__I1007062">Figure 1-3</a> illustrates the communications process described in steps 1 through 4.
                                 </p>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="figure" id="GUID-4CC5C50B-B5CF-4CA6-BAF1-11D2872CEA68__I1007062">
                              <p class="titleinfigure">Figure 1-3 Communication Between the Oracle Database and the Mainframe, Using SNA</p><img src="img/svrcm1_3.gif" alt="Description of Figure 1-3 follows" title="Description of Figure 1-3 follows" longdesc="img_text/svrcm1_3.html"><br><a href="img_text/svrcm1_3.html">Description of "Figure 1-3 Communication Between the Oracle Database and the Mainframe, Using SNA"</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="APPUG916"></a><div class="props_rev_3"><a id="GUID-9B1543F0-2EA1-4471-8F65-6B933D779C3A" name="GUID-9B1543F0-2EA1-4471-8F65-6B933D779C3A"></a><h4 id="APPUG-GUID-9B1543F0-2EA1-4471-8F65-6B933D779C3A" class="sect4">Writing TIPs to Generate PL/SQL Programs Using SNA </h4>
                  <div>
                     <p><a id="d2651e2258" class="indexterm-anchor"></a><a id="d2651e2262" class="indexterm-anchor"></a>Most transactions using SNA communication protocol are much larger and more complex than the sample <code class="codeph">pgacics.sql</code> file referred to in <a href="oracle-database-gateway-appc-introduction.html#GUID-4CC5C50B-B5CF-4CA6-BAF1-11D2872CEA68__I1007062">Figure 1-3</a>. Additionally, communication with a normal-sized RTP would require you to create an extremely long PL/SQL file. PGAU function generates the PL/SQL procedure for you.
                     </p>
                     <p><a id="d2651e2275" class="indexterm-anchor"></a><a id="d2651e2279" class="indexterm-anchor"></a><a id="d2651e2283" class="indexterm-anchor"></a>The following is a brief description of the <a id="d2651e2288" class="indexterm-anchor"></a>four steps necessary for you to generate a TIP. Refer to <a href="creating-tip-oracle-database-gateway-appc.html#GUID-78D4439E-7DD6-45DF-842E-35007FCC572B"> Creating a TIP</a> for detailed information about this procedure, and refer to <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> for more information about PGAU.
                     </p>
                     <p>All parameter names in this section are taken from a file called <code class="codeph">pgadb2i.ctl</code> in the <code class="codeph">%ORACLE_HOME%\pga4appc\demo\CICS</code> directory on Microsoft Windows or in the <code class="codeph">$ORACLE_HOME/pga4appc/demo/CICS</code> directory on UNIX Based systems.
                     </p>
                  </div><a id="APPUG1417"></a><a id="APPUG1418"></a><a id="APPUG1419"></a><a id="APPUG1420"></a><a id="APPUG917"></a><div class="props_rev_3"><a id="GUID-73B2D410-166F-4377-A404-CF87CCB5C6FA" name="GUID-73B2D410-166F-4377-A404-CF87CCB5C6FA"></a><h5 id="APPUG-GUID-73B2D410-166F-4377-A404-CF87CCB5C6FA" class="sect5">Steps to Writing a TIP on a Gateway Using SNA</h5>
                     <div>
                        <div class="section">
                           <p>Follow these steps to write a TIP. </p>
                           <dl>
                              <dt class="dlterm"><a name="GUID-73B2D410-166F-4377-A404-CF87CCB5C6FA__GUID-628EF7CA-EBCE-46DC-BA7C-5CE95ACC46FA">
                                    <!-- --></a>Step 1&nbsp;&nbsp;&nbsp; Create a control file:
                              </dt>
                              <dd>
                                 <p>The user writes the control files. The <a id="d2651e2383" class="indexterm-anchor"></a><a id="d2651e2385" class="indexterm-anchor"></a>control file has four main types of <a id="d2651e2390" class="indexterm-anchor"></a>PGAU commands:
                                 </p>
                                 <ol>
                                    <li>
                                       <p><a id="d2651e2396" class="indexterm-anchor"></a><a id="d2651e2398" class="indexterm-anchor"></a><a id="d2651e2404" class="indexterm-anchor"></a><code class="codeph">DEFINE DATA</code>. This is used to define input and output fields, using COBOL data definitions. 
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Sample define data:</p><pre class="oac_no_warn" dir="ltr">define data empno plsdname(empno) usage(pass) language(ibmvscobolii)
                  infile("empno.cob");
</pre></li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><a id="d2651e2417" class="indexterm-anchor"></a><a id="d2651e2419" class="indexterm-anchor"></a><a id="d2651e2421" class="indexterm-anchor"></a><code class="codeph">DEFINE CALL</code>. This is used to define PL/SQL functions calls to be generated as part of the package.
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Sample define call:</p><pre class="oac_no_warn" dir="ltr">define call db2imain pkgcall(pgadb2i_main) 
                     parms((empno in),(emprec out));
</pre></li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><a id="d2651e2438" class="indexterm-anchor"></a><a id="d2651e2440" class="indexterm-anchor"></a><a id="d2651e2444" class="indexterm-anchor"></a><code class="codeph">DEFINE TRANSACTION</code>. This is used to group the preceding functions and specify other parameters on which the TIP depends.
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Sample define transaction:</p><pre class="oac_no_warn" dir="ltr">define transaction db2i call(db2imain,db2idiag)
                        sideprofile(CICSPGA) 
                        tpname(DB2I)
                        logmode(oraplu62)
                        synclevel(0)
                        nls_language("american_america.we8ebcdic37c");
</pre></li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><a id="d2651e2459" class="indexterm-anchor"></a><a id="d2651e2461" class="indexterm-anchor"></a><a id="d2651e2463" class="indexterm-anchor"></a><code class="codeph">GENERATE</code>. This is used to generate the TIP specification files from the previously stored data, call, and transaction definitions.
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Sample generate transaction:</p><pre class="oac_no_warn" dir="ltr">generate db2i pkgname(pgadb2i) pganode(pga) outfile("pgadb2i");
</pre></li>
                                       </ul>
                                    </li>
                                 </ol>
                              </dd>
                              <dt class="dlterm"><a name="GUID-73B2D410-166F-4377-A404-CF87CCB5C6FA__GUID-8625D08C-C796-4809-8A8D-D5B6DFB3C911">
                                    <!-- --></a>Step 2&nbsp;&nbsp;&nbsp;Execute the control file within PGAU 
                              </dt>
                              <dd>
                                 <p>Running the control file within PGAU will create PG DD entries for the data, call, and transaction definitions, and will generate the <a id="d2651e2484" class="indexterm-anchor"></a><a id="d2651e2488" class="indexterm-anchor"></a>specification files (For example, <a id="d2651e2495" class="indexterm-anchor"></a><a id="d2651e2497" class="indexterm-anchor"></a><code class="codeph">pgadb2i.pkh</code> and <a id="d2651e2504" class="indexterm-anchor"></a><a id="d2651e2506" class="indexterm-anchor"></a><code class="codeph">pgadb2i.pkb</code>):
                                 </p>
                                 <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; pgau
PGAU&gt; CONNECT&lt;userid&gt;/&lt;password&gt;@&lt;database&gt;_specification_string&gt;
PGAU&gt; @pgadb2i.ctl
</pre><p>For UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ pgau
PGAU&gt; CONNECT&lt;userid&gt;/&lt;password&gt;@&lt;database&gt;_specification_string&gt;
PGAU&gt; @pgadb2i.ctl
</pre></dd>
                              <dt class="dlterm"><a name="GUID-73B2D410-166F-4377-A404-CF87CCB5C6FA__GUID-A57FF8EC-E0E8-48C4-8803-1F84606594F7">
                                    <!-- --></a>Step 3&nbsp;&nbsp;&nbsp;Execute the specification files 
                              </dt>
                              <dd>
                                 <p>Running the specification files will create the PL/SQL stored procedures. Note that the header specification file <span class="bold"></span>(for example, <code class="codeph">pgadb2i.pkh</code>) must be run first:
                                 </p>
                                 <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; sqlplus&lt;userid&gt;/&lt;password&gt;@&lt;database_specification_string&gt;
SQL&gt; @pgadb2i.pkh;
SQL&gt; @pgadb2i.pkb;
</pre><p>For UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus&lt;userid&gt;/&lt;password&gt;@&lt;database_specification_string&gt;
SQL&gt; @pgadb2i.pkh;
SQL&gt; @pgadb2i.pkb;
</pre></dd>
                              <dt class="dlterm"><a name="GUID-73B2D410-166F-4377-A404-CF87CCB5C6FA__GUID-AE9B7E85-4E31-4700-92E3-CC710DFE6A06">
                                    <!-- --></a>Step 4&nbsp;&nbsp;&nbsp;Create a driver procedure to run the TIP
                              </dt>
                              <dd>
                                 <p>The TIP is now ready for use. For convenience, it will usually be called using a <a id="d2651e2546" class="indexterm-anchor"></a><a id="d2651e2550" class="indexterm-anchor"></a>driver procedure (for example, <code class="codeph">db2idriv</code>). This driver will then call the individual stored procedures in the correct order. Create the driver procedure and run it: 
                                 </p>
                                 <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; sqlplus &lt;userid&gt;/&lt;password&gt;@&lt;database_specification string&gt; 
SQL&gt; @pgadb2id.sql
SQL&gt; execute db2idriv('000320');
</pre><p>For UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus &lt;userid&gt;/&lt;password&gt;@&lt;database_specification string&gt; 
SQL&gt; @pgadb2id.sql
SQL&gt; execute db2idriv('000320');
</pre></dd>
                           </dl>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="APPUG918"></a><div class="props_rev_3"><a id="GUID-7A5AF521-D507-4988-854C-AAE5BBD7FF87" name="GUID-7A5AF521-D507-4988-854C-AAE5BBD7FF87"></a><h3 id="APPUG-GUID-7A5AF521-D507-4988-854C-AAE5BBD7FF87" class="sect3">Overview of a Gateway Using TCP/IP</h3>
               <div>
                  <p>If you are using the TCP/IP communication protocol, read the following sections to develop an understanding of how the gateway communicates with the Oracle database and with the mainframe, as well as transaction types unique to your gateway and writing TIPs.</p>
               </div><a id="APPUG919"></a><div class="props_rev_3"><a id="GUID-C3FC8647-C6A8-47C9-8D23-6E121CB5DFDF" name="GUID-C3FC8647-C6A8-47C9-8D23-6E121CB5DFDF"></a><h4 id="APPUG-GUID-C3FC8647-C6A8-47C9-8D23-6E121CB5DFDF" class="sect4">Transaction Types for a Gateway Using TCP/IP</h4>
                  <div>
                     <p>The <a id="d2651e2639" class="indexterm-anchor"></a><a id="d2651e2645" class="indexterm-anchor"></a>Oracle Database Gateway for APPC using TCP/IP support for IMS Connect supports three types of transaction socket connections:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Transaction socket.</p>
                           <p> The socket connection lasts across a single transaction.</p>
                        </li>
                        <li>
                           <p><a id="d2651e2658" class="indexterm-anchor"></a><a id="d2651e2662" class="indexterm-anchor"></a>Persistent socket.
                           </p>
                           <p>The socket connection lasts across multiple transactions.</p>
                        </li>
                        <li>
                           <p><a id="d2651e2671" class="indexterm-anchor"></a><a id="d2651e2673" class="indexterm-anchor"></a>Nonpersistent socket.
                           </p>
                           <p>The socket connection lasts across a single exchange consisting of one input and one output.</p>
                           <div class="infoboxnote" id="GUID-C3FC8647-C6A8-47C9-8D23-6E121CB5DFDF__GUID-E6EB246D-D198-44B3-A2CC-F44D76751007">
                              <p class="notep1">Note:</p>
                              <p>Do not use the nonpersistent socket type if you plan to implement conversational transactions because multiple connections and disconnections will occur. </p>
                           </div>
                           <p>Refer to the section about <code class="codeph">pg4tcpmap</code> commands in <a href="pg4tcpmap-commands-tcpip.html#GUID-CDAD0D0C-6070-4E0E-9B97-E4DCF919510F"> PG4TCPMAP Commands (TCP/IP Only)</a> of this guide for more information about the function and use of these parameters.
                           </p>
                           <p>You can initiate an IMS/TM transaction that executes static SQL in DB2. This illustrates the power of the Oracle Database Gateway for APPC's feature supporting TCP/IP for IMS Connect. </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="APPUG920"></a><div class="props_rev_3"><a id="GUID-67448CC3-252E-4E57-AA81-600774F0408B" name="GUID-67448CC3-252E-4E57-AA81-600774F0408B"></a><h4 id="APPUG-GUID-67448CC3-252E-4E57-AA81-600774F0408B" class="sect4">Simple Gateway Communication with the Oracle Database (TCP/IP)</h4>
                  <div>
                     <p>This section describes simple communication between IMS and the <a id="d2651e2726" class="indexterm-anchor"></a><a id="d2651e2732" class="indexterm-anchor"></a><a id="d2651e2738" class="indexterm-anchor"></a>Oracle database when<a id="d2651e2743" class="indexterm-anchor"></a><a id="d2651e2749" class="indexterm-anchor"></a>TCP/IP for IMS Connect is being used as the communication protocol between the gateway and the remote host (IMS). The Oracle Database Gateway for APPC lets you write your own procedures to begin transferring information between the Oracle database and <a id="d2651e2756" class="indexterm-anchor"></a>I/O PCB programs on IMS. 
                     </p>
                     <p>For an illustration of the communications function of the gateway using TCP/IP for IMS Connect, refer to the <code class="codeph">%ORACLE_HOME%\dg4appc\demo\IMS\pgaims.sql</code> file on Microsoft Windows or<code class="codeph"> $ORACLE_HOME/dg4appc/demo/IMS/pgaims.sql </code>on UNIX based systems.
                     </p>
                     <p>Executing the simple <a id="d2651e2769" class="indexterm-anchor"></a>PL/SQL procedure <code class="codeph">pgaims.sql</code> causes the Oracle database to call the gateway, which uses <a id="d2651e2777" class="indexterm-anchor"></a>TCP/IP to converse with the sample transaction <a id="d2651e2780" class="indexterm-anchor"></a><code class="codeph">FLIP</code> in IMS. The communication steps that take place when you execute the PL/SQL procedure are described in detail in <a href="oracle-database-gateway-appc-introduction.html#GUID-8D439735-322D-4898-AB08-76FCE0B93724">Steps to Communication Between the Gateway and IMS_ Using TCP/IP</a>. Note that you will already have compiled and linked the stored procedure when you configured the gateway.
                     </p>
                  </div><a id="APPUG921"></a><div class="props_rev_3"><a id="GUID-E20B6880-1F0C-4EAD-B0D6-23CEDDCE81AB" name="GUID-E20B6880-1F0C-4EAD-B0D6-23CEDDCE81AB"></a><h5 id="APPUG-GUID-E20B6880-1F0C-4EAD-B0D6-23CEDDCE81AB" class="sect5">Preparing the Gateway to Communicate Using TCP/IP</h5>
                     <div>
                        <p>If your gateway is using TCP/IP support for IMS Connect, then you must use the <code class="codeph">pg4tcpmap</code> tool to create the required mapping between <code class="codeph">PGAINIT</code> parameters and the target system network address information. The <code class="codeph">pg4tcpmap</code> tool maps the Side Profile Name specified in a <code class="codeph">DEFINE TRANSACTION</code> to TCP/IP and IMS Connect attributes, such as port number, IP address (host name) and IMS subsystem ID. The TCP/IP parameters are used to start a conversation with the target transaction program.
                        </p>
                        <p>The <code class="codeph">pg4tcpmap</code> tool must be run in order to populate the <code class="codeph">PGA_TCP_IMSC</code> table before executing any TIPs which rely on TPC/IP support for IMS Connect.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Refer to <a href="pg4tcpmap-commands-tcpip.html#GUID-CDAD0D0C-6070-4E0E-9B97-E4DCF919510F"> PG4TCPMAP Commands (TCP/IP Only)</a> in this guide for complete instructions for setting up and executing <code class="codeph">pg4tcpmap</code> commands to populate the <code class="codeph">PGA_TCP_IMSC</code> table. <a href="pg4tcpmap-commands-tcpip.html#GUID-CDAD0D0C-6070-4E0E-9B97-E4DCF919510F"> PG4TCPMAP Commands (TCP/IP Only)</a> also explains the content of the <code class="codeph">PGA_TCP_IMSC</code> table and an example of how to use the table. 
                              </p>
                           </li>
                           <li>
                              <p>A trace file from a sample <code class="codeph">pg4tcpmap</code> execution is located in <a href="troubleshooting-oracle-database-gateway-appc.html#GUID-6A2105DD-D6F0-4368-BE63-F8A85D5C959F"> Troubleshooting</a> in this guide.
                              </p>
                           </li>
                           <li>
                              <p>A screen output file is located in Appendix&nbsp;B, "Gateway Initialization Parameters for TCP/IP Communication Protocol" in the <a href="../appci/appc-gateway-initialization-parameters-tcp-ip.html#APPCI290" target="_blank"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for IBM AIX on POWER Systems (64-Bit), Linux x86-64, Oracle Solaris on SPARC (64-Bit), and HP-UX Itanium</span></a> or <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/appug&amp;id=APPCW265" target="_blank"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for Microsoft Windows</span></a>.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="APPUG1178"></a><a id="APPUG922"></a><div class="props_rev_3"><a id="GUID-8D439735-322D-4898-AB08-76FCE0B93724" name="GUID-8D439735-322D-4898-AB08-76FCE0B93724"></a><h5 id="APPUG-GUID-8D439735-322D-4898-AB08-76FCE0B93724" class="sect5">Steps to Communication Between the Gateway and IMS, Using TCP/IP</h5>
                     <div>
                        <div class="section">
                           <p>The following steps describe the communications process, as illustrated in <a href="oracle-database-gateway-appc-introduction.html#GUID-8D439735-322D-4898-AB08-76FCE0B93724__I1012713">Figure 1-4</a> when your communication protocol is <a id="d2651e2923" class="indexterm-anchor"></a><a id="d2651e2927" class="indexterm-anchor"></a>TCP/IP:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>From <a id="d2651e2938" class="indexterm-anchor"></a>SQL*Plus, execute <code class="codeph">pgaims.sql</code>. This invokes the <a id="d2651e2948" class="indexterm-anchor"></a>PL/SQL stored procedure in the Oracle database.</span><div>
                                 <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; sqlplus &lt;userid&gt;/&lt;password&gt;@&lt;database_specification_string&gt;
SQL&gt; execute pgaims 'snoitalutargnoC';
</pre><p>For UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus &lt;userid&gt;/&lt;password&gt;@&lt;database_specification_string&gt;
SQL&gt; execute pgaims 'snoitalutargnoC';
</pre><p>The <code class="codeph">pgaims.sql</code> stored procedure will start up the gateway. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>The gateway which has the APPC information will call the mapping table                    (<a id="d2651e2970" class="indexterm-anchor"></a><a id="d2651e2972" class="indexterm-anchor"></a><code class="codeph">PGA_TCP_IMSC</code>). The mapping table will map the information so that it will have the host name (TCP/IP address) and the port number.</span><div>
                                 <div class="infoboxnote" id="GUID-8D439735-322D-4898-AB08-76FCE0B93724__GUID-87180633-2288-4865-99E1-81335F0A0C20">
                                    <p class="notep1">Note:</p>
                                    <p>Rather than insert, delete, or update the <code class="codeph">PGA_TCP_IMSC</code> mapping table manually, you should use the <a id="d2651e2986" class="indexterm-anchor"></a><code class="codeph">pg4tcpmap</code> tool to do so. You may use the <code class="codeph">SELECT</code> statement to query the rows. 
                                    </p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>When the gateway has the port number and host name, it will initiate communication with IMS Connect through TCP/IP, and it will call <code class="codeph">FLIP</code> through IMS.</span></li>
                           <li class="stepexpand"><span><code class="codeph">FLIP</code> processes the input, generates the output, and sends the output back to the gateway.</span></li>
                           <li class="stepexpand"><span>Finally, the gateway will send the output back to the PL/SQL stored procedure in the Oracle database. The result is displayed in SQL*Plus:</span><div><pre class="oac_no_warn" dir="ltr">Congratulations
PL/SQL procedure successfully completed.
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p><a href="oracle-database-gateway-appc-introduction.html#GUID-8D439735-322D-4898-AB08-76FCE0B93724__I1012713">Figure 1-4</a> illustrates the communications process described in the previous Steps 1 through 5.
                           </p>
                           <div class="figure" id="GUID-8D439735-322D-4898-AB08-76FCE0B93724__I1012713">
                              <p class="titleinfigure">Figure 1-4 Communication Between Oracle Database and Mainframe, Using TCP/IP</p><img src="img/svtcp1_4.gif" alt="Description of Figure 1-4 follows" title="Description of Figure 1-4 follows" longdesc="img_text/svtcp1_4.html"><br><a href="img_text/svtcp1_4.html">Description of "Figure 1-4 Communication Between Oracle Database and Mainframe, Using TCP/IP"</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="APPUG923"></a><div class="props_rev_3"><a id="GUID-4ACF4E46-9CE9-434C-BA89-0D2C2436C108" name="GUID-4ACF4E46-9CE9-434C-BA89-0D2C2436C108"></a><h4 id="APPUG-GUID-4ACF4E46-9CE9-434C-BA89-0D2C2436C108" class="sect4">Writing TIPs to Generate PL/SQL Programs Using TCP/IP</h4>
                  <div>
                     <p>Most transactions are much larger and more complex than the sample <code class="codeph">pgaims.sql</code> file referred to in <a href="oracle-database-gateway-appc-introduction.html#GUID-8D439735-322D-4898-AB08-76FCE0B93724__I1012713">Figure 1-4</a>. Additionally, communication with a normal-sized RTP (remote transaction program) would require you to create an extremely long PL/SQL file. Oracle Database Gateway for APPC's TIP function generates the PL/SQL procedure for you.
                     </p>
                     <p><a id="d2651e3059" class="indexterm-anchor"></a><a id="d2651e3063" class="indexterm-anchor"></a>The following is a brief description of the <a id="d2651e3068" class="indexterm-anchor"></a>four steps necessary for you to generate a TIP. Refer to <a href="creating-tip-oracle-database-gateway-appc.html#GUID-78D4439E-7DD6-45DF-842E-35007FCC572B"> Creating a TIP</a> for detailed information about this procedure, and refer to <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> for more information about PGAU.
                     </p>
                     <p>All parameter names in this section are taken from a file called <code class="codeph">pgtflip.ctl</code> in the                            <code class="codeph">%ORACLE_HOME%\pga4appc\demo\IMS</code> directory on Microsoft Windows or <code class="codeph">$ORACLE_HOME/pga4appc/demo/IMS</code> directory on UNIX based systems. 
                     </p>
                  </div><a id="APPUG1421"></a><a id="APPUG1422"></a><a id="APPUG1423"></a><a id="APPUG1424"></a><a id="APPUG924"></a><div class="props_rev_3"><a id="GUID-442D9861-6F6B-4823-9646-DD4C5F11F22B" name="GUID-442D9861-6F6B-4823-9646-DD4C5F11F22B"></a><h5 id="APPUG-GUID-442D9861-6F6B-4823-9646-DD4C5F11F22B" class="sect5">Steps to Writing a TIP on a Gateway Using TCP/IP</h5>
                     <div>
                        <div class="section">
                           <p>Follow these steps to write a TIP. </p>
                           <dl>
                              <dt class="dlterm"><a name="GUID-442D9861-6F6B-4823-9646-DD4C5F11F22B__GUID-76CF17D8-C3B5-45D2-A4CA-ACE2718F0E68">
                                    <!-- --></a>Step 1&nbsp;&nbsp;&nbsp; Create a control file:
                              </dt>
                              <dd>
                                 <p>The user writes the control files. The <a id="d2651e3161" class="indexterm-anchor"></a><a id="d2651e3165" class="indexterm-anchor"></a>control file has four main types of <a id="d2651e3170" class="indexterm-anchor"></a>PGAU commands:
                                 </p>
                                 <ol>
                                    <li>
                                       <p><a id="d2651e3176" class="indexterm-anchor"></a><a id="d2651e3178" class="indexterm-anchor"></a><a id="d2651e3184" class="indexterm-anchor"></a><code class="codeph">DEFINE DATA</code>. This is used to define input and output fields, using COBOL data definitions.
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Sample define data:</p><pre class="oac_no_warn" dir="ltr">define data flipin plsdname(flipin) usage(pass) language(ibmvscobolii)
(
  01 msgin pic x(20).
)

define data flipout plsdname(flipout) usage(pass) language(ibmvscobolii)
(
  01 msgout pic x(20).
)
</pre></li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><a id="d2651e3197" class="indexterm-anchor"></a><a id="d2651e3199" class="indexterm-anchor"></a><a id="d2651e3201" class="indexterm-anchor"></a><code class="codeph">DEFINE CALL</code>. This is used to define PL/SQL functions calls to be generated as part of the package. 
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Sample define call:</p><pre class="oac_no_warn" dir="ltr">define call flipmain pkgcall(pgtflip_main) 
                     parms((flipin in),(flipout out));
</pre></li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><a id="d2651e3218" class="indexterm-anchor"></a><a id="d2651e3220" class="indexterm-anchor"></a><code class="codeph">DEFINE TRANSACTION</code>. This is used to group the preceding functions and specify other parameters on which the TIP depends.
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Sample define transaction:</p><pre class="oac_no_warn" dir="ltr">define transaction imsflip call(flipmain)
                        sideprofile(pgatcp) 
                        tpname(flip)
                        nls_language("american_america.us7ascii");</pre><div class="infoboxnote" id="GUID-442D9861-6F6B-4823-9646-DD4C5F11F22B__GUID-AA07B6B6-109F-49F9-B550-EFF34DFD48D3">
                                                <p class="notep1">Note:</p>
                                                <p>On a gateway using TCP/IP, the side profile name value is actually the TCP/IP unique name that was defined when the user specified the value, host name, port number and many other IMS Connect values during configuration of the network. </p>
                                             </div>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><a id="d2651e3240" class="indexterm-anchor"></a><a id="d2651e3242" class="indexterm-anchor"></a><a id="d2651e3244" class="indexterm-anchor"></a><code class="codeph">GENERATE</code>. This is used to generate the TIP specification files from the previously stored data, call, and transaction definitions.
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Sample generate transaction:</p><pre class="oac_no_warn" dir="ltr">generate imsflip pkgname(pgtflip) pganode(pga10ia) outfile("pgtflip") diagnose(pkgex(dc,dr));</pre></li>
                                       </ul>
                                    </li>
                                 </ol>
                              </dd>
                              <dt class="dlterm"><a name="GUID-442D9861-6F6B-4823-9646-DD4C5F11F22B__GUID-058CA731-03C0-4F42-992A-256AB2BDF4ED">
                                    <!-- --></a>Step 2&nbsp;&nbsp;&nbsp;Execute the control file within PGAU 
                              </dt>
                              <dd>
                                 <p>Running the control file within PGAU will create PG DD entries for the data, call, and transaction definitions and will generate the <a id="d2651e3265" class="indexterm-anchor"></a><a id="d2651e3269" class="indexterm-anchor"></a>specification files (for example, <a id="d2651e3276" class="indexterm-anchor"></a><a id="d2651e3278" class="indexterm-anchor"></a><code class="codeph">pgtflip.pkh</code> and <a id="d2651e3285" class="indexterm-anchor"></a><a id="d2651e3287" class="indexterm-anchor"></a><code class="codeph">pgtflip.pkb</code>):
                                 </p>
                                 <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\demo\IMS
C:\&gt; pgau
PGAU&gt; CONNECT <span class="italic">userid</span>/<span class="italic">password</span>@<span class="italic">database_specification_string</span>
PGAU&gt; @pgtflip.ctl
</pre><p>For UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ pgau
PGAU&gt; CONNECT <span class="italic">userid</span>/<span class="italic">password</span>@<span class="italic">database_specification_string</span>
PGAU&gt; @pgtflip.ctl
</pre></dd>
                              <dt class="dlterm"><a name="GUID-442D9861-6F6B-4823-9646-DD4C5F11F22B__GUID-2D594712-2C68-47EC-9EE6-C515FE8EFF6D">
                                    <!-- --></a>Step 3&nbsp;&nbsp;&nbsp;Execute the specification files 
                              </dt>
                              <dd>
                                 <p>Running the specification files will create the PL/SQL stored procedures. Note that the header specification file (for example, <code class="codeph">pgtflip.pkh</code>) must be run first:
                                 </p>
                                 <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; sqlplus<span class="italic"> userid</span>/p<span class="italic">assword@database_specification_string</span>
SQL&gt; @pgtflip.pkh;
SQL&gt; @pgtflip.pkb;
</pre><p>For UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus<span class="italic"> userid</span>/p<span class="italic">assword@database_specification_string</span>
SQL&gt; @pgtflip.pkh;
SQL&gt; @pgtflip.pkb;
</pre></dd>
                              <dt class="dlterm"><a name="GUID-442D9861-6F6B-4823-9646-DD4C5F11F22B__GUID-2A2AA9FF-129D-41E0-B4FB-FE4A505C923F">
                                    <!-- --></a>Step 4&nbsp;&nbsp;&nbsp;Create a driver procedure to run the TIP
                              </dt>
                              <dd>
                                 <p>The TIP is now ready for use. For convenience, it will usually be called using a <a id="d2651e3355" class="indexterm-anchor"></a><a id="d2651e3359" class="indexterm-anchor"></a>driver procedure (for example, <code class="codeph">pgtflipd</code>). This driver will then call the individual stored procedures in the correct order. Create the driver procedure and run it: 
                                 </p>
                                 <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; sqlplus &lt;userid&gt;/&lt;password&gt;@&lt;database_specification string&gt; 
SQL&gt; @pgtflip.sql
SQL&gt; execute pgtflipd('hello');
</pre><p>For UNIX based system:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus &lt;userid&gt;/&lt;password&gt;@&lt;database_specification string&gt; 
SQL&gt; @pgtflip.sql
SQL&gt; execute pgtflipd('hello');
</pre></dd>
                           </dl>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
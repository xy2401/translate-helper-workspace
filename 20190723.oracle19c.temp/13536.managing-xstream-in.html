<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can manage an XStream In configuration.">
      <meta name="description" content="You can manage an XStream In configuration.">
      <title>Managing XStream In</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="XStream Guide ">
      <meta property="og:description" content="You can manage an XStream In configuration.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="XStream Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xstream-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:45:15-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2009, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96280-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="configuring-xstream-in.html" title="Previous" type="text/html">
      <link rel="next" href="monitoring-xstream-in.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XStream Guide">
    <meta name="dcterms.isVersionOf" content="XSTRM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-xstream-in.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="monitoring-xstream-in.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">XStream Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="xstream-in.html" property="item" typeof="WebPage"><span property="name">    XStream In </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Managing XStream In</li>
            </ol>
            <a id="GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" name="GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD"></a><a id="XSTRM72715"></a>
            
            <h2 id="XSTRM-GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" class="sect2"><span class="enumeration_chapter">10 </span>Managing XStream In
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can manage an XStream In configuration.</p>
               <p>This chapter does not cover using rules, rule sets, or rule-based transformations with inbound servers. By default, an inbound server does not use rules or rule sets. Therefore, an inbound server applies all of the logical change records (LCRs) sent to it by an XStream client application. However, to filter the LCRs sent to an inbound server, you can add rules and rule sets to an inbound server using the <code class="codeph">DBMS_XSTREAM_ADM</code> and <code class="codeph">DBMS_RULE_ADM</code> packages. You can also specify rule-based transformations using the <code class="codeph">DBMS_XSTREAM_ADM</code> package.
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A">About Managing XStream In</a><br>You can modify the database components that are part of an XStream In configuration, such as inbound servers.
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE">Starting an Inbound Server</a><br>A inbound server must be enabled for it to receive logical change records (LCRs) from an XStream client application and apply the LCRs. You run the <code class="codeph">START_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to start an existing inbound server.
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B">Stopping an Inbound Server</a><br>You run the <code class="codeph">STOP_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to stop an existing inbound server. You might stop an inbound server when you are troubleshooting a problem in an XStream configuration.
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5">Setting an Apply Parameter for an Inbound Server</a><br>Apply parameters control the way an inbound server operates. You set an apply parameter for an inbound server using the <code class="codeph">SET_PARAMETER</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4">Changing the Apply User for an Inbound Server</a><br>An inbound server applies LCRs in the security domain of its apply user, and the client application must attach to the inbound server as the apply user. You can change the apply user for an inbound server with the <code class="codeph">ALTER_INBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43">Managing XStream In Conflict Detection and Resolution</a><br>When more than one client modifies the same table row at approximately the same time, conflicts are possible. XStream In detects conflicts and provides methods for resolving conflicts.
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-52AE0882-647F-4C68-89DD-E1D658569BA7">Managing Apply Errors</a><br>Apply errors result when an inbound server tries to apply an LCR, and an error is raised.
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-1D97E873-3C82-4E2C-BBB0-C1049D7E5600">Conflict and Error Handling Precedence</a><br>To resolve a conflict or error, an inbound server tries to find conflict handlers and error handlers.
                  </li>
                  <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4">Dropping Components in an XStream In Configuration</a><br>You can drop an inbound server with the <code class="codeph">DROP_INBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="xstream-in.html#GUID-D7F5E262-D5D6-4286-95CD-E69FFB8DAAAE" title="You can configure and manage an XStream In environment.">XStream In</a></p>
                  </div>
               </div>
            </div>
            <a id="XSTRM72882"></a><div class="props_rev_3"><a id="GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A" name="GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A"></a><h3 id="XSTRM-GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A" class="sect3"><span class="enumeration_section">10.1 </span>About Managing XStream In
               </h3>
               <div>
                  <p>You can modify the database components that are part of an XStream In configuration, such as inbound servers.</p>
                  <p>The main interface for managing XStream In database components is PL/SQL. Specifically, use the following Oracle supplied PL/SQL packages to manage XStream In:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">DBMS_XSTREAM_ADM</code></p>
                        <p>The <code class="codeph">DBMS_XSTREAM_ADM</code> package is the main package for managing XStream In. This package includes subprograms that enable you to configure, modify, or drop inbound servers. This package also enables you modify the rules, rule sets, and rule-based transformations used by inbound servers.
                        </p>
                        <div class="infoboxnotealso" id="GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A__GUID-6B76FA67-D195-42DB-BC76-3F4B73C571C0">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS73643" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for detailed information about this package
                           </p>
                        </div>
                     </li>
                     <li>
                        <p><code class="codeph">DBMS_XSTREAM_AUTH</code></p>
                        <p>The <code class="codeph">DBMS_XSTREAM_AUTH</code> package enables you to configure and modify XStream administrators.
                        </p>
                        <div class="infoboxnotealso" id="GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A__GUID-0E09063C-8BA9-4B84-82ED-3EB39F7A8A56">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="configuring-xstream-in.html#GUID-445DEEE0-6449-490B-8264-87CDB0183E1F" title="An XStream administrator configures and manages XStream components in an XStream In environment.">Configure an XStream Administrator</a>"</span> for information about using this package to create an XStream administrator
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_XSTREAM_AUTH.html#ARPLS73647" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for detailed information about this package
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p><code class="codeph">DBMS_APPLY_ADM</code></p>
                        <p>The <code class="codeph">DBMS_APPLY_ADM</code> package enables you modify inbound servers.
                        </p>
                        <div class="infoboxnotealso" id="GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A__GUID-82032E86-D265-499F-8F8A-9AD0D33C3F16">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS300" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for detailed information about this package
                           </p>
                        </div>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="You can manage an XStream In configuration.">Managing XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM72884"></a><a id="XSTRM72883"></a><div class="props_rev_3"><a id="GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE" name="GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE"></a><h3 id="XSTRM-GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE" class="sect3"><span class="enumeration_section">10.2 </span>Starting an Inbound Server
               </h3>
               <div>
                  <p>A inbound server must be enabled for it to receive logical change records (LCRs) from an XStream client application and apply the LCRs. You run the <code class="codeph">START_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to start an existing inbound server.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE__GUID-07DC2A8F-D9C6-4F20-988D-6D40AE578CD1">To start an inbound server:</p>
                     <ol>
                        <li>
                           <p>Connect to the inbound server database as the XStream administrator.</p>
                           <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                           </p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph">START_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the inbound server for the <code class="codeph">apply_name</code> parameter.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The following example starts an inbound server named <code class="codeph">xin</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE__GUID-13ECC923-4A79-4B03-81CC-6BC832BD0EDE">
                     <p class="titleinexample">Example 10-1 Starting an Outbound Server Named xout</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_APPLY_ADM.START_APPLY(
    apply_name =&gt; 'xin');
END;
/</pre></div>
                  <!-- class="example" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE__GUID-2F225028-543A-4999-968C-8C75A65AE0B9">
                     <p class="notep1">See Also:</p>
                     <p>The Oracle Enterprise Manager Cloud Control online help for instructions about starting an apply process or an inbound server with Oracle Enterprise Manager Cloud Control</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="You can manage an XStream In configuration.">Managing XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM72886"></a><a id="XSTRM72885"></a><div class="props_rev_3"><a id="GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B" name="GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B"></a><h3 id="XSTRM-GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B" class="sect3"><span class="enumeration_section">10.3 </span>Stopping an Inbound Server
               </h3>
               <div>
                  <p>You run the <code class="codeph">STOP_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to stop an existing inbound server. You might stop an inbound server when you are troubleshooting a problem in an XStream configuration.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B__GUID-B2341C1F-A16E-4520-AF0D-6EF70FBE62FB">To stop an inbound server:</p>
                     <ol>
                        <li>
                           <p>Connect to the inbound server database as the XStream administrator.</p>
                           <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                           </p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph">STOP_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the inbound server for the <code class="codeph">apply_name</code> parameter.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The following example stops an inbound server named <code class="codeph">xin</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B__GUID-E4817B7B-8096-407E-BFE0-9F2042FA0A1A">
                     <p class="titleinexample">Example 10-2 Stopping an Inbound Server Named xout</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_APPLY_ADM.STOP_APPLY(
    apply_name =&gt; 'xin');
END;
/</pre></div>
                  <!-- class="example" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B__GUID-92BB6399-D0EB-4C09-A190-230E79782679">
                     <p class="notep1">See Also:</p>
                     <p>The Oracle Enterprise Manager Cloud Control online help for instructions about stopping an apply process or an inbound server with Oracle Enterprise Manager Cloud Control</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="You can manage an XStream In configuration.">Managing XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM72888"></a><a id="XSTRM72887"></a><div class="props_rev_3"><a id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5" name="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5"></a><h3 id="XSTRM-GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5" class="sect3"><span class="enumeration_section">10.4 </span>Setting an Apply Parameter for an Inbound Server
               </h3>
               <div>
                  <p>Apply parameters control the way an inbound server operates. You set an apply parameter for an inbound server using the <code class="codeph">SET_PARAMETER</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5__GUID-EA972B33-638A-4571-8F20-A4DA2EF53E6A">To set an inbound server apply parameter:</p>
                     <ol>
                        <li>
                           <p>Connect to the outbound server database as the XStream administrator.</p>
                           <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                           </p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph">SET_PARAMETER</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package, and specify the following parameters:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">streams_name</code> - Specify the name of the inbound server.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">streams_type</code> - Specify <code class="codeph">apply</code>.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">parameter</code> - Specify the name of the apply parameter.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">value</code> - Specify the value for the apply parameter.
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The following example sets the <code class="codeph">parallelism</code> parameter for an inbound server named <code class="codeph">xin</code> to <code class="codeph">4</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5__GUID-5EAA9BA2-148C-4125-B212-B5176885B28A">
                     <p class="titleinexample">Example 10-3 Setting an Outbound Server Parameter</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_XSTREAM_ADM.SET_PARAMETER(
    streams_name =&gt; 'xin',
    streams_type =&gt; 'apply',
    parameter    =&gt; 'parallelism',
    value        =&gt; '4');
END;
/</pre><div class="infoboxnote" id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5__GUID-0503D6FB-42FD-4EFB-B351-807DF018EC49">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">value</code> parameter is always entered as a <code class="codeph">VARCHAR2</code> value, even if the parameter value is a number.
                              </p>
                           </li>
                           <li>
                              <p>If the <code class="codeph">value</code> parameter is set to <code class="codeph">NULL</code> or is not specified, then the parameter is set to its default value.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5__GUID-6454E987-A745-4789-B494-0DF73B2D7CBA">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The Oracle Enterprise Manager Cloud Control online help for instructions about setting an apply parameter with Oracle Enterprise Manager Cloud Control</p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS314" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about apply parameters
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="You can manage an XStream In configuration.">Managing XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM72605"></a><a id="XSTRM1591"></a><div class="props_rev_3"><a id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4" name="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4"></a><h3 id="XSTRM-GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4" class="sect3"><span class="enumeration_section">10.5 </span>Changing the Apply User for an Inbound Server
               </h3>
               <div>
                  <p>An inbound server applies LCRs in the security domain of its apply user, and the client application must attach to the inbound server as the apply user. You can change the apply user for an inbound server with the <code class="codeph">ALTER_INBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.
                  </p>
                  <div class="section">
                     <p>You can change the apply user when a client application must connect to an inbound server as a different user or when you want to apply changes using the privileges associated with a different user. Ensure that the apply user is granted the required privileges.</p>
                     <div class="infoboxnotealso" id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4__GUID-9A524E14-A8C5-4F7C-9AC7-E3C45AB789D7">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS70196" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the privileges required by an apply user.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4__GUID-53E3B2FF-5B52-4B96-B013-9F15F450DFB3">To change the apply user for an inbound server:</p>
                     <ol>
                        <li>
                           <p>Connect to the inbound server database as the XStream administrator.</p>
                           <p>The XStream administrator must be granted the <code class="codeph">DBA</code> role to change the apply user for an inbound server.
                           </p>
                           <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                           </p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph">ALTER_INBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package, and specify the following parameters:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">server_name</code> - Specify the name of the inbound server.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">apply_user</code> - Specify the new apply user.
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4__GUID-12385B3F-A3DE-4C25-8004-B9F1EFA269EB">
                     <p class="titleinexample">Example 10-4 Changing the Apply User for an Inbound Server</p>
                     <p>To change the apply user to <code class="codeph">hr</code> for an inbound server named <code class="codeph">xin</code>, run the following procedure:
                     </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_XSTREAM_ADM.ALTER_INBOUND(
    server_name =&gt; 'xin',
    apply_user  =&gt; 'hr');
END;
/
</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4__GUID-E0E7C1A6-3A5E-4E9B-A74F-0C2FC09F9DD7">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="xstream-in-concepts.html#GUID-7020188C-8108-44E6-B6EF-9AFA035786C7" title="Understand security related to the client application and XStream components, as well as the privileges required by the apply user for an inbound server.">XStream In and Security</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS70192" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="You can manage an XStream In configuration.">Managing XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" name="GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43"></a><h3 id="XSTRM-GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" class="sect3"><span class="enumeration_section">10.6 </span>Managing XStream In Conflict Detection and Resolution
               </h3>
               <p>When more than one client modifies the same table row at approximately the same time, conflicts are possible. XStream In detects conflicts and provides methods for resolving conflicts.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-C3D6B8E2-22BC-4B31-B870-40DCEB4F0D26">About DML Conflicts in an XStream Environment</a><br>A <span class="bold">conflict</span> is a mismatch between the old values in an LCR and the data in a table.
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023">Conflict Types in an XStream Environment</a><br>You can encounter several different types of conflicts when you share data at multiple databases. 
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-9CE3D53B-0D1B-44DB-B5E3-B4CE52350464">Conflicts and Transaction Ordering in an XStream Environment</a><br>Ordering conflicts can occur in an XStream environment when three or more databases share data and the data is updated at two or more of these databases. 
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59">Conflict Detection in an XStream Environment</a><br>An inbound server detects conflicts automatically.
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-F0382D83-5BBD-4C45-B5E5-137E5A69EDB3">Conflict Avoidance in an XStream Environment</a><br>There are several ways to avoid data conflicts.
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901">Conflict Resolution in an XStream Environment</a><br>After an update conflict has been detected, a conflict handler can attempt to resolve it. 
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-069469B9-80D3-4872-894F-E08085D20443">Managing DML Conflict Handlers</a><br>You can set and remove a DML conflict handler. To modify an existing DML conflict handler, you must remove it and reset it. 
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B">Stopping Conflict Detection for Non-Key Columns</a><br>You can stop conflict detection for non-key columns by using the <code class="codeph">COMPARE_OLD_VALUES</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="You can manage an XStream In configuration.">Managing XStream In</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-C3D6B8E2-22BC-4B31-B870-40DCEB4F0D26" name="GUID-C3D6B8E2-22BC-4B31-B870-40DCEB4F0D26"></a><h4 id="XSTRM-GUID-C3D6B8E2-22BC-4B31-B870-40DCEB4F0D26" class="sect4"><span class="enumeration_section">10.6.1 </span>About DML Conflicts in an XStream Environment
                  </h4>
                  <div>
                     <p>A <span class="bold">conflict</span> is a mismatch between the old values in an LCR and the data in a table.
                     </p>
                     <p>Conflicts can occur in an XStream environment that permits concurrent data manipulation language (DML) operations on the same data at multiple databases. In an XStream environment, DML conflicts can occur only when an inbound server is applying a row LCR that contains a row change resulting from a DML operation. An inbound server automatically detects conflicts caused by row LCRs.</p>
                     <p>For example, when two transactions originating at different databases update the same row at nearly the same time, a conflict can occur. When you configure an XStream environment, you must consider whether conflicts can occur. You can configure conflict resolution to resolve conflicts automatically, if your system design permits conflicts.</p>
                     <p>In general, it is best practice to design an XStream environment that avoids the possibility of conflicts. Using the conflict avoidance techniques discussed later in this chapter, most system designs can avoid conflicts in all or a large percentage of the shared data. However, many applications require that some percentage of the shared data be updatable at multiple databases at any time. If this is the case, then you must address the possibility of conflicts.</p>
                     <div class="infoboxnote" id="GUID-C3D6B8E2-22BC-4B31-B870-40DCEB4F0D26__GUID-7231796A-5C16-400A-A9C4-5421669D2F65">
                        <p class="notep1">Note:</p>
                        <p>An inbound server does not detect DDL conflicts. Ensure that your environment avoids these types of conflicts.</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="general-xstream-concepts.html#GUID-38751D5D-FFB4-4108-B675-2DA6F7FB9330" title="A row LCR describes a change to the data in a single row or a change to a single LOB column, LONG column, LONG RAW column, or XMLType column in a row.">Row LCRs</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="When more than one client modifies the same table row at approximately the same time, conflicts are possible. XStream In detects conflicts and provides methods for resolving conflicts.">Managing XStream In Conflict Detection and Resolution</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023" name="GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023"></a><h4 id="XSTRM-GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023" class="sect4"><span class="enumeration_section">10.6.2 </span>Conflict Types in an XStream Environment
                  </h4>
                  <div>
                     <p>You can encounter several different types of conflicts when you share data at multiple databases. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-AC5E3B0E-B9E0-46AF-A60E-FA21BDB4DAD3">Update Conflicts in an XStream Environment</a><br>An <strong class="term">update conflict</strong> occurs when an inbound server applies a row LCR containing an update to a row that conflicts with another update to the same row. 
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-C187F7F9-9BF0-464A-9E5A-E5DDF8C7D01B">Uniqueness Conflicts in an XStream Environment</a><br>A <strong class="term">uniqueness conflict</strong> occurs when an inbound server applies a row LCR containing a change to a row that violates a uniqueness integrity constraint, such as a <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> or <code class="codeph">UNIQUE</code> constraint. 
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-CECE5DD0-6292-42C9-A6B6-BCDF55B96D51">Delete Conflicts in an XStream Environment</a><br>A <strong class="term">delete conflict </strong>occurs when two transactions originate at different databases, with one transaction deleting a row and another transaction updating or deleting the same row.
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-47F723EA-1A62-407B-805F-A931D2E9C4F8">Foreign Key Conflicts in an XStream Environment</a><br>A <strong class="term">foreign key conflict </strong>occurs when an inbound server applies a row LCR containing a change to a row that violates a foreign key constraint. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="When more than one client modifies the same table row at approximately the same time, conflicts are possible. XStream In detects conflicts and provides methods for resolving conflicts.">Managing XStream In Conflict Detection and Resolution</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-AC5E3B0E-B9E0-46AF-A60E-FA21BDB4DAD3" name="GUID-AC5E3B0E-B9E0-46AF-A60E-FA21BDB4DAD3"></a><h5 id="XSTRM-GUID-AC5E3B0E-B9E0-46AF-A60E-FA21BDB4DAD3" class="sect5"><span class="enumeration_section">10.6.2.1 </span>Update Conflicts in an XStream Environment
                     </h5>
                     <div>
                        <p>An <strong class="term">update conflict</strong> occurs when an inbound server applies a row LCR containing an update to a row that conflicts with another update to the same row. 
                        </p>
                        <p>Update conflicts can happen when two transactions originating from different databases update the same row at nearly the same time. </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023" title="You can encounter several different types of conflicts when you share data at multiple databases.">Conflict Types in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-C187F7F9-9BF0-464A-9E5A-E5DDF8C7D01B" name="GUID-C187F7F9-9BF0-464A-9E5A-E5DDF8C7D01B"></a><h5 id="XSTRM-GUID-C187F7F9-9BF0-464A-9E5A-E5DDF8C7D01B" class="sect5"><span class="enumeration_section">10.6.2.2 </span>Uniqueness Conflicts in an XStream Environment
                     </h5>
                     <div>
                        <p>A <strong class="term">uniqueness conflict</strong> occurs when an inbound server applies a row LCR containing a change to a row that violates a uniqueness integrity constraint, such as a <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> or <code class="codeph">UNIQUE</code> constraint. 
                        </p>
                        <p>For example, consider what happens when two transactions originate from two different databases, each inserting a row into a table with the same primary key value. In this case, the transactions cause a uniqueness conflict. </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023" title="You can encounter several different types of conflicts when you share data at multiple databases.">Conflict Types in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-CECE5DD0-6292-42C9-A6B6-BCDF55B96D51" name="GUID-CECE5DD0-6292-42C9-A6B6-BCDF55B96D51"></a><h5 id="XSTRM-GUID-CECE5DD0-6292-42C9-A6B6-BCDF55B96D51" class="sect5"><span class="enumeration_section">10.6.2.3 </span>Delete Conflicts in an XStream Environment
                     </h5>
                     <div>
                        <p>A <strong class="term">delete conflict </strong>occurs when two transactions originate at different databases, with one transaction deleting a row and another transaction updating or deleting the same row.
                        </p>
                        <p>In this case, the row referenced in the row LCR does not exist and therefore cannot be updated or deleted.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023" title="You can encounter several different types of conflicts when you share data at multiple databases.">Conflict Types in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-47F723EA-1A62-407B-805F-A931D2E9C4F8" name="GUID-47F723EA-1A62-407B-805F-A931D2E9C4F8"></a><h5 id="XSTRM-GUID-47F723EA-1A62-407B-805F-A931D2E9C4F8" class="sect5"><span class="enumeration_section">10.6.2.4 </span>Foreign Key Conflicts in an XStream Environment
                     </h5>
                     <div>
                        <p>A <strong class="term">foreign key conflict </strong>occurs when an inbound server applies a row LCR containing a change to a row that violates a foreign key constraint. 
                        </p>
                        <p>For example, in the <code class="codeph">hr</code> schema, the <code class="codeph">department_id</code> column in the <code class="codeph">employees</code> table is a foreign key of the <code class="codeph">department_id</code> column in the <code class="codeph">departments</code> table. Consider what can happen when the following changes originate at two different databases (<code class="codeph">A</code> and <code class="codeph">B</code>) and are propagated to a third database (<code class="codeph">C</code>):
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>At database <code class="codeph">A</code>, a row is inserted into the <code class="codeph">departments</code> table with a <code class="codeph">department_id</code> of <code class="codeph">271</code>. This change is propagated to database <code class="codeph">B</code> and applied there.
                              </p>
                           </li>
                           <li>
                              <p>At database <code class="codeph">B</code>, a row is inserted into the <code class="codeph">employees</code> table with an <code class="codeph">employee_id</code> of&nbsp;<code class="codeph">206</code> and a <code class="codeph">department_id</code> of <code class="codeph">271</code>.
                              </p>
                           </li>
                        </ul>
                        <p>If the change that originated at database <code class="codeph">B</code> is applied at database <code class="codeph">C</code> before the change that originated at database <code class="codeph">A</code>, then a foreign key conflict results because the row for the department with a <code class="codeph">department_id</code> of <code class="codeph">271</code> does not yet exist in the <code class="codeph">departments</code> table at database <code class="codeph">C</code>.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-461EB550-8B86-4A16-A1EE-6B07E84F7023" title="You can encounter several different types of conflicts when you share data at multiple databases.">Conflict Types in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-9CE3D53B-0D1B-44DB-B5E3-B4CE52350464" name="GUID-9CE3D53B-0D1B-44DB-B5E3-B4CE52350464"></a><h4 id="XSTRM-GUID-9CE3D53B-0D1B-44DB-B5E3-B4CE52350464" class="sect4"><span class="enumeration_section">10.6.3 </span>Conflicts and Transaction Ordering in an XStream Environment
                  </h4>
                  <div>
                     <p>Ordering conflicts can occur in an XStream environment when three or more databases share data and the data is updated at two or more of these databases. </p>
                     <p>For example, consider a scenario in which three databases share information in the <code class="codeph">hr.departments</code> table. The database names are <code class="codeph">mult1.example.com</code>, <code class="codeph">mult2.example.com</code>, and <code class="codeph">mult3.example.com</code>. Suppose a change is made to a row in the <code class="codeph">hr.departments</code> table at <code class="codeph">mult1.example.com</code> that will be propagated to both <code class="codeph">mult2.example.com</code> and <code class="codeph">mult3.example.com</code>. The following series of actions might occur:
                     </p>
                     <ol>
                        <li>
                           <p> The change is propagated to <code class="codeph">mult2.example.com</code>.
                           </p>
                        </li>
                        <li>
                           <p>An inbound server at <code class="codeph">mult2.example.com</code> applies the change from <code class="codeph">mult1.example.com</code>.
                           </p>
                        </li>
                        <li>
                           <p>A different change to the same row is made at <code class="codeph">mult2.example.com</code>.
                           </p>
                        </li>
                        <li>
                           <p>The change at <code class="codeph">mult2.example.com</code> is propagated to <code class="codeph">mult3.example.com</code>.
                           </p>
                        </li>
                        <li>
                           <p>An inbound server at <code class="codeph">mult3.example.com</code> attempts to apply the change from <code class="codeph">mult2.example.com</code> before another inbound server at <code class="codeph">mult3.example.com</code> applies the change from <code class="codeph">mult1.example.com</code>.
                           </p>
                        </li>
                     </ol>
                     <p>In this case, a conflict occurs because a column value for the row at <code class="codeph">mult3.example.com</code> does not match the corresponding old value in the row LCR propagated from <code class="codeph">mult2.example.com</code>.
                     </p>
                     <p>In addition to causing a data conflict, transactions that are applied out of order might experience referential integrity problems at a remote database if supporting data has not been successfully propagated to that database. Consider the scenario where a new customer calls an order department. A customer record is created and an order is placed. If the order data is applied at a remote database before the customer data, then a referential integrity error is raised because the customer that the order references does not exist at the remote database.</p>
                     <p>If an ordering conflict is encountered, then you can resolve the conflict by reexecuting the transaction in the error queue after the required data has been propagated to the remote database and applied.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="When more than one client modifies the same table row at approximately the same time, conflicts are possible. XStream In detects conflicts and provides methods for resolving conflicts.">Managing XStream In Conflict Detection and Resolution</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59" name="GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59"></a><h4 id="XSTRM-GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59" class="sect4"><span class="enumeration_section">10.6.4 </span>Conflict Detection in an XStream Environment
                  </h4>
                  <div>
                     <p>An inbound server detects conflicts automatically.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-9542B3EE-72C0-4FBA-8E4B-9C29E4353C40">About Conflict Detection in an XStream Environment</a><br>An inbound server detects update, uniqueness, delete, and foreign key conflicts. 
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-669590DE-BE6A-4CEC-8B62-F022B26F6635">Control Over Conflict Detection for Non-Key Columns</a><br>By default, an inbound server compares old values for all columns during conflict detection, but you can stop conflict detection for non-key columns using the <code class="codeph">COMPARE_OLD_VALUES</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package. 
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-2D5EBAED-F674-4ED6-BF45-BC192D3CFBF5">Rows Identification During Conflict Detection in an XStream Environment</a><br>To detect conflicts accurately, Oracle Database must be able to identify and match corresponding rows at different databases uniquely.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="When more than one client modifies the same table row at approximately the same time, conflicts are possible. XStream In detects conflicts and provides methods for resolving conflicts.">Managing XStream In Conflict Detection and Resolution</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-9542B3EE-72C0-4FBA-8E4B-9C29E4353C40" name="GUID-9542B3EE-72C0-4FBA-8E4B-9C29E4353C40"></a><h5 id="XSTRM-GUID-9542B3EE-72C0-4FBA-8E4B-9C29E4353C40" class="sect5"><span class="enumeration_section">10.6.4.1 </span>About Conflict Detection in an XStream Environment
                     </h5>
                     <div>
                        <p>An inbound server detects update, uniqueness, delete, and foreign key conflicts. </p>
                        <p>An inbound server detects these conflicts as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>An inbound server detects an update conflict if there is any difference between the old values for a row in a row LCR and the current values of the same row at the destination database.</p>
                           </li>
                           <li>
                              <p>An inbound server detects a uniqueness conflict if a uniqueness constraint violation occurs when applying an LCR that contains an insert or update operation.</p>
                           </li>
                           <li>
                              <p>An inbound server detects a delete conflict if it cannot find a row when applying an LCR that contains an update or delete operation, because the primary key of the row does not exist. </p>
                           </li>
                           <li>
                              <p>An inbound server detects a foreign key conflict if a foreign key constraint violation occurs when applying an LCR.</p>
                           </li>
                        </ul>
                        <p>A conflict can be detected when an inbound server attempts to apply an LCR directly or when an inbound server handler, such as a DML conflict handler, runs the <code class="codeph">EXECUTE</code> member procedure for an LCR. A conflict can also be detected when either the <code class="codeph">EXECUTE_ERROR</code> or <code class="codeph">EXECUTE_ALL_ERRORS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package is run.
                        </p>
                        <div class="infoboxnote" id="GUID-9542B3EE-72C0-4FBA-8E4B-9C29E4353C40__GUID-FE7E2D42-0808-4410-8273-00BD51A4AB04">
                           <p class="notep1">Note:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If a column is updated and the column's old value equals its new value, then Oracle Database never detects a conflict for this column update.</p>
                              </li>
                              <li>
                                 <p>Any old LOB values in update LCRs, delete LCRs, and LCRs dealing with piecewise updates to LOB columns are not used by conflict detection.</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59" title="An inbound server detects conflicts automatically.">Conflict Detection in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-669590DE-BE6A-4CEC-8B62-F022B26F6635" name="GUID-669590DE-BE6A-4CEC-8B62-F022B26F6635"></a><h5 id="XSTRM-GUID-669590DE-BE6A-4CEC-8B62-F022B26F6635" class="sect5"><span class="enumeration_section">10.6.4.2 </span>Control Over Conflict Detection for Non-Key Columns
                     </h5>
                     <div>
                        <p>By default, an inbound server compares old values for all columns during conflict detection, but you can stop conflict detection for non-key columns using the <code class="codeph">COMPARE_OLD_VALUES</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package. 
                        </p>
                        <p>Conflict detection might not be needed for some non-key columns.</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-669590DE-BE6A-4CEC-8B62-F022B26F6635__GUID-46285D77-E496-4237-86CD-E04B330B2545">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="managing-xstream-in.html#GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B" title="You can stop conflict detection for non-key columns by using the COMPARE_OLD_VALUES procedure in the DBMS_APPLY_ADM package.">Stopping Conflict Detection for Non-Key Columns</a>"</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59" title="An inbound server detects conflicts automatically.">Conflict Detection in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-2D5EBAED-F674-4ED6-BF45-BC192D3CFBF5" name="GUID-2D5EBAED-F674-4ED6-BF45-BC192D3CFBF5"></a><h5 id="XSTRM-GUID-2D5EBAED-F674-4ED6-BF45-BC192D3CFBF5" class="sect5"><span class="enumeration_section">10.6.4.3 </span>Rows Identification During Conflict Detection in an XStream Environment 
                     </h5>
                     <div>
                        <p>To detect conflicts accurately, Oracle Database must be able to identify and match corresponding rows at different databases uniquely.</p>
                        <p>By default, Oracle Database uses the primary key of a table to identify rows in a table uniquely. When a table does not have a primary key, it is best practice to designate a substitute key. A substitute key is a column or set of columns that Oracle Database can use to identify uniquely rows in the table.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-0DA6E2A2-BE47-495F-B93A-88AAD0307C59" title="An inbound server detects conflicts automatically.">Conflict Detection in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-F0382D83-5BBD-4C45-B5E5-137E5A69EDB3" name="GUID-F0382D83-5BBD-4C45-B5E5-137E5A69EDB3"></a><h4 id="XSTRM-GUID-F0382D83-5BBD-4C45-B5E5-137E5A69EDB3" class="sect4"><span class="enumeration_section">10.6.5 </span>Conflict Avoidance in an XStream Environment
                  </h4>
                  <p>There are several ways to avoid data conflicts.</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-989DABC4-0569-4D29-9CC3-EF34CF1D361F">Use a Primary Database Ownership Model</a><br>You can avoid the possibility of conflicts by limiting the number of databases that have simultaneous update access to the tables containing shared data.
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333">Avoid Specific Types of Conflicts</a><br>If a primary database ownership model is too restrictive for your application requirements, then you can use a shared ownership data model, which means that conflicts might be possible. Even so, typically you can use some simple strategies to avoid specific types of conflicts.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="When more than one client modifies the same table row at approximately the same time, conflicts are possible. XStream In detects conflicts and provides methods for resolving conflicts.">Managing XStream In Conflict Detection and Resolution</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-989DABC4-0569-4D29-9CC3-EF34CF1D361F" name="GUID-989DABC4-0569-4D29-9CC3-EF34CF1D361F"></a><h5 id="XSTRM-GUID-989DABC4-0569-4D29-9CC3-EF34CF1D361F" class="sect5"><span class="enumeration_section">10.6.5.1 </span>Use a Primary Database Ownership Model
                     </h5>
                     <div>
                        <p>You can avoid the possibility of conflicts by limiting the number of databases that have simultaneous update access to the tables containing shared data.</p>
                        <p>Primary ownership prevents all conflicts, because only a single database permits updates to a set of shared data. Applications can even use row and column subsetting to establish more granular ownership of data than at the table level. For example, applications might have update access to specific columns or rows in a shared table on a database-by-database basis.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-F0382D83-5BBD-4C45-B5E5-137E5A69EDB3" title="There are several ways to avoid data conflicts.">Conflict Avoidance in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333" name="GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333"></a><h5 id="XSTRM-GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333" class="sect5"><span class="enumeration_section">10.6.5.2 </span>Avoid Specific Types of Conflicts
                     </h5>
                     <div>
                        <p>If a primary database ownership model is too restrictive for your application requirements, then you can use a shared ownership data model, which means that conflicts might be possible. Even so, typically you can use some simple strategies to avoid specific types of conflicts.</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-7EC78318-C4DD-497C-8CF0-D08B2E341889">Avoid Uniqueness Conflicts in an XStream Environment</a><br>You can avoid uniqueness conflicts by ensuring that each database uses unique identifiers for shared data. 
                           </li>
                           <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-76FB3F8A-9056-4C89-B52A-43EAAA24F452">Avoid Delete Conflicts in an Oracle Replication Environment</a><br>Always avoid delete conflicts in shared data environments. 
                           </li>
                           <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-99F764BC-0524-495D-8F8E-1579307C9E6A">Avoid Update Conflicts in an XStream Environment</a><br>After trying to eliminate the possibility of uniqueness and delete conflicts, you should also try to limit the number of possible update conflicts. 
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-F0382D83-5BBD-4C45-B5E5-137E5A69EDB3" title="There are several ways to avoid data conflicts.">Conflict Avoidance in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="props_rev_3"><a id="GUID-7EC78318-C4DD-497C-8CF0-D08B2E341889" name="GUID-7EC78318-C4DD-497C-8CF0-D08B2E341889"></a><h6 id="XSTRM-GUID-7EC78318-C4DD-497C-8CF0-D08B2E341889" class="sect6"><span class="enumeration_section">10.6.5.2.1 </span>Avoid Uniqueness Conflicts in an XStream Environment
                        </h6>
                        <div>
                           <p>You can avoid uniqueness conflicts by ensuring that each database uses unique identifiers for shared data. </p>
                           <p>There are three ways to ensure unique identifiers at all databases in an XStream environment. </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>One way is to construct a unique identifier by executing the following select statement:</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_GUID() OID FROM DUAL;
</pre><p>This SQL operator returns a 16-byte globally unique identifier. The globally unique identifier appears in a format similar to the following:</p><pre class="oac_no_warn" dir="ltr">A741C791252B3EA0E034080020AE3E0A
</pre></li>
                              <li>
                                 <p></p>
                                 <p>Another way to avoid uniqueness conflicts is to create a sequence at each of the databases that shares data and concatenate the database name (or other globally unique value) with the local sequence. This approach helps to avoid any duplicate sequence values and helps to prevent uniqueness conflicts.</p>
                              </li>
                              <li>
                                 <p></p>
                                 <p>Finally, you can create a customized sequence at each of the databases that shares data so that no two databases can generate the same value. You can accomplish this by using a combination of starting, incrementing, and maximum values in the <code class="codeph">CREATE</code> <code class="codeph">SEQUENCE</code> statement. For example, you might configure the following sequences:
                                 </p>
                                 <div class="tblformal" id="GUID-7EC78318-C4DD-497C-8CF0-D08B2E341889__GUID-0356771A-73A1-41A9-BA10-EC7B8FBCE32E">
                                    <p class="titleintable">Table 10-1 Customized Sequences</p>
                                    <table cellpadding="4" cellspacing="0" class="Formal" title="Customized Sequences" summary="This table lists values to use for the STARTS WITH, INCREMENT BY, and range parameters in the CREATE SEQUENCE statement to generate unique sequences at different master sites." width="90%" frame="hsides" border="1" rules="rows">
                                       <thead>
                                          <tr align="left" valign="top">
                                             <th align="left" valign="bottom" width="21%" id="d49348e3408">Parameter</th>
                                             <th align="left" valign="bottom" width="26%" id="d49348e3411">Database A</th>
                                             <th align="left" valign="bottom" width="26%" id="d49348e3414">Database B</th>
                                             <th align="left" valign="bottom" width="26%" id="d49348e3417">Database C</th>
                                          </tr>
                                       </thead>
                                       <tbody>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="21%" id="d49348e3422" headers="d49348e3408 ">
                                                <p><code class="codeph">START</code> <code class="codeph">WITH</code></p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3422 d49348e3411 ">
                                                <p>1</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3422 d49348e3414 ">
                                                <p>3</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3422 d49348e3417 ">
                                                <p>5</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="21%" id="d49348e3439" headers="d49348e3408 ">
                                                <p><code class="codeph">INCREMENT</code> <code class="codeph">BY</code></p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3439 d49348e3411 ">
                                                <p>10</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3439 d49348e3414 ">
                                                <p>10</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3439 d49348e3417 ">
                                                <p>10</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="21%" id="d49348e3456" headers="d49348e3408 ">
                                                <p>Range Example</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3456 d49348e3411 ">
                                                <p>1, 11, 21, 31, 41,...</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3456 d49348e3414 ">
                                                <p>3, 13, 23, 33, 43,...</p>
                                             </td>
                                             <td align="left" valign="top" width="26%" headers="d49348e3456 d49348e3417 ">
                                                <p>5, 15, 25, 35, 45,...</p>
                                             </td>
                                          </tr>
                                       </tbody>
                                    </table>
                                 </div>
                                 <!-- class="inftblhruleinformal" -->
                                 <p>Using a similar approach, you can define different ranges for each database by specifying a <code class="codeph">START</code> <code class="codeph">WITH</code> and <code class="codeph">MAXVALUE</code> that would produce a unique range for each database.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333" title="If a primary database ownership model is too restrictive for your application requirements, then you can use a shared ownership data model, which means that conflicts might be possible. Even so, typically you can use some simple strategies to avoid specific types of conflicts.">Avoid Specific Types of Conflicts</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-76FB3F8A-9056-4C89-B52A-43EAAA24F452" name="GUID-76FB3F8A-9056-4C89-B52A-43EAAA24F452"></a><h6 id="XSTRM-GUID-76FB3F8A-9056-4C89-B52A-43EAAA24F452" class="sect6"><span class="enumeration_section">10.6.5.2.2 </span>Avoid Delete Conflicts in an Oracle Replication Environment
                        </h6>
                        <div>
                           <p>Always avoid delete conflicts in shared data environments. </p>
                           <p>In general, it is best practice for applications that operate within a shared ownership data model to avoid deleting rows using <code class="codeph">DELETE</code> statements. Instead, applications can mark rows for deletion and then configure the system to purge logically deleted rows periodically.
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333" title="If a primary database ownership model is too restrictive for your application requirements, then you can use a shared ownership data model, which means that conflicts might be possible. Even so, typically you can use some simple strategies to avoid specific types of conflicts.">Avoid Specific Types of Conflicts</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-99F764BC-0524-495D-8F8E-1579307C9E6A" name="GUID-99F764BC-0524-495D-8F8E-1579307C9E6A"></a><h6 id="XSTRM-GUID-99F764BC-0524-495D-8F8E-1579307C9E6A" class="sect6"><span class="enumeration_section">10.6.5.2.3 </span>Avoid Update Conflicts in an XStream Environment
                        </h6>
                        <div>
                           <p>After trying to eliminate the possibility of uniqueness and delete conflicts, you should also try to limit the number of possible update conflicts. </p>
                           <p>However, in a shared ownership data model, update conflicts cannot be avoided in all cases. If you cannot avoid all update conflicts, then you must understand the types of conflicts possible and configure the system to resolve them if they occur.</p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-2027D7DF-A0CC-42CD-8E24-B26D37861333" title="If a primary database ownership model is too restrictive for your application requirements, then you can use a shared ownership data model, which means that conflicts might be possible. Even so, typically you can use some simple strategies to avoid specific types of conflicts.">Avoid Specific Types of Conflicts</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" name="GUID-AFE186CC-05B8-4301-B0ED-D272822B4901"></a><h4 id="XSTRM-GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" class="sect4"><span class="enumeration_section">10.6.6 </span>Conflict Resolution in an XStream Environment
                  </h4>
                  <div>
                     <p>After an update conflict has been detected, a conflict handler can attempt to resolve it. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-69CA60F5-EC6D-4A49-A175-E358CA604B1E">About Conflict Resolution in an XStream Environment</a><br>XStream provides prebuilt conflict handlers to resolve insert and update conflicts. 
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-4459D0AD-8C58-4247-882D-95CC78B75EED">Prebuilt DML Conflict Handlers</a><br>There are several types of prebuilt DML conflict handlers available. Column lists and resolution columns are used in prebuilt DML conflict handlers.
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB">Types of Prebuilt DML Conflict Handlers</a><br>Oracle provides the following types of prebuilt DML conflict handlers for an Oracle Replication environment: <code class="codeph">RECORD</code>, <code class="codeph">IGNORE</code>, <code class="codeph">OVERWRITE</code>, <code class="codeph">MAXIMUM</code>, <code class="codeph">MINIMUM</code>, and <code class="codeph">DELTA</code>.
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2">Column Lists</a><br>Each time you specify a prebuilt DML conflict handler for a table, you must specify a column list.
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-1E464FF1-FFCB-42A7-B2F8-F65DEEE0F5B1">Resolution Columns</a><br>The <span class="bold">resolution column</span> is the column used to identify a prebuilt DML conflict handler. 
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-4D5FF192-C6AE-4C80-8C12-C1C6FE9C8439">Data Convergence</a><br>When you share data between multiple databases, and you want the data to be the same at all of these databases, ensure that you use conflict resolution handlers that cause the data to converge at all databases.
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-6DAF8231-7B39-4519-ABA6-9E70751D7EBD">Collision Handling Without a DML Conflict Handler</a><br>In the absence of a DML conflict handler for a table, you can enable basic collision handling using the <code class="codeph">HANDLE_COLLISIONS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package. 
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-083B4578-DFB0-4F3D-B4DD-CF1FF98A9F5B">Custom Conflict Handlers</a><br>You can create a PL/SQL procedure to use as a custom conflict handler. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="When more than one client modifies the same table row at approximately the same time, conflicts are possible. XStream In detects conflicts and provides methods for resolving conflicts.">Managing XStream In Conflict Detection and Resolution</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-69CA60F5-EC6D-4A49-A175-E358CA604B1E" name="GUID-69CA60F5-EC6D-4A49-A175-E358CA604B1E"></a><h5 id="XSTRM-GUID-69CA60F5-EC6D-4A49-A175-E358CA604B1E" class="sect5"><span class="enumeration_section">10.6.6.1 </span>About Conflict Resolution in an XStream Environment
                     </h5>
                     <div>
                        <p>XStream provides prebuilt conflict handlers to resolve insert and update conflicts. </p>
                        <p>There are no prebuilt conflict handlers for delete, foreign key, or ordering conflicts. However, you can build your own custom conflict handler to resolve data conflicts specific to your business rules. Such a conflict handler can be part of a procedure DML handler or an error handler.</p>
                        <p>Whether you use prebuilt or custom conflict handlers, a conflict handler is applied as soon as a conflict is detected. If neither the specified conflict handler nor the relevant apply handler can resolve the conflict, then the conflict is logged in the error queue. You might want to use the relevant apply handler to notify the database administrator when a conflict occurs.</p>
                        <p>When a conflict causes a transaction to be moved to the error queue, sometimes it is possible to correct the condition that caused the conflict. In these cases, you can reexecute a transaction using the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-69CA60F5-EC6D-4A49-A175-E358CA604B1E__GUID-43D0E383-3155-4D4E-A1B7-F5938407FC0D">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS326" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>for more information about the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="After an update conflict has been detected, a conflict handler can attempt to resolve it.">Conflict Resolution in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-4459D0AD-8C58-4247-882D-95CC78B75EED" name="GUID-4459D0AD-8C58-4247-882D-95CC78B75EED"></a><h5 id="XSTRM-GUID-4459D0AD-8C58-4247-882D-95CC78B75EED" class="sect5"><span class="enumeration_section">10.6.6.2 </span>Prebuilt DML Conflict Handlers
                     </h5>
                     <div>
                        <p>There are several types of prebuilt DML conflict handlers available. Column lists and resolution columns are used in prebuilt DML conflict handlers.</p>
                        <p>A column list is a list of columns for which the DML conflict handler is called when there is an insert or update conflict. The resolution column identifies a DML conflict handler. If you use a <code class="codeph">MAXIMUM</code> or <code class="codeph">MINIMUM</code> prebuilt DML conflict handler, then the resolution column is also the column used to resolve the conflict. The resolution column must be one of the columns in the column list for the handler.
                        </p>
                        <p>Use the <code class="codeph">SET_DML_CONFLICT_HANDLER</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to specify one or more DML conflict handlers for a particular table. There are no prebuilt DML conflict handlers for delete or foreign key conflicts.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-4459D0AD-8C58-4247-882D-95CC78B75EED__GUID-B1168CF8-0160-48E5-968B-72052FC1F11F">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="managing-xstream-in.html#GUID-069469B9-80D3-4872-894F-E08085D20443" title="You can set and remove a DML conflict handler. To modify an existing DML conflict handler, you must remove it and reset it.">Managing DML Conflict Handlers</a>"</span> for instructions on setting and removing an DML conflict handler
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_APPLY_ADM.html#ARPLS527" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about the <code class="codeph">SET_DML_CONFLICT_HANDLER</code> procedure
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-xstream-in.html#GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2" title="Each time you specify a prebuilt DML conflict handler for a table, you must specify a column list.">Column Lists</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-xstream-in.html#GUID-1E464FF1-FFCB-42A7-B2F8-F65DEEE0F5B1" title="The resolution column is the column used to identify a prebuilt DML conflict handler.">Resolution Columns</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="After an update conflict has been detected, a conflict handler can attempt to resolve it.">Conflict Resolution in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB" name="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB"></a><h5 id="XSTRM-GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB" class="sect5"><span class="enumeration_section">10.6.6.3 </span>Types of Prebuilt DML Conflict Handlers
                     </h5>
                     <div>
                        <p>Oracle provides the following types of prebuilt DML conflict handlers for an Oracle Replication environment: <code class="codeph">RECORD</code>, <code class="codeph">IGNORE</code>, <code class="codeph">OVERWRITE</code>, <code class="codeph">MAXIMUM</code>, <code class="codeph">MINIMUM</code>, and <code class="codeph">DELTA</code>.
                        </p>
                        <p>The description for each type of handler later in this topic refers to the following conflict scenario:</p>
                        <ol>
                           <li>
                              <p>The following update is made at the <code class="codeph">dbs1.example.com</code> source database:
                              </p><pre class="oac_no_warn" dir="ltr">UPDATE hr.employees SET salary = 4900 WHERE employee_id = 200;
COMMIT;
</pre><p>This update changes the salary for employee <code class="codeph">200</code> from <code class="codeph">4400</code> to <code class="codeph">4900</code>.
                              </p>
                           </li>
                           <li>
                              <p>At nearly the same time, the following update is made at the <code class="codeph">dbs2.example.com</code> destination database:
                              </p><pre class="oac_no_warn" dir="ltr">UPDATE hr.employees SET salary = 5000 WHERE employee_id = 200;
COMMIT;
</pre></li>
                           <li>
                              <p>A capture process captures the update at the <code class="codeph">dbs1.example.com</code> source database and puts the resulting row LCR in a queue.
                              </p>
                           </li>
                           <li>
                              <p>A propagation propagates the row LCR from the queue at <code class="codeph">dbs1.example.com</code> to a queue at <code class="codeph">dbs2.example.com</code>.
                              </p>
                           </li>
                           <li>
                              <p>An apply process at <code class="codeph">dbs2.example.com</code> attempts to apply the row LCR to the <code class="codeph">hr.employees</code> table but encounters a conflict because the salary value at <code class="codeph">dbs2.example.com</code> is <code class="codeph">5000</code>, which does not match the old value for the salary in the row LCR (<code class="codeph">4400</code>).
                              </p>
                           </li>
                        </ol>
                        <p>The following sections describe each prebuilt conflict handler and explain how the handler resolves this conflict.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-3A0BACC3-6FA8-4239-91AE-C1B8219004F1">RECORD</p>
                           <p>When a conflict occurs, the <code class="codeph">RECORD</code> handler places the LCR into the error queue. The <code class="codeph">RECORD</code> handler can be used for all conflict types, but it can only be specified for a column group that contains all the columns in the table.
                           </p>
                           <p>If the <code class="codeph">RECORD</code> handler is used for the <code class="codeph">hr.employees</code> table at the <code class="codeph">dbs2.example.com</code> destination database in the conflict example, then the row LCR from <code class="codeph">dbs1.example.com</code> is placed in the error queue at <code class="codeph">dbs1.example.com</code>, and its changes are not applied. Therefore, after the conflict is resolved, the salary for employee <code class="codeph">200</code> is&nbsp;<code class="codeph">5000</code> at <code class="codeph">dbs2.example.com</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-6E58B675-AE82-4676-93EC-6E9BD31E1516">IGNORE</p>
                           <p>When a conflict occurs, the <code class="codeph">IGNORE</code> handler ignores the values in the LCR from the source database and retains the value at the destination database.
                           </p>
                           <p>If the <code class="codeph">IGNORE</code> handler is used for the <code class="codeph">hr.employees</code> table at the <code class="codeph">dbs2.example.com</code> destination database in the conflict example, then the new value in the row LCR is discarded. Therefore, after the conflict is resolved, the salary for employee <code class="codeph">200</code> is&nbsp;<code class="codeph">5000</code> at <code class="codeph">dbs2.example.com</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-A375F091-04F9-44D3-8989-4740067C7AFC">OVERWRITE</p>
                           <p>When a conflict occurs, the <code class="codeph">OVERWRITE</code> handler replaces the current value at the destination database with the new value in the LCR from the source database.
                           </p>
                           <p>If the <code class="codeph">OVERWRITE</code> handler is used for the <code class="codeph">hr.employees</code> table at the <code class="codeph">dbs2.example.com</code> destination database in the conflict example, then the new value in the row LCR overwrites the value at <code class="codeph">dbs2.example.com</code>. Therefore, after the conflict is resolved, the salary for employee <code class="codeph">200</code> is&nbsp;<code class="codeph">4900</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-8C873186-954B-4737-B7C5-1EC73E95E989">MAXIMUM</p>
                           <p>When a conflict occurs, the <code class="codeph">MAXIMUM</code> conflict handler compares the new value in the LCR from the source database with the current value in the destination database for a designated resolution column. If the new value of the resolution column in the LCR is greater than the current value of the column at the destination database, then the apply process resolves the conflict in favor of the LCR. If the new value of the resolution column in the LCR is less than the current value of the column at the destination database, then the apply process resolves the conflict in favor of the destination database. 
                           </p>
                           <p>If the <code class="codeph">MAXIMUM</code> handler is used for the <code class="codeph">salary</code> column in the <code class="codeph">hr.employees</code> table at the <code class="codeph">dbs2.example.com</code> destination database in the conflict example, then the apply process does not apply the row LCR, because the salary in the row LCR is less than the current salary in the table. Therefore, after the conflict is resolved, the salary for employee <code class="codeph">200</code> is&nbsp;<code class="codeph">5000</code> at <code class="codeph">dbs2.example.com</code>.
                           </p>
                           <p>If you want to resolve conflicts based on the time of the transactions involved, then one way to do this is to add a column to a shared table that automatically records the transaction time with a trigger. You can designate this column as a resolution column for a <code class="codeph">MAXIMUM</code> conflict handler, and the transaction with the latest (or greater) time would be used automatically.
                           </p>
                           <p>The following is an example of a trigger that records the time of a transaction for the <code class="codeph">hr.employees</code> table. Assume that the <code class="codeph">job_id</code>, <code class="codeph">salary</code>, and <code class="codeph">commission_pct</code> columns are part of the column list for the conflict resolution handler. The trigger should fire only when an <code class="codeph">UPDATE</code> is performed on the columns in the column list or when an <code class="codeph">INSERT</code> is performed.
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.employees ADD (time TIMESTAMP WITH TIME ZONE);

CREATE OR REPLACE TRIGGER hr.insert_time_employees
BEFORE 
  INSERT OR UPDATE OF job_id, salary, commission_pct ON hr.employees
FOR EACH ROW
BEGIN
   -- Consider time synchronization problems. The previous update to this 
   -- row might have originated from a site with a clock time ahead of the 
   -- local clock time.
   IF :OLD.TIME IS NULL OR :OLD.TIME &lt; SYSTIMESTAMP THEN
     :NEW.TIME := SYSTIMESTAMP;
   ELSE
     :NEW.TIME := :OLD.TIME + 1 / 86400;
   END IF;
END;
/
</pre><p>If you use such a trigger for conflict resolution, then ensure that the trigger's firing property is “fire once,” which is the default. Otherwise, a new time might be marked when transactions are applied by an apply process, resulting in the loss of the actual time of the transaction.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-B8190E89-2C84-4FAC-92D1-B68C4E219FF5">MINIMUM</p>
                           <p>When a conflict occurs, the <code class="codeph">MINIMUM</code> conflict handler compares the new value in the LCR from the source database with the current value in the destination database for a designated resolution column. If the new value of the resolution column in the LCR is less than the current value of the column at the destination database, then the apply process resolves the conflict in favor of the LCR. If the new value of the resolution column in the LCR is greater than the current value of the column at the destination database, then the apply process resolves the conflict in favor of the destination database. 
                           </p>
                           <p>If the <code class="codeph">MINIMUM</code> handler is used for the <code class="codeph">salary</code> column in the <code class="codeph">hr.employees</code> table at the <code class="codeph">dbs2.example.com</code> destination database in the conflict example, then the apply process resolves the conflict in favor of the row LCR, because the salary in the row LCR is less than the current salary in the table. Therefore, after the conflict is resolved, the salary for employee <code class="codeph">200</code> is&nbsp;<code class="codeph">4900</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-D7365C3E-080B-4772-BC6A-1D5344411049">DELTA</p>
                           <p>When a conflict occurs, the <code class="codeph">DELTA</code> conflict handler calculates the difference between the old value for the column and the new value for the column and adds the difference to the current value of the column. The <code class="codeph">DELTA</code> conflict handler can only be used when the <code class="codeph">conflict_type</code> is set to <code class="codeph">ROW_EXISTS</code> and all of the columns in the column group are numbers.
                           </p>
                           <p>If the <code class="codeph">DELTA</code> handler is used for the <code class="codeph">salary</code> column in the <code class="codeph">hr.employees</code> table at the <code class="codeph">dbs2.example.com</code> destination database in the conflict example, then the apply process resolves the conflict by calculating the difference between the old value for the column and the new value for the column (4900 &#x2013; 4400 = 500) and adding it to the current value of the column (5000 + 500 = 5500). Therefore, after the conflict is resolved, the salary for employee <code class="codeph">200</code> is&nbsp;<code class="codeph">5500</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-2CC48ADA-8D99-4AFF-AB76-38D4644A1D31">MAX_AND_EQUALS</p>
                           <p>When a conflict occurs, apply the column list from in the LCR if the value of resolution column is greater than or equal to the value of the column in the database. Otherwise, discard the LCR.</p>
                           <p>If the <code class="codeph">MAX_AND_EQUALS</code> handler is used for the <code class="codeph">salary</code> column in the <code class="codeph">hr.employees</code> table at the <code class="codeph">dbs2.example.com</code> destination database in the conflict example, then the apply process resolves the conflict by discarding the LCR. Therefore, after the conflict is resolved, the salary for employee <code class="codeph">200</code> is&nbsp;<code class="codeph">5000</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7097DA5D-8425-4466-B6EA-98E3F9D339CB__GUID-7EB7ABD7-1DE7-42D2-A919-5EB16F074B79">MIN_AND_EQUALS</p>
                           <p>When a conflict occurs, apply the column list from the LCR if the value of resolution column is less than or equal to the value of the column in the database. Otherwise, discard the LCR.</p>
                           <p>If the <code class="codeph">MIN_AND_EQUALS</code> handler is used for the <code class="codeph">salary</code> column in the <code class="codeph">hr.employees</code> table at the <code class="codeph">dbs2.example.com</code> destination database in the conflict example, then the apply process resolves the conflict by applying the LCR. Therefore, after the conflict is resolved, the salary for employee <code class="codeph">200</code> is&nbsp;<code class="codeph">4900</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="After an update conflict has been detected, a conflict handler can attempt to resolve it.">Conflict Resolution in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2" name="GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2"></a><h5 id="XSTRM-GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2" class="sect5"><span class="enumeration_section">10.6.6.4 </span>Column Lists
                     </h5>
                     <div>
                        <p>Each time you specify a prebuilt DML conflict handler for a table, you must specify a column list.</p>
                        <p>A column list is a list of columns for which the DML conflict handler is called. If an update conflict occurs for one or more of the columns in the list when an inbound server tries to apply a row LCR, then the DML conflict handler is called to resolve the conflict. The DML conflict handler is not called if a conflict occurs only in columns that are not in the list. The scope of conflict resolution is a single column list on a single row LCR.</p>
                        <p>You can specify multiple DML conflict handlers for a particular table, but the same column cannot be in more than one column list. For example, suppose you specify two prebuilt DML conflict handlers on <code class="codeph">hr.employees</code> table:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The first DML conflict handler has the following columns in its column list: <code class="codeph">salary</code> and <code class="codeph">commission_pct</code>.
                              </p>
                           </li>
                           <li>
                              <p>The second DML conflict handler has the following columns in its column list: <code class="codeph">job_id</code> and <code class="codeph">department_id</code>. 
                              </p>
                           </li>
                        </ul>
                        <p>Also, assume that no other conflict handlers exist for this table. In this case, the following examples illustrate the outcomes for different scenarios:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If a conflict occurs for the <code class="codeph">salary</code> column when an inbound server tries to apply a row LCR, then the first DML conflict handler is called to resolve the conflict.
                              </p>
                           </li>
                           <li>
                              <p> If a conflict occurs for the <code class="codeph">department_id</code> column, then the second DML conflict handler is called to resolve the conflict.
                              </p>
                           </li>
                           <li>
                              <p>If a conflict occurs for a column that is not in a column list for any conflict handler, then no conflict handler is called, and an error results. For instance, if a conflict occurs for the <code class="codeph">manager_id</code> column in the <code class="codeph">hr.employees</code> table, then an error results.
                              </p>
                           </li>
                           <li>
                              <p>If conflicts occur in more than one column list when a row LCR is being applied, and there are no conflicts in any columns that are not in a column list, then the appropriate DML conflict handler is invoked for each column list with a conflict.</p>
                           </li>
                        </ul>
                        <p>Column lists enable you to use different handlers to resolve conflicts for different types of data. For example, numeric data is often suited for a maximum or minimum conflict handler, while an overwrite or discard conflict handler might be preferred for character data.</p>
                        <p>If a conflict occurs in a column that is not in a column list, then the error handler for the specific operation on the table attempts to resolve the conflict. If the error handler cannot resolve the conflict, or if there is no such error handler, then the transaction that caused the conflict is moved to the error queue.</p>
                        <p>Also, if a conflict occurs for a column in a column list that uses either the <code class="codeph">OVERWRITE</code>, <code class="codeph">MAXIMUM</code>, or <code class="codeph">MINIMUM</code> prebuilt handler, and if the row LCR does not contain all of the columns in this column list, then the conflict cannot be resolved because all of the values are not available. In this case, the transaction that caused the conflict is moved to the error queue. If the column list uses the <code class="codeph">DISCARD</code> prebuilt method, then the row LCR is discarded and no error results, even if the row LCR does not contain all of the columns in this column list.
                        </p>
                        <p>If more than one column at the source database affects the column list at the destination database, then a conditional supplemental log group must be specified for the columns specified in a column list. Supplemental logging is specified at the source database and adds additional information to the LCR, which is needed to resolve conflicts properly. Typically, a conditional supplemental log group must be specified for the columns in a column list if there are multiple columns in the column list, but not if there is only one column in the column list. </p>
                        <p>However, in some cases, a conditional supplemental log group is required even if there is only one column in a column list. That is, an apply handler or custom rule-based transformation can combine multiple columns from the source database into a single column in the column list at the destination database. For example, a custom rule-based transformation can take three columns that store street, state, and postal code data from a source database and combine the data into a single address column at a destination database.</p>
                        <p>Also, in some cases, no conditional supplemental log group is required even if there are multiple columns in a column list. For example, an apply handler or custom rule-based transformation can separate one address column from the source database into multiple columns that are in a column list at the destination database. A custom rule-based transformation can take an address that includes street, state, and postal code data in one address column at a source database and separate the data into three columns at a destination database.</p>
                        <div class="infoboxnote" id="GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2__GUID-53735B94-A119-4B1E-BB41-0919BFC7D785">
                           <p class="notep1">Note:</p>
                           <p>Prebuilt DML conflict handlers do not support LOB, <code class="codeph">LONG</code>, <code class="codeph">LONG</code> <code class="codeph">RAW</code>, user-defined type, and Oracle-supplied type columns. Therefore, you should not include these types of columns in the <code class="codeph">column_list</code> parameter when running the <code class="codeph">SET_DML_CONFLICT_HANDLER</code> procedure.
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-9EB5EF26-9F15-47F4-AD40-1D1A89ED58A2__GUID-25E5CF5B-26D5-481E-8803-0748DE49D5B9">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="configuring-xstream-in.html#GUID-E1D311AD-9B1C-49B5-B6AE-59A49C15B996" title="In an XStream configuration in which an inbound server applies changes captured by a capture process in an XStream Out configuration, supplemental logging might be required at the source database on columns in the tables for which an inbound server applies changes.">If Required, Specify Supplemental Logging at the Source Database</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/Data-Types.html#SQLRF0021" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about data types
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="After an update conflict has been detected, a conflict handler can attempt to resolve it.">Conflict Resolution in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-1E464FF1-FFCB-42A7-B2F8-F65DEEE0F5B1" name="GUID-1E464FF1-FFCB-42A7-B2F8-F65DEEE0F5B1"></a><h5 id="XSTRM-GUID-1E464FF1-FFCB-42A7-B2F8-F65DEEE0F5B1" class="sect5"><span class="enumeration_section">10.6.6.5 </span>Resolution Columns
                     </h5>
                     <div>
                        <p>The <span class="bold">resolution column</span> is the column used to identify a prebuilt DML conflict handler. 
                        </p>
                        <p>If you use a <code class="codeph">MAXIMUM</code> or <code class="codeph">MINIMUM</code> prebuilt DML conflict handler, then the resolution column is also the column used to resolve the conflict. The resolution column must be one of the columns in the column list for the handler.
                        </p>
                        <p>For example, if the <code class="codeph">salary</code> column in the <code class="codeph">hr.employees</code> table is specified as the resolution column for a maximum or minimum conflict handler, then the <code class="codeph">salary</code> column is evaluated to determine whether column list values in the row LCR are applied or the destination database values for the column list are retained.
                        </p>
                        <p>In either of the following situations involving a resolution column for a conflict, the apply process moves the transaction containing the row LCR that caused the conflict to the error queue, if the error handler cannot resolve the problem. In these cases, the conflict cannot be resolved and the values of the columns at the destination database remain unchanged:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The new LCR value and the destination row value for the resolution column are the same (for example, if the resolution column was not the column causing the conflict).</p>
                           </li>
                           <li>
                              <p>Either the new LCR value of the resolution column or the current value of the resolution column at the destination database is <code class="codeph">NULL</code>.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-1E464FF1-FFCB-42A7-B2F8-F65DEEE0F5B1__GUID-C79A34CE-284A-4F9A-8DA8-C9BB394444B4">
                           <p class="notep1">Note:</p>
                           <p>Although the resolution column is not used for <code class="codeph">OVERWRITE</code> and <code class="codeph">DISCARD</code> conflict handlers, you must specify a resolution column for these conflict handlers.
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="After an update conflict has been detected, a conflict handler can attempt to resolve it.">Conflict Resolution in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-4D5FF192-C6AE-4C80-8C12-C1C6FE9C8439" name="GUID-4D5FF192-C6AE-4C80-8C12-C1C6FE9C8439"></a><h5 id="XSTRM-GUID-4D5FF192-C6AE-4C80-8C12-C1C6FE9C8439" class="sect5"><span class="enumeration_section">10.6.6.6 </span>Data Convergence
                     </h5>
                     <div>
                        <p>When you share data between multiple databases, and you want the data to be the same at all of these databases, ensure that you use conflict resolution handlers that cause the data to converge at all databases.</p>
                        <p>If you allow changes to shared data at all of your databases, then data convergence for a table is possible only if all databases that are sharing data capture changes to the shared data and propagate these changes to all of the other databases that are sharing the data. </p>
                        <p>In such an environment, the <code class="codeph">MAXIMUM</code> conflict resolution method can guarantee convergence only if the values in the resolution column are always increasing. If successive time stamps on a row are distinct, then a time-based resolution column meets this requirement. The <code class="codeph">MINIMUM</code> conflict resolution method can guarantee convergence in such an environment only if the values in the resolution column are always decreasing.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="After an update conflict has been detected, a conflict handler can attempt to resolve it.">Conflict Resolution in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-6DAF8231-7B39-4519-ABA6-9E70751D7EBD" name="GUID-6DAF8231-7B39-4519-ABA6-9E70751D7EBD"></a><h5 id="XSTRM-GUID-6DAF8231-7B39-4519-ABA6-9E70751D7EBD" class="sect5"><span class="enumeration_section">10.6.6.7 </span>Collision Handling Without a DML Conflict Handler
                     </h5>
                     <div>
                        <p>In the absence of a DML conflict handler for a table, you can enable basic collision handling using the <code class="codeph">HANDLE_COLLISIONS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package. 
                        </p>
                        <p>When you enable basic collision handling for an inbound server and a table, conflicts are resolved in the following ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When a conflict is detected for a row that exists in the table, the data in the row LCR overwrites the data in the table.</p>
                              <p>For example, if a row LCR contains an insert, but the row already exists in the table. The data in the row LCR overwrites the existing data in the table. If a row LCR contains an update, and an old value in the row does not match an old value in the row LCR, the data in the row LCR overwrites the data in the table.</p>
                           </li>
                           <li>
                              <p>When a conflict is detected for a row that does not exist in the table, the data in the row LCR is ignored.</p>
                              <p>For example, if a row LCR contains an update to a row, but the row does not exist in the table, the row LCR is ignored.</p>
                           </li>
                        </ul>
                        <div class="example" id="GUID-6DAF8231-7B39-4519-ABA6-9E70751D7EBD__GUID-8B30799E-FCF4-4956-940B-43B0F3CD1E9A">
                           <p class="titleinexample">Example 10-5 Enabling Basic Collision Handling for a Table</p>This example enables basic collision handling for the <code class="codeph">app_emp</code> inbound server and the <code class="codeph">hr.employees</code> table.<pre class="pre codeblock"><code>BEGIN
  DBMS_APPLY_ADM.HANDLE_COLLISIONS(
    apply_name =&gt; 'app_emp',
    enable     =&gt; TRUE,
    object     =&gt; 'hr.employees');
END;
/</code></pre><p>To disable basic collision handling for this table, run the same procedure, but set the <code class="codeph">enable</code> parameter to <code class="codeph">FALSE</code>.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="After an update conflict has been detected, a conflict handler can attempt to resolve it.">Conflict Resolution in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-083B4578-DFB0-4F3D-B4DD-CF1FF98A9F5B" name="GUID-083B4578-DFB0-4F3D-B4DD-CF1FF98A9F5B"></a><h5 id="XSTRM-GUID-083B4578-DFB0-4F3D-B4DD-CF1FF98A9F5B" class="sect5"><span class="enumeration_section">10.6.6.8 </span>Custom Conflict Handlers
                     </h5>
                     <div>
                        <p>You can create a PL/SQL procedure to use as a custom conflict handler. </p>
                        <p>You use the <code class="codeph">SET_DML_HANDLER</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to designate one or more custom conflict handlers for a particular table. Specifically, set the following parameters when you run this procedure to specify a custom conflict handler:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Set the <code class="codeph">object_name</code> parameter to the fully qualified name of the table for which you want to perform conflict resolution.
                              </p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">object_type</code> parameter to <code class="codeph">TABLE</code>.
                              </p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">operation_name</code> parameter to the type of operation for which the custom conflict handler is called. The possible operations are the following: <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, and <code class="codeph">LOB_UPDATE</code>. You can also set the <code class="codeph">operation_name</code> parameter to <code class="codeph">DEFAULT</code> so that the handler is the default handler for all operations.
                              </p>
                           </li>
                           <li>
                              <p>If you want an error handler to perform conflict resolution when an error is raised, then set the <code class="codeph">error_handler</code> parameter to <code class="codeph">TRUE</code>. Or, if you want to include conflict resolution in your procedure DML handler, then set the <code class="codeph">error_handler</code> parameter to <code class="codeph">FALSE</code>. 
                              </p>
                              <p>If you specify <code class="codeph">FALSE</code> for this parameter, then, when you execute a row LCR using the <code class="codeph">EXECUTE</code> member procedure for the LCR, the conflict resolution within the procedure DML handler is performed for the specified object and operation(s). 
                              </p>
                           </li>
                           <li>
                              <p>Specify the procedure to resolve a conflict by setting the <code class="codeph">user_procedure</code> parameter. This user procedure is called to resolve any conflicts on the specified table resulting from the specified type of operation. 
                              </p>
                           </li>
                        </ul>
                        <p>If the custom conflict handler cannot resolve the conflict, then the inbound server moves the transaction containing the conflict to the error queue and does not apply the transaction.</p>
                        <p>If both a prebuilt DML conflict handler and a custom conflict handler exist for a particular object, then the prebuilt DML conflict handler is invoked only if both of the following conditions are met:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The custom conflict handler executes the row LCR using the <code class="codeph">EXECUTE</code> member procedure for the LCR.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">conflict_resolution</code> parameter in the <code class="codeph">EXECUTE</code> member procedure for the row LCR is set to <code class="codeph">TRUE</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-083B4578-DFB0-4F3D-B4DD-CF1FF98A9F5B__GUID-A8A5F48F-B19A-4B17-8544-683F6C4E6AA4">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_APPLY_ADM.html#ARPLS324" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>for more information about the <code class="codeph">SET_DML_HANDLER</code> procedure
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-AFE186CC-05B8-4301-B0ED-D272822B4901" title="After an update conflict has been detected, a conflict handler can attempt to resolve it.">Conflict Resolution in an XStream Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-069469B9-80D3-4872-894F-E08085D20443" name="GUID-069469B9-80D3-4872-894F-E08085D20443"></a><h4 id="XSTRM-GUID-069469B9-80D3-4872-894F-E08085D20443" class="sect4"><span class="enumeration_section">10.6.7 </span>Managing DML Conflict Handlers
                  </h4>
                  <div>
                     <p>You can set and remove a DML conflict handler. To modify an existing DML conflict handler, you must remove it and reset it. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F">Setting a DML Conflict Handler</a><br>Set a DML conflict handler using the <code class="codeph">SET_DML_CONFLICT_HANDLER</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-296630CB-CE27-4160-91BC-27351200FFB6">Removing a DML Conflict Handler</a><br>You can remove an existing DML conflict handler by running the <code class="codeph">SET_DML_CONFLICT_HANDLER</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="When more than one client modifies the same table row at approximately the same time, conflicts are possible. XStream In detects conflicts and provides methods for resolving conflicts.">Managing XStream In Conflict Detection and Resolution</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F" name="GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F"></a><h5 id="XSTRM-GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F" class="sect5"><span class="enumeration_section">10.6.7.1 </span>Setting a DML Conflict Handler
                     </h5>
                     <div>
                        <p>Set a DML conflict handler using the <code class="codeph">SET_DML_CONFLICT_HANDLER</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                        </p>
                        <div class="section">You can use one of the following prebuilt methods when you create a DML conflict resolution handler: 
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">RECORD</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">IGNORE</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OVERWRITE</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">MAXIMUM</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">MINIMUM</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">DELTA</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">MAX_AND_EQUALS</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">MIN_AND_EQUALS</code></p>
                              </li>
                           </ul>
                           <p>To set a DML conflict handler:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Connect to the inbound server database as the XStream administrator.</span></li>
                           <li><span>Run the <code class="codeph">SET_DML_CONFLICT_HANDLER</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.</span></li>
                        </ol>
                        <div class="example" id="GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F__GUID-167B4521-72D4-4873-AAC8-E3870DDBC043">
                           <p class="titleinexample">Example 10-6 Setting DML Conflict Handlers</p>
                           <p>Suppose an XStream In client receives changes to be applied to the <code class="codeph">hr.jobs</code> table at <code class="codeph">dbs1.example.com</code>. In this environment, conflicts can occur because the changes from the external database that the client receives may not be coordinated with the changes to the target database <code class="codeph">dbs1.example.com</code>. If there is a conflict for a particular DML insert or update, then the change from the external database must always overwrite the change at the target database. In this environment, you can accomplish this goal by specifying an <code class="codeph">OVERWRITE</code> handler at the <code class="codeph">dbs1.example.com</code> database. If there is a conflict because the row for a DML delete does not exist, then the row LCR is ignored.
                           </p>
                           <p>This example specifies DML conflict handlers for the <code class="codeph">hr.jobs</code> table at the <code class="codeph">dbs1.example.com</code> database.
                           </p><pre class="pre codeblock"><code>DECLARE
  cols DBMS_UTILITY.LNAME_ARRAY;
  BEGIN
    cols(1) := 'job_title';
    cols(2) := 'min_salary';
    cols(3) := 'max_salary';
    DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER(
      apply_name            =&gt; 'app_jobs',
      conflict_handler_name =&gt; 'jobs_handler_insert',
      object                =&gt; 'hr.jobs',
      operation_name        =&gt; 'INSERT',
      conflict_type         =&gt; 'ROW_EXISTS',
      method_name           =&gt; 'OVERWRITE',
      column_table          =&gt; cols);
    DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER(
      apply_name            =&gt; 'app_jobs',
      conflict_handler_name =&gt; 'jobs_handler_update',
      object                =&gt; 'hr.jobs',
      operation_name        =&gt; 'UPDATE',
      conflict_type         =&gt; 'ROW_EXISTS',
      method_name           =&gt; 'OVERWRITE',
      column_table          =&gt; cols);
    DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER(
      apply_name            =&gt; 'app_jobs',
      conflict_handler_name =&gt; 'jobs_handler_delete',
      object                =&gt; 'hr.jobs',
      operation_name        =&gt; 'DELETE',
      conflict_type         =&gt; 'ROW_MISSING',
      method_name           =&gt; 'IGNORE',
      column_list           =&gt; '*');
END;
/</code></pre><p>The apply process <code class="codeph">app_jobs</code> uses the specified DML conflict handlers.
                           </p>
                           <div class="infoboxnote" id="GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F__GUID-7602B33C-B67F-4AD2-971A-6602C48C110A">
                              <p class="notep1">Note:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>For the <code class="codeph">jobs_handler_delete</code> DML conflict handler, the <code class="codeph">column_list</code> parameter is set to <code class="codeph">'*'</code> because all columns must be specified when the <code class="codeph">operation_name</code> is set to <code class="codeph">DELETE</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If the client is obtaining data from an Oracle database using XStream Out, then you must specify a conditional supplemental log group at the source database for all of the columns in the <code class="codeph">column_list</code> at the destination database. In this example, you would specify a conditional supplemental log group including the <code class="codeph">job_title</code>, <code class="codeph">min_salary</code>, and <code class="codeph">max_salary</code> columns in the <code class="codeph">hr.jobs</code> table at the external database.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Prebuilt DML conflict handlers do not support LOB, <code class="codeph">LONG</code>, <code class="codeph">LONG RAW</code>, user-defined type, and Oracle-supplied type columns. Therefore, do not include these types of columns in the <code class="codeph">column_list</code> parameter when running the procedure <code class="codeph">SET_DML_CONFLICT_HANDLER</code>.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F__GUID-EC5AB1C6-09EE-47DA-BE90-24CA36D5AAD9">
                           <p class="notep1">See Also:</p><a href="../sqlrf/Data-Types.html#SQLRF0021" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about data types
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-069469B9-80D3-4872-894F-E08085D20443" title="You can set and remove a DML conflict handler. To modify an existing DML conflict handler, you must remove it and reset it.">Managing DML Conflict Handlers</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-296630CB-CE27-4160-91BC-27351200FFB6" name="GUID-296630CB-CE27-4160-91BC-27351200FFB6"></a><h5 id="XSTRM-GUID-296630CB-CE27-4160-91BC-27351200FFB6" class="sect5"><span class="enumeration_section">10.6.7.2 </span>Removing a DML Conflict Handler
                     </h5>
                     <div>
                        <p>You can remove an existing DML conflict handler by running the <code class="codeph">SET_DML_CONFLICT_HANDLER</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                        </p>
                        <div class="section">
                           <p>To remove an existing DML conflict handler, specify <code class="codeph">NULL</code> for the method, and specify the same apply name and DML conflict handler name as the existing DML conflict handler.
                           </p>
                           <p>To remove a DML conflict handler:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Connect to the inbound server database as the XStream administrator.</span></li>
                           <li><span>Run the <code class="codeph">SET_DML_CONFLICT_HANDLER</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package with <code class="codeph">NULL</code> specified for the method, and specify the same apply name, DML conflict handler name, object name, conflict type, and resolution column as the existing DML conflict handler. </span></li>
                        </ol>
                        <div class="example" id="GUID-296630CB-CE27-4160-91BC-27351200FFB6__GUID-167B4521-72D4-4873-AAC8-E3870DDBC043">
                           <p class="titleinexample">Example 10-7 Removing a DML Conflict Handler</p>
                           <p>To remove the DML conflict handler created in <span class="q">"<a href="managing-xstream-in.html#GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F" title="Set a DML conflict handler using the SET_DML_CONFLICT_HANDLER procedure in the DBMS_APPLY_ADM package.">Setting a DML Conflict Handler</a>"</span>, run the following procedure:
                           </p><pre class="pre codeblock"><code>BEGIN
  DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER(
     apply_name            =&gt; 'app_jobs',
     conflict_handler_name =&gt; 'jobs_handler_insert',
     method_name           =&gt; NULL);
  DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER(
     apply_name            =&gt; 'app_jobs',
     conflict_handler_name =&gt; 'jobs_handler_update',
     method_name           =&gt; NULL);
  DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER(
     apply_name            =&gt; 'app_jobs',
     conflict_handler_name =&gt; 'jobs_handler_delete',
     method_name           =&gt; NULL);
END;
/</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-069469B9-80D3-4872-894F-E08085D20443" title="You can set and remove a DML conflict handler. To modify an existing DML conflict handler, you must remove it and reset it.">Managing DML Conflict Handlers</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B" name="GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B"></a><h4 id="XSTRM-GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B" class="sect4"><span class="enumeration_section">10.6.8 </span>Stopping Conflict Detection for Non-Key Columns
                  </h4>
                  <div>
                     <p>You can stop conflict detection for non-key columns by using the <code class="codeph">COMPARE_OLD_VALUES</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                     </p>
                     <div class="section"> 
                        <p>To stop conflict detection for non-key columns:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Connect to the inbound server database as the XStream administrator.</span></li>
                        <li><span>Run the <code class="codeph">COMPARE_OLD_VALUES</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the non-key columns and <code class="codeph">FALSE</code> for the <code class="codeph">compare</code> parameter.</span></li>
                     </ol>
                     <div class="example" id="GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B__GUID-167B4521-72D4-4873-AAC8-E3870DDBC043">
                        <p class="titleinexample">Example 10-8 Stopping Conflict Detection for Non-Key Columns</p>
                        <p>Suppose you configure a <code class="codeph">time</code> column for conflict resolution for the <code class="codeph">hr.employees</code> table. A trigger records the current time in this column for each change to the table. In this case, you can decide to stop conflict detection for the other non-key columns in the table. Add the columns in the <code class="codeph">hr.employees</code> table to the column list for an update conflict handler:
                        </p><pre class="pre codeblock"><code>DECLARE
  cols  DBMS_UTILITY.NAME_ARRAY;
BEGIN
  cols(1)  := 'first_name';
  cols(2)  := 'last_name';
  cols(3)  := 'email';
  cols(4)  := 'phone_number';
  cols(5)  := 'hire_date';
  cols(6)  := 'job_id';
  cols(7)  := 'salary';
  cols(8)  := 'commission_pct';
  cols(9)  := 'manager_id';
  cols(10) := 'department_id';
  cols(11) := 'time';
  DBMS_APPLY_ADM.SET_DML_CONFLICT_HANDLER(
    apply_name            =&gt; 'app_employees',
    conflict_handler_name =&gt; 'emp_handler',
    object                =&gt; 'hr.employees',
    operation_name        =&gt; 'UPDATE',
    conflict_type         =&gt; 'ROW_EXISTS',
    method_name           =&gt; 'MAXIMUM',
    column_list           =&gt; cols,
    resolution_column     =&gt; 'time');
END;
/</code></pre><p>This example does not include the primary key for the table in the column list because it assumes that the primary key is never updated. However, other key columns are included in the column list.</p>
                        <p>To stop conflict detection for all non-key columns in the table for <code class="codeph">UPDATE</code> operations, enter the following:
                        </p><pre class="pre codeblock"><code>DECLARE
  cols DBMS_UTILITY.LNAME_ARRAY;
  BEGIN
    cols(1) := 'first_name';
    cols(2) := 'last_name';
    cols(3) := 'email';
    cols(4) := 'phone_number';
    cols(5) := 'hire_date';
    cols(6) := 'job_id';
    cols(7) := 'salary';
    cols(8) := 'commission_pct';  
  DBMS_APPLY_ADM.COMPARE_OLD_VALUES(
    object_name  =&gt; 'hr.employees',
    column_table =&gt; cols, 
    operation    =&gt; '*',
    compare      =&gt; FALSE);
END;
/</code></pre><p>The asterisk (*) specified for the operation parameter means that conflict detection is stopped for <code class="codeph">UPDATE</code> operations. After you run this procedure, all apply processes running on the database that apply changes to the specified table locally do not detect conflicts on the specified columns. Therefore, in this example, the <code class="codeph">time</code> column is the only column used for conflict detection.
                        </p>
                        <div class="infoboxnote" id="GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B__GUID-2266150D-505C-4980-AB7C-9EDE465F338D">
                           <p class="notep1">Note:</p>The example in this section sets an DML conflict handler before stopping conflict detection for non-key columns. However, a DML conflict handler is not required before you stop conflict detection for non-key columns.
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F27D6273-492C-43C9-B7D5-835FD9F6042B__GUID-EC5AB1C6-09EE-47DA-BE90-24CA36D5AAD9">
                        <p class="notep1">See Also:</p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS526" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about the <code class="codeph">COMPARE_OLD_VALUES</code> procedure
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-6C43A1A4-B265-4C1D-AF22-B1F6DFE99E43" title="When more than one client modifies the same table row at approximately the same time, conflicts are possible. XStream In detects conflicts and provides methods for resolving conflicts.">Managing XStream In Conflict Detection and Resolution</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="XSTRM72889"></a><div class="props_rev_3"><a id="GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" name="GUID-52AE0882-647F-4C68-89DD-E1D658569BA7"></a><h3 id="XSTRM-GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" class="sect3"><span class="enumeration_section">10.7 </span>Managing Apply Errors
               </h3>
               <div>
                  <p>Apply errors result when an inbound server tries to apply an LCR, and an error is raised.</p>
                  <p>When an apply error occurs, the LCR that caused the error and all of the other LCRs in the same transaction are moved to the error queue.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-1FA5CFA4-57C3-47C6-8F99-4AF3203F65BD">Inbound Server Error Handling</a><br>You can configure error handlers to handle specific types of errors.
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-FCD1CE21-0A24-4A32-B22A-784605237D86">Retrying Apply Error Transactions</a><br>You can retry a specific error transaction, or you can retry all error transactions for an inbound server.
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8">Deleting Apply Error Transactions</a><br>You can delete a specific error transaction, or you can delete all error transactions for an inbound server.
                     </li>
                     <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024">Managing Eager Errors Encountered by an Inbound Server</a><br>As a performance optimization, an inbound server can use eager apply to begin to apply large transactions before it receives the commit LCR.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-52AE0882-647F-4C68-89DD-E1D658569BA7__GUID-6C973AE8-454B-4BFB-99CB-4467D83E8218">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="xstream-in-concepts.html#GUID-5602248A-8DE3-495B-B1E9-F1F61CC798C3" title="The error queue contains all of the current apply errors for a database. If there are multiple inbound servers in a database, then the error queue contains the apply errors for each inbound server.">The Error Queue for an Inbound Server</a>"</span></p>
                        </li>
                        <li>
                           <p>The Oracle Enterprise Manager Cloud Control online help for instructions on managing apply errors in Oracle Enterprise Manager Cloud Control</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="You can manage an XStream In configuration.">Managing XStream In</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-1FA5CFA4-57C3-47C6-8F99-4AF3203F65BD" name="GUID-1FA5CFA4-57C3-47C6-8F99-4AF3203F65BD"></a><h4 id="XSTRM-GUID-1FA5CFA4-57C3-47C6-8F99-4AF3203F65BD" class="sect4"><span class="enumeration_section">10.7.1 </span>Inbound Server Error Handling
                  </h4>
                  <p>You can configure error handlers to handle specific types of errors.</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-B674A39F-31D3-43BF-9B01-303013EB7DB5">About Error Handlers</a><br>An error handler specifies a method for handling a specific error during apply. 
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-170B7510-A772-4900-9267-B1C7A799CD6F">Setting and Unsetting an Error Handler</a><br>You set an error handler with the <code class="codeph">SET_REPERROR_HANDLER</code> procedure in the <code class="codeph">DBMS_APPLY</code> package. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" title="Apply errors result when an inbound server tries to apply an LCR, and an error is raised.">Managing Apply Errors</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-B674A39F-31D3-43BF-9B01-303013EB7DB5" name="GUID-B674A39F-31D3-43BF-9B01-303013EB7DB5"></a><h5 id="XSTRM-GUID-B674A39F-31D3-43BF-9B01-303013EB7DB5" class="sect5"><span class="enumeration_section">10.7.1.1 </span>About Error Handlers
                     </h5>
                     <div>
                        <p>An error handler specifies a method for handling a specific error during apply. </p>
                        <p>When an inbound server applies row LCRs, it can encounter errors. You can configure an error handler to handle a specific error using a designated method with the <code class="codeph">SET_REPERROR_HANDLER</code> procedure in the <code class="codeph">DBMS_APPLY</code> package. For example, you can set an error handler that handles ORA-26787 errors that occur when a row LCR tries to update or delete a row that does not exist in a table. In addition, you can configure a default error handling method without specifying a particular error.
                        </p>
                        <p>You set an error handler for a specific apply process. You can set an error handler for a specific table or for all tables.</p>
                        <p>The following table describes each error handler method.</p>
                        <div class="tblformal" id="GUID-B674A39F-31D3-43BF-9B01-303013EB7DB5__GUID-EDA844A4-C2AC-48B6-BB1F-54F987232483">
                           <p class="titleintable">Table 10-2 Error Handler Methods</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Error Handler Methods" summary="This table describes each error handler method." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d49348e6716">Method</th>
                                    <th align="left" valign="bottom" id="d49348e6718">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d49348e6722" headers="d49348e6716 "><code class="codeph">ABEND</code></td>
                                    <td align="left" valign="top" headers="d49348e6722 d49348e6718 ">
                                       <p>Stop the inbound server when the error is encountered.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d49348e6729" headers="d49348e6716 "><code class="codeph">RECORD</code></td>
                                    <td align="left" valign="top" headers="d49348e6729 d49348e6718 ">
                                       <p>Move the row LCR that caused the error to the error queue when the error is encountered.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d49348e6736" headers="d49348e6716 "><code class="codeph">IGNORE</code></td>
                                    <td align="left" valign="top" headers="d49348e6736 d49348e6718 ">
                                       <p>Silently ignore the error, and do not apply the row LCR, when the error is encountered.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d49348e6743" headers="d49348e6716 "><code class="codeph">RETRY</code></td>
                                    <td align="left" valign="top" headers="d49348e6743 d49348e6718 ">
                                       <p>Retry the row LCR for the specified number of times when the error is encountered.</p>
                                       <p>If retry fails, then the entire transaction is moved to the error queue.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d49348e6752" headers="d49348e6716 "><code class="codeph">RETRY_TRANSACTION</code></td>
                                    <td align="left" valign="top" headers="d49348e6752 d49348e6718 ">
                                       <p>Retry the transaction for the specified number of times, with the specified delay before retry, when the error is encountered.</p>
                                       <p>If retry fails, then the entire transaction is moved to the error queue.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d49348e6761" headers="d49348e6716 "><code class="codeph">RECORD_TRANSACTION</code></td>
                                    <td align="left" valign="top" headers="d49348e6761 d49348e6718 ">
                                       <p>Move the entire transaction to the error queue when the error is encountered. <code class="codeph">RECORD_TRANSACTION</code> is the default.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-1FA5CFA4-57C3-47C6-8F99-4AF3203F65BD" title="You can configure error handlers to handle specific types of errors.">Inbound Server Error Handling</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-170B7510-A772-4900-9267-B1C7A799CD6F" name="GUID-170B7510-A772-4900-9267-B1C7A799CD6F"></a><h5 id="XSTRM-GUID-170B7510-A772-4900-9267-B1C7A799CD6F" class="sect5"><span class="enumeration_section">10.7.1.2 </span>Setting and Unsetting an Error Handler
                     </h5>
                     <div>
                        <p>You set an error handler with the <code class="codeph">SET_REPERROR_HANDLER</code> procedure in the <code class="codeph">DBMS_APPLY</code> package. 
                        </p>
                        <div class="section">You can use one of the following methods when you set an error handler:
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">ABEND</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">RECORD</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">IGNORE</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">RETRY</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">RETRY_TRANSACTION</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">RECORD_TRANSACTION</code></p>
                              </li>
                           </ul>
                           <p>To unset an error handler, set the <code class="codeph">method</code> parameter in the <code class="codeph">SET_REPERROR_HANDLER</code> procedure to <code class="codeph">NULL</code>.
                           </p>
                           <p>To set or unset an error handler:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Connect to the inbound server database as the XStream administrator.</span></li>
                           <li><span>Run the <code class="codeph">SET_REPERROR_HANDLER</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.</span></li>
                        </ol>
                        <div class="example" id="GUID-170B7510-A772-4900-9267-B1C7A799CD6F__GUID-A588A6F0-30C8-4849-955F-6228640A0B11">
                           <p class="titleinexample">Example 10-9 Setting an Error Handler That Stops the Inbound Server for All Errors on a Specific Table</p>
                           <p>This example sets an error handler that stops the <code class="codeph">app_oe</code> inbound server for any errors on the <code class="codeph">oe.orders</code> table. The <code class="codeph">0</code> setting for the <code class="codeph">error_number</code> parameter specifies all errors. The <code class="codeph">ABEND</code> setting for the <code class="codeph">method</code> parameter specifies that the inbound server is stopped when an error is encountered.
                           </p><pre class="pre codeblock"><code>BEGIN
  DBMS_APPLY_ADM.SET_REPERROR_HANDLER(
    apply_name   =&gt; 'app_oe',
    object       =&gt; 'oe.orders',
    error_number =&gt; 0,
    method       =&gt; 'ABEND');
END;
/</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-170B7510-A772-4900-9267-B1C7A799CD6F__GUID-AE96B517-3B0A-42FE-8C89-2159A1CE8859">
                           <p class="titleinexample">Example 10-10 Setting an Error Handler That Ignores Row LCRs for a Specific Table and a Specific Error</p>
                           <p>This example sets an error handler that ignores row LCRs that raise the ORA-1403 error for the <code class="codeph">app_oe</code> inbound server. The error handler applies to the <code class="codeph">oe.orders</code> table.
                           </p><pre class="pre codeblock"><code>BEGIN
  DBMS_APPLY_ADM.SET_REPERROR_HANDLER(
    apply_name   =&gt; 'app_oe',
    object       =&gt; 'oe.orders',
    error_number =&gt; 1403,
    method       =&gt; 'IGNORE');
END;
/</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-170B7510-A772-4900-9267-B1C7A799CD6F__GUID-53C22E78-57A3-4CE6-BE38-FA88FEB58CB8">
                           <p class="titleinexample">Example 10-11 Unsetting an Error Handler</p>
                           <p>This example unsets an error handler that ignores row LCRs that raise the ORA-1403 error for the <code class="codeph">app_oe</code> inbound server. The error handler was set for the <code class="codeph">oe.orders</code> table.
                           </p><pre class="pre codeblock"><code>BEGIN
  DBMS_APPLY_ADM.SET_REPERROR_HANDLER(
    apply_name   =&gt; 'app_oe',
    object       =&gt; 'oe.orders',
    error_number =&gt; 1403,
    method       =&gt; NULL);
END;
/</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-1FA5CFA4-57C3-47C6-8F99-4AF3203F65BD" title="You can configure error handlers to handle specific types of errors.">Inbound Server Error Handling</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="XSTRM72890"></a><div class="props_rev_3"><a id="GUID-FCD1CE21-0A24-4A32-B22A-784605237D86" name="GUID-FCD1CE21-0A24-4A32-B22A-784605237D86"></a><h4 id="XSTRM-GUID-FCD1CE21-0A24-4A32-B22A-784605237D86" class="sect4"><span class="enumeration_section">10.7.2 </span>Retrying Apply Error Transactions
                  </h4>
                  <div>
                     <p>You can retry a specific error transaction, or you can retry all error transactions for an inbound server.</p>
                     <p>Before you retry error transactions, you might need to make DML or DDL changes to database objects to correct the conditions that caused one or more apply errors.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-046F8CA3-28DD-4C32-B156-0381B436D214">Retrying a Specific Apply Error Transaction</a><br>When you retry an error transaction, you can execute it immediately or send the error transaction to a user procedure for modifications before executing it.
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4">Retrying All Error Transactions for an Inbound Server</a><br>After you correct the conditions that caused all of the apply errors for an inbound server, you can retry all of the error transactions by running the <code class="codeph">EXECUTE_ALL_ERRORS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" title="Apply errors result when an inbound server tries to apply an LCR, and an error is raised.">Managing Apply Errors</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72891"></a><div class="props_rev_3"><a id="GUID-046F8CA3-28DD-4C32-B156-0381B436D214" name="GUID-046F8CA3-28DD-4C32-B156-0381B436D214"></a><h5 id="XSTRM-GUID-046F8CA3-28DD-4C32-B156-0381B436D214" class="sect5"><span class="enumeration_section">10.7.2.1 </span>Retrying a Specific Apply Error Transaction
                     </h5>
                     <div>
                        <p>When you retry an error transaction, you can execute it immediately or send the error transaction to a user procedure for modifications before executing it.</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-20F05939-9C6A-46C1-8011-08AB8F30E025">Retrying a Specific Apply Error Transaction Without a User Procedure</a><br>After you correct the conditions that caused an apply error, you can retry the transaction by running the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package without specifying a user procedure. In this case, the transaction executes without any custom processing.
                           </li>
                           <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9">Retrying a Specific Apply Error Transaction With a User Procedure</a><br>You can retry an error transaction by running the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package and specify a user procedure to modify one or more LCRs in the transaction before the transaction is executed.
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-046F8CA3-28DD-4C32-B156-0381B436D214__GUID-E4622AF3-8A6A-4D94-A51F-DA509616D40F">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS326" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about the <code class="codeph">EXECUTE_ERROR</code> procedure
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-FCD1CE21-0A24-4A32-B22A-784605237D86" title="You can retry a specific error transaction, or you can retry all error transactions for an inbound server.">Retrying Apply Error Transactions</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="XSTRM72892"></a><div class="props_rev_3"><a id="GUID-20F05939-9C6A-46C1-8011-08AB8F30E025" name="GUID-20F05939-9C6A-46C1-8011-08AB8F30E025"></a><h6 id="XSTRM-GUID-20F05939-9C6A-46C1-8011-08AB8F30E025" class="sect6"><span class="enumeration_section">10.7.2.1.1 </span>Retrying a Specific Apply Error Transaction Without a User Procedure
                        </h6>
                        <div>
                           <p>After you correct the conditions that caused an apply error, you can retry the transaction by running the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package without specifying a user procedure. In this case, the transaction executes without any custom processing.
                           </p>
                           <div class="section">
                              <p>When there are multiple error transactions, transaction ordering might be important when you execute them. In general, it is best practice to execute the oldest transaction first, and then each later transaction in order until you reach the newest transaction. The <code class="codeph">SOURCE_COMMIT_POSITION</code> column in the <code class="codeph">DBA_APPLY_ERROR</code> view shows the transaction time.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-20F05939-9C6A-46C1-8011-08AB8F30E025__GUID-EFB30C1A-6C5F-483C-989E-ED83FA957AB5">To retry a specific apply error transaction without a user procedure:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, connect to the database as the XStream administrator.</p>
                                    <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Run the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the transaction identifier.
                                    </p>
                                    <p>To retry a transaction with the transaction identifier <code class="codeph">5.4.312</code>, run the following procedure:
                                    </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_APPLY_ADM.EXECUTE_ERROR(
    local_transaction_id =&gt; '5.4.312',
    execute_as_user      =&gt; FALSE,
    user_procedure       =&gt; NULL);
END;
/
</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p>If <code class="codeph">execute_as_user</code> is <code class="codeph">TRUE</code>, then the inbound server executes the transaction in the security context of the current user. If <code class="codeph">execute_as_user</code> is <code class="codeph">FALSE</code>, then the inbound server executes the transaction in the security context of the original receiver of the transaction. The original receiver is the user who was processing the transaction when the error was raised.
                              </p>
                              <p>In either case, the user who executes the transaction must have privileges to perform DML and DDL changes on the apply objects and to run any apply handlers.</p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-046F8CA3-28DD-4C32-B156-0381B436D214" title="When you retry an error transaction, you can execute it immediately or send the error transaction to a user procedure for modifications before executing it.">Retrying a Specific Apply Error Transaction</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM72893"></a><div class="props_rev_3"><a id="GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9" name="GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9"></a><h6 id="XSTRM-GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9" class="sect6"><span class="enumeration_section">10.7.2.1.2 </span>Retrying a Specific Apply Error Transaction With a User Procedure
                        </h6>
                        <div>
                           <p>You can retry an error transaction by running the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package and specify a user procedure to modify one or more LCRs in the transaction before the transaction is executed.
                           </p>
                           <div class="section">
                              <p>The modifications should enable successful execution of the transaction.</p>
                              <p>For example, consider a case in which a conflict caused an apply error. Examination of the error transaction reveals that the old value for the <code class="codeph">salary</code> column in a row LCR contained the wrong value. Specifically, the current value of the salary of the employee with <code class="codeph">employee_id</code> of <code class="codeph">197</code> in the <code class="codeph">hr.employees</code> table did not match the old value of the salary for this employee in the row LCR. Assume that the current value for this employee is <code class="codeph">3250</code> in the <code class="codeph">hr.employees</code> table. The example in this section creates a procedure to resolve the error.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9__GUID-CC710F7E-0260-4E77-AD21-4C745CC6ABD3">To retry a specific apply error transaction with a user procedure:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, connect to the database as the XStream administrator.</p>
                                    <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Given this scenario described previously, create the following user procedure to modify the salary in the row LCR that caused the error:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE xstrmadmin.modify_emp_salary(
  in_any                        IN      ANYDATA,
  error_record                  IN      ALL_APPLY_ERROR%ROWTYPE,
  error_message_number          IN      NUMBER,
  messaging_default_processing  IN OUT  BOOLEAN,
  out_any                       OUT     ANYDATA)
AS
  row_lcr          SYS.LCR$_ROW_RECORD;
  row_lcr_changed  BOOLEAN := FALSE;
  res              NUMBER;
  ob_owner         VARCHAR2(32);
  ob_name          VARCHAR2(32);
  cmd_type         VARCHAR2(30);
  employee_id      NUMBER;
BEGIN
  IF in_any.getTypeName() = 'SYS.LCR$_ROW_RECORD' THEN
    -- Access the LCR
    res := in_any.GETOBJECT(row_lcr);
    -- Determine the owner of the database object for the LCR
    ob_owner := row_lcr.GET_OBJECT_OWNER;
    -- Determine the name of the database object for the LCR
    ob_name := row_lcr.GET_OBJECT_NAME;
    -- Determine the type of DML change
    cmd_type := row_lcr.GET_COMMAND_TYPE;
    IF (ob_owner = 'HR' AND ob_name = 'EMPLOYEES' AND cmd_type = 'UPDATE') THEN
      -- Determine the employee_id of the row change
      IF row_lcr.GET_VALUE('old', 'employee_id') IS NOT NULL THEN
        employee_id := row_lcr.GET_VALUE('old', 'employee_id').ACCESSNUMBER();
        IF (employee_id = 197) THEN
          -- error_record.message_number should equal error_message_number
          row_lcr.SET_VALUE(
          value_type =&gt; 'OLD',
          column_name =&gt; 'salary',
          column_value =&gt; ANYDATA.ConvertNumber(3250));
          row_lcr_changed := TRUE;
        END IF;
      END IF;
    END IF;
  END IF;
  -- Specify that the inbound server continues to process the current message
  messaging_default_processing := TRUE;
  -- assign out_any appropriately
  IF row_lcr_changed THEN
    out_any := ANYDATA.ConvertObject(row_lcr);
  ELSE
    out_any := in_any;
  END IF;
END;
/
</pre></li>
                                 <li>
                                    <p>Run the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the transaction identifier and the user procedure.
                                    </p>
                                    <p>To retry a transaction with the transaction identifier <code class="codeph">5.6.924</code> and process the transaction with the <code class="codeph">modify_emp_salary</code> procedure in the <code class="codeph">xstrmadmin</code> schema before execution, run the following procedure:
                                    </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_APPLY_ADM.EXECUTE_ERROR(
    local_transaction_id =&gt; '5.6.924',
    execute_as_user      =&gt; FALSE,
    user_procedure       =&gt; 'xstrmadmin.modify_emp_salary');
END;
/
</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <div class="infoboxnote" id="GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9__GUID-796F94FC-15FF-4F5F-98B4-BE9AF86535D1">
                                 <p class="notep1">Note:</p>
                                 <p>The user who runs the procedure must have <code class="codeph">SELECT</code> privilege on the <code class="codeph">ALL_APPLY_ERROR</code> data dictionary view.
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-046F8CA3-28DD-4C32-B156-0381B436D214" title="When you retry an error transaction, you can execute it immediately or send the error transaction to a user procedure for modifications before executing it.">Retrying a Specific Apply Error Transaction</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="XSTRM72894"></a><div class="props_rev_3"><a id="GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4" name="GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4"></a><h5 id="XSTRM-GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4" class="sect5"><span class="enumeration_section">10.7.2.2 </span>Retrying All Error Transactions for an Inbound Server
                     </h5>
                     <div>
                        <p>After you correct the conditions that caused all of the apply errors for an inbound server, you can retry all of the error transactions by running the <code class="codeph">EXECUTE_ALL_ERRORS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4__GUID-51CA4817-0302-42E6-86CD-D52DB41A6C15">To retry all error transactions for an inbound server:</p>
                           <p>When there are multiple error transactions, the <code class="codeph">EXECUTE_ALL_ERRORS</code> procedure executes the oldest transaction first, and then executes each later transaction in order up to the newest transaction.
                           </p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, connect to the database as the XStream administrator.</p>
                                 <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                                 </p>
                              </li>
                              <li>
                                 <p>Run the <code class="codeph">EXECUTE_ALL_ERRORS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the name of the inbound server.
                                 </p>
                                 <p>To retry all of the error transactions for an inbound server named <code class="codeph">xin</code>, run the following procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_APPLY_ADM.EXECUTE_ALL_ERRORS(
    apply_name       =&gt; 'xin',
    execute_as_user  =&gt; FALSE);
END;
/
</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnote" id="GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4__GUID-3E18443F-0F5E-45C1-90BC-0B955677F0AD">
                              <p class="notep1">Note:</p>
                              <p>If you specify <code class="codeph">NULL</code> for the <code class="codeph">apply_name</code> parameter, and you have multiple inbound servers, then all of the apply errors are retried for all of the inbound servers.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-FCD1CE21-0A24-4A32-B22A-784605237D86" title="You can retry a specific error transaction, or you can retry all error transactions for an inbound server.">Retrying Apply Error Transactions</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="XSTRM72895"></a><div class="props_rev_3"><a id="GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" name="GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8"></a><h4 id="XSTRM-GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" class="sect4"><span class="enumeration_section">10.7.3 </span>Deleting Apply Error Transactions
                  </h4>
                  <p>You can delete a specific error transaction, or you can delete all error transactions for an inbound server.</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-3174E901-8DE8-4965-85FA-D3FA83B0012D">Deleting a Specific Apply Error Transaction</a><br>If an error transaction should not be applied, then you can delete the transaction from the error queue using the <code class="codeph">DELETE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                        </li>
                        <li class="ulchildlink"><a href="managing-xstream-in.html#GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030">Deleting All Error Transactions for an Inbound Server</a><br>If none of the error transactions should be applied, then you can delete all of the error transactions by running the <code class="codeph">DELETE_ALL_ERRORS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" title="Apply errors result when an inbound server tries to apply an LCR, and an error is raised.">Managing Apply Errors</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72896"></a><div class="props_rev_3"><a id="GUID-3174E901-8DE8-4965-85FA-D3FA83B0012D" name="GUID-3174E901-8DE8-4965-85FA-D3FA83B0012D"></a><h5 id="XSTRM-GUID-3174E901-8DE8-4965-85FA-D3FA83B0012D" class="sect5"><span class="enumeration_section">10.7.3.1 </span>Deleting a Specific Apply Error Transaction
                     </h5>
                     <div>
                        <p>If an error transaction should not be applied, then you can delete the transaction from the error queue using the <code class="codeph">DELETE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-3174E901-8DE8-4965-85FA-D3FA83B0012D__GUID-CE0FCED3-0683-488C-9587-0F0E473FADAA">To delete a specific apply error transaction:</p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, connect to the database as the XStream administrator.</p>
                                 <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                                 </p>
                              </li>
                              <li>
                                 <p>Identify the transaction ID of the error transaction you want to delete.</p>
                                 <p>For example, run the following query to list the local apply error transactions:</p><pre class="pre codeblock"><code>COLUMN APPLY_NAME FORMAT A11
COLUMN SOURCE_DATABASE' FORMAT A10
COLUMN LOCAL_TRANSACTION_ID FORMAT A11
COLUMN ERROR_NUMBER FORMAT 99999999
COLUMN ERROR_MESSAGE FORMAT A20
COLUMN MESSAGE_COUNT FORMAT 99999999

SELECT APPLY_NAME, 
       SOURCE_DATABASE, 
       LOCAL_TRANSACTION_ID, 
       ERROR_NUMBER,
       ERROR_MESSAGE,
       MESSAGE_COUNT
  FROM DBA_APPLY_ERROR;</code></pre></li>
                              <li>
                                 <p>Run the <code class="codeph">DELETE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the transaction identifier.
                                 </p>
                                 <p>To delete a transaction with the transaction identifier <code class="codeph">5.4.312</code>, run the following procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_APPLY_ADM.DELETE_ERROR(local_transaction_id =&gt; '5.4.312');</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" title="You can delete a specific error transaction, or you can delete all error transactions for an inbound server.">Deleting Apply Error Transactions</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72897"></a><div class="props_rev_3"><a id="GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030" name="GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030"></a><h5 id="XSTRM-GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030" class="sect5"><span class="enumeration_section">10.7.3.2 </span>Deleting All Error Transactions for an Inbound Server
                     </h5>
                     <div>
                        <p>If none of the error transactions should be applied, then you can delete all of the error transactions by running the <code class="codeph">DELETE_ALL_ERRORS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030__GUID-B58ABD2C-25D6-48A1-9600-3275AB0A68B4">To delete all error transactions for an inbound server:</p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, connect to the database as the XStream administrator.</p>
                                 <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                                 </p>
                              </li>
                              <li>
                                 <p>Run the <code class="codeph">DELETE_ALL_ERRORS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the name of the inbound server.
                                 </p>
                                 <p>To delete all of the error transactions for an inbound server named <code class="codeph">xin</code>, run the following procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_APPLY_ADM.DELETE_ALL_ERRORS(apply_name =&gt; 'xin');
</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnote" id="GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030__GUID-1583AEAC-1808-4706-BC97-E57063AFFFA9">
                              <p class="notep1">Note:</p>
                              <p>If you specify <code class="codeph">NULL</code> for the <code class="codeph">apply_name</code> parameter, and you have multiple inbound servers, then all of the apply errors are deleted for all of the inbound servers.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" title="You can delete a specific error transaction, or you can delete all error transactions for an inbound server.">Deleting Apply Error Transactions</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="XSTRM72578"></a><a id="XSTRM72579"></a><a id="XSTRM72565"></a><div class="props_rev_3"><a id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024" name="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024"></a><h4 id="XSTRM-GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024" class="sect4"><span class="enumeration_section">10.7.4 </span>Managing Eager Errors Encountered by an Inbound Server
                  </h4>
                  <div>
                     <p>As a performance optimization, an inbound server can use eager apply to begin to apply large transactions before it receives the commit LCR.</p>
                     <div class="section">
                        <p>See <span class="q">"<a href="xstream-in-concepts.html#GUID-F4C53B30-8D18-4E52-BC9A-91F5A4A422A8" title="For small transactions, XStream In does not begin to apply the logical change records (LCRs) until the inbound server receives a commit LCR for the transaction from the source. As a performance optimization, an inbound server can use eager apply to begin to apply large transactions before it receives the commit LCR.">Optimizing XStream In Performance for Large Transactions</a>"</span> for information about eager apply.
                        </p>
                        <p>An inbound server can encounter an error while eagerly applying a transaction. Because all of the LCRs are not available for the transaction, an <code class="codeph">EAGER</code> <code class="codeph">ERROR</code> is recorded for this failed transaction. In this case, an entry in the <code class="codeph">ALL_APPLY_ERROR</code> view shows an eager error for the transaction, but the LCRs are not recorded in the error queue. If an error transaction is not an eager error transaction, then it is referred to as a normal error transaction.
                        </p>
                        <p>Normal error transactions and eager error transactions must be managed differently. An inbound server moves a normal error transaction, including all of its LCRs, to the error queue, but an inbound server does not move an eager error transaction to the error queue.</p>
                        <p>An eager error causes the inbound server to stop. When it restarts, if the error queue has an <code class="codeph">EAGER</code> <code class="codeph">ERROR</code> for the restarting transaction, then the transaction is started as a normal transaction. That is, the LCRs in the large transaction spill to disk, and the inbound server begins to apply them only after the commit LCR is received.
                        </p>
                        <p>The following statements apply to both normal error transactions and eager error transactions:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">ALL_APPLY_ERROR</code> and <code class="codeph">ALL_APPLY_ERROR_MESSAGES</code> views contain information (metadata) about the error transaction.
                              </p>
                           </li>
                           <li>
                              <p>The inbound server does not apply the error transaction.</p>
                           </li>
                        </ul>
                        <p><a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJHFIBE" title="This table describes the available actions for a normal error transaction, the mechanisms for performing the actions, and a description of each action.">Table 10-3</a> explains the options for managing a normal error transaction.
                        </p>
                        <div class="tblformal" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJHFIBE">
                           <p class="titleintable">Table 10-3 Options Available for Managing a Normal Error Transaction</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Options Available for Managing a Normal Error Transaction" summary="This table describes the available actions for a normal error transaction, the mechanisms for performing the actions, and a description of each action." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d49348e8368">Action</th>
                                    <th align="left" valign="bottom" width="40%" id="d49348e8371">Mechanisms</th>
                                    <th align="left" valign="bottom" width="35%" id="d49348e8374">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d49348e8379" headers="d49348e8368 ">
                                       <p>Delete the error transaction</p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d49348e8379 d49348e8371 ">
                                       <p><code class="codeph">DBMS_APPLY_ADM.DELETE_ERROR</code></p>
                                       <p><code class="codeph">DBMS_APPLY_ADM.DELETE_ALL_ERRORS</code></p>
                                       <p>Oracle Enterprise Manager Cloud Control</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d49348e8379 d49348e8374 ">
                                       <p>The error transaction is deleted from the error queue, and the metadata about the error transaction is deleted. An inbound server does not try to reexecute the transaction when the inbound server is restarted. The transaction is not applied.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d49348e8395" headers="d49348e8368 ">
                                       <p>Execute the error transaction</p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d49348e8395 d49348e8371 ">
                                       <p><code class="codeph">DBMS_APPLY_ADM.EXECUTE_ERROR</code></p>
                                       <p><code class="codeph">DBMS_APPLY_ADM.EXECUTE_ALL_ERRORS</code></p>
                                       <p>Oracle Enterprise Manager Cloud Control</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d49348e8395 d49348e8374 ">
                                       <p>The error transaction in the error queue is executed. If there are no errors during execution, then the transaction is applied. If an LCR raises an error during execution, then the normal error transaction is moved back to the error queue.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d49348e8411" headers="d49348e8368 ">
                                       <p>Retain the error transaction</p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d49348e8411 d49348e8371 ">
                                       <p>None. (The error transaction is retained automatically.)</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d49348e8411 d49348e8374 ">
                                       <p>The error transaction remains in the error queue even if the inbound server is restarted. The metadata about the error transaction is also retained. The transaction is not applied.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJIGGEC" title="This table describes the available actions for an eager error transaction, the mechanisms for performing the actions, and a description of each action.">Table 10-4</a> explains the options for managing an eager error transaction.
                        </p>
                        <div class="tblformal" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJIGGEC">
                           <p class="titleintable">Table 10-4 Options Available for Managing an Eager Error Transaction</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Options Available for Managing an Eager Error Transaction" summary="This table describes the available actions for an eager error transaction, the mechanisms for performing the actions, and a description of each action." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d49348e8437">Action</th>
                                    <th align="left" valign="bottom" width="39%" id="d49348e8440">Mechanisms</th>
                                    <th align="left" valign="bottom" width="36%" id="d49348e8443">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d49348e8448" headers="d49348e8437 ">
                                       <p>Delete error transaction</p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d49348e8448 d49348e8440 ">
                                       <p><code class="codeph">DBMS_APPLY_ADM.DELETE_ERROR</code></p>
                                       <p><code class="codeph">DBMS_APPLY_ADM.DELETE_ALL_ERRORS</code></p>
                                       <p>Oracle Enterprise Manager Cloud Control</p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d49348e8448 d49348e8443 ">
                                       <p>The metadata about the eager error transaction is deleted. When the inbound server is restarted, it attempts to execute the transaction as an eager transaction. If the inbound server does not encounter an error during execution, then the transaction is applied successfully. If the inbound server encounters an error during execution, then the eager error transaction is recorded.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d49348e8464" headers="d49348e8437 ">
                                       <p>Retain error transaction</p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d49348e8464 d49348e8440 ">
                                       <p>None. (The metadata about the error transaction is retained automatically.)</p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d49348e8464 d49348e8443 ">
                                       <p>The metadata about the eager error transaction is retained. When the inbound server is restarted, it attempts to execute the transaction as a normal transaction.</p>
                                       <p>Specifically, the inbound server spills the transaction to disk and attempts to execute the transaction. If the inbound server does not encounter an error during execution, then the transaction is applied successfully. If the inbound server encounters an error during execution, then the transaction becomes a normal error transaction. In this case, the LCR that raised the error and all of the other LCRs in the transaction are moved to the error queue. After the normal error transaction is moved to the error queue, you must manage the error transaction as a normal error transaction (not an eager error transaction).</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-4C447526-C60F-4DAC-A782-B212E68FC698">
                           <p class="notep1">Note:</p>
                           <p>If you attempt to execute an eager error transaction manually using the <code class="codeph">DBMS_APPLY_ADM</code> package or Oracle Enterprise Manager Cloud Control, then the following error is raised:
                           </p><pre class="oac_no_warn" dir="ltr">ORA-26909: cannot reexecute an eager error
</pre><p>An eager error transaction cannot be executed manually. Instead, it is executed automatically when the inbound server is enabled.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-7FCB7186-1ED8-4F6D-A129-8E74F23AC444">To manage an eager error transaction encountered by an inbound server:</p>
                        <ol>
                           <li>
                              <p>Connect to the inbound server database as the XStream administrator.</p>
                              <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </li>
                           <li>
                              <p>Query the <code class="codeph">ERROR_TYPE</code> column in the <code class="codeph">ALL_APPLY_ERROR</code> data dictionary view:
                              </p><pre class="oac_no_warn" dir="ltr">SELECT APPLY_NAME, ERROR_TYPE FROM ALL_APPLY_ERROR;
</pre><p>Follow the appropriate instructions based on the error type:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If the <code class="codeph">ERROR_TYPE</code> column shows <code class="codeph">EAGER</code> <code class="codeph">ERROR</code>, then proceed to Step&nbsp;<a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJJFFBG">3</a>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If the <code class="codeph">ERROR_TYPE</code> column shows <code class="codeph">NULL</code>, then the apply error is not an eager error, and you cannot use the instructions in this section to manage it. Instead, use the instructions in <span class="q">"<a href="managing-xstream-in.html#GUID-FCD1CE21-0A24-4A32-B22A-784605237D86" title="You can retry a specific error transaction, or you can retry all error transactions for an inbound server.">Retrying Apply Error Transactions</a>"</span> and <span class="q">"<a href="managing-xstream-in.html#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" title="You can delete a specific error transaction, or you can delete all error transactions for an inbound server.">Deleting Apply Error Transactions</a>"</span>.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJJFFBG">
                              <p>Examine the error message raised by the LCR, and determine the cause of the error.</p>
                              <div class="infoboxnotealso" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-E2F9FFB0-A074-4E5B-9301-819DAAA8D7BE">
                                 <p class="notep1">See Also:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="q">"<a href="monitoring-xstream-in.html#GUID-43A987B4-7F6C-4BC3-A813-F6E062175207" title="An example illustrates checking for apply errors.">Checking for Apply Errors</a>"</span> and <span class="q">"<a href="monitoring-xstream-in.html#GUID-505C729C-5893-4B22-A981-33BF3084C67B" title="SQL scripts display detailed information about the error transactions in the error queue in a database.">Displaying Detailed Information About Apply Errors</a>"</span> for information about checking for apply errors using data dictionary views
                                       </p>
                                    </li>
                                    <li>
                                       <p>Oracle Enterprise Manager Cloud Control online help for information about checking for apply errors using Oracle Enterprise Manager Cloud Control</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <p>If possible, determine how to avoid the error, and make any changes necessary to avoid the error.</p>
                              <div class="infoboxnotealso" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-20B1B858-7D10-46F4-9610-4111D337DA03">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="troubleshooting-xstream-in.html#GUID-5A6A993B-2196-4D5A-BB8A-9E5A8E2B641D" title="You can diagnose and correct problems with an XStream In configuration.">Troubleshooting XStream In</a>"</span> for information about common apply errors and solutions for them
                                 </p>
                              </div>
                           </li>
                           <li id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJECFGC">
                              <p>Either retain the error transaction or delete the error transaction:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Delete the error transaction only if you have corrected the problem. The inbound server reexecutes the transaction when it is enabled.</p>
                                    <p>For example, to delete a transaction with the transaction identifier <code class="codeph">5.4.312</code>, run the following procedure:
                                    </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_APPLY_ADM.DELETE_ERROR(local_transaction_id =&gt; '5.4.312');
</pre></li>
                                 <li>
                                    <p>Retain the error transaction if you cannot correct the problem now or if you plan to reexecute it in the future. No action is necessary to retain the error transaction. It remains in the error queue until it is reexecuted or deleted.</p>
                                 </li>
                              </ul>
                              <p>See <a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJIGGEC" title="This table describes the available actions for an eager error transaction, the mechanisms for performing the actions, and a description of each action.">Table 10-4</a> for more information about these choices.
                              </p>
                              <div class="infoboxnote" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-BA4360FA-8DBD-4826-B054-67F8F1A80311">
                                 <p class="notep1">Note:</p>
                                 <p>It might not be possible to recover a normal error transaction that is deleted. Before deleting the error transaction, ensure that the error type is <code class="codeph">EAGER</code> <code class="codeph">ERROR</code>.
                                 </p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-111B538F-4C39-4478-B64C-37EF20AD3B72">
                                 <p class="notep1">See Also:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="q">"<a href="managing-xstream-in.html#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" title="You can delete a specific error transaction, or you can delete all error transactions for an inbound server.">Deleting Apply Error Transactions</a>"</span> for more information about deleting an error transaction using the <code class="codeph">DBMS_APPLY_ADM</code> package
                                       </p>
                                    </li>
                                    <li>
                                       <p>See the Oracle Enterprise Manager Cloud Control online help for information about deleting an error transaction using Oracle Enterprise Manager Cloud Control.</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <p>If the inbound server is disabled, then start the inbound server.</p>
                              <p>Query the <code class="codeph">STATUS</code> column in the <code class="codeph">ALL_APPLY_ERROR</code> view to determine whether the inbound server is enabled or disabled.
                              </p>
                              <p>If the <code class="codeph">disable_on_error</code> apply parameter is set to <code class="codeph">Y</code> for the inbound server, then the inbound server becomes disabled when it encounters the error and remains disabled.
                              </p>
                              <p>If the <code class="codeph">disable_on_error</code> apply parameter is set to <code class="codeph">N</code> for the inbound server, then the inbound server stops and restarts automatically when it encounters the error.
                              </p>
                              <p>See <a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJIGGEC" title="This table describes the available actions for an eager error transaction, the mechanisms for performing the actions, and a description of each action.">Table 10-4</a> for information about how the inbound server handles the error transaction based on your choice in Step <a href="managing-xstream-in.html#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJECFGC">5</a>.
                              </p>
                              <div class="infoboxnotealso" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-624F121B-0F15-4536-92B5-68A5ED151CB7">
                                 <p class="notep1">See Also:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="q">"<a href="managing-xstream-in.html#GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE" title="A inbound server must be enabled for it to receive logical change records (LCRs) from an XStream client application and apply the LCRs. You run the START_APPLY procedure in the DBMS_APPLY_ADM package to start an existing inbound server.">Starting an Inbound Server</a>"</span> for information about starting an inbound server or apply process using the <code class="codeph">DBMS_APPLY_ADM</code> package
                                       </p>
                                    </li>
                                    <li>
                                       <p>Oracle Enterprise Manager Cloud Control online help for information about starting an inbound server or apply process using Oracle Enterprise Manager Cloud Control</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-FE92B8FF-5E3A-48C2-90CB-80AA0D734415">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=REFRN20008" target="_blank"><span><cite>Oracle Database Reference</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS73644" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" title="Apply errors result when an inbound server tries to apply an LCR, and an error is raised.">Managing Apply Errors</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-1D97E873-3C82-4E2C-BBB0-C1049D7E5600" name="GUID-1D97E873-3C82-4E2C-BBB0-C1049D7E5600"></a><h3 id="XSTRM-GUID-1D97E873-3C82-4E2C-BBB0-C1049D7E5600" class="sect3"><span class="enumeration_section">10.8 </span>Conflict and Error Handling Precedence
               </h3>
               <div>
                  <p>To resolve a conflict or error, an inbound server tries to find conflict handlers and error handlers.</p>
                  <p>When an inbound server encounters a conflict or an error, it tries to resolve the problem by checking for the following types of handlers that apply to the error in the specified order:</p>
                  <ol>
                     <li>
                        <p>An update conflict handler set with the <code class="codeph">SET_UPDATE_CONFLICT_HANDLER</code> procedure
                        </p>
                     </li>
                     <li>
                        <p>A custom conflict handler set with the <code class="codeph">SET_DML_CONFLICT_HANDLER</code> procedure
                        </p>
                     </li>
                     <li>
                        <p>A collision handler set with the <code class="codeph">HANDLE_COLLISIONS</code> procedure
                        </p>
                     </li>
                     <li>
                        <p>An error handler set with the <code class="codeph">SET_REPERROR_HANDLER</code> procedure
                        </p>
                     </li>
                     <li>
                        <p>A custom conflict handler set with the <code class="codeph">SET_DML_HANDLER</code> procedure
                        </p>
                     </li>
                  </ol>
                  <p>All of the procedures are in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                  </p>
                  <p>If no handler applies to the conflict or error, then the transaction that caused the error is moved to the error queue.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="You can manage an XStream In configuration.">Managing XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM72606"></a><a id="XSTRM72984"></a><a id="XSTRM1592"></a><div class="props_rev_3"><a id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4" name="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4"></a><h3 id="XSTRM-GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4" class="sect3"><span class="enumeration_section">10.9 </span>Dropping Components in an XStream In Configuration
               </h3>
               <div>
                  <p>You can drop an inbound server with the <code class="codeph">DROP_INBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.
                  </p>
                  <div class="section">
                     <p>This procedure always drops the specified inbound server. This procedure also drops the queue for the inbound server if both of the following conditions are met:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>One call to the <code class="codeph">CREATE_INBOUND</code> procedure created the inbound server and the queue.
                           </p>
                        </li>
                        <li>
                           <p>The inbound server is the only subscriber to the queue.</p>
                        </li>
                     </ul>
                     <p>If either one of the preceding conditions is not met, then the <code class="codeph">DROP_INBOUND</code> procedure only drops the inbound server. It does not drop the queue.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4__GUID-E81E422B-E7B1-4D0A-AFC1-26DE11ED3D03">To drop an inbound server:</p>
                     <ol>
                        <li>
                           <p>Connect to the inbound server database as the XStream administrator.</p>
                           <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.
                           </p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph">DROP_INBOUND</code> procedure.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>If the inbound server's queue is not dropped automatically, then run the <code class="codeph">REMOVE_QUEUE</code> procedure to drop it.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4__GUID-2B58322E-2FE7-4D6C-BFF7-20F127B317A3">
                     <p class="titleinexample">Example 10-12 Dropping an Inbound Server</p>
                     <p>To drop an inbound server named <code class="codeph">xin</code>, run the following procedure:
                     </p><pre class="oac_no_warn" dir="ltr">exec DBMS_XSTREAM_ADM.DROP_INBOUND('xin');
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4__GUID-DA403B94-5198-43A3-BB45-A1303E87559C">
                     <p class="titleinexample">Example 10-13 Dropping an Inbound Server's Queue</p>
                     <p>To drop a queue named <code class="codeph">xin_queue</code>, run the following procedure:
                     </p><pre class="oac_no_warn" dir="ltr">exec DBMS_XSTREAM_ADM.REMOVE_QUEUE('xin_queue');
</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4__GUID-451C1154-5961-4C84-9EE2-15745DB53691">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS70200" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-xstream-in.html#GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" title="You can manage an XStream In configuration.">Managing XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Using Indexes in Database Applications</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Development Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Development Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00">
      <meta name="dcterms.title" content="Database Development Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96334-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="regexp.html" title="Previous" type="text/html">
      <link rel="next" href="data-integrity.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="regexp.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="data-integrity.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Development Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-for-application-developers.html" property="item" typeof="WebPage"><span property="name">SQL for Application Developers</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Indexes in Database Applications</li>
            </ol>
            <a id="GUID-5C53546D-8C54-4F38-B472-835F94030016" name="GUID-5C53546D-8C54-4F38-B472-835F94030016"></a><a id="ADFNS1019"></a><a id="ADFNS005"></a>
            
            <h2 id="ADFNS-GUID-5C53546D-8C54-4F38-B472-835F94030016" class="sect2"><span class="enumeration_chapter">11 </span>Using Indexes in Database Applications
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><span class="bold">Indexes</span> are optional structures, associated with tables and clusters, which allow SQL queries to execute more quickly. Just as the index in this guide helps you locate information faster than if there were no index, an Oracle Database index provides a faster access path to table data. You can use indexes without rewriting any queries. Your results are the same, but you see them more quickly.
               </p>
               <div class="infoboxnotealso" id="GUID-5C53546D-8C54-4F38-B472-835F94030016__GUID-DE23CECB-B766-4EF2-93D4-1DF59CD8B47C">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="../cncpt/indexes-and-index-organized-tables.html#CNCPT721" target="_blank"><span class="italic">Oracle Database Concepts</span></a>  for more information about indexes and index-organized tables 
                        </p>
                     </li>
                     <li>
                        <p><a href="../admin/managing-indexes.html#ADMIN016" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about managing indexes
                        </p>
                     </li>
                     <li>
                        <p><a href="../tgsql/index.html" target="_blank"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for more information about how indexes and clusters can enhance or degrade performance
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="section">
                  <p class="subhead1" id="GUID-5C53546D-8C54-4F38-B472-835F94030016__GUID-D4F4E154-C3C0-4A08-A7D6-715C5335C614">Topics:</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="indexes.html#GUID-58E6B9ED-06AE-4232-806B-79C28E7F7956">Guidelines for Managing Indexes</a></p>
                  </li>
                  <li>
                     <p><a href="indexes.html#GUID-CE94ABC4-A776-4119-B20C-5779E3765576">Managing Indexes</a></p>
                  </li>
                  <li>
                     <p><a href="indexes.html#GUID-DA1A990A-006F-4D43-82FD-90159EDFFAA1">When to Use Domain Indexes</a></p>
                  </li>
                  <li>
                     <p><a href="indexes.html#GUID-44AD4D28-A056-4977-B2F7-AC1BC50EDC87" title="You can create composite indexes to computer arithmetic expressions.You can use the NLSSORT API for language-dependent sorting.">When to Use Function-Based Indexes</a></p>
                  </li>
               </ul>
            </div><a id="ADFNS00502"></a><div class="props_rev_3"><a id="GUID-58E6B9ED-06AE-4232-806B-79C28E7F7956" name="GUID-58E6B9ED-06AE-4232-806B-79C28E7F7956"></a><h3 id="ADFNS-GUID-58E6B9ED-06AE-4232-806B-79C28E7F7956" class="sect3">Guidelines for Managing Indexes</h3>
               <div>
                  <p>The summary of guidelines for managing the indexes are as follows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Create indexes after inserting table data</p>
                     </li>
                     <li>
                        <p>Index the correct tables and columns</p>
                     </li>
                     <li>
                        <p>Order index columns for performance</p>
                     </li>
                     <li>
                        <p>Limit the number of indexes for each table</p>
                     </li>
                     <li>
                        <p>Drop indexes that are no longer needed</p>
                     </li>
                     <li>
                        <p>Understand deferred segment creation</p>
                     </li>
                     <li>
                        <p>Estimate index size and set storage parameters</p>
                     </li>
                     <li>
                        <p>Specify the tablespace for each index</p>
                     </li>
                     <li>
                        <p>Consider parallelizing index creation</p>
                     </li>
                     <li>
                        <p>Consider creating indexes with <code class="codeph">NOLOGGING</code></p>
                     </li>
                     <li>
                        <p>Understand when to use unusable or invisible indexes</p>
                     </li>
                     <li>
                        <p>Consider costs and benefits of coalescing or rebuilding indexes</p>
                     </li>
                     <li>
                        <p>Consider cost before disabling or dropping constraints</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-58E6B9ED-06AE-4232-806B-79C28E7F7956__NOTE-123-C8F36ED3">
                     <p class="notep1">See Also:</p><a href="../admin/managing-indexes.html#ADMIN11710" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a></div>
               </div>
            </div><a id="ADFNS00503"></a><div class="props_rev_3"><a id="GUID-CE94ABC4-A776-4119-B20C-5779E3765576" name="GUID-CE94ABC4-A776-4119-B20C-5779E3765576"></a><h3 id="ADFNS-GUID-CE94ABC4-A776-4119-B20C-5779E3765576" class="sect3">Managing Indexes</h3>
               <div>
                  <div class="section">
                     <p><a href="../admin/managing-indexes.html#ADMIN016" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> has this information about managing indexes:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../admin/managing-indexes.html#ADMIN11722" target="_blank">Creating indexes</a></p>
                        </li>
                        <li>
                           <p><a href="../admin/managing-indexes.html#ADMIN11732" target="_blank">Altering indexes</a></p>
                        </li>
                        <li>
                           <p><a href="../admin/managing-indexes.html#ADMIN11736" target="_blank">Monitoring space use of indexes</a></p>
                        </li>
                        <li>
                           <p><a href="../admin/managing-indexes.html#ADMIN11737" target="_blank">Dropping indexes</a></p>
                        </li>
                        <li>
                           <p><a href="../admin/managing-indexes.html#ADMIN11738" target="_blank">Data dictionary views that display information about indexes</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-CE94ABC4-A776-4119-B20C-5779E3765576__GUID-0DB6E924-5098-420F-87D6-FC44171B7D1D">
                        <p class="notep1">See Also:</p>
                        <p><a href="data-integrity.html#GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E">Creating Indexes for Use with Constraints</a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS00504"></a><div class="props_rev_3"><a id="GUID-DA1A990A-006F-4D43-82FD-90159EDFFAA1" name="GUID-DA1A990A-006F-4D43-82FD-90159EDFFAA1"></a><h3 id="ADFNS-GUID-DA1A990A-006F-4D43-82FD-90159EDFFAA1" class="sect3">When to Use Domain Indexes</h3>
               <div>
                  <p>A <span class="bold">domain index</span> (also called an <span class="bold">application domain index</span>) is a customized index specific to an application that was implemented using a data cartridge (for example, a search engine or geographic information system).
                  </p>
                  <div class="infoboxnotealso" id="GUID-DA1A990A-006F-4D43-82FD-90159EDFFAA1__GUID-6FF032C1-65F3-49FD-AA5A-F83EDE3306ED">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADDCI270" target="_blank"><span class="italic">Oracle Database Data Cartridge Developer's Guide</span></a> for conceptual background to help you decide when to build domain indexes
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT607" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for information about domain indexes
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS1021"></a><a id="ADFNS00505"></a><div class="props_rev_3"><a id="GUID-44AD4D28-A056-4977-B2F7-AC1BC50EDC87" name="GUID-44AD4D28-A056-4977-B2F7-AC1BC50EDC87"></a><h3 id="ADFNS-GUID-44AD4D28-A056-4977-B2F7-AC1BC50EDC87" class="sect3">When to Use Function-Based Indexes</h3>
               <div>
                  <p>A <span class="bold">function-based index</span> computes the value of an expression that involves one or more columns and stores it in the index. The index expression can be an arithmetic expression or an expression that contains a SQL function, PL/SQL function, package function, or C callout. Function-based indexes also support linguistic sorts based on collation keys, efficient linguistic collation of SQL statements, and case-insensitive sorts.
                  </p>
                  <p>A function-based index improves the performance of queries that use the index expression (especially if the expression computation is intensive). However:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The database must also evaluate the index expression to process statements that do not use it.</p>
                     </li>
                     <li>
                        <p>Function-based indexes on columns that are frequently modified are expensive for the database to maintain.</p>
                     </li>
                  </ul>
                  <p>The optimizer can use function-based indexes only for cost-based optimization, while it can use indexes on columns for both cost-based and rule-based optimization.</p>
                  <div class="infoboxnote" id="GUID-44AD4D28-A056-4977-B2F7-AC1BC50EDC87__GUID-11E0356B-A1E5-46D9-BBC2-9C1CDE489937">
                     <p class="notep1">Note:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A function-based index cannot contain the value <code class="codeph">NULL</code>. Therefore, either ensure that no column involved in the index expression can contain <code class="codeph">NULL</code> or use the <code class="codeph">NVL</code> function in the index expression to substitute another value for <code class="codeph">NULL</code>.
                           </p>
                        </li>
                        <li>
                           <p>Oracle Database treats descending indexes as if they were function-based indexes.</p>
                        </li>
                     </ul>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-44AD4D28-A056-4977-B2F7-AC1BC50EDC87__GUID-523411FD-6ECF-4B7D-9C7D-0022C9F7DC22">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="indexes.html#GUID-0A9AA4A6-E711-41BC-A22E-098703354A02">Advantages of Function-Based Indexes</a></p>
                        </li>
                        <li>
                           <p><a href="indexes.html#GUID-70F40F8F-5894-41BB-B2F3-2570832BC038">Disadvantages of Function-Based Indexes</a></p>
                        </li>
                        <li>
                           <p><a href="indexes.html#GUID-0E001165-03FD-481F-8FE6-9FBF57EDB1C8" title="You can create composite indexes to computer arithmetic expressions.">Example: Function-Based Index for Precomputing Arithmetic Expression</a></p>
                        </li>
                        <li>
                           <p><a href="indexes.html#GUID-56BEABD3-13BD-4AA3-B4D2-CC5A7D88F530">Example: Function-Based Indexes on Object Column</a></p>
                        </li>
                        <li>
                           <p><a href="indexes.html#GUID-4C1EE48E-1876-403E-8043-5002121FE6E0">Example: Function-Based Index for Faster Case-Insensitive Searches</a></p>
                        </li>
                        <li>
                           <p><a href="indexes.html#GUID-D81FF9CF-331F-4A53-A621-D25BC4C7BA38" title="You can use the NLSSORT API for language-dependent sorting.">Example: Function-Based Index for Language-Dependent Sorting</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-44AD4D28-A056-4977-B2F7-AC1BC50EDC87__GUID-05CFCB7E-5ECD-44E2-B777-A195F11E88B2">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1161" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for additional conceptual information about function-based indexes
                              </p>
                           </li>
                           <li>
                              <p><a href="../admin/managing-indexes.html#ADMIN11730" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about creating function-based indexes
                              </p>
                           </li>
                           <li>
                              <p><a href="../nlspg/linguistic-sorting-and-matching.html#NLSPG294" target="_blank"><span class="italic">Oracle Database Globalization Support Guide</span></a> for information about function-based linguistic indexes
                              </p>
                           </li>
                           <li>
                              <p><a href="../cncpt/indexes-and-index-organized-tables.html#CNCPT1163" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for more information about how the optimizer uses function-based indexes
                              </p>
                           </li>
                           <li>
                              <p><a href="../tgsql/index.html" target="_blank"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for information about using function-based indexes for performance
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/NVL.html#SQLRF00684" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about <code class="codeph">NVL</code></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/CREATE-INDEX.html#SQLRF53994" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about creating index
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS254"></a><div class="props_rev_3"><a id="GUID-0A9AA4A6-E711-41BC-A22E-098703354A02" name="GUID-0A9AA4A6-E711-41BC-A22E-098703354A02"></a><h4 id="ADFNS-GUID-0A9AA4A6-E711-41BC-A22E-098703354A02" class="sect4">Advantages of Function-Based Indexes</h4>
                  <div>
                     <p>A function-based index has these advantages:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A function-based index increases the number of situations where the database can perform an index range scan instead of a full index scan.</p>
                           <p>An index range scan typically has a fast response time when the <code class="codeph">WHERE</code> clause selects fewer than 15% of the rows of a large table. The optimizer can more accurately estimate how many rows an expression selects if the expression is materialized in a function-based index.
                           </p>
                           <p>Oracle Database represents the index expression as a virtual column, on which the <code class="codeph">ANALYZE</code> statement can build a histogram.
                           </p>
                        </li>
                        <li>
                           <p>A function-based index precomputes and stores the value of an expression.</p>
                           <p>Queries can get the value of the expression from the index instead of computing it. The more queries that need the value and the more intensive computation the index expression gets, the index improves application performance.</p>
                        </li>
                        <li>
                           <p>You can create a function-based index on an object column or <code class="codeph">REF</code> column.
                           </p>
                           <p>The index expression can be the invocation of a method that returns an object type. </p>
                        </li>
                        <li>
                           <p>A function-based index lets you perform more powerful sorts.</p>
                           <p>The index expression can invoke the SQL functions <code class="codeph">UPPER</code> and <code class="codeph">LOWER</code> for case-insensitive sorts (as in <a href="indexes.html#GUID-4C1EE48E-1876-403E-8043-5002121FE6E0__CIHFBBEB">Example 11-3</a>) and the SQL function <code class="codeph">NLSSORT</code> for linguistic-based sorts.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-0A9AA4A6-E711-41BC-A22E-098703354A02__GUID-CE15A5A2-66A0-4426-BC2D-2F15E9EA6773">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../cncpt/indexes-and-index-organized-tables.html#CNCPT-GUID-797E49E6-2DCE-4FD4-8E4A-6E761F1383D1" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for more information about index-range scan and index scan
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/ANALYZE.html#SQLRF01105" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about <code class="codeph">ANALYZE</code> statement 
                              </p>
                           </li>
                           <li>
                              <p><a href="../adobj/design-considerations-for-methods.html#ADOBJ7478" target="_blank"><span class="italic">Oracle Database Object-Relational Developer's Guide</span></a> for more information about function-based index
                              </p>
                           </li>
                           <li>
                              <p><a href="indexes.html#GUID-56BEABD3-13BD-4AA3-B4D2-CC5A7D88F530">Example: Function-Based Indexes on Object Column</a> and <a href="../sqlrf/CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE__I2092987" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for examples related to function-based indexes
                              </p>
                           </li>
                           <li>
                              <p><a href="indexes.html#GUID-0E001165-03FD-481F-8FE6-9FBF57EDB1C8" title="You can create composite indexes to computer arithmetic expressions.">Example: Function-Based Index for Precomputing Arithmetic Expression</a></p>
                           </li>
                           <li>
                              <p><a href="indexes.html#GUID-D81FF9CF-331F-4A53-A621-D25BC4C7BA38" title="You can use the NLSSORT API for language-dependent sorting.">Example: Function-Based Index for Language-Dependent Sorting</a> for example related to <code class="codeph">NLSSORT</code> SQL function
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS257"></a><div class="props_rev_3"><a id="GUID-70F40F8F-5894-41BB-B2F3-2570832BC038" name="GUID-70F40F8F-5894-41BB-B2F3-2570832BC038"></a><h4 id="ADFNS-GUID-70F40F8F-5894-41BB-B2F3-2570832BC038" class="sect4">Disadvantages of Function-Based Indexes</h4>
                  <div>
                     <p>A function-based index has these disadvantages:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The optimizer can use a function-based index only for cost-based optimization, not for rule-based optimization.</p>
                           <p>The cost-based optimizer uses statistics stored in the dictionary. To gather statistics for a function-based index, invoke either <code class="codeph">DBMS_STATS</code>.<code class="codeph">GATHER_TABLE_STATS</code> or <code class="codeph">DBMS_STATS</code>.<code class="codeph">GATHER_SCHEMA_STATS</code> .
                           </p>
                        </li>
                        <li>
                           <p>The database does not use a function-based index until you analyze the index itself and the table on which it is defined.</p>
                           <p>To analyze the index and the table on which the index is defined, invoke either <code class="codeph">DBMS_STATS</code>.<code class="codeph">GATHER_TABLE_STATS</code> or <code class="codeph">DBMS_STATS</code>.<code class="codeph">GATHER_SCHEMA_STATS</code>.
                           </p>
                        </li>
                        <li>
                           <p>The database does not use function-based indexes when doing <code class="codeph">OR</code> expansion.
                           </p>
                        </li>
                        <li>
                           <p>You must ensure that any schema-level or package-level PL/SQL function that the index expression invokes is deterministic (that is, that the function always return the same result for the same input).</p>
                           <p>You must declare the function as <code class="codeph">DETERMINISTIC</code>, but because Oracle Database does not check this assertion, you must ensure that the function really is deterministic.
                           </p>
                           <p>If you change the semantics of a <code class="codeph">DETERMINISTIC</code> function and recompile it, then you must manually rebuild any dependent function-based indexes and materialized views. Otherwise, they report results for the prior version of the function.
                           </p>
                        </li>
                        <li>
                           <p>If the index expression is a function invocation, then the function return type cannot be constrained.</p>
                           <p>Because you cannot constrain the function return type with <code class="codeph">NOT</code> <code class="codeph">NULL</code>, you must ensure that the query that uses the index cannot fetch <code class="codeph">NULL</code> values. Otherwise, the database performs a full table scan.
                           </p>
                        </li>
                        <li>
                           <p>The index expression cannot invoke an aggregate function.</p>
                        </li>
                        <li>
                           <p>A bitmapped function-based index cannot be a descending index.</p>
                        </li>
                        <li>
                           <p>The data type of the index expression cannot be <code class="codeph">VARCHAR2</code>, <code class="codeph">RAW</code>, <code class="codeph">LONGRAW</code>, or a PL/SQL data type of unknown length.
                           </p>
                           <p>That is, you cannot index an expression of unknown length. However, you can index a known-length substring of that expression. For example:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE FUNCTION initials (
  name  IN VARCHAR2
) <span class="bold">RETURN VARCHAR2</span>
  DETERMINISTIC
IS
BEGIN
  RETURN('A. J.');
END;
/

/* Invoke SUBSTR both when creating index and when referencing
   function in queries. */
 
CREATE INDEX func_substr_index ON
EMPLOYEES(<span class="bold">SUBSTR(initials(FIRST_NAME),1,10)</span>);
 
SELECT <span class="bold">SUBSTR(initials(FIRST_NAME),1,10)</span> FROM EMPLOYEES;</pre></li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-70F40F8F-5894-41BB-B2F3-2570832BC038__GUID-973B89A4-B0D8-416F-855C-EE189F152530">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF53993" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for notes on function-based indexes
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/CREATE-INDEX.html#SQLRF01212" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for restrictions on function-based indexes
                              </p>
                           </li>
                           <li>
                              <p><a href="../lnpls/CREATE-FUNCTION-statement.html#LNPLS01370" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about the <code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code> statement, including restrictions
                              </p>
                           </li>
                           <li>
                              <p><a href="../arpls/index.html" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about <code class="codeph">DBMS_STATS</code>, <code class="codeph">GATHER_TABLE_STATS</code>, <code class="codeph">DBMS_STATS</code>, and <code class="codeph">GATHER_SCHEMA_STATS</code></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF20035" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about aggregate functions
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF53995" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about function-based index
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-0E001165-03FD-481F-8FE6-9FBF57EDB1C8" name="GUID-0E001165-03FD-481F-8FE6-9FBF57EDB1C8"></a><h4 id="ADFNS-GUID-0E001165-03FD-481F-8FE6-9FBF57EDB1C8" class="sect4">Example: Function-Based Index for Precomputing Arithmetic Expression</h4>
                  <div>
                     <p>You can create composite indexes to computer arithmetic expressions.</p>
                     <p><a href="indexes.html#GUID-0E001165-03FD-481F-8FE6-9FBF57EDB1C8__CIHEDEBD">Example 11-1</a> creates a table with columns <code class="codeph">a</code>, <code class="codeph">b</code>, and <code class="codeph">c</code>; creates an index on the table, and then queries the table. The index is a composite index on three columns: a virtual column that represents the expression <code class="codeph">a+b*(c-1)</code>, column <code class="codeph">a</code>, and column <code class="codeph">b</code>. The query uses the indexed expression in its <code class="codeph">WHERE</code> clause; therefore, it can use an index range scan instead of a full index scan.
                     </p>
                     <div class="example" id="GUID-0E001165-03FD-481F-8FE6-9FBF57EDB1C8__CIHEDEBD">
                        <p class="titleinexample">Example 11-1 Function-Based Index for Precomputing Arithmetic Expression</p>
                        <p>Create table on which to create index:</p><pre class="oac_no_warn" dir="ltr">DROP TABLE Fbi_tab;
CREATE TABLE Fbi_tab (
  a INTEGER, 
  b INTEGER, 
  c INTEGER
);
</pre><p>Create index:</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX Idx ON Fbi_tab (a+b*(c-1), a, b);
</pre><p>This query can use an index range scan instead of a full index scan:</p><pre class="oac_no_warn" dir="ltr">SELECT a FROM Fbi_tab WHERE <span class="bold">a+b*(c-1)</span> &lt; 100;</pre><div class="infoboxnote" id="GUID-0E001165-03FD-481F-8FE6-9FBF57EDB1C8__GUID-0181711E-880F-4D3E-9346-33084ECA99F9">
                           <p class="notep1">Note:</p>
                           <p>This example uses composite indexes (indexes on multiple table columns).</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-0E001165-03FD-481F-8FE6-9FBF57EDB1C8__GUID-504CF995-A742-4882-AA87-8E330F13B2F2">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT88839" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for information about fast full index scans
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT88833" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for more information about composite indexes
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-56BEABD3-13BD-4AA3-B4D2-CC5A7D88F530" name="GUID-56BEABD3-13BD-4AA3-B4D2-CC5A7D88F530"></a><h4 id="ADFNS-GUID-56BEABD3-13BD-4AA3-B4D2-CC5A7D88F530" class="sect4">Example: Function-Based Indexes on Object Column</h4>
                  <div>
                     <p></p>
                     <p>In <a href="indexes.html#GUID-56BEABD3-13BD-4AA3-B4D2-CC5A7D88F530__CIHEGHEF">Example 11-2</a>, assume that the object type <code class="codeph">Reg_obj</code> has been defined, and that it stores information about a city. The example creates a table whose first column has type <code class="codeph">Reg_obj</code>, a deterministic function with a parameter of type <code class="codeph">Reg_obj</code>, and two function-based indexes that invoke the function. The first query uses the first index to quickly find cities further than 1000 miles from the equator. The second query uses the second index (which is composite) to quickly find cities where the temperature delta is less than 20 and the maximum temperature is greater than 75. (The table is not populated for the example, so the queries return no rows.)
                     </p>
                     <div class="example" id="GUID-56BEABD3-13BD-4AA3-B4D2-CC5A7D88F530__CIHEGHEF">
                        <p class="titleinexample">Example 11-2 Function-Based Indexes on Object Column</p>
                        <p>Create table with object column:</p><pre class="oac_no_warn" dir="ltr">DROP TABLE Weatherdata_tab;
CREATE TABLE Weatherdata_tab (
  <span class="bold">Reg_obj</span> INTEGER,
  Maxtemp INTEGER,
  Mintemp INTEGER
);
 </pre><p>Create deterministic function with parameter of type <code class="codeph">Reg_obj</code>:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE FUNCTION Distance_from_equator (
  <span class="bold">Reg_obj</span> IN INTEGER
) RETURN INTEGER
  <span class="bold">DETERMINISTIC</span>
IS
BEGIN
  RETURN(3000);
END;
/
 </pre><p>Create first function-based index:</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX Distance_index
ON Weatherdata_tab (<span class="bold">Distance_from_equator (Reg_obj)</span>);
 </pre><p>Use index expression in query:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">SELECT * FROM Weatherdata_tab</span>
<span class="bold">WHERE (Distance_from_equator (Reg_Obj)) &gt; '1000';</span>
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">no rows selected
 </pre><p>Create second function-based (and composite) index:</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX Compare_index
ON Weatherdata_tab (<span class="bold">(Maxtemp - Mintemp) DESC, Maxtemp</span>);
 </pre><p>Use index expression and indexed column in query:</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM Weatherdata_tab
WHERE (<span class="bold">(Maxtemp - Mintemp)</span> &lt; '20' AND <span class="bold">Maxtemp</span> &gt; '75');
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">no rows selected</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS1022"></a><a id="ADFNS260"></a><a id="ADFNS99862"></a><a id="ADFNS259"></a><a id="ADFNS261"></a><a id="ADFNS258"></a><div class="props_rev_3"><a id="GUID-4C1EE48E-1876-403E-8043-5002121FE6E0" name="GUID-4C1EE48E-1876-403E-8043-5002121FE6E0"></a><h4 id="ADFNS-GUID-4C1EE48E-1876-403E-8043-5002121FE6E0" class="sect4">Example: Function-Based Index for Faster Case-Insensitive Searches</h4>
                  <div>
                     <p><a href="indexes.html#GUID-4C1EE48E-1876-403E-8043-5002121FE6E0__CIHFBBEB">Example 11-3</a> creates an index that allows faster case-insensitive searches in the <code class="codeph">EMPLOYEES</code> table and then uses the index expression in a query.
                     </p>
                     <div class="example" id="GUID-4C1EE48E-1876-403E-8043-5002121FE6E0__CIHFBBEB">
                        <p class="titleinexample">Example 11-3 Function-Based Index for Faster Case-Insensitive Searches</p>
                        <p>Create index:</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX emp_lastname ON EMPLOYEES (<span class="bold">UPPER(LAST_NAME)</span>);
</pre><p>Use index expression in query:</p><pre class="oac_no_warn" dir="ltr">SELECT first_name, last_name
FROM EMPLOYEES
WHERE <span class="bold">UPPER(LAST_NAME)</span> LIKE 'J%S_N';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME           LAST_NAME
-------------------- -------------------------
Charles              Johnson
 
1 row selected.
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-D81FF9CF-331F-4A53-A621-D25BC4C7BA38" name="GUID-D81FF9CF-331F-4A53-A621-D25BC4C7BA38"></a><h4 id="ADFNS-GUID-D81FF9CF-331F-4A53-A621-D25BC4C7BA38" class="sect4">Example: Function-Based Index for Language-Dependent Sorting</h4>
                  <div>
                     <p>You can use the <code class="codeph">NLSSORT</code> API for language-dependent sorting.
                     </p>
                     <p><a href="indexes.html#GUID-D81FF9CF-331F-4A53-A621-D25BC4C7BA38__CIHCADHA">Example 11-4</a> creates a table with one column, <code class="codeph">NAME</code>, and a function-based index to sort that column using the collation sequence <code class="codeph">GERMAN</code>, and then selects all columns of the table, ordering them by <code class="codeph">NAME</code>. Because the query can use the index, the query is faster. (Assume that the query is run in a German session, where <code class="codeph">NLS_SORT</code> is <code class="codeph">GERMAN</code> and <code class="codeph">NLS_COMP</code> is <code class="codeph">ANSI</code>. Otherwise, the query would have to specify the values of these Globalization Support parameters.)
                     </p>
                     <div class="example" id="GUID-D81FF9CF-331F-4A53-A621-D25BC4C7BA38__CIHCADHA">
                        <p class="titleinexample">Example 11-4 Function-Based Index for Language-Dependent Sorting</p>
                        <p>Create table on which to create index:</p><pre class="oac_no_warn" dir="ltr">DROP TABLE nls_tab;
CREATE TABLE nls_tab (<span class="bold">NAME</span> VARCHAR2(80));
</pre><p>Create index:</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX nls_index
  ON nls_tab (<span class="bold">NLSSORT(NAME, 'NLS_SORT = GERMAN')</span>);
</pre><p>Select all table columns, ordered by <code class="codeph">NAME</code>:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM nls_tab
WHERE NAME IS NOT NULL
<span class="bold">ORDER BY NAME</span>;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
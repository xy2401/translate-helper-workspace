<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Configuring the DRDA Server</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Installation and Configuration Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Installation and Configuration Guide for IBM AIX on POWER Systems (64-Bit), Linux x86-64, Oracle Solaris on SPARC (64-Bit), Oracle Solaris on x86-64 (64-Bit), and HP-UX Itanium">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-gateway-installation-and-configuration-guide-aix-5l-based-systems-64-bit-hp-ux-itanium-solaris-operating-system-sparc-64-bit-linux-x86-and-linux-x86-64.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-16T19:11:50-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="F18243-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="install-drda-gateway.html" title="Previous" type="text/html">
      <link rel="next" href="config-drda-gateway.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway Installation and Configuration Guide for AIX 5L Based Systems (64-Bit), HP-UX Itanium, Solaris Operating System (SPARC 64-Bit), Linux x86, and Linux x86-64">
    <meta name="dcterms.isVersionOf" content="OTGIS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="install-drda-gateway.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="config-drda-gateway.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Installation and Configuration Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-drda-gateway.html" property="item" typeof="WebPage"><span property="name">Installing and Configuring Oracle Database Gateway for DRDA </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Configuring the DRDA Server</li>
            </ol>
            <a id="GUID-BE460611-C4E4-40A6-A98D-F0EBCECBE0CD" name="GUID-BE460611-C4E4-40A6-A98D-F0EBCECBE0CD"></a><a id="OTGIS130"></a>
            
            <h2 id="OTGIS-GUID-BE460611-C4E4-40A6-A98D-F0EBCECBE0CD" class="sect2"><span class="enumeration_chapter">13 </span> Configuring the DRDA Server
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This section describes tasks you must perform to configure the DRDA server. Each supported operating system is addressed separately. Experience with the given operating system and database is required.</p>
               <p>The steps for configuring your remote DRDA server apply to the following DRDA servers:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>DB2 UDB for z/OS</p>
                  </li>
                  <li>
                     <p>DB2 UDB for iSeries</p>
                  </li>
                  <li>
                     <p>DB2 UDB for Linux, Unix, and Windows</p>
                  </li>
               </ul>
               <p>Configuring a DRDA database to enable access by the gateway requires actions on the DRDA database and on certain components of the host operating system. Although no Oracle software is installed on the host system, access to, and some knowledge of the host system and DRDA database are required during the configuration. Refer to the vendor documentation for complete information about your host system and DRDA database.</p>
               <p>Topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="config-drda-server.html#GUID-51158C4F-56F4-4C4D-BE85-5D3119763BE8">Configuring the DRDA Server for DB2 UDB for z/OS</a></p>
                  </li>
                  <li>
                     <p><a href="config-drda-server.html#GUID-11C40E3E-E380-4AC7-82E6-F73F80A3A345">Configuring the DRDA Server for DB2 UDB for iSeries</a></p>
                  </li>
                  <li>
                     <p><a href="config-drda-server.html#GUID-65459B0F-6B03-409C-8BC5-C4F4870E9A42">Configuring the DRDA Server for DB2 UDB for Linux_ Unix_ and Windows</a></p>
                  </li>
                  <li>
                     <p><a href="config-drda-server.html#GUID-CC59E22C-E2BF-453C-8F28-E321DC093F46">Manual Binding of DRDA Gateway Packages</a></p>
                  </li>
               </ul>
            </div><a id="OTGIS1071"></a><div class="props_rev_3"><a id="GUID-51158C4F-56F4-4C4D-BE85-5D3119763BE8" name="GUID-51158C4F-56F4-4C4D-BE85-5D3119763BE8"></a><h3 id="OTGIS-GUID-51158C4F-56F4-4C4D-BE85-5D3119763BE8" class="sect3">Configuring the DRDA Server for DB2 UDB for z/OS</h3>
               <div>
                  <div class="section">
                     <p>Perform the following tasks to configure the DRDA server with DB2 on an z/OS system:</p>
                     <ol>
                        <li>
                           <p>Define the user ID that owns the package</p>
                           <p>During first gateway usage for a particular DRDA server,  Oracle supplied packages will be automatically bound to the DRDA server. The user ID and password that are used  (either implied as the current Oracle user or explicitly defined in the <code class="codeph">CREATE DATABASE LINK</code> command) must have proper authority on the DRDA Server to create the packages.   The followings are minimum authorities needed by this user: 
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Package <a id="d36752e133" class="indexterm-anchor"></a>privileges of <a id="d36752e140" class="indexterm-anchor"></a><code class="codeph">BIND</code><a id="d36752e146" class="indexterm-anchor"></a>, <a id="d36752e153" class="indexterm-anchor"></a><code class="codeph">COPY</code><a id="d36752e159" class="indexterm-anchor"></a>, and <a id="d36752e167" class="indexterm-anchor"></a><code class="codeph">EXECUTE</code><a id="d36752e173" class="indexterm-anchor"></a>, for example:
                                 </p><pre class="oac_no_warn" dir="ltr">GRANT BIND    ON PACKAGE oraclegtw.* TO <span class="italic">userid</span>
GRANT COPY    ON PACKAGE oraclegtw.* TO <span class="italic">userid</span>
GRANT EXECUTE ON PACKAGE oraclegtw.* TO PUBLIC
</pre></li>
                              <li>
                                 <p>Collection <a id="d36752e191" class="indexterm-anchor"></a>privilege of <a id="d36752e196" class="indexterm-anchor"></a><code class="codeph">CREATE</code>&nbsp;<code class="codeph">IN</code><a id="d36752e205" class="indexterm-anchor"></a>, for example:
                                 </p><pre class="oac_no_warn" dir="ltr">GRANT CREATE IN COLLECTION oraclegtw TO <span class="italic">userid</span>
</pre></li>
                              <li>
                                 <p>System <a id="d36752e220" class="indexterm-anchor"></a>privileges of <a id="d36752e225" class="indexterm-anchor"></a><code class="codeph">BINDADD</code><a id="d36752e231" class="indexterm-anchor"></a> and <a id="d36752e238" class="indexterm-anchor"></a><code class="codeph">BINDAGENT</code><a id="d36752e244" class="indexterm-anchor"></a>, for example:
                                 </p><pre class="oac_no_warn" dir="ltr">GRANT BINDADD   TO <span class="italic">userid</span>
GRANT BINDAGENT TO <span class="italic">userid</span>
</pre></li>
                              <li>
                                 <p>Database <a id="d36752e262" class="indexterm-anchor"></a>privilege of <a id="d36752e267" class="indexterm-anchor"></a><code class="codeph">CREATETAB</code><a id="d36752e273" class="indexterm-anchor"></a>, for example:
                                 </p><pre class="oac_no_warn" dir="ltr">GRANT CREATETAB ON DATABASE <span class="italic">database</span> TO <span class="italic">userid</span>
</pre></li>
                           </ul>
                           <p>Optionally, you can choose manual binding of the DRDA Gateway packages. See <a href="config-drda-server.html#GUID-CC59E22C-E2BF-453C-8F28-E321DC093F46">Manual Binding of DRDA Gateway Packages</a> for instruction on how to manually bind packages for DB2 UDB for z/OS.
                           </p>
                           <p>Choose a user ID that will own the packages and ensure that this user ID is defined to both DB2 and OS/390 (MVS). </p>
                           <p>The user ID must be granted <code class="codeph">SELECT</code> privilege on the table <code class="codeph">SYSIBM.SYSPACKSTMT</code>.
                           </p>
                        </li>
                        <li>
                           <p>Define the recovery user ID</p>
                           <p>During gateway configuration, the <a id="d36752e309" class="indexterm-anchor"></a>recovery user ID and password are specified in the gateway initialization file using the <a id="d36752e314" class="indexterm-anchor"></a><a id="d36752e320" class="indexterm-anchor"></a><code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code> and      <a id="d36752e327" class="indexterm-anchor"></a><a id="d36752e333" class="indexterm-anchor"></a><code class="codeph">HS_FDS_RECOVERY_PWD</code> parameters. If a distributed transaction fails, then the recovery process connects to the <a id="d36752e341" class="indexterm-anchor"></a>remote database using the user&nbsp;ID and password that are defined in these parameters. This user&nbsp;ID must have execute privileges on the packages and must be defined in the DRDA database. If the user&nbsp;ID is not specified in <a id="d36752e348" class="indexterm-anchor"></a><code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code>, then the gateway attempts to connect to a user&nbsp;ID of <a id="d36752e355" class="indexterm-anchor"></a><code class="codeph">RECOVER</code> when a distributed transaction is in doubt.
                           </p>
                           <p>Determine the user ID and password that you will use for recovery.</p>
                           <p>The <code class="codeph">HS_TRANSACTION_LOG</code> table must be created under the same schema as the recovery user.
                           </p>
                           <p>The recovery user ID must be granted <code class="codeph">SELECT</code> privilege on the table <code class="codeph">SYSIBM.SYSPACKSTMT</code>.
                           </p>
                        </li>
                        <li>
                           <p>Determine DRDA location name for DB2 instance</p>
                           <p>The DRDA location name is required as a gateway parameter. To determine the location name, run the following SQL query from a DB2 SPUFI session:</p><pre class="oac_no_warn" dir="ltr">SELECT CURRENT SERVER FROM <span class="italic">any_table</span> 
</pre><p>where<span class="italic"><code class="codeph"> any_table </code></span>is a valid table with one or more rows. 
                           </p>
                           <p>If the value returned by this query is blank or null, then the DRDA location name has not been established. Contact the system administrator to arrange to set a location name for the instance. </p>
                        </li>
                        <li>
                           <p>Configure DB2 Distributed Data Facility for Gateway</p>
                           <p><a id="d36752e399" class="indexterm-anchor"></a><a id="d36752e403" class="indexterm-anchor"></a><a id="d36752e407" class="indexterm-anchor"></a>DB2 Distributed Data Facility (DDF) is the component of DB2 that manages all distributed database operations, both DRDA and non-DRDA. 
                           </p>
                           <p>If your site uses DB2 <a id="d36752e414" class="indexterm-anchor"></a>distributed operations, then DDF is probably operational on the DB2 instance that you plan to access through the gateway. If DDF is not operational, then you must configure it and start it as described in the appropriate DB2 documentation. 
                           </p>
                           <p>Even if DDF is operational on the DB2 instance, it might be necessary to make changes to the DDF <a id="d36752e421" class="indexterm-anchor"></a>Communication Database (CDB) tables to specify the authorization conduct of DRDA sessions from the gateway. This can be done by properly authorized users with a utility such as the <a id="d36752e424" class="indexterm-anchor"></a>DB2&nbsp;SPUFI utility. If you make changes to CDB tables, then you must stop and restart DDF for the changes to take effect. Refer to <a href="drda-gateway-security-consideration.html#GUID-19E4856D-3FD0-4C5F-8A21-B81038C87D59"> Security Considerations</a>, for additional CDB tables and security information.
                           </p>
                        </li>
                        <li>
                           <p>Optional step: Install Oracle Date Exit in DB2 on z/OS</p>
                           <p>Oracle provides a DB2 Date Exit which allows customers to specify date strings using Oracle's native syntax.  Installing the exit requires uploading the assembler source and JCL, customizing the JCL, and running the jobs to assemble and install the date exit. Perform the following steps to install Oracle Date Exit.</p>
                           <ol type="a">
                              <li>
                                 <p>Allocate a Partitioned DataSet using the parameters <code class="codeph">DSORG=PO</code>, <code class="codeph">RECFM=FB</code>, <code class="codeph">LRECL=80,</code> and <code class="codeph">BLKSIZE=6160</code>. For example,
                                 </p><pre class="oac_no_warn" dir="ltr">  userid.SRCLIB
</pre></li>
                              <li>
                                 <p>FTP the following files from <code class="codeph">$ORACLE_HOME/dg4db2/admin</code> to the previously allocated PDS in ASCII mode as the following PDS members:
                                 </p><pre class="oac_no_warn" dir="ltr">  dg4db2_zos_dta.asm  -&gt;  DSNXVDTA
  dg4db2_zos_dta.jcl  -&gt;  ORAXVDTA
  dg4db2_zos_dtx.asm  -&gt;  DSNXVDTX
  dg4db2_zos_dtx.jcl  -&gt;  ORAXVDTX
</pre></li>
                              <li>
                                 <p>Edit the <code class="codeph">ORA* JCL</code> and follow the instructions to update the JCL. Once updated, submit the JCL to assemble, link, and install the exit.
                                 </p>
                              </li>
                           </ol>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OTGIS1072"></a><div class="props_rev_3"><a id="GUID-11C40E3E-E380-4AC7-82E6-F73F80A3A345" name="GUID-11C40E3E-E380-4AC7-82E6-F73F80A3A345"></a><h3 id="OTGIS-GUID-11C40E3E-E380-4AC7-82E6-F73F80A3A345" class="sect3">Configuring the DRDA Server for DB2 UDB for iSeries</h3>
               <div>
                  <div class="section">
                     <p>Experience with DB2 UDB for iSeries and AS/400 is required to perform the following steps:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Define the user ID that owns the package</span><div>
                           <p>During the first gateway usage for a particular DRDA server, Oracle supplied packages will be automatically bound to the DRDA server.  The user ID and password that are used (either implied as the current Oracle user or explicitly defined in the<code class="codeph"> CREATE DATABASE LINK</code> command) must have proper authority on the DRDA server to create packages. The following are minimum authorities needed by this user: 
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use authority on the <code class="codeph">CRTSQLPKG</code> command:
                                 </p>
                              </li>
                              <li>
                                 <p>Change authority on the library in which the packages will be created</p>
                              </li>
                           </ul>
                           <p>Choose a user ID now that will own the packages and ensure that this user ID is defined in DB2 UDB for iSeries and AS/400.</p>
                           <p>The user ID must be granted <code class="codeph">SELECT</code> privilege on the table <code class="codeph">QSYS2.SYSPACKAGE</code>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Define the recovery user ID</span><div>
                           <p>During gateway configuration, the <a id="d36752e557" class="indexterm-anchor"></a>recovery user&nbsp;ID and password are specified in the gateway initialization file using the <a id="d36752e562" class="indexterm-anchor"></a><a id="d36752e568" class="indexterm-anchor"></a><code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code> and <a id="d36752e575" class="indexterm-anchor"></a><a id="d36752e581" class="indexterm-anchor"></a><code class="codeph">HS_FDS_RECOVERY_PWD</code> parameters. If a distributed transaction fails, then the recovery process connects to the <a id="d36752e589" class="indexterm-anchor"></a>remote database using the user&nbsp;ID and password that are defined in these parameters. This user&nbsp;ID must have execute privileges on the packages and must be defined to the DRDA database. If the user&nbsp;ID is not specified in <a id="d36752e596" class="indexterm-anchor"></a><code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code>, then the gateway attempts to connect to a user&nbsp;ID of <a id="d36752e603" class="indexterm-anchor"></a><code class="codeph">RECOVER</code> when a distributed transaction is in doubt.
                           </p>
                           <p>Determine the user&nbsp;ID and password that you will use for recovery. </p>
                           <p>The <code class="codeph">HS_TRANSACTION_LOG</code> table must be created under the same schema as the recovery user.
                           </p>
                           <p>The recovery user ID must be granted <code class="codeph">SELECT</code> privilege on the table <code class="codeph">QSYS2.SYSPACKAGE</code>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Determine DRDA location name for DB2 UDB for iSeries instance</span><div>
                           <p>The DRDA location name is required as a gateway parameter. To determine the location name, run the following SQL query from a STRSQL session. If SQL is unavailable on the system, then use the <a id="d36752e631" class="indexterm-anchor"></a><a id="d36752e633" class="indexterm-anchor"></a>AS/400 command <code class="codeph">DSPRDBDIRE</code> to identify your <code class="codeph">LOCAL</code> DRDA Server.
                           </p><pre class="oac_no_warn" dir="ltr">SELECT CURRENT SERVER FROM <span class="italic">any_table</span>
 </pre><p>where<span class="italic"><code class="codeph"> any_table </code></span>is a valid table with one or more rows. 
                           </p>
                           <p>If the value returned by this query is blank or null, then the DRDA location name has not been established. Contact the system administrator to arrange to set a location name for the instance. </p>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="OTGIS1073"></a><div class="props_rev_3"><a id="GUID-65459B0F-6B03-409C-8BC5-C4F4870E9A42" name="GUID-65459B0F-6B03-409C-8BC5-C4F4870E9A42"></a><h3 id="OTGIS-GUID-65459B0F-6B03-409C-8BC5-C4F4870E9A42" class="sect3">Configuring the DRDA Server for DB2 UDB for Linux, Unix, and Windows</h3>
               <div>
                  <div class="section">
                     <p>Experience with <a id="d36752e709" class="indexterm-anchor"></a>DB2 UDB for Linux, Unix, and Windows, configuring the communication subsystem of DB2 UDB for Linux, Unix, and Windows, and the host System Administration tools is required to perform the following steps:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Define the user ID that owns the package</span><div>
                           <p>During first gateway usage for a particular DRDA server,  Oracle supplied packages will be automatically bound to the DRDA server. The user ID and password that are used  (either implied as the current Oracle user or explicitly defined in the <code class="codeph">CREATE DATABASE LINK</code> command) must have proper authority on the DRDA Server to create the packages.   The followings are minimum authorities needed by this user: 
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Package <a id="d36752e728" class="indexterm-anchor"></a>privileges of <a id="d36752e735" class="indexterm-anchor"></a><code class="codeph">BIND</code><a id="d36752e741" class="indexterm-anchor"></a> and <a id="d36752e748" class="indexterm-anchor"></a><code class="codeph">EXECUTE</code><a id="d36752e754" class="indexterm-anchor"></a>, for example:
                                 </p><pre class="oac_no_warn" dir="ltr">GRANT BIND    ON PACKAGE oraclegtw.* TO <span class="italic">userid</span>
GRANT EXECUTE ON PACKAGE oraclegtw.* TO PUBLIC
</pre></li>
                              <li>
                                 <p>Schema <a id="d36752e769" class="indexterm-anchor"></a>privilege of <a id="d36752e774" class="indexterm-anchor"></a><code class="codeph">CREATE</code><code class="codeph">IN</code><a id="d36752e782" class="indexterm-anchor"></a>, for example:
                                 </p><pre class="oac_no_warn" dir="ltr">GRANT CREATEIN ON SCHEMA otgdb2 TO userid
GRANT CREATEIN ON SCHEMA oraclegtw TO userid
</pre></li>
                              <li>
                                 <p>Database authorities of <code class="codeph">CONNECT</code>, <code class="codeph">BINDADD</code>, and <code class="codeph">CREATETAB</code>, for example:
                                 </p><pre class="oac_no_warn" dir="ltr">GRANT CONNECT   ON DATABASE TO userid
GRANT BINDADD   ON DATABASE TO userid
GRANT CREATETAB ON DATABASE TO userid
</pre></li>
                           </ul>
                           <p>Optionally, you can choose manual binding of the DRDA Gateway packages. See <a href="config-drda-server.html#GUID-CC59E22C-E2BF-453C-8F28-E321DC093F46">Manual Binding of DRDA Gateway Packages</a> for instruction on how to manually bind packages for DB2 UDB for Linux, Unix, and Windows.
                           </p>
                           <p>Choose a user&nbsp;ID that will own the packages and ensure that this user&nbsp;ID is defined in both the DB2 instance ID and <a id="d36752e813" class="indexterm-anchor"></a>the operating system.
                           </p>
                           <p>The user ID must be granted <code class="codeph">SELECT</code> privilege on the table <code class="codeph">SYSIBM.SYSPLAN</code>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Define the recovery user ID</span><div>
                           <p>During gateway configuration, the <a id="d36752e832" class="indexterm-anchor"></a>recovery user&nbsp;ID and password are specified in the gateway initialization file using the <a id="d36752e837" class="indexterm-anchor"></a><a id="d36752e843" class="indexterm-anchor"></a><code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code> and               <a id="d36752e850" class="indexterm-anchor"></a><a id="d36752e856" class="indexterm-anchor"></a><code class="codeph">HS_FDS_RECOVERY_PWD</code> parameters. If a distributed transaction fails, then the recovery process connects to the <a id="d36752e864" class="indexterm-anchor"></a>remote database using the user&nbsp;ID and password that are defined in these parameters. This user&nbsp;ID must have execute privileges on the packages and must be defined to the DRDA database. If the user&nbsp;ID is not specified in <a id="d36752e871" class="indexterm-anchor"></a><code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code>, then the gateway attempts to connect to a user&nbsp;ID of <a id="d36752e878" class="indexterm-anchor"></a><code class="codeph">RECOVER</code> when a distributed transaction is in doubt.
                           </p>
                           <p>Determine the user&nbsp;ID and password that you will use for recovery.</p>
                           <p>The <code class="codeph">HS_TRANSACTION_LOG</code> table must be created under the same schema as the recovery user.
                           </p>
                           <p>The recovery user ID must be granted <code class="codeph">SELECT</code> privilege on the table <code class="codeph">SYSIBM.SYSPLAN</code>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Determine DRDA location name for DB2 UDB for Linux, Unix, and Windows instance</span><div>
                           <p>The DRDA location name is required as a gateway parameter. To determine the location name, run the following SQL query from a DB2 CLI session:</p><pre class="oac_no_warn" dir="ltr">SELECT CURRENT SERVER FROM <span class="italic">any_table</span>
</pre><p>where<span class="italic"><code class="codeph"> any_table </code></span>is a valid table with one or more rows. 
                           </p>
                           <p>If the value returned by this query is blank or null, then the DRDA location name has not been established. Contact your system administrator to set a location name for the instance. </p>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="OTGIS1236"></a><div class="props_rev_3"><a id="GUID-CC59E22C-E2BF-453C-8F28-E321DC093F46" name="GUID-CC59E22C-E2BF-453C-8F28-E321DC093F46"></a><h3 id="OTGIS-GUID-CC59E22C-E2BF-453C-8F28-E321DC093F46" class="sect3">Manual Binding of DRDA Gateway Packages</h3>
               <div>
                  <p>The gateway uses several DB2 packages, which it normally uploads and binds during the first time the gateway connects to a DB2 instance. In some customer environments, the connecting userid may not have the necessary privileges to perform the binding, or some customers may prefer to manually bind the packages rather than allow the gateway to do the binding.</p>
                  <p>In such cases, Oracle provides a predefined set of packages for manual binding.  These packages come with several restrictions that must be observed by setting specific gateway initialization parameters to set values otherwise, the gateway will attempt to rebind the package automatically.</p>
                  <p>This section contains the following sub-sections:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="config-drda-server.html#GUID-A983E84C-CEA4-4F0C-BF71-AB9D50A69F0F">Manually Binding of Packages for DB2 UDB for z/OS</a></p>
                     </li>
                     <li>
                        <p><a href="config-drda-server.html#GUID-4BBEF7E0-013C-4B1D-A3B8-61F375EC7B32">Manually Binding of Packages for DB2 UDB for Linux_ Unix_ and Windows</a></p>
                     </li>
                  </ul>
               </div><a id="OTGIS1237"></a><div class="props_rev_3"><a id="GUID-A983E84C-CEA4-4F0C-BF71-AB9D50A69F0F" name="GUID-A983E84C-CEA4-4F0C-BF71-AB9D50A69F0F"></a><h4 id="OTGIS-GUID-A983E84C-CEA4-4F0C-BF71-AB9D50A69F0F" class="sect4">Manually Binding of Packages for DB2 UDB for z/OS</h4>
                  <div>
                     <div class="section">
                        <p>Perform the following steps to manually bind packages for DB2 UDB for z/OS:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Allocate a sequential dataset on z/OS using the parameters <code class="codeph">DSORG=PS</code>, <code class="codeph">RECFM=FB</code>, <code class="codeph">LRECL=80</code>, and <code class="codeph">BLKSIZE=3120</code>. For example,</span><div><pre class="oac_no_warn" dir="ltr">userid.DBRMFILE.XMIT
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Allocate a Partitioned DataSet using the parameters <code class="codeph">DSORG=PO</code>, <code class="codeph">RECFM=FB</code>, <code class="codeph">LRECL=80</code>, and <code class="codeph">BLKSIZE=6160</code>. for example, </span><div><pre class="oac_no_warn" dir="ltr">userid.TG4DRDA.CNTL
</pre></div>
                        </li>
                        <li class="stepexpand"><span>FTP the following file to the previously allocated sequential dataset in <code class="codeph">BINARY</code> mode:</span><div><pre class="oac_no_warn" dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_zos_dbrm.xmit
</pre><p>Use the <code class="codeph">PUT</code> command to replace the sequential dataset contents.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>FTP the following file to the previously allocated PDS in ASCII mode:</span><div><pre class="oac_no_warn" dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_zos_bind.jcl
</pre><p>Use the <code class="codeph">PUT</code> command to place the file into the PDS as member name <code class="codeph">BIND</code>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Use the TSO command option of ISPF (option 6) to issue the <code class="codeph">RECEIVE</code> command:</span><div><pre class="oac_no_warn" dir="ltr">RECEIVE INDS('userid.DBRMFILE.XMIT')
</pre><p>Specify DA(<code class="codeph">userid.DDODBC.DBRMLIB</code>) as the parameters to the <code class="codeph">RECEIVE</code> command.  This will unpack the xmit file and create the specified PDS name.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Edit the <code class="codeph">BIND JCL</code> (<code class="codeph">userid.TG4DRDA.CNTL(BIND)</code>)and follow the instructions to update the <code class="codeph">JCL</code>.  Once updated, submit the <code class="codeph">JCL</code> to perform the actual binding of the packages and granting of execution privileges on the packages.</span></li>
                     </ol>
                     <div class="section">
                        <p>To use these packages with the gateway, please set the following init parameters in the gateway initialization file:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">HS_OPEN_CURSORS=200</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">HS_FDS_PACKAGE_COLLID=NULLID</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1238"></a><div class="props_rev_3"><a id="GUID-4BBEF7E0-013C-4B1D-A3B8-61F375EC7B32" name="GUID-4BBEF7E0-013C-4B1D-A3B8-61F375EC7B32"></a><h4 id="OTGIS-GUID-4BBEF7E0-013C-4B1D-A3B8-61F375EC7B32" class="sect4">Manually Binding of Packages for DB2 UDB for Linux, Unix, and Windows</h4>
                  <div>
                     <div class="section">
                        <p>Perform the following steps to manually bind packages for DB2 UDB for Linux, Unix, and Windows:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Copy the following files to the host running the DB2 instance from the <code class="codeph">$ORACLE_HOME/dg4db2/admin</code> directoy:</span><div><pre class="oac_no_warn" dir="ltr"> DDOC510A.bnd
 DDOC510B.bnd
 DDOC510C.bnd
 DDON510A.bnd
 DDON510B.bnd
 DDON510C.bnd
 DDOR510A.bnd
 DDOR510B.bnd
 DDOR510C.bnd
 DDOS510A.bnd
 DDOS510B.bnd
 DDOS510C.bnd
 DDOU510A.bnd
 DDOU510B.bnd
 DDOU510C.bnd
 dg4db2_luw_pkglist.lst
</pre><p>If copying via FTP, then files ending in <code class="codeph">.bnd</code> should be transfered in BINARY mode and files ending in <code class="codeph">.lst</code> should be transfered in ASCII mode.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the DB2 instance and issue the bind command. For example,</span><div><pre class="oac_no_warn" dir="ltr">$ db2 'connect to &lt;database_name&gt; user &lt;userid&gt; using &lt;password&gt;'
$ db2 'bind @dg4db2_luw_pkglist.lst grant public'
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>To use these packages with the gateway, set the following initialization parameters in the gateway initialization file:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">HS_OPEN_CURSORS=200</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">HS_FDS_PACKAGE_COLLID=NULLID</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
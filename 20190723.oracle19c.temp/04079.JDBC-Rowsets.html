<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>JDBC RowSets</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="JDBC Developer's Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="JDBC Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00">
      <meta name="dcterms.title" content="JDBC Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96471-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="resultset.html" title="Previous" type="text/html">
      <link rel="next" href="globalization-support.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="resultset.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="globalization-support.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="data-access-and-manipulation.html" property="item" typeof="WebPage"><span property="name"> Data Access and Manipulation</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> JDBC RowSets</li>
            </ol>
            <a id="GUID-AF2DA648-73E2-4D62-9EAF-E273BD88FA89" name="GUID-AF2DA648-73E2-4D62-9EAF-E273BD88FA89"></a><a id="JJDBC28630"></a>
            
            <h2 id="JJDBC-GUID-AF2DA648-73E2-4D62-9EAF-E273BD88FA89" class="sect2"><span class="enumeration_chapter">18 </span> JDBC RowSets
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter contains the following sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="JDBC-Rowsets.html#GUID-55A0163A-8488-46A2-8CBC-52410CC12F17">Overview of JDBC RowSets</a></p>
                  </li>
                  <li>
                     <p><a href="JDBC-Rowsets.html#GUID-4B46C980-D32F-474D-8742-52A238CC1D3B">About CachedRowSet</a></p>
                  </li>
                  <li>
                     <p><a href="JDBC-Rowsets.html#GUID-996D3872-FA2B-4BA5-99BA-62D5FB235583">About JdbcRowSet</a></p>
                  </li>
                  <li>
                     <p><a href="JDBC-Rowsets.html#GUID-862F56C6-7874-4A18-8933-F487538D847D">About WebRowSet</a></p>
                  </li>
                  <li>
                     <p><a href="JDBC-Rowsets.html#GUID-8AA0A89C-3CC2-4872-8EFD-3A390E712A4D">About FilteredRowSet</a></p>
                  </li>
                  <li>
                     <p><a href="JDBC-Rowsets.html#GUID-60685532-AA0E-4692-A369-5F9D79AA9A72">About JoinRowSet</a></p>
                  </li>
               </ul>
            </div><a id="JJDBC28631"></a><div class="props_rev_3"><a id="GUID-55A0163A-8488-46A2-8CBC-52410CC12F17" name="GUID-55A0163A-8488-46A2-8CBC-52410CC12F17"></a><h3 id="JJDBC-GUID-55A0163A-8488-46A2-8CBC-52410CC12F17" class="sect3"><span class="enumeration_section">18.1 </span>Overview of JDBC RowSets
               </h3>
               <div>
                  <p>A <a id="d61846e77" class="indexterm-anchor"></a>RowSet is an object that encapsulates a set of rows from either java Database Connectivity (JDBC) result sets or tabular data sources. RowSets support component-based development models like JavaBeans, with a standard set of properties and an event notification mechanism.
                  </p>
                  <p>RowSets were introduced in JDBC 2.0 through the optional packages. However, the implementation of RowSets was standardized in the JDBC RowSet Implementations Specification (JSR-114), which is available as non-optional package since Java Platform, Standard Edition (Java SE) 5.0. Java SE 6.0 RowSets contain more APIs supporting features like RowId, National Language Charactersets, and so on. The Java SE Javadocs provide information about the standard interfaces and base classes for JDBC RowSet implementations.</p>
                  <p>The JSR-114 specification includes implementation details for five types of RowSet:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">CachedRowSet</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">JdbcRowSet</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">WebRowSet</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">FilteredRowSet</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">JoinRowSet</code></p>
                     </li>
                  </ul>
                  <p>Oracle JDBC supports all five types of RowSets through the interfaces and classes present in the <code class="codeph">oracle.jdbc.rowset</code> package. Since Oracle Database 11<span class="italic">g</span> Release 1, RowSets support has been added in the server-side drivers. Therefore, starting from Oracle Database 11<span class="italic">g</span> Release 1, RowSets support is uniform across all Oracle JDBC driver types. The standard Oracle JDBC Java Archive (JAR) files, for example, <code class="codeph">ojdbc6.jar</code> and <code class="codeph">ojdbc7.jar</code> contain the <code class="codeph">oracle.jdbc.rowset</code> package.
                  </p>
                  <div class="infoboxnote" id="GUID-55A0163A-8488-46A2-8CBC-52410CC12F17__GUID-10E0462F-3754-42DB-8F10-18F07F663999">
                     <p class="notep1">Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The other JAR files with different file suffix names, for example, <code class="codeph">ojdbc6_g.jar</code>, <code class="codeph">ojdbc6dms.jar</code>, and so on also contain the <code class="codeph">oracle.jdbc.rowset</code> package.
                           </p>
                        </li>
                        <li>
                           <p>In Oracle Database 10<span class="italic">g</span> release 2, the implementation classes were packaged in the <code class="codeph">ojdbc14.jar</code> file.
                           </p>
                        </li>
                        <li>
                           <p>Prior to Oracle Database 10<span class="italic">g</span> release 2, the implementation classes were packaged in the <code class="codeph">ocrs12.jar</code> file.
                           </p>
                        </li>
                        <li>
                           <p>Prior to Oracle Database 11<span class="italic">g</span> Release 1, RowSets support was not available in the server-side drivers.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnote" id="GUID-55A0163A-8488-46A2-8CBC-52410CC12F17__GUID-CA7E4707-EB1E-482B-9228-9DBCCF29AD6E">
                     <p class="notep1">Note:</p>
                     <p>In Oracle Database 10g release 2 (10.2), this package is included in the standard Oracle JDBC JAR files: <code class="codeph">classes12.jar</code>, <code class="codeph">ojdbc5.jar</code>, and <code class="codeph">ojdbc6.jar</code>. Prior to Oracle Database 10<span class="italic">g</span> release 2 (10.2), the row set implementation classes were packaged in the <code class="codeph">ocrs12.jar</code> file.
                     </p>
                  </div>
                  <p>To use the Oracle RowSet implementations, you need to import either the entire <code class="codeph">oracle.jdbc.rowset</code> package or specific classes and interfaces from the package for the required RowSet type. For client-side usage, you also need to include the standard Oracle JAR files like <code class="codeph">ojdbc6.jar</code> or <code class="codeph">ojdbc7.jar</code> in the <code class="codeph">CLASSPATH</code> environment variable. 
                  </p>
                  <p>This section covers the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="JDBC-Rowsets.html#GUID-BB79FB0E-0AA4-4302-BD79-CCE801102102">RowSet Properties</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-Rowsets.html#GUID-C368A846-CA8A-4CFF-B374-0C8909F29149">Events and Event Listeners</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-Rowsets.html#GUID-FB2499B5-25AF-4DD1-A289-51431A7EAF40">Command Parameters and Command Execution</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-Rowsets.html#GUID-A67BF901-60C7-4420-B01D-3E05A50246FC">About Traversing RowSets</a></p>
                     </li>
                  </ul>
               </div><a id="JJDBC28632"></a><div class="props_rev_3"><a id="GUID-BB79FB0E-0AA4-4302-BD79-CCE801102102" name="GUID-BB79FB0E-0AA4-4302-BD79-CCE801102102"></a><h4 id="JJDBC-GUID-BB79FB0E-0AA4-4302-BD79-CCE801102102" class="sect4"><span class="enumeration_section">18.1.1 </span>RowSet Properties
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">javax.sql.RowSet</code> interface provides a set of JavaBeans properties that can be altered to access the data in the data source through a single interface. Example of properties are connection string, user name, password, type of connection, and the query string.
                        </p>
                        <div class="infoboxnotealso" id="GUID-BB79FB0E-0AA4-4302-BD79-CCE801102102__GUID-87239389-5134-47CA-AE05-153BBFED4106">
                           <p class="notep1">See Also:</p>
                           <p>The Java 2 Platform, Standard Edition (J2SE) Javadoc for a complete list of properties and property descriptions at <a href="http://docs.oracle.com/javase/1.5.0/docs/api/javax/sql/RowSet.html" target="_blank"><code class="codeph">http://docs.oracle.com/javase/1.5.0/docs/api/javax/sql/RowSet.html</code></a></p>
                        </div>
                        <p>The interface provides standard accessor methods for setting and retrieving the property values. The following code illustrates setting some of the <code class="codeph">RowSet</code> properties:
                        </p><pre class="oac_no_warn" dir="ltr">...
rowset.setUrl("jdbc:oracle:oci:@");
rowset.setUsername("HR");
rowset.setPassword("hr");
rowset.setCommand("SELECT employee_id, first_name, last_name, salary FROM employees");
...
</pre><p>In this example, the URL, user name, password, and SQL query are set as the <code class="codeph">RowSet</code> properties to retrieve the employee number, employee name, and salary of all the employees into the <code class="codeph">RowSet</code> object.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28633"></a><div class="props_rev_3"><a id="GUID-C368A846-CA8A-4CFF-B374-0C8909F29149" name="GUID-C368A846-CA8A-4CFF-B374-0C8909F29149"></a><h4 id="JJDBC-GUID-C368A846-CA8A-4CFF-B374-0C8909F29149" class="sect4"><span class="enumeration_section">18.1.2 </span>Events and Event Listeners
                  </h4>
                  <div>
                     <p>RowSets support JavaBeans events. The following types of events are supported by the <code class="codeph">RowSet</code> interface:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">cursorMoved</code></p>
                           <p>This event is generated whenever there is a cursor movement. For example, when the <code class="codeph">next</code> or <code class="codeph">previous</code> method is called.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">rowChanged</code></p>
                           <p>This event is generated when a row is inserted, updated, or deleted from the RowSet.</p>
                        </li>
                        <li>
                           <p><code class="codeph">rowSetChanged</code></p>
                           <p>This event is generated when the whole RowSet is created or changed. For example, when the <code class="codeph">execute</code> method is called.
                           </p>
                        </li>
                     </ul>
                     <p>An application component can implement a RowSet listener to listen to these RowSet events and perform desired operations when the event occurs. Application components, which are interested in these events, must implement the standard <code class="codeph">javax.sql.RowSetListener</code> interface and register such listener objects with a <code class="codeph">RowSet</code> object. A listener can be registered using the <code class="codeph">RowSet.addRowSetListener</code> method and unregistered using the <code class="codeph">RowSet.removeRowSetListener</code> method. Multiple listeners can be registered with the same <code class="codeph">RowSet</code> object.
                     </p>
                     <p>The following code illustrates the registration of a RowSet listener:</p><pre class="oac_no_warn" dir="ltr"> ...
 MyRowSetListener rowsetListener = new MyRowSetListener ();
 // adding a rowset listener
 rowset.addRowSetListener (rowsetListener);
 ...
</pre><p>The following code illustrates a listener implementation:</p><pre class="oac_no_warn" dir="ltr"> public class MyRowSetListener implements RowSetListener
  {
    public void cursorMoved(RowSetEvent event)
    {
      // action on cursor movement
    }
 
    public void rowChanged(RowSetEvent event)
    {
      // action on change of row
    }
 
    public void rowSetChanged(RowSetEvent event)
    {
      // action on changing of rowset
    }
  }// end of class MyRowSetListener
</pre><p>Applications that need to handle only selected events can implement only the required event handling methods by using the <code class="codeph">oracle.jdbc.rowset.OracleRowSetListenerAdapter</code> class, which is an abstract class with empty implementation for all the event handling methods. In the following code, only the <code class="codeph">rowSetChanged</code> event is handled, while the remaining events are not handled by the application:
                     </p><pre class="oac_no_warn" dir="ltr"> ...
 rowset.addRowSetListener(new oracle.jdbc.rowset.OracleRowSetListenerAdapter ()
    {
      public void rowSetChanged(RowSetEvent event)
      {
        // your action for rowSetChanged
      }
    }
  );
 ...
</pre></div>
               </div><a id="JJDBC28634"></a><div class="props_rev_3"><a id="GUID-FB2499B5-25AF-4DD1-A289-51431A7EAF40" name="GUID-FB2499B5-25AF-4DD1-A289-51431A7EAF40"></a><h4 id="JJDBC-GUID-FB2499B5-25AF-4DD1-A289-51431A7EAF40" class="sect4"><span class="enumeration_section">18.1.3 </span>Command Parameters and Command Execution
                  </h4>
                  <div>
                     <p>The <code class="codeph">command</code> property of a <code class="codeph">RowSet</code> object typically represents a SQL query string, which when processed would populate the <code class="codeph">RowSet</code> object with actual data. Like in regular JDBC processing, this query string can take input or bind parameters. The <code class="codeph">javax.sql.RowSet</code> interface also provides methods for setting input parameters to this SQL query. After the required input parameters are set, the SQL query can be processed to populate the <code class="codeph">RowSet</code> object with data from the underlying data source. The following code illustrates this simple sequence:
                     </p><pre class="oac_no_warn" dir="ltr"> ...
  rowset.setCommand("SELECT first_name, last_name, salary FROM employees WHERE employee_id = ?");
  // setting the employee number input parameter for employee named "Douglas"
  rowset.setInt(1, 199);
  rowset.execute();
  ...
</pre><p>In the preceding example, the employee number 199 is set as the input or bind parameter for the SQL query specified in the <code class="codeph">command</code> property of the <code class="codeph">RowSet</code> object. When the SQL query is processed, the <code class="codeph">RowSet</code> object is filled with the employee name and salary information of the employee whose employee number is 199.
                     </p>
                  </div>
               </div><a id="JJDBC28635"></a><div class="props_rev_3"><a id="GUID-A67BF901-60C7-4420-B01D-3E05A50246FC" name="GUID-A67BF901-60C7-4420-B01D-3E05A50246FC"></a><h4 id="JJDBC-GUID-A67BF901-60C7-4420-B01D-3E05A50246FC" class="sect4"><span class="enumeration_section">18.1.4 </span>About Traversing RowSets
                  </h4>
                  <div>
                     <p>The <code class="codeph">javax.sql.RowSet</code> interface extends the <code class="codeph">java.sql.ResultSet</code> interface. The <code class="codeph">RowSet</code> interface, therefore, provides cursor movement and positioning methods, which are inherited from the <code class="codeph">ResultSet</code> interface, for traversing through data in a <code class="codeph">RowSet</code> object. Some of the inherited methods are <code class="codeph">absolute</code>, <code class="codeph">beforeFirst</code>, <code class="codeph">afterLast</code>, <code class="codeph">next</code>, and <code class="codeph">previous</code>.
                     </p>
                     <p>The <code class="codeph">RowSet</code> interface can be used just like a <code class="codeph">ResultSet</code> interface for retrieving and updating data. The <code class="codeph">RowSet</code> interface provides an optional way to implement a scrollable and updatable result set. All the fields and methods provided by the <code class="codeph">ResultSet</code> interface are implemented in <code class="codeph">RowSet</code>.
                     </p>
                     <div class="infoboxnote" id="GUID-A67BF901-60C7-4420-B01D-3E05A50246FC__GUID-51B4A56C-FDC1-43E9-B8C0-9C6D70E5AAF5">
                        <p class="notep1">Note:</p>
                        <p>The Oracle implementation of <code class="codeph">ResultSet</code> provides the scrollable and updatable properties of the <code class="codeph">java.sql.ResultSet</code> interface.
                        </p>
                     </div>
                     <p>The following code illustrates how to scroll through a RowSet:</p><pre class="oac_no_warn" dir="ltr">/**
 *  Scrolling forward, and printing the empno in 
 *  the order in which it was fetched.
 */
...
rowset.setCommand("SELECT empno, ename, sal FROM emp");
rowset.execute();
...
// going to the first row of the rowset
rowset.beforeFirst ();
while (rowset.next ())
  System.out.println ("empno: " +rowset.getInt (1));
</pre><p>In the preceding code, the cursor position is initialized to the position before the first row of the RowSet by the <code class="codeph">beforeFirst</code> method. The rows are retrieved in forward direction using the <code class="codeph">next</code> method.
                     </p>
                     <p>The following code illustrates how to scroll through a RowSet in the reverse direction:</p><pre class="oac_no_warn" dir="ltr">/**
 *  Scrolling backward, and printing the empno in 
 *  the reverse order as it was fetched.
 */
//going to the last row of the rowset
rowset.afterLast ();
while (rowset.previous ())
  System.out.println ("empno: " +rowset.getInt (1));
</pre><p>In the preceding code, the cursor position is initialized to the position after the last row of the <code class="codeph">RowSet</code>. The rows are retrieved in reverse direction using the <code class="codeph">previous</code> method of <code class="codeph">RowSet</code>.
                     </p>
                     <p>Inserting, updating, and deleting rows are supported by the Row Set feature as they are in the Result Set feature. In order to make the Row Set updatable, you must call the <code class="codeph">setReadOnly(false)</code> and <code class="codeph">acceptChanges</code> methods.
                     </p>
                     <p>The following code illustrates the insertion of a row at the fifth position of a Row Set:</p><pre class="oac_no_warn" dir="ltr">...
/**
  * Make rowset updatable
  */
rowset.setReadOnly (false); 
/**
 * Inserting a row in the 5th position of the rowset.
 */
// moving the cursor to the 5th position in the rowset
if (rowset.absolute(5))
{
  rowset.moveToInsertRow ();
  rowset.updateInt (1, 193);
  rowset.updateString (2, "Smith");
  rowset.updateInt (3, 7200);

  // inserting a row in the rowset
  rowset.insertRow ();

  // Synchronizing the data in RowSet with that in the database.
  rowset.acceptChanges ();
}
...
</pre><p>In the preceding code, a call to the <code class="codeph">absolute</code> method with a parameter <code class="codeph">5</code> takes the cursor to the fifth position of the RowSet and a call to the <code class="codeph">moveToInsertRow</code> method creates a place for the insertion of a new row into the RowSet. The <code class="codeph">update</code><span class="italic"><code class="codeph">XXX</code></span> methods are used to update the newly created row. When all the columns of the row are updated, the <code class="codeph">insertRow</code> is called to update the RowSet. The changes are committed through <code class="codeph">acceptChanges</code> method.
                     </p>
                  </div>
               </div>
            </div><a id="JJDBC28637"></a><a id="JJDBC28636"></a><div class="props_rev_3"><a id="GUID-4B46C980-D32F-474D-8742-52A238CC1D3B" name="GUID-4B46C980-D32F-474D-8742-52A238CC1D3B"></a><h3 id="JJDBC-GUID-4B46C980-D32F-474D-8742-52A238CC1D3B" class="sect3"><span class="enumeration_section">18.2 </span>About CachedRowSet
               </h3>
               <div>
                  <p>A CachedRowSet is a RowSet in which the rows are cached and the RowSet is disconnected, that is, it does not maintain an active connection to the database. The <code class="codeph">oracle.jdbc.rowset.OracleCachedRowSet</code> class is the Oracle implementation of CachedRowSet. It can interoperate with the standard reference implementation. The <code class="codeph">OracleCachedRowSet</code> class in the <code class="codeph">ojdbc6.jar</code> and <code class="codeph">ojdbc7.jar</code> files implements the standard JSR-114 interface <code class="codeph">javax.sql.rowset.CachedRowSet</code>.
                  </p>
                  <p>In the following code, an <code class="codeph">OracleCachedRowSet</code> object is created and the connection URL, user name, password, and the SQL query for the <code class="codeph">RowSet</code> object is set as properties. The <code class="codeph">RowSet</code> object is populated using the <code class="codeph">execute</code> method. After the <code class="codeph">execute</code> method has been processed, the <code class="codeph">RowSet</code> object can be used as a <code class="codeph">java.sql.ResultSet</code> object to retrieve, scroll, insert, delete, or update data.
                  </p><pre class="oac_no_warn" dir="ltr">...
RowSet rowset = new OracleCachedRowSet();
rowset.setUrl("jdbc:oracle:oci:@");
rowset.setUsername("HR");
rowset.setPassword("hr");
rowset.setCommand("SELECT employee_id, first_name, last_name, salary FROM employees");
rowset.execute();
while (rowset.next ())
{
  System.out.println("employee_id: " +rowset.getInt (1));
  System.out.println("first_name: " +rowset.getString (2));
  System.out.println("last_name: " +rowset.getString (3));
  System.out.println("sal: "   +rowset.getInt (4));
}
...
</pre><p>To populate a <code class="codeph">CachedRowSet</code> object with a query, complete the following steps:
                  </p>
                  <ol>
                     <li>
                        <p>Instantiate <code class="codeph">OracleCachedRowSet</code>.
                        </p>
                     </li>
                     <li>
                        <p>Set the <code class="codeph">Url</code>, which is the connection URL, <code class="codeph">Username</code>, <code class="codeph">Password</code>, and <code class="codeph">Command</code>, which is the query string, properties for the <code class="codeph">RowSet</code> object. You can also set the connection type, but it is optional.
                        </p>
                     </li>
                     <li>
                        <p>Call the <code class="codeph">execute</code> method to populate the <code class="codeph">CachedRowSet</code> object. Calling <code class="codeph">execute</code> runs the query set as a property on this RowSet.
                        </p>
                     </li>
                  </ol><pre class="oac_no_warn" dir="ltr">    OracleCachedRowSet rowset = new OracleCachedRowSet ();
    rowset.setUrl ("jdbc:oracle:oci:@");
    rowset.setUsername ("HR");
    rowset.setPassword ("hr");
    rowset.setCommand ("SELECT employee_id, first_name, last_name, salary FROM employees");
    rowset.execute ();
    </pre><p>A <code class="codeph">CachedRowSet</code> object can be populated with an existing <code class="codeph">ResultSet</code> object, using the <code class="codeph">populate</code> method. To do so, complete the following steps:
                  </p>
                  <ol>
                     <li>
                        <p>Instantiate <code class="codeph">OracleCachedRowSet</code>.
                        </p>
                     </li>
                     <li>
                        <p>Pass the already available <code class="codeph">ResultSet</code> object to the <code class="codeph">populate</code> method to populate the <code class="codeph">RowSet</code> object.
                        </p>
                     </li>
                  </ol><pre class="oac_no_warn" dir="ltr">    // Executing a query to get the ResultSet object.
    ResultSet rset = pstmt.executeQuery ();
    
    OracleCachedRowSet rowset = new OracleCachedRowSet ();
    // the obtained ResultSet object is passed to the populate method
    // to populate the data in the rowset object.
    rowset.populate (rset);
    </pre><p>In the preceding example, a <code class="codeph">ResultSet</code> object is obtained by running a query and the retrieved <code class="codeph">ResultSet</code> object is passed to the <code class="codeph">populate</code> method of the <code class="codeph">CachedRowSet</code> object to populate the contents of the result set into the CachedRowSet.
                  </p>
                  <div class="infoboxnote" id="GUID-4B46C980-D32F-474D-8742-52A238CC1D3B__GUID-2006538E-7221-4600-9D7C-4E5BA309CF12">
                     <p class="notep1">Note:</p>
                     <p>Connection properties, like transaction isolation or the concurrency mode of the result set, and the bind properties cannot be set in the case where a pre-existent <code class="codeph">ResultSet</code> object is used to populate the <code class="codeph">CachedRowSet</code> object, because the connection or result set on which the property applies would have already been created.
                     </p>
                  </div>
                  <p>The following code illustrates how an <code class="codeph">OracleCachedRowSet</code> object is serialized to a file and then retrieved:
                  </p><pre class="oac_no_warn" dir="ltr">// writing the serialized OracleCachedRowSet object
{
  FileOutputStream fileOutputStream = new FileOutputStream("emp_tab.dmp");
  ObjectOutputStream ostream = new ObjectOutputStream(fileOutputStream);
  ostream.writeObject(rowset);
  ostream.close();
  fileOutputStream.close();
}

// reading the serialized OracleCachedRowSet object
{
  FileInputStream fileInputStream = new FileInputStream("emp_tab.dmp");
  ObjectInputStream istream = new ObjectInputStream(fileInputStream);
  RowSet rowset1 = (RowSet) istream.readObject();
  istream.close();
  fileInputStream.close();
}
</pre><p>In the preceding code, a <code class="codeph">FileOutputStream</code> object is opened for an <code class="codeph">emp_tab.dmp</code> file, and the populated <code class="codeph">OracleCachedRowSet</code> object is written to the file using <code class="codeph">ObjectOutputStream</code>. The serialized <code class="codeph">OracleCachedRowSet</code> object is retrieved using the <code class="codeph">FileInputStream</code> and <code class="codeph">ObjectInputStream</code> objects.
                  </p>
                  <p><code class="codeph">OracleCachedRowSet</code> takes care of the serialization of non-serializable form of data like <code class="codeph">InputStream</code>, <code class="codeph">OutputStream</code>, binary large objects (BLOBs), and character large objects (CLOBs). <code class="codeph">OracleCachedRowSets</code> also implements metadata of its own, which could be obtained without any extra server round-trip. The following code illustrates how you can obtain metadata for the RowSet:
                  </p><pre class="oac_no_warn" dir="ltr">...
ResultSetMetaData metaData = rowset.getMetaData();
int maxCol = metaData.getColumnCount();
for (int i = 1; i &lt;= maxCol; ++i)
   System.out.println("Column (" + i +") " + metaData.getColumnName(i));
...
</pre><p>Because the <code class="codeph">OracleCachedRowSet</code> class is serializable, it can be passed across a network or between Java Virtual Machines (JVMs), as done in <a id="d61846e798" class="indexterm-anchor"></a>Remote Method Invocation (<a id="d61846e801" class="indexterm-anchor"></a>RMI). Once the <code class="codeph">OracleCachedRowSet</code> class is populated, it can move around any JVM, or any environment that does not have JDBC drivers. Committing the data in the RowSet requires the presence of JDBC drivers.
                  </p>
                  <p>The complete process of retrieving the data and populating it in the <code class="codeph">OracleCachedRowSet</code> class is performed on the server and the populated RowSet is passed on to the client using suitable architectures like RMI or <a id="d61846e812" class="indexterm-anchor"></a>Enterprise Java Beans (EJB). The client would be able to perform all the operations like retrieving, scrolling, inserting, updating, and deleting on the RowSet without any connection to the database. Whenever data is committed to the database, the <code class="codeph">acceptChanges</code> method is called, which synchronizes the data in the RowSet to that in the database. This method makes use of JDBC drivers, which require the JVM environment to contain JDBC implementation. This architecture would be suitable for systems involving a Thin client like a <a id="d61846e818" class="indexterm-anchor"></a>Personal Digital Assistant (<a id="d61846e821" class="indexterm-anchor"></a>PDA).
                  </p>
                  <p>After populating the <code class="codeph">CachedRowSet</code> object, it can be used as a <code class="codeph">ResultSet</code> object or any other object, which can be passed over the network using RMI or any other suitable architecture.
                  </p>
                  <p>Some of the other key-features of CachedRowSet are the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Cloning a RowSet</p>
                     </li>
                     <li>
                        <p>Creating a copy of a RowSet</p>
                     </li>
                     <li>
                        <p>Creating a shared copy of a RowSet</p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-4B46C980-D32F-474D-8742-52A238CC1D3B__GUID-EF6D86C0-FDD1-42FE-A4ED-D71175CD4C18">CachedRowSet Constraints</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>All the constraints that apply to an updatable result set are applicable here, except serialization, because <code class="codeph">OracleCachedRowSet</code> is serializable. The SQL query has the following constraints:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>References only a single table in the database</p>
                        </li>
                        <li>
                           <p>Contains no join operations</p>
                        </li>
                        <li>
                           <p>Selects the primary key of the table it references</p>
                        </li>
                     </ul>
                     <p>In addition, a SQL query should also satisfy the following conditions, if new rows are to be inserted:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Selects all non-nullable columns in the underlying table</p>
                        </li>
                        <li>
                           <p>Selects all columns that do not have a default value</p>
                           <div class="infoboxnote" id="GUID-4B46C980-D32F-474D-8742-52A238CC1D3B__GUID-2656B715-394E-452C-B5D3-59551D3B4873">
                              <p class="notep1">Note:</p>
                              <p>The <code class="codeph">CachedRowSet</code> cannot hold a large quantity of data, because all the data is cached in memory. Oracle, therefore, recommends against using <code class="codeph">OracleCachedRowSet</code> with queries that could potentially return a large volume of data.
                              </p>
                           </div>
                        </li>
                     </ul>
                     <p>Connection properties like, transaction isolation and concurrency mode of the result set, cannot be set after populating the RowSet, because the properties cannot be applied to the connection after retrieving the data from the same.</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDBC28639"></a><a id="JJDBC28638"></a><div class="props_rev_3"><a id="GUID-996D3872-FA2B-4BA5-99BA-62D5FB235583" name="GUID-996D3872-FA2B-4BA5-99BA-62D5FB235583"></a><h3 id="JJDBC-GUID-996D3872-FA2B-4BA5-99BA-62D5FB235583" class="sect3"><span class="enumeration_section">18.3 </span>About JdbcRowSet
               </h3>
               <div>
                  <p>A JdbcRowSet is a RowSet that wraps around a <code class="codeph">ResultSet</code> object. It is a connected RowSet that provides JDBC interfaces in the form of a JavaBean interface. The Oracle implementation of JdbcRowSet is <code class="codeph">oracle.jdbc.rowset.OracleJDBCRowSet</code>. The <code class="codeph">OracleJDBCRowSet</code> class in <code class="codeph">ojdbc6.jar</code> and <code class="codeph">ojdbc7.jar</code> implements the standard JSR-114 interface <code class="codeph">javax.sql.rowset.JdbcRowSet</code>.
                  </p>
                  <p><a href="JDBC-Rowsets.html#GUID-996D3872-FA2B-4BA5-99BA-62D5FB235583__g631556" title="table">Table 18-1</a> shows how the <code class="codeph">JdbcRowSet</code> interface differs from <code class="codeph">CachedRowSet</code> interface.
                  </p>
                  <div class="tblformal" id="GUID-996D3872-FA2B-4BA5-99BA-62D5FB235583__g631556">
                     <p class="titleintable">Table 18-1 The JDBC and Cached Row Sets Compared </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="The JDBC and Cached Row Sets Compared " summary="table" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="19%" id="d61846e959">RowSet Type</th>
                              <th align="left" valign="bottom" width="17%" id="d61846e962">Serializable</th>
                              <th align="left" valign="bottom" width="15%" id="d61846e965">Connected to Database</th>
                              <th align="left" valign="bottom" width="14%" id="d61846e968">Movable Across JVMs</th>
                              <th align="left" valign="bottom" width="22%" id="d61846e971">Synchronization of data to database</th>
                              <th align="left" valign="bottom" width="14%" id="d61846e974">Presence of JDBC Drivers</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d61846e979" headers="d61846e959 ">
                                 <p>JDBC</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d61846e979 d61846e962 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d61846e979 d61846e965 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d61846e979 d61846e968 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d61846e979 d61846e971 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d61846e979 d61846e974 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d61846e998" headers="d61846e959 ">
                                 <p>Cached</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d61846e998 d61846e962 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d61846e998 d61846e965 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d61846e998 d61846e968 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d61846e998 d61846e971 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d61846e998 d61846e974 ">
                                 <p>No</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>JdbcRowSet is a connected RowSet, which has a live connection to the database and all the calls on the JdbcRowSet are percolated to the mapping call in the JDBC connection, statement, or result set. A CachedRowSet does not have any connection to the database open.</p>
                  <p>JdbcRowSet requires the presence of JDBC drivers unlike a CachedRowSet, which does not require JDBC drivers during manipulation. However, both JdbcRowSet and CachedRowSet require JDBC drivers during population of the RowSet and while committing the changes of the RowSet.</p>
                  <p>The following code illustrates how a JdbcRowSet is used:</p><pre class="oac_no_warn" dir="ltr">...
RowSet rowset = new OracleJDBCRowSet();
rowset.setUrl("java:oracle:oci:@");
rowset.setUsername("HR");
rowset.setPassword("hr");
rowset.setCommand("SELECT empno, ename, sal FROM emp");
rowset.execute();
while (rowset.next())
{
  System.out.println("empno: " + rowset.getInt(1));
  System.out.println("ename: " + rowset.getString(2));
  System.out.println("sal: " + rowset.getInt(3));
}
...
</pre><p>In the preceding example, the connection URL, user name, password, and SQL query are set as properties of the <code class="codeph">RowSet</code> object, the SQL query is processed using the <code class="codeph">execute</code> method, and the rows are retrieved and printed by traversing through the data populated in the <code class="codeph">RowSet</code> object.
                  </p>
               </div>
            </div><a id="JJDBC28640"></a><div class="props_rev_3"><a id="GUID-862F56C6-7874-4A18-8933-F487538D847D" name="GUID-862F56C6-7874-4A18-8933-F487538D847D"></a><h3 id="JJDBC-GUID-862F56C6-7874-4A18-8933-F487538D847D" class="sect3"><span class="enumeration_section">18.4 </span>About WebRowSet
               </h3>
               <div>
                  <p>A WebRowSet is an extension to CachedRowSet. It represents a set of fetched rows or tabular data that can be passed between tiers and components in a way such that no active connections with the data source need to be maintained. The <code class="codeph">WebRowSet</code> interface provides support for the production and consumption of result sets and their synchronization with the data source, both in Extensible Markup Language (XML) format and in disconnected fashion. This allows result sets to be shipped across tiers and over Internet protocols.
                  </p>
                  <p>The Oracle implementation of WebRowSet is <code class="codeph">oracle.jdbc.rowset.OracleWebRowSet</code>. This class, which is in the <code class="codeph">ojdbc6.jar</code> and <code class="codeph">ojdbc7.jar</code> files, implements the standard JSR-114 interface <code class="codeph">javax.sql.rowset.WebRowSet</code>. This class also extends the <code class="codeph">oracle.jdbc.rowset.OracleCachedRowSet</code> class. Besides the methods available in <code class="codeph">OracleCachedRowSet</code>, the <code class="codeph">OracleWebRowSet</code> class provides the following methods:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li><pre class="oac_no_warn" dir="ltr">public OracleWebRowSet() throws SQLException
</pre><p>This is the constructor for creating an <code class="codeph">OracleWebRowSet</code> object, which is initialized with the default values for an <code class="codeph">OracleCachedRowSet</code> object, a default <code class="codeph">OracleWebRowSetXmlReader</code>, and a default <code class="codeph">OracleWebRowSetXmlWriter</code>.
                        </p>
                     </li>
                     <li><pre class="oac_no_warn" dir="ltr">public void writeXml(java.io.Writer writer) throws SQLException
public void writeXml(java.io.OutputStream ostream) throws SQLException
</pre><p>These methods write the <code class="codeph">OracleWebRowSet</code> object to the supplied <code class="codeph">Writer</code> or <code class="codeph">OutputStream</code> object in the XML format that conforms to the JSR-114 XML schema. In addition to the RowSet data, the properties and metadata of the RowSet are written.
                        </p>
                     </li>
                     <li><pre class="oac_no_warn" dir="ltr">public void writeXml(ResultSet rset, java.io.Writer writer) throws SQLException
public void writeXml(ResultSet rset, java.io.OutputStream ostream) throws SQLException
</pre><p>These methods create an <code class="codeph">OracleWebRowSet</code> object, populate it with the data in the given <code class="codeph">ResultSet</code> object, and write it to the supplied <code class="codeph">Writer</code> or <code class="codeph">OutputStream</code> object in the XML format that conforms to the JSR-114 XML schema.
                        </p>
                     </li>
                     <li><pre class="oac_no_warn" dir="ltr">public void readXml(java.io.Reader reader) throws SQLException
public void readXml(java.io.InputStream istream) throws SQLException
</pre><p>These methods read the <code class="codeph">OracleWebRowSet</code> object in the XML format according to its JSR-114 XML schema, using the supplied <code class="codeph">Reader</code> or <code class="codeph">InsputStream</code> object.
                        </p>
                     </li>
                  </ul>
                  <p>The Oracle WebRowSet implementation supports Java API for XML Processing (JAXP) 1.2. Both Simple API for XML (SAX) 2.0 and Document Object Model (DOM) JAXP-conforming XML parsers are supported. It follows the current JSR-114 W3C XML schema for WebRowSet.</p>
                  <p>Applications that use the <code class="codeph">readXml(...)</code> methods should set one of the following two standard JAXP system properties before calling the methods:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">javax.xml.parsers.SAXParserFactory</code></p>
                        <p>This property is for a SAX parser.</p>
                     </li>
                     <li>
                        <p><code class="codeph">javax.xml.parsers.DocumentBuilderFactory</code></p>
                        <p>This property is for a DOM parser.</p>
                     </li>
                  </ul>
                  <p>The following code illustrates the use of <code class="codeph">OracleWebRowSet</code> for both writing and reading in XML format:
                  </p><pre class="oac_no_warn" dir="ltr">import java.sql.*;
import java.io.*;
import oracle.jdbc.rowset.*;

...
String url = "jdbc:oracle:oci8:@";

Connection conn = DriverManager.getConnection(url,"HR","hr");
Statement stmt = conn.createStatement();
ResultSet rset = stmt.executeQuery("select * from employees");

// Create an OracleWebRowSet object and populate it with the ResultSet object
OracleWebRowSet wset = new OracleWebRowSet();
wset.populate(rset);

try
{
  // Create a java.io.Writer object
  FileWriter out = new FileWriter("xml.out");
  
  // Now generate the XML and write it out
  wset.writeXml(out);
}
catch (IOException exc)
{
  System.out.println("Couldn't construct a FileWriter");
}
System.out.println("XML output file generated.");

// Create a new OracleWebRowSet for reading from XML input
OracleWebRowSet wset2 = new OracleWebRowSet();

// Use Oracle JAXP SAX parser
System.setProperty("javax.xml.parsers.SAXParserFactory","oracle.xml.jaxp.JXSAXParserFactory");

try
{
  // Use the preceding output file as input
  FileReader fr = new FileReader("xml.out");
  
  // Now read XML stream from the FileReader
  wset2.readXml(fr);
}
catch (IOException exc)
{
  System.out.println("Couldn't construct a FileReader");
}
...
</pre><div class="infoboxnote" id="GUID-862F56C6-7874-4A18-8933-F487538D847D__GUID-6F6A3496-50E1-4D5D-A2BE-132B004DC7F9">
                     <p class="notep1">Note:</p>
                     <p>The preceding code uses the Oracle SAX XML parser, which supports schema validation.</p>
                  </div>
               </div>
            </div><a id="JJDBC28641"></a><div class="props_rev_3"><a id="GUID-8AA0A89C-3CC2-4872-8EFD-3A390E712A4D" name="GUID-8AA0A89C-3CC2-4872-8EFD-3A390E712A4D"></a><h3 id="JJDBC-GUID-8AA0A89C-3CC2-4872-8EFD-3A390E712A4D" class="sect3"><span class="enumeration_section">18.5 </span>About FilteredRowSet
               </h3>
               <div>
                  <p>A FilteredRowSet is an extension to WebRowSet that provides programmatic support for filtering its content. This enables you to avoid the overhead of supplying a query and the processing involved. The Oracle implementation of FilteredRowSet is <code class="codeph">oracle.jdbc.rowset.OracleFilteredRowSet</code>. The <code class="codeph">OracleFilteredRowSet</code> class in the <code class="codeph">ojdbc7.jar</code> files implements the standard JSR-114 interface <code class="codeph">javax.sql.rowset.FilteredRowSet</code>.
                  </p>
                  <p>The <code class="codeph">OracleFilteredRowSet</code> class defines the following new methods:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li><pre class="oac_no_warn" dir="ltr">public Predicate getFilter();
</pre><p>This method returns a <code class="codeph">Predicate</code> object that defines the filtering criteria active on the <code class="codeph">OracleFilteredRowSet</code> object.
                        </p>
                     </li>
                     <li><pre class="oac_no_warn" dir="ltr">public void setFilter(Predicate p) throws SQLException;
</pre><p>This method takes a <code class="codeph">Predicate</code> object as a parameter. The <code class="codeph">Predicate</code> object defines the filtering criteria to be applied on the <code class="codeph">OracleFilteredRowSet</code> object. The methods throws a <code class="codeph">SQLException</code> exception.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-8AA0A89C-3CC2-4872-8EFD-3A390E712A4D__GUID-56E125BB-76F2-4BAF-A510-4C6D63B2B1FA">
                     <p class="notep1">Note:</p>
                     <p>If you are using <code class="codeph">classes12.jar</code> instead of <code class="codeph">ojdbc5.jar</code> and <code class="codeph">ojdbc6.jar</code> for FilteredRowSet features, then use <code class="codeph">OraclePredicate</code> instead of <code class="codeph">Predicate</code>. The <code class="codeph">oracle.jdbc.rowset.OraclePredicate</code> interface is Oracle specific and is equivalent to <code class="codeph">Predicate</code>. This interface is used when the JSR-114 packages are not available.
                     </p>
                  </div>
                  <p>The predicate set on an <code class="codeph">OracleFilteredRowSet</code> object defines a filtering criteria that is applied to all the rows in the object to obtain the set of visible rows. The predicate also defines the criteria for inserting, deleting, and modifying rows. The set filtering criteria acts as a gating mechanism for all views and updates to the <code class="codeph">OracleFilteredRowSet</code> object. Any attempt to update the <code class="codeph">OracleFilteredRowSet</code> object, which violates the filtering criteria, throws a <code class="codeph">SQLException</code> exception.
                  </p>
                  <p>The filtering criteria set on an <code class="codeph">OracleFilteredRowSet</code> object can be modified by applying a new <code class="codeph">Predicate</code> object. The new criteria is immediately applied on the object, and all further views and updates must adhere to this new criteria. A new filtering criteria can be applied only if there are no reference to the <code class="codeph">OracleFilteredRowSet</code> object.
                  </p>
                  <p>Rows that fall outside of the filtering criteria set on the object cannot be modified until the filtering criteria is removed or a new filtering criteria is applied. Also, only the rows that fall within the bounds of the filtering criteria will be synchronized with the data source, if an attempt is made to persist the object.</p>
                  <p>The following code example illustrates the use of OracleFilteredRowSet. Assume a table, <code class="codeph">test_table</code>, with two <code class="codeph">NUMBER</code> columns, <code class="codeph">col1</code> and <code class="codeph">col2</code>. The code retrieves those rows from the table that have value of <code class="codeph">col1</code> between <code class="codeph">50</code> and <code class="codeph">100</code> and value of <code class="codeph">col2</code> between <code class="codeph">100</code> and <code class="codeph">200</code>.
                  </p>
                  <p>The predicate defining the filtering criteria is as follows:</p><pre class="oac_no_warn" dir="ltr">public class PredicateImpl implements Predicate
{
  private int low[];
  private int high[];
  private int columnIndexes[];
  
  public PredicateImpl(int[] lo, int[] hi, int[] indexes)
  {
    low = lo;
    high = hi;
    columnIndexes = indexes;
  }
  
  public boolean evaluate(RowSet rs)
  {
    boolean result = true;
    for (int i = 0; i &lt; columnIndexes.length; i++)
    {
      int columnValue = rs.getInt(columnIndexes[i]);
      if (columnValue &lt; low[i] || columnValue &gt; high[i])
        result = false;
    }
    return result;
  }

// the other two evaluate(...) methods simply return true

}
</pre><p>The predicate defined in the preceding code is used for filtering content in an <code class="codeph">OracleFilteredRowSet</code> object, as follows:
                  </p><pre class="oac_no_warn" dir="ltr">...
OracleFilteredRowSet ofrs = new OracleFilteredRowSet();
int low[] = {50, 100};
int high[] = {100, 200};
int indexes[] = {1, 2};
ofrs.setCommand("select col1, col2 from test_table");

// set other properties on ofrs like usr/pwd ...
...
ofrs.execute();
ofrs.setPredicate(new PredicateImpl(low, high, indexes));

// this will only get rows with col1 in (50,100) and col2 in (100,200)
while (ofrs.next()) {...}
...
</pre></div>
            </div><a id="JJDBC28642"></a><div class="props_rev_3"><a id="GUID-60685532-AA0E-4692-A369-5F9D79AA9A72" name="GUID-60685532-AA0E-4692-A369-5F9D79AA9A72"></a><h3 id="JJDBC-GUID-60685532-AA0E-4692-A369-5F9D79AA9A72" class="sect3"><span class="enumeration_section">18.6 </span>About JoinRowSet
               </h3>
               <div>
                  <p>A JoinRowSet is an extension to WebRowSet that consists of related data from different RowSets. There is no standard way to establish a SQL <code class="codeph">JOIN</code> between disconnected RowSets without connecting to the data source. A JoinRowSet addresses this issue. The Oracle implementation of JoinRowSet is the <code class="codeph">oracle.jdbc.rowset.OracleJoinRowSet</code> class. This class, which is in the <code class="codeph">ojdbc7.jar</code> files, implements the standard JSR-114 interface <code class="codeph">javax.sql.rowset.JoinRowSet</code>.
                  </p>
                  <p>Any number of <code class="codeph">RowSet</code> objects, which implement the <code class="codeph">Joinable</code> interface, can be added to a <code class="codeph">JoinRowSet</code> object, provided they can be related in a SQL <code class="codeph">JOIN</code>. All five types of RowSet support the <code class="codeph">Joinable</code> interface. The <code class="codeph">Joinable</code> interface provides methods for specifying the columns based on which the <code class="codeph">JOIN</code> will be performed, that is, the match columns.
                  </p>
                  <div class="infoboxnote" id="GUID-60685532-AA0E-4692-A369-5F9D79AA9A72__GUID-E9279756-F192-42B9-AD5D-5563831B3545">
                     <p class="notep1">Note:</p>
                     <p>If you are using <code class="codeph">classes12.jar</code> instead of <code class="codeph">ojdbc5.jar</code> and <code class="codeph">ojdbc6.jar</code> for JoinRowSet features, then use <code class="codeph">OracleJoinable</code> instead of <code class="codeph">Joinable</code>. The <code class="codeph">oracle.jdbc.rowset.OracleJoinable</code> interface is Oracle-specific and is equivalent to <code class="codeph">Joinable</code>. This interface is used when the JSR-114 packages are not available.
                     </p>
                  </div>
                  <p>A match column can be specified in the following ways:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Using the <code class="codeph">setMatchColumn</code> method
                        </p>
                        <p>This method is defined in the <code class="codeph">Joinable</code> interface. It is the only method that can be used to set the match column before a <code class="codeph">RowSet</code> object is added to a <code class="codeph">JoinRowSet</code> object. This method can also be used to reset the match column at any time.
                        </p>
                     </li>
                     <li>
                        <p>Using the <code class="codeph">addRowSet</code> method
                        </p>
                        <p>This is an overloaded method in <code class="codeph">JoinRowSet</code>. Four of the five implementations of this method take a match column as a parameter. These four methods can be used to set or reset a match column at the time a <code class="codeph">RowSet</code> object is being added to a <code class="codeph">JoinRowSet</code> object.
                        </p>
                     </li>
                  </ul>
                  <p>In addition to the inherited methods, <code class="codeph">OracleJoinRowSet</code> provides the following methods:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li><pre class="oac_no_warn" dir="ltr">public void addRowSet(Joinable joinable) throws SQLException;
public void addRowSet(RowSet rowSet, int i) throws SQLException;
public void addRowSet(RowSet rowSet, String s) throws SQLException;
public void addRowSet(RowSet arowSet[], int an[]) throws SQLException;
public void addRowSet(RowSet arowSet[], String as[]) throws SQLException;
</pre><p>These methods are used to add a <code class="codeph">RowSet</code> object to the <code class="codeph">OracleJoinRowSet</code> object. You can pass one or more <code class="codeph">RowSet</code> objects to be added to the <code class="codeph">OracleJoinRowSet</code> object. You can also pass names or indexes of one or more columns, which need to be set as match column.
                        </p>
                     </li>
                     <li><pre class="oac_no_warn" dir="ltr">public Collection getRowSets() throws SQLException;
</pre><p>This method retrieves the <code class="codeph">RowSet</code> objects added to the <code class="codeph">OracleJoinRowSet</code> object. The method returns a <code class="codeph">java.util.Collection</code> object that contains the <code class="codeph">RowSet</code> objects.
                        </p>
                     </li>
                     <li><pre class="oac_no_warn" dir="ltr">public String[] getRowSetNames() throws SQLException;
</pre><p>This method returns a String array containing the names of the <code class="codeph">RowSet</code> objects that are added to the <code class="codeph">OracleJoinRowSet</code> object.
                        </p>
                     </li>
                     <li><pre class="oac_no_warn" dir="ltr">public boolean supportsCrossJoin();
public boolean supportsFullJoin();
public boolean supportsInnerJoin();
public boolean supportsLeftOuterJoin();
public boolean supportsRightOuterJoin();
</pre><p>These methods return a boolean value indicating whether the <code class="codeph">OracleJoinRowSet</code> object supports the corresponding <code class="codeph">JOIN</code> type.
                        </p>
                     </li>
                     <li><pre class="oac_no_warn" dir="ltr">public void setJoinType(int i) throws SQLException;
</pre><p>This method is used to set the <code class="codeph">JOIN</code> type on the <code class="codeph">OracleJoinRowSet</code> object. It takes an integer constant as defined in the <code class="codeph">javax.sql.rowset.JoinRowSet</code> interface that specifies the <code class="codeph">JOIN</code> type.
                        </p>
                     </li>
                     <li><pre class="oac_no_warn" dir="ltr">public int getJoinType() throws SQLException;
</pre><p>This method returns an integer value that indicates the <code class="codeph">JOIN</code> type set on the <code class="codeph">OracleJoinRowSet</code> object. This method throws a <code class="codeph">SQLException</code> exception.
                        </p>
                     </li>
                     <li><pre class="oac_no_warn" dir="ltr">public CachedRowSet toCachedRowSet() throws SQLException;
</pre><p>This method creates a <code class="codeph">CachedRowSet</code> object containing the data in the <code class="codeph">OracleJoinRowSet</code> object.
                        </p>
                     </li>
                     <li><pre class="oac_no_warn" dir="ltr">public String getWhereClause() throws SQLException;
</pre><p>This method returns a String containing the SQL-like description of the <code class="codeph">WHERE</code> clause used in the <code class="codeph">OracleJoinRowSet</code> object. This methods throws a <code class="codeph">SQLException</code> exception.
                        </p>
                     </li>
                  </ul>
                  <p>The following code illustrates how <code class="codeph">OracleJoinRowSet</code> is used to perform an inner join on two RowSets, whose data come from two different tables. The resulting RowSet contains data as if they were the result of an inner join on these two tables. Assume that there are two tables, an <code class="codeph">Order</code> table with two <code class="codeph">NUMBER</code> columns <code class="codeph">Order_id</code> and <code class="codeph">Person_id</code>, and a <code class="codeph">Person</code> table with a <code class="codeph">NUMBER</code> column <code class="codeph">Person_id</code> and a <code class="codeph">VARCHAR2</code> column <code class="codeph">Name</code>.
                  </p><pre class="oac_no_warn" dir="ltr">...
// RowSet holding data from table Order
OracleCachedRowSet ocrsOrder = new OracleCachedRowSet();
...
ocrsOrder.setCommand("select order_id, person_id from order");
...
// Join on person_id column
ocrsOrder.setMatchColumn(2);
ocrsOrder.execute();

// Creating the JoinRowSet
OracleJoinRowSet ojrs = new OracleJoinRowSet();
ojrs.addRowSet(ocrsOrder);

// RowSet holding data from table Person
OracleCachedRowSet ocrsPerson = new OracleCachedRowSet();
...
ocrsPerson.setCommand("select person_id, name from person");
...
// do not set match column on this RowSet using setMatchColumn().
//use addRowSet() to set match column
ocrsPerson.execute();

// Join on person_id column, in another way
ojrs.addRowSet(ocrsPerson, 1);

// now we can go the JoinRowSet as usual
ojrs.beforeFirst();
while (ojrs.next())
System.out.println("order id = " + ojrs.getInt(1) + ", " + "person id = " +
ojrs.getInt(2) + ", " + "person's name = " + ojrs.getString(3));
...
</pre></div>
            </div>
         </div>
      </article>
   </body>
</html>
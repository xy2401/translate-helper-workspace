<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Describes the Data Pump API, DBMS_DATAPUMP.">
      <meta name="description" content="Describes the Data Pump API, DBMS_DATAPUMP.">
      <title>The Data Pump API</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Utilities ">
      <meta property="og:description" content="Describes the Data Pump API, DBMS_DATAPUMP.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Utilities">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-utilities.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-23T19:07:17-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96081-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="oracle-data-pump-performance-tips.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-sql-loader.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Utilities">
    <meta name="dcterms.isVersionOf" content="SUTIL">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-data-pump-performance-tips.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-sql-loader.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Utilities </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-pump.html" property="item" typeof="WebPage"><span property="name"> Oracle Data Pump</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> The Data Pump API</li>
            </ol>
            <a id="GUID-EAD7AE4B-778A-4369-9842-68E026409045" name="GUID-EAD7AE4B-778A-4369-9842-68E026409045"></a><a id="SUTIL600"></a>
            
            <h2 id="SUTIL-GUID-EAD7AE4B-778A-4369-9842-68E026409045" class="sect2"><span class="enumeration_chapter">6 </span> The Data Pump API
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='using-oracle_datapump-api'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>Describes the Data Pump API, <code class="codeph">DBMS_DATAPUMP</code>.
               </p>
               <p>The Data Pump API, <code class="codeph">DBMS_DATAPUMP</code>, provides a high-speed mechanism to move all or part of the data and metadata for a site from one database to another. The Data Pump Export and Data Pump Import utilities are based on the Data Pump API.
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-oracle_datapump-api.html#GUID-176E03D9-83CF-449F-95D9-C580F1770C88">How Does the Client Interface to the Data Pump API Work?</a><br>The main structure used in the client interface is a job handle, which appears to the caller as an integer.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle_datapump-api.html#GUID-22D4851C-4057-4BBB-B7F0-DB9091A30641">What Are the Basic Steps in Using the Data Pump API?</a><br>To use the Data Pump API, you use the procedures provided in the <code class="codeph">DBMS_DATAPUMP</code> package.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118">Examples of Using the Data Pump API</a><br>Using the Data Pump API.
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-EAD7AE4B-778A-4369-9842-68E026409045__GUID-4E38CC6F-5D18-41B0-9FB2-E0FFF107FE00">
                  <p class="notep1">See Also:</p>
                  <p></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="../arpls/DBMS_DATAPUMP.html#ARPLS356" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for a detailed description of the procedures available in the <code class="codeph">DBMS_DATAPUMP</code> package
                        </p>
                     </li>
                     <li>
                        <p><a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another."> Overview of Oracle Data Pump</a> for additional explanation of Data Pump concepts
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="oracle-data-pump.html#GUID-501A9908-BCC5-434C-8853-9A6096766B5A">Oracle Data Pump</a></p>
                  </div>
               </div>
            </div>
            <a id="SUTIL974"></a><div class="props_rev_3"><a id="GUID-176E03D9-83CF-449F-95D9-C580F1770C88" name="GUID-176E03D9-83CF-449F-95D9-C580F1770C88"></a><h3 id="SUTIL-GUID-176E03D9-83CF-449F-95D9-C580F1770C88" class="sect3"><span class="enumeration_section">6.1 </span>How Does the Client Interface to the Data Pump API Work?
               </h3>
               <div>
                  <p>The main structure used in the client interface is a job handle, which appears to the caller as an integer.</p>
                  <p>Handles are created using the <code class="codeph">DBMS_DATAPUMP</code>.<code class="codeph">OPEN</code> or <code class="codeph">DBMS_DATAPUMP</code>.<code class="codeph">ATTACH</code> function. Other sessions can attach to a job to monitor and control its progress. This allows a DBA to start up a job before departing from work and then watch the progress of the job from home. Handles are session specific. The same job can create different handles in different sessions. 
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle_datapump-api.html#GUID-1622BCF2-2D0C-4FD5-9C52-E756CC81BA76">Job States</a><br>Describes job states.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-oracle_datapump-api.html#GUID-EAD7AE4B-778A-4369-9842-68E026409045" title="Describes the Data Pump API, DBMS_DATAPUMP.">The Data Pump API</a></p>
                     </div>
                  </div>
               </div>
               <a id="SUTIL3307"></a><a id="SUTIL975"></a><div class="props_rev_3"><a id="GUID-1622BCF2-2D0C-4FD5-9C52-E756CC81BA76" name="GUID-1622BCF2-2D0C-4FD5-9C52-E756CC81BA76"></a><h4 id="SUTIL-GUID-1622BCF2-2D0C-4FD5-9C52-E756CC81BA76" class="sect4"><span class="enumeration_section">6.1.1 </span>Job States
                  </h4>
                  <div>
                     <p>Describes job states.</p>
                     <div class="section">
                        <p>There is a state associated with each phase of a job, as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Undefined — before a handle is created</p>
                           </li>
                           <li>
                              <p>Defining — when the handle is first created </p>
                           </li>
                           <li>
                              <p>Executing — when the <code class="codeph">DBMS_DATAPUMP</code>.<code class="codeph">START_JOB</code> procedure is executed 
                              </p>
                           </li>
                           <li>
                              <p>Completing — when the job has finished its work and the Data Pump processes are ending</p>
                           </li>
                           <li>
                              <p>Completed — when the job is completed</p>
                           </li>
                           <li>
                              <p>Stop Pending — when an orderly job shutdown has been requested</p>
                           </li>
                           <li>
                              <p>Stopping — when the job is stopping</p>
                           </li>
                           <li>
                              <p>Idling — the period between the time that a <code class="codeph">DBMS_DATAPUMP.ATTACH</code> is executed to attach to a stopped job and the time that a <code class="codeph">DBMS_DATAPUMP.START_JOB</code> is executed to restart that job
                              </p>
                           </li>
                           <li>
                              <p>Not Running — when a master table exists for a job that is not running (has no Data Pump processes associated with it) </p>
                           </li>
                        </ul>
                        <p>Performing <code class="codeph">DBMS_DATAPUMP</code>.<code class="codeph">START_JOB</code> on a job in an Idling state will return it to an Executing state.
                        </p>
                        <p>If all users execute <code class="codeph">DBMS_DATAPUMP</code>.<code class="codeph">DETACH</code> to detach from a job in the Defining state, then the job will be totally removed from the database. 
                        </p>
                        <p>When a job abnormally terminates or when an instance running the job is shut down, the job is placed in the Not Running state if it was previously executing or idling. It can then be restarted by the user.</p>
                        <p>The master control process is active in the Defining, Idling, Executing, Stopping, Stop Pending, and Completing states. It is also active briefly in the Stopped and Completed states. The master table for the job exists in all states except the Undefined state. Worker processes are only active in the Executing and Stop Pending states, and briefly in the Defining state for import jobs.</p>
                        <p>Detaching while a job is in the Executing state will not halt the job, and you can re-attach to an executing job at any time to resume obtaining status information about the job. </p>
                        <p>A Detach can occur explicitly, when the <code class="codeph">DBMS_DATAPUMP.DETACH</code> procedure is executed, or it can occur implicitly when a Data Pump API session is run down, when the Data Pump API is unable to communicate with a Data Pump job, or when the <code class="codeph">DBMS_DATAPUMP.STOP_JOB</code> procedure is executed.
                        </p>
                        <p>The Not Running state indicates that a master table exists outside the context of an executing job. This will occur if a job has been stopped (probably to be restarted later) or if a job has abnormally terminated. This state can also be seen momentarily during job state transitions at the beginning of a job, and at the end of a job before the master table is dropped. Note that the Not Running state is shown only in the <code class="codeph">DBA_DATAPUMP_JOBS</code> view and the <code class="codeph">USER_DATAPUMP_JOBS</code> view. It is never returned by the <code class="codeph">GET_STATUS</code> procedure.
                        </p>
                        <p><a href="using-oracle_datapump-api.html#GUID-1622BCF2-2D0C-4FD5-9C52-E756CC81BA76__I1005638" title="Valid states in which DBMS_DATAPUMP procedures can be executed">Table 6-1</a> shows the valid job states in which <code class="codeph">DBMS_DATAPUMP</code> procedures can be executed. The states listed are valid for both export and import jobs, unless otherwise noted.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-1622BCF2-2D0C-4FD5-9C52-E756CC81BA76__I1005638">
                        <p class="titleintable">Table 6-1 Valid Job States in Which DBMS_DATAPUMP Procedures Can Be Executed</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Valid Job States in Which DBMS_DATAPUMP Procedures Can Be Executed" summary="Valid states in which DBMS_DATAPUMP procedures can be executed" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d46263e320">Procedure Name</th>
                                 <th align="left" valign="bottom" id="d46263e323">Valid States</th>
                                 <th align="left" valign="bottom" id="d46263e326">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e331" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">ADD_FILE</pre></td>
                                 <td align="left" valign="top" headers="d46263e331 d46263e323 ">
                                    <p>Defining (valid for both export and import jobs)</p>
                                    <p>Executing and Idling (valid only for specifying dump files for export jobs)</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e331 d46263e326 ">
                                    <p>Specifies a file for the dump file set, the log file, or the SQLFILE output.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e343" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">ATTACH</pre></td>
                                 <td align="left" valign="top" headers="d46263e343 d46263e323 ">
                                    <p>Defining, Executing, Idling, Stopped, Completed, Completing, Not Running</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e343 d46263e326 ">
                                    <p>Allows a user session to monitor a job or to restart a stopped job. The attach will fail if the dump file set or master table for the job have been deleted or altered in any way.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e353" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">DATA_FILTER</pre></td>
                                 <td align="left" valign="top" headers="d46263e353 d46263e323 ">
                                    <p>Defining</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e353 d46263e326 ">
                                    <p>Restricts data processed by a job.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e363" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">DETACH</pre></td>
                                 <td align="left" valign="top" headers="d46263e363 d46263e323 ">
                                    <p>All</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e363 d46263e326 ">
                                    <p>Disconnects a user session from a job.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e373" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">GET_DUMPFILE_INFO</pre></td>
                                 <td align="left" valign="top" headers="d46263e373 d46263e323 ">
                                    <p>All</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e373 d46263e326 ">
                                    <p>Retrieves dump file header information.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e383" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">GET_STATUS</pre></td>
                                 <td align="left" valign="top" headers="d46263e383 d46263e323 ">
                                    <p>All, except Completed, Not Running, Stopped, and Undefined</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e383 d46263e326 ">
                                    <p>Obtains the status of a job.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e393" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">LOG_ENTRY</pre></td>
                                 <td align="left" valign="top" headers="d46263e393 d46263e323 ">
                                    <p>Defining, Executing, Idling, Stop Pending, Completing</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e393 d46263e326 ">
                                    <p>Adds an entry to the log file.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e403" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">METADATA_FILTER</pre></td>
                                 <td align="left" valign="top" headers="d46263e403 d46263e323 ">
                                    <p>Defining</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e403 d46263e326 ">
                                    <p>Restricts metadata processed by a job.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e413" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">METADATA_REMAP</pre></td>
                                 <td align="left" valign="top" headers="d46263e413 d46263e323 ">
                                    <p>Defining</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e413 d46263e326 ">
                                    <p>Remaps metadata processed by a job.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e423" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">METADATA_TRANSFORM</pre></td>
                                 <td align="left" valign="top" headers="d46263e423 d46263e323 ">
                                    <p>Defining</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e423 d46263e326 ">
                                    <p>Alters metadata processed by a job.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e433" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">OPEN</pre></td>
                                 <td align="left" valign="top" headers="d46263e433 d46263e323 ">
                                    <p>Undefined</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e433 d46263e326 ">
                                    <p>Creates a new job.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e444" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">SET_PARALLEL</pre></td>
                                 <td align="left" valign="top" headers="d46263e444 d46263e323 ">
                                    <p>Defining, Executing, Idling</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e444 d46263e326 ">
                                    <p>Specifies parallelism for a job.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e454" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">SET_PARAMETER</pre></td>
                                 <td align="left" valign="top" headers="d46263e454 d46263e323 ">
                                    <p>Defining<a id="fn_1" name="fn_1" href="#fn_1" onclick="footdisplay(1, "The ENCRYPTION_PASSWORD parameter can be entered during the Idling state, as well as during the Defining state.")"><sup>Foot&nbsp;1</sup></a></p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e454 d46263e326 ">
                                    <p>Alters default processing by a job.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e470" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">START_JOB</pre></td>
                                 <td align="left" valign="top" headers="d46263e470 d46263e323 ">
                                    <p>Defining, Idling</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e470 d46263e326 ">
                                    <p>Begins or resumes execution of a job.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e480" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">STOP_JOB</pre></td>
                                 <td align="left" valign="top" headers="d46263e480 d46263e323 ">
                                    <p>Defining, Executing, Idling, Stop Pending</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e480 d46263e326 ">
                                    <p>Initiates shutdown of a job.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e490" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">WAIT_FOR_JOB</pre><p></p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e490 d46263e323 ">
                                    <p>All, except Completed, Not Running, Stopped, and Undefined</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e490 d46263e326 ">
                                    <p>Waits for a job to end.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup></p><p>The <code class="codeph">ENCRYPTION_PASSWORD</code> parameter can be entered during the Idling state, as well as during the Defining state.
                        </p>
                     <p></p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle_datapump-api.html#GUID-176E03D9-83CF-449F-95D9-C580F1770C88" title="The main structure used in the client interface is a job handle, which appears to the caller as an integer.">How Does the Client Interface to the Data Pump API Work?</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="SUTIL976"></a><div class="props_rev_3"><a id="GUID-22D4851C-4057-4BBB-B7F0-DB9091A30641" name="GUID-22D4851C-4057-4BBB-B7F0-DB9091A30641"></a><h3 id="SUTIL-GUID-22D4851C-4057-4BBB-B7F0-DB9091A30641" class="sect3"><span class="enumeration_section">6.2 </span>What Are the Basic Steps in Using the Data Pump API?
               </h3>
               <div>
                  <p>To use the Data Pump API, you use the procedures provided in the <code class="codeph">DBMS_DATAPUMP</code> package.
                  </p>
                  <div class="section">
                     <p>The following steps list the basic activities involved in using the Data Pump API. The steps are presented in the order in which the activities would generally be performed:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>Execute the <code class="codeph">DBMS_DATAPUMP</code>.<code class="codeph">OPEN</code> procedure to create a Data Pump job and its infrastructure.</span></li>
                     <li><span>Define any parameters for the job.</span></li>
                     <li><span>Start the job.</span></li>
                     <li><span>Optionally, monitor the job until it completes.</span></li>
                     <li><span>Optionally, detach from the job and reattach at a later time.</span></li>
                     <li><span>Optionally, stop the job.</span></li>
                     <li><span>Optionally, restart the job, if desired.</span></li>
                  </ol>
                  <div class="section">
                     <p>These concepts are illustrated in the examples provided in the next section.</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-22D4851C-4057-4BBB-B7F0-DB9091A30641__GUID-7BFB0FEA-3630-4E99-9707-5D9486D3319A">
                     <p class="notep1">See Also:</p>
                     <p><a href="../arpls/DBMS_DATAPUMP.html#ARPLS356" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for a complete description of the <code class="codeph">DBMS_DATAPUMP</code> package
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-oracle_datapump-api.html#GUID-EAD7AE4B-778A-4369-9842-68E026409045" title="Describes the Data Pump API, DBMS_DATAPUMP.">The Data Pump API</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL3308"></a><a id="SUTIL3309"></a><a id="SUTIL3310"></a><a id="SUTIL3943"></a><a id="SUTIL977"></a><div class="props_rev_3"><a id="GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118" name="GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118"></a><h3 id="SUTIL-GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118" class="sect3"><span class="enumeration_section">6.3 </span>Examples of Using the Data Pump API
               </h3>
               <div>
                  <p>Using the Data Pump API.</p>
                  <p>This section provides the following examples to help you get started using the Data Pump API:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p> Performing a Simple Schema Export (<a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006610">Example 6-1</a>)
                        </p>
                     </li>
                     <li>
                        <p>Importing a Dump File and Remapping All Schema Objects (<a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006835">Example 6-2</a>) 
                        </p>
                     </li>
                     <li>
                        <p>Using Exception Handling During a Simple Schema Export (<a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1008408">Example 6-3</a>) 
                        </p>
                     </li>
                     <li>
                        <p>Displaying Dump File Information (<a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__BABBEHEF">Example 6-4</a>)
                        </p>
                     </li>
                  </ul>
                  <p>The examples are in the form of PL/SQL scripts. If you choose to copy these scripts and run them, then you must first do the following, using SQL*Plus:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Create a directory object and grant <code class="codeph">READ</code> and <code class="codeph">WRITE</code> access to it. For example, to create a directory object named <code class="codeph">dmpdir</code> to which you have access, do the following. Replace <span class="italic"><code class="codeph">user</code></span> with your username.
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE DIRECTORY dmpdir AS '/rdbms/work';
SQL&gt; GRANT READ, WRITE ON DIRECTORY dmpdir TO <span class="italic">user</span>;
</pre></li>
                     <li>
                        <p>Ensure that you have the <code class="codeph">EXP_FULL_DATABASE</code> and <code class="codeph">IMP_FULL_DATABASE</code> roles. To see a list of all roles assigned to you within your security domain, do the following:
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM SESSION_ROLES;
</pre><p>If you do not have the necessary roles assigned to you, then contact your system administrator for help.</p>
                     </li>
                     <li>
                        <p>Turn on server output if it is not already on. This is done as follows:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SET SERVEROUTPUT ON
</pre><p>If you do not do this, then you will not see any output to your screen. You must do this in the same session in which you run the example. If you exit SQL*Plus, then this setting is lost and must be reset when you begin a new session. (It must also be reset if you connect to a different user name.)</p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006610">
                     <p class="titleinexample">Example 6-1 Performing a Simple Schema Export</p>
                     <p>The PL/SQL script in this example shows how to use the Data Pump API to perform a simple schema export of the <code class="codeph">HR</code> schema. It shows how to create a job, start it, and monitor it. Additional information about the example is contained in the comments within the script. To keep the example simple, exceptions from any of the API calls will not be trapped. However, in a production environment, Oracle recommends that you define exception handlers and call <code class="codeph">GET_STATUS</code> to retrieve more detailed error information when a failure occurs. 
                     </p>
                     <p>Connect as user <code class="codeph">SYSTEM</code> to use this script.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  ind NUMBER;              -- Loop index
  h1 NUMBER;               -- Data Pump job handle
  percent_done NUMBER;     -- Percentage of job complete
  job_state VARCHAR2(30);  -- To keep track of job state
  le ku$_LogEntry;         -- For WIP and error messages
  js ku$_JobStatus;        -- The job status from get_status
  jd ku$_JobDesc;          -- The job description from get_status
  sts ku$_Status;          -- The status object returned by get_status
BEGIN

-- Create a (user-named) Data Pump job to do a schema export.

  h1 := DBMS_DATAPUMP.OPEN('EXPORT','SCHEMA',NULL,'EXAMPLE1','LATEST');

-- Specify a single dump file for the job (using the handle just returned)
-- and a directory object, which must already be defined and accessible
-- to the user running this procedure.

  DBMS_DATAPUMP.ADD_FILE(h1,'example1.dmp','DMPDIR');

-- A metadata filter is used to specify the schema that will be exported.

  DBMS_DATAPUMP.METADATA_FILTER(h1,'SCHEMA_EXPR','IN (''HR'')');

-- Start the job. An exception will be generated if something is not set up
-- properly. 

  DBMS_DATAPUMP.START_JOB(h1);

-- The export job should now be running. In the following loop, the job
-- is monitored until it completes. In the meantime, progress information is
-- displayed.
 
  percent_done := 0;
  job_state := 'UNDEFINED';
  while (job_state != 'COMPLETED') and (job_state != 'STOPPED') loop
    dbms_datapump.get_status(h1,
           dbms_datapump.ku$_status_job_error +
           dbms_datapump.ku$_status_job_status +
           dbms_datapump.ku$_status_wip,-1,job_state,sts);
    js := sts.job_status;

-- If the percentage done changed, display the new value.

    if js.percent_done != percent_done
    then
      dbms_output.put_line('*** Job percent done = ' ||
                           to_char(js.percent_done));
      percent_done := js.percent_done;
    end if;

-- If any work-in-progress (WIP) or error messages were received for the job,
-- display them.

   if (bitand(sts.mask,dbms_datapump.ku$_status_wip) != 0)
    then
      le := sts.wip;
    else
      if (bitand(sts.mask,dbms_datapump.ku$_status_job_error) != 0)
      then
        le := sts.error;
      else
        le := null;
      end if;
    end if;
    if le is not null
    then
      ind := le.FIRST;
      while ind is not null loop
        dbms_output.put_line(le(ind).LogText);
        ind := le.NEXT(ind);
      end loop;
    end if;
  end loop;

-- Indicate that the job finished and detach from it.

  dbms_output.put_line('Job has completed');
  dbms_output.put_line('Final job state = ' || job_state);
  dbms_datapump.detach(h1);
END;
/</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006835">
                     <p class="titleinexample">Example 6-2 Importing a Dump File and Remapping All Schema Objects</p>
                     <p>The script in this example imports the dump file created in <a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006610">Example 6-1</a> (an export of the <code class="codeph">hr</code> schema). All schema objects are remapped from the <code class="codeph">hr</code> schema to the <code class="codeph">blake</code> schema. To keep the example simple, exceptions from any of the API calls will not be trapped. However, in a production environment, Oracle recommends that you define exception handlers and call <code class="codeph">GET_STATUS</code> to retrieve more detailed error information when a failure occurs. 
                     </p>
                     <p>Connect as user <code class="codeph">SYSTEM</code> to use this script.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  ind NUMBER;              -- Loop index
  h1 NUMBER;               -- Data Pump job handle
  percent_done NUMBER;     -- Percentage of job complete
  job_state VARCHAR2(30);  -- To keep track of job state
  le ku$_LogEntry;         -- For WIP and error messages
  js ku$_JobStatus;        -- The job status from get_status
  jd ku$_JobDesc;          -- The job description from get_status
  sts ku$_Status;          -- The status object returned by get_status
BEGIN

-- Create a (user-named) Data Pump job to do a "full" import (everything
-- in the dump file without filtering).

  h1 := DBMS_DATAPUMP.OPEN('IMPORT','FULL',NULL,'EXAMPLE2');

-- Specify the single dump file for the job (using the handle just returned)
-- and directory object, which must already be defined and accessible
-- to the user running this procedure. This is the dump file created by
-- the export operation in the first example.

  DBMS_DATAPUMP.ADD_FILE(h1,'example1.dmp','DMPDIR');

-- A metadata remap will map all schema objects from HR to BLAKE.

  DBMS_DATAPUMP.METADATA_REMAP(h1,'REMAP_SCHEMA','HR','BLAKE');

-- If a table already exists in the destination schema, skip it (leave
-- the preexisting table alone). This is the default, but it does not hurt
-- to specify it explicitly.

  DBMS_DATAPUMP.SET_PARAMETER(h1,'TABLE_EXISTS_ACTION','SKIP');

-- Start the job. An exception is returned if something is not set up properly.

  DBMS_DATAPUMP.START_JOB(h1);

-- The import job should now be running. In the following loop, the job is 
-- monitored until it completes. In the meantime, progress information is 
-- displayed. Note: this is identical to the export example.
 
 percent_done := 0;
  job_state := 'UNDEFINED';
  while (job_state != 'COMPLETED') and (job_state != 'STOPPED') loop
    dbms_datapump.get_status(h1,
           dbms_datapump.ku$_status_job_error +
           dbms_datapump.ku$_status_job_status +
           dbms_datapump.ku$_status_wip,-1,job_state,sts);
    js := sts.job_status;

-- If the percentage done changed, display the new value.

     if js.percent_done != percent_done
    then
      dbms_output.put_line('*** Job percent done = ' ||
                           to_char(js.percent_done));
      percent_done := js.percent_done;
    end if;

-- If any work-in-progress (WIP) or Error messages were received for the job,
-- display them.

       if (bitand(sts.mask,dbms_datapump.ku$_status_wip) != 0)
    then
      le := sts.wip;
    else
      if (bitand(sts.mask,dbms_datapump.ku$_status_job_error) != 0)
      then
        le := sts.error;
      else
        le := null;
      end if;
    end if;
    if le is not null
    then
      ind := le.FIRST;
      while ind is not null loop
        dbms_output.put_line(le(ind).LogText);
        ind := le.NEXT(ind);
      end loop;
    end if;
  end loop;

-- Indicate that the job finished and gracefully detach from it. 

  dbms_output.put_line('Job has completed');
  dbms_output.put_line('Final job state = ' || job_state);
  dbms_datapump.detach(h1);
END;
/</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1008408">
                     <p class="titleinexample">Example 6-3 Using Exception Handling During a Simple Schema Export</p>
                     <p>The script in this example shows a simple schema export using the Data Pump API. It extends <a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006610">Example 6-1</a> to show how to use exception handling to catch the <code class="codeph">SUCCESS_WITH_INFO</code> case, and how to use the <code class="codeph">GET_STATUS</code> procedure to retrieve additional information about errors. To get exception information about a <code class="codeph">DBMS_DATAPUMP.OPEN</code> or <code class="codeph">DBMS_DATAPUMP.ATTACH</code> failure, call <code class="codeph">DBMS_DATAPUMP.GET_STATUS</code> with a <code class="codeph">DBMS_DATAPUMP.KU$_STATUS_JOB_ERROR</code> information mask and a NULL job handle to retrieve the error details.
                     </p>
                     <p>Connect as user <code class="codeph">SYSTEM</code> to use this example.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  ind NUMBER;              -- Loop index
  spos NUMBER;             -- String starting position
  slen NUMBER;             -- String length for output
  h1 NUMBER;               -- Data Pump job handle
  percent_done NUMBER;     -- Percentage of job complete
  job_state VARCHAR2(30);  -- To keep track of job state
  le ku$_LogEntry;         -- For WIP and error messages
  js ku$_JobStatus;        -- The job status from get_status
  jd ku$_JobDesc;          -- The job description from get_status
  sts ku$_Status;          -- The status object returned by get_status
BEGIN

-- Create a (user-named) Data Pump job to do a schema export.

  h1 := dbms_datapump.open('EXPORT','SCHEMA',NULL,'EXAMPLE3','LATEST');

-- Specify a single dump file for the job (using the handle just returned)
-- and a directory object, which must already be defined and accessible
-- to the user running this procedure.

  dbms_datapump.add_file(h1,'example3.dmp','DMPDIR');

-- A metadata filter is used to specify the schema that will be exported.

  dbms_datapump.metadata_filter(h1,'SCHEMA_EXPR','IN (''HR'')');

-- Start the job. An exception will be returned if something is not set up
-- properly.One possible exception that will be handled differently is the
-- success_with_info exception. success_with_info means the job started
-- successfully, but more information is available through get_status about
-- conditions around the start_job that the user might want to be aware of.

    begin
    dbms_datapump.start_job(h1);
    dbms_output.put_line('Data Pump job started successfully');
    exception
      when others then
        if sqlcode = dbms_datapump.success_with_info_num
        then
          dbms_output.put_line('Data Pump job started with info available:');
          dbms_datapump.get_status(h1,
                                   dbms_datapump.ku$_status_job_error,0,
                                   job_state,sts);
          if (bitand(sts.mask,dbms_datapump.ku$_status_job_error) != 0)
          then
            le := sts.error;
            if le is not null
            then
              ind := le.FIRST;
              while ind is not null loop
                dbms_output.put_line(le(ind).LogText);
                ind := le.NEXT(ind);
              end loop;
            end if;
          end if;
        else
          raise;
        end if;
  end;

-- The export job should now be running. In the following loop, 
-- the job is monitored until it completes. In the meantime, progress information -- is displayed.
 
 percent_done := 0;
  job_state := 'UNDEFINED';
  while (job_state != 'COMPLETED') and (job_state != 'STOPPED') loop
    dbms_datapump.get_status(h1,
           dbms_datapump.ku$_status_job_error +
           dbms_datapump.ku$_status_job_status +
           dbms_datapump.ku$_status_wip,-1,job_state,sts);
    js := sts.job_status;

-- If the percentage done changed, display the new value.

     if js.percent_done != percent_done
    then
      dbms_output.put_line('*** Job percent done = ' ||
                           to_char(js.percent_done));
      percent_done := js.percent_done;
    end if;

-- Display any work-in-progress (WIP) or error messages that were received for
-- the job.

      if (bitand(sts.mask,dbms_datapump.ku$_status_wip) != 0)
    then
      le := sts.wip;
    else
      if (bitand(sts.mask,dbms_datapump.ku$_status_job_error) != 0)
      then
        le := sts.error;
      else
        le := null;
      end if;
    end if;
    if le is not null
    then
      ind := le.FIRST;
      while ind is not null loop
        dbms_output.put_line(le(ind).LogText);
        ind := le.NEXT(ind);
      end loop;
    end if;
  end loop;

-- Indicate that the job finished and detach from it.

  dbms_output.put_line('Job has completed');
  dbms_output.put_line('Final job state = ' || job_state);
  dbms_datapump.detach(h1);

-- Any exceptions that propagated to this point will be captured. The
-- details will be retrieved from get_status and displayed.

  exception
    when others then
      dbms_output.put_line('Exception in Data Pump job');
      dbms_datapump.get_status(h1,dbms_datapump.ku$_status_job_error,0,
                               job_state,sts);
      if (bitand(sts.mask,dbms_datapump.ku$_status_job_error) != 0)
      then
        le := sts.error;
        if le is not null
        then
          ind := le.FIRST;
          while ind is not null loop
            spos := 1;
            slen := length(le(ind).LogText);
            if slen &gt; 255
            then
              slen := 255;
            end if;
            while slen &gt; 0 loop
              dbms_output.put_line(substr(le(ind).LogText,spos,slen));
              spos := spos + 255;
              slen := length(le(ind).LogText) + 1 - spos;
            end loop;
            ind := le.NEXT(ind);
          end loop;
        end if;
      end if;
END;
/</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__BABBEHEF">
                     <p class="titleinexample">Example 6-4 Displaying Dump File Information</p>
                     <p>The PL/SQL script in this example shows how to use the Data Pump API procedure <code class="codeph">DBMS_DATAPUMP.GET_DUMPFILE_INFO</code> to display information about a Data Pump dump file outside the context of any Data Pump job. This example displays information contained in the<code class="codeph"> example1.dmp</code> dump file created by the sample PL/SQL script in <a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006610">Example 6-1</a>.
                     </p>
                     <p>This PL/SQL script can also be used to display information for dump files created by original Export (the <code class="codeph">exp</code> utility) as well as by the <code class="codeph">ORACLE_DATAPUMP</code> external tables access driver. 
                     </p>
                     <p>Connect as user <code class="codeph">SYSTEM</code> to use this script.
                     </p><pre class="oac_no_warn" dir="ltr">SET VERIFY OFF
SET FEEDBACK OFF
 
DECLARE
  ind        NUMBER;
  fileType   NUMBER;
  value      VARCHAR2(2048);
  infoTab    KU$_DUMPFILE_INFO := KU$_DUMPFILE_INFO();
 
BEGIN
  --
  -- Get the information about the dump file into the infoTab.
  --
  BEGIN
    DBMS_DATAPUMP.GET_DUMPFILE_INFO('example1.dmp','DMPDIR',infoTab,fileType);
    DBMS_OUTPUT.PUT_LINE('---------------------------------------------');
    DBMS_OUTPUT.PUT_LINE('Information for file: example1.dmp');
 
    --
    -- Determine what type of file is being looked at.
    --
    CASE fileType
      WHEN 1 THEN
        DBMS_OUTPUT.PUT_LINE('example1.dmp is a Data Pump dump file');
      WHEN 2 THEN
        DBMS_OUTPUT.PUT_LINE('example1.dmp is an Original Export dump file');
      WHEN 3 THEN
        DBMS_OUTPUT.PUT_LINE('example1.dmp is an External Table dump file');
      ELSE
        DBMS_OUTPUT.PUT_LINE('example1.dmp is not a dump file');
        DBMS_OUTPUT.PUT_LINE('---------------------------------------------');
    END CASE;
 
  EXCEPTION
    WHEN OTHERS THEN
      DBMS_OUTPUT.PUT_LINE('---------------------------------------------');
      DBMS_OUTPUT.PUT_LINE('Error retrieving information for file: ' ||
                           'example1.dmp');
      DBMS_OUTPUT.PUT_LINE(SQLERRM);
      DBMS_OUTPUT.PUT_LINE('---------------------------------------------');
      fileType := 0;
  END;
 
  --
  -- If a valid file type was returned, then loop through the infoTab and 
  -- display each item code and value returned.
  --
  IF fileType &gt; 0
  THEN
    DBMS_OUTPUT.PUT_LINE('The information table has ' || 
                          TO_CHAR(infoTab.COUNT) || ' entries');
    DBMS_OUTPUT.PUT_LINE('---------------------------------------------');
 
    ind := infoTab.FIRST;
    WHILE ind IS NOT NULL
    LOOP
      --
      -- The following item codes return boolean values in the form
      -- of a '1' or a '0'. Display them as 'Yes' or 'No'.
      --
      value := NVL(infoTab(ind).value, 'NULL');
      IF infoTab(ind).item_code IN
         (DBMS_DATAPUMP.KU$_DFHDR_MASTER_PRESENT,
          DBMS_DATAPUMP.KU$_DFHDR_DIRPATH,
          DBMS_DATAPUMP.KU$_DFHDR_METADATA_COMPRESSED,
          DBMS_DATAPUMP.KU$_DFHDR_DATA_COMPRESSED,
          DBMS_DATAPUMP.KU$_DFHDR_METADATA_ENCRYPTED,
          DBMS_DATAPUMP.KU$_DFHDR_DATA_ENCRYPTED,
          DBMS_DATAPUMP.KU$_DFHDR_COLUMNS_ENCRYPTED)
      THEN
        CASE value
          WHEN '1' THEN value := 'Yes';
          WHEN '0' THEN value := 'No';
        END CASE;
      END IF;
 
      --
      -- Display each item code with an appropriate name followed by
      -- its value.
      --
      CASE infoTab(ind).item_code
        --
        -- The following item codes have been available since Oracle
        -- Database 10g, Release 10.2.
        --
        WHEN DBMS_DATAPUMP.KU$_DFHDR_FILE_VERSION   THEN
          DBMS_OUTPUT.PUT_LINE('Dump File Version:         ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_MASTER_PRESENT THEN
          DBMS_OUTPUT.PUT_LINE('Master Table Present:      ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_GUID THEN
          DBMS_OUTPUT.PUT_LINE('Job Guid:                  ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_FILE_NUMBER THEN
          DBMS_OUTPUT.PUT_LINE('Dump File Number:          ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_CHARSET_ID  THEN
          DBMS_OUTPUT.PUT_LINE('Character Set ID:          ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_CREATION_DATE THEN
          DBMS_OUTPUT.PUT_LINE('Creation Date:             ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_FLAGS THEN
          DBMS_OUTPUT.PUT_LINE('Internal Dump Flags:       ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_JOB_NAME THEN
          DBMS_OUTPUT.PUT_LINE('Job Name:                  ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_PLATFORM THEN
          DBMS_OUTPUT.PUT_LINE('Platform Name:             ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_INSTANCE THEN
          DBMS_OUTPUT.PUT_LINE('Instance Name:             ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_LANGUAGE THEN
          DBMS_OUTPUT.PUT_LINE('Language Name:             ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_BLOCKSIZE THEN
          DBMS_OUTPUT.PUT_LINE('Dump File Block Size:      ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_DIRPATH THEN
          DBMS_OUTPUT.PUT_LINE('Direct Path Mode:          ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_METADATA_COMPRESSED THEN
          DBMS_OUTPUT.PUT_LINE('Metadata Compressed:       ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_DB_VERSION THEN
          DBMS_OUTPUT.PUT_LINE('Database Version:          ' || value);
 
        --
        -- The following item codes were introduced in Oracle Database 11g
        -- Release 11.1
        --

        WHEN DBMS_DATAPUMP.KU$_DFHDR_MASTER_PIECE_COUNT THEN
          DBMS_OUTPUT.PUT_LINE('Master Table Piece Count:  ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_MASTER_PIECE_NUMBER THEN
          DBMS_OUTPUT.PUT_LINE('Master Table Piece Number: ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_DATA_COMPRESSED THEN
          DBMS_OUTPUT.PUT_LINE('Table Data Compressed:     ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_METADATA_ENCRYPTED THEN
          DBMS_OUTPUT.PUT_LINE('Metadata Encrypted:        ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_DATA_ENCRYPTED THEN
          DBMS_OUTPUT.PUT_LINE('Table Data Encrypted:      ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_COLUMNS_ENCRYPTED THEN
          DBMS_OUTPUT.PUT_LINE('TDE Columns Encrypted:     ' || value);
 
        --
        -- For the DBMS_DATAPUMP.KU$_DFHDR_ENCRYPTION_MODE item code a
        -- numeric value is returned. So examine that numeric value
        -- and display an appropriate name value for it.
        --
        WHEN DBMS_DATAPUMP.KU$_DFHDR_ENCRYPTION_MODE THEN
          CASE TO_NUMBER(value)
            WHEN DBMS_DATAPUMP.KU$_DFHDR_ENCMODE_NONE THEN
              DBMS_OUTPUT.PUT_LINE('Encryption Mode:           None');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_ENCMODE_PASSWORD THEN
              DBMS_OUTPUT.PUT_LINE('Encryption Mode:           Password');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_ENCMODE_DUAL THEN
              DBMS_OUTPUT.PUT_LINE('Encryption Mode:           Dual');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_ENCMODE_TRANS THEN
              DBMS_OUTPUT.PUT_LINE('Encryption Mode:           Transparent');
          END CASE;
 
        --
        -- The following item codes were introduced in Oracle Database 12c
        -- Release 12.1
        --
 
        --
        -- For the DBMS_DATAPUMP.KU$_DFHDR_COMPRESSION_ALG item code a
        -- numeric value is returned. So examine that numeric value and
        -- display an appropriate name value for it.
        --
        WHEN DBMS_DATAPUMP.KU$_DFHDR_COMPRESSION_ALG THEN
          CASE TO_NUMBER(value)
            WHEN DBMS_DATAPUMP.KU$_DFHDR_CMPALG_NONE THEN
              DBMS_OUTPUT.PUT_LINE('Compression Algorithm:     None');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_CMPALG_BASIC THEN
              DBMS_OUTPUT.PUT_LINE('Compression Algorithm:     Basic');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_CMPALG_LOW THEN
              DBMS_OUTPUT.PUT_LINE('Compression Algorithm:     Low');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_CMPALG_MEDIUM THEN
              DBMS_OUTPUT.PUT_LINE('Compression Algorithm:     Medium');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_CMPALG_HIGH THEN
              DBMS_OUTPUT.PUT_LINE('Compression Algorithm:     High');
          END CASE;
        ELSE NULL;  -- Ignore other, unrecognized dump file attributes.
      END CASE;
      ind := infoTab.NEXT(ind);
    END LOOP;
  END IF;
END;
/</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-oracle_datapump-api.html#GUID-EAD7AE4B-778A-4369-9842-68E026409045" title="Describes the Data Pump API, DBMS_DATAPUMP.">The Data Pump API</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
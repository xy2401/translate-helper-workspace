<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Linear referencing is a natural and convenient means to associate attributes or events to locations or portions of a linear feature. It has been widely used in transportation applications (such as for highways, railroads, and transit routes) and utilities applications (such as for gas and oil pipelines).">
      <meta name="description" content="Linear referencing is a natural and convenient means to associate attributes or events to locations or portions of a linear feature. It has been widely used in transportation applications (such as for highways, railroads, and transit routes) and utilities applications (such as for gas and oil pipelines).">
      <title>Linear Referencing System</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="Linear referencing is a natural and convenient means to associate attributes or events to locations or portions of a linear feature. It has been widely used in transportation applications (such as for highways, railroads, and transit routes) and utilities applications (such as for gas and oil pipelines).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="spatial-and-graph-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T14:11:51-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94799-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="coordinate-systems-concepts.html" title="Previous" type="text/html">
      <link rel="next" href="location-tracking-server-concepts.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Developer's Guide">
    <meta name="dcterms.isVersionOf" content="SPATL">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="coordinate-systems-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="location-tracking-server-concepts.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="spatial-concepts-usage.html" property="item" typeof="WebPage"><span property="name">  Conceptual and Usage Information </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Linear Referencing System</li>
            </ol>
            <a id="GUID-9793361B-6C73-41E1-8389-85D8788ED083" name="GUID-9793361B-6C73-41E1-8389-85D8788ED083"></a><a id="SPATL060"></a>
            
            <h2 id="SPATL-GUID-9793361B-6C73-41E1-8389-85D8788ED083" class="sect2"><span class="enumeration_chapter">7 </span> Linear Referencing System
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Linear referencing is a natural and convenient means to associate attributes or events to locations or portions of a linear feature. It has been widely used in transportation applications (such as for highways, railroads, and transit routes) and utilities applications (such as for gas and oil pipelines).</p>
               <p><a id="d62565e50" class="indexterm-anchor"></a><a id="d62565e54" class="indexterm-anchor"></a>The major advantage of linear referencing is its capability of locating attributes and events along a linear feature with only one parameter (usually known as <span class="italic">measure</span>) instead of two (such as <span class="italic">longitude/latitude</span> or <span class="italic">x/y</span> in Cartesian space). Sections of a linear feature can be referenced and created dynamically by indicating the start and end locations along the feature without explicitly storing them.
               </p>
               <p>The linear referencing system (LRS) application programming interface (API) in Oracle Spatial and Graph provides server-side LRS capabilities at the cartographic level. The linear measure information is directly integrated into the Oracle Spatial and Graph geometry structure. The Oracle Spatial and Graph LRS API provides support for dynamic segmentation, and it serves as a groundwork for third-party or middle-tier application development for virtually any linear referencing methods and models in any coordinate system.</p>
               <p>For an example of LRS, see <a href="lrs-linear-referencing-system-concepts.html#GUID-699CED71-3497-4826-A4A5-60BF13CD3770" title="This section presents a simplified example that uses LRS functions.">Example of LRS Functions</a>. However, you may want to read the rest of this chapter first, to understand the concepts that the example illustrates.
               </p>
               <p>For reference information about LRS functions and procedures, see <a href="SDO_LRS-reference.html#GUID-38A5534F-0B2D-410B-8210-3DFFD4E4AE5B" title="The MDSYS.SDO_LRS package contains subprograms that create, modify, query, and convert linear referencing elements."> SDO_LRS Package (Linear Referencing System) </a>.
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2">LRS Terms and Concepts</a><br>This topic explains important terms and concepts related to linear referencing support in Oracle Spatial and Graph.
                  </li>
                  <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-34C0AE0E-09AD-4765-A426-8AEBB7CE5A20">LRS Data Model</a><br>The Oracle Spatial and Graph LRS data model incorporates measure information into its geometry representation at the point level.
                  </li>
                  <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-CA7D44D7-CB40-4C33-9345-2C84F43CF8CA">Indexing of LRS Data</a><br>If LRS data has four dimensions (three plus the M dimension) and if you need to index all three non-measure dimensions, you must use a spatial R-tree index to index the data.
                  </li>
                  <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-E392761D-EF47-4764-8287-8E3D1D799D53">3D Formats of LRS Functions</a><br>Most LRS functions have formats that end in <span class="italic">_3D</span>: for example, DEFINE_GEOM_SEGMENT_3D, CLIP_GEOM_SEGMENT_3D, FIND_MEASURE_3D, and LOCATE_PT_3D. If a function has a <span class="italic">3D</span> format, it is identified in the Usage Notes for the function’s reference topic.
                  </li>
                  <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-247E53DE-3F27-4BE2-97D6-363F10814985">LRS Operations</a><br>This topic describes several linear referencing operations supported by the Oracle Spatial and Graph LRS API.
                  </li>
                  <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-2A6BC86B-0BE8-43F5-98D9-44E08ADF692C">Tolerance Values with LRS Functions</a><br>Many LRS functions require that you specify a tolerance value or one or more dimensional arrays.
                  </li>
                  <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-699CED71-3497-4826-A4A5-60BF13CD3770">Example of LRS Functions</a><br>This section presents a simplified example that uses LRS functions.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="spatial-concepts-usage.html#GUID-EEEED709-34A1-46EA-9AF3-869FD06E3076">Conceptual and Usage Information</a></p>
                  </div>
               </div>
            </div>
            <a id="SPATL739"></a><div class="props_rev_3"><a id="GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2" name="GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2"></a><h3 id="SPATL-GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2" class="sect3"><span class="enumeration_section">7.1 </span>LRS Terms and Concepts
               </h3>
               <div>
                  <p>This topic explains important terms and concepts related to linear referencing support in Oracle Spatial and Graph.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-FF93B930-F0C4-4CAF-8C13-52FFD8EFAE1D">Geometric Segments (LRS Segments)</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-2EF4D152-9019-4F02-9ABB-F6DE633BB7C7">Shape Points</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-A76A863C-C1D1-4993-8D9B-B3BB12C69CE5">Direction of a Geometric Segment</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-7420725A-15C0-47FC-AE35-4E42BAA642AD">Measure (Linear Measure)</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-2D8CA0D9-2EFC-4992-A4B3-9063668277E3">Offset</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-D3C81EE9-F7E0-4932-A0E0-56CFFA59375C">Measure Populating</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-1A64AD0D-14D7-48FE-A1F1-B056DECD752E">Measure Range of a Geometric Segment</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-3AF241F0-0AF5-4F2B-9BF2-955E7360E7CE">Projection</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-B1959CB1-088F-4494-8800-5E89EEC3E11F">LRS Point</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-F8B373AA-9F41-4586-BB3E-57FA4EBC21BE">Linear Features</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-B5434407-EC9A-4F49-A048-253544EBA930">Measures with Multiline Strings and Polygons with Holes</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-9793361B-6C73-41E1-8389-85D8788ED083" title="Linear referencing is a natural and convenient means to associate attributes or events to locations or portions of a linear feature. It has been widely used in transportation applications (such as for highways, railroads, and transit routes) and utilities applications (such as for gas and oil pipelines).">Linear Referencing System</a></p>
                     </div>
                  </div>
               </div>
               <a id="SPATL741"></a><a id="SPATL740"></a><div class="props_rev_3"><a id="GUID-FF93B930-F0C4-4CAF-8C13-52FFD8EFAE1D" name="GUID-FF93B930-F0C4-4CAF-8C13-52FFD8EFAE1D"></a><h4 id="SPATL-GUID-FF93B930-F0C4-4CAF-8C13-52FFD8EFAE1D" class="sect4"><span class="enumeration_section">7.1.1 </span>Geometric Segments (LRS Segments) 
                  </h4>
                  <div>
                     <p><a id="d62565e340" class="indexterm-anchor"></a><a id="d62565e344" class="indexterm-anchor"></a><a id="d62565e348" class="indexterm-anchor"></a><span class="bold">Geometric segments</span> are basic LRS elements in Oracle Spatial and Graph. A geometric segment can be any of the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Line string: an ordered, nonbranching, and continuous geometry (for example, a simple road)</p>
                        </li>
                        <li>
                           <p>Multiline string: nonconnected line strings (for example, a highway with a gap caused by a lake or a bypass road)</p>
                        </li>
                        <li>
                           <p>Polygon (for example, a racetrack or a scenic tour route that starts and ends at the same point)</p>
                        </li>
                     </ul>
                     <p>A geometric segment must contain at least start and end measures for its start and end points. Measures of points of interest (such as highway exits) on the geometric segments can also be assigned. These measures are either assigned by users or derived from existing geometric segments. <a href="lrs-linear-referencing-system-concepts.html#GUID-FF93B930-F0C4-4CAF-8C13-52FFD8EFAE1D__I884952">Figure 7-1</a> shows a geometric segment with four line segments and one arc. Points on the geometric segment are represented by triplets (x, y, m), where <span class="italic">x</span> and <span class="italic">y</span> describe the location and <span class="italic">m</span> denotes the measure (with each measure value underlined in <a href="lrs-linear-referencing-system-concepts.html#GUID-FF93B930-F0C4-4CAF-8C13-52FFD8EFAE1D__I884952">Figure 7-1</a>). 
                     </p>
                     <div class="figure" id="GUID-FF93B930-F0C4-4CAF-8C13-52FFD8EFAE1D__I884952">
                        <p class="titleinfigure">Figure 7-1 Geometric Segment</p><img src="img/geoseg.gif" alt="Description of Figure 7-1 follows" title="Description of Figure 7-1 follows" longdesc="img_text/geoseg.html"><br><a href="img_text/geoseg.html">Description of "Figure 7-1 Geometric Segment"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2" title="This topic explains important terms and concepts related to linear referencing support in Oracle Spatial and Graph.">LRS Terms and Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL742"></a><div class="props_rev_3"><a id="GUID-2EF4D152-9019-4F02-9ABB-F6DE633BB7C7" name="GUID-2EF4D152-9019-4F02-9ABB-F6DE633BB7C7"></a><h4 id="SPATL-GUID-2EF4D152-9019-4F02-9ABB-F6DE633BB7C7" class="sect4"><span class="enumeration_section">7.1.2 </span>Shape Points
                  </h4>
                  <div>
                     <p><a id="d62565e447" class="indexterm-anchor"></a><a id="d62565e449" class="indexterm-anchor"></a><span class="bold">Shape points</span> are points that are specified when an LRS segment is constructed, and that are assigned measure information. In Oracle Spatial and Graph, a line segment is represented by its start and end points, and an arc is represented by three points: start, middle, and end points of the arc. You must specify these points as shape points, but you can also specify other points as shape points if you need measure information stored for these points (for example, an exit in the middle of a straight part of the highway).
                     </p>
                     <p>Thus, shape points can serve one or both of the following purposes: to indicate the direction of the segment (for example, a turn or curve), and to identify a point of interest for which measure information is to be stored.</p>
                     <p>Shape points might not directly relate to mileposts or reference posts in LRS; they are used as internal reference points. The measure information of shape points is automatically populated when you define the LRS segment using the <a href="SDO_LRS-reference.html#GUID-9A02C622-CEBA-4C2C-84F6-43D916011AE8">SDO_LRS.DEFINE_GEOM_SEGMENT</a> procedure, which is described in <a href="SDO_LRS-reference.html#GUID-38A5534F-0B2D-410B-8210-3DFFD4E4AE5B" title="The MDSYS.SDO_LRS package contains subprograms that create, modify, query, and convert linear referencing elements."> SDO_LRS Package (Linear Referencing System) </a>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2" title="This topic explains important terms and concepts related to linear referencing support in Oracle Spatial and Graph.">LRS Terms and Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL743"></a><div class="props_rev_3"><a id="GUID-A76A863C-C1D1-4993-8D9B-B3BB12C69CE5" name="GUID-A76A863C-C1D1-4993-8D9B-B3BB12C69CE5"></a><h4 id="SPATL-GUID-A76A863C-C1D1-4993-8D9B-B3BB12C69CE5" class="sect4"><span class="enumeration_section">7.1.3 </span>Direction of a Geometric Segment
                  </h4>
                  <div>
                     <p><a id="d62565e532" class="indexterm-anchor"></a><a id="d62565e534" class="indexterm-anchor"></a>The <span class="bold">direction</span> of a geometric segment is indicated from the start point of the geometric segment to the end point. The direction is determined by the order of the vertices (from start point to end point) in the geometry definition. Measures of points on a geometric segment always either increase or decrease along the direction of the geometric segment.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2" title="This topic explains important terms and concepts related to linear referencing support in Oracle Spatial and Graph.">LRS Terms and Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL744"></a><div class="props_rev_3"><a id="GUID-7420725A-15C0-47FC-AE35-4E42BAA642AD" name="GUID-7420725A-15C0-47FC-AE35-4E42BAA642AD"></a><h4 id="SPATL-GUID-7420725A-15C0-47FC-AE35-4E42BAA642AD" class="sect4"><span class="enumeration_section">7.1.4 </span>Measure (Linear Measure)
                  </h4>
                  <div>
                     <p><a id="d62565e603" class="indexterm-anchor"></a><a id="d62565e605" class="indexterm-anchor"></a>The <span class="bold">measure</span> of a point along a geometric segment is the linear distance (in the measure dimension) to the point measured from the start point (for increasing values) or end point (for decreasing values) of the geometric segment. The measure information does not necessarily have to be of the same scale as the distance. However, the linear mapping relationship between measure and distance is always preserved.
                     </p>
                     <p>Some LRS functions use <span class="italic">offset</span> instead of measure to represent measured distance along linear features. Although some other linear referencing systems might use offset to mean what the Oracle Spatial and Graph LRS refers to as measure, offset has a different meaning in Oracle Spatial and Graph from measure, as explained in <a href="lrs-linear-referencing-system-concepts.html#GUID-2D8CA0D9-2EFC-4992-A4B3-9063668277E3">Offset</a>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2" title="This topic explains important terms and concepts related to linear referencing support in Oracle Spatial and Graph.">LRS Terms and Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL746"></a><a id="SPATL745"></a><div class="props_rev_3"><a id="GUID-2D8CA0D9-2EFC-4992-A4B3-9063668277E3" name="GUID-2D8CA0D9-2EFC-4992-A4B3-9063668277E3"></a><h4 id="SPATL-GUID-2D8CA0D9-2EFC-4992-A4B3-9063668277E3" class="sect4"><span class="enumeration_section">7.1.5 </span>Offset
                  </h4>
                  <div>
                     <p><a id="d62565e683" class="indexterm-anchor"></a>The <span class="bold">offset</span> of a point along a geometric segment is the perpendicular distance between the point and the geometric segment. Offsets are positive if the points are on the left side along the segment direction and are negative if they are on the right side. Points are on a geometric segment if their offsets to the segment are zero.
                     </p>
                     <p>The unit of measurement for an offset is the same as for the coordinate system associated with the geometric segment. For geodetic data, the default unit of measurement is meters.</p>
                     <p><a href="lrs-linear-referencing-system-concepts.html#GUID-2D8CA0D9-2EFC-4992-A4B3-9063668277E3__I891553">Figure 7-2</a> shows how a point can be located along a geometric segment with measure and offset information. By assigning an offset together with a measure, it is possible to locate not only points that are on the geometric segment, but also points that are perpendicular to the geometric segment.
                     </p>
                     <div class="figure" id="GUID-2D8CA0D9-2EFC-4992-A4B3-9063668277E3__I891553">
                        <p class="titleinfigure">Figure 7-2 Describing a Point Along a Segment with a Measure and an Offset</p><img src="img/point.gif" alt="Description of Figure 7-2 follows" title="Description of Figure 7-2 follows" longdesc="img_text/point.html"><br><a href="img_text/point.html">Description of "Figure 7-2 Describing a Point Along a Segment with a Measure and an Offset"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2" title="This topic explains important terms and concepts related to linear referencing support in Oracle Spatial and Graph.">LRS Terms and Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL748"></a><a id="SPATL749"></a><a id="SPATL750"></a><a id="SPATL747"></a><div class="props_rev_3"><a id="GUID-D3C81EE9-F7E0-4932-A0E0-56CFFA59375C" name="GUID-D3C81EE9-F7E0-4932-A0E0-56CFFA59375C"></a><h4 id="SPATL-GUID-D3C81EE9-F7E0-4932-A0E0-56CFFA59375C" class="sect4"><span class="enumeration_section">7.1.6 </span>Measure Populating
                  </h4>
                  <div>
                     <p><a id="d62565e763" class="indexterm-anchor"></a><a id="d62565e767" class="indexterm-anchor"></a>Any unassigned measures of a geometric segment are automatically populated based upon their distance distribution. This is done before any LRS operations for geometric segments with unknown measures (NULL in Oracle Spatial and Graph). The resulting geometric segments from any LRS operations return the measure information associated with geometric segments. The measure of a point on the geometric segment can be obtained based upon a linear mapping relationship between its previous and next known measures or locations. See the algorithm representation in <a href="lrs-linear-referencing-system-concepts.html#GUID-D3C81EE9-F7E0-4932-A0E0-56CFFA59375C__I884936">Figure 7-3</a> and the example in <a href="lrs-linear-referencing-system-concepts.html#GUID-D3C81EE9-F7E0-4932-A0E0-56CFFA59375C__I888540">Figure 7-4</a>. 
                     </p>
                     <div class="figure" id="GUID-D3C81EE9-F7E0-4932-A0E0-56CFFA59375C__I884936">
                        <p class="titleinfigure">Figure 7-3 Measures, Distances, and Their Mapping Relationship</p><img src="img/maprel.gif" alt="Description of Figure 7-3 follows" title="Description of Figure 7-3 follows" longdesc="img_text/maprel.html"><br><a href="img_text/maprel.html">Description of "Figure 7-3 Measures, Distances, and Their Mapping Relationship"</a></div>
                     <!-- class="figure" -->
                     <div class="figure" id="GUID-D3C81EE9-F7E0-4932-A0E0-56CFFA59375C__I888540">
                        <p class="titleinfigure">Figure 7-4 Measure Populating of a Geometric Segment</p><img src="img/measpop.gif" alt="Description of Figure 7-4 follows" title="Description of Figure 7-4 follows" longdesc="img_text/measpop.html"><br><a href="img_text/measpop.html">Description of "Figure 7-4 Measure Populating of a Geometric Segment"</a></div>
                     <!-- class="figure" -->
                     <p>Measures are evenly spaced between assigned measures. However, the assigned measures for points of interest on a geometric segment do not need to be evenly spaced. This could eliminate the problem of error accumulation and account for inaccuracy of data source.</p>
                     <p>Moreover, the assigned measures do not even need to reflect actual distances (for example, they can reflect estimated driving time); they can be any valid values within the measure range. <a href="lrs-linear-referencing-system-concepts.html#GUID-D3C81EE9-F7E0-4932-A0E0-56CFFA59375C__I889839">Figure 7-5</a> shows the measure population that results when assigned measure values are not proportional and reflect widely varying gaps.
                     </p>
                     <div class="figure" id="GUID-D3C81EE9-F7E0-4932-A0E0-56CFFA59375C__I889839">
                        <p class="titleinfigure">Figure 7-5 Measure Populating with Disproportional Assigned Measures</p><img src="img/disprop.gif" alt="Description of Figure 7-5 follows" title="Description of Figure 7-5 follows" longdesc="img_text/disprop.html"><br><a href="img_text/disprop.html">Description of "Figure 7-5 Measure Populating with Disproportional Assigned Measures"</a></div>
                     <!-- class="figure" -->
                     <p>In all cases, measure populating is done in an incremental fashion along the segment direction. This improves the performance of current and subsequent LRS operations.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2" title="This topic explains important terms and concepts related to linear referencing support in Oracle Spatial and Graph.">LRS Terms and Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL751"></a><div class="props_rev_3"><a id="GUID-1A64AD0D-14D7-48FE-A1F1-B056DECD752E" name="GUID-1A64AD0D-14D7-48FE-A1F1-B056DECD752E"></a><h4 id="SPATL-GUID-1A64AD0D-14D7-48FE-A1F1-B056DECD752E" class="sect4"><span class="enumeration_section">7.1.7 </span>Measure Range of a Geometric Segment
                  </h4>
                  <div>
                     <p><a id="d62565e860" class="indexterm-anchor"></a><a id="d62565e862" class="indexterm-anchor"></a>The start and end measures of a geometric segment define the linear <span class="bold">measure range</span> of the geometric segment. Any valid LRS measures of a geometric segment must fall within its linear measure range.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2" title="This topic explains important terms and concepts related to linear referencing support in Oracle Spatial and Graph.">LRS Terms and Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL752"></a><div class="props_rev_3"><a id="GUID-3AF241F0-0AF5-4F2B-9BF2-955E7360E7CE" name="GUID-3AF241F0-0AF5-4F2B-9BF2-955E7360E7CE"></a><h4 id="SPATL-GUID-3AF241F0-0AF5-4F2B-9BF2-955E7360E7CE" class="sect4"><span class="enumeration_section">7.1.8 </span>Projection
                  </h4>
                  <div>
                     <p><a id="d62565e932" class="indexterm-anchor"></a><a id="d62565e934" class="indexterm-anchor"></a>The <span class="bold">projection</span> of a point along a geometric segment is the point on the geometric segment with the minimum distance to the specified point. The measure information of the resulting point is also returned in the point geometry.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2" title="This topic explains important terms and concepts related to linear referencing support in Oracle Spatial and Graph.">LRS Terms and Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL753"></a><div class="props_rev_3"><a id="GUID-B1959CB1-088F-4494-8800-5E89EEC3E11F" name="GUID-B1959CB1-088F-4494-8800-5E89EEC3E11F"></a><h4 id="SPATL-GUID-B1959CB1-088F-4494-8800-5E89EEC3E11F" class="sect4"><span class="enumeration_section">7.1.9 </span>LRS Point
                  </h4>
                  <div>
                     <p><a id="d62565e1003" class="indexterm-anchor"></a><a id="d62565e1007" class="indexterm-anchor"></a><a id="d62565e1009" class="indexterm-anchor"></a><span class="bold">LRS points</span> are points with linear measure information along a geometric segment. A valid LRS point is a point geometry with measure information.
                     </p>
                     <p>All LRS point data must be stored in the SDO_ELEM_INFO_ARRAY and SDO_ORDINATE_ARRAY, and cannot be stored in the SDO_POINT field in the SDO_GEOMETRY definition of the point.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2" title="This topic explains important terms and concepts related to linear referencing support in Oracle Spatial and Graph.">LRS Terms and Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL755"></a><a id="SPATL754"></a><div class="props_rev_3"><a id="GUID-F8B373AA-9F41-4586-BB3E-57FA4EBC21BE" name="GUID-F8B373AA-9F41-4586-BB3E-57FA4EBC21BE"></a><h4 id="SPATL-GUID-F8B373AA-9F41-4586-BB3E-57FA4EBC21BE" class="sect4"><span class="enumeration_section">7.1.10 </span>Linear Features
                  </h4>
                  <div>
                     <p><a id="d62565e1080" class="indexterm-anchor"></a><a id="d62565e1082" class="indexterm-anchor"></a><span class="bold">Linear features</span> are any spatial objects that can be treated as a logical set of linear segments. Examples of linear features are highways in transportation applications and pipelines in utility industry applications. The relationship of linear features, geometric segments, and LRS points is shown in <a href="lrs-linear-referencing-system-concepts.html#GUID-F8B373AA-9F41-4586-BB3E-57FA4EBC21BE__I884386">Figure 7-6</a>, where a single linear feature consists of three geometric segments, and three LRS points are shown on the first segment.
                     </p>
                     <div class="figure" id="GUID-F8B373AA-9F41-4586-BB3E-57FA4EBC21BE__I884386">
                        <p class="titleinfigure">Figure 7-6 Linear Feature, Geometric Segments, and LRS Points</p><img src="img/linear.gif" alt="Description of Figure 7-6 follows" title="Description of Figure 7-6 follows" longdesc="img_text/linear.html"><br><a href="img_text/linear.html">Description of "Figure 7-6 Linear Feature, Geometric Segments, and LRS Points"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2" title="This topic explains important terms and concepts related to linear referencing support in Oracle Spatial and Graph.">LRS Terms and Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL756"></a><div class="props_rev_3"><a id="GUID-B5434407-EC9A-4F49-A048-253544EBA930" name="GUID-B5434407-EC9A-4F49-A048-253544EBA930"></a><h4 id="SPATL-GUID-B5434407-EC9A-4F49-A048-253544EBA930" class="sect4"><span class="enumeration_section">7.1.11 </span>Measures with Multiline Strings and Polygons with Holes
                  </h4>
                  <div>
                     <p>With a multiline string or polygon with hole LRS geometry, the <a href="SDO_LRS-reference.html#GUID-9A02C622-CEBA-4C2C-84F6-43D916011AE8">SDO_LRS.DEFINE_GEOM_SEGMENT</a> procedure and <a href="SDO_LRS-reference.html#GUID-70E4BB1A-250F-413E-B06C-D134C6B8E33D">SDO_LRS.CONVERT_TO_LRS_GEOM</a> function by default assign the same measure value to the end point of one segment and the start point (separated by a gap) of the next segment, although you can later assign different measure values to points. Thus, by default there will duplicate measure values in different segments for such geometries. In such cases, LRS subprograms use the first point with a specified measure, except when doing so would result in an invalid geometry.
                     </p>
                     <p>For example, assume that in a multiline string LRS geometry, the first segment is from measures 0 through 100 and the second segment is from measures 100 through 150. If you use the <a href="SDO_LRS-reference.html#GUID-0A7398C5-9112-415D-9F75-38DFF40DEEBA">SDO_LRS.LOCATE_PT</a> function to find the point at measure 100, the returned point will be at measure 100 in the first segment. If you use the <a href="SDO_LRS-reference.html#GUID-FC99FDEA-8CCD-47A0-B43C-59A6523D98A6">SDO_LRS.CLIP_GEOM_SEGMENT</a>, <a href="SDO_LRS-reference.html#GUID-EF61FA31-92A2-4333-B2B3-3D19B8B29EB8">SDO_LRS.DYNAMIC_SEGMENT</a>, or <a href="SDO_LRS-reference.html#GUID-26627C35-104C-42A1-9F0D-0388109A85CE">SDO_LRS.OFFSET_GEOM_SEGMENT</a> function to return the geometry object between measures 75 and 125, the result is a multiline string geometry consisting of two segments. If you use the same function to return the geometry object between measures 100 and 125, the point at measure 100 in the first segment is ignored, and the result is a line string along the second segment from measures 100 through 125.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-606C936B-DB4F-4FE0-A5F6-3C1C15FA30C2" title="This topic explains important terms and concepts related to linear referencing support in Oracle Spatial and Graph.">LRS Terms and Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="SPATL759"></a><a id="SPATL758"></a><a id="SPATL757"></a><div class="props_rev_3"><a id="GUID-34C0AE0E-09AD-4765-A426-8AEBB7CE5A20" name="GUID-34C0AE0E-09AD-4765-A426-8AEBB7CE5A20"></a><h3 id="SPATL-GUID-34C0AE0E-09AD-4765-A426-8AEBB7CE5A20" class="sect3"><span class="enumeration_section">7.2 </span>LRS Data Model
               </h3>
               <div>
                  <p>The Oracle Spatial and Graph LRS data model incorporates measure information into its geometry representation at the point level.</p>
                  <p><a id="d62565e1265" class="indexterm-anchor"></a><a id="d62565e1269" class="indexterm-anchor"></a>The measure information is directly integrated into the Oracle Spatial and Graph model. To accomplish this, an additional <span class="italic">measure</span> dimension must be added to the Oracle Spatial and Graph metadata.
                  </p>
                  <p>Oracle Spatial and Graph LRS support affects the spatial metadata and data (the geometries). <a href="lrs-linear-referencing-system-concepts.html#GUID-34C0AE0E-09AD-4765-A426-8AEBB7CE5A20__I885124">Example 7-1</a> shows how a measure dimension can be added to two-dimensional geometries in the spatial metadata. The measure dimension must be the last element of the SDO_DIM_ARRAY in a spatial object definition (shown in bold in <a href="lrs-linear-referencing-system-concepts.html#GUID-34C0AE0E-09AD-4765-A426-8AEBB7CE5A20__I885124">Example 7-1</a>).
                  </p>
                  <div class="figure" id="GUID-34C0AE0E-09AD-4765-A426-8AEBB7CE5A20__I884481">
                     <p class="titleinfigure">Figure 7-7 Creating a Geometric Segment</p><img src="img/creating.gif" alt="Description of Figure 7-7 follows" title="Description of Figure 7-7 follows" longdesc="img_text/creating.html"><br><a href="img_text/creating.html">Description of "Figure 7-7 Creating a Geometric Segment"</a></div>
                  <!-- class="figure" -->
                  <p>In <a href="lrs-linear-referencing-system-concepts.html#GUID-34C0AE0E-09AD-4765-A426-8AEBB7CE5A20__I884481">Figure 7-7</a>, the geometric segment has the following definition (with measure values underlined):
                  </p><pre class="oac_no_warn" dir="ltr">SDO_GEOMETRY(3302, NULL, NULL,
     SDO_ELEM_INFO_ARRAY(1,2,1),
     SDO_ORDINATE_ARRAY(5,10,<span class="underline">0</span>, 20,5,<span class="underline">NULL</span>, 35,10,<span class="underline">NULL</span>, 55,10,<span class="underline">100</span>))
</pre><p>Whenever a geometric segment is defined, its start and end measures must be defined or derived from some existing geometric segment. The unsigned measures of all shape points on a geometric segment will be automatically populated. </p>
                  <p>The SDO_GTYPE of any point geometry used with an LRS function must be 3301.</p>
                  <div class="example" id="GUID-34C0AE0E-09AD-4765-A426-8AEBB7CE5A20__I885124">
                     <p class="titleinexample">Example 7-1 Including LRS Measure Dimension in Spatial Metadata</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_geom_metadata
    (TABLE_NAME,
     COLUMN_NAME,
     DIMINFO,
     SRID)
  VALUES(
  'LRS_ROUTES',
  'GEOMETRY',
  SDO_DIM_ARRAY (
    SDO_DIM_ELEMENT('X', 0, 20, 0.005),
    SDO_DIM_ELEMENT('Y', 0, 20, 0.005),
    <span class="bold">SDO_DIM_ELEMENT('M', 0, 100, 0.005)</span>),
  NULL);
</pre><p>After adding the new measure dimension, geometries with measure information such as geometric segments and LRS points can be represented. An example of creating a geometric segment with three line segments is shown in <a href="lrs-linear-referencing-system-concepts.html#GUID-34C0AE0E-09AD-4765-A426-8AEBB7CE5A20__I884481">Figure 7-7</a>. 
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-9793361B-6C73-41E1-8389-85D8788ED083" title="Linear referencing is a natural and convenient means to associate attributes or events to locations or portions of a linear feature. It has been widely used in transportation applications (such as for highways, railroads, and transit routes) and utilities applications (such as for gas and oil pipelines).">Linear Referencing System</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SPATL760"></a><div class="props_rev_3"><a id="GUID-CA7D44D7-CB40-4C33-9345-2C84F43CF8CA" name="GUID-CA7D44D7-CB40-4C33-9345-2C84F43CF8CA"></a><h3 id="SPATL-GUID-CA7D44D7-CB40-4C33-9345-2C84F43CF8CA" class="sect3"><span class="enumeration_section">7.3 </span>Indexing of LRS Data
               </h3>
               <div>
                  <p>If LRS data has four dimensions (three plus the M dimension) and if you need to index all three non-measure dimensions, you must use a spatial R-tree index to index the data.</p>
                  <p>You must also specify PARAMETERS('sdo_indx_dims=3') in the <a href="sql-indexing-spatial-data.html#GUID-BB6D7C9E-277B-4F49-BDD4-539CFE88D12C">CREATE INDEX</a> statement to ensure that the first three dimensions are indexed. Note, however, that if you specify an <code class="codeph">sdo_indx_dims</code> value of 3 or higher, only those operators listed in <a href="spatial-concepts.html#GUID-6F3A9C6E-3617-47D9-AE61-CF9F1770555A" title="Oracle Spatial and Graph supports the storage and retrieval of three-dimensional spatial data, which can include points, point clouds (collections of points), lines, polygons, surfaces, and solids.">Three-Dimensional Spatial Objects</a> as considering all three dimensions can be used on the indexed geometries; the other operators described in <a href="spatial-operators-reference.html#GUID-85422854-5133-4F1D-BF0E-228CA6EDAF87" title="This chapter describes the operators that you can use when working with the spatial object data type."> Spatial Operators </a> cannot be used. (The default value for the <code class="codeph">sdo_indx_dims</code> keyword is 2, which would cause only the first two dimensions to be indexed.) For example, if the dimensions are X, Y, Z, and M, specify <code class="codeph">sdo_indx_dims=3</code> to index the X, Y, and Z dimensions, but not the measure (M) dimension. Do not include the measure dimension in a spatial index, because this causes additional processing overhead and produces no benefit.
                  </p>
                  <p>Information about the <a href="sql-indexing-spatial-data.html#GUID-BB6D7C9E-277B-4F49-BDD4-539CFE88D12C">CREATE INDEX</a> statement and its parameters and keywords is in <a href="sql-indexing-spatial-data.html#GUID-E356011F-BC91-44EC-9E86-E5E786EDC2BC" title="This chapter describes the SQL statements used when working with the spatial object data type."> SQL Statements for Indexing Spatial Data</a>.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-9793361B-6C73-41E1-8389-85D8788ED083" title="Linear referencing is a natural and convenient means to associate attributes or events to locations or portions of a linear feature. It has been widely used in transportation applications (such as for highways, railroads, and transit routes) and utilities applications (such as for gas and oil pipelines).">Linear Referencing System</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SPATL761"></a><div class="props_rev_3"><a id="GUID-E392761D-EF47-4764-8287-8E3D1D799D53" name="GUID-E392761D-EF47-4764-8287-8E3D1D799D53"></a><h3 id="SPATL-GUID-E392761D-EF47-4764-8287-8E3D1D799D53" class="sect3"><span class="enumeration_section">7.4 </span>3D Formats of LRS Functions
               </h3>
               <div>
                  <p>Most LRS functions have formats that end in <span class="italic">_3D</span>: for example, DEFINE_GEOM_SEGMENT_3D, CLIP_GEOM_SEGMENT_3D, FIND_MEASURE_3D, and LOCATE_PT_3D. If a function has a <span class="italic">3D</span> format, it is identified in the Usage Notes for the function’s reference topic.
                  </p>
                  <p>The <span class="italic">3D</span> formats are supported only for line string and multiline string geometries. (They are not supported for polygons, arcs, or circles.) The <span class="italic">3D</span> formats should be used only when the geometry object has four dimensions and the fourth dimension is the measure (for example, X, Y, Z, and M), and only when you want the function to consider the first three dimensions (for example, X, Y, and Z). If the standard format of a function (that is, without the <span class="italic">_3D</span>) is used on a geometry with four dimensions, the function considers only the first two dimensions (for example, X and Y).
                  </p>
                  <p>For example, the following format considers the X, Y, and Z dimensions of the specified GEOM object in performing the clip operation:</p><pre class="oac_no_warn" dir="ltr">SELECT  SDO_LRS.CLIP_GEOM_SEGMENT_3D(a.geom, m.diminfo, 5, 10)
  FROM routes r, user_sdo_geom_metadata m
  WHERE m.table_name = 'ROUTES' AND m.column_name = 'GEOM'
    AND r.route_id = 1;
</pre><p>However, the following format considers only the X and Y dimensions, and ignores the Z dimension, of the specified GEOM object in performing the clip operation:</p><pre class="oac_no_warn" dir="ltr">SELECT  SDO_LRS.CLIP_GEOM_SEGMENT(a.geom, m.diminfo, 5, 10)
  FROM routes r, user_sdo_geom_metadata m
  WHERE m.table_name = 'ROUTES' AND m.column_name = 'GEOM'
    AND r.route_id = 1;
</pre><p>The parameters for the standard and <span class="italic">3D</span> formats of any function are the same, and the Usage Notes apply to both formats.
                  </p>
                  <p>If the parameters for an LRS function include both a line (or multiline) string and a point (LRS point), both the line string and the point must have the same number of dimensions. For example:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For the <a href="SDO_LRS-reference.html#GUID-BBCE2843-7303-4FB6-B832-F335925F4F8B">SDO_LRS.PROJECT_PT</a> function, the input <code class="codeph">geom_segment</code> (line) must have two dimensions (X.Y) plus the measure dimension, and the the input <code class="codeph">point</code> point must be a two-dimensional LRS point geometry with a measure dimension (SDO_GTYPE = 3301). (This is the case in the example for that function.)
                        </p>
                     </li>
                     <li>
                        <p>For the SDO_LRS.PROJECT_PT_3D function. the input <code class="codeph">geom_segment</code> must have three dimensions (X,Y,Z) plus the measure dimension, and the input <code class="codeph">point</code> point must be a three-dimensional LRS point geometry with a measure dimension (SDO_GTYPE = 3401).
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-9793361B-6C73-41E1-8389-85D8788ED083" title="Linear referencing is a natural and convenient means to associate attributes or events to locations or portions of a linear feature. It has been widely used in transportation applications (such as for highways, railroads, and transit routes) and utilities applications (such as for gas and oil pipelines).">Linear Referencing System</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SPATL762"></a><div class="props_rev_3"><a id="GUID-247E53DE-3F27-4BE2-97D6-363F10814985" name="GUID-247E53DE-3F27-4BE2-97D6-363F10814985"></a><h3 id="SPATL-GUID-247E53DE-3F27-4BE2-97D6-363F10814985" class="sect3"><span class="enumeration_section">7.5 </span>LRS Operations
               </h3>
               <div>
                  <p>This topic describes several linear referencing operations supported by the Oracle Spatial and Graph LRS API.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-8B79B6E2-469D-4E6B-9B1B-394ED1E6EE66">Defining a Geometric Segment</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-3E2F0C1F-1040-4340-A259-DCB8A81EC584">Redefining a Geometric Segment</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-C3E5E1B7-D0D9-4DCB-A325-86F3C926EFBC">Clipping a Geometric Segment (Dynamic Segmentation)</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-443BF6B9-1AB9-431E-AEEC-CCB8376D6B86">Splitting a Geometric Segment</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-AAF5BEE8-6FFB-439B-A64D-1C629487B1BC">Concatenating Geometric Segments</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-E0961173-0F8E-4F74-9B7A-B8ACFDFE1D38">Scaling a Geometric Segment</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-6FF6530A-59CE-4756-BDDE-5D095CCE190F">Offsetting a Geometric Segment</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-DF662D84-9717-4C13-95F8-1E71B67114C9">Locating a Point on a Geometric Segment</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-AE76EA98-4709-48E4-8B6C-21BB5DE288DC">Projecting a Point onto a Geometric Segment</a><br></li>
                     <li class="ulchildlink"><a href="lrs-linear-referencing-system-concepts.html#GUID-108C0A77-9D9A-40ED-BE79-0FCBC5172299">Converting LRS Geometries</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-9793361B-6C73-41E1-8389-85D8788ED083" title="Linear referencing is a natural and convenient means to associate attributes or events to locations or portions of a linear feature. It has been widely used in transportation applications (such as for highways, railroads, and transit routes) and utilities applications (such as for gas and oil pipelines).">Linear Referencing System</a></p>
                     </div>
                  </div>
               </div>
               <a id="SPATL764"></a><a id="SPATL763"></a><div class="props_rev_3"><a id="GUID-8B79B6E2-469D-4E6B-9B1B-394ED1E6EE66" name="GUID-8B79B6E2-469D-4E6B-9B1B-394ED1E6EE66"></a><h4 id="SPATL-GUID-8B79B6E2-469D-4E6B-9B1B-394ED1E6EE66" class="sect4"><span class="enumeration_section">7.5.1 </span>Defining a Geometric Segment 
                  </h4>
                  <div>
                     <p><a id="d62565e1751" class="indexterm-anchor"></a><a id="d62565e1755" class="indexterm-anchor"></a>There are two ways to create a geometric segment with measure information: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Construct a geometric segment and assign measures explicitly.</p>
                        </li>
                        <li>
                           <p>Define a geometric segment with specified start and end, and any other measures, in an ascending or descending order. Measures of shape points with unknown (unassigned) measures (null values) in the geometric segment will be automatically populated according to their locations and distance distribution. </p>
                        </li>
                     </ul>
                     <p><a href="lrs-linear-referencing-system-concepts.html#GUID-8B79B6E2-469D-4E6B-9B1B-394ED1E6EE66__I887823">Figure 7-8</a> shows different ways of defining a geometric segment:
                     </p>
                     <div class="figure" id="GUID-8B79B6E2-469D-4E6B-9B1B-394ED1E6EE66__I887823">
                        <p class="titleinfigure">Figure 7-8 Defining a Geometric Segment</p><img src="img/defining.gif" alt="Description of Figure 7-8 follows" title="Description of Figure 7-8 follows" longdesc="img_text/defining.html"><br><a href="img_text/defining.html">Description of "Figure 7-8 Defining a Geometric Segment"</a></div>
                     <!-- class="figure" -->
                     <p>An LRS segment must be defined (or must already exist) before any LRS operations can proceed. That is, the start, end, and any other assigned measures must be present to derive the location from a specified measure. The measure information of intermediate shape points will automatically be populated if measure values are not assigned.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-247E53DE-3F27-4BE2-97D6-363F10814985" title="This topic describes several linear referencing operations supported by the Oracle Spatial and Graph LRS API.">LRS Operations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL766"></a><a id="SPATL765"></a><div class="props_rev_3"><a id="GUID-3E2F0C1F-1040-4340-A259-DCB8A81EC584" name="GUID-3E2F0C1F-1040-4340-A259-DCB8A81EC584"></a><h4 id="SPATL-GUID-3E2F0C1F-1040-4340-A259-DCB8A81EC584" class="sect4"><span class="enumeration_section">7.5.2 </span>Redefining a Geometric Segment
                  </h4>
                  <div>
                     <p><a id="d62565e1840" class="indexterm-anchor"></a><a id="d62565e1844" class="indexterm-anchor"></a>You can redefine a geometric segment to replace the existing measures of all shape points between the start and end point with automatically calculated measures. Redefining a segment can be useful if errors have been made in one or more explicit measure assignments, and you want to start over with proportionally assigned measures.
                     </p>
                     <p><a href="lrs-linear-referencing-system-concepts.html#GUID-3E2F0C1F-1040-4340-A259-DCB8A81EC584__I889831">Figure 7-9</a> shows the redefinition of a segment where the existing (before) assigned measure values are not proportional and reflect widely varying gaps.
                     </p>
                     <div class="figure" id="GUID-3E2F0C1F-1040-4340-A259-DCB8A81EC584__I889831">
                        <p class="titleinfigure">Figure 7-9 Redefining a Geometric Segment</p><img src="img/redefining.gif" alt="Description of Figure 7-9 follows" title="Description of Figure 7-9 follows" longdesc="img_text/redefining.html"><br><a href="img_text/redefining.html">Description of "Figure 7-9 Redefining a Geometric Segment"</a></div>
                     <!-- class="figure" -->
                     <p>After the segment redefinition in <a href="lrs-linear-referencing-system-concepts.html#GUID-3E2F0C1F-1040-4340-A259-DCB8A81EC584__I889831">Figure 7-9</a>, the populated measures reflect proportional distances along the segment.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-247E53DE-3F27-4BE2-97D6-363F10814985" title="This topic describes several linear referencing operations supported by the Oracle Spatial and Graph LRS API.">LRS Operations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL768"></a><a id="SPATL767"></a><div class="props_rev_3"><a id="GUID-C3E5E1B7-D0D9-4DCB-A325-86F3C926EFBC" name="GUID-C3E5E1B7-D0D9-4DCB-A325-86F3C926EFBC"></a><h4 id="SPATL-GUID-C3E5E1B7-D0D9-4DCB-A325-86F3C926EFBC" class="sect4"><span class="enumeration_section">7.5.3 </span>Clipping a Geometric Segment (Dynamic Segmentation)
                  </h4>
                  <div>
                     <p><a id="d62565e1923" class="indexterm-anchor"></a><a id="d62565e1927" class="indexterm-anchor"></a><a id="d62565e1931" class="indexterm-anchor"></a>You can clip a geometric segment to create a new geometric segment out of an existing geometric segment, as shown in <a href="lrs-linear-referencing-system-concepts.html#GUID-C3E5E1B7-D0D9-4DCB-A325-86F3C926EFBC__I890600">Figure 7-10</a>, part a.
                     </p>
                     <div class="figure" id="GUID-C3E5E1B7-D0D9-4DCB-A325-86F3C926EFBC__I890600">
                        <p class="titleinfigure">Figure 7-10 Clipping, Splitting, and Concatenating Geometric Segments</p><img src="img/clipping.gif" alt="Description of Figure 7-10 follows" title="Description of Figure 7-10 follows" longdesc="img_text/clipping.html"><br><a href="img_text/clipping.html">Description of "Figure 7-10 Clipping, Splitting, and Concatenating Geometric Segments"</a></div>
                     <!-- class="figure" -->
                     <p>In <a href="lrs-linear-referencing-system-concepts.html#GUID-C3E5E1B7-D0D9-4DCB-A325-86F3C926EFBC__I890600">Figure 7-10</a>, part a, a segment is created from part of a larger segment. The new segment has its own start and end points, and the direction is the same as in the original larger segment.
                     </p>
                     <p>Clipping segments enables you to perform <span class="bold">dynamic segmentation</span>, where you clip the line at specific measure values. A scenario for such usage would be creating a table of road conditions, where for a given road, some segments are designated as in good condition and other segments are designated as in bad condition. For example, the segment between measures 100 and 120 might be in good condition, but the segment between measures 120 and 125 might be in poor condition. See the reference information for the synonymous functions <a href="SDO_LRS-reference.html#GUID-FC99FDEA-8CCD-47A0-B43C-59A6523D98A6">SDO_LRS.CLIP_GEOM_SEGMENT</a> and <a href="SDO_LRS-reference.html#GUID-EF61FA31-92A2-4333-B2B3-3D19B8B29EB8">SDO_LRS.DYNAMIC_SEGMENT</a>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-247E53DE-3F27-4BE2-97D6-363F10814985" title="This topic describes several linear referencing operations supported by the Oracle Spatial and Graph LRS API.">LRS Operations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL769"></a><div class="props_rev_3"><a id="GUID-443BF6B9-1AB9-431E-AEEC-CCB8376D6B86" name="GUID-443BF6B9-1AB9-431E-AEEC-CCB8376D6B86"></a><h4 id="SPATL-GUID-443BF6B9-1AB9-431E-AEEC-CCB8376D6B86" class="sect4"><span class="enumeration_section">7.5.4 </span>Splitting a Geometric Segment
                  </h4>
                  <div>
                     <p><a id="d62565e2017" class="indexterm-anchor"></a><a id="d62565e2021" class="indexterm-anchor"></a>You can create two new geometric segments by splitting a geometric segment, as shown in the figure in <a href="lrs-linear-referencing-system-concepts.html#GUID-C3E5E1B7-D0D9-4DCB-A325-86F3C926EFBC">Clipping a Geometric Segment (Dynamic Segmentation)</a>, part b. The direction of each new segment is the same as in the original segment.
                     </p>
                     <div class="infoboxnote" id="GUID-443BF6B9-1AB9-431E-AEEC-CCB8376D6B86__GUID-1B55FD84-1FBD-436E-959C-B5D07AD348B4">
                        <p class="notep1">Note:</p>
                        <p>In <a href="lrs-linear-referencing-system-concepts.html#GUID-C3E5E1B7-D0D9-4DCB-A325-86F3C926EFBC">Clipping a Geometric Segment (Dynamic Segmentation)</a> and other topics, small gaps between segments are used in illutrations of segment splitting and concatenation. Each gap simply reinforces the fact that two different segments are involved. However, the two segments (such as segment 1 and segment 2 in <a href="lrs-linear-referencing-system-concepts.html#GUID-C3E5E1B7-D0D9-4DCB-A325-86F3C926EFBC">Clipping a Geometric Segment (Dynamic Segmentation)</a>, parts b and c) are actually connected. The tolerance (see <a href="spatial-concepts.html#GUID-7469388B-6D23-4294-904F-78CA3B7191D3">Tolerance</a>) is considered in determining whether or not segments are connected.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-247E53DE-3F27-4BE2-97D6-363F10814985" title="This topic describes several linear referencing operations supported by the Oracle Spatial and Graph LRS API.">LRS Operations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL771"></a><a id="SPATL772"></a><a id="SPATL770"></a><div class="props_rev_3"><a id="GUID-AAF5BEE8-6FFB-439B-A64D-1C629487B1BC" name="GUID-AAF5BEE8-6FFB-439B-A64D-1C629487B1BC"></a><h4 id="SPATL-GUID-AAF5BEE8-6FFB-439B-A64D-1C629487B1BC" class="sect4"><span class="enumeration_section">7.5.5 </span>Concatenating Geometric Segments
                  </h4>
                  <div>
                     <p><a id="d62565e2106" class="indexterm-anchor"></a><a id="d62565e2110" class="indexterm-anchor"></a>You can create a new geometric segment by concatenating two geometric segments, as shown in part c of the figure in <a href="lrs-linear-referencing-system-concepts.html#GUID-C3E5E1B7-D0D9-4DCB-A325-86F3C926EFBC">Clipping a Geometric Segment (Dynamic Segmentation)</a>. The geometric segments do not need to be spatially connected, although they are connected in the illustration in part c of that figure. (If the segments are not spatially connected, the concatenated result is a multiline string.) The measures of the second geometric segment are shifted so that the end measure of the first segment is the same as the start measure of the second segment. The direction of the segment resulting from the concatenation is the same as in the two original segments.
                     </p>
                     <p>Measure assignments for the clipping, splitting, and concatenating operations in the figure in <a href="lrs-linear-referencing-system-concepts.html#GUID-C3E5E1B7-D0D9-4DCB-A325-86F3C926EFBC">Clipping a Geometric Segment (Dynamic Segmentation)</a> are shown in the following figure. Measure information and segment direction are preserved in a consistent manner. The assignment is done automatically when the operations have completed.
                     </p>
                     <div class="figure" id="GUID-AAF5BEE8-6FFB-439B-A64D-1C629487B1BC__I887072">
                        <p class="titleinfigure">Figure 7-11 Measure Assignment in Geometric Segment Operations</p><img src="img/geosegoper.gif" alt="Description of Figure 7-11 follows" title="Description of Figure 7-11 follows" longdesc="img_text/geosegoper.html"><br><a href="img_text/geosegoper.html">Description of "Figure 7-11 Measure Assignment in Geometric Segment Operations"</a></div>
                     <!-- class="figure" -->
                     <p><a id="d62565e2129" class="indexterm-anchor"></a><a id="d62565e2133" class="indexterm-anchor"></a>The direction of the geometric segment resulting from concatenation is always the direction of the first segment (<code class="codeph">geom_segment1</code> in the call to the <a href="SDO_LRS-reference.html#GUID-F6BA9668-821C-4674-9533-0C0EF5E918D3">SDO_LRS.CONCATENATE_GEOM_SEGMENTS</a> function), as shown in the following figure.
                     </p>
                     <div class="figure" id="GUID-AAF5BEE8-6FFB-439B-A64D-1C629487B1BC__I892282">
                        <p class="titleinfigure">Figure 7-12 Segment Direction with Concatenation</p><img src="img/concat.gif" alt="Description of Figure 7-12 follows" title="Description of Figure 7-12 follows" longdesc="img_text/concat.html"><br><a href="img_text/concat.html">Description of "Figure 7-12 Segment Direction with Concatenation"</a></div>
                     <!-- class="figure" -->
                     <p><a id="d62565e2151" class="indexterm-anchor"></a><a id="d62565e2155" class="indexterm-anchor"></a>In addition to explicitly concatenating two connected segments using the <a href="SDO_LRS-reference.html#GUID-F6BA9668-821C-4674-9533-0C0EF5E918D3">SDO_LRS.CONCATENATE_GEOM_SEGMENTS</a> function, you can perform aggregate concatenation: that is, you can concatenate all connected geometric segments in a column (layer) using the <a href="spatial-aggregate-functions.html#GUID-FFB228EB-A6DF-4ACC-9E18-28723C9E56E7">SDO_AGGR_LRS_CONCAT</a> spatial aggregate function. (See the description and example of the <a href="spatial-aggregate-functions.html#GUID-FFB228EB-A6DF-4ACC-9E18-28723C9E56E7">SDO_AGGR_LRS_CONCAT</a> spatial aggregate function in <a href="spatial-aggregate-functions.html#GUID-F6D76405-3876-4834-9FAB-75F97BDF4BD9" title="This chapter contains reference and usage information for the spatial aggregate functions."> Spatial Aggregate Functions</a>.)
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-247E53DE-3F27-4BE2-97D6-363F10814985" title="This topic describes several linear referencing operations supported by the Oracle Spatial and Graph LRS API.">LRS Operations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL774"></a><a id="SPATL773"></a><div class="props_rev_3"><a id="GUID-E0961173-0F8E-4F74-9B7A-B8ACFDFE1D38" name="GUID-E0961173-0F8E-4F74-9B7A-B8ACFDFE1D38"></a><h4 id="SPATL-GUID-E0961173-0F8E-4F74-9B7A-B8ACFDFE1D38" class="sect4"><span class="enumeration_section">7.5.6 </span>Scaling a Geometric Segment 
                  </h4>
                  <div>
                     <p><a id="d62565e2243" class="indexterm-anchor"></a><a id="d62565e2247" class="indexterm-anchor"></a>You can create a new geometric segment by performing a linear scaling operation on a geometric segment. <a href="lrs-linear-referencing-system-concepts.html#GUID-E0961173-0F8E-4F74-9B7A-B8ACFDFE1D38__I884764">Figure 7-13</a> shows the mapping relationship for geometric segment scaling.
                     </p>
                     <div class="figure" id="GUID-E0961173-0F8E-4F74-9B7A-B8ACFDFE1D38__I884764">
                        <p class="titleinfigure">Figure 7-13 Scaling a Geometric Segment</p><img src="img/scaling.gif" alt="Description of Figure 7-13 follows" title="Description of Figure 7-13 follows" longdesc="img_text/scaling.html"><br><a href="img_text/scaling.html">Description of "Figure 7-13 Scaling a Geometric Segment"</a></div>
                     <!-- class="figure" -->
                     <p>In general, scaling a geometric segment only involves rearranging measures of the newly created geometric segment. However, if the scaling factor is negative, the order of the shape points needs to be reversed so that measures will increase along the geometric segment's direction (which is defined by the order of the shape points). </p>
                     <p>A scale operation can perform any combination of the following operations:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Translating (shifting) measure information. (For example, add the same value to Ms and Me to get M's and M'e.)</p>
                        </li>
                        <li>
                           <p>Reversing measure information. (Let M's = Me, M'e = Ms, and Mshift = 0.)</p>
                        </li>
                        <li>
                           <p>Performing simple scaling of measure information. (Let Mshift = 0.)</p>
                        </li>
                     </ul>
                     <p>For examples of these operations, see the Usage Notes and Examples for the<a href="SDO_LRS-reference.html#GUID-7FB461F0-C221-490C-94BF-AE49ACE42828">SDO_LRS.SCALE_GEOM_SEGMENT</a>, <a href="SDO_LRS-reference.html#GUID-3633A045-B824-4275-B6B3-5A6155F12415">SDO_LRS.TRANSLATE_MEASURE</a>, <a href="SDO_LRS-reference.html#GUID-94B55D69-FAC9-4FF3-8EC2-084FA21D305B">SDO_LRS.REVERSE_GEOMETRY</a>, and <a href="SDO_LRS-reference.html#GUID-EF05083F-E47C-4AB4-BCF0-FA39A3B9A25B">SDO_LRS.REDEFINE_GEOM_SEGMENT</a> subprograms in <a href="SDO_LRS-reference.html#GUID-38A5534F-0B2D-410B-8210-3DFFD4E4AE5B" title="The MDSYS.SDO_LRS package contains subprograms that create, modify, query, and convert linear referencing elements."> SDO_LRS Package (Linear Referencing System) </a>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-247E53DE-3F27-4BE2-97D6-363F10814985" title="This topic describes several linear referencing operations supported by the Oracle Spatial and Graph LRS API.">LRS Operations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL776"></a><a id="SPATL775"></a><div class="props_rev_3"><a id="GUID-6FF6530A-59CE-4756-BDDE-5D095CCE190F" name="GUID-6FF6530A-59CE-4756-BDDE-5D095CCE190F"></a><h4 id="SPATL-GUID-6FF6530A-59CE-4756-BDDE-5D095CCE190F" class="sect4"><span class="enumeration_section">7.5.7 </span>Offsetting a Geometric Segment
                  </h4>
                  <div>
                     <p><a id="d62565e2360" class="indexterm-anchor"></a><a id="d62565e2364" class="indexterm-anchor"></a>You can create a new geometric segment by performing an offsetting operation on a geometric segment. <a href="lrs-linear-referencing-system-concepts.html#GUID-6FF6530A-59CE-4756-BDDE-5D095CCE190F__I892782">Figure 7-14</a> shows the mapping relationship for geometric segment offsetting.
                     </p>
                     <div class="figure" id="GUID-6FF6530A-59CE-4756-BDDE-5D095CCE190F__I892782">
                        <p class="titleinfigure">Figure 7-14 Offsetting a Geometric Segment</p><img src="img/offsetting.gif" alt="Description of Figure 7-14 follows" title="Description of Figure 7-14 follows" longdesc="img_text/offsetting.html"><br><a href="img_text/offsetting.html">Description of "Figure 7-14 Offsetting a Geometric Segment"</a></div>
                     <!-- class="figure" -->
                     <p>In the offsetting operation shown in <a href="lrs-linear-referencing-system-concepts.html#GUID-6FF6530A-59CE-4756-BDDE-5D095CCE190F__I892782">Figure 7-14</a>, the resulting geometric segment is offset by 5 units from the specified start and end measures of the original segment. 
                     </p>
                     <p>For more information, see the Usage Notes and Examples for the <a href="SDO_LRS-reference.html#GUID-26627C35-104C-42A1-9F0D-0388109A85CE">SDO_LRS.OFFSET_GEOM_SEGMENT</a> function in <a href="SDO_LRS-reference.html#GUID-38A5534F-0B2D-410B-8210-3DFFD4E4AE5B" title="The MDSYS.SDO_LRS package contains subprograms that create, modify, query, and convert linear referencing elements."> SDO_LRS Package (Linear Referencing System) </a>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-247E53DE-3F27-4BE2-97D6-363F10814985" title="This topic describes several linear referencing operations supported by the Oracle Spatial and Graph LRS API.">LRS Operations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL778"></a><a id="SPATL779"></a><a id="SPATL777"></a><div class="props_rev_3"><a id="GUID-DF662D84-9717-4C13-95F8-1E71B67114C9" name="GUID-DF662D84-9717-4C13-95F8-1E71B67114C9"></a><h4 id="SPATL-GUID-DF662D84-9717-4C13-95F8-1E71B67114C9" class="sect4"><span class="enumeration_section">7.5.8 </span>Locating a Point on a Geometric Segment
                  </h4>
                  <div>
                     <p><a id="d62565e2457" class="indexterm-anchor"></a><a id="d62565e2461" class="indexterm-anchor"></a>You can find the position of a point described by a measure and an offset on a geometric segment (see <a href="lrs-linear-referencing-system-concepts.html#GUID-DF662D84-9717-4C13-95F8-1E71B67114C9__I884817">Figure 7-15</a>).
                     </p>
                     <div class="figure" id="GUID-DF662D84-9717-4C13-95F8-1E71B67114C9__I884817">
                        <p class="titleinfigure">Figure 7-15 Locating a Point Along a Segment with a Measure and an Offset</p><img src="img/point_offset.gif" alt="Description of Figure 7-15 follows" title="Description of Figure 7-15 follows" longdesc="img_text/point_offset.html"><br><a href="img_text/point_offset.html">Description of "Figure 7-15 Locating a Point Along a Segment with a Measure and an Offset"</a></div>
                     <!-- class="figure" -->
                     <p>There is always a unique location with a specific measure on a geometric segment. Ambiguity arises when offsets are given and the points described by the measures fall on shape points of the geometric segment (see <a href="lrs-linear-referencing-system-concepts.html#GUID-DF662D84-9717-4C13-95F8-1E71B67114C9__I884861">Figure 7-16</a>).
                     </p>
                     <div class="figure" id="GUID-DF662D84-9717-4C13-95F8-1E71B67114C9__I884861">
                        <p class="titleinfigure">Figure 7-16 Ambiguity in Location Referencing with Offsets</p><img src="img/ambiguity.gif" alt="Description of Figure 7-16 follows" title="Description of Figure 7-16 follows" longdesc="img_text/ambiguity.html"><br><a href="img_text/ambiguity.html">Description of "Figure 7-16 Ambiguity in Location Referencing with Offsets"</a></div>
                     <!-- class="figure" -->
                     <p>As shown in <a href="lrs-linear-referencing-system-concepts.html#GUID-DF662D84-9717-4C13-95F8-1E71B67114C9__I884861">Figure 7-16</a>, an offset arc of a shape point on a geometric segment is an arc on which all points have the same minimum distance to the shape point. As a result, all points on the offset arc are represented by the same (measure, offset) pair. To resolve this one-to-many mapping problem, the middle point on the offset arc is returned. 
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-247E53DE-3F27-4BE2-97D6-363F10814985" title="This topic describes several linear referencing operations supported by the Oracle Spatial and Graph LRS API.">LRS Operations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL781"></a><a id="SPATL780"></a><div class="props_rev_3"><a id="GUID-AE76EA98-4709-48E4-8B6C-21BB5DE288DC" name="GUID-AE76EA98-4709-48E4-8B6C-21BB5DE288DC"></a><h4 id="SPATL-GUID-AE76EA98-4709-48E4-8B6C-21BB5DE288DC" class="sect4"><span class="enumeration_section">7.5.9 </span>Projecting a Point onto a Geometric Segment
                  </h4>
                  <div>
                     <p><a id="d62565e2548" class="indexterm-anchor"></a><a id="d62565e2550" class="indexterm-anchor"></a><a id="d62565e2554" class="indexterm-anchor"></a>You can find the projection point of a point with respect to a geometric segment. The point to be projected can be on or off the segment. If the point is on the segment, the point and its projection point are the same.
                     </p>
                     <p>Projection is a reverse operation of the point-locating operation shown in <a href="lrs-linear-referencing-system-concepts.html#GUID-DF662D84-9717-4C13-95F8-1E71B67114C9__I884817">Figure 7-15</a>. Similar to a point-locating operation, all points on the offset arc of a shape point will have the same projection point (that is, the shape point itself), measure, and offset (see <a href="lrs-linear-referencing-system-concepts.html#GUID-DF662D84-9717-4C13-95F8-1E71B67114C9__I884861">Figure 7-16</a>). If there are multiple projection points for a point, the first one from the start point is returned (Projection Point 1 in both illustrations in <a href="lrs-linear-referencing-system-concepts.html#GUID-AE76EA98-4709-48E4-8B6C-21BB5DE288DC__I884057">Figure 7-17</a>).
                     </p>
                     <div class="figure" id="GUID-AE76EA98-4709-48E4-8B6C-21BB5DE288DC__I884057">
                        <p class="titleinfigure">Figure 7-17 Multiple Projection Points</p><img src="img/multiprojpts.gif" alt="Description of Figure 7-17 follows" title="Description of Figure 7-17 follows" longdesc="img_text/multiprojpts.html"><br><a href="img_text/multiprojpts.html">Description of "Figure 7-17 Multiple Projection Points"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-247E53DE-3F27-4BE2-97D6-363F10814985" title="This topic describes several linear referencing operations supported by the Oracle Spatial and Graph LRS API.">LRS Operations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SPATL783"></a><a id="SPATL782"></a><div class="props_rev_3"><a id="GUID-108C0A77-9D9A-40ED-BE79-0FCBC5172299" name="GUID-108C0A77-9D9A-40ED-BE79-0FCBC5172299"></a><h4 id="SPATL-GUID-108C0A77-9D9A-40ED-BE79-0FCBC5172299" class="sect4"><span class="enumeration_section">7.5.10 </span>Converting LRS Geometries
                  </h4>
                  <div>
                     <p><a id="d62565e2634" class="indexterm-anchor"></a><a id="d62565e2638" class="indexterm-anchor"></a>You can convert geometries from standard line string format to LRS format, and the reverse. The main use of conversion functions will probably occur if you have a large amount of existing line string data, in which case conversion is a convenient alternative to creating all of the LRS segments manually. However, if you need to convert LRS segments to standard line strings for certain applications, that capability is provided also.
                     </p>
                     <p>Functions are provided to convert:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Individual line strings or points</p>
                           <p>For conversion from standard format to LRS format, a measure dimension (named <span class="italic">M</span> by default) is added, and measure information is provided for each point. For conversion from LRS format to standard format, the measure dimension and information are removed. In both cases, the dimensional information (DIMINFO) metadata in the USER_SDO_GEOM_METADATA view is not affected.
                           </p>
                        </li>
                        <li>
                           <p>Layers (all geometries in a column)</p>
                           <p>For conversion from standard format to LRS format, a measure dimension (named <span class="italic">M</span> by default) is added, but no measure information is provided for each point. For conversion from LRS format to standard format, the measure dimension and information are removed. In both cases, the dimensional information (DIMINFO) metadata in the USER_SDO_GEOM_METADATA view is modified as needed.
                           </p>
                        </li>
                        <li>
                           <p>Dimensional information (DIMINFO)</p>
                           <p>The dimensional information (DIMINFO) metadata in the USER_SDO_GEOM_METADATA view is modified as needed. For example, converting a standard dimensional array with X and Y dimensions (SDO_DIM_ELEMENT) to an LRS dimensional array causes an M dimension (SDO_DIM_ELEMENT) to be added.</p>
                        </li>
                     </ul>
                     <p><a href="lrs-linear-referencing-system-concepts.html#GUID-108C0A77-9D9A-40ED-BE79-0FCBC5172299__I890004">Figure 7-18</a> shows the addition of measure information when a standard line string is converted to an LRS line string (using the <a href="SDO_LRS-reference.html#GUID-70E4BB1A-250F-413E-B06C-D134C6B8E33D">SDO_LRS.CONVERT_TO_LRS_GEOM</a> function). The measure dimension values are underlined in <a href="lrs-linear-referencing-system-concepts.html#GUID-108C0A77-9D9A-40ED-BE79-0FCBC5172299__I890004">Figure 7-18</a>.
                     </p>
                     <div class="figure" id="GUID-108C0A77-9D9A-40ED-BE79-0FCBC5172299__I890004">
                        <p class="titleinfigure">Figure 7-18 Conversion from Standard to LRS Line String</p><img src="img/conversion.gif" alt="Description of Figure 7-18 follows" title="Description of Figure 7-18 follows" longdesc="img_text/conversion.html"><br><a href="img_text/conversion.html">Description of "Figure 7-18 Conversion from Standard to LRS Line String"</a></div>
                     <!-- class="figure" -->
                     <p>For conversions of point geometries, the SDO_POINT attribute (described in <a href="spatial-datatypes-metadata.html#GUID-1BEDE913-87BA-4EBD-BFFB-09C95C93A04E">SDO_POINT</a>) in the returned geometry is affected as follows:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If a standard point is converted to an LRS point, the SDO_POINT attribute information in the input geometry is used to set the SDO_ELEM_INFO and SDO_ORDINATES attributes (described in <a href="spatial-datatypes-metadata.html#GUID-270AE39D-7B83-46D0-9DD6-E5D99C045021">SDO_ELEM_INFO</a> and <a href="spatial-datatypes-metadata.html#GUID-79D7620B-5526-40FD-9604-9642B79908F2">SDO_ORDINATES</a>) in the resulting geometry, and the SDO_POINT attribute in the resulting geometry is set to null.
                           </p>
                        </li>
                        <li>
                           <p>If an LRS point is converted to a standard point, the information in the SDO_ELEM_INFO and SDO_ORDINATES attributes (described in <a href="spatial-datatypes-metadata.html#GUID-270AE39D-7B83-46D0-9DD6-E5D99C045021">SDO_ELEM_INFO</a> and <a href="spatial-datatypes-metadata.html#GUID-79D7620B-5526-40FD-9604-9642B79908F2">SDO_ORDINATES</a>) in the input geometry is used to set the SDO_POINT attribute information in the resulting geometry, and the SDO_ELEM_INFO and SDO_ORDINATES attributes in the resulting geometry are set to null.
                           </p>
                        </li>
                     </ul>
                     <p>The conversion functions are listed in <a href="SDO_LRS-reference.html#GUID-38A5534F-0B2D-410B-8210-3DFFD4E4AE5B" title="The MDSYS.SDO_LRS package contains subprograms that create, modify, query, and convert linear referencing elements."> SDO_LRS Package (Linear Referencing System) </a>. See also the reference information in <a href="SDO_LRS-reference.html#GUID-38A5534F-0B2D-410B-8210-3DFFD4E4AE5B" title="The MDSYS.SDO_LRS package contains subprograms that create, modify, query, and convert linear referencing elements."> SDO_LRS Package (Linear Referencing System) </a> about each conversion function.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-247E53DE-3F27-4BE2-97D6-363F10814985" title="This topic describes several linear referencing operations supported by the Oracle Spatial and Graph LRS API.">LRS Operations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="SPATL785"></a><a id="SPATL784"></a><div class="props_rev_3"><a id="GUID-2A6BC86B-0BE8-43F5-98D9-44E08ADF692C" name="GUID-2A6BC86B-0BE8-43F5-98D9-44E08ADF692C"></a><h3 id="SPATL-GUID-2A6BC86B-0BE8-43F5-98D9-44E08ADF692C" class="sect3"><span class="enumeration_section">7.6 </span>Tolerance Values with LRS Functions
               </h3>
               <div>
                  <p>Many LRS functions require that you specify a tolerance value or one or more dimensional arrays.</p>
                  <p>Thus, you can control whether to specify a single tolerance value for all non-measure dimensions or to use the tolerance associated with each non-measure dimension in the dimensional array or arrays. The tolerance is applied only to the geometry portion of the data, not to the measure dimension. The tolerance value for geodetic data is in meters, and for non-geodetic data it is in the unit of measurement associated with the data. (For a detailed discussion of tolerance, see <a href="spatial-concepts.html#GUID-7469388B-6D23-4294-904F-78CA3B7191D3">Tolerance</a>.)
                  </p>
                  <p>Be sure that the tolerance value used is appropriate to the data and your purpose. If the results of LRS functions seem imprecise or incorrect, you may need to specify a smaller tolerance value.</p>
                  <p>For clip operations (see <a href="lrs-linear-referencing-system-concepts.html#GUID-C3E5E1B7-D0D9-4DCB-A325-86F3C926EFBC">Clipping a Geometric Segment</a>) and offset operations (see <a href="lrs-linear-referencing-system-concepts.html#GUID-6FF6530A-59CE-4756-BDDE-5D095CCE190F">Offsetting a Geometric Segment</a>), if the returned segment has any shape points within the tolerance value of the input geometric segment from what would otherwise be the start point or end point of the returned segment, the shape point is used as the start point or end point of the returned segment. This is done to ensure that the resulting geometry does not contain any redundant vertices, which would cause the geometry to be invalid. For example, assume that the tolerance associated with the geometric segment (non-geodetic data) in <a href="lrs-linear-referencing-system-concepts.html#GUID-2A6BC86B-0BE8-43F5-98D9-44E08ADF692C__CIHGJHBI">Figure 7-19</a> is 0.5. 
                  </p>
                  <div class="figure" id="GUID-2A6BC86B-0BE8-43F5-98D9-44E08ADF692C__CIHGJHBI">
                     <p class="titleinfigure">Figure 7-19 Segment for Clip Operation Affected by Tolerance</p><img src="img/lrs_tol.gif" alt="Description of Figure 7-19 follows" title="Description of Figure 7-19 follows" longdesc="img_text/lrs_tol.html"><br><a href="img_text/lrs_tol.html">Description of "Figure 7-19 Segment for Clip Operation Affected by Tolerance"</a></div>
                  <!-- class="figure" -->
                  <p>If you request a clip operation to return the segment between measure values 0 (the start point) and 61.5 in <a href="lrs-linear-referencing-system-concepts.html#GUID-2A6BC86B-0BE8-43F5-98D9-44E08ADF692C__CIHGJHBI">Figure 7-19</a>, and if the distance between the points associated with measure values 61.5 and 61.257 is less than the 0.5 tolerance value, the end point of the returned segment is (35, 10, 61.257).
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-9793361B-6C73-41E1-8389-85D8788ED083" title="Linear referencing is a natural and convenient means to associate attributes or events to locations or portions of a linear feature. It has been widely used in transportation applications (such as for highways, railroads, and transit routes) and utilities applications (such as for gas and oil pipelines).">Linear Referencing System</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SPATL787"></a><a id="SPATL788"></a><a id="SPATL789"></a><a id="SPATL790"></a><a id="SPATL786"></a><div class="props_rev_3"><a id="GUID-699CED71-3497-4826-A4A5-60BF13CD3770" name="GUID-699CED71-3497-4826-A4A5-60BF13CD3770"></a><h3 id="SPATL-GUID-699CED71-3497-4826-A4A5-60BF13CD3770" class="sect3"><span class="enumeration_section">7.7 </span>Example of LRS Functions
               </h3>
               <div>
                  <p>This section presents a simplified example that uses LRS functions.</p>
                  <p><a id="d62565e2897" class="indexterm-anchor"></a><a id="d62565e2901" class="indexterm-anchor"></a>It refers to concepts that are explained in this chapter and uses functions documented in <a href="SDO_LRS-reference.html#GUID-38A5534F-0B2D-410B-8210-3DFFD4E4AE5B" title="The MDSYS.SDO_LRS package contains subprograms that create, modify, query, and convert linear referencing elements."> SDO_LRS Package (Linear Referencing System) </a>.
                  </p>
                  <p>This example uses the road that is illustrated in <a href="lrs-linear-referencing-system-concepts.html#GUID-699CED71-3497-4826-A4A5-60BF13CD3770__I888413">Figure 7-20</a>.
                  </p>
                  <div class="figure" id="GUID-699CED71-3497-4826-A4A5-60BF13CD3770__I888413">
                     <p class="titleinfigure">Figure 7-20 Simplified LRS Example: Highway</p><img src="img/highway.gif" alt="Description of Figure 7-20 follows" title="Description of Figure 7-20 follows" longdesc="img_text/highway.html"><br><a href="img_text/highway.html">Description of "Figure 7-20 Simplified LRS Example: Highway"</a></div>
                  <!-- class="figure" -->
                  <p>In <a href="lrs-linear-referencing-system-concepts.html#GUID-699CED71-3497-4826-A4A5-60BF13CD3770__I888413">Figure 7-20</a>, the highway (Route 1) starts at point 2,2 and ends at point 5,14, follows the path shown, and has six entrance-exit points (Exit 1 through Exit 6). For simplicity, each unit on the graph represents one unit of measure, and thus the measure from start to end is 27 (the segment from Exit 5 to Exit 6 being the hypotenuse of a 3-4-5 right triangle).
                  </p>
                  <p>Each row in <a href="lrs-linear-referencing-system-concepts.html#GUID-699CED71-3497-4826-A4A5-60BF13CD3770__BABECGJD" title="This is a table of Highway Features and LRS Counterparts (corresponding features).">Table 7-1</a> lists an actual highway-related feature and the LRS feature that corresponds to it or that can be used to represent it.
                  </p>
                  <div class="tblformal" id="GUID-699CED71-3497-4826-A4A5-60BF13CD3770__BABECGJD">
                     <p class="titleintable">Table 7-1 Highway Features and LRS Counterparts</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Highway Features and LRS Counterparts" summary="This is a table of Highway Features and LRS Counterparts (corresponding features)." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="53%" id="d62565e2943">Highway Feature</th>
                              <th align="left" valign="bottom" width="47%" id="d62565e2946">LRS Feature</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d62565e2951" headers="d62565e2943 ">
                                 <p>Named route, road, or street</p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d62565e2951 d62565e2946 ">
                                 <p>LRS segment, or linear feature (logical set of segments)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d62565e2958" headers="d62565e2943 ">
                                 <p>Mile or kilometer marker</p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d62565e2958 d62565e2946 ">
                                 <p>Measure</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d62565e2965" headers="d62565e2943 ">
                                 <p>Accident reporting and location tracking</p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d62565e2965 d62565e2946 ">
                                 <p><a href="SDO_LRS-reference.html#GUID-0A7398C5-9112-415D-9F75-38DFF40DEEBA">SDO_LRS.LOCATE_PT</a> function
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d62565e2975" headers="d62565e2943 ">
                                 <p>Construction zone (portion of a road)</p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d62565e2975 d62565e2946 ">
                                 <p><a href="SDO_LRS-reference.html#GUID-FC99FDEA-8CCD-47A0-B43C-59A6523D98A6">SDO_LRS.CLIP_GEOM_SEGMENT</a> function
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d62565e2985" headers="d62565e2943 ">
                                 <p>Road extension (adding at the beginning or end) or combination (designating or renaming two roads that meet as one road)</p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d62565e2985 d62565e2946 ">
                                 <p><a href="SDO_LRS-reference.html#GUID-F6BA9668-821C-4674-9533-0C0EF5E918D3">SDO_LRS.CONCATENATE_GEOM_SEGMENTS</a> function
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d62565e2995" headers="d62565e2943 ">
                                 <p>Road reconstruction or splitting (resulting in two named roads from one named road)</p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d62565e2995 d62565e2946 ">
                                 <p><a href="SDO_LRS-reference.html#GUID-1CEF3B63-70D9-4A2B-9388-B4B33D710B24">SDO_LRS.SPLIT_GEOM_SEGMENT</a> procedure
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d62565e3005" headers="d62565e2943 ">
                                 <p>Finding the closest point on the road to a point off the road (such as a building)</p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d62565e3005 d62565e2946 ">
                                 <p><a href="SDO_LRS-reference.html#GUID-BBCE2843-7303-4FB6-B832-F335925F4F8B">SDO_LRS.PROJECT_PT</a> function
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d62565e3015" headers="d62565e2943 ">
                                 <p>Guard rail or fence alongside a road</p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d62565e3015 d62565e2946 ">
                                 <p><a href="SDO_LRS-reference.html#GUID-26627C35-104C-42A1-9F0D-0388109A85CE">SDO_LRS.OFFSET_GEOM_SEGMENT</a> function
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><a href="lrs-linear-referencing-system-concepts.html#GUID-699CED71-3497-4826-A4A5-60BF13CD3770__BABFDJGE">Example 7-2</a> does the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Creates a table to hold the segment depicted in <a href="lrs-linear-referencing-system-concepts.html#GUID-699CED71-3497-4826-A4A5-60BF13CD3770__I888413">Figure 7-20</a></p>
                     </li>
                     <li>
                        <p>Inserts the definition of the highway depicted in <a href="lrs-linear-referencing-system-concepts.html#GUID-699CED71-3497-4826-A4A5-60BF13CD3770__I888413">Figure 7-20</a> into the table
                        </p>
                     </li>
                     <li>
                        <p>Inserts the necessary metadata into the USER_SDO_GEOM_METADATA view</p>
                     </li>
                     <li>
                        <p>Uses PL/SQL and SQL statements to define the segment and perform operations on it</p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-699CED71-3497-4826-A4A5-60BF13CD3770__BABFDJGE">
                     <p class="titleinexample">Example 7-2 Simplified Example: Highway</p><pre class="oac_no_warn" dir="ltr">-- Create a table for routes (highways).
CREATE TABLE lrs_routes (
  route_id  NUMBER PRIMARY KEY,
  route_name  VARCHAR2(32),
  route_geometry  SDO_GEOMETRY);

-- Populate table with just one route for this example.
INSERT INTO lrs_routes VALUES(
  1,
  'Route1',
  SDO_GEOMETRY(
    3302,  -- line string, 3 dimensions: X,Y,M
    NULL,
    NULL,
    SDO_ELEM_INFO_ARRAY(1,2,1), -- one line string, straight segments
    SDO_ORDINATE_ARRAY(
      2,2,0,   -- Start point - Exit1; 0 is measure from start.
      2,4,2,   -- Exit2; 2 is measure from start. 
      8,4,8,   -- Exit3; 8 is measure from start. 
      12,4,12,  -- Exit4; 12 is measure from start. 
      12,10,NULL,  -- Not an exit; measure automatically calculated and filled.
      8,10,22,  -- Exit5; 22 is measure from start.  
      5,14,27)  -- End point (Exit6); 27 is measure from start.
  )
);

-- Update the spatial metadata.
INSERT INTO user_sdo_geom_metadata
    (TABLE_NAME,
     COLUMN_NAME,
     DIMINFO,
     SRID)
  VALUES (
  'lrs_routes',
  'route_geometry',
  SDO_DIM_ARRAY(   -- 20X20 grid
    SDO_DIM_ELEMENT('X', 0, 20, 0.005),
    SDO_DIM_ELEMENT('Y', 0, 20, 0.005),
    SDO_DIM_ELEMENT('M', 0, 20, 0.005) -- Measure dimension
     ),
  NULL   -- SRID
);

-- Create the spatial index.
CREATE INDEX lrs_routes_idx ON lrs_routes(route_geometry)
  INDEXTYPE IS MDSYS.SPATIAL_INDEX_V2;

-- Test the LRS procedures.
DECLARE
geom_segment SDO_GEOMETRY;
line_string SDO_GEOMETRY;
dim_array SDO_DIM_ARRAY;
result_geom_1 SDO_GEOMETRY;
result_geom_2 SDO_GEOMETRY;
result_geom_3 SDO_GEOMETRY;

BEGIN

SELECT a.route_geometry into geom_segment FROM lrs_routes a
  WHERE a.route_name = 'Route1';
SELECT m.diminfo into dim_array from 
  user_sdo_geom_metadata m
  WHERE m.table_name = 'LRS_ROUTES' AND m.column_name = 'ROUTE_GEOMETRY';

-- Define the LRS segment for Route1. This will populate any null measures.
-- No need to specify start and end measures, because they are already defined 
-- in the geometry.
SDO_LRS.DEFINE_GEOM_SEGMENT (geom_segment, dim_array);

SELECT a.route_geometry INTO line_string FROM lrs_routes a 
  WHERE a.route_name = 'Route1';

-- Split Route1 into two segments.
SDO_LRS.SPLIT_GEOM_SEGMENT(line_string,dim_array,5,result_geom_1,result_geom_2);

-- Concatenate the segments that were just split.
result_geom_3 := SDO_LRS.CONCATENATE_GEOM_SEGMENTS(result_geom_1, dim_array, result_geom_2, dim_array);

-- Update and insert geometries into table, to display later.
UPDATE lrs_routes a SET a.route_geometry = geom_segment
   WHERE a.route_id = 1;

INSERT INTO lrs_routes VALUES(
  11,
  'result_geom_1',
  result_geom_1
);
INSERT INTO lrs_routes VALUES(
  12,
  'result_geom_2',
  result_geom_2
);
INSERT INTO lrs_routes VALUES(
  13,
  'result_geom_3',
  result_geom_3
);

END;
/

-- First, display the data in the LRS table.
SELECT route_id, route_name, route_geometry FROM lrs_routes;

-- Are result_geom_1 and result_geom2 connected? 
SELECT  SDO_LRS.CONNECTED_GEOM_SEGMENTS(a.route_geometry,
           b.route_geometry, 0.005)
  FROM lrs_routes a, lrs_routes b
  WHERE a.route_id = 11 AND b.route_id = 12;

-- Is the Route1 segment valid?
SELECT  SDO_LRS.VALID_GEOM_SEGMENT(route_geometry)
  FROM lrs_routes WHERE route_id = 1;

-- Is 50 a valid measure on Route1? (Should return FALSE; highest Route1 measure is 27.)
SELECT  SDO_LRS.VALID_MEASURE(route_geometry, 50)
  FROM lrs_routes WHERE route_id = 1;

-- Is the Route1 segment defined?
SELECT  SDO_LRS.IS_GEOM_SEGMENT_DEFINED(route_geometry)
  FROM lrs_routes WHERE route_id = 1;

-- How long is Route1?
SELECT  SDO_LRS.GEOM_SEGMENT_LENGTH(route_geometry)
  FROM lrs_routes WHERE route_id = 1;

-- What is the start measure of Route1?
SELECT  SDO_LRS.GEOM_SEGMENT_START_MEASURE(route_geometry)
  FROM lrs_routes WHERE route_id = 1;

-- What is the end measure of Route1?
SELECT  SDO_LRS.GEOM_SEGMENT_END_MEASURE(route_geometry)
  FROM lrs_routes WHERE route_id = 1;

-- What is the start point of Route1?
SELECT  SDO_LRS.GEOM_SEGMENT_START_PT(route_geometry)
  FROM lrs_routes WHERE route_id = 1;

-- What is the end point of Route1?
SELECT  SDO_LRS.GEOM_SEGMENT_END_PT(route_geometry)
  FROM lrs_routes WHERE route_id = 1;

-- Translate (shift measure values) (+10).
-- First, display the original segment; then, translate.
SELECT a.route_geometry FROM lrs_routes a WHERE a.route_id = 1;
SELECT SDO_LRS.TRANSLATE_MEASURE(a.route_geometry, m.diminfo, 10)
  FROM lrs_routes a, user_sdo_geom_metadata m
  WHERE m.table_name = 'LRS_ROUTES' AND m.column_name = 'ROUTE_GEOMETRY'
    AND a.route_id = 1;
 
-- Redefine geometric segment to "convert" miles to kilometers
DECLARE
geom_segment SDO_GEOMETRY;
dim_array SDO_DIM_ARRAY;
 
BEGIN
 
SELECT a.route_geometry into geom_segment FROM lrs_routes a
  WHERE a.route_name = 'Route1';
SELECT m.diminfo into dim_array from 
  user_sdo_geom_metadata m
  WHERE m.table_name = 'LRS_ROUTES' AND m.column_name = 'ROUTE_GEOMETRY';
 
-- "Convert" mile measures to kilometers (27 * 1.609 = 43.443).
SDO_LRS.REDEFINE_GEOM_SEGMENT (geom_segment,
  dim_array,
  0, -- Zero starting measure: LRS segment starts at start of route.
  43.443); -- End of LRS segment. 27 miles = 43.443 kilometers.
 
-- Update and insert geometries into table, to display later.
UPDATE lrs_routes a SET a.route_geometry = geom_segment
   WHERE a.route_id = 1;
 
END;/
-- Display the redefined segment, with all measures "converted."
SELECT a.route_geometry FROM lrs_routes a WHERE a.route_id = 1;

-- Clip a piece of Route1.
SELECT  SDO_LRS.CLIP_GEOM_SEGMENT(route_geometry, 5, 10)
  FROM lrs_routes WHERE route_id = 1;

-- Point (9,3,NULL) is off the road; should return (9,4,9).
SELECT  SDO_LRS.PROJECT_PT(route_geometry, 
  SDO_GEOMETRY(3301, NULL, NULL, 
     SDO_ELEM_INFO_ARRAY(1, 1, 1), 
     SDO_ORDINATE_ARRAY(9, 3, NULL)) )
  FROM lrs_routes WHERE route_id = 1;

-- Return the measure of the projected point.
SELECT  SDO_LRS.GET_MEASURE(
 SDO_LRS.PROJECT_PT(a.route_geometry, m.diminfo,
  SDO_GEOMETRY(3301, NULL, NULL, 
     SDO_ELEM_INFO_ARRAY(1, 1, 1), 
     SDO_ORDINATE_ARRAY(9, 3, NULL)) ),
 m.diminfo )
 FROM lrs_routes a, user_sdo_geom_metadata m
 WHERE m.table_name = 'LRS_ROUTES' AND m.column_name = 'ROUTE_GEOMETRY'
   AND a.route_id = 1;

-- Is point (9,3,NULL) a valid LRS point? (Should return TRUE.)
SELECT  SDO_LRS.VALID_LRS_PT(
  SDO_GEOMETRY(3301, NULL, NULL, 
     SDO_ELEM_INFO_ARRAY(1, 1, 1), 
     SDO_ORDINATE_ARRAY(9, 3, NULL)),
  m.diminfo)
  FROM lrs_routes a, user_sdo_geom_metadata m
  WHERE m.table_name = 'LRS_ROUTES' AND m.column_name = 'ROUTE_GEOMETRY'
    AND a.route_id = 1;

-- Locate the point on Route1 at measure 9, offset 0.
SELECT  SDO_LRS.LOCATE_PT(route_geometry, 9, 0)
  FROM lrs_routes WHERE route_id = 1;
</pre><p><a href="lrs-linear-referencing-system-concepts.html#GUID-699CED71-3497-4826-A4A5-60BF13CD3770__BABGFEHE">Example 7-3</a> shows the output of the SELECT statements in <a href="lrs-linear-referencing-system-concepts.html#GUID-699CED71-3497-4826-A4A5-60BF13CD3770__BABFDJGE">Example 7-2</a>.
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-699CED71-3497-4826-A4A5-60BF13CD3770__BABGFEHE">
                     <p class="titleinexample">Example 7-3 Simplified Example: Output of SELECT Statements</p><pre class="oac_no_warn" dir="ltr">SQL&gt; -- First, display the data in the LRS table.
SQL&gt; SELECT route_id, route_name, route_geometry FROM lrs_routes;

  ROUTE_ID ROUTE_NAME                                                           
---------- --------------------------------                                     
ROUTE_GEOMETRY(SDO_GTYPE, SDO_SRID, SDO_POINT(X, Y, Z), SDO_ELEM_INFO, SDO_ORDIN
--------------------------------------------------------------------------------
         1 Route1                                                               
SDO_GEOMETRY(3302, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1), SDO_ORDINATE_ARRAY(
2, 2, 0, 2, 4, 2, 8, 4, 8, 12, 4, 12, 12, 10, 18, 8, 10, 22, 5, 14, 27))        
                                                                                
        11 result_geom_1                                                        
SDO_GEOMETRY(3302, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1), SDO_ORDINATE_ARRAY(
2, 2, 0, 2, 4, 2, 5, 4, 5))                                                     
                                                                                
        12 result_geom_2                                                        

  ROUTE_ID ROUTE_NAME                                                           
---------- --------------------------------                                     
ROUTE_GEOMETRY(SDO_GTYPE, SDO_SRID, SDO_POINT(X, Y, Z), SDO_ELEM_INFO, SDO_ORDIN
--------------------------------------------------------------------------------
SDO_GEOMETRY(3302, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1), SDO_ORDINATE_ARRAY(
5, 4, 5, 8, 4, 8, 12, 4, 12, 12, 10, 18, 8, 10, 22, 5, 14, 27))                 
                                                                                
        13 result_geom_3                                                        
SDO_GEOMETRY(3302, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1), SDO_ORDINATE_ARRAY(
2, 2, 0, 2, 4, 2, 5, 4, 5, 8, 4, 8, 12, 4, 12, 12, 10, 18, 8, 10, 22, 5, 14, 27)
)  
 
SQL&gt; -- Are result_geom_1 and result_geom2 connected?
SQL&gt; SELECT  SDO_LRS.CONNECTED_GEOM_SEGMENTS(a.route_geometry,
  2  		b.route_geometry, 0.005)
  3    FROM lrs_routes a, lrs_routes b
  4    WHERE a.route_id = 11 AND b.route_id = 12;

SDO_LRS.CONNECTED_GEOM_SEGMENTS(A.ROUTE_GEOMETRY,B.ROUTE_GEOMETRY,0.005)        
--------------------------------------------------------------------------------
TRUE
 
SQL&gt; -- Is the Route1 segment valid?
SQL&gt; SELECT  SDO_LRS.VALID_GEOM_SEGMENT(route_geometry)
  2    FROM lrs_routes WHERE route_id = 1;

SDO_LRS.VALID_GEOM_SEGMENT(ROUTE_GEOMETRY)                                      
--------------------------------------------------------------------------------
TRUE 
 
SQL&gt; -- Is 50 a valid measure on Route1? (Should return FALSE; highest Route1 measure is 27.)
SQL&gt; SELECT  SDO_LRS.VALID_MEASURE(route_geometry, 50)
  2    FROM lrs_routes WHERE route_id = 1;

SDO_LRS.VALID_MEASURE(ROUTE_GEOMETRY,50)                                        
--------------------------------------------------------------------------------
FALSE 
 
SQL&gt; -- Is the Route1 segment defined?
SQL&gt; SELECT  SDO_LRS.IS_GEOM_SEGMENT_DEFINED(route_geometry)
  2    FROM lrs_routes WHERE route_id = 1;

SDO_LRS.IS_GEOM_SEGMENT_DEFINED(ROUTE_GEOMETRY)                                 
--------------------------------------------------------------------------------
TRUE 
 
SQL&gt; -- How long is Route1?
SQL&gt; SELECT  SDO_LRS.GEOM_SEGMENT_LENGTH(route_geometry)
  2    FROM lrs_routes WHERE route_id = 1;

SDO_LRS.GEOM_SEGMENT_LENGTH(ROUTE_GEOMETRY)                                     
-------------------------------------------                                     
                                         27  
 
SQL&gt; -- What is the start measure of Route1?
SQL&gt; SELECT  SDO_LRS.GEOM_SEGMENT_START_MEASURE(route_geometry)
  2    FROM lrs_routes WHERE route_id = 1;

SDO_LRS.GEOM_SEGMENT_START_MEASURE(ROUTE_GEOMETRY)                              
--------------------------------------------------                              
                                                 0  
 
SQL&gt; -- What is the end measure of Route1?
SQL&gt; SELECT  SDO_LRS.GEOM_SEGMENT_END_MEASURE(route_geometry)
  2    FROM lrs_routes WHERE route_id = 1;

SDO_LRS.GEOM_SEGMENT_END_MEASURE(ROUTE_GEOMETRY)                                
------------------------------------------------                                
                                              27  
 
SQL&gt; -- What is the start point of Route1?
SQL&gt; SELECT  SDO_LRS.GEOM_SEGMENT_START_PT(route_geometry)
  2    FROM lrs_routes WHERE route_id = 1;

SDO_LRS.GEOM_SEGMENT_START_PT(ROUTE_GEOMETRY)(SDO_GTYPE, SDO_SRID, SDO_POINT(X, 
--------------------------------------------------------------------------------
SDO_GEOMETRY(3301, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 1, 1), SDO_ORDINATE_ARRAY(
2, 2, 0)) 
 
SQL&gt; -- What is the end point of Route1?
SQL&gt; SELECT  SDO_LRS.GEOM_SEGMENT_END_PT(route_geometry)
  2    FROM lrs_routes WHERE route_id = 1;

SDO_LRS.GEOM_SEGMENT_END_PT(ROUTE_GEOMETRY)(SDO_GTYPE, SDO_SRID, SDO_POINT(X, Y,
--------------------------------------------------------------------------------
SDO_GEOMETRY(3301, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 1, 1), SDO_ORDINATE_ARRAY(
5, 14, 27))  
 
SQL&gt; -- Translate (shift measure values) (+10).
SQL&gt; -- First, display the original segment; then, translate.
SQL&gt; SELECT a.route_geometry FROM lrs_routes a WHERE a.route_id = 1;
 
ROUTE_GEOMETRY(SDO_GTYPE, SDO_SRID, SDO_POINT(X, Y, Z), SDO_ELEM_INFO, SDO_ORDIN
--------------------------------------------------------------------------------
SDO_GEOMETRY(3302, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1), SDO_ORDINATE_ARRAY(
2, 2, 0, 2, 4, 2, 8, 4, 8, 12, 4, 12, 12, 10, 18, 8, 10, 22, 5, 14, 27))        
                                                                                
SQL&gt; SELECT SDO_LRS.TRANSLATE_MEASURE(a.route_geometry, m.diminfo, 10)
  2    FROM lrs_routes a, user_sdo_geom_metadata m
  3    WHERE m.table_name = 'LRS_ROUTES' AND m.column_name = 'ROUTE_GEOMETRY'
  4   AND a.route_id = 1;
 
SDO_LRS.TRANSLATE_MEASURE(A.ROUTE_GEOMETRY,M.DIMINFO,10)(SDO_GTYPE, SDO_SRID, SD
--------------------------------------------------------------------------------
SDO_GEOMETRY(3302, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1), SDO_ORDINATE_ARRAY(
2, 2, 10, 2, 4, 12, 8, 4, 18, 12, 4, 22, 12, 10, 28, 8, 10, 32, 5, 14, 37))     
                                                                                
 
SQL&gt; -- Redefine geometric segment to "convert" miles to kilometers
SQL&gt; DECLARE
  2  geom_segment SDO_GEOMETRY;
  3  dim_array SDO_DIM_ARRAY;
  4  
  5  BEGIN
  6  
  7  SELECT a.route_geometry into geom_segment FROM lrs_routes a
  8    WHERE a.route_name = 'Route1';
  9  SELECT m.diminfo into dim_array from
 10    user_sdo_geom_metadata m
 11    WHERE m.table_name = 'LRS_ROUTES' AND m.column_name = 'ROUTE_GEOMETRY';
 12  
 13  -- "Convert" mile measures to kilometers (27 * 1.609 = 43.443).
 14  SDO_LRS.REDEFINE_GEOM_SEGMENT (geom_segment,
 15    dim_array,
 16    0, -- Zero starting measure: LRS segment starts at start of route.
 17    43.443); -- End of LRS segment. 27 miles = 43.443 kilometers.
 18  
 19  -- Update and insert geometries into table, to display later.
 20  UPDATE lrs_routes a SET a.route_geometry = geom_segment
 21  	WHERE a.route_id = 1;
 22  
 23  END;
 24  /
 
PL/SQL procedure successfully completed.
 
SQL&gt; -- Display the redefined segment, with all measures "converted."
SQL&gt; SELECT a.route_geometry FROM lrs_routes a WHERE a.route_id = 1;
 
ROUTE_GEOMETRY(SDO_GTYPE, SDO_SRID, SDO_POINT(X, Y, Z), SDO_ELEM_INFO, SDO_ORDIN
--------------------------------------------------------------------------------
SDO_GEOMETRY(3302, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1), SDO_ORDINATE_ARRAY(
2, 2, 0, 2, 4, 3.218, 8, 4, 12.872, 12, 4, 19.308, 12, 10, 28.962, 8, 10, 35.398
, 5, 14, 43.443)) 
 
SQL&gt; -- Clip a piece of Route1.
SQL&gt; SELECT  SDO_LRS.CLIP_GEOM_SEGMENT(route_geometry, 5, 10)
  2    FROM lrs_routes WHERE route_id = 1;

SDO_LRS.CLIP_GEOM_SEGMENT(ROUTE_GEOMETRY,5,10)(SDO_GTYPE, SDO_SRID, SDO_POINT(X,
--------------------------------------------------------------------------------
SDO_GEOMETRY(3302, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1), SDO_ORDINATE_ARRAY(
5, 4, 5, 8, 4, 8, 10, 4, 10))   
 
SQL&gt; -- Point (9,3,NULL) is off the road; should return (9,4,9).
SQL&gt; SELECT  SDO_LRS.PROJECT_PT(route_geometry,
  2    SDO_GEOMETRY(3301, NULL, NULL,
  3    SDO_ELEM_INFO_ARRAY(1, 1, 1),
  4    SDO_ORDINATE_ARRAY(9, 3, NULL)) )
  5    FROM lrs_routes WHERE route_id = 1;

SDO_LRS.PROJECT_PT(ROUTE_GEOMETRY,SDO_GEOMETRY(3301,NULL,NULL,SDO_EL
--------------------------------------------------------------------------------
SDO_GEOMETRY(3301, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 1, 1), SDO_ORDINATE_ARRAY(
9, 4, 9)) 
 
SQL&gt; -- Return the measure of the projected point.
SQL&gt; SELECT  SDO_LRS.GET_MEASURE(
  2   SDO_LRS.PROJECT_PT(a.route_geometry, m.diminfo,
  3    SDO_GEOMETRY(3301, NULL, NULL,
  4    SDO_ELEM_INFO_ARRAY(1, 1, 1),
  5    SDO_ORDINATE_ARRAY(9, 3, NULL)) ),
  6   m.diminfo )
  7   FROM lrs_routes a, user_sdo_geom_metadata m
  8   WHERE m.table_name = 'LRS_ROUTES' AND m.column_name = 'ROUTE_GEOMETRY'
  9  	 AND a.route_id = 1;

SDO_LRS.GET_MEASURE(SDO_LRS.PROJECT_PT(A.ROUTE_GEOMETRY,M.DIMINFO,SDO_GEOM
--------------------------------------------------------------------------------
                                                                               9
 
SQL&gt; -- Is point (9,3,NULL) a valid LRS point? (Should return TRUE.)
SQL&gt; SELECT  SDO_LRS.VALID_LRS_PT(
  2    SDO_GEOMETRY(3301, NULL, NULL,
  3    SDO_ELEM_INFO_ARRAY(1, 1, 1),
  4    SDO_ORDINATE_ARRAY(9, 3, NULL)),
  5    m.diminfo)
  6    FROM lrs_routes a, user_sdo_geom_metadata m
  7    WHERE m.table_name = 'LRS_ROUTES' AND m.column_name = 'ROUTE_GEOMETRY'
  8    AND a.route_id = 1;

SDO_LRS.VALID_LRS_PT(SDO_GEOMETRY(3301,NULL,NULL,SDO_ELEM_INFO_ARRAY
------------------------------------------------------------------------------
TRUE   
 
SQL&gt; -- Locate the point on Route1 at measure 9, offset 0.
SQL&gt; SELECT  SDO_LRS.LOCATE_PT(route_geometry, 9, 0)
  2    FROM lrs_routes WHERE route_id = 1;

SDO_LRS.LOCATE_PT(ROUTE_GEOMETRY,9,0)(SDO_GTYPE, SDO_SRID, SDO_POINT(X, Y, Z), S
--------------------------------------------------------------------------------
SDO_GEOMETRY(3301, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 1, 1), SDO_ORDINATE_ARRAY(
9, 4, 9)) </pre><p></p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="lrs-linear-referencing-system-concepts.html#GUID-9793361B-6C73-41E1-8389-85D8788ED083" title="Linear referencing is a natural and convenient means to associate attributes or events to locations or portions of a linear feature. It has been widely used in transportation applications (such as for highways, railroads, and transit routes) and utilities applications (such as for gas and oil pipelines).">Linear Referencing System</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can use XML schema evolution to update your XML schema after you have registered it with Oracle XML&nbsp;DB.">
      <meta name="description" content="You can use XML schema evolution to update your XML schema after you have registered it with Oracle XML&nbsp;DB.">
      <title>XML Schema Evolution</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="You can use XML schema evolution to update your XML schema after you have registered it with Oracle XML&nbsp;DB.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96222-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="XPath-rewrite-for-object-relational-storage.html" title="Previous" type="text/html">
      <link rel="next" href="XML-DB-repository.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADXDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="XPath-rewrite-for-object-relational-storage.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="XML-DB-repository.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-Schema-and-object-relational-XMLType.html" property="item" typeof="WebPage"><span property="name">XML Schema and Object-Relational XMLType </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> XML Schema Evolution</li>
            </ol>
            <a id="GUID-F2E920B3-C6D7-428B-9E75-5CE9C21F9B5F" name="GUID-F2E920B3-C6D7-428B-9E75-5CE9C21F9B5F"></a><a id="ADXDB0800"></a>
            
            <h2 id="ADXDB-GUID-F2E920B3-C6D7-428B-9E75-5CE9C21F9B5F" class="sect2"><span class="enumeration_chapter">20 </span> XML Schema Evolution
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can use XML schema evolution to update your XML schema after you have registered it with Oracle XML&nbsp;DB. </p>
               <p>Oracle XML&nbsp;DB supports the W3C XML Schema recommendation. XML instance documents that conform to an XML schema can be stored and retrieved using SQL and protocols such as FTP, HTTP(S), and WebDAV. In addition to specifying the structure of XML documents, XML schemas determine the mapping between XML and object-relational storage. </p>
               <div class="section"></div>
               <!-- class="section" -->
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-98F5058B-852E-48C2-80A5-C5E7068AE0DD">Overview of XML Schema Evolution</a><br>A major challenge for developers using an XML schema with Oracle XML&nbsp;DB is how to deal with changes in the content or structure of XML documents. In some environments, the need for changes may be frequent or extensive, arising from new regulations, internal needs, or external opportunities. 
                  </li>
                  <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-0E4FC235-D8D1-4F27-85DC-A3DCCC2662AB">Copy-Based Schema Evolution</a><br>You perform copy-based XML schema evolution using PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code>. This backs up existing instance documents to temporary <code class="codeph">XMLType</code> tables, drops the old version of the XML schema (which also deletes the associated instance documents), registers the new version, and copies the backed-up instance documents to new <code class="codeph">XMLType</code> tables. 
                  </li>
                  <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-0C97EA66-1890-495D-9117-55FB0D563992">In-Place XML Schema Evolution</a><br>In-place XML schema evolution makes changes to an XML schema without requiring that existing data be copied, deleted, and reinserted. In-place evolution is thus much faster than copy-based evolution. However, in-place evolution also has several restrictions that do not apply to copy-based evolution.
                  </li>
               </ul>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="XML-Schema-and-query-basic.html#GUID-C09824C1-6B02-4556-A265-B1749DEE8DE1" title="XML Schema is a standard for describing the content and structure of XML documents. You can register, update, and delete an XML schema used with Oracle XML&nbsp;DB. You can define storage structures to use for your XML schema-based data and map XML Schema data types to SQL data types.">XML Schema Storage and Query: Basic</a></li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="XML-Schema-and-object-relational-XMLType.html#GUID-817F95DE-D604-41DC-BCDE-76CDE30F9176" title="The use of XML Schema and object-relational storage of XMLType data is covered.">XML Schema and Object-Relational XMLType</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB4680"></a><div class="props_rev_3"><a id="GUID-98F5058B-852E-48C2-80A5-C5E7068AE0DD" name="GUID-98F5058B-852E-48C2-80A5-C5E7068AE0DD"></a><h3 id="ADXDB-GUID-98F5058B-852E-48C2-80A5-C5E7068AE0DD" class="sect3"><span class="enumeration_section">20.1 </span>Overview of XML Schema Evolution
               </h3>
               <div>
                  <p>A major challenge for developers using an XML schema with Oracle XML&nbsp;DB is how to deal with changes in the content or structure of XML documents. In some environments, the need for changes may be frequent or extensive, arising from new regulations, internal needs, or external opportunities. </p>
                  <p>For example, you might need to add new elements or attributes to an XML schema definition, modify a data type, or relax or tighten certain minimum and maximum occurrence requirements.</p>
                  <p>In such cases, you need to "evolve" the XML schema so that new requirements are accommodated, while any existing instance documents (the data) remain valid (or can be made valid), and existing applications can continue to run. </p>
                  <p>If you do not care about any existing documents, you can of course simply drop the <code class="codeph">XMLType</code> tables that are dependent on the XML schema, delete the old XML schema, and register the new XML schema at the same URL. In most cases, however, you need to keep the existing documents, possibly transforming them to accommodate the new XML schema.
                  </p>
                  <p>Oracle XML&nbsp;DB supports two kinds of schema evolution:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold">Copy-based schema evolution</span>, in which all instance documents that conform to the schema are copied to a temporary location in the database, the old schema is deleted, the modified schema is registered, and the instance documents are inserted into their new locations from the temporary area
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">In-place schema evolution</span>, which does not require copying, deleting, and inserting existing data and thus is much faster than copy-based evolution, but which has restrictions that do not apply to copy-based evolution
                        </p>
                        <p>In general, in-place evolution is permitted if you are not changing the storage model and if the changes do not invalidate existing documents (that is, if existing documents are conformant with the new schema or can be made conformant with it). A more detailed explanation of restrictions and guidelines is presented in <a href="XML-Schema-evolution.html#GUID-0C97EA66-1890-495D-9117-55FB0D563992" title="In-place XML schema evolution makes changes to an XML schema without requiring that existing data be copied, deleted, and reinserted. In-place evolution is thus much faster than copy-based evolution. However, in-place evolution also has several restrictions that do not apply to copy-based evolution.">In-Place XML Schema Evolution</a>.
                        </p>
                     </li>
                  </ul>
                  <p>Each approach has its own PL/SQL procedure: <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> for copy-based evolution, <code class="codeph">DBMS_XMLSCHEMA.inPlaceEvolve</code> for in-place evolution. This chapter explains the use of each procedure and presents guidelines for using its associated approach to schema evolution.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-F2E920B3-C6D7-428B-9E75-5CE9C21F9B5F" title="You can use XML schema evolution to update your XML schema after you have registered it with Oracle XML&nbsp;DB.">XML Schema Evolution</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4681"></a><div class="props_rev_3"><a id="GUID-0E4FC235-D8D1-4F27-85DC-A3DCCC2662AB" name="GUID-0E4FC235-D8D1-4F27-85DC-A3DCCC2662AB"></a><h3 id="ADXDB-GUID-0E4FC235-D8D1-4F27-85DC-A3DCCC2662AB" class="sect3"><span class="enumeration_section">20.2 </span>Copy-Based Schema Evolution
               </h3>
               <div>
                  <p>You perform copy-based XML schema evolution using PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code>. This backs up existing instance documents to temporary <code class="codeph">XMLType</code> tables, drops the old version of the XML schema (which also deletes the associated instance documents), registers the new version, and copies the backed-up instance documents to new <code class="codeph">XMLType</code> tables. 
                  </p>
                  <p>In case of a problem, the backup copies are restored — see <a href="XML-Schema-evolution.html#GUID-8EDAD01C-4791-4458-A0F3-EBFAC3E94D61" title="Procedure DBMS_XMLSCHEMA.copyEvolve either completely succeeds or it raises an error. If it raises an error then it tries to roll back as much of the operation as possible.">Rollback When Procedure DBMS_XMLSCHEMA.COPYEVOLVE Raises an Error</a>.
                  </p>
                  <p>Using procedure <code class="codeph">copyEvolve</code>, you can evolve your registered XML schema in such a way that existing XML instance documents continue to be valid.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-AD87A5C3-D0E8-4109-A6B2-F3F673D42FFD">Scenario for Copy-Based Evolution</a><br>An evolved version of a purchase-order XML schema is shown. It is used in examples that illustrate the use of copy-based XML schema evolution.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-8F38814C-56AE-4021-AF31-AB8A99342C47">COPYEVOLVE Parameters and Errors</a><br>The parameters of PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> are described, as are the errors associated with this procedure.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-12760FD2-5A95-49E9-A090-634C2AD18DA5">Limitations of Procedure COPYEVOLVE</a><br>The use of PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> involves certain limitations.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-52D895D1-BFD2-4DA8-B106-6385E9E7BA0D">Guidelines for Using Procedure COPYEVOLVE</a><br>General guidelines for using PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code>are presented, as well as guidelines that are specific to particular contexts.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-737B8590-6531-44BC-B81B-713466ABC931">Update of Existing XML Instance Documents Using an XSLT Stylesheet</a><br>After you modify a registered XML schema, you must update any existing XML instance documents that use the schema. You do this by applying an XSLT stylesheet to each of the instance documents. The stylesheet represents the difference between the old and new XML schemas.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-977E4919-1072-4A96-B03C-6576A7B98786">Examples of Using Procedure COPYEVOLVE</a><br>Several examples are presented of using PL/SQL procedure<code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> to update an XML schema. (Be sure to back up all registered XML schemas and XML documents that reference them, before using the procedure.)
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-F2E920B3-C6D7-428B-9E75-5CE9C21F9B5F" title="You can use XML schema evolution to update your XML schema after you have registered it with Oracle XML&nbsp;DB.">XML Schema Evolution</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4683"></a><a id="ADXDB4682"></a><div class="props_rev_3"><a id="GUID-AD87A5C3-D0E8-4109-A6B2-F3F673D42FFD" name="GUID-AD87A5C3-D0E8-4109-A6B2-F3F673D42FFD"></a><h4 id="ADXDB-GUID-AD87A5C3-D0E8-4109-A6B2-F3F673D42FFD" class="sect4"><span class="enumeration_section">20.2.1 </span>Scenario for Copy-Based Evolution
                  </h4>
                  <div>
                     <p>An evolved version of a purchase-order XML schema is shown. It is used in examples that illustrate the use of copy-based XML schema evolution.</p>
                     <p><a href="XML-Schema-evolution.html#GUID-AD87A5C3-D0E8-4109-A6B2-F3F673D42FFD__BCGJAFFH">Example 20-1</a> shows a <span class="italic">partial</span> listing of a revised version of the purchase-order XML schema of <a href="oracle-supplied-XML-schemas-and-examples.html#GUID-1CB2213C-C6E8-4BC4-86A3-EFDE51AEBEFD__BABDAGBF">Example A-2</a>. See <a href="oracle-supplied-XML-schemas-and-examples.html#GUID-1CB2213C-C6E8-4BC4-86A3-EFDE51AEBEFD__BABJJIFI">Example A-3</a> for the <span class="italic">complete</span> revised schema listing. Text that is in <span class="bold">bold</span> here is new or different from that in the original schema.
                     </p>
                     <div class="example" id="GUID-AD87A5C3-D0E8-4109-A6B2-F3F673D42FFD__BCGJAFFH">
                        <p class="titleinexample">Example 20-1 Revised Purchase-Order XML Schema</p><pre class="oac_no_warn" dir="ltr">&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:xdb="http://xmlns.oracle.com/xdb"
           version="1.0"&gt;
  &lt;xs:element
    name="PurchaseOrder" type="PurchaseOrderType"
    xdb:defaultTable="PURCHASEORDER"
    <span class="bold">xdb:columnProps=</span>
      <span class="bold">"CONSTRAINT purchaseorder_pkey PRIMARY KEY (XMLDATA.reference),</span>
       <span class="bold">CONSTRAINT valid_email_address FOREIGN KEY (XMLDATA.userid)</span>
         <span class="bold">REFERENCES hr.employees (EMAIL)"</span>
    xdb:tableProps=
      "VARRAY XMLDATA.ACTIONS.ACTION STORE AS TABLE ACTION_TABLE
        ((CONSTRAINT action_pkey PRIMARY KEY (NESTED_TABLE_ID, SYS_NC_ARRAY_INDEX$)))
       VARRAY XMLDATA.LINEITEMS.LINEITEM STORE AS TABLE LINEITEM_TABLE
        ((constraint LINEITEM_PKEY primary key (NESTED_TABLE_ID, SYS_NC_ARRAY_INDEX$)))
       lob (XMLDATA.NOTES) STORE AS (ENABLE STORAGE IN ROW STORAGE(INITIAL 4K NEXT 32K))"/&gt;
  &lt;xs:complexType name="PurchaseOrderType" xdb:SQLType="PURCHASEORDER_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="Actions" type="ActionsType" xdb:SQLName="ACTIONS"/&gt;
      &lt;xs:element name="Reject" type="RejectionType" minOccurs="0" xdb:SQLName="REJECTION"/&gt;
      &lt;xs:element name="Requestor" type="RequestorType" xdb:SQLName="REQUESTOR"/&gt;
      &lt;xs:element name="User" type="UserType" xdb:SQLName="USERID"/&gt;
      &lt;xs:element name="CostCenter" type="CostCenterType" xdb:SQLName="COST_CENTER"/&gt; 
      <span class="bold">&lt;xs:element name="BillingAddress" type="AddressType" minOccurs="0"</span>
                  <span class="bold">xdb:SQLName="BILLING_ADDRESS"/&gt;</span> 
      &lt;xs:element name="ShippingInstructions" type="ShippingInstructionsType"
                  xdb:SQLName="SHIPPING_INSTRUCTIONS"/&gt; 
      &lt;xs:element name="SpecialInstructions" type="SpecialInstructionsType"
                  xdb:SQLName="SPECIAL_INSTRUCTIONS"/&gt; 
      &lt;xs:element name="LineItems" type="LineItemsType" xdb:SQLName="LINEITEMS"/&gt;
      <span class="bold">&lt;xs:element name="Notes" type="NotesType" minOccurs="0" xdb:SQLType="CLOB"</span>
                  <span class="bold">xdb:SQLName="NOTES"/&gt;</span> 
    &lt;/xs:sequence&gt;
    <span class="bold">&lt;xs:attribute name="Reference" type="ReferenceType" use="required" xdb:SQLName="REFERENCE"/&gt;</span>
    &lt;xs:attribute name="DateCreated" type="xs:dateTime" use="required"
                  xdb:SQLType="TIMESTAMP WITH TIME ZONE"/&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="LineItemsType" xdb:SQLType="LINEITEMS_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="LineItem" type="LineItemType" maxOccurs="unbounded" xdb:SQLName="LINEITEM"
                  xdb:SQLCollType="LINEITEM_V"/&gt;  
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="LineItemType" xdb:SQLType="LINEITEM_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="Part" type="PartType" xdb:SQLName="PART"/&gt;
      <span class="bold">&lt;xs:element name="Quantity" type="quantityType"/&gt;</span>
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="ItemNumber" type="xs:integer" xdb:SQLName="ITEMNUMBER"
                  xdb:SQLType="NUMBER"/&gt; 
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="PartType" xdb:SQLType="PART_T"&gt;
    <span class="bold">&lt;xs:simpleContent&gt;</span>
      <span class="bold">&lt;xs:extension base="UPCCodeType"&gt;</span>
        <span class="bold">&lt;xs:attribute name="Description" type="DescriptionType" use="required"</span>
                      <span class="bold">xdb:SQLName="DESCRIPTION"/&gt;</span> 
        <span class="bold">&lt;xs:attribute name="UnitCost" type="moneyType" use="required"/&gt;</span>
      <span class="bold">&lt;/xs:extension&gt;</span>
    <span class="bold">&lt;/xs:simpleContent&gt;</span>
  &lt;/xs:complexType&gt;
  &lt;xs:simpleType name="ReferenceType"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:minLength value="18"/&gt;
      &lt;xs:maxLength value="30"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
</pre><pre class="oac_no_warn" dir="ltr"><span class="bold">. . .</span>
</pre><pre class="oac_no_warn" dir="ltr">  &lt;xs:complexType name="RejectionType" xdb:SQLType="REJECTION_T"&gt;
    &lt;xs:all&gt;
      &lt;xs:element name="User" type="UserType" minOccurs="0" xdb:SQLName="REJECTED_BY"/&gt;
      &lt;xs:element name="Date" type="DateType" minOccurs="0" xdb:SQLName="DATE_REJECTED"/&gt;
      &lt;xs:element name="Comments" type="CommentsType" minOccurs="0" xdb:SQLName="REASON_REJECTED"/&gt;
    &lt;/xs:all&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="ShippingInstructionsType" xdb:SQLType="SHIPPING_INSTRUCTIONS_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="name" type="NameType" minOccurs="0" xdb:SQLName="SHIP_TO_NAME"/&gt;
      <span class="bold">&lt;xs:choice&gt;</span>
        <span class="bold">&lt;xs:element name="address" type="AddressType" minOccurs="0"/&gt;</span>
        <span class="bold">&lt;xs:element name="fullAddress" type="FullAddressType" minOccurs="0"</span>
                    <span class="bold">xdb:SQLName="SHIP_TO_ADDRESS"/&gt;</span> 
      <span class="bold">&lt;/xs:choice&gt;</span>
      &lt;xs:element name="telephone" type="TelephoneType" minOccurs="0" xdb:SQLName="SHIP_TO_PHONE"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
</pre><pre class="oac_no_warn" dir="ltr"><span class="bold">. . .</span>
</pre><pre class="oac_no_warn" dir="ltr">  &lt;xs:simpleType name="NameType"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:minLength value="1"/&gt;
      &lt;xs:maxLength value="20"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  <span class="bold">&lt;xs:simpleType name="FullAddressType"&gt;</span>
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:minLength value="1"/&gt;
      &lt;xs:maxLength value="256"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
</pre><pre class="oac_no_warn" dir="ltr"><span class="bold">. . .</span>
</pre><pre class="oac_no_warn" dir="ltr">  &lt;xs:simpleType name="DescriptionType"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:minLength value="1"/&gt;
      &lt;xs:maxLength value="256"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  <span class="bold">&lt;xs:complexType name="AddressType" xdb:SQLType="ADDRESS_T"&gt;</span>
    <span class="bold">&lt;xs:sequence&gt;</span>
      <span class="bold">&lt;xs:element name="StreetLine1" type="StreetType"/&gt;</span>
      <span class="bold">&lt;xs:element name="StreetLine2" type="StreetType" minOccurs="0"/&gt;</span>
      <span class="bold">&lt;xs:element name="City" type="CityType"/&gt;</span>
      <span class="bold">&lt;xs:choice&gt;</span>
        <span class="bold">&lt;xs:sequence&gt;</span>
          <span class="bold">&lt;xs:element name="State" type="StateType"/&gt;</span>
          <span class="bold">&lt;xs:element name="ZipCode" type="ZipCodeType"/&gt;</span>
        <span class="bold">&lt;/xs:sequence&gt;</span>
        <span class="bold">&lt;xs:sequence&gt;</span>
          <span class="bold">&lt;xs:element name="Province" type="ProvinceType"/&gt;</span>
          <span class="bold">&lt;xs:element name="PostCode" type="PostCodeType"/&gt;</span>
        <span class="bold">&lt;/xs:sequence&gt;</span>
        <span class="bold">&lt;xs:sequence&gt;</span>
          <span class="bold">&lt;xs:element name="County" type="CountyType"/&gt;</span>
          <span class="bold">&lt;xs:element name="Postcode" type="PostCodeType"/&gt;</span>
        <span class="bold">&lt;/xs:sequence&gt;</span>
      <span class="bold">&lt;/xs:choice&gt;</span>
      <span class="bold">&lt;xs:element name="Country" type="CountryType"/&gt;</span>
    <span class="bold">&lt;/xs:sequence&gt;</span>
  <span class="bold">&lt;/xs:complexType&gt;</span>
  <span class="bold">&lt;xs:simpleType name="StreetType"&gt;</span>
    <span class="bold">&lt;xs:restriction base="xs:string"&gt;</span>
      <span class="bold">&lt;xs:minLength value="1"/&gt;</span>
      <span class="bold">&lt;xs:maxLength value="128"/&gt;</span>
    <span class="bold">&lt;/xs:restriction&gt;</span>
  <span class="bold">&lt;/xs:simpleType&gt;</span>
  <span class="bold">&lt;xs:simpleType name="CityType"&gt;</span>
    <span class="bold">&lt;xs:restriction base="xs:string"&gt;</span>
      <span class="bold">&lt;xs:minLength value="1"/&gt;</span>
      <span class="bold">&lt;xs:maxLength value="64"/&gt;</span>
    <span class="bold">&lt;/xs:restriction&gt;</span>
  <span class="bold">&lt;/xs:simpleType&gt;</span>
  <span class="bold">&lt;xs:simpleType name="StateType"&gt;</span>
    <span class="bold">&lt;xs:restriction base="xs:string"&gt;</span>
      <span class="bold">&lt;xs:minLength value="2"/&gt;</span>
      <span class="bold">&lt;xs:maxLength value="2"/&gt;</span>
      <span class="bold">&lt;xs:enumeration value="AK"/&gt;</span>
      <span class="bold">&lt;xs:enumeration value="AL"/&gt;</span>
      <span class="bold">&lt;xs:enumeration value="AR"/&gt;</span>
</pre><pre class="oac_no_warn" dir="ltr"><span class="bold"> . . .</span> <span class="italic">-- A value for each US state abbreviation</span>
</pre><pre class="oac_no_warn" dir="ltr">      <span class="bold">&lt;xs:enumeration value="WY"/&gt;</span>
    <span class="bold">&lt;/xs:restriction&gt;</span>
  <span class="bold">&lt;/xs:simpleType&gt;</span>
  <span class="bold">&lt;xs:simpleType name="ZipCodeType"&gt;</span>
    <span class="bold">&lt;xs:restriction base="xs:string"&gt;</span>
      <span class="bold">&lt;xs:pattern value="\d{5}"/&gt;</span>
      <span class="bold">&lt;xs:pattern value="\d{5}-\d{4}"/&gt;</span>
    <span class="bold">&lt;/xs:restriction&gt;</span>
  <span class="bold">&lt;/xs:simpleType&gt;</span>
  <span class="bold">&lt;xs:simpleType name="CountryType"&gt;</span>
    <span class="bold">&lt;xs:restriction base="xs:string"&gt;</span>
      <span class="bold">&lt;xs:minLength value="1"/&gt;</span>
      <span class="bold">&lt;xs:maxLength value="64"/&gt;</span>
    <span class="bold">&lt;/xs:restriction&gt;</span>
  <span class="bold">&lt;/xs:simpleType&gt;</span>
  <span class="bold">&lt;xs:simpleType name="CountyType"&gt;</span>
    <span class="bold">&lt;xs:restriction base="xs:string"&gt;</span>
      <span class="bold">&lt;xs:minLength value="1"/&gt;</span>
      <span class="bold">&lt;xs:maxLength value="32"/&gt;</span>
    <span class="bold">&lt;/xs:restriction&gt;</span>
  <span class="bold">&lt;/xs:simpleType&gt;</span>
  <span class="bold">&lt;xs:simpleType name="PostCodeType"&gt;</span>
    <span class="bold">&lt;xs:restriction base="xs:string"&gt;</span>
      <span class="bold">&lt;xs:minLength value="1"/&gt;</span>
      <span class="bold">&lt;xs:maxLength value="12"/&gt;</span>
    <span class="bold">&lt;/xs:restriction&gt;</span>
  <span class="bold">&lt;/xs:simpleType&gt;</span>
  <span class="bold">&lt;xs:simpleType name="ProvinceType"&gt;</span>
    <span class="bold">&lt;xs:restriction base="xs:string"&gt;</span>
      <span class="bold">&lt;xs:minLength value="2"/&gt;</span>
      <span class="bold">&lt;xs:maxLength value="2"/&gt;</span>
    <span class="bold">&lt;/xs:restriction&gt;</span>
  <span class="bold">&lt;/xs:simpleType&gt;</span>
  <span class="bold">&lt;xs:simpleType name="NotesType"&gt;</span>
    <span class="bold">&lt;xs:restriction base="xs:string"&gt;</span>
      <span class="bold">&lt;xs:maxLength value="32767"/&gt;</span>
    <span class="bold">&lt;/xs:restriction&gt;</span>
  <span class="bold">&lt;/xs:simpleType&gt;</span>
  <span class="bold">&lt;xs:simpleType name="UPCCodeType"&gt;</span>
    <span class="bold">&lt;xs:restriction base="xs:string"&gt;</span>
      <span class="bold">&lt;xs:minLength value="11"/&gt;</span>
      <span class="bold">&lt;xs:maxLength value="14"/&gt;</span>
      <span class="bold">&lt;xs:pattern value="\d{11}"/&gt;</span>
      <span class="bold">&lt;xs:pattern value="\d{12}"/&gt;</span>
      <span class="bold">&lt;xs:pattern value="\d{13}"/&gt;</span>
      <span class="bold">&lt;xs:pattern value="\d{14}"/&gt;</span>
    <span class="bold">&lt;/xs:restriction&gt;</span>
  <span class="bold">&lt;/xs:simpleType&gt;</span>
&lt;/xs:schema&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-0E4FC235-D8D1-4F27-85DC-A3DCCC2662AB" title="You perform copy-based XML schema evolution using PL/SQL procedure DBMS_XMLSCHEMA.copyEvolve. This backs up existing instance documents to temporary XMLType tables, drops the old version of the XML schema (which also deletes the associated instance documents), registers the new version, and copies the backed-up instance documents to new XMLType tables.">Copy-Based Schema Evolution</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4685"></a><a id="ADXDB4686"></a><a id="ADXDB4684"></a><div class="props_rev_3"><a id="GUID-8F38814C-56AE-4021-AF31-AB8A99342C47" name="GUID-8F38814C-56AE-4021-AF31-AB8A99342C47"></a><h4 id="ADXDB-GUID-8F38814C-56AE-4021-AF31-AB8A99342C47" class="sect4"><span class="enumeration_section">20.2.2 </span>COPYEVOLVE Parameters and Errors
                  </h4>
                  <div>
                     <p>The parameters of PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> are described, as are the errors associated with this procedure.
                     </p>
                     <div class="section">
                        <p>This is the signature of procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code>:
                        </p><pre class="oac_no_warn" dir="ltr">procedure copyEvolve(schemaURLs       IN XDB$STRING_LIST_T,
                     newSchemas       IN XMLSequenceType,
                     transforms       IN XMLSequenceType := NULL,
                     preserveOldDocs  IN BOOLEAN := FALSE,
                     mapTabName       IN VARCHAR2 := NULL,
                     generateTables   IN BOOLEAN := TRUE,
                     force            IN BOOLEAN := FALSE,
                     schemaOwners     IN XDB$STRING_LIST_T := NULL
                     parallelDegree   IN PLS_INTEGER := 0,
                     options          IN PLS_INTEGER := 0);
</pre><p><a href="XML-Schema-evolution.html#GUID-8F38814C-56AE-4021-AF31-AB8A99342C47__BCGJCFHJ" title="This table describes the DBMS_XMLSCHEMA.CopyEvolve parameters.">Table 20-1</a> describes the individual parameters. <a href="XML-Schema-evolution.html#GUID-8F38814C-56AE-4021-AF31-AB8A99342C47__BCGGIFAF" title="This table describes DG‘BMS_XMLSCHEMA.copyevolve’s errors and exceptions. It includes the cause and action to take.">Table 20-2</a> describes the errors associated with the procedure.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-8F38814C-56AE-4021-AF31-AB8A99342C47__BCGJCFHJ">
                        <p class="titleintable">Table 20-1 Parameters of Procedure DBMS_XMLSCHEMA.COPYEVOLVE</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Parameters of Procedure DBMS_XMLSCHEMA.COPYEVOLVE" summary="This table describes the DBMS_XMLSCHEMA.CopyEvolve parameters." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d103278e825">Parameter</th>
                                 <th align="left" valign="bottom" width="69%" id="d103278e828">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d103278e833" headers="d103278e825 ">
                                    <p><code class="codeph">schemaURLs</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d103278e833 d103278e828 ">
                                    <p>Varray of URLs of XML schemas to be evolved (varray of <code class="codeph">VARCHAR2(4000)</code>. This should include the dependent schemas as well. Unless the force parameter is <code class="codeph">TRUE</code>, the URLs should be in the dependency order, that is, if URL A comes before URL B in the varray, then schema A should not be dependent on schema B but schema B may be dependent on schema A.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d103278e847" headers="d103278e825 ">
                                    <p><code class="codeph">newSchemas</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d103278e847 d103278e828 ">
                                    <p>Varray of new XML schema documents (<code class="codeph">XMLType</code> instances). Specify this in exactly the same order as the corresponding URLs. If no change is necessary in an XML schema, provide the unchanged schema.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d103278e858" headers="d103278e825 ">
                                    <p><code class="codeph">transforms</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d103278e858 d103278e828 ">
                                    <p>Varray of XSL documents (<code class="codeph">XMLType</code> instances) that are applied to XML schema based documents to make them conform to the new schemas. Specify these in exactly the same order as the corresponding URLs. If no transformations are required, this parameter need not be specified.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d103278e869" headers="d103278e825 ">
                                    <p><code class="codeph">preserveOldDocs</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d103278e869 d103278e828 ">
                                    <p>If this is <code class="codeph">TRUE</code>, then the temporary tables holding old data are not dropped at the end of schema evolution. See also <a href="XML-Schema-evolution.html#GUID-52D895D1-BFD2-4DA8-B106-6385E9E7BA0D" title="General guidelines for using PL/SQL procedure DBMS_XMLSCHEMA.copyEvolveare presented, as well as guidelines that are specific to particular contexts.">Guidelines for Using Procedure COPYEVOLVE</a>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d103278e889" headers="d103278e825 ">
                                    <p><code class="codeph">mapTabName</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d103278e889 d103278e828 ">
                                    <p>Specifies the name of table that maps old <code class="codeph">XMLType</code> table or column names to names of corresponding temporary tables.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d103278e900" headers="d103278e825 ">
                                    <p><code class="codeph">generateTables</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d103278e900 d103278e828 ">
                                    <p>By default this parameter is <code class="codeph">TRUE</code>. If <code class="codeph">FALSE</code> then <code class="codeph">XMLType</code> tables or columns are not generated after registering new XML schemas. If <code class="codeph">FALSE</code>, <code class="codeph">preserveOldDocs</code> must be <code class="codeph">TRUE</code> and <code class="codeph">mapTabName</code> must not be <code class="codeph">NULL</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d103278e933" headers="d103278e825 ">
                                    <p><code class="codeph">force</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d103278e933 d103278e828 ">
                                    <p>If this is <code class="codeph">TRUE</code>, then errors during the registration of new schemas are ignored. If there are circular dependencies among the schemas, set this flag to <code class="codeph">TRUE</code> to ensure that each schema is stored even though there may be errors in registration.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d103278e947" headers="d103278e825 ">
                                    <p><code class="codeph">schemaOwners</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d103278e947 d103278e828 ">
                                    <p>Varray of names of schema owners. Specify these in exactly the same order as the corresponding URLs.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d103278e955" headers="d103278e825 ">
                                    <p><code class="codeph">parallelDegree</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d103278e955 d103278e828 ">
                                    <p>Specifies the degree of parallelism to be used in a <code class="codeph">PARALLEL</code> hint during the data-copy stage. If this is <code class="codeph">0</code> (default value), a <code class="codeph">PARALLEL</code> hint is absent from the data-copy statements.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d103278e972" headers="d103278e825 ">
                                    <p><code class="codeph">options</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d103278e972 d103278e828 ">
                                    <p>Miscellaneous options. The only option is <code class="codeph">COPYEVOLVE_BINARY_XML</code>, which means to register the new XML schemas for binary XML data and create the new tables or columns with binary XML as the storage model.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformal" id="GUID-8F38814C-56AE-4021-AF31-AB8A99342C47__BCGGIFAF">
                        <p class="titleintable">Table 20-2 Errors Associated with Procedure DBMS_XMLSCHEMA.COPYEVOLVE</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Errors Associated with Procedure DBMS_XMLSCHEMA.COPYEVOLVE" summary="This table describes DG‘BMS_XMLSCHEMA.copyevolve’s errors and exceptions. It includes the cause and action to take." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d103278e993">Error Number and Message</th>
                                 <th align="left" valign="bottom" width="35%" id="d103278e996">Cause</th>
                                 <th align="left" valign="bottom" width="35%" id="d103278e999">Action</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d103278e1004" headers="d103278e993 ">
                                    <p><span class="bold">30942</span> XML Schema Evolution error for schema '&lt;schema_url&gt;' table "&lt;owner_name&gt;.&lt;table_name&gt;" column '&lt;column_name&gt;'
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d103278e1004 d103278e996 ">
                                    <p>The given <code class="codeph">XMLType</code> table or column that conforms to the given XML schema had errors during evolution. In the case of a table, the column name is empty. See also the more specific error that follows this.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d103278e1004 d103278e999 ">
                                    <p>Based on the schema, table, and column information in this error and the more specific error that follows, take corrective action.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d103278e1019" headers="d103278e993 ">
                                    <p><span class="bold">30943</span> XML Schema '&lt;schema_url&gt;' is dependent on XML schema '&lt;schema_url&gt;'
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d103278e1019 d103278e996 ">
                                    <p>Not all dependent XML schemas were specified or the schemas were not specified in dependency order, that is, if schema S1 is dependent on schema S, S must appear before S1.</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d103278e1019 d103278e999 ">
                                    <p>Include the previously unspecified schema in the list of schemas or correct the order in which the schemas are specified. Then retry the operation.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d103278e1031" headers="d103278e993 ">
                                    <p><span class="bold">30944</span> Error during rollback for XML schema '&lt;schema_url&gt;' table "&lt;owner_name&gt;.&lt;table_name&gt;" column '&lt;column_name&gt;'
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d103278e1031 d103278e996 ">
                                    <p>The given <code class="codeph">XMLType</code> table or column that conforms to the given XML schema had errors during a rollback of XML schema evolution. For a table, the column name is empty. See also the more specific error that follows this.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d103278e1031 d103278e999 ">
                                    <p>Based on the schema, table, and column information in this error and the more specific error that follows, take corrective action.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d103278e1046" headers="d103278e993 ">
                                    <p><span class="bold">30945</span>   Could not create mapping table '&lt;table_name&gt;'
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d103278e1046 d103278e996 ">
                                    <p>A mapping table could not be created during XML schema evolution. See also the more specific error that follows this.</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d103278e1046 d103278e999 ">
                                    <p>Ensure that a table with the given name does not exist and retry the operation.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d103278e1058" headers="d103278e993 ">
                                    <p><span class="bold">30946</span> XML Schema Evolution warning: temporary tables not cleaned up
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d103278e1058 d103278e996 ">
                                    <p>An error occurred after the schema was evolved while cleaning up temporary tables. The schema evolution was successful.</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d103278e1058 d103278e999 ">
                                    <p>If you need to remove the temporary tables, use the mapping table to get the temporary table names and drop them.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-0E4FC235-D8D1-4F27-85DC-A3DCCC2662AB" title="You perform copy-based XML schema evolution using PL/SQL procedure DBMS_XMLSCHEMA.copyEvolve. This backs up existing instance documents to temporary XMLType tables, drops the old version of the XML schema (which also deletes the associated instance documents), registers the new version, and copies the backed-up instance documents to new XMLType tables.">Copy-Based Schema Evolution</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4687"></a><div class="props_rev_3"><a id="GUID-12760FD2-5A95-49E9-A090-634C2AD18DA5" name="GUID-12760FD2-5A95-49E9-A090-634C2AD18DA5"></a><h4 id="ADXDB-GUID-12760FD2-5A95-49E9-A090-634C2AD18DA5" class="sect4"><span class="enumeration_section">20.2.3 </span>Limitations of Procedure COPYEVOLVE
                  </h4>
                  <div>
                     <p>The use of PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> involves certain limitations.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Indexes, triggers, constraints, row-level security (RLS) policies, and other metadata related to the <code class="codeph">XMLType</code> tables that are dependent on the schemas are not preserved. These must be re-created after evolution. 
                           </p>
                        </li>
                        <li>
                           <p>If top-level element names are changed, additional steps are required after <code class="codeph">copyEvolve</code> finishes executing. See <a href="XML-Schema-evolution.html#GUID-26F70F58-478C-415D-8640-3B17FCEA25EF" title="PL/SQL procedure DBMS_XMLSCHEMA.copyEvolve assumes that top-level elements have not been dropped in new schemas and that their names have not been changed. If there are such changes then call procedure copyEvolve with parameter generateTables set to FALSE and parameter preserveOldDocs set to TRUE, so that backup document copies are available.">Top-Level Element Name Changes</a>.
                           </p>
                        </li>
                        <li>
                           <p>Copy-based evolution cannot be used if there is a table with an object-type column that has an <code class="codeph">XMLType</code> attribute that is dependent on any of the schemas to be evolved. For example, consider this table:
                           </p><pre class="pre codeblock"><code>CREATE TYPE t1 AS OBJECT (n NUMBER, x XMLType);
CREATE TABLE tab1 (e NUMBER, o t1) XMLType 
 COLUMN o.x XMLSchema "s1.xsd" ELEMENT "Employee";
</code></pre><p>This assumes that an XML schema with a top-level element <code class="codeph">Employee</code> has been registered under URL <code class="codeph">s1.xsd</code>. It is not possible to evolve this XML schema, because table <code class="codeph">tab1</code> with column <code class="codeph">o</code> with <code class="codeph">XMLType</code> attribute <code class="codeph">x</code> is dependent on the XML schema. Although <code class="codeph">copyEvolve</code> does not handle <code class="codeph">XMLType</code> object attributes, it does raise an error in such cases.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-0E4FC235-D8D1-4F27-85DC-A3DCCC2662AB" title="You perform copy-based XML schema evolution using PL/SQL procedure DBMS_XMLSCHEMA.copyEvolve. This backs up existing instance documents to temporary XMLType tables, drops the old version of the XML schema (which also deletes the associated instance documents), registers the new version, and copies the backed-up instance documents to new XMLType tables.">Copy-Based Schema Evolution</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4688"></a><div class="props_rev_3"><a id="GUID-52D895D1-BFD2-4DA8-B106-6385E9E7BA0D" name="GUID-52D895D1-BFD2-4DA8-B106-6385E9E7BA0D"></a><h4 id="ADXDB-GUID-52D895D1-BFD2-4DA8-B106-6385E9E7BA0D" class="sect4"><span class="enumeration_section">20.2.4 </span>Guidelines for Using Procedure COPYEVOLVE
                  </h4>
                  <div>
                     <p>General guidelines for using PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code>are presented, as well as guidelines that are specific to particular contexts.
                     </p>
                     <p>The following general guideline applies to using <code class="codeph">copyEvolve</code>. The rest of this section describes specific guidelines that can also be appropriate in particular contexts.
                     </p>
                     <ol>
                        <li>
                           <p>Turn off the recycle bin, to prevent dropped tables from being copied to it:</p><pre class="pre codeblock"><code>ALTER SESSION SET RECYCLEBIN=off;
</code></pre></li>
                        <li id="GUID-52D895D1-BFD2-4DA8-B106-6385E9E7BA0D__CHDDCIBA">
                           <p>Identify the XML schemas that are dependent on the XML schema that is to be evolved. You can acquire the URLs of the dependent XML schemas using the following query, where <span class="italic"><code class="codeph">schema_to_be_evolved</code></span> is the schema to be evolved, and <span class="italic"><code class="codeph">owner_of_schema_to_be_evolved</code></span> is its owner (database user).
                           </p><pre class="oac_no_warn" dir="ltr">SELECT dxs.SCHEMA_URL, dxs.OWNER
    FROM DBA_DEPENDENCIES dd, DBA_XML_SCHEMAS dxs
    WHERE dd.REFERENCED_NAME = (SELECT INT_OBJNAME
                                  FROM DBA_XML_SCHEMAS
                                  WHERE SCHEMA_URL = <span class="italic">schema_to_be_evolved</span>
                                    AND OWNER = <span class="italic">owner_of_schema_to_be_evolved</span>)
      AND dxs.INT_OBJNAME = dd.NAME;
</pre><p>In many cases, no changes are needed in the dependent XML schemas. But if the dependent XML schemas need to be changed, then you must also prepare new versions of those XML schemas.</p>
                        </li>
                        <li>
                           <p>If the existing instance documents do not conform to the new XML schema, then you must provide an XSL stylesheet that, when applied to an instance document, transforms it to conform to the new schema. You must do this for each XML schema identified in Step <a href="XML-Schema-evolution.html#GUID-52D895D1-BFD2-4DA8-B106-6385E9E7BA0D__CHDDCIBA">2</a>. The transformation must handle documents that conform to all top-level elements in the new XML schema.
                           </p>
                        </li>
                        <li>
                           <p>Call procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code>, specifying the XML schema URLs, new schemas, and transformation stylesheet.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-26F70F58-478C-415D-8640-3B17FCEA25EF">Top-Level Element Name Changes</a><br>PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> assumes that top-level elements have not been dropped in new schemas and that their names have not been changed. If there are such changes then call procedure <code class="codeph">copyEvolve</code> with parameter <code class="codeph">generateTables</code> set to <code class="codeph">FALSE</code> and parameter <code class="codeph">preserveOldDocs</code> set to <code class="codeph">TRUE</code>, so that backup document copies are available.
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-A672BEE9-10BA-4881-8DC2-3CFF0182AC93">User-Created Virtual Columns of Tables Other Than Default Tables</a><br>For tables that are not default tables, any virtual columns that you create are not re-created during copy-based evolution. If such columns are needed then set <code class="codeph">copyEvolve</code> parameter <code class="codeph">preserveOldDocs</code> to <code class="codeph">TRUE</code>, create the tables, and copy the old documents after procedure <code class="codeph">copyEvolve</code> has finished. 
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-FC3DC35A-0BCD-40C8-9300-EFF38F92794F">Ensure That the XML Schema and Dependents Are Not Used by Concurrent Sessions</a><br>Ensure that the XML schema to be evolved, as well as its dependents, are not used by any concurrent session during the XML schema evolution process. 
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-8EDAD01C-4791-4458-A0F3-EBFAC3E94D61">Rollback When Procedure DBMS_XMLSCHEMA.COPYEVOLVE Raises an Error</a><br>Procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> either completely succeeds or it raises an error. If it raises an error then it tries to roll back as much of the operation as possible. 
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-8095D2EB-608D-4FE0-8E91-A37EDDD356F7">Failed Rollback From Insufficient Privileges</a><br>In certain cases you cannot roll back a copy-based evolution operation. For example, if table creation fails due to reasons not related to the new XML schema, then there is no way to roll back. 
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-9D8602A7-07F3-4320-A70A-98AD84061FE8">Privileges Needed for XML Schema Evolution</a><br>There are several database privileges that you might need, in order to perform copy-based XML schema evolution.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-0E4FC235-D8D1-4F27-85DC-A3DCCC2662AB" title="You perform copy-based XML schema evolution using PL/SQL procedure DBMS_XMLSCHEMA.copyEvolve. This backs up existing instance documents to temporary XMLType tables, drops the old version of the XML schema (which also deletes the associated instance documents), registers the new version, and copies the backed-up instance documents to new XMLType tables.">Copy-Based Schema Evolution</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4689"></a><div class="props_rev_3"><a id="GUID-26F70F58-478C-415D-8640-3B17FCEA25EF" name="GUID-26F70F58-478C-415D-8640-3B17FCEA25EF"></a><h5 id="ADXDB-GUID-26F70F58-478C-415D-8640-3B17FCEA25EF" class="sect5"><span class="enumeration_section">20.2.4.1 </span>Top-Level Element Name Changes
                     </h5>
                     <div>
                        <p>PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> assumes that top-level elements have not been dropped in new schemas and that their names have not been changed. If there are such changes then call procedure <code class="codeph">copyEvolve</code> with parameter <code class="codeph">generateTables</code> set to <code class="codeph">FALSE</code> and parameter <code class="codeph">preserveOldDocs</code> set to <code class="codeph">TRUE</code>, so that backup document copies are available.
                        </p>
                        <p>With those parameter values, new tables are not generated, and the temporary tables holding the old documents (backup copies) are not dropped at the end of the procedure. You can then store the old documents in whatever form is appropriate and drop the temporary tables. See <a href="XML-Schema-evolution.html#GUID-8F38814C-56AE-4021-AF31-AB8A99342C47" title="The parameters of PL/SQL procedure DBMS_XMLSCHEMA.copyEvolve are described, as are the errors associated with this procedure.">COPYEVOLVE Parameters and Errors</a> for more details on using these parameters.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-52D895D1-BFD2-4DA8-B106-6385E9E7BA0D" title="General guidelines for using PL/SQL procedure DBMS_XMLSCHEMA.copyEvolveare presented, as well as guidelines that are specific to particular contexts.">Guidelines for Using Procedure COPYEVOLVE</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4690"></a><div class="props_rev_3"><a id="GUID-A672BEE9-10BA-4881-8DC2-3CFF0182AC93" name="GUID-A672BEE9-10BA-4881-8DC2-3CFF0182AC93"></a><h5 id="ADXDB-GUID-A672BEE9-10BA-4881-8DC2-3CFF0182AC93" class="sect5"><span class="enumeration_section">20.2.4.2 </span>User-Created Virtual Columns of Tables Other Than Default Tables
                     </h5>
                     <div>
                        <p>For tables that are not default tables, any virtual columns that you create are not re-created during copy-based evolution. If such columns are needed then set <code class="codeph">copyEvolve</code> parameter <code class="codeph">preserveOldDocs</code> to <code class="codeph">TRUE</code>, create the tables, and copy the old documents after procedure <code class="codeph">copyEvolve</code> has finished. 
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-52D895D1-BFD2-4DA8-B106-6385E9E7BA0D" title="General guidelines for using PL/SQL procedure DBMS_XMLSCHEMA.copyEvolveare presented, as well as guidelines that are specific to particular contexts.">Guidelines for Using Procedure COPYEVOLVE</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4691"></a><div class="props_rev_3"><a id="GUID-FC3DC35A-0BCD-40C8-9300-EFF38F92794F" name="GUID-FC3DC35A-0BCD-40C8-9300-EFF38F92794F"></a><h5 id="ADXDB-GUID-FC3DC35A-0BCD-40C8-9300-EFF38F92794F" class="sect5"><span class="enumeration_section">20.2.4.3 </span>Ensure That the XML Schema and Dependents Are Not Used by Concurrent Sessions
                     </h5>
                     <div>
                        <p>Ensure that the XML schema to be evolved, as well as its dependents, are not used by any concurrent session during the XML schema evolution process. </p>
                        <p>If other, concurrent sessions have shared locks on this schema at the beginning of the evolution process, then procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> waits for these sessions to release the locks so that it can acquire an exclusive lock. However, this lock is released immediately to allow the rest of the process to continue.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-52D895D1-BFD2-4DA8-B106-6385E9E7BA0D" title="General guidelines for using PL/SQL procedure DBMS_XMLSCHEMA.copyEvolveare presented, as well as guidelines that are specific to particular contexts.">Guidelines for Using Procedure COPYEVOLVE</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4692"></a><div class="props_rev_3"><a id="GUID-8EDAD01C-4791-4458-A0F3-EBFAC3E94D61" name="GUID-8EDAD01C-4791-4458-A0F3-EBFAC3E94D61"></a><h5 id="ADXDB-GUID-8EDAD01C-4791-4458-A0F3-EBFAC3E94D61" class="sect5"><span class="enumeration_section">20.2.4.4 </span>Rollback When Procedure DBMS_XMLSCHEMA.COPYEVOLVE Raises an Error
                     </h5>
                     <div>
                        <p>Procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> either completely succeeds or it raises an error. If it raises an error then it tries to roll back as much of the operation as possible. 
                        </p>
                        <p>Evolving an XML schema involves many database DDL statements. When an error occurs, compensating DDL statements are executed to undo the effect of all steps executed to that point. If the old tables or schemas have been dropped, they are re-created, but any table, column, and storage properties and any auxiliary structures (such as indexes, triggers, constraints, and RLS policies) associated with the tables and columns are lost. </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-52D895D1-BFD2-4DA8-B106-6385E9E7BA0D" title="General guidelines for using PL/SQL procedure DBMS_XMLSCHEMA.copyEvolveare presented, as well as guidelines that are specific to particular contexts.">Guidelines for Using Procedure COPYEVOLVE</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4693"></a><div class="props_rev_3"><a id="GUID-8095D2EB-608D-4FE0-8E91-A37EDDD356F7" name="GUID-8095D2EB-608D-4FE0-8E91-A37EDDD356F7"></a><h5 id="ADXDB-GUID-8095D2EB-608D-4FE0-8E91-A37EDDD356F7" class="sect5"><span class="enumeration_section">20.2.4.5 </span>Failed Rollback From Insufficient Privileges
                     </h5>
                     <div>
                        <p>In certain cases you cannot roll back a copy-based evolution operation. For example, if table creation fails due to reasons not related to the new XML schema, then there is no way to roll back. </p>
                        <p>An example is failure due to insufficient privileges. The temporary tables are not deleted even if <code class="codeph">preserveOldDocs</code> is <code class="codeph">FALSE</code>, so the data can be recovered. If the <code class="codeph">mapTabName</code> parameter is null, the mapping table name is <code class="codeph">XDB$MAPTAB</code> followed by a sequence number. The exact table name can be found using a query such as the following:
                        </p><pre class="pre codeblock"><code>SELECT TABLE_NAME FROM USER_TABLES WHERE TABLE_NAME LIKE 'XDB$MAPTAB<span class="bold">%</span>';</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-52D895D1-BFD2-4DA8-B106-6385E9E7BA0D" title="General guidelines for using PL/SQL procedure DBMS_XMLSCHEMA.copyEvolveare presented, as well as guidelines that are specific to particular contexts.">Guidelines for Using Procedure COPYEVOLVE</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4694"></a><div class="props_rev_3"><a id="GUID-9D8602A7-07F3-4320-A70A-98AD84061FE8" name="GUID-9D8602A7-07F3-4320-A70A-98AD84061FE8"></a><h5 id="ADXDB-GUID-9D8602A7-07F3-4320-A70A-98AD84061FE8" class="sect5"><span class="enumeration_section">20.2.4.6 </span>Privileges Needed for XML Schema Evolution
                     </h5>
                     <div>
                        <p>There are several database privileges that you might need, in order to perform copy-based XML schema evolution.</p>
                        <p>Copy-based XML schema evolution can involve dropping or creating SQL data types, so you need type-related privileges such as <code class="codeph">DROP TYPE</code>, <code class="codeph">CREATE TYPE</code>, and <code class="codeph">ALTER TYPE</code>. You need privileges to delete and register the XML schemas involved in the evolution. You need all privileges on <code class="codeph">XMLType</code> tables that conform to the schemas being evolved. For <code class="codeph">XMLType</code> columns, the <code class="codeph">ALTER TABLE</code> privilege is needed on corresponding tables. If there are schema-based <code class="codeph">XMLType</code> tables or columns in other database schemas, you need privileges such as the following:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">CREATE ANY TABLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE ANY INDEX</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">SELECT ANY TABLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">READ ANY TABLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">UPDATE ANY TABLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">INSERT ANY TABLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DELETE ANY TABLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DROP ANY TABLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER ANY TABLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DROP ANY INDEX</code></p>
                           </li>
                        </ul>
                        <p>To avoid needing to grant all these privileges to the database- schema owner, Oracle recommends that a database administrator perform the evolution if there are XML schema-based <code class="codeph">XMLType</code> table or columns belonging to other database schemas.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-52D895D1-BFD2-4DA8-B106-6385E9E7BA0D" title="General guidelines for using PL/SQL procedure DBMS_XMLSCHEMA.copyEvolveare presented, as well as guidelines that are specific to particular contexts.">Guidelines for Using Procedure COPYEVOLVE</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4696"></a><a id="ADXDB4695"></a><div class="props_rev_3"><a id="GUID-737B8590-6531-44BC-B81B-713466ABC931" name="GUID-737B8590-6531-44BC-B81B-713466ABC931"></a><h4 id="ADXDB-GUID-737B8590-6531-44BC-B81B-713466ABC931" class="sect4"><span class="enumeration_section">20.2.5 </span>Update of Existing XML Instance Documents Using an XSLT Stylesheet
                  </h4>
                  <div>
                     <p>After you modify a registered XML schema, you must update any existing XML instance documents that use the schema. You do this by applying an XSLT stylesheet to each of the instance documents. The stylesheet represents the difference between the old and new XML schemas.</p>
                     <p><a href="XML-Schema-evolution.html#GUID-737B8590-6531-44BC-B81B-713466ABC931__BCGGIEFI">Example 20-2</a> shows an XSLT stylesheet, in file <code class="codeph">evolvePurchaseOrder.xsl</code>, that transforms existing purchase-order documents that use the old XML schema, so they use the new XML schema instead.
                     </p>
                     <div class="example" id="GUID-737B8590-6531-44BC-B81B-713466ABC931__BCGGIEFI">
                        <p class="titleinexample">Example 20-2 evolvePurchaseOrder.xsl: XSLT Stylesheet to Update Instance Documents</p><pre class="pre codeblock"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;xsl:output method="xml" encoding="UTF-8"/&gt;
  &lt;xsl:template match="/PurchaseOrder"&gt;
    &lt;PurchaseOrder&gt;
      &lt;xsl:attribute name="xsi:noNamespaceSchemaLocation"&gt;
        http://localhost:8080/source/schemas/poSource/xsd/purchaseOrder.xsd
      &lt;/xsl:attribute&gt;
      &lt;xsl:for-each select="Reference"&gt;
        &lt;xsl:attribute name="Reference"&gt;
          &lt;xsl:value-of select="."/&gt;
        &lt;/xsl:attribute&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:variable name="V264_394" select="'2004-01-01T12:00:00.000000-08:00'"/&gt;
      &lt;xsl:attribute name="DateCreated"&gt;
        &lt;xsl:value-of select="$V264_394"/&gt;
      &lt;/xsl:attribute&gt;
      &lt;xsl:for-each select="Actions"&gt;
        &lt;Actions&gt;
          &lt;xsl:for-each select="Action"&gt;
            &lt;Action&gt;
              &lt;xsl:for-each select="User"&gt;
                &lt;User&gt;
                  &lt;xsl:value-of select="."/&gt;
                &lt;/User&gt;
              &lt;/xsl:for-each&gt;
              &lt;xsl:for-each select="Date"&gt;
                &lt;Date&gt;
                  &lt;xsl:value-of select="."/&gt;
                &lt;/Date&gt;
              &lt;/xsl:for-each&gt;
            &lt;/Action&gt;
          &lt;/xsl:for-each&gt;
        &lt;/Actions&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:for-each select="Reject"&gt;
        &lt;Reject&gt;
          &lt;xsl:for-each select="User"&gt;
            &lt;User&gt;
              &lt;xsl:value-of select="."/&gt;
            &lt;/User&gt;
          &lt;/xsl:for-each&gt;
          &lt;xsl:for-each select="Date"&gt;
            &lt;Date&gt;
              &lt;xsl:value-of select="."/&gt;
            &lt;/Date&gt;
          &lt;/xsl:for-each&gt;
          &lt;xsl:for-each select="Comments"&gt;
            &lt;Comments&gt;
              &lt;xsl:value-of select="."/&gt;
            &lt;/Comments&gt;
          &lt;/xsl:for-each&gt;
        &lt;/Reject&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:for-each select="Requestor"&gt;
        &lt;Requestor&gt;
          &lt;xsl:value-of select="."/&gt;
        &lt;/Requestor&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:for-each select="User"&gt;
        &lt;User&gt;
          &lt;xsl:value-of select="."/&gt;
        &lt;/User&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:for-each select="CostCenter"&gt;
        &lt;CostCenter&gt;
          &lt;xsl:value-of select="."/&gt;
        &lt;/CostCenter&gt;
      &lt;/xsl:for-each&gt;
      &lt;ShippingInstructions&gt;
        &lt;xsl:for-each select="ShippingInstructions"&gt;
          &lt;xsl:for-each select="name"&gt;
            &lt;name&gt;
              &lt;xsl:value-of select="."/&gt;
            &lt;/name&gt;
          &lt;/xsl:for-each&gt;
        &lt;/xsl:for-each&gt;
        &lt;xsl:for-each select="ShippingInstructions"&gt;
          &lt;xsl:for-each select="address"&gt;
            &lt;fullAddress&gt;
              &lt;xsl:value-of select="."/&gt;
            &lt;/fullAddress&gt;
          &lt;/xsl:for-each&gt;
        &lt;/xsl:for-each&gt;
        &lt;xsl:for-each select="ShippingInstructions"&gt;
          &lt;xsl:for-each select="telephone"&gt;
            &lt;telephone&gt;
              &lt;xsl:value-of select="."/&gt;
            &lt;/telephone&gt;
          &lt;/xsl:for-each&gt;
        &lt;/xsl:for-each&gt;
      &lt;/ShippingInstructions&gt;
      &lt;xsl:for-each select="SpecialInstructions"&gt;
        &lt;SpecialInstructions&gt;
          &lt;xsl:value-of select="."/&gt;
        &lt;/SpecialInstructions&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:for-each select="LineItems"&gt;
        &lt;LineItems&gt;
          &lt;xsl:for-each select="LineItem"&gt;
            &lt;xsl:variable name="V22" select="."/&gt;
            &lt;LineItem&gt;
              &lt;xsl:for-each select="@ItemNumber"&gt;
                &lt;xsl:attribute name="ItemNumber"&gt;
                  &lt;xsl:value-of select="."/&gt;
                &lt;/xsl:attribute&gt;
              &lt;/xsl:for-each&gt;
              &lt;xsl:for-each select="$V22/Part"&gt;
                &lt;xsl:variable name="V24" select="."/&gt;
                &lt;xsl:for-each select="@Id"&gt;
                  &lt;Part&gt;
                    &lt;xsl:for-each select="$V22/Description"&gt;
                      &lt;xsl:attribute name="Description"&gt;
                        &lt;xsl:value-of select="."/&gt;
                      &lt;/xsl:attribute&gt;
                    &lt;/xsl:for-each&gt;
                    &lt;xsl:for-each select="$V24/@UnitPrice"&gt;
                      &lt;xsl:attribute name="UnitCost"&gt;
                        &lt;xsl:value-of select="."/&gt;
                      &lt;/xsl:attribute&gt;
                    &lt;/xsl:for-each&gt;
                    &lt;xsl:value-of select="."/&gt;
                  &lt;/Part&gt;
                &lt;/xsl:for-each&gt;
              &lt;/xsl:for-each&gt;
              &lt;xsl:for-each select="$V22/Part"&gt;
                &lt;xsl:for-each select="@Quantity"&gt;
                  &lt;Quantity&gt;
                    &lt;xsl:value-of select="."/&gt;
                  &lt;/Quantity&gt;
                &lt;/xsl:for-each&gt;
              &lt;/xsl:for-each&gt;
            &lt;/LineItem&gt;
          &lt;/xsl:for-each&gt;
        &lt;/LineItems&gt;
      &lt;/xsl:for-each&gt;
    &lt;/PurchaseOrder&gt;
  &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-0E4FC235-D8D1-4F27-85DC-A3DCCC2662AB" title="You perform copy-based XML schema evolution using PL/SQL procedure DBMS_XMLSCHEMA.copyEvolve. This backs up existing instance documents to temporary XMLType tables, drops the old version of the XML schema (which also deletes the associated instance documents), registers the new version, and copies the backed-up instance documents to new XMLType tables.">Copy-Based Schema Evolution</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4701"></a><a id="ADXDB4702"></a><a id="ADXDB4703"></a><a id="ADXDB4699"></a><a id="ADXDB4700"></a><a id="ADXDB4698"></a><div class="props_rev_3"><a id="GUID-977E4919-1072-4A96-B03C-6576A7B98786" name="GUID-977E4919-1072-4A96-B03C-6576A7B98786"></a><h4 id="ADXDB-GUID-977E4919-1072-4A96-B03C-6576A7B98786" class="sect4"><span class="enumeration_section">20.2.6 </span>Examples of Using Procedure COPYEVOLVE
                  </h4>
                  <div>
                     <p>Several examples are presented of using PL/SQL procedure<code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> to update an XML schema. (Be sure to back up all registered XML schemas and XML documents that reference them, before using the procedure.)
                     </p>
                     <div class="section">
                        <p><a href="XML-Schema-evolution.html#GUID-977E4919-1072-4A96-B03C-6576A7B98786__BCGBIBHG">Example 20-3</a> loads a revised XML schema and evolution XSL stylesheet into Oracle XML&nbsp;DB Repository.
                        </p>
                        <p><a href="XML-Schema-evolution.html#GUID-977E4919-1072-4A96-B03C-6576A7B98786__BCGFEAFB">Example 20-4</a> shows how to use procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> to evolve the XML schema <code class="codeph">purchaseOrder.xsd</code> to <code class="codeph">revisedPurchaseOrder.xsd</code> using the XSLT stylesheet <code class="codeph">evolvePurchaseOrder.xsl</code>. 
                        </p>
                        <p>Procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code> evolves registered XML schemas in such a way that existing instance documents continue to remain valid. 
                        </p>
                        <div class="infoboxnote" id="GUID-977E4919-1072-4A96-B03C-6576A7B98786__GUID-F44084BE-2EB5-4245-BCD8-2661F498C13F">
                           <p class="notep1">Caution:</p>
                           <p>Before executing procedure <code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code>, always <span class="italic">back up</span> all registered XML schemas and all XML documents that conform to them. Procedure <code class="codeph">copyEvolve</code> <span class="italic">deletes</span> all documents that conform to registered XML schemas.
                           </p>
                        </div>
                        <p>First, procedure <code class="codeph">copyEvolve</code> copies the data in XML schema-based <code class="codeph">XMLType</code> tables and columns to temporary tables. It then drops the original tables and columns, and deletes the old XML schemas. After registering the new XML schemas, it creates <code class="codeph">XMLType</code> tables and columns and populates them with data (unless parameter <code class="codeph">GENTABLES</code> is <code class="codeph">FALSE</code>) but it does not create any auxiliary structures such as indexes, constraints, triggers, and row-level security (RLS) policies. Procedure <code class="codeph">copyEvolve</code> creates the tables and columns as follows:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>It creates default tables while registering the new schemas.</p>
                           </li>
                           <li>
                              <p>It creates tables that are not default tables using a statement of the following form:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE <span class="italic">table_name</span> OF XMLType OID '<span class="italic">oid</span>'
   XMLSCHEMA <span class="italic">schema_url</span> ELEMENT <span class="italic">element_name</span>
</pre><p>where <span class="italic"><code class="codeph">OID</code></span> is the original OID of the table, before it was dropped.
                              </p>
                           </li>
                           <li>
                              <p>It adds <code class="codeph">XMLType</code> columns using a statement of the following form:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE <span class="italic">table_name</span> ADD (<span class="italic">column_name</span> XMLType) XMLType COLUMN
 <span class="italic">column_name</span> XMLSCHEMA <span class="italic">schema_url</span> ELEMENT <span class="italic">element_name</span>
</pre></li>
                        </ul>
                        <p>When a new XML schema is registered, types are generated if the registration of the corresponding old schema had generated types. If an XML schema was global before the evolution, then it is also global after the evolution. Similarly, if an XML schema was local before the evolution, then it is also local (owned by the same user) after the evolution. You have the option to preserve the temporary tables that contain the old documents, by setting parameter <code class="codeph">preserveOldDocs</code> to <code class="codeph">TRUE</code>. All temporary tables are created in the database schema of the current user. For <code class="codeph">XMLType</code> tables, the temporary table has the columns shown in <a href="XML-Schema-evolution.html#GUID-977E4919-1072-4A96-B03C-6576A7B98786__BCGDADHA" title="This table describes XML Schema evolution XMLType tables’ temporary table columns, including the column name and type.">Table 20-3</a>.
                        </p>
                        <div class="tblformal" id="GUID-977E4919-1072-4A96-B03C-6576A7B98786__BCGDADHA">
                           <p class="titleintable">Table 20-3 XML Schema Evolution: XMLType Table Temporary Table Columns </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XML Schema Evolution: XMLType Table Temporary Table Columns " summary="This table describes XML Schema evolution XMLType tables’ temporary table columns, including the column name and type." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d103278e1971">Name</th>
                                    <th align="left" valign="bottom" width="17%" id="d103278e1974">Type</th>
                                    <th align="left" valign="bottom" width="53%" id="d103278e1977">Comment</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d103278e1982" headers="d103278e1971 ">
                                       <p><code class="codeph">Data</code></p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d103278e1982 d103278e1974 ">
                                       <p><code class="codeph">CLOB</code></p>
                                    </td>
                                    <td align="left" valign="top" width="53%" headers="d103278e1982 d103278e1977 ">
                                       <p>XML document from the old table, in <code class="codeph">CLOB</code> format.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d103278e1997" headers="d103278e1971 ">
                                       <p><code class="codeph">OID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d103278e1997 d103278e1974 ">
                                       <p><code class="codeph">RAW(16)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="53%" headers="d103278e1997 d103278e1977 ">
                                       <p><code class="codeph">OID</code> of the corresponding row in the old table.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d103278e2011" headers="d103278e1971 ">
                                       <p><code class="codeph">ACLOID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d103278e2011 d103278e1974 ">
                                       <p><code class="codeph">RAW(16)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="53%" headers="d103278e2011 d103278e1977 ">
                                       <p>This column is present only if the old table is hierarchy-enabled. <code class="codeph">ACLOID</code> of corresponding row in old table.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d103278e2026" headers="d103278e1971 ">
                                       <p><code class="codeph">OWNERID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d103278e2026 d103278e1974 ">
                                       <p><code class="codeph">RAW(16)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="53%" headers="d103278e2026 d103278e1977 ">
                                       <p>This column is present only if old table is hierarchy-enabled. <code class="codeph">OWNERID</code> of corresponding row in old table.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>For <code class="codeph">XMLType</code> columns, the temporary table has the columns shown in <a href="XML-Schema-evolution.html#GUID-977E4919-1072-4A96-B03C-6576A7B98786__BCGIJHAH" title="This table describes the XML schema evolution XMLType columns’ temporary table columns.">Table 20-4</a>.
                        </p>
                        <div class="tblformal" id="GUID-977E4919-1072-4A96-B03C-6576A7B98786__BCGIJHAH">
                           <p class="titleintable">Table 20-4 XML Schema Evolution: XMLType Column Temporary Table Columns</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XML Schema Evolution: XMLType Column Temporary Table Columns" summary="This table describes the XML schema evolution XMLType columns’ temporary table columns." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d103278e2061">Name</th>
                                    <th align="left" valign="bottom" width="17%" id="d103278e2064">Type</th>
                                    <th align="left" valign="bottom" width="52%" id="d103278e2067">Comment</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d103278e2072" headers="d103278e2061 ">
                                       <p><code class="codeph">Data</code></p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d103278e2072 d103278e2064 ">
                                       <p><code class="codeph">CLOB</code></p>
                                    </td>
                                    <td align="left" valign="top" width="52%" headers="d103278e2072 d103278e2067 ">
                                       <p>XML document from the old column, in <code class="codeph">CLOB</code> format.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d103278e2087" headers="d103278e2061 ">
                                       <p><code class="codeph">RID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d103278e2087 d103278e2064 ">
                                       <p><code class="codeph">ROWID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="52%" headers="d103278e2087 d103278e2067 ">
                                       <p><code class="codeph">ROWID</code> of the corresponding row in the table containing this column.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>Procedure <code class="codeph">copyEvolve</code> stores information about the mapping from the old table or column name to the corresponding temporary table name in a separate table specified by parameter <code class="codeph">mapTabName</code>. If <code class="codeph">preserveOldDocs</code> is <code class="codeph">TRUE</code>, then the <code class="codeph">mapTabName</code> parameter must not be <code class="codeph">NULL</code>, and it must not be the name of any existing table in the current database schema. Each row in the mapping table has information about one of the old tables/columns. <a href="XML-Schema-evolution.html#GUID-977E4919-1072-4A96-B03C-6576A7B98786__BCGJADCF" title="This table describes the mapping of the CopyEvolve procedure for XML schema evolution.">Table 20-5</a> shows the mapping table columns.
                        </p>
                        <div class="tblformal" id="GUID-977E4919-1072-4A96-B03C-6576A7B98786__BCGJADCF">
                           <p class="titleintable">Table 20-5 Procedure COPYEVOLVE Mapping Table </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Procedure COPYEVOLVE Mapping Table " summary="This table describes the mapping of the CopyEvolve procedure for XML schema evolution." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d103278e2137">Column Name</th>
                                    <th align="left" valign="bottom" width="26%" id="d103278e2140">Column Type</th>
                                    <th align="left" valign="bottom" width="43%" id="d103278e2143">Comment</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d103278e2148" headers="d103278e2137 ">
                                       <p><code class="codeph">SCHEMA_URL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d103278e2148 d103278e2140 ">
                                       <p><code class="codeph">VARCHAR2(700)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d103278e2148 d103278e2143 ">
                                       <p>URL of the schema to which this table or column conforms.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d103278e2160" headers="d103278e2137 ">
                                       <p><code class="codeph">SCHEMA_OWNER</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d103278e2160 d103278e2140 ">
                                       <p><code class="codeph">VARCHAR2(30)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d103278e2160 d103278e2143 ">
                                       <p>Owner of the schema.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d103278e2172" headers="d103278e2137 ">
                                       <p><code class="codeph">ELEMENT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d103278e2172 d103278e2140 ">
                                       <p><code class="codeph">VARCHAR2(256)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d103278e2172 d103278e2143 ">
                                       <p>Element to which this table or column conforms.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d103278e2184" headers="d103278e2137 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d103278e2184 d103278e2140 ">
                                       <p><code class="codeph">VARCHAR2(65)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d103278e2184 d103278e2143 ">
                                       <p>Qualified name of the table (<code class="codeph">&lt;owner_name&gt;.&lt;table_name&gt;</code>).
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d103278e2199" headers="d103278e2137 ">
                                       <p><code class="codeph">TABLE_OID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d103278e2199 d103278e2140 ">
                                       <p><code class="codeph">RAW(16)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d103278e2199 d103278e2143 ">
                                       <p><code class="codeph">OID</code> of table.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d103278e2213" headers="d103278e2137 ">
                                       <p><code class="codeph">COLUMN_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d103278e2213 d103278e2140 ">
                                       <p><code class="codeph">VARCHAR2(4000)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d103278e2213 d103278e2143 ">
                                       <p>Name of the column (<code class="codeph">NULL</code> for <code class="codeph">XMLType</code> tables).
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d103278e2231" headers="d103278e2137 ">
                                       <p><code class="codeph">TEMP_TABNAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d103278e2231 d103278e2140 ">
                                       <p><code class="codeph">VARCHAR2(30)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d103278e2231 d103278e2143 ">
                                       <p>Name of temporary table that holds the data for this table or column.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>You can avoid generating any tables or columns after registering the new XML schema by setting parameter <code class="codeph">GENTABLES</code> to <code class="codeph">FALSE</code>. If <code class="codeph">GENTABLES</code> is <code class="codeph">FALSE</code>, parameter <code class="codeph">PRESERVEOLDDOCS</code> must be <code class="codeph">TRUE</code> and parameter <code class="codeph">MAPTABNAME</code> must not be <code class="codeph">NULL</code>. This ensures that the data in the old tables is not lost. This is useful if you do not want the tables to be created by the procedure, as described in section <a href="XML-Schema-evolution.html#GUID-8F38814C-56AE-4021-AF31-AB8A99342C47" title="The parameters of PL/SQL procedure DBMS_XMLSCHEMA.copyEvolve are described, as are the errors associated with this procedure.">COPYEVOLVE Parameters and Errors</a>.
                        </p>
                        <p>By default, it is assumed that all XML schemas are owned by the current user. If this is not true, then you must specify the owner of each XML schema in the <code class="codeph">schemaOwners</code> parameter.
                        </p>
                        <div class="infoboxnotealso" id="GUID-977E4919-1072-4A96-B03C-6576A7B98786__GUID-49F7BCE9-78FB-445B-85E3-281B578A33DB">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sqlrf/ALTER-TABLE.html#SQLRF01001" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for the complete description of <code class="codeph">ALTER TABLE</code></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-977E4919-1072-4A96-B03C-6576A7B98786__BCGBIBHG">
                        <p class="titleinexample">Example 20-3 Loading Revised XML Schema and XSLT Stylesheet</p><pre class="oac_no_warn" dir="ltr">DECLARE
  res BOOLEAN;
BEGIN
  res := DBMS_XDB_REPOS.createResource(         -- Load revised XML schema
           '/source/schemas/poSource/revisedPurchaseOrder.xsd',
           bfilename('XMLDIR', 'revisedPurchaseOrder.xsd'),
           nls_charset_id('AL32UTF8'));
  res := DBMS_XDB_REPOS.createResource(         -- Load revised XSL stylesheet
           '/source/schemas/poSource/evolvePurchaseOrder.xsl',
           bfilename('XMLDIR', 'evolvePurchaseOrder.xsl'),
           nls_charset_id('AL32UTF8'));
END;/
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-977E4919-1072-4A96-B03C-6576A7B98786__BCGFEAFB">
                        <p class="titleinexample">Example 20-4 Updating an XML Schema Using DBMS_XMLSCHEMA.COPYEVOLVE</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_XMLSCHEMA.copyEvolve(
    xdb$string_list_t('http://localhost:8080/source/schemas/poSource/xsd/purchaseOrder.xsd'),
    XMLSequenceType(XDBURIType('/source/schemas/poSource/revisedPurchaseOrder.xsd').getXML()),
    XMLSequenceType(XDBURIType('/source/schemas/poSource/evolvePurchaseOrder.xsl').getXML()));
END;
</pre><pre class="oac_no_warn" dir="ltr">SELECT XMLQuery('$p/PurchaseOrder/LineItems/LineItem[1]'
                PASSING po.OBJECT_VALUE AS "p" RETURNING CONTENT) line_item
  FROM purchaseorder po
  WHERE XMLExists('$p/PurchaseOrder[Reference="SBELL-2003030912333601PDT"]'
                  PASSING po.OBJECT_VALUE AS "p");
 
LINE_ITEM
------------------------------------------------------------------------------
&lt;LineItem ItemNumber="1"&gt;
  <span class="bold">&lt;Part Description="A Night to Remember" UnitCost="39.95"&gt;715515009058&lt;/Part&gt;</span>
  <span class="bold">&lt;Quantity&gt;2&lt;/Quantity&gt;</span>
&lt;/LineItem&gt;
</pre><p>The same query would have produced the following result before the schema evolution:</p><pre class="oac_no_warn" dir="ltr">LINE_ITEM
----------------------------------------------------------
&lt;LineItem ItemNumber="1"&gt;
  <span class="bold">&lt;Description&gt;A Night to Remember&lt;/Description&gt;</span>
  <span class="bold">&lt;Part Id="715515009058" UnitPrice="39.95" Quantity="2"/&gt;</span>
&lt;/LineItem&gt;
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-0E4FC235-D8D1-4F27-85DC-A3DCCC2662AB" title="You perform copy-based XML schema evolution using PL/SQL procedure DBMS_XMLSCHEMA.copyEvolve. This backs up existing instance documents to temporary XMLType tables, drops the old version of the XML schema (which also deletes the associated instance documents), registers the new version, and copies the backed-up instance documents to new XMLType tables.">Copy-Based Schema Evolution</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB0850"></a><div class="props_rev_3"><a id="GUID-0C97EA66-1890-495D-9117-55FB0D563992" name="GUID-0C97EA66-1890-495D-9117-55FB0D563992"></a><h3 id="ADXDB-GUID-0C97EA66-1890-495D-9117-55FB0D563992" class="sect3"><span class="enumeration_section">20.3 </span>In-Place XML Schema Evolution
               </h3>
               <div>
                  <p>In-place XML schema evolution makes changes to an XML schema without requiring that existing data be copied, deleted, and reinserted. In-place evolution is thus much faster than copy-based evolution. However, in-place evolution also has several restrictions that do not apply to copy-based evolution.</p>
                  <p>You use procedure <code class="codeph">DBMS_XMLSCHEMA.inPlaceEvolve</code> to perform in-place evolution. Using this procedure, you identify the changes to be made to an existing XML schema by specifying an XML schema-differences document, and you optionally specify flags to be applied to the evolution process.
                  </p>
                  <p>In-place evolution constructs a new version of an XML schema by applying changes specified in a <code class="codeph">diffXML</code> document, validates that new XML schema (against the XML schema for XML schemas), constructs DDL statements to evolve the disk structures used to store the XML instance documents associated with the XML schema, executes these DDL statements, and replaces the old version of the XML schema with the new, in that order. If the new version of the XML schema is not a valid schema, then in-place evolution fails.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-7532CECB-3F71-4E7A-A6C0-F603CDB9BAFB">Restrictions for In-Place XML Schema Evolution</a><br>Because in-place XML schema evolution avoids copying data, it does not permit arbitrary changes to an XML schema. The primary restriction on using in-place evolution can be stated generally as a requirement that a given XML schema can be evolved in place in only a backward-compatible way.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-A58F605A-45D6-4159-9C2B-104DBE72673F">Supported Operations for In-Place XML Schema Evolution</a><br>Some of the operations that are supported for in-place schema evolution are described. Some of these are not permitted in specific contexts, which are specified. 
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-81D1FF2B-D820-47D4-BCC2-543FAC05541C">Guidelines for Using In-Place XML Schema Evolution</a><br>Guidelines that apply to in-place XML-schema evolution are presented. (Be sure to back up your data before performing in-place schema evolution.)
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-B67CE8DE-8D9E-4221-995F-2065A4DE2F03">inPlaceEvolve Parameters</a><br>The parameters of PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.inPlaceEvolve</code> are described, as are the errors associated with this procedure.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-4517E8F7-3ADB-464F-9744-189785466F7F">The diffXML Parameter Document</a><br>The value of parameter <code class="codeph">diffXML</code> of procedure <code class="codeph">DBMS_XMLSCHEMA.inPlaceEvolve</code> is an <code class="codeph">XMLType</code> instance that specifies the changes to be applied to an XML schema for in-place evolution. This <code class="codeph">diffXML</code> document contains a sequence of operations that describe the changes between the old XML schema and the new (the intended evolution result). 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-F2E920B3-C6D7-428B-9E75-5CE9C21F9B5F" title="You can use XML schema evolution to update your XML schema after you have registered it with Oracle XML&nbsp;DB.">XML Schema Evolution</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4704"></a><div class="props_rev_3"><a id="GUID-7532CECB-3F71-4E7A-A6C0-F603CDB9BAFB" name="GUID-7532CECB-3F71-4E7A-A6C0-F603CDB9BAFB"></a><h4 id="ADXDB-GUID-7532CECB-3F71-4E7A-A6C0-F603CDB9BAFB" class="sect4"><span class="enumeration_section">20.3.1 </span>Restrictions for In-Place XML Schema Evolution
                  </h4>
                  <div>
                     <p>Because in-place XML schema evolution avoids copying data, it does not permit arbitrary changes to an XML schema. The primary restriction on using in-place evolution can be stated generally as a requirement that a given XML schema can be evolved in place in only a backward-compatible way.</p>
                     <p>For the complete list of changes supported by in-place evolution, see <a href="XML-Schema-evolution.html#GUID-A58F605A-45D6-4159-9C2B-104DBE72673F" title="Some of the operations that are supported for in-place schema evolution are described. Some of these are not permitted in specific contexts, which are specified.">Supported Operations for In-Place XML Schema Evolution</a>.
                     </p>
                     <p><strong class="term">Backward-compatible</strong> here means that any possible instance document that would validate against a given XML schema must also validate against a later (evolved) version of that XML schema. This applies to <span class="italic">all possible</span> conforming instance documents, not only to <span class="italic">existing</span> instance documents For XML data that is stored as binary XML, backward compatibility also means that any XML schema annotations that affect binary XML treatment must not change during evolution.
                     </p>
                     <p>In addition to this general backward-compatibility restriction, there are some other restrictions for in-place evolution.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-17B520D9-8711-4CC0-A122-D9F220E39B39">Backward-Compatibility Restrictions</a><br>Restrictions on in-place XML schema evolution are described that ensure backward compatibility of an evolved schema, so that any possible instance documents that satisfy the old XML schema also satisfy the new one.
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-843D0864-84E5-414F-8315-4AB84FA978FF">Other Restrictions on In-Place Evolution</a><br>Some restrictions on in-place XML schema evolution are necessary for reasons other than backward compatibility of the evolved XML schema.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-0C97EA66-1890-495D-9117-55FB0D563992" title="In-place XML schema evolution makes changes to an XML schema without requiring that existing data be copied, deleted, and reinserted. In-place evolution is thus much faster than copy-based evolution. However, in-place evolution also has several restrictions that do not apply to copy-based evolution.">In-Place XML Schema Evolution</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4705"></a><div class="props_rev_3"><a id="GUID-17B520D9-8711-4CC0-A122-D9F220E39B39" name="GUID-17B520D9-8711-4CC0-A122-D9F220E39B39"></a><h5 id="ADXDB-GUID-17B520D9-8711-4CC0-A122-D9F220E39B39" class="sect5"><span class="enumeration_section">20.3.1.1 </span>Backward-Compatibility Restrictions
                     </h5>
                     <div>
                        <p>Restrictions on in-place XML schema evolution are described that ensure backward compatibility of an evolved schema, so that any possible instance documents that satisfy the old XML schema also satisfy the new one.</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-631A3DDB-8491-4070-93C4-B70097EFBF00">Changes in Data Layout on Disk</a><br>Certain changes to an XML schema alter the layout of the associated instance documents on disk, and are therefore not permitted. This situation is more common when the storage layer is tightly integrated with information derived from the XML schema, as is the case for object-relational storage.
                           </li>
                           <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-C806E9FD-2D1A-42CA-8961-516DC8326141">Reorder of XML Schema Constructs</a><br>You cannot use in-place evolution to reorder XML schema elements in a way that affects the DOM fidelity of XML instance documents. For example, you cannot change the order of elements within a <code class="codeph">&lt;sequence&gt;</code> element in a complex type definition. 
                           </li>
                           <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-1ACC4849-6725-4806-B991-4A4114A07D67">Changes from a Collection to a Non-Collection</a><br>You cannot use in-place evolution to change a collection to a non-collection. An example would be changing from <code class="codeph">maxOccurs</code> greater than one to <code class="codeph">maxOccurs</code> equal to one. In-place evolution thus cannot delete an element from a complex type if the deletion requires that a collection be evolved to a non-collection.
                           </li>
                           <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-FDDFFC60-63AF-447D-B95C-EEFBCFA8D301">Model Changes within a complexType Element</a><br>A <strong class="term">model</strong> is a <code class="codeph">group</code>, <code class="codeph">choice</code>, <code class="codeph">sequence</code>, or <code class="codeph">all</code> element. Within a <code class="codeph">complexType</code> element you cannot use in-place evolution to either add a new model or replace an existing model with a model of another type (for example, replace a <code class="codeph">choice</code> element with a <code class="codeph">sequence</code> element). 
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-7532CECB-3F71-4E7A-A6C0-F603CDB9BAFB" title="Because in-place XML schema evolution avoids copying data, it does not permit arbitrary changes to an XML schema. The primary restriction on using in-place evolution can be stated generally as a requirement that a given XML schema can be evolved in place in only a backward-compatible way.">Restrictions for In-Place XML Schema Evolution</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADXDB4707"></a><a id="ADXDB4706"></a><div class="props_rev_3"><a id="GUID-631A3DDB-8491-4070-93C4-B70097EFBF00" name="GUID-631A3DDB-8491-4070-93C4-B70097EFBF00"></a><h6 id="ADXDB-GUID-631A3DDB-8491-4070-93C4-B70097EFBF00" class="sect6"><span class="enumeration_section">20.3.1.1.1 </span>Changes in Data Layout on Disk
                        </h6>
                        <div>
                           <p>Certain changes to an XML schema alter the layout of the associated instance documents on disk, and are therefore not permitted. This situation is more common when the storage layer is tightly integrated with information derived from the XML schema, as is the case for object-relational storage.</p>
                           <p>One such example is an XML schema, registered for object-relational storage mapping, that is evolved by splitting a complex type into two complex types. In <a href="XML-Schema-evolution.html#GUID-631A3DDB-8491-4070-93C4-B70097EFBF00__CHDDDEGA">Example 20-5</a>, complex type <code class="codeph">ShippingInstructionsType</code> is split into two complex types, <code class="codeph">Person-Name</code> and <code class="codeph">Contact-Info</code>, and the <code class="codeph">ShippingInstructionsType</code> complex type is deleted. 
                           </p>
                           <p>Even if this XML schema has no associated instance documents, and therefore no data copy is required, a change in the layout of existing tables is required to accommodate future instance documents.</p>
                           <div class="example" id="GUID-631A3DDB-8491-4070-93C4-B70097EFBF00__CHDDDEGA">
                              <p class="titleinexample">Example 20-5 Splitting a Complex Type into Two Complex Types</p>
                              <p>These code excerpts show the definitions of the original <code class="codeph">ShippingInstructionsType</code> type and the new <code class="codeph">Person</code><code class="codeph">-Name</code> and <code class="codeph">Contact-Info</code> types.
                              </p><pre class="pre codeblock"><code>&lt;complexType name="ShippingInstructionsType"&gt; 
    &lt;sequence&gt; 
        &lt;element name="name"   type="NameType" minOccurs="0"/&gt; 
        &lt;element name="address" type="AddressType" minOccurs="0"/&gt; 
        &lt;element name="telephone" type="TelephoneType" minOccurs="0"/&gt; 
    &lt;/sequence&gt; 
&lt;/complexType&gt; 
 
&lt;complexType name="Person-Name"&gt; 
    &lt;sequence&gt; 
        &lt;element name="name" type="NameType" minOccurs="0"/&gt; 
    &lt;/sequence&gt;
&lt;/complexType&gt;
 
&lt;complexType name="Contact-Info"&gt;
    &lt;sequence&gt;
        &lt;element name="address" type="AddressType" minOccurs="0"/&gt; 
        &lt;element name="telephone" type="TelephoneType" minOccurs="0"/&gt; 
    &lt;/sequence&gt; 
&lt;/complexType&gt;
</code></pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-17B520D9-8711-4CC0-A122-D9F220E39B39" title="Restrictions on in-place XML schema evolution are described that ensure backward compatibility of an evolved schema, so that any possible instance documents that satisfy the old XML schema also satisfy the new one.">Backward-Compatibility Restrictions</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADXDB4708"></a><div class="props_rev_3"><a id="GUID-C806E9FD-2D1A-42CA-8961-516DC8326141" name="GUID-C806E9FD-2D1A-42CA-8961-516DC8326141"></a><h6 id="ADXDB-GUID-C806E9FD-2D1A-42CA-8961-516DC8326141" class="sect6"><span class="enumeration_section">20.3.1.1.2 </span>Reorder of XML Schema Constructs
                        </h6>
                        <div>
                           <p>You cannot use in-place evolution to reorder XML schema elements in a way that affects the DOM fidelity of XML instance documents. For example, you cannot change the order of elements within a <code class="codeph">&lt;sequence&gt;</code> element in a complex type definition. 
                           </p>
                           <p>As an example, if a complex type named <code class="codeph">ShippingInstructionsType</code> requires that its child elements <code class="codeph">name</code>, <code class="codeph">address</code>, and <code class="codeph">telephone</code> be in that order, you cannot use in-place evolution to change the order to <code class="codeph">name</code>, <code class="codeph">telephone</code>, and <code class="codeph">address</code>.
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-17B520D9-8711-4CC0-A122-D9F220E39B39" title="Restrictions on in-place XML schema evolution are described that ensure backward compatibility of an evolved schema, so that any possible instance documents that satisfy the old XML schema also satisfy the new one.">Backward-Compatibility Restrictions</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADXDB4709"></a><div class="props_rev_3"><a id="GUID-1ACC4849-6725-4806-B991-4A4114A07D67" name="GUID-1ACC4849-6725-4806-B991-4A4114A07D67"></a><h6 id="ADXDB-GUID-1ACC4849-6725-4806-B991-4A4114A07D67" class="sect6"><span class="enumeration_section">20.3.1.1.3 </span>Changes from a Collection to a Non-Collection
                        </h6>
                        <div>
                           <p>You cannot use in-place evolution to change a collection to a non-collection. An example would be changing from <code class="codeph">maxOccurs</code> greater than one to <code class="codeph">maxOccurs</code> equal to one. In-place evolution thus cannot delete an element from a complex type if the deletion requires that a collection be evolved to a non-collection.
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-17B520D9-8711-4CC0-A122-D9F220E39B39" title="Restrictions on in-place XML schema evolution are described that ensure backward compatibility of an evolved schema, so that any possible instance documents that satisfy the old XML schema also satisfy the new one.">Backward-Compatibility Restrictions</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADXDB6002"></a><div class="props_rev_3"><a id="GUID-FDDFFC60-63AF-447D-B95C-EEFBCFA8D301" name="GUID-FDDFFC60-63AF-447D-B95C-EEFBCFA8D301"></a><h6 id="ADXDB-GUID-FDDFFC60-63AF-447D-B95C-EEFBCFA8D301" class="sect6"><span class="enumeration_section">20.3.1.1.4 </span>Model Changes within a complexType Element
                        </h6>
                        <div>
                           <p>A <strong class="term">model</strong> is a <code class="codeph">group</code>, <code class="codeph">choice</code>, <code class="codeph">sequence</code>, or <code class="codeph">all</code> element. Within a <code class="codeph">complexType</code> element you cannot use in-place evolution to either add a new model or replace an existing model with a model of another type (for example, replace a <code class="codeph">choice</code> element with a <code class="codeph">sequence</code> element). 
                           </p>
                           <p>You can, however, add a global <code class="codeph">group</code> element, that is, add a <code class="codeph">group</code> element outside of a <code class="codeph">complexType</code> element.
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-17B520D9-8711-4CC0-A122-D9F220E39B39" title="Restrictions on in-place XML schema evolution are described that ensure backward compatibility of an evolved schema, so that any possible instance documents that satisfy the old XML schema also satisfy the new one.">Backward-Compatibility Restrictions</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADXDB4710"></a><div class="props_rev_3"><a id="GUID-843D0864-84E5-414F-8315-4AB84FA978FF" name="GUID-843D0864-84E5-414F-8315-4AB84FA978FF"></a><h5 id="ADXDB-GUID-843D0864-84E5-414F-8315-4AB84FA978FF" class="sect5"><span class="enumeration_section">20.3.1.2 </span>Other Restrictions on In-Place Evolution
                     </h5>
                     <div>
                        <p>Some restrictions on in-place XML schema evolution are necessary for reasons other than backward compatibility of the evolved XML schema.</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-E2E4E681-4C97-4DDA-9F1B-A055B23ED6AC">Changes to Attributes in Namespace xdb</a><br>Except for attribute <code class="codeph">xdb:defaultTable</code>, you cannot use in-place evolution to modify any attributes in namespace <code class="codeph">http://xmlns.oracle.com/xdb</code> (which has the predefined prefix <code class="codeph">xdb</code>).
                           </li>
                           <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-DC55F317-E8AC-41D6-A66D-EF1249551F61">Changes from a Non-Collection to a Collection</a><br>For object-relational <code class="codeph">XMLType</code> data, you cannot use in-place evolution to change a non-collection object type to a collection object type. An example would be adding an element to a complex type if the element is already present in the type (or in a type related through inheritance).
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-7532CECB-3F71-4E7A-A6C0-F603CDB9BAFB" title="Because in-place XML schema evolution avoids copying data, it does not permit arbitrary changes to an XML schema. The primary restriction on using in-place evolution can be stated generally as a requirement that a given XML schema can be evolved in place in only a backward-compatible way.">Restrictions for In-Place XML Schema Evolution</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADXDB4711"></a><div class="props_rev_3"><a id="GUID-E2E4E681-4C97-4DDA-9F1B-A055B23ED6AC" name="GUID-E2E4E681-4C97-4DDA-9F1B-A055B23ED6AC"></a><h6 id="ADXDB-GUID-E2E4E681-4C97-4DDA-9F1B-A055B23ED6AC" class="sect6"><span class="enumeration_section">20.3.1.2.1 </span>Changes to Attributes in Namespace xdb
                        </h6>
                        <div>
                           <p>Except for attribute <code class="codeph">xdb:defaultTable</code>, you cannot use in-place evolution to modify any attributes in namespace <code class="codeph">http://xmlns.oracle.com/xdb</code> (which has the predefined prefix <code class="codeph">xdb</code>).
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-843D0864-84E5-414F-8315-4AB84FA978FF" title="Some restrictions on in-place XML schema evolution are necessary for reasons other than backward compatibility of the evolved XML schema.">Other Restrictions on In-Place Evolution</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADXDB4712"></a><div class="props_rev_3"><a id="GUID-DC55F317-E8AC-41D6-A66D-EF1249551F61" name="GUID-DC55F317-E8AC-41D6-A66D-EF1249551F61"></a><h6 id="ADXDB-GUID-DC55F317-E8AC-41D6-A66D-EF1249551F61" class="sect6"><span class="enumeration_section">20.3.1.2.2 </span>Changes from a Non-Collection to a Collection
                        </h6>
                        <div>
                           <p>For object-relational <code class="codeph">XMLType</code> data, you cannot use in-place evolution to change a non-collection object type to a collection object type. An example would be adding an element to a complex type if the element is already present in the type (or in a type related through inheritance).
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-843D0864-84E5-414F-8315-4AB84FA978FF" title="Some restrictions on in-place XML schema evolution are necessary for reasons other than backward compatibility of the evolved XML schema.">Other Restrictions on In-Place Evolution</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div><a id="ADXDB4713"></a><div class="props_rev_3"><a id="GUID-A58F605A-45D6-4159-9C2B-104DBE72673F" name="GUID-A58F605A-45D6-4159-9C2B-104DBE72673F"></a><h4 id="ADXDB-GUID-A58F605A-45D6-4159-9C2B-104DBE72673F" class="sect4"><span class="enumeration_section">20.3.2 </span>Supported Operations for In-Place XML Schema Evolution
                  </h4>
                  <div>
                     <p>Some of the operations that are supported for in-place schema evolution are described. Some of these are not permitted in specific contexts, which are specified. </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Add an optional element to a complex type or group: Always permitted. An example is the addition of the optional element <code class="codeph">shipmethod</code> in the following complex type definition:
                           </p><pre class="pre codeblock"><code>&lt;xs:complexType name="ShippingInstructionsType"&gt;
    &lt;xs:sequence&gt;
        &lt;xs:element name="name" type="NameType" minOccurs="0"/&gt;
        &lt;xs:element name="address" type="AddressType" minOccurs="0"/&gt;
        &lt;xs:element name="telephone" type="TelephoneType" minOccurs="0"/&gt;
        <span class="bold">&lt;xs:element name = "shipmethod" type = "xs:string" minOccurs = "0"/&gt;</span>
    &lt;/xs:sequence&gt;
&lt;/xs:complexType&gt;
</code></pre></li>
                        <li>
                           <p>Add an optional attribute to a complex type or attribute group: Always permitted. An example is the addition of the optional attribute <code class="codeph">shipbydate</code> in the following complex type definition:
                           </p><pre class="pre codeblock"><code>&lt;xs:complexType name="ShippingInstructionsType"&gt;
    &lt;xs:sequence&gt;
        &lt;xs:element name="name" type="NameType" minOccurs="0"/&gt;
        &lt;xs:element name="address" type="AddressType" minOccurs="0"/&gt;
        &lt;xs:element name="telephone" type="TelephoneType" minOccurs="0"/&gt;
    &lt;/xs:sequence&gt;
    <span class="bold">&lt;xs:attribute name="shipbydate" type="DateType" use="optional"/&gt;</span>
&lt;/xs:complexType&gt;
</code></pre></li>
                        <li>
                           <p>Convert an element from simple type to complex type with simple content: Supported only if the storage model is binary XML.</p>
                        </li>
                        <li>
                           <p>Modify the value attribute of an existing maxLength element: Always permitted. The value can only be increased, not decreased. </p>
                        </li>
                        <li>
                           <p>Add an enumeration value: You can add a new enumeration value only to the end of an enumeration list. </p>
                        </li>
                        <li>
                           <p>Add a global element: Always permitted. An example is the addition of the global element <code class="codeph">PurchaseOrderComment</code> in the following schema definition:
                           </p><pre class="pre codeblock"><code>&lt;xs:schema ...&gt; 
... 
    <span class="bold">&lt;xs:element name="PurchaseOrderComment" type="string" xdb:defaultTable=""/&gt;</span> 
.. 
&lt;/xs:schema&gt;
</code></pre></li>
                        <li>
                           <p>Add a global attribute: Always permitted. </p>
                        </li>
                        <li>
                           <p>Add or delete a global complex type: Always permitted. An example is the addition of the global complex type <code class="codeph">ComplexAddressType</code> in the following schema definition:
                           </p><pre class="pre codeblock"><code>&lt;xs:schema ...&gt; 
.... 
    <span class="bold">&lt;xs:complexType name="ComplexAddressType"&gt;</span> 
        <span class="bold">&lt;xs:sequence&gt;</span> 
            <span class="bold">&lt;xs:element name="street" type="string"/&gt;</span> 
            <span class="bold">&lt;xs:element name="city" type="string"/&gt;</span> 
            <span class="bold">&lt;xs:element ref="zip" type="positiveInteger"/&gt;</span> 
            <span class="bold">&lt;xs:element name="country"  type="string"/&gt;</span> 
        <span class="bold">&lt;/xs:sequence&gt;</span> 
     <span class="bold">&lt;/xs:complexType&gt;</span> 
... 
&lt;/xs:schema&gt;
</code></pre></li>
                        <li>
                           <p>Add or delete a global simple type: Always permitted. </p>
                        </li>
                        <li>
                           <p>Change the <code class="codeph">minOccurs</code> attribute value: The value of <code class="codeph">minOccurs</code> can only be decreased.
                           </p>
                        </li>
                        <li>
                           <p>Change the <code class="codeph">maxOccurs</code> attribute value: The value of <code class="codeph">maxOccurs</code> can only be increased, and this is only possible for data stored as binary XML. That is, you cannot make any change to the <code class="codeph">maxOccurs</code> attribute for data stored object-relationally.
                           </p>
                        </li>
                        <li>
                           <p>Add or delete a global group or <code class="codeph">attributeGroup</code>: Always permitted. An example is the addition of an <code class="codeph">Instructions</code> group in the following type definition:
                           </p><pre class="pre codeblock"><code>&lt;xsd:schema ...&gt; 
... 
  <span class="bold">&lt;xsd:group name="Instructions"&gt;</span> 
    <span class="bold">&lt;xsd:sequence&gt;</span> 
     <span class="bold">&lt;xsd:element name="ShippingInstructions" type="ShippingInstructionsType"/&gt;</span> 
     <span class="bold">&lt;xsd:element name="SpecialInstructions" type=" SpecialInstructionsType"/&gt;</span> 
    <span class="bold">&lt;/xsd:sequence&gt;</span> 
  <span class="bold">&lt;/xsd:group&gt;</span> 
... 
&lt;/xsd:schema&gt;
</code></pre></li>
                        <li>
                           <p>Change the xdb:defaultTable attribute value: Always permitted. Changes are <span class="italic">not</span> permitted to any other attributes in the <code class="codeph">xdb</code> namespace.
                           </p>
                        </li>
                        <li>
                           <p>Add, modify, or delete a comment or processing instruction: Always permitted. </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-0C97EA66-1890-495D-9117-55FB0D563992" title="In-place XML schema evolution makes changes to an XML schema without requiring that existing data be copied, deleted, and reinserted. In-place evolution is thus much faster than copy-based evolution. However, in-place evolution also has several restrictions that do not apply to copy-based evolution.">In-Place XML Schema Evolution</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4714"></a><div class="props_rev_3"><a id="GUID-81D1FF2B-D820-47D4-BCC2-543FAC05541C" name="GUID-81D1FF2B-D820-47D4-BCC2-543FAC05541C"></a><h4 id="ADXDB-GUID-81D1FF2B-D820-47D4-BCC2-543FAC05541C" class="sect4"><span class="enumeration_section">20.3.3 </span>Guidelines for Using In-Place XML Schema Evolution
                  </h4>
                  <div>
                     <p>Guidelines that apply to in-place XML-schema evolution are presented. (Be sure to back up your data before performing in-place schema evolution.)</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic">Before</span> you perform an in-place XML-schema evolution:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="italic">Back up all existing data</span> (instance documents) for the XML schema to be evolved.
                                 </p>
                                 <div class="infoboxnote" id="GUID-81D1FF2B-D820-47D4-BCC2-543FAC05541C__GUID-BB7E8076-CAE6-4F69-B9ED-DBB2949B97D1">
                                    <p class="notep1">Caution:</p>
                                    <p>Make sure that you back up your data before performing in-place XML schema evolution, in case the result is not what you intended. There is <span class="italic">no rollback</span> possible after an in-place evolution. If any errors occur during evolution, or if you make a major mistake and need to redo the entire operation, you must be able to go back to the backup copy of your original data.
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p><span class="italic">Perform a dry run</span> using trace only, that is, without actually evolving the XML schema or updating any instance documents, produce a trace of the update operations that would be performed during evolution. To do this, set the <code class="codeph">flag</code> parameter value to only <code class="codeph">INPLACE_TRACE</code>. Do not also use <code class="codeph">INPLACE_EVOLVE</code>.
                                 </p>
                                 <p>After performing the dry run, examine the trace file, verifying that the listed DDL operations are in fact those that you intend.</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><span class="italic">After</span> you perform an in-place XML-schema evolution:
                           </p>
                           <p>If you are accessing the database using a client that caches data, or if you are not sure whether this is the case, then <span class="italic">restart your client</span>. Otherwise, the pre-evolution version of the XML schema might continue to be used locally, with unpredictable results.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-81D1FF2B-D820-47D4-BCC2-543FAC05541C__GUID-7F56A972-5D6D-4BBA-8093-FE1CEA8347A1">
                        <p class="notep1">See Also:</p>
                        <p><a href="../admin/diagnosing-and-resolving-problems.html#ADMIN11263" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about using trace files
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-0C97EA66-1890-495D-9117-55FB0D563992" title="In-place XML schema evolution makes changes to an XML schema without requiring that existing data be copied, deleted, and reinserted. In-place evolution is thus much faster than copy-based evolution. However, in-place evolution also has several restrictions that do not apply to copy-based evolution.">In-Place XML Schema Evolution</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4716"></a><a id="ADXDB4715"></a><div class="props_rev_3"><a id="GUID-B67CE8DE-8D9E-4221-995F-2065A4DE2F03" name="GUID-B67CE8DE-8D9E-4221-995F-2065A4DE2F03"></a><h4 id="ADXDB-GUID-B67CE8DE-8D9E-4221-995F-2065A4DE2F03" class="sect4"><span class="enumeration_section">20.3.4 </span>inPlaceEvolve Parameters
                  </h4>
                  <div>
                     <p>The parameters of PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.inPlaceEvolve</code> are described, as are the errors associated with this procedure.
                     </p>
                     <div class="section">
                        <p>This is the signature of procedure <code class="codeph">DBMS_XMLSCHEMA.inPlaceEvolve</code>:
                        </p><pre class="oac_no_warn" dir="ltr">procedure inPlaceEvolve(schemaURL IN VARCHAR2,
                        diffXML   IN XMLType, 
                        flags     IN NUMBER);
</pre><p><a href="XML-Schema-evolution.html#GUID-B67CE8DE-8D9E-4221-995F-2065A4DE2F03__BCGHFHEI" title="This table describes the DBMS_XMLSCHEMA.InPlaceEvolve parameters.">Table 20-6</a> describes the individual parameters.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-B67CE8DE-8D9E-4221-995F-2065A4DE2F03__BCGHFHEI">
                        <p class="titleintable">Table 20-6 Parameters of Procedure DBMS_XMLSCHEMA.INPLACEEVOLVE</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Parameters of Procedure DBMS_XMLSCHEMA.INPLACEEVOLVE" summary="This table describes the DBMS_XMLSCHEMA.InPlaceEvolve parameters." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="15%" id="d103278e3332">Parameter</th>
                                 <th align="left" valign="bottom" width="85%" id="d103278e3335">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d103278e3340" headers="d103278e3332 ">
                                    <p><code class="codeph">schemaURL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d103278e3340 d103278e3335 ">
                                    <p>URL of the XML schema to be evolved (<code class="codeph">VARCHAR2)</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d103278e3351" headers="d103278e3332 ">
                                    <p><code class="codeph">diffXML</code></p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d103278e3351 d103278e3335 ">
                                    <p>XML document (<code class="codeph">XMLType</code> instance) that conforms to the <code class="codeph">xdiff</code> XML schema, and that specifies the changes to apply and the locations in the XML schema where the changes are to be applied. For information about how to create the document for this parameter, see <a href="XML-Schema-evolution.html#GUID-4517E8F7-3ADB-464F-9744-189785466F7F" title="The value of parameter diffXML of procedure DBMS_XMLSCHEMA.inPlaceEvolve is an XMLType instance that specifies the changes to be applied to an XML schema for in-place evolution. This diffXML document contains a sequence of operations that describe the changes between the old XML schema and the new (the intended evolution result).">The diffXML Parameter Document</a>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d103278e3383" headers="d103278e3332 ">
                                    <p><code class="codeph">flags</code></p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d103278e3383 d103278e3335 ">
                                    <p>A bit mask that controls the behavior of the procedure. You can set the following bit values in this mask independently, summing them to define the overall effect. The default <code class="codeph">flags</code> value is 1 (bit 1 on, bit 2 off), meaning that in-place evolution is performed and no trace is written.
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">INPLACE_EVOLVE</code> (value 1, meaning that bit 1 is on) &#x2013; Perform in-place XML schema evolution. Construct a new XML schema and validate it (against the XML schema for XML schemas). Construct the DDL statements needed to evolve the instance-document disk structures. Execute the DDL statements. Replace the old XML schema with the new.
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">INPLACE_TRACE</code> (value 2, meaning that bit 2 is on) &#x2013; Perform all steps necessary for in-place evolution, <span class="italic">except</span> executing the DDL statements and overwriting the old XML schema with the new, then write both the DDL statements and the new XML schema to a trace file.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>That is, each of the bits constructs the new XML schema, validates it, and determines the steps needed to evolve the disk structures underlying the instance documents. In addition:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Bit <code class="codeph">INPLACE_EVOLVE</code> carries out those evolution steps and replaces the old XML schema with the new.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Bit <code class="codeph">INPLACE_TRACE</code> saves the evolution steps and the new XML schema in a trace file (it does not carry out the evolution steps).
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>Procedure <code class="codeph">DBMS_XMLSCHEMA.inPlaceEvolve</code> raises an error in the following cases:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>An XPath expression is invalid, or is syntactically correct but does not target a node in the XML schema.</p>
                           </li>
                           <li>
                              <p>The <code class="codeph">diffXML</code> document does not conform to the <code class="codeph">xdiff</code> XML schema.
                              </p>
                           </li>
                           <li>
                              <p>The change makes the XML schema invalid or not well formed.</p>
                           </li>
                           <li>
                              <p>A generated DDL statement (<code class="codeph">CREATE TYPE</code>, <code class="codeph">ALTER TYPE</code>, and so on) causes a problem when it is executed.
                              </p>
                           </li>
                           <li>
                              <p>An index object associated with an <code class="codeph">XMLType</code> table is in an unsafe state, which could be caused by partition management operations.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-0C97EA66-1890-495D-9117-55FB0D563992" title="In-place XML schema evolution makes changes to an XML schema without requiring that existing data be copied, deleted, and reinserted. In-place evolution is thus much faster than copy-based evolution. However, in-place evolution also has several restrictions that do not apply to copy-based evolution.">In-Place XML Schema Evolution</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4717"></a><div class="props_rev_3"><a id="GUID-4517E8F7-3ADB-464F-9744-189785466F7F" name="GUID-4517E8F7-3ADB-464F-9744-189785466F7F"></a><h4 id="ADXDB-GUID-4517E8F7-3ADB-464F-9744-189785466F7F" class="sect4"><span class="enumeration_section">20.3.5 </span>The diffXML Parameter Document
                  </h4>
                  <div>
                     <p>The value of parameter <code class="codeph">diffXML</code> of procedure <code class="codeph">DBMS_XMLSCHEMA.inPlaceEvolve</code> is an <code class="codeph">XMLType</code> instance that specifies the changes to be applied to an XML schema for in-place evolution. This <code class="codeph">diffXML</code> document contains a sequence of operations that describe the changes between the old XML schema and the new (the intended evolution result). 
                     </p>
                     <p>The changes specified by the <code class="codeph">diffXML</code> document are applied in order. 
                     </p>
                     <p>You must create the XML document to be used for the <code class="codeph">diffXML</code> parameter You can do this in any of the following ways:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">XMLDiff</code> JavaBean (<code class="codeph">oracle.xml.differ.XMLDiff</code>)
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">xmldiff</code> command-line utility
                           </p>
                        </li>
                        <li>
                           <p>SQL function <code class="codeph">XMLDiff</code></p>
                        </li>
                     </ul>
                     <p>The <code class="codeph">diffXML</code> parameter document must conform to the <code class="codeph">xdiff</code> XML schema.
                     </p>
                     <p>The rest of this section presents examples of some operations in a document that conforms to the <code class="codeph">xdiff</code> XML schema.
                     </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XML-Schema-evolution.html#GUID-A40016C6-9610-40D2-8A34-6437ABCAEA0C">diffXML Operations and Examples</a><br>Operations that can be specified in the <code class="codeph">diffXML</code> document supplied to procedure <code class="codeph">DBMS_XMLSCHEMA.inPlaceEvolve</code> are described. An example XML document that conforms to the <code class="codeph">xdiff</code> XML schema is shown.
                        </li>
                     </ul>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-supplied-XML-schemas-and-examples.html#GUID-F3A101B3-A943-4CBC-8AE7-243B76ECFEBD" title="A full listing is presented of xdiff.xsd, the Oracle XML&nbsp;DB-supplied XML schema to which the document specified as the diffXML parameter to procedure DBMS_XMLSCHEMA.inPlaceEvolve must conform.">xdiff.xsd: XML Schema for Comparing Schemas for In-Place Evolution</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-4517E8F7-3ADB-464F-9744-189785466F7F__GUID-EAAF0640-80D5-4CD7-9B59-14D52A785DC7">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../adxdk/XDK-JavaBeans.html#ADXDK246" target="_blank"><span><cite>Oracle XML Developer's Kit Programmer's Guide</cite></span></a> for information on using the <code class="codeph">XMLDiff</code> JavaBean
                              </p>
                           </li>
                           <li>
                              <p><a href="../adxdk/determining-XML-differences-using-C.html#ADXDK2540" target="_blank"><span><cite>Oracle XML Developer's Kit Programmer's Guide</cite></span></a> for information on command-line utility <code class="codeph">xmldiff</code></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/XMLDIFF.html#SQLRF20025" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information on SQL function <code class="codeph">XMLDiff</code> 
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-0C97EA66-1890-495D-9117-55FB0D563992" title="In-place XML schema evolution makes changes to an XML schema without requiring that existing data be copied, deleted, and reinserted. In-place evolution is thus much faster than copy-based evolution. However, in-place evolution also has several restrictions that do not apply to copy-based evolution.">In-Place XML Schema Evolution</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4719"></a><a id="ADXDB4718"></a><div class="props_rev_3"><a id="GUID-A40016C6-9610-40D2-8A34-6437ABCAEA0C" name="GUID-A40016C6-9610-40D2-8A34-6437ABCAEA0C"></a><h5 id="ADXDB-GUID-A40016C6-9610-40D2-8A34-6437ABCAEA0C" class="sect5"><span class="enumeration_section">20.3.5.1 </span>diffXML Operations and Examples
                     </h5>
                     <div>
                        <p>Operations that can be specified in the <code class="codeph">diffXML</code> document supplied to procedure <code class="codeph">DBMS_XMLSCHEMA.inPlaceEvolve</code> are described. An example XML document that conforms to the <code class="codeph">xdiff</code> XML schema is shown.
                        </p>
                        <p>The <code class="codeph">&lt;append-node&gt;</code> element is used for most of the supported changes, such as adding a new attribute to a complex type or appending a new element to a group.
                        </p>
                        <p>The <code class="codeph">&lt;insert-node-before&gt;</code> element specifies that a node of the given type should be inserted before the specified node. The <code class="codeph">xpath</code> attribute specifies the location of the specified node and the <code class="codeph">node-type</code> attribute specifies the type of node to be inserted. The node to be inserted is specified by the <code class="codeph">&lt;content&gt;</code> child element. The <code class="codeph">&lt;insert-node-before&gt;</code> element is mainly used for inserting comments and processing instructions, and for changing and adding add annotation elements.
                        </p>
                        <p>The <code class="codeph">&lt;delete-node&gt;</code> element specifies that the node with the given XPath (specified by the <code class="codeph">xpath</code> attribute) should be deleted along with all its children. For example, you can use this element to delete comments and annotation elements. You can also use this element, in conjunction with <code class="codeph">&lt;append-node&gt;</code> or <code class="codeph">&lt;insert-node-before&gt;</code>, to make changes to an existing node.
                        </p>
                        <p><a href="XML-Schema-evolution.html#GUID-A40016C6-9610-40D2-8A34-6437ABCAEA0C__BCGBHCDH">Example 20-6</a> shows an XML document for the <code class="codeph">diffXML</code> parameter that specifies the following changes:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Delete complex type <code class="codeph">PartType</code>.
                              </p>
                           </li>
                           <li>
                              <p>Add complex type <code class="codeph">PartType</code> with a maximum length of 28.
                              </p>
                           </li>
                           <li>
                              <p>Add a comment before element <code class="codeph">ShippingInstructions</code>.
                              </p>
                           </li>
                           <li>
                              <p>Add a required element <code class="codeph">shipmethod</code> to element <code class="codeph">ShippingInstructions</code>.
                              </p>
                           </li>
                        </ul>
                        <div class="example" id="GUID-A40016C6-9610-40D2-8A34-6437ABCAEA0C__BCGBHCDH">
                           <p class="titleinexample">Example 20-6 diffXML Parameter Document</p><pre class="pre codeblock"><code>&lt;xd:xdiff  xmlns="http://www.w3c.org/2001/XMLSchema" 
           xmlns:xd="http://xmlns.oracle.com/xdb/xdiff.xsd" 
           xmlns:xsi="http://www.w3c.org/2001/XMLSchema-Instance" 
           xsi:schemaLocation="http://xmlns.oracle.com/xdb/xdiff.xsd
           http://xmlns.oracle.com/xdb/xdiff.xsd"&gt; 
 &lt;xd:delete-node xpath="/schema/complexType[@name=&amp;quote;PartType&amp;quote;]//maxLength/&gt; 
 &lt;xd:append-node
  parent-xpath = "/schema/complexType[@name=&amp;quote;PartType&amp;quote;]//restriction"
  node-type = "element"&gt; 
  &lt;xd:content&gt; 
    &lt;xs:maxLength value = "28"/&gt;
  &lt;/xd:content&gt; 
 &lt;/xd:append-node&gt; 
 &lt;xd:insert-node-before 
  xpath="/schema/complexType[@name =&amp;quote;ShippingInstructionsType&amp;quote;]/sequence" 
  node-type="comment"&gt; 
  &lt;xd:content&gt; 
    &lt;!-- A type representing instructions for shipping --&gt; 
  &lt;/xd:content&gt; 
 &lt;/xd:insert-node-before&gt; 
 &lt;xd:append-node 
  parent-xpath="/schema/complexType[@name=&amp;quote;ShippingInstructionsType&amp;quote;]/sequence" 
  node-type="element"&gt; 
  &lt;xd:content&gt; 
   &lt;xs:element name = "shipmethod" type = "xs:string" minOccurs = "1"/&gt; 
  &lt;/xd:content&gt; 
 &lt;/xd:append-node&gt; 
&lt;/xd:xdiff&gt;
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-evolution.html#GUID-4517E8F7-3ADB-464F-9744-189785466F7F" title="The value of parameter diffXML of procedure DBMS_XMLSCHEMA.inPlaceEvolve is an XMLType instance that specifies the changes to be applied to an XML schema for in-place evolution. This diffXML document contains a sequence of operations that describe the changes between the old XML schema and the new (the intended evolution result).">The diffXML Parameter Document</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
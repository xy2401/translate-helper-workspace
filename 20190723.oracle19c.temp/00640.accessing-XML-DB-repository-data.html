<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">
      <meta name="description" content="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">
      <title>Access to Oracle XML&nbsp;DB Repository Data</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96222-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="XML-DB-repository.html" title="Previous" type="text/html">
      <link rel="next" href="configuration-of-XML-DB-repository.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADXDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="XML-DB-repository.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="configuration-of-XML-DB-repository.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-DB-repository.html" property="item" typeof="WebPage"><span property="name"> Oracle XML&nbsp;DB Repository</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Access to Oracle XML&nbsp;DB Repository Data</li>
            </ol>
            <a id="GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" name="GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39"></a><a id="ADXDB2000"></a>
            
            <h2 id="ADXDB-GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" class="sect2"><span class="enumeration_chapter">21 </span> Access to Oracle XML&nbsp;DB Repository Data
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='accessing-XML-DB-repository-data'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code>.
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921">Overview of Oracle XML&nbsp;DB Repository</a><br>Using Oracle XML&nbsp;DB Repository you can store content in the database in hierarchical structures, as opposed to traditional relational database structures. Although the repository can manage any kind of content, it provides specialized capabilities and optimizations related to managing resources with XML content.
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0">Repository Terminology and Supplied Resources</a><br>Oracle XML&nbsp;DB Repository can be thought of as a file system of database objects rather than files. It is a hierarchical set of database objects, across all XML and database schemas, that are mapped to path names.
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD">Oracle XML&nbsp;DB Repository Resources</a><br>Oracle XML&nbsp;DB Repository resources conform to the Oracle XML&nbsp;DB XML schema <code class="codeph">XDBResource.xsd</code>. The elements in a resource include those needed to persistently store WebDAV-defined properties, such as creation date, modification date, WebDAV locks, owner, ACL, language, and character set.
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6">Navigational or Path Access to Repository Resources</a><br>Oracle XML&nbsp;DB Repository folders support the same protocol standards used by many operating systems. This lets a repository folder act like a native folder (directory) in supported operating-system environments. 
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-00093774-B340-4178-9E9C-080EC8592098">Query-Based Access to Repository Resources</a><br>PL/SQL package <code class="codeph">DBMS_XDB_REPOS</code> provides subprograms that act on Oracle XML&nbsp;DB Repository resources. This API is based on the public views <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code>, which enable SQL access to repository data through protocols such as FTP and HTTP(S)/WebDAV.
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-B663D1C9-894E-4518-B66B-B9D9484819BC">Servlet Access to Repository Resources</a><br>Oracle XML&nbsp;DB implements Java Servlet API, version 2.2.
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83">Operations on Repository Resources</a><br>You can operate on data stored in Oracle XML&nbsp;DB Repository resources using Java, PL/SQL, Internet protocols, and Oracle XML DB Content Connector (<span class="italic">deprecated</span>). The most common operations are described, along with the required database permissions to use them.
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75">Accessing the Content of Repository Resources Using SQL</a><br>In SQL you can access the content of a document in Oracle XML&nbsp;DB Repository using PL/SQL constructor <code class="codeph">XDBURIType</code> or using <code class="codeph">RESOURCE_VIEW</code> and the corresponding resource document.
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-F11DE6D9-61DC-4A55-A3A5-74A3590928A3">Access to the Content of XML Schema-Based Documents</a><br>You can access the content of an XML Schema-based document in the same way as for a non-schema-based document: use the corresponding resource document. Or you can access it as a row in the default table that was defined when the XML schema was registered with Oracle XML&nbsp;DB.
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-DE0B24FB-D864-4657-B03C-49442F516DA7">Update of the Content of Repository Documents</a><br>You can update the content of documents stored in Oracle XML&nbsp;DB Repository using Internet protocols or SQL.
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B">Querying Resources in RESOURCE_VIEW and PATH_VIEW</a><br>Examples here illustrate folder-restricted queries of the repository using <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code> together with Oracle SQL functions <code class="codeph">equals_path</code> and <code class="codeph">under_path</code>.
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D">Oracle XML&nbsp;DB Hierarchical Repository Index</a><br>Oracle XML&nbsp;DB uses a hierarchical index for Oracle XML&nbsp;DB Repository, to optimize the performance of path-based and folder-restricted queries of the repository. It is implemented as an Oracle domain index.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML&nbsp;DB Repository lets you version your data, implement and manage security, and use APIs to access and manipulate repository resources.">Oracle XML&nbsp;DB Repository</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5286"></a><a id="ADXDB5285"></a><div class="props_rev_3"><a id="GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921" name="GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921"></a><h3 id="ADXDB-GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921" class="sect3"><span class="enumeration_section">21.1 </span>Overview of Oracle XML&nbsp;DB Repository
               </h3>
               <div>
                  <p>Using Oracle XML&nbsp;DB Repository you can store content in the database in hierarchical structures, as opposed to traditional relational database structures. Although the repository can manage any kind of content, it provides specialized capabilities and optimizations related to managing resources with XML content.</p>
                  <p>Relational databases are traditionally poor at managing hierarchical structures and traversing a path or a URL. Oracle XML&nbsp;DB Repository provides you with a hierarchical organization of XML content in the database. You can query and manage it as if it were organized using files and folders. </p>
                  <p>The relational table-row-column metaphor is an effective model for managing highly structured data. It can be less effective for managing semi-structured and unstructured data, such as document-oriented XML data. </p>
                  <p>For example, a book is not easily represented as a set of rows in a table. It might be more natural to represent a book as a hierarchy, book — chapter — section — paragraph, and to represent the hierarchy as a set of folders and subfolders.</p>
                  <p>A hierarchical repository index speeds up folder and path traversals. Oracle XML&nbsp;DB includes a patented hierarchical index that speeds up folder and path traversals in Oracle XML&nbsp;DB Repository. The hierarchical repository index is transparent to end users, and lets Oracle XML&nbsp;DB perform folder and path traversals at speeds comparable to or faster than conventional file systems.</p>
                  <p><a href="accessing-XML-DB-repository-data.html#GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921__I1044265">Figure 21-1</a> is an example of a hierarchical structure that shows a typical tree of folders and files in Oracle XML&nbsp;DB Repository. The top of the tree shows <code class="codeph">/</code>, the root folder. 
                  </p>
                  <div class="figure" id="GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921__I1044265">
                     <p class="titleinfigure">Figure 21-1 A Folder Tree, Showing Hierarchical Structures in the Repository</p><img src="img/adxdb004.gif" width="593" alt="Description of Figure 21-1 follows" title="Description of Figure 21-1 follows" longdesc="img_text/adxdb004.html"><br><a href="img_text/adxdb004.html">Description of "Figure 21-1 A Folder Tree, Showing Hierarchical Structures in the Repository"</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnote" id="GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921__GUID-2FFD4B23-3914-4D25-B3F2-BBFE00859E30">
                     <p class="notep1">Caution:</p>
                     <p>Folder <code class="codeph">/sys</code> is used by Oracle XML&nbsp;DB to maintain <span class="italic">system-defined</span> XML schemas, access control lists (ACLs), and so on. Do <span class="italic">not</span> add or modify any data in folder <code class="codeph">/sys</code>.
                     </p>
                  </div>
                  <p>Your applications can access content in Oracle XML&nbsp;DB Repository using standard connect-access protocols such as FTP, HTTP(S), and WebDAV, in addition to languages SQL, PL/SQL, Java, and C. Oracle XML&nbsp;DB adds native support to Oracle Database for these protocols, which were designed for document-centric operations. By providing support for these protocols, Oracle XML&nbsp;DB lets Microsoft Windows Explorer, Microsoft Office, and products from vendors such as Altova and Adobe work directly with XML content stored in the repository. </p>
                  <p>The repository gives you direct access to XML content stored in Oracle Database, as if it were stored in a file system. You can set access control privileges on repository files and folders. </p>
                  <p>These features are available because the repository is modeled on <strong class="term">WebDAV</strong>, an IETF standard that defines a set of extensions to the HTTP protocol. WebDAV lets an HTTP server act as a file server for a DAV-enabled client. For example, a WebDAV-enabled editor can interact with an HTTP/WebDAV server as if it were a file system. 
                  </p>
                  <p>The WebDAV standard uses the term <strong class="term">resource</strong> to describe a file or a folder. Each resource managed by a WebDAV server is identified by a URL. A resource has not only content but also associated metadata. 
                  </p>
                  <p>The following topics cover how to access data in Oracle XML&nbsp;DB Repository folders using the standard protocols. They discuss APIs that you can use to access the repository object hierarchy using Java, SQL, and PL/SQL.</p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-C0C5F058-2CCE-4B11-9A79-4FD45D71AB7B">Oracle XML&nbsp;DB Provides Name-Level Locking</a><br>One key advantage of Oracle XML&nbsp;DB Repository is the ability to use SQL for repository operations in the context of a logical transaction. Applications can create long-running transactions that include updates to multiple folders. To provide high levels of concurrency, the repository uses name-level locking rather than folder-level locking
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-8DB9F05C-269A-48B2-BAE3-0B3FAA25B8D7">Two Ways to Access Oracle XML&nbsp;DB Repository Resources</a><br>You can access and manipulate Oracle XML&nbsp;DB Repository resources using SQL with special views or by navigating paths using a hierarchical index.
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-D2F0823F-0677-45D1-B51C-485E0A48D309">Database Schema (User Account) XDB and Oracle XML&nbsp;DB Repository</a><br>Database schema (user account) <code class="codeph">XDB</code> owns <code class="codeph">XMLType</code> table <code class="codeph">XDB$RESOURCE</code>, which contains all of the resources (files and folders) in Oracle XML&nbsp;DB Repository. It also contains all of the <span class="italic">metadata</span> for managing the repository.
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></li>
                        <li><a href="PLSQL-access-to-XML-DB-repository.html#GUID-04D3270F-1AC3-407B-B730-6B5A93AA5D7C" title="PL/SQL packages DBMS_XDB_CONFIG and DBMS_XDB_REPOS together provide the Oracle XML&nbsp;DB resource application program interface (API) for PL/SQL. You use the former to configure Oracle XML&nbsp;DB and its repository. You use the latter to perform other, non-configuration operations on the repository.">PL/SQL Access to Oracle XML&nbsp;DB Repository</a></li>
                        <li><a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></li>
                        <li><a href="repository-access-using-protocols.html#GUID-0476309D-E3DF-4C56-BF21-68CD04D00C98" title="You can access Oracle XML&nbsp;DB Repository data using protocols FTP and HTTP(S)/WebDAV.">Repository Access Using Protocols</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">Access to Oracle XML&nbsp;DB Repository Data</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4176"></a><div class="props_rev_3"><a id="GUID-C0C5F058-2CCE-4B11-9A79-4FD45D71AB7B" name="GUID-C0C5F058-2CCE-4B11-9A79-4FD45D71AB7B"></a><h4 id="ADXDB-GUID-C0C5F058-2CCE-4B11-9A79-4FD45D71AB7B" class="sect4"><span class="enumeration_section">21.1.1 </span>Oracle XML&nbsp;DB Provides Name-Level Locking
                  </h4>
                  <div>
                     <p>One key advantage of Oracle XML&nbsp;DB Repository is the ability to use SQL for repository operations in the context of a logical transaction. Applications can create long-running transactions that include updates to multiple folders. To provide high levels of concurrency, the repository uses name-level locking rather than folder-level locking</p>
                     <p>When using a relational database to maintain hierarchical folder structures, ensuring a high degree of concurrency when adding and removing items in a folder is a challenge. In conventional file systems there is no concept of a transaction. Each operation (add a file, create a subfolder, rename a file, delete a file, and so on) is treated as an atomic transaction. Once the operation has completed the change is immediately available to all other users of the file system.</p>
                     <p>In this situation, a conventional locking strategy that takes an exclusive lock on each updated folder or directory tree would quickly result in significant concurrency problems. Oracle XML&nbsp;DB solves this by providing for name-level locking rather than folder-level locking. Repository operations such as creating, renaming, moving, or deleting a sub-folder or file do not require that your operation be granted an exclusive write lock on the target folder. The repository manages concurrent folder operations by locking the name within the folder rather than the folder itself. The name and the modification type are put on a queue.</p>
                     <p>Only when the transaction is committed is the folder locked and its contents modified. Hence Oracle XML&nbsp;DB lets multiple applications perform concurrent updates on the contents of a folder. The queue is also used to manage folder concurrency by preventing two applications from creating objects with the same name.</p>
                     <p>Queuing folder modifications until commit time also minimizes I/O when a number of changes are made to a single folder in the same transaction. This is useful when several applications generate files quickly in the same directory, for example when generating trace or log files, or when maintaining a spool directory for printing or e-mail delivery.</p>
                     <div class="infoboxnote" id="GUID-C0C5F058-2CCE-4B11-9A79-4FD45D71AB7B__GUID-27AF7B30-1106-4299-9252-E5960404ECB8">
                        <p class="notep1">Note:</p>
                        <p>As a consequence of transactional semantics enforced by the database, folders created using SQL statements are <span class="italic">not</span> visible to other database users until the transaction is committed. <span class="italic">Concurrent</span> access to Oracle XML&nbsp;DB Repository is controlled by the same mechanism used to control concurrency in Oracle Database. The integration of the repository with Oracle Database provides <span class="italic">strong management options for XML content</span>.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921" title="Using Oracle XML&nbsp;DB Repository you can store content in the database in hierarchical structures, as opposed to traditional relational database structures. Although the repository can manage any kind of content, it provides specialized capabilities and optimizations related to managing resources with XML content.">Overview of Oracle XML&nbsp;DB Repository</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5287"></a><div class="props_rev_3"><a id="GUID-8DB9F05C-269A-48B2-BAE3-0B3FAA25B8D7" name="GUID-8DB9F05C-269A-48B2-BAE3-0B3FAA25B8D7"></a><h4 id="ADXDB-GUID-8DB9F05C-269A-48B2-BAE3-0B3FAA25B8D7" class="sect4"><span class="enumeration_section">21.1.2 </span>Two Ways to Access Oracle XML&nbsp;DB Repository Resources
                  </h4>
                  <div>
                     <p>You can access and manipulate Oracle XML&nbsp;DB Repository resources using SQL with special views or by navigating paths using a hierarchical index.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>SQL access. This is done using special views that expose resource properties and path names, and map hierarchical access operators onto the Oracle XML&nbsp;DB schema. See <a href="accessing-XML-DB-repository-data.html#GUID-00093774-B340-4178-9E9C-080EC8592098" title="PL/SQL package DBMS_XDB_REPOS provides subprograms that act on Oracle XML&nbsp;DB Repository resources. This API is based on the public views RESOURCE_VIEW and PATH_VIEW, which enable SQL access to repository data through protocols such as FTP and HTTP(S)/WebDAV.">Query-Based Access to Repository Resources</a>.
                           </p>
                        </li>
                        <li>
                           <p>Navigational or path-based access. This uses a hierarchical index of resources. Each resource has one or more unique path names that reflect its location in the hierarchy. You can navigate, using XPath expressions, to any repository resource.</p>
                           <p>A repository resource can be created as a reference to an existing <code class="codeph">XMLType</code> object in the database. You can navigate to any such database object using XPath. See <a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6" title="Oracle XML&nbsp;DB Repository folders support the same protocol standards used by many operating systems. This lets a repository folder act like a native folder (directory) in supported operating-system environments.">Navigational or Path Access to Repository Resources</a>. 
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-8DB9F05C-269A-48B2-BAE3-0B3FAA25B8D7__GUID-7B275F75-705A-44FE-BB10-D5862A7FF627">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="getting-started-with-XML-DB.html#GUID-BE3A92AD-5962-4E4B-A2BB-10DE5D5F1013" title="Design considerations for applications that use Oracle XML&nbsp;DB Repository include access method, security needs, and whether you need versioning.">Oracle XML&nbsp;DB Repository Access</a> for guidance on selecting an access method
                              </p>
                           </li>
                           <li>
                              <p><a href="accessing-XML-DB-repository-data.html#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="This table describes the API options for accessing Oracle XML DB Repository.">Table 21-3</a> for a summary comparison of the access methods
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>A Uniform Resource Locator (URL) is used to access an Oracle XML&nbsp;DB resource. A URL includes the host name, protocol information, path name, and resource name of the object. </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921" title="Using Oracle XML&nbsp;DB Repository you can store content in the database in hierarchical structures, as opposed to traditional relational database structures. Although the repository can manage any kind of content, it provides specialized capabilities and optimizations related to managing resources with XML content.">Overview of Oracle XML&nbsp;DB Repository</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB6114"></a><div class="props_rev_3"><a id="GUID-D2F0823F-0677-45D1-B51C-485E0A48D309" name="GUID-D2F0823F-0677-45D1-B51C-485E0A48D309"></a><h4 id="ADXDB-GUID-D2F0823F-0677-45D1-B51C-485E0A48D309" class="sect4"><span class="enumeration_section">21.1.3 </span>Database Schema (User Account) XDB and Oracle XML&nbsp;DB Repository
                  </h4>
                  <div>
                     <p>Database schema (user account) <code class="codeph">XDB</code> owns <code class="codeph">XMLType</code> table <code class="codeph">XDB$RESOURCE</code>, which contains all of the resources (files and folders) in Oracle XML&nbsp;DB Repository. It also contains all of the <span class="italic">metadata</span> for managing the repository.
                     </p>
                     <p>Database schema <code class="codeph">XDB</code> is created during Oracle XML&nbsp;DB installation. The primary table in this schema is an <code class="codeph">XMLType</code> table called <code class="codeph">XDB$RESOURCE</code>, which contains one row for each resource (file or folder) in Oracle XML&nbsp;DB Repository. Documents in this table are referred to as <strong class="term">resource documents</strong>. The XML schema that defines the structure of an Oracle XML&nbsp;DB resource document is registered under URL <code class="codeph">"http://xmlns.oracle.com/xdb/XDBResource.xsd</code>. 
                     </p>
                     <p>The tables owned by database schema (user) <code class="codeph">XDB</code> are <span class="italic">internal</span>. Oracle recommends the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Create a <span class="italic">dedicated tablespace</span> for use only by user <code class="codeph">XDB</code>, which means also for Oracle XML&nbsp;DB Repository. Ensure that the tablespace is <span class="italic">not</span> read-only.
                           </p>
                        </li>
                        <li>
                           <p>Do <span class="italic">not</span> directly manipulate any tables or data owned by user <code class="codeph">XDB</code>. For example, do not compress or uncompress them. 
                           </p>
                           <p>Use only the PL/SQL subprograms and database views provided by Oracle XML&nbsp;DB to carry out operations on any tables or data owned by user <code class="codeph">XDB</code>.
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">Never unlock</span> user <code class="codeph">XDB</code>, under any circumstance.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D2F0823F-0677-45D1-B51C-485E0A48D309__GUID-1A8340AF-DFF6-4392-A85E-1724909C3AF2">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="administration-of-XML-DB.html#GUID-F5072D79-E37E-4A44-B6EE-6CA8951CA232" title="PL/SQL package DBMS_XDB_ADMIN has subprograms for managing and configuring Oracle XML&nbsp;DB and Oracle XML&nbsp;DB Repository.">Package DBMS_XDB_ADMIN</a>, for information about creating a dedicated tablespace for user <code class="codeph">XDB</code> and the repository
                              </p>
                           </li>
                           <li>
                              <p><a href="../dbseg/managing-security-for-oracle-database-users.html#DBSEG-GUID-D3770171-8E64-461C-92A4-045248EE42E1" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921" title="Using Oracle XML&nbsp;DB Repository you can store content in the database in hierarchical structures, as opposed to traditional relational database structures. Although the repository can manage any kind of content, it provides specialized capabilities and optimizations related to managing resources with XML content.">Overview of Oracle XML&nbsp;DB Repository</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5288"></a><div class="props_rev_3"><a id="GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0" name="GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0"></a><h3 id="ADXDB-GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0" class="sect3"><span class="enumeration_section">21.2 </span>Repository Terminology and Supplied Resources
               </h3>
               <div>
                  <p>Oracle XML&nbsp;DB Repository can be thought of as a file system of database objects rather than files. It is a hierarchical set of database objects, across all XML and database schemas, that are mapped to path names.</p>
                  <p>The repository is a connected, directed, acyclic<a id="fn_1" name="fn_1" href="#fn_1" onclick="footdisplay(1, "The graph is established by the hard links that define the repository structure, and cycles are not permitted using hard links. You can, however, introduce cycles using weak links. See Hard Links and Weak Links.")"><sup>Foot&nbsp;1</sup></a> graph of resources, with a single root node (<code class="codeph">/</code>). Each resource in the graph has one or more associated path names: the repository supports multiple links to a given resource.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5">Repository Terminology</a><br>Some terms that apply to Oracle XML&nbsp;DB Repository include resource, resource name, resource content, folder or directory, path name, path components, link name, access control list (ACL), and XDBBinary element. Some of these terms have common synonyms in other contexts.
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-AC561AD3-D956-4A6C-9A7B-9DF803799FCC">Predefined Repository Files and Folders</a><br>Certain files and folders are predefined for Oracle XML&nbsp;DB Repository. You can create additional ones for your own use.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">Access to Oracle XML&nbsp;DB Repository Data</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5290"></a><a id="ADXDB5289"></a><div class="props_rev_3"><a id="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5" name="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5"></a><h4 id="ADXDB-GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5" class="sect4"><span class="enumeration_section">21.2.1 </span>Repository Terminology
                  </h4>
                  <div>
                     <p>Some terms that apply to Oracle XML&nbsp;DB Repository include resource, resource name, resource content, folder or directory, path name, path components, link name, access control list (ACL), and XDBBinary element. Some of these terms have common synonyms in other contexts.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><strong class="term">resource</strong> &#x2013; Any object or node in the repository hierarchy. A resource is identified by a Uniform Resource Locator (URL), which includes the path name and resource name of the object. 
                           </p>
                           <div class="infoboxnotealso" id="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5__GUID-7DDDE82E-46C8-4576-9E64-CCFD6928317C">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="intro-to-XML-DB.html#GUID-760E25BD-7270-433B-9515-D3DE68748CEC" title="Oracle XML&nbsp;DB Repository is a component of Oracle Database that lets you handle XML data using a file/folder/URL metaphor.">Oracle XML&nbsp;DB Repository: Overview</a></p>
                                 </li>
                                 <li>
                                    <p><a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML&nbsp;DB Repository resources conform to the Oracle XML&nbsp;DB XML schema XDBResource.xsd. The elements in a resource include those needed to persistently store WebDAV-defined properties, such as creation date, modification date, WebDAV locks, owner, ACL, language, and character set.">Oracle XML&nbsp;DB Repository Resources</a></p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p><strong class="term">folder</strong> &#x2013; A resource that can contain other resources. Sometimes called a <strong class="term">directory</strong>.
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">path name</strong> &#x2013; A hierarchical name representing an absolute path to a resource. It is composed of a slash (<code class="codeph">/</code>) representing the repository root, followed by zero or more <strong class="term">path components</strong> separated by slashes. A path component cannot be only <code class="codeph">.</code> or <code class="codeph">..</code>, but a period (<code class="codeph">.</code>) can otherwise be used in a path component. A path component is composed of any characters in the database character set <span class="italic">except</span> slash (<code class="codeph">/</code>), backslash (<code class="codeph">\</code>), and those characters specified in the Oracle XML&nbsp;DB configuration file, <code class="codeph">xdbconfig.xml</code>, by configuration parameter <code class="codeph">/xdbconfig/sysconfig/invalid-pathname-chars</code>.
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">resource name</strong> (or <strong class="term">link name</strong>) &#x2013; The name of a resource within its parent folder. This is the rightmost path component of a path name. Resource names must be unique within their immediately containing folder, and they are case-sensitive. 
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">resource content</strong> &#x2013; The body, or data, of a resource. This is what you get when you treat the resource as a file and ask for its content. This is always of type <code class="codeph">XMLType</code>. 
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">access control list</strong> (ACL) &#x2013; An ordered list of rules that specify access privileges for principals (users or roles) to one or more repository resources.
                           </p>
                           <div class="infoboxnotealso" id="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5__GUID-73D9AE2D-3DDC-4B31-B791-71842C259834">
                              <p class="notep1">See Also:</p>
                              <p><a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></p>
                           </div>
                        </li>
                        <li>
                           <p><strong class="term">XDBBinary element</strong> &#x2013; An XML element that contains binary data. It is defined by the Oracle XML&nbsp;DB XML schema. <code class="codeph">XDBBinary</code> elements are stored in the repository whenever unstructured binary data is uploaded into Oracle XML&nbsp;DB.
                           </p>
                        </li>
                     </ul>
                     <p>Many terms used by Oracle XML&nbsp;DB have common synonyms in other contexts, as shown in <a href="accessing-XML-DB-repository-data.html#GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5__G1046594" title="This table lists the Oracle XML DB foldering term synonyms.">Table 21-1</a>.
                     </p>
                     <div class="tblformal" id="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5__G1046594">
                        <p class="titleintable">Table 21-1 Synonyms for Oracle XML&nbsp;DB Repository Terms </p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Synonyms for Oracle XML&nbsp;DB Repository Terms " summary="This table lists the Oracle XML DB foldering term synonyms." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="32%" id="d108756e931">Synonym</th>
                                 <th align="left" valign="bottom" width="32%" id="d108756e934">Repository Term</th>
                                 <th align="left" valign="bottom" width="36%" id="d108756e937">Usage</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e942" headers="d108756e931 ">
                                    <p>collection</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e942 d108756e934 ">
                                    <p>folder</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e942 d108756e937 ">
                                    <p>WebDAV</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e952" headers="d108756e931 ">
                                    <p>directory</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e952 d108756e934 ">
                                    <p>folder</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e952 d108756e937 ">
                                    <p>operating systems</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e962" headers="d108756e931 ">
                                    <p>privilege</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e962 d108756e934 ">
                                    <p>privilege</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e962 d108756e937 ">
                                    <p>permission</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e972" headers="d108756e931 ">
                                    <p>right</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e972 d108756e934 ">
                                    <p>privilege</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e972 d108756e937 ">
                                    <p>various</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e982" headers="d108756e931 ">
                                    <p>WebDAV folder</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e982 d108756e934 ">
                                    <p>folder</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e982 d108756e937 ">
                                    <p>Web folder</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e992" headers="d108756e931 ">
                                    <p>role</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e992 d108756e934 ">
                                    <p>group</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e992 d108756e937 ">
                                    <p>access control</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e1002" headers="d108756e931 ">
                                    <p>revision</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e1002 d108756e934 ">
                                    <p>version</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e1002 d108756e937 ">
                                    <p>RCS, CVS</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e1012" headers="d108756e931 ">
                                    <p>file system</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e1012 d108756e934 ">
                                    <p>repository</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e1012 d108756e937 ">
                                    <p>operating systems</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e1022" headers="d108756e931 ">
                                    <p>hierarchy</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e1022 d108756e934 ">
                                    <p>repository</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e1022 d108756e937 ">
                                    <p>various</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e1032" headers="d108756e931 ">
                                    <p>file</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e1032 d108756e934 ">
                                    <p>resource</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e1032 d108756e937 ">
                                    <p>operating systems</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e1042" headers="d108756e931 ">
                                    <p>binding</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e1042 d108756e934 ">
                                    <p>link</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e1042 d108756e937 ">
                                    <p>WebDAV</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0" title="Oracle XML&nbsp;DB Repository can be thought of as a file system of database objects rather than files. It is a hierarchical set of database objects, across all XML and database schemas, that are mapped to path names.">Repository Terminology and Supplied Resources</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5291"></a><div class="props_rev_3"><a id="GUID-AC561AD3-D956-4A6C-9A7B-9DF803799FCC" name="GUID-AC561AD3-D956-4A6C-9A7B-9DF803799FCC"></a><h4 id="ADXDB-GUID-AC561AD3-D956-4A6C-9A7B-9DF803799FCC" class="sect4"><span class="enumeration_section">21.2.2 </span>Predefined Repository Files and Folders 
                  </h4>
                  <div>
                     <p>Certain files and folders are predefined for Oracle XML&nbsp;DB Repository. You can create additional ones for your own use.</p>
                     <div class="section">
                        <p>These are the predefined Oracle XML&nbsp;DB Repository files and folders:</p><pre class="oac_no_warn" dir="ltr">/dbfs<a id="fn_2" name="fn_2" href="#fn_2" onclick="footdisplay(2, " repository="" folder="" dbfs="" gives="" you="" protocol="" access="" to="" your="" content.="" see="" oracle="" database="" securefiles="" and="" large="" objects="" developer's="" guide="" for="" information="" about="" dbfs.="" ")"=""><sup>Foot&nbsp;2</sup></a>
/public
/sys
/sys/acls
/sys/acls/all_all_acl.xml
/sys/acls/all_owner_acl.xml
/sys/acls/bootstrap_acl.xml
/sys/acls/ro_all_acl.xml
/sys/apps
/sys/asm
/sys/log
/sys/schemas
/sys/schemas/PUBLIC
/sys/schemas/PUBLIC/www.w3.org
/sys/schemas/PUBLIC/www.w3.org/2001
/sys/schemas/PUBLIC/www.w3.org/2001/xml.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBResource.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBSchema.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBStandard.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/acl.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/dav.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/log
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/stats.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/xdbconfig.xsd
/xdbconfig.xml</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0" title="Oracle XML&nbsp;DB Repository can be thought of as a file system of database objects rather than files. It is a hierarchical set of database objects, across all XML and database schemas, that are mapped to path names.">Repository Terminology and Supplied Resources</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5292"></a><div class="props_rev_3"><a id="GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" name="GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD"></a><h3 id="ADXDB-GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" class="sect3"><span class="enumeration_section">21.3 </span>Oracle XML&nbsp;DB Repository Resources
               </h3>
               <div>
                  <p>Oracle XML&nbsp;DB Repository resources conform to the Oracle XML&nbsp;DB XML schema <code class="codeph">XDBResource.xsd</code>. The elements in a resource include those needed to persistently store WebDAV-defined properties, such as creation date, modification date, WebDAV locks, owner, ACL, language, and character set.
                  </p>
                  <p>A resource index has a special element called <span class="bold"><code class="codeph">Contents</code></span> that contains the contents of the resource. 
                  </p>
                  <p>The XML schema for a resource also defines an <span class="bold"><code class="codeph">any</code></span> element, with <code class="codeph">maxOccurs</code> attribute unbounded. An <code class="codeph">any</code> element can contain any element outside of the Oracle XML&nbsp;DB XML namespace. Arbitrary instance-defined properties can be associated with the resource. 
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5">Where Is Repository Data Stored?</a><br>Oracle XML&nbsp;DB stores Oracle XML&nbsp;DB Repository data in a set of tables and indexes to which you have access. 
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-40E826C1-DCDD-45B0-B960-C2020125A013">How Documents are Stored in Oracle XML&nbsp;DB Repository</a><br>When an XML document that is based on a registered XML schema is loaded into the repository, the document is parsed and decomposed according to the schema into a set of SQL objects; and a corresponding resource document is created to provide repository access for the source XML document.
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-B20A2200-477D-48DE-AFF9-5EF5DE8BF554">Repository Data Access Control</a><br>You can control access to the resources in Oracle XML&nbsp;DB Repository by using access control lists (ACLs), which are composed of access control entries (ACEs). An ACE grants or denies a set of privileges to a specific principal.
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-B6979F05-B095-48A6-B78D-E20222138051">Repository Path-Name Resolution</a><br>The data relating a folder to its contents is managed by the Oracle XML&nbsp;DB hierarchical repository index. This provides a fast mechanism for evaluating path names which is similar to the directory mechanisms that are used by operating-system file systems. You need certain privileges to resolve a path name.
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655">Link Types</a><br>Links in Oracle XML&nbsp;DB can be repository links or document links. Repository links can be hard links or weak links. Document links can also be hard links or weak links, when their targets are repository resources. 
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="oracle-supplied-XML-schemas-and-examples.html#GUID-939CFC41-A851-40F3-9D27-AA56C7259019" title="A full listing is presented of the Oracle XML&nbsp;DB-supplied XML schema XDBResource.xsd, which is used to represent Oracle XML&nbsp;DB resources.">XDBResource.xsd: XML Schema for Oracle XML&nbsp;DB Resources</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">Access to Oracle XML&nbsp;DB Repository Data</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5295"></a><div class="props_rev_3"><a id="GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5" name="GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5"></a><h4 id="ADXDB-GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5" class="sect4"><span class="enumeration_section">21.3.1 </span>Where Is Repository Data Stored?
                  </h4>
                  <div>
                     <p>Oracle XML&nbsp;DB stores Oracle XML&nbsp;DB Repository data in a set of tables and indexes to which you have access. </p>
                     <p>If you register an XML schema and request that the tables be generated by Oracle XML&nbsp;DB, then the tables are created in your database schema. You are then able to see or modify them. Other users cannot see your tables unless you grant them permission to do so.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-7B4BDF20-C0B4-448B-BB12-92158DDEB477">Names of Generated Tables</a><br>The names of generated tables are assigned by Oracle XML&nbsp;DB. They can be obtained by finding the <code class="codeph">xdb:defaultTable</code> attribute in your XML schema document (or in the default XML schema document).
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-26919CAE-E6D6-4F4C-8CE4-94E6EBD4B62B">How Object-Relational Storage Is Defined for Repository Resources</a><br>You can define object-relational storage for repository resources by subclassing or by storing data that conforms to a registered XML schema.
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-671B7B5E-1BC7-4F5D-8006-5C209113D9CF">Oracle ASM Virtual Folder</a><br>The contents of the Oracle Automatic Storage Management (Oracle ASM) virtual folder, <code class="codeph">/sys/asm</code> are Oracle ASM files and folders that are managed automatically by Oracle ASM.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML&nbsp;DB Repository resources conform to the Oracle XML&nbsp;DB XML schema XDBResource.xsd. The elements in a resource include those needed to persistently store WebDAV-defined properties, such as creation date, modification date, WebDAV locks, owner, ACL, language, and character set.">Oracle XML&nbsp;DB Repository Resources</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5296"></a><div class="props_rev_3"><a id="GUID-7B4BDF20-C0B4-448B-BB12-92158DDEB477" name="GUID-7B4BDF20-C0B4-448B-BB12-92158DDEB477"></a><h5 id="ADXDB-GUID-7B4BDF20-C0B4-448B-BB12-92158DDEB477" class="sect5"><span class="enumeration_section">21.3.1.1 </span>Names of Generated Tables 
                     </h5>
                     <div>
                        <p>The names of generated tables are assigned by Oracle XML&nbsp;DB. They can be obtained by finding the <code class="codeph">xdb:defaultTable</code> attribute in your XML schema document (or in the default XML schema document).
                        </p>
                        <p> When you register an XML schema, you can alternatively provide your own table name, instead of using the default name supplied by Oracle XML&nbsp;DB. If the table specifies binary XML storage, then a document is encoded in binary XML format before storing it in the table.</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="XML-Schema-and-query-object-relational-storage.html#GUID-54A3CBE8-19BE-43BB-8979-7769116B6F53" title="You can create default tables as part of XML schema registration. Default tables are most useful when documents are inserted using APIs and protocols such as FTP and HTTP(S), which do not provide any table specification.">Default Tables Created during XML Schema Registration</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5" title="Oracle XML&nbsp;DB stores Oracle XML&nbsp;DB Repository data in a set of tables and indexes to which you have access.">Where Is Repository Data Stored?</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5297"></a><div class="props_rev_3"><a id="GUID-26919CAE-E6D6-4F4C-8CE4-94E6EBD4B62B" name="GUID-26919CAE-E6D6-4F4C-8CE4-94E6EBD4B62B"></a><h5 id="ADXDB-GUID-26919CAE-E6D6-4F4C-8CE4-94E6EBD4B62B" class="sect5"><span class="enumeration_section">21.3.1.2 </span>How Object-Relational Storage Is Defined for Repository Resources
                     </h5>
                     <div>
                        <p>You can define object-relational storage for repository resources by subclassing or by storing data that conforms to a registered XML schema.</p>
                        <p>Applications that need to define object-relational storage for repository resources can do so in either of these ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Subclass the Oracle XML&nbsp;DB resource type. Subclassing Oracle XML&nbsp;DB resources requires privileges on the table <code class="codeph">XDB$RESOURCE</code>. 
                              </p>
                           </li>
                           <li>
                              <p>Store data that conforms to a visible, registered XML schema. </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="XML-Schema-and-query-basic.html#GUID-C09824C1-6B02-4556-A265-B1749DEE8DE1" title="XML Schema is a standard for describing the content and structure of XML documents. You can register, update, and delete an XML schema used with Oracle XML&nbsp;DB. You can define storage structures to use for your XML schema-based data and map XML Schema data types to SQL data types.">XML Schema Storage and Query: Basic</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5" title="Oracle XML&nbsp;DB stores Oracle XML&nbsp;DB Repository data in a set of tables and indexes to which you have access.">Where Is Repository Data Stored?</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5298"></a><div class="props_rev_3"><a id="GUID-671B7B5E-1BC7-4F5D-8006-5C209113D9CF" name="GUID-671B7B5E-1BC7-4F5D-8006-5C209113D9CF"></a><h5 id="ADXDB-GUID-671B7B5E-1BC7-4F5D-8006-5C209113D9CF" class="sect5"><span class="enumeration_section">21.3.1.3 </span>Oracle ASM Virtual Folder
                     </h5>
                     <div>
                        <p>The contents of the Oracle Automatic Storage Management (Oracle ASM) virtual folder, <code class="codeph">/sys/asm</code> are Oracle ASM files and folders that are managed automatically by Oracle ASM.
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="accessing-XML-DB-repository-data.html#GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56" title="Oracle Automatic Storage Management (Oracle ASM) organizes database files into disk groups for simplified management, database mirroring, and I/O balancing. Repository access extends to Oracle ASM files, in the virtual repository folder /sys/asm. This access is reserved for database administrators (DBAs). It is not intended for developers.">Access to Oracle ASM Files Using Protocols and Resource APIs &#x2013; For DBAs</a></li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-671B7B5E-1BC7-4F5D-8006-5C209113D9CF__GUID-A925CB1A-E635-4611-A6B9-F1A6B62AB85F">
                           <p class="notep1">See Also:</p>
                           <p><a href="../ostmg/asm-files-directories-templates.html#OSTMG-GUID-0305A38E-1DC3-4256-82D0-C2955D3B1D50" target="_blank"><span><cite>Oracle Automatic Storage Management Administrator's Guide</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5" title="Oracle XML&nbsp;DB stores Oracle XML&nbsp;DB Repository data in a set of tables and indexes to which you have access.">Where Is Repository Data Stored?</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4223"></a><div class="props_rev_3"><a id="GUID-40E826C1-DCDD-45B0-B960-C2020125A013" name="GUID-40E826C1-DCDD-45B0-B960-C2020125A013"></a><h4 id="ADXDB-GUID-40E826C1-DCDD-45B0-B960-C2020125A013" class="sect4"><span class="enumeration_section">21.3.2 </span>How Documents are Stored in Oracle XML&nbsp;DB Repository
                  </h4>
                  <div>
                     <p>When an XML document that is based on a registered XML schema is loaded into the repository, the document is parsed and decomposed according to the schema into a set of SQL objects; and a corresponding resource document is created to provide repository access for the source XML document.</p>
                     <p>Oracle XML&nbsp;DB provides special handling for XML documents. The rules for storing the contents of an XML Schema-based XML document are defined by its XML schema. The content of the document is stored in the default table associated with the global element definition.</p>
                     <p>Oracle XML&nbsp;DB Repository also stores files that do not contain XML data, such as JPEG images or Word documents. The XML schema for each resource defines which elements are allowed, and specifies whether the content of these files is to be stored as <code class="codeph">BLOB</code> or <code class="codeph">CLOB</code> instances. The content of a non-schema-based XML document is stored as a <code class="codeph">CLOB</code> instance in the repository.
                     </p>
                     <p>There is one resource and one link-properties document for each file or folder in the repository. If there are multiple access paths to a given document then there is a link-properties document for each possible link. Both the resource document and the link-properties are stored as XML documents. All these documents are stored in tables in the repository.</p>
                     <p>When an XML file is loaded into the repository, the following sequence of events takes place: </p>
                     <ol>
                        <li>
                           <p>Oracle XML&nbsp;DB examines the root element of the XML document to see if it is associated with a known (registered) XML schema. This involves looking to see if the document includes a namespace declaration for the <code class="codeph">XMLSchema-instance</code> namespace, and then looking for a <code class="codeph">schemaLocation</code> or <code class="codeph">noNamespaceSchemaLocation</code> attribute that identifies which XML schema the document is associated with.
                           </p>
                        </li>
                        <li>
                           <p>If the document is based on a known XML schema, then the metadata for the XML schema is loaded from the XML schema cache.</p>
                        </li>
                        <li>
                           <p>The XML document is parsed and decomposed into a set of SQL objects derived from the XML schema.</p>
                        </li>
                        <li>
                           <p>The SQL objects created from the XML file are stored in the default table defined when the XML schema was registered with the database.</p>
                        </li>
                        <li>
                           <p>A resource document is created for each document processed. This lets the content of the document be accessed using the repository. The resource document for an XML Schema-based <code class="codeph">XMLType</code> instance includes an <code class="codeph">XMLRef</code> element. This element contains a <code class="codeph">REF</code> of <code class="codeph">XMLType</code> that can be used to locate the row in the default table containing the content associated with the resource.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML&nbsp;DB Repository resources conform to the Oracle XML&nbsp;DB XML schema XDBResource.xsd. The elements in a resource include those needed to persistently store WebDAV-defined properties, such as creation date, modification date, WebDAV locks, owner, ACL, language, and character set.">Oracle XML&nbsp;DB Repository Resources</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4209"></a><div class="props_rev_3"><a id="GUID-B20A2200-477D-48DE-AFF9-5EF5DE8BF554" name="GUID-B20A2200-477D-48DE-AFF9-5EF5DE8BF554"></a><h4 id="ADXDB-GUID-B20A2200-477D-48DE-AFF9-5EF5DE8BF554" class="sect4"><span class="enumeration_section">21.3.3 </span>Repository Data Access Control
                  </h4>
                  <div>
                     <p>You can control access to the resources in Oracle XML&nbsp;DB Repository by using access control lists (ACLs), which are composed of access control entries (ACEs). An ACE grants or denies a set of privileges to a specific principal.</p>
                     <p>A principal can be a database user, a database role, an LDAP user, an LDAP group or the special principal <code class="codeph">DAV::owner</code>, which refers to the owner of the resource. Each resource in the repository is protected by an ACL. The ACL determines which privileges, such as <code class="codeph">read-properties</code> and <code class="codeph">update</code>, a user has on the resource. Each repository operation includes a check of the ACL to determine if the current user is allowed to perform the operation.
                     </p>
                     <p>By default, a new resource inherits the ACL of its parent folder. But you can set the ACL of a resource using PL/SQL procedure <code class="codeph">DBMS_XDB_REPOS.setACL</code>. For more details on Oracle XML&nbsp;DB resource security, see <a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a>. 
                     </p>
                     <p>In the following example, the current user is <code class="codeph">QUINE</code>. The query gives the number of resources in the folder <code class="codeph">/public</code>. Assume that there are only two resources in this folder: <code class="codeph">f1</code> and <code class="codeph">f2</code>. Also assume that the ACL on <code class="codeph">f1</code> grants the <code class="codeph">read-properties</code> privilege to <code class="codeph">QUINE</code> while the ACL on <code class="codeph">f2</code> does not grant <code class="codeph">QUINE</code> any privileges. A user needs the <code class="codeph">read-properties</code> privilege on a resource for it to be visible to the user. The result of the query is <code class="codeph">1</code>, because only <code class="codeph">f1</code> is visible to <code class="codeph">QUINE</code>.
                     </p><pre class="oac_no_warn" dir="ltr">SELECT count(*) FROM RESOURCE_VIEW r WHERE under_path(r.res, '/public') = 1;
 
COUNT(*)
--------
       1
</pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML&nbsp;DB Repository resources conform to the Oracle XML&nbsp;DB XML schema XDBResource.xsd. The elements in a resource include those needed to persistently store WebDAV-defined properties, such as creation date, modification date, WebDAV locks, owner, ACL, language, and character set.">Oracle XML&nbsp;DB Repository Resources</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5299"></a><div class="props_rev_3"><a id="GUID-B6979F05-B095-48A6-B78D-E20222138051" name="GUID-B6979F05-B095-48A6-B78D-E20222138051"></a><h4 id="ADXDB-GUID-B6979F05-B095-48A6-B78D-E20222138051" class="sect4"><span class="enumeration_section">21.3.4 </span>Repository Path-Name Resolution
                  </h4>
                  <div>
                     <p>The data relating a folder to its contents is managed by the Oracle XML&nbsp;DB hierarchical repository index. This provides a fast mechanism for evaluating path names which is similar to the directory mechanisms that are used by operating-system file systems. You need certain privileges to resolve a path name.</p>
                     <p>Resources that are folders have the <code class="codeph">Container</code> attribute of element <code class="codeph">Resource</code> set to <code class="codeph">true</code>.
                     </p>
                     <p>To resolve a resource name in a folder, the current user must have the following privileges:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">resolve</code> privilege on the folder
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">read-properties</code> on the resource in that folder
                           </p>
                        </li>
                     </ul>
                     <p>If the user does not have these privileges, then the user receives an <code class="codeph">access denied</code> error. Folder listings and other queries do not return a row when the <code class="codeph">read-properties</code> privilege is denied on its resource. 
                     </p>
                     <div class="infoboxnote" id="GUID-B6979F05-B095-48A6-B78D-E20222138051__GUID-A52D7021-F3C2-46D2-A2B5-0259BD44AC39">
                        <p class="notep1">Caution:</p>
                        <p>Error handling in path-name resolution differentiates between invalid resource names and resources that are not folders, for compatibility with file systems. Because Oracle XML&nbsp;DB resources are accessible from outside Oracle XML&nbsp;DB Repository (using SQL), denying read access on a folder that contains a resource does <span class="italic">not prevent</span> read access to that resource.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B6979F05-B095-48A6-B78D-E20222138051__GUID-FEADA446-C217-480F-95EF-9C61413986A5">
                        <p class="notep1">See Also:</p>
                        <p><a href="oracle-supplied-XML-schemas-and-examples.html#GUID-939CFC41-A851-40F3-9D27-AA56C7259019" title="A full listing is presented of the Oracle XML&nbsp;DB-supplied XML schema XDBResource.xsd, which is used to represent Oracle XML&nbsp;DB resources.">XDBResource.xsd: XML Schema for Oracle XML&nbsp;DB Resources</a> for the definition of element <code class="codeph">Resource</code> and its attribute <code class="codeph">Container</code></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML&nbsp;DB Repository resources conform to the Oracle XML&nbsp;DB XML schema XDBResource.xsd. The elements in a resource include those needed to persistently store WebDAV-defined properties, such as creation date, modification date, WebDAV locks, owner, ACL, language, and character set.">Oracle XML&nbsp;DB Repository Resources</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB2030"></a><div class="props_rev_3"><a id="GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" name="GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655"></a><h4 id="ADXDB-GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" class="sect4"><span class="enumeration_section">21.3.5 </span>Link Types
                  </h4>
                  <div>
                     <p>Links in Oracle XML&nbsp;DB can be repository links or document links. Repository links can be hard links or weak links. Document links can also be hard links or weak links, when their targets are repository resources. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-7692F7E3-8C53-4A2C-BB26-807B32D63176">Repository Links and Document Links</a><br>In addition to containing resources, a folder resource can contain links to other resources (files or folders). These repository links represent hierarchical repository relationships. By contrast, document links are arbitrary links among XML documents that are not necessarily repository resources.
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-72981E53-0B60-4096-80E0-06A139086DED">Hard Links and Weak Links</a><br>Links that target repository resources can be hard or weak. Hard and weak links have different dependencies with respect to the resources that they target. Hard links cannot target ancestor folders; weak links can. You can query the repository path view, <code class="codeph">PATH_VIEW</code>, to determine the type of a repository link.
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-80B23444-3A16-4D36-A225-12D8485F9373">Creating a Weak Link with No Knowledge of Folder Hierarchy</a><br>Weak links represent a mapping on top of the repository structure, which is determined by hard links. You can create a weak link to a resource using its OID rather than its path. You can use weak links to access a resource without having access to the folders containing it.
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-D96FB86C-DC05-4DAE-96B2-4E4307CB76C1">How and When to Prevent Multiple Hard Links</a><br>You can restrict the creation of hard links, disallowing multiple hard links to folders or files (or both). Allowing multiple hard links to file resources, but disallowing multiple hard links to folder resources, provides behavior that is similar to that for some file systems, including UNIX and Linux.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML&nbsp;DB Repository resources conform to the Oracle XML&nbsp;DB XML schema XDBResource.xsd. The elements in a resource include those needed to persistently store WebDAV-defined properties, such as creation date, modification date, WebDAV locks, owner, ACL, language, and character set.">Oracle XML&nbsp;DB Repository Resources</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5300"></a><div class="props_rev_3"><a id="GUID-7692F7E3-8C53-4A2C-BB26-807B32D63176" name="GUID-7692F7E3-8C53-4A2C-BB26-807B32D63176"></a><h5 id="ADXDB-GUID-7692F7E3-8C53-4A2C-BB26-807B32D63176" class="sect5"><span class="enumeration_section">21.3.5.1 </span>Repository Links and Document Links
                     </h5>
                     <div>
                        <p>In addition to containing resources, a folder resource can contain links to other resources (files or folders). These repository links represent hierarchical repository relationships. By contrast, document links are arbitrary links among XML documents that are not necessarily repository resources.</p>
                        <p><strong class="term">Repository links</strong> are sometimes called <strong class="term">folder links</strong>. They are not to be confused with <strong class="term">document links</strong>, which correspond to the links provided by the XLink and XInclude standards, and which are also supported by Oracle XML&nbsp;DB (but XLink support is <span class="italic">deprecated</span>). Repository links are navigational, folder&#x2013;child links among repository resources. Document links are arbitrary links among documents that are not necessarily repository resources.
                        </p>
                        <p>Repository links represent repository hierarchical relationships. Document links represent arbitrary relationships whose semantics derives from the applications that use them. Because they represent repository hierarchical relationships, repository links can be navigated using file system-related protocols. This is not true of document links. Because document links can represent arbitrary relationships, they can also represent repository relationships. When document links thus target resources, they can also be hard or weak.</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-7692F7E3-8C53-4A2C-BB26-807B32D63176__GUID-2593B60C-57AC-497E-9AC7-7C3B80C309B2">
                           <p class="notep1">See Also:</p>
                           <p><a href="use-of-XLink-and-XInclude-with-XML-DB.html#GUID-5731BA64-7DEB-44A2-925E-D07014372B66" title="You can use XLink and XInclude with resources in Oracle XML&nbsp;DB Repository. But the use of XLink is deprecated.">Use of XLink and XInclude with Oracle XML&nbsp;DB</a> for information about document links
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" title="Links in Oracle XML&nbsp;DB can be repository links or document links. Repository links can be hard links or weak links. Document links can also be hard links or weak links, when their targets are repository resources.">Link Types</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5302"></a><a id="ADXDB5301"></a><div class="props_rev_3"><a id="GUID-72981E53-0B60-4096-80E0-06A139086DED" name="GUID-72981E53-0B60-4096-80E0-06A139086DED"></a><h5 id="ADXDB-GUID-72981E53-0B60-4096-80E0-06A139086DED" class="sect5"><span class="enumeration_section">21.3.5.2 </span>Hard Links and Weak Links
                     </h5>
                     <div>
                        <p>Links that target repository resources can be hard or weak. Hard and weak links have different dependencies with respect to the resources that they target. Hard links cannot target ancestor folders; weak links can. You can query the repository path view, <code class="codeph">PATH_VIEW</code>, to determine the type of a repository link.
                        </p>
                        <p>Both <strong class="term">hard links</strong> and <strong class="term">weak links</strong> are references, or pointers, to physical data — (internal) repository resource identifiers. They do not point to symbolic names or paths to other links. Their targets are resolved at the time of link creation. Because they point directly to resource identifiers, hard and weak links cannot dangle: they remain valid even when their targets are renamed or moved. You need the same privileges to create or delete hard and weak links.
                        </p>
                        <p>The difference between hard and weak links lies in their relationship to target resource deletion. A target resource is dependent on its hard links, in the sense that it cannot be deleted as long as it remains the target of a hard link. Deletion of a hard link also deletes the <a id="d108756e1987" class="indexterm-anchor"></a>resource targeted by the link, if the following are both true:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The resource is not versioned.</p>
                           </li>
                           <li>
                              <p>The hard link that was deleted was the last (that is, the only) hard link to the resource.</p>
                           </li>
                        </ul>
                        <p>A weak link has no such hold on a resource: you can delete a resource, even if it is the target of a weak link (as long as it is not the target of a hard link). Because of this, weak links can be used as shortcuts to frequently accessed resources, without impacting deletion of those resources.</p>
                        <p>There is a dependency in the other direction, however: If you delete a resource that is the target of one or more weak links, then those links are automatically deleted, as well. In this sense, too, weak links cannot dangle. Both hard and weak links provide referential integrity: if a link exists, then so does its target.</p>
                        <p>Another difference between hard and weak links is this: Hard links to ancestor folders are not permitted, because they introduce cycles. There is no such restriction for weak links: a weak link can target any folder, possibly creating a cycle. It is the set of hard links that define the (acyclic) structure of Oracle XML&nbsp;DB Repository. Weak links represent an additional mapping on top of that basic structure.</p>
                        <p>You can query the repository path view, <code class="codeph">PATH_VIEW</code>, to determine the type of a repository link: the link information contains the link type. <code class="codeph">XMLType</code> column <code class="codeph">LINK</code> of <code class="codeph">PATH_VIEW</code> contains this information in element <code class="codeph">LinkType</code>, which is a child of the root element, <code class="codeph">LINK</code>. <a href="accessing-XML-DB-repository-data.html#GUID-72981E53-0B60-4096-80E0-06A139086DED__BABHBGFG">Example 21-1</a> illustrates this. You can also determine the type of a repository link by using the <code class="codeph">getLink()</code> callback function on an event handler (<code class="codeph">LinkIn</code>, <code class="codeph">LinkTo</code>, <code class="codeph">UnlinkIn</code>, or <code class="codeph">UnlinkFrom</code>). 
                        </p>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-72981E53-0B60-4096-80E0-06A139086DED__GUID-B78C7485-CF76-470D-970F-079D16D904C2">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_XEVENT.html#ARPLS69526" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information on PL/SQL function <code class="codeph">getLink</code></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-72981E53-0B60-4096-80E0-06A139086DED__BABHBGFG">
                           <p class="titleinexample">Example 21-1 Querying PATH_VIEW to Determine Link Type</p><pre class="pre codeblock"><code>SELECT RESID, XMLCast(XMLQuery('<span class="bold">/LINK/LinkType</span>' PASSING <span class="bold">LINK</span> RETURNING CONTENT)
                      AS VARCHAR2(24)) link_type
  FROM PATH_VIEW WHERE equals_path(RES, '/home/QUINE/purchaseOrder.xml') = 1;

RESID                              LINK_TYPE
--------------------------------   ---------
DF9856CF2FE0829EE030578CCE0639C5   <span class="bold">Weak</span></code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F" title="Examples here illustrate how to delete Oracle XML&nbsp;DB Repository resources and paths.">Deleting Repository Resources: Examples</a></li>
                              <li><a href="accessing-XML-DB-repository-data.html#GUID-00093774-B340-4178-9E9C-080EC8592098" title="PL/SQL package DBMS_XDB_REPOS provides subprograms that act on Oracle XML&nbsp;DB Repository resources. This API is based on the public views RESOURCE_VIEW and PATH_VIEW, which enable SQL access to repository data through protocols such as FTP and HTTP(S)/WebDAV.">Query-Based Access to Repository Resources</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" title="Links in Oracle XML&nbsp;DB can be repository links or document links. Repository links can be hard links or weak links. Document links can also be hard links or weak links, when their targets are repository resources.">Link Types</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5304"></a><a id="ADXDB5305"></a><a id="ADXDB5303"></a><div class="props_rev_3"><a id="GUID-80B23444-3A16-4D36-A225-12D8485F9373" name="GUID-80B23444-3A16-4D36-A225-12D8485F9373"></a><h5 id="ADXDB-GUID-80B23444-3A16-4D36-A225-12D8485F9373" class="sect5"><span class="enumeration_section">21.3.5.3 </span>Creating a Weak Link with No Knowledge of Folder Hierarchy
                     </h5>
                     <div>
                        <p>Weak links represent a mapping on top of the repository structure, which is determined by hard links. You can create a weak link to a resource using its OID rather than its path. You can use weak links to access a resource without having access to the folders containing it.</p>
                        <div class="section">
                           <p>Suppose that you want to read a file resource that belongs to one of your colleagues. You cannot create a hard link to that resource, to make it accessible for your use, unless you have the privilege <code class="codeph">&lt;xdb:resolve&gt;</code> on <span class="italic">all</span> of the ancestor folders of that file. Having that privilege would mean that you could see all of your colleague's folder names and the structure of the hierarchy down to the target resource. 
                           </p>
                           <p>However, because weak links essentially represent a mapping on top of the real repository structure, which structure is determined by the set of hard links, you can create a weak link to a resource using just its OID rather than its full, named path (URL). Your colleague can determine the OID path to the file, send you that instead of the named path, and you can create a weak link to the document using that OID path. <a href="accessing-XML-DB-repository-data.html#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABEHAED">Example 21-2</a> and <a href="accessing-XML-DB-repository-data.html#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABFFEED">Example 21-3</a> illustrate this.
                           </p>
                           <p><a href="accessing-XML-DB-repository-data.html#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABEHAED">Example 21-2</a> prints the OID path for the file resource <code class="codeph">/home/QUINE/purchaseOrder.xml</code>. User <code class="codeph">quine</code> can use this to obtain the OID path to the resource, and then send that path to user <code class="codeph">curry</code>, who can create a weak link to the resource (<a href="accessing-XML-DB-repository-data.html#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABFFEED">Example 21-3</a>).
                           </p>
                           <p>In <a href="accessing-XML-DB-repository-data.html#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABFFEED">Example 21-3</a>, user <code class="codeph">curry</code> creates a weak link named <code class="codeph">quinePurchaseOrder.xml</code> in folder <code class="codeph">/home/CURRY</code>. The target of the link is the OID path that corresponds to the URL <code class="codeph">/home/QUINE/purchaseOrder.xml</code>. User <code class="codeph">curry</code> need not be aware of the repository structure that is visible to user <code class="codeph">quine</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABEHAED">
                           <p class="titleinexample">Example 21-2 Obtaining the OID Path of a Resource</p><pre class="pre codeblock"><code>DECLARE
  resoid  RAW(16);
  oidpath VARCHAR2(100);
BEGIN
  SELECT RESID INTO resoid FROM RESOURCE_VIEW
    WHERE equals_path(RES, '/home/QUINE/purchaseOrder.xml') = 1;
    oidpath := DBMS_XDB_REPOS.<span class="bold">createOIDPath</span>(resoid);
  DBMS_OUTPUT.put_line(oidpath);
END;
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABFFEED">
                           <p class="titleinexample">Example 21-3 Creating a Weak Link Using an OID Path</p><pre class="pre codeblock"><code>CALL DBMS_XDB_REPOS.link(<span class="bold">/sys/oid/1BDCB46477B59C20E040578CCE0623D3</span>
                         '/home/CURRY', 'quinePurchaseOrder.xml',
                         DBMS_XDB_REPOS.LINK_TYPE_WEAK);</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" title="Links in Oracle XML&nbsp;DB can be repository links or document links. Repository links can be hard links or weak links. Document links can also be hard links or weak links, when their targets are repository resources.">Link Types</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5306"></a><div class="props_rev_3"><a id="GUID-D96FB86C-DC05-4DAE-96B2-4E4307CB76C1" name="GUID-D96FB86C-DC05-4DAE-96B2-4E4307CB76C1"></a><h5 id="ADXDB-GUID-D96FB86C-DC05-4DAE-96B2-4E4307CB76C1" class="sect5"><span class="enumeration_section">21.3.5.4 </span>How and When to Prevent Multiple Hard Links
                     </h5>
                     <div>
                        <p>You can restrict the creation of hard links, disallowing multiple hard links to folders or files (or both). Allowing multiple hard links to file resources, but disallowing multiple hard links to folder resources, provides behavior that is similar to that for some file systems, including UNIX and Linux.</p>
                        <p>This can simplify application design, by, in effect, ensuring that each file resource has a unique, canonical hard-link path to it. In addition, preventing multiple hard links to a resource can lead to query performance improvements.</p>
                        <p>You can configure the prevention of multiple hard links using the following Boolean parameters in configuration file <code class="codeph">xdbconfig.xml</code>. The default value of each parameter is <code class="codeph">true</code>, meaning that multiple hard links can be created.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">folder-hard-links</code> &#x2013; Prevent the creation of multiple hard links to a folder resource, if <code class="codeph">false</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">non-folder-hard-links</code> &#x2013; Prevent the creation of multiple hard links to a file resource, if <code class="codeph">false</code>.
                              </p>
                           </li>
                        </ul>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="administration-of-XML-DB.html#GUID-D1551B64-4A75-44CD-AA04-0A68018410AE" title="Oracle XML&nbsp;DB is managed internally through a configuration file, xdbconfig.xml, which is stored as a resource in Oracle XML&nbsp;DB Repository. As an alternative to using Oracle Enterprise Manager to configure Oracle XML&nbsp;DB, you can configure it directly using the Oracle XML&nbsp;DB configuration file.">Configuration of Oracle XML&nbsp;DB Using xdbconfig.xml</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" title="Links in Oracle XML&nbsp;DB can be repository links or document links. Repository links can be hard links or weak links. Document links can also be hard links or weak links, when their targets are repository resources.">Link Types</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB5308"></a><a id="ADXDB5309"></a><a id="ADXDB4183"></a><a id="ADXDB5307"></a><div class="props_rev_3"><a id="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6" name="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6"></a><h3 id="ADXDB-GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6" class="sect3"><span class="enumeration_section">21.4 </span>Navigational or Path Access to Repository Resources
               </h3>
               <div>
                  <p>Oracle XML&nbsp;DB Repository folders support the same protocol standards used by many operating systems. This lets a repository folder act like a native folder (directory) in supported operating-system environments. </p>
                  <p>For example:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You can use Windows Explorer to open and access repository files and folders (resources) the same way you access other files and folders in the file system, as shown in <a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__I1045917">Figure 21-2</a>. 
                        </p>
                     </li>
                     <li>
                        <p>You can access repository data using HTTP(S)/WebDAV from a Web browser, as shown in <a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__I1045938">Figure 21-3</a> and <a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__CEGICACC">Figure 21-4</a>. 
                        </p>
                        <p><a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__I1045938">Figure 21-3</a> shows a browser visiting URL <code class="codeph">http://xdbdemo:8080/</code>. The server it is connected to is <code class="codeph">xdbdemo</code>, and its HTTP port number is <code class="codeph">8080</code>. 
                        </p>
                        <p><a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__CEGICACC">Figure 21-4</a> shows a browser using HTTP to visit an XML document (an XSL stylesheet) stored in the database. The URL is <code class="codeph">http://localhost:8080/home/SCOTT/poSource/xsl/purchaseOrder.xsl</code>.
                        </p>
                     </li>
                  </ul>
                  <div class="figure" id="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__I1045917">
                     <p class="titleinfigure">Figure 21-2 Oracle XML&nbsp;DB Folders in Windows Explorer</p><img src="img/po_folders.jpg" width="515" alt="Description of Figure 21-2 follows" title="Description of Figure 21-2 follows" longdesc="img_text/po_folders.html"><br><a href="img_text/po_folders.html">Description of "Figure 21-2 Oracle XML&nbsp;DB Folders in Windows Explorer"</a></div>
                  <!-- class="figure" -->
                  <div class="figure" id="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__I1045938">
                     <p class="titleinfigure">Figure 21-3 Accessing Repository Data Using HTTP(S)/WebDAV and a Web Browser</p><img src="img/adxdb_vm_058.png" width="502" alt="Description of Figure 21-3 follows" title="Description of Figure 21-3 follows" longdesc="img_text/adxdb_vm_058.html"><br><a href="img_text/adxdb_vm_058.html">Description of "Figure 21-3 Accessing Repository Data Using HTTP(S)/WebDAV and a Web Browser"</a></div>
                  <!-- class="figure" -->
                  <div class="figure" id="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__CEGICACC">
                     <p class="titleinfigure">Figure 21-4 Path-Based Access Using HTTP and a URL</p><img src="img/path_based.gif" width="446" alt="Description of Figure 21-4 follows" title="Description of Figure 21-4 follows" longdesc="img_text/path_based.html"><br><a href="img_text/path_based.html">Description of "Figure 21-4 Path-Based Access Using HTTP and a URL"</a></div>
                  <!-- class="figure" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926">Access to Oracle XML&nbsp;DB Resources Using Internet Protocols</a><br>Oracle Net Services provides one way of accessing database resources. Oracle XML&nbsp;DB support for Internet protocols provides another way of accessing database resources. 
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56">Access to Oracle ASM Files Using Protocols and Resource APIs &#x2013; For DBAs</a><br>Oracle Automatic Storage Management (Oracle ASM) organizes database files into <span class="italic">disk groups</span> for simplified management, database mirroring, and I/O balancing. Repository access extends to Oracle ASM files, in the <span class="italic">virtual</span> repository folder <code class="codeph">/sys/asm</code>. This access is reserved for database administrators (DBAs). It is <span class="italic">not</span> intended for developers. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">Access to Oracle XML&nbsp;DB Repository Data</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5310"></a><div class="props_rev_3"><a id="GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" name="GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926"></a><h4 id="ADXDB-GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" class="sect4"><span class="enumeration_section">21.4.1 </span>Access to Oracle XML&nbsp;DB Resources Using Internet Protocols
                  </h4>
                  <div>
                     <p>Oracle Net Services provides one way of accessing database resources. Oracle XML&nbsp;DB support for Internet protocols provides another way of accessing database resources. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-BAD95E12-1D8F-4456-BCC7-CC72685BAD2E">Where You Can Use Oracle XML&nbsp;DB Protocol Access</a><br>Oracle Net Services is optimized for record-oriented data. Internet protocols are designed for stream-oriented data, such as binary files or XML text documents. Oracle XML&nbsp;DB protocol access is a valuable alternative to Net Services in certain scenarios.
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-1BEEFCCD-0283-4D61-961A-1B050296F128">Overview of Protocol Access to Oracle XML&nbsp;DB</a><br>Protocol access to Oracle XML&nbsp;DB involves connecting, authenticating a user, parsing the request, and perhaps invoking a Java servlet.
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-CB8BB43E-B2F2-4D64-A632-F410BC071C79">Retrieval of Oracle XML&nbsp;DB Resources</a><br>When a protocol indicates that a resource is to be retrieved, the path name to the resource is resolved and the resource is fetched, by streaming it as either XML data or in <code class="codeph">RAW</code> form.
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-421C24B7-EC44-49E6-BCE9-A6803D521623">Storage of Oracle XML&nbsp;DB Resources</a><br>When a protocol indicates that a resource that is an XML document is to be stored, its associated XML schema, if any, is consulted to determine the default table in which to store the document.
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-18142142-B1B1-4A5F-8F63-59C5FA3E7D74">Internet Protocols and XMLType: XMLType Direct Stream Write</a><br>Oracle XML&nbsp;DB supports Internet protocols at the <code class="codeph">XMLType</code> level by using Java <code class="codeph">XMLType</code> method <code class="codeph">writeToStream()</code>. This method is implemented natively and writes <code class="codeph">XMLType</code> data directly to the protocol request stream. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6" title="Oracle XML&nbsp;DB Repository folders support the same protocol standards used by many operating systems. This lets a repository folder act like a native folder (directory) in supported operating-system environments.">Navigational or Path Access to Repository Resources</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5311"></a><div class="props_rev_3"><a id="GUID-BAD95E12-1D8F-4456-BCC7-CC72685BAD2E" name="GUID-BAD95E12-1D8F-4456-BCC7-CC72685BAD2E"></a><h5 id="ADXDB-GUID-BAD95E12-1D8F-4456-BCC7-CC72685BAD2E" class="sect5"><span class="enumeration_section">21.4.1.1 </span>Where You Can Use Oracle XML&nbsp;DB Protocol Access
                     </h5>
                     <div>
                        <p>Oracle Net Services is optimized for record-oriented data. Internet protocols are designed for stream-oriented data, such as binary files or XML text documents. Oracle XML&nbsp;DB protocol access is a valuable alternative to Net Services in certain scenarios.</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Direct database access from file-oriented applications using the database like a file system </p>
                           </li>
                           <li>
                              <p>Heterogeneous application server environments that require a uniform data access method (such as XML over HTTP, which is supported by most data servers, including MS SQL Server, Exchange, Notes, many XML databases, stock quote services and news feeds) </p>
                           </li>
                           <li>
                              <p>Application server environments that require data in the form of XML text</p>
                           </li>
                           <li>
                              <p>Web applications that use client-side XSL to format datagrams that do not need much application processing</p>
                           </li>
                           <li>
                              <p>Web applications that use Java servlets that run inside the database</p>
                           </li>
                           <li>
                              <p>Web access to XML-oriented stored procedures</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" title="Oracle Net Services provides one way of accessing database resources. Oracle XML&nbsp;DB support for Internet protocols provides another way of accessing database resources.">Access to Oracle XML&nbsp;DB Resources Using Internet Protocols</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5312"></a><div class="props_rev_3"><a id="GUID-1BEEFCCD-0283-4D61-961A-1B050296F128" name="GUID-1BEEFCCD-0283-4D61-961A-1B050296F128"></a><h5 id="ADXDB-GUID-1BEEFCCD-0283-4D61-961A-1B050296F128" class="sect5"><span class="enumeration_section">21.4.1.2 </span>Overview of Protocol Access to Oracle XML&nbsp;DB
                     </h5>
                     <div>
                        <p>Protocol access to Oracle XML&nbsp;DB involves connecting, authenticating a user, parsing the request, and perhaps invoking a Java servlet.</p>
                        <p>Accessing Oracle XML&nbsp;DB using a protocol proceeds as follows:</p>
                        <ol>
                           <li>
                              <p>A connection object is established, and the protocol might read part of the request. </p>
                           </li>
                           <li>
                              <p>The protocol decides whether the user is already authenticated and wants to reuse an existing session or the connection must be re-authenticated (the latter is more common). </p>
                           </li>
                           <li>
                              <p>An existing session is pulled from the session pool, or else a new one is created. </p>
                           </li>
                           <li>
                              <p>If authentication has not been provided, and the request is HTTP <code class="codeph">get</code> or <code class="codeph">head</code>, then the session is run as the <code class="codeph">ANONYMOUS</code> user. If the session has already been authenticated as the <code class="codeph">ANONYMOUS</code> user, then there is no cost to reuse the existing session. If authentication has been provided, then the database re-authentication routines are used to authenticate the connection. 
                              </p>
                           </li>
                           <li>
                              <p>The request is parsed. </p>
                           </li>
                           <li>
                              <p> (HTTP only) If the requested path name maps to a servlet, then the servlet is invoked using Java Virtual Machine (JVM). The servlet code writes the response to a response stream or asks <code class="codeph">XMLType</code> instances to do so. 
                              </p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" title="Oracle Net Services provides one way of accessing database resources. Oracle XML&nbsp;DB support for Internet protocols provides another way of accessing database resources.">Access to Oracle XML&nbsp;DB Resources Using Internet Protocols</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5313"></a><div class="props_rev_3"><a id="GUID-CB8BB43E-B2F2-4D64-A632-F410BC071C79" name="GUID-CB8BB43E-B2F2-4D64-A632-F410BC071C79"></a><h5 id="ADXDB-GUID-CB8BB43E-B2F2-4D64-A632-F410BC071C79" class="sect5"><span class="enumeration_section">21.4.1.3 </span>Retrieval of Oracle XML&nbsp;DB Resources
                     </h5>
                     <div>
                        <p>When a protocol indicates that a resource is to be retrieved, the path name to the resource is resolved and the resource is fetched, by streaming it as either XML data or in <code class="codeph">RAW</code> form.
                        </p>
                        <p>Resources being fetched are streamed as XML data, except for those containing element <code class="codeph">XDBBinary</code>, which is the XML binary data type, which have their contents streamed out in <code class="codeph">RAW</code> form. 
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" title="Oracle Net Services provides one way of accessing database resources. Oracle XML&nbsp;DB support for Internet protocols provides another way of accessing database resources.">Access to Oracle XML&nbsp;DB Resources Using Internet Protocols</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5314"></a><div class="props_rev_3"><a id="GUID-421C24B7-EC44-49E6-BCE9-A6803D521623" name="GUID-421C24B7-EC44-49E6-BCE9-A6803D521623"></a><h5 id="ADXDB-GUID-421C24B7-EC44-49E6-BCE9-A6803D521623" class="sect5"><span class="enumeration_section">21.4.1.4 </span>Storage of Oracle XML&nbsp;DB Resources
                     </h5>
                     <div>
                        <p>When a protocol indicates that a resource that is an XML document is to be stored, its associated XML schema, if any, is consulted to determine the default table in which to store the document.</p>
                        <p>Oracle XML&nbsp;DB checks the document file name extension for <code class="codeph">.xml</code>, <code class="codeph">.xsl</code>, <code class="codeph">.xsd</code>, and so on. If the document is XML then a pre-parse step is done, whereby enough of the resource is read to determine the XML <code class="codeph">schemaLocation</code> and <code class="codeph">namespace</code> of the root element in the document. If a registered schema is located at the <code class="codeph">schemaLocation</code> URL, and it has a definition for the root element of the current document, then the default table specified for that root element is used to store the contents of the resource. 
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" title="Oracle Net Services provides one way of accessing database resources. Oracle XML&nbsp;DB support for Internet protocols provides another way of accessing database resources.">Access to Oracle XML&nbsp;DB Resources Using Internet Protocols</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5315"></a><div class="props_rev_3"><a id="GUID-18142142-B1B1-4A5F-8F63-59C5FA3E7D74" name="GUID-18142142-B1B1-4A5F-8F63-59C5FA3E7D74"></a><h5 id="ADXDB-GUID-18142142-B1B1-4A5F-8F63-59C5FA3E7D74" class="sect5"><span class="enumeration_section">21.4.1.5 </span>Internet Protocols and XMLType: XMLType Direct Stream Write
                     </h5>
                     <div>
                        <p>Oracle XML&nbsp;DB supports Internet protocols at the <code class="codeph">XMLType</code> level by using Java <code class="codeph">XMLType</code> method <code class="codeph">writeToStream()</code>. This method is implemented natively and writes <code class="codeph">XMLType</code> data directly to the protocol request stream. 
                        </p>
                        <p>This avoids Java VM execution costs and the overhead of converting database data through Java data types and creating Java objects, resulting in significantly higher performance. Performance is further enhanced if the Java code deals only with XML element trees that are close to the root, and does not traverse too many of the leaf elements, so that relatively few Java objects are created. </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="repository-access-using-protocols.html#GUID-0476309D-E3DF-4C56-BF21-68CD04D00C98" title="You can access Oracle XML&nbsp;DB Repository data using protocols FTP and HTTP(S)/WebDAV.">Repository Access Using Protocols</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" title="Oracle Net Services provides one way of accessing database resources. Oracle XML&nbsp;DB support for Internet protocols provides another way of accessing database resources.">Access to Oracle XML&nbsp;DB Resources Using Internet Protocols</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB5317"></a><a id="ADXDB5316"></a><div class="props_rev_3"><a id="GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56" name="GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56"></a><h4 id="ADXDB-GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56" class="sect4"><span class="enumeration_section">21.4.2 </span>Access to Oracle ASM Files Using Protocols and Resource APIs &#x2013; For DBAs
                  </h4>
                  <div>
                     <p>Oracle Automatic Storage Management (Oracle ASM) organizes database files into <span class="italic">disk groups</span> for simplified management, database mirroring, and I/O balancing. Repository access extends to Oracle ASM files, in the <span class="italic">virtual</span> repository folder <code class="codeph">/sys/asm</code>. This access is reserved for database administrators (DBAs). It is <span class="italic">not</span> intended for developers. 
                     </p>
                     <p>A typical use of such access is to copy Oracle ASM files from one database instance to another. For example, a DBA can view folder <code class="codeph">/sys/asm</code> in a graphical user interface using the WebDAV protocol, and then drag-and-drop a copy of a data-pump dump set from an Oracle ASM disk group to an operating-system file system.
                     </p>
                     <p>Virtual folder <code class="codeph">/sys/asm</code> is created by default during Oracle XML&nbsp;DB installation. If the database is not configured to use Oracle ASM, the folder is empty and no operations are permitted on it. 
                     </p>
                     <p>Folder <code class="codeph">/sys/asm</code> contains folders and subfolders that follow the hierarchy defined by the structure of an Oracle ASM <span class="italic">fully qualified filename</span>:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>It contains a subfolder for each mounted <span class="italic">disk group</span>.
                           </p>
                        </li>
                        <li>
                           <p>A disk-group folder contains a subfolder for each <span class="italic">database</span> that uses that disk group. In addition, a disk-group folder may contain files and folders corresponding to Oracle ASM <span class="italic">aliases</span> created by the administrator.
                           </p>
                        </li>
                        <li>
                           <p>A database folder contains file-type folders.</p>
                        </li>
                        <li>
                           <p>A file-type folder contains Oracle ASM files, which are binary.</p>
                        </li>
                     </ul>
                     <p>This hierarchy is shown in <a href="accessing-XML-DB-repository-data.html#GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56__BABIGDBA">Figure 21-5</a>, which omits directories created for aliases, for simplicity.
                     </p>
                     <div class="figure" id="GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56__BABIGDBA">
                        <p class="titleinfigure">Figure 21-5 Oracle ASM Virtual Folder Hierarchy</p><img src="img/admin075.gif" width="592" alt="Description of Figure 21-5 follows" title="Description of Figure 21-5 follows" longdesc="img_text/admin075.html"><br><a href="img_text/admin075.html">Description of "Figure 21-5 Oracle ASM Virtual Folder Hierarchy"</a></div>
                     <!-- class="figure" -->
                     <p>The following usage restrictions apply to virtual folder <code class="codeph">/sys/asm</code>. You <span class="italic">cannot</span>:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic">query</span> <code class="codeph">/sys/asm</code> using SQL
                           </p>
                        </li>
                        <li>
                           <p>put regular files under <code class="codeph">/sys/asm</code> (you can put only Oracle ASM files there)
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">move</span> (rename) an Oracle ASM file to a different Oracle ASM disk group or to a folder outside Oracle ASM
                           </p>
                        </li>
                        <li>
                           <p>create <span class="italic">hard links</span> to existing Oracle ASM files or directories
                           </p>
                        </li>
                     </ul>
                     <p>In addition:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You must have the privileges of role <code class="codeph">DBA</code> to view folder <code class="codeph">/sys/asm</code>.
                           </p>
                        </li>
                        <li>
                           <p>To access <code class="codeph">/sys/asm</code> using Oracle XML&nbsp;DB protocols, you must log in as a user other than <code class="codeph">SYS</code>.
                           </p>
                        </li>
                     </ul>
                     <p>Again, Oracle ASM virtual-folder operations are intended only for <span class="italic">database administrators</span>, not developers.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56__GUID-323094DE-A48F-43E9-8AF8-6604E330148E">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="repository-access-using-protocols.html#GUID-8A69CB6C-5136-4ACD-8291-2EAE667CC19D" title="Oracle Automatic Storage Management (Oracle ASM) organizes database files into disk groups for simplified management and added benefits such as database mirroring and I/O balancing. You can use protocols and resource APIs to access Oracle ASM files in repository virtual folder /sys/asm. All files in /sys/asm are binary.">Using FTP with Oracle ASM Files</a> for an example of using protocol FTP with <code class="codeph">/sys/asm</code></p>
                           </li>
                           <li>
                              <p><a href="../ostmg/about-asmcmd.html#OSTMG-GUID-117FE071-9ECE-40BC-8FFA-5D7AB12ADCDD" target="_blank"><span><cite>Oracle Automatic Storage Management Administrator's Guide</cite></span></a> for information about the syntax of a fully qualified Oracle ASM filename and details on the virtual folder structure
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6" title="Oracle XML&nbsp;DB Repository folders support the same protocol standards used by many operating systems. This lets a repository folder act like a native folder (directory) in supported operating-system environments.">Navigational or Path Access to Repository Resources</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5319"></a><a id="ADXDB5318"></a><div class="props_rev_3"><a id="GUID-00093774-B340-4178-9E9C-080EC8592098" name="GUID-00093774-B340-4178-9E9C-080EC8592098"></a><h3 id="ADXDB-GUID-00093774-B340-4178-9E9C-080EC8592098" class="sect3"><span class="enumeration_section">21.5 </span>Query-Based Access to Repository Resources
               </h3>
               <div>
                  <p>PL/SQL package <code class="codeph">DBMS_XDB_REPOS</code> provides subprograms that act on Oracle XML&nbsp;DB Repository resources. This API is based on the public views <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code>, which enable SQL access to repository data through protocols such as FTP and HTTP(S)/WebDAV.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">PATH_VIEW</code> &#x2013; Has one row for each unique repository path
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">RESOURCE_VIEW</code> &#x2013; Has one row for each resource
                        </p>
                     </li>
                  </ul>
                  <p>Through these views, you can access and update both the metadata and the content of documents stored in the repository. Operations on the views use underlying repository tables such as <code class="codeph">XDB$RESOURCE</code>.
                  </p>
                  <p>Each view contains virtual column <code class="codeph">RES</code>. You use column <code class="codeph">RES</code> to access and update resource documents using SQL statements that accept a repository path notation. 
                  </p>
                  <p>View <code class="codeph">RESOURCE_VIEW</code> contains column <code class="codeph">ANY_PATH</code>. Column <code class="codeph">ANY_PATH</code> contains a valid URL that the current user can pass to PL/SQL constructor <code class="codeph">XDBURIType</code> to access the resource content. If this content is not binary data, then the resource itself also contains the content.
                  </p>
                  <p><a href="accessing-XML-DB-repository-data.html#GUID-00093774-B340-4178-9E9C-080EC8592098__G1046678" title="This table describes differences between RESOURCE_VIEW and PATH_VIEW. It has three rows and two columns.">Table 21-2</a> summarizes the differences between the views.
                  </p>
                  <div class="tblformal" id="GUID-00093774-B340-4178-9E9C-080EC8592098__G1046678">
                     <p class="titleintable">Table 21-2 Differences Between PATH_VIEW and RESOURCE_VIEW</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Differences Between PATH_VIEW and RESOURCE_VIEW" summary="This table describes differences between RESOURCE_VIEW and PATH_VIEW. It has three rows and two columns." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="52%" id="d108756e3076">PATH_VIEW</th>
                              <th align="left" valign="bottom" width="48%" id="d108756e3079">RESOURCE_VIEW</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d108756e3084" headers="d108756e3076 ">
                                 <p>Contains link properties</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d108756e3084 d108756e3079 ">
                                 <p>No link properties</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d108756e3091" headers="d108756e3076 ">
                                 <p>Has one row for each unique <span class="italic">path</span> in repository
                                 </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d108756e3091 d108756e3079 ">
                                 <p>Has one row for each <span class="italic">resource</span> in repository
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>Rows in these views are of data type <code class="codeph">XMLType</code>. In the <code class="codeph">RESOURCE_VIEW</code>, the single path associated with a resource is arbitrarily chosen from among the possible paths that refer to the resource. Oracle XML&nbsp;DB provides SQL functions, such as <code class="codeph">under_path</code>, that let applications search for the resources contained within a particular folder (recursively), obtain the resource depth, and so on. 
                  </p>
                  <p>DML code can be used on the repository views to insert, rename, delete, and update resource properties and contents. Programmatic APIs must be used for other operations, such as creating links to existing resources. </p>
                  <p>Oracle XML&nbsp;DB supports the concept of <strong class="term">linking</strong>. Linking makes it possible to define multiple paths to a given document. A separate XML document, called the <strong class="term">link-properties document</strong>, maintains metadata properties that are specific to the path, rather than to the resource. Whenever a resource is created, an initial link is also created.
                  </p>
                  <p><code class="codeph">PATH_VIEW</code> exposes the link-properties documents. There is one entry in <code class="codeph">PATH_VIEW</code> for each possible path to a document. Column <code class="codeph">RES</code> of <code class="codeph">PATH_VIEW</code> contains the resource document pointed to by this link. Column <code class="codeph">PATH</code> contains the path that the link lets you use to access the resource. Column <code class="codeph">LINK</code> contains the link-properties document (metadata) for this <code class="codeph">PATH</code>.
                  </p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="accessing-XML-DB-repository-data.html#GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" title="Links in Oracle XML&nbsp;DB can be repository links or document links. Repository links can be hard links or weak links. Document links can also be hard links or weak links, when their targets are repository resources.">Link Types</a></li>
                        <li><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-00093774-B340-4178-9E9C-080EC8592098__GUID-0FDACE1A-C3C7-4791-9AC8-523EBA2C243C">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></p>
                        </li>
                        <li>
                           <p><a href="../refrn/PATH_VIEW.html#REFRN29079" target="_blank"><span><cite>Oracle Database Reference</cite></span> to learn about <code class="codeph">BPT</code></a> for more information about view <code class="codeph">PATH_VIEW</code></p>
                        </li>
                        <li>
                           <p><a href="../refrn/RESOURCE_VIEW.html#REFRN29080" target="_blank"><span><cite>Oracle Database Reference</cite></span> to learn about <code class="codeph">BPT</code></a> for more information about view <code class="codeph">RESOURCE_VIEW</code></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">Access to Oracle XML&nbsp;DB Repository Data</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5320"></a><div class="props_rev_3"><a id="GUID-B663D1C9-894E-4518-B66B-B9D9484819BC" name="GUID-B663D1C9-894E-4518-B66B-B9D9484819BC"></a><h3 id="ADXDB-GUID-B663D1C9-894E-4518-B66B-B9D9484819BC" class="sect3"><span class="enumeration_section">21.6 </span>Servlet Access to Repository Resources
               </h3>
               <div>
                  <p>Oracle XML&nbsp;DB implements Java Servlet API, version 2.2.</p>
                  <p>Support is limited by these restrictions:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>All servlets must be distributable. They must expect to run in different virtual machines. </p>
                     </li>
                     <li>
                        <p>WAR and <code class="codeph">web.xml</code> files are not supported. Oracle XML&nbsp;DB supports a subset of the XML configurations in this file. An XSLT stylesheet can be applied to the <code class="codeph">web.xml</code> to generate servlet definitions. An external tool must be used to create database roles for those defined in the <code class="codeph">web.xml</code> file. 
                        </p>
                     </li>
                     <li>
                        <p>JSP (Java Server Pages) support can be installed as a servlet and configured manually. </p>
                     </li>
                     <li>
                        <p><code class="codeph">HTTPSession</code> and related classes are not supported.
                        </p>
                     </li>
                     <li>
                        <p>Only one servlet context (that is, one Web application) is supported.</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="how-to-write-XML-DB-applications-in-Java.html#GUID-C6EABC36-3FA8-4A82-B940-C20A01D8F586" title="Design guidelines are presented for writing Oracle XML&nbsp;DB applications in Java. This includes guidelines for writing and configuring Java servlets for Oracle XML&nbsp;DB.">Guidelines for Oracle XML&nbsp;DB Applications in Java</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">Access to Oracle XML&nbsp;DB Repository Data</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5322"></a><a id="ADXDB5321"></a><div class="props_rev_3"><a id="GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83" name="GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83"></a><h3 id="ADXDB-GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83" class="sect3"><span class="enumeration_section">21.7 </span>Operations on Repository Resources
               </h3>
               <div>
                  <p>You can operate on data stored in Oracle XML&nbsp;DB Repository resources using Java, PL/SQL, Internet protocols, and Oracle XML DB Content Connector (<span class="italic">deprecated</span>). The most common operations are described, along with the required database permissions to use them.
                  </p>
                  <p>You can access repository data in any of these ways: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Oracle XML&nbsp;DB resource APIs for Java</p>
                     </li>
                     <li>
                        <p>A combination of Oracle XML&nbsp;DB resource views API and Oracle XML&nbsp;DB resource API for PL/SQL</p>
                     </li>
                     <li>
                        <p>Internet protocols (HTTP(S)/WebDAV and FTP) and Oracle XML&nbsp;DB protocol server</p>
                     </li>
                     <li>
                        <p>Oracle XML DB Content Connector (<span class="italic">deprecated</span>) and, through it, the standard Content Repository API for Java (JCR).
                        </p>
                     </li>
                  </ul>
                  <p>These access methods can be used equivalently. It does not matter how you add content to the repository or retrieve it from there. For example, you can add content to the repository using SQL or PL/SQL and then retrieve it using an Internet protocol, or the other way around.</p>
                  <p><a href="accessing-XML-DB-repository-data.html#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="This table describes the API options for accessing Oracle XML DB Repository.">Table 21-3</a> lists common Oracle XML&nbsp;DB Repository operations, and describes how these operations can be accomplished using each of several access methods. The table shows functionality common to the different methods, but not all of the methods are equally suited to any particular task. Unless mentioned otherwise, "resource" in this table can be either a file resource or a folder resource. 
                  </p>
                  <p><a href="accessing-XML-DB-repository-data.html#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="This table describes the API options for accessing Oracle XML DB Repository.">Table 21-3</a> also shows the resource privileges that are required for each operation. 
                  </p>
                  <div class="tblformalwide" id="GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI">
                     <p class="titleintable">Table 21-3 Accessing Oracle XML&nbsp;DB Repository: API Options</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Accessing Oracle XML&nbsp;DB Repository: API Options" summary="This table describes the API options for accessing Oracle XML DB Repository." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="10%" id="d108756e3390">Data Access</th>
                              <th align="left" valign="bottom" width="63%" id="d108756e3393">SQL and PL/SQL</th>
                              <th align="left" valign="bottom" width="10%" id="d108756e3396">Protocols</th>
                              <th align="left" valign="bottom" width="12%" id="d108756e3399">Resource Privileges Required</th>
                              <th align="left" valign="bottom" width="5%" id="d108756e3402">JCR Support</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3407" headers="d108756e3390 ">
                                 <p>Create resource</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3407 d108756e3393 "><pre class="oac_no_warn" dir="ltr">DBMS_XDB_REPOS.createResource(
  '/public/T1/testcase.txt',
  'ORIGINAL text');
INSERT INTO RESOURCE_VIEW (ANY_PATH, RES)
SELECT '/public/T1/copy1.txt', RES
  FROM RESOURCE_VIEW
  WHERE equals_path(RES, 
                    '/public/T1/testcase.txt')
        = 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3407 d108756e3396 ">
                                 <p>HTTP:<code class="codeph">PUT;</code></p>
                                 <p>FTP: <code class="codeph">PUT</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3407 d108756e3399 ">
                                 <p><code class="codeph">DAV::bind</code> on parent folder
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3407 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3431" headers="d108756e3390 ">
                                 <p>Update resource contents</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3431 d108756e3393 "><pre class="oac_no_warn" dir="ltr">UPDATE RESOURCE_VIEW
SET RES =
XMLQuery(
  'declare default element namespace
   "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
   copy $i := $p1 modify
     (for $j in $i/Resource/Contents/text
      return replace value of node $j with $p2)
   return $i'
  PASSING RES AS "p1", 'NEW text' AS "p2"
  RETURNING CONTENT)
WHERE equals_path(RES, '/public/T1/copy1.txt') = 1</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3431 d108756e3396 ">
                                 <p>HTTP: <code class="codeph">PUT;</code></p>
                                 <p>FTP: <code class="codeph">PUT</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3431 d108756e3399 ">
                                 <p><code class="codeph">xdb:write-content</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3431 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3455" headers="d108756e3390 ">
                                 <p>Update resource properties</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3455 d108756e3393 "><pre class="oac_no_warn" dir="ltr">UPDATE RESOURCE_VIEW
SET RES =
XMLQuery(
  'declare default element namespace
"http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
   copy $i := $p1 modify
     (for $j in $i/Resource/DisplayName
      return replace value of node $j with $p2)
   return $i'
  PASSING RES AS "p1", 'NewName1.txt' AS "p2" RETURNING CONTENT)
WHERE equals_path(RES, '/public/T1/copy1.txt') = 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3455 d108756e3396 ">
                                 <p>WebDAV:</p>
                                 <p><code class="codeph">PROPPATCH;</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3455 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3455 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3476" headers="d108756e3390 ">
                                 <p>Update resource ACL </p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3476 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_REPOS.setACL(
  '/public/T1/copy1.txt',
  '/sys/acls/all_owner_acl.xml');</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3476 d108756e3396 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3476 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-acl</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3476 d108756e3402 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3494" headers="d108756e3390 ">
                                 <p>Unlink resource (delete if last link) </p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3494 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_REPOS.deleteResource()</pre><p>or</p><pre class="oac_no_warn" dir="ltr">DELETE FROM RESOURCE_VIEW
  WHERE equals_path(RES, path) &gt; 0</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3494 d108756e3396 ">
                                 <p>HTTP:</p>
                                 <p><code class="codeph">DELETE;</code></p>
                                 <p>FTP: <code class="codeph">delete</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3494 d108756e3399 ">
                                 <p><code class="codeph">DAV::unbind</code> on parent folder
                                 </p>
                                 <p><code class="codeph">xdb:unlink-from</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3494 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3527" headers="d108756e3390 ">
                                 <p>Forcibly remove all links to resource</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3527 d108756e3393 "><pre class="oac_no_warn" dir="ltr">DBMS_XDB_REPOS.deleteResource()</pre><p>or</p><pre class="oac_no_warn" dir="ltr">DELETE FROM PATH_VIEW
WHERE
XMLCast(
XMLQuery(
  'declare namespace n1=
"http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
   //n1:DisplayName'
  PASSING RES RETURNING CONTENT)
AS VARCHAR2(256))
= 'My resource'</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3527 d108756e3396 ">
                                 <p>FTP:</p>
                                 <p><code class="codeph">quote</code> 
                                 </p>
                                 <p><code class="codeph">rm_rf</code></p>
                                 <p><span class="italic"><code class="codeph">resource</code></span></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3527 d108756e3399 ">
                                 <p><code class="codeph">DAV::unbind</code> on all parent folders
                                 </p>
                                 <p><code class="codeph">xdb:unlink-from</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3527 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3564" headers="d108756e3390 ">
                                 <p>Move resource</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3564 d108756e3393 "><pre class="oac_no_warn" dir="ltr">UPDATE PATH_VIEW
  SET path = '/public/T1/copy2.txt'
  WHERE equals_path(RES,
                    '/public/T1/copy1.txt')
        = 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3564 d108756e3396 ">
                                 <p>WebDAV:</p>
                                 <p><code class="codeph">MOVE;</code> 
                                 </p>
                                 <p>FTP: <code class="codeph">rename</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3564 d108756e3399 ">
                                 <p><code class="codeph">DAV::unbind</code> on source parent folder
                                 </p>
                                 <p><code class="codeph">DAV::bind</code> on target parent folder
                                 </p>
                                 <p><code class="codeph">xdb:unlink-from</code> and <code class="codeph">xdb:link-to</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3564 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3601" headers="d108756e3390 ">
                                 <p>Copy resource</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3601 d108756e3393 "><pre class="oac_no_warn" dir="ltr">INSERT INTO PATH_VIEW (path, RES, link)
  SELECT '/public/T1/copy3.txt', RES, link
    FROM PATH_VIEW
    WHERE equals_path(RES,
                      '/public/T1/copy2.txt')
          = 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3601 d108756e3396 ">
                                 <p>WebDAV:</p>
                                 <p><code class="codeph">COPY;</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3601 d108756e3399 ">
                                 <p>Copy to new:</p>
                                 <p><code class="codeph">DAV::bind</code> on target parent folder
                                 </p>
                                 <p><code class="codeph">DAV::read</code> on resource
                                 </p>
                                 <p>Copy to existing (replacement):</p>
                                 <p><code class="codeph">DAV::read</code> on resource
                                 </p>
                                 <p><code class="codeph">DAV::write-properties</code> and <code class="codeph">DAV::write-content</code> on existing target resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3601 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3641" headers="d108756e3390 ">
                                 <p>Create hard link to existing resource</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3641 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_REPOS.link('/public/T1/copy3.txt', 
                         '/public/T1',
                         'myhardlink');</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3641 d108756e3396 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3641 d108756e3399 ">
                                 <p><code class="codeph">DAV::bind</code> on parent folder
                                 </p>
                                 <p><code class="codeph">xdb:link-to</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3641 d108756e3402 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3663" headers="d108756e3390 ">
                                 <p>Create weak link to existing resource</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3663 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_REPOS.link(
  '/public/T1/copy3.txt', 
  '/public/T1',
  'myweaklink',
  DBMS_XDB_REPOS.LINK_TYPE_WEAK);</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3663 d108756e3396 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3663 d108756e3399 ">
                                 <p><code class="codeph">DAV::bind</code> on parent folder
                                 </p>
                                 <p><code class="codeph">xdb:link-to</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3663 d108756e3402 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3685" headers="d108756e3390 ">
                                 <p>Change owner of resource</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3685 d108756e3393 "><pre class="oac_no_warn" dir="ltr">UPDATE RESOURCE_VIEW
SET RES =
XMLQuery(
  'copy $i := $p1 modify
     (for $j in $i/Resource/Owner
      return replace value of node $j with $p2)
   return $i'
  PASSING RES AS "p1", 'U2' AS "p2" RETURNING CONTENT)
WHERE equals_path(RES, '/public/T1/copy3.txt') = 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3685 d108756e3396 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3685 d108756e3399 ">
                                 <p><code class="codeph">DAV::take-ownership</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3685 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3704" headers="d108756e3390 ">
                                 <p>Get binary or text representation of resource contents </p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3704 d108756e3393 "><pre class="oac_no_warn" dir="ltr">SELECT XDBURIType(path).getBLOB()
  FROM DUAL;

SELECT
XMLQuery(
'declare default element namespace
"http://xmlns.oracle.com/xdb/XDBResource.xsd";(: :)
 $r/Resource/Contents'
PASSING RES AS "r" RETURNING CONTENT)
FROM RESOURCE_VIEW
WHERE equals_path(RES, '/public/T1/copy2.text') = 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3704 d108756e3396 ">
                                 <p>HTTP: <code class="codeph">GET;</code></p>
                                 <p>FTP: <code class="codeph">get</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3704 d108756e3399 ">
                                 <p><code class="codeph">xdb:read-contents</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3704 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3728" headers="d108756e3390 ">
                                 <p>Get <code class="codeph">XMLType</code> representation of resource contents 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3728 d108756e3393 "><pre class="oac_no_warn" dir="ltr">SELECT XDBURIType('/public/T1/res.xml').getXML
  FROM DUAL;
</pre><pre class="oac_no_warn" dir="ltr">SELECT 
XMLQuery(</pre><pre class="oac_no_warn" dir="ltr">'declare default element namespace
"http://xmlns.oracle.com/xdb/XDBResource.xsd";(: :)</pre><pre class="oac_no_warn" dir="ltr"> $r/Resource/Contents/*'
PASSING RES AS "r" RETURNING CONTENT)
FROM RESOURCE_VIEW 
WHERE equals_path(RES, '/public/T1/res.xml') = 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3728 d108756e3396 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3728 d108756e3399 ">
                                 <p><code class="codeph">xdb:read-contents</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3728 d108756e3402 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3755" headers="d108756e3390 ">
                                 <p>Get resource properties</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3755 d108756e3393 "><pre class="oac_no_warn" dir="ltr">SELECT
XMLCast(
XMLQuery(</pre><pre class="oac_no_warn" dir="ltr">'declare default element namespace
"http://xmlns.oracle.com/xdb/XDBResource.xsd";(: :)</pre><pre class="oac_no_warn" dir="ltr">$r/Resource/LastModifier'
PASSING RES AS "r" RETURNING CONTENT)
AS VARCHAR2(128))</pre><pre class="oac_no_warn" dir="ltr">FROM RESOURCE_VIEW
WHERE equals_path(RES, '/public/T1/res.xml') = 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3755 d108756e3396 ">
                                 <p>WebDAV:</p>
                                 <p><code class="codeph">PROPFIND</code></p>
                                 <p><code class="codeph">(depth = 0);</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3755 d108756e3399 ">
                                 <p><code class="codeph">xdb:read-properties</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3755 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3785" headers="d108756e3390 ">
                                 <p>List resources in folder</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3785 d108756e3393 "><pre class="oac_no_warn" dir="ltr">SELECT PATH FROM PATH_VIEW
  WHERE under_path(res, '/public/T1') = 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3785 d108756e3396 ">
                                 <p>WebDAV: </p>
                                 <p><code class="codeph">PROPFIND</code></p>
                                 <p><code class="codeph">(depth = 0);</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3785 d108756e3399 ">
                                 <p><code class="codeph">xdb:read-contents</code> on folder
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3785 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3809" headers="d108756e3390 ">
                                 <p>Create folder</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3809 d108756e3393 "><pre class="oac_no_warn" dir="ltr">Call DBMS_XDB_REPOS.createFolder('/public/T2');</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3809 d108756e3396 ">
                                 <p>WebDAV:</p>
                                 <p><code class="codeph">MKCOL;</code></p>
                                 <p>FTP: <code class="codeph">mkdir</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3809 d108756e3399 ">
                                 <p><code class="codeph">DAV::bind</code> on parent folder
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3809 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3834" headers="d108756e3390 ">
                                 <p>Unlink empty folder </p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3834 d108756e3393 "><pre class="oac_no_warn" dir="ltr">DBMS_XDB_REPOS.deleteResource('/public/T2')</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3834 d108756e3396 ">
                                 <p>HTTP:</p>
                                 <p><code class="codeph">DELETE;</code></p>
                                 <p>FTP: <code class="codeph">rmdir</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3834 d108756e3399 ">
                                 <p><code class="codeph">DAV::unbind</code> on parent folder
                                 </p>
                                 <p><code class="codeph">xdb:unlink-from</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3834 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3863" headers="d108756e3390 ">
                                 <p>Forcibly delete folder and all links to it</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3863 d108756e3393 "><pre class="oac_no_warn" dir="ltr">DBMS_XDB_REPOS.deleteResource(
  '/public/T2',
  DBMS_XDB.DELETE_RECURSIVE_FORCE);</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3863 d108756e3396 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3863 d108756e3399 ">
                                 <p><code class="codeph">DAV::unbind</code> on all parent folders
                                 </p>
                                 <p><code class="codeph">xdb:unlink-from</code> on folder resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3863 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3885" headers="d108756e3390 ">
                                 <p>Get resource with a row lock</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3885 d108756e3393 "><pre class="oac_no_warn" dir="ltr">SELECT ... 
  FROM RESOURCE_VIEW
  FOR UPDATE ...;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3885 d108756e3396 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3885 d108756e3399 ">
                                 <p><code class="codeph">xdb:read-properties</code> and <code class="codeph">xdb:read-contents</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3885 d108756e3402 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3906" headers="d108756e3390 ">
                                 <p>Add WebDAV lock on resource</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3906 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_REPOS.LockResource(
  '/public/T1/res.xml',
  TRUE,
  TRUE);</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3906 d108756e3396 ">
                                 <p>WebDAV:</p>
                                 <p><code class="codeph">LOCK;</code> 
                                 </p>
                                 <p>FTP:</p>
                                 <p><code class="codeph">quote lock</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3906 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3906 d108756e3402 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3933" headers="d108756e3390 ">
                                 <p>Remove WebDAV lock</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3933 d108756e3393 "><pre class="oac_no_warn" dir="ltr">DECLARE...</pre><pre class="oac_no_warn" dir="ltr">BEGIN 
  DBMS_XDB_REPOS.GetLockToken('/public/T1/res.xml', 
                              locktoken); 
  DBMS_XDB_REPOS.UnlockResource(
    '/public/T1/res.xml',
    locktoken);
END; </pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3933 d108756e3396 ">
                                 <p>WebDAV: <code class="codeph">UNLOCK;</code></p>
                                 <p>FTP:</p>
                                 <p><code class="codeph">quote unlock</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3933 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code> and <code class="codeph">DAV::unlock</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3933 d108756e3402 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3963" headers="d108756e3390 ">
                                 <p>Check out file resource</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3963 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_VERSION.checkOut(
  '/public/T1/res.xml');</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3963 d108756e3396 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3963 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3963 d108756e3402 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3982" headers="d108756e3390 ">
                                 <p>Check in file resource</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3982 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_VERSION.checkIn(
  '/public/T1/res.xml');</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3982 d108756e3396 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3982 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3982 d108756e3402 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e4000" headers="d108756e3390 ">
                                 <p>Uncheck out file resource</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e4000 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_VERSION.unCheckOut(
  '/public/T1/res.xml');</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e4000 d108756e3396 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e4000 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e4000 d108756e3402 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e4018" headers="d108756e3390 ">
                                 <p>Make file resource versioned</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e4018 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_VERSION.makeVersioned(
  '/public/T1/res.xml');</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e4018 d108756e3396 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e4018 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code> on resource
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e4018 d108756e3402 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e4036" headers="d108756e3390 ">
                                 <p>Remove an event handler</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e4036 d108756e3393 ">
                                 <p><code class="codeph">DBMS_XEVENT.remove</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d108756e4036 d108756e3396 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e4036 d108756e3399 ">
                                 <p><code class="codeph">xdb:write-config</code> on resource or parent folder (depending on the context)
                                 </p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e4036 d108756e3402 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e4055" headers="d108756e3390 ">
                                 <p>Commit changes</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e4055 d108756e3393 "><pre class="oac_no_warn" dir="ltr">COMMIT;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e4055 d108756e3396 ">
                                 <p>Automatic commit after each request</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e4055 d108756e3399 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e4055 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e4071" headers="d108756e3390 ">
                                 <p>Rollback changes</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e4071 d108756e3393 "><pre class="oac_no_warn" dir="ltr">ROLLBACK;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e4071 d108756e3396 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e4071 d108756e3399 ">
                                 <p>not applicable</p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e4071 d108756e3402 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>In addition to the privileges listed in <a href="accessing-XML-DB-repository-data.html#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="This table describes the API options for accessing Oracle XML DB Repository.">Table 21-3</a>, privilege <code class="codeph">xdb:read-properties</code> is required on each resource affected by an operation. Operations that affect the parent folder of a resource, in addition to the resource targeted by the operation, also require privilege <code class="codeph">xdb:read-properties</code> on that parent folder. For example, deleting a resource affects both the resource to delete and its parent folder, so you need privilege <code class="codeph">xdb:read-properties</code> on both the resource and its parent folder.
                  </p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></li>
                        <li><a href="PLSQL-access-to-XML-DB-repository.html#GUID-04D3270F-1AC3-407B-B730-6B5A93AA5D7C" title="PL/SQL packages DBMS_XDB_CONFIG and DBMS_XDB_REPOS together provide the Oracle XML&nbsp;DB resource application program interface (API) for PL/SQL. You use the former to configure Oracle XML&nbsp;DB and its repository. You use the latter to perform other, non-configuration operations on the repository.">PL/SQL Access to Oracle XML&nbsp;DB Repository</a></li>
                        <li><a href="repository-access-using-protocols.html#GUID-0476309D-E3DF-4C56-BF21-68CD04D00C98" title="You can access Oracle XML&nbsp;DB Repository data using protocols FTP and HTTP(S)/WebDAV.">Repository Access Using Protocols</a></li>
                        <li><a href="deprecated-content-repository-API-for-java.html#GUID-F0007175-676B-4187-AF1F-FC24D5ADCDBF" title="Oracle XML DB Content Connector implements Content Repository API for Java (also known as JCR), a Java API standard developed by the Java community as JSR-170. You can access Oracle XML&nbsp;DB Repository using Oracle XML DB Content Connector.">Deprecated Content Repository API for Java</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__GUID-07C931D5-F05B-4E55-AAEE-82ABAD44BC9E">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../arpls/DBMS_XDB_REPOS.html#ARPLS74188" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about PL/SQL package <code class="codeph">DBMS_XDB_REPOS</code></p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_XDB_VERSION.html#ARPLS373" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about PL/SQL package <code class="codeph">DBMS_XDB_VERSION</code></p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_XEVENT.html#ARPLS210" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about PL/SQL package <code class="codeph">DBMS_XEVENT</code></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">Access to Oracle XML&nbsp;DB Repository Data</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4194"></a><a id="ADXDB4195"></a><a id="ADXDB4196"></a><a id="ADXDB4193"></a><div class="props_rev_3"><a id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75" name="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75"></a><h3 id="ADXDB-GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75" class="sect3"><span class="enumeration_section">21.8 </span>Accessing the Content of Repository Resources Using SQL
               </h3>
               <div>
                  <p>In SQL you can access the content of a document in Oracle XML&nbsp;DB Repository using PL/SQL constructor <code class="codeph">XDBURIType</code> or using <code class="codeph">RESOURCE_VIEW</code> and the corresponding resource document.
                  </p>
                  <div class="section">
                     <p>The easiest way is to use <code class="codeph">XDBURIType</code>. You pass a URL to this constructor to specify which resource to access. The URL is assumed to start at the root of the repository. Object type <code class="codeph">XDBURIType</code> provides methods <code class="codeph">getBLOB()</code>, <code class="codeph">getCLOB()</code>, and <code class="codeph">getXML()</code>, to access the different kinds of content that can be associated with a resource.
                     </p>
                     <p><a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFIEFDJ">Example 21-4</a> uses constructor <code class="codeph">XDBURIType</code> to access the content of a text document.
                     </p>
                     <p>The content of a document can also be accessed using <code class="codeph">RESOURCE_VIEW</code> and the corresponding resource document. <a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFHICEA">Example 21-5</a> does this to access the content of a text document.
                     </p>
                     <p>The content of XML documents (XML Schema-based or non-schema-based) can also be accessed this way. <a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFGFIAD">Example 21-6</a> uses an XPath expression that includes nodes from an XML document and nodes from the corresponding resource document to access the contents of a <code class="codeph">PurchaseOrder</code> document.
                     </p>
                     <p>In <a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFGFIAD">Example 21-6</a>, the namespace prefix, <code class="codeph">r</code> identifies which nodes in the XPath expression are members of the resource namespace. Namespace prefix <code class="codeph">r</code> is defined using the <code class="codeph">XMLNAMESPACES</code> clause of SQL/XML function <code class="codeph">XMLTable</code>. The namespace declaration is needed here because the purchase-order XML schema does not define a namespace, and it is not possible to apply a namespace prefix to nodes in the <code class="codeph">PurchaseOrder</code> document. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__GUID-9760D64A-61A7-4F21-B2F4-7AAF9E4035B8">
                        <p class="notep1">See Also:</p>
                        <p><a href="xquery-and-XML-DB.html#GUID-4F83A835-C94B-4D62-999B-111AB5E8A8F1" title="The XQuery language is one of the main ways that you interact with XML data in Oracle XML&nbsp;DB. Support for the language includes SQL*Plus commandXQUERY and SQL/XML functions XMLQuery, XMLTable, XMLExists, and XMLCast.">XQuery and Oracle XML&nbsp;DB</a> for more information about the <code class="codeph">XMLNAMESPACES</code> clause of <code class="codeph">XMLTable</code></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFIEFDJ">
                     <p class="titleinexample">Example 21-4 Accessing a Text Document in the Repository Using XDBURITYPE</p><pre class="oac_no_warn" dir="ltr">SELECT XDBURIType('/home/QUINE/NurseryRhyme.txt').getCLOB() FROM DUAL;
 
XDBURITYPE('/HOME/QUINE/NURSERYRHYME.TXT').GETCLOB()
----------------------------------------------------
Mary had a little lamb
Its fleece was white as snow
and everywhere that Mary went
that lamb was sure to go
 
1 row selected.
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFHICEA">
                     <p class="titleinexample">Example 21-5 Accessing Resource Content Using RESOURCE_VIEW</p><pre class="oac_no_warn" dir="ltr">SELECT CONTENT
  FROM RESOURCE_VIEW,
       XMLTable(XMLNAMESPACES (default 'http://xmlns.oracle.com/xdb/XDBResource.xsd'),
                '/Resource/Contents' PASSING RES
                COLUMNS content CLOB PATH 'text')
  WHERE equals_path(RES, '/home/QUINE/NurseryRhyme.txt') = 1;
 
CONTENT
-------
Mary had a little lamb
Its fleece was white as snow
and everywhere that Mary went
that lamb was sure to go
 
1 row selected.
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFGFIAD">
                     <p class="titleinexample">Example 21-6 Accessing XML Documents Using Resource and Namespace Prefixes</p><pre class="oac_no_warn" dir="ltr">SELECT des.description
  FROM RESOURCE_VIEW rv,
       XMLTable(<span class="bold">XMLNAMESPACES ('http://xmlns.oracle.com/xdb/XDBResource.xsd' AS "r"</span>),
                '<span class="bold">/r:Resource/r:Contents/PurchaseOrder/LineItems/LineItem</span>'
                PASSING rv.RES
                COLUMNS description VARCHAR2(256) PATH 'Description') des
  WHERE 
    equals_path(rv.RES, '/home/QUINE/PurchaseOrders/2002/Mar/SBELL-2002100912333601PDT.xml') = 1;

DES.DESCRIPTION
---------------------------------
A Night to Remember
The Unbearable Lightness Of Being
The Wizard of Oz
 
3 rows selected.
</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">Access to Oracle XML&nbsp;DB Repository Data</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4197"></a><div class="props_rev_3"><a id="GUID-F11DE6D9-61DC-4A55-A3A5-74A3590928A3" name="GUID-F11DE6D9-61DC-4A55-A3A5-74A3590928A3"></a><h3 id="ADXDB-GUID-F11DE6D9-61DC-4A55-A3A5-74A3590928A3" class="sect3"><span class="enumeration_section">21.9 </span>Access to the Content of XML Schema-Based Documents
               </h3>
               <div>
                  <p>You can access the content of an XML Schema-based document in the same way as for a non-schema-based document: use the corresponding resource document. Or you can access it as a row in the default table that was defined when the XML schema was registered with Oracle XML&nbsp;DB.</p>
                  <p>In the first case, you can use <code class="codeph">RESOURCE_VIEW</code> to query different types of XML Schema-based documents with a single SQL statement.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-254A0380-101C-4A85-92ED-80D892E7FC8C">Accessing Resource Content Using Element XMLRef in Joins</a><br>Element <code class="codeph">XMLRef</code> in a resource document provides the join key required when a SQL statement needs to access or update metadata and content as part of a single operation.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">Access to Oracle XML&nbsp;DB Repository Data</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4199"></a><a id="ADXDB4200"></a><a id="ADXDB4198"></a><div class="props_rev_3"><a id="GUID-254A0380-101C-4A85-92ED-80D892E7FC8C" name="GUID-254A0380-101C-4A85-92ED-80D892E7FC8C"></a><h4 id="ADXDB-GUID-254A0380-101C-4A85-92ED-80D892E7FC8C" class="sect4"><span class="enumeration_section">21.9.1 </span>Accessing Resource Content Using Element XMLRef in Joins
                  </h4>
                  <div>
                     <p>Element <code class="codeph">XMLRef</code> in a resource document provides the join key required when a SQL statement needs to access or update metadata and content as part of a single operation.
                     </p>
                     <div class="section">
                        <p>Examples here show queries that access resource content using joins based on the value of element <code class="codeph">XMLRef</code>.
                        </p>
                        <p><a href="accessing-XML-DB-repository-data.html#GUID-254A0380-101C-4A85-92ED-80D892E7FC8C__BJFBDEJE">Example 21-7</a> locates a row in the <code class="codeph">defaultTable</code> based on a path in Oracle XML&nbsp;DB Repository. SQL function <code class="codeph">ref</code> locates the target row in the default table, based on the value of the <code class="codeph">XMLRef</code> element in the resource document, <code class="codeph">RES</code>.
                        </p>
                        <p><a href="accessing-XML-DB-repository-data.html#GUID-254A0380-101C-4A85-92ED-80D892E7FC8C__BJFFGBIB">Example 21-8</a> shows how to select fragments from XML documents based on metadata, path, and content. The query returns the value of element <code class="codeph">Reference</code> for documents under <code class="codeph">/home/QUINE/PurchaseOrders/2002/Mar</code> that contain orders for part number 715515009058.
                        </p>
                        <p>In general, when accessing the content of schema-based XML documents, joining <code class="codeph">RESOURCE_VIEW</code> or <code class="codeph">PATH_VIEW</code> with the default table is more efficient than using <code class="codeph">RESOURCE_VIEW</code> or <code class="codeph">PATH_VIEW</code> on its own. An explicit join between the resource document and the default table tells Oracle XML&nbsp;DB that the SQL statement works on only one type of XML document. XPath rewrite can thus be used to optimize operations on the default table and the resource.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-254A0380-101C-4A85-92ED-80D892E7FC8C__BJFBDEJE">
                        <p class="titleinexample">Example 21-7 Querying Repository Resource Data Using SQL Function REF and Element XMLRef</p><pre class="pre codeblock"><code>SELECT des.description
  FROM RESOURCE_VIEW rv,
       purchaseorder p,
       XMLTable('$p/PurchaseOrder/LineItems/LineItem' PASSING p.OBJECT_VALUE AS "p"
                COLUMNS description VARCHAR2(256) PATH 'Description') des
  WHERE equals_path(rv.RES, '/home/QUINE/PurchaseOrders/2002/Mar/SBELL-2002100912333601PDT.xml')
        = 1
    AND <span class="bold">ref</span>(p) = XMLCast(XMLQuery('declare default element namespace
                                  "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                                  fn:data(/Resource/<span class="bold">XMLRef</span>)' PASSING rv.RES RETURNING CONTENT)
                         AS REF XMLType);
 
DES.DESCRIPTION
---------------------------------
A Night to Remember
The Unbearable Lightness Of Being
The Wizard of Oz
 
3 rows selected.
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-254A0380-101C-4A85-92ED-80D892E7FC8C__BJFFGBIB">
                        <p class="titleinexample">Example 21-8 Selecting XML Document Fragments Based on Metadata, Path, and Content</p><pre class="pre codeblock"><code>SELECT XMLCast(XMLQuery('$p/PurchaseOrder/Reference'
                        PASSING po.OBJECT_VALUE AS "p" RETURNING CONTENT)
               AS VARCHAR2(30))
  FROM RESOURCE_VIEW rv, purchaseorder po
  WHERE under_path(rv.RES, '/home/QUINE/PurchaseOrders/2002/Mar') = 1
    AND ref(po) = XMLCast(
                    XMLQuery('declare default element namespace
                              "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                              fn:data(/Resource/XMLRef)'
                             PASSING rv.RES RETURNING CONTENT)
                          AS REF XMLType)
    AND XMLExists('$p/PurchaseOrder/LineItems/LineItem/Part[@Id="715515009058"]'
                  PASSING po.OBJECT_VALUE AS "p");

XMLCAST(XMLQUERY('$P/PURCHASEO
------------------------------
CJOHNSON-20021009123335851PDT
LSMITH-2002100912333661PDT
SBELL-2002100912333601PDT
 
3 rows selected.
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-F11DE6D9-61DC-4A55-A3A5-74A3590928A3" title="You can access the content of an XML Schema-based document in the same way as for a non-schema-based document: use the corresponding resource document. Or you can access it as a row in the default table that was defined when the XML schema was registered with Oracle XML&nbsp;DB.">Access to the Content of XML Schema-Based Documents</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB4201"></a><div class="props_rev_3"><a id="GUID-DE0B24FB-D864-4657-B03C-49442F516DA7" name="GUID-DE0B24FB-D864-4657-B03C-49442F516DA7"></a><h3 id="ADXDB-GUID-DE0B24FB-D864-4657-B03C-49442F516DA7" class="sect3"><span class="enumeration_section">21.10 </span>Update of the Content of Repository Documents
               </h3>
               <div>
                  <p>You can update the content of documents stored in Oracle XML&nbsp;DB Repository using Internet protocols or SQL.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4">Update of Repository Content Using Internet Protocols</a><br>The most popular content authoring tools support HTTP, FTP, and WebDAV protocols. Given appropriate access permissions, a simple URL targeting a document to update is all you need, to access and edit content stored in Oracle XML&nbsp;DB Repository.
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA">Update of Repository Content Using SQL</a><br>You can use XQuery Update to update the content of any document stored in Oracle XML&nbsp;DB Repository. The content of the document can be modified by updating the resource document or by updating the default table that holds the content of the document. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">Access to Oracle XML&nbsp;DB Repository Data</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4203"></a><a id="ADXDB4202"></a><div class="props_rev_3"><a id="GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4" name="GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4"></a><h4 id="ADXDB-GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4" class="sect4"><span class="enumeration_section">21.10.1 </span>Update of Repository Content Using Internet Protocols
                  </h4>
                  <div>
                     <p>The most popular content authoring tools support HTTP, FTP, and WebDAV protocols. Given appropriate access permissions, a simple URL targeting a document to update is all you need, to access and edit content stored in Oracle XML&nbsp;DB Repository.</p>
                     <p>Popular content authoring tools can use HTTP verb <code class="codeph">get</code> to access the content of a document, given a URL to it, and they can use HTTP verb <code class="codeph">put</code> to save the updated content.
                     </p>
                     <p><a href="accessing-XML-DB-repository-data.html#GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4__CHDGFBEC">Figure 21-6</a> shows how, with the WebDAV support included in Microsoft Word, you can use Microsoft Word to update and edit a document stored in Oracle XML&nbsp;DB Repository.
                     </p>
                     <div class="figure" id="GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4__CHDGFBEC">
                        <p class="titleinfigure">Figure 21-6 Updating and Editing Content Stored in Oracle XML&nbsp;DB Using Microsoft Word</p><img src="img/word_po_update.gif" width="577" alt="Description of Figure 21-6 follows" title="Description of Figure 21-6 follows" longdesc="img_text/word_po_update.html"><br><a href="img_text/word_po_update.html">Description of "Figure 21-6 Updating and Editing Content Stored in Oracle XML&nbsp;DB Using Microsoft Word"</a></div>
                     <!-- class="figure" -->
                     <p>When an editing application such as Microsoft Word updates an XML document that is stored in Oracle XML&nbsp;DB, the database receives an input stream containing the new content of the document. Unfortunately, applications such as Word do not provide Oracle XML&nbsp;DB with any way of identifying which changes have taken place in the document. Partial updates are thus impossible. It is necessary to parse the entire document again, replacing all of the objects derived from the original document with objects derived from the new content.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-DE0B24FB-D864-4657-B03C-49442F516DA7" title="You can update the content of documents stored in Oracle XML&nbsp;DB Repository using Internet protocols or SQL.">Update of the Content of Repository Documents</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4204"></a><div class="props_rev_3"><a id="GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA" name="GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA"></a><h4 id="ADXDB-GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA" class="sect4"><span class="enumeration_section">21.10.2 </span>Update of Repository Content Using SQL
                  </h4>
                  <div>
                     <p>You can use XQuery Update to update the content of any document stored in Oracle XML&nbsp;DB Repository. The content of the document can be modified by updating the resource document or by updating the default table that holds the content of the document. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E">Updating a Document in the Repository by Updating Its Resource Document</a><br>You can update the content of a document using a SQL <code class="codeph">UPDATE</code> statement and SQL function <code class="codeph">XMLQuery</code> with XQuery Update. An XQuery expression is passed to <code class="codeph">XMLQuery</code> as the target of the update operation.
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212">Updating an XML Schema-Based Document in the Repository by Updating the Default Table</a><br>You can update XML Schema-based documents by performing an update operation directly on the default table that is used to manage the content of the document. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-DE0B24FB-D864-4657-B03C-49442F516DA7" title="You can update the content of documents stored in Oracle XML&nbsp;DB Repository using Internet protocols or SQL.">Update of the Content of Repository Documents</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4205"></a><a id="ADXDB4206"></a><a id="ADXDB6417"></a><div class="props_rev_3"><a id="GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E" name="GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E"></a><h5 id="ADXDB-GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E" class="sect5"><span class="enumeration_section">21.10.2.1 </span>Updating a Document in the Repository by Updating Its Resource Document
                     </h5>
                     <div>
                        <p>You can update the content of a document using a SQL <code class="codeph">UPDATE</code> statement and SQL function <code class="codeph">XMLQuery</code> with XQuery Update. An XQuery expression is passed to <code class="codeph">XMLQuery</code> as the target of the update operation.
                        </p>
                        <div class="section">
                           <p><a href="accessing-XML-DB-repository-data.html#GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEDJDH">Example 21-9</a> updates the content of a simple text document. The XQuery expression passed to <code class="codeph">XMLQuery</code> as the target of the update operation identifies the text node as belonging to element <code class="codeph">/Resource/Contents/text</code>.
                           </p>
                           <p>This technique for updating the content of a document by updating the associated resource has the advantage that it can be used to update any kind of document stored in Oracle XML&nbsp;DB Repository. </p>
                           <p><a href="accessing-XML-DB-repository-data.html#GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEFBEC">Example 21-10</a> updates a node in an XML document by performing a SQL <code class="codeph">UPDATE</code> operation on the corresponding resource document. Here, XQuery Update is used to change the value of the text node associated with element <code class="codeph">User</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEDJDH">
                           <p class="titleinexample">Example 21-9 Updating a Text Document Using UPDATE and XQuery Update on the Resource</p><pre class="pre codeblock"><code>DECLARE
  file         BFILE;
  contents     CLOB;
  dest_offset  NUMBER := 1;
  src_offset   NUMBER := 1;
  lang_context NUMBER := 0;
  conv_warning NUMBER := 0;
BEGIN
  file := bfilename('XMLDIR', 'tdadxdb-03-02.txt');
  DBMS_LOB.createTemporary(contents, true, DBMS_LOB.SESSION);
  DBMS_LOB.fileopen(file, DBMS_LOB.file_readonly);
  DBMS_LOB.loadClobfromFile(contents,
                            file,
                            DBMS_LOB.getLength(file),
                            dest_offset,
                            src_offset,
                            nls_charset_id('AL32UTF8'),
                            lang_context,
                            conv_warning);
  DBMS_LOB.fileclose(file);
  UPDATE RESOURCE_VIEW
    SET RES =
      XMLQuery('declare default element namespace 
                  "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                copy $i := $p1 modify
                  (for $j in $i/Resource/Contents/text
                   return replace value of node $j with $p2)
                return $i'
               PASSING RES AS "p1", contents AS "p2" RETURNING CONTENT)
    WHERE equals_path(res, '/home/QUINE/NurseryRhyme.txt') = 1;
  DBMS_LOB.freeTemporary(contents);
END;
/
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEFBEC">
                           <p class="titleinexample">Example 21-10 Updating an XML Node Using UPDATE and XQuery Update on the Resource</p><pre class="pre codeblock"><code>UPDATE RESOURCE_VIEW
  SET RES =
    XMLQuery('declare namespace r="http://xmlns.oracle.com/xdb/XDBResource.xsd";
              copy $i := $p1 modify
                (for $j in $i/r:Resource/r:Contents/PurchaseOrder/<span class="bold">User</span>
                 return replace value of node $j with $p2)
              return $i'
             PASSING RES AS "p1", 'SKING' AS "p2" RETURNING CONTENT)
    WHERE equals_path(res, '/home/QUINE/PurchaseOrders/2002/Mar/SBELL-2002100912333601PDT.xml')
          = 1;
 
1 row updated.

SELECT XMLCast(XMLQuery(
                 'declare namespace ns="http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                  $r/ns:Resource/ns:Contents/PurchaseOrder/<span class="bold">User/text()</span>'
                 PASSING RES AS "r" RETURNING CONTENT)
               AS VARCHAR2(32))
  FROM RESOURCE_VIEW
  WHERE equals_path(RES,
                    '/home/QUINE/PurchaseOrders/2002/Mar/SBELL-2002100912333601PDT.xml')
        = 1;

XMLCAST(XMLQUERY('DECLARENAMESPA
--------------------------------
<span class="bold">SKING</span>

1 row selected.</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA" title="You can use XQuery Update to update the content of any document stored in Oracle XML&nbsp;DB Repository. The content of the document can be modified by updating the resource document or by updating the default table that holds the content of the document.">Update of Repository Content Using SQL</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4208"></a><a id="ADXDB4207"></a><div class="props_rev_3"><a id="GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212" name="GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212"></a><h5 id="ADXDB-GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212" class="sect5"><span class="enumeration_section">21.10.2.2 </span>Updating an XML Schema-Based Document in the Repository by Updating the Default Table
                     </h5>
                     <div>
                        <p>You can update XML Schema-based documents by performing an update operation directly on the default table that is used to manage the content of the document. </p>
                        <div class="section">
                           <p>If the document must be located by a <code class="codeph">WHERE</code> clause that includes a path or conditions based on metadata, then the SQL <code class="codeph">UPDATE</code> statement must use a join between the resource and the default table. 
                           </p>
                           <p>In general, when updating the content of XML Schema-based documents, joining the <code class="codeph">RESOURCE_VIEW</code> or <code class="codeph">PATH_VIEW</code> with the default table is more efficient than using the <code class="codeph">RESOURCE_VIEW</code> or <code class="codeph">PATH_VIEW</code> on its own. The explicit join between the resource document and the default table tells Oracle XML&nbsp;DB that the SQL statement works on only one type of XML document. This lets a partial update be used on the default table and resource.
                           </p>
                           <p>In <a href="accessing-XML-DB-repository-data.html#GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212__BJFDCAEH">Example 21-11</a>, XQuery Update is used on the default table, with the target row identified by a path. The row to be updated is identified by a <code class="codeph">REF</code>. The <code class="codeph">REF</code> is identified by a repository path using Oracle SQL function <code class="codeph">equals_path</code>. This limits the update to the row corresponding to the resource identified by the specified path.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212__BJFDCAEH">
                           <p class="titleinexample">Example 21-11 Updating XML Schema-Based Documents in the Repository</p><pre class="pre codeblock"><code>UPDATE purchaseorder p
  SET p.OBJECT_VALUE =
    XMLQuery('copy $i := $p1 modify
                (for $j in $i/PurchaseOrder/<span class="bold">User</span>
                 return replace value of node $j with $p2)
              return $i'
             PASSING p.OBJECT_VALUE AS "p1", '<span class="bold">SBELL</span>' AS "p2" RETURNING CONTENT)
    WHERE <span class="bold">ref(p)</span> =
      (SELECT XMLCast(XMLQuery('declare default element namespace
                                  "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                                fn:data(/Resource/XMLRef)'
                               PASSING rv.RES RETURNING CONTENT) AS REF XMLType)
         FROM RESOURCE_VIEW rv
         WHERE <span class="bold">equals_path</span>(rv.RES,
                           '/home/QUINE/PurchaseOrders/2002/Mar/SBELL-2002100912333601PDT.xml')
               = 1);

SELECT XMLCast(XMLQuery('$p/PurchaseOrder/<span class="bold">User/text()</span>'
                        PASSING p.OBJECT_VALUE AS "p" RETURNING CONTENT)
               AS VARCHAR2(32))
  FROM purchaseorder p, RESOURCE_VIEW rv
  WHERE ref(p) = XMLCast(XMLQuery('declare default element namespace
                                "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                                fn:data(/Resource/XMLRef)' PASSING rv.RES RETURNING CONTENT)
                      AS REF XMLType)
    AND equals_path(rv.RES, '/home/QUINE/PurchaseOrders/2002/Mar/SBELL-2002100912333601PDT.xml')
        = 1;

XMLCAST(XMLQUERY('$P/PURCHASEO
------------------------------
<span class="bold">SBELL</span></code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA" title="You can use XQuery Update to update the content of any document stored in Oracle XML&nbsp;DB Repository. The content of the document can be modified by updating the resource document or by updating the default table that holds the content of the document.">Update of Repository Content Using SQL</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB4215"></a><a id="ADXDB4216"></a><a id="ADXDB4217"></a><a id="ADXDB4218"></a><a id="ADXDB4219"></a><a id="ADXDB4220"></a><a id="ADXDB4211"></a><div class="props_rev_3"><a id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B" name="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B"></a><h3 id="ADXDB-GUID-01E1ED75-26DF-440E-8751-E00FEED2544B" class="sect3"><span class="enumeration_section">21.11 </span>Querying Resources in RESOURCE_VIEW and PATH_VIEW
               </h3>
               <div>
                  <p>Examples here illustrate folder-restricted queries of the repository using <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code> together with Oracle SQL functions <code class="codeph">equals_path</code> and <code class="codeph">under_path</code>.
                  </p>
                  <div class="section">
                     <p>Oracle XML&nbsp;DB provides two Oracle SQL functions, <code class="codeph">equals_path</code> and <code class="codeph">under_path</code>, that you can use to perform <strong class="term">folder-restricted queries</strong>. Such queries limit SQL statements that operate on the <code class="codeph">RESOURCE_VIEW</code> or <code class="codeph">PATH_VIEW</code> to documents that are at a particular location in Oracle XML&nbsp;DB folder hierarchy. 
                     </p>
                     <p>Function <code class="codeph">equals_path</code> restricts the statement to a single document identified by the specified path. Function <code class="codeph">under_path</code> restricts the statement to those documents that exist beneath a certain point in the hierarchy.
                     </p>
                     <p>Examples here demonstrate simple folder-restricted queries against resource documents stored in <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code>.
                     </p>
                     <p>The query in <a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__CHDHIAJB">Example 21-12</a> uses SQL function <code class="codeph">equals_path</code> and <code class="codeph">RESOURCE_VIEW</code> to access a resource. The resource queried is that which results from the update operation of <a href="accessing-XML-DB-repository-data.html#GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEDJDH">Example 21-9</a>: the original resource text shown in <a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFIEFDJ">Example 21-4</a> and <a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFHICEA">Example 21-5</a> has been replaced by a different nursery rhyme, "Hickory Dickory Dock..."
                     </p>
                     <p>As <a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__CHDHIAJB">Example 21-12</a> shows, a resource document is an XML document that captures the set of metadata defined by the DAV standard. The metadata includes information such as <code class="codeph">CreationDate</code>, <code class="codeph">Creator</code>, <code class="codeph">Owner</code>, <code class="codeph">ModificationDate</code>, and <code class="codeph">DisplayName</code>. The content of the resource document can be queried and updated just like any other XML document, using SQL/XML access and query functions. 
                     </p>
                     <p>The query in <a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFBCHAC">Example 21-13</a> finds a path to each of the XSL stylesheets stored in Oracle XML&nbsp;DB Repository. It performs a search based on the <code class="codeph">DisplayName</code> ending in <code class="codeph">.xsl</code>.
                     </p>
                     <p>The query in <a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFGFGHC">Example 21-14</a> counts the number of resources (files and folders) under the path <code class="codeph">/home/QUINE/PurchaseOrders</code>. Using <code class="codeph">RESOURCE_VIEW</code> rather than <code class="codeph">PATH_VIEW</code> ensures that any resources that are the target of multiple links are only counted once. SQL function <code class="codeph">under_path </code>restricts the result set to documents that can be accessed using a path that starts from <code class="codeph">/home/QUINE/PurchaseOrders</code>.
                     </p>
                     <p>The query in <a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFFIEGC">Example 21-15</a> lists the contents of the folder identified by path <code class="codeph">/home/QUINE/PurchaseOrders/2002/Apr</code>. This is effectively a directory listing of the folder.
                     </p>
                     <p>The query in <a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFEJJHH">Example 21-16</a> lists the set of links contained in the folder identified by the path <code class="codeph">/home/QUINE/PurchaseOrders/2002/Apr</code> where the <code class="codeph">DisplayName</code> element in the associated resource starts with <code class="codeph">S</code>.
                     </p>
                     <p>The query in <a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFEFHEJ">Example 21-17</a> finds a path to each resource in Oracle XML&nbsp;DB Repository that contains a <code class="codeph">PurchaseOrder</code> document. The documents are identified based on the metadata property <code class="codeph">SchemaElement</code> that identifies the XML schema URL and global element for schema-based XML data stored in the repository.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__CHDHIAJB">
                     <p class="titleinexample">Example 21-12 Accessing Resources Using EQUALS_PATH and RESOURCE_VIEW</p><pre class="pre codeblock"><code>SELECT XMLSerialize(DOCUMENT r.res AS CLOB)
  FROM RESOURCE_VIEW r
  WHERE equals_path(res, '/home/QUINE/NurseryRhyme.txt') = 1;
 
XMLSERIALIZE(DOCUMENTR.RESASCLOB)
--------------------------------------------------------------------------------
&lt;Resource xmlns="http://xmlns.oracle.com/xdb/XDBResource.xsd" 
          Hidden="false" 
          Invalid="false" 
          Container="false" 
          CustomRslv="false" 
          VersionHistory="false" 
          StickyRef="true"&gt;
  &lt;CreationDate&gt;2005-06-13T13:19:20.566623&lt;/CreationDate&gt;
  &lt;ModificationDate&gt;2005-06-13T13:19:22.997831&lt;/ModificationDate&gt;
  &lt;DisplayName&gt;NurseryRhyme.txt&lt;/DisplayName&gt;
  &lt;Language&gt;en-US&lt;/Language&gt;
  &lt;CharacterSet&gt;UTF-8&lt;/CharacterSet&gt;
  &lt;ContentType&gt;text/plain&lt;/ContentType&gt;
  &lt;RefCount&gt;1&lt;/RefCount&gt;
  &lt;ACL&gt;
    &lt;acl description=
         "Private:All privileges to OWNER only and not accessible to others"
         xmlns="http://xmlns.oracle.com/xdb/acl.xsd" xmlns:dav="DAV:"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd
         http://xmlns.oracle.com/xdb/acl.xsd"
         shared="true"&gt;
      &lt;ace&gt;
        &lt;grant&gt;true&lt;/grant&gt;
        &lt;principal&gt;dav:owner&lt;/principal&gt;
        &lt;privilege&gt;
          &lt;all/&gt;
        &lt;/privilege&gt;
      &lt;/ace&gt;
    &lt;/acl&gt;
  &lt;/ACL&gt;
  &lt;Owner&gt;QUINE&lt;/Owner&gt;
  &lt;Creator&gt;QUINE&lt;/Creator&gt;
  &lt;LastModifier&gt;QUINE&lt;/LastModifier&gt;
  &lt;SchemaElement&gt;http://xmlns.oracle.com/xdb/XDBSchema.xsd#text&lt;/SchemaElement&gt;
  &lt;Contents&gt;
    &lt;text&gt;Hickory Dickory Dock
The Mouse ran up the clock
The clock struck one
The Mouse ran down
Hickory Dickory Dock
    &lt;/text&gt;
  &lt;/Contents&gt;
&lt;/Resource&gt;
 
1 row selected.
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFBCHAC">
                     <p class="titleinexample">Example 21-13 Determining the Path to XSLT Stylesheets Stored in the Repository</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW
  WHERE XMLCast(XMLQuery(
                  'declare namespace ns="http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                   $r/ns:Resource/ns:DisplayName'
                  PASSING RES AS "r" RETURNING CONTENT)
                AS VARCHAR2(100))
        LIKE '%.xsl';
 
ANY_PATH
-------------------------------------------
/home/MDSYS/epsg/sdoepsggrid2nadcon.xsl
/home/MDSYS/epsg/sdoepsggrid2ntv2/xsl
/source/schemas/poSource/xsl/empdept.xsl
/source/schemas/poSource/xsl/purchaseOrder.xsl
 
4 rows selected.
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFGFGHC">
                     <p class="titleinexample">Example 21-14 Counting Resources Under a Path</p><pre class="pre codeblock"><code>SELECT count(*)
   FROM RESOURCE_VIEW
   WHERE under_path(RES, '/home/QUINE/PurchaseOrders') = 1;
 
  COUNT(*)
----------
       145

1 row selected.
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFFIEGC">
                     <p class="titleinexample">Example 21-15 Listing the Folder Contents in a Path</p><pre class="pre codeblock"><code>SELECT PATH
  FROM PATH_VIEW
  WHERE under_path(RES, '/home/QUINE/PurchaseOrders/2002/Apr') = 1;
 
PATH
----------------------------------------------------------------------
/home/QUINE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336171PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336271PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/EABEL-20021009123336251PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/PTUCKER-20021009123336191PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/PTUCKER-20021009123336291PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SBELL-20021009123336231PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SBELL-20021009123336331PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SKING-20021009123336321PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SMCCAIN-20021009123336151PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SMCCAIN-20021009123336341PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/VJONES-20021009123336301PDT.xml
 
11 rows selected.
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFEJJHH">
                     <p class="titleinexample">Example 21-16 Listing the Links Contained in a Folder</p><pre class="pre codeblock"><code>SELECT PATH
  FROM PATH_VIEW
  WHERE XMLCast(XMLQuery(
                  'declare namespace ns="http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                   $r/ns:Resource/ns:DisplayName'
                  PASSING RES AS "r" RETURNING CONTENT)
                AS VARCHAR2(100))
        LIKE 'S%'
    AND under_path(RES, '/home/QUINE/PurchaseOrders/2002/Apr') = 1;
 
PATH
----------------------------------------------------------------------
/home/QUINE/PurchaseOrders/2002/Apr/SBELL-20021009123336231PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SBELL-20021009123336331PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SKING-20021009123336321PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SMCCAIN-20021009123336151PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SMCCAIN-20021009123336341PDT.xml
 
5 rows selected.
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFEFHEJ">
                     <p class="titleinexample">Example 21-17 Finding Paths to Resources that Contain Purchase-Order XML Documents</p><pre class="pre codeblock"><code>SELECT ANY_PATH
  FROM RESOURCE_VIEW
 WHERE XMLExists(
         'declare namespace ns="http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
          $r/ns:Resource[ns:SchemaElement=
          "http://localhost:8080/source/schemas/poSource/xsd/purchaseOrder.xsd#PurchaseOrder"]'
         PASSING RES AS "r");</code></pre><p>The query returns the following paths, each of which contains a <code class="codeph">PurchaseOrder</code> document:
                     </p><pre class="oac_no_warn" dir="ltr">ANY_PATH
-----------------------------------------------------------------------
/home/QUINE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336171PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336271PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/EABEL-20021009123336251PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/PTUCKER-20021009123336191PDT.xml

<span class="bold">...</span>

132 rows selected.</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">Access to Oracle XML&nbsp;DB Repository Data</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4222"></a><a id="ADXDB4221"></a><div class="props_rev_3"><a id="GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D" name="GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D"></a><h3 id="ADXDB-GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D" class="sect3"><span class="enumeration_section">21.12 </span>Oracle XML&nbsp;DB Hierarchical Repository Index 
               </h3>
               <div>
                  <p>Oracle XML&nbsp;DB uses a hierarchical index for Oracle XML&nbsp;DB Repository, to optimize the performance of path-based and folder-restricted queries of the repository. It is implemented as an Oracle domain index.</p>
                  <p>In a conventional relational database, path-based access and folder-restricted queries are implemented using <code class="codeph">CONNECT BY</code> operations. Such queries are expensive, so path-based access and folder-restricted queries can become inefficient as the number of documents and depth of the folder hierarchy increases.
                  </p>
                  <p>To address this issue, Oracle XML&nbsp;DB introduces a new index type, the <strong class="term">hierarchical repository index</strong>. This lets the database resolve folder-restricted queries without relying on a <code class="codeph">CONNECT BY</code> operation. Because of this, Oracle XML&nbsp;DB can execute path-based and folder-restricted queries efficiently. The hierarchical repository index is implemented as an Oracle domain index. This is the same technique used to add Oracle Text indexing support and many other advanced index types to the database.
                  </p>
                  <p><a href="accessing-XML-DB-repository-data.html#GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D__BJFBDFAI">Example 21-18</a> shows the execution plan output generated for a folder-restricted query. As shown, the hierarchical repository index <code class="codeph">XDBHI_IDX</code> is used to resolve the query.
                  </p>
                  <div class="example" id="GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D__BJFBDFAI">
                     <p class="titleinexample">Example 21-18 Execution Plan Output for a Folder-Restricted Query</p><pre class="pre codeblock"><code>SELECT PATH
  FROM PATH_VIEW
  WHERE XMLCast(
          XMLQuery(
            'declare namespace ns="http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
             $r/ns:Resource/ns:DisplayName'
            PASSING RES AS "r" RETURNING CONTENT)
          AS VARCHAR2(100))
        LIKE 'S%'
    AND under_path(RES, '/home/QUINE/PurchaseOrders/2002/Apr') = 1;</code></pre><pre class="pre codeblock"><code> 
PLAN_TABLE_OUTPUT
------------------------------------------------------------------------------------------------------
Plan hash value: 2568289845
 
------------------------------------------------------------------------------------------------------
| Id  | Operation                            | Name          | Rows  | Bytes | Cost (%CPU)| Time     |
------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                     |               |    17 |  3111 |    34   (6)| 00:00:01 |
|   1 |  NESTED LOOPS                        |               |    17 |  3111 |    34   (6)| 00:00:01 |
|   2 |   NESTED LOOPS                       |               |    17 |  2822 |    34   (6)| 00:00:01 |
|   3 |    NESTED LOOPS                      |               |   466 | 63842 |    34   (6)| 00:00:01 |
|*  4 |     TABLE ACCESS BY INDEX ROWID      | XDB$RESOURCE  |     1 |   135 |     3   (0)| 00:00:01 |
|*  5 |      DOMAIN INDEX                    | <span class="bold">XDBHI_IDX</span>     |       |       |            |          |
|   6 |     COLLECTION ITERATOR PICKLER FETCH|               |       |       |            |          |
|*  7 |    INDEX UNIQUE SCAN                 | XDB_PK_H_LINK |     1 |    28 |     0   (0)| 00:00:01 |
|*  8 |   INDEX UNIQUE SCAN                  | SYS_C003900   |     1 |    17 |     0   (0)| 00:00:01 |
------------------------------------------------------------------------------------------------------
 
Predicate Information (identified by operation id):
---------------------------------------------------
 
   4 - filter(CAST("P"."SYS_NC00011$" AS VARCHAR2(100)) LIKE 'S%')
   5 - access("XDB"."UNDER_PATH"(SYS_MAKEXML('8758D485E6004793E034080020B242C6',734,"XMLEXTRA"
              ,"XMLDATA"),'/home/QUINE/PurchaseOrders/2002/Apr',9999)=1)
   7 - access("H"."PARENT_OID"=SYS_OP_ATG(VALUE(KOKBF$),3,4,2) AND
              "H"."NAME"=SYS_OP_ATG(VALUE(KOKBF$),2,3,2))
   8 - access("R2"."SYS_NC_OID$"=SYS_OP_ATG(VALUE(KOKBF$),3,4,2))
 
25 rows selected.</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW.">Access to Oracle XML&nbsp;DB Repository Data</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <hr><br><p style="text-decoration:underline">Footnote Legend</p>Footnote&nbsp;1: 
            <p>The graph is established by the hard links that define the repository structure, and cycles are not permitted using hard links. You can, however, introduce cycles using weak links. See <a href="accessing-XML-DB-repository-data.html#GUID-72981E53-0B60-4096-80E0-06A139086DED" title="Links that target repository resources can be hard or weak. Hard and weak links have different dependencies with respect to the resources that they target. Hard links cannot target ancestor folders; weak links can. You can query the repository path view, PATH_VIEW, to determine the type of a repository link.">Hard Links and Weak Links</a>.
            </p><br>Footnote&nbsp;2: 
            <p>Repository folder <code class="codeph">/dbfs</code> gives you protocol access to your DBFS content. See <a href="../adlob/using-DBFS.html#ADLOB0006" target="_blank"><span><cite>Oracle Database SecureFiles and Large Objects Developer's Guide</cite></span></a> for information about DBFS. 
            </p><br></div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Become familiar with CONTEXT and CTXCAT grammars.">
      <meta name="description" content="Become familiar with CONTEXT and CTXCAT grammars.">
      <title>Working with CONTEXT and CTXCAT Grammars in Oracle Text</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Application Developer's Guide ">
      <meta property="og:description" content="Become familiar with CONTEXT and CTXCAT grammars.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Application Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96275-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="querying-with-oracle-text.html" title="Previous" type="text/html">
      <link rel="next" href="presenting-documents-in-oracle-text.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer's Guide">
    <meta name="dcterms.isVersionOf" content="CCAPP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="querying-with-oracle-text.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="presenting-documents-in-oracle-text.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Application Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Working with CONTEXT and CTXCAT Grammars in Oracle Text</li>
            </ol>
            <a id="GUID-2A6DC2A0-5C9D-4D5C-BC70-29F35855DBCD" name="GUID-2A6DC2A0-5C9D-4D5C-BC70-29F35855DBCD"></a>
            
            <h2 id="CCAPP-GUID-2A6DC2A0-5C9D-4D5C-BC70-29F35855DBCD" class="sect2"><span class="enumeration_chapter">7 </span>Working with CONTEXT and CTXCAT Grammars in Oracle Text
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Become familiar with CONTEXT and CTXCAT grammars.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-7070C025-54E1-4FBB-8585-1FCBD525927D">The CONTEXT Grammar</a></p>
                  </li>
                  <li>
                     <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016">The CTXCAT Grammar</a></p>
                  </li>
               </ul>
            </div><a id="CCAPP9172"></a><div class="props_rev_3"><a id="GUID-7070C025-54E1-4FBB-8585-1FCBD525927D" name="GUID-7070C025-54E1-4FBB-8585-1FCBD525927D"></a><h3 id="CCAPP-GUID-7070C025-54E1-4FBB-8585-1FCBD525927D" class="sect3"><span class="enumeration_section">7.1 </span>The CONTEXT Grammar
               </h3>
               <div>
                  <p>The <code class="codeph">CONTEXT</code> grammar is the default grammar for <code class="codeph">CONTAINS</code>. With this grammar, you can add complexity to your searches with operators. You use the query operators in your query expression. For example, the <code class="codeph">AND</code> logical operator enables you to search for all documents that contain two different words. The <code class="codeph">ABOUT</code> operator enables you to search on concepts. 
                  </p>
                  <p>You can also use the <code class="codeph">WITHIN</code> operator for section searches; the <code class="codeph">NEAR</code> operator for proximity searches; and the stem, fuzzy, and thesaurus operators for expanding a query expression.
                  </p>
                  <p>With <code class="codeph">CONTAINS,</code> you can also use the <code class="codeph">CTXCAT</code> grammar with the query template feature.
                  </p>
                  <p>The following sections describe some of the Oracle Text operators:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-18C52687-1073-411F-AF1E-64B337A83D07">ABOUT Query </a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-1C246D2B-362F-458B-A185-2FD95D1E1526">Logical Operators</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-D861DECF-0806-455E-86E4-80F47194010B">Section Searching and HTML and XML</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-E2BD5F4A-8B1D-472C-BB8B-C8A18C6E1915">Proximity Queries with NEAR, NEAR_ACCUM, and NEAR2 Operators</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-205D27ED-D56B-4E91-AD86-7202CE53BCD4">Fuzzy, Stem, Soundex, Wildcard and Thesaurus Expansion Operators</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-9D770A11-6EF1-449B-815B-99D5297BCFB3">Using CTXCAT Grammar</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-45028739-AA18-4D55-B03A-22644EC2FAC0">Stored Query Expressions</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-F32E7A4D-0553-464B-8F53-0929AED185C0">Calling PL/SQL Functions in CONTAINS</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-51035E4B-CB25-48CE-8196-3C5E859CEE00">Optimizing for Response Time</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-246DE264-3FE9-4FC0-A2DB-C12D410A187B">Counting Hits</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-2E1DB163-02FE-4B2E-AF28-0C33E09926BE">Using DEFINESCORE and DEFINEMERGE for User-defined Scoring</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-7070C025-54E1-4FBB-8585-1FCBD525927D__GUID-2EC485FC-2700-4248-8394-F9A97868821D">
                     <p class="notep1">See Also:</p>
                     <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0300" target="_blank"><span class="italic">Oracle Text Reference</span></a> for complete information about using query operators
                     </p>
                  </div>
               </div><a id="CCAPP9173"></a><div class="props_rev_3"><a id="GUID-18C52687-1073-411F-AF1E-64B337A83D07" name="GUID-18C52687-1073-411F-AF1E-64B337A83D07"></a><h4 id="CCAPP-GUID-18C52687-1073-411F-AF1E-64B337A83D07" class="sect4"><span class="enumeration_section">7.1.1 </span>ABOUT Query 
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">ABOUT</code> operator in English or French to query on a concept. The query string is usually a concept or theme that represents the idea to be searched on. Oracle Text returns the documents that contain the theme.
                     </p>
                     <p>Word information and theme information are combined into a single index. To enter a theme query in your index, you must include that is created by default in English and French.</p>
                     <p>Enter a theme query by using the <code class="codeph">ABOUT</code> operator inside the query expression. For example, to retrieve all documents that are about <span class="italic">politics</span>, write your query as follows:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT SCORE(1), title FROM news 
           WHERE CONTAINS(text, 'about(politics)', 1) &gt; 0
           ORDER BY SCORE(1) DESC;</pre><div class="infoboxnotealso" id="GUID-18C52687-1073-411F-AF1E-64B337A83D07__GUID-D7A960C3-D03A-43E1-9C95-3E37102A0AD4">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0301" target="_blank"><span class="italic">Oracle Text Reference</span></a> for more information about using the <code class="codeph">ABOUT</code> operator
                        </p>
                     </div>
                  </div>
               </div><a id="CCAPP9504"></a><a id="CCAPP9174"></a><div class="props_rev_3"><a id="GUID-1C246D2B-362F-458B-A185-2FD95D1E1526" name="GUID-1C246D2B-362F-458B-A185-2FD95D1E1526"></a><h4 id="CCAPP-GUID-1C246D2B-362F-458B-A185-2FD95D1E1526" class="sect4"><span class="enumeration_section">7.1.2 </span>Logical Operators
                  </h4>
                  <div>
                     <p>Use logical operators to limit your search criteria in a number of ways. <a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-1C246D2B-362F-458B-A185-2FD95D1E1526__BABGJGCB" title="This table describes logical operators.">Table 7-1</a> describes some of these operators. 
                     </p>
                     <div class="tblformal" id="GUID-1C246D2B-362F-458B-A185-2FD95D1E1526__BABGJGCB">
                        <p class="titleintable">Table 7-1 Logical Operators</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Logical Operators" summary="This table describes logical operators." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d19592e431">Operator</th>
                                 <th align="left" valign="bottom" width="14%" id="d19592e434">Symbol</th>
                                 <th align="left" valign="bottom" width="29%" id="d19592e437">Description</th>
                                 <th align="left" valign="bottom" width="43%" id="d19592e440">Example Expression</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d19592e445" headers="d19592e431 ">
                                    <p><code class="codeph">AND</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d19592e445 d19592e434 ">
                                    <p>&amp;</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d19592e445 d19592e437 ">
                                    <p>Use to search for documents that contain at least one occurrence of <span class="italic">each</span> of the query terms.
                                    </p>
                                    <p>The returned score is the minimum of the operands.</p>
                                 </td>
                                 <td align="left" valign="top" width="43%" headers="d19592e445 d19592e440 "><pre class="oac_no_warn" dir="ltr">'cats AND dogs'
'cats &amp; dogs'</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d19592e464" headers="d19592e431 ">
                                    <p><code class="codeph">OR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d19592e464 d19592e434 ">
                                    <p>|</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d19592e464 d19592e437 ">
                                    <p>Use to search for documents that contain at least one occurrence of <span class="italic">any</span> of the query terms.
                                    </p>
                                    <p>The returned score is the maximum of the operands.</p>
                                 </td>
                                 <td align="left" valign="top" width="43%" headers="d19592e464 d19592e440 "><pre class="oac_no_warn" dir="ltr">'cats | dogs'
'cats OR dogs'
</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d19592e483" headers="d19592e431 ">
                                    <p><code class="codeph">NOT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d19592e483 d19592e434 ">
                                    <p>~</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d19592e483 d19592e437 ">
                                    <p>Use to search for documents that contain one query term and not another.</p>
                                 </td>
                                 <td align="left" valign="top" width="43%" headers="d19592e483 d19592e440 ">
                                    <p>To obtain the documents that contain the term <span class="italic">animals </span>but not <span class="italic">dogs,</span> use the following expression:
                                    </p><pre class="oac_no_warn" dir="ltr">'animals ~ dogs'</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d19592e505" headers="d19592e431 ">
                                    <p><code class="codeph">ACCUM</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d19592e505 d19592e434 ">
                                    <p>,</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d19592e505 d19592e437 ">
                                    <p>Use to search for documents that contain at least one occurrence of any of the query terms. The accumulate operator ranks documents according to the total term weight of a document.</p>
                                 </td>
                                 <td align="left" valign="top" width="43%" headers="d19592e505 d19592e440 ">
                                    <p>The following query returns all documents that contain the terms <span class="italic">dogs, cats,</span> and <span class="italic">puppies,</span> giving the highest scores to the documents that contain all three terms:
                                    </p><pre class="oac_no_warn" dir="ltr">'dogs, cats, puppies'</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d19592e527" headers="d19592e431 ">
                                    <p><code class="codeph">EQUIV</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d19592e527 d19592e434 ">
                                    <p>=</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d19592e527 d19592e437 ">
                                    <p>Use to specify an acceptable substitution for a word in a query.</p>
                                 </td>
                                 <td align="left" valign="top" width="43%" headers="d19592e527 d19592e440 ">
                                    <p>The following example returns all documents that contain either the phrase <span class="italic">alsatians are big dogs</span> or <span class="italic">German shepherds are big dogs:</span></p><pre class="oac_no_warn" dir="ltr">'German shepherds=alsatians are big dogs'</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="CCAPP9175"></a><div class="props_rev_3"><a id="GUID-D861DECF-0806-455E-86E4-80F47194010B" name="GUID-D861DECF-0806-455E-86E4-80F47194010B"></a><h4 id="CCAPP-GUID-D861DECF-0806-455E-86E4-80F47194010B" class="sect4"><span class="enumeration_section">7.1.3 </span>Section Searching and HTML and XML
                  </h4>
                  <div>
                     <p><a id="d19592e611" class="indexterm-anchor"></a>Section searching is useful when your document set is HTML or XML. For HTML, you can define sections by using embedded tags and then use the <code class="codeph">WITHIN</code> operator to search these sections.
                     </p>
                     <p>For XML, you can have the system automatically create sections. You can query with the <code class="codeph">WITHIN</code> operator or with the <code class="codeph">INPATH</code> operator for path searching.
                     </p>
                     <div class="infoboxnotealso" id="GUID-D861DECF-0806-455E-86E4-80F47194010B__GUID-80FD723C-DC7C-4547-B024-209148DEE189">
                        <p class="notep1">See Also:</p>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-9455DBD9-2C23-4CB0-A3C5-FB8B2033516A" title="You can use document sections in a text query application."> Searching Document Sections in Oracle Text</a></p>
                     </div>
                  </div>
               </div><a id="CCAPP9550"></a><div class="props_rev_3"><a id="GUID-E2BD5F4A-8B1D-472C-BB8B-C8A18C6E1915" name="GUID-E2BD5F4A-8B1D-472C-BB8B-C8A18C6E1915"></a><h4 id="CCAPP-GUID-E2BD5F4A-8B1D-472C-BB8B-C8A18C6E1915" class="sect4"><span class="enumeration_section">7.1.4 </span>Proximity Queries with NEAR, NEAR_ACCUM, and NEAR2 Operators
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">NEAR</code> operator to search for terms that are near to one another in a document.
                     </p>
                     <p>For example, to find all the documents where <span class="italic">dog</span> is within 6 words of <span class="italic">cat,</span> enter the following query:
                     </p><pre class="oac_no_warn" dir="ltr">'near((dog, cat), 6)'
</pre><p>The <code class="codeph">NEAR</code> operator is now modified to change how the distance is measured between phrases in <code class="codeph">NESTED NEAR.</code></p>
                     <p>The <code class="codeph">NEAR_ACCUM</code> operator combines the functionality of the <code class="codeph">NEAR</code> operator with that of the <code class="codeph">ACCUM</code> operator. Like <code class="codeph">NEAR,</code> it returns terms that are within a given proximity of each other; however, if one term is not found, it ranks documents according to the frequency of the occurrence of the term that is found.
                     </p>
                     <p>The <code class="codeph">NEAR2</code> operator combines the functionality of <code class="codeph">PHRASE,</code> <code class="codeph">NEAR,</code> and <code class="codeph">AND</code> operators. In addition, the <code class="codeph">NEAR2</code> operator can use position information to boost the scores of its hits. That is, if one phrase hit occurs at the beginning of a document and another at the end of the document, then a higher weight is given to the first hit as compared to the second hit. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-E2BD5F4A-8B1D-472C-BB8B-C8A18C6E1915__GUID-077B84B3-6633-479C-B89B-39C4ED70F7F8">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0313" target="_blank"><span class="italic">Oracle Text Reference</span></a> for more information about using the <code class="codeph">NEAR</code>, <code class="codeph">NEAR_ACCUM</code>, and <code class="codeph">NEAR2</code> operators
                        </p>
                     </div>
                  </div>
               </div><a id="CCAPP9177"></a><div class="props_rev_3"><a id="GUID-205D27ED-D56B-4E91-AD86-7202CE53BCD4" name="GUID-205D27ED-D56B-4E91-AD86-7202CE53BCD4"></a><h4 id="CCAPP-GUID-205D27ED-D56B-4E91-AD86-7202CE53BCD4" class="sect4"><span class="enumeration_section">7.1.5 </span>Fuzzy, Stem, Soundex, Wildcard and Thesaurus Expansion Operators
                  </h4>
                  <div>
                     <p>Expand your queries into longer word lists with operators such as wildcard, fuzzy, stem, soundex, and thesaurus.</p>
                     <div class="infoboxnotealso" id="GUID-205D27ED-D56B-4E91-AD86-7202CE53BCD4__GUID-708C6AD2-8316-4168-914D-904AF47128BC">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0300" target="_blank"><span class="italic">Oracle Text Reference</span></a> for more information about using these operators
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="tuning-oracle-text.html#GUID-7E174101-D66D-43E9-9A8B-69EBA73F6502">Is it OK to have many expansions in a query?</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CCAPP9178"></a><div class="props_rev_3"><a id="GUID-9D770A11-6EF1-449B-815B-99D5297BCFB3" name="GUID-9D770A11-6EF1-449B-815B-99D5297BCFB3"></a><h4 id="CCAPP-GUID-9D770A11-6EF1-449B-815B-99D5297BCFB3" class="sect4"><span class="enumeration_section">7.1.6 </span>Using CTXCAT Grammar
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">CTXCAT</code> grammar in <code class="codeph">CONTAINS</code> queries. To do so, use a query template specification in the <code class="codeph">text_query</code> parameter of <code class="codeph">CONTAINS.</code></p>
                     <p>Take advantage of the <code class="codeph">CTXCAT</code> grammar when you need an alternative and simpler query grammar.
                     </p>
                     <div class="infoboxnotealso" id="GUID-9D770A11-6EF1-449B-815B-99D5297BCFB3__GUID-256826D3-2B94-4B09-A189-324516842D50">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF0104" target="_blank"><span class="italic">Oracle Text Reference</span></a> for more information about using these operators
                        </p>
                     </div>
                  </div>
               </div><a id="CCAPP9179"></a><div class="props_rev_3"><a id="GUID-45028739-AA18-4D55-B03A-22644EC2FAC0" name="GUID-45028739-AA18-4D55-B03A-22644EC2FAC0"></a><h4 id="CCAPP-GUID-45028739-AA18-4D55-B03A-22644EC2FAC0" class="sect4"><span class="enumeration_section">7.1.7 </span>Defined Stored Query Expressions
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">CTX_QUERY.STORE_SQE</code> procedure to store the definition of a query without storing any results. Referencing the query with the <code class="codeph">CONTAINS</code> SQL operator references the definition of the query. In this way, stored query expressions make it easy to define long or frequently used query expressions. 
                     </p>
                     <p>Stored query expressions are not attached to an index. When you call <code class="codeph">CTX_QUERY.STORE_SQE,</code> you specify only the name of the stored query expression and the query expression.
                     </p>
                     <p>The query definitions are stored in the Text data dictionary. Any user can reference a stored query expression.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-64145B72-2EED-486C-861F-25FECC27DE75">Defining a Stored Query Expression</a></p>
                        </li>
                        <li>
                           <p><a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-A5CF4C43-0207-48B1-A24F-DEDB804A6F3F">SQE Example</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-45028739-AA18-4D55-B03A-22644EC2FAC0__GUID-078BEB19-F21D-447C-A2B5-236251678C84">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/CTX_QUERY-package.html#CCREF0912" target="_blank"><span class="italic">Oracle Text Reference</span></a> to learn more about the syntax of <code class="codeph">CTX_QUERY.STORE_SQE</code></p>
                     </div>
                  </div><a id="CCAPP9180"></a><div class="props_rev_3"><a id="GUID-64145B72-2EED-486C-861F-25FECC27DE75" name="GUID-64145B72-2EED-486C-861F-25FECC27DE75"></a><h5 id="CCAPP-GUID-64145B72-2EED-486C-861F-25FECC27DE75" class="sect5"><span class="enumeration_section">7.1.7.1 </span>Defining a Stored Query Expression
                     </h5>
                     <div>
                        <div class="section">
                           <p>To define and use a <a id="d19592e1124" class="indexterm-anchor"></a>stored query expression:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Call <code class="codeph">CTX_QUERY.STORE_SQE</code> to store the queries for the text column. With <code class="codeph">STORE_SQE,</code> you specify a name for the stored query expression and a query expression. </span></li>
                           <li class="stepexpand"><span>Use the <code class="codeph">SQE</code> operator to call the stored query expression in a query expression. Oracle Text returns the results of the stored query expression in the same way that it returns the results of a regular query. The query is evaluated when the stored query expression is called.</span><div>
                                 <p>You can delete a stored query expression by using <code class="codeph">REMOVE_SQE.</code></p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="CCAPP9181"></a><div class="props_rev_3"><a id="GUID-A5CF4C43-0207-48B1-A24F-DEDB804A6F3F" name="GUID-A5CF4C43-0207-48B1-A24F-DEDB804A6F3F"></a><h5 id="CCAPP-GUID-A5CF4C43-0207-48B1-A24F-DEDB804A6F3F" class="sect5"><span class="enumeration_section">7.1.7.2 </span>SQE Example
                     </h5>
                     <div>
                        <p>The following example creates a stored query expression called <span class="italic">disaster</span> that searches for documents containing the words <span class="italic">tornado, hurricane,</span> or <span class="italic">earthquake:</span></p><pre class="oac_no_warn" dir="ltr">begin
ctx_query.store_sqe('disaster', 'tornado | hurricane | earthquake');
end;
</pre><p>To execute this query in an expression, write your query as follows:</p><pre class="oac_no_warn" dir="ltr">SELECT SCORE(1), title from news 
   WHERE CONTAINS(text, 'SQE(disaster)', 1) &gt; 0
   ORDER BY SCORE(1);</pre><div class="infoboxnotealso" id="GUID-A5CF4C43-0207-48B1-A24F-DEDB804A6F3F__GUID-C2AD4E10-EF88-43D6-8CCF-CCA3B98F7387">
                           <p class="notep1">See Also:</p>
                           <p><a href="../ccref/CTX_QUERY-package.html#CCREF0912" target="_blank"><span class="italic">Oracle Text Reference</span></a> to learn more about the syntax of <code class="codeph">CTX_QUERY.STORE_SQE</code></p>
                        </div>
                     </div>
                  </div>
               </div><a id="CCAPP9182"></a><div class="props_rev_3"><a id="GUID-F32E7A4D-0553-464B-8F53-0929AED185C0" name="GUID-F32E7A4D-0553-464B-8F53-0929AED185C0"></a><h4 id="CCAPP-GUID-F32E7A4D-0553-464B-8F53-0929AED185C0" class="sect4"><span class="enumeration_section">7.1.8 </span>Calling PL/SQL Functions in CONTAINS
                  </h4>
                  <div>
                     <p>You can call user-defined functions directly in the <code class="codeph">CONTAINS</code> clause as long as the function satisfies the requirements for being named in a SQL statement. The caller must also have <code class="codeph">EXECUTE</code> privilege on the function. 
                     </p>
                     <p>For example, if the <code class="codeph">french</code> function returns the French equivalent of an English word, you can search on the French word for <span class="italic">cat</span> by writing:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT SCORE(1), title from news 
   WHERE CONTAINS(text, french('cat'), 1) &gt; 0
   ORDER BY SCORE(1);</pre><div class="infoboxnotealso" id="GUID-F32E7A4D-0553-464B-8F53-0929AED185C0__GUID-CCE0573F-88BD-49E6-83B7-89BE2EDCBA18">
                        <p class="notep1">See Also:</p>
                        <p><a href="../sqlrf/About-User-Defined-Functions.html#SQLRF-GUID-4EB3E236-8216-471C-BA44-23D87BDFEA67" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about creating user functions and calling user functions from SQL 
                        </p>
                     </div>
                  </div>
               </div><a id="CCAPP9183"></a><div class="props_rev_3"><a id="GUID-51035E4B-CB25-48CE-8196-3C5E859CEE00" name="GUID-51035E4B-CB25-48CE-8196-3C5E859CEE00"></a><h4 id="CCAPP-GUID-51035E4B-CB25-48CE-8196-3C5E859CEE00" class="sect4"><span class="enumeration_section">7.1.9 </span>Optimizing for Response Time
                  </h4>
                  <div>
                     <p>A <code class="codeph">CONTAINS</code> query optimized for response time provides a fast solution when you need the highest scoring documents from a hitlist. 
                     </p>
                     <p>The following example returns the first twenty hits as output. This example uses the <code class="codeph">FIRST_ROWS</code>(n) hint and a cursor.
                     </p><pre class="oac_no_warn" dir="ltr">declare 
cursor c is  
  select /*+ FIRST_ROWS(20) */ title, score(1) score 
    from news where contains(txt_col, 'dog', 1) &gt; 0 order by score(1) desc; 
begin 
  for c1 in c 
  loop 
    dbms_output.put_line(c1.score||':'||substr(c1.title,1,50)); 
    exit when c%rowcount = 21; 
  end loop; 
end; 
/
</pre><p>The following factors can also influence query response time:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Collection of table statistics</p>
                        </li>
                        <li>
                           <p>Memory allocation</p>
                        </li>
                        <li>
                           <p>Sorting</p>
                        </li>
                        <li>
                           <p>Presence of large object columns in your base table</p>
                        </li>
                        <li>
                           <p>Partitioning</p>
                        </li>
                        <li>
                           <p>Parallelism</p>
                        </li>
                        <li>
                           <p>Number of term expansions in your query</p>
                           <div class="infoboxnotealso" id="GUID-51035E4B-CB25-48CE-8196-3C5E859CEE00__GUID-28B76A9E-A57D-4B91-B1CE-345F90EF9183">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="tuning-oracle-text.html#GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3">Frequently Asked Questions About Query Performance</a>"</span></p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="CCAPP9185"></a><div class="props_rev_3"><a id="GUID-246DE264-3FE9-4FC0-A2DB-C12D410A187B" name="GUID-246DE264-3FE9-4FC0-A2DB-C12D410A187B"></a><h4 id="CCAPP-GUID-246DE264-3FE9-4FC0-A2DB-C12D410A187B" class="sect4"><span class="enumeration_section">7.1.10 </span>Counting Hits
                  </h4>
                  <div>
                     <p>Use <code class="codeph">CTX_QUERY.COUNT_HITS</code> in PL/SQL or <code class="codeph">COUNT(*)</code> in a SQL <code class="codeph">SELECT</code> statement to count the number of hits returned from a query with only a <code class="codeph">CONTAINS</code> predicate.
                     </p>
                     <p>If you want a rough hit count, use <code class="codeph">CTX_QUERY.COUNT_HITS</code> in estimate mode (<code class="codeph">EXACT</code> parameter set to <code class="codeph">FALSE</code>). With respect to response time, this is the fastest count you can get.
                     </p>
                     <p>Use the <code class="codeph">COUNT(*)</code> function in a <code class="codeph">SELECT</code> statement to count the number of hits returned from a query that contains a structured predicate.
                     </p>
                     <p>To find the number of documents that contain the word <span class="italic">oracle</span>, enter the query with the <code class="codeph">SQL COUNT</code> function.
                     </p><pre class="oac_no_warn" dir="ltr">SELECT count(*) FROM news WHERE CONTAINS(text, 'oracle', 1) &gt; 0;</pre><p>To find the number of documents returned by a query with a structured predicate, use <code class="codeph">COUNT(*).</code></p><pre class="oac_no_warn" dir="ltr">SELECT COUNT(*) FROM news WHERE CONTAINS(text, 'oracle', 1) &gt; 0 and author = 'jones';</pre><p>To find the number of documents that contain the word <span class="italic">oracle</span>, use <code class="codeph">COUNT_HITS.</code></p><pre class="oac_no_warn" dir="ltr">declare count number;
begin
  count := ctx_query.count_hits(index_name =&gt; my_index, text_query =&gt; 'oracle', exact =&gt; TRUE);
 dbms_output.put_line('Number of docs with oracle:');
 dbms_output.put_line(count);
end;</pre><div class="infoboxnotealso" id="GUID-246DE264-3FE9-4FC0-A2DB-C12D410A187B__GUID-3E1EB8C9-197C-43A4-9968-3F45B5E9E849">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/CTX_QUERY-package.html#CCREF-GUID-E7FF0A48-E048-4187-A68D-17BD8387F3CF" target="_blank"><span class="italic">Oracle Text Reference</span></a> to learn more about the syntax of <code class="codeph">CTX_QUERY.COUNT_HITS</code></p>
                     </div>
                  </div>
               </div><a id="CCAPP9189"></a><div class="props_rev_3"><a id="GUID-2E1DB163-02FE-4B2E-AF28-0C33E09926BE" name="GUID-2E1DB163-02FE-4B2E-AF28-0C33E09926BE"></a><h4 id="CCAPP-GUID-2E1DB163-02FE-4B2E-AF28-0C33E09926BE" class="sect4"><span class="enumeration_section">7.1.11 </span>Using DEFINESCORE and DEFINEMERGE for User-Defined Scoring
                  </h4>
                  <div>
                     <p>Use the <a id="d19592e1648" class="indexterm-anchor"></a><code class="codeph">DEFINESCORE</code> operator to define how the score for a term or phrase is to be calculated. The <a id="d19592e1653" class="indexterm-anchor"></a><code class="codeph">DEFINEMERGE</code> operator defines how to merge scores of child elements of <code class="codeph">AND</code> and <code class="codeph">OR</code> operators. You can also use the alternative scoring template with <code class="codeph">SDATA</code> to affect the final scoring of the document. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-2E1DB163-02FE-4B2E-AF28-0C33E09926BE__GUID-710D3BBF-2DEF-419D-800A-4976F1D3BD35">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="querying-with-oracle-text.html#GUID-89EAF7C5-AFB6-469E-8948-7F7A66DBBBB4">Alternative and User-defined Scoring</a>"</span> for information about the alternative scoring template
                              </p>
                           </li>
                           <li>
                              <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF-GUID-F6773261-6BA0-4F99-A865-E2E3D827D058" target="_blank"><span class="italic">Oracle Text Reference</span></a> to learn more about the syntax of <code class="codeph">DEFINESCORE</code> and <code class="codeph">DEFINEMERGE</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CCAPP9505"></a><a id="CCAPP9190"></a><div class="props_rev_3"><a id="GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016" name="GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016"></a><h3 id="CCAPP-GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016" class="sect3"><span class="enumeration_section">7.2 </span>The CTXCAT Grammar
               </h3>
               <div>
                  <p>The <code class="codeph">CTXCAT</code> grammar is the default grammar for <code class="codeph">CATSEARCH.</code> This grammar supports logical operations, such as <code class="codeph">AND</code> and <code class="codeph">OR,</code> as well as phrase queries. 
                  </p>
                  <p>The <code class="codeph">CATSEARCH</code> query operators have the following syntax:
                  </p>
                  <div class="tblformal" id="GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016__GUID-ECD647BE-A1A0-4726-B7EC-5929D5BBA649">
                     <p class="titleintable">Table 7-2 CATSEARCH Query Operator Syntax</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="CATSEARCH Query Operator Syntax" summary="This table shows the various CATSEARCH query operators and shows how each works." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d19592e1800">Operation</th>
                              <th align="left" valign="bottom" width="19%" id="d19592e1803">Syntax</th>
                              <th align="left" valign="bottom" width="50%" id="d19592e1806">Description of Operation</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19592e1811" headers="d19592e1800 ">
                                 <p>Logical <code class="codeph">AND</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d19592e1811 d19592e1803 ">
                                 <p>a b c</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d19592e1811 d19592e1806 ">
                                 <p>Returns rows that contain a, b and c.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19592e1823" headers="d19592e1800 ">
                                 <p>Logical <code class="codeph">OR</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d19592e1823 d19592e1803 ">
                                 <p>a | b | c</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d19592e1823 d19592e1806 ">
                                 <p>Returns rows that contain a, b, or c.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19592e1835" headers="d19592e1800 ">
                                 <p>Logical <code class="codeph">NOT</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d19592e1835 d19592e1803 ">
                                 <p>a - b</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d19592e1835 d19592e1806 ">
                                 <p>Returns rows that contain a and not b.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19592e1847" headers="d19592e1800 ">
                                 <p>hyphen with no space</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d19592e1847 d19592e1803 ">
                                 <p>a-b</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d19592e1847 d19592e1806 ">
                                 <p>Hyphen treated as a regular character. </p>
                                 <p>For example, if you define the hyphen as a skipjoin, then words such as <span class="italic">vice-president</span> are treated as the single query term <span class="italic">vicepresident.</span></p>
                                 <p>Likewise, if you define the hyphen as a printjoin, then words such as <span class="italic">vice-president</span> are treated as <span class="italic">vice president</span> with the space in the <code class="codeph">CTXCAT</code> query language.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19592e1875" headers="d19592e1800 ">
                                 <p>" "</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d19592e1875 d19592e1803 ">
                                 <p>"a b c"</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d19592e1875 d19592e1806 ">
                                 <p>Returns rows that contain the phrase "a b c."</p>
                                 <p>For example, entering "Sony CD Player" means return all rows that contain this sequence of words.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19592e1887" headers="d19592e1800 ">
                                 <p>( )</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d19592e1887 d19592e1803 ">
                                 <p>(A B) | C</p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d19592e1887 d19592e1806 ">
                                 <p>Parentheses group operations. This query is equivalent to the <code class="codeph">CONTAINS</code> query (A &amp;B) | C.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><a id="d19592e1900" class="indexterm-anchor"></a><a id="d19592e1902" class="indexterm-anchor"></a>To use the <code class="codeph">CONTEXT</code> grammar in <code class="codeph">CATSEARCH</code> queries, use a query template specification in the <code class="codeph">text_query</code> parameter.
                  </p>
                  <p>You might use the <code class="codeph">CONTAINS</code> grammar as such when you need to enter proximity, thesaurus, or <code class="codeph">ABOUT</code> queries with a <code class="codeph">CTXCAT</code> index.
                  </p>
                  <div class="infoboxnotealso" id="GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016__GUID-B6FFB99A-3512-48E2-8519-AC101F83FB0A">
                     <p class="notep1">See Also:</p>
                     <p><a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF0103" target="_blank"><span class="italic">Oracle Text Reference</span></a> for more information about using these operators
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
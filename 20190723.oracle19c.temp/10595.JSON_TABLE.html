<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>JSON_TABLE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="JSON_SERIALIZE.html" title="Previous" type="text/html">
      <link rel="next" href="JSON_VALUE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="JSON_SERIALIZE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="JSON_VALUE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">Functions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">JSON_TABLE</li>
            </ol>
            <a id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62" name="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62"></a><a id="SQLRF56974"></a><a id="SQLRF56975"></a><a id="SQLRF56976"></a><a id="SQLRF56977"></a><a id="SQLRF56978"></a><a id="SQLRF56979"></a><a id="SQLRF56980"></a><a id="SQLRF56982"></a><a id="SQLRF56983"></a><a id="SQLRF56984"></a><a id="SQLRF56985"></a><a id="SQLRF56981"></a><a id="SQLRF56986"></a><a id="SQLRF56987"></a><a id="SQLRF57038"></a><a id="SQLRF56988"></a><a id="SQLRF56989"></a><a id="SQLRF56990"></a><a id="SQLRF57003"></a><a id="SQLRF57004"></a><a id="SQLRF57005"></a><a id="SQLRF57006"></a><a id="SQLRF57007"></a><a id="SQLRF56991"></a><a id="SQLRF57008"></a><a id="SQLRF57009"></a><a id="SQLRF57010"></a><a id="SQLRF57011"></a><a id="SQLRF57012"></a><a id="SQLRF56973"></a>
            
            <h2 id="SQLRF-GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62" class="sect2">JSON_TABLE</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-9C73F756-F171-4F42-A284-46EC63FA5590">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-75375237-6988-4A2C-A9FC-BC8878A788D7"><img src="img/json_table.gif" alt="Description of json_table.eps follows" title="Description of json_table.eps follows" longdesc="img_text/json_table.html"><br><a href="img_text/json_table.html">Description of the illustration json_table.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>: See <a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span class="italic">Oracle Database JSON Developer's Guide</span></a>, <span class="italic"><a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAGFDBA">JSON_table_on_error_clause::=</a></span>, <span class="italic"><a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAHEFGD">JSON_columns_clause::=</a></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAGFDBA">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-34D11972-60FB-4E25-A563-6210B81120E1"><span class="italic">JSON_table_on_error_clause</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-05394653-E45F-4D57-AC43-E91DAE77C958"><img src="img/json_table_on_error_clause.gif" alt="Description of json_table_on_error_clause.eps follows" title="Description of json_table_on_error_clause.eps follows" longdesc="img_text/json_table_on_error_clause.html"><br><a href="img_text/json_table_on_error_clause.html">Description of the illustration json_table_on_error_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAHEFGD">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-D8F23FBB-73EA-490D-B672-868356D8059E"><span class="italic">JSON_columns_clause</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-55EDF5D8-DF7E-447B-A138-08F5B239B64D"><img src="img/json_columns_clause.gif" alt="Description of json_columns_clause.eps follows" title="Description of json_columns_clause.eps follows" longdesc="img_text/json_columns_clause.html"><br><a href="img_text/json_columns_clause.html">Description of the illustration json_columns_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-2D611616-5671-4588-B627-170D1600181F"><span class="italic">JSON_column_definition</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-A37F992D-B575-47ED-B701-DF5293447D98"><img src="img/json_column_definition.gif" alt="Description of json_column_definition.eps follows" title="Description of json_column_definition.eps follows" longdesc="img_text/json_column_definition.html"><br><a href="img_text/json_column_definition.html">Description of the illustration json_column_definition.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-D9B31456-6C50-4461-A53F-7CA7C14C7714"><span class="italic">JSON_exists_column</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-AE750312-7E79-47D0-9BF5-01EA82B3A50F"><img src="img/json_exists_column.gif" alt="Description of json_exists_column.eps follows" title="Description of json_exists_column.eps follows" longdesc="img_text/json_exists_column.html"><br><a href="img_text/json_exists_column.html">Description of the illustration json_exists_column.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="JSON_VALUE.html#GUID-C7F19D36-1E75-4CB2-AE67-ADFBAD23CBC2__CJABCIJE">JSON_value_return_type::=</a></span>—part of <code class="codeph">JSON_VALUE</code>, <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>: See <a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span class="italic">Oracle Database JSON Developer's Guide</span></a>, <span class="italic"><a href="SQL-JSON-Conditions.html#GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__BABGJJFD">JSON_exists_on_error_clause::=</a></span>—part of <code class="codeph">JSON_EXISTS</code>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-664BE57E-A00C-4845-97EC-642E18B7A837"><span class="italic">JSON_query_column</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-4DC1B133-0AA7-41FA-8C41-6A5C6FF7B596"><img src="img/json_query_column.gif" alt="Description of json_query_column.eps follows" title="Description of json_query_column.eps follows" longdesc="img_text/json_query_column.html"><br><a href="img_text/json_query_column.html">Description of the illustration json_query_column.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="JSON_QUERY.html#GUID-6D396EC4-D2AA-43D2-8F5D-08D646A4A2D9__CJADJIIJ">JSON_query_return_type::=</a></span>, <span class="italic"><a href="JSON_QUERY.html#GUID-6D396EC4-D2AA-43D2-8F5D-08D646A4A2D9__CJAGGHHG">JSON_query_wrapper_clause::=</a></span>, and <span class="italic"><a href="JSON_QUERY.html#GUID-6D396EC4-D2AA-43D2-8F5D-08D646A4A2D9__CJACIDGJ">JSON_query_on_error_clause::=</a></span>—part of <code class="codeph">JSON_QUERY</code>, <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>: See <a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span class="italic">Oracle Database JSON Developer's Guide</span></a>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-291AE583-D115-4AEA-BC73-12AF6BFA3FE3"><span class="italic">JSON_value_column</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-5738B11C-CDF8-41B2-AD67-CDE3FBB46D26"><img src="img/json_value_column.gif" alt="Description of json_value_column.eps follows" title="Description of json_value_column.eps follows" longdesc="img_text/json_value_column.html"><br><a href="img_text/json_value_column.html">Description of the illustration json_value_column.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="JSON_VALUE.html#GUID-C7F19D36-1E75-4CB2-AE67-ADFBAD23CBC2__CJABCIJE">JSON_value_return_type::=</a></span> and <span class="italic"><a href="JSON_VALUE.html#GUID-C7F19D36-1E75-4CB2-AE67-ADFBAD23CBC2__CJAHCAIE">JSON_value_on_error_clause::=</a></span>—part of <code class="codeph">JSON_VALUE</code>, <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>: See <a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span class="italic">Oracle Database JSON Developer's Guide</span></a>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-6C19C26B-7293-4E0D-AC84-B4983EE71785"><span class="italic">JSON_nested_path</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-A55B53F3-D840-427E-9C82-81AA238A7390"><img src="img/json_nested_path.gif" alt="Description of json_nested_path.eps follows" title="Description of json_nested_path.eps follows" longdesc="img_text/json_nested_path.html"><br><a href="img_text/json_nested_path.html">Description of the illustration json_nested_path.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>: See <a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span class="italic">Oracle Database JSON Developer's Guide</span></a>, <span class="italic"><a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAHEFGD">JSON_columns_clause::=</a></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-C371E081-929F-4B2A-B5D5-F1960206A297"><span class="italic">ordinality_column</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-D6DD97AD-B52B-478A-B921-7C2844398CD7"><img src="img/ordinality_column.gif" alt="Description of ordinality_column.eps follows" title="Description of ordinality_column.eps follows" longdesc="img_text/ordinality_column.html"><br><a href="img_text/ordinality_column.html">Description of the illustration ordinality_column.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-17E42EC5-9B06-4587-92DA-0EBE907848AD"><span class="italic">JSON_path</span> ::=
                  </p>
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-B6C4C678-52CD-4B40-B4FE-B69E444FCD98"><img src="img/json_path.gif" alt="Description of json_path.eps follows" title="Description of json_path.eps follows" longdesc="img_text/json_path.html"><br><a href="img_text/json_path.html">Description of the illustration json_path.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-D00CE8E5-8D2F-4813-B5B6-0C6EC55490E1"><span class="italic">JSON_relative_object_access</span> ::=
                  </p>
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-2463E431-E0B5-411F-8FFA-7E1C6A45A4DE"><img src="img/json_relative_object_access.gif" alt="Description of json_relative_object_access.eps follows" title="Description of json_relative_object_access.eps follows" longdesc="img_text/json_relative_object_access.html"><br><a href="img_text/json_relative_object_access.html">Description of the illustration json_relative_object_access.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-84DE3706-54CA-478C-9063-7E97B81A10C8"><span class="italic">nested clause</span> ::=
                  </p><br><div class="imageleft"><img class="imageleft" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__IMAGE_FX4_FD3_2GB" src="img/nested_clause.gif" alt="Description of nested_clause.eps follows" title="Description of nested_clause.eps follows" longdesc="img_text/nested_clause.html"><br><a href="img_text/nested_clause.html">Description of the illustration nested_clause.eps</a></div><br></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-E5F427DA-80C2-42D1-A11C-F105ACFD8D28">Purpose</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The SQL/JSON function <code class="codeph">JSON_TABLE</code> creates a relational view of JSON data. It maps the result of a JSON data evaluation into relational rows and columns. You can query the result returned by the function as a virtual relational table using SQL. The main purpose of <code class="codeph">JSON_TABLE</code> is to create a row of relational data for each object inside a JSON array and output JSON values from within that object as individual SQL column values.
                  </p>
                  <p>You must specify <code class="codeph">JSON_TABLE</code> only in the <code class="codeph">FROM</code> clause of a <code class="codeph">SELECT</code> statement. The function first applies a path expression, called a <span class="bold">SQL/JSON</span> <span class="bold">row</span> <span class="bold">path</span> <span class="bold">expression</span>, to the supplied JSON data. The JSON value that matches the row path expression is called a <span class="bold">row</span> <span class="bold">source</span> in that it generates a row of relational data. The <code class="codeph">COLUMNS</code> clause evaluates the row source, finds specific JSON values within the row source, and returns those JSON values as SQL values in individual columns of a row of relational data.
                  </p>
                  <p>The <code class="codeph">COLUMNS</code> clause enables you to search for JSON values in different ways by using the following clauses:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="italic"><code class="codeph">JSON_exists_column</code></span> - Evaluates JSON data in the same manner as the <code class="codeph">JSON_EXISTS</code> condition, that is, determines if a specified JSON value exists, and returns either a <code class="codeph">VARCHAR2</code> column of values '<code class="codeph">true</code>' or '<code class="codeph">false</code>', or a <code class="codeph">NUMBER</code> column of values 1 or 0.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">JSON_query_column</code></span> - Evaluates JSON data in the same manner as the <code class="codeph">JSON_QUERY</code> function, that is, finds one or more specified JSON values, and returns a column of character strings that contain those JSON values.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">JSON_value_column</code></span> - Evaluates JSON data in the same manner as the <code class="codeph">JSON_VALUE</code> function, that is, finds a specified scalar JSON value, and returns a column of those JSON values as SQL values.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">JSON_nested_path</code></span> - Allows you to flatten JSON values in a nested JSON object or JSON array into individual columns in a single row along with JSON values from the parent object or array. You can use this clause recursively to project data from multiple layers of nested objects or arrays into a single row.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">ordinality_column</code></span> - Returns a column of generated row numbers.
                        </p>
                     </li>
                  </ul>
                  <p>The column definition clauses allow you to specify a name for each column of data that they return. You can reference these column names elsewhere in the <code class="codeph">SELECT</code> statement, such as in the <code class="codeph">SELECT</code> list and the <code class="codeph">WHERE</code> clause.
                  </p>
                  <div class="infoboxnotealso" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-2219B947-DA77-46E9-BAFB-E29F0911260F">
                     <p class="notep1">See Also:</p>
                     <p>Appendix C in <a href="../nlspg/appendix-C-collation-derivation-and-determination-rules-for-SQL-operations.html#NLSPG-GUID-AFCE41ED-775B-4A00-AF38-C436776AE0C5" target="_blank"><span class="italic">Oracle Database Globalization Support Guide</span></a> for the collation derivation rules, which define the collation assigned to each character data type column in the table generated by <code class="codeph">JSON_TABLE</code></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-33A15367-8762-410C-AE11-4976B19A9034"><span class="italic">expr</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>Use this clause to specify the JSON data to be evaluated. For <span class="italic"><code class="codeph">expr</code></span>, specify an expression that evaluates to a text literal. If <span class="italic"><code class="codeph">expr</code></span> is a column, then the column must be of data type <code class="codeph">VARCHAR2</code>, <code class="codeph">CLOB</code>, or <code class="codeph">BLOB</code>. If <span class="italic"><code class="codeph">expr</code></span> is null, then the function returns null.
                  </p>
                  <p>If <span class="italic"><code class="codeph">expr</code></span> is not a text literal of well-formed JSON data using strict or lax syntax, then the function returns null by default. You can use the <span class="italic"><code class="codeph">JSON_table_on_error_clause</code></span> to override this default behavior. Refer to <span class="italic"><a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJABIHAJ">JSON_table_on_error_clause</a></span>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-A903D016-F059-4AAA-AA36-235A27DD79CC">FORMAT JSON</p>
                  <p>You must specify <code class="codeph">FORMAT</code> <code class="codeph">JSON</code> if <span class="italic"><code class="codeph">expr</code></span> is a column of data type <code class="codeph">BLOB</code>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-364D30D8-CD55-427D-9446-BCA550522608">PATH</p>
                  <p>Use the <code class="codeph">PATH</code> clause to delineate a portion of the row that you want to use as the column content. The absence of the&nbsp;<code class="codeph">PATH</code>&nbsp;clause does not change the behavior with a path of&nbsp;<code class="codeph"><span class="codeinlineitalic">'$.&lt;column-name&gt;'</span></code>, where&nbsp;<code class="codeph"><span class="codeinlineitalic">&lt;column-name&gt;</span></code>&nbsp;is the column name. The name of the object field that is targeted is taken implicitly as the column name. See <a href="../adjsn/function-JSON_TABLE.html#ADJSN-GUID-0172660F-CE29-4765-BF2C-C405BDE8369A" target="_blank"><span class="italic">Oracle Database JSON Developer's Guide</span></a> for the full semantics of <code class="codeph">PATH</code>. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-62A08C9B-DF62-44B9-8832-09A56EDB3ECC"><span class="italic">JSON_basic_path_expression</span></p>
                  <p> The <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span> is a text literal. See <a href="../adjsn/function-JSON_TABLE.html#ADJSN-GUID-0172660F-CE29-4765-BF2C-C405BDE8369A" target="_blank"><span class="italic">Oracle Database JSON Developer's Guide</span></a> for the full semantics of this clause.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-69D37104-3771-41F1-9D05-90C1D57DF322"><span class="italic">JSON_relative_object_access</span></p>
                  <p>Specify this row path expression to enable simple dot notation. The value of <code class="codeph">JSON_relative_object_access</code> is evaluated as a JSON/Path expression relative to the current row item. 
                  </p>
                  <p>For more information on the <span class="italic"><code class="codeph">JSON_object_key clause</code></span>, refer to <a href="JSON-Object-Access-Expressions.html#GUID-09D1A154-335D-484E-A7A2-DA1983CD511C">JSON Object Access Expressions</a> .
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJABIHAJ">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-8BDB0775-6D92-47A6-A2FE-53734A9F6B80"><span class="italic">JSON_table_on_error_clause</span></p>
                  <p>Use this clause to specify the value returned by the function when errors occur:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="italic"><code class="codeph">NULL ON ERROR</code></span> 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the input is not well-formed <span class="italic"><code class="codeph">JSON </code></span>text, no more rows will be returned as soon as the error is detected. Note that since <span class="italic"><code class="codeph">JSON_TABLE</code></span> supports streaming evaluation, rows may be returned prior to encountering the portion of the input with the error. 
                              </p>
                           </li>
                           <li>
                              <p>If no match is found when the row path expression is evaluated, no rows are returned.</p>
                           </li>
                           <li>
                              <p>Sets the default error behavior for all column expressions to <span class="italic"><code class="codeph">NULL ON ERROR</code></span></p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">ERROR ON ERROR</code></span></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the input is not well-formed <span class="italic"><code class="codeph">JSON </code></span>text, an error will be raised.
                              </p>
                           </li>
                           <li>
                              <p>If no match is found when the row path expression is evaluated, an error will be raised</p>
                           </li>
                           <li>
                              <p>Sets the default error behavior for all column expressions to <span class="italic"><code class="codeph">ERROR ON ERROR</code></span></p>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-846E1884-3BE9-4902-AC55-586BC2C41591"><span class="italic">JSON_columns_clause</span></p>
                  <p>Use the <code class="codeph">COLUMNS</code> clause to define the columns in the virtual relational table returned by the <code class="codeph">JSON_TABLE</code> function.
                  </p>
                  <p>Specify <code class="codeph">TRUNCATE</code> if the column has <code class="codeph">JSON_VALUE</code> semantics.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-17902FAC-2AA1-4F07-8584-77E43F030875"><span class="italic">JSON_exists_column</span></p>
                  <p>This clause evaluates JSON data in the same manner as the <code class="codeph">JSON_EXISTS</code> condition, that is, it determines if a specified JSON value exists. It returns either a <code class="codeph">VARCHAR2</code> column of values '<code class="codeph">true</code>' or '<code class="codeph">false</code>', or a <code class="codeph">NUMBER</code> column of values 1 or 0. 
                  </p>
                  <p>A value of '<code class="codeph">true</code>' or 1 indicates that the JSON value exists and a value of '<code class="codeph">false</code>' or 0 indicates that the JSON value does not exist.
                  </p>
                  <p>You can use the <span class="italic"><code class="codeph">JSON_value_return_type</code></span> clause to control the data type of the returned column. If you omit this clause, then the data type is <code class="codeph">VARCHAR2(4000)</code>. Use <span class="italic"><code class="codeph">column_name</code></span> to specify the name of the returned column. The rest of the clauses of <span class="italic"><code class="codeph">JSON_exists_column</code></span> have the same semantics here as they have for the <code class="codeph">JSON_EXISTS</code> condition. For full information on these clauses, refer to <span class="q">"<a href="SQL-JSON-Conditions.html#GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988">JSON_EXISTS Condition</a>"</span>. Also see <span class="q">"<a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAJGGJC">Using JSON_exists_column: Examples</a>"</span> for an example.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-82DF8ED9-742F-4FDA-9F2F-786D4F526000"><span class="italic">JSON_query_column</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>This clause evaluates JSON data in the same manner as the <code class="codeph">JSON_QUERY</code> function, that is, it finds one or more specified JSON values, and returns a column of character strings that contain those JSON values.
                  </p>
                  <p>Use <span class="italic"><code class="codeph">column_name</code></span> to specify the name of the returned column. The rest of the clauses of <span class="italic"><code class="codeph">JSON_query_column</code></span> have the same semantics here as they have for the <code class="codeph">JSON_QUERY</code> function. For full information on these clauses, refer to <a href="JSON_QUERY.html#GUID-6D396EC4-D2AA-43D2-8F5D-08D646A4A2D9">JSON_QUERY</a>. Also see <span class="q">"<a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAEJCEF">Using JSON_query_column: Example</a>"</span> for an example.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-BB020909-19F2-496A-93AD-B16845782116"><span class="italic">JSON_value_column</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>This clause evaluates JSON data in the same manner as the <code class="codeph">JSON_VALUE</code> function, that is, it finds a specified scalar JSON value, and returns a column of those JSON values as SQL values.
                  </p>
                  <p>Use <span class="italic"><code class="codeph">column_name</code></span> to specify the name of the returned column. The rest of the clauses of <span class="italic"><code class="codeph">JSON_value_column</code></span> have the same semantics here as they have for the <code class="codeph">JSON_VALUE</code> function. For full information on these clauses, refer to <a href="JSON_VALUE.html#GUID-C7F19D36-1E75-4CB2-AE67-ADFBAD23CBC2">JSON_VALUE</a>. Also see <span class="q">"<a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAFACBH">Using JSON_value_column: Example</a>"</span> for an example.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-D2AE5EFA-02A5-4859-BD43-8F0F9120795B"><span class="italic">JSON_nested_path</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>Use this clause to flatten JSON values in a nested JSON object or JSON array into individual columns in a single row along with JSON values from the parent object or array. You can use this clause recursively to project data from multiple layers of nested objects or arrays into a single row.</p>
                  <p>Specify the <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span> clause to match the nested object or array. This path expression is relative to the SQL/JSON row path expression specified in the <code class="codeph">JSON_TABLE</code> function.
                  </p>
                  <p>Use the <code class="codeph">COLUMNS</code> clause to define the columns of the nested object or array to be returned. This clause is recursive—you can specify the <span class="italic"><code class="codeph">JSON_nested_path</code></span> clause within another <span class="italic"><code class="codeph">JSON_nested_path</code></span> clause. Also see <span class="q">"<a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAJAEJD">Using JSON_nested_path: Examples</a>"</span> for an example.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-7208CD10-3111-4591-99E4-4031F9CD5094"><span class="italic">ordinality_column</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>This clause returns a column of generated row numbers of data type <code class="codeph">NUMBER</code>. You can specify at most one <span class="italic"><code class="codeph">ordinality_column</code></span>. Also see <span class="q">"<a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAFACBH">Using JSON_value_column: Example</a>"</span> for an example of using the <span class="italic"><code class="codeph">ordinality_column</code></span> clause.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-3A8A9EEF-0B14-47A0-A96A-AA79DEF35AC5">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAHAAJE">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-5892AE73-23B7-42BC-82C7-FB6C39A90BEF">Creating a Table That Contains a JSON Document: Example</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>This example shows how to create and populate table <code class="codeph">j_purchaseorder</code>, which is used in the rest of the <code class="codeph">JSON_TABLE</code> examples in this section.
                  </p>
                  <p>The following statement creates table <code class="codeph">j_purchaseorder</code>. Column <code class="codeph">po_document</code> is for storing JSON data and, therefore, has an <code class="codeph">IS</code> <code class="codeph">JSON</code> check constraint to ensure that only well-formed JSON is stored in the column.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE j_purchaseorder
  (id RAW (16) NOT NULL,
   date_loaded TIMESTAMP(6) WITH TIME ZONE,
   po_document CLOB CONSTRAINT ensure_json CHECK (po_document IS JSON));
</pre><p>The following statement inserts one row, or one JSON document, into table <code class="codeph">j_purchaseorder</code>:
                  </p><pre class="oac_no_warn" dir="ltr">INSERT INTO j_purchaseorder
  VALUES (
    SYS_GUID(),
    SYSTIMESTAMP,
    '{"PONumber"              : 1600,
      "Reference"             : "ABULL-20140421",
       "Requestor"            : "Alexis Bull",
       "User"                 : "ABULL",
       "CostCenter"           : "A50",
       "ShippingInstructions" : {"name"   : "Alexis Bull",
                                 "Address": {"street"   : "200 Sporting Green",
                                              "city"    : "South San Francisco",
                                              "state"   : "CA",
                                              "zipCode" : 99236,
                                              "country" : "United States of America"},
                                 "Phone" : [{"type" : "Office", "number" : "909-555-7307"},
                                            {"type" : "Mobile", "number" : "415-555-1234"}]},
       "Special Instructions" : null,
       "AllowPartialShipment" : true,
       "LineItems" : [{"ItemNumber" : 1,
                       "Part" : {"Description" : "One Magic Christmas",
                                 "UnitPrice"   : 19.95,
                                 "UPCCode"     : 13131092899},
                       "Quantity" : 9.0},
                      {"ItemNumber" : 2,
                       "Part" : {"Description" : "Lethal Weapon",
                                 "UnitPrice"   : 19.95,
                                 "UPCCode"     : 85391628927},
                       "Quantity" : 5.0}]}');
</pre></div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAEJCEF">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-DC2F9150-52A5-4AB0-867B-468E4A345725">Using <span class="italic">JSON_query_column</span>: Example
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The statement in this example queries JSON data for a specific JSON property using the <span class="italic"><code class="codeph">JSON_query_column</code></span> clause, and returns the property value in a column.
                  </p>
                  <p>The statement first applies a SQL/JSON row path expression to column <code class="codeph">po_document</code>, which results in a match to the <code class="codeph">ShippingInstructions</code> property. The <code class="codeph">COLUMNS</code> clause then uses the <span class="italic"><code class="codeph">JSON_query_column</code></span> clause to return the <code class="codeph">Phone</code> property value in a <code class="codeph">VARCHAR2(100)</code> column.
                  </p><pre class="oac_no_warn" dir="ltr">SELECT jt.phones
FROM j_purchaseorder,
JSON_TABLE(po_document, '$.ShippingInstructions'
COLUMNS
  (phones VARCHAR2(100) FORMAT JSON PATH '$.Phone')) AS jt;
</pre><pre class="oac_no_warn" dir="ltr">PHONES
-------------------------------------------------------------------------------------
[{"type":"Office","number":"909-555-7307"},{"type":"Mobile","number":"415-555-1234"}]
</pre></div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAFACBH">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-4CAB74EC-94D0-4472-BEA2-00636F1590CD">Using <span class="italic">JSON_value_column</span>: Example
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The statement in this example refines the statement in the previous example by querying JSON data for specific JSON values using the <span class="italic"><code class="codeph">JSON_value_column</code></span> clause, and returns the JSON values as SQL values in relational rows and columns.
                  </p>
                  <p>The statement first applies a SQL/JSON row path expression to column <code class="codeph">po_document</code>, which results in a match to the elements in the JSON array <code class="codeph">Phone</code>. These elements are JSON objects that contain two members named <code class="codeph">type</code> and <code class="codeph">number</code>. The statement uses the <code class="codeph">COLUMNS</code> clause to return the <code class="codeph">type</code> value for each object in a <code class="codeph">VARCHAR2(10)</code> column called <code class="codeph">phone_type</code>, and the <code class="codeph">number</code> value for each object in a <code class="codeph">VARCHAR2(20)</code> column called <code class="codeph">phone_num</code>. The statement also returns an ordinal column named <code class="codeph">row_number</code>.
                  </p><pre class="oac_no_warn" dir="ltr">SELECT jt.*
FROM j_purchaseorder,
JSON_TABLE(po_document, '$.ShippingInstructions.Phone[*]'
COLUMNS (row_number FOR ORDINALITY,
         phone_type VARCHAR2(10) PATH '$.type',
         phone_num VARCHAR2(20) PATH '$.number'))
AS jt;

ROW_NUMBER PHONE_TYPE PHONE_NUM
---------- ---------- --------------------
         1 Office     909-555-7307
         2 Mobile     415-555-1234
</pre></div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAJGGJC">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-09C24413-C902-4941-AF7F-7B1EBC3109A1">Using <span class="italic">JSON_exists_column</span>: Examples
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The statements in this example test whether a JSON value exists in JSON data using the <span class="italic"><code class="codeph">JSON_exists_column</code></span> clause. The first example returns the result of the test as a '<code class="codeph">true</code>' or '<code class="codeph">false</code>' value in a column. The second example uses the result of the test in the <code class="codeph">WHERE</code> clause.
                  </p>
                  <p>The following statement first applies a SQL/JSON row path expression to column <code class="codeph">po_document</code>, which results in a match to the entire context item, or JSON document. It then uses the <code class="codeph">COLUMNS</code> clause to return the requestor's name and a string value of '<code class="codeph">true</code>' or '<code class="codeph">false</code>' indicating whether the JSON data for that requestor contains a zip code. The <code class="codeph">COLUMNS</code> clause first uses the <span class="italic"><code class="codeph">JSON_value_column</code></span> clause to return the <code class="codeph">Requestor</code> value in a <code class="codeph">VARCHAR2(32)</code> column called <code class="codeph">requestor</code>. It then uses the <span class="italic"><code class="codeph">JSON_exists_column</code></span> clause to determine if the <code class="codeph">zipCode</code> object exists and returns the result in a <code class="codeph">VARCHAR2(5)</code> column called <code class="codeph">has_zip</code>.
                  </p><pre class="oac_no_warn" dir="ltr">SELECT requestor, has_zip
FROM j_purchaseorder,
JSON_TABLE(po_document, '$'
COLUMNS
  (requestor VARCHAR2(32) PATH '$.Requestor',
   has_zip VARCHAR2(5) EXISTS PATH '$.ShippingInstructions.Address.zipCode'));

REQUESTOR                        HAS_ZIP
-------------------------------- -------
Alexis Bull                      true
</pre><p>The following statement is similar to the previous statement, except that it uses the value of <code class="codeph">has_zip</code> in the <code class="codeph">WHERE</code> clause to determine whether to return the <code class="codeph">Requestor</code> value:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT requestor
FROM j_purchaseorder,
JSON_TABLE(po_document, '$'
COLUMNS
  (requestor VARCHAR2(32) PATH '$.Requestor',
   has_zip VARCHAR2(5) EXISTS PATH '$.ShippingInstructions.Address.zipCode'))
WHERE (has_zip = 'true');

REQUESTOR
--------------------------------
Alexis Bull</pre></div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAJAEJD">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-8EB18E29-2D0C-492B-873D-6F81D7EAD82E">Using <span class="italic">JSON_nested_path</span>: Examples
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following two simple statements demonstrate the functionality of the <span class="italic"><code class="codeph">JSON_nested_path</code></span> clause. They operate on a simple JSON array that contains three elements. The first two elements are numbers. The third element is a nested JSON array that contains two string value elements.
                  </p>
                  <p>The following statement does not use the <span class="italic"><code class="codeph">JSON_nested_path</code></span> clause. It returns the three elements in the array in a single row. The nested array is returned in its entirety.
                  </p><pre class="oac_no_warn" dir="ltr">SELECT *
FROM JSON_TABLE('[1,2,["a","b"]]', '$'
COLUMNS (outer_value_0 NUMBER PATH '$[0]',
         outer_value_1 NUMBER PATH '$[1]', 
         outer_value_2 VARCHAR2(20) FORMAT JSON PATH '$[2]'));

OUTER_VALUE_0 OUTER_VALUE_1 OUTER_VALUE_2
------------- ------------- --------------------
            1             2 ["a","b"]
</pre><p>The following statement is different from the previous statement because it uses the <span class="italic"><code class="codeph">JSON_nested_path</code></span> clause to return the individual elements of the nested array in individual columns in a single row along with the parent array elements.
                  </p><pre class="oac_no_warn" dir="ltr">SELECT *
FROM JSON_TABLE('[1,2,["a","b"]]', '$'
COLUMNS (outer_value_0 NUMBER PATH '$[0]',
         outer_value_1 NUMBER PATH '$[1]',
         NESTED PATH '$[2]'
         COLUMNS (nested_value_0 VARCHAR2(1) PATH '$[0]',
                  nested_value_1 VARCHAR2(1) PATH '$[1]')));

OUTER_VALUE_0 OUTER_VALUE_1 NESTED_VALUE_0 NESTED_VALUE_1
------------- ------------- -------------- --------------
            1             2 a              b
</pre><p>The previous example shows how to use <span class="italic"><code class="codeph">JSON_nested_path</code></span> with a nested JSON array. The following example shows how to use the <span class="italic"><code class="codeph">JSON_nested_path</code></span> clause with a nested JSON object by returning the individual elements of the nested object in individual columns in a single row along with the parent object elements.
                  </p><pre class="oac_no_warn" dir="ltr">SELECT *
FROM JSON_TABLE('{a:100, b:200, c:{d:300, e:400}}', '$'
COLUMNS (outer_value_0 NUMBER PATH '$.a',
         outer_value_1 NUMBER PATH '$.b',
         NESTED PATH '$.c'
         COLUMNS (nested_value_0 NUMBER PATH '$.d',
                  nested_value_1 NUMBER PATH '$.e')));

OUTER_VALUE_0 OUTER_VALUE_1 NESTED_VALUE_0 NESTED_VALUE_1
------------- ------------- -------------- --------------
          100           200            300            400
</pre><p>The following statement uses the <span class="italic"><code class="codeph">JSON_nested_path</code></span> clause when querying the <code class="codeph">j_purchaseorder</code> table. It first applies a row path expression to column <code class="codeph">po_document</code>, which results in a match to the entire context item, or JSON document. It then uses the <code class="codeph">COLUMNS</code> clause to return the <code class="codeph">Requestor</code> value in a <code class="codeph">VARCHAR2(32)</code> column called <code class="codeph">requestor</code>. It then uses the <span class="italic"><code class="codeph">JSON_nested_path</code></span> clause to return the property values of the individual objects in each member of the nested <code class="codeph">Phone</code> array. Note that a row is generated for each member of the nested array, and each row contains the corresponding <code class="codeph">Requestor</code> value.
                  </p><pre class="oac_no_warn" dir="ltr">SELECT jt.*
FROM j_purchaseorder,
JSON_TABLE(po_document, '$'
COLUMNS
  (requestor VARCHAR2(32) PATH '$.Requestor',
   NESTED PATH '$.ShippingInstructions.Phone[*]'
     COLUMNS (phone_type VARCHAR2(32) PATH '$.type',
              phone_num VARCHAR2(20) PATH '$.number')))
AS jt;
 
 
REQUESTOR            PHONE_TYPE           PHONE_NUM
-------------------- -------------------- ---------------
Alexis Bull          Office               909-555-7307
Alexis Bull          Mobile               415-555-1234</pre><p>The following example shows the use of simple dot-notation in <code class="codeph">JSON_nested_path</code> and its equivalent without dot notation. 
                  </p><pre class="oac_no_warn" dir="ltr">SELECT c.*
FROM customer t,
JSON_TABLE(t.json COLUMNS(
id, name, phone, address,
NESTED orders[*] COLUMNS(
updated, status,
NESTED lineitems[*] COLUMNS(
description, quantity NUMBER, price NUMBER
)
)
)) c;</pre><p>The above statement in dot notation is equivalent to the following one without dot notation:</p><pre class="oac_no_warn" dir="ltr">SELECT c.*
FROM customer t,
JSON_TABLE(t.json, '$' COLUMNS(
id PATH '$.id',
name PATH '$.name',
phone PATH '$.phone',
address PATH '$.address',
NESTED PATH '$.orders[*]' COLUMNS(
updated PATH '$.updated',
status PATH '$.status',
NESTED PATH '$.lineitems[*]' COLUMNS(
description PATH '$.description',
quantity NUMBER PATH '$.quantity',
price NUMBER PATH '$.price'
)
)
)) c;</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-B237368A-7579-4B49-B193-9D56DAD4B58A"><span class="italic">nested_clause</span></p>
                  <p>Use the <code class="codeph">nested_clause</code> as a short-hand syntax for mapping JSON values to relational columns. It reuses the syntax of the <code class="codeph">JSON_TABLE</code> columns clause and is essentially equivalent to a left-outer ANSI join with <code class="codeph">JSON_TABLE</code>. 
                  </p>
                  <p>Example 1 using the nested_clause is equivalent to Example 2 using the left-outer join with <code class="codeph">JSON_TABLE</code> .
                  </p>
                  <p><span class="bold">Example 1 Nested_Clause</span></p><pre class="pre codeblock"><code>SELECT t.*
FROM j_purchaseOrder
NESTED po_document COLUMNS(PONumber, Reference, Requestor) t;
PONUMBER REFERENCE REQUESTOR
--------------- ------------------------------ -----------------------------
1600 ABULL-20140421 Alexis Bull</code></pre><p><span class="bold">Example 2 Left-Outer Join With JSON_TABLE</span></p><pre class="pre codeblock"><code>SELECT t.*
FROM j_purchaseOrder LEFT OUTER JOIN
JSON_TABLE(po_document COLUMNS(PONumber, Reference, Requestor)) t ON 1=1;</code></pre><p>When using the <code class="codeph">nested_clause</code>, the JSON column name following the <code class="codeph">NESTED</code> keyword will not be included in <code class="codeph">SELECT *</code> expansion. For example:
                  </p><pre class="pre codeblock"><code>SELECT *
FROM j_purchaseOrder
NESTED po_document.LineItems[*]
COLUMNS(ItemNumber, Quantity NUMBER);
ID DATE_LOADED ITEMN QUANTITY
------------------------ ---------------------------------------- ------- -----------
6C5589E9A9156… 16-MAY-18 08.40.30.397688 AM -07:00 1 9
6C5589E9A9156… 16-MAY-18 08.40.30.397688 AM -07:00 2 5</code></pre><p>The result does not include the JSON column name <code class="codeph">po_document</code> as one of the columns in the result.
                  </p>
                  <p>When unnesting JSON column data, the recommendation is to use <code class="codeph">LEFT OUTER JOIN</code> semantics, so that JSON columns that produce no rows will not filter other non-JSON data from the result. For example,a <code class="codeph"> j_purchaseOrder</code> row with a NULL <code class="codeph">po_document</code> column will not filter the possibly non-null relational <code class="codeph">columns id</code> and <code class="codeph">date_loaded</code> from the result.
                  </p>
                  <p>The columns clause supports all the same features defined for <code class="codeph">JSON_TABLE</code> including nested columns. For example:
                  </p><pre class="pre codeblock"><code>SELECT t.*
FROM j_purchaseorder 
NESTED po_document COLUMNS(PONumber, Reference,
NESTED LineItems[*] COLUMNS(ItemNumber, Quantity)
) t
PONUMBER REFERENCE ITEMN QUANTITY
--------------- ------------------------------ ----- ------------
1600 ABULL-20140421 1 9
1600 ABULL-20140421 2 5</code></pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
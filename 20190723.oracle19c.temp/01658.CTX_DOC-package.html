<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>CTX_DOC Package</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Reference">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="text-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:47:23-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96278-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="CTX_DDL-package.html" title="Previous" type="text/html">
      <link rel="next" href="CTX_ENTITY-package.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Reference">
    <meta name="dcterms.isVersionOf" content="CCREF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CTX_DDL-package.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="CTX_ENTITY-package.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> CTX_DOC Package </li>
            </ol>
            <a id="GUID-7A07AEB1-2647-468A-A071-A2443EF1A514" name="GUID-7A07AEB1-2647-468A-A071-A2443EF1A514"></a><a id="CCREF2115"></a><a id="CCREF0700"></a>
            
            <h2 id="CCREF-GUID-7A07AEB1-2647-468A-A071-A2443EF1A514" class="sect2"><span class="enumeration_chapter">9 </span> CTX_DOC Package 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d98925e62" class="indexterm-anchor"></a><a id="d98925e64" class="indexterm-anchor"></a>The <code class="codeph">CTX_DOC</code> PL/SQL package provides procedures and functions for requesting document services, such as highlighting extracted text or generating a list of themes for a document.
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="CTX_DOC-package.html#GUID-0F7C5088-CFD6-48D6-BE9F-67D333ABC49D">About CTX_DOC Package Procedures</a></p>
                  </li>
               </ul>
               <p></p>
               <p>The <code class="codeph">CTX_DOC</code> package includes the following procedures and functions: 
               </p>
               <div class="tblformal" id="GUID-7A07AEB1-2647-468A-A071-A2443EF1A514__GUID-CCF458F2-BA28-4BE0-8BA6-7CF0B600B3C7">
                  <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table describes CTX_DOC Package." width="100%" frame="hsides" border="1" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="38%" id="d98925e92">Name</th>
                           <th align="left" valign="bottom" width="62%" id="d98925e95">Description</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e100" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6">FILTER</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e100 d98925e95 ">
                              <p>Generates a plain text or HTML version of a document.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e109" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521">GIST</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e109 d98925e95 ">
                              <p>Generates a Gist or theme summaries for a document.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e118" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511">HIGHLIGHT</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e118 d98925e95 ">
                              <p>Generates plain text or HTML highlighting offset information for a document.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e127" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-D56BC634-3A96-4B30-A449-CB0AA2D613E4">IFILTER</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e127 d98925e95 ">
                              <p>Generates a plain text version of binary data. Can be called from a <code class="codeph">USER_DATASTORE</code> procedure.
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e139" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9">MARKUP</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e139 d98925e95 ">
                              <p>Generates a plain text or HTML version of a document with query terms highlighted.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e148" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-FCB1A16D-DFFA-4261-8C2E-96DB9D2E2C1A">PKENCODE</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e148 d98925e95 ">
                              <p>Encodes a composite textkey string (value) for use in other <code class="codeph">CTX_DOC</code> procedures.
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e160" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-CFA758A8-BAF3-4888-8A14-A29928C5D53D">POLICY_FILTER</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e160 d98925e95 ">
                              <p>Generates a plain text or HTML version of a document, without requiring an index.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e169" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3">POLICY_GIST</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e169 d98925e95 ">
                              <p>Generates a Gist or theme summaries for a document, without requiring an index.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e178" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06">POLICY_HIGHLIGHT</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e178 d98925e95 ">
                              <p>Generates plain text or HTML highlighting offset information for a document, without requiring an index.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e187" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB">POLICY_LANGUAGES</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e187 d98925e95 ">
                              <p>Provides the ability to fetch the language for a section of text.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e196" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-74E74073-E7E9-483E-91EB-C714F726E95A">POLICY_MARKUP</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e196 d98925e95 ">
                              <p>Generates a plain text or HTML version of a document with query terms highlighted, without requiring an index.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e206" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4">POLICY_NOUN_PHRASES</a> 
                              </p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e206 d98925e95 ">
                              <p>Extracts noun phrases for a document.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e216" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD">POLICY_PART_OF_SPEECH</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e216 d98925e95 ">
                              <p>Extracts the part of speech for each word in a document.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e225" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355">POLICY_SNIPPET</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e225 d98925e95 ">
                              <p>Generates a concordance for a document, based on query terms, without requiring an index.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e234" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A">POLICY_STEMS</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e234 d98925e95 ">
                              <p>Extracts stems for each word in a body of text.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e243" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-173B409F-5A0F-4561-A540-37AE6A277F80">POLICY_THEMES</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e243 d98925e95 ">
                              <p>Generates a list of themes for a document, without requiring an index.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e252" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-74625382-FB75-452C-A2B3-854A6696C2E5">POLICY_TOKENS</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e252 d98925e95 ">
                              <p>Generates all index tokens for a document, without requiring an index.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e261" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-539DCA29-C32C-4749-9C0E-EE57EAC42A6E" title="Use this procedure to perform sentiment analysis for a document, determine a sentiment score for each topic within the document, and populate the results into a result table.">SENTIMENT</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e261 d98925e95 ">
                              <p>Performs sentiment analysis for a single document and provides a separate sentiment score for each segment within the document.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e272" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-F1588275-38FF-4515-BD39-DD67C98444CB" title="Use this procedure to perform sentiment analysis and return a single aggregate sentiment score per document. The aggregate sentiment score is a value between -100 and 100.">SENTIMENT_AGGREGATE</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e272 d98925e95 ">
                              <p>Performs sentiment analysis for a single document and provides an aggregate sentiment score for the entire document.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e283" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-65442C38-17F7-4BF9-89B4-35945EDCE92A">SET_KEY_TYPE</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e283 d98925e95 ">
                              <p>Sets <code class="codeph">CTX_DOC</code> procedures to accept rowid or primary key document identifiers.
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e295" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-07604453-9C9A-45EB-BF43-8CD565379F22">SNIPPET</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e295 d98925e95 ">
                              <p>Generates a concordance for a document, based on query terms.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e304" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886">THEMES</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e304 d98925e95 ">
                              <p>Generates a list of themes for a document.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="38%" id="d98925e314" headers="d98925e92 ">
                              <p><a href="CTX_DOC-package.html#GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71">TOKENS</a></p>
                           </td>
                           <td align="left" valign="top" width="62%" headers="d98925e314 d98925e95 ">
                              <p>Generates all index tokens for a document.</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <p>The performance of the procedures <a href="CTX_DOC-package.html#GUID-07604453-9C9A-45EB-BF43-8CD565379F22">SNIPPET</a>, <a href="CTX_DOC-package.html#GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511">HIGHLIGHT</a>, and <a href="CTX_DOC-package.html#GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9">MARKUP</a> can be improved by using the forward index feature, and the performance of the procedures <a href="CTX_DOC-package.html#GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6">FILTER</a>, <a href="CTX_DOC-package.html#GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521">GIST</a>, <a href="CTX_DOC-package.html#GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886">THEMES</a>. <a href="CTX_DOC-package.html#GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71">TOKENS</a> can be improved by using the save copy feature of Oracle Text.
               </p>
               <div class="infoboxnotealso" id="GUID-7A07AEB1-2647-468A-A071-A2443EF1A514__GUID-9ECD2C22-5EF7-42EE-8E80-FACE132688AD">
                  <p class="notep1">See Also:</p>
                  <p> <a href="../ccapp/indexing-with-oracle-text.html#CCAPP9542" target="_blank"><span class="italic">Oracle Text Application Developer's Guide</span></a> for more information about forward index and save copy features
                  </p>
               </div>
            </div><a id="CCREF99140"></a><div class="props_rev_3"><a id="GUID-0F7C5088-CFD6-48D6-BE9F-67D333ABC49D" name="GUID-0F7C5088-CFD6-48D6-BE9F-67D333ABC49D"></a><h3 id="CCREF-GUID-0F7C5088-CFD6-48D6-BE9F-67D333ABC49D" class="sect3"><span class="enumeration_section">9.1 </span>About CTX_DOC Package Procedures
               </h3>
               <div>
                  <p><a id="d98925e424" class="indexterm-anchor"></a><a id="d98925e426" class="indexterm-anchor"></a><a id="d98925e428" class="indexterm-anchor"></a>Many of the <code class="codeph">CTX_DOC</code> PL/SQL package procedures exist in two versions: those that make use of indexes, and those that do not. Those that do not make use of indexes are called "policy-based" procedures. They are offered because there are times when you may want to use document services on a single document without creating a CONTEXT index in advance. Policy-based procedures enable you to do this.
                  </p>
                  <p>The policy_<span class="italic">*</span> procedures mirror the conventional in-memory document services and are used with <tt>policy_name</tt> replacing <tt>index_ name</tt>, and document of type <code class="codeph">VARCHAR2</code>, <code class="codeph">CLOB</code>, <code class="codeph">BLOB</code>, or <code class="codeph">BFILE</code> replacing <tt>textkey</tt>. Thus, you need not create an index to obtain document services output with these procedures.
                  </p>
                  <p>For the procedures that generate character offsets and lengths, such as <code class="codeph">HIGHLIGHT</code> and <code class="codeph">TOKENS</code>, Oracle Text follows USC-2 codepoint semantics.
                  </p>
                  <div class="infoboxnote" id="GUID-0F7C5088-CFD6-48D6-BE9F-67D333ABC49D__GUID-3529116E-2560-4F26-B7E6-EA6EAD093CAD">
                     <p class="notep1">Note:</p>
                     <p>The APIs in the <code class="codeph">CTX_DOC</code> package do not support identifiers that are prefixed with the schema or the owner name.
                     </p>
                  </div>
               </div>
            </div><a id="CCREF23904"></a><a id="CCREF0702"></a><div class="props_rev_3"><a id="GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6" name="GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6"></a><h3 id="CCREF-GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6" class="sect3"><span class="enumeration_section">9.2 </span>FILTER 
               </h3>
               <div>
                  <div class="section">
                     <p>Use the <code class="codeph">CTX_DOC.FILTER</code> procedure to generate either a plain text or HTML version of a document. You can store the rendered document in either a result table or in memory. This procedure is generally called after a query, from which you identify the document to be filtered.
                     </p>
                     <div class="infoboxnote" id="GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6__GUID-EB75B797-A41B-4757-AE2C-EB5738118A12">
                        <p class="notep1">Note:</p>
                        <p>The resultant HTML document does not include graphics.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6__GUID-AF2E4278-546D-4905-BD2E-E650E49136E2">Syntax 1: In-memory Result Storage</p><pre class="oac_no_warn" dir="ltr">exec CTX_DOC.FILTER(
          index_name  IN VARCHAR2, 
          textkey     IN VARCHAR2, 
          restab      IN OUT NOCOPY CLOB, 
          plaintext   IN BOOLEAN DEFAULT FALSE,
          use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);

exec  CTX_DOC.HIGHLIGHT_CLOB_QUERY(
          index_name IN VARCHAR2,
          textkey IN VARCHAR2,
          text_query IN CLOB,
          restab IN OUT NOCOPY HIGHLIGHT_TAB,
          plaintext IN BOOLEAN DEFAULT FALSE,
          use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6__GUID-4B9A6436-2356-48C2-84DB-6EF92A9F47FC">Syntax 2: Result Table Storage</p><pre class="oac_no_warn" dir="ltr">exec CTX_DOC.FILTER(
          index_name  IN VARCHAR2, 
          textkey     IN VARCHAR2, 
          restab      IN VARCHAR2, 
          query_id    IN NUMBER DEFAULT 0,
          plaintext   IN BOOLEAN DEFAULT FALSE,
          use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);

exec  CTX_DOC.HIGHLIGHT_CLOB_QUERY(
          index_name IN VARCHAR2,
          textkey IN VARCHAR2,
          text_query IN CLOB,
          restab IN VARCHAR2,
          query_id IN NUMBER DEFAULT 0,
          plaintext IN BOOLEAN DEFAULT FALSE,
          use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);</pre><dl>
                        <dt class="dlterm"><a name="GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6__GUID-EC77A970-C076-4D5F-9801-B07A25BCE3CD">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index associated with the text column containing the document identified by <tt>textkey</tt>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6__GUID-C2635E73-427B-4897-BF10-966F557BFD24">
                              <!-- --></a>textkey
                        </dt>
                        <dd>
                           <p>Specify the unique identifier (usually the primary key) for the document. </p>
                           <p>The <tt>textkey</tt> parameter can be as follows:
                           </p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>a single column primary key value</p>
                        </li>
                        <li>
                           <p>encoded specification for a composite (multiple column) primary key. Use CTX_DOC.<a href="CTX_DOC-package.html#GUID-FCB1A16D-DFFA-4261-8C2E-96DB9D2E2C1A">PKENCODE </a></p>
                        </li>
                        <li>
                           <p>the rowid of the row containing the document</p>
                        </li>
                     </ul>
                     <p>Toggle between primary key and rowid identification using CTX_DOC.<a href="CTX_DOC-package.html#GUID-65442C38-17F7-4BF9-89B4-35945EDCE92A">SET_KEY_TYPE</a>.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6__GUID-C04CCAB6-8414-4597-8D64-9732345E61E3">
                              <!-- --></a>restab 
                        </dt>
                        <dd>
                           <p>You can specify that this procedure store the marked-up text to either a table or to an in-memory <code class="codeph">CLOB</code>. 
                           </p>
                           <p>To store results to a table, specify the name of the table. The table to which you want to store results must exist before you make this call.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6__GUID-380B5D6B-69DF-44DF-9225-924C3BBA4DCD">
                        <p class="notep1">See Also:</p>
                        <p> <span class="q">"<a href="oracle-text-result-tables.html#GUID-844E3D90-0479-435D-A6FC-BFD0E9EB322E">Filter Table</a>"</span> in <a href="oracle-text-result-tables.html#GUID-FF9744A0-D81C-45B1-8289-B42DC4211F75"> Oracle Text Result Tables</a> for more information about the structure of the filter result table
                        </p>
                     </div>
                     <p>To store results in memory, specify the name of the <code class="codeph">CLOB</code> locator. If <tt>restab</tt> is <code class="codeph">NULL</code>, then a temporary <code class="codeph">CLOB</code> is allocated and returned. You must de-allocate the locator after using it with <code class="codeph">DBMS_LOB.FREETEMPORARY()</code>.
                     </p>
                     <p>If <tt>restab</tt> is not <code class="codeph">NULL</code>, then the <code class="codeph">CLOB</code> is truncated before the operation.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6__GUID-1C562657-B73B-4CA0-AEA4-B322A7C18A73">
                              <!-- --></a>query_id
                        </dt>
                        <dd>
                           <p>Specify an identifier to use to identify the row inserted into <tt>restab</tt>.
                           </p>
                           <p>When <tt>query_id</tt> is not specified or set to <code class="codeph">NULL</code>, it defaults to 0. You must manually truncate the table specified in <tt>restab</tt>. 
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6__GUID-49C75C8D-F3FB-4406-A39D-48EE9087EC22">
                              <!-- --></a>plaintext
                        </dt>
                        <dd>
                           <p>Specify <code class="codeph">TRUE</code> to generate a plaintext version of the document. Specify <code class="codeph">FALSE</code> to generate an HTML version of the document if you are using the <code class="codeph">AUTO_FILTER</code> filter or indexing HTML documents.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6__GUID-5A52714C-22CF-491E-B620-9CA83C4DAE22">
                              <!-- --></a>use_saved_copy
                        </dt>
                        <dd>
                           <p>Specify whether to refer to the $D table to fetch the copy of the document, and what action to take when the copy of the document is not available in the $D table. </p>
                           <p>You can specify one of the following values for the <code class="codeph">use_saved_copy</code> parameter:
                           </p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then fetch the document from the data store.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_ERROR</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then show an error message. Specify this value when you want to implement a specific fallback logic when the copy of the document is not available in the $D table. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_IGNORE</code>: Always fetch the document from the data store.
                           </p>
                        </li>
                     </ul>
                     <p>The default value is <code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6__GUID-C42D66B5-E5D8-492D-A5D3-67D345C9BC73">Example</p>
                     <p>In-Memory Filter<a id="d98925e747" class="indexterm-anchor"></a></p>
                     <p>The following code shows how to filter a document to HTML in memory.</p><pre class="oac_no_warn" dir="ltr">declare
mklob clob;
amt number := 40;
line varchar2(80);

begin
 ctx_doc.filter('myindex','1', mklob, FALSE);
 -- mklob is NULL when passed-in, so ctx-doc.filter will allocate a temporary
 -- CLOB for us and place the results there.
 dbms_lob.read(mklob, amt, 1, line);
 dbms_output.put_line('FIRST 40 CHARS ARE:'||line);
 -- have to de-allocate the temp lob
 dbms_lob.freetemporary(mklob);
 end;
</pre><p>Create<a id="d98925e757" class="indexterm-anchor"></a> the filter result table to store the filtered document as follows: 
                     </p><pre class="oac_no_warn" dir="ltr">create table filtertab (query_id  number,   
                        document  clob); 
</pre><p>To obtain a plaintext version of document with textkey 20, enter the following statement:</p><pre class="oac_no_warn" dir="ltr">begin 
ctx_doc.filter('newsindex', '20', 'filtertab', '0', TRUE);
end;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF23905"></a><a id="CCREF23906"></a><a id="CCREF23907"></a><a id="CCREF23908"></a><a id="CCREF0704"></a><div class="props_rev_3"><a id="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521" name="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521"></a><h3 id="CCREF-GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521" class="sect3"><span class="enumeration_section">9.3 </span>GIST
               </h3>
               <div>
                  <div class="section">
                     <p>Use the <code class="codeph">CTX_DOC.GIST</code> procedure to generate gist and theme summaries for a document. You can generate paragraph-level or sentence-level gists or theme summaries.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-6D8A1424-7024-4D28-84D0-2A50E4473D0A">Syntax 1: In-Memory Storage</p><pre class="oac_no_warn" dir="ltr">CTX_DOC.GIST(</pre><pre class="oac_no_warn" dir="ltr">index_name    IN VARCHAR2, 
textkey       IN VARCHAR2, 
restab        IN OUT CLOB, 
glevel        IN VARCHAR2 DEFAULT 'P',
pov           IN VARCHAR2 DEFAULT 'GENERIC',
numParagraphs IN NUMBER DEFAULT 16,
maxPercent    IN NUMBER DEFAULT 10,
num_themes    IN NUMBER DEFAULT 50,
use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-C3FB8071-2EF2-4802-839A-9D5B2269C50B">Syntax 2: Result Table Storage</p><pre class="oac_no_warn" dir="ltr">CTX_DOC.GIST(</pre><pre class="oac_no_warn" dir="ltr">index_name    IN VARCHAR2, 
textkey       IN VARCHAR2, 
restab        IN VARCHAR2, 
query_id      IN NUMBER DEFAULT 0,
glevel        IN VARCHAR2 DEFAULT 'P',
pov           IN VARCHAR2 DEFAULT NULL,
numParagraphs IN NUMBER DEFAULT 16,
maxPercent    IN NUMBER DEFAULT 10,
num_themes    IN NUMBER DEFAULT 50,
use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);</pre><dl>
                        <dt class="dlterm"><a name="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-65F5A130-5431-426D-86D7-BDC852C16550">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index associated with the text column containing the document identified by <tt>textkey</tt>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-DECC6C0F-8B4E-431E-BAD6-6550A0C21C8D">
                              <!-- --></a>textkey
                        </dt>
                        <dd>
                           <p>Specify the unique identifier (usually the primary key) for the document. </p>
                           <p>The <tt>textkey</tt> parameter can be as follows:
                           </p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>a single column primary key value</p>
                        </li>
                        <li>
                           <p>an encoded specification for a composite (multiple column) primary key. To encode a composite textkey, use the <code class="codeph">CTX_DOC.PKENCODE</code> procedure
                           </p>
                        </li>
                        <li>
                           <p>the rowid of the row containing the document</p>
                        </li>
                     </ul>
                     <p>Toggle between primary key and rowid identification using <code class="codeph">CTX_DOC.SET_KEY_TYPE</code>.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-FC88EDF3-31EF-4444-8E93-E75FDB964118">
                              <!-- --></a>restab
                        </dt>
                        <dd>
                           <p>Specify that this procedure store the gist and theme summaries to either a table or to an in-memory <code class="codeph">CLOB</code>. 
                           </p>
                           <p>To store results to a table specify the name of an existing table.</p>
                           <div class="infoboxnotealso" id="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-64F44E8E-3F68-4342-B7AB-292F36204D0F">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="oracle-text-result-tables.html#GUID-2D51F917-19AF-4163-A146-5ED32C80E202">Gist Table</a>"</span> in <a href="oracle-text-result-tables.html#GUID-FF9744A0-D81C-45B1-8289-B42DC4211F75"> Oracle Text Result Tables</a> 
                              </p>
                           </div>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>To store results in memory, specify the name of the <code class="codeph">CLOB</code> locator. If <tt>restab</tt> is <code class="codeph">NULL</code>, then a temporary <code class="codeph">CLOB</code> is allocated and returned. You must de-allocate the locator after using it.
                     </p>
                     <p>If <code class="codeph">restab</code> is not <code class="codeph">NULL</code>, then the <code class="codeph">CLOB</code> is truncated before the operation.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-C9428E7E-AF8E-4FA8-8D26-80F226C74C6A">
                              <!-- --></a>query_id
                        </dt>
                        <dd>
                           <p>Specify an identifier to use to identify the row(s) inserted into <tt>restab</tt>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-E28F0994-34FF-402A-BFDA-5A76CBEF3A66">
                              <!-- --></a>glevel
                        </dt>
                        <dd>
                           <p>Specify the type of gist or theme summary to produce. The possible values are:</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic">P</span> for paragraph
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">S</span> for sentence
                           </p>
                        </li>
                     </ul>
                     <p>The default is <span class="italic">P</span>.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-3051D7E9-A9C1-4BB5-9BAD-DB8AE63B25F5">
                              <!-- --></a>pov
                        </dt>
                        <dd>
                           <p>Specify whether a gist or a single theme summary is generated. The type of gist or theme summary generated (sentence-level or paragraph-level) depends on the value specified for <code class="codeph">glevel</code>.
                           </p>
                           <p>To generate a gist for the entire document, specify a value of '<code class="codeph">GENERIC</code>' for <code class="codeph">pov</code>. To generate a theme summary for a single theme in a document, specify the theme as the value for <code class="codeph">pov</code>. 
                           </p>
                           <p>When using result table storage, if you do not specify a value for <code class="codeph">pov</code>, then this procedure returns the generic gist plus up to 50 theme summaries for the document.
                           </p>
                           <p>When using in-memory result storage to a <code class="codeph">CLOB</code>, you must specify a <code class="codeph">pov</code>. However, if you do not specify a <code class="codeph">pov</code>, then this procedure generates only a generic gist for the document. 
                           </p>
                           <div class="infoboxnote" id="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-79E1F023-AD68-425B-A702-21FDAB8E05F7">
                              <p class="notep1">Note:</p>
                              <p>The <code class="codeph">pov</code> parameter is case sensitive. To return a gist for a document, specify '<code class="codeph">GENERIC</code>' in all uppercase. To return a theme summary, specify the theme exactly as it is generated for the document.
                              </p>
                              <p>Only the themes generated by <a href="CTX_DOC-package.html#GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886">THEMES</a> for a document can be used as input for <code class="codeph">pov</code>.
                              </p>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-5C8C8179-05C1-4FDD-8632-EC9A33C8FA7F">
                              <!-- --></a>numParagraphs
                        </dt>
                        <dd>
                           <p>Specify the maximum number of document paragraphs (or sentences) selected for the document gist or theme summaries. The default is 16.</p>
                           <div class="infoboxnote" id="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-F2F18B60-54C6-448C-A151-5601CF8B3847">
                              <p class="notep1">Note:</p>
                              <p>The <code class="codeph">numParagraphs</code> parameter is used only when this parameter yields a smaller gist or theme summary size than the gist or theme summary size yielded by the <code class="codeph">maxPercent</code> parameter. 
                              </p>
                              <p>This means that the system always returns the smallest size gist or theme summary.</p>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-2D0CE871-F363-4651-9D2D-109733D28C62">
                              <!-- --></a>maxPercent
                        </dt>
                        <dd>
                           <p>Specify the maximum number of document paragraphs (or sentences) selected for the document gist or theme summaries as a percentage of the total paragraphs (or sentences) in the document. The default is 10.</p>
                           <div class="infoboxnote" id="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-AF646DD5-8503-443C-B068-A8FC389D0959">
                              <p class="notep1">Note:</p>
                              <p>The <code class="codeph">maxPercent</code> parameter is used only when this parameter yields a smaller gist or theme summary size than the gist or theme summary size yielded by the <code class="codeph">numParagraphs</code> parameter.
                              </p>
                              <p>This means that the system always returns the smallest size gist or theme summary. </p>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-9D1E8999-FF6E-4F9C-901C-A39A7AB44F3D">
                              <!-- --></a>num_themes
                        </dt>
                        <dd>
                           <p>Specify the number of theme summaries to produce when you do not specify a value for <code class="codeph">pov</code>. For example, if you specify 10, this procedure returns the top 10 theme summaries. The default is 50.
                           </p>
                           <p>If you specify 0 or NULL, then this procedure returns all themes in a document. If the document contains more than 50 themes, only the top 50 themes show conceptual hierarchy.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-ADDECB98-90C4-4D4C-829C-9E22A5E43120">
                              <!-- --></a>use_saved_copy
                        </dt>
                        <dd>
                           <p>Specify whether to refer to the $D table to fetch the copy of the document, and what action to take when the copy of the document is not available in the $D table. </p>
                           <p>You can specify one of the following values for the <code class="codeph">use_saved_copy</code> parameter:
                           </p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then fetch the document from the data store.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_ERROR</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then show an error message. Specify this value when you want to implement a specific fallback logic when the copy of the document is not available in the $D table. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_IGNORE</code>: Always fetch the document from the data store.
                           </p>
                        </li>
                     </ul>
                     <p>The default value is <code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521__GUID-73C4A606-8EF8-41B3-91C3-727A78D63F58">Examples</p>
                     <p>In-Memory Gist</p>
                     <p>The following example generates a non-default size generic gist of at most 10 paragraphs. The result is stored in memory in a <code class="codeph">CLOB</code> locator. The code then de-allocates the returned <code class="codeph">CLOB</code> locator after using it.
                     </p><pre class="oac_no_warn" dir="ltr">set serveroutput on;
declare
  gklob clob;
  amt number := 40;
  line varchar2(80);

begin
 ctx_doc.gist('newsindex','34',gklob, pov =&gt; 'GENERIC',numParagraphs =&gt; 10);
  -- gklob is NULL when passed-in, so ctx-doc.gist will allocate a temporary
  -- CLOB for us and place the results there.
  
  dbms_lob.read(gklob, amt, 1, line);
  dbms_output.put_line('FIRST 40 CHARS ARE:'||line);
  -- have to de-allocate the temp lob
  dbms_lob.freetemporary(gklob);
 end;</pre><p>Result Table Gists</p>
                     <p>The following example creates a gist table called <code class="codeph">CTX_GIST</code>:
                     </p><pre class="oac_no_warn" dir="ltr">create table CTX_GIST (query_id  number,
                       pov       varchar2(80),
                       gist      CLOB);</pre><p><a id="d98925e1150" class="indexterm-anchor"></a><a id="d98925e1154" class="indexterm-anchor"></a>Gists and Theme Summaries
                     </p>
                     <p>The following example returns a default sized paragraph-level gist for document 34 as well as the top 10 theme summaries in the document: </p><pre class="oac_no_warn" dir="ltr">begin
<span>  </span> ctx_doc.gist('newsindex','34','CTX_GIST', 1, num_themes=&gt;10);
end;
</pre><p>The following example generates a non-default size gist of at most 10 paragraphs:</p><pre class="oac_no_warn" dir="ltr">begin
  ctx_doc.gist('newsindex','34','CTX_GIST',1,pov =&gt;'GENERIC',numParagraphs=&gt;10);
end;
</pre><p>The following example generates a gist whose number of paragraphs is at most 10 percent of the total paragraphs in document:</p><pre class="oac_no_warn" dir="ltr">begin 
  ctx_doc.gist('newsindex','34','CTX_GIST',1,pov =&gt; 'GENERIC',  maxPercent =&gt; 10);
end;</pre><p>Theme Summary</p>
                     <p>The following example returns a paragraph-level theme summary for <span class="italic">insects</span> for document 34. The default theme summary size is returned.
                     </p><pre class="oac_no_warn" dir="ltr">begin
   ctx_doc.gist('newsindex','34','CTX_GIST',1, pov =&gt; 'insects');
end;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF23909"></a><a id="CCREF99090"></a><a id="CCREF23910"></a><a id="CCREF23911"></a><a id="CCREF0706"></a><div class="props_rev_3"><a id="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511" name="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511"></a><h3 id="CCREF-GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511" class="sect3"><span class="enumeration_section">9.4 </span>HIGHLIGHT 
               </h3>
               <div>
                  <div class="section">
                     <p>Use the <code class="codeph">CTX_DOC.HIGHLIGHT</code> procedure to generate highlight offsets for a document. The offset information is generated for the terms in the document that satisfy the query you specify. These highlighted terms are either the words that satisfy a word query or the themes that satisfy an <code class="codeph">ABOUT</code> query.
                     </p>
                     <p>You can generate highlight offsets for either plaintext or HTML versions of the document. The table returned by <code class="codeph">CTX_DOC.HIGHLIGHT</code> does not include any graphics found in the original document. Apply the offset information to the same documents filtered with CTX_DOC.<a href="CTX_DOC-package.html#GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6">FILTER </a>.
                     </p>
                     <p>You usually call this procedure after a query, from which you identify the document to be processed. You can store the highlight offsets to either an in-memory PL/SQL table or a result table. </p>
                     <p>Note that for queries that have predicates used mainly for filtering documents at query time, the predicates are ignored during highlighting. This applies to <code class="codeph">SNIPPET</code>, <code class="codeph">MARKUP</code> and <code class="codeph">HIGHLIGHT</code> procedures. The following predicates are treated as filter predicates for this purpose: <code class="codeph">SDATA</code>, <code class="codeph">HASPATH</code>, and <code class="codeph">WITHIN</code>/<code class="codeph">INPATH</code> searching inside XML attributes. 
                     </p>
                     <p>See CTX_DOC.<a href="CTX_DOC-package.html#GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06">POLICY_HIGHLIGHT</a> for a version of this procedure that does not require an index.
                     </p>
                     <p>The performance of the procedures <a href="CTX_DOC-package.html#GUID-07604453-9C9A-45EB-BF43-8CD565379F22">SNIPPET</a>, <code class="codeph">HIGHLIGHT</code>, and <a href="CTX_DOC-package.html#GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9">MARKUP </a> can be improved by using the forward index feature of Oracle Text.
                     </p>
                     <div class="infoboxnotealso" id="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-7D0A50E9-948A-4E68-A289-B1EBE7D4C7F9">
                        <p class="notep1">See Also:</p>
                        <p> <a href="../ccapp/indexing-with-oracle-text.html#CCAPP9542" target="_blank"><span class="italic">Oracle Text Application Developer's Guide</span></a> for more information about forward index 
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-9C037D24-06F0-44F9-864C-FB6A80289AD7">Syntax 1: In-Memory Result Storage</p><pre class="oac_no_warn" dir="ltr">exec CTX_DOC.HIGHLIGHT(
        index_name  IN VARCHAR2,
        textkey     IN VARCHAR2,
        text_query  IN VARCHAR2,
        restab      IN OUT NOCOPY HIGHLIGHT_TAB,
        plaintext   IN BOOLEAN  DEFAULT FALSE,
        use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);

exec CTX_DOC.HIGHLIGHT_CLOB_QUERY(
        index_name  IN VARCHAR2,
        textkey     IN VARCHAR2,
        text_query  IN CLOB,
        restab      IN OUT NOCOPY HIGHLIGHT_TAB,
        plaintext   IN BOOLEAN DEFAULT FALSE,
        use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-3E3F37EE-6B8E-49FD-A68B-28DAAF09836E">Syntax 2: Result Table Storage</p><pre class="oac_no_warn" dir="ltr">exec CTX_DOC.HIGHLIGHT(
          index_name  IN VARCHAR2, 
          textkey     IN VARCHAR2, 
          text_query  IN VARCHAR2, 
          restab      IN VARCHAR2, 
          query_id    IN NUMBER   DEFAULT 0,
          plaintext   IN BOOLEAN  DEFAULT FALSE,
          use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);

exec CTX_DOC.HIGHLIGHT_CLOB_QUERY(
          index_name  IN VARCHAR2,
          textkey     IN VARCHAR2,
          text_query  IN CLOB,
          restab      IN VARCHAR2,
          query_id    IN NUMBER DEFAULT 0,
          plaintext   IN BOOLEAN DEFAULT FALSE,
          use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);</pre><dl>
                        <dt class="dlterm"><a name="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-6D120A61-5BC8-49DB-A1B0-D6355B3FAC2D">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index associated with the text column containing the document identified by <tt>textkey</tt>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-5A5FFE1B-7656-4C8A-A2D5-C397F47DB321">
                              <!-- --></a>textkey
                        </dt>
                        <dd>
                           <p>Specify the unique identifier (usually the primary key) for the document. </p>
                           <p>The <tt>textkey</tt> parameter can be as follows:
                           </p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>a single column primary key value</p>
                        </li>
                        <li>
                           <p>encoded specification for a composite (multiple column) primary key. Use the CTX_DOC.<a href="CTX_DOC-package.html#GUID-FCB1A16D-DFFA-4261-8C2E-96DB9D2E2C1A">PKENCODE </a> procedure.
                           </p>
                        </li>
                        <li>
                           <p>the rowid of the row containing the document</p>
                        </li>
                     </ul>
                     <p>Toggle between primary key and rowid identification using CTX_DOC.<a href="CTX_DOC-package.html#GUID-65442C38-17F7-4BF9-89B4-35945EDCE92A">SET_KEY_TYPE</a>.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-F5A75CAE-3A0D-4496-9EF0-267B2091C1DF">
                              <!-- --></a>text_query
                        </dt>
                        <dd>
                           <p>Specify the original query expression used to retrieve the document. If NULL, no highlights are generated. </p>
                           <p>If <code class="codeph">text_query</code> includes wildcards, stemming, fuzzy matching which result in stopwords being returned, <code class="codeph">HIGHLIGHT</code> does not highlight the stopwords.
                           </p>
                           <p>If <code class="codeph">text_query</code> contains the threshold operator, the operator is ignored. The <code class="codeph">HIGHLIGHT</code> procedure always returns highlight information for the entire result set.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-BE150BE1-413C-4A95-85DB-E9D7007855FB">
                              <!-- --></a>restab 
                        </dt>
                        <dd>
                           <p>You can specify that this procedure store highlight offsets to either a table or to an in-memory PL/SQL table. </p>
                           <p>To store results to a table specify the name of the table. The table must exist before you call this procedure.</p>
                           <div class="infoboxnotealso" id="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-436E93CD-7516-4F82-B42C-8DE102C01696">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="oracle-text-result-tables.html#GUID-4168E86D-32D5-4C32-BE1A-685ACAEAB46C">Highlight Table</a>"</span> in <a href="oracle-text-result-tables.html#GUID-FF9744A0-D81C-45B1-8289-B42DC4211F75"> Oracle Text Result Tables</a> for more information about the structure of the highlight result table.
                              </p>
                           </div>
                           <p>To store results to an in-memory table, specify the name of the in-memory table of type <code class="codeph">CTX_DOC.HIGHLIGHT_TAB</code>. The <code class="codeph">HIGHLIGHT_TAB</code> datatype is defined as follows:
                           </p><pre class="oac_no_warn" dir="ltr">type highlight_rec is record (
  offset number,
  length number
);
type highlight_tab is table of highlight_rec index by binary_integer;
</pre><p><code class="codeph">CTX_DOC.HIGHLIGHT</code> clears <code class="codeph">HIGHLIGHT_TAB</code> before the operation.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-0228F1DC-E385-4274-8646-BF761E9CAB0B">
                              <!-- --></a>query_id   
                        </dt>
                        <dd>
                           <p>Specify the identifier used to identify the row inserted into <tt>restab</tt>. When <tt>query_id</tt> is not specified or set to <code class="codeph">NULL</code>, it defaults to 0. You must manually truncate the table specified in <tt>restab</tt>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-1F299BF9-FF3E-49C7-A4DE-8C3A534B1F05">
                              <!-- --></a>plaintext
                        </dt>
                        <dd>
                           <p>Specify <code class="codeph">TRUE</code> to generate a plaintext offsets of the document. Specify <code class="codeph">FALSE</code> to generate HTML offsets of the document if you are using the <code class="codeph">AUTO_FILTER</code> filter or indexing HTML documents.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-DCAC655A-0A47-4D6F-AD47-827F2D5C21D9">
                              <!-- --></a>use_saved_copy
                        </dt>
                        <dd>
                           <p>Specify whether to refer to the $D table to fetch the copy of the document, and what action to take when the copy of the document is not available in the $D table. The default value is <code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>.
                           </p>
                           <p>You can specify one of the following values for the <code class="codeph">use_saved_copy</code> parameter:
                           </p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then fetch the document from the data store.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_ERROR</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then show an error message. Specify this value when you want to implement a specific fallback logic when the copy of the document is not available in the $D table. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_IGNORE</code>: Always fetch the document from the data store.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-FC190038-4BDE-4FEF-A98D-C11B7A66E6C4">Examples</p>
                     <p>Create Highlight Table<a id="d98925e1529" class="indexterm-anchor"></a></p>
                     <p>Create the highlight table to store the highlight offset information:</p><pre class="oac_no_warn" dir="ltr">create table hightab(query_id number, 
                     offset number, 
                     length number);</pre><p>Word Highlighting in the Presence of Filters<a id="d98925e1539" class="indexterm-anchor"></a></p>
                     <p>When performing highlight on queries such as the following, only the keyword ("dog" in these examples) will be highlighted. The filtering predicates after the <code class="codeph">AND</code> operator will be ignored.
                     </p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.highlight('newsindex', '20', 'dog AND cat WITHIN titlesection@name', 'hightab', 0, FALSE);
end;
begin
ctx_doc.highlight('newsindex', '20', 'dog AND SDATA(price &gt; 100)', 'hightab', 0, FALSE);
end;</pre><p>Word Highlight Offsets</p>
                     <p>T<a id="d98925e1554" class="indexterm-anchor"></a>o obtain HTML highlight offset information for document 20 for the word <span class="italic">dog</span>:
                     </p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.highlight('newsindex', '20', 'dog', 'hightab', 0, FALSE);
end;

begin
ctx_doc.highlight('newsindex', '20', 'dog AND cat WITHIN titlesection', 'hightab', 0, FALSE);
end;</pre><p>Theme Highlight Offsets<a id="d98925e1566" class="indexterm-anchor"></a><a id="d98925e1570" class="indexterm-anchor"></a></p>
                     <p>Assuming the index <span class="italic">newsindex</span> has a theme component, obtain HTML highlight offset information for the theme query of <span class="italic">politics</span> by issuing the following query:
                     </p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.highlight('newsindex', '20', 'about(politics)', 'hightab', 0, FALSE);
end;
</pre><p>The output for this statement are the offsets to highlighted words and phrases that represent the theme of <span class="italic">politics</span> in the document.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-7D6F285C-95F3-40C2-A43C-ECDE057275AF">Restrictions</p>
                     <p><code class="codeph">CTX_DOC.HIGHLIGHT</code> does not support the use of query templates or highlighting XML attribute values.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511__GUID-5A0AD4A5-A15F-4407-A424-9A3A5BB178B9">Related Topics</p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06">POLICY_HIGHLIGHT</a>"</span></p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9">MARKUP </a>"</span></p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-07604453-9C9A-45EB-BF43-8CD565379F22">SNIPPET</a>"</span></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF0708"></a><div class="props_rev_3"><a id="GUID-D56BC634-3A96-4B30-A449-CB0AA2D613E4" name="GUID-D56BC634-3A96-4B30-A449-CB0AA2D613E4"></a><h3 id="CCREF-GUID-D56BC634-3A96-4B30-A449-CB0AA2D613E4" class="sect3"><span class="enumeration_section">9.5 </span>IFILTER
               </h3>
               <div>
                  <div class="section">
                     <p>Use this procedure to filter binary data to text.</p>
                     <p>This procedure takes binary data (<code class="codeph">BLOB IN</code>), filters the data with the <code class="codeph">AUTO_FILTER</code> filter, and writes the text version to a <code class="codeph">CLOB</code>. (Any graphics in the original document are ignored.) <code class="codeph">CTX_DOC.IFILTER</code> employs the safe callout, and it does not require an index, as <code class="codeph">CTX_DOC.FILTER</code> does.
                     </p>
                     <div class="infoboxnote" id="GUID-D56BC634-3A96-4B30-A449-CB0AA2D613E4__GUID-4CDC6525-6EEF-42A6-9552-E613B82CCA39">
                        <p class="notep1">Note:</p>
                        <p>This procedure will not be supported in future releases. Applications should use CTX_DOC.<a href="CTX_DOC-package.html#GUID-CFA758A8-BAF3-4888-8A14-A29928C5D53D">POLICY_FILTER</a> instead.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D56BC634-3A96-4B30-A449-CB0AA2D613E4__GUID-08035CF3-3597-4C3E-BEC9-DD9A9A669BEB">Requirements</p>
                     <p>Because <code class="codeph">CTX_DOC.IFILTER</code> employs the safe callout mechanism, the SQL*Net listener must be running and configured for <code class="codeph">extproc</code> agent startup.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D56BC634-3A96-4B30-A449-CB0AA2D613E4__GUID-BD3E65C9-F58D-4EEE-B56E-9C432D6192EF">Syntax</p><pre class="oac_no_warn" dir="ltr">CTX_DOC.IFILTER(data IN BLOB, text IN OUT NOCOPY CLOB);</pre><dl>
                        <dt class="dlterm"><a name="GUID-D56BC634-3A96-4B30-A449-CB0AA2D613E4__GUID-1F31DDCB-E8FC-4F65-A4CD-35C99613C80A">
                              <!-- --></a>data
                        </dt>
                        <dd>
                           <p>Specify the binary data to be filtered.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D56BC634-3A96-4B30-A449-CB0AA2D613E4__GUID-64D86188-D13B-4961-AA6A-F60BC30A3D26">
                              <!-- --></a>text
                        </dt>
                        <dd>
                           <p>Specify the destination <code class="codeph">CLOB</code>. The filtered data is placed in here. This parameter must be a valid <code class="codeph">CLOB</code> locator that is writable. Passing <code class="codeph">NULL</code> or a non-writable <code class="codeph">CLOB</code> will result in an error. Filtered text will be appended to the end of existing content, if any.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D56BC634-3A96-4B30-A449-CB0AA2D613E4__GUID-02EC5283-514B-4435-ADB7-5EAA330D0410">Example</p>
                     <p>The document text used in a <code class="codeph">MATCHES</code> query can be <code class="codeph">VARCHAR2</code> or <code class="codeph">CLOB</code>. It does not accept <code class="codeph">BLOB</code> input, so you cannot match filtered documents directly. Instead, you must filter the binary content to <code class="codeph">CLOB</code> using the <code class="codeph">AUTO_FILTER</code> filter. Assuming the document data is in bind variable <code class="codeph">:doc_blob</code>: 
                     </p><pre class="oac_no_warn" dir="ltr">  declare
    doc_text clob;
  begin
    -- create a temporary CLOB to hold the document text
    dbms_lob.createtemporary(doc_text, TRUE, DBMS_LOB.SESSION);

    -- call ctx_doc.ifilter to filter the BLOB to CLOB data
    ctx_doc.ifilter(:doc_blob, doc_text);

    -- now do the matches query using the CLOB version
    for c1 in (select * from queries where matches(query_string, doc_text)&gt;0)
    loop
      -- do what you need to do here
    end loop;

    dbms_lob.freetemporary(doc_text);
  end;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF23912"></a><a id="CCREF23913"></a><a id="CCREF23914"></a><a id="CCREF99091"></a><a id="CCREF23915"></a><a id="CCREF0710"></a><div class="props_rev_3"><a id="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9" name="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9"></a><h3 id="CCREF-GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9" class="sect3"><span class="enumeration_section">9.6 </span>MARKUP 
               </h3>
               <div>
                  <div class="section">
                     <p>The <code class="codeph">CTX_DOC.MARKUP</code> procedure takes a query specification and a document textkey and returns a version of the document in which the query terms are marked up. These marked-up terms are either the words that satisfy a word query or the themes that satisfy an <code class="codeph">ABOUT</code> query.
                     </p>
                     <p>You can set the marked-up output to be either plaintext or HTML. The marked-up document returned by <code class="codeph">CTX_DOC.MARKUP</code> does not include any graphics found in the original document.
                     </p>
                     <p>You can use one of the predefined tag sets for marking highlighted terms, including a tag sequence that enables HTML navigation.</p>
                     <p>You usually call <code class="codeph">CTX_DOC.MARKUP</code> after a query, from which you identify the document to be processed.
                     </p>
                     <p>You can store the marked-up document either in memory or in a result table.</p>
                     <p>Note that for queries that have predicates used mainly for filtering documents at query time, the predicates are ignored during <code class="codeph">MARKUP</code>. The following predicates are treated as filter predicates for this purpose: <code class="codeph">SDATA</code>, <code class="codeph">HASPATH</code>, and <code class="codeph">WITHIN</code>/<code class="codeph">INPATH</code> searching inside XML attributes. 
                     </p>
                     <p>See CTX_DOC.<a href="CTX_DOC-package.html#GUID-74E74073-E7E9-483E-91EB-C714F726E95A">POLICY_MARKUP</a> for a version of this procedure that does not require an index.
                     </p>
                     <p>The performance of the procedures <a href="CTX_DOC-package.html#GUID-07604453-9C9A-45EB-BF43-8CD565379F22">SNIPPET</a>, <a href="CTX_DOC-package.html#GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511">HIGHLIGHT</a>, and <code class="codeph">MARKUP</code> can be improved by using the forward index feature of Oracle Text.
                     </p>
                     <div class="infoboxnotealso" id="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-7A226861-627C-4E44-8A93-9E5286088873">
                        <p class="notep1">See Also:</p>
                        <p> <a href="../ccapp/indexing-with-oracle-text.html#CCAPP9542" target="_blank"><span class="italic">Oracle Text Application Developer's Guide</span></a> for more information about forward index
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-1F35CBA5-16C6-48A5-8C5C-5742D408E0EE">
                        <p class="notep1">Note:</p>
                        <p>Oracle Text does not guarantee well-formed output from <code class="codeph">CTX.DOC.MARKUP</code>, especially for terms that are already marked up with HTML or XML. In particular, unexpected nesting of markup tags may occasionally result.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-C24E3B07-C3D3-464E-A2B2-919494B90AA3">Syntax 1: In-Memory Result Storage</p><pre class="oac_no_warn" dir="ltr">exec CTX_DOC.MARKUP( </pre><pre class="oac_no_warn" dir="ltr">index_name     IN VARCHAR2, 
textkey        IN VARCHAR2, 
text_query     IN VARCHAR2, 
restab         IN OUT NOCOPY CLOB, 
plaintext      IN BOOLEAN   DEFAULT FALSE, 
tagset         IN VARCHAR2  DEFAULT 'TEXT_DEFAULT', 
starttag       IN VARCHAR2  DEFAULT NULL, 
endtag         IN VARCHAR2  DEFAULT NULL, 
prevtag        IN VARCHAR2  DEFAULT NULL, 
nexttag        IN VARCHAR2  DEFAULT NULL,
use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);

exec CTX_DOC.MARKUP_CLOB_QUERY(
index_name     IN VARCHAR2,
textkey        IN VARCHAR2,
text_query     IN CLOB,
restab         IN OUT NOCOPY CLOB,
plaintext      IN BOOLEAN DEFAULT FALSE,
tagset         IN VARCHAR2 DEFAULT 'TEXT_DEFAULT',
starttag       IN VARCHAR2 DEFAULT NULL,
endtag         IN VARCHAR2 DEFAULT NULL,
prevtag        IN VARCHAR2 DEFAULT NULL,
nexttag        IN VARCHAR2 DEFAULT NULL,
use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-5C2D3BF9-CA75-4F7E-BFEF-850A3B60A0B5">Syntax 2: Result Table Storage</p><pre class="oac_no_warn" dir="ltr">exec CTX_DOC.MARKUP( </pre><pre class="oac_no_warn" dir="ltr">index_name     IN VARCHAR2, 
textkey        IN VARCHAR2, 
text_query     IN VARCHAR2, 
restab         IN VARCHAR2, 
query_id       IN NUMBER    DEFAULT 0,  
plaintext      IN BOOLEAN   DEFAULT FALSE, 
tagset         IN VARCHAR2  DEFAULT 'TEXT_DEFAULT', 
starttag       IN VARCHAR2  DEFAULT NULL, 
endtag         IN VARCHAR2  DEFAULT NULL, 
prevtag        IN VARCHAR2  DEFAULT NULL, 
nexttag        IN VARCHAR2  DEFAULT NULL,
use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);

exec CTX_DOC.MARKUP_CLOB_QUERY(
index_name     IN VARCHAR2,
textkey        IN CLOB,
text_query     IN VARCHAR2,
restab         IN VARCHAR2,
query_id       IN NUMBER DEFAULT 0,
plaintext      IN BOOLEAN DEFAULT FALSE,
tagset         IN VARCHAR2 DEFAULT 'TEXT_DEFAULT',
starttag       IN VARCHAR2 DEFAULT NULL,
endtag         IN VARCHAR2 DEFAULT NULL,
prevtag        IN VARCHAR2 DEFAULT NULL,
nexttag        IN VARCHAR2 DEFAULT NULL,
use_saved_copy IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);</pre><dl>
                        <dt class="dlterm"><a name="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-E23716F0-228B-48F9-8571-BA6DD436891B">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index associated with the text column containing the document identified by <tt>textkey</tt>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-1C52B079-C60F-459A-B1BC-472D6F0BB3CD">
                              <!-- --></a>textkey
                        </dt>
                        <dd>
                           <p>Specify the unique identifier (usually the primary key) for the document. </p>
                           <p>The <tt>textkey</tt> parameter can be as follows:
                           </p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A single column primary key value</p>
                        </li>
                        <li>
                           <p>Encoded specification for a composite (multiple column) primary key. Use the CTX_DOC.<a href="CTX_DOC-package.html#GUID-FCB1A16D-DFFA-4261-8C2E-96DB9D2E2C1A">PKENCODE </a> procedure.
                           </p>
                        </li>
                        <li>
                           <p>The rowid of the row containing the document</p>
                        </li>
                     </ul>
                     <p>Toggle between primary key and rowid identification using CTX_DOC.<a href="CTX_DOC-package.html#GUID-65442C38-17F7-4BF9-89B4-35945EDCE92A">SET_KEY_TYPE</a>.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-094018FF-A27F-4393-AD7A-7322BFBCBDBD">
                              <!-- --></a>text_query
                        </dt>
                        <dd>
                           <p>Specify the original query expression used to retrieve the document. </p>
                           <p>If <tt>text_query</tt> includes wildcards, stemming, fuzzy matching which result in stopwords being returned, <code class="codeph">MARKUP</code> does not highlight the stopwords.
                           </p>
                           <p>If <tt>text_query</tt> contains the threshold operator, the operator is ignored. The <code class="codeph">MARKUP</code> procedure always returns highlight information for the entire result set.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-20D5B13C-6301-4273-AF79-F5310CB4FBE9">
                              <!-- --></a>restab 
                        </dt>
                        <dd>
                           <p>You can specify that this procedure store the marked-up text to either a table or to an in-memory <code class="codeph">CLOB</code>. 
                           </p>
                           <p>To store results to a table specify the name of the table. The result table must exist before you call this procedure.</p>
                           <div class="infoboxnotealso" id="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-4BBC2098-7F87-43A8-A0E8-13211D3A04E8">
                              <p class="notep1">See Also:</p>
                              <p>For more information about the structure of the markup result table, see <span class="q">"<a href="oracle-text-result-tables.html#GUID-F1C95C5C-7D81-4DA4-8116-07AD92E777BF">Markup Table</a>"</span> in <a href="oracle-text-result-tables.html#GUID-FF9744A0-D81C-45B1-8289-B42DC4211F75"> Oracle Text Result Tables</a>.
                              </p>
                           </div>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>To store results in memory, specify the name of the CLOB locator. If <tt>restab</tt> is <code class="codeph">NULL</code>, a temporary CLOB is allocated and returned. You must de-allocate the locator after using it. 
                     </p>
                     <p>If <tt>restab</tt> is not <code class="codeph">NULL</code>, the CLOB is truncated before the operation.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-282F908C-E76D-4AF3-A052-12A870BD48C3">
                              <!-- --></a>query_id
                        </dt>
                        <dd>
                           <p>Specify the identifier used to identify the row inserted into <tt>restab</tt>.
                           </p>
                           <p>When <tt>query_id</tt> is not specified or set to <code class="codeph">NULL</code>, it defaults to 0. You must manually truncate the table specified in <tt>restab</tt>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-66382DEF-E7C0-4638-8527-231D4788BA61">
                              <!-- --></a>plaintext
                        </dt>
                        <dd>
                           <p>Specify <code class="codeph">TRUE</code> to generate plaintext marked-up document. Specify <code class="codeph">FALSE</code> to generate a marked-up HTML version of document if you are using the <code class="codeph">AUTO_FILTER</code> filter or indexing HTML documents.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__BABDADEI">
                              <!-- --></a>tagset
                        </dt>
                        <dd>
                           <p>Specify one of the following predefined tag sets. The second and third columns show how the different tags are defined for each <code class="codeph">tagset</code>:
                           </p>
                           <div class="tblformal" id="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-2B42130B-75C9-4F5D-9374-D4544FE1074A">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table shows predefined tag sets and how the different tags are defined for each tagset." width="90%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="30%" id="d98925e2139">Tagset</th>
                                       <th align="left" valign="bottom" width="19%" id="d98925e2142">Tag</th>
                                       <th align="left" valign="bottom" width="52%" id="d98925e2145">Tag Value</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e2150" headers="d98925e2139 ">
                                          <p><code class="codeph">TEXT_DEFAULT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e2150 d98925e2142 ">
                                          <p>starttag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e2150 d98925e2145 ">
                                          <p><code class="codeph">&lt;&lt;&lt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e2162" headers="d98925e2139 ">
                                          <p><code class="codeph">TEXT_DEFAULT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e2162 d98925e2142 ">
                                          <p>endtag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e2162 d98925e2145 ">
                                          <p><code class="codeph">&gt;&gt;&gt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e2174" headers="d98925e2139 ">
                                          <p><code class="codeph">HTML_DEFAULT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e2174 d98925e2142 ">
                                          <p>starttag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e2174 d98925e2145 ">
                                          <p><code class="codeph">&lt;B&gt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e2186" headers="d98925e2139 ">
                                          <p><code class="codeph">HTML_DEFAULT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e2186 d98925e2142 ">
                                          <p>endtag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e2186 d98925e2145 ">
                                          <p><code class="codeph">&lt;/B&gt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e2198" headers="d98925e2139 ">
                                          <p><code class="codeph">HTML_NAVIGATE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e2198 d98925e2142 ">
                                          <p>starttag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e2198 d98925e2145 ">
                                          <p><code class="codeph">&lt;A NAME=ctx%CURNUM&gt;&lt;B&gt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e2210" headers="d98925e2139 ">
                                          <p><code class="codeph">HTML_NAVIGATE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e2210 d98925e2142 ">
                                          <p>endtag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e2210 d98925e2145 ">
                                          <p><code class="codeph">&lt;/B&gt;&lt;/A&gt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e2222" headers="d98925e2139 ">
                                          <p><code class="codeph">HTML_NAVIGATE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e2222 d98925e2142 ">
                                          <p>prevtag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e2222 d98925e2145 ">
                                          <p><code class="codeph">&lt;A HREF=#ctx%PREVNUM&gt;&amp;lt;&lt;/A&gt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e2234" headers="d98925e2139 ">
                                          <p><code class="codeph">HTML_NAVIGATE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e2234 d98925e2142 ">
                                          <p>nexttag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e2234 d98925e2145 ">
                                          <p><code class="codeph">&lt;A HREF=#ctx%NEXTNUM&gt;&amp;gt;&lt;/A&gt;</code></p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </dd>
                        <dt class="dlterm"><a name="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-A2656A1D-93B2-478A-973B-0FED6FC5D792">
                              <!-- --></a>starttag   
                        </dt>
                        <dd>
                           <p>Specify the character(s) inserted by <code class="codeph">MARKUP</code> to indicate the start of a highlighted term.
                           </p>
                           <p>The sequence of <tt>starttag, endtag, prevtag</tt> and <tt>nexttag</tt> with respect to the highlighted word is as follows:
                           </p><pre class="oac_no_warn" dir="ltr">... prevtag starttag <span class="italic">word</span> endtag nexttag...</pre></dd>
                        <dt class="dlterm"><a name="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-5BF22F01-58B2-47C6-800F-CA89F965EA7D">
                              <!-- --></a>endtag 
                        </dt>
                        <dd>
                           <p>Specify the character(s) inserted by <code class="codeph">MARKUP</code> to indicate the end of a highlighted term.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__BABBADIC">
                              <!-- --></a>prevtag
                        </dt>
                        <dd>
                           <p>Specify the markup sequence that defines the tag that navigates the user to the previous highlight. </p>
                           <p>In the markup sequences <tt>prevtag</tt> and <tt>nexttag</tt>, you can specify the following offset variables which are set dynamically:
                           </p>
                           <div class="tblformal" id="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-CDA3AAA1-AB9D-4D92-BF7C-FD00D81B77A1">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table shows offset variables and their values." width="90%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="29%" id="d98925e2298">Offset Variable</th>
                                       <th align="left" valign="bottom" width="71%" id="d98925e2301">Value</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d98925e2306" headers="d98925e2298 ">
                                          <p><code class="codeph">%CURNUM</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d98925e2306 d98925e2301 ">
                                          <p>the current offset number</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d98925e2314" headers="d98925e2298 ">
                                          <p><code class="codeph">%PREVNUM</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d98925e2314 d98925e2301 ">
                                          <p>the previous offset number</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d98925e2322" headers="d98925e2298 ">
                                          <p><code class="codeph">%NEXTNUM</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d98925e2322 d98925e2301 ">
                                          <p>the next offset number</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </dd>
                     </dl>
                     <p>See the description of the <code class="codeph">HTML_NAVIGATE </code><span class="q">"<a href="CTX_DOC-package.html#GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__BABDADEI">"tagset"</a>"</span> for an example.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-423E16D0-6072-4753-A21E-CAA200DDA349">
                              <!-- --></a>nexttag
                        </dt>
                        <dd>
                           <p>Specify the markup sequence that defines the tag that navigates the user to the next highlight tag. </p>
                           <p>Within the markup sequence, you can use the same offset variables you use for <tt>prevtag</tt>. See the explanation for <span class="q">"<a href="CTX_DOC-package.html#GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__BABBADIC">"prevtag"</a>"</span> and the <code class="codeph">HTML_NAVIGATE</code> <span class="q">"<a href="CTX_DOC-package.html#GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__BABDADEI">"tagset"</a>"</span> for an example.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-0BEDD685-C935-4EFD-9E67-56217384CEBC">
                              <!-- --></a>use_saved_copy
                        </dt>
                        <dd>
                           <p>Specify whether to refer to the $D table to fetch the copy of the document, and what action to take when the copy of the document is not available in the $D table. </p>
                           <p>You can specify one of the following values for the <code class="codeph">use_saved_copy</code> parameter:
                           </p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then fetch the document from the data store.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_ERROR</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then show an error message. Specify this value when you want to implement a specific fallback logic when the copy of the document is not available in the $D table. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_IGNORE</code>: Always fetch the document from the data store.
                           </p>
                        </li>
                     </ul>
                     <p>The default value is <code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-BF477696-0A18-436E-9C61-827CEA029F71">Examples</p>
                     <p>In-Memory Markup</p>
                     <p>The following code takes document (<span class="italic">the dog chases the cat</span>), performs the assigned markup on it, and stores the result in memory. 
                     </p><pre class="oac_no_warn" dir="ltr">set serveroutput on
 
drop table mark_tab;
create table mark_tab (id number primary key, text varchar2(80) );
insert into mark_tab values ('1', 'The dog chases the cat.');
 
create index mark_tab_idx on mark_tab(text)
        indextype is ctxsys.context parameters
        ('filter ctxsys.null_filter');
 
declare
mklob clob;
amt number := 40;
line varchar2(80);
 
begin
 ctx_doc.markup('mark_tab_idx','1','dog AND cat', mklob);
 -- mklob is NULL when passed-in, so ctx_doc.markup will
 -- allocate a temporary CLOB for us and place the results there.
 dbms_lob.read(mklob, amt, 1, line);
 dbms_output.put_line('FIRST 40 CHARS ARE:'||line);
 -- have to de-allocate the temp lob
 dbms_lob.freetemporary(mklob);
 end;
/
</pre><p>The output from this example shows what the marked-up document looks like:</p><pre class="oac_no_warn" dir="ltr">FIRST 40 CHARS ARE:  The &lt;&lt;&lt;dog&gt;&gt;&gt; chases the &lt;&lt;&lt;cat&gt;&gt;&gt;.</pre><p>Markup Table</p>
                     <p>Create<a id="d98925e2412" class="indexterm-anchor"></a><a id="d98925e2416" class="indexterm-anchor"></a> the highlight markup table to store the marked-up document as follows: 
                     </p><pre class="oac_no_warn" dir="ltr">create table markuptab (query_id  number,   
                        document  clob); </pre><p>Word Highlighting in HTML<a id="d98925e2425" class="indexterm-anchor"></a><a id="d98925e2429" class="indexterm-anchor"></a></p>
                     <p>You can also store your <code class="codeph">MARKUP</code> results in a table. To create HTML highlight markup for the words <span class="italic">dog</span> or <span class="italic">cat</span> for document 23, enter the following examples:
                     </p><pre class="oac_no_warn" dir="ltr">begin
  ctx_doc.markup(index_name =&gt; 'my_index',
                      textkey =&gt; '23',
                      text_query =&gt; 'dog|cat',
                      restab =&gt; 'markuptab',
                      query_id =&gt; '1',
                      tagset =&gt; 'HTML_DEFAULT');
end;

begin
  ctx_doc.markup(index_name =&gt; 'my_index',
                      textkey =&gt; '23',
                      text_query =&gt; 'dog AND cat WITHIN titlesection@name',
                      restab =&gt; 'markuptab',
                      query_id =&gt; '1',
                      tagset =&gt; 'HTML_DEFAULT');
end;</pre><p>Word Highlighting in the Presence of Filters</p>
                     <p>When performing markup on queries such as the following, only the keyword ("dog" in these examples) will be marked up. The filtering predicates after the <code class="codeph">AND</code> operator will be ignored.
                     </p><pre class="oac_no_warn" dir="ltr">begin
  ctx_doc.markup(index_name =&gt; 'my_index',
                      textkey =&gt; '23',
                      text_query =&gt; 'dog AND cat WITHIN titlesection@name',
                      restab =&gt; 'markuptab',
                      query_id =&gt; '1',
                      tagset =&gt; 'HTML_DEFAULT');
end;

begin
  ctx_doc.markup(index_name =&gt; 'my_index',
                      textkey =&gt; '23',
                      text_query =&gt; 'dog AND SDATA(price &gt; 100)',
                      restab =&gt; 'markuptab',
                      query_id =&gt; '1',
                      tagset =&gt; 'HTML_DEFAULT');
end;</pre><p>Theme Highlighting in HTML<a id="d98925e2458" class="indexterm-anchor"></a></p>
                     <p>To create HTML highlight markup for the theme of <span class="italic">politics</span> for document 23, enter the following statement:
                     </p><pre class="oac_no_warn" dir="ltr">begin
  ctx_doc.markup(index_name =&gt; 'my_index',
                      textkey =&gt; '23',
                      text_query =&gt; 'about(politics)',
                      restab =&gt; 'markuptab',
                      query_id =&gt; '1',
                      tagset =&gt; 'HTML_DEFAULT');
end;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-3BCFC259-AF9B-4DA6-A23F-BBE61B0B3C87">Restrictions</p>
                     <p><code class="codeph">CTX_DOC.MARKUP</code> does not support the use of query templates.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__GUID-AF696DCA-3EC1-4836-8A83-48CDCB75911F">Related Topics</p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-74E74073-E7E9-483E-91EB-C714F726E95A">POLICY_MARKUP</a>"</span></p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-07604453-9C9A-45EB-BF43-8CD565379F22">SNIPPET</a>"</span></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF23916"></a><div class="props_rev_3"><a id="GUID-FCB1A16D-DFFA-4261-8C2E-96DB9D2E2C1A" name="GUID-FCB1A16D-DFFA-4261-8C2E-96DB9D2E2C1A"></a><h3 id="CCREF-GUID-FCB1A16D-DFFA-4261-8C2E-96DB9D2E2C1A" class="sect3"><span class="enumeration_section">9.7 </span>PKENCODE 
               </h3>
               <div>
                  <div class="section">
                     <p>The <code class="codeph">CTX_DOC.PKENCODE</code> function converts a composite textkey list into a single string and returns the string.
                     </p>
                     <p>The string created by <code class="codeph">PKENCODE</code> can be used as the primary key parameter <tt>textkey</tt><span class="italic"> </span>in other <code class="codeph">CTX_DOC</code> procedures, such as CTX_DOC.<a href="CTX_DOC-package.html#GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886">THEMES</a> and CTX_DOC.<a href="CTX_DOC-package.html#GUID-5C46E3F4-2DD7-4DF0-8904-D4AAB7E2C521">GIST</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FCB1A16D-DFFA-4261-8C2E-96DB9D2E2C1A__GUID-67899D9A-F9E4-4C34-987E-BAC80233A7BE">Syntax</p><pre class="oac_no_warn" dir="ltr">CTX_DOC.PKENCODE(
         pk1    IN VARCHAR2,
         pk2    IN VARCHAR2 DEFAULT NULL, 
         pk4    IN VARCHAR2 DEFAULT NULL, 
         pk5    IN VARCHAR2 DEFAULT NULL, 
         pk6    IN VARCHAR2 DEFAULT NULL,
         pk7    IN VARCHAR2 DEFAULT NULL,
         pk8    IN VARCHAR2 DEFAULT NULL,
         pk9    IN VARCHAR2 DEFAULT NULL,
         pk10   IN VARCHAR2 DEFAULT NULL,
         pk11   IN VARCHAR2 DEFAULT NULL,
         pk12   IN VARCHAR2 DEFAULT NULL,
         pk13   IN VARCHAR2 DEFAULT NULL,
         pk14   IN VARCHAR2 DEFAULT NULL,
         pk15   IN VARCHAR2 DEFAULT NULL,
         pk16   IN VARCHAR2 DEFAULT NULL)
RETURN VARCHAR2;</pre><dl>
                        <dt class="dlterm"><a name="GUID-FCB1A16D-DFFA-4261-8C2E-96DB9D2E2C1A__GUID-BBF230E7-FBCE-4C61-9500-96D3C97FF816">
                              <!-- --></a>pk1-pk16
                        </dt>
                        <dd>
                           <p>Each PK argument specifies a column element in the composite textkey list. You can encode at most 16 column elements.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FCB1A16D-DFFA-4261-8C2E-96DB9D2E2C1A__GUID-B69EB69A-1C27-4187-8815-F977C85F5979">Returns</p>
                     <p>String that represents the encoded value of the composite textkey.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FCB1A16D-DFFA-4261-8C2E-96DB9D2E2C1A__GUID-15D86B1E-186F-4A41-962A-B3F0D9BE39DF">Example</p><pre class="oac_no_warn" dir="ltr">begin 
ctx_doc.gist('newsindex',CTX_DOC.PKENCODE('smith', 14), 'CTX_GIST');
end;
</pre><p>In this example, <span class="italic">smith</span> and <span class="italic">14</span> constitute the composite textkey value for the document.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2116"></a><div class="props_rev_3"><a id="GUID-CFA758A8-BAF3-4888-8A14-A29928C5D53D" name="GUID-CFA758A8-BAF3-4888-8A14-A29928C5D53D"></a><h3 id="CCREF-GUID-CFA758A8-BAF3-4888-8A14-A29928C5D53D" class="sect3"><span class="enumeration_section">9.8 </span>POLICY_FILTER
               </h3>
               <div>
                  <div class="section">
                     <p>Generates a plain text or an HTML version of a document. With this procedure, no <code class="codeph">CONTEXT</code> index is required.
                     </p>
                     <p>This procedure uses a trusted callout.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-CFA758A8-BAF3-4888-8A14-A29928C5D53D__GUID-8A229CFF-E43D-47BB-9737-F8366FE4AC40">Syntax</p><pre class="oac_no_warn" dir="ltr">ctx_doc.policy_filter(policy_name    in  VARCHAR2,
                      document       in [VARCHAR2|CLOB|BLOB|BFILE],
                      restab         in out nocopy CLOB,
                      plaintext      in BOOLEAN default FALSE,
                      language       in VARCHAR2 default NULL,
                      format         in VARCHAR2 default NULL,
                      charset        in VARCHAR2 default NULL);</pre><dl>
                        <dt class="dlterm"><a name="GUID-CFA758A8-BAF3-4888-8A14-A29928C5D53D__GUID-C3141946-5728-4984-93AE-4034C2CB317D">
                              <!-- --></a>policy_name
                        </dt>
                        <dd>
                           <p>Specify the policy name created with CTX_DDL.<a href="CTX_DDL-package.html#GUID-C7B9CE02-E9D7-45C5-BF9F-31A928EE75D3">CREATE_POLICY</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-CFA758A8-BAF3-4888-8A14-A29928C5D53D__GUID-2EAB4063-0E73-42CC-9264-5A744D79CB59">
                              <!-- --></a>document
                        </dt>
                        <dd>
                           <p>Specify the document to filter.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-CFA758A8-BAF3-4888-8A14-A29928C5D53D__GUID-FB3EDE07-8EF2-4381-99C1-3BBE4BF79F87">
                              <!-- --></a>restab
                        </dt>
                        <dd>
                           <p>Specify the name of the <code class="codeph">CLOB</code> locator.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-CFA758A8-BAF3-4888-8A14-A29928C5D53D__GUID-B385A819-802B-4F91-BFE5-6FB740AF09F9">
                              <!-- --></a>plaintext
                        </dt>
                        <dd>
                           <p>Specify <code class="codeph">TRUE</code> to generate a plaintext version of the document. Specify <code class="codeph">FALSE</code> to generate an HTML version of the document if you are using the <code class="codeph">AUTO_FILTER</code> filter or indexing HTML documents.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-CFA758A8-BAF3-4888-8A14-A29928C5D53D__GUID-D1F02A04-534C-4178-8D55-75FDDE958797">
                              <!-- --></a>language
                        </dt>
                        <dd>
                           <p>Specify the language of the document. Use an Oracle Text supported language value as you would in the language column of the base table. See <a href="oracle-text-indexing-elements.html#GUID-118602A6-7B96-4D66-9BAD-4747186894BE">BASIC_LEXER</a> in <a href="oracle-text-indexing-elements.html#GUID-22680996-89CF-4666-89E6-BE8B9431DB02" title="Use the SENTIMENT_CLASSIFIER type to create a preference for sentiment analysis queries. This classifier specifies preferences associated with a user-defined sentiment classifier preference. You must define a preference of this type before you use the CTX_CLS.SA_TRAIN_MODEL procedure to train the user-defined sentiment classifier.Starting with Oracle Database Release 18c, the indexed token maximum size is increased to 255 characters for single-byte character sets."> Oracle Text Indexing Elements</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-CFA758A8-BAF3-4888-8A14-A29928C5D53D__GUID-1323CE66-878C-4B80-8B80-A16F8A89E4B8">
                              <!-- --></a>format
                        </dt>
                        <dd>
                           <p>Specify the format of the document. Use an Oracle Text supported format value, either TEXT, BINARY or IGNORE as you would specify in the format column of the base table. For more information, see the format column description in <a href="oracle-text-SQL-statements-and-operators.html#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a> in <a href="oracle-text-SQL-statements-and-operators.html#GUID-4775F5FE-4569-4DF4-A7CA-B20EC6880CAB" title="This section describes the CREATE SEARCH INDEX statement as it pertains to creating a JSON search index."> Oracle Text SQL Statements and Operators </a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-CFA758A8-BAF3-4888-8A14-A29928C5D53D__GUID-0C1A517E-EF71-4A2F-8003-007DF0DC8D91">
                              <!-- --></a>charset
                        </dt>
                        <dd>
                           <p>Specify the character set of the document. Use an Oracle Text supported value as you would specify in the charset column of the base table. See <span class="q">"<a href="oracle-text-indexing-elements.html#GUID-24A7DF95-CDA5-4062-82D5-6DFC45F736BF">Filter Types</a>"</span>.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2117"></a><div class="props_rev_3"><a id="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3" name="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3"></a><h3 id="CCREF-GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3" class="sect3"><span class="enumeration_section">9.9 </span>POLICY_GIST
               </h3>
               <div>
                  <div class="section">
                     <p>Generates a gist or theme summary for document. You can generate paragraph-level or sentence-level gists or theme summaries. With this procedure, no <code class="codeph">CONTEXT</code> index is required. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-E23E9FC4-AE0A-4A99-B502-67110FFDEBA6">Syntax</p><pre class="oac_no_warn" dir="ltr">ctx_doc.policy_gist(policy_name      in VARCHAR2,
                    document         in [VARCHAR2|CLOB|BLOB|BFILE],
                    restab           in out nocopy CLOB,
                    glevel           in VARCHAR2 default 'P',
                    pov              in VARCHAR2 default 'GENERIC',
                    numParagraphs    in VARCHAR2 default NULL,
                    maxPercent       in NUMBER default NULL,
                    num_themes       in NUMBER default 50
                    language         in VARCHAR2 default NULL,
                    format           in VARCHAR2 default NULL,
                    charset          in VARCHAR2 default NULL
);</pre><dl>
                        <dt class="dlterm"><a name="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-9582EAEE-C9D6-43C3-98E3-DBA33C13CFFB">
                              <!-- --></a>policy_name
                        </dt>
                        <dd>
                           <p>Specify the policy name created with CTX_DDL.<a href="CTX_DDL-package.html#GUID-C7B9CE02-E9D7-45C5-BF9F-31A928EE75D3">CREATE_POLICY</a>. 
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-4A558027-D452-4680-ABD4-28DB57548102">
                              <!-- --></a>document
                        </dt>
                        <dd>
                           <p>Specify the document for which to generate the Gist or theme summary.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-E1911664-7335-4E96-97ED-DE667145A033">
                              <!-- --></a>restab
                        </dt>
                        <dd>
                           <p>Specify the name of the <code class="codeph">CLOB</code> locator.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-CFDDC512-6CE0-455D-BAA4-EFA78FDA0851">
                              <!-- --></a>glevel
                        </dt>
                        <dd>
                           <p>Specify the type of gist or theme summary to produce. The possible values are:</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic">P</span> for paragraph
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">S</span> for sentence
                           </p>
                        </li>
                     </ul>
                     <p>The default is <span class="italic">P</span>.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-089BAE41-A84C-4765-B331-3CD7EDAA7ED8">
                              <!-- --></a>pov
                        </dt>
                        <dd>
                           <p>Specify whether a gist or a single theme summary is generated. The type of gist or theme summary generated (sentence-level or paragraph-level) depends on the value specified for <code class="codeph">glevel</code>.
                           </p>
                           <p>To generate a gist for the entire document, specify a value of 'GENERIC' for <code class="codeph">pov</code>. To generate a theme summary for a single theme in a document, specify the theme as the value for <code class="codeph">pov</code>. 
                           </p>
                           <p>When using result table storage and you do not specify a value for <code class="codeph">pov</code>, this procedure returns the generic gist plus up to 50 theme summaries for the document.
                           </p>
                           <div class="infoboxnote" id="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-34DC30B4-DDFD-46B8-9036-D07637818F3F">
                              <p class="notep1">Note:</p>
                              <p>The <code class="codeph">pov</code> parameter is case sensitive. To return a gist for a document, specify '<code class="codeph">GENERIC</code>' in all uppercase. To return a theme summary, specify the theme <span class="italic">exactly</span> as it is generated for the document.
                              </p>
                              <p>Only the themes generated by <a href="CTX_DOC-package.html#GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886">THEMES</a> for a document can be used as input for <code class="codeph">pov</code>.
                              </p>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-1A8D8A3F-47C3-4699-A2AF-B7F4ED37770D">
                              <!-- --></a>numParagraphs
                        </dt>
                        <dd>
                           <p>Specify the maximum number of document paragraphs (or sentences) selected for the document gist or theme summaries. The default is 16.</p>
                           <div class="infoboxnote" id="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-C4A28880-C960-4B27-8D9C-B569DC27BA66">
                              <p class="notep1">Note:</p>
                              <p>The <code class="codeph">numParagraphs</code> parameter is used only when this parameter yields a smaller gist or theme summary size than the gist or theme summary size yielded by the <code class="codeph">maxPercent</code> parameter. 
                              </p>
                              <p>This means that the system always returns the smallest size gist or theme summary.</p>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-4C35BAA3-7B3A-4749-A341-14543FB0D839">
                              <!-- --></a>maxPercent
                        </dt>
                        <dd>
                           <p>Specify the maximum number of document paragraphs (or sentences) selected for the document gist or theme summaries as a percentage of the total paragraphs (or sentences) in the document. The default is 10.</p>
                           <div class="infoboxnote" id="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-2C7D388E-F0F2-4155-B510-EF202A22694E">
                              <p class="notep1">Note:</p>
                              <p>The <code class="codeph">maxPercent</code><span class="italic"> </span>parameter is used only when this parameter yields a smaller gist or theme summary size than the gist or theme summary size yielded by the <code class="codeph">numParagraphs</code> parameter.
                              </p>
                              <p>This means that the system always returns the smallest size gist or theme summary. </p>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-9F13F401-D7B4-4E3F-85E0-15D7AB14714C">
                              <!-- --></a>num_themes
                        </dt>
                        <dd>
                           <p>Specify the number of theme summaries to produce when you do not specify a value for <code class="codeph">pov</code>. For example, if you specify 10, this procedure returns the top 10 theme summaries. The default is 50.
                           </p>
                           <p>If you specify 0 or NULL, this procedure returns all themes in a document. If the document contains more than 50 themes, only the top 50 themes show conceptual hierarchy.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-9BD0E501-8D16-4703-91E4-FF2236E0C6B8">
                              <!-- --></a>language
                        </dt>
                        <dd>
                           <p>Specify the language of the document. Use an Oracle Text supported language value as you would in the language column of the base table. See <span class="q">"<a href="oracle-text-indexing-elements.html#GUID-93B17833-A046-468C-BE5F-2BD09A61935C">MULTI_LEXER</a>"</span>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-4C126140-03A8-439C-A362-1B75BF7B9D5A">
                              <!-- --></a>format
                        </dt>
                        <dd>
                           <p>Specify the format of the document. Use an Oracle Text supported format value, either TEXT, BINARY or IGNORE as you would specify in the format column of the base table. For more information, see the format column description in <span class="q">"<a href="oracle-text-SQL-statements-and-operators.html#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a>"</span>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F6BDC6E9-2C2A-46FA-8ABB-4529A4258DF3__GUID-DA69539B-40FA-49AA-B4F5-BB71FB27D936">
                              <!-- --></a>charset
                        </dt>
                        <dd>
                           <p>Specify the character set of the document. Use an Oracle Text supported value as you would specify in the charset column of the base table.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2118"></a><div class="props_rev_3"><a id="GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06" name="GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06"></a><h3 id="CCREF-GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06" class="sect3"><span class="enumeration_section">9.10 </span>POLICY_HIGHLIGHT
               </h3>
               <div>
                  <div class="section">
                     <p>Generates plain text or HTML highlighting offset information for a document. With this procedure, no <code class="codeph">CONTEXT</code> index is required.
                     </p>
                     <p>The offset information is generated for the terms in the document that satisfy the query you specify. These highlighted terms are either the words that satisfy a word query or the themes that satisfy an <code class="codeph">ABOUT</code> query.
                     </p>
                     <p>You can generate highlight offsets for either plaintext or HTML versions of the document. You can apply the offset information to the same documents filtered with CTX_DOC.<a href="CTX_DOC-package.html#GUID-66B252A2-4C02-4E11-80DF-71BECD3BAFD6">FILTER </a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06__GUID-C5505B65-0622-460D-BAD2-254E749CBEE0">Syntax</p><pre class="oac_no_warn" dir="ltr">exec ctx_doc.policy_highlight(
                         policy_name  in  VARCHAR2,
                         document     in  [VARCHAR2|CLOB|BLOB|BFILE],
                         text_query   in VARCHAR2,
                         restab       in out nocopy highlight_tab,
                         plaintext    in boolean FALSE
                         language     in VARCHAR2 default NULL,
                         format       in VARCHAR2 default NULL,
                         charset      in VARCHAR2 default NULL
);

exec ctx_doc.policy_highlight_clob_query(
                         policy_name  in VARCHAR2,
                         document     in [VARCHAR2|CLOB|BLOB|BFILE],
                         text_query   in CLOB,
                         restab       in out nocopy highlight_tab,
                         plaintext    in boolean FALSE
                         language     in VARCHAR2 default NULL,
                         format       in VARCHAR2 default NULL,
                         charset      in VARCHAR2 default NULL
);</pre><dl>
                        <dt class="dlterm"><a name="GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06__GUID-2E430F7A-7A50-4E3E-966B-7108B6677C26">
                              <!-- --></a>policy_name
                        </dt>
                        <dd>
                           <p>Specify the policy name created with CTX_DDL.<a href="CTX_DDL-package.html#GUID-C7B9CE02-E9D7-45C5-BF9F-31A928EE75D3">CREATE_POLICY</a>. 
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06__GUID-846E7211-6A82-449C-AFB7-378A05F217BC">
                              <!-- --></a>document
                        </dt>
                        <dd>
                           <p>Specify the document to generate highlighting offset information.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06__GUID-8C880682-2A5E-4F7D-ABF4-92D06F41727C">
                              <!-- --></a>text_query
                        </dt>
                        <dd>
                           <p>Specify the original query expression used to retrieve the document. If NULL, no highlights are generated. </p>
                           <p>If <code class="codeph">text_query</code> includes wildcards, stemming, or fuzzy matching which result in stopwords being returned, this procedure does not highlight the stopwords.
                           </p>
                           <p>If <code class="codeph">text_query</code> contains the threshold operator, the operator is ignored. This procedure always returns highlight information for the entire result set.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06__GUID-D78880F7-8344-4734-B696-4845073D0BC3">
                              <!-- --></a>restab 
                        </dt>
                        <dd>
                           <p>Specify the name of the <code class="codeph">highlight_tab</code> PL/SQL index-by-table type. 
                           </p>
                           <div class="infoboxnotealso" id="GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06__GUID-54A9D5F7-6E36-4B32-9DA7-27604992D216">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="CTX_DOC-package.html#GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511">HIGHLIGHT </a>"</span> for more information about the structure of the <code class="codeph">highlight_tab</code> table type 
                              </p>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06__GUID-54CB781A-A8BC-4CBB-BFEC-D213E14FFDBB">
                              <!-- --></a>plaintext
                        </dt>
                        <dd>
                           <p>Specify <code class="codeph">TRUE</code> to generate a plaintext offsets of the document. 
                           </p>
                           <p>Specify <code class="codeph">FALSE</code> to generate HTML offsets of the document if you are using the <code class="codeph">AUTO_FILTER</code> filter or indexing HTML documents.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06__GUID-88334298-863C-4BF2-B31A-2C5C9C858F60">
                              <!-- --></a>language
                        </dt>
                        <dd>
                           <p>Specify the language of the document. Use an Oracle Text supported language value as you would in the language column of the base table. See <span class="q">"<a href="oracle-text-indexing-elements.html#GUID-93B17833-A046-468C-BE5F-2BD09A61935C">MULTI_LEXER</a>"</span> in <a href="oracle-text-indexing-elements.html#GUID-22680996-89CF-4666-89E6-BE8B9431DB02" title="Use the SENTIMENT_CLASSIFIER type to create a preference for sentiment analysis queries. This classifier specifies preferences associated with a user-defined sentiment classifier preference. You must define a preference of this type before you use the CTX_CLS.SA_TRAIN_MODEL procedure to train the user-defined sentiment classifier.Starting with Oracle Database Release 18c, the indexed token maximum size is increased to 255 characters for single-byte character sets."> Oracle Text Indexing Elements</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06__GUID-4D1E452C-4624-4F34-937F-BBCDFC5F7459">
                              <!-- --></a>format
                        </dt>
                        <dd>
                           <p>Specify the format of the document. Use an Oracle Text supported format value, either TEXT, BINARY or IGNORE as you would specify in the format column of the base table. For more information, see the format column description under <span class="q">"<a href="oracle-text-SQL-statements-and-operators.html#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a>"</span>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06__GUID-210BD8D1-5F83-4E1A-88A4-57CA52063C81">
                              <!-- --></a>charset
                        </dt>
                        <dd>
                           <p>Specify the character set of the document. Use an Oracle Text supported value as you would specify in the charset column of the base table.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1E0B8D2A-8373-40D5-9546-FF56D8D20D06__GUID-CDCED3D3-3F77-46D5-A2E7-74CE4EBEB9DE">Restrictions</p>
                     <p><code class="codeph">CTX_DOC.POLICY_HIGHLIGHT</code> does not support the use of query templates.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF24102"></a><div class="props_rev_3"><a id="GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB" name="GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB"></a><h3 id="CCREF-GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB" class="sect3"><span class="enumeration_section">9.11 </span>POLICY_LANGUAGES
               </h3>
               <div>
                  <div class="section">
                     <p>Provides the ability to fetch the language for a section of text.</p>
                     <p>Returns a table of language descriptors and scores, where the score is the confidence level with which the system can assert that the supplied text is in the specific language.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB__GUID-31F9DB5F-8E27-471D-909C-00624FE0545A">Syntax</p><pre class="oac_no_warn" dir="ltr">CTX_DOC.POLICY_LANGUAGES (
   policy_name    IN VARCHAR2 | CLOB,
   document       IN VARCHAR2,
   restab         IN OUT NOCOPY CTX_DOC.LANGUAGE_TAB
);</pre><dl>
                        <dt class="dlterm"><a name="GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB__GUID-672F9E49-90C1-459A-B803-2A30C92298D4">
                              <!-- --></a>policy_name
                        </dt>
                        <dd>
                           <p>A policy that was previously created using the CTX_DDL.<a href="CTX_DDL-package.html#GUID-C7B9CE02-E9D7-45C5-BF9F-31A928EE75D3">CREATE_POLICY</a> method. If the specified policy includes a sectioning preference, the API will honor the sectioning preference. For instance, if HTML sectioning is specified, then HTML tags will be removed before processing the input document.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB__GUID-640071C1-B08F-4AB5-BF32-DA5A704EF870">
                              <!-- --></a>document
                        </dt>
                        <dd>
                           <p>A body of text for which the languages are to be extracted. The text is assumed to be plain text with UTF-8 character encoding.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB__GUID-61E5A5E5-5F53-4957-81E6-26EA076E90EE">
                              <!-- --></a>restab
                        </dt>
                        <dd>
                           <p>The result of the language extraction process. The result is a table of records. Each record has two attributes: the language string, and the score for each language string. The score can range from 0 to 100 and represents the confidence with which the system can assert that the supplied text is in the specified language. The resulting languages are returned in sorted order with the language with the most confidence appearing first.</p>
                           <p>The table layout for <code class="codeph">restab</code> is similar to that for HIGHLIGHT.
                           </p>
                           <div class="infoboxnotealso" id="GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB__GUID-04106AFA-673F-464D-88F4-4D886B22C050">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="CTX_DOC-package.html#GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511">HIGHLIGHT </a>"</span> for information on <code class="codeph">restab</code> layout
                              </p>
                           </div>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB__GUID-3B91E9CE-4147-417D-B0D1-E85D12F21850">Supported Languages for CTX_DOC.POLICY_LANGUAGES and POLICY_STEMS</p>
                     <p>Language extraction is supported for text in the languages supported by <a href="oracle-text-indexing-elements.html#GUID-71743C74-2B44-45D3-AE5E-3AF595200364">AUTO_LEXER</a>. The supported languages for CTX_DOC.POLICY_LANGUAGES and CTX_DOC.<a href="CTX_DOC-package.html#GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A">POLICY_STEMS</a> for this release are:
                     </p>
                     <p>Arabic</p>
                     <p>Bokmal</p>
                     <p>Catalan</p>
                     <p>Croatian</p>
                     <p>Czech</p>
                     <p>Danish</p>
                     <p>Dutch</p>
                     <p>English</p>
                     <p>Finnish</p>
                     <p>French</p>
                     <p>German</p>
                     <p>Greek</p>
                     <p>Hebrew</p>
                     <p>Hungarian</p>
                     <p>Italian</p>
                     <p>Japanese</p>
                     <p>Korean</p>
                     <p>Polish</p>
                     <p>Nynorsk</p>
                     <p>Persian</p>
                     <p>Portuguese</p>
                     <p>Romanian</p>
                     <p>Russian</p>
                     <p>Serbian</p>
                     <p>Slovak</p>
                     <p>Slovenian</p>
                     <p>Simplified Chinese</p>
                     <p>Spanish</p>
                     <p>Swedish</p>
                     <p>Thai</p>
                     <p>Traditional Chinese</p>
                     <p>Turkish</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB__GUID-E7D5A489-CF70-48AE-BF92-64429EEB4BC2">Related Topics</p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A">POLICY_STEMS</a>"</span></p>
                     <p><span class="q">"<a href="oracle-text-indexing-elements.html#GUID-71743C74-2B44-45D3-AE5E-3AF595200364">AUTO_LEXER</a>"</span></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2119"></a><div class="props_rev_3"><a id="GUID-74E74073-E7E9-483E-91EB-C714F726E95A" name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A"></a><h3 id="CCREF-GUID-74E74073-E7E9-483E-91EB-C714F726E95A" class="sect3"><span class="enumeration_section">9.12 </span>POLICY_MARKUP
               </h3>
               <div>
                  <div class="section">
                     <p>Generates plain text or HTML version of a document with query terms highlighted. With this procedure, no <code class="codeph">CONTEXT</code> index is required.
                     </p>
                     <p>The <code class="codeph">CTX_DOC.POLICY_MARKUP</code> procedure takes a query specification and a document and returns a version of the document in which the query terms are marked up. These marked-up terms are either the words that satisfy a word query or the themes that satisfy an <code class="codeph">ABOUT</code> query.
                     </p>
                     <p>You can set the marked-up output to be either plaintext or HTML. </p>
                     <p>You can use one of the predefined tag sets for marking highlighted terms, including a tag sequence that enables HTML navigation.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-7BFA48C5-0343-44D1-836B-915B8499FAFC">Syntax</p><pre class="oac_no_warn" dir="ltr">ctx_doc.policy_markup(policy_name     in VARCHAR2,
                      document        in [VARCHAR2|CLOB|BLOB|BFILE],
                      text_query      in VARCHAR2,
                      restab          in out nocopy CLOB,
                      plaintext       in BOOLEAN default FALSE,
                      tagset          in VARCHAR2 default 'TEXT_DEFAULT',
                      starttag        in VARCHAR2 default NULL,
                      endtag          in VARCHAR2 default NULL,
                      prevtag         in VARCHAR2 default NULL,
                      nexttag         in VARCHAR2 default NULL
                      language        in VARCHAR2 default NULL,
                      format          in VARCHAR2 default NULL,
                      charset         in VARCHAR2 default NULL
);

ctx_doc.policy_markup_clob_query(
                      policy_name     in VARCHAR2,
                      document        in [VARCHAR2|CLOB|BLOB|BFILE],
                      text_query      in CLOB,
                      restab          in out nocopy CLOB,
                      plaintext       in BOOLEAN default FALSE,
                      tagset          in VARCHAR2 default 'TEXT_DEFAULT',
                      starttag        in VARCHAR2 default NULL,
                      endtag          in VARCHAR2 default NULL,
                      prevtag         in VARCHAR2 default NULL,
                      nexttag         in VARCHAR2 default NULL
                      language        in VARCHAR2 default NULL,
                      format          in VARCHAR2 default NULL,
                      charset         in VARCHAR2 default NULL
);</pre><dl>
                        <dt class="dlterm"><a name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-925FB331-2FE1-4ACA-9D50-F29170462635">
                              <!-- --></a>policy_name
                        </dt>
                        <dd>
                           <p>Specify the policy name created with CTX_DDL.<a href="CTX_DDL-package.html#GUID-C7B9CE02-E9D7-45C5-BF9F-31A928EE75D3">CREATE_POLICY</a>. 
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-177AA7F7-CA12-492B-9B13-87EA1486E9FE">
                              <!-- --></a>document
                        </dt>
                        <dd>
                           <p>Specify the document to generate highlighting offset information.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-4D0F117D-0FBF-4F34-8E50-CFF617F3AA6D">
                              <!-- --></a>text_query
                        </dt>
                        <dd>
                           <p>Specify the original query expression used to retrieve the document. </p>
                           <p>If <code class="codeph">text_query</code> includes a NULL, then this procedure will fail and generate errors.
                           </p>
                           <p>If <code class="codeph">text_query</code> includes wildcards, stemming, or fuzzy matching which result in stopwords being returned, then this procedure does not highlight the stopwords.
                           </p>
                           <p>If <code class="codeph">text_query</code> contains the threshold operator, the operator is ignored. This procedure always returns highlight information for the entire result set.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-6962E1B6-553D-4922-8B7C-6D321B81E2DA">
                              <!-- --></a>restab 
                        </dt>
                        <dd>
                           <p>Specify the name of the <code class="codeph">CLOB</code> locator.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-4C3F5349-C6F2-4261-92BD-0A2E10440665">
                              <!-- --></a>plaintext
                        </dt>
                        <dd>
                           <p>Specify <code class="codeph">TRUE</code> to generate a plaintext marked-up document. Specify <code class="codeph">FALSE</code> to generate a marked-up HTML version of the document if you are using the <code class="codeph">AUTO_FILTER</code> filter or indexing HTML documents.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-A211D144-5E5A-4026-A4D6-BE731A45607A">
                              <!-- --></a>tagset
                        </dt>
                        <dd>
                           <p>Specify one of the following predefined tag sets. The second and third columns show how the different tags are defined for each tagset:</p>
                           <div class="tblformal" id="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-B4E9B044-7343-435C-80D7-3030A24608B8">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table shows predefined tag sets and how the different tags are defined for each tagset." width="90%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="30%" id="d98925e3676">Tagset</th>
                                       <th align="left" valign="bottom" width="19%" id="d98925e3679">Tag</th>
                                       <th align="left" valign="bottom" width="52%" id="d98925e3682">Tag Value</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e3687" headers="d98925e3676 ">
                                          <p><code class="codeph">TEXT_DEFAULT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e3687 d98925e3679 ">
                                          <p>starttag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e3687 d98925e3682 ">
                                          <p><code class="codeph">&lt;&lt;&lt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e3699" headers="d98925e3676 ">
                                          <p><code class="codeph">TEXT_DEFAULT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e3699 d98925e3679 ">
                                          <p>endtag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e3699 d98925e3682 ">
                                          <p><code class="codeph">&gt;&gt;&gt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e3711" headers="d98925e3676 ">
                                          <p><code class="codeph">HTML_DEFAULT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e3711 d98925e3679 ">
                                          <p>starttag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e3711 d98925e3682 ">
                                          <p><code class="codeph">&lt;B&gt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e3723" headers="d98925e3676 ">
                                          <p><code class="codeph">HTML_DEFAULT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e3723 d98925e3679 ">
                                          <p>endtag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e3723 d98925e3682 ">
                                          <p><code class="codeph">&lt;/B&gt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e3735" headers="d98925e3676 ">
                                          <p><code class="codeph">HTML_NAVIGATE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e3735 d98925e3679 ">
                                          <p>starttag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e3735 d98925e3682 ">
                                          <p><code class="codeph">&lt;A NAME=ctx%CURNUM&gt;&lt;B&gt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e3747" headers="d98925e3676 ">
                                          <p><code class="codeph">HTML_NAVIGATE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e3747 d98925e3679 ">
                                          <p>endtag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e3747 d98925e3682 ">
                                          <p><code class="codeph">&lt;/B&gt;&lt;/A&gt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e3759" headers="d98925e3676 ">
                                          <p><code class="codeph">HTML_NAVIGATE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e3759 d98925e3679 ">
                                          <p>prevtag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e3759 d98925e3682 ">
                                          <p><code class="codeph">&lt;A HREF=#ctx%PREVNUM&gt;&amp;lt;&lt;/A&gt;</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d98925e3771" headers="d98925e3676 ">
                                          <p><code class="codeph">HTML_NAVIGATE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d98925e3771 d98925e3679 ">
                                          <p>nexttag</p>
                                       </td>
                                       <td align="left" valign="top" width="52%" headers="d98925e3771 d98925e3682 ">
                                          <p><code class="codeph">&lt;A HREF=#ctx%NEXTNUM&gt;&amp;gt;&lt;/A&gt;</code></p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </dd>
                        <dt class="dlterm"><a name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-BCB23D01-73DE-4B77-8482-B5D4C6980061">
                              <!-- --></a>starttag   
                        </dt>
                        <dd>
                           <p>Specify the character(s) inserted by <code class="codeph">MARKUP</code> to indicate the start of a highlighted term.
                           </p>
                           <p>The sequence of <tt>starttag, endtag, prevtag</tt> and <tt>nexttag</tt> with regard to the highlighted word is as follows:
                           </p><pre class="oac_no_warn" dir="ltr">... prevtag starttag <span class="italic">word</span> endtag nexttag...</pre></dd>
                        <dt class="dlterm"><a name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-3DFF46B5-DDD5-4AA2-8A6B-085FA94DD680">
                              <!-- --></a>endtag 
                        </dt>
                        <dd>
                           <p>Specify the character(s) inserted by <code class="codeph">MARKUP</code> to indicate the end of a highlighted term.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-A23C6E27-2FCA-497B-BF85-053B3430FED3">
                              <!-- --></a>prevtag
                        </dt>
                        <dd>
                           <p>Specify the markup sequence that defines the tag that navigates the user to the previous highlight. </p>
                           <p>In the markup sequences <tt>prevtag</tt> and <tt>nexttag</tt>, you can specify the following offset variables which are set dynamically:
                           </p>
                           <div class="tblformal" id="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-381943E3-5D08-4800-AEAF-6097C1078E3C">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table shows offset variables and their values." width="90%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="29%" id="d98925e3835">Offset Variable</th>
                                       <th align="left" valign="bottom" width="71%" id="d98925e3838">Value</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d98925e3843" headers="d98925e3835 ">
                                          <p><code class="codeph">%CURNUM</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d98925e3843 d98925e3838 ">
                                          <p>the current offset number</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d98925e3851" headers="d98925e3835 ">
                                          <p><code class="codeph">%PREVNUM</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d98925e3851 d98925e3838 ">
                                          <p>the previous offset number</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d98925e3859" headers="d98925e3835 ">
                                          <p><code class="codeph">%NEXTNUM</code></p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d98925e3859 d98925e3838 ">
                                          <p>the next offset number</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>See the description of the <code class="codeph">HTML_NAVIGATE</code> tagset for an example <span class="q">"<a href="CTX_DOC-package.html#GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__BABDADEI">"tagset"</a>"</span>.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-7A7FB225-5563-4DF4-AFD8-2062E4472455">
                              <!-- --></a>nexttag
                        </dt>
                        <dd>
                           <p>Specify the markup sequence that defines the tag that navigates the user to the next highlight tag. </p>
                           <p>Within the markup sequence, you can use the same offset variables you use for <tt>prevtag</tt>. See the explanation for <tt>prevtag</tt> and the <code class="codeph">HTML_NAVIGATE</code> <span class="q">"<a href="CTX_DOC-package.html#GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9__BABDADEI">"tagset"</a>"</span> for an example.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-1907C19F-E80D-4E3D-BFD8-535CDAD41876">
                              <!-- --></a>language
                        </dt>
                        <dd>
                           <p>Specify the language of the document. Use an Oracle Text supported language value as you would in the language column of the base table. See <span class="q">"<a href="oracle-text-indexing-elements.html#GUID-93B17833-A046-468C-BE5F-2BD09A61935C">MULTI_LEXER</a>"</span> in <a href="oracle-text-indexing-elements.html#GUID-22680996-89CF-4666-89E6-BE8B9431DB02" title="Use the SENTIMENT_CLASSIFIER type to create a preference for sentiment analysis queries. This classifier specifies preferences associated with a user-defined sentiment classifier preference. You must define a preference of this type before you use the CTX_CLS.SA_TRAIN_MODEL procedure to train the user-defined sentiment classifier.Starting with Oracle Database Release 18c, the indexed token maximum size is increased to 255 characters for single-byte character sets."> Oracle Text Indexing Elements</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-9ED0CA14-9DBC-428E-9274-278D8A34BD07">
                              <!-- --></a>format
                        </dt>
                        <dd>
                           <p>Specify the format of the document. Use an Oracle Text supported format value, either TEXT, BINARY or IGNORE as you would specify in the format column of the base table. For more information, see the format column description in <span class="q">"<a href="oracle-text-SQL-statements-and-operators.html#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a>"</span>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-F36E9F64-F9B9-496F-8312-D2C26ED6CF4E">
                              <!-- --></a>charset
                        </dt>
                        <dd>
                           <p>Specify the character set of the document. Use an Oracle Text supported value as you would specify in the charset column of the base table. See <span class="q">"<a href="oracle-text-indexing-elements.html#GUID-24A7DF95-CDA5-4062-82D5-6DFC45F736BF">Filter Types</a>"</span>.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-74E74073-E7E9-483E-91EB-C714F726E95A__GUID-FD38E9A1-78C4-4BD1-9773-F203BE481B94">Restrictions</p>
                     <p><code class="codeph">CTX_DOC.POLICY_MARKUP</code> does not support the use of query templates.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF99092"></a><a id="CCREF99093"></a><a id="CCREF99027"></a><div class="props_rev_3"><a id="GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4" name="GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4"></a><h3 id="CCREF-GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4" class="sect3"><span class="enumeration_section">9.13 </span>POLICY_NOUN_PHRASES
               </h3>
               <div>
                  <div class="section">
                     <p>Provides the ability to extract the noun phrases along with part-of-speech information for each word in each noun phrase from a given document. </p>
                     <p>For example, consider the following sentence:</p>
                     <p>"The mayor of Chicago is giving a brief press conference."</p>
                     <p>The noun phrases for this input are "mayor of Chicago" and "brief press conference." The subgroups in the input text are not returned. For instance, in the above example, subgroups such as "mayor,Chicago, brief press, press conference, press, conference" are not returned.</p>
                     <div class="p">POLICY_NOUN_PHRASES (and <a href="CTX_DOC-package.html#GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD">POLICY_PART_OF_SPEECH</a>) supports the following languages:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Dutch</p>
                           </li>
                           <li>
                              <p>English</p>
                           </li>
                           <li>
                              <p>German</p>
                           </li>
                           <li>
                              <p>French</p>
                           </li>
                           <li>
                              <p>Italian</p>
                           </li>
                           <li>
                              <p>Japanese</p>
                           </li>
                           <li>
                              <p>Korean</p>
                           </li>
                           <li>
                              <p>Simplified Chinese</p>
                           </li>
                           <li>
                              <p>Spanish</p>
                           </li>
                           <li>
                              <p>Traditional Chinese</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__GUID-FA973C22-3BBD-42D6-A8E4-662A5CABC6DA">Syntax</p><pre class="oac_no_warn" dir="ltr">ctx_doc.policy_noun_phrases (
   policy_name    in varchar2,
   document       in varchar2 | CLOB,
   restab         in out nocopy noun_phrase_tab,
   language       in varchar2  default NULL,
   format         in varchar2  default NULL,
   charset        in varchar2  default NULL
);</pre><dl>
                        <dt class="dlterm"><a name="GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__GUID-A9BF12B8-476B-4560-B1B8-B7BAF0D139E9">
                              <!-- --></a>policy_name
                        </dt>
                        <dd>
                           <p>Specify the policy name created with CTX_DDL.<a href="CTX_DDL-package.html#GUID-C7B9CE02-E9D7-45C5-BF9F-31A928EE75D3">CREATE_POLICY</a>. 
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__GUID-3AC1A9AC-652D-4431-8804-8C3020AA0EC1">
                              <!-- --></a>document
                        </dt>
                        <dd>
                           <p>A body of text for which the languages are to be extracted. The text is assumed to be plain text with UTF-8 character encoding.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__GUID-027BCB4D-620A-4D6C-A287-818217059170">
                              <!-- --></a>restab 
                        </dt>
                        <dd>
                           <p>Specify the name of the <code class="codeph">CLOB</code> locator.
                           </p>
                        </dd>
                     </dl>
                     <dl>
                        <dt class="dlterm"><a name="GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__GUID-88CD497C-DB99-406F-8E90-6B8438B9419E">
                              <!-- --></a>language
                        </dt>
                        <dd>
                           <p>Specify the language. See the list of supported languages in this section. If this parameter is null, the language will be automatically detected. There is a cost associated with language detection.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__GUID-76A8388D-DA72-4ECF-818D-DF00889FC8A3">
                              <!-- --></a>format
                        </dt>
                        <dd>
                           <p>The format of the input text.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__GUID-B7D24A40-3A4D-4D33-B322-FBD336AED38A">
                              <!-- --></a>charset
                        </dt>
                        <dd>
                           <p>The character set of the input text.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__GUID-FB450444-84E0-45DC-BB70-D2D900F3CB24">Abbreviations for Use with POLICY_NOUN_PHRASES and POLICY_PART_OF_SPEECH</p>
                     <p><a href="CTX_DOC-package.html#GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__BABFEHAF" title="This table lists part of speech abbreviations">Table 9-1</a> provides a list of abbreviations to use in queries for <code class="codeph">POLICY_NOUN_PHRASES</code> and <code class="codeph">POLICY_PART_OF_SPEECH</code>. The examples use these abbreviations.
                     </p>
                     <div class="tblformal" id="GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__BABFEHAF">
                        <p class="titleintable">Table 9-1 Part of Speech Abbreviations</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Part of Speech Abbreviations" summary="This table lists part of speech abbreviations" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d98925e4136">Abbreviation</th>
                                 <th align="left" valign="bottom" width="69%" id="d98925e4139">Part of Speech</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4144" headers="d98925e4136 ">
                                    <p>N</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4144 d98925e4139 ">
                                    <p>noun</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4151" headers="d98925e4136 ">
                                    <p>propN</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4151 d98925e4139 ">
                                    <p>nounProper</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4158" headers="d98925e4136 ">
                                    <p>V</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4158 d98925e4139 ">
                                    <p>verb</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4165" headers="d98925e4136 ">
                                    <p>Adj</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4165 d98925e4139 ">
                                    <p>adjective</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4172" headers="d98925e4136 ">
                                    <p>Adv</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4172 d98925e4139 ">
                                    <p>adverb</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4179" headers="d98925e4136 ">
                                    <p>Prep</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4179 d98925e4139 ">
                                    <p>preposition</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4186" headers="d98925e4136 ">
                                    <p>Part</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4186 d98925e4139 ">
                                    <p>particle</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4193" headers="d98925e4136 ">
                                    <p>Punct</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4193 d98925e4139 ">
                                    <p>punct</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4200" headers="d98925e4136 ">
                                    <p>Pro</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4200 d98925e4139 ">
                                    <p>pronoun</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4207" headers="d98925e4136 ">
                                    <p>Wh</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4207 d98925e4139 ">
                                    <p>interrog</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4214" headers="d98925e4136 ">
                                    <p>Det</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4214 d98925e4139 ">
                                    <p>determiner</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4222" headers="d98925e4136 ">
                                    <p>Conj</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4222 d98925e4139 ">
                                    <p>conjunction</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4229" headers="d98925e4136 ">
                                    <p>Card</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4229 d98925e4139 ">
                                    <p>numCardinal</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4236" headers="d98925e4136 ">
                                    <p>Ord</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4236 d98925e4139 ">
                                    <p>numOrdinal</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4243" headers="d98925e4136 ">
                                    <p>Suf</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4243 d98925e4139 ">
                                    <p>suffix</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4250" headers="d98925e4136 ">
                                    <p>Pre</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4250 d98925e4139 ">
                                    <p>prefix</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4257" headers="d98925e4136 ">
                                    <p>Acr</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4257 d98925e4139 ">
                                    <p>nounAcronym</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4264" headers="d98925e4136 ">
                                    <p>Poss</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4264 d98925e4139 ">
                                    <p>poss</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d98925e4271" headers="d98925e4136 ">
                                    <p>Unk</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d98925e4271 d98925e4139 ">
                                    <p>unknown</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__GUID-9FE4501A-FE5A-4104-8AE1-D78EF336D1A9">Example for POLICY__NOUN_PHRASES</p>
                     <p>The example in this section uses the abbreviations shown in <a href="CTX_DOC-package.html#GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__BABFEHAF" title="This table lists part of speech abbreviations">Table 9-1</a>.
                     </p><pre class="oac_no_warn" dir="ltr">set serverout on
create or replace function toString(b boolean) return varchar2 is
    begin
      if (b) then
        return 'TRUE';
      end if;
      return 'FALSE';
 end;
 /
 
declare
 the_nps ctx_doc.noun_phrase_tab;
begin
  ctx_ddl.create_preference('rvlex', 'AUTO_LEXER');
  ctx_ddl.set_attribute('rvlex','mixed_case','YES');
  ctx_ddl.set_attribute('rvlex','timeout',0);
 
  ctx_ddl.create_policy(policy_name =&gt; 'rv_policy_21',lexer =&gt; 'rvlex');
 
 ctx_doc.policy_noun_phrases('rv_policy_21','The mayor of Chicago is giving a
 brief press conference',the_nps);
 dbms_output.put_line(the_nps.count);
 
 for i in 1..the_nps.count loop
      if (the_nps(i).is_phrase_start) then
        if (i&gt;1) then
          dbms_output.put(']');
          dbms_output.new_line;
        end if;
        dbms_output.put('Phrase{term,POS,is_in_lex,offset,len,is_phrase_
        start}:[');
      else
        dbms_output.put(',');
      end if;
      dbms_output.put('{' || the_nps(i).term || ',' || the_nps(i).pos_tag || ','
      || toString(the_nps(i).is_in_lexicon) || ',' || the_nps(i).offset 
      || ',' || the_nps(i).length || ',' || toString(the_nps(i).is_phrase_start)
      || '}');
      end loop;
      dbms_output.put(']');
      dbms_output.new_line;
end;
/
</pre><p>Output for this example:</p><pre class="oac_no_warn" dir="ltr">Phrase{term,POS,is_in_lex,offset,len,is_phrase_start}:
[{The,Det,TRUE,1,3,TRUE},{mayor,N,TRUE,5,5,FALSE},
{of,Prep,TRUE,11,2,FALSE},{Chicago,propN,TRUE,14,7,FALSE}

Phrase{term,POS,is_in_lex,offset,len,is_phrase_start}:
[{a,Det,TRUE,32,1,TRUE},{brief,N,TRUE,34,5,FALSE},
{press,N,TRUE,40,5,FALSE},{conference,N,TRUE,46,10,FALSE}]</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__GUID-BFA5A6CF-6DA4-436F-8B07-2A028FB951CA">Related Topics</p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD">POLICY_PART_OF_SPEECH</a>"</span></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF99028"></a><div class="props_rev_3"><a id="GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD" name="GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD"></a><h3 id="CCREF-GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD" class="sect3"><span class="enumeration_section">9.14 </span>POLICY_PART_OF_SPEECH
               </h3>
               <div>
                  <div class="section">
                     <p>Extracts part of speech information for each word in a body of text.</p>
                     <p><a href="CTX_DOC-package.html#GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4">POLICY_NOUN_PHRASES</a> has the list of supported languages.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD__GUID-E851D691-42BA-4844-8F31-65C9543EA777">Syntax</p><pre class="oac_no_warn" dir="ltr">ctx_doc.policy_part_of_speech (
   policy_name       in varchar2,
   document          in varchar2 | CLOB,
   restab            in out nocopy noun_phrase_tab,
   language          in varchar2  default NULL,
   format            in varchar2  default NULL,
   charset           in varchar2  default NULL
   disambiguate_tags in boolean default TRUE
);</pre><dl>
                        <dt class="dlterm"><a name="GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD__GUID-FD45BF4E-618E-4CD5-9F01-797D33180131">
                              <!-- --></a>policy_name
                        </dt>
                        <dd>
                           <p>Specify the policy name created with CTX_DDL.<a href="CTX_DDL-package.html#GUID-C7B9CE02-E9D7-45C5-BF9F-31A928EE75D3">CREATE_POLICY</a>. If the specified policy includes a sectioning preference, the API will honor the sectioning preference. For instance, if HTML sectioning is specified, HTML tags will be removed before processing the input document.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD__GUID-84D0560C-4ECE-4AFE-B706-D3A766066C2B">
                              <!-- --></a>document
                        </dt>
                        <dd>
                           <p>A body of text for which the languages are to be extracted. The text is assumed to be plain text with UTF-8 character encoding.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD__GUID-73E6EEB2-8123-4BA3-98B6-F13E348E42B6">
                              <!-- --></a>restab 
                        </dt>
                        <dd>
                           <p>Specify the name of the <code class="codeph">CLOB</code> locator. The query returns a table with the result of the noun phrase extraction. For each word, the following attributes are also returned:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">pos_tags</code>: the part of speech tags for this word. There can be multiple part of speech tags with the most likely tag listed first.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">offset</code>: offset of the word in the input string
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">length</code>: length of the word in the input string.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">is_in_lexicon</code>:  Indicates whether the word is in the lexicon.
                                 </p>
                              </li>
                           </ul>
                        </dd>
                     </dl>
                     <dl>
                        <dt class="dlterm"><a name="GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD__GUID-E1B0237B-8E59-4F7E-8622-D3D9275C0549">
                              <!-- --></a>language
                        </dt>
                        <dd>
                           <p>Specify the language. See the list of supported languages in this section. If this parameter is null, the language will be automatically detected. There is a cost associated with language detection.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD__GUID-83E19F9F-CDF3-4693-A561-8EC62A85CADC">
                              <!-- --></a>format
                        </dt>
                        <dd>
                           <p>The format of the input text.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD__GUID-34DA27CE-DAED-45FE-BCF0-55D3AF6C2813">
                              <!-- --></a>charset
                        </dt>
                        <dd>
                           <p>The character set of the input text.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD__GUID-3401AAE1-884A-47EB-B672-24C5FDE77708">Example for POLICY_PART_OF_SPEECH</p>
                     <p>The example in this section uses the abbreviations shown in <a href="CTX_DOC-package.html#GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4__BABFEHAF" title="This table lists part of speech abbreviations">Table 9-1</a>.
                     </p><pre class="oac_no_warn" dir="ltr">set serveroutput on;
declare
  the_nps ctx_doc.part_of_speech_tab;
begin
   ctx_doc.policy_part_of_speech(policy_name =&gt; 'rv_policy_21',
                                document =&gt; 'The mayor of Chicago is giving 
                                             a brief press conference',
                                 restab =&gt; the_nps,
                                 disambiguate_tags =&gt; false,
                                 language =&gt; 'english');
 for i in 1..the_nps.count loop
  dbms_output.put('word:' || the_nps(i).word || ',pos:[');
  for j in 1..the_nps(i).pos_tags.count loop
    dbms_output.put(the_nps(i).pos_tags(j) || ',');
  end loop;
  dbms_output.put_line(']');
 end loop;
end;
/
</pre><p>Output for this example:</p><pre class="oac_no_warn" dir="ltr">word:The,pos:[Det,]
word:mayor,pos:[N,]
word:of,pos:[Prep,]
word:Chicago,pos:[propN,]
word:is,pos:[V,]
word:giving,pos:[N,V,Adj,]
word:a,pos:[Det,]
word:brief,pos:[N,V,Adj,]
word:press,pos:[N,V,]
word:conference,pos:[N,V,]</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6DF42F88-4D44-4D57-A7B0-7A3F8572DBFD__GUID-7F1F0BA3-EB1D-44E0-AECF-219D98E6EFE2">Related Topics</p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-376899B3-9F8E-4123-A737-F1E0EF2995F4">POLICY_NOUN_PHRASES</a>"</span></p>
                     <p><span class="q">"<a href="CTX_ANL-package.html#GUID-59CD9964-E388-4D61-AD9C-128FC2BAD2EE__BABGAEJF" title="This table lists POS parts of speech and the description for each.">Table 6-1</a>"</span></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF23917"></a><a id="CCREF23918"></a><a id="CCREF2120"></a><div class="props_rev_3"><a id="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355" name="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355"></a><h3 id="CCREF-GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355" class="sect3"><span class="enumeration_section">9.15 </span>POLICY_SNIPPET
               </h3>
               <div>
                  <div class="section">
                     <p>Displays marked-up keywords in context. The returned text contains either the words that satisfy a word query or the themes that satisfy an <code class="codeph">ABOUT</code> query. This version of the CTX_DOC.<a href="CTX_DOC-package.html#GUID-07604453-9C9A-45EB-BF43-8CD565379F22">SNIPPET</a> procedure does not require an index.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-E76E9AE4-152F-4C88-87B2-F873B7735181">Syntax</p>
                     <p>Syntax 1</p><pre class="oac_no_warn" dir="ltr">exec CTX_DOC.POLICY_SNIPPET(</pre><pre class="oac_no_warn" dir="ltr">policy_name              IN VARCHAR2,
document                 IN [VARCHAR2|CLOB|BLOB|BFILE],
text_query               IN VARCHAR2,
language                 IN VARCHAR2 default NULL,
format                   IN VARCHAR2 default NULL,
charset                  IN VARCHAR2 default NULL,
starttag                 IN VARCHAR2 DEFAULT '&lt;b&gt;',
endtag                   IN VARCHAR2 DEFAULT '&lt;/b&gt;',
entity_translation       IN BOOLEAN  DEFAULT TRUE,
separator                IN VARCHAR2 DEFAULT '&lt;b&gt;...&lt;/b&gt;'
radius	                   IN INTEGER DEFAULT 25,
max_length               IN INTEGER DEFAULT 150
)
return varchar2;</pre><p>Syntax 2</p><pre class="oac_no_warn" dir="ltr">
exec CTX_DOC.POLICY_SNIPPET_CLOB_QUERY(
policy_name              IN VARCHAR2,
document                 IN [VARCHAR2|CLOB|BLOB|BFILE],
text_query               IN CLOB,
language                 IN VARCHAR2 default NULL,
format                   IN VARCHAR2 default NULL,
charset                  IN VARCHAR2 default NULL,
starttag                 IN VARCHAR2 DEFAULT '&lt;b&gt;',
endtag                   IN VARCHAR2 DEFAULT '&lt;/b&gt;',
entity_translation       IN BOOLEAN DEFAULT TRUE,
separator                IN VARCHAR2 DEFAULT '&lt;b&gt;...&lt;/b&gt;'
radius	                   IN INTEGER DEFAULT 25,
max_length               IN INTEGER DEFAULT 150
)
return varchar2;</pre><dl>
                        <dt class="dlterm"><a name="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-BA6C8A05-F676-4DE8-88C7-4B1150306360">
                              <!-- --></a>policy_name
                        </dt>
                        <dd>
                           <p>Specify the name of a policy created with CTX_DDL.<a href="CTX_DDL-package.html#GUID-C7B9CE02-E9D7-45C5-BF9F-31A928EE75D3">CREATE_POLICY</a>. 
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-F9040527-2871-4DA4-A895-EA36B207855B">
                              <!-- --></a>document
                        </dt>
                        <dd>
                           <p>Specify the document in which to search for keywords.</p>
                        </dd>
                     </dl>
                     <dl>
                        <dt class="dlterm"><a name="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-E2927CCE-109A-4BA9-8384-862F3FDDB181">
                              <!-- --></a>text_query 
                        </dt>
                        <dd>
                           <p>Specify the original query expression used to retrieve the document. If NULL, no highlights are generated.</p>
                           <p>If <code class="codeph">text_query</code> includes wildcards, stemming, fuzzy matching which result in stopwords being returned, <code class="codeph">POLICY_SNIPPET</code> does not highlight the stopwords.
                           </p>
                           <p>If <code class="codeph">text_query</code> contains the threshold operator, the operator is ignored.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-55E8ABD4-A3E8-464D-85A5-9220EF0D4695">
                              <!-- --></a>language
                        </dt>
                        <dd>
                           <p>Specify the language of the document. Use an Oracle Text supported language value as you would in the language column of the base table. See <a href="oracle-text-indexing-elements.html#GUID-93B17833-A046-468C-BE5F-2BD09A61935C">MULTI_LEXER</a> in <a href="oracle-text-indexing-elements.html#GUID-22680996-89CF-4666-89E6-BE8B9431DB02" title="Use the SENTIMENT_CLASSIFIER type to create a preference for sentiment analysis queries. This classifier specifies preferences associated with a user-defined sentiment classifier preference. You must define a preference of this type before you use the CTX_CLS.SA_TRAIN_MODEL procedure to train the user-defined sentiment classifier.Starting with Oracle Database Release 18c, the indexed token maximum size is increased to 255 characters for single-byte character sets."> Oracle Text Indexing Elements</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-9FE812B7-278A-4A20-8C02-2CA992158CA4">
                              <!-- --></a>format
                        </dt>
                        <dd>
                           <p>Specify the format of the document. Use an Oracle Text supported format value, either TEXT, BINARY or IGNORE as you would specify in the format column of the base table. For more information, see the format column description in <span class="q">"<a href="oracle-text-SQL-statements-and-operators.html#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a>"</span>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-973B81F4-7105-4EA9-A8A2-3C110A374D3A">
                              <!-- --></a>charset
                        </dt>
                        <dd>
                           <p>Specify the character set of the document. Use an Oracle Text supported value as you would specify in the charset column of the base table. See <span class="q">"<a href="oracle-text-indexing-elements.html#GUID-24A7DF95-CDA5-4062-82D5-6DFC45F736BF">Filter Types</a>"</span>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-BA13C06E-4A2C-4258-BD94-E205AD64E368">
                              <!-- --></a>starttag
                        </dt>
                        <dd>
                           <p>Specify the start tag for marking up the query keywords. Default is '<span class="italic">&lt;b&gt;</span>'.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-04C108BA-9AD7-4D8F-BB0C-C72711D9D870">
                              <!-- --></a>endtag
                        </dt>
                        <dd>
                           <p>Specify the end tag for marking up the query keywords. Default is '<span class="italic">&lt;/b&gt;</span>'.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-CA2EAE7D-96BC-422D-B042-486ABEA7EFD6">
                              <!-- --></a>entity_translation
                        </dt>
                        <dd>
                           <p>Specify if you want HTML entities to be translated. The default is TRUE, which means the special entities (<span class="italic">&lt;</span>, <span class="italic">&gt;</span>, and <span class="italic">&amp;</span>) are translated into their alternate forms ('<span class="italic">&amp;lt;</span>', '<span class="italic">&amp;gt;</span>', and '<span class="italic">&amp;amp;</span>') when output by the procedure. However, special characters in the markup tags generated by <code class="codeph">CTX_DOC.POLICY_SNIPPET</code> will not be translated.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-70E25D0B-45C3-4CE2-800B-A95254EF43F4">
                              <!-- --></a>separator
                        </dt>
                        <dd>
                           <p>Specify the string separating different returned fragments. Default is '<span class="italic">&lt;b&gt;...&lt;/b&gt;</span>'.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-4681F5AD-6568-482C-9AE0-B7C8C129413B">
                              <!-- --></a>radius
                        </dt>
                        <dd>
                           <p>Specify the number of characters to be shown on either side of the hit query in a segment. The character count before the hit query begins on the first character of the first hit query displayed in a segment. Accordingly, the character count after the hit query begins on the last character of the last hit query displayed on a specific segment. Two segments are merged into one if their radii overlap. The displayed number of characters on each side may be modified by +/-10 chars to best match the beginning or ending of a sentence or word.</p>
                           <p>Special attention is required for the value <code class="codeph">0</code>. When specified, the radius is set to automatic and varies between sentences. A best guess of the results is displayed, which attempts to match a full sentence. Note that the length of the radius on each side of the hit query will most likely significantly differ.
                           </p>
                           <p>The default value is 25.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-496B39D5-112A-4D4B-BE14-BF7DE430DC68">
                              <!-- --></a>max_length
                        </dt>
                        <dd>
                           <p>Specify the maximum length of the snippet output in characters. This value is currently upper-bounded by the current return type of CTX_DOC.<a href="CTX_DOC-package.html#GUID-07604453-9C9A-45EB-BF43-8CD565379F22">SNIPPET</a> and CTX_DOC.POLICY_SNIPPET (VARCHAR2). Should the output be longer than the return type VARCHAR2, the result will be truncated.
                           </p>
                           <p>The default value for max_length is 150.</p>
                           <div class="infoboxnote" id="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-1306A66C-082D-44CA-9EE9-643CCBEDD54E">
                              <p class="notep1">Note:</p>
                              <p>If you set <code class="codeph">max_length</code> value to a very low value, no snippet may be generated. For example, if <code class="codeph">max_length</code> is set to <code class="codeph">0</code> or if <code class="codeph">max_length</code> is lower than the length of query tokens themselves, no snippet may be generated at all.
                              </p>
                           </div>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-971D120F-BD12-480A-A52E-CAE9E0B3CD0A">Limitations</p>
                     <p><code class="codeph">CTX_DOC.POLICY_SNIPPET</code> does not support the use of query templates.
                     </p>
                     <p><code class="codeph">CTX_DOC.POLICY_SNIPPET</code> displays marked-up keywords in context when used with <code class="codeph">NULL_SECTION_GROUP</code>. However, there are limitations when using this procedure with XML documents. When used with <code class="codeph">XML_SECTION_GROUP</code> or <code class="codeph">AUTO_SECTION_GROUP</code>, the XML structure is ignored and user-specified tags are stripped out, which results in parts of surrounding text to be included in the returned snippet.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355__GUID-40C6FBFB-0B2C-4AEC-9E42-FF513EB7284E">Related Topics</p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-07604453-9C9A-45EB-BF43-8CD565379F22">SNIPPET</a>"</span></p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9">MARKUP </a>"</span></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF24103"></a><div class="props_rev_3"><a id="GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A" name="GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A"></a><h3 id="CCREF-GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A" class="sect3"><span class="enumeration_section">9.16 </span>POLICY_STEMS
               </h3>
               <div>
                  <div class="section">
                     <p>Extracts stems for each word in a body of text. This procedure is for use with <a href="oracle-text-indexing-elements.html#GUID-71743C74-2B44-45D3-AE5E-3AF595200364">AUTO_LEXER</a>. This procedure can only use the languages supported by AUTO_LEXER, which are listed under <span class="q">"<a href="CTX_DOC-package.html#GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB">POLICY_LANGUAGES</a>"</span>. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A__GUID-A4E79F9E-EA59-4C01-A21F-4AE59148A0E9">Syntax</p><pre class="oac_no_warn" dir="ltr">exec CTX_DOC.POLICY_STEMS (
   policy_name   in varchar2,
   document      in varchar2 | CLOB,
   restab        in out nocopy ctx_doc.stem_group_tab,
   language      in varchar2  default NULL,
   format        in varchar2  default NULL,
   charset       in varchar2  default NULL
);</pre><dl>
                        <dt class="dlterm"><a name="GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A__GUID-F21CAE60-37F0-406D-AF75-133070C31E1F">
                              <!-- --></a>policy_name
                        </dt>
                        <dd>
                           <p>A policy that was previously created using the CTX_DDL.<a href="CTX_DDL-package.html#GUID-C7B9CE02-E9D7-45C5-BF9F-31A928EE75D3">CREATE_POLICY</a> method. If the specified policy includes a <code class="codeph">HTML_SECTION_GROUP</code> sectioning preference, the API will honor the sectioning preference. For instance, if HTML sectioning is specified, HTML tags will be removed before processing the input document.
                           </p>
                           <p>Note that the policy must use AUTO_LEXER only. </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A__GUID-26253D61-23E9-4D0E-9E1D-15EC41C42B41">
                              <!-- --></a>document
                        </dt>
                        <dd>
                           <p>A body of text for which the languages are to be extracted. The text is assumed to be plain text with UTF-8 character encoding.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A__GUID-D2A0CCEF-5C51-4BDA-A5E8-009B3B1F7D18">
                              <!-- --></a>restab
                        </dt>
                        <dd>
                           <p>The result of the stem extraction process. The returned values in the PL/SQL table will have one cell for each word in the input string document. Each word can be a multi-word as determined by the lexer. For each word, all the stems (including all alternate stems) are returned. For each stem, the offset and the length (in the input string) of the word for which this is a stem is returned. Additionally, for each stem, a Boolean value is returned that indicates if the stem was found in the lexicon.</p>
                           <p><code class="codeph">stem_group_tab</code> is a table of <code class="codeph">stem_group_records</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A__GUID-A5B70A60-3D9D-4246-BE92-CAA84DC34FDB">
                              <!-- --></a>language
                        </dt>
                        <dd>
                           <p>The language of the input text. The language string can be one of the values specified in the previous section on language extraction. If this parameter is null, the language will be automatically detected. There is a cost associated with language detection. So, if the language is known, it is best to supply the language value. See <span class="q">"<a href="CTX_DOC-package.html#GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB">POLICY_LANGUAGES</a>"</span> for the list of languages.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A__GUID-1B44C6FD-95B6-47D7-83C5-1962F6F145EA">
                              <!-- --></a>format
                        </dt>
                        <dd>
                           <p>The format of the input text.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A__GUID-F89F8DC4-3804-430B-8D44-F67363E4A117">
                              <!-- --></a>charset
                        </dt>
                        <dd>
                           <p>The character set of the input text.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A__GUID-20ECE8F3-B501-40F4-AEA4-1F3D64E73EB4">Restrictions and Notes</p>
                     <p>The stem extraction process supports certain nonstandard word forms—e.g. capitalization errors—as well as standard forms, and thus can be used to process informal or imperfect text (such as email, online documents, or queries). It also handles some variations in the text including case variation, hyphenation and unaccented characters among others.</p>
                     <p>The stem extraction process does not break compound words, but instead separates compound words with a # character. Such compound words are common in German. For instance, the German compound word <span class="italic">Bildungsroman</span> (from Bildung "education" and Roman "novel") yields a single stem Bildungs#roman instead of two stems <span class="italic">Bildungs</span> and <span class="italic">roman</span>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-71504863-B58A-49BE-B8DD-7B33C3B4022A__GUID-F0D0AC70-E1FD-4D49-B352-7F93E7EB7521">Related Topics</p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-5C7629CF-3FD4-43DB-8E61-62CB287D36BB">POLICY_LANGUAGES</a>"</span></p>
                     <p><span class="q">"<a href="oracle-text-indexing-elements.html#GUID-71743C74-2B44-45D3-AE5E-3AF595200364">AUTO_LEXER</a>"</span></p>
                     <p><span class="q">"<a href="CTX_DDL-package.html#GUID-C7B9CE02-E9D7-45C5-BF9F-31A928EE75D3">CREATE_POLICY</a>"</span></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2121"></a><div class="props_rev_3"><a id="GUID-173B409F-5A0F-4561-A540-37AE6A277F80" name="GUID-173B409F-5A0F-4561-A540-37AE6A277F80"></a><h3 id="CCREF-GUID-173B409F-5A0F-4561-A540-37AE6A277F80" class="sect3"><span class="enumeration_section">9.17 </span>POLICY_THEMES
               </h3>
               <div>
                  <div class="section">
                     <p>Generates a list of themes for a document. With this procedure, no <code class="codeph">CONTEXT</code> index is required.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-173B409F-5A0F-4561-A540-37AE6A277F80__GUID-A2363C29-5E42-47AA-83A5-B77DB43C4EF4">Syntax</p><pre class="oac_no_warn" dir="ltr">ctx_doc.policy_themes(policy_name    in VARCHAR2, 
	                      document       in [VARCHAR2|CLOB|BLOB|BFILE],
                      restab         in out nocopy theme_tab,
                      full_themes    in BOOLEAN default FALSE,
                      num_themes     in number    default 50
                      language       in VARCHAR2 default NULL,
                      format         in VARCHAR2 default NULL,
                      charset        in VARCHAR2 default NULL
);</pre><dl>
                        <dt class="dlterm"><a name="GUID-173B409F-5A0F-4561-A540-37AE6A277F80__GUID-C25B468F-EF24-4811-A509-378DD122A0E3">
                              <!-- --></a>policy_name
                        </dt>
                        <dd>
                           <p>Specify the policy you create with CTX_DDL.<a href="CTX_DDL-package.html#GUID-C7B9CE02-E9D7-45C5-BF9F-31A928EE75D3">CREATE_POLICY</a>. 
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-173B409F-5A0F-4561-A540-37AE6A277F80__GUID-18A43C1B-6B85-4785-B8E6-C00BA2FC1379">
                              <!-- --></a>document
                        </dt>
                        <dd>
                           <p>Specify the document for which to generate a list of themes.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-173B409F-5A0F-4561-A540-37AE6A277F80__GUID-63F99BB9-05AE-495F-AD4F-EF3C54619295">
                              <!-- --></a>restab
                        </dt>
                        <dd>
                           <p>Specify the name of the <code class="codeph">theme_tab</code> PL/SQL index-by-table type.
                           </p>
                           <div class="infoboxnotealso" id="GUID-173B409F-5A0F-4561-A540-37AE6A277F80__GUID-4913B7CF-84E7-498E-944B-5377CA02BDD4">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="CTX_DOC-package.html#GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886">THEMES</a>"</span> for more information about the structure of the <code class="codeph">theme_tab</code> type.
                              </p>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-173B409F-5A0F-4561-A540-37AE6A277F80__GUID-ECF1DE68-1A07-4CE9-82E1-6852A35A56A0">
                              <!-- --></a>full_themes
                        </dt>
                        <dd>
                           <p>Specify whether this procedure generates a single theme or a hierarchical list of parent themes (full themes) for each document theme.</p>
                           <p>Specify <code class="codeph">TRUE</code> for this procedure to write full themes to the <code class="codeph">THEME</code> column of the result table.
                           </p>
                           <p>Specify <code class="codeph">FALSE</code> for this procedure to write single theme information to the <code class="codeph">THEME</code> column of the result table. This is the default.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-173B409F-5A0F-4561-A540-37AE6A277F80__GUID-4BCE0F7B-E711-4658-962C-AA5033B787D6">
                              <!-- --></a>num_themes
                        </dt>
                        <dd>
                           <p>Specify the maximum number of themes to retrieve. For example, if you specify 10, up to first 10 themes are returned for the document. The default is 50.</p>
                           <p>If you specify 0 or <code class="codeph">NULL</code>, this procedure returns all themes in a document. If the document contains more than 50 themes, only the first 50 themes show conceptual hierarchy.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-173B409F-5A0F-4561-A540-37AE6A277F80__GUID-60488970-D9CA-4D07-83DA-E6C9CA5FD2BB">
                              <!-- --></a>language
                        </dt>
                        <dd>
                           <p>Specify the language of the document. Use an Oracle Text supported language value as you would in the language column of the base table. See <span class="q">"<a href="oracle-text-indexing-elements.html#GUID-93B17833-A046-468C-BE5F-2BD09A61935C">MULTI_LEXER</a>"</span> in <a href="oracle-text-indexing-elements.html#GUID-22680996-89CF-4666-89E6-BE8B9431DB02" title="Use the SENTIMENT_CLASSIFIER type to create a preference for sentiment analysis queries. This classifier specifies preferences associated with a user-defined sentiment classifier preference. You must define a preference of this type before you use the CTX_CLS.SA_TRAIN_MODEL procedure to train the user-defined sentiment classifier.Starting with Oracle Database Release 18c, the indexed token maximum size is increased to 255 characters for single-byte character sets."> Oracle Text Indexing Elements</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-173B409F-5A0F-4561-A540-37AE6A277F80__GUID-1E3470BE-B45C-4761-AF83-E4D64EBF27FD">
                              <!-- --></a>format
                        </dt>
                        <dd>
                           <p>Specify the format of the document. Use an Oracle Text supported format value, either <code class="codeph">TEXT</code>, <code class="codeph">BINARY</code> or <code class="codeph">IGNORE</code> as you would specify in the format column of the base table. For more information, see the format column description in <span class="q">"<a href="oracle-text-SQL-statements-and-operators.html#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a>"</span> in <a href="oracle-text-SQL-statements-and-operators.html#GUID-4775F5FE-4569-4DF4-A7CA-B20EC6880CAB" title="This section describes the CREATE SEARCH INDEX statement as it pertains to creating a JSON search index."> Oracle Text SQL Statements and Operators </a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-173B409F-5A0F-4561-A540-37AE6A277F80__GUID-5077198C-A09C-4FD9-85C6-2ADEF3B78F3B">
                              <!-- --></a>charset
                        </dt>
                        <dd>
                           <p>Specify the character set of the document. Use an Oracle Text supported value as you would specify in the charset column of the base table. See <span class="q">"<a href="oracle-text-indexing-elements.html#GUID-24A7DF95-CDA5-4062-82D5-6DFC45F736BF">Filter Types</a>"</span>.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-173B409F-5A0F-4561-A540-37AE6A277F80__GUID-3FE5A453-CA6B-4E7D-AF3A-2B808E009931">Example</p>
                     <p>Create a policy:</p><pre class="oac_no_warn" dir="ltr">exec ctx_ddl.create_policy('mypolicy');
</pre><p>Run themes:</p><pre class="oac_no_warn" dir="ltr">declare
  la      varchar2(200);
  rtab    ctx_doc.theme_tab;
begin
   ctx_doc.policy_themes('mypolicy', 
           'To define true madness, What is''t but to be nothing but mad?', rtab);
   for i in 1..rtab.count loop
     dbms_output.put_line(rtab(i).theme||':'||rtab(i).weight);
   end loop;
end;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2122"></a><div class="props_rev_3"><a id="GUID-74625382-FB75-452C-A2B3-854A6696C2E5" name="GUID-74625382-FB75-452C-A2B3-854A6696C2E5"></a><h3 id="CCREF-GUID-74625382-FB75-452C-A2B3-854A6696C2E5" class="sect3"><span class="enumeration_section">9.18 </span>POLICY_TOKENS
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-74625382-FB75-452C-A2B3-854A6696C2E5__GUID-042AFE41-7588-43CF-BA9B-92FA6AF2C394"></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Generate all index tokens for document. With this procedure, no <code class="codeph">CONTEXT</code> index is required.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-74625382-FB75-452C-A2B3-854A6696C2E5__GUID-3BAA3094-C6B4-4931-B934-CDE3D852160C">Syntax</p><pre class="oac_no_warn" dir="ltr">ctx_doc.policy_tokens(policy_name    in  VARCHAR2,
                      document       in  [VARCHAR2|CLOB|BLOB|BFILE],
                      restab         in  out nocopy token_tab,
                      language       in  VARCHAR2 default NULL,
                      format         in  VARCHAR2 default NULL,
                      charset        in  VARCHAR2 default NULL,
                      thes_name      in  VARCHAR2 default NULL,
                      thes_toktype   in  VARCHAR2 default 'SYN');</pre><dl>
                        <dt class="dlterm"><a name="GUID-74625382-FB75-452C-A2B3-854A6696C2E5__GUID-84431982-A13E-4CF1-ABDD-6692857A746A">
                              <!-- --></a>policy_name
                        </dt>
                        <dd>
                           <p>Specify the policy name created with CTX_DDL.<a href="CTX_DDL-package.html#GUID-C7B9CE02-E9D7-45C5-BF9F-31A928EE75D3">CREATE_POLICY</a>. 
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74625382-FB75-452C-A2B3-854A6696C2E5__GUID-6F628A5C-D896-4A34-867F-FC6F8D5A7424">
                              <!-- --></a>document
                        </dt>
                        <dd>
                           <p>Specify the document for which to generate tokens.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74625382-FB75-452C-A2B3-854A6696C2E5__GUID-51356A51-D793-4D5E-8BA9-EA4ABD77C9E5">
                              <!-- --></a>restab
                        </dt>
                        <dd>
                           <p>Specify the name of the <code class="codeph">token_tab</code> PL/SQL index-by-table type.
                           </p>
                           <p>The tokens returned are those tokens which are inserted into the index for the document. Stop words are not returned. Section tags are not returned because they are not text tokens.</p>
                           <div class="infoboxnotealso" id="GUID-74625382-FB75-452C-A2B3-854A6696C2E5__GUID-10D59110-7ED8-47C6-B705-DBBE4FDB3393">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="CTX_DOC-package.html#GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71">TOKENS</a>"</span> of this chapter for more information about the structure of the <code class="codeph">token_tab</code> type
                              </p>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74625382-FB75-452C-A2B3-854A6696C2E5__GUID-41BC4712-7A5F-4F0C-BB92-185BB4129C3B">
                              <!-- --></a>language
                        </dt>
                        <dd>
                           <p>Specify the language of the document. Use an Oracle Text supported language value as you would in the language column of the base table. See <span class="q">"<a href="oracle-text-indexing-elements.html#GUID-93B17833-A046-468C-BE5F-2BD09A61935C">MULTI_LEXER</a>"</span> in <a href="oracle-text-indexing-elements.html#GUID-22680996-89CF-4666-89E6-BE8B9431DB02" title="Use the SENTIMENT_CLASSIFIER type to create a preference for sentiment analysis queries. This classifier specifies preferences associated with a user-defined sentiment classifier preference. You must define a preference of this type before you use the CTX_CLS.SA_TRAIN_MODEL procedure to train the user-defined sentiment classifier.Starting with Oracle Database Release 18c, the indexed token maximum size is increased to 255 characters for single-byte character sets."> Oracle Text Indexing Elements</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74625382-FB75-452C-A2B3-854A6696C2E5__GUID-144CA596-5790-480C-ABB8-85C65C645CD7">
                              <!-- --></a>format
                        </dt>
                        <dd>
                           <p>Specify the format of the document. Use an Oracle Text supported format value, either TEXT, BINARY or IGNORE as you would specify in the format column of the base table. For more information, see the format column description in <span class="q">"<a href="oracle-text-SQL-statements-and-operators.html#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a>"</span>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74625382-FB75-452C-A2B3-854A6696C2E5__GUID-3059969C-4A85-4DD1-B500-1F6E008D3388">
                              <!-- --></a>charset
                        </dt>
                        <dd>
                           <p>Specify the character set of the document. Use an Oracle Text supported value as you would specify in the charset column of the base table. See <span class="q">"<a href="oracle-text-indexing-elements.html#GUID-24A7DF95-CDA5-4062-82D5-6DFC45F736BF">Filter Types</a>"</span>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74625382-FB75-452C-A2B3-854A6696C2E5__GUID-C2F7DC08-E03B-4F95-9AF0-C76190D570F0">
                              <!-- --></a>thes_name
                        </dt>
                        <dd>
                           <p>Specify the thesaurus name. If you do not specify a name, no synonyms or broader terms for index tokens will be generated.</p>
                           <p>To use the system default thesaurus, specify <code class="codeph">DEFAULT</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74625382-FB75-452C-A2B3-854A6696C2E5__GUID-65395223-973F-45BC-B60D-4CA2AB402E69">
                              <!-- --></a>thes_toktype
                        </dt>
                        <dd>Specify <code class="codeph">SYN</code> to generate synonyms. Alternatively, specify <code class="codeph">BT</code> to generate broader terms of index tokens. By default, only synonyms are generated. To use this parameter, you must first specify the thesaurus name using the <code class="codeph">thes_name</code> parameter.
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-74625382-FB75-452C-A2B3-854A6696C2E5__GUID-F5F51F05-B3F7-4C68-A5D3-550CB8E7666A">Example 1</p>
                     <p>Get tokens:</p><pre class="oac_no_warn" dir="ltr">declare
  la     varchar2(200);
  rtab   ctx_doc.token_tab;
begin
   ctx_doc.policy_tokens('mypolicy', 
        'To define true madness, What is''t but to be nothing but mad?',rtab);
   for i in 1..rtab.count loop
     dbms_output.put_line(rtab(i).offset||':'||rtab(i).token);
   end loop;
end;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-74625382-FB75-452C-A2B3-854A6696C2E5__GUID-1770196B-5D6B-4795-814A-B6AD07A333A8">Example 2</p>
                     <p>This example uses thesaurus support to generate synonyms for tokens:</p><pre class="oac_no_warn" dir="ltr">declare
  rtab   ctx_doc.token_tab;
begin
   ctx_doc.policy_tokens('mypolicy','the lazy dog',rtab,thes_name =&gt;'animals');
   for i in 1..rtab.count loop
     dbms_output.put_line(rtab(i).token||'a'||rtab(i).thes_tokens);
   end loop;
end;</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-539DCA29-C32C-4749-9C0E-EE57EAC42A6E" name="GUID-539DCA29-C32C-4749-9C0E-EE57EAC42A6E"></a><h3 id="CCREF-GUID-539DCA29-C32C-4749-9C0E-EE57EAC42A6E" class="sect3"><span class="enumeration_section">9.19 </span>SENTIMENT
               </h3>
               <div>
                  <p>Use this procedure to perform sentiment analysis for a document, determine a sentiment score for each topic within the document, and populate the results into a result table.</p>
                  <div class="section">
                     <p></p>
                     <p>The mandatory inputs to this procedure include the name of a text index associated with the document set and the text key, which is a unique identifier that identifies each document. After sentiment classification is performed, the text segments from the document and their associated sentiment scores are populated into the result table. The sentiment score is a value between -100 and 100.</p>
                     <p>The result table must exist before you run this procedure. An error is returned if the result table does not exist or if the specified topic is null.</p>
                     <p>If the specified topic is not present in the document, then a default snippet and sentiment score of zero are written into the result table. If no sentiment classifier is specified, then the default sentiment classifier is used. The default classifier is only available when using <code class="codeph">AUTO_LEXER</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-539DCA29-C32C-4749-9C0E-EE57EAC42A6E__GUID-80379365-B424-4672-92CF-027922E9FE2F">Syntax</p><pre class="pre codeblock"><code>SENTIMENT(
    index_name IN VARCHAR2,
    textkey IN VARCHAR2,
    topic IN VARCHAR2,
    restab IN VARCHAR2,
    clsfier_name IN VARCHAR2 default NULL,
    ttype IN VARCHAR2 default 'EXACT',
    radius IN NUMBER default 50,
    max_inst IN NUMBER default 5,
    starttag IN VARCHAR2 default '',
    endtag IN VARCHAR2 default '',
    use_saved_copy IN NUMBER default 0
);
</code></pre><div class="p">Most parameters in <code class="codeph">SENTIMENT</code> are also used in <code class="codeph">SENTIMENT_AGGREGATE</code>. For a description of parameters common to <code class="codeph">SENTIMENT</code> and <code class="codeph">SENTIMENT_AGGREGATE</code>, refer to <a href="CTX_DOC-package.html#GUID-F1588275-38FF-4515-BD39-DD67C98444CB" title="Use this procedure to perform sentiment analysis and return a single aggregate sentiment score per document. The aggregate sentiment score is a value between -100 and 100.">SENTIMENT_AGGREGATE</a>.
                        <dl class="1.00* 3.00*">
                           <dt class="dlterm"><a name="GUID-539DCA29-C32C-4749-9C0E-EE57EAC42A6E__GUID-AE3E4981-AE17-4875-9707-D8C570CE26EB">
                                 <!-- --></a>restab
                           </dt>
                           <dd>
                              <p>Specify the name of the result table that will be populated with generated results. The table must exist and you must have <code class="codeph">INSERT</code> permissions on the table. The table must have two columns, <code class="codeph">snippet</code> of data type <code class="codeph">CLOB</code> and <code class="codeph">score</code> of data type <code class="codeph">NUMBER</code>.
                              </p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-539DCA29-C32C-4749-9C0E-EE57EAC42A6E__GUID-F744F062-4F26-4D51-B35E-EFF7BB56130C">
                                 <!-- --></a>starttag
                           </dt>
                           <dd>
                              <p>Specify the character(s) to be inserted to indicate the start of a highlighted term.</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-539DCA29-C32C-4749-9C0E-EE57EAC42A6E__GUID-BB1F17A0-C69F-44E4-B473-BF94D750190D">
                                 <!-- --></a>endtag
                           </dt>
                           <dd>
                              <p>Specify the character(s) to be inserted to indicate the end of a highlighted term.</p>
                           </dd>
                        </dl>
                     </div>
                     <div class="infoboxnotealso" id="GUID-539DCA29-C32C-4749-9C0E-EE57EAC42A6E__GUID-26BC8111-63DB-4F61-882A-21EB51829673">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccapp/performing-sentiment-analysis-using-oracle-text.html#CCAPP-GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D" target="_blank"><span><cite>Oracle Text Application Developer's Guide</cite></span></a> for an example of using the <code class="codeph">SENTIMENT</code> procedure
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-F1588275-38FF-4515-BD39-DD67C98444CB" name="GUID-F1588275-38FF-4515-BD39-DD67C98444CB"></a><h3 id="CCREF-GUID-F1588275-38FF-4515-BD39-DD67C98444CB" class="sect3"><span class="enumeration_section">9.20 </span>SENTIMENT_AGGREGATE
               </h3>
               <div>
                  <p>Use this procedure to perform sentiment analysis and return a single aggregate sentiment score per document. The aggregate sentiment score is a value between -100 and 100.</p>
                  <div class="section">
                     <p></p>
                     <p>You specify search keywords as part of a text query and then identify a sentiment associated with the topics in the document.</p>
                     <p>The mandatory inputs for this procedure include the name of a text index associated with the document set and the text key, which is a unique identifier that identifies each document. If no sentiment classifier is specified, then the default sentiment classifier is used. The default classifier is only available when using <code class="codeph">AUTO_LEXER</code>.
                     </p>
                     <p>If the specified topic keyword is not found within the document, then a sentiment score of zero is returned. If no topic is specified, then the aggregate sentiment score for the entire document is returned.</p>
                     <div class="infoboxnote" id="GUID-F1588275-38FF-4515-BD39-DD67C98444CB__GUID-543DE238-DF9F-4F4F-B96D-18103AE85600">
                        <p class="notep1">Note:</p>
                        <p>Avoid using <code class="codeph">AUTO_LEXER</code> with user-defined classifiers as this may provide inconsistent sentiment scores.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F1588275-38FF-4515-BD39-DD67C98444CB__GUID-9C87BC8E-5E68-4279-A3A9-0F7AE7F33821">Syntax</p><pre class="pre codeblock"><code>SENTIMENT_AGGREGATE(
    index_name IN VARCHAR2,
    textkey IN VARCHAR2,
    topic IN VARCHAR2 default NULL,
    clsfier_name IN VARCHAR2 default NULL,
    ttype IN VARCHAR2 default 'EXACT',
    radius IN NUMBER default 50,
    max_inst IN NUMBER default 5,
    use_saved_copy IN NUMBER default 0
) return NUMBER;
</code></pre><dl class="0.99* 3.01*">
                        <dt class="dlterm"><a name="GUID-F1588275-38FF-4515-BD39-DD67C98444CB__GUID-AE3E4981-AE17-4875-9707-D8C570CE26EB">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the <code class="codeph">CONTEXT</code> index for the text column. This parameter is mandatory.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F1588275-38FF-4515-BD39-DD67C98444CB__GUID-F744F062-4F26-4D51-B35E-EFF7BB56130C">
                              <!-- --></a>textkey
                        </dt>
                        <dd>
                           <p>Specify the unique identifier (usually the primary key) for the document. The <code class="codeph">textkey</code> is mandatory and is a single column primary key value. 
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F1588275-38FF-4515-BD39-DD67C98444CB__GUID-BB1F17A0-C69F-44E4-B473-BF94D750190D">
                              <!-- --></a>clsfier_name
                        </dt>
                        <dd>
                           <p>Specify the name of the sentiment classifier used to perform sentiment analysis. The maximum length supported for a classifier name is 24 bytes. If you do not specify a classifier name, then the default classifier is used.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F1588275-38FF-4515-BD39-DD67C98444CB__GUID-C5351C8F-383C-4BB5-B519-4934749AB4BA">
                              <!-- --></a>topic
                        </dt>
                        <dd>Specify the topic for which a sentiment score must be generated for this document. If the topic is not specified, then the sentiment score for the entire document is generated.</dd>
                        <dt class="dlterm"><a name="GUID-F1588275-38FF-4515-BD39-DD67C98444CB__GUID-5BDD9548-F165-40F9-8C2E-2AB6E0A39461">
                              <!-- --></a>ttype
                        </dt>
                        <dd>Specify the type of search to be performed for this document:
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">EXACT:</code> Indicates that the specified search keyword must be searched in the document. This is the default setting.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">ABOUT:</code> Indicates that the thesaurus must be used to find words that are related to the search keywords.
                                 </p>
                              </li>
                           </ul>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F1588275-38FF-4515-BD39-DD67C98444CB__GUID-67158CAA-6CA1-4D7E-8B05-E2CE3BE14C62">
                              <!-- --></a>radius
                        </dt>
                        <dd>
                           <p>Specifies the radius of the surrounding text to be analyzed during sentiment classification. The default value is 50.</p>
                           <p>The exact amount of text used for analysis varies from case to case because Oracle Text attempts to find the best match text segment with respect to nearby topic keywords, word boundaries, and sentence boundaries.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F1588275-38FF-4515-BD39-DD67C98444CB__GUID-8CB53E97-3DBE-4FA5-A290-82740DEDA7BD">
                              <!-- --></a>max_inst
                        </dt>
                        <dd>Specify the maximum number of instances/occurrences of the <code class="codeph">topic</code> that must be analyzed. The default value for this parameter is 5.
                        </dd>
                        <dt class="dlterm"><a name="GUID-F1588275-38FF-4515-BD39-DD67C98444CB__GUID-31516EA7-995B-45D4-82DC-21619B097402">
                              <!-- --></a>use_saved_copy
                        </dt>
                        <dd>Specify whether to refer to the <code class="codeph">$D</code> table to fetch the copy of the document and what action to take when the copy of the document is not available in the <code class="codeph">$D</code> table. The default value of this parameter is zero.
                        </dd>
                     </dl>
                     <div class="infoboxnotealso" id="GUID-F1588275-38FF-4515-BD39-DD67C98444CB__GUID-E720743B-CB9A-407E-B46C-5BA3AAD7AD27">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccapp/performing-sentiment-analysis-using-oracle-text.html#CCAPP-GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D" target="_blank"><span><cite>Oracle Text Application Developer's Guide</cite></span></a> for an example of using the <code class="codeph">SENTIMENT_AGGREGATE</code> procedure
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF0714"></a><div class="props_rev_3"><a id="GUID-65442C38-17F7-4BF9-89B4-35945EDCE92A" name="GUID-65442C38-17F7-4BF9-89B4-35945EDCE92A"></a><h3 id="CCREF-GUID-65442C38-17F7-4BF9-89B4-35945EDCE92A" class="sect3"><span class="enumeration_section">9.21 </span>SET_KEY_TYPE
               </h3>
               <div>
                  <div class="section">
                     <p>Use this procedure to set the <code class="codeph">CTX_DOC</code> procedures to accept either the <code class="codeph">ROWID</code> or the <code class="codeph">PRIMARY_KEY</code> document identifiers. This setting affects the invoking session only.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-65442C38-17F7-4BF9-89B4-35945EDCE92A__GUID-B51BD8FD-4D23-4D09-96B9-849798303FFB">Syntax</p><pre class="oac_no_warn" dir="ltr">ctx_doc.set_key_type(key_type in varchar2);</pre><dl>
                        <dt class="dlterm"><a name="GUID-65442C38-17F7-4BF9-89B4-35945EDCE92A__GUID-FEA6DBF2-4544-4856-A38D-867301214CD9">
                              <!-- --></a>key_type
                        </dt>
                        <dd>
                           <p>Specify either <code class="codeph">ROWID</code> or <code class="codeph">PRIMARY_KEY</code> as the input key type (document identifier) for <code class="codeph">CTX_DOC</code> procedures.
                           </p>
                           <p>This parameter defaults to the value of the <code class="codeph">CTX_DOC_KEY_TYPE</code> system parameter.
                           </p>
                           <div class="infoboxnote" id="GUID-65442C38-17F7-4BF9-89B4-35945EDCE92A__GUID-3CAE0F0D-4E1D-43A8-8647-9FDBD44E2E77">
                              <p class="notep1">Note:</p>
                              <p>When your base table has no primary key, setting key_type to <code class="codeph">PRIMARY_KEY</code> is ignored. The textkey parameter that you specify for any <code class="codeph">CTX_DOC</code> procedure is interpreted as a <code class="codeph">ROWID</code>.
                              </p>
                           </div>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-65442C38-17F7-4BF9-89B4-35945EDCE92A__GUID-28B7C54A-BD87-455C-83EF-1E3D2AA67C5B">Example</p>
                     <p>The following example sets <code class="codeph">CTX_DOC</code> procedures to accept primary key document identifiers.
                     </p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.set_key_type('PRIMARY_KEY');
end</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF23919"></a><a id="CCREF23920"></a><a id="CCREF2123"></a><div class="props_rev_3"><a id="GUID-07604453-9C9A-45EB-BF43-8CD565379F22" name="GUID-07604453-9C9A-45EB-BF43-8CD565379F22"></a><h3 id="CCREF-GUID-07604453-9C9A-45EB-BF43-8CD565379F22" class="sect3"><span class="enumeration_section">9.22 </span>SNIPPET
               </h3>
               <div>
                  <div class="section">
                     <p>Use the <code class="codeph">CTX_DOC.SNIPPET</code> procedure to produce a concordance<a id="d98925e5927" class="indexterm-anchor"></a> for a document. The output of a snippet is a collection of segments. A concordance is a text fragment that contains a query term with some of its surrounding text. This is also sometimes known as Key Word in Context or KWIC<a id="d98925e5930" class="indexterm-anchor"></a><a id="d98925e5932" class="indexterm-anchor"></a>, because it returns query keywords marked up in their surrounding text, which enables the user to evaluate them in context. The returned text can also contain themes that satisfy an <code class="codeph">ABOUT</code> query.
                     </p>
                     <p>For example, a search on <span class="italic">brillig</span> and <span class="italic">slithey</span> might return one relevant fragment of a document as follows:
                     </p><pre class="oac_no_warn" dir="ltr">'Twas &lt;b&gt;brillig&lt;/b&gt;, and the &lt;b&gt;slithey&lt;/b&gt; toves did gyre and
</pre><p><code class="codeph">CTX_DOC.SNIPPET</code> returns one or more most relevant fragments for a document that contains the query term. Because <code class="codeph">CTX_DOC.SNIPPET</code> returns surrounding text, you can immediately evaluate how useful the returned term is. <code class="codeph">CTX_DOC.SNIPPET</code> returns the entire document if no words in the returned text are marked up.
                     </p>
                     <p>Note that for queries that have predicates used mainly for filtering documents at query time, the predicates are ignored during <code class="codeph">SNIPPET</code> generation. The following predicates are treated as filter predicates for this purpose: <code class="codeph">SDATA</code>, <code class="codeph">HASPATH</code>, and <code class="codeph">WITHIN</code>/<code class="codeph">INPATH</code> searching inside xml attributes. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-B4BA7C65-221A-4FA0-B8B0-F850B95953CD">
                        <p class="notep1">See Also:</p>
                        <p>CTX_DOC.<a href="CTX_DOC-package.html#GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355">POLICY_SNIPPET</a> for a policy-based version of this procedure
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-17BBFC69-2489-438B-B2DB-6868C2733F9D">Syntax</p>
                     <p>Syntax 1</p><pre class="oac_no_warn" dir="ltr">exec CTX_DOC.SNIPPET(</pre><pre class="oac_no_warn" dir="ltr">index_name               IN VARCHAR2,
textkey                  IN VARCHAR2,
text_query               IN VARCHAR2,
starttag                 IN VARCHAR2 DEFAULT '&lt;b&gt;',
endtag                   IN VARCHAR2 DEFAULT '&lt;/b&gt;',
entity_translation       IN BOOLEAN  DEFAULT TRUE,
separator                IN VARCHAR2 DEFAULT '&lt;b&gt;...&lt;/b&gt;',
radius	                   IN INTEGER DEFAULT 25,
max_length               IN INTEGER DEFAULT 250
use_saved_copy           IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK
return varchar2
);</pre><p>Syntax 2</p><pre class="oac_no_warn" dir="ltr">exec CTX_DOC.SNIPPET_CLOB_QUERY(
index_name               IN VARCHAR2,
textkey                  IN VARCHAR2,
text_query               IN CLOB,
starttag                 IN VARCHAR2 DEFAULT '&lt;b&gt;',
endtag                   IN VARCHAR2 DEFAULT '&lt;/b&gt;',
entity_translation       IN BOOLEAN DEFAULT TRUE,
separator                IN VARCHAR2 DEFAULT '&lt;b&gt;...&lt;/b&gt;',
radius	                   IN INTEGER DEFAULT 25,
max_length               IN INTEGER DEFAULT 250
use_saved_copy           IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK
return varchar2
);</pre><dl>
                        <dt class="dlterm"><a name="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-2A2EF9F7-8A24-427D-B735-EFD3DAE58BFF">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index for the text column.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-BA586C12-2184-4195-AAE3-DA60689EB4B6">
                              <!-- --></a>textkey
                        </dt>
                        <dd>
                           <p>Specify the unique identifier (usually the primary key) for the document. </p>
                           <p>The <tt>textkey</tt> parameter can be as follows:
                           </p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A single column primary key value</p>
                        </li>
                        <li>
                           <p>An encoded specification for a composite (multiple column) primary key. When textkey is a composite key, you must encode the composite textkey string using the <code class="codeph">CTX_DOC.PKENCODE</code> procedure.
                           </p>
                        </li>
                        <li>
                           <p>The rowid of the row containing the document</p>
                        </li>
                     </ul>
                     <p>Use <code class="codeph">CTX_DOC.SET_KEY_TYPE</code> to toggle between primary key and rowid identification.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-4B531D21-006F-4A08-8AF0-C08E6F5D14CF">
                              <!-- --></a>text_query 
                        </dt>
                        <dd>
                           <p>Specify the original query expression used to retrieve the document. If NULL, no highlights are generated. </p>
                           <p>If <code class="codeph">text_query</code> includes wildcards, stemming, fuzzy matching which result in stopwords being returned, <code class="codeph">SNIPPET</code> does not highlight the stopwords.
                           </p>
                           <p>If <code class="codeph">text_query</code> contains the threshold operator, the operator is ignored. 
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-23BBAE8B-4AD7-4A53-8AEC-72DFD9CF39AA">
                              <!-- --></a>starttag
                        </dt>
                        <dd>
                           <p>Specify the start tag for marking up the query keywords. Default is '<span class="italic">&lt;b&gt;</span>'.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-4BD63795-C7EA-4A61-8FE2-6C5C52A45CE1">
                              <!-- --></a>endtag
                        </dt>
                        <dd>
                           <p>Specify the end tag for marking up the query keywords. Default is '<span class="italic">&lt;/b&gt;</span>'.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-289A1DA7-8456-4EA8-B4BF-52F4EC8DEE41">
                              <!-- --></a>entity_translation
                        </dt>
                        <dd>
                           <p>Specify if you want HTML entities to be translated. The default is TRUE, which means that the special entities (<span class="italic">&lt;</span>, <span class="italic">&gt;</span>, and <span class="italic">&amp;</span>) are translated into their alternative forms ('<span class="italic">&amp;lt;</span>', '<span class="italic">&amp;gt;</span>', and '<span class="italic">&amp;amp;</span>') when output by the procedure. However, special characters in the markup tags that are generated by <code class="codeph">CTX_DOC.SNIPPET</code> will not be translated.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-925D0ABF-363E-4657-BA9E-CE2326710F41">
                              <!-- --></a>separator
                        </dt>
                        <dd>
                           <p>Specify the string separating different returned fragments. Default is '<span class="italic">&lt;b&gt;...&lt;/b&gt;</span>'.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-FF259C9B-F37E-48F9-9A3A-594A62D3D114">
                              <!-- --></a>radius
                        </dt>
                        <dd>
                           <p>Specify the number of characters to be shown on either side of the hit query in a segment. The character count before the hit query begins on the first character of the first hit query displayed in a segment. Accordingly, the character count after the hit query begins on the last character of the last hit query displayed on a specific segment. Two segments are merged into one if their radii overlap. The displayed number of characters on each side may be modified by +/-10 chars to best match the beginning or ending of a sentence or word.</p>
                           <p>Special attention is required for the value <code class="codeph">0</code>. When specified, the radius is set to automatic and varies between sentences. A best guess of the results is displayed, which attempts to match a full sentence. Note that the length of the radius on each side of the hit query will most likely significantly differ.
                           </p>
                           <p>The default value is 25.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-8CD3DACC-A7A3-4AB2-9E71-633D396980CD">
                              <!-- --></a>max_length
                        </dt>
                        <dd>
                           <p>Specify the maximum length of the snippet output in characters. This value is currently upper-bounded by the current return type of CTX_DOC.<a href="CTX_DOC-package.html#GUID-07604453-9C9A-45EB-BF43-8CD565379F22">SNIPPET</a> and CTX_DOC.<a href="CTX_DOC-package.html#GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355">POLICY_SNIPPET</a> (VARCHAR2). Should the output be longer than the return type VARCHAR2, the result will be truncated. The default value for max_length is 250.
                           </p>
                           <p>If you set <code class="codeph">max_length</code> value to a very low value, no snippet may be generated. For example, if <code class="codeph">max_length</code> is set to <code class="codeph">0</code> or if <code class="codeph">max_length</code> is lower than the length of query tokens themselves, no snippet may be generated at all.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-07F4BFA7-124D-4D5C-A9FD-94B8A7E57A33">
                              <!-- --></a>use_saved_copy
                        </dt>
                        <dd>
                           <p>Specify whether to refer to the $D table to fetch the copy of the document, and what action to take when the copy of the document is not available in the $D table. The default value is <code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>.
                           </p>
                           <p>You can specify one of the following values for the <code class="codeph">use_saved_copy</code> parameter:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then fetch the document from the data store.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">CTX_DOC.SAVE_COPY_ERROR</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then show an error message. Specify this value when you want to implement a specific fallback logic when the copy of the document is not available in the $D table. 
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">CTX_DOC.SAVE_COPY_IGNORE</code>: Always fetch the document from the data store.
                                 </p>
                              </li>
                           </ul>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-03620465-AE4C-449A-A51C-6744A447272B">Example</p><pre class="oac_no_warn" dir="ltr">create table tdrbhk01 (id number primary key, text varchar2(4000));
 
insert into tdrbhk01 values (1, 'Oracle Text adds powerful search
 and intelligent text management to the Oracle
database.  Complete.  You can search and manage documents, web pages,
catalog entries in more than 150 formats in any language.  Provides a
complete text query language and complete character support.  Simple.  You
can index and search text using SQL. Oracle Text Management can be done
using Oracle Enterprise Manager - a GUI tool.  Fast.  You can search
millions of documents, document,web pages, catalog entries using the
power and scalability of the database.  Intelligent.  Oracle Text''s
unique knowledge-base enables you to search, classify, manage
documents, clusters and summarize text based on its meaning as well as
its content. ');
 
create index tdrbhk01x on tdrbhk01(text) indextype is ctxsys.context;
 
create or replace function my_snippet_wrapper(
 key in varchar2,
 query in varchar2,
 radius in number,
 max_length in number) return varchar2 is
  buff varchar2(4000);
 begin
  buff := ctx_doc.snippet('tdrbhk01x', key, query, '&lt;b&gt;', '&lt;b&gt;', true, '&lt;b&gt;..&lt;b&gt;', radius, max_length);
  return buff;
 end;
/
show errors;
 
select my_snippet_wrapper('1','Oracle', 10, 100) from dual;
</pre><p>The result looks something like this:</p><pre class="oac_no_warn" dir="ltr">CTX_DOC.SNIPPET('TDRBHK01X','1','SEARCH|CLASSIFY')
------------------------------------------------------------------------
 
Text's unique knowledge-base enables you to &lt;b&gt;search&lt;/b&gt;,
&lt;b&gt;classify&lt;/b&gt;, manage documents, clusters and summarize</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-BE6D9113-245B-4415-B8C3-B04931F93331">Limitations</p>
                     <p><code class="codeph">CTX_DOC.SNIPPET</code> does not support the use of query templates.
                     </p>
                     <p><code class="codeph">CTX_DOC.SNIPPET</code> displays marked-up keywords in context when used with <code class="codeph">NULL_SECTION_GROUP</code>. However, there are limitations when using this procedure with XML documents. When used with <code class="codeph">XML_SECTION_GROUP</code> or <code class="codeph">AUTO_SECTION_GROUP</code>, the XML structure is ignored and user-specified tags are stripped out, which results in parts of surrounding text to be included in the returned snippet.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-07604453-9C9A-45EB-BF43-8CD565379F22__GUID-3C914692-7E78-4CDD-B771-81122C693C93">Related Topics</p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-F0EC7547-A6AF-40EB-A5AE-5F59367EE355">POLICY_SNIPPET</a>"</span></p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-719549AC-234D-4BC4-B3E0-605F8C6EB511">HIGHLIGHT </a>"</span></p>
                     <p><span class="q">"<a href="CTX_DOC-package.html#GUID-F1A960BD-70E6-4BAC-B194-717B37F803D9">MARKUP </a>"</span></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF23921"></a><a id="CCREF23922"></a><a id="CCREF23923"></a><a id="CCREF23924"></a><a id="CCREF0716"></a><div class="props_rev_3"><a id="GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886" name="GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886"></a><h3 id="CCREF-GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886" class="sect3"><span class="enumeration_section">9.23 </span>THEMES
               </h3>
               <div>
                  <div class="section">
                     <p>Use the <code class="codeph">CTX_DOC.THEMES</code> procedure to generate a list of themes for a document. You can store each theme as a row in either a result table or an in-memory PL/SQL table that you specify.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886__GUID-78587FAD-9AB0-4F6B-84D8-93ADB4F26E49">Syntax 1: In-Memory Table Storage</p><pre class="oac_no_warn" dir="ltr">CTX_DOC.THEMES(</pre><pre class="oac_no_warn" dir="ltr">index_name      IN VARCHAR2,
textkey         IN VARCHAR2,
restab          IN OUT NOCOPY THEME_TAB,
full_themes     IN BOOLEAN DEFAULT FALSE,
num_themes      IN NUMBER DEFAULT 50,
use_saved_copy  IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886__GUID-A29620BA-F5A2-4835-9E92-1E816C67FDDA">Syntax 2: Result Table Storage</p><pre class="oac_no_warn" dir="ltr">CTX_DOC.THEMES(</pre><pre class="oac_no_warn" dir="ltr">index_name      IN VARCHAR2,
textkey         IN VARCHAR2,
restab          IN VARCHAR2,
query_id        IN NUMBER DEFAULT 0,
full_themes     IN BOOLEAN DEFAULT FALSE,
num_themes      IN NUMBER DEFAULT 50,
use_saved_copy  IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);</pre><dl>
                        <dt class="dlterm"><a name="GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886__GUID-A40EAFA2-ADCB-4168-AACF-6FC6BF42D3FA">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index for the text column.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886__GUID-06A4DDC3-E263-4565-A055-AA6A78842D5F">
                              <!-- --></a>textkey
                        </dt>
                        <dd>
                           <p>Specify the unique identifier (usually the primary key) for the document.</p>
                           <p>The <tt>textkey</tt> parameter can be as follows:
                           </p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A single column primary key value</p>
                        </li>
                        <li>
                           <p>An encoded specification for a composite (multiple column) primary key. When textkey is a composite key, you must encode the composite <tt>textkey</tt> string using the <code class="codeph">CTX_DOC.PKENCODE</code> procedure.
                           </p>
                        </li>
                        <li>
                           <p>The rowid of the row containing the document</p>
                        </li>
                     </ul>
                     <p>Toggle between primary key and rowid identification using <code class="codeph">CTX_DOC.SET_KEY_TYPE</code>.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886__GUID-2135E762-E021-41E5-8C5A-953B9B805FF2">
                              <!-- --></a>restab 
                        </dt>
                        <dd>
                           <p>You can specify this procedure to store results to either a table or to an in-memory PL/SQL table. </p>
                           <p>To store results in a table, specify the name of the table.</p>
                           <div class="infoboxnotealso" id="GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886__GUID-D0749AC5-2F03-4186-8184-114365996382">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="oracle-text-result-tables.html#GUID-C1E30F78-91DF-4A69-93F2-801E0147582D">Theme Table</a>"</span> in <a href="oracle-text-result-tables.html#GUID-FF9744A0-D81C-45B1-8289-B42DC4211F75"> Oracle Text Result Tables</a></p>
                           </div>
                           <p>To store results in an in-memory table, specify the name of the in-memory table of type <code class="codeph">THEME_TAB</code>. The <code class="codeph">THEME_TAB</code> datatype is defined as follows:
                           </p><pre class="oac_no_warn" dir="ltr">type theme_rec is record (
   theme varchar2(2000),
   weight number
);

type theme_tab is table of theme_rec index by binary_integer;
</pre><p><code class="codeph">CTX_DOC.THEMES</code> clears the <code class="codeph">THEME_TAB</code> you specify before the operation.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886__GUID-E7CBCA09-61AD-4476-B743-24F456DAD1EC">
                              <!-- --></a>query_id
                        </dt>
                        <dd>
                           <p>Specify the identifier used to identify the row(s) inserted into <tt>restab</tt>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886__GUID-759D6CAD-6F98-4774-9BBE-F0124BD9967F">
                              <!-- --></a>full_themes
                        </dt>
                        <dd>
                           <p>Specify whether this procedure generates a single theme or a hierarchical list of parent themes (full themes) for each document theme.</p>
                           <p>Specify <code class="codeph">TRUE</code> for this procedure to write full themes to the <code class="codeph">THEME</code> column of the result table.
                           </p>
                           <p>Specify <code class="codeph">FALSE</code> for this procedure to write single theme information to the <code class="codeph">THEME</code> column of the result table. This is the default.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886__GUID-42641E48-565F-42DD-A4CD-114E8FDB89F9">
                              <!-- --></a>num_themes
                        </dt>
                        <dd>
                           <p>Specify the maximum number of themes to retrieve. For example, if you specify 10, then up to the first 10 themes are returned for the document. The default is 50.</p>
                           <p>If you specify 0 or <code class="codeph">NULL</code>, then this procedure returns all themes in a document. If the document contains more than 50 themes, then only the first 50 themes show conceptual hierarchy.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886__GUID-822E3CE6-36B1-4355-9BC4-7B7F5E9386AB">
                              <!-- --></a>use_saved_copy
                        </dt>
                        <dd>
                           <p>Specify whether to refer to the $D table to fetch the copy of the document, and what action to take when the copy of the document is not available in the $D table. </p>
                           <p>You can specify one of the following values for the <code class="codeph">use_saved_copy</code> parameter:
                           </p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then fetch the document from the data store.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_ERROR</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then show an error message. Specify this value when you want to implement a specific fallback logic when the copy of the document is not available in the $D table. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_IGNORE</code>: Always fetch the document from the data store.
                           </p>
                        </li>
                     </ul>
                     <p>The default value is <code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C7F3ED39-A1AD-4688-B38A-D344F820A886__GUID-3B07FCA7-3266-4C4D-B1BC-CB32E32A5F42">Examples</p>
                     <p>In-Memory Themes</p>
                     <p>The following example generates the first 10 themes for document 1 and stores them in an in-memory table called <code class="codeph">the_themes</code>. The example then loops through the table to display the document themes.
                     </p><pre class="oac_no_warn" dir="ltr">declare
 the_themes ctx_doc.theme_tab;

begin
 ctx_doc.themes('myindex','1',the_themes, num_themes=&gt;10);
 for i in 1..the_themes.count loop
  dbms_output.put_line(the_themes(i).theme||':'||the_themes(i).weight);
  end loop;
end;</pre><p>Theme Table</p>
                     <p>The following example creates a theme table called <code class="codeph">CTX_THEMES</code>:
                     </p><pre class="oac_no_warn" dir="ltr">create table CTX_THEMES (query_id number, 
                         theme varchar2(2000), 
                         weight number);</pre><p>Single Themes</p>
                     <p>To obtain a list of up to the first 20 themes, where each element in the list is a single theme, enter a statement like the following example:</p><pre class="oac_no_warn" dir="ltr">begin</pre><pre class="oac_no_warn" dir="ltr"> ctx_doc.themes('newsindex','34','CTX_THEMES',1,full_themes =&gt; FALSE, 
 num_themes=&gt; 20);</pre><pre class="oac_no_warn" dir="ltr">end;</pre><p>Full Themes </p>
                     <p>To<a id="d98925e6509" class="indexterm-anchor"></a> obtain a list of the top 20 themes, where each element in the list is a hierarchical list of parent themes, enter a statement like the following example:
                     </p><pre class="oac_no_warn" dir="ltr">begin</pre><pre class="oac_no_warn" dir="ltr">ctx_doc.themes('newsindex','34','CTX_THEMES',1,full_themes =&gt; TRUE, num_
themes=&gt;20);</pre><pre class="oac_no_warn" dir="ltr">end;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF23925"></a><a id="CCREF23926"></a><a id="CCREF23927"></a><a id="CCREF23928"></a><a id="CCREF0718"></a><div class="props_rev_3"><a id="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71" name="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71"></a><h3 id="CCREF-GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71" class="sect3"><span class="enumeration_section">9.24 </span>TOKENS
               </h3>
               <div>
                  <div class="section"></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Use this procedure to identify all text tokens in a document. The tokens returned are those tokens that are inserted into the index. Thesaurus support also enables you to generate synonyms or broader terms of the queried index tokens. This feature is useful for implementing document classification, routing, or clustering.</p>
                     <p>Stopwords are not returned. Section tags are not returned because they are not text tokens.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71__GUID-05598D1B-3E6B-430F-AFAC-787F592E7D16">Syntax 1: In-Memory Table Storage </p><pre class="oac_no_warn" dir="ltr">CTX_DOC.TOKENS(index_name      IN VARCHAR2,
               textkey         IN VARCHAR2,
               restab          IN OUT NOCOPY TOKEN_TAB,
               thes_name       IN VARCHAR2 DEFAULT NULL,   
               thes_toktype    IN VARCHAR2 DEFAULT 'SYN',  
               use_saved_copy  IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71__GUID-4AE6CBDA-2649-4B7B-9313-E02E028D1C4C">Syntax 2: Result Table Storage </p><pre class="oac_no_warn" dir="ltr">CTX_DOC.TOKENS(index_name      IN VARCHAR2,
               textkey         IN VARCHAR2,
               restab          IN VARCHAR2,
               thes_name       IN VARCHAR2 DEFAULT NULL,
               thes_toktype    IN VARCHAR2 DEFAULT 'SYN',       
               query_id        IN NUMBER DEFAULT 0,
               use_saved_copy  IN NUMBER DEFAULT CTX_DOC.SAVE_COPY_FALLBACK);</pre><dl>
                        <dt class="dlterm"><a name="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71__GUID-AAAB0B97-2045-47C5-9BE0-8B77E7BB84A3">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index for the text column.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71__GUID-EFEE3A76-A33C-41C3-9CD0-9BB20FBC9C26">
                              <!-- --></a>textkey
                        </dt>
                        <dd>
                           <p>Specify the unique identifier (usually the primary key) for the document.</p>
                           <p>The <tt>textkey</tt> parameter can be as follows:
                           </p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A single column primary key value</p>
                        </li>
                        <li>
                           <p>Encoded specification for a composite (multiple column) primary key. To encode a composite <tt>textkey</tt>, use the CTX_DOC.<a href="CTX_DOC-package.html#GUID-FCB1A16D-DFFA-4261-8C2E-96DB9D2E2C1A">PKENCODE </a> procedure.
                           </p>
                        </li>
                        <li>
                           <p>The rowid of the row containing the document</p>
                        </li>
                     </ul>
                     <p>Toggle between primary key and rowid identification using CTX_DOC.<a href="CTX_DOC-package.html#GUID-65442C38-17F7-4BF9-89B4-35945EDCE92A">SET_KEY_TYPE</a>.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71__GUID-6F1C2E77-7119-49D4-9CCA-5F3A26C4D90E">
                              <!-- --></a>restab
                        </dt>
                        <dd>
                           <p>You can specify that this procedure store results to either a table or to an in-memory PL/SQL table. </p>
                           <p>The tokens returned are those tokens that are inserted into the index for the document (or row) named with <tt>textkey</tt>. Stop words are not returned. Section tags are not returned because they are not text tokens.
                           </p>
                        </dd>
                     </dl>
                     <dl>
                        <dt class="dlterm"><a name="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71__GUID-0E7E3232-FA5A-4794-80C7-8C9CBB1B6CFE">
                              <!-- --></a>thes_name
                        </dt>
                        <dd>Specify the thesaurus name. If you do not specify a thesaurus name, then no synonyms or broader terms will be generated. To use the system default thesaurus, specify <code class="codeph">DEFAULT</code>.
                        </dd>
                        <dt class="dlterm"><a name="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71__GUID-8002FC37-8AAC-472D-BBF4-D5D7AD335A5F">
                              <!-- --></a>thes_toktype
                        </dt>
                        <dd>Specify <code class="codeph">SYN</code> to generate synonyms of index tokens. Alternatively, specify <code class="codeph">BT</code> to generate broader terms of index tokens. By default, synonyms are generated. To use this parameter, you must first specify a thesaurus name using the <code class="codeph">thes_name</code> parameter.
                        </dd>
                     </dl>
                     <p>Specifying a Token Table</p>
                     <p>To store results to a table, specify the name of the table. Token tables can be named anything, but must include the columns shown in the following table, with names and datatypes as specified.</p>
                     <div class="tblformal" id="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71__GUID-C43F8B88-EA72-4131-AE23-3C7231931124">
                        <p class="titleintable">Table 9-2 Required Columns for Token Tables</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Required Columns for Token Tables" summary="This table describes required columns for token tables." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d98925e6708">Column Name</th>
                                 <th align="left" valign="bottom" width="19%" id="d98925e6711">Type</th>
                                 <th align="left" valign="bottom" width="63%" id="d98925e6714">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d98925e6719" headers="d98925e6708 ">
                                    <p><code class="codeph">QUERY_ID</code></p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d98925e6719 d98925e6711 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d98925e6719 d98925e6714 ">
                                    <p>The identifier for the results generated by a particular call to <code class="codeph">CTX_DOC.TOKENS</code> (only populated when table is used to store results from multiple <code class="codeph">TOKEN</code> calls)
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d98925e6737" headers="d98925e6708 ">
                                    <p><code class="codeph">TOKEN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d98925e6737 d98925e6711 ">
                                    <p><code class="codeph">VARCHAR2(255)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d98925e6737 d98925e6714 ">
                                    <p>The token string in the text.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d98925e6749" headers="d98925e6708 ">
                                    <p><code class="codeph">OFFSET</code></p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d98925e6749 d98925e6711 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d98925e6749 d98925e6714 ">
                                    <p>The position of the token in the document, relative to the start of document which has a position of 1. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d98925e6761" headers="d98925e6708 ">
                                    <p><code class="codeph">LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d98925e6761 d98925e6711 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d98925e6761 d98925e6714 ">
                                    <p>The character length of the token.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71__GUID-36907548-DCC9-4DEC-8F50-1E7C21FFB1B9">Specifying an In-Memory Table</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>To store results to an in-memory table, specify the name of the in-memory table of type <code class="codeph">TOKEN_TAB</code>. The <code class="codeph">TOKEN_TAB</code> datatype is defined as follows:
                     </p><pre class="oac_no_warn" dir="ltr">type token_rec is record (</pre><pre class="oac_no_warn" dir="ltr">token varchar2(255),
offset number,
length number</pre><pre class="oac_no_warn" dir="ltr">);

type token_tab is table of token_rec index by binary_integer;
</pre><p><code class="codeph">CTX_DOC.TOKENS</code> clears the <code class="codeph">TOKEN_TAB</code> you specify before the operation.
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71__GUID-7F4C6BF3-E8E4-4D2F-AD29-99C06FA02D48">
                              <!-- --></a>query_id
                        </dt>
                        <dd>
                           <p>Specify the identifier used to identify the row(s) inserted into <tt>restab</tt>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71__GUID-FCFE420A-6B26-4DE7-A107-521E78C61861">
                              <!-- --></a>use_saved_copy
                        </dt>
                        <dd>
                           <p>Specify whether to refer to the $D table to fetch the copy of the document, and what action to take when the copy of the document is not available in the $D table. </p>
                           <p>You can specify one of the following values for the <code class="codeph">use_saved_copy</code> parameter:
                           </p>
                        </dd>
                     </dl>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then fetch the document from the data store.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_ERROR</code>: Fetch the copy of the document from the $D table. If the copy of the document is not present in the $D table, then show an error message. Specify this value when you want to implement a specific fallback logic when the copy of the document is not available in the $D table. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SAVE_COPY_IGNORE</code>: Always fetch the document from the data store.
                           </p>
                        </li>
                     </ul>
                     <p>The default value is <code class="codeph">CTX_DOC.SAVE_COPY_FALLBACK</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BD9D08B0-A249-45AD-ACC2-C8C9B6CE6D71__GUID-3239AAFE-8C1F-472F-A92D-3B63D27A573D">Example</p>
                     <p>In-Memory Tokens</p>
                     <p>The following example generates the tokens for document 1 and stores them in an in-memory table, declared as <code class="codeph">the_tokens</code>. The example then loops through the table to display the document tokens.
                     </p><pre class="oac_no_warn" dir="ltr">declare
 the_tokens ctx_doc.token_tab;

begin
 ctx_doc.tokens('myindex','1',the_tokens);
 for i in 1..the_tokens.count loop
  dbms_output.put_line(the_tokens(i).token);
  end loop;
end;</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
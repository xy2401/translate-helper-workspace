<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The MDSYS.SDO_MIGRATE package contains a single subprogram, SDO_MIGRATE.TO_CURRENT.">
      <meta name="description" content="The MDSYS.SDO_MIGRATE package contains a single subprogram, SDO_MIGRATE.TO_CURRENT.">
      <title>SDO_MIGRATE Package (Upgrading)</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="The MDSYS.SDO_MIGRATE package contains a single subprogram, SDO_MIGRATE.TO_CURRENT.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="spatial-and-graph-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T14:11:51-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94799-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="SDO_LRS-reference.html" title="Previous" type="text/html">
      <link rel="next" href="SDO_OLS-reference.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Developer's Guide">
    <meta name="dcterms.isVersionOf" content="SPATL">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="SDO_LRS-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="SDO_OLS-reference.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="spatial-reference-information.html" property="item" typeof="WebPage"><span property="name">  Reference Information </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> SDO_MIGRATE Package (Upgrading)</li>
            </ol>
            <a id="GUID-60525DFE-EE7A-4302-BFC9-5F9CDBF9728E" name="GUID-60525DFE-EE7A-4302-BFC9-5F9CDBF9728E"></a><a id="SPATL160"></a>
            
            <h2 id="SPATL-GUID-60525DFE-EE7A-4302-BFC9-5F9CDBF9728E" class="sect2"><span class="enumeration_chapter">28 </span> SDO_MIGRATE Package (Upgrading)
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The MDSYS.SDO_MIGRATE package contains a single subprogram, SDO_MIGRATE.TO_CURRENT.</p>
               <p>The <a href="SDO_MIGRATE-reference.html#GUID-83196024-5E64-4DA7-A588-0A31717FF150">SDO_MIGRATE.TO_CURRENT</a> subprogram described in this chapter has both procedure and function interfaces. As a procedure, it lets you upgrade spatial geometry tables from previous releases of Spatial and Graph; and as a function, it lets you upgrade a single SDO_GEOMETRY object.
               </p>
               <p>This subprogram has very limited uses, as explained in the Usage Notes for its documentation.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="SDO_MIGRATE-reference.html#GUID-83196024-5E64-4DA7-A588-0A31717FF150">SDO_MIGRATE.TO_CURRENT</a><br></li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="spatial-reference-information.html#GUID-343C3A98-6564-49CF-AA31-F86C5AEAAF02">Reference Information</a></p>
                  </div>
               </div>
            </div>
            <a id="SPATL1185"></a><div class="props_rev_3"><a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150" name="GUID-83196024-5E64-4DA7-A588-0A31717FF150"></a><h3 id="SPATL-GUID-83196024-5E64-4DA7-A588-0A31717FF150" class="sect3"><span class="enumeration_section">28.1 </span>SDO_MIGRATE.TO_CURRENT
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-DCEF84C6-0EA6-48B6-8AFF-3B41C97C7F63">Format (Any Object-Relational Model Implementation to Current)</p><pre class="oac_no_warn" dir="ltr">SDO_MIGRATE.TO_CURRENT(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabname         IN VARCHAR2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[, column_name  IN VARCHAR2]);
</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_MIGRATE.TO_CURRENT(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabname       IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column_name   IN VARCHAR2 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[, commit_int IN NUMBER]);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-4E96FE7F-BCE2-492A-BBB5-C389B4D40255">Format (Single Object-Relational Model Geometry to Current)</p><pre class="oac_no_warn" dir="ltr">SDO_MIGRATE.TO_CURRENT(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;geom  IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dim   IN SDO_DIM_ARRAY 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
) RETURN SDO_GEOMETRY;
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-DF1398C2-9A06-4FBD-9AE3-90F9E969C7F9">Format (Any Relational Model Implementation to Current)</p><pre class="oac_no_warn" dir="ltr">SDO_MIGRATE.TO_CURRENT(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layer       IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newtabname  IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gidcolumn   IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;geocolname  IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layer_gtype IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateflag  IN VARCHAR2);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-7EEBC026-60DB-4078-8B77-DF5F6A8A6342">Description</p>
                     <p>Upgrades data from the obsolete Spatial relational model (release 8.1.5 or earlier) to the current release, or upgrades one or more object-relational model (release 8.1.6 or later) geometries that need to be upgraded (as explained in the Usage Notes). As a procedure, TO_CURRENT upgrades an entire layer (all geometries in a column); as a function, TO_CURRENT upgrades a single geometry object, which must be of type SDO_GEOMETRY.</p>
                     <p>For upgrading a layer, the procedure format depends on whether you are upgrading from the Spatial relational model (release 8.1.5 or earlier) or object-relational model (release 8.1.6 or later). See the Usage Notes for the model that applies to you.</p>
                     <div class="infoboxnote" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-0A0F9BA6-56FD-4A75-8F86-FC901C50F669">
                        <p class="notep1">Note:</p>
                        <p>This procedure applies to two-dimensional geometries only. It is not supported for three-dimensional geometries.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-EF76BA26-9AB0-4A39-8EC6-23342C18541C">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-CAF585B7-C5FD-4BDD-9713-00917D0418F6">
                              <!-- --></a>tabname
                        </dt>
                        <dd>
                           <p>Table with geometry objects.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-216EC902-E80B-49C0-8356-EF960B121BA0">
                              <!-- --></a>column_name
                        </dt>
                        <dd>
                           <p>Column in <code class="codeph">tabname</code> that contains geometry objects. If <code class="codeph">column_name</code> is not specified or is specified as null, the column containing geometry objects is upgraded.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-190B18B7-F36C-4319-814D-FADDD6071883">
                              <!-- --></a>commit_int
                        </dt>
                        <dd>
                           <p>Number of geometries to upgrade before Spatial and Graph performs an internal commit operation. If <code class="codeph">commit_int</code> is not specified, no internal commit operations are performed during the upgrade.
                           </p>
                           <p>If you specify a <code class="codeph">commit_int</code> value, you can use a smaller rollback segment than would otherwise be needed.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-CEFC02FA-9751-4528-9648-B63E5F9F68CA">
                              <!-- --></a>geom
                        </dt>
                        <dd>
                           <p>Single geometry object to be upgraded to the current release.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-D2E352FB-1010-4C88-8B55-7014F3B04302">
                              <!-- --></a>dim
                        </dt>
                        <dd>
                           <p>Dimensional information array for the geometry object to be upgraded. The SDO_DIM_ARRAY type is explained in <a href="spatial-datatypes-metadata.html#GUID-483D9FB7-AEC1-433C-A2AF-D0FE3018CDCF">DIMINFO</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-FA890DDC-950B-4C1A-833C-60617A47D78F">
                              <!-- --></a>layer
                        </dt>
                        <dd>
                           <p>Name of the layer to be upgraded.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-1888F4DC-DCC1-4C3F-8E92-6BE74DFF01D9">
                              <!-- --></a>newtabname
                        </dt>
                        <dd>
                           <p>Name of the new table to which you are upgrading the data.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-E947F36C-AB67-4630-AAA0-F4A4DD686ADB">
                              <!-- --></a>gidcolumn
                        </dt>
                        <dd>
                           <p>Name of the column in which to store the GID from the old table.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-28D8B4BC-B05A-4B79-A8CF-87B68FD98CAF">
                              <!-- --></a>geocolname
                        </dt>
                        <dd>
                           <p>Name of the column in the new table where the geometry objects will be inserted.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-B01D883F-8659-4F31-B033-26C2B8C2C6FD">
                              <!-- --></a>layer_gtype
                        </dt>
                        <dd>
                           <p>One of the following values: POINT or NOTPOINT (default).</p>
                           <p>If the layer you are upgrading is composed solely of point data, set this parameter to POINT for optimal performance; otherwise, set this parameter to NOTPOINT. If you set the value to POINT and the layer contains any nonpoint geometries, the upgrade might produce invalid data.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-C8FD32CE-D2AF-41F7-872F-9AEE9603D8F9">
                              <!-- --></a>updateflag
                        </dt>
                        <dd>
                           <p>One of the following values: UPDATE or INSERT (default).</p>
                           <p>If you are upgrading the layer into an existing populated attribute table, set this parameter to UPDATE; otherwise, set this parameter to INSERT.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-0CF66017-A08A-4AE8-BE9B-E2312D53A1E9">Usage Notes for Object-Relational Model Layer and Single Geometry Upgrade</p>
                     <p>This subprogram is not needed for normal upgrades of Oracle Spatial and Graph. It is sometimes needed if spatial data is loaded using a third-party loader and if the resulting geometries have the wrong orientation or invalid ETYPE or GTYPE values. For information about using this subprogram as part of the recommended procedure for loading and validating spatial data, see <a href="loading-spatial-data.html#GUID-A8231A53-C5AA-448E-B458-FE7F3BE98DA6" title="You should validate all geometry data, and fix any validation errors, before performing any spatial operations on the data.">Recommendations for Loading and Validating Spatial Data</a>.
                     </p>
                     <p>This subprogram upgrades the specified geometry or all geometry objects in the specified layer so that their SDO_GTYPE and SDO_ETYPE values are in the format of the current release:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>SDO_GTYPE values of 4 digits are created, using the format (<span class="italic">DLTT</span>) shown in <a href="spatial-datatypes-metadata.html#GUID-4D84CE67-67E4-4A84-8255-C586E765A94B">SDO_GTYPE</a>.
                           </p>
                        </li>
                        <li>
                           <p>SDO_ETYPE values are as discussed in <a href="spatial-datatypes-metadata.html#GUID-270AE39D-7B83-46D0-9DD6-E5D99C045021">SDO_ELEM_INFO</a>.
                           </p>
                        </li>
                     </ul>
                     <p>Geometries are ordered so that exterior rings are followed by their interior rings, and coordinates are saved in the correct rotation (counterclockwise for exterior rings, and clockwise for interior rings).</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-C71C33CD-FD7C-40AE-995A-D272033B2B71">Usage Notes for Relational Model Upgrade</p>
                     <p>If you are you upgrading from the Spatial relational model (release 8.1.5 or earlier), consider the following when using this procedure:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The new table must be created before you call this procedure.</p>
                        </li>
                        <li>
                           <p>If the data to be upgraded is geodetic, the tolerance value (SDO_TOLERANCE column value in the <span class="italic">&lt;layername&gt;</span>_SDODIM table or view) must be expressed in decimal degrees (for example, 0.00000005).
                           </p>
                        </li>
                        <li>
                           <p>The procedure converts geometries from the relational model to the object-relational model.</p>
                        </li>
                        <li>
                           <p>A commit operation is performed by this procedure.</p>
                        </li>
                        <li>
                           <p>If any of the upgrade steps fails, nothing is upgraded for the layer.</p>
                        </li>
                        <li>
                           <p><code class="codeph">layer</code> is the underlying layer name, without the _SDOGEOM suffix.
                           </p>
                        </li>
                        <li>
                           <p>The old SDO_GID is stored in <code class="codeph">gidcolumn</code>.
                           </p>
                        </li>
                        <li>
                           <p>SDO_GTYPE values of 4 digits are created, using the format (<span class="italic">DLTT</span>) shown in <a href="spatial-datatypes-metadata.html#GUID-4D84CE67-67E4-4A84-8255-C586E765A94B">SDO_GTYPE</a>.
                           </p>
                        </li>
                        <li>
                           <p>SDO_ETYPE values are created, using the values discussed in <a href="spatial-datatypes-metadata.html#GUID-270AE39D-7B83-46D0-9DD6-E5D99C045021">SDO_ELEM_INFO</a>.
                           </p>
                        </li>
                        <li>
                           <p>The procedure orders geometries so that exterior rings are followed by their interior rings, and it saves coordinates in the correct rotation (counterclockwise for exterior rings, and clockwise for interior rings).</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-94F7DB76-1516-4B37-9EC6-32364EFDC634">Examples</p>
                     <p>The following example changes the definitions of geometry objects in the ROADS table from the format of a release later than 8.1.5 to the format of the current release.</p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_MIGRATE.TO_CURRENT('ROADS');</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_MIGRATE-reference.html#GUID-60525DFE-EE7A-4302-BFC9-5F9CDBF9728E" title="The MDSYS.SDO_MIGRATE package contains a single subprogram, SDO_MIGRATE.TO_CURRENT.">SDO_MIGRATE Package (Upgrading)</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Developing Client Application (TCP/IP Only)</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-gateway-appc-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-16T18:35:49-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="F18239-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="pg4tcpmap-commands-tcpip.html" title="Previous" type="text/html">
      <link rel="next" href="troubleshooting-oracle-database-gateway-appc.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for APPC User's Guide">
    <meta name="dcterms.isVersionOf" content="APPUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="pg4tcpmap-commands-tcpip.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="troubleshooting-oracle-database-gateway-appc.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Developing Client Application (TCP/IP Only)</li>
            </ol>
            <a id="GUID-705991C2-2CC2-4FAB-A04C-D63485B571FC" name="GUID-705991C2-2CC2-4FAB-A04C-D63485B571FC"></a><a id="APPUG700"></a>
            
            <h2 id="APPUG-GUID-705991C2-2CC2-4FAB-A04C-D63485B571FC" class="sect2"><span class="enumeration_chapter">7 </span>Developing Client Application (TCP/IP Only)
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The <a id="d24694e30" class="indexterm-anchor"></a><a id="d24694e34" class="indexterm-anchor"></a><a id="d24694e40" class="indexterm-anchor"></a>following topics discuss how you will call a TIP and control a remote host transaction if your gateway uses TCP/IP support for IMS Connect. It also provides you with the steps for preparing and executing a gateway transaction. 
               </p>
               <p>The following assumptions are made:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>a remote host transaction (RHT) has already been written</p>
                  </li>
                  <li>
                     <p>a TIP corresponding to the RHT has already been defined using the steps described in <a href="creating-tip-oracle-database-gateway-appc.html#GUID-78D4439E-7DD6-45DF-842E-35007FCC572B">Creating a TIP</a>.
                     </p>
                  </li>
                  <li>
                     <p>the <a id="d24694e61" class="indexterm-anchor"></a><code class="codeph">PGA_TCP_IMSC</code> mapping table has been populated, using the <a id="d24694e66" class="indexterm-anchor"></a><code class="codeph">pg4tcpmap</code> tool, with the <code class="codeph">SIDE PROFILE</code> name, TCP/IP hostname, port number and other IMS Connect parameters.
                     </p>
                  </li>
               </ul>
               <p>Topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="developing-appc-client-app-tcpip-only.html#GUID-C07370C7-9C1B-4003-B3DB-7F041654DCE2">Overview of Client Application </a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-tcpip-only.html#GUID-B7E7C6BD-2087-4F6F-BD63-B172D8853746">Preparing the Client Application</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-tcpip-only.html#GUID-07B57C7F-EB46-4D42-97BF-38F2A5A2EB19">Ensuring TIP and Remote Transaction Program Correspondence</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-tcpip-only.html#GUID-BCFCDB41-E65A-4333-AAAF-CB5FCEB4762A">Calling the TIP from the Client Application</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-tcpip-only.html#GUID-F450316B-272E-4EC2-9574-7F39B34C3B04">Exchanging Data</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-tcpip-only.html#GUID-8EC590FC-73C4-4B31-8662-ED43392EF9CE">Calling PG4TCPMAP</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-tcpip-only.html#GUID-14AA4D11-BDB6-4934-BDE5-371D9B3D61E6">Executing the Application</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-tcpip-only.html#GUID-FDB3D1E8-0510-49D3-AB83-2BD508801865">Application Development with Multi-Byte Character Set Support</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-tcpip-only.html#GUID-322345C3-6367-4ADD-A56A-B9B4A13C83FE">Privileges Needed to Use TIPs</a></p>
                  </li>
               </ul>
            </div><a id="APPUG1314"></a><a id="APPUG1025"></a><div class="props_rev_3"><a id="GUID-C07370C7-9C1B-4003-B3DB-7F041654DCE2" name="GUID-C07370C7-9C1B-4003-B3DB-7F041654DCE2"></a><h3 id="APPUG-GUID-C07370C7-9C1B-4003-B3DB-7F041654DCE2" class="sect3">Overview of Client Application </h3>
               <div>
                  <p>The Procedural Gateway Administration Utility (<a id="d24694e171" class="indexterm-anchor"></a>PGAU) generates a complete TIP using definitions you provide. The client application can then call the TIP to access the remote host transaction. <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a>, discusses the use of PGAU in detail.
                  </p>
                  <p>This overview explains what you must do in order to call a TIP and control a remote host transaction.</p>
                  <p>The gateway receives PL/SQL calls from the <a id="d24694e184" class="indexterm-anchor"></a>Oracle database and issues TCP/IP calls to communicate with a remote transaction program. 
                  </p>
                  <p>The following application programs make this possible:</p>
                  <ol>
                     <li>
                        <p>An I<a id="d24694e195" class="indexterm-anchor"></a>/O PCB-enabled remote host transaction program.
                        </p>
                     </li>
                     <li>
                        <p>The <a id="d24694e201" class="indexterm-anchor"></a><code class="codeph">PGA_TCP_IMSC</code> mapping table that has been populated, using the pg4tcpmap tool, with the <code class="codeph">SIDE PROFILE</code> name as well as the TCP/IP hostname, port number and other IMS Connect parameters.
                        </p>
                     </li>
                     <li>
                        <p>A <a id="d24694e212" class="indexterm-anchor"></a>Transaction Interface Package (TIP). A TIP is a P<a id="d24694e215" class="indexterm-anchor"></a>L/SQL package that handles communication between the client and the gateway and performs datatype conversions between COBOL and PL/SQL.
                        </p>
                     </li>
                     <li>
                        <p>PGAU generates the TIP specification for you. In the shipped samples, the PGAU-generated package is called <code class="codeph">pgtflip.pkb</code>. This generated TIP includes at least three function calls that map to the remote transaction program:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">pgtflip_init</code> initializes the conversation with the remote transaction program
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">pgtflip_main</code> exchanges application data with the remote transaction program
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">pgtflip_term</code> terminates the conversation with the remote transaction program
                              </p>
                           </li>
                        </ul>
                        <p>Refer to <a href="tip-internals-oracle-database-gateway-appc.html#GUID-9F4E3177-13B0-43CE-AD0A-5BCD66B3FD17"> Tip Internals</a> for more information about TIPs, if you are writing your own TIP or debugging.
                        </p>
                     </li>
                     <li>
                        <p>A client application that calls the TIP.</p>
                        <p>The client application calls the three TIP functions with input and output arguments. In the example, the client application passes an input and the remote transaction and the remote transaction sends back the flipped input as an output.</p>
                     </li>
                  </ol>
                  <p><a href="developing-appc-client-app-tcpip-only.html#GUID-C07370C7-9C1B-4003-B3DB-7F041654DCE2__G1012955" title="This 3 column table describes demonstrates the logic flow between the PL/SQL driver, the TIP, and the gateway using the example IMS Connect-IMS transaction">Table 7-1</a> demonstrates the logic flow between the PL/SQL driver, the TIP, and the gateway using the example IMS Connect-IMS transaction. 
                  </p>
                  <div class="tblformal" id="GUID-C07370C7-9C1B-4003-B3DB-7F041654DCE2__G1012955">
                     <p class="titleintable">Table 7-1 Logic Flow of IMS Connect-IMS Example</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Logic Flow of IMS Connect-IMS Example" summary="This 3 column table describes demonstrates the logic flow between the PL/SQL driver, the TIP, and the gateway using the example IMS Connect-IMS transaction" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d24694e270">Client Application</th>
                              <th align="left" valign="bottom" width="32%" id="d24694e273">Oracle TIP</th>
                              <th align="left" valign="bottom" width="48%" id="d24694e276">Procedures Established Between the Gateway and the Remote Transaction (mainframe IMS)</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d24694e281" headers="d24694e270 ">
                                 <p>Calls <code class="codeph">tip_init</code></p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d24694e281 d24694e273 ">
                                 <p>Calls <code class="codeph">PGAINIT</code></p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d24694e281 d24694e276 ">
                                 <p>Gateway issues TCP/IP socket and connect to initiate the conversation with IMS Connect.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d24694e295" headers="d24694e270 ">
                                 <p>Calls <code class="codeph">tip_main</code></p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d24694e295 d24694e273 ">
                                 <p>Calls <code class="codeph">PGAXFER</code> to send the input and receive the output
                                 </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d24694e295 d24694e276 ">
                                 <p>Gateway issues TCP/IP <code class="codeph">send()</code> to IMS Connect. IMS Connect, through OTMA and XCF, talks to the IMS instance. IMS <code class="codeph">RECEIVE</code> completes. IMS performs application logic and issues <code class="codeph">SEND</code> back to gateway. The gateway issues TCP/IP<code class="codeph"> receive()</code>; receive completes.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d24694e322" headers="d24694e270 ">
                                 <p>Calls <code class="codeph">tip_term</code></p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d24694e322 d24694e273 ">
                                 <p>Calls <code class="codeph">PGATERM</code></p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d24694e322 d24694e276 ">
                                 <p>Gateway issues TCP/IP <code class="codeph">close()</code>.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>A client application which utilizes the gateway to exchange data with a remote host transaction performs some tasks for itself and instructs the TIP to perform other tasks on its behalf. The client application designer must consequently know the behavior of the remote transaction and how the TIP facilitates the exchange.</p>
                  <p>The following sections provide an overview of remote host transaction behavior, how this behavior is controlled by the client application and how TIP function calls and data declarations support the client application to control the remote host transaction. These sections also provide background information about what the TIP does for the client application and how the TIP calls exchange data with the remote host transaction.</p>
               </div>
            </div><a id="APPUG1026"></a><div class="props_rev_3"><a id="GUID-B7E7C6BD-2087-4F6F-BD63-B172D8853746" name="GUID-B7E7C6BD-2087-4F6F-BD63-B172D8853746"></a><h3 id="APPUG-GUID-B7E7C6BD-2087-4F6F-BD63-B172D8853746" class="sect3">Preparing the Client Application</h3>
               <div>
                  <div class="section">
                     <p>To prepare the client application for execution you must understand the remote host transaction requirements and then perform these steps:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Make sure that the pg4tcpmap tool has been used to map the <code class="codeph">SIDEPROFILE</code> name, defined in the <code class="codeph">.ctl</code> file for the PGAU utility, to TCP/IP and IMS Connect attributes. </span><div>
                           <p>Refer to <a href="pg4tcpmap-commands-tcpip.html#GUID-CDAD0D0C-6070-4E0E-9B97-E4DCF919510F"> PG4TCPMAP Commands (TCP/IP Only)</a> in this guide for detailed information about mapping parameters.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Make certain that you have identified the remote host transaction program facilities to be called.</span></li>
                     <li class="stepexpand"><span>Move relevant <a id="d24694e404" class="indexterm-anchor"></a>COBOL records layout (copybooks) to the gateway system for input to PGAU.</span></li>
                     <li class="stepexpand"><span>Describe the remote host transaction data and calls to the <a id="d24694e410" class="indexterm-anchor"></a>PG Data Dictionary (PG DD) with <code class="codeph">DEFINE DATA</code>, <code class="codeph">DEFINE CALL</code>, and <code class="codeph">DEFINE TRANSACTION</code> statements.</span></li>
                     <li class="stepexpand"><span>Generate the TIP in the Oracle database, using <code class="codeph">GENERATE</code>.</span></li>
                     <li class="stepexpand"><span>Create the client application that calls the TIP public functions.</span></li>
                     <li class="stepexpand"><span>Grant privileges on the newly created package.</span></li>
                  </ol>
               </div><a id="APPUG1027"></a><div class="props_rev_3"><a id="GUID-82CDAADD-FF8A-4C45-9B78-69E16820B630" name="GUID-82CDAADD-FF8A-4C45-9B78-69E16820B630"></a><h4 id="APPUG-GUID-82CDAADD-FF8A-4C45-9B78-69E16820B630" class="sect4">TIP Content and Purpose </h4>
                  <div>
                     <p>The content of a PGAU-generated TIP reflects the calls available to the remote host transaction and the data that has been exchanged. Understanding this content helps when designing and debugging client applications that call the TIP.</p>
                     <p>A TIP is a <a id="d24694e480" class="indexterm-anchor"></a>PL/SQL package, and accordingly has <a id="d24694e485" class="indexterm-anchor"></a><a id="d24694e489" class="indexterm-anchor"></a>two sections:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A Package Specification containing:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Public function prototypes and parameters</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>A Package Body containing:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p> Private functions and internal control variables</p>
                              </li>
                              <li>
                                 <p> Public functions</p>
                              </li>
                              <li>
                                 <p>Package initialization following the last public function</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>The purpose of the TIP is to provide a PL/SQL callable public function for every allowed remote transaction program interaction. A <a id="d24694e519" class="indexterm-anchor"></a>remote transaction program interaction is a logically related group of data exchanges through one or more <a id="d24694e524" class="indexterm-anchor"></a><a id="d24694e526" class="indexterm-anchor"></a><code class="codeph">PGAXFER</code> RPC calls. This is conceptually similar to a screen or menu interaction in which several fields are filled in, the enter key is pressed, and several fields are returned to the user. Carrying the analogy further:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>the user might be likened to the TIP or client application</p>
                        </li>
                        <li>
                           <p>fields to be filled in are <code class="codeph">IN</code> parameters on the TIP function call
                           </p>
                        </li>
                        <li>
                           <p>fields returned are <code class="codeph">OUT</code> parameters on the TIP function call
                           </p>
                        </li>
                        <li>
                           <p>screen or menu is the group of <code class="codeph">IN</code> and <code class="codeph">OUT</code> parameters combined
                           </p>
                        </li>
                        <li>
                           <p>a pressed enter key is likened to the <code class="codeph">PGAXFER</code> remote procedural call (RPC)
                           </p>
                        </li>
                     </ul>
                     <p>The actual grouping of parameters that constitute a transaction call is defined by the user. The gateway places no restrictions on how a remote transaction program might correspond to a collection of TIP function calls, each call having many <code class="codeph">IN</code> and <code class="codeph">OUT</code> parameters.
                     </p>
                     <p>PGA users typically have one TIP per remote transaction program. How the TIP function calls are grouped and what data parameters are exchanged on each call depends on the size, complexity and behavior of the remote transaction program.</p>
                     <p>Refer to Oracle's <a href="../lnpls/index.html" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for a discussion of how PL/SQL packages work. The following discussion covers the logic that must be performed within a TIP. Refer to the sample TIP and driver supplied in the                       <code class="codeph">%ORACLE_HOME%\dg4appc\demo\IMS</code> directory on Microsoft Windows and in <code class="codeph">$ORACLE_HOME/dg4appc/demo/IMS</code> directory on UNIX based systems, in files<a id="d24694e587" class="indexterm-anchor"></a><a id="d24694e589" class="indexterm-anchor"></a> <code class="codeph">pgtflip.pkh</code>, <a id="d24694e598" class="indexterm-anchor"></a><a id="d24694e600" class="indexterm-anchor"></a><code class="codeph">pgtflip.pkb</code>, and<a id="d24694e607" class="indexterm-anchor"></a> <code class="codeph">pgtflipd.sql</code>.
                     </p>
                  </div>
               </div><a id="APPUG1028"></a><div class="props_rev_3"><a id="GUID-24D40BAB-F818-4B7E-AE7F-259D0EEC7F08" name="GUID-24D40BAB-F818-4B7E-AE7F-259D0EEC7F08"></a><h4 id="APPUG-GUID-24D40BAB-F818-4B7E-AE7F-259D0EEC7F08" class="sect4">Remote Host Transaction Types</h4>
                  <div>
                     <p>From a database gateway application perspective, there are three main types of remote host transactions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>transaction socket</p>
                        </li>
                        <li>
                           <p>persistent socket</p>
                        </li>
                        <li>
                           <p>non-persistent socket</p>
                        </li>
                     </ul>
                     <p>You should be familiar with the remote host transaction types. Refer to the IBM <span class="italic">IMS Connect Guide and Reference</span> for a full description of these transaction types. 
                     </p>
                  </div>
               </div>
            </div><a id="APPUG1029"></a><div class="props_rev_3"><a id="GUID-07B57C7F-EB46-4D42-97BF-38F2A5A2EB19" name="GUID-07B57C7F-EB46-4D42-97BF-38F2A5A2EB19"></a><h3 id="APPUG-GUID-07B57C7F-EB46-4D42-97BF-38F2A5A2EB19" class="sect3">Ensuring TIP and Remote Transaction Program Correspondence</h3>
               <div>
                  <p>A remote host transaction program and its related TIP with client application must correspond on <a id="d24694e715" class="indexterm-anchor"></a>two key requirements:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Parameter datatype conversion, which results from the way in which transaction DATA is defined. Refer to <a href="data-type-conversion-oracle-database-gateway-appc.html#GUID-FEB0C201-9C07-4932-A328-B048B582B18A"> Datatype Conversions</a> for a discussion of how PGAU-generated TIPs convert data based on the data definitions.
                        </p>
                     </li>
                     <li>
                        <p>TCP/IP send/receive synchronization, which results from the way in which transaction <code class="codeph">CALL</code>s are defined.
                        </p>
                     </li>
                  </ul>
                  <p>These <code class="codeph">DATA</code> and <code class="codeph">CALL</code> definitions are then included by reference in a <code class="codeph">TRANSACTION</code> definition.
                  </p>
                  <p>Make certain that the <code class="codeph">SIDEPROFILE</code> name has been mapped to TCP/IP and IMS Connect attributes, using the <code class="codeph">pg4tcpmap</code> tool.
                  </p>
               </div><a id="APPUG1030"></a><div class="props_rev_3"><a id="GUID-85BC1722-2A46-414C-AF4E-9DE99C955CF0" name="GUID-85BC1722-2A46-414C-AF4E-9DE99C955CF0"></a><h4 id="APPUG-GUID-85BC1722-2A46-414C-AF4E-9DE99C955CF0" class="sect4">DATA Correspondence</h4>
                  <div>
                     <p>Using data definitions programmed in the language of the remote host transaction, the <a id="d24694e801" class="indexterm-anchor"></a><a id="d24694e805" class="indexterm-anchor"></a>PGAU <code class="codeph">DEFINE DATA</code> command stores in the <a id="d24694e811" class="indexterm-anchor"></a>PG DD the information needed for <a id="d24694e816" class="indexterm-anchor"></a><a id="d24694e818" class="indexterm-anchor"></a>PGAU <code class="codeph">GENERATE</code> to create the TIP function logic to perform:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>all data conversion from PL/SQL <code class="codeph">IN</code> parameters supplied by the receiving remote host transaction
                           </p>
                        </li>
                        <li>
                           <p>all buffering into the format expected by the receiving remote host transaction</p>
                        </li>
                        <li>
                           <p>all data unbuffering from the format supplied by the sending remote host transaction</p>
                        </li>
                        <li>
                           <p>all data conversion to PL/SQL <code class="codeph">OUT</code> parameters supplied by the sending remote host transaction
                           </p>
                        </li>
                     </ul>
                     <p>PGAU determines the information needed to generate the conversion and buffering logic from the data definitions included in the remote host transaction program. PGAU <code class="codeph">DEFINE DATA</code> reads this information from files, such as COBOL copy books, or in-stream from scripts and saves it in the PG DD for repeated use. The Gateway Administrator needs to transfer these definition files from the remote host to the Oracle host where PGAU runs. 
                     </p>
                     <p>From the data definitions stored in the PG DD, PGAU <code class="codeph">GENERATE</code> determines the remote host datatype and matches it to an appropriate PL/SQL datatype. It also determines data lengths and offsets within records and buffers and generates the needed PL/SQL logic into the TIP. Refer to the PGAU <span class="q">"<a href="pga-utility-oracle-database-gateway-appc.html#GUID-A39AE344-8E2F-49EE-9791-6BAF4ECF4F6B">DEFINE DATA</a>"</span> statement  in <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> and <span class="q">"<a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-F0ACAA50-16F8-4C5C-83FE-C0D280981772">Sample PGAU DEFINE DATA Statements</a>"</span> in <a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-AA9B8762-BDAF-4EED-A8B0-09F8A937F04E"> Administration Utility Samples</a> for more information. 
                     </p>
                     <p>All data that are referenced as parameters by subsequent calls must first be defined using PGAU <code class="codeph">DEFINE DATA</code>. Simple data items, such as single numbers or character strings, and complex multi-field data aggregates, such as records or structures, can be defined. PGAU automatically generates equivalent PL/SQL variables and records of fields or tables for the client application to reference in its calls to the generated TIP.
                     </p>
                     <p>As discussed, a parameter might be a simple data item, such as an employee number, or a complex item, such as an employee record. PGAU <code class="codeph">DEFINE DATA</code> automatically extracts the datatype information it needs from the input program data definition files.
                     </p>
                     <p>In this example, <code class="codeph">FLIPIN</code> and <code class="codeph">FLIPOUT</code> are the arguments to be exchanged. 
                     </p><pre class="oac_no_warn" dir="ltr">PGTFLIP_MAIN(trannum,FLIPIN,FLIPOUT)</pre><p>A PGAU <code class="codeph">DEFINE DATA</code> statement must therefore be issued for each of these parameters:
                     </p><pre class="oac_no_warn" dir="ltr">DEFINE DATA FLIPIN
       PLSDNAME (FLIPIN)
       USAGE (PASS)
       LANGUAGE (IBMVSCOBOLII)
       (
       01 MSGIN PIC X(20).
       ); 

DEFINE DATA FLIPOUT
       PLSDNAME (flipout)
       USAGE (PASS)
       LANGUAGE (IBMVSCOBOLII)
       (
       01 MSGOUT PIC X(20).
       );
</pre><p>Note that a definition is not required for the <code class="codeph">trannum</code> argument. This is the APPC conversation identifier and does not require a definition in PGAU.
                     </p>
                  </div>
               </div><a id="APPUG1031"></a><div class="props_rev_3"><a id="GUID-83C35D5F-20A6-4E6D-B25A-ECEC1BFD4ECB" name="GUID-83C35D5F-20A6-4E6D-B25A-ECEC1BFD4ECB"></a><h4 id="APPUG-GUID-83C35D5F-20A6-4E6D-B25A-ECEC1BFD4ECB" class="sect4">CALL Correspondence</h4>
                  <div>
                     <p>The requirement to synchronize <a id="d24694e956" class="indexterm-anchor"></a>TCP/IP send() and receive() means that when the remote transaction program expects data parameters to be input, it issues TCP/IP receive() to read the data parameters. Accordingly, the TIP must cause the gateway to issue TCP/IP send() to write the data parameters to the remote transaction program. The TIP must also cause the gateway to issue TCP/IP receive() when the remote transaction program issues TCP/IP send().
                     </p>
                     <p>The PGAU <code class="codeph">DEFINE CALL</code> statement specifies how the generated TIP is to be called by the client application and which data parameters are to be exchanged with the remote host transaction for that call. Each PGAU <code class="codeph">DEFINE CALL</code> statement might specify the name of the TIP function, one or more data parameters, and the <code class="codeph">IN/OUT</code> mode of each data parameter. Data parameters must have been previously defined with PGAU <code class="codeph">DEFINE DATA</code> statements. Refer to <span class="q">"<a href="pga-utility-oracle-database-gateway-appc.html#GUID-01EEB1ED-7AB6-4BFA-AF6F-A9D36A44C0B1">DEFINE CALL</a>"</span> in <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> and <span class="q">"<a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-336981E2-C7F9-47C1-8B18-330187556305">Sample PGAU DEFINE CALL Statements</a>"</span> in <a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-AA9B8762-BDAF-4EED-A8B0-09F8A937F04E"> Administration Utility Samples</a> for more information. 
                     </p>
                     <p>PGAU <code class="codeph">DEFINE CALL</code> processing stores the specified information in the PG DD for later use by PGAU <code class="codeph">GENERATE</code>. PGAU <code class="codeph">GENERATE</code> then creates the following in the TIP package specification:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>declarations of public PL/SQL functions for each <code class="codeph">CALL</code> defined with PL/SQL parameters for each <code class="codeph">DATA</code> definition specified on the <code class="codeph">CALL</code></p>
                        </li>
                        <li>
                           <p>declarations of the public PL/SQL data parameters</p>
                        </li>
                     </ul>
                     <p>The client application calls the TIP public function as a PL/SQL function call, using the function name and parameter list specified in the PGAU <code class="codeph">DEFINE CALL</code> statement. The client application might also declare, by reference, private variables of the same datatype as the TIP public data parameters to facilitate data passing and handling within the client application, thus sharing the declarations created by PGAU <code class="codeph">GENERATE</code>.
                     </p>
                     <p>In this example, the following PGAU <code class="codeph">DEFINE CALL</code> statement must be issued to define the TIP public function:
                     </p><pre class="oac_no_warn" dir="ltr">DEFINE CALL FLIPMAIN
       PKGCALL (pgtflip_main)
       PARMS ((FLIPIN IN),(FLIPOUT OUT));</pre></div><a id="APPUG1032"></a><div class="props_rev_3"><a id="GUID-864E03E4-0F1A-478B-A76D-3D9624312D67" name="GUID-864E03E4-0F1A-478B-A76D-3D9624312D67"></a><h5 id="APPUG-GUID-864E03E4-0F1A-478B-A76D-3D9624312D67" class="sect5">Flexible Call Sequence</h5>
                     <div>
                        <p>The number of data parameters exchanged between the TIP and the gateway on each call can vary at the user's discretion, as long as the remote transaction program's <code class="codeph">SEND/RECEIVE</code> requests are satisfied. For example, the remote transaction program data exchange sequence might be:
                        </p><pre class="oac_no_warn" dir="ltr">TCP/IP SEND      5 fields (field1-field5)
TCP/IP RECEIVE   1 fields (field6)
TCP/IP SEND      1 field (field7)
TCP/IP RECEIVE   3 fields (field8 - field10)
</pre><p>The resulting TIP/application call sequence could be:</p><pre class="oac_no_warn" dir="ltr">tip_call1(parm1 OUT, &lt;-- TCP/IP SEND field1 from remote TP
          parm2 OUT, &lt;-- TCP/IP SEND field2 from remote TP
          parm3 OUT); &lt;-- TCP/IP SEND field3 from remote TP

tip_call2(parm4 OUT, &lt;-- TCP/IP SEND field4 from remote TP
          parm5 OUT); &lt;-- TCP/IP SEND field5 from remote TP
tip_call3(parm6 IN OUT); --&gt; TCP/IP RECEIVE field6 in remote TP
                        &lt;-- TCP/IP SEND field7 from remote TP

tip_call4(parm8 IN, --&gt; TCP/IP RECEIVE field8 into remote TP
          parm9 IN, --&gt; TCP/IP RECEIVE field9 into remote TP
          parm10 IN); --&gt; TCP/IP RECEIVE field10 into remote TP
</pre><p>To define these four public functions to the TIP, four PGAU <code class="codeph">DEFINE CALL</code> statements must be issued, each specifying its unique public function name (<code class="codeph">tip_callx</code>) and the data parameter list to be exchanged. Once a data item is defined using <code class="codeph">DEFINE DATA</code>, it can be referenced in multiple calls in any mode (<code class="codeph">IN</code>, <code class="codeph">OUT</code>, or <code class="codeph">IN OUT</code>). For example, <code class="codeph">parm5</code> could be used a second time in place of <code class="codeph">parm6</code> This implies the same data is being exchanged in both instances, received into the TIP and application on <code class="codeph">tip_call2</code> and returned, possibly updated, to the remote host in <code class="codeph">tip_call4</code>.
                        </p>
                        <p>Notice also that the remote transaction program's first five written fields are read by two separate TIP function calls, <code class="codeph">tip_call1</code> and <code class="codeph">tip_call2</code>. This could also have been equivalently accomplished with five TIP function calls of one <code class="codeph">OUT</code> parameter each or a single TIP function call with five <code class="codeph">OUT</code> parameters. Then the remote transaction program's first read field (<code class="codeph">field6</code>) and subsequent written field (<code class="codeph">field7</code>) correspond to a single TIP function call (<code class="codeph">tip_call3</code>) with a single <code class="codeph">IN OUT</code> parameter (<code class="codeph">parm6</code>).
                        </p>
                        <p>This use of a single<code class="codeph"> IN OUT</code> parameter implies that the remote transaction program's datatype for <code class="codeph">field6</code> and <code class="codeph">field7</code> are both the same and correspond to the conversion performed for the datatype of <code class="codeph">parm6</code>. If <code class="codeph">field6</code> and <code class="codeph">field7</code> were of different datatypes, then they have to correspond to different PL/SQL parameters (for example, <code class="codeph">parm6 IN</code> and <code class="codeph">parm7 OUT</code>). They could still be exchanged as two parameters on a single TIP call or one parameter each on two TIP calls, however.
                        </p>
                        <p>Lastly, the remote transaction program's remaining three <code class="codeph">RECEIVE</code> fields are supplied by <code class="codeph">tip_call4</code> parameters 8-10. They also could have been done with three TIP calls passing one parameter each or two TIP calls passing one parameter on one call and two parameters on the other, in either order. This flexibility permits the user to define the correspondence between the remote transaction program's operation and the TIP function calls in whatever manner best suits the user.
                        </p>
                     </div>
                  </div><a id="APPUG1033"></a><div class="props_rev_3"><a id="GUID-5D540B94-7349-445D-BDBF-0934811FF4C4" name="GUID-5D540B94-7349-445D-BDBF-0934811FF4C4"></a><h5 id="APPUG-GUID-5D540B94-7349-445D-BDBF-0934811FF4C4" class="sect5">Call Correspondence Order Restrictions</h5>
                     <div>
                        <p>Each TIP public function first sends all <code class="codeph">IN</code> parameters, before it receives any <code class="codeph">OUT</code> p<a id="d24694e1220" class="indexterm-anchor"></a>arameters. Thus, a remote transaction program expecting to send one field and then receive one field must correspond to separate TIP calls.
                        </p>
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">tip_callO( parmO OUT); &lt;-- TCP/IP SEND outfield from remote TP
</pre><p><code class="codeph">PGAXFER</code> RPC checks first for parameters to send, but finds none and proceeds to receive parameters:
                        </p><pre class="oac_no_warn" dir="ltr">tip_callI( parmI IN); --&gt; TCP/IP RECEIVE infield to remote TP
</pre><p><a id="d24694e1236" class="indexterm-anchor"></a><code class="codeph">PGAXFER</code> RPC processes parameters to send and then checks for parameters to receive, but finds none and completes; therefore, a single TIP public function with an <code class="codeph">OUT</code> parameter followed by an <code class="codeph">IN</code> parameter does not work, because the <code class="codeph">IN</code> parameter is processed first--regardless of its position in the parameter list.
                        </p>
                     </div>
                  </div>
               </div><a id="APPUG1034"></a><div class="props_rev_3"><a id="GUID-F4CF40A2-8795-43CF-AC3A-E1CF314EF356" name="GUID-F4CF40A2-8795-43CF-AC3A-E1CF314EF356"></a><h4 id="APPUG-GUID-F4CF40A2-8795-43CF-AC3A-E1CF314EF356" class="sect4">TRANSACTION Correspondence</h4>
                  <div>
                     <p>The <a id="d24694e1303" class="indexterm-anchor"></a>remote host transaction is defined with the PGAU <code class="codeph">DEFINE TRANSACTION</code> statement with additional references to prior definitions of <code class="codeph">CALL</code>s that the transaction supports.
                     </p>
                     <p>You specify the <a id="d24694e1316" class="indexterm-anchor"></a>remote host transaction attributes, such as:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>transaction ID or name</p>
                        </li>
                        <li>
                           <p>network address or location</p>
                        </li>
                        <li>
                           <p>system type (such as IBM370)</p>
                        </li>
                        <li>
                           <p>Oracle National Language of the remote host</p>
                           <div class="infoboxnote" id="GUID-F4CF40A2-8795-43CF-AC3A-E1CF314EF356__GUID-8DAFE55A-3E86-4947-BAFC-4F811E5AB37F">
                              <p class="notep1">Note:</p>
                              <p>The <a id="d24694e1337" class="indexterm-anchor"></a>PL/SQL package name is specified when the transaction is defined; this is the name by which the TIP is referenced and which the public function calls to be included within the TIP. Each public function must have been previously defined with a PGAU <code class="codeph">DEFINE CALL</code> statement, which has been stored in the PG DD.   If you do not specify a package name (TIP name) in the <code class="codeph">GENERATE</code> statement, the transaction name you specified will become the package name by default. In that case, the transaction name (<span class="italic"><code class="codeph">tname) </code></span>must be unique and must be in valid PL/SQL syntax within the database containing the PL/SQL packages. 
                              </p>
                              <p>For more information, refer to <span class="q">"<a href="pga-utility-oracle-database-gateway-appc.html#GUID-EC8B6848-0566-45CD-BA08-78F15ED0EEB4">DEFINE TRANSACTION</a>"</span> in <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> and <span class="q">"<a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-C8F9DE40-9DE6-4F49-A765-BFFDEC3065F9">Sample PGAU DEFINE TRANSACTION Statement</a>"</span> in <a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-AA9B8762-BDAF-4EED-A8B0-09F8A937F04E"> Administration Utility Samples</a>.
                              </p>
                           </div>
                        </li>
                     </ul>
                     <p>In this example, the following <code class="codeph">DEFINE TRANSACTION </code>statement is used to match this information with the inserted row in the <a id="d24694e1377" class="indexterm-anchor"></a><code class="codeph">PGA_TCP_IMSC</code> table.
                     </p><pre class="oac_no_warn" dir="ltr">DEFINE TRANSACTION IMSFLIP
   CALL (FLIPMAIN)
   SIDEPROFILE(PGATCP)
   TPNAME(FLIP)
   NLS_LANGUAGE("american_america.us7ascii");</pre></div>
               </div>
            </div><a id="APPUG1035"></a><div class="props_rev_3"><a id="GUID-BCFCDB41-E65A-4333-AAAF-CB5FCEB4762A" name="GUID-BCFCDB41-E65A-4333-AAAF-CB5FCEB4762A"></a><h3 id="APPUG-GUID-BCFCDB41-E65A-4333-AAAF-CB5FCEB4762A" class="sect3">Calling the TIP from the Client Application</h3>
               <div>
                  <p>Once a TIP is created, a client application must be written to interface with the TIP. A client application that calls the TIP functions must include five logical sections:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>declaring TIP variables</p>
                     </li>
                     <li>
                        <p>initializing the conversation</p>
                     </li>
                     <li>
                        <p>exchanging data </p>
                     </li>
                     <li>
                        <p>terminating the conversation</p>
                     </li>
                     <li>
                        <p>error handling</p>
                     </li>
                  </ul>
               </div><a id="APPUG1315"></a><a id="APPUG1316"></a><a id="APPUG1036"></a><div class="props_rev_3"><a id="GUID-E7619AF6-1062-4B87-8E0F-4E8BF8F6DD0E" name="GUID-E7619AF6-1062-4B87-8E0F-4E8BF8F6DD0E"></a><h4 id="APPUG-GUID-E7619AF6-1062-4B87-8E0F-4E8BF8F6DD0E" class="sect4">Declaring TIP Variables</h4>
                  <div>
                     <p>The user declarations section of the <a id="d24694e1491" class="indexterm-anchor"></a><a id="d24694e1493" class="indexterm-anchor"></a><span class="italic"><code class="codeph">tipname</code></span>.<code class="codeph">doc</code> file documents the required declarations.
                     </p>
                     <p>When passing <a id="d24694e1506" class="indexterm-anchor"></a>PL/SQL parameters on calls to TIP functions, the client application must use the exact same PL/SQL data types for TIP function arguments as are defined by the TIP in its specification section. Assume, for example, the following is in the TIP specification, or <span class="italic"><code class="codeph">tipname</code></span><code class="codeph">.doc</code>:
                     </p><pre class="oac_no_warn" dir="ltr">FUNCTION <span class="italic">tip_call1</span>    <span class="italic">tranuse</span>,   IN      BINARY_INTEGER, 
                      <span class="italic">tip_var1   io_mode pls_type1,</span> 
                      <span class="italic">tip_record io_mode tran_rectype)</span> 
RETURN INTEGER;

TYPE  <span class="italic">tran_rectype</span> is RECORD
      <span class="italic">(rec_field1 pls_type1</span>,
      ...
      <span class="italic">rec_fieldN pls_typeN)</span>;
</pre><p>Where <a href="developing-appc-client-app-tcpip-only.html#GUID-E7619AF6-1062-4B87-8E0F-4E8BF8F6DD0E__CHDBDDDG" title="This 2 column table provides a description of each of the parameters.">Table 7-2</a> provides a description of each of the parameters: 
                     </p>
                     <div class="tblformal" id="GUID-E7619AF6-1062-4B87-8E0F-4E8BF8F6DD0E__CHDBDDDG">
                        <p class="titleintable">Table 7-2 Function Declarations</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Function Declarations" summary="This 2 column table provides a description of each of the parameters." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d24694e1558">Parameter</th>
                                 <th align="left" valign="bottom" width="69%" id="d24694e1561">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d24694e1566" headers="d24694e1558 ">
                                    <p><span class="italic"><code class="codeph">tip_call1</code></span> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d24694e1566 d24694e1561 ">
                                    <p>The TIP function name as defined in the package specification.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d24694e1576" headers="d24694e1558 ">
                                    <p><span class="italic"><code class="codeph">tranuse</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d24694e1576 d24694e1561 ">
                                    <p>The remote transaction instance parameter returned from the TIP init function identifying the conversation on which this TIP call is to exchange data.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d24694e1585" headers="d24694e1558 ">
                                    <p><span class="italic"><code class="codeph">tran_rectype</code></span> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d24694e1585 d24694e1561 ">
                                    <p>The PL/SQL record data type declared in the <code class="codeph">tipname</code><span class="italic"> </span>TIP specification. This is the same value as in the <code class="codeph">TYPE</code><span class="italic">                 </span><span class="italic"><code class="codeph">tran_rectype</code></span><code class="codeph"> is RECORD</code> statement.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d24694e1610" headers="d24694e1558 ">
                                    <p><span class="italic"><code class="codeph">pls_typeN</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d24694e1610 d24694e1561 ">
                                    <p>Is a PL/SQL atomic data type.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d24694e1619" headers="d24694e1558 ">
                                    <p><span class="italic"><code class="codeph">rec_fieldN</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d24694e1619 d24694e1561 ">
                                    <p>Is a PL/SQL record field corresponding to a remote transaction program record field.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>In the client application PL/SQL atomic data types should be defined as the exact same data type of their corresponding arguments in the TIP function definition. The following should be coded in the client application before the <code class="codeph">BEGIN</code> command:
                     </p><pre class="oac_no_warn" dir="ltr"><span class="italic">appl_var  pls_type1</span>;    /* declare appl variable for ....  */
</pre><p>You do not need to redefine TIP data types. They must be declared locally within the client application, appearing in the client application before the <code class="codeph">BEGIN</code>:
                     </p><pre class="oac_no_warn" dir="ltr"><span class="italic">appl_record tipname.tran_rectype;</span>  /* declare appl record */
</pre><p><a href="developing-appc-client-app-tcpip-only.html#GUID-E7619AF6-1062-4B87-8E0F-4E8BF8F6DD0E__G1012979" title="This 2 column table describes the meaning of each procedure declaration.">Table 7-3</a> describes the meaning of each procedure declaration:
                     </p>
                     <div class="tblformal" id="GUID-E7619AF6-1062-4B87-8E0F-4E8BF8F6DD0E__G1012979">
                        <p class="titleintable">Table 7-3 Procedure Declarations</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Procedure Declarations" summary="This 2 column table describes the meaning of each procedure declaration." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d24694e1661">Item</th>
                                 <th align="left" valign="bottom" width="69%" id="d24694e1664">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d24694e1669" headers="d24694e1661 ">
                                    <p><span class="italic"><code class="codeph">appl_record</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d24694e1669 d24694e1664 ">
                                    <p>Is a PL/SQL record exchanged with the TIP and used within the client application.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d24694e1678" headers="d24694e1661 ">
                                    <p><span class="italic"><code class="codeph">tipname</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d24694e1678 d24694e1664 ">
                                    <p>Is the PL/SQL package (TIP) name as stored in Oracle database. This is the same value as in the statement <code class="codeph">CREATE</code> or <code class="codeph">REPLACE PACKAGE</code> <span class="italic"><code class="codeph">tipname</code></span> in the TIP specification.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d24694e1697" headers="d24694e1661 ">
                                    <p><span class="italic"><code class="codeph">tran_rectype</code></span> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d24694e1697 d24694e1664 ">
                                    <p>Is the PL/SQL record data type declared in the <span class="italic"><code class="codeph">tipname</code></span> TIP specification. This is the same value as in the                           <code class="codeph">TYPE</code> <span class="italic"><code class="codeph">tran_rectype</code></span> is <code class="codeph">RECORD</code> statement.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>Refer to the <span class="italic"><code class="codeph">tipname</code></span><code class="codeph">.doc</code> content file for a complete description of the user declarations you can reference.
                     </p>
                     <p>The client application calls the TIP public function as if it were any local PL/SQL function:</p><pre class="oac_no_warn" dir="ltr">rc = tip_call1( tranuse,
                appl_var,
                appl_record);
</pre><p>In the TCP/IP IMS Connect example, the PL/SQL driver <a id="d24694e1735" class="indexterm-anchor"></a><code class="codeph">pgtflipd.sql</code>, which is<span class="bold"> </span>located in <code class="codeph">%ORACLE_HOME%\dg4appc\demo\IMS</code> directory on Microsoft Windows and in <code class="codeph">$ORACLE_HOME/dg4appc/demo/IMS</code> directory on UNIX based systems, is the client application and includes the following declaration:
                     </p><pre class="oac_no_warn" dir="ltr">...
...
CREATE or REPLACE PROCEDURE pgtflipd(mesgin IN CHAR) IS
trannum INTEGER :=0               /* transaction usage number     */
mesgout VARCHAR2(254);            /* the output parameter       */
rc INTEGER :=0                    /* PGA RPC return codes         */
term INTEGER :=0;                 /* 1 if pgtflip_term called     */
...
...</pre></div>
               </div><a id="APPUG1037"></a><div class="props_rev_3"><a id="GUID-A00FA9EC-E261-4AC9-A136-756309229FDB" name="GUID-A00FA9EC-E261-4AC9-A136-756309229FDB"></a><h4 id="APPUG-GUID-A00FA9EC-E261-4AC9-A136-756309229FDB" class="sect4">Initializing the Conversation</h4>
                  <div>
                     <p>The call to <a id="d24694e1783" class="indexterm-anchor"></a>initialize the conversation serves several purposes:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To cause the PL/SQL package, the TIP, to be loaded and to perform the initialization logic programmed in the TIP initialization section. </p>
                        </li>
                        <li>
                           <p>To cause the TIP init function to call the <code class="codeph">PGAINIT</code> remote procedural call (RPC), which in turn establishes communication with the remote transaction program (RTP), and returns a transaction instance number to the application.
                           </p>
                        </li>
                     </ul>
                     <p>Optionally, calls to initialize the conversation can be used to:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Override default RHT/OLTP identification, network address attributes, and conversation security user&nbsp;ID and password.</p>
                        </li>
                        <li>
                           <p>Specify what diagnostic <a id="d24694e1807" class="indexterm-anchor"></a>traces the TIP is to produce. Refer to <a href="troubleshooting-oracle-database-gateway-appc.html#GUID-6A2105DD-D6F0-4368-BE63-F8A85D5C959F"> Troubleshooting</a> for more information about diagnostic traces.
                           </p>
                        </li>
                     </ul>
                     <p>PGAU-generated TIPs provide four different initialization functions that client applications can call. These are overloaded functions which all have the same name, but vary in the types of parameters passed. </p>
                     <p>Three initialization parameters are passed:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The transaction instance number for RHT socket file descriptor. The <code class="codeph">tranuse</code> parameter is required on all TIP initializations.
                           </p>
                        </li>
                        <li>
                           <p>TIP diagnostic flags for TIP runtime diagnostic controls. The <code class="codeph">tipdiag</code> parameter is optional. Refer to <a href="troubleshooting-oracle-database-gateway-appc.html#GUID-6A2105DD-D6F0-4368-BE63-F8A85D5C959F"> Troubleshooting</a> for a discussion of TIP diagnostics.
                           </p>
                        </li>
                        <li>
                           <p>TIP default overrides for overriding OLTP and network attributes. The <code class="codeph">override</code> parameter is optional.
                           </p>
                        </li>
                     </ul>
                     <p>The following four functions are shown as they might appear in the TIP Content documentation file. Examples of client application use are provided later.</p><pre class="oac_no_warn" dir="ltr">TYPE override_Typ IS RECORD (
        tranname  VARCHAR2(2000),  /* Transaction Program     */
        transync  BINARY_INTEGER, /* RESERVED                */
        trannls   VARCHAR2(50),   /* RESERVED                */
        oltpname  VARCHAR2(2000),  /* Logical Unit            */
        oltpmode  VARCHAR2(2000),  /* LOG Mode Entry          */
        netaddr   VARCHAR2(2000),  /* Side Profile            */
        tracetag  VARCHAR2(2000),    /* gateway trace idtag  */
        
FUNCTION pgtflip_init(                /* init standard */
           tranuse IN OUT BINARY_INTEGER)
           RETURN INTEGER;

FUNCTION pgtflip_init(                /* init override */
           tranuse IN OUT BINARY_INTEGER,
           override IN override_Typ)
           RETURN INTEGER;

FUNCTION pgtflip_init(               /* init diagnostic */
           tranuse IN OUT BNARY_INTEGER,
           tipdiag IN CHAR)
           RETURN INTEGER;

FUNCTION pgtflip_init(                /* init over-diag */
           tranuse IN OUT BINARY_INTEGER,
           override IN override_Typ,
           tipdiag IN CHAR)
           RETURN INTEGER;
</pre></div><a id="APPUG1038"></a><div class="props_rev_3"><a id="GUID-1118371F-B21C-433F-A0E6-D06737E60C95" name="GUID-1118371F-B21C-433F-A0E6-D06737E60C95"></a><h5 id="APPUG-GUID-1118371F-B21C-433F-A0E6-D06737E60C95" class="sect5">Transaction Instance Parameter</h5>
                     <div>
                        <p>This <a id="d24694e1879" class="indexterm-anchor"></a><a id="d24694e1883" class="indexterm-anchor"></a>transaction instance number (shown in examples as <code class="codeph">tranuse</code>) must be passed to subsequent TIP exchange and terminate functions. It identifies to the gateway on which <a id="d24694e1893" class="indexterm-anchor"></a>TCP/IP conversation--and therefore which iteration of a remote transaction program--the data is to be transmitted or communication terminated.
                        </p>
                        <p>A single client application might control multiple instances of the same remote transaction program or multiple different remote transaction programs, all concurrently. The transaction instance number is the TIPs mechanism for routing the client application call through the gateway to the intended remote transaction program.</p>
                        <p>It is the responsibility of the client application to save the transaction instance number of each active transaction and pass the correct one to each TIP function called for that transaction.</p>
                        <p>The client application calls the TIP initialization function as if it were any local PL/SQL function. For example:</p><pre class="oac_no_warn" dir="ltr">...
...
trannum INTEGER := 0;/* transaction usage number*/
...
...
BEGIN
 rc := pgtflip.pgtflip_init(trannum);
...
...</pre></div>
                  </div><a id="APPUG1039"></a><div class="props_rev_3"><a id="GUID-88270E73-3234-4693-9F63-17F0458E1586" name="GUID-88270E73-3234-4693-9F63-17F0458E1586"></a><h5 id="APPUG-GUID-88270E73-3234-4693-9F63-17F0458E1586" class="sect5">Overriding TIP Initializations</h5>
                     <div>
                        <p>Note that in the preceding example the client application did not specify any remote transaction program name, network connection, or security information. The TIP has such information internally coded as defaults and the client application simply calls the appropriate TIP for the chosen remote transaction program. The client application can, however, optionally override some TIP defaults and supply security information. </p>
                        <p>You do not need to change any client applications that do not require overrides.</p>
                        <p>When the remote host transaction was defined in the PG DD, the <code class="codeph">DEFINE TRANSACTION</code> statement specified certain default OLTP and network identification attributes which can be overridden:<a id="d24694e1957" class="indexterm-anchor"></a><a id="d24694e1961" class="indexterm-anchor"></a><a id="d24694e1965" class="indexterm-anchor"></a><a id="d24694e1969" class="indexterm-anchor"></a></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>TPname</p>
                           </li>
                           <li>
                              <p>Side Profile</p>
                           </li>
                        </ul>
                        <p>Refer to <span class="q">"<a href="pga-utility-oracle-database-gateway-appc.html#GUID-EC8B6848-0566-45CD-BA08-78F15ED0EEB4">DEFINE TRANSACTION</a>"</span> in <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> for more information about the <code class="codeph">DEFINE TRANSACTION</code> statement.
                        </p>
                        <p>These PG DD-defined transaction attributes are generated into TIPs as defaults and can be overridden at <a id="d24694e1996" class="indexterm-anchor"></a>TIP initialization time. This facilitates the use of one TIP, which can be used with a test transaction or system, and can later be used with a production transaction or system, without having to regenerate the TIP.
                        </p>
                        <p>The <code class="codeph">override_Typ</code> record datatype describes the various transaction attributes that can be overridden by the client application. The following o<a id="d24694e2006" class="indexterm-anchor"></a><a id="d24694e2008" class="indexterm-anchor"></a>verrides are currently supported:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">tranname</code> can be set to override the value that was specified by the <code class="codeph">TPNAME</code> parameter of the <code class="codeph">DEFINE TRANSACTION</code> statement
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">netaddr</code> can be set to override the value that was specified by the <code class="codeph">SIDEPROFILE</code> parameter of the <code class="codeph">DEFINE TRANSACTION</code> statement
                              </p>
                           </li>
                        </ul>
                        <p>In addition to the transaction attributes defined in the <a id="d24694e2038" class="indexterm-anchor"></a>PG DD, there are two security-related parameters, conversation security user&nbsp;ID and conversation security password, that can be overridden at TIP initialization time. The values for these parameters normally come from either the database link used to access the gateway or the Oracle database session. There are cases when the Oracle database user&nbsp;ID is not sufficient for accessing the OLTP system. The user&nbsp;ID and password overrides provide a way to specify those parameters to the OLTP system. 
                        </p>
                        <p>The following overrides are currently supported:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">oltpuser</code> can be set to override the user&nbsp;ID used to initialize the conversation with the OLTP
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oltppass</code> can be set to override the password used to initialize the conversation with the OLTP
                              </p>
                           </li>
                        </ul>
                        <p>The security overrides have an effect only if <code class="codeph">PGA_SECURITY_TYPE=PROGRAM</code> is specified in the gateway initialization file, and the OLTP system is configured to accept a user&nbsp;ID and password on incoming conversation requests.
                        </p>
                        <p>The <code class="codeph">transync</code> (IMS Connect <code class="codeph">SYNCLEVEL</code>) and <code class="codeph">trannls</code> (Globalization Support character set) are defined in the override record datatype, but are reserved for future use. The RHT <code class="codeph">SYNCLEVEL</code> and Globalization Support name cannot be overridden.
                        </p>
                        <p>The client application might override the default attributes at TIP initialization for the following reasons:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>to start a different version of the RHT (such as production instead of test)</p>
                           </li>
                           <li>
                              <p>to change the location of the OLTP containing the RHT (if the OLTP was moved due to migration or a switch to backup configuration)</p>
                           </li>
                        </ul>
                        <p>Client applications requiring overrides can use any combination of override and initialization parameters and might alter the combination at any time without regenerating the TIP or affecting applications that do not override parameters.</p>
                        <p>To override the TIP defaults, an additional client application record variable must be declared as <code class="codeph">override_Typ</code> datatype, values must be assigned to the override subfields, and the override record variable must be passed on the TIP initialization call from the client application. For example:
                        </p><pre class="oac_no_warn" dir="ltr">   ...
   ...
   my_overrides pgtflip.override_Typ;   -- declaration
   ...
   ...
   my_overrides.oltpname := 'IVTNO'; -- swap to production IMS
   my_overrides.tranname := 'IVTNV';     -- new transaction name

BEGIN
   rc := pgtflip.pgtflip_init(trannum,my_overrides); -- init
   ...
   ...
</pre><p>Within the TIP, override attributes are checked for syntax problems and passed to the gateway server.</p>
                     </div>
                  </div><a id="APPUG1040"></a><div class="props_rev_3"><a id="GUID-81DBF430-5E5B-42C4-9A27-CB4E2D8BB164" name="GUID-81DBF430-5E5B-42C4-9A27-CB4E2D8BB164"></a><h5 id="APPUG-GUID-81DBF430-5E5B-42C4-9A27-CB4E2D8BB164" class="sect5">Security Considerations</h5>
                     <div>
                        <p>The <a id="d24694e2129" class="indexterm-anchor"></a><a id="d24694e2133" class="indexterm-anchor"></a>security requirements of the default and overridden OLTPs must be the same because the same gateway server is used in either conversation, as dictated by the database link names in the PGA RPC calls. The gateway server startup security mode is set at gateway server initialization time and passed unchanged to the OLTP at TIP or conversation initialization time.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="APPUG1041"></a><div class="props_rev_3"><a id="GUID-F450316B-272E-4EC2-9574-7F39B34C3B04" name="GUID-F450316B-272E-4EC2-9574-7F39B34C3B04"></a><h3 id="APPUG-GUID-F450316B-272E-4EC2-9574-7F39B34C3B04" class="sect3">Exchanging Data</h3>
               <div>
                  <div class="section">
                     <p>The client application should pass the transaction instance number, returned from a previous <code class="codeph">tip_init</code> call, to identify which remote transaction program is affected and to identify any client application data parameters to be exchanged with the remote transaction program.
                     </p>
                     <p>In this IMS Connect inquiry example, we pass an employee number and receive an employee record back:</p><pre class="oac_no_warn" dir="ltr">rc = pgtflip.pgtflip_main(trannum, /* transfer data         */
                           mesgin,   /* input parameter       */
                           mesgout); /* output parameter*/</pre></div>
                  <!-- class="section" -->
               </div><a id="APPUG1042"></a><div class="props_rev_3"><a id="GUID-D83C1EEC-D944-4643-AB86-C82AACB7923D" name="GUID-D83C1EEC-D944-4643-AB86-C82AACB7923D"></a><h4 id="APPUG-GUID-D83C1EEC-D944-4643-AB86-C82AACB7923D" class="sect4">Terminating the Conversation</h4>
                  <div>
                     <p>The client application calls the TIP termination function as if it were any local PL/SQL function. For example:</p><pre class="oac_no_warn" dir="ltr">...
...
term := 1;    /* indicate term called */
 rc := pgtflip.pgtflip_term(trannum,0); /* terminate normally  */
...
...</pre><p></p>
                     <p>After a transaction instance number has been passed on a TIP terminate call to terminate the transaction, or after the remote transaction program has abended, that particular transaction instance number might be forgotten. </p>
                  </div>
               </div><a id="APPUG1043"></a><div class="props_rev_3"><a id="GUID-D795B1E5-54EA-4974-9BC5-6A0028575F7B" name="GUID-D795B1E5-54EA-4974-9BC5-6A0028575F7B"></a><h4 id="APPUG-GUID-D795B1E5-54EA-4974-9BC5-6A0028575F7B" class="sect4">Error Handling</h4>
                  <div>
                     <p>The client application should include an exception handler that can clean up any active TCP/IP conversations before the client application terminates. The sample client application provided in <code class="codeph">pgtflipd.sql</code> contains an example of exception handling. 
                     </p>
                     <p>Gateway exceptions are reported in the range <code class="codeph">PGA-20900</code> to <code class="codeph">PGA-20999</code> and <code class="codeph">PGA-22000</code> to <code class="codeph">PGA 22099</code>. When an exception occurs, the TIP termination function should be called for any active conversations that have been started by prior calls to the TIP initialization function. 
                     </p>
                     <p>For example:</p><pre class="oac_no_warn" dir="ltr">EXCEPTION
 WHEN OTHERS THEN
  IF term = 0 THEN         /* terminate function not called yet */
   rc := pgtflip.pgtflip_term(trannum,1); /*terminate abnormally*/
  END IF;
 RAISE;
</pre><p>The remote transaction should also include provisions for error handling and debugging, such as writing debugging information to the IMS temporary storage queue area. Refer to the <a href="../lnpls/plsql-error-handling.html#LNPLS00701" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for a discussion of how to intercept and handle Oracle exceptions.
                     </p>
                  </div>
               </div><a id="APPUG1044"></a><div class="props_rev_3"><a id="GUID-F02CA799-41D0-4F0B-A19D-A55AF7118F6D" name="GUID-F02CA799-41D0-4F0B-A19D-A55AF7118F6D"></a><h4 id="APPUG-GUID-F02CA799-41D0-4F0B-A19D-A55AF7118F6D" class="sect4">Granting Execute Authority</h4>
                  <div>
                     <div class="section">
                        <p>The TIP is a standard <a id="d24694e2347" class="indexterm-anchor"></a>PL/SQL package and execute authority must be granted to users who call the TIP from their client application. In this example, we grant execute on the <code class="codeph">pgtflip</code> package to user <code class="codeph">SCOTT</code>:
                        </p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON PGTFLIP TO SCOTT
</pre><p>Refer to the <a href="../admin/getting-started-with-database-administration.html#ADMIN11062" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for further information.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="APPUG1045"></a><div class="props_rev_3"><a id="GUID-8EC590FC-73C4-4B31-8662-ED43392EF9CE" name="GUID-8EC590FC-73C4-4B31-8662-ED43392EF9CE"></a><h3 id="APPUG-GUID-8EC590FC-73C4-4B31-8662-ED43392EF9CE" class="sect3">Calling PG4TCPMAP</h3>
               <div>
                  <p>PGAU need not be modified in order to have a conversation on a gateway using TCP/IP. You use the APPC format of PGAU, but you will map parameters to TCP/IP using the <code class="codeph">pg4tcpmap</code> tool. 
                  </p>
                  <p>To map the <code class="codeph">DEFINE TRANSACTION</code> parameters using <a id="d24694e2408" class="indexterm-anchor"></a><a id="d24694e2412" class="indexterm-anchor"></a>TCP/IP, you must have a valid input within the <code class="codeph">PGA_TCP_IMSC</code> table before executing the application. Refer to <a href="pg4tcpmap-commands-tcpip.html#GUID-CDAD0D0C-6070-4E0E-9B97-E4DCF919510F"> PG4TCPMAP Commands (TCP/IP Only)</a> for information about setting up and using the mapping tool.
                  </p>
               </div>
            </div><a id="APPUG1046"></a><div class="props_rev_3"><a id="GUID-14AA4D11-BDB6-4934-BDE5-371D9B3D61E6" name="GUID-14AA4D11-BDB6-4934-BDE5-371D9B3D61E6"></a><h3 id="APPUG-GUID-14AA4D11-BDB6-4934-BDE5-371D9B3D61E6" class="sect3">Executing the Application</h3>
               <div>
                  <div class="section">
                     <p>Before executing the client application, ensure that a connection to the host is established and that the receiving partner is available. In this example we use PL/SQL driver <code class="codeph">PGTFLIPD</code> to execute the IMS/IMS Connect inquiry. To execute this client application, enter from SQL*Plus:
                     </p><pre class="oac_no_warn" dir="ltr">set serveroutput on
execute pgtflipd('hello');</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPUG1047"></a><div class="props_rev_3"><a id="GUID-FDB3D1E8-0510-49D3-AB83-2BD508801865" name="GUID-FDB3D1E8-0510-49D3-AB83-2BD508801865"></a><h3 id="APPUG-GUID-FDB3D1E8-0510-49D3-AB83-2BD508801865" class="sect3">Application Development with Multi-Byte Character Set Support</h3>
               <div>
                  <p><a id="d24694e2515" class="indexterm-anchor"></a>COBOL presently only supports <a id="d24694e2520" class="indexterm-anchor"></a>double byte character sets (<a id="d24694e2525" class="indexterm-anchor"></a>DBCS) for <a id="d24694e2530" class="indexterm-anchor"></a>PIC G datatypes. 
                  </p>
                  <p>PGAU processes IBM VS COBOLII<code class="codeph"> PIC G</code> datatypes as PL/SQL <code class="codeph">VARCHAR2</code> variables and generates TIPs which automatically convert the data according to the                   Oracle <code class="codeph">NLS_LANGUAGE</code>s specified for the remote host data and the local Oracle data.
                  </p>
                  <p>These Oracle <code class="codeph">NLS_LANGUAGE</code>s can be specified as defaults for all <code class="codeph">PIC G</code> data exchanged by the TIP with the remote transaction                                                           (see <code class="codeph">DEFINE TRANSACTION ... REMOTE_MBCS</code> or <code class="codeph">LOCAL_MBCS</code>). The Oracle <code class="codeph">NLS_LANGUAGE</code>s for any individual <code class="codeph">PIC G</code> data item can be further overridden           (see <code class="codeph">REDEFINE DATA ... REMOTE</code> or <code class="codeph">LOCAL_LANGUAGE</code>). 
                  </p>
                  <p>DBCS data can be encoded in any combination of supported DBCS character sets. For example, a remote host application which allows different codepages for each field of data in a record is supported by the Oracle Database Gateway <a id="d24694e2575" class="indexterm-anchor"></a>MBCS<a id="d24694e2578" class="indexterm-anchor"></a> support. 
                  </p>
                  <p>Use of <code class="codeph">REDEFINE DATA ... REMOTE_LANGUAGE</code> or <code class="codeph">LOCAL_LANGUAGE</code> on <code class="codeph">PIC X</code> items is also supported. Thus a TIP can perform DBCS or MBCS conversions for specified <code class="codeph">PIC X</code> data fields, in addition to SBCS conversions by default for the remaining <code class="codeph">PIC X</code> data fields. Default SBCS conversion is according to the <code class="codeph">DEFINE TRANSACTION...  NLS_LANGUAGE</code> and local Oracle default <code class="codeph">LANGUAGE</code> environment values. 
                  </p>
                  <p>When PGAU is generating a TIP, the <code class="codeph">PIC G</code> datatypes are converted to PL/SQL <code class="codeph">VARCHAR2</code> datatypes. After conversion by the TIP, received <code class="codeph">'PIC G' VARCHAR2s</code> can have a length less then the maximum due to deletion of shift-out and shift-in meta characters, and sent <code class="codeph">'PIC G' </code>RAW datatypes will have the shift-out and shift-in characters inserted as required by the remote host character set specified. 
                  </p>
                  <p>This is different from the conversions performed for <code class="codeph">PIC X</code> data which is always a known fixed-length and hence <code class="codeph">CHAR</code> datatypes are used in TIPs for <code class="codeph">PIC X</code> data fields. However, even when the <code class="codeph">PIC X</code> field contains DBCS or MBCS data, a <code class="codeph">CHAR</code> variable is still used and padded with blanks if needed.
                  </p>
                  <p>Some remote host applications bracket a <code class="codeph">PIC G</code> field with<code class="codeph"> PIC X</code> bytes used for shift-out, shift-in meta-character insertion. Such a COBOL definition might look like:   
                  </p><pre class="oac_no_warn" dir="ltr">01 MY_RECORD. 
   05 SO PIC X. 
   05 MY_MBCS_DATA PIC G(50). 
   05 SI PIC X. 
</pre><p>This is not processed correctly by PGAU, because all three fields are defined, and consequently treated, as separate data items when conversion is performed.</p>
                  <p>To be properly processed, the definition input to PGAU should be: </p><pre class="oac_no_warn" dir="ltr">01 MY_RECORD. 
   05 MY_MBCS_DATA PIC G(51).
</pre><p>The PGAU <code class="codeph">REDEFINE DATA</code> statement can redefine the 3-field definition to the 1-field definition by specifying <code class="codeph">USAGE(SKIP)</code> on fields <code class="codeph">SO</code> and <code class="codeph">SI</code>, and                                   <code class="codeph">'05 MY_MBCS_DATA PIC G(51).'</code> to redefine <code class="codeph">MY_MBCS_DATA</code>. The three <code class="codeph">REDEFINE</code> statements can be placed in the PGAU input control file, and thus the remote host definition need not be altered. 
                  </p>
               </div>
            </div><a id="APPUG1048"></a><div class="props_rev_3"><a id="GUID-322345C3-6367-4ADD-A56A-B9B4A13C83FE" name="GUID-322345C3-6367-4ADD-A56A-B9B4A13C83FE"></a><h3 id="APPUG-GUID-322345C3-6367-4ADD-A56A-B9B4A13C83FE" class="sect3">Privileges Needed to Use TIPs</h3>
               <div>
                  <p>Execute privileges must be explicitly granted to callers of TIPs or procedures. This privilege cannot be granted through a role.</p>
                  <p>Any TIP user wanting to trace a TIP must be granted execute privileges on the rtrace and ptrace procedures. Refer to the "Configuring PGAU" section appropriate for your communications protocol in the installation guides and the <a href="../adfns/security.html#ADFNS230" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for more information. 
                  </p>
                  <p>For example:</p>
                  <p>On Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; sqlplus pgaadmin\<span class="italic">pw@database_specification_string</span> 
SQL&gt; grant execute on pgaadmin.purge_trace to <span class="italic">tip_user_userid</span>;
SQL&gt; grant execute on pgaadmin.read_trace to <span class="italic">tip_user_userid;</span> 
</pre><p>On UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus pgaadmin/<span class="italic">pw@database_specification_string</span> 
SQL&gt; grant execute on pgaadmin.purge_trace to <span class="italic">tip_user_userid</span>;
SQL&gt; grant execute on pgaadmin.read_trace to <span class="italic">tip_user_userid;</span> 
</pre><p>After a TIP has been developed, the TIP user must be granted execute privileges on the TIP by the TIP owner. The TIP owner is usually <code class="codeph">PGAADMIN</code>, but can be another user who has been granted either the <code class="codeph">PGDDDEF</code> or <code class="codeph">PGDDGEN</code> roles. For example:
                  </p>
                  <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; sqlplus tip_owner\<span class="italic">pw@database_specification_string</span>
SQL&gt; grant execute on tipname to <span class="italic">tip_user_userid</span>;
</pre><p>For UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus tip_owner/<span class="italic">pw@database_specification_string</span>
SQL&gt; grant execute on tipname to <span class="italic">tip_user_userid</span>;
</pre><p>where<code class="codeph"> </code><span class="italic"><code class="codeph">database_specification_string</code></span> is the <a id="d24694e2801" class="indexterm-anchor"></a>Oracle Net identifier for the Oracle database where the gateway <code class="codeph">UTL_RAW</code> and <code class="codeph">UTL_PG</code> components were installed. This is the same Oracle database where the TIPs are executed and where grants on the TIPs are performed from the TIP owner user&nbsp;ID.
                  </p>
                  <p>A SQL script for performing these grants is provided in the                                        <code class="codeph">%ORACLE_HOME%\dg4appc\admin</code> directory for Microsoft Windows and <code class="codeph">$ORACLE_HOME/dg4appc/admin</code> in the directory for UNIX based systems. The<a id="d24694e2818" class="indexterm-anchor"></a><a id="d24694e2820" class="indexterm-anchor"></a> <code class="codeph">pgddausr.sql</code> script performs the grants for private access to the packages by a single TIP user. If private grants are to be used, the <code class="codeph">pgddausr.sql</code> script must be run once for each TIP user's user&nbsp;ID. 
                  </p>
                  <p>To run these scripts, use SQL*Plus to connect to the Oracle database as user <code class="codeph">PGAADMIN</code>. From SQL*Plus, run the <code class="codeph">pgddausr.sql</code> script from the                                    <code class="codeph">%ORACLE_HOME%\dg4appc\admin</code> directory on Microsoft Windows or <code class="codeph">$ORACLE_HOME/dg4appc/admin</code> directory on UNIX based systems. The script performs the necessary grants as previously described. You are prompted for the required user&nbsp;IDs, passwords, and database specification strings. If you are using private grants, repeat this step for each user&nbsp;ID requiring access to the packages.
                  </p>
                  <p>No script has been provided to perform public grants. To do this, issue the following commands:</p>
                  <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; sqlplus tip_owner\<span class="italic">pw@database_specification_string</span> 
SQL&gt; grant execute on tipname to PUBLIC;  
</pre><p>For UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus tip_owner/<span class="italic">pw@database_specification_string</span> 
SQL&gt; grant execute on tipname to PUBLIC;  
</pre><p></p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
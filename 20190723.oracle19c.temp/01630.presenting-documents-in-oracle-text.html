<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Oracle Text provides various methods for presenting documents in results for query applications.">
      <meta name="description" content="Oracle Text provides various methods for presenting documents in results for query applications.">
      <title>Presenting Documents in Oracle Text</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Application Developer's Guide ">
      <meta property="og:description" content="Oracle Text provides various methods for presenting documents in results for query applications.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Application Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96275-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html" title="Previous" type="text/html">
      <link rel="next" href="classifying-documents-in-oracle-text.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer's Guide">
    <meta name="dcterms.isVersionOf" content="CCAPP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="classifying-documents-in-oracle-text.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Application Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Presenting Documents in Oracle Text</li>
            </ol>
            <a id="GUID-F4081D3C-0057-4C55-A178-D8608704699F" name="GUID-F4081D3C-0057-4C55-A178-D8608704699F"></a><a id="CCAPP0700"></a>
            
            <h2 id="CCAPP-GUID-F4081D3C-0057-4C55-A178-D8608704699F" class="sect2"><span class="enumeration_chapter">8 </span> Presenting Documents in Oracle Text
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Text provides various methods for presenting documents in results for query applications.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="presenting-documents-in-oracle-text.html#GUID-30DA7E8C-A718-4F17-AFC1-286B208C5E86">Highlighting Query Terms</a></p>
                  </li>
                  <li>
                     <p><a href="presenting-documents-in-oracle-text.html#GUID-CFB27531-DF84-4E28-9D19-BDC148B0F6C5">Obtaining Part-of-Speech Information for a Document</a></p>
                  </li>
                  <li>
                     <p><a href="presenting-documents-in-oracle-text.html#GUID-7E4094C7-2835-400E-B13D-830D39C4C8AD">Obtaining Lists of Themes, Gists, and Theme Summaries</a></p>
                  </li>
                  <li>
                     <p><a href="presenting-documents-in-oracle-text.html#GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A">Document Presentation and Highlighting</a></p>
                  </li>
               </ul>
            </div><a id="CCAPP9192"></a><div class="props_rev_3"><a id="GUID-30DA7E8C-A718-4F17-AFC1-286B208C5E86" name="GUID-30DA7E8C-A718-4F17-AFC1-286B208C5E86"></a><h3 id="CCAPP-GUID-30DA7E8C-A718-4F17-AFC1-286B208C5E86" class="sect3"><span class="enumeration_section">8.1 </span>Highlighting Query Terms
               </h3>
               <div>
                  <p>In text query applications, you can present selected documents with query terms highlighted for text queries or with themes highlighted for <code class="codeph">ABOUT</code> queries.
                  </p>
                  <p>You can generate three types of output associated with highlighting: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A marked-up version of the document</p>
                     </li>
                     <li>
                        <p>Query offset information for the document</p>
                     </li>
                     <li>
                        <p>A concordance of the document, in which occurrences of the query term are returned with their surrounding text</p>
                     </li>
                  </ul>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="presenting-documents-in-oracle-text.html#GUID-920CB350-7264-4D83-8CC7-4E277F4E3EEA">Text highlighting</a></p>
                     </li>
                     <li>
                        <p><a href="presenting-documents-in-oracle-text.html#GUID-29EA1AE1-6E73-4906-930B-51DEB794D00B">Theme Highlighting</a></p>
                     </li>
                     <li>
                        <p><a href="presenting-documents-in-oracle-text.html#GUID-7095CF02-8B41-4F0E-ADBA-19D3E8D49BF9">CTX_DOC Highlighting Procedures</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9193"></a><div class="props_rev_3"><a id="GUID-920CB350-7264-4D83-8CC7-4E277F4E3EEA" name="GUID-920CB350-7264-4D83-8CC7-4E277F4E3EEA"></a><h4 id="CCAPP-GUID-920CB350-7264-4D83-8CC7-4E277F4E3EEA" class="sect4"><span class="enumeration_section">8.1.1 </span>Text highlighting
                  </h4>
                  <div>
                     <p>For text highlighting, you supply the query, and Oracle Text highlights words in the document that satisfy the query. You can obtain plain-text or HTML highlighting.</p>
                  </div>
               </div><a id="CCAPP9194"></a><div class="props_rev_3"><a id="GUID-29EA1AE1-6E73-4906-930B-51DEB794D00B" name="GUID-29EA1AE1-6E73-4906-930B-51DEB794D00B"></a><h4 id="CCAPP-GUID-29EA1AE1-6E73-4906-930B-51DEB794D00B" class="sect4"><span class="enumeration_section">8.1.2 </span>Theme Highlighting
                  </h4>
                  <div>
                     <p>For <code class="codeph">ABOUT</code> queries, the <code class="codeph">CTX_DOC</code> procedures highlight and mark up words or phrases that best represent the <code class="codeph">ABOUT</code> query. 
                     </p>
                  </div>
               </div><a id="CCAPP9195"></a><div class="props_rev_3"><a id="GUID-7095CF02-8B41-4F0E-ADBA-19D3E8D49BF9" name="GUID-7095CF02-8B41-4F0E-ADBA-19D3E8D49BF9"></a><h4 id="CCAPP-GUID-7095CF02-8B41-4F0E-ADBA-19D3E8D49BF9" class="sect4"><span class="enumeration_section">8.1.3 </span>CTX_DOC Highlighting Procedures
                  </h4>
                  <div>
                     <p>These are the highlighting procedures in <code class="codeph">CTX_DOC</code>:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CTX_DOC.MARKUP</code> and <code class="codeph">CTX_DOC.POLICY_MARKUP</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.HIGHLIGHT</code> and <code class="codeph">CTX_DOC.POLICY_HIGHLIGHT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SNIPPET</code> and <code class="codeph">CTX_DOC.POLICY_SNIPPET</code></p>
                        </li>
                     </ul>
                     <p>The <code class="codeph">POLICY</code> and non-<code class="codeph">POLICY</code> versions of the procedures are equivalent, except that the <code class="codeph">POLICY</code> versions do not require an index.
                     </p>
                     <div class="infoboxnote" id="GUID-7095CF02-8B41-4F0E-ADBA-19D3E8D49BF9__GUID-DF207712-80FE-4069-91E5-617A4B52693C">
                        <p class="notep1">Note:</p>
                        <p><code class="codeph">SNIPPET</code> can also be generated using the Result Set Interface.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-7095CF02-8B41-4F0E-ADBA-19D3E8D49BF9__GUID-EFFF5C1D-5B73-4772-BAE1-5D35B650B6FE">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/CTX_QUERY-package.html#CCREF24104" target="_blank"><span class="italic">Oracle Text Reference</span></a> for information on <code class="codeph">CTX_QUERY.RESULT_SET</code></p>
                     </div>
                     <p>This section contains these topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="presenting-documents-in-oracle-text.html#GUID-C1856378-9769-4D5A-8839-5699EC0D6F94">Markup Procedure</a></p>
                        </li>
                        <li>
                           <p><a href="presenting-documents-in-oracle-text.html#GUID-909E8E44-5B0F-4FC2-8685-38DEAA4E0C1D">Highlight Procedure</a></p>
                        </li>
                        <li>
                           <p><a href="presenting-documents-in-oracle-text.html#GUID-EB1024E5-7E65-43D9-9878-A4DF4F324D2B">Concordance</a></p>
                        </li>
                     </ul>
                  </div><a id="CCAPP9687"></a><a id="CCAPP9196"></a><div class="props_rev_3"><a id="GUID-C1856378-9769-4D5A-8839-5699EC0D6F94" name="GUID-C1856378-9769-4D5A-8839-5699EC0D6F94"></a><h5 id="CCAPP-GUID-C1856378-9769-4D5A-8839-5699EC0D6F94" class="sect5"><span class="enumeration_section">8.1.3.1 </span>Markup Procedure
                     </h5>
                     <div>
                        <p>The <code class="codeph">CTX_DOC.MARKUP</code> and <code class="codeph">CTX_DOC.POLICY_MARKUP</code> procedures take a document reference and a query, and return a marked-up version of the document. The output can be either marked-up plain text or marked-up HTML. For example, specify that a marked-up document be returned with the query term surrounded by angle brackets (<span class="italic">&lt;&lt;&lt;tansu&gt;&gt;&gt;</span>) or HTML (<span class="italic">&lt;b&gt;tansu&lt;/b&gt;</span>).
                        </p>
                        <p><code class="codeph">CTX_DOC.MARKUP</code> and <code class="codeph">CTX_DOC.POLICY_MARKUP</code> are equivalent, except that <code class="codeph">CTX_DOC.POLICY_MARKUP</code> does not require an index.
                        </p>
                        <p>You can customize the markup sequence for HTML navigation.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-C1856378-9769-4D5A-8839-5699EC0D6F94__GUID-B00E7180-791E-4F70-B3B1-11518640BDEB">CTX_DOC.MARKUP Example</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>The following example is taken from the web application described in <a href="CONTEXT-query-application.html#GUID-1F1B44E8-ACCA-446A-84EA-67FA692476BA"> CONTEXT Query Application</a>. The <code class="codeph">showDoc</code> procedure takes an HTML document and a query, creates the highlight markup—in this case, the query term is displayed in red—and outputs the result to an in-memory buffer. It then uses htp.print to display it in the browser.
                           </p><pre class="oac_no_warn" dir="ltr">procedure showDoc (p_id in varchar2, p_query in varchar2) is

 v_clob_selected   CLOB;
 v_read_amount     integer;
 v_read_offset     integer;
 v_buffer          varchar2(32767);
 v_query           varchar(2000);
 v_cursor          integer;

 begin
   htp.p('&lt;html&gt;&lt;title&gt;HTML version with highlighted terms&lt;/title&gt;');
   htp.p('&lt;body bgcolor="#ffffff"&gt;');
   htp.p('&lt;b&gt;HTML version with highlighted terms&lt;/b&gt;');

   begin
     ctx_doc.markup (index_name =&gt; 'idx_search_table',
                     textkey    =&gt; p_id,
                     text_query =&gt; p_query,
                     restab     =&gt; v_clob_selected,
                     starttag   =&gt; '&lt;i&gt;&lt;font color=red&gt;',
                     endtag     =&gt; '&lt;/font&gt;&lt;/i&gt;');

     v_read_amount := 32767;
     v_read_offset := 1;
     begin
      loop
        dbms_lob.read(v_clob_selected,v_read_amount,v_read_offset,v_buffer);
        htp.print(v_buffer);
        v_read_offset := v_read_offset + v_read_amount;
        v_read_amount := 32767;
      end loop;
     exception
      when no_data_found then
         null;
     end;

     exception
      when others then
        null; --showHTMLdoc(p_id);
   end;
end showDoc;
end;
/
show errors
set define on</pre><div class="infoboxnotealso" id="GUID-C1856378-9769-4D5A-8839-5699EC0D6F94__GUID-E636A4FA-74C5-4A9A-810A-116FA8CBFD67">
                              <p class="notep1">See Also:</p>
                              <p><a href="../ccref/CTX_DOC-package.html#CCREF0710" target="_blank"><span class="italic">Oracle Text Reference</span></a> for more information about <code class="codeph">CTX_DOC.MARKUP</code> and <code class="codeph">CTX_DOC.POLICY_SNIPPET</code></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CCAPP9198"></a><div class="props_rev_3"><a id="GUID-909E8E44-5B0F-4FC2-8685-38DEAA4E0C1D" name="GUID-909E8E44-5B0F-4FC2-8685-38DEAA4E0C1D"></a><h5 id="CCAPP-GUID-909E8E44-5B0F-4FC2-8685-38DEAA4E0C1D" class="sect5"><span class="enumeration_section">8.1.3.2 </span>Highlight Procedure
                     </h5>
                     <div>
                        <p><code class="codeph">CTX_DOC.HIGHLIGHT</code> and <code class="codeph">CTX_DOC.POLICY_HIGHLIGHT</code> take a query and a document and return offset information for the query in plain text or HTML format.  You can use this offset information to write your own custom routines for displaying documents. 
                        </p>
                        <p><code class="codeph">CTX_DOC.HIGHLIGHT</code> and <code class="codeph">CTX_DOC.POLICY_HIGHLIGHT</code> are equivalent, except that <code class="codeph">CTX_DOC.POLICY_HIGHLIGHT</code> does not require an index.
                        </p>
                        <p>With offset information, you can display a highlighted version of a document (such as different font types or colors) instead of the standard plain-text markup obtained from <code class="codeph">CTX_DOC.MARKUP.</code></p>
                        <div class="infoboxnotealso" id="GUID-909E8E44-5B0F-4FC2-8685-38DEAA4E0C1D__GUID-DD4FF4F5-B97F-4113-8969-828420605B9C">
                           <p class="notep1">See Also:</p>
                           <p><a href="../ccref/CTX_DOC-package.html#CCREF0706" target="_blank"><span class="italic">Oracle Text Reference</span></a> for more information about using <code class="codeph">CTX_DOC.HIGHLIGHT</code> and <code class="codeph">CTX_DOC.POLICY_HIGHLIGHT</code></p>
                        </div>
                     </div>
                  </div><a id="CCAPP9199"></a><div class="props_rev_3"><a id="GUID-EB1024E5-7E65-43D9-9878-A4DF4F324D2B" name="GUID-EB1024E5-7E65-43D9-9878-A4DF4F324D2B"></a><h5 id="CCAPP-GUID-EB1024E5-7E65-43D9-9878-A4DF4F324D2B" class="sect5"><span class="enumeration_section">8.1.3.3 </span>Concordance
                     </h5>
                     <div>
                        <p><code class="codeph">CTX_DOC.SNIPPET</code> and <code class="codeph">CTX_DOC.POLICY_SNIPPET</code> produce a <span class="italic">concordance</span> of the document, in which occurrences of the query term are returned with their surrounding text. This result is sometimes known as Key Word in Context (KWIC) because, instead of returning the entire document (with or without the query term highlighted), it returns the query term in text fragments, allowing a user to see it in context. You can control how the query term is highlighted in the returned fragments. 
                        </p>
                        <p><code class="codeph">CTX_DOC.SNIPPET</code> and <code class="codeph">CTX_DOC.POLICY_SNIPPET</code> are equivalent, except that <code class="codeph">CTX_DOC.POLICY_SNIPPET</code> does not require an index. <code class="codeph">CTX_DOC.POLICY_SNIPPET</code> and <code class="codeph">CTX_DOC.SNIPPET</code> include two new attributes: <code class="codeph">radius</code> specifies the approximate desired length of each segment, whereas, <code class="codeph">max_length</code> puts an upper bound on the length of the sum of all segments.
                        </p>
                        <div class="infoboxnotealso" id="GUID-EB1024E5-7E65-43D9-9878-A4DF4F324D2B__GUID-83FA341B-6DAD-4F16-9328-E4068AB4A1D1">
                           <p class="notep1">See Also:</p>
                           <p><a href="../ccref/CTX_DOC-package.html#CCREF0702" target="_blank"><span class="italic">Oracle Text Reference</span></a> for more information about <code class="codeph">CTX_DOC.SNIPPET</code> and <code class="codeph">CTX_DOC.POLICY_SNIPPET</code></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="CCAPP9661"></a><div class="props_rev_3"><a id="GUID-CFB27531-DF84-4E28-9D19-BDC148B0F6C5" name="GUID-CFB27531-DF84-4E28-9D19-BDC148B0F6C5"></a><h3 id="CCAPP-GUID-CFB27531-DF84-4E28-9D19-BDC148B0F6C5" class="sect3"><span class="enumeration_section">8.2 </span>Obtaining Part-of-Speech Information for a Document
               </h3>
               <div>
                  <p>The <code class="codeph">CTX_DOC</code> package contains procedures to create policies for obtaining part-of-speech information for a given document. This approach is described under <code class="codeph">POLICY_NOUN_PHRASES</code> in <a href="../ccref/CTX_DOC-package.html#CCREF99027" target="_blank"><span class="italic">Oracle Text Reference</span></a> and <code class="codeph">POLICY_PART_OF_SPEECH</code> in <a href="../ccref/CTX_DOC-package.html#CCREF99028" target="_blank"><span class="italic">Oracle Text Reference</span></a>.
                  </p>
               </div>
            </div><a id="CCAPP9506"></a><a id="CCAPP9200"></a><div class="props_rev_3"><a id="GUID-7E4094C7-2835-400E-B13D-830D39C4C8AD" name="GUID-7E4094C7-2835-400E-B13D-830D39C4C8AD"></a><h3 id="CCAPP-GUID-7E4094C7-2835-400E-B13D-830D39C4C8AD" class="sect3"><span class="enumeration_section">8.3 </span>Obtaining Lists of Themes, Gists, and Theme Summaries
               </h3>
               <div>
                  <p>The following table describes lists of themes, gists, and theme summaries.</p>
                  <div class="tblformal" id="GUID-7E4094C7-2835-400E-B13D-830D39C4C8AD__GUID-15B3D69D-549C-406A-8374-04018B255DEB">
                     <p class="titleintable">Table 8-1 Lists of Themes, Gists, and Theme Summaries</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Lists of Themes, Gists, and Theme Summaries" summary="This table describes lists of themes, gists, and theme summaries." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="21%" id="d21685e967">Output Type</th>
                              <th align="left" valign="bottom" width="79%" id="d21685e970">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d21685e975" headers="d21685e967 ">
                                 <p>List of Themes<a id="d21685e978" class="indexterm-anchor"></a></p>
                              </td>
                              <td align="left" valign="top" width="79%" headers="d21685e975 d21685e970 ">
                                 <p>A list of the main concepts of a document. </p>
                                 <p>Each theme is a single word, a single phrase, or a hierarchical list of parent themes.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d21685e988" headers="d21685e967 ">
                                 <p>Gist<a id="d21685e991" class="indexterm-anchor"></a></p>
                              </td>
                              <td align="left" valign="top" width="79%" headers="d21685e988 d21685e970 ">
                                 <p>Text in a document that best represents what the document is about as a whole. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d21685e999" headers="d21685e967 ">
                                 <p>Theme Summary<a id="d21685e1002" class="indexterm-anchor"></a></p>
                              </td>
                              <td align="left" valign="top" width="79%" headers="d21685e999 d21685e970 ">
                                 <p>Text in a document that best represents a given theme in the document.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>To obtain lists of themes, gists, and theme summaries, use procedures in the <code class="codeph">CTX_DOC</code> package to:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Identify documents by <code class="codeph">ROWID</code> in addition to primary key
                        </p>
                     </li>
                     <li>
                        <p>Store results in-memory for improved performance</p>
                     </li>
                  </ul>
               </div><a id="CCAPP9201"></a><div class="props_rev_3"><a id="GUID-72BF3726-37E0-4AE2-8A24-6D329913FD13" name="GUID-72BF3726-37E0-4AE2-8A24-6D329913FD13"></a><h4 id="CCAPP-GUID-72BF3726-37E0-4AE2-8A24-6D329913FD13" class="sect4"><span class="enumeration_section">8.3.1 </span>Lists of Themes
                  </h4>
                  <div>
                     <p>A list of themes is a list of the main concepts in a document. Use the <code class="codeph">CTX_DOC.THEMES</code> procedure to generate lists of themes.
                     </p>
                     <div class="infoboxnotealso" id="GUID-72BF3726-37E0-4AE2-8A24-6D329913FD13__GUID-7D0F6ABF-96CF-42E9-9F6A-AEFB188F5783">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/CTX_DOC-package.html#CCREF0716" target="_blank"><span class="italic">Oracle Text Reference</span></a> to learn more about the command syntax for <code class="codeph">CTX_DOC.THEMES</code></p>
                     </div>
                     <p>The following in-memory theme example generates the top 10 themes for document 1 and stores them in an in-memory table called <code class="codeph">the_themes.</code> The example then loops through the table to display the document themes.
                     </p><pre class="oac_no_warn" dir="ltr">declare
 the_themes ctx_doc.theme_tab;

begin
 ctx_doc.themes('myindex','1',the_themes, numthemes=&gt;10);
 for i in 1..the_themes.count loop
  dbms_output.put_line(the_themes(i).theme||':'||the_themes(i).weight);
  end loop;
end;
</pre><p>The following example create a result table theme:</p><pre class="oac_no_warn" dir="ltr">create table ctx_themes (query_id number, 
                         theme varchar2(2000), 
                         weight number);

</pre><p>In this example, you<a id="d21685e1119" class="indexterm-anchor"></a> obtain a list of themes where each element in the list is a single theme:
                     </p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.themes('newsindex','34','CTX_THEMES',1,full_themes =&gt; FALSE);
end;
</pre><p>In this example, you<a id="d21685e1128" class="indexterm-anchor"></a> obtain a list of themes where each element in the list is a hierarchical list of parent themes:
                     </p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.themes('newsindex','34','CTX_THEMES',1,full_themes =&gt; TRUE);
end;</pre></div>
               </div><a id="CCAPP9206"></a><div class="props_rev_3"><a id="GUID-0A39D418-0955-470B-9CC1-1CD4B054B8F6" name="GUID-0A39D418-0955-470B-9CC1-1CD4B054B8F6"></a><h4 id="CCAPP-GUID-0A39D418-0955-470B-9CC1-1CD4B054B8F6" class="sect4"><span class="enumeration_section">8.3.2 </span>Gist and Theme Summary
                  </h4>
                  <div>
                     <p>A gist is the text in a document that best represents what the document is about as a whole. A theme summary is the text in a document that best represents a single theme in the document.</p>
                     <p>Use the <code class="codeph">CTX_DOC.GIST</code> procedure to generate gists and theme summaries. You can specify the size of the gist or theme summary when you call the procedure. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-0A39D418-0955-470B-9CC1-1CD4B054B8F6__GUID-BDBD8701-7213-47E9-B3E2-1004F6D43F63">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/CTX_DOC-package.html#CCREF0704" target="_blank"><span class="italic">Oracle Text Reference</span></a> to learn about the command syntax for <code class="codeph">CTX_DOC.GIST</code></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-0A39D418-0955-470B-9CC1-1CD4B054B8F6__GUID-B3CA5A6B-9BDB-4712-8076-A3769DE94D25">In-Memory Gist Example</p>
                        <p>The following example generates a nondefault size generic gist of at most 10 paragraphs. The result is stored in memory in a <code class="codeph">CLOB</code> locator. The code then de-allocates the returned <code class="codeph">CLOB</code> locator after using it.
                        </p><pre class="oac_no_warn" dir="ltr">declare
  gklob clob;
  amt number := 40;
  line varchar2(80);

begin
 ctx_doc.gist('newsindex','34','gklob',1,glevel =&gt; 'P',pov =&gt; 'GENERIC',       numParagraphs =&gt; 10);
  -- gklob is NULL when passed-in, so ctx-doc.gist will allocate a temporary
  -- CLOB for us and place the results there.
  
  dbms_lob.read(gklob, amt, 1, line);
  dbms_output.put_line('FIRST 40 CHARS ARE:'||line);
  -- have to de-allocate the temp lob
  dbms_lob.freetemporary(gklob);
 end;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A39D418-0955-470B-9CC1-1CD4B054B8F6__GUID-9EC965EE-DFB5-4DF5-AA0F-4353326B365E">Result Table Gists Example</p>
                        <p>To create a gist table, enter the following:</p><pre class="oac_no_warn" dir="ltr">create table ctx_gist (query_id  number,
                       pov       varchar2(80), 
                       gist      CLOB);
</pre><p>The following example returns a default-sized paragraph gist for document 34: </p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.gist('newsindex','34','CTX_GIST',1,'PARAGRAPH', pov =&gt;'GENERIC');
end;
</pre><p>The following example generates a nondefault size gist of 10 paragraphs:</p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.gist('newsindex','34','CTX_GIST',1,'PARAGRAPH', pov =&gt;'GENERIC',        numParagraphs =&gt; 10);
end;
</pre><p>The following example generates a gist whose number of paragraphs is 10 percent of the total paragraphs in the document:</p><pre class="oac_no_warn" dir="ltr">begin 
ctx_doc.gist('newsindex','34','CTX_GIST',1, 'PARAGRAPH', pov =&gt;'GENERIC', maxPercent =&gt; 10);
end;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A39D418-0955-470B-9CC1-1CD4B054B8F6__GUID-95E409DC-7439-4D4A-B036-40AE01B203FC">Theme Summary Example</p>
                        <p>The following example returns a theme summary on the theme of <span class="italic">insects</span> for document with textkey 34. The default gist size is returned.
                        </p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.gist('newsindex','34','CTX_GIST',1, 'PARAGRAPH', pov =&gt; 'insects');
end;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="CCAPP9507"></a><a id="CCAPP9508"></a><a id="CCAPP9210"></a><div class="props_rev_3"><a id="GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A" name="GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A"></a><h3 id="CCAPP-GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A" class="sect3"><span class="enumeration_section">8.4 </span>Presenting and Highlighting Documents
               </h3>
               <div>
                  <p>Typically, a query application enables the user to view the documents returned by a query. The user selects a document from the hitlist, and then the application presents the document in some form.</p>
                  <p>With Oracle Text, you can display a document in different ways, such as highlighting either the words of a word query or the themes of an <code class="codeph">ABOUT</code> query in English.
                  </p>
                  <p>You can also obtain gist (document summary) and theme information from documents with the <code class="codeph">CTX_DOC</code> PL/SQL package.
                  </p>
                  <p><a href="presenting-documents-in-oracle-text.html#GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A__G1007640" title="This table shows CTX_DOC output.">Table 8-2</a> describes the different output you can obtain and which procedure to use to obtain each type.
                  </p>
                  <div class="tblformal" id="GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A__G1007640">
                     <p class="titleintable">Table 8-2 CTX_DOC Output</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="CTX_DOC Output" summary="This table shows CTX_DOC output." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="58%" id="d21685e1377">Output</th>
                              <th align="left" valign="bottom" width="42%" id="d21685e1380">Procedure</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d21685e1385" headers="d21685e1377 ">
                                 <p>Plain-text version, no highlights</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d21685e1385 d21685e1380 ">
                                 <p><code class="codeph">CTX_DOC.FILTER</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d21685e1393" headers="d21685e1377 ">
                                 <p>HTML version of document, no highlights</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d21685e1393 d21685e1380 ">
                                 <p><code class="codeph">CTX_DOC.FILTER</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d21685e1401" headers="d21685e1377 ">
                                 <p>Highlighted document, plain-text version</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d21685e1401 d21685e1380 ">
                                 <p><code class="codeph">CTX_DOC.MARKUP</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d21685e1409" headers="d21685e1377 ">
                                 <p>Highlighted document, HTML version</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d21685e1409 d21685e1380 ">
                                 <p><code class="codeph">CTX_DOC.MARKUP</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d21685e1417" headers="d21685e1377 ">
                                 <p>Highlighted offset information for plain-text version</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d21685e1417 d21685e1380 ">
                                 <p><code class="codeph">CTX_DOC.HIGHLIGHT</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d21685e1425" headers="d21685e1377 ">
                                 <p>Highlighted offset information for HTML version</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d21685e1425 d21685e1380 ">
                                 <p><code class="codeph">CTX_DOC.HIGHLIGHT</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d21685e1433" headers="d21685e1377 ">
                                 <p>Theme summaries and gist of document</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d21685e1433 d21685e1380 ">
                                 <p><code class="codeph">CTX_DOC.GIST</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d21685e1441" headers="d21685e1377 ">
                                 <p>List of themes in document</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d21685e1441 d21685e1380 ">
                                 <p><code class="codeph">CTX_DOC.THEMES</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnotealso" id="GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A__GUID-6211CB06-3351-43AC-99AF-7953BCBD92EA">
                     <p class="notep1">See Also:</p>
                     <p><a href="../ccref/CTX_DOC-package.html#CCREF0700" target="_blank"><span class="italic">Oracle Text Reference</span></a></p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can use PL/SQL package DBMS_XMLSTORE to insert, update, or delete data from XML documents stored object-relationally. It uses a canonical XML mapping similar to the one produced by package DBMS_XMLGEN. It converts the mapping to object-relational constructs and then inserts, updates or deletes the corresponding values in relational tables.">
      <meta name="description" content="You can use PL/SQL package DBMS_XMLSTORE to insert, update, or delete data from XML documents stored object-relationally. It uses a canonical XML mapping similar to the one produced by package DBMS_XMLGEN. It converts the mapping to object-relational constructs and then inserts, updates or deletes the corresponding values in relational tables.">
      <title>PL/SQL Package DBMS_XMLSTORE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="You can use PL/SQL package DBMS_XMLSTORE to insert, update, or delete data from XML documents stored object-relationally. It uses a canonical XML mapping similar to the one produced by package DBMS_XMLGEN. It converts the mapping to object-relational constructs and then inserts, updates or deletes the corresponding values in relational tables.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96222-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="PLSQL-APIs-for-XMLType.html" title="Previous" type="text/html">
      <link rel="next" href="Java-DOM-API-for-XMLType.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADXDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="PLSQL-APIs-for-XMLType.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="Java-DOM-API-for-XMLType.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XMLType-APIs.html" property="item" typeof="WebPage"><span property="name"> XMLType APIs</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> PL/SQL Package DBMS_XMLSTORE</li>
            </ol>
            <a id="GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4" name="GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4"></a><a id="ADXDB1200"></a>
            
            <h2 id="ADXDB-GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4" class="sect2"><span class="enumeration_chapter">12 </span> PL/SQL Package DBMS_XMLSTORE
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can use PL/SQL package <code class="codeph">DBMS_XMLSTORE</code> to insert, update, or delete data from XML documents stored object-relationally. It uses a canonical XML mapping similar to the one produced by package <code class="codeph">DBMS_XMLGEN</code>. It converts the mapping to object-relational constructs and then inserts, updates or deletes the corresponding values in relational tables.
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-B0BBEBAD-4C61-4A21-956F-E4870A70DBF5">Using Package DBMS_XMLSTORE</a><br>Create a context handle, perform one or more insertions, updates, or deletions, and then close the context, 
                  </li>
                  <li class="ulchildlink"><a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-4FC8C4EB-D720-4B41-B8B2-A3F2E1BA1D2E">Inserting an XML Document Using DBMS_XMLSTORE</a><br>You can use PL/SQL package <code class="codeph">DBMS_XMLSTORE</code> to insert an XML document into a table or view. It parses the document and creates an <code class="codeph">INSERT</code> statement into which it binds the values. By default, it inserts values into all of the columns represented by elements in the XML document.
                  </li>
                  <li class="ulchildlink"><a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8">Updating XML Data Using DBMS_XMLSTORE</a><br>You can use PL/SQL package <code class="codeph">DBMS_XMLSTORE</code> to update (modify) existing data. You specify which rows to update by calling procedure <code class="codeph">setKeyColumn</code> once for <span class="italic">each</span> of the columns that are used collectively to identify the row. (In SQL, you would specify the rows using a <code class="codeph">WHERE</code> clause in an <code class="codeph">UPDATE</code> statement.)
                  </li>
                  <li class="ulchildlink"><a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-9CA65F29-53EA-434E-9AE8-D300511337DF">Deleting XML Data Using DBMS_XMLSTORE</a><br>You can use PL/SQL package <code class="codeph">DBMS_XMLSTORE</code> to delete existing data. You specify which rows to delete by calling procedure <code class="codeph">setKeyColumn</code> once for <span class="italic">each</span> of the columns that are used collectively to identify the row. (In SQL, you would specify the rows using a <code class="codeph">WHERE</code> clause in an <code class="codeph">UPDATE</code> statement.)
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="XMLType-APIs.html#GUID-6209297F-DBE4-4F31-85F1-4083BF5BDE01" title="You can use Oracle XML&nbsp;DB XMLType PL/SQL, Java, C APIs, and Oracle Data Provider for .NET (ODP.NET) to access and manipulate XML data.">XMLType APIs</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB4924"></a><div class="props_rev_3"><a id="GUID-B0BBEBAD-4C61-4A21-956F-E4870A70DBF5" name="GUID-B0BBEBAD-4C61-4A21-956F-E4870A70DBF5"></a><h3 id="ADXDB-GUID-B0BBEBAD-4C61-4A21-956F-E4870A70DBF5" class="sect3"><span class="enumeration_section">12.1 </span>Using Package DBMS_XMLSTORE
               </h3>
               <div>
                  <p>Create a context handle, perform one or more insertions, updates, or deletions, and then close the context, </p>
                  <div class="section">
                     <p>To use PL/SQL package <code class="codeph">DBMS_XMLSTORE</code>, follow these steps:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Create a context handle by calling function <code class="codeph">DBMS_XMLSTORE</code>.<span class="bold"><code class="codeph">newContext</code></span> and supplying it with the table name to use for the DML operations. For case sensitivity, double quotation mark (<span class="bold"><code class="codeph">"</code></span>) the string that is passed to the function.</span><div>
                           <p>By default, XML documents are expected to use the <code class="codeph">&lt;ROW&gt;</code> tag to identify rows. This is the same default used by package <code class="codeph">DBMS_XMLGEN</code> when generating XML data. You can use function <code class="codeph">setRowTag</code> to override this behavior.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>(Optional) Perform one or more insertions, updates or deletions (you can <span class="italic">repeat</span> this step):</span><div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>For <span class="italic">insertions</span>, to improve performance you can specify the list of columns to insert by calling procedure <code class="codeph">DBMS_XMLSTORE.</code><span class="bold"><code class="codeph">setUpdateColumn</code></span> for each column. The default behavior (if you do not specify the list of columns) is to insert values for each column whose corresponding element is present in the XML document. 
                                 </p>
                              </li>
                              <li id="GUID-B0BBEBAD-4C61-4A21-956F-E4870A70DBF5__FORUPDATESUSEFUNCTIONDBMS_XMLSTORE.-0D932167">
                                 <p id="GUID-B0BBEBAD-4C61-4A21-956F-E4870A70DBF5__FORUPDATESUSEFUNCTIONDBMS_XMLSTORE.-0D94AA8D">For <span class="italic">updates</span>, use function <code class="codeph">DBMS_XMLSTORE.</code><span class="bold"><code class="codeph">setKeyColumn</code></span> to specify one or more (pseudo-) key columns, which are used to specify the <span class="italic">rows</span> to update. You do this in the <code class="codeph">WHERE</code> clause of a SQL <code class="codeph">UPDATE</code> statement. The columns that you specify need not be keys of the table, but together they must uniquely specify the rows to update.
                                 </p>
                                 <p>For example, in table <code class="codeph">employees</code>, column <code class="codeph">employee_id</code> uniquely identifies rows (it is a key of the table). If the XML document that you use to update the table contains element <code class="codeph">&lt;EMPLOYEE_ID&gt;2176&lt;/EMPLOYEE_ID&gt;</code>, then the rows where <code class="codeph">employee_id</code> equals <code class="codeph">2176</code> are updated. 
                                 </p>
                                 <p>To improve performance, you can also specify the list of update columns using <code class="codeph">DBMS_XMLSTORE.</code><span class="bold"><code class="codeph">setUpdateColumn</code></span>. The default behavior is to update <span class="italic">all</span> of the columns in the row(s) identified by <code class="codeph">setKeyColumn</code> whose corresponding elements are present in the XML document.
                                 </p>
                              </li>
                              <li>
                                 <p>For <span class="italic">deletions</span> you specify (pseudo-) key columns to identify the row(s) to delete. You do this the same way you specify rows to update (see previous).
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Provide a document to <code class="codeph">DBMS_XMLSTORE</code> function <code class="codeph">insertXML</code>, <code class="codeph">updateXML</code>, or <code class="codeph">deleteXML</code>. You can <span class="italic">repeat</span> this step to update several XML documents.</span></li>
                     <li class="stepexpand"><span>Close the context by calling function <code class="codeph">DBMS_XMLSTORE.</code><span class="bold"><code class="codeph">closeContext</code></span>.</span></li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4" title="You can use PL/SQL package DBMS_XMLSTORE to insert, update, or delete data from XML documents stored object-relationally. It uses a canonical XML mapping similar to the one produced by package DBMS_XMLGEN. It converts the mapping to object-relational constructs and then inserts, updates or deletes the corresponding values in relational tables.">PL/SQL Package DBMS_XMLSTORE</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4926"></a><a id="ADXDB4925"></a><div class="props_rev_3"><a id="GUID-4FC8C4EB-D720-4B41-B8B2-A3F2E1BA1D2E" name="GUID-4FC8C4EB-D720-4B41-B8B2-A3F2E1BA1D2E"></a><h3 id="ADXDB-GUID-4FC8C4EB-D720-4B41-B8B2-A3F2E1BA1D2E" class="sect3"><span class="enumeration_section">12.2 </span>Inserting an XML Document Using DBMS_XMLSTORE
               </h3>
               <div>
                  <p>You can use PL/SQL package <code class="codeph">DBMS_XMLSTORE</code> to insert an XML document into a table or view. It parses the document and creates an <code class="codeph">INSERT</code> statement into which it binds the values. By default, it inserts values into all of the columns represented by elements in the XML document.
                  </p>
                  <div class="section">
                     <p><a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-4FC8C4EB-D720-4B41-B8B2-A3F2E1BA1D2E__CFHBJEBH">Example 12-1</a> uses <code class="codeph">DBM_XMLSTORE</code> to insert the information for two new employees into the <code class="codeph">employees</code> table. The information to insert is provided as XML data.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4FC8C4EB-D720-4B41-B8B2-A3F2E1BA1D2E__CFHBJEBH">
                     <p class="titleinexample">Example 12-1 Inserting Data with Specified Columns</p><pre class="pre codeblock"><code>SELECT employee_id AS EMP_ID, salary, hire_date, job_id, email, last_name
  FROM employees WHERE department_id = 30;

EMP_ID     SALARY HIRE_DATE JOB_ID     EMAIL       LAST_NAME
------ ---------- --------- ---------- ---------- ----------
   114      11000 07-DEC-94 PU_MAN     DRAPHEAL     Raphaely
   115       3100 18-MAY-95 PU_CLERK   AKHOO            Khoo
   116       2900 24-DEC-97 PU_CLERK   SBAIDA          Baida
   117       2800 24-JUL-97 PU_CLERK   STOBIAS        Tobias
   118       2600 15-NOV-98 PU_CLERK   GHIMURO        Himuro
   119       2500 10-AUG-99 PU_CLERK   KCOLMENA   Colmenares

6 rows selected.

DECLARE
  insCtx DBMS_XMLSTORE.ctxType;
  rows NUMBER;
  xmlDoc CLOB :=
    '&lt;ROWSET&gt;
       &lt;ROW num="1"&gt;
         &lt;EMPLOYEE_ID&gt;920&lt;/EMPLOYEE_ID&gt;
         &lt;SALARY&gt;1800&lt;/SALARY&gt;
         &lt;DEPARTMENT_ID&gt;30&lt;/DEPARTMENT_ID&gt;
         &lt;HIRE_DATE&gt;17-DEC-2002&lt;/HIRE_DATE&gt;
         &lt;LAST_NAME&gt;Strauss&lt;/LAST_NAME&gt;
         &lt;EMAIL&gt;JSTRAUSS&lt;/EMAIL&gt;
         &lt;JOB_ID&gt;ST_CLERK&lt;/JOB_ID&gt;
       &lt;/ROW&gt;
       &lt;ROW&gt;
         &lt;EMPLOYEE_ID&gt;921&lt;/EMPLOYEE_ID&gt;
         &lt;SALARY&gt;2000&lt;/SALARY&gt;
         &lt;DEPARTMENT_ID&gt;30&lt;/DEPARTMENT_ID&gt;
         &lt;HIRE_DATE&gt;31-DEC-2004&lt;/HIRE_DATE&gt;
         &lt;LAST_NAME&gt;Jones&lt;/LAST_NAME&gt;
         &lt;EMAIL&gt;EJONES&lt;/EMAIL&gt;
         &lt;JOB_ID&gt;ST_CLERK&lt;/JOB_ID&gt;
       &lt;/ROW&gt;
     &lt;/ROWSET&gt;';
BEGIN
  insCtx := DBMS_XMLSTORE.<span class="bold">newContext</span>('HR.EMPLOYEES'); -- Get saved context
  DBMS_XMLSTORE.clearUpdateColumnList(insCtx); -- Clear the update settings
 
  -- Set the columns to be updated as a list of values 
  DBMS_XMLSTORE.<span class="bold">setUpdateColumn</span>(insCtx, 'EMPLOYEE_ID'); 
  DBMS_XMLSTORE.<span class="bold">setUpdateColumn</span>(insCtx, 'SALARY'); 
  DBMS_XMLSTORE.<span class="bold">setUpdateColumn</span>(insCtx, 'HIRE_DATE');
  DBMS_XMLSTORE.<span class="bold">setUpdateColumn</span>(insCtx, 'DEPARTMENT_ID'); 
  DBMS_XMLSTORE.<span class="bold">setUpdateColumn</span>(insCtx, 'JOB_ID');
  DBMS_XMLSTORE.<span class="bold">setUpdateColumn</span>(insCtx, 'EMAIL');
  DBMS_XMLSTORE.<span class="bold">setUpdateColumn</span>(insCtx, 'LAST_NAME');

  -- Insert the doc. 
  rows := DBMS_XMLSTORE.<span class="bold">insertXML</span>(insCtx, xmlDoc);
  DBMS_OUTPUT.put_line(rows || ' <span class="bold">rows inserted.</span>');

  -- Close the context
  DBMS_XMLSTORE.<span class="bold">closeContext</span>(insCtx); 
END;
/

<span class="bold">2 rows inserted.</span>
 
PL/SQL procedure successfully completed.

SELECT employee_id AS EMP_ID, salary, hire_date, job_id, email, last_name
  FROM employees WHERE department_id = 30;

EMP_ID     SALARY HIRE_DATE JOB_ID     EMAIL       LAST_NAME
------ ---------- --------- ---------- ---------- ----------
   114      11000 07-DEC-94 PU_MAN     DRAPHEAL     Raphaely
   115       3100 18-MAY-95 PU_CLERK   AKHOO            Khoo
   116       2900 24-DEC-97 PU_CLERK   SBAIDA          Baida
   117       2800 24-JUL-97 PU_CLERK   STOBIAS        Tobias
   118       2600 15-NOV-98 PU_CLERK   GHIMURO        Himuro
   119       2500 10-AUG-99 PU_CLERK   KCOLMENA   Colmenares
   <span class="bold">920       1800 17-DEC-02 ST_CLERK   STRAUSS       Strauss</span>
   <span class="bold">921       2000 31-DEC-04 ST_CLERK   EJONES          Jones</span>

8 rows selected.</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4" title="You can use PL/SQL package DBMS_XMLSTORE to insert, update, or delete data from XML documents stored object-relationally. It uses a canonical XML mapping similar to the one produced by package DBMS_XMLGEN. It converts the mapping to object-relational constructs and then inserts, updates or deletes the corresponding values in relational tables.">PL/SQL Package DBMS_XMLSTORE</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4928"></a><a id="ADXDB4927"></a><div class="props_rev_3"><a id="GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8" name="GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8"></a><h3 id="ADXDB-GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8" class="sect3"><span class="enumeration_section">12.3 </span>Updating XML Data Using DBMS_XMLSTORE
               </h3>
               <div>
                  <p>You can use PL/SQL package <code class="codeph">DBMS_XMLSTORE</code> to update (modify) existing data. You specify which rows to update by calling procedure <code class="codeph">setKeyColumn</code> once for <span class="italic">each</span> of the columns that are used collectively to identify the row. (In SQL, you would specify the rows using a <code class="codeph">WHERE</code> clause in an <code class="codeph">UPDATE</code> statement.)
                  </p>
                  <div class="section">
                     <p>You can think of this set of columns as acting like a set of key columns: <span class="italic">together, they specify a unique row</span> to be updated. However, the columns that you use (with <code class="codeph">setKeyColumn</code>) need <span class="italic">not</span> be keys of the table — as long as they uniquely specify a row, they can be used with calls to <code class="codeph">setKeyColumn</code>.
                     </p>
                     <p><a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8__CFHEHGCA">Example 12-2</a> uses <code class="codeph">DBM_XMLSTORE</code> to update information. Assuming that the first name for employee number 188 is incorrectly recorded as Kelly, this example corrects that first name to Pat. Since column <code class="codeph">employee_id</code> is a primary key for table <code class="codeph">employees</code>, a single call to <code class="codeph">setKeyColumn</code> specifying column <code class="codeph">employee_id</code> is sufficient to identify a unique row for updating.
                     </p>
                     <p>The following <code class="codeph">UPDATE</code> statement is equivalent to the use of <code class="codeph">DBM_XMLSTORE</code> in <a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8__CFHEHGCA">Example 12-2</a>: 
                     </p><pre class="pre codeblock"><code>UPDATE hr.employees SET first_name = 'Pat' WHERE employee_id = 188; </code></pre></div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8__CFHEHGCA">
                     <p class="titleinexample">Example 12-2 Updating Data with Key Columns</p><pre class="pre codeblock"><code>SELECT employee_id, first_name FROM employees WHERE employee_id = 188;

EMPLOYEE_ID FIRST_NAME
----------- ----------
        188 <span class="bold">Kelly</span>
 
1 row selected.

DECLARE
  updCtx DBMS_XMLSTORE.ctxType; 
  rows NUMBER;
  xmlDoc CLOB :=
    '&lt;ROWSET&gt;
       &lt;ROW&gt;
         &lt;EMPLOYEE_ID&gt;188&lt;/EMPLOYEE_ID&gt;
         &lt;FIRST_NAME&gt;<span class="bold">Pat</span>&lt;/FIRST_NAME&gt;
       &lt;/ROW&gt;
     &lt;/ROWSET&gt;';
BEGIN
   updCtx := DBMS_XMLSTORE.newContext('HR.EMPLOYEES'); -- get the context
   DBMS_XMLSTORE.clearUpdateColumnList(updCtx);        -- clear update settings

   -- Specify that column employee_id is a "key" to identify the row to update.
   DBMS_XMLSTORE.<span class="bold">setKeyColumn</span>(updCtx, 'EMPLOYEE_ID'); 
   rows := DBMS_XMLSTORE.<span class="bold">updateXML</span>(updCtx, xmlDoc);    -- update the table
   DBMS_XMLSTORE.closeContext(updCtx);                 -- close the context
END;
/

SELECT employee_id, first_name FROM employees WHERE employee_id = 188;

EMPLOYEE_ID FIRST_NAME
----------- ----------
        188 <span class="bold">Pat</span>
 
1 row selected.
</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4" title="You can use PL/SQL package DBMS_XMLSTORE to insert, update, or delete data from XML documents stored object-relationally. It uses a canonical XML mapping similar to the one produced by package DBMS_XMLGEN. It converts the mapping to object-relational constructs and then inserts, updates or deletes the corresponding values in relational tables.">PL/SQL Package DBMS_XMLSTORE</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4930"></a><a id="ADXDB4929"></a><div class="props_rev_3"><a id="GUID-9CA65F29-53EA-434E-9AE8-D300511337DF" name="GUID-9CA65F29-53EA-434E-9AE8-D300511337DF"></a><h3 id="ADXDB-GUID-9CA65F29-53EA-434E-9AE8-D300511337DF" class="sect3"><span class="enumeration_section">12.4 </span>Deleting XML Data Using DBMS_XMLSTORE
               </h3>
               <div>
                  <p>You can use PL/SQL package <code class="codeph">DBMS_XMLSTORE</code> to delete existing data. You specify which rows to delete by calling procedure <code class="codeph">setKeyColumn</code> once for <span class="italic">each</span> of the columns that are used collectively to identify the row. (In SQL, you would specify the rows using a <code class="codeph">WHERE</code> clause in an <code class="codeph">UPDATE</code> statement.)
                  </p>
                  <div class="example" id="GUID-9CA65F29-53EA-434E-9AE8-D300511337DF__GUID-970DD27A-74B3-43B5-BC39-E9F545940484">
                     <p class="titleinexample">Example 12-3 DBMS_XMLSTORE.DELETEXML Example</p><pre class="pre codeblock"><code>SELECT employee_id FROM employees WHERE employee_id = 188;
 
EMPLOYEE_ID
-----------
        188
 
1 row selected.
 
DECLARE
  delCtx DBMS_XMLSTORE.ctxType;
  rows NUMBER;
  xmlDoc CLOB :=
    '&lt;ROWSET&gt;
       &lt;ROW&gt;
         &lt;EMPLOYEE_ID&gt;188&lt;/EMPLOYEE_ID&gt;
         &lt;DEPARTMENT_ID&gt;50&lt;/DEPARTMENT_ID&gt;
       &lt;/ROW&gt;
     &lt;/ROWSET&gt;';
BEGIN
  delCtx  := DBMS_XMLSTORE.newContext('HR.EMPLOYEES');
  DBMS_XMLSTORE.setKeyColumn(delCtx, 'EMPLOYEE_ID');
  rows := DBMS_XMLSTORE.<span class="bold">deleteXML</span>(delCtx, xmlDoc);
  DBMS_XMLSTORE.closeContext(delCtx);
END;
/
 
SELECT employee_id FROM employees WHERE employee_id = 188;
 
no rows selected.</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4" title="You can use PL/SQL package DBMS_XMLSTORE to insert, update, or delete data from XML documents stored object-relationally. It uses a canonical XML mapping similar to the one produced by package DBMS_XMLGEN. It converts the mapping to object-relational constructs and then inserts, updates or deletes the corresponding values in relational tables.">PL/SQL Package DBMS_XMLSTORE</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Gathering Database Statistics</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Performance Tuning Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Performance Tuning Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-performance-tuning-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-12T22:26:14-07:00">
      <meta name="dcterms.title" content="Database Performance Tuning Guide">
      <meta name="dcterms.dateCopyrighted" content="2007, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96347-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="measuring-database-performance.html" title="Previous" type="text/html">
      <link rel="next" href="automatic-performance-diagnostics.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGDBA">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="measuring-database-performance.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="automatic-performance-diagnostics.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Performance Tuning Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-II-diagnosing-and-tuning-database-performance.html" property="item" typeof="WebPage"><span property="name">Diagnosing and Tuning Database Performance </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Gathering Database Statistics </li>
            </ol>
            <a id="GUID-CBB1716F-2B20-4575-ADCE-94E33BEA53EF" name="GUID-CBB1716F-2B20-4575-ADCE-94E33BEA53EF"></a>
            
            <h2 id="TGDBA-GUID-CBB1716F-2B20-4575-ADCE-94E33BEA53EF" class="sect2"><span class="enumeration_chapter">6 </span>Gathering Database Statistics 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes how to gather database statistics for Oracle Database and contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="gathering-database-statistics.html#GUID-56AEF38E-9400-427B-A818-EDEC145F7ACD">About Gathering Database Statistics</a></p>
                  </li>
                  <li>
                     <p><a href="gathering-database-statistics.html#GUID-9D3A3890-8E68-48C5-84D0-DB0A8D93C53A" title="You can adjust the interval, retention period, and number of top SQL to flush for snapshot generation, but note that this can affect the precision of the Oracle Database diagnostic tools.Oracle Database enables you to transport AWR data between systems. This is useful in cases where you want to use a separate system to perform analysis of AWR data, so as to reduce the overhead caused by performance analysis on a production system.A centralized Automatic Workload Repository (AWR) stores the performance data related to CDB and PDBs in a multitenant environment.In a multitenant environment, AWR data falls into different categories.">Managing the Automatic Workload Repository</a></p>
                  </li>
                  <li>
                     <p><a href="gathering-database-statistics.html#GUID-9BFC6383-6C4F-4103-A2CB-4713802F2669">Generating Automatic Workload Repository Reports</a></p>
                  </li>
                  <li>
                     <p><a href="gathering-database-statistics.html#GUID-23061F14-767D-47B6-9B45-D1E26FB1E075">Generating Performance Hub Active Report</a></p>
                  </li>
               </ul>
            </div><a id="TGDBA167"></a><a id="TGDBA168"></a><div class="props_rev_3"><a id="GUID-56AEF38E-9400-427B-A818-EDEC145F7ACD" name="GUID-56AEF38E-9400-427B-A818-EDEC145F7ACD"></a><h3 id="TGDBA-GUID-56AEF38E-9400-427B-A818-EDEC145F7ACD" class="sect3"><span class="enumeration_section">6.1 </span>About Gathering Database Statistics
               </h3>
               <div>
                  <p>Oracle Database automatically persists the cumulative and delta values for most of the statistics at all levels (except the session level) in the Automatic Workload Repository (AWR). This process is repeated on a regular time period and the results are captured in an AWR snapshot. The delta values captured by the snapshot represent the changes for each statistic over the time period.</p>
                  <p>A statistical baseline is a collection of statistic rates usually taken over a time period when the system is performing well at an optimal level. Use statistical baselines to diagnose performance problems by comparing statistics captured in a baseline to those captured during a period of poor performance. This enables you to identify specific statistics that may have increased significantly and could be the cause of the problem. AWR supports the capture of baseline data by enabling you to specify and preserve a pair or range of AWR snapshots as a baseline.</p>
                  <p>A metric is typically the rate of change in a cumulative statistic. You can measure this rate against a variety of units, including time, transactions, or database calls. For example, the number database calls per second is a metric. Metric values are exposed in some <code class="codeph">V$</code> views, where the values are the averages over a fairly small time interval, typically 60 seconds. A history of recent metric values is available through <code class="codeph">V$</code> views, and some data is also persisted by AWR snapshots.
                  </p>
                  <p>The following sections describe various Oracle Database features that enable you to more effectively gather database statistics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-CE73D449-0EE9-4022-B1F1-AA12F0955C03">Automatic Workload Repository</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-A64AE148-DFB9-4B5F-BAA8-6A4A575E79DF">Snapshots</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-C6401C10-F958-4339-99C2-3320BDAB4CEA">Baselines</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-6C74FDE0-FF92-4605-82DB-9FA598E59407">Space Consumption</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-6450312A-8894-4648-8DC3-83C83F6995F3">Adaptive Thresholds</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-56AEF38E-9400-427B-A818-EDEC145F7ACD__GUID-9B1DA07F-EC37-4FB4-A9B7-E543BD114AA2">
                     <p class="notep1">Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Data visibility and privilege requirements may differ when using AWR features with pluggable databases (PDBs). For information about how manageability features, including the AWR features, work in a multitenant container database (CDB), see <a href="../multi/administering-a-cdb-with-sql-plus.html#MULTI-GUID-DF42C0D3-8968-4810-9327-9D176337D356" target="_blank"><span class="italic">Oracle Multitenant Administrator’s Guide</span></a>.
                           </p>
                        </li>
                        <li>
                           <p>License for Oracle Diagnostic Pack is required to use the AWR features described in this chapter.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="TGDBA169"></a><div class="props_rev_3"><a id="GUID-CE73D449-0EE9-4022-B1F1-AA12F0955C03" name="GUID-CE73D449-0EE9-4022-B1F1-AA12F0955C03"></a><h4 id="TGDBA-GUID-CE73D449-0EE9-4022-B1F1-AA12F0955C03" class="sect4"><span class="enumeration_section">6.1.1 </span>Automatic Workload Repository
                  </h4>
                  <div>
                     <p>AWR collects, processes, and maintains performance statistics for problem detection and self-tuning purposes. This gathered data is stored both in memory and in the database, and is displayed in both reports and views.</p>
                     <p>The statistics collected and processed by AWR include:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Object statistics that determine both access and usage statistics of database segments</p>
                        </li>
                        <li>
                           <p>Time model statistics based on time usage for activities, displayed in the <code class="codeph">V$SYS_TIME_MODEL</code> and <code class="codeph">V$SESS_TIME_MODEL</code> views
                           </p>
                        </li>
                        <li>
                           <p>Some of the system and session statistics collected in the <code class="codeph">V$SYSSTAT</code> and <code class="codeph">V$SESSTAT</code> views
                           </p>
                        </li>
                        <li>
                           <p>SQL statements that are producing the highest load on the system, based on criteria such as elapsed time and CPU time</p>
                        </li>
                        <li>
                           <p>Active Session History (ASH) statistics, representing the history of recent sessions activity</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-CE73D449-0EE9-4022-B1F1-AA12F0955C03__GUID-FA71697E-E16C-40EA-8CF0-EFD0C55EA8DE">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="measuring-database-performance.html#GUID-D106A7A3-1B96-47E7-883C-2BB0F11567E1">About Database Statistics</a>"</span> for information about the various types of database statistics
                              </p>
                           </li>
                           <li>
                              <p><a href="../refrn/index.html" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about the views <code class="codeph">V$SYS_TIME_MODEL</code>, <code class="codeph">V$SESS_TIME_MODEL</code>, <code class="codeph">V$SYSSTAT</code>, and <code class="codeph">V$SESSTAT</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TGDBA170"></a><div class="props_rev_3"><a id="GUID-A64AE148-DFB9-4B5F-BAA8-6A4A575E79DF" name="GUID-A64AE148-DFB9-4B5F-BAA8-6A4A575E79DF"></a><h4 id="TGDBA-GUID-A64AE148-DFB9-4B5F-BAA8-6A4A575E79DF" class="sect4"><span class="enumeration_section">6.1.2 </span>Snapshots
                  </h4>
                  <div>
                     <p><a id="d11457e348" class="indexterm-anchor"></a>Snapshots are sets of historical data for specific time periods that are used for performance comparisons by Automatic Database Diagnostic Monitor (ADDM). By default, Oracle Database automatically generates snapshots of the performance data once every hour and retains the statistics in AWR for 8 days. You can also manually create snapshots or change the snapshot retention period, but it is usually not necessary.
                     </p>
                     <p>AWR compares the difference between snapshots to determine which SQL statements to capture based on the effect on the system load. This reduces the number of SQL statements that must be captured over time. After the snapshots are created, ADDM analyzes the data captured in the snapshots to perform its performance analysis.</p>
                     <div class="infoboxnotealso" id="GUID-A64AE148-DFB9-4B5F-BAA8-6A4A575E79DF__GUID-8828CE63-56E1-4349-BF30-BEC434C492A3">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="gathering-database-statistics.html#GUID-144711F9-85AE-4281-B548-3E01280F9A56" title="You can adjust the interval, retention period, and number of top SQL to flush for snapshot generation, but note that this can affect the precision of the Oracle Database diagnostic tools.">Managing Snapshots</a>"</span> for information about managing snapshots
                        </p>
                     </div>
                  </div>
               </div><a id="TGDBA171"></a><div class="props_rev_3"><a id="GUID-C6401C10-F958-4339-99C2-3320BDAB4CEA" name="GUID-C6401C10-F958-4339-99C2-3320BDAB4CEA"></a><h4 id="TGDBA-GUID-C6401C10-F958-4339-99C2-3320BDAB4CEA" class="sect4"><span class="enumeration_section">6.1.3 </span>Baselines
                  </h4>
                  <div>
                     <p>A <a id="d11457e417" class="indexterm-anchor"></a>baseline is a set of snapshots from a specific time period that is preserved for comparison with other snapshots when a performance problem occurs. The snapshots contained in a baseline are excluded from the automatic AWR purging process and are retained indefinitely.
                     </p>
                     <p>There are several types of available baselines:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-9855A86D-0A2C-413B-8980-490E96A062B3">Fixed Baselines</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-91C614C3-5B49-4DD9-90B5-A38F3D6AAD62">Moving Window Baselines</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-BC0E898A-5AE3-4305-9F74-C24EE5F288DF">Baseline Templates</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA172"></a><div class="props_rev_3"><a id="GUID-9855A86D-0A2C-413B-8980-490E96A062B3" name="GUID-9855A86D-0A2C-413B-8980-490E96A062B3"></a><h5 id="TGDBA-GUID-9855A86D-0A2C-413B-8980-490E96A062B3" class="sect5"><span class="enumeration_section">6.1.3.1 </span>Fixed Baselines
                     </h5>
                     <div>
                        <p>A fixed baseline corresponds to a fixed, contiguous time period in the past that you specify. Before creating a fixed baseline, carefully consider the time period you choose as a baseline, because the baseline should represent the system operating at an optimal level. In the future, you can compare the baseline with other baselines or snapshots captured during periods of poor performance to analyze performance degradation over time.</p>
                        <div class="infoboxnotealso" id="GUID-9855A86D-0A2C-413B-8980-490E96A062B3__GUID-15C41FDC-ECE0-446E-B7E1-E5B537B3A00A">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="gathering-database-statistics.html#GUID-44811EF8-D082-487F-8EEC-DA6E78700E68">Managing Baselines</a>"</span> for information about managing fixed baselines
                           </p>
                        </div>
                     </div>
                  </div><a id="TGDBA173"></a><div class="props_rev_3"><a id="GUID-91C614C3-5B49-4DD9-90B5-A38F3D6AAD62" name="GUID-91C614C3-5B49-4DD9-90B5-A38F3D6AAD62"></a><h5 id="TGDBA-GUID-91C614C3-5B49-4DD9-90B5-A38F3D6AAD62" class="sect5"><span class="enumeration_section">6.1.3.2 </span>Moving Window Baselines
                     </h5>
                     <div>
                        <p>A moving window baseline corresponds to all AWR data that exists within the AWR retention period. This is useful when using adaptive thresholds because the database can use AWR data in the entire AWR retention period to compute metric threshold values.</p>
                        <p>Oracle Database automatically maintains a system-defined moving window baseline. The default window size for the system-defined moving window baseline is the current AWR retention period, which by default is 8 days. If you are planning to use adaptive thresholds, then consider using a larger moving window—such as 30 days—to accurately compute threshold values. You can resize the moving window baseline by changing the number of days in the moving window to a value that is equal to or less than the number of days in the AWR retention period. Therefore, to increase the size of a moving window, you must first increase the AWR retention period accordingly.</p>
                        <div class="infoboxnotealso" id="GUID-91C614C3-5B49-4DD9-90B5-A38F3D6AAD62__GUID-610550A1-6F5D-4E73-A4C8-DEB5796BFFFC">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="gathering-database-statistics.html#GUID-FFB695C6-E57A-487D-898A-EDAF0ECDD881">Resizing the Default Moving Window Baseline</a>"</span> for information about resizing a moving window baseline
                           </p>
                        </div>
                     </div>
                  </div><a id="TGDBA174"></a><div class="props_rev_3"><a id="GUID-BC0E898A-5AE3-4305-9F74-C24EE5F288DF" name="GUID-BC0E898A-5AE3-4305-9F74-C24EE5F288DF"></a><h5 id="TGDBA-GUID-BC0E898A-5AE3-4305-9F74-C24EE5F288DF" class="sect5"><span class="enumeration_section">6.1.3.3 </span>Baseline Templates
                     </h5>
                     <div>
                        <p>Baseline templates enable you to create baselines for a contiguous time period in the future. There are two types of baseline templates:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="gathering-database-statistics.html#GUID-55C09FAB-9DCD-4EC8-BE2F-5B99125387B7">Single Baseline Templates</a></p>
                           </li>
                           <li>
                              <p><a href="gathering-database-statistics.html#GUID-A07D8B81-2451-4513-8885-42504DD680C1">Repeating Baseline Templates</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-BC0E898A-5AE3-4305-9F74-C24EE5F288DF__GUID-19B6C0FB-9FCF-4F16-ABBF-24E5EEFACD3C">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="gathering-database-statistics.html#GUID-B5DB2422-951F-4D00-A473-AB6739ECC88B">Managing Baseline Templates</a>"</span> for information about managing baseline templates
                           </p>
                        </div>
                     </div><a id="TGDBA175"></a><div class="props_rev_3"><a id="GUID-55C09FAB-9DCD-4EC8-BE2F-5B99125387B7" name="GUID-55C09FAB-9DCD-4EC8-BE2F-5B99125387B7"></a><h6 id="TGDBA-GUID-55C09FAB-9DCD-4EC8-BE2F-5B99125387B7" class="sect6"><span class="enumeration_section">6.1.3.3.1 </span>Single Baseline Templates
                        </h6>
                        <div>
                           <p>Use a single baseline template to create a baseline for a single contiguous time period in the future. This is useful if you know beforehand of a time period that you intend to capture in the future. For example, you may want to capture AWR data during a system test that is scheduled for the upcoming weekend. In this case, you can create a single baseline template to automatically capture the time period when the test occurs.</p>
                        </div>
                     </div><a id="TGDBA176"></a><div class="props_rev_3"><a id="GUID-A07D8B81-2451-4513-8885-42504DD680C1" name="GUID-A07D8B81-2451-4513-8885-42504DD680C1"></a><h6 id="TGDBA-GUID-A07D8B81-2451-4513-8885-42504DD680C1" class="sect6"><span class="enumeration_section">6.1.3.3.2 </span>Repeating Baseline Templates
                        </h6>
                        <div>
                           <p>Use a repeating baseline template to create and drop baselines based on a repeating time schedule. This is useful if you want Oracle Database to automatically capture a contiguous time period on an ongoing basis. For example, you may want to capture AWR data during every Monday morning for a month. In this case, you can create a repeating baseline template to automatically create baselines on a repeating schedule for every Monday, and automatically remove older baselines after a specified expiration interval, such as one month.</p>
                        </div>
                     </div>
                  </div>
               </div><a id="TGDBA187"></a><div class="props_rev_3"><a id="GUID-6C74FDE0-FF92-4605-82DB-9FA598E59407" name="GUID-6C74FDE0-FF92-4605-82DB-9FA598E59407"></a><h4 id="TGDBA-GUID-6C74FDE0-FF92-4605-82DB-9FA598E59407" class="sect4"><span class="enumeration_section">6.1.4 </span>Space Consumption
                  </h4>
                  <div>
                     <p>The space consumed by AWR is determined by several factors:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Number of active sessions in the database at any given time</p>
                        </li>
                        <li>
                           <p>Snapshot interval</p>
                           <p>The snapshot interval determines the frequency at which snapshots are captured. A smaller snapshot interval increases the frequency, which increases the volume of data collected by AWR.</p>
                        </li>
                        <li>
                           <p>Historical data retention period</p>
                           <p>The retention period determines how long this data is retained before being purged. A longer retention period increases the space consumed by AWR. </p>
                        </li>
                     </ul>
                     <p>By default, Oracle Database captures snapshots once every hour and retains them in the database for 8 days. With these default settings, a typical system with an average of 10 concurrent active sessions can require approximately 200 to 300 MB of space for its AWR data.</p>
                     <p>To reduce AWR space consumption, increase the snapshot interval and reduce the retention period. When reducing the retention period, note that several Oracle Database self-managing features depend on AWR data for proper functioning. Not having enough data can affect the validity and accuracy of these components and features, including:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Automatic Database Diagnostic Monitor (ADDM)</p>
                        </li>
                        <li>
                           <p>SQL Tuning Advisor</p>
                        </li>
                        <li>
                           <p>Undo Advisor</p>
                        </li>
                        <li>
                           <p>Segment Advisor </p>
                        </li>
                     </ul>
                     <p>If possible, Oracle recommends that you set the AWR retention period large enough to capture at least one complete workload cycle. If your system experiences weekly workload cycles, such as OLTP workload during weekdays and batch jobs during the weekend, then you do not need to change the default AWR retention period of 8 days. However, if your system is subjected to a monthly peak load during month-end book closing, then you may need to set the retention period to one month.</p>
                     <p>Under exceptional circumstances, you can disable automatic snapshot collection by setting the snapshot interval to 0. Under this condition, the automatic collection of the workload and statistical data is stopped, and most of the Oracle Database self-management functionality is not operational. In addition, you cannot manually create snapshots. For this reason, Oracle strongly recommends against disabling automatic snapshot collection.</p>
                     <div class="infoboxnote" id="GUID-6C74FDE0-FF92-4605-82DB-9FA598E59407__GUID-60A39E12-D5B8-4942-B886-296B6B0F89FD">
                        <p class="notep1">Note:</p>
                        <p>Oracle Database uses the <code class="codeph">SYSAUX</code> tablespace to store AWR data by default. Starting with Oracle Database 19c, you can specify any other tablespace to store the AWR data, so as to avoid overloading the <code class="codeph">SYSAUX</code> tablespace.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-6C74FDE0-FF92-4605-82DB-9FA598E59407__GUID-A6447C91-65FB-47F4-BB53-2C2327B177D4">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="gathering-database-statistics.html#GUID-62D01B30-2687-4821-A651-DC0E4AAC3B01" title="You can adjust the interval, retention period, and number of top SQL to flush for snapshot generation, but note that this can affect the precision of the Oracle Database diagnostic tools.">Modifying Snapshot Settings</a>"</span> for information about changing the default values for the snapshot interval and retention period
                        </p>
                     </div>
                  </div>
               </div><a id="TGDBA177"></a><div class="props_rev_3"><a id="GUID-6450312A-8894-4648-8DC3-83C83F6995F3" name="GUID-6450312A-8894-4648-8DC3-83C83F6995F3"></a><h4 id="TGDBA-GUID-6450312A-8894-4648-8DC3-83C83F6995F3" class="sect4"><span class="enumeration_section">6.1.5 </span>Adaptive Thresholds
                  </h4>
                  <div>
                     <p>Adaptive thresholds enable you to monitor and detect performance issues, while minimizing administrative overhead. Adaptive thresholds automatically set warning and critical alert thresholds for some system metrics using statistics derived from metric values captured in the moving window baseline. The statistics for these thresholds are recomputed weekly and might result in new thresholds as system performance evolves over time. Additionally, adaptive thresholds can compute different thresholds values for different times of the day or week based on periodic workload patterns.</p>
                     <p>For example, many databases support an online transaction processing (OLTP) workload during the day and batch processing at night. The performance metric for response time per transaction can be useful for detecting degradation in OLTP performance during the day. However, a useful OLTP threshold value is usually too low for batch workloads, where long-running transactions might be common. As a result, threshold values appropriate to OLTP might trigger frequent false performance alerts during batch processing. Adaptive thresholds can detect such a workload pattern and automatically set different threshold values for daytime and nighttime.</p>
                     <p>There are two types of adaptive thresholds:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-5B32060C-1752-4ACC-AB45-1CBE76DE53E9">Percentage of Maximum Thresholds</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-145777F9-E316-4663-B847-042F2A85B144">Significance Level Thresholds</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA178"></a><div class="props_rev_3"><a id="GUID-5B32060C-1752-4ACC-AB45-1CBE76DE53E9" name="GUID-5B32060C-1752-4ACC-AB45-1CBE76DE53E9"></a><h5 id="TGDBA-GUID-5B32060C-1752-4ACC-AB45-1CBE76DE53E9" class="sect5"><span class="enumeration_section">6.1.5.1 </span>Percentage of Maximum Thresholds
                     </h5>
                     <div>
                        <p>The threshold value for percentage of maximum thresholds is computed as a percentage multiple of the maximum value observed for the data in the moving window baseline.</p>
                        <p>Percentage of maximum thresholds are most useful when a system is sized for peak workloads, and you want to be alerted when the current workload volume approaches or exceeds previous high values. Metrics that have an unknown but definite limiting value are prime candidates for these settings. For example, the redo generated per second metric is typically a good candidate for a percentage of maximum threshold.</p>
                     </div>
                  </div><a id="TGDBA179"></a><div class="props_rev_3"><a id="GUID-145777F9-E316-4663-B847-042F2A85B144" name="GUID-145777F9-E316-4663-B847-042F2A85B144"></a><h5 id="TGDBA-GUID-145777F9-E316-4663-B847-042F2A85B144" class="sect5"><span class="enumeration_section">6.1.5.2 </span>Significance Level Thresholds
                     </h5>
                     <div>
                        <p>The threshold value for significance level thresholds is set to a statistical percentile that represents how unusual it is to observe values above the threshold value based the data in the moving window baseline.</p>
                        <p>Significance level thresholds are most useful for metrics that exhibit statistically stable behavior when the system is operating normally, but might vary over a wide range when the system is performing poorly. For example, the response time per transaction metric should be stable for a well-tuned OLTP system, but may fluctuate widely when performance issues arise. Significance level thresholds are meant to generate alerts when conditions produce both unusual metric values and unusual system performance.</p>
                        <p>Significance level thresholds can be set to one of the following levels:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>High (.95)</p>
                              <p>Only 5 in 100 observations are expected to exceed this value.</p>
                           </li>
                           <li>
                              <p>Very High (.99)</p>
                              <p>Only 1 in 100 observations are expected to exceed this value.</p>
                           </li>
                           <li>
                              <p>Severe (.999)</p>
                              <p>Only 1 in 1,000 observations are expected to exceed this value.</p>
                           </li>
                           <li>
                              <p>Extreme (.9999)</p>
                              <p>Only 1 in 10,000 observations are expected to exceed this value.</p>
                           </li>
                        </ul>
                        <p>When you specify a significance level threshold, Oracle Database performs an internal calculation to set the threshold value. In some cases, Oracle Database cannot establish the threshold value at higher significance levels using the data in the baseline, and the significance level threshold is not set.</p>
                        <p>If you specified a Severe (.999) or Extreme (.9999) significance level threshold and are not receiving alerts as expected, try setting the significance level threshold to a lower value, such as Very High (.99) or High (.95). Alternatively, consider using a percentage of maximum threshold instead. If you change the threshold and find that you are receiving too many alerts, try increasing the number of occurrences to trigger an alert.</p>
                        <div class="infoboxnote" id="GUID-145777F9-E316-4663-B847-042F2A85B144__GUID-81E67E00-D34E-41C8-92E1-C6303C179B47">
                           <p class="notep1">Note:</p>
                           <p>The primary interface for managing baseline metrics is Oracle Enterprise Manager Cloud Control (Cloud Control). To create an adaptive threshold for a baseline metric, use Cloud Control as described in <a href="../tdppt/resolving-performance-degradation-over-time.html#TDPPT334" target="_blank"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a>.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-145777F9-E316-4663-B847-042F2A85B144__GUID-F36B9899-CC9C-43FE-B6D1-7C9FC764219F">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="gathering-database-statistics.html#GUID-91C614C3-5B49-4DD9-90B5-A38F3D6AAD62">Moving Window Baselines</a>"</span> for information about moving window baselines
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="gathering-database-statistics.html#GUID-44811EF8-D082-487F-8EEC-DA6E78700E68">Managing Baselines</a>"</span> for information about managing baseline metrics
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="TGDBA185"></a><div class="props_rev_3"><a id="GUID-9D3A3890-8E68-48C5-84D0-DB0A8D93C53A" name="GUID-9D3A3890-8E68-48C5-84D0-DB0A8D93C53A"></a><h3 id="TGDBA-GUID-9D3A3890-8E68-48C5-84D0-DB0A8D93C53A" class="sect3"><span class="enumeration_section">6.2 </span>Managing the Automatic Workload Repository
               </h3>
               <div>
                  <p>This section describes how to manage AWR features of Oracle Database and contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-26D359FA-F809-4444-907C-B5AFECD9AE29">Enabling the Automatic Workload Repository</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-144711F9-85AE-4281-B548-3E01280F9A56" title="You can adjust the interval, retention period, and number of top SQL to flush for snapshot generation, but note that this can affect the precision of the Oracle Database diagnostic tools.">Managing Snapshots</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-44811EF8-D082-487F-8EEC-DA6E78700E68">Managing Baselines</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-B5DB2422-951F-4D00-A473-AB6739ECC88B">Managing Baseline Templates</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-F25470A0-C236-46DE-84F7-D68FBE1B0F12" title="Oracle Database enables you to transport AWR data between systems. This is useful in cases where you want to use a separate system to perform analysis of AWR data, so as to reduce the overhead caused by performance analysis on a production system.">Transporting Automatic Workload Repository Data to Another System</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-18E1B278-B3C5-4FE1-8E51-BC8878C439F5">Using Automatic Workload Repository Views</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-D64AEB01-18FF-47EF-BB5C-A0611117D180" title="A centralized Automatic Workload Repository (AWR) stores the performance data related to CDB and PDBs in a multitenant environment.">Managing Automatic Workload Repository in a Multitenant Environment</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-309C107F-DC42-4119-9904-9504E9748B84">Managing Automatic Workload Repository in Active Data Guard Standby Databases</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-9D3A3890-8E68-48C5-84D0-DB0A8D93C53A__GUID-34657870-039E-4272-822B-29466028668F">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="gathering-database-statistics.html#GUID-CE73D449-0EE9-4022-B1F1-AA12F0955C03">Automatic Workload Repository</a>"</span> for a description of AWR
                     </p>
                  </div>
               </div><a id="TGDBA186"></a><div class="props_rev_3"><a id="GUID-26D359FA-F809-4444-907C-B5AFECD9AE29" name="GUID-26D359FA-F809-4444-907C-B5AFECD9AE29"></a><h4 id="TGDBA-GUID-26D359FA-F809-4444-907C-B5AFECD9AE29" class="sect4"><span class="enumeration_section">6.2.1 </span>Enabling the Automatic Workload Repository
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d11457e1236" class="indexterm-anchor"></a>Gathering database statistics using AWR is enabled by default and is controlled by the<code class="codeph"> STATISTICS_LEVEL</code> initialization parameter.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-26D359FA-F809-4444-907C-B5AFECD9AE29__GUID-DD3E22CF-F0CF-4B77-91B8-E2D6FE1C97E2">To enable statistics gathering by AWR:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Set the <code class="codeph">STATISTICS_LEVEL</code> parameter to <code class="codeph">TYPICAL</code> or <code class="codeph">ALL</code>.
                              </p>
                              <p>The default setting for this parameter is <code class="codeph">TYPICAL</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Setting <code class="codeph">STATISTICS_LEVEL</code> to <code class="codeph">BASIC</code> disables many Oracle Database features, including AWR, and is not recommended. If <code class="codeph">STATISTICS_LEVEL</code> is set to <code class="codeph">BASIC</code>, you can still manually capture AWR statistics using the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package. However, because in-memory collection of many system statistics—such as segments statistics and memory advisor information—will be disabled, the statistics captured in these snapshots may not be complete.
                        </p>
                        <div class="infoboxnotealso" id="GUID-26D359FA-F809-4444-907C-B5AFECD9AE29__GUID-9DC1D01A-774D-4DC0-A429-40884F4A4E90">
                           <p class="notep1">See Also:</p>
                           <p><a href="../refrn/STATISTICS_LEVEL.html#REFRN10214" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information about the <code class="codeph">STATISTICS_LEVEL</code> initialization parameter
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA188"></a><div class="props_rev_3"><a id="GUID-144711F9-85AE-4281-B548-3E01280F9A56" name="GUID-144711F9-85AE-4281-B548-3E01280F9A56"></a><h4 id="TGDBA-GUID-144711F9-85AE-4281-B548-3E01280F9A56" class="sect4"><span class="enumeration_section">6.2.2 </span>Managing Snapshots
                  </h4>
                  <div>
                     <p>By default, Oracle Database generates snapshots once every hour, and retains the statistics in the workload repository for 8 days. When necessary, you can manually create or drop snapshots and modify snapshot settings.</p>
                     <p>This section describes how to manage snapshots and contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-1BD04654-3D24-42DA-96A5-9FCAED77439D">User Interfaces for Managing Snapshots</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-70A79E56-18AB-4E85-9494-C0C8F02320AF">Creating Snapshots</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-542ED7D0-ABED-48F4-9D2F-5DADEB610249">Dropping Snapshots</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-62D01B30-2687-4821-A651-DC0E4AAC3B01" title="You can adjust the interval, retention period, and number of top SQL to flush for snapshot generation, but note that this can affect the precision of the Oracle Database diagnostic tools.">Modifying Snapshot Settings</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-144711F9-85AE-4281-B548-3E01280F9A56__GUID-E0B4A412-24D7-4C75-BB17-0DFB5643F7A7">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="gathering-database-statistics.html#GUID-A64AE148-DFB9-4B5F-BAA8-6A4A575E79DF">Snapshots</a>"</span> for information about snapshots
                        </p>
                     </div>
                  </div><a id="TGDBA189"></a><div class="props_rev_3"><a id="GUID-1BD04654-3D24-42DA-96A5-9FCAED77439D" name="GUID-1BD04654-3D24-42DA-96A5-9FCAED77439D"></a><h5 id="TGDBA-GUID-1BD04654-3D24-42DA-96A5-9FCAED77439D" class="sect5"><span class="enumeration_section">6.2.2.1 </span>User Interfaces for Managing Snapshots
                     </h5>
                     <div>
                        <p>The primary interface for managing snapshots is Oracle Enterprise Manager Cloud Control (Cloud Control). Whenever possible, you should manage snapshots using Cloud Control.</p>
                        <p>If Cloud Control is unavailable, then manage snapshots using the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package in the command-line interface. The DBA role is required to invoke the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> procedures.
                        </p>
                        <div class="infoboxnotealso" id="GUID-1BD04654-3D24-42DA-96A5-9FCAED77439D__GUID-B1F12ADB-CFAC-4100-9F8F-924398E299F3">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS093" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package
                           </p>
                        </div>
                     </div>
                  </div><a id="TGDBA665"></a><a id="TGDBA190"></a><div class="props_rev_3"><a id="GUID-70A79E56-18AB-4E85-9494-C0C8F02320AF" name="GUID-70A79E56-18AB-4E85-9494-C0C8F02320AF"></a><h5 id="TGDBA-GUID-70A79E56-18AB-4E85-9494-C0C8F02320AF" class="sect5"><span class="enumeration_section">6.2.2.2 </span>Creating Snapshots
                     </h5>
                     <div>
                        <div class="section">
                           <p>By default, Oracle Database automatically generates snapshots once every hour. However, you may want to manually create snapshots to capture statistics at times different from those of the automatically generated snapshots.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-70A79E56-18AB-4E85-9494-C0C8F02320AF__GUID-11EE5FFB-0937-467D-97E4-083D9F4CF15C">Creating Snapshots Using the Command-Line Interface</p>
                           <p>To manually create snapshots, use the <code class="codeph">CREATE_SNAPSHOT</code> procedure. The following example shows a <code class="codeph">CREATE_SNAPSHOT</code> procedure call.
                           </p><pre class="pre codeblock"><code>BEGIN
  DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT ();
END;
/
</code></pre><p>In this example, a snapshot is created immediately on the local database instance. To view information about an existing snapshot, use the <code class="codeph">DBA_HIST_SNAPSHOT</code> view.
                           </p>
                           <div class="infoboxnote" id="GUID-70A79E56-18AB-4E85-9494-C0C8F02320AF__GUID-F22D67F1-03C3-4785-96AD-2C9F4200D3E8">
                              <p class="notep1">Note:</p>
                              <p>You can specify value for the <code class="codeph">flush_level</code> parameter of the <code class="codeph">CREATE_SNAPSHOT</code> procedure to either TYPICAL or ALL. The default value for the flush level is TYPICAL.
                              </p>
                              <p>The flush level signifies the breadth and depth of the AWR statistics to be captured. If you want to capture all the AWR statistics, then set the flush level to ALL. If you want to skip few AWR statistics, such as, SQL statistics, segment statistics, and files and tablespace statistics for performance reasons, then set the flush level to TYPICAL.</p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-70A79E56-18AB-4E85-9494-C0C8F02320AF__GUID-4CA05C3A-7AF1-471A-95A0-DD44AD33365E">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS093" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../refrn/DBA_HIST_SNAPSHOT.html#REFRN23442" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information about the <code class="codeph">DBA_HIST_SNAPSHOT</code> view
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA666"></a><a id="TGDBA193"></a><div class="props_rev_3"><a id="GUID-542ED7D0-ABED-48F4-9D2F-5DADEB610249" name="GUID-542ED7D0-ABED-48F4-9D2F-5DADEB610249"></a><h5 id="TGDBA-GUID-542ED7D0-ABED-48F4-9D2F-5DADEB610249" class="sect5"><span class="enumeration_section">6.2.2.3 </span>Dropping Snapshots
                     </h5>
                     <div>
                        <div class="section">
                           <p>By default, Oracle Database automatically purges snapshots that have been stored in AWR for over 8 days. However, you may want to manually drop a range of snapshots to free up space.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-542ED7D0-ABED-48F4-9D2F-5DADEB610249__GUID-54EC04A7-E294-4222-94F9-310BF2AEC951">Dropping Snapshots Using the Command-Line Interface</p>
                           <p>To manually drop a range of snapshots, use the <code class="codeph">DROP_SNAPSHOT_RANGE</code> procedure. The following example shows a <code class="codeph">DROP_SNAPSHOT_RANGE</code> procedure call.
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPOSITORY.DROP_SNAPSHOT_RANGE (low_snap_id  =&gt; 22, 
                                                high_snap_id =&gt; 32, 
                                                dbid         =&gt; 3310949047);
END;
/
</pre><p>In the example, snapshots with snapshot IDs ranging from 22 to 32 are dropped immediately from the database instance with the database identifier of <code class="codeph">3310949047</code>. Any ASH data that were captured during this snapshot range are also purged.
                           </p>
                           <div class="infobox-tip" id="GUID-542ED7D0-ABED-48F4-9D2F-5DADEB610249__GUID-DA1A705C-E218-413A-923D-05723486B2E1">
                              <p class="notep1">Tip:</p>
                              <p>To determine which snapshots to drop, use the <code class="codeph">DBA_HIST_SNAPSHOT</code> view to review the existing snapshots
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-542ED7D0-ABED-48F4-9D2F-5DADEB610249__GUID-FAE546F9-C537-4811-B807-B24B3B746FF1">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS093" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../refrn/DBA_HIST_SNAPSHOT.html#REFRN23442" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information about the <code class="codeph">DBA_HIST_SNAPSHOT</code> view
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA667"></a><a id="TGDBA196"></a><div class="props_rev_3"><a id="GUID-62D01B30-2687-4821-A651-DC0E4AAC3B01" name="GUID-62D01B30-2687-4821-A651-DC0E4AAC3B01"></a><h5 id="TGDBA-GUID-62D01B30-2687-4821-A651-DC0E4AAC3B01" class="sect5"><span class="enumeration_section">6.2.2.4 </span>Modifying Snapshot Settings
                     </h5>
                     <div>
                        <p>You can adjust the interval, retention period, and number of top SQL to flush for snapshot generation, but note that this can affect the precision of the Oracle Database diagnostic tools.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-62D01B30-2687-4821-A651-DC0E4AAC3B01__GUID-6736420E-986A-42E7-B964-87BC39805DA3">Modifying Snapshot Settings Using the Command-Line Interface</p>
                           <p>You can modify snapshot settings using the following parameters of the <code class="codeph">DBMS_WORKLOAD_REPOSITORY.MODIFY_SNAPSHOT_SETTINGS</code> procedure:
                           </p>
                           <div class="tblformal" id="GUID-62D01B30-2687-4821-A651-DC0E4AAC3B01__TABLE_DBMS_MEMOPTIMIZE_SUBPROGRAMS">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table lists the parameters of the DBMS_WORKLOAD_REPOSITORY.MODIFY_SNAPSHOT_SETTINGS procedure that can be used to  modify snapshot settings." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d11457e1727">Parameter</th>
                                       <th align="left" valign="bottom" id="d11457e1730">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d11457e1735" headers="d11457e1727 ">
                                          <p><code class="codeph">INTERVAL</code> 
                                          </p>
                                       </td>
                                       <td align="left" valign="top" headers="d11457e1735 d11457e1730 ">
                                          <p>This setting affects how often the database automatically generates snapshots.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d11457e1744" headers="d11457e1727 ">
                                          <p><code class="codeph">RETENTION</code> 
                                          </p>
                                       </td>
                                       <td align="left" valign="top" headers="d11457e1744 d11457e1730 ">
                                          <p>This setting affects how long the database stores snapshots in AWR.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d11457e1753" headers="d11457e1727 ">
                                          <p><code class="codeph">TOPNSQL</code> 
                                          </p>
                                       </td>
                                       <td align="left" valign="top" headers="d11457e1753 d11457e1730 ">
                                          <p>This setting affects the number of top SQL to flush for each SQL criteria (elapsed time, CPU time, parse calls, sharable memory, and version count).</p>
                                          <p>This setting is not affected by the statistics/flush level and overrides the system default behavior for AWR SQL collection. It is possible to set the value for this setting to <code class="codeph">MAXIMUM</code> to capture the complete set of SQL in the shared SQL area, though doing so (or by setting the value to a very high number) may lead to possible space and performance issues because there will be more data to collect and store.
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>The following example shows how to modify snapshot settings using the <code class="codeph">DBMS_WORKLOAD_REPOSITORY.MODIFY_SNAPSHOT_SETTINGS</code> procedure:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPOSITORY.MODIFY_SNAPSHOT_SETTINGS( retention  =&gt; 43200, 
                                                     interval   =&gt; 30, 
                                                     topnsql    =&gt; 100, 
                                                     dbid       =&gt; 3310949047);
END;
/
</pre><p>In this example, snapshot settings for the database with the database identifier of <code class="codeph">3310949047</code> are modified as follows:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The retention period is specified as 43200 minutes (30 days).</p>
                              </li>
                              <li>
                                 <p>The interval between each snapshot is specified as 30 minutes.</p>
                              </li>
                              <li>
                                 <p>The number of top SQL to flush for each SQL criteria is specified as 100.</p>
                              </li>
                           </ul>
                           <p>To get information about the current snapshot settings for your database, use the <code class="codeph">DBA_HIST_WR_CONTROL</code> view as shown in the following example:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; select snap_interval, retention from DBA_HIST_WR_CONTROL; 

SNAP_INTERVAL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  RETENTION 
--------------------------------------- 
+00000 01:00:00.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +00008 00:00:00.0 
</pre><p>The <code class="codeph">snap_interval</code> and <code class="codeph">retention</code> values are displayed in the format:
                           </p><pre class="oac_no_warn" dir="ltr">+[days] [hours]:[minutes]:[seconds].[nanoseconds] 
</pre><div class="infoboxnotealso" id="GUID-62D01B30-2687-4821-A651-DC0E4AAC3B01__GUID-B599EB38-C7DD-454C-9703-43CB5036F49C">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS-GUID-E2B46878-1BDB-4789-8A21-016A625530F1" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY.MODIFY_SNAPSHOT_SETTINGS</code> procedure
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../refrn/DBA_HIST_WR_CONTROL.html#REFRN23462" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about the <code class="codeph">DBA_HIST_WR_CONTROL</code> view
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="TGDBA199"></a><div class="props_rev_3"><a id="GUID-44811EF8-D082-487F-8EEC-DA6E78700E68" name="GUID-44811EF8-D082-487F-8EEC-DA6E78700E68"></a><h4 id="TGDBA-GUID-44811EF8-D082-487F-8EEC-DA6E78700E68" class="sect4"><span class="enumeration_section">6.2.3 </span>Managing Baselines
                  </h4>
                  <div>
                     <p>By default, Oracle Database automatically maintains a system-defined moving window baseline. When necessary, you can manually create, drop, or rename a baseline and view the baseline threshold settings. Additionally, you can manually resize the window size of the moving window baseline.</p>
                     <p>This section describes how to manage baselines and contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-471AAB84-1CE9-456C-9FF0-59B448D087C3">User Interface for Managing Baselines</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-CDAB6DE7-F5A1-4D14-8FF0-954C86DFC3FF">Creating a Baseline</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-53D4F193-5EA5-4C6C-8547-A4A0B602D553">Dropping a Baseline</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-0E0D7ECE-A8C5-41C6-9CB7-69E99DB75193">Renaming a Baseline</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-4206BF49-A554-4104-8CB7-A9281CA1A9D8">Displaying Baseline Metrics</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-FFB695C6-E57A-487D-898A-EDAF0ECDD881">Resizing the Default Moving Window Baseline</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-44811EF8-D082-487F-8EEC-DA6E78700E68__GUID-1C5587B3-9325-4B92-BC74-AE023454EC16">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="gathering-database-statistics.html#GUID-C6401C10-F958-4339-99C2-3320BDAB4CEA">Baselines</a>"</span> for information about baselines
                        </p>
                     </div>
                  </div><a id="TGDBA200"></a><div class="props_rev_3"><a id="GUID-471AAB84-1CE9-456C-9FF0-59B448D087C3" name="GUID-471AAB84-1CE9-456C-9FF0-59B448D087C3"></a><h5 id="TGDBA-GUID-471AAB84-1CE9-456C-9FF0-59B448D087C3" class="sect5"><span class="enumeration_section">6.2.3.1 </span>User Interface for Managing Baselines
                     </h5>
                     <div>
                        <p>The primary interface for managing baselines is Oracle Enterprise Manager Cloud Control (Cloud Control). Whenever possible, manage baselines using Cloud Control.</p>
                        <p>If Cloud Control is unavailable, then manage baselines using the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package in the command-line interface. The DBA role is required to invoke the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> procedures.
                        </p>
                        <div class="infoboxnotealso" id="GUID-471AAB84-1CE9-456C-9FF0-59B448D087C3__GUID-1D5A96FA-83DA-446C-BBA1-FEF4A96261C9">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgdba&amp;id=TDPPT230" target="_blank"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a> for more information about managing baselines using Cloud Control
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS093" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="TGDBA668"></a><a id="TGDBA201"></a><div class="props_rev_3"><a id="GUID-CDAB6DE7-F5A1-4D14-8FF0-954C86DFC3FF" name="GUID-CDAB6DE7-F5A1-4D14-8FF0-954C86DFC3FF"></a><h5 id="TGDBA-GUID-CDAB6DE7-F5A1-4D14-8FF0-954C86DFC3FF" class="sect5"><span class="enumeration_section">6.2.3.2 </span>Creating a Baseline
                     </h5>
                     <div>
                        <div class="section">
                           <p>By default, Oracle Database automatically maintains a system-defined moving window baseline. However, you may want to manually create a fixed baseline that represents the system operating at an optimal level, so you can compare it with other baselines or snapshots captured during periods of poor performance.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>To create baselines using command-line interface, use the <code class="codeph">CREATE_BASELINE</code> procedure as shown in the following example:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
    DBMS_WORKLOAD_REPOSITORY.CREATE_BASELINE (start_snap_id =&gt; 270, 
                                              end_snap_id   =&gt; 280, 
                                              baseline_name =&gt; 'peak baseline', 
                                              dbid          =&gt; 3310949047, 
                                              expiration    =&gt; 30);
END;
/
</pre><p>In this example, a baseline is created on the database instance with the database identifier of <code class="codeph">3310949047</code> with the following settings:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The start snapshot sequence number is 270.</p>
                              </li>
                              <li>
                                 <p>The end snapshot sequence number is 280.</p>
                              </li>
                              <li>
                                 <p>The name of baseline is <code class="codeph">peak baseline</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The expiration of the baseline is 30 days.</p>
                              </li>
                           </ul>
                           <p>Oracle Database automatically assigns a unique ID to the new baseline when the baseline is created.</p>
                           <div class="infobox-tip" id="GUID-CDAB6DE7-F5A1-4D14-8FF0-954C86DFC3FF__GUID-9B17EAA9-2E95-4EDC-8D8B-4E225416089A">
                              <p class="notep1">Tip:</p>
                              <p>To determine the range of snapshots to include in a baseline, use the <code class="codeph">DBA_HIST_SNAPSHOT</code> view to review the existing snapshots
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-CDAB6DE7-F5A1-4D14-8FF0-954C86DFC3FF__GUID-05244353-23C0-418D-BFC9-83F919BAA297">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS093" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../refrn/DBA_HIST_SNAPSHOT.html#REFRN23442" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information about the <code class="codeph">DBA_HIST_SNAPSHOT</code> view
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA669"></a><a id="TGDBA204"></a><div class="props_rev_3"><a id="GUID-53D4F193-5EA5-4C6C-8547-A4A0B602D553" name="GUID-53D4F193-5EA5-4C6C-8547-A4A0B602D553"></a><h5 id="TGDBA-GUID-53D4F193-5EA5-4C6C-8547-A4A0B602D553" class="sect5"><span class="enumeration_section">6.2.3.3 </span>Dropping a Baseline
                     </h5>
                     <div>
                        <div class="section">
                           <p>To conserve disk space, consider periodically dropping a baseline that is no longer being used. The snapshots associated with a baseline are retained indefinitely until you explicitly drop the baseline or the baseline has expired.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>To drop a baseline using command-line interface, use the <code class="codeph">DROP_BASELINE</code> procedure as shown in the following example:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPOSITORY.DROP_BASELINE (baseline_name =&gt; 'peak baseline',
                                          cascade       =&gt; FALSE, 
                                          dbid          =&gt; 3310949047);
END;
/
</pre><p>In the example, the baseline <code class="codeph">peak baseline</code> is dropped from the database instance with the database identifier of <code class="codeph">3310949047</code> and the associated snapshots are preserved. 
                           </p>
                           <div class="infobox-tip" id="GUID-53D4F193-5EA5-4C6C-8547-A4A0B602D553__GUID-204E8C52-AC8B-4014-BE2F-564A93F3427F">
                              <p class="notep1">Tip:</p>
                              <p>To determine which baseline to drop, use the <code class="codeph">DBA_HIST_BASELINE</code> view to review the existing baselines.
                              </p>
                           </div>
                           <div class="infobox-tip" id="GUID-53D4F193-5EA5-4C6C-8547-A4A0B602D553__GUID-8BEDA752-4A26-47BE-A1E3-BC27EC9B8A4A">
                              <p class="notep1">Tip:</p>
                              <p>To drop the associated snapshots along with the baseline, set the <code class="codeph">cascade</code> parameter to <code class="codeph">TRUE</code>.
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-53D4F193-5EA5-4C6C-8547-A4A0B602D553__GUID-AF1A803D-238B-42D6-8D13-8D0138A043DC">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS093" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA670"></a><a id="TGDBA207"></a><div class="props_rev_3"><a id="GUID-0E0D7ECE-A8C5-41C6-9CB7-69E99DB75193" name="GUID-0E0D7ECE-A8C5-41C6-9CB7-69E99DB75193"></a><h5 id="TGDBA-GUID-0E0D7ECE-A8C5-41C6-9CB7-69E99DB75193" class="sect5"><span class="enumeration_section">6.2.3.4 </span>Renaming a Baseline
                     </h5>
                     <div>
                        <div class="section">
                           <p>To rename a baseline using command-line interface, use the <code class="codeph">RENAME_BASELINE</code> procedure. The following example shows a <code class="codeph">RENAME_BASELINE</code> procedure call.
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
    DBMS_WORKLOAD_REPOSITORY.RENAME_BASELINE (old_baseline_name =&gt; 'peak baseline', 
                                              new_baseline_name =&gt; 'peak mondays', 
                                              dbid              =&gt; 3310949047);
END;
/
</pre><p>In this example, the name of the baseline on the database instance with the database identifier of <code class="codeph">3310949047</code> is renamed from <code class="codeph">peak baseline</code> to <code class="codeph">peak mondays</code>.
                           </p>
                           <div class="infoboxnotealso" id="GUID-0E0D7ECE-A8C5-41C6-9CB7-69E99DB75193__GUID-D1CFEA9C-F6CE-4D93-8815-D278847F82A4">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS093" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA210"></a><div class="props_rev_3"><a id="GUID-4206BF49-A554-4104-8CB7-A9281CA1A9D8" name="GUID-4206BF49-A554-4104-8CB7-A9281CA1A9D8"></a><h5 id="TGDBA-GUID-4206BF49-A554-4104-8CB7-A9281CA1A9D8" class="sect5"><span class="enumeration_section">6.2.3.5 </span>Displaying Baseline Metrics
                     </h5>
                     <div>
                        <div class="section">
                           <p>When used with adaptive thresholds, a baseline contains AWR data that the database can use to compute metric threshold values.</p>
                           <p>To display the summary statistics for metric values in a baseline period using the command-line interface, use the <code class="codeph">SELECT_BASELINE_METRICS</code> function:
                           </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPOSITORY.SELECT_BASELINE_METRICS (baseline_name IN VARCHAR2,
                                                  dbid          IN NUMBER DEFAULT NULL,
                                                  instance_num  IN NUMBER DEFAULT NULL)
   RETURN awr_baseline_metric_type_table PIPELINED;
</pre><div class="infoboxnotealso" id="GUID-4206BF49-A554-4104-8CB7-A9281CA1A9D8__GUID-A9621E73-25C1-4763-B4B9-62A8DBE98516">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="gathering-database-statistics.html#GUID-6450312A-8894-4648-8DC3-83C83F6995F3">Adaptive Thresholds</a>"</span> for information about baseline metric thresholds
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS093" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA671"></a><a id="TGDBA213"></a><div class="props_rev_3"><a id="GUID-FFB695C6-E57A-487D-898A-EDAF0ECDD881" name="GUID-FFB695C6-E57A-487D-898A-EDAF0ECDD881"></a><h5 id="TGDBA-GUID-FFB695C6-E57A-487D-898A-EDAF0ECDD881" class="sect5"><span class="enumeration_section">6.2.3.6 </span>Resizing the Default Moving Window Baseline
                     </h5>
                     <div>
                        <div class="section">
                           <p>By default, Oracle Database automatically maintains a system-defined moving window baseline. The default window size for the system-defined moving window baseline is the current AWR retention period, which by default is 8 days. In certain circumstances, you may want to modify the window size of the default moving window baseline, such as increasing its size to more accurately compute threshold values for adaptive thresholds.</p>
                           <p>To modify the window size of the default moving window baseline using the command-line interface, use the <code class="codeph">MODIFY_BASELINE_WINDOW_SIZE</code> procedure as shown in the following example:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
    DBMS_WORKLOAD_REPOSITORY.MODIFY_BASELINE_WINDOW_SIZE (window_size =&gt; 30, 
                                                          dbid        =&gt; 3310949047);
END;
/
</pre><p>In this example, the default moving window is resized to 30 days on the database instance with the database identifier of <code class="codeph">3310949047</code>.
                           </p>
                           <div class="infoboxnote" id="GUID-FFB695C6-E57A-487D-898A-EDAF0ECDD881__GUID-A575D691-2ACE-4BB2-8005-995D18F7708D">
                              <p class="notep1">Note:</p>
                              <p>The window size must be set to a value that is equal to or less than the value of the AWR retention setting. To set a window size that is greater than the current AWR retention period, you must first increase the value of the <code class="codeph">retention</code> parameter as described in <span class="q">"<a href="gathering-database-statistics.html#GUID-62D01B30-2687-4821-A651-DC0E4AAC3B01" title="You can adjust the interval, retention period, and number of top SQL to flush for snapshot generation, but note that this can affect the precision of the Oracle Database diagnostic tools.">Modifying Snapshot Settings</a>"</span>.
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-FFB695C6-E57A-487D-898A-EDAF0ECDD881__GUID-B705F485-D11D-4DF2-BFC9-868C3AF63018">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="gathering-database-statistics.html#GUID-91C614C3-5B49-4DD9-90B5-A38F3D6AAD62">Moving Window Baselines</a>"</span> for information about moving window baselines
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS093" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="TGDBA216"></a><div class="props_rev_3"><a id="GUID-B5DB2422-951F-4D00-A473-AB6739ECC88B" name="GUID-B5DB2422-951F-4D00-A473-AB6739ECC88B"></a><h4 id="TGDBA-GUID-B5DB2422-951F-4D00-A473-AB6739ECC88B" class="sect4"><span class="enumeration_section">6.2.4 </span>Managing Baseline Templates
                  </h4>
                  <div>
                     <p>Baseline templates enable you to automatically create baselines to capture specified time periods in the future. This section describes how to manage baseline templates and contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-67905721-1F11-4F0C-8186-8EF56B94C53B">User Interfaces for Managing Baseline Templates</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-A4FA4563-BF8B-4EA6-8348-5D1CDB32664D">Creating a Single Baseline Template</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-2B940DB3-B11F-4A17-B0B9-AE4C83E01CD6">Creating a Repeating Baseline Template</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-8ED1483E-AED8-41D6-9E8A-E31379F5B174">Dropping a Baseline Template</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-B5DB2422-951F-4D00-A473-AB6739ECC88B__GUID-B9E842DF-3952-4183-AB4F-1A0AD5E222CD">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="gathering-database-statistics.html#GUID-BC0E898A-5AE3-4305-9F74-C24EE5F288DF">Baseline Templates</a>"</span> for information about baseline templates
                        </p>
                     </div>
                  </div><a id="TGDBA217"></a><div class="props_rev_3"><a id="GUID-67905721-1F11-4F0C-8186-8EF56B94C53B" name="GUID-67905721-1F11-4F0C-8186-8EF56B94C53B"></a><h5 id="TGDBA-GUID-67905721-1F11-4F0C-8186-8EF56B94C53B" class="sect5"><span class="enumeration_section">6.2.4.1 </span>User Interfaces for Managing Baseline Templates
                     </h5>
                     <div>
                        <p>The primary interface for managing baseline templates is Oracle Enterprise Manager Cloud Control (Cloud Control). Whenever possible, manage baseline templates using Cloud Control.</p>
                        <p>If Cloud Control is unavailable, then manage baseline templates using the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package in the command-line interface. The DBA role is required to invoke the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> procedures.
                        </p>
                        <div class="infoboxnotealso" id="GUID-67905721-1F11-4F0C-8186-8EF56B94C53B__GUID-D5E696CD-7320-4739-8C96-FC24002292AB">
                           <p class="notep1">See Also:</p>
                           <p><a href="../tdppt/resolving-performance-degradation-over-time.html#TDPPT230" target="_blank"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a> for more information about managing baseline templates using Cloud Control
                           </p>
                        </div>
                     </div>
                  </div><a id="TGDBA672"></a><a id="TGDBA218"></a><div class="props_rev_3"><a id="GUID-A4FA4563-BF8B-4EA6-8348-5D1CDB32664D" name="GUID-A4FA4563-BF8B-4EA6-8348-5D1CDB32664D"></a><h5 id="TGDBA-GUID-A4FA4563-BF8B-4EA6-8348-5D1CDB32664D" class="sect5"><span class="enumeration_section">6.2.4.2 </span>Creating a Single Baseline Template
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can use a single baseline template to create a baseline during a single, fixed time interval in the future. For example, you can create a single baseline template to generate a baseline that is captured on April 2, 2012 from 5:00 p.m. to 8:00 p.m.</p>
                           <p>To create a single baseline template using command-line interface, use the <code class="codeph">CREATE_BASELINE_TEMPLATE</code> procedure as shown in the following example:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
    DBMS_WORKLOAD_REPOSITORY.CREATE_BASELINE_TEMPLATE (start_time    =&gt; '2012-04-02 17:00:00 PST', 
                                                       end_time      =&gt; '2012-04-02 20:00:00 PST', 
                                                       baseline_name =&gt; 'baseline_120402', 
                                                       template_name =&gt; 'template_120402', 
                                                       expiration    =&gt; 30, 
                                                       dbid          =&gt; 3310949047);
END;
/
</pre><p>In this example, a baseline template named <code class="codeph">template_120402</code> is created that will generate a baseline named <code class="codeph">baseline_120402</code> for the time period from 5:00 p.m. to 8:00 p.m. on April 2, 2012 on the database with a database ID of <code class="codeph">3310949047</code>. The baseline will expire after 30 days.
                           </p>
                           <div class="infoboxnotealso" id="GUID-A4FA4563-BF8B-4EA6-8348-5D1CDB32664D__GUID-0D808D3D-9FA5-43CF-9AC1-51C432FC7161">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS093" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA673"></a><a id="TGDBA221"></a><div class="props_rev_3"><a id="GUID-2B940DB3-B11F-4A17-B0B9-AE4C83E01CD6" name="GUID-2B940DB3-B11F-4A17-B0B9-AE4C83E01CD6"></a><h5 id="TGDBA-GUID-2B940DB3-B11F-4A17-B0B9-AE4C83E01CD6" class="sect5"><span class="enumeration_section">6.2.4.3 </span>Creating a Repeating Baseline Template
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can use a repeating baseline template to automatically create baselines that repeat during a particular time interval over a specific period in the future. For example, you can create a repeating baseline template to generate a baseline that repeats every Monday from 5:00 p.m. to 8:00 p.m. for the year 2012.</p>
                           <p>To create a repeating baseline template using command-line, use the <code class="codeph">CREATE_BASELINE_TEMPLATE</code> procedure as shown in the following example:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
    DBMS_WORKLOAD_REPOSITORY.CREATE_BASELINE_TEMPLATE (day_of_week =&gt; 'monday', 
                                                       hour_in_day =&gt; 17,
                                                       duration =&gt; 3, expiration =&gt; 30,
                                                       start_time =&gt; '2012-04-02 17:00:00 PST', 
                                                       end_time =&gt; '2012-12-31 20:00:00 PST', 
                                                       baseline_name_prefix =&gt; 'baseline_2012_mondays_', 
                                                       template_name =&gt; 'template_2012_mondays',
                                                       dbid =&gt; 3310949047);
END;
/
</pre><p>In this example, a baseline template named <code class="codeph">template_2012_mondays</code> is created that will generate a baseline on every Monday from 5:00 p.m. to 8:00 p.m. beginning on April 2, 2012 at 5:00 p.m. and ending on December 31, 2012 at 8:00 p.m. on the database with a database ID of <code class="codeph">3310949047</code>. Each of the baselines will be created with a baseline name with the prefix <code class="codeph">baseline_2012_mondays_</code> and will expire after 30 days.
                           </p>
                           <div class="infoboxnotealso" id="GUID-2B940DB3-B11F-4A17-B0B9-AE4C83E01CD6__GUID-1DFB1349-D51B-42B3-B58A-F70FA388C4DC">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS093" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA674"></a><a id="TGDBA224"></a><div class="props_rev_3"><a id="GUID-8ED1483E-AED8-41D6-9E8A-E31379F5B174" name="GUID-8ED1483E-AED8-41D6-9E8A-E31379F5B174"></a><h5 id="TGDBA-GUID-8ED1483E-AED8-41D6-9E8A-E31379F5B174" class="sect5"><span class="enumeration_section">6.2.4.4 </span>Dropping a Baseline Template
                     </h5>
                     <div>
                        <div class="section">
                           <p>Periodically, you may want to remove baselines templates that are no longer used to conserve disk space.</p>
                           <p>To drop a baseline template using command-line, use the <code class="codeph">DROP_BASELINE_TEMPLATE</code> procedure as shown in the following example:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPOSITORY.DROP_BASELINE_TEMPLATE (template_name =&gt; 'template_2012_mondays',
                                                   dbid          =&gt; 3310949047);
END;
/
</pre><p>In this example, the baseline template named <code class="codeph">template_2012_mondays</code> is dropped from the database instance with the database identifier of <code class="codeph">3310949047</code>.
                           </p>
                           <div class="infobox-tip" id="GUID-8ED1483E-AED8-41D6-9E8A-E31379F5B174__GUID-2C608B95-160C-41CB-BC05-24D38FBD3932">
                              <p class="notep1">Tip:</p>
                              <p>To determine which baseline template to drop, use the <code class="codeph">DBA_HIST_BASELINE_TEMPLATE</code> view to review the existing baseline templates.
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-8ED1483E-AED8-41D6-9E8A-E31379F5B174__GUID-42343832-2C01-4BE4-8EAD-DF81C54084DC">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS093" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="TGDBA227"></a><div class="props_rev_3"><a id="GUID-F25470A0-C236-46DE-84F7-D68FBE1B0F12" name="GUID-F25470A0-C236-46DE-84F7-D68FBE1B0F12"></a><h4 id="TGDBA-GUID-F25470A0-C236-46DE-84F7-D68FBE1B0F12" class="sect4"><span class="enumeration_section">6.2.5 </span>Transporting Automatic Workload Repository Data to Another System
                  </h4>
                  <div>
                     <p>Oracle Database enables you to transport AWR data between systems. This is useful in cases where you want to use a separate system to perform analysis of AWR data, so as to reduce the overhead caused by performance analysis on a production system.</p>
                     <p>To transport AWR data from one system to another, first export the AWR data from the database on the source system, and then import it into the database on the target system.</p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;" id="GUID-F25470A0-C236-46DE-84F7-D68FBE1B0F12__UL_XGF_P5P_FGB">
                        <li>
                           <p><span class="q">"<a href="gathering-database-statistics.html#GUID-CC6A87BD-BFEA-4A1B-9FD1-3445DC11BE72">Exporting AWR Data</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="gathering-database-statistics.html#GUID-C916E80F-B819-4452-ABFC-18CA70D8A501">Importing AWR Data</a>"</span></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA229"></a><div class="props_rev_3"><a id="GUID-CC6A87BD-BFEA-4A1B-9FD1-3445DC11BE72" name="GUID-CC6A87BD-BFEA-4A1B-9FD1-3445DC11BE72"></a><h5 id="TGDBA-GUID-CC6A87BD-BFEA-4A1B-9FD1-3445DC11BE72" class="sect5"><span class="enumeration_section">6.2.5.1 </span>Exporting AWR Data
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">awrextr.sql</code> script exports AWR data for a range of snapshots from the database into a Data Pump export file. After it is created, you can transport this dump file to another database where you can import the exported AWR data. To run the <code class="codeph">awrextr.sql</code> script, you must be connected to the database as the <code class="codeph">SYS</code> user.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-CC6A87BD-BFEA-4A1B-9FD1-3445DC11BE72__GUID-FE226749-F63A-4EB3-9445-75162A29B9C5">To export AWR data:</p>
                           <ol>
                              <li>
                                 <p>At the SQL prompt, enter:</p><pre class="oac_no_warn" dir="ltr">@$ORACLE_HOME/rdbms/admin/awrextr.sql
</pre><p>A list of the databases in the AWR schema is displayed.</p>
                              </li>
                              <li>
                                 <p>Specify the database from which AWR data needs to be exported:</p><pre class="oac_no_warn" dir="ltr">Enter value for db_id: 1377863381
</pre><p>In this example, the database with the database identifier of <code class="codeph">1377863381</code> is specified.
                                 </p>
                              </li>
                              <li>
                                 <p>Specify the number of days for which you want to view all the snapshot IDs:</p><pre class="oac_no_warn" dir="ltr">Enter value for num_days: 2
</pre><p>In this example, all the snapshots captured in the last 2 days are displayed.</p>
                              </li>
                              <li>
                                 <p>Define the range of snapshots for which AWR data needs to be exported by specifying the beginning and the ending snapshot IDs:</p><pre class="oac_no_warn" dir="ltr">Enter value for begin_snap: 30
Enter value for end_snap: 40
</pre><p>In this example, the snapshot ID of 30 is specified as the beginning snapshot, and the snapshot ID of 40 is specified as the ending snapshot.</p>
                                 <p>A list of directory objects is displayed.</p>
                              </li>
                              <li>
                                 <p>Specify the directory object pointing to the directory where the export dump file needs to be stored:</p><pre class="oac_no_warn" dir="ltr">Enter value for directory_name: DATA_PUMP_DIR
</pre><p>In this example, the directory object <code class="codeph">DATA_PUMP_DIR</code> is specified that points to the directory <code class="codeph">ORACLE_HOME/rdbms/log</code>, where <code class="codeph">ORACLE_HOME</code> is <code class="codeph">/u01/app/oracle/product/<span class="codeinlineitalic">database_release_number</span>/dbhome_1</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>Specify a name for the export dump file without the file extension. By default, the file extension of <code class="codeph">.dmp</code> is used.
                                 </p><pre class="oac_no_warn" dir="ltr">Enter value for file_name: awrdata_30_40
</pre><p>In this example, an export dump file named <code class="codeph">awrdata_30_40.dmp</code> is created in the directory specified in the directory object <code class="codeph">DATA_PUMP_DIR</code>:
                                 </p><pre class="oac_no_warn" dir="ltr">Dump file set for SYS.SYS_EXPORT_TABLE_01 is:
/u01/app/oracle/product/<span class="italic">database_release_number</span>/dbhome_1/rdbms/log/awrdata_30_40.dmp
Job "SYS"."SYS_EXPORT_TABLE_01" successfully completed at 08:58:20
</pre><p>Depending on the amount of AWR data that must be exported, the AWR export operation may take a while to complete. After the dump file is created, you can use Data Pump to transport the file to another system.</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-CC6A87BD-BFEA-4A1B-9FD1-3445DC11BE72__GUID-A7D89CA3-8271-4786-8ADD-581E48D9C621">
                              <p class="notep1">See Also:</p>
                              <p><a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span class="italic">Oracle Database Utilities</span></a> for information about using Data Pump
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA230"></a><div class="props_rev_3"><a id="GUID-C916E80F-B819-4452-ABFC-18CA70D8A501" name="GUID-C916E80F-B819-4452-ABFC-18CA70D8A501"></a><h5 id="TGDBA-GUID-C916E80F-B819-4452-ABFC-18CA70D8A501" class="sect5"><span class="enumeration_section">6.2.5.2 </span>Importing AWR Data
                     </h5>
                     <div>
                        <div class="section">
                           <p>After the export dump file is transported to the target system, import the exported AWR data using the <code class="codeph">awrload.sql</code> script. The <code class="codeph">awrload.sql</code> script creates a staging schema where the snapshot data is transferred from the Data Pump file into the database. The data is then transferred from the staging schema into the appropriate AWR tables. To run the <code class="codeph">awrload.sql</code> script, you must be connected to the database as the <code class="codeph">SYS</code> user.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C916E80F-B819-4452-ABFC-18CA70D8A501__GUID-6B7D41A0-372A-433A-849E-4CB7C42AF3C2">To import AWR data:</p>
                           <ol>
                              <li>
                                 <p>At the SQL prompt, enter:</p><pre class="oac_no_warn" dir="ltr">@$ORACLE_HOME/rdbms/admin/awrload.sql
</pre><p>A list of directory objects is displayed.</p>
                              </li>
                              <li>
                                 <p>Specify the directory object pointing to the directory where the export dump file is located:</p><pre class="oac_no_warn" dir="ltr">Enter value for directory_name: DATA_PUMP_DIR
</pre><p>In this example, the directory object <code class="codeph">DATA_PUMP_DIR</code> is specified that points to the directory where the export dump file is located.
                                 </p>
                              </li>
                              <li>
                                 <p>Specify the name of the export dump file without the file extension. By default, the file extension of <code class="codeph">.dmp</code> is used.
                                 </p><pre class="oac_no_warn" dir="ltr">Enter value for file_name: awrdata_30_40
</pre><p>In this example, the export dump file named <code class="codeph">awrdata_30_40.dmp</code> is selected.
                                 </p>
                              </li>
                              <li>
                                 <p>Specify the name of the staging schema where the AWR data needs to be imported: </p><pre class="oac_no_warn" dir="ltr">Enter value for schema_name: AWR_STAGE
</pre><p>In this example, a staging schema named <code class="codeph">AWR_STAGE</code> is created.
                                 </p>
                              </li>
                              <li>
                                 <p>Specify the default tablespace for the staging schema:</p><pre class="oac_no_warn" dir="ltr">Enter value for default_tablespace: SYSAUX
</pre><p>In this example, the <code class="codeph">SYSAUX</code> tablespace is specified.
                                 </p>
                              </li>
                              <li>
                                 <p>Specify the temporary tablespace for the staging schema:</p><pre class="oac_no_warn" dir="ltr">Enter value for temporary_tablespace: TEMP
</pre><p>In this example, the <code class="codeph">TEMP</code> tablespace is specified.
                                 </p>
                              </li>
                              <li>
                                 <p>First the AWR data is imported into the <code class="codeph">AWR_STAGE</code> schema and then it is transferred to the AWR tables in the <code class="codeph">SYS</code> schema:
                                 </p><pre class="oac_no_warn" dir="ltr">Processing object type TABLE_EXPORT/TABLE/CONSTRAINT/CONSTRAINT
Completed 113 CONSTRAINT objects in 11 seconds
Processing object type TABLE_EXPORT/TABLE/CONSTRAINT/REF_CONSTRAINT
Completed 1 REF_CONSTRAINT objects in 1 seconds
Job "SYS"."SYS_IMPORT_FULL_03" successfully completed at 09:29:30
... Dropping AWR_STAGE user
End of AWR Load
</pre><p>Depending on the amount of AWR data that must be imported, the AWR import operation may take a while to complete. After AWR data is imported, the staging schema will be dropped automatically.</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="TGDBA231"></a><div class="props_rev_3"><a id="GUID-18E1B278-B3C5-4FE1-8E51-BC8878C439F5" name="GUID-18E1B278-B3C5-4FE1-8E51-BC8878C439F5"></a><h4 id="TGDBA-GUID-18E1B278-B3C5-4FE1-8E51-BC8878C439F5" class="sect4"><span class="enumeration_section">6.2.6 </span>Using Automatic Workload Repository Views
                  </h4>
                  <div>
                     <div class="section">
                        <p>Typically, you would view AWR data using Oracle Enterprise Manager Cloud Control (Cloud Control) or AWR reports. However, you can also view historical data stored in the AWR using the following <code class="codeph">DBA_HIST</code> views.
                        </p>
                        <div class="infoboxnote" id="GUID-18E1B278-B3C5-4FE1-8E51-BC8878C439F5__GUID-4EC90DF7-373B-485E-942C-3421F8BE5515">
                           <p class="notep1">Note:</p>
                           <p>In a multitenant environment, these <code class="codeph">DBA_HIST</code> views can also be interchanged with the <code class="codeph">AWR_ROOT</code> views and <code class="codeph">AWR_PDB</code> views at the CDB level and the PDB level respectively. For example, you can use the <code class="codeph">AWR_PDB_ACTIVE_SESS_HISTORY</code> view for retrieving the AWR data about the active session history at the PDB level, which is equivalent to the <code class="codeph">DBA_HIST_ACTIVE_SESS_HISTORY</code> view in an independent database in a non-multitenant environment. The <code class="codeph">AWR_PDB</code> views will not show any AWR data, if the PDB level snapshots have not been collected.
                           </p>
                        </div>
                        <div class="tblformalwide" id="GUID-18E1B278-B3C5-4FE1-8E51-BC8878C439F5__GUID-6F1462C5-A791-4887-B257-5EBAE3481209">
                           <p class="titleintable">Table 6-1 DBA_HIST Views</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="DBA_HIST Views" summary="This table lists the DBA_HIST views that can be used to view Automatic Workload Repository data." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d11457e3309">DBA_HIST View</th>
                                    <th align="left" valign="bottom" width="20%" id="d11457e3312">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3317" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_ACTIVE_SESS_HISTORY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3317 d11457e3312 ">
                                       <p>Displays the history of the contents of the in-memory active session history for recent system activity.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3325" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_BASELINE</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3325 d11457e3312 ">
                                       <p>Displays information about the baselines captured on the system, such as the time range of each baseline and the baseline type.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3334" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_BASELINE_DETAILS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3334 d11457e3312 ">
                                       <p>Displays details about a specific baseline.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3342" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_BASELINE_TEMPLATE</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3342 d11457e3312 ">
                                       <p>Displays information about the baseline templates used by the system to generate baselines.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3351" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_CON_SYS_TIME_MODEL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3351 d11457e3312 ">
                                       <p>Displays historical system time model statistics, including OLAP timed statistics.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3359" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_CON_SYSMETRIC_HIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3359 d11457e3312 ">
                                       <p>Displays the historical information about the system metric values.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3367" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_CON_SYSMETRIC_SUMM</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3367 d11457e3312 ">
                                       <p>Displays history of the statistical summary of all the metric values in the system metrics for the long duration (60 seconds) group.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3375" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_CON_SYSSTAT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3375 d11457e3312 ">
                                       <p>Displays historical system statistics, including OLAP kernel statistics.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3383" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_CON_SYSTEM_EVENT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3383 d11457e3312 ">
                                       <p>Displays historical information about the total waits for an event.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3391" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_DATABASE_INSTANCE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3391 d11457e3312 ">
                                       <p>Displays information about the database environment.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3399" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_DB_CACHE_ADVICE</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3399 d11457e3312 ">
                                       <p>Displays historical predictions of the number of physical reads for the cache size corresponding to each row.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3409" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_DISPATCHER</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3409 d11457e3312 ">
                                       <p>Displays historical information for each dispatcher process at the time of the snapshot.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3417" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_DYN_REMASTER_STATS</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3417 d11457e3312 ">
                                       <p>Displays statistical information about the dynamic remastering process.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3426" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_IOSTAT_DETAIL</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3426 d11457e3312 ">
                                       <p>Displays historical I/O statistics aggregated by file type and function.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3435" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_RSRC_PDB_METRIC</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3435 d11457e3312 ">
                                       <p>Displays historical information about the Resource Manager metrics for pluggable databases (PDBs) for the past one hour.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3443" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_RSRC_METRIC</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3443 d11457e3312 ">
                                       <p>Displays historical information about the Resource Manager metrics for consumer groups for the past one hour.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3452" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_SHARED_SERVER_SUMMARY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3452 d11457e3312 ">
                                       <p>Displays historical information for shared servers, such as shared server activity, common queues and dispatcher queues.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3460" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_SNAPSHOT</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3460 d11457e3312 ">
                                       <p>Displays information on snapshots in the system.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3469" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_SQL_PLAN</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3469 d11457e3312 ">
                                       <p>Displays the SQL execution plans.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3477" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_WR_CONTROL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3477 d11457e3312 ">
                                       <p>Displays the settings for controlling AWR.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3485" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_WR_SETTINGS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3485 d11457e3312 ">
                                       <p>Displays the settings and metadata of the AWR.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d11457e3493" headers="d11457e3309 ">
                                       <p><code class="codeph">DBA_HIST_PROCESS_WAITTIME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d11457e3493 d11457e3312 ">
                                       <p>Displays CPU and wait time for a process type.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-18E1B278-B3C5-4FE1-8E51-BC8878C439F5__GUID-B6CF0FB2-0A32-4DFD-A2B1-6B1E85557957">
                           <p class="notep1">See Also:</p>
                           <p><a href="../refrn/index.html" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about the <code class="codeph">DBA_HIST</code> views
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-D64AEB01-18FF-47EF-BB5C-A0611117D180" name="GUID-D64AEB01-18FF-47EF-BB5C-A0611117D180"></a><h4 id="TGDBA-GUID-D64AEB01-18FF-47EF-BB5C-A0611117D180" class="sect4"><span class="enumeration_section">6.2.7 </span>Managing Automatic Workload Repository in a Multitenant Environment
                  </h4>
                  <div>
                     <p>A centralized Automatic Workload Repository (AWR) stores the performance data related to CDB and PDBs in a multitenant environment.</p>
                     <p>CDBs and individual PDBs can store, view, and manage AWR data. You can take an AWR snapshot at the CDB level or at the PDB level.</p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-8DEFFB31-87F0-45D4-9E3E-C788AE88C5E7" title="In a multitenant environment, AWR data falls into different categories.">Categorization of AWR Data in a Multitenant Environment</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-2DF8836E-D682-44A6-90BE-ABEAE6F1E2F7">AWR Data Storage and Retrieval in a Multitenant Environment</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-4188466A-1206-4945-812B-A4A830DA61BC">Viewing AWR Data in a Multitenant Environment</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="props_rev_3"><a id="GUID-8DEFFB31-87F0-45D4-9E3E-C788AE88C5E7" name="GUID-8DEFFB31-87F0-45D4-9E3E-C788AE88C5E7"></a><h5 id="TGDBA-GUID-8DEFFB31-87F0-45D4-9E3E-C788AE88C5E7" class="sect5"><span class="enumeration_section">6.2.7.1 </span>Categorization of AWR Data in a Multitenant Environment
                     </h5>
                     <div>
                        <p>In a multitenant environment, AWR data falls into different categories.</p>
                        <p>The categories are as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>General AWR data</p>
                              <p>This data has no security implications. It is safe to be shared among all tenants in a CDB. This data is accessible by all PDBs and is captured in both CDB-level and PDB-level snapshots. Examples of general AWR data include the names of statistics, latches, and parameters.</p>
                           </li>
                           <li>
                              <p>AWR data for a CDB</p>
                              <p>This category aggregates data for all tenants in a CDB. This data contains the status of the database as a whole and is useful only for the CDB administrator. This data is captured only in the CDB-level snapshots.</p>
                           </li>
                           <li>
                              <p>AWR data for individual PDBs</p>
                              <p>This data describes the individual PDBs in a CDB. It shows container-specific data that represents the contribution of each individual PDB to the whole database instance. Therefore, this data is useful for both the CDB and the PDB administrators. This data is captured in both CDB-level and PDB-level snapshots.</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-2DF8836E-D682-44A6-90BE-ABEAE6F1E2F7" name="GUID-2DF8836E-D682-44A6-90BE-ABEAE6F1E2F7"></a><h5 id="TGDBA-GUID-2DF8836E-D682-44A6-90BE-ABEAE6F1E2F7" class="sect5"><span class="enumeration_section">6.2.7.2 </span>AWR Data Storage and Retrieval in a Multitenant Environment
                     </h5>
                     <div>
                        <p>This section describes the process of managing snapshots, and exporting and importing AWR data in a multitenant environment.</p>
                        <div class="section" id="GUID-2DF8836E-D682-44A6-90BE-ABEAE6F1E2F7__AWRDATASTORAGERETRIEVALMULTITENANTENVIRONMENT">
                           <p class="subhead3" id="GUID-2DF8836E-D682-44A6-90BE-ABEAE6F1E2F7__GUID-B6F05BE1-D2B4-4038-90BF-46860A16D82E">Managing Snapshots</p>
                           <p>Starting with Oracle Database 12<span class="italic">c</span> Release 2 (12.2), you can take an AWR snapshot at a CDB-level, that is, on a CDB root, as well as at a PDB-level, that is, on an individual PDB. By default, the CDB-level snapshot data is stored in the <code class="codeph">SYSAUX</code> tablespace of a CDB root and the PDB-level snapshot data is stored in the <code class="codeph">SYSAUX</code> tablespace of a PDB.
                           </p>
                           <p>A CDB-level snapshot contains information about the CDB statistics as well as all the PDB statistics, such as ASH, SQL statistics, and file statistics. The CDB administrator can perform CDB-specific management operations, such as setting AWR data retention period, setting snapshot schedule, taking manual snapshots, and purging snapshot data for a CDB root.</p>
                           <p>A PDB-level snapshot contains the PDB statistics and also some global statistics that can be useful for diagnosing the performance problems related to the PDB. The PDB administrator can perform PDB-specific management operations, such as setting AWR data retention period, setting snapshot schedule, taking manual snapshots, and purging snapshot data for a PDB.</p>
                           <p>The CDB-level and PDB-level snapshot operations, such as creating snapshots and purging snapshots, can be performed in either the <span class="italic">automatic mode</span> or the <span class="italic">manual mode</span>.
                           </p>
                           <p>The automatic snapshot operations are scheduled, so that they get executed automatically at a particular time. The <code class="codeph">AWR_PDB_AUTOFLUSH_ENABLED</code> initialization parameter enables you to specify whether to enable or disable automatic snapshots for all the PDBs in a CDB or for individual PDBs in a CDB. The automatic snapshot operations are enabled by default for a CDB, but are disabled by default for a PDB. To enable automatic snapshots for a PDB, the PDB administrator must connect to that PDB, set the value for the <code class="codeph">AWR_PDB_AUTOFLUSH_ENABLED</code> parameter to <code class="codeph">true</code>, and set the snapshot generation interval to a value greater than 0.
                           </p>
                           <div class="infoboxnotealso" id="GUID-2DF8836E-D682-44A6-90BE-ABEAE6F1E2F7__GUID-3FE0607E-E356-4A3D-BCC0-041F3B7C999B">
                              <p class="notep1">See Also:</p>
                              <p><span class="italic"><a href="../refrn/AWR_PDB_AUTOFLUSH_ENABLED.html#REFRN-GUID-08FA21BC-8FB1-4C51-BEEA-139C734D17A7" target="_blank">Oracle Database Reference</a></span> for more information about the <code class="codeph">AWR_PDB_AUTOFLUSH_ENABLED</code> initialization parameter
                              </p>
                           </div>
                           <p>The manual snapshot operations are explicitly initiated by users. The automatic snapshots and manual snapshots capture the same AWR information. Oracle recommends to generally use manual snapshots for a PDB. You should enable automatic snapshots only selectively for a PDB for performance reasons.</p>
                           <p>The primary interface for managing snapshots is Oracle Enterprise Manager Cloud Control (Cloud Control). If Cloud Control is not available, then you can use the procedures in the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package to manage snapshots. The Oracle DBA role is required to use the procedures in the <code class="codeph">DBMS_WORKLOAD_REPOSITORY</code> package. The SQL procedures to create, drop, and modify snapshots for a CDB root and a PDB are the same as that for a non-CDB. These SQL procedures perform their operations on the local database by default, if the target database information is not provided in their procedure call.
                           </p>
                           <div class="infoboxnote" id="GUID-2DF8836E-D682-44A6-90BE-ABEAE6F1E2F7__GUID-B45F3745-12B4-47CC-BC58-5C1735A16E70">
                              <p class="notep1">Note:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The PDB-level snapshots have unique snapshot IDs and are not related to the CDB-level snapshots.</p>
                                 </li>
                                 <li>
                                    <p>The plugging and unplugging operations of a PDB in a CDB do not affect the AWR data stored on a PDB.</p>
                                 </li>
                                 <li>
                                    <p>The CDB administrator can use the <span class="italic">PDB lockdown profiles</span> to disable the AWR functionality for a PDB by executing the following SQL statement on that PDB:
                                    </p><pre class="pre codeblock"><code>SQL&gt; alter lockdown profile <span class="italic">profile_name</span> disable feature=('AWR_ACCESS');</code></pre><p>Once the AWR functionality is disabled on a PDB, snapshot operations cannot be performed on that PDB.</p>
                                    <p>The AWR functionality can be enabled again for a PDB by executing the following SQL statement on that PDB:</p><pre class="pre codeblock"><code>SQL&gt; alter lockdown profile <span class="italic">profile_name</span> enable feature=('AWR_ACCESS');</code></pre></li>
                                 <li>
                                    <p>Snapshot data is stored in the <code class="codeph">SYSAUX</code> tablespace of a CDB and a PDB by default. Starting with Oracle Database 19c, you can specify any other tablespace to store snapshot data for a CDB and a PDB by modifying snapshot settings.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div class="infoboxnotealso" id="GUID-2DF8836E-D682-44A6-90BE-ABEAE6F1E2F7__GUID-2268F728-D798-4150-90C4-A98C0CCB6DD8">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="gathering-database-statistics.html#GUID-70A79E56-18AB-4E85-9494-C0C8F02320AF">Creating Snapshots</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="gathering-database-statistics.html#GUID-542ED7D0-ABED-48F4-9D2F-5DADEB610249">Dropping Snapshots</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="gathering-database-statistics.html#GUID-62D01B30-2687-4821-A651-DC0E4AAC3B01" title="You can adjust the interval, retention period, and number of top SQL to flush for snapshot generation, but note that this can affect the precision of the Oracle Database diagnostic tools.">Modifying Snapshot Settings</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgdba&amp;id=DBSEG-GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" target="_blank">Oracle Database Security Guide</a></span> for more information about the PDB lockdown profiles
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-2DF8836E-D682-44A6-90BE-ABEAE6F1E2F7__EXPORTINGANDIMPORTINGAWRDATA-0F8D6D91">
                           <p class="subhead3" id="GUID-2DF8836E-D682-44A6-90BE-ABEAE6F1E2F7__GUID-E4C594E4-F783-436A-8F02-FA34EFDD5255">Exporting and Importing AWR Data</p>
                           <p>The process of exporting and importing AWR data for a CDB root and a PDB in a multitenant environment is similar to the process of exporting and importing AWR data for a non-CDB.</p>
                           <div class="infoboxnotealso" id="GUID-2DF8836E-D682-44A6-90BE-ABEAE6F1E2F7__GUID-29F470DF-D284-4DC8-AB44-712EAAC5AA1E">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="gathering-database-statistics.html#GUID-CC6A87BD-BFEA-4A1B-9FD1-3445DC11BE72">Exporting AWR Data</a>"</span> for information about exporting AWR data from an Oracle database
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="gathering-database-statistics.html#GUID-C916E80F-B819-4452-ABFC-18CA70D8A501">Importing AWR Data</a>"</span> for information about importing AWR data into an Oracle database
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-4188466A-1206-4945-812B-A4A830DA61BC" name="GUID-4188466A-1206-4945-812B-A4A830DA61BC"></a><h5 id="TGDBA-GUID-4188466A-1206-4945-812B-A4A830DA61BC" class="sect5"><span class="enumeration_section">6.2.7.3 </span>Viewing AWR Data in a Multitenant Environment
                     </h5>
                     <div>
                        <p>You can view the AWR data in a multitenant environment using various Oracle Database reports and views.</p>
                        <div class="section" id="GUID-4188466A-1206-4945-812B-A4A830DA61BC__AWRREPORTS-310DB0DA">
                           <p class="subhead3" id="GUID-4188466A-1206-4945-812B-A4A830DA61BC__GUID-C632FF64-53E0-4E75-BE9B-CB1E5CB693E3">AWR Reports</p>
                           <p>The primary interface for generating AWR reports is Oracle Enterprise Manager Cloud Control (Cloud Control). Whenever possible, generate AWR reports using Cloud Control.</p>
                           <div class="infoboxnotealso" id="GUID-4188466A-1206-4945-812B-A4A830DA61BC__GUID-97A07075-AD34-42C0-A122-16B1D5BFA793">
                              <p class="notep1">See Also:</p>
                              <p><span class="italic"><a href="../tdppt/resolving-performance-degradation-over-time.html#TDPPT-GUID-71C2B1BD-6906-47B0-9FF5-BD3268F0C7C8" target="_blank">Oracle Database 2 Day + Performance Tuning Guide</a></span> for more information about generating AWR report using Cloud Control
                              </p>
                           </div>
                           <p>If Cloud Control is unavailable, then you can generate the AWR reports by running SQL scripts as described below. The DBA role is required to run these scripts.</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You can generate a CDB-specific AWR report from a CDB root that shows the <span class="italic">global system data</span> statistics for the whole multitenant environment. You can generate this AWR report using the SQL scripts described in the section <span class="q">"<a href="gathering-database-statistics.html#GUID-B7D1B185-4942-4934-9B21-A9010F82A4FF">Generating an AWR Report for the Local Database</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>You can generate a PDB-specific AWR report from a PDB that shows the statistics related to that PDB. You can generate this AWR report using the SQL scripts described in the section <span class="q">"<a href="gathering-database-statistics.html#GUID-B7D1B185-4942-4934-9B21-A9010F82A4FF">Generating an AWR Report for the Local Database</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>You can generate a PDB-specific AWR report from a CDB root that shows the statistics related to a specific PDB. You can generate this AWR report using the SQL scripts described in the section <span class="q">"<a href="gathering-database-statistics.html#GUID-EB7B34CD-6F4B-4010-9A8A-E1C7B8F2F851">Generating an AWR Report for a Specific Database</a>"</span>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-4188466A-1206-4945-812B-A4A830DA61BC__AWRVIEWS-310DC118">
                           <p class="subhead3" id="GUID-4188466A-1206-4945-812B-A4A830DA61BC__GUID-7ADD0370-23FE-4436-860E-8861B9EC1EFD">AWR Views</p>
                           <p>The following table lists the Oracle Database views for accessing the AWR data stored on the CDB root and the individual PDBs in a multitenant environment.</p>
                           <div class="infoboxnotealso" id="GUID-4188466A-1206-4945-812B-A4A830DA61BC__GUID-C6461361-1D71-4A1A-AE18-D4756FBF4069">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="gathering-database-statistics.html#GUID-18E1B278-B3C5-4FE1-8E51-BC8878C439F5">Using Automatic Workload Repository Views</a>"</span> for more information about these AWR views
                              </p>
                           </div>
                           <div class="tblformalwide" id="GUID-4188466A-1206-4945-812B-A4A830DA61BC__GUID-732FDECC-3C26-4DDF-A8F3-212F4EE1FA11">
                              <p class="titleintable">Table 6-2 Views for Accessing AWR Data in a Multitenant Environment</p>
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="Views for Accessing AWR Data in a Multitenant Environment" summary="This table lists the Oracle Database views that can be used to access the AWR data stored on the CDB root and the individual PDBs in a multitenant environment." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d11457e3970">Views</th>
                                       <th align="left" valign="bottom" width="20%" id="d11457e3972">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d11457e3976" headers="d11457e3970 ">
                                          <p><code class="codeph">DBA_HIST</code> Views
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d11457e3976 d11457e3972 ">
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p>The <code class="codeph">DBA_HIST</code> views show the AWR data present only on the CDB root.
                                                </p>
                                             </li>
                                             <li>
                                                <p>When the <code class="codeph">DBA_HIST</code> views are accessed from a CDB root, they show all the AWR data stored on the CDB root.
                                                </p>
                                             </li>
                                             <li>
                                                <p>When the <code class="codeph">DBA_HIST</code> views are accessed from a PDB, they show the subset of the CDB root AWR data, which is specific to that PDB.
                                                </p>
                                             </li>
                                          </ul>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d11457e4002" headers="d11457e3970 ">
                                          <p><code class="codeph">DBA_HIST_CON</code> Views
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d11457e4002 d11457e3972 ">
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p>The <code class="codeph">DBA_HIST_CON</code> views are similar to the <code class="codeph">DBA_HIST</code> views, but they provide more fine grained information about each container, and thus, they have more data than the <code class="codeph">DBA_HIST</code> views.
                                                </p>
                                             </li>
                                             <li>
                                                <p>The <code class="codeph">DBA_HIST_CON</code> views show the AWR data present only on the CDB root.
                                                </p>
                                             </li>
                                             <li>
                                                <p>When the <code class="codeph">DBA_HIST_CON</code> views are accessed from a CDB root, they show all the AWR data stored on the CDB root.
                                                </p>
                                             </li>
                                             <li>
                                                <p>When the <code class="codeph">DBA_HIST_CON</code> views are accessed from a PDB, they show the subset of the CDB root AWR data, which is specific to that PDB.
                                                </p>
                                             </li>
                                          </ul>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d11457e4040" headers="d11457e3970 ">
                                          <p><code class="codeph">AWR_ROOT</code> Views
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d11457e4040 d11457e3972 ">
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p>The <code class="codeph">AWR_ROOT</code> views are available starting with Oracle Database 12<span class="italic">c</span> Release 2 (12.2) and are available only in the Multitenant environment.
                                                </p>
                                             </li>
                                             <li>
                                                <p>The <code class="codeph">AWR_ROOT</code> views are equivalent to the <code class="codeph">DBA_HIST</code> views.
                                                </p>
                                             </li>
                                             <li>
                                                <p>The <code class="codeph">AWR_ROOT</code> views show the AWR data present only on the CDB root.
                                                </p>
                                             </li>
                                             <li>
                                                <p>When the <code class="codeph">AWR_ROOT</code> views are accessed from a CDB root, they show all the AWR data stored on the CDB root.
                                                </p>
                                             </li>
                                             <li>
                                                <p>When the <code class="codeph">AWR_ROOT</code> views are accessed from a PDB, they show the subset of the CDB root AWR data, which is specific to that PDB.
                                                </p>
                                             </li>
                                          </ul>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d11457e4084" headers="d11457e3970 ">
                                          <p><code class="codeph">AWR_PDB</code> Views
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d11457e4084 d11457e3972 ">
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p>The <code class="codeph">AWR_PDB</code> views are available starting with Oracle Database 12<span class="italic">c</span> Release 2 (12.2).
                                                </p>
                                             </li>
                                             <li>
                                                <p>The <code class="codeph">AWR_PDB</code> views show the local AWR data present on a CDB root or a PDB.
                                                </p>
                                             </li>
                                             <li>
                                                <p>When the <code class="codeph">AWR_PDB</code> views are accessed from a CDB root, they show the AWR data stored on the CDB root.
                                                </p>
                                             </li>
                                             <li>
                                                <p>When the <code class="codeph">AWR_PDB</code> views are accessed from a PDB, they show the AWR data stored on that PDB.
                                                </p>
                                             </li>
                                          </ul>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d11457e4119" headers="d11457e3970 ">
                                          <p><code class="codeph">CDB_HIST</code> Views
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d11457e4119 d11457e3972 ">
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p>The <code class="codeph">CDB_HIST</code> views show the AWR data stored on the PDBs.
                                                </p>
                                             </li>
                                             <li>
                                                <p>When the <code class="codeph">CDB_HIST</code> views are accessed from a CDB root, they show the union of the AWR data stored on all the PDBs.
                                                </p>
                                             </li>
                                             <li>
                                                <p>When the <code class="codeph">CDB_HIST</code> views are accessed from a PDB, they show the AWR data stored on that PDB.
                                                </p>
                                             </li>
                                          </ul>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-309C107F-DC42-4119-9904-9504E9748B84" name="GUID-309C107F-DC42-4119-9904-9504E9748B84"></a><h4 id="TGDBA-GUID-309C107F-DC42-4119-9904-9504E9748B84" class="sect4"><span class="enumeration_section">6.2.8 </span>Managing Automatic Workload Repository in Active Data Guard Standby Databases
                  </h4>
                  <div>
                     <p>Starting with Oracle Database 12<span class="italic">c</span> Release 2 (12.2), Automatic Workload Repository (AWR) data can be captured for Active Data Guard (ADG) standby databases. This feature enables analyzing any performance-related issues for ADG standby databases.
                     </p>
                     <p>AWR snapshots for ADG standby databases are called <span class="italic">remote snapshots</span>. A database node, called <span class="italic">destination</span>, is responsible for storing snapshots that are collected from remote ADG standby database nodes, called <span class="italic">sources</span>.
                     </p>
                     <p>A destination can be either an ADG primary database or a non-ADG database. If a destination is an ADG primary database, then it is also a source database, and its snapshots are <span class="italic">local snapshots</span>.
                     </p>
                     <p>A source is identified by a unique name or <span class="italic">source name</span> by which it is known to a destination.
                     </p>
                     <p>You can assign a name to a destination node or a source node during its configuration. Otherwise, the value of the initialization parameter <code class="codeph">DB_UNIQUE_NAME</code> is assigned as a name for a node.
                     </p>
                     <p>Each source must have two database links, a destination-to-source database link and a source-to-destination database link. These database links are configured for each source during the ADG deployment. You must manually reconfigure these database links after certain ADG events, such as failovers, switchovers, and addition and removal of hosts, so that the database applications continue functioning properly after these events.</p>
                     <p>You can take the remote snapshots either automatically at scheduled time intervals or manually. The remote snapshots are always started by the destination node. After the destination initiates the snapshot creation process, sources <span class="italic">push</span> their snapshot data to the destination using database links. The snapshot data or <span class="italic">AWR data</span> stored on the destination can be accessed using AWR reports, Oracle Database import and export functions, and user-defined queries. The Automatic Database Diagnostic Monitor (ADDM) application can use the AWR data for analyzing any database performance-related issues.
                     </p>
                     <div class="section" id="GUID-309C107F-DC42-4119-9904-9504E9748B84__DESTINATIONDATABASERESPONSIBILITIES-350A67B5">
                        <p class="subhead3" id="GUID-309C107F-DC42-4119-9904-9504E9748B84__DESTINATIONDATABASERESPONSIBILITIES-FAC9F5C1">Destination Database Responsibilities</p>
                        <p>A destination database manages the following tasks:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Registering sources</p>
                           </li>
                           <li>
                              <p>Assigning unique identifier for each source</p>
                           </li>
                           <li>
                              <p>Creating database links between destination and sources</p>
                           </li>
                           <li>
                              <p>Scheduling and initiating automatic snapshots for sources</p>
                           </li>
                           <li>
                              <p>Managing destination workload by coordinating snapshots among sources</p>
                           </li>
                           <li>
                              <p>Managing snapshot settings for each source</p>
                           </li>
                           <li>
                              <p>Assigning identifiers to newly generated snapshots</p>
                           </li>
                           <li>
                              <p>Partitioning the AWR tables</p>
                           </li>
                           <li>
                              <p>Storing the performance data in the local AWR</p>
                           </li>
                           <li>
                              <p>Purging the AWR data of destination and sources</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-309C107F-DC42-4119-9904-9504E9748B84__SOURCEDATABASERESPONSIBILITIES-350A828E">
                        <p class="subhead3" id="GUID-309C107F-DC42-4119-9904-9504E9748B84__SOURCEDATABASERESPONSIBILITIES-FAC9F1EF">source Database Responsibilities</p>
                        <p>A source database manages the following tasks:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Storing its performance data in the local AWR</p>
                           </li>
                           <li>
                              <p>Sending its AWR data to the destination</p>
                           </li>
                           <li>
                              <p>Responding to service requests from the destination</p>
                           </li>
                           <li>
                              <p>Extracting the AWR data from the destination</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-309C107F-DC42-4119-9904-9504E9748B84__MAJORSTEPSFORMANAGINGAWRINADGSTANDB-FAC9FEE2">Major Steps for Managing AWR in ADG Standby Databases</p>
                        <p>The following are the major steps for managing AWR in ADG standby databases:</p>
                        <ol>
                           <li>
                              <p><a href="gathering-database-statistics.html#GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E">Configuring the Remote Management Framework (RMF)</a></p>
                           </li>
                           <li>
                              <p><a href="gathering-database-statistics.html#GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44">Managing Snapshots for Active Data Guard Standby Databases</a></p>
                           </li>
                           <li>
                              <p><a href="gathering-database-statistics.html#GUID-751B53F2-0101-4AEE-8709-1978120249E1">Viewing AWR Data in Active Data Guard Standby Databases</a></p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-309C107F-DC42-4119-9904-9504E9748B84__GUID-2DFE1B4C-D585-473C-B9E7-FBAB9E2ABB6A">
                           <p class="notep1">Note:</p>
                           <p>Before you start configuring AWR for ADG environment, make sure that the database links for all the ADG standby databases are already configured during the ADG deployment.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="props_rev_3"><a id="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E" name="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E"></a><h5 id="TGDBA-GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E" class="sect5"><span class="enumeration_section">6.2.8.1 </span>Configuring the Remote Management Framework (RMF)
                     </h5>
                     <div>
                        <p>The Remote Management Framework (RMF) is an architecture for capturing performance statistics (AWR data) in an Oracle database.</p>
                        <div class="infoboxnote" id="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E__GUID-CFA6D1CA-F33D-424D-88D9-10E8F2DBC56E">
                           <p class="notep1">Note:</p>
                           <p>RMF can be used only for ADG standby databases and standalone databases.</p>
                        </div>
                        <p>The RMF <span class="italic">topology</span> is a centralized architecture that consists of all the participating database nodes along with their metadata and connection information. The RMF topology has one database node, called <span class="italic">destination</span>, which is responsible for storing and managing performance data (AWR data) that is collected from the database nodes, called <span class="italic">sources</span>. A <span class="italic">candidate destination</span> is a source that can be configured in such way that it can replace the original destination, when the original destination is unavailable or is downgraded. A topology can have only one destination, and one or more candidate destinations. 
                        </p>
                        <p>Each database node in a topology must be assigned a unique name. This can be done using the procedure <code class="codeph">DBMS_UMF.configure_node()</code> during configuring a node. If the name for a node is not provided in this procedure, then the value of the initialization parameter <code class="codeph">DB_UNIQUE_NAME</code> is used as the name for a node.
                        </p>
                        <p>The database nodes in a topology communicate with each other using database links. The database links between destination to source and source to destination must be created for each ADG standby database during the ADG deployment.</p>
                        <p>A <span class="italic">service</span> is an application running on a topology. For example, an AWR service running on a topology enables remote AWR snapshots for all the database nodes in that topology.
                        </p>
                        <p>The RMF APIs are the PL/SQL procedures and functions that can be used to configure the RMF topology. The RMF APIs are declared in the PL/SQL package <code class="codeph">DBMS_UMF</code>.
                        </p>
                        <div class="infoboxnote" id="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E__GUID-3AB107A9-FEAE-4522-A3CE-8EDECE532AB1">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">SYS$UMF</code> user is the default database user that has all the privileges to access the system-level RMF views and tables. All the AWR related operations in RMF can be performed only by the <code class="codeph">SYS$UMF</code> user. The <code class="codeph">SYS$UMF</code> user is locked by default and it must be unlocked before deploying the RMF topology.
                                 </p>
                              </li>
                              <li>
                                 <p>You need to provide password for the <code class="codeph">SYS$UMF</code> user when creating database links in the RMF topology. If the password for the <code class="codeph">SYS$UMF</code> user is changed, all the database links in the RMF topology must be recreated.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E__GUID-F64DAC41-23DD-433B-9D29-5F8A4E0115FC">
                           <p class="notep1">See Also:</p>
                           <p><span class="italic"><a href="../arpls/DBMS_UMF.html#ARPLS-GUID-9B44C2DE-512A-4B55-B91E-9828FCF04BFD" target="_blank">Oracle Database PL/SQL Packages and Types Reference</a></span> for more information about the <code class="codeph">DBMS_UMF</code> package
                           </p>
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E__GUID-401A34FB-DDA2-4E4E-8127-AFE33E3DF9EA">Setting Up the RMF Topology</p>
                           <p>You need to set up the RMF topology for collecting performance statistics for an Oracle database.</p>
                           <p>The following are the prerequisites for setting up the RMF topology:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You must create destination to source and source to destination database links for all the database nodes to be registered in the RMF topology. This setup should be done during the ADG deployment.</p>
                              </li>
                           </ul>
                           <p>The following are the steps for setting up the RMF topology:</p>
                           <ol>
                              <li>
                                 <p>Configure database nodes to add to the topology.</p>
                              </li>
                              <li>
                                 <p>Create the topology.</p>
                              </li>
                              <li>
                                 <p>Register database nodes with the topology.</p>
                              </li>
                              <li>
                                 <p>(Optional) Register database links between the nodes in the topology. This configuration is required when a destination becomes unavailable and a candidate destination needs to connect to the remaining nodes in the topology using database links.</p>
                              </li>
                           </ol>
                           <p><span class="bold">Example for Setting Up the RMF Topology</span></p>
                           <p>In this example, the three database nodes <code class="codeph">T</code>, <code class="codeph">S0</code>, and <code class="codeph">S1</code> are added to the topology <code class="codeph">Topology_1</code>. Node <code class="codeph">T</code> is the destination node and nodes <code class="codeph">S0</code> and <code class="codeph">S1</code> are the source nodes. Node <code class="codeph">S1</code> is a candidate destination, that is, when the original destination <code class="codeph">T</code> is not available, node <code class="codeph">S1</code> becomes the new destination. The AWR service is enabled for all the sources in the topology.
                           </p>
                           <p>Assume that the following database links are already created during the ADG deployment:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">DBLINK_T_to_S0</code>: Database link from <code class="codeph">T</code> to <code class="codeph">S0</code>.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DBLINK_T_to_S1</code>: Database link from <code class="codeph">T</code> to <code class="codeph">S1</code>.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DBLINK_S0_to_T</code>: Database link from <code class="codeph">S0</code> to <code class="codeph">T</code>.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DBLINK_S0_to_S1</code>: Database link from <code class="codeph">S0</code> to <code class="codeph">S1</code>.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DBLINK_S1_to_T</code>: Database link from <code class="codeph">S1</code> to <code class="codeph">T</code>.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DBLINK_S1_to_S0</code>: Database link from <code class="codeph">S1</code> to <code class="codeph">S0</code>.
                                 </p>
                              </li>
                           </ul>
                           <p>The following is a sample code for setting up the RMF topology:</p><pre class="pre codeblock"><code>/* Configure the nodes T, S0, and S1 by executing these procedures */

/* Execute this procedure on node T */
SQL&gt; exec DBMS_UMF.configure_node ('T');

/* Execute this procedure on node S0 */
SQL&gt; exec DBMS_UMF.configure_node ('S0', 'DBLINK_S0_to_T');

/* Execute this procedure on node S1 */
SQL&gt; exec DBMS_UMF.configure_node ('S1', 'DBLINK_S1_to_T');

/* Execute all the following procedures on the destination node T */

/* Create the topology 'Topology_1' */
SQL&gt; exec DBMS_UMF.create_topology ('Topology_1');

/* Register the node S0 with the topology 'Topology_1' */
SQL&gt; exec DBMS_UMF.register_node ('Topology_1',
                                  'S0',
                                  'DBLINK_T_to_S0',
                                  'DBLINK_S0_to_T',
                                  'TRUE'  /* Set it as a source */,
                                  'FALSE' /* Set it as <span class="italic">not</span> a candidate destination */);

/* Register the node S1 with the topology 'Topology_1' */
SQL&gt; exec DBMS_UMF.register_node ('Topology_1',
                                  'S1',
                                  'DBLINK_T_to_S1',
                                  'DBLINK_S1_to_T', 
                                  'TRUE'  /* Set it as a source */,
                                  'TRUE'  /* Set it as a candidate destination */);

/* Register the database links between the nodes S0 and S1 in the topology 'Topology_1'. 
 * When destination T is unavailable at the time of failover, the source S0 can connect
 * to the candidate destination S1 using this database link.
 */
SQL&gt; exec DBMS_UMF.create_link ('Topology_1',
                                'S0',
                                'S1',
                                'DBLINK_S0_to_S1',
                                'DBLINK_S1_to_S0');

/* Enable the AWR service on the node S0 in the topology 'Topology_1' */
SQL&gt; exec DBMS_WORKLOAD_REPOSITORY.register_remote_database(node_name=&gt;'S0');

/* Enable the AWR service on the node S1 in the topology 'Topology_1' */
SQL&gt; exec DBMS_WORKLOAD_REPOSITORY.register_remote_database(node_name=&gt;'S1');</code></pre><div class="infoboxnote" id="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E__GUID-D4ACE19A-10D4-482D-9853-05527529FA54">
                              <p class="notep1">Note:</p>
                              <p>The AWR service can be disabled for a node using the procedure:</p><pre class="pre codeblock"><code>SQL&gt; exec DBMS_WORKLOAD_REPOSITORY.unregister_remote_database(<span class="italic">node_name</span>)</code></pre></div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E__GUID-68BE322A-A524-4480-8767-41A306FA8A5B">Managing ADG Role Transition</p>
                           <p>An ADG role transition occurs when the ADG Primary or original destination fails (<span class="italic">failover</span> event) or when an ADG standby database or candidate destination takes over the role of the ADG Primary during the maintenance phase (<span class="italic">switchover</span> event).
                           </p>
                           <p>Oracle recommends that you perform the following configuration steps before making the role change, that is, before making the candidate destination as the new destination due to the failover or switchover event:</p>
                           <ol>
                              <li>
                                 <p>Create database links between the sources and the candidate destination. This configuration must be done for all the sources by executing the following procedure on each source:</p><pre class="pre codeblock"><code>SQL&gt; EXEC DBMS_UMF.CREATE_LINK (<span class="italic">topology name</span>, 
                                <span class="italic">source name</span>, 
                                <span class="italic">candidate destination name</span>,
                                <span class="italic">source to candidate destination database link</span>,
                                <span class="italic">candidate destination to source database link</span>);</code></pre><div class="infoboxnote" id="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E__GUID-82D9B61A-65FB-41B3-8AD7-868694C270E1">
                                    <p class="notep1">Note:</p>
                                    <p>Oracle recommends that you create database links among all the nodes in a topology to avoid any unanticipated issues that may arise at the time of role change.</p>
                                 </div>
                              </li>
                              <li>
                                 <p>Take an AWR snapshot on the candidate destination.</p>
                                 <div class="infoboxnote" id="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E__GUID-A1EA62F8-E849-4800-A5D9-9DEAF568E241">
                                    <p class="notep1">Note:</p>
                                    <p>To generate an AWR report for the candidate destination after the role change, take at least one snapshot for the candidate destination before the role change.</p>
                                 </div>
                              </li>
                              <li>
                                 <p>Restart the candidate destination as well as all the sources.</p>
                              </li>
                           </ol>
                           <p>After completing the preceding configuration steps, you can make the role change by executing the following procedure on the candidate destination:</p><pre class="pre codeblock"><code>SQL&gt; EXEC DBMS_UMF.SWITCH_DESTINATION(<span class="italic">topology name</span>, force_switch=&gt;FALSE);</code></pre><div class="infoboxnote" id="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E__GUID-80993672-E6CE-4402-9763-93A555B85390">
                              <p class="notep1">Note:</p>
                              <p>Oracle recommends that you do not take any snapshots for the sources during the role transition period. After the role change process is complete by executing the <code class="codeph">DBMS_UMF.SWITCH_DESTINATION</code> procedure, you can take snapshots for the sources. If you want to generate AWR reports for the sources after the role change, then you must choose only those snapshots that were taken after the role change.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E__GUID-2FBCD71F-A170-478C-A84C-768A871FE3C5">Getting the Details of Registered RMF Topologies</p>
                           <p>The RMF views described below show the configuration information about all the registered RMF topologies in a multi-database environment.</p>
                           <div class="tblformal" id="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E__GUID-F16EDAB9-C97A-4136-AF63-178206DE182A">
                              <p class="titleintable">Table 6-3 RMF Views</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="RMF Views" summary="This table lists the RMF views." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d11457e4662">RMF View</th>
                                       <th align="left" valign="bottom" width="20%" id="d11457e4665">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d11457e4670" headers="d11457e4662 ">
                                          <p><code class="codeph">DBA_UMF_TOPOLOGY</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d11457e4670 d11457e4665 ">
                                          <p>Shows all the registered topologies in a multi-database environment. Each topology has a topology name, a destination ID, and topology state. To enable RMF, the topology state of at least one topology should be <code class="codeph">ACTIVE</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d11457e4681" headers="d11457e4662 ">
                                          <p><code class="codeph">DBA_UMF_REGISTRATION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d11457e4681 d11457e4665 ">
                                          <p>Shows all the registered nodes in all the topologies in a multi-database environment.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d11457e4689" headers="d11457e4662 ">
                                          <p><code class="codeph">DBA_UMF_LINK</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d11457e4689 d11457e4665 ">
                                          <p>Shows all the registered database links in all the topologies in a multi-database environment.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d11457e4697" headers="d11457e4662 ">
                                          <p><code class="codeph">DBA_UMF_SERVICE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d11457e4697 d11457e4665 ">
                                          <p>Shows all the registered services in all the topologies in a multi-database environment.</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnotealso" id="GUID-E1369092-DA6B-4CF4-B286-69D4A3BDFA1E__GUID-5D89A840-893A-4BE4-82EC-F4B9209C137F">
                              <p class="notep1">See Also:</p>
                              <p><span class="italic"><a href="../refrn/index.html" target="_blank">Oracle Database Reference</a></span> for more information about these RMF views
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44" name="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44"></a><h5 id="TGDBA-GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44" class="sect5"><span class="enumeration_section">6.2.8.2 </span>Managing Snapshots for Active Data Guard Standby Databases
                     </h5>
                     <div>
                        <p>The AWR snapshots for ADG standby databases are called <span class="italic">remote</span> snapshots. Similar to local AWR snapshots, remote AWR snapshots can be generated automatically at scheduled time intervals or can be generated manually. The <span class="italic">Push-on-Demand</span> mechanism is used for generating remote snapshots, where the snapshots generation process is initiated by the destination, which then instructs the sources to start <span class="italic">pushing</span> the snapshot data to the destination over database links. The destination periodically initiates automatic snapshots based on the snapshot time interval configured for each of the sources.
                        </p>
                        <div class="infoboxnote" id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44__GUID-8647E713-37BA-4B93-84FB-1BEB979C434E">
                           <p class="notep1">Note:</p>
                           <p>The destination is responsible for purging the expired remote snapshots based on the snapshot data or <span class="italic">AWR data</span> retention settings for individual sources. Purging of locally generated snapshots occurs as part of the regularly scheduled purging process. By default, Oracle Database automatically purges snapshots that have been stored in AWR for over 8 days. The partitioning of AWR table for remote snapshots is done in the same way as that of the local snapshots.
                           </p>
                        </div>
                        <div class="section" id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44__CREATINGMODIFYINGANDDELETINGREMOTES-39187220">
                           <p class="subhead3" id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44__GUID-8603AA78-0F27-4064-BA76-BA747A782227">Creating, Modifying, and Deleting Remote Snapshots</p>
                           <p>The APIs for creating, modifying, and deleting <span class="italic">remote</span> snapshots are same as that for the <span class="italic">local</span> snapshots.
                           </p>
                           <div class="infoboxnote" id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44__GUID-C37B76E7-A98A-461E-8783-25C961CC550A">
                              <p class="notep1">Note:</p>
                              <p>For creating <span class="italic">remote</span> snapshots, you can also use the <code class="codeph">DBMS_WORKLOAD_REPOSITORY.CREATE_REMOTE_SNAPSHOT</code> API. This API works similar to the <span class="italic">local</span> snapshot creation API <code class="codeph">DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT</code>, but it takes the additional parameter of RMF topology name.
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44__GUID-2558A863-20DA-4750-A051-4DDEBBA8F1C9">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="gathering-database-statistics.html#GUID-70A79E56-18AB-4E85-9494-C0C8F02320AF">Creating Snapshots</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="gathering-database-statistics.html#GUID-62D01B30-2687-4821-A651-DC0E4AAC3B01" title="You can adjust the interval, retention period, and number of top SQL to flush for snapshot generation, but note that this can affect the precision of the Oracle Database diagnostic tools.">Modifying Snapshot Settings</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="gathering-database-statistics.html#GUID-542ED7D0-ABED-48F4-9D2F-5DADEB610249">Dropping Snapshots</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS-GUID-B58FD031-FF96-4569-B0C8-DECA33F364E6" target="_blank">Oracle Database PL/SQL Packages and Types Reference</a></span> for the syntax of the <code class="codeph">DBMS_WORKLOAD_REPOSITORY.CREATE_REMOTE_SNAPSHOT</code> API.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44__MANAGINGBASELINES-07B967F2">
                           <p class="subhead3" id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44__GUID-DCC6FA78-D923-4FA5-A41A-A06FC03E465E">Managing Baselines for Remote Snapshots</p>
                           <p>The APIs for managing baselines for <span class="italic">remote</span> snapshots are same as that for the <span class="italic">local</span> snapshots.
                           </p>
                           <div class="infoboxnotealso" id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44__GUID-37EC0B13-D21D-4E73-B457-41D9BAD18E84">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="gathering-database-statistics.html#GUID-44811EF8-D082-487F-8EEC-DA6E78700E68">Managing Baselines</a>"</span></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44__EXPORTINGANDIMPORTINGREMOTESNAPSHOT-021641D1">
                           <p class="subhead3" id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44__GUID-9DB7BA3D-313E-43D9-BABE-EDA599884F7C">Exporting and Importing Remote Snapshots</p>
                           <div class="infoboxnote" id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44__GUID-939C15AD-E3C0-4A67-8CC9-075ACCCEC0D4">
                              <p class="notep1">Note:</p>
                              <p>You cannot execute the AWR export and import scripts related to remote snapshots on an ADG standby database, that is, on a source database. Always execute these scripts on a destination database.</p>
                           </div>
                           <p>The process of exporting and importing AWR data for <span class="italic">remote</span> snapshots is same as that for the <span class="italic">local</span> snapshots. Starting with Oracle Database 12<span class="italic">c</span> Release 2 (12.2), the AWR data export and import scripts <code class="codeph">awrextr.sql</code> and <code class="codeph">awrload.sql</code> use the <span class="italic">source name</span> identifier to distinguish snapshots originating from a particular source. A source name is stored in a dump file during an export operation and is used as a default source name during an import operation.
                           </p>
                           <div class="infoboxnotealso" id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44__GUID-FED9CC22-27A7-46D0-AADA-BDB40CF04C64">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="gathering-database-statistics.html#GUID-F25470A0-C236-46DE-84F7-D68FBE1B0F12" title="Oracle Database enables you to transport AWR data between systems. This is useful in cases where you want to use a separate system to perform analysis of AWR data, so as to reduce the overhead caused by performance analysis on a production system.">Transporting Automatic Workload Repository Data to Another System</a>"</span> for information about exporting and importing AWR data for local snapshots.
                              </p>
                           </div>
                           <p><span class="bold">Exporting Remote Snapshots Using the awrextr.sql Script</span></p>
                           <p>The process of exporting <span class="italic">remote</span> snapshots is similar to exporting <span class="italic">local</span> snapshots using the <code class="codeph">awrextr.sql</code> script described in the section <span class="q">"<a href="gathering-database-statistics.html#GUID-CC6A87BD-BFEA-4A1B-9FD1-3445DC11BE72">Exporting AWR Data</a>"</span> with the following differences:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The default export log file directory is the same as that of the dump file, but you can also specify any other directory for an export log file.</p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">.dmp</code> suffix can be specified to the name of the dump file to export.
                                 </p>
                              </li>
                              <li>
                                 <p>The export script displays the values of <code class="codeph">SOURCE_DBID</code> and <code class="codeph">SOURCE_NAME</code> columns of AWR tables before prompting for the <span class="italic">Mapped Database ID</span> value to export.
                                 </p>
                              </li>
                           </ul>
                           <p><span class="bold">Importing Remote Snapshots Using the awrload.sql Script</span></p>
                           <p>The process of importing <span class="italic">remote</span> snapshots is similar to importing <span class="italic">local</span> snapshots using the <code class="codeph">awrload.sql</code> script described in the section <span class="q">"<a href="gathering-database-statistics.html#GUID-C916E80F-B819-4452-ABFC-18CA70D8A501">Importing AWR Data</a>"</span> with the following differences:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The default import log file directory is the same as that of the dump file, but you can also specify any other directory for an import log file. This is particularly useful when the dump file resides in a read-only directory.</p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">.dmp</code> suffix can be specified to the name of the dump file to import.
                                 </p>
                              </li>
                              <li>
                                 <p>The import script uses the values of <code class="codeph">SOURCE_DBID</code> and <code class="codeph">SOURCE_NAME</code> columns present in the dump file to determine the appropriate <span class="italic">Mapped Database ID</span> to use for storing the snapshot data in AWR.
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-D37F8265-2CBB-4906-8AD8-D6DB6E6D0B44__GUID-F94FDD70-23F4-493B-B7FA-1976F01054EF">
                              <p class="notep1">Note:</p>
                              <p>The snapshot import operation is not affected by the version of the Oracle database from which the snapshot dump was generated.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-751B53F2-0101-4AEE-8709-1978120249E1" name="GUID-751B53F2-0101-4AEE-8709-1978120249E1"></a><h5 id="TGDBA-GUID-751B53F2-0101-4AEE-8709-1978120249E1" class="sect5"><span class="enumeration_section">6.2.8.3 </span>Viewing AWR Data in Active Data Guard Standby Databases
                     </h5>
                     <div>
                        <p>You can view the AWR data stored in the ADG standby databases using Oracle supplied AWR views and AWR reports.</p>
                        <div class="section" id="GUID-751B53F2-0101-4AEE-8709-1978120249E1__USINGAWRVIEWSFORACTIVEDATAGUARDSTAN-07B9627E">
                           <p class="subhead3" id="GUID-751B53F2-0101-4AEE-8709-1978120249E1__GUID-E48CA2A5-7E90-46B4-A539-9FEACC7E5BB8">Viewing AWR Data Using AWR Views</p>
                           <p>You can view the historical data stored in AWR using the <code class="codeph"><span class="codeinlineitalic">DBA_HIST</span></code> views described in the section <span class="q">"<a href="gathering-database-statistics.html#GUID-18E1B278-B3C5-4FE1-8E51-BC8878C439F5">Using Automatic Workload Repository Views</a>"</span>.
                           </p>
                           <div class="infoboxnote" id="GUID-751B53F2-0101-4AEE-8709-1978120249E1__GUID-1099C7D9-0071-44B5-9682-C9E2579AA26F">
                              <p class="notep1">Note:</p>
                              <p>Starting with Oracle Database 12<span class="italic">c</span> Release 2 (12.2), the view <code class="codeph">DBA_HIST_DATABASE_INSTANCE</code> contains the column <code class="codeph">DB_UNIQUE_NAME</code> to support AWR for ADG standby databases. The column <code class="codeph">DB_UNIQUE_NAME</code> stores the unique identifier of a source by which it is known to the destination.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-751B53F2-0101-4AEE-8709-1978120249E1__GENERATINGAWRREPORTS-28AFC27F">
                           <p class="subhead3" id="GUID-751B53F2-0101-4AEE-8709-1978120249E1__GUID-8827A4DB-980E-494A-A4A7-1E2913C9D85C">Viewing AWR Data Using AWR Reports</p>
                           <p>You can view the performance statistics related to ADG standby databases using AWR reports. The primary interface for generating AWR reports is Oracle Enterprise Manager Cloud Control (Cloud Control). Whenever possible, generate AWR reports using Cloud Control. If Cloud Control is unavailable, then generate AWR reports using the Oracle supplied SQL scripts. The DBA role is required to run these scripts.</p>
                           <p>The AWR data can be queried for a particular source using the source name-mapped database ID pair. The mapped database ID is similar to the database identifier (DBID) that is used by AWR to identify a database instance and is stored in the <code class="codeph">DBID</code> column in the AWR tables. The AWR DBID value is derived as follows for the ADG standby databases:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>For a destination, the AWR DBID value is the value of <code class="codeph">V$DATABASE.CON_DBID</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>For a source, the AWR DBID value is the value of <code class="codeph">DBMS_UMF.GET_NODE_ID_LOCAL()</code> or the value of the column <code class="codeph">NODE_ID</code> in the <code class="codeph">DBA_UMF_REGISTRATION</code> view.
                                 </p>
                              </li>
                           </ul>
                           <p>As snapshot IDs are not unique across sources, the pair of snapshot ID-mapped database ID identifies a snapshot for a particular source.</p>
                           <div class="infoboxnotealso" id="GUID-751B53F2-0101-4AEE-8709-1978120249E1__GUID-71774603-608B-49D2-BF52-FF596198069F">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="gathering-database-statistics.html#GUID-EB7B34CD-6F4B-4010-9A8A-E1C7B8F2F851">Generating an AWR Report for a Specific Database</a>"</span> for information about generating AWR reports using Oracle supplied SQL scripts.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="TGDBA232"></a><div class="props_rev_3"><a id="GUID-9BFC6383-6C4F-4103-A2CB-4713802F2669" name="GUID-9BFC6383-6C4F-4103-A2CB-4713802F2669"></a><h3 id="TGDBA-GUID-9BFC6383-6C4F-4103-A2CB-4713802F2669" class="sect3"><span class="enumeration_section">6.3 </span>Generating Automatic Workload Repository Reports
               </h3>
               <div>
                  <p>An AWR report shows data captured between two snapshots (or two points in time). AWR reports are divided into multiple sections. The content of the report contains the workload profile of the system for the selected range of snapshots. The HTML report includes links that can be used to navigate quickly between sections.</p>
                  <div class="infoboxnote" id="GUID-9BFC6383-6C4F-4103-A2CB-4713802F2669__GUID-9A976CD9-69E7-4413-B84A-7FF94892CB43">
                     <p class="notep1">Note:</p>
                     <p><a id="d11457e5149" class="indexterm-anchor"></a>If you run a report on a database that does not have any workload activity during the specified range of snapshots, then calculated percentages for some report statistics can be less than 0 or greater than 100. This result means that there is no meaningful value for the statistic.
                     </p>
                  </div>
                  <p>This section describes how to generate AWR reports and contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-590826F2-AA17-4565-B0E6-3FF5225063D8">User Interface for Generating an AWR Report</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-4B5CB76B-7A8E-4A31-8850-1BB77B13EEE2">Generating an AWR Report Using the Command-Line Interface</a></p>
                     </li>
                  </ul>
               </div><a id="TGDBA233"></a><div class="props_rev_3"><a id="GUID-590826F2-AA17-4565-B0E6-3FF5225063D8" name="GUID-590826F2-AA17-4565-B0E6-3FF5225063D8"></a><h4 id="TGDBA-GUID-590826F2-AA17-4565-B0E6-3FF5225063D8" class="sect4"><span class="enumeration_section">6.3.1 </span>User Interface for Generating an AWR Report
                  </h4>
                  <div>
                     <p>The primary interface for generating AWR reports is Oracle Enterprise Manager Cloud Control (Cloud Control). Whenever possible, generate AWR reports using Cloud Control.</p>
                     <p>If Cloud Control is unavailable, then generate AWR reports by running SQL scripts. The DBA role is required to run these scripts.</p>
                     <div class="infoboxnotealso" id="GUID-590826F2-AA17-4565-B0E6-3FF5225063D8__GUID-0F779AE5-01F4-4AE0-8534-5E764AC81F6C">
                        <p class="notep1">See Also:</p>
                        <p><a href="../tdppt/automatic-database-performance-monitoring.html#TDPPT032" target="_blank"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a> for more information about generating AWR reports using Cloud Control
                        </p>
                     </div>
                  </div>
               </div><a id="TGDBA235"></a><div class="props_rev_3"><a id="GUID-4B5CB76B-7A8E-4A31-8850-1BB77B13EEE2" name="GUID-4B5CB76B-7A8E-4A31-8850-1BB77B13EEE2"></a><h4 id="TGDBA-GUID-4B5CB76B-7A8E-4A31-8850-1BB77B13EEE2" class="sect4"><span class="enumeration_section">6.3.2 </span>Generating an AWR Report Using the Command-Line Interface
                  </h4>
                  <div>
                     <p>This section describes how to generate AWR reports by running SQL scripts in the command-line interface. The DBA role is required to run these scripts. Click on an appropriate task link in the following table for the detailed steps to generate the required AWR report.</p>
                     <div class="tblformalwide" id="GUID-4B5CB76B-7A8E-4A31-8850-1BB77B13EEE2__SQLSCRIPTSFORGENERATINGAWRREPORTS-B339BD28">
                        <p class="titleintable">Table 6-4 SQL Scripts for Generating AWR Reports</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="SQL Scripts for Generating AWR Reports" summary="This table lists the SQL scripts that can be used for generating AWR reports." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d11457e5289">Task</th>
                                 <th align="left" valign="bottom" width="20%" id="d11457e5292">SQL Script</th>
                                 <th align="left" valign="bottom" width="20%" id="d11457e5295">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d11457e5300" headers="d11457e5289 ">
                                    <p><a href="gathering-database-statistics.html#GUID-B7D1B185-4942-4934-9B21-A9010F82A4FF">Generating an AWR Report for the Local Database</a></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d11457e5300 d11457e5292 ">
                                    <p><code class="codeph">awrrpt.sql</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d11457e5300 d11457e5295 ">
                                    <p>Generates an AWR report in HTML or text format that displays statistics from a range of snapshot IDs in the local database instance.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d11457e5312" headers="d11457e5289 ">
                                    <p><a href="gathering-database-statistics.html#GUID-EB7B34CD-6F4B-4010-9A8A-E1C7B8F2F851">Generating an AWR Report for a Specific Database</a></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d11457e5312 d11457e5292 ">
                                    <p><code class="codeph">awrrpti.sql</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d11457e5312 d11457e5295 ">
                                    <p>Generates an AWR report in HTML or text format that displays statistics from a range of snapshot IDs in a specific database instance.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d11457e5325" headers="d11457e5289 ">
                                    <p><a href="gathering-database-statistics.html#GUID-A1ACE3E6-7655-4CA2-BD98-0CEC937D9F63">Generating an AWR Report for the Local Database in Oracle RAC</a></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d11457e5325 d11457e5292 ">
                                    <p><code class="codeph">awrgrpt.sql</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d11457e5325 d11457e5295 ">
                                    <p>Generates an AWR report in HTML or text format that displays statistics from a range of snapshot IDs in the local database instance in an Oracle RAC environment.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d11457e5337" headers="d11457e5289 ">
                                    <p><a href="gathering-database-statistics.html#GUID-1FE0EA42-4299-411B-A69D-F6B1FD038293">Generating an AWR Report for a Specific Database in Oracle RAC</a></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d11457e5337 d11457e5292 ">
                                    <p><code class="codeph">awrgrpti.sql</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d11457e5337 d11457e5295 ">
                                    <p>Generates an AWR report in HTML or text format that displays statistics from a range of snapshot IDs in a specific database instance in an Oracle RAC environment.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d11457e5349" headers="d11457e5289 ">
                                    <p><a href="gathering-database-statistics.html#GUID-BD9DA8AD-89FC-4C7E-B902-04340C0E9E3D">Generating an AWR Report for a SQL Statement on the Local Database</a></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d11457e5349 d11457e5292 ">
                                    <p><code class="codeph">awrsqrpt.sql</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d11457e5349 d11457e5295 ">
                                    <p>Generates an AWR report in HTML or text format that displays statistics for a particular SQL statement from a range of snapshot IDs in the local database instance.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d11457e5361" headers="d11457e5289 ">
                                    <p><a href="gathering-database-statistics.html#GUID-28885D04-6EB8-4AEB-8019-B767782F84C3">Generating an AWR Report for a SQL Statement on a Specific Database</a></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d11457e5361 d11457e5292 ">
                                    <p><code class="codeph">awrsqrpi.sql</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d11457e5361 d11457e5295 ">
                                    <p>Generates an AWR report in HTML or text format that displays statistics for a particular SQL statement from a range of snapshot IDs in a specific database instance.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div><a id="TGDBA236"></a><div class="props_rev_3"><a id="GUID-B7D1B185-4942-4934-9B21-A9010F82A4FF" name="GUID-B7D1B185-4942-4934-9B21-A9010F82A4FF"></a><h5 id="TGDBA-GUID-B7D1B185-4942-4934-9B21-A9010F82A4FF" class="sect5"><span class="enumeration_section">6.3.2.1 </span>Generating an AWR Report for the Local Database
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <a id="d11457e5424" class="indexterm-anchor"></a><a id="d11457e5428" class="indexterm-anchor"></a><code class="codeph">awrrpt.sql</code> SQL script generates an HTML or text report that displays statistics from a range of snapshot IDs. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B7D1B185-4942-4934-9B21-A9010F82A4FF__GUID-5204AF15-F449-4EBB-A4E8-65435B9114EA">To generate an AWR report on the local database instance using the command-line interface:</p>
                           <ol>
                              <li>
                                 <p>At the SQL prompt, enter:</p><pre class="oac_no_warn" dir="ltr">@$ORACLE_HOME/rdbms/admin/awrrpt.sql
</pre></li>
                              <li>
                                 <p>Specify whether you want an HTML or a text report:</p><pre class="oac_no_warn" dir="ltr">Enter value for report_type: text
</pre><p>In this example, a text report is chosen.</p>
                              </li>
                              <li>
                                 <p>Specify the number of days for which you want to list snapshot IDs. </p><pre class="oac_no_warn" dir="ltr">Enter value for num_days: 2
</pre><p>A list of existing snapshots for the specified time range is displayed. In this example, snapshots captured in the last 2 days are displayed.</p>
                              </li>
                              <li>
                                 <p>Specify a beginning and ending snapshot ID for the workload repository report:</p><pre class="oac_no_warn" dir="ltr">Enter value for begin_snap: 150
Enter value for end_snap: 160
</pre><p>In this example, the snapshot with a snapshot ID of 150 is selected as the beginning snapshot, and the snapshot with a snapshot ID of 160 is selected as the ending snapshot.</p>
                              </li>
                              <li>
                                 <p>Enter a report name, or accept the default report name:</p><pre class="oac_no_warn" dir="ltr">Enter value for report_name: 
Using the report name awrrpt_1_150_160
</pre><p>In this example, the default name is accepted and an AWR report named <code class="codeph">awrrpt_1_150_160</code> is generated.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA237"></a><div class="props_rev_3"><a id="GUID-EB7B34CD-6F4B-4010-9A8A-E1C7B8F2F851" name="GUID-EB7B34CD-6F4B-4010-9A8A-E1C7B8F2F851"></a><h5 id="TGDBA-GUID-EB7B34CD-6F4B-4010-9A8A-E1C7B8F2F851" class="sect5"><span class="enumeration_section">6.3.2.2 </span>Generating an AWR Report for a Specific Database
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">awrrpti.sql</code> SQL script generates an HTML or text report that displays statistics from a range of snapshot IDs using a specific database instance. This script enables you to specify a database identifier and instance for which the AWR report will be generated.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-EB7B34CD-6F4B-4010-9A8A-E1C7B8F2F851__GUID-5955FD60-EC16-4CBF-8AF5-DFAE32F63663">To generate an AWR report on a specific database instance using the command-line interface:</p>
                           <ol>
                              <li>
                                 <p>At the SQL prompt, enter:</p><pre class="oac_no_warn" dir="ltr">@$ORACLE_HOME/rdbms/admin/awrrpti.sql
</pre></li>
                              <li>
                                 <p>Specify whether you want an HTML or a text report:</p><pre class="oac_no_warn" dir="ltr">Enter value for report_type: text
</pre><p>In this example, a text report is chosen.</p>
                                 <p>A list of available database identifiers and instance numbers are displayed:</p><pre class="oac_no_warn" dir="ltr">Instances in this Workload Repository schema
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   DB Id    Inst Num DB Name      Instance     Host
----------- -------- ------------ ------------ ------------
 3309173529        1 MAIN         main         examp1690
 3309173529        1 TINT251      tint251      samp251
</pre></li>
                              <li>
                                 <p>Enter the values for the database identifier (<code class="codeph">dbid)</code> and instance number (<code class="codeph">inst_num)</code>:
                                 </p><pre class="oac_no_warn" dir="ltr">Enter value for dbid: 3309173529
Using 3309173529 for database Id
Enter value for inst_num: 1
</pre><div class="infoboxnote" id="GUID-EB7B34CD-6F4B-4010-9A8A-E1C7B8F2F851__GUID-BF6734D3-A3CA-432D-A3F4-550D49780179">
                                    <p class="notep1">Note:</p>
                                    <p>For an ADG standby database, the value for <code class="codeph">dbid</code> can be determined as follows:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>For a Destination node, use the value of <code class="codeph">v$database.con_dbid</code> .
                                          </p>
                                       </li>
                                       <li>
                                          <p>For a Source node, use the value of <code class="codeph">dbms_umf.get_node_id_local()</code>.
                                          </p>
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                              <li>
                                 <p>Specify the number of days for which you want to list snapshot IDs. </p><pre class="oac_no_warn" dir="ltr">Enter value for num_days: 2
</pre><p>A list of existing snapshots for the specified time range is displayed. In this example, snapshots captured in the last 2 days are displayed.</p>
                              </li>
                              <li>
                                 <p>Specify a beginning and ending snapshot ID for the workload repository report:</p><pre class="oac_no_warn" dir="ltr">Enter value for begin_snap: 150
Enter value for end_snap: 160
</pre><p>In this example, the snapshot with a snapshot ID of 150 is selected as the beginning snapshot, and the snapshot with a snapshot ID of 160 is selected as the ending snapshot.</p>
                              </li>
                              <li>
                                 <p>Enter a report name, or accept the default report name:</p><pre class="oac_no_warn" dir="ltr">Enter value for report_name: 
Using the report name awrrpt_1_150_160
</pre><p>In this example, the default name is accepted and an AWR report named <code class="codeph">awrrpt_1_150_160</code> is generated on the database instance with a database ID value of <code class="codeph">3309173529</code>.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA238"></a><div class="props_rev_3"><a id="GUID-A1ACE3E6-7655-4CA2-BD98-0CEC937D9F63" name="GUID-A1ACE3E6-7655-4CA2-BD98-0CEC937D9F63"></a><h5 id="TGDBA-GUID-A1ACE3E6-7655-4CA2-BD98-0CEC937D9F63" class="sect5"><span class="enumeration_section">6.3.2.3 </span>Generating an AWR Report for the Local Database in Oracle RAC
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">awrgrpt.sql</code> SQL script generates an HTML or text report that displays statistics from a range of snapshot IDs using the current database instance in an Oracle Real Application Clusters (Oracle RAC) environment.
                           </p>
                           <div class="infoboxnote" id="GUID-A1ACE3E6-7655-4CA2-BD98-0CEC937D9F63__GUID-34D1A713-3FA3-46B9-B5DB-9F19999E42FE">
                              <p class="notep1">Note:</p>
                              <p>In an Oracle RAC environment, Oracle recommends generating an HTML report (instead of a text report) because it is much easier to read. </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-A1ACE3E6-7655-4CA2-BD98-0CEC937D9F63__GUID-73AF7F76-6152-4FB8-882D-467E41318F60">To generate an AWR report for Oracle RAC on the local database instance using the command-line interface:</p>
                           <ol>
                              <li>
                                 <p>At the SQL prompt, enter:</p><pre class="oac_no_warn" dir="ltr">@$ORACLE_HOME/rdbms/admin/awrgrpt.sql
</pre></li>
                              <li>
                                 <p>Specify whether you want an HTML or a text report:</p><pre class="oac_no_warn" dir="ltr">Enter value for report_type: html
</pre><p>In this example, an HTML report is chosen.</p>
                              </li>
                              <li>
                                 <p>Specify the number of days for which you want to list snapshot IDs. </p><pre class="oac_no_warn" dir="ltr">Enter value for num_days: 2
</pre><p>A list of existing snapshots for the specified time range is displayed. In this example, snapshots captured in the last day are displayed.</p>
                              </li>
                              <li>
                                 <p>Specify a beginning and ending snapshot ID for the workload repository report:</p><pre class="oac_no_warn" dir="ltr">Enter value for begin_snap: 150
Enter value for end_snap: 160
</pre><p>In this example, the snapshot with a snapshot ID of 150 is selected as the beginning snapshot, and the snapshot with a snapshot ID of 160 is selected as the ending snapshot.</p>
                              </li>
                              <li>
                                 <p>Enter a report name, or accept the default report name:</p><pre class="oac_no_warn" dir="ltr">Enter value for report_name: 
Using the report name awrrpt_rac_150_160.html
</pre><p>In this example, the default name is accepted and an AWR report named <code class="codeph">awrrpt_rac_150_160.html</code> is generated.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA239"></a><div class="props_rev_3"><a id="GUID-1FE0EA42-4299-411B-A69D-F6B1FD038293" name="GUID-1FE0EA42-4299-411B-A69D-F6B1FD038293"></a><h5 id="TGDBA-GUID-1FE0EA42-4299-411B-A69D-F6B1FD038293" class="sect5"><span class="enumeration_section">6.3.2.4 </span>Generating an AWR Report for a Specific Database in Oracle RAC
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">awrgrpti.sql</code> SQL script generates an HTML or text report that displays statistics from a range of snapshot IDs using specific databases instances running in an Oracle RAC environment. This script enables you to specify database identifiers and a comma-delimited list of database instances for which the AWR report will be generated.
                           </p>
                           <div class="infoboxnote" id="GUID-1FE0EA42-4299-411B-A69D-F6B1FD038293__GUID-5E1BD446-DC71-4F9C-ABAA-44D5A0383C4A">
                              <p class="notep1">Note:</p>
                              <p>In an Oracle RAC environment, Oracle recommends generating an HTML report (instead of a text report) because it is much easier to read. </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-1FE0EA42-4299-411B-A69D-F6B1FD038293__GUID-3AEC63DA-1C46-4AE2-BF55-173381380D97">To generate an AWR report for Oracle RAC on a specific database instance using the command-line interface:</p>
                           <ol>
                              <li>
                                 <p>At the SQL prompt, enter:</p><pre class="oac_no_warn" dir="ltr">@$ORACLE_HOME/rdbms/admin/awrgrpti.sql
</pre></li>
                              <li>
                                 <p>Specify whether you want an HTML or a text report:</p><pre class="oac_no_warn" dir="ltr">Enter value for report_type: html
</pre><p>In this example, an HTML report is chosen.</p>
                                 <p>A list of available database identifiers and instance numbers are displayed:</p><pre class="oac_no_warn" dir="ltr">Instances in this Workload Repository schema
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   DB Id    Inst Num DB Name      Instance     Host
----------- -------- ------------ ------------ ------------
 3309173529        1 MAIN         main         examp1690
 3309173529        1 TINT251      tint251      samp251
 3309173529        2 TINT251      tint252      samp252
</pre></li>
                              <li>
                                 <p>Enter the value for the database identifier (<code class="codeph">dbid)</code>:
                                 </p><pre class="oac_no_warn" dir="ltr">Enter value for dbid: 3309173529
Using 3309173529 for database Id
</pre></li>
                              <li>
                                 <p>Enter the value for the instance numbers (<code class="codeph">instance_numbers_or_all</code>) of the Oracle RAC instances you want to include in the report:
                                 </p><pre class="oac_no_warn" dir="ltr">Enter value for instance_numbers_or_all: 1,2
</pre></li>
                              <li>
                                 <p>Specify the number of days for which you want to list snapshot IDs. </p><pre class="oac_no_warn" dir="ltr">Enter value for num_days: 2
</pre><p>A list of existing snapshots for the specified time range is displayed. In this example, snapshots captured in the last 2 days are displayed.</p>
                              </li>
                              <li>
                                 <p>Specify a beginning and ending snapshot ID for the workload repository report:</p><pre class="oac_no_warn" dir="ltr">Enter value for begin_snap: 150
Enter value for end_snap: 160
</pre><p>In this example, the snapshot with a snapshot ID of 150 is selected as the beginning snapshot, and the snapshot with a snapshot ID of 160 is selected as the ending snapshot.</p>
                              </li>
                              <li>
                                 <p>Enter a report name, or accept the default report name:</p><pre class="oac_no_warn" dir="ltr">Enter value for report_name: 
Using the report name awrrpt_rac_150_160.html
</pre><p>In this example, the default name is accepted and an AWR report named <code class="codeph">awrrpt_rac_150_160.html</code> is generated on the database instance with a database ID value of <code class="codeph">3309173529</code>.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA240"></a><div class="props_rev_3"><a id="GUID-BD9DA8AD-89FC-4C7E-B902-04340C0E9E3D" name="GUID-BD9DA8AD-89FC-4C7E-B902-04340C0E9E3D"></a><h5 id="TGDBA-GUID-BD9DA8AD-89FC-4C7E-B902-04340C0E9E3D" class="sect5"><span class="enumeration_section">6.3.2.5 </span>Generating an AWR Report for a SQL Statement on the Local Database
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">awrsqrpt.sql</code> SQL script generates an HTML or text report that displays statistics of a particular SQL statement from a range of snapshot IDs. Run this report to inspect or debug the performance of a SQL statement.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-BD9DA8AD-89FC-4C7E-B902-04340C0E9E3D__GUID-B46CD66A-E71F-40D0-8BF0-490438977013">To generate an AWR report for a SQL statement on the local database instance using the command-line interface:</p>
                           <ol>
                              <li>
                                 <p>At the SQL prompt, enter:</p><pre class="oac_no_warn" dir="ltr">@$ORACLE_HOME/rdbms/admin/awrsqrpt.sql
</pre></li>
                              <li>
                                 <p>Specify whether you want an HTML or a text report:</p><pre class="oac_no_warn" dir="ltr">Enter value for report_type: html
</pre><p>In this example, an HTML report is chosen.</p>
                              </li>
                              <li>
                                 <p>Specify the number of days for which you want to list snapshot IDs. </p><pre class="oac_no_warn" dir="ltr">Enter value for num_days: 1
</pre><p>A list of existing snapshots for the specified time range is displayed. In this example, snapshots captured in the previous day are displayed.</p>
                              </li>
                              <li>
                                 <p>Specify a beginning and ending snapshot ID for the workload repository report:</p><pre class="oac_no_warn" dir="ltr">Enter value for begin_snap: 146
Enter value for end_snap: 147
</pre><p>In this example, the snapshot with a snapshot ID of 146 is selected as the beginning snapshot, and the snapshot with a snapshot ID of 147 is selected as the ending snapshot.</p>
                              </li>
                              <li>
                                 <p>Specify the SQL ID of a particular SQL statement to display statistics:</p><pre class="oac_no_warn" dir="ltr">Enter value for sql_id: 2b064ybzkwf1y
</pre><p>In this example, the SQL statement with a SQL ID of <code class="codeph">2b064ybzkwf1y</code> is selected.
                                 </p>
                              </li>
                              <li>
                                 <p>Enter a report name, or accept the default report name:</p><pre class="oac_no_warn" dir="ltr">Enter value for report_name: 
Using the report name awrrpt_1_146_147.html
</pre><p>In this example, the default name is accepted and an AWR report named <code class="codeph">awrrpt_1_146_147</code> is generated.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA241"></a><div class="props_rev_3"><a id="GUID-28885D04-6EB8-4AEB-8019-B767782F84C3" name="GUID-28885D04-6EB8-4AEB-8019-B767782F84C3"></a><h5 id="TGDBA-GUID-28885D04-6EB8-4AEB-8019-B767782F84C3" class="sect5"><span class="enumeration_section">6.3.2.6 </span>Generating an AWR Report for a SQL Statement on a Specific Database
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">awrsqrpi.sql</code> SQL script generates an HTML or text report that displays statistics of a particular SQL statement from a range of snapshot IDs using a specific database instance.This script enables you to specify a database identifier and instance for which the AWR report will be generated. Run this report to inspect or debug the performance of a SQL statement on a specific database and instance.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-28885D04-6EB8-4AEB-8019-B767782F84C3__GUID-DCDE85A3-12A5-43CB-8978-B83ABC013332">To generate an AWR report for a SQL statement on a specific database instance using the command-line interface:</p>
                           <ol>
                              <li>
                                 <p>At the SQL prompt, enter:</p><pre class="oac_no_warn" dir="ltr">@$ORACLE_HOME/rdbms/admin/awrsqrpi.sql
</pre></li>
                              <li>
                                 <p>Specify whether you want an HTML or a text report:</p><pre class="oac_no_warn" dir="ltr">Enter value for report_type: html
</pre><p>In this example, an HTML report is chosen.</p>
                                 <p>A list of available database identifiers and instance numbers are displayed:</p><pre class="oac_no_warn" dir="ltr">Instances in this Workload Repository schema
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   DB Id    Inst Num DB Name      Instance     Host
----------- -------- ------------ ------------ ------------
 3309173529        1 MAIN         main         examp1690
 3309173529        1 TINT251      tint251      samp251
</pre></li>
                              <li>
                                 <p>Enter the values for the database identifier (<code class="codeph">dbid)</code> and instance number (<code class="codeph">inst_num)</code>:
                                 </p><pre class="oac_no_warn" dir="ltr">Enter value for dbid: 3309173529
Using 3309173529 for database Id
Enter value for inst_num: 1
Using 1 for instance number
</pre></li>
                              <li>
                                 <p>Specify the number of days for which you want to list snapshot IDs. </p><pre class="oac_no_warn" dir="ltr">Enter value for num_days: 1
</pre><p>A list of existing snapshots for the specified time range is displayed. In this example, snapshots captured in the previous day are displayed.</p>
                              </li>
                              <li>
                                 <p>Specify a beginning and ending snapshot ID for the workload repository report:</p><pre class="oac_no_warn" dir="ltr">Enter value for begin_snap: 146
Enter value for end_snap: 147
</pre><p>In this example, the snapshot with a snapshot ID of 146 is selected as the beginning snapshot, and the snapshot with a snapshot ID of 147 is selected as the ending snapshot.</p>
                              </li>
                              <li>
                                 <p>Specify the SQL ID of a particular SQL statement to display statistics:</p><pre class="oac_no_warn" dir="ltr">Enter value for sql_id: 2b064ybzkwf1y
</pre><p>In this example, the SQL statement with a SQL ID of <code class="codeph">2b064ybzkwf1y</code> is selected.
                                 </p>
                              </li>
                              <li>
                                 <p>Enter a report name, or accept the default report name:</p><pre class="oac_no_warn" dir="ltr">Enter value for report_name: 
Using the report name awrrpt_1_146_147.html
</pre><p>In this example, the default name is accepted and an AWR report named <code class="codeph">awrrpt_1_146_147</code> is generated on the database instance with a database ID value of <code class="codeph">3309173529</code>.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="TGDBA95393"></a><div class="props_rev_3"><a id="GUID-23061F14-767D-47B6-9B45-D1E26FB1E075" name="GUID-23061F14-767D-47B6-9B45-D1E26FB1E075"></a><h3 id="TGDBA-GUID-23061F14-767D-47B6-9B45-D1E26FB1E075" class="sect3"><span class="enumeration_section">6.4 </span>Generating Performance Hub Active Report
               </h3>
               <div>
                  <p><a id="d11457e6106" class="indexterm-anchor"></a>Performance Hub feature of EM Express provides an active report with a consolidated view of all performance data for a specified time period. The report is fully interactive; its contents are saved in a HTML file, which you can access offline using a web browser.
                  </p>
                  <div class="infoboxnotealso" id="GUID-23061F14-767D-47B6-9B45-D1E26FB1E075__GUID-4909A519-DE7E-4C0B-9054-065831C2D0F9">
                     <p class="notep1">See Also:</p>
                     <p><a href="../admqs/monitoring-and-tuning-the-database.html#ADMQS12446" target="_blank"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about Performance Hub feature of EM Express
                     </p>
                  </div>
                  <p>This section describes how to generate Performance Hub active report and contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-5D746952-984F-4D20-9EA2-09486332128A">Overview of Performance Hub Active Report</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-2757F38D-F766-4208-94AA-13D58B03C5C5">Command-Line User Interface for Generating a Performance Hub Active Report</a></p>
                     </li>
                     <li>
                        <p><a href="gathering-database-statistics.html#GUID-BA1747A8-590B-4266-9D9E-AAD4182563AB">Generating a Performance Hub Active Report Using a SQL Script</a></p>
                     </li>
                  </ul>
               </div><a id="TGDBA95394"></a><div class="props_rev_3"><a id="GUID-5D746952-984F-4D20-9EA2-09486332128A" name="GUID-5D746952-984F-4D20-9EA2-09486332128A"></a><h4 id="TGDBA-GUID-5D746952-984F-4D20-9EA2-09486332128A" class="sect4"><span class="enumeration_section">6.4.1 </span>Overview of Performance Hub Active Report
                  </h4>
                  <div>
                     <p><a id="d11457e6186" class="indexterm-anchor"></a>Performance Hub active report enables you to view all performance data available for a time period that you specify. Different tabs are available in the Performance Hub, depending on whether real-time or historical data is selected for the time period. When real-time data is selected, more granular data is presented, because real-time data for the last hour is displayed. When historical data is selected, more detailed data is presented, but the data points are averaged out to the Automatic Workload Repository (AWR) interval for the selected time period. 
                     </p>
                     <p>This section describes Performance Hub active report and contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-C4A1CCF0-FA06-4AFB-BAB1-1F2C7021B1FA">About Performance Hub Active Report Tabs</a></p>
                        </li>
                        <li>
                           <p><a href="gathering-database-statistics.html#GUID-87FF1297-3CA4-419E-9323-D6B63820E84D">About Performance Hub Active Report Types</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA95395"></a><div class="props_rev_3"><a id="GUID-C4A1CCF0-FA06-4AFB-BAB1-1F2C7021B1FA" name="GUID-C4A1CCF0-FA06-4AFB-BAB1-1F2C7021B1FA"></a><h5 id="TGDBA-GUID-C4A1CCF0-FA06-4AFB-BAB1-1F2C7021B1FA" class="sect5"><span class="enumeration_section">6.4.1.1 </span>About Performance Hub Active Report Tabs
                     </h5>
                     <div>
                        <p>Performance Hub active report contains interactive tabs that enable you to view and navigate through performance data categorized into various performance areas.</p>
                        <p>The tabs contained in a Performance Hub active report include the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Summary</p>
                              <p>The Summary tab provides an overview of system performance, including resource consumption, average active sessions, and load profile information. This tab is available for real-time data as well as historical data.</p>
                           </li>
                           <li>
                              <p>Activity</p>
                              <p>The Activity tab displays ASH analytics. This tab is available for real-time data as well as historical data.</p>
                           </li>
                           <li>
                              <p>Workload</p>
                              <p>The Workload tab displays metric information about the workload profile, such as call rates, logon rate, and top SQL. This tab is available for real-time data as well as historical data.</p>
                           </li>
                           <li>
                              <p>RAC</p>
                              <p>The RAC tab displays metrics specific to Oracle RAC, such as the number of global cache blocks received and the average block latency. This tab is only available in Oracle RAC environments. This tab is available for real-time data as well as historical data.</p>
                           </li>
                           <li>
                              <p>Monitored SQL</p>
                              <p>The Monitored SQL tab displays information about monitored SQL statements. This tab is available for real-time data as well as historical data.</p>
                           </li>
                           <li>
                              <p>ADDM</p>
                              <p>The ADDM tab displays information for ADDM analysis tasks and Real-Time ADDM analysis reports. This tab is available for real-time data as well as historical data.</p>
                           </li>
                           <li>
                              <p>Current ADDM Findings</p>
                              <p>The Current ADDM Findings tab displays a real-time analysis of system performance for the past 5 minutes. This tab is only available if the specified time period for the Performance Hub active report is within the past hour. This tab is available only for real-time data.</p>
                           </li>
                           <li>
                              <p>Database time</p>
                              <p>The Database Time tab displays wait events by category for various metrics. This tab is available only for historical data.</p>
                           </li>
                           <li>
                              <p>Resources</p>
                              <p>The Resources tab displays operating system and I/O usage statistics. This tab is available only for historical data.</p>
                           </li>
                           <li>
                              <p>System Statistics</p>
                              <p>The System Statistics tab displays database and system statistics. This tab is available only for historical data.</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="TGDBA95396"></a><div class="props_rev_3"><a id="GUID-87FF1297-3CA4-419E-9323-D6B63820E84D" name="GUID-87FF1297-3CA4-419E-9323-D6B63820E84D"></a><h5 id="TGDBA-GUID-87FF1297-3CA4-419E-9323-D6B63820E84D" class="sect5"><span class="enumeration_section">6.4.1.2 </span>About Performance Hub Active Report Types
                     </h5>
                     <div>
                        <p>You can choose the level of details displayed within each tab of the Performance Hub active report by selecting the report type.</p>
                        <p>The available report types for the Performance Hub active report include the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Basic</p>
                              <p>Only the basic information for all the tabs is saved to the report.</p>
                           </li>
                           <li>
                              <p>Typical</p>
                              <p>In addition to the information saved in the basic report type, the SQL Monitor information for the top SQL statements contained in the Monitored SQL tab and the ADDM reports are saved to the report.</p>
                           </li>
                           <li>
                              <p>All</p>
                              <p>In addition to the information saved in the typical report type, the SQL Monitor information for all SQL statements contained in the Monitored SQL tab and all detailed reports for all tabs are saved to the report.</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TGDBA95397"></a><div class="props_rev_3"><a id="GUID-2757F38D-F766-4208-94AA-13D58B03C5C5" name="GUID-2757F38D-F766-4208-94AA-13D58B03C5C5"></a><h4 id="TGDBA-GUID-2757F38D-F766-4208-94AA-13D58B03C5C5" class="sect4"><span class="enumeration_section">6.4.2 </span>Command-Line User Interface for Generating a Performance Hub Active Report
                  </h4>
                  <div>
                     <p>You can generate a Performance Hub active report using the command-line interface in one of two ways:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Using a SQL script, as described in <span class="q">"<a href="gathering-database-statistics.html#GUID-BA1747A8-590B-4266-9D9E-AAD4182563AB">Generating a Performance Hub Active Report Using a SQL Script</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Using the <code class="codeph">DBMS_PERF</code> package, as described in <a href="../arpls/DBMS_PERF.html#ARPLS75006" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="TGDBA95398"></a><div class="props_rev_3"><a id="GUID-BA1747A8-590B-4266-9D9E-AAD4182563AB" name="GUID-BA1747A8-590B-4266-9D9E-AAD4182563AB"></a><h4 id="TGDBA-GUID-BA1747A8-590B-4266-9D9E-AAD4182563AB" class="sect4"><span class="enumeration_section">6.4.3 </span>Generating a Performance Hub Active Report Using a SQL Script
                  </h4>
                  <div>
                     <div class="section">
                        <p>This section describes how to generate <a id="d11457e6501" class="indexterm-anchor"></a>Performance Hub active report by running the <code class="codeph">perfhubrpt.sql</code> SQL script in the command-line interface. The DBA role is required to run this script.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BA1747A8-590B-4266-9D9E-AAD4182563AB__GUID-74C798E0-F717-4055-9798-A8E58A5DFC4E">To generate a Performance Hub active report:</p>
                        <ol>
                           <li>
                              <p>At the SQL prompt, enter:</p><pre class="oac_no_warn" dir="ltr">@$ORACLE_HOME/rdbms/admin/perfhubrpt.sql
</pre></li>
                           <li>
                              <p>Specify the desired report type:</p><pre class="oac_no_warn" dir="ltr">Please enter report type: typical
</pre><p>For information about the available report types, see <span class="q">"<a href="gathering-database-statistics.html#GUID-87FF1297-3CA4-419E-9323-D6B63820E84D">About Performance Hub Active Report Types</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Enter the value for the database identifier of the database you want to use:</p><pre class="oac_no_warn" dir="ltr">Please enter database ID: 3309173529
</pre><p>To use the local database, enter a null value (the default value). If you specify a database identifier for a database other than the local database, then the Performance Hub active report is generated from imported AWR data.</p>
                           </li>
                           <li>
                              <p>Enter the value for the instance number of the database instance you want to use:</p><pre class="oac_no_warn" dir="ltr">Please enter instance number: all instances
</pre><p>To specify all instances, enter <code class="codeph">all instances</code> (the default value).
                              </p>
                           </li>
                           <li>
                              <p>Enter the desired time period by specifying an end time and a start time in the format of <code class="codeph">dd:mm:yyyy hh:mi:ss</code>:
                              </p><pre class="oac_no_warn" dir="ltr">Please enter end time in format of dd:mm:yyyy hh24:mi:ss: 03:04:2014 17:00:00
Please enter start time in format of dd:mm:yyyy hh24:mi:ss: 03:04:2014 16:00:00
</pre></li>
                           <li>
                              <p>Enter a report name, or accept the default report name:</p><pre class="oac_no_warn" dir="ltr">Enter value for report_name: my_perfhub_report.html
</pre><p>In this example, a Performance Hub active report named <code class="codeph">my_perfhub_report</code> is generated on all database instances with a database ID value of <code class="codeph">3309173529</code> for the specified time period from 4:00 p.m. to 5:00 p.m on April 3, 2014.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
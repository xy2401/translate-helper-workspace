<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Transportation in Data Warehouses</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Data Warehousing Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Data Warehousing Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-data-warehousing-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T00:20:13-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96243-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="extraction-data-warehouses.html" title="Previous" type="text/html">
      <link rel="next" href="loading-transformation-date-warehouses.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Data Warehousing Guide">
    <meta name="dcterms.isVersionOf" content="DWHSG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="extraction-data-warehouses.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="loading-transformation-date-warehouses.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Data Warehousing Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-etl.html" property="item" typeof="WebPage"><span property="name">Data Movement/ETL </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Transportation in Data Warehouses</li>
            </ol>
            <a id="GUID-3CC5E89C-A354-4F58-BC2A-D9DF439357E5" name="GUID-3CC5E89C-A354-4F58-BC2A-D9DF439357E5"></a>
            
            <h2 id="DWHSG-GUID-3CC5E89C-A354-4F58-BC2A-D9DF439357E5" class="sect2"><span class="enumeration_chapter">17 </span>Transportation in Data Warehouses
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The following topics provide information about transporting data into a data warehouse:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="transportation-data-warehouses.html#GUID-59C3FBDC-8090-44D1-A83D-1B7F1FC35B58">Overview of Transportation in Data Warehouses</a></p>
                  </li>
                  <li>
                     <p><a href="transportation-data-warehouses.html#GUID-02A26585-7854-43E3-BEC9-8A34BBC58485">Introduction to Transportation Mechanisms in Data Warehouses</a></p>
                  </li>
               </ul>
            </div><a id="DWHSG8297"></a><div class="props_rev_3"><a id="GUID-59C3FBDC-8090-44D1-A83D-1B7F1FC35B58" name="GUID-59C3FBDC-8090-44D1-A83D-1B7F1FC35B58"></a><h3 id="DWHSG-GUID-59C3FBDC-8090-44D1-A83D-1B7F1FC35B58" class="sect3"><span class="enumeration_section">17.1 </span>Overview of Transportation in Data Warehouses
               </h3>
               <div>
                  <p><a id="d62449e51" class="indexterm-anchor"></a>Transportation is the operation of moving data from one system to another system. In a data warehouse environment, the most common requirements for transportation are in moving data from:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A source system to a staging database or a data warehouse database</p>
                     </li>
                     <li>
                        <p>A staging database to a data warehouse</p>
                     </li>
                     <li>
                        <p>A data warehouse to a data mart</p>
                     </li>
                  </ul>
                  <p>Transportation is often one of the simpler portions of the ETL process, and can be integrated with other portions of the process. For example, as shown in <a href="extraction-data-warehouses.html#GUID-7C9793D3-10E7-40BB-80FF-627C7160D044">Extraction in Data Warehouses</a>, distributed query technology provides a mechanism for both extracting and transporting data.
                  </p>
               </div>
            </div><a id="DWHSG8298"></a><div class="props_rev_3"><a id="GUID-02A26585-7854-43E3-BEC9-8A34BBC58485" name="GUID-02A26585-7854-43E3-BEC9-8A34BBC58485"></a><h3 id="DWHSG-GUID-02A26585-7854-43E3-BEC9-8A34BBC58485" class="sect3"><span class="enumeration_section">17.2 </span>Introduction to Transportation Mechanisms in Data Warehouses
               </h3>
               <div>
                  <p>You have three basic choices for transporting data in warehouses:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="transportation-data-warehouses.html#GUID-B93D2E7E-AC54-4840-8377-9A5164396C04">Transportation Using Flat Files</a></p>
                     </li>
                     <li>
                        <p><a href="transportation-data-warehouses.html#GUID-8FAF5F50-AA26-4755-A37B-C30075612B55">Transportation Through Distributed Operations</a></p>
                     </li>
                     <li>
                        <p><a href="transportation-data-warehouses.html#GUID-B3C1F5D9-21CD-41DB-BEC9-986016E6A5AA">Transportation Using Transportable Tablespaces</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG8299"></a><div class="props_rev_3"><a id="GUID-B93D2E7E-AC54-4840-8377-9A5164396C04" name="GUID-B93D2E7E-AC54-4840-8377-9A5164396C04"></a><h4 id="DWHSG-GUID-B93D2E7E-AC54-4840-8377-9A5164396C04" class="sect4"><span class="enumeration_section">17.2.1 </span>Transportation Using Flat Files
                  </h4>
                  <div>
                     <p><a id="d62449e131" class="indexterm-anchor"></a>The most common me<a id="d62449e136" class="indexterm-anchor"></a>thod for transporting data is by the transfer of flat files, using mechanisms such as FTP or other remote file system access protocols. Data is unloaded or exported from the source system into flat files using techniques discussed in <a href="extraction-data-warehouses.html#GUID-7C9793D3-10E7-40BB-80FF-627C7160D044">Extraction in Data Warehouses</a>, and is then transported to the target platform using FTP or similar mechanisms.
                     </p>
                     <p>Because source systems and data warehouses often use different operating systems and database systems, using flat files is often the simplest way to exchange data between heterogeneous systems with minimal transformations. However, even when transporting data between homogeneous systems, flat files are often the most efficient and most easy-to-manage mechanism for data transfer.</p>
                  </div>
               </div><a id="DWHSG8300"></a><div class="props_rev_3"><a id="GUID-8FAF5F50-AA26-4755-A37B-C30075612B55" name="GUID-8FAF5F50-AA26-4755-A37B-C30075612B55"></a><h4 id="DWHSG-GUID-8FAF5F50-AA26-4755-A37B-C30075612B55" class="sect4"><span class="enumeration_section">17.2.2 </span>Transportation Through Distributed Operations
                  </h4>
                  <div>
                     <p><a id="d62449e168" class="indexterm-anchor"></a>Distributed queries, either with or without gateways, can be an effective mechanism for extracting data. These mechanisms also transport the data directly to the target systems, thus providing both extraction and transformation in a single step. Depending on the tolerable impact on time and system resources, these mechanisms can be well suited for both extraction and transformation.
                     </p>
                     <p>As opposed to flat file transportation, the success or failure of the transportation is recognized immediately with the result of the distributed query or transaction.</p>
                     <div class="infoboxnotealso" id="GUID-8FAF5F50-AA26-4755-A37B-C30075612B55__GUID-D6FDF000-06CF-4449-B14E-2C6AABC9313E">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="extraction-data-warehouses.html#GUID-7C9793D3-10E7-40BB-80FF-627C7160D044">Extraction in Data Warehouses</a> for further information
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="DWHSG8301"></a><div class="props_rev_3"><a id="GUID-B3C1F5D9-21CD-41DB-BEC9-986016E6A5AA" name="GUID-B3C1F5D9-21CD-41DB-BEC9-986016E6A5AA"></a><h4 id="DWHSG-GUID-B3C1F5D9-21CD-41DB-BEC9-986016E6A5AA" class="sect4"><span class="enumeration_section">17.2.3 </span>Transportation Using Transportable Tablespaces
                  </h4>
                  <div>
                     <p><a id="d62449e205" class="indexterm-anchor"></a><a id="d62449e207" class="indexterm-anchor"></a>Oracle transportable tablespaces are the fastest way for moving large volumes of data between two Oracle databases. Previous to the introduction of transportable tablespaces, the most scalable data transportation mechanisms relied on moving flat files containing raw data. These mechanisms required that data be unloaded or exported into files from the source database, Then, after transportation, these files were loaded or imported into the target database. Transportable tablespaces entirely bypass the unload and reload steps.
                     </p>
                     <p>Using transportable tablespaces, Oracle data files (containing table data, indexes, and almost every other Oracle database object) can be directly transported from one database to another. Furthermore, like import and export, transportable tablespaces provide a mechanism for transporting metadata in addition to transporting data.</p>
                     <p>Transportable tablespaces have some limitations: source and target systems must be running Oracle8<span class="italic">i</span> (or higher), must use compatible character sets, and, before Oracle Database 10<span class="italic">g</span>, must run on the same operating system. For details on how to transport tablespace between operating systems, see <a href="../admin/transporting-data.html#ADMIN11394" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a>.
                     </p>
                     <p>The most common applications of transportable tablespaces in data warehouses are in moving data from a staging database to a data warehouse, or in moving data from a data warehouse to a data mart.</p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="transportation-data-warehouses.html#GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2">Using Transportable Tablespaces to Transport Data into Data Warehouses: Example</a></p>
                        </li>
                        <li>
                           <p><a href="transportation-data-warehouses.html#GUID-72A4A223-C526-4C18-A41D-2F89381F9BA5">Other Uses of Transportable Tablespaces</a></p>
                        </li>
                     </ul>
                  </div><a id="DWHSG8302"></a><div class="props_rev_3"><a id="GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2" name="GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2"></a><h5 id="DWHSG-GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2" class="sect5"><span class="enumeration_section">17.2.3.1 </span>Using Transportable Tablespaces to Transport Data into Data Warehouses: Example
                     </h5>
                     <div>
                        <div class="section">
                           <p>Suppose that you have a data warehouse containing sales data, and several data marts that are refreshed monthly. Also suppose that you are going to move one month of sales data from the data warehouse to the data mart.</p>
                           <p>Use the following steps to create a transportable tablespace:</p>
                           <ol>
                              <li><a href="transportation-data-warehouses.html#GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__CIHDFCJA">Place the Data to be Transported into its own Tablespace</a></li>
                              <li><a href="transportation-data-warehouses.html#GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__CIHCCJHE">Export the Metadata</a></li>
                              <li><a href="transportation-data-warehouses.html#GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__CIHGCGGD">Copy the Datafiles and Export File to the Target System</a></li>
                              <li><a href="transportation-data-warehouses.html#GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__CIHCJJAJ">Import the Metadata</a></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__CIHDFCJA">
                           <p class="subhead3" id="GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__GUID-F263A0F2-7CC3-4448-BC72-DAA013228851">Place the Data to be Transported into its own Tablespace</p>
                           <p>The current month's data must be placed into a separate tablespace in order to be transported. In this example, you have a tablespace <code class="codeph">ts_temp_sales</code>, which holds a copy of the current month's data. Using the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> ... <code class="codeph">AS</code> <code class="codeph">SELECT</code> statement, the current month's data can be efficiently copied to this tablespace:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE temp_jan_sales NOLOGGING TABLESPACE ts_temp_sales
AS SELECT * FROM sales 
WHERE time_id BETWEEN '31-DEC-1999' AND '01-FEB-2000';
</pre><p>Following this operation, the tablespace <code class="codeph">ts_temp_sales</code> is set to read-only:
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE ts_temp_sales READ ONLY;
</pre><p>A tablespace cannot be transported unless there are no active transactions modifying the tablespace. Setting the tablespace to read-only enforces this.</p>
                           <p>The tablespace <code class="codeph">ts_temp_sales</code> may be a tablespace that has been especially created to temporarily store data for use by the transportable tablespace features. Following <span class="q">"<a href="transportation-data-warehouses.html#GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__CIHGCGGD">Copy the Datafiles and Export File to the Target System</a>"</span>, this tablespace can be set to read/write, and, if desired, the table <code class="codeph">temp_jan_sales</code> can be dropped, or the tablespace can be re-used for other transportations or for other purposes.
                           </p>
                           <p>In a given transportable tablespace operation, all of the objects in a given tablespace are transported. Although only one table is being transported in this example, the tablespace <code class="codeph">ts_temp_sales</code> could contain multiple tables. For example, perhaps the data mart is refreshed not only with the new month's worth of sales transactions, but also with a new copy of the customer table. Both of these tables could be transported in the same tablespace. Moreover, this tablespace could also contain other database objects such as indexes, which would also be transported. 
                           </p>
                           <p>Additionally, in a given transportable-tablespace operation, multiple tablespaces can be transported at the same time. This makes it easier to move very large volumes of data between databases. Note, however, that the transportable tablespace feature can only transport a set of tablespaces which contain a complete set of database objects without dependencies on other tablespaces. For example, an index cannot be transported without its table, nor can a partition be transported without the rest of the table. You can use the <code class="codeph">DBMS_TTS</code> package to check that a tablespace is transportable.
                           </p>
                           <div class="infoboxnotealso" id="GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__GUID-BDCA88C4-C4CD-4E6A-9AB5-198A2D26A04F">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_TTS.html#ARPLS063" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for detailed information about the <code class="codeph">DBMS_TTS</code> package
                              </p>
                           </div>
                           <p>In this step, you have copied the January sales data into a separate tablespace; however, in some cases, it may be possible to leverage the transportable tablespace feature without even moving data to a separate tablespace. If the sales table has been partitioned by month in the data warehouse and if each partition is in its own tablespace, then it may be possible to directly transport the tablespace containing the January data. Suppose the January partition, <code class="codeph">sales_jan2000</code>, is located in the tablespace <code class="codeph">ts_sales_jan2000</code>. Then the tablespace <code class="codeph">ts_sales_jan2000</code> could potentially be transported, rather than creating a temporary copy of the January sales data in the <code class="codeph">ts_temp_sales</code>.
                           </p>
                           <p>However, the same conditions must be satisfied in order to transport the tablespace <code class="codeph">ts_sales_jan2000</code> as are required for the specially created tablespace. First, this tablespace must be set to <code class="codeph">READ</code> <code class="codeph">ONLY</code>. Second, because a single partition of a partitioned table cannot be transported without the remainder of the partitioned table also being transported, it is necessary to exchange the January partition into a separate table (using the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement) to transport the January data. The <code class="codeph">EXCHANGE</code> operation is very quick, but the January data will no longer be a part of the underlying <code class="codeph">sales</code> table, and thus may be unavailable to users until this data is exchanged back into the <code class="codeph">sales</code> table after the export of the metadata. The January data can be exchanged back into the <code class="codeph">sales</code> table after you complete the step <span class="q">"<a href="transportation-data-warehouses.html#GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__CIHGCGGD">Copy the Datafiles and Export File to the Target System</a>"</span>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__CIHCCJHE">
                           <p class="subhead3" id="GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__GUID-EEA676E7-B131-4519-BD9C-FFE027FF1735">Export the Metadata</p>
                           <p>The Export utility is used to export the metadata describing the objects contained in the transported tablespace. For our example scenario, the Export command could be:</p><pre class="oac_no_warn" dir="ltr">EXP TRANSPORT_TABLESPACE=y TABLESPACES=ts_temp_sales FILE=jan_sales.dmp
</pre><p>This operation generates an export file, <code class="codeph">jan_sales.dmp</code>. The export file is small, because it contains only metadata. In this case, the export file contains information describing the table <code class="codeph">temp_jan_sales</code>, such as the column names, column data type, and all other information that the target Oracle database needs in order to access the objects in <code class="codeph">ts_temp_sales</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__CIHGCGGD">
                           <p class="subhead3" id="GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__GUID-51456CA7-FE8F-4491-BD50-23ABFC7A613E">Copy the Datafiles and Export File to the Target System</p>
                           <p>Copy the data files that make up <code class="codeph">ts_temp_sales</code>, as well as the export file <code class="codeph">jan_sales.dmp</code> to the data mart platform, using any transportation mechanism for flat files. Once the datafiles have been copied, the tablespace <code class="codeph">ts_temp_sales</code> can be set to <code class="codeph">READ WRITE</code> mode if desired.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__CIHCJJAJ">
                           <p class="subhead3" id="GUID-468BE473-AEAD-4F14-9012-81D4D44ECFA2__GUID-7379D757-28D0-42F3-8C5A-D19A92F41A96">Import the Metadata</p>
                           <p>Once the files have been copied to the data mart, the metadata should be imported into the data mart:</p><pre class="oac_no_warn" dir="ltr">IMP TRANSPORT_TABLESPACE=y DATAFILES='/db/tempjan.f' 
    TABLESPACES=ts_temp_sales FILE=jan_sales.dmp
</pre><p>At this point, the tablespace <code class="codeph">ts_temp_sales</code> and the table <code class="codeph">temp_sales_jan</code> are accessible in the data mart. You can incorporate this new data into the data mart's tables. 
                           </p>
                           <p>You can insert the data from the <code class="codeph">temp_sales_jan</code> table into the data mart's sales table in one of two ways:
                           </p><pre class="oac_no_warn" dir="ltr">INSERT /*+ APPEND */ INTO sales SELECT * FROM temp_sales_jan;
</pre><p>Following this operation, you can delete the <code class="codeph">temp_sales_jan</code> table (and even the entire <code class="codeph">ts_temp_sales</code> tablespace). 
                           </p>
                           <p>Alternatively, if the data mart's sales table is partitioned by month, then the new transported tablespace and the <code class="codeph">temp_sales_jan</code> table can become a permanent part of the data mart. The <code class="codeph">temp_sales_jan</code> table can become a partition of the data mart's sales table:
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales ADD PARTITION sales_00jan VALUES
  LESS THAN (TO_DATE('01-feb-2000','dd-mon-yyyy'));
ALTER TABLE sales EXCHANGE PARTITION sales_00jan 
  WITH TABLE temp_sales_jan INCLUDING INDEXES WITH VALIDATION;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG8303"></a><div class="props_rev_3"><a id="GUID-72A4A223-C526-4C18-A41D-2F89381F9BA5" name="GUID-72A4A223-C526-4C18-A41D-2F89381F9BA5"></a><h5 id="DWHSG-GUID-72A4A223-C526-4C18-A41D-2F89381F9BA5" class="sect5"><span class="enumeration_section">17.2.3.2 </span>Other Uses of Transportable Tablespaces
                     </h5>
                     <div>
                        <p>The previous example illustra<a id="d62449e493" class="indexterm-anchor"></a><a id="d62449e495" class="indexterm-anchor"></a>tes a typical scenario for transporting data in a data warehouse. However, transportable tablespaces can be used for many other purposes. In a data warehousing environment, transportable tablespaces should be viewed as a utility (much like Import/Export or SQL*Loader), whose purpose is to move large volumes of data between Oracle databases. When used in conjunction with parallel data movement operations such as the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> ... <code class="codeph">AS</code> <code class="codeph">SELECT</code> and <code class="codeph">INSERT</code> ... <code class="codeph">AS</code> <code class="codeph">SELECT</code> statements, transportable tablespaces provide an important mechanism for quickly transporting data for many purposes.
                        </p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
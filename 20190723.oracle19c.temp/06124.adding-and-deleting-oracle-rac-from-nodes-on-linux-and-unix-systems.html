<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Extend an existing Oracle Real Application Clusters (Oracle RAC) home to other nodes and instances in the cluster, and delete Oracle RAC from nodes and instances in the cluster.">
      <meta name="description" content="Extend an existing Oracle Real Application Clusters (Oracle RAC) home to other nodes and instances in the cluster, and delete Oracle RAC from nodes and instances in the cluster.">
      <title>Adding and Deleting Oracle RAC from Nodes on Linux and UNIX Systems</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide">
      <meta property="og:description" content="Extend an existing Oracle Real Application Clusters (Oracle RAC) home to other nodes and instances in the cluster, and delete Oracle RAC from nodes and instances in the cluster.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00">
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95728-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="using-cloning-to-extend-oracle-rac-to-nodes-in-the-same-cluster.html" title="Previous" type="text/html">
      <link rel="next" href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-cloning-to-extend-oracle-rac-to-nodes-in-the-same-cluster.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Adding and Deleting Oracle RAC from Nodes on Linux and UNIX Systems</li>
            </ol>
            <a id="GUID-66AB702E-D600-4B10-9BF3-AC0E7C7BF44D" name="GUID-66AB702E-D600-4B10-9BF3-AC0E7C7BF44D"></a><a id="RACAD0067"></a>
            
            <h2 id="RACAD-GUID-66AB702E-D600-4B10-9BF3-AC0E7C7BF44D" class="sect2"><span class="enumeration_chapter">11 </span>Adding and Deleting Oracle RAC from Nodes on Linux and UNIX Systems
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Extend an existing Oracle Real Application Clusters (Oracle RAC) home to other nodes and instances in the cluster, and delete Oracle RAC from nodes and instances in the cluster.</p>
               <p>If your goal is to clone an existing Oracle RAC home to create multiple new Oracle RAC installations across the cluster, then use the cloning procedures that are described in <span class="q">"Cloning Oracle RAC to Nodes in a New Cluster"</span>.
               </p>
               <p>The topics in this chapter include the following:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-924C2E52-4C34-4500-92FB-80A453FE14A9" title="You can use DBCA in silent mode to add instances to nodes on which you have extended an Oracle Clusterware home and an Oracle Database home.">Adding Oracle RAC to Nodes with Oracle Clusterware Installed</a></p>
                  </li>
                  <li>
                     <p><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-BFA0BA52-0387-4B90-AAC9-9DABA85A36E1" title="The procedures for deleting database instances are different for policy-managed and administrator-managed databases.The procedure in this section explains how to use DBCA in interactive mode to delete an instance from an Oracle RAC database.This procedure removes Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.">Deleting Oracle RAC from a Cluster Node</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-66AB702E-D600-4B10-9BF3-AC0E7C7BF44D__GUID-156FB863-A4CA-49DD-83A9-C1AD1A5CA1AE">
                  <p class="notep1">Note:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Ensure that you have a current backup of Oracle Cluster Registry (OCR) before adding or deleting Oracle RAC by running the <code class="codeph">ocrconfig -showbackup</code> command.
                        </p>
                     </li>
                     <li>
                        <p>The phrase "target node" as used in this chapter refers to the node to which you plan to extend the Oracle RAC environment.</p>
                     </li>
                  </ul>
               </div>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-8444F1C2-5F67-46B4-ABDE-18D3AFF42D55" title="This chapter describes how to clone Oracle Real Application Clusters (Oracle RAC) database homes on Linux and UNIX systems to nodes in a new cluster.">Cloning Oracle RAC to Nodes in a New Cluster</a></li>
                     <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-75C6891F-ECDC-4D78-9176-EB7E7080FBCB" title="You can use either Oracle Enterprise Manager or DBCA to add Oracle RAC database instances to the target nodes.Add instances to nodes on which you have extended an Oracle Clusterware home and an Oracle Database home.The procedures for deleting instances are different for policy-managed and administrator-managed databases.This procedure removes the Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.">Adding and Deleting Oracle RAC from Nodes on Windows Systems</a></li>
                  </ul>
               </div>
            </div><a id="RACAD7348"></a><div class="sect2"><a id="GUID-924C2E52-4C34-4500-92FB-80A453FE14A9" name="GUID-924C2E52-4C34-4500-92FB-80A453FE14A9"></a><h3 id="RACAD-GUID-924C2E52-4C34-4500-92FB-80A453FE14A9" class="sect3">Adding Oracle RAC to Nodes with Oracle Clusterware Installed</h3>
               <div>
                  <p>Before beginning this procedure, ensure that your existing nodes have the correct path to the <code class="codeph"><span class="variable" translate="no">Grid_home</span></code> and that the <code class="codeph">$ORACLE_HOME</code> environment variable is set to the Oracle RAC home.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you are using a local (non-shared) Oracle home, then you must extend the Oracle RAC database home that is on an existing node (<code class="codeph">node1</code> in this procedure) to a target node (<code class="codeph">node3</code> in this procedure).
                        </p>
                        <p>Navigate to the <code class="codeph"><span class="variable" translate="no">Oracle_home</span>/addnode</code> directory on <code class="codeph">node1</code> and run the <code class="codeph">addnode.sh</code> script.
                        </p>
                        <p>If you want to perform a silent installation, run the <code class="codeph">addnode.sh</code> script using the following syntax:
                        </p><pre class="pre codeblock"><code>$ ./addnode.sh -silent "CLUSTER_NEW_NODES={node3}"</code></pre></li>
                     <li>
                        <p>If you have a shared Oracle home that is shared using Oracle Automatic Storage Management Cluster File System (Oracle ACFS), then do the following to extend the Oracle database home to <code class="codeph">node3</code>:
                        </p>
                        <ol>
                           <li>
                              <p>Start the Oracle ACFS resource on the new node by running the following command as <code class="codeph">root</code> from the <code class="codeph"><span class="variable" translate="no">Grid_home</span>/bin</code> directory:
                              </p><pre class="pre codeblock"><code># srvctl start filesystem -device <span class="variable" translate="no">volume_device</span> [-node <span class="variable" translate="no">node_name</span>]</code></pre><div class="infoboxnote" id="GUID-924C2E52-4C34-4500-92FB-80A453FE14A9__GUID-B9908697-0130-4954-990A-034554E60BF0">
                                 <p class="notep1">Note:</p>
                                 <p>Make sure the Oracle ACFS resources, including Oracle ACFS registry resource and Oracle ACFS file system resource where the Oracle home is located, are online on the newly added node.</p>
                              </div>
                           </li>
                           <li>
                              <p>Run the following command as the user that installed Oracle RAC from the <code class="codeph"><span class="variable" translate="no">Oracle_home</span>/oui/bin</code> directory on the node you are adding to add the Oracle RAC database home:
                              </p><pre class="pre codeblock"><code>$ ./runInstaller -attachHome ORACLE_HOME="ORACLE_HOME" "CLUSTER_NODES={node3}"
  LOCAL_NODE="node3" ORACLE_HOME_NAME="<span class="variable" translate="no">home_name</span>" -cfs</code></pre></li>
                           <li>
                              <p>Navigate to the <code class="codeph"><span class="variable" translate="no">Oracle_home</span>/addnode</code> directory on <code class="codeph">node1</code> and run the <code class="codeph">addnode.sh</code> script as the user that installed Oracle RAC using the following syntax:
                              </p><pre class="oac_no_warn" dir="ltr">$ ./addnode.sh -noCopy "CLUSTER_NEW_NODES={node3}"</pre><div class="infoboxnote" id="GUID-924C2E52-4C34-4500-92FB-80A453FE14A9__GUID-E65ADF97-29E5-4428-9870-A3B59F4C786E">
                                 <p class="notep1">Note:</p>
                                 <p>Use the <code class="codeph">-noCopy</code> option because the Oracle home on the destination node is already fully populated with software.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </li>
                     <li>
                        <p>If you have a shared Oracle home on a shared file system that <span class="italic">is not</span> Oracle ACFS, then you must first create a mount point for the Oracle RAC database home on the target node, mount and attach the Oracle RAC database home, and update the Oracle Inventory, as follows:
                        </p>
                        <ol>
                           <li>
                              <p>Run the <code class="codeph">srvctl config database -db <span class="variable" translate="no">db_name</span></code> command on an existing node in the cluster to obtain the mount point information.
                              </p>
                           </li>
                           <li>
                              <p>Run the following command as <code class="codeph">root</code> on <code class="codeph">node3</code> to create the mount point:
                              </p><pre class="pre codeblock"><code># mkdir -p <span class="variable" translate="no">mount_point_path</span></code></pre></li>
                           <li>
                              <p>Mount the file system that hosts the Oracle RAC database home.</p>
                           </li>
                           <li>
                              <p>Run the following command as the user that installed Oracle RAC from the <code class="codeph"><span class="variable" translate="no">Oracle_home</span>/oui/bin</code> directory on the node you are adding to add the Oracle RAC database home:
                              </p><pre class="pre codeblock"><code>$ ./runInstaller -attachHome ORACLE_HOME="ORACLE_HOME" "CLUSTER_NODES=
  {<span class="variable" translate="no">local_node_name</span>}" LOCAL_NODE="<span class="variable" translate="no">node_name</span>" ORACLE_HOME_NAME="<span class="variable" translate="no">home_name</span>"</code></pre></li>
                           <li>
                              <p>Update the Oracle Inventory as the user that installed Oracle RAC, as follows:</p><pre class="pre codeblock"><code>$ ./runInstaller -updateNodeList ORACLE_HOME=<span class="variable" translate="no">mount_point_path</span> "CLUSTER_NODES=
  {<span class="variable" translate="no">node_list</span>}"</code></pre><p>In the preceding command, <code class="codeph"><span class="variable" translate="no">node_list</span></code> refers to a list of all nodes where the Oracle RAC database home is installed, including the node you are adding.
                              </p>
                           </li>
                        </ol>
                     </li>
                  </ul>
                  <p>Run the <code class="codeph"><span class="variable" translate="no">Oracle_home</span>/root.sh</code> script on <code class="codeph">node3</code> as <code class="codeph">root</code>.
                  </p>
                  <div class="infoboxnote" id="GUID-924C2E52-4C34-4500-92FB-80A453FE14A9__GUID-DC6753CA-DD59-4EAD-96F8-84B88BCB2DA2">
                     <p class="notep1">Note:</p>
                     <p>Oracle recommends that you back up the OCR after you complete the node addition process.</p>
                  </div>
                  <p>You can now add an Oracle RAC database instance to the target node using either of the procedures in the following sections.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-A46AFF14-33F8-4379-AEC2-5A4F4FC8199E">Adding Policy-Managed Oracle RAC Database Instances to Target Nodes</a></p>
                     </li>
                     <li>
                        <p><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-D1BDC5B3-2041-4D1B-B5B7-ACD092B66AAC" title="You can use DBCA in silent mode to add instances to nodes on which you have extended an Oracle Clusterware home and an Oracle Database home.">Adding Administrator-Managed Oracle RAC Database Instances to Target Nodes</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../cwadd/adding-and-deleting-cluster-nodes.html#CWADD-GUID-929C0CD9-9B67-45D6-B864-5ED3B47FE458" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="RACAD8316"></a><div class="sect3"><a id="GUID-A46AFF14-33F8-4379-AEC2-5A4F4FC8199E" name="GUID-A46AFF14-33F8-4379-AEC2-5A4F4FC8199E"></a><h4 id="RACAD-GUID-A46AFF14-33F8-4379-AEC2-5A4F4FC8199E" class="sect4">Adding Policy-Managed Oracle RAC Database Instances to Target Nodes</h4>
                  <div>
                     <p>You must manually add undo and redo logs, unless you store your policy-managed database on Oracle Automatic Storage Management (Oracle ASM) and <a href="glossary.html#GUID-58E0F312-5CEC-4A57-AD7B-1058EFC3B213"><span class="xrefglossterm">Oracle Managed Files</span></a> is enabled.
                     </p>
                     <p>If there is space in a server pool to add a node and the database has been started at least once, then Oracle Clusterware adds the Oracle RAC database instance to the newly added node and no further action is necessary.</p>
                     <div class="infoboxnote" id="GUID-A46AFF14-33F8-4379-AEC2-5A4F4FC8199E__GUID-27968A40-49D7-4967-8C45-8E23D71CA529">
                        <p class="notep1">Note:</p>
                        <p>The database must have been started at least once before you can add the database instance to the newly added node.</p>
                     </div>
                     <p>If there is no space in any server pool, then the newly added node moves into the Free server pool. Use the <code class="codeph">srvctl modify srvpool</code> command to increase the cardinality of a server pool to accommodate the newly added node, after which the node moves out of the Free server pool and into the modified server pool, and Oracle Clusterware adds the Oracle RAC database instance to the node.
                     </p>
                  </div>
               </div><a id="RACAD070"></a><div class="sect3"><a id="GUID-D1BDC5B3-2041-4D1B-B5B7-ACD092B66AAC" name="GUID-D1BDC5B3-2041-4D1B-B5B7-ACD092B66AAC"></a><h4 id="RACAD-GUID-D1BDC5B3-2041-4D1B-B5B7-ACD092B66AAC" class="sect4">Adding Administrator-Managed Oracle RAC Database Instances to Target Nodes</h4>
                  <div>
                     <div class="infoboxnote" id="GUID-D1BDC5B3-2041-4D1B-B5B7-ACD092B66AAC__GUID-8EB8A5C7-BA5B-4B0D-9FD7-8CF537491B91">
                        <p class="notep1">Note:</p>
                        <p>The procedures in this section only apply to administrator-managed databases. Policy-managed databases use nodes when the nodes are available in the database’s server pool.</p>
                     </div>
                     <p>You can use either Oracle Enterprise Manager or DBCA to add Oracle RAC database instances to the target nodes.</p>
                     <p>This section describes using DBCA to add Oracle RAC database instances.</p>
                     <p>These tools guide you through the following tasks:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Creating a new database instance on each target node</p>
                        </li>
                        <li>
                           <p>Creating and configuring high availability components</p>
                        </li>
                        <li>
                           <p>Creating the Oracle Net configuration for a non-default listener from the Oracle home</p>
                        </li>
                        <li>
                           <p>Starting the new instance</p>
                        </li>
                        <li>
                           <p>Creating and starting services if you entered services information on the Services Configuration page</p>
                        </li>
                     </ul>
                     <p>After adding the instances to the target nodes, you should perform any necessary service configuration procedures, as described in <span class="q">"Workload Management with Dynamic Database Services"</span>.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="workload-management-with-dynamic-database-services.html#GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5" title="Workload management includes load balancing, enabling clients for Oracle Real Application Clusters (Oracle RAC), distributed transaction processing, and services.">Workload Management with Dynamic Database Services</a></li>
                        </ul>
                     </div>
                  </div><a id="RACAD7356"></a><div class="sect4"><a id="GUID-2AE12285-08BA-46F4-9233-790F1BEE0D72" name="GUID-2AE12285-08BA-46F4-9233-790F1BEE0D72"></a><h5 id="RACAD-GUID-2AE12285-08BA-46F4-9233-790F1BEE0D72" class="sect5">Using DBCA in Interactive Mode to Add Database Instances to Target Nodes</h5>
                     <div>
                        <p>To add a database instance to a target node with DBCA in interactive mode, perform the following steps:</p>
                        <ol>
                           <li>
                              <p>Ensure that your existing nodes have the <code class="codeph">$ORACLE_HOME</code> environment variable set to the Oracle RAC home.
                              </p>
                           </li>
                           <li>
                              <p>Start DBCA by entering <code class="codeph">dbca</code> at the system prompt from the <code class="codeph"><span class="variable" translate="no">Oracle_home</span>/bin</code> directory.
                              </p>
                              <p>DBCA performs certain CVU checks while running. However, you can also run CVU from the command line to perform various verifications.</p>
                              <p>DBCA displays the Welcome page for Oracle RAC. Click <span class="bold">Help</span> on any DBCA page for additional information.
                              </p>
                           </li>
                           <li>
                              <p>Select <span class="bold">Instance Management</span>, click <span class="bold">Next</span>, and DBCA displays the Instance Management page.
                              </p>
                           </li>
                           <li>
                              <p>Select <span class="bold">Add Instance</span> and click <span class="bold">Next</span>. DBCA displays the List of Cluster Databases page that shows the databases and their current status, such as <code class="codeph">ACTIVE</code> or <code class="codeph">INACTIVE</code>.
                              </p>
                           </li>
                           <li>
                              <p>From the List of Cluster Databases page, select the active Oracle RAC database to which you want to add an instance. Click <span class="bold">Next</span> and DBCA displays the List of Cluster Database Instances page showing the names of the existing instances for the Oracle RAC database that you selected.
                              </p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Next </span>to add a new instance and DBCA displays the Adding an Instance page.
                              </p>
                           </li>
                           <li>
                              <p>On the Adding an Instance page, enter the instance name in the field at the top of this page if the instance name that DBCA provides does not match your existing instance naming scheme.</p>
                           </li>
                           <li>
                              <p>Review the information on the Summary dialog and click <span class="bold">OK</span> or click <span class="bold">Cancel</span> to end the instance addition operation. DBCA displays a progress dialog showing DBCA performing the instance addition operation.
                              </p>
                           </li>
                           <li>
                              <p>After you terminate your DBCA session, run the following command to verify the administrative privileges on the target node and obtain detailed information about these privileges where <code class="codeph"><span class="variable" translate="no">node_list</span></code> consists of the names of the nodes on which you added database instances:
                              </p><pre class="pre codeblock"><code>cluvfy comp admprv -o db_config -d <span class="variable" translate="no">Oracle_home</span> -n <span class="variable" translate="no">node_list</span> [-verbose]</code></pre></li>
                           <li>
                              <p>Perform any necessary service configuration procedures, as described in <span class="q">"Workload Management with Dynamic Database Services"</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../cwadd/cluster-verification-utility-reference.html#CWADD-GUID-B88DC0CC-851A-4821-AB02-539D994ED524" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                              <li><a href="workload-management-with-dynamic-database-services.html#GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5" title="Workload management includes load balancing, enabling clients for Oracle Real Application Clusters (Oracle RAC), distributed transaction processing, and services.">Workload Management with Dynamic Database Services</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="RACAD8195"></a><a id="RACAD7357"></a><div class="sect4"><a id="GUID-C331D2B4-FAAF-4916-A5A1-4577D31ADD04" name="GUID-C331D2B4-FAAF-4916-A5A1-4577D31ADD04"></a><h5 id="RACAD-GUID-C331D2B4-FAAF-4916-A5A1-4577D31ADD04" class="sect5">Using DBCA in Silent Mode to Add Database Instances to Target Nodes</h5>
                     <div>
                        <p>You can use DBCA in silent mode to add instances to nodes on which you have extended an Oracle Clusterware home and an Oracle Database home.</p>
                        <p>Before you run the <code class="codeph">dbca</code> command, ensure that you have set the <code class="codeph">ORACLE_HOME</code> environment variable correctly on the existing nodes. Run DBCA, supplying values for the variables described in <a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-C331D2B4-FAAF-4916-A5A1-4577D31ADD04__CEGGDIGA" title="Describes the variables you use in DBCA syntax for silent mode. The variables are the same whether you are adding or deleting a node from the cluster.">Table 11-1</a>, as follows:
                        </p><pre class="pre codeblock"><code>dbca -silent -nodeList <span class="variable" translate="no">node_name</span> -gdbName <span class="variable" translate="no">gdb_name</span>
  [-instanceName <span class="variable" translate="no">instance_name</span> -sysDBAUserName <span class="variable" translate="no">sysdba</span> -sysDBAPassword
  <span class="variable" translate="no">password</span>]</code></pre><div class="tblformal" id="GUID-C331D2B4-FAAF-4916-A5A1-4577D31ADD04__CEGGDIGA">
                           <p class="titleintable">Table 11-1 Variables in the DBCA Silent Mode Syntax</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Variables in the DBCA Silent Mode Syntax" summary="Describes the variables you use in DBCA syntax for silent mode. The variables are the same whether you are adding or deleting a node from the cluster." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="29%" id="d39543e1378">Variable</th>
                                    <th align="left" valign="bottom" width="71%" id="d39543e1380">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d39543e1384" headers="d39543e1378 "><code class="codeph"><span class="variable" translate="no">node_name</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d39543e1384 d39543e1380 ">
                                       <p>The node on which you want to add (or delete) the instance.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d39543e1392" headers="d39543e1378 "><code class="codeph"><span class="variable" translate="no">gdb_name</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d39543e1392 d39543e1380 ">
                                       <p>Global database name.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d39543e1400" headers="d39543e1378 "><code class="codeph"><span class="variable" translate="no">instance_name</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d39543e1400 d39543e1380 ">
                                       <p>Name of the instance. Provide an instance name only if you want to override the Oracle naming convention for Oracle RAC instance names.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d39543e1408" headers="d39543e1378 "><code class="codeph"><span class="variable" translate="no">sysdba</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d39543e1408 d39543e1380 ">
                                       <p>Name of the Oracle user with <code class="codeph">SYSDBA</code> privileges.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d39543e1419" headers="d39543e1378 "><code class="codeph"><span class="variable" translate="no">password</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d39543e1419 d39543e1380 ">
                                       <p>Password for the <code class="codeph">SYSDBA</code> user.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>Perform any necessary service configuration procedures, as described in <span class="q">"Workload Management with Dynamic Database Services"</span>.
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="workload-management-with-dynamic-database-services.html#GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5" title="Workload management includes load balancing, enabling clients for Oracle Real Application Clusters (Oracle RAC), distributed transaction processing, and services.">Workload Management with Dynamic Database Services</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD7358"></a><div class="sect2"><a id="GUID-BFA0BA52-0387-4B90-AAC9-9DABA85A36E1" name="GUID-BFA0BA52-0387-4B90-AAC9-9DABA85A36E1"></a><h3 id="RACAD-GUID-BFA0BA52-0387-4B90-AAC9-9DABA85A36E1" class="sect3">Deleting Oracle RAC from a Cluster Node</h3>
               <div>
                  <p>To remove Oracle RAC from a cluster node, you must delete the database instance and the Oracle RAC software before removing the node from the cluster.</p>
                  <div class="infoboxnote" id="GUID-BFA0BA52-0387-4B90-AAC9-9DABA85A36E1__GUID-601BDDD3-78DC-4CFE-82C9-4C7D01CE21F7">
                     <p class="notep1">Note:</p>
                     <p>If there are no database instances on the node you want to delete, then proceed to <span class="q">"Removing Oracle RAC"</span>.
                     </p>
                  </div>
                  <p>This section includes the following procedures to delete nodes from clusters in an Oracle RAC environment:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-6BA60523-0558-4803-886A-743965E0D452" title="The procedures for deleting database instances are different for policy-managed and administrator-managed databases.">Deleting Instances from Oracle RAC Databases</a></p>
                     </li>
                     <li>
                        <p><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-CE995C7B-B420-4A4E-B4EA-E7A972277588" title="This procedure removes Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.">Removing Oracle RAC</a></p>
                     </li>
                     <li>
                        <p><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-8EEFAE40-5F40-44E4-B0B0-50CA80E4F289">Deleting Nodes from the Cluster</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-CE995C7B-B420-4A4E-B4EA-E7A972277588" title="This procedure removes Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.">Removing Oracle RAC</a></li>
                     </ul>
                  </div>
               </div><a id="RACAD7902"></a><a id="RACAD0072"></a><div class="sect3"><a id="GUID-6BA60523-0558-4803-886A-743965E0D452" name="GUID-6BA60523-0558-4803-886A-743965E0D452"></a><h4 id="RACAD-GUID-6BA60523-0558-4803-886A-743965E0D452" class="sect4">Deleting Instances from Oracle RAC Databases</h4>
                  <div>
                     <p>The procedures for deleting database instances are different for policy-managed and administrator-managed databases.</p>
                     <p>Deleting a policy-managed database instance involves reducing the number of servers in the server pool in which the database instance resides. Deleting an administrator-managed database instance involves using DBCA to delete the database instance.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-6BA60523-0558-4803-886A-743965E0D452__GUID-9CADA7C8-8451-4431-8AA3-42A6F76FD9E5">Deleting Policy-Managed Databases</p>
                        <p>To delete a policy-managed database, reduce the number of servers in the server pool in which a database instance resides by relocating the server on which the database instance resides to another server pool. This effectively removes the instance without having to remove the Oracle RAC software from the node or the node from the cluster.</p>
                        <p>For example, you can delete a policy-managed database by running the following commands on any node in the cluster:</p><pre class="pre codeblock"><code>$ srvctl stop instance -db <span class="variable" translate="no">db_unique_name</span> -node <span class="variable" translate="no">node_name</span>
$ srvctl relocate server -servers "<span class="variable" translate="no">server_name_list</span>" -serverpool Free</code></pre><p>The first command stops the database instance on a particular node and the second command moves the node out of its current server pool and into the Free server pool.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6BA60523-0558-4803-886A-743965E0D452__GUID-2E8B6998-D00C-480B-A1D0-650E649759A0">Deleting Instances from Administrator-Managed Databases</p>
                        <div class="infoboxnote" id="GUID-6BA60523-0558-4803-886A-743965E0D452__GUID-5FDC1BE3-822C-4BB6-91A9-84C2851505A6">
                           <p class="notep1">Note:</p>
                           <p>Before deleting an instance from an Oracle RAC database using SRVCTL to do the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If you have services configured, then relocate the services</p>
                              </li>
                              <li>
                                 <p>Modify the services so that each service can run on one of the remaining instances</p>
                              </li>
                              <li>
                                 <p>Ensure that the instance to be removed from an administrator-managed database is neither a preferred nor an available instance of any service</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-CE995C7B-B420-4A4E-B4EA-E7A972277588" title="This procedure removes Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.">Removing Oracle RAC</a></li>
                           <li><a href="workload-management-with-dynamic-database-services.html#GUID-CB82980F-8894-4142-8026-973895E03634" title="When you create a service using SRVCTL, you must start the service with a separate SRVCTL command.">Administering Services with SRVCTL</a></li>
                           <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-2BBBD86B-2ADA-4E7B-A1CA-789767223556" title="The procedure in this section explains how to use DBCA in interactive mode to delete an instance from an Oracle RAC database.">Using DBCA in Interactive Mode to Delete Instances from Nodes</a></li>
                        </ul>
                     </div>
                  </div><a id="RACAD7360"></a><div class="sect4"><a id="GUID-2BBBD86B-2ADA-4E7B-A1CA-789767223556" name="GUID-2BBBD86B-2ADA-4E7B-A1CA-789767223556"></a><h5 id="RACAD-GUID-2BBBD86B-2ADA-4E7B-A1CA-789767223556" class="sect5">Using DBCA in Interactive Mode to Delete Instances from Nodes</h5>
                     <div>
                        <p>The procedure in this section explains how to use DBCA in interactive mode to delete an instance from an Oracle RAC database.</p>
                        <p>To delete an instance using DBCA in interactive mode, perform the following steps:</p>
                        <ol>
                           <li>
                              <p>Start DBCA.</p>
                              <p>Start DBCA on a node <span class="italic">other than</span> the node that hosts the instance that you want to delete. The database and the instance that you plan to delete should be running during this step.
                              </p>
                           </li>
                           <li>
                              <p>On the DBCA Operations page, select <span class="uicontrol bold">Instance Management</span> and click <span class="uicontrol bold">Next</span>. DBCA displays the Instance Management page.
                              </p>
                           </li>
                           <li>
                              <p>On the DBCA Instance Management page, select the instance to be deleted, select <span class="uicontrol bold">Delete Instance,</span> and click <span class="uicontrol bold">Next</span>.
                              </p>
                           </li>
                           <li>
                              <p>On the List of Cluster Databases page, select the Oracle RAC database from which to delete the instance, as follows:</p>
                              <ol type="a">
                                 <li>
                                    <p>On the List of Cluster Database Instances page, DBCA displays the instances that are associated with the Oracle RAC database that you selected and the status of each instance. Select the cluster database from which you will delete the instance.</p>
                                 </li>
                                 <li>
                                    <p>Click <span class="uicontrol bold">OK</span> on the Confirmation dialog to proceed to delete the instance.
                                    </p>
                                    <p>DBCA displays a progress dialog showing that DBCA is deleting the instance. During this operation, DBCA removes the instance and the instance's Oracle Net configuration.</p>
                                    <p>Click <span class="uicontrol bold">No</span> and exit DBCA or click <span class="uicontrol bold">Yes</span> to perform another operation. If you click <span class="uicontrol bold">Yes</span>, then DBCA displays the Operations page.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>Verify that the dropped instance's redo thread has been removed by using SQL*Plus on an existing node to query the <code class="codeph">GV$LOG</code> view. If the redo thread is not disabled, then disable the thread. For example:
                              </p><pre class="pre codeblock"><code>SQL&gt; ALTER DATABASE DISABLE THREAD 2;</code></pre></li>
                           <li>
                              <p>Verify that the instance has been removed from OCR by running the following command, where <code class="codeph"><span class="variable" translate="no">db_unique_name</span></code> is the database unique name for your Oracle RAC database:
                              </p><pre class="pre codeblock"><code>$ srvctl config database -db <span class="variable" translate="no">db_unique_name</span></code></pre></li>
                           <li>
                              <p>If you are deleting more than one node, then repeat these steps to delete the instances from all the nodes that you are going to delete.</p>
                           </li>
                        </ol>
                     </div>
                  </div><a id="RACAD7361"></a><div class="sect4"><a id="GUID-17439B6B-6D3C-46AA-A585-94B636C708AC" name="GUID-17439B6B-6D3C-46AA-A585-94B636C708AC"></a><h5 id="RACAD-GUID-17439B6B-6D3C-46AA-A585-94B636C708AC" class="sect5">Using DBCA in Silent Mode to Delete Instances from Nodes</h5>
                     <div>
                        <p><a id="d39543e2209" class="indexterm-anchor"></a>You can use DBCA in silent mode to delete a database instance from a node.
                        </p>
                        <p>Run the following command, where the variables are the same as those shown in <a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-C331D2B4-FAAF-4916-A5A1-4577D31ADD04__CEGGDIGA" title="Describes the variables you use in DBCA syntax for silent mode. The variables are the same whether you are adding or deleting a node from the cluster.">Table 11-1</a> for the DBCA command to add an instance. Provide a node name only if you are deleting an instance from a node other than the one on where DBCA is running as shown in the following example where <span class="italic"><code class="codeph">password</code></span> is the password: 
                        </p><pre class="pre codeblock"><code>dbca -silent -deleteInstance [-nodeList <span class="italic">node_name</span>] -gdbName <span class="italic">gdb_name</span>
-instanceName <span class="italic">instance_name</span> [-sysDBAUserName <span class="italic">sysdba</span> -sysDBAPassword <span class="italic">password</span>]</code></pre><p>At this point, you have accomplished the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Deregistered the selected instance from its associated Oracle Net Services listeners</p>
                           </li>
                           <li>
                              <p>Deleted the selected database instance from the instance's configured node</p>
                           </li>
                           <li>
                              <p>Removed the Oracle Net configuration</p>
                           </li>
                           <li>
                              <p>Deleted the Oracle Flexible Architecture directory structure from the instance's configured node. </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7903"></a><div class="sect3"><a id="GUID-CE995C7B-B420-4A4E-B4EA-E7A972277588" name="GUID-CE995C7B-B420-4A4E-B4EA-E7A972277588"></a><h4 id="RACAD-GUID-CE995C7B-B420-4A4E-B4EA-E7A972277588" class="sect4">Removing Oracle RAC</h4>
                  <div>
                     <p>This procedure removes Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.</p>
                     <ol>
                        <li>
                           <p>If there is a listener in the Oracle RAC home on the node you are deleting, then you must disable and stop it before deleting the Oracle RAC software. Run the following commands on any node in the cluster, specifying the name of the listener and the name of the node you are deleting:</p><pre class="pre codeblock"><code>$ srvctl disable listener -l <span class="variable" translate="no">listener_name</span> -n <span class="variable" translate="no">name_of_node_to_delete</span>
$ srvctl stop listener -l <span class="variable" translate="no">listener_name</span> -n <span class="variable" translate="no">name_of_node_to_delete</span></code></pre></li>
                        <li>
                           <p>Deinstall the Oracle home—only if the Oracle home is <span class="italic">not</span> shared—from the node that you are deleting by running the following command from the <code class="codeph"><span class="variable" translate="no">Oracle_home</span>\deinstall</code> directory:
                           </p><pre class="pre codeblock"><code>deinstall -local</code></pre><div class="infoboxnote" id="GUID-CE995C7B-B420-4A4E-B4EA-E7A972277588__GUID-E306BA48-E0A8-42F1-BBBF-87442CC71DEA">
                              <p class="notep1">Caution:</p>
                              <p>If the Oracle home is shared, then <span class="italic">do not</span> run this command because it will remove the shared software. Proceed to the next step, instead.
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="RACAD7362"></a><div class="sect3"><a id="GUID-8EEFAE40-5F40-44E4-B0B0-50CA80E4F289" name="GUID-8EEFAE40-5F40-44E4-B0B0-50CA80E4F289"></a><h4 id="RACAD-GUID-8EEFAE40-5F40-44E4-B0B0-50CA80E4F289" class="sect4">Deleting Nodes from the Cluster</h4>
                  <div>
                     <p>After you delete the database instance and the Oracle RAC software, you can begin the process of deleting the node from the cluster. You accomplish this by running scripts on the node you want to delete to remove the Oracle Clusterware installation and then you run scripts on the remaining nodes to update the node list.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../cwadd/adding-and-deleting-cluster-nodes.html#CWADD-GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
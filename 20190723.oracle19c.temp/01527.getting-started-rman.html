<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Getting Started with RMAN</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery User's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96241-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="introduction-backup-recovery.html" title="Previous" type="text/html">
      <link rel="next" href="part-starting-configuring-rman.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
    <meta name="dcterms.isVersionOf" content="BRADV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-backup-recovery.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="part-starting-configuring-rman.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-overview-backup-recovery.html" property="item" typeof="WebPage"><span property="name"> Overview of Backup and Recovery </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Getting Started with RMAN</li>
            </ol>
            <a id="GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B" name="GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B"></a><a id="BRADV89346"></a>
            
            <h2 id="BRADV-GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B" class="sect2"><span class="enumeration_chapter">2 </span> Getting Started with RMAN
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter is intended for new users who want to start using RMAN right away without first reading the more detailed chapters in this book. This chapter provides the briefest possible digest of the most important RMAN concepts and tasks. It is not a substitute for the rest of the backup and recovery documentation set.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="getting-started-rman.html#GUID-8B307A7B-5040-4950-B349-E7DE59413CBE" title="Recovery Manager (RMAN) is an Oracle Database client that performs backup and recovery tasks on your databases and automates administration of your backup strategies. It greatly simplifies backing up, restoring, and recovering database files.">Overview of the RMAN Environment</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E" title="The RMAN backup and recovery environment is preconfigured for each target database. The configuration is persistent and applies to all subsequent operations on this target database, even if you exit and restart RMAN.">Showing the Default RMAN Configuration</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022" title="Use the BACKUP command to back up files. RMAN backs up data to the configured default device for the type of backup requested.">Backing Up a Database</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8" title="RMAN can use the information stored in the RMAN repository to generate reports on backup activities.">Reporting on RMAN Operations</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415" title="RMAN repository metadata is always stored in the control file of the target database. The RMAN maintenance commands use this metadata when managing backups.">Maintaining RMAN Backups</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-F24568FC-0546-4CB0-B843-87F0A95D1649" title="Data Recovery Advisor is an Oracle Database tool that provides an infrastructure for diagnosing persistent data failures, presenting repair options to the user, and executes repairs at the userâ€™s request.">Diagnosing and Repairing Failures with Data Recovery Advisor</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1" title="You can use the Oracle Flashback Database to rewind the whole database to a past time. Unlike media recovery, you do not need to restore data files to return the database to a past state.">Rewinding a Database with Flashback Database</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205" title="Use the RESTORE and RECOVER commands for RMAN restore and recovery of physical database files.">Restoring and Recovering Database Files</a></p>
                  </li>
               </ul>
            </div><a id="BRADV89347"></a><div class="props_rev_3"><a id="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE" name="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE"></a><h3 id="BRADV-GUID-8B307A7B-5040-4950-B349-E7DE59413CBE" class="sect3"><span class="enumeration_section">2.1 </span>Overview of the RMAN Environment
               </h3>
               <div>
                  <p>Recovery Manager (RMAN) is an Oracle Database client that performs backup and recovery tasks on your databases and automates administration of your backup strategies. It greatly simplifies backing up, restoring, and recovering database files.</p>
                  <p>The RMAN environment consists of the utilities and databases that play a role in backing up your data. At a minimum, the environment for RMAN must include the following components:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A <a href="glossary.html#GUID-272C4366-303F-4629-9679-1379AAC3FBC1"><span class="xrefglossterm">target database</span></a></p>
                        <p>An Oracle Database to which RMAN is connected with the <code class="codeph">TARGET</code> keyword. A target database is a database on which RMAN is performing backup and recovery operations. RMAN always maintains metadata about its operations on a database in the control file of the database. The RMAN metadata is known as the <a href="glossary.html#GUID-F5643EDD-CE1B-4A9F-9E6E-ADDFD6452341"><span class="xrefglossterm">RMAN repository</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>The <a href="glossary.html#GUID-BAF6F6F1-D4F1-4F46-B1B6-9F662B7AB35D"><span class="xrefglossterm">RMAN client</span></a></p>
                        <p>An Oracle Database executable that interprets commands, directs server sessions to execute those commands, and records its activity in the target database control file. The RMAN executable is automatically installed with the database and is typically located in the same directory as the other database executables. For example, the RMAN client on Linux is located in <code class="codeph">$ORACLE_HOME/bin</code>.
                        </p>
                     </li>
                  </ul>
                  <p>Some environments use the following optional components:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A <a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">fast recovery area</span></a></p>
                        <p>A disk location in which the database can store and manage files related to backup and recovery. You set the fast recovery area location and size with the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10234" target="_blank"><code class="codeph">DB_RECOVERY_FILE_DEST </code></a>and <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10235" target="_blank"><code class="codeph">DB_RECOVERY_FILE_DEST_SIZE</code></a> initialization parameters.
                        </p>
                     </li>
                     <li>
                        <p>A <a href="glossary.html#GUID-26FF62D0-5938-481D-B7B9-929BC971813E"><span class="xrefglossterm">media management software</span></a></p>
                        <p>An application required for RMAN to interact with sequential media devices such as tape libraries. A media manager controls these devices during backup and recovery, managing the loading, labeling, and unloading of media. Media management devices are sometimes called <a href="glossary.html#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a> (system backup to tape) devices.
                        </p>
                     </li>
                     <li>
                        <p>A <a href="glossary.html#GUID-CBFA8015-2DFF-42B1-A818-D6C5B92C608F"><span class="xrefglossterm">recovery catalog</span></a></p>
                        <p>A separate database schema used to record RMAN activity against one or more target databases. A recovery catalog preserves RMAN repository metadata if the control file is lost, making it much easier to restore and recover following the loss of the control file. The database may overwrite older records in the control file, but RMAN maintains records forever in the catalog unless the records are deleted by the user.</p>
                     </li>
                  </ul>
                  <p>This chapter explains how to use RMAN in the most basic configuration, which is <span class="italic">without</span> a recovery catalog or media manager.
                  </p>
                  <div class="infoboxnotealso" id="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE__GUID-33AC8CAF-28BD-4CC0-B11E-0874228CC4C1">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="rman-architecture.html#GUID-8ECC1FB0-7D25-4883-B9A6-2593FDB35940" title="The Recovery Manager environment consists of the various applications and databases that play a role in a backup and recovery strategy.Use the RMAN command-line client to enter commands that you can use to manage all aspects of backup and recovery operations.An RMAN channel represents one stream of data to a device, and corresponds to one database server session. During a backup or restore operation, the channel reads data from the input device, processes it, and writes it to the output device.The RMAN-supported device types are DISK and SBT (system backup to tape). RMAN can use automatic channels or manual channels for backup and recover operations.The RMAN repository is a collection of metadata about the target databases that RMAN uses for backup, recovery, and maintenance.The Oracle Media Management Layer (MML) API lets third-party vendors build media management software that works with RMAN to allow backups to sequential media devices such as tape drives.Before performing backup or restore to a media manager, you must allocate one or more channels to handle the communication with the media manager. You can also configure default channels for the media manager. The default channels are used for all backup and recovery tasks that employ the media manager and for which you have not explicitly allocated channels.Oracle Secure Backup is a media manager that provides reliable and secure data protection through file system backup to tape. All major tape drives and tape libraries in SAN, Gigabit Ethernet, and SCSI environments are supported.The Oracle Backup Solutions Program (BSP), part of the Oracle PartnerNetwork, is a group of media manager vendors whose products are compliant with Oracle's MML specification. Several products may be available for your platform from media management vendors. The fast recovery area is an optional disk location that can be used to store recovery-related files.Data Guard maintains standby databases as transactionally consistent copies of production database. A standby database can be either a physical standby database or a logical standby database.To simplify ongoing use of RMAN for backup and recovery, you can set some persistent configuration settings for each primary and physical standby database in a Data Guard environment. These settings control many aspects of RMAN behavior. For example, you can configure the backup retention policy, default destinations for backups to tape or disk, or default backup device type.RMAN uses a recovery catalog to track file names for all database files in a Data Guard environment. RMAN commands use the recovery catalog metadata to function transparently across different physical databases in the Data Guard environment. For example, you can back up a tablespace on a physical standby database and restore and recover it on the primary database. Similarly, you can back up a tablespace on a primary database and restore and recover it on a physical standby database.The recovery catalog tracks the files in the Data Guard environment by associating every database file or backup file with a DB_UNIQUE_NAME. The database that creates a file is associated with the file.The accessibility of a backup is different from its association. In a Data Guard environment, the recovery catalog considers disk backups as accessible only to the database with which they are associated, whereas tape backups created on one database are accessible to all databases.Recovery Appliance provides a centralized remote repository for backups of all target databases in the enterprise. Backups and backup metadata for all target databases is managed by a central recovery catalog (the Recovery Appliance catalog) on Recovery Appliance.">Recovery Manager Architecture</a> for a more detailed overview of the RMAN environment
                           </p>
                        </li>
                        <li>
                           <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">BACKUP</code> command syntax and semantics
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="BRADV549"></a><a id="BRADV89348"></a><div class="props_rev_3"><a id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" name="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D"></a><h3 id="BRADV-GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" class="sect3"><span class="enumeration_section">2.2 </span>Starting RMAN and Connecting to a Database: Quick Start
               </h3>
               <div>
                  <p>Before you perform any operations using RMAN, you must connect to a target database.</p>
                  <div class="section">
                     <p>The RMAN client is started by issuing the <code class="codeph">rman</code> command at the command prompt of your operating system. RMAN displays a prompt for your commands as shown in the following example:
                     </p><pre class="oac_no_warn" dir="ltr">% rman
RMAN&gt;
</pre><p>RMAN connections to a database are specified and authenticated in the same way as SQL*Plus connections to a database. The only difference is that RMAN connections to a target or auxiliary database require either the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege. Any user can be granted this privilege. 
                     </p>
                     <div class="infoboxnote" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-2023C49E-B271-4D88-B962-102239DBA5DC">
                        <p class="notep1">Caution:</p>
                        <p>Good security practice requires that you not enter passwords in plain text on the command line. Enter passwords in RMAN only when requested by an RMAN prompt. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=DBSEG0032" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> to learn about password protection.
                        </p>
                     </div>
                     <p>You can connect to a database with command-line options or by using the <a href="../rcmrf/CONNECT.html#RCMRF114" target="_blank"><code class="codeph">CONNECT TARGET</code></a> command. The following example starts RMAN and then connects to a target database through Oracle Net as user <code class="codeph">sbu</code>, which is created with the <code class="codeph">SYSBACKUP</code> privilege. RMAN prompts for a password.
                     </p><pre class="oac_no_warn" dir="ltr">% rman
RMAN&gt; CONNECT TARGET "sbu@prod AS SYSBACKUP"

target database Password: <span class="italic">password</span>
connected to target database: PROD (DBID=39525561)
</pre><p>When using the <a href="glossary.html#GUID-665B741C-5624-40B5-81FF-93B1EC67FC56"><span class="xrefglossterm">multitenant architecture</span></a>, you can connect to the <a href="glossary.html#GUID-EA3DB8F4-F68E-4FC5-A599-32A4886FFF8A"><span class="xrefglossterm">root</span></a> or to a specified <a href="glossary.html#GUID-D4239448-A344-41EF-9566-0B7716FEAE72"><span class="xrefglossterm">pluggable database (PDB)</span></a> as described in <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD" title="You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).">Making RMAN Connections to a CDB</a>"</span>.
                     </p>
                     <p>To quit the RMAN client, enter <code class="codeph">EXIT</code> at the RMAN prompt:
                     </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; EXIT</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-8B3350B3-06E9-499D-A575-C27B05E248CE">Syntax of Common RMAN Command-line Options</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">RMAN 
[ TARGET <span class="italic">connectStringSpec</span> 
| { CATALOG <span class="italic">connectStringSpec</span> } 
| LOG ['] <span class="italic">filename</span> ['] [ APPEND ]
.
.
. 
]...

connectStringSpec::=
['] [<span class="italic">userid</span>] [/ [<span class="italic">password</span>]] [@<span class="italic">net_service_name</span>] [']
</pre><p>The following example appends the output from an <a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a> to a text file at <code class="codeph">/tmp/msglog.log</code></p><pre class="oac_no_warn" dir="ltr">% rman TARGET / LOG /tmp/msglog.log APPEND</pre><div class="infoboxnotealso" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-C695D47B-3E10-4D41-8E89-B50F6FD73377">
                        <p class="notep1">See Also:</p>
                        <p><a href="starting-interacting-with-rman-client.html#GUID-E4E287F5-5F36-431A-B069-F360A5B4BC7C" title="The RMAN executable is automatically installed with the database and is typically located in the same directory as the other database executables. For example, the RMAN client on Linux is located in $ORACLE_HOME/bin.You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.To perform useful work, the RMAN client must connect to a database.Users connecting with RMAN to a target or auxiliary database require either the SYSDBA or SYSBACKUP system privilege. RMAN connections to a target or auxiliary database can be made using operating system authentication.Use a password file for either local or remote access. If a database uses a password file to authenticate administrative users, then RMAN can connect using a password.If you start RMAN without a connect string on the operating system command line, then you must issue a CONNECT TARGET command at the RMAN prompt to connect to a target database.To connect to a target database from the operating system command line, enter the rman command followed by the connection information. You can begin executing commands after the RMAN prompt is displayed.You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).You can perform RMAN operations on a whole CDB, the root only, or one or more PDBs. Certain restrictions apply when you connect directly to a pluggable database (PDB):There are several ways to connect as target to the root. You can connect to a PDB either from the RMAN prompt or the operating system command line.You can make a database connection by creating an RMAN command file containing a CONNECT command..To use the DUPLICATE command, you must connect to an auxiliary instance. Performing tablespace point-in-time recovery (TSPITR) may also require a connection to an auxiliary instance.When you are diagnosing errors that RMAN encounters in connecting to the target, catalog and auxiliary databases, consider using SQL*Plus to connect to the databases directly. This action can reveal underlying problems with the connection information or the databases.RMAN connects to target and auxiliary databases using the SYSDBA or SYSBACKUP privilege. Thus, when you use SQL*Plus to diagnose connection problems to the target or auxiliary databases, request a SYSDBA or SYSBACKUP connection to reproduce RMAN behavior.Use SQL*Plus to diagnose recovery catalog connection problems.By default, RMAN writes command output to standard output. To redirect output to a log file, enter the LOG parameter on the command line when you start RMAN.Before invoking RMAN, it may be useful to set the NLS_DATE_FORMAT and NLS_LANG environment variables. These variables determine the format used for the time parameters in RMAN commands such as RESTORE, RECOVER, and REPORT.When the RMAN client is ready for your commands, it displays the command promptFor repetitive tasks, you can create a text file containing RMAN commands, and start the RMAN client with the @ argument, followed by a file name.The comment character in RMAN is a pound sign (#). All text from the pound sign to the end of the line is ignored. When running a command file, you can specify one or more values in a USING clause for use in substitution variables in a command file. In this way, you can make your command files dynamic.You can test RMAN commands for syntactic correctness without executing them. Use the command-line argument CHECKSYNTAX to start the RMAN client in a mode in which it only parses the commands that you enter and returns an RMAN-00558 error for commands that are not legal RMAN syntax.You can check the syntax of RMAN commands interactively without actually executing the commands.To test commands in a command file, start RMAN with the CHECKSYNTAX parameter and use the @ command to name the command file to be passed.The RMAN pipe interface is an alternative method for issuing commands to RMAN and receiving the output from those commands. Using this interface, it is possible to write a portable programmatic interface to RMAN.This example assumes that the application controlling RMAN wants to run multiple commands in succession. After each command is sent down the pipe and executed and the output returned, RMAN pauses and waits for the next command.This example assumes that the application controlling RMAN wants to run one or more commands as a single job. After running the commands that are on the pipe, RMAN exits.">Starting and Interacting with the RMAN&nbsp;Client</a>, to learn more about starting and using the RMAN client
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV550"></a><a id="BRADV89349"></a><div class="props_rev_3"><a id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E" name="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E"></a><h3 id="BRADV-GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E" class="sect3"><span class="enumeration_section">2.3 </span>Showing the Default RMAN Configuration
               </h3>
               <div>
                  <p>The RMAN backup and recovery environment is preconfigured for each target database. The configuration is persistent and applies to all subsequent operations on this target database, even if you exit and restart RMAN.</p>
                  <div class="section">
                     <p>RMAN configuration settings can specify backup devices, set up connections to those devices (known as <a href="glossary.html#GUID-D7D8E7D7-3CD3-4FCF-AF75-AF2BE11A366F"><span class="xrefglossterm">channel</span></a>s), set policies affecting backup strategy, and more. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E__GUID-A990043F-E36F-422E-B5E2-6CD3B08C1368">To show the current configuration for a database:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                     <li class="stepexpand"><span>Run the <code class="codeph">SHOW ALL</code> command.</span><div>
                           <p>For example, enter the command at the RMAN prompt as follows:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; SHOW ALL;
</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>The output lists the <code class="codeph">CONFIGURE</code> commands to re-create this configuration.
                     </p>
                     <div class="infoboxnotealso" id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E__GUID-0A6ED498-21EB-40CA-9276-40A1786B32C6">
                        <p class="notep1">See Also:</p>
                        <p><a href="configuring-rman-client-basic.html#GUID-5155F8E6-6E35-4261-9CC1-F12DAA9FAC5B" title="RMAN provides sensible defaults for most parameters required to perform basic backup and recovery. You can modify the value of default parameters or override these values for a particular session.You can use the SHOW command to display the current value of RMAN configured settings for the target database. You can also view whether these commands are currently set to their default values.Backups for which no destination device type is specified are directed to the configured default device. RMAN is preconfigured to use disk as the default device type. No additional configuration is necessary.The BACKUP command can create either backup sets or image copies. For disk, you can configure RMAN to create either backup sets or image copies as its default backup type with the CONFIGURE DEVICE TYPE DISK BACKUP TYPE TO command. An RMAN channel is a connection to a database server session. RMAN uses channels to perform most tasks.Use the CONFIGURE CHANNEL command to configure options for disk or SBT channels. You can configure generic channel settings for a device type, that is, a template that is used for any channels created based on configured settings for that device.By default, RMAN allocates one disk channel for all operations. You can specify different options for this channel, for example, a new default location for backups.The number of channels available for a device type when you run a command determines whether RMAN reads or writes in parallel. As a rule, the number of channels used in executing a command should match the number of devices accessed. If you manually allocate a channel during a job, then RMAN disregards any configured channel settings.You can configure RMAN to automatically back up the control file and server parameter file. The autobackup occurs whenever a backup record is added.By default, the format of the autobackup file for all configured devices is the substitution variable %F in the FORMAT clause.The SET CONTROLFILE AUTOBACKUP FORMAT command, which you can specify either within a RUN command or at the RMAN prompt, overrides the configured autobackup format in the current session only. On most platforms, to back up to and restore from sequential media such as tape you must integrate a media management software with your Oracle database. You can use Oracle Secure Backup, which supports both database and file system backups to tape, as your media manager. Before attempting to use RMAN with a media manager, determine the location of the media management library. After installing the media management software, perform the configuration required by your vendor so that the software can accept RMAN backups. After you have confirmed that the database server can load the media management library, test to ensure that RMAN can back up to the media manager. The ALLOCATE CHANNEL command is used to perform a basic test of RMAN communication with the media manager.After testing a channel allocation on the media manager, create and restore a test backup.Configuring SBT channels creates a persistent setting that is the default used for backup and recovery operations with a media manager.A backup piece name is determined by the FORMAT string specified in the BACKUP command, CONFIGURE CHANNEL command, or ALLOCATECHANNEL command.The easiest technique for backing up to a media manager is to configure automatic SBT channelsRMAN commands can be used to back up target databases to Zero Data Loss Recovery Appliance (Recovery Appliance). Certain configuration steps are required to use the Recovery Appliance as a centralized repository for the target database backups.Before you can use RMAN to back up a target database to Zero Data Loss Recovery Appliance (Recovery Appliance), you must install the Recovery Appliance backup module in the Oracle home of the target database.RMAN configuration is required before you can back up Oracle databases to Zero Data Loss Recovery Appliance (Recovery Appliance).Before using RMAN to back up target databases to Zero Data Loss Recovery Appliance (Recovery Appliance), you need to determine the location of the Recovery Appliance backup module on the target database host. This location is used while configuring or allocating RMAN channels for Recovery Appliance.The client configuration file, stored on the protected database, contains the configuration settings that are used by the Zero Data Loss Recovery Appliance (Recovery Appliance) backup module to communicate with the Recovery Appliance. This file is created automatically when the Recovery Appliance backup module is installed.The fast recovery area feature enables you to set up a disk area where the database can create and manage a variety of files related to backup and recovery. Use of the fast recovery area is strongly recommended. Consider configuring a fast recovery area as a first step in implementing a backup strategy.The fast recovery area can contain control files, online redo logs, archived redo logs, flashback logs, and RMAN backups. The fast recovery area can be used with Oracle Managed Files (OMF) and Automatic Storage Management (ASM)Space in the fast recovery area is balanced among backups and archived logs that must be kept according to the retention policy, and other files that may be subject to deletion. You enable the fast recovery area by setting two initialization parameters. These parameters enable the fast recovery area with or without having to shut down and restart the database instance.The larger the fast recovery area is, the more useful it becomes. Ideally, the fast recovery area is large enough to contain the control files, online redo logs, archived redo logs, and flashback logs. It should be able to contain a copy of all data files in the database and the incremental backups used by your chosen backup strategy.Use database initialization parameters to set the location and size of the fast recovery area.You can use the ALTER SYSTEM command to disable the fast recovery area.Use initialization parameters to configure the default locations for control files and redo logs. The initialization parameters CONTROL_FILES, DB_CREATE_ONLINE_LOG_DEST_n, DB_RECOVERY_FILE_DEST, and DB_CREATE_FILE_DEST all interact to determine the location where the database control files are created.Oracle recommends that you the use fast recovery area as an archiving location because the archived logs are automatically managed by the database. Certain RMAN commands or implicit actions (such as control file autobackups) can create files in the fast recovery area. The backup retention policy specifies which backups must be retained to meet your data recovery requirements.The REDUNDANCY parameter of the CONFIGURE RETENTION POLICY command specifies how many full or level 0 backups of each data file and control file that RMAN keeps. The default retention policy is REDUNDANCY 1.The RECOVERY WINDOW parameter of the CONFIGURE command specifies the number of days between the current time and the earliest point of recoverability.When you disable the retention policy, RMAN does not consider any backup as obsolete.Run the RMAN CONFIGURE command to enable and disable backup optimization. Backup optimization skips the backup of files in certain circumstances if the identical file or an identical version of the file has been backed up.When you enable backup optimization, the BACKUP command skips backing up files when the identical file has been backed up to the specified device type.Backup optimization is not always applied when backing up to SBT devices.By default, backup optimization is configured to OFF. You can use the SHOW BACKUP OPTIMIZATION command to view the current settings of backup optimization.You can use RMAN to create a persistent configuration that governs when archived redo logs are eligible for deletion from disk.You can use the CONFIGURE ARCHIVELOG DELETION POLICY command to specify when archived redo logs are eligible for deletion.By default, there is no archived redo log deletion policy and this is why the archive redo log policy is set to the NONE clause.You can use the CONFIGURE ARCHIVELOG DELETION POLICY BACKED UP integer TIMES TO DEVICE TYPE command to enable an archived log deletion policy. This configuration specifies that archived logs are eligible for deletion only when the specified number of archived log backups exist on the specified device type.By default the archived redo log deletion policy is set to NONE.If you use RMAN in a Data Guard environment, then you can use the CONFIGURE command to register and configure settings for the physical databases in this environment."> Configuring the RMAN Environment</a>, and <a href="configuring-rman-client-advanced.html#GUID-2210B194-FDA8-4BB4-BC1E-DBE7DBEACB4A" title="The CONFIGURE CHANNEL command is used to configure RMAN channel options.Whether you allocate channels manually or use automatic channel allocation, you can use channel commands and options to control behavior. In addition to configuring parameters that apply to all channels of a particular type, you can also use the CONFIGURE command to configure parameters that apply to one specific channel. The PARALLELISM setting is not constrained by the number of specifically configured channels. Backup options enable you to control aspects such as backup size, backup compression, and backup encryption.The CONFIGURE MAXSETSIZE command limits the size of backup sets created on a channel. This CONFIGURE setting applies to any channel, whether manually allocated or configured, when the BACKUP command is used to create backup sets. The default value is given in bytes and is rounded down to the lowest kilobyte value.Backup piece size is an issue when it exceeds the maximum file size permitted by the file system or media management software. You can use the MAXPIECESIZE parameter of the CONFIGURE CHANNEL or ALLOCATE CHANNEL command to limit the size of backup pieces.Use the CONFIGURE ... BACKUP COPIES command to specify how many copies of each backup piece are created on the specified device type for the specified type of file. This type of backup is known as a duplexed backup set.Sometimes you may want to omit a specified tablespace from part of the regular backup schedule. Use the CONFIGURE command to configure tablespace exclusion.RMAN supports precompression processing and binary compression of backup sets. The CONFIGURE COMPRESSION ALGORITHM command enables you to configure compression options.Better backup compression ratios are achieved by consolidating the free space in each data block, and setting that free space to binary zeroes. This precompression processing stage has the most benefit for data blocks that have been the subject of many deletes and inserts operations. Conversely, it has no effect on data blocks that are still in their initial loaded state.Oracle Database provides two categories of compression algorithms: a default compression algorithm and a group of compression algorithms available with the Oracle Advanced Compression option.Use the CONFIGURE command to configure the default compression algorithm, which does not require the Oracle Advanced Compression option.For improved security, you can configure backup encryption for RMAN backup sets. Encrypted backups cannot be read if they are obtained by unauthorized users.The V$RMAN_ENCRYPTION_ALGORITHMS view contains a list of encryption algorithms supported by RMAN. If no encryption algorithm is specified, then the default encryption algorithm is 128-bit Advanced Encryption Standard (AES).Transparent encryption can create and restore encrypted backups with no DBA intervention, if the required Oracle key management infrastructure is available. Password encryption requires that the DBA provide a password when creating and restoring encrypted backups. Restoring a password-encrypted backup requires the same password that was used to create the backup.Dual-mode encrypted backups can be restored either transparently or by specifying a password. You can use the CONFIGURE command to persistently configure transparent encryption of backups. You can use the CONFIGURE command to persistently configure the default algorithm to use for encryption when writing backup sets.You may want to set the names of data files in the auxiliary instance when performing operations such as data file tablespace point-in-time recovery (TSPITR) or data transfer with RMAN. You set these names before starting the TSPITR or database duplication.When RMAN needs a read-consistent version of the control file, it creates a temporary snapshot control file. RMAN needs a snapshot control file when resynchronizing with the recovery catalog or when making a backup of the current control file.You can see the current snapshot location by running the SHOW command. Use the CONFIGURE SNAPSHOT CONTROLFILE NAME TO 'filepath' command to change the name and path of the snapshot control file. Subsequent snapshot control files that RMAN creates use the specified name and path.RMAN cannot connect to a target database through a shared server dispatcher. RMAN requires a dedicated server process. A data block lost write occurs when an I/O subsystem acknowledges the completion of the block write, but the write did not occur in the persistent storage. On a subsequent block read, the I/O subsystem returns the stale version of the data block, which might be used to update other blocks of the database, thereby corrupting it.Shadow lost write protection provides fast detection and immediate response to a data block lost rewrite thereby minimizing data loss and database repair time. A standby database is not mandatory for using shadow lost write protection."> Configuring the RMAN Environment: Advanced Topics</a>, to learn how to configure the RMAN environment
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV89350"></a><div class="props_rev_3"><a id="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022" name="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022"></a><h3 id="BRADV-GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022" class="sect3"><span class="enumeration_section">2.4 </span>Backing Up a Database: Quick Start
               </h3>
               <div>
                  <p>Use the BACKUP command to back up files. RMAN backs up data to the configured default device for the type of backup requested. </p>
                  <p>By default, RMAN creates backups on disk. If a fast recovery area is enabled, and if you do not specify the <code class="codeph">FORMAT</code> parameter (see <a href="getting-started-rman.html#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ" title="Common BACKUP options">Table 2-1</a>), then RMAN creates backups in the recovery area and automatically gives them unique names.
                  </p>
                  <p>By default, RMAN creates backup sets rather than image copies. A <a href="glossary.html#GUID-6AA43E7D-9946-4C41-A62F-01E5BACEB8A7"><span class="xrefglossterm">backup set</span></a> consists of one or more backup pieces, which are physical files written in a format that only RMAN can access. A <a href="glossary.html#GUID-EA6CE3E8-6986-4512-AF66-710D80376093"><span class="xrefglossterm">multiplexed backup set</span></a> contains the blocks from multiple input files. RMAN can write backup sets to disk or tape.
                  </p>
                  <p>If you specify <code class="codeph">BACKUP</code> <code class="codeph">AS</code> <code class="codeph">COPY</code>, then RMAN copies each file as an <a href="glossary.html#GUID-397CB99E-3F07-4980-96B3-9D0D0ABBABEA"><span class="xrefglossterm">image copy</span></a>, which is a bit-for-bit copy of a database file created on disk. Image copies are identical to copies created with operating system commands like <code class="codeph">cp</code> on Linux or <code class="codeph">COPY</code> on Windows, but are recorded in the RMAN repository and so are usable by RMAN. You can use RMAN to make image copies while the database is open.
                  </p>
                  <p>The following sections describe backing up databases in different modes:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC" title="The BACKUP command includes a host of options, parameters, and clauses that control backup output.">About Typical RMAN Backup Options</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A" title="If a database runs in ARCHIVELOG mode, then you can back up the database while it is open.">Backing Up a Database in ARCHIVELOG Mode</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255" title="If a database runs in NOARCHIVELOG mode, then the only valid database backup is a consistent backup.">Backing Up a Database in NOARCHIVELOG Mode</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-0B997E06-7881-444D-A910-CFC37C25DF72" title="Incremental backups capture block-level changes to a database made after a previous incremental backup.">Making Incremental Backups</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB" title="Incrementally updated backups enable you to implement an efficient incremental forever backup strategy.">Making Incrementally Updated Backups</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-24321560-D43E-4E25-8A32-99E4C5A3F940" title="RMAN supports the use of command files to manage recurring tasks such as weekly backups.">Scripting RMAN Operations</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022__GUID-604D4F5F-5BD6-46E8-9793-355357A945AE">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-B3380142-ABCD-437F-9E06-B219D74E6738" title="Use the RMAN BACKUP command to create both consistent and inconsistent backups.A consistent backup occurs when the database is in a consistent state. You can use the BACKUP command to make consistent backups of the database.Any database backup that is not consistent is an inconsistent backup. A backup made when the database is open is inconsistent, as is a backup made after an instance failure or SHUTDOWN ABORT command.You can create RMAN backups or user-managed backups.When you execute the BACKUP command in RMAN, you create one or more backup sets or image copies. By default, RMAN creates backup sets regardless of whether the destination is disk or a media manager.RMAN can store backup data in a logical structure called a backup set, which is the smallest unit of an RMAN backup.RMAN can use block compression when creating backup sets.When employing unused block compression, RMAN skips reading, and backing up, any database blocks that are not currently allocated to some database object. This is regardless of whether those blocks had previously been allocated.When employing null block compression, RMAN omits from its output any block that has never contained data. RMAN supports binary compression of backup sets. Binary compression is only enabled when you specify AS COMPRESSED BACKUPSET in the BACKUP command, or one-time with the CONFIGURE DEVICE TYPE [DISK | SBT] BACKUP TYPE TO COMPRESSED BACKUPSET command.In backup undo optimization, RMAN excludes undo not needed for recovery of a backup, that is, for transactions that have been committed. RMAN supports backup encryption for backup sets. You can use keystore-based transparent encryption, password-based encryption, or both. You can either let RMAN determine a unique name for backup pieces or use the FORMAT clause to specify a name. By default a backup set contains one backup piece. To restrict the size of each backup piece, specify the MAXPIECESIZE option of the CONFIGURE CHANNEL or ALLOCATE CHANNEL commands. You use the backupSpec clause of the BACKUP command to specify the objects to be backed up. Each backupSpec clause produces at least one backup set.When creating backup sets, RMAN can simultaneously read multiple files from disk and then write their blocks into the same backup set. For example, RMAN can read from two data files simultaneously, and then combine the blocks from these data files into a single backup piece. The combination of blocks from multiple files is called backup multiplexing.During a proxy copy, RMAN turns over control of the data transfer to a media manager that supports this feature. Proxy copy can only be used with media managers that support it and cannot be used with channels of type DISK. The PROXY option of the BACKUP command specifies that a backup is a proxy copy.An image copy is an exact copy of a single data file, archived redo log file, or control file. To create image copies and have them recorded in the RMAN repository, you run the RMAN BACKUP AS COPY command. RMAN can use image copies created by mechanisms outside of RMAN, such as native operating system file copy commands or third-party utilities that leave image copies of files on disk. This type of copy is known as a user-managed backup or operating system backup.You can use the RMAN BACKUP command to back up data blocks from sparse data files, tablespaces containing sparse data files, sparse pluggable databases (PDBs), and multitenant container databases (CDBs) containing sparse PDBs. A preplugin backup is an RMAN backup of a non-CDB or a PDB that was created before the non-CDB or PDB was plugged in to a different CDB.RMAN enables you to make multiple, identical copies of backups.The RMAN BACKUP BACKUPSET command backs up backup sets that were created on disk. The command is a useful way to spread backups among multiple media.Having recent backups of your control file and server parameter file is extremely valuable in many recovery situations. To ensure that you have backups of these files, the database supports control file and server parameter file autobackups. Depending on the configuration of the target database, RMAN can perform autobackups of the control file and server parameter file.The first channel allocated during the backup job creates the autobackup and places it into its own backup set. For autobackups after database structural changes, the server process associated with the structural change makes the backup.An incremental backup copies only those data blocks that have changed since a previous backup. You can use RMAN to create incremental backups of data files, tablespaces, or the whole database.RMAN can create multilevel incremental backups. Each incremental level is denoted by a value of 0 or 1. In a differential level 1 backup, RMAN backs up all blocks that have changed since the most recent incremental backup at level 1 (cumulative or differential) or level 0. In a cumulative level 1 backup, RMAN backs up all blocks used since the most recent level 0 incremental backup in either the current or parent incarnation.The block change tracking feature for incremental backups improves incremental backup performance by recording changed blocks in each data file in a block change tracking file. During media recovery, RMAN examines the restored files to determine whether it can recover them with an incremental backup. If it has a choice, then RMAN always chooses incremental backups over archived redo logs because applying changes at a block level is faster than applying redo.The incremental-forever backup strategy eliminates the need for creating recurring full backups when backing up to Zero Data Loss Recovery Appliance (Recovery Appliance). Although Recovery Appliance supports other RMAN backup strategies, the recommended method for ongoing backups is the incremental-forever backup strategy.You can use the CONFIGURE RETENTION POLICY command to create a persistent and automatic backup retention policy. A recovery window is a period that begins with the current time and extends backward in time to the point of recoverability. The point of recoverability is the earliest time for a hypothetical point-in-time recovery, that is, the earliest point to which you can recover following a media failure.In some cases using a recovery window can complicate disk space planning because the number of backups that must be retained is not constant and depends on the backup schedule. In contrast, a redundancy-based retention policy specifies how many backups of each data file must be retained. You can run the REPORT OBSOLETE command to determine which backups are currently obsolete according to the retention policy. If you configure a fast recovery area, then the database uses an internal algorithm to select files in the fast recovery area that are no longer needed to meet the configured retention policy."> RMAN Backup Concepts</a>, to learn concepts relating to RMAN backups
                           </p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7" title="RMAN backups are created using the BACKUP command.The primary purpose of RMAN backups is to protect your data. If a media failure or disaster occurs, then you can restore your backups and recover lost changes.You can back up all or part of your database with the BACKUP command from within the RMAN client.You can provide arguments to the BACKUP command to override the default backup options.The BACKUP command takes a DEVICE TYPE clause that specifies whether to back up to disk or tape device.RMAN can create backups on disk as image copies or as backup sets.RMAN provides a range of options to name the files generated by the BACKUP command. When backing up to disk, you can specify a format to spread the backup across several drives for improved performance. RMAN attaches a character string called a tag to every backup it creates, as a way of identifying the backup. You can either accept the default tag or specify your own with the TAG parameter of the BACKUP command.User-specified tags are a useful way to indicate the purpose or usage of different classes of backups or copies. Use the TAG parameter with the BACKUP command to specify tags for backup sets and image copies.When creating backup sets, you can use RMAN support for binary compression of backup sets by including the AS COMPRESSED BACKUPSET option to the BACKUP command.A multisection backup enables large data files to be divided into sections that can be backed up in parallel across multiple channels. This provides faster backup performance and better recovery times.While an image copy is being created, RMAN uses multiple channels to write files sections. However, the output of this operation is one copy for each data file.You can perform a whole database backup with the database mounted or open. You can back up one or more tablespaces with the BACKUP TABLESPACE command or one or more data files with the BACKUP DATAFILE command. You can back up the control file when the database is mounted or open. RMAN uses a snapshot control file to ensure a read-consistent version. A manual backup of the control file is different from a control file autobackup. RMAN makes a control file autobackup after the files specified in the BACKUP command are backed up. To make a manual backup, you can either specify INCLUDE CURRENT CONTROLFILE when backing up other files or specify BACKUP CURRENT CONTROLFILE. RMAN automatically backs up the current server parameter file in certain cases. The BACKUP SPFILE command backs up the parameter file explicitly. The server parameter file that is backed up is the one currently in use by the instance. You can only back up a database in NOARCHIVELOG mode when the database is closed and in a consistent state.Preplugin backups ensure that an RMAN backup is usable after a non-CDB is plugged in as a PDB into a CDB. Use the BACKUP command to back up multitenant container databases (CDBs) and pluggable databases (PDBs).RMAN and Oracle Enterprise Manager Cloud Control provide full support for backup and recovery in a multitenant environment.Backing up a whole multitenant container database (CDB) is similar to backing up a non-CDB. When you back up a whole CDB, RMAN backs up the root, all the pluggable databases (PDBs), and the archived redo logs.You can use RMAN to make a backup of only the root. Because the root contains critical metadata for the whole CDB, Oracle recommends that you back up the root or back up the whole CDB at regular intervals.Oracle Enterprise Manager Cloud Control (Cloud Control) can be used to back up the root.RMAN enables you to back up one or more PDBs in a CDB using the BACKUP command. Preplugin backups of a PDB can be used to perform restore and recover operations after the PDB is migrated and plugged in to a different destination CDB.Oracle Enterprise Manager Cloud Control (Cloud Control) can be used to perform backups of pluggable databases (PDBs).Because tablespaces in different PDBs can have the same name, to eliminate ambiguity you must connect directly to a PDB to back up one or more of its tablespaces.This example creates a preplugin backup of the PDB my_pdb that is contained in CDB cdb_prod. The CDB uses shared undo and is open in read-write mode.RMAN enables you to use the BACKUP command to perform backup operations on the application root, one or more application PDBs, and the application container.RMAN can back up application containers, application PDBs, and the application root.Use the RMAN BACKUP command to back up the application root.Use the BACKUP command to back up an application container, which consists of the application root and all the application PDBs that belong to the application root.The BACKUP command is used to back up one or more application PDBs. Use the BACKUP command to back up sparse databases.RMAN enables you to back up a sparse database, using steps similar to backing up a whole database, in the backup set or image copy format.You can back up one or more tablespaces containing sparse data files or individual sparse data files using the BACKUP command. RMAN enables you to back up one or more sparse PDBs in a CDB. Archived redo logs are the key to successful media recovery. You should back them up regularly.Several features of RMAN backups are specific to archived redo logs. For example, you can use BACKUP ... DELETE to delete one or all copies of archived redo logs from disk after backing them up to backup sets. Even if your redo logs are being archived to multiple destinations and you use RMAN to back up archived redo logs, RMAN selects only one copy of the archived redo log file to include in the backup set. Because logs with the same log sequence number are identical, RMAN does not need to include more than one log copy.Automatic online redo log switching is an important RMAN feature. In a CDB, archived redo logs can be backed up only when you connect to the root as a common user with the SYSDBA or SYSBACKUP privilege. To back up archived logs, use the BACKUP ARCHIVELOG command.You can indicate that RMAN should automatically skip backups of archived redo logs.You can back up archived redo logs in a multitenant container database (CDB) by using the BACKUP ARCHIVELOG command.The BACKUP ARCHIVELOG ... DELETE INPUT command deletes archived log files after they are backed up. This command eliminates the separate step of manually deleting archived redo logs. In a CDB, you can delete archived redo logs after they are backed up by using the BACKUP ARCHIVELOG ... DELETE INPUT command.An incremental backup copies only data file blocks that have changed since a specified previous backup. Use the BACKUP command to create incremental backups.RMAN incremental backups provide multiple benefits.Choose a backup strategy according to an acceptable MTTR (mean time to recover). You can use the Volume Shadow Copy Service (VSS) with the Oracle VSS writer to make a shadow copy or snapshot of files in a database.By incrementally updating backups, you can avoid the overhead of making full image copy backups of data files, while also minimizing time required for media recovery of your database. For example, if you run a daily backup script, then you never have more than 1 day of redo to apply for media recovery.To create incremental backups for use in an incrementally updated backup strategy, use the BACKUP ... FOR RECOVER OF COPY WITH TAG form of the BACKUP command. The command is best understood in a sample script that implements the strategy.The block change tracking feature for incremental backups improves backup performance by recording changed blocks for each data file.If block change tracking is enabled on a primary or standby database, then RMAN uses a block change tracking file to identify changed blocks for incremental backups. By reading this small bitmap file to determine which blocks changed, RMAN avoids having to scan every block in the data file that it is backing up.Oracle Database automatically manages space in the change tracking file to retain block change data that covers the eight most recent backups. After the maximum of eight bitmaps is reached, the oldest bitmap is overwritten by the bitmap that tracks the current changes.By default, the block change tracking file is created as an Oracle managed file in the destination specified by the DB_CREATE_FILE_DEST initialization parameter. You can also place the block change tracking file in any location that you choose, by specifying its name when enabling block change tracking. The size of the block change tracking file is proportional to the size of the database and the number of enabled threads of redo. You can enable block change tracking when the database is either open or mounted. When you disable block change tracking, the database removes the block change tracking file from the operating system.You can query the V$BLOCK_CHANGE_TRACKING view to determine whether change tracking is enabled, and if it is, the file name of the block change tracking file.To move the change tracking file, use the ALTER DATABASE RENAME FILE statement. You can use BACKUP... KEEP to create a backup that is both all-inclusive and exempt from the backup retention policy.You can exempt a backup from the retention policy by using the KEEP option with the BACKUP command. Typically, you make an archival backup to tape. Because your data protection backups are most likely to be on a set of tapes that remain accessible and are recycled, it is advisable to reserve a set of tapes for the archival backup. Use the BACKUP command with the KEEP option to make archival backups.One purpose of an archival backup is to create a test database. You can use the BACKUP BACKUPSET command to back up backup sets produced by other backup jobs. You can also use BACKUP RECOVERY AREA to back up recovery files created in the current and all previous fast recovery area destinations. The BACKUP BACKUPSET command creates additional copies of backup pieces in a backup set, but does not create a new backup set. For a backup retention policy based on redundancy, a backup set is counted as one instance of a backup. This statement is true even if there are multiple copies of the backup pieces that form the backup set, such as when a backup set has been backed up from disk to tape.Use the BACKUP BACKUPSET command to copy backup sets from disk to tape. Use the BACKUP command to back up image copies to tape."> Backing Up the Database</a>, to learn how to back up database files with RMAN
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">BACKUP</code> command syntax and semantics
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV121"></a><a id="BRADV89352"></a><div class="props_rev_3"><a id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC" name="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC"></a><h4 id="BRADV-GUID-DBA25637-179F-4AA5-9658-74EABF458FCC" class="sect4"><span class="enumeration_section">2.4.1 </span>About Typical RMAN Backup Options
                  </h4>
                  <div>
                     <p>The <code class="codeph">BACKUP</code> command includes a host of options, parameters, and clauses that control backup output.
                     </p>
                     <p><a href="getting-started-rman.html#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ" title="Common BACKUP options">Table 2-1</a> lists some typical backup options.
                     </p>
                     <div class="tblformal" id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ">
                        <p class="titleintable">Table 2-1 Common Backup Options</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Common Backup Options" summary="Common BACKUP options" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d12434e1624">Option</th>
                                 <th align="left" valign="bottom" width="57%" id="d12434e1627">Description</th>
                                 <th align="left" valign="bottom" width="29%" id="d12434e1630">Example</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e1635" headers="d12434e1624 ">
                                    <p><code class="codeph">FORMAT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e1635 d12434e1627 ">
                                    <p>Specifies a location and name for backup pieces and copies. You must use substitution variables to generate unique file names. </p>
                                    <p>The most common substitution variable is <code class="codeph">%U</code>, which generates a unique name. Others include <code class="codeph">%d</code> for the DB_NAME, <code class="codeph">%t</code> for the backup set time stamp, <code class="codeph">%s</code> for the backup set number, and <code class="codeph">%p</code> for the backup piece number.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e1635 d12434e1630 "><pre class="oac_no_warn" dir="ltr">BACKUP 
  FORMAT 'AL_%d/%t/%s/%p' 
  ARCHIVELOG LIKE '%arc_dest%';</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e1663" headers="d12434e1624 ">
                                    <p><code class="codeph">TAG</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e1663 d12434e1627 ">
                                    <p>Specifies a user-defined string as a label for the backup. If you do not specify a <a href="glossary.html#GUID-7679D8DB-B41A-4DDC-A1DD-20CEDC0BCA8E"><span class="xrefglossterm">tag</span></a>, then RMAN assigns a default tag with the date and time. Tags are always stored in the RMAN repository in uppercase.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e1663 d12434e1630 "><pre class="oac_no_warn" dir="ltr">BACKUP
  TAG 'weekly_full_db_bkup' 
  DATABASE MAXSETSIZE 10M;</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__GUID-B13D0E9D-1874-481D-84A1-D0B14CB46542">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="backing-up-database.html#GUID-FCD2EDB0-817F-4E92-A318-6E4BEC35B467" title="You can provide arguments to the BACKUP command to override the default backup options.">Specifying Backup Output Options</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF195" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for information about the format options
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV119"></a><a id="BRADV90058"></a><div class="props_rev_3"><a id="GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A" name="GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A"></a><h4 id="BRADV-GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A" class="sect4"><span class="enumeration_section">2.4.2 </span>Backing Up a Database in ARCHIVELOG Mode
                  </h4>
                  <div>
                     <p>If a database runs in <code class="codeph">ARCHIVELOG</code> mode, then you can back up the database while it is open.
                     </p>
                     <div class="section">
                        <p>A backup is called an <a href="glossary.html#GUID-BE64D1D8-34E7-4295-BDFC-2E99B1BC454D"><span class="xrefglossterm">inconsistent backup</span></a> if it contains changes after its checkpoint. If you have the archived redo logs needed to recover the backup, open database backups are as effective for data protection as consistent backups.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A__GUID-6967E8CF-5679-42C4-89A5-3CFEEA011E0A">To back up the database and archived redo logs while the database is open:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">BACKUP DATABASE</code> command.</span><div>
                              <p>For example, enter the following command at the RMAN prompt to back up the database and all archived redo log files to the default backup device:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; BACKUP DATABASE PLUS ARCHIVELOG;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV120"></a><a id="BRADV90059"></a><div class="props_rev_3"><a id="GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255" name="GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255"></a><h4 id="BRADV-GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255" class="sect4"><span class="enumeration_section">2.4.3 </span>Backing Up a Database in NOARCHIVELOG Mode
                  </h4>
                  <div>
                     <p>If a database runs in <code class="codeph">NOARCHIVELOG</code> mode, then the only valid database backup is a consistent backup.
                     </p>
                     <div class="section">
                        <p> For the backup to be consistent, the database must be mounted after a consistent shutdown. Recovery is not specifically required after restoring the backup, but you would lose any transactions made after the backup. You can recover with archived logs from a <a href="glossary.html#GUID-D11D736A-3513-48E5-8738-64DBE60725D1"><span class="xrefglossterm">consistent backup</span></a> to minimize data loss.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255__GUID-139EDE8C-B300-417D-9C55-531B6C24F91A">To make a consistent database backup:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Shut down the database consistently and then mount it. </span><div>
                              <p>For example, enter the following commands to <span class="italic">guarantee</span> that the database is in a consistent state for a backup:
                              </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; SHUTDOWN IMMEDIATE;
RMAN&gt; STARTUP FORCE DBA;
RMAN&gt; SHUTDOWN IMMEDIATE;
RMAN&gt; STARTUP MOUNT;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">BACKUP DATABASE</code> command. </span><div>
                              <p>For example, enter the following command at the RMAN prompt to back up the database to the default backup device:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; BACKUP DATABASE;
</pre><p>The following variation of the command creates image copy backups of all data files in the database:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; BACKUP AS COPY DATABASE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Open the database and resume normal operations. </span><div>
                              <p>The following command opens the database:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER DATABASE OPEN;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV122"></a><a id="BRADV89353"></a><div class="props_rev_3"><a id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72" name="GUID-0B997E06-7881-444D-A910-CFC37C25DF72"></a><h4 id="BRADV-GUID-0B997E06-7881-444D-A910-CFC37C25DF72" class="sect4"><span class="enumeration_section">2.4.4 </span>Making Incremental Backups: Quick Start
                  </h4>
                  <div>
                     <p>Incremental backups capture block-level changes to a database made after a previous incremental backup.</p>
                     <div class="section">
                        <p>If you specify <code class="codeph">BACKUP</code> <code class="codeph">INCREMENTAL</code>, then RMAN creates an <a href="glossary.html#GUID-31E3AC05-E73E-4E44-A9AA-915988B9A6A3"><span class="xrefglossterm">incremental backup</span></a> of a database. Incremental backups are generally smaller and faster to make than full database backups. Recovery with incremental backups is faster than using redo logs alone.
                        </p>
                        <p>The starting point for an incremental backup strategy is a <a href="glossary.html#GUID-DF84C185-E97D-4D3C-BF4E-41A9090C5F4C"><span class="xrefglossterm">level 0 incremental backup</span></a>, which backs up all blocks in the database. An incremental backup at level 0 is identical in content to a <a href="glossary.html#GUID-D47BE9B3-BAE1-4415-B4B4-4D577B6CB493"><span class="xrefglossterm">full backup</span></a>, however, unlike a full backup the level 0 backup is considered a part of the incremental backup strategy.
                        </p>
                        <p>A level 1 incremental backup contains only blocks changed after a previous incremental backup. If no level 0 backup exists in either the current or parent database <a href="glossary.html#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">incarnation</span></a> when you run a level 1 backup, then RMAN makes a level 0 backup automatically.
                        </p>
                        <div class="infoboxnote" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-180C27FC-9FFD-4B96-8BDD-97BF36194F95">
                           <p class="notep1">Note:</p>
                           <p>You cannot make incremental backups when a <code class="codeph">NOARCHIVELOG</code> database is open, although you can make incremental backups when the database is mounted after a consistent shutdown.
                           </p>
                        </div>
                        <p>A level 1 backup can be a <a href="glossary.html#GUID-8BABFB51-EA47-4204-9A44-E1695A9F9FBF"><span class="xrefglossterm">cumulative incremental backup</span></a>, which includes all blocks changed since the most recent level 0 backup, or a <a href="glossary.html#GUID-353B6668-6BA5-4815-8F08-1CD5B446FBD6"><span class="xrefglossterm">differential incremental backup</span></a>, which includes only blocks changed since the most recent incremental backup. Incremental backups are differential by default.
                        </p>
                        <p>During a restore operation, RMAN will first restore a level 0 backup, then automatically apply incremental backups and redo logs as needed. This will re-apply the changes that were made to the database since the start of the backup.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-106166A0-CF3E-46DF-BDA1-9C62F63AE1A4">To make incremental backups of the database:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">BACKUP INCREMENTAL</code> command.</span><div>
                              <p>The following example creates a level 0 incremental backup to serve as a base for an incremental backup strategy:</p><pre class="oac_no_warn" dir="ltr">BACKUP INCREMENTAL LEVEL 0 DATABASE;
</pre><p>The following example creates a level 1 cumulative incremental backup:</p><pre class="oac_no_warn" dir="ltr">BACKUP INCREMENTAL LEVEL 1 CUMULATIVE DATABASE;
</pre><p>The following example creates a level 1 differential incremental backup:</p><pre class="oac_no_warn" dir="ltr">BACKUP INCREMENTAL LEVEL 1 DATABASE;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-61666EC7-63CC-4A22-9D0A-362C8E51E384">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="rman-backup-concepts.html#GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023" title="An incremental backup copies only those data blocks that have changed since a previous backup. You can use RMAN to create incremental backups of data files, tablespaces, or the whole database.">About RMAN Incremental Backups</a>"</span> for a more detailed conceptual overview of incremental backups and <span class="q">"<a href="backing-up-database.html#GUID-2AF8EE74-CEB2-468D-A3B2-DD6AD8E41304" title="An incremental backup copies only data file blocks that have changed since a specified previous backup. Use the BACKUP command to create incremental backups.">Making and Updating RMAN Incremental Backups</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV123"></a><a id="BRADV124"></a><a id="BRADV89354"></a><div class="props_rev_3"><a id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB" name="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB"></a><h4 id="BRADV-GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB" class="sect4"><span class="enumeration_section">2.4.5 </span>Making Incrementally Updated Backups
                  </h4>
                  <div>
                     <p>Incrementally updated backups enable you to implement an efficient incremental forever backup strategy.</p>
                     <p>The RMAN <a href="glossary.html#GUID-A641BB91-65FB-4300-8A7A-066F019B8A20"><span class="xrefglossterm">incrementally updated backup</span></a> feature has the following main features:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The strategy requires a level 0 data file copy as a base. This copy has either a system-defined or user-defined tag.</p>
                        </li>
                        <li>
                           <p>Periodically, level 1 differential backups are created with the same tag as the level 0 data file copy. The <code class="codeph">BACKUP FOR RECOVER OF COPY</code> command specifies that an incremental backup contains <span class="italic">only</span> blocks changed since the most recent incremental backup with the same tag.
                           </p>
                        </li>
                        <li>
                           <p>Periodically, the incremental backups are applied to the level 0 data file copy. Because the data file copy has been updated with more recent changes, it now requires less media recovery.</p>
                        </li>
                     </ul>
                     <p><a href="getting-started-rman.html#GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__CIHDBFFF" title="FOR RECOVER OF COPY options">Table 2-2</a> explains which options to use with <code class="codeph">FOR RECOVER OF COPY</code> to implement an incrementally updated backup strategy.
                     </p>
                     <div class="tblformalwide" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__CIHDBFFF">
                        <p class="titleintable">Table 2-2 FOR RECOVER OF COPY Options</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="FOR RECOVER OF COPY Options" summary="FOR RECOVER OF COPY options" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d12434e2298">BACKUP Option</th>
                                 <th align="left" valign="bottom" width="57%" id="d12434e2301">Description</th>
                                 <th align="left" valign="bottom" width="29%" id="d12434e2304">Example</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e2309" headers="d12434e2298 ">
                                    <p><code class="codeph">FOR RECOVER OF COPY WITH TAG</code><code class="codeph"> '</code><span class="italic"><code class="codeph">tag_name</code></span><code class="codeph">'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e2309 d12434e2301 ">
                                    <p>Use <code class="codeph">TAG</code> to identify the tag of the data file copy serving as basis for the backup strategy. RMAN automatically assigns the same tag to every level 1 backup of this copy.
                                    </p>
                                    <p>If no level 0 data file copy with the specified tag exists in either the current or parent database <a href="glossary.html#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">incarnation</span></a>, then RMAN creates a level 0 data file copy with the specified tag.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e2309 d12434e2304 "><pre class="oac_no_warn" dir="ltr">BACKUP 
  INCREMENTAL LEVEL 1
  FOR RECOVER OF COPY 
  WITH TAG 'incr_update'
  DATABASE;</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e2336" headers="d12434e2298 ">
                                    <p><code class="codeph">FOR RECOVER OF COPY DATAFILECOPY FORMAT '</code><span class="italic"><code class="codeph">format</code></span><code class="codeph">'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e2336 d12434e2301 ">
                                    <p>Specifies where RMAN creates the data file copy if a copy does not exist. If you add a new data file to the database, then you do not need to change your script, because RMAN automatically creates the level 0 copy required by the incremental backup routine.</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e2336 d12434e2304 "><pre class="oac_no_warn" dir="ltr">BACKUP 
  INCREMENTAL LEVEL 1
  FOR RECOVER OF COPY
  DATAFILECOPY FORMAT
  '/disk2/df1.cpy'
  DATABASE;</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__GUID-18A1CE03-0690-4C77-8268-04882526C332">To implement an incrementally updated backup strategy:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li>
                           <p>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. 
                           </p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph">RECOVER COPY</code> and <code class="codeph">BACKUP INCREMENTAL</code> commands. 
                           </p>
                           <p>The following script, run on a regular basis, is all that is required to implement a strategy based on incrementally updated backups.</p><pre class="oac_no_warn" dir="ltr">RECOVER COPY OF DATABASE 
  WITH TAG 'incr_update';
BACKUP 
  INCREMENTAL LEVEL 1
  FOR RECOVER OF COPY WITH TAG 'incr_update'
  DATABASE;</pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__GUID-A3267B85-CB7B-4C7C-9435-B2DCC05139D4">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="backing-up-database.html#GUID-AF130A6B-06D1-4D52-87AC-BB8F4B30C9F9" title="By incrementally updating backups, you can avoid the overhead of making full image copy backups of data files, while also minimizing time required for media recovery of your database. For example, if you run a daily backup script, then you never have more than 1 day of redo to apply for media recovery.">Incrementally Updating Backups</a>"</span></p>
                     </div>
                  </div>
               </div><a id="BRADV125"></a><a id="BRADV89355"></a><div class="props_rev_3"><a id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9" name="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9"></a><h4 id="BRADV-GUID-32746671-9162-4FCD-9878-4DC241B6ABF9" class="sect4"><span class="enumeration_section">2.4.6 </span>Validating Database Files and Backups: Quick Start
                  </h4>
                  <div>
                     <p>RMAN validation checks a backup to determine whether it can be restored. Validation also checks for corrupt blocks and missing files.</p>
                     <div class="section">
                        <p>Use the <code class="codeph">VALIDATE</code> command to confirm that all database files exist, are in their correct location, and are free of physical corruption. The <code class="codeph">CHECK LOGICAL</code> option also checks for logical block corruption.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9__GUID-BAC9629A-96DB-4FF4-9738-0908BCC3FF85">To validate database files:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">BACKUP VALIDATE ...</code> command for the desired files. </span><div>
                              <p>For example, enter the following commands to validate all database files and archived redo log files for physical and logical corruption:</p><pre class="oac_no_warn" dir="ltr">BACKUP VALIDATE CHECK LOGICAL
  DATABASE ARCHIVELOG ALL;
</pre><p>You can also use the <a href="../rcmrf/VALIDATE.html#RCMRF162" target="_blank"><code class="codeph">VALIDATE</code></a> command to check individual data blocks, as shown in the following example:
                              </p><pre class="oac_no_warn" dir="ltr">VALIDATE DATAFILE 4 BLOCK 10 TO 13;
</pre><p>You can also validate backup sets, as shown in the following example:</p><pre class="oac_no_warn" dir="ltr">VALIDATE BACKUPSET 3;
</pre><p>You specify backup sets by primary key, which is shown in the output of the <code class="codeph">LIST BACKUP</code> command.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9__GUID-716E8554-ECF2-4945-A55E-0FF92951534A">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="validating-database-files-backups.html#GUID-CC967929-9610-410D-B881-66E71353D84C" title="Validation enables you to check the integrity of your backups.The main purpose of RMAN validation is to check for corrupt blocks and missing files. You can also use RMAN to determine whether backups can be restored.The database prevents operations that result in unusable backup files or corrupted restored data files. A corrupt block is a block that has been changed so that it differs from what Oracle Database expects to find.In a physical corruption, which is also called a media corruption, the database does not recognize the block at all: the checksum is invalid, the block contains all zeros, or the header and footer of the block do not match. You can use the SET MAXCORRUPT command to set the total number of unmarked corruptions permitted in a file for RMAN backups. The default is zero, meaning that RMAN does not tolerate unmarked corrupt blocks of any kind.Oracle Database supports different techniques for detecting, repairing, and monitoring block corruption.You can use the VALIDATE command to manually check for physical and logical corruptions in database files. You can also use the BACKUP VALIDATE command to perform validation.You can run RESTORE...VALIDATE to test whether RMAN can restore a specific file or set of files from a backup. RMAN chooses which backups to use.RMAN enables you to validate multitenant container databases (CDBs) and pluggable databases (PDBs) using the VALIDATE command. The steps to validate a CDB are similar to the ones used to validate a non-CDB. There are multiple methods to validate PDBs.">Validating Database Files and Backups</a></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">VALIDATE</code> command syntax and semantics
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV126"></a><a id="BRADV89356"></a><div class="props_rev_3"><a id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940" name="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940"></a><h4 id="BRADV-GUID-24321560-D43E-4E25-8A32-99E4C5A3F940" class="sect4"><span class="enumeration_section">2.4.7 </span>Scripting RMAN Operations
                  </h4>
                  <div>
                     <p>RMAN supports the use of command files to manage recurring tasks such as weekly backups.</p>
                     <div class="section">
                        <p>A <a href="glossary.html#GUID-71012407-A78E-40C4-9B0E-971C6E38EED0"><span class="xrefglossterm">command file</span></a> is a client-side text file containing RMAN commands, exactly as you enter them at the RMAN prompt. You can use any file extension.
                        </p>
                        <p>Stored scripts are an alternative to command files that allow scripts to be available to any RMAN client that can connect to the target database and its recovery catalog.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940__GUID-CEB4946C-692C-442E-867D-397C627BBC52">To create and run a command file:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Use a text editor to create a command file.</span><div>
                              <p>For example, create a command file with the following contents:</p><pre class="oac_no_warn" dir="ltr"># my_command_file.txt
CONNECT TARGET /
BACKUP DATABASE PLUS ARCHIVELOG;
LIST BACKUP;
EXIT;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Start RMAN and then execute the contents of a command file by running the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF100" target="_blank"><code class="codeph">@</code></a> command at the RMAN prompt:</span><div><pre class="oac_no_warn" dir="ltr">@/<span class="italic"><code class="codeph">my_dir</code></span>/<span class="italic"><code class="codeph">my_command_file.txt</code></span>  # runs specified command file
</pre><p>You can also start RMAN with a command file to run, as shown here:</p><pre class="oac_no_warn" dir="ltr">% rman @/<span class="italic"><code class="codeph">my_dir</code></span>/<span class="italic"><code class="codeph">my_command_file.txt</code></span>
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940__GUID-9B3C8D32-AB7F-4BD2-BC26-C5225AAD76B5">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-5FF51A4E-BC27-41A9-AA83-FF6E761C2535" title="For repetitive tasks, you can create a text file containing RMAN commands, and start the RMAN client with the @ argument, followed by a file name.">Using Command Files with RMAN</a>"</span> to learn more about command files
                                 </p>
                              </li>
                              <li>
                                 <p> <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-A9321B2D-6CFF-4616-B629-67960A8F87DD" title="When running a command file, you can specify one or more values in a USING clause for use in substitution variables in a command file. In this way, you can make your command files dynamic.">Using Substitution Variables in Command Files</a>"</span> to learn how to use substitution variables in command files and pass parameters at run time
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV89357"></a><div class="props_rev_3"><a id="GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8" name="GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8"></a><h3 id="BRADV-GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8" class="sect3"><span class="enumeration_section">2.5 </span>Reporting on RMAN Operations: Quick Start
               </h3>
               <div>
                  <p>RMAN can use the information stored in the RMAN repository to generate reports on backup activities.</p>
                  <p>Use the RMAN <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF132" target="_blank"><code class="codeph">LIST</code></a> and <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF147" target="_blank"><code class="codeph">REPORT</code></a> commands for reporting on backup operations. Use the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF154" target="_blank"><code class="codeph">SHOW ALL</code></a> command to display the current RMAN configuration. In addition, RMAN provides a comprehensive set of views for generating custom reports.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352" title="The LIST BACKUP and LIST COPY commands display information about backups and data file copies listed in the repository.">Listing Backups</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-2DFA0B10-38BD-435F-981D-A665D81243F3" title="The REPORT command performs more complex reporting analysis than the LIST command.">Reporting on Database Files and Backups</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV127"></a><a id="BRADV130"></a><a id="BRADV131"></a><a id="BRADV89358"></a><div class="props_rev_3"><a id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352" name="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352"></a><h4 id="BRADV-GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352" class="sect4"><span class="enumeration_section">2.5.1 </span>Listing Backups: Quick Start
                  </h4>
                  <div>
                     <p>The <code class="codeph">LIST</code> <code class="codeph">BACKUP</code> and <code class="codeph">LIST</code> <code class="codeph">COPY</code> commands display information about backups and data file copies listed in the repository.
                     </p>
                     <p>For backups, you can control the format of <code class="codeph">LIST</code> output with the options in <a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHEECHB" title="Describes the BY BACKUP, BY FILE, and SUMMARY options">Table 2-3</a> and <a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI" title="Describes the EXPIRED and RECOVERABLE options">Table 2-4</a>.
                     </p>
                     <div class="tblformal" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHEECHB">
                        <p class="titleintable">Table 2-3 LIST Options for Backups</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="LIST Options for Backups" summary="Describes the BY BACKUP, BY FILE, and SUMMARY options" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="12%" id="d12434e2984">Option</th>
                                 <th align="left" valign="bottom" width="38%" id="d12434e2987">Example</th>
                                 <th align="left" valign="bottom" width="50%" id="d12434e2990">Explanation</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="12%" id="d12434e2995" headers="d12434e2984 ">
                                    <p><code class="codeph">BY</code> <code class="codeph">BACKUP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d12434e2995 d12434e2987 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">OF</code> <code class="codeph">DATABASE</code> <code class="codeph">BY</code> <code class="codeph">BACKUP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d12434e2995 d12434e2990 ">
                                    <p>Organizes the output by backup set. This is the default mode of presentation.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="12%" id="d12434e3025" headers="d12434e2984 ">
                                    <p><code class="codeph">BY</code> <code class="codeph">FILE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d12434e3025 d12434e2987 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">BY</code> <code class="codeph">FILE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d12434e3025 d12434e2990 ">
                                    <p>Lists the backups according to which file was backed up.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="12%" id="d12434e3049" headers="d12434e2984 ">
                                    <p><code class="codeph">SUMMARY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d12434e3049 d12434e2987 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">SUMMARY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d12434e3049 d12434e2990 ">
                                    <p>Displays summary output.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>For both backups and copies you have additional options shown in <a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI" title="Describes the EXPIRED and RECOVERABLE options">Table 2-4</a>.
                     </p>
                     <div class="tblformal" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI">
                        <p class="titleintable">Table 2-4 Additional LIST Options</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Additional LIST Options" summary="Describes the EXPIRED and RECOVERABLE options" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="13%" id="d12434e3084">Option</th>
                                 <th align="left" valign="bottom" width="27%" id="d12434e3087">Example</th>
                                 <th align="left" valign="bottom" width="60%" id="d12434e3090">Explanation</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d12434e3095" headers="d12434e3084 ">
                                    <p><code class="codeph">EXPIRED</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d12434e3095 d12434e3087 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">EXPIRED</code> <code class="codeph">COPY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="60%" headers="d12434e3095 d12434e3090 ">
                                    <p>Lists backups that are recorded in the RMAN repository but that were not present at the expected location on disk or tape during the last <code class="codeph">CROSSCHECK</code> command. An <a href="glossary.html#GUID-A8547B27-5415-4AAA-B2B4-C0998EB62E47"><span class="xrefglossterm">expired backup</span></a> may have been deleted by an operating system utility.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d12434e3120" headers="d12434e3084 ">
                                    <p><code class="codeph">RECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d12434e3120 d12434e3087 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP RECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="60%" headers="d12434e3120 d12434e3090 ">
                                    <p>Lists data file backups or copies that have status <code class="codeph">AVAILABLE</code> in the RMAN repository and that can be restored and recovered.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__GUID-BAD7903C-4149-45C1-88BA-C8F369406E87">To list backups and copies:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li>
                           <p>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. 
                           </p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph">LIST</code> command at the RMAN prompt.
                           </p>
                           <p>You can display specific objects, as in the following examples:</p><pre class="oac_no_warn" dir="ltr">LIST BACKUP OF DATABASE;
LIST COPY OF DATAFILE 1, 2;
LIST BACKUP OF ARCHIVELOG FROM SEQUENCE 10;
LIST BACKUPSET OF DATAFILE 1;
</pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__GUID-7F54E77B-161E-4CAF-9841-517B665550BF">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="reporting-rman-operations.html#GUID-1B911001-C106-4267-9265-F649946DBF52" title="The LIST command uses the information in the RMAN repository to provide lists of backups and other objects relating to backup and recovery.">Listing Backups and Recovery-Related Objects</a>"</span> to learn more about the <code class="codeph">LIST</code> command
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF132" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">LIST</code> command syntax
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV551"></a><a id="BRADV133"></a><a id="BRADV89359"></a><div class="props_rev_3"><a id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3" name="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3"></a><h4 id="BRADV-GUID-2DFA0B10-38BD-435F-981D-A665D81243F3" class="sect4"><span class="enumeration_section">2.5.2 </span>Reporting on Database Files and Backups: Quick Start
                  </h4>
                  <div>
                     <p>The <code class="codeph">REPORT</code> command performs more complex reporting analysis than the <code class="codeph">LIST</code> command.
                     </p>
                     <p><a href="getting-started-rman.html#GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__CIHBJGBG" title="Describes the NEED BACKUP, OBSOLETE, UNRECOVERABLE, and SCHEMA options">Table 2-5</a> displays some of the main options of the REPORT command.
                     </p>
                     <div class="tblformal" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__CIHBJGBG">
                        <p class="titleintable">Table 2-5 REPORT Options</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT Options" summary="Describes the NEED BACKUP, OBSOLETE, UNRECOVERABLE, and SCHEMA options" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d12434e3296">Option</th>
                                 <th align="left" valign="bottom" width="29%" id="d12434e3299">Example</th>
                                 <th align="left" valign="bottom" width="57%" id="d12434e3302">Explanation</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3307" headers="d12434e3296 ">
                                    <p><code class="codeph">NEED</code> <code class="codeph">BACKUP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3307 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">NEED</code> <code class="codeph">BACKUP DATABASE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3307 d12434e3302 ">
                                    <p>Shows which files need backing up under current retention policy. Use optional <code class="codeph">REDUNDANCY</code> and <code class="codeph">RECOVERY</code> <code class="codeph">WINDOW</code> parameters to specify different criteria.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3337" headers="d12434e3296 ">
                                    <p><code class="codeph">OBSOLETE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3337 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">OBSOLETE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3337 d12434e3302 ">
                                    <p>Lists backups that are obsolete under the configured <a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">backup retention policy</span></a>. Use the optional <code class="codeph">REDUNDANCY</code> and <code class="codeph">RECOVERY</code> <code class="codeph">WINDOW</code> parameters to override the default.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3365" headers="d12434e3296 ">
                                    <p><code class="codeph">SCHEMA</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3365 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">SCHEMA</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3365 d12434e3302 ">
                                    <p>Reports the tablespaces and data files in the database at the current time (default) or a different time.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3380" headers="d12434e3296 ">
                                    <p><code class="codeph">UNRECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3380 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">UNRECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3380 d12434e3302 ">
                                    <p>Lists all data files for which an unrecoverable operation has been performed against an object in the data file since the last backup of the data file. </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__GUID-A1B9E4C0-73C8-4E19-9459-7ECDD9F29DAF">To generate reports of database files and backups:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li>
                           <p>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. 
                           </p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph">REPORT</code> command at the RMAN prompt.
                           </p>
                           <p>The following example reports backups that are obsolete according to the currently configured backup retention policy:</p><pre class="oac_no_warn" dir="ltr">REPORT OBSOLETE;
</pre><p>The following example reports the data files and temp files in the database:</p><pre class="oac_no_warn" dir="ltr">REPORT SCHEMA;
</pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__GUID-2E55EC8F-D02B-4269-B417-7EA6ACB79D8D">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="reporting-rman-operations.html#GUID-A1FDD9FE-74B8-4146-AFC4-6BD5402C8B5D" title="The RMAN REPORT command analyzes the available backups and your database.">Reporting on Backups and Database Schema</a>"</span> to learn how to use the <code class="codeph">REPORT</code> command for RMAN reporting
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV89360"></a><div class="props_rev_3"><a id="GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415" name="GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415"></a><h3 id="BRADV-GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415" class="sect3"><span class="enumeration_section">2.6 </span>Maintaining RMAN Backups
               </h3>
               <div>
                  <p>RMAN repository metadata is always stored in the control file of the target database. The RMAN maintenance commands use this metadata when managing backups.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-44223141-56C9-4F89-BD6D-474373EC1094" title="Use the CROSSCHECK command to synchronize the logical records of RMAN backups and copies with the files on storage media.">Cross-checking Backups</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10" title="The DELETE command removes RMAN backups and copies from disk and tape, updates the status of the files to DELETED in the control file repository, and removes the records from the recovery catalog (if you use a catalog).">Deleting Obsolete Backups</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV552"></a><a id="BRADV89362"></a><div class="props_rev_3"><a id="GUID-44223141-56C9-4F89-BD6D-474373EC1094" name="GUID-44223141-56C9-4F89-BD6D-474373EC1094"></a><h4 id="BRADV-GUID-44223141-56C9-4F89-BD6D-474373EC1094" class="sect4"><span class="enumeration_section">2.6.1 </span>Cross-checking Backups: Quick Start
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">CROSSCHECK</code> command to synchronize the logical records of RMAN backups and copies with the files on storage media.
                     </p>
                     <div class="section">
                        <p>If a backup is on disk, then <code class="codeph">CROSSCHECK</code> determines whether the header of the file is valid. If a backup is on tape, then RMAN queries the RMAN repository for the names and locations of the backup pieces. It is a good idea to crosscheck backups and copies before deleting them.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-44223141-56C9-4F89-BD6D-474373EC1094__GUID-EA497A12-C9E4-458B-8B7E-350900E2950B">To crosscheck all backups and copies on disk:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CROSSCHECK</code> command, as shown in the following example: </span><div><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUP;
CROSSCHECK COPY;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-44223141-56C9-4F89-BD6D-474373EC1094__GUID-45633A88-BF22-4A6E-9232-F8A1079D6253">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="maintaining-rman-backups.html#GUID-EFF8F8D1-D67C-4202-9C8E-DE74ADFF1FFB" title="To ensure that data about backups in the recovery catalog or control file is synchronized with corresponding data on disk or in the media management catalog, perform a crosscheck. The CROSSCHECK command operates only on files that are currently recorded in the RMAN repository.">Crosschecking the RMAN Repository</a>"</span> to learn how to crosscheck RMAN backups
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV135"></a><a id="BRADV89363"></a><div class="props_rev_3"><a id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10" name="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10"></a><h4 id="BRADV-GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10" class="sect4"><span class="enumeration_section">2.6.2 </span>Deleting Obsolete Backups: Quick Start
                  </h4>
                  <div>
                     <p>The DELETE command removes RMAN backups and copies from disk and tape, updates the status of the files to <code class="codeph">DELETED</code> in the control file repository, and removes the records from the recovery catalog (if you use a catalog).
                     </p>
                     <div class="section">
                        <p>If you run RMAN interactively, and if you do not specify the <code class="codeph">NOPROMPT</code> option, then <code class="codeph">DELETE</code> displays a list of files and prompts for confirmation before deleting any file in the list. The <code class="codeph">DELETE OBSOLETE</code> command is particular useful because RMAN deletes backups and data file copies recorded in the RMAN repository that are obsolete, that is, no longer needed. You can use options on the <code class="codeph">DELETE</code> command to specify what is obsolete or use the configured <a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">backup retention policy</span></a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10__GUID-F73F7403-4722-4C7C-A956-6BE8D2FFAC58">To delete obsolete backups and copies:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">DELETE OBSOLETE</code> command, as shown in the following example: </span><div><pre class="oac_no_warn" dir="ltr">DELETE OBSOLETE;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10__GUID-D3D3BBF9-E840-477D-BA13-615213CAEBB5">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="maintaining-rman-backups.html#GUID-8C4B395D-7C24-485F-BEA0-A355821FB93D" title="You can use the RMAN DELETE command to delete archived redo logs and RMAN backups.">Deleting RMAN Backups and Archived Redo Logs</a>"</span> to learn how to use the <code class="codeph">DELETE</code> command
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV89364"></a><div class="props_rev_3"><a id="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649" name="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649"></a><h3 id="BRADV-GUID-F24568FC-0546-4CB0-B843-87F0A95D1649" class="sect3"><span class="enumeration_section">2.7 </span>Diagnosing and Repairing Failures with Data Recovery Advisor: Quick Start
               </h3>
               <div>
                  <p>Data Recovery Advisor is an Oracle Database tool that provides an infrastructure for diagnosing persistent data failures, presenting repair options to the user, and executes repairs at the userâ€™s request.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752" title="A failure is a persistent data corruption detected by the Health Monitor. Examples include physical and logical data block corruptions and missing data files.">Listing Failures and Determining Repair Options</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C" title="Use the RMAN REPAIR FAILURE command to repair failures that were detected.">Repairing Failures</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649__GUID-8F591ECE-3F72-4F8A-ABCB-6D5DC767F396">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="diagnosing-repairing-failures-dra.html#GUID-636EA9BE-2DFB-4FA0-959E-B1290C774ABD" title="The Data Recovery Advisor is a tool that helps reduce database recovery time by determining the best automated repair option for database failures.">Overview of Data Recovery Advisor</a>"</span></p>
                  </div>
               </div><a id="BRADV136"></a><a id="BRADV89365"></a><div class="props_rev_3"><a id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752" name="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752"></a><h4 id="BRADV-GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752" class="sect4"><span class="enumeration_section">2.7.1 </span>Listing Failures and Determining Repair Options
                  </h4>
                  <div>
                     <p>A failure is a persistent data corruption detected by the Health Monitor. Examples include physical and logical data block corruptions and missing data files.</p>
                     <div class="section">
                        <p>Each failure has a <a href="glossary.html#GUID-AFA532F1-81A1-433F-95BE-730178DD900D"><span class="xrefglossterm">failure priority</span></a> and <a href="glossary.html#GUID-7881F5D7-5E80-49BF-A369-DC4B670EF8EB"><span class="xrefglossterm">failure status</span></a>. The priority can be <code class="codeph">CRITICAL</code>, <code class="codeph">HIGH</code>, or <code class="codeph">LOW</code>. The status can be <code class="codeph">OPEN</code> or <code class="codeph">CLOSED</code>.
                        </p>
                        <p>You can run the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF132" target="_blank"><code class="codeph">LIST</code></a> <code class="codeph">FAILURE</code> command to show all known failures. If failures exist, then run the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF166" target="_blank"><code class="codeph">ADVISE FAILURE</code></a> command in the same session to determine repair options. The <code class="codeph">ADVISE FAILURE</code> output shows both manual and automated repair options. First try to fix the problem manually. If you cannot fix the problem manually, then review the automated repair section. 
                        </p>
                        <p>An automated <a href="glossary.html#GUID-76EA30CA-A51E-44C9-AB25-E1D89AF711B2"><span class="xrefglossterm">repair option</span></a> describes a server-managed repair for one or more failures. Repairs are consolidated when possible so that a single repair can fix multiple failures. The repair option indicates which repair is performed and whether data is lost by performing the repair operation.
                        </p>
                        <div class="infoboxnotealso" id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__GUID-B0297116-EC2B-4D6A-928D-906242300B51">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="diagnosing-repairing-failures-dra.html#GUID-05C2861A-4EC0-4F0C-8860-42AC2BC4CC17" title="If you suspect or know that one or more database failures have occurred, then use LIST FAILURE to obtain information about them.">Listing Failures</a>"</span> and <span class="q">"<a href="diagnosing-repairing-failures-dra.html#GUID-13944F9E-545E-480A-A47B-CE0A73FED3C7" title="Use the ADVISE FAILURE command to display repair options after running LIST FAILURE in an RMAN session. This command prints a summary of the failures and implicitly closes all open failures that are repaired.">Determining Repair Options</a>"</span></p>
                        </div>
                        <p><a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">Listing Failures and Determining Repair Options</a> illustrates the commands to list failures and determine repair options. The output indicates the file name of a repair script containing RMAN commands. If you do not want to use Data Recovery Advisor to repair the failure automatically, then you can use the script as the basis of your own recovery strategy.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">
                        <p class="titleinexample">Example 2-1 LIST FAILURE and ADVISE FAILURE</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; <span class="bold">LIST FAILURE;</span>
 
Database Role: PRIMARY
List of Database Failures
=========================
 
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
142        HIGH     OPEN      23-APR-13     One or more non-system datafiles are missing
101        HIGH     OPEN      23-APR-13     Datafile 1: '/disk1/oradata/prod/system01.dbf' 
                                            contains one or more corrupt blocks

RMAN&gt; <span class="bold">ADVISE FAILURE;</span>
 
Database Role: PRIMARY
List of Database Failures
=========================
 
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
142        HIGH     OPEN      23-APR-13     One or more non-system datafiles are missing
101        HIGH     OPEN      23-APR-13     Datafile 1: '/disk1/oradata/prod/system01.dbf' 
                                            contains one or more corrupt blocks
 
analyzing automatic repair options; this may take some time
using channel ORA_DISK_1
analyzing automatic repair options complete
 
Mandatory Manual Actions
========================
no manual actions available
 
Optional Manual Actions
=======================
1. If file /disk1/oradata/prod/users01.dbf was unintentionally renamed or moved, restore it
 
Automated Repair Options
========================
Option Repair Description
------ ------------------
1      Restore and recover datafile 28; Perform block media recovery of 
       block 56416 in file 1
  Strategy: The repair includes complete media recovery with no data loss
  Repair script: /disk1/oracle/log/diag/rdbms/prod/prod/hm/reco_660500184.hm
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="BRADV553"></a><a id="BRADV89366"></a><div class="props_rev_3"><a id="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C" name="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C"></a><h4 id="BRADV-GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C" class="sect4"><span class="enumeration_section">2.7.2 </span>Repairing Failures: Quick Start
                  </h4>
                  <div>
                     <p>Use the RMAN <code class="codeph">REPAIR FAILURE</code> command to repair failures that were detected.
                     </p>
                     <div class="section">
                        <p>After running <code class="codeph">LIST FAILURE</code> and <code class="codeph">ADVISE FAILURE</code> in an <a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a>, you can run <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF199" target="_blank"><code class="codeph">REPAIR FAILURE</code></a> to execute a repair option. If you execute <code class="codeph">REPAIR FAILURE</code> with no other command options, then RMAN uses the first repair option of the most recent <code class="codeph">ADVISE FAILURE</code> command in the current session. Alternatively, specify the repair option number obtained from the most recent <code class="codeph">ADVISE FAILURE</code> command. The following example illustrates how to repair the failures identified in <a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">Example 2-1</a>.
                        </p><pre class="pre codeblock"><code>RMAN&gt; REPAIR FAILURE;</code></pre><p>By default, <code class="codeph">REPAIR FAILURE</code> prompts for confirmation before it begins executing. After executing a repair, Data Recovery Advisor reevaluates all existing failures on the possibility that they may also have been fixed. Data Recovery Advisor always verifies that failures are still relevant and automatically closes fixed failures. If a repair fails to complete because of an error, then the error triggers a new assessment and re-evaluation of existing failures and repairs.
                        </p>
                        <div class="infoboxnotealso" id="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C__GUID-E43E6851-0927-4D18-ACA8-A63216B3266C">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="diagnosing-repairing-failures-dra.html#GUID-31DF1037-325F-4FED-8A37-23216EFF9526" title="You can use Data Recovery Advisor to repair failures automatically.">Repairing Failures</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV554"></a><a id="BRADV89367"></a><div class="props_rev_3"><a id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1" name="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1"></a><h3 id="BRADV-GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1" class="sect3"><span class="enumeration_section">2.8 </span>Rewinding a Database with Flashback Database: Quick Start
               </h3>
               <div>
                  <p>You can use the Oracle Flashback Database to rewind the whole database to a past time. Unlike media recovery, you do not need to restore data files to return the database to a past state.</p>
                  <div class="section">
                     <p>To use the RMAN <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF194" target="_blank"><code class="codeph">FLASHBACK DATABASE</code></a> command, your database must have been previously configured to generate <a href="glossary.html#GUID-725ED3D7-5077-4F16-85AA-CDAD5BFCE554"><span class="xrefglossterm">flashback logs</span></a>. This configuration task is described in <span class="q">"<a href="using-flasback-database-restore-points.html#GUID-509FB7A6-4CB2-4730-80CA-7B2D68F50773" title="Flashback Database is similar to conventional point-in-time recovery in its effects. It enables you to return a database to its state at a time in the recent past. Flashback Database is much faster than point-in-time recovery because it does not require restoring data files from backup and requires applying fewer changes from the archived redo logs.">About Flashback Database</a>"</span>. Flashback Database works by rewinding changes to the data files that exist at the moment that you run the command. You cannot use the flashback database to repair media failures or missing data files.
                     </p>
                     <p>The database must be mounted when you issue <code class="codeph">FLASHBACK DATABASE</code>. You can flashback to any time within the <a href="glossary.html#GUID-C25BCFCE-4DE2-499A-A5E3-407A774FE9F3"><span class="xrefglossterm">flashback database window</span></a>. If you have previously created a <a href="glossary.html#GUID-A5A5E7B1-72B6-4F50-8E11-04C03EB5FFAE"><span class="xrefglossterm">restore point</span></a>, that is a convenience, but not required.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1__GUID-01867A7A-D160-455E-949A-E3727A88CB4F">To rewind a database with Flashback Database:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                     <li class="stepexpand"><span>Ensure that the database is in a mounted state.</span><div>
                           <p>The following commands shut down and then mount the database: </p><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Run the <code class="codeph">FLASHBACK DATABASE</code> command.</span><div>
                           <p>The following examples illustrate different forms of the command:</p><pre class="oac_no_warn" dir="ltr">FLASHBACK DATABASE TO SCN 861150;

FLASHBACK DATABASE 
  TO RESTORE POINT BEFORE_CHANGES;

FLASHBACK DATABASE    
  TO TIMESTAMP TO_DATE(04-DEC-2009  03:30:00','DD-MON-YYYY HH24:MI:SS');
</pre></div>
                     </li>
                     <li class="stepexpand"><span>After performing the Flashback Database, open the database read-only in SQL*Plus and run some queries to verify the database contents.</span><div>
                           <p>Open the database read-only as follows:</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN READ ONLY;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>If satisfied with the results, then issue the following sequence of commands to shut down and then open the database:</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
ALTER DATABASE OPEN RESETLOGS;</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1__GUID-EE8D0C47-C8AB-4D21-AED0-B117B8C8CBF1">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="rman-performing-flashback-dbpitr.html#GUID-953FA30D-BED2-4DBA-8361-9DA1B8FF073F" title="Flashback Database reverses unwanted changes by returning your database to its state at a previous point in time.">Rewinding a Database with Flashback Database</a>"</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV89368"></a><div class="props_rev_3"><a id="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205" name="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205"></a><h3 id="BRADV-GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205" class="sect3"><span class="enumeration_section">2.9 </span>Restoring and Recovering Database Files: Quick Start
               </h3>
               <div>
                  <p>Use the <code class="codeph">RESTORE</code> and <code class="codeph">RECOVER</code> commands for RMAN restore and recovery of physical database files. 
                  </p>
                  <p>Restoring data files is retrieving them from backups as needed for a recovery operation. Media recovery is the application of changes from redo logs and incremental backups to a restored data file to bring the data file forward to a desired SCN or point in time.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="To recover the database because a media failure damages database files, then first ensure that you have the necessary backups.">Preparing to Restore and Recover Database Files</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8" title="Use the RESTORE DATABASE and RECOVER DATABASE commands to recover the whole database.">Recovering the Whole Database</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8" title="Use the RESTORE TABLESPACE and RECOVER TABLESPACE commands on individual tablespaces when the database is open. In this case, you must take the tablespace that needs recovery offline, restore and then recover the tablespace, and bring the recovered tablespace online.">Recovering Tablespaces</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E" title="RMAN can recover individual corrupted data file blocks.">Recovering Individual Data Blocks</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205__GUID-727878EF-123D-4A82-8CDF-6A90790E86F3">
                     <p class="notep1">See Also:</p>
                     <p><a href="rman-complete-database-recovery.html#GUID-D908719C-9D46-4084-850C-0F81C25094EB" title="Complete recovery returns your database to normal operation after the loss of one or more database files.Complete recovery is recovering a database to the most recent point in time, without the loss of any committed transactions.The complete recovery operations described in this chapter are subject to certain conditions.Zero Data Loss Recovery Appliance (Recovery Appliance) substantially reduces the window of potential data loss that exists between successive archived redo log backups. You to recover target databases to within a few subseconds of a database failure.You must plan your database restore and recovery strategy based on your recovery goal and which database files have been lost.The techniques for determining which files require restore or recovery depend upon the type of file that is lost.The database shuts down immediately when any of the multiplexed control files become inaccessible. The decision about when and how to recover depends on the state of the database and the location of its data files.An easy technique for determining which data files are missing is to run a VALIDATE DATABASE command. Although VALIDATE DATABASE is a good technique for determining whether files are inaccessible, you may want to use SQL queries to obtain more detailed information. It is recommended that you record the DBID of your database.Previewing backups helps you to ensure that all backups required for a restore and recovery operation are available.An offsite backup is stored in a remote location, such as a secure storage facility, and cannot be restored unless the media manager retrieves the media.Validating backups determines if the backups are usable.RMAN restores archived redo log files from backup automatically as needed to perform recovery.RMAN enables you to override the default location for restored archived redo log files.To manage disk space that is used to contain the restored logs, you can specify restore destinations for archived logs multiple times in one RUN block, to distribute restored logs among several destinations.For backups encrypted using certain techniques, you must provide the password that will be used to decrypt these backups.During complete recovery RMAN restores one or more data files and then applies all the redo generated after the restored backup.You use the RESTORE and RECOVER commands to restore and recover the database. If you cannot restore data files to their default locations, then you must update the control file to reflect the new locations of the data files.This scenario assumes that database trgt has lost most or all of its data files. It also assumes that the database uses a fast recovery area.Use the RESTORE and RECOVER commands with the TABLESPACE option to perform complete recovery of a tablespaceYou can recover a database by switching to image copies of inaccessible data files. This technique takes less time than traditional restore and recovery because no backups need to be restored.When one or more data files are damaged, you can perform recovery by switching to existing image copies of the damaged data files.You can perform complete database recovery by switching to image copies of the damaged data files instead of restoring these data files.RMAN and Oracle Enterprise Manager Cloud Control (Cloud Control) provide full support for backup and recovery in a multitenant environment. When you recover a whole CDB, you recover the root and all PDBs in a single operation.You might consider recovering only the root if a data corruption or user error occurs that affects only the root.You can perform complete recovery of one or more PDBs without affecting operations of other open PDBs.Enterprise Manager Cloud Control (Cloud Control) provides an interface to recover PDBs.Use the RECOVER command to perform complete recovery using preplugin backups.Preplugin backups are used to restore and recover a PDB to its state at a time in the past that was before the PDB was plugged in to the current CDB. RMAN performs complete recovery of a PDB using preplugin backups. These preplugin backups were created on a source non-CDB or a source CDB before the PDB was migrated to the current target CDB. This example performs complete recovery of a PDB my_pdb in the destination CDB prod_cdb using preplugin backups.Because tablespaces in different PDBs can have the same name, to eliminate ambiguity, you must connect directly to a PDB to recover one or more of its tablespaces. In contrast, because data file numbers and paths are unique across the CDB, you can connect either to the root or to a PDB when recovering PDB data files.Oracle Enterprise Manager Cloud Control (Cloud Control) provides an interface to recover tablespaces within a PDB.Recovering a CDB by switching to a copy is faster than traditional restore and recovery.RMAN enables you to use the RESTORE and RECOVER commands to perform complete recovery of the application containers without impacting the other containers in the CDB.Use the RESTORE and RECOVER commands to perform complete recovery of the application root.You can perform complete recovery of an application container, which includes the application root and all its application PDBs without impacting the other PDBs within the CDB.Use the RESTORE and RECOVER commands to perform complete recovery of one or more application PDBs.You can recover sparse databases to the most recent point in time using the RESTORE and RECOVER commands.Performing recovery of a database containing sparse data files is very similar to performing recovery of a whole database.Performing recovery of a sparse CDB is very similar to performing the complete recovery of a sparse database. You can recover a sparse PDB while you are connected at the root level or at the CDB level."> Performing Complete Database Recovery </a></p>
                  </div>
               </div><a id="BRADV555"></a><a id="BRADV99956"></a><div class="props_rev_3"><a id="GUID-F05FE79E-7C36-402B-8785-961F793AA710" name="GUID-F05FE79E-7C36-402B-8785-961F793AA710"></a><h4 id="BRADV-GUID-F05FE79E-7C36-402B-8785-961F793AA710" class="sect4"><span class="enumeration_section">2.9.1 </span>Preparing to Restore and Recover Database Files: Quick Start
                  </h4>
                  <div>
                     <p>To recover the database because a media failure damages database files, then first ensure that you have the necessary backups. </p>
                     <div class="section">
                        <p>You can use the <code class="codeph">RESTORE ... PREVIEW</code> command to report, but not restore, the backups that RMAN can use to restore to the specified time. RMAN queries the metadata and does not actually read the backup files. The database can be open when you run this command.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F05FE79E-7C36-402B-8785-961F793AA710__GUID-93F11DE9-D0B7-4005-96FE-C750C831971F">To preview a database restore and recovery:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to the target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>. </span></li>
                        <li class="stepexpand"><span>Optionally, list the current tablespaces and data files, as shown in the following command:</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; REPORT SCHEMA;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">RESTORE DATABASE</code> command with the <code class="codeph">PREVIEW</code> option.</span><div>
                              <p>The following command specifies <code class="codeph">SUMMARY</code> so that the backup metadata is not displayed in verbose mode (sample output included):
                              </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RESTORE DATABASE PREVIEW SUMMARY;
 
Starting restore at 21-MAY-13
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=80 device type=DISK
 
List of Backups
===============
Key     TY LV S Device Type Completion Time #Pieces #Copies Compressed Tag
------- -- -- - ----------- --------------- ------- ------- ---------- ---
11      B  F  A DISK        18-MAY-13       1       2       NO         TAG20070518T181114
13      B  F  A DISK        18-MAY-13       1       2       NO         TAG20070518T181114
using channel ORA_DISK_1
 
List of Archived Log Copies for database with db_unique_name PROD
=====================================================================
 
Key     Thrd Seq     S Low Time
------- ---- ------- - ---------
47      1    18      A 18-MAY-13
        Name: /disk1/oracle/dbs/db1r_60ffa882_1_18_0622902157.arc
 
Media recovery start SCN is 586534
Recovery must be done beyond SCN 587194 to clear datafile fuzziness
validation succeeded for backup piece
Finished restore at 21-MAY-13</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV556"></a><a id="BRADV89369"></a><div class="props_rev_3"><a id="GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8" name="GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8"></a><h4 id="BRADV-GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8" class="sect4"><span class="enumeration_section">2.9.2 </span>Recovering the Whole Database: Quick Start
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">RESTORE</code> <code class="codeph">DATABASE</code> and <code class="codeph">RECOVER</code> <code class="codeph">DATABASE</code> commands to recover the whole database.
                     </p>
                     <div class="section">
                        <p>You must have previously made backups of all needed files. This scenario assumes that you can restore all data files to their original locations. If the original locations are inaccessible, then use the <code class="codeph">SET NEWNAME</code> command as described in <span class="q">"<a href="rman-complete-database-recovery.html#GUID-A3DE37A6-3983-4834-858E-A2BCC3804681" title="If you cannot restore data files to their default locations, then you must update the control file to reflect the new locations of the data files.">About Restoring Data Files to a Nondefault Location</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8__GUID-8F67F2DA-07E8-4FC7-92A5-14A1991BA56B">To recover the whole database:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Prepare for recovery as explained in <span class="q">"<a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="To recover the database because a media failure damages database files, then first ensure that you have the necessary backups.">Preparing to Restore and Recover Database Files</a>"</span>.</span></li>
                        <li class="stepexpand"><span>Place the database in a mounted state. </span><div>
                              <p>The following example terminates the database instance (if it is started) and mounts the database:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; STARTUP FORCE MOUNT;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Restore the database. </span><div>
                              <p>The following example uses the preconfigured disk channel to restore the database:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RESTORE DATABASE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Recover the database, as shown in the following example:</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; RECOVER DATABASE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Open the database, as shown in the following example:</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER DATABASE OPEN;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV557"></a><a id="BRADV89370"></a><div class="props_rev_3"><a id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8" name="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8"></a><h4 id="BRADV-GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8" class="sect4"><span class="enumeration_section">2.9.3 </span>Recovering Tablespaces: Quick Start
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">RESTORE</code> <code class="codeph">TABLESPACE</code> and <code class="codeph">RECOVER</code> <code class="codeph">TABLESPACE</code> commands on individual tablespaces when the database is open. In this case, you must take the tablespace that needs recovery offline, restore and then recover the tablespace, and bring the recovered tablespace online.
                     </p>
                     <div class="section">
                        <p>If you cannot restore a data file to its original location, then use the RMAN <code class="codeph">SET NEWNAME</code> command within a <code class="codeph">RUN</code> block to specify the new file name and location. Afterward, use a <code class="codeph">SWITCH DATAFILE ALL</code> command, which is equivalent to using the SQL statement <code class="codeph">ALTER DATABASE RENAME FILE</code>, to update the control file to reflect the new names for all data files for which a <code class="codeph">SET NEWNAME</code> has been issued in the <code class="codeph">RUN</code> command.
                        </p>
                        <p>Unlike user-managed media recovery, you do <span class="italic">not</span> place an online tablespace in <a href="glossary.html#GUID-BD2A12D3-A995-49B8-AE99-B8DDDF4FE7E7"><span class="xrefglossterm">backup mode</span></a>. RMAN does not require extra logging or backup mode because it knows the format of data blocks.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8__GUID-305AECEF-0FFF-4C42-B0C7-E933795994EB">To recover an individual tablespace when the database is open:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Prepare for recovery as explained in <span class="q">"<a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="To recover the database because a media failure damages database files, then first ensure that you have the necessary backups.">Preparing to Restore and Recover Database Files</a>"</span>.</span></li>
                        <li class="stepexpand"><span>Take the tablespace to be recovered offline. </span><div>
                              <p>The following example takes the <code class="codeph">USERS</code> tablespace offline:
                              </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER TABLESPACE users OFFLINE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Restore and recover the tablespace. </span><div>
                              <p>The following <code class="codeph">RUN</code> command, which you execute at the RMAN prompt, sets a new name for the data file in the <code class="codeph">USERS</code> tablespace:
                              </p><pre class="oac_no_warn" dir="ltr">RUN
{
  SET NEWNAME FOR DATAFILE '/disk1/oradata/prod/users01.dbf' 
    TO '/disk2/users01.dbf';
  RESTORE TABLESPACE users;
  SWITCH DATAFILE ALL;   # update control file with new file names
  RECOVER TABLESPACE users;
}
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Bring the tablespace online, as shown in the following example:</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER TABLESPACE users ONLINE;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>You can also use <code class="codeph">RESTORE DATAFILE</code> and <code class="codeph">RECOVER DATAFILE</code> for recovery at the data file level.
                        </p>
                        <div class="infoboxnotealso" id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8__GUID-0C9261C3-70BF-4D9B-A4E3-6A1053132540">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="rman-complete-database-recovery.html#GUID-4EBD9D56-9700-45A1-B233-1F5506A04532" title="Use the RESTORE and RECOVER commands with the TABLESPACE option to perform complete recovery of a tablespace">Performing Complete Recovery of a Tablespace</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="rman-backup-concepts.html#GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C" title="You can create RMAN backups or user-managed backups.">About Online Backups and Backup Mode</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV558"></a><a id="BRADV89371"></a><div class="props_rev_3"><a id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E" name="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E"></a><h4 id="BRADV-GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E" class="sect4"><span class="enumeration_section">2.9.4 </span>Recovering Individual Data Blocks: Quick Start
                  </h4>
                  <div>
                     <p>RMAN can recover individual corrupted data file blocks. </p>
                     <div class="section">
                        <p>When RMAN performs a complete scan of a file for a backup, any corrupted blocks are listed in <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>. Corruption is usually reported in alert logs, trace files, or results of SQL queries. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E__GUID-EED29271-8F04-4A0F-A066-FFF76A152F5B">To recover data blocks:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to the target database as described in <span class="q">"<a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="Before you perform any operations using RMAN, you must connect to a target database.">Starting RMAN and Connecting to a Database</a>"</span>.</span></li>
                        <li class="stepexpand"><span>Obtain the block numbers of the corrupted blocks if you do not have this information.</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; SELECT NAME, VALUE FROM V$DIAG_INFO;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">RECOVER</code> command to repair the blocks.</span><div>
                              <p>The following RMAN command recovers all corrupted blocks:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RECOVER CORRUPTION LIST;
</pre><p>You can also recover individual blocks, as shown in the following example:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RECOVER DATAFILE 1 BLOCK 233, 235 DATAFILE 2 BLOCK 100 TO 200;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E__GUID-641C5748-E11B-4796-9E60-902DCE0C2551">
                           <p class="notep1">See Also:</p>
                           <p><a href="rman-block-media-recovery.html#GUID-1E226393-17D0-4AB0-A05D-91210255D8FF" title="Block media recovery recovers provides lower mean time to recover (MTTR) by recovering corrupt data blocks.Use block media recovery to recover one or more corrupt data blocks within a data file. Usually, the database marks a block as media corrupt and then writes it to disk when the corruption is first encountered. No subsequent read of the block is successful until the block is recovered. You can perform block recovery only on blocks that are marked corrupt or that fail a corruption check.Block recovery behavior depends on whether the data block corruption was discovered on the primary database or the physical standby database.The V$DATABASE_BLOCK_CORRUPTION view displays blocks marked corrupt by database components such as RMAN, ANALYZE, and SQL queries.Block media recovery only requires an unbroken set of redo changes for the blocks being recovered. This is unlike data file recovery that requires an unbroken series of redo changes from the beginning of recovery to the end.Certain prerequisites must be met before you perform block media recovery by using the RECOVER ... BLOCK command.Use the RECOVER...BLOCK command to recover individual corrupt blocks in a data file.You identify the blocks that require recovery and then use any available backup to restore and recover these blocks.You can use the Data Recovery Advisor to diagnose and repair failures caused by data block corruptions. In this example, corrupt data blocks were discovered when the VALIDATE DATABASE command.RMAN can automatically recover all blocks listed in the V$DATABASE_BLOCK_CORRUPTION view."> Performing Block Media Recovery </a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
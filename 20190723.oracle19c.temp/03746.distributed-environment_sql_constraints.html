<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This section explains some of the constraints on SQL in a distributed environment.">
      <meta name="description" content="This section explains some of the constraints on SQL in a distributed environment.">
      <title>Constraints on SQL in a Distributed Environment</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Heterogeneous Connectivity User's Guide">
      <meta property="og:description" content="This section explains some of the constraints on SQL in a distributed environment.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Heterogeneous Connectivity User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="heterogeneous-connectivity-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-16T12:43:36-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96192-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="sql-plus-describe-command.html" title="Previous" type="text/html">
      <link rel="next" href="optimizer-and-heterogeneous-services.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Heterogeneous Connectivity User's Guide">
    <meta name="dcterms.isVersionOf" content="HETER">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="sql-plus-describe-command.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="optimizer-and-heterogeneous-services.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Heterogeneous Connectivity User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-database-gateways-features.html" property="item" typeof="WebPage"><span property="name"> Features of Oracle Database Gateways</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Constraints on SQL in a Distributed Environment</li>
            </ol>
            <a id="GUID-630A201B-62B0-4643-A4CF-85D58AA8105F" name="GUID-630A201B-62B0-4643-A4CF-85D58AA8105F"></a><a id="HETER4071"></a>
            
            <h2 id="HETER-GUID-630A201B-62B0-4643-A4CF-85D58AA8105F" class="sect2">Constraints on SQL in a Distributed Environment</h2>
         </header>
         <div class="ind">
            <div>
               <p>This section explains some of the constraints on SQL in a distributed environment.</p>
               <p>These constraints apply to distributed environments that access non-Oracle systems or remote Oracle databases.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="distributed-environment_sql_constraints.html#GUID-E93FB210-DADE-4EE4-BC42-1E1DA507D934">Remote and Heterogeneous References</a><br>Many of the rules for heterogeneous access also apply to remote references.
                  </li>
                  <li class="ulchildlink"><a href="distributed-environment_sql_constraints.html#GUID-57497077-1253-490F-9940-C2D5B2ECB6E1">Rules and Restrictions When Using SQL for Remote Mapping in a Distributed Environment</a><br>There are rules and restrictions when you use SQL for remote mapping in a distributed environment.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="oracle-database-gateways-features.html#GUID-13FD7B76-9463-4EE3-8DDA-13C1AA7C815C">Features of Oracle Database Gateways</a></p>
                  </div>
               </div>
            </div>
            <a id="HETER4072"></a><div class="props_rev_3"><a id="GUID-E93FB210-DADE-4EE4-BC42-1E1DA507D934" name="GUID-E93FB210-DADE-4EE4-BC42-1E1DA507D934"></a><h3 id="HETER-GUID-E93FB210-DADE-4EE4-BC42-1E1DA507D934" class="sect3">Remote and Heterogeneous References</h3>
               <div>
                  <p>Many of the rules for heterogeneous access also apply to remote references.</p>
                  <p>A SQL statement can, with restrictions, be executed on any database node referenced in the SQL statement or the local node. If all objects referenced are resolved to a single, referenced node, Oracle attempts to execute a query at that node. You can force execution at a referenced node by using the <code class="codeph">/*+ REMOTE_MAPPED */</code> or <code class="codeph">/*+ DRIVING_SITE */</code> hints. If a statement is forwarded to a node other than the node from where the statement was issued, the statement is <span class="bold">remote-mapped</span>.
                  </p>
                  <p>There is complete data type checking support for remote-mapped statements. The result provides consistent data type checking and complete data type coercion.</p>
                  <p>SQL statements must follow specific rules to be remote-mapped. If these rules are not followed, an error occurs. The order in which the rules are applied does not matter.</p>
                  <p>Different constraints exist when you use SQL for remote mapping in a distributed environment. This distributed environment can include remote Oracle databases and non-Oracle databases that are accessed through Oracle Database gateways.</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="database-server-sql-construct-processing.html#GUID-0A2CA01B-9EAE-46AD-96F4-CF769596131C" title="Heterogeneous Services and the gateway rewrite SQL statements when the statements need to be translated or postprocessed.">Oracle Database Server SQL Construct Processing</a></li>
                        <li><a href="distributed-environment_sql_constraints.html#GUID-57497077-1253-490F-9940-C2D5B2ECB6E1" title="There are rules and restrictions when you use SQL for remote mapping in a distributed environment.">Rules and Restrictions When Using SQL for Remote Mapping in a Distributed Environment</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-E93FB210-DADE-4EE4-BC42-1E1DA507D934__NOTE-136-E137732A">
                     <p class="notep1">See Also:</p>
                     <p><a href="../admin/distributed-database-concepts.html#ADMIN028" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about distributed databases.
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="distributed-environment_sql_constraints.html#GUID-630A201B-62B0-4643-A4CF-85D58AA8105F" title="This section explains some of the constraints on SQL in a distributed environment.">Constraints on SQL in a Distributed Environment</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="HETER4074"></a><a id="HETER4075"></a><a id="HETER4076"></a><a id="HETER4077"></a><a id="HETER4078"></a><a id="HETER4079"></a><a id="HETER4080"></a><a id="HETER4081"></a><a id="HETER4082"></a><a id="HETER4083"></a><a id="HETER4073"></a><div class="props_rev_3"><a id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1" name="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1"></a><h3 id="HETER-GUID-57497077-1253-490F-9940-C2D5B2ECB6E1" class="sect3">Rules and Restrictions When Using SQL for Remote Mapping in a Distributed Environment</h3>
               <div>
                  <p>There are rules and restrictions when you use SQL for remote mapping in a distributed environment.</p>
                  <p>The following section lists some of the different rules or restrictions that exist when you use SQL for remote mapping in a distributed environment.</p>
                  <div class="infoboxnote" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-A4B78245-D455-4754-B664-C8AFA66BD61A">
                     <p class="notep1">Note:</p>
                     <p>In the examples that follow, the <code class="codeph">remote_db</code> noun refers to a remote non-Oracle system, and the <code class="codeph">remote_oracle_db</code> noun refers to a remote Oracle Database. 
                     </p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-5011FB0D-D923-4C3E-B346-454A5F3B8A37">Rule A: A data definition language statement cannot be remote-mapped.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>In Oracle data definition language, the target object syntactically has no place for a remote reference. Data definition language statements that contain remote references are executed locally. For Heterogeneous Services, this means it cannot directly create database objects in a non-Oracle database using SQL. </p>
                     <p>You can create database objects individually by using passthrough SQL, as shown in the following example:</p><pre class="oac_no_warn" dir="ltr">DECLARE
  num_rows INTEGER;
BEGIN 
  num_rows := DBMS_HS_PASSTHROUGH.EXECUTE_IMMEDIATE@remote_db 
  (
     'create table x1 (c1 char, c2 int)'
  ); 
END; </pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-DBF84D30-B405-4F7F-AD27-82B61233AC62">Rule B: INSERT, UPDATE and DELETE statements with a remote target table must be remote-mapped.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This rule is more restrictive for non-Oracle remote databases than for a remote Oracle database. This is because the remote system cannot retrieve data from the originating Oracle database while executing data manipulation language (DML) statements targeting tables in a non-Oracle system.</p>
                     <p>For example, to insert all local employees from the local <code class="codeph">emp</code> table to a remote non-Oracle <code class="codeph">emp</code> table, use the following statement: 
                     </p><pre class="oac_no_warn" dir="ltr">INSERT INTO emp@remote_db SELECT * FROM emp;
</pre><p>This statement is remote-mapped to the remote database. The remote-mapped statement sent to the remote database contains a remote reference back to the originating database for the <code class="codeph">emp</code> table. A remote link received by the remote database is called a <a id="d5552e192" class="indexterm-anchor"></a><span class="bold">callback link</span>.
                     </p>
                     <div class="infoboxnote" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-67E69EDE-4EDF-438B-A1D2-3500350576C3">
                        <p class="notep1">Note:</p>
                        <p>Even though callback links are supported in generic Heterogeneous Services, they may not be implemented in all Heterogeneous Services agents. For more information, see your database gateway documentation to determine if callback links work with the database gateway that you are using.</p>
                     </div>
                     <p>If callback links are not supported by a particular gateway, the previous <code class="codeph">INSERT</code> statements returns the following error:
                     </p><pre class="oac_no_warn" dir="ltr">ORA-02025: all tables in the SQL statement must be at the remote database
</pre><p>The workaround is to write a PL/SQL block. For example:</p><pre class="oac_no_warn" dir="ltr">DECLARE 
CURSOR remote_insert IS SELECT * FROM emp;
BEGIN 
   FOR rec IN remote_insert LOOP
    INSERT INTO emp@remote_db (empno, ename, deptno) VALUES (
      rec.empno,
      rec.ename, 
      rec.deptno 
    );  
   END loop;
END;
</pre><p>Another special case involves session-specific SQL functions such as <code class="codeph">USER</code>, <code class="codeph">USERENV</code>, and <code class="codeph">SYSDATE</code>. These functions must be executed at the originating site. A remote-mapped statement with these functions contains a callback link. For a non-Oracle database for which callbacks are not supported, this can (by default) result in a restriction error.
                     </p>
                     <p>For example, consider the following statement:</p><pre class="oac_no_warn" dir="ltr">DELETE FROM emp@remote_db WHERE hiredate &gt; sysdate;
</pre><p>The previous statement returns the following error message:</p><pre class="oac_no_warn" dir="ltr">ORA-02070: database <span class="italic">REMOTE_DB</span> does not support special functions in this context 
</pre><p>This can be resolved by replacing special functions with a bind variable. For example:</p><pre class="oac_no_warn" dir="ltr">DELETE FROM emp@remote_db WHERE hiredate &gt; :1;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-EC187264-6194-4BF9-B7C9-FB9E601B3C81">Rule C: Object features such as tables with nested table columns, ADT columns, Opaque columns, or Ref Columns cannot be remote-mapped.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Currently, these column types are not supported for heterogeneous access. Hence, this limitation is not directly encountered.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-F6D52F0A-1BB0-433C-8EE4-5B5CDF8C55D5">Rule D: SQL statements containing operators and constructs that are not supported at the remote site cannot be remote-mapped.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>In the case of an <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code> statement, the SQL statement cannot be executed (see Rule B). However, you might be able to execute the SQL statement if the unsupported operator or construct can be executed through a callback link.
                     </p>
                     <p>In the case of a <code class="codeph">SELECT</code> statement, you can execute a statement affected by this rule if none of the remaining rules require the statement to be remote-mapped. The <code class="codeph">SELECT</code> statements affected by this rule are executed by retrieving all the necessary data through a remote <code class="codeph">SELECT</code> operation, and processing the unsupported operator or construct locally using the SQL engine.
                     </p>
                     <p>A remote <code class="codeph">SELECT</code> operation is the operation that retrieves rows from a remote table, as opposed to an operation that retrieves data from a local table. A full table scan is when all the data in the remote table across the network without any filtering (for example, <code class="codeph">SELECT * FROM EMP</code>) is retrieved.
                     </p>
                     <p>Full table scans are expensive and, therefore, Oracle noun attempts to avoid them. If there are indexes on the remote table that can be used, these indexes are used in a <code class="codeph">WHERE</code> clause predicate to reduce the number of rows retrieved across the network.
                     </p>
                     <p>You can check the SQL statement generated by Oracle Database by explaining the statement and querying the <code class="codeph">OTHER</code> column of the explain plan table for each <code class="codeph">REMOTE</code> operation.
                     </p>
                     <div class="infoboxnotealso" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-C90B681E-4D2C-421D-B455-389A33871DE3">
                        <p class="notep1">See Also:</p>
                        <p><a href="optimizer-and-heterogeneous-services.html#GUID-13DB0D52-07F2-4BEA-8054-A3A75069344D" title="An example using index and table statistics.">Example: Using Index and Table Statistics</a> for more information about how to interpret explain plans with remote references.
                        </p>
                     </div>
                     <p>For example, consider the following statement:</p><pre class="oac_no_warn" dir="ltr">SELECT COUNT(*) FROM emp@remote_db WHERE hiredate &lt; sysdate;
</pre><p>The statement returns the following output:</p><pre class="oac_no_warn" dir="ltr">COUNT(*)  
----------
        14
1 row selected.
</pre><p>The remote table scan is: </p><pre class="oac_no_warn" dir="ltr">SELECT hiredate FROM emp;
</pre><p>The predicate converted to a filter cannot be generated back and passed down to the remote operation because <code class="codeph">sysdate</code> is not supported by the <span class="italic"><code class="codeph">remote_db</code></span> or evaluation rules. Thus <code class="codeph">sysdate</code> must be executed locally. 
                     </p>
                     <div class="infoboxnote" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-33B3C3A0-0B4B-410A-B749-CC277F876167">
                        <p class="notep1">Note:</p>
                        <p>Because the remote table scan operation is only partially related to the original query, the number of rows retrieved can be significantly larger than expected and can have a significant impact on performance.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-6F7963E9-403A-4D48-AB48-ABCB83FBFA3B">Rule E: SQL statement containing a table expression cannot be remote-mapped.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This limitation is not directly encountered because table expressions are not supported in the heterogeneous access module.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-B62EA642-95B1-4125-BE40-9FB9CED53DE3">Rule F: If a SQL statement selects LONG data, the statement must be mapped to the node where the table containing the LONG data resides.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Consider the following type of statement:</p><pre class="oac_no_warn" dir="ltr">SELECT long1 FROM <span class="italic">table_with_long</span>@<span class="italic">remote_db</span>, dual; 
</pre><p>The previous statement returns the following error message (if callback links are not supported):</p><pre class="oac_no_warn" dir="ltr">ORA-02025: all tables in the SQL statement must be at the remote database</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-D4F51628-6D7A-4747-A83C-581D35927ECC">Rule G: The statement must be mapped to the node on which the table or tables with columns referenced in the FOR UPDATE OF clause resides when the SQL statement is of form "SELECT...FOR UPDATE OF..."</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>When the SQL statement is of the form <code class="codeph">SELECT...FOR UPDATE OF..., </code>the statement must be mapped to the node on which the table or tables with columns referenced in the <code class="codeph">FOR UPDATE OF</code> clause resides.
                     </p>
                     <p>For example, consider the following statement:</p><pre class="oac_no_warn" dir="ltr">SELECT ename FROM emp@remote_db WHERE hiredate &lt; sysdate FOR UPDATE OF empno;
</pre><p>The previous statement returns the following error message if it cannot be remote-mapped:</p><pre class="oac_no_warn" dir="ltr">ORA-02070: database <span class="italic">REMOTE_DB</span> does not support special functions in this context </pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-70B1B426-BA94-4B10-9CFA-02ABCB75192A">Rule H: If the SQL statement contains sequences, then the statement must be mapped to the site where each sequence is located. </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This rule is not encountered for the heterogeneous access module because remote non-Oracle sequences are not supported.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-74757BFF-6735-40F5-986B-F007924947E7">Rule I: If the statement contains user-defined operators, then the statement must be mapped to the node where each operator is defined.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>If the statement contains user-defined operators, the entire statement needs to be remote-mapped to the database node where the operator is defined.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-147DE3CA-8439-492F-B022-0DFCE91EC3BC">Rule J: A statement containing duplicate bind variables cannot be remote-mapped.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The workaround for this restriction is to use unique bind variables and bind by number.</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="distributed-environment_sql_constraints.html#GUID-630A201B-62B0-4643-A4CF-85D58AA8105F" title="This section explains some of the constraints on SQL in a distributed environment.">Constraints on SQL in a Distributed Environment</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
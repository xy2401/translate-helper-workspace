<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Nonpersistent Queues</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Advanced Queuing User's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Advanced Queuing User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96511-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="omg-monitoring.html" title="Previous" type="text/html">
      <link rel="next" href="error-messages.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OracleÂ® Database Advanced Queuing">
    <meta name="dcterms.isVersionOf" content="ADQUE">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="omg-monitoring.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="error-messages.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Advanced Queuing User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Nonpersistent Queues</li>
            </ol>
            <a id="GUID-53FA8763-D0CA-4EE4-A3B2-606CE01AE702" name="GUID-53FA8763-D0CA-4EE4-A3B2-606CE01AE702"></a><a id="ADQUE2400"></a>
            
            <h2 id="ADQUE-GUID-53FA8763-D0CA-4EE4-A3B2-606CE01AE702" class="sect2"><span class="enumeration_chapter">A </span> Nonpersistent Queues
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Database Advanced Queuing can deliver nonpersistent messages asynchronously to subscribers. These messages can be event-driven and do not persist beyond the failure of the system (or instance). The messages are stored in a system-created queue table. Oracle Database Advanced Queuing supports persistent and nonpersistent messages with a common <a href="glossary.html#GUID-2003BA71-5534-477C-990D-5ABE432A5907"><span class="xrefglossterm">API</span></a>. 
               </p>
               <p>Nonpersistent queues, which can be either single-consumer or multiconsumer, provide a mechanism for notification to all currently connected users. Subscribers can be added to multiconsumer nonpersistent queues, and nonpersistent queues can be destinations for propagation. </p>
               <p>You use the enqueue interface to enqueue messages into a nonpersistent queue in the usual way. You can enqueue RAW and Oracle object type messages into a nonpersistent queue. OCI notifications are used to deliver such messages to users that are currently registered for notification.</p>
               <p>The following topics describe nonpersistent queues, which are deprecated in Oracle Database Advanced Queuing 10<span class="italic">g</span> Release 2 (10.2). Oracle recommends that you use buffered messaging instead.
               </p>
               <div class="infoboxnotealso" id="GUID-53FA8763-D0CA-4EE4-A3B2-606CE01AE702__GUID-0F128853-E73E-4AAF-93EA-46FDDDE5E3BD">
                  <p class="notep1">See Also:</p>
                  <p><span class="q">"<a href="aq-introduction.html#GUID-E87DA98A-4188-4E5A-9984-7311F4C3BA27" title="Buffered messaging combines the rich functionality that this product has always offered with a much faster queuing implementation. Buffered messaging is ideal for applications that do not require the reliability and transaction support of Oracle Database Advanced Queuing persistent messaging.">Buffered Messaging</a>"</span></p>
               </div>
               <p>Topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="non-persistent-queues.html#GUID-3F4FF540-00E0-43DB-8CAC-4876287BEDFE">Creating Nonpersistent Queues</a></p>
                  </li>
                  <li>
                     <p><a href="non-persistent-queues.html#GUID-7469E4B4-6136-4E29-9236-8A2CF214F8E5">Managing Nonpersistent Queues</a></p>
                  </li>
                  <li>
                     <p><a href="non-persistent-queues.html#GUID-9766CBCD-2C8C-4EC6-85B8-3FB84288249A">Compatibility of Nonpersistent Queues</a></p>
                  </li>
                  <li>
                     <p><a href="non-persistent-queues.html#GUID-C6587805-8ABE-40B3-BDE5-5234E7D1F391">Nonpersistent Queue Notification</a></p>
                  </li>
                  <li>
                     <p><a href="non-persistent-queues.html#GUID-6E3C13C7-C638-4F8D-A5DC-455A027774B4">Restrictions on Nonpersistent Queues</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE3520"></a><div class="props_rev_3"><a id="GUID-3F4FF540-00E0-43DB-8CAC-4876287BEDFE" name="GUID-3F4FF540-00E0-43DB-8CAC-4876287BEDFE"></a><h3 id="ADQUE-GUID-3F4FF540-00E0-43DB-8CAC-4876287BEDFE" class="sect3"><span class="enumeration_section">A.1 </span>Creating Nonpersistent Queues
               </h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.CREATE_NP_QUEUE ( 
   queue_name              IN        VARCHAR2, 
   multiple_consumers      IN        BOOLEAN  DEFAULT FALSE, 
   comment                 IN        VARCHAR2 DEFAULT NULL);
</pre><p>This procedure creates a <a href="glossary.html#GUID-A91ACE79-576B-49F6-BE03-D4A792B9B468"><span class="xrefglossterm">nonpersistent</span></a> queue. 
                     </p>
                     <p>Only local recipients are supported for nonpersistent queues. The queue can be either single-consumer or multiconsumer. All queue names must be unique within a schema. The queues are created in an 8.1-compatible system-created queue table (<code class="codeph">AQ$_MEM_SC</code> or <code class="codeph">AQ$_MEM_MC</code>) in the same schema as that specified by the queue name. If the queue name does not specify a schema name, then the queue is created in the login user's schema. 
                     </p>
                     <div class="infoboxnote" id="GUID-3F4FF540-00E0-43DB-8CAC-4876287BEDFE__GUID-8723A182-C429-4F0E-8D50-2C2C82A2C97F">
                        <p class="notep1">Note:</p>
                        <p>Names of nonpersistent queues must not be longer than 24 characters. If you attempt to create a nonpersistent queue with a longer name, error ORA-24019 results.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE3521"></a><div class="props_rev_3"><a id="GUID-7469E4B4-6136-4E29-9236-8A2CF214F8E5" name="GUID-7469E4B4-6136-4E29-9236-8A2CF214F8E5"></a><h3 id="ADQUE-GUID-7469E4B4-6136-4E29-9236-8A2CF214F8E5" class="sect3"><span class="enumeration_section">A.2 </span>Managing Nonpersistent Queues
               </h3>
               <div>
                  <p>Once a queue is created with <code class="codeph">CREATE_NP_QUEUE</code>, it can be enabled by calling <code class="codeph">START_QUEUE</code>. By default, the queue is created with both enqueue and dequeue disabled.
                  </p>
                  <p>You can enqueue RAW and Oracle object type messages into a nonpersistent queue. You cannot dequeue from a nonpersistent queue. The only way to retrieve a message from a nonpersistent queue is by using the <a href="glossary.html#GUID-4C11A79C-E65E-4B48-8A30-E628E322B025"><span class="xrefglossterm">Oracle Call Interface</span></a> (OCI) notification mechanism. You cannot invoke the <code class="codeph">listen</code> call on a nonpersistent queue.
                  </p>
                  <p>A nonpersistent queue can be dropped only by its owner.</p>
               </div>
            </div><a id="ADQUE3522"></a><div class="props_rev_3"><a id="GUID-9766CBCD-2C8C-4EC6-85B8-3FB84288249A" name="GUID-9766CBCD-2C8C-4EC6-85B8-3FB84288249A"></a><h3 id="ADQUE-GUID-9766CBCD-2C8C-4EC6-85B8-3FB84288249A" class="sect3"><span class="enumeration_section">A.3 </span>Compatibility of Nonpersistent Queues
               </h3>
               <div>
                  <p>For 8.1-style or higher queues, the <code class="codeph">compatible</code> parameter of <code class="codeph">init.ora</code> and the <code class="codeph">compatible</code> parameter of the <a href="glossary.html#GUID-45894F1F-4871-4A00-9171-2743821BAD3A"><span class="xrefglossterm">queue table</span></a> should be set to 8.1 or higher to use nonpersistent queues.
                  </p>
               </div>
            </div><a id="ADQUE3524"></a><a id="ADQUE3525"></a><a id="ADQUE3523"></a><div class="props_rev_3"><a id="GUID-C6587805-8ABE-40B3-BDE5-5234E7D1F391" name="GUID-C6587805-8ABE-40B3-BDE5-5234E7D1F391"></a><h3 id="ADQUE-GUID-C6587805-8ABE-40B3-BDE5-5234E7D1F391" class="sect3"><span class="enumeration_section">A.4 </span>Nonpersistent Queue Notification
               </h3>
               <div>
                  <div class="section">
                     <p>For nonpersistent queues, the message is delivered as part of the notification. <a href="non-persistent-queues.html#GUID-C6587805-8ABE-40B3-BDE5-5234E7D1F391__g1009489" title="Rows are queue payload types. For each payload type, the first column is its name. The second, third, and fourth columns describe the actions taken in OCI, E-mail, and PL/SQL respectively.">Table A-1</a> shows the actions performed for <a href="glossary.html#GUID-A91ACE79-576B-49F6-BE03-D4A792B9B468"><span class="xrefglossterm">nonpersistent</span></a> queues for different notification mechanisms when RAW presentation is specified. <a href="non-persistent-queues.html#GUID-C6587805-8ABE-40B3-BDE5-5234E7D1F391__g1009470" title="Rows are queue payload types. For each payload type, the first column is its name. The second, third, and fourth columns describe the actions taken in OCI, E-mail, and PL/SQL respectively.">Table A-2</a> shows the actions performed when XML presentation is specified.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformalwide" id="GUID-C6587805-8ABE-40B3-BDE5-5234E7D1F391__g1009489">
                     <p class="titleintable">Table A-1 Actions Performed for Nonpersistent Queues When RAW Presentation Specified</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Actions Performed for Nonpersistent Queues When RAW Presentation Specified" summary="Rows are queue payload types. For each payload type, the first column is its name. The second, third, and fourth columns describe the actions taken in OCI, E-mail, and PL/SQL respectively." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="21%" id="d125560e417">Queue Payload Type</th>
                              <th align="left" valign="bottom" width="22%" id="d125560e420">OCI Callback</th>
                              <th align="left" valign="bottom" width="30%" id="d125560e423">E-mail</th>
                              <th align="left" valign="bottom" width="28%" id="d125560e426">PL/SQL Callback</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d125560e431" headers="d125560e417 ">
                                 <p>RAW</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d125560e431 d125560e420 ">
                                 <p>OCI callback receives the RAW data in the payload.</p>
                              </td>
                              <td align="left" valign="top" width="30%" headers="d125560e431 d125560e423 ">
                                 <p>Not supported</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d125560e431 d125560e426 ">
                                 <p>PL/SQL callback receives the RAW data in the payload.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d125560e444" headers="d125560e417 ">
                                 <p>Oracle object type</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d125560e444 d125560e420 ">
                                 <p>Not supported</p>
                              </td>
                              <td align="left" valign="top" width="30%" headers="d125560e444 d125560e423 ">
                                 <p>Not supported</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d125560e444 d125560e426 ">
                                 <p>Not supported</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="tblformalwide" id="GUID-C6587805-8ABE-40B3-BDE5-5234E7D1F391__g1009470">
                     <p class="titleintable">Table A-2 Actions Performed for Nonpersistent Queues When XML Presentation Specified</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Actions Performed for Nonpersistent Queues When XML Presentation Specified" summary="Rows are queue payload types. For each payload type, the first column is its name. The second, third, and fourth columns describe the actions taken in OCI, E-mail, and PL/SQL respectively." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="21%" id="d125560e468">Queue Payload Type</th>
                              <th align="left" valign="bottom" width="22%" id="d125560e471">OCI Callback</th>
                              <th align="left" valign="bottom" width="30%" id="d125560e474">E-mail</th>
                              <th align="left" valign="bottom" width="27%" id="d125560e477">PL/SQL Callback</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d125560e482" headers="d125560e468 ">
                                 <p>RAW</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d125560e482 d125560e471 ">
                                 <p>OCI callback receives the XML data in the payload.</p>
                              </td>
                              <td align="left" valign="top" width="30%" headers="d125560e482 d125560e474 ">
                                 <p>XML data is formatted as a SOAP message and e-mailed to the registered e-mail address.</p>
                              </td>
                              <td align="left" valign="top" width="27%" headers="d125560e482 d125560e477 ">
                                 <p>PL/SQL callback receives the XML data in the payload.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d125560e495" headers="d125560e468 ">
                                 <p>Oracle object type</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d125560e495 d125560e471 ">
                                 <p>OCI callback receives the XML data in the payload.</p>
                              </td>
                              <td align="left" valign="top" width="30%" headers="d125560e495 d125560e474 ">
                                 <p>XML data is formatted as a SOAP message and e-mailed to the registered e-mail address.</p>
                              </td>
                              <td align="left" valign="top" width="27%" headers="d125560e495 d125560e477 ">
                                 <p>PL/SQL callback receives the XML data in the payload.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="ADQUE3526"></a><div class="props_rev_3"><a id="GUID-6E3C13C7-C638-4F8D-A5DC-455A027774B4" name="GUID-6E3C13C7-C638-4F8D-A5DC-455A027774B4"></a><h3 id="ADQUE-GUID-6E3C13C7-C638-4F8D-A5DC-455A027774B4" class="sect3"><span class="enumeration_section">A.5 </span>Restrictions on Nonpersistent Queues
               </h3>
               <div>
                  <p>You can create nonpersistent queues of <code class="codeph">RAW</code> and Oracle object type.You are limited to sending messages only to subscribers and explicitly specified recipients who are local. Propagation is not supported from nonpersistent queues. When retrieving messages, you cannot use the dequeue call, but must instead employ the asynchronous notification mechanism, registering for the notification by mean of <code class="codeph">OCISubscriptionRegister</code>.
                  </p>
                  <p>The <code class="codeph">visibility</code> attribute of <code class="codeph">enqueue_options</code> must be set to <code class="codeph">IMMEDIATE</code> for nonpersistent messages.
                  </p>
                  <div class="infoboxnotealso" id="GUID-6E3C13C7-C638-4F8D-A5DC-455A027774B4__GUID-62AAEE42-8F5E-4739-BF71-89315E4FF78A">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDGBIHI">Enqueue Options</a>"</span></p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
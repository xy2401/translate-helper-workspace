<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram.">
      <meta name="description" content="The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram.">
      <title>SDO_GEOR_IP Package Reference</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="GeoRaster Developer's Guide ">
      <meta property="og:description" content="The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="GeoRaster Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="spatial-and-graph-georaster-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-14T11:48:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94793-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="SDO_GEOR_GDAL-reference.html" title="Previous" type="text/html">
      <link rel="next" href="sdo-geor-ra-ref.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph GeoRaster Developer's Guide">
    <meta name="dcterms.isVersionOf" content="GEORS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="SDO_GEOR_GDAL-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="sdo-geor-ra-ref.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">GeoRaster Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SDO_GEOR_IP Package Reference</li>
            </ol>
            <a id="GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" name="GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F"></a>
            
            <h2 id="GEORS-GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" class="sect2"><span class="enumeration_chapter">11 </span>SDO_GEOR_IP Package Reference
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram.</p>
               <p>Many examples in this chapter refer to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.
               </p>
               <p>All SDO_GEOR_IP subprograms can work on GeoRaster objects defined in schemas other than the current connection schema.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4">SDO_GEOR_IP.dodge</a><br></li>
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-5E8228CC-DD00-42F4-80A4-458533A998EA">SDO_GEOR_IP.equalize</a><br></li>
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E">SDO_GEOR_IP.filter</a><br></li>
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA">SDO_GEOR_IP.histogramMatch</a><br></li>
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77">SDO_GEOR_IP.normalize</a><br></li>
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3">SDO_GEOR_IP.piecewiseStretch</a><br></li>
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E">SDO_GEOR_IP.stretch</a><br></li>
               </ul>
            </div>
            
            <div class="props_rev_3"><a id="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4" name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4"></a><h3 id="GEORS-GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4" class="sect3"><span class="enumeration_section">11.1 </span>SDO_GEOR_IP.dodge
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">Format</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.dodge(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster        IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gridsize           IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;samplingFactor     IN VARCHAR2 DEFAULT NULL, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;means              IN SDO_NUMBER_ARRAY DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;standardDeviations IN SDO_NUMBER_ARRAY DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam       IN VARCHAR2 DEFAULT NULL, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster       IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam      IN VARCHAR2 DEFAULT NULL);&nbsp;&nbsp;</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.dodge(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster        IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gridsize           IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;samplingFactor     IN VARCHAR2 DEFAULT NULL, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refGeoraster       IN SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;standardDeviations IN SDO_NUMBER_ARRAY DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam       IN VARCHAR2 DEFAULT NULL, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster       IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam      IN VARCHAR2 DEFAULT NULL);&nbsp;&nbsp;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-30001566-2066-4178-914A-29A2C4E14931">Description</p>
                     <p>Apply a dodging algorithm on the input GeoRaster object to color balance the image.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF">
                              <!-- --></a>inGeoRaster
                        </dt>
                        <dd>
                           <p>The SDO_GEORASTER object to be processed.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA">
                              <!-- --></a>gridSize
                        </dt>
                        <dd>
                           <p>The size of each grid in x and y direction, respectively. It is an array of one or two numbers. If only one number is specified, then it is for both x and y direction.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-6781222E-EB8D-4E59-9E8B-17C8E054D47A">
                              <!-- --></a>samplingFactor
                        </dt>
                        <dd>
                           <p>Sampling factor, used to control the calculation of the statistics, in the format<code class="codeph">'samplingFactor=n'</code>, with the denominator <span class="italic">n</span> in 1/(<span class="italic">n</span>*<span class="italic">n</span>) representing the number of cells skipped in both row and column dimensions in computing the statistics. For example, if <code class="codeph">samplingFactor</code> is 4, one-sixteenth of the cells are sampled; but if <code class="codeph">samplingFactor</code> is 1, all cells are sampled. The higher the value, the less accurate the statistics are likely to be, but the more quickly they will be computed. If not specified (null), the default is 1.
                           </p>
                           <p><code class="codeph">samplingFactor</code> cannot be greater than or equal to one-half (0.5) of <code class="codeph">gridSize</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-601AB169-0880-4E5D-8A5F-B745FEE654CF">
                              <!-- --></a>means
                        </dt>
                        <dd>
                           <p>The target mean values for each output bands. If only one value is specified, it is applied to all the output bands; otherwise, it must have the same number of values as the number bands of the output GeoRaster object.  If null, it is calculated as the average mean value over all the grids.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-AF4C41A3-ECAB-4DF4-86E5-6C48265E2AA9">
                              <!-- --></a>standardDeviations
                        </dt>
                        <dd>
                           <p>The target standard deviation values for each output bands. If only one value is specified, it is applied to all the output bands; otherwise, it must have the same number of values as the number of bands of the output GeoRaster object.    If null, it is calculated as the average standard deviation over all the grids.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-AFBD7B00-0596-40DA-AEA4-F8A403DB2B4D">
                              <!-- --></a>refGeoraster
                        </dt>
                        <dd>
                           <p>The reference GeoRaster object.&nbsp; The output of the dodging result will adapt to the statistics of the reference GeoRaster object.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084">
                              <!-- --></a>storageParam
                        </dt>
                        <dd>
                           <p>A string specifying storage parameters, as explained in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-2BEDAFFB-EF0C-4813-8821-D91342CE7381">
                              <!-- --></a>outGeoRaster
                        </dt>
                        <dd>
                           <p>The output SDO_GEORASTER object that reflects the results of the operation. Must be either a valid existing GeoRaster object or an empty GeoRaster object. (Empty GeoRaster objects are explained in <a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">Blank and Empty GeoRaster Objects</a>.) Cannot be the same GeoRaster object as <code class="codeph">inGeoRaster</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-07E2EEEE-819F-46A9-AA46-F77A18458317">
                              <!-- --></a>parallelParam
                        </dt>
                        <dd>
                           <p>Specifies the degree of parallelism for the operation. If specified, must be in the form <code class="codeph">parallel=</code><span class="italic">n</span>, where <span class="italic">n</span> is greater than 1. The database optimizer uses the degree of parallelism specified by this parameter. If not specified, then by default there is no parallel processing. (For more information, see <a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="There are two types of parallel processing with GeoRaster.">Parallel Processing in GeoRaster</a>.)
                           </p>
                           <p>If parallelism is specified, the procedure performs an internal commit while the process is running. Therefore, you cannot roll back the results of this procedure. If an error occurs (even if it is raised by the Oracle parallel server), you must delete the resulting output GeoRaster object explicitly in order to roll back the operation. </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">Usage Notes</p>
                     <p>This dodging operation uses an adaptive image enhancement method to make the image tone more balanced, that is, the darker area becomes brighter and the bright area becomes darker. The statistics for the grid defined by the <code class="codeph">gridsize</code> parameter are collected on the fly and adjusted to the target mean and standard deviation values. The grid size should be smaller than the imbalanced area in order to remove the imbalance. Adjust the <code class="codeph">gridSize</code> parameter to achieve the best result.
                     </p>
                     <p>The input GeoRaster image must have a <code class="codeph">cellDepth</code> value of <code class="codeph">8BIT_U</code>. Any <code class="codeph">celldepth</code> value in the storage parameters is ignored. The cell depth of the <code class="codeph">outGeoRaster</code> object is always <code class="codeph">8BIT_U</code>.
                     </p>
                     <p>Color map in the input GeoRaster object is not supported.</p>
                     <p>The output GeoRaster object has no pyramid or mask.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">Examples</p>
                     <p>The following example creates a GeoRaster object that is the result of dodging on the input GeoRaster object.  The desired mean and standard deviation are set as 125 and 80, respectively. The grid size is 512 on x and y direction. (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
BEGIN
  INSERT INTO georaster_table (georid, georaster)
    VALUES (41, sdo_geor.init('RDT_1'))
    RETURNING georaster INTO gr2;

  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  sdo_geor_ip.dodge(gr1, sdo_number_array(512, 512), ‘samplingFactor=3’, sdo_number_array(125), sdo_number_array(80), null, gr2);
  UPDATE georaster_table SET georaster=gr2 WHERE georid=41;
  COMMIT;
END;
/
</pre><p>The following example creates a GeoRaster object that is the result of dodging on the input GeoRaster object based on the reference GeoRaster object. Parallel processing is enabled with parallel degree of 4. The grid size is 512 on x and y direction. (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
gr1 sdo_georaster;
gr2 sdo_georaster;
refgr sdo_georaster;
BEGIN
  INSERT INTO georaster_table (georid, georaster) VALUES (41, sdo_geor.init('RDT_1'))
     RETURNING georaster INTO gr2;
  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;
  SELECT georaster INTO refgr FROM georaster_table WHERE georid=1;
  sdo_geor_ip.dodge(gr1, sdo_number_array(512, 512), ‘samplingFactor=3’, refgr, null,
                    gr2, 'parallel=4');
  UPDATE georaster_table SET georaster=gr2 WHERE georid=41;
COMMIT;
END;
/ </pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram.">SDO_GEOR_IP Package Reference</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA" name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA"></a><h3 id="GEORS-GUID-5E8228CC-DD00-42F4-80A4-458533A998EA" class="sect3"><span class="enumeration_section">11.2 </span>SDO_GEOR_IP.equalize
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">Format</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.equalize(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bandNumbers  IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.equalize(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layerNumbers IN VARCHAR2,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster IN OUT SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.equalize(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bandNumbers  IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rasterBlob   IN OUT BLOB,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outArea      OUT SDO_GEOMETRY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outWindow    OUT SDO_NUMBER_ARRAY);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.equalize(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layerNumbers IN VARCHAR2,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rasterBlob   IN OUT BLOB,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outArea      OUT SDO_GEOMETRY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outWindow    OUT SDO_NUMBER_ARRAY);</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-30001566-2066-4178-914A-29A2C4E14931">Description</p>
                     <p>Process the input GeoRaster object by using histogram equalization method. The processed image is stored in the output GeoRaster object or in a BLOB.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF">
                              <!-- --></a>inGeoRaster
                        </dt>
                        <dd>
                           <p>The SDO_GEORASTER object to be equalized.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-5B08A3DD-8FB5-4C77-B33B-E715FE86C843">
                              <!-- --></a>pyramidLevel
                        </dt>
                        <dd>
                           <p>A number specifying the pyramid level to be equalized in the source GeoRaster object. If null, the default is 0.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-B990F65D-6226-455A-94B8-87A3958C9239">
                              <!-- --></a>cropArea
                        </dt>
                        <dd>
                           <p>Crop area definition. If <code class="codeph">cropArea</code> is of type SDO_GEOMETRY, use the <code class="codeph">layerNumbers</code> parameter to specify one or more layer numbers; if <code class="codeph">cropArea</code> is of type SDO_NUMBER_ARRAY, use the <code class="codeph">bandNumbers</code> parameter to specify one or more band numbers.
                           </p>
                           <p>If the data type is SDO_NUMBER_ARRAY, the parameter identifies the upper-left (row, column) and lower-right (row, column) coordinates of a rectangular window, and raster space is assumed. If the data type is SDO_GEOMETRY, the minimum bounding rectangle (MBR) of the geometry object is used as the crop area; see also the Usage Notes for SDO_SRID requirements.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA">
                              <!-- --></a>bandNumbers
                        </dt>
                        <dd>
                           <p>A string identifying the physical band numbers on which the operation is to be performed. Use commas to delimit the values, and a hyphen to indicate a range (for example, <code class="codeph">1-3</code> for bands 1, 2, and 3).
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-7D092C87-2E10-476C-A9DB-B1C0D3E01C1D">
                              <!-- --></a>layerNumbers
                        </dt>
                        <dd>
                           <p>A string identifying the logical layer numbers on which the operation is to be performed. Use commas to delimit the values, and a hyphen to indicate a range (for example, <code class="codeph">2-4</code> for layers 2, 3, and 4).
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084">
                              <!-- --></a>storageParam
                        </dt>
                        <dd>
                           <p>A string specifying storage parameters, as explained in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-6B0389F3-BBAD-42E8-9206-F5875FF03A15">
                              <!-- --></a>outGeoRaster
                        </dt>
                        <dd>
                           <p>The output SDO_GEORASTER object that reflects the results of the operation. Must be either a valid existing GeoRaster object or an empty GeoRaster object. (Empty GeoRaster objects are explained in <a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">Blank and Empty GeoRaster Objects</a>.) Cannot be the same GeoRaster object as <code class="codeph">inGeoRaster</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-9E414F13-BBF7-411D-9B84-8382EB5900D2">
                              <!-- --></a>parallelParam
                        </dt>
                        <dd>
                           <p>Specifies the degree of parallelism for the operation. If specified, must be in the form <code class="codeph">parallel=</code><span class="italic">n</span>, where <span class="italic">n</span> is greater than 1. The database optimizer uses the degree of parallelism specified by this parameter. If not specified, then by default there is no parallel processing. (For more information, see <a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="There are two types of parallel processing with GeoRaster.">Parallel Processing in GeoRaster</a>.)
                           </p>
                           <p>If parallelism is specified, the procedure performs an internal commit while the process is running. Therefore, you cannot roll back the results of this procedure. If an error occurs (even if it is raised by the Oracle parallel server), you must delete the resulting output GeoRaster object explicitly in order to roll back the operation. </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-5E5A311B-2852-47E4-8D38-12E9EAC38E7C">
                              <!-- --></a>rasterBlob
                        </dt>
                        <dd>
                           <p>BLOB to hold the output of the processing result. It must exist or have been initialized before the operation.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-8055532C-9900-40CB-8E43-64B682831D5C">
                              <!-- --></a>outArea
                        </dt>
                        <dd>
                           <p>An SDO_GEOMETRY object containing the MBR (minimum bounding rectangle) in the model coordinate system of the resulting object.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-9C93D567-0081-43C9-9554-B7ADF2EB5032">
                              <!-- --></a>outWindow
                        </dt>
                        <dd>
                           <p>An SDO_NUMBER_ARRAY object identifying the coordinates of the upper-left and lower-right corners of the output window in the cell space.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">Usage Notes</p>
                     <p>The input GeoRaster object must have histogram generated for each output band.</p>
                     <p>The equalization is performed based on the histograms stored in the metadata of the input GeoRaster object.</p>
                     <p>Color map stored in the input GeoRaster object is not supported.</p>
                     <p>The output GeoRaster object has no pyramid or mask.</p>
                     <p>The cell depth of the  output GeoRaster object is always <code class="codeph">8BIT_U</code>.
                     </p>
                     <p>If the <code class="codeph">cropArea</code> parameter data type is SDO_GEOMETRY, the SDO_SRID value must be one of the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Null, to specify raster space</p>
                        </li>
                        <li>
                           <p>A value from the SRID column of the MDSYS.CS_SRS table</p>
                           <p>If the SDO_SRID values for the <code class="codeph">cropArea</code> parameter geometry and the model space are different, the <code class="codeph">cropArea</code> parameter geometry is automatically transformed to the coordinate system of the model space before the operation is performed. (Raster space and model space are explained in <a href="georaster-overview-and-concepts.html#GUID-E38F1F16-4272-4CC8-A199-C97B11C634BA" title="Raster data can have some or all of the following elements.">GeoRaster Data Model</a>.)
                           </p>
                        </li>
                     </ul>
                     <p>If the <code class="codeph">cropArea</code> parameter specifies a geodetic MBR, it cannot cross the date line meridian
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">Examples</p>
                     <p>The following example creates a GeoRaster object that has each input band equalized based on the histogram stored in the metadata. (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  cropArea sdo_number_array := null;
BEGIN
  INSERT INTO georaster_table (georid, georaster)
    VALUES (41, sdo_geor.init('RDT_1'))
    RETURNING georaster INTO gr2;

  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  sdo_geor_ip.equalize(gr1, cropArea, null, null, gr2);
  UPDATE georaster_table SET georaster=gr2 WHERE georid=41;
  COMMIT;
END;
/
</pre><p>The following example performs the image equalization based on the histogram stored in the metadata; the output is in a temporary BLOB. (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  out_lob BLOB;
  cropArea sdo_number_array := null;
  outArea sdo_geometry;
  outWindow sdo_number_array;
BEGIN
  dbms_lob.create_temporary(out_lob, TRUE);
  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  sdo_geor_ip.equalize(gr1, cropArea, null, null, out_lob, outArea, outWindow);
  if outWindow is not null then
     dbms_output.put_line('output window: (' || outWindow(1) || ',' ||
                           outWindow(2) || ',' || outWindow(3) || ',' || outWindow(4) || ')');
  end if;
  dbms_lob.freeTemporary(out_lob);
END;
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram.">SDO_GEOR_IP Package Reference</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E" name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E"></a><h3 id="GEORS-GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E" class="sect3"><span class="enumeration_section">11.3 </span>SDO_GEOR_IP.filter
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">Format</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.filter(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bandNumbers  IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterParam  IN VARCHAR2,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterKernel IN SDO_NUMBER_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.filter(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layerNumbers IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterParam  IN VARCHAR2,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterKernel IN SDO_NUMBER_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.filter(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bandNumbers  IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterParam  IN VARCHAR2,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterKernel IN SDO_NUMBER_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rasterBlob   IN OUT BLOB,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outArea      OUT SDO_GEOMETRY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outWindow    OUT SDO_NUMBER_ARRAY);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.filter(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layerNumbers IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterParam  IN VARCHAR2,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterKernel IN SDO_NUMBER_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rasterBlob   IN OUT BLOB,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outArea      OUT SDO_GEOMETRY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outWindow    OUT SDO_NUMBER_ARRAY);</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-30001566-2066-4178-914A-29A2C4E14931">Description</p>
                     <p>Applies the convolution filter on the input GeoRaster object. The processed image is stored in the output GeoRaster object or in a BLOB.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF">
                              <!-- --></a>inGeoRaster
                        </dt>
                        <dd>
                           <p>The SDO_GEORASTER object for the filter operation.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-5B08A3DD-8FB5-4C77-B33B-E715FE86C843">
                              <!-- --></a>pyramidLevel
                        </dt>
                        <dd>
                           <p>A number specifying the pyramid level for the filter operation in the source GeoRaster object. If null, the default is 0.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-B990F65D-6226-455A-94B8-87A3958C9239">
                              <!-- --></a>cropArea
                        </dt>
                        <dd>
                           <p>Crop area definition. If <code class="codeph">cropArea</code> is of type SDO_GEOMETRY, use the <code class="codeph">layerNumbers</code> parameter to specify one or more layer numbers; if <code class="codeph">cropArea</code> is of type SDO_NUMBER_ARRAY, use the <code class="codeph">bandNumbers</code> parameter to specify one or more band numbers.
                           </p>
                           <p>If the data type is SDO_NUMBER_ARRAY, the parameter identifies the upper-left (row, column) and lower-right (row, column) coordinates of a rectangular window, and raster space is assumed. If the data type is SDO_GEOMETRY, the minimum bounding rectangle (MBR) of the geometry object is used as the crop area; see also the Usage Notes for SDO_SRID requirements.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA">
                              <!-- --></a>bandNumbers
                        </dt>
                        <dd>
                           <p>A string identifying the physical band numbers on which the operation is to be performed. Use commas to delimit the values, and a hyphen to indicate a range (for example, <code class="codeph">1-3</code> for bands 1, 2, and 3).
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-7D092C87-2E10-476C-A9DB-B1C0D3E01C1D">
                              <!-- --></a>layerNumbers
                        </dt>
                        <dd>
                           <p>A string identifying the logical layer numbers on which the operation is to be performed. Use commas to delimit the values, and a hyphen to indicate a range (for example, <code class="codeph">2-4</code> for layers 2, 3, and 4).
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-C6F3DCD5-DAB2-43DC-8B39-628FA5A3A80B">
                              <!-- --></a>filterParam
                        </dt>
                        <dd>
                           <p>The type of the filter to be applied on the input GeoRaster. It is in the format <code class="codeph">‘filterType=</code><span class="italic">value</span><code class="codeph">’</code> where <span class="italic">value</span> can be one of the following: <code class="codeph">LPF</code> (low-pass filter, the default), <code class="codeph">HPF</code> (high-pass filter), <code class="codeph">HBF</code> (high-boost filter), <code class="codeph">MIN</code> (minimum filter), <code class="codeph">MAX</code> (maximum filter), <code class="codeph">MEDIAN</code> (median filter), <code class="codeph">MODE</code> (mode filter), or <code class="codeph">CUSTOM</code> (user-provided filter kernel).
                           </p>
                           <p><code class="codeph">filterParam</code> can also include:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">‘kernelSize=(</code><span class="italic">kx, ky</span><code class="codeph">)’</code> where <span class="italic">kx, ky</span> are the size of the kernel on the x and y direction. For a filter type other than <code class="codeph">CUSTOM</code>, the <code class="codeph">kx</code> and <code class="codeph">ky</code> should be odd numbers greater than or equal to 3.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">‘p1 = </code><span class="italic">value</span><code class="codeph">’</code>, used by the <code class="codeph">HBF</code> filter to indicate the degree of boost.
                                 </p>
                              </li>
                           </ul>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-82D89140-9FAE-4CBB-9EA1-39593A53014B">
                              <!-- --></a>filterKernel
                        </dt>
                        <dd>
                           <p>Required only when <code class="codeph">filterType=CUSTOM</code>. It is the <code class="codeph">kx * ky</code> numbers in an SDO_NUMBER_ARRAY object.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084">
                              <!-- --></a>storageParam
                        </dt>
                        <dd>
                           <p>A string specifying storage parameters, as explained in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-CB1B5309-8CBB-401F-966B-A90331871EE0">
                              <!-- --></a>outGeoRaster
                        </dt>
                        <dd>
                           <p>The output SDO_GEORASTER object that reflects the results of the operation. Must be either a valid existing GeoRaster object or an empty GeoRaster object. (Empty GeoRaster objects are explained in <a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">Blank and Empty GeoRaster Objects</a>.) Cannot be the same GeoRaster object as <code class="codeph">inGeoRaster</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-E5C71A16-77E0-4F1C-8615-594727E526FE">
                              <!-- --></a>parallelParam
                        </dt>
                        <dd>
                           <p>Specifies the degree of parallelism for the operation. If specified, must be in the form <code class="codeph">parallel=</code><span class="italic">n</span>, where <span class="italic">n</span> is greater than 1. The database optimizer uses the degree of parallelism specified by this parameter. If not specified, then by default there is no parallel processing. (For more information, see <a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="There are two types of parallel processing with GeoRaster.">Parallel Processing in GeoRaster</a>.)
                           </p>
                           <p>If parallelism is specified, the procedure performs an internal commit while the process is running. Therefore, you cannot roll back the results of this procedure. If an error occurs (even if it is raised by the Oracle parallel server), you must delete the resulting output GeoRaster object explicitly in order to roll back the operation. </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-A7757357-237B-4C33-B6E1-46897551FC27">
                              <!-- --></a>rasterBlob
                        </dt>
                        <dd>
                           <p>BLOB to hold the output of the processing result. It must exist or have been initialized before the operation.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-D475FA3B-5A8F-4A96-88D4-614729230A71">
                              <!-- --></a>outArea
                        </dt>
                        <dd>
                           <p>An SDO_GEOMETRY object containing the MBR (minimum bounding rectangle) in the model coordinate system of the resulting object.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-3EA6ED19-EEA3-4006-9F23-A22DC31EF9AA">
                              <!-- --></a>outWindow
                        </dt>
                        <dd>
                           <p>An SDO_NUMBER_ARRAY object identifying the coordinates of the upper-left and lower-right corners of the output window in the cell space.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">Usage Notes</p>
                     <p>For an introduction to image filtering, see <a href="image-processing-virtual-mosaic.html#GUID-F3C5A387-4E89-4E85-B17D-75FB75917869" title="Image filtering is the process of applying a convolution filter on an image to achieve a specific purpose. For example, applying a low-pass filter on an image can smooth and reduce noise in an image, while applying a high-pass filter on an image can enhance the details of the image or even detect the edges inside the image.">Image Filtering</a>.
                     </p>
                     <p>The following are <code class="codeph">filterKernel</code> values for some of the predefined 3x3 filters:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>LPF: (1, 1, 1, 1, 1, 1, 1, 1, 1)*1/9</p>
                        </li>
                        <li>
                           <p>HPF: (-1, -1, -1, -1, 8, -1, -1, -1, -1)*1/9</p>
                        </li>
                        <li>
                           <p>HBF: (-k, -k, -k, -k, 8k, -k, -k, -k, -k)*1/9, where <span class="italic">k</span> is the boost factor specified by parameter <code class="codeph">p1</code></p>
                        </li>
                     </ul>
                     <p>For <code class="codeph">kernelSize</code>, <span class="italic">kx * ky</span> must be less than 10000.
                     </p>
                     <p>If the <code class="codeph">cropArea</code> parameter data type is SDO_GEOMETRY, the SDO_SRID value must be one of the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Null, to specify raster space</p>
                        </li>
                        <li>
                           <p>A value from the SRID column of the MDSYS.CS_SRS table</p>
                           <p>If the SDO_SRID values for the <code class="codeph">cropArea</code> parameter geometry and the model space are different, the <code class="codeph">cropArea</code> parameter geometry is automatically transformed to the coordinate system of the model space before the operation is performed. (Raster space and model space are explained in <a href="georaster-overview-and-concepts.html#GUID-E38F1F16-4272-4CC8-A199-C97B11C634BA" title="Raster data can have some or all of the following elements.">GeoRaster Data Model</a>.)
                           </p>
                        </li>
                     </ul>
                     <p>Color map in the input GeoRaster object is not supported.</p>
                     <p>The output GeoRaster object has no pyramid or mask.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">Examples</p>
                     <p>The following example creates a GeoRaster object that is the result of using the default low-pass filter on the input GeoRaster object. The filter kernel size is 3 by 3. (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  cropArea sdo_geometry := null;
BEGIN
  INSERT INTO georaster_table (georid, georaster)
    VALUES (41, sdo_geor.init('RDT_1'))
    RETURNING georaster INTO gr2;

  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  sdo_geor_ip.filter(gr1, 0, cropArea, null, ‘filtertype=LPF, kernelsize=(3, 3)’, null, null, gr2);
  UPDATE georaster_table SET georaster=gr2 WHERE georid=41;
  COMMIT;
END;
/
</pre><p>The following example applies a custom (user&#x2013;provided) 3 by 3 filter on the input GeoRaster object; the output is in a temporary BLOB. (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  cropArea sdo_geometry := null;
  out_lob  BLOB;
  outArea  sdo_geometry := null;
  outWindow sdo_geometry := null;
BEGIN
  dbms_lob.create_temporary(out_lob, TRUE);

  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  sdo_geor_ip.filter(gr1, 0, cropArea, null, ‘filtertype=CUSTOM, kernelsize=(3,3)’, sdo_number_array(1/4, 1/2, 1/4, 1/2, 1, 1/2, 1/4, 1.2, 1/4 ), null, out_lob, outArea, outWindow);

  if outWindow is not null then
     dbms_output.put_line('output window: (' || outWindow(1) || ',' ||
                           outWindow(2) || ',' || outWindow(3) || ',' || outWindow(4) || ')');
  end if;
  dbms_lob.freeTemporary(out_lob);

 END;
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram.">SDO_GEOR_IP Package Reference</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA" name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA"></a><h3 id="GEORS-GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA" class="sect3"><span class="enumeration_section">11.4 </span>SDO_GEOR_IP.histogramMatch
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">Format</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.histogramMatch(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster    IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel   IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea       IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bandNumbers    IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refHistograms  IN SDO_GEOR_HISTOGRAM_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam   IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster   IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.histogramMatch(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster    IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel   IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea       IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layerNumbers   IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refHistograms  IN SDO_GEOR_HISTOGRAM_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam   IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster   IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.histogramMatch(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bandNumbers  IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refGeoRaster IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.histogramMatch(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layerNumbers IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refGeoRaster IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-30001566-2066-4178-914A-29A2C4E14931">Description</p>
                     <p>Processes the input GeoRaster object so that the histograms of the output GeoRaster object matches the histogram of a reference GeoRaster object (<code class="codeph">refGeoRaster</code>) or a reference histogram (<code class="codeph">refHistograms</code>).
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF">
                              <!-- --></a>inGeoRaster
                        </dt>
                        <dd>
                           <p>The SDO_GEORASTER object for the histogram matching operation.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-5B08A3DD-8FB5-4C77-B33B-E715FE86C843">
                              <!-- --></a>pyramidLevel
                        </dt>
                        <dd>
                           <p>A number specifying the pyramid level for the histogram matching operation. If null, the default is 0.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-B990F65D-6226-455A-94B8-87A3958C9239">
                              <!-- --></a>cropArea
                        </dt>
                        <dd>
                           <p>Crop area definition. If <code class="codeph">cropArea</code> is of type SDO_GEOMETRY, use the <code class="codeph">layerNumbers</code> parameter to specify one or more layer numbers; if <code class="codeph">cropArea</code> is of type SDO_NUMBER_ARRAY, use the <code class="codeph">bandNumbers</code> parameter to specify one or more band numbers.
                           </p>
                           <p>If the data type is SDO_NUMBER_ARRAY, the parameter identifies the upper-left (row, column) and lower-right (row, column) coordinates of a rectangular window, and raster space is assumed. If the data type is SDO_GEOMETRY, the minimum bounding rectangle (MBR) of the geometry object is used as the crop area; see also the Usage Notes for SDO_SRID requirements.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA">
                              <!-- --></a>bandNumbers
                        </dt>
                        <dd>
                           <p>A string identifying the physical band numbers on which the operation is to be performed. Use commas to delimit the values, and a hyphen to indicate a range (for example, <code class="codeph">1-3</code> for bands 1, 2, and 3).
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-7D092C87-2E10-476C-A9DB-B1C0D3E01C1D">
                              <!-- --></a>layerNumbers
                        </dt>
                        <dd>
                           <p>A string identifying the logical layer numbers on which the operation is to be performed. Use commas to delimit the values, and a hyphen to indicate a range (for example, <code class="codeph">2-4</code> for layers 2, 3, and 4).
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-A81F7EC9-782B-4076-A288-B652219D728B">
                              <!-- --></a>refHistograms
                        </dt>
                        <dd>
                           <p>An array of reference histograms. If there is only one element in the array, all the output bands match to this histogram; otherwise, the length of the array must be the same as the number of the bands in the output GeoRaster object.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-C6F3DCD5-DAB2-43DC-8B39-628FA5A3A80B">
                              <!-- --></a>refGeoRaster
                        </dt>
                        <dd>
                           <p>The reference GeoRaster object. The reference GeoRaster object must have a histogram stored in the metadata, and must have the same number of bands as the input GeoRaster object.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084">
                              <!-- --></a>storageParam
                        </dt>
                        <dd>
                           <p>A string specifying storage parameters, as explained in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-3F772D21-93B2-4674-AD00-B8D5117410B3">
                              <!-- --></a>outGeoRaster
                        </dt>
                        <dd>
                           <p>The output SDO_GEORASTER object that reflects the results of the operation. Must be either a valid existing GeoRaster object or an empty GeoRaster object. (Empty GeoRaster objects are explained in <a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">Blank and Empty GeoRaster Objects</a>.) Cannot be the same GeoRaster object as <code class="codeph">inGeoRaster</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-4CFABCAF-59E9-4E91-AFA8-F65CD9DACA15">
                              <!-- --></a>parallelParam
                        </dt>
                        <dd>
                           <p>Specifies the degree of parallelism for the operation. If specified, must be in the form <code class="codeph">parallel=</code><span class="italic">n</span>, where <span class="italic">n</span> is greater than 1. The database optimizer uses the degree of parallelism specified by this parameter. If not specified, then by default there is no parallel processing. (For more information, see <a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="There are two types of parallel processing with GeoRaster.">Parallel Processing in GeoRaster</a>.)
                           </p>
                           <p>If parallelism is specified, the procedure performs an internal commit while the process is running. Therefore, you cannot roll back the results of this procedure. If an error occurs (even if it is raised by the Oracle parallel server), you must delete the resulting output GeoRaster object explicitly in order to roll back the operation. </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">Usage Notes</p>
                     <p>The input GeoRaster object must have histograms generated for each band and stored in the metadata.</p>
                     <p>The reference GeoRaster object must have the same number of bands as the input GeoRaster object. The cell depth of the reference GeoRaster cannot be greater than the cell depth of the <code class="codeph">outGeoRaster</code> object. The reference GeoRaster object must have histograms set in the metadata.
                     </p>
                     <p>If the <code class="codeph">cropArea</code> parameter data type is SDO_GEOMETRY, the SDO_SRID value must be one of the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Null, to specify raster space</p>
                        </li>
                        <li>
                           <p>A value from the SRID column of the MDSYS.CS_SRS table</p>
                           <p>If the SDO_SRID values for the <code class="codeph">cropArea</code> parameter geometry and the model space are different, the <code class="codeph">cropArea</code> parameter geometry is automatically transformed to the coordinate system of the model space before the operation is performed. (Raster space and model space are explained in <a href="georaster-overview-and-concepts.html#GUID-E38F1F16-4272-4CC8-A199-C97B11C634BA" title="Raster data can have some or all of the following elements.">GeoRaster Data Model</a>.)
                           </p>
                        </li>
                     </ul>
                     <p>Color map stored in the input GeoRaster object is not supported.</p>
                     <p>The output GeoRaster object has no pyramid or mask.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">Examples</p>
                     <p>The following example creates a GeoRaster object that is the result of histogram matching the input GeoRaster object to the reference histograms. In the example, the reference histograms are stored in a table <code class="codeph">histogram_table(histogram sdo_geor_histogram, band number)</code>. (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  cropArea sdo_number_array := null;
  refHists sdo_geor_histogram_array;
BEGIN
  INSERT INTO georaster_table (georid, georaster)
    VALUES (41, sdo_geor.init('RDT_1'))
    RETURNING georaster INTO gr2;

  -- get the source GeoRaster object
  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  -- get the reference histogram
  SELECT histogram bulk collect into refHists from histogram_table order by band;

  sdo_geor_ip.histogramMatch(gr1, 0, cropArea, null, refHists, null, gr2);
  UPDATE georaster_table SET georaster=gr2 WHERE georid=41;
  COMMIT;
END;
/
</pre><p>The following example creates a GeoRaster object that is the result of histogram matching the input GeoRaster object to the reference GeoRaster object. (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  refgr sdo_georaster;
  cropArea sdo_number_array := null;
BEGIN
  INSERT INTO georaster_table (georid, georaster)
    VALUES (41, sdo_geor.init('RDT_1'))
    RETURNING georaster INTO gr2;

  -- get the source GeoRaster object
  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  -- get the reference GeoRaster object
  SELECT georaster INTO refgr FROM georaster_table WHERE georid=5;

  sdo_geor_ip.histogramMatch(gr1, 0, cropArea, null, refgr, null, gr2);
  UPDATE georaster_table SET georaster=gr2 WHERE georid=41;
  COMMIT;
END;
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram.">SDO_GEOR_IP Package Reference</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77" name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77"></a><h3 id="GEORS-GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77" class="sect3"><span class="enumeration_section">11.5 </span>SDO_GEOR_IP.normalize
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">Format</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.normalize(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster        IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel       IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea           IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bandNumbers        IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;means              IN SDO_NUMBER_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;standardDeviations IN SDO_NUMBER_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam       IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster       IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam      IN VARCHAR2 DEFAULT NULL);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.normalize(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster        IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel       IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea           IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layerNumbers       IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;means              IN SDO_NUMBER_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;standardDeviations IN SDO_NUMBER_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam       IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster       IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam      IN VARCHAR2 DEFAULT NULL);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.normalize(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster        IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel       IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea           IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bandNumbers        IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;means              IN SDO_NUMBER_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;standardDeviations IN SDO_NUMBER_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam       IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rasterBlob         IN OUT BLOB,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outArea            OUT SDO_GEOMETRY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outWindow          OUT SDO_NUMBER_ARRAY);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.normalize(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster        IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel       IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea           IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layerNumbers       IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;means              IN SDO_NUMBER_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;standardDeviations IN SDO_NUMBER_ARRAY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam       IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rasterBlob         IN OUT BLOB,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outArea            OUT SDO_GEOMETRY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outWindow          OUT SDO_NUMBER_ARRAY);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.normalize(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bandNumbers  IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refGeoRaster IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.normalize(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layerNumbers IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refGeoRaster IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-30001566-2066-4178-914A-29A2C4E14931">Description</p>
                     <p>Normalizes the input GeoRaster object using the specified mean and standard deviation.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF">
                              <!-- --></a>inGeoRaster
                        </dt>
                        <dd>
                           <p>The SDO_GEORASTER object to be normalized.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-5B08A3DD-8FB5-4C77-B33B-E715FE86C843">
                              <!-- --></a>pyramidLevel
                        </dt>
                        <dd>
                           <p>A number specifying the pyramid level to be normalized in the source GeoRaster object. If null, the default is 0.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-B990F65D-6226-455A-94B8-87A3958C9239">
                              <!-- --></a>cropArea
                        </dt>
                        <dd>
                           <p>Crop area definition. If <code class="codeph">cropArea</code> is of type SDO_GEOMETRY, use the <code class="codeph">layerNumbers</code> parameter to specify one or more layer numbers; if <code class="codeph">cropArea</code> is of type SDO_NUMBER_ARRAY, use the <code class="codeph">bandNumbers</code> parameter to specify one or more band numbers.
                           </p>
                           <p>If the data type is SDO_NUMBER_ARRAY, the parameter identifies the upper-left (row, column) and lower-right (row, column) coordinates of a rectangular window, and raster space is assumed. If the data type is SDO_GEOMETRY, the minimum bounding rectangle (MBR) of the geometry object is used as the crop area; see also the Usage Notes for SDO_SRID requirements.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA">
                              <!-- --></a>bandNumbers
                        </dt>
                        <dd>
                           <p>A string identifying the physical band numbers on which the operation is to be performed. Use commas to delimit the values, and a hyphen to indicate a range (for example, <code class="codeph">1-3</code> for bands 1, 2, and 3).
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-7D092C87-2E10-476C-A9DB-B1C0D3E01C1D">
                              <!-- --></a>layerNumbers
                        </dt>
                        <dd>
                           <p>A string identifying the logical layer numbers on which the operation is to be performed. Use commas to delimit the values, and a hyphen to indicate a range (for example, <code class="codeph">2-4</code> for layers 2, 3, and 4).
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-601AB169-0880-4E5D-8A5F-B745FEE654CF">
                              <!-- --></a>means
                        </dt>
                        <dd>
                           <p>The target mean values for each output band. If only one value is specified, it is applied to all the output bands; otherwise, it must have the same number of values as the number of bands of the output GeoRaster object. The target mean values must be in the range of the cell depth of the <code class="codeph">outGeoRaster</code> object. If null, it defaults to 128.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-AF4C41A3-ECAB-4DF4-86E5-6C48265E2AA9">
                              <!-- --></a>standardDeviations
                        </dt>
                        <dd>
                           <p>The target standard deviation values for each output band. If only one value is specified, it is applied to all the output bands; otherwise, it must have the same number of values as the number of bands of the output GeoRaster object. The target standard deviation values must be in the range of the cell depth of the <code class="codeph">outGeoRaster</code> object. If null, it defaults to 100.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-C6F3DCD5-DAB2-43DC-8B39-628FA5A3A80B">
                              <!-- --></a>refGeoRaster
                        </dt>
                        <dd>
                           <p>The reference GeoRaster object. Instead of giving the target mean and standard deviation, the mean and standard deviation of <code class="codeph">refGeoRaster</code> are used as the target. The reference GeoRaster object must have the same number of bands as the input GeoRaster object.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084">
                              <!-- --></a>storageParam
                        </dt>
                        <dd>
                           <p>A string specifying storage parameters, as explained in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-8A6B0107-A70D-45F4-8AA3-94310363730E">
                              <!-- --></a>outGeoRaster
                        </dt>
                        <dd>
                           <p>The output SDO_GEORASTER object that reflects the results of the operation. Must be either a valid existing GeoRaster object or an empty GeoRaster object. (Empty GeoRaster objects are explained in <a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">Blank and Empty GeoRaster Objects</a>.) Cannot be the same GeoRaster object as <code class="codeph">inGeoRaster</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-89C3EA11-4E66-47A3-8931-43A18D84E31E">
                              <!-- --></a>parallelParam
                        </dt>
                        <dd>
                           <p>Specifies the degree of parallelism for the operation. If specified, must be in the form <code class="codeph">parallel=</code><span class="italic">n</span>, where <span class="italic">n</span> is greater than 1. The database optimizer uses the degree of parallelism specified by this parameter. If not specified, then by default there is no parallel processing. (For more information, see <a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="There are two types of parallel processing with GeoRaster.">Parallel Processing in GeoRaster</a>.)
                           </p>
                           <p>If parallelism is specified, the procedure performs an internal commit while the process is running. Therefore, you cannot roll back the results of this procedure. If an error occurs (even if it is raised by the Oracle parallel server), you must delete the resulting output GeoRaster object explicitly in order to roll back the operation. </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-C53644EC-C8C1-4E9D-9C78-50A8997D4064">
                              <!-- --></a>rasterBlob
                        </dt>
                        <dd>
                           <p>BLOB to hold the output of the processing result. It must exist or have been initialized before the operation.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-E2EFFD60-7601-491A-8FB5-EFEC9E6EFB0E">
                              <!-- --></a>outArea
                        </dt>
                        <dd>
                           <p>An SDO_GEOMETRY object containing the MBR (minimum bounding rectangle) in the model coordinate system of the resulting object.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-43A2B3E0-9B49-4461-9577-903874CF7BAB">
                              <!-- --></a>outWindow
                        </dt>
                        <dd>
                           <p>An SDO_NUMBER_ARRAY object identifying the coordinates of the upper-left and lower-right corners of the output window in the cell space.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">Usage Notes</p>
                     <p>The input GeoRaster object must have statistics generated for each output band.</p>
                     <p>The reference GeoRaster object must have the same number of bands as the input GeoRaster object. The cell depth of the <code class="codeph">refGeoRaster</code> object cannot be greater than the cell depth of the <code class="codeph">outGeoRaster</code> object. The reference GeoRaster object must have statistics set in the metadata.
                     </p>
                     <p>If the <code class="codeph">cropArea</code> parameter data type is SDO_GEOMETRY, the SDO_SRID value must be one of the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Null, to specify raster space</p>
                        </li>
                        <li>
                           <p>A value from the SRID column of the MDSYS.CS_SRS table</p>
                           <p>If the SDO_SRID values for the <code class="codeph">cropArea</code> parameter geometry and the model space are different, the <code class="codeph">cropArea</code> parameter geometry is automatically transformed to the coordinate system of the model space before the operation is performed. (Raster space and model space are explained in <a href="georaster-overview-and-concepts.html#GUID-E38F1F16-4272-4CC8-A199-C97B11C634BA" title="Raster data can have some or all of the following elements.">GeoRaster Data Model</a>.)
                           </p>
                        </li>
                     </ul>
                     <p>Color map in the input GeoRaster object is not supported.</p>
                     <p>The output GeoRaster object has no pyramid or mask.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">Examples</p>
                     <p>The following example creates a GeoRaster object and performs normalization on the bands of the input GeoRaster object based on the given means and standard deviations. (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  cropArea sdo_number_array := null;
BEGIN
  INSERT INTO georaster_table (georid, georaster)
    VALUES (41, sdo_geor.init('RDT_1'))
    RETURNING georaster INTO gr2;

  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  sdo_geor_ip.normalize(gr1, 0, cropArea, null, sdo_number_array(50, 80, 100), sdo_number_array(30, 20, 50), null, gr2);
  UPDATE georaster_table SET georaster=gr2 WHERE georid=41;
  COMMIT;
END;
/
</pre><p>The following exampleperforms normalization on the bands of the input GeoRaster object based on the given means and standard deviations; the output is in a temporary BLOB. (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  cropArea sdo_number_array := null;
  out_lob  BLOB;
  outArea  sdo_geometry := null;
  outWindow sdo_geometry := null; 
BEGIN
  dbms_lob.create_temporary(out_lob, TRUE);

  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  sdo_geor_ip.normalize(gr1, 0, cropArea, null, sdo_number_array(50, 80, 100), sdo_number_array(30, 20, 50), null, out_lob, outArea, outWindow);
  if outWindow is not null then
     dbms_output.put_line('output window: (' || outWindow(1) || ',' ||
                           outWindow(2) || ',' || outWindow(3) || ',' || outWindow(4) || ')');
  end if;
  dbms_lob.freeTemporary(out_lob);

END;
/
</pre><p>The following example creates a GeoRaster object and performs normalization on the bands of the input GeoRaster object based on the given reference GeoRaster object . (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  refgr sdo_georaster;
  cropArea sdo_number_array := null;
BEGIN
  INSERT INTO georaster_table (georid, georaster)
    VALUES (41, sdo_geor.init('RDT_1'))
    RETURNING georaster INTO gr2;

  -- get the source GeoRaster object 
  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  -- get the reference GeoRaster object
  SELECT georaster INTO refgr FROM georaster_table WHERE georid=5;

  sdo_geor_ip.normalize(gr1, 0, cropArea, null, refgr, null, gr2);
  UPDATE georaster_table SET georaster=gr2 WHERE georid=41;
  COMMIT;
END;
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram.">SDO_GEOR_IP Package Reference</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3" name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3"></a><h3 id="GEORS-GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3" class="sect3"><span class="enumeration_section">11.6 </span>SDO_GEOR_IP.piecewiseStretch
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">Format</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.piecewiseStretch(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bandNumbers  IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inValues     IN SDO_NUMBER_ARRAYSET DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outValues    IN SDO_NUMBER_ARRAYSET DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.piecewiseStretch(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layerNumbers IN VARCHAR2,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inValues     IN SDO_NUMBER_ARRAYSET DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outValues    IN SDO_NUMBER_ARRAYSET DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster IN OUT SDO_GEORASTER,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.piecewiseStretch(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bandNumbers  IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inValues     IN SDO_NUMBER_ARRAYSET DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outValues    IN SDO_NUMBER_ARRAYSET DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rasterBlob   IN OUT BLOB,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outArea      OUT SDO_GEOMETRY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outWindow    OUT SDO_NUMBER_ARRAY);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.piecewiseStretch(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea     IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layerNumbers IN VARCHAR2,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inValues     IN SDO_NUMBER_ARRAYSET DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outValues    IN SDO_NUMBER_ARRAYSET DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rasterBlob   IN OUT BLOB,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outArea      OUT SDO_GEOMETRY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outWindow    OUT SDO_NUMBER_ARRAY);</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-30001566-2066-4178-914A-29A2C4E14931">Description</p>
                     <p>Performs a linear stretch on the input GeoRaster object using the minimum and maximum values. The processed image is stored in the output GeoRaster object or in a BLOB.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF">
                              <!-- --></a>inGeoRaster
                        </dt>
                        <dd>
                           <p>The SDO_GEORASTER object to be stretched.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-5B08A3DD-8FB5-4C77-B33B-E715FE86C843">
                              <!-- --></a>pyramidLevel
                        </dt>
                        <dd>
                           <p>A number specifying the pyramid level to be stretched in the source GeoRaster object. If null, the default is 0.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-B990F65D-6226-455A-94B8-87A3958C9239">
                              <!-- --></a>cropArea
                        </dt>
                        <dd>
                           <p>Crop area definition. If <code class="codeph">cropArea</code> is of type SDO_GEOMETRY, use the <code class="codeph">layerNumbers</code> parameter to specify one or more layer numbers; if <code class="codeph">cropArea</code> is of type SDO_NUMBER_ARRAY, use the <code class="codeph">bandNumbers</code> parameter to specify one or more band numbers.
                           </p>
                           <p>If the data type is SDO_NUMBER_ARRAY, the parameter identifies the upper-left (row, column) and lower-right (row, column) coordinates of a rectangular window, and raster space is assumed. If the data type is SDO_GEOMETRY, the minimum bounding rectangle (MBR) of the geometry object is used as the crop area; see also the Usage Notes for SDO_SRID requirements.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA">
                              <!-- --></a>bandNumbers
                        </dt>
                        <dd>
                           <p>A string identifying the physical band numbers on which the operation is to be performed. Use commas to delimit the values, and a hyphen to indicate a range (for example, <code class="codeph">1-3</code> for bands 1, 2, and 3).
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-7D092C87-2E10-476C-A9DB-B1C0D3E01C1D">
                              <!-- --></a>layerNumbers
                        </dt>
                        <dd>
                           <p>A string identifying the logical layer numbers on which the operation is to be performed. Use commas to delimit the values, and a hyphen to indicate a range (for example, <code class="codeph">2-4</code> for layers 2, 3, and 4).
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-C6F3DCD5-DAB2-43DC-8B39-628FA5A3A80B">
                              <!-- --></a>inValues
                        </dt>
                        <dd>
                           <p>An array of SDO_NUMBER_ARRAY objects corresponding to each input band. If only one element is specified, all the output bands are stretched in the same way. Each SDO_NUMBER_ARRAY specifies the input GeoRaster object cell value ranges used in the stretch. For example, sdo_number_array(0, 50, 255) specifies two value ranges, from 0 to 50 and 50 to 255.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-82D89140-9FAE-4CBB-9EA1-39593A53014B">
                              <!-- --></a>outValues
                        </dt>
                        <dd>
                           <p>An array of SDO_NUMBER_ARRAY objects corresponding to each output band. If only one element is specified, all the output bands are stretched in the same way. Each SDO_NUMBER_ARRAY specifies the target values ranges corresponding to the value ranges of the <code class="codeph">inValues</code> parameter. For example, sdo_number_array(0, 200, 255) specifies two value ranges, from 0 to 200 and 200 to 255.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084">
                              <!-- --></a>storageParam
                        </dt>
                        <dd>
                           <p>A string specifying storage parameters, as explained in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-44642104-37C3-4CB8-AC3F-71AC8C4664E1">
                              <!-- --></a>outGeoRaster
                        </dt>
                        <dd>
                           <p>The output SDO_GEORASTER object that reflects the results of the operation. Must be either a valid existing GeoRaster object or an empty GeoRaster object. (Empty GeoRaster objects are explained in <a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">Blank and Empty GeoRaster Objects</a>.) Cannot be the same GeoRaster object as <code class="codeph">inGeoRaster</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-C4649244-7580-4F2D-8668-A6E937985730">
                              <!-- --></a>parallelParam
                        </dt>
                        <dd>
                           <p>Specifies the degree of parallelism for the operation. If specified, must be in the form <code class="codeph">parallel=</code><span class="italic">n</span>, where <span class="italic">n</span> is greater than 1. The database optimizer uses the degree of parallelism specified by this parameter. If not specified, then by default there is no parallel processing. (For more information, see <a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="There are two types of parallel processing with GeoRaster.">Parallel Processing in GeoRaster</a>.)
                           </p>
                           <p>If parallelism is specified, the procedure performs an internal commit while the process is running. Therefore, you cannot roll back the results of this procedure. If an error occurs (even if it is raised by the Oracle parallel server), you must delete the resulting output GeoRaster object explicitly in order to roll back the operation. </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-654735E8-DE8F-4C1B-AA4A-80CE0A3BD9E5">
                              <!-- --></a>rasterBlob
                        </dt>
                        <dd>
                           <p>BLOB to hold the output of the processing result. It must exist or have been initialized before the operation.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-ECC10B88-473D-4626-8B0D-F593D0FA1577">
                              <!-- --></a>outArea
                        </dt>
                        <dd>
                           <p>An SDO_GEOMETRY object containing the MBR (minimum bounding rectangle) in the model coordinate system of the resulting object.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-F177EB15-EB0D-487B-91AB-DE22AF4DE107">
                              <!-- --></a>outWindow
                        </dt>
                        <dd>
                           <p>An SDO_NUMBER_ARRAY object identifying the coordinates of the upper-left and lower-right corners of the output window in the cell space.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">Usage Notes</p>
                     <p>The <code class="codeph">inValues</code> and <code class="codeph">outValues</code> parameters must have the same number of values, and the range specified in the <code class="codeph">inValues</code> parameter must be in ascending order. The values in the <code class="codeph">inValues</code> parameter must be in the range of the cell depth of the <code class="codeph">inGeoRaster</code> object. The values in the <code class="codeph">outValues</code> parameter must be in the range of the cell depth of the <code class="codeph">outGeoRaster</code> object.
                     </p>
                     <p>If the <code class="codeph">cropArea</code> parameter data type is SDO_GEOMETRY, the SDO_SRID value must be one of the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Null, to specify raster space</p>
                        </li>
                        <li>
                           <p>A value from the SRID column of the MDSYS.CS_SRS table</p>
                           <p>If the SDO_SRID values for the <code class="codeph">cropArea</code> parameter geometry and the model space are different, the <code class="codeph">cropArea</code> parameter geometry is automatically transformed to the coordinate system of the model space before the operation is performed. (Raster space and model space are explained in <a href="georaster-overview-and-concepts.html#GUID-E38F1F16-4272-4CC8-A199-C97B11C634BA" title="Raster data can have some or all of the following elements.">GeoRaster Data Model</a>.)
                           </p>
                        </li>
                     </ul>
                     <p>Color map stored in the input GeoRaster object is not supported.</p>
                     <p>The output GeoRaster object has no pyramid or mask.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">Examples</p>
                     <p>The following example creates a GeoRaster object that piecewise stretches all bands of the input GeoRaster object into different cell depths: a linear stretch of input values between 0 and 255 to the range 0 to 2000. (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  cropArea sdo_number_array := null;
  inValues sdo_number_arrayset;
  outValues sdo_number_arrayset;
BEGIN
  INSERT INTO georaster_table (georid, georaster)
    VALUES (41, sdo_geor.init('RDT_1'))
    RETURNING georaster INTO gr2;

  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  -- define the input and output value ranges
  inValues := sdo_number_arrayset(sdo_number_array(0, 255));
  outValues := sdo_number_arrayset(sdo_number_array(0, 2000));

  sdo_geor_ip.piecewisestretch(gr1, 0, cropArea, null, 
                inValues, outValues, 'celldepth=16bit_u', gr2);
  UPDATE georaster_table SET georaster=gr2 WHERE georid=41;
  COMMIT;
END;
/
</pre><p>The following example piecewise stretches each band for different ranges; the output is in a temporary BLOB. (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  cropArea sdo_number_array := null;
  inValues sdo_number_arrayset;
  outValues sdo_number_arrayset;
  out_lob  BLOB;
  outArea  sdo_geometry := null;
  outWindow sdo_geometry := null; 
 BEGIN
  dbms_lob.create_temporary(out_lob, TRUE);

  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  -- define the input and output values ranges
  inValues := sdo_number_arrayset(sdo_number_array(0, 30, 80, 255), 
                                  sdo_number_array(0, 10, 50, 255),
                                  sdo_number_array(0, 50, 150, 255));
  outValues := sdo_number_arrayset(
                   sdo_number_array(0, 80, 200, 255),
                   sdo_number_array(0, 60, 150, 255),
                   sdo_number_array(0, 100, 250,255) );

  sdo_geor_ip.piecewisestretch(gr1, 0, cropArea, null, inValues, outValues,  
                                     null, out_lob, outArea, outWindow);

  if outWindow is not null then
     dbms_output.put_line('output window: (' || outWindow(1) || ',' ||
                           outWindow(2) || ',' || outWindow(3) || ',' || outWindow(4) || ')');
  end if;
  dbms_lob.freeTemporary(out_lob);

END;
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram.">SDO_GEOR_IP Package Reference</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E" name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E"></a><h3 id="GEORS-GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E" class="sect3"><span class="enumeration_section">11.7 </span>SDO_GEOR_IP.stretch
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">Format</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.stretch(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel  IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea      IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bandNumbers   IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minValues     IN SDO_NUMBER_ARRAY DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxValues     IN SDO_NUMBER_ARRAY DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam  IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster  IN OUT SDO_GEORASTER),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);&nbsp;&nbsp;&nbsp;&nbsp;
</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.stretch(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster   IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel  IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea      IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layerNumbers  IN VARCHAR2,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minValues     IN SDO_NUMBER_ARRAY DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_values    IN SDO_NUMBER_ARRAY DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam  IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outGeoraster  IN OUT SDO_GEORASTER),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parallelParam IN VARCHAR2 DEFAULT NULL);&nbsp;</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.stretch(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster  IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel  IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea      IN SDO_NUMBER_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bandNumbers   IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minValues     IN SDO_NUMBER_ARRAY DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxValues     IN SDO_NUMBER_ARRAY DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rasterBlob   IN OUT BLOB,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outArea      OUT SDO_GEOMETRY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outWindow    OUT SDO_NUMBER_ARRAY);</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.stretch(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inGeoRaster   IN SDO_GEORASTER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyramidLevel  IN NUMBER, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cropArea      IN SDO_GEOMETRY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layerNumbers  IN VARCHAR2,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minValues     IN SDO_NUMBER_ARRAY DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_values    IN SDO_NUMBER_ARRAY DEFAULT NULL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageParam IN VARCHAR2, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rasterBlob   IN OUT BLOB,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outArea      OUT SDO_GEOMETRY,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outWindow    OUT SDO_NUMBER_ARRAY);</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-30001566-2066-4178-914A-29A2C4E14931">Description</p>
                     <p>Performs a min-max linear stretch on the input GeoRaster object using the minimum and maximum values. The processed image is stored in the output GeoRaster object or in a BLOB.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF">
                              <!-- --></a>inGeoRaster
                        </dt>
                        <dd>
                           <p>The SDO_GEORASTER object to be stretched.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-5B08A3DD-8FB5-4C77-B33B-E715FE86C843">
                              <!-- --></a>pyramidLevel
                        </dt>
                        <dd>
                           <p>A number specifying the pyramid level to be stretched in the source GeoRaster object. If null, the default is 0.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-B990F65D-6226-455A-94B8-87A3958C9239">
                              <!-- --></a>cropArea
                        </dt>
                        <dd>
                           <p>Crop area definition. If <code class="codeph">cropArea</code> is of type SDO_GEOMETRY, use the <code class="codeph">layerNumbers</code> parameter to specify one or more layer numbers; if <code class="codeph">cropArea</code> is of type SDO_NUMBER_ARRAY, use the <code class="codeph">bandNumbers</code> parameter to specify one or more band numbers.
                           </p>
                           <p>If the data type is SDO_NUMBER_ARRAY, the parameter identifies the upper-left (row, column) and lower-right (row, column) coordinates of a rectangular window, and raster space is assumed. If the data type is SDO_GEOMETRY, the minimum bounding rectangle (MBR) of the geometry object is used as the crop area; see also the Usage Notes for SDO_SRID requirements.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA">
                              <!-- --></a>bandNumbers
                        </dt>
                        <dd>
                           <p>A string identifying the physical band numbers on which the operation is to be performed. Use commas to delimit the values, and a hyphen to indicate a range (for example, <code class="codeph">1-3</code> for bands 1, 2, and 3).
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-7D092C87-2E10-476C-A9DB-B1C0D3E01C1D">
                              <!-- --></a>layerNumbers
                        </dt>
                        <dd>
                           <p>A string identifying the logical layer numbers on which the operation is to be performed. Use commas to delimit the values, and a hyphen to indicate a range (for example, <code class="codeph">2-4</code> for layers 2, 3, and 4).
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-C6F3DCD5-DAB2-43DC-8B39-628FA5A3A80B">
                              <!-- --></a>minValues
                        </dt>
                        <dd>
                           <p>The minimum values of the bands to be stretched. If it is null, the minimum value of the input GeoRaster object that is stored in the layer metadata is used. If there is only one value in the SDO_NUMBER_ARRAY, it is used as the minimum value of all the input bands; otherwise, the number of values in the SDO_NUMBER_ARRAY must be the same as the number of bands of the output GeoRaster object.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-82D89140-9FAE-4CBB-9EA1-39593A53014B">
                              <!-- --></a>maxValues
                        </dt>
                        <dd>
                           <p>The maximum values of the bands to be stretched. If it is null, the maximum value of the input GeoRaster object that is stored in the layer metadata is used. If there is only one value in the SDO_NUMBER_ARRAY, it is used as the maximum value of all the input bands; otherwise, the number of values in the SDO_NUMBER_ARRAY must be the same as the number of bands of the output GeoRaster object.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084">
                              <!-- --></a>storageParam
                        </dt>
                        <dd>
                           <p>A string specifying storage parameters, as explained in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-ABBEC23E-E834-44B7-BF98-45E0F10B4474">
                              <!-- --></a>outGeoRaster
                        </dt>
                        <dd>
                           <p>The output SDO_GEORASTER object that reflects the results of the operation. Must be either a valid existing GeoRaster object or an empty GeoRaster object. (Empty GeoRaster objects are explained in <a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">Blank and Empty GeoRaster Objects</a>.) Cannot be the same GeoRaster object as <code class="codeph">inGeoRaster</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-C598A40B-39CE-4D1D-8327-CA139A11C4EC">
                              <!-- --></a>parallelParam
                        </dt>
                        <dd>
                           <p>Specifies the degree of parallelism for the operation. If specified, must be in the form <code class="codeph">parallel=</code><span class="italic">n</span>, where <span class="italic">n</span> is greater than 1. The database optimizer uses the degree of parallelism specified by this parameter. If not specified, then by default there is no parallel processing. (For more information, see <a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="There are two types of parallel processing with GeoRaster.">Parallel Processing in GeoRaster</a>.)
                           </p>
                           <p>If parallelism is specified, the procedure performs an internal commit while the process is running. Therefore, you cannot roll back the results of this procedure. If an error occurs (even if it is raised by the Oracle parallel server), you must delete the resulting output GeoRaster object explicitly in order to roll back the operation. </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-42FFD7A1-7CA2-47B0-8031-1959ECADD2D7">
                              <!-- --></a>rasterBlob
                        </dt>
                        <dd>
                           <p>BLOB to hold the output of the processing result. It must exist or have been initialized before the operation.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-F35CAC73-6F21-4B19-8D8D-602E3D9ED51A">
                              <!-- --></a>outArea
                        </dt>
                        <dd>
                           <p>An SDO_GEOMETRY object containing the MBR (minimum bounding rectangle) in the model coordinate system of the resulting object.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-09E38767-1E57-4BE6-A3E3-B0FCBA77F5D9">
                              <!-- --></a>outWindow
                        </dt>
                        <dd>
                           <p>An SDO_NUMBER_ARRAY object identifying the coordinates of the upper-left and lower-right corners of the output window in the cell space.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">Usage Notes</p>
                     <p>The input GeoRaster object is stretched to 0-255 using the values in <code class="codeph">minValues</code> and <code class="codeph">maxValues</code> parameters, or the minimum and maximum values stored in the statistics metadata of the image. If the <code class="codeph">minValues</code> and <code class="codeph">maxValues</code> parameters are null, the input GeoRaster object must have the statistics set in its metadata.
                     </p>
                     <p>The cell depth of the output GeoRaster object is always <code class="codeph">8BIT_U</code>. When a GeoRaster image needs to be stretched to an image with a cell depth other than <code class="codeph">8BIT_U</code>, you can use <a href="SDO_GEOR_IP-reference-ref.html#GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3">SDO_GEOR_IP.piecewiseStretch</a>.
                     </p>
                     <p>If the <code class="codeph">cropArea</code> parameter data type is SDO_GEOMETRY, the SDO_SRID value must be one of the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Null, to specify raster space</p>
                        </li>
                        <li>
                           <p>A value from the SRID column of the MDSYS.CS_SRS table</p>
                           <p>If the SDO_SRID values for the <code class="codeph">cropArea</code> parameter geometry and the model space are different, the <code class="codeph">cropArea</code> parameter geometry is automatically transformed to the coordinate system of the model space before the operation is performed. (Raster space and model space are explained in <a href="georaster-overview-and-concepts.html#GUID-E38F1F16-4272-4CC8-A199-C97B11C634BA" title="Raster data can have some or all of the following elements.">GeoRaster Data Model</a>.)
                           </p>
                        </li>
                     </ul>
                     <p>Color map stored in the input GeoRaster object is not supported.</p>
                     <p>The output GeoRaster object has no pyramid or mask.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">Examples</p>
                     <p>The following example creates a GeoRaster object that stretches band 2 of the input GeoRaster object from value range of (30, 150) to (0, 255). (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  cropArea sdo_number_array := null;
BEGIN
  INSERT INTO georaster_table (georid, georaster)
    VALUES (41, sdo_geor.init('RDT_1'))
    RETURNING georaster INTO gr2;

  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  sdo_geor_ip.stretch(gr1, 0, cropArea, '2', sdo_number_array(30), sdo_number_array(150), null, gr2);
  UPDATE georaster_table SET georaster=gr2 WHERE georid=41;
  COMMIT;
END;
/
</pre><p>The following example&nbsp;stretches band 2 of the input GeoRaster object from value range of (30, 150) to (0, 255); the output is in a temporary BLOB. (It refers to a table named GEORASTER_TABLE, whose definition is presented after <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">Example 1-1</a> in <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr1 sdo_georaster;
  gr2 sdo_georaster;
  cropArea sdo_number_array := null;
  out_lob  BLOB;
  outArea  sdo_geometry := null;
  outWindow sdo_geometry := null; 
 BEGIN
  dbms_lob.create_temporary(out_lob, TRUE);

  SELECT georaster INTO gr1 FROM georaster_table WHERE georid=4;

  sdo_geor_ip.stretch(gr1, 0, cropArea, '2', sdo_number_array(30), sdo_number_array(150), null, out_lob, outArea, outWindow);

  if outWindow is not null then
     dbms_output.put_line('output window: (' || outWindow(1) || ',' ||
                           outWindow(2) || ',' || outWindow(3) || ',' || outWindow(4) || ')');
  end if;
  dbms_lob.freeTemporary(out_lob);
END;
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram.">SDO_GEOR_IP Package Reference</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>